<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>#тГг ЁЯзв ЁЯЩЗ рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди MySQL рд╕реЗ Percona XtraDB рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдирд╛ ЁЯР┤ ЁЯЫА тЬМЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдкреНрд░рд╡рд╛рд╕ рдФрд░ рдкреЗрд░рдХреЛрдирд╛ XtraDB рдХреНрд▓рд╕реНрдЯрд░ (рдЗрд╕рдХреЗ рдмрд╛рдж PXC) рдХреЗ рдЙрддреНрдкрд╛рджрди рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реИ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди MySQL рд╕реЗ Percona XtraDB рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422347/"><img src="https://habrastorage.org/getpro/habr/post_images/2b3/23e/2d3/2b323e2d35539763c7a0d17a4694d5af.png" alt="рдЫрд╡рд┐"><br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдкреНрд░рд╡рд╛рд╕ рдФрд░ рдкреЗрд░рдХреЛрдирд╛ XtraDB рдХреНрд▓рд╕реНрдЯрд░ (рдЗрд╕рдХреЗ рдмрд╛рдж PXC) рдХреЗ рдЙрддреНрдкрд╛рджрди рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реИред  рдореИрдВ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдФрд░ рдЕрдкрдиреА рдХрд╣рд╛рдиреА рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред  рдХреЛрдИ рдЪрд░рдг-рджрд░-рдЪрд░рдг рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдирд┐рд░реНрджреЗрд╢ рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдФрд░ рд▓реЗрдЦ рдХреЛ рдСрдл-рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдХреЗ рд╕рдВрдЧреНрд░рд╣ рдХреЗ рд░реВрдк рдореЗрдВред <br><a name="habracut"></a><br><h3>  рд╕рдорд╕реНрдпрд╛ </h3><br>  рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрд▓реНрдЯрд┐рдореЗрдЯрд░реА рдбреЙрдЯ</a> рдХреЙрдо рдкрд░ рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВред  рдЪреВрдВрдХрд┐ рд╣рдо рдПрдХ рд╡реЗрдм рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдмреИрдХрдПрдВрдб рдФрд░ рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рд╣реИ, рдЬреЛ рд╕реЗрд╡рд╛ рдХрд╛ рдореВрд▓ рд╣реИред  рд╕реЗрд╡рд╛ рдЕрдкрдЯрд╛рдЗрдо рд╕реАрдзреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  Percona MySQL 5.7 рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдпреЛрдЬрдирд╛ рдорд╛рд╕реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд░рдХреНрд╖рдг рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдХреБрдЫ рдбреЗрдЯрд╛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рджрд╛рд╕реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/05a/ca3/bc6/05aca3bc6ba1c357cd98c280e8a07772.png" alt="рдЫрд╡рд┐"><br><br>  рд▓реЗрдХрд┐рди рдпрд╣ рдпреЛрдЬрдирд╛ рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдиреБрдХрд╕рд╛рдиреЛрдВ рдХреЗ рдЕрдиреБрдХреВрд▓ рдирд╣реАрдВ рдереА: <br><br><ul><li>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ MySQL рдкреНрд░рддрд┐рдХреГрддрд┐ рдореЗрдВ, рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рджрд╛рд╕ рдЕрдирд┐рд╢реНрдЪрд┐рдд рдХрд╛рд▓ рддрдХ рдкрд┐рдЫрдбрд╝ рд╕рдХрддреЗ рдереЗред  рд╕рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдбреЗрдЯрд╛ рдХреЛ рдорд╛рд╕реНрдЯрд░ рд╕реЗ рдкрдврд╝рдирд╛ рдкрдбрд╝рддрд╛ рдерд╛ред </li><li>  рдкрд┐рдЫрд▓реЗ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рд╕реЗ рд╡рд┐рдХрд╛рд╕ рдХреА рдЬрдЯрд┐рд▓рддрд╛ рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рддрд╛ рд╣реИред  рдбреЗрд╡рд▓рдкрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдПрдХ рдЕрдиреБрд░реЛрдз рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд╕реЛрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рдерд╛ рдХрд┐ рдХреНрдпрд╛ рд╡рд╣ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдореЗрдВ рджрд╛рд╕ рдХреЗ рдмреИрдХрд▓реЙрдЧ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдерд╛ рдФрд░ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рдкрдврд╝реЗрдВред </li><li>  рджреБрд░реНрдШрдЯрдирд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдореИрдиреБрдЕрд▓ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧред  рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╕рдорд╕реНрдпрд╛рдЧреНрд░рд╕реНрдд рдерд╛ рдХрд┐ MySQL рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдорд╕реНрддрд┐рд╖реНрдХ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рдирд╣реАрдВ рд╣реИред  рд╣рдореЗрдВ рдЦреБрдж рдХреЛ рдПрдХ рдорд╛рд╕реНрдЯрд░ рдЪреБрдирдиреЗ рдХреЗ рдЬрдЯрд┐рд▓ рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдПрдХ рдордзреНрдпрд╕реНрде рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛ред  рджреЛрдиреЛрдВ рдорд╛рд╕реНрдЯрд░реНрд╕ рдХреЛ рд▓рд┐рдЦрддреЗ рд╕рдордп, рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЯрдХрд░рд╛рд╡ рдкреИрджрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рддреЛрдбрд╝рдХрд░ рдХреНрд▓рд╛рд╕рд┐рдХ рд╡рд┐рднрд╛рдЬрди рдорд╕реНрддрд┐рд╖реНрдХ рддрдХ рд▓реЗ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br>  рдХреБрдЫ рд╕реВрдЦреЗ рдирдВрдмрд░, рддрд╛рдХрд┐ рдЖрдк рд╕рдордЭ рд╕рдХреЗрдВ рдХрд┐ рд╣рдордиреЗ рдХреНрдпрд╛ рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ: <br><br>  рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдЖрдХрд╛рд░: 300 рдЬреАрдмреА <br>  QPS: ~ 10k <br>  рдЖрд░рдбрдмреНрд▓реНрдпреВ рдЕрдиреБрдкрд╛рдд: 96/4% <br>  рдорд╛рд╕реНрдЯрд░ рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди: <br>  CPU: 2x E5-2620 v3 <br>  рд░реИрдо: 128 рдЬреАрдмреА <br>  SSD: Intel Optane 905p 960 Gb <br>  рдиреЗрдЯрд╡рд░реНрдХ: 1 рдЬреАрдмреАрдкреАрдПрд╕ <br><br>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдкрдврд╝рдиреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд╛рд╕рд┐рдХ рдУрдПрд▓рдЯреАрдкреА рд▓реЛрдб рд╣реИ, рдЬрд┐рд╕реЗ рдмрд╣реБрдд рдЬрд▓реНрджреА рдФрд░ рдереЛрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рд▓реЗрдЦрди рдХреЗ рд╕рд╛рде рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рд▓реЛрдб рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд╛рдлреА рдЫреЛрдЯрд╛ рд╣реИ рдХрд┐ рд░реЗрдбрд┐рд╕ рдФрд░ рдореЗрдордХреЗрдЪреНрдб рдореЗрдВ рдХреИрд╢рд┐рдВрдЧ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><h3>  рдирд┐рд░реНрдгрдп рд▓реЗрдирд╛ </h3><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рд╢реАрд░реНрд╖рдХ рд╕реЗ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдордиреЗ рдкреАрдПрдХреНрд╕рд╕реА рдХреЛ рдЪреБрдирд╛, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдореИрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рд╣рдордиреЗ рдЗрд╕реЗ рдХреНрдпреЛрдВ рдЪреБрдирд╛ред <br><br>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 4 рд╡рд┐рдХрд▓реНрдк рдереЗ: <br><br><ol><li>  DBMS рдмрджрд▓реЗрдВ </li><li>  MySQL рдЧреНрд░реБрдк рдкреНрд░рддрд┐рдХреГрддрд┐ </li><li>  рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдорд╛рд╕реНрдЯрд░ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╕реНрд╡рдпрдВ рд╕реНрдХреНрд░реВ рдХрд░реЗрдВред </li><li>  MySQL Galera рдХреНрд▓рд╕реНрдЯрд░ (рдпрд╛ рдЗрд╕рдХреЗ рдХрд╛рдВрдЯреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП PXC) </li></ol><br>  рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреЛ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдирд╣реАрдВ рдорд╛рдирд╛ рдЧрдпрд╛, рдХреНрдпреЛрдВрдХрд┐  рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдмрдбрд╝рд╛ рд╣реИ, рдХрдИ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдпрд╣ mysql рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдпрд╛ рд╕рд┐рдВрдЯреИрдХреНрд╕ рд╕реЗ рдмрдВрдзрд╛ рд╣реБрдЖ рд╣реИ, рдФрд░ PostgreSQL рдореЗрдВ рдорд╛рдЗрдЧреНрд░реЗрд╢рди, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмрд╣реБрдд рд╕рдордп рдФрд░ рд╕рдВрд╕рд╛рдзрди рд▓реЗрдЧрд╛ред <br><br>  рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк MySQL Group Replication рдерд╛ред  рдЗрд╕рдХрд╛ рдПрдХ рдирд┐рд╕реНрд╕рдВрджреЗрд╣ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ MySQL рдХреА рд╡реИрдирд┐рд▓рд╛ рд╢рд╛рдЦрд╛ рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдпрд╣ рд╡реНрдпрд╛рдкрдХ рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рд╕рдХреНрд░рд┐рдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдПрдХ рдмрдбрд╝рд╛ рдкреВрд▓ рд╣реЛрдЧрд╛ред <br><br>  рд▓реЗрдХрд┐рди рдЙрд╕рдХреА рдХреБрдЫ рдХрдорд┐рдпрд╛рдВ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реНрдХреАрдорд╛ рдкрд░ рдЕрдзрд┐рдХ рдкреНрд░рддрд┐рдмрдВрдз рд▓рдЧрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рдХрдард┐рди рд╣реЛрдЧрд╛ред  рджреВрд╕рд░рд╛, рд╕рдореВрд╣ рдкреНрд░рддрд┐рдХреГрддрд┐ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдФрд░ рд╡рд┐рднрд╛рдЬрд┐рдд рдорд╕реНрддрд┐рд╖реНрдХ рдХреЗ рдореБрджреНрджреЗ рдХреЛ рд╣рд▓ рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдкреНрд░рддрд┐рдХреГрддрд┐ рдЕрднреА рднреА рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╣реИред <br><br>  рд╣рдореЗрдВ рдХрдИ рд╕рд╛рдЗрдХрд┐рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рддреАрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк рднреА рдкрд╕рдВрдж рдирд╣реАрдВ рдерд╛, рдЬрд┐рд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рддреЗ рд╕рдордп рд╣рдореЗрдВ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдЧреИрд▓рд░рд╛ рдиреЗ MySQL рд╡рд┐рдлрд▓рддрд╛ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдФрд░ рджрд╛рд╕реЛрдВ рдкрд░ рдбреЗрдЯрд╛ рдХреА рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХрддрд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛ред  рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдмрдирд╛рдП рд░рдЦреА рдЬрд╛рддреА рд╣реИред  рд▓реЗрди-рджреЗрди рд╕реНрдерд╛рдиреАрдп рдиреЛрдб рдкрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдЕрд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╢реЗрд╖ рдиреЛрдбреНрд╕ рдкрд░ рдзрдХреЗрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрд▓рд╕реНрдЯрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдиреЛрдбреНрд╕ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реИрдВ рдФрд░ рдпрджрд┐ рд╡реЗ рдЕрдВрддрд░рд╛рд▓ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдХреГрддреНрд░рд┐рдо рд░реВрдк рд╕реЗ рдХрд╛рдо рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддрд╛ рд╣реИред  рдХреНрд▓рд╕реНрдЯрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд▓реЗрдирджреЗрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХреЛрдИ рднреА рдЙрд╕ рдиреЛрдб рдкрд░ рднреА рдкрд░рд╕реНрдкрд░ рд╡рд┐рд░реЛрдзреА рдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдиреЗ рдЕрднреА рддрдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рджреЛрд╣рд░рд╛рдпрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рдмрд╛рдж, рдбреЗрдЯрд╛рдмреЗрд╕ рдСрдкрд░реЗрд╢рди рд╕реНрдХреАрдо рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d8/435/190/2d8435190207a5bb711d131d852a572f.png" alt="рдЫрд╡рд┐"><br><br><h3>  рдкреНрд░рд╡рд╛рд╕ </h3><br>  рд╕рдорд╛рдзрд╛рди рдЪреБрдирдиреЗ рдХреЗ рдмрд╛рдж рджреВрд╕рд░рд╛ рдЖрдЗрдЯрдо рдХреНрдпреЛрдВ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдпрд╣ рд╕рд░рд▓ рд╣реИ - рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдХрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдкреНрд░рд╡рд╛рд╕ рд╕реЗ рдкрд╣рд▓реЗ рд╣рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдкреВрд░рд╛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><ul><li>  <b>рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП InnoDB рдЗрдВрдЬрдиред</b>  MyISAM, рдореЗрдореЛрд░реА рдФрд░ рдЕрдиреНрдп рдмреИрдХрдПрдВрдб рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИрдВред  рдпрд╣ рдХрд╛рдлреА рд╕рд░рд▓ рд░реВрдк рд╕реЗ рддрдп рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рд╣рдо рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдЗрдиреЛрдмреАрдбреА рдореЗрдВ рдмрджрд▓ рджреЗрддреЗ рд╣реИрдВред </li><li>  <b>ROW рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрд┐рдирд▓реЙрдЧред</b>  рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд┐рдирд▓реЙрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрдкрдХреЛ рдХреНрд▓рд╛рд╕рд┐рдХ рджрд╛рд╕реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдмрд┐рдирд▓реЙрдЧ рдкреНрд░рд╛рд░реВрдк ROW рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  <b>рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдПрдХ рдкреНрд░рдзрд╛рди / рдкреНрд░рд╛рд░реВрдк рдХреБрдВрдЬреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред</b>  рд╡рд┐рднрд┐рдиреНрди рдиреЛрдбреНрд╕ рд╕реЗ рдПрдХ рд╣реА рдЯреЗрдмрд▓ рдкрд░ рд╕рд╣реА рд╕рдорд╡рд░реНрддреА рд▓реЗрдЦрди рдХреЗ рд▓рд┐рдП рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдЙрди рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдирдореЗрдВ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдХреБрдВрдЬреА рдирд╣реАрдВ рд╣реИ, рдЖрдк рд╕рдордЧреНрд░ рдкреНрд░рд╛рдердорд┐рдХ рдХреБрдВрдЬреА рдпрд╛ рдСрдЯреЛ рд╡реЗрддрди рд╡реГрджреНрдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  <b>Not LOCK TABLES тАЩ, OCK GET_LOCK () / RELEASE_LOCK ()тАЩ, AB FLUSH TABLES {{рддрд╛рд▓рд┐рдХрд╛}} рдХреЗ рд╕рд╛рде READ LOCK тАЩрдпрд╛ рд▓реЗрди-рджреЗрди рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧрд╛рд╡ рд╕реНрддрд░ IAL SERIALABLEтАЩ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВред</b> </li><li>  <b>рдХреЗ рд░реВрдк рдореЗрдВ 'рдХреНрд░рд┐рдПрдЯ рдЯреЗрдмрд▓ ... рдПрдПрд╕ рд╕рд┐рд▓реЗрдХреНрдЯ' рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВ</b>  рд╡реЗ рд╕реНрдХреАрдорд╛ рдФрд░ рдбреЗрдЯрд╛ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рдорд┐рд▓рд╛рддреЗ рд╣реИрдВред  рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ 2 рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкрд╣рд▓рд╛ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдбреЗрдЯрд╛ рд╕реЗ рднрд░рддрд╛ рд╣реИред </li><li>  <b>'DISCARD TABLESPACE' рдФрд░ 'IMPORT TABLESPACE' рдХрд╛ рдкреНрд░рдпреЛрдЧ рди рдХрд░реЗрдВ</b> , рдЬреИрд╕реЗ  рдЙрдирдХреА рдкреНрд░рддрд┐рдХреГрддрд┐ рдирд╣реАрдВ рд╣реИ </li><li>  <b>'Innodb_autoinc_lock_mode' рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреЛ '2' рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВред</b>  STATEMENT рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдбреЗрдЯрд╛ рдХреЛ рджреВрд╖рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдХреЗрд╡рд▓ ROW рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрдЧреАред </li><li>  <b>рдЬреИрд╕рд╛ рдХрд┐ 'log_output' рдХреЗрд╡рд▓ 'FILE' рд╕рдорд░реНрдерд┐рдд рд╣реИред</b>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рд▓реЙрдЧ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рдирд┐рдХрд╛рд▓рдирд╛ рд╣реЛрдЧрд╛ред </li><li>  <b>XA рд▓реЗрдирджреЗрди рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИрдВред</b>  рдпрджрд┐ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдЖрдкрдХреЛ рдЙрдирдХреЗ рдмрд┐рдирд╛ рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛ред </li></ul><br>  рдореБрдЭреЗ рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдпрджрд┐ рдЖрдк рдЪрд░ 'pxc_strict_mode = PERMISSIVE' рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрди рд╕рднреА рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЛ рд╣рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдкрдХрд╛ рдбреЗрдЯрд╛ рдЖрдкрдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рддреЛ рдРрд╕рд╛ рди рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ 'pxc_strict_mode = ENFORCING' рд╕реЗрдЯ рд╣реИ, рддреЛ MySQL рдЖрдкрдХреЛ рдЙрдкрд░реЛрдХреНрдд рдСрдкрд░реЗрд╢рди рдХрд░рдиреЗ рдпрд╛ рдиреЛрдб рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрдЧрд╛ред <br><br>  рдЬрдм рд╣рдордиреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ рдФрд░ рджреЗрд╡ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╣рдо рдЕрдЧрд▓реЗ рдЪрд░рдг рдкрд░ рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h3>  рдХреНрд▓рд╕реНрдЯрд░ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди </h3><br>  рд╣рдорд╛рд░реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ рдкрд░ рдХрдИ рдбреЗрдЯрд╛рдмреЗрд╕ рдЪрд▓ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдЕрдиреНрдп рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди MySQL рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдПрдХ рдкреИрдХреЗрдЬ рдХреНрд▓рд╛рд╕рд┐рдХ mysql рдХреА рдЬрдЧрд╣ рд▓реЗрддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЗ рдХрдИ рд╕рдорд╛рдзрд╛рди рдереЗ: <br><br><ul><li>  <b>рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ VM рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рд╢реБрд░реВ рдХрд░реЗрдВред</b>  рдмрдбрд╝реЗ (рд╢реЗрд╖ рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдореЗрдВ) рдУрд╡рд░рд╣реЗрдб рд▓рд╛рдЧрдд рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдЗрдХрд╛рдИ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рдХрд╛рд░рдг рд╣рдореЗрдВ рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдпрд╛ </li><li>  <b>рдкреИрдХреЗрдЬ рдХреЗ рдЕрдкрдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдВ, рдЬреЛ рдПрдХ рдЧреИрд░-рдорд╛рдирдХ рд╕реНрдерд╛рди рдкрд░ mysql рдбрд╛рд▓ рджреЗрдЧрд╛ред</b>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рд╕рд░реНрд╡рд░ рдкрд░ mysql рдХреЗ рдХрдИ рд╕рдВрд╕реНрдХрд░рдг рд╣реЛрдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред  рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрдИ рд╕рд░реНрд╡рд░ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдкрдХреЗ рдкреИрдХреЗрдЬ рдХреЗ рдирд┐рд░рдВрддрд░ рд╕рдорд░реНрдерди, рдЬрд┐рд╕реЗ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдХрд╛рдлреА рд╕рдордп рд▓рдЧ рд╕рдХрддрд╛ рд╣реИред </li><li>  <b>рдбреЙрдХрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</b> </li></ul><br>  рд╣рдордиреЗ рдбреЙрдХрд░ рдХреЛ рдЪреБрдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдиреНрдпреВрдирддрдо рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рдХрд░рддреЗ рд╣реИрдВред  рдбреЗрдЯрд╛ рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдиреАрдп рдорд╛рддреНрд░рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдиреЗрдЯрд╡рд░реНрдХ рд▓реЗрдЯреЗрдВрд╕реА рдФрд░ рд╕реАрдкреАрдпреВ рд▓реЛрдб рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП '- рдиреЗрдЯ рд╣реЛрд╕реНрдЯ' рдСрдкрд░реЗрдЯрд┐рдВрдЧ рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╣рдореЗрдВ рдбреЙрдХрд░ рдЫрд╡рд┐ рдХрд╛ рдЕрдкрдирд╛ рд╕рдВрд╕реНрдХрд░рдг рднреА рдмрдирд╛рдирд╛ рдерд╛ред  рдХрд╛рд░рдг рдпрд╣ рд╣реИ рдХрд┐ рдкреЗрд░рдХреЛрдирд╛ рд╕реЗ рдорд╛рдирдХ рдЫрд╡рд┐ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рд╕реНрдерд┐рддрд┐ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреА рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рд░ рдмрд╛рд░ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рддреЗрдЬреА рд╕реЗ IST рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХреЗрд╡рд▓ рдЖрд╡рд╢реНрдпрдХ рдкрд░рд┐рд╡рд░реНрддрди рдЕрдкрд▓реЛрдб рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдзреАрдореА рдПрд╕рдПрд╕рдЯреА, рдЬреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред <br><br>  рдПрдХ рдЕрдиреНрдп рд╕рдорд╕реНрдпрд╛ рдХреНрд▓рд╕реНрдЯрд░ рдЖрдХрд╛рд░ рд╣реИред  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдкреВрд░реЗ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдмрдврд╝рддреЗ рдХреНрд▓рд╕реНрдЯрд░ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рддрд░рд╛рдЬреВ рдкрдврд╝рдирд╛ред  рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд╕рд╛рде, рд╕реНрдерд┐рддрд┐ рд╡рд┐рдкрд░реАрдд рд╣реИ - рдЬрдм рдкреНрд░рддрд┐рдмрджреНрдз рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдкреНрд░рддреНрдпреЗрдХ рд▓реЗрдирджреЗрди рдХреЛ рд╕рднреА рдиреЛрдбреНрд╕ рдкрд░ рдЯрдХрд░рд╛рд╡ рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдорд╛рдиреНрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рдЕрдзрд┐рдХ рдиреЛрдбреНрд╕, рдХрдорд┐рдЯрдореЗрдВрдЯ рдореЗрдВ рдЕрдзрд┐рдХ рд╕рдордп рд▓рдЧреЗрдЧрд╛ред <br>  рдпрд╣рд╛рдВ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдИ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: <br><br><ul><li>  <b>2 рдиреЛрдбреНрд╕ + рдЖрд░реНрдмрд┐рдЯрд░ред</b>  2 рдиреЛрдбреНрд╕ + рдЖрд░реНрдмрд┐рдЯрд░ред  рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдкред  рджреВрд╕рд░реЗ рдиреЛрдб рдХреА рддреИрдирд╛рддреА рдХреЗ рджреМрд░рд╛рди, рдорд╛рд╕реНрдЯрд░ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br></li><li>  <b>3 рдиреЛрдбреНрд╕ред</b>  рдХреНрд▓рд╛рд╕рд┐рдХ рд╕рдВрд╕реНрдХрд░рдгред  рдЧрддрд┐ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХрд╛ рд╕рдВрддреБрд▓рдиред  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдПрдХ рдиреЛрдб рдХреЛ рдкреВрд░реЗ рд▓реЛрдб рдХреЛ рдлреИрд▓рд╛рдирд╛ рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐  рддреАрд╕рд░реЗ рдиреЛрдб рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд╕рдордп, рджреВрд╕рд░рд╛ рджрд╛рддрд╛ рд╣реЛрдЧрд╛ред <br></li><li>  <b>4+ рдиреЛрдбреНрд╕ред</b>  рдиреЛрдб рдХреА рдПрдХ рд╕рдорд╛рди рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде, рд╡рд┐рднрд╛рдЬрди-рдорд╕реНрддрд┐рд╖реНрдХ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдордзреНрдпрд╕реНрде рдЬреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдПрдХ рд╡рд┐рдХрд▓реНрдк рдЬреЛ рдмрд╣реБрдд рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рднреА рдмрдврд╝ рд░рд╣реА рд╣реИред </li></ul><br>  рд╣рдо рдЕрднреА рддрдХ 3 рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд▓реНрдк рдкрд░ рдмрд╕реЗ рд╣реИрдВред <br><br>  рдХреНрд▓рд╕реНрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд▓рдЧрднрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди MySQL рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдХреБрдЫ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ: <br><br>  <b>"Wsrep_sst_method = xtrabackup-v2"</b> рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдиреЛрдбреНрд╕ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдиреЗ рдХреА рд╡рд┐рдзрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЕрдиреНрдп рд╡рд┐рдХрд▓реНрдк mysqldump рдФрд░ rsync рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдХреА рдЕрд╡рдзрд┐ рдХреЗ рд▓рд┐рдП рдиреЛрдб рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВред  рдореБрдЭреЗ рдЧреИрд░-xtrabackup-v2 рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдкрджреНрдзрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рдХрд╛рд░рдг рдирд╣реАрдВ рджрд┐рдЦрддрд╛ рд╣реИред <br><br>  <b>"Gcache"</b> рдХреНрд▓рд╕реНрдЯрд░ рдмрд┐рдирд▓реЙрдЧ рдХрд╛ рдПрдХ рдПрдирд╛рд▓реЙрдЧ рд╣реИред  рдпрд╣ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЖрдХрд╛рд░ рдХрд╛ рдПрдХ рдкрд░рд┐рдкрддреНрд░ рдмрдлрд░ (рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ) рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдмрдВрдж рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рд╡рд╛рдкрд╕ рдЪрд╛рд▓реВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ Gcache (IST рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди) рд╕реЗ рд▓рд╛рдкрддрд╛ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛ред  рдпрджрд┐ рдЗрд╕рдореЗрдВ рдиреЛрдб рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдиреЛрдб (рдПрд╕рдПрд╕рдЯреА рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди) рдХреА рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреБрдирдГ рд▓реЛрдбрд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  Gcache рдХрд╛ рдЖрдХрд╛рд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: wsrep_provider_options = 'gcache.size = 20G;'ред <br><br>  <b>wsrep_slave_threads</b> рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╢рд╛рд╕реНрддреНрд░реАрдп рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ рд╡рд┐рдкрд░реАрдд, рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдПрдХ рд╣реА рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдХрдИ "рд░рд╛рдЗрдЯ рд╕реЗрдЯ" рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╢реНрд░рдорд┐рдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдмреЗрд╣рддрд░ рд╣реИ рдХрд┐ 1 рдХрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рди рдЫреЛрдбрд╝реЗрдВ, рдХреНрдпреЛрдВрдХрд┐  рдПрдХ рдмрдбрд╝реЗ рд▓реЗрдЦрди рд╕реЗрдЯ рдХреЗ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЗ рдЖрд╡реЗрджрди рдХреЗ рджреМрд░рд╛рди, рдмрд╛рдХреА рдХрддрд╛рд░ рдореЗрдВ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдиреЛрдб рдкреНрд░рддрд┐рдХреГрддрд┐ рдкрд┐рдЫрдбрд╝рдиреЗ рд▓рдЧреЗрдЧреАред  рдХреБрдЫ рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ 2 * рд╕реАрдкреАрдпреВ рдереНрд░реЗрдбреНрд╕ рдкрд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рд╕рдорд╡рд░реНрддреА рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рджреЗрдЦрдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣реИред <br><br>  рд╣рдо рдореВрд▓реНрдп 64 рдкрд░ рдмрд╕реЗред рдХрдо рдореВрд▓реНрдп рдкрд░, рдХреНрд▓рд╕реНрдЯрд░ рдХрднреА-рдХрднреА рд▓реЛрдб рдХреЗ рдлрдЯрдиреЗ рдХреЗ рджреМрд░рд╛рди рдХрддрд╛рд░ рд╕реЗ рд╕рднреА рд▓реЗрдЦрди рд╕реЗрдЯреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рднрд╛рд░реА рдореБрдХреБрдЯ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ)ред <br><br>  <b>wsrep_max_ws_size</b> рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХрд▓ рд▓реЗрди-рджреЗрди <b>рдХрд╛</b> рдЖрдХрд╛рд░ 2 GB рддрдХ рд╕реАрдорд┐рдд рд╣реИред  рд▓реЗрдХрд┐рди рдкреАрдПрдХреНрд╕рд╕реА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рдмрдбрд╝реЗ рд▓реЗрдирджреЗрди рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред  20 рдПрдордмреА рдХреЗ 100 рд▓реЗрди-рджреЗрди рдХреЛ рдкреНрд░рддреНрдпреЗрдХ 2 рдЬреАрдмреА рдореЗрдВ рдкреВрд░рд╛ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдкрд╣рд▓реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд▓реЗрдирджреЗрди рдХрд╛ рдЖрдХрд╛рд░ 100 рдПрдордмреА рддрдХ рд╕реАрдорд┐рдд рдХрд┐рдпрд╛, рдФрд░ рдлрд┐рд░ рд╕реАрдорд╛ рдХреЛ рдШрдЯрд╛рдХрд░ 50 рдПрдордмреА рдХрд░ рджрд┐рдпрд╛ред <br><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рдЦреНрдд рдореЛрдб рд╕рдХреНрд╖рдо рд╣реИ, рддреЛ рдЖрдк " <b>binlog_row_image</b> " рдЪрд░ рдХреЛ "рдиреНрдпреВрдирддрдо" рдкрд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдмрд┐рдирд▓реЙрдЧ рдореЗрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдХрдИ рдЧреБрдирд╛ рдХрдо рдХрд░ рджреЗрдЧрд╛ (рдкреЗрд░рдХреЛрдирд╛ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ 10 рдЧреБрдирд╛)ред  рдпрд╣ рдбрд┐рд╕реНрдХ рд╕реНрдерд╛рди рдХреЛ рдмрдЪрд╛рдПрдЧрд╛ рдФрд░ рд▓реЗрдирджреЗрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ рдЬреЛ "binlog_row_image = full" рдХреЗ рд╕рд╛рде рд╕реАрдорд╛ рдореЗрдВ рдлрд┐рдЯ рдирд╣реАрдВ рдерд╛ред <br><br>  <b>рдПрд╕рдПрд╕рдЯреА рдХреЗ рд▓рд┐рдП рд╕реАрдорд╛рдПрдВред</b>  Xtrabackup рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдиреЛрдбреНрд╕ рдХреЛ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдпреЛрдЧ, рдереНрд░реЗрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рд╕рдВрдкреАрдбрд╝рди рд╡рд┐рдзрд┐ рдкрд░ рдПрдХ рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рдЬрдм рдиреЛрдб рднрд░ рдЬрд╛рдП, рддреЛ рджрд╛рддрд╛ рд╕рд░реНрд╡рд░ рдзреАрдорд╛ рдирд╣реАрдВ рд╢реБрд░реВ рд╣реЛред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, "sst" рдЕрдиреБрднрд╛рдЧ my.cnf рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre><code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">sst</span></span>] rlimit = <span class="hljs-number"><span class="hljs-number">80</span></span>m compressor = <span class="hljs-string"><span class="hljs-string">"pigz -3"</span></span> decompressor = <span class="hljs-string"><span class="hljs-string">"pigz -dc"</span></span> backup_threads = <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  рд╣рдо рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдХреА рдЧрддрд┐ 80 рдПрдордмреА / рдПрд╕ рддрдХ рд╕реАрдорд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╣рдо рд╕рдВрдкреАрдбрд╝рди рдХреЗ рд▓рд┐рдП рдкрд┐рдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдпрд╣ рдЧрдЬрд╝рд┐рдк рдХрд╛ рдПрдХ рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рд╕рдВрд╕реНрдХрд░рдг рд╣реИред <br><br>  <b>рдЬреАрдЯреАрдЖрдИрдбреА</b> рдпрджрд┐ рдЖрдк рдХреНрд▓рд╛рд╕рд┐рдХ рджрд╛рд╕реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдЬреАрдЯреАрдЖрдИрдбреА тАЛтАЛрдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред  рдпрд╣ рдЖрдкрдХреЛ рджрд╛рд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓реЛрдб рдХрд┐рдП рдмрд┐рдирд╛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдХрд┐рд╕реА рднреА рдиреЛрдб рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред <br><br>  рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдореИрдВ 2 рдХреНрд▓рд╕реНрдЯрд░ рддрдВрддреНрд░, рдЙрдирдХреЗ рдЕрд░реНрде рдФрд░ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред <br><br><h4>  рдкреНрд░рд╡рд╛рд╣ рдирд┐рдпрдВрддреНрд░рдг </h4><br>  рдкреНрд░рд╡рд╛рд╣ рдирд┐рдпрдВрддреНрд░рдг рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд░рд╛рдЗрдЯ рд▓реЛрдб рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИред  рдпрд╣ рдиреЛрдбреНрд╕ рдХреЛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдореЗрдВ рдмрд╣реБрдд рджреВрд░ рдЬрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣, "рд▓рдЧрднрдЧ рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ" рдкреНрд░рддрд┐рдХреГрддрд┐ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛рддреА рд╣реИред  рдСрдкрд░реЗрд╢рди рдХрд╛ рддрдВрддреНрд░ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ - рдЬреИрд╕реЗ рд╣реА рд░рд┐рд╕реЗрдкреНрд╢рди рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдореВрд▓реНрдп рддрдХ рдкрд╣реБрдВрдЪрддреА рд╣реИ, рдпрд╣ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рдХреЛ рд╕рдВрджреЗрд╢ "рдлреНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рдкреЙрдЬрд╝" рднреЗрдЬрддрд╛ рд╣реИ, рдЬреЛ рдЙрдиреНрд╣реЗрдВ рддрдм рддрдХ рдирдП рд▓реЗрдирджреЗрди рдХреЗ рд╕рд╛рде рд░реБрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рд▓реИрдЧрд┐рдВрдЧ рдиреЛрдб рдХрддрд╛рд░ рдХреЛ рдЦрддреНрдо рдирд╣реАрдВ рдХрд░ рджреЗрддрд╛ред ред <br><br>  рдЗрд╕ рд╕реЗ рдХрдИ рдЪреАрдЬреЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣реИрдВ: <br><br><ol><li>  рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рд╕рдмрд╕реЗ рдзреАрдореЗ рдиреЛрдб рдХреА рдЧрддрд┐ рд╕реЗ рд╣реЛрдЧреАред  (рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдФрд░ рдХрдбрд╝рд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред) </li><li>  рдпрджрд┐ рд▓реЗрдирджреЗрди рдХрд░рддреЗ рд╕рдордп рдЖрдкрдХреЗ рдкрд╛рд╕ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕рдВрдШрд░реНрд╖ рд╣реИрдВ, рддреЛ рдЖрдк рдлреНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рдХреЛ рдЕрдзрд┐рдХ рдЖрдХреНрд░рд╛рдордХ рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рдХрдо рд╣реЛ рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред </li><li>  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдПрдХ рдиреЛрдб рдХрд╛ рдЕрдзрд┐рдХрддрдо рдЕрдВрддрд░рд╛рд▓ рдПрдХ рд╕реНрдерд┐рд░ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдордп рд╕реЗ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдХрддрд╛рд░ рдореЗрдВ рд▓реЗрдирджреЗрди рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗред  рдЕрдВрддрд░рд╛рд▓ рд╕рдордп рдФрд╕рдд рд▓реЗрдирджреЗрди рдЖрдХрд╛рд░ рдФрд░ wsrep_slave_threads рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </li></ol><br>  рдЖрдк рдЗрд╕ рддрд░рд╣ рдлреНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ: <br><br> <code>mysql&gt; SHOW GLOBAL STATUS LIKE 'wsrep_flow_control_interval_%'; <br> wsrep_flow_control_interval_low | 36 <br> wsrep_flow_control_interval_high | 71 <br></code> <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо wsrep_flow_control_interval_high рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред  рдпрд╣ рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж FC рдард╣рд░рд╛рд╡ рдЪрд╛рд▓реВ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рдЧрдгрдирд╛ рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдХреА рдЬрд╛рддреА рд╣реИ: gcs.fc_limit * whereN (рдЬрд╣рд╛рдБ N = рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ n рдХреА рд╕рдВрдЦреНрдпрд╛ред)ред <br><br>  рджреВрд╕рд░рд╛ рдкреИрд░рд╛рдореАрдЯрд░ wsrep_flow_control_interval_low рд╣реИред  рдпрд╣ рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдХреЗ рдореВрд▓реНрдп рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рдЬрд┐рд╕ рдкрд░ рдкрд╣реБрдВрдЪрдиреЗ рдкрд░ FC рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рдХрд▓рд┐рдд: wsrep_flow_control_interval_high * gcs.fc_factorред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, gcs.fc_factor = 1ред <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдХреЛ рдмрджрд▓рдХрд░, рд╣рдо рдкреНрд░рддрд┐рдХреГрддрд┐ рдЕрдВрддрд░рд╛рд▓ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдХрдо рдХрд░рдиреЗ рд╕реЗ рдПрдлрд╕реА рдард╣рд░рд╛рд╡ рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдЦрд░реНрдЪ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдмрдврд╝ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдиреЛрдбреНрд╕ рдХреЗ рдЕрдВрддрд░рд╛рд▓ рдХреЛ рдХрдо рдХрд░ рджреЗрдЧрд╛ред <br><br>  рдЖрдк рд╕рддреНрд░ рдЪрд░ " <b>wsrep_sync_wait</b> = 7" рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдкреАрдПрдХреНрд╕рд╕реА рдХреЛ рдореМрдЬреВрджрд╛ рдХрддрд╛рд░ рдореЗрдВ рд╕рднреА рд▓рд┐рдЦрдиреЗ-рд╕реЗрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╣реА рдкрдврд╝рдиреЗ рдпрд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░реЗрдЧрд╛ред  рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рдпрд╣ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдмрдврд╝рд╛рдПрдЧрд╛ред  рд╡рд┐рд▓рдВрдмрддрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╕реАрдзреЗ рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдХреЗ рд▓рд┐рдП рдЖрдиреБрдкрд╛рддрд┐рдХ рд╣реИред <br><br>  рдЕрдзрд┐рдХрддрдо рд▓реЗрди-рджреЗрди рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдХрдо рд╕реЗ рдХрдо рдХрд░рдирд╛ рднреА рд╡рд╛рдВрдЫрдиреАрдп рд╣реИ, рддрд╛рдХрд┐ рд▓рдВрдмреЗ рд▓реЗрдирджреЗрди рдЧрд▓рддреА рд╕реЗ рдлрд┐рд╕рд▓ рди рдЬрд╛рдПред <br><br><h4>  рдИрд╡реАрдПрд╕ рдпрд╛ рдСрдЯреЛ рдПрд╡рд┐рдХреНрдЯ </h4><br>  рдпрд╣ рддрдВрддреНрд░ рдЖрдкрдХреЛ рдиреЛрдбреНрд╕ рдХреЛ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЕрд╕реНрдерд┐рд░ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреИрдХреЗрдЯ рдиреБрдХрд╕рд╛рди рдпрд╛ рд▓рдВрдмреА рджреЗрд░реА) рдпрд╛ рдЬреЛ рдзреАрд░реЗ-рдзреАрд░реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдПрдХ рдиреЛрдб рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХреА рд╕рдорд╕реНрдпрд╛рдПрдВ рдкреВрд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдирд╣реАрдВ рд▓рдЧрд╛рдПрдВрдЧреА, рд▓реЗрдХрд┐рди рдиреЛрдб рдХреЛ рдЕрдХреНрд╖рдо рд╣реЛрдиреЗ рджреЗрдВ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред  рдпрд╣ рддрдВрддреНрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рддрдм рдЙрдкрдпреЛрдЧреА рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдХреНрд▓рд╕реНрдЯрд░ WAN рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдЙрди рд╣рд┐рд╕реНрд╕реЛрдВ рд╕реЗ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдореЗрдВ рдирд╣реАрдВ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдИрд╡реАрдПрд╕ рдмрдВрдж рд╣реИред <br><br>  рдЗрд╕реЗ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <b>wsrep_provider_options</b> рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рд╡рд┐рдХрд▓реНрдк "evs.version = 1" рдЬреЛрдбрд╝реЗрдВред  рдФрд░ "evs.auto_evict = 5;"  (рдСрдкрд░реЗрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдиреЛрдб рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред 0 рдХрд╛ рдорд╛рди рдИрд╡реАрдПрд╕ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рджреЗрддрд╛ рд╣реИред) рдХрдИ рдкреИрд░рд╛рдореАрдЯрд░ рднреА рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдИрд╡реАрдПрд╕ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ: <br><br><ul><li>  <b>evs.delayed_margin</b> рдХрд┐рд╕реА рдиреЛрдб рдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордп рд▓рдЧрддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, 1 рд╕реЗрдХрдВрдбред, рд▓реЗрдХрд┐рди рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдЗрд╕реЗ 0.05-0.1 рд╕реЗрдХрдВрдб рддрдХ рдШрдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li><li>  <b>evs.inactive_check_period</b> рдЪреЗрдХреЛрдВ рдХреА рдЕрд╡рдзрд┐ред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ 0.5 рд╕реЗрдХрдВрдб </li></ul><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдИрд╡реАрдПрд╕ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдиреЛрдб рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдХрд┐ evs.inactive_check_period * evs.auto_evict рд╣реИред  рдЖрдк "evs.inactive_timeout" рднреА рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдиреЛрдб рдЬреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ рдЙрд╕реЗ рддреБрд░рдВрдд рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ 15 рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдмрд╛рд╣рд░ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдпрд╣ рд╣реИ рдХрд┐ рд╕рдВрдЪрд╛рд░ рдХреЛ рдмрд╣рд╛рд▓ рдХрд░рддреЗ рд╕рдордп рдпрд╣ рддрдВрддреНрд░ рд╕реНрд╡рдпрдВ рдиреЛрдб рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рд▓реМрдЯрд╛рдПрдЧрд╛ред  рдЗрд╕реЗ рд╣рд╛рде рд╕реЗ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рд╣рдордиреЗ рдШрд░ рдкрд░ рдИрд╡реАрдПрд╕ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреА рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдЗрд╕реЗ рдпреБрджреНрдз рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХрд╛ рдореМрдХрд╛ рдирд╣реАрдВ рдорд┐рд▓рд╛ рд╣реИред <br><br><h3>  рд▓реЛрдб рд╕рдВрддреБрд▓рди </h3><br>  рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдФрд░ рдХреЗрд╡рд▓ рд▓рд╛рдЗрд╡ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдкрд░ рдЕрдиреБрд░реЛрдз рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкрд░реНрдХреЛрдирд╛ 2 рд╕рдорд╛рдзрд╛рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  <b>ProxySQLред</b>  рдпрд╣ MySQL рдХреЗ рд▓рд┐рдП L7 рдкреНрд░реЙрдХреНрд╕реА рд╣реИред </li><li>  <b>Haproxyред</b>  рд▓реЗрдХрд┐рди рд╣рд╛рдкреНрд░реЛрд╕реА рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдб рдХреА рд╕реНрдерд┐рддрд┐ рдХреИрд╕реЗ рдЬрд╛рдВрдЪреЗрдВ рдФрд░ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░реНрдХрдиреЛ-рдХреНрд▓реЗрд╕реНрдЯрд░реНрдХреИрдЪ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рд╣реИ </li></ul><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╣рдо ProxySQL рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗ, рд▓реЗрдХрд┐рди рдмреЗрдВрдЪрдорд╛рд░реНрдХрд┐рдВрдЧ рдХреЗ рдмрд╛рдж рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рд▓реЗрдЯреЗрдВрд╕реА рдиреЗ Haproxy рдХреЛ рд▓рдЧрднрдЧ 15-20% рддрдХ рдЦреЛ рджрд┐рдпрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ fast_forward рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рднреА (рдХреНрд╡реЗрд░реА рдкреБрдирд░реНрд▓реЗрдЦрди, рд░рд╛рдЙрдЯрд┐рдВрдЧ рдФрд░ рдХрдИ рдЕрдиреНрдп ProxySQL рдлрд╝рдВрдХреНрд╢рди рдЗрд╕ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдЕрдиреБрд░реЛрдз рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдиреБрдорд╛рдирд┐рдд рд╣реИ) ред <br><br>  рд╣рд╛рдкреНрд░реЛрд╕реА рддреЗрдЬрд╝ рд╣реИ, рд▓реЗрдХрд┐рди рдкреЗрд░рдХреЛрдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдХреБрдЫ рдХрдорд┐рдпрд╛рдВ рд╣реИрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдмреИрд╢ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рдЕрдиреБрдХреВрд▓рди рдореЗрдВ рдпреЛрдЧрджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдПрдХ рдФрд░ рдЕрдзрд┐рдХ рдЧрдВрднреАрд░ рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ MySQL рдЪреЗрдХ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдХреИрд╢ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрджрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 100 рдЧреНрд░рд╛рд╣рдХ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рддреНрдпреЗрдХ 1 рд╕реЗрдХрдВрдб рдореЗрдВ рдПрдХ рдмрд╛рд░ рдиреЛрдб рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкреНрд░рддреНрдпреЗрдХ 10 рдПрдордПрд╕ рдХреЛ MySQL рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд░реЗрдЧреАред  рдпрджрд┐ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ MySQL рдзреАрд░реЗ-рдзреАрд░реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИ, рддреЛ рд╕рддреНрдпрд╛рдкрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдЧрд╛, рдЬреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕реБрдзрд╛рд░ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред <br><br>  рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд╕рдорд╛рдзрд╛рди</a> рд▓рд┐рдЦрдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдЬрд┐рд╕рдореЗрдВ MySQL рд╕реНрдЯреЗрдЯрд╕ рдЪреЗрдХ рдФрд░ Haproxy рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИрдВред  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдирд┐рдпрдорд┐рдд рдЕрдВрддрд░рд╛рд▓ рдкрд░ рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ рдиреЛрдб рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреА рд╣реИ рдФрд░ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдХреИрд╢ рдХрд░рддреА рд╣реИред  рд╡реЗрдм рд╕рд░реНрд╡рд░ рд╣рд╛рдкреНрд░реЛрд╕реА рдХреЛ рдХреИрд╢реНрдб рдкрд░рд┐рдгрд╛рдо рджреЗрддрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рд╣рд╛рдкреНрд░реЛрдХреНрд╕реА рд╡рд┐рдиреНрдпрд╛рд╕ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"> <code>listen db <br> bind 127.0.0.1:3302 <br> mode tcp <br> balance first <br> default-server inter 200 rise 6 fall 6 <br> option httpchk HEAD / <br> server node1 192.168.0.1:3302 check port 9200 id 1 <br> server node2 192.168.0.2:3302 check port 9200 backup id 2 <br> server node3 192.168.0.3:3302 check port 9200 backup id 3 <br> <br> listen db_slave <br> bind 127.0.0.1:4302 <br> mode tcp <br> balance leastconn <br> default-server inter 200 rise 6 fall 6 <br> option httpchk HEAD / <br> server node1 192.168.0.1:3302 check port 9200 backup <br> server node2 192.168.0.2:3302 check port 9200 <br> server node3 192.168.0.3:3302 check port 9200 <br></code> <br>  рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдПрдХрд▓ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рджрд┐рдЦрд╛рддрд╛ рд╣реИред  рд╢реЗрд╖ рдХреНрд▓рд╕реНрдЯрд░ рд╕рд░реНрд╡рд░ рджрд╛рд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВред <br></div></div><br><h3>  рдирд┐рдЧрд░рд╛рдиреА </h3><br>  рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдбреЗрдЯрд╛ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ + рдорд╛рдпрд╕реНрдХрд▓реНрдб_рдПрдХреНрд╕рдкреЛрд░реНрдЯ рдФрд░ рдЧреНрд░рд╛рдлрд╛рдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред  рдХреНрдпреЛрдВрдХрд┐  mysqld_exporter рдЦреБрдж рдХреЛ рдХрд╛рдлреА рдердХрд╛рдК рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЗрд░рдХреЛрдирд╛ рд╕реЗ</a> рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреИрд╢рдмреЛрд░реНрдб</a> рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдмреЗрд╕рд┐рдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдФрд░ рдЕрд▓рд░реНрдЯ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдо Zabbix рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдореБрдЦреНрдп рдХреНрд▓рд╕реНрдЯрд░ рдореАрдЯреНрд░рд┐рдХ рдЬрд┐рд╕реЗ рдЖрдк рдореЙрдирд┐рдЯрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: <br><br><ul><li>  <b>wsrep_cluster_status</b> рдХреЛ рд╕рднреА рдиреЛрдбреНрд╕ рдкрд░ рдкреНрд░рд╛рдердорд┐рдХ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдорд╛рди "рдЧреИрд░-рдкреНрд░рд╛рдердорд┐рдХ" рд╣реИ, рддреЛ рдЗрд╕ рдиреЛрдб рдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛрд░рдо рдХреЗ рд╕рд╛рде рд╕рдВрдкрд░реНрдХ рдЦреЛ рджрд┐рдпрд╛ рд╣реИред </li><li>  <b>wsrep_cluster_size</b> рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ред  рдЗрд╕рдореЗрдВ "рдЦреЛрдИ" рдиреЛрдбреНрд╕ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВред  рдЬрдм рдиреЛрдб рдХреЛ рдзреАрд░реЗ рд╕реЗ рдмрдВрдж рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕ рдЪрд░ рдХрд╛ рдореВрд▓реНрдп рдХрдо рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <b>wsrep_local_state</b> рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдиреЛрдб рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рд╕рдХреНрд░рд┐рдп рд╕рджрд╕реНрдп рд╣реИ рдФрд░ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред </li><li>  <b>wsrep_evs_state</b> рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреИрд░рд╛рдореАрдЯрд░ рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдСрдЯреЛ <b>рдПрд╡рд┐рдХреНрд╢рди</b> рдЪрд╛рд▓реВ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдВрдж)ред  рдпрд╣ рдЪрд░ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдИрд╡реАрдПрд╕ рдЗрд╕ рдиреЛрдб рдХреЛ рд╕реНрд╡рд╕реНрде рдорд╛рдирддрд╛ рд╣реИред </li><li>  <b>wsrep_evs_evict_list</b> рдиреЛрдбреНрд╕ <b>рдХреА</b> рд╕реВрдЪреА рдЬреЛ рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ EVS рджреНрд╡рд╛рд░рд╛ рдлреЗрдВрдХреА рдЧрдИ рдереАред  рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╕реВрдЪреА рдЦрд╛рд▓реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред </li><li>  рдИрд╡реАрдПрд╕ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдореНрдореАрджрд╡рд╛рд░реЛрдВ рдХреА рд╕реВрдЪреА <b>wsrep_evs_delayed</b> ред  рднреА рдЦрд╛рд▓реА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li></ul><br>  рдореБрдЦреНрдп рдкреНрд░рджрд░реНрд╢рди рдореАрдЯреНрд░рд┐рдХ: <br><br><ul><li>  рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рднреАрддрд░ <b>wsrep_evs_repl_latency</b> рджрд┐рдЦрд╛рддрд╛ рд╣реИ (рдиреНрдпреВрдирддрдо / рдФрд╕рдд / рдЕрдзрд┐рдХрддрдо / рд╡рд░рд┐рд╖реНрда рд╡рд┐рдЪрд▓рди / рдкреИрдХреЗрдЯ рдЖрдХрд╛рд░) рд╕рдВрдЪрд╛рд░ рдореЗрдВ рджреЗрд░реАред  рдпрд╣реА рд╣реИ, рдпрд╣ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдорд╛рдкрддрд╛ рд╣реИред  рдмрдврд╝рддреЗ рдорд╛рди рдиреЗрдЯрд╡рд░реНрдХ рдпрд╛ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЛ рдЕрдзрд┐рднрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗ рд╕рдХрддреЗ рд╣реИрдВред  рдИрд╡реАрдПрд╕ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рднреА рдпрд╣ рдореАрдЯреНрд░рд┐рдХ рд░рд┐рдХреЙрд░реНрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <b>wsrep_flow_control_paused_ns</b> рдиреЛрдб рд╢реБрд░реВ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж <b>рдХрд╛</b> рд╕рдордп (ns) рдореЗрдВ рд╣реИ рдЬреЛ рдЗрд╕реЗ рдлреНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рдкреЙрдЬ рдореЗрдВ рдЦрд░реНрдЪ рдХрд░рддрд╛ рд╣реИред  рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдпрд╣ 0. рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рд╡реГрджреНрдзрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдкреНрд░рджрд░реНрд╢рди рдпрд╛ "wsrep_slave_threads" рдХреА рдХрдореА рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИред  рдЖрдк рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреМрди рд╕рд╛ рдиреЛрдб рдкреИрд░рд╛рдореАрдЯрд░ " <b>wsrep_flow_control_sent</b> " рджреНрд╡рд╛рд░рд╛ рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <b>wsrep_flow_control_paused "FLUSH</b> STATUS?" рдХреЗ рдЕрдВрддрд┐рдо рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдмрд╛рдж рд╕реЗ рд╕рдордп <b>рдХрд╛</b> рдкреНрд░рддрд┐рд╢рдд, рдЬреЛ рдХрд┐ рдлреНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рдкреЙрдЬрд╝ рдореЗрдВ рдЦрд░реНрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдиреЛрдб рд╣реИред  рд╕рд╛рде рд╣реА рдкрд┐рдЫрд▓реЗ рдЪрд░, рдпрд╣ рд╢реВрдиреНрдп рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  <b>wsrep_flow_control_status</b> рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдлрд╝реНрд▓реЛ рдХрдВрдЯреНрд░реЛрд▓ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдПрдлрд╕реА рдард╣рд░рд╛рд╡ рдЖрд░рдВрдн рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдиреЛрдб рдкрд░, рдЗрд╕ рдЪрд░ рдХрд╛ рдореВрд▓реНрдп рдЪрд╛рд▓реВ рд╣реЛрдЧрд╛ред </li><li>  <b>wsrep_local_recv_queue_avg</b> рдФрд╕рдд рдХрддрд╛рд░ рдХреА рд▓рдВрдмрд╛рдИ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рд╡реГрджреНрдзрд┐ рдиреЛрдб рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИред </li><li>  <b>wsrep_local_send_queue_avg</b> рднреЗрдЬреЗрдВ рдХрддрд╛рд░ рдХреА рдФрд╕рдд рд▓рдВрдмрд╛рдИред  рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рд╡реГрджреНрдзрд┐ рдиреЗрдЯрд╡рд░реНрдХ рдкреНрд░рджрд░реНрд╢рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИред </li></ul><br>  рдЗрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдкрд░ рдХреЛрдИ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдирд╣реАрдВ рд╣реИрдВред  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдЙрдиреНрд╣реЗрдВ рд╢реВрдиреНрдп рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднрд╛рд░ рдкрд░ рдпрд╣ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реЛрдЧреА рдФрд░ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рд▓рд┐рдП рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдХреА рд╕реАрдорд╛ рдХреИрд╕реЗ рдЧреБрдЬрд░рддреА рд╣реИред <br><br><h3>  рдмреИрдХрдЕрдк </h3><br>  рдХреНрд▓рд╕реНрдЯрд░ рдмреИрдХрдЕрдк рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди mysql рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИред  рдЙрддреНрдкрд╛рджрди рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдИ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВред <br><br><ul><li>  Xtrabackup рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ "рд▓рд╛рдн" рдиреЛрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╕реЗ рдмреИрдХрдЕрдк рдирд┐рдХрд╛рд▓реЗрдВред  рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рд╡рд┐рдХрд▓реНрдк рд╣реИ, рд▓реЗрдХрд┐рди рдмреИрдХрдЕрдк рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рджреМрд░рд╛рди рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдХрдо рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рд╕реЗ рдХреНрд▓рд╛рд╕рд┐рдХ рджрд╛рд╕ рдФрд░ рдмреИрдХрдЕрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </li></ul><br>  рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди рдХреЗ рд╕рд╛рде рдмреИрдХрдЕрдк рдФрд░ xtrabackup рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЧрдП рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдЖрдкрд╕ рдореЗрдВ рдкреЛрд░реНрдЯреЗрдмрд▓ рд╣реИрдВред  рдпрд╣реА рд╣реИ, рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдмреИрдХрдЕрдк рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди mysql рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд рдореЗрдВ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, MySQL рдХреЗ рдкреНрд░рдореБрдЦ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдзрд┐рдорд╛рдирддрдГ рдорд╛рдореВрд▓реАред  Mysqldump рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдП рдЧрдП рдмреИрдХрдЕрдк рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдкреЛрд░реНрдЯреЗрдмрд▓ рд╣реИрдВред <br><br>  рдПрдХрдорд╛рддреНрд░ рдЪреЗрддрд╛рд╡рдиреА рдпрд╣ рд╣реИ рдХрд┐ рдмреИрдХрдЕрдк рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ mysql_upgrad рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЪрд▓рд╛рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рдХреБрдЫ рд╕рд┐рд╕реНрдЯрдо рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреА рдЬрд╛рдВрдЪ рдФрд░ рд╕рд╣реА рдХрд░реЗрдЧрд╛ред <br><br><h3>  рдбреЗрдЯрд╛ рдорд╛рдЗрдЧреНрд░реЗрд╢рди </h3><br>  рдЕрдм рдЬрдм рд╣рдордиреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди, рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдЕрдиреНрдп рдЪреАрдЬреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд▓рд┐рдпрд╛ рд╣реИ, рддреЛ рд╣рдо рдареЗрд╕ рдХреА рдУрд░ рдкрд▓рд╛рдпрди рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рд╣рдорд╛рд░реА рдпреЛрдЬрдирд╛ рдореЗрдВ рдбреЗрдЯрд╛ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХрд╛рдлреА рд╕рд░рд▓ рдерд╛, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдереЛрдбрд╝рд╛ рдЧрдбрд╝рдмрдбрд╝ рдХрд░ рджрд┐рдпрд╛;) <br>  рдХрд┐рдВрд╡рджрдВрддреА - рдорд╛рд╕реНрдЯрд░ 1 рдФрд░ рдорд╛рд╕реНрдЯрд░ 2 рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдорд╛рд╕реНрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВред  рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗрд╡рд▓ рдорд╛рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдЬрд╛рддреА рд╣реИ 1. рдорд╛рд╕реНрдЯрд░ 3 рдПрдХ рд╕рд╛рдл рд╕рд░реНрд╡рд░ рд╣реИред <br><br>  рд╣рдорд╛рд░реА рдкреНрд░рд╡рд╛рд╕рди рдпреЛрдЬрдирд╛ (рдпреЛрдЬрдирд╛ рдореЗрдВ рдореИрдВ рд╕рд░рд▓рддрд╛ рдХреЗ рд▓рд┐рдП рджрд╛рд╕реЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ рдФрд░ рдХреЗрд╡рд▓ рдорд╛рд╕реНрдЯрд░ рд╕рд░реНрд╡рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛)ред <br><br><h4>  рдкреНрд░рдпрд╛рд╕ 1 </h4><br><ol><li>  Xtrabackup рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╛рд╕реНрдЯрд░ 1 рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдмреИрдХрдЕрдк рдирд┐рдХрд╛рд▓реЗрдВред </li><li>  3 рдорд╛рд╕реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдПрдБ рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдПрдХрд▓-рдиреЛрдб рдореЛрдб рдореЗрдВ рдЪрд▓рд╛рдПрдБред </li><li>  рдорд╛рд╕реНрдЯрд░реНрд╕ 3 рдФрд░ 1 рдХреЗ рдмреАрдЪ рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </li><li>  рдорд╛рд╕реНрдЯрд░ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЛ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ 3. рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред </li><li>  рдорд╛рд╕реНрдЯрд░ 2 рдкрд░, рдкреНрд░рддрд┐рдХреГрддрд┐ рдмрдВрдж рдХрд░реЗрдВ рдФрд░ MySQL рдХреНрд▓рд╕реНрдЯрд░ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВред  рд╣рдо рдорд╛рд╕реНрдЯрд░ рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдХреЙрдкреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред 3. рдирдХрд▓ рдХреЗ рджреМрд░рд╛рди, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ "рдбреЛрдирд░" рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдПрдХ рдиреЛрдб рдХрд╛ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдерд╛ рдФрд░ рдПрдХ рдЕрднреА рднреА рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рдиреЛрдб рд╣реИред  рдХреЙрдкреА рдХрд░рдиреЗ рдХреЗ рджреМрд░рд╛рди, рд╣рдореЗрдВ рддрд╛рд▓реЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдорд┐рд▓рд╛ рдФрд░ рдЕрдВрдд рдореЗрдВ рджреЛрдиреЛрдВ рдиреЛрдбреНрд╕ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдЧрд┐рд░ рдЧрдП (рдореГрдд рддрд╛рд▓реЗ рдХреЗ рдХрд╛рд░рдг рдПрдХ рдирдпрд╛ рдиреЛрдб рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред  рдЗрд╕ рдЫреЛрдЯреЗ рд╕реЗ рдкреНрд░рдпреЛрдЧ рдиреЗ рд╣рдореЗрдВ рдЪрд╛рд░ рдорд┐рдирдЯ рдХреЗ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХреА рд▓рд╛рдЧрдд рджреАред </li><li>  рд╡рд╛рдкрд╕ рдкрдврдирд╛ рдФрд░ рд▓рд┐рдЦрдирд╛ рез рдЧреБрд░реБ рдХреЗ рд▓рд┐рдПред </li></ol><br>  рдкреНрд░рд╡рд╛рд╕рди рдиреЗ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рджреЗрд╡ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╕рд░реНрдХрд┐рдЯ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╕рдордп, рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдХреЛрдИ рд▓рд┐рдЦрдиреЗ рд╡рд╛рд▓рд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдирд╣реАрдВ рдерд╛, рдФрд░ рд▓реЛрдб рдХреЗ рддрд╣рдд рдПрдХ рд╣реА рд╕рд░реНрдХрд┐рдЯ рдХреЛ рджреЛрд╣рд░рд╛рддреЗ рд╕рдордп, рд╕рдорд╕реНрдпрд╛рдПрдВ рдмрд╛рд╣рд░ рд╣реЛ рдЧрдИрдВред <br>  рд╣рдордиреЗ рдЗрди рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдЗрдЧреНрд░реЗрд╢рди рд╕реНрдХреАрдо рдХреЛ рдереЛрдбрд╝рд╛ рдмрджрд▓ рджрд┐рдпрд╛ рдФрд░ рджреВрд╕рд░реА рдмрд╛рд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛;)ред <br><br><h4>  рдкреНрд░рдпрд╛рд╕ реи </h4><br><ol><li>  рд╣рдо рдорд╛рд╕реНрдЯрд░ 3 рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдПрдХрд▓-рдиреЛрдб рдореЛрдб рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдХрд╛рдо рдХрд░реЗред </li><li>  рд╣рдо рдорд╛рд╕реНрдЯрд░ 2 рдкрд░ рдлрд┐рд░ рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ MySQL рдмрдврд╝рд╛рддреЗ рд╣реИрдВред  рдлрд┐рд▓рд╣рд╛рд▓, рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реЗ рдпрд╛рддрд╛рдпрд╛рдд рдХреЗрд╡рд▓ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛, рдЗрд╕рд▓рд┐рдП рддрд╛рд▓реЗ рдХреЗ рд╕рд╛рде рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рдереА рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рджреВрд╕рд░рд╛ рдиреЛрдб рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛ред </li><li>  рдлрд┐рд░ рд╕реЗ, рдорд╛рд╕реНрдЯрд░ рдХреЛ рдкрдврд╝рдирд╛ рдФрд░ рд▓рд┐рдЦрдирд╛ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ 3. рд╣рдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред </li><li>  рдорд╛рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдорд╛рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВред рдорд╛рд╕реНрдЯрд░ 1 рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ mysql рдЪрд╛рд▓реВ рдХрд░реЗрдВ рдФрд░ рдЗрд╕рдХреЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред  рдПрдХ рд╣реА рд░реЗрдХ рдкрд░ рдХрджрдо рдирд╣реАрдВ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЖрд╡реЗрджрди рджрд╛рддрд╛ рдиреЛрдб (рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП, рд▓реЛрдб рд╕рдВрддреБрд▓рди рдкрд░ рдЕрдиреБрднрд╛рдЧ рджреЗрдЦреЗрдВ) рдХреЛ рди рд▓рд┐рдЦреЗред  рддреАрд╕рд░рд╛ рдиреЛрдб рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рддреАрди рдиреЛрдбреНрд╕ рдХрд╛ рдПрдХ рдкреВрд░реНрдг рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдХреНрд▓рд╕реНрдЯрд░ рд╣реЛрдЧрд╛ред </li><li>  рдЖрдк рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдиреЛрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╕реЗ рдПрдХ рдмреИрдХрдЕрдк рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХ рдХреНрд▓рд╛рд╕рд┐рдХ рджрд╛рд╕реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред </li></ol><br>  рджреВрд╕рд░реА рдпреЛрдЬрдирд╛ рдФрд░ рдкрд╣рд▓реЗ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдордиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рджреВрд╕рд░рд╛ рдиреЛрдб рдмрдврд╝рд╛рдиреЗ рдХреЗ рдмрд╛рдж рд╣реА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рд╕реНрд╡рд┐рдЪ рдХрд┐рдпрд╛ рд╣реИред <br><br>  рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣рдореЗрдВ рд▓рдЧрднрдЧ 6 рдШрдВрдЯреЗ рд▓рдЧреЗред <br><br><h3>  рдорд▓реНрдЯреА рдорд╛рд╕реНрдЯрд░ </h3><br>  рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рдмрд╛рдж, рд╣рдорд╛рд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдиреЗ рд╕рд┐рдВрдЧрд▓-рдорд╛рд╕реНрдЯрд░ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд┐рдпрд╛, рдпрд╛рдиреА рдкреВрд░рд╛ рд░рд┐рдХреЙрд░реНрдб рд╕рд░реНрд╡рд░ рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛, рдФрд░ рдХреЗрд╡рд▓ рдбреЗрдЯрд╛ рдмрд╛рдХреА рд╣рд┐рд╕реНрд╕реЛрдВ рд╕реЗ рдкрдврд╝рд╛ рдЧрдпрд╛ред <br><br>  рдЙрддреНрдкрд╛рджрди рдХреЛ рдорд▓реНрдЯреА-рдорд╛рд╕реНрдЯрд░ рдореЛрдб рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ - рд▓реЗрди-рджреЗрди рд╕рдВрдШрд░реНрд╖ рд╣рдорд╛рд░реА рдЕрдкреЗрдХреНрд╖рд╛ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╣реБрдЖред  рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд╕рд╛рде рдмреБрд░рд╛ рдерд╛ рдЬреЛ рдХрдИ рд░рд┐рдХреЙрд░реНрдбреЛрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рд╕рднреА рд░рд┐рдХреЙрд░реНрдбреЛрдВ рдХреЗ рдореВрд▓реНрдп рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ред  рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдПрдХ рд╣реА рдиреЛрдб рдкрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЧрдП рд▓реЗрди-рджреЗрди рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдПрдХ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд▓реЗрди-рджреЗрди рдореЗрдВ рдПрдХ рдбреЗрдбрд▓реЙрдХ рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИред  рдореИрдВ рджреЗрд░реА рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдЖрд╡реЗрджрди рд╕реНрддрд░ рдкрд░ рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рдХрдИ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рдорд▓реНрдЯреА-рдорд╛рд╕реНрдЯрд░ рдХреЗ рд╡рд┐рдЪрд╛рд░ рдХреЛ рддреНрдпрд╛рдЧ рджрд┐рдпрд╛ред <br><br><h3>  рдЕрдиреНрдп рдмрд╛рд░реАрдХрд┐рдпреЛрдВ </h3><br><ul><li>  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдЧреБрд▓рд╛рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдореИрдВ рдЙрд╕ рд╕рднреА рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдиреЛрдбреНрд╕ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдЬреЛ рджрд╛рд╕ рд╡рд┐рдХрд▓реНрдк "Skip_slave_start = 1" рд╣реИред  рдЕрдиреНрдпрдерд╛, рдкреНрд░рддреНрдпреЗрдХ рдирдпрд╛ рдиреЛрдб рдорд╛рд╕реНрдЯрд░ рд╕реЗ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╢реБрд░реВ рдХрд░реЗрдЧрд╛, рдЬреЛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдкрд░ рдпрд╛ рддреЛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдпрд╛ рдбреЗрдЯрд╛ рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред </li><li>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдХрд╣рд╛ рдХрд┐ рдбреЛрдирд░, рдПрдХ рдиреЛрдб рдареАрдХ рд╕реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреА рд╕реЗрд╡рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдпрд╛рдж рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рддреАрди рдиреЛрдбреНрд╕ рдХреЗ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ, рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рд╕рдВрднрд╡ рд╣реИрдВ рдЬрдм рдПрдХ рдиреЛрдб рдмрд╣ рдЧрдпрд╛ рд╣реИ, рджреВрд╕рд░рд╛ рдПрдХ рджрд╛рддрд╛ рд╣реИ рдФрд░ рдЧреНрд░рд╛рд╣рдХ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдПрдХ рдиреЛрдб рд╢реЗрд╖ рд╣реИред </li></ul><br><h3>  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br>  рдкреНрд░рд╡рд╛рд╕рди рдФрд░ рдХреБрдЫ рдСрдкрд░реЗрд╢рди рдХреЗ рд╕рдордп рдХреЗ рдмрд╛рдж, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рд╖реНрдХрд░реНрд╖ рдкрд░ рдЖрдПред <br><br><ul><li>  рдЧреИрд▓реЗрд░рд╛ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХрд╛рдлреА рд╕реНрдерд┐рд░ рд╣реИ (рдХрдо рд╕реЗ рдХрдо рдЬрдм рддрдХ рдиреЛрдбреНрд╕ рдпрд╛ рдЙрдирдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╡реНрдпрд╡рд╣рд╛рд░ рдХреА рдХреЛрдИ рдЕрд╕рд╛рдорд╛рдиреНрдп рдмреВрдВрдж рдирд╣реАрдВ рд╣реБрдИ рд╣реИ)ред  рдЧрд▓рддреА рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рд╣рдореЗрдВ рд╡рд╣реА рдорд┐рд▓рд╛ рдЬреЛ рд╣рдо рдЪрд╛рд╣рддреЗ рдереЗред </li><li>  рдкрд░реНрдХреЛрдирд╛ рдХреЗ рдорд▓реНрдЯреА-рдорд╛рд╕реНрдЯрд░ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдорд╛рд░реНрдХреЗрдЯрд┐рдВрдЧ рд╣реИрдВред  рд╣рд╛рдВ, рдЗрд╕ рдореЛрдб рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд▓рд┐рдП рдЗрд╕ рдЙрдкрдпреЛрдЧ рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдЧрд╣рди рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </li><li>  рдХреЛрдИ рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдм рд╣рдо рдиреЛрдбреНрд╕ рдХреЗ рдЕрдзрд┐рдХрддрдо рдЕрдВрддрд░рд╛рд▓ (рд▓реЗрдирджреЗрди рдореЗрдВ) рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  50 рдПрдордмреА рдХреЗ рдЕрдзрд┐рдХрддрдо рд▓реЗрди-рджреЗрди рдХреЗ рдЖрдХрд╛рд░ рдХреА рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде, рд╣рдо рдиреЛрдбреНрд╕ рдХреЗ рдЕрдзрд┐рдХрддрдо рдЕрдВрддрд░рд╛рд▓ рд╕рдордп рдХрд╛ рд╕рдЯреАрдХ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЧрдпрд╛ рд╣реИред </li><li>  рдирд┐рдЧрд░рд╛рдиреА рдореЗрдВ, рд╣рдо рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрддрд╛рд░ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ рдЪреЛрдЯрд┐рдпреЛрдВ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рд╣рдорд╛рд░реЗ 1 Gbit / s рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реИред  рдРрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рд▓реЛрдб рдХреЗ рдлрдЯрдиреЗ рдХреЗ рджреМрд░рд╛рди рд╕рдорд╕реНрдпрд╛рдПрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВред  рдЕрдм рд╣рдо рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ 10 Gbit / s рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВред </li></ul><br>  рдХреБрд▓ рддреАрди "рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ" рд╣рдореЗрдВ рд▓рдЧрднрдЧ рдбреЗрдврд╝ рдкреНрд░рд╛рдкреНрдд рд╣реБрдПред  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЖрд╡рд╢реНрдпрдХрддрд╛ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рд╣реИред <br><br>  рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реА PXC рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓: <br><br><div class="spoiler">  <b class="spoiler_title">my.cnf</b> <div class="spoiler_text"> <code>[mysqld] <br> #Main <br> server-id = 1 <br> datadir = /var/lib/mysql <br> socket = mysql.sock <br> port = 3302 <br> pid-file = mysql.pid <br> tmpdir = /tmp <br> large_pages = 1 <br> skip_slave_start = 1 <br> read_only = 0 <br> secure-file-priv = /tmp/ <br> <br> #Engine <br> innodb_numa_interleave = 1 <br> innodb_flush_method = O_DIRECT <br> innodb_flush_log_at_trx_commit = 2 <br> innodb_file_format = Barracuda <br> join_buffer_size = 1048576 <br> tmp-table-size = 512M <br> max-heap-table-size = 1G <br> innodb_file_per_table = 1 <br> sql_mode = "NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,ERROR_FOR_DIVISION_BY_ZERO" <br> default_storage_engine = InnoDB <br> innodb_autoinc_lock_mode = 2 <br> <br> #Wsrep <br> wsrep_provider = "/usr/lib64/galera3/libgalera_smm.so" <br> wsrep_cluster_address = "gcomm://192.168.0.1:4577,192.168.0.2:4577,192.168.0.3:4577" <br> wsrep_cluster_name = "prod" <br> wsrep_node_name = node1 <br> wsrep_node_address = "192.168.0.1" <br> wsrep_sst_method = xtrabackup-v2 <br> wsrep_sst_auth = "USER:PASS" <br> pxc_strict_mode = ENFORCING <br> wsrep_slave_threads = 64 <br> wsrep_sst_receive_address = "192.168.0.1:4444" <br> wsrep_max_ws_size = 50M <br> wsrep_retry_autocommit = 2 <br> wsrep_provider_options = "gmcast.listen_addr=tcp://192.168.0.1:4577; ist.recv_addr=192.168.0.1:4578; gcache.size=30G; pc.checksum=true; evs.version=1; evs.auto_evict=5; gcs.fc_limit=80; gcs.fc_factor=0.75; gcs.max_packet_size=64500;" <br> <br> #Binlog <br> expire-logs-days = 4 <br> relay-log = mysql-relay-bin <br> log_slave_updates = 1 <br> binlog_format = ROW <br> binlog_row_image = minimal <br> log_bin = mysql-bin <br> log_bin_trust_function_creators = 1 <br> <br> #Replication <br> slave-skip-errors = OFF <br> relay_log_info_repository = TABLE <br> relay_log_recovery = ON <br> master_info_repository = TABLE <br> gtid-mode = ON <br> enforce-gtid-consistency = ON <br> <br> #Cache <br> query_cache_size = 0 <br> query_cache_type = 0 <br> thread_cache_size = 512 <br> table-open-cache = 4096 <br> innodb_buffer_pool_size = 72G <br> innodb_buffer_pool_instances = 36 <br> key_buffer_size = 16M <br> <br> #Logging <br> log-error = /var/log/stdout.log <br> log_error_verbosity = 1 <br> slow_query_log = 0 <br> long_query_time = 10 <br> log_output = FILE <br> innodb_monitor_enable = "all" <br> <br> #Timeout <br> max_allowed_packet = 512M <br> net_read_timeout = 1200 <br> net_write_timeout = 1200 <br> interactive_timeout = 28800 <br> wait_timeout = 28800 <br> max_connections = 22000 <br> max_connect_errors = 18446744073709551615 <br> slave-net-timeout = 60 <br> <br> #Static Values <br> ignore_db_dir = "lost+found" <br> <br> [sst] <br> rlimit = 80m <br> compressor = "pigz -3" <br> decompressor = "pigz -dc" <br> backup_threads = 8 <br></code> <br></div></div><br><h3>  рд╕реНрд░реЛрдд рдФрд░ рдЙрдкрдпреЛрдЧреА рд▓рд┐рдВрдХ </h3><br>  тЖТ <a href="">рд╣рдорд╛рд░реА рдбреЙрдХрд░ рдЫрд╡рд┐</a> <br>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░реНрдХреЛрдирд╛ рдПрдХреНрд╕реНрдЯреНрд░рд╛рдмреАрдбреА рдХреНрд▓рд╕реНрдЯрд░ 5.7 рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди</a> <br>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрдЯреЗрдЯрд╕ - рдЧреИрд▓рд░рд╛ рдХреНрд▓рд╕реНрдЯрд░ рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди</a> <br>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреИрд▓реЗрд░рд╛ рд╕реНрдерд┐рддрд┐ рдЪрд░ - рдЧреИрд▓реЗрд░рд╛ рдХреНрд▓рд╕реНрдЯрд░ рдкреНрд░рд▓реЗрдЦрди</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi422347/">https://habr.com/ru/post/hi422347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi422335/index.html">рд╕рдмрд╕реЗ рдЫреЛрдЯрд╛ рд▓рд┐рдирдХреНрд╕ рдХрдВрдкреНрдпреВрдЯрд░</a></li>
<li><a href="../hi422337/index.html">рдпреИрдВрдбреЗрдХреНрд╕ рдиреЗ рдПрдХ рдХреНрд▓рд╛рдЙрдб рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi422339/index.html">"рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡реЗрдм рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИред" рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ 10 рдкреНрд░рд╢реНрди, 4 рд░рд┐рд▓реАрдЬрд╝ (рдмрд░реНрд▓рд┐рди рд╕реЗ)</a></li>
<li><a href="../hi422341/index.html">IoT - рдкреНрд░рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрдмрдХрд┐ рдЕрдиреНрдп рд╕реЛрдЪрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi422345/index.html">рдмрд╛рджрд▓реЛрдВ рдореЗрдВ рд╕рд░реНрд╡рд░: рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рд╛рд░рд╛рдВрд╢</a></li>
<li><a href="../hi422363/index.html">PyCon Russia 2018 рд╕рдореНрдореЗрд▓рди: рд╕рднреА рд░рд┐рдкреЛрд░реНрдЯреЛрдВ рдФрд░ рдкреНрд░рд╕реНрддреБрддрд┐рдпреЛрдВ рдХрд╛ рд╡реАрдбрд┐рдпреЛ</a></li>
<li><a href="../hi422365/index.html">рдпрд╛рдВрдбреЗрдХреНрд╕ рдиреЗ рдкрд╛рдпрд░реЗрдЯреЗрдб рд╕рд╛рдордЧреНрд░реА рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрджрд╛рд▓рдд рдХреЗ рдлреИрд╕рд▓реЗ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╢рд┐рдХрд╛рдпрдд рджрд░реНрдЬ рдХреА</a></li>
<li><a href="../hi422367/index.html">рдлреБрд▓ рдереНрд░реЛрдЯрд▓ рд░реАрдорд╛рд╕реНрдЯрд░реНрдб рдХреЗ рд▓рд┐рдП рд╡реАрдбрд┐рдпреЛ рдХреИрд╕реЗ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред рднрд╛рдЧ реи</a></li>
<li><a href="../hi422369/index.html">рд╡реЗрдм рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдИ-рдХреЙрдорд░реНрд╕ рд╕рд╛рдЗрдЯ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╛рдЗрдирд┐рдВрдЧ рдбреИрд╢рдмреЛрд░реНрдбред рднрд╛рдЧ 2: рдИрдореЗрд▓ рдиреНрдпреВрдЬрд╝рд▓реЗрдЯрд░ред рд░рдгрдиреАрддрд┐рдХ рдбреИрд╢рдмреЛрд░реНрдб</a></li>
<li><a href="../hi422371/index.html">рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдмрд╛рдЗрдХ рдЯреНрд╡рд┐рдЯрд░ TW-E9L рдХреА рд╕рдореАрдХреНрд╖рд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>