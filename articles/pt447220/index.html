<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö üêÅ üë®üèø‚Äçüöí No√ß√µes b√°sicas do mecanismo JavaScript: formul√°rios gerais e cache embutido. Parte 2 üïî üë®‚Äçüî¨ ‚ñ´Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! O curso "Seguran√ßa dos sistemas de informa√ß√£o" come√ßa em duas semanas, ent√£o hoje queremos publicar a segunda parte do artigo, cuja publi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>No√ß√µes b√°sicas do mecanismo JavaScript: formul√°rios gerais e cache embutido. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/447220/"> Ol√° pessoal!  O curso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Seguran√ßa dos sistemas de informa√ß√£o"</a> come√ßa em duas semanas, ent√£o hoje queremos publicar a segunda parte do artigo, cuja publica√ß√£o est√° programada para coincidir com o seu lan√ßamento.  Voc√™ pode ler a primeira parte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Ent√£o, vamos come√ßar. <br><br>  <b>Caches em linha (ICs)</b> <br><br>  A principal id√©ia por tr√°s dos formul√°rios √© o conceito de caches embutidos ou ICs.  Eles s√£o um componente essencial do JavaScript r√°pido!  Os mecanismos JavaScript usam ICs para lembrar informa√ß√µes sobre onde encontrar as propriedades dos objetos para reduzir o n√∫mero de pesquisas dispendiosas. <br><br><img src="https://habrastorage.org/webt/fc/3g/jh/fc3gjhnvdedkse5o_5ql2fhous0.png"><br><a name="habracut"></a><br>  Temos uma fun√ß√£o <code>getX</code> que pega um objeto como entrada e carrega a propriedade <code>x</code> partir dele: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getX</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">o</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ox; }</code> </pre> <br>  Se executarmos essa fun√ß√£o no JSC, obteremos o seguinte bytecode: <br><br><img src="https://habrastorage.org/webt/jw/_j/on/jw_jongrfbf3joq7vhvn_cv9g9e.png"><br><br>  A primeira <code>get_by_id</code> carrega a propriedade <code>'x'</code> do primeiro argumento <code>(arg1)</code> e armazena o resultado em <code>loc0</code> .  A declara√ß√£o a seguir retorna o que armazenamos em <code>loc0</code> . <br>  O JSC tamb√©m incorpora o <i>cache embutido</i> na <code>get_by_id</code> , que consiste em dois slots n√£o inicializados. <br><br><img src="https://habrastorage.org/webt/do/cx/b7/docxb7bxpqo3qo7fj064nhjwtjq.png"><br><br>  Agora vamos assumir que chamamos <code>getX</code> junto com o objeto <code>{ x: 'a' }</code> .  J√° sabemos que esse objeto tem a propriedade <code>'x'</code> e sua forma armazena o deslocamento e os atributos da propriedade <code></code> .  Quando voc√™ executa a fun√ß√£o pela primeira vez, a instru√ß√£o <code>get_by_id</code> a propriedade <code>'x'</code> e descobre que seu valor √© armazenado no deslocamento 0. <br><br><img src="https://habrastorage.org/webt/kt/4m/9p/kt4m9pi42jd6rqkwuoenfoddd5k.png"><br><br>  O IC <code>get_by_id</code> incorporado √† instru√ß√£o lembra a forma e o deslocamento em que a propriedade foi encontrada. <br><br><img src="https://habrastorage.org/webt/ra/25/4s/ra254sb_0qyueyxvvxdtefyug7u.png"><br><br>  Para ICs subsequentes, voc√™ s√≥ precisa comparar o formul√°rio e, se for o mesmo de antes, basta carregar o valor do deslocamento armazenado.  Em particular, se o mecanismo JavaScript vir objetos com um formul√°rio que ele escreveu anteriormente, ele n√£o precisar√° mais solicitar informa√ß√µes sobre essas propriedades; em vez disso, uma pesquisa dispendiosa por informa√ß√µes sobre propriedades poder√° ser completamente ignorada.  Isso √© significativamente mais r√°pido do que gastar tempo procurando propriedades a cada vez. <br><br>  <b>Armazenamento eficiente de matrizes</b> <br><br>  Para matrizes, √© pr√°tica comum armazenar √≠ndices de matriz.  Os valores dessas propriedades s√£o chamados de elementos da matriz.  Seria um desperd√≠cio armazenar atributos de propriedade para cada elemento da matriz em uma matriz separada.  Em vez disso, os mecanismos JavaScript dependem do fato de que as propriedades indexadas em uma matriz s√£o grav√°veis, enumer√°veis ‚Äã‚Äãe configur√°veis ‚Äã‚Äãpor padr√£o e tamb√©m armazenam elementos da matriz separadamente de outras propriedades nomeadas. <br><br>  Considere a seguinte matriz: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> array = [ <span class="hljs-string"><span class="hljs-string">'#jsconfeu'</span></span>, ];</code> </pre> <br>  O mecanismo armazena uma matriz de comprimentos de unidade e aponta para uma forma que cont√©m o deslocamento e os atributos para a propriedade <code>'length'</code> . <br><br><img src="https://habrastorage.org/webt/xo/iw/r5/xoiwr5gtt9bdfqahukpjmrjbazq.png"><br><br>  Isso √© semelhante ao que vimos antes ... Mas onde est√£o os valores dos elementos da matriz armazenados? <br><br><img src="https://habrastorage.org/webt/ee/an/vf/eeanvffuyp5vc44l4v826c0tucg.png"><br><br>  Cada matriz possui um armazenamento de elemento separado, contendo todos os valores de propriedades indexados pela matriz.  O mecanismo JavaScript n√£o precisa armazenar nenhum atributo de propriedade para os elementos da matriz, pois eles geralmente s√£o grav√°veis, enumer√°veis ‚Äã‚Äãe configur√°veis. <br><br>  Mas o que acontece se eles de repente ficarem indispon√≠veis para configura√ß√£o?  E se voc√™ alterar os atributos de uma propriedade de um elemento da matriz? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Please don't ever do this! const array = Object.defineProperty( [], '0', { value: 'Oh noes!!1', writable: false, enumerable: false, configurable: false, } );</span></span></code> </pre> <br>  O snippet de c√≥digo acima define uma propriedade chamada <code>'0'</code> (nesse caso, acaba sendo um √≠ndice da matriz), altera os valores do atributo para valores n√£o padr√£o. <br><br>  Nesses casos extremos, o mecanismo JavaScript apresenta todo o armazenamento de backup de elementos como um dicion√°rio que mapeia os √≠ndices da matriz para os atributos de propriedade. <br><br><img src="https://habrastorage.org/webt/ad/h4/yj/adh4yjto8mgxrjjy7bzdlontb0i.png"><br><br>  Mesmo se apenas um elemento da matriz tiver atributos n√£o padr√£o, todo o armazenamento de c√≥pias de backup dos elementos entrar√° em um modo de opera√ß√£o lento e ineficiente.  Evite <code>Object.defineProperty</code> nos √≠ndices da matriz!  (Eu nem sei por que voc√™ deveria us√°-lo em princ√≠pio. Parece estranho e irracional.) <br><br>  <b>Conclus√µes</b> <br><br>  Aprendemos como os mecanismos JavaScript armazenam objetos e matrizes, como formul√°rios e caches embutidos ajudam a otimizar v√°rias opera√ß√µes.  Tamb√©m neste artigo, queremos dar algumas dicas pr√°ticas para JavaScript que podem ajudar a aumentar o desempenho do seu c√≥digo: <br><br><ul><li>  Sempre inicialize seus objetos da mesma maneira para que eles n√£o tenham formas diferentes; </li><li>  N√£o mexa nos atributos das propriedades dos elementos da matriz, d√™ a eles a oportunidade de serem armazenados e trabalhar com seguran√ßa com seguran√ßa. </li></ul><br>  Agora o artigo pode ser considerado completo.  De acordo com a tradi√ß√£o estabelecida, aguardamos seus coment√°rios e convidamos voc√™ a se inscrever em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um webinar aberto</a> sobre o curso "Seguran√ßa dos sistemas de informa√ß√£o", que ser√° realizado hoje por um conhecido analista de v√≠rus e professor em tempo parcial - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alexander Kolesnikov</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Leia a primeira parte.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447220/">https://habr.com/ru/post/pt447220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447208/index.html">Dias da SQA - Revis√£o da UE</a></li>
<li><a href="../pt447210/index.html">@Pythonetc compilation Mar√ßo de 2019</a></li>
<li><a href="../pt447212/index.html">Dicas e truques do meu canal de telegrama @pythonetc, mar√ßo de 2019</a></li>
<li><a href="../pt447214/index.html">Como melhorar o design do jogo com estrat√©gias ideais</a></li>
<li><a href="../pt447218/index.html">An√°lise do JPoint 2019</a></li>
<li><a href="../pt447222/index.html">Quest do Linux. Parab√©ns aos vencedores e converse sobre a solu√ß√£o de problemas</a></li>
<li><a href="../pt447226/index.html">Entrevista com o popularizador da ci√™ncia, diretor da √∫nica escola particular de astronomia da R√∫ssia, Pavel Skripnichenko</a></li>
<li><a href="../pt447232/index.html">Experi√™ncia pessoal. Como conectamos a telefonia internacional: compara√ß√£o de 6 trocas virtuais</a></li>
<li><a href="../pt447234/index.html">Como escrever programas polim√≥rficos usando o Arrow</a></li>
<li><a href="../pt447236/index.html">Criando um farm de dispositivos Android usando o Open STF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>