<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöñ üë®üèø‚Äçüåæ üë©‚Äçüöí LDAP - "autenticaci√≥n" es un antipatr√≥n ü§æüèæ üßóüèæ üë®‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy, cualquier organizaci√≥n tiene un directorio LDAP lleno de usuarios de esta organizaci√≥n. Si observa detenidamente, encontrar√° una o m√°s aplicacion...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LDAP - "autenticaci√≥n" es un antipatr√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avanpost/blog/484186/"><img src="https://habrastorage.org/webt/z4/t7/pc/z4t7pcdsbu94_dfp79cpkjk88te.png" alt="imagen"><br><br>  Hoy, cualquier organizaci√≥n tiene un directorio LDAP lleno de usuarios de esta organizaci√≥n.  Si observa detenidamente, encontrar√° una o m√°s aplicaciones que utilizan el mismo directorio para la "autenticaci√≥n".  Y las comillas no son accidentales aqu√≠, porque LDAP es un protocolo de acceso a directorio dise√±ado para leer, escribir y buscar el servicio de directorio.  Este no es un protocolo de autenticaci√≥n.  El t√©rmino "autenticaci√≥n LDAP", m√°s bien, se refiere a esa parte del protocolo (operaci√≥n de enlace), que determina qui√©n es usted y qu√© derechos de acceso tiene a la informaci√≥n del directorio. <br><a name="habracut"></a><br>  Con el tiempo, LDAP se ha convertido en un servicio de autenticaci√≥n de facto.  Los servicios LDAP extendidos y asequibles, como Active Directory, se han convertido en un tidbit para los desarrolladores de software que desean integrar la autenticaci√≥n en sus productos.  Las bibliotecas de cliente LDAP est√°n disponibles para casi cualquier marco, y la integraci√≥n es relativamente f√°cil de implementar. <br><br>  Pero a pesar del hecho de que el uso de LDAP puede ayudar a resolver el problema de implementar la autenticaci√≥n de usuario en varias aplicaciones de la compa√±√≠a, crea muchos problemas.  A diferencia de los protocolos de autenticaci√≥n especialmente dise√±ados, el uso de LDAP causa varias vulnerabilidades de seguridad de la informaci√≥n. <br><br>  Para comprender cu√°les son estas vulnerabilidades, primero debe comprender c√≥mo funciona la autenticaci√≥n LDAP. <br><br><h2>  C√≥mo funciona la autenticaci√≥n LDAP </h2><br>  Imagine la siguiente situaci√≥n (est√° lejos de la realidad, pero transmite la esencia perfectamente). <br><br>  Supongamos que hago un pedido en una tienda en l√≠nea para que se entregue a mi casa en mi ausencia.  El mensajero llega y deja una nota debajo de la puerta con el texto "Lo siento, no te encontramos" y me pide que recoja el pedido en el punto de recogida m√°s cercano en un momento conveniente.  En el punto de recogida, el empleado me pide mi nombre, direcci√≥n y me pide las llaves de la casa para confirmar mi identidad.  Entonces el oficial de servicio de entrega llega a mi casa y abre la puerta con mi llave.  √âl entra para asegurarse de que yo vivo all√≠, por ejemplo, de fotograf√≠as en la pared o por el nombre del destinatario en la correspondencia.  Despu√©s de eso, el empleado regresa al punto de emisi√≥n y me informa que ha confirmado con √©xito mi identidad, ¬°y puedo recibir mi paquete!  ¬°Hurra! <br><br>  Adem√°s de los problemas con la log√≠stica, esta situaci√≥n est√° llena de otros problemas.  ¬øQu√© sucede si un revisor sin escr√∫pulos hizo una copia de mi clave?  ¬øO dej√≥ la llave durante mucho tiempo desatendida, y alguien m√°s?  ¬øQu√© pasa si el probador fue atacado y me quitaron la llave?  Cuando le doy la llave de mi apartamento a un extra√±o, no puedo estar seguro de su decencia y mi seguridad. <br><br>  Afortunadamente, en el mundo real tenemos documentos de identificaci√≥n, por ejemplo, una licencia de conducir o un pasaporte, emitidos por agencias gubernamentales, y su autenticidad no est√° en duda.  Puedo proporcionar estos documentos al servicio de mensajer√≠a para mi propia identificaci√≥n sin entregar las llaves. <br><br>  En el mundo LDAP, todav√≠a tenemos que pasar nuestras llaves para abrir la puerta en nuestro nombre.  Transferimos nuestra contrase√±a a un tercero, y √©l est√° tratando de penetrar en el servidor LDAP con ella.  Si logra obtener acceso, no podemos estar seguros de que nuestras credenciales no se vean comprometidas.  En este caso, el atacante obtendr√° no solo la capacidad de desbloquear la puerta LDAP, sino tambi√©n el acceso a cualquier aplicaci√≥n que use las mismas credenciales. <br><br>  Afortunadamente, en un mundo m√°s completo de autenticaci√≥n, ¬°tambi√©n tenemos pasaportes y licencias de conducir!  Los protocolos de autenticaci√≥n como Kerberos, SAML y OpenID Connect emiten tokens a terceros.  Los tokens confirman que usted es quien dice ser, y no hay necesidad de transferir sus llaves a nadie.  Debido a que LDAP nunca fue dise√±ado como un protocolo de autenticaci√≥n, carece de los mecanismos apropiados. <br><br><h2>  Desventajas de LDAP como sistema de autenticaci√≥n </h2><br>  En 2007, Shumon Hack lanz√≥ un art√≠culo de ciencia ficci√≥n ( <a href="https://www.huque.com/talks/2007-10-LDAP-Authn.html">LDAP Weaknesses as a Central Authentication System</a> ) en el que describe tres problemas espec√≠ficos cuando se utiliza LDAP como sistema de autenticaci√≥n. <br><br><h4>  1. La aplicaci√≥n probablemente no sea lo suficientemente segura como para manejar credenciales </h4><br>  El autor enfatiza que proteger un peque√±o conjunto de servidores de autenticaci√≥n de ataques es mucho m√°s f√°cil que proteger una gran cantidad de servidores de aplicaciones. <br><br>  En general, los servidores de autenticaci√≥n, por regla general, est√°n bajo la estrecha supervisi√≥n de especialistas con experiencia significativa en el campo de la seguridad de la informaci√≥n. <br><br>  Por otro lado, los servidores de aplicaciones tienen un nivel de seguridad completamente diferente y est√°n m√°s expuestos a riesgos.  Son menos seguros, funcionan con pilas de software m√°s complejas y es m√°s probable que tengan vulnerabilidades.  Y m√°s a menudo son administrados por personas que no tienen un profundo conocimiento de la seguridad.  Construir el sistema de seguridad adecuado es un proceso complicado en el que es muy f√°cil cometer un error. <br><br>  El problema es que si un servidor de aplicaciones se ve comprometido, todas las credenciales utilizadas por sus propietarios durante el ataque tambi√©n se ver√°n comprometidas.  Cualquier otro sistema que use el mismo directorio LDAP para la autenticaci√≥n est√° en riesgo. <br><br><h4>  2. El servidor LDAP no puede asegurar el mecanismo de autenticaci√≥n utilizado para obtener credenciales </h4><br>  Un servidor LDAP no puede garantizar la seguridad de la transacci√≥n.  Aunque un servidor LDAP, por ejemplo, puede forzar la vinculaci√≥n a trav√©s de TLS para garantizar que las credenciales no se transmitan en texto claro, el servidor en s√≠ nunca tuvo ning√∫n papel en la obtenci√≥n de credenciales del usuario.  Existe el riesgo de que la aplicaci√≥n reciba una contrase√±a a trav√©s de un canal inseguro. <br><br><h4>  3. El usuario se ve obligado a compartir su secreto de autenticaci√≥n con un tercero. </h4><br>  La contrase√±a de usuario o el secreto de autenticaci√≥n deben permanecer en <i>secreto</i> .  Debe ser conocido solo por el usuario y el sistema de autenticaci√≥n.  Al usar la autenticaci√≥n LDAP, el usuario se ve obligado a compartir su secreto con un tercero para que luego pueda usar este secreto para interactuar con el directorio LDAP en nombre del usuario. <br><br>  Es importante mencionar que cuando se utilizan protocolos de autenticaci√≥n especialmente dise√±ados, como Kerberos, e incluso desde el NTLM anterior, el secreto del usuario nunca se transmite a trav√©s de la red.  El dispositivo cliente y el servidor utilizan operaciones criptogr√°ficas para demostrar entre s√≠ que tienen el mismo secreto y ni siquiera intercambian el secreto en s√≠. <br><br>  A los puntos de Shumon Hook, agregar√© una descripci√≥n de varios matices de autenticaci√≥n LDAP, basada en mi propia experiencia.  En primer lugar, el tema se refiere al uso de Active Directory. <br><br><h4>  4. Muchos desarrolladores no saben lo suficiente sobre los mecanismos LDAP para usarlo correctamente </h4><br>  Una de mis publicaciones de <a href="https://blog.lithnet.io/">blog</a> anteriores describe c√≥mo el enlace an√≥nimo y no autenticado permiti√≥ burlar a los desarrolladores de aplicaciones y oblig√≥ a los usuarios no autorizados a omitir.  La capacidad de realizar una operaci√≥n de vinculaci√≥n sin autenticaci√≥n es una de las sutilezas del protocolo que incluso los expertos LDAP m√°s experimentados desconocen. <br><br>  Los directorios no son f√°ciles de organizar y son capaces de almacenar una gran cantidad de informaci√≥n organizacional y proporcionan muchas formas personalizables de almacenarla.  Vi muchos casos en los que el desarrollador de la aplicaci√≥n supuso que hab√≠a una determinada clase de objeto o atributo, y cuando no se detectaron, la aplicaci√≥n se bloque√≥.  Para la autenticaci√≥n del usuario, no se debe requerir y aplicar el conocimiento de la estructura de los datos almacenados en el directorio.  El protocolo de autenticaci√≥n debe abstraerse de los detalles del repositorio de objetos ubicado en un nivel inferior. <br><br><h4>  5. Los administradores de aplicaciones a menudo no configuran clientes LDAP correctamente </h4><br>  Al administrar Active Directory en un gran entorno distribuido, hay un matiz desagradable: es dif√≠cil determinar qu√© aplicaciones espec√≠ficas usan Active Directory como directorio LDAP y c√≥mo los administradores de la aplicaci√≥n configuraron exactamente el cliente LDAP. <br><br>  Los siguientes son ejemplos de los horrores de la mala configuraci√≥n. <br><br><ul><li>  Codificaci√≥n de DN en aplicaciones o uso de DN en una operaci√≥n de enlace.  Los problemas ocurren constantemente al cambiar el nombre o mover objetos dentro de un directorio, y todo porque alguien en alg√∫n lugar codific√≥ DN.  (Nota para aquellos que realizan operaciones de enlace simples con Active Directory: no es necesario usar un DN. Active Directory tambi√©n proporciona formatos de DN alternativos que son m√°s confiables que usar un formato tradicional). </li><li>  Para la operaci√≥n de vinculaci√≥n, no se utiliza una cuenta de servicio, sino una cuenta personal del desarrollador o administrador (imagine lo que suceder√° cuando el propietario de la cuenta abandone la empresa). </li><li>  Env√≠o de contrase√±as en texto claro al puerto 389. </li><li>  Hay aplicaciones en las que no se requiere la casilla de verificaci√≥n "Validar certificado" cuando se conecta a AD mediante TLS (puerto 636).  ¬øPor qu√© es esto generalmente aceptable?  ¬øC√≥mo puedo pasar la contrase√±a a un servicio de terceros sin estar convencido de su fiabilidad? </li></ul><br>  Hacer que el cliente LDAP funcione es f√°cil.  Pero solo el hecho de que funcione no significa que la configuraci√≥n sea correcta. <br><br><h4>  6. La autenticaci√≥n LDAP y los servicios de autenticaci√≥n modernos son mutuamente excluyentes </h4><br>  Una aplicaci√≥n que utiliza LDAP para la autenticaci√≥n siempre tendr√° que depender de nombres de usuario y contrase√±as.  Intentar implementar tecnolog√≠as modernas, como la autenticaci√≥n de m√∫ltiples factores y el inicio de sesi√≥n √∫nico, es casi imposible (a menos que vaya a implementar sus propias tecnolog√≠as, lo que en s√≠ mismo es una mala idea).  FIDO Alliance se compromete a hacer que las contrase√±as sean una reliquia del pasado, y cada aplicaci√≥n que use autenticaci√≥n LDAP ser√° un obst√°culo para una pol√≠tica sin contrase√±a. <br><br><h2>  Cuales son las opciones? </h2><br>  Las aplicaciones web de hoy realmente pueden funcionar sin autenticaci√≥n LDAP.  Existen muchos protocolos excelentes de autenticaci√≥n web, como SAML, WS-Federation y OpenID Connect, que no requieren credenciales de usuario para trabajar con aplicaciones de terceros.  Innumerables productos proporcionan estos servicios, incluido el Servicio de federaci√≥n de Active Directory (integrado en Windows Server) o servicios de terceros como Microsoft Azure AD, Okta, Ping y otros.  Si su organizaci√≥n no tiene un IdP federado, lo primero que debe hacer es implementarlo. <br><br>  Lo principal a lo que debe prestar atenci√≥n al elegir un nuevo software es el soporte de los protocolos de autenticaci√≥n modernos.  Incluso si la empresa necesita la aplicaci√≥n aqu√≠ y ahora, no se apresure a elegir una soluci√≥n, especialmente si esta opci√≥n se limita solo a productos con autenticaci√≥n LDAP.  Vale la pena tratar de transmitir al proveedor seleccionado la necesidad de refinar el producto utilizando protocolos de autenticaci√≥n m√°s modernos.  Quiz√°s escuche y revise su plan de desarrollo. <br><br>  La cantidad de aplicaciones de escritorio con un "cliente pesado" que admite protocolos de autenticaci√≥n modernos est√° creciendo, y esta es una tendencia alegre.  Estas aplicaciones sol√≠an ser una fortaleza de la autenticaci√≥n LDAP.  Un n√∫mero creciente de SDK, como la Biblioteca de autenticaci√≥n de Microsoft (MSAL), facilita a los desarrolladores agregar soporte para servicios de autenticaci√≥n modernos a sus aplicaciones m√≥viles y de escritorio. <br><br>  En √∫ltima instancia, vale la pena reconocer que en la realidad actual, no todas las aplicaciones admiten protocolos de autenticaci√≥n modernos, y puede que nunca lo sean.  La implementaci√≥n de una prohibici√≥n completa de la autenticaci√≥n LDAP probablemente no sea posible en ninguna organizaci√≥n.  Sin embargo, de ninguna manera se debe fomentar la autenticaci√≥n LDAP dentro de la organizaci√≥n.  El uso de LDAP debe considerarse solo en ausencia de otras opciones. </div></div><p>Source: <a href="https://habr.com/ru/post/484186/">https://habr.com/ru/post/484186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484174/index.html">Castle bebe en condiciones "extremas" o c√≥mo participamos en el espect√°culo "DOZOR"</a></li>
<li><a href="../484176/index.html">Implementaci√≥n de la plantilla de estado en Unity</a></li>
<li><a href="../484178/index.html">Conmutador Ethernet inteligente para el planeta Tierra</a></li>
<li><a href="../484180/index.html">PBX virtual Rostelecom: qu√© y c√≥mo se puede hacer a trav√©s de la API</a></li>
<li><a href="../484182/index.html">Xenobots: nanorobots vivos de c√©lulas de rana</a></li>
<li><a href="../484188/index.html">Est√°ndares de dise√±o de bases de datos</a></li>
<li><a href="../484192/index.html">Aplicaciones f√°ciles y f√°ciles de implementar en el cartucho de Tarantool (parte 2)</a></li>
<li><a href="../484194/index.html">Kubernetes traducido a ni√±os</a></li>
<li><a href="../484196/index.html">Grabar sonido JS desde un micr√≥fono o comentarios de voz</a></li>
<li><a href="../484198/index.html">Reverso de la moneda: qui√©n gan√≥ y perdi√≥ con el crecimiento de las acciones de Tesla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>