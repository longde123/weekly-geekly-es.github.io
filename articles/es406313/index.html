<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñïüèº üèÖ üôèüèª Una forma personalizada de hacer amigos con STM32: no Arduino o Discovery üôá üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® üë®üèº‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para todos los que usan o est√°n interesados ‚Äã‚Äãen microcontroladores de STMicroelectronics , quiero presentar mi peque√±o proyecto de pasatiempo. 


 Ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Una forma personalizada de hacer amigos con STM32: no Arduino o Discovery</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/406313/"><p> Para todos los que usan o est√°n interesados ‚Äã‚Äãen microcontroladores de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">STMicroelectronics</a> , quiero presentar mi peque√±o proyecto de pasatiempo. </p><br><p>  Tanto Habr√© como geektimes ya tienen muchos art√≠culos dedicados a los microcontroladores de la serie STM32F, por ejemplo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">placa STM32 barata + IDE Arduino</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tratando de hacer amigos con STM32</a> y la respuesta a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥mo hacer amigos con STM32</a> y muchos otros.  En conjunto, cubren este tema muy bien, pero hay una cosa, pero ... En todos estos art√≠culos, se consideran las placas preparadas y un controlador espec√≠fico que se encuentran en esta placa.  ¬øY qu√© hay de aquellos que quieren jugar con diferentes controladores, e incluso en el tablero?  Por ejemplo, muchas placas que conozco con el controlador STM32F4 (el mismo STM32F4-Discovery) no se pueden insertar en la placa de pruebas.  Pero personalmente quiero algo como esto (atenci√≥n, todas las im√°genes son clicables): </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/89a/05c/d87/89a05cd87f5245578465097c8201b084.jpg"></a> </div><br>  Al mismo tiempo, como ya escrib√≠, no quiero estar conectado a un controlador espec√≠fico, pero quiero poder reemplazarlo f√°cilmente.  Aquellos que est√©n interesados ‚Äã‚Äãen c√≥mo me di cuenta de que estos no son una lista de deseos ordinaria, les pido un gato. <p></p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Introducci√≥n (inspirada en los comentarios sobre el art√≠culo, as√≠ que omita antes de leerlos)</b> <div class="spoiler_text"><p>  Si usar o no placas de pruebas con conectores es un punto discutible.  Por supuesto, comenzando con un cierto n√∫mero de componentes, se vuelven inc√≥modos.  Pero aunque el componente no es muy grande, y el n√∫mero de experimentos en la etapa inicial de creaci√≥n de prototipos sigue siendo grande, las placas de prueba, en mi opini√≥n, son convenientes.  Y aqu√≠, si desea usar STM32, nos espera una emboscada: simplemente no est√°n en paquetes DIP, a diferencia de Atmega.  Puede comprar tableros de demostraci√≥n ya hechos, pero aqu√≠ nuevamente hay una emboscada: la mayor√≠a de estos tableros con controladores m√°s antiguos no pueden quedar atrapados en el tablero debido a los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">peines dobles</a> .  Es decir, utilizando placas de demostraci√≥n ya hechas, nos vemos obligados a trabajar con los controladores m√°s j√≥venes de la serie (vea el mismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nucleo en la versi√≥n DIP</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Blue Pill</a> ).  La segunda forma es hacer adaptadores especializados.  Este art√≠culo discute esta segunda ruta. </p></div></div><br><p>  Ense√±e inmediatamente el resultado final.  Estas son peque√±as bufandas de doble cara para diferentes casos, cuya impresi√≥n se puede pedir en el Reino Medio (los chinos no tienen nada en contra de imprimir tableros de doble cara con un dise√±o de panel): </p><br><p> <a href=""><img src="https://habrastorage.org/web/5e6/56c/fd9/5e656cfd9d3644a2a203e5f39e90b88f.jpg"></a> </p><br><p>  Un conjunto (a la derecha) es simplemente adaptadores simples para la placa de pruebas para cajas LQFP32 / 48/64, pero el segundo conjunto (a la izquierda) tambi√©n son adaptadores, pero con un conector JTAG, energ√≠a, cuarzo de baja frecuencia y alta frecuencia y un bot√≥n de reinicio.  Todos los dem√°s pines del controlador est√°n en el peine.  En general, lo m√≠nimo.  Desafortunadamente, el conector JTAG no es est√°ndar, por lo que tambi√©n se incluye la placa adaptadora de JTAG-20 a este mismo JTAG-10. </p><br><p>  Estas placas se sueldan f√°cilmente con un secador de pelo en el hogar, por lo que si tiene varios controladores, varias placas y componentes pasivos del tama√±o 0805, puede obtener algo como esto en un per√≠odo de tiempo razonable: </p><br><p> <a href=""><img src="https://habrastorage.org/web/0a3/cd3/be4/0a3cd3be45774cc7909e4d5b088b6670.jpg"></a> </p><br><p>  Y esto, me parece, da una buena libertad de creatividad.  Si alguien parece haber agotado el tema, entonces aqu√≠ hay un enlace al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio de github</a> . </p><br><p>  Pero quiero contarles paso a paso c√≥mo llegar a una vida as√≠.  Imagen para llamar la atenci√≥n (declaraci√≥n gr√°fica del problema): </p><br><p> <a href=""><img src="https://habrastorage.org/web/b38/cc7/069/b38cc70693f748b68eb3a77680169cb7.jpg"></a> </p><br><p>  Hay una dispersi√≥n de controladores (series L0, F3, F4), alimentaci√≥n, convertidor USART-USB, placa de pruebas.  Quiero parpadear los LED.  Este paso se hace muy f√°cil.  Tomamos cualquier controlador, tarjeta adaptadora del primer conjunto, soldamos con un secador de pelo.  A continuaci√≥n, necesita documentaci√≥n sobre c√≥mo conectar la alimentaci√≥n, el programador, el cuarzo.  Aqu√≠ ST tiene un orden completo, todo est√° en la p√°gina con la documentaci√≥n del controlador seleccionado.  Por ejemplo, para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">STM32F303K8</a> solo necesitamos un documento: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AN4206: Introducci√≥n al desarrollo de hardware de la serie STM32F3</a> , donde hay circuitos de suministro de energ√≠a, osciladores y un programador, en funci√≥n del cual puede construir dicho modelo: </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/c2b/718/5f8/c2b7185f8a8b453db589da3152f6116d.jpg"></a> </div><br>  Este controlador no tiene un cuarzo externo de baja frecuencia, por lo que solo conect√© alta frecuencia a 16 MHz.  Para la programaci√≥n, se utiliza un conector JTAG-20 est√°ndar, que est√° equipado con un programador est√°ndar de ST <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ST-LINK / V2</a> . <p></p><br><div class="spoiler">  <b class="spoiler_title">Si est√°s usando Linux</b> <div class="spoiler_text"><p>  Ya hay controladores en el kernel, pero debe agregar manualmente algunas reglas al archivo /etc/udev/rules.d, consulte, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> </p></div></div><br><p>  Dado que el art√≠culo est√° dedicado principalmente a la parte de hardware, solo mencionar√© brevemente la parte de software.  Sistema operativo: Fedora 25. Entorno de desarrollo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">System Workbench para STM32</a> es un sistema completamente gratuito basado en Eclipse de la comunidad OpenSTM32.  El √∫nico momento: para descargar, debe registrarse en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://www.openstm32.org</a> .  Es conveniente utilizar la utilidad gr√°fica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">STM32CubeMX</a> para modelar, documentar y generar ejemplos.  Por ejemplo, la configuraci√≥n del controlador en la foto de arriba se ve as√≠: </p><br><p> <a href=""><img src="https://habrastorage.org/web/a17/bf1/f91/a17bf1f9181842179826bee3c6b86282.png"></a> </p><br><p>  Los archivos con estos esquemas tambi√©n est√°n en el repositorio.  Por ejemplo, para STM32F303K8 ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> </p><br><p>  System Workbench para STM32 tiene un asistente de proyecto integrado bastante avanzado que genera la estructura inicial del proyecto, y opcionalmente puede incluir en el proyecto: controladores de controlador de bajo nivel (CMSIS), biblioteca HAL (Capa de abstracci√≥n de hardware), FatFS, FreeRTOS.  Yo mismo uso mi biblioteca de controladores orientada a objetos, que se ejecuta en la parte superior de la HAL.  A qui√©n le importa, mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><p>  Aqu√≠ hay <a href="">un ejemplo de un c√≥digo que</a> usa esta biblioteca, que parpadea en los LED de un temporizador (durante la interrupci√≥n) y registra (a trav√©s de un convertidor USART-USB en la consola de la estaci√≥n de trabajo) el estado del contador conectado al reloj en tiempo real.  Todo esto es algo similar a la ideolog√≠a de Arduino, pero me gusta programar esas cosas yo mismo. </p><br><p>  Aqu√≠ hay un ejemplo del uso de un controlador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">STM32F410RB</a> bastante potente: </p><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/b23/964/9b1/b239649b112d4ac490b387d2efe96911.jpg"></a> </div><p></p><br><p>  Del mismo modo, el documento principal es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AN4488: Introducci√≥n al desarrollo de hardware STM32F4xxxx MCU</a> , donde hay todos los esquemas de conexi√≥n necesarios.  El segundo documento importante es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AN2867: Gu√≠a de dise√±o del oscilador para microcontroladores STM8AF / AL / S y STM32</a> , que detalla el diagrama de conexi√≥n de un oscilador de alta frecuencia. </p><br><p>  Naturalmente, el cercar constantemente tales esquemas lleva bastante tiempo, as√≠ que decid√≠ hacer los siguientes pa√±uelos universales posibles, que dan cuenta de estos esquemas.  La versatilidad se logra debido al hecho de que los controladores de diferentes series, pero en el mismo caso (por ejemplo, STM32F303RB y STM32F410RB, ambos en el caso LQFP64) tienen las mismas conclusiones (con la excepci√≥n de peque√±as diferencias en el circuito de suministro de energ√≠a).  Estas diferencias conducen a esto: </p><br><p> <a href=""><img src="https://habrastorage.org/web/551/09d/fdf/55109dfdf9844d17a4f6bdd3da46185d.jpg"></a> </p><br><p>  Todos los elementos con denominaciones con signo son comunes a diferentes controladores, pero elementos como P30, P31, P47, donde el n√∫mero significa el n√∫mero de pin, deben seleccionarse seg√∫n el modelo espec√≠fico.  Como resultado, el tablero se ver√° as√≠: </p><br><p> <a href=""><img src="https://habrastorage.org/web/83e/378/30c/83e37830c360491b8014b164c0917b12.jpg"></a> </p><br><p>  Aqu√≠ hay una peque√±a mejora. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Proyecto en github</a> <br>  Licencia: GNU General Public License, Version 3 </p><br><p>  Circuitos y placas de circuitos preparados por Eagle Cad.  El inmensamente respetado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">DiHalt</a> tiene una maravillosa serie de art√≠culos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre este sistema</a> .  La versi√≥n gratuita de Eagle Cad para uso dom√©stico se puede descargar desde el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio web oficial</a> . </p><br><p>  Invito a todos a unirse al proyecto. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es406313/">https://habr.com/ru/post/es406313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es406299/index.html">Pantalla vectorial RIN-609</a></li>
<li><a href="../es406301/index.html">Informe de confiabilidad de HDD Backblaze: las unidades empresariales fallan con m√°s frecuencia que los modelos de consumo</a></li>
<li><a href="../es406303/index.html">Hackspace ,makerspace, FabLab y WTC: entendemos los nombres de los espacios p√∫blicos</a></li>
<li><a href="../es406307/index.html">Galaxy Note 8: ¬øcu√°l fue el nuevo buque insignia de Samsung?</a></li>
<li><a href="../es406309/index.html">El Laboratorio de Propulsi√≥n a Chorro de la NASA est√° desarrollando un sinuoso veh√≠culo todo terreno para estudiar Venus</a></li>
<li><a href="../es406317/index.html">Las posibilidades m√°s amplias y las limitaciones significativas de las tecnolog√≠as aditivas en el ejemplo de la culata de un autom√≥vil deportivo</a></li>
<li><a href="../es406319/index.html">La Inspecci√≥n Fiscal de los Estados Unidos utiliza la miner√≠a de datos y el an√°lisis predictivo</a></li>
<li><a href="../es406323/index.html">Nueva edici√≥n: herramienta de gesti√≥n del tiempo y la motivaci√≥n</a></li>
<li><a href="../es406327/index.html">Im√°genes de densidad o ¬øcu√°l es el m√©todo schlieren?</a></li>
<li><a href="../es406329/index.html">Lluvia, estruendo de armadura y metal l√≠quido: c√≥mo se hace el sonido para una pel√≠cula</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>