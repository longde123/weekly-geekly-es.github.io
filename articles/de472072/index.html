<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìû ‚ÜóÔ∏è üöµüèø PG12: Ein Dutzend Patches von Postgres Professional üêº üñêüèΩ üßí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es ist sch√∂n, bekannte Namen auf der Danksagungsliste der offiziellen PostgreSQL 12-Version zu sehen. Wir haben beschlossen, die Innovationen und eini...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PG12: Ein Dutzend Patches von Postgres Professional</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/472072/">  <i>Es ist sch√∂n, bekannte Namen auf der Danksagungsliste der offiziellen PostgreSQL 12-Version zu sehen. Wir haben beschlossen, die Innovationen und einige Fehlerkorrekturen zusammenzubringen, an denen unsere Entwickler gearbeitet haben.</i> <br><br><h3>  1. JSONPath-Unterst√ºtzung </h3><br>  (In den <i>Versionshinweisen</i> klingt dies nach <i>Unterst√ºtzung f√ºr die SQL / JSON-Pfadsprache hinzuf√ºgen (Nikita Glukhov, Teodor Sigaev, Alexander Korotkov, Oleg Bartunov, Liudmila Mantrova).</i> <br><br>  Dieser Patch selbst, die JSONPath-Funktionen und der Verlauf des Problems wurden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einem separaten Artikel</a> hier auf dem Hub ausf√ºhrlich erl√§utert  JSONPath ist eine wichtige Errungenschaft von Postgres Professional und eine der Hauptinnovationen von PostgreSQL 12 im Allgemeinen. <br><br>  2014 entwickelten A. Korotkov, O. Bartunov und F. Sigaev die Erweiterung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">jsquery</a> , die als Ergebnis in Postgres Pro Standard 9.5 (und in sp√§teren Versionen von Standard und Enterprise) enthalten war.  Es bietet zus√§tzliche, sehr umfassende Funktionen f√ºr die Arbeit mit json (b). <br><br>  Als das Standard-SQL: 2016 erschien, stellte sich heraus, dass sich seine Semantik nicht so stark von unserer in der jsquery-Erweiterung unterscheidet.  Es ist m√∂glich, dass die Autoren des Standards sogar einen Blick auf jsquery geworfen haben und JSONPath erfunden haben.  Unser Team musste das, was wir bereits hatten, etwas anders umsetzen und nat√ºrlich auch viele neue Dinge. <br><br>  Obwohl noch kein spezieller Patch mit Funktionen festgeschrieben wurde, verf√ºgt der JSONPath-Patch bereits √ºber Schl√ºsselfunktionen f√ºr die Arbeit mit JSON (B), zum Beispiel: <br><br><pre><code class="pgsql hljs">jsonb_path_query(<span class="hljs-string"><span class="hljs-string">'{"a": [1,2,3,4,5]}'</span></span>, <span class="hljs-string"><span class="hljs-string">'$.a[*] ? (@ &gt; 2)'</span></span>)  <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> jsonb_path_query(<span class="hljs-string"><span class="hljs-string">'{"a": [1,2,3,4,5]}'</span></span>, <span class="hljs-string"><span class="hljs-string">'$.a[*] ? (@ &gt; 5)'</span></span>)  <span class="hljs-number"><span class="hljs-number">0</span></span> </code> </pre> <br>  Dar√ºber hinaus wurden einige Funktionen <a href="">optimiert</a> , die bereits zuvor mit JSON funktioniert hatten.  Dies wurde erfolgreich von Nikita Glukhov durchgef√ºhrt. <br><br>  Beispielsweise wurde der Operator <code>#&gt;&gt;</code> , der den Funktionen <code>jsonb_each_text()</code> und <code>jsonb_array_elements_text()</code> , verwendet, um JsonbValue schnell in Text zu konvertieren, arbeitete jedoch langsam mit anderen Typen.  Jetzt arbeitet alles schnell. <br><a name="habracut"></a><br><h3>  2. Unterst√ºtzung f√ºr die schnelle Suche nach n√§chsten Nachbarn in den SP-GiST (KNN) -Indizes </h3><br>  <i>(Unterst√ºtzung f√ºr die Suche nach n√§chsten Nachbarn (KNN) in SP-GiST-Indizes hinzuf√ºgen. Nikita Glukhov, Alexander Korotkov, Vlad Sterzhanov)</i> <br><br>  Nikita Glukhov und Alexander Korotkov von unserer Firma setzten die von Vlad Sterzhanov aus Minsk (auch bekannt als Quadrocube) begonnene Arbeit fort.  Postgres war das erste DBMS, das nach seinen n√§chsten Nachbarn suchte - fr√ºher Oracle und MS - und dies auf viel direktere und bequemere Weise - und dies war das Verdienst von Oleg Bartunov und seinem Team.  Die Idee dieser Suche ist der urspr√ºngliche Tree-Traversal-Algorithmus, der in den meisten F√§llen einen enormen Gewinn bringt.  Die Suche nach n√§chsten Nachbarn wird h√§ufig verwendet, ist jedoch in GIS besonders h√§ufig. <br><br>  Vlad erstellte einen KNN-Such-Patch f√ºr die Arbeit mit r√§umlichen Indizes SP-GiST f√ºr Quad-B√§ume, wenn die Ebene in Quadrate fester Gr√∂√üe unterteilt ist, und f√ºr KD-B√§ume, dh k-dimensionale B√§ume. <br><br>  Alexander Korotkov, Vlads GSoC-Mentor (Google Summer of Code), entwickelte sich mit einem Kollegen von Postgres Professional Nikita Glukhov weiter.  Die Funktionalit√§t wurde erheblich erweitert: Das interne Zwischenspeichern von Daten wurde beim Durchlaufen des Baums verbessert, Operatorklassen f√ºr Kreise und Polygone mit Reihenfolge nach Entfernung wurden hinzugef√ºgt. <br><br>  Um den Suchalgorithmus f√ºr den n√§chsten Nachbarn zu verwenden, schreiben Sie einfach <code>ORDER BY [,   ]</code> , und der Optimierer verbindet diesen Algorithmus automatisch.  Zum Beispiel <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> polygons <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> poly &lt;-&gt; <span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(0,0)'</span></span>;</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Auf dem Github sind</a> Patches von Nikita Glukhov zu sehen. <br><br><h3>  3. Optimierung von Sperren zur Beschleunigung des Einf√ºgens in B-Tree-Indizes </h3><br>  <i>(In den Versionshinweisen ist dies die Verbesserung der Geschwindigkeit beim Einf√ºgen von Btree-Indizes durch Reduzierung des Sperraufwands. Alexander Korotkov)</i> <br><br>  Alexander Korotkov, Chef-Systemarchitekt bei Postgres Professional, gelang es, beim Einf√ºgen in B-Tree-Indizes einen vern√ºnftigeren Sperralgorithmus zu entwickeln.  Der Gewinn nach dem Anwenden dieses Patches macht sich in F√§llen bemerkbar, in denen das Einf√ºgen mehr oder weniger "in einer Reihe" erfolgt.  Messungen auf einem 72-Core-Server zeigten, dass in diesem Fall die Verst√§rkung 50% erreicht.  Bei einer chaotischen Einf√ºgung ist die Verst√§rkung nicht so sp√ºrbar. <br><br><h3>  4. Wirtschaftliche WAL </h3><br>  <i>(Reduzieren Sie den WAL-Schreibaufwand f√ºr die Erstellung von GiST-, GIN- und SP-GiST-Indizes. Anastasia Lubennikova, Andrey V. Lepikhov)</i> <br><br>  Diese Reihe von Patches <a href="">reduziert den WAL-Verkehr</a> , der beim Erstellen von GiST-, GIN- und SP-GiST-Indizes generiert wird.  Jetzt k√∂nnen Sie Seiten solcher Indizes nur noch einmal protokollieren - am Ende, wenn der Index bereits erstellt wurde.  Und im Falle eines Fehlers beim Erstellen des Index der Eintr√§ge in der WAL werden erfolglose Versuche √ºberhaupt nicht angezeigt.  Bisher war dies nur beim Erstellen eines B-Baums und RUM m√∂glich.  Patches verwenden den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">generischen WAL-</a> Mechanismus. <br><br>  Skripte sind <code>xlog</code> , um die <code>xlog</code> Gr√∂√üe zu √ºberpr√ºfen.  Tests in der IMDB-Datenbank (JSON-Format), in der 4M + Datens√§tze mit 4 GB belegt waren, zeigten: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> imdb <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> gin(jb jsonb_path_ops);</code> </pre> <br>  Der alte Weg f√ºhrte 205 Sekunden aus, WAL 3,2 GB, und der neue Algorithmus ergab 133 Sekunden und WAL 0,4 GB. <br><br><h3>  5. Optimierung des Nur-Index-Scannens bei vielen Spalten. </h3><br>  <i>(Erm√∂glichen Sie, dass Nur-Index-Scans bei Indizes mit vielen Spalten effizienter sind. Konstantin Knizhnik)</i> <br><br>  Bei der Analyse des Datenbankbetriebs eines Kunden unseres Unternehmens wurde <a href="">festgestellt,</a> dass dieselbe Anforderung in einigen F√§llen mit nur Index-Scan um 25% l√§nger ausgef√ºhrt wird als mit Index-Scan (enable_indexonlyscan = off). <br>  Dies geschah, als SELECT f√ºr viele Felder durchgef√ºhrt wurde, die haupts√§chlich vom Typ <code>bytea</code> , und deren Versatz nicht zwischengespeichert wurde, da solche Felder keinen festen Versatz haben (siehe auch den Bericht von Nikolai Shaplov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûWhat's Inside It‚Äú</a> ).  Um das k-te Attribut zu entpacken, m√ºssen Sie das vorherige k-1 entpacken.  Das Entpacken eines Datensatzes nach einem Attribut erfordert O (N * N), wobei N die Anzahl der Felder ist.  Diese 25% ereigneten sich bereits auf 10 Feldern. <br><br>  Konstantin Knizhnik verwendete den Algorithmus, der bei der Arbeit mit der H√ºfte verwendet wird: Beim Zugriff auf das k-te Attribut werden die vorherigen k-1 genommen und gespeichert, die Zeit w√§chst linear mit der Anzahl der Felder.  Nach dem Anwenden des Patches ist die Laufzeit mit Index-Scan und Index-Only-Scan praktisch gleich. <br><br><h3>  6. Steuern Sie das Dumping von WAL-Segmenten auf die Festplatte </h3><br>  <i>(F√ºgen Sie ein Warteereignis f√ºr fsync von WAL-Segmenten hinzu. Konstantin Knizhnik)</i> <br><br>  Der PostgreSQL-Kernel √ºberwacht das Schreiben in die WAL, √ºberwacht jedoch nicht das Leeren der WAL-Segmente vom Speicher auf die Festplatte, d. H. <code>fsync</code> .  K. Knizhnik hat einen Patch erstellt, der einen neuen Ereignistyp erstellt. Er hei√üt jetzt WALSync (der interne Name der Variablen lautet WAIT_EVENT_WAL_SYNC).  Sie k√∂nnen es auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PG-Ereignisetikett</a> mit der Erl√§uterung ‚ÄûWarten auf das Speichern der WAL-Datei in einem zuverl√§ssigen Speicher‚Äú sehen.  Dieses Problem wurde auf der <i>Hacker-</i> Mailingliste <a href="">besprochen</a> . <br><br>  Wie lange das Zur√ºcksetzen dauert, ist normalerweise unbekannt: Standard PostgreSQL wei√ü nicht, wie solche Statistiken aggregiert werden sollen.  In Postgres Professional ist jedoch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine Erweiterung pg_wait_sampling</a> geschrieben.  Es kann dar√ºber sprechen, f√ºr welche Ereignisse Postgres Zeit verbringt.  <code>fsync</code> das Ereignis hinzugef√ºgt wurde, k√∂nnen Sie <code>fsync</code> folgen. <br><br><h3>  7. Unterst√ºtzung f√ºr neue Sprachen in Stemmer-W√∂rterb√ºchern </h3><br>  <i>(Aktualisieren Sie die Schneeball-Stemmer-W√∂rterb√ºcher mit Unterst√ºtzung f√ºr neue Sprachen. Arthur Zakirov)</i> <br><br>  Da in Nepal Postgres-Konferenzen abgehalten werden, ist es weitaus nat√ºrlicher, Nepali in die Datenbank aufzunehmen!  Dies wurde getan.  Dank der Bem√ºhungen von Arthur Zakirov k√∂nnen Sie jetzt das nepalesische Stemming-W√∂rterbuch f√ºr <i>Schneeball verwenden</i> . <br><br><h3>  8. Die Funktionen to_timestamp () / to_date () sind gegen√ºber Daten toleranter geworden </h3><br>  <i>(Passen Sie die Funktionen to_timestamp () / to_date () an, um Vorlagenfehlanpassungen besser zu verzeihen. Artur Zakirov, Alexander Korotkov, Liudmila Mantrova)</i> <br><br>  Die Funktion <code>to_timestamp()</code> funktionierte nicht, wenn die <code>to_timestamp()</code> mit zus√§tzlichen Leerzeichen verarbeitet wurde.  Die Diskussion des Fehlers in <code>to_timestamp()</code> f√ºhrte zu einer <a href="">langen Diskussion</a> dar√ºber, welches Verhalten der Funktionen <code>to_timestamp()</code> und gleichzeitig <code>to_date()</code> als korrekt angesehen werden sollte.  Zum Vorteil aller sind beide Funktionen toleranter gegen√ºber zus√§tzlichen Leerzeichen in der Formatzeile und der Eingabezeile geworden. <br><br><h3>  9. Protokolle k√∂nnen √ºber pg_ctl gedreht werden </h3><br>  <i>(Kontrolle der Rotation von Protokolldateien √ºber pg_ctl zulassen. Kyotaro Horiguchi, Alexander Kuzmenkov, Alexander Korotkov)</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mit anderen Worten, das</a> Dienstprogramm <code>pg_ctl</code> hat eine neue Option erhalten: <br><br><pre> <code class="plaintext hljs">pg_ctl logrotate [-D _] [-s]</code> </pre> <br>  Wenn dieser Befehl ausgef√ºhrt wird, wechselt der Server je nach Protokollierungskonfiguration entweder zu einer neuen Protokolldatei oder √∂ffnet die vorhandene erneut.  Dies kann in Notfallsituationen erforderlich sein, insbesondere wenn gro√üe, schnell wachsende Protokolldateien beispielsweise zur Diagnose √ºbertragen werden m√ºssen. <br><br><h3>  10. Die M√∂glichkeit, neue Tabellentypen zu erstellen (steckbarer Speicher) </h3><br>  <i>(F√ºgen Sie den Befehl CREATE ACCESS METHOD hinzu, um neue Tabellentypen zu erstellen. Andres Freund, Haribabu Kommi, √Ålvaro Herrera, Alexander Korotkov und Dmitry Dolgov)</i> <br><br>  Dieser wichtige Patch ist ein wesentlicher Bestandteil der Pluggable Storage API-Infrastruktur, daher die internationale Zusammensetzung der Patch-Entwickler.  Der Befehl CREATE ACCESS METHOD wird seit Version 9.6 auf Postgres ausgef√ºhrt.  Bis zum 12. konnten Sie jedoch nur Indexzugriffsmethoden erstellen.  Hier ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Dokumentation f√ºr die 11. Version</a> : <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ACCESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">METHOD</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> __ <span class="hljs-keyword"><span class="hljs-keyword">HANDLER</span></span> _ &lt; ... &gt; __       .      <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span>.</code> </pre> <br>  Und in der Dokumentation zum 12. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereits gelesen</a> : <i>Derzeit werden nur TABLE und INDEX unterst√ºtzt.</i>  √úbrigens wurde im 11. CREATE ACCESS METHOD-Befehl von der Postgres Pro-Erweiterung und im 12. bereits PostgreSQL-Befehl bereitgestellt. <br><br>  Die Ausf√ºhrung der Operation h√§ngt von der Art der Zugriffsmethode ab.  Wenn es sich um einen TABLE-Typ handelt, verarbeitet <code>table_am_handler</code> , und wenn es sich um einen INDEX-Typ handelt, dann <code>index_am_handler</code> (fr√ºher: F√ºr Zugriffsmethoden vom Typ INDEX sollte es <code>index_am_handler</code> ).  In <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Dokumentation</a> zu Tabellenmethoden ist ein ganzes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kapitel erschienen</a> . <br><br>  Beim Erstellen einer Tabelle k√∂nnen Sie jetzt den Typ angeben: <br><br><pre> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> [ [ <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> ] { <span class="hljs-keyword"><span class="hljs-keyword">TEMPORARY</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">TEMP</span></span> } | <span class="hljs-keyword"><span class="hljs-keyword">UNLOGGED</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> ] _ ( [ &lt; ... &gt; [ <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span>  ]</code> </pre> <br>  <i>Die Methode</i> ist vom Typ TABLE - dies ist ein Verweis auf Pluggable Storage.  Jetzt ist es standardm√§√üig ein <code>heap</code> , und vor dem anderen war es das tats√§chlich nicht.  √úber Operatorklassen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> <br><br> <code>default_table_access_method (string)</code> <br> <br>  Dieser Parameter legt die Standardmethode f√ºr den Tabellenzugriff fest, die beim Erstellen von Tabellen oder materialisierten Ansichten verwendet wird, wenn die Zugriffsmethode im Befehl CREATE nicht explizit angegeben ist, oder wenn der Befehl SELECT ... INTO ausgef√ºhrt wird, bei dem die Zugriffsmethode nicht explizit festgelegt werden kann.  Der Standardwert ist <code>heap</code> .  Die gro√üe Diskussion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bei Hackern</a> hilft dabei, die Details herauszufinden. <br><br>  Bis zu diesem Moment haben wir √ºber Innovationen gesprochen.  Aber Fehlerbehebungen verbrauchen auch die Ressourcen der Programmiererzeit.  Die wichtigsten sind: <br><br><h3>  11. Fehler: Ein Fehler in einer der Strukturen </h3><br>  <i>Zus√§tzliche quote_all_identifiers in _dumpOptions.</i>  <i>Arthur Zakirov)</i> <br><br>  Im Allgemeinen wurde nichts Besonderes festgestellt. In einer der von <code>pg_dump</code> verwendeten Strukturen wurde ein Fehler gefunden, der vom Compiler √ºbersehen wurde.  Aber Bruce Momjyan selbst <a href="">lobte</a> den Fund. <br><br>  Weitere Probleme mit <code>DumpOptions</code> finden Sie <a href="">hier</a> . <br><br><h3>  12. Fehler in der Replikation: </h3><br>  <i>(xlogreader: Lies einen Dateiblock nicht zweimal. Arthur Zakirov)</i> <br><br>  Ein anderer Mitarbeiter unseres Unternehmens, der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pg_probackup-</a> Entwickler Grigory Smolkin, stellte fest, dass eines unserer Dienstprogramme verlangsamt wird, wenn xlogreader zlib-Archive liest.  Es stellte sich heraus, dass er manchmal WAL-Dateibl√∂cke zweimal liest. <br><br>  Wenn Archive inkonsistent gelesen werden, ist die Leistung schlecht.  Das wiederholte Lesen des Blocks ist immer inkonsistent, da Sie durch Aufrufen der Funktion <code>gzseek()</code> zur √ºbergebenen Position <code>gzseek()</code> m√ºssen.  <a href="">Jetzt</a> findet kein unn√∂tiges erneutes Lesen statt. <br><br>  <i>PS Ich werde nicht zerlegen: Ein Dutzend Patches (genau genommen ein Dutzend Patches) sind nicht nur ein Zufall mit der Versionsnummer von Postgres.</i>  <i>Die Liste k√∂nnte durchaus ein Dutzend oder ein Dutzend sein.</i>  <i>Ich dachte, es w√§re sch√∂ner, und Sch√∂nheit ist teilweise der Motor der Programmierung, ganz zu schweigen von anderen Bereichen menschlicher Aktivit√§t.</i> <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472072/">https://habr.com/ru/post/de472072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472054/index.html">Organisatoren und Lehrassistenten zu CS Center Online-Programmen</a></li>
<li><a href="../de472060/index.html">Die deutsche Polizei st√ºrmte einen Milit√§rbunker, in dem sich das neu deklarierte Rechenzentrum befand</a></li>
<li><a href="../de472062/index.html">√úberwachung + Stresstest = Prognose und keine Fehler</a></li>
<li><a href="../de472064/index.html">Ansible + Auto Git Pull im Cluster der virtuellen Maschine in der Cloud</a></li>
<li><a href="../de472068/index.html">Verwenden der NVME-SSD als Systemlaufwerk auf Computern mit altem BIOS und Linux-Betriebssystem</a></li>
<li><a href="../de472076/index.html">Das Buch "Java f√ºr alle"</a></li>
<li><a href="../de472078/index.html">Offene Bankrisiken</a></li>
<li><a href="../de472084/index.html">Sicherheitsl√ºcken bei Smartphones</a></li>
<li><a href="../de472086/index.html">Verwendung der Gesetze der Gestaltpsychologie beim Design von Benutzeroberfl√§chen</a></li>
<li><a href="../de472088/index.html">Wie wir uns f√ºr ServiceDesk entschieden haben. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>