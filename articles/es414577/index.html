<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏽 👳🏿 🕵🏽 Devilution: proyecto de ingeniería inversa de Diablo 🤖 ☮️ ⛏️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como han demostrado los años, prácticamente no tenemos oportunidad de ver el código fuente original, o al menos un remake, de la primera parte de Diab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Devilution: proyecto de ingeniería inversa de Diablo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414577/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/471/51e/0ad/47151e0ad7af950e53560cea5cd7b26c.jpg" alt="imagen"></div><br>  Como han demostrado los años, prácticamente no tenemos oportunidad de ver el código fuente original, o al menos un remake, de la primera parte de Diablo (el evento <i>The Darkening of Tristram</i> en <i>Diablo III</i> en honor del 20 aniversario del lanzamiento de la primera parte es, por supuesto, bueno, pero aún un poco no lo que esperaban los fanáticos).  Y deje que la última actualización del juego salga en 2001, y la propia Blizzard ha dejado de apoyarla y venderla: el recuerdo todavía está vivo en nuestros corazones.  Lo que una vez más fue confirmado por cierto GalaXyHaXz, que decidió realizar ingeniería inversa del juego. <br><br>  El código fuente está disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en Github</a> .  El proyecto Devilution, que su autor GalaXyHaXz denominó "Diablo Devolution", tomó más de 1,200 horas - 4 meses de trabajo.  Además, no te pierdas los voluminosos comentarios del autor que arrojan luz sobre el código fuente del juego y que se encuentran en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">otro repositorio</a> .  El código en sí no parece importar hasta ahora, pero continuará en orden a medida que avance el trabajo en otros módulos del juego. <br><br>  La idea de la ingeniería inversa de un proyecto tan grande al principio parecía una tarea fantástica, si no fuera por un accidente afortunado, o, en otras palabras, un pequeño descuido que sucedió hace 20 años. <br><br>  En 1998, Blizzard entregó el código fuente de Diablo a dos estudios: Synergestic Software, que estaba desarrollando el complemento Hellfire, y Climax Studios, que trabajó en el puerto de Playstation.  Esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no</a> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la primera vez que el</a> departamento de control de calidad de Sony en Japón <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">está "contento" con sus filtraciones</a> , también se distinguieron esta vez: en la versión japonesa del puerto, se olvidó accidentalmente <i>un archivo simbólico</i> , que incluía funciones, datos, tipos y mucho más.  Esto nos permitió restaurar las funciones originales, las variables globales, las estructuras de datos y más.  La versión beta del puerto para Playstation también se filtró, y contenía otro archivo similar, lo que simplificó enormemente la tarea. <br><a name="habracut"></a><br>  Para colmo, la versión de depuración de la versión para PC del juego siempre se encuentra directamente en los discos del juego, ocultos en el archivo DIABDAT.MPQ -&gt; D1221A.MPQ -&gt; DIABLO.EXE.  La compilación contiene herramientas de depuración que no están disponibles en la versión de lanzamiento, así como una gran cantidad de aserciones de línea, gracias a las cuales fue posible recrear nombres de archivos, funciones, incluso los números de línea del código están lo más cerca posible del original. <br><br>  El desarrollo de Diablo comenzó en el momento en que salió Windows 95. En consecuencia, el juego fue optimizado para ello.  Para compilar el juego, se utilizó Microsoft Visual C ++ 4.20, que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en parches posteriores se actualizó a la versión 5.10</a> .  Para reproducir con precisión el código original, el proyecto mantuvo la compatibilidad con estas versiones de compiladores, sin embargo, los Makefiles están disponibles para los compiladores modernos.  Los binarios ejecutables resultantes de la compilación, según los informes, se ejecutan en Windows 7, Linux-WINE y Windows 10. <br><br>  Es un hecho bien conocido que el juego estaba cambiando seriamente durante todo el proyecto, y muchas ideas se eliminaron justo antes del lanzamiento, y el multijugador se agregó rápidamente. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VscdPA6sUkc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Muchos creadores de modificaciones para el juego (por ejemplo, los autores del mod The Hell) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ya han ido bastante lejos en su investigación</a> sobre la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">investigación</a> de códigos, incluso a través de la implementación de una memoria de proceso;  sin embargo, no publicaron los resultados de su trabajo, y muchas de estas modificaciones fueron abandonadas a la mitad.  Si se puede llevar a Devilution a un cierto grado de preparación, se puede evitar un problema similar, además de aprender algo nuevo sobre el juego en sí. <br><br>  Por el momento, ingeniería inversa Diablo.exe.  Todavía hay algunas bibliotecas con las que lidiar: Battle.snp (protocolo Battle.Net desactualizado), DiabloUI.dll (código del menú principal para el juego, completamente basado en Windows y mal escrito), Standard.snp (código multijugador local, desactualizado, similar al utilizado) en Starcraft) y un par de módulos más. <br><br>  Teóricamente, en el futuro cercano (después de revertir <i>DiabloUI.dll</i> ), el juego puede convertirse en multiplataforma, a menos que, por supuesto, Blizzard se apresure a cerrar la tienda antes de que el autor pueda atraer suficientes entusiastas para resolver este problema. <br><br>  PD: En cuanto a Diablo II, todo no está tan claro: el juego continúa siendo vendido y respaldado por Blizzard, su código base es aproximadamente 8 veces más grande que el original, y hay rumores de que el remaster oficial está a la vuelta de la esquina, por lo que es completamente inverso La ingeniería en el futuro previsible no tiene que esperar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414577/">https://habr.com/ru/post/es414577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es414565/index.html">Lámpara para muebles, cocina o baño.</a></li>
<li><a href="../es414567/index.html">Anuncio de RamblerFront & # 5</a></li>
<li><a href="../es414569/index.html">Los arrecifes de coral guardan secretos del pasado y el futuro de los océanos.</a></li>
<li><a href="../es414571/index.html">La inesperada relatividad del GPS integrado en el cerebro.</a></li>
<li><a href="../es414573/index.html">IP DoorBell - Timbre interactivo</a></li>
<li><a href="../es414579/index.html">Google AI ha aprendido a predecir cuándo morirá un paciente (pero no todo es tan sombrío)</a></li>
<li><a href="../es414581/index.html">¿Dónde está su botón? ¿Cómo puede una persona simple descargar datos de Kibana y Elasticsearch y no forzar a los desarrolladores?</a></li>
<li><a href="../es414583/index.html">RIT ++, Tech RaDarts y todo-todo-todo</a></li>
<li><a href="../es414585/index.html">Cómo se rompió mi String.getBytes (UTF_8) y qué hice con él</a></li>
<li><a href="../es414587/index.html">Dron autónomo de bricolaje con control sobre Internet. Parte 2 sobre software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>