<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”¹ ğŸŒ ğŸ‘ åœ¨Javaä¸­ä½¿ç”¨varç±»å‹çš„26æ¡å»ºè®® ğŸ“¥ ğŸ‘¯ â–ªï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½¿ç”¨JEP 286ï¼šLocal-Variable Type Inference å°†Javaå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆLVTIï¼‰æˆ–ç®€ç§°varç±»å‹ï¼ˆ varæ ‡è¯†ç¬¦ä¸æ˜¯å…³é”®å­—ï¼Œè€Œæ˜¯ä¿ç•™çš„ç±»å‹åç§°ï¼‰æ·»åŠ åˆ°Java 10ä¸­ã€‚ ä½œä¸º100ï¼…çš„ç¼–è¯‘å™¨å‡½æ•°ï¼Œå®ƒä¸ä¼šå½±å“å­—èŠ‚ç ï¼Œè¿è¡Œæ—¶æˆ–æ€§èƒ½ã€‚ åŸºæœ¬ä¸Šï¼Œç¼–è¯‘å™¨æ£€æŸ¥èµ‹å€¼è¿ç®—ç¬¦çš„å³...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨Javaä¸­ä½¿ç”¨varç±»å‹çš„26æ¡å»ºè®®</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438206/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/0c/mq/zq/0cmqzquxmzrie0s3ryftj5dqvga.png"></div><br><p> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JEP 286ï¼šLocal-Variable Type Inference</a> <strong>å°†Javaå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆLVTIï¼‰</strong>æˆ–ç®€ç§°<strong>var</strong>ç±»å‹ï¼ˆ <strong>var</strong>æ ‡è¯†ç¬¦ä¸æ˜¯å…³é”®å­—ï¼Œè€Œæ˜¯ä¿ç•™çš„ç±»å‹åç§°ï¼‰æ·»åŠ åˆ°Java 10ä¸­ã€‚ ä½œä¸º100ï¼…çš„ç¼–è¯‘å™¨å‡½æ•°ï¼Œå®ƒä¸ä¼šå½±å“å­—èŠ‚ç ï¼Œè¿è¡Œæ—¶æˆ–æ€§èƒ½ã€‚ åŸºæœ¬ä¸Šï¼Œç¼–è¯‘å™¨æ£€æŸ¥èµ‹å€¼è¿ç®—ç¬¦çš„å³ä¾§ï¼Œå¹¶åŸºäºè¯¥èµ‹å€¼è¿ç®—ç¬¦ç¡®å®šå˜é‡çš„ç‰¹å®šç±»å‹ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸º<strong>var</strong> ã€‚ </p><br><p>æ­¤å¤–ï¼Œå®ƒå¯¹äºå‡å°‘æ ·æ¿ä»£ç çš„å†—é•¿æ€§å¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åŠ å¿«ç¼–ç¨‹è¿‡ç¨‹æœ¬èº«ã€‚ ä¾‹å¦‚ï¼Œå†™<strong><code>var evenAndOdd =...</code></strong>è€Œä¸æ˜¯<strong><code>Map&lt;Boolean, List&lt;Integer&gt;&gt; evenAndOdd =...</code></strong>éå¸¸æ–¹ä¾¿<strong><code>var evenAndOdd =...</code></strong> </p><br><p>  <strong>var</strong>çš„å‡ºç°å¹¶ä¸æ„å‘³ç€åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒæ€»æ˜¯æ€»æ˜¯æ–¹ä¾¿çš„ï¼Œæœ‰æ—¶ä½¿ç”¨æ ‡å‡†å·¥å…·ä¼šæ›´å®ç”¨ã€‚ </p><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶26ç§æƒ…å†µï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜ä½•æ—¶å¯ä»¥ä½¿ç”¨<strong>var</strong> ï¼Œä»¥åŠä½•æ—¶ä¸å€¼å¾—ä½¿ç”¨<strong>var</strong> ã€‚ </p><a name="habracut"></a><br><h2 id="punkt-1-staraytes-davat-osmyslennye-imena-lokalnym-peremennym"> è¦ç‚¹1ï¼šå°è¯•ç»™å±€éƒ¨å˜é‡èµ·æœ‰æ„ä¹‰çš„åå­— </h2><br><p> é€šå¸¸ï¼Œæˆ‘ä»¬ä¸“æ³¨äºä¸ºç±»çš„å­—æ®µæä¾›æ­£ç¡®çš„åç§°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¹å±€éƒ¨å˜é‡çš„åç§°æ²¡æœ‰ç»™äºˆåŒæ ·çš„å…³æ³¨ã€‚ å½“æˆ‘ä»¬çš„æ–¹æ³•å®ç°å®Œç¾ï¼ŒåŒ…å«å¾ˆå°‘çš„ä»£ç å¹¶å…·æœ‰è‰¯å¥½çš„åç§°æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸¸å¸¸ä¸æ³¨æ„å±€éƒ¨å˜é‡ï¼Œç”šè‡³å®Œå…¨ä¸ä½¿ç”¨å®ƒä»¬çš„åç§°ã€‚ </p><br><p> å½“æˆ‘ä»¬ä½¿ç”¨<strong>var</strong>è€Œä¸æ˜¯ç¼–å†™æ˜¾å¼ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°å®ƒä»¬å¹¶æ›¿æ¢<strong>var</strong> ã€‚ ä½†æ˜¯ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”±äºä½¿ç”¨<strong>var</strong>ä¼šä½¿ä»£ç çš„å¯è¯»æ€§å’Œç†è§£å¤æ‚åŒ–ï¼Œå› æ­¤äººä»¬é˜…è¯»å’Œç†è§£ä»£ç å˜å¾—æ›´åŠ å›°éš¾ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å€¾å‘äºå°†å˜é‡çš„ç±»å‹è§†ä¸ºä¸»è¦ä¿¡æ¯ï¼Œè€Œå°†å…¶åç§°è§†ä¸ºæ¬¡è¦ä¿¡æ¯ã€‚ è™½ç„¶åº”è¯¥æ°æ°ç›¸åã€‚ </p><br><h3 id="primer-1"> èŒƒä¾‹1ï¼š </h3><br><p> è®¸å¤šäººå¯èƒ½ä¼šåŒæ„ï¼Œåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå±€éƒ¨å˜é‡çš„åç§°å¤ªçŸ­äº†ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// HAVING public boolean callDocumentationTask() { DocumentationTool dtl = ToolProvider.getSystemDocumentationTool(); DocumentationTask dtt = dtl.getTask(...); return dtt.call(); }</span></span></code> </pre> <br><p> å½“ä½¿ç”¨çŸ­åç§°ä»¥åŠ<strong>varæ—¶</strong> ï¼Œä»£ç å˜å¾—æ›´åŠ ä¸æ¸…æ¥šï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID public boolean callDocumentationTask() { var dtl = ToolProvider.getSystemDocumentationTool(); var dtt = dtl.getTask(...); return dtt.call(); }</span></span></code> </pre> <br><p> é¦–é€‰é€‰é¡¹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER public boolean callDocumentationTask() { var documentationTool = ToolProvider.getSystemDocumentationTool(); var documentationTask = documentationTool.getTask(...); return documentationTask.call(); }</span></span></code> </pre> <br><h3 id="primer-2"> èŒƒä¾‹2ï¼š </h3><br><p> é¿å…è¿™æ ·å‘½åå˜é‡ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID public List&lt;Product&gt; fetchProducts(long userId) { var u = userRepository.findById(userId); var p = u.getCart(); return p; }</span></span></code> </pre> <br><p> ä½¿ç”¨æ›´æœ‰æ„ä¹‰çš„åç§°ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER public List&lt;Product&gt; fetchProducts(long userId) { var user = userRepository.findById(userId); var productList = user.getCart(); return productList; }</span></span></code> </pre> <br><h3 id="primer-3"> èŒƒä¾‹3ï¼š </h3><br><p> ä¸ºäº†ç»™å±€éƒ¨å˜é‡èµ‹äºˆæ›´æ˜“ç†è§£çš„åç§°ï¼Œè¯·ä¸è¦æç«¯ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID var byteArrayOutputStream = new ByteArrayOutputStream();</span></span></code> </pre> <br><p> ç›¸åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ›´ç®€çŸ­ä½†ä¹Ÿä¸éš¾ç†è§£çš„é€‰é¡¹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var outputStream = new ByteArrayOutputStream(); // or var outputStreamOfFoo = new ByteArrayOutputStream();</span></span></code> </pre> <br><p> æ‚¨æ˜¯å¦çŸ¥é“Javaæœ‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œåä¸ºï¼š <br>  <strong>InternalFrameInternalFrameTitlePaneInternalFrameTitlePaneMaximizeButtonWindowNotFocusedState</strong> </p><br><p> å¥½å§ï¼Œç”¨è¿™ç§ç±»å‹çš„å˜é‡å‘½åå¯èƒ½å¾ˆéº»çƒ¦:) </p><br><h2 id="punkt-2-ispolzuyte-literaly-chtoby-pomoch-var-tochno-opredelit-tip-primitiva-int-long-float-double"> ç¬¬2ç‚¹ï¼šä½¿ç”¨æ–‡å­—å¸®åŠ©varæŸ¥æ˜åŸºæœ¬ç±»å‹ï¼ˆintï¼Œlongï¼Œfloatï¼Œdoubleï¼‰ </h2><br><p> åœ¨åŸå§‹ç±»å‹ä¸ä½¿ç”¨æ–‡å­—çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå‘ç°é¢„æœŸç±»å‹å’Œéšå«ç±»å‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ è¿™æ˜¯ç”±<strong>var</strong>å˜é‡ä½¿ç”¨çš„éšå¼ç±»å‹è½¬æ¢å¼•èµ·çš„ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªä»£ç ç‰‡æ®µçš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ˜¾å¼å£°æ˜<strong>boolean</strong>å’Œ<strong>char</strong>ç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> flag = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// this is of type boolean char a = 'a'; // this is of type char</span></span></code> </pre> <br><p> ç°åœ¨æˆ‘ä»¬ä½¿ç”¨<strong>var</strong> ï¼Œè€Œä¸æ˜¯æ˜¾å¼å£°æ˜ç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> flag = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// this is inferred as boolean var a = 'a'; // this is inferred as char</span></span></code> </pre> <br><p> åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ã€‚ ç°åœ¨å¯¹<strong>int</strong> ï¼Œ <strong>long</strong> ï¼Œ <strong>float</strong>å’Œ<strong>double</strong>ç±»å‹æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> intNumber = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-comment"><span class="hljs-comment">// this is of type int long longNumber = 20; // this is of type long float floatNumber = 20; // this is of type float, 20.0 double doubleNumber = 20; // this is of type double, 20.0</span></span></code> </pre> <br><p> å°½ç®¡ä¸Šé¢çš„ä»£ç æ®µç®€å•æ˜äº†ï¼Œä½†ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨<strong>var</strong>è€Œä¸æ˜¯æ˜¾å¼æŒ‡å®šç±»å‹ã€‚ </p><br><p> é¿å…ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID var intNumber = 20; // this is inferred as int var longNumber = 20; // this is inferred as int var floatNumber = 20; // this is inferred as int var doubleNumber = 20; // this is inferred as int</span></span></code> </pre> <br><p> æ‰€æœ‰å››ä¸ªå˜é‡éƒ½å°†ä½œä¸º<strong>int</strong>è¾“å‡ºã€‚ è¦è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Javaæ–‡å­—ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var intNumber = 20; // this is inferred as int var longNumber = 20L; // this is inferred as long var floatNumber = 20F; // this is inferred as float, 20.0 var doubleNumber = 20D; // this is inferred as double, 20.0</span></span></code> </pre> <br><p> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªåè¿›åˆ¶æ•°ä¼šæ€æ ·ï¼Ÿ </p><br><p> å¦‚æœå¸Œæœ›è·å¾—<strong>float</strong>ç±»å‹çš„å˜é‡ï¼Œè¯·é¿å…è¿™ç§æƒ…å†µï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID, IF THIS IS A FLOAT var floatNumber = 20.5; // this is inferred as double</span></span></code> </pre> <br><p> ä¸ºé¿å…æ„å¤–ï¼Œè¯·ä½¿ç”¨é€‚å½“çš„æ–‡å­—ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER, IF THIS IS A FLOAT var floatNumber = 20.5F; // this is inferred as float</span></span></code> </pre> <br><h2 id="punkt-3-v-nekotoryh-sluchayah-var-i-neyavnye-privedeniya-tipov-mogut-uprostit-podderzhku-koda"> è¦ç‚¹3ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œvarå’Œéšå¼ç±»å‹è½¬æ¢å¯ä»¥ç®€åŒ–ä»£ç æ”¯æŒ </h2><br><p> ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çš„ä»£ç åœ¨ä¸¤ä¸ªæ–¹æ³•ä¹‹é—´ã€‚ ä¸€ç§æ–¹æ³•æ˜¯è·å–å…·æœ‰ä¸åŒäº§å“çš„è´­ç‰©è½¦ï¼Œç„¶åè®¡ç®—å‡ºæœ€ä½³ä»·æ ¼ã€‚ ä¸ºæ­¤ï¼Œä»–æ¯”è¾ƒäº†å¸‚åœºä¸Šçš„å„ç§ä»·æ ¼ï¼Œå¹¶ä»¥<strong>æµ®ç‚¹</strong>å‹çš„å½¢å¼è¿”å›äº†æ€»ä»·æ ¼ã€‚ å¦ä¸€ç§æ–¹æ³•åªæ˜¯ä»å¡ä¸­æ‰£é™¤æ­¤ä»·æ ¼ã€‚ </p><br><p> é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è®¡ç®—æœ€ä½³ä»·æ ¼çš„æ–¹æ³•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computeBestPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] items)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> price = ...; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; }</code> </pre> <br><p> å…¶æ¬¡ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹é€‚ç”¨äºåœ°å›¾çš„æ–¹æ³•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debitCard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> amount, ...)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä»£ç ä½œä¸ºå®¢æˆ·ç«¯æ”¾åœ¨è¿™ä¸¤ä¸ªå¤–éƒ¨æœåŠ¡æ–¹æ³•ä¹‹é—´ã€‚ æˆ‘ä»¬çš„ç”¨æˆ·å¯ä»¥é€‰æ‹©è¦è´­ä¹°çš„å•†å“ï¼Œç„¶åæˆ‘ä»¬ä¸ºä»–ä»¬è®¡ç®—æœ€ä¼˜æƒ çš„ä»·æ ¼ï¼Œç„¶åä»å¡ä¸­æ³¨é”€èµ„é‡‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID public void purchaseCart(long customerId) { ... float price = computeBestPrice(...); debitCard(price, ...); }</span></span></code> </pre> <br><p> ä¸€æ®µæ—¶é—´åï¼Œæ‹¥æœ‰APIçš„å…¬å¸å†³å®šæ”¾å¼ƒä»·æ ¼çš„ææ–™è¡¨ç¤ºå½¢å¼ï¼Œè½¬è€Œä½¿ç”¨å°æ•°ç‚¹ï¼ˆç°åœ¨ä½¿ç”¨<strong>float</strong> ï¼Œ <strong>int</strong>ä»£æ›¿ï¼‰ã€‚ å› æ­¤ï¼Œä»–ä»¬ä¿®æ”¹äº†APIä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computeBestPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] items)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> realprice = ...; ... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> price = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) realprice; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debitCard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> amount, ...)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p> äº‹å®æ˜¯æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨<strong>float</strong>å˜é‡çš„æ˜¾å¼å£°æ˜ä½œä¸ºä»·æ ¼ã€‚ ä»¥å½“å‰å½¢å¼ï¼Œæˆ‘ä»¬å°†åœ¨ç¼–è¯‘æ—¶æ”¶åˆ°é”™è¯¯ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é¢„è§åˆ°äº†è¿™ç§æƒ…å†µï¼Œå¹¶ä½¿ç”¨<strong>var</strong>è€Œä¸æ˜¯<strong>float</strong> ï¼Œé‚£ä¹ˆç”±äºéšå¼ç±»å‹è½¬æ¢ï¼Œæˆ‘ä»¬çš„ä»£ç å°†ç»§ç»­æ­£å¸¸å·¥ä½œï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER public void purchaseCart(long customerId) { ... var price = computeBestPrice(...); debitCard(price, ...); }</span></span></code> </pre> <br><h2 id="punkt-4-kogda-literaly-ne-yavlyayutsya-podhodyaschim-resheniem-to-ispolzuyte-yavnoe-privedenie-tipov-ili-otkazhites-ot-var"> è¦ç‚¹4ï¼šå¦‚æœæ–‡å­—ä¸æ˜¯åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼Œè¯·ä½¿ç”¨æ˜¾å¼å¼ºåˆ¶è½¬æ¢æˆ–æ”¾å¼ƒvar </h2><br><p>  Javaä¸­çš„æŸäº›åŸå§‹ç±»å‹æ²¡æœ‰ç‰¹æ®Šçš„æ–‡å­—ï¼Œä¾‹å¦‚<strong>å­—èŠ‚</strong>å’Œ<strong>çŸ­</strong>ç±»å‹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ˜¾å¼ç±»å‹æŒ‡å®šï¼Œæˆ‘ä»¬å¯ä»¥æ¯«æ— é—®é¢˜åœ°åˆ›å»ºå˜é‡ã€‚ </p><br><p> ä½¿ç”¨å®ƒä»£æ›¿<strong>var</strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER THIS INSTEAD OF USING VAR byte byteNumber = 45; // this is of type byte short shortNumber = 4533; // this is of type short</span></span></code> </pre> <br><p> ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¼˜å…ˆä½¿ç”¨æ˜¾å¼ç±»å‹è¡¨ç¤ºæ³•è€Œä¸æ˜¯ä»…ä½¿ç”¨<strong>var</strong> ï¼Ÿ å¥½å§ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨<strong>var</strong>ç¼–å†™è¿™æ®µä»£ç ã€‚ è¯·æ³¨æ„ï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨éƒ½ä¼šå‡å®šæ‚¨éœ€è¦<strong>int</strong>ç±»å‹çš„å˜é‡ã€‚ </p><br><p> é¿å…æ­¤é”™è¯¯ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID var byteNumber = 45; // this is inferred as int var shortNumber = 4533; // this is inferred as int</span></span></code> </pre> <br><p> è¿™é‡Œæ²¡æœ‰ä»»ä½•æ–‡å­—å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå› æ­¤æˆ‘ä»¬è¢«è¿«ä½¿ç”¨æ˜¾å¼çš„å‘ä¸‹ç±»å‹è½¬æ¢ã€‚ å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä¼šé¿å…è¿™ç§æƒ…å†µï¼Œå› ä¸ºæˆ‘åœ¨è¿™é‡Œçœ‹ä¸åˆ°ä»»ä½•ä¼˜åŠ¿ã€‚ </p><br><p> ä»…å½“æ‚¨ç¡®å®è¦ä½¿ç”¨<strong>var</strong>æ—¶æ‰ä½¿ç”¨æ­¤æ¡ç›®ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER THIS ONLY IF YOU WANT TO USE VAR var byteNumber = (byte) 45; // this is inferred as byte var shortNumber = (short) 4533; // this is inferred as short</span></span></code> </pre> <br><h2 id="punkt-5-izbegayte-ispolzovaniya-var-esli-nazvaniya-peremennyh-ne-soderzhat-dostatochnoy-informacii-o-tipe-dlya-ponimaniya-koda"> è¦ç‚¹5ï¼šå¦‚æœå˜é‡åç§°åŒ…å«çš„ç±»å‹ä¿¡æ¯ä¸è¶³ä»¥ç†è§£ä»£ç ï¼Œè¯·é¿å…ä½¿ç”¨var </h2><br><p> ä½¿ç”¨<strong>var</strong>çš„å¥½å¤„æ˜¯ç¼–å†™æ›´ç®€æ´çš„ä»£ç ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…é‡å¤ç±»åçš„éœ€è¦ï¼Œä»è€Œæ¶ˆé™¤äº†ä»£ç å†—ä½™ã€‚ </p><br><p> é¿å…ä»¥ä¸‹æƒ…å†µï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID MemoryCacheImageInputStream inputStream = new MemoryCacheImageInputStream(...);</span></span></code> </pre> <br><p> æ”¹ç”¨ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var inputStream = new MemoryCacheImageInputStream(...);</span></span></code> </pre> <br><p> å¯¹äºä¸‹é¢çš„æ„é€ ï¼Œ <strong>var</strong>ä¹Ÿæ˜¯ç®€åŒ–ä»£ç è€Œä¸ä¸¢å¤±ä¿¡æ¯çš„å¥½æ–¹æ³•ã€‚ </p><br><p> é¿å…ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); StandardJavaFileManager fm = compiler.getStandardFileManager(...);</span></span></code> </pre> <br><p> ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var compiler = ToolProvider.getSystemJavaCompiler(); var fileManager = compiler.getStandardFileManager(...);</span></span></code> </pre> <br><p> é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆåœ¨ç»™å‡ºçš„ç¤ºä¾‹ä¸­æˆ‘ä»¬æ›´æ„¿æ„ä½¿ç”¨<strong>var</strong> ï¼Ÿ å› ä¸ºæ‰€æœ‰å¿…éœ€çš„ä¿¡æ¯éƒ½åŒ…å«åœ¨å˜é‡çš„åç§°ä¸­ã€‚ ä½†æ˜¯ï¼Œå¦‚æœ<strong>var</strong>ä¸å˜é‡åç»“åˆä½¿ç”¨ä¼šé™ä½ä»£ç çš„æ¸…æ™°åº¦ï¼Œåˆ™æœ€å¥½æ‹’ç»ä½¿ç”¨å®ƒã€‚ </p><br><p> é¿å…ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID public File fetchCartContent() { return new File(...); } // As a human, is hard to infer the "cart" type without // inspecting the fetchCartContent() method var cart = fetchCartContent();</span></span></code> </pre> <br><p> ç”¨é€”ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER public File fetchCartContent() { return new File(...); } File cart = fetchCartContent();</span></span></code> </pre> <br><p> ä¾‹å¦‚ï¼Œè€ƒè™‘ä½¿ç”¨<strong><code>java.nio.channels.Selector</code></strong>ç±»ã€‚ æ­¤ç±»å…·æœ‰é™æ€çš„<strong><code>open()</code></strong>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Selectorå¹¶å°†å…¶æ‰“å¼€ã€‚ ä½†æ˜¯åœ¨è¿™é‡Œæ‚¨å¯ä»¥è½»æ¾åœ°è®¤ä¸º<strong><code>Selector.open()</code></strong>æ–¹æ³•å¯ä»¥è¿”å›<strong>å¸ƒå°”</strong>ç±»å‹ï¼Œè¿™å–å†³äºæ‰“å¼€ç°æœ‰é€‰æ‹©å™¨çš„æˆåŠŸç¨‹åº¦ï¼Œç”šè‡³å¯ä»¥è¿”å›<strong>void</strong> ã€‚ åœ¨æ­¤å¤„ä½¿ç”¨<strong>var</strong>ä¼šå¯¼è‡´ä¿¡æ¯ä¸¢å¤±å’Œä»£ç æ··ä¹±ã€‚ </p><br><h2 id="punkt-6-tip-var-garantiruet-bezopasnost-vo-vremya-kompilyacii"> è¦ç‚¹6ï¼švarç±»å‹ä¿è¯äº†ç¼–è¯‘æ—¶çš„å®‰å…¨æ€§ </h2><br><p> è¿™æ„å‘³ç€æˆ‘ä»¬æ— æ³•ç¼–è¯‘è¯•å›¾æ‰§è¡Œä¸æ­£ç¡®åˆ†é…çš„åº”ç”¨ç¨‹åºã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ— æ³•ç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE var items = 10; items = "10 items"; // incompatible types: String cannot be converted to int</span></span></code> </pre> <br><p> ä½†æ˜¯è¿™ä¸ªç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items = <span class="hljs-number"><span class="hljs-number">10</span></span>; items = <span class="hljs-number"><span class="hljs-number">20</span></span>;</code> </pre> <br><p> å¹¶ä¸”æ­¤ä»£ç æˆåŠŸç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items = <span class="hljs-string"><span class="hljs-string">"10"</span></span>; items = <span class="hljs-string"><span class="hljs-string">"10 items"</span></span>;</code> </pre> <br><p> ä¸€æ—¦ç¼–è¯‘å™¨å®šä¹‰äº†<strong>var</strong>å˜é‡çš„å€¼ï¼Œå°±ä¸èƒ½åˆ†é…é™¤æ­¤ç±»å‹ä»¥å¤–çš„ä»»ä½•å†…å®¹ã€‚ </p><br><h2 id="punkt-7-var-ne-mozhet-ispolzovatsya-dlya-sozdaniya-ekzemplyara-konkretnogo-tipa-i-naznacheniya-ego-peremennoy-tipa-interfeysa"> è¦ç‚¹7ï¼švarä¸èƒ½ç”¨äºå®ä¾‹åŒ–ç‰¹å®šç±»å‹å¹¶å°†å…¶åˆ†é…ç»™æ¥å£ç±»å‹å˜é‡ </h2><br><p> åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨â€œä½¿ç”¨æ¥å£ç¼–ç¨‹â€æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºArrayListç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶ä¸æŠ½è±¡ï¼ˆæ¥å£ï¼‰ç›¸å…³è”ï¼š </p><br><pre> <code class="java hljs">List&lt;String&gt; products = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;();</code> </pre> <br><p> è€Œä¸”æˆ‘ä»¬é¿å…å°†å¯¹è±¡ç»‘å®šåˆ°ç›¸åŒç±»å‹çš„å˜é‡ï¼š </p><br><pre> <code class="java hljs">ArrayList&lt;String&gt; products = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;();</code> </pre> <br><p> è¿™æ˜¯æœ€å¸¸è§ä¸”æœ€ç†æƒ³çš„åšæ³•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ç”¨ä»»ä½•å…¶ä»–æ–¹å¼æ›¿æ¢æ¥å£å®ç°ã€‚ ä¸ºæ­¤ï¼Œåªéœ€è¦å£°æ˜ä¸€ä¸ªæ¥å£ç±»å‹å˜é‡ã€‚ </p><br><p> æˆ‘ä»¬å°†æ— æ³•ä½¿ç”¨varå˜é‡æ¥éµå¾ªè¿™ä¸ªæ¦‚å¿µï¼Œå› ä¸º å§‹ç»ˆä¸ºä»–ä»¬æ˜¾ç¤ºç‰¹å®šç±»å‹ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œç¼–è¯‘å™¨ä¼šå°†å˜é‡çš„ç±»å‹ç¡®å®šä¸º<strong><code>ArrayList&lt;String&gt;</code></strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;String&gt;(); <span class="hljs-comment"><span class="hljs-comment">// inferred as ArrayList&lt;String&gt;</span></span></code> </pre> <br><p> æœ‰å‡ ç§é˜²å¾¡å‚æ•°å¯ä»¥è§£é‡Šæ­¤è¡Œä¸ºï¼š </p><br><ul><li><p>  <strong>var</strong>ç”¨äºå±€éƒ¨å˜é‡ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ¥å£ç¼–ç¨‹è¦æ¯”ä½¿ç”¨å€¼æˆ–å­—æ®µè¿”å›çš„æ–¹æ³•å‚æ•°å°‘ </p><br></li><li><p> å±€éƒ¨å˜é‡çš„èŒƒå›´åº”è¯¥å¾ˆå°ï¼Œå› æ­¤è§£å†³ç”±äºåˆ‡æ¢åˆ°å¦ä¸€ä¸ªå®ç°è€Œå¼•èµ·çš„é—®é¢˜åº”è¯¥ä¸ä¼šå¾ˆå›°éš¾ </p><br></li><li><p>  <strong>var</strong>å°†å³ä¾§çš„ä»£ç è§†ä¸ºç”¨äºç¡®å®šå®é™…ç±»å‹çš„åˆå§‹åŒ–ç¨‹åºã€‚ å¦‚æœåœ¨æŸä¸ªæ—¶å€™æ›´æ”¹äº†åˆå§‹åŒ–ç¨‹åºï¼Œåˆ™å®šä¹‰çš„ç±»å‹ä¹Ÿå¯èƒ½æ›´æ”¹ï¼Œä»è€Œå¯¼è‡´ä¾èµ–æ­¤å˜é‡çš„ä»£ç å‡ºç°é—®é¢˜ã€‚ </p><br></li></ul><br><h2 id="punkt-8-veroyatnost-vyvoda-neozhidaemogo-tipa"> è¦ç‚¹8ï¼šæ„å¤–ç±»å‹çš„æ¨æ–­çš„å¯èƒ½æ€§ </h2><br><p> åœ¨æ²¡æœ‰ä¿¡æ¯æ¥æ ‡è¯†ç±»å‹çš„æƒ…å†µä¸‹å°†varä¸<strong>è±å½¢è¿ç®—ç¬¦</strong> ï¼ˆ&lt;&gt;ï¼‰ç»“åˆä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´æ„å¤–ç»“æœã€‚ </p><br><p> åœ¨Java 7ä¹‹å‰ï¼Œæ˜¾å¼ç±»å‹æ¨æ–­ç”¨äºé›†åˆï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicitly specifying generic class's instantiation parameter type List&lt;String&gt; products = new ArrayList&lt;String&gt;();</span></span></code> </pre> <br><p> ä»Java 7å¼€å§‹ï¼Œå¼•å…¥äº†<strong>diamondè¿ç®—ç¬¦</strong> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†ç‹¬ç«‹æ´¾ç”Ÿå¿…è¦çš„ç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// inferring generic class's instantiation parameter type List&lt;String&gt; products = new ArrayList&lt;&gt;();</span></span></code> </pre> <br><p> ä¸‹é¢çš„ä»£ç å°†è¾“å‡ºä»€ä¹ˆç±»å‹ï¼Ÿ </p><br><p> æ‚¨åº”è¯¥é¿å…è¿™æ ·çš„æ„é€ ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID var productList = new ArrayList&lt;&gt;(); // is inferred as ArrayList&lt;Object&gt;</span></span></code> </pre> <br><p> è¯¥ç±»å‹å°†å®šä¹‰ä¸º<strong><code>ArrayList&lt;Object&gt;</code></strong> ã€‚ è¿™æ˜¯å› ä¸ºæœªæä¾›æ­£ç¡®ç¡®å®šç±»å‹æ‰€éœ€çš„ä¿¡æ¯ã€‚ è¿™å¯¼è‡´å°†é€‰æ‹©æœ€æ¥è¿‘çš„ç±»å‹ï¼Œè¿™å¯ä»¥ä¸æ­£åœ¨å‘ç”Ÿçš„æƒ…å†µç›¸å…¼å®¹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <strong><code>Object</code></strong> ã€‚ </p><br><p> å› æ­¤ï¼Œåªæœ‰åœ¨æˆ‘ä»¬æä¾›ç¡®å®šæ‰€éœ€ç±»å‹çš„å¿…è¦ä¿¡æ¯æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨<strong>var</strong> ã€‚ å¯ä»¥ç›´æ¥æŒ‡å®šç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ </p><br><p> ç›´æ¥æŒ‡å®šç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var productList = new ArrayList&lt;String&gt;(); // inferred as ArrayList&lt;String&gt;</span></span></code> </pre> <br><p> ä¼ é€’æ‰€éœ€ç±»å‹çš„å‚æ•°ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productStack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayDeque&lt;String&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(productStack); <span class="hljs-comment"><span class="hljs-comment">// inferred as ArrayList&lt;String&gt;</span></span></code> </pre> <br><pre> <code class="java hljs">Product p1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(); Product p2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> listOfProduct = List.of(p1, p2); <span class="hljs-comment"><span class="hljs-comment">// inferred as List&lt;Product&gt; // DON'T DO THIS var listofProduct = List.of(); // inferred as List&lt;Object&gt; listofProduct.add(p1); listofProduct.add(p2);</span></span></code> </pre> <br><h2 id="punkt-9-prisvoenie-massiva-k-var-peremennoy-ne-trebuet-skobok--"> ç¬¬9é¡¹ï¼šå°†æ•°ç»„åˆ†é…ç»™varå˜é‡ä¸éœ€è¦æ–¹æ‹¬å·[] </h2><br><p> æˆ‘ä»¬éƒ½çŸ¥é“å¦‚ä½•åœ¨Javaä¸­å£°æ˜æ•°ç»„ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// or, less preferred int numbers[] = new int[5];</span></span></code> </pre> <br><p> ä½¿ç”¨æ•°ç»„æ—¶å¦‚ä½•ä½¿ç”¨<strong>var</strong> ï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— éœ€åœ¨å·¦ä¾§ä½¿ç”¨æ‹¬å·ã€‚ </p><br><p> é¿å…ä»¥ä¸‹æƒ…å†µï¼ˆç”šè‡³æ— æ³•ç¼–è¯‘ï¼‰ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE var[] numbers = new int[5]; // or var numbers[] = new int[5];</span></span></code> </pre> <br><p> ç”¨é€”ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var numbers = new int[5]; // inferred as array of int numbers[0] = 2; // work numbers[0] = 2.2; // doesn't work numbers[0] = "2"; // doesn't work</span></span></code> </pre> <br><p> ä¸‹é¢ä½¿ç”¨<strong>var</strong>çš„ä»£ç ä¹Ÿæ— æ³•ç¼–è¯‘ã€‚ è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨æ— æ³•ä»å³ä¾§ç¡®å®šç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type work as expected int[] numbers = {1, 2, 3}; // IT DOESN'T COMPILE var numbers = {1, 2, 3}; var numbers[] = {1, 2, 3}; var[] numbers = {1, 2, 3};</span></span></code> </pre> <br><h2 id="punkt-10-var-nelzya-ispolzovat-pri-obyavlenii-neskolkih-peremennyh-v-odnoy-stroke"> é¡¹ç›®10ï¼šåœ¨åŒä¸€è¡Œä¸Šå£°æ˜å¤šä¸ªå˜é‡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨var </h2><br><p> å¦‚æœæ‚¨æƒ³ä¸€æ¬¡å£°æ˜ä¸€ç§ç±»å‹çš„å˜é‡ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦çŸ¥é“<strong>var</strong>ä¸é€‚åˆäºæ­¤ã€‚ ä»¥ä¸‹ä»£ç æ— æ³•ç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE // error: 'var' is not allowed in a compound declaration var hello = "hello", bye = "bye", welcome = "welcome";</span></span></code> </pre> <br><p> æ”¹ç”¨ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER String hello = "hello", bye = "bye", welcome = "welcome";</span></span></code> </pre> <br><p> è¿˜æ˜¯ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER var hello = "hello"; var bye = "bye"; var welcome = "welcome";</span></span></code> </pre> <br><h2 id="punkt-11-lokalnye-peremennye-dolzhny-stremitsya-k-minimizacii-svoey-oblasti-vidimosti-tip-var-usilivaet-eto-utverzhdenie"> è¦ç‚¹11ï¼šå±€éƒ¨å˜é‡åº”åŠªåŠ›ä½¿å…¶èŒƒå›´æœ€å°ã€‚  varç±»å‹åŠ å¼ºäº†è¯¥è¯­å¥ã€‚ </h2><br><p> å¯¹äºå±€éƒ¨å˜é‡ï¼Œè¯·ä¿ç•™è¾ƒå°çš„èŒƒå›´-æˆ‘ç¡®å®šæ‚¨åœ¨<strong>var</strong>ä¹‹å‰å¬è¿‡æ­¤å£°æ˜ã€‚ </p><br><p> å¯è¯»æ€§å’Œå¿«é€Ÿä¿®å¤é”™è¯¯æ˜¯æ”¯æŒæ­¤æ–¹æ³•çš„ç†ç”±ã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å¦‚ä¸‹å®šä¹‰ä¸€ä¸ªå †æ ˆï¼š </p><br><p> é¿å…è¿™ç§æƒ…å†µï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID ... var stack = new Stack&lt;String&gt;(); stack.push("George"); stack.push("Tyllen"); stack.push("Martin"); stack.push("Kelly"); ... // 50 lines of code that doesn't use stack // George, Tyllen, Martin, Kelly stack.forEach(...); ...</span></span></code> </pre> <br><p> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ­£åœ¨è°ƒç”¨<strong><code>forEach()</code></strong>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»§æ‰¿è‡ª<strong><code>java.util.Vector</code></strong> ã€‚ æ­¤æ–¹æ³•å°†åƒå…¶ä»–ä»»ä½•å‘é‡ä¸€æ ·éå†å †æ ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚ ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å†³å®šä½¿ç”¨<strong><code>ArrayDeque</code></strong>è€Œä¸æ˜¯<strong><code>Stack</code></strong> ã€‚ å½“æˆ‘ä»¬è¿™æ ·åšæ—¶ï¼Œ <strong><code>forEach()</code></strong>æ–¹æ³•å°†ä»ArrayDequeæ¥æ”¶å®ç°ï¼Œè¯¥å®ç°å°†ä½œä¸ºæ ‡å‡†å †æ ˆï¼ˆLIFOï¼‰éå†å †æ ˆ </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID ... var stack = new ArrayDeque&lt;String&gt;(); stack.push("George"); stack.push("Tyllen"); stack.push("Martin"); stack.push("Kelly"); ... // 50 lines of code that doesn't use stack // Kelly, Martin, Tyllen, George stack.forEach(...); ...</span></span></code> </pre> <br><p> è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ åœ¨è¿™é‡Œå¾ˆéš¾è·Ÿè¸ªé”™è¯¯ï¼Œå› ä¸ºåŒ…å«<strong><code>forEach()</code></strong>éƒ¨åˆ†çš„ä»£ç å¹¶ä¸ä½äºè¿›è¡Œæ›´æ”¹çš„ä»£ç æ—è¾¹ã€‚ ä¸ºäº†æé«˜æŸ¥æ‰¾å’Œä¿®å¤é”™è¯¯çš„é€Ÿåº¦ï¼Œæœ€å¥½ä½¿ç”¨<strong><code>stack</code></strong>å˜é‡ç¼–å†™ä»£ç ï¼Œå¹¶å°½å¯èƒ½é è¿‘æ­¤å˜é‡çš„å£°æ˜ã€‚ </p><br><p> æœ€ä½³åšæ³•å¦‚ä¸‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER ... var stack = new Stack&lt;String&gt;(); stack.push("George"); stack.push("Tyllen"); stack.push("Martin"); stack.push("Kelly"); ... // George, Tyllen, Martin, Kelly stack.forEach(...); ... // 50 lines of code that doesn't use stack</span></span></code> </pre> <br><p> ç°åœ¨ï¼Œå½“å¼€å‘äººå‘˜ä»<strong><code>Stack</code></strong>åˆ‡æ¢åˆ°<strong><code>ArrayQueue</code></strong> ï¼Œä»–å°†èƒ½å¤Ÿè¿…é€Ÿæ³¨æ„åˆ°é”™è¯¯å¹¶è¿›è¡Œä¿®å¤ã€‚ </p><br><h2 id="punkt-12-tip-var-uproschaet-ispolzovanie-razlichnyh-tipov-v-ternarnyh-operatorah"> ç¬¬12æ¡ï¼švarç±»å‹ç®€åŒ–äº†ä¸‰å…ƒè¿ç®—ç¬¦ä¸­å„ç§ç±»å‹çš„ä½¿ç”¨ </h2><br><p> æˆ‘ä»¬å¯ä»¥åœ¨ä¸‰å…ƒè¿ç®—ç¬¦çš„å³ä¾§ä½¿ç”¨ä¸åŒç±»å‹çš„æ“ä½œæ•°ã€‚ </p><br><p> å½“æ˜ç¡®æŒ‡å®šç±»å‹æ—¶ï¼Œä»¥ä¸‹ä»£ç ä¸ä¼šç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE List code = containsDuplicates ? List.of(12, 1, 12) : Set.of(12, 1, 10); // or Set code = containsDuplicates ? List.of(12, 1, 12) : Set.of(12, 1, 10);</span></span></code> </pre> <br><p> ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š </p><br><pre> <code class="java hljs">Collection code = containsDuplicates ? List.of(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) : Set.of(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); Object code = containsDuplicates ? List.of(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) : Set.of(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>);</code> </pre> <br><p> ä»¥ä¸‹ä»£ç ä¹Ÿæ— æ³•ç¼–è¯‘ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE int code = intOrString ? 12112 : "12112"; String code = intOrString ? 12112 : "12112";</span></span></code> </pre> <br><p> ä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨æ›´å¤šå¸¸è§„ç±»å‹ï¼š </p><br><pre> <code class="java hljs">Serializable code = intOrString ? <span class="hljs-number"><span class="hljs-number">12112</span></span> : <span class="hljs-string"><span class="hljs-string">"12112"</span></span>; Object code = intOrString ? <span class="hljs-number"><span class="hljs-number">12112</span></span> : <span class="hljs-string"><span class="hljs-string">"12112"</span></span>;</code> </pre> <br><p> åœ¨æ‰€æœ‰è¿™äº›æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨<strong>var</strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER // inferred as Collection&lt;Integer&gt; var code = containsDuplicates ? List.of(12, 1, 12) : Set.of(12, 1, 10); // inferred as Serializable var code = intOrString ? 12112 : "12112";</span></span></code> </pre> <br><p> ä»è¿™äº›ç¤ºä¾‹ä¸­ä¸èƒ½å¾—å‡º<strong>var</strong>ç±»å‹åœ¨è¿è¡Œæ—¶å®šä¹‰å¯¹è±¡ç±»å‹çš„ç»“è®ºã€‚ äº‹å®å¹¶éå¦‚æ­¤ï¼ </p><br><p> è€Œä¸”ï¼Œå½“ç„¶ï¼Œ <strong>var</strong>ç±»å‹å°†ä¸ä¸¤ä¸ªæ“ä½œæ•°çš„ç›¸åŒç±»å‹ä¸€èµ·æ­£å¸¸å·¥ä½œï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// inferred as float var code = oneOrTwoDigits ? 1211.2f : 1211.25f;</span></span></code> </pre> <br><h2 id="punkt-13-tip-var-mozhet-byt-ispolzovan-vnutri-ciklov"> è¦ç‚¹13ï¼švarç±»å‹å¯ä»¥åœ¨å¾ªç¯å†…ä½¿ç”¨ </h2><br><p> æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†<strong>for</strong>å¾ªç¯ä¸­ç±»å‹çš„æ˜¾å¼å£°æ˜æ›¿æ¢<strong>ä¸º</strong> <strong>var</strong>ç±»å‹ã€‚ </p><br><p> å°†æ˜¾å¼<strong>int</strong>ç±»å‹æ›´æ”¹ä¸º<strong>var</strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type for (int i = 0; i &lt; 5; i++) { ... } // using var for (var i = 0; i &lt; 5; i++) { // i is inferred of type int ... }</span></span></code> </pre> <br><p> å°†<strong><code>Order</code></strong>çš„æ˜¾å¼ç±»å‹æ›´æ”¹ä¸º<strong>var</strong> ï¼š </p><br><pre> <code class="java hljs">List&lt;Order&gt; orderList = ...; <span class="hljs-comment"><span class="hljs-comment">// explicit type for (Order order : orderList) { ... } // using var for (var order : orderList) { // order type is inferred as Order ... }</span></span></code> </pre> <br><h2 id="punkt-14-var-otlichno-rabotaet-s-potokami-stream-v-java-8"> è¦ç‚¹14ï¼švaråœ¨Java 8ä¸­å¯ä»¥å¾ˆå¥½åœ°å¤„ç†æµ </h2><br><p> å°†Java 10ä¸­çš„varä¸Java 8ä¸­å‡ºç°çš„æµä¸€èµ·ä½¿ç”¨éå¸¸ç®€å•ã€‚ </p><br><p> æ‚¨å¯ä»¥ç®€å•åœ°ç”¨<strong>var</strong>æ›¿æ¢<strong>Stream</strong>ç±»å‹çš„æ˜¾å¼å£°æ˜ï¼š </p><br><h3 id="primer-1-1"> èŒƒä¾‹1ï¼š </h3><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type Stream&lt;Integer&gt; numbers = Stream.of(1, 2, 3, 4, 5); numbers.filter(t -&gt; t % 2 == 0).forEach(System.out::println); // using var var numbers = Stream.of(1, 2, 3, 4, 5); // inferred as Stream&lt;Integer&gt; numbers.filter(t -&gt; t % 2 == 0).forEach(System.out::println);</span></span></code> </pre> <br><h3 id="primer-2-1"> èŒƒä¾‹2ï¼š </h3><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit types Stream&lt;String&gt; paths = Files.lines(Path.of("...")); List&lt;File&gt; files = paths.map(p -&gt; new File(p)).collect(toList()); // using var var paths = Files.lines(Path.of("...")); // inferred as Stream&lt;String&gt; var files = paths.map(p -&gt; new File(p)).collect(toList()); // inferred as List&lt;File&gt;</span></span></code> </pre><br><h2 id="punkt-15-var-mozhno-ispolzovat-pri-obyavlenii-lokalnyh-peremennyh-prednaznachennyh-dlya-razbieniya-bolshih-cepochek-vyrazheniy-na-chasti"> ç¬¬15æ¡ï¼šåœ¨å£°æ˜æ—¨åœ¨å°†å¤§å‹è¡¨è¾¾å¼é“¾åˆ†è§£æˆå¤šä¸ªéƒ¨åˆ†çš„å±€éƒ¨å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨var </h2><br><p> å¸¦æœ‰å¤§é‡åµŒå¥—çš„è¡¨è¾¾å¼çœ‹èµ·æ¥ä»¤äººå°è±¡æ·±åˆ»ï¼Œé€šå¸¸çœ‹èµ·æ¥åƒæ˜¯æŸç§æ™ºèƒ½ä¸”é‡è¦çš„ä»£ç æ®µã€‚ åœ¨éœ€è¦æé«˜ä»£ç å¯è¯»æ€§çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨å±€éƒ¨å˜é‡å°†å¤§è¡¨è¾¾å¼åˆ†è§£ã€‚ ä½†æ˜¯æœ‰æ—¶å€™å†™å¾ˆå¤šå±€éƒ¨å˜é‡ä¼¼ä¹æ˜¯ä¸€é¡¹éå¸¸ç´¯äººçš„å·¥ä½œï¼Œæˆ‘æƒ³é¿å…ã€‚ </p><br><p> ä¸€ä¸ªå¤§å‹è¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="java hljs">List&lt;Integer&gt; intList = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// AVOID int result = intList.stream() .collect(Collectors.partitioningBy(i -&gt; i % 2 == 0)) .values() .stream() .max(Comparator.comparing(List::size)) .orElse(Collections.emptyList()) .stream() .mapToInt(Integer::intValue) .sum();</span></span></code> </pre> <br><p> æœ€å¥½å°†ä»£ç åˆ†è§£ä¸ºå„ä¸ªç»„æˆéƒ¨åˆ†ï¼š </p><br><pre> <code class="java hljs">List&lt;Integer&gt; intList = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// PREFER Map&lt;Boolean, List&lt;Integer&gt;&gt; evenAndOdd = intList.stream() .collect(Collectors.partitioningBy(i -&gt; i % 2 == 0)); Optional&lt;List&lt;Integer&gt;&gt; evenOrOdd = evenAndOdd.values() .stream() .max(Comparator.comparing(List::size)); int sumEvenOrOdd = evenOrOdd.orElse(Collections.emptyList()) .stream() .mapToInt(Integer::intValue) .sum();</span></span></code> </pre> <br><p> è¯¥ä»£ç çš„ç¬¬äºŒä¸ªç‰ˆæœ¬çœ‹èµ·æ¥æ›´æ˜“è¯»ï¼Œæ›´ç®€å•ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¹Ÿæœ‰æƒä½¿ç”¨ã€‚ å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œé€‚åº”å¦‚æ­¤å¤§çš„è¡¨è¾¾å¼å¹¶åå‘äºå±€éƒ¨å˜é‡æ›´å–œæ¬¢æˆ‘ä»¬ã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨<strong>var</strong>ç±»å‹å¯ä»¥é€šè¿‡å‡å°‘å£°æ˜å±€éƒ¨å˜é‡çš„å·¥ä½œé‡æ¥å¸®åŠ©ç ´åå¤§å‹ç»“æ„ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intList = List.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// PREFER var evenAndOdd = intList.stream() .collect(Collectors.partitioningBy(i -&gt; i % 2 == 0)); var evenOrOdd = evenAndOdd.values() .stream() .max(Comparator.comparing(List::size)); var sumEvenOrOdd = evenOrOdd.orElse(Collections.emptyList()) .stream() .mapToInt(Integer::intValue) .sum();</span></span></code> </pre> <br><h2 id="punkt-16-var-ne-mozhet-byt-ispolzovan-kak-tip-vozvraschaemogo-znacheniya-ili-kak-tip-argumenta-metoda"> ç¬¬16æ¡ï¼švarä¸èƒ½ç”¨ä½œè¿”å›ç±»å‹æˆ–æ–¹æ³•å‚æ•°ç±»å‹ </h2><br><p> ä¸‹é¢æ˜¾ç¤ºçš„ä¸¤ä¸ªä»£ç æ®µå°†æ— æ³•ç¼–è¯‘ã€‚ </p><br><p> ä½¿ç”¨<strong>var</strong>ä½œä¸ºè¿”å›ç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE public var countItems(Order order, long timestamp) { ... }</span></span></code> </pre> <br><p> ä½¿ç”¨<strong>var</strong>ä½œä¸ºæ–¹æ³•å‚æ•°çš„ç±»å‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE public int countItems(var order, var timestamp) { ... }</span></span></code> </pre> <br><h2 id="punkt-17-lokalnye-peremennye-tipa-var-mogut-byt-peredany-kak-parametry-metoda-ili-mogut-prinimat-vozvraschaemoe-metodom-znachenie"> ç¬¬17æ¡ï¼švarç±»å‹çš„å±€éƒ¨å˜é‡å¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°ä¼ é€’ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æ–¹æ³•è¿”å›çš„å€¼ </h2><br><p> ä»¥ä¸‹ä»£ç ç‰‡æ®µå°†ç¼–è¯‘å¹¶æ­£å¸¸è¿è¡Œï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Order order, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> timestamp)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = ...; <span class="hljs-comment"><span class="hljs-comment">// an Order instance var timestamp = ...; // a long representing a timestamp var itemsNr = countItems(order, timestamp); // inferred as int type ... }</span></span></code> </pre> <br><p>        : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;A, B&gt; <span class="hljs-function"><span class="hljs-function">B </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(A container, B tocontain)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = ...; <span class="hljs-comment"><span class="hljs-comment">// Order instance var product = ...; // Product instance var resultProduct = contains(order, product); // inferred as Product type</span></span></code> </pre> <br><h2 id="punkt-18-peremennye-var-mogut-byt-ispolzovany-s-anonimnymi-klassami">  18:  var       </h2><br><p>    : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weighter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product)</span></span></span></span>; } <span class="hljs-comment"><span class="hljs-comment">// AVOID Weighter weighter = new Weighter() { @Override public int getWeight(Product product) { ... } }; Product product = ...; // a Product instance int weight = weighter.getWeight(product);</span></span></code> </pre> <br><p>  <strong>var</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weighter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product)</span></span></span></span>; } <span class="hljs-comment"><span class="hljs-comment">// PREFER var weighter = new Weighter() { @Override public int getWeight(Product product) { ... } }; var product = ...; // a Product instance var weight = weighter.getWeight(product);</span></span></code> </pre> <br><h2 id="punkt-19-peremennye-tipa-var-mogut-ispolzovatsya-v-kachestve-effectively-final-peremennyh">  19:   var     effectively final  </h2><br><p> , : </p><br><blockquote> <em>â€¦   Java SE 8,           ,   final  effectively final.   ,        ,  effectively final</em> . </blockquote><p>  ,   <strong>var</strong>   effectively final.      . </p><br><p> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weighter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product)</span></span></span></span>; } <span class="hljs-comment"><span class="hljs-comment">// AVOID int ratio = 5; // this is effectively final Weighter weighter = new Weighter() { @Override public int getWeight(Product product) { return ratio * ...; } }; ratio = 3; // this reassignment will cause error</span></span></code> </pre> <br><p> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weighter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product)</span></span></span></span>; } <span class="hljs-comment"><span class="hljs-comment">// PREFER var ratio = 5; // this is effectively final var weighter = new Weighter() { @Override public int getWeight(Product product) { return ratio * ...; } }; ratio = 3; // this reassignment will cause error</span></span></code> </pre> <br><h2 id="punkt-20-var-peremennye-mogut-byt-final-peremennymi">  20: var-   final- </h2><br><p>   <strong>var</strong>     ( ,     effectively final).     ,  <strong>final</strong> . </p><br><p> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// AVOID // IT DOESN'T COMPILE public void discount(int price) { final int limit = 2000; final int discount = 5; if (price &gt; limit) { discount++; // this reassignment will cause error, which is ok } }</span></span></code> </pre> <br><p> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER // IT DOESN'T COMPILE public void discount(int price) { final var limit = 2000; final var discount = 5; if (price &gt; limit) { discount++; // this reassignment will cause error, which is ok } }</span></span></code> </pre> <br><h2 id="punkt-21-lyambda-vyrazheniyam-i-ssylkam-na-metody-nuzhny-yavnye-tipy">  21:          </h2><br><p>  <strong>var</strong>   ,     .          ,   <strong>var</strong> ,  : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE // lambda expression needs an explicit target-type var f = x -&gt; x + 1; // method reference needs an explicit target-type var exception = IllegalArgumentException::new;</span></span></code> </pre> <br><p>   : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER Function&lt;Integer, Integer&gt; f = x -&gt; x + 1; Supplier&lt;IllegalArgumentException&gt; exception = IllegalArgumentException::new;</span></span></code> </pre> <br><p>   Java 11   <strong>var</strong> -    .      Java 11: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java 11 (var x, var y) -&gt; x + y // or (@Nonnull var x, @Nonnull var y) -&gt; x + y</span></span></code> </pre> <br><h2 id="punkt-22-inicializirovat-var-nullem-zaprescheno">  22:  var null'  </h2><br><p>   <strong>var</strong> -  . </p><br><p>     (  <strong>null</strong> ): </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE var message = null; // result in an error of type: variable initializer is 'null'</span></span></code> </pre> <br><p>      ( ): </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE var message; // result in: cannot use 'var' on variable without initializer ... message = "hello";</span></span></code> </pre> <br><p>        : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER String message = null; // or String message; ... message = "hello";</span></span></code> </pre> <br><h2 id="punkt-23-tip-var-nelzya-ispolzovat-v-polyah-klassa">  23:  var      </h2><br><p>    <strong>var</strong>   ,      . </p><br><p>      : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE public class Product { private var price; // error: 'var' is not allowed here private var name; // error: 'var' is not allowed here ... }</span></span></code> </pre> <br><p>   : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER public class Product { private int price; private String name; ... }</span></span></code> </pre> <br><h2 id="punkt-24-var-nelzya-ispolzovat-v-bloke-catch">  24: var     catch </h2><br><p>   ,    try-with-resources </p><br><h3 id="blok-catch">  catch </h3><br><p>    ,    ,   . </p><br><p>     : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE try { TimeUnit.NANOSECONDS.sleep(5000); } catch (var ex) { ... }</span></span></code> </pre> <br><p>        : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// PREFER try { TimeUnit.NANOSECONDS.sleep(5000); } catch (InterruptedException ex) { ... }</span></span></code> </pre> <br><h3 id="try-with-resources"> Try-with-resources </h3><br><p> , <strong>var</strong>     <strong>try-with-resources</strong> . </p><br><p> ,  : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type try (PrintWriter writer = new PrintWriter(new File("welcome.txt"))) { writer.println("Welcome message"); }</span></span></code> </pre> <br><p>     <strong>var</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// using var try (var writer = new PrintWriter(new File("welcome.txt"))) { writer.println("Welcome message"); }</span></span></code> </pre> <br><h2 id="punkt-25-tip-var-mozhno-ispolzovat-s-dzhenerikami">  25:  var     </h2><br><p> ,     : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;T extends Number&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{ T temp = t; ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; }</code> </pre> <br><p>   ,  <strong>var</strong>    ,       <strong>T</strong>  <strong>var</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;T extends Number&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> temp = t; ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp; }</code> </pre> <br><p>     ,      <strong>var</strong> : </p><br><pre> <code class="java hljs">codepublic &lt;T extends Number&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{ List&lt;T&gt; numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); numbers.add((T) Integer.valueOf(<span class="hljs-number"><span class="hljs-number">3</span></span>)); numbers.add((T) Double.valueOf(<span class="hljs-number"><span class="hljs-number">3.9</span></span>)); numbers.add(t); numbers.add(<span class="hljs-string"><span class="hljs-string">"5"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// error: incompatible types: String cannot be converted to T ... }</span></span></code> </pre> <br><p>     <strong>List&lt;T&gt;</strong>  <strong>var</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;T extends Number&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;T&gt;(); <span class="hljs-comment"><span class="hljs-comment">// DON'T DO THIS, DON'T FORGET THE, T var numbers = new ArrayList&lt;&gt;(); numbers.add((T) Integer.valueOf(3)); numbers.add((T) Double.valueOf(3.9)); numbers.add(t); numbers.add("5"); // error: incompatible types: String cannot be converted to T ... }</span></span></code> </pre> <br><h2 id="punkt-26-budte-vnimatelny-s-tipom-var-pri-ispolzovanii-wildcards--kovariantov-i-kontrvariantov">  26:     var   Wildcards (?),    </h2><br><h3 id="ispolzovanie--wildcards"> ? Wildcards </h3><br><p>    <strong>var</strong>  : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type Class&lt;?&gt; clazz = Integer.class; // use var var clazz = Integer.class;</span></span></code> </pre> <br><p>    <strong>Foo&lt;?&gt;</strong>  <strong>var</strong>  ,      ,    <strong>var</strong>    . </p><br><p>     ,   , , ,    .       ,     <strong>ArrayList</strong>  ,     <strong>Collection&lt;?&gt;</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type Collection&lt;?&gt; stuff = new ArrayList&lt;&gt;(); stuff.add("hello"); // compile time error stuff.add("world"); // compile time error // use var, this will remove the error, but I don't think that this is // what you had in mind when you wrote the above code var stuff = new ArrayList&lt;&gt;(); strings.add("hello"); // no error strings.add("world"); // no error</span></span></code> </pre> <br><h3 id="ispolzovanie-kovariantov-foo--extends-t-i-kontrvariantov-foo--super-t">   (Foo &lt;? extends T&gt;)   (Foo &lt;? super T&gt;) </h3><br><p>  ,    : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// explicit type Class&lt;? extends Number&gt; intNumber = Integer.class; Class&lt;? super FilterReader&gt; fileReader = Reader.class;</span></span></code> </pre> <br><p>            ,    ,   : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IT DOESN'T COMPILE // error: Class&lt;Reader&gt; cannot be converted to Class&lt;? extends Number&gt; Class&lt;? extends Number&gt; intNumber = Reader.class; // error: Class&lt;Integer&gt; cannot be converted to Class&lt;? super FilterReader&gt; Class&lt;? super FilterReader&gt; fileReader = Integer.class;</span></span></code> </pre> <br><p>    <strong>var</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// using var var intNumber = Integer.class; var fileReader = Reader.class;</span></span></code> </pre> <br><p>       ,     .        â€“     : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// this will compile just fine var intNumber = Reader.class; var fileReader = Integer.class;</span></span></code> </pre> <br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p>       Â« <strong>var</strong> Â»,    Java 10.    ,           .   ,      <strong>var</strong>    ,     . </p><br><p>  <strong>var</strong>      Java! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438206/">https://habr.com/ru/post/zh-CN438206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438192/index.html">æˆ´å°”Inspiron 14ï¼ˆ5482ï¼‰ï¼šç»æµé«˜æ•ˆçš„2åˆ1å‡çº§é€‰é¡¹</a></li>
<li><a href="../zh-CN438196/index.html">å¦‚æœé¡¹ç›®æ˜¯â€œå‰§é™¢â€ï¼Œè¯·ä½¿ç”¨æ¼”å‘˜...</a></li>
<li><a href="../zh-CN438198/index.html">è®©æˆ‘ä»¬æ·±å…¥å†å²ï¼šç›´å‡æœºçš„è…¿åœ¨å“ªé‡Œç”Ÿé•¿</a></li>
<li><a href="../zh-CN438202/index.html">JavaScriptï¼šå…¬å…±å’Œç§æœ‰ç±»å­—æ®µ</a></li>
<li><a href="../zh-CN438204/index.html">Swiftç¼–è¯‘å™¨è®¾å¤‡ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN438210/index.html">æ³‰åŸæ–‡æ˜ï¼Œ2/5</a></li>
<li><a href="../zh-CN438212/index.html">æ¦‚å¿µéªŒè¯ï¼šå¦‚ä½•éªŒè¯MLå®ç°å€¼å¾—æˆ‘ä»¬å…³æ³¨</a></li>
<li><a href="../zh-CN438214/index.html">ç¾å›½ç§‘æŠ€åˆåˆ›å…¬å¸å°†åœ¨2019å¹´é¢ä¸´æ–°çš„æ”¿åºœç®¡åˆ¶</a></li>
<li><a href="../zh-CN438218/index.html">OpenSceneGraphï¼šäº‹ä»¶å¤„ç†</a></li>
<li><a href="../zh-CN438224/index.html">æ”¿åºœå®¿èˆã€‚ é£è¡Œå‘˜</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>