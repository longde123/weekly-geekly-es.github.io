<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍱 🚵 🤦 Manfaat menganalisis aplikasi level 7 di firewall. Bagian 1. Dasar-dasar 👩🏽‍🔧 ☦️ 🚿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Generasi baru firewall lebih nyaman dan aman berkat arsitektur engine baru dan ideologi baru untuk mengelola aliran jaringan. 
 Mengapa artikel ini mu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manfaat menganalisis aplikasi level 7 di firewall. Bagian 1. Dasar-dasar</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436392/"><img src="https://habrastorage.org/getpro/habr/post_images/786/9e4/d4e/7869e4d4eac6b07b8bfa763cb3985347.png"><br>  Generasi baru firewall lebih nyaman dan aman berkat arsitektur engine baru dan ideologi baru untuk mengelola aliran jaringan. <br><h3>  Mengapa artikel ini muncul? </h3><blockquote>  Berulang kali datang ke sesama pekerja keamanan yang menggunakan generasi baru firewall dan melihat bahwa mereka terus menulis aturan tentang nomor port.  Atas saran saya untuk terus menulis dengan nama aplikasi, saya mendengar "Bagaimana jika itu tidak berfungsi seperti itu?".  Jika Anda juga "takut" atau tidak jelas mengapa harus menulis aturan untuk aplikasi, artikel ini untuk Anda. </blockquote><br><a name="habracut"></a><br><h1>  BAGIAN 1. Dasar-Dasar Firewall </h1><br><h3>  DAFTAR ISI </h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pendahuluan</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Definisi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Firewall</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L3 firewall</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L4 firewall</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L7 firewall</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UTM</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NGFW</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Contohnya</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Server proxy</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apa itu USER-ID</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesalahpahaman tentang Stateful Inspection: State L4 vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesalahpahaman tentang Stateful Inspection: Jumlah Sesi L4 vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesalahpahaman tentang Stateful Inspection: L4 Cluster vs L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2. Dampak Keamanan dari L7 Firewall</a> <br><br><a name="Intro"></a><h2>  Pendahuluan </h2><br>  Skype, TOR, Ultrasurf, TCP-over-DNS, dan beberapa ratus aplikasi dan terowongan lainnya diam-diam melewati firewall inspeksi statefull dan proxy HTTP.  Banyak perlindungan membuka koneksi, tetapi tidak memeriksa apa yang ada di dalamnya.  Saya mengusulkan untuk mencari cara bagaimana mengontrol koneksi aplikasi dalam generasi baru firewall secara terkontrol, di mana aturan ditulis oleh nama aplikasi, yang sesuai dengan level 7 model ISO OSI.  Firewall seperti itu disebut Next Generation Firewall, generasi baru firewall atau hanya NGFW. <br><blockquote>  Administrator firewall tidak hanya perlu mengizinkan koneksi, tetapi juga untuk memastikan bahwa apa yang Anda inginkan masuk ke dalam koneksi yang diizinkan, termasuk memeriksa file yang ditransfer.  Ini disebut <b>izin aplikasi aman</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b2/d52/1e2/9b2d521e2806d725232f208f318014fb.jpg"></blockquote>  Ada beberapa perbedaan penting dalam bekerja dengan lalu lintas, yang Anda pahami hanya ketika Anda beralih ke penggunaan aturan yang sebenarnya, di mana kriterianya adalah penerapan level 7 dari model ISO OSI: <br><br><ul><li>  Administrator TI melihat bahwa NGFW memvisualisasikan lalu lintas jaringan, yaitu, itu menunjukkan isi bidang data paket, nama pengguna dan aplikasi mana yang berjalan dan file mana yang ditransmisikan. <br></li><li>  Keamanan TI melihat bahwa NGFW memberikan resolusi aplikasi yang aman, karena analisis data yang lebih mendalam dalam paket memungkinkan Anda melihat virus, mengaktifkan pengiriman file yang tidak dikenal ke kotak pasir, memeriksa jenis file, kata kunci untuk DLP, memeriksa kategori URL, memeriksa apa yang ada di dalam SSL dan SSH, Bandingkan dengan indikator kompromi yang sudah dikenal di seluruh dunia, aktifkan filter DNS dan teknik modern lainnya. <br></li></ul><br>  Untuk memahami alasannya, bandingkan log firewall L4 dan L7. <br><blockquote>  A) Bandingkan entri dalam log <b>firewall L4</b> , yang hanya mengurai header tingkat transportasi (keempat) dari model ISO OSI - dalam hal ini TCP: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8a/7bd/dbd/d8a7bddbdb4f4b2de47d82f964de4075.png"></blockquote>  Ya, ada informasi tentang sumber dan tujuan, Anda dapat menebak dengan nomor port 443 yang ada di dalamnya, dengan tingkat probabilitas tinggi (seperti bahasa Inggris katakan), koneksi SSL.  Saya pribadi tidak dapat melihat insiden apa pun di entri ini.  Bagaimana dengan kamu? <br><blockquote>  B) Bandingkan entri dalam log <b>firewall L7</b> untuk koneksi TCP yang sama, di mana konten itu sendiri juga ditransfer ke bidang data TCP / IP: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cea/5fc/e07/cea5fce0756312001f33bc13bf101d7a.png"></blockquote>  Di sini Anda melihat bahwa Ivanov dari departemen pemasaran mengunggah file bertanda "bukan untuk distribusi" ke Slideshare.  Ini adalah contoh dari insiden nyata di mana seorang karyawan memposting rencana pengembangan perusahaan rahasia selama setahun di Internet.  Informasi ini diperoleh di firewall L7 berdasarkan analisis koneksi yang sama seperti di atas untuk firewall L4 dan segera informasi tersebut menjadi cukup untuk memahami bahwa ada insiden.  Dan ini adalah pendekatan yang sangat berbeda untuk analisis lalu lintas.  Tapi, saya akan segera memperingatkan Anda bahwa analisis mendalam seperti itu menempatkan beban serius pada prosesor dan RAM perangkat. <br><br>  Terkadang dirasakan bahwa tingkat detail majalah di NGFW mirip dengan tingkat detail dalam sistem SIEM yang mengumpulkan informasi sedikit demi sedikit dari sumber yang berbeda.  Itulah sebabnya NGFW adalah salah satu sumber informasi terbaik untuk SIEM. <br><br><a name="Def"></a><h2>  Definisi </h2><br>  Penting untuk menyoroti ketentuan yang akan terus kami operasikan.  Saya tidak memiliki tujuan secara rinci untuk memberikan semua definisi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/871/b80/69b/871b8069b4cf331d60aeb72e986a6fa1.png"><br><br>  <b>Model ISO ISO tujuh tingkat</b> adalah model interaksi antara perangkat jaringan, yang menyatakan bahwa ada 7 tingkat interaksi abstraksi: yang pertama adalah fisik, berikutnya adalah saluran, jaringan, yang keempat adalah transportasi, kemudian sesi, presentasi dan tingkat ketujuh adalah aplikasi (lihat gambar di atas) ) <br><br>  Setiap perangkat jaringan beroperasi pada level abstraksinya sendiri: server web dan browser - pada level aplikasi (level 7 atau secara singkat L7), router - berkomunikasi satu sama lain di saluran (2) dan tingkat jaringan (3) ketika mereka mengirimkan frame dan paket satu sama lain . <br><br>  Firewall juga merupakan perangkat jaringan dan, tergantung pada jenisnya, juga dapat berupa sakelar dan router dan bahkan menjadi "kabel virtual" dari sudut pandang topologi jaringan, tetapi perangkat jaringan ini memiliki beban tambahan: mereka harus menganalisis konten paket. <br><br>  Dan kedalaman analisis paket jaringan dapat bervariasi.  Apakah mereka menganalisis level 4 atau 7 adalah perbedaan penting. <br><br><a name="FW"></a><h2>  Firewall </h2><br>  <b>Firewall (ITU), Network Firewall</b> adalah perangkat jaringan yang membagi jaringan menjadi segmen dengan kebijakan keamanan yang berbeda dan mengendalikan kebijakan ini.  Misalnya, segmen Internet - apa pun bisa dilakukan di sana.  Dan segmen pusat data Anda - di sana Anda hanya dapat mengerjakan daftar karyawan khusus untuk aplikasi yang diizinkan.  Dalam satu host VMware, mungkin ada beberapa jaringan virtual dengan mesin virtual dan kebijakan akses yang berbeda untuk mereka. <br><br>  Kebijakan keamanan firewall berisi aturan yang memberlakukan kode program perangkat dengan menganalisis setiap frame dan paket yang datang dan pergi dari firewall.  Dalam aturan firewall, kriteria inspeksi (kualifikasi) didefinisikan, sesuai dengan keputusan yang dibuat untuk mengizinkan atau memblokir lalu lintas.  Contoh kualifikasi dalam aturan adalah: alamat, port, aplikasi, pengguna, zona.  Firewall secara berurutan, aturan demi aturan, memindai kriteria dari atas ke bawah daftar dan jika lalu lintas masuk memenuhi semua kriteria aturan (operasi logis “DAN” antara kriteria) maka tindakan yang ditunjukkan diterapkan: blok atau lewati.  Tindakan ini dilakukan baik untuk paket pertama dan untuk semua paket selanjutnya dari koneksi TCP / IP yang sama. <br><br>  Ada berbagai jenis dan implementasi firewall.  Kami akan mempertimbangkan klasifikasi berdasarkan tingkat kedalaman analisis lalu lintas yang digunakan: L3, L4 dan L7. <br><br><a name="L3"></a><h2>  L3 firewall </h2><br>  <b>L3 firewall</b> adalah firewall yang melewati lalu lintas melalui dirinya sendiri dan hanya menganalisis header protokol IP, yaitu alamat dari mana dan di mana lalu lintas berjalan.  Firewall seperti itu disebut <b>packet filtering</b> .  Aturannya disebut "daftar akses" atau daftar akses (ACL) dan fungsi ini saat ini bekerja di hampir semua router dan sistem operasi.  Analisis semacam itu tidak memerlukan beban serius pada prosesor dan memori firewall. <br><br><a name="L4"></a><h2>  L4 firewall </h2><br>  <b>L4 firewall</b> adalah firewall yang melewati lalu lintas melalui dirinya sendiri dan memeriksa tajuk protokol 4 tingkat: TCP, UDP, ICMP, yaitu, kriteria verifikasi utama untuk lalu lintas yang lewat adalah alamat IP dan port TCP / UDP atau layanan ICMP. <br><br>  Konsep inspeksi stateful juga muncul di firewall L4, di mana setiap permintaan yang lewat disimpan dan status permintaan disimpan untuk memungkinkan koneksi respon yang diperlukan.  Yaitu, konsep inisiator koneksi muncul, yang logis dalam jaringan yang dibangun pada teknologi client-server.  Firewall semacam itu menghabiskan memori untuk menyimpan data tentang setiap koneksi, yaitu, ada batasan jumlah maksimum sesi simultan yang tersimpan dalam memori.  Di firewall L4, Anda tidak perlu lagi menulis aturan respons untuk koneksi balik, seperti yang diperlukan di firewall L3, karena berdasarkan status koneksi, firewall secara otomatis memungkinkan koneksi balik.  Artinya, firewall L4 lebih nyaman daripada filter paket. <br><br>  Firewall L4 modern menyimpan keadaan tidak hanya dari TCP, UDP dan ICMP, tetapi juga melacak interaksi beberapa aplikasi L7.  Misalnya, status FTP, HTTP, SIP, dan aplikasi lain, yang sudah tergantung pada implementasi firewall yang spesifik.  Kita perlu bertanya pada produsen firewall L4 pertanyaan: aplikasi spesifik apa yang didukung oleh mesin firewall inspeksi yang sah? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fbb/493/449/fbb49344946f0e1ae8ecde30d879b35e.png"><br><br><a name="L7"></a><h2>  L7 firewall </h2><br>  <b>L7 firewall</b> adalah firewall yang melewati lalu lintas jaringan IP melalui dirinya sendiri dan memeriksa header level 4 dan segmen data dari setiap paket IP, yaitu, ia memahami lalu lintas level aplikasi L7, ke mana file ditransfer dan ke arah mana.  Karena lebih banyak data dianalisis, ada lebih banyak kriteria verifikasi dalam aturan firewall L7: nama pengguna, aplikasi, kategori URL, status perangkat lunak di komputer pengguna. <br><br>  Beban pada firewall L7 jauh lebih tinggi, karena prosesornya harus terus-menerus menganalisis megabita bidang data yang ditransmisikan oleh aplikasi, sedangkan firewall L4 hanya memeriksa beberapa byte header paket IP dengan alamat dan port sumber dan tujuan.  Ukuran buffer untuk menyimpan keadaan setiap aplikasi L7 membutuhkan lebih banyak, karena lebih banyak data ditransfer ke L7 daripada hanya di header TCP / IP.  Karena peningkatan ukuran buffer saat menggunakan analisis aplikasi, jumlah sesi yang disimpan secara bersamaan dalam memori L7 firewall kurang dari firewall L4 dengan jumlah memori yang sama.  Karena firewall L7 melihat konten apa jenis aplikasi yang melewati jaringan, nomor port tidak masuk akal dan aturan dapat ditulis dengan nama aplikasi L7.  Selain itu, aplikasi modern menghasilkan banyak koneksi dan semua koneksi ini adalah bagian dari satu aplikasi.  Jenis firewall ini memungkinkan Anda untuk mendapatkan kembali kendali atas aplikasi dinamis modern yang berjalan pada port apa pun, misalnya, pengamat tim, bittorent, tor, yang tidak diketahui oleh firewall L4.  Artinya, firewall L7 dalam realitas modern diperlukan jika jaringan membutuhkan keamanan. <br><blockquote>  Jika setelah membaca artikel ini Anda terus menggunakan firewall L4 maka ini berarti Anda tidak peduli dengan keamanan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9dd/ded/ecb/9dddedecb30376ea249d293db19a016d.png"><br></blockquote><br><a name="UTM"></a><h2>  UTM </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/ab9/466/fc5/ab9466fc51717a9788e0093244b6261d.png"><br><br>  <b>UTM</b> adalah perangkat jaringan yang memiliki beberapa komponen keamanan berbeda yang diinstal di dalamnya yang secara berurutan menganalisis lalu lintas yang melewati perangkat.  Inti dari UTM adalah firewall L4, sistem pencegahan serangan (IPS), antivirus, dan analisis kategori URL dalam HTTP dan HTTPS.  Seringkali, UTM masih menyediakan fungsi gateway VPN.  Semua komponen ini biasanya dikelola dari beberapa sistem kontrol yang berbeda.  Lalu lintas di dalam UTM melewati berurutan melalui modul pemfilteran dan outputnya adalah lalu lintas murni, yang diizinkan oleh kebijakan keamanan masing-masing modul.  UTM dapat digunakan sebagai platform untuk fungsi-fungsi lain: perlindungan virus, IPS, DDoS, QoS, DLP, filter DNS, basis data indikator Ancaman Intelijen, perlindungan phishing, dan sebagainya (tergantung pada pabrikan). <br><br><blockquote>  Perumpamaan tentang orang yang memesan tujuh topi dari satu kulit juga ditulis untuk pelanggan UTM: semakin banyak fungsi yang ingin Anda aktifkan setelah pembelian, semakin besar beban prosesor UTM untuk menganalisis jumlah lalu lintas yang sama.  Lebih banyak fitur - lebih sedikit kecepatan perangkat. </blockquote><br><br>  Gagasan UTM - memuat satu prosesor dengan sebanyak mungkin fungsi menjadi jalan buntu evolusi, karena jumlah fungsi bertambah dan prosesor tidak dapat menahan semua beban ini.  Hari ini, meskipun fitur yang dinyatakan baik, tidak ada yang menyertakan semua fungsi di UTM untuk menghilangkan penundaan lalu lintas. <br><blockquote>  Tujuan UTM: untuk mengimplementasikan sebanyak mungkin fungsi pada satu server untuk mengurangi biaya perangkat bagi pengguna. </blockquote>  Sekarang produsen UTM telah mulai menginstal mesin analisis aplikasi level 7 untuk mengatakan bahwa mereka adalah NGFW, yang membingungkan konsumen.  Namun, ini mudah dikenali jika Anda melihat kebijakan keamanan: aturan masih didasarkan pada kriteria untuk memeriksa bidang L4.  Dan untuk memfilter aplikasi L7, bagian pengaturan yang terpisah digunakan, yaitu, aplikasi L7 bukan merupakan kualifikasi, karena harus di firewall L7.  Mengenali aplikasi L7 dan menggunakan aplikasi L7 sebagai kriteria kebijakan keamanan adalah "dua perbedaan besar." <br><br><a name="NGFW"></a><h2>  NGFW </h2><br>  <b>NGFW</b> adalah perangkat jaringan di mana <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">firewall L7</a> diimplementasikan.  Karena kualifikasi utama menjadi nama aplikasi L7, aturan ditulis sesuai dengan kriteria baru.  Di NGFW, pemetaan dinamis dari alamat IP ke pengguna jaringan selalu berfungsi, sehingga nama pengguna juga menjadi kualifikasi (kriteria).  NGFW mencakup fungsi dekripsi SSL / TLS dan SSH untuk mengenali aplikasi dan serangan di dalamnya, IPS, antivirus, dan penyaringan URL. <br><br>  Istilah NGFW pertama kali diciptakan oleh perusahaan pemasaran Palo Alto Networks.  Tetapi secara bertahap berakar di pasar dan semua produsen UTM sekarang juga menyebut diri mereka NGFW.  Memang, NGFW juga melakukan beberapa fungsi secara bersamaan, mengapa NGFW bukan UTM?  Perbedaannya penting untuk diketahui.  Itu adalah bahwa dalam fungsi keamanan aplikasi NGFW (IPS, antivirus, penyaringan URL) dipercepat oleh perangkat keras.  Ada chip perangkat keras khusus: IPS memeriksa serangan pada chipnya, antivirus khas sendiri, dekripsi SSL sendiri, dan sebagainya.  Pemisahan fungsi antara prosesor yang berbeda memungkinkan untuk menjalankan fungsi pelindung secara paralel dan tidak menunggu fungsi sebelumnya selesai bekerja, seperti pada UTM.  Misalnya, hingga 60 diinstal di firewall perangkat keras Palo Alto Networks <br>  Kavium prosesor khusus yang mempercepat fungsi keamanan, jaringan dan manajemen.  Penting bahwa NGFW mengandung antarmuka perangkat lunak tunggal untuk mengelola semua fungsi secara bersamaan. <br><blockquote>  Gagasan NGFW, tidak seperti UTM, adalah untuk mengimplementasikan setiap fungsi pada prosesor terpisah, yang khusus untuk fungsionalitas yang diperlukan. </blockquote>  Pabrikan komputer dulunya mengikuti pola yang sama, dan mereka mengambil fungsi matematika dan grafik menjadi koprosesor matematika dan grafik yang terpisah.  Oleh karena itu, NGFW memiliki prosesor terpisah untuk mengenali aplikasi L7, untuk mendekripsi SSL / SSH, untuk memeriksa tanda tangan anti-virus, memeriksa tanda tangan IPS, dan sebagainya.  Ini memungkinkan Anda untuk mengaktifkan semua fungsi secara bersamaan, tanpa degradasi dan penundaan lalu lintas di perangkat selama pemindaian.  Mengapa tidak ada yang membeli komputer tanpa akselerator grafis dan membeli firewall tanpa akselerasi?  Karena akselerasi tidak diperlukan pada kecepatan rendah, tetapi ketika kecepatan analisis lalu lintas melampaui 1-5 Gigabit, sudah tidak mungkin untuk menerapkan semua fungsi keamanan tanpa akselerasi. <br><br>  Tujuan dari perangkat NGFW adalah untuk memungkinkan perusahaan bekerja dengan aman tanpa memperlambat lalu lintas.  Ini memungkinkan Anda untuk terus-menerus memeriksa bahwa aplikasi mengirimkan konten yang aman ke perusahaan yang Anda butuhkan, dan operasi paralel dari mesin perlindungan dengan satu aliran lalu lintas menjamin kinerja yang ditentukan dengan semua fitur keamanan dihidupkan dan juga meminimalkan penundaan lalu lintas. <br><br><a name="Ex"></a><h2>  Contohnya </h2><br><blockquote>  Contoh Kebijakan L7 di Palo Alto Networks NGFW <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/433/201/c3d433201745dec7e570b6fe82769f2b.png"></blockquote>  Mengapa Anda memerlukan kategori URL sebagai kualifikasi?  Misalnya, Anda dapat mengizinkan beberapa karyawan tetap mengunjungi situs jahat dengan peramban, tetapi memblokir unduhan file untuk mereka. <br><blockquote>  Contohnya kebijakan Palo Alto Networks menggunakan pemeriksaan Profil Informasi Host dan URL kategori. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/957/d22/0a0/957d220a05d44f91fef65d4cebf76b89.png"></blockquote>  Kebijakan ini juga melibatkan pemeriksaan untuk perlindungan host TRAPS di kolom Profil HIP, yang akan mencegah pengguna memasuki situs dengan kode berbahaya dan eksploitasi, tanpa perlindungan yang diinstal pada komputer.  TRAPS adalah agen perlindungan anti-malware dan eksploitasi. <br><br>  Pengunduhan file diblokir dalam pengaturan kolom Profil, di mana profil untuk memblokir transfer semua file untuk aplikasi apa pun diterapkan.  Begini tampilannya: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/480/87e/6e2/48087e6e2f973ee821ef6240828dfd6a.png"><br><br><a name="Proxy"></a><h2>  Server proxy </h2><br>  <b>Server proxy</b> adalah perangkat yang menghentikan lalu lintas aplikasi dengan sendirinya, memeriksa lalu lintas ini menggunakan berbagai metode dan mengirimkan lalu lintas ini lebih lanjut.  Paling sering digunakan dalam jaringan proxy untuk HTTP dan HTTPS.  Karena UTM dan NGFW menganalisis aliran HTTP dan HTTPS secara transparan, tanpa memerlukan pengaturan server proxy eksplisit dari klien, proxy HTTP secara bertahap menghilang dari perusahaan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf2/e91/3eb/bf2e913eb4c39a379ff76818a6173b6d.png"><br><br><a name="USER-ID"></a><h2>  Apa itu USER-ID </h2><br>  NGFW menemukan mekanisme untuk mengidentifikasi pengguna.  Algoritme bekerja secara internal atau berjalan pada agen eksternal.  Saya akan menyebutnya mekanisme USER-ID.  USER-ID membuat dan mengelola tabel pemetaan untuk nama pengguna dan alamat IP saat ini.  Itu juga terjadi bahwa dalam tabel ada nilai dan port untuk pengguna yang diberikan, jika pengguna bekerja melalui VDI (yaitu, pengguna berasal dari alamat yang sama dan hanya dapat dibedakan berdasarkan port). <br><img src="https://habrastorage.org/getpro/habr/post_images/37d/0cc/99b/37d0cc99baa26dc2597b17e7ae9ed7a4.png" alt="gambar"><br>  Saya akan mencantumkan mekanisme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">USER-ID</a> di Palo Alto Networks <br><ol><li>  <b>Pemantauan server</b> : Agen ID Pengguna membaca peristiwa dari Exchange Server, pengontrol domain, atau server Novell eDirectory </li><li>  <b>Penyelidikan klien</b> : Agen ID Pengguna melakukan jajak pendapat klien Windows melalui WMI </li><li>  <b>Agen layanan terminal</b> : <b>Agen</b> TS mendistribusikan ke berbagai pengguna berbagai rentang port TCP / UDP untuk bekerja dengan Server Terminal Windows / Citrix </li><li>  Penguraian pesan <b>Syslog</b> : Agen-ID pengguna membaca pesan otentikasi syslog dari berbagai sistem, pengontrol nirkabel, perangkat 802.1x, server Direktori Terbuka Apple, server proxy, gateway VPN, Cisco ISE </li><li>  Otentikasi melalui Klien <b>GlobalProtect</b> : VPN + nama pengguna dan kata sandi dapat ditambahkan ke MFA </li><li>  Otentikasi melalui <b>Captive Portal</b> : Lalu lintas web diautentikasi oleh bentuk web NTLM atau AAA (Captive Portal digunakan di metro dan kafe Moskow. NTLM memungkinkan Anda membuat otentikasi transparan) </li><li>  <b>XML API</b> : informasi tentang masuk dan keluar ditransmisikan oleh agen User-ID dengan perintah khusus melalui firewall REST API </li><li>  <b>X-Forwarded-For</b> : proxy mengisi bidang ini dalam permintaan HTTP sehingga jelas siapa yang bersembunyi di belakang proxy </li></ol><br>  Membaca log dari pengontrol Active Directory adalah fitur yang paling umum digunakan di USER-ID.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agen USER-ID secara berkala membaca pesan dari log AD, di mana dicatat pengguna mana dari alamat IP mana ia login, itu adalah dari mereka bahwa USER-ID menemukan alamat apa yang digunakan pengguna dan menyimpannya di dalam NGFW, misalnya, untuk Windows 2008/2012 ini adalah pesan: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 4768 - Pemberian Tiket Otentikasi </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 4769 - Pemberian Tiket Layanan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 4770 - Pemberian Tiket yang Diperbaharui </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 4264 - Keberhasilan Logon </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agen USER-ID memerlukan akses dengan hak istimewa Pembaca Log Keluar untuk membaca log.</font></font><br><br><a name="Stateful"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kesalahpahaman tentang Stateful Inspection </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya harus mencurahkan bab terpisah untuk konsep suci ini untuk setiap insinyur jaringan dan insinyur keamanan. </font><font style="vertical-align: inherit;">Penting untuk menekankan dan melengkapi hal-hal penting yang sering terlewatkan pada kursus tentang firewall. </font><font style="vertical-align: inherit;">Jika Anda telah mempelajari dasar-dasar inspeksi yang sah, maka kemungkinan besar Anda memiliki beberapa kesalahpahaman. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada satu kesalahpahaman</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang terkadang saya lihat di antara rekan kerja.</font></font> Perhatian!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspeksi stateful bukan hanya tentang status koneksi TCP, UDP, atau ICMP! </font><font style="vertical-align: inherit;">Ini juga tentang keadaan protokol dan aplikasi lain yang lebih kompleks: FTP, SIP, RPC, SMTP, SMB, dan seterusnya!</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah contoh </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FTP adalah protokol lapisan aplikasi. </font><font style="vertical-align: inherit;">Dan ia memiliki perintah PORT yang dapat menetapkan koneksi TCP baru. </font><font style="vertical-align: inherit;">Setiap firewall yang memposisikan dirinya sebagai firewall inspeksi stateful harus memantau perintah FTP dan melihat perintah PORT dan memungkinkan koneksi ke port dan alamat yang diminta di sana. </font><font style="vertical-align: inherit;">Dan ini belum semuanya: firewall juga harus mengganti parameter dari perintah PORT dan memasukkan alamat yang benar jika server FTP berfungsi untuk NAT.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, di setiap firewall L4 modern ada komponen yang memata-matai tingkat L7. </font><font style="vertical-align: inherit;">Dan ada lebih dari satu protokol semacam itu: masih ada HTTP, RPC, dan lainnya ... Dan penganalisa protokol lapisan 7 semacam itu disebut Application Layer Gateway (ALG).</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah contoh </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang paling "favorit" pada saat yang sama untuk penggiat jejaring dan petugas keamanan adalah ALG untuk SIP, yang dengannya banyak yang mengkonfigurasi SIP ALG pada firewall L4 muak dengan masalah, dan seringkali berakhir dengan memutuskannya.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, sudah di firewall L4 ada awal dari analisis protokol level 7. </font><font style="vertical-align: inherit;">Firewall L4 berbeda satu sama lain dalam jumlah ALG yang diterapkan. </font><font style="vertical-align: inherit;">Ketika Anda membandingkan firewall L4 konvensional, pertanyaan yang wajar untuk insinyur sistem pabrikan adalah: berapa banyak protokol dan aplikasi yang didukung oleh mesin Stateful Inspection Anda? </font><font style="vertical-align: inherit;">Sebagai aturan, tidak ada yang menjawab.</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ternyata firewall L7 juga merupakan firewall inspeksi stateful, tetapi yang menganalisis dan menyimpan status SEMUA aplikasi, dan tidak hanya selektif, seperti firewall L4. </font></font></blockquote><br><br><a name="Sessions"></a> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahpahaman kedua</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dibuat oleh produsen firewall itu sendiri. Ambil lembar data apa pun tempat pabrikan menulis parameter seperti "jumlah sesi bersamaan." Pertanyaan kepada produsen adalah sebagai berikut: protokol dan sesi aplikasi mana yang diukur dan setidaknya menyatakan stateful untuk TCP diaktifkan, belum lagi apakah ada pemeriksaan untuk tingkat L7?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kita tahu bahwa setiap protokol atau aplikasi memiliki keadaan yang diingat firewall. Dan untuk menyimpan keadaan ini, Anda perlu mengalokasikan buffer dalam memori perangkat. Bahkan, parameter "jumlah sesi simultan" berarti berapa banyak buffer untuk menyimpan status dapat ditampung dalam memori perangkat. Anda perlu memahami bahwa untuk firewall L4, parameter ini paling sering diukur untuk bare TCP atau bahkan UDP. Artinya, TCP membutuhkan buffer di mana hanya IP dan port koneksi yang sesuai. Namun, dalam pengujian untuk aplikasi L7, misalnya, HTTP, buffer ini akan jauh lebih besar, karena misalnya, menyimpan parameter permintaan GET di dalam HTTP memerlukan lebih banyak memori. Dan ingatannya bukan karet. Dengan demikian, jika pabrikan menulis parameter seperti “jumlah sesi simultan”, maka ia harus menulis:</font></font><br><ul><li>         /, c  stateful inspection, </li><li>     L4,      TCP/IP, </li><li>   -  L7    . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengukur firewall L7 dengan benar pada jumlah sesi HTTP simultan, pada paket dengan panjang berbeda: 64Kb, 44Kb, 16Kb, 1.5Kb. Jelas bahwa jika oleh beberapa pabrikan semua pengukuran dilakukan pada UDP 1518 byte, maka kemungkinan besar perangkat semacam itu tidak akan berfungsi di jaringan Anda, karena itu tidak akan bekerja untuk memaksa pengguna Anda untuk mengirim hanya paket UDP yang panjangnya 1518 byte, dan bahkan lebih memaksa mereka untuk merespons dengan demikian Paket server HTTP Penting untuk memberi tahu pabrikan sedemikian rupa sehingga kinerja firewall L7 perlu diukur setidaknya pada lalu lintas dengan protokol HTTP. Dari perusahaan-perusahaan terkenal yang melakukan tes seperti itu di depan umum: NSS Labs. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pabrikan Firewall sendiri melakukan pengujian khusus di laboratorium mereka, yang dapat memesan profil lalu lintas mereka, misalnya: 30% lalu lintas HTTPS, 10% lalu lintas SMB, 10% lalu lintas FTP, dan sebagainya.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah contoh </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah memeriksa perangkat dari salah satu produsen UTM pada penghasil traffic IXIA:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam mode L4 firewall - 4.000.000 sesi simultan, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam mode firewall L7 - 200.000 sesi bersamaan. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ini merupakan indikasi bahwa ada lebih sedikit buffer untuk sesi L7 dalam memori perangkat karena ukurannya yang besar. </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan, omong-omong, itu juga akan dengan kinerja keseluruhan perangkat: dengan cek konten aplikasi dimatikan, firewall bekerja 10 kali lebih cepat daripada dengan yang dihidupkan. </font><font style="vertical-align: inherit;">Dimungkinkan untuk hanya menggunakan analisis level 4 header untuk mempercepat perangkat, tetapi tidak ada keamanan lagi.</font></font><br><br><a name="Cluster"></a> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Poin penting ketiga</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Bekerja dalam sebuah cluster. Semua firewall harus bekerja dalam satu cluster, karena jika satu firewall berhenti berfungsi, maka tugasnya adalah untuk "berbaring" dan memblokir semua lalu lintas - ini adalah teori perlindungan bangunan berdasarkan firewall. Sementara firewall "rusak" memblokir lalu lintas, firewall tetangga harus mengambil tugas untuk melintas lalu lintas yang sah. Tapi bagaimana dengan koneksi yang melewati dulu? Kemungkinan besar, firewall pertama meneruskan status semua koneksi ke yang kedua, tetapi apakah itu hanya meneruskan status header IP ke tetangga atau status penuh dari semua aplikasi tingkat L7: tetapi ada beberapa koneksi SSL yang didekripsi dan IPS dan antivirus bekerja pada mereka - mereka mengumpulkan paket dalam buffer untuk memeriksa isinya. Dan di sini ternyata firewall L4 dan L7 juga berbeda:status transmisi L4 tidak sama dengan status transmisi L7. Ini juga penting untuk dipahami.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada kesalahpahaman lain</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bahwa firewall L7 dapat beroperasi dalam kelompok lebih dari dua perangkat - ini tidak benar, karena jumlah data L7 yang ditransmisikan tumbuh secara eksponensial dengan setiap node baru dalam cluster dan pemrosesan data bahkan dua tetangga melebihi biaya pemrosesan data perangkatnya sendiri. Itulah mengapa cluster lebih dari dua perangkat hanya bekerja dengan bertukar header L4, dan ketika berpindah cluster, semua analisis aplikasi dan fungsi perlindungan dihidupkan ulang.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oleh karena itu, Anda harus secara kompeten membandingkan firewall L4 dan L7, sama seperti ketika Anda membandingkan apakah mobil dan tank cocok untuk Anda dalam perang. </font><font style="vertical-align: inherit;">Untuk meningkatkan keamanan jaringan Anda, firewall L7 melakukan pekerjaan yang lebih kompleks, lebih banyak pekerjaan yang dilakukan pada prosesornya dan membutuhkan lebih banyak memori untuk menyimpan keadaan aplikasi Anda! </font><font style="vertical-align: inherit;">Semua ini perlu dilakukan untuk keamanan. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 2. Dampak Keamanan dari L7 Firewall</font></font></a> <br><a name="Opros"></a></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id436392/">https://habr.com/ru/post/id436392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id436376/index.html">Sekilas tentang robot semua medan EZ-Robot Roli Rover</a></li>
<li><a href="../id436378/index.html">bobaos.pub - KNX TP / UART, Raspberry Pi dan Redis</a></li>
<li><a href="../id436380/index.html">Mulai cepat dalam pencetakan 3D: printer anggaran untuk pemula atau teknologi untuk massa</a></li>
<li><a href="../id436382/index.html">Antiquities: evolusi laptop sepuluh tahun menggunakan ThinkPad X301</a></li>
<li><a href="../id436390/index.html">Kami membuat UITableView. Untuk pemula</a></li>
<li><a href="../id436394/index.html">Demis Hassabis - kecerdasan hebat yang menciptakan kecerdasan hebat</a></li>
<li><a href="../id436396/index.html">Bisakah saya menggunakan pemrograman fungsional dalam bahasa saya?</a></li>
<li><a href="../id436398/index.html">Air</a></li>
<li><a href="../id436400/index.html">Konfigurasikan lingkungan pengembangan untuk mempelajari HTML, CSS, PHP di Windows</a></li>
<li><a href="../id436404/index.html">Penyeimbangan lalu lintas VoIP yang toleran. Memuat peralihan antar pusat data pada waktu puncak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>