<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚾️ 🤜🏻 🌽 Aplikasi untuk kerangka kerja untuk bot multi-platform 👽 👩🏽‍🔬 🕺🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chatbots memasuki kehidupan informasi kami dengan ketat, semua jaringan sosial yang menghargai diri sendiri dan para pengirim pesan memiliki dukungan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplikasi untuk kerangka kerja untuk bot multi-platform</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422081/"><img src="https://habrastorage.org/getpro/habr/post_images/10c/297/311/10c2973112bf3e696147b9c86d6d333e.jpg" alt="gambar"><br><br>  Chatbots memasuki kehidupan informasi kami dengan ketat, semua jaringan sosial yang menghargai diri sendiri dan para pengirim pesan memiliki dukungan untuk bot, mereka menyediakan API yang nyaman untuk pengembangan dan penggunaannya, semua untuk kenyamanan pengguna dan pemrogram.  Sekarang, untuk membuat bot di Telegram bahkan tidak perlu tahu bahasa pemrograman apa pun.  Ada layanan yang memungkinkan Anda mendesain bot menggunakan antarmuka web.  Dan ini benar-benar bagus, tetapi baru-baru ini saya mengalami masalah dan terkejut bahwa pada gelombang popularitas chatbot ini, yang sekarang bukan hanya fitur keren, tetapi juga alat penghasil pendapatan - praktis tidak ada jawaban. <br><br>  Dan pertanyaannya adalah: bagaimana jika saya ingin membuat lebih dari satu bot untuk satu layanan?  Misalnya, saya tahu bahwa CA duduk di Vkontakte dan Telegram, bagaimana saya bisa menulis bot dengan sedikit usaha untuk bekerja dengan orang-orang di sana dan di sana?  Jika tiba-tiba (misalnya, sebagai pemilik toko online) saya juga ingin bekerja dengan audiens di Facebook menggunakan bot, apakah saya benar-benar perlu mengembangkan bot baru dari awal dan menulis ulang semua logika untuknya atau mencoba menggali API atau perpustakaan baru.  Dan saya mencoba menemukan jawabannya di bawah potongan, saya bertanya ke meja. <br><a name="habracut"></a><br>  Sebenarnya, ada solusi, dan ada banyak, tetapi semuanya bermuara pada kenyataan bahwa Anda harus meng-host bot Anda dengan layanan yang juga menyediakan platform.  Dengan demikian, Anda tidak bisa mendapatkan solusi kotak.  Mungkin saya salah dan tidak sepenuhnya mempelajari apa yang sebenarnya ada, tetapi fakta bahwa tautan pertama di Google tidak mengarah ke solusi sudah mengkhawatirkan.  Ada juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Botman</a> .  Ini adalah pustaka open source yang benar-benar kuat dengan sekelompok chip dan dokumentasi yang komprehensif.  Dan itu ditulis dalam <i>PHP.</i>  Saya tidak menentang <i>PHP</i> , dalam hal apa pun saya tidak mengakuinya secara publik agar tidak membiakkan holivar yang tidak perlu, tetapi saya tidak merasa ingin mengembangkannya.  Saya memutuskan untuk mencari sesuatu yang mirip dengan Python, selain Python, ada banyak perpustakaan yang memungkinkan Anda untuk bekerja dengan API Bot Telegram.  Dan saya tidak menemukan apa-apa, jadi saya segera menyimpulkan bahwa itu layak untuk ditulis sendiri.  <i>(Mungkin seseorang tahu solusi yang cocok untuk bot multi-platform dengan sistem terbuka, saya akan senang dengan informasi apa pun)</i> <br><br>  Di sini, omong-omong, masalah lain adalah pembuatan bir.  Saya sama sekali tidak tahu di mana lagi Anda dapat berbagi pekerjaan dengan audiens dalam bentuk artikel selain dari Habré.  Saya akan sangat senang membantu dalam hal ini. <br><br>  Nama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Botovod</a> datang dengan sendirinya. <br><br>  Secara umum, saya akan memberikan kode kecil menggunakan Botovod dan menjelaskannya secara singkat. <br><div class="spoiler">  <b class="spoiler_title">Judul spoiler</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> botovod <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Botovod, Message, utils @utils.convert_to_text <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler_message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(agent, chat, text)</span></span></span><span class="hljs-function">:</span></span> message = Message() message.text = <span class="hljs-string"><span class="hljs-string">"  "</span></span> agent.send_message(chat, message) @utils.convert_to_images <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler_images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(agent, chat, images)</span></span></span><span class="hljs-function">:</span></span> message = Message() message.text = <span class="hljs-string"><span class="hljs-string">"  "</span></span> agent.send_message(chat, message) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler_echo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(agent, chat, message)</span></span></span><span class="hljs-function">:</span></span> agent.send_message(chat, message) settings = [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"telegram"</span></span>, <span class="hljs-string"><span class="hljs-string">"agent"</span></span>: <span class="hljs-string"><span class="hljs-string">"botovod.agents.telegram"</span></span>, <span class="hljs-string"><span class="hljs-string">"settings"</span></span>: {<span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"462755273:AzBZBQ7AAnqFEXqZ_P8Z-qvCddmjqTVAYPI"</span></span>, <span class="hljs-string"><span class="hljs-string">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"polling"</span></span>} }, ] botovod = Botovod(settings) botovod.add_handler(handler_message) botovod.add_handler(handler_images) botovod.add_handler(handler_echo) botovod.start()</code> </pre> <br></div></div><br><br>  Di sini kita mendefinisikan 3 penangan untuk pesan masuk, masing-masing mengirim sesuatu sebagai tanggapan.  Yang pertama: "Saya menerima pesan," yang kedua: "Saya melihat foto," yang ketiga hanya akan mengirim kembali apa yang saya terima.  Kemudian kami membuat bot manager (Botovod) dan memberikannya pengaturan untuk bot, di bot ini untuk bot di Telegram.  Selanjutnya, kami secara berurutan menambahkan penangan pesan.  Jika pesan tiba di bot, itu akan pergi ke penangan pertama yang setuju untuk menerimanya.  Misalnya, jika audio dikirim kepada kami, maka penangan pertama akan mencoba menerimanya terlebih dahulu, tetapi menolak, karena ini bukan teks.  Kemudian dia akan menerima yang kedua, tetapi juga menolak, karena ini bukan gambar, maka dia akan menerima yang ketiga, yang tidak memiliki batasan - dengan cara ini akan meneruskan audio orto  Kendala dikenakan sebagai dekorator dari modul utils. <br><br>  Sekarang saya akan mencoba untuk mengatakan secara detail apa itu: <br><br>  Ada manajer bot - objek dari kelas Botovod - nama bot (masing-masing memiliki yang unik), kelas agen yang akan memprosesnya dan pengaturan untuk bot diteruskan ke dalam konstruktor.  Handler juga ditambahkan ke manajer bot secara bergantian.  Jika sebuah pesan tiba di bot, manajer akan memeriksa mereka pada gilirannya sampai ia menemukan pawang yang melempar pengecualian NotPassed.  Penangan pertama yang ditambahkan diperiksa pertama, terakhir, masing-masing, terakhir.  Jika Anda bermaksud menggunakan webhooks, maka manajer bot dapat terhubung ke server web.  Untuk melakukan ini, manajer bot memiliki metode mendengarkan yang menerima nama bot, header, dan badan permintaan.  Kemudian mengirimkan data ini ke parser agen, yang mengembalikan pesan yang dihasilkan, setelah pesan ini didorong melalui penangan.  Sebagai tanggapan, metode mendengarkan mengembalikan kamus {"status": any_code, "header": dict (), "body": "any_text"}, di mana dalam header adalah header respons, dan di dalam tubuh adalah tubuh respons.  Terkadang messenger / jejaring sosial mengharuskan server untuk mengembalikan objek, jadi saya pikir perilaku ini nyaman. <br><br>  Saya akan memberikan contoh untuk Vkontakte bot dengan nama "vk-bot", dan Botovod akan terhubung ke server Django <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> response = manager.listen(<span class="hljs-string"><span class="hljs-string">"vk-bot"</span></span>, request.headers, request.text) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HttpResponse(status = response[<span class="hljs-string"><span class="hljs-string">"status"</span></span>], headers = response[<span class="hljs-string"><span class="hljs-string">"headers"</span></span>], response[<span class="hljs-string"><span class="hljs-string">"body"</span></span>])</code> </pre><br><br>  Pesan yang terbentuk adalah objek dari kelas Pesan.  Ini mencakup bidang-bidang berikut: teks - teks pesan;  gambar - daftar dengan gambar;  audio - daftar dengan file suara;  video - daftar video;  dokumen - daftar dengan dokumen;  lokasi - daftar dengan tempat di peta;  raw - badan pesan mentah atau informasi tambahan untuk itu (kamus). <br><br>  Juga, setiap daftar objek Pesan (gambar, audio, video, dokumen) berisi objek khusus yang kelasnya diwarisi dari Lampiran.  Kelas lampiran secara default memiliki metode url dan file_path di mana parser agen biasanya menaruh informasi tentang file yang diterima.  Daftar lokasi berisi objek Lokasi, ke konstruktor yang Anda harus melewati garis bujur dan garis lintang (garis bujur dan garis lintang). <br><br>  Di bawah ini adalah contoh membangun pesan dalam penangan <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(agent, chat, message)</span></span></span><span class="hljs-function">:</span></span> out = botovod.Message() image = botovod.Image() image.file_path = <span class="hljs-string"><span class="hljs-string">"/tmp/1.png"</span></span> location = botovod.Location() out.images.append(image) out.text = <span class="hljs-string"><span class="hljs-string">" ,   "</span></span> agent.send_message(chat, out)</code> </pre><br><br>  Ini semua yang ada di dalamnya untuk saat ini, tetapi saya berharap seseorang akan tertarik pada solusi seperti itu dan seseorang akan ingin membantu dengan saran, komentar, ide, dan mungkin partisipasi mereka sendiri dalam pengembangan.  Terima kasih sudah membaca! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan Github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422081/">https://habr.com/ru/post/id422081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422069/index.html">PHP Digest No. 138 (20 Agustus - 2 September 2018)</a></li>
<li><a href="../id422071/index.html">Cukup untuk semua orang, atau bagaimana menyampaikan Internet ke negara-negara berkembang</a></li>
<li><a href="../id422073/index.html">Cara termudah untuk mendukung pengintegrasian klien java dengan server java</a></li>
<li><a href="../id422077/index.html">Apakah injeksi JavaScript relevan?</a></li>
<li><a href="../id422079/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 329 (27 Agustus - 2 September 2018)</a></li>
<li><a href="../id422083/index.html">Situs satu halaman di Kotlin dan SpringBoot tanpa menggunakan JSP</a></li>
<li><a href="../id422085/index.html">Sortir berdasarkan pilihan</a></li>
<li><a href="../id422087/index.html">Visi komputer dalam industri. Kuliah di Yandex</a></li>
<li><a href="../id422089/index.html">Konteks eksekusi JavaScript dan tumpukan panggilan</a></li>
<li><a href="../id422091/index.html">Penggunaan metode array yang efektif dalam JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>