<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍⚖️ 👨‍👨‍👧 ♠️ Manuel Node.js, partie 5: npm et npx 👽 🍨 👩🏼‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, dans la cinquième partie de la traduction du manuel Node.js, nous terminerons l'analyse des fonctionnalités de npm, en particulier, nous ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manuel Node.js, partie 5: npm et npx</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423705/">  Aujourd'hui, dans la cinquième partie de la traduction du manuel Node.js, nous terminerons l'analyse des fonctionnalités de npm, en particulier, nous aborderons des questions telles que la recherche des versions installées des packages npm, l'installation des anciennes versions des packages, la mise à jour des dépendances, la désinstallation locale et globale des packages.  Ici, nous parlons de npx. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">[Nous vous conseillons de lire] Autres parties du cycle</b> <div class="spoiler_text">  Partie 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Informations générales et mise en route</a> <br>  Partie 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript, V8, quelques astuces de développement</a> <br>  Partie 3: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hébergement, REPL, travailler avec la console, les modules</a> <br>  Partie 4: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fichiers npm, package.json et package-lock.json</a> <br>  Partie 5: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npm et npx</a> <br>  Partie 6: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">boucle d'événements, pile d'appels, temporisateurs</a> <br>  Partie 7: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programmation asynchrone</a> <br>  Partie 8: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide Node.js, Partie 8: Protocoles HTTP et WebSocket</a> <br>  Partie 9: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide Node.js, partie 9: utilisation du système de fichiers</a> <br>  Partie 10: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide Node.js, Partie 10: Modules standard, flux, bases de données, NODE_ENV</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PDF complet du guide Node.js</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Recherche des versions des packages npm installés</font> </h2><br>  Afin de découvrir les versions de tous les packages npm installés dans le dossier du projet, y compris leurs dépendances, exécutez la commande suivante: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list</code> </pre> <br>  Par conséquent, par exemple, les résultats suivants peuvent se produire: <br><br><pre> <code class="hljs mel">&gt; npm list /Users/flavio/dev/node/cowsay └─┬ cowsay@1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├── get-stdin@5<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├─┬ optimist@0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── minimist@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> │ └── wordwrap@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> ├─┬ <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>-width@2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── is-fullwidth-code-point@2<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │ └─┬ <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-ansi@4<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │  └── ansi-regex@3<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> └── <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-eof@1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Vous pouvez découvrir la même chose en consultant le <code>package-lock.json</code> projet, mais l'arborescence que la commande ci-dessus affiche est plus pratique à afficher. <br><br>  Afin d'obtenir une liste similaire de packages installés globalement, vous pouvez utiliser la commande suivante: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list -g</code> </pre> <br>  Vous pouvez afficher uniquement les informations sur les packages de niveau supérieur locaux (c'est-à-dire ceux que vous avez installés vous-même et répertoriés dans <code>package.json</code> ) comme suit: <br><br><pre> <code class="hljs pgsql">npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0</span></span></code> </pre> <br>  Par conséquent, si, par exemple, vous avez installé uniquement le package cowsay, les éléments suivants s'affichent: <br><br><pre> <code class="hljs pgsql">&gt; npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0 /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br>  Pour connaître la version d'un package spécifique, utilisez la commande suivante: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list cowsay</code> </pre> <br>  À la suite de sa mise en œuvre, nous obtenons environ les éléments suivants: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; npm list cowsay /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br>  Cette commande convient également pour trouver les versions de dépendance des packages que vous avez installés.  Dans ce cas, le nom du package de dépendances agit comme le nom du package qui lui a été transmis, et la sortie de la commande ressemblera à ceci: <br><br><pre> <code class="hljs perl">&gt; npm list minimist /Users/flavio/dev/node/cowsay └─┬ cowsay@1.<span class="hljs-number"><span class="hljs-number">3.1</span></span> └─┬ optimist@0.<span class="hljs-number"><span class="hljs-number">6.1</span></span>   └── minimist@0.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br>  Une entrée sur le package de dépendance dans cette structure sera mise en évidence. <br><br>  Si vous voulez savoir quel est le numéro de la dernière version d'un package disponible dans le référentiel npm, vous aurez besoin d'une commande du formulaire suivant: <br><br><pre> <code class="hljs pgsql">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> [package_name] <span class="hljs-keyword"><span class="hljs-keyword">version</span></span></code> </pre> <br>  En réponse, elle émet le numéro de version du package: <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">1.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Installation des anciennes versions des packages npm</font> </h2><br>  L'installation d'une ancienne version du package npm peut être nécessaire pour résoudre les problèmes de compatibilité.  Vous pouvez installer la version requise du package à partir de npm en utilisant la construction suivante: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt;@&lt;<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>&gt;</code> </pre> <br>  Dans le cas du package cowsay que nous utilisons comme exemple, la <code>install cowsay</code> npm <code>install cowsay</code> installera sa dernière version (1.3.1 au moment de la rédaction de ce document).  Si vous devez installer sa version 1.2.0, utilisez cette commande: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cowsay</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">1</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">2</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">0</span></span></code> </pre> <br>  Vous pouvez spécifier des versions en installant des packages globaux: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-g</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">webpack</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">4</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">16</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">4</span></span></code> </pre> <br>  Si vous avez besoin de savoir quelles versions d'un package sont disponibles dans npm, vous pouvez le faire à l'aide de cette construction: <br><br><pre> <code class="hljs vhdl">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt; versions</code> </pre> <br>  Voici un exemple du résultat de son travail: <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay versions [ <span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.4'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.5'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.6'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.7'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.8'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.9'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.1'</span></span> ]</code> </pre> <br><h2>  <font color="#3AC1EF">Mise à jour des dépendances du projet vers leurs dernières versions</font> </h2><br>  Lorsque vous installez un package avec une commande de type <code>npm install &lt;packagename&gt;</code> , la dernière version est téléchargée à partir du référentiel et placée dans le dossier <code>node_modules</code> .  Dans ce cas, les entrées correspondantes sont ajoutées aux <code>package-lock.json</code> <code>package.json</code> et <code>package-lock.json</code> situés dans le dossier du projet. <br><br>  De plus, en installant un package, npm recherche et installe ses dépendances. <br><br>  Supposons que nous installions le package cowsay familier en exécutant la <code>npm install cowsay</code> .  Le package sera installé dans le dossier <code>node_modules</code> du projet et l'entrée suivante se trouvera dans le fichier <code>package.json</code> : <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.3.1"</span></span> } }</code> </pre> <br>  <code>package-lock.json</code> contiendra également des informations sur ce package.  En voici un fragment: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lockfileVersion"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.3.1"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"resolved"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"integrity"</span></span>: <span class="hljs-string"><span class="hljs-string">"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ=="</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">"get-stdin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.0.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"optimist"</span></span>: <span class="hljs-string"><span class="hljs-string">"~0.6.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"string-width"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.1.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"strip-eof"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.0"</span></span>     }   } } }</code> </pre> <br>  À partir de ces deux fichiers, vous pouvez découvrir que nous avons installé la version 1.3.1 de cowsay et que la règle de mise à jour du package est spécifiée comme <code>^1.3.1</code> .  Dans la quatrième partie de cette série de matériaux, nous avons déjà parlé des règles du versioning sémantique.  Rappelez-vous que cette entrée signifie que npm peut mettre à jour le package lorsque ses versions mineures et correctives sont publiées. <br><br>  Si, par exemple, une nouvelle version mineure d'un package sort et que nous <code>npm update</code> commande <code>npm update</code> , la version installée du package est mise à jour et les informations sur le package installé sont mises à jour dans le fichier <code>package-lock.json</code> et le fichier <code>package.json</code> reste inchangé. <br><br>  Afin de savoir si de nouvelles versions des packages utilisés dans le projet ont été publiées, vous pouvez utiliser la commande suivante: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> outdated</code> </pre> <br>  Voici les résultats de cette commande pour un projet dont les dépendances n'ont pas été mises à jour depuis longtemps: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a65/820/68f/a6582068f2d230e7f7699324aeefff84.png"></div><br>  <i><font color="#999999">Analyse des dépendances de projet obsolètes</font></i> <br><br>  Certaines des mises à jour de packages disponibles sont leurs versions principales, dont les mises à jour ne se produiront pas lorsque la commande <code>npm update</code> sera exécutée.  La mise à niveau vers les versions majeures par cette équipe n'est pas effectuée, car ils (par définition) peuvent contenir des modifications majeures qui ne se distinguent pas par une compatibilité descendante avec les versions majeures précédentes, et npm cherche à éviter au développeur des problèmes pouvant entraîner l'utilisation de ces packages. <br><br>  Afin de passer à de nouvelles versions majeures de tous les packages utilisés, installez globalement le package <code>npm-check-updates</code> : <br><br><pre> <code class="hljs powershell">npm install <span class="hljs-literal"><span class="hljs-literal">-g</span></span> npm<span class="hljs-literal"><span class="hljs-literal">-check</span></span><span class="hljs-literal"><span class="hljs-literal">-updates</span></span></code> </pre> <br>  Exécutez ensuite l'utilitaire fourni par lui: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ncu</span></span> -u</code> </pre> <br>  Cette commande mettra à jour le fichier <code>package.json</code> , apportant des modifications aux instructions pour les versions de package appropriées dans les <code>devDependencies</code> <code>dependencies</code> et <code>devDependencies</code> .  Cela permettra à npm de mettre à jour les packages utilisés dans le projet vers de nouvelles versions majeures après avoir exécuté la commande <code>npm update</code> . <br><br>  Si vous souhaitez installer les dernières versions de package pour le projet que vous venez de télécharger, qui n'a pas encore le dossier <code>node_modules</code> , puis, au lieu de la <code>npm update</code> , exécutez la commande <code>npm install</code> . <br><br><h2>  <font color="#3AC1EF">Désinstallation locale ou globale des packages</font> </h2><br>  Pour désinstaller un package précédemment installé localement (à l'aide de la commande <code>install &lt;package-name&gt;</code> ), exécutez une commande qui ressemble à ceci: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>&gt;</code> </pre> <br>  Si le package est installé globalement, vous devrez utiliser l' <code>(--global</code> <code>-g</code> <code>(--global</code> ) pour le supprimer.  Par exemple, une commande similaire pourrait ressembler à ceci: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> -g webpack</code> </pre> <br>  Lors de l'exécution d'une telle commande, le dossier actuel n'a pas d'importance. <br><br><h2>  <font color="#3AC1EF">A propos du choix entre l'installation globale et locale des packages</font> </h2><br>  Quand et pourquoi les packages sont-ils mieux installés à l'échelle mondiale?  Afin de répondre à cette question, rappelons en quoi l'installation locale et globale des packages diffère: <br><br><ul><li>  Les packages locaux sont installés dans le répertoire dans lequel ils exécutent une commande de la forme <code>npm install &lt;package-name&gt;</code> .  Ces packages se trouvent dans le dossier <code>node_modules</code> situé dans ce répertoire. </li><li>  Les packages globaux sont installés dans un dossier spécial (dont l'un dépend des paramètres spécifiques de votre système), quel que soit l'endroit où ils exécutent une commande de la forme <code>npm install -g &lt;package-name&gt;</code> . </li></ul><br>  La connexion des packages locaux et globaux dans le code est la même: <br><br><pre> <code class="hljs lisp">require('package-name')</code> </pre> <br>  Alors, quelle est la meilleure façon d'installer des packages? <br><br>  En général, tous les packages doivent être installés localement.  Pour cette raison, même si vous avez des dizaines de projets Node.js, vous pouvez garantir, si nécessaire, leur utilisation de différentes versions des mêmes packages. <br><br>  La mise à jour du package global conduit au fait que tous les projets dans lesquels il est appliqué utiliseront sa nouvelle version.  Il est facile de comprendre que cela, en termes de support de projet, peut conduire à un véritable cauchemar, car les nouvelles versions de certains packages peuvent être incompatibles avec leurs anciennes versions. <br><br>  Si chaque projet a sa propre version locale d'un package, même si cela peut sembler un gaspillage de ressources, il s'agit d'une très petite redevance pour éviter les conséquences négatives qui peuvent être causées par l'incompatibilité de nouvelles versions de packages mises à jour de manière centralisée avec le code du projet. <br><br>  Les packages doivent être installés globalement quand ce sont des utilitaires appelés depuis la ligne de commande qui sont utilisés dans de nombreux projets. <br><br>  Ces packages peuvent également être installés localement en exécutant les utilitaires de ligne de commande qu'ils fournissent à l'aide de npx, mais certains packages sont toujours mieux installés globalement.  Ces packages que vous connaissez peut-être incluent, par exemple, les éléments suivants: <br><br><ul><li>  npm </li><li>  créer-réagir-app </li><li>  vue-cli </li><li>  grunt-cli </li><li>  moka </li><li>  réagir-natif-cli </li><li>  gatsby-cli </li><li>  pour toujours </li><li>  nodemon </li></ul><br>  Il est possible que votre système dispose déjà de packages installés dans le monde entier.  Pour en savoir plus, utilisez la commande suivante: <br><br><pre> <code class="hljs powershell">npm list <span class="hljs-literal"><span class="hljs-literal">-g</span></span> -<span class="hljs-literal"><span class="hljs-literal">-depth</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">À propos des dépendances de projet</font> </h2><br>  Quand un package doit-il être considéré comme une dépendance de projet régulière nécessaire pour assurer son fonctionnement, et quand - comme une dépendance de développement? <br><br>  Lors de l'installation d'un package à l'aide d'une commande telle que <code>npm install &lt;package-name&gt;</code> il est installé en tant que dépendance régulière.  Un enregistrement d'un tel package est effectué dans la section des <code>dependencies</code> du fichier <code>package.json</code> (avant npm 5, un tel enregistrement n'était effectué qu'en utilisant l'indicateur <code>--save</code> , maintenant il n'est plus nécessaire de l'utiliser). <br><br>  L'utilisation de l' <code>--save-dev</code> vous permet d'installer le package en tant que dépendance de développement.  En même temps, un enregistrement est effectué dans la section <code>devDependencies</code> du fichier <code>devDependencies</code> . <br><br>  Les dépendances de développement sont des packages qui sont nécessaires dans le processus de développement d'un projet; pendant son fonctionnement normal, ils ne sont pas nécessaires.  Ces packages incluent, par exemple, des outils de test, Webpack, Babel. <br><br>  Lorsqu'un projet est déployé à l'aide de la commande <code>npm install</code> dans son dossier, dans lequel se trouve un dossier contenant le fichier <code>package.json</code> , cela installera toutes les dépendances, car npm suppose qu'une telle installation est effectuée dans le but de travailler sur le projet. <br><br>  Par conséquent, si le package doit être déployé en production, vous devez utiliser la <code>install --production</code> npm <code>install --production</code> lors du déploiement.  Grâce au drapeau <code>--production</code> , <code>--production</code> dépendances de <code>--production</code> ne seront pas installées. <br><br><h2>  <font color="#3AC1EF">Utilitaire npx</font> </h2><br>  Nous allons maintenant parler d'une équipe très puissante, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">npx</a> , qui est apparue dans npm 5.2.  L'une de ses capacités consiste à exécuter des fichiers exécutables inclus dans les packages npm.  Nous avons déjà envisagé d'utiliser npx pour exécuter un fichier similaire à partir du package cowsay.  Parlons maintenant de cela plus en détail. <br><br><h3>  <font color="#3AC1EF">▍Utilisez npx pour simplifier l'exécution des commandes locales</font> </h3><br>  Les développeurs de Node.js ont publié de nombreux fichiers exécutables (utilitaires) sous la forme de packages qui étaient censés être installés globalement, ce qui offrait un accès pratique à leurs capacités, car vous pouviez les exécuter à partir de la ligne de commande en entrant simplement le nom de la commande correspondante.  Cependant, travailler dans un tel environnement était très inconfortable s'il était nécessaire d'installer différentes versions des mêmes packages. <br><br>  L'utilisation d'une commande de la forme <code>npx commandname</code> recherche automatiquement le fichier souhaité dans le dossier de projet <code>node_modules</code> .  Cela élimine le besoin de connaître le chemin exact vers un tel fichier.  Cela rend également inutile l'installation globale du package, en lui donnant accès à partir de n'importe où dans le système de fichiers grâce à l'utilisation de la variable système <code>PATH</code> . <br><br><h3>  <font color="#3AC1EF">▍Exécution d'utilitaires sans avoir à les installer</font> </h3><br>  Npx a une autre fonctionnalité intéressante, grâce à laquelle les utilitaires peuvent être lancés sans les avoir installés au préalable.  Ceci est utile principalement pour les raisons suivantes: <br><br><ul><li>  Aucune installation d'utilitaires requise. </li><li>  Vous pouvez exécuter différentes versions des mêmes utilitaires en spécifiant la version souhaitée à l'aide de la construction <code>@version</code> . </li></ul><br>  Voyons comment utiliser ce mécanisme, en utilisant l'utilitaire <code>cowsay</code> vous connaissez déjà.  Donc, si le package cowsay est installé globalement, l'exécution de la <code>cowsay "Hello"</code> sur la ligne de commande produira sur la console une vache "parlante": <br><br><pre> <code class="hljs tex">_______ &lt; Hello &gt; -------       <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>^__^        <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>(oo)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span></span>______           (__)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">/</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>              ||----w |               || ||</code> </pre> <br>  Si le package cowsay n'est pas installé globalement, une commande similaire lancera une erreur. <br><br>  L'utilitaire npx vous permet d'exécuter de telles commandes sans les installer.  Il ressemble, dans le cadre de notre exemple, à ceci: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npx</span></span> cowsay <span class="hljs-string"><span class="hljs-string">"Hello"</span></span></code> </pre> <br>  Une telle commande fonctionnera, mais bien qu'une vache «parlante», dans l'ensemble, n'apporte pas beaucoup d'avantages, la même approche peut être utilisée pour exécuter des commandes beaucoup plus utiles.  Voici quelques exemples: <br><br><ul><li>  Il existe un outil en ligne de commande conçu pour créer et exécuter des applications Vue.  En utilisant npx, cela peut être appelé comme ceci: <code>npx vue create my-vue-app</code> . </li><li>  Vous pouvez utiliser l'utilitaire <code>create-react-app</code> pour <code>create-react-app</code> applications React.  Son appel via npx ressemble à ceci: <code>npx create-react-app my-react-app</code> . </li></ul><br>  Après avoir téléchargé et utilisé le code npx approprié, il sera supprimé. <br><br><h3>  <font color="#3AC1EF">▍ Lancement de code JavaScript à l'aide de différentes versions de Node.js</font> </h3><br>  Afin d'exécuter du code à l'aide de différentes versions de Node.js, vous pouvez, à l'aide de npx, accéder au <code>node</code> package npm, en indiquant sa version.  Cela ressemble à ceci: <br><br><pre> <code class="hljs perl">npx node@6 -v <span class="hljs-comment"><span class="hljs-comment">#v6.14.3 npx node@8 -v #v8.11.3</span></span></code> </pre> <br>  Cela élimine le besoin d'outils comme nvm ou d'autres gestionnaires de versions de Node.js. <br><br><h3>  <font color="#3AC1EF">▍Démarrer des fragments de code arbitraires disponibles à une certaine adresse</font> </h3><br>  Npx vous permet d'exécuter non seulement du code publié dans npm.  En particulier, si vous avez un lien vers un certain morceau de code (par exemple, un résumé publié sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> ), vous pouvez l'exécuter comme ceci: <br><br><pre> <code class="hljs objectivec">npx https:<span class="hljs-comment"><span class="hljs-comment">//gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</span></span></code> </pre> <br>  Bien sûr, lors de l'exécution d'un tel code, vous ne devez pas oublier la sécurité.  Npx donne au développeur de grandes opportunités, mais cela signifie également une grande responsabilité. <br><br><h3>  <font color="#3AC1EF">▍ Résultats</font> </h3><br>  Aujourd'hui, nous avons parlé de certains mécanismes npm utiles et de l'utilisation de npx.  À ce stade, vous devez avoir une compréhension de base du périphérique npm et savoir comment travailler avec ce gestionnaire de packages.  Si vous souhaitez jeter un œil plus approfondi sur npm, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page de</a> documentation du projet et expérimentez davantage. <br><br>  La prochaine fois, nous discuterons de certains mécanismes de base de Node.js, dont la compréhension est nécessaire au succès du développement d'applications pour cette plate-forme. <br><br>  <b>Chers lecteurs!</b>  Utilisez-vous npx? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423705/">https://habr.com/ru/post/fr423705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423695/index.html">Comment prendre sa retraite avant 40 ans avec un million de dollars dans un compte bancaire</a></li>
<li><a href="../fr423697/index.html">Présentation de Spring Data JDBC</a></li>
<li><a href="../fr423699/index.html">«L'économie numérique» a augmenté de prix: 2 billions de roubles devront être alloués sur le budget</a></li>
<li><a href="../fr423701/index.html">Guide Node.js, Partie 3: Hébergement, REPL, Opérations de console, Modules</a></li>
<li><a href="../fr423703/index.html">Manuel Node.js, Partie 4: Fichiers npm, package.json et package-lock.json</a></li>
<li><a href="../fr423707/index.html">Ce qui est sous le capot de Jaxx. Entropie prête à l'emploi 128 bits</a></li>
<li><a href="../fr423709/index.html">CSS Grid - Couteau suisse pour les mises en page de sites Web et d'applications</a></li>
<li><a href="../fr423711/index.html">Gérer pour un geek: d'où obtenir les données?</a></li>
<li><a href="../fr423713/index.html">"Made in Russia" - Langage de programmation WBASIC pour le développement d'applications Web côté serveur</a></li>
<li><a href="../fr423719/index.html">D'Erlang / Elixir à Java et vice versa. Aventure pendant 20 minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>