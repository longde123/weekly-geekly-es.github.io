<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍⚖️ 👨🏿‍🤝‍👨🏽 🅾️ Stockage de valeur-clé ou comment nos applications sont devenues plus pratiques 🎿 🐣 👨‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quiconque développe sur Voximplant connaît le concept des «applications» qui connectent les scénarios cloud, les numéros de téléphone, les utilisateur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Stockage de valeur-clé ou comment nos applications sont devenues plus pratiques</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/476452/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/sb/ul/gz/sbulgzjezfjb-fcb3l4hbycxvmi.jpeg"></div><br><br>  Quiconque développe sur Voximplant connaît le concept des «applications» qui connectent les scénarios cloud, les numéros de téléphone, les utilisateurs, les règles et les files d'attente d'appels.  En termes simples, les applications sont la pierre angulaire du développement de notre plateforme, le point d'entrée de toute solution basée sur Voximplant, car c'est à partir de la création de l'application que tout commence. <br><br>  Auparavant, les applications «ne se souvenaient» ni des actions effectuées par les scripts ni des résultats des calculs, de sorte que les développeurs étaient obligés d'enregistrer des valeurs dans des services tiers ou sur leur backend.  Si vous avez déjà travaillé avec le stockage local dans un navigateur, alors notre nouvelle fonctionnalité est très similaire à cela, car  Permet aux applications de mémoriser des paires clé-valeur uniques à chaque application de votre compte.  L'opération de stockage a été rendue possible grâce au nouveau module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ApplicationStorage</a> - sous le chat vous trouverez un petit guide de son utilisation, bienvenue! <br><a name="habracut"></a><br><h2>  Vous aurez besoin </h2><br><ul><li>  Compte Voximplant.  Si vous ne l'avez pas, l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">inscription se fait ici</a> ; </li><li>  Application Voximplant, ainsi qu'un script, une règle et un seul utilisateur.  Nous allons créer tout cela dans ce tutoriel; </li><li>  client Web pour passer un appel - utilisez notre téléphone <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Web phone.voximplant.com</a> . </li></ul><br><h2>  Paramètres Voximplant </h2><br>  Connectez-vous d'abord à votre compte: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manage.voximplant.com/auth</a> .  Dans le menu de gauche, cliquez sur "Applications", puis sur "Nouvelle application" et créez une application appelée stockage.  Allez dans la nouvelle application, passez à l'onglet Scripts pour créer un script countingCalls avec ce code: <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(Modules.ApplicationStorage); VoxEngine.addEventListener(AppEvents.CallAlerting, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (e) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> r = {<span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">-1</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { r = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.get(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { r = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.put(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e) { Logger.write(<span class="hljs-string"><span class="hljs-string">'    totalCalls'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.put(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>, (r.value | <span class="hljs-number"><span class="hljs-number">0</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e) { Logger.write(<span class="hljs-string"><span class="hljs-string">'    totalCalls'</span></span>); } e.call.answer(); e.call.say(<span class="hljs-string"><span class="hljs-string">`.   : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${r.value}</span></span></span><span class="hljs-string">. `</span></span>, Language.RU_RUSSIAN_MALE); e.call.addEventListener(CallEvents.PlaybackFinished, VoxEngine.terminate); });</code> </pre> <br>  La première ligne connecte le module ApplicationStorage, le reste de la logique est placé dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gestionnaire d'</a> événements <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CallAlerting</a> . <br><br>  Tout d'abord, nous déclarons une variable afin de pouvoir comparer la valeur initiale avec le compteur d'appels.  Ensuite, nous essayons d'obtenir la valeur de la clé totalCalls du magasin.  S'il n'y a pas encore une telle clé, nous la créons: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { r = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.get(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { r = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.put(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } }</code> </pre> <br>  Ensuite, vous devez augmenter la valeur de clé dans le référentiel: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationStorage.put(<span class="hljs-string"><span class="hljs-string">'totalCalls'</span></span>, (r.value | <span class="hljs-number"><span class="hljs-number">0</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><blockquote>  FAITES ATTENTION <br><br>  Pour chaque promesse, il est nécessaire d'indiquer explicitement le traitement de l'échec, comme indiqué dans la liste ci-dessus - sinon le script sera arrêté et vous verrez une erreur dans les journaux.  Détails <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </blockquote>  Après avoir travaillé avec le référentiel, le script répond à l'appel entrant à l'aide de la synthèse vocale et indique combien de fois vous avez appelé auparavant.  Après ce message, le script met fin à la session. <br><br>  Après avoir enregistré le script, allez dans l'onglet «Routage» de votre application et cliquez sur «Nouvelle règle».  Nommez-le startCounting, spécifiez le script countingCalls et laissez le masque par défaut (. *). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nk/hl/u0/nkhlu0scwj_lhbkvqln1lvqrrrq.jpeg" width="600"></div><br>  La dernière consiste à créer un utilisateur.  Pour ce faire, allez dans "Utilisateurs", cliquez sur "Créer un utilisateur", spécifiez un nom (par exemple, utilisateur1) et un mot de passe, puis cliquez sur "Créer".  Nous aurons besoin de cette paire nom d'utilisateur / mot de passe pour l'authentification dans le téléphone Web. <br><br><h2>  Vérifier </h2><br>  Ouvrez le téléphone Web sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">phone.voximplant.com</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">connectez-vous</a> en utilisant le nom de compte, le nom de l'application et une paire de nom d'utilisateur et de mot de passe de l'application.  Une fois la connexion établie, saisissez n'importe quel jeu de caractères dans le champ de saisie et appuyez sur Appeler.  Si tout a été fait correctement, vous entendrez un message d'accueil synthétisé! <br><br>  Nous vous souhaitons un excellent développement sur Voximplant et restons à l'écoute - nous en aurons bien d'autres;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476452/">https://habr.com/ru/post/fr476452/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476442/index.html">Donnez de l'espace ou un microcontrôleur comme un fréquencemètre</a></li>
<li><a href="../fr476444/index.html">Démystification des principes de l'informatique quantique</a></li>
<li><a href="../fr476446/index.html">Plugins Jira: quelques exemples de l'invention réussie du vélo</a></li>
<li><a href="../fr476448/index.html">Exploration du shader de sable du jeu Journey</a></li>
<li><a href="../fr476450/index.html">Présentation de cPanel - une console Web pour la gestion des sites et l'hébergement</a></li>
<li><a href="../fr476454/index.html">La 5G arrive: quelles entreprises assureront l'introduction de nouvelles technologies en 2020</a></li>
<li><a href="../fr476456/index.html">Le système chinois de crédit social n'est tout d'abord pas un système d'évaluation des citoyens, mais une API massive</a></li>
<li><a href="../fr476460/index.html">Le premier format de fichier à succès sur Internet n'était pas MP3, mais MIDI</a></li>
<li><a href="../fr476464/index.html">Problèmes de journalisation des événements de sécurité du système Windows</a></li>
<li><a href="../fr476466/index.html">Le livre "Les architectes de l'intelligence"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>