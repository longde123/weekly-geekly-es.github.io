<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèæ üïµüèº üë¥üèæ Jogo de Blockchain VR usando o token ERC-1155: React 360 or Unity? üîÜ üëÇüèæ ‚ôøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os jogos de realidade virtual sempre foram uma admira√ß√£o para n√≥s. Este √© um tipo de m√°gica em uma concha digital, o efeito total da imers√£o em outro ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jogo de Blockchain VR usando o token ERC-1155: React 360 or Unity?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437880/"><p>  Os jogos de realidade virtual sempre foram uma admira√ß√£o para n√≥s.  Este √© um tipo de m√°gica em uma concha digital, o efeito total da imers√£o em outro mundo.  Em todas as confer√™ncias, os projetos de RV recebem mais aten√ß√£o, stands de grande escala, centenas de espectadores esperando na fila para mergulhar em um universo rec√©m-criado.  Como nossa empresa n√£o se trata principalmente de entretenimento, mas de evolu√ß√£o e abordagens progressivas, examinamos em detalhes a quest√£o de como o blockchain pode ser √∫til em um g√™nero t√£o jovem de desenvolvimento de jogos como o VR. </p><br><p>  A resposta veio imediatamente: contratos inteligentes e o mais recente padr√£o de token de rede Ethereum ERC1155, projetado especificamente para criar ativos digitais / de jogos.  O ERC1155 √© um token que combina os melhores recursos dos populares ERC20 e ERC721 (detalhes t√©cnicos podem ser encontrados no <a href="">leia</a> - <a href="">me do reposit√≥rio do github</a> ).  Imagine uma situa√ß√£o cl√°ssica - voc√™ eliminou um item ou uma pele rara e cara.  Como vend√™-lo para que voc√™ n√£o seja enganado pelo comprador ou n√£o tenha a capacidade de receber livremente o dinheiro de outras pessoas sem doar o item?  A resposta correta √© contratos inteligentes.  E o token ERC1155 √© exatamente o que voc√™ precisa para implementar essa funcionalidade.  Um item pode ter suas pr√≥prias caracter√≠sticas - na forma de resist√™ncia, dano, durabilidade, prote√ß√£o, dano adicional (caracter√≠stica do token ERC721) e seu valor (caracter√≠stica do token ERC20) em um √∫nico shell - isso n√£o parece inspirador?  Todos os jogos podem se tornar seguros e f√°ceis de armazenar, transferir e vender seus ativos digitais.  Vamos tentar resolver esse problema usando o exemplo de um brinquedo que concebemos. </p><br><p>  Criamos o conceito rapidamente - um an√°logo do popular jogo de cartas ‚ÄúMunchkin‚Äù, transferido para o universo VR, com contratos inteligentes para negociar quaisquer itens, armaduras e armas que foram nocauteados durante o jogo.  A escolha da tecnologia de implementa√ß√£o para nossos desenvolvedores independentes n√£o foi f√°cil, mas queremos contar mais sobre essa experi√™ncia. </p><a name="habracut"></a><br><p>  <b>React 360</b> </p><br><p>  Como a maioria da equipe possu√≠a vasta experi√™ncia em desenvolvimento no React, havia o desejo de experimentar o React-360 para resolver a tarefa.  A descri√ß√£o da ferramenta parecia bastante funcional, por isso fizemos uma escolha na dire√ß√£o dele. </p><br><p>  <b>Instala√ß√£o e Descri√ß√£o</b> </p><br><p>  A instala√ß√£o do React-360 come√ßa com a instala√ß√£o de sua CLI com npm, o que ajuda a inicializar, iniciar e criar um projeto de forma r√°pida e conveniente, a partir da linha de comando. </p><br><p>  Ap√≥s a inicializa√ß√£o do projeto, recebemos um modelo de projeto pronto no qual os dois arquivos principais s√£o client.js e index.js, bem como a pasta static_assets, onde s√£o armazenados todos os arquivos aset para renderiza√ß√£o, index.html e outros arquivos de configura√ß√£o. </p><br><p>  <b>Renderiza√ß√£o</b> </p><br><p>  O primeiro arquivo (client.js) cont√©m o c√≥digo de renderiza√ß√£o e funciona com a classe principal React360.  O React360 possui dois tipos de objetos de renderiza√ß√£o: renderToLocation, respons√°vel pela renderiza√ß√£o de um objeto 3D, e renderToSurface, respons√°vel pela renderiza√ß√£o de um objeto 2D.  Tamb√©m definimos um Controlador para a c√¢mera, que descreve seu comportamento: no nosso caso, √© descrito o movimento da c√¢mera (como personagem principal) pressionando certos bot√µes do teclado.  Em seguida, definimos o plano de fundo padr√£o para todo o projeto e, na √∫ltima linha, escrevemos React360 no objeto window (que √© um objeto global para aplicativos de navegador). </p><br><p><img src="https://habrastorage.org/webt/9o/f_/1_/9of_1_t50ihyw89xz7h2ukfemb0.png" alt="imagem"></p><br><p>  Posteriormente, o m√©todo init do React360 √© chamado no arquivo index.html da seguinte maneira: </p><br><p><img src="https://habrastorage.org/webt/p4/fi/gt/p4figtiael1vnulddyfp-z_ercc.png" alt="imagem"></p><br><p>  No segundo arquivo (index.js), os componentes s√£o registrados no aplicativo, para fins de uso posterior na renderiza√ß√£o no arquivo client.js. </p><br><p><img src="https://habrastorage.org/webt/pf/ut/si/pfutsittizddjkex_obmcxbohac.png" alt="imagem"></p><br><p>  Portanto, a renderiza√ß√£o de fluxo do componente (objeto) sai assim: </p><br><p>  a) Cria√ß√£o em arquivo separado; <br>  b) Registro no index.js; <br>  c) Renderiza√ß√£o em client.js. </p><br><p>  <b>Posicionamento</b> </p><br><p>  O pr√≥ximo momento √© posicionar um objeto em um plano 3D.  No React-360, ao posicionar, como na renderiza√ß√£o, h√° diferen√ßas entre objetos 3D e 2D.  Objetos 3D podem ser posicionados de duas maneiras. </p><br><ol><li>  Via Localiza√ß√£o ao renderizar. </li><li>  Via Transform no pr√≥prio objeto. </li></ol><br><p>  Escolhemos Transform no local padr√£o, como o site oficial do React-360 aconselha.  O Translate √© respons√°vel pelo posicionamento no plano 3D. </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="imagem"></p><br><p>  Objetos 2D s√£o posicionados usando o sistema flex, como no React Native, que no nosso caso foi bastante inconveniente: </p><br><p><img src="https://habrastorage.org/webt/g6/my/4r/g6my4ry1w96rbkpqqjlcnzdtyho.png" alt="imagem"></p><br><p>  Para posicionar o bot√£o √† direita da c√¢mera, voc√™ precisava criar uma Visualiza√ß√£o, como em React Native, e definir sua largura correspondente √† dist√¢ncia do ponto mais √† esquerda da tela at√© o local onde o objeto deveria estar e a altura correspondente √† dist√¢ncia do ponto superior da tela √† √°rea. onde deveria estar o objeto.  Tamb√©m era necess√°rio definir certos estilos para que o conte√∫do interno fosse localizado no ponto inferior direito da Visualiza√ß√£o.  Como resultado, tudo parece complicado e inconveniente, √© mais f√°cil usar a mesma convers√£o para colocar esses objetos, apresentando-os como objetos 3D com profundidade 0. </p><br><p>  <b>Importar objetos</b> </p><br><p>  O pr√≥ximo item √© a importa√ß√£o de objetos 3D para o React-360.  E aqui, √† primeira vista, tudo √© simples e claro.  Existe um componente Modelo padr√£o que possui uma fonte de props que aceita um objeto JS do caminho para os arquivos .obj (o arquivo do pr√≥prio objeto) e .mtl (o arquivo material deste objeto): </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="imagem"></p><br><p>  Mas mesmo aqui havia armadilhas interessantes.  A linha inferior era que o arquivo .mtl possui uma textura de mapa por padr√£o no formato .tga e o caminho prescrito no disco da pessoa que o desenvolveu.  N√£o apenas tivemos que alterar o caminho para os arquivos manualmente, mas tamb√©m para .png, pois os arquivos no formato .tga n√£o foram renderizados no navegador.  O formato .png nos permitiu renderizar texturas corretamente. </p><br><p>  <b>Ilumina√ß√£o</b> </p><br><p>  Como o sistema de ilumina√ß√£o n√£o foi descrito na documenta√ß√£o, tive que entrar no c√≥digo-fonte do react-360 e encontrar algo sobre o Lights, e depois ver exemplos de quem estava fazendo o que e como trabalhar com esse zool√≥gico.  Por tentativa e erro, descobrimos e aplicamos aos modelos AmbientLight, SpotLight e PointLight.  O posicionamento deles √© o mesmo dos objetos 3D, mas tamb√©m existe um √¢ngulo: </p><br><p><img src="https://habrastorage.org/webt/aw/tr/b3/awtrb3bxjsgrlniywnq2ohxikr0.png" alt="imagem"></p><br><p>  A luz n√£o se aplicava ao objeto, mas n√£o recuamos e, ap√≥s uma longa pesquisa e percorrendo v√°rios problemas no reposit√≥rio do react-360, nos deparamos com a necessidade de colocar adere√ßos iluminados como verdadeiros, e somente depois disso a luz come√ßou a agir sobre o objeto. </p><br><p>  <b>Movimento</b> </p><br><p>  Tomamos a c√¢mera principal como o principal ator com o qual realizamos movimentos e a√ß√µes.  Para fazer isso, eles escreveram Controller para a c√¢mera, onde inicializaram a principal fun√ß√£o da interface: </p><br><p><img src="https://habrastorage.org/webt/3l/mq/xw/3lmqxwpgihssmspqpojjdj6bwtc.png" alt="imagem"></p><br><p>  que transmite a posi√ß√£o atual da c√¢mera e sua rota√ß√£o.  Voc√™ pode trabalhar com eles na c√¢mera para mudar de acordo com algum evento; pressionamos os bot√µes WASD como um evento (como de costume); depois, queremos substitu√≠-los pressionando o bot√£o e movendo-nos para a coordenada em que o bot√£o foi pressionado, para que depois substitua-o pelo VR Controller.  Para um doce, eles definiram a velocidade do movimento e a dist√¢ncia com que trabalhavam.  Temos um movimento com espasmos e uma completa falta de f√≠sica: passamos por texturas, voamos fora dos limites etc.  Na documenta√ß√£o, o f√≠sico n√£o √© descrito a partir da palavra "em geral" (e, em princ√≠pio, um similar n√£o √© "amig√°vel ao jogo", neste est√°gio de imers√£o se torna familiar). </p><br><p>  <b>Conclus√£o</b> </p><br><p>  Embora o React-360 funcione com o Three.js e o WebGL, ele √© completamente inadequado para solucionar esses problemas; al√©m disso, provavelmente n√£o foi destinado ao desenvolvedor de jogos.  O React-360 faz um excelente trabalho com apresenta√ß√µes em 3D, tours virtuais de objetos, visualiza√ß√£o de panoramas, etc. </p><br><p>  Mas, mesmo se voc√™ se comprometer a fazer essas coisas nessa pilha tecnol√≥gica, encontrar√° dificuldades na forma de documenta√ß√£o insuficiente, o que for√ßar√° voc√™ a passar horas resolvendo uma tarefa pequena e aparentemente simples. </p><br><pre><code class="plaintext hljs">     JS,   React,     JSX,       ( ), ,  ,     React,     React Native.   -    .</code> </pre> <br><p>  <b>Unidade</b> </p><br><p>  Depois de todo o tormento, decidimos usar a segunda ferramenta dentro de nossas compet√™ncias.  Desta vez, a escolha recaiu sobre o Unity, pois a equipe possui desenvolvedores de C #. </p><br><p>  <b>Instala√ß√£o e Descri√ß√£o</b> </p><br><p>  A instala√ß√£o √© bastante simples - baixar e descompactar banalmente o kit de distribui√ß√£o do site oficial.  Existe um "mas": o Unity at√© agora s√≥ funciona no Windows e Mac (da vers√£o 10).  Portanto, tivemos que transferir do Ubuntu para o Mac. </p><br><p>  Como o Unity √© um mecanismo de jogo que inclui uma interface do usu√°rio boa e conveniente, o projeto √© criado com um simples clique no bot√£o, ap√≥s o qual voc√™ obt√©m um modelo completo dos arquivos necess√°rios.  Basicamente, tudo est√° na pasta Assets. </p><br><p>  <b>Renderiza√ß√£o</b> </p><br><p>  Como o mecanismo em si est√° renderizando, voc√™ n√£o precisa registrar nada. </p><br><p>  <b>Posicionamento</b> </p><br><p>  O posicionamento √© t√£o f√°cil quanto a renderiza√ß√£o.  Basta arrastar o objeto para o campo e trabalhar com os controles deslizantes no formato apropriado ou em uma GUI conveniente.  Como na renderiza√ß√£o, a situa√ß√£o √© tal que nada foi necess√°rio para ser registrado. </p><br><p>  <b>Importar objetos</b> </p><br><p>  Um simples Drag'n'Drop, inicialmente dentro do Ativo na pasta apropriada e, em seguida, uma opera√ß√£o semelhante no campo GUI.  N√£o h√° c√≥digo. </p><br><p>  <b>Ilumina√ß√£o</b> </p><br><p>  Trabalhar com ilumina√ß√£o √© t√£o simples quanto nos par√°grafos anteriores.  A cria√ß√£o de uma nova ilumina√ß√£o ocorre na guia apropriada do projeto.  O sistema tamb√©m √© descrito em detalhes suficientes na documenta√ß√£o. </p><br><p>  <b>Movimento</b> </p><br><p>  Este √© o primeiro ponto em que voc√™ precisa codificar algo.  Ou seja, o comportamento do jogador e da c√¢mera enquanto se move.  Para o sistema de movimenta√ß√£o, usamos o sistema NavMesh e seus agentes.  Descrevemos a √°rea em que voc√™ pode andar na GUI, identificou a c√¢mera e o modelo como agente no sistema de navega√ß√£o.  Ent√£o criamos um script, isso √© feito de maneira muito simples na GUI: </p><br><ul><li>  O objeto est√° selecionado; </li><li>  O bot√£o Adicionar componentes √© pressionado; </li><li>  Seleciona novo script; </li><li>  O nome est√° escrito. </li></ul><br><p>  E pronto - um modelo de script padr√£o na pasta raiz √© criado.  N√≥s apenas precisamos transferi-lo para a pasta Scripts e abri-lo (por padr√£o, ele abre no VS, o que √© muito conveniente).  O modelo de script padr√£o possui uma interface intuitiva na forma de duas fun√ß√µes: </p><br><ul><li>  Start - usado ao configurar componentes; </li><li>  Atualiza√ß√£o - chamada em todos os quadros. </li></ul><br><p>  Na fun√ß√£o Iniciar, bloqueamos o cursor no centro da tela e gravamos nosso componente na propriedade correspondente da classe, e tamb√©m declaramos par√¢metros padr√£o para as propriedades restantes. </p><br><p>  Na fun√ß√£o Atualizar, escrevemos a l√≥gica de rota√ß√£o do objeto atr√°s do cursor, bem como o movimento do objeto por clique: </p><br><p><img src="https://habrastorage.org/webt/cs/ov/e0/csove0ay8yjktshjs30yarw8omk.png" alt="imagem"></p><br><p>  <b>Conclus√£o</b> </p><br><p>  Al√©m da conclus√£o bastante √≥bvia sobre a conveni√™ncia do Unity, gostaria de observar que, para trabalhar no Unity, voc√™ n√£o pode ser um programador.  O Unity possui muitos tutoriais para iniciantes, muito simples e diretos, al√©m de documenta√ß√£o abrangente e de alta qualidade e uma comunidade ativa e animada. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437880/">https://habr.com/ru/post/pt437880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437868/index.html">Semana 05 de seguran√ßa: Impressoras, c√¢meras, 7zip e √©tica</a></li>
<li><a href="../pt437870/index.html">Como Resident Evil 2 desmoronou, mas foi capaz de se tornar o maior sucesso da Capcom</a></li>
<li><a href="../pt437872/index.html">Sapateiro sem botas. Como os alunos escreveram e-mails de phishing</a></li>
<li><a href="../pt437876/index.html">"Nuvens": qual √© a vantagem sobre o servidor corporativo</a></li>
<li><a href="../pt437878/index.html">Tend√™ncias de seguran√ßa cibern√©tica do BI.ZONE</a></li>
<li><a href="../pt437882/index.html">ASML assume Mapography Litography ap√≥s a fal√™ncia</a></li>
<li><a href="../pt437884/index.html">Modifica√ß√£o no jogo com base em dll-wrapper'a</a></li>
<li><a href="../pt437888/index.html">Captura do sinal de atividade muscular no sistema de aprendizado de m√°quina</a></li>
<li><a href="../pt437890/index.html">CNC em uma oficina de hobby (parte 1)</a></li>
<li><a href="../pt437892/index.html">Vis√£o geral do scanner 3D Brilhando no 3D FreeScan X7 / X7 +</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>