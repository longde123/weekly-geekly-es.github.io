<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ฟโ๐ ๐ฆ ๐ ููุงุฐุง ูุง ุชุณุฑุน const ุฑูุฒ C / C ++ุ ๐คฑ๐ฝ ๐ฟ ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุจู ุจุถุนุฉ ุฃุดูุฑ ุ ุฐูุฑุช ูู ููุดูุฑ ูุงุญุฏ ุฃู ูุฐู ุฎุฑุงูุฉ ุ ููุง ูู ุฃู const ูุณุงุนุฏ ูู ุชูููู ุชุญุณููุงุช ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ูู C ู C ++ . ูุฑุฑุช ุฃู ูุฐุง ุงูุจูุงู ูุฌุจ ุฃ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุฐุง ูุง ุชุณุฑุน const ุฑูุฒ C / C ++ุ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/464777/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ck/cw/48/ckcw48o0aqklzf10gzhfqx8w3rw.jpeg"></div><br>  ูุจู ุจุถุนุฉ ุฃุดูุฑ ุ ุฐูุฑุช ูู ููุดูุฑ ูุงุญุฏ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐู ุฎุฑุงูุฉ ุ ููุง ูู ุฃู const ูุณุงุนุฏ ูู ุชูููู ุชุญุณููุงุช ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ูู C ู C ++</a> .  ูุฑุฑุช ุฃู ูุฐุง ุงูุจูุงู ูุฌุจ ุฃู ูุดุฑุญ ุ ุฎุงุตุฉ ูุฃููู ููุช ุฃุคูู ุจูุฐู ุงูุฃุณุทูุฑุฉ ูู ูุจู  ุณุฃุจุฏุฃ ุจุงููุธุฑูุฉ ูุงูุฃูุซูุฉ ุงูุตูุงุนูุฉ ุ ุซู ุงูุชูู ุฅูู ุงูุชุฌุงุฑุจ ูุงููุนุงููุฑ ุจูุงุกู ุนูู ูุงุนุฏุฉ ุงูููุฏ ุงูุญููููุฉ - SQLite. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุจุณูุท </h2><br>  ููุจุฏุฃ ุ ููุง ุจุฏุง ูู ุ ุจุฃุจุณุท ูุฃูุถุญ ูุซุงู ุนูู ุชุณุฑูุน ููุฏ C ูุน <code>const</code> .  ุฏุนูุง ูููู ุฃู ูุฏููุง ุฅุนูุงููู ูุธููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *x)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *x)</span></span></span></span>;</code> </pre> <br>  ูููุชุฑุถ ุฃู ููุงู ูุณุฎุชูู ูู ุงูููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">byArg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *x)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, *x); func(x); <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, *x); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constByArg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *x)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, *x); constFunc(x); <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, *x); }</code> </pre> <br>  ูุชูููุฐ <code>printf()</code> ุ ูุฌุจ ุนูู ุงููุนุงูุฌ ุงุณุชุฑุฏุงุฏ <code>*x</code> ูู ุงูุฐุงูุฑุฉ ูู ุฎูุงู ูุคุดุฑ.  ูู ุงููุงุถุญ ุฃู ุชูููุฐ <code>constByArg()</code> ูููู ุฃู ูููู ุฃุณุฑุน ููููุงู ุ ูุฃู ุงููุชุฑุฌู ูุนุฑู ุฃู <code>*x</code> ุซุงุจุช ุ ูุฐูู ููุณุช ููุงู ุญุงุฌุฉ ูุชุญููู ูููุชู ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ููุงู <code>constFunc()</code> ุจุฐูู.  ุฃููุณ ูุฐููุ  ุฏุนููุง ูุฑู ุฑูุฒ ุงูุชุฌููุน ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ูุน ุชูููู ุงูุชุญุณููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ gcc -S -Wall -O3 test.c $ view test.s</code> </pre> <br>  ููุง ูู ูุชูุฌุฉ ุงููุฌููุน ุงููุงููุฉ ูู <code>byArg()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">byArg: .LFB23: .cfi_startproc pushq %rbx .cfi_def_cfa_offset 16 .cfi_offset 3, -16 movl (%rdi), %edx movq %rdi, %rbx leaq .LC0(%rip), %rsi movl $1, %edi xorl %eax, %eax call __printf_chk@PLT movq %rbx, %rdi call func@PLT # The only instruction that's different in constFoo movl (%rbx), %edx leaq .LC0(%rip), %rsi xorl %eax, %eax movl $1, %edi popq %rbx .cfi_def_cfa_offset 8 jmp __printf_chk@PLT .cfi_endproc</code> </pre> <br>  ูุชูุซู ุงูุงุฎุชูุงู ุงููุญูุฏ ุจูู ุชุนูููุฉ ุจุฑูุฌูุฉ ุงููุฌููุน ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ <code>byArg()</code> ู <code>constByArg()</code> ุฃู <code>constByArg()</code> ูุฏูู <code>call constFunc@PLT</code> ุ ููุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ.  <code>const</code> ููุณูุง ูุง ูุฑู. <br><br>  ุญุณููุง ุ ูุงู ุฐูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู.  ุฑุจูุง ูุญุชุงุฌ ุฅูู ูุชุฑุฌู ุฃูุซุฑ ุฐูุงุก.  ูู ููุงูุฌ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">$ clang -S -Wall -O3 -emit-llvm test.c $ view test.ll</code> </pre> <br>  ููุง ูู ุฑูุฒ ุงููุชูุณุทุฉ.  ุฅูู ุฃูุซุฑ ุฅุญูุงูุง ูู ุงููุฌููุน ุ ูุณุฃููู ุจุฅุณูุงุท ููุชุง ุงููุธููุชูู ุ ุจุญูุซ ุชููู ูุง ุฃูุตุฏู "ูุง ูุฑู ุ ุจุงุณุชุซูุงุก ุงูููุงููุฉ": <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">; Function Attrs: nounwind uwtable define dso_local <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @byArg(i32*) local_unnamed_addr #<span class="hljs-number"><span class="hljs-number">0</span></span> { %<span class="hljs-number"><span class="hljs-number">2</span></span> = load i32, i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">3</span></span> = tail call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 %<span class="hljs-number"><span class="hljs-number">2</span></span>) tail call <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @func(i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>) #<span class="hljs-number"><span class="hljs-number">4</span></span> %<span class="hljs-number"><span class="hljs-number">4</span></span> = load i32, i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">5</span></span> = tail call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 %<span class="hljs-number"><span class="hljs-number">4</span></span>) ret <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> } ; Function Attrs: nounwind uwtable define dso_local <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @constByArg(i32*) local_unnamed_addr #<span class="hljs-number"><span class="hljs-number">0</span></span> { %<span class="hljs-number"><span class="hljs-number">2</span></span> = load i32, i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">3</span></span> = tail call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 %<span class="hljs-number"><span class="hljs-number">2</span></span>) tail call <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @constFunc(i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>) #<span class="hljs-number"><span class="hljs-number">4</span></span> %<span class="hljs-number"><span class="hljs-number">4</span></span> = load i32, i32* %<span class="hljs-number"><span class="hljs-number">0</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">5</span></span> = tail call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 %<span class="hljs-number"><span class="hljs-number">4</span></span>) ret <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> }</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุงูุฐู ูุนูู (ุงูููุน) </h2><br>  ูููุง ูู ุงูููุฏ ุงูุฐู ูููู ููู ูุฌูุฏ <code>const</code> ุฃูุฑูุง <code>const</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">localVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, x); constFunc(&amp;x); <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d\n"</span></span>, x); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constLocalVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-comment"><span class="hljs-comment">// const on the local variable printf("%d\n", x); constFunc(&amp;x); printf("%d\n", x); }</span></span></code> </pre> <br>  ุฑูุฒ ุงููุฌููุน ูู <code>localVar()</code> ุ ุงูุฐู ูุญุชูู ุนูู ุฅุฑุดุงุฏุงุช ูุญุณููุฉ ุฎุงุฑุฌ <code>constLocalVar()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">localVar: .LFB25: .cfi_startproc subq $<span class="hljs-number"><span class="hljs-number">24</span></span>, %rsp .cfi_def_cfa_offset <span class="hljs-number"><span class="hljs-number">32</span></span> movl $<span class="hljs-number"><span class="hljs-number">42</span></span>, %edx movl $<span class="hljs-number"><span class="hljs-number">1</span></span>, %edi movq %fs:<span class="hljs-number"><span class="hljs-number">40</span></span>, %rax movq %rax, <span class="hljs-number"><span class="hljs-number">8</span></span>(%rsp) xorl %eax, %eax leaq .LC0(%rip), %rsi movl $<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>(%rsp) call __printf_chk@PLT leaq <span class="hljs-number"><span class="hljs-number">4</span></span>(%rsp), %rdi call constFunc@PLT movl <span class="hljs-number"><span class="hljs-number">4</span></span>(%rsp), %edx <span class="hljs-meta"><span class="hljs-meta"># not in constLocalVar() xorl %eax, %eax movl $1, %edi leaq .LC0(%rip), %rsi # not in constLocalVar() call __printf_chk@PLT movq 8(%rsp), %rax xorq %fs:40, %rax jne .L9 addq $24, %rsp .cfi_remember_state .cfi_def_cfa_offset 8 ret .L9: .cfi_restore_state call __stack_chk_fail@PLT .cfi_endproc</span></span></code> </pre> <br>  ุงููุณูุทุฉ LLVM ูู ุฃูุธู ููููุงู.  <code>load</code> ูุจู ุฃู ูุชู ุชุญุณูู ุงูููุงููุฉ ุงูุซุงููุฉ ุฅูู <code>printf()</code> ุฎุงุฑุฌ <code>constLocalVar()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">; Function Attrs: nounwind uwtable define dso_local <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @localVar() local_unnamed_addr #<span class="hljs-number"><span class="hljs-number">0</span></span> { %<span class="hljs-number"><span class="hljs-number">1</span></span> = alloca i32, align <span class="hljs-number"><span class="hljs-number">4</span></span> %<span class="hljs-number"><span class="hljs-number">2</span></span> = bitcast i32* %<span class="hljs-number"><span class="hljs-number">1</span></span> to i8* call <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @llvm.lifetime.start.p0i8(i64 <span class="hljs-number"><span class="hljs-number">4</span></span>, i8* nonnull %<span class="hljs-number"><span class="hljs-number">2</span></span>) #<span class="hljs-number"><span class="hljs-number">4</span></span> store i32 <span class="hljs-number"><span class="hljs-number">42</span></span>, i32* %<span class="hljs-number"><span class="hljs-number">1</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">3</span></span> = tail call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 <span class="hljs-number"><span class="hljs-number">42</span></span>) call <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @constFunc(i32* nonnull %<span class="hljs-number"><span class="hljs-number">1</span></span>) #<span class="hljs-number"><span class="hljs-number">4</span></span> %<span class="hljs-number"><span class="hljs-number">4</span></span> = load i32, i32* %<span class="hljs-number"><span class="hljs-number">1</span></span>, align <span class="hljs-number"><span class="hljs-number">4</span></span>, !tbaa !<span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">5</span></span> = call i32 (i8*, ...) @<span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(i8* getelementptr inbounds ([<span class="hljs-number"><span class="hljs-number">4</span></span> x i8], [<span class="hljs-number"><span class="hljs-number">4</span></span> x i8]* @.str, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>, i64 <span class="hljs-number"><span class="hljs-number">0</span></span>), i32 %<span class="hljs-number"><span class="hljs-number">4</span></span>) call <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> @llvm.lifetime.end.p0i8(i64 <span class="hljs-number"><span class="hljs-number">4</span></span>, i8* nonnull %<span class="hljs-number"><span class="hljs-number">2</span></span>) #<span class="hljs-number"><span class="hljs-number">4</span></span> ret <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> }</code> </pre> <br>  ูุฐูู ุ <code>constLocalVar()</code> ุจูุฌุงุญ ุฅุนุงุฏุฉ ุงูุชุดุบูู <code>*x</code> ุ ููู ูุฏ ุชูุงุญุธ ุดูุฆูุง ุบุฑูุจูุง: ูู ุงูููุฆุงุช <code>localVar()</code> ู <code>constLocalVar()</code> ููุณ ุงูุฏุนูุฉ ุฅูู <code>constFunc()</code> .  ุฅุฐุง ุชููู ุงููุชุฑุฌู ูู ูุนุฑูุฉ ุฃู <code>constFunc()</code> ูู ูุนุฏู <code>*x</code> ูู <code>constLocalVar()</code> ุ ูููุงุฐุง ูุง ูุณุชุทูุน ุฃู ูููู ุฃู ุงุณุชุฏุนุงุก ุงููุธููุฉ ููุณู ูู ูุนุฏู <code>*x</code> ูู <code>localVar()</code> ุ <br><br>  ุงูุชูุณูุฑ ูู ููุงุฐุง <code>const</code> ูู C ุบูุฑ ุนููู ูุงุณุชุฎุฏุงู ุงูุชุญุณูู.  ูู C ุ ูุญุชูู <code>const</code> ุจุดูู ุฃุณุงุณู ุนูู ูุนูููู ูุญุชูููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏ ูุนูู ุฃู ุงููุชุบูุฑ ูู ุงุณู ูุณุชุนุงุฑ ูููุฑุงุกุฉ ููุท ูุจุนุถ ุงูุจูุงูุงุช ุ ูุงูุชู ูุฏ ุชููู ุฃู ูุง ุชููู ุซุงุจุชุฉ. <br></li><li style=";text-align:right;direction:rtl">  ุฃู ูููู ุฃู ูุนูู ุฃู ุงููุชุบูุฑ ุซุงุจุช ุจุงููุนู.  ุฅุฐุง ููุช ุจูู <code>const</code> ูู ูุคุดุฑ ุฅูู ูููุฉ ุซุงุจุชุฉ ุ ุซู ูุชุจุช ุนููู ุ ูุณุชุญุตู ุนูู ุณููู ุบูุฑ ูุญุฏุฏ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูู ุชููู ููุงู ูุดููุฉ ุฅุฐุง ูุงูุช <code>const</code> ูุคุดุฑ ุฅูู ูููุฉ ููุณุช ุซุงุจุชุฉ. <br></li></ul><br>  ูููุง ููู ูุซุงู ุชูุถูุญู ูุชุทุจูู <code>constFunc()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// x is just a read-only pointer to something that may or may not be a constant void constFunc(const int *x) { // local_var is a true constant const int local_var = 42; // Definitely undefined behaviour by C rules doubleIt((int*)&amp;local_var); // Who knows if this is UB? doubleIt((int*)x); } void doubleIt(int *x) { *x *= 2; }</span></span></code> </pre><br>  ุฃุนุทู <code>constFunc()</code> ูุคุดุฑ <code>const</code> ุฅูู ูุชุบูุฑ ุบูุฑ ุชุงุจุน.  ูุธุฑูุง ูุฃู ุงููุชุบูุฑ ูู ููู <code>const</code> ุงูุจุฏุงูุฉ ุ ููุฏ ูุชุญูู <code>constFunc()</code> ุฅูู ูุงุฐุจ ููููู ุจุชุนุฏูู ุงููุชุบูุฑ ุจููุฉ ุจุฏูู ุจุฏุก UB.  ูุฐูู ุ ูุง ููุชุฑุถ ุงููุญูู ุงูุจุฑูุฌู ุฃูู ุจุนุฏ ุฅุฑุฌุงุน <code>constFunc()</code> ุณูููู ูููุชุบูุฑ ููุณ ุงููููุฉ.  ุงููุชุบูุฑ ูู <code>constLocalVar()</code> ูู ูู ุงูุญูููุฉ <code>const</code> ุ ูุฐูู ูุง ูููู ูููุชุฑุฌู ุฃู ููุชุฑุถ ุฃูู ูู ูุชู ุชุบููุฑู ุ ูุฃูู ูุฐู ุงููุฑุฉ <i>ุณูููู</i> UB ูู <code>constFunc()</code> ุ ุจุญูุซ ูููู ุงููุชุฑุฌู ุจุฑุจุท <code>const</code> ุจุงููุชุงุจุฉ ุฅูู ุงููุชุบูุฑ. <br><br>  <code>byArg()</code> ู <code>constByArg()</code> ูู ุงููุซุงู ุงูุฃูู ูุง ุฃูู ูููุง ุ ูุฃู ุงููุชุฑุฌู ูุง ููููู <code>constByArg()</code> ูุง ุฅุฐุง ูุงูุช <code>*x</code> ูู <code>const</code> . <br><br>  ููู ูู ุฃูู ุฌุงุก ุงูุชูุงูุถุ  ุฅุฐุง ูุงู ุจุฅููุงู ุงููุญูู ุงูุจุฑูุฌู ุงูุชุฑุงุถ ุฃู <code>constFunc()</code> ูุง ูุบูุฑ ุงููุณูุทุฉ ุงูุฎุงุตุฉ ุจู ุนูุฏ ุงุณุชุฏุนุงุฆู ูู <code>constLocalVar()</code> ุ <code>constLocalVar()</code> ุนูุฏุฆุฐู ุชุทุจูู ููุณ ุงูุชุญุณููุงุช ุนูู <code>constFunc()</code> ุ ุฃููุณ ูุฐููุ  ูุง.  ูุง ูููู ูููุชุฑุฌู ุฃู ููุชุฑุถ ุฃูู ุณูุชู ุงุณุชุฏุนุงุก <code>constLocalVar()</code> ุนูู ุงูุฅุทูุงู.  ูุฅุฐุง ูู ูุญุฏุซ ุฐูู (ุนูู ุณุจูู ุงููุซุงู ุ ูุฃูู ูุฌุฑุฏ ูุชูุฌุฉ ุฅุถุงููุฉ ููููุฏ ุงูุดูุฑุฉ ุฃู ุชุดุบูู ุงููุงูุฑู) ุ ูุฅู <code>constFunc()</code> ููููู ุชุบููุฑ ุงูุจูุงูุงุช ุจูุฏูุก ุฏูู ุจุฏุก UB. <br><br>  ูุฏ ุชุญุชุงุฌ ุฅูู ูุฑุงุกุฉ ุงูุฃูุซูุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ูุดุฑุญ ุนุฏุฉ ูุฑุงุช.  ูุง ุชููู ุฃูู ูุจุฏู ุณุฎูููุง - ุฅูู ูุฐูู.  ูุณูุก ุงูุญุธ ุ ุชุนุฏ ุงููุชุงุจุฉ ุฅูู ูุชุบูุฑุงุช <code>const</code> ุฃุณูุฃ ุฃููุงุน UB: ูู ุฃุบูุจ ุงูุฃุญูุงู ุ ูุง ูุนุฑู ุงููุชุฑุฌู ูุง ุฅุฐุง ูุงู ุณูููู UB.  ูุฐูู ุ ุนูุฏูุง ูุฑู ุงููุญูู ุงูุจุฑูุฌู <code>const</code> ุ ูุฌุจ ุฃู ูุจุฏุฃ ูู ุญูููุฉ ุฃูู ูููู ูุฃู ุดุฎุต ุชุบููุฑู ูู ููุงู ูุง ุ ููุง ูุนูู ุฃู ุงููุญูู ุงูุจุฑูุฌู ูุง ููููู ุงุณุชุฎุฏุงู <code>const</code> ููุชุญุณูู.  ูู ุงููุงูุน ุ ูุฐุง ุตุญูุญ ุ ูุฃู ุงููุซูุฑ ูู ููุฏ C ุงูุญูููู ูุญุชูู ุนูู ุฑูุถ <code>const</code> ูู ููุท "ุฃุนุฑู ูุง ุฃููู ุจู". <br><br>  ุจุงุฎุชุตุงุฑ ุ ููุงู ุงูุนุฏูุฏ ูู ุงูููุงูู ุงูุชู ูุง ููุณูุญ ูููุง ูููุชุฑุฌู ุจุงุณุชุฎุฏุงู <code>const</code> ููุชุญุณูู ุ ุจูุง ูู ุฐูู ุงุณุชุฑุฏุงุฏ ุงูุจูุงูุงุช ูู ูุทุงู ุขุฎุฑ ุจุงุณุชุฎุฏุงู ูุคุดุฑ ุ ุฃู ูุถุน ุงูุจูุงูุงุช ุนูู ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ.  ุฃู ูุง ูู ุฃุณูุฃ ูู ุฐูู ุ ุนุงุฏุฉ ูู ุงูููุงูู ุงูุชู ูุชุนุฐุฑ ุนูู ุงููุญูู ุงูุจุฑูุฌู ูููุง ุงุณุชุฎุฏุงู <code>const</code> ุ ููุฐุง ููุณ ุถุฑูุฑููุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ูุฃู ูุชุฑุฌู ูุญุชุฑู ููุณู ุฃู ูููู ุฏูู ุฃู <code>const</code> ูู ูุฐุง ุงูุฑูุฒ <code>x</code> ุฃูู ุซุงุจุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">42</span></span>, y = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d %d\n"</span></span>, x, y); y += x; <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%d %d\n"</span></span>, x, y);</code> </pre> <br>  ูุฐูู <code>const</code> ูุฌุฏูุฉ ุชูุฑูุจูุง ููุชุญุณูู ุ ูุฐูู ุจุณุจุจ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุน ุจุนุถ ุงูุงุณุชุซูุงุกุงุช ุ ูุถุทุฑ ุงููุชุฑุฌู ุฅูู ุชุฌุงูููุง ุ ูุธุฑูุง ูุฃู ุจุนุถ ุงูููุฏ ูููู ุฃู ููุดู ูุงููููุง. <br></li><li style=";text-align:right;direction:rtl">  ูู ูุนุธู ุงูุงุณุชุซูุงุกุงุช ุงูุณุงุจูุฉ ุ ูุง ูุฒุงู ุจุฅููุงู ุงููุชุฑุฌู ุฃู ูููู ุฃู ุงููุชุบูุฑ ุซุงุจุช. <br></li></ol><br><h2 style=";text-align:right;direction:rtl">  C ++ </h2><br>  ุฅุฐุง ูุชุจุช ูู C ++ ุ ููููู ุฃู ุชุคุซุฑ <code>const</code> ุนูู ุชูููุฏ ุงูููุฏ ูู ุฎูุงู ุงูุชุญููู ุงูุฒุงุฆุฏ ูููุธุงุฆู.  ูููู ุฃู ูููู ูุฏูู <code>const</code> ุฒุงุฆุฏ <code>const</code> ูู ููุณ ุงููุธููุฉ ุ ููููู ุชุญุณูู <code>const</code> ุบูุฑ <code>const</code> (ุจูุงุณุทุฉ ูุจุฑูุฌ ุ ูููุณ ูุชุฑุฌู) ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุณุฎ ุฃูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *p)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Needs to do more copying of data } void foo(const int *p) { // Doesn't need defensive copies } int main() { const int x = 42; // const-ness affects which overload gets called foo(&amp;x); return 0; }</span></span></code> </pre> <br>  ูู ูุงุญูุฉ ุ ูุง ุฃุนุชูุฏ ุฃูู ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ูุชู ุชุทุจูู ูุฐุง ุบุงูุจูุง ูู ููุฏ C ++.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูู ุฃุฌู ุฅุญุฏุงุซ ูุฑู ุญูููู ุ ูุฌุจ ุนูู ุงููุจุฑูุฌ ูุถุน ุงูุชุฑุงุถุงุช ุบูุฑ ูุชููุฑุฉ ูููุชุฑุฌู ุ ูุธุฑูุง ูุฃู ูุฐู ุงููุบุฉ ุบูุฑ ูุถูููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุฌุฑุจุฉ ูุน SQLite3 </h2><br>  ูููู ูุธุฑูุฉ ูุฃูุซูุฉ ุจุนูุฏุฉ ุงูููุงู.  ูุง ูู ุชุฃุซูุฑ <code>const</code> ุนูู codebase ุงูุญููููุ  ูุฑุฑุช ุชุฌุฑุจุฉ SQLite DB (ุงูุฅุตุฏุงุฑ 3.30.0) ุ ูุฃูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณุชุฎุฏู <code>const.</code> </li><li style=";text-align:right;direction:rtl">  ูุฐุง ูู ูุงุนุฏุฉ ุฑูุฒ ุบูุฑ ุจุฏููู (ุฃูุซุฑ ูู 200 KLOC). <br></li><li style=";text-align:right;direction:rtl">  ููุงุนุฏุฉ ุจูุงูุงุช ุ ูุชุถูู ุนุฏุฏูุง ูู ุงูุขููุงุช ุ ุจุฏุกูุง ุจูุนุงูุฌุฉ ููู ุงูุณูุณูุฉ ูููุชูู ุจุชุญููู ุงูุฃุฑูุงู ุฅูู ุชุงุฑูุฎ. <br></li><li style=";text-align:right;direction:rtl">  ูููู ุงุฎุชุจุงุฑู ูุน ุชุญููู ูุนุงูุฌ ูุญุฏูุฏ. <br></li></ul><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฃูุถู ุงููุคูู ูุงููุจุฑูุฌูู ุงููุดุงุฑููู ูู ุงูุชุทููุฑ ุณููุงุช ุจุงููุนู ูู ุชุญุณูู ุงูุฅูุชุงุฌูุฉ ุ ุญุชู ููุชุฑุถ ุฃููู ูู ูููุชูุง ุฃู ุดูุก ูุงุถุญ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฏุฑูุจ </h3><br>  ููุฏ ุตูุนุช ูุณุฎุชูู ูู <a href="">ุงูููุฏ ุงููุตุฏุฑู</a> .  ุฃุญุฏููุง ุชู ุชุฌููุนู ูู ุงููุถุน ุงูุนุงุฏู ุ ูุงูุซุงูู ูุนุงูุฌ ูุณุจููุง ุจุงุณุชุฎุฏุงู ุงูุงุฎุชุฑุงู ูุชุญููู <code>const</code> ุฅูู ุฃูุฑ ุฎุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> const</span></span></code> </pre> <br>  ูููู ูู (GNU) ุฅุถุงูุฉ ูุฐุง ูู ุฃุนูู ูู ููู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>sed -i '1i#define const' *.c *.h</code> . <br><br>  SQLite ูุนูุฏ ุงูุฃููุฑ ููููุงู ุ ูุฐูู ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุฅูุดุงุก ุฑูุฒ ุฃุซูุงุก ุงูุฅูุดุงุก.  ูุญุณู ุงูุญุธ ุ ููุฏู ุงููุชุฑุฌููู ุงููุซูุฑ ูู ุงูุถูุถุงุก ุนูุฏ ูุฒุฌ ุงูููุฏ ูุน <code>const</code> ูุจุฏูู <code>const</code> ุ ูุฐูู ููููู ุฃู ุชูุงุญุธ ุนูู ุงูููุฑ ูุชูููู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุฅุถุงูุฉ ููุฏ ููุงูุญุฉ <code>const</code> . <br><br>  ุงูููุงุฑูุฉ ุงููุจุงุดุฑุฉ ููุฑููุฒ ุงููุชุฑุฌูุฉ ูุง ูุนูู ููุง ุ ูุฃู ุงูุชุบููุฑ ุงูุจุณูุท ูููู ุฃู ูุคุซุฑ ุนูู ูุธุงู ุงูุฐุงูุฑุฉ ุจุงููุงูู ุ ููุง ุณูุคุฏู ุฅูู ุชุบููุฑ ูู ุงููุคุดุฑุงุช ูููุงููุงุช ุงููุธุงุฆู ูู ุงูููุฏ ุจุฃูููู.  ูุฐูู ุ ุฃุฎุฐุช ูุฑูููุง ุชู ุชููููู ( <code>objdump -d libSQLite3.so.0.8.6</code> ) <code>objdump -d libSQLite3.so.0.8.6</code> ููู ุชุนูููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฐู ุงููุธููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">000000000005</span></span>d570 &lt;SQLite3_blob_read&gt;: <span class="hljs-number"><span class="hljs-number">5</span></span>d570: <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">8</span></span>d <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-number"><span class="hljs-number">59</span></span> a2 ff ff lea <span class="hljs-number"><span class="hljs-number">-0x5da7</span></span>(%rip),%r8 # <span class="hljs-number"><span class="hljs-number">577</span></span>d0 &lt;SQLite3BtreePayloadChecked&gt; <span class="hljs-number"><span class="hljs-number">5</span></span>d577: e9 <span class="hljs-number"><span class="hljs-number">04</span></span> fe ff ff jmpq <span class="hljs-number"><span class="hljs-number">5</span></span>d380 &lt;blobReadWrite&gt; <span class="hljs-number"><span class="hljs-number">5</span></span>d57c: <span class="hljs-number"><span class="hljs-number">0f</span></span> <span class="hljs-number"><span class="hljs-number">1f</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> nopl <span class="hljs-number"><span class="hljs-number">0x0</span></span>(%rax)</code> </pre> <br>  ูุชุญูู ุฅูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">SQLite3_blob_read <span class="hljs-number"><span class="hljs-number">7l</span></span>ea <span class="hljs-number"><span class="hljs-number">5</span></span>jmpq <span class="hljs-number"><span class="hljs-number">4</span></span>nopl</code> </pre> <br>  ุนูุฏ ุงูุชุญููู ุงูุจุฑูุฌู ุ ูู ุฃุบูุฑ ุฅุนุฏุงุฏุงุช ุชุฌููุน SQLite. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญููู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชุฑุฌูุฉ </h3><br>  ุจุงููุณุจุฉ ุฅูู libSQLite3.so ุ ุงุญุชูุช ุงููุณุฎุฉ ุฐุงุช <code>const</code> 4ุ740ุ704 ุจุงูุช ุ ุฃู ุญูุงูู 0.1ูช ุฃูุซุฑ ูู ุงูุฅุตุฏุงุฑ ุจุฏูู <code>const</code> ูุน 4ุ736ุ712 ุจุงูุช.  ูู ููุชุง ุงูุญุงูุชูู ุ ุชู ุชุตุฏูุฑ 1374 ูุธููุฉ (ูุง ุชุญุณุจ ูุธุงุฆู ุงููุณุงุนุฏ ุนูู ูุณุชูู ููุฎูุถ ูู PLT) ุ ู 13 ูุฏููุง ุฃู ุงุฎุชูุงูุงุช ูู ุงูููุงูุจ. <br><br>  ููุงูุช ุจุนุถ ุงูุชุบููุฑุงุช ุฐุงุช ุงูุตูุฉ ุฅูู ุงุฎุชุฑุงู preprocessing.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅููู ุฅุญุฏู ุงููุธุงุฆู ุงูุชู ุชู ุชุบููุฑูุง (ุฃุฒูุช ุจุนุถ ุงูุชุนุฑููุงุช ุงูุฎุงุตุฉ ุจู SQLite): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LARGEST_INT64 (0xffffffff|(((int64_t)0x7fffffff)</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt;32)) #define SMALLEST_INT64 (((int64_t)-1) - LARGEST_INT64) static int64_t doubleToInt64(double r){ /* ** Many compilers we encounter do not define constants for the ** minimum and maximum 64-bit integers, or they define them ** inconsistently. And many do not understand the "LL" notation. ** So we define our own static constants here using nothing ** larger than a 32-bit integer constant. */ static const int64_t maxInt = LARGEST_INT64; static const int64_t minInt = SMALLEST_INT64; if( r&lt;=(double)minInt ){ return minInt; }else if( r&gt;=(double)maxInt ){ return maxInt; }else{ return (int64_t)r; } }</span></span></span></span></code> </pre> <br>  ุฅุฐุง ุฃุฒููุง <code>const</code> ุ ูุฅู ูุฐู ุงูุซูุงุจุช ุชุชุญูู ุฅูู ูุชุบูุฑุงุช <code>static</code> .  ูุง ุฃููู ููุงุฐุง ูุฌุจ ุนูู ุฃู ุดุฎุต ูุง ููุชู ุจู <code>const</code> ุฌุนู ูุฐู ุงููุชุบูุฑุงุช <code>static</code> .  ุฅุฐุง ุฃุฒููุง ูููู ูู <code>static</code> ู <code>const</code> ุ ูุฅู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู <code>const</code> ูุฌุฏุฏูุง ุซูุงุจุช ุ ูุณูุญุตู ุนูู ููุณ ุงููุชูุฌุฉ.  ุจุณุจุจ ูุฐู ุงููุชุบูุฑุงุช <code>static const</code> ุ ุชุจูู ุฃู ุงูุชุบููุฑุงุช ูู ุซูุงุซ ูุธุงุฆู ูู ุฃุตู ุซูุงุซุฉ ุนุดุฑ ูุงูุช ุฎุงุทุฆุฉ ุ ููููู ูู ุฃุตูุญูุง. <br><br>  ูุณุชุฎุฏู SQLite ุงูุนุฏูุฏ ูู ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ุ ูุชุฑุชุจุท ุบุงูุจูุฉ ุชุญุณููุงุช <code>const</code> ุงูุญููููุฉ ุจูุฐุง: ูุซู ุงุณุชุจุฏุงู ููุงุฑูุฉ ูุน ูุชุบูุฑ ุจููุงุฑูุฉ ูุน ุซุงุจุช ุ ุฃู ุฅุนุงุฏุฉ ุญููุฉ ุฅูู ุงููุฑุงุก ุฎุทูุฉ ูุงุญุฏุฉ ุฎุทูุฉ (ูููู ููุน ุงูุชุญุณููุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง ุ ููุฏ ุงุณุชุฎุฏูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Radare</a> ).  ุจุนุถ ุงูุชุบููุฑุงุช ูุง ุชุณุชุญู ุงูุฐูุฑ.  ูุญุชูู <code>SQLite3ParseUri()</code> ุนูู 487 ุชุนูููุงุช ุ ูููู <code>const</code> ุฅุฌุฑุงุก ุชุบููุฑ ูุงุญุฏ ููุท: ุฃุฎุฐ ูุฐูู ุงูููุงุฑูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">test %al, %al je &lt;SQLite3ParseUri+<span class="hljs-number"><span class="hljs-number">0x717</span></span>&gt; cmp $<span class="hljs-number"><span class="hljs-number">0x23</span></span>, %al je &lt;SQLite3ParseUri+<span class="hljs-number"><span class="hljs-number">0x717</span></span>&gt;</code> </pre> <br>  ูุชุจุงุฏูุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">cmp $<span class="hljs-number"><span class="hljs-number">0x23</span></span>, %al je &lt;SQLite3ParseUri+<span class="hljs-number"><span class="hljs-number">0x717</span></span>&gt; test %al, %al je &lt;SQLite3ParseUri+<span class="hljs-number"><span class="hljs-number">0x717</span></span>&gt;</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงููุนุงููุฑ </h3><br>  SQLite ูุฃุชู ูุน ุงุฎุชุจุงุฑ ุงูุงูุญุฏุงุฑ ูููุงุณ ุงูุฃุฏุงุก ุ ูููุช ุจุชุดุบููู ูุฆุงุช ุงููุฑุงุช ููู ุฅุตุฏุงุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ุฅุนุฏุงุฏุงุช ุจูุงุก SQLite ุงูููุงุณูุฉ.  ูุฏุฉ ุงูุชูููุฐ ุจุงูุซูุงูู: <br><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><td></td><td>  CONST <br></td><td>  ุจุฏูู const <br></td></tr><tr><td>  ุงูุญุฏ ุงูุฃุฏูู <br></td><td>  10ุ658 <br></td><td>  10ุ803 <br></td></tr><tr><td>  ูุชูุณุท <br></td><td>  11ุ571 <br></td><td>  11ุ519 <br></td></tr><tr><td>  ูุญุฏ ุฃูุตู. <br></td><td>  11ุ832 <br></td><td>  11ุ658 <br></td></tr><tr><td>  ูุชูุณุท <br></td><td>  11ุ531 <br></td><td>  11ุ492 <br></td></tr></tbody></table></div><br>  ุฃูุง ุดุฎุตูุงู ูุง ุฃุฑู ูุฑููุง ูุจูุฑูุง.  ุฃุฒูุช <code>const</code> ูู ุงูุจุฑูุงูุฌ ุจุฃูููู ุ ูุฐูู ุฅุฐุง ูุงู ููุงู ุงุฎุชูุงู ููุญูุธ ุ ููู ุงูุณูู ุฃู ุชูุงุญุธ ุฐูู.  ููุน ุฐูู ุ ุฅุฐุง ูุงู ุงูุฃุฏุงุก ููููุง ููุบุงูุฉ ุจุงููุณุจุฉ ูู ุ ูููููู ุญุชู ุงูุชุณุงุฑุน ุงูุตุบูุฑ ุฃู ูุฑุถูู.  ุฏุนููุง ููุนู ุชุญููู ุฅุญุตุงุฆู. <br><br>  ุฃุญุจ ุงุณุชุฎุฏุงู ุงุฎุชุจุงุฑ Mann-Whitney U ููุซู ูุฐู ุงูููุงู ุ ููู ูุดุงุจู ููุงุฎุชุจุงุฑ ุงูุฃูุซุฑ ุดูุฑุฉ ุ ุงููุตูู ูุชุญุฏูุฏ ุงูุงุฎุชูุงูุงุช ูู ุงููุฌููุนุงุช ุ ูููู ุฃูุซุฑ ููุงููุฉ ููุงุฎุชูุงูุงุช ุงูุนุดูุงุฆูุฉ ุงููุนูุฏุฉ ุงูุชู ุชุญุฏุซ ุนูุฏ ููุงุณ ุงูููุช ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ (ุจุณุจุจ ุชุจุฏูู ุงูุณูุงู ุบูุฑ ุงููุงุจู ููุชูุจุค ุจู ุ ูุงูุฃุฎุทุงุก ูู ุตูุญุงุช ุงูุฐุงูุฑุฉ ุ ููุง ุฅูู ุฐูู).  ูุฐู ูู ุงููุชูุฌุฉ: <br><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><th></th><th>  CONST </th><th>  ุจุฏูู const </th></tr><tr><td>  N </td><td>  100 </td><td>  100 </td></tr><tr><td>  ุงููุฆุฉ ุงููุณุทู (ูุชูุณุท โโุงูุฑุชุจุฉ) </td><td>  121.38 </td><td>  79.62 </td></tr><tr><td>  ูุงู ููุชูู </td><td></td><td>  2912 </td></tr><tr><td>  Z </td><td></td><td>  -5.10 </td></tr><tr><td>  ูููุฉ 2-s ุฌุงูุจ </td><td></td><td>  &lt;10 <sup>-6</sup> <br></td></tr><tr><td>  ุงููุฑู ุงููุชูุณุท โโูู HL <br></td><td></td><td>  -0.056 ุซุงููุฉ. <br></td></tr><tr><td>  95 ูู ุงููุฆุฉ ูุงุตู ุงูุซูุฉ <br></td><td></td><td>  -0.077 ... -0.038 ุซุงููุฉ. <br></td></tr></tbody></table></div><br>  ูุฌุฏ ุงุฎุชุจุงุฑ U ูุฑููุง ุฐู ุฏูุงูุฉ ุฅุญุตุงุฆูุฉ ูู ุงูุฃุฏุงุก.  ููู - ููุงุฌุฃุฉ!  - ุชุญููุช ุงููุณุฎุฉ ุฏูู <code>const</code> ุฅูู ุฃุณุฑุน ุ ุจุญูุงูู 60 ูููู ุซุงููุฉ ุ ุฃู ุจูุณุจุฉ 0.5ูช.  ูุจุฏู ุฃู ุงูุนุฏุฏ ุงูุตุบูุฑ ูู "ุงูุชุญุณููุงุช" ุงูุชู ุชู ุฅุฌุฑุงุคูุง ูู ุชูู ุชุณุชุญู ุงูุฒูุงุฏุฉ ูู ููุฏุงุฑ ุงูููุฏ.  ูู ุบูุฑ ุงููุญุชูู ุฃู ุชููู <code>const</code> ุจุชูุดูุท ุฃู ุชุญุณููุงุช ุฑุฆูุณูุฉ ุ ูุซู ูุงูู ุงูุณูุงุฑุงุช.  ุจุงูุทุจุน ุ ูุฏ ูุนุชูุฏ ุนุฏุฏ ุงูุฃููุงู ุงูููุทูุนุฉ ุนูู ุนูุงูุงุช ูุฎุชููุฉ ูู ุงููุชุฑุฌู ุ ุฃู ุนูู ูุณุฎุชู ุ ุฃู ุนูู ูุงุนุฏุฉ ุงูุดูุฑุฉ ุ ุฃู ุนูู ุดูุก ุขุฎุฑ.  ูููู ูุจุฏู ูู ุตุงุฏูุง ุฃู ุฃููู ุฃูู ุญุชู ูู <code>const</code> ุชุญุณูู ุฃุฏุงุก C ุ ูู ุฃูุงุญุธ ูุฐุง. <br><br><h2 style=";text-align:right;direction:rtl">  ููุง ูู ุงููุทููุจ const ูุ </h2><br>  ูุฌููุน ุนููุจูุง ุ ูุฅู <code>const</code> ูู C / C ++ ูููุฏ ูุชูููุฑ ุณูุงูุฉ ุงูููุน.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุฅุฐุง ููุช ุชุณุชุฎุฏู <code>const</code> ุจุงูุงูุชุฑุงู ูุน ุฏูุงูุงุช ุงูููู ู <code>std::unique_pointer</code> ุ ูููููู ุชุทุจูู ููููุฉ ุงููุคุดุฑ ุงูุตุฑูุญ.  ูุงูุช ุญุงูุฉ ุนุฏู ุงููููู ุงููุชุนููุฉ ุจููููุฉ ุงููุคุดุฑ ูุดููุฉ ูุจูุฑุฉ ูู ุฃููุงุฏ ุจุฑุงูุฌ C ++ ุงูุฃูุฏู ุงูุชู ุชุฒูุฏ ุนู 100 KLOC ุ ูุฐูู ุฃูุง ููุชู ูู <code>const</code> ูุญููุง. <br><br>  ููุน ุฐูู ุ ูุจู ุฐูุจุช ุฅูู ุฃุจุนุฏ ูู ุงุณุชุฎุฏุงู <code>const</code> ูุชูููุฑ ููุน ุงูุณูุงูุฉ.  ุณูุนุช ุฃูู ูุงู ูู ุงูุตุญูุญ ุงุณุชุฎุฏุงู <code>const</code> ุจุฃูุจุฑ ูุฏุฑ ูููู ูู <code>const</code> ูุชุญุณูู ุงูุฃุฏุงุก.  ุณูุนุช ุฃูู ุฅุฐุง ูุงู ุงูุฃุฏุงุก ููููุง ุญููุง ุ ูุนููู ุฅุนุงุฏุฉ ุชุดููู ุงูููุฏ ูุฅุถุงูุฉ ุงููุฒูุฏ ูู <code>const</code> ุ ุญุชู ูู ุฃุตุจุญ ุงูููุฏ ุฃูู ูุงุจููุฉ ูููุฑุงุกุฉ.  ุจุฏุง ุงูุฃูุฑ ูุนููููุง ูู ุฐูู ุงูููุช ุ ููู ููุฐ ุฐูู ุงูุญูู ุฃุฏุฑูุช ุฃู ูุฐุง ูู ููู ุตุญูุญูุง. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464777/">https://habr.com/ru/post/ar464777/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464763/index.html">ูุนุงููุฑ ููุฎูุงุฏู ุนูู ูุธุงู Linux: ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูุฃุฏูุงุช ุงูููุชูุญุฉ</a></li>
<li><a href="../ar464765/index.html">ุชูููู FreePBX + GoIP</a></li>
<li><a href="../ar464769/index.html">ููู ุฌุนู Badoo ูู ุงููููู ุฅุนุทุงุก 200K ุตูุฑุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ</a></li>
<li><a href="../ar464773/index.html">ุบูุฑ ูุชุฒุงูู ุงููุชุงุจุฉ ูู ุชุทุจูู ุงูุฅูุชุฑูุช ุงูุบููุฉ ูุงูุฏูููุฑ ูููุงูุญุชู</a></li>
<li><a href="../ar464775/index.html">September 21st Badoo PHP Meetup # 3: Performance</a></li>
<li><a href="../ar464779/index.html">ุญูู ูุญู ุงููุชุนุฉ ุ ูุงูุทุฑููุฉ ุงูุชู ุชุฌุนู ุงููุงุณ ูุนูููู ุจูุง ูุทุงุฆุฑุงุช ุจุฏูู ุทูุงุฑ</a></li>
<li><a href="../ar464781/index.html">ุฃุฌูุฒุฉ ุงูุชููุงุฒ ุงูุฐููุฉ: CRT to HDR</a></li>
<li><a href="../ar464785/index.html">ููุงุฆุฏ ุงูุฎุท ุงููุจุงุดุฑ ุบูุฑ ุงูุชูุงูุณูุฉ</a></li>
<li><a href="../ar464787/index.html">ุฃูุง ูุชุฃูุฏ ูู ุฃู ูุทูุฑ ุจุฑุงูุฌ ุงูุฌูุงู ุณูุฃุชู ุจูุงุกู ุนูู ุชูุตูุฉ ููุท</a></li>
<li><a href="../ar464791/index.html">Kubernetes ููุณูุงุฑุฉ: ููููุฉ ูุชุญ ุงููุทูุฑ ุงููุตูู ุฅูู ุงูููุจููุชุฑ ุนูู ูุชู ุงูุทุงุฆุฑุฉ ูุฌุนููุง ุขููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>