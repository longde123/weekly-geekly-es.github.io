<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì üíº üôéüèº Simula√ß√£o do navegador de f√≠sica ‚ôüÔ∏è ü•† üôÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, quero descrever solu√ß√µes existentes para criar aplicativos com simula√ß√µes de f√≠sica, comparar seu desempenho e as ferramentas fornecidas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Simula√ß√£o do navegador de f√≠sica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436192/"><img src="https://habrastorage.org/webt/yq/sd/ff/yqsdffig9ijz6ggtlxz5woecato.png"><br><br>  Neste artigo, quero descrever solu√ß√µes existentes para criar aplicativos com simula√ß√µes de f√≠sica, comparar seu desempenho e as ferramentas fornecidas. <br><a name="habracut"></a><br><h3>  1. Introdu√ß√£o </h3><br>  Os seguintes mecanismos ser√£o considerados no artigo: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ammo.js</a> <br>  <a href="">Cannon.js</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Oimo.js</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">box2dweb</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Unity3D WebGL</a> <br><br>  O objetivo principal era escolher o mecanismo mais produtivo, conveniente e leve para o desenvolvimento de jogos e aplicativos usando simula√ß√µes de f√≠sica. <br><br><h3>  Ammo.js </h3><br>  √â uma porta do mecanismo de f√≠sica Bullet em javascript, usando o compilador Emscripten e, de acordo com os desenvolvedores, tem funcionalidade quase id√™ntica.  A funcionalidade do Ammo.js √© realmente extensa.  Para trabalhar com isso, voc√™ precisa de uma biblioteca separada para visualiza√ß√£o.  O mais usado √© o Three.js.  Al√©m disso, cada ciclo de redesenho precisar√° sincronizar manualmente a posi√ß√£o e a rota√ß√£o de cada objeto na cena com seu modelo f√≠sico, o mecanismo n√£o far√° isso automaticamente. <br><br>  Quanto ao desempenho, n√£o √© muito alto, mas n√£o haver√° redu√ß√µes vis√≠veis de fps na maioria dos projetos. <br><br>  √Äs vezes, a API pode ser bastante confusa e a documenta√ß√£o realmente n√£o ajuda. <br>  Em geral, uma ferramenta muito boa que continua a se desenvolver e ser desenvolvida. <br><br><h3>  Cannon.js </h3><br>  O Cannon.js √© um mecanismo de f√≠sica leve de c√≥digo aberto.  Ao contr√°rio do anterior, ele foi originalmente escrito em javascript e permite que voc√™ use todos os seus recursos e otimiza√ß√µes.  De fato, √© dif√≠cil dizer se isso √© um sinal de mais ou menos, pois o c√≥digo compilado pode ser muito mais eficiente do que escrito do zero.  No entanto, o cannon.js √© considerado mais compacto, mais produtivo e tamb√©m mais f√°cil de entender em compara√ß√£o com o ammo.js, mas n√£o possui muitas fun√ß√µes.  Na pr√°tica, seu desempenho geralmente √© aproximadamente o mesmo. <br><br>  O processo de trabalho com o mecanismo √© bastante simples: <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var world = new CANNON.World(); world.gravity.set(0, 0, -9.82); //   (   ) //        var radius = 1; var sphereBody = new CANNON.Body({ mass: 5, position: new CANNON.Vec3(0, 0, 10), shape: new CANNON.Sphere(radius) }); world.addBody(sphereBody); var fixedTimeStep = 1.0 / 60.0; var maxSubSteps = 3; //    var lastTime; (function simloop(time){ requestAnimationFrame(simloop); if(lastTime !== undefined){ var dt = (time - lastTime) / 1000; world.step(fixedTimeStep, dt, maxSubSteps); } lastTime = time; })();</span></span></code> </pre> <br>  Uma biblioteca gr√°fica de terceiros tamb√©m √© necess√°ria para o trabalho, e cada ciclo de renderiza√ß√£o precisar√° mover manualmente o objeto correspondente na cena para o local do objeto f√≠sico. <br><br><pre> <code class="javascript hljs">mesh.position.x = body.position.x; mesh.position.y = body.position.y; mesh.position.z = body.position.z; mesh.quaternion.x = body.quaternion.x; mesh.quaternion.y = body.quaternion.y; mesh.quaternion.z = body.quaternion.z; mesh.quaternion.w = body.quaternion.w;</code> </pre><br>  No momento, o mecanismo praticamente n√£o est√° se desenvolvendo, a √∫ltima atividade no reposit√≥rio de projetos h√° mais de dois anos, e naquele momento o mecanismo estava apenas come√ßando a se desenvolver, portanto, em alguns lugares, pode n√£o ser poss√≠vel. <br><br><h3>  Oimo.js </h3><br>  Oimo.js √© uma vers√£o do mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OimoPhysics</a> reescrita em javascript puro.  Comparado a outras solu√ß√µes, possui desempenho e precis√£o muito bons, mas suporta apenas geometria primitiva (cubos e esferas).  Ele est√° inclu√≠do no Babylon.js, uma estrutura para renderiza√ß√£o de gr√°ficos 2D e 3D, portanto, nenhuma biblioteca adicional √© necess√°ria. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   world = new OIMO.World({ timestep: 1/60, iterations: 8, broadphase: 2, worldscale: 1, random: true, info: false, gravity: [0,-9.8,0] }); //    var body = world.add({ type:'sphere', size:[1,1,1], pos:[0,0,0], rot:[0,0,90], move:true, density: 1, friction: 0.2, restitution: 0.2, belongsTo: 1, collidesWith: 0xffffffff; }); var body = world.add({ type:'jointHinge', body1: "b1", body2: "b1", }); world.step(); //           myMesh.position.copy( body.getPosition() ); myMesh.quaternion.copy( body.getQuaternion() );</span></span></code> </pre><br>  Uma grande desvantagem do mecanismo n√£o √© a documenta√ß√£o de alta qualidade, mas os desenvolvedores continuam trabalhando nele. <br><br>  No momento, o motor continua a se desenvolver. <br><br><h3>  box2dweb </h3><br>  box2dweb √© a porta javascript box2d.  Como o nome indica, √© especializado em simular f√≠sica 2D.  Apesar disso, o box2dweb √© uma ferramenta bastante poderosa que n√£o fica atr√°s de suas contrapartes tridimensionais.  Por exemplo, o mecanismo inclui sistemas extremamente convenientes para detectar colis√µes e simular conex√µes (restri√ß√£o). <br><br>  Quanto ao desempenho, voc√™ precisa realmente tentar escrever um c√≥digo n√£o ideal para que apare√ßam os rebaixamentos de fps. <br><br>  Das vantagens, tamb√©m vale mencionar a simplicidade da API e a documenta√ß√£o conveniente. <br><br><h3>  Unity3d </h3><br>  O Unity3D √© um popular mecanismo de jogo multiplataforma.  Inclui um editor simples de arrastar e soltar e um extenso kit de ferramentas para criar conte√∫do 3D  A vers√£o mais recente do mecanismo para escrever a l√≥gica do jogo suporta C #. <br><br>  O Unity possui uma simula√ß√£o f√≠sica incorporada, pois isso usa o mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PhysX</a> incorporado da NVIDIA.  O PhysX fornece ampla funcionalidade para simular a f√≠sica de s√≥lidos, l√≠quidos e tecidos e possui um desempenho muito bom, embora muitas vantagens sejam canceladas ao trabalhar em aceleradores gr√°ficos diferentes da NVIDIA.  Um fato extremamente agrad√°vel √© que, desde 3 de dezembro de 2018, o c√≥digo-fonte do mecanismo est√° dispon√≠vel sob a licen√ßa aberta BSD-3; no entanto, o mecanismo √© muito complexo para tentar reescrev√™-lo ou entender seu dispositivo, portanto, a documenta√ß√£o ajudar√° aqui melhor. <br><br>  O Unity acabou nesta lista, pois √© poss√≠vel criar um projeto no WebGL.  Para fazer isso, basta selecionar o item apropriado nas configura√ß√µes de compila√ß√£o. <br><br><img src="https://habrastorage.org/webt/tg/gc/il/tggcilkqw_p0jrnypfl4wbntmfg.png"><br><br>  No entanto, a vers√£o WebGL do Unity, devido √†s especificidades de sua arquitetura (traduzindo c√≥digo de C # para C ++ e depois para JavaScript), apresenta v√°rios problemas de desempenho, consumo de mem√≥ria e capacidade de trabalho em dispositivos m√≥veis, e n√£o parece que os desenvolvedores far√£o isso algo para fazer em breve.  Portanto, essa op√ß√£o n√£o √© popular e n√£o a considerarei em detalhes. <br><br><h3>  Compara√ß√£o de desempenho </h3><br>  Vamos comparar o desempenho dos mecanismos pela maneira como eles lidam com o processamento de colis√µes de um grande n√∫mero de objetos.  O navegador usado √© o Firefox 64.0.2 x64. <br><table><tbody><tr><th>  Engine </th><th>  fps ao processar 100 objetos </th><th>  fps ao processar 500 objetos </th><th>  fps ao processar 1000 objetos </th></tr><tr><td>  ammo.js </td><td>  40-50 </td><td>  25-27 </td><td>  15-25 </td></tr><tr><td>  cannon.js </td><td>  30-40 </td><td>  20-25 </td><td>  15-20 </td></tr><tr><td>  oimo.js </td><td>  45-55 </td><td>  35-40 </td><td>  35-40 </td></tr></tbody></table><br>  De acordo com os resultados do teste, o Oimo.js mostra o melhor desempenho. <br><br>  Certamente, esses resultados n√£o fornecem uma avalia√ß√£o adequada da produtividade, pois dependem de muitos fatores de terceiros, mas um estudo completo exigiria muito mais tempo, e eu n√£o estabeleci esse objetivo.  Al√©m disso, √© percept√≠vel que o desempenho de todos os mecanismos comparados √© bastante pequeno, portanto essas solu√ß√µes n√£o s√£o adequadas para escrever longe de todos os jogos, mas s√£o adequadas para criar pequenas demos. <br><br><h3>  Conclus√£o </h3><br>  Em geral, a escolha de um mecanismo espec√≠fico depende da tarefa.  Se voc√™ precisar de um mecanismo f√°cil de entender e aprender, o Cannon.js ou o Oimo.js. √© adequado.  Se mais funcionalidade for necess√°ria, √© melhor usar o Ammo.js.  Em certas situa√ß√µes, se um √≥timo desempenho n√£o for necess√°rio, voc√™ pode tentar usar o Unity. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436192/">https://habr.com/ru/post/pt436192/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436180/index.html">Coisas que voc√™ precisa saber para mudar do PHP para Python</a></li>
<li><a href="../pt436182/index.html">Outro evento para a posi√ß√£o CSS: sticky</a></li>
<li><a href="../pt436184/index.html">Slack planeja ir a p√∫blico ignorando o mecanismo tradicional de IPO</a></li>
<li><a href="../pt436186/index.html">O que pensar durante a entrevista do NALSD</a></li>
<li><a href="../pt436188/index.html">Liberdade para voar ao seu alcance com o DJI Smart Controller</a></li>
<li><a href="../pt436194/index.html">Como o sistema de vigil√¢ncia por v√≠deo Ivideon funciona: vis√£o geral do aplicativo m√≥vel</a></li>
<li><a href="../pt436196/index.html">Testador de voyeurismo: como espionar as pessoas corretamente e por que √© necess√°rio</a></li>
<li><a href="../pt436198/index.html">Gerador de masmorra de n√≥ gr√°fico</a></li>
<li><a href="../pt436200/index.html">Decis√£o judicial dos EUA: as autoridades n√£o t√™m o direito de for√ßar uma pessoa a desbloquear o telefone com um dedo ou rosto</a></li>
<li><a href="../pt436202/index.html">Perdi a f√© no desenvolvimento, queimei-me, mas o culto √† ferramenta me salvou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>