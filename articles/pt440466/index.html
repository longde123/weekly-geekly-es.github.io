<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèæ üë©üèª üßú Controle remoto Web UART ü§µüèª ‚õπüèæ ü§ôüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos come√ßar com ferro 
 Uma vez eu trabalhei em uma f√°brica, onde eles esculpiram todos os tipos de eletr√¥nicos, n√£o muito complicados, e √†s vezes s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Controle remoto Web UART</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440466/"><h2>  Vamos come√ßar com ferro </h2><br><img src="https://www.dataweek.co.za/articles/Dataweek%20-%20Published%20by%20Technews/18EMPESG21.jpg" alt="imagem" align="left">  Uma vez eu trabalhei em uma f√°brica, onde eles esculpiram todos os tipos de eletr√¥nicos, n√£o muito complicados, e √†s vezes se enquadravam na defini√ß√£o de "Internet das coisas".  Na maioria dos casos, todos os tipos de sensores para sistemas de seguran√ßa: fuma√ßa, ru√≠do, penetra√ß√£o, inc√™ndio e muito mais.  O sortimento de produtos era amplo, os lotes √†s vezes eram inferiores a 500 pe√ßas e quase para cada produto eu tinha que fazer um acess√≥rio de teste separado - na verdade, apenas uma caixa de lata na qual o produto era colocado em testes, era pressionada por uma tampa e, por baixo, agulhas de contato eram pressionadas para pontos de contato em uma placa de circuito impresso, algo como isto: <br><a name="habracut"></a><br>  Assim, foi poss√≠vel se comunicar fisicamente com o dispositivo.  O protocolo de comunica√ß√£o que t√≠nhamos era bastante comum na ind√∫stria - RS232 (porta COM, um tipo de UART).  Todos os tipos de dispositivos controlados simples para testar o produto final tamb√©m foram colocados na caixa.  Todas essas instrumenta√ß√µes auxiliares foram controladas da mesma maneira.  Toda a estrutura era muito fr√°gil e todos os tipos de problemas faziam parte da rotina di√°ria. <br><br>  A gama de problemas era muito ampla - contatos ruins, inverteu a polaridade durante a instala√ß√£o, problemas com o produto testado, com dispositivos de controle e medi√ß√£o, com agulhas de contato, com o c√≥digo de teste ... mas voc√™ nunca sabe!  Mas era necess√°rio testar constantemente, e se os testes come√ßassem a aparecer em algum lugar, um dos engenheiros precisava pisar na linha e come√ßar a verificar tudo manualmente. <br><br>  Primeiro, o Docklight foi lan√ßado - um bom utilit√°rio para "comunica√ß√£o" atrav√©s de portas COM, mas tinha muitas limita√ß√µes.  E aqui estamos nos aproximando da ess√™ncia do assunto. <br><br><h2>  Por que o Docklight n√£o combina comigo? </h2><br>  Bem, vamos l√°. <br><br><ul><li>  O primeiro problema √© que o Docklight <b>√©</b> executado <b>apenas</b> no Windows.  Portanto, a instala√ß√£o do "centro nervoso" na forma de RaspberryPi, que conectaria todos os dispositivos, ou algo assim, poderia ser esquecida.  Eu tive que instalar o NUC - a solu√ß√£o mais barata nessa situa√ß√£o.  Pesado, bastante grande, e n√£o o mais barato.  A prop√≥sito, quando esses Equipamentos de Teste foram arrastados de um lugar para outro, as NUCs lutaram muito, muito (embora eu admita que o design delas seja bastante s√≥lido). <br></li><li>  O segundo - o acesso remoto podia ser realizado apenas atrav√©s do compartilhamento de √°rea de trabalho - era mais lento mesmo atrav√©s da rede local e, mesmo atrav√©s da Internet, era completamente in√∫til. <br></li><li>  Terceiro, cada dispositivo tinha seu pr√≥prio conjunto de comandos e o Docklight podia carregar um arquivo com uma lista de comandos.  Se, por exemplo, voc√™ tiver que compartilhar uma lista semelhante com algu√©m do departamento, envie um email com o arquivo ou ... envie um link para o arquivo na pasta compartilhada!  Naturalmente, cada instala√ß√£o do Docklight exigia esses arquivos localmente, e tudo isso tinha que ser feito dezenas (sen√£o centenas de vezes) manualmente - para cada NUC, cada engenheiro arrastava suas listas de comandos favoritas e convenientes.  E no quintal de 2019, deixe-me lembr√°-lo ... <br></li><li>  Quarto, o Docklight n√£o permite associar automaticamente uma porta COM a um nome de dispositivo: por exemplo, o Windows, quando voc√™ conecta a fonte de alimenta√ß√£o, se comunica com o dispositivo via COM12.  Se voc√™ deseja "puxar as cordas" manualmente, no Docklight voc√™ precisa abrir o COM12.  Como podemos descobrir que se trata apenas da fonte de alimenta√ß√£o e n√£o, digamos, do SwitchBoard?  Bem, voc√™ pode procurar o gerenciador de dispositivos todas as vezes e tentar n√£o esquecer qual dispositivo est√° conectado a qual porta.  Ao mesmo tempo, ningu√©m garante que, se voc√™ simplesmente retirar o dispositivo e conect√°-lo novamente, a porta anterior permanecer√° com esse dispositivo.  Em resumo, toda vez que voc√™ precisar fazer isso manualmente.  E acredite, no final do dia minha cabe√ßa estava girando com isso. <br></li><li>  Quinto, cada porta precisava de uma c√≥pia separada do programa e, √© claro, todas as opera√ß√µes precisavam ser realizadas individualmente para cada dispositivo e, embora o Docklight suporte scripts, n√£o h√° intera√ß√£o entre as inst√¢ncias individuais. <br><br>  Pr√≥ximo.  Nenhuma integra√ß√£o com qualquer outro produto foi fornecida.  Parece um pouco, mas aqui est√° uma situa√ß√£o em que o calor ficou branco: o teste caiu e precisamos descobrir o porqu√™.  Primeiro de tudo, voc√™ precisa se conectar aos dispositivos e verificar se eles est√£o mortos.  Vamos ao gerenciador de dispositivos, olhamos em qual porta nosso dispositivo est√°, abrimos o Docklight, iniciamos a comunica√ß√£o com nossa porta ... Erro.  Droga!  Esqueci de interromper o servi√ßo que est√° instalado na NUC e mant√©m todas as portas.  Exclusivo, voc√™ sabe.  Ok, desaceleramos o servi√ßo, abrimos a porta, carregamos o arquivo com os comandos do dispositivo, enviamos os comandos, obtemos (ou n√£o) as respostas, resolvemos o problema.  Executamos o teste novamente, ele trava novamente ... Oh, caramba, esqueci de fechar o Docklight e reiniciar o servi√ßo.  Tudo parece n√£o ter erros.  Mas isso √© pelas pr√≥ximas duas horas, at√© que algo d√™ errado novamente.  E acredite, era necess√°rio resolver esses problemas com mais frequ√™ncia do que gostar√≠amos. <br></li></ul><br>  Bem, e claro, sobre quaisquer extens√µes, adicione.  n√£o pode haver nenhum recurso ou algo parecido - o produto est√° fechado e gravado por um longo tempo (parece que eles n√£o est√£o mais especialmente desenvolvidos), n√£o h√° personaliza√ß√£o. <br><br>  Bem, eu decidi fazer algo meu, mas corrigindo (ou melhorando) a situa√ß√£o com os problemas descritos. <br>  Aconteceu algo como o Zabbix, mas com nitidez para uma situa√ß√£o espec√≠fica. <br><br><h2>  Ent√£o qual √© a diferen√ßa? </h2><br>  Talvez fa√ßa sentido come√ßar com uma descri√ß√£o geral da arquitetura e depois entrar em detalhes. <br><br>  O esquema √© assim: <br><br><img src="https://habrastorage.org/webt/qi/hh/b-/qihhb-c1wgigm6yd1vb92vayzhm.png"><br><br>  Temos um agente que funciona na esta√ß√£o √† qual nossos dispositivos est√£o fisicamente conectados.  O Agent foi escrito em Python, portanto, funciona sem problemas no Windows, Linux e voc√™ pode finaliz√°-lo com seguran√ßa para uso no RaspberryPi e em dispositivos similares.  O programa √© extremamente pouco exigente para os recursos e muito est√°vel.  O agente est√° constantemente conectado atrav√©s do Websocket ao servidor (back-end) e recebe todas as configura√ß√µes de porta e seus par√¢metros a partir da√≠, durante a inicializa√ß√£o e durante as atualiza√ß√µes.  O agente possui sua pr√≥pria GUI para configura√ß√µes e monitoramento. Nesse caso (talvez a conex√£o tenha sido perdida, talvez a licen√ßa tenha expirado). <br><br><img src="https://habrastorage.org/webt/j0/-s/dl/j0-sdl9tw0wqkfltjf_btcxsr_k.png"><br><br>  Pr√≥ximo.  O servidor (tamb√©m conhecido como back-end) sai da janela de encaixe (e, portanto, simplesmente roda n√£o apenas na amazon ou no Google Cloud, mas tamb√©m em qualquer m√°quina n√£o t√£o poderosa em uma LAN com Linux a bordo).  Est√° escrito no Django em conjunto com o Redis (para suportar websockets).  Ele armazena todas as configura√ß√µes e fornece comunica√ß√£o entre a GUI do usu√°rio (apenas uma p√°gina escrita no ReactJS) e atrav√©s do Agent - com nossos dispositivos.  Comunica√ß√£o bidirecional, totalmente ass√≠ncrona.  Todas as configura√ß√µes s√£o armazenadas no Postgres e Mongo. <br><br>  Bem, e, talvez, a parte mais importante do sistema seja o pr√≥prio cliente (simplesmente, uma p√°gina em um navegador, escrita para o ReactJS para maior dinamismo). <br><br><img src="https://habrastorage.org/webt/ki/ck/lq/kicklqhbgajmtyevcyvh83myqxm.png"><br><br>  Sim, o design visual est√° longe de ser perfeito, mas isso √© corrig√≠vel. <br><br>  Bem, isso pode ser completado, acrescentarei apenas algumas palavras sobre o status do projeto e a demonstra√ß√£o. <br><br><ol><li>  Este √© um alfa bem cedo, projetado para demonstrar mais provavelmente poss√≠veis comodidades e verificar o n√≠vel de interesse. <br></li><li>  Reproduzir uma demonstra√ß√£o - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> <br>  Para fazer login <br>  nome de usu√°rio: operator_0 <br>  senha: 123456789 <br>  Selecionamos QA_Test e qualquer esta√ß√£o (esta √© apenas uma tentativa de simular a estrutura da empresa - as portas est√£o conectadas √†s esta√ß√µes, s√£o divididas em departamentos e cada escrit√≥rio tem sua pr√≥pria estrutura) <br></li></ol><br>  Em princ√≠pio, se houver interesse, adicionarei suporte para https e criarei assemblies do agente para diferentes plataformas, al√©m de adicionar todos os outros recursos. <br><br>  Ficarei feliz em receber coment√°rios e sugest√µes.  Cr√≠ticas s√£o bem-vindas! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440466/">https://habr.com/ru/post/pt440466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440454/index.html">Paul Graham: O que aprendi com o Hacker News</a></li>
<li><a href="../pt440458/index.html">Previs√£o do status da rede VoIP com base nos arquivos de log de texto do servidor de aplicativos SIP</a></li>
<li><a href="../pt440460/index.html">Como os sete modders Mount e Blade criaram um est√∫dio de jogos</a></li>
<li><a href="../pt440462/index.html">As 7 principais estrat√©gias de marketing de conte√∫do a n√£o perder em 2019</a></li>
<li><a href="../pt440464/index.html">Trabalhar com o servi√ßo Digital Ocean Managed Databases no .NET Core</a></li>
<li><a href="../pt440468/index.html">2 vezes mais, 10 vezes mais r√°pido, 24 horas por dia - tudo pelo bem das pessoas</a></li>
<li><a href="../pt440470/index.html">Incorporar um int√©rprete Python em um aplicativo java usando o projeto Panama</a></li>
<li><a href="../pt440472/index.html">Implementando modelos seq2seq no Tensorflow</a></li>
<li><a href="../pt440474/index.html">Efeitos de filtragem SVG. Parte 4. Imagens em duas cores com feComponentTransfer</a></li>
<li><a href="../pt440476/index.html">"Comece com mitaps", ou Voc√™ precisa de cursos de programa√ß√£o?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>