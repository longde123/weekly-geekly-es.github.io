<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ© ğŸ“Ÿ ğŸ‘¹ Bagaimana cara cepat memeriksa peringatan menarik yang diberikan oleh alat analisa PVS-Studio untuk kode C dan C ++? ğŸ¤·ğŸ¿ ğŸ¶ ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sesekali, programmer yang mulai berkenalan dengan alat analisa kode PVS-Studio bertanya kepada saya: "Apakah ada daftar peringatan yang secara akurat ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara cepat memeriksa peringatan menarik yang diberikan oleh alat analisa PVS-Studio untuk kode C dan C ++?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457330/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  Sesekali, programmer yang mulai berkenalan dengan alat analisa kode PVS-Studio bertanya kepada saya: "Apakah ada daftar peringatan yang secara akurat menunjukkan kesalahan?"  Tidak ada daftar seperti itu karena peringatan (salah) yang tidak menarik dalam satu proyek sangat penting dan bermanfaat di proyek lainnya.  Namun, orang pasti dapat mulai menggali ke dalam analisa dari peringatan yang paling menarik.  Mari kita lihat lebih dekat topik ini. <br><a name="habracut"></a><br>  Masalahnya, sebagai aturan, pada awalnya menjalankan seorang programmer tenggelam dalam sejumlah besar peringatan yang ia dapatkan.  Secara alami, dia ingin mulai meninjau peringatan yang paling menarik untuk memahami apakah dia harus menghabiskan waktu untuk menyelesaikan semua ini.  Bagus, jadi di sini ada tiga langkah sederhana yang akan membuatnya memeriksa peringatan paling menarik. <br><br><h2>  Langkah 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Nonaktifkan semua jenis peringatan kecuali yang umum (GA).  Kesalahan umum adalah mengaktifkan semua jenis peringatan.  Pengguna yang tidak berpengalaman berpikir bahwa semakin memungkinkan untuk diaktifkan, semakin baik.  Bukan itu masalahnya.  Ada set diagnostik, seperti pemeriksaan 64-bit dan aturan MISRA, yang seharusnya hanya digunakan ketika seseorang dengan jelas tahu apa yang mereka dan bagaimana bekerja dengannya.  Misalnya, dengan mengaktifkan diagnostik MISRA untuk program aplikasi biasa, Anda akan menenggelamkan puluhan, ribuan, atau ratusan ribu peringatan seperti: <ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V2506</a> .  Misra.  Suatu fungsi harus memiliki satu titik keluar di akhir. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V2507</a> .  Misra.  Isi pernyataan loop \ conditional harus dilampirkan dalam kurung kurawal. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V2523</a> .  Misra.  Semua konstanta integer dari tipe unsigned harus memiliki akhiran 'u' atau 'U'. </li></ul><br>  Sebagian besar peringatan MISRA menunjukkan bukan kesalahan, tetapi kode berbau.  Secara alami, seorang programmer mulai mengajukan pertanyaan.  Bagaimana Anda menemukan sesuatu yang menarik di tumpukan semua peringatan ini?  Nomor apa yang harus dia tonton?  Ini adalah pertanyaan yang salah.  Anda hanya perlu menonaktifkan set MISRA.  Ini adalah standar untuk menulis kode kualitas untuk perangkat yang disematkan.  Inti dari standar ini adalah membuat kode ini sangat sederhana dan mudah dipahami.  Jangan mencoba menerapkannya di tempat yang tidak pantas. <br><br>  Catatan  Ya, MISRA memiliki aturan yang dirancang untuk mengidentifikasi bug nyata.  Contoh: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V2538</a> - Nilai variabel tidak diinisialisasi tidak boleh digunakan.  Tetapi jangan takut untuk menonaktifkan standar MISRA.  Anda tidak akan kehilangan apapun.  Kesalahan nyata masih akan ditemukan sebagai bagian dari General Diagnostics (GA).  Misalnya, variabel tidak diinisialisasi akan ditemukan oleh diagnostik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V614</a> . <br><br><h2>  Langkah 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Setiap penganalisa statis mengeluarkan false positive pada putaran pertama dan membutuhkan beberapa konfigurasi.  Tidak ada yang bisa dilakukan tentang hal itu, tetapi tidak seseram kelihatannya.  Bahkan pengaturan cepat sederhana memungkinkan Anda untuk menghapus sebagian besar kesalahan positif dan mulai melihat laporan yang cukup relevan.  Saya tidak akan membicarakannya lagi, seperti yang telah saya tulis berkali-kali, misalnya, dalam artikel ini: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Karakteristik PVS-Studio Analyzer dengan Contoh EFL Core Libraries, 10-15% False Positive</a> ". <br><br>  Luangkan sedikit waktu untuk menonaktifkan peringatan yang jelas tidak relevan dan berperang melawan positif palsu yang terkait dengan makro.  Secara umum, makro adalah alasan utama false positive, karena peringatan muncul dalam semua kasus ketika makro yang diimplementasikan dengan buruk digunakan.  Untuk menekan peringatan di makro, Anda dapat menulis komentar dari tipe khusus di sebelah deklarasi mereka.  Semakin banyak format komentar tercakup dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> . <br><br>  Ya, pengaturan awal akan membutuhkan sedikit waktu, tetapi secara drastis akan meningkatkan persepsi laporan dengan menghilangkan kebisingan yang mengganggu.  Luangkan waktu untuk melakukannya.  Jika ada kesulitan atau pertanyaan, kami selalu siap membantu dan memberi tahu Anda cara mengatur analisa dengan cara terbaik.  Jangan ragu untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menulis</a> dan mengajukan pertanyaan kepada kami. <br><br><h2>  Langkah 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Mulai melihat peringatan dari Level 1. Hanya setelah itu menonton 2 dan 3. Level peringatan tidak lebih dari kebenaran suatu peringatan.  Peringatan Level 1 lebih cenderung mengindikasikan kesalahan aktual daripada peringatan Level 2. <br><br>  Anda dapat mengatakan, ketika Anda memilih untuk "menonton Level 1," Anda menekan tombol "menonton kesalahan paling menarik". <br><br>  Secara lebih rinci, klasifikasi peringatan PVS-Studio berdasarkan level dijelaskan dalam artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cara analis statis melawan positif palsu, dan mengapa mereka melakukannya</a> ". <br><br><h2>  Jadi mengapa tidak ada daftar? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Namun, gagasan memiliki daftar peringatan paling berguna mungkin masih masuk akal.  Izinkan saya menunjukkan kepada Anda dalam contoh praktis bahwa kegunaan diagnostik relatif dan tergantung pada proyek. <br><br>  Mari kita perhatikan peringatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V550</a> .  Peringatan mendeteksi kesalahan potensial yang terkait dengan fakta bahwa untuk membandingkan angka dengan floating-point operator == atau! = Digunakan. <br><br>  Sebagian besar pengembang yang saya ajak bicara, berpikir bahwa diagnostik ini tidak berguna dan mereka menonaktifkannya karena semua pemicunya untuk proyek mereka salah.  Karena itulah diagnostik ini memiliki tingkat kepastian yang rendah dan terkait dengan Tingkat 3. <br><br>  Memang, di sebagian besar aplikasi, tipe float / double digunakan dalam algoritma yang sangat sederhana.  Seringkali perbandingan dengan konstanta digunakan semata-mata untuk memeriksa apakah nilai tertentu diatur secara default, atau apakah telah berubah.  Dalam hal ini, pemeriksaan yang tepat cukup tepat.  Saya akan menjelaskannya dengan pseudo-code. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Di sini perbandingan <i>(nilai 1.0f)</i> benar dan aman. <br><br>  Apakah ini berarti diagnostik V550 tidak menarik?  Tidak.  Itu semua tergantung pada proyek.  Izinkan saya mengutip cuplikan dari artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana Kami Mencoba Analisis Statis pada Proyek Simulator Pelatihan Bedah Endovaskular X-Ray Kami</a> ", yang ditulis oleh pengguna kami. <br><br>  Jadi, apa analisa statis kami memperhatikan di sini: <br><br>  V550 Perbandingan presisi yang aneh: t! = 0. Mungkin lebih baik menggunakan perbandingan dengan presisi yang ditentukan: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  Kesalahan seperti itu cukup sering berulang di perpustakaan ini.  Saya tidak bisa mengatakan itu mengejutkan saya.  Sebelumnya, saya telah menemukan penanganan angka yang salah dengan titik mengambang di proyek ini.  Namun, tidak ada sumber daya untuk memverifikasi sumber secara sistematis.  Sebagai hasil dari pemeriksaan, menjadi jelas bahwa pengembang perlu memberikan sesuatu untuk memperluas wawasannya dalam hal bekerja dengan angka floating point.  Dia telah dikaitkan dengan beberapa artikel bagus.  Kita akan lihat bagaimana hasilnya nanti.  Sulit untuk mengatakan dengan pasti apakah kesalahan ini menyebabkan gangguan nyata dalam program.  Solusi saat ini memperlihatkan sejumlah persyaratan untuk mesh poligonal asli dari arteri, yang mensimulasikan penyebaran materi kontras sinar-X.  Jika persyaratan tidak terpenuhi, program mungkin jatuh, atau pekerjaan itu jelas salah.  Beberapa persyaratan ini diperoleh secara analitis, dan beberapa - secara empiris.  Ada kemungkinan bahwa kelompok persyaratan empiris ini bertambah hanya karena penanganan angka yang salah dengan titik mengambang.  Perlu dicatat bahwa tidak semua kasus yang ditemukan menggunakan perbandingan angka yang tepat dengan floating point adalah kesalahan. <br><br>  Seperti yang Anda lihat, apa yang tidak menarik dalam beberapa proyek menarik bagi yang lain.  Ini membuat tidak mungkin membuat daftar yang "paling menarik". <br><br>  Catatan  Anda juga dapat mengatur tingkat peringatan menggunakan pengaturan.  Misalnya, jika Anda berpikir bahwa diagnostik V550 layak mendapat perhatian, Anda dapat memindahkannya dari Level 3 ke 1.  Jenis pengaturan ini dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> (lihat "Cara Mengatur Level Anda untuk Diagnostik Khusus"). <br><br><h2>  Kesimpulan </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br>  Sekarang Anda tahu cara mulai mempelajari peringatan penganalisa dengan melihat yang paling menarik.  Dan jangan lupa untuk melihat dokumentasi untuk mendapatkan deskripsi rinci tentang peringatan.  Kadang-kadang terjadi bahwa di balik naskah yang tidak mencolok, pada pandangan pertama, peringatan adalah neraka.  Contoh diagnostik tersebut: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V1026</a> .  Terima kasih atas perhatian anda </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457330/">https://habr.com/ru/post/id457330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457312/index.html">Pengantar Teori Set</a></li>
<li><a href="../id457316/index.html">Bagaimana permainan peran di dunia nyata diatur untuk tamu-tamu Armenia dengan perjalanan sekitar setengah dari negara</a></li>
<li><a href="../id457324/index.html">Acara digital di Moskow dari 24 hingga 30 Juni</a></li>
<li><a href="../id457326/index.html">Failover Cluster PostgreSQL + Patroni. Pengalaman Implementasi</a></li>
<li><a href="../id457328/index.html">Kategori bukan direktori, atau sistem file Semantic untuk Linux</a></li>
<li><a href="../id457332/index.html">Bagaimana cara cepat melihat peringatan menarik yang dihasilkan oleh alat analisa PVS-Studio untuk kode C dan C ++?</a></li>
<li><a href="../id457334/index.html">TacacsGUI, Manajer Konfigurasi</a></li>
<li><a href="../id457336/index.html">Konsekuensi dari pencabutan gigi bungsu sebelum waktunya</a></li>
<li><a href="../id457338/index.html">Blitz dengan Ilya Krasinsky: bagaimana cara menembak hipotesis buruk, mengapa mengabaikan suatu produk dan bagaimana tumbuh untuk tindakan minimum?</a></li>
<li><a href="../id457340/index.html">10 plugin PostCSS yang akan menghemat waktu tata letak Anda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>