<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòó ‚å®Ô∏è üê® Programa√ß√£o funcional do ponto de vista do EcmaScript. Fun√ß√µes puras, lambdas, imunidade üâê üë®‚Äçüöí üòö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 Hoje come√ßaremos a falar sobre um t√≥pico muito importante - programa√ß√£o funcional. √â dif√≠cil superestimar a import√¢ncia do FP no desenvol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programa√ß√£o funcional do ponto de vista do EcmaScript. Fun√ß√µes puras, lambdas, imunidade</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474702/"> Ol√° Habr! <br><br>  Hoje come√ßaremos a falar sobre um t√≥pico muito importante - programa√ß√£o funcional.  √â dif√≠cil superestimar a import√¢ncia do FP no desenvolvimento moderno da web.  A arquitetura de qualquer grande projeto moderno inclui bibliotecas de fun√ß√µes definidas pelo usu√°rio, e haver√° perguntas obrigat√≥rias sobre o assunto das entrevistas em qualquer n√≠vel. <br><br><h2>  Introdu√ß√£o √† Programa√ß√£o Funcional </h2><br>  <b>A programa√ß√£o funcional (FP)</b> √© uma maneira de organizar o c√≥digo escrevendo um conjunto de fun√ß√µes. <br><br>  O EcmaScript, sendo uma linguagem de programa√ß√£o multiparadigma, implementa, entre outros, um paradigma funcional.  Isso significa que as fun√ß√µes no ES s√£o dados e podem ser passadas para fun√ß√µes, retornadas de fun√ß√µes e podem aceitar as pr√≥prias fun√ß√µes.  I.e.  fun√ß√µes no ES s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes de primeira classe</a> . <br><br>  As seguintes defini√ß√µes seguem a seguir: <br><br>  <b>Argumento funcional (funarg)</b> - um argumento cujo valor √© uma fun√ß√£o. <br><br>  <b>Uma fun√ß√£o de ordem superior (FWP, fun√ß√£o de ordem superior, hof)</b> √© uma fun√ß√£o que aceita fun√ß√µes como argumentos. <br><br>  <b>Fun√ß√µes com um valor funcional (fun√ß√µes com valor de fun√ß√£o)</b> - uma fun√ß√£o que retorna uma fun√ß√£o. <br><br>  Todos esses tipos de fun√ß√µes s√£o combinados condicionalmente em fun√ß√µes da primeira classe e, como segue a defini√ß√£o acima, no ES todas as fun√ß√µes s√£o objetos da primeira classe. <br><a name="habracut"></a><br><h3>  Fun√ß√µes puras - o ideal de programa√ß√£o funcional </h3><br>  <b>Fun√ß√µes puras (PF)</b> - sempre retornam um resultado previsto. <br>  Propriedades PF <br><br><ul><li>  O resultado da execu√ß√£o do PF depende apenas dos argumentos passados ‚Äã‚Äãe do algoritmo que implementa o PF </li><li>  N√£o use valores globais </li><li>  N√£o modifique valores externos ou argumentos passados </li><li>  N√£o grave dados em arquivos, bancos de dados ou em qualquer outro lugar </li></ul><br>  Um exemplo de uma fun√ß√£o pura: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> add = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x,y</span></span></span><span class="hljs-function">) =&gt;</span></span> x+y;</code> </pre> <br>  Um bom exemplo de impureza da fun√ß√£o √©: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> first; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> second; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">10</span></span>; first = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ++a; } second = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> --a; } a = <span class="hljs-number"><span class="hljs-number">2</span></span>; first();<span class="hljs-comment"><span class="hljs-comment">//3 } testFn(); first();//4 second();//3</span></span></code> </pre><br>  Imagine como √© complicado escrever testes para este exemplo e o quanto isso simplifica para fun√ß√µes puras! <br><br>  As fun√ß√µes impuras s√£o caracterizadas por um estado externo vari√°vel no tempo que complica a manuten√ß√£o, a compreens√£o e o teste do c√≥digo. <br><br>  Pelo contr√°rio, fun√ß√µes puras s√£o sempre leg√≠veis, test√°veis, simplificam a paraleliza√ß√£o de c√°lculos e s√£o f√°ceis de reutilizar. <br><br>  Acho que voc√™ notou que nos exemplos de fun√ß√µes puras, mudei para a sintaxe ES6.  Isso foi feito deliberadamente.  Essa sintaxe da fun√ß√£o √© chamada de "fun√ß√µes da seta", mas na verdade √© uma implementa√ß√£o da abstra√ß√£o matem√°tica, inventada h√° muito tempo.  Sobre isso mais. <br><br><h3>  Lambda - fun√ß√µes </h3><br>  √â assim que essa forma de escrita em seta √© chamada em matem√°tica e em algumas outras linguagens de programa√ß√£o.  A programa√ß√£o funcional est√° intimamente relacionada ao mat.  an√°lise, por isso n√£o se surpreenda. <br><br>  O termo c√°lculo Lambda foi introduzido nos anos 30 pela Igreja Alonzo.  Em ess√™ncia, o c√°lculo lambda nada mais √© do que uma forma formal de descrever uma equa√ß√£o matem√°tica.  Mais detalhes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  No ES, uma fun√ß√£o lambda frequentemente implementa um fechamento: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> add = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> y =&gt; x + y;</code> </pre><br>  Curto e conciso.  A fun√ß√£o add √© uma lambda que recebe um argumento x, armazena-o em um fechamento e retorna uma fun√ß√£o. <br><br>  Compare com este c√≥digo: <br><br><pre> <code class="javascript hljs">funtion add(x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; } }</code> </pre><br>  Obviamente, a primeira op√ß√£o parece melhor. <br><br><h3>  Imunidade </h3><br>  <b>Imut√°vel (imut√°vel, imunidade)</b> √© um objeto cujo estado n√£o pode ser alterado ap√≥s a cria√ß√£o.  O resultado de qualquer modifica√ß√£o de um objeto desse tipo sempre ser√° um novo objeto, enquanto o objeto antigo n√£o ser√° alterado. <br><br>  A imutabilidade √© o graal de ouro da programa√ß√£o funcional. <br><br>  Considere um exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> impureAddProp = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value, object</span></span></span><span class="hljs-function">) =&gt;</span></span> { object[key] = value;<span class="hljs-comment"><span class="hljs-comment">//   }; const User= { name: 'Alex' }; impureAddProp ('isAdmin', true, User);</span></span></code> </pre><br>  Como voc√™ pode ver, neste exemplo, modificamos o objeto User adicionando uma propriedade a ele.  Agora, o objeto Usu√°rio √© um tipo de "estado compartilhado" para a fun√ß√£o impureAddProp e outras fun√ß√µes que o modificar√£o.  Essa abordagem √© mais dif√≠cil de testar porque  Ao alterar qualquer fun√ß√£o que interaja com um estado compartilhado, deve-se sempre ter em mente poss√≠veis erros em outras fun√ß√µes. <br><br>  Do ponto de vista da programa√ß√£o funcional, seria correto: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pureAddProp = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value, object</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ ...object, [key]: value }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> User= { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Alex'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Admin= pureAddProp (<span class="hljs-string"><span class="hljs-string">'isAdmin'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, User);</code> </pre><br>  Portanto, o objeto Usu√°rio permanecer√° inalterado.  Estamos modificando uma c√≥pia dos dados, o que √© sempre seguro. <br><br><h2>  Conclus√£o </h2><br>  Hoje examinamos v√°rios conceitos te√≥ricos importantes.  N√≥s nos familiarizamos com fun√ß√µes puras, a forma lambda de fun√ß√µes de grava√ß√£o e o conceito de imutabilidade em fp.  No entanto, este artigo √© um tipo de introdu√ß√£o.  As principais id√©ias, t√©cnicas e "partes dif√≠ceis" da programa√ß√£o funcional estar√£o nos seguintes artigos. <br><br>  A programa√ß√£o funcional √© implementada por muitas bibliotecas.  Isso √© rambda, e lodash, e muitos outros.  Em um projeto real, √© claro que voc√™ os usar√°.  Sob o cap√¥ de qualquer biblioteca, ainda haver√° o mesmo javascript nativo; portanto, nos artigos a seguir analisaremos o FP, implementando todos os seus conceitos no JS nativo. <br><br><h2>  Postscript </h2><br>  Come√ßando a escrever artigos, eu tinha em mente o seguinte plano: <br><br><ul><li>  escreva tradu√ß√µes de artigos interessantes em ingl√™s </li><li>  destacar v√°rias √°reas relevantes em JS (conceitos-chave, OOP em termos de especifica√ß√µes EcmaScript, padr√µes, programa√ß√£o funcional). </li></ul><br>  At√© o momento, os artigos principais em tr√™s √°reas j√° foram escritos: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">this e ScopeChain no EcmaScript</a> - aqui descrevi conceitos-chave da especifica√ß√£o como o contexto de execu√ß√£o, a palavra-chave this e a propriedade de contexto ScopeChain (cadeia de escopo).  No contexto dessa dire√ß√£o, meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> sobre o ambiente e fechamento Lexical foi publicado literalmente hoje. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma an√°lise do EcmaScript sobre a teoria geral da OOP</a> - aqui foi descrita a diferen√ßa entre tipagem de classe est√°tica e organiza√ß√£o din√¢mica de prot√≥tipos, o modelo de delega√ß√£o e a tipagem de pato foram desmontados </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Padr√µes elegantes no JavaScript moderno (s√©rie de compila√ß√£o Bill Sourour no ciclo)</a> - aqui est√£o dois padr√µes que podem ser √∫teis em algumas situa√ß√µes.  Minha abordagem em termos de padr√µes √© bastante simples: √© melhor conhecer o maior n√∫mero poss√≠vel de padr√µes, porque  mais cedo ou mais tarde, ser√° √∫til </li></ol><br>  E agora √© a vez da programa√ß√£o funcional.  No futuro, escreverei artigos na continua√ß√£o de cada uma dessas √°reas.  Por exemplo, o artigo a seguir ser√° sobre os principais conceitos de OOP: encapsulamento, abstra√ß√£o, impurezas (e tra√ßos), interfaces, etc. ... tamb√©m planejo falar sobre como o OOP no ES √© implementado sob o cap√¥, ou seja,  sobre as propriedades de [[Prototype]], [[Class]] e muito mais.  Fale sobre como a v8 cria entidades e inst√¢ncias de classes, fun√ß√µes. <br><br>  Muitas perguntas surgem nos coment√°rios, ent√£o eu gostaria de explicar as metas que estabeleci para meus artigos.  N√£o escrevo tutoriais nem revisto a documenta√ß√£o.  Na minha opini√£o, isso n√£o faz sentido.  Eu n√£o aconselho voc√™ com certos instrumentos ou padr√µes, a escolha deles √© inteiramente sua. <br><br>  Nos artigos, reviso os conceitos, digo como eles est√£o organizados sob o cap√¥ (na minha opini√£o, isso melhora a compreens√£o do que escrevemos e por que escrevemos dessa maneira), ou falo sobre algumas coisas que ampliam meus horizontes.  Na minha opini√£o, isso √© muito importante.  D√™ uma olhada em empresas como Yandex ou Edadil, elas constantemente falam sobre algum tipo de id√©ias originais.  Esses s√£o bitmaps na rea√ß√£o, ent√£o o aplicativo vue est√° quase completamente nas classes es6.  A maioria dos desenvolvedores da web nunca teria pensado nisso.  Isso requer uma vis√£o ampla. <br><br>  Eu mesmo estudei e estudei a Web dessa maneira, ou seja,  Depois de ler um tutorial ou uma doca, tento entender como a ferramenta descrita funciona sob o cap√¥, para entender sua mec√¢nica interna. <br><br>  At√© artigos futuros, amigos! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt474702/">https://habr.com/ru/post/pt474702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt474692/index.html">Revis√£o Skaffold para Kubernetes Development</a></li>
<li><a href="../pt474694/index.html">Como selecionamos e distorcemos a estrutura para teste de desempenho</a></li>
<li><a href="../pt474696/index.html">Bilhete de petr√≥leo ou Rosneft para o Desafio S√≠smico</a></li>
<li><a href="../pt474698/index.html">Usando janelas modais em interfaces com o usu√°rio</a></li>
<li><a href="../pt474700/index.html">Nuvem Smart Home. Parte 2: Servi√ßo em nuvem</a></li>
<li><a href="../pt474704/index.html">Entrevista Playboy: Steve Jobs, Parte 2</a></li>
<li><a href="../pt474706/index.html">Algoritmo de Pesquisa Difusa do TextRadar - Abordagens b√°sicas</a></li>
<li><a href="../pt474708/index.html">A Internet est√° mais fragmentada do que nunca: de onde v√™m mais de um milh√£o de novos usu√°rios diariamente? Parte 1</a></li>
<li><a href="../pt474710/index.html">c.tech: Frontend Meetup # 2</a></li>
<li><a href="../pt474712/index.html">Udalenka em TI: experi√™ncia pessoal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>