<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐 💛 🈶 Notifications push sécurisées: de la théorie à la pratique 🏴󠁧󠁢󠁥󠁮󠁧󠁿 👩🏾‍🌾 🤳🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Aujourd'hui, je vais parler de ce que mes collègues et moi faisons depuis plusieurs mois: les notifications push pour les messagerie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Notifications push sécurisées: de la théorie à la pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456902/">  Bonjour, Habr! <br><br>  Aujourd'hui, je vais parler de ce que mes collègues et moi faisons depuis plusieurs mois: les notifications push pour les messageries instantanées mobiles.  Comme je l'ai dit, dans notre demande, l'accent est mis sur la sécurité.  Par conséquent, nous avons découvert si les notifications push présentent des «faiblesses» et, dans l'affirmative, comment pouvons-nous les mettre à niveau afin d'ajouter cette option utile à notre service. <br><br>  Je publie une traduction de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article avec Medium</a> avec quelques ajouts de moi-même.  Il contient les résultats de «l'enquête» et une histoire sur la façon dont le problème a été résolu. <br><br><h2>  Explorez le matériel </h2><br>  Dans le modèle classique, les notifications push rendent les messagers vulnérables aux attaques MITM (Man-in-the-middle, Man in the Middle).  Par exemple, avec Google, Microsoft et dans l'ancienne version d'iMessage, l'application envoie des clés de chiffrement aux serveurs Apple - les utilisateurs sont authentifiés sur le serveur et l'en-tête du message (ou son contenu) est déchiffré. <br><br><img src="https://habrastorage.org/webt/x3/tk/qk/x3tkqkg9njh3uigx5-xuaytkqqs.png"><br><br>  Par conséquent, il est possible de lire la correspondance en accédant au serveur de notifications push.  Et cela signifie que tout cryptage de la correspondance est inutile: les notifications push laisseront toujours une possibilité de lecture par des tiers.  Les auteurs de l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Encrypt Wisely»</a> sur Xaker.ru, consacré aux méthodes de chiffrement des messages, ont discuté de cette possibilité plus en détail. <br><br>  Si vous pensez qu'Apple et les serveurs de Google ne permettront pas une fuite à 100% des clés de chiffrement des utilisateurs, pensez que leurs employés y ont accès.  Et les employés sont des gens. <br>  Avec toutes les vulnérabilités du push, de nombreux messagers "sûrs", dont Signal et Telegram, les utilisent.  Sinon, les utilisateurs devront surveiller "manuellement" les nouveaux messages en entrant constamment dans l'application.  Ce qui est très gênant, et les messagers concurrents bénéficieront d'un avantage. <br><br><h2>  Paranoïa et bon sens </h2><a name="habracut"></a><br>  Dans notre projet, nous avons abordé ce problème il y a plusieurs mois.  Nous devions faire des notifications push une option pour être compétitif.  Mais en même temps, ne faites pas de trou dans la sécurité, car toute fuite de données saperait la crédibilité du projet. <br><br>  Cependant, nous avons déjà un avantage important: notre messager est décentralisé (les données sont stockées sur la blockchain), tandis que les employés n'ont pas accès aux comptes.  Seuls les utilisateurs ont des clés de chiffrement et les clés publiques de l'interlocuteur sont disponibles sur la blockchain pour se protéger contre les attaques MITM. <br><br>  Dans la première version du push, nous avons décidé de jouer le plus prudemment possible et de ne pas transmettre du tout le texte du message.  Le service push reçu du nœud n'est pas le texte du message, mais seulement un signal sur le fait de sa réception.  Par conséquent, l'utilisateur a vu la notification «Un nouveau message est arrivé».  Il était possible de le lire uniquement dans le messager. <br><br><img src="https://habrastorage.org/webt/rb/nt/pq/rbntpqxwckdv65t1vj8cvgry_d8.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment ça a marché: vidéo</a> . <br><br>  Après cela, nous avons appris que la dernière version des notifications d'Apple a de nouvelles fonctionnalités de sécurité.  Ils ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publié l'</a> UNNotificationServiceExtension, qui permet aux développeurs d'envoyer des données de notification entièrement cryptées via APNS.  Ensuite, l'application sur l'appareil de l'utilisateur final déchiffre (ou télécharge des données supplémentaires) et affiche une notification.  Nous l'avons pris comme base de la deuxième version du push. <br><br>  Nous avons maintenant développé la deuxième version des notifications push pour iOS, qui vous permet d'afficher le texte des messages sans risque pour la sécurité.  Dans le nouveau concept, la logique ressemble à ceci: <br><br><ul><li>  Le service push envoie une notification push avec un numéro de transaction (le message crypté peut être très volumineux et la taille des notifications est très limitée) </li><li>  Dès réception d'une notification, l'appareil démarre notre NotificationServiceExtension - une micro-application qui demande une transaction au nœud par identifiant, la déchiffre à l'aide de la phrase secrète enregistrée et donne au système une nouvelle notification.  La phrase secrète est stockée dans un entrepôt sécurisé. </li><li>  Le système affiche une notification avec un message déchiffré ou une traduction. </li><li>  Les touches ne vont nulle part, tout comme un message en texte brut.  Le service push n'a pas la capacité de décrypter le message. </li></ul><br><img src="https://habrastorage.org/webt/ov/6b/vm/ov6bvmzcuxsss8msqe10gktynri.jpeg"><br><br>  Nous avons pris cette version comme fonctionnelle et l'avons implémentée dans la dernière mise à jour de l'application iOS. <br>  Les personnes intéressées par le côté technique peuvent voir le code source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/Adamant-im/adamant-notificationService</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456902/">https://habr.com/ru/post/fr456902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456890/index.html">Télécommande IR sur stm32</a></li>
<li><a href="../fr456892/index.html">Comment rechercher les vulnérabilités des applications Web: comparer huit scanners populaires</a></li>
<li><a href="../fr456894/index.html">Docker et authentification via Nginx</a></li>
<li><a href="../fr456896/index.html">Identification des adresses IP réelles des utilisateurs du réseau Tor via un cache déformé</a></li>
<li><a href="../fr456898/index.html">Multiplication rapide d'entiers à l'aide de tables</a></li>
<li><a href="../fr456904/index.html">Test de charge d'un projet Web - pas d'argent</a></li>
<li><a href="../fr456908/index.html">Comment Telegram vous fusionne avec Rostelecom</a></li>
<li><a href="../fr456910/index.html">Internet project security.txt - apprendre à connaître un autre fichier bien connu</a></li>
<li><a href="../fr456912/index.html">Comment créer des sites en 2019</a></li>
<li><a href="../fr456920/index.html">Sony Xperia 1 en Russie - prix et bonus de précommande</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>