<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèΩ üë©üèΩ‚Äçüåæ üéΩ UDB. O que √© isso? Parte 2. Caminho de Dados üé≥ ü¶å üë®üèΩ‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a considerar o UDB com base na documenta√ß√£o do Cypress. E desta vez estudaremos detalhadamente o Datapath, um aut√¥mato operacional. 

 O c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. O que √© isso? Parte 2. Caminho de Dados</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433018/"><img src="https://habrastorage.org/webt/g_/al/i6/g_ali6vm2tdujirqgof2slfxnmk.jpeg"><br><br>  Continuamos a considerar o UDB com base na documenta√ß√£o do Cypress.  E desta vez estudaremos detalhadamente o Datapath, um aut√¥mato operacional. <br><a name="habracut"></a><br>  O conte√∫do geral do ciclo ‚ÄúUDB.  O que √© isso? " <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1. Introdu√ß√£o.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pld.</a> <br>  Parte 2. Datapath.  (Artigo atual) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3. Datapath FIFO.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 4. Datapath ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 5. Caminho de Dados.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pequenas coisas √∫teis.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 6. M√≥dulo de gerenciamento e status.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 7. M√≥dulo de controle de tempo e redefini√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 8. Endere√ßando UDB</a> <br><br><h3>  21.3.2 M√°quina operacional (Datapath) </h3><br>  O caminho de dados mostrado na Figura 21-6 cont√©m uma ALU de ciclo √∫nico de 8 bits e sua compara√ß√£o e gera√ß√£o associadas de sinalizadores de condi√ß√£o.  Blocos de caminho de dados de UDBs vizinhos podem ser encadeados para aumentar a profundidade de bits.  O Datapath inclui uma pequena RAM de configura√ß√£o din√¢mica que pode selecionar dinamicamente a opera√ß√£o a ser executada em um ciclo espec√≠fico. <br><br>  O Datapath √© otimizado para implementar fun√ß√µes incorporadas t√≠picas, como temporizadores, contadores, PWMs, PRS, CRC, registradores de turnos e geradores de banda morta.  A adi√ß√£o de fun√ß√µes de adi√ß√£o e subtra√ß√£o fornece suporte para opera√ß√µes delta-sigma digitais. <br><br><img src="https://habrastorage.org/webt/p3/qf/tw/p3qftwvnkiyvec-lgkvod-2y7va.png"><br>  Figura 21-6.  Datapath de n√≠vel superior. <br><br><h3>  21.3.2.1 Vis√£o geral </h3><br>  Os cap√≠tulos a seguir fornecem uma vis√£o geral dos principais recursos do Datapath. <br><br>  <b>Configura√ß√£o din√¢mica</b> <br><br>  Configura√ß√£o din√¢mica - a capacidade de alterar o trabalho e as comunica√ß√µes internas do Datapath em cada ciclo, sob o controle de um seq√ºenciador.  Isso √© implementado usando a mem√≥ria de configura√ß√£o (RAM de configura√ß√£o), que armazena oito configura√ß√µes exclusivas.  O endere√ßo de entrada dessa mem√≥ria pode ser encaminhado a partir de qualquer bloco conectado aos recursos de rastreio, geralmente da l√≥gica PLD, pinos de E / S ou de outros Datapaths. <br><br>  <b>Alu</b> <br><br>  A ALU pode executar oito fun√ß√µes de uso geral: incrementar, diminuir, adicionar, subtrair e tamb√©m executar opera√ß√µes l√≥gicas AND, OR, XOR e PASS.  A escolha das fun√ß√µes √© determinada pela mem√≥ria de configura√ß√£o para cada ciclo.  Opera√ß√µes de mudan√ßa independentes (esquerda, direita, permuta√ß√£o de mordidelas), bem como opera√ß√µes de mascaramento est√£o dispon√≠veis na sa√≠da da ALU. <br><br>  <b>Constru√ß√µes Condicionais</b> <br><br>  Cada Datapath possui dois comparadores mascarados em bits que podem ser configurados para selecionar v√°rias entradas de registro do Datapath como argumentos.  Outras condi√ß√µes identific√°veis ‚Äã‚Äãpodem ser todos os zeros, todos os e transbordamento.  Essas condi√ß√µes formam as principais sa√≠das do Datapath e podem ser encaminhadas para linhas de rastreio digital ou entradas de outras fun√ß√µes. <br><br>  <b>CRC / PRS incorporado</b> <br><br>  O Datapath possui suporte interno para c√°lculos de CRC de ciclo √∫nico e a gera√ß√£o de sequ√™ncias pseudo-aleat√≥rias (Sequ√™ncia pseudo-aleat√≥ria em ingl√™s, PRS) com uma profundidade de bits especificada e um polin√¥mio gerador.  Para atingir uma profundidade de bits de mais de 8 bits, os sinais podem ser encadeados entre o Datapath.  Esse recurso √© controlado dinamicamente, o que significa que ele pode alternar com outras fun√ß√µes. <br><br>  <b>N√∫mero de bits alto personalizado</b> <br><br>  O n√∫mero do bit mais significativo (English Most Significant Bit, MSB) da fun√ß√£o aritm√©tica e da fun√ß√£o shift pode ser definido programaticamente.  Isso fornece suporte para fun√ß√µes CRC / PRS de comprimento vari√°vel e, em conjunto com a m√°scara da sa√≠da da ALU, permite a implementa√ß√£o de temporizadores de comprimentos arbitr√°rios, contadores e blocos de turnos. <br><br>  <b>Buffers de entrada / sa√≠da FIFO</b> <br><br>  Cada Datapath possui dois buffers FIFO de 4 bytes, cada um dos quais pode ser configurado para funcionar como um buffer de entrada (CPU ou DMA grava dados no FIFO, Datapath l√™ FIFO) ou como um buffer de sa√≠da (Datapath grava no FIFO e CPU ou DMA l√™ a partir dele).  Esses buffers FIFO geram status que podem ser encaminhados para interagir com sequenciadores, interrup√ß√µes ou solicita√ß√µes de DMA. <br><br>  <b>Encadeamento</b> <br><br>  O Datapath pode ser configurado para encadear condi√ß√µes e sinais em uma cadeia para os Datapaths vizinhos.  Mudan√ßa, transfer√™ncia, captura e outros sinais condicionais podem ser combinados em cadeias para criar fun√ß√µes aritm√©ticas de maior profundidade de bits, bem como fun√ß√µes de mudan√ßa e fun√ß√µes CRC / PRS. <br><br>  <b>Multiplexa√ß√£o de tempo</b> <br><br>  Em aplicativos de superamostragem ou em que altas velocidades de clock n√£o s√£o necess√°rias, uma ALU no Datapath pode ser efetivamente dividida entre dois conjuntos de registradores e geradores de condi√ß√£o.  As sa√≠das da ULA e do registro de deslocamento s√£o travadas e podem ser usadas como entrada nos ciclos subsequentes.  Exemplos de uso incluem suporte para fun√ß√µes de 16 bits em um Datapath (8 bits) ou opera√ß√µes de gera√ß√£o de CRC alternadas com opera√ß√µes de troca de dados. <br><br>  <b>Entradas do Datapath</b> <br><br>  O Datapath possui quatro tipos de entradas: configura√ß√£o, controle e entradas de dados (serial e paralela).  As entradas de configura√ß√£o selecionam o endere√ßo de RAM da configura√ß√£o din√¢mica.  As entradas de controle carregam os registros de dados do FIFO e baixam a sa√≠da da bateria para o FIFO.  As entradas de dados seriais incluem entradas de deslocamento e transporte.  A porta de entrada de dados paralela permite receber at√© 8 bits de dados dos recursos de rastreamento. <br><br>  <b>Sa√≠das do Datapath</b> <br><br>  No total, existem 16 sinais gerados no Datapath.  Alguns deles s√£o sinais condicionais (por exemplo, compara√ß√µes), outros s√£o sinais de status (por exemplo, status FIFO) e o restante s√£o sinais de dados (por exemplo, sa√≠da do registro de deslocamento).  Esses 16 sinais s√£o multiplexados em 6 sa√≠das do Datapath e roteados para a matriz de rastreamento.  Por padr√£o, as sa√≠das s√£o sincronizadas com a frequ√™ncia do rel√≥gio, o que cria um pipelining com um atraso de 1 ciclo de rel√≥gio.  Al√©m disso, suas (sa√≠das) podem ser alteradas para o modo ass√≠ncrono (combinat√≥rio) (consulte as notas do tradutor). <br><br>  <b><i>Nota do tradutor</i></b> <br><br>  <i>Pesquisei por um longo tempo sobre qual √© o tempo das sa√≠das do Datapath.</i>  <i>Minha experi√™ncia disse que tudo est√° l√° de forma ass√≠ncrona.</i>  <i>Verificou-se que esse n√£o √© o estado das sa√≠das, mas sim a configura√ß√£o do editor para vari√°veis ‚Äã‚Äãcom base nelas.</i> <br><br><img src="https://habrastorage.org/webt/zy/il/bn/zyilbndbqdrrsga9y-i0nnry_kc.png"><br><br>  <i>Isso for√ßar√° o editor a gerar o seguinte c√≥digo Verilog:</i> <br><pre><code class="plaintext hljs">/* ==================== Assignment of Registered Variables ==================== */ always @ (posedge clock) begin : register_assignments var1 &lt;= (decr_finished); end</code> </pre> <br>  <i>Se voc√™ alternar para o modo combinat√≥rio</i> <br><br><img src="https://habrastorage.org/webt/bs/ax/q_/bsaxq_yb5ui9zfsoojlqha7jtqc.png"><br><br>  <i>o c√≥digo ficar√° assim:</i> <br><br><pre> <code class="plaintext hljs">assign var1 = (decr_finished);</code> </pre><br>  <i>Mas tudo isso se aplica a vari√°veis ‚Äã‚Äãgeradas a partir de sa√≠das do Datapath.</i>  <i>E as pr√≥prias sa√≠das s√£o sempre ass√≠ncronas.</i>  <i>E seus nomes (neste exemplo, <b>decr_finished</b> ) podem ser usados ‚Äã‚Äãsem inserir vari√°veis ‚Äã‚Äãadicionais.</i> <br><br>  <b>Registros de trabalho do Datapath</b> <br><br>  Cada m√≥dulo do Datapath possui seis registros de trabalho de 8 bits.  A CPU ou DMA tem acesso de leitura e grava√ß√£o a todos os registros. <br><br>  <i>Quadro 21-1</i> <br><div class="scrollable-table"><table><tbody><tr><th>  Tipo </th><th>  Primeiro nome </th><th>  Descri√ß√£o do produto </th></tr><tr><td>  Bateria </td><td>  A0, A1 </td><td>  As baterias podem ser uma fonte ou um receptor <br>  para ALU.  Eles tamb√©m podem ser carregados a partir do registro de dados. <br>  ou FIFO.  As baterias geralmente cont√™m o valor atual da fun√ß√£o. <br>  (por exemplo, contador, CRC ou turno).  Esses registros perdem sua <br>  valores ao entrar no modo de suspens√£o e ao redefinir <br>  valor 0x00. </td></tr><tr><td>  Dados </td><td>  D0, D1 </td><td>  Registradores de dados geralmente cont√™m constantes de fun√ß√£o, <br>  por exemplo, um valor de compara√ß√£o PWM, um per√≠odo de timer ou um polin√¥mio CRC. <br>  Esses registros mant√™m seus valores enquanto est√£o no modo de suspens√£o. <br>  modo </td></tr><tr><td>  FIFO </td><td>  F0, F1 </td><td>  Dois buffers FIFO de 4 bytes fornecem como fonte, <br>  e um receptor para dados em buffer.  FIFO pode ser <br>  configurado como buffers de entrada e buffers de sa√≠da ou como um <br>  buffer de entrada e um buffer de sa√≠da.  Os sinais de status mostram <br>  ler e escrever o status desses buffers.  Para exemplos de uso <br>  pode incluir dados TX e RX em buffer no SPI ou UART, <br>  bem como dados PWM em buffer e dados em buffer <br>  sobre o per√≠odo do temporizador.  Esses registros n√£o salvam seus valores. <br>  no modo de suspens√£o e durante a redefini√ß√£o, eles assumem o valor 0x00. </td></tr></tbody></table></div><br>  No pr√≥ximo artigo, come√ßaremos a lidar com o FIFO. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433018/">https://habr.com/ru/post/pt433018/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433008/index.html">Os dispositivos USB s√£o uma amea√ßa "repentina"</a></li>
<li><a href="../pt433010/index.html">Tem uma id√©ia: sistema de permiss√£o para pacotes npm</a></li>
<li><a href="../pt433012/index.html">Talvez eu s√≥ esteja vivo por causa dela: por que os pacientes com apneia dependem de um programa escrito por um hacker</a></li>
<li><a href="../pt433014/index.html">Piadas sobre o recente lan√ßamento de astronautas no espa√ßo sideral</a></li>
<li><a href="../pt433016/index.html">Altera√ß√µes na interface, anima√ß√£o em camadas e caos visual estruturado: uma revis√£o das tend√™ncias da web para 2019</a></li>
<li><a href="../pt433030/index.html">Ao vivo: desempenho front-end</a></li>
<li><a href="../pt433032/index.html">Como o roteamento m√©dico funciona - mostramos o exemplo do aplicativo DOC +</a></li>
<li><a href="../pt433034/index.html">Inje√ß√£o Spel</a></li>
<li><a href="../pt433036/index.html">Dicas para organizar a TI em uma pequena empresa</a></li>
<li><a href="../pt433038/index.html">Por que os profissionais de marketing aprendem programa√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>