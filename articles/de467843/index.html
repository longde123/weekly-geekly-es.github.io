<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔦 🛀 👬 Wie kann man in AWS bis zu einer halben Million Dollar sparen? ☮️ 👨‍👩‍👧‍👦 🤜🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels „Wie können Sie Ihre AWS-Kosten senken? Sparen Sie mit diesen Richtlinien bis zu 500.00...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann man in AWS bis zu einer halben Million Dollar sparen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467843/"> Hallo Habr!  Ich präsentiere Ihnen die Übersetzung des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Wie können Sie Ihre AWS-Kosten senken?</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sparen Sie mit diesen Richtlinien bis zu 500.000 US-Dollar! “</a>  Autor George Batschinski. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/0.png" alt="Bild"><br><br>  In diesem Artikel werden wir detailliert beschreiben, wie Back4App seine AWS-Ausgaben von 55.492 USD pro Monat auf 20.074 USD pro Monat gesenkt und 500.000 USD pro Jahr eingespart hat.  Wir werden praktische Schritte beschreiben, die auf unseren eigenen Erfahrungen mit der Kostensenkung in AWS basieren, und Tipps austauschen, die auch für uns nützlich waren. <br><a name="habracut"></a><br>  AWS ist weiterhin innovativ und dominiert den Cloud-Markt.  Es ist so stark gewachsen, dass es zu einem wichtigen Bestandteil der Strategie von Amazon geworden ist.  Ich bin von AWS begeistert, aber Zweifel an der Komplexität und den Kosten der Cloud haben mich veranlasst, die Cloud-Nutzung zu optimieren.  Trotz der Tatsache, dass AWS eine ständig wachsende Liste spezialisierter Services für verschiedene Arten der Entwicklung anbietet, ist dies nicht immer der direkteste, schnellste oder kostengünstigste Weg.  Idealerweise müssen Sie sofort nach dem Wechsel in die Cloud sofort über die Architektur nachdenken, um die Kosten zu senken.  Dieses Material wird dazu beitragen, die Kostenoptimierung zu beschleunigen, und enthält reale Fälle, auf die wir während unseres Kostensenkungsvorhabens gestoßen sind. <br><br>  Ein kurzer Überblick über das, was Sie in diesem Artikel finden: <br><br><ul><li>  <b>Beantragen Sie Kredite bei AWS und erhalten Sie bis zu 100.000 US-Dollar.</b> </li><li>  <b>Übertragen Sie die Datenübertragung an Cloud Front und sparen Sie bis zu 75%.</b> </li><li>  <b>Verwenden Sie private IP (nicht elastische IP) und zahlen Sie nicht mehr für die Datenübertragung zwischen Zugriffszonen.</b> </li><li>  <b>Sparen Sie mit Spot Instances bis zu 90%.</b> </li><li>  <b>Sparen Sie bis zu 75%, indem Sie Reserved Instances auf dem AWS Marketplace kaufen.</b> </li><li>  <b>Erhalten Sie reservierte Elastic Cache-Knoten und sparen Sie bis zu 77%.</b> </li><li>  <b>Reservieren Sie Ihre Daten in S3, jedoch nicht in EBS, und sparen Sie bis zu 75%.</b> </li><li>  <b>Konfigurieren Sie die automatische Skalierung für nicht genutzte Ressourcen.</b> </li><li>  <b>Wählen Sie die Region North Virginia und halten Sie sich von Sao Paulo fern.</b> </li><li>  <b>Aktualisieren Sie auf neue Instanzgenerationen und sparen Sie bis zu 20%.</b> </li><li>  <b>Suchen Sie den S3-Endpunkt in Ihrer VPC und aktivieren Sie das erweiterte Netzwerk auf EC2.</b> </li></ul><br>  So sah unser AWS-Konto im Januar 2019 aus. Die Gesamtkosten der Cloud betragen 55.492 US-Dollar. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/1.png" alt="Bild"><br><br>  So sah unser AWS-Konto im Mai 2019 aus. Die Gesamtkosten betrugen 20.074 USD. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/2.png" alt="Bild"><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/3.png" alt="Bild"><br><br><h2>  1. AWS-Darlehen </h2><br>  Zuallererst!  Bevor Sie anfangen, etwas zu tun, stellen Sie bitte sicher, dass Ihr Unternehmen für AWS-Darlehen berechtigt ist.  So erhalten Sie diese Darlehen: <br><br><h3>  Fragen Sie AWS nach Darlehen </h3><br>  So war es in unserem Fall!  Im Jahr 2016 ist unser Unternehmen recht schnell gewachsen.  Unsere AWS-Rechnung begann zu steigen und wir hatten keine Ahnung oder Zeit, die Verwendung von AWS zu optimieren.  Da wir keine Finanzierung hatten, wurde uns klar, dass wir entweder Kredite von AWS erhalten oder verschwinden würden.  Wir haben unseren Fall für unser Konto für Manager in AWS vorbereitet und gezeigt, wie schnell wir wachsen und welche Vorteile es für AWS hat, uns auf unserer Website zu unterstützen.  Wir haben ihm gezeigt, dass wir keine Finanzierung hatten und gezwungen wären, zu Google Cloud zu gehen (sie boten uns Darlehen in Höhe von 100.000 USD für die Migration zu AWS an), wenn wir keine Darlehen von AWS erhalten würden.  Die Antwort dauerte ungefähr eine Woche und AWS stellte uns 100.000 US-Dollar für den Einsatz über 12 Monate zur Verfügung.  Es war auch für AWS ein gutes Geschäft!  Seit Ablauf der Darlehen haben wir mehr als 750.000 USD für AWS ausgegeben. <br><br><h3>  Credits für das Testen und Starten von Proof Of Concept </h3><br>  Wenn Sie beabsichtigen, einen neuen Service von AWS oder die Art der Instanz zu testen, fordern Sie bei Ihrem Account Manager Darlehen an.  Die Anzahl der Kredite hängt von Ihren monatlichen Kosten und dem Gesamtaufwand für die Einführung von POC ab.  Diese Darlehen sind in der Regel nur drei Monate gültig, und Sie müssen die Geschwindigkeit des POC sicherstellen.  In unserem Fall konnten wir Kredite in Höhe von 3.000 USD erhalten, um die i3-Instanzfamilie zu testen. <br><br><h3>  Startguthaben </h3><br>  Wenn Sie Ihr Unternehmen gegründet oder ein Startup gegründet haben, ist dies eine großartige Möglichkeit, um voranzukommen.  Die Höhe der Kredite liegt zwischen 1.000 und 100.000 US-Dollar, je nachdem, wie Sie Ihren AWS-Fall präsentieren.  Es gibt verschiedene Möglichkeiten, diese Kredite zu erhalten. <br><br><h4>  Beschleuniger </h4><br>  Einer der Hauptvorteile von Startup Accelerators in den Boni, die sie bieten.  Einer dieser Boni sind Kredite von Cloud-Anbietern.  Der Betrag, den Sie erhalten können, hängt von dem Beschleuniger ab, in dem Sie vertreten sind.  Einige der besten, zum Beispiel YC, Alchemist, Wayra und 500 Startups, bieten Ihnen AWS-Darlehen in Höhe von 100.000 USD.  In unserem Fall wurden wir von Alchemist Accelerator akzeptiert und haben Darlehen in Höhe von 100.000 USD vergeben.  Leider konnten wir diese Kredite nicht nutzen, da wir zuvor bereits andere Kredite in Anspruch genommen hatten.  Wenn Sie beispielsweise zwei Beschleuniger für jeweils 100.000 US-Dollar akzeptieren, können Sie keine 200.000 US-Dollar verwenden, sondern nur 100.000 US-Dollar. <br><br><h4>  Risikofonds und Gruppen von Engeln </h4><br>  Einige WF / Angel-Gruppen bieten Darlehen als Teil des Bonusprogramms an.  In unserem Fall haben wir es geschafft, von einem unserer Investoren Marketingkredite in Höhe von 10.000 USD zu erhalten, die zwei Jahre lang gültig sind.  Leider konnten wir sie nicht verwenden.  Unternehmen können AWS Promotional Credits nicht verwenden, wenn sie zuvor eine gleiche oder eine größere Anzahl von Darlehen erhalten haben. <br><br><h4>  Alle führenden Cloud-Anbieter bieten Kredite für Startups an </h4><br>  Alle führenden Unternehmen auf dem Cloud-Markt bieten Startups Kredite an.  Mit AWS / Google können Kredite bis zu 100.000 US-Dollar betragen.  Bei Azure erhalten Sie drei Jahre lang 360.000 US-Dollar. <br><br><h2>  2. Implementieren Sie Kosteneinsparungen bei AWS </h2><br>  Der einfache Teil ist vorbei, und jetzt kommen wir zu den Herausforderungen!  Es gibt keine magische Pille, um die Kosten in AWS zu senken. Sie müssen hart arbeiten und ein regelmäßiges Verfahren befolgen, um die Kosten zu überwachen!  Die Reduzierung der Cloud-Kosten sollte Ihre tägliche Routine sein!  Stellen Sie sich vor, wie viel Sie in 365 Tagen sparen!  Die Zeit, die Sie investieren, hängt von der Größe Ihres Unternehmens und Ihren AWS-Kosten ab.  Ich verbringe ungefähr 30 Minuten am Tag damit, mein Konto zu überwachen und Kostensenkungsmaßnahmen zu priorisieren.  Darüber hinaus verbringen die Back4App-Ingenieure mindestens 1 Stunde pro Tag mit Kostensenkungsinitiativen. <br><br>  Die erste Initiative, die wir abgeschlossen haben: Erstellen eines einfachen Arbeitsblatts in Excel, um Initiativen zur Kostensenkung zu priorisieren. <br><br>  Die Hauptkriterien, anhand derer wir Einsparungen ermitteln: <br><br><ul><li>  Einsparpotential - Höchste Einnahmen aus Einsparungen </li><li>  Schwierigkeit - Wie schwierig ist es, den Aufwand und die erforderliche Arbeit anzuwenden? </li><li>  Besitzer - Wer wird die Aktion ausführen? </li></ul><br>  In unserem Fall sind die größten Einsparungen die Verwendung von Elastic Compute Cloud (EC2), und dies war das erste Thema, das wir zu verstehen begannen. <br><br><h2>  3. EC2 - Elastic Compute Cloud </h2><br><h3>  Deaktivieren Sie nicht verwendete Instanzen </h3><br>  Der erste Punkt zur Kostensenkung bei EC2 ist das Deaktivieren nicht verwendeter Instanzen.  Es gibt nichts Kompliziertes und die meisten Arbeiten sind recht unkompliziert.  Sie müssen lediglich eine Liste aller Instanzen erstellen, die Excel-Datei aus dem Beispiel laden und jede definieren.  In unserem Fall haben wir unsere Instanzen in drei Hauptkategorien unterteilt: <br><br><ul><li>  Instanzen, die kontinuierlich arbeiten müssen </li><li>  Instanzen, die gestoppt werden können </li><li>  Instanzen, die gelöscht werden können </li></ul><br>  <b>Stoppen Sie nicht, sondern löschen Sie Instanzen</b> <br><br>  Entfernen Sie nach Möglichkeit nicht verwendete Instanzen!  Wenn Sie sie einfach stoppen, zahlen Sie weiterhin für die Verwendung von EBS! <br><br><h3>  Reduzieren Sie überschüssige Ressourcen </h3><br>  Diese Aktion ist etwas komplizierter und es ist unbedingt erforderlich, die Instanzgröße korrekt auszuwählen.  Stellen Sie sicher, dass Sie mindestens eine Woche Daten auswerten, um die Wahrscheinlichkeit einer korrekten Instanzänderung zu erhöhen.  Der Ansatz, mit dem wir diesen Prozess gesteuert haben, bestand darin, Instanzen in drei Hauptkategorien zu unterteilen: <br><br><ul><li>  Richtige Größe </li><li>  Instanzgröße reduzieren </li><li>  Instanzgröße erhöhen </li></ul><br>  Die Überprüfung historischer Daten für eine Instanz ist äußerst einfach.  Gehen Sie in der AWS-Systemsteuerung zu Dienste&gt; EC2&gt; Instanzen&gt; Ausführen von Instanzen und wählen Sie Instanz&gt; Überwachung.  Sie können beispielsweise die Metrik für die CPU-Auslastung überprüfen. <br><br>  <b>Reduzieren Sie die Instanzgröße nacheinander</b> <br><br>  Reduzieren Sie Ihre Instanzgröße Schritt für Schritt.  Reduzieren Sie beispielsweise die Größe nicht von t2.xlarge auf t2.medium.  Reduzieren Sie es zunächst von t2.2xlarge auf t2.xlarge.  Schauen Sie sich eine Woche an, überprüfen Sie, wie viele Ressourcen verwendet werden, und wiederholen Sie die Schritte für eine neue.  Durch Ausführen dieser Schritte minimieren Sie das Risiko von Fehlern oder Ausfallzeiten. <br><br><h3>  Verwenden Sie reservierte Instanzen </h3><br>  Durch das Reservieren von Instanzen können Sie Ihre Einsparungen um bis zu 70% steigern.  Bitte beachten Sie, dass Sie bei der Reservierung einer Instanz für die Dauer der Reservierung rund um die Uhr bezahlen.  Sie zahlen unabhängig davon, ob Sie die Instanz verwenden oder nicht. <br><br>  Es gibt zwei Arten redundanter Kapazitäten: <br><br>  Standard - den Sie auf dem AWS Marketplace verkaufen können, können Sie nicht in einen anderen Instanztyp konvertieren, der billiger ist als konvertierbare Instanzen. <br><br>  Konvertierbar - Sie können es nicht auf dem AWS Marketplace verkaufen, aber Sie können es in eine Instanz eines anderen Typs konvertieren, die teurer als Standardinstanzen ist. <br><br>  <b>Konvertierbare Instanzen können verwirrend sein</b> <br><br>  Cabrio-Instanzen sind sehr schwierig!  Jedes Mal, wenn Sie Instanzen konvertieren, können Sie nur die Größe der Instanz erhöhen.  Betrachten Sie die folgende Situation: <br><br>  Sie erwerben t3.medium, eine konvertierbare reservierte Instanz. <br>  Sie beschließen, t3.medium in die Instanz m5.large zu konvertieren. <br><br>  Sie werden sicherlich Erfolg haben!  Nachdem Sie die Instanz m5.large einige Zeit verwendet haben, möchten Sie zu t3.medium zurückkehren. <br><br>  <b>Und das ist schon unmöglich!</b> <br><br>  Sie können den Verbrauch der konvertierbaren Instanz nicht reduzieren, sondern nur den Betrag erhöhen, den Sie dafür bezahlen.  Beginnen Sie also bitte mit einer kleinen reservierten Instanz und erhöhen Sie sie im Laufe der Zeit.  Beginnen Sie nicht mit einer großen Instanz, da Sie deren Verbrauch nicht reduzieren oder auf AWS Marketplace'e verkaufen können.  <b>Wenn Sie einen Fehler mit einer reservierten konvertierbaren Instanz machen, erhalten Sie eine monatliche Zahlung von 12 oder 36 Monaten.</b>  Bei Back4App erhalten wir immer zuerst t2.nano und erhöhen es nach Bedarf. <br><br>  Ich bevorzuge Standard-Reserved-Instanzen aus folgenden Gründen gegenüber Convertible: <br><br><ul><li>  Sie sind billiger </li><li>  Sie haben eine höhere Liquidität - sie können jederzeit auf dem AWS Marketplace verkauft werden. </li><li>  Sie können auf dem AWS Marketplace mit einem Rabatt gekauft werden. </li></ul><br><h3>  Verwenden Sie AWS Marketplace für reservierte Instanzen </h3><br>  Reservierte Instanzen sind großartig, aber der Kauf reservierter Instanzen auf dem AWS Marketplace ist noch besser! <br><br><h3>  AWS Marketplace kann viel billiger sein </h3><br>  AWS Marketplace sieht aus wie ein Wertpapiermarkt!  Manchmal können Sie eine reservierte Standardinstanz zu einem Preis kaufen, der viel günstiger ist als der Kauf direkt bei AWS.  Der Grund ist einfach;  Unternehmen besitzen manchmal redundante Instanzen, die nicht mehr verwendet werden, aber weiterhin dafür bezahlen.  Die Senkung des Unterkunftspreises beschleunigt den Kaufprozess. <br><br>  Hier werde ich ein Beispiel geben, was mit Back4App passiert ist.  Ich suchte nach 4 r4.large reservierten Instanzen.  Ich habe es geschafft, Instanzen auf dem AWS Marketplace zu finden, deren effektive Rate 75% günstiger ist als die On-Demand-Preise.  AWS verkaufte die gleiche Art von reservierten Instanzen, jedoch mit einem Rabatt von 62%. <br><br><h3>  AWS Marketplace bietet flexible Einkaufsbedingungen </h3><br>  Ein weiterer Vorteil von AWS Marketplace besteht darin, dass Sie Instanzen mit einer flexiblen Nutzungsdauer erwerben können.  AWS selbst bietet nur Optionen für 12 und 36 Monate für den Kauf reservierter Instanzen.  AWS Marketplace ist viel flexibler!  Sie können beispielsweise reservierte Instanzen für 15 Monate zum gleichen Preis wie für 36 Monate erwerben.  Einige Unternehmen bevorzugen langfristige Verpflichtungen (36 Monate) und verkaufen diese vor Ablauf der Verpflichtung auf dem AWS Marketplace.  Der neue Kunde verwendet die Instanz nur für den verbleibenden Zeitraum, zum Beispiel: <br><br><ul><li>  Gesamtakquisitionszeit: 36 Monate </li><li>  Erstkäufer: Verwendet die Instanz 21 Monate lang </li><li>  Zweiter Käufer: Kauft es auf dem Marktplatz und verwendet es für die verbleibenden 15 Monate. </li></ul><br>  Die Hauptschwierigkeit besteht darin, die richtigen Instanzen auf dem AWS Marketplace zu finden.  <b>Eine gute Möglichkeit, die Suche nach Instanzen zu vereinfachen, besteht darin, sie in mehreren Zugriffszonen zu suchen und nicht nur in der Zone, in der Sie sich befinden.</b>  Sobald Sie eine Instanz erworben haben, können Sie sie ändern und einer anderen Eingabehilfenzone zuweisen oder sie in eine regionale Instanz umwandeln.  Dies ist überhaupt nicht schwierig, aber bitte befolgen Sie die folgenden Anweisungen: <br><br><ul><li>  Schritt 1 - Wechseln Sie zum Dashboard für reservierte Instanzen </li><li>  Schritt 2 - Klicken Sie auf Reservierte Instanzen kaufen </li><li>  Schritt 3 - Wählen Sie in der Angebotsklasse Standard aus </li><li>  Schritt 4 - Wählen Sie in der oberen rechten Ecke des Popup-Fensters die Option "Nur Angebote anzeigen, die Kapazität reservieren". </li><li>  Schritt 5 - Klicken Sie auf Suchen </li><li>  Schritt 6 - Holen Sie sich eine Instanz aus der Verfügbarkeitszone 1b </li><li>  Schritt 7 - Warten Sie, bis die Instanz aktiv wird </li><li>  Schritt 8 - Wählen Sie die gekaufte Instanz aus </li><li>  Schritt 9 - Klicken Sie auf die Schaltfläche Aktionen </li><li>  Schritt 10 - Klicken Sie auf Reservierte Instanzen ändern </li><li>  Schritt 11 - Umfang - Verfügbarkeitszone oder -region ändern </li><li>  Schritt 12 - Klicken Sie auf Weiter </li><li>  Schritt 13 - Klicken Sie auf Änderungen senden </li></ul><br>  Wenn Sie diese Schritte ausführen, können Sie Standard Reserved-Instanzen in einer beliebigen Verfügbarkeitszone erwerben und für Ihre Verfügbarkeitszone ändern. <br><br><h3>  AWS Marketplace für Unternehmen außerhalb der USA </h3><br>  Wichtige Klarstellung für Benutzer außerhalb der US-Gerichtsbarkeit.  Sie können Standard Reserved Instances nur dann auf dem Marktplatz verkaufen, wenn Sie eine staatliche juristische Person haben.  Wenn Ihr Unternehmen außerhalb der USA findet, können Sie Instanzen auf dem Marktplatz kaufen, aber nicht verkaufen. <br><br><h3>  Verwenden Sie Spot-Instanzen </h3><br>  Ich liebe Spot Instances!  Mit ihnen können Sie bis zu 90% sparen, und es sind keine großen Investitionen erforderlich!  Das einzige Minus von Spot-Instanzen ist, dass AWS diese Instanzen in kürzester Zeit oder nach einer zweiminütigen Warnung löschen kann.  In dieser Hinsicht kann diese Art von Instanzen nur für fehlertolerante oder flexible Lasten verwendet werden. <br><br>  <b>Verwenden Sie SpotInst, um Spot-Instanzen auszuführen</b> <br><br>  Eine sichere Möglichkeit, Spot-Instanzen auszuführen und das Ausfallzeitrisiko zu minimieren, ist die Verwendung der SpotInst-Plattform.  Dieser Service stellt eine Verbindung zu Ihrem AWS-Konto her und verwaltet die Verteilung von Spot-Instanzen.  Wenn die Instanz deaktiviert ist, ersetzt der Dienst sie durch On Demand und verhindert Ausfallzeiten.  Die Preise sind auch sehr interessant, sie berechnen 20% der gesparten Beträge (zwischen dem Preisunterschied zwischen On-Demand und Spot). <br><br>  Ein gutes Szenario für Spot-Instanzen ist die Verwendung einer Kopie von Servern für Datenbanken oder für flexible Anwendungserweiterungen.  Verwenden Sie SpotInst, um die Zuordnung von Spot-Instanzen zu steuern. Höchstwahrscheinlich treten bei der Verwendung dieser Instanzklasse keine Ausfallzeiten auf. <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/4.png" alt="Bild"><br><br><h3>  Automatische Skalierung (Leerlaufressourcen, Automatisierung von Start / Stopp-EC2-Instanzen) </h3><br>  AWS Auto Scaling überwacht Ihre Anwendungen und passt die Leistung automatisch an, um eine stabile, vorhersehbare Leistung zu niedrigsten Kosten aufrechtzuerhalten.  Sie können die automatische Skalierung so konfigurieren, dass EC2-Instanzen automatisch gestartet und gestoppt werden.  Die automatische Skalierung berücksichtigt Ressourcenmetriken wie CPU, API-Anforderungen und Ein / Aus-Zeiten. <br><br>  Um die Kosten zu minimieren, müssen Sie die automatische Skalierung + Spot-Instanzen + Reservierte Instanzen verwenden.  Schauen wir uns die reale Situation an, die wir in Back4App erlebt haben.  Die Arbeitsbelastung ändert sich im Laufe des Tages.  Die Anzahl der Anfragen, die wir erhalten, ist nicht einheitlich und weist zu bestimmten Zeiten eine Spitzenauslastung auf.  Um dieses Problem zu lösen, weisen wir Reserved Instances für die Mindestverbrauchsgrenze zu und skalieren mit Spot-Instanzen.  Die folgende Abbildung hilft Ihnen beim Verständnis der Konfiguration.  So viel können Sie sparen: <br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/5.png" alt="Bild"><br><br><ul><li>  Reservierte Instanzen: Bei Back4App verwenden wir eine Mischung aus 12/36 monatlichen reservierten Standardinstanzen.  Unsere mittleren Einsparungen betragen 50% im Vergleich zu On-Demand-Preisen. </li><li>  Automatische Skalierung: Wir starten / stoppen Instanzen basierend auf der Gesamtzahl der API-Anforderungen, die jede Instanz empfängt.  Wir haben drei Spitzenzeiten während des Tages, und die Einsparungen im Vergleich zu nicht genutzten Ressourcen, die bei maximaler Last 24 Stunden arbeiten würden, betragen ungefähr 75%. </li><li>  Spot-Instanzen: Wir haben eine Mischung aus zwei Instanzfamilien, die für maximale Verfügbarkeit auf Spotinst arbeiten.  Unsere Einsparungen betragen 55% im Vergleich zu On-Demand-Preisen.  Dies ist unsere Ersparnis unter Berücksichtigung des gesamten Betrags, den wir SpotInst zahlen.  Durch die Verwendung von Spot-Instanzen direkt von AWS könnten wir etwa 70% einsparen, aber das Risiko erhöhen.  Wir spielen gerne gemessen und haben beschlossen, einen Teil unserer Ersparnisse an SpotInst zurückzugeben. </li></ul><br>  <b>Passen Sie die Skalierung an</b> <br><br>  Passen Sie Ihre vertikale und horizontale Skalierung an (Cloudformation) <br><br><h3>  Wählen Sie die richtige AWS-Region zum Speichern aus </h3><br><ul><li>  Die Preise variieren zwischen den Regionen!  Wählen Sie die falsche und Sie werden zu viel bezahlen. </li><li>  Die billigsten Regionen sind North Virginia, Ohio und Oregon. </li></ul><br>  Am teuersten: Sao Paulo, Sydney und Hong Kong <br>  Betrachten Sie das folgende Beispiel: <br><br><ul><li>  4 x t3.medium Instanzen </li><li>  30 GB EBS für jede Instanz </li><li>  1 TB Gesamtverkehr </li></ul><br>  Die gleiche Konfiguration wird in Sao Paulo 102% teurer sein als in North Virginia. <br><br><ul><li>  221,65 USD / Monat in North Virginia </li><li>  449,05 USD / Monat in Sao Paulo </li></ul><br>  Die Zentralisierung des Betriebs in einer Region hat auch ihre Vorteile. <br><br><ul><li>  Es ist viel einfacher, die Zuordnung reservierter Instanzen zu steuern. </li><li>  Gebühren für den Verkehr zwischen Regionen fallen nicht an </li></ul><br>  Bei Back4App konnten wir aufgrund unserer Geschäftsabdeckung und Kundenanforderungen nicht alle Abläufe in North Virginia zentralisieren.  Wir haben beschlossen, einen Cluster in den USA, Europa und Asien zu gründen.  Wir haben unsere Aktivitäten in diesen Clustern zentralisiert und jede Region so weit wie möglich erweitert. <br><br><h3>  Aktualisieren Sie frühere Ressourcengenerationen </h3><br>  AWS startet gelegentlich neue Instanztypen.  Neue Generationen sind mächtiger und billiger. <br><br>  <b>Die alte Generation von Instanzen</b> <br><br>  C4.large <br><br>  2 Kerne <br><br>  3,75 GB Speicher <br><br>  0,100 USD / Stunde <br><br>  <b>Die neue Generation von Instanzen</b> <br><br>  C5.large <br><br>  2 Kerne <br><br>  4 GB Speicher <br><br>  0,085 USD / Stunde <br><br>  Die neue Generation ist 15% billiger und 6% leistungsstärker! <br><br>  <b>Erweitertes Netzwerk zulassen</b> <br><br>  Aktivieren Sie ein erweitertes Netzwerk für eine bessere Instanzleistung! <br><br><h2>  4. EBS - Elastic Block Store </h2><br>  EBS bietet sichere Speichervolumes zur Verwendung mit EC2-Instanzen in der AWS-Cloud.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes EBS-Volume wird innerhalb der Verfügbarkeitszone dupliziert, um Sie vor Hardwarefehlern zu schützen und eine hohe Verfügbarkeit und Zuverlässigkeit zu gewährleisten. </font><font style="vertical-align: inherit;">Die Kosten für jedes gespeicherte Gigabyte hängen von der Art des verwendeten Volumes ab. </font><font style="vertical-align: inherit;">Die gebräuchlichsten Typen sind Allzweck-SSD und Magnetic. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allzweck-SSD</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,10 USD / GB-Monat </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Magnetisch</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,05 USD / GB-Monat</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS-Typ - SSD x Magnetisch </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beginnen Sie mit dem Taggen Ihrer Instanzen und laden Sie diese Tabelle herunter, um Ihnen das Leben zu erleichtern. </font><font style="vertical-align: inherit;">Stellen Sie beispielsweise fest, ob das Volume Magnetic oder SSD ist.</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie nach Möglichkeit Magnetisch anstelle von SSD. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ersetzen Sie das SSD-Volume nach Möglichkeit. </font></font></li></ul><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS-Größe - Reduzieren Sie übermäßige Volumina </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der zweite Punkt, den Sie bei EBS sparen müssen, ist die Bestimmung der Größe jedes angeschlossenen Volumes. </font><font style="vertical-align: inherit;">Übermäßige Volumes und nicht verwendete Gigabyte werden häufig verwendet.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instanzen löschen - Das Stoppen hat keine Auswirkungen auf die EBS-Zahlung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Stoppen von Instanzen schützt Sie nicht vor den Kosten von EBS! </font><font style="vertical-align: inherit;">Ihr Volumen wird weiterhin gespeichert und ist in der Zahlung enthalten! </font><font style="vertical-align: inherit;">Wenn Sie die Instanz und die Daten nicht mehr benötigen, löschen Sie die Instanz! </font><font style="vertical-align: inherit;">Durch diese Maßnahme werden die Kosten für EC2 und EBS gesenkt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AWS erlaubt das sequentielle Erhöhen der Größe von EBS, aber nicht das Verringern. </font><font style="vertical-align: inherit;">Im Allgemeinen ist es besser, kleinere Volumina als große zu haben und EBS nur bei Bedarf zu verwenden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns abschätzen, wie teuer es sein kann. </font><font style="vertical-align: inherit;">Angenommen, Sie verwenden 10 t3.small-Instanzen und jede Instanz verwendet 50 GB SSD-EBS-Speicher. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die monatliche Rechnung lautet:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Monatliche EC2-Kosten = 10 x 15,23 USD = 152,30 USD </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS Gesamtkapazität: 10 x 50 GB = 500 GB </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Preis pro GB: 0,10 USD pro Monat </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Monatliche EBS-Kosten: 50,00 USD </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gesamtkosten: 182,30 USD </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses einfache Beispiel zeigt, dass EBS bis zu 32% der Kosten von EC2 ausmachen und einen wesentlichen Teil Ihres Kontos ausmachen kann. </font><font style="vertical-align: inherit;">Dies ist ein konstanter versteckter Wert, der gesteuert werden muss. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werfen Sie einen Blick auf die kurzlebige Speicherung</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bewerten Sie die Vor- und Nachteile der kurzlebigen Speicherung. </font><font style="vertical-align: inherit;">Von den Vorteilen müssen Sie keine versteckten Kosten für EBS bezahlen, die Verzögerung ist geringer und Sie können Rabatte auf reservierte Instanzen erhalten. </font><font style="vertical-align: inherit;">Von den Minuspunkten ist es wahrscheinlich, dass Sie nicht den gesamten internen Speicher nutzen (für den Sie weiterhin bezahlen), und die Verwendung von Spot-Instanzen wird viel schwieriger.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entfernen Sie nicht verwendete Volumes </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine weitere Maßnahme, mit der Sie Geld sparen können, ist das Entfernen nicht verbundener und nicht verwendeter Volumes. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie S3, um</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS- </font><b><font style="vertical-align: inherit;">Backups</font></b><font style="vertical-align: inherit;"> mindestens doppelt so teuer wie S3 zu halten! </font><font style="vertical-align: inherit;">In der Tat sollten Sie Backups in S3 und nicht in EBS speichern. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stellen Sie zunächst sicher, dass Ihre Backups schrittweise gespeichert und alte Versionen regelmäßig gelöscht werden.</font></font></b> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5. Elastic Cache Service - Reservierte Knoten </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nur wenige wissen, dass Sie reservierte Instanzen für Elastic Cache erwerben können. </font><font style="vertical-align: inherit;">Die Einsparungen sind sehr bedeutend:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 Jahr Reserve - 65% Rabatt </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 Jahre Reserve - 77% Rabatt </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Prozess ähnelt dem Erfassen von EC2-Instanzen. </font><font style="vertical-align: inherit;">Um einen reservierten Knoten zu erwerben, müssen Sie Folgendes tun:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gehen Sie zu Elastic Cache (nicht EC2 Reserved Instances) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gehen Sie zu Reservierte Knoten </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klicken Sie oben rechts auf die blaue Schaltfläche „Reservierten Knoten kaufen“ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie Redis oder Memcached </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie den Knotentyp </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie Ihren gewünschten Buchungszeitraum </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie die Angebotsart (1 oder 3 Jahre) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klicken Sie auf Weiter </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andere Kosteneinsparungen mit Elastic Cache sind fast die gleichen wie mit EC2. </font><font style="vertical-align: inherit;">Sie müssen nicht verwendete Knoten deaktivieren und die Größe der Knoten selbst reduzieren. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt keinen AWS-Marktplatz für elastischen Cache.</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bitte beachten Sie, dass es keinen Marktplatz für reservierte Knoten gibt! </font><font style="vertical-align: inherit;">Verwenden Sie es vor dem Kauf mindestens ein Jahr lang.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. Datenübertragung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diese Kostenlinie kann ziemlich schnell außer Kontrolle geraten! </font><font style="vertical-align: inherit;">Es ist schwierig genug zu kontrollieren, woher und woher die Daten stammen, und die Nachverfolgung ist noch schwieriger. </font><font style="vertical-align: inherit;">Darüber hinaus gibt es verschiedene Arten der Datenübertragung. </font><font style="vertical-align: inherit;">Zum Beispiel Datenübertragung aus der Cloud, Datenübertragung zwischen Regionen, Datenübertragung zwischen Zugriffszonen, S3-Datenübertragung usw. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde Ihnen sagen, wie Back4App die Kosten für die Datenübertragung gesenkt und wie sie verfolgt wurden.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie können die Datenübertragungskosten in AWS gesenkt werden? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hier sind einige Dinge, die Sie tun können, um die Datenkosten zu senken. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verbinden Sie den S3-Endpunkt mit Cloudflare und anderen CDN-Diensten. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CDN (Content Delivery Network oder Data Network) Mit dieser einfachen Aktion können Sie Ihre Datenübertragungskosten um das bis zu Fünffache senken, je nachdem, wie viel Cache Sie haben. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Elastische IPs - Verwenden Sie nach Möglichkeit Ihre eigenen IP-Adressen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist ein großartiges Beispiel! </font><font style="vertical-align: inherit;">Der AWS-Rechner gibt an, dass die Datenübertragung in die Cloud für EC2-Instanzen kostenlos ist. Sie müssen jedoch auch das Feld für die Übertragung öffentlicher IP- / elastischer IP-Daten ausfüllen. </font><font style="vertical-align: inherit;">Wenn Sie eine Verbindung mit einer öffentlichen oder elastischen IP-Adresse oder einem Elastic Load Balancer innerhalb des Amazon-Netzwerks auswählen, zahlen Sie interregionale Datenübertragungsraten, selbst wenn sich die Instanzen innerhalb derselben Verfügbarkeitszone befinden. </font><font style="vertical-align: inherit;">Um Daten innerhalb einer Zugriffszone zu übertragen, können Sie solche Kosten leicht vermeiden (und die Netzwerkleistung verbessern), indem Sie nach Möglichkeit Ihre persönlichen IP-Adressen verwenden.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie eine Verfügbarkeitszone - Verfügbarkeitszone </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie eine Verfügbarkeitszone anstelle mehrerer verwenden, können Sie erheblich sparen. </font><font style="vertical-align: inherit;">Vermeiden oder stoppen Sie die Datenübertragung zwischen Regionen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie die GraphQL-API </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einer der wesentlichen Vorteile von GraphQL ist die Reduzierung der Datenüberlieferung und damit die Reduzierung der Gesamtmenge der übertragenen Daten. </font><font style="vertical-align: inherit;">Das Ersetzen von REST kann abhängig von der Struktur Ihrer Anwendung eine entmutigende Aufgabe sein. </font><font style="vertical-align: inherit;">Es lohnt sich auch, die Machbarkeit eines solchen Übergangs im Voraus zu prüfen. </font><font style="vertical-align: inherit;">Eine andere Alternative besteht darin, GraphQL nacheinander für neue Produkte und Funktionen zu verwenden.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mengenrabatte für Datenübertragung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist kaum zutreffend, da die für Rabatte erforderlichen Mengen sehr groß sind. </font><font style="vertical-align: inherit;">Dies kann nur für große Unternehmen oder große Konten nützlich sein.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie CloudFront! </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können ein Vermögen sparen, wenn Sie diese Aktion anwenden! </font><font style="vertical-align: inherit;">Außerdem können Sie die Geschwindigkeit Ihrer Anwendungen erhöhen und die Latenz generell reduzieren - ein Win-Win-Angebot. </font><font style="vertical-align: inherit;">Ich werde weiter unten darüber sprechen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie kann man die Datenübertragungskosten verfolgen? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es gibt zwei einfache Möglichkeiten, die Datenkosten zu verfolgen. </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kostenforscher </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konten </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie stellen die gesammelten Daten auf unterschiedliche Weise dar. In beiden Versionen können Sie besser verstehen, wie das Geld für die Datenübertragung ausgegeben wird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um auf den Kosten-Explorer-Bericht zuzugreifen, gehen Sie zu Mein Abrechnungs-Dashboard und wählen Sie Kosten-Explorer. </font><font style="vertical-align: inherit;">Wählen Sie den Bericht "Nach Dienstansicht ausgeben" aus. Ein neues Fenster wird geöffnet. </font><font style="vertical-align: inherit;">Der vorbereitete Bericht für die letzten 6 Monate wird geöffnet und wir werden damit beginnen. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass in der Spalte Service KEINE Datenrechnungen vorhanden sind! </font><font style="vertical-align: inherit;">Diese Kosten werden durch Filter verborgen und Sie müssen tiefer graben, um sie zu finden. </font></font><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/6.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Datenübertragungskosten anzuzeigen, müssen Sie die Filter wie folgt konfigurieren:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klicken Sie auf Weitere Filter, um sie zu erweitern. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie Verwendungsartengruppe </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datenübertragungsinformationen werden angezeigt </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie Datenübertragung - Inter AZ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wählen Sie Datenübertragung - Internetausgang </font></font></li><li>  Data Transfer – Region to Region Out </li><li>  S3 Data Transfer Out </li><li>  Apply Filters </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachdem Sie alle Filter angewendet haben, sieht der Bericht folgendermaßen aus: </font></font><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/7.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt haben Sie Informationen über den Datenverkehr und dessen Herkunft aus S3 oder EC2 sortiert. </font><font style="vertical-align: inherit;">Wenn Sie möchten, können Sie einen ähnlichen Prozess anwenden und die Kosten weiter nach Region und Erreichbarkeitszone aufschlüsseln. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine andere Möglichkeit, die Verkehrskosten anzuzeigen, ist ein Abrechnungsbericht. </font><font style="vertical-align: inherit;">Gehen Sie zu Mein Abrechnungs-Dashboard und klicken Sie links auf Rechnungen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Bericht sieht ungefähr so ​​aus: </font></font><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/8.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie, dass eine integrierte Aufschlüsselung die Kosten für die EC2-Datenübertragung enthält. </font><font style="vertical-align: inherit;">Klicken Sie auf Datenübertragung und die Analyse nach Region wird angezeigt. </font></font><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/9.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Auswahl einer Region wird eine Aufschlüsselung nach Art der übertragenen Daten angezeigt (ausgehender Verkehr, zwischen Verfügbarkeitszonen, interregional).</font></font><br><br><img src="https://s3.eu-central-1.amazonaws.com/ocs.mikhail.sokolov.files/habr/10.png" alt="Bild"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. CloudFront </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die On-Demand-Preise von Cloudfront sinken mit zunehmendem Volumen rapide. </font><font style="vertical-align: inherit;">Stellen wir uns die Übertragung von 100 TB Verkehr vor. </font><font style="vertical-align: inherit;">Es kostet 0,060 USD / GB, was etwa 15% weniger ist als die gleiche Datenmenge über ELB.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cloud Front Private Contract &amp; Volumenpreise </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist der beste Weg, um Datenkosten zu senken! </font><font style="vertical-align: inherit;">AWS bevorzugt die Verwendung seines CloudFront-Dienstes. Je nach Volumen können Sie den Preis für ausgehenden CloudFront-Datenverkehr auf 0,02 USD / GB senken. </font><font style="vertical-align: inherit;">Dies erfordert höchstwahrscheinlich eine zweijährige Verpflichtung. Wenn Sie AWS über einen längeren Zeitraum verwenden möchten, ist dies ein großartiges Angebot. </font><font style="vertical-align: inherit;">Um eine solche Vereinbarung zu treffen, müssen Sie sich an Ihren Account Manager wenden und ihn nach dem CloudFront Private Contract fragen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Amazon CloudFront SSL-Cert-Custom </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie, ob Sie dieses Zertifikat verwenden. </font><font style="vertical-align: inherit;">Es kostet 20 US-Dollar pro Tag und kann bei Cloudflare für 25 US-Dollar pro Monat erworben werden. </font><font style="vertical-align: inherit;">Mit einem Private &amp; Volume Pricing-Vertrag können Sie keine anderen CDN-Dienste (Cloud Delivery Network) nutzen, und diese Aktion steht Ihnen nicht zur Verfügung.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8. S3 - Einfacher Speicherdienst </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Einige Empfehlungen zur Preissenkung für S3-Speicher. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S3 VPC-Endpunkt </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine großartige Sparidee, die nur wenigen Personen gegeben wird, ist die Verwendung des S3 VPC-Endpunkts. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durch das Platzieren eines S3-Endpunkts in Ihrer VPC (Virtual Private Cloud) erhält jeder Datenzugriff auf S3 und erhält einen eigenen Pfad innerhalb der Cloud. AWS berechnet Ihnen keine Gebühren, als wäre es öffentlicher Datenverkehr. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je nach Volumen kann diese Technik bis zu mehreren tausend Dollar pro Monat einsparen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie das richtige Speichermodell und die entsprechende Speicherklasse. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insgesamt gibt es fünf Speichermodelle: </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3 Standard</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 0.023 / GB</font></font><br><br>  <b>Parameter:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Failover zwischen Verfügbarkeitszonen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geringe Latenz und hoher Durchsatz </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beständig gegen Ereignisse, die die gesamte Verfügbarkeitszone betreffen. </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3 Seltener Zugriff</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 0.0125 / GB</font></font><br><br>  <b>Parameter:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ideal für Langzeitspeicher, Backups und Dateien im Falle einer Backup-Wiederherstellung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Failover zwischen Verfügbarkeitszonen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Für seltenen Zugriff, da die Kosten für den Zugriff auf Dateien umso höher sind </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3 Seltener Zugriff</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf </font><b><font style="vertical-align: inherit;">eine Zone 0,010</font></b><font style="vertical-align: inherit;"> USD / GB</font></font><br><br>  <b>Parameter:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eine Verfügbarkeitszone </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Für seltenen Zugriff </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gute Wahl für Backup-Backups </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3 Gletscher</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,004 USD / GB</font></font><br><br>  <b>Parameter:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sichere, zuverlässige und kostengünstige Art der Speicherung von Datenarchiven </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Failover zwischen Verfügbarkeitszonen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Das Hochladen von Daten kann zwischen einigen Minuten und mehreren Stunden dauern </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3 Glacier Deep Archive</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ 0,00099 / GB</font></font><br><br>  <b>Parameter:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der niedrigste Preis pro Gigabyte und Unterstützung für Langzeitspeicherung und digitale Aufbewahrung von Daten, die möglicherweise mehrmals im Jahr benötigt werden. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entladezeit innerhalb von 12 Stunden </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Failover zwischen Verfügbarkeitszonen </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3-API-Preise können verwirrend sein. </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bitte beachten Sie, dass Sie jedes Mal, wenn Sie die Speicherklasse für Objekte ändern, die Anzahl der Anforderungen bezahlen. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kann sehr schwierig sein! </font><font style="vertical-align: inherit;">Ich werde die Situation, die in Back4App aufgetreten ist, teilen. </font><font style="vertical-align: inherit;">Einer unserer Kunden speichert Millionen kleiner Objekte, und Daten sind selten gefragt. </font><font style="vertical-align: inherit;">Zuerst haben wir alle Objekte in S3 Standard behalten und beschlossen, sie zum Speichern auf S3 Glacier zu übertragen. </font><font style="vertical-align: inherit;">So weit so gut! </font><font style="vertical-align: inherit;">Wir haben jedoch nicht berücksichtigt, dass AWS für jeweils 1000 Anrufe bei Glacier 0,05 USD berechnet! </font><font style="vertical-align: inherit;">In unserem Fall war die Anzahl der Anfragen sehr groß, sodass sich die Umzugskosten nicht ausgezahlt haben! </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vor dem Verschieben von Objekten zwischen Speicherklassen muss der Preis für Anforderungen an S3 berücksichtigt und eine Amortisationsanalyse durchgeführt werden.</font></font></b> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Löschen Sie nicht verwendete Daten in S3 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der einfachste und effektivste Weg, um in S3 zu speichern, besteht darin, alte und nicht verwendete Daten einfach zu löschen. </font><font style="vertical-align: inherit;">Schauen Sie sich alte Backups und nicht verwendete S3-Buckets an. </font><font style="vertical-align: inherit;">Führen Sie eine Analyse durch und löschen Sie die Daten nach Möglichkeit.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9. Wählen Sie den AWS Technical Support Plan mit Bedacht aus </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Insgesamt gibt es 4 Arten von technischem Support: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Basic - Kostenlos </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entwickler - 29 USD / Monat oder 3% der Rechnung pro Monat </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geschäft - 100 USD / Monat oder 10-3% des Kontos, je nach Volumen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unternehmen - 15.000 US-Dollar pro Monat </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben den Businessplan ausprobiert und waren mit dem Ergebnis nicht zufrieden. Unserer Meinung nach ist es zu teuer für den Grad an Support und Support, den es bietet. Ich kann nichts über die Enterprise-Ebene sagen, da wir sie nicht verwendet haben. (Die Unternehmensebene eignet sich beispielsweise für große Unternehmen, bevor wichtige Premieren oder Produkte eingeführt werden.) </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenden Sie sich an Ihren AWS Regional Manager</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setzen Sie Ihren Regionalmanager und Lösungsarchitekten maximal ein! </font><font style="vertical-align: inherit;">Sie arbeiten getrennt vom zentralen Support-Team und können wesentlich geeignetere Dienste anbieten. </font><font style="vertical-align: inherit;">Das AWS-Team ist im Allgemeinen sehr kompetent und hilft sehr! </font><font style="vertical-align: inherit;">Die Empfehlungen zu erweiterten Sicherheitseinstellungen und zur Verwendung von GDPR waren einfach die besten! </font><font style="vertical-align: inherit;">Ich war beeindruckt von dem technischen Bewusstsein und dem Wunsch, uns zu besseren Ergebnissen zu verhelfen. </font><font style="vertical-align: inherit;">Diese Unterstützung lässt Sie zweimal überlegen, bevor Sie Ihren Cloud-Anbieter wechseln.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10. Überwachung und Verwaltung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist schwer zu überschätzen, wie wichtig es ist, die täglichen Kosten zu berechnen und zu kennen. </font><font style="vertical-align: inherit;">Sie müssen eine detaillierte Überwachung Ihrer Kosten für sich selbst einrichten und sich jeden Tag Zeit nehmen, um sich mit ihnen vertraut zu machen. </font><font style="vertical-align: inherit;">Stellen Sie sich vor, wie viel Sie in 365 Tagen sparen können! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die tägliche Überwachung hilft, verdächtige Trends zu erkennen und sofort zu handeln. </font><font style="vertical-align: inherit;">Best Practices in Bezug auf Überwachung und Verwaltung sind nachstehend aufgeführt:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Regelmäßige Überwachung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden von Berichten wie: </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abrechnungs- und Kostenmanagementbericht </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Monatliche Rechnungen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kosten-Explorer - Monatliche Servicekosten </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kosten-Explorer - Verwenden von RI </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kostenforscher - RI-Abdeckung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kennzeichnen Sie alles </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Messen Sie den Durchschnitt, verfolgen Sie, melden Sie Ausnahmen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verknüpfen Sie Ihre Umgebung mit dem AWS-Modell für gemeinsame Verantwortung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie CloudWatch und Trusted Advisor, um die Kosten zu überwachen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kombinieren Sie Ihre Konten und erhalten Sie Mengenrabatte </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 11. Neugestaltung der Architektur </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ändern der Architektur ist normalerweise die zeitaufwändigste Übung. </font><font style="vertical-align: inherit;">Dies kann je nach Größe Ihrer Architektur Wochen bis Monate dauern. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsere Erfahrung mit Back4App zeigt, dass Sie zuerst die einfacheren Schritte ausprobieren sollten. </font><font style="vertical-align: inherit;">Im Allgemeinen bringen sukzessive Änderungen kurzfristig erhebliche Einsparungen. </font><font style="vertical-align: inherit;">Verdienen Sie Geld mit solchen Änderungen und sammeln Sie Erfahrung für den Wiederaufbau Ihrer Architektur.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 12. Schlussfolgerung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt keine Zauberformel, um die Kosten in AWS sofort zu senken! </font><font style="vertical-align: inherit;">Es ist notwendig, routinemäßig die Ausgaben zu überprüfen, Prioritäten zu setzen und hart zu arbeiten, um Ihre Ziele zu erreichen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist eine kurze Übersicht über die Schritte, mit denen wir unseren AWS-Score reduzieren konnten.</font></font><br><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht verwendete EC2-Instanzen löschen</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überschüssige Leistung reduzieren</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verschieben Sie den Datenfluss nach CloudFront</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wechseln Sie zu neuen Generationen von Instanzen</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie Techniken wie ein erweitertes Netzwerk</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern Sie Backups in S3</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instanzen auf AWS Marketplace &amp; Elastic Cache Nodes reservieren</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pflegen Sie eine gesunde Mischung aus Spot-, Reserved- und On-Demand-Instanzen</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatische Skalierung automatisieren</font></font></b> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie sowohl S3 Standard als auch Glacier</font></font></b> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467843/">https://habr.com/ru/post/de467843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467825/index.html">Must-Have-Algorithmen für maschinelles Lernen</a></li>
<li><a href="../de467827/index.html">Wie wir unsere kleine Einheit von Grund auf neu gemacht haben</a></li>
<li><a href="../de467831/index.html">Der dornige Weg zur Programmierung</a></li>
<li><a href="../de467837/index.html">"Schreckliche" Drei-Cent-MCU - ein kurzer Überblick über Mikrocontroller, die weniger als 0,1 US-Dollar kosten</a></li>
<li><a href="../de467841/index.html">Machen Sie es sich leichter, fertig zu werden: Interview mit John Romero, Entwickler von Doom</a></li>
<li><a href="../de467847/index.html">"IoT Omnichannel Evolution" oder wie das Internet der Dinge Omnichannel beeinflussen kann</a></li>
<li><a href="../de467849/index.html">Peloton: nächster Apfel oder ein anderer Betrug?</a></li>
<li><a href="../de467851/index.html">Überprüfen Sie die Qualität, ohne die Registrierkasse zu verlassen</a></li>
<li><a href="../de467853/index.html">Visitenkartenentwicklung: Von der Karte zur Anwendung</a></li>
<li><a href="../de467855/index.html">Neues 2GIS: eine vollständige Karte von Russland und die Suche nach Waren in Offline-Geschäften</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>