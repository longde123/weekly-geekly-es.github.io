<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîè üë®üèº‚ÄçüöÄ üç≠ JPHP Android Apps üëø üåº üò°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Leute, die Code in PHP schreiben, werden alles tun, um nicht in andere Sprachen zu wechseln. Ja, ich bin mir bewusst, dass es fr√ºher in Habr√© bereits ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JPHP Android Apps</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425223/"><p>  Leute, die Code in PHP schreiben, werden alles tun, um nicht in andere Sprachen zu wechseln.  Ja, ich bin mir bewusst, dass es fr√ºher in Habr√© bereits eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">M√∂glichkeit gab</a> , Android-Anwendungen in PHP zu schreiben, aber es wurde beschlossen, es schneller und kompatibler mit Java JPHP anzupassen. </p><br><p><img src="https://habrastorage.org/webt/an/wt/ni/anwtnimygyt5vbxjo5idig80mn8.jpeg" alt="Logo"></p><a name="habracut"></a><br><h2 id="o-yazyke-jphp">  √úber JPHP </h2><br><p>  Ich nehme an, Sie k√∂nnten eine Frage haben.  Was ist JPHP?  Die Antwort ist genau dort auf Habr√©: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JPHP - Neue PHP-Engine f√ºr Java VM + JIT</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JPHP - Wie es funktioniert.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sch√∂pfungsgeschichte</a> </li></ul><br><p>  Nun, wir werden weitermachen.  In den 4 Jahren, die seit dem Schreiben dieser Beitr√§ge √ºber JPHP vergangen sind, hat sich diese Sprache zum Besseren ver√§ndert.  Zum Beispiel gab es unseren eigenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">jppm-</a> Paketmanager, √ºber den wir heute auch sprechen m√ºssen. </p><br><h2 id="kak-vsyo-nachalos">  Wie alles begann </h2><br><p>  Alles begann, als mein Freund auf die Idee kam, Android-Apps auf JPHP zu erstellen.  Ich habe ihm den Beitrag gegeben, √ºber den wir am Anfang gesprochen haben, aber diese Methode hat ihm nicht gefallen, da sie normales PHP verwendet.  Nun, wir Entwickler, die in einer unbekannten JPHP-Sprache schreiben, haben beschlossen, alles selbst zu machen. </p><br><p>  Nach dem Surfen im Internet haben wir keinen anderen Weg gefunden, als JavaFXPorts zu verwenden.  Und der Sch√∂pfer dieser Sprache selbst wollte sie 2 Jahre lang als GUI-Engine f√ºr JPHP verwenden, ohne etwas getan zu haben. </p><br><p>  Wie das Sprichwort sagt: "Wer au√üer dir?". Ich beeilte mich, die Arbeit der JPHP-Sprache weltweit zu studieren. </p><br><p>  Die ersten Wochen waren erfolglos.  Ich habe bereits die automatische Generierung eines Build-Skripts f√ºr gradle geschrieben und alles w√§re in Ordnung, apk wollte, aber als ich anfing, war mir zu diesem Zeitpunkt ein Fehler unbekannt.  Mir wurde sofort klar, dass sie JPHP zu verdanken war, aber ich hatte noch nie eine solche gesehen.  Jetzt kann ich mit Sicherheit sagen, dass dieser Fehler auf den generierten Bytecode zur√ºckzuf√ºhren ist.  DalvikVM corny konnte den f√ºr die JVM generierten Bytecode nicht ausf√ºhren.  Das ist ein gro√ües Hindernis geworden.  Da PHP-Dateien in JPHP-Anwendungen √ºberhaupt nicht kompiliert werden.  Es gab eine Option mit PHB-Dateien, aber dies l√∂ste unser Problem √ºberhaupt nicht.  Die einzige M√∂glichkeit bestand darin, einen eigenen Compiler zu schreiben, der wirklich funktionierte, aber eine Reihe von Einschr√§nkungen in Bezug auf Include und Eval mit sich brachte, danke, Dalvik. </p><br><p>  Nach vielen Versuchen und Irrt√ºmern gelang es mir immer noch, die allererste Version zu erstellen.  Seine Quellen sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Diese Version war nicht sehr schnell.  Ja, und die Verwendung von JavaFX unter Android ist ein Masazismus. </p><br><p>  Deshalb habe ich beschlossen, alles von Grund auf neu zu schreiben.  Ich habe diese Entscheidung vor relativ kurzer Zeit getroffen.  Daher ist die Bibliothek f√ºr JPHP etwas feucht.  Aber es funktioniert. </p><br><h2 id="kak-eto-rabotaet">  Wie funktioniert es? </h2><br><p> Alles beginnt damit, dass jppm alle Ihre Quellen und Abh√§ngigkeiten in einer einzigen JAR-Datei sammelt.  Dann kompilieren Sie in ihnen alle <code>php</code> Dateien in <code>class</code> .  Danach wird die resultierende JAR-Datei je nach Gradle hinzugef√ºgt.  Und er wiederum kompiliert diese Klassendateien zu Dex.  Das ist das ganze Geheimnis. </p><br><p>  Das Starten der Anwendung ist komplizierter.  In <code>AndroidManifest.xml</code> gibt es zun√§chst nur eine <code>BootstrapActivity</code> die alle JPHP l√§dt.  Nach dem Laden kann diese <code>BootstrapActivity</code> √ºber JPHP ge√§ndert werden.  F√ºr <code>Activity</code> ich gleichnamige Klassen erstellt. </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">Application</span></span>; $bootstrapActivity = Application::getMainActivity();</code> </pre> <br><p>  Mit diesem Code k√∂nnen Sie genau die <code>BootstrapActivity</code> abrufen, von der JPHP geladen wurde. </p><br><p>  Ich denke, Sie haben die Arbeit des JPHP-Loaders bereits verstanden. </p><br><h2 id="nebolshoy-primer">  Ein kleines Beispiel </h2><br><p>  Um beispielsweise den primitivsten Clicker zu erstellen, m√ºssen Sie diesen Code verwenden: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">Application</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">widget</span></span>\<span class="hljs-title"><span class="hljs-title">Button</span></span>; Application::setMainActivityHandler(fn =&gt; { <span class="hljs-comment"><span class="hljs-comment">//   jPHP $activity = Application::getMainActivity(); //  BootstrapActivity $activity-&gt;setTitle("test"); //   $activity-&gt;setContentView($button = new Button($activity)); //     $button-&gt;text = "Hello from JPHP!"; //     $button-&gt;on("click", function () use ($button) { //     ... $GLOBALS['clicks']++; $button-&gt;text = "Clicks: " . $GLOBALS['clicks']; }); });</span></span></code> </pre> <br><p>  Als Ergebnis haben wir eine einfache Anwendung mit einem Knopf bekommen: </p><br><p><img src="https://habrastorage.org/webt/lf/04/3w/lf043wq0xgwej0yty6islmvwtnk.jpeg"></p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Ich glaube nicht, dass sich jemand f√ºr mein Projekt interessieren wird.  Da es noch nicht 10% der Android API beschreibt.  Und das Schreiben von Anwendungen f√ºr Android in PHP ist kein Kanon.  Aber ich denke, das Projekt wird sein Publikum finden. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Projekt</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github JPHP</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gruppe in VK</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425223/">https://habr.com/ru/post/de425223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425213/index.html">Pl√§ne f√ºr die n√§chste Version von Vue.js</a></li>
<li><a href="../de425215/index.html">4 Tipps zur Optimierung Ihrer Webpack-Anwendung</a></li>
<li><a href="../de425217/index.html">Anwendungsfehlertoleranz beim Upgrade des Kubernetes-Clusters</a></li>
<li><a href="../de425219/index.html">Was ist psychische Gesundheit: eine Perspektive aus der Psychologie / Psychotherapie</a></li>
<li><a href="../de425221/index.html">Wie man Kunststoff f√ºr den 3D-Druck herstellt</a></li>
<li><a href="../de425225/index.html">Anzeigen der Links in Ihrem PowerShell-Modul</a></li>
<li><a href="../de425227/index.html">Forscher haben einen Weg gefunden, Honeytoken-Schl√ºssel in einer Reihe von Amazon-Diensten zu erkennen und zu umgehen.</a></li>
<li><a href="../de425229/index.html">Wie wir CDN MegaFon.TV geholfen haben, die Weltmeisterschaft 2018 nicht zu erreichen</a></li>
<li><a href="../de425231/index.html">FAQ √ºber die Arbeit einer Stewardess</a></li>
<li><a href="../de425233/index.html">Python 3 auf Facebook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>