<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∞ üë° üßõüèº O t√≠tulo ser√° diferente üí™üèø üê™ üôÖüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ estiver desenvolvendo um produto para o mercado de massa, provavelmente as pessoas com baixa vis√£o o usar√£o. Se voc√™ se esfor√ßa para criar int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O t√≠tulo ser√° diferente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/452226/">  Se voc√™ estiver desenvolvendo um produto para o mercado de massa, provavelmente as pessoas com baixa vis√£o o usar√£o.  Se voc√™ se esfor√ßa para criar interfaces amig√°veis, precisa faz√™-lo de maneira conveniente para todos os clientes, incluindo pessoas com baixa vis√£o.  Eu acho que muitas vezes esquecemos disso.  E √© hora de consertar isso. <br><br><img src="https://habrastorage.org/webt/vl/d_/dg/vld_dgvbru6qn4h7vwhdjzhh2r0.png"><br><a name="habracut"></a><br>  Entrei na consulta "entrega de pizza" na pesquisa na App Store, baixei os 24 primeiros aplicativos e verifiquei qual deles fornece uma interface para pessoas com baixa vis√£o. <br><br><img src="https://habrastorage.org/webt/gc/g_/r-/gcg_r-5lktwzdhejhfqkcxlwkfm.png"><br><br>  <b>2 de 24</b> .  E um dos dois, ao que parece, o fez por acidente: √† medida que o tamanho da fonte aumenta, toda a interface "flutua" e fica apenas mais dif√≠cil de usar.  Isso √© triste <br><br>  550.000 pessoas usam o aplicativo iOS Dodo Pizza todos os meses.  Mesmo se 1% de nossos usu√°rios tiverem fontes ampliadas, 5500 pessoas ficar√£o desconfort√°veis ‚Äã‚Äãao usar nosso aplicativo.  N√≥s vamos corrigi-lo. <br><br><h2>  Adicionar suporte de tipo din√¢mico </h2><br><ol><li>  Usamos estilos de texto din√¢micos do sistema em vez de est√°ticos. </li><li> Opcionalmente, ative a marca de sele√ß√£o Ajustar fonte automaticamente nos r√≥tulos nos storyboards.  Ou, se o r√≥tulo no bot√£o ou for criado por meio do c√≥digo, <code>adjustsFontForContentSizeCategory</code> seu par√¢metro <code>adjustsFontForContentSizeCategory</code> . </li><li>  Ensinamos a interface a se estender para diferentes tamanhos de fonte: <br>  - Utilizamos o c√°lculo autom√°tico dos tamanhos das c√©lulas sempre que poss√≠vel. <br>  - Onde n√£o podemos - obtemos as configura√ß√µes atuais do tamanho da fonte e respondemos √†s altera√ß√µes no m√©todo <code>traitCollectionDidChange</code> . </li><li>  Temos uma interface que √© imposs√≠vel de usar. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/webt/vg/sj/qa/vgsjqakh4zfv-lcere3iv0rptk0.png"></a> <br><br><h2>  Mudamos a interface para que possa ser usada </h2><br>  Revertemos e come√ßamos a pensar em como fazer tudo bem. <br><br><h3>  Use corretamente o local no menu </h3><br>  Agora h√° muito espa√ßo vazio embaixo da foto da pizza.  Vamos tentar colocar uma imagem acima do nome: dessa forma, ela ficar√° maior e o espa√ßo vazio desaparecer√°.  Para fazer isso, envolvemos a imagem e <code>UIStackView</code> cont√™iner com tudo o mais no <code>UIStackView</code> e, em seguida, alternamos a dire√ß√£o da exibi√ß√£o da pilha, se necess√°rio. <br><br> <a href=""><img src="https://habrastorage.org/webt/dt/s_/vg/dts_vgharid2k9v5r9yvqxu1cto.png"></a> <br><br>  N√£o temos separadores entre os itens do menu; √© por isso que, quando o tamanho √© grande, as c√©lulas come√ßam a "ficar juntas" e o pre√ßo da pizza fica muito pr√≥ximo da imagem da pr√≥xima pizza.  Vamos tentar adicionar um separador. <br><br> <a href=""><img src="https://habrastorage.org/webt/tl/8t/yf/tl8tyfcp3bir8nju3ziwcxcbozi.png"></a> <br><br>  N√£o √© isso.  Em primeiro lugar, parece mais ou menos.  Em segundo lugar, ser√° dif√≠cil ver pessoas com baixa vis√£o.  Mesmo se repintado de cinza para preto. <br><br>  N√≥s o removemos e tentamos aumentar a Internet entre as c√©lulas. <br><br> <a href=""><img src="https://habrastorage.org/webt/7b/kq/m8/7bkqm8wzzu5dayijekqfmik_0qw.png"></a> <br><br>  Agora ent√£o. <br><br>  Subtotal: use mais espa√ßo, os olhos saltam menos de uma linha para outra, a leitura ficou mais f√°cil. <br><br><h3>  Melhoramos o alongamento e a remo√ß√£o </h3><br>  Agora voc√™ pode aumentar a largura do bot√£o adicionar ao carrinho, caso contr√°rio, ele flutua para a esquerda e n√£o fica abaixo do seu dedo, embora exista muito espa√ßo vazio √† direita.  Voc√™ pode, √© claro, simplesmente mov√™-lo para o lado direito, mas ser√° inconveniente para os canhotos e, em geral, vamos gesticular melhor do que descomprimir.  E tornaremos o tra√ßado mais gordo, e agora n√£o √© consistente com a fonte. <br><br> <a href=""><img src="https://habrastorage.org/webt/ew/en/c8/ewenc8ziqn0o7ffnkvvzbo5a7o4.png"></a> <br><br>  Eu olho para tudo isso e entendo que a foto da pizza, √© claro, √© muito grande.  Vamos tentar esconder, talvez sem fotos voc√™ possa viver. <br><br> <a href=""><img src="https://habrastorage.org/webt/pp/pk/1q/pppk1qwmxxbayqrk5kula3oxfgg.png"></a> <br><br>  Em geral, um menu sem fotos n√£o perdeu muita informa√ß√£o, mas agora um item de menu quase sempre interfere na tela do iPhone 6S.  Mas tornou-se menos atraente, a baba n√£o flui ao rolar.  Tal.  Por enquanto, vamos deixar assim, pensar com cuidado e talvez mais tarde retornar a imagem. <br><br><h3>  N√£o se esque√ßa de verificar "ao vivo" </h3><br>  Agora categorias.  Em geral, mesmo com a primeira abordagem, o resultado foi toler√°vel.  Ligue um novo. <br><br> <a href=""><img src="https://habrastorage.org/webt/dj/5z/mi/dj5zmie3v-yr8jceovq9t5xmkhc.png"></a> <br><br>  Tentei navegar pelo menu e alternar entre categorias.  No entanto, acabou mal: tudo desmorona em a√ß√£o.  Ao rolar pelo menu, as categorias alternam automaticamente e, em pinos t√£o grandes, atrai muita aten√ß√£o. <br><br>  Vamos substituir o <code>UICollectionView</code> por um bot√£o que chamar√° o <code>UIActionSheet</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/re/c4/fr/rec4frqesfjg5_43ftutrekxw1u.png"></a> <br><br>  Voooot.  Agora voc√™ pode acessar o painel superior, onde a cidade, os estoques, o endere√ßo e o c√≥digo promocional. <br><br><h3>  N√£o se esque√ßa das linhas muito longas </h3><br>  Primeiro, vamos escolher a cidade.  N√£o h√° nada complicado com a fonte no bot√£o, mas √© interessante ensinar os "tri√¢ngulos" a crescer com a fonte.  No nosso caso, o tri√¢ngulo foi transformado em um √≠cone no bot√£o, que √© movido para o lado direito atrav√©s do <code>CGAffineTransform</code> .  Outra op√ß√£o √© coletar <code>NSAttributedString</code> do texto e do √≠cone do tri√¢ngulo e depois alimentar tudo com o bot√£o.  Para normalizar o √≠cone, voc√™ pode usar uma imagem vetorial, que deve necessariamente estar em ativos com a marca de sele√ß√£o Preservar dados vetoriais. <br><br> <a href=""><img src="https://habrastorage.org/webt/r5/7k/fz/r57kfzbng-bwybworqlvbzunagk.png"></a> <br><blockquote>  O √≠cone do tri√¢ngulo √© preto e √© pintado de branco atrav√©s do c√≥digo.  E, por alguma raz√£o, com o tamanho padr√£o do texto, artefatos na forma de bordas pretas aparecem nele.  √â engra√ßado  Na verdade n√£o.  Ele foi curado colocando um √≠cone originalmente branco em ativos. </blockquote><br>  Agora, esticamos os dod√¥-rublos, tudo √© simples: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/bh/7s/ctbh7styq51y9xt7c3reqc9wdg4.png"></a> <br><br>  E agora a pergunta √©: o que acontecer√° se o nome da cidade for longo e tivermos muitos rublos?  Em teoria, voc√™ precisa encurtar o nome da cidade.  Lembre-se do que eu disse sobre a segunda op√ß√£o para adicionar um √≠cone a um bot√£o, por meio de <code>NSAttributedString</code> ?  Eu tentei e agora h√° um problema que, quando reduzimos o t√≠tulo, o √≠cone do tri√¢ngulo desaparece, porque agora faz parte do t√≠tulo.  Stosh.  Teremos que retornar a l√≥gica de mover o √≠cone atrav√©s de transforma√ß√µes. <br><blockquote>  Se voc√™ conhece uma maneira conveniente de mover o √≠cone no bot√£o para o lado direito e escal√°-lo junto com a fonte no cabe√ßalho - descarte-o nos coment√°rios, por favor. </blockquote><br><h3>  Cram em </h3><br>  Finalmente estoques.  Aqui voc√™ precisa sentar e pensar.  O t√≠tulo pode ser longo e, mesmo agora, √†s vezes n√£o cabe em uma linha.  Em um tamanho grande, ele n√£o se encaixa bem.  Se voc√™ tornar o painel laranja superior em borracha e permitir que o t√≠tulo da a√ß√£o em tamanho grande ocupe v√°rias linhas, o bloco superior ocupar√° metade da tela, mesmo em iPhones grandes, e voc√™ n√£o precisar√° se lembrar do 4S.  Este n√£o √© o caso.  Voc√™ pode brincar com um layout dentro da caixa de a√ß√£o: ajuste a imagem e tome o lugar vago como um t√≠tulo.  Mas as fotos dos materiais s√£o personalizadas para um formato espec√≠fico e n√£o ser√£o exibidas corretamente em outro.  Isso √© imposs√≠vel. <br><br>  Complicado <br><br>  Ent√£o, mas voc√™ pode novamente remover completamente as fotos e ocupar todo o lugar com um t√≠tulo. <br><br> <a href=""><img src="https://habrastorage.org/webt/pa/uu/q7/pauuq7hzrctfjqof3wt_7fh4x4g.png"></a> <br><br>  Sim √© verdade.  As m√£os co√ßam para colorir o plano de fundo sob o t√≠tulo da a√ß√£o, mas isso afetar√° negativamente a legibilidade.  E n√≥s, como, estamos tentando melhor√°-lo.  Portanto, n√£o pintamos nada e passamos aos dois bot√µes restantes sobre o endere√ßo e os c√≥digos promocionais. <br><br><h3>  Trabalhamos com restri√ß√µes estritas </h3><br>  Os t√≠tulos nesses bot√µes s√£o irredut√≠veis.  Mas se n√£o forem reduzidos, os bot√µes se arrastar√£o um contra o outro.  E sim, voc√™ n√£o pode ocultar esses bot√µes. <br><br>  Quando refiz o material, n√£o queria aumentar a altura do painel laranja superior.  Parece ter que.  √â bom que eles n√£o tenham aumentado naquele momento, caso contr√°rio, agora haveria aduha.  Em geral, vou selecionar uma linha para cada bot√£o. <br><br> <a href=""><img src="https://habrastorage.org/webt/zj/nz/qg/zjnzqgtax6ep4jfk8y1_ogs3pgi.png"></a> <br><br>  Ufff, √© isso.  Quanto √†s fotos desativadas no menu, ainda n√£o tenho certeza.  Como alternativa, voc√™ pode mostrar apenas metade da foto da pizza em vez de um c√≠rculo inteiro, mas temos meia pizza reta no menu, para que n√£o funcione, pois podemos confundir os usu√°rios. <br><br>  Vamos comparar a primeira abordagem com o resultado final: <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/eh/m7/tuehm7kleeeivqqaoep4nljpsly.png"></a> <br><br>  Agora compare o "antes" e o "depois" com uma simula√ß√£o de vis√£o deficiente: <br><br> <a href=""><img src="https://habrastorage.org/webt/y9/rw/re/y9rwrenclvvgw5yzf6ifgz5fu_0.png"></a> <br><br>  N√£o tenha medo de alterar a interface e os controles.  N√£o h√° nada de errado em algu√©m ver outro bot√£o ou, por exemplo, um controle deslizante.  E n√£o √© fatal se algu√©m n√£o v√™ algo ou se o t√≠tulo √© diferente. <br><blockquote>  E n√£o tocamos no <code>UITabBarController</code> , porque, com um tamanho de texto grande, ele pode ser retirado da caixa com um toque longo e pode mostrar o √≠cone e o t√≠tulo da guia da mesma maneira que o iOS mostra a altera√ß√£o no volume. </blockquote><br><h2>  Mostramos como tudo funciona por dentro </h2><br>  Cada componente l√≥gico da interface do usu√°rio no aplicativo iOS do Dodo Pizza √© alocado para um <code>UIViewController</code> separado.  Cada um desses controladores possui um <code>UIView</code> alocado para um arquivo separado.  Voc√™ pode ler mais sobre isso em nossos artigos: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Controlador, v√° com calma!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Retiramos o c√≥digo no UIView</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Controlador de cebola.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dividimos telas em partes</a> <br><br>  A remo√ß√£o de componentes l√≥gicos da interface do usu√°rio em um <code>UIViewController</code> separado simplificou bastante a tarefa de modificar interfaces para diferentes estados.  Recomendamos que voc√™ tente essa abordagem, mesmo se n√£o planeja adicionar suporte ao Tipo din√¢mico - √© mais f√°cil controlar o status das telas: responda a altera√ß√µes na autoriza√ß√£o, direitos, fun√ß√µes e assim por diante. <br><br>  Ent√£o aqui.  Adicionamos uma camada extra entre esse componente de interface do usu√°rio e seu cont√™iner pai.  N√≥s o chamamos <code>StateViewController</code> . <br><br><img src="https://habrastorage.org/webt/zt/2t/3q/zt2t3qd01qrlnmjiem-ihzgjb5u.png"><br>  O controlador com o menu integra o controlador de estado e j√° incorpora a <code>collection</code> - ou o <code>button</code> - controlador. <br><br>  Esse <code>StateViewController</code> mostra esse ou aquele componente da interface do usu√°rio, dependendo da situa√ß√£o. <br><br>  Para fazer isso, o <code>StateViewController</code> precisa conhecer seus estados e <code>StateViewController</code> los, se necess√°rio. <br><br>  Neste exemplo, o <code>StateViewController</code> alternar√° a sele√ß√£o de categorias no menu da cole√ß√£o para o bot√£o e vice-versa.  E no caso de uma exibi√ß√£o "normal" e no caso de pessoas com defici√™ncia visual, o seletor deve ser capaz de fazer o mesmo: <br><br><ul><li>  Mostrar lista de categorias. </li><li>  Realce a categoria selecionada. </li><li>  Atualize a lista de categorias. </li><li>  Relate que a categoria "saiu". </li></ul><br>  Sinta esse maravilhoso cheiro de toras frescas?  E, n√£o, essa √© uma equipe de pizza m√≥vel entregue por API.  5 minutos de intervalo. <br><br>  <i>2 fatias depois</i> <br>  "... Bem, envolvemos nossos componentes assim para selecionar categorias nos protocolos, E ELES S√ÉO IMEDIATAMENTE!" <br><blockquote>  Dica: inicie o Inspetor de acessibilidade para verificar facilmente como a interface responde √†s altera√ß√µes nas configura√ß√µes din√¢micas do bloco.  Para fazer isso, no Xcode aberto, clique em Xcode ‚Üí Abrir ferramenta de desenvolvedor ‚Üí Inspetor de acessibilidade, selecione o simulador no dispositivo e v√° para a √∫ltima guia </blockquote><br><blockquote>  Outra dica: execute o controle de bloqueio de d√≠namo no iPhone (n√£o no simulador) no Centro de Controle para alterar com facilidade e rapidez o tamanho do texto.  Para fazer isso, em um iPhone, v√° para Configura√ß√µes ‚Üí Centro de controle ‚Üí Personalizar controles e adicione Tamanho do texto. </blockquote><br>  Chamamos o seletor de categoria usual de <code>CategoriesCollectionViewController</code> e, para os deficientes visuais - <code>CategoriesButtonViewController</code> .  Seu protocolo comum √© chamado <code>CategoriesPickerProtocol</code> .  O controlador de estado geral √© <code>CategoriesStateViewController</code> . <br><br>  Descrevemos os poss√≠veis estados em nosso <code>CategoriesStateViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> collection, button }</code> </pre> <br>  N√≥s o ensinamos a mostrar o controlador desejado para cada estado: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state: <span class="hljs-type"><span class="hljs-type">State</span></span> = .collection { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state != oldValue { updateViewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateController(with: viewController) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> state { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .collection: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesCollectionViewController</span></span>.instantiateFromStoryboard() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .button: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesButtonViewController</span></span>.instantiateFromStoryboard() } }</code> </pre> <br>  <code>instantiateFromStoryboard()</code> - um m√©todo de uma extens√£o auto-escrita para um controlador de exibi√ß√£o, cria uma inst√¢ncia de controlador a partir de storyboards se eles tiverem o mesmo nome.  O c√≥digo est√° no c√≥digo fonte no final do artigo. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traitCollectionDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> previousTraitCollection: UITraitCollection?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.traitCollectionDidChange(previousTraitCollection) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateStateToCurrentContentSize() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateStateToCurrentContentSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contentSize = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.traitCollection.preferredContentSizeCategory <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateState(to: contentSize) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to contentSize: UIContentSizeCategory)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.state = contentSize.isAccessibilityCategory ? .button : .collection }</code> </pre> <br>  Descrevemos o protocolo <code>CategoriesPickerProtocol</code> , adicionando simultaneamente mais dois protocolos: para o delegado e para a dataures. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPickerProtocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> datasource: <span class="hljs-type"><span class="hljs-type">CategoriesDatasource?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delegate: <span class="hljs-type"><span class="hljs-type">CategoriesDelegate?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateCategories</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedCategory: <span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDatasource</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> categories: [<span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(of category: Product.ProductCategory)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productCategoriesView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> categoriesPicker: CategoriesPickerProtocol, didSelect category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> }</code> </pre> <br>  N√£o h√° sentido em mostrar a implementa√ß√£o, mas todo piker exibe as categorias e relata mudan√ßas para cima. <br><br>  Um exemplo detalhado do uso de controladores de estado para o taype din√¢mico pode ser encontrado em meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio no GitHub</a> . <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A prop√≥sito, estamos expandindo</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt452226/">https://habr.com/ru/post/pt452226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt452210/index.html">Bot para VK em Python com MySQL em uma hora, parte 2</a></li>
<li><a href="../pt452212/index.html">Como se mudar para os EUA com a sua startup: 3 op√ß√µes de vistos reais, seus recursos e estat√≠sticas</a></li>
<li><a href="../pt452214/index.html">Est√°gios s√£o buchas de canh√£o para tapar buracos, n√£o "experi√™ncia inestim√°vel e perspectivas de carreira"</a></li>
<li><a href="../pt452222/index.html">Torres telef√¥nicas aeron√°uticas, o pr√≥ximo passo 5G</a></li>
<li><a href="../pt452224/index.html">O Guia R√°pido para um Desenvolvedor Web</a></li>
<li><a href="../pt452228/index.html">Anna Boyarkina, Miro (anteriormente RealtimeBoard): sobre pensamento sobre produtos, cultura de equipe, habilidades futuras</a></li>
<li><a href="../pt452230/index.html">Estudamos o diodo de t√∫nel no exemplo de 3I306M</a></li>
<li><a href="../pt452232/index.html">ObjectRepository - Padr√£o de reposit√≥rio em mem√≥ria .NET para seus projetos dom√©sticos</a></li>
<li><a href="../pt452234/index.html">Term√¥metro e higr√¥metro no ATMEGA 328P-MU - Elevando o n√≠vel de desenvolvimento do Arduino</a></li>
<li><a href="../pt452236/index.html">Harmonia de scripts dentro do aplicativo Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>