<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üñºÔ∏è üöÅ Godot: sur la question de l'utilisation r√©guli√®re des analyseurs de code statiques ‚õ≤Ô∏è üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ üêí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Notre lectorat est en croissance, nous √©crivons donc encore et encore des articles qui expliquent comment utiliser correctement la m√©thodologie d'anal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Godot: sur la question de l'utilisation r√©guli√®re des analyseurs de code statiques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/431200/"><img src="https://habrastorage.org/getpro/habr/post_images/f64/19d/5e9/f6419d5e9a19cc1f99e2400727bd81d9.png" alt="PVS-Studio et Godot" align="left">  Notre lectorat est en croissance, nous √©crivons donc encore et encore des articles qui expliquent comment utiliser correctement la m√©thodologie d'analyse de code statique.  Nous consid√©rons qu'il est tr√®s important d'expliquer que les outils d'analyse statique ne doivent pas √™tre utilis√©s sporadiquement, mais r√©guli√®rement.  Encore une fois, nous d√©montrons cela avec un exemple pratique, rev√©rifiant le projet Godot. <br><a name="habracut"></a><br><h2>  Utilisez r√©guli√®rement des analyseurs </h2><br>  En me pr√©parant √† prendre la parole lors de la conf√©rence des d√©veloppeurs de jeux, j'ai d√©cid√© d'obtenir de nouveaux exemples d'erreurs int√©ressantes que l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio</a> peut d√©tecter.  √Ä cet effet, plusieurs moteurs de jeu ont √©t√© test√©s, dont Godot.  Je n'ai trouv√© aucune erreur particuli√®rement int√©ressante pour le rapport, mais je voulais √©crire un article sur les erreurs ordinaires.  Ces erreurs d√©montrent tr√®s bien la pertinence de l'utilisation r√©guli√®re d'outils d'analyse de code statique. <br><br>  Il convient de noter que nous avons d√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">v√©rifi√©</a> ce projet en 2015, et l'auteur a travaill√© avec les erreurs que nous avons not√©es.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici</a> vous pouvez voir le commit correspondant. <br><br>  3 ans se sont √©coul√©s.  Le projet a chang√©.  L'analyseur PVS-Studio a √©galement chang√© et de nouveaux diagnostics y sont apparus.  Par cons√©quent, il n'est pas surprenant que j'ai pu √©crire facilement et rapidement suffisamment d'exemples d'erreurs pour √©crire cet article. <br><br>  <b>Cependant, quelque chose d'autre est important.</b>  Lors du d√©veloppement de Godot ou de tout autre projet, de nouvelles erreurs apparaissent constamment et sont corrig√©es.  Les erreurs non d√©tect√©es ¬´se d√©posent¬ª dans le code pendant une longue p√©riode, puis bon nombre d'entre elles peuvent √™tre d√©tect√©es lors de l'ex√©cution d'une analyse de code statique.  De ce fait, il existe parfois un faux sentiment que les analyseurs statiques ne trouvent que des erreurs inint√©ressantes dans les sections de code rarement utilis√©es.  Bien s√ªr, c'est le cas si vous n'utilisez pas correctement l'analyseur et ne l'ex√©cutez que de temps en temps, par exemple, peu de temps avant la publication de la version. <br><br>  Oui, lors de la r√©daction d'articles, nous effectuons nous-m√™mes des contr√¥les ponctuels des projets ouverts.  Mais nous avons un objectif diff√©rent.  Nous voulons d√©montrer les capacit√©s d'un analyseur de code pour d√©tecter les d√©fauts.  Cette t√¢che a peu √† voir avec l'am√©lioration de la qualit√© du code de projet dans son ensemble et la r√©duction des co√ªts associ√©s √† la correction des erreurs. <br><br>  Encore une fois sur l'essentiel.  Le point de l'analyse de code statique n'est pas de trouver d'anciennes erreurs.  Ces anciennes erreurs sont g√©n√©ralement insignifiantes, sinon elles auraient interf√©r√© avec les utilisateurs et auraient d√©j√† √©t√© trouv√©es et corrig√©es.  Le point de l'analyse statique est de corriger rapidement les erreurs dans le code nouvellement √©crit ou modifi√©.  Cela r√©duit le temps de d√©bogage, le nombre de plaintes des utilisateurs et, finalement, le budget du projet d√©velopp√©. <br><br>  Passons maintenant aux bugs que les lecteurs de nos publications aiment tant. <br><br><h2>  Erreurs de copier-coller </h2><br>  Voyons ce que j'ai remarqu√© en √©tudiant le rapport PVS-Studio.  Je vais commencer par mon diagnostic V501 pr√©f√©r√©, qui trouve des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">erreurs dans presque tous les projets</a> que nous v√©rifions :). <br><br>  <b>Erreur N1</b> <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">can_export</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!exists_export_template(<span class="hljs-string"><span class="hljs-string">"uwp_"</span></span> + platform_infix + <span class="hljs-string"><span class="hljs-string">"_debug.zip"</span></span>, &amp;err) || !exists_export_template(<span class="hljs-string"><span class="hljs-string">"uwp_"</span></span> + platform_infix + <span class="hljs-string"><span class="hljs-string">"_debug.zip"</span></span>, &amp;err)) { valid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; r_missing_templates = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... }</code> </pre> <br>  Avertissement PVS-Studio: V501 CWE-570 Il existe des sous-expressions identiques '! Exists_export_template ("uwp_" + platform_infix + "_debug.zip", &amp; err)' √† gauche et √† droite de '||'  op√©rateur.  export.cpp 1135 <br><br>  Erreur de copier-coller classique.  L'appel de fonction a √©t√© copi√© mais pas modifi√©.  Le nom du deuxi√®me fichier √† traiter doit se terminer par "_release.zip". <br><br>  <b>Erreurs N2, N3</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dump_node_code</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SL::Node *p_node, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> p_level)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bnode-&gt;statements[i]-&gt;type == SL::Node::TYPE_CONTROL_FLOW || bnode-&gt;statements[i]-&gt;type == SL::Node::TYPE_CONTROL_FLOW) { code += scode; <span class="hljs-comment"><span class="hljs-comment">//use directly } else { code += _mktab(p_level) + scode + ";\n"; } .... }</span></span></code> </pre> <br>  Avertissement PVS-Studio: V501 CWE-570 Il existe des sous-expressions identiques ¬´bnode-&gt; instructions [i] -&gt; type == SL :: Node :: TYPE_CONTROL_FLOW¬ª √† gauche et √† droite de ¬´||¬ª  op√©rateur.  test_shader_lang.cpp 183 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> EditorSpinSlider::_notification(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_what) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_what == MainLoop::NOTIFICATION_WM_FOCUS_OUT || p_what == MainLoop::NOTIFICATION_WM_FOCUS_OUT) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grabbing_spinner) { Input::get_singleton()-&gt;set_mouse_mode(Input::MOUSE_MODE_VISIBLE); grabbing_spinner = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; grabbing_spinner_attempt = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } .... }</code> </pre> <br>  Avertissement PVS-Studio: V501 CWE-570 Il existe des sous-expressions identiques 'p_what == MainLoop :: NOTIFICATION_WM_FOCUS_OUT' √† gauche et √† droite de '||'  op√©rateur.  editor_spin_slider.cpp 157 <br><br>  Je pense que les erreurs sont clairement visibles et ne n√©cessitent aucune explication.  Exactement le m√™me copier-coller classique, comme dans le premier cas. <br><br>  <b>Erreur N4</b> <br><br><pre> <code class="cpp hljs">String SoftBody::get_configuration_warning() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... Transform t = get_transform(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((ABS(t.basis.get_axis(<span class="hljs-number"><span class="hljs-number">0</span></span>).length() - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0.05</span></span> || ABS(t.basis.get_axis(<span class="hljs-number"><span class="hljs-number">1</span></span>).length() - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0.05</span></span> || ABS(t.basis.get_axis(<span class="hljs-number"><span class="hljs-number">0</span></span>).length() - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!warning.empty()) .... }</code> </pre> <br>  Avertissement PVS-Studio: V501 CWE-570 Il existe des sous-expressions identiques √† gauche et √† droite de '||'  op√©rateur.  soft_body.cpp 399 <br><br>  Ici, la premi√®re ligne a √©t√© copi√©e deux fois.  Mais le num√©ro de l'axe des coordonn√©es n'a √©t√© modifi√© que dans la deuxi√®me ligne.  Et ils ont oubli√© de modifier la troisi√®me ligne.  Ce n'est rien d'autre que "l'effet de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">derni√®re ligne</a> ". <br><br>  <b>Remarque</b>  En ce moment, en plus de ¬´Last Line Effect¬ª, j'ai fait les observations int√©ressantes suivantes: ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La fonction la plus dangereuse dans le monde C / C ++</a> ¬ª, ¬´Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mal vit dans les fonctions de comparaison</a> ¬ª.  Et maintenant, je vais faire l'annonce d'un nouvel article, dont je pr√©vois de r√©diger dans un avenir proche.  Le titre de travail est "0, 1, 2".  Cela devrait √™tre int√©ressant et instructif.  Je vous invite √† vous abonner √† l'une des cha√Ænes afin de ne pas manquer: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">twitter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vk.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instagram</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©gramme</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rss</a> "old school". <br><br>  <b>Erreur N5</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ScrollContainer::_notification(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_what) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h_scroll-&gt;is_visible_in_tree() &amp;&amp; h_scroll-&gt;get_parent() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) size.y -= h_scroll-&gt;get_minimum_size().y; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_scroll-&gt;is_visible_in_tree() &amp;&amp; v_scroll-&gt;get_parent() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) size.x -= h_scroll-&gt;get_minimum_size().x; .... }</code> </pre> <br>  Avertissement PVS-Studio: V778 CWE-682 Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable ¬´v_scroll¬ª devrait √™tre utilis√©e √† la place de ¬´h_scroll¬ª.  scroll_container.cpp 249 <br><br>  En ce qui concerne ce morceau de code, je ne suis pas compl√®tement s√ªr qu'il y ait une erreur.  Cependant, je suis d'accord avec l'analyseur que le deuxi√®me bloc semble tr√®s suspect.  Tr√®s probablement, le code a √©t√© √©crit √† l'aide de Copy-Paste, et dans le deuxi√®me bloc de texte, ils ont oubli√© de remplacer <i>h_scroll</i> par <i>v_scroll</i> . <br><br>  Le code devrait probablement √™tre comme ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h_scroll-&gt;is_visible_in_tree() &amp;&amp; h_scroll-&gt;get_parent() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) size.y -= h_scroll-&gt;get_minimum_size().y; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_scroll-&gt;is_visible_in_tree() &amp;&amp; v_scroll-&gt;get_parent() == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) size.x -= v_scroll-&gt;get_minimum_size().x;</code> </pre> <br>  <b>Erreur N6</b> <br><br>  Un autre cas o√π un fragment de code suffisamment grand a √©t√© copi√© et modifi√© sans succ√®s.  La ligne d'erreur est marqu√©e par mon commentaire "// &lt;=". <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ShaderGLES2::bind_uniforms() { .... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Map&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>, Variant&gt;::Element *E = uniform_defaults.front(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (E) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx = E-&gt;key(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> location = version-&gt;uniform_location[idx]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { E = E-&gt;next(); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } Variant v; v = E-&gt;value(); _set_uniform_variant(location, v); E = E-&gt;next(); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Map&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>, CameraMatrix&gt;::Element *C = uniform_cameras.front(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (C) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx = E-&gt;key(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= int location = version-&gt;uniform_location[idx]; if (location &lt; 0) { C = C-&gt;next(); continue; } glUniformMatrix4fv(location, 1, GL_FALSE, &amp;(C-&gt;get().matrix[0][0])); C = C-&gt;next(); } uniforms_dirty = false; }</span></span></code> </pre> <br>  Avertissement PVS-Studio: V522 CWE-476 Le d√©r√©f√©rencement du pointeur nul ¬´E¬ª peut avoir lieu.  shader_gles2.cpp 102 <br><br>  L'erreur a √©t√© d√©tect√©e indirectement.  Gr√¢ce √† l'analyse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du flux de donn√©es,</a> PVS-Studio a r√©v√©l√© que le pointeur <i>E</i> peut √™tre nul au moment du d√©r√©f√©rencement. <br><br>  L'erreur est que dans le fragment de code copi√©, ils ont oubli√© de remplacer <i>E</i> dans <i>C</i> en un seul endroit.  En raison de cette erreur, la fonction fonctionne de mani√®re tr√®s √©trange et fait des choses √©tranges. <br><br><h2>  Typos </h2><br>  <b>Erreur N7</b> <br><br>  Il est difficile pour les programmeurs qui √©crivent dans des langages autres que C ou C ++ d'imaginer qu'une faute de frappe peut √™tre faite en √©crivant une virgule au lieu d'un ast√©risque *, et le code sera compil√©.  Mais c'est le cas. <br><br><pre> <code class="cpp hljs">LRESULT OS_Windows::WndProc(....) { .... BITMAPINFO bmi; ZeroMemory(&amp;bmi, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(BITMAPINFO)); bmi.bmiHeader.biSize = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(BITMAPINFOHEADER); bmi.bmiHeader.biWidth = dib_size.x; bmi.bmiHeader.biHeight = dib_size.y; bmi.bmiHeader.biPlanes = <span class="hljs-number"><span class="hljs-number">1</span></span>; bmi.bmiHeader.biBitCount = <span class="hljs-number"><span class="hljs-number">32</span></span>; bmi.bmiHeader.biCompression = BI_RGB; bmi.bmiHeader.biSizeImage = dib_size.x, dib_size.y * <span class="hljs-number"><span class="hljs-number">4</span></span>; .... }</code> </pre> <br>  Avertissement PVS-Studio: V521 CWE-480 De telles expressions utilisant l'op√©rateur ',' sont dangereuses.  Assurez-vous que l'expression est correcte.  os_windows.cpp 776 <br><br>  La variable <i>bmi.bmiHeader.biSizeImage se voit</i> attribuer la valeur de la variable <i>dib_size.x</i> .  Ensuite, l'op√©rateur virgule ',' est ex√©cut√©, dont la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">priorit√© est</a> inf√©rieure √† celle de l'op√©rateur '='.  Le r√©sultat de l'expression <i>dib_size.y * 4</i> n'est utilis√© en aucune fa√ßon. <br><br>  Au lieu d'une virgule dans l'expression, l'op√©rateur de multiplication '*' doit √™tre utilis√©.  Premi√®rement, une telle expression aurait un sens.  Deuxi√®mement, ci-dessous, il existe une option similaire, mais d√©j√† correcte, pour initialiser la m√™me variable: <br><br><pre> <code class="cpp hljs">bmi.bmiHeader.biSizeImage = dib_size.x * dib_size.y * <span class="hljs-number"><span class="hljs-number">4</span></span>;</code> </pre> <br>  <b>Erreurs N8, N9</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Variant::<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx = p_index; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (idx &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) idx += <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (idx &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || idx &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) { Color *v = <span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;Color *&gt;(_data._mem); (*v)[idx] = p_value; valid = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... }</code> </pre> <br>  Avertissement PVS-Studio: V547 CWE-571 Expression 'idx&gt; = 0 ||  idx &lt;4 'est toujours vrai.  variant_op.cpp 2152 <br><br>  Tout index sera consid√©r√© comme correct.  Pour corriger l'erreur, vous devez remplacer le <i>||</i>  sur <i>&amp;&amp;</i> : <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (idx &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; idx &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) {</code> </pre> <br>  Cette erreur logique est probablement due √† la n√©gligence, donc je suis enclin √† l'attribuer aux fautes de frappe. <br><br>  Exactement la m√™me erreur peut √™tre observ√©e dans le m√™me fichier ci-dessous.  La faute de l'erreur de reproduction est apparemment le copier-coller. <br><br>  Erreur multiple: V547 CWE-571 Expression 'idx&gt; = 0 ||  idx &lt;4 'est toujours vrai.  variant_op.cpp 2527 <br><br>  <b>Erreur N10</b> <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c7/e0b/eec/1c7e0beec351fa7d221ddf08957964cd.png" alt="WTF?"></div><br>  Un exemple d'erreur dont on veut s'exclamer: WTF?! <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AnimationNodeBlendSpace1D::add_blend_point( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Ref&lt;AnimationRootNode&gt; &amp;p_node, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> p_position, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_at_index) { ERR_FAIL_COND(blend_points_used &gt;= MAX_BLEND_POINTS); ERR_FAIL_COND(p_node.is_null()); ERR_FAIL_COND(p_at_index &lt; <span class="hljs-number"><span class="hljs-number">-1</span></span> || p_at_index &gt; blend_points_used); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_at_index == <span class="hljs-number"><span class="hljs-number">-1</span></span> || p_at_index == blend_points_used) { p_at_index = blend_points_used; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = blend_points_used - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt; p_at_index; i++) { blend_points[i] = blend_points[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]; } } .... }</code> </pre> <br>  Avertissement PVS-Studio: V621 CWE-835 Envisagez d'inspecter l'op√©rateur "for".  Il est possible que la boucle soit mal ex√©cut√©e ou ne soit pas ex√©cut√©e du tout.  animation_blend_space_1d.cpp 113 <br><br>  Notez la condition d'arr√™t de boucle: <i>i&gt; p_at_index</i> .  C'est toujours vrai, car la variable <i>i est</i> initialis√©e avec la valeur <i>blend_points_used - 1</i> .  De plus, √† partir de deux v√©rifications ant√©rieures, il s'ensuit que <i>blend_points_used&gt; p_at_index</i> . <br><br>  La condition ne peut devenir fausse que lorsqu'un d√©bordement de la variable de signe <i>i</i> se produit, ce qui est un comportement non d√©fini.  De plus, il n'atteindra pas le d√©bordement, car le tableau d√©passera la limite beaucoup plus t√¥t. <br><br>  Avant nous, √† mon avis, il y a une belle faute de frappe quand ils ont √©crit ¬´&gt;¬ª au lieu de ¬´&lt;¬ª.  Oui, j'ai une vision perverse de la beaut√© des erreurs :). <br><br>  Le bon cycle: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = blend_points_used - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; p_at_index; i++) {</code> </pre> <br>  <b>Erreur N11</b> <br><br>  Un autre cas tout aussi brillant d'une faute de frappe dans l'√©tat du cycle. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AnimationNodeStateMachineEditor::_state_machine_pos_draw() { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; node_rects.size(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node_rects[i].node_name == playback-&gt;get_current_node()) { idx = i; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } .... }</code> </pre> <br>  Avertissement PVS-Studio: V693 CWE-835 Envisagez d'inspecter l'expression conditionnelle de la boucle.  Il est possible que 'i &lt;X.size ()' soit utilis√© au lieu de 'X.size ()'.  animation_state_machine_editor.cpp 852 <br><br>  Un d√©bordement du tableau peut se produire, car la valeur de <i>i</i> augmente de fa√ßon incontr√¥lable.  Code s√©curis√©: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; node_rects.size(); i++) {</code> </pre> <br>  <b>Erreur N12</b> <br><br><pre> <code class="cpp hljs">GDScriptDataType GDScriptCompiler::_gdtype_from_datatype( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GDScriptParser::DataType &amp;p_datatype) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (p_datatype.kind) { .... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GDScriptParser::DataType::NATIVE: { result.kind = GDScriptDataType::NATIVE; result.native_type = p_datatype.native_type; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GDScriptParser::DataType::SCRIPT: { result.kind = GDScriptDataType::SCRIPT; result.script_type = p_datatype.script_type; result.native_type = result.script_type-&gt;get_instance_base_type(); } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GDScriptParser::DataType::GDSCRIPT: { result.kind = GDScriptDataType::GDSCRIPT; result.script_type = p_datatype.script_type; result.native_type = result.script_type-&gt;get_instance_base_type(); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; .... }</code> </pre> <br>  PVS-Studio Warning: V796 CWE-484 Il est possible que l'instruction 'break' soit manquante dans l'instruction switch.  gdscript_compiler.cpp 135 <br><br>  J'ai accidentellement oubli√© d'√©crire une d√©claration de <i>rupture</i> .  Par cons√©quent, lorsqu'il entre dans le <i>cas GDScriptParser :: DataType :: SCRIPT, les</i> variables se verront attribuer des valeurs, comme si c'√©tait le <i>cas GDScriptParser :: DataType :: GDSCRIPT</i> . <br><br>  <b>Erreur N13</b> <br><br>  L'erreur suivante peut √™tre class√©e comme copier-coller.  Cependant, je ne sais pas si une ligne aussi courte a √©t√© copi√©e.  Nous consid√©rerons donc cela comme une simple faute de frappe lors de la frappe. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CPUParticles::_particles_process(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> p_delta) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flags[FLAG_DISABLE_Z]) { p.velocity.z = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; p.velocity.z = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; } .... }</code> </pre> <br>  Avertissement PVS-Studio: V519 CWE-563 La variable 'p.velocity.z' se voit attribuer des valeurs deux fois de suite.  C'est peut-√™tre une erreur.  V√©rifiez les lignes: 664, 665. cpu_particles.cpp 665 <br><br>  Deux fois l'affectation de la m√™me variable.  Ci-dessous, vous pouvez voir le fragment de code suivant: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flags[FLAG_DISABLE_Z]) { p.velocity.z = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; p.transform.origin.z = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; }</code> </pre> <br>  Tr√®s probablement, pour le premier cas, il aurait d√ª √™tre √©crit de la m√™me mani√®re. <br><br>  <b>Erreur N14</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AtlasTexture::is_pixel_opaque(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_x, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_y) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (atlas.is_valid()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atlas-&gt;is_pixel_opaque( p_x + region.position.x + margin.position.x, p_x + region.position.y + margin.position.y ); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  Avertissement PVS-Studio: le param√®tre V751 'p_y' n'est pas utilis√© dans le corps de la fonction.  texture.cpp 1085 <br><br>  Fragment de la description du diagnostic <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V751</a> : <br><br>  <i>L'analyseur a d√©tect√© une fonction suspecte, dont l'un des param√®tres n'est jamais utilis√©.</i>  <i>En m√™me temps, son autre param√®tre est utilis√© plusieurs fois, ce qui, √©ventuellement, indique la pr√©sence d'une erreur.</i> <br><br>  Comme vous pouvez le voir, c'est effectivement le cas, et c'est tr√®s suspect.  La variable <i>p_x est</i> utilis√©e deux fois et <i>p_y n'est</i> pas utilis√©e.  Tr√®s probablement, il devrait √™tre √©crit: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atlas-&gt;is_pixel_opaque( p_x + region.position.x + margin.position.x, p_y + region.position.y + margin.position.y );</code> </pre> <br>  Soit dit en passant, dans le code source, l'appel de fonction est √©crit sur une seule ligne.  Pour cette raison, l'erreur est plus difficile √† remarquer.  Si l'auteur du code √©crivait les arguments r√©els dans une colonne, comme je l'ai fait dans l'article, l'erreur retiendrait imm√©diatement mon attention.  N'oubliez pas que le formatage des tableaux est tr√®s utile et √©vite beaucoup de fautes de frappe.  Voir le chapitre ¬´Aligner le m√™me type de code avec un¬´ tableau ¬ªdans l'article¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le principal probl√®me de programmation, de refactoring et tout √ßa</a> ¬ª. <br><br>  <b>Erreur N15</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> SpriteFramesEditor::can_drop_data_fw(....) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... Vector&lt;String&gt; files = d[<span class="hljs-string"><span class="hljs-string">"files"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (files.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; files.size(); i++) { String file = files[<span class="hljs-number"><span class="hljs-number">0</span></span>]; String ftype = EditorFileSystem::get_singleton()-&gt;get_file_type(file); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ClassDB::is_parent_class(ftype, <span class="hljs-string"><span class="hljs-string">"Texture"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } .... }</code> </pre> <br>  PVS-Studio Warning: V767 Acc√®s suspect √† l'√©l√©ment du tableau 'files' par un index constant dans une boucle.  sprite_frames_editor_plugin.cpp 602 <br><br>  La boucle traite le m√™me fichier √† toutes les it√©rations de la boucle.  Tapez ici: <br><br><pre> <code class="cpp hljs">String file = files[<span class="hljs-number"><span class="hljs-number">0</span></span>];</code> </pre> <br>  Doit √™tre: <br><br><pre> <code class="cpp hljs">String file = files[i];</code> </pre> <br><h2>  Autres erreurs </h2><br>  <b>Erreur N16</b> <br><br><pre> <code class="cpp hljs">CSGBrush *CSGBox::_build_brush() { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; i++) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) face_points[j][(i + k) % <span class="hljs-number"><span class="hljs-number">3</span></span>] = v[k] * (i &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> face_points[<span class="hljs-number"><span class="hljs-number">3</span></span> - j][(i + k) % <span class="hljs-number"><span class="hljs-number">3</span></span>] = v[k] * (i &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>); .... } .... }</code> </pre> <br>  L'analyseur PVS-Studio produit imm√©diatement deux r√©ponses √† ce code: <br><br><ul><li>  V547 CWE-570 L'expression 'i&gt; = 3' est toujours fausse.  csg_shape.cpp 939 </li><li>  V547 CWE-571 L'expression 'i&gt; = 3' est toujours vraie.  csg_shape.cpp 941 </li></ul><br>  En effet, cet op√©rateur ternaire dans les deux expressions semble tr√®s √©trange: <br><br><pre> <code class="cpp hljs">i &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Dans un cas, la condition est toujours vraie et dans l'autre, elle est fausse.  Difficile de dire √† quoi devrait ressembler ce code.  Peut-√™tre est-il simplement redondant et peut √™tre √©crit comme ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; i++) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) face_points[j][(i + k) % <span class="hljs-number"><span class="hljs-number">3</span></span>] = v[k]; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> face_points[<span class="hljs-number"><span class="hljs-number">3</span></span> - j][(i + k) % <span class="hljs-number"><span class="hljs-number">3</span></span>] = -v[k]; .... }</code> </pre> <br>  Je peux me tromper et le code doit √™tre corrig√© d'une mani√®re compl√®tement diff√©rente. <br><br>  <b>Erreur N17</b> <br><br>  Il n'y avait presque pas d'erreurs comme V595, bien qu'elles soient g√©n√©ralement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trouv√©es en abondance dans tous les projets</a> .  Apparemment, ces erreurs ont √©t√© corrig√©es apr√®s une v√©rification pr√©c√©dente, puis des erreurs de ce type ne sont presque pas apparues.  Je n'ai vu que quelques faux positifs et une erreur. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CanvasItemEditor::_get_bone_shape(....) { .... Node2D *from_node = Object::cast_to&lt;Node2D&gt;( ObjectDB::get_instance(bone-&gt;key().from)); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!from_node-&gt;is_inside_tree()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//may have been removed if (!from_node) return false; .... }</span></span></code> </pre> <br>  Avertissement PVS-Studio: V595 CWE-476 Le pointeur 'from_node' a √©t√© utilis√© avant d'√™tre v√©rifi√© par rapport √† nullptr.  V√©rifiez les lignes: 565, 567. canvas_item_editor_plugin.cpp 565 <br><br>  Le pointeur <i>from_node est d'</i> abord d√©r√©f√©renc√© pour appeler la fonction <i>is_inside_tree,</i> et ce n'est qu'ensuite qu'il est v√©rifi√© pour l'√©galit√© <i>nullptr</i> .  Les ch√®ques doivent √™tre √©chang√©s: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!from_node) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!from_node-&gt;is_inside_tree()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//may have been removed</span></span></code> </pre> <br>  <b>Erreur N18</b> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> JoystickList { .... JOY_AXIS_MAX = <span class="hljs-number"><span class="hljs-number">10</span></span>, .... }; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *_axes[] = { <span class="hljs-string"><span class="hljs-string">"Left Stick X"</span></span>, <span class="hljs-string"><span class="hljs-string">"Left Stick Y"</span></span>, <span class="hljs-string"><span class="hljs-string">"Right Stick X"</span></span>, <span class="hljs-string"><span class="hljs-string">"Right Stick Y"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"L2"</span></span>, <span class="hljs-string"><span class="hljs-string">"R2"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> InputDefault::get_joy_axis_index_from_string(String p_axis) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; JOY_AXIS_MAX; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_axis == _axes[i]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i; } } ERR_FAIL_V(<span class="hljs-number"><span class="hljs-number">-1</span></span>); }</code> </pre> <br>  Avertissement PVS-Studio: le d√©passement de la baie V557 CWE-125 est possible.  La valeur de l'index ¬´i¬ª pourrait atteindre 9. input_default.cpp 1119 <br><br>  Le tableau <i>_axes se</i> compose de huit √©l√©ments.  Dans ce cas, la constante <i>JOY_AXIS_MAX</i> , qui d√©finit le nombre d'it√©rations de la boucle, est de 10. Il s'av√®re que la boucle d√©passe la limite du tableau. <br><br>  <b>Erreur N19</b> <br><br>  Et la derni√®re fonction tr√®s √©trange, qui, apparemment, est con√ßue pour tester quelque chose.  La fonction est longue, je vais donc la donner en image (cliquez sur l'image pour l'agrandir). <br><br><p></p><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/1d4/500/b7b/1d4500b7bf3d44179bd8b81c91c7ba44.png" alt="Fonction tr√®s √©trange"></a> </div><p></p><br><br>  Avertissement PVS-Studio: V779 CWE-561 Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  test_math.cpp 457 <br><br>  Il existe plusieurs <i>instructions de retour</i> inconditionnelles dans une fonction.  Dans l'image, je les ai marqu√©s avec des ovales rouges.  Il semble que plusieurs tests unitaires diff√©rents ont √©t√© collect√©s pour cette fonction, mais ont oubli√© de supprimer les <i>NULL de retour suppl√©mentaires</i> .  Par cons√©quent, la fonction ne v√©rifie pas ce qu'elle doit v√©rifier.  Presque tout le corps d'une fonction est constitu√© de code inaccessible. <br><br>  Peut-√™tre, bien s√ªr, c'est une sorte d'id√©e rus√©e.  Mais il me semble que cela s'est produit par hasard et que le code devrait √™tre corrig√©. <br><br>  Finissons l√†-dessus.  Certes, si vous regardez attentivement le rapport de l'analyseur, vous pouvez trouver d'autres erreurs.  Cependant, m√™me √©crit plus que suffisant pour √©crire un article.  Ensuite, cela deviendra ennuyeux pour moi et le lecteur :). <br><br><h2>  Conclusion </h2><br>  L'article d√©crit des erreurs qui n'existeraient pas si le code √©tait r√©guli√®rement analys√© √† l'aide de PVS-Studio.  Cependant, plus important encore, en utilisant une analyse r√©guli√®re, on pourrait imm√©diatement trouver et √©liminer de nombreuses autres erreurs.  Mon coll√®gue a d√©crit cette id√©e plus en d√©tail dans sa note: ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Philosophie de l'analyse de code statique: nous avons 100 programmeurs, l'analyseur a trouv√© peu d'erreurs, est-ce inutile?</a>  ".  Je recommande fortement de passer 10 minutes √† lire cet article court mais tr√®s important. <br><br>  Merci de votre attention.  J'invite tout le monde √† t√©l√©charger et √† essayer l'analyse statique de PVS-Studio pour tester vos propres projets. <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Godot: sur l'utilisation r√©guli√®re des analyseurs statiques</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431200/">https://habr.com/ru/post/fr431200/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431190/index.html">Comment √©valuer le niveau d'une entreprise de r√©f√©rencement sans conclure un accord avec elle</a></li>
<li><a href="../fr431192/index.html">AWC pr√©sente Firecracker - micro-virtualisation pour Linux</a></li>
<li><a href="../fr431194/index.html">Tube chaud hardcore. Comment √©tait DotNext 2018 Moscou</a></li>
<li><a href="../fr431196/index.html">Comment Yandex.Taxi pr√©dit le temps de livraison des voitures √† l'aide de l'apprentissage automatique</a></li>
<li><a href="../fr431198/index.html">Fonctionnement du r√©partiteur</a></li>
<li><a href="../fr431202/index.html">Debian et Devuan unissent leurs forces pour sysvinit</a></li>
<li><a href="../fr431204/index.html">Porte d√©rob√©e dans l'une des d√©pendances de la biblioth√®que EventStream</a></li>
<li><a href="../fr431208/index.html">Splunk √† travers les yeux d'un d√©butant: comment nous avons fait un syst√®me d'inventaire de stockage</a></li>
<li><a href="../fr431210/index.html">Second Mitap Write the Docs Moscou. House Techwriters: N'oubliez pas que nous existons</a></li>
<li><a href="../fr431212/index.html">Mise en cache de la pagination dans Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>