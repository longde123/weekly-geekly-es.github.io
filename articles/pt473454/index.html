<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏾 🌉 🚶🏼 Teste a automação usando o Selenide através do Selenoid em um contêiner de encaixe 🤟🏾 📋 👨‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo será útil para especialistas em controle de qualidade iniciantes, bem como para aqueles que estão interessados ​​nos recursos e capacidade...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Teste a automação usando o Selenide através do Selenoid em um contêiner de encaixe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473454/"><p> Este artigo será útil para especialistas em controle de qualidade iniciantes, bem como para aqueles que estão interessados ​​nos recursos e capacidades de estruturas de teste populares como Selenide e Selenoid. <br><br>  Aqui nós olhamos para um projeto básico no Selenium.  Veremos como conectar <b>Selenium</b> e <b>TestNG</b> ao projeto, um exemplo de Objeto de Página com uma descrição dos elementos da página e dos métodos utilizados. <br><br>  Além disso, familiaridade com o <b>Selenide</b> : consideraremos o próprio quadro, suas principais características e vantagens, adicionando o Selenide a um projeto de teste.  Considere trabalhar com elementos, verificações e expectativas disponíveis no Selenide. <br><br>  E, finalmente, <b>vamos conectar a</b> estrutura <b>Selenoid</b> ao nosso projeto para executar testes no contêiner <b>Docker</b> e fora dele. <br><br><img src="https://habrastorage.org/webt/fq/0u/6m/fq0u6mqwmrsun_01cyazmpwa6yc.jpeg"><br><a name="habracut"></a><br><br>  <i>* O artigo foi preparado com base em um relatório de Nikita Kalinichenko - especialista sênior em controle de qualidade da IntexSoft.</i> <i><br></i>  <i>O artigo contém links para materiais externos.</i> <br></p><br><h3>  1. Selênio + TesteNG </h3><br>  Estamos considerando um projeto no <b>construtor Maven</b> , para que possamos encontrar uma descrição da estrutura do projeto no arquivo <i>pom.xml</i> .  Para usar o <b>Selenium</b> e o <b>TestNG</b> , dependências apropriadas devem ser adicionadas ao nosso arquivo <i>pom.xml</i> .  Você pode observá-los entre as tags de <i>dependências</i> abaixo: <br><br><pre><code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;project xmlns=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span> xmlns:xsi=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span> xsi:schemaLocation=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span>&gt; &lt;modelVersion&gt;<span class="hljs-number"><span class="hljs-number">4.0</span></span>.0&lt;/modelVersion&gt; &lt;groupId&gt;test&lt;/groupId&gt; &lt;artifactId&gt;test&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">1.0</span></span>-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.141</span></span>.59&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.testing&lt;/groupId&gt; &lt;artifactId&gt;testing&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">6.14</span></span>.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt;</code> </pre> <br>  A seguir, veremos um exemplo de um objeto de página: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WebDriver driver)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.driver = driver; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By emailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By confirmEmailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-confirm-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By passwordField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-password"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By displayNameField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-displayname"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By monthDropDown = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-month"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By dayField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-day"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By yearField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-year"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By shareCheckbox = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-thirdparty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By registerButton = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-button-email-submit"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       driver.findElement(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailFriend(String email) {...} //    password public SignUpPage typePassword(String Password) {...} //      public SignUpPage typeName(String name) {...} //   public SignUpPage setMonth(String month) {...} //    Day public SignUpPage typeDay(String day) {...} //    Year public SignUpPage typeYear(String year) {...}</span></span></code> </pre> <br>  Como vemos, na parte superior do arquivo java há uma descrição das variáveis ​​com localizadores para os elementos da página de registro.  Abaixo da seção variável, existem métodos diretamente para interagir com os elementos de nossa página. <br><br>  Vamos abrir os testes eles mesmos: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    private WebDriver driver; //   private SignUpPage page; @BeforeMethod public void setUp() { //    geckodriver System.setProperty("webdriver.gecko.driver", "C:\\Users\\Nikita\\IdeaProjects\\autotests_examples\\drivers\\geckodriver.exe"); //   driver = new FirefoxDriver(); //  ,       driver.manage().timeouts().impicitlyWait(10, TimeUnit.SECONDS); // url      webdrivera get driver.get("https://www.spotify.com/us/signup/"); }</span></span></code> </pre> <br>  Como você pode ver, na anotação <b>BeforeMethod</b> , descrevemos o que teremos antes de cada método. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">typeInvalidYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          driver page = new SignUpPage(driver); //  page.setMonth("December"); //  .typeDay("20") //  .typeYear("85") //  .setShare(true); //  ,    ; Assert.assertTrue(page.isErrorVisible("Please enter a valid year."));</span></span></code> </pre> <br>  A anotação <b>Teste fornece</b> código para métodos de teste. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AfterMethod</span></span> <span class="hljs-comment"><span class="hljs-comment">//,   public void tearDown() { driver.quit(); }</span></span></code> </pre><br>  E a anotação <b>AfterMethod</b> contém código que deve ser executado após cada método. <br><br>  Ao executar testes usando o <b>Selenium</b> , ocorrerá o seguinte: <br><br><ol><li>  Abrindo uma Janela do Navegador Separada </li><li>  Ir para o URL </li><li>  Execução do código de teste </li><li>  Feche a janela da sessão e do navegador após cada teste </li></ol><br>  O próximo teste fará o mesmo.  Deve-se mencionar que a execução de testes no Selenium é um processo que consome muitos recursos. <br><br><h3>  2. Selenide: o que, onde e como </h3><br>  O que é o próprio <b>Selenide</b> , quais são suas principais características e vantagens? <br><br>  Em resumo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Selenide</a> é um invólucro do Selenium WebDriver que facilita o uso rápido e fácil ao escrever testes.  No essencial, o Selenide é uma ferramenta para automatizar ações do usuário em um navegador, focada na conveniência e facilidade de implementar lógica de negócios em autotestes no idioma do usuário, sem se distrair com os detalhes técnicos do trabalho com o “driver do navegador”.  Por exemplo, não precisamos nos concentrar em trabalhar com as expectativas dos elementos no processo de automatização do teste de aplicativos dinâmicos da Web, bem como na implementação de ações de alto nível nos elementos. <br><br>  Principais e principais vantagens do Selenide: <br><br><ul><li>  Sintaxe concisa no estilo jQuery </li><li>  Resolva automaticamente a maioria dos problemas com o Ajax, expectativas e tempos limite </li><li>  Gerenciamento da vida do navegador </li><li>  Criar capturas de tela automaticamente </li></ul><br>  O objetivo do Selenide é focar na lógica de negócios dos testes e não "desperdiçar" energia mental em detalhes técnicos. <br><br><h4>  Tradução do projeto no Selenide </h4><br>  Para conectar o Selenide e começar a trabalhar com ele, no arquivo <i>pom.xml</i> entre <i>as</i> tags de <i>dependências</i> , indicamos a dependência do Selenide.  Como não precisamos mais do vício em selênio, simplesmente o removemos. <br><br><pre> <code class="java hljs">&lt;dependency&gt; &lt;groupId&gt;com.codeborne&lt;/groupId&gt; &lt;artifactId&gt;selenide&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.2</span></span>.8&lt;/version&gt; &lt;/dependency&gt;</code> </pre> <br>  Além disso, para conectar e começar a usar o Selenide em nosso projeto, precisamos fazer várias importações.  Exemplos de importação: <br><br>  <i>importar estático com.codeborne.selenide.Selenide. *;</i> <br>  <i>importar estático com.codeborne.selenide.Selectors. *;</i> <br>  <i>importar estático com.codeborne.selenide.Condition. *;</i> <br>  <i>importar estático com.codeborne.selenide.CollectionCondition. *;</i> <br><br>  Para obter mais informações sobre como conectar o Selenide usando o restante dos construtores de projetos, consulte a seção <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Início rápido</a> da documentação do Selenide. <br><br><h4>  Trabalhar com elementos, verificações e expectativas </h4><br>  Vamos passar ao trabalho do Selenide com elementos e nos familiarizar com algumas das verificações e expectativas disponíveis para nós no Selenide. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    private SignUpPage page; @BeforeClass public static void setUp() { //Property baseurl,     Configuration     url baseurl = "https://www.spotify.com"; //Property browser,     Configuration          browser = "chrome"; }</span></span></code> </pre> <br>  No arquivo de teste, substituímos a anotação <b>BeforeMethod pela</b> anotação <b>BeforeClass</b> , já que não precisamos mais dela, o Selenide elimina a necessidade de escrever os métodos Before e After - o <b>Selenide</b> assume a função AfterMethod.  Só temos a anotação <b>BeforeClass</b> para registrar algumas <i>propriedades</i> . <br><br>  Na anotação <b>BeforeClass,</b> registramos uma <i>propriedade baseurl</i> , que está na classe de <i>configuração</i> e será o URL base.  Portanto, o <i>driver.get</i> , que usamos nos testes do Selenium, não é mais necessário.  No <i>navegador de propriedades,</i> configuramos o navegador no qual executaremos nossos testes. <br><br>  Em nosso projeto de teste, podemos abandonar completamente o driver Selenium, o Selenide cuidará de todo o trabalho com ele, encapsulando-o em suas classes.  Nós apenas teremos que focar na lógica dos próprios testes. <br><br>  Vamos usar o Selenide em nossa página: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//       Selenide open public SignUpPage open() { //   Selenide.open (relativeOrAbsoluteUrl: "/us/signup/"); return this; } //    email public SignUpPage typeEmail(string Email) { //       $(emailFriend).sendKeys(email); return this; }</span></span></code> </pre> <br>  Quando você chama o método <i>aberto</i> , o Selenide inicia o próprio navegador e abre a página.  Ele também garante que o navegador seja fechado no final.  Em Selenide.  <i>aberto,</i> podemos registrar o caminho completo com <i>http</i> ou passar algum relativo ao <i>URL</i> baseurl - <i>relativo</i> .  Como <i>baseurl,</i> especificamos o caminho absoluto, portanto, no método Selenide.  <i>abrir</i> , será o suficiente para especificarmos "/". <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       $(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailField(String email) { //       $(confirmEmailField).setValue(email); return this; }</span></span></code> </pre><br><p>  Para encontrar um elemento usando o Selenide, precisamos especificar <b>$ em</b> vez de <i>driver.findElement</i> , que é usado no Selenium.  Ou seja, usando o método de um caractere de comprimento, podemos encontrar diretamente o próprio elemento.  Por padrão, o método de pesquisa é aceito como uma sequência, semelhante à biblioteca JavaScript do jQuery. <br><br>  Para usar o Selenide para encontrar uma lista de elementos, você precisa especificar dois caracteres <b>$$</b> .  Em vez de <i>List &lt;WebElement</i> , prescrevemos <i>ElementsCollection</i> , que já é estendido por métodos adicionais. <br></p><br><p>  Para trabalhar com elementos, podemos usar os métodos Selenium padrão <i>(sendKeys ())</i> e <i>setValue ()</i> ou uma versão mais curta de <i>val ()</i> . <br></p><br><p>  Com base no nome, como vemos, os métodos Selenide são mais compreensíveis.  O método <i>click ()</i> permanece assim.  Embora o Selenide tenha vários métodos <i>click (): contextClick ()</i> (simulando um clique com o botão direito do mouse), <i>doubleClick ()</i> (simulando um clique duplo em um elemento), etc.  Depois de encontrar um elemento, podemos continuar a pesquisa usando outros localizadores. </p><br><p>  O método Selenide <i>find ()</i> difere do método Selenium <i>driver.findElement (By)</i> , pois ele pode receber imediatamente seletores CSS e opera com elementos Selenide, e não com elementos da Web.  Basicamente, os elementos Selenide são mais inteligentes e com seus métodos alternativos aos elementos Web Selenium. </p><br><p>  O Selenide já contém métodos que precisariam ser executados através de alguma classe de <i>ação</i> ou de alguma outra maneira.  Ele permite que você escreva métodos concisos e "bonitos", escritos em uma linguagem compreensível para todos.  O Selenide também possui uma grande flexibilidade, graças à qual podemos usar os recursos padrão do Selenium. </p><br><p>  Outros métodos Selenide também podem ser encontrados na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">documentação oficial</a> . <br></p><br><p>  Considere os exemplos amplos e compreensíveis de verificações que o Selenide nos fornece: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     page.getError("Please enter a valid year.").shouldBe(Condition.visible); //  ,      page.getError("When were you born?").shouldNotBe(Condition.visible); //       page.getErrors().shoildHave(CollectionCondition.size(6)); //      page.getErrorByNumber(3).shouldHave(Condition.text("Please enter your birth month."));</span></span></code> </pre><br><p>  O esquema de verificação Selenide nos permite pegar um elemento, encontrá-lo e usar as seguintes formulações para ele: should, shouldBe, shouldHave, shouldNot, shouldNotBe and shouldNotHave.  O esquema de verificação é reduzido para encontrar o elemento e chamá-lo dessas formulações.  Além disso, entre parênteses, indicamos o estado ao qual ele deve corresponder ou não, ou algum atributo. </p><br><p>  Dependendo da lógica e de nossas necessidades, usamos certos métodos.  Se quisermos verificar se o elemento existe, usamos o método should (exist), se queremos verificar a visibilidade do elemento, usamos shouldBe (visible) etc.  De fato, usamos apenas três formulações: should, shouldBe, shouldHave ou seu inverso shouldNot, shouldNotBe, shouldNotHave. </p><br><p>  As verificações dos elementos ou coleções de elementos são realizadas no Selenide usando os métodos descritos acima, que passam na condição de verificação.  Eles desempenham o papel de aguardar o momento em que o elemento satisfaz alguma condição e não apenas executam uma verificação na condição. </p><br><p>  A redação em Selenide é bastante lógica e compreensível.  Podemos escrever nossas verificações, usando as dicas do ambiente de desenvolvimento ou suposições lógicas.  E, por si só, sempre podemos observar o código de implementação dos métodos necessários na documentação ou a implementação do próprio método. <br></p><br><h3>  Capturas de tela automáticas no teste <br></h3><br><p>  Para <b>JUnit</b> : <br><br>  Para tirar uma captura de tela automaticamente após cada teste que falhar, você pode importar e especificar <b>Regra</b> <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.junit.screenShooter; <span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failledTests();</code> </pre><br>  Mas, na verdade, isso é um rudimento, já que o Selenide faz capturas de tela automaticamente quando os testes caem.  Isso é muito conveniente para analisar nossos erros.  Por padrão, o Selenide coloca capturas de tela na pasta <i>build / reports / tests</i> . <br><br>  Para tirar uma captura de tela automaticamente após cada teste (incluindo verde), você pode usar o seguinte comando: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failedTests().succeededTests();</code> </pre><br><p>  Para <b>TestNG,</b> também importamos: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.testng.ScreenShooter; <span class="hljs-meta"><span class="hljs-meta">@Listeners</span></span>({ ScreenShooter.class})</code> </pre><br><p>  Para tirar capturas de tela após testes em verde, você precisa chamar o seguinte comando antes de executar os testes: <br></p><br><pre> <code class="java hljs">ScreenShooter.captureSuccessfulTests = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><p>  Você também pode fazer uma captura de tela em qualquer lugar do teste em uma linha: <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> com.codeborne.selenide.selenide.screenshot; screenshot(<span class="hljs-string"><span class="hljs-string">"my_file_name"</span></span>);</code> </pre><br><p>  O Selenide criará dois arquivos: <i>my_file_name.png</i> e <i>my_file_name.html</i> <br><br></p><h3>  3. Docker: Recursos e Benefícios </h3><br><p>  Vamos diretamente ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Docker</a> e consideremos suas vantagens: <br></p><br><ul><li>  Processo de desenvolvimento acelerado.  Não é necessário instalar ferramentas auxiliares, elas podem ser executadas em contêineres </li><li>  Encapsulamento de aplicativo conveniente </li><li>  Monitoramento claro </li><li>  Escala fácil </li></ul><br><p>  Quando falamos sobre o Docker, os seguintes pontos devem ser esclarecidos: </p><br><p>  <b>Um contêiner</b> é uma instância executável que encapsula o software necessário.  Consiste em imagens.  Ele pode ser facilmente removido e recriado em um curto período de tempo. </p><br><p>  <b>Uma imagem</b> é o elemento básico de cada contêiner. </p><br><p>  <b>O Docker Hub</b> é um repositório de interface pública fornecido pela Docker Inc.  Armazena muitas imagens.  O recurso é uma fonte de imagens "oficiais" feitas pela equipe do Docker ou criadas em colaboração com um desenvolvedor de software. <br></p><br><h4>  Instalar o Docker </h4><br><p>  Para obter o Docker no Windows, acesse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">https://hub.docker.com, faça o</a> download do aplicativo <b>Docker Desktop</b> para Windows ou MacOS e instale-o posteriormente. </p><br><p>  Para o Ubuntu Linux, instale o Docker com o comando <i>sudo apt install docker.io</i> </p><br><p>  Em seguida, você precisa iniciar o Docker e configurá-lo para iniciar automaticamente quando o sistema inicializar, executando os seguintes comandos: </p><br><ul><li>  <i>sudo systemctl start docker</i> </li><li>  <i>sudo systemctl enable docker</i> </li></ul><br><br><h3>  4. Selenóide: características e benefícios </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">O Selenoid</a> é um servidor que executa navegadores isolados em contêineres do Docker. </p><br><p>  Benefícios do uso do Selenoid: </p><br><ul><li>  Ambiente unificado para executar autotestes paralelos <br></li><li>  Ambiente isolado: cada navegador é executado em um contêiner separado, o que nos permite isolar completamente o ambiente do nosso navegador <br></li><li>  Escalabilidade: o ambiente não afeta a qualidade e os testes contínuos <br></li><li>  Consumo e utilização de recursos: o Selenoid permite manter uma carga alta sem custos adicionais de recursos;  além disso, recicla todos os contêineres inativos após o final de sua sessão, mantendo constantemente a quantidade de memória livre necessária. <br></li><li>  Instalação: não leva muito tempo e é realizada, de fato, com um único comando <br></li><li>  Suporte simultâneo a várias versões de um navegador: esta opção está disponível apenas no Selenoid, para isso é necessário criar vários contêineres com os navegadores necessários <br></li><li>  Foco: o sistema operacional funciona de maneira que apenas uma janela possa estar em foco.  Ao executar vários navegadores na mesma máquina, as janelas podem começar a competir pelo foco.  O Selenoid não tem esse problema, pois cada teste é executado em um contêiner separado <br></li><li>  Interface do usuário e logs: o Selenoid permite acessar rapidamente os logs existentes.  Além disso, é possível integrar-se à pilha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ELK</a> para uma coleta e análise mais rápidas dos arquivos atuais. <br></li></ul><br><p>  Além disso, o Selenoid é bastante conveniente de usar e possui uma interface informativa. </p><br><h4>  Instale o Selenoid </h4><br><p>  Etapas preparatórias para a instalação do Selenoid: </p><br><ul><li>  É necessário um Docker instalado e em execução, pois o uso do Selenoid com o Docker é discutido em mais detalhes. <br></li><li>  A maneira mais fácil de instalar o Selenoid é fazer o download do Gerenciador de Configuração, usado para automatizar a instalação dos produtos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><b>Aerokube</b></a> , que é o Selenoid <br></li><li>  Renomeie o arquivo baixado para <i>cm.exe</i> (para facilitar a interação) <br></li><li>  Execute o Selenoid com o comando: <br><br>  <i>./cm.exe selenoid start --vnc</i> <br>  <i>./cm.exe selenoid-ui start</i> </li></ul><br>  Como resultado do <i>comando ./cm.exe selenoid start - vnc</i> , as imagens serão carregadas com o servidor VNC, ou seja, imagens nas quais a capacidade de ver a tela do navegador em tempo real está disponível.  Além disso, durante a execução deste comando, a versão mais recente do Selenoid será baixada junto com os contêineres, os arquivos executáveis ​​do driver da web, os arquivos de configuração serão criados e a última etapa iniciará o próprio Selenoid imediatamente. <br><br>  <i>Com o</i> seguinte comando <i>./cm.exe selenoid-ui</i> start, <b>baixamos</b> e executamos o <b>Selenoid UI</b> - um shell gráfico através do qual podemos ver o progresso de nossos testes em tempo real, gravações de vídeo de execução de script, exemplos de arquivos de configuração, coletar algumas estatísticas, etc. d. <br><br>  O Selenoid, por padrão, é executado na porta Selenium 4444 padrão. A porta pode ser redefinida usando a <i>opção --port</i> . <br><br>  O Selenoid foi criado para funcionar em grandes clusters Selenium e, portanto, não possui uma interface de usuário integrada.  Portanto, tente abrir <br>  Terminal para testes de <s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">host local</a> : 4444 / wd / hub</s> retornará um erro 404. <br><br><h4>  Estatísticas e sessões da interface do usuário Selenoid </h4><br>  A interface do usuário do Selenoid está disponível em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http: // localhost: 8080 /</a> <br><br><img src="https://habrastorage.org/webt/_f/oy/rb/_foyrbnw27c5zmpypzanlfdzwdu.png"><br><p>  Aqui podemos nos familiarizar com estatísticas e sessões.  Veja o uso atual da cota, navegadores pendentes e a própria fila.  A interface do usuário do Selenoid recebe atualizações por meio do SSE, portanto, você não precisa atualizar a página do seu navegador para ver o que acontece.  Após interrupções temporárias, o conteúdo da página será atualizado automaticamente. <br></p><br><p>  Se estivermos falando sobre testes simultâneos em vários dispositivos: por exemplo, temos um aplicativo Web multiplataforma com funcionalidade de bate-papo em tempo real, podemos testar simultaneamente a interação entre eles, o que certamente é conveniente. </p><br><h4>  Recursos da interface do usuário Selenoid </h4><br>  A interface do usuário do Selenoid também possui os seguintes recursos: <br><br><img src="https://habrastorage.org/webt/rv/0t/pj/rv0tpju5jxdgoyveokqbuhq5_la.png"><br><br>  Podemos escolher um navegador da lista de navegadores disponíveis e a interface do usuário nos fornecerá um exemplo de configuração com os <i>recursos</i> corretos.  A captura de tela mostra que os exemplos estão disponíveis para vários idiomas. <br><br><img src="https://habrastorage.org/webt/yq/fr/cl/yqfrclbbutpdlszforvqlyjl2tq.png"><br><br>  Ao escolher um navegador, podemos iniciá-lo manualmente diretamente na interface.  Durante a execução dos testes, é possível conectar-se à porta <i>vnc</i> em tempo real e obter acesso à tela do navegador desejado e até intervir no processo de execução de autotestes. <br><br><h4>  Logs e VNC </h4><br><p>  Se você usar o recurso <i>enabaleVnc = true</i> , poderá ver uma lista de estatísticas disponíveis na página.  O VNC nos permite ver o navegador e interagir com ele.  Enquanto nosso log exibirá todas as ações do navegador. </p><br>  Sessão VNC: <br><img src="https://habrastorage.org/webt/7p/pz/k1/7ppzk1cvnbmulvkndmifleukq1u.png"><br><br>  O modo VNC em tela cheia é o seguinte: <br><img src="https://habrastorage.org/webt/28/ot/4j/28ot4j3qmtke8tnzah8fsja-4eq.png"><br><br>  Você também pode ver os logs de contêiner do docker para cada sessão, mesmo sem o VNC.  Ou seja, se, por exemplo, você não usou o sinalizador --vnc ao instalar o próprio Selenoid, verá apenas os logs. <br><img src="https://habrastorage.org/webt/bc/qx/cj/bcqxcjiqbxv5-agmiq60ejiohwi.png"><br><br>  Também é possível assistir a vídeos de nossos testes.  Você pode acessar os arquivos de vídeo abrindo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http: // localhost: 4444 / video /</a> ou indo para a guia "Vídeos" na interface do usuário do Selenoid. <br><br><h4>  Conectando-se a um projeto Selenide Selenoid para executar seus testes em um contêiner de docker </h4><br>  Para conectar o Selenoid, à anotação <b>BeforeClass</b> , precisamos adicionar a seguinte configuração: <br><br><pre> <code class="java hljs">Configuration.remote = <span class="hljs-string"><span class="hljs-string">"http://localhost:4444/wd/hub"</span></span>; Configuration.browser = <span class="hljs-string"><span class="hljs-string">"chrome"</span></span>; Configuration.browserSize = <span class="hljs-string"><span class="hljs-string">"1920x1080"</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVNC"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVideo"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); Configuration.browserCapabilities = capabilities;</code> </pre> <br>  <i>Excluímos</i> a <i>propriedade baseurl</i> , que indicava em qual navegador os testes foram executados, já que agora usamos a propriedade <br>  <i>Configuration.browser = "chrome"</i> ; <br><br>  Em um projeto, fica assim: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Url    Configuration.remote = "http://10.0.75.1:4444/wd/hub"; //     Configuration.browser = "chrome"; //   Configuration.browserSize = "1920x1080"; //   DesiredCapabilities,         - DesiredCapabilities capabilities = new DesiredCapabilities(); //         capabilities.setCapability(capabilityName: "enableVNC", value: true); //       capabilities.setCapability(capabilityName: "enableVideo", value: true); // Browser capabilities Configuration.browserCapabilities = capabilities;</span></span></code> </pre><br><h4>   Selenoid </h4><br><ul><li>     :  Selenoid      <i>Tmpfs</i> –   ,       .   ,  ,   ,      . </li><li> Selenoid     :          .           <i>Browser Capabilities</i> . </li><li>  :    Selenoid    Google Chrome      <i>true</i>     <i>Browser Capabilities</i> : <br><br> <i>ChromeOptions options = new ChromeOptions();</i> <br> <i>options.setCapability(“enableVideo”,true);</i> </li></ul><br><h4>  Selenoid  Docker </h4><br> Selenoid     ,   ,      . ,  Windows    Internet Explorer,     . Selenoid     “”   Selenium   Internet Explorer, Firefox  Chrome  Windows, ,   Selenoid  Internet Explorer. <br><br>    : <br><br> 1.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">IEDriverServer</a>     -  (   C: \) <br><br> 2.     <a href="" rel="nofollow">Selenoid</a> <br><br> 3.    <i>browsers.json</i> <br><br>   browsers.json: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"internet explorer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"11"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: [<span class="hljs-string"><span class="hljs-string">"C:\\IEDriverServer.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"--log-level=DEBUG"</span></span>] } } } }</code> </pre> <br><br> 4.  Selenoid: <br> <i>./selenoid_win_amd64.exe -conf ./browsers.json -disable-docker</i> <br><br> 5.  ,  endpoint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http://localhost:4444/wd/hub</a>   <i>capabilities</i> : <br> <i>browserName = internet explorer</i> <br> <i>version = 11</i> <br><br> 6.  ,   Chrome,     Chromedriver , ,  browsers.json <br><br> 7.   Selenoid     ,    Selenoid   <i>-capture-driver-logs</i> ,          . <br><br><h4>   </h4><br>    <b>Selenide + Selenoid</b>  <b>Docker</b>         .   ,                      ,       ,           . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473454/">https://habr.com/ru/post/pt473454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473440/index.html">A psicologia mínima necessária para o líder</a></li>
<li><a href="../pt473442/index.html">Definitivamente, algo vai dar errado, e tudo bem: como ganhar um hackathon com uma equipe de três</a></li>
<li><a href="../pt473444/index.html">Acordo de não concorrência: o principal é não ter medo</a></li>
<li><a href="../pt473446/index.html">DevOops grátis 2019 e C ++ Russia 2019 Piter</a></li>
<li><a href="../pt473452/index.html">Inteligência Artificial Robótica InterSystems IRIS</a></li>
<li><a href="../pt473456/index.html">A última fronteira de controle de qualidade de defesa: detecção automática de erros</a></li>
<li><a href="../pt473460/index.html">Para a questão da matemática</a></li>
<li><a href="../pt473462/index.html">Semana 44 de segurança: NordVPN, TorGuard e Half Hack</a></li>
<li><a href="../pt473470/index.html">GitLab 12.4 com solicitação aprimorada de mesclagem e dependências da API de auditoria</a></li>
<li><a href="../pt473476/index.html">Verificando o wrapper OpenCvSharp sobre o OpenCV com o PVS-Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>