<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèæ üåâ üö∂üèº Teste a automa√ß√£o usando o Selenide atrav√©s do Selenoid em um cont√™iner de encaixe ü§üüèæ üìã üë®‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo ser√° √∫til para especialistas em controle de qualidade iniciantes, bem como para aqueles que est√£o interessados ‚Äã‚Äãnos recursos e capacidade...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Teste a automa√ß√£o usando o Selenide atrav√©s do Selenoid em um cont√™iner de encaixe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473454/"><p> Este artigo ser√° √∫til para especialistas em controle de qualidade iniciantes, bem como para aqueles que est√£o interessados ‚Äã‚Äãnos recursos e capacidades de estruturas de teste populares como Selenide e Selenoid. <br><br>  Aqui n√≥s olhamos para um projeto b√°sico no Selenium.  Veremos como conectar <b>Selenium</b> e <b>TestNG</b> ao projeto, um exemplo de Objeto de P√°gina com uma descri√ß√£o dos elementos da p√°gina e dos m√©todos utilizados. <br><br>  Al√©m disso, familiaridade com o <b>Selenide</b> : consideraremos o pr√≥prio quadro, suas principais caracter√≠sticas e vantagens, adicionando o Selenide a um projeto de teste.  Considere trabalhar com elementos, verifica√ß√µes e expectativas dispon√≠veis no Selenide. <br><br>  E, finalmente, <b>vamos conectar a</b> estrutura <b>Selenoid</b> ao nosso projeto para executar testes no cont√™iner <b>Docker</b> e fora dele. <br><br><img src="https://habrastorage.org/webt/fq/0u/6m/fq0u6mqwmrsun_01cyazmpwa6yc.jpeg"><br><a name="habracut"></a><br><br>  <i>* O artigo foi preparado com base em um relat√≥rio de Nikita Kalinichenko - especialista s√™nior em controle de qualidade da IntexSoft.</i> <i><br></i>  <i>O artigo cont√©m links para materiais externos.</i> <br></p><br><h3>  1. Sel√™nio + TesteNG </h3><br>  Estamos considerando um projeto no <b>construtor Maven</b> , para que possamos encontrar uma descri√ß√£o da estrutura do projeto no arquivo <i>pom.xml</i> .  Para usar o <b>Selenium</b> e o <b>TestNG</b> , depend√™ncias apropriadas devem ser adicionadas ao nosso arquivo <i>pom.xml</i> .  Voc√™ pode observ√°-los entre as tags de <i>depend√™ncias</i> abaixo: <br><br><pre><code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;project xmlns=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span> xmlns:xsi=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span> xsi:schemaLocation=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span>&gt; &lt;modelVersion&gt;<span class="hljs-number"><span class="hljs-number">4.0</span></span>.0&lt;/modelVersion&gt; &lt;groupId&gt;test&lt;/groupId&gt; &lt;artifactId&gt;test&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">1.0</span></span>-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.141</span></span>.59&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.testing&lt;/groupId&gt; &lt;artifactId&gt;testing&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">6.14</span></span>.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt;</code> </pre> <br>  A seguir, veremos um exemplo de um objeto de p√°gina: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WebDriver driver)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.driver = driver; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By emailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By confirmEmailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-confirm-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By passwordField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-password"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By displayNameField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-displayname"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By monthDropDown = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-month"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By dayField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-day"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By yearField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-year"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By shareCheckbox = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-thirdparty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By registerButton = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-button-email-submit"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       driver.findElement(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailFriend(String email) {...} //    password public SignUpPage typePassword(String Password) {...} //      public SignUpPage typeName(String name) {...} //   public SignUpPage setMonth(String month) {...} //    Day public SignUpPage typeDay(String day) {...} //    Year public SignUpPage typeYear(String year) {...}</span></span></code> </pre> <br>  Como vemos, na parte superior do arquivo java h√° uma descri√ß√£o das vari√°veis ‚Äã‚Äãcom localizadores para os elementos da p√°gina de registro.  Abaixo da se√ß√£o vari√°vel, existem m√©todos diretamente para interagir com os elementos de nossa p√°gina. <br><br>  Vamos abrir os testes eles mesmos: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    private WebDriver driver; //   private SignUpPage page; @BeforeMethod public void setUp() { //    geckodriver System.setProperty("webdriver.gecko.driver", "C:\\Users\\Nikita\\IdeaProjects\\autotests_examples\\drivers\\geckodriver.exe"); //   driver = new FirefoxDriver(); //  ,       driver.manage().timeouts().impicitlyWait(10, TimeUnit.SECONDS); // url      webdrivera get driver.get("https://www.spotify.com/us/signup/"); }</span></span></code> </pre> <br>  Como voc√™ pode ver, na anota√ß√£o <b>BeforeMethod</b> , descrevemos o que teremos antes de cada m√©todo. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">typeInvalidYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          driver page = new SignUpPage(driver); //  page.setMonth("December"); //  .typeDay("20") //  .typeYear("85") //  .setShare(true); //  ,    ; Assert.assertTrue(page.isErrorVisible("Please enter a valid year."));</span></span></code> </pre> <br>  A anota√ß√£o <b>Teste fornece</b> c√≥digo para m√©todos de teste. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AfterMethod</span></span> <span class="hljs-comment"><span class="hljs-comment">//,   public void tearDown() { driver.quit(); }</span></span></code> </pre><br>  E a anota√ß√£o <b>AfterMethod</b> cont√©m c√≥digo que deve ser executado ap√≥s cada m√©todo. <br><br>  Ao executar testes usando o <b>Selenium</b> , ocorrer√° o seguinte: <br><br><ol><li>  Abrindo uma Janela do Navegador Separada </li><li>  Ir para o URL </li><li>  Execu√ß√£o do c√≥digo de teste </li><li>  Feche a janela da sess√£o e do navegador ap√≥s cada teste </li></ol><br>  O pr√≥ximo teste far√° o mesmo.  Deve-se mencionar que a execu√ß√£o de testes no Selenium √© um processo que consome muitos recursos. <br><br><h3>  2. Selenide: o que, onde e como </h3><br>  O que √© o pr√≥prio <b>Selenide</b> , quais s√£o suas principais caracter√≠sticas e vantagens? <br><br>  Em resumo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Selenide</a> √© um inv√≥lucro do Selenium WebDriver que facilita o uso r√°pido e f√°cil ao escrever testes.  No essencial, o Selenide √© uma ferramenta para automatizar a√ß√µes do usu√°rio em um navegador, focada na conveni√™ncia e facilidade de implementar l√≥gica de neg√≥cios em autotestes no idioma do usu√°rio, sem se distrair com os detalhes t√©cnicos do trabalho com o ‚Äúdriver do navegador‚Äù.  Por exemplo, n√£o precisamos nos concentrar em trabalhar com as expectativas dos elementos no processo de automatiza√ß√£o do teste de aplicativos din√¢micos da Web, bem como na implementa√ß√£o de a√ß√µes de alto n√≠vel nos elementos. <br><br>  Principais e principais vantagens do Selenide: <br><br><ul><li>  Sintaxe concisa no estilo jQuery </li><li>  Resolva automaticamente a maioria dos problemas com o Ajax, expectativas e tempos limite </li><li>  Gerenciamento da vida do navegador </li><li>  Criar capturas de tela automaticamente </li></ul><br>  O objetivo do Selenide √© focar na l√≥gica de neg√≥cios dos testes e n√£o "desperdi√ßar" energia mental em detalhes t√©cnicos. <br><br><h4>  Tradu√ß√£o do projeto no Selenide </h4><br>  Para conectar o Selenide e come√ßar a trabalhar com ele, no arquivo <i>pom.xml</i> entre <i>as</i> tags de <i>depend√™ncias</i> , indicamos a depend√™ncia do Selenide.  Como n√£o precisamos mais do v√≠cio em sel√™nio, simplesmente o removemos. <br><br><pre> <code class="java hljs">&lt;dependency&gt; &lt;groupId&gt;com.codeborne&lt;/groupId&gt; &lt;artifactId&gt;selenide&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.2</span></span>.8&lt;/version&gt; &lt;/dependency&gt;</code> </pre> <br>  Al√©m disso, para conectar e come√ßar a usar o Selenide em nosso projeto, precisamos fazer v√°rias importa√ß√µes.  Exemplos de importa√ß√£o: <br><br>  <i>importar est√°tico com.codeborne.selenide.Selenide. *;</i> <br>  <i>importar est√°tico com.codeborne.selenide.Selectors. *;</i> <br>  <i>importar est√°tico com.codeborne.selenide.Condition. *;</i> <br>  <i>importar est√°tico com.codeborne.selenide.CollectionCondition. *;</i> <br><br>  Para obter mais informa√ß√µes sobre como conectar o Selenide usando o restante dos construtores de projetos, consulte a se√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">In√≠cio r√°pido</a> da documenta√ß√£o do Selenide. <br><br><h4>  Trabalhar com elementos, verifica√ß√µes e expectativas </h4><br>  Vamos passar ao trabalho do Selenide com elementos e nos familiarizar com algumas das verifica√ß√µes e expectativas dispon√≠veis para n√≥s no Selenide. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    private SignUpPage page; @BeforeClass public static void setUp() { //Property baseurl,     Configuration     url baseurl = "https://www.spotify.com"; //Property browser,     Configuration          browser = "chrome"; }</span></span></code> </pre> <br>  No arquivo de teste, substitu√≠mos a anota√ß√£o <b>BeforeMethod pela</b> anota√ß√£o <b>BeforeClass</b> , j√° que n√£o precisamos mais dela, o Selenide elimina a necessidade de escrever os m√©todos Before e After - o <b>Selenide</b> assume a fun√ß√£o AfterMethod.  S√≥ temos a anota√ß√£o <b>BeforeClass</b> para registrar algumas <i>propriedades</i> . <br><br>  Na anota√ß√£o <b>BeforeClass,</b> registramos uma <i>propriedade baseurl</i> , que est√° na classe de <i>configura√ß√£o</i> e ser√° o URL base.  Portanto, o <i>driver.get</i> , que usamos nos testes do Selenium, n√£o √© mais necess√°rio.  No <i>navegador de propriedades,</i> configuramos o navegador no qual executaremos nossos testes. <br><br>  Em nosso projeto de teste, podemos abandonar completamente o driver Selenium, o Selenide cuidar√° de todo o trabalho com ele, encapsulando-o em suas classes.  N√≥s apenas teremos que focar na l√≥gica dos pr√≥prios testes. <br><br>  Vamos usar o Selenide em nossa p√°gina: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//       Selenide open public SignUpPage open() { //   Selenide.open (relativeOrAbsoluteUrl: "/us/signup/"); return this; } //    email public SignUpPage typeEmail(string Email) { //       $(emailFriend).sendKeys(email); return this; }</span></span></code> </pre> <br>  Quando voc√™ chama o m√©todo <i>aberto</i> , o Selenide inicia o pr√≥prio navegador e abre a p√°gina.  Ele tamb√©m garante que o navegador seja fechado no final.  Em Selenide.  <i>aberto,</i> podemos registrar o caminho completo com <i>http</i> ou passar algum relativo ao <i>URL</i> baseurl - <i>relativo</i> .  Como <i>baseurl,</i> especificamos o caminho absoluto, portanto, no m√©todo Selenide.  <i>abrir</i> , ser√° o suficiente para especificarmos "/". <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       $(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailField(String email) { //       $(confirmEmailField).setValue(email); return this; }</span></span></code> </pre><br><p>  Para encontrar um elemento usando o Selenide, precisamos especificar <b>$ em</b> vez de <i>driver.findElement</i> , que √© usado no Selenium.  Ou seja, usando o m√©todo de um caractere de comprimento, podemos encontrar diretamente o pr√≥prio elemento.  Por padr√£o, o m√©todo de pesquisa √© aceito como uma sequ√™ncia, semelhante √† biblioteca JavaScript do jQuery. <br><br>  Para usar o Selenide para encontrar uma lista de elementos, voc√™ precisa especificar dois caracteres <b>$$</b> .  Em vez de <i>List &lt;WebElement</i> , prescrevemos <i>ElementsCollection</i> , que j√° √© estendido por m√©todos adicionais. <br></p><br><p>  Para trabalhar com elementos, podemos usar os m√©todos Selenium padr√£o <i>(sendKeys ())</i> e <i>setValue ()</i> ou uma vers√£o mais curta de <i>val ()</i> . <br></p><br><p>  Com base no nome, como vemos, os m√©todos Selenide s√£o mais compreens√≠veis.  O m√©todo <i>click ()</i> permanece assim.  Embora o Selenide tenha v√°rios m√©todos <i>click (): contextClick ()</i> (simulando um clique com o bot√£o direito do mouse), <i>doubleClick ()</i> (simulando um clique duplo em um elemento), etc.  Depois de encontrar um elemento, podemos continuar a pesquisa usando outros localizadores. </p><br><p>  O m√©todo Selenide <i>find ()</i> difere do m√©todo Selenium <i>driver.findElement (By)</i> , pois ele pode receber imediatamente seletores CSS e opera com elementos Selenide, e n√£o com elementos da Web.  Basicamente, os elementos Selenide s√£o mais inteligentes e com seus m√©todos alternativos aos elementos Web Selenium. </p><br><p>  O Selenide j√° cont√©m m√©todos que precisariam ser executados atrav√©s de alguma classe de <i>a√ß√£o</i> ou de alguma outra maneira.  Ele permite que voc√™ escreva m√©todos concisos e "bonitos", escritos em uma linguagem compreens√≠vel para todos.  O Selenide tamb√©m possui uma grande flexibilidade, gra√ßas √† qual podemos usar os recursos padr√£o do Selenium. </p><br><p>  Outros m√©todos Selenide tamb√©m podem ser encontrados na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">documenta√ß√£o oficial</a> . <br></p><br><p>  Considere os exemplos amplos e compreens√≠veis de verifica√ß√µes que o Selenide nos fornece: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     page.getError("Please enter a valid year.").shouldBe(Condition.visible); //  ,      page.getError("When were you born?").shouldNotBe(Condition.visible); //       page.getErrors().shoildHave(CollectionCondition.size(6)); //      page.getErrorByNumber(3).shouldHave(Condition.text("Please enter your birth month."));</span></span></code> </pre><br><p>  O esquema de verifica√ß√£o Selenide nos permite pegar um elemento, encontr√°-lo e usar as seguintes formula√ß√µes para ele: should, shouldBe, shouldHave, shouldNot, shouldNotBe and shouldNotHave.  O esquema de verifica√ß√£o √© reduzido para encontrar o elemento e cham√°-lo dessas formula√ß√µes.  Al√©m disso, entre par√™nteses, indicamos o estado ao qual ele deve corresponder ou n√£o, ou algum atributo. </p><br><p>  Dependendo da l√≥gica e de nossas necessidades, usamos certos m√©todos.  Se quisermos verificar se o elemento existe, usamos o m√©todo should (exist), se queremos verificar a visibilidade do elemento, usamos shouldBe (visible) etc.  De fato, usamos apenas tr√™s formula√ß√µes: should, shouldBe, shouldHave ou seu inverso shouldNot, shouldNotBe, shouldNotHave. </p><br><p>  As verifica√ß√µes dos elementos ou cole√ß√µes de elementos s√£o realizadas no Selenide usando os m√©todos descritos acima, que passam na condi√ß√£o de verifica√ß√£o.  Eles desempenham o papel de aguardar o momento em que o elemento satisfaz alguma condi√ß√£o e n√£o apenas executam uma verifica√ß√£o na condi√ß√£o. </p><br><p>  A reda√ß√£o em Selenide √© bastante l√≥gica e compreens√≠vel.  Podemos escrever nossas verifica√ß√µes, usando as dicas do ambiente de desenvolvimento ou suposi√ß√µes l√≥gicas.  E, por si s√≥, sempre podemos observar o c√≥digo de implementa√ß√£o dos m√©todos necess√°rios na documenta√ß√£o ou a implementa√ß√£o do pr√≥prio m√©todo. <br></p><br><h3>  Capturas de tela autom√°ticas no teste <br></h3><br><p>  Para <b>JUnit</b> : <br><br>  Para tirar uma captura de tela automaticamente ap√≥s cada teste que falhar, voc√™ pode importar e especificar <b>Regra</b> <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.junit.screenShooter; <span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failledTests();</code> </pre><br>  Mas, na verdade, isso √© um rudimento, j√° que o Selenide faz capturas de tela automaticamente quando os testes caem.  Isso √© muito conveniente para analisar nossos erros.  Por padr√£o, o Selenide coloca capturas de tela na pasta <i>build / reports / tests</i> . <br><br>  Para tirar uma captura de tela automaticamente ap√≥s cada teste (incluindo verde), voc√™ pode usar o seguinte comando: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failedTests().succeededTests();</code> </pre><br><p>  Para <b>TestNG,</b> tamb√©m importamos: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.testng.ScreenShooter; <span class="hljs-meta"><span class="hljs-meta">@Listeners</span></span>({ ScreenShooter.class})</code> </pre><br><p>  Para tirar capturas de tela ap√≥s testes em verde, voc√™ precisa chamar o seguinte comando antes de executar os testes: <br></p><br><pre> <code class="java hljs">ScreenShooter.captureSuccessfulTests = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><p>  Voc√™ tamb√©m pode fazer uma captura de tela em qualquer lugar do teste em uma linha: <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> com.codeborne.selenide.selenide.screenshot; screenshot(<span class="hljs-string"><span class="hljs-string">"my_file_name"</span></span>);</code> </pre><br><p>  O Selenide criar√° dois arquivos: <i>my_file_name.png</i> e <i>my_file_name.html</i> <br><br></p><h3>  3. Docker: Recursos e Benef√≠cios </h3><br><p>  Vamos diretamente ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Docker</a> e consideremos suas vantagens: <br></p><br><ul><li>  Processo de desenvolvimento acelerado.  N√£o √© necess√°rio instalar ferramentas auxiliares, elas podem ser executadas em cont√™ineres </li><li>  Encapsulamento de aplicativo conveniente </li><li>  Monitoramento claro </li><li>  Escala f√°cil </li></ul><br><p>  Quando falamos sobre o Docker, os seguintes pontos devem ser esclarecidos: </p><br><p>  <b>Um cont√™iner</b> √© uma inst√¢ncia execut√°vel que encapsula o software necess√°rio.  Consiste em imagens.  Ele pode ser facilmente removido e recriado em um curto per√≠odo de tempo. </p><br><p>  <b>Uma imagem</b> √© o elemento b√°sico de cada cont√™iner. </p><br><p>  <b>O Docker Hub</b> √© um reposit√≥rio de interface p√∫blica fornecido pela Docker Inc.  Armazena muitas imagens.  O recurso √© uma fonte de imagens "oficiais" feitas pela equipe do Docker ou criadas em colabora√ß√£o com um desenvolvedor de software. <br></p><br><h4>  Instalar o Docker </h4><br><p>  Para obter o Docker no Windows, acesse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">https://hub.docker.com, fa√ßa o</a> download do aplicativo <b>Docker Desktop</b> para Windows ou MacOS e instale-o posteriormente. </p><br><p>  Para o Ubuntu Linux, instale o Docker com o comando <i>sudo apt install docker.io</i> </p><br><p>  Em seguida, voc√™ precisa iniciar o Docker e configur√°-lo para iniciar automaticamente quando o sistema inicializar, executando os seguintes comandos: </p><br><ul><li>  <i>sudo systemctl start docker</i> </li><li>  <i>sudo systemctl enable docker</i> </li></ul><br><br><h3>  4. Selen√≥ide: caracter√≠sticas e benef√≠cios </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">O Selenoid</a> √© um servidor que executa navegadores isolados em cont√™ineres do Docker. </p><br><p>  Benef√≠cios do uso do Selenoid: </p><br><ul><li>  Ambiente unificado para executar autotestes paralelos <br></li><li>  Ambiente isolado: cada navegador √© executado em um cont√™iner separado, o que nos permite isolar completamente o ambiente do nosso navegador <br></li><li>  Escalabilidade: o ambiente n√£o afeta a qualidade e os testes cont√≠nuos <br></li><li>  Consumo e utiliza√ß√£o de recursos: o Selenoid permite manter uma carga alta sem custos adicionais de recursos;  al√©m disso, recicla todos os cont√™ineres inativos ap√≥s o final de sua sess√£o, mantendo constantemente a quantidade de mem√≥ria livre necess√°ria. <br></li><li>  Instala√ß√£o: n√£o leva muito tempo e √© realizada, de fato, com um √∫nico comando <br></li><li>  Suporte simult√¢neo a v√°rias vers√µes de um navegador: esta op√ß√£o est√° dispon√≠vel apenas no Selenoid, para isso √© necess√°rio criar v√°rios cont√™ineres com os navegadores necess√°rios <br></li><li>  Foco: o sistema operacional funciona de maneira que apenas uma janela possa estar em foco.  Ao executar v√°rios navegadores na mesma m√°quina, as janelas podem come√ßar a competir pelo foco.  O Selenoid n√£o tem esse problema, pois cada teste √© executado em um cont√™iner separado <br></li><li>  Interface do usu√°rio e logs: o Selenoid permite acessar rapidamente os logs existentes.  Al√©m disso, √© poss√≠vel integrar-se √† pilha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ELK</a> para uma coleta e an√°lise mais r√°pidas dos arquivos atuais. <br></li></ul><br><p>  Al√©m disso, o Selenoid √© bastante conveniente de usar e possui uma interface informativa. </p><br><h4>  Instale o Selenoid </h4><br><p>  Etapas preparat√≥rias para a instala√ß√£o do Selenoid: </p><br><ul><li>  √â necess√°rio um Docker instalado e em execu√ß√£o, pois o uso do Selenoid com o Docker √© discutido em mais detalhes. <br></li><li>  A maneira mais f√°cil de instalar o Selenoid √© fazer o download do Gerenciador de Configura√ß√£o, usado para automatizar a instala√ß√£o dos produtos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><b>Aerokube</b></a> , que √© o Selenoid <br></li><li>  Renomeie o arquivo baixado para <i>cm.exe</i> (para facilitar a intera√ß√£o) <br></li><li>  Execute o Selenoid com o comando: <br><br>  <i>./cm.exe selenoid start --vnc</i> <br>  <i>./cm.exe selenoid-ui start</i> </li></ul><br>  Como resultado do <i>comando ./cm.exe selenoid start - vnc</i> , as imagens ser√£o carregadas com o servidor VNC, ou seja, imagens nas quais a capacidade de ver a tela do navegador em tempo real est√° dispon√≠vel.  Al√©m disso, durante a execu√ß√£o deste comando, a vers√£o mais recente do Selenoid ser√° baixada junto com os cont√™ineres, os arquivos execut√°veis ‚Äã‚Äãdo driver da web, os arquivos de configura√ß√£o ser√£o criados e a √∫ltima etapa iniciar√° o pr√≥prio Selenoid imediatamente. <br><br>  <i>Com o</i> seguinte comando <i>./cm.exe selenoid-ui</i> start, <b>baixamos</b> e executamos o <b>Selenoid UI</b> - um shell gr√°fico atrav√©s do qual podemos ver o progresso de nossos testes em tempo real, grava√ß√µes de v√≠deo de execu√ß√£o de script, exemplos de arquivos de configura√ß√£o, coletar algumas estat√≠sticas, etc. d. <br><br>  O Selenoid, por padr√£o, √© executado na porta Selenium 4444 padr√£o. A porta pode ser redefinida usando a <i>op√ß√£o --port</i> . <br><br>  O Selenoid foi criado para funcionar em grandes clusters Selenium e, portanto, n√£o possui uma interface de usu√°rio integrada.  Portanto, tente abrir <br>  Terminal para testes de <s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">host local</a> : 4444 / wd / hub</s> retornar√° um erro 404. <br><br><h4>  Estat√≠sticas e sess√µes da interface do usu√°rio Selenoid </h4><br>  A interface do usu√°rio do Selenoid est√° dispon√≠vel em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http: // localhost: 8080 /</a> <br><br><img src="https://habrastorage.org/webt/_f/oy/rb/_foyrbnw27c5zmpypzanlfdzwdu.png"><br><p>  Aqui podemos nos familiarizar com estat√≠sticas e sess√µes.  Veja o uso atual da cota, navegadores pendentes e a pr√≥pria fila.  A interface do usu√°rio do Selenoid recebe atualiza√ß√µes por meio do SSE, portanto, voc√™ n√£o precisa atualizar a p√°gina do seu navegador para ver o que acontece.  Ap√≥s interrup√ß√µes tempor√°rias, o conte√∫do da p√°gina ser√° atualizado automaticamente. <br></p><br><p>  Se estivermos falando sobre testes simult√¢neos em v√°rios dispositivos: por exemplo, temos um aplicativo Web multiplataforma com funcionalidade de bate-papo em tempo real, podemos testar simultaneamente a intera√ß√£o entre eles, o que certamente √© conveniente. </p><br><h4>  Recursos da interface do usu√°rio Selenoid </h4><br>  A interface do usu√°rio do Selenoid tamb√©m possui os seguintes recursos: <br><br><img src="https://habrastorage.org/webt/rv/0t/pj/rv0tpju5jxdgoyveokqbuhq5_la.png"><br><br>  Podemos escolher um navegador da lista de navegadores dispon√≠veis e a interface do usu√°rio nos fornecer√° um exemplo de configura√ß√£o com os <i>recursos</i> corretos.  A captura de tela mostra que os exemplos est√£o dispon√≠veis para v√°rios idiomas. <br><br><img src="https://habrastorage.org/webt/yq/fr/cl/yqfrclbbutpdlszforvqlyjl2tq.png"><br><br>  Ao escolher um navegador, podemos inici√°-lo manualmente diretamente na interface.  Durante a execu√ß√£o dos testes, √© poss√≠vel conectar-se √† porta <i>vnc</i> em tempo real e obter acesso √† tela do navegador desejado e at√© intervir no processo de execu√ß√£o de autotestes. <br><br><h4>  Logs e VNC </h4><br><p>  Se voc√™ usar o recurso <i>enabaleVnc = true</i> , poder√° ver uma lista de estat√≠sticas dispon√≠veis na p√°gina.  O VNC nos permite ver o navegador e interagir com ele.  Enquanto nosso log exibir√° todas as a√ß√µes do navegador. </p><br>  Sess√£o VNC: <br><img src="https://habrastorage.org/webt/7p/pz/k1/7ppzk1cvnbmulvkndmifleukq1u.png"><br><br>  O modo VNC em tela cheia √© o seguinte: <br><img src="https://habrastorage.org/webt/28/ot/4j/28ot4j3qmtke8tnzah8fsja-4eq.png"><br><br>  Voc√™ tamb√©m pode ver os logs de cont√™iner do docker para cada sess√£o, mesmo sem o VNC.  Ou seja, se, por exemplo, voc√™ n√£o usou o sinalizador --vnc ao instalar o pr√≥prio Selenoid, ver√° apenas os logs. <br><img src="https://habrastorage.org/webt/bc/qx/cj/bcqxcjiqbxv5-agmiq60ejiohwi.png"><br><br>  Tamb√©m √© poss√≠vel assistir a v√≠deos de nossos testes.  Voc√™ pode acessar os arquivos de v√≠deo abrindo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http: // localhost: 4444 / video /</a> ou indo para a guia "V√≠deos" na interface do usu√°rio do Selenoid. <br><br><h4>  Conectando-se a um projeto Selenide Selenoid para executar seus testes em um cont√™iner de docker </h4><br>  Para conectar o Selenoid, √† anota√ß√£o <b>BeforeClass</b> , precisamos adicionar a seguinte configura√ß√£o: <br><br><pre> <code class="java hljs">Configuration.remote = <span class="hljs-string"><span class="hljs-string">"http://localhost:4444/wd/hub"</span></span>; Configuration.browser = <span class="hljs-string"><span class="hljs-string">"chrome"</span></span>; Configuration.browserSize = <span class="hljs-string"><span class="hljs-string">"1920x1080"</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVNC"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVideo"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); Configuration.browserCapabilities = capabilities;</code> </pre> <br>  <i>Exclu√≠mos</i> a <i>propriedade baseurl</i> , que indicava em qual navegador os testes foram executados, j√° que agora usamos a propriedade <br>  <i>Configuration.browser = "chrome"</i> ; <br><br>  Em um projeto, fica assim: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Url    Configuration.remote = "http://10.0.75.1:4444/wd/hub"; //     Configuration.browser = "chrome"; //   Configuration.browserSize = "1920x1080"; //   DesiredCapabilities,         - DesiredCapabilities capabilities = new DesiredCapabilities(); //         capabilities.setCapability(capabilityName: "enableVNC", value: true); //       capabilities.setCapability(capabilityName: "enableVideo", value: true); // Browser capabilities Configuration.browserCapabilities = capabilities;</span></span></code> </pre><br><h4>   Selenoid </h4><br><ul><li>     :  Selenoid      <i>Tmpfs</i> ‚Äì   ,       .   ,  ,   ,      . </li><li> Selenoid     :          .           <i>Browser Capabilities</i> . </li><li>  :    Selenoid    Google Chrome      <i>true</i>     <i>Browser Capabilities</i> : <br><br> <i>ChromeOptions options = new ChromeOptions();</i> <br> <i>options.setCapability(‚ÄúenableVideo‚Äù,true);</i> </li></ul><br><h4>  Selenoid  Docker </h4><br> Selenoid     ,   ,      . ,  Windows    Internet Explorer,     . Selenoid     ‚Äú‚Äù   Selenium   Internet Explorer, Firefox  Chrome  Windows, ,   Selenoid  Internet Explorer. <br><br>    : <br><br> 1.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">IEDriverServer</a>     -  (   C: \) <br><br> 2.     <a href="" rel="nofollow">Selenoid</a> <br><br> 3.    <i>browsers.json</i> <br><br>   browsers.json: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"internet explorer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"11"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: [<span class="hljs-string"><span class="hljs-string">"C:\\IEDriverServer.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"--log-level=DEBUG"</span></span>] } } } }</code> </pre> <br><br> 4.  Selenoid: <br> <i>./selenoid_win_amd64.exe -conf ./browsers.json -disable-docker</i> <br><br> 5.  ,  endpoint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">http://localhost:4444/wd/hub</a>   <i>capabilities</i> : <br> <i>browserName = internet explorer</i> <br> <i>version = 11</i> <br><br> 6.  ,   Chrome,     Chromedriver , ,  browsers.json <br><br> 7.   Selenoid     ,    Selenoid   <i>-capture-driver-logs</i> ,          . <br><br><h4>   </h4><br>    <b>Selenide + Selenoid</b>  <b>Docker</b>         .   ,                      ,       ,           . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473454/">https://habr.com/ru/post/pt473454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473440/index.html">A psicologia m√≠nima necess√°ria para o l√≠der</a></li>
<li><a href="../pt473442/index.html">Definitivamente, algo vai dar errado, e tudo bem: como ganhar um hackathon com uma equipe de tr√™s</a></li>
<li><a href="../pt473444/index.html">Acordo de n√£o concorr√™ncia: o principal √© n√£o ter medo</a></li>
<li><a href="../pt473446/index.html">DevOops gr√°tis 2019 e C ++ Russia 2019 Piter</a></li>
<li><a href="../pt473452/index.html">Intelig√™ncia Artificial Rob√≥tica InterSystems IRIS</a></li>
<li><a href="../pt473456/index.html">A √∫ltima fronteira de controle de qualidade de defesa: detec√ß√£o autom√°tica de erros</a></li>
<li><a href="../pt473460/index.html">Para a quest√£o da matem√°tica</a></li>
<li><a href="../pt473462/index.html">Semana 44 de seguran√ßa: NordVPN, TorGuard e Half Hack</a></li>
<li><a href="../pt473470/index.html">GitLab 12.4 com solicita√ß√£o aprimorada de mesclagem e depend√™ncias da API de auditoria</a></li>
<li><a href="../pt473476/index.html">Verificando o wrapper OpenCvSharp sobre o OpenCV com o PVS-Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>