<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüåæ üë©üèΩ‚Äç‚öïÔ∏è ü¶è Localisation de jeux dans Unreal Engine 4 üë©üèº‚ÄçüöÄ üöà üìë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La pr√©paration d'un jeu pour la localisation est une partie importante du d√©veloppement du jeu. 

 Nous travaillons sur le jeu " Cat Movies! " Dans Un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Localisation de jeux dans Unreal Engine 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470205/">  La pr√©paration d'un jeu pour la localisation est une partie importante du d√©veloppement du jeu. <br><br>  Nous travaillons sur le jeu " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cat Movies!</a> " Dans Unreal Engine 4. Il s'agit d'une strat√©gie √©conomique dans laquelle il y a beaucoup de texte, et nous pr√©voyons de le traduire dans diff√©rentes langues.  Comme beaucoup d'autres (mais ce n'est pas exact, et j'esp√®re que ce n'est pas le cas), nous avons d√©cid√© de reporter l'√©tape de la mise en place de la localisation √† des it√©rations de d√©veloppement ult√©rieures et, en fin de compte, en vain. <br><br>  La localisation dans UE4 est √©l√©gamment impl√©ment√©e, et si vous vous souvenez que tout le texte qui sera traduit est suffisant pour √™tre stock√© dans les champs Ftext (Text in Blueprint'ah), alors en g√©n√©ral, il n'y a aucun probl√®me √† r√©cup√©rer le texte du jeu.  Il suffit d'ouvrir le tableau de bord de localisation, de pousser quelques boutons - et le tour est jou√©. <br><br>  Et, malgr√© la simplicit√© de cette action, nous avons toujours rencontr√© un certain nombre de probl√®mes, √† cause desquels nous avons d√ª creuser une partie du code. <br><br>  <b>Mis √† jour le 10.16.19: mise en forme du texte.</b> <br><a name="habracut"></a><br><h3>  Comment stocker du texte </h3><br>  Les gars d'Epic Games ont simplifi√© l'assemblage du texte au maximum, r√©duisant tout en un clic et une traduction suppl√©mentaire. <br><br>  Tout fonctionne tr√®s simplement - pour la localisation, le type de donn√©es FText (Text in Blueprints) est utilis√©, dans lequel le texte est enregistr√©, et ce texte est ensuite collect√© par le syst√®me de localisation et fourni pour la traduction. <br><br>  <b>Comment √ßa marche?</b> <br><br>  FText n'est pas un type de donn√©es standard qui stocke des donn√©es en soi.  Bien s√ªr, il stocke des donn√©es en soi, mais pas les donn√©es que nous attendons. <br><br>  FText est un pointeur.  Il indique dans quel tableau le texte est stock√©.  En d'autres termes, lorsque nous affectons du texte √† une variable de ce type, le texte est stock√© dans une table virtuelle et la variable elle-m√™me stocke d√©sormais le nom de la table et la cl√© permettant de trouver le texte dans cette table. <br><br>  Ainsi, il s'av√®re que le texte lui-m√™me est stock√© ailleurs (nous ne consid√©rerons pas les subtilit√©s de sa mise en ≈ìuvre, car nous ne nous y int√©ressons pas particuli√®rement), et lors du basculement de la localisation vers l'adresse souhait√©e, le texte est remplac√© (enfin, ou Je veux le penser). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dfc/93c/ad8/dfc93cad81ebaac7809005f5ddda65c0.jpg" alt="image"><br><br>  Lorsque la collecte de texte est lanc√©e, le syst√®me de localisation collecte toutes les variables de texte de tous les plans, widgets et tableaux, et d√©ploie une √©norme liste de texte qui peut √™tre export√©e vers * .po et traduite. <br><br>  Notre jeu dispose d'un large √©ventail de widgets √† travers lesquels le joueur contr√¥lera presque tout le gameplay.  Nous avons de nombreux noms (par exemple, des d√©partements ou des √©tapes de cr√©ation de films ou certaines comp√©tences, des bonus, etc.) qui sont utilis√©s dans divers widgets qui sont compl√®tement ind√©pendants les uns des autres.  Il existe des descriptions de certains objets (par exemple, une description des bonus), et cela est √©galement utilis√© plus d'une fois dans divers widgets non li√©s. <br><br>  Et ici commence la difficult√©.  Si nous r√©√©crivons les noms des d√©partements dans chaque widget, √† un moment donn√© dans l'un des widgets, le nom des d√©partements sera mal orthographi√©.  Cette question est compliqu√©e par le fait que les ¬´descriptions¬ª elles-m√™mes (par exemple, la description du d√©partement) en un grand nombre de caract√®res sont difficiles √† suivre de sorte qu'elles sont les m√™mes partout (naturellement, nous ne l'avons pas fait).  Encore plus amusant, nous avons la plupart des widgets utilis√©s comme mod√®le dans lesquels les donn√©es de diverses sources arrivent, et en fonction de la source, les noms et les textes √† l'int√©rieur du code changent. <br><br>  Nous avons facilit√© notre t√¢che en cr√©ant une table de donn√©es, dans laquelle nous avons commenc√© √† stocker des donn√©es de types sp√©cifiques.  Par exemple, une table de service qui contient le nom, la description, le niveau maximum, le nombre d'employ√©s par niveau, etc.  etc. <br>  Il semblerait qu'il √©tait possible de s'y attarder, mais il y avait une difficult√© dans le fait que les donn√©es du tableau changeaient constamment, quelque chose √©tait r√©√©crit, qui √©tait supprim√© au fur et √† mesure que le code grandissait, et il y avait des cas o√π le tableau entier volait et nous devions reculer, retirer donn√©es, revenez √† l'√©tat actuel et r√©ins√©rez les donn√©es perdues. <br><br>  Tout est devenu beaucoup plus triste quand j'ai d√©cid√© de me lancer dans la localisation et finalement de l'essayer pour comprendre si nous le faisons tous correctement. <br><br>  J'ai retir√© tout le texte du jeu et j'ai r√©alis√© que dans le code, malgr√© le fait que nous essayions d'√©viter la r√©p√©tition, il y avait un grand nombre d'√©l√©ments r√©p√©t√©s du texte. <br><br>  <b>La traduction est une chose humaine.</b>  S'il y a une possibilit√© de faire une erreur, les gens feront n√©cessairement une erreur.  Et pour √©viter cela ou du moins le minimiser, vous devez r√©duire tous les textes √† un seul mod√®le.  Autrement dit, sortir quelque part en un seul endroit, d'o√π le texte sera pris dans toutes les parties du code.  Et qui ne sera traduit qu'une seule fois afin de minimiser les risques d'erreurs.  Il semblerait que vous puissiez utiliser DataTable, mais il y a un certain nombre de probl√®mes - pour enregistrer uniquement les noms de quelque chose, nous devons cr√©er des tables enti√®res qui stockeront ces noms. <br><br>  Apr√®s avoir fouill√© dans la documentation d'Epic Games, j'ai tourn√© mon attention vers les <b>String Tables</b> (ci-apr√®s d√©nomm√©es ¬´String Tables¬ª).  Il s'est av√©r√© que c'est une option id√©ale - pour stocker le texte dans un tableau s√©par√© sp√©cial pour les textes, qui a √©t√© cr√©√© juste pour √™tre connect√© aux variables FText.  Autrement dit, nous pouvons cr√©er un tableau qui stockera le texte en lui-m√™me.  Et nous pouvons connecter ce texte √† n'importe quelle variable - que ce soit une variable dans le tableau de donn√©es, une variable dans le widget, une variable dans le code - tout se r√©sume √† un endroit o√π le texte est stock√©. <br><br>  Les tableaux de cha√Ænes vous permettent d'√©viter de r√©p√©ter le texte dans un projet plusieurs fois un peu plus que compl√®tement, √©vitant ainsi les erreurs. <br><br>  Les tables de cha√Ænes sont cr√©√©es dans le moteur, tout comme les tables de donn√©es dans la section divers: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42e/e26/607/42ee266076bfca6f67f2259e3dc35c47.jpg" alt="image"><br><br>  Il est tr√®s facile √† remplir - chaque nouvelle ligne doit avoir une cl√© unique que vous devez inventer vous-m√™me.  Et le texte lui-m√™me peut d√©j√† √™tre n'importe lequel.  De plus, dans le tableau, vous pouvez sp√©cifier un nom diff√©rent pour l'espace de texte √† partir du nom du tableau, mais, selon notre exp√©rience, cela n'est pas n√©cessaire. <br><br>  Une fois la table de cha√Ænes cr√©√©e, le texte peut maintenant √™tre connect√© √† la variable FText: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3da/70a/b12/3da70ab12906a8e27428eb5acd468088.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b83/18f/969/b8318f96985ce0aeed9e43720b2c69e0.jpg" alt="image"><br><br>  Ainsi, nous avons r√©duit le texte √† un tableau √† une seule ligne, dont il est tr√®s facile √† extraire.  Pour obtenir ce menu de param√®tres de texte, cliquez simplement sur la fl√®che vers le bas √† c√¥t√© de la variable de texte. <br><br><h3>  Localisation </h3><br>  Il ne nous reste plus qu'√† rassembler tout le texte et √† commencer √† travailler avec.  Pour ce faire, nous devons d√©marrer le Tableau de bord de localisation et d√©marrer les param√®tres de localisation.  Vous pouvez ex√©cuter la table via le menu Fen√™tre-&gt; Tableau de bord de localisation. <br><br>  Et avant d'ouvrir quelque chose comme cette fen√™tre: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/909/1b6/652/9091b66522dc3d9d81762362435e7c7e.jpg" alt="image"><br><br>  Dans cette fen√™tre, vous devez sp√©cifier l'objectif (module) duquel le texte sera extrait.  Dans notre cas, c'est un jeu - Jeu. <br><br>  Ensuite, vous devez sp√©cifier o√π exactement le texte sera extrait dans le module.  Dans notre cas, ce ne sont que des contours, car nous ne stockons pas de texte dans les cours.  Par cons√©quent, nous devons sp√©cifier uniquement ¬´Rassembler √† partir de packages¬ª et indiquer dans quels dossiers et quels fichiers nous devons prendre en compte pour rechercher des textes. <br><br>  Nous devons √©galement indiquer quelles langues seront utilis√©es pour la traduction et quelle langue sera native (principale).  Je recommande fortement si vous √©crivez et parlez russe - indiquez la langue russe (ou toute autre langue principale).  Cela est d√ª au fait que si vous ne connaissez pas bien l'anglais, alors en l'indiquant comme le principal, vous compliquez votre traduction en anglais de "English".  Par cons√©quent, il est pr√©f√©rable d'indiquer √† l'avance votre langue comme langue principale et d'√©crire tous les textes dans votre propre langue, afin de pouvoir plus tard faciliter les traductions pour vous-m√™me et pour les autres. <br><br>  Toujours dans UE4, il existe une excellente occasion de cr√©er des traductions directement dans le moteur, sans exporter de textes pour des programmes tiers.  Pour ce faire, vous devez collecter tout le texte pertinent dans le jeu en cliquant sur le bouton num√©ro 1.  Et puis lancez l'√©diteur (bouton num√©ro 2): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d4/e8f/862/0d4e8f8623131a49733f130e90f5f07d.jpg" alt="image"><br><br>  Une fen√™tre d'√©dition de la traduction dans la langue dont vous avez besoin s'ouvre. <br><br><h3>  Assemblage </h3><br>  Lors de l'assemblage d'un projet, vous devez sp√©cifier les langues qui doivent √™tre incluses dans cet assemblage, ainsi que l'ensemble des langues que votre projet doit prendre en charge. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cee/817/eb8/cee817eb8fa63d50e74e11467f4be797.jpg" alt="image"><br><br>  Dans notre cas, la prise en charge de l'internationalisation est d√©finie sur Tous.  Autrement dit, notre projet prendra en charge tous les types de langues, des hi√©roglyphes complexes aux simples lettres anglaises.  En g√©n√©ral, il existe 5 packages: <br><br><ul><li>  Anglais (anglais pur). </li><li>  EFIGS (anglais, fran√ßais, italien, allemand et espagnol) </li><li>  EFIGSCJK (comme ci-dessus + chinois, japonais et cor√©en) </li><li>  CJK (chinois, japonais et cor√©en). </li><li>  Tous (toutes les langues). </li></ul><br>  Cependant, dans les cas o√π chaque octet du projet est important (le package All p√®se 15 Mo et EFIGS 2 Mo), vous devez pr√™ter plus d'attention au package que vous devez choisir. <br><br><h3>  Commutation de localisation </h3><br>  La commutation de texte se produit dans Runtime, c'est-√†-dire que vous n'avez pas besoin de red√©marrer le jeu, vous n'avez pas √† vous soucier de l'optimisation de la commutation - tout se fait facilement et simplement via la m√©thode " <b>SetCurrentCulture</b> ", o√π vous devez indiquer avec le texte dans quelle langue vous souhaitez basculer. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/368/ae6/007/368ae600760d21c3236384ae5cf8072b.jpg" alt="image"><br><br>  Et ici, il y a un tel probl√®me.  Le fait est que diff√©rents pays ont leurs propres branches linguistiques, par exemple, il y a la principale langue russe (ru), mais il y a le bi√©lorusse (ru-BY), le kazakh (ru-KZ), le moldave (ru-MD), l'ukrainien (ru -UA) langues qui rel√®vent de la branche de la langue russe.  Par cons√©quent, lorsque vous choisissez une langue qui n'est pas la principale, vous devez consid√©rer et indiquer la langue correcte.  Si vous s√©lectionnez uniquement le principal, puis lors du changement, sp√©cifiez simplement "ru". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcf/884/1c8/fcf8841c8f1b2d6138e2a2b358f22cd3.jpg" alt="image"><br><br><h3>  Ajout d'autres donn√©es au texte dans Blueprint. </h3><br>  Si des accolades sont indiqu√©es dans le texte lui-m√™me et que le nom des donn√©es y est indiqu√©, √† l'avenir, vous pouvez utiliser la substitution de ces m√™mes donn√©es dans le texte. <br>  Par exemple: <b>"Souhaitez-vous apprendre la technologie {Tech_Name}?"</b> <br>  Et, en outre, dans BP, vous pouvez utiliser le n≈ìud "Format texte", qui prendra en compte le texte lui-m√™me et les param√®tres qui y sont indiqu√©s et cr√©era des broches suppl√©mentaires pour connecter ces m√™mes donn√©es: <br><img src="https://habrastorage.org/getpro/habr/post_images/6b7/dcf/388/6b7dcf3885f6f7f9f248f20013d7618a.jpg" alt="image"><br><br>  Maintenant, des informations suppl√©mentaires seront incorpor√©es dans le texte, qui peuvent √™tre corrig√©es sans corriger le texte lui-m√™me.  Par exemple, vous pouvez entrer les noms des d√©partements ou des technologies, vous pouvez sp√©cifier des niveaux ou autre chose. <br><br><h3>  Conclusion </h3><br>  Apr√®s avoir rassembl√© toutes ces informations, j'ai r√©alis√© que depuis le tout d√©but, nous n'avions pas correctement abord√© la cr√©ation de texte dans le jeu et fait beaucoup de travail inutile.  Bien s√ªr, nous n'avons pas retravaill√© le code pendant des mois, mais y avons pass√© un maximum de 1,5 heure, mais il serait plus agr√©able de conna√Ætre √† l'avance les principes de localisation dans UE4 et de les prendre en compte lors de la construction de l'architecture du projet. <br><br>  Il en va de m√™me pour l'enregistrement et le chargement dans les jeux.  Cela ne s'est pas av√©r√© √™tre une t√¢che si facile dans le contexte de la strat√©gie, o√π chaque petite chose devrait √™tre fix√©e l√† o√π elle se trouve / se trouve / a un certain √©tat.  Mais j'√©crirai √† ce sujet une autre fois.  Et maintenant, vous pouvez continuer √† regarder notre match dans notre groupe =) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470205/">https://habr.com/ru/post/fr470205/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470193/index.html">Protection universelle contre les attaques xss et les injections sql</a></li>
<li><a href="../fr470195/index.html">F # 4: Let / Use / Do</a></li>
<li><a href="../fr470197/index.html">Puis-je Haz? Consid√©rez le mod√®le Has</a></li>
<li><a href="../fr470199/index.html">M√©mo √† un d√©veloppeur novice de jeux informatiques</a></li>
<li><a href="../fr470203/index.html">L'aiguille d'approbation du karma, comme miroir de l'√©volution de l'Homo</a></li>
<li><a href="../fr470207/index.html">1C Developer Tales: Epicafe</a></li>
<li><a href="../fr470215/index.html">CAGR comme une mal√©diction pour les sp√©cialistes, ou des erreurs dans la pr√©diction des processus exponentiels</a></li>
<li><a href="../fr470217/index.html">Faux DS18B20 √©tanche: que faire?</a></li>
<li><a href="../fr470219/index.html">F # 5: Op√©rateurs</a></li>
<li><a href="../fr470221/index.html">Holivar. Histoire de Runet. Partie 3. Moteurs de recherche: Yandex vs Rambler. Comment ne pas investir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>