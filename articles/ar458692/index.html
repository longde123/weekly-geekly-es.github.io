<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤º ğŸ”— ğŸ¥‹ "Ø±Ø¨Ù…Ø§" Ø£Ø­Ø§Ø¯ÙŠ Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© / ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± C # (Ø¨Ù„Ø§ Ù…Ù‡Ø§Ù…!) ğŸ‘‰ğŸ¼ ğŸ–• ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù† Ø§Ù„Ø¹Ø§Ù…Ø© - Ø¥Ù†Ù‡Ø§ Ù…ÙŠØ²Ø© C # 7 Ø¬Ø¯ÙŠØ¯Ø© ØªØ³Ù…Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙŠØ³ ÙÙ‚Ø· Task ÙƒÙ†ÙˆØ¹ Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†Ø© ÙˆÙ„ÙƒÙ† Ø£ÙŠØ¶Ù‹Ø§ Ø£Ù†ÙˆØ§Ø¹ Ø£Ø®Ø±Ù‰ (ÙØ¦Ø§Øª Ø£Ùˆ Ø¨Ù†ÙŠØ§Øª) ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Ø±Ø¨Ù…Ø§" Ø£Ø­Ø§Ø¯ÙŠ Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© / ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± C # (Ø¨Ù„Ø§ Ù…Ù‡Ø§Ù…!)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458692/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3n/zz/tw/3nzztwahkcl-ppecyzowprupvym.jpeg"></p><br><p style=";text-align:right;direction:rtl">  <strong>Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù† Ø§Ù„Ø¹Ø§Ù…Ø©</strong> - Ø¥Ù†Ù‡Ø§ Ù…ÙŠØ²Ø© C # 7 Ø¬Ø¯ÙŠØ¯Ø© ØªØ³Ù…Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙŠØ³ ÙÙ‚Ø· <strong>Task</strong> ÙƒÙ†ÙˆØ¹ Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ ØºÙŠØ± <strong>Ù…ØªØ²Ø§Ù…Ù†Ø©</strong> ÙˆÙ„ÙƒÙ† Ø£ÙŠØ¶Ù‹Ø§ Ø£Ù†ÙˆØ§Ø¹ Ø£Ø®Ø±Ù‰ (ÙØ¦Ø§Øª Ø£Ùˆ Ø¨Ù†ÙŠØ§Øª) ØªÙ„Ø¨ÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©. </p><br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ù†ÙØ³Ù‡ ØŒ ÙŠÙ…Ø«Ù„ <strong>Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© / Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</strong> Ø·Ø±ÙŠÙ‚Ø© Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† ÙˆØ¸Ø§Ø¦Ù "Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©" Ø¯Ø§Ø®Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø°ÙŠ ÙŠØ¹Ø¯ Ø¬ÙˆÙ‡Ø±Ù‹Ø§ Ù„Ù†Ù…Ø· ØªØµÙ…ÙŠÙ… Ø¢Ø®Ø± - <strong>Monad</strong> .  Ù„Ø°Ø§ ØŒ Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ø³ØªØ®Ø¯Ø§Ù… <strong>Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© / Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</strong> Ù„ÙƒØªØ§Ø¨Ø© Ø±Ù…Ø² ÙŠØªØµØ±Ù Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ÙƒÙ…Ø§ Ù„Ùˆ Ø£Ù†Ù†Ø§ Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ monadsØŸ  Ø§ØªØ¶Ø­ Ø°Ù„Ùƒ - Ù†Ø¹Ù… (Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„ØªØ­ÙØ¸Ø§Øª).  Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ø§Ù„Ø´ÙØ±Ø© Ø£Ø¯Ù†Ø§Ù‡ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ±Ø¬Ù…Ø© ÙˆØªØ¹Ù…Ù„: </p><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-string"><span class="hljs-string">"1,2"</span></span>, <span class="hljs-string"><span class="hljs-string">"3,7,1"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span> }) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Sum(s).GetMaybeResult(); Console.WriteLine(res.IsNothing ? <span class="hljs-string"><span class="hljs-string">"Nothing"</span></span> : res.GetValue().ToString()); } <span class="hljs-comment"><span class="hljs-comment">// 3, 11, Nothing, Nothing } async Maybe&lt;int&gt; Sum(string input) { var args = await Split(input);//No result checking var result = 0; foreach (var arg in args) result += await Parse(arg);//No result checking return result; } Maybe&lt;string[]&gt; Split(string str) { var parts = str?.Split(',').Where(s=&gt;!string.IsNullOrWhiteSpace(s)).ToArray(); return parts == null || parts.Length &lt; 2 ? Maybe&lt;string[]&gt;.Nothing() : parts; } Maybe&lt;int&gt; Parse(string str) =&gt; int.TryParse(str, out var result) ? result : Maybe&lt;int&gt;.Nothing();</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ø§ÙˆØ© Ø¹Ù„Ù‰ Ø°Ù„Ùƒ ØŒ Ø³Ø£Ø´Ø±Ø­ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø±Ù…Ø² ... </p><a name="habracut"></a><br><h2 id="generalized-async-return-types" style=";text-align:right;direction:rtl">  Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¹Ù…Ù… </h2><br><p style=";text-align:right;direction:rtl">  <strong>Ø¨Ø§Ø¯Ø¦ Ø°ÙŠ Ø¨Ø¯Ø¡ ØŒ Ø¯Ø¹ÙˆÙ†Ø§ Ù†ØªØ¹Ø±Ù</strong> Ø¹Ù„Ù‰ Ù…Ø§ Ù‡Ùˆ Ù…Ø·Ù„ÙˆØ¨ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… <strong>Ù†ÙˆØ¹Ù†Ø§</strong> Ø§Ù„Ø®Ø§Øµ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ <strong>MyAwaitable &lt;T&gt;</strong> ) ÙƒÙ†ÙˆØ¹ Ù†ØªÙŠØ¬Ø© Ù„Ø¨Ø¹Ø¶ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©.  ØªÙ‚ÙˆÙ„ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø£Ù† Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>GetAwaiter ()</strong> Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ø±Ø¬Ø§Ø¹ ÙƒØ§Ø¦Ù† Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ø°ÙŠ ÙŠÙ†ÙØ° ÙˆØ§Ø¬Ù‡Ø© <strong>INotifyCompletion</strong> ÙˆÙ„Ø¯ÙŠÙ‡ Ø®Ø§ØµÙŠØ© <strong>IsCompleted Ù…Ù†Ø·Ù‚ÙŠØ©</strong> ÙˆØ·Ø±ÙŠÙ‚Ø© <strong>T GetResult ()</strong> Ø› </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>Ø³Ù…Ø© [AsyncMethodBuilder (Type)]</strong> Ø§Ù„ØªÙŠ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ÙØ¦Ø© ( <em>Ø£Ùˆ Ø¨Ù†ÙŠØ©</em> ) "Ù…Ù†Ø´Ø¦ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©" (Ù…Ø«Ø§Ù„: <strong>MyAwaitableTaskMethodBuilder &lt;T&gt;</strong> Ø¨Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„ØªØ§Ù„ÙŠØ©: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø¥Ù†Ø´Ø§Ø¡ Ø«Ø§Ø¨Øª () </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (ÙˆÙ„Ø§ÙŠØ© Ù…Ø§Ø´ÙŠÙ†) </li><li style=";text-align:right;direction:rtl">  SetResult (Ø§Ù„Ù†ØªÙŠØ¬Ø©) </li><li style=";text-align:right;direction:rtl">  SetException (Ø§Ø³ØªØ«Ù†Ø§Ø¡) </li><li style=";text-align:right;direction:rtl">  SetStateMachine (stateMachine) </li><li style=";text-align:right;direction:rtl">  AwaitOnCompleted (awaiter ØŒ stateMachine) </li><li style=";text-align:right;direction:rtl">  AwaitUnsafeOnCompleted (awaiterØŒ stateMachine) </li><li style=";text-align:right;direction:rtl">  Ù…Ù‡Ù…Ø© </li></ul><br></li></ol><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù‡Ù†Ø§ Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø³ÙŠØ· Ù…Ù† MyAwaitable Ùˆ MyAwaitableTaskMethodBuilder</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncMethodBuilder(typeof(MyAwaitableTaskMethodBuilder&lt;&gt;))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyAwaitable</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Action _continuation; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyAwaitable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyAwaitable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MyAwaitable&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetAwaiter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsCompleted { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Exception Exception { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Not completed"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Exception != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { ExceptionDispatchInfo.Throw(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Exception); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Already completed"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._continuation?.Invoke(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Exception exception</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Exception = exception; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> INotifyCompletion.OnCompleted(Action continuation) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._continuation = continuation; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted) { continuation(); } } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyAwaitableTaskMethodBuilder</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyAwaitableTaskMethodBuilder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Task = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyAwaitable&lt;T&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> MyAwaitableTaskMethodBuilder&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyAwaitableTaskMethodBuilder&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Start&lt;TStateMachine&gt;(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine =&gt; stateMachine.MoveNext(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetStateMachine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IAsyncStateMachine stateMachine</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Exception exception</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Task.SetException(exception); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T result</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Task.SetResult(result); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AwaitOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : INotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GenericAwaitOnCompleted(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AwaitUnsafeOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : ICriticalNotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GenericAwaitOnCompleted(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> GenericAwaitOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : INotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine =&gt; awaiter.OnCompleted(stateMachine.MoveNext); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MyAwaitable&lt;T&gt; Task { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre></div></div><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ø³ØªØ®Ø¯Ø§Ù… <strong>MyAwaitable</strong> ÙƒÙ†ÙˆØ¹ Ù†ØªÙŠØ¬Ø© <strong>Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> MyAwaitable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyAwaitableMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> arg1 = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetMyAwaitable(<span class="hljs-number"><span class="hljs-number">1</span></span>); result += arg1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> arg2 = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetMyAwaitable(<span class="hljs-number"><span class="hljs-number">2</span></span>); result += arg2; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> arg3 = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetMyAwaitable(<span class="hljs-number"><span class="hljs-number">3</span></span>); result += arg3; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> MyAwaitable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetMyAwaitable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> arg</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1</span></span>);<span class="hljs-comment"><span class="hljs-comment">//Simulate asynchronous execution return await new MyAwaitable&lt;int&gt;(arg); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙŠØ¹Ù…Ù„ Ø§Ù„Ø±Ù…Ø² ÙƒÙ…Ø§ Ù‡Ùˆ Ù…ØªÙˆÙ‚Ø¹ ÙˆÙ„ÙƒÙ† Ù„ÙÙ‡Ù… Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ù…ØªØ·Ù„Ø¨Ø§Øª <strong>MyAwaitable ØŒ</strong> Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù„Ù‚ÙŠ Ù†Ø¸Ø±Ø© Ø¹Ù„Ù‰ Ù…Ø§ ÙŠÙØ¹Ù„Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù„Ù€ C # Ù…Ø¹ <strong>MyAwaitableMethod</strong> .  Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¶ de-compilation (Ù…Ø«Ù„ dotPeek) ØŒ ÙØ³ØªØ±Ù‰ Ø£Ù† Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù‚Ø¯ ØªØºÙŠØ±Øª Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„ØªØ§Ù„ÙŠ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> MyAwaitable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyAwaitableMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stateMachine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyAwaitableMethodStateMachine(); stateMachine.Owner = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; stateMachine.Builder = MyAwaitableTaskMethodBuilder&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Create(); stateMachine.State = <span class="hljs-number"><span class="hljs-number">0</span></span>; stateMachine.Builder.Start(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> stateMachine.Builder.Task; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">MyAwaitableMethodStateMachine</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <em>ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ Ø¥Ù†Ù‡ Ø±Ù…Ø² Ù…Ø¨Ø³Ø· Ø­ÙŠØ« Ø£ØºÙÙ„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ø¬Ø¹Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyAwaitableMethodStateMachine</span></span> : <span class="hljs-title"><span class="hljs-title">IAsyncStateMachine</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> State; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MyAwaitableTaskMethodBuilder&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; Builder; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BuilderDemo Owner; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _result; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _arg1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _arg2; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _arg3; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MyAwaitableAwaiter&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _awaiter1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MyAwaitableAwaiter&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _awaiter2; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MyAwaitableAwaiter&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _awaiter3; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetAwaitCompletion</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">INotifyCompletion awaiter</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stateMachine = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Builder.AwaitOnCompleted(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> IAsyncStateMachine.MoveNext() { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> finalResult; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { label_begin: <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.State) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._awaiter1 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Owner.GetMyAwaitable(<span class="hljs-number"><span class="hljs-number">1</span></span>).GetAwaiter(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.State = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._awaiter1.IsCompleted) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SetAwaitCompletion(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._awaiter1); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> label_begin; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-comment"><span class="hljs-comment">// awaiter1 should be completed this._arg1 = this._awaiter1.GetResult(); this._result += this._arg1; this.State = 2; this._awaiter2 = this.Owner.GetMyAwaitable(2).GetAwaiter(); if (!this._awaiter2.IsCompleted) { this.SetAwaitCompletion(this._awaiter2); return; } goto label_begin; case 2:// awaiter2 should be completed this._arg2 = this._awaiter2.GetResult(); this._result += this._arg2; this.State = 3; this._awaiter3 = this.Owner.GetMyAwaitable(3).GetAwaiter(); if (!this._awaiter3.IsCompleted) { this.SetAwaitCompletion(this._awaiter3); return; } goto label_begin; case 3:// awaiter3 should be completed this._arg3 = this._awaiter3.GetResult(); this._result += this._arg3; finalResult = this._result; break; default: throw new Exception(); } } catch (Exception ex) { this.State = -1; this.Builder.SetException(ex); return; } this.State = -1; this.Builder.SetResult(finalResult); } }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  Ø¹Ù†Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø£Ù† Ù†Ø±Ù‰ Ø£Ù† "Ù…Ù†Ø´Ø¦ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨" Ù„Ø¯ÙŠÙ‡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø¬Ø¯ÙˆÙ„Ø© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ <strong>MoveNext ()</strong> Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†Ø© ØªØ§Ø¨Ø¹Ø© (ÙÙŠ Ø£Ø¨Ø³Ø· Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù†Ø­Ù† ÙÙ‚Ø· ØªÙ…Ø±ÙŠØ± <strong>MoveNext ()</strong> Ø¥Ù„Ù‰ <strong>OnCompleted ()</strong> Ù…Ù† Ø§Ù†ØªØ¸Ø§Ø± Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©). </li><li style=";text-align:right;direction:rtl">  Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø³ÙŠØ§Ù‚ Ø¹Ù…Ù„ÙŠØ© ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù† ( <code>public MyAwaitable&lt;T&gt; Task { get; }</code> ) </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§: <strong>SetResult</strong> Ø£Ùˆ <strong>SetException</strong> . </li></ol><br><p style=";text-align:right;direction:rtl">  Ø¨Ù…Ø¹Ù†Ù‰ Ø¢Ø®Ø± ØŒ Ù…Ù† Ø®Ù„Ø§Ù„ "Ù…ÙÙ†Ø´Ø¦ÙŠ Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨" ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ÙƒÙŠÙÙŠØ© ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© ÙˆÙŠØ¨Ø¯Ùˆ Ø£Ù†Ù‡Ø§ Ù…ÙŠØ²Ø© Ø³ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ ØªØ­Ù‚ÙŠÙ‚ Ù‡Ø¯ÙÙ†Ø§ - ØªÙ†ÙÙŠØ° Ø³Ù„ÙˆÙƒ <strong>Ø±Ø¨Ù…Ø§</strong> Ø£Ø­Ø§Ø¯ÙŠ.  ÙˆÙ„ÙƒÙ† Ù…Ø§ Ù‡Ùˆ Ø¬ÙŠØ¯ Ø¹Ù† Ù‡Ø°Ø§ monadØŸ  Ø­Ø³Ù†Ù‹Ø§ ... ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø­ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ†Ø§Ø¯ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ØŒ Ù„Ø°Ù„Ùƒ Ø³ÙˆÙ Ø£ØµÙ Ù‡Ù†Ø§ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙÙ‚Ø·. </p><br><h2 id="maybe-monad" style=";text-align:right;direction:rtl">  Ø±Ø¨Ù…Ø§ Ø£Ø­Ø§Ø¯ÙŠ </h2><br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ø®ØªØµØ§Ø± ØŒ <strong>Ø±Ø¨Ù…Ø§ ÙŠÙƒÙˆÙ†</strong> monad Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† Ù†Ù…Ø· ØªØµÙ…ÙŠÙ… ÙŠØªÙŠØ­ Ù…Ù‚Ø§Ø·Ø¹Ø© Ø³Ù„Ø³Ù„Ø© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªØªÙ…ÙƒÙ† Ø¨Ø¹Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…Ù† Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ù‚ÙŠÙ…Ø© (Ù…Ø«Ù„ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø£). </p><br><p style=";text-align:right;direction:rtl">  ØªØ§Ø±ÙŠØ®ÙŠØ§ ØŒ ÙƒØ§Ù†Øª Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…Ù„Ø­Ø© ØªØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø·Ø±ÙŠÙ‚ØªÙŠÙ†: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø´Ø±Ø·ÙŠ </li><li style=";text-align:right;direction:rtl">  Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª </li></ol><br><p style=";text-align:right;direction:rtl">  Ù„ÙƒÙ„ØªØ§ Ø§Ù„Ø·Ø±ÙŠÙ‚ØªÙŠÙ† Ø¹ÙŠÙˆØ¨ ÙˆØ§Ø¶Ø­Ø© ØŒ Ù„Ø°Ù„Ùƒ Ø§Ø®ØªØ±Ø¹ Ø·Ø±ÙŠÙ‚ Ø«Ø§Ù„Ø«: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù†ÙˆØ¹ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† ÙÙŠ Ø­Ø§Ù„ØªÙŠÙ†: "Ø¨Ø¹Ø¶ Ø§Ù„Ù‚ÙŠÙ…Ø©" Ùˆ "Ù„Ø§ Ø´ÙŠØ¡" - Ø¯Ø¹Ù†Ø§ Ù†Ø³Ù…ÙŠÙ‡Ø§ "Ø±Ø¨Ù…Ø§" </li><li style=";text-align:right;direction:rtl">  Ø£Ù†Ø´Ø¦ ÙˆØ¸ÙŠÙØ© (Ø¯Ø¹Ù†Ø§ Ù†Ø³Ù…ÙŠÙ‡Ø§ "SelectMany") ØªØ³ØªØ±Ø¬Ø¹ ÙˆØ³ÙŠØ·ÙŠÙ†: <br>  2.1.  ÙƒØ§Ø¦Ù† Ù…Ù† Ù†ÙˆØ¹ "Ø±Ø¨Ù…Ø§" <br>  2.2.  ÙˆØ¸ÙŠÙØ© ØªØ§Ù„ÙŠØ© Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø§ØªØµØ§Ù„ - ÙŠØ¬Ø¨ Ø£Ù† ØªÙØ±Ø¬Ø¹ Ø§Ù„Ø¯Ø§Ù„Ø© Ø£ÙŠØ¶Ù‹Ø§ ÙƒØ§Ø¦Ù†Ù‹Ø§ "Ø±Ø¨Ù…Ø§" Ø³ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ø£Ùˆ "Ù„Ø§ Ø´ÙŠØ¡" Ø¥Ø°Ø§ ØªØ¹Ø°Ø± ØªÙ‚ÙŠÙŠÙ… Ù†ØªÙŠØ¬ØªÙ‡Ø§ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ© Ù„ÙŠØ³Øª Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµØ­ÙŠØ­) </li><li style=";text-align:right;direction:rtl">  ØªÙ‚ÙˆÙ… ÙˆØ¸ÙŠÙØ© "SelectMany" Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª "Ø±Ø¨Ù…Ø§" Ù„Ù‡Ø§ Ù‚ÙŠÙ…Ø© Ø«Ù… ØªØ³ØªØ¯Ø¹ÙŠ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ…Ø© (Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø© Ù…Ù† "Ø±Ø¨Ù…Ø§") ÙƒÙˆØ³ÙŠØ·Ø© Ø«Ù… ØªØ±Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© ØŒ ÙˆØ¥Ù„Ø§ ÙØ¥Ù†Ù‡Ø§ ØªÙØ±Ø¬Ø¹ ÙƒØ§Ø¦Ù† "Ø±Ø¨Ù…Ø§" ÙÙŠ Ø­Ø§Ù„Ø© "Ù„Ø§ Ø´ÙŠØ¡" . </li></ol><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/f2/zl/3k/f2zl3kmfcocbyyujwqa4wvidxqw.png"></p><br><p style=";text-align:right;direction:rtl">  ÙÙŠ C # ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ°Ù‡ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø­Ùˆ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Maybe&lt;T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> Maybe&lt;T&gt;(T <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) =&gt; Value(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Maybe&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Value</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Maybe&lt;T&gt;(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Maybe&lt;T&gt; Nothing = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Maybe&lt;T&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Maybe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isNothing, T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsNothing = isNothing; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsNothing; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> T _value; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsNothing ? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Nothing"</span></span>) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._value; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MaybeExtensions</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Maybe&lt;TRes&gt; SelectMany&lt;TIn, TRes&gt;( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> Maybe&lt;TIn&gt; source, Func&lt;TIn, Maybe&lt;TRes&gt;&gt; func) =&gt; source.IsNothing ? Maybe&lt;TRes&gt;.Nothing : func(source.GetValue()); }</code> </pre><br><p style=";text-align:right;direction:rtl">  ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = Function1(i).SelectMany(Function2).SelectMany(Function3); Console.WriteLine(res.IsNothing ? <span class="hljs-string"><span class="hljs-string">"Nothing"</span></span> : res.GetValue().ToString()); } <span class="hljs-function"><span class="hljs-function">Maybe&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acc</span></span></span><span class="hljs-function">)</span></span> =&gt; acc &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ? acc + <span class="hljs-number"><span class="hljs-number">1</span></span> : Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Nothing; <span class="hljs-function"><span class="hljs-function">Maybe&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acc</span></span></span><span class="hljs-function">)</span></span> =&gt; acc &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ? acc + <span class="hljs-number"><span class="hljs-number">2</span></span> : Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Nothing; <span class="hljs-function"><span class="hljs-function">Maybe&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function3</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acc</span></span></span><span class="hljs-function">)</span></span> =&gt; acc &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ? acc + <span class="hljs-number"><span class="hljs-number">3</span></span> : Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Nothing; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù„Ù…Ø§Ø°Ø§ "SelectMany"ØŸ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  Ø£Ø¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø¨Ø¹Ø¶ Ù…Ù†ÙƒÙ… Ù‚Ø¯ ÙŠØ³Ø£Ù„ Ø³Ø¤Ø§Ù„Ù‹Ø§: "Ù„Ù…Ø§Ø°Ø§ Ù‚Ø§Ù… Ø§Ù„Ù…Ø¤Ù„Ù Ø¨Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙØ©" SelectMany "ØŸ Ø¥Ù†Ù‡ Ø§Ø³Ù… ØºØ±ÙŠØ¨ Ø¬Ø¯Ù‹Ø§".  Ø¥Ù†Ù‡ ØŒ ÙˆÙ„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø³Ø¨Ø¨ Ù„Ø°Ù„Ùƒ.  ÙÙŠ C # ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… <strong>SelectMany</strong> Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„Ø¯Ø¹Ù… <strong>ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª</strong> Ø§Ù„Ø°ÙŠ ÙŠØ¨Ø³Ø· Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ù…Ù‚Ø§Ù„ØªÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</a> )). </p><br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ ØªØºÙŠÙŠØ± Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„ØªØ§Ù„ÙŠ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = Function1(i) .SelectMany(x2 =&gt; Function2(x2).SelectMany(x3 =&gt; Function3(x3.SelectMany&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(x4 =&gt; x2 + x3 + x4)));</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø­ØªÙ‰ Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙˆØ³ÙŠØ·Ø© Ø§Ù„ØªÙŠ Ù‡ÙŠ Ù…Ø±ÙŠØ­Ø© ÙˆÙ„ÙƒÙ† Ù…Ù† Ø§Ù„ØµØ¹Ø¨ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒÙˆØ¯. </p><br><p style=";text-align:right;direction:rtl">  Ù‡Ù†Ø§ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ <strong>ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</strong> Ø¹Ù„Ù‰: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> x2 </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> x3 </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x2</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> x4 </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function3</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x3</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">select</span></span></span><span class="hljs-function"> x2 + x3 + x4</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø´ÙØ±Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ±Ø¬Ù…Ø© ØŒ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥ØµØ¯Ø§Ø± Ù…Ø­Ø³Ù† Ù…Ù† "ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ø¯ÙŠØ¯"</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Maybe&lt;TJ&gt; SelectMany&lt;TIn, TRes, TJ&gt;( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> Maybe&lt;TIn&gt; source, Func&lt;TIn, Maybe&lt;TRes&gt;&gt; func, Func&lt;TIn, TRes, TJ&gt; joinFunc) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (source.IsNothing) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Maybe&lt;TJ&gt;.Nothing; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = func(source.GetValue()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.IsNothing ? Maybe&lt;TJ&gt;.Nothing : joinFunc(source.GetValue(), res.GetValue()); }</code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø¯Ø¹Ù†Ø§ Ù†Ù†ÙØ° Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ù† Ø±Ø£Ø³ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ "Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ" Ø±Ø¨Ù…Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">"1,2"</span></span>, <span class="hljs-string"><span class="hljs-string">"3,7,1"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span>}) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = Sum(s); Console.WriteLine(res.IsNothing ? <span class="hljs-string"><span class="hljs-string">"Nothing"</span></span> : res.GetValue().ToString()); } Console.ReadKey(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Maybe&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span> =&gt; Split(input).SelectMany(items =&gt; Acc(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, items)); <span class="hljs-comment"><span class="hljs-comment">//Recursion is used to process a list of "Maybes" static Maybe&lt;int&gt; Acc(int res, int index, IReadOnlyList&lt;string&gt; array) =&gt; index &lt; array.Count ? Add(res, array[index]) .SelectMany(newRes =&gt; Acc(newRes, index + 1, array)) : res; static Maybe&lt;int&gt; Add(int acc, string nextStr) =&gt; Parse(nextStr).SelectMany&lt;int, int&gt;(nextNum =&gt; acc + nextNum); static Maybe&lt;string[]&gt; Split(string str) { var parts = str?.Split(',') .Where(s =&gt; !string.IsNullOrWhiteSpace(s)).ToArray(); return parts == null || parts.Length &lt; 2 ? Maybe&lt;string[]&gt;.Nothing : parts; } static Maybe&lt;int&gt; Parse(string value) =&gt; int.TryParse(value, out var result) ? result : Maybe&lt;int&gt;.Nothing;</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  <em>Ù„Ø§ ÙŠØ¨Ø¯Ùˆ Ø§Ù„Ø±Ù…Ø² Ø±Ø§Ø¦Ø¹Ù‹Ø§ Ù„Ø£Ù† C # Ù„Ù… ÙŠØªÙ… ØªØµÙ…ÙŠÙ…Ù‡ ÙƒÙ„ØºØ© ÙˆØ¸ÙŠÙÙŠØ© ØŒ ÙˆÙ„ÙƒÙ† Ø¨Ù„ØºØ§Øª ÙˆØ¸ÙŠÙÙŠØ© "Ø­Ù‚ÙŠÙ‚ÙŠØ©" Ù…Ø«Ù„ Haskell ØŒ ÙŠØ¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù‡Ø¬ Ø´Ø§Ø¦Ø¹Ù‹Ø§ Ù„Ù„ØºØ§ÙŠØ©</em> </p></div></div><br><h2 id="async-maybe" style=";text-align:right;direction:rtl">  Ù…ØªØ²Ø§Ù…Ù† Ø±Ø¨Ù…Ø§ </h2><br><p style=";text-align:right;direction:rtl">  Ø¥Ù† Ø¬ÙˆÙ‡Ø± <strong>Ø±Ø¨Ù…Ø§</strong> monad Ù‡Ùˆ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ù†Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ØŒ ÙˆÙ„ÙƒÙ† Ù‡Ø°Ø§ Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù‡Ùˆ "async / Ø§Ù†ØªØ¸Ø§Ø±".  Ù„Ø°Ù„Ùƒ Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¬Ù…Ø¹ Ø¨ÙŠÙ†Ù‡Ù…Ø§.  Ø£ÙˆÙ„Ø§Ù‹ ØŒ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¬Ø¹Ù„ <strong>Ø±Ø¨Ù…Ø§</strong> ØªÙƒØªØ¨ Ù…ØªÙˆØ§ÙÙ‚Ù‹Ø§ Ù…Ø¹ ÙˆØ¸Ø§Ø¦Ù ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†Ø© ÙˆÙ†Ø¹Ø±Ù Ø¨Ø§Ù„ÙØ¹Ù„ ÙƒÙŠÙÙŠØ© Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncMethodBuilder(typeof(MaybeTaskMethodBuilder&lt;&gt;))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Maybe</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Maybe&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetAwaiter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsCompleted { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCompleted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action continuation</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt;... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù„Ù‚ÙŠ Ù†Ø¸Ø±Ø© Ø¹Ù„Ù‰ ÙƒÙŠÙÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© "Ø±Ø¨Ù…Ø§ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©" ÙƒØ¬Ù‡Ø§Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© Ù„ØªÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø£ÙˆØ¬Ù‡ Ø§Ù„ØªØ´Ø§Ø¨Ù‡: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stateMachine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateMachine(); stateMachine.state = <span class="hljs-number"><span class="hljs-number">0</span></span>; stateMachine.i = i; stateMachine.MoveNext(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = stateMachine.Result; Console.WriteLine(res.IsNothing ? <span class="hljs-string"><span class="hljs-string">"Nothing"</span></span> : res.GetValue().ToString()); } Console.ReadKey(); } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">StateMachine</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> state = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; Result; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _f1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _f2; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _f3; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { label_begin: <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f1 = Function1(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.i); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = Match ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> label_begin; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f2 = Function2(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f1.GetValue()); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f2.IsNothing ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> label_begin; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f3 = Function3(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f2.GetValue()); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f3.IsNothing ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> label_begin; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Result = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._f3.GetValue(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Result = Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Nothing; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ Ù‚Ù…Ù†Ø§ Ø¨Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„Ø© Ù‡Ø°Ø§ Ù…Ø¹ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù„Ù€ C # (Ø§Ù†Ø¸Ø± Ø£Ø¹Ù„Ø§Ù‡ - "MyAwaitableMethodStateMachine") ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø£Ù† Ù†Ù„Ø§Ø­Ø¸ Ø£Ù†Ù‡ <strong>Ø±Ø¨Ù…Ø§</strong> ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø© Ø¯Ø§Ø®Ù„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Builder.AwaitOnCompleted(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine);</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø­ÙŠØ« <code>ref awaiter</code> Ù‡Ùˆ ÙƒØ§Ø¦Ù† Ù…Ù† Ù†ÙˆØ¹ <strong>Ø±Ø¨Ù…Ø§</strong> .  Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ù‡Ù†Ø§ Ù‡ÙŠ Ø£Ù†Ù†Ø§ Ù„Ø§ Ù†Ø³ØªØ·ÙŠØ¹ Ø¶Ø¨Ø· Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙŠ Ø­Ø§Ù„Ø© "Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©" (-1).  Ù‡Ù„ Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù†Ø§ Ù„Ø§ Ù†Ø³ØªØ·ÙŠØ¹ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªØ¯ÙÙ‚ Ø§Ù„ØªÙ†ÙÙŠØ°ØŸ  ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ Ù„Ø§.  Ø§Ù„Ø´ÙŠØ¡ Ù‡Ùˆ Ø£Ù†Ù‡ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙƒÙ„ Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù† ØŒ ØªÙ‚ÙˆÙ… C # Ø¨ØªØ¹ÙŠÙŠÙ† Ø¥Ø¬Ø±Ø§Ø¡ Ø±Ø¯ <strong>Ø§ØªØµØ§Ù„ Ù…Ù†</strong> Ø®Ù„Ø§Ù„ ÙˆØ§Ø¬Ù‡Ø© <strong>INotifyCompletion</strong> ØŒ Ù„Ø°Ù„Ùƒ Ø¥Ø°Ø§ Ø£Ø±Ø¯Ù†Ø§ ÙƒØ³Ø± ØªØ¯ÙÙ‚ Ø§Ù„ØªÙ†ÙÙŠØ° ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ ÙÙ‚Ø· Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¥Ø¬Ø±Ø§Ø¡ Ø±Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ¹Ø°Ø± Ø¹Ù„ÙŠÙ†Ø§ Ù…ÙˆØ§ØµÙ„Ø© Ø§Ù„ØªØ¯ÙÙ‚. <br>  Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø¢Ø®Ø± Ù‡Ù†Ø§ Ù‡Ùˆ Ø£Ù† Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ„Ø¯Ø© ÙŠÙ…Ø±Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ§Ù„ÙŠ (ÙƒØ±Ø¯ Ø§ØªØµØ§Ù„ Ù…Ø³ØªÙ…Ø±) Ù„Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ ØŒ Ù„ÙƒÙ†Ù†Ø§ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø±Ø¯ Ø§ØªØµØ§Ù„ Ù…Ø³ØªÙ…Ø± Ù„Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ³Ù…Ø­ Ø¨ØªØ¬Ø§ÙˆØ² Ø¨Ø§Ù‚ÙŠ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/da/v-/vb/dav-vbwfusgtb1degxhxyhafsdk.png"></p><br><p style=";text-align:right;direction:rtl">  Ù„Ø°Ù„Ùƒ ØŒ Ù†Ø­Ù† Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø±Ø¨Ø· Ø¹Ù…Ù„ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø·ÙÙ„ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø§ Ù…Ø¹ Ø£Ø³Ù„Ø§ÙÙ‡.  ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… "Ø£Ø¯Ø§Ø© Ø¥Ù†Ø´Ø§Ø¡" Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø§ ÙˆØ§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ù„Ø¹Ù…Ù„ÙŠØ© Ù…Ø²Ø§Ù…Ù†Ø© Ø­Ø§Ù„ÙŠØ© - <strong>Ù…Ù‡Ù…Ø©</strong> .  Ø³ÙŠØªÙ… ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª <code>AwaitOnCompleted(ref awaiter</code> ÙÙŠ <code>AwaitOnCompleted(ref awaiter</code> ÙƒÙ…Ø³Ø¤ÙˆÙ„ <strong>Ø§Ù†ØªØ¸Ø§Ø±</strong> ØŒ Ù„Ø°Ù„Ùƒ Ù†Ø­ØªØ§Ø¬ ÙÙ‚Ø· Ø¥Ù„Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ù‡ÙŠ Ù…Ø«Ø§Ù„ <strong>Ø±Ø¨Ù…Ø§</strong> ØŒ ÙˆØ¥Ø°Ø§ ÙƒØ§Ù† Ù‚Ø¯ ØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡Ø§ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØŒ <strong>ÙØ±Ø¨Ù…Ø§</strong> ØªÙƒÙˆÙ† <code>AwaitOnCompleted(ref awaiter</code> Ù„Ù„Ø·ÙÙ„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncMethodBuilder(typeof(MaybeTaskMethodBuilder&lt;&gt;))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Maybe</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">IMaybe</span></span>, <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IMaybe _parent; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> IMaybe.SetParent(IMaybe parent) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parent = parent; ... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MaybeTaskMethodBuilder</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { ... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> GenericAwaitOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : INotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (awaiter <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> IMaybe maybe) { maybe.SetParent(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Task); } awaiter.OnCompleted(stateMachine.MoveNext); } ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ† <strong>Ø±Ø¨Ø·</strong> ÙƒÙ„ Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª <strong>Ø±Ø¨Ù…Ø§</strong> ÙÙŠ Ø´Ø¬Ø±Ø© ØŒ ÙˆÙ†ØªÙŠØ¬Ø© Ù„Ø°Ù„Ùƒ ØŒ Ø³ÙˆÙ Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ù„Ù„Ø¬Ø°Ø± <strong>Ø±Ø¨Ù…Ø§</strong> (Ø·Ø±ÙŠÙ‚Ø© <strong>Ø§Ù„Ø®Ø±ÙˆØ¬</strong> ) Ù…Ù† Ø£ÙŠ Ø¹Ù‚Ø¯Ø© Ù‡Ø¨ÙˆØ·ÙŠØ©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncMethodBuilder(typeof(MaybeTaskMethodBuilder&lt;&gt;))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Maybe</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">IMaybe</span></span>, <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Action _continuation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IMaybe _parent; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCompleted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action continuation</span></span></span><span class="hljs-function">)</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._continuation = continuation; ... } ... <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> IMaybe.Exit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsCompleted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parent != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parent.Exit(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._continuation(); } } ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙŠØ¬Ø¨ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø·Ø±ÙŠÙ‚Ø© <strong>Ø§Ù„Ø®Ø±ÙˆØ¬</strong> Ù‡Ø°Ù‡ Ø¹Ù†Ø¯Ù…Ø§ ÙˆØ¬Ø¯Ù†Ø§ (Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ÙÙˆÙ‚ Ø§Ù„Ø´Ø¬Ø±Ø©) Ø­Ù„Ù‹Ø§ <strong>Ø±Ø¨Ù…Ø§ Ø±Ø¨Ù…Ø§</strong> Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø­Ø§Ù„Ø© <strong>Ù„Ø§ Ø´ÙŠØ¡</strong> .  Ù…Ø«Ù„ <strong>Ø±Ø¨Ù…Ø§</strong> ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø«Ù„ Ù‡Ø°Ù‡: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">Maybe&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> str</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(str, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result) ? result : Maybe&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Nothing();</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„ØªØ®Ø²ÙŠÙ† Ø­Ø§Ù„Ø© ØªÙ… Ø­Ù„Ù‡Ø§ <strong>Ø±Ø¨Ù…Ø§</strong> Ø¯Ø¹Ù†Ø§ Ù†Ù‚Ø¯Ù… Ø¨Ù†ÙŠØ© Ù…Ù†ÙØµÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> MaybeResult { ... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> T _value; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsNothing; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsNothing ? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Nothing"</span></span>) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._value; } [AsyncMethodBuilder(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(MaybeTaskMethodBuilder&lt;&gt;))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Maybe</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">IMaybe</span></span>, <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MaybeResult? _result; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Maybe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }<span class="hljs-comment"><span class="hljs-comment">//Used in async method private Maybe(MaybeResult result) =&gt; this._result = result;// "Resolved" instance ... }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù†Ø¯Ù…Ø§ ØªØ³ØªØ¯Ø¹ÙŠ Ø¢Ù„Ø© Ø­Ø§Ù„Ø© ØºÙŠØ± <strong>Ù…ØªØ²Ø§Ù…Ù†Ø©</strong> (Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ù†Ø´Ø¦ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©) Ø·Ø±ÙŠÙ‚Ø© <strong>OnCompleted</strong> Ù„Ø­Ù„ ØªÙ… Ø­Ù„Ù‡ Ø¨Ø§Ù„ÙØ¹Ù„ ØŒ <strong>Ø±Ø¨Ù…Ø§</strong> ÙÙŠ Ø­Ø§Ù„Ø© <strong>Ù„Ø§ Ø´ÙŠØ¡ ØŒ</strong> Ø³Ù†ÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±ÙŠÙ† Ø¹Ù„Ù‰ ÙƒØ³Ø± ØªØ¯ÙÙ‚ ÙƒØ§Ù…Ù„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCompleted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action continuation</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._continuation = continuation; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._result.HasValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.NotifyResult(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._result.Value.IsNothing); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T result</span></span></span><span class="hljs-function">) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//Is called by a "method builder" when an async method is completed { this._result = MaybeResult.Value(result); this.IsCompleted = true; this.NotifyResult(this._result.Value.IsNothing); } private void NotifyResult(bool isNothing) { this.IsCompleted = true; if (isNothing) { this._parent.Exit();//Braking an entire flow } else { this._continuation?.Invoke(); } }</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„ÙˆØ­ÙŠØ¯ - ÙƒÙŠÙÙŠØ© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ù„Ù…Ø²Ø§Ù…Ù†Ø© <strong>Ø±Ø¨Ù…Ø§</strong> Ø®Ø§Ø±Ø¬ Ù†Ø·Ø§Ù‚Ù‡ (Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø© ØºÙŠØ± <strong>Ù…ØªØ²Ø§Ù…Ù†Ø©</strong> Ù„Ù† <strong>ÙŠÙƒÙˆÙ†</strong> Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡Ø§).  Ø¥Ø°Ø§ Ø­Ø§ÙˆÙ„Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¬Ø±Ø¯ <strong>Ø§Ù†ØªØ¸Ø§Ø±</strong> Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¹ Ù…Ø«Ø§Ù„ <strong>Ø±Ø¨Ù…Ø§</strong> ØŒ ÙØ³ÙŠØªÙ… Ø·Ø±Ø­ Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø¨Ø³Ø¨Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø²: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncMethodBuilder(typeof(MaybeTaskMethodBuilder&lt;&gt;))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Maybe</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">IMaybe</span></span>, <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MaybeResult? _result; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._result.Value.GetValue(); } ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> MaybeResult { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.IsNothing ? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Nothing"</span></span>) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._value; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ ÙÙ‚Ø· Ø¥Ø¶Ø§ÙØ© <strong>Awaiter</strong> Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø´Ø£Ù†Ù‡ Ø£Ù† ÙŠØ¹ÙŠØ¯ Ø¨Ù†ÙŠØ© <strong>MaybeResult</strong> Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ³ÙˆÙ Ù†ØªÙ…ÙƒÙ† Ù…Ù† ÙƒØªØ§Ø¨Ø© Ø±Ù…Ø² Ù…Ø«Ù„ Ù‡Ø°Ø§: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GetResult().GetMaybeResult(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(res.IsNothing){ ... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ res.GetValue(); ... };</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡ Ø§Ù„Ø¢Ù†.  ÙÙŠ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© ØŒ Ø£ØºÙÙ„ Ø¨Ø¹Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù„Ù„ØªØ±ÙƒÙŠØ² ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± Ø£Ù‡Ù…ÙŠØ©.  ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ <a href="">Ø¬ÙŠØ«Ø¨</a> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ÙˆÙ…Ø¹ Ø°Ù„Ùƒ</strong> ØŒ Ù„Ø§ Ø£ÙˆØµÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙÙŠ Ø£ÙŠ ÙƒÙˆØ¯ Ø¥Ù†ØªØ§Ø¬ Ù„Ø£Ù†Ù‡ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø´ÙƒÙ„Ø© ÙƒØ¨ÙŠØ±Ø© - Ø¹Ù†Ø¯Ù…Ø§ Ù†Ù‚Ø¶ÙŠ Ø¹Ù„Ù‰ ØªØ¯ÙÙ‚ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø¬Ø°Ø± <strong>Ø±Ø¨Ù…Ø§</strong> Ø³Ù†ØªØ¬Ø§ÙˆØ² ÙƒÙ„ Ø´ÙŠØ¡!  Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªÙ„ Ø§Ù„Ø£Ø®ÙŠØ±Ø© (Ø¥Ù†Ù‡Ø§ Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ "Ù‡Ù„ ØªØ³Ù…Ù‰ Ø§Ù„ÙƒØªÙ„ <strong>Ø£Ø®ÙŠØ±Ù‹Ø§</strong> Ø¯Ø§Ø¦Ù…Ù‹Ø§ØŸ") ØŒ ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ÙØ¥Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´ØºÙ„ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† <strong>ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ†</strong> Ù„Ù† ÙŠØ¹Ù…Ù„ ÙƒÙ…Ø§ Ù‡Ùˆ Ù…ØªÙˆÙ‚Ø¹ ÙˆÙ‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ø°Ù„Ùƒ Ø¥Ù„Ù‰ ØªØ³Ø±Ø¨ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯.  ÙŠÙ…ÙƒÙ† Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¥Ø°Ø§ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø±Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ØŒ ÙØ³Ù†Ø·Ø±Ø­ Ø§Ø³ØªØ«Ù†Ø§Ø¡Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§ Ø³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§ ( <a href="">Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø±</a> ) ØŒ ÙˆÙ„ÙƒÙ† ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙ‚Ù„ÙŠØ¯ Ù„Ù„Ø£Ø¯Ø§Ø¡ (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù…Ù‚Ø¨ÙˆÙ„Ù‹Ø§ ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª).  Ù…Ø¹ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ C # ØŒ Ù„Ø§ Ø£Ø±Ù‰ Ø£ÙŠ Ø­Ù„ Ø¢Ø®Ø± ÙˆÙ„ÙƒÙ† Ù‚Ø¯ ÙŠØªÙ… ØªØºÙŠÙŠØ± Ø°Ù„Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„. </p><br><p style=";text-align:right;direction:rtl">  Ù„Ø§ ØªØ¹Ù†ÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¶Ø­Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ø¯ÙŠÙ…Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© ØªÙ…Ø§Ù…Ù‹Ø§ ØŒ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù„ØªÙ†ÙÙŠØ° monads Ø§Ù„Ø£Ø®Ø±Ù‰ Ø§Ù„ØªÙŠ Ù„Ø§ ØªØªØ·Ù„Ø¨ ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ° ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ "Reader".  ÙƒÙŠÙÙŠØ© ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ "Ø§Ù„Ù‚Ø§Ø±Ø¦" Ø£Ø­Ø§Ø¯ÙŠ Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„ØµØºÙŠØ± <strong>/ ØªÙ†ØªØ¸Ø± Ø³Ø£Ø¸Ù‡Ø±</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458692/">https://habr.com/ru/post/ar458692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458680/index.html">Ù„Ù…Ø§Ø°Ø§ Ù†Ø­ØªØ§Ø¬ UMLØŸ Ø£Ùˆ ÙƒÙŠÙ ØªØ­ÙØ¸ Ø£Ø¹ØµØ§Ø¨Ùƒ ÙˆÙˆÙ‚ØªÙƒ</a></li>
<li><a href="../ar458684/index.html">ØªÙ‚ÙˆÙ… ICANN Ø¨Ø¥Ø²Ø§Ù„Ø© Ø­Ø¯ Ø§Ù„Ø³Ø¹Ø± Ù„Ù†Ø·Ø§Ù‚ .org - Ù„Ù…Ø§Ø°Ø§ ÙŠØ¹Ø§Ø±Ø¶ Ù…Ø¬ØªÙ…Ø¹ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆÙ…Ø§ Ø³ÙŠØ­Ø¯Ø« Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ</a></li>
<li><a href="../ar458686/index.html">ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØªØºØ±ÙŠØ¯Ø©Pythonetc ÙŠÙˆÙ†ÙŠÙˆ 2019</a></li>
<li><a href="../ar458688/index.html">Ù†ØµØ§Ø¦Ø­ ÙˆØ­ÙŠÙ„ Ù…Ù† my Telegram-channelpythonetc ØŒ ÙŠÙˆÙ†ÙŠÙˆ 2019</a></li>
<li><a href="../ar458690/index.html">Ø£ØªÙ…ØªØ© Ø°Ù„Ùƒ! ÙƒÙŠÙ Ù‚Ù…Ù†Ø§ Ø¨ØªØ­Ø³ÙŠÙ† Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙƒØ§Ù…Ù„</a></li>
<li><a href="../ar458694/index.html">Ù‡Ù„ Ø¨ÙŠØ«ÙˆÙ† Ø¬ÙŠÙ„ Ù…ÙŠØª Ø¨Ø§Ù„ÙØ¹Ù„ØŸ</a></li>
<li><a href="../ar458696/index.html">Ø§Ù„ØªØ±ÙƒÙŠØ¨ ØŒ Ø£Ùˆ Ù…Ø§ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØªÙ‡ Ù„ØªØµØ¨Ø­ ÙÙ†Ø§Ù† Ø§Ù„Ø³Ø·Ø­. Ø§Ù„Ø¬Ø²Ø¡ 3. PBR ÙˆØ§Ù„Ù…ÙˆØ§Ø¯</a></li>
<li><a href="../ar458698/index.html">Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø³Ù„Ø§Ù… ÙˆÙ…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¨ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</a></li>
<li><a href="../ar458702/index.html">ÙƒÙ„Ø§Ø¨ Ø§Ù„Ø²Ù„Ø§Ø¬Ø§Øª: Ù…Ø§ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØªÙ‡ Ø¹Ù†Ù‡Ø§ ØŒ ÙˆÙƒÙŠÙ ØªÙ… Ø¥Ø­Ø¶Ø§Ø±Ù‡Ø§</a></li>
<li><a href="../ar458704/index.html">ØªÙ†ÙÙŠØ° Ù†Ø¸Ø§Ù… DLP Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ Ù„Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„ØªØ¬Ø²Ø¦Ø©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>