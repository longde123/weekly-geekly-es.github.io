<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥— ğŸ™† ğŸ¤ æšä¸¾ç¬¬Iéƒ¨åˆ†ä¸­çš„æœ€å¤§å€¼æ•° ğŸ” â˜£ï¸ ğŸœï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¬¬ä¸€éƒ¨åˆ†ï¼Œç†è®º | ç¬¬äºŒéƒ¨åˆ†ï¼Œå®ç”¨ 

 æ ¹æ®Evgeny Mandrikov aka Godinçš„æ¨æ–‡ï¼š 


 åœ¨å…¶ä¸­ï¼Œä»–æƒ³çŸ¥é“åœ¨Java enumä¸­å¯ä»¥æŒ‡å®šæœ€å¤§æ•°é‡çš„å€¼ã€‚ ç»è¿‡ä¸€ç³»åˆ—å®éªŒå’Œä½¿ç”¨é»‘é­”æ³•ConstantDynamicï¼ˆ JEP 309 ï¼‰ï¼Œé—®é¢˜çš„ä½œè€…å¾—å‡ºäº†ç¼–å·8191ã€‚ 

 åœ¨ç”±...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æšä¸¾ç¬¬Iéƒ¨åˆ†ä¸­çš„æœ€å¤§å€¼æ•°</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483392/">  <b>ç¬¬ä¸€éƒ¨åˆ†ï¼Œç†è®º</b> |  <font color="#cccccc"><b>ç¬¬äºŒéƒ¨åˆ†ï¼Œå®ç”¨</b></font> <br><hr><br> æ ¹æ®Evgeny Mandrikov aka <a href="https://habr.com/ru/users/godin/" class="user_link">Godin</a>çš„æ¨æ–‡ï¼š <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1205601579111501836"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br> åœ¨å…¶ä¸­ï¼Œä»–æƒ³çŸ¥é“åœ¨Java <code>enum</code>ä¸­å¯ä»¥æŒ‡å®šæœ€å¤§æ•°é‡çš„å€¼ã€‚ ç»è¿‡ä¸€ç³»åˆ—å®éªŒå’Œä½¿ç”¨é»‘é­”æ³•ConstantDynamicï¼ˆ <a href="https://openjdk.java.net/jeps/309">JEP 309</a> ï¼‰ï¼Œé—®é¢˜çš„ä½œè€…å¾—å‡ºäº†ç¼–å·8191ã€‚ <br><br> åœ¨ç”±ä¸¤ç¯‡æ–‡ç« ç»„æˆçš„ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯»æ‰¾æšä¸¾ä¸­å…ƒç´ æ•°é‡çš„ç†è®ºæé™ï¼Œå°è¯•åœ¨å®è·µä¸­æ›´æ¥è¿‘å®ƒä»¬ï¼Œå¹¶æ‰¾å‡ºJEP 309å¯ä»¥å¦‚ä½•æä¾›å¸®åŠ©ã€‚ <br><a name="habracut"></a><br><h1> ä¾¦å¯Ÿ </h1><br>  <i>å›é¡¾ç« èŠ‚ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹åˆ°æšä¸¾è¢«åˆ†è§£ã€‚</i> <br><br> é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»¥ä¸‹æšä¸¾çš„å«ä¹‰ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> FizzBuzz { Fizz, Buzz, FizzBuzz; }</code> </pre><br> ç¼–è¯‘å’Œæ‹†å¸åï¼š <br><br><div class="spoiler">  <b class="spoiler_title">javap -c -s -p -v FizzBuâ€‹â€‹zz.class</b> <div class="spoiler_text"><pre> <code class="java hljs">Classfile /dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>/FizzBuzz.class Last modified <span class="hljs-number"><span class="hljs-number">32</span></span> . <span class="hljs-number"><span class="hljs-number">2019</span></span> .; size <span class="hljs-number"><span class="hljs-number">903</span></span> bytes MD5 checksum add0af79de3e9a70a7bbf7d57dd0cfe7 Compiled from <span class="hljs-string"><span class="hljs-string">"FizzBuzz.java"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FizzBuzz</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lang</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enum</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FizzBuzz</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">minor</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">version</span></span></span><span class="hljs-class">: 0 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">major</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">version</span></span></span><span class="hljs-class">: 58 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">flags</span></span></span><span class="hljs-class">: (0</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x4031</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ACC_PUBLIC</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ACC_FINAL</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ACC_SUPER</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ACC_ENUM</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">this_class</span></span></span><span class="hljs-class">: #2 // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FizzBuzz</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">super_class</span></span></span><span class="hljs-class">: #13 // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lang</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interfaces</span></span></span><span class="hljs-class">: 0, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fields</span></span></span><span class="hljs-class">: 4, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">methods</span></span></span><span class="hljs-class">: 4, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attributes</span></span></span><span class="hljs-class">: 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pool</span></span></span><span class="hljs-class">: #1 </span></span>= Fieldref #<span class="hljs-number"><span class="hljs-number">2</span></span>.#<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-comment"><span class="hljs-comment">// FizzBuzz.$VALUES:[LFizzBuzz; #2 = Class #4 // FizzBuzz #3 = NameAndType #5:#6 // $VALUES:[LFizzBuzz; #4 = Utf8 FizzBuzz #5 = Utf8 $VALUES #6 = Utf8 [LFizzBuzz; #7 = Methodref #8.#9 // "[LFizzBuzz;".clone:()Ljava/lang/Object; #8 = Class #6 // "[LFizzBuzz;" #9 = NameAndType #10:#11 // clone:()Ljava/lang/Object; #10 = Utf8 clone #11 = Utf8 ()Ljava/lang/Object; #12 = Methodref #13.#14 // java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum; #13 = Class #15 // java/lang/Enum #14 = NameAndType #16:#17 // valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum; #15 = Utf8 java/lang/Enum #16 = Utf8 valueOf #17 = Utf8 (Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum; #18 = Methodref #13.#19 // java/lang/Enum."&lt;init&gt;":(Ljava/lang/String;I)V #19 = NameAndType #20:#21 // "&lt;init&gt;":(Ljava/lang/String;I)V #20 = Utf8 &lt;init&gt; #21 = Utf8 (Ljava/lang/String;I)V #22 = String #23 // Fizz #23 = Utf8 Fizz #24 = Methodref #2.#19 // FizzBuzz."&lt;init&gt;":(Ljava/lang/String;I)V #25 = Fieldref #2.#26 // FizzBuzz.Fizz:LFizzBuzz; #26 = NameAndType #23:#27 // Fizz:LFizzBuzz; #27 = Utf8 LFizzBuzz; #28 = String #29 // Buzz #29 = Utf8 Buzz #30 = Fieldref #2.#31 // FizzBuzz.Buzz:LFizzBuzz; #31 = NameAndType #29:#27 // Buzz:LFizzBuzz; #32 = String #4 // FizzBuzz #33 = Fieldref #2.#34 // FizzBuzz.FizzBuzz:LFizzBuzz; #34 = NameAndType #4:#27 // FizzBuzz:LFizzBuzz; #35 = Utf8 values #36 = Utf8 ()[LFizzBuzz; #37 = Utf8 Code #38 = Utf8 LineNumberTable #39 = Utf8 (Ljava/lang/String;)LFizzBuzz; #40 = Utf8 LocalVariableTable #41 = Utf8 name #42 = Utf8 Ljava/lang/String; #43 = Utf8 this #44 = Utf8 Signature #45 = Utf8 ()V #46 = Utf8 &lt;clinit&gt; #47 = Utf8 Ljava/lang/Enum&lt;LFizzBuzz;&gt;; #48 = Utf8 SourceFile #49 = Utf8 FizzBuzz.java { public static final FizzBuzz Fizz; descriptor: LFizzBuzz; flags: (0x4019) ACC_PUBLIC, ACC_STATIC, ACC_FINAL, ACC_ENUM public static final FizzBuzz Buzz; descriptor: LFizzBuzz; flags: (0x4019) ACC_PUBLIC, ACC_STATIC, ACC_FINAL, ACC_ENUM public static final FizzBuzz FizzBuzz; descriptor: LFizzBuzz; flags: (0x4019) ACC_PUBLIC, ACC_STATIC, ACC_FINAL, ACC_ENUM private static final FizzBuzz[] $VALUES; descriptor: [LFizzBuzz; flags: (0x101a) ACC_PRIVATE, ACC_STATIC, ACC_FINAL, ACC_SYNTHETIC public static FizzBuzz[] values(); descriptor: ()[LFizzBuzz; flags: (0x0009) ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=0, args_size=0 0: getstatic #1 // Field $VALUES:[LFizzBuzz; 3: invokevirtual #7 // Method "[LFizzBuzz;".clone:()Ljava/lang/Object; 6: checkcast #8 // class "[LFizzBuzz;" 9: areturn LineNumberTable: line 1: 0 public static FizzBuzz valueOf(java.lang.String); descriptor: (Ljava/lang/String;)LFizzBuzz; flags: (0x0009) ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=1, args_size=1 0: ldc #2 // class FizzBuzz 2: aload_0 3: invokestatic #12 // Method java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum; 6: checkcast #2 // class FizzBuzz 9: areturn LineNumberTable: line 1: 0 LocalVariableTable: Start Length Slot Name Signature 0 10 0 name Ljava/lang/String; private FizzBuzz(); descriptor: (Ljava/lang/String;I)V flags: (0x0002) ACC_PRIVATE Code: stack=3, locals=3, args_size=3 0: aload_0 1: aload_1 2: iload_2 3: invokespecial #18 // Method java/lang/Enum."&lt;init&gt;":(Ljava/lang/String;I)V 6: return LineNumberTable: line 1: 0 LocalVariableTable: Start Length Slot Name Signature 0 7 0 this LFizzBuzz; Signature: #45 // ()V static {}; descriptor: ()V flags: (0x0008) ACC_STATIC Code: stack=4, locals=0, args_size=0 0: new #2 // class FizzBuzz 3: dup 4: ldc #22 // String Fizz 6: iconst_0 7: invokespecial #24 // Method "&lt;init&gt;":(Ljava/lang/String;I)V 10: putstatic #25 // Field Fizz:LFizzBuzz; 13: new #2 // class FizzBuzz 16: dup 17: ldc #28 // String Buzz 19: iconst_1 20: invokespecial #24 // Method "&lt;init&gt;":(Ljava/lang/String;I)V 23: putstatic #30 // Field Buzz:LFizzBuzz; 26: new #2 // class FizzBuzz 29: dup 30: ldc #32 // String FizzBuzz 32: iconst_2 33: invokespecial #24 // Method "&lt;init&gt;":(Ljava/lang/String;I)V 36: putstatic #33 // Field FizzBuzz:LFizzBuzz; 39: iconst_3 40: anewarray #2 // class FizzBuzz 43: dup 44: iconst_0 45: getstatic #25 // Field Fizz:LFizzBuzz; 48: aastore 49: dup 50: iconst_1 51: getstatic #30 // Field Buzz:LFizzBuzz; 54: aastore 55: dup 56: iconst_2 57: getstatic #33 // Field FizzBuzz:LFizzBuzz; 60: aastore 61: putstatic #1 // Field $VALUES:[LFizzBuzz; 64: return LineNumberTable: line 3: 0 line 5: 13 line 7: 26 line 1: 39 } Signature: #47 // Ljava/lang/Enum&lt;LFizzBuzz;&gt;; SourceFile: "FizzBuzz.java"</span></span></code> </pre><br></div></div><br> åœ¨ä¸Šå¸‚æˆ‘ä»¬é‡åˆ°äº† <br><br><ul><li> æšä¸¾ä¸­å®šä¹‰çš„æ¯ä¸ªå€¼çš„ä¸€ä¸ª<code>public static final</code>å­—æ®µ </li><li> ä¸“ç”¨åˆæˆå­—æ®µ<code>$VALUES</code> ï¼Œ <code>values()</code>æ–¹æ³•çš„å®ç°ç»†èŠ‚ </li><li>  <code>values()</code>å’Œ<code>valueOf()</code>æ–¹æ³•çš„å®ç° </li><li> ç§äººå»ºè®¾è€… </li><li> é™æ€åˆå§‹åŒ–çš„å—ï¼Œå®é™…ä¸Šæœ€æœ‰è¶£çš„äº‹æƒ…å‘ç”Ÿåœ¨è¿™é‡Œã€‚ è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘å®ƒã€‚ </li></ul><br> ä»¥Javaä»£ç çš„å½¢å¼ï¼Œåè€…çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { Fizz = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FizzBuzz(<span class="hljs-string"><span class="hljs-string">"Fizz"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); Buzz = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FizzBuzz(<span class="hljs-string"><span class="hljs-string">"Buzz"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); FizzBuzz = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FizzBuzz(<span class="hljs-string"><span class="hljs-string">"FizzBuzz"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); $VALUES = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FizzBuzz[] { Fizz, Buzz, FizzBuzz }; }</code> </pre><br> é¦–å…ˆï¼Œåˆ›å»ºæšä¸¾å…ƒç´ çš„å®ä¾‹ã€‚ åˆ›å»ºçš„å®ä¾‹å°†ç«‹å³å†™å…¥ç›¸åº”çš„<code>public static final</code>å­—æ®µã€‚ <br><br> ç„¶ååˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ç”¨æŒ‡å‘æ‰€æœ‰æšä¸¾å…ƒç´ å®ä¾‹çš„é“¾æ¥å¡«å……ã€‚ é“¾æ¥æ¥è‡ªæˆ‘ä»¬åœ¨ä¸Šä¸€æ®µä¸­åˆå§‹åŒ–çš„ç±»çš„å­—æ®µã€‚ å¡«å……çš„æ•°ç»„å­˜å‚¨åœ¨<code>private static final</code>å­—æ®µ<code>$VALUES</code> ã€‚ <br><br> åœ¨é‚£ä¹‹åï¼Œæ¸…å•å°±å¯ä»¥å¼€å§‹äº†ã€‚ <br><br><h1> ç“¶é¢ˆ </h1><br>  <i>æˆ‘ä»¬åœ¨æ— èŠçš„ç« èŠ‚ä¸­å¯»æ‰¾å¯¹æšä¸¾å…ƒç´ æ•°é‡çš„é™åˆ¶ã€‚</i> <br><br> æ‚¨å¯ä»¥ä»<a href="https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html">JLS</a>ç« èŠ‚<a href="https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html">8.9.3èŠ‚</a> â€œæšä¸¾æˆå‘˜â€å¼€å§‹æœç´¢ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">JLS 8.9.3æšä¸¾æˆå‘˜</b> <div class="spoiler_text"><blockquote> æšä¸¾ç±»å‹Eçš„æˆå‘˜éƒ½æ˜¯ä»¥ä¸‹æ‰€æœ‰ï¼š <br>  ... <br>  *å¯¹äºEå£°æ˜ä¸»ä½“ä¸­å£°æ˜çš„æ¯ä¸ªæšä¸¾å¸¸é‡cï¼ŒEå…·æœ‰ <br> å…·æœ‰ç›¸åŒç±»å‹çš„éšå¼å£°æ˜çš„Eå‹å…¬å…±é™æ€æœ€ç»ˆå­—æ®µ <br> åç§°ä¸ºcã€‚ è¯¥å­—æ®µå…·æœ‰å˜é‡åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨å®ä¾‹åŒ–Eå¹¶ä¼ é€’ä»»ä½• <br>  cä¸ºä¸ºEé€‰æ‹©çš„æ„é€ å‡½æ•°çš„å‚æ•°ã€‚è¯¥å­—æ®µå…·æœ‰ç›¸åŒçš„æ‰¹æ³¨ <br> ä½œä¸ºcï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ <br><br> è¿™äº›å­—æ®µä»¥ä¸ç›¸åº”å­—æ®µç›¸åŒçš„é¡ºåºéšå¼å£°æ˜ <br> æšä¸¾å¸¸é‡ï¼Œåœ¨ä¸»ä½“ä¸­æ˜¾å¼å£°æ˜çš„ä»»ä½•é™æ€å­—æ®µä¹‹å‰ <br>  Eçš„å£°æ˜ <br>  ... <br>  *ä»¥ä¸‹éšå¼å£°æ˜çš„æ–¹æ³•ï¼š <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Returns an array containing the constants of this enum * type, in the order they're declared. This method may be * used to iterate over the constants as follows: * * for(E c : E.values()) * System.out.println(c); * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> an array containing the constants of this enum * type, in the order they're declared */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> E[] values(); <span class="hljs-comment"><span class="hljs-comment">/** * Returns the enum constant of this type with the specified * name. * The string must match exactly an identifier used to declare * an enum constant in this type. (Extraneous whitespace * characters are not permitted.) * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> the enum constant with the specified name * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> IllegalArgumentException if this enum type has no * constant with the specified name */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> E </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">valueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>;</code> </pre><br></blockquote><br></div></div><br> å› æ­¤ï¼Œæ¯ä¸ªæšä¸¾ç±»éƒ½æœ‰ä¸€ä¸ª<code>values()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ­¤æšä¸¾ä¸­å£°æ˜çš„æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚ å› æ­¤ï¼ŒçœŸç©ºä¸­çš„çƒå½¢æšä¸¾ä¸èƒ½åŒ…å«è¶…è¿‡<code>Integer.MAX_VALUE + 1</code>å…ƒç´ ã€‚ <br><br> ç»§ç»­å‰è¿›ã€‚  Javaä¸­çš„æšä¸¾è¡¨ç¤ºä¸º<code>java.lang.Enum</code>ç±»çš„åä»£ï¼Œå› æ­¤å®ƒä»¬å—JVMä¸­ç±»å›ºæœ‰çš„æ‰€æœ‰é™åˆ¶ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹JVMSÂ§4.1â€œ ClassFileç»“æ„â€ä¸­ç»™å‡ºçš„ç±»æ–‡ä»¶ç»“æ„çš„é«˜çº§æè¿°ï¼š <br><br><pre> <code class="java hljs">ClassFile { u4 magic; u2 minor_version; u2 major_version; u2 constant_pool_count; cp_info constant_pool[constant_pool_count-<span class="hljs-number"><span class="hljs-number">1</span></span>]; u2 access_flags; u2 this_class; u2 super_class; u2 interfaces_count; u2 interfaces[interfaces_count]; u2 fields_count; field_info fields[fields_count]; u2 methods_count; method_info methods[methods_count]; u2 attributes_count; attribute_info attributes[attributes_count]; }</code> </pre><br> æ­£å¦‚æˆ‘ä»¬ä»JLSÂ§8.9.3ä¸­å·²ç»çŸ¥é“çš„é‚£æ ·ï¼Œå°†ä¸ºç»“æœç±»ä¸­çš„æ¯ä¸ªæšä¸¾å…ƒç´ åˆ›å»ºä¸€ä¸ªåŒåå­—æ®µã€‚ ç±»ä¸­çš„å­—æ®µæ•°å®šä¹‰äº†ä¸€ä¸ª16ä½æ— ç¬¦å·<code>fields_count</code> ï¼Œè¿™å°†æˆ‘ä»¬é™åˆ¶ä¸ºä¸€ä¸ªç±»æ–‡ä»¶æˆ–65_534æšä¸¾å…ƒç´ ä¸­çš„65_535ä¸ªå­—æ®µã€‚  <code>$VALUES</code>æ•°ç»„ä¿ç•™ä¸€ä¸ªå­—æ®µï¼Œè¯¥å­—æ®µçš„ä¸€ä¸ªå…‹éš†è¿”å›<code>values()</code>æ–¹æ³•ã€‚ è§„èŒƒä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜ï¼Œä½†æ˜¯ä¸å¤ªå¯èƒ½æå‡ºæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚ <br><br> å­—æ®µï¼Œæ–¹æ³•ï¼Œç±»ï¼Œå¸¸é‡å€¼ç­‰çš„åç§°å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ã€‚ <br><blockquote> å¦‚æœæ‚¨å¯¹å¸¸é‡æ± çš„å†…éƒ¨ç»“æ„ä¸€æ— æ‰€çŸ¥ï¼Œå»ºè®®æ‚¨é˜…è¯»<a href="https://habr.com/ru/users/lany/" class="user_link">lany</a>çš„<a href="https://habrahabr.ru/post/222519/">å¤è€æ–‡ç« </a> ã€‚ å°½ç®¡è‡ªä»å°†å…¶å†™å…¥å¸¸é‡æ± ä»¥æ¥ï¼Œå·²ç»å‡ºç°äº†è®¸å¤šæ–°é¢–æœ‰è¶£çš„ä¸œè¥¿ï¼Œä½†åŸºæœ¬åŸç†ä»ç„¶ä¿æŒä¸å˜ã€‚ </blockquote> ç±»å¸¸é‡æ± çš„å¤§å°ä¹Ÿå—65_535ä¸ªå…ƒç´ çš„æ•°é‡é™åˆ¶ã€‚ æ­£ç¡®å½¢æˆçš„ç±»çš„å¸¸é‡æ± æ°¸è¿œä¸ä¼šä¸ºç©ºã€‚ è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæ­¤ç±»çš„åç§°ã€‚ <br><br> ä¾‹å¦‚ï¼Œç”±javacä»OpenJDK 14-ea + 29ç¼–è¯‘çš„ç©ºæšä¸¾ç±»çš„å¸¸é‡æ± ä¸­æ²¡æœ‰è°ƒè¯•ä¿¡æ¯ï¼ŒåŒ…å«29æ¬¡å‡ºç°ã€‚ <br><br> å› æ­¤ï¼Œä¸€ä¸ªæšä¸¾ä¸­65_534ä¸ªå…ƒç´ çš„æ•°é‡ä¹Ÿæ— æ³•è¾¾åˆ°ã€‚ åœ¨æœ€ä½³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡æœ›65_505æˆ–æ¥è¿‘è¿™ä¸ªæ•°å­—ã€‚ <br><br> è¿™ä¸ªå†—é•¿çš„ä»‹ç»ä¸­çš„æœ€åä¸€ä¸ªå’Œå¼¦æ˜¯ï¼š <br><br> åªèƒ½åœ¨é™æ€åˆå§‹åŒ–å—ä¸­å°†è¯¥å€¼<code>&lt;clinit&gt;</code>åˆ°<code>static final</code>å­—æ®µï¼Œè¯¥å—åœ¨ç±»æ–‡ä»¶çº§åˆ«ç”±ç§°ä¸º<code>&lt;clinit&gt;</code>çš„æ–¹æ³•è¡¨ç¤ºã€‚ ä»»ä½•æ–¹æ³•çš„å­—èŠ‚ç ä¸èƒ½è¶…è¿‡65_535ä¸ªå­—èŠ‚ã€‚ ä¸€ä¸ªç†Ÿæ‚‰çš„æ•°å­—ï¼Œä¸æ˜¯å—ï¼Ÿ <br><br> ä¸€æ¡é™æ€é™æ€å†™å…¥æŒ‡ä»¤å ç”¨3ä¸ªå­—èŠ‚ï¼Œè¿™ç»™äº†æˆ‘ä»¬å¤§çº¦<code>65_535 / 3 = 21_845</code>ä¼°è®¡å€¼ã€‚ å®é™…ä¸Šï¼Œè¿™ä¸ªä¼°è®¡æ•°è¢«å¤¸å¤§äº†ã€‚ è¯¥æŒ‡ä»¤é‡‡ç”¨è¯¥å€¼ä»å †æ ˆçš„é¡¶éƒ¨å†™å…¥è¯¥å­—æ®µï¼Œå‰é¢çš„æŒ‡ä»¤ä¹‹ä¸€æ”¾åœ¨è¯¥å †æ ˆçš„é¡¶éƒ¨ã€‚ å¹¶ä¸”è¯¥æŒ‡ä»¤è¿˜å ç”¨äº†å®è´µçš„å­—èŠ‚ã€‚ ä½†æ˜¯ï¼Œå³ä½¿æ‚¨ä¸è€ƒè™‘è¿™ä¸€ç‚¹ï¼Œæ‰€å¾—åˆ°çš„æ•°å­—ä»ç„¶æ˜æ˜¾å°äº65_505ã€‚ <br><br> æ€»ç»“ï¼š <br><br><ul><li> ç±»æ–‡ä»¶æ ¼å¼å°†æšä¸¾å…ƒç´ çš„æœ€å¤§æ•°é‡é™åˆ¶ä¸ºå¤§çº¦65_505 </li><li> é™æ€æœ€ç»ˆå­—æ®µåˆå§‹åŒ–æœºåˆ¶å¯¹æˆ‘ä»¬çš„é™åˆ¶æ›´å¤§ã€‚ ç†è®ºä¸Š-æœ€å¤š21_845ä¸ªå…ƒç´ ï¼Œå®é™…ä¸Šè¿™ä¸ªæ•°å­—ç”šè‡³æ›´å°‘ </li></ul><br> åœ¨æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºä¸å¥åº·çš„ä¼˜åŒ–å’Œç±»æ–‡ä»¶çš„ç”Ÿæˆã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN483392/">https://habr.com/ru/post/zh-CN483392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN483380/index.html">å¾®æœåŠ¡ï¼šå¦‚ä½•éµå®ˆåˆåŒ</a></li>
<li><a href="../zh-CN483382/index.html">å¡åˆ©Linux 2020.1</a></li>
<li><a href="../zh-CN483384/index.html">æˆ‘ä»¬æœ€ç»å¸¸è¯¯ä»¥ä¸ºæ˜¯ITè¯å…¸çš„å“ªäº›è‹±è¯­å•è¯</a></li>
<li><a href="../zh-CN483386/index.html">é“¶æ²³ç³»å³å°†æ¥ä¸´çš„é“¶æ²³ç¢°æ’å·²ç»å­•è‚²äº†æ–°æ˜Ÿ</a></li>
<li><a href="../zh-CN483388/index.html">æˆ‘çš„å¥³æœ‹å‹å’Œç¬¬ä¸€ä¸ªç”µå­æ¸¸æˆã€‚ ç»Ÿä¸€å¼€å‘ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN483394/index.html">InvoltaåŠå…¬å®¤ï¼šæˆ‘ä»¬å¦‚ä½•åœ¨ä¸ç¦»å¼€è¯¥åœ°åŒºçš„æƒ…å†µä¸‹å·¥ä½œå’Œèµšé’±</a></li>
<li><a href="../zh-CN483396/index.html">æˆ‘ä»¬å¦‚ä½•ä»å¤´å¼€å§‹å‘å±•ç³»ç»Ÿåˆ†æå¸ˆ</a></li>
<li><a href="../zh-CN483400/index.html">è¿½è¸ªPythonè¿›åº¦</a></li>
<li><a href="../zh-CN483402/index.html">AMDåœ¨CES 2020ä¸Šæ¨å‡ºäº†64æ ¸å°å¼æœºRyzen Threadripper 3990Xï¼ŒRadeon RX 5600å›¾å½¢å¡å’Œç§»åŠ¨CPU</a></li>
<li><a href="../zh-CN483404/index.html">äººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ”¯æŸ±å¦‚ä½•æ¨åŠ¨ç”µå­å•†åŠ¡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>