<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐🏽 🔍 🥩 Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 4: API Asli 🎽 😲 👸🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebelumnya, saya telah memperkenalkan Kontrak Cerdas Ontology di 
 Bagian 1: Blockchain & Block API dan 
 Bagian 2: API Penyimpanan 
 Bagian 3: Runtim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 4: API Asli</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471358/"><img src="https://habrastorage.org/getpro/habr/post_images/a4a/df3/d06/a4adf3d06081f8a1b01c79140d5474f9.png" alt="gambar"><br><br>  Sebelumnya, saya telah memperkenalkan Kontrak Cerdas Ontology di <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1: Blockchain &amp; Block API</a> dan <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2: API Penyimpanan</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3: Runtime API</a> <br>  Hari ini, mari kita bicara tentang bagaimana menjalankan kontrak pintar asli Ontology melalui <b>API Asli</b> .  Salah satu fungsi paling umum dari memohon kontrak asli adalah transfer aset. <br><a name="habracut"></a><br><h2>  Pendahuluan </h2><br>  API Asli hanya memiliki satu API.  Saat Anda menggunakan fungsi Invoke, Anda perlu menggunakan fungsi status bawaan untuk membantu Anda merangkum parameter.  Lihat di bawah untuk mempelajari cara menggunakan fungsi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a86/1f4/e92/a861f4e929cd17a24e51eef11bd91ff8.png" alt="gambar"><br><br>  Sekarang mari kita masuk ke detail lebih lanjut tentang cara menggunakan 2 API ini.  Sebelum itu, Anda dapat membuat kontrak baru di alat pengembangan kontrak pintar Ontology, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SmartX,</a> dan ikuti petunjuk di bawah ini.  Seperti biasa, di akhir artikel, saya akan memberikan tautan ke kode sumber. <br><br><h3>  Cara Menggunakan API Asli </h3><br>  Seperti biasa, Anda perlu mengimpor 2 fungsi sebagai berikut sebelum menggunakannya. <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.Ontology.Native <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Invoke <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.builtins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> state</code> </pre> <br><h3>  Daftar Kontrak Asli Ontologi </h3><br>  Saat ini ada 6 kontrak asli Ontology yang tersedia untuk pengembang.  Di bawah ini adalah daftar 6 kontrak asli yang dapat diminta oleh API Asli. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/912/e50/28a/912e5028aa011e958a8d8ba8ab97501d.png" alt="gambar"><br><br>  Dalam kontrak, Anda hanya perlu mengubah alamat kontrak menjadi format bytearray dan memintanya. <br><br>  <b>Misalnya</b> , ketika Anda perlu memanggil kontrak ONT Token, Anda dapat terlebih dahulu mengonversi alamat kontrak ONT Token ke dalam format bytearray, dan kemudian memanggil fungsi Invoke.  Saat memanggil fungsi Invoke, parameter yang diimpor adalah nomor versi, alamat kontrak, metode kontrak yang digunakan, dan parameter terkait transfer yang dienkapsulasi oleh fungsi state. <br><br>  Satu hal khusus yang perlu diperhatikan di sini adalah bahwa ketika melakukan transfer kontrak untuk ONG, jumlah yang terisi adalah 10⁹ kali jumlah aktual.  Artinya, jika Anda perlu mentransfer 10 ONG, jumlah yang harus diisi adalah 10¹⁰.  Saat menggunakan dompet, seperti ONTO atau Cyano untuk mentransfer, jumlah yang Anda masukkan adalah jumlah transfer. <br><br><pre> <code class="python hljs">contract_address_ONT = bytearray(<span class="hljs-string"><span class="hljs-string">b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01'</span></span>) param = state(from_acct, to_acct, ont_amount) res = Invoke(<span class="hljs-number"><span class="hljs-number">1</span></span>, contract_address_ONT, <span class="hljs-string"><span class="hljs-string">'transfer'</span></span>, [param])</code> </pre> <br><h3>  Mentransfer kode kontrak </h3><br>  Di bawah ini kami memberikan contoh terperinci tentang cara menggunakan Python untuk <b>mentransfer ONT dan ONG</b> .  Dalam kode di bawah ini, tipe parameter dari akun pengirim dan alamat penerima yang diimpor adalah string.  Selain itu, dapat juga dikirimkan dengan jenis alamat parameter akun, sehingga menghemat biaya Gas untuk menjalankan kontrak.  Prosesnya adalah sebagai berikut: <br><br><ol><li>  Tentukan variabel alamat kontrak contract_address_ONT dan contract_address_ONG; </li><li>  Ubah alamat pengiriman dan penerimaan dari format base58 ke format bytearray; </li><li>  Verifikasi tanda tangan dan konfirmasikan bahwa alamat pengiriman sama dengan alamat pemanggilan kontrak; </li><li>  Fungsi status merangkum parameter terkait transfer; </li><li>  Fungsi Invoke memanggil kontrak asli ONT Token dan ONG Token untuk ditransfer; </li><li>  Tentukan apakah transfer berhasil dengan mengembalikan res.  Jika nilai kembali adalah b '\ x01', maka transfer berhasil dan acara "transfer berhasil" akan didorong keluar. </li></ol><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.System.Runtime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Notify, CheckWitness <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.Ontology.Runtime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Base58ToAddress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.interop.Ontology.Native <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Invoke <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ontology.builtins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> state <span class="hljs-comment"><span class="hljs-comment"># contract address contract_address_ONT = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01') contract_address_ONG = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02') def Main(operation, args): if operation == 'transfer': from_acct = args[0] to_acct = args[1] ont_amount = args[2] ong_amount = args[3] return transfer(from_acct,to_acct,ont_amount,ong_amount) return False def transfer(from_acct, to_acct, ont_amount, ong_amount): # convert base58 address to address in the form of byte array from_acct=Base58ToAddress(from_acct) to_acct=Base58ToAddress(to_acct) # check whether the sender is the payer if CheckWitness(from_acct): # transfer ONT if ont_amount &gt; 0: param = state(from_acct, to_acct, ont_amount) res = Invoke(1, contract_address_ONT, 'transfer', [param]) if res and res == b'\x01': Notify('transfer succeeded') else: Notify('transfer failed') # transfer ONG if ong_amount &gt; 0: param = state(from_acct, to_acct, ong_amount) res = Invoke(1, contract_address_ONG, 'transfer', [param]) if res and res == b'\x01': Notify('transfer succeeded') else: Notify('transfer failed') else: Notify('CheckWitness failed')</span></span></code> </pre> <br><h3>  Berlatih di SmartX </h3><br>  Anda juga dapat mengkompilasi dan menjalankan contoh kode di atas di <b>SmarX dengan</b> mengikuti langkah-langkah di bawah ini: <br><br><ul><li>  <b>Kompilasi kontrak.</b>  Pertama, buat proyek di SmartX dan kompilasi kode dalam proyek ini. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/65b/854/62c/65b85462c94b84ed8cc386030dd6879d.png" alt="gambar"><br><ul><li>  <b>Menyebarkan kontrak.</b>  Jika Anda memerlukan token uji untuk menggunakan kontrak, ajukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Hasil penyebaran adalah sebagai berikut: </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/93a/2df/922/93a2df9224c809fa603ef981394d518b.png" alt="gambar"><br><br><ul><li>  <b>Jalankan fungsi transfer.</b>  Sebelum menjalankan fungsi transfer, Anda perlu mengonfigurasi parameter seperti yang diperlukan.  Dalam contoh di bawah ini, Anda perlu memasukkan alamat pengiriman, alamat penerima, dan jumlah ONT dan ONG yang ditransfer: </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/be6/a4f/3b6/be6a4f3b6ad6460ceabf1d4fba51378b.png" alt="gambar"><br><br><ul><li>  <b>Transfer berhasil.</b>  Setelah Anda mengkonfigurasi parameter dengan benar, transfer akan berhasil ketika menjalankan fungsi transfer.  Token yang ditransfer akan ditampilkan di alamat penerima di atas: </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/6fb/9b9/0e4/6fb9b90e4ae451cf540e3294312f498b.png" alt="gambar"><br><br><h2>  Ringkasan </h2><br>  Pada artikel ini, kami memperkenalkan <b>Native API</b> dari blockchain Ontology.  Pengembang dapat menggunakan API ini untuk menjalankan kontrak asli Ontology.  Pada artikel berikutnya, kami akan memperkenalkan <b>API Peningkatan</b> untuk mengeksplorasi cara meningkatkan kontrak dalam kontrak pintar Ontology. <br><br>  Temukan tutorial tentang GitHub di <a href="">sini</a> . <br><br><hr><br><blockquote>  Ini adalah tutorial resmi yang diterbitkan sebelumnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">blog</a> Ontology <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Medium</a> </blockquote>  Apakah Anda seorang pengembang?  Pastikan Anda telah bergabung dengan komunitas teknologi kami di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Discord</a> .  Juga, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pusat Pengembang</a> di situs web kami, di sana Anda dapat menemukan alat pengembang, dokumentasi, dan banyak lagi. <br><br><h4>  Temukan ontologi di tempat lain </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Situs web ontologi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perselisihan</a> <br>  Telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bahasa Inggris</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rusia</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Twitter</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Reddit</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471358/">https://habr.com/ru/post/id471358/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471344/index.html">Sekali lagi Tentang ImmutableList di Jawa</a></li>
<li><a href="../id471346/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 384 (7 - 13 Oktober 2019)</a></li>
<li><a href="../id471348/index.html">Aplikasi TypeScript dengan tumpukan penuh</a></li>
<li><a href="../id471350/index.html">Membalikkan rekayasa amplifier operasional dengan noise rendah dari komputer analog pada tahun 1969</a></li>
<li><a href="../id471352/index.html">Menulis presentasi di LaTeX</a></li>
<li><a href="../id471360/index.html">Metode duplikasi. 11 contoh dari desain ICE</a></li>
<li><a href="../id471364/index.html">Manajemen tes otomatis dengan Telegram</a></li>
<li><a href="../id471366/index.html">Pengadilan UE menentang cookie secara default - seharusnya tidak ada kotak centang yang sudah diperiksa sebelumnya</a></li>
<li><a href="../id471372/index.html">Mengapa perusahaan harus mengelola ponsel cerdas karyawan?</a></li>
<li><a href="../id471374/index.html">Kami mengundang Anda ke NIXMultiConf # 3 di Kharkov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>