<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë®üèΩ üåô üêë ruleeguard: pemeriksaan dinamis untuk Go üíé ‚õÖÔ∏è ü¶é</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel ini, saya akan berbicara tentang perpustakaan analisis statis go-ruleguard (dan utilitas) yang mengadaptasi gogrep untuk digunakan di da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ruleeguard: pemeriksaan dinamis untuk Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481696/"><p><img src="https://habrastorage.org/webt/b5/p-/sq/b5p-sqgr-9b1e5mimtxaftmryau.png"></p><br><p> Dalam artikel ini, saya akan berbicara tentang perpustakaan analisis statis <a href="https://github.com/quasilyte/go-ruleguard"><code>go-ruleguard</code></a> (dan utilitas) yang mengadaptasi <a href="https://github.com/mvdan/gogrep"><code>gogrep</code></a> untuk digunakan di dalam linter. </p><br><p>  Fitur khas: Anda menguraikan aturan analisis statis pada DSL khusus Go-like, yang pada awal <code>ruleguard</code> berubah menjadi seperangkat diagnostik.  Mungkin ini adalah salah satu alat yang paling mudah dikonfigurasi untuk menerapkan inspeksi khusus untuk Go. </p><br><p>  Sebagai bonus, kita akan membicarakan <a href="https://godoc.org/golang.org/x/tools/go/analysis"><code>go/analysis</code></a> dan <a href="https://github.com/go-lintpack/lintpack">pendahulunya</a> . </p><a name="habracut"></a><br><h1 id="rasshiryaemost-staticheskogo-analiza">  Extensibility Analisis Statis </h1><br><p>  Ada <a href="https://github.com/golangci/awesome-go-linters">banyak</a> linter untuk Go, beberapa di antaranya dapat diperluas.  Biasanya, untuk memperpanjang linter, Anda perlu menulis kode Go menggunakan API linter khusus. </p><br><p>  Ada dua cara utama: <a href="https://golang.org/pkg/plugin/">Go plugins</a> and monolith.  Monolith menyiratkan bahwa semua cek (termasuk yang pribadi Anda) tersedia pada tahap kompilasi. </p><br><p>  <a href="https://github.com/mgechev/revive"><code>revive</code></a> membutuhkan pemeriksaan baru untuk dimasukkan ke dalam kernel untuk ekspansi.  <a href="https://github.com/go-critic/go-critic"><code>go-critic</code></a> selain plug-in ini, yang memungkinkan Anda untuk mengumpulkan ekstensi terlepas dari kode utama.  Kedua pendekatan ini menyiratkan bahwa Anda menerapkan manipulasi <a href="https://golang.org/pkg/go/ast/"><code>go/ast</code></a> dan <a href="https://golang.org/pkg/go/types/"><code>go/types</code></a> on Go menggunakan linter API.  Bahkan cek sederhana membutuhkan <a href="">banyak kode</a> . </p><br><p>  <a href="https://godoc.org/golang.org/x/tools/go/analysis"><code>go/analysis</code></a> bertujuan untuk menyederhanakan gambar dengan fakta bahwa "kerangka kerja" linter menjadi hampir identik, tetapi itu tidak menyelesaikan masalah kompleksitas implementasi teknis dari diagnostik itu sendiri. </p><br><div class="spoiler">  <b class="spoiler_title">Digresi pada `loader` dan` go / packages`</b> <div class="spoiler_text"><hr><br><p>  Saat Anda menulis penganalisis untuk Go, tujuan akhir Anda adalah untuk berinteraksi dengan AST dan tipe, tetapi sebelum Anda dapat melakukan ini, kode sumber perlu "dimuat" dengan cara yang benar.  Untuk menyederhanakan, konsep memuat termasuk <a href="https://golang.org/pkg/go/parser/">penguraian</a> , pemeriksaan jenis, dan <a href="https://golang.org/pkg/go/importer/">impor dependensi</a> . </p><br><p>  Langkah pertama dalam menyederhanakan pipa ini adalah paket <a href="https://godoc.org/golang.org/x/tools/go/loader"><code>go/loader</code></a> , yang memungkinkan Anda untuk "mengunduh" semua yang Anda butuhkan melalui beberapa panggilan.  Semuanya hampir baik-baik saja, dan kemudian ia menjadi usang demi <a href="https://godoc.org/golang.org/x/tools/go/packages"><code>go/packages</code></a> .  <code>go/packages</code> memiliki API yang sedikit ditingkatkan dan, secara teori, bekerja dengan baik dengan modul. </p><br><p>  Sekarang, yang terbaik adalah tidak menggunakan salah satu di atas secara langsung untuk menulis analisis, karena <a href="https://godoc.org/golang.org/x/tools/go/analysis"><code>go/analysis</code></a> memberikan <code>go/packages</code> sesuatu yang tidak dimiliki oleh solusi sebelumnya - sebuah struktur untuk program Anda.  Sekarang kita dapat menggunakan paradigma <code>go/analysis</code> didiktekan dan menggunakan kembali analisis secara lebih efisien.  Paradigma ini memiliki poin kontroversial, misalnya, <code>go/analysis</code> cocok untuk analisis pada tingkat satu paket dan dependensinya, tetapi untuk membuat analisis global pada itu tanpa trik teknik licik tidak akan mudah. </p><br><p>  <code>go/analysis</code> juga menyederhanakan <a href="https://godoc.org/golang.org/x/tools/go/analysis/analysistest">pengujian analyzer</a> . </p><br><hr></div></div><br><h1 id="chto-zhe-takoe-ruleguard">  Apa itu peraturan? </h1><br><p><img src="https://habrastorage.org/webt/zp/ym/rj/zpymrjjb8zkqa_c069ccd-yf3xg.png"></p><br><p>  <a href="https://github.com/quasilyte/go-ruleguard"><code>go-ruleguard</code></a> adalah utilitas analisis statis yang secara default tidak menyertakan pemeriksaan tunggal. </p><br><p>  <code>ruleguard</code> aturan dimuat pada awalnya, dari file <code>gorules</code> khusus yang secara <code>gorules</code> menggambarkan pola kode yang harus dikeluarkan peringatan.  File ini dapat diedit secara bebas oleh pengguna <code>ruleguard</code> . </p><br><p>  Tidak perlu <code>gorules</code> program kontrol untuk menghubungkan pemeriksaan baru, sehingga aturan dari <code>gorules</code> dapat disebut <a href="https://habr.com/ru/company/vk/blog/473718/">dinamis</a> . </p><br><p>  Program kontrol pengawas terlihat seperti ini: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"github.com/quasilyte/go-ruleguard/analyzer"</span></span> <span class="hljs-string"><span class="hljs-string">"golang.org/x/tools/go/analysis/singlechecker"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { singlechecker.Main(analyzer.Analyzer) }</code> </pre> <br><p>  Pada saat yang sama, <code>analyzer</code> diimplementasikan melalui paket <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/ruleguard"><code>ruleguard</code></a> , yang harus Anda gunakan jika Anda ingin menggunakannya sebagai perpustakaan. </p><br><h1 id="ruleguard-vs-revive">  memerintah kembali VS menghidupkan kembali </h1><br><p>  Ambil contoh sederhana namun nyata: misalkan kita ingin menghindari panggilan <a href="https://golang.org/pkg/runtime/"><code>runtime.GC()</code></a> di program kami.  Dalam menghidupkan kembali sudah ada diagnostik terpisah untuk ini, itu disebut <code>"call-to-gc"</code> . </p><br><div class="spoiler">  <b class="spoiler_title">Implementasi panggilan-ke-gc (70 jalur di Elven)</b> <div class="spoiler_text"><hr><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> rule <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"go/ast"</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/mgechev/revive/lint"</span></span> ) <span class="hljs-comment"><span class="hljs-comment">// CallToGCRule lints calls to the garbage collector. type CallToGCRule struct{} // Apply applies the rule to given file. func (r *CallToGCRule) Apply(file *lint.File, _ lint.Arguments) []lint.Failure { var failures []lint.Failure onFailure := func(failure lint.Failure) { failures = append(failures, failure) } var gcTriggeringFunctions = map[string]map[string]bool{ "runtime": map[string]bool{"GC": true}, } w := lintCallToGC{onFailure, gcTriggeringFunctions} ast.Walk(w, file.AST) return failures } // Name returns the rule name. func (r *CallToGCRule) Name() string { return "call-to-gc" } type lintCallToGC struct { onFailure func(lint.Failure) gcTriggeringFunctions map[string]map[string]bool } func (w lintCallToGC) Visit(node ast.Node) ast.Visitor { ce, ok := node.(*ast.CallExpr) if !ok { return w // nothing to do, the node is not a call } fc, ok := ce.Fun.(*ast.SelectorExpr) if !ok { return nil // nothing to do, the call is not of the form pkg.func(...) } id, ok := fc.X.(*ast.Ident) if !ok { return nil // in case X is not an id (it should be!) } fn := fc.Sel.Name pkg := id.Name if !w.gcTriggeringFunctions[pkg][fn] { return nil // it isn't a call to a GC triggering function } w.onFailure(lint.Failure{ Confidence: 1, Node: node, Category: "bad practice", Failure: "explicit call to the garbage collector", }) return w }</span></span></code> </pre> <br><hr></div></div><br><p>  Sekarang bandingkan dengan bagaimana hal ini dilakukan di <a href="https://github.com/quasilyte/go-ruleguard"><code>go-ruleguard</code></a> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> gorules <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/quasilyte/go-ruleguard/dsl/fluent"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callToGC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(m fluent.Matcher)</span></span></span></span> { m.Match(<span class="hljs-string"><span class="hljs-string">`runtime.GC()`</span></span>).Report(<span class="hljs-string"><span class="hljs-string">`explicit call to the garbage collector`</span></span>) }</code> </pre> <br><p>  Tidak lebih, hanya yang benar-benar penting - <code>runtime.GC</code> dan pesan yang perlu dikeluarkan jika aturan dipicu. </p><br><p>  Anda mungkin bertanya: apakah hanya itu?  Saya secara khusus mulai dengan contoh sederhana untuk menunjukkan berapa banyak kode yang mungkin diperlukan untuk diagnosis yang sangat sepele dalam kasus pendekatan tradisional.  Saya berjanji akan ada contoh yang lebih menarik. </p><br><h1 id="quick-start">  Mulai cepat </h1><br><p>  <code>go-critic</code> memiliki diagnostik <a href="https://go-critic.github.io/overview"><code>rangeExprCopy</code></a> yang menemukan salinan array berpotensi tak terduga dalam kode. </p><br><p>  Kode ini diulang pada <strong>salinan</strong> array: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xs [<span class="hljs-number"><span class="hljs-number">2048</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, x := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> xs { <span class="hljs-comment"><span class="hljs-comment">// Copies 2048 bytes // Loop body. }</span></span></code> </pre> <br><p>  Perbaikan untuk masalah ini adalah menambahkan satu karakter: </p><br><pre> <code class="diff hljs"> var xs [2048]byte - for _, x := range xs { // Copies 2048 bytes + for _, x := range &amp;xs { // No copy // Loop body. }</code> </pre> <br><p>  Kemungkinan besar, Anda tidak perlu menyalin ini, dan kinerja versi yang diperbaiki selalu lebih baik.  Anda dapat menunggu hingga kompiler Go menjadi lebih baik, atau Anda dapat mendeteksi tempat-tempat tersebut dalam kode dan memperbaikinya hari ini menggunakan <code>go-critic</code> . </p><br><p>  Diagnosis ini dapat diimplementasikan dalam bahasa <code>rules.go</code> (file <code>rules.go</code> ): </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> gorules <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/quasilyte/go-ruleguard/dsl/fluent"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> _</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(m fluent.Matcher)</span></span></span></span> { m.Match(<span class="hljs-string"><span class="hljs-string">`for $_, $_ := range $x { $*_ }`</span></span>, <span class="hljs-string"><span class="hljs-string">`for $_, $_ = range $x { $*_ }`</span></span>). Where(m[<span class="hljs-string"><span class="hljs-string">"x"</span></span>].Addressable &amp;&amp; m[<span class="hljs-string"><span class="hljs-string">"x"</span></span>].Type.Size &gt;= <span class="hljs-number"><span class="hljs-number">128</span></span>). Report(<span class="hljs-string"><span class="hljs-string">`$x copy can be avoided with &amp;$x`</span></span>). At(m[<span class="hljs-string"><span class="hljs-string">"x"</span></span>]). Suggest(<span class="hljs-string"><span class="hljs-string">`&amp;$x`</span></span>) }</code> </pre> <br><p>  Aturan menemukan semua loop <code>for-range</code> mana kedua variabel iterable digunakan (ini adalah kasus yang mengarah ke menyalin).  Ekspresi iterable <code>$x</code> harus <a href="https://golang.org/ref/spec"><code>addressable</code></a> dan harus lebih besar dari ambang yang dipilih dalam byte. </p><br><p>  <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Report()</code></a> mendefinisikan pesan yang akan dikeluarkan untuk pengguna, dan <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Suggest()</code></a> menguraikan templat <code>quickfix</code> yang dapat digunakan dalam editor Anda melalui <a href="https://github.com/golang/tools/tree/master/gopls">gopls</a> (LSP), serta secara interaktif jika <code>ruleguard</code> dipanggil dengan argumen- <code>-fix</code> (kami akan kembali ke ini).  <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>At()</code></a> melampirkan peringatan <strong>dan</strong> <code>quickfix</code> ke bagian tertentu dari templat.  Kita membutuhkan ini untuk mengganti <code>$x</code> dengan <code>&amp;$x</code> , daripada menulis ulang seluruh loop. </p><br><p>  Baik <code>Report()</code> dan <code>Suggest()</code> menerima string ke mana ekspresi yang diambil oleh templat dari <code>Match()</code> dapat diinterpolasi.  Variabel predefined <code>$$</code> berarti "semua fragmen yang ditangkap" (sebagai <code>$0</code> dalam ekspresi reguler). </p><br><p>  Buat file <code>rangecopy.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> example <span class="hljs-comment"><span class="hljs-comment">// sizeof(builtins[...]) = 240 on x86-64 var builtins = [...]string{ "append", "cap", "close", "complex", "copy", "delete", "imag", "len", "make", "new", "panic", "print", "println", "real", "recover", } func builtinID(name string) int { for i, s := range builtins { if s == name { return i } } return -1 }</span></span></code> </pre> <br><p>  Sekarang kita bisa menjalankan <code>ruleguard</code> : </p><br><pre> <code class="bash hljs">$ ruleguard -rules rules.go -fix rangecopy.go rangecopy.go:12:20: builtins copy can be avoided with &amp;builtins</code> </pre> <br><p>  Jika setelah itu kita melihat <code>rangecopy.go</code> , kita akan melihat versi yang tetap, karena <code>ruleguard</code> dipanggil dengan parameter <code>-fix</code> . </p><br><p>  Aturan paling sederhana dapat <code>gorules</code> tanpa membuat file <code>gorules</code> : </p><br><pre> <code class="plaintext hljs">$ ruleguard -c 1 -e 'm.Match(`return -1`)' rangecopy.go rangecopy.go:17:2: return -1 16 } 17 return -1 18 }</code> </pre> <br><p>  Berkat penggunaan <a href="https://godoc.org/golang.org/x/tools/go/analysis/singlechecker"><code>go/analysis/singlechecker</code></a> , kami memiliki opsi <code>-c</code> , yang memungkinkan kami untuk menampilkan garis konteks yang ditentukan bersama dengan peringatan itu sendiri.  Mengontrol parameter ini sedikit berlawanan dengan intuisi: nilai defaultnya adalah <code>-c=-1</code> , yang berarti "tidak ada konteks", dan <code>-c=0</code> akan menampilkan satu baris konteks (yang ditunjukkan oleh diagnostik). </p><br><p>  Berikut adalah beberapa <code>gorules</code> lebih menarik: </p><br><ul><li>  <a href="">Ketik templat</a> yang memungkinkan Anda menentukan jenis yang diharapkan.  Misalnya, <code>map[$t]$t</code> ekspresi <code>map[$t]$t</code> menjelaskan semua peta dengan tipe nilai yang cocok dengan jenis kunci, dan <code>*[$len]$elem</code> menangkap semua pointer ke array. </li><li>  Dalam satu fungsi, mungkin ada beberapa aturan, <br>  dan fungsi itu sendiri harus disebut <a href="">kelompok aturan</a> . </li><li>  Aturan dalam grup diterapkan satu demi satu, sesuai dengan urutannya.  Aturan pertama yang dipicu membatalkan perbandingan dengan aturan lainnya.  Ini penting bukan untuk optimasi tetapi untuk aturan khusus untuk kasus-kasus tertentu.  Contoh di mana ini berguna adalah aturan penulisan ulang <code>$x=$x+$y</code> hingga <code>$x+=$y</code> , untuk kasus dengan <code>$y=1</code> Anda ingin menawarkan <code>$x++</code> , bukan <code>$x+=1</code> . </li></ul><br><p>  Informasi lebih lanjut tentang DSL yang digunakan dapat ditemukan di <a href=""><code>docs/gorules.md</code></a> . </p><br><h1 id="eschyo-bolshe-primerov">  Lebih banyak contoh </h1><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> gorules <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/quasilyte/go-ruleguard/dsl/fluent"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exampleGroup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(m fluent.Matcher)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//     json.Decoder. // . http://golang.org/issue/36225 m.Match(`json.NewDecoder($_).Decode($_)`). Report(`this json.Decoder usage is erroneous`) //   unconvert,    . m.Match(`time.Duration($x) * time.Second`). Where(m["x"].Const). Suggest(`$x * time.Second`) //   fmt.Sprint()    String(), //   $x  . m.Match(`fmt.Sprint($x)`). Where(m["x"].Type.Implements(`fmt.Stringer`)). Suggest(`$x.String()`) //   . m.Match(`!($x != $y)`).Suggest(`$x == $y`) m.Match(`!($x == $y)`).Suggest(`$x != $y`) }</span></span></code> </pre> <br><p>  Jika tidak ada panggilan <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Report()</code></a> untuk aturan, maka output pesan dari <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Suggest()</code></a> akan digunakan.  Dalam beberapa kasus ini memungkinkan untuk menghindari duplikasi. </p><br><p>  Ketik filter dan subekspresi dapat memeriksa berbagai properti.  Misalnya, properti <code>Pure</code> dan <code>Const</code> berguna: </p><br><ul><li>  <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Var.Pure</code></a> berarti bahwa ekspresi tidak memiliki efek samping. </li><li>  <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Var.Const</code></a> berarti bahwa ekspresi dapat digunakan dalam konteks konstan (misalnya, dimensi array). </li></ul><br><p>  Untuk nama yang <code>package-qualified</code> dalam kondisi <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Where()</code></a> , Anda perlu menggunakan metode <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code>Import()</code></a> .  Untuk kenyamanan, semua paket standar diimpor untuk Anda, jadi dalam contoh di atas kami tidak perlu melakukan impor tambahan. </p><br><h1 id="goanalysis-quickfix-actions">  <code>go/analysis</code> tindakan perbaikan cepat </h1><br><p>  Dukungan untuk <code>quickfix</code> oleh <code>go/analysis</code> untuk kami. </p><br><p>  Dalam model <code>go/analysis</code> , alat analisa menghasilkan <a href="https://godoc.org/golang.org/x/tools/go/analysis">diagnostik</a> dan <a href="https://godoc.org/golang.org/x/tools/go/analysis">fakta</a> .  Diagnostik dikirimkan kepada pengguna, dan fakta-fakta dimaksudkan untuk digunakan oleh analis lain. </p><br><p>  Diagnostik dapat memiliki satu set <a href="https://godoc.org/golang.org/x/tools/go/analysis">perbaikan yang disarankan</a> , yang masing-masing menjelaskan cara mengubah kode sumber dalam kisaran yang ditentukan untuk memperbaiki masalah yang ditemukan oleh diagnostik. </p><br><p>  Deskripsi resmi tersedia di <a href=""><code>go/analysis/doc/suggested_fixes.md</code></a> . </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p><img src="https://habrastorage.org/webt/m3/bs/zw/m3bszwzp2nwkxrnxdnenypatyjk.png"></p><br><p>  Coba <code>ruleguard</code> proyek Anda, dan jika Anda menemukan bug atau ingin meminta fitur baru, <a href="https://github.com/quasilyte/go-ruleguard/issues/new">buka masalah</a> . </p><br><p>  Jika Anda masih merasa kesulitan untuk membuat <code>ruleguard</code> , berikut adalah beberapa contoh: </p><br><ul><li>  Terapkan diagnostik Anda sendiri untuk Go. </li><li>  Secara otomatis memutakhirkan atau memperbaiki kode dengan <code>-fix</code> . </li><li>  Koleksi statistik kode dengan <a href=""><code>-json</code></a> pemrosesan hasil <a href=""><code>-json</code></a> . </li></ul><br><p>  Rencana pengembangan untuk <code>ruleguard</code> dalam waktu dekat: </p><br><ul><li>  <code>ruleguard</code> dalam <a href="https://github.com/go-critic/go-critic"><code>go-critic</code></a> sebagai salah satu cara untuk mengembangkannya. </li><li>  Cobalah ide-ide dari <a href="https://github.com/quasilyte/talks/tree/master/2019-7-Oct-moscow">analisis kesamaan kode Applied Go</a> . </li><li>  Tambahkan fitur baru ke DSL.  <a href="https://github.com/quasilyte/go-ruleguard/issues/28">sub-pertandingan</a> bisa menjadi tambahan yang bermanfaat. </li></ul><br><h1 id="poleznye-ssylki-i-resursy">  Tautan dan sumber daya yang bermanfaat </h1><br><ul><li>  Contoh file aturan yang <a href=""><code>rules.go</code></a> : <a href=""><code>rules.go</code></a> </li><li> <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/dsl/fluent"><code> dsl/fluent</code></a> </li> <li> <a href="https://godoc.org/github.com/quasilyte/go-ruleguard/ruleguard"><code> ruleguard</code></a> </li> <li>  <a href="https://github.com/mvdan/gogrep"><code>mvdan/gogrep</code></a> AST Bekas: <a href="https://github.com/mvdan/gogrep"><code>mvdan/gogrep</code></a> </li><li>  <a href="https://habr.com/ru/company/vk/blog/473718/">Pemeriksaan dinamis di NoVerify</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481696/">https://habr.com/ru/post/id481696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481680/index.html">Menulis TodoMVC di dap. Bagian 2</a></li>
<li><a href="../id481684/index.html">Laptop dari Powerbank?</a></li>
<li><a href="../id481688/index.html">Mengapa mempelajari Java dan bagaimana melakukannya dengan efisien. Laporan Yandex</a></li>
<li><a href="../id481692/index.html">Menggunakan Pelacakan Prosesor Intel untuk Melacak Kode Mode Manajemen Sistem</a></li>
<li><a href="../id481694/index.html">Cara saya mempartisi di PostgreSQL</a></li>
<li><a href="../id481698/index.html">Streaming WebRTC di dan sekitar realitas virtual</a></li>
<li><a href="../id481700/index.html">Tentang seorang bibi</a></li>
<li><a href="../id481702/index.html">Dari pemanggang ke drone. Bagaimana Internet bisa terjadi dan mengapa Internet hanya menyala 30 tahun kemudian</a></li>
<li><a href="../id481704/index.html">Ini adalah norma - 2: bagaimana peta normal dipanggang</a></li>
<li><a href="../id481706/index.html">Komputer kuantum yang hilang dalam lomba dan kesalahan fatal mereka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>