<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåä üçº üß• Upgrade von Django von Version 1.9 auf Version 2.0 üçé ü§ï üö¥üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, heute m√∂chte ich Ihnen erkl√§ren, wie Sie ein Projekt von Version 1.9 auf 2.0 aktualisieren k√∂nnen. Was sind die wichtigsten Nuancen, die ber√ºck...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Upgrade von Django von Version 1.9 auf Version 2.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417837/">  Hallo, heute m√∂chte ich Ihnen erkl√§ren, wie Sie ein Projekt von Version 1.9 auf 2.0 aktualisieren k√∂nnen.  Was sind die wichtigsten Nuancen, die ber√ºcksichtigt und neu geschrieben werden m√ºssen, damit das Projekt mit der neuen Version von Django beginnt? <br><br><h3>  Erster Schritt </h3><br>  Dies ist ein Update von Django auf Version 2.0 sowie ein Update aller zugeh√∂rigen Pakete, die im Projekt verwendet werden  Ich verwende die virtuelle Umgebung und die Datei resources.txt. F√ºr mich ist dies eine M√∂glichkeit, f√ºr Sie kann dies anders sein. <br><br>  Nachdem Sie alle Pakete aktualisiert haben, sollten Sie das Projekt nicht starten. Es wird ohnehin nicht gestartet. Beginnen Sie also sofort damit, alle wichtigen Punkte zu korrigieren, damit das Projekt gestartet werden kann. <a name="habracut"></a><br><br><h3>  Zweiter Schritt.  Aktualisieren aller urls.py Ihres Projekts </h3><br>  In Ihrer Haupt-URLs.py, in der Sie URLs aus anderen Anwendungen einf√ºgen, verbinden wir: <br>  aus django.urls importiere re_path, path. <br><br>  Und wir √§ndern die URL in den Pfad und entfernen regul√§re Ausdr√ºcke in diesen Verbindungen. <br><br><pre><code class="python hljs">url(<span class="hljs-string"><span class="hljs-string">r'^ some/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'some.urls'</span></span>)), <span class="hljs-comment"><span class="hljs-comment">#   path('some/', include('some.urls')),</span></span></code> </pre> <br>  Wenn Sie Ansichten direkt aus dieser Anwendung verwenden, f√ºr die Stammkunden erforderlich sind, verwenden wir: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^app/$'</span></span>, App.as_view(), name=<span class="hljs-string"><span class="hljs-string">'app'</span></span>)</code> </pre> <br>  In Plug-In-Anwendungen (z. B. some / urls.py) verwenden wir in der Datei urls.py: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^create/$'</span></span>, Create.as_view(), name=<span class="hljs-string"><span class="hljs-string">'create'</span></span>)</code> </pre> <br>  Wenn Sie w√§hrend der Aufnahme einen Namespace in URLs verwenden, l√∂schen Sie diese von dort und √ºbertragen Sie sie direkt an die verbundene Anwendung.  Wir gehen zu urls.py dieser Anwendung und schreiben es √ºber urlpatterns = [] <br><br><pre> <code class="python hljs">app_name = <span class="hljs-string"><span class="hljs-string">'app-application'</span></span></code> </pre> <br>  Diese Zeile dient als Ersatz f√ºr den Namespace und dient dazu, die Haupt-URLs sauberer und lesbarer zu machen sowie das √Ñndern von Namen an einem Ort zu vereinfachen. <br><br><h3>  Dritter Schritt </h3><br>  Wir verwenden die Suche w√§hrend des gesamten Projekts. Abh√§ngig von Ihrem Code-Editor, den Sie w√§hrend der Entwicklung verwenden, k√∂nnen dies verschiedene Hotkeys sein. Ich glaube, Sie kennen sie, also werde ich hier nicht aufh√∂ren. <br><br>  Wir fahren hinein: <br><br><pre> <code class="python hljs">is_authenticated()</code> </pre> <br>  Und wechseln Sie zu <code>is_authenticated</code> .  Dies ist keine Methode, sondern eine Eigenschaft.  Dieser Fehler l√∂st eine Ausnahme aus. <br><br>  Weiter im Projekt suchen wir: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.urlresolvers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br>  Und wechseln Sie zu: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br><h3>  Vierter Schritt </h3><br>  Jetzt in allen Modellen. Ausl√§ndischer Schl√ºssel muss ein obligatorisches Positionsargument "on_delete" vorhanden sein, zum Beispiel: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">on_delete=models.CASCADE on_delete=models.DO_NOTHING on_delete=models.SET_NULL</span></span></code> </pre> <br>  Als n√§chstes machen wir: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">python manage.py makemigrations python manage.py migrate</span></span></code> </pre> <br><h3>  F√ºnfter Schritt </h3><br>  Wenn Sie versuchen, das Projekt zu starten, sollte es bereits gestartet sein, aber sofort wird eine Fehlermeldung angezeigt, sobald Sie zu 127.0.0.1:8000 wechseln. <br><br>  Der Fehler lautet wie folgt: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">AttributeError at / 'WSGIRequest' object has no attribute 'user'</span></span></code> </pre> <br>  Dies liegt an der Tatsache, dass Sie MIDDLEWARE_CLASSES in MIDDLEWARE umbenennen m√ºssen <br>  Als n√§chstes wird in der Konsole der folgende Fehler angezeigt: <br><br> <code>django.core.exceptions.ImproperlyConfigured: WSGI application 'application' could not be loaded; Error importing module: 'application doesn't look like a module path</code> <br> <br>  Dieser Fehler tritt auf, weil Sie √ºber alte Middleware verf√ºgen und diese aktualisieren m√ºssen auf: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">'django.contrib.sessions.middleware.SessionMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.common.CommonMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.csrf.CsrfViewMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.messages.middleware.MessageMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.security.SecurityMiddleware'</span></span></code> </pre> <br><h3>  Sechster Schritt </h3><br>  Wenn Sie im Projekt Ihre eigene Middleware verwenden, sollten diese von MiddlewareMixin und nicht von object geerbt werden (Sie k√∂nnen auch object verwenden, m√ºssen dann jedoch zus√§tzliche erforderliche Methoden registrieren). <br><br>  Import: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.utils.deprecation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MiddlewareMixin</code> </pre> <br>  Das ist alles!  :) :) <br><br>  Wenn Sie ein sehr gro√ües Projekt haben und eine gro√üe Anzahl von Paketen verwenden, werden Sie nat√ºrlich mehr Probleme haben, aber bereits eine Kette von Fehlern in der Konsole hilft Ihnen, diese zu l√∂sen und das Projekt im richtigen Modus zu starten.  In diesem Handbuch werden die wichtigsten Fehler und L√∂sungsm√∂glichkeiten beschrieben, die f√ºr alle Projekte mit Django 1.9 relevant sind (einige Punkte sind f√ºr Django Version 1.11 nicht relevant). Sie helfen dabei, das Projekt schnell auf Django 2.0 zu √ºbertragen und unn√∂tigen Zeitverlust beim Parsen und Suchen zu vermeiden L√∂sungen f√ºr h√§ufige Fehler. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417837/">https://habr.com/ru/post/de417837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417825/index.html">"Grenzen erweitern": Der 6-GHz-Bereich wird den Anforderungen von Wi-Fi angepasst</a></li>
<li><a href="../de417827/index.html">Kostenloses WLAN: Das deutsche Gericht hebt die Strafen f√ºr Kaffeeh√§user f√ºr Urheberrechtsverletzungen von Kunden auf</a></li>
<li><a href="../de417829/index.html">Reduzieren Sie die Anzahl der Architekturebenen von 5 auf 2</a></li>
<li><a href="../de417831/index.html">Das Leben mit Java SE 8 und Java SE 11 kostet 25 US-Dollar pro Prozessor und Monat</a></li>
<li><a href="../de417835/index.html">‚ÄûEmpire in Depth‚Äú: Warum gro√üe IT-Unternehmen ihre U-Boot-Kabel verlegen</a></li>
<li><a href="../de417839/index.html">Angreifer verwenden das Spiel "Clash of Clans", um Geld von gestohlenen Kreditkarten zu waschen</a></li>
<li><a href="../de417841/index.html">Wir verbieten Govnokod oder n√ºtzliche Plug-Ins f√ºr ESLint</a></li>
<li><a href="../de417845/index.html">APK-Gr√∂√üe verringern (innerhalb angemessener Grenzen)</a></li>
<li><a href="../de417849/index.html">Bobbiniki: Eine kurze Geschichte von Tonbandger√§ten und ein wachsendes Interesse an dem heutigen Audio-Gadget</a></li>
<li><a href="../de417851/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 262 (16. - 22. Juli)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>