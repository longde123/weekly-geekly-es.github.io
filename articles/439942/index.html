<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèø üë®üèΩ‚Äç‚úàÔ∏è üë®üèª‚Äçüîß Docker: lo que todo desarrollador de .Net necesita saber üë®‚Äç‚öïÔ∏è üö∂üèø üë®üèø‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la era de los DevOps ganadores, los desarrolladores simplemente est√°n obligados a saber acerca de los contenedores Docker, por qu√© son necesarios y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker: lo que todo desarrollador de .Net necesita saber</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/psb/blog/439942/"> En la era de los DevOps ganadores, los desarrolladores simplemente est√°n obligados a saber acerca de los contenedores Docker, por qu√© son necesarios y c√≥mo trabajar con ellos.  Esto facilita enormemente el trabajo.  Adem√°s, incluso aquellos que trabajan con .Net Core en el entorno de desarrollo de Visual Studio 2017 pueden sentir todo el poder de la contenedorizaci√≥n. Pavel Skiba, jefe del departamento de desarrollo de aplicaciones de servidor en la reuni√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Panda-Meetup C # .Net</a> , habl√≥ sobre las herramientas disponibles y la configuraci√≥n de Docker para VS. <br><br><img src="https://habrastorage.org/webt/-u/oc/-i/-uoc-itpzk__qajoj6vuduyvqsc.jpeg"><br><a name="habracut"></a><br>  ¬øQu√© debe poder hacer un desarrollador?  "Programa", respondes y ... Adivina.  Pero si antes la lista de conocimientos necesarios terminaba con esto, ahora en la era de DevOps apenas est√° comenzando.  Cuando escribimos c√≥digo, definitivamente necesitamos conocer la estructura de la red: qu√© interact√∫a con qu√©.  Se requiere soporte para varios lenguajes de programaci√≥n a la vez, y se pueden escribir diferentes piezas de c√≥digo en un proyecto en cualquier cosa. <br><br><img src="https://habrastorage.org/webt/kv/v8/e0/kvv8e0hdfubjxrh-ph7y8bqaxho.jpeg"><br><br>  Necesitamos saber c√≥mo deshacer el software si se detecta un error.  Necesitamos administrar configuraciones para diferentes entornos utilizados en la empresa; estos son al menos varios entornos de desarrollo, entornos de prueba y combate.  Ah, s√≠, a√∫n necesita comprender los scripts en diferentes servidores / sistemas operativos, porque no todo se puede hacer usando c√≥digo, a veces tiene que escribir scripts. <br><br>  Necesitamos conocer los requisitos de seguridad, y se est√°n volviendo m√°s dif√≠ciles y consumen mucho tiempo del desarrollador.  No se olvide del soporte y desarrollo de software relacionado: Git, Jenkins, etc.  Como resultado, el desarrollador puede simplemente no tener suficiente tiempo para un desarrollo puro. <br><br>  Que hacer  Hay una salida, y se encuentra en los contenedores Docker y su sistema de gesti√≥n.  Una vez que implemente todo este complejo coloso, y usted, como en los viejos tiempos, solo volver√° a escribir c√≥digo.  Todo lo dem√°s ser√° controlado por otras personas o por el propio sistema. <br><br><h3>  Entendemos contenedores </h3><br>  ¬øQu√© es un contenedor acoplable?  Esta es una estructura que consta de varias capas.  La capa superior es la capa binaria de su aplicaci√≥n.  La segunda y tercera capas ahora est√°n integradas en .Net Core, el contenedor ya es SDK-shny.  La siguiente capa depende del sistema operativo en el que se implementa el contenedor.  Y la capa inferior es el sistema operativo en s√≠. <br><br><img src="https://habrastorage.org/webt/la/9r/rr/la9rrrk6nijaktzurbzvs6-7vem.jpeg"><br><br>  En el nivel inferior, se implementa Windows Nanoserver.  Este es un apret√≥n mega recortado de Windows Server, que no puede hacer nada m√°s que mantener un programa de utilidad implementado.  Pero su volumen es 12 veces menor. <br><br>  Si comparamos los servidores y contenedores f√≠sicos y virtuales, los beneficios de este √∫ltimo son obvios. <br><br><img src="https://habrastorage.org/webt/rv/jf/bf/rvjfbftq2pa8vxkypp0cufyailq.jpeg"><br><br>  Cuando todo funcionaba en servidores f√≠sicos, nos enfrentamos a un mont√≥n de problemas.  No hubo aislamiento en los c√≥digos de la biblioteca; algunas aplicaciones podr√≠an interferir entre s√≠.  Por ejemplo: una aplicaci√≥n funcion√≥ en .Net 1.1 y otra en .Net 2.0.  Muy a menudo, esto condujo a la tragedia.  Despu√©s de un tiempo, aparecieron los servidores virtuales, se resolvi√≥ el problema del aislamiento, no hab√≠a bibliotecas compartidas.  Es cierto que, al mismo tiempo, se volvi√≥ muy costoso en t√©rminos de recursos y mano de obra: era necesario controlar todo el tiempo cu√°ntas m√°quinas virtuales giran en una m√°quina virtual, en Hyper-V y en una pieza de hierro. <br><br>  Los contenedores fueron dise√±ados para ser una soluci√≥n econ√≥mica y conveniente, m√≠nimamente dependiente del sistema operativo.  Veamos en qu√© se diferencian.  Los servidores virtuales dentro del sistema se encuentran aproximadamente as√≠. <br><br><img src="https://habrastorage.org/webt/7r/tx/hy/7rtxhyzwk89x504k4elpatklrue.jpeg"><br><br>  La capa inferior es el servidor host.  Puede ser f√≠sico o virtual.  La siguiente capa es cualquier sistema operativo con virtualizaci√≥n, arriba hay un hipervisor.  En la parte superior est√°n los servidores virtuales que se pueden dividir en SO y aplicaciones invitados.  Es decir, debajo de cada servidor virtual, se implementa un sistema operativo invitado en la parte superior del sistema operativo, y esto es una p√©rdida adicional de recursos. <br><br>  Veamos c√≥mo se encuentran los contenedores de Linux en el sistema. <br><br><img src="https://habrastorage.org/webt/2i/fh/qm/2ifhqmfohluhldax3v5evaomvvo.jpeg"><br><br>  Como puede ver, los archivos binarios con aplicaciones se ubican inmediatamente sobre el servidor host y el sistema operativo.  No se necesita SO hu√©sped, se liberan recursos, no se necesitan licencias para SO hu√©sped. <br><br>  Los contenedores de Windows son ligeramente diferentes de Linux. <br><br><img src="https://habrastorage.org/webt/br/p3/td/brp3tdb9vl_yau-iwsqj_c5yfmm.jpeg"><br><br>  Las capas b√°sicas son las mismas: infraestructura, sistema operativo host (pero ahora Windows).  Pero los contenedores pueden funcionar directamente con el sistema operativo o implementarse en la parte superior del hipervisor.  En el primer caso, existe un aislamiento de procesos y espacios, pero utilizan el mismo n√∫cleo con otros contenedores, que desde el punto de vista de la seguridad no es hielo.  Si usa contenedores a trav√©s de Hyper-V, todo estar√° aislado. <br><br><h3>  Aprendizaje Docker para VS </h3><br>  Pasemos a Docker en s√≠.  Supongamos que tiene Visual Studio y est√° instalando el cliente Docker para Windows por primera vez.  En este caso, Docker desplegar√° el servidor demonio Docker, la interfaz en reposo para acceder a √©l y el propio cliente: la l√≠nea de comandos de Docker.  Nos permitir√° gestionar todo lo relacionado con los contenedores: red, im√°genes, contenedores, capas. <br><br><img src="https://habrastorage.org/webt/h3/ft/dz/h3ftdzxhy9d-y2cz43xjbllnfiq.jpeg"><br><br>  La diapositiva muestra los comandos m√°s simples: extraiga el contenedor Docker, ejec√∫telo, recopile, confirme y env√≠e de vuelta. <br><br>  Docker est√° muy org√°nicamente emparejado con Visual Studio.  La captura de pantalla muestra un men√∫ de panel de Visual Studio 2017. Docker compose support est√° integrado directamente en Intellisense, Dockerfile es compatible y todos los artefactos funcionan en la l√≠nea de comandos. <br><br><img src="https://habrastorage.org/webt/o6/lo/xq/o6loxq2u8gcuxqmeeqc9rf5d7jw.jpeg"><br><br>  Curiosamente, podemos Docker depurar contenedores directamente en tiempo real.  Y si sus contenedores est√°n conectados entre s√≠, se debatir√°n inmediatamente de una vez y no necesitar√° ejecutar varios entornos. <br><br>  ¬øC√≥mo se ensamblan los contenedores?  El elemento principal aqu√≠ es el dockerfile, que contiene instrucciones para construir la imagen.  Cada dockerfile se crea para cada proyecto.  Indica: de d√≥nde obtenemos la imagen b√°sica, qu√© argumentos pasamos, cu√°l es el nombre del directorio de trabajo con archivos, puertos. <br><br><img src="https://habrastorage.org/webt/cw/y4/s4/cwy4s4ukujlmx_ewfcr9rhq6wk4.jpeg"><br><br>  Este argumento fuente tiene dos par√°metros.  El segundo par√°metro es la ruta a lo largo de la cual se colocar√° el resultado del ensamblaje en el proyecto, el valor se establece de forma predeterminada.  En mi opini√≥n, esta no es una muy buena opci√≥n.  A menudo hay mucha basura en esta carpeta, debe limpiarse peri√≥dicamente, y cuando limpiamos esta carpeta, podemos frotar el ensamblaje.  Por lo tanto, si lo desea, puede cambiarlo, lo establece el par√°metro del sistema Docker_build_source, que tambi√©n se puede modificar. <br><br>  La instrucci√≥n Entrypoint le permite configurar el contenedor como un archivo ejecutable.  Esta l√≠nea es necesaria para .Net Core, de modo que despu√©s de que el contenedor se inicie correctamente, env√≠e un mensaje "Su aplicaci√≥n se est√° ejecutando" a la l√≠nea de comando. <br><br>  Ahora sobre depuraci√≥n de contenedores.  Todo aqu√≠ es como un .Net normal, apenas notar√°s la diferencia.  Muy a menudo, ejecuto .Net Core como autohospedado en dotnet.exe.  Utiliza el depurador CLRDBG, la cach√© de paquetes NuGet y el c√≥digo fuente. <br><br>  ASP.Net 4.5+ est√° alojado por IIS o IIS Express, utiliza Microsoft Visual Studio Debugger y la fuente de la ra√≠z del sitio en IIS. <br><br><img src="https://habrastorage.org/webt/1h/xa/ad/1hxaadi82m4yntfg6nurythtlui.jpeg"><br><br>  Hay dos entornos para la depuraci√≥n: depuraci√≥n y liberaci√≥n.  La etiqueta de imagen de depuraci√≥n est√° marcada como dev y la √∫ltima versi√≥n.  Al depurar, el argumento de origen se establece mejor en obj / Docker / empty, para no confundirse, pero cuando libera obj / Docker / Publish.  Aqu√≠ puede usar los mismos binarios, vistas, la carpeta wwwroot y todas las dependencias que existen. <br><br><h3>  Mastering Docker Compose </h3><br>  Pasemos a la parte divertida: la herramienta de orquestaci√≥n Docker-compose.  Veamos un ejemplo: tiene alg√∫n tipo de servicio comercial que afecta a 5-6 contenedores.  Y necesita arreglar de alguna manera c√≥mo deben ensamblarse, en qu√© orden.  Aqu√≠ es donde Docker-compose es √∫til, lo que proporcionar√° todo el ensamblaje, lanzamiento y escala de contenedores.  Se gestiona de forma sencilla, todo lo recoge un equipo. <br><br><img src="https://habrastorage.org/webt/d4/df/aq/d4dfaqe-8qt-k9wxxfs6y8gigke.jpeg"><br><br>  Docker-compose utiliza archivos YAML que almacenan la configuraci√≥n de c√≥mo se deben ensamblar los contenedores.  Describen qu√© configuraciones debe usar para las im√°genes, ensamblajes, servicios, vol√∫menes, redes y entornos.  La sintaxis es id√©ntica para su publicaci√≥n en cl√∫steres.  Es decir, una vez que escribieron dicho archivo, y si en el futuro ser√° necesario implementar un servicio comercial en un cl√∫ster, no tendr√° que agregar nada m√°s. <br><br>  Considere la estructura de un archivo YAML.  La imagen es una imagen de Docker.  Una imagen es un contenedor sin una capa de aplicaci√≥n; es inmutable. <br><br><img src="https://habrastorage.org/webt/no/y1/s7/noy1s7xjmk8uzkx9qw-7dgtubuc.jpeg"><br><br>  Build indica c√≥mo construir, d√≥nde construir y d√≥nde implementar. <br>  Depends_on - Depende de qu√© servicios depende. <br>  Medio ambiente: aqu√≠ establecemos el medio ambiente. <br>  Puertos: asignaci√≥n de puertos en qu√© puerto estar√° disponible su contenedor. <br><br>  Considera un ejemplo.  Simplemente tenemos una API sin un servicio, esencialmente 3 contenedores: hay SQL.data en Linux, hay una aplicaci√≥n en s√≠ misma, depende de webapi y webapi depende de SQL.data. <br><br><img src="https://habrastorage.org/webt/dl/_b/wz/dl_bwzfrtxf-dpiumh0d6mcmork.jpeg"><br><br>  No importa en qu√© orden se escriben los componentes en el archivo.  Si todo se describe correctamente, Compose generar√° autom√°ticamente esta informaci√≥n en funci√≥n de las dependencias del proyecto.  Este archivo es suficiente para recopilar todos los contenedores a la vez, la salida ser√° una versi√≥n finalizada. <br><br>  Hay una especie de "contenedor contenedor", un contenedor especial docker-compose.ci.build.yml, en el que se ensambla toda la composici√≥n.  Puede ejecutar este contenedor especial desde la l√≠nea de comandos de Visual Studio, y podr√° completar el ensamblaje en un servidor de compilaci√≥n, por ejemplo, en Jenkins. <br><br><img src="https://habrastorage.org/webt/c-/n7/dt/c-n7dtz4rp_xdqlove2dxze5w7y.jpeg"><br><br>  Echa un vistazo dentro del archivo.  El ejemplo contiene el directorio de trabajo y de d√≥nde viene.  Restaura el proyecto desde GIT, publica esta soluci√≥n √©l mismo, configura Release y carga el resultado.  Ese es todo el equipo para construir, nada m√°s necesita ser escrito.  Es suficiente registrarlo una vez, y luego comenzar la publicaci√≥n con un bot√≥n. <br><br>  ¬øA qu√© m√°s vale la pena prestarle atenci√≥n?  Docker-compose para cada entorno recopila im√°genes, para cada configuraci√≥n un archivo separado.  Para cada configuraci√≥n en Visual Studio hay un archivo con la configuraci√≥n que necesita para el entorno. <br><br><img src="https://habrastorage.org/webt/hp/tl/mh/hptlmho5s80wvh-vqgpprnimnau.jpeg"><br><br>  Directamente desde VS, puede comenzar de forma remota a depurar toda la composici√≥n. <br><br><h3>  Orquestadores de racimo </h3><br>  Finalmente, tocamos temas como los orquestadores de cl√∫ster.  No debemos pensar en c√≥mo contin√∫an existiendo los contenedores, qu√© personas o sistemas se gestionan.  Para esto, hay 4 de los sistemas de administraci√≥n de contenedores m√°s populares: Google Kubernetes, Mesos DC / OS, Docker Swarm y Azure Service Fabric.  Le permiten gestionar el agrupamiento y la composici√≥n de los contenedores. <br><br><img src="https://habrastorage.org/webt/5h/xd/lq/5hxdlqbpiyr2e7lytjagsikndec.jpeg"><br><br>  Estos sistemas pueden hacer frente a una enorme capa de microservicios, proporcion√°ndoles todo lo necesario.  El desarrollador solo necesitar√° configurar esta capa una vez. <br><br>  La versi√≥n completa del rendimiento en Panda Meetup est√° disponible a continuaci√≥n. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/GLMFaf39zxM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Para aquellos que quieran profundizar en el tema, les aconsejo que estudien los siguientes materiales: <br><br>  Http://dot.net <br>  Http://docs.docker.com <br>  Http://hub.docker.com/microsoft <br>  Http://docs.microsoft.com <br>  Http://visualstudio.com <br><br>  Y finalmente, un consejo importante de la pr√°ctica: lo m√°s dif√≠cil es recordar d√≥nde est√° lo que hay. <br><br>  La documentaci√≥n cuando trabaje con contenedores acoplables caer√° sobre sus hombros.  Sin documentaci√≥n, olvidar√° en qu√© contenedor est√° conectado qu√© y qu√© funciona.  Cuantos m√°s servicios, mayor es la red total de conexiones. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439942/">https://habr.com/ru/post/439942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439932/index.html">C√≥mo abrimos oficinas de desarrollo</a></li>
<li><a href="../439934/index.html">Procesos de negocio. Extraer un modelo BPMN de un documento. Parte 1</a></li>
<li><a href="../439936/index.html">Tecnolog√≠a 3D para fundici√≥n: c√≥mo crear un molde para una fundici√≥n en una semana</a></li>
<li><a href="../439938/index.html">Qu√© llamar: pol√≠tica de privacidad y pol√≠tica de privacidad</a></li>
<li><a href="../439940/index.html">Teamlead Conf Msk 2019: resultados de la campa√±a de aplicaci√≥n, informes, consideraciones</a></li>
<li><a href="../439944/index.html">SAPUI5 para dummies parte 5: un ejercicio completo paso a paso</a></li>
<li><a href="../439946/index.html">¬øPor qu√© elegimos Electron?</a></li>
<li><a href="../439948/index.html">Intel SVT-AV1: Codificador de c√≥digo abierto AV1 para servicio pesado</a></li>
<li><a href="../439950/index.html">Tercera prueba de Turing: condiciones de participaci√≥n y premios para los ganadores.</a></li>
<li><a href="../439952/index.html">Hosting Node.js https server con SSL actualizado autom√°ticamente en la nube y c√≥mo configuro el ciclo de desarrollo (+ git, reaccionar)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>