<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>葛 猬锔  SQLite y NW.js: instrucciones paso a paso para crear fuertes amistades   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="隆Hola, Habr y sus habitantes! Quer铆a esculpir algo en HTML y JS para que fuera de escritorio y conveniente. 驴Qu茅 se necesita para esto? Derecho Node.j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SQLite y NW.js: instrucciones paso a paso para crear fuertes amistades</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420413/"> 隆Hola, Habr y sus habitantes!  Quer铆a esculpir algo en HTML y JS para que fuera de escritorio y conveniente.  驴Qu茅 se necesita para esto?  Derecho  Node.js y NW.js o Electron.  Al observar los d茅biles intentos de NW vs Electron holivar y leer la documentaci贸n de ambos, se tom贸 la decisi贸n de comenzar a sentir NW.js. <br><br>  Pero aqu铆 hay una emboscada.  La ejecuci贸n de <code>npm i sqlite3</code> instala solo aquellas bibliotecas que se pueden ejecutar cuando se inicia directamente a trav茅s del nodo.  Y si intenta conectar el script en html y ejecutar este html en NW.js, entonces no saldr谩 nada.  Google Associates ofrece solo una receta para incluir sqlite en un proyecto en nw.js, e incluso esa debe sacarse del cach茅.  S铆, y ya est谩 desactualizado.  Por lo tanto, pasamos un par de d铆as estudiando los problemas y buscando una soluci贸n que funcione.  Pido gato. <br><a name="habracut"></a><br>  Entonces  Para empezar, la m谩quina fue construida "a partir de lo que era" e instal贸 Windows 7 x32 con el paquete .NET 4.7.1 (requerido para Visual C ++).  驴Por qu茅 32 bits?  Decid铆 comenzar de a poco.  Aunque, como se vio despu茅s, crear un m贸dulo para x64 no requiere ejecuci贸n en un sistema x64. <br><br>  Luego se instal贸 Node.js versi贸n 10.8.0, aunque 10.9.0 ya hab铆a aparecido al final de los experimentos.  Pero luego decid铆 escuchar a personas con conocimientos: <br><br><img src="https://habrastorage.org/webt/yn/ee/nn/yneennrfp9beyodsjsei8ysk2l4.png"><br><br>  Despu茅s de pensarlo, decid铆 que estaba haciendo lo mismo para LTS, aunque no est谩 del todo claro d贸nde tienen LTS y d贸nde no.  Sugiri贸 que los no LTS son versiones beta, alfa y nocturnas. <br><br>  Aunque, como cualquier abandono, hizo todo a la mitad y cumpli贸 la siguiente recomendaci贸n: <br><br><div class="spoiler">  <b class="spoiler_title">Recomendaci贸n de documentaci贸n para lanzamientos de LTS</b> <div class="spoiler_text">  En Windows, debe reemplazar el archivo <br>  &lt;npm-path&gt; \ node_modules \ node-gyp \ src \ win_delay_load_hook.cc con el que est谩 en <a href="">github.com/nwjs/nw.js/blob/nw18/tools/win_delay_load_hook.cc</a> antes de instalar m贸dulos con node-gyp o npm. <br><br>  Bueno, no encontr茅 este archivo en mi computadora.  Probablemente porque no instal茅 node-gyp. <br></div></div><br>  Lo configuramos para el nodo (es absolutamente necesario hacerlo desde la l铆nea de comandos con derechos de administrador) <br><br> <code>npm i -g nw-gyp</code> <br> <br><div class="spoiler">  <b class="spoiler_title">De hecho, el reemplazo de nodo-gyp</b> <div class="spoiler_text">  nw-gyp es un truco en node-gyp para admitir encabezados y bibliotecas espec铆ficas de NW.js. <br></div></div><br>  A continuaci贸n, descargue Visual Studio Community Edition (el enlace actual se encuentra f谩cilmente en su motor de b煤squeda favorito), al momento de escribir este art铆culo es la versi贸n actual de 2017. Lo que es importante para nosotros, contiene Build Tools 2015, mientras que los m贸dulos nativos en el nodo solo se ensamblan con esta versi贸n y m谩s Fresco no es compatible.  Descargue el instalador, inicie y coloque una marca de verificaci贸n en la pesta帽a "Componentes individuales" - <u>Toolbox VC ++ 2015.3 v14.00 (v140) para PC</u> <br><br> <a href=""><img src="https://habrastorage.org/webt/v3/5o/pd/v35opdwxd9uqyk7-xdar7xrs2f8.png"></a> <br><br>  El SDK de Windows 8.1 agregado tambi茅n es necesario, por lo que instalamos los tres puntos.  La instalaci贸n de esta forma conduce a un salto de 2.89 gigabytes de todo lo que necesita. <br><br>  Vamos m谩s all谩, balanceamos una serpiente.  Y la versi贸n 2.7.  Instalar por defecto en C: \ Python27. <br>  Y ahora, <b>隆atenci贸n!</b>  <b>Emboscada</b> <br><br>  Por defecto, el instalador cree que no es necesario agregar una ubicaci贸n de Python a la RUTA, por lo tanto, eliminamos este malentendido en la etapa de instalaci贸n <br><br><img src="https://habrastorage.org/webt/er/rh/im/errhim35p7i9q1yxtrfibs4hpf8.png"><br><br>  Una emboscada similar persigue a muchos desarrolladores al construir una amplia variedad de m贸dulos para un nodo.  Y todo porque la corporaci贸n a peque帽a escala tampoco considera necesario prescribir los caminos hacia sus creaciones.  El github simplemente est谩 abrumado con errores de compilaci贸n debido al hecho de que despu茅s de la instalaci贸n, la ruta a las herramientas de ensamblaje no llega a la RUTA.  Tambi茅n corregimos este malentendido: corregimos la variable de entorno para que permita que el ensamblaje se ejecute, si no con mucha suavidad, al menos sin errores.  Esto es lo que me pas贸 (dividido en l铆neas para una mejor percepci贸n) <br><br> <code>&gt;echo %PATH% <br> C:\Python27\; <br> C:\Python27\Scripts; <br> C:\Windows\system32; <br> C:\Windows; <br> C:\Windows\System32\Wbem; <br> C:\Windows\System32\WindowsPowerShell\v1.0\; <br> C:\Program Files\nodejs\; <br> C:\Users\Den\AppData\Roaming\npm; <br> <b>C:\Program Files\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin; <br> C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\v140;</b> <br></code> <br>  Destacado en negrita es lo que necesita agregar manualmente.  Naturalmente, asegur谩ndose de que existen estos caminos. <br><br>  Elemento obligatorio: <b>reiniciar</b> . <br><br>  Bueno, ahora la asamblea real.  Us茅 el administrador FAR, pero nadie proh铆be el cmd de la vieja escuela <br><br> <code>c:\ <br> md app <br> cd \app <br> npm init <br> npm install sqlite3 --build-from-source --runtime=node-webkit --target_arch=ia32 --target=0.32.1 --msvs_version=2015 <br></code> <br>  para x64 cambiamos --target_arch = x64. <br><br>  Bueno eso es todo.  Si todo se hace correctamente, el ensamblado pasa con un cierto n煤mero de mensajes como <br><br> <code>..\src\database.cc(672): warning C4996: 'Nan::MakeCallback':  deprecate [C:\app\node_modules\sqlite3\build\node_sqlite3.vcxproj] <br> C:\app\node_modules\nan\nan.h(929): note: .  "Nan::MakeCallback" <br> c:\app\node_modules\nan\nan_new.h(208): warning C4244: :  "sqlite3_int64"  "double",    (   ..\src\database.cc) [C:\app\node_modules\sqlite3\build\node_sqlite3.vcxproj] <br></code> <br>  pero al final el m贸dulo est谩 ensamblado y ubicado en <br> <code>C:/app/node_modules/sqlite3/lib/binding/node-webkit-v0.32.1-win32-ia32\node_sqlite3.node</code> <br> <br>  Matiz de ensamblaje: con cada ensamblaje, el recopilador elimina la carpeta node_modules / sqlite3 / lib.  Por lo tanto, si es necesario ensamblar dos m贸dulos (para cada arquitectura), guarde el resultado intermedio. <br><br>  Gracias por su atenci贸n, finalmente, el resultado del experimento: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M贸dulos ensamblados para NW.js 0.32.1 ia32 &amp;&amp; x64 en Google</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420413/">https://habr.com/ru/post/es420413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420395/index.html">Tabletas "gratis" para prisioneros, nada gratis</a></li>
<li><a href="../es420397/index.html">Los cient铆ficos han encontrado una manera de revertir el proceso de envejecimiento de las c茅lulas</a></li>
<li><a href="../es420405/index.html">Investigando el proceso de ventas de TI</a></li>
<li><a href="../es420407/index.html">C no es un lenguaje de bajo nivel</a></li>
<li><a href="../es420409/index.html">Aprende OpenGL. Lecci贸n 5.7 - HDR</a></li>
<li><a href="../es420415/index.html">Todo lo que quer铆a saber sobre probar adaptadores de Wi-Fi, pero ten铆a miedo de preguntar</a></li>
<li><a href="../es420419/index.html">Corredores para aquellos a quienes les gusta la humillaci贸n o c贸mo cambiamos y modificamos PixJam</a></li>
<li><a href="../es420423/index.html">Problemas de interfaz de cruce de tierra</a></li>
<li><a href="../es420425/index.html">Teor铆a y pr谩ctica del uso de HBase</a></li>
<li><a href="../es420429/index.html">USE, RED, PgBouncer, su configuraci贸n y monitoreo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>