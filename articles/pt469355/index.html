<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç£ ü¶Ü üí≤ Um tutorial chato de NumPy üçØ üëºüèº üêøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meu nome √© Vyacheslav, sou matem√°tico cr√¥nico e h√° v√°rios anos n√£o uso ciclos ao trabalhar com matrizes ... 

 Exatamente desde que descobri opera√ß√µes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Um tutorial chato de NumPy</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469355/">  Meu nome √© Vyacheslav, sou matem√°tico cr√¥nico e h√° v√°rios anos n√£o uso ciclos ao trabalhar com matrizes ... <br><br>  Exatamente desde que descobri opera√ß√µes vetoriais no NumPy.  Quero apresentar as fun√ß√µes do NumPy que eu mais uso para processar matrizes de dados e imagens.  No final do artigo, mostrarei como voc√™ pode usar o kit de ferramentas NumPy para envolver imagens sem itera√ß√µes (= muito r√°pido). <br><br>  N√£o se esque√ßa <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np</code> </pre> <br>  e vamos l√°! <a name="habracut"></a><br><br><a name="top"></a><br>  Conte√∫do <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que √© entorpecido?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cria√ß√£o de matriz</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Acesso a elementos, fatias</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A forma da matriz e sua mudan√ßa</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rearranjo e transposi√ß√£o de eixos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jun√ß√£o de matriz</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Clonagem de dados</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Opera√ß√µes matem√°ticas em elementos de matriz</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Multiplica√ß√£o de matrizes</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Agregadores</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Em vez de uma conclus√£o - um exemplo</a> <br><a name="p1"></a><br><h1>  O que √© entorpecido? </h1><br>  Esta √© uma biblioteca de c√≥digo aberto que foi separada do projeto SciPy.  NumPy √© o descendente de Numeric e NumArray.  O NumPy √© baseado na biblioteca LAPAC, escrita em Fortran.  Uma alternativa n√£o-python para o NumPy √© o Matlab. <br><br>  Devido ao fato de o NumPy ser baseado no Fortran, √© uma biblioteca r√°pida.  E devido ao fato de suportar opera√ß√µes vetoriais com matrizes multidimensionais, √© extremamente conveniente. <br><br>  Al√©m da vers√£o b√°sica (matrizes multidimensionais na vers√£o b√°sica), o NumPy inclui um conjunto de pacotes para resolver tarefas especializadas, por exemplo: <br><br><ul><li>  numpy.linalg - implementa opera√ß√µes de √°lgebra linear (uma simples multiplica√ß√£o de vetores e matrizes est√° na vers√£o b√°sica); </li><li>  numpy.random - implementa fun√ß√µes para trabalhar com vari√°veis ‚Äã‚Äãaleat√≥rias; </li><li>  numpy.fft - implementa a transforma√ß√£o direta e inversa de Fourier. </li></ul><br>  Portanto, proponho considerar em detalhes apenas alguns recursos do NumPy e exemplos de seu uso, o que ser√° suficiente para voc√™ entender o qu√£o poderosa √© essa ferramenta! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p2"></a><br><h1>  Cria√ß√£o de matriz </h1><br>  Existem v√°rias maneiras de criar uma matriz: <br><br><ol><li>  converter lista em array: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A Out: array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]])</code> </pre> </li><li>  copie a matriz (c√≥pia e c√≥pia em profundidade s√£o necess√°rias !!!): <br><br><pre> <code class="python hljs">B = A.copy() B Out: array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]])</code> </pre> </li><li>  crie um zero ou uma matriz de um determinado tamanho: <br><br><pre> <code class="python hljs">A = np.zeros((<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)) A Out: array([[<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>]])</code> </pre><br><pre> <code class="python hljs">B = np.ones((<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) B Out: array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>], [<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>], [<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>]])</code> </pre> <br>  Ou pegue as dimens√µes de uma matriz existente: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) B = np.zeros_like(A) B Out: array([[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]])</code> </pre><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) B = np.ones_like(A) B Out: array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]])</code> </pre> <br></li><li>  ao criar uma matriz quadrada bidimensional, voc√™ pode torn√°-la uma matriz diagonal unit√°ria: <br><br><pre> <code class="python hljs">A = np.eye(<span class="hljs-number"><span class="hljs-number">3</span></span>) A Out: array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>]])</code> </pre> </li><li>  crie uma matriz de n√∫meros de De (incluindo) a At√© (n√£o incluindo) com a etapa Etapa: <br><br><pre> <code class="python hljs">From = <span class="hljs-number"><span class="hljs-number">2.5</span></span> To = <span class="hljs-number"><span class="hljs-number">7</span></span> Step = <span class="hljs-number"><span class="hljs-number">0.5</span></span> A = np.arange(From, To, Step) A Out: array([<span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span> , <span class="hljs-number"><span class="hljs-number">3.5</span></span>, <span class="hljs-number"><span class="hljs-number">4.</span></span> , <span class="hljs-number"><span class="hljs-number">4.5</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span> , <span class="hljs-number"><span class="hljs-number">5.5</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span> , <span class="hljs-number"><span class="hljs-number">6.5</span></span>])</code> </pre> <br>  Por padr√£o, de = 0, etapa = 1, portanto, uma variante com um par√¢metro √© interpretada como Para: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) A Out: array([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>])</code> </pre> <br>  Ou com dois - como De e Para: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>) A Out: array([<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>])</code> </pre> </li></ol><br>  Observe que no m√©todo n¬∫ 3, as dimens√µes da matriz foram passadas como <b>um</b> par√¢metro (uma tupla de tamanhos).  O segundo par√¢metro nos m√©todos No. 3 e No. 4, voc√™ pode especificar o tipo desejado de elementos da matriz: <br><br><pre> <code class="python hljs">A = np.zeros((<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), <span class="hljs-string"><span class="hljs-string">'int'</span></span>) A Out: array([[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]])</code> </pre> <br><pre> <code class="python hljs">B = np.ones((<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-string"><span class="hljs-string">'complex'</span></span>) B Out: array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>], [<span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>], [<span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>+<span class="hljs-number"><span class="hljs-number">0.j</span></span>]])</code> </pre> <br>  Usando o m√©todo astype, voc√™ pode converter a matriz em um tipo diferente.  O tipo desejado √© indicado como um par√¢metro: <br><br><pre> <code class="python hljs">A = np.ones((<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) B = A.astype(<span class="hljs-string"><span class="hljs-string">'str'</span></span>) B Out: array([[<span class="hljs-string"><span class="hljs-string">'1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0'</span></span>], [<span class="hljs-string"><span class="hljs-string">'1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0'</span></span>], [<span class="hljs-string"><span class="hljs-string">'1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0'</span></span>]], dtype=<span class="hljs-string"><span class="hljs-string">'&lt;U32'</span></span>)</code> </pre> <br>  Todos os tipos dispon√≠veis podem ser encontrados no dicion√°rio sctypes: <br><br><pre> <code class="python hljs">np.sctypes Out: {<span class="hljs-string"><span class="hljs-string">'int'</span></span>: [numpy.int8, numpy.int16, numpy.int32, numpy.int64], <span class="hljs-string"><span class="hljs-string">'uint'</span></span>: [numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64], <span class="hljs-string"><span class="hljs-string">'float'</span></span>: [numpy.float16, numpy.float32, numpy.float64, numpy.float128], <span class="hljs-string"><span class="hljs-string">'complex'</span></span>: [numpy.complex64, numpy.complex128, numpy.complex256], <span class="hljs-string"><span class="hljs-string">'others'</span></span>: [bool, object, bytes, str, numpy.void]}</code> </pre> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p3"></a><br><h1>  Acesso a elementos, fatias </h1><br>  O acesso aos elementos da matriz √© realizado por √≠ndices inteiros, a contagem regressiva come√ßa em 0: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>] Out: <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br>  Se voc√™ imaginar uma matriz multidimensional como um sistema de matrizes unidimensionais aninhadas (uma matriz linear, cujos elementos podem ser matrizes lineares), torna-se √≥bvio que voc√™ pode acessar as sub-matrizes usando um conjunto incompleto de √≠ndices: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A[<span class="hljs-number"><span class="hljs-number">1</span></span>] Out: array([<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>])</code> </pre> <br>  Dado esse paradigma, podemos reescrever o exemplo de acesso a um elemento: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] Out: <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br>  Ao usar um conjunto incompleto de √≠ndices, os √≠ndices ausentes s√£o implicitamente substitu√≠dos por uma lista de todos os √≠ndices poss√≠veis ao longo do eixo correspondente.  Voc√™ pode fazer isso explicitamente, definindo ":".  O exemplo anterior com um √≠ndice pode ser reescrito da seguinte maneira: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A[<span class="hljs-number"><span class="hljs-number">1</span></span>, :] Out: array([<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>])</code> </pre> <br>  Voc√™ pode pular um √≠ndice ao longo de qualquer eixo ou eixos; se o eixo for seguido por eixos com indexa√ß√£o, ":" deve: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A[:, <span class="hljs-number"><span class="hljs-number">1</span></span>] Out: array([<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>])</code> </pre> <br>  Os √≠ndices podem assumir valores inteiros negativos.  Nesse caso, a contagem √© do final da matriz: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[<span class="hljs-number"><span class="hljs-number">-1</span></span>] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  Voc√™ pode usar n√£o √≠ndices √∫nicos, mas listas de √≠ndices ao longo de cada eixo: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>]] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] array([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>])</code> </pre> <br>  Ou intervalos de √≠ndice na forma de "De: Para: Etapa".  Esse design √© chamado de fatia.  Todos os elementos s√£o selecionados de acordo com a lista de √≠ndices que come√ßa no √≠ndice De inclusive, at√© o √≠ndice Para, n√£o <b>incluindo</b> na etapa Etapa: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] array([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>])</code> </pre> <br>  A etapa do √≠ndice tem o valor padr√£o 1 e pode ser ignorada: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] array([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>])</code> </pre> <br>  Os valores De e Para tamb√©m possuem valores padr√£o: 0 e o tamanho da matriz ao longo do eixo do √≠ndice, respectivamente: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[:<span class="hljs-number"><span class="hljs-number">4</span></span>] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] array([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>])</code> </pre> <br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">5</span></span>) print(A) A[<span class="hljs-number"><span class="hljs-number">-3</span></span>:] Out: [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] array([<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>])</code> </pre> <br>  Se voc√™ deseja usar From e To por padr√£o (todos os √≠ndices nesse eixo) e a etapa for diferente de 1, ser√° necess√°rio usar dois pares de dois pontos para que o int√©rprete possa identificar um √∫nico par√¢metro como Step.  O c√≥digo a seguir "expande" a matriz ao longo do segundo eixo, mas n√£o muda ao longo do primeiro: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) B = A[:, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] print(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, A) print(<span class="hljs-string"><span class="hljs-string">"B"</span></span>, B) Out: A [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] B [[<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] [<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>]]</code> </pre> <br>  Agora vamos fazer <br><br><pre> <code class="python hljs">print(A) B[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(A) Out: [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]]</code> </pre> <br>  Como voc√™ pode ver, em B, alteramos os dados em A. √â por isso que √© importante usar c√≥pias em tarefas reais.  O exemplo acima deve ficar assim: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) B = A.copy()[:, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] print(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, A) print(<span class="hljs-string"><span class="hljs-string">"B"</span></span>, B) Out: A [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] B [[<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] [<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>]]</code> </pre> <br>  O NumPy tamb√©m fornece a capacidade de acessar v√°rios elementos da matriz por meio de uma matriz de √≠ndice booleano.  A matriz de √≠ndice deve corresponder √† forma da matriz indexada. <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) I = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>], [ <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) A[I] Out: array([<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>])</code> </pre> <br>  Como voc√™ pode ver, essa constru√ß√£o retorna uma matriz plana composta por elementos da matriz indexada que correspondem aos √≠ndices verdadeiros.  No entanto, se usarmos esse acesso aos elementos da matriz para alterar seus valores, a forma da matriz ser√° preservada: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) I = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>], [ <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) A[I] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(A) Out: [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]]</code> </pre> <br>  As opera√ß√µes l√≥gicas logic_and, logic_or e logic_not s√£o definidas sobre as matrizes booleanas de indexa√ß√£o e executam opera√ß√µes l√≥gicas AND, OR e NOT elementwise: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) I1 = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>], [<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) I2 = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>], [<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) B = A.copy() C = A.copy() D = A.copy() B[np.logical_and(I1, I2)] = <span class="hljs-number"><span class="hljs-number">0</span></span> C[np.logical_or(I1, I2)] = <span class="hljs-number"><span class="hljs-number">0</span></span> D[np.logical_not(I1)] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(<span class="hljs-string"><span class="hljs-string">'B\n'</span></span>, B) print(<span class="hljs-string"><span class="hljs-string">'\nC\n'</span></span>, C) print(<span class="hljs-string"><span class="hljs-string">'\nD\n'</span></span>, D) Out: B [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]] C [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]] D [[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]]</code> </pre> <br>  logic_and e logic_or levam 2 operandos, logic_not levam um.  Voc√™ pode usar os operadores &amp;, |  e ~ para executar AND, OR e NOT, respectivamente, com qualquer n√∫mero de operandos: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) I1 = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>], [<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) I2 = np.array([[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>], [<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]]) A[I1 &amp; (I1 | ~ I2)] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(A) Out: [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] [<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]]</code> </pre> <br>  O que equivale a usar apenas I1. <br><br>  √â poss√≠vel obter uma matriz l√≥gica de indexa√ß√£o correspondente na forma a uma matriz de valores escrevendo uma condi√ß√£o l√≥gica com o nome da matriz como um operando.  O valor booleano do √≠ndice ser√° calculado como a verdade da express√£o para o elemento da matriz correspondente. <br><br>  Encontre uma matriz de indexa√ß√£o de I elementos maiores que 3 e elementos com valores menores que 2 e maiores que 4 - ser√£o redefinidos para zero: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) print(<span class="hljs-string"><span class="hljs-string">'A before\n'</span></span>, A) I = A &gt; <span class="hljs-number"><span class="hljs-number">3</span></span> print(<span class="hljs-string"><span class="hljs-string">'I\n'</span></span>, I) A[np.logical_or(A &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>, A &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>)] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(<span class="hljs-string"><span class="hljs-string">'A after\n'</span></span>, A) Out: A before [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] I [[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>] [ <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>]] A after [[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]]</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p4"></a><br><h1>  A forma da matriz e sua altera√ß√£o </h1><br>  Uma matriz multidimensional pode ser representada como uma matriz unidimensional de comprimento m√°ximo, cortada em fragmentos ao longo do comprimento do √∫ltimo eixo e colocada em camadas ao longo dos eixos, come√ßando pelo √∫ltimo. <br><br>  Para maior clareza, considere um exemplo: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">24</span></span>) B = A.reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>) C = A.reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) print(<span class="hljs-string"><span class="hljs-string">'B\n'</span></span>, B) print(<span class="hljs-string"><span class="hljs-string">'\nC\n'</span></span>, C) Out: B [[ <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>] [ <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>] [<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>] [<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>]] C [[[ <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] [ <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [ <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>]] [[ <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>] [ <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>] [<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>]] [[<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span>] [<span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>] [<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>]] [[<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>] [<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>] [<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>]]]</code> </pre> <br>  Neste exemplo, formamos 2 novas matrizes a partir de uma matriz unidimensional com um comprimento de 24 elementos.  Matriz B, tamanho 4 por 6. Se voc√™ observar a ordem dos valores, poder√° ver que, ao longo da segunda dimens√£o, existem cadeias de valores consecutivos. <br><br>  Na matriz C, 4 por 3 por 2, os valores cont√≠nuos s√£o executados ao longo do √∫ltimo eixo.  Ao longo do segundo eixo, existem blocos em s√©rie, cuja combina√ß√£o resultaria em uma linha ao longo do segundo eixo da matriz B. <br><br>  E, como n√£o fizemos c√≥pias, fica claro que essas s√£o formas diferentes de representa√ß√£o da mesma matriz de dados.  Portanto, voc√™ pode alterar de forma f√°cil e r√°pida a forma da matriz sem alterar os dados em si. <br><br>  Para descobrir a dimens√£o da matriz (n√∫mero de eixos), voc√™ pode usar o campo ndim (n√∫mero) e descobrir o tamanho ao longo de cada forma de eixo (tupla).  A dimens√£o tamb√©m pode ser reconhecida pelo comprimento da forma.  Para descobrir o n√∫mero total de elementos em uma matriz, voc√™ pode usar o valor do tamanho: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">24</span></span>) C = A.reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) print(C.ndim, C.shape, len(C.shape), A.size) Out: <span class="hljs-number"><span class="hljs-number">3</span></span> (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span></code> </pre> <br>  Note que ndim e shape s√£o atributos, n√£o m√©todos! <br><br>  Para ver a matriz unidimensional, voc√™ pode usar a fun√ß√£o ravel: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A.ravel() Out: array([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>])</code> </pre> <br>  Para redimensionar ao longo dos eixos ou da dimens√£o, use o m√©todo de remodela√ß√£o: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A.reshape(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) Out: array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]])</code> </pre> <br>  √â importante que o n√∫mero de elementos seja preservado.  Caso contr√°rio, ocorrer√° um erro: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) A.reshape(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) Out: ValueError Traceback (most recent call last) &lt;ipython-input<span class="hljs-number"><span class="hljs-number">-73</span></span>-d204e18427d9&gt; <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) ----&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> A.reshape(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) ValueError: cannot reshape array of size <span class="hljs-number"><span class="hljs-number">6</span></span> into shape (<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br>  Dado que o n√∫mero de elementos √© constante, o tamanho ao longo de qualquer eixo ao remodelar pode ser calculado a partir dos valores de comprimento ao longo de outros eixos.  O tamanho ao longo de um eixo pode ser designado como -1 e, em seguida, ser√° calculado automaticamente: <br><br><pre> <code class="python hljs">A = np.arange(<span class="hljs-number"><span class="hljs-number">24</span></span>) B = A.reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) C = A.reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) print(B.shape, C.shape) Out: (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>) (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  Voc√™ pode usar a remodelagem em vez do ravel: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) B = A.reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>) print(B.shape) Out: (<span class="hljs-number"><span class="hljs-number">6</span></span>,)</code> </pre> <br>  Considere a aplica√ß√£o pr√°tica de alguns recursos para o processamento de imagens.  Como objeto de pesquisa, usaremos uma fotografia: <br><br><img src="https://habrastorage.org/webt/s4/_x/kd/s4_xkde-zkxl7hxntuvj6b9rulo.jpeg"><br><br>  Vamos tentar fazer o download e visualiz√°-lo usando Python.  Para isso, precisamos do OpenCV e Matplotlib: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> matplotlib <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt I = cv2.imread(<span class="hljs-string"><span class="hljs-string">'sarajevo.jpg'</span></span>)[:, :, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] plt.figure(num=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>), dpi=<span class="hljs-number"><span class="hljs-number">80</span></span>, facecolor=<span class="hljs-string"><span class="hljs-string">'w'</span></span>, edgecolor=<span class="hljs-string"><span class="hljs-string">'k'</span></span>) plt.imshow(I) plt.show()</code> </pre> <br>  O resultado ser√° assim: <br><br><img src="https://habrastorage.org/webt/a3/z7/05/a3z705cacyhqxhtwmxdcngq88hu.png"><br><br>  Preste aten√ß√£o na barra de download: <br><br><pre> <code class="python hljs">I = cv2.imread(<span class="hljs-string"><span class="hljs-string">'sarajevo.jpg'</span></span>)[:, :, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] print(I.shape) Out: (<span class="hljs-number"><span class="hljs-number">1280</span></span>, <span class="hljs-number"><span class="hljs-number">1920</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br>  O OpenCV trabalha com imagens no formato BGR, e estamos familiarizados com o RGB.  Alteramos a ordem dos bytes ao longo do eixo da cor sem acessar as fun√ß√µes OpenCV usando a constru√ß√£o <br>  "[:,:, :: :: 1]". <br><br>  Reduza a imagem em 2 vezes em cada eixo.  Nossa imagem tem dimens√µes uniformes ao longo dos eixos, respectivamente, pode ser reduzida sem interpola√ß√£o: <br><br><pre> <code class="python hljs">I_ = I.reshape(I.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, I.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) print(I_.shape) plt.figure(num=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), dpi=<span class="hljs-number"><span class="hljs-number">80</span></span>, facecolor=<span class="hljs-string"><span class="hljs-string">'w'</span></span>, edgecolor=<span class="hljs-string"><span class="hljs-string">'k'</span></span>) plt.imshow(I_[:, <span class="hljs-number"><span class="hljs-number">0</span></span>, :, <span class="hljs-number"><span class="hljs-number">0</span></span>]) plt.show()</code> </pre> <br><img src="https://habrastorage.org/webt/9z/ig/12/9zig12b_iqus6ymezttmqu7poga.png"><br><br>  Mudando a forma da matriz, obtivemos 2 novos eixos, 2 valores em cada um, que correspondem a quadros compostos por linhas e colunas √≠mpares e pares da imagem original. <br>  A baixa qualidade √© devida ao uso do Matplotlib, pois √© poss√≠vel ver as dimens√µes axiais.  De fato, a qualidade da miniatura √©: <br><br><img src="https://habrastorage.org/webt/__/32/cp/__32cpcj6xlm1n5efxcwkp4lhxw.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p5"></a><br><h1>  Rearranjo e transposi√ß√£o de eixos </h1><br>  Al√©m de alterar a forma da matriz com a mesma ordem de unidades de dados, muitas vezes √© necess√°rio alterar a ordem dos eixos, o que naturalmente implica a permuta√ß√£o dos blocos de dados. <br><br>  Um exemplo dessa transforma√ß√£o √© a transposi√ß√£o de uma matriz: troca de linhas e colunas. <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]]) print(<span class="hljs-string"><span class="hljs-string">'A\n'</span></span>, A) print(<span class="hljs-string"><span class="hljs-string">'\nA data\n'</span></span>, A.ravel()) B = AT print(<span class="hljs-string"><span class="hljs-string">'\nB\n'</span></span>, B) print(<span class="hljs-string"><span class="hljs-string">'\nB data\n'</span></span>, B.ravel()) Out: A [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] A data [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>] B [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>] [<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]] B data [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>]</code> </pre><br>  Neste exemplo, a constru√ß√£o AT foi usada para transpor a matriz A. O operador de transposi√ß√£o inverte a ordem dos eixos.  Considere outro exemplo com tr√™s eixos: <br><br><pre> <code class="python hljs">C = np.arange(<span class="hljs-number"><span class="hljs-number">24</span></span>).reshape(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) print(C.shape, np.transpose(C).shape) print() print(C[<span class="hljs-number"><span class="hljs-number">0</span></span>]) print() print(CT[:, :, <span class="hljs-number"><span class="hljs-number">0</span></span>]) Out: [[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] [<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>]] [[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>]]</code> </pre><br>  Esta entrada curta possui uma contraparte mais longa: np.transpose (A).  Esta √© uma ferramenta mais vers√°til para substituir a ordem dos eixos.  O segundo par√¢metro permite especificar uma tupla de n√∫meros de eixos da matriz de origem, que determina a ordem de suas posi√ß√µes na matriz resultante. <br><br>  Por exemplo, reorganize os dois primeiros eixos da imagem.  A imagem deve virar, mas deixar o eixo da cor inalterado: <br><br><pre> <code class="python hljs">I_ = np.transpose(I, (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) plt.figure(num=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>), dpi=<span class="hljs-number"><span class="hljs-number">80</span></span>, facecolor=<span class="hljs-string"><span class="hljs-string">'w'</span></span>, edgecolor=<span class="hljs-string"><span class="hljs-string">'k'</span></span>) plt.imshow(I_) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/qm/am/ej/qmamejo5ghalkut44wbbfmeliaq.png"><br><br>  Para este exemplo, outra ferramenta de swapaxes pode ser usada.  Este m√©todo troca os dois eixos especificados nos par√¢metros.  O exemplo acima pode ser implementado assim: <br><br><pre> <code class="python hljs">I_ = np.swapaxes(I, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p45"></a><br><h1>  Jun√ß√£o de matriz </h1><br>  Matrizes mescladas devem ter o mesmo n√∫mero de eixos.  As matrizes podem ser combinadas com a forma√ß√£o de um novo eixo ou ao longo de um eixo existente. <br><br>  Para combinar com a forma√ß√£o de um novo eixo, as matrizes originais devem ter as mesmas dimens√µes em todos os eixos: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) B = A[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] C = A[:, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] D = np.stack((A, B, C)) print(D.shape) D Out: (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) array([[[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]], [[<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]], [[<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]]])</code> </pre><br>  Como voc√™ pode ver no exemplo, as matrizes do operando se tornaram sub-matrizes do novo objeto e alinhadas ao longo do novo eixo, que √© o primeiro em ordem. <br><br>  Para combinar matrizes ao longo de um eixo existente, elas devem ter o mesmo tamanho em todos os eixos, exceto o selecionado para uni√£o, e podem ter tamanhos arbitr√°rios: <br><br><pre> <code class="python hljs">A = np.ones((<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) B = np.zeros((<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) C = np.concatenate((A, B), <span class="hljs-number"><span class="hljs-number">1</span></span>) print(C.shape) C Out: (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) array([[[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>]], [[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">1.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>], [<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">0.</span></span>]]])</code> </pre><br>  Para combinar ao longo do primeiro ou segundo eixo, voc√™ pode usar os m√©todos vstack e hstack, respectivamente.  Mostramos isso com um exemplo de imagens.  O vstack combina imagens da mesma largura em altura e o hsstack combina as mesmas imagens de altura em uma largura: <br><br><pre> <code class="python hljs">I = cv2.imread(<span class="hljs-string"><span class="hljs-string">'sarajevo.jpg'</span></span>)[:, :, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] I_ = I.reshape(I.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, I.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) Ih = np.hstack((I_[:, <span class="hljs-number"><span class="hljs-number">0</span></span>, :, <span class="hljs-number"><span class="hljs-number">0</span></span>], I_[:, <span class="hljs-number"><span class="hljs-number">0</span></span>, :, <span class="hljs-number"><span class="hljs-number">1</span></span>])) Iv = np.vstack((I_[:, <span class="hljs-number"><span class="hljs-number">0</span></span>, :, <span class="hljs-number"><span class="hljs-number">0</span></span>], I_[:, <span class="hljs-number"><span class="hljs-number">1</span></span>, :, <span class="hljs-number"><span class="hljs-number">0</span></span>])) plt.figure(num=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), dpi=<span class="hljs-number"><span class="hljs-number">80</span></span>, facecolor=<span class="hljs-string"><span class="hljs-string">'w'</span></span>, edgecolor=<span class="hljs-string"><span class="hljs-string">'k'</span></span>) plt.imshow(Ih) plt.show() plt.figure(num=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), dpi=<span class="hljs-number"><span class="hljs-number">80</span></span>, facecolor=<span class="hljs-string"><span class="hljs-string">'w'</span></span>, edgecolor=<span class="hljs-string"><span class="hljs-string">'k'</span></span>) plt.imshow(Iv) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/-6/ob/95/-6ob95gddbk6k3cphy4jxmkz4de.png"><br><br><img src="https://habrastorage.org/webt/up/ik/dw/upikdwlnydr1bcnun2rtkcniebq.png"><br><br>  Observe que em todos os exemplos desta se√ß√£o, as matrizes unidas s√£o passadas por um par√¢metro (tupla).  O n√∫mero de operandos pode ser qualquer, mas n√£o necessariamente apenas 2. <br><br>  Preste aten√ß√£o tamb√©m ao que acontece com a mem√≥ria ao combinar matrizes: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) B = A[::<span class="hljs-number"><span class="hljs-number">-1</span></span>] C = A[:, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] D = np.stack((A, B, C)) D[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> print(A) Out: [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]]</code> </pre><br>  Como um novo objeto √© criado, os dados nele s√£o copiados das matrizes originais, portanto, as altera√ß√µes nos novos dados n√£o afetam o original. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p6"></a><br><h1>  Clonagem de dados </h1><br>  O operador np.repeat (A, n) retornar√° uma matriz unidimensional com elementos da matriz A, cada um dos quais ser√° repetido n vezes. <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) print(np.repeat(A, <span class="hljs-number"><span class="hljs-number">2</span></span>)) Out: [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]</code> </pre><br>  Ap√≥s essa convers√£o, voc√™ pode reconstruir a geometria da matriz e coletar dados duplicados em um eixo: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) B = np.repeat(A, <span class="hljs-number"><span class="hljs-number">2</span></span>).reshape(A.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>], A.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-number"><span class="hljs-number">-1</span></span>) print(B) Out: [[[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] [<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>] [<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>] [<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>]] [[<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>] [<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>] [<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>] [<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]]]</code> </pre><br>  Essa op√ß√£o difere da combina√ß√£o da matriz com o pr√≥prio operador de pilha apenas na posi√ß√£o do eixo ao longo da qual os mesmos dados est√£o localizados.  No exemplo acima, este √© o √∫ltimo eixo, se voc√™ usar a pilha - o primeiro: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) B = np.stack((A, A)) print(B) Out: [[[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]] [[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]]]</code> </pre><br>  N√£o importa como os dados sejam clonados, o pr√≥ximo passo √© mover o eixo ao longo do qual os mesmos valores est√£o em qualquer posi√ß√£o no sistema de eixos: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>]]) B = np.transpose(np.stack((A, A)), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) C = np.transpose(np.repeat(A, <span class="hljs-number"><span class="hljs-number">2</span></span>).reshape(A.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>], A.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-number"><span class="hljs-number">-1</span></span>), (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) print(<span class="hljs-string"><span class="hljs-string">'B\n'</span></span>, B) print(<span class="hljs-string"><span class="hljs-string">'\nC\n'</span></span>, C) Out: B [[[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>]] [[<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>] [<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]]] C [[[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>] [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>]] [[<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>] [<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>]]]</code> </pre><br>  Se queremos ‚Äúesticar‚Äù qualquer eixo usando a repeti√ß√£o de elementos, o eixo com os mesmos valores deve ser colocado <b>ap√≥s o</b> expans√≠vel (usando transposi√ß√£o) e, em seguida, combinar esses dois eixos (usando a remodelagem).  Considere um exemplo ao esticar uma imagem ao longo de um eixo vertical duplicando linhas: <br><br><pre> <code class="python hljs">I0 = cv2.imread(<span class="hljs-string"><span class="hljs-string">'sarajevo.jpg'</span></span>)[:, :, ::<span class="hljs-number"><span class="hljs-number">-1</span></span>] <span class="hljs-comment"><span class="hljs-comment">#    I1 = I.reshape(I.shape[0] // 2, 2, I.shape[1] // 2, 2, -1)[:, 0, :, 0] #      I2 = np.repeat(I1, 2) #   I3 = I2.reshape(I1.shape[0], I1.shape[1], I1.shape[2], -1) I4 = np.transpose(I3, (0, 3, 1, 2)) #    I5 = I4.reshape(-1, I1.shape[1], I1.shape[2]) #   print('I0', I0.shape) print('I1', I1.shape) print('I2', I2.shape) print('I3', I3.shape) print('I4', I4.shape) print('I5', I5.shape) plt.figure(num=None, figsize=(10, 10), dpi=80, facecolor='w', edgecolor='k') plt.imshow(I5) plt.show() Out: I0 (1280, 1920, 3) I1 (640, 960, 3) I2 (3686400,) I3 (640, 960, 3, 2) I4 (640, 2, 960, 3) I5 (1280, 960, 3)</span></span></code> </pre><br><img src="https://habrastorage.org/webt/e1/kx/0w/e1kx0wvkavizpfamsclewgm8wj8.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">&lt;up&gt;</a> <br><br><a name="p7"></a><br><h1>  Opera√ß√µes matem√°ticas em elementos de matriz </h1><br>  Se A e B s√£o matrizes do mesmo tamanho, elas podem ser adicionadas, multiplicadas, subtra√≠das, divididas e aumentadas para uma pot√™ncia.  Essas opera√ß√µes s√£o executadas <b>elemento a elemento</b> , a matriz resultante coincide em geometria com as matrizes originais e cada um de seus elementos ser√° o resultado da opera√ß√£o correspondente em um par de elementos das matrizes originais: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">-1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>]]) B = np.array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">-2.</span></span>, <span class="hljs-number"><span class="hljs-number">-3.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], ]) C = A + B D = A - B E = A * B F = A / B G = A ** B print(<span class="hljs-string"><span class="hljs-string">'+\n'</span></span>, C, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'-\n'</span></span>, D, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'*\n'</span></span>, E, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'/\n'</span></span>, F, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'**\n'</span></span>, G, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: + [[ <span class="hljs-number"><span class="hljs-number">0.</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span>] [<span class="hljs-number"><span class="hljs-number">11.</span></span> <span class="hljs-number"><span class="hljs-number">13.</span></span> <span class="hljs-number"><span class="hljs-number">15.</span></span>] [<span class="hljs-number"><span class="hljs-number">11.</span></span> <span class="hljs-number"><span class="hljs-number">13.</span></span> <span class="hljs-number"><span class="hljs-number">15.</span></span>]] - [[<span class="hljs-number"><span class="hljs-number">-2.</span></span> <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.</span></span>] [<span class="hljs-number"><span class="hljs-number">-3.</span></span> <span class="hljs-number"><span class="hljs-number">-3.</span></span> <span class="hljs-number"><span class="hljs-number">-3.</span></span>] [ <span class="hljs-number"><span class="hljs-number">3.</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span>]] * [[<span class="hljs-number"><span class="hljs-number">-1.</span></span> <span class="hljs-number"><span class="hljs-number">-4.</span></span> <span class="hljs-number"><span class="hljs-number">-9.</span></span>] [<span class="hljs-number"><span class="hljs-number">28.</span></span> <span class="hljs-number"><span class="hljs-number">40.</span></span> <span class="hljs-number"><span class="hljs-number">54.</span></span>] [<span class="hljs-number"><span class="hljs-number">28.</span></span> <span class="hljs-number"><span class="hljs-number">40.</span></span> <span class="hljs-number"><span class="hljs-number">54.</span></span>]] / [[<span class="hljs-number"><span class="hljs-number">-1.</span></span> <span class="hljs-number"><span class="hljs-number">-1.</span></span> <span class="hljs-number"><span class="hljs-number">-1.</span></span> ] [ <span class="hljs-number"><span class="hljs-number">0.57142857</span></span> <span class="hljs-number"><span class="hljs-number">0.625</span></span> <span class="hljs-number"><span class="hljs-number">0.66666667</span></span>] [ <span class="hljs-number"><span class="hljs-number">1.75</span></span> <span class="hljs-number"><span class="hljs-number">1.6</span></span> <span class="hljs-number"><span class="hljs-number">1.5</span></span> ]] ** [[<span class="hljs-number"><span class="hljs-number">-1.0000000e+00</span></span> <span class="hljs-number"><span class="hljs-number">2.5000000e-01</span></span> <span class="hljs-number"><span class="hljs-number">3.7037037e-02</span></span>] [ <span class="hljs-number"><span class="hljs-number">1.6384000e+04</span></span> <span class="hljs-number"><span class="hljs-number">3.9062500e+05</span></span> <span class="hljs-number"><span class="hljs-number">1.0077696e+07</span></span>] [ <span class="hljs-number"><span class="hljs-number">2.4010000e+03</span></span> <span class="hljs-number"><span class="hljs-number">3.2768000e+04</span></span> <span class="hljs-number"><span class="hljs-number">5.3144100e+05</span></span>]]</code> </pre><br>  Voc√™ pode executar qualquer opera√ß√£o acima na matriz e n√∫mero.  Nesse caso, a opera√ß√£o tamb√©m ser√° executada em cada um dos elementos da matriz: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">-1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>]]) B = <span class="hljs-number"><span class="hljs-number">-2.</span></span> C = A + B D = A - B E = A * B F = A / B G = A ** B print(<span class="hljs-string"><span class="hljs-string">'+\n'</span></span>, C, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'-\n'</span></span>, D, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'*\n'</span></span>, E, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'/\n'</span></span>, F, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'**\n'</span></span>, G, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: + [[<span class="hljs-number"><span class="hljs-number">-3.</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>] [ <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span> <span class="hljs-number"><span class="hljs-number">4.</span></span>] [ <span class="hljs-number"><span class="hljs-number">5.</span></span> <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">7.</span></span>]] - [[ <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">5.</span></span>] [ <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">7.</span></span> <span class="hljs-number"><span class="hljs-number">8.</span></span>] [ <span class="hljs-number"><span class="hljs-number">9.</span></span> <span class="hljs-number"><span class="hljs-number">10.</span></span> <span class="hljs-number"><span class="hljs-number">11.</span></span>]] * [[ <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">-4.</span></span> <span class="hljs-number"><span class="hljs-number">-6.</span></span>] [ <span class="hljs-number"><span class="hljs-number">-8.</span></span> <span class="hljs-number"><span class="hljs-number">-10.</span></span> <span class="hljs-number"><span class="hljs-number">-12.</span></span>] [<span class="hljs-number"><span class="hljs-number">-14.</span></span> <span class="hljs-number"><span class="hljs-number">-16.</span></span> <span class="hljs-number"><span class="hljs-number">-18.</span></span>]] / [[ <span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-number"><span class="hljs-number">-1.</span></span> <span class="hljs-number"><span class="hljs-number">-1.5</span></span>] [<span class="hljs-number"><span class="hljs-number">-2.</span></span> <span class="hljs-number"><span class="hljs-number">-2.5</span></span> <span class="hljs-number"><span class="hljs-number">-3.</span></span> ] [<span class="hljs-number"><span class="hljs-number">-3.5</span></span> <span class="hljs-number"><span class="hljs-number">-4.</span></span> <span class="hljs-number"><span class="hljs-number">-4.5</span></span>]] ** [[<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">0.25</span></span> <span class="hljs-number"><span class="hljs-number">0.11111111</span></span>] [<span class="hljs-number"><span class="hljs-number">0.0625</span></span> <span class="hljs-number"><span class="hljs-number">0.04</span></span> <span class="hljs-number"><span class="hljs-number">0.02777778</span></span>] [<span class="hljs-number"><span class="hljs-number">0.02040816</span></span> <span class="hljs-number"><span class="hljs-number">0.015625</span></span> <span class="hljs-number"><span class="hljs-number">0.01234568</span></span>]]</code> </pre><br>  Dado que uma matriz multidimensional pode ser considerada como uma matriz plana (primeiro eixo), cujos elementos s√£o matrizes (outros eixos), √© poss√≠vel realizar as opera√ß√µes consideradas nas matrizes A e B no caso em que a geometria de B coincide com a geometria das sub-matrizes de A com um valor fixo ao longo do primeiro eixo .  Em outras palavras, com o mesmo n√∫mero de eixos e tamanhos A [i] e B. Nesse caso, cada uma das matrizes A [i] e B ser√£o operandos para opera√ß√µes definidas nas matrizes. <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>]]) B = np.array([<span class="hljs-number"><span class="hljs-number">-1.1</span></span>, <span class="hljs-number"><span class="hljs-number">-1.2</span></span>, <span class="hljs-number"><span class="hljs-number">-1.3</span></span>]) C = AT + B D = AT - B E = AT * B F = AT / B G = AT ** B print(<span class="hljs-string"><span class="hljs-string">'+\n'</span></span>, C, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'-\n'</span></span>, D, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'*\n'</span></span>, E, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'/\n'</span></span>, F, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'**\n'</span></span>, G, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: + [[<span class="hljs-number"><span class="hljs-number">-0.1</span></span> <span class="hljs-number"><span class="hljs-number">2.8</span></span> <span class="hljs-number"><span class="hljs-number">5.7</span></span>] [ <span class="hljs-number"><span class="hljs-number">0.9</span></span> <span class="hljs-number"><span class="hljs-number">3.8</span></span> <span class="hljs-number"><span class="hljs-number">6.7</span></span>] [ <span class="hljs-number"><span class="hljs-number">1.9</span></span> <span class="hljs-number"><span class="hljs-number">4.8</span></span> <span class="hljs-number"><span class="hljs-number">7.7</span></span>]] - [[ <span class="hljs-number"><span class="hljs-number">2.1</span></span> <span class="hljs-number"><span class="hljs-number">5.2</span></span> <span class="hljs-number"><span class="hljs-number">8.3</span></span>] [ <span class="hljs-number"><span class="hljs-number">3.1</span></span> <span class="hljs-number"><span class="hljs-number">6.2</span></span> <span class="hljs-number"><span class="hljs-number">9.3</span></span>] [ <span class="hljs-number"><span class="hljs-number">4.1</span></span> <span class="hljs-number"><span class="hljs-number">7.2</span></span> <span class="hljs-number"><span class="hljs-number">10.3</span></span>]] * [[ <span class="hljs-number"><span class="hljs-number">-1.1</span></span> <span class="hljs-number"><span class="hljs-number">-4.8</span></span> <span class="hljs-number"><span class="hljs-number">-9.1</span></span>] [ <span class="hljs-number"><span class="hljs-number">-2.2</span></span> <span class="hljs-number"><span class="hljs-number">-6.</span></span> <span class="hljs-number"><span class="hljs-number">-10.4</span></span>] [ <span class="hljs-number"><span class="hljs-number">-3.3</span></span> <span class="hljs-number"><span class="hljs-number">-7.2</span></span> <span class="hljs-number"><span class="hljs-number">-11.7</span></span>]] / [[<span class="hljs-number"><span class="hljs-number">-0.90909091</span></span> <span class="hljs-number"><span class="hljs-number">-3.33333333</span></span> <span class="hljs-number"><span class="hljs-number">-5.38461538</span></span>] [<span class="hljs-number"><span class="hljs-number">-1.81818182</span></span> <span class="hljs-number"><span class="hljs-number">-4.16666667</span></span> <span class="hljs-number"><span class="hljs-number">-6.15384615</span></span>] [<span class="hljs-number"><span class="hljs-number">-2.72727273</span></span> <span class="hljs-number"><span class="hljs-number">-5.</span></span> <span class="hljs-number"><span class="hljs-number">-6.92307692</span></span>]] ** [[<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">0.18946457</span></span> <span class="hljs-number"><span class="hljs-number">0.07968426</span></span>] [<span class="hljs-number"><span class="hljs-number">0.4665165</span></span> <span class="hljs-number"><span class="hljs-number">0.14495593</span></span> <span class="hljs-number"><span class="hljs-number">0.06698584</span></span>] [<span class="hljs-number"><span class="hljs-number">0.29865282</span></span> <span class="hljs-number"><span class="hljs-number">0.11647119</span></span> <span class="hljs-number"><span class="hljs-number">0.05747576</span></span>]]</code> </pre><br>  Neste exemplo, a matriz B √© submetida √† opera√ß√£o com cada linha da matriz A. Se voc√™ precisar multiplicar / dividir / adicionar / subtrair / aumentar o grau de sub-matrizes ao longo de outro eixo, use a transposi√ß√£o para colocar o eixo desejado em seu primeiro lugar e, em seguida, retorne-o ao seu lugar.  Considere o exemplo acima, mas com multiplica√ß√£o pelo vetor B das colunas da matriz A: <br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>]]) B = np.array([<span class="hljs-number"><span class="hljs-number">-1.1</span></span>, <span class="hljs-number"><span class="hljs-number">-1.2</span></span>, <span class="hljs-number"><span class="hljs-number">-1.3</span></span>]) C = (AT + B).T D = (AT - B).T E = (AT * B).T F = (AT / B).T G = (AT ** B).T print(<span class="hljs-string"><span class="hljs-string">'+\n'</span></span>, C, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'-\n'</span></span>, D, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'*\n'</span></span>, E, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'/\n'</span></span>, F, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'**\n'</span></span>, G, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: + [[<span class="hljs-number"><span class="hljs-number">-0.1</span></span> <span class="hljs-number"><span class="hljs-number">0.9</span></span> <span class="hljs-number"><span class="hljs-number">1.9</span></span>] [ <span class="hljs-number"><span class="hljs-number">2.8</span></span> <span class="hljs-number"><span class="hljs-number">3.8</span></span> <span class="hljs-number"><span class="hljs-number">4.8</span></span>] [ <span class="hljs-number"><span class="hljs-number">5.7</span></span> <span class="hljs-number"><span class="hljs-number">6.7</span></span> <span class="hljs-number"><span class="hljs-number">7.7</span></span>]] - [[ <span class="hljs-number"><span class="hljs-number">2.1</span></span> <span class="hljs-number"><span class="hljs-number">3.1</span></span> <span class="hljs-number"><span class="hljs-number">4.1</span></span>] [ <span class="hljs-number"><span class="hljs-number">5.2</span></span> <span class="hljs-number"><span class="hljs-number">6.2</span></span> <span class="hljs-number"><span class="hljs-number">7.2</span></span>] [ <span class="hljs-number"><span class="hljs-number">8.3</span></span> <span class="hljs-number"><span class="hljs-number">9.3</span></span> <span class="hljs-number"><span class="hljs-number">10.3</span></span>]] * [[ <span class="hljs-number"><span class="hljs-number">-1.1</span></span> <span class="hljs-number"><span class="hljs-number">-2.2</span></span> <span class="hljs-number"><span class="hljs-number">-3.3</span></span>] [ <span class="hljs-number"><span class="hljs-number">-4.8</span></span> <span class="hljs-number"><span class="hljs-number">-6.</span></span> <span class="hljs-number"><span class="hljs-number">-7.2</span></span>] [ <span class="hljs-number"><span class="hljs-number">-9.1</span></span> <span class="hljs-number"><span class="hljs-number">-10.4</span></span> <span class="hljs-number"><span class="hljs-number">-11.7</span></span>]] / [[<span class="hljs-number"><span class="hljs-number">-0.90909091</span></span> <span class="hljs-number"><span class="hljs-number">-1.81818182</span></span> <span class="hljs-number"><span class="hljs-number">-2.72727273</span></span>] [<span class="hljs-number"><span class="hljs-number">-3.33333333</span></span> <span class="hljs-number"><span class="hljs-number">-4.16666667</span></span> <span class="hljs-number"><span class="hljs-number">-5.</span></span> ] [<span class="hljs-number"><span class="hljs-number">-5.38461538</span></span> <span class="hljs-number"><span class="hljs-number">-6.15384615</span></span> <span class="hljs-number"><span class="hljs-number">-6.92307692</span></span>]] ** [[<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">0.4665165</span></span> <span class="hljs-number"><span class="hljs-number">0.29865282</span></span>] [<span class="hljs-number"><span class="hljs-number">0.18946457</span></span> <span class="hljs-number"><span class="hljs-number">0.14495593</span></span> <span class="hljs-number"><span class="hljs-number">0.11647119</span></span>] [<span class="hljs-number"><span class="hljs-number">0.07968426</span></span> <span class="hljs-number"><span class="hljs-number">0.06698584</span></span> <span class="hljs-number"><span class="hljs-number">0.05747576</span></span>]]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para fun√ß√µes mais complexas (por exemplo, trigonom√©trica, expoente, logaritmo, convers√£o entre graus e radianos, m√≥dulo, raiz quadrada etc.), o NumPy tem uma implementa√ß√£o. </font><font style="vertical-align: inherit;">Considere o exemplo de exponencial e logaritmo:</font></font><br><br><pre> <code class="python hljs">A = np.array([[<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>, <span class="hljs-number"><span class="hljs-number">3.</span></span>], [<span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>, <span class="hljs-number"><span class="hljs-number">6.</span></span>], [<span class="hljs-number"><span class="hljs-number">7.</span></span>, <span class="hljs-number"><span class="hljs-number">8.</span></span>, <span class="hljs-number"><span class="hljs-number">9.</span></span>]]) B = np.exp(A) C = np.log(B) print(<span class="hljs-string"><span class="hljs-string">'A'</span></span>, A, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'B'</span></span>, B, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'C'</span></span>, C, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: A [[<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span>] [<span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">5.</span></span> <span class="hljs-number"><span class="hljs-number">6.</span></span>] [<span class="hljs-number"><span class="hljs-number">7.</span></span> <span class="hljs-number"><span class="hljs-number">8.</span></span> <span class="hljs-number"><span class="hljs-number">9.</span></span>]] B [[<span class="hljs-number"><span class="hljs-number">2.71828183e+00</span></span> <span class="hljs-number"><span class="hljs-number">7.38905610e+00</span></span> <span class="hljs-number"><span class="hljs-number">2.00855369e+01</span></span>] [<span class="hljs-number"><span class="hljs-number">5.45981500e+01</span></span> <span class="hljs-number"><span class="hljs-number">1.48413159e+02</span></span> <span class="hljs-number"><span class="hljs-number">4.03428793e+02</span></span>] [<span class="hljs-number"><span class="hljs-number">1.09663316e+03</span></span> <span class="hljs-number"><span class="hljs-number">2.98095799e+03</span></span> <span class="hljs-number"><span class="hljs-number">8.10308393e+03</span></span>]] C [[<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span>] [<span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">5.</span></span> <span class="hljs-number"><span class="hljs-number">6.</span></span>] [<span class="hljs-number"><span class="hljs-number">7.</span></span> <span class="hljs-number"><span class="hljs-number">8.</span></span> <span class="hljs-number"><span class="hljs-number">9.</span></span>]]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma lista completa de opera√ß√µes matem√°ticas no NumPy pode ser encontrada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;up&gt;</font></font></a> <br><br><a name="p8"></a><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Multiplica√ß√£o de matrizes </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A opera√ß√£o acima do produto de matrizes √© realizada de maneira elementar. </font><font style="vertical-align: inherit;">E se voc√™ precisar executar opera√ß√µes de acordo com as regras da √°lgebra linear em matrizes e em tensores, poder√° usar o m√©todo de ponto (A, B). </font><font style="vertical-align: inherit;">Dependendo do tipo de operandos, a fun√ß√£o executar√°:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos s√£o escalares (n√∫meros), a multiplica√ß√£o ser√° realizada; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos forem um vetor (matriz unidimensional) e escalar, a matriz ser√° multiplicada por um n√∫mero; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos forem vetoriais, ser√° realizada a multiplica√ß√£o escalar (a soma dos produtos por elementos); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos s√£o tensores (matriz multidimensional) e escalares, o vetor ser√° multiplicado por um n√∫mero; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos do tensor, o produto dos tensores ao longo do √∫ltimo eixo do primeiro argumento e do pen√∫ltimo segundo ser√° executado; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos s√£o matrizes, ent√£o o produto das matrizes √© executado (este √© um caso especial do produto dos tensores); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se os argumentos s√£o matriz e vetor, o produto da matriz e o vetor ser√£o executados (este tamb√©m √© um caso especial do produto de tensores). </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para executar as opera√ß√µes, os tamanhos correspondentes devem coincidir: para vetores de comprimento, para tensores, os comprimentos ao longo dos eixos ao longo dos quais os produtos em elementos ser√£o somados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considere exemplos com escalares e vetores:</font></font><br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  A = 2 B = 3 print(np.dot(A, B), '\n') #    A = np.array([2., 3., 4.]) B = 3 print(np.dot(A, B), '\n') #  A = np.array([2., 3., 4.]) B = np.array([-2., 1., -1.]) print(np.dot(A, B), '\n') #    A = np.array([[2., 3., 4.], [5., 6., 7.]]) B = 2 print(np.dot(A, B), '\n') Out: 6 [ 6. 9. 12.] -5.0 [[ 4. 6. 8.] [10. 12. 14.]]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Com os tensores, veremos apenas como a geometria da matriz resultante muda de tamanho: </font></font><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  ( 2)   ( 1) A = np.ones((5, 6)) B = np.ones(6) print('A:', A.shape, '\nB:', B.shape, '\nresult:', np.dot(A, B).shape, '\n\n') #  ( 2) A = np.ones((5, 6)) B = np.ones((6, 7)) print('A:', A.shape, '\nB:', B.shape, '\nresult:', np.dot(A, B).shape, '\n\n') #   A = np.ones((5, 6, 7, 8)) B = np.ones((1, 2, 3, 8, 4)) print('A:', A.shape, '\nB:', B.shape, '\nresult:', np.dot(A, B).shape, '\n\n') Out: A: (5, 6) B: (6,) result: (5,) A: (5, 6) B: (6, 7) result: (5, 7) A: (5, 6, 7, 8) B: (1, 2, 3, 8, 4) result: (5, 6, 7, 1, 2, 3, 4)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para executar um produto tensorial usando outros eixos, em vez dos definidos para ponto, voc√™ pode usar o tensordot com um eixo expl√≠cito: </font></font><br><br><pre> <code class="python hljs">A = np.ones((<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)) B = np.ones((<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) print(<span class="hljs-string"><span class="hljs-string">'A:'</span></span>, A.shape, <span class="hljs-string"><span class="hljs-string">'\nB:'</span></span>, B.shape, <span class="hljs-string"><span class="hljs-string">'\nresult:'</span></span>, np.tensordot(A, B, [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]).shape, <span class="hljs-string"><span class="hljs-string">'\n\n'</span></span>) Out: A: (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) B: (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>) result: (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indicamos explicitamente que usamos o terceiro eixo da primeira matriz e o segundo - do segundo (os tamanhos ao longo desses eixos devem corresponder). </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;up&gt;</font></font></a> <br><br><a name="p9"></a><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agregadores </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregadores s√£o m√©todos NumPy que permitem substituir dados por caracter√≠sticas integrais ao longo de alguns eixos. Por exemplo, voc√™ pode calcular o valor m√©dio, m√°ximo, m√≠nimo, varia√ß√£o ou alguma outra caracter√≠stica ao longo de qualquer eixo ou eixos e formar uma nova matriz a partir desses dados. A forma da nova matriz conter√° todos os eixos da matriz original, exceto aqueles ao longo dos quais o agregador foi contado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por exemplo, formaremos uma matriz com valores aleat√≥rios. Em seguida, encontramos o valor m√≠nimo, m√°ximo e m√©dio em suas colunas:</font></font><br><br><pre> <code class="python hljs">A = np.random.rand(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) print(<span class="hljs-string"><span class="hljs-string">'A\n'</span></span>, A, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'min\n'</span></span>, np.min(A, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'max\n'</span></span>, np.max(A, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'mean\n'</span></span>, np.mean(A, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'average\n'</span></span>, np.average(A, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: A [[<span class="hljs-number"><span class="hljs-number">0.58481838</span></span> <span class="hljs-number"><span class="hljs-number">0.32381665</span></span> <span class="hljs-number"><span class="hljs-number">0.53849901</span></span> <span class="hljs-number"><span class="hljs-number">0.32401355</span></span> <span class="hljs-number"><span class="hljs-number">0.05442121</span></span>] [<span class="hljs-number"><span class="hljs-number">0.34301843</span></span> <span class="hljs-number"><span class="hljs-number">0.38620863</span></span> <span class="hljs-number"><span class="hljs-number">0.52689694</span></span> <span class="hljs-number"><span class="hljs-number">0.93233065</span></span> <span class="hljs-number"><span class="hljs-number">0.73474868</span></span>] [<span class="hljs-number"><span class="hljs-number">0.09888225</span></span> <span class="hljs-number"><span class="hljs-number">0.03710514</span></span> <span class="hljs-number"><span class="hljs-number">0.17910721</span></span> <span class="hljs-number"><span class="hljs-number">0.05245685</span></span> <span class="hljs-number"><span class="hljs-number">0.00962319</span></span>] [<span class="hljs-number"><span class="hljs-number">0.74758173</span></span> <span class="hljs-number"><span class="hljs-number">0.73529492</span></span> <span class="hljs-number"><span class="hljs-number">0.58517879</span></span> <span class="hljs-number"><span class="hljs-number">0.11785686</span></span> <span class="hljs-number"><span class="hljs-number">0.81204847</span></span>]] min [<span class="hljs-number"><span class="hljs-number">0.09888225</span></span> <span class="hljs-number"><span class="hljs-number">0.03710514</span></span> <span class="hljs-number"><span class="hljs-number">0.17910721</span></span> <span class="hljs-number"><span class="hljs-number">0.05245685</span></span> <span class="hljs-number"><span class="hljs-number">0.00962319</span></span>] max [<span class="hljs-number"><span class="hljs-number">0.74758173</span></span> <span class="hljs-number"><span class="hljs-number">0.73529492</span></span> <span class="hljs-number"><span class="hljs-number">0.58517879</span></span> <span class="hljs-number"><span class="hljs-number">0.93233065</span></span> <span class="hljs-number"><span class="hljs-number">0.81204847</span></span>] mean [<span class="hljs-number"><span class="hljs-number">0.4435752</span></span> <span class="hljs-number"><span class="hljs-number">0.37060634</span></span> <span class="hljs-number"><span class="hljs-number">0.45742049</span></span> <span class="hljs-number"><span class="hljs-number">0.35666448</span></span> <span class="hljs-number"><span class="hljs-number">0.40271039</span></span>] average [<span class="hljs-number"><span class="hljs-number">0.4435752</span></span> <span class="hljs-number"><span class="hljs-number">0.37060634</span></span> <span class="hljs-number"><span class="hljs-number">0.45742049</span></span> <span class="hljs-number"><span class="hljs-number">0.35666448</span></span> <span class="hljs-number"><span class="hljs-number">0.40271039</span></span>]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com esse uso, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©dia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©dia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parecem sin√¥nimos. </font><font style="vertical-align: inherit;">Mas essas fun√ß√µes t√™m um conjunto diferente de par√¢metros adicionais. </font><font style="vertical-align: inherit;">Existem diferentes possibilidades para mascarar e ponderar dados m√©dios. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode calcular as caracter√≠sticas integrais em v√°rios eixos:</font></font><br><br><pre> <code class="python hljs">A = np.ones((<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)) print(<span class="hljs-string"><span class="hljs-string">'sum\n'</span></span>, np.sum(A, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'min\n'</span></span>, np.min(A, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'max\n'</span></span>, np.max(A, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'mean\n'</span></span>, np.mean(A, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: sum [<span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span>] min [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>] max [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>] mean [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste exemplo, outra soma integral caracter√≠stica √© considerada - a soma. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A lista de agregadores √© mais ou menos assim:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sum: sum e nansum - uma variante gerenciando corretamente com nan; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trabalho: prod e nanprod; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©dia e expectativa: m√©dia e m√©dia (nanmean), </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> h√° </font><s><font style="vertical-align: inherit;">nanaverage</font></s><font style="vertical-align: inherit;"> ;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mediana: mediana e nanmediana; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> percentil: percentil e nanpercentil; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varia√ß√£o: var e nanvar; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desvio padr√£o (raiz quadrada da varia√ß√£o): std e nanstd; </font></font></li><li>  : min  nanmin; </li><li>  : max  nanmax; </li><li>  ,   : argmin  nanargmin; </li><li>  ,   : argmax  nanargmax. </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No caso de usar argmin e argmax (respectivamente, nanargmin e nanargmax), voc√™ deve especificar um eixo ao longo do qual a caracter√≠stica ser√° considerada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ n√£o especificar um eixo, por padr√£o, todas as caracter√≠sticas consideradas ser√£o consideradas em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toda a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> matriz. </font><font style="vertical-align: inherit;">Nesse caso, argmin e argmax tamb√©m funcionam corretamente e localizam o √≠ndice do elemento m√°ximo ou m√≠nimo, como se todos os dados na matriz fossem esticados no mesmo eixo com o comando ravel (). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamb√©m deve-se observar que os m√©todos de agrega√ß√£o s√£o definidos n√£o apenas como m√©todos do m√≥dulo NumPy, mas tamb√©m para as pr√≥prias matrizes: a entrada np.aggregator (A, axes) √© equivalente √† entrada A.aggregator (axes), em que agregador significa uma das fun√ß√µes consideradas acima e por eixos - √≠ndices de eixo.</font></font><br><br><pre> <code class="python hljs">A = np.ones((<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)) print(<span class="hljs-string"><span class="hljs-string">'sum\n'</span></span>, A.sum((<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'min\n'</span></span>, A.min((<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'max\n'</span></span>, A.max((<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'mean\n'</span></span>, A.mean((<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)), <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) Out: sum [<span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span> <span class="hljs-number"><span class="hljs-number">50.</span></span>] min [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>] max [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>] mean [<span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>]</code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;up&gt;</font></font></a> <br><br><a name="p10"></a><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em vez de uma conclus√£o - um exemplo </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos criar um algoritmo para filtragem linear de imagens passa-baixas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para come√ßar, fa√ßa upload de uma imagem barulhenta. </font></font><br><br><img src="https://habrastorage.org/webt/sk/vx/re/skvxregibvdnuam6jqcq6edholy.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considere um fragmento da imagem para ver o ru√≠do: </font></font><br><br><img src="https://habrastorage.org/webt/ur/ex/q6/urexq6ndlc0hyjoccbgmrt23xuu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos filtrar a imagem usando um filtro gaussiano. </font><font style="vertical-align: inherit;">Mas, em vez de fazer a convolu√ß√£o diretamente (com itera√ß√£o), aplicamos a m√©dia ponderada das fatias de imagem deslocadas uma em rela√ß√£o √† outra:</font></font><br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">smooth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(I)</span></span></span><span class="hljs-function">:</span></span> J = I.copy() J[<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] = (J[<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span> + J[:<span class="hljs-number"><span class="hljs-number">-2</span></span>] // <span class="hljs-number"><span class="hljs-number">4</span></span> + J[<span class="hljs-number"><span class="hljs-number">2</span></span>:] // <span class="hljs-number"><span class="hljs-number">4</span></span>) J[:, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] = (J[:, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] // <span class="hljs-number"><span class="hljs-number">2</span></span> + J[:, :<span class="hljs-number"><span class="hljs-number">-2</span></span>] // <span class="hljs-number"><span class="hljs-number">4</span></span> + J[:, <span class="hljs-number"><span class="hljs-number">2</span></span>:] // <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> J</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aplicamos esta fun√ß√£o √† nossa imagem uma, duas e tr√™s vezes: </font></font><br><br><pre> <code class="python hljs">I_noise = cv2.imread(<span class="hljs-string"><span class="hljs-string">'sarajevo_noise.jpg'</span></span>) I_denoise_1 = smooth(I_noise) I_denoise_2 = smooth(I_denoise_1) I_denoise_3 = smooth(I_denoise_2) cv2.imwrite(<span class="hljs-string"><span class="hljs-string">'sarajevo_denoise_1.jpg'</span></span>, I_denoise_1) cv2.imwrite(<span class="hljs-string"><span class="hljs-string">'sarajevo_denoise_2.jpg'</span></span>, I_denoise_2) cv2.imwrite(<span class="hljs-string"><span class="hljs-string">'sarajevo_denoise_3.jpg'</span></span>, I_denoise_3)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtemos os seguintes resultados: </font></font><br><br><img src="https://habrastorage.org/webt/mv/1s/i1/mv1si1hpbk2v2kxdn9j5dwaskj0.jpeg"><br><br><img src="https://habrastorage.org/webt/xt/4h/tk/xt4htkohwjvr1hpdvqokrgugx0q.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com um √∫nico uso do filtro; </font></font><br><br><img src="https://habrastorage.org/webt/fl/cq/is/flcqisbvoidqfdp6pyabhs5t5u8.jpeg"><br><br><img src="https://habrastorage.org/webt/j2/bm/cg/j2bmcgqp5fceli_gstvdcthahn0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com dupla; </font></font><br><br><img src="https://habrastorage.org/webt/de/2c/ta/de2cta31kkhkspk0dxxleb6kbcu.jpeg"><br><br><img src="https://habrastorage.org/webt/rj/yt/ux/rjytuxx-xgw5-d7le_snkgzms-w.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr√™s vezes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pode-se observar que, com um aumento no n√∫mero de passagens do filtro, o n√≠vel de ru√≠do diminui. Mas isso tamb√©m reduz a clareza da imagem. Esse √© um problema conhecido com filtros lineares. Mas nosso m√©todo de denoising de imagem n√£o afirma ser √≥timo: isso √© apenas uma demonstra√ß√£o dos recursos do NumPy para implementar convolu√ß√£o sem itera√ß√µes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora vamos ver a convolu√ß√£o com a qual os nossos kernels s√£o equivalentes. Para fazer isso, submeteremos um √∫nico impulso de unidade a transforma√ß√µes e visualiza√ß√µes semelhantes. De fato, o impulso n√£o ser√° √∫nico, mas igual em amplitude a 255, uma vez que a pr√≥pria mistura √© otimizada para dados inteiros. Mas isso n√£o interfere na avalia√ß√£o da apar√™ncia geral dos n√∫cleos:</font></font><br><br><pre> <code class="python hljs">M = np.zeros((<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>)) M[<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-number"><span class="hljs-number">255</span></span> M1 = smooth(M) M2 = smooth(M1) M3 = smooth(M2) plt.subplot(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) plt.imshow(M1) plt.subplot(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) plt.imshow(M2) plt.subplot(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) plt.imshow(M3) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/xr/yd/rq/xrydrqb7rmtcm0ootv_7ttyqmgu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consideramos um conjunto longe de completo dos recursos do NumPy, espero que isso tenha sido suficiente para demonstrar todo o poder e a beleza dessa ferramenta! </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;up&gt;</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt469355/">https://habr.com/ru/post/pt469355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt469341/index.html">Holivar. Hist√≥ria do Runet. Parte 1. In√≠cio: hippies da Calif√≥rnia, bico e os anos 90</a></li>
<li><a href="../pt469345/index.html">Miss√£o at√¥mica no parque Bitsevsky</a></li>
<li><a href="../pt469349/index.html">Dudwstud - canal de aprendizado de matem√°tica e dados</a></li>
<li><a href="../pt469351/index.html">Intel Comet Lake-U e Comet Lake-Y: at√© 6 n√∫cleos para laptops finos e leves</a></li>
<li><a href="../pt469353/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel # 317 (23 a 29 de setembro)</a></li>
<li><a href="../pt469357/index.html">Corra, Gopher, corra! - sobre o que falaremos na GolangConf</a></li>
<li><a href="../pt469361/index.html">Dor e l√°grimas em Svelte 3</a></li>
<li><a href="../pt469367/index.html">Execute testes de unidade localmente no STM32CubeIDE no Windows</a></li>
<li><a href="../pt469369/index.html">Eventos digitais em Moscou, de 30 de setembro a 06 de outubro</a></li>
<li><a href="../pt469371/index.html">Descri√ß√£o da abordagem para organizar e testar c√≥digo usando o Redux Thunk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>