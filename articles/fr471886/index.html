<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë®‚Äçüëß‚Äçüë¶ ‚ùå üå°Ô∏è VMmanager 6: pr√©sentation de la box et comparaison avec la g√©n√©ration pr√©c√©dente üê± üë®üèº‚Äçüíª üßùüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le 8 octobre, une version en bo√Æte de VMmanager 6, le nouveau panneau de contr√¥le de virtualisation, a √©t√© lanc√©e. Maintenant, il peut √™tre install√© s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VMmanager 6: pr√©sentation de la box et comparaison avec la g√©n√©ration pr√©c√©dente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/471886/"><img src="https://habrastorage.org/webt/wr/u8/5k/wru85kpnvi_2y_f-vmiyqufvdmu.jpeg"><br><br><p>  Le 8 octobre, une version en bo√Æte de VMmanager 6, le nouveau panneau de contr√¥le de virtualisation, a √©t√© lanc√©e.  Maintenant, il peut √™tre install√© sur le serveur et utilis√© pour vendre des machines virtuelles ou g√©rer votre propre infrastructure.  Dans cet article, nous comparons la nouvelle g√©n√©ration avec la pr√©c√©dente - VMmanager 5 et VMmanager 6. <br></p><br><p>  Les deux panneaux prennent en charge la virtualisation KVM et g√®rent le serveur physique √† l'aide de libvirt. <br></p><br><p>  VMmanager 5 est sorti en 2013, VMmanager 6 - en 2019.  La nouvelle g√©n√©ration est plus pratique et plus r√©sistante au stress.  Prend en charge l'imagerie, la gestion des t√¢ches et la surveillance. <br></p><br><p>  Dans cet article, nous comparons deux g√©n√©rations de panneaux.  Parlons d'abord des diff√©rences conceptuelles: architecture, interface et r√©sistance aux charges.  Dans la deuxi√®me partie, nous verrons comment des t√¢ches identiques sont r√©solues dans deux panneaux. <br></p><a name="habracut"></a><br><p>  Plus d'informations sur le produit se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trouvent dans la section VMmanager 6 du</a> site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ISPsystem</a> . </p><br><h2>  Partie 1. Diff√©rences conceptuelles </h2><br><h3>  L'architecture </h3><br><p>  <strong>VMmanager 5</strong> √©tait un monolithe √©crit en C ++, ce qui compliquait inutilement √† certains endroits le d√©veloppement de choses simples. <br></p><br><p>  C'est pourquoi dans <strong>VMmanager 6,</strong> nous avons utilis√© Python pour des t√¢ches simples, telles que la configuration de n≈ìuds, la configuration de machines virtuelles, le travail avec libvirt.  Ce code est plus facile √† √©crire, √† d√©boguer et √† ¬´assembler¬ª.  Ils en ont parl√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans un autre article sur Habr√©</a> . <br></p><br><p>  T√¢ches o√π la d√©centralisation des donn√©es n'est pas terrible et une mise √† l'√©chelle horizontale est n√©cessaire, nous sommes pass√©s √† Golang, mettant en √©vidence la logique m√©tier dans les microservices.  Curieusement, nous avons √©galement gagn√© en vitesse et en facilit√© de d√©veloppement.  Le reste de la logique continue de tirer parti du monolithe en C ++ - fiabilit√©, vitesse et coh√©rence des donn√©es. <br></p><br><p>  De plus, VMmanager 6 est livr√© dans des conteneurs Docker.  VMmanager 5 a √©t√© install√© √† l'aide de packages.  Un avantage certain de la conteneurisation est la haute pr√©visibilit√© du comportement des applications (l'environnement est toujours le m√™me).  Il est devenu plus facile de reproduire des situations ou des probl√®mes, il n'est pas n√©cessaire de faire de nombreux assemblages pour diff√©rents syst√®mes d'exploitation, le d√©ploiement est plus rapide. <br></p><br><p> Dans VMmanager 5, l'installation de packages comportait de nombreuses d√©pendances pouvant entrer en conflit avec des packages d√©j√† install√©s.  Il y avait des situations o√π la suppression d'un package inoffensif avec l'option <em>¬´-y¬ª</em> supprimait le panneau entier par d√©pendance. <br></p><br><blockquote>  Autre changement majeur: VMmanager 6 prend en charge les images.  Une image est une copie compl√®te d'un disque VM.  Il est utilis√© lors de la cr√©ation de machines virtuelles et de sauvegardes.  √Ä ne pas confondre avec les images ISO dans VMmanager 5 - ce sont deux technologies diff√©rentes. </blockquote><br><h3>  R√©sistance √† la charge </h3><br><p>  Une cons√©quence importante des changements d'architecture est une r√©sistance accrue √† la charge. <br></p><br><p>  <strong>VMmanager 5</strong> ne r√©siste pas √† de lourdes charges: si plus de 500 machines virtuelles sont cr√©√©es, il commence √† fonctionner lentement.  Pour contourner cette limitation, les fournisseurs installent un autre VMmanager et y cr√©ent de nouvelles machines virtuelles.  Les grands fournisseurs peuvent avoir plusieurs panneaux: selon le nombre d'emplacements ou les tarifs. <br></p><br><p>  Dans VMmanager 5, beaucoup a √©t√© fait dans le processus principal et, en r√®gle g√©n√©rale, dans un seul thread.  Pour g√©rer les op√©rations longues, il y avait un module longtask (l'anc√™tre de taskmanager, un service de r√©partition des t√¢ches dans la sixi√®me version), mais nous n'avons pas imm√©diatement commenc√© √† l'utiliser activement.  Il n'y avait pas de m√©canisme de verrouillage dans la t√¢che longue, uniquement des files d'attente dans lesquelles les t√¢ches pouvaient √™tre ex√©cut√©es strictement une par une dans l'ordre dans lequel elles √©taient arriv√©es.  Une t√¢che ne pouvait pas tenir sur plusieurs lignes.  Les op√©rations √† longue t√¢che elles-m√™mes √©taient des fichiers sp√©ciaux sur disque.  Et un grand nombre de fichiers dans un r√©pertoire cr√©e une charge s√©rieuse sur tous les syst√®mes UNIX.  Cela n'a pas permis de r√©partir les t√¢ches entre plusieurs r√©partiteurs / serveurs. <br></p><br><p>  La charge dans <strong>VMmanager 6</strong> est r√©pondue par un service sp√©cial de gestion des t√¢ches - Taskmanager.  D√©sormais, la plupart des op√©rations sont ex√©cut√©es diff√©r√©es dans des processus distincts.  Cela augmente la r√©activit√© du syst√®me - une demande distincte ne peut pas bloquer son fonctionnement;  et augmente √©galement la stabilit√© - si quelque chose se passe mal, cela n'affectera pas l'ensemble du syst√®me, tout au plus certaines op√©rations.  Un syst√®me flexible de verrous et une isolation √©lev√©e des processus individuels permettent une mise en file d'attente et une ex√©cution optimales des t√¢ches en parall√®le, si possible. <br></p><br><p>  Toujours dans la nouvelle version, il a √©t√© d√©cid√© de s√©parer le lecteur et l'√©crivain (processus qui sont responsables des op√©rations de lecture et d'√©criture dans le syst√®me).  Contrairement √† VMmanager 5, l'utilisateur du panneau peut toujours obtenir des informations, car les threads de lecture peuvent toujours fonctionner en parall√®le, quel que soit le nombre d'op√©rations d'√©criture en cours. <br></p><br><h3>  Interface </h3><br><p>  La diff√©rence la plus notable entre les deux g√©n√©rations est l'interface.  Et ce n'est pas seulement une question de design.  Diff√©rences de vitesse et de r√©activit√©. <br></p><br><p>  L'interface de <strong>VMmanager 5</strong> est obsol√®te √† la fois en apparence et en ¬´comportement¬ª.  Le premier est visible √† l'≈ìil nu, et le second est visible pendant de longues op√©rations: si vous arr√™tez la machine virtuelle ou lancez la migration de masse, une barre de progression de blocage appara√Ætra √† l'√©cran.  Si l'utilisateur effectue de nombreuses op√©rations de ce type, quelqu'un d'autre attendra simplement de voir la liste des machines virtuelles. <br></p><br><img src="https://habrastorage.org/webt/z6/id/i4/z6idi4wag3txvgphy0mxs8vh3v8.png"><br><p>  <em>Barre de progression de blocage lorsqu'une machine virtuelle s'arr√™te dans VMmanager 5</em> <br></p><br><p>  Parall√®lement aux modifications de conception, <strong>VMmanager 6</strong> est venu avec des modifications architecturales c√¥t√© client.  Auparavant, les mod√®les de page √©taient g√©n√©r√©s √† partir de fichiers xml c√¥t√© serveur, maintenant c'est SPA (Single Page Application) bas√© sur le framework Angular populaire.  L'application se compose de modules ind√©pendants s√©par√©s (t√©l√©charg√©s sur demande) et de composants.  Les composants sont allou√©s √† la biblioth√®que et sont d√©velopp√©s conform√©ment au syst√®me de conception. <br></p><br><p>  Pour augmenter la r√©activit√©, la communication avec le serveur se fait √† l'aide de l'API REST et de WebSocket.  Dans la plupart des cas, nous essayons d'utiliser des op√©rations non bloquantes ou retard√©es.  La partie client est notifi√©e de toute modification de l'application, qu'il s'agisse de cr√©er une machine virtuelle ou de changer l'√©tat d'un n≈ìud dans une table, via un service sp√©cial.  Ce service se renseigne sur les modifications du stockage de valeurs-cl√©s, o√π les √©v√©nements proviennent de tous les microservices. <br></p><br><p>  Ainsi, l'interface VMmanager 6 est non seulement devenue plus moderne, mais aussi plus pratique, r√©active et ¬´conviviale¬ª. <br></p><br><p><img src="https://habrastorage.org/webt/zn/ul/yt/znulyte1b3fvzwsc_luiu-148-m.png"><br>  <em>Lorsqu'une machine virtuelle s'arr√™te dans VMmanager 6, l'interface n'est pas bloqu√©e.</em>  <em>Le statut peut √™tre observ√© dans la liste des machines virtuelles</em> <br></p><br><h2>  Partie 2. R√©solution de probl√®mes </h2><br><h3>  Cr√©ation de machines virtuelles </h3><br><p>  Passons aux t√¢ches.  Le premier est la cr√©ation d'une VM. <br></p><br><p>  <strong>VMmanager 5</strong> cr√©e une machine virtuelle en 8-10 minutes - longtemps.  En effet, le processus se d√©roule par les moyens habituels: les packages sont t√©l√©charg√©s, d√©ploy√©s, install√©s.  Pour que les clients n'aient pas √† attendre, les fournisseurs √©crivent des plug-ins: ils cr√©ent une machine virtuelle √† l'avance, et lorsque le client arrive, r√©affectez-la.  Un utilisateur √©lev√© peut cr√©er lui-m√™me une machine virtuelle, mais vous devrez remplir un formulaire complexe. <br></p><br><img src="https://habrastorage.org/webt/qv/lr/mt/qvlrmtkhnnevdghy0s-8ugev5bm.png"><br><p>  <em>Formulaire de cr√©ation de machine virtuelle dans VMmanager 5</em> <br></p><br><p>  <strong>VMmanager 6</strong> utilise un nouveau m√©canisme pour cr√©er des machines virtuelles.  Le panneau ne t√©l√©charge pas les packages, mais d√©ploie une copie de l'image.  Pas besoin d'√©crire des plugins suppl√©mentaires: l'√©mission de VM m√™me sans eux est rapide - de 1 minute 20 secondes √† 2 minutes.  Les pannes de r√©seau ou la sortie d'une nouvelle version du syst√®me d'exploitation n'affecte plus l'installation, et si elle d√©marre, elle prendra d√©finitivement fin.  La forme de cr√©ation d'une VM est devenue beaucoup plus simple. <br></p><br><img src="https://habrastorage.org/webt/-f/s8/af/-fs8afiwezzgp7oxy1c1kfof9dq.png"><br><p>  <em>Formulaire de cr√©ation de machine virtuelle dans VMmanager 6</em> <br></p><br><h3>  Cr√©ation de mod√®les de syst√®me d'exploitation </h3><br><p>  Les fournisseurs vendent des machines virtuelles √† leurs clients avec WordPress, 1C-Bitrix ou d'autres logiciels.  Les entreprises qui utilisent VMmanager pour leurs besoins internes cr√©ent un grand nombre de machines virtuelles du m√™me type pour tester, d√©ployer des services internes et leurs propres logiciels.  La configuration de chaque machine est la routine de l'administrateur ou du testeur.  Le panneau de contr√¥le permet de l'automatiser: une fois que vous avez configur√© le mod√®le et cr√©√© des VPS pr√©configur√©s √† partir de celui-ci. <br></p><br><p>  Dans <strong>VMmanager 5,</strong> les mod√®les de syst√®me d'exploitation sont stock√©s dans des r√©f√©rentiels.  Pour ajouter votre mod√®le, vous devez cr√©er un r√©f√©rentiel et pr√©parer les fichiers de configuration du syst√®me d'exploitation.  Le r√©f√©rentiel est cr√©√© sur un serveur distinct.  Le mod√®le se compose d'une description XML et d'un fichier de configuration, ainsi que de tous les fichiers n√©cessaires pour cr√©er le syst√®me d'exploitation.  L'administrateur doit pr√©parer le mod√®le.  La t√¢che n'est pas facile et il est peu probable qu'elle soit r√©solue sans instructions. <br></p><br><img src="https://habrastorage.org/webt/or/d6/-b/ord6-bjjj1poidkehamw-bkp8ue.png"><br><p>  <em>Mod√®les de syst√®me d'exploitation dans VMmanager 5. Vous pouvez d√©marrer l'installation √† partir de l'interface, mais vous ne pouvez pas configurer le mod√®le</em> <br></p><br><p>  Le mod√®le de syst√®me d'exploitation dans <strong>VMmanager 6</strong> est une image disque d'une machine virtuelle avec un syst√®me d'exploitation install√©.  Pour cr√©er un mod√®le avec un logiciel suppl√©mentaire, il suffit de le configurer sur une machine virtuelle et de cr√©er une image de son disque.  Apr√®s cela, toutes les machines virtuelles cr√©√©es √† partir de cette image seront configur√©es de la m√™me mani√®re.  Seuls les param√®tres r√©seau et l'acc√®s √† la machine virtuelle changeront - ils ne sont pas √©crits sur l'image.  La t√¢che est simple, l'administrateur s'en sortira sans instructions.  Bien s√ªr, les amateurs de scripts peuvent toujours les utiliser - il existe une telle possibilit√© dans VMmanager 6. <br></p><br><p><img src="https://habrastorage.org/webt/2m/gl/1r/2mgl1rsgj0xo9tl46v4s7dz0zis.png"><br>  <em>Cr√©ation d'une machine virtuelle √† partir d'une image utilisateur dans VMmanager 6</em> <br></p><br><h3>  Statistiques et suivi </h3><br><p>  Les services de statistiques et de surveillance sont des aides indispensables pour tout administrateur syst√®me.  Ils vous permettent de r√©pondre rapidement aux situations d'urgence qui se produisent sur les n≈ìuds et les machines virtuelles.  Un afflux soudain de visiteurs, une attaque DDoS ou un script d√©fectueux peut fortement charger la machine virtuelle.  Si vous n'agissez pas, il √©chouera, ainsi que le site ou le projet qui s'y trouve.  C'est pratique lorsque le syst√®me de surveillance est inclus dans le panneau. <br></p><br><p>  <strong>VMmanager 5</strong> dispose d'un m√©canisme de surveillance de l'√©tat des machines virtuelles.  Toutes les 10 minutes, il analyse le nombre de paquets envoy√©s sur le r√©seau et le nombre de demandes d'√©criture sur le disque de la machine virtuelle.  Les 10 principaux n≈ìuds du trafic sortant, de la charge du processeur et de la m√©moire sont affich√©s sur la page principale du panneau.  Il n'y a aucune notification par mail ou messagerie instantan√©e. <br></p><br><img src="https://habrastorage.org/webt/cb/14/2l/cb142lm6wgzfkmn1plz5a-w4pe8.png"><br><p>  <em>Statistiques sur les n≈ìuds du VMmanager 5. S'il n'y a pas suffisamment de donn√©es, les graphiques sont moches</em> <br></p><br><p>  <strong>VMmanager 6</strong> surveille √©galement l'√©tat des machines virtuelles et des n≈ìuds, comme pr√©c√©demment, collecte des statistiques sur l'utilisation des ressources.  Mais suivant les besoins des utilisateurs, nous avons d√©velopp√© un nouveau syst√®me de surveillance en ligne pour les n≈ìuds et les VM.  Il surveille la consommation de RAM, de CPU et de disque dur, surveille l'activit√© du r√©seau.  Si la charge devient critique, il est impossible de ne pas le remarquer - les donn√©es de surveillance sont affich√©es dans les listes de n≈ìuds et de machines virtuelles, ainsi que sur les cartes individuelles de ces entit√©s.  Apr√®s avoir visit√© la liste des n≈ìuds, l'administrateur peut imm√©diatement remarquer lequel des serveurs est surcharg√© et par quel indicateur.  Le tableau de bord est en cours de d√©veloppement, l'apparence est attendue dans le panel cette ann√©e. <br></p><br><img src="https://habrastorage.org/webt/ub/il/bz/ubilbz57ku3hkiwxw7cc7ogakxy.png"><br><p>  <em>Carte de noeud dans VMmanager 6. Voici des informations sur la charge et les statistiques sur les machines virtuelles cr√©√©es</em> <br></p><br><h3>  Mail </h3><br><p>  Cela est pratique lorsque le panneau rend compte d'√©v√©nements ou de probl√®mes actuels.  Pour ce faire, il doit prendre en charge l'envoi de messages. <br></p><br><p>  Il n'y a aucun moyen de g√©rer le courrier dans <strong>VMmanager 5</strong> .  Seul un administrateur peut r√©initialiser un mot de passe oubli√©; vous ne pouvez pas le restaurer automatiquement.  Les notifications de cr√©ation de machine virtuelle sont envoy√©es par BILLmanager.  Ajoutez un nouvel √©v√©nement pour les alertes - le tout. <br></p><br><p>  <strong>VMmanager 6</strong> peut envoyer du courrier.  Des notifications arrivent d√©j√† sur la cr√©ation et la r√©installation de machines virtuelles, des lettres de r√©cup√©ration de mot de passe.  Lorsque la facturation est activ√©e, l'envoi de messages √† partir du panneau peut √™tre d√©sactiv√©.  √Ä l'avenir, il y aura des notifications de probl√®mes survenus sur les n≈ìuds de machine virtuelle.  Il est √©galement pr√©vu de mettre en place l'envoi de notifications aux messageries instantan√©es. <br></p><br><h3>  Gestion des t√¢ches </h3><br><p>  Il ne suffit pas d'en apprendre davantage sur le probl√®me, vous devez trouver rapidement sa cause et le r√©soudre.  Pourquoi la machine virtuelle n'a pas cr√©√© ou le script ne s'est pas ex√©cut√©, quelles op√©rations dans le syst√®me √©chouent souvent - tout cela peut √™tre trouv√© dans la liste des t√¢ches VMmanager 6. <br></p><br><p>  <strong>VMmanager 5</strong> n'a pas de m√©canisme de surveillance des t√¢ches, car il n'y avait pas de m√©canisme de t√¢ches lui-m√™me (voir la premi√®re partie de l'article).  L'ex√©cution partielle des t√¢ches en arri√®re-plan peut √™tre surveill√©e dans la section "√âtat du syst√®me".  Vous pouvez voir l'heure de d√©but et de fin, ainsi que l'√©tat - termin√© avec succ√®s ou avec une erreur.  Une op√©ration de t√¢che longue bloqu√©e peut √™tre interrompue de force.  Mais si la machine virtuelle n'a pas √©t√© cr√©√©e, vous ne pourrez pas en trouver la raison √† partir du panneau: vous devrez prendre l'ID et aller dans la console "grab logs". <br></p><br><img src="https://habrastorage.org/webt/vo/vt/ls/vovtlsh6e0mkpfmnsddsjkfvuhk.png"><br><p>  <em>Gestion des t√¢ches dans VMmanager 5. Vous pouvez voir l'heure et l'√©tat de d√©marrage ou terminer le script</em> <br></p><br><p>  <strong>L'</strong> utilisateur de <strong>VMmanager 6</strong> g√®re les op√©rations dans la "Liste des t√¢ches".  Il stocke des informations sur les op√©rations en cours et termin√©es sur les machines virtuelles, les n≈ìuds et les mod√®les de syst√®me d'exploitation.  Par la dur√©e des t√¢ches, vous pouvez suivre les mod√®les: quelle op√©ration a pris quel temps, qui l'a d√©marr√©e.  S'il a √©chou√©, le journal est visible - il est affich√© dans l'interface.  Si le script ne s'ex√©cute pas, un code d'erreur appara√Ætra dans l'interface.  Effacez imm√©diatement quoi faire. <br></p><br><img src="https://habrastorage.org/webt/hc/l1/jq/hcl1jq1p1ph_ihcpxgebcg2uza4.png"><br><p>  <em>La liste des t√¢ches dans VMmanager 6. Vous pouvez comprendre qui, quoi et quand</em> <br></p><br><img src="https://habrastorage.org/webt/dv/zk/nb/dvzknb79x4mo30uwsnseuq87x2g.png"><br><p>  <em>Carte de la t√¢che qui s'est termin√©e avec une erreur.</em>  <em>Un journal est visible directement dans le panneau - vous n'avez pas besoin de "manger quoi que ce soit" dans la console</em> <br></p><br><h3>  Sauvegardes </h3><br><p>  C'est l'une des t√¢ches qui est r√©solue diff√©remment dans deux panneaux. <br></p><br><p>  <strong>VMmanager 5.</strong> Vous pouvez cr√©er des copies de toutes ou de machines virtuelles sp√©cifiques.  Les sauvegardes sont stock√©es sur le disque local ou sur un stockage FTP distant - une ou plusieurs.  La description XML de la machine virtuelle est copi√©e, des copies de ses disques virtuels, un vidage de m√©moire sont cr√©√©s, et tout cela est compress√© dans l'archive. <br></p><br><img src="https://habrastorage.org/webt/nn/hd/ms/nnhdmshiknknbhacr6wryd3uove.png"><br><p>  <em>Sauvegarde de machines virtuelles dans VMmanager 5</em> <br></p><br><p>  <strong>VMmanager 6</strong> .  Il n'y a pas de sauvegarde au sens habituel - tout est stock√© dans la base de donn√©es.  Si le panneau √©choue, mais que la base de donn√©es est enregistr√©e, il ne sera pas difficile de restaurer le syst√®me.  Le r√¥le des sauvegardes de machines virtuelles est assur√© par des images.  Vous pouvez restaurer une machine virtuelle endommag√©e √† partir d'une image si n√©cessaire.  Maintenant, les images sont cr√©√©es avec VM arr√™t√©e, mais √† l'avenir, elles peuvent √™tre cr√©√©es sans arr√™t et vendues via la facturation. <br></p><br><img src="https://habrastorage.org/webt/t8/zi/2t/t8zi2ttnnuhyfvfvhwsaclqocqu.png"><br><p>  <em>Cr√©ation d'une image dans VMmanager 6</em> <br></p><br><h3>  Prise en charge native du centre de donn√©es Hetzner </h3><br><p>  Hetzner est un centre de donn√©es populaire parmi les fournisseurs russes.  Il utilise la s√©curit√© des ports pour la protection, donc lorsque vous travaillez avec lui, des param√®tres r√©seau sp√©ciaux sont n√©cessaires. <br></p><br><p>  Dans <strong>VMmanager 5, le</strong> r√©seau des n≈ìuds Hetzner doit √™tre configur√© manuellement: modifiez les fichiers de configuration du panneau, configurez l'interface r√©seau et le pont r√©seau du serveur et activez le transfert.  En m√™me temps, un panneau ne peut g√©rer qu'un seul cluster - si le fournisseur a ses propres serveurs en plus de ceux lou√©s par Hetzner, ils doivent √™tre configur√©s dans un panneau s√©par√©. <br></p><br><p>  <strong>VMmanager 6</strong> prend en charge Hetzner natif.  L'administrateur ajoute un cluster de type Hetzner et connecte les serveurs.  Apr√®s cela, le routage suit le mod√®le de ce centre de donn√©es, les param√®tres de la machine virtuelle sont d√©finis en fonction du type de cluster dans lequel ils se trouvent.  En m√™me temps, dans le m√™me panneau, il peut y avoir des clusters avec d'autres param√®tres r√©seau.  Soit dit en passant, la gestion de plusieurs clusters est l'une des principales fonctionnalit√©s de VMmanager 6. <br></p><br><img src="https://habrastorage.org/getpro/habr/post_images/a34/b36/cbe/a34b36cbe37fc39647bbe41c9192c7e5.png"><br><p>  <em>Formulaire de cr√©ation de cluster de type Hetzner dans VMmanager 6</em> <br></p><br><h3>  Stockage local </h3><br><p>  <strong>VMmanager 5</strong> prend en charge le stockage de fichiers et LVM.  Dans un cluster, il peut y avoir des n≈ìuds avec diff√©rents types de stockage (comme le temps l'a montr√©, le m√©canisme s'est av√©r√© non r√©clam√© et a n√©cessit√© beaucoup de ressources).  Le panneau prend √©galement en charge un grand nombre de types diff√©rents de stockage connect√© au r√©seau.  Dans la sixi√®me version, dans les prochaines versions, nous impl√©menterons la prise en charge de la plus populaire d'entre elles - Ceph-storage. <br></p><br><p>  <strong>VMmanager 6</strong> prend en charge le stockage de fichiers et LVM.  Dans un cluster, il ne peut y avoir de n≈ìuds avec diff√©rents types de stockage.  Cela √©limine les probl√®mes de migration - ils sont in√©vitables si certains des disques sont dans le stockage de fichiers, et certains dans LVM. <br></p><br><h3>  Configuration requise </h3><br><p>  <strong>VMmanager 5</strong> : un serveur propre avec CentOS 6 et 7, 100-150 Go pour la partition racine. <br></p><br><p>  <strong>VMmanager 6</strong> : un serveur propre avec CentOS 7, un processeur dual-core avec une fr√©quence de 3 GHz, 4 Go de RAM, 40 Go d'espace disque.  Le serveur n'a pas besoin d'√™tre en fer, le virtuel fera l'affaire. <br></p><br><h3>  Prix ‚Äã‚Äã/ Transition </h3><br><p>  <strong>VMmanager 5</strong> co√ªte 8 euros par n≈ìud par mois, 80 - si vous achetez pour un an.  Chaque nouveau n≈ìud co√ªte 8 euros.  D√©sormais, seuls ceux qui ont d√©j√† achet√© une licence pour VMmanager 5 peuvent l'acheter. <br></p><br><p>  <strong>Le co√ªt de VMmanager 6 se</strong> compose de deux parties: le prix des n≈ìuds et un ensemble de machines virtuelles. <br></p><br><ul><li>  Les n≈ìuds sont vendus un √† la fois, √† 4 euros / mois pour chacun. </li><li>  Les machines virtuelles sont vendues en packages.  Le forfait minimum comprend 20 VM et co√ªte 8 euros / mois. </li></ul><br><p>  Pour les clients disposant de licences VMmanager 5 actives, une offre sp√©ciale est valable pour l'achat de VMmanager 6. Les conditions et les d√©tails de la migration peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans l'annonce sur le site Web ISPsystem</a> . <br></p><br><h3>  Conclusion </h3><br><p>  Les cinqui√®me et sixi√®me g√©n√©rations de VMmanager conviennent √† la gestion de la virtualisation.  Mais la diff√©rence entre eux est grande.  Pour r√©sumer: <br></p><br><ul><li>  <strong>VMmanager 5</strong> doit √™tre utilis√© pour r√©soudre des t√¢ches non standard: lorsque vous avez besoin d'images ISO.  Et aussi - des instantan√©s et des stockages r√©seau (iSCSI, NFS, Ceph, GlusterFS). </li><li>  <strong>VMmanager 6 est</strong> plus pratique et plus rapide, r√©siste √† de lourdes charges et convient √† presque toutes les t√¢ches.  D'ici la fin de l'ann√©e, nous pr√©voyons d'ajouter la prise en charge d'IPv6, des magasins Ceph, ainsi qu'un tableau de bord administrateur et une notification des probl√®mes au courrier et au messager. </li></ul><br><p>  VMmanager 6 a d√©j√† √©t√© √©valu√© par 30 fournisseurs.  Avis - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans l'annonce</a> sur le site Web ISPsystem. </p><br><p>  Les d√©tails et sp√©cificit√©s maximum sont dans la documentation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VMmanager 5</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VMmanager 6</a> . <br></p><br><br><blockquote>  Vous pouvez essayer gratuitement VMmanager 6. La version d'essai est valable 30 jours.  Pour l'utiliser, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">laissez une demande</a> et suivez les instructions de la lettre de r√©ponse. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471886/">https://habr.com/ru/post/fr471886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471874/index.html">Comment nous avons contourn√© les directives d'examen et lanc√© un serveur par t√©l√©phone</a></li>
<li><a href="../fr471876/index.html">PDU et All-All-All: distribution d'alimentation en rack</a></li>
<li><a href="../fr471880/index.html">Id√©e pour Geek Halloween, ou le temps de choisir GeekMask</a></li>
<li><a href="../fr471882/index.html">Une liste ouverte d'√©v√©nements PHP, de conf√©renciers et d'organisateurs sur GitHub</a></li>
<li><a href="../fr471884/index.html">10 utilitaires ApexSQL gratuits pour g√©rer les bases de donn√©es Microsoft SQL Server</a></li>
<li><a href="../fr471890/index.html">Inf√©rence variationnelle - qu'est-ce que c'est et que mange-t-elle?</a></li>
<li><a href="../fr471892/index.html">6 histoires pratiques de nos jours de semaine SRE</a></li>
<li><a href="../fr471896/index.html">Le livre de jeu int√©rieur. Fonctionnalit√©s r√©seau dans le nouveau moteur Ansible 2.9</a></li>
<li><a href="../fr471904/index.html">Planificateur de ressources chez HPE InfoSight</a></li>
<li><a href="../fr471906/index.html">Les dangers des optimisations incorrectes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>