<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéá üë©üèº‚Äçü§ù‚Äçüë©üèª üåÑ Fonctions de documentation des bases de donn√©es PostgreSQL. Premi√®re partie ‚öæÔ∏è üéµ üöó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours du travail avec PostgreSQL, plus d'une centaine de fonctions pour travailler avec les r√©pertoires syst√®me se sont accumul√©es: pg_class, pg_at...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctions de documentation des bases de donn√©es PostgreSQL. Premi√®re partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415575/">  Au cours du travail avec PostgreSQL, plus d'une centaine de fonctions pour travailler avec les r√©pertoires syst√®me se sont accumul√©es: pg_class, pg_attribute, pg_constraints, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/rx/ta/zcrxta08dnfat5cqpgid4lyq7by.png"></div><br>  Que faire avec eux?  Ils sont utilis√©s relativement rarement.  Inclure dans tout projet?  Le client de Krasnoyarsk ne paiera pas de telles "absurdit√©s".  Et pourtant, si elles sont utiles √† quelqu'un d'autre qu'√† l'auteur.  Et il a d√©cid√© de les mettre, comme des livres lus, dans un placard public pour ceux qui le souhaitent. <br><a name="habracut"></a><br>  Quelqu'un veut les utiliser dans leur travail.  Et quelqu'un d'autre que son exp√©rience avec les catalogues syst√®me. <br><br>  Mais pour ne pas transformer la publication en une √©num√©ration ennuyeuse, on ne sait pas pourquoi les fonctions ont √©t√© cr√©√©es, j'ai d√©cid√© de m'attarder sur celles d'entre elles qui peuvent √™tre unies par un objectif commun.  Par cons√©quent, les fonctions utilis√©es pour afficher une liste √©tendue de caract√©ristiques d'une table de base de donn√©es arbitraire sont s√©lectionn√©es. <br><br>  La liste √©tendue des caract√©ristiques de la table de base de donn√©es est renvoy√©e par la fonction <b>admtf_Table_ComplexFeatures</b> , qui sera appel√©e la fonction head dans cet article.  Ainsi, l'article se limitera √† consid√©rer les fonctions qui sont appel√©es dans le processus d'ex√©cution de la fonction t√™te. <br><br>  La premi√®re moiti√© de l'article fournit des commentaires sur la mise en ≈ìuvre des fonctions.  Le second est le code source des fonctions.  Pour les lecteurs qui ne sont int√©ress√©s que par les textes sources, nous sugg√©rons de passer imm√©diatement √† l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">annexe</a> . <br><p>  <b>Voir aussi</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Deuxi√®me partie</a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Troisi√®me partie</a> .</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La fin (quatri√®me partie)</a> .</b> <br></p><br><br><a name="ExpFeatures"></a><br><h3>  De quelles fonctionnalit√©s avanc√©es parlons-nous? </h3><br>  Afin d'avoir une id√©e de ce que l'on entend par les caract√©ristiques √©tendues de la table de base de donn√©es, nous commen√ßons par examiner la liste de caract√©ristiques suivante.  La liste contient les caract√©ristiques de la table de base de donn√©es Street retourn√©e par <b>admtf_Table_ComplexFeatures ( <i>'public'</i> , <i>'street'</i> )</b> . <br><p>  Le tableau ci-dessous contient une liste abr√©g√©e des fonctionnalit√©s de la table Street.  Un ensemble complet de caract√©ristiques de ce tableau est donn√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans les documents suppl√©mentaires de l'annexe 2.</a> <br><br>  <strong>Tableau 1. Fonctions avanc√©es de la table Street.</strong> <br><img src="https://habrastorage.org/webt/zj/5x/jn/zj5xjnygaeedplccbe_itjr7fpu.png"><br></p><div class="spoiler">  <b class="spoiler_title">La version texte du tableau de la figure</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5">  Cat√©gorie </th><th width="5">  Non. </th><th width="15">  Le titre </th><th width="20">  Commentaire </th><th width="20">  type </th><th width="20">  Type de base </th><th width="5">  ?  pas nul </th></tr><tr><td width="5">  tbl </td><td width="5">  0 </td><td width="15">  rue </td><td width="20">  Liste des rues dans les colonies </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  att </td><td width="5">  1 </td><td width="15">  wcrccode </td><td width="20">  Code pays </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  2 </td><td width="15">  localityid </td><td width="20">  ID de communaut√© </td><td width="20">  localityid </td><td width="20">  entier </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  3 </td><td width="15">  streetid </td><td width="20">  ID rue du village </td><td width="20">  streetid </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  4 </td><td width="15">  streettypeacrm </td><td width="20">  Acronyme de la rue </td><td width="20">  streettypeacrm </td><td width="20">  personnage (8) </td><td width="5">  f </td></tr><tr><td width="5">  att </td><td width="5">  5 </td><td width="15">  nom de rue </td><td width="20">  Nom de la rue </td><td width="20">  streettypeacrm </td><td width="20">  varchar (150) </td><td width="5">  t </td></tr><tr><td width="5">  pk </td><td width="5">  0 </td><td width="15">  xpkstreet </td><td width="20">  Cl√© primaire de la table de rue </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  pkatt </td><td width="5">  1 </td><td width="15">  wcrccode </td><td width="20">  Code pays </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  fk01 </td><td width="5">  1 </td><td width="15">  fk_street_locality </td><td width="20">  Cl√© √©trang√®re de table </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  fk02 </td><td width="5">  2 </td><td width="15">  fk_street_streettype </td><td width="20">  Cl√© √©trang√®re de table </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx01 </td><td width="5">  1 </td><td width="15">  xie1street </td><td width="20">  Index par type et nom de rue de la colonie </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx02 </td><td width="5">  2 </td><td width="15">  xie2street </td><td width="20">  Code postal </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx03 </td><td width="5">  3 </td><td width="15">  xie3street </td><td width="20">  Index des noms de rue de toutes les colonies </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx04 </td><td width="5">  4 </td><td width="15">  xpkstreet </td><td width="20">  L'index unique (cl√© primaire) de la table de rue </td><td width="20"></td><td width="20"></td><td width="5"></td></tr></tbody></table><br></div></div><br><p>  En √©num√©rant l'hostilit√© √† cet ensemble de lettres et de chiffres, vous pouvez voir que nous parlons des caract√©ristiques habituelles d'une table de base de donn√©es: </p><br><ul><li>  Noms de table; </li><li>  La liste des attributs de table et leurs types; </li><li>  La cl√© primaire et la liste des cl√©s √©trang√®res de la table, ainsi que les attributs de la table qui les composent; </li><li>  Une liste d'index de table. </li></ul><br><p>  L'unicit√© de chaque entr√©e de la liste des caract√©ristiques est assur√©e par les valeurs des champs ¬´cat√©gorie¬ª et le num√©ro de s√©rie (¬´N ¬∞¬ª) de la caract√©ristique. </p><br><br>  <strong>Tableau 2. Cat√©gories de caract√©ristiques du tableau.</strong> <br><img src="https://habrastorage.org/webt/sy/j9/5z/syj95z_zta0nii9_9-n7zaxzq3q.png"><br><div class="spoiler">  <b class="spoiler_title">La version texte du tableau de la figure</b> <div class="spoiler_text"><table><tbody><tr><th>  Acronyme </th><th>  Rendez-vous </th></tr><tr><td>  tb </td><td>  Caract√©ristiques du tableau </td></tr><tr><td>  att </td><td>  Caract√©ristiques des attributs de table </td></tr><tr><td>  seq </td><td>  Caract√©ristiques de s√©quence </td></tr><tr><td>  pk </td><td>  Caract√©ristiques principales principales </td></tr><tr><td>  pkAtt </td><td>  Caract√©ristiques des attributs de cl√© primaire </td></tr><tr><td>  fk99 </td><td>  Caract√©ristiques cl√©s √©trang√®res </td></tr><tr><td>  fk99att </td><td>  Caract√©ristiques des attributs de cl√© √©trang√®re </td></tr><tr><td>  fk99rtbl </td><td>  Caract√©ristiques de la table r√©f√©renc√©e par la cl√© √©trang√®re </td></tr><tr><td>  fk99ratt </td><td>  Caract√©ristiques des attributs de la table r√©f√©renc√©e par la cl√© √©trang√®re </td></tr><tr><td>  Idx99 </td><td>  Caract√©ristiques de l'indice </td></tr><tr><td>  Idx99att </td><td>  Caract√©ristiques des attributs d'index </td></tr><tr><td>  Inhtbl99 </td><td>  Caract√©ristiques de la table g√©n√©r√©e </td></tr></tbody></table><br></div></div><br><p>  La valeur de la cat√©gorie est n√©cessaire pour distinguer les diff√©rents groupes de caract√©ristiques les uns des autres.  Un num√©ro de s√©rie, afin de distinguer les caract√©ristiques au sein du groupe. </p><br><p>  Plusieurs cl√©s √©trang√®res (FOREIGN KEY) et index peuvent √™tre d√©clar√©s dans la table de base de donn√©es.  Par cons√©quent, la valeur de cat√©gorie pour ces caract√©ristiques et leurs descendants contient un num√©ro de s√©rie.  Par exemple, une entr√©e avec la cl√© ¬´Category¬ª = <strong>idx02att</strong> et ¬´No.¬ª = <strong>1</strong> indique le premier attribut du 2e index. </p><br><p>  Dans la liste des cat√©gories ci-dessus, l'emplacement du num√©ro de s√©rie est indiqu√© par ¬´99¬ª. </p><br><p>  <strong>Remarque 1</strong> </p><br><img src="https://habrastorage.org/webt/xt/ye/1l/xtye1lr36ssftr4kmvnwedjgnew.png"><br><div class="spoiler">  <b class="spoiler_title">le code source de l'op√©rateur sur la figure</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> admtf_Table_ComplexFeatures(<span class="hljs-string"><span class="hljs-string">'pg_catalog'</span></span>,<span class="hljs-string"><span class="hljs-string">'pg_class'</span></span>);</code> </pre> <br></div></div><br><br><p>  L'article donne des exemples des caract√©ristiques des tables, qui sont bri√®vement d√©crites dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un sch√©ma auxiliaire</a> cr√©√© sp√©cifiquement pour d√©montrer les capacit√©s des fonctions.  Mais le lecteur, ayant cr√©√© telle ou telle fonction dans sa base de donn√©es, peut utiliser les noms de ses sch√©mas et tables comme param√®tres.  De plus, par exemple, le r√©pertoire <strong>pg_class</strong> peut √™tre utilis√© comme param√®tre, bien que dans ce cas un nombre limit√© de caract√©ristiques soient √©mises. </p><p></p><p>  <strong>La fin de la remarque.</strong> </p><br><a name="tfTableCF_def"></a><br><h3>  Structure de la fonction de t√™te </h3><br><img src="https://habrastorage.org/webt/mn/pw/9w/mnpw9welx2ltfhwiqllgqrp6uyc.png"><br>  <strong>Fig.</strong>  <strong>1. Les fonctions qui provoquent la fonction de la t√™te.</strong> <br><br>  <strong>Tableau 3. Affectation des fonctions.</strong> <br><img src="https://habrastorage.org/webt/po/yb/et/poybetf0ogfvr0l95pxzdw5m1yq.png"><br><div class="spoiler">  <b class="spoiler_title">La version texte du tableau de la figure</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5">  Non. </th><th width="10">  Le titre </th><th width="40">  Rendez-vous </th></tr><tr><td width="5">  1 </td><td width="10">  admtf_Table_Features </td><td width="40">  La fonction renvoie une liste des caract√©ristiques de la table de base de donn√©es </td></tr><tr><td width="5">  2 </td><td width="10">  admtf_Table_Attributes </td><td width="40">  La fonction renvoie une liste des attributs de table de base de donn√©es et leurs caract√©ristiques. </td></tr><tr><td width="5">  3 </td><td width="10">  admtf_Table_Constraintes </td><td width="40">  La fonction renvoie une liste des restrictions de table de base de donn√©es et leurs caract√©ristiques. </td></tr><tr><td width="5">  4 </td><td width="10">  admtf_Table_Indexes </td><td width="40">  La fonction renvoie une liste des index de table de base de donn√©es et leurs caract√©ristiques. </td></tr><tr><td width="5">  5 </td><td width="10">  admtf_Table_InheritanceChildrens </td><td width="40">  La fonction renvoie une liste des tables g√©n√©r√©es par (IHERITS) √† partir de la table de base de donn√©es source. </td></tr><tr><td width="5">  6 </td><td width="10">  admtf_Table_Sequences </td><td width="40">  La fonction renvoie une liste de s√©quences (SEQUENCE) dont d√©pend la table. </td></tr><tr><td width="5">  7 </td><td width="10">  admtf_PrimaryKey_ComplexFeatures </td><td width="40">  La fonction renvoie une liste compl√®te (√©tendue) des caract√©ristiques de cl√© primaire (PRIMARY KEY) de la table de base de donn√©es. </td></tr><tr><td width="5">  8 </td><td width="10">  admtf_ForeignKey_ComplexFeatures </td><td width="40">  La fonction renvoie une liste compl√®te (√©tendue) des caract√©ristiques de cl√© √©trang√®re (FOREIGN KEY) de la table de base de donn√©es. </td></tr><tr><td width="5">  9 </td><td width="10">  admtf_Index_ComplexFeatures </td><td width="40">  La fonction renvoie une liste compl√®te (√©tendue) des caract√©ristiques d'index de table de base de donn√©es. </td></tr><tr><td width="5">  10 </td><td width="10">  admtf_Table_ComplexFeatures </td><td width="40">  La fonction renvoie une liste compl√®te (√©tendue) des caract√©ristiques de la table de base de donn√©es. </td></tr></tbody></table><br></div></div><br><p>  <strong>Remarque 2.</strong> </p><br><p>  Les descriptions des fonctions seront organis√©es dans l'ordre indiqu√© ci-dessus.  La raison en est que l'article devra √™tre divis√© en plusieurs parties.  Et les fonctions organis√©es dans cet ordre peuvent √™tre utilis√©es ind√©pendamment du fait que certaines d'entre elles ne seront d√©crites que dans les parties suivantes de la publication. </p><br><p>  <strong>La fin de la remarque.</strong> </p><br><br><h3>  Admtf_Table_Features, liste des fonctions de la table de base de donn√©es </h3><br><a name="tfTableF_def"></a><br><br><p>  La fonction admtf_Table_Features renvoie une liste des caract√©ristiques de la table de base de donn√©es elle-m√™me.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le code source peut √™tre consult√© et t√©l√©charg√© ici.</a> </p><br><p>  En tant que param√®tres, la fonction prend le nom de la table source <b>(a_TableName</b> ) et le nom du sch√©ma dans lequel la table est cr√©√©e ( <b>a_SchemaName</b> ). </p><br><p>  La fonction extrait les donn√©es principales de l' <b>entr√©e de</b> catalogue <b>pg_class</b> , qui contient, en plus des entr√©es de table, des enregistrements sur les s√©quences, les vues, les vues mat√©rialis√©es et les types composites.  Par cons√©quent, pour s√©lectionner des tables, la condition relkind = <b><font color="red">'r' est utilis√©e</font></b> . </p><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> tbl.relname,dsc.description,tbl.relnatts::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,tbl.relchecks::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid=dsc.objoid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName);</code> </pre><br><p>  De plus, la fonction acc√®de aux donn√©es de r√©pertoire <b>pg_namespace</b> et <b>pg_description</b> .  Le premier contient les noms des sch√©mas de base de donn√©es et le second contient des commentaires sur tous les objets de base de donn√©es. </p><br><p>  Il est important de faire attention √† la condition <b>objsubid = 0</b> .  Il d√©finit le commentaire sur la table, car la valeur du champ objoid est la m√™me pour la table et ses attributs.  Le commentaire sur l'attribut de la table est contenu dans l'entr√©e dans laquelle <b>objsubid</b> correspond au num√©ro de cet attribut. </p><br><br>  <strong>Tableau 4. R√©sultat de l'ex√©cution de la fonction admtf_Table_Features ('public', 'Street').</strong> <br><br><table width="95" border="1"><tbody><tr><th width="10">  Le titre </th><th width="20">  Commentaire </th><th width="5">  Nombre d'attributs </th><th width="5">  Nombre de contraintes CHECK </th><th width="5">  ?  y a-t-il une cl√© primaire </th><th width="5">  ?  les index sont-ils d√©clar√©s </th><th width="5">  ?  y a-t-il des descendants </th><th width="5">  Le nombre d'entr√©es dans le tableau </th></tr><tr><td width="10">  rue </td><td width="20">  Liste des rues dans les colonies </td><td width="5">  22 </td><td width="5">  0 </td><td width="5">  t </td><td width="5">  t </td><td width="5">  f </td><td width="5">  20150 </td></tr></tbody></table><br><p>  <strong>Remarque 3</strong> </p><br><p>  Faites attention au nombre d'attributs de table de rue.  Il diff√®re consid√©rablement du nombre d'attributs sp√©cifi√© dans le sch√©ma auxiliaire. </p><br><p>  Tableau 5. Attributs suppl√©mentaires de la table Street. </p><br><table><tbody><tr><th width="10">  attname </th><th width="5">  atttypid </th><th width="5">  attnum </th><th width="10">  Remarque </th></tr><tr><td width="10">  cmin </td><td width="5">  29 </td><td width="5">  -4 </td><td width="10">  Attribut syst√®me </td></tr><tr><td width="10">  xmin </td><td width="5">  28 </td><td width="5">  -3 </td><td width="10">  Attribut syst√®me </td></tr><tr><td width="10">  ctid </td><td width="5">  27 </td><td width="5">  -1 </td><td width="5">  Attribut syst√®me </td></tr><tr><td width="10">  wcrccode </td><td width="5">  795369 </td><td width="5">  1 </td><td width="5">  Attribut valide </td></tr><tr><td width="10">  localityid </td><td width="5">  795352 </td><td width="5">  2 </td><td width="10">  Attribut valide </td></tr><tr><td width="10">  streetid </td><td width="5">  795364 </td><td width="5">  3 </td><td width="10">  Attribut valide </td></tr><tr><td width="10">  streettypeacrm </td><td width="5">  1919168 </td><td width="5">  4 </td><td width="10">  Attribut valide </td></tr><tr><td width="10">  nom de rue </td><td width="5">  1043 </td><td width="5">  5 </td><td width="10">  Attribut valide </td></tr><tr><td width="10">  ........ pg.dropped.6 ........ </td><td width="5">  0 </td><td width="5">  6 </td><td width="10">  Attribut distant </td></tr><tr><td width="10">  ........ pg.dropped.7 ........ </td><td width="5">  0 </td><td width="5">  7 </td><td width="10">  Attribut distant </td></tr></tbody></table><br><p>  Le fait est que PostgreSQL, en plus des attributs principaux, prend √©galement en compte plusieurs attributs syst√®me, et m√™me des attributs supprim√©s. </p><br><p>  <strong>Remarque finale</strong> </p><br><br><h3>  Fonction admtf_Table_Attributes liste des attributs de table de base de donn√©es et leurs caract√©ristiques </h3><a name="tfTableA_def"></a><br><p>  La fonction <b>admtf_Table_Attributes</b> renvoie une liste d'attributs de table de base de donn√©es.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le code source peut √™tre consult√© et t√©l√©charg√© ici.</a> </p><br><p>  En tant que param√®tres, la fonction prend le nom de la table source ( <b>a_TableName</b> ) et le nom du sch√©ma dans lequel la table est cr√©√©e ( <b>a_SchemaName</b> ). </p><br><p>  La fonction r√©cup√®re les donn√©es principales des <b>entr√©es du</b> r√©pertoire <b>pg_attribute</b> et <b>pg_type</b> .  Le premier contient des enregistrements contenant des donn√©es sur les attributs des tables, des vues, des vues mat√©rialis√©es, des types composites et m√™me des fonctions.  La seconde concerne les caract√©ristiques des types d'attributs. </p><br><p>  Peut-√™tre que des pr√©cisions sont n√©cessaires sur la fa√ßon dont les types d'utilisateurs et de base sont d√©finis dans la fonction. </p><br><p>  Un attribut de table est d√©clar√© avec un type personnalis√© si le champ <b>typbasetype</b> est <b>sup√©rieur</b> √† 0 dans l' <b>entr√©e de</b> r√©pertoire <b>pg_type</b> correspondante. Sinon, l'attribut est du type de base.  Par cons√©quent, le r√©pertoire <b>pg_type est</b> impliqu√© deux fois dans la clause FROM.  Dans la premi√®re entr√©e de r√©pertoire, la pr√©sence d'un type d'utilisateur est d√©termin√©e, s'il n'est pas d√©fini ( <b>typbasetype = 0</b> ), une valeur de type de base est g√©n√©r√©e √† partir de cette entr√©e.  Sinon, le type de base est d√©termin√© √† partir de l'enregistrement pour lequel btyp.OID = typ.typbasetype. </p><br><p>  Directement la ligne avec le type de base est form√©e en utilisant la fonction du catalogue syst√®me <b>FORMAT_TYPE (type_oid, typemod)</b> .  Le premier param√®tre est les enregistrements OID de type de base.  Le deuxi√®me param√®tre est la valeur du modificateur pour les types qui contiennent une taille.  Par exemple, VARCHAR (100) ou NUMERIC (4,2), DECIMAL (4,2).  La valeur du param√®tre <b>typemod</b> est tir√©e de <b>typ.typtypmod</b> si l'attribut est d'un type utilisateur, sinon de <b>attr.atttypmod</b> , c'est-√†-dire  directement √† partir d'un enregistrement d'attribut. </p><br><img src="https://habrastorage.org/webt/gv/jx/q0/gvjxq0pb7kjjrv6galmsht5s9do.png"><br><div class="spoiler">  <b class="spoiler_title">le code source de l'op√©rateur sur la figure</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid = attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> tbl.relname,attr.attnum;</code> </pre><br></div></div><br><p>  De plus, la fonction acc√®de aux donn√©es de r√©pertoire <b>pg_class</b> , <b>pg_namespace</b> et <b>pg_description</b> .  Les premier et deuxi√®me r√©pertoires sont utilis√©s pour rechercher des attributs par les noms du sch√©ma et de la table de base de donn√©es. <br><br>  Le troisi√®me r√©pertoire est utilis√© pour r√©cup√©rer le commentaire de l'attribut de table. </p><br><p>  Le commentaire sur l'attribut de la table se trouve dans l'entr√©e dans laquelle <b>dsc.objoid</b> contient l'OID de la table source et <b>dsc.objsubid est le</b> num√©ro de s√©rie de l'attribut dans la table, c'est-√†-dire  <b>attr.attnum</b> . </p><br><p>  Pour emp√™cher la fonction de renvoyer des attributs syst√®me et distants, la clause WHERE d√©finit la condition <b>attr.attnum&gt; 0 AND attr.atttypID&gt; 0</b> . </p><br><br>  <strong>Tableau 6. R√©sultat de l'ex√©cution de la fonction admtf_Table_Attributes ('public', 'Street').</strong> <br><br><table width="95" border="1"><tbody><tr><th width="5">  Non. </th><th width="10">  Le titre </th><th width="20">  Type personnalis√© </th><th width="20">  Type de base </th><th width="5">  ?  pas nul </th><th width="25">  Commentaire </th></tr><tr><td width="5">  1 </td><td width="10">  wcrccode </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td><td width="25">  Code pays </td></tr><tr><td width="5">  2 </td><td width="10">  localityid </td><td width="20">  localityid </td><td width="20">  entier </td><td width="5">  t </td><td width="25">  ID de communaut√© </td></tr><tr><td width="5">  3 </td><td width="10">  streetid </td><td width="20">  streetid </td><td width="20">  smallint </td><td width="5">  t </td><td width="25">  ID rue du village </td></tr><tr><td width="5">  4 </td><td width="10">  streettypeacrm </td><td width="20">  streettypeacrm </td><td width="20">  personnage (8) </td><td width="5">  f </td><td width="25">  Acronyme de la rue </td></tr><tr><td width="5">  5 </td><td width="10">  nom de rue </td><td width="20"></td><td width="20">  varchar (150) </td><td width="5">  t </td><td width="25">  Nom de la rue de la colonie </td></tr></tbody></table><br><h4>  Version de fonction utilisant l'alias regclass pour le type oid </h4><br><p>  Les identificateurs d'objet (OID) PostgreSQL sont du m√™me type que l'OID, qui est actuellement impl√©ment√© sous la forme d'un entier non sign√© sur quatre octets.  Mais en raison de la pr√©sence d'alias de ce type, un entier peut √™tre repr√©sent√© comme le nom d'un objet.  Et vice versa - convertissez le nom de l'objet en un entier de type OID. </p><br><p>  Par exemple, jetez un ≈ìil √† l' <b>instruction SELECT</b> suivante.  Il r√©cup√®re de mani√®re inhabituelle les noms de la table attributaire et les noms de ses types - au lieu d'acc√©der aux champs de r√©pertoire correspondants avec les noms de ces caract√©ristiques, ils sont utilis√©s: <br></p><ul><li>  <b>attrelid :: regclass (attrelid :: regclass: NAME)</b> , </li><li>  <b>atttypid :: regtype (atttypid :: regtype: NAME)</b> </li><li>  <b>typbasetype :: regtype (typbasetype :: regtype: NAME)</b> . </li></ul><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype, typ.typbasetype::regtype,attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'public'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'Street'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br><p>  Voici le r√©sultat de l'ex√©cution de cette requ√™te. </p><br><img src="https://habrastorage.org/webt/zr/4_/ga/zr4_gal9s-8jnhihyjia7cq0xvs.png"><br><p>  Dans la liste des valeurs de sortie de l'op√©rateur SELECT avant la conversion √† l'aide d'alias de type OID, toutes les valeurs √† l'exception du nom d'attribut sont num√©riques, mais en cons√©quence, les noms de table et les types d'attribut sont affich√©s.  Les types de valeurs de sortie peuvent √™tre consid√©r√©s dans la deuxi√®me ligne de l'en-t√™te du tableau. </p><br><p>  De plus, dans la clause WHERE de l'instruction, la condition <b>attr.attrelid = ('public' || '.' || 'Street') :: regclass se trouve</b> , √† gauche de laquelle se trouve une valeur num√©rique et √† droite se trouve une cha√Æne qui est convertie en une valeur num√©rique avec en utilisant l'alias <b>regclass</b> . </p><br><img src="https://habrastorage.org/webt/7v/tl/nh/7vtlnhnhqmr7idtdcebcsffzjik.png"><br><div class="spoiler">  <b class="spoiler_title">le code source de l'op√©rateur sur la figure</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=( a_SchemaName ||<span class="hljs-string"><span class="hljs-string">'.'</span></span>|| a_TableName)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br>  En utilisant l'alias regclass de l'instruction principale, vous pouvez supprimer la connexion √† deux r√©pertoires.  Mais une telle am√©lioration n'a presque pas eu d'effet sur les performances de la fonction - dans les deux versions, la fonction est ex√©cut√©e en 11 ms.  Peut-√™tre d√ª au fait que la table de test a peu d'attributs. <br>  <b>Remarque 4</b> <br><p>  Une faille grave dans la condition sous la forme <b>attr.attrelid = (a_SchemaName || '.' || a_TableName) :: regclass</b> se manifeste lorsqu'il existe un sch√©ma et / ou une table avec un nom inhabituel dans la base de donn√©es.  Par exemple, <b>¬´Mon sch√©ma¬ª</b> et / ou <b>¬´Ma table¬ª</b> .  Ces valeurs doivent √™tre transmises entre guillemets ou utiliser la fonction QUOTE_IDENT, sinon la fonction √©chouera avec une erreur syst√®me. </p><br><img src="https://habrastorage.org/webt/jt/ak/nv/jtaknvaqwphry4yla4bnlemrdeq.png"><br><div class="spoiler">  <b class="spoiler_title">le code source de l'op√©rateur sur la figure</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*       ¬´   ¬ª*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">' '</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">' '</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum; <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'" "'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'" "'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br>  Par cons√©quent, je pr√©f√®re utiliser des conditions sous la forme <b>LOWER (nspc.nspname) = LOWER (a_SchemaName) AND LOWER (tbl.relname) = LOWER (a_TableName)</b> , ce qui ne conduit pas √† des erreurs syst√®me. <br><br>  <b>Remarque finale</b> <br><a name="Script1"></a><br><h2>  ANNEXE 1. Scripts </h2><a name="tfTableF"></a><br><h3>  Cr√©ation de la fonction admtf_Table_Features </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vous trouverez des commentaires sur le code source de la fonction ici.</a> <br><div class="spoiler">  <b class="spoiler_title">code source de la fonction</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*     ,   */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (rs_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,rs_TableDescription <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>,rs_NumberOfAttribute <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_NumberOfChecks <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_hasPKey <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasIndex <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasSubClass <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_NumberOfRow <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_TableOID OID; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableName NAME; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableDescription TEXT; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableNumberOfRowCalc INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN SELECT INTO rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex,rs_hasSubClass, rs_NumberOfRow tbl.relname,dsc.description,tbl.relnatts::INTEGER,tbl.relchecks::INTEGER, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::INTEGER FROM pg_class tbl INNER JOIN pg_namespace nspc ON tbl.relnamespace = nspc.oid LEFT OUTER JOIN pg_Description dsc ON tbl.oid=dsc.objoid AND dsc.objsubid=0 WHERE nspc.nspname=LOWER(a_SchemaName) AND tbl.relkind=c_TableKind AND tbl.relname =LOWER(a_TableName); EXECUTE 'SELECT count(*) FROM ' ||LOWER(a_SchemaName) ||'.'||quote_ident(LOWER(a_TableName)) INTO v_TableNumberOfRowCalc; RETURN QUERY SELECT rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex, rs_hasSubClass,v_TableNumberOfRowCalc AS rs_NumberOfRow; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName NAME,a_TableName NAME) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Features (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*     ,   */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Features (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (rs_TableName VARCHAR(256),rs_TableDescription TEXT,rs_NumberOfAttribute INTEGER,rs_NumberOfChecks INTEGER,rs_hasPKey BOOLEAN,rs_hasIndex BOOLEAN,rs_hasSubClass BOOLEAN,rs_NumberOfRow INTEGER) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_TableOID OID; /*   */ v_TableName VARCHAR(256); /*   */ v_TableDescription TEXT; /*   */ v_TableNumberOfRowCalc INTEGER; /*     */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT tf.rs_TableName::VARCHAR(256), tf.rs_TableDescription::TEXT, tf.rs_NumberOfAttribute::INTEGER, tf.rs_NumberOfChecks::INTEGER, tf.rs_hasPKey::BOOLEAN, tf.rs_hasIndex::BOOLEAN, tf.rs_hasSubClass::BOOLEAN, tf.rs_NumberOfRow::INTEGER FROM admtf_Table_Features(a_SchemaName::NAME,a_TableName::NAME) tf; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECt * FROM admtf_Table_Features('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECt * FROM admtf_Table_Features('public':: NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="tfTableA"></a><br><h3>  Cr√©ation de la fonction admtf_Table_Attributes </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vous trouverez des commentaires sur le code source de la fonction ici.</a> <br><div class="spoiler">  <b class="spoiler_title">code source de la fonction</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_class tbl ON tbl.oid = attr.attrelid INNER JOIN pg_namespace nsp ON tbl.relnamespace=nsp.oid LEFT OUTER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE LOWER(nsp.nspname)=LOWER(a_SchemaName) AND LOWER(tbl.relname)=LOWER(a_TableName) AND tbl.relkind=c_TableKind AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY tbl.relname,attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><h3>  Cr√©ation de la fonction admtf_Table_Attributes √† l'aide de l'alias Regclass </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vous trouverez des commentaires sur le code source de la fonction ici.</a> <br><div class="spoiler">  <b class="spoiler_title">code source de la fonction</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE attr.attrelid=(LOWER(a_SchemaName)||'.'|| LOWER(a_TableName))::regclass AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="Apendix2"></a><br><h2>  ANNEXE 2. Documents suppl√©mentaires </h2><br><h3>  Sch√©ma de base de donn√©es auxiliaire </h3><br><a name="scheme_for_tests"></a><br><img src="https://habrastorage.org/webt/qi/rb/9q/qirb9qyb5nzkn3hef8v7pvgyvvs.png"><br><br><ul><li>  <b>PAYS</b> - Classificateur des pays du monde - OKSM (Classification panrusse des pays du monde); </li><li>  <b>HOUSEADDR</b> - Liste des num√©ros de maison dans les rues des colonies; </li><li>  <b>LCLTYTYPE</b> - R√©pertoire des types de colonies; </li><li>  <b>LOCALIT√â</b> - Liste des √©tablissements; </li><li> <b>STREET</b> ‚Äî     ; </li><li> <b>STREETTYPE</b> ‚Äî   ; </li><li> <b>TERRITORY</b> ‚Äî   (, , ,   ..); </li><li> <b>TERRITORYTYPE</b> ‚Äî   . </li></ul><br><br><a name="Street_char"></a><br><h3>    Street () </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">        .</a> <br> <strong> 1.    Street ().</strong> <br><img src="https://habrastorage.org/webt/vw/ze/rp/vwzerpaegckljldqsmbrq22zf_m.png"><br><div class="spoiler"> <b class="spoiler_title">    </b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cat√©gorie </font></font></th><th width="5">  Non. </th><th width="15">  Le titre </th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Commentaire </font></font></th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> type </font></font></th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Type de base </font></font></th><th width="5">  ?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pas nul </font></font></th></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tbl </font></font></td><td width="5">  0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rue </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Liste des rues dans les colonies </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  1 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Code pays </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t </font></font></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ID de communaut√© </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entier </font></font></td><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t </font></font></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  3 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ID rue du village </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t </font></font></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  4 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Acronyme de la rue </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnage (8) </font></font></td><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f </font></font></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  5 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nom de rue </font></font></td><td width="20">   </td><td width="20"> streettypeacrm </td><td width="20"> varchar(150) </td><td width="5"> t </td></tr><tr><td width="5"> pk </td><td width="5">  0 </td><td width="15"> xpkstreet </td><td width="20">    street </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> pkatt </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> pkatt </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> pkatt </td><td width="5">  3 </td><td width="15"> streetid </td><td width="20">     </td><td width="20"> streetid </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> fk01 </td><td width="5">  1 </td><td width="15"> fk_street_locality </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk01att </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> fk01att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> fk01rtbl </td><td width="5">  0 </td><td width="15"> locality </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk01ratt </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> fk01ratt </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> fk02 </td><td width="5">  2 </td><td width="15"> fk_street_streettype </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk02att </td><td width="5">  1 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5"> f </td></tr><tr><td width="5"> fk02rtbl </td><td width="5">  0 </td><td width="15"> streettype </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk02ratt </td><td width="5">  1 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5"> t </td></tr><tr><td width="5"> idx01 </td><td width="5">  1 </td><td width="15"> xie1street </td><td width="20">         </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx01att </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> idx01att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> idx01att </td><td width="5">  3 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5"> f </td></tr><tr><td width="5"> idx01att </td><td width="5">  4 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5"> t </td></tr><tr><td width="5"> idx02 </td><td width="5">  2 </td><td width="15"> xie2street </td><td width="20">       </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx02att </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallin </td><td width="5"> t </td></tr><tr><td width="5"> idx02att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> idx02att </td><td width="5">  3 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5"> t </td></tr><tr><td width="5"> idx03 </td><td width="5">  3 </td><td width="15"> xie3street </td><td width="20">        </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx03att </td><td width="5">  1 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5"> t </td></tr><tr><td width="5"> idx04 </td><td width="5">  4 </td><td width="15"> xpkstreet </td><td width="20">   ( )  street </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx04att </td><td width="15">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5"> t </td></tr><tr><td width="5"> idx04att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5"> t </td></tr><tr><td width="5"> idx04att </td><td width="5">  3 </td><td width="15"> streetid </td><td width="20">     </td><td width="20"> streetid </td><td width="20"> smallint </td><td width="5"> t </td></tr></tbody></table><br></div></div><br><h3>  Voir aussi </h3><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Troisi√®me partie</a> .</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions de documentation des bases de donn√©es PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La fin (quatri√®me partie)</a> .</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415575/">https://habr.com/ru/post/fr415575/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415565/index.html">Pourquoi (aujourd'hui) retourner 444 n'est pas toujours utile</a></li>
<li><a href="../fr415567/index.html">Diffusez de la vid√©o h264 sans transcodage √† partir d'une cam√©ra Logitech C920</a></li>
<li><a href="../fr415569/index.html">HOWTO setup ubuntu 18.04 sendmail + DKIM + SPF + DMARC ou comment j'ai r√©ussi √† entrer dans le bastion Gmail</a></li>
<li><a href="../fr415571/index.html">kaggle: Identification du mod√®le de cam√©ra de l'IEEE</a></li>
<li><a href="../fr415573/index.html">Optimisation d'un mod√®le pour l'impression 3D en utilisant le logiciel Blender comme exemple</a></li>
<li><a href="../fr415577/index.html">Diapositives du cours "Technologies et d√©veloppement du SGBD"</a></li>
<li><a href="../fr415579/index.html">Apprenez OpenGL. Le√ßon 5.5 - Cartographie normale</a></li>
<li><a href="../fr415581/index.html">International Fintech - Digest: 12 nouvelles sur la chose la plus importante de l'industrie</a></li>
<li><a href="../fr415587/index.html">StereoPi - notre mat√©riel pour √©tudier la vision par ordinateur, les drones et les robots</a></li>
<li><a href="../fr415589/index.html">"Un peu plus sur PD": les soci√©t√©s de t√©l√©vision am√©ricaines cesseront de vendre les g√©odonn√©es de leurs clients</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>