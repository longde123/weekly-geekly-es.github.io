<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèº üë©üèø‚Äçüç≥ ‚úîÔ∏è Rekko Challenge 2019: wie es war üó≥Ô∏è üç≠ üë®‚Äçüë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor nicht allzu langer Zeit fand auf der Boosters- Plattform ein Wettbewerb mit Empfehlungssystemen aus dem Okko- Onlinekino - Rekko Challenge 2019 st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rekko Challenge 2019: wie es war</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/461055/"><img src="https://habrastorage.org/webt/hb/u7/gu/hbu7guq0ic25zumfxsf5bbipkcq.png"><br><br>  Vor nicht allzu langer Zeit fand auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Boosters-</a> Plattform ein Wettbewerb mit Empfehlungssystemen aus dem Okko- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Onlinekino</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rekko Challenge 2019</a> statt.  F√ºr mich war es die erste Erfahrung, an einem Wettbewerb mit einer Rangliste teilzunehmen (vorher habe ich nur bei einem Hackathon Kraft versucht).  Die Aufgabe ist interessant und mir aus der Praxis vertraut, es gibt einen Preisfonds, was bedeutet, dass es Sinn macht, daran teilzunehmen.  Infolgedessen belegte ich den 14. Platz, f√ºr den die Organisatoren ein T-Shirt zum Gedenken herausgaben.  Sch√∂n  Vielen Dank. <br><br>  In diesem Artikel werde ich Sie kurz in die Aufgabe eintauchen lassen, √ºber die von mir vorgebrachten Hypothesen sprechen und dar√ºber, wie Sie den Wettbewerb in Empfehlungssystemen schleppen und ohne Stapelerfahrung in die Top 15 gelangen k√∂nnen. Dies ist besonders n√ºtzlich f√ºr diejenigen, die nur an Wettbewerben teilnehmen werden. <br><a name="habracut"></a><br><h3>  Empfehlungssysteme </h3><br>  Das Hauptziel von Empfehlungssystemen ist es, dem Benutzer das zu geben, was er kaufen <s>m√∂chte</s> (leider wird uns eine solche hypertrophierte Sichtweise durch kommerzielle Anwendung auferlegt). <br>  Es gibt verschiedene Aussagen zu Aufgaben (Rangfolge, Suche nach √§hnlichen Aufgaben, Vorhersage eines bestimmten Elements) und dementsprechend M√∂glichkeiten, diese zu l√∂sen.  Nun, wir alle lieben die Variabilit√§t bei der Auswahl, die sich aus einer Reihe von m√∂glichen L√∂sungen f√ºr jedes Problem ergibt.  Verschiedene Ans√§tze sind im Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anatomie von Empfehlungssystemen</a> gut beschrieben.  Nat√ºrlich hat niemand das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NFL-Theorem</a> aufgehoben, was bedeutet, dass wir im Wettbewerbsproblem verschiedene Algorithmen ausprobieren k√∂nnen. <br><br><h3>  Erkl√§rung des Problems </h3><br>  Lesen Sie mehr √ºber die Aufgabe und die Daten im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel der</a> Organisatoren.  TL; DR hier werde ich das notwendige Minimum zum Verst√§ndnis des Kontextes beschreiben. <br><br>  Der Datensatz enth√§lt etwas mehr als zehntausend Filme mit anonymisierten Attributen.  Die folgenden Optionen stehen als Benutzerelement-Interaktionsmatrizen zur Verf√ºgung: <br><br><ul><li>  Transaktionen - enth√§lt Fakten von Benutzern, die Inhalte kaufen / mieten / im Abonnement anzeigen; </li><li>  Bewertungen - Bewertungen von Filmen durch Benutzer; </li><li>  Lesezeichen - das Ereignis des Hinzuf√ºgens eines Films zu Lesezeichen. </li></ul><br>  Alle Informationen werden √ºber einen bestimmten Zeitraum hinweg aufgenommen und in willk√ºrlichen Einheiten dargestellt, die mit real verkn√ºpft sind. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>t</mi><mi>s</mi><mo>=</mo><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>r</mi><mi>e</mi><mi>a</mi><mi>l</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.146ex" height="2.66ex" viewBox="0 -832 5660.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-73" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-3D" x="1108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-66" x="2165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-28" x="2715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="3105" y="0"></use><g transform="translate(3466,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-65" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-61" x="918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-6C" x="1447" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-29" x="5270" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>t</mi><mi>s</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>r</mi><mi>e</mi><mi>a</mi><mi>l</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> ts = f (ts_ {real}) </script></p><br>  Der Inhalt hatte die folgenden Attribute: <br><br><img src="https://habrastorage.org/webt/14/hj/uu/14hjuuoannzvkwpal7n7xwqyvyk.png"><br><br>  Sie k√∂nnen im Artikel der Organisatoren ausf√ºhrlich dar√ºber lesen, aber ich m√∂chte sofort darauf achten, was mir aufgefallen ist: den Parameter ‚ÄûAttribute‚Äú.  Es enthielt eine T√ºte kategorialer Attribute mit einer Kardinalit√§t von ~ 36.000.  Es gab durchschnittlich 15 Werte pro Film.  Auf den ersten Blick werden nur die grundlegendsten Attribute, die den Inhalt beschreiben, in diesen Werten verschl√ºsselt: Schauspieler, Regisseure, Land, Abonnements oder Sammlungen, zu denen der Film geh√∂rt. <br><br>  Es ist notwendig, 20 Filme vorherzusagen, die Testbenutzer in den n√§chsten zwei Monaten sehen werden.  Testbenutzer sind 50.000 von allen 500.000 Benutzern.  In der Rangliste sind sie in zwei H√§lften geteilt: jeweils 25.000 √∂ffentlich / privat. <br><br><h3>  Metrisch </h3><br>  Die Organisatoren haben als Metrik die mittlere durchschnittliche Genauigkeit f√ºr 20 Elemente (MNAP @ 20) als Metrik ausgew√§hlt.  Der Hauptunterschied zum √ºblichen MAP besteht darin, dass f√ºr Benutzer, die im Testzeitraum keine 20 Filme gesehen haben, die Rationierung nicht f√ºr k erfolgt, sondern f√ºr den tats√§chlichen Wert der angesehenen Filme. <br><br><img src="https://habrastorage.org/webt/tk/xt/fn/tkxtfnagqxtookssvkg8rjiicqg.png"><br><br>  Lesen Sie mehr und sehen Sie den Code in Cython <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier.</a> <br><br><h3>  Validierung </h3><br>  Zur L√∂sung des Problems gelangen.  Zun√§chst musste entschieden werden, was validiert wurde.  Da wir in Zukunft Filme vorhersagen m√ºssen, k√∂nnen wir keine einfache Aufschl√ºsselung nach Benutzern vornehmen.  Aufgrund der Tatsache, dass die Zeit anonymisiert ist, musste ich zumindest ungef√§hr anfangen, sie zu entschl√ºsseln.  Dazu habe ich mehrere Benutzer genommen, einen Zeitplan f√ºr Transaktionen erstellt und eine bestimmte Saisonalit√§t festgestellt.  Es wurde angenommen, dass es t√§glich ist, und wenn wir den Zeitunterschied zwischen den Tagen kennen, k√∂nnen wir berechnen, f√ºr welchen Zeitraum die Daten hochgeladen wurden.  Es stellte sich heraus, dass dies Transaktionen f√ºr 6 Monate waren.  Dies wurde sp√§ter im Telegrammkanal best√§tigt, in dem der Wettbewerb besprochen wurde. <br><br><img src="https://habrastorage.org/webt/ba/3_/67/ba3_67yp9-znxb9b_uoeummo6li.png"><br><br>  Die obige Grafik zeigt die st√ºndliche H√§ufigkeit von Transaktionen am Beispiel von einmonatigen Daten.  Drei markante Gipfel pro Woche √§hneln Freitag-, Samstag- und Sonntagabenden. <br><br>  Folglich haben wir sechs Monate Zeit, und Filme m√ºssen f√ºr die n√§chsten zwei Monate vorhergesagt werden.  Wir werden das letzte Drittel der Trainingsbeispielzeit als Validierungsdatensatz verwenden. <br><br><img src="https://habrastorage.org/webt/mu/uy/cm/muuycmuqlah95etk4kqmdrbpygo.jpeg"><br><br>  Die n√§chsten Einreichungen zeigten, dass die Aufteilung gut gew√§hlt wurde und die lokale Validierungsgeschwindigkeit hervorragend mit der Rangliste korrelierte. <br><br><h3>  Versuch, Daten zu dekanonymisieren </h3><br>  Zun√§chst habe ich beschlossen, alle Filme zu dekanonymisieren, damit: <br><br><ul><li>  Generieren Sie eine Reihe von Zeichen durch Metainformationen des Inhalts.  Zumindest kommen folgende Personen in den Sinn: Genres, Besetzung, Eintrag in Abonnements, Textbeschreibung usw.; </li><li>  Wirf den Ofen der Wechselwirkungen von der Seite ein, um die Kargheit der Matrix zu verringern.  Ja, die Wettbewerbsregeln haben die Verwendung externer Daten nicht verboten.  Nat√ºrlich gab es keine Hoffnung auf eine √úbereinstimmung mit offenen Datens√§tzen, aber niemand hat das Parsen russischer Portale abgesagt. </li></ul><br>  Es scheint eine logische Motivation zu sein, die nach meinen Erwartungen zu einer Killer-L√∂sung werden sollte. <br><br>  Zun√§chst habe ich beschlossen, die Okko-Website zu analysieren und alle Filme zusammen mit ihren Eigenschaften (Bewertung, Dauer, Altersbeschr√§nkungen und andere) herauszuholen.  Nun, wie man analysiert - alles stellte sich als recht einfach heraus. In diesem Fall k√∂nnten Sie die API verwenden: <br><br><img src="https://habrastorage.org/webt/c6/i8/8s/c6i88s9db6wj9nl7aqvysuappt8.png"><br><br>  Nachdem Sie in den Katalog gegangen waren und ein bestimmtes Genre oder Abonnement ausgew√§hlt hatten, mussten Sie nur noch auf eines der Elemente eingehen.  In Reaktion auf die obige Anfrage f√§llt die gesamte Reihe von Filmen im Genre / Abonnement mit allen Attributen aus.  Sehr bequem :) <br><br><div class="spoiler">  <b class="spoiler_title">So sahen die Attribute eines Elements in der Struktur aus</b> <div class="spoiler_text"><pre><code class="json hljs"><span class="hljs-string"><span class="hljs-string">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"c2f98ef4-2eb5-4bfd-b765-b96589d4c470"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SERIAL"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"originalName"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"covers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"basicCovers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"      ,    ..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"worldReleaseDate"</span></span>: <span class="hljs-number"><span class="hljs-number">1558731600000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ageAccessType"</span></span>: <span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ageAccessDescription"</span></span>: <span class="hljs-string"><span class="hljs-string">"16+    16 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"trailers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"kinopoiskRating"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"okkoRating"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"imdbRating"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"staraja-gvardija"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"has3d"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasFullHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasUltraHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasDolby"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasSound51"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasMultiAudio"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasSubtitles"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inSubscription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inNovelty"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"earlyWindow"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"releaseType"</span></span>: <span class="hljs-string"><span class="hljs-string">"RELEASE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"playbackStartDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"playbackTimeMark"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"products"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"PURCHASE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"consumptionMode"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fromConsumptionMode"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"qualities"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Q_FULL_HD"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"fromQuality"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"price"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currencyCode"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"priceCategory"</span></span>: <span class="hljs-string"><span class="hljs-string">"679"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startDate"</span></span>: <span class="hljs-number"><span class="hljs-number">1554670800000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"endDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscription"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"bc682dc6-c0f7-498e-9064-7d6cafd8ca66"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"119228"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"offer"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"originalPrice"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, ... ], <span class="hljs-attr"><span class="hljs-attr">"emptyReason"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"licenses"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"assets"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"genres"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"Detective"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"GENRE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"Detective"</span></span> } }, ... ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"countries"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"3b9706f4-a681-47fb-918e-182ea9dfef0b"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"COUNTRY"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"russia"</span></span> } } ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"subscriptions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"bc682dc6-c0f7-498e-9064-7d6cafd8ca66"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"119228"</span></span> } }, ... ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"promoText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"innerColor"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"updateRateDescription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"contentCountDescription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"copyright"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionStartDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionEndDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionActivateDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"stickerText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fullSeasonPriceText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"purchaseDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expireDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastWatchedChildId"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"bookmarkDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"userRating"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"consumeDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastStartingDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"watchDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startingDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"earlyWatchDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre> <br></div></div><br>  Es bleibt, alle Genres durchzugehen, JSON zu analysieren und dann Duplikate zuzulassen, da ein Film zu mehreren Genres / Abonnements geh√∂ren kann. <br><br>  Ja, hier hatte ich Gl√ºck und habe viel Zeit gespart.  Wenn dies nicht der Fall ist und Sie HTML-Inhalte analysieren m√ºssen, gibt es Artikel auf dem Hub, die Ihnen beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> helfen k√∂nnen. <br><br>  "Das Ding ist der Hut", dachte ich, "wir k√∂nnen ihn nur zur√ºckhalten."  ‚ÄûDer Punkt ist der Hut‚Äú, stellte ich am n√§chsten Tag fest: Die Daten stimmten nicht absolut √ºberein.  Dar√ºber unten. <br><br>  Erstens war die Gr√∂√üe des Katalogs erheblich unterschiedlich: im Datensatz - 10.200, auf der Website gesammelt - 8870. Dies folgt aus der Historizit√§t des Datensatzes: Es wurde nur das heruntergeladen, was sich jetzt auf der Website befindet, und die Wettbewerbsdaten f√ºr 2018.  Einige der Filme sind nicht mehr verf√ºgbar.  Ups <br><br>  Zweitens war von den m√∂glichen Attributen f√ºr das Match eine anhaltende Intuition nur in Bezug auf Folgendes: <br><br>  <i>feature5</i> - Altersgrenze.  Es war leicht zu verstehen.  Die Kardinalit√§t des Attributs betr√§gt 5 eindeutige Gleitkommawerte und "-1".  Unter den gesammelten Daten wurde das Attribut "ageAccessType" mit einer Kardinalit√§t von 5 gefunden. Die Zuordnung sah folgenderma√üen aus: <br><br><pre> <code class="python hljs">catalogue.age_rating = catalogue.age_rating.map({<span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.4496666915</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">0.5927161087</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">0.6547073468</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">0.6804096966000001</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>})</code> </pre><br>  <i>feature2</i> - konvertierte Filmbewertung aus der Filmsuche.  In der EDA-Phase wurde die Idee, dass es sich um ein Rating handelt, zun√§chst durch die Korrelation des Parameters mit der Gesamtzahl der Ansichten eingereicht.  Anschlie√üend best√§tigte die Annahme, dass diese Bewertung aus einer Filmsuche stammt, das Vorhandensein des Parameters ‚ÄûkinopoiskRating‚Äú in den Site-Daten. <br><br>  Dem Spiel einen Schritt n√§her!  Jetzt bleibt noch eine M√∂glichkeit zu finden, die Konvertierung f√ºr den in anonymer Form dargestellten Parameter <i>feature2</i> umzukehren. <br><br>  So sieht die Werteverteilung in <i>Feature2 aus</i> : <br><br><img src="https://habrastorage.org/webt/pq/pl/_d/pqpl_d1lpm0xed8limzxedbevfa.png"><br><br>  Und so die Verteilung der <i>kinopoiskRating-</i> Parameterwerte: <br><br><img src="https://habrastorage.org/webt/wn/6a/np/wn6anpuxtav5ghzgq4tdme0lji8.png"><br><br>  Als ich diese Bilder meinem Kollegen Sasha zeigte, sah er sofort, dass dies ein Grad von drei war.  Drei Mathematiker werden nicht respektiert, aber die Zahl Pi ist sehr gerade.  Infolgedessen stellte sich Folgendes heraus: <br><br><img src="https://habrastorage.org/webt/tw/tt/4u/twtt4uravymgxe1lhxj2d9ydqly.png"><br><br>  Es scheint alles zu sein, aber nicht ganz.  Wir sehen identische Verteilungen, aber die Nennwerte und die Menge konvergieren immer noch nicht.  Wenn wir eine bestimmte Anzahl von Vergleichsbeispielen kennen w√ºrden, m√ºsste nur eine lineare Funktion angen√§hert werden, um den Faktor zu finden.  Aber wir hatten sie nicht. <br><br>  Eine Ann√§herung ist √ºbrigens nicht das am besten geeignete Wort.  Wir brauchen eine L√∂sung mit einem Fehler fast gleich Null.  Die Genauigkeit der gesammelten Daten betr√§gt 2 Zeichen nach dem Trennzeichen.  Wenn Sie bedenken, dass es viele Filme mit einer Bewertung von 6.xx und Filme mit derselben Bewertung gibt, sollten Sie hier um Pr√§zision k√§mpfen. <br><br>  Was k√∂nnen Sie noch versuchen?  Sie k√∂nnen sich auf die Minimal- und Maximalwerte verlassen und MinMaxScaler verwenden, aber die Unzuverl√§ssigkeit dieser Methode l√§sst sofort Zweifel aufkommen.  Ich m√∂chte Sie daran erinnern, dass die Anzahl der Filme anfangs nicht √ºbereinstimmte und unser Datensatz historisch ist und den aktuellen Status auf der Website aufweist.  Das hei√üt,  Es gibt keine Garantie daf√ºr, dass die Filme mit den Mindest- und H√∂chstbewertungen in beiden Gruppen identisch sind (es stellte sich heraus, dass sie eine unterschiedliche Altersgrenze hatten und die Dauer nicht mit dem Wort ‚Äûvollst√§ndig‚Äú √ºbereinstimmte), und es gibt kein Verst√§ndnis daf√ºr, wie oft OKKO aktualisiert wird API t√§glich wechselnde Bewertung der Filmsuche. <br><br>  So wurde klar, dass ich mehr Attributkandidaten f√ºr das Matching brauchte. <br><br>  <b>Was ist sonst noch interessant?</b> <br><br>  <i>feature1</i> ist eine Art Datum.  Theoretisch versprachen die Organisatoren f√ºr Daten die Wahrung der Trennung von Staaten, was eine lineare Funktion implizierte.  Im Allgemeinen sollte die Transformation mit dem <i>ts-</i> Attribut f√ºr die Interaktionsmatrizen identisch sein.  Wenn Sie sich die Verteilung von Filmen nach <i>Feature_1 ansehen</i> ... <br><br><img src="https://habrastorage.org/webt/q2/94/dn/q294dngcpjgbfdgxcpwsrsv-1lu.png"><br><br>  ... dann wird die Hypothese des Ver√∂ffentlichungsdatums des Films sofort weggefegt.  Die Intuition legt nahe, dass die Anzahl der von der Industrie produzierten Filme im Laufe der Zeit zunehmen sollte.  Dies wird unten best√§tigt. <br><br>  Die Daten, die wir von der Site erhalten haben, enthalten 14 Attribute.  Tats√§chlich waren die Werte leider nur f√ºr Folgendes enthalten: <br><br><img src="https://habrastorage.org/webt/wg/bw/64/wgbw64outbnbatpbee2vt5ge8y0.png"><br><br><img src="https://habrastorage.org/webt/5t/ba/pw/5tbapwosxnjwma2wxnznoj3ntfm.png"><br><br><img src="https://habrastorage.org/webt/rj/l8/jb/rjl8jbpximeqbwahvzmrdbummm4.png"><br><br>  Keines der obigen Beispiele √§hnelt <i>feature_1</i> .  Nun, es gab keine Vergleichsideen mehr, und es scheint, dass die ganze Aufregung um diese Aufgabe vergebens war.  Nat√ºrlich habe ich von Wettbewerben geh√∂rt, bei denen die Jungs die Daten manuell markiert haben, aber nicht, wenn es um Hunderte und Tausende von Kopien geht. <br><br><h3>  L√∂sung </h3><br>  <b>1. Einfache Modelle</b> <br><br>  Als mir klar wurde, dass nicht alles so einfach ist, begann ich dem√ºtig mit dem zu arbeiten, was ist.  F√ºr den Anfang wollte ich mit einem einfachen beginnen.  Ich habe verschiedene L√∂sungen ausprobiert, die in der Branche h√§ufig verwendet werden: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kollaboratives Filtern</a> (in unserem Fall artikelbasiert) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Faktorisieren von Matrizen</a> . <br><br>  Die Community nutzt in gro√üem Umfang einige Python-Bibliotheken, die f√ºr diese Aufgaben geeignet sind: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">implizit</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LightFM</a> .  Der erste ist in der Lage, basierend auf ALS sowie Nearest Neighbor Collaborative Filtering mit mehreren Optionen zur Vorverarbeitung der Artikel-Artikel-Matrix zu faktorisieren.  Der zweite hat zwei unterscheidende Faktoren: <br><br><ul><li>  Die Faktorisierung basiert auf SGD, wodurch es m√∂glich ist, stichprobenbasierte Verlustfunktionen, einschlie√ülich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WARP, zu verwenden</a> . </li><li>  Es verwendet einen hybriden Ansatz, bei dem Informationen zu Benutzerattributen und Elementen im Modell so kombiniert werden, dass der latente Vektor des Benutzers die Summe der latenten Vektoren seiner Attribute ist.  Und √§hnlich f√ºr Artikel.  Dieser Ansatz ist √§u√üerst praktisch, wenn f√ºr den Benutzer / Artikel ein Kaltstartproblem vorliegt. </li></ul><br>  Wir hatten keine Benutzerattribute (abgesehen von der M√∂glichkeit, sie basierend auf der Interaktion mit Filmen anzuzeigen), daher habe ich nur die Attribute von Elementen verwendet. <br><br>  Insgesamt wurden 6 Einstellungen vorgenommen, um die Parameter aufzulisten.  Eine Kombination von drei Matrizen wurde als Interaktionsmatrix verwendet, wobei die Bewertungen in bin√§r umgewandelt wurden.  Vergleichsergebnisse mit den besten Hyperparametern f√ºr jede Einstellung in der folgenden Tabelle. <br><div class="scrollable-table"><table><tbody><tr><td>  <b>Modell</b> </td><td>  <b>Testen Sie MNAP @ 20</b> </td></tr><tr><td>  Implizite ALS </td><td>  0,02646 </td></tr><tr><td>  Impliziter Cosinus kNN CF. </td><td>  <b>0,03170</b> </td></tr><tr><td>  Implizite TFIDF kNN CF. </td><td>  0,03113 </td></tr><tr><td>  LightFM (ohne Artikelfunktionen), BPR-Verlust </td><td>  0,02567 </td></tr><tr><td>  LightFM (ohne Artikelfunktionen), WARP-Verlust </td><td>  0,02632 </td></tr><tr><td>  LightFM mit Gegenstandsfunktionen, WARP-Verlust </td><td>  0,02635 </td></tr></tbody></table></div><br>  Wie Sie sehen k√∂nnen, hat sich die klassische kollaborative Filterung als viel besser erwiesen als andere Modelle.  Nicht perfekt, aber von der Basislinie wird nicht viel verlangt.  Senden mit dieser Konfiguration ergab 0.03048 in der √∂ffentlichen Rangliste.  Ich erinnere mich nicht an die Position zu diesem Zeitpunkt, aber zum Zeitpunkt des Abschlusses des Wettbewerbs h√§tte diese Einreichung definitiv die Top 80 erreicht und eine Bronzemedaille geliefert. <br><br>  <b>2. Hallo Boosting</b> <br><br>  Was k√∂nnte besser sein als ein Modell?  Richtig: mehrere Modelle. <br><br>  Daher war die n√§chste Option ein Ensemble oder im Rahmen von Empfehlungen ein Ranking-Modell der zweiten Ebene.  Als Ansatz habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen</a> Artikel von den Jungs aus Avito genommen.  Es scheint streng nach dem Rezept zu kochen, regelm√§√üig umzur√ºhren und mit den Eigenschaften von Filmen zu w√ºrzen.  Die einzige Abweichung war die Anzahl der Kandidaten: Ich habe die Top 200 von LightFM genommen, weil  mit 500.000 Benutzern passten einfach nicht in den Speicher. <br><br>  Infolgedessen war die von mir bei der Validierung erzielte Geschwindigkeit schlechter als bei einem Modell. <br><br>  Nach mehreren Tagen des Experimentierens stellte sich heraus, dass nichts funktionierte und nichts von alleine funktionieren w√ºrde.  Oder ich wei√ü nicht, wie ich es kochen soll (Spoiler: die richtige zweite Antwort).  Was mache ich falsch?  Zwei Gr√ºnde kamen mir in den Sinn: <br><br><ul><li>  Einerseits ist es sinnvoll, die Top 200 aus dem Modell der ersten Ebene zu nehmen, um "harte negative" Proben zu erzeugen, d. H.  jene Filme, die auch f√ºr den Benutzer relevant sind, aber von ihm nicht gesehen werden.  Andererseits k√∂nnen einige dieser Filme w√§hrend des Testzeitraums angesehen werden, und wir pr√§sentieren diese Beispiele als negativ.  Als n√§chstes beschloss ich, das Risiko dieser Tatsache zu verringern und die Hypothese mit dem folgenden Experiment zu √ºberpr√ºfen: Ich nahm alle positiven Beispiele + zuf√§llig f√ºr die Trainingsstichprobe.  Die Geschwindigkeit der Testprobe verbesserte sich nicht.  Hier muss klargestellt werden, dass es in der Stichprobe des Tests auch Top-Vorhersagen aus dem First-Level-Modell gab, da mir auf der Rangliste niemand alle positiven Beispiele nennen wird. </li><li>  Von den 10.200 im Katalog verf√ºgbaren Filmen haben nur 8.296 Filme Wechselwirkungen hergestellt.  Fast 2.000 Filme wurden der Aufmerksamkeit des Benutzers beraubt, teilweise weil sie im Rahmen eines Abonnements nicht zum Kauf / Verleih / zur Verf√ºgung standen.  Die Jungs im Chat fragten, ob unzug√§ngliche Filme im Testzeitraum verf√ºgbar werden k√∂nnten.  Die Antwort war ja.  Es ist definitiv unm√∂glich, sie rauszuwerfen.  Daher schlug ich vor, dass in den n√§chsten 2 Monaten fast 2.000 weitere Filme verf√ºgbar sein werden.  Warum sollten Sie sie sonst in den Datensatz werfen? </li></ul><br>  <b>3. Neuronen</b> <br><br>  Aus dem vorherigen Absatz wurde die Frage gestellt: Wie k√∂nnen wir mit Filmen arbeiten, f√ºr die es √ºberhaupt keine Interaktionen gibt?  Ja, wir erinnern uns an Elementfunktionen in LightFM, aber wie wir uns erinnern, wurden sie nicht eingegeben.  Was sonst?  Neuronen! <br><br>  Das Open-Source-Arsenal verf√ºgt √ºber einige recht beliebte High-Level-Bibliotheken f√ºr die Arbeit mit Empfehlungssystemen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spotlight</a> von Maciej Kula (Autor von LightFM) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TensorRec</a> .  Der erste unter der Haube PyTorch, der zweite - Tensorflow. <br><br>  Spotlight kann implizite / explizite Datens√§tze mit Neuronen und Modellsequenzen faktorisieren.  Gleichzeitig gibt es in der Faktorisierung "out of the box" keine M√∂glichkeit, Benutzer- / Artikelfunktionen hinzuzuf√ºgen. Lassen Sie sie also fallen. <br><br>  TensorRec hingegen wei√ü nur zu faktorisieren und ist ein interessanter Rahmen: <br><br><ul><li>  Darstellungsdiagramm - Eine Methode zur Transformation (kann f√ºr Benutzer / Element unterschiedlich eingestellt werden) von Eingabedaten beim Einbetten, basierend darauf, welche Berechnungen im Vorhersagediagramm durchgef√ºhrt werden.  Die Auswahl besteht aus Ebenen mit unterschiedlichen Aktivierungsoptionen.  Es ist auch m√∂glich, eine abstrakte Klasse zu verwenden und an einer benutzerdefinierten Transformation teilzunehmen, die aus einer Folge von Keras-Ebenen besteht. </li><li>  Mit dem Vorhersagediagramm k√∂nnen Sie die Operation am Ende ausw√§hlen: Ihr bevorzugtes Punktprodukt, euklidischer und Kosinusabstand. </li><li>  Verlust - es gibt auch viel zur Auswahl.  Wir waren mit der Implementierung von WMRB zufrieden (im Wesentlichen das gleiche WARP, wei√ü nur, wie man Batch lernt und verteilt) </li></ul><br>  Am wichtigsten ist, dass TensorRec mit Kontextfunktionen arbeiten kann, und der Autor gibt tats√§chlich zu, dass er urspr√ºnglich von der Idee von LightFM inspiriert war.  Nun, mal sehen.  Wir √ºbernehmen Interaktionen (nur Transaktionen) und Artikelfunktionen. <br><br>  Wir senden zur Suche nach verschiedenen Konfigurationen und warten.  Im Vergleich zu LightFM dauern Schulung und Validierung lange. <br><br>  Dar√ºber hinaus gab es einige Unannehmlichkeiten, die auftreten mussten: <br><br><ol><li>  Durch das √Ñndern des ausf√ºhrlichen Flags hat die <i>Anpassungsmethode</i> nichts ge√§ndert, und es wurden keine R√ºckrufe f√ºr Sie bereitgestellt.  Ich musste eine Funktion schreiben, die eine √Ñra intern mit der Methode <i>fit_partial</i> trainierte, und dann die Validierung f√ºr Zug und Test <i>ausf√ºhren</i> (in beiden F√§llen wurden Stichproben verwendet, um den Prozess zu beschleunigen). </li><li>  Im Allgemeinen ist der Autor des Frameworks ein gro√üartiger Kerl und verwendet tf.SparseTensor √ºberall.  Es lohnt sich jedoch zu verstehen, dass Sie als Vorhersage, auch zur Validierung, das Ergebnis in dicht als Vektor mit der L√§nge n_items f√ºr jeden Benutzer erhalten.  Daraus ergeben sich zwei Tipps: Erstellen Sie einen Zyklus zum Generieren von Vorhersagen mit Stapeln (die Bibliotheksmethode hat keinen solchen Parameter) mit Top-k-Filterung und bereiten Sie die Streifen mit RAM vor. </li></ol><br>  Letztendlich gelang es mir bei der besten Konfigurationsoption, 0,02869 auf mein Testmuster zu dr√ºcken.  Es gab etwas √Ñhnliches wie LB. <br><br>  Was habe ich mir erhofft?  Das Hinzuf√ºgen von Nichtlinearit√§t zu Elementmerkmalen f√ºhrt zu einer Verdoppelung der Metrik?  Es ist naiv. <br><br>  <b>4. Beck diese Aufgabe</b> <br><br>  Also warte einen Moment.  Es scheint, dass ich wieder auf Jonglierneuronen gesto√üen bin.  Welche Hypothese wollte ich testen, als ich dieses Gesch√§ft aufnahm?  Die Hypothese lautete: ‚ÄûIn den n√§chsten zwei Monaten der versp√§teten Auswahl werden fast 2.000 neue Filme auf der Rangliste zu sehen sein.  Einige von ihnen werden einen gro√üen Teil der Ansichten einnehmen. ‚Äú <br><br>  Sie k√∂nnen dies also in zwei Schritten √ºberpr√ºfen: <br><br><ol><li>  Es w√§re sch√∂n zu sehen, wie viele Filme wir in der von uns ehrlich aufgeteilten Testphase bez√ºglich Zug hinzugef√ºgt haben.  Wenn wir nur die Ansichten vertreten, dann sind die "neuen" Filme nur 240 (!).  Die Hypothese zitterte sofort.  Es scheint, dass der Kauf neuer Inhalte von Periode zu Periode nicht um diesen Betrag abweichen kann. </li><li>  Wir beenden.  Wir haben die M√∂glichkeit, das Modell so zu trainieren, dass nur die Pr√§sentation basierend auf Elementfunktionen verwendet wird (in LightFM erfolgt dies beispielsweise standardm√§√üig, wenn wir die Attributmatrix nicht mit der Identit√§tsmatrix vorab ausgef√ºllt haben).  Au√üerdem k√∂nnen wir uns wegen Verletzung nur (!) Unseren unzug√§nglichen und nie gesehenen Filmen unterwerfen.  Aus diesen Ergebnissen senden wir 0,0000136. </li></ol><br>  Bingo!  Dies bedeutet, dass Sie aufh√∂ren k√∂nnen, Semantik aus Filmattributen herauszupressen.  √úbrigens, sp√§ter beim DataFest sagten Leute von OKKO, dass der gr√∂√üte Teil des unzug√§nglichen Inhalts nur einige alte Filme waren. <br><br>  Sie m√ºssen etwas Neues und Neues ausprobieren - das alte vergessen.  In unserem Fall nicht ganz vergessen, aber was ist vor ein paar Tagen passiert.  Kollaboratives Filtern? <br><br>  <b>5. Stimmen Sie die Basislinie ab</b> <br><br>  Wie kann ich der CF-Baseline helfen? <br><br>  <b>Idee Nummer 1</b> <br><br>  Im Internet fand ich eine Pr√§sentation √ºber die Verwendung des Likelihood-Ratio-Tests zum Herausfiltern kleinerer Filme. <br><br>  Unten werde ich meinen Python-Code verlassen, um den LLR-Score zu berechnen, den ich auf mein Knie schreiben musste, um diese Idee zu testen. <br><br><div class="spoiler">  <b class="spoiler_title">LLR-Berechnung</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> csr_matrix <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tqdm <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LLR</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, interaction_matrix, interaction_matrix_2=None)</span></span></span><span class="hljs-function">:</span></span> interactions, lack_of_interactions = self.make_two_tables(interaction_matrix) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> interaction_matrix_2 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: interactions_2, lack_of_interactions_2 = self.make_two_tables(interaction_matrix_2) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: interactions_2, lack_of_interactions_2 = interactions, lack_of_interactions self.num_items = interaction_matrix.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>] self.llr_matrix = np.zeros((self.num_items, self.num_items)) <span class="hljs-comment"><span class="hljs-comment"># k11 - item-item co-occurrence self.k_11 = np.dot(interactions, interactions_2.T) # k12 - how many times row elements was bought without column elements self.k_12 = np.dot(interactions, lack_of_interactions_2.T) # k21 - how many times column elements was bought without row elements self.k_21 = np.dot(lack_of_interactions, interactions_2.T) # k22 - how many times elements was not bought together self.k_22 = np.dot(lack_of_interactions, lack_of_interactions_2.T) def make_two_tables(self, interaction_matrix): interactions = interaction_matrix if type(interactions) == csr_matrix: interactions = interactions.todense() interactions = np.array(interactions.astype(bool).T) lack_of_interactions = ~interactions interactions = np.array(interactions, dtype=np.float32) lack_of_interactions = np.array(lack_of_interactions, dtype=np.float32) return interactions, lack_of_interactions def entropy(self, k): N = np.sum(k) return np.nansum((k / N + (k == 0)) * np.log(k / N)) def get_LLR(self, item_1, item_2): k = np.array([[self.k_11[item_1, item_2], self.k_12[item_1, item_2]], [self.k_21[item_1, item_2], self.k_22[item_1, item_2]]]) LLR = 2 * np.sum(k) * (self.entropy(k) - self.entropy(np.sum(k, axis=0)) - self.entropy(np.sum(k, axis=1))) return LLR def compute_llr_matrix(self): for item_1 in range(self.num_items): for item_2 in range(item_1, self.num_items): self.llr_matrix[item_1, item_2] = self.get_LLR(item_1, item_2) if item_1 != item_2: self.llr_matrix[item_2, item_1] = self.llr_matrix[item_1, item_2] def get_top_n(self, n=100, mask=False): filtered_matrix = self.llr_matrix.copy() for i in tqdm(range(filtered_matrix.shape[0])): ind = np.argpartition(filtered_matrix[i], -n)[-n:] filtered_matrix[i][[x for x in range(filtered_matrix.shape[0]) if x not in ind]] = 0 if mask: return filtered_matrix != 0 else: return filtered_matrix</span></span></code> </pre><br></div></div><br>  Infolgedessen kann die resultierende Matrix als Maske verwendet werden, um nur die wichtigsten Wechselwirkungen zu belassen, und es gibt zwei Optionen: Schwellenwert verwenden oder Top-k-Elemente mit dem h√∂chsten Wert belassen.  Auf die gleiche Weise wird die Kombination mehrerer Einfl√ºsse auf einen Kauf in einer Geschwindigkeit verwendet, um Artikel zu bewerten. Mit anderen Worten, der Test zeigt, wie wichtig es ist, beispielsweise Favoriten hinsichtlich einer m√∂glichen Umwandlung in einen Kauf hinzuzuf√ºgen.  Es sieht vielversprechend aus, aber die Verwendung hat gezeigt, dass das Filtern mit dem LLR-Score eine sehr kleine Steigerung ergibt und das Kombinieren mehrerer Scores das Ergebnis nur verschlechtert.  Anscheinend ist die Methode nicht f√ºr diese Daten.  Von den Pluspunkten kann ich nur feststellen, dass ich mich bei der Umsetzung dieser Idee mit dem Impliziten unter der Haube befassen musste. <br><br>  Ein Beispiel f√ºr die implizite Anwendung dieser benutzerdefinierten Logik bleibt unter der Katze. <br><br><div class="spoiler">  <b class="spoiler_title">√Ñnderung der Matrix implizit</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   LLR scores.     n_items * n_items. llr = LLR(train_csr, train_csr) llr.compute_llr_matrix() #     id, ,      llr_based_mask = llr.get_top_n(n=500, mask=True) #     ,  - CosineRecommender. model = CosineRecommender(K=10200) model.fit(train_csr.T) # model.similarity -   co-occurrence (  Cosine - ).        . masked_matrix = np.array(model.similarity.todense()) * llr_based_mask #  fit()  scorer     model.similarity. #     . model.scorer = NearestNeighboursScorer(csr_matrix(masked_matrix)) #      :   recommend   . test_predict = {} for id_ in tqdm(np.unique(test_csr.nonzero()[0])): test_predict[id_] = model.recommend(id_, train_csr, filter_already_liked_items=True, N=20) #   tuples (item_id, score),   id  . test_predict_ids = {k: [x[0] for x in v] for k, v in test_predict.items()} #       / ,     ,   Cython.</span></span></code> </pre> <br></div></div><br>  <b>Idee Nummer 2</b> <br><br>  Es kam eine weitere Idee auf, die die Vorhersagen f√ºr eine einfache kollaborative Filterung verbessern k√∂nnte.  Die Industrie verwendet oft eine D√§mpfungsfunktion f√ºr alte Sch√§tzungen, aber wir haben einen nicht so einfachen Fall.  Wahrscheinlich m√ºssen Sie 2 m√∂gliche F√§lle irgendwie ber√ºcksichtigen: <br><br><ol><li>  Benutzer, die den Dienst sehen, sind gr√∂√ütenteils neu </li><li>  "Pr√ºfer."  Das hei√üt, diejenigen, die vor relativ kurzer Zeit gekommen sind und sich zuvor beliebte Filme ansehen k√∂nnen. </li></ol><br>  Somit ist es m√∂glich, die kollaborative Komponente automatisch in zwei verschiedene Gruppen zu unterteilen.  Zu diesem Zweck habe ich eine Funktion erfunden, die anstelle impliziter Werte, die an der Schnittstelle zwischen Benutzer und Film auf ‚Äû1‚Äú oder ‚Äû0‚Äú gesetzt sind, zeigt, wie wichtig dieser Film im Betrachtungsverlauf des Benutzers ist. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>t</mi><mi>r</mi><mi>u</mi><mi>s</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>m</mi><mi>o</mi><mi>v</mi><mi>i</mi><mi>e</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B1;</mo></mrow><mo>&amp;#x2217;</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>+</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B2;</mo></mrow><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x394;</mo></mrow><mi>W</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="51.639ex" height="2.66ex" viewBox="0 -832 22233.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-72" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-75" x="813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-73" x="1385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="1855" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-28" x="2216" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-6D" x="2606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-6F" x="3484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-76" x="3970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-69" x="4455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-65" x="4801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-29" x="5267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-3D" x="5934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-3B1" x="6991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-2217" x="7853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-53" x="8576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="9222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-61" x="9583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-72" x="10113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="10564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-54" x="10926" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-69" x="11630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-6D" x="11976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-65" x="12854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-2B" x="13543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-3B2" x="14543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-2217" x="15332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMAIN-394" x="16055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-57" x="16888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-61" x="17937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-74" x="18466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-63" x="18828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-68" x="19261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-54" x="19838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-69" x="20542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-6D" x="20888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhh8TBksOrTi1zISgFoobkoseJm37Q#MJMATHI-65" x="21766" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>t</mi><mi>r</mi><mi>u</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>v</mi><mi>i</mi><mi>e</mi><mo stretchy="false">)</mo><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>Œ±</mo></mrow><mo>‚àó</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>+</mo><mrow class="MJX-TeXAtom-ORD"><mo>Œ≤</mo></mrow><mo>‚àó</mo><mrow class="MJX-TeXAtom-ORD"><mo>Œî</mo></mrow><mi>W</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> trust (movie) = Œ± * StartTime + Œ≤ * ŒîWatchTime </script></p><br>  Dabei ist <i>StartTime</i> das Ver√∂ffentlichungsdatum des Films und <i>ŒîWatchTime</i> die Differenz zwischen dem Ver√∂ffentlichungsdatum und dem Datum, das der Benutzer gesehen hat, und <i>Œ±</i> und <i>Œ≤</i> sind Hyperparameter. <br><br>  Hier ist der erste Begriff f√ºr die Erh√∂hung der Geschwindigkeit von Filmen verantwortlich, die k√ºrzlich ver√∂ffentlicht wurden, und der zweite f√ºr die Ber√ºcksichtigung der Sucht der Benutzer nach alten Filmen.  Wenn ein Film vor langer Zeit ver√∂ffentlicht wurde und der Benutzer ihn sofort gekauft hat, sollte diese Tatsache heute nicht viel ber√ºcksichtigt werden.  Wenn dies eine Art Neuheit ist, m√ºssen wir sie einer gr√∂√üeren Anzahl von Benutzern empfehlen, die auch neue Artikel ansehen.  Wenn der Film ziemlich alt ist und der Benutzer ihn erst jetzt gesehen hat, kann dies auch f√ºr Leute wie ihn wichtig sein. <br><br>  Es ist noch eine Kleinigkeit √ºbrig - um die Koeffizienten <i>Œ±</i> und <i>Œ≤</i> zu sortieren.  Gehen Sie f√ºr die Nacht, und die Arbeit ist erledigt.  Es gab √ºberhaupt keine Annahmen √ºber den Bereich, daher war er anfangs gro√ü, und unten sind die Ergebnisse einer lokalen optimalen Suche aufgef√ºhrt. <br><br><img src="https://habrastorage.org/webt/ej/iy/qk/ejiyqkpfmhz43nlifcd3o_zv40o.png"><br><br>  Unter Verwendung dieser Idee ergab ein einfaches Modell auf einer Matrix eine Geschwindigkeit von 0,03627 bei lokaler Validierung und 0,03685 bei √∂ffentlicher LB, was im Vergleich zu fr√ºheren Ergebnissen sofort einen guten Schub darstellt.  Zu dieser Zeit brachte es mich zu den Top 20. <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idee Nr. 3 Die</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> letzte Idee war, dass alte Filme, die der Benutzer lange gesehen hatte, √ºberhaupt ignoriert werden k√∂nnen. </font><font style="vertical-align: inherit;">Diese CF-Screening-Methode wird oft als Beschneiden bezeichnet. </font><font style="vertical-align: inherit;">Lassen Sie uns einige Werte durchgehen und die Hypothese testen: </font></font><br><br><img src="https://habrastorage.org/webt/pk/xd/uk/pkxduk8vw3eyyojevyibbesixbi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es stellt sich heraus, dass es f√ºr Benutzer mit einer langen Geschichte sinnvoll ist, nur die letzten 25 Interaktionen zu belassen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insgesamt erreichten wir durch die Arbeit mit Daten eine Geschwindigkeit von 0,040312 f√ºr die lokale Testprobe, und die Einreichung mit diesen Parametern ergab das Ergebnis von 0,03870 bzw. 0,03990 f√ºr den √∂ffentlichen / privaten Teil und gab mir den 14. Platz und ein T-Shirt.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anerkannte Segmente </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ausf√ºhren von Projekten im Jupyter-Notizbuch ist ein undankbarer Job. </font><font style="vertical-align: inherit;">Sie verlieren sich st√§ndig in Ihrem Code, der auf mehrere Notizb√ºcher verteilt ist. </font><font style="vertical-align: inherit;">Und Ergebnisse nur in Ausgabezellen zu verfolgen, ist hinsichtlich der Reproduzierbarkeit v√∂llig gef√§hrlich. </font><font style="vertical-align: inherit;">Daher bew√§ltigen Datasaentisten so viel wie m√∂glich. </font><font style="vertical-align: inherit;">Meine Kollegen und ich haben unser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cookie-Cutter-Data-Science-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Framework erstellt </font><font style="vertical-align: inherit;">- Ocean. </font><font style="vertical-align: inherit;">Dies ist ein Werkzeug zum Erstellen von Struktur- und Projektmanagement. </font><font style="vertical-align: inherit;">√úber die Vorteile k√∂nnen Sie in unserem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vor allem aufgrund des guten Ansatzes zur Trennung von Experimenten verlor ich nicht den Verstand und wurde beim Testen von Hypothesen nicht verwirrt.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Das Erfolgsgeheimnis (nicht meins) </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie unmittelbar nach der Er√∂ffnung des privaten Teils der Rangliste bekannt wurde, verwendeten fast alle Leute mit Top-L√∂sungen einfache Modelle auf der ersten Ebene und verst√§rkten sie mit zus√§tzlichen Funktionen auf der zweiten. Wie ich sp√§ter verstand, war meine Punktion in diesem Experiment in erster Linie eine M√∂glichkeit, die Probe beim Training des Modells der zweiten Ebene aufzuteilen. Ich habe es versucht: </font></font><br><br><img src="https://habrastorage.org/webt/vq/c1/ds/vqc1dsjoq63esgrlttp3v9-ky2g.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als </font><font style="vertical-align: inherit;">ich </font><font style="vertical-align: inherit;">merkte, dass das dumm war, </font><font style="vertical-align: inherit;">suchte </font><font style="vertical-align: inherit;">ich nach ziemlich ausgefeilten Methoden wie dieser: </font></font><br><br><img src="https://habrastorage.org/webt/p3/im/w3/p3imw3yj1ip5bvqorv_uexldawu.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun, ich fand den richtigen Weg auf der Folie aus der Pr√§sentation von Evgeny Smirnov, der den 2. Platz belegte. Es war eine Aufteilung der Benutzer im Testteil des Modells der ersten Ebene. Es scheint trivial, aber diese Idee kam mir nicht.</font></font><br><br><img src="https://habrastorage.org/webt/i9/rs/gw/i9rsgwcjimnuhjbgqcpmlyaj2rk.jpeg"><br><br><h3>  Fazit </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wettbewerbe sind Wettbewerbe. </font><font style="vertical-align: inherit;">Schwere Modelle bieten wirklich mehr Genauigkeit, besonders wenn Sie sie kochen k√∂nnen. </font><font style="vertical-align: inherit;">Wird diese Erfahrung n√ºtzlich sein? </font><font style="vertical-align: inherit;">Anstelle einer Antwort m√∂chte ich sagen, dass die Organisatoren nach dem Ende des Wettbewerbs einen Spoiler abgeworfen haben - ein Feature-Wichtigkeits-Diagramm aus dem Produktmodell, nach dem es offensichtlich ist, dass sie denselben ‚Äûerfolgreichen‚Äú Ansatz in der Produktion verwenden. </font><font style="vertical-align: inherit;">Es stellt sich heraus, dass sie auch im Sto√ü flie√üen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es stellt sich heraus, dass die Erfahrung der Teilnahme f√ºr mich beruflich sehr n√ºtzlich war. </font><font style="vertical-align: inherit;">Vielen Dank f√ºr das Lesen des Artikels; </font><font style="vertical-align: inherit;">Fragen, Anregungen, Kommentare sind willkommen.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461055/">https://habr.com/ru/post/de461055/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461045/index.html">Holen Sie sich einen Auszug aus Rosreestr √ºber FSIS USRN und Python. Teil 1</a></li>
<li><a href="../de461047/index.html">Schreiben oder nicht schreiben. Briefe an Beh√∂rden bei Veranstaltungen</a></li>
<li><a href="../de461049/index.html">ONYX BOOX Faust - Wer sucht, ist nicht gezwungen zu wandern</a></li>
<li><a href="../de461051/index.html">Top 10 der h√§ufigsten Fehler, auf die ich in Go-Projekten gesto√üen bin</a></li>
<li><a href="../de461053/index.html">Wir verbinden Online-Karten mit dem Navigator auf dem Smartphone. Teil 2 - Vektorkarten</a></li>
<li><a href="../de461057/index.html">Telegrammkan√§le zur Spieleentwicklung</a></li>
<li><a href="../de461059/index.html">Schreiben einer Android-App f√ºr Filmfans - Teil 1 (Prototyping)</a></li>
<li><a href="../de461061/index.html">Magnesiumlegierungen, Zwillingsgrenzen und Entmischung</a></li>
<li><a href="../de461063/index.html">Interaktion von R mit Datenbanken am Beispiel von Microsoft SQL Server und anderen DBMS</a></li>
<li><a href="../de461067/index.html">Die 65 wichtigsten SQL-Fragen aus Vorstellungsgespr√§chen, auf die Sie 2019 vorbereitet sein sollten. Teil I.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>