<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¯ ğŸ‘©ğŸ»â€ğŸ¤ ğŸ—ï¸ ç”¨äºRaspberry Piå’ŒBeagleBone Blackçš„äº¤å‰ç¼–è¯‘OpenCV 4 ğŸ…ğŸ¿ ğŸ—ï¸ ğŸ¤­</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ 

 å½“æˆ‘æƒ³åœ¨æ ‘è“æ´¾ä¸Šä¸ºä¸€ä¸ªé¡¹ç›®å®‰è£…OpenCVæ—¶ï¼Œæˆ‘å¯¹ç»“æœæ„Ÿåˆ°éå¸¸å¤±æœ›ã€‚ äº‹å®è¯æ˜ï¼Œå¯¹äºå…·æœ‰Python3.7æ”¯æŒçš„Raspbianæ˜ åƒçš„æ–°ç‰ˆæœ¬ï¼Œä¸å¯èƒ½ä½¿ç”¨ç†Ÿæ‚‰çš„pip installå‘½ä»¤ä»å­˜å‚¨åº“ä¸­å®‰è£…è¯¥åº“ã€‚ 

 åŸå›   pip install opencv-pythonç»™æˆ‘ä¸€ä¸ªæ„æƒ³ä¸åˆ°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç”¨äºRaspberry Piå’ŒBeagleBone Blackçš„äº¤å‰ç¼–è¯‘OpenCV 4</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461693/"> å¤§å®¶å¥½ <br><br> å½“æˆ‘æƒ³åœ¨æ ‘è“æ´¾ä¸Šä¸ºä¸€ä¸ªé¡¹ç›®å®‰è£…OpenCVæ—¶ï¼Œæˆ‘å¯¹ç»“æœæ„Ÿåˆ°éå¸¸å¤±æœ›ã€‚ äº‹å®è¯æ˜ï¼Œå¯¹äºå…·æœ‰Python3.7æ”¯æŒçš„Raspbianæ˜ åƒçš„æ–°ç‰ˆæœ¬ï¼Œä¸å¯èƒ½ä½¿ç”¨ç†Ÿæ‚‰çš„pip installå‘½ä»¤ä»å­˜å‚¨åº“ä¸­å®‰è£…è¯¥åº“ã€‚ <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">åŸå› </b> <div class="spoiler_text">  pip install opencv-pythonç»™æˆ‘ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„ç»“æœï¼šâ€œæ‰¾ä¸åˆ°æ»¡è¶³è¦æ±‚çš„ç‰ˆæœ¬...â€ã€‚ å°±åœ¨æœ€è¿‘ï¼Œæˆ‘ä»¥è¿™ç§æ–¹å¼åœ¨ä¸»è®¡ç®—æœºä¸Šå®‰è£…äº†è¯¥åº“ï¼Œç»“æœæ˜¯è‚¯å®šçš„ã€‚ <br><br> å½“æˆ‘ä»”ç»†æ£€æŸ¥è‡ªå·±çš„æ›²ç‡å¹¶ç¡®ä¿æˆ‘ä»ç„¶èƒ½å¤Ÿæ­£ç¡®é”®å…¥25ä¸ªå­—ç¬¦çš„å‘½ä»¤è€Œæ²¡æœ‰é”™åˆ«å­—æ—¶ï¼Œæ˜¯æ—¶å€™æ‰¾å‡ºå…¶ä»–å¯èƒ½å½±å“ç»“æœçš„æ—¶å€™äº†ã€‚ <br><br>  pypi.orgä¸Šçš„opencv-pythonå®˜æ–¹é¡µé¢å·²ç»é˜æ˜äº†å¾ˆå¤šï¼š <br><blockquote>  ...è¯·æ³¨æ„ï¼Œwheelï¼ˆå°¤å…¶æ˜¯è®¸å¤šLinuxï¼‰æ ¼å¼ç›®å‰ä¸æ­£ç¡®æ”¯æŒARMä½“ç³»ç»“æ„ï¼Œå› æ­¤PyPIä¸­æ²¡æœ‰ç”¨äºåŸºäºARMçš„å¹³å°çš„è½¯ä»¶åŒ…ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.piwheels.org</a>æ‰¾åˆ°Raspberry Piçš„opencv-pythonè½¯ä»¶åŒ…ã€‚ <br><br>  <i>...è¯·æ³¨æ„ï¼Œwheelæ ¼å¼ï¼ˆå°¤å…¶æ˜¯è®¸å¤šLinuxï¼‰å½“å‰ä¸æ­£ç¡®æ”¯æŒARMä½“ç³»ç»“æ„ï¼Œå› æ­¤PyPIæ²¡æœ‰é’ˆå¯¹åŸºäºARMçš„å¹³å°çš„è½¯ä»¶åŒ…ã€‚</i>  <i>ä½†æ˜¯ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.piwheels.org</a>ä¸Šæ‰¾åˆ°Raspberry Piçš„opencv-pythonè½¯ä»¶åŒ…ã€‚</i> <br></blockquote> å¥½å§... <br><br> æˆ‘æ£€æŸ¥äº†æ ‘è“æ˜¯å¦ä»æ­£ç¡®çš„æ¥æºæå–æ•°æ®åŒ…ï¼Œä½†è¯¥ç«™ç‚¹çš„æœ€åä¸€å—å°†æ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨äº†é€‚å½“çš„ä½ç½®ï¼š <br><blockquote> æ‰€æä¾›çš„è½¦è½®æ”¯æŒæ‰€æœ‰Raspberry Piå‹å·ï¼ˆPi 3ï¼ŒPi 2ï¼ŒPi 1å’ŒPi Zeroï¼‰ã€‚ ä¸ºRaspbian Jessieï¼ˆPython 3.4ï¼‰å’ŒRaspbian Stretchï¼ˆPython 3.5ï¼‰æä¾›äº†è½®å­ã€‚ æˆ‘ä»¬è®¡åˆ’åœ¨é€‚å½“çš„æ—¶å€™å¢åŠ å¯¹Raspbian Busterï¼ˆPython 3.7ï¼‰çš„æ”¯æŒã€‚ <br><br>  <i>æä¾›çš„è½®å­æ”¯æŒæ‰€æœ‰Raspberry Piå‹å·ï¼ˆPi 3ï¼ŒPi 2ï¼ŒPi 1å’ŒPi Zeroã€‚è½®å­æ”¯æŒRaspbian Jessieï¼ˆPython 3.4ï¼‰å’ŒRaspbian Stretchï¼ˆPython 3.5ï¼‰ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨é€‚å½“çš„æ—¶å€™å¢åŠ å¯¹Raspbian Busterï¼ˆPython 3.7ï¼‰çš„æ”¯æŒã€‚</i> <br></blockquote> æˆ‘å·²ç»å‡†å¤‡å¥½åœ¨æ ‘è“æ´¾ä¸Šä½¿ç”¨OpenCVç¼–è¯‘æ¥åº¦è¿‡ä¸€ä¸ªä¸çœ ä¹‹å¤œï¼Œä½†æ˜¯æˆ‘æƒ³èµ·äº†æœ‰å…³äº¤å‰ç¼–è¯‘åº“çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a> ï¼ˆè¯¥å­¦é™¢çš„è€å¸ˆå»ºè®®æˆ‘ä»¬åšä¸€ä¸ªå®éªŒå®¤è€Œä¸æ˜¯æ‰‹å†Œä¸æ˜¯æ¯«æ— é“ç†çš„ï¼‰ã€‚ ä»æ–‡ç« ä¸­ç¨å¾®æ›´æ”¹äº†å‚æ•°ï¼ˆæœ‰å¿…è¦ä¸ºpython3æ·»åŠ importå¹¶æ£€æŸ¥æ‰€æœ‰åº“æ˜¯å¦éƒ½é€‚ç”¨äºOpenCV 4.1.0ï¼‰ï¼Œæˆ‘å¯ä»¥å®ç°æ‰€éœ€çš„ç»“æœã€‚ <br><br> ä½†æ˜¯ï¼Œæ‡’æƒ°å¼€å§‹äº†ï¼Œæˆ‘å¼€å§‹å¯»æ‰¾ç°æˆçš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚ æ‰€ä»¥æˆ‘ç¢°åˆ°äº†è¿™ç¯‡æ–‡ç« ã€‚ è·Ÿéšå¥¹ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ”¶é›†äº†æ‰€æœ‰ä¸œè¥¿ï¼Œè€Œæ²¡æœ‰é“ƒé¼“å’Œå…¶ä»–è¨æ»¡æ•™ä»ªå¼ã€‚ æˆ‘è®¤ä¸ºæœ¬æ–‡å°†å¯¹å…¶ä»–äººæœ‰ç”¨ã€‚ <br></div></div><br> æˆ‘æä¾›Paul Silisteanuçš„æ–‡ç« â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºRaspberry Piå’ŒBeagleBone Blackäº¤å‰ç¼–è¯‘OpenCV 4</a> â€çš„å…è´¹ç¿»è¯‘ã€‚ ä¹Ÿè®¸æœ‰äººä¼šèŠ‚çœå‡ åˆ†é’Ÿæˆ–å‡ ä¸ªå°æ—¶ï¼Œè€Œè¿™äº›æ—¶é—´æˆ–æ—¶é—´å¯ä»¥èŠ±åœ¨æ¯”ç©ä¾¦æ¢æ•…äº‹æ›´æœ‰è¶£çš„è¯¾ç¨‹ä¸Šã€‚ <br><br> ä»æˆ‘æœ¬äººé‚£é‡Œï¼Œæˆ‘åœ¨ç¿»è¯‘ä¸­æ·»åŠ äº†ä¸€äº›ç¬”è®°ï¼Œæˆ‘è®¤ä¸ºè¿™äº›ç¬”è®°å¾ˆé‡è¦ï¼š[ <i>å®ƒä»¬åœ¨æ–‡æœ¬ä¸­çªå‡ºæ˜¾ç¤º</i> ]ã€‚ <br><br> äº«å—é˜…è¯»ï¼ <br><br><h3> ç”¨äºRaspberry Piå’ŒBeagleBone Blackçš„äº¤å‰ç¼–è¯‘OpenCV 4 </h3><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨äº¤å‰ç¼–è¯‘ä¸ºRaspberry Piå’ŒBeagleBone Blackå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenCV</a> ã€‚ åœ¨æ’°å†™<i>æœ¬æ–‡æ—¶ï¼ˆç¿»è¯‘æ—¶çš„æ›´æ–°ä¸º2019å¹´7æœˆ17æ—¥</i> ï¼‰ï¼ŒOpenCVçš„æœ€æ–°ç‰ˆæœ¬ä¸º4.1.0ï¼Œæ ‡å‡†OSéšé™„çš„ç‰ˆæœ¬ä¸º3.2.0ã€‚ å½“ç„¶ï¼Œå¯ä»¥å°†OpenCVä»æºä»£ç ç›´æ¥ç¼–è¯‘ä¸ºRaspberryæˆ–BeagleBone Blackï¼Œä½†è¿™å¯èƒ½éœ€è¦å‡ ä¸ªå°æ—¶ã€‚ è€Œä¸ºarmhfäº¤å‰ç¼–è¯‘OpenCVçš„è¿‡ç¨‹å°†æŒç»­20-30åˆ†é’Ÿã€‚ å¹¶ä¸”ï¼Œå–å†³äºæ‚¨è®¡ç®—æœºçš„é€Ÿåº¦ï¼Œå®ƒå¯èƒ½ç”šè‡³æ›´å¿«ã€‚ <br><br> æˆ‘å»ºè®®åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Debian Buster</a>è™šæ‹Ÿæœºæˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Docker</a>å®¹å™¨ä¸­è¿›è¡Œæ„å»ºï¼Œä»¥å…å¹²æ‰°æ‚¨çš„ä¸»æ“ä½œç³»ç»Ÿã€‚ å¦‚æœæ‚¨å†³å®šåœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…Busterï¼Œè¯·ç¡®ä¿ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ€ä½ç‰ˆæœ¬</a> [ <i>æˆ‘å»ºè®®è¿™æ ·åš-æˆ‘åœ¨è‡ªå·±çš„çš®è‚¤ä¸Šæ£€æŸ¥äº†å®ƒ</i> ]ã€‚ ä»ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿå¼€å§‹éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å®‰è£…armhfå¯æ‰§è¡Œæ–‡ä»¶å’Œåº“ã€‚ ä½¿ç”¨æœ€å°çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬é¿å…äº†ä¸æœ¬æœºx86-64ç‰ˆæœ¬çš„æ½œåœ¨å†²çªã€‚ <br><br> æœ¬æ–‡ä»‹ç»äº†åªèƒ½åœ¨å…·æœ‰Raspbianç³»ç»Ÿçš„Raspberry PIä¸Šå·¥ä½œï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨BeagleBone Blackï¼Œåˆ™æ‰€æœ‰å·¥ä½œéƒ½åº”è¯¥å®Œå…¨ç›¸åŒã€‚ <br><br> æˆ‘å‡è®¾æ‚¨å·²ç»å®‰è£…äº†å¹²å‡€çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Raspbian</a> ã€‚ æˆ‘ä½¿ç”¨äº†æœ€æ–°çš„å¯ç”¨æ¡Œé¢ç‰ˆæœ¬çš„å›¾åƒã€‚ å®é™…ä¸Šï¼Œæ‚¨å¯ä»¥æŒ‰ç…§Raspbian Liteä¸Šçš„æ–‡ç« è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨GUIç‰ˆæœ¬è¿›è¡Œäº†æ‰€æœ‰æµ‹è¯•ã€‚ <br><br> é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç¡®ä¿è™šæ‹Ÿæœºæˆ–å®¹å™¨å·²æ›´æ–°ï¼š <br><br><pre><code class="bash hljs">sudo apt update sudo apt upgrade</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦è¿æ¥armhfä½“ç³»ç»“æ„ã€‚ <br><br><pre> <code class="bash hljs">sudo dpkg --add-architecture armhf sudo apt update sudo apt install qemu-user-static</code> </pre><br> æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨ç³»ç»Ÿä¸Šå®‰è£…armhfçš„åº“å’Œåº”ç”¨ç¨‹åºå¹¶è¿è¡Œå®ƒä»¬ã€‚ <br><br> æˆ‘ä»¬å°†ä½¿ç”¨å¯¹Pythonå’ŒC ++çš„æ”¯æŒæ¥æ„å»ºOpenCVã€‚ è®©æˆ‘ä»¬ä¸ºå®ƒä»¬å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Python2å’ŒPython3</a>ä»¥åŠ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NumPy</a>åå®šï¼š <br><br><pre> <code class="bash hljs">sudo apt-get install python3-dev sudo apt-get install python3-numpy sudo apt-get install python-dev sudo apt-get install python-numpy</code> </pre><br> å¯¹äºarmhfä½“ç³»ç»“æ„ï¼Œæˆ‘ä»¬è¿˜å°†éœ€è¦libpythonï¼š <br><br><pre> <code class="bash hljs">sudo apt-get install libpython2-dev:armhf sudo apt-get install libpython3-dev:armhf</code> </pre><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®‰è£…libgtk-3ä»¥ä¾¿èƒ½å¤Ÿä½¿ç”¨å›¾å½¢ç•Œé¢ç¼–å†™ç®€å•çš„ç¨‹åºã€‚ å¦‚æœè®¡åˆ’ä»…åœ¨è„±æœºæ¨¡å¼ä¸‹ä½¿ç”¨OpenCVï¼Œåˆ™å¯ä»¥å®‰å…¨åœ°å¿½ç•¥ä»¥ä¸‹ä¸¤ä¸ªåº“ï¼š <br><br><pre> <code class="bash hljs">$ sudo apt install libgtk-3-dev:armhf libcanberra-gtk3-dev:armhf</code> </pre><br> æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…OpenCVæ‰€éœ€çš„å…¶ä»–å‡ ä¸ªåº“ï¼ˆæ”¯æŒå„ç§å›¾åƒå’Œè§†é¢‘æ ¼å¼ï¼‰ï¼š <br><br><pre> <code class="bash hljs">sudo apt install libtiff-dev:armhf zlib1g-dev:armhf sudo apt install libjpeg-dev:armhf libpng-dev:armhf sudo apt install libavcodec-dev:armhf libavformat-dev:armhf libswscale-dev:armhf libv4l-dev:armhf sudo apt-get install libxvidcore-dev:armhf libx264-dev:armhf</code> </pre><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸ºDebianå®‰è£…äº¤å‰ç¼–è¯‘å™¨ï¼Œè¯¥äº¤å‰ç¼–è¯‘å™¨å¯ç”¨äºä¸ºRaspberry Piåˆ›å»ºarmhfäºŒè¿›åˆ¶æ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs">sudo apt install crossbuild-essential-armhf sudo apt install gfortran-arm-linux-gnueabihf</code> </pre><br> åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œä¸Šè¿°å·¥å…·åŒ…åŸºäºGCC 8.3ç‰ˆï¼Œä¸Raspbianä¸­çš„ç›¸åŒã€‚ <br><br> æœ€åï¼Œæˆ‘ä»¬å°†å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Cmake</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">git</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">pkg-config</a>å’Œwgetï¼š <br><br><pre> <code class="bash hljs">sudo apt install cmake git pkg-config wget</code> </pre><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½å½“å‰ç‰ˆæœ¬çš„OpenCVã€‚ æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å®‰è£…å®Œæ•´ç‰ˆæœ¬çš„OpenCVï¼ˆé»˜è®¤åº“å’Œcontribåº“ï¼‰ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ mkdir opencv_all &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv_all wget -O opencv.tar.gz https://github.com/opencv/opencv/archive/4.1.0.tar.gz tar xf opencv.tar.gz wget -O opencv_contrib.tar.gz https://github.com/opencv/opencv_contrib/archive/4.1.0.tar.gz tar xf opencv_contrib.tar.gz rm *.tar.gz</code> </pre><br> æˆ‘ä»¬éœ€è¦ä¸´æ—¶æ›´æ”¹æˆåŠŸæ„å»ºGTK +æ”¯æŒæ‰€éœ€çš„ä¸¤ä¸ªç³»ç»Ÿå˜é‡ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PKG_CONFIG_LIBDIR=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig</code> </pre><br> ç›®å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Cmakeç”ŸæˆOpenCVæ„å»ºè„šæœ¬ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv-4.1.0 mkdir build &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build cmake -D CMAKE_BUILD_TYPE=RELEASE \ -D CMAKE_INSTALL_PREFIX=/opt/opencv-4.1.0 \ -D CMAKE_TOOLCHAIN_FILE=../platforms/linux/arm-gnueabi.toolchain.cmake \ -D OPENCV_EXTRA_MODULES_PATH=~/opencv_all/opencv_contrib-4.1.0/modules \ -D OPENCV_ENABLE_NONFREE=ON \ -D ENABLE_NEON=ON \ -D ENABLE_VFPV3=ON \ -D BUILD_TESTS=OFF \ -D BUILD_DOCS=OFF \ -D PYTHON2_INCLUDE_PATH=/usr/include/python2.7 \ -D PYTHON2_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython2.7.so \ -D PYTHON2_NUMPY_INCLUDE_DIRS=/usr/lib/python2/dist-packages/numpy/core/include \ -D PYTHON3_INCLUDE_PATH=/usr/include/python3.7m \ -D PYTHON3_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython3.7m.so \ -D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/lib/python3/dist-packages/numpy/core/include \ -D BUILD_OPENCV_PYTHON2=ON \ -D BUILD_OPENCV_PYTHON3=ON \ -D BUILD_EXAMPLES=OFF ..</code> </pre><br><div class="spoiler">  <b class="spoiler_title">å‚æ•°è¯´æ˜</b> <div class="spoiler_text">  CMAKE_INSTALL_PREFIX-æ”¶é›†çš„æ•°æ®å°†ä½äºçš„ç›®å½• <br>  CMAKE_TOOLCHAIN_FILE-å‚æ•°æ˜¾ç¤ºCmakeä»€ä¹ˆæ˜¯äº¤å‰ç¼–è¯‘ <br>  OPENCV_EXTRA_MODULES_PATH-å…¶ä»–OpenCVæ¨¡å—çš„è·¯å¾„ <br>  OPENCV_ENABLE_NONFREE = ON-åœ¨ç¨‹åºé›†ä¸­åŒ…å«è·å¾—ä¸“åˆ©çš„ç®—æ³• <br> è¯·æ³¨æ„ï¼Œä¸“åˆ©é™åˆ¶é€‚ç”¨äºSIFTå’ŒSURFç®—æ³•çš„ä½¿ç”¨ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨æ‰“ç®—å°†å…¶ç»„è£…ç”¨äºå•†ä¸šç”¨é€”ï¼Œè¯·è€ƒè™‘æ˜¯å¦éœ€è¦å®ƒä»¬ï¼Œå¹¶æ£€æŸ¥é™åˆ¶æ¡ä»¶ã€‚ <br>  ENABLE_NEON = ON-å¯ç”¨NEONæŒ‡ä»¤ä»¥ä¼˜åŒ–ARM <br>  ENABLE_VFPV3 = ON-å¯ç”¨VFPv3-D32æŒ‡ä»¤ä»¥ä¼˜åŒ–ARM <br>  BUILD_TESTS = OFF-ç¦ç”¨æ„å»ºæµ‹è¯•çš„è§„åˆ™ï¼ˆå°†ä¼šæ›´å¿«ï¼‰ <br>  BUILD_DOCS = OFF-ç¦ç”¨å»ºç­‘æ–‡ä»¶è§„åˆ™ <br>  PYTHON2_INCLUDE_PATH-python2.7çš„è·¯å¾„ <br>  PYTHON2_LIBRARIES-å…ˆå‰ä¸‹è½½çš„libpython2åº“çš„è·¯å¾„ <br>  PYTHON2_NUMPY_INCLUDE_DIRS-ç”¨äºpython2.7çš„NumPyçš„è·¯å¾„ <br>  PYTHON3_INCLUDE_PATH-python3çš„è·¯å¾„ <br>  PYTHON3_LIBRARIES-å…ˆå‰ä¸‹è½½çš„libpython3åº“çš„è·¯å¾„ <br>  PYTHON3_NUMPY_INCLUDE_DIRS-python3çš„NumPyçš„è·¯å¾„ <br>  BUILD_OPENCV_PYTHON2 = ON-åœ¨ç¨‹åºé›†ä¸­åŒ…å«python2çš„è§„åˆ™ <br>  BUILD_OPENCV_PYTHON3 = ON-åœ¨ç¨‹åºé›†ä¸­åŒ…å«python4çš„è§„åˆ™ <br>  BUILD_EXAMPLES = OFF-ç¦ç”¨ç”¨äºç»„è£…æ‰€æœ‰ç¤ºä¾‹çš„è§„åˆ™ <br></div></div><br> å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™ç»“æœå°†åœ¨ç¨‹åºé›†æ–‡ä»¶å¤¹ä¸­æ”¶åˆ°ä¸€ä¸ªMakefileã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹å®é™…æ„å»ºï¼š <br><br><pre> <code class="bash hljs">make -j16</code> </pre><br>  [ <i>æœ¬æ–‡æŒ‡å‡ºäº†ç»„è£…è¿‡ç¨‹ä¸­çš„16ä¸ªå¹¶è¡Œè¿›ç¨‹ï¼Œä½†éœ€è¦ä¸ºæ‚¨çš„ä¸»æœºOSé€‰æ‹©æ­¤å‚æ•°</i> ] <br><br> æ„å»ºé˜¶æ®µå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…è¯¥åº“ï¼š <br><br><pre> <code class="bash hljs">sudo make install/strip</code> </pre><br> ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹è¯¥åº“çš„åç§°ï¼Œå°½ç®¡å®é™…ä¸Šå®ƒæ˜¯armhfï¼Œä½†å®‰è£…ç¨‹åºå°†å…¶é”™è¯¯åœ°ç§°ä¸ºx86_64åº“ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2/python-3.7/ sudo cp cv2.cpython-37m-x86_64-linux-gnu.so cv2.so</code> </pre><br> è®©æˆ‘ä»¬å‹ç¼©å®‰è£…æ–‡ä»¶å¤¹å¹¶å°†å­˜æ¡£ä¿å­˜åœ¨ä¸»ç›®å½•ä¸­ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt tar -cjvf ~/opencv-4.1.0-armhf.tar.bz2 opencv-4.1.0 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~</code> </pre><br> ä¸ºäº†ä½¿æˆ‘ä»¬çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œæˆ‘è¿˜å‡†å¤‡äº†ä¸€ä¸ªç®€å•çš„pkg-configè®¾ç½®æ–‡ä»¶opencv.pcã€‚ æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸‹è½½å®ƒï¼š <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://gist.github.com/sol-prog/ed383474872958081985de733eaf352d opencv_cpp_compile_settings <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv_cpp_compile_settings cp opencv.pc ~ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~</code> </pre><br>  [ <i>å®é™…ä¸Šï¼Œæ²¡æœ‰å¿…è¦åœ¨ä¸»æœºä¸Šæ‰§è¡Œæ­¤æ“ä½œã€‚</i>  <i>æ‚¨å¯ä»¥å°†æ–‡ä»¶ç›´æ¥ä¸‹è½½åˆ°Raspberryã€‚</i>  <i>ä½†ä½œè€…å¸Œæœ›æŒ‰æ­¤é¡ºåºè¿›è¡Œ</i> ] <br><br><div class="spoiler">  <b class="spoiler_title">opencv.pc</b> <div class="spoiler_text">  <i>ç”±äºæ–‡ä»¶ç›¸å¯¹è¾ƒå°ï¼Œå› æ­¤è®©æˆ‘å°†å…¶æ’å…¥æ–‡ç« çš„æ–‡æœ¬ä¸­ï¼š</i> <br><br><pre> <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> </pre><br></div></div><br> å°†opencv-4.1.0-armhf.tar.bz2å’Œopencv.pcä»æ‚¨çš„ä¸»æ–‡ä»¶å¤¹å¤åˆ¶åˆ°RPiã€‚ <br><br> åœ¨æœ¬æ–‡çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å‡è®¾æ‚¨<b>å·²ç»åœ¨Raspberry Piä¸Šè¿›è¡Œäº†</b>æ‰€æœ‰<b>æ“ä½œ</b> ã€‚ <br><br> ç¡®ä¿æ‚¨çš„RPiå…·æœ‰æˆ‘ä»¬ä½¿ç”¨çš„æ‰€æœ‰å¼€å‘åº“ã€‚ å’Œä»¥å‰ä¸€æ ·ï¼Œå¦‚æœæ‚¨ä¸æ‰“ç®—ä½¿ç”¨GTK +ï¼Œè¯·å¿½ç•¥ä»¥ä¸‹å‘½ä»¤çš„ç¬¬ä¸€è¡Œã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Raspbiançš„å®Œæ•´ç‰ˆæœ¬ï¼Œåˆ™å…¶ä¸­çš„å¤§å¤šæ•°åº“éƒ½åº”è¯¥å·²ç»å®‰è£…ï¼š <br><br><pre> <code class="bash hljs">sudo apt install libgtk-3-dev libcanberra-gtk3-dev sudo apt install libtiff-dev zlib1g-dev sudo apt install libjpeg-dev libpng-dev sudo apt install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev sudo apt-get install libxvidcore-dev libx264-dev</code> </pre><br> è§£å‹ç¼©åº“å¹¶å°†å…¶ç§»åŠ¨åˆ°RPiçš„/ optæ–‡ä»¶å¤¹ï¼š <br><br><pre> <code class="bash hljs">tar xfv opencv-4.1.0-armhf.tar.bz2 sudo mv opencv-4.1.0 /opt</code> </pre><br> å¦‚æœéœ€è¦ï¼Œå¯ä»¥åˆ é™¤å­˜æ¡£ï¼š <br><br><pre> <code class="bash hljs">rm opencv-4.1.0-armhf.tar.bz2</code> </pre><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜å°†opencv.pcç§»è‡³pkg-configå¯ä»¥æ‰¾åˆ°å®ƒçš„æ–‡ä»¶å¤¹ï¼š <br><br><pre> <code class="bash hljs">sudo mv opencv.pc /usr/lib/arm-linux-gnueabihf/pkgconfig</code> </pre><br> ä¸ºäº†ä½¿æ“ä½œç³»ç»Ÿèƒ½å¤Ÿæ‰¾åˆ°OpenCVåº“ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬æ·»åŠ åˆ°åº“è·¯å¾„ä¸­ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'export LD_LIBRARY_PATH=/opt/opencv-4.1.0/lib:$LD_LIBRARY_PATH'</span></span> &gt;&gt; .bashrc <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> .bashrc</code> </pre><br> æ³¨é”€å¹¶ç™»å½•æˆ–é‡æ–°å¯åŠ¨ç»ˆç«¯ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€äº›ç¬¦å·é“¾æ¥ï¼Œè¿™äº›é“¾æ¥å°†å…è®¸PythonåŠ è½½æ–°åˆ›å»ºçš„åº“ï¼š <br><br><pre> <code class="bash hljs">sudo ln -s /opt/opencv-4.1.0/lib/python2.7/dist-packages/cv2 /usr/lib/python2.7/dist-packages/cv2 sudo ln -s /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2 /usr/lib/python3/dist-packages/cv2</code> </pre><br> æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨C ++æˆ–Pythonä¸­çš„OpenCVåº“ã€‚ <br> åœ¨æœ¬æ–‡çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å­˜å‚¨åº“</a>ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸€äº›ä½¿ç”¨C ++å’ŒPythonç¼–å†™çš„æµ‹è¯•ç¨‹åºã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨Piä¸Šä¸‹è½½ä»£ç ï¼š <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/sol-prog/raspberry-pi-opencv.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> raspberry-pi-opencv/tests</code> </pre><br> å³ä½¿æ²¡æœ‰å°†æ˜¾ç¤ºå™¨è¿æ¥åˆ°RPiï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹æµ‹è¯•ï¼šcli_cpp_test.cppå’Œcli_python_test.pyã€‚ æˆ‘è¿˜åŒ…æ‹¬ä¸¤ä¸ªéœ€è¦æ˜¾ç¤ºçš„å›¾å½¢æµ‹è¯•ï¼šgui_cpp_test.cppå’Œgui_python_test.pyã€‚ <br><br> æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åˆ›å»ºå’Œè¿è¡ŒC ++æµ‹è¯•ï¼š <br><br><pre> <code class="bash hljs">g++ cli_cpp_test.cpp -o cli_cpp_test `pkg-config --cflags --libs opencv` ./cli_cpp_test</code> </pre><br> è€Œä¸”ï¼Œå¦‚æœæ‚¨çš„RPiè¿æ¥äº†æ˜¾ç¤ºå™¨ï¼š <br><br><pre> <code class="bash hljs">g++ gui_cpp_test.cpp -o gui_cpp_test `pkg-config --cflags --libs opencv` ./gui_cpp_test</code> </pre><br> è¿™æ˜¯åœ¨æˆ‘çš„Piä¸Šè¿è¡Œçš„C ++ GUIæµ‹è¯•çš„å±å¹•æˆªå›¾ï¼š <br><br><img src="https://habrastorage.org/webt/wu/fx/jt/wufxjtxgrqa-mymc6evbxj1jbx4.jpeg"><br><br> å¯¹äºPythonæµ‹è¯•ï¼Œè¯·ä½¿ç”¨ï¼š <br><br><pre> <code class="bash hljs">python3 cli_python_test.py</code> </pre><br> æˆ– <br><br><pre> <code class="bash hljs">python3 gui_python_test.py</code> </pre><br> æ³¨æ„ï¼Œè¿˜å¯ä»¥åœ¨Debian x86-64ç³»ç»Ÿä¸Šä½¿ç”¨OpenCVäº¤å‰ç¼–è¯‘C ++ç¨‹åºï¼Œå¹¶åœ¨RPiä¸Šè¿è¡ŒäºŒè¿›åˆ¶ä»£ç ã€‚ <br><br>  [ <i>åœ¨æœ¬æ–‡çš„å…¶ä»–éƒ¨åˆ†ï¼Œä½œè€…å»ºè®®é˜…è¯»Derek Molloyçš„æœ‰å…³RaspberryPiç¼–ç¨‹çš„ä¹¦ã€‚</i>  <i>æ‚¨å¯ä»¥åœ¨åŸå§‹æ–‡ç« </i> ]ä¸­<i>æ‰¾åˆ°è¯¥ä¹¦çš„æ¨èé“¾æ¥</i> ã€‚ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥åˆ°åŸå§‹æ–‡ç« </a> <br><br><div class="spoiler">  <b class="spoiler_title">æˆ‘è‡ªå·±çš„ä¸€å°éƒ¨åˆ†</b> <div class="spoiler_text"> æˆ‘å‡†å¤‡äº†ä¸€ä¸ªDockerfileï¼Œå¯è®©æ‚¨æ‰§è¡Œæœ¬æ–‡ä¸­çš„æ‰€æœ‰æ­¥éª¤ï¼Œè€Œæ— éœ€éƒ¨ç½²è™šæ‹Ÿæœºã€‚ <br><br> å®‰è£…è¿‡ç¨‹ï¼š <br> åˆ›å»ºä¸€ä¸ªDockerfileã€‚ <br><br><pre> <code class="bash hljs">mkdir opencv &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv &amp;&amp; mkdir armhf_opencv touch armhf_opencv/Dockerfile nano armhf_opencv/Dockerfile</code> </pre><br> æ¥ä¸‹æ¥ï¼Œå°†ä»£ç æ’å…¥Dockerfileä¸­ï¼Œç„¶åæˆ‘ä»¬å¼€å§‹æ˜ åƒçš„ç»„è£…ã€‚ <br><br><pre> <code class="bash hljs">docker image build armhf_opencv/</code> </pre><br> æ„å»ºå®Œæˆåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç»„åˆå›¾åƒçš„æ ‡è¯†ç¬¦ï¼š <br><br><pre> <code class="bash hljs">&gt;&gt;&gt; Successfully built babdc99ba2d8</code> </pre><br> æˆ‘ä»¬ä½¿ç”¨æ­¤æ ‡è¯†ç¬¦ä¸ºå›¾åƒè®¾ç½®æ ‡ç­¾å¹¶è¿è¡Œå®ƒï¼š <br><br><pre> <code class="bash hljs">docker tag babdc99ba2d8 armhf_opencv:latest docker run armhf_opencv</code> </pre><br> å¯åŠ¨å®¹å™¨åï¼Œæœ‰å¿…è¦ä»ä¸­æŠ½å‡ºæ”¶é›†çš„æ¡£æ¡ˆå’Œopencv.pcæ–‡ä»¶ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å…¶æ ‡è¯†ç¬¦ï¼š <br><br><pre> <code class="bash hljs">docker container ls --all &gt;&gt;&gt; CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES &gt;&gt;&gt; 369dff5a0a9b armhf_opencv <span class="hljs-string"><span class="hljs-string">"bash"</span></span> 9 seconds ago Exited (0) 7 seconds ago affectionate_wu</code> </pre><br> å°†æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰ç›®å½•ï¼š <br><br><pre> <code class="bash hljs">docker cp 369dff5a0a9b:/root/opencv-4.1.0-armhf.tar.bz2 ./ docker cp 369dff5a0a9b:/root/opencv.pc ./</code> </pre><br> ä¹‹åï¼Œæˆ‘å»ºè®®åˆ é™¤è¯¥å›¾åƒï¼Œå› ä¸ºå®ƒå ç”¨äº†2.5GBçš„ç©ºé—´ã€‚ <br><br> åœ¨æˆ‘çš„i59600Kï¼ˆ16GBï¼‰ä¸Šé€šè¿‡dockeræ„å»ºå¤§çº¦éœ€è¦30-40åˆ†é’Ÿï¼Œå¹¶ä¸”èŠ±äº†å¾ˆå¤šæ—¶é—´ä»å­˜å‚¨åº“ä¸‹è½½æ•°æ®ã€‚ <br><br> æ­¤å¤–ï¼ŒRaspberry Piä¸Šçš„å®‰è£…è¿‡ç¨‹ä¸æœ¬æ–‡ä¸­æè¿°çš„è¿‡ç¨‹ç›¸åŒã€‚ <br><br>  Dockerfileæœ¬èº«ï¼š <br><br><pre> <code class="plaintext hljs">FROM debian:buster USER root RUN apt update &amp;&amp; apt upgrade RUN dpkg --add-architecture armhf &amp;&amp; \ apt update &amp;&amp; apt install -y qemu-user-static RUN apt install -y python3-dev python3-numpy python-dev python-numpy RUN apt install -y libpython2-dev:armhf libpython3-dev:armhf \ libgtk-3-dev:armhf libcanberra-gtk3-dev:armhf \ libtiff-dev:armhf zlib1g-dev:armhf \ libjpeg-dev:armhf libpng-dev:armhf \ libavcodec-dev:armhf libavformat-dev:armhf \ libswscale-dev:armhf libv4l-dev:armhf \ libxvidcore-dev:armhf libx264-dev:armhf RUN apt install -y crossbuild-essential-armhf gfortran-arm-linux-gnueabihf RUN apt install -y cmake git pkg-config wget RUN mkdir opencv_all &amp;&amp; cd opencv_all &amp;&amp; \ wget -O opencv.tar.gz https://github.com/opencv/opencv/archive/4.1.0.tar.gz &amp;&amp; \ tar -xf opencv.tar.gz -C /tmp &amp;&amp; \ wget -O opencv_contrib.tar.gz https://github.com/opencv/opencv_contrib/archive/4.1.0.tar.gz &amp;&amp; \ tar -xf opencv_contrib.tar.gz -C /tmp &amp;&amp; \ rm *.tar.gz &amp;&amp; \ export PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig &amp;&amp; \ export PKG_CONFIG_LIBDIR=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig &amp;&amp; \ cd /tmp/opencv-4.1.0 &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; \ cmake -D CMAKE_BUILD_TYPE=RELEASE \ -D CMAKE_INSTALL_PREFIX=/opt/opencv-4.1.0 \ -D CMAKE_TOOLCHAIN_FILE=../platforms/linux/arm-gnueabi.toolchain.cmake \ -D OPENCV_EXTRA_MODULES_PATH=/tmp/opencv_contrib-4.1.0/modules \ -D OPENCV_ENABLE_NONFREE=ON \ -D ENABLE_NEON=ON \ -D ENABLE_VFPV3=ON \ -D BUILD_TESTS=OFF \ -D BUILD_DOCS=OFF \ -D PYTHON2_INCLUDE_PATH=/usr/include/python2.7 \ -D PYTHON2_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython2.7.so \ -D PYTHON2_NUMPY_INCLUDE_DIRS=/usr/lib/python2/dist-packages/numpy/core/include \ -D PYTHON3_INCLUDE_PATH=/usr/include/python3.7m \ -D PYTHON3_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython3.7m.so \ -D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/lib/python3/dist-packages/numpy/core/include \ -D BUILD_OPENCV_PYTHON2=ON \ -D BUILD_OPENCV_PYTHON3=ON \ -D BUILD_EXAMPLES=OFF .. &amp;&amp; \ make -j6 &amp;&amp; make install/strip RUN cd /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2/python-3.7/ &amp;&amp; \ cp cv2.cpython-37m-x86_64-linux-gnu.so cv2.so RUN cd /opt &amp;&amp; tar -cjvf /root/opencv-4.1.0-armhf.tar.bz2 opencv-4.1.0 RUN git clone https://gist.github.com/sol-prog/ed383474872958081985de733eaf352d opencv_cpp_compile_settings &amp;&amp; \ cd opencv_cpp_compile_settings &amp;&amp; \ cp opencv.pc /root/</code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461693/">https://habr.com/ru/post/zh-CN461693/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461679/index.html">ä¼˜è´¨ç”µå­è‰ºæœ¯å›¾ä¹¦é¦†</a></li>
<li><a href="../zh-CN461685/index.html">LEDç–—æ³•æˆ–21ä¸–çºªçš„â€œé’æ˜¥è‹¹æœâ€</a></li>
<li><a href="../zh-CN461687/index.html">Docker + Laravel + RoadRunner =â¤</a></li>
<li><a href="../zh-CN461689/index.html">å¼€å‘äººå‘˜ç‰©è”ç½‘è¯†åˆ«</a></li>
<li><a href="../zh-CN461691/index.html">æˆ‘ä»¬å¦‚ä½•å…³é—­Astra Linux Special Edition OSä¸­çš„æ¼æ´</a></li>
<li><a href="../zh-CN461695/index.html">è§†è§‰ç‰¹æ•ˆå®ä¹ </a></li>
<li><a href="../zh-CN461697/index.html">å•¤é…’æƒ…æŠ¥</a></li>
<li><a href="../zh-CN461699/index.html">ç«å±±å°çŒªï¼Œæˆ–è‡ªå·±åŠ¨æ‰‹åšçš„SQL</a></li>
<li><a href="../zh-CN461703/index.html">ç¨‹åºå‘˜å·¥ä½œä¸­çš„å¾®æ­¥æŠ¥è¡¨</a></li>
<li><a href="../zh-CN461707/index.html">éš¾ä»¥æ‰æ‘¸çš„é©¬å°”ç“¦é‡Œå†é™©è®°ï¼Œç¬¬äº”éƒ¨åˆ†ï¼šæ›´å¤šçš„DDEå’ŒCOMè„šæœ¬</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>