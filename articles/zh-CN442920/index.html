<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊ 🌎 🐈 协程::实践经验 👩🏼‍🎓 🤾🏿 🍣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在本文中，我将讨论协程如何工作以及如何创建协程。 在顺序，并行执行中考虑应用程序。 让我们谈谈错误处理，调试以及测试协程的方法。 最后，我将总结并讨论应用此方法后仍然留下的印象。 

 这篇文章是根据我关于MBLT DEV 2018的报告的材料编写的，该材料在帖子末尾-链接到视频。 

 风格一致 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>协程::实践经验</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/442920/">在本文中，我将讨论协程如何工作以及如何创建协程。 在顺序，并行执行中考虑应用程序。 让我们谈谈错误处理，调试以及测试协程的方法。 最后，我将总结并讨论应用此方法后仍然留下的印象。 <br><br> 这篇文章是根据我关于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MBLT DEV 2018的</a>报告的材料编写的，该材料在帖子末尾-链接到视频。 <br><br><h2> 风格一致 </h2><br><img src="https://habrastorage.org/webt/ke/8z/tu/ke8ztulkufchujj6k5pxutqtigw.png"><a name="habracut"></a><br>  <i>图</i>  <i>2.1</i> <br><br>  Corutin开发人员的目的是什么？ 他们希望异步编程尽可能简单。 没有比使用该语言的语法结构“逐行”执行代码容易的了：try-catch-finally，循环，条件语句等等。 <br><br> 让我们考虑两个函数。 每个都在自己的线程上执行（图2.1）。 第一个在线程<b>B</b>上执行并返回一些结果<b>dataB</b> ，然后我们需要将此结果传递给第二个函数，该函数以<b>dataB</b>作为参数并且已经在线程<b>A上</b>运行<b>。</b> 使用协程，我们可以编写我们的代码，如图2所示。  2.1。 考虑如何实现这一目标。 <br><br> 函数<b>longOpOnB，longOpOnA-</b>所谓的<b>suspend-</b>函数，在此之前释放线程，并在完成工作后再次变得繁忙。 <br><br> 为了在相对于被调用函数不同的线程中实际执行这两个函数，同时保持“一致”的编写代码风格，我们必须将它们浸入协程环境中。 <br><br> 这是通过使用所谓的Coroutine Builder创建协程来完成的。 在图中，这是<i>launch</i> ，但是还有其他一些，例如<i>async</i> ， <i>runBlocking</i> 。 稍后再讨论。 <br><br> 最后一个参数是在协程的上下文中执行的代码块：调用暂挂函数，这意味着上述所有行为仅在协程或其他暂挂函数的上下文中才有可能。 <br><br>  Coroutine Builder方法中还有其他参数，例如，启动类型，将在其中执行块的线程等。 <br><br><h2> 生命周期管理 </h2><br>  Coroutine Builder将返回值作为返回值提供给我们-Job类的子类（图2.2）。 有了它，我们可以管理corutin的生命周期。 <br><br> 从<i>start（）</i>方法<i>开始</i> ，以<i>cancel（）</i>方法<i>取消</i> ，使用<i>join（</i> ）方法等待作业完成，订阅作业完成事件等等。 <br><br><img src="https://habrastorage.org/webt/os/bf/9j/osbf9jvwmvqtlidv_ugwrfbk-yc.png"><br>  <i>图</i>  <i>2.2</i> <br><br><h2> 流量变化 </h2><br> 您可以通过更改负责调度的协程的上下文元素来更改协程执行流程。  （图2.3） <br><br> 例如，corutin 1将在<i>UI</i>线程中执行，而corutin 2将在从<i>Dispatchers.IO</i>池中获取的线程中执行。 <br><br><img src="https://habrastorage.org/webt/oe/9e/o1/oe9eo1ynqwdskvi-laxuunj-xkk.png"><br>  <i>图2.3</i> <br><br> 协程库还提供了一个<i>带有context（CoroutineContext）</i>的暂停函数，您可以使用该函数在协程上下文中在线程之间进行切换。 因此，线程之间的跳转可能非常简单： <br><br><img src="https://habrastorage.org/webt/ga/ca/im/gacaimxsxh_bjcxjweywrc8kstw.png"><br>  <i>图</i>  <i>2.4。</i> <br><br> 我们在UI线程1上启动协程→显示负载指示器→切换到工作线程2，释放主要线程→我们在UI线程中执行无法执行的长操作→将结果返回UI线程3→已经在那里工作使用它，呈现接收到的数据并隐藏加载指示符。 <br><br> 到目前为止，看起来很舒服，继续前进。 <br><br><h2> 挂起功能 </h2><br> 在最常见的示例中考虑corutin的工作-使用Retrofit 2库处理网络请求。 <br><br> 我们需要做的第一件事是将<b>回调</b>调用转换为<i>暂停</i>函数，以利用协同程序功能： <br><br><img src="https://habrastorage.org/webt/hs/kk/ue/hskkuekq2frbocs_hd-oxsz8k7o.png"><br>  <i>图</i>  <i>2.5</i> <br><br> 为了控制协程的状态，该库提供了<i>suspendXXXXCoroutine</i>形式的函数，该函数提供了一个参数，用于实现<i>Continuation</i>接口，使用<i>resumeWithException</i>和<i>resume</i>方法，在发生错误和成功的情况下，我们可以分别恢复协程。 <br><br> 接下来，我们将弄清楚调用resumeWithException方法时发生的情况，首先，请确保我们需要以某种方式取消网络请求调用。 <br><br><h2> 挂起功能。 取消通话 </h2><br> 要取消与释放未使用资源有关的调用和其他操作，在实现暂停功能时，可以使用<i>开箱</i>即用的<i>suspendCancellableCoroutine</i>方法（图2.6）。 在这里，block参数已经实现了<i>CancellableContinuation</i>接口，其中的其他方法之一<i>-invokeOnCancellation-</i>允许您注册错误或成功的协程取消事件。 因此，在这里也有必要取消方法调用。 <br><br><img src="https://habrastorage.org/webt/59/ut/hw/59uthwhyrpuk2-hzm6c2rax0vzk.png"><br>  <i>图</i>  <i>2.6</i> <br><br><h3> 在UI中显示更改 </h3><br> 现在已经为网络请求准备了暂停功能，您可以在Coroutine UI流中按顺序使用其调用，而在执行请求期间，该流将是免费的，而改型流将用于该请求。 <br><br> 因此，我们实现了与UI流异步的行为，但是我们以一致的方式编写了行为（图2.6）。 <br><br> 如果在收到答案后需要进行艰苦的工作，例如将接收到的数据写入数据库，则可以使用<i>withContext</i>在回流流池上轻松执行此功能（如已显示），然后在UI上继续执行而无需一行代码。 <br><br><img src="https://habrastorage.org/webt/ks/qk/g4/ksqkg48x7gjja00x6hii4cpc1uo.png"><br>  <i>图</i>  <i>2.7</i> <br><br> 不幸的是，这并不是我们进行应用程序开发所需的全部。 考虑错误处理。 <br><br><h3> 错误处理：尝试最终捕获。 取消协程：CancellationException </h3><br> 未在协程内部捕获的异常被视为未处理，并且可能导致应用程序崩溃。 除正常情况外，通过在调用suspend函数的相应行上使用<i>resumeWithException</i>方法恢复协程， <i>也会</i>引发异常。 在这种情况下，作为参数传递的异常将保持不变。  （图2.8） <br><br><img src="https://habrastorage.org/webt/hm/sv/f0/hmsvf0yzwobbhf3mlv_ce8xy2l8.png"><br>  <i>图</i>  <i>2.8</i> <br><br> 对于异常处理，可以使用标准的try try final语言构造。 现在，可以在UI中显示错误的代码采用以下形式： <br><br><img src="https://habrastorage.org/webt/ce/53/hp/ce53hpazfknfd3962fn0wvfv8x8.png"><br>  <i>图</i>  <i>2.9</i> <br><br> 在取消协程的情况下（可以通过调用Job＃cancel方法来实现），将引发<i>CancellationException</i> 。 默认情况下会处理此异常，并且不会导致崩溃或其他负面后果。 <br><br> 但是，当使用<b>try / catch</b>构造时，它将被捕获在<b>catch块中</b> ，如果您只想处理真正的“错误”情况，则需要考虑它。 例如，当可以“取消”请求或错误日志记录时，提供UI中的错误处理。 在第一种情况下，该错误将显示给用户，尽管该错误实际上并不存在，而在第二种情况下，将记录无用的异常并使报告混乱。 <br><br> 要忽略取消协程的情况，您需要稍微修改一下代码： <br><br><img src="https://habrastorage.org/webt/cw/9p/yf/cw9pyfzj3sbzqrpz49b0ochntjq.png"><br>  <i>图</i>  <i>2.10</i> <br><br><h2> 错误记录 </h2><br> 考虑异常异常堆栈跟踪。 <br><br> 如果直接在协程代码块中抛出异常（图2.11），则堆栈跟踪看起来很整洁，只有少量协程调用，它正确地指示了有关异常的行和信息。 在这种情况下，您可以从堆栈跟踪中轻松了解在何处，在哪个类和哪个函数中引发了异常。 <br><br><img src="https://habrastorage.org/webt/70/1q/h7/701qh72uei7qbt8jpf9kegbnavy.png"><br>  <i>图</i>  <i>2.11</i> <br><br> 但是，通常，传递给<i>暂挂</i>函数的<i>resumeWithException</i>方法的<i>异常</i>不包含有关发生协程的信息。 例如（图2.12），如果您从先前实现的暂停函数中恢复协程，并且异常与上一个示例相同，则堆栈跟踪将不会提供有关在何处专门查找错误的信息。 <br><br><img src="https://habrastorage.org/webt/wd/41/xr/wd41xr4kb6f-luf61_cvcmxetr4.png"><br>  <i>图</i>  <i>2.12</i> <br><br> 要了解有异常恢复的协程，可以使用<i>CoroutineName</i>上下文<i>元素</i> 。  （图2.13） <br><br>  <i>CoroutineName</i>元素用于调试，将协程的名称传递到其中，您可以将其提取到挂起函数中，例如，补充异常消息。 也就是说，至少很清楚在哪里可以找到错误。 <br><br> 这种方法仅在以下情况下才有效： <br><br><img src="https://habrastorage.org/webt/5u/xs/st/5uxsstlugngflzdlcrarrfws1d4.png"><br>  <i>图</i>  <i>2.13</i> <br><br><h3> 错误记录。 异常处理程序 </h3><br> 要更改特定协程的异常日志记录，可以设置自己的ExceptionHandler，这是协程上下文的元素之一。  （图2.14） <br><br> 处理程序必须实现<i>CoroutineExceptionHandler</i>接口。 对协程上下文使用重写的+运算符，您可以用自己的替换标准异常处理程序。 未处理的异常将属于<i>handleException</i>方法，您可以在其中执行所需的任何操作。 例如，完全忽略。 如果您将处理程序留空或添加自己的信息，则会发生这种情况： <br><br><img src="https://habrastorage.org/webt/c_/1w/3y/c_1w3ya8lagmhplbeeq9ajvtbws.png"><br>  <i>图</i>  <i>2.14</i> <br><br> 让我们看看异常的日志记录是什么样的： <br><br><ol><li> 您需要记住有关<i>CancellationException的内容</i> ，我们要忽略它。 </li><li> 添加您自己的日志。 </li><li> 记住默认行为，包括登录和终止应用程序，否则异常将“消失”，并且不清楚发生了什么。 </li></ol><br> 现在，对于引发异常的情况，堆栈跟踪列表将与添加的信息一起发送到logcat： <br><br><img src="https://habrastorage.org/webt/mr/jl/sc/mrjlscj8bilbyancdfmygexqlki.png"><br>  <i>图</i>  <i>2.15</i> <br><br><h2> 并行执行。 异步的 </h2><br> 考虑挂起函数的并行操作。 <br><br>  <i>异步</i>最适合组织来自多个功能的并行结果。 异步，就像<i>启动</i> -Coroutine Builder。 它的方便之处在于，使用<i>await（）</i>方法可成功返回数据或引发在协程执行期间发生的异常。  await方法将等待协程完成（如果尚未完成），否则它将立即返回工作结果。 注意，await是一个挂起函数，因此不能在协程或其他挂起函数的上下文之外执行。 <br><br> 使用异步，从两个函数并行获取数据将如下所示： <br><br><img src="https://habrastorage.org/webt/w1/-t/hv/w1-thvudknznjyexdz7_c5rb0w8.png"><br>  <i>图</i>  <i>2.16</i> <br><br> 想象一下，我们面临着从两个函数并行获取数据的任务。 然后，您需要将它们组合并显示。 出现错误时，有必要绘制UI，取消所有当前请求。 在实践中经常会发现这种情况。 <br><br> 在这种情况下，必须按以下方式处理错误： <br><br><ol><li> 将错误处理带入每个异步组件。 </li><li> 如果发生错误，请取消所有协程。 幸运的是，为此可以指定一个父作业，取消该作业后，其所有子作业都将取消。 </li><li> 我们提出了一个附加的实现，以了解是否所有数据都已成功加载。 例如，我们假设如果await返回null，则在接收数据时发生错误。 </li></ol><br> 考虑到所有这些，实施父母协程变得越来越复杂。  async-corutin的实现也很复杂： <br><br><img src="https://habrastorage.org/webt/wy/xe/ny/wyxenyk2quyek7zmhz4ze1dq5sw.png"><br>  <i>图</i>  <i>2.17</i> <br><br> 这种方法不是唯一可行的方法。 例如，您可以使用<i>ExceptionHandler</i>或<i>SupervisorJob进行</i>具有错误处理的并行执行。 <br><br><h2> 嵌套的协程 </h2><br> 让我们看一下嵌套协程的工作。 <br><br> 默认情况下，嵌套协程使用外部作用域创建并继承其上下文。 结果，嵌套的协程成为子级，外部父级变为父级。 <br><br> 如果我们取消了外部协程，则先前示例中使用的以这种方式创建的嵌套协程也将被取消。 当您需要取消当前请求时，在离开屏幕时也将很有用。 另外，父母亲将经常等待女儿的完成。 <br><br> 您可以使用全局范围创建独立于外部的协程。 在这种情况下，当取消外部协程时，嵌套的协程将继续工作，好像什么都没发生： <br><br><img src="https://habrastorage.org/webt/fj/pu/_y/fjpu_yzyp3z0ttuypjypxu2oav4.png"><br>  <i>图</i>  <i>2.18</i> <i><br></i> <br> 您可以通过使用父项作业的<i>Job</i>键替换context元素来使全局嵌套协程的子级，或者可以完全使用父协程的上下文。 但是在这种情况下，值得记住的是，父协程的所有元素都被接管了：线程池，异常处理程序等： <br><br><img src="https://habrastorage.org/webt/hh/wd/jx/hhwdjxobjkl0arojj0sh6ufii7m.png"><br>  <i>图</i>  <i>2.19</i> <br><br> 现在很明显，如果您从外部使用协程，则需要为其提供安装作业实例或父级上下文的功能。 并且图书馆开发人员需要考虑将其作为儿童安装的可能性，这会带来不便。 <br><br><h2> 断点 </h2><br> 协程会影响调试模式下对象值的查看。 如果在<b>logData</b>函数的下一个协程中放置一个断点，则在触发时，我们会发现此处一切正常，并且值显示正确： <br><br><img src="https://habrastorage.org/webt/hp/t-/oc/hpt-ockcfqvrlzej2ncx0v2cboy.png"><br>  <i>图</i>  <i>2.20</i> <br><br> 现在使用嵌套的协程获取<b>dataA</b> ，在<b>logData</b>上保留一个断点： <br><br><img src="https://habrastorage.org/webt/bq/0j/cb/bq0jcbefwitj0ss-bhahf8_cjy8.png"><br>  <i>图</i>  <i>2.21</i> <br><br> 尝试扩展this块以尝试找到所需的值失败。 因此，在存在挂起功能的情况下进行调试变得困难。 <br><br><h2> 单元测试 </h2><br> 单元测试非常简单。 您可以为此使用Coroutine Builder <i>runBlocking</i> 。  <i>runBlocking</i>阻塞线程，直到所有嵌套的协程完成为止，这正是您测试所需要的。 <br><br> 例如，如果已知使用协程方法内部的某个地方来实现它，那么要测试该方法，您只需要将其包装在<i>runBlocking</i>中<i>即可</i> 。 <br><br>  <i>runBlocking</i>可用于测试暂停功能： <br><br><img src="https://habrastorage.org/webt/ok/vi/4t/okvi4t5bogczdolbbiimwmqyz5g.png"><br>  <i>图</i>  <i>2.22</i> <br><br><h2> 例子 </h2><br> 最后，我想展示一些使用Corutin的例子。 <br><br> 想象一下，我们需要并行执行三个查询A，B和C，显示它们的完成并反映请求A和B完成的时刻。 <br><br> 为此，您可以简单地将查询协程A和B包装到一个通用的协程中，并像对待单个整体一样使用它： <br><br><img src="https://habrastorage.org/webt/xy/ut/fo/xyutfowgblzyjx5l-fb0tcazbx4.png"><br>  <i>图</i>  <i>2.23</i> <br><br> 下面的示例演示如何使用常规的for循环执行间隔为5秒的定期查询： <br><br><img src="https://habrastorage.org/webt/an/bk/zb/anbkzbm6ozetsl3vtwopsmtm2f0.png"><br>  <i>图</i>  <i>2.24</i> <br><br><h2> 结论 </h2><br> 在这些缺点中，我注意到协程是一个相对较年轻的工具，因此，如果要在产品上使用协程，则应谨慎操作。 调试有困难，小样板在执行中很明显。 <br><br> 通常，协程非常易于使用，尤其是对于实现不复杂的异步任务。 特别地，由于可以使用标准语言构造的事实。 协程很容易进行单元测试，所有这些都是由开发该语言的同一家公司提供的。 <br><br><h2> 举报视频 </h2><br> 原来有很多信件。 对于那些喜欢听更多内容的人-我的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MBLT DEV 2018</a>报告中的视频： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wsYou5lx6zA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3> 关于该主题的有用材料： </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">协程简介</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">深入探讨协程</a> </li><li>  <a href="">例举kotlinx.coroutines指南</a> </li><li>  <a href="">使用协程进行UI编程的指南</a> </li><li>  <a href="">协程设计文件（KEEP）</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442920/">https://habr.com/ru/post/zh-CN442920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442910/index.html">为什么我们需要SIBUR中的高级分析</a></li>
<li><a href="../zh-CN442912/index.html">集会反对孤立的Runet</a></li>
<li><a href="../zh-CN442914/index.html">大逃杀：最受欢迎的游戏类型的设计秘诀</a></li>
<li><a href="../zh-CN442916/index.html">盗版FM广播电台与今天相关吗？</a></li>
<li><a href="../zh-CN442918/index.html">使用Flask在生产环境中将机器学习模型作为API部署的指南</a></li>
<li><a href="../zh-CN442922/index.html">月球任务“ Bereshit”-装置的特点，一系列演习和最长的登月路径</a></li>
<li><a href="../zh-CN442924/index.html">先进的地形纹理喷涂</a></li>
<li><a href="../zh-CN442926/index.html">红外光中的“老鼠大惊小怪”：将纳米颗粒引入小鼠眼的视网膜下区域</a></li>
<li><a href="../zh-CN442928/index.html">使用SOLID编写灵活的代码</a></li>
<li><a href="../zh-CN442934/index.html">如何在人烟稀少的大公司中雇用员工。 与Wrike的对话</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>