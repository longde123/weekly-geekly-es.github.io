<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö† üéΩ üõ§Ô∏è Gr√°ficos realmente simples em R para ci√™ncia e jornalismo ‚ÜñÔ∏è üë®üèæ‚Äçüî¨ üç¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R √© uma ferramenta muito poderosa para trabalhar com estat√≠sticas: do pr√©-processamento √† constru√ß√£o de modelos de qualquer complexidade e gr√°ficos co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gr√°ficos realmente simples em R para ci√™ncia e jornalismo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486024/"><p>  R √© uma ferramenta muito poderosa para trabalhar com estat√≠sticas: do pr√©-processamento √† constru√ß√£o de modelos de qualquer complexidade e gr√°ficos correspondentes. </p><br><p>  Uma simples solicita√ß√£o do Google fornecer√° uma grande quantidade de literatura sobre como ‚Äúusar o R ‚Äã‚Äãcom facilidade e rapidez‚Äù. Haver√° livros enormes e v√°rias anota√ß√µes no <a href="https://stackoverflow.com/questions/tagged/r">Stack Overflow</a> , que, √† primeira vista, parecem um armaz√©m intermin√°vel de exemplos, cada um dos quais em duas contas coletar√° o c√≥digo necess√°rio para resolver um problema espec√≠fico.  No entanto, na realidade, isso n√£o √© de todo verdade.  Existem muito poucos materiais que diriam, por exemplo, como criar um cronograma simples "do zero", com receitas prontas para solucionar dificuldades que surgir√£o no decorrer da solu√ß√£o desse problema. </p><br><p>  Para resolver problemas pr√°ticos, s√£o necess√°rias instru√ß√µes passo a passo espec√≠ficas, e n√£o uma descri√ß√£o detalhada de toda a pot√™ncia de um pacote.  Al√©m disso, exemplos de treinamento prontos (as mesmas <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2580%25D0%25B8%25D1%2581%25D1%258B_%25D0%25A4%25D0%25B8%25D1%2588%25D0%25B5%25D1%2580%25D0%25B0">√≠ris</a> ) s√£o frequentemente de pouca utilidade, uma vez que pulam imediatamente um dos est√°gios mais importantes do trabalho com estat√≠sticas - a coleta e o processamento preliminares dos pr√≥prios dados.  Mas √© precisamente para este trabalho que quase uma grande parte de todos os tempos leva!  Um problema separado √© a cria√ß√£o de agendas que correspondam a padr√µes formais e, com maior frequ√™ncia, informais, de um determinado ambiente profissional. </p><br><p>  Meus colegas e eu precisamos regularmente fazer cada vez mais visualiza√ß√µes de estat√≠sticas e modelos baseados neles para publicar resultados cient√≠ficos.  Como os estudos dizem respeito √† economia, muitos desses trabalhos s√£o semelhantes ao jornalismo profissional. </p><br><p>  Em algum momento, ficou claro que, para um trabalho em equipe eficaz, √© necess√°rio um tipo de pipeline de processamento estat√≠stico completo.  Este artigo nasceu como um guia introdut√≥rio para colegas e uma folha de dicas para eu executar este transportador.  Parece que esse material pode ser √∫til para um p√∫blico mais amplo. </p><a name="habracut"></a><br><h1 id="grafika-v-r-bez-boli-poshagovoe-rukovodstvo">  R Gr√°ficos sem dor: Passo a passo </h1><br><h2 id="bazovaya-nastroyka-r">  Configura√ß√£o b√°sica R </h2><br><p>  Para trabalhar, voc√™ precisa de um pacote padr√£o: <a href="https://www.r-project.org/">R</a> + <a href="https://rstudio.com/products/rstudio/download/">RStudio</a> .  Eles est√£o dispon√≠veis gratuitamente para todas as plataformas comuns.  R √© instalado primeiro, depois o RStudio.  Geralmente n√£o h√° problemas. </p><br><p>  Antes de trabalhar, √© melhor salvar imediatamente o novo script em algum lugar do sistema de arquivos e instalar imediatamente o diret√≥rio de trabalho R na pasta em que o script est√° armazenado (menu Sess√£o - Definir Diret√≥rio de Trabalho - Para o Local do Arquivo de Origem).  A √∫ltima observa√ß√£o √© importante, pois, caso contr√°rio, o in√≠cio de qualquer script externo ou nativo ap√≥s a reinicializa√ß√£o do RStudio n√£o ocorrer√°.  Por alguma raz√£o, o RStudio n√£o faz isso por padr√£o, o que seria l√≥gico. </p><br><p>  Mesmo no pacote b√°sico R, existem ferramentas de visualiza√ß√£o padr√£o (fun√ß√£o de <em>plotagem</em> ) que permitem criar muitos tipos de gr√°ficos, mas, no entanto, esses recursos claramente n√£o s√£o suficientes para ilustra√ß√µes completas e altamente personaliz√°veis. </p><br><p>  A biblioteca mais usada para gr√°ficos em R √© o pacote <a href="https://ggplot2.tidyverse.org/">ggplot2</a> , que tamb√©m usaremos. </p><br><p>  Tamb√©m vale a pena instalar imediatamente os pacotes <em>readxl</em> (para leitura de arquivos .xls, .xlsx) e <em>dplyr</em> (para trabalhar com matrizes), <em>escalas</em> (para trabalhar com diferentes escalas de dados), <em>Cairo</em> (para desenhar gr√°ficos de ggplot para arquivos).  Tudo isso pode ser feito com um comando: </p><br><pre><code class="plaintext hljs">install.packages("ggplot2", "readxl", "scales", "dplyr", "Cairo")</code> </pre> <br><h2 id="sbor-i-podgotovka-dannyh">  Coleta e prepara√ß√£o de dados </h2><br><p>  O mais surpreendente √© que esse est√°gio em qualquer literatura, seja um livro te√≥rico s√©rio sobre estat√≠stica te√≥rica aplicada ou um guia para pacotes estat√≠sticos espec√≠ficos, √© dedicado a catastroficamente pouco espa√ßo e tempo.  No entanto, de acordo com a experi√™ncia de pesquisa e lideran√ßa independentes de estudantes e colegas mais jovens, sabe-se que √© nesta fase que a maior parte do tempo e do esfor√ßo pode cair, portanto, √© muito importante salv√°-los, mesmo na solu√ß√£o de problemas puramente t√©cnicos. </p><br><p>  H√° duas perguntas aqui: </p><br><ol><li>  Como escolher o formato de arquivo correto? </li><li>  Qual √© a melhor maneira de estruturar dados? </li></ol><br><p>  Com o formato, o dilema √© simples: CSV versus Microsoft Excel (n√£o √© t√£o importante, ‚Äúnovo‚Äù .xlsx .xls antigo).  Muitas pessoas pensam que o CSV se beneficia da simplicidade (na verdade, esse √© um arquivo de texto comum no qual os valores das colunas s√£o separados por v√≠rgula ou ponto e v√≠rgula) e velocidade.  Mas eu escolho o Excel por dois motivos: primeiro, nesse arquivo, voc√™ pode armazenar v√°rias tabelas simultaneamente em guias diferentes e, segundo, mais importante, n√£o precisa pensar em escolher o separador de colunas e a casa decimal √† direita.  Para CSV, isso geralmente deve ser gravado manualmente no c√≥digo R e verifique se o arquivo de dados √© salvo com as mesmas configura√ß√µes. </p><br><p>  Estruturar dados √© uma quest√£o mais complexa, exigindo um entendimento b√°sico de como os bancos de dados devem ser organizados. <del>  Se voc√™ n√£o entrar na teoria dos bancos de dados relacionais sobre diferentes formas normais, ent√£o </del>  A tabela de dados deve ser <em>redundante,</em> ou seja <em>,</em> conter colunas extras.  Isso √© necess√°rio para que, posteriormente, no script em R, voc√™ possa selecionar de maneira flex√≠vel determinadas informa√ß√µes para processamento adicional.  Por exemplo, se queremos representar uma s√©rie temporal primitiva, precisamos criar colunas que correspondam a todas as caracter√≠sticas de agrupamento poss√≠veis.  Por exemplo, se esta √© uma s√©rie de observa√ß√µes anuais sobre a popula√ß√£o da cidade condicional de Severovostochinsk, precisaremos das seguintes colunas: <em>ano</em> (ano), <em>var</em> (nome do indicador), <em>valor</em> (valor do indicador). </p><br><div class="scrollable-table"><table><thead><tr><th>  ano </th><th>  var </th><th>  valor </th></tr></thead><tbody><tr><td>  1990 </td><td>  Tamanho da popula√ß√£o </td><td>  102 </td></tr><tr><td>  1991 </td><td>  Tamanho da popula√ß√£o </td><td>  103 </td></tr><tr><td>  1992 </td><td>  Tamanho da popula√ß√£o </td><td>  104 </td></tr></tbody></table></div><br><p>  Forneceremos quaisquer dados de entrada para esse estilo de apresenta√ß√£o de informa√ß√µes. </p><br><h2 id="primer">  Exemplo </h2><br><p>  <strong>Objetivo:</strong> construir uma compara√ß√£o da din√¢mica dos volumes de colheita na R√∫ssia, no Distrito Federal da Sib√©ria e no Territ√≥rio de Krasnoyarsk em 2009-2018. </p><br><p>  A obten√ß√£o de dados para esta tarefa √© bastante simples: basta encontrar o indicador correspondente no <a href="https://fedstat.ru/indicator/37848">Sistema Estat√≠stico e Informa√ß√£o Interdepartamental Unificado</a> .  A sutileza vem a seguir.  Voc√™ pode baixar imediatamente os dados no formato .xlsx e estrutur√°-los manualmente, como mostrado acima.  Felizmente, algumas fontes de informa√ß√£o (por exemplo, EMISS) permitem fazer isso com os recursos do pr√≥prio servi√ßo, o que simplifica bastante o trabalho e reduz o tempo necess√°rio para conclu√≠-lo. </p><br><p>  Portanto, para o EMISS, basta entrar no modo "Configura√ß√µes" (o bot√£o correspondente no canto superior direito da p√°gina de dados) e mover todos os sinais, exceto o "Per√≠odo" da coluna "Colunas" para a coluna "Linhas".  Acontece que uma mesa est√° quase pronta para o nosso trabalho futuro.  Al√©m disso, j√° no Excel (ou em qualquer outro editor adequado), faz sentido trazer a estrutura da tabela para um formato semelhante ao apresentado acima e garantir que a primeira linha contenha apenas os nomes das vari√°veis, com dados em latim (em princ√≠pio, R pode funcionar com t√≠tulos em russo mas isso √© inconveniente ao escrever c√≥digo).  O resultado foi uma tabela (um fragmento √© fornecido em v√°rias linhas). </p><br><div class="scrollable-table"><table><thead><tr><th>  t√≠tulo </th><th>  localiza√ß√£o </th><th>  ano </th><th>  valor </th></tr></thead><tbody><tr><td>  Madeira colhida </td><td>  R√∫ssia como um todo </td><td>  2009 </td><td>  158868.3 </td></tr><tr><td>  Madeira colhida </td><td>  R√∫ssia como um todo </td><td>  2010 </td><td>  173633.7 </td></tr><tr><td>  Madeira colhida </td><td>  Siberian FD </td><td>  2009 </td><td>  47161.58 </td></tr><tr><td>  Madeira colhida </td><td>  Territ√≥rio de Krasnoyarsk </td><td>  2009 </td><td>  12111.48 </td></tr><tr><td>  Madeira colhida </td><td>  Territ√≥rio de Krasnoyarsk </td><td>  2010 </td><td>  12078,6 </td></tr></tbody></table></div><br><p>  Agora voc√™ pode chamar o <code>logging</code> dessa planilha, salvar o livro inteiro no arquivo <code>graphs.xlsx</code> e acessar o RStudio. </p><br><p>  N√≥s conectamos as bibliotecas necess√°rias. </p><br><pre> <code class="plaintext hljs">library(ggplot2) library(readxl) library(Cairo) library(scales) library(dplyr)</code> </pre> <br><p>  Se estiver sendo preparada uma programa√ß√£o para uma publica√ß√£o no idioma russo, voc√™ dever√° definitivamente configurar o c√≥digo do idioma apropriado.  A op√ß√£o mais moderna que funcionar√° na maioria dos casos √©, obviamente, a codifica√ß√£o UTF-8: </p><br><pre> <code class="plaintext hljs">Sys.setlocale("LC_ALL", "ru_RU.UTF-8")</code> </pre> <br><p>  Se o sistema for antigo (alguns Windows ou Linux antigo), voc√™ precisar√° primeiro entender qual codifica√ß√£o √© usada por padr√£o - essa n√£o √© uma tarefa t√£o simples, que est√° longe do objetivo deste artigo. </p><br><p>  Agora voc√™ precisa carregar os dados no R. </p><br><pre> <code class="plaintext hljs">df_logging &lt;- read_excel("graphs.xlsx", sheet ="logging")</code> </pre> <br><p>  A op√ß√£o de <code>sheet</code> aqui define o nome da planilha na pasta de trabalho do Excel a partir da qual os dados ser√£o carregados. </p><br><p>  Constru√≠mos a vers√£o mais simples da programa√ß√£o necess√°ria. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location))</code> </pre> <br><img src="https://habrastorage.org/webt/us/fr/of/usfrof2gizhjlejcid_nvctyf6y.png"><br><p>  Em princ√≠pio, quase ‚Äúpronto para o uso‚Äù acabou sendo um cronograma bastante digno, o que √© bastante adequado para uma an√°lise inicial do processo em estudo, mas, do ponto de vista de uma poss√≠vel publica√ß√£o, ainda requer refinamentos significativos. </p><br><p>  Primeiro, vamos trazer o estilo gr√°fico para um estilo mais acad√™mico.  O pacote <code>ggplot2</code> possui v√°rios <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">temas</a> b√°sicos prontos.  O tema <code>theme_classic</code> pode ser reconhecido como o mais adequado para o nosso caso.  Como parte de sua configura√ß√£o, voc√™ pode definir imediatamente o tamanho da fonte e do fone de ouvido.  Minhas prefer√™ncias pessoais pertencem ao sistema de fontes moderno <a href="http://rus.paratype.ru/pt-sans-pt-serif">PT Sans, PT Serif, PT Mono</a> .  Mas, √© claro, voc√™ pode pedir um Times ou Helvetica mais cl√°ssico.  Al√©m disso, a publica√ß√£o em que a publica√ß√£o est√° planejada pode ter instru√ß√µes especiais a esse respeito.  O ponto base √© empiricamente determinado como sendo 12 pt. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12)</code> </pre> <br><img src="https://habrastorage.org/webt/qi/iu/xo/qiiuxoipgdyjymilgxmuobd1eqm.png"><br><p>  Em seguida, mova a legenda do campo direito do gr√°fico para baixo (usando a instru√ß√£o de <code>theme</code> ) e, ao mesmo tempo, atribua nomes significativos aos eixos (instru√ß√£o de <code>labs</code> ).  Ao longo do eixo Y, escrevemos o nome do indicador com unidades de medida ("Registrando volumes, milh√µes de metros c√∫bicos") e exclu√≠mos os r√≥tulos ao longo do eixo X, pois √© claro que os anos est√£o marcados l√°. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + labs(x = "", y = " , . . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/ia/lb/ww/ialbww1uazrcpr094vbiivbkw84.png"><br><p>  Para tornar as unidades de medida mais convenientes para a percep√ß√£o, passaremos de mil metros c√∫bicos.  m para milh√µes.  Para fazer isso, simplesmente divida os valores por 1000, ou seja, ajuste a primeira linha do nosso c√≥digo da seguinte maneira: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000))</code> </pre> <br><p>  Ao mesmo tempo, voc√™ precisa alterar as unidades na inscri√ß√£o: </p><br><pre> <code class="plaintext hljs">labs(x = "", y = " ,  . ", color="")</code> </pre> <br><p>  E imediatamente melhoraremos um pouco o estilo da imagem adicionando pontos para indicar cada valor observado, para o qual adicionaremos uma instru√ß√£o: </p><br><pre> <code class="plaintext hljs">geom_point(size=2)</code> </pre> <br><p>  Voc√™ tamb√©m pode definir explicitamente o estilo das pr√≥prias linhas.  √â l√≥gico tornar o indicador para a R√∫ssia uma linha s√≥lida e para o Distrito Federal da Sib√©ria e o Territ√≥rio de Krasnoyarsk - vers√µes diferentes de intermitentes: </p><br><pre> <code class="plaintext hljs">scale_linetype_manual(values=c("twodash", "solid", "dotted"))</code> </pre> <br><p>  Agora o c√≥digo geral e o gr√°fico ficam assim: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/x_/0i/-q/x_0i-qbvghhild9wwm3jab5kpcc.png"><br><p>  Resta resolver uma tarefa mais substantiva - aumentar o conte√∫do informativo de nossa programa√ß√£o.  Agora, pode-se ver que, em geral, o indicador para todos os objetos de observa√ß√£o aumentou, al√©m disso, desde cerca de 2014 √© mais forte do que antes.  Mas seria muito mais claro se represent√°ssemos diretamente no gr√°fico tamb√©m os valores no primeiro e no √∫ltimo ano e, digamos, no pico de 2011.  A nova instru√ß√£o <code>geom_text</code> ajudar√°: </p><br><pre> <code class="plaintext hljs">geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8)</code> </pre> <br><p>  √Ä primeira vista, parece bastante complicado, e devo dizer que n√£o era realmente t√£o f√°cil mont√°-lo.  Vou tentar explicar o que est√° acontecendo aqui.  Por si s√≥, <code>geom_text</code> adiciona r√≥tulos de texto ao gr√°fico.  Para esta instru√ß√£o, √© necess√°rio um conjunto de dados.  Se especific√°ssemos <code>df_logging</code> diretamente, <code>df_logging</code> inscri√ß√µes acima de cada ponto.  Isso √© feito com bastante frequ√™ncia, mas para s√©ries temporais bastante simples como a nossa, essa abordagem criar√° apenas ru√≠do visual desnecess√°rio sem fornecer novas informa√ß√µes sobre o comportamento do indicador observado.  Portanto, levaremos apenas os anos essenciais para a compreens√£o da din√¢mica do indicador: 2009 (in√≠cio das observa√ß√µes), 2011 (pico local), 2018 (final das observa√ß√µes).  Isso ajudar√° o <code>subset</code> padr√£o. </p><br><p>  Para a exibi√ß√£o correta dos n√∫meros de acordo com a tradi√ß√£o de l√≠ngua russa, precisamos de uma v√≠rgula como separador das partes inteiras e decimais ( <code>decimal.mark</code> ) e, para cortar o n√∫mero de casas decimais, a instru√ß√£o de d√≠gitos.  V√°rias experi√™ncias com ele, incluindo o uso da fun√ß√£o <code>round</code> , levaram ao fato de que, se precisarmos de uma casa decimal, precisamos passar o valor <code>3</code> para <code>digits</code> . </p><br><p>  A op√ß√£o <code>check_overlap</code> n√£o √© diretamente necess√°ria aqui, mas pode ser √∫til em outros casos: √© um controle autom√°tico de etiquetas sobrepostas.  A op√ß√£o vjust controla o posicionamento dos r√≥tulos verticalmente.  O valor √© selecionado com base em considera√ß√µes de gosto. </p><br><img src="https://habrastorage.org/webt/fk/m2/fb/fkm2fbzy05xdbulnx1rs8mznimu.png"><br><p>  Agora, o cronograma √© realmente interessante a considerar! </p><br><p>  Mas um problema inesperado foi descoberto - o valor superior direito √© "cortado" pelo tamanho vertical da imagem.  Existem v√°rias maneiras de resolver esse problema.  Sa√≠ com um pequeno trecho da escala do eixo vertical, com um limite superior expl√≠cito de 250 milh√µes de metros c√∫bicos.  m: </p><br><pre> <code class="plaintext hljs">scale_y_continuous(limits = c(0,250))</code> </pre> <br><img src="https://habrastorage.org/webt/nm/sv/il/nmsvilg49qwuzhj3biqrhohepao.png"><br><p>  Feito!  Portanto, o c√≥digo final fica assim: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + scale_y_continuous(limits = c(0,250)) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><blockquote>  A imagem resultante est√° inclu√≠da na monografia: Moderniza√ß√£o estrutural como um fator para aumentar a competitividade da regi√£o (no exemplo do Territ√≥rio de Krasnoyarsk) / ed.  Shishatsky N.G. - Novosibirsk: IEOPP SB RAS, 2020 (no prelo). </blockquote><br><h2 id="eksport">  Exportar </h2><br><p>  O plug-in de visualiza√ß√£o de gr√°ficos embutido no RStudio permite exportar imagens em v√°rios formatos sem comandos adicionais, em apenas alguns cliques.  O problema √© que, para tarefas pr√°ticas, esse servi√ßo √© praticamente in√∫til.  Ao salvar em formatos rasterizados (.jpg, .png), a configura√ß√£o padr√£o √© muito baixa; portanto, quando voc√™ importa uma imagem, por exemplo, no Word, ela fica desfocada.  Com o vetor .eps ou .pdf, a situa√ß√£o √© francamente pior: a economia ocorre com erros que n√£o permitem a abertura do arquivo ou √© salva sem a possibilidade de usar inscri√ß√µes no idioma russo. </p><br><p>  A solu√ß√£o √© usar a fun√ß√£o <code>ggplot</code> pacote <code>ggplot</code> . </p><br><p>  Se a sa√≠da exigir um arquivo raster comum, por exemplo, no formato .png, tudo ser√° bem simples: </p><br><pre> <code class="plaintext hljs">ggsave("logging.png", width=709, height=549, units="px")</code> </pre> <br><p>  A geometria (op√ß√µes <code>width</code> e <code>height</code> ) e as unidades de medida ( <code>units</code> ) podem ser omitidas, mas, por padr√£o, a imagem ser√° exportada em quadrado, o que dificilmente √© conveniente.  Portanto, √© melhor criar sua pr√≥pria propor√ß√£o e o tamanho necess√°rio e definir esses par√¢metros manualmente, como √© feito na linha de c√≥digo acima. </p><br><p>  Para o uso subsequente da imagem em publica√ß√µes em papel, √© razo√°vel exportar a imagem em formatos vetoriais, para que posteriormente no layout haja a possibilidade de alterar livremente a geometria da imagem.  Muitas revistas preferem o formato .eps - tamb√©m √© conveniente us√°-lo para exportar para o Word.  Vamos precisar do driver Cairo j√° instalado e conectado: </p><br><pre> <code class="plaintext hljs">ggsave(filename = "export.eps", width=15, height=11.6, units="cm", device = cairo_ps)</code> </pre> <br><p>  Os arquivos ser√£o salvos no diret√≥rio atual em que o script R. est√° localizado. </p><br><h1 id="chto-esche-pochitat">  O que mais ler </h1><br><p>  A literatura sobre gr√°ficos em R √© bastante.  Aqui est√£o alguns exemplos, o primeiro dos quais √© o trabalho do autor do pacote ggplot: </p><br><ul><li>  <a href="https://ggplot2-book.org/">Wickham, Hadley.</a>  <a href="https://ggplot2-book.org/">ggplot2: Gr√°ficos elegantes para an√°lise de dados</a> ; </li><li>  <a href="https://r-graphics.org/">Chang, Winston.</a>  <a href="https://r-graphics.org/">R Graphics Cookbook, 2¬™ edi√ß√£o</a> ; </li><li>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Prabhakaran, Selva.</a>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">As 50 principais visualiza√ß√µes do ggplot2 - a lista principal (com c√≥digo R completo)</a> . </li></ul><br><p>  Provavelmente, o melhor e mais detalhado livro sobre gr√°ficos em R em russo √© o livro de <a href="https://tsamsonov.github.io/r-geo-course/">Timofei Samsonov.</a>  <a href="https://tsamsonov.github.io/r-geo-course/">Visualiza√ß√£o e an√°lise de dados geogr√°ficos na linguagem R.</a>  Este √© um excelente guia detalhado para muitos problemas comuns e espec√≠ficos que podem ser resolvidos com o R. </p><br><p>  Voc√™ tamb√©m pode recomendar um livro em russo sobre R em geral: <br>  <a href="https://github.com/ranalytics/data-mining">Shitikov V.K., Mastitsky S.E. Classifica√ß√£o, regress√£o, algoritmos de minera√ß√£o de dados usando R. 2017</a> . </p><br><p>  Apenas um exemplo interessante e motivador √© uma <a href="http://johnburnmurdoch.github.io/slides/r-ggplot/">apresenta√ß√£o poderosa sobre o uso do ggplot2 na prepara√ß√£o de desenhos para o influente jornal Financial Times</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt486024/">https://habr.com/ru/post/pt486024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt486000/index.html">ADSM3. Sistemas IPAM / DCIM</a></li>
<li><a href="../pt486006/index.html">Armazene o status do bate-papo na pilha</a></li>
<li><a href="../pt486010/index.html">Fazendo uma demonstra√ß√£o para um telefone antigo - AONDEMO</a></li>
<li><a href="../pt486014/index.html">SLAC Tour: Laborat√≥rio Nacional de Aceleradores do Departamento de Energia dos EUA em Stanford</a></li>
<li><a href="../pt486018/index.html">Resultados da Pesquisa da Sess√£o</a></li>
<li><a href="../pt486028/index.html">Redes neurais na produ√ß√£o de pr√≥teses</a></li>
<li><a href="../pt486030/index.html">Revis√£o da luz de rua LED TL-SREET 55 5K</a></li>
<li><a href="../pt486032/index.html">Como se tornar um designer de di√°logo</a></li>
<li><a href="../pt486034/index.html">Entrada r√°pida para gerenciamento de produtos atrav√©s de c√≥digo aberto</a></li>
<li><a href="../pt486036/index.html">An√°lise de sentimento de texto no Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>