<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò†Ô∏è üëÉüèº üåï Estaci√≥n meteorol√≥gica de senderismo port√°til MiniBTH2 / 2M ü§¥ üßóüèΩ üë©üèΩ‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el articulo anteriorSe describi√≥ la historia de la creaci√≥n y la experiencia del uso de la estaci√≥n meteorol√≥gica de campo miniBTH. Este instrument...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estaci√≥n meteorol√≥gica de senderismo port√°til MiniBTH2 / 2M</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384641/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">articulo</font></a><font style="vertical-align: inherit;"> anterior</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se describi√≥ la historia de la creaci√≥n y la experiencia del uso de la estaci√≥n meteorol√≥gica de campo miniBTH. Este instrumento mide y muestra continuamente en la pantalla en forma gr√°fica la presi√≥n atmosf√©rica, temperatura y humedad actuales. Todos los par√°metros medidos se guardan en la tarjeta de memoria una vez por minuto. Adem√°s, el dispositivo tiene un sensor de luz, y los datos del sensor de presi√≥n se pueden convertir a una altura barom√©trica. Gracias al uso de una pantalla transflectiva, las lecturas del dispositivo son f√°cilmente legibles incluso a la luz del sol, y la carcasa del dispositivo est√° sellada. La experiencia con el uso de este dispositivo result√≥ ser generalmente positiva, pero se identificaron una serie de deficiencias que se examinaron en detalle en un art√≠culo anterior, siendo el principal un gran peso. En este art√≠culo consideraremos la experiencia de creaci√≥n y operaci√≥n de la segunda versi√≥n, m√°s conveniente y funcional. Notaque al momento de escribir el √∫ltimo art√≠culo, la segunda versi√≥n del dispositivo ya estaba en un alto grado de preparaci√≥n, por lo tanto, se describieron las principales formas de superar las deficiencias.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e32/be3/80f/e32be380f9124532be2521ebdd13cd1a.jpg"><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuevo dise√±o del dispositivo y reducci√≥n de peso.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera estaci√≥n meteorol√≥gica MiniBTH se concibi√≥ como un dispositivo independiente dise√±ado principalmente para su uso en caminatas. </font><font style="vertical-align: inherit;">Es por eso que la caja del instrumento se hizo herm√©tica, se utiliz√≥ una pantalla transflectiva y se calcul√≥ la capacidad de la bater√≠a durante m√°s de un mes de funcionamiento. </font><font style="vertical-align: inherit;">El principal inconveniente de la primera versi√≥n, en mi opini√≥n, era mucho peso, as√≠ que decid√≠ hacer la segunda versi√≥n lo m√°s compacta y ligera posible. </font><font style="vertical-align: inherit;">Para hacer esto, debe separar la placa del dispositivo del tama√±o m√°s peque√±o posible: un poco m√°s grande que la pantalla, y hacer que la carcasa sea lo m√°s delgada y amurallada posible. </font><font style="vertical-align: inherit;">Las partes electr√≥nicas y de software se discutir√°n m√°s adelante, pero por ahora pasamos al dise√±o de la carcasa de la segunda versi√≥n del dispositivo. </font><font style="vertical-align: inherit;">Las ideas principales para reducir el tama√±o del caso fueron las siguientes:</font></font><br>
<br>
<ul>
<li>  ,       ,     .</li>
<li>    ,        .</li>
<li>    .             ,     .</li>
<li>      .</li>
<li>        .</li>
<li>    ¬´¬ª     .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, fue posible conciliar las ideas propuestas entre s√≠ y hacer una carcasa bastante compacta hecha de capralon del siguiente dise√±o: </font></font><br>
<br>
<img src="https://habrastorage.org/files/731/687/dbc/731687dbc17646cd8c8dcb8fdd33b792.jpg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> supone que el </font><b><font style="vertical-align: inherit;">bloque del sensor es</font></b><font style="vertical-align: inherit;"> extra√≠ble, unido a la caja con dos tornillos, y la estanqueidad del acoplamiento del bloque del sensor y la carcasa est√° asegurada por una junta anular a trav√©s de la cual pasan los cables. El conjunto de sensores se usa igual que en la primera versi√≥n del dispositivo: sensor de presi√≥n MS5803 y sensor de humedad sht21. La unidad del sensor est√° pegada con sellador de dos tapas de capralon. Entre ellos hay una placa en la que est√°n montados los sensores. El tablero est√° hecho de fibra de vidrio de 0,75 mm de espesor. Durante el montaje de la unidad, para proteger el sensor de humedad de los vapores liberados por el sellador, su ventana se sell√≥ con cinta adhesiva Kapton (como se recomienda en la documentaci√≥n).</font></font><br>
<br>
<img src="https://habrastorage.org/files/384/7c1/3e8/3847c13e8c024fb8afe48c6f04e9d792.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dise√±o de la unidad del sensor tiene en cuenta las deficiencias identificadas durante el funcionamiento de la primera versi√≥n del dispositivo. El sensor de humedad no est√° cubierto con una tapa de malla SF2, sino que simplemente se coloca en el hueco de la unidad. Esto resuelve el problema de humedecer la tapa, lo que conduce a un "pegado" prolongado de las lecturas de humedad en la marca m√°xima y, al mismo tiempo, la ubicaci√≥n en el receso con el lado sensible del cuerpo elimina el da√±o causado por objetos externos. Se proporciona una protuberancia adicional en el bloque del sensor del dispositivo versi√≥n 2M para proteger el sensor de humedad del da√±o causado por objetos largos y delgados. El problema de proteger el sensor de presi√≥n MS5803 de la luz solar directa tambi√©n se resuelve en la etapa de dise√±o del dispositivo. La parte sensible del sensor est√° cubierta con una tapa hecha de poliestireno negro pegado en un hueco en la carcasa.Dado que el sensor tambi√©n es sensible a la iluminaci√≥n desde el reverso, la metalizaci√≥n se deja en el tablero en el sitio de instalaci√≥n en el lado opuesto.</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd1/a43/644/cd1a4364424f48fc9f04ed2fb7bfd4d4.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se accede al aire al sensor de presi√≥n a trav√©s de un canal delgado (0,5 mm) entre la carcasa del instrumento y el bloque del sensor. Tenga en cuenta que al elegir este dise√±o del bloque sensor, exist√≠a la preocupaci√≥n de que en el agua de lluvia fluir√≠a hacia un espacio delgado entre el bloque sensor y el cuerpo del dispositivo y bloquear√≠a completamente el canal de acceso de aire directamente al sensor de presi√≥n, lo que provocar√≠a un error sistem√°tico en las lecturas de presi√≥n debido a tensi√≥n superficial del agua. Las pruebas de los dispositivos bajo la lluvia y en la ducha mostraron que debido a la no humectabilidad de capralon, no se producen fugas con un grosor de canal de 0,5 mm. Experimentos m√°s exhaustivos han demostrado que si el bloque del sensor se instala con una inclinaci√≥n y, por lo tanto, el grosor del canal se reduce hasta que el borde del bloque del sensor toque la carcasa, el agua puede filtrarse a la carcasa del instrumentoy conduce a una disminuci√≥n en las lecturas de presi√≥n en aproximadamente 0.7 mm Hg. Si la unidad del sensor se instala de manera uniforme, el agua no tiene fugas.</font></font><br>
<br>
<b>   </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primera vista, poco ha cambiado externamente, pero en su dise√±o se tuvo que aplicar una serie de nuevas soluciones t√©cnicas. Por un lado, reducir el n√∫mero de tornillos de sujeci√≥n y aumentar la distancia entre ellos requiere un marco de sujeci√≥n m√°s r√≠gido y / o una junta m√°s blanda para garantizar la compresi√≥n de la junta en toda su longitud. Por otro lado, por razones de conveniencia de usar el dispositivo, se decidi√≥ fabricar el marco de sujeci√≥n de pl√°stico, y esto, por el contrario, reducir√° su rigidez. Una posible forma de resolver esta contradicci√≥n es usar una almohadilla de goma m√°s suave. Esta opci√≥n es m√°s razonable que tratar de colocar "muletas" en forma de introducir insertos met√°licos r√≠gidos o elementos el√°sticos en la estructura del marco de sujeci√≥n y usar la misma cinta dura de la grabadora como sello.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de una breve b√∫squeda en Internet, se encontr√≥ una soluci√≥n para hacer juntas de goma usted mismo. Existen siliconas especiales de dos componentes que se utilizan para la fabricaci√≥n de moldes y juntas. La tecnolog√≠a para trabajar con estas siliconas se ve brevemente de la siguiente manera: dos componentes l√≠quidos deben mezclarse entre s√≠, luego de lo cual se vierten en el molde durante varios minutos y esperan hasta que la composici√≥n se endurezca. Despu√©s del endurecimiento, se obtiene un caucho de silicona muy flexible y suave, que se separa f√°cilmente de la forma en que se solidific√≥. Existen l√≠neas enteras de tales siliconas de diferentes fabricantes, que difieren entre s√≠ por el tipo de catalizador endurecedor utilizado y las propiedades fisicomec√°nicas y qu√≠micas del caucho resultante. Todas las siliconas tienen un alargamiento a la rotura igual a cientos de por ciento,relativamente suave, puede trabajar a temperaturas de hasta 200 grados cent√≠grados y relativamente resistente a los productos qu√≠micos. Las siliconas con un catalizador de platino son qu√≠micamente m√°s estables y tienen tolerancia alimentaria. Una de las aplicaciones t√≠picas de tales siliconas es la fabricaci√≥n de moldes para fundici√≥n a partir de yeso, cemento, jab√≥n o incluso chocolate. La segunda aplicaci√≥n t√≠pica es la fabricaci√≥n de juntas.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre la fabricaci√≥n de juntas de goma de silicona</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En su ciudad, encontr√≥ un proveedor que ofrece una l√≠nea completa de siliconas con un catalizador de esta√±o Sk-76x y silicona de platino Sk-790. </font><font style="vertical-align: inherit;">Para los experimentos, compr√© dos juegos: silicona catalizadora de platino Sk-790 y silicona m√°s suave Sk-762, y comenc√© a experimentar con la fundici√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, hacer un molde para moldear no fue un problema, simplemente fres√© las ranuras de la forma deseada en una l√°mina de acrilato de polimetilo. Al principio se supon√≠a que deb√≠a verter silicona en el molde y cubrirlo con una segunda hoja plana de vidrio org√°nico, exprimiendo el exceso de silicona. Sin embargo, result√≥ que no todo es tan simple, y cambi√© ligeramente la tecnolog√≠a. El principal problema en la fundici√≥n de silicona son las burbujas de aire. Se forman tanto cuando se mezclan los componentes de partida como cuando la composici√≥n se vierte en un molde. Uno de los m√©todos para controlar las burbujas, recomendado por el fabricante, es colocar la silicona preparada para verterla al vac√≠o durante varios minutos antes de verterla. En el vac√≠o, todas las burbujas se hinchan y explotan, y todo el aire sale de ellas. Exteriormente, recuerda vagamente a la leche desbocada. Para luchar contra las burbujassurgiendo durante el vertido, puede pronunciar la composici√≥n despu√©s de verter. Sin embargo, decid√≠ no forzar a mis colegas que tienen una c√°mara de vac√≠o y buscar una forma m√°s f√°cil de hacer piezas de fundici√≥n sin burbujas. Esto result√≥ no ser tan dif√≠cil, porque todas las burbujas formadas durante la mezcla y el vertido son bastante grandes. Aparentemente, la viscosidad de la silicona evita la formaci√≥n de peque√±as burbujas durante la captura de aire o al aplastar burbujas grandes. Por lo tanto, las burbujas son claramente visibles a simple vista, e incluso logran flotar unos pocos mil√≠metros hasta el endurecimiento de la silicona. Por lo tanto, se supone que la tecnolog√≠a de vertido es la siguiente: se aplica silicona con exceso a lo largo de la ranura en el molde, y despu√©s de unos minutos se elimina el exceso de silicona, junto con todas las burbujas, con una esp√°tula de metal. Si la burbuja se adhiere a la pared del molde,Se puede eliminar con la misma esc√°pula. La superficie superior del relleno se vuelve lisa debido a la acci√≥n de la tensi√≥n superficial y la gravedad. Lo principal es eliminar de manera uniforme el exceso de silicona de la parte superior del molde. Pero si cubre el bastidor con una tapa, existe un gran riesgo de introducir la burbuja de aire en el molde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, se resolvi√≥ el problema de la fabricaci√≥n de juntas de cualquier forma, lo que permiti√≥ elegir cualquier opci√≥n de dise√±o conveniente para la cubierta frontal. Un dilema separado fue la elecci√≥n del material para la parte transparente de la tapa. Hay dos tipos de material transparente disponibles para m√≠. Uno es el policarbonato viscoso y flexible, que, sin embargo, no es muy resistente a la tensi√≥n mec√°nica y no es muy transparente, pero tiene un tinte azulado. El segundo es el acrilato de polimetilo transparente pero fr√°gil. A pesar de que se us√≥ policarbonato en la primera versi√≥n del dispositivo, en la segunda decid√≠ usar acrilato de polimetilo. Por un lado, es m√°s transparente, lo que mejora la legibilidad de la pantalla bajo una luz brillante y dispersa, por otro lado, introduce menos desviaciones en las lecturas de los sensores de luz. Adem√°s, se raya menos en condiciones de funcionamiento similares.Para reducir la probabilidad de grietas de acrilato durante un impacto frontal y mejorar la apariencia del dispositivo, la cubierta transparente se hace gruesa (5 mm) y el marco de presi√≥n se monta en una repisa fresada especial. La cubierta superior de este dise√±o resulta ser bastante r√≠gida y puede usarse tanto con una junta de silicona suave Sk-762 como con una m√°s r√≠gida de Sk-790. Al final, decid√≠ optar por la silicona 790, porque es con un catalizador de platino y es qu√≠micamente m√°s inerte.y se puede usar tanto con una junta de silicona suave Sk-762 como con una m√°s r√≠gida de Sk-790. Al final, decid√≠ optar por la silicona 790, porque es con un catalizador de platino y es qu√≠micamente m√°s inerte.y se puede usar tanto con una junta de silicona suave Sk-762 como con una m√°s r√≠gida de Sk-790. Al final, decid√≠ optar por la silicona 790, porque es con un catalizador de platino y es qu√≠micamente m√°s inerte.</font></font><br>
<br>
<img src="https://habrastorage.org/files/a20/604/278/a20604278d4c4e50be78f51b7eecde27.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La capacidad de fundir juntas de cualquier forma hizo posible hacer una escotilla para un acceso r√°pido a SD, que se implement√≥ en la versi√≥n 2M del dispositivo. Finalmente, la idea de hacer la escotilla tom√≥ forma bastante tarde, cuando se ensambl√≥ y fabric√≥ la versi√≥n 2 del dispositivo. La creaci√≥n de la escotilla se basaba en tres problemas: c√≥mo sellarla, d√≥nde colocarla y c√≥mo solucionarla. El primer problema se resuelve haciendo que la junta tenga la forma deseada. El segundo problema tambi√©n se resolvi√≥, porque en el rebajo en el lado inferior hay un lugar libre en el que es conveniente ocultar la tapa que sobresale hacia afuera. En mi opini√≥n, resolv√≠ el tercer problema de la manera m√°s simple: la escotilla se fija con tornillos. Por un lado, no abrir√° sin una llave, pero por casualidad tampoco se abrir√°. Y en los dispositivos sellados en serie, las cubiertas tambi√©n suelen fijarse con tornillos.</font></font><br>
<br>
<img src="https://habrastorage.org/files/9b1/576/58d/9b157658d7de432cae6814881aee559d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La escotilla en s√≠ se encuentra en la parte inferior del cuerpo, y es un orificio pasante fresado de forma oblonga, con un escal√≥n en forma de T en la secci√≥n, en la cual la junta est√° engarzada. En el exterior, la junta se presiona con una cubierta plana, que se fija a la caja con dos tornillos M3x5. El grosor de la pared inferior de la caja es de 5 mm, la profundidad de la repisa es de 2 mm, el grosor de la junta sin comprimir es de 2,5 mm y el grosor de la cubierta es de 2 mm. Los orificios en los que se atornillan los tornillos no son pasantes, est√°n empotrados en el cuerpo por 3.9 mm, la rosca en ellos se corta casi a toda la profundidad. El enhebrado no es posible en una m√°quina CNC disponible para m√≠, por lo que se llev√≥ a cabo utilizando tres grifos especialmente afilados y un destornillador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se prob√≥ la estanqueidad de la carcasa terminada por inmersi√≥n en agua durante 12 horas. </font><font style="vertical-align: inherit;">Se utiliz√≥ papel de filtro para detectar posibles fugas. </font><font style="vertical-align: inherit;">Los recintos eran herm√©ticos. </font><font style="vertical-align: inherit;">Para evitar la condensaci√≥n de agua dentro de la caja a bajas temperaturas, se coloca una bolsa de tela con gel de s√≠lice en el volumen libre cerca de la bater√≠a. </font><font style="vertical-align: inherit;">Las pruebas y otras operaciones mostraron que no se forma condensaci√≥n en la carcasa.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre el desarrollo de la parte electr√≥nica</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La parte electr√≥nica de la segunda versi√≥n del dispositivo en t√©rminos de las soluciones utilizadas es muy similar a la primera versi√≥n. </font><font style="vertical-align: inherit;">El microcontrolador ATmega1284p que funciona a una frecuencia de 8 MHz se utiliza como procesador principal.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/878/13e/3f3/87813e3f3d8147a382fab117e5e6892e.gif"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los sensores DS1337 y los relojes en tiempo real est√°n conectados a trav√©s del bus I2C. Una se√±al adicional con una frecuencia de 1 Hz est√° conectada a una entrada separada del microcontrolador del procesador. Esto le permite utilizar los modos de suspensi√≥n con el reloj principal detenido para una mejor eficiencia energ√©tica. La bater√≠a se carga usando el controlador max1879 con una llave externa, pero ahora est√° directamente conectada al cargador a trav√©s de prensaestopas. Para indicar la corriente de carga, se introduce un circuito de medici√≥n de corriente en el amplificador operacional TS321, que es completamente similar al utilizado en la primera versi√≥n del dispositivo. La pantalla y la tarjeta SD est√°n conectadas al controlador a trav√©s del mismo bus SPI, sin embargo, ahora el circuito proporciona la capacidad de apagar la alimentaci√≥n de la tarjeta SD mientras no est√° en uso.Los botones t√°ctiles en los detectores de fase son similares a los utilizados en la primera versi√≥n del dispositivo.</font></font><br>
<br>
<img src="https://habrastorage.org/files/41f/896/8f1/41f8968f1a724007bedfe025b6226a3b.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las placas de los botones t√°ctiles se colocan en el panel lateral del dispositivo, y el fresado se realiza por encima de ellas para facilitar la b√∫squeda a ciegas. </font><font style="vertical-align: inherit;">Todav√≠a hay tres botones, el superior se llama convencionalmente "Entrada", el medio es "-" y el inferior es "+". </font><font style="vertical-align: inherit;">Casi todos los detalles del dispositivo se pudieron colocar en un tablero de 59x41 mm con bordes redondeados. </font><font style="vertical-align: inherit;">Solo los compresores protectores y las bobinas L2-L3 se montan directamente en los tornillos: entradas herm√©ticas. </font></font><br>
<br>
<img src="https://habrastorage.org/files/80b/bdc/33b/80bbdc33b7ca4ce981616b24365ab203.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los sensores de luz se colocan en una placa delgada separada ubicada encima de la pantalla. </font><font style="vertical-align: inherit;">El tama√±o del tablero se elige de modo que cuando se ensambla, la pantalla cubra casi todo el frente del tablero. </font></font><br>
<br>
<img src="https://habrastorage.org/files/93b/09a/1e9/93b09a1e932c40498eb7ad209d50f24e.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para darle al dispositivo una apariencia m√°s est√©tica, se realiz√≥ una superposici√≥n decorativa que cubr√≠a todo, excepto la parte funcional de la pantalla y los sensores de luz.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre la interfaz del dispositivo y el desarrollo de software</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, vale la pena se√±alar que el borrador de la segunda versi√≥n del dispositivo se transfiri√≥ de Arduino a AVR Studio. Esto se hizo porque no hay un beneficio real de Arduino, excepto el firmware r√°pido a trav√©s del gestor de arranque y UART, pero hay problemas con watchdog, ahorro de energ√≠a y algunas peque√±as cosas. La situaci√≥n se agrava a√∫n m√°s por el hecho de que no hay plataformas Arduino est√°ndar en el ATmega1284p, por lo que hubo una opci√≥n: terminar el IDE y el gestor de arranque Arduino, o transferir el proyecto a AVR Studio. Para no interferir mucho con el trabajo de la biblioteca SDFATlib utilizada, dej√© la parte del n√∫cleo arduino en el proyecto relacionada con la inicializaci√≥n, trabajando con el temporizador y las l√≠neas de entrada / salida. Sin embargo, tuve que hacer cambios en la biblioteca SDFATlib, y esto se debe a un cambio en la polaridad de la se√±al SCK al usar el circuito de desconexi√≥n de la tarjeta SD.Por cierto, SDFATlib puede funcionar tanto con la biblioteca SPI heredada de arduino como con la suya. En mi proyecto, SDFATlib est√° configurado para trabajar con SPI a trav√©s de su propia biblioteca para AVR (por cierto, esta es su configuraci√≥n est√°ndar, aunque es posible trabajar a trav√©s de las bibliotecas Arduino).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una diferencia importante entre la segunda versi√≥n del dispositivo es el ahorro de energ√≠a. Dado que la pantalla a color incluida consume aproximadamente 3 mA en modo activo, la forma principal de ahorrar energ√≠a es poner la pantalla en modo de suspensi√≥n despu√©s de un tiempo de inactividad del dispositivo. La pantalla se enciende mediante la misma combinaci√≥n de botones de "inicio", que se utiliz√≥ para encender la luz de fondo en la primera versi√≥n del dispositivo, manteniendo presionados los botones extremos, con el promedio liberado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando la pantalla est√° encendida, los sensores y los botones t√°ctiles se interrogan con un per√≠odo del ciclo principal de aproximadamente 200 ms, con el mismo per√≠odo interrogado, y se actualizan algunos elementos de la pantalla, como el estado de los botones y el tiempo. La informaci√≥n que se muestra de los sensores se actualiza con un per√≠odo dos veces m√°s largo, aproximadamente una vez cada 400 ms. Este per√≠odo, en mi opini√≥n, es √≥ptimo, porque con un per√≠odo de actualizaci√≥n m√°s corto, los n√∫meros cambiantes son inconvenientes para leer, y con uno m√°s largo, el retraso en las lecturas ser√° notable. La frecuencia de interrogaci√≥n de todos los sensores se seleccion√≥ especialmente dos veces m√°s que la frecuencia de actualizaci√≥n de la pantalla, porque dos par√°metros medidos se leen a su vez desde los sensores de presi√≥n y humedad: durante una interrogaci√≥n, temperatura, durante la siguiente interrogaci√≥n: presi√≥n o humedad. Todo el tiempo "libre" del ciclo principal, el procesador est√° en modo de reducci√≥n de ruido ADC,midiendo la corriente de la bater√≠a. Como resultado, cuando la pantalla est√° encendida, el dispositivo consume aproximadamente 6 mA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando la pantalla est√° apagada, no es necesario actualizar la pantalla, por lo que los sensores y botones se sondean con menos frecuencia, cada 500 ms, y el procesador pasa todo su tiempo libre en modo apagado. Se sale del modo de apagado por interrupci√≥n de la interrupci√≥n de cambio de pin del reloj de tiempo real. En este caso, los datos promediados de todos los sensores se registran en la tarjeta de memoria una vez por minuto, independientemente del modo de pantalla. Para reducir el consumo de energ√≠a, toda la periferia del microcontrolador se enciende inmediatamente antes de su uso a trav√©s de los registros PRR y se apaga despu√©s de su uso. La corriente consumida por el dispositivo con la pantalla apagada es, en promedio, de aproximadamente 250 ŒºA, de los cuales aproximadamente 100 ŒºA se encuentran en la pantalla en modo de apagado, y el resto est√° principalmente en el microcontrolador. En este caso, una disminuci√≥n en la frecuencia de los sensores de sondeo pr√°cticamente no reduce el consumo de corriente,porque una parte importante de la energ√≠a se consume durante el sondeo de los botones t√°ctiles. Vale la pena se√±alar que el tipo de reloj utilizado tambi√©n afecta el consumo de energ√≠a. Entonces, cuando se registra el microcontrolador desde el oscilador RC incorporado, el consumo de corriente en el modo fuera de pantalla es ligeramente menor que cuando se usa cuarzo externo. Obviamente, esto se debe a un arranque m√°s r√°pido y a una menor capacidad de disipaci√≥n del oscilador RC. Como resultado, dado que en esta versi√≥n del dispositivo no hay requisitos especiales para la estabilidad de la frecuencia de reloj del microcontrolador, en la versi√≥n final del dispositivo, el oscilador RC incorporado se utiliza como generador de reloj (aunque hay un lugar para el cuarzo en el tablero).que el tipo de reloj utilizado tambi√©n afecta el consumo de energ√≠a. Entonces, cuando se registra el microcontrolador desde el oscilador RC incorporado, el consumo de corriente en el modo fuera de la pantalla es ligeramente menor que cuando se usa cuarzo externo. Obviamente, esto se debe a un arranque m√°s r√°pido y a una menor capacidad de disipaci√≥n del oscilador RC. Como resultado, dado que en esta versi√≥n del dispositivo no hay requisitos especiales para la estabilidad de la frecuencia de reloj del microcontrolador, en la versi√≥n final del dispositivo, el oscilador RC incorporado se usa como generador de reloj (aunque hay un lugar para el cuarzo en el tablero).que el tipo de reloj utilizado tambi√©n afecta el consumo de energ√≠a. Entonces, cuando se registra el microcontrolador desde el oscilador RC incorporado, el consumo de corriente en el modo fuera de pantalla es ligeramente menor que cuando se usa cuarzo externo. Obviamente, esto se debe a un arranque m√°s r√°pido y a una menor capacidad de disipaci√≥n del oscilador RC. Como resultado, dado que en esta versi√≥n del dispositivo no hay requisitos especiales para la estabilidad de la frecuencia de reloj del microcontrolador, en la versi√≥n final del dispositivo, el oscilador RC incorporado se utiliza como generador de reloj (aunque hay un lugar para el cuarzo en el tablero).Esto se debe a un arranque m√°s r√°pido y a una menor capacidad de disipaci√≥n del oscilador RC. Como resultado, dado que en esta versi√≥n del dispositivo no hay requisitos especiales para la estabilidad de la frecuencia de reloj del microcontrolador, en la versi√≥n final del dispositivo, el oscilador RC incorporado se utiliza como un generador de reloj (aunque hay un lugar para el cuarzo en el tablero).Esto se debe a un arranque m√°s r√°pido y a una menor capacidad de disipaci√≥n del oscilador RC. Como resultado, dado que en esta versi√≥n del dispositivo no hay requisitos especiales para la estabilidad de la frecuencia de reloj del microcontrolador, en la versi√≥n final del dispositivo, el oscilador RC incorporado se utiliza como generador de reloj (aunque hay un lugar para el cuarzo en el tablero).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los cambios importantes afectaron los modos de visualizaci√≥n de la informaci√≥n, se tomaron en cuenta todas las deficiencias identificadas al usar la primera versi√≥n del dispositivo y se realizaron los cambios correspondientes en el programa. Ahora hay 4 modos diferentes de visualizaci√≥n de datos (el modo de visualizaci√≥n se refiere a la apariencia de la pantalla principal), el cambio se realiza mediante el bot√≥n enter. </font></font><br>
<br>
<img src="https://habrastorage.org/files/466/e4c/d49/466e4cd4995e436d904c74adf2bc4d50.jpg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primera pantalla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se utiliza para mostrar el historial de cambios en los datos meteorol√≥gicos en forma de gr√°ficos, as√≠ como las lecturas actuales de los sensores, la fecha y la hora. A primera vista, puede parecer que pr√°cticamente nada ha cambiado aqu√≠ desde la primera versi√≥n del dispositivo, pero de hecho no lo ha sido. Ahora el dispositivo recuerda la temperatura, la humedad y la presi√≥n cada dos minutos, y almacena datos de los √∫ltimos 4 d√≠as en RAM, un total de 2880 lecturas. Todos estos datos est√°n disponibles para su visualizaci√≥n, en diferentes escalas de tiempo. Por defecto, los √∫ltimos datos se muestran en la pantalla, sin embargo, mantener presionado el bot√≥n "-" le permite cambiar al modo de rebobinado y luego usar los botones "+" y "-" para moverse hacia adelante y hacia atr√°s a lo largo del eje de tiempo. Salga del modo de rebobinado presionando el bot√≥n "enter". El cambio de las escalas a tiempo se realiza mediante el bot√≥n "+". La versi√≥n final del firmware proporciona 4 escalas de tiempo:</font></font><br>
<ul>
<li>2/ (3.2    ).</li>
<li>6/ (9.6    ).</li>
<li>10/ (16    ).</li>
<li>30/ (48    ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principio, tambi√©n es posible cualquier otra opci√≥n de escala que sea m√∫ltiplo de 2 minutos. Ahora, al construir gr√°ficos, son posibles diversas interpretaciones de datos meteorol√≥gicos. La presi√≥n se puede mostrar directamente o se puede convertir a una altura barom√©trica relativa a un punto con una presi√≥n de referencia dada. En el primer caso, la escala correcta se grad√∫a en mil√≠metros de mercurio, y en el segundo caso, en metros. La humedad tambi√©n se puede mostrar directamente (relleno azul) o recalcularse al punto de roc√≠o, luego, adem√°s de la curva de temperatura, tambi√©n se muestra una curva de punto de roc√≠o (frambuesa). El modo de visualizaci√≥n de presi√≥n y humedad cambia en la segunda pantalla. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segunda pantalla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como en la primera versi√≥n, est√° reservado para mostrar toda la informaci√≥n sobre el estado actual del dispositivo y los sensores. Aqu√≠ se muestran par√°metros como el voltaje de la bater√≠a, la corriente de carga, las lecturas actuales de los sensores principales, la presi√≥n de altitud cero, la hora y la fecha. La √∫ltima l√≠nea muestra el resultado del √∫ltimo intento de escribir en la tarjeta SD y la versi√≥n actual de la interpretaci√≥n de los datos meteorol√≥gicos en los gr√°ficos. En esta pantalla, con los botones "+" y "-", puede cambiar la interpretaci√≥n de los datos meteorol√≥gicos y, al presionar la secuencia de inicio, ingrese al modo de configuraci√≥n del reloj. En cuanto a la tarjeta SD, se muestra el resultado de la √∫ltima llamada. Si la grabaci√≥n fue exitosa, se muestra la cantidad de bytes grabados durante el √∫ltimo acceso; si ocurre un error, se muestra "Err", y si la tarjeta no estaba en el lector de tarjetas, se muestra "---". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tercera pantalla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dise√±ado para establecer la presi√≥n de referencia de un alt√≠metro barom√©trico. La primera l√≠nea muestra la presi√≥n de referencia actual y la altura barom√©trica correspondiente. La presi√≥n atmosf√©rica actual se muestra a continuaci√≥n. La siguiente es una tabla del historial de presiones de referencia con la fecha y hora de su instalaci√≥n, la √∫ltima l√≠nea muestra la fecha y la hora. La presi√≥n de referencia se cambia usando los botones "+" y "-", y se agrega autom√°ticamente a la tabla de historial si, al cambiar a la siguiente pantalla, la presi√≥n de referencia actual establecida es diferente del √∫ltimo valor hist√≥rico. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuarta pantalla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° destinado a la visualizaci√≥n detallada de los datos proporcionados por el sensor de luz max44008 RGB. Las primeras cinco l√≠neas muestran la iluminaci√≥n actual de los canales en forma num√©rica y gr√°fica, seguidas de las coordenadas de color estimadas y la temperatura de color de la luz incidente. Esto es seguido por una l√≠nea con dos lecturas en suites. El n√∫mero izquierdo se refiere al sensor de corriente max44008, el derecho a max44009. Las √∫ltimas cuatro l√≠neas coinciden completamente con las de la primera pantalla. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operaci√≥n de luz de fondo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ligeramente cambiado en comparaci√≥n con la primera versi√≥n del dispositivo, porque el modo de funcionamiento de la pantalla ha cambiado. La luz de fondo todav√≠a se enciende mediante la combinaci√≥n de botones de inicio (como la pantalla), y si la iluminaci√≥n es inferior a 100 lux cuando se enciende la pantalla, la luz de fondo se enciende con la pantalla. En el momento del encendido, el temporizador de retroiluminaci√≥n se establece durante un per√≠odo seleccionado de 40 segundos. Al presionar el bot√≥n con la luz de fondo encendida, el temporizador de apagado se establece en al menos otro per√≠odo establecido en 12 segundos. Antes de encender la luz de fondo, se recuerdan todas las lecturas de los sensores de luz, y durante el per√≠odo inicial de la iluminaci√≥n de la luz de fondo durante aproximadamente 7 segundos, son las lecturas almacenadas de los sensores de luz las que se muestran en todas las pantallas, mientras que el fondo del texto mostrado cambia de blanco a verde.Gracias a la memorizaci√≥n de lecturas, el dispositivo puede mostrar poca iluminaci√≥n no distorsionada por la iluminaci√≥n de los sensores con su propia pantalla. En todas las pantallas, excepto en la segunda, al presionar la combinaci√≥n de inicio cuando la luz de fondo est√° encendida, la luz de fondo se apaga, en la segunda pantalla esta combinaci√≥n activa el modo de configuraci√≥n del reloj.</font></font><br>
<br>
<b>   ,</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especialmente sobre max44008 que vale la pena hablar por separado. Este sensor se agreg√≥ en la versi√≥n del instrumento 2M, para ampliar el rango de operaci√≥n del lux√≥metro de la estaci√≥n meteorol√≥gica en el √°rea con poca luz. La sensibilidad m√°xima del sensor max44009 heredado de la primera versi√≥n del dispositivo es de 45 mililux / count, que es suficiente para medir la iluminaci√≥n al anochecer, pero no lo suficiente para medir la iluminaci√≥n en una noche iluminada y sin luna. Por supuesto, la medici√≥n de la iluminaci√≥n no es la tarea principal de mi estaci√≥n meteorol√≥gica, pero dado que hay un lux√≥metro en el dispositivo y, a veces, tienes que moverte por la noche cuando viajas, quiero tener una herramienta que muestre cu√°n oscura es la noche ahora. Por lo tanto, se seleccion√≥ el sensor m√°s sensible, similar al utilizado en versiones anteriores de max44009.El sensor tiene seis canales para medir la iluminaci√≥n en diferentes rangos y un canal para medir la temperatura. Ya tenemos suficientes sensores de temperatura en el dispositivo, por lo que el dispositivo solo sondea seis canales √≥pticos: visible (claro), rojo (rojo), verde (verde), azul (azul), infrarrojo (IR) y compensaci√≥n (IRcomp). Los primeros cinco canales est√°n dise√±ados para medir la iluminaci√≥n en diferentes partes del espectro, y el sexto est√° dise√±ado para compensar la iluminaci√≥n infrarroja de los canales visibles. El ajuste de par√°metros como la ganancia (esencialmente sensibilidad) y el tiempo de acumulaci√≥n de se√±al (tambi√©n afecta la sensibilidad y la precisi√≥n de las mediciones) solo es posible para todos los canales a la vez, y solo desde el exterior. No se proporciona la capacidad de seleccionar autom√°ticamente estos par√°metros por el sensor en s√≠, y a diferencia de max44009,la sensibilidad tiene que ser ajustada desde el programa. Seg√∫n la documentaci√≥n del sensor, los valores iniciales suministrados se pueden convertir a la potencia del flujo de luz por unidad de √°rea en milivatios por cent√≠metro cuadrado. All√≠ tambi√©n se muestran curvas (en realidad l√≠neas rectas) para convertir la salida a suites para fuentes como una l√°mpara incandescente y una l√°mpara fluorescente. Realic√© mi calibraci√≥n comparando las lecturas de max44009 y el nuevo max44008, utilizando luz solar difusa, luz de una l√°mpara fluorescente, l√°mpara LED, y promedi√© las lecturas como fuente. Como resultado, obtuve valores similares para los factores de conversi√≥n. Como resultado, la sensibilidad de max44008 es de aproximadamente 1,4 miliuks por lectura en el rango m√°s sensible, que es un orden y medio de magnitud mejor que max44009.El valor final de las lecturas del lux√≥metro est√° formado por datos de costura lineal del max44009 de baja sensibilidad y el max44008 sensible en el rango de 5-10 lux. El c√°lculo de las coordenadas de color y la temperatura de color se implementa de acuerdo con la documentaci√≥n, simplemente porque existe tal posibilidad.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un estudio separado merece la cuesti√≥n de la precisi√≥n de los sensores de luz y el efecto de la iluminaci√≥n IR en la confiabilidad de las lecturas. La ra√≠z del problema radica en el hecho de que los elementos fotosensibles de los sensores max4400x (as√≠ como muchos otros fotodiodos y sensores integrados, matrices de c√°maras y c√°maras de video y otros dispositivos) est√°n hechos a base de silicio. Por su naturaleza f√≠sica, estos elementos fotosensibles registran la radiaci√≥n electromagn√©tica de una longitud de onda larga, m√°s corta que un cierto l√≠mite determinado por el intervalo de banda. Para el silicio, esta longitud de onda final es de aproximadamente 1100 nm. Al mismo tiempo, el ojo humano es completamente insensible a la radiaci√≥n electromagn√©tica con una longitud de onda de m√°s de 800 nm. Por lo tanto, la radiaci√≥n con una longitud de onda de m√°s de 800 nm (generalmente 800-1400 nm) se llama infrarrojo cercano.Hay mucha radiaci√≥n de este tipo en los espectros de emisi√≥n de cuerpos calientes, como l√°mparas incandescentes, l√°mparas de arco o el sol. Y dicha radiaci√≥n est√° pr√°cticamente ausente en los espectros de LED blancos y l√°mparas fluorescentes. T√≠picamente, los elementos fotosensibles est√°n recubiertos en la parte superior con filtros especiales que acercan su curva de sensibilidad a lo que se requiere en una aplicaci√≥n particular. Tal filtro puede atenuar la radiaci√≥n infrarroja cercana en varios √≥rdenes de magnitud, pero no la corta por completo. Al mismo tiempo, sigue habiendo un problema relacionado con el hecho de que el ojo humano no ve en el rango infrarrojo cercano y el dispositivo, que debe medir el flujo de luz visible, lo registra al menos un poco. Hay varias formas de resolver este problema. Por lo tanto, en c√°maras digitales o videoc√°maras, se coloca un filtro multicapa especial frente a la matriz,que aten√∫a la radiaci√≥n infrarroja cercana en aproximadamente 3 √≥rdenes de magnitud. Los sensores max4400x utilizan una soluci√≥n diferente: el uso de un canal de "compensaci√≥n" adicional. Se instalan varios fotodiodos con diferentes filtros en el sensor, con aproximadamente la misma transmisi√≥n en el rango infrarrojo cercano, y la iluminaci√≥n total en el rango visible se determina como la diferencia en las mediciones de dos fotodiodos. En nuestro caso, el sensor max44009 realiza la compensaci√≥n autom√°ticamente, y el sensor max44008 solo entrega los datos del canal de medici√≥n, y el usuario debe realizar la compensaci√≥n √©l mismo restando los valores le√≠dos entre s√≠.con aproximadamente la misma transmitancia en el rango infrarrojo cercano, y la iluminaci√≥n total en el rango visible se determina como la diferencia en las mediciones de dos fotodiodos. En nuestro caso, el sensor max44009 realiza la compensaci√≥n autom√°ticamente, y el sensor max44008 solo proporciona los datos del canal de medici√≥n, y el usuario debe realizar la compensaci√≥n √©l mismo restando los valores le√≠dos entre s√≠.con aproximadamente la misma transmitancia en el rango infrarrojo cercano, y la iluminaci√≥n total en el rango visible se determina como la diferencia en las mediciones de dos fotodiodos. En nuestro caso, el sensor max44009 realiza la compensaci√≥n autom√°ticamente, y el sensor max44008 solo proporciona los datos del canal de medici√≥n, y el usuario debe realizar la compensaci√≥n √©l mismo restando los valores le√≠dos entre s√≠.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar la adecuaci√≥n de la compensaci√≥n de IR, realic√© varios experimentos simples. El primero es estudiar el efecto de la iluminaci√≥n IR de un LED IR con una longitud de onda de radiaci√≥n de 880 nm en las lecturas de ambos sensores. Las lecturas del canal se compararon cuando la fuente de radiaci√≥n infrarroja se encendi√≥ y apag√≥ y las condiciones de luz no cambiaron. El experimento mostr√≥ que la compensaci√≥n IR funciona mejor en el canal claro del sensor max44008. Cuando la iluminaci√≥n IR excede la intensidad de la luz visible en aproximadamente un orden de magnitud, el error del canal libre compensado no supera el 10% y el sensor max44009 ofrece lecturas muy subestimadas bajo dicha iluminaci√≥n (se produce una sobrecompensaci√≥n). Pero las lecturas de los canales de color del sensor RGB bajo iluminaci√≥n IR comienzan a "flotar" y en diferentes direcciones.Se encontr√≥ otra rareza en el funcionamiento de este sensor: saltos en los valores medidos reales al cambiar la ganancia PGA de 16 a 256 en el canal ircomp.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo experimento fue verificar la exactitud de la medici√≥n de la temperatura del color usando varias fuentes con una temperatura de color conocida. Dado que no tengo un color√≠metro preciso para la verificaci√≥n, puedo concluir que max44008 muestra resultados m√°s o menos adecuados para fuentes como LED y l√°mparas fluorescentes, sin embargo, los resultados de las mediciones para l√°mparas incandescentes que se queman tanto a plena luz como con poca luz son absolutamente poco confiable debido a la iluminaci√≥n IR. Vale la pena mencionar que cuando se usa una l√°mpara precalentada como fuente de radiaci√≥n infrarroja, la sobrecompensaci√≥n del sensor max44009 todav√≠a es notable.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale la pena mencionar otra desventaja del sensor max44008: la corriente oscura. Entonces, a temperaturas inferiores a 15 grados Celsius en la oscuridad absoluta, las lecturas del sensor de max44008 son cero, sin embargo, con el aumento de la temperatura, la corriente oscura aumenta fuertemente. A una temperatura de 18 grados, es 1 cuenta, 20 grados ya 2 cuentas, y a 30 grados ya 7 cuentas. Es probable que el sensor se pueda calibrar para compensar t√©rmicamente la corriente oscura, pero no me ocup√© de este problema porque detect√© un aumento notable en la corriente oscura solo cuando analic√© el registro de datos del viaje a Karelia, o m√°s bien esa parte cuando el dispositivo se empac√≥ en una bolsa y una bolsa de presi√≥n. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre la carga de la bater√≠a.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como se puede ver en el diagrama, un controlador max1879 separado administra la carga de la bater√≠a, y el procesador y el programa ejecutado en √©l solo pueden medir el voltaje en la bater√≠a y la corriente de carga a trav√©s de los circuitos correspondientes. Sin embargo, se han tomado una serie de medidas para que el dispositivo pueda cargarse y encenderse normalmente, incluso si la bater√≠a se coloca por completo. Ahora el proyecto usa watchdog, y el fusible WDTON parpadea, lo que garantiza que el watchdog se inicie autom√°ticamente cuando se reinicie el controlador. El umbral de ca√≠da de voltaje se establece en 1.8V, la fuente del reloj es el oscilador RC incorporado y el fusible CKDIV8 tambi√©n se ilumina. Para que el perro guardi√°n incluido no provoque un reinicio c√≠clico, usando __attribute __ ((secci√≥n (". Init3"))), el reinicio del perro guardi√°n por el per√≠odo de cuatro segundos est√° integrado en la inicializaci√≥n del controlador.Gracias al CKDIV8 instalado, el controlador comienza a una frecuencia de 1 MHz, que es posible con voltajes de 1.8V. Despu√©s de la inicializaci√≥n del controlador principal verifica el voltaje en la bater√≠a. Si es inferior al umbral establecido (2.7v), en la pantalla se muestra un mensaje sobre la descarga de la bater√≠a y el valor de voltaje en la bater√≠a, despu√©s de lo cual el controlador espera unos 500 ms, apaga la pantalla y se apaga hasta que el perro guardi√°n lo reinicie. Si el voltaje est√° por encima del umbral, el programa cambia la frecuencia del reloj a 8 MHz a trav√©s del registro CLKPR y se inicializa en modo normal. Como precauci√≥n adicional, la grabaci√≥n en una tarjeta microSD ocurre solo si el voltaje en la bater√≠a est√° por encima de un cierto umbral seleccionado a 3.2V. Como resultado, incluso con una descarga profunda de la bater√≠a, el dispositivo contin√∫a funcionando en modo normal, mientras es posible.Debido al bloqueo de la grabaci√≥n en la tarjeta, se excluye una falla de la tarjeta durante la grabaci√≥n. Si durante una descarga profunda el voltaje cae tanto que el procesador se congela (la experiencia ha demostrado que esto ocurre a un voltaje de aproximadamente 2.3V), se reiniciar√° un watchdog y el dispositivo entrar√° en un ciclo interminable que consiste en reinicios y una indicaci√≥n a corto plazo "la bater√≠a est√° baja". Si la descarga es a√∫n m√°s profunda, el dispositivo se apagar√° a trav√©s de BOD. Cuando se conecta a la carga, todo sucede en orden inverso. El controlador max1879 carga una bater√≠a profundamente descargada con una corriente baja de 8 mA. Cuando el voltaje de la bater√≠a excede aproximadamente 2V, el microcontrolador se reiniciar√° mediante BOD y mostrar√° el mensaje "bater√≠a baja" parpadeando una vez cada 4 segundos. En este caso, el consumo de corriente promedio no excede 1 mA, y la carga continuar√°. Cuando el voltaje de la bater√≠a alcanza 2.5V,habr√° una transici√≥n a una carga con corriente completa, y a 2.7V el dispositivo se encender√° normalmente. Tal soluci√≥n, en mi opini√≥n, proporciona un mejor rendimiento e indicaci√≥n cuando la bater√≠a est√° profundamente descargada y una salida estable de la descarga profunda. Pero si establece el umbral de DBO en 2.7V, son posibles falsas alarmas accidentales en circunstancias adversas (el umbral m√°ximo de DBO est√° demasiado cerca del voltaje de salida m√≠nimo del estabilizador).son posibles falsas alarmas accidentales en circunstancias adversas (el umbral de DBO m√°ximo est√° demasiado cerca del voltaje de salida m√≠nimo del estabilizador).son posibles falsas alarmas accidentales en circunstancias adversas (el umbral de DBO m√°ximo est√° demasiado cerca del voltaje de salida m√≠nimo del estabilizador).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La indicaci√≥n est√°ndar de bater√≠a baja en forma de letras intermitentes "LB" tiene un umbral de disparo de 3,65 V, que corresponde a aproximadamente el 20% de la carga restante de la bater√≠a, es decir, el dispositivo puede funcionar durante aproximadamente un mes despu√©s de encender la indicaci√≥n de la necesidad de una carga. Por lo tanto, perder el momento en el que necesita cargar el dispositivo es muy dif√≠cil, si al menos algunas veces puede ver sus lecturas. Por esta raz√≥n, decid√≠ que no se requiere una indicaci√≥n m√°s molesta de una bater√≠a descargada. El LED indicador de carga conectado a max1879 se encuentra en el tablero en el lado opuesto de la pantalla, por lo que el dispositivo se ilumina en verde desde el interior durante la carga.</font></font><br>
<br>
<img src="https://habrastorage.org/files/200/3c6/d72/2003c6d723f04a32bed73b3e5e490374.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cargar el dispositivo hizo un soporte especial con un hueco debajo del dispositivo y dos grupos de contacto. El soporte est√° equipado con un conector microUSB para conectar una fuente de corriente. El soporte no tiene circuitos electr√≥nicos en su interior, solo cables y un fusible reiniciable. Para un lector atento, la elecci√≥n del chip max1879 como controlador de carga puede parecer un tanto absurda, porque con un esquema de carga seleccionado de una fuente de corriente compatible con USB ser√≠a m√°s l√≥gico usar un controlador con limitaci√≥n de corriente incorporada. Sin embargo, el circuito seleccionado es confiable, no teme a las fuentes con una pobre estabilizaci√≥n del voltaje de salida, y su √∫nico inconveniente, de hecho, no es la compatibilidad total con el est√°ndar USB en vista de la falta de regulaci√≥n autom√°tica de la corriente m√°xima permitida.Pero tal esquema proporciona una carga m√°s r√°pida cuando se usa un adaptador de red.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Experiencia de operaci√≥n del instrumento</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la primavera, una copia de la versi√≥n dos estaba lista, y la llev√© a una caminata en la monta√±osa Crimea. </font><font style="vertical-align: inherit;">En el verano, en una caminata por el Mar Blanco y Kovdozer, tom√© la siguiente instancia de la versi√≥n 2M. </font><font style="vertical-align: inherit;">Como antes, cuando conduc√≠a en un kayak, coloqu√© el dispositivo en el cuerpo del kayak frente a m√≠, durante un viaje por Crimea us√© el dispositivo en mi cuello, durante paradas, parques y d√≠as colgu√© el dispositivo en un √°rbol a la sombra, en un lugar soplado por el viento.</font></font><br>
<br>
<img src="https://habrastorage.org/files/bac/4a7/5bc/bac4a75bc424436986c30b5b2f44c9aa.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al igual que la primera versi√≥n, el dispositivo se siente como un √≥rgano sensorial adicional, y su uso se ha vuelto m√°s conveniente en comparaci√≥n con la primera versi√≥n. Con una masa de aproximadamente 128 g (en comparaci√≥n con 330 g de la primera versi√≥n), el dispositivo pr√°cticamente no se siente en el cuello. La apariencia del dispositivo se ha vuelto, en mi opini√≥n, m√°s precisa en comparaci√≥n con la primera versi√≥n. Los botones t√°ctiles en la segunda versi√≥n son m√°s convenientes debido a la ubicaci√≥n en el costado y la ausencia de partes met√°licas cercanas de la carcasa, aunque en vista de la encuesta no tan r√°pida, no todos pueden usarlos la primera vez. La necesidad de encender la pantalla para ver las lecturas del dispositivo no causa ning√∫n inconveniente. La pantalla es f√°cil de encender incluso al tacto en completa oscuridad. El m√©todo de mostrar gr√°ficos utilizados en la segunda versi√≥n del dispositivo, con diferentes escalas y desplazarse hacia atr√°s, resulta muy pr√°ctico,facilitando el an√°lisis del clima o perfil viajado en los √∫ltimos d√≠as.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al caminar, especialmente en las monta√±as, es muy conveniente usar la pantalla de presi√≥n en el gr√°fico como una altura barom√©trica. </font><font style="vertical-align: inherit;">El gr√°fico muestra el perfil de la ruta recorrida. </font><font style="vertical-align: inherit;">Por un lado, este calendario facilita la evaluaci√≥n de la aspereza de un sendero recorrido, lo cual es especialmente cierto para los senderos de las monta√±as de Crimea que atraviesan el bosque.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ba1/fa7/e34/ba1fa7e3470541239b9a06236a6c1873.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por otro lado, de acuerdo con el cronograma, es f√°cil ver su propio ritmo de movimiento hacia arriba y hacia abajo (en realidad en subidas pronunciadas) y estimar cu√°nto queda hasta el final del movimiento en √°reas con una diferencia conocida. </font><font style="vertical-align: inherit;">Durante los viajes de agua en el mar o los lagos, cuando la altitud es constante, es m√°s conveniente mostrar la presi√≥n como presi√≥n. </font><font style="vertical-align: inherit;">Las tendencias en la presi√≥n pueden usarse para juzgar el clima durante los pr√≥ximos dos d√≠as. </font><font style="vertical-align: inherit;">En las monta√±as, el seguimiento de las tendencias de presi√≥n es m√°s dif√≠cil, son visibles en el gr√°fico solo durante la parada.</font></font><br>
<br>
<img src="https://habrastorage.org/files/218/37b/d2d/21837bd2da3d43c8a6365d5ae1af70e3.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, como ya se se√±al√≥ en el art√≠culo anterior, el movimiento propio en las monta√±as e incluso en terrenos accidentados y accidentados conduce a cambios de presi√≥n significativamente m√°s r√°pidos que los procesos t√≠picos que ocurren en la atm√≥sfera. Por esta raz√≥n, el error del d√≠a a d√≠a en el gr√°fico de altitud barom√©trica suele ser peque√±o, adem√°s, es f√°cil evaluarlo visualmente extrapolando los cambios de presi√≥n durante paradas y paradas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los gr√°ficos de temperatura y presi√≥n tambi√©n son interesantes, pero su significado pr√°ctico no es tan obvio. Le permiten determinar las tendencias clim√°ticas, elegir la ropa adecuada y evaluar las posibilidades de tratar de secar su equipo. Con la medici√≥n de temperatura, como la primera versi√≥n, hay caracter√≠sticas. Por lo tanto, la entrada de luz solar en el dispositivo provoca un calentamiento notable y un error en la medici√≥n de la temperatura. Adem√°s, la temperatura del aire (y el dispositivo) se ve afectada por la temperatura de los objetos circundantes y el calentamiento radiante. Entonces, incluso en un d√≠a nublado, el dispositivo colocado a la sombra sobre la tierra muestra una temperatura varios grados m√°s baja que si se coloca en el cuerpo de una canoa parada sobre el agua. Aparentemente, esto se debe al calentamiento del kayak y al aire por encima de √©l por la luz dispersa y la radiaci√≥n infrarroja. Para estudiar esta circunstancia, incluso realic√© el siguiente experimento.Como se sabe, el flujo de aire se puede utilizar para acelerar la transferencia de calor. La forma m√°s f√°cil de organizar soplar el term√≥metro en clima tranquilo es simplemente girarlo con una cuerda alrededor de s√≠ mismo. Al girar el dispositivo por tierra en un d√≠a nublado a la sombra, estaba convencido de que el flujo de aire no afectaba las lecturas. Entonces las lecturas est√°n a la sombra y corresponden a la temperatura del aire. Despu√©s de todo, si la temperatura del dispositivo difiere de la temperatura del aire, debido, por ejemplo, al calentamiento radiante, la intensificaci√≥n de la transferencia de calor conducir√≠a a cambios en la condici√≥n de equilibrio y cambios en las lecturas hacia abajo. Si gira el dispositivo sobre la superficie del agua, las lecturas de temperatura son menores que si el dispositivo est√° en un kayak, y el efecto se observa incluso en presencia de un peque√±o viento. De esto podemos concluir que el calentamiento del dispositivo desde el kayak es significativo, y probablementede otras superficies subyacentes iluminadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale la pena mencionar la posibilidad de mostrar el punto de roc√≠o. La temperatura del punto de roc√≠o es una funci√≥n de la humedad absoluta del aire (masa de vapor de agua por unidad de volumen) y le permite juzgar el contenido de agua en la atm√≥sfera. Si toma una cierta cantidad de aire y la calienta, la temperatura aumentar√°, la humedad relativa disminuir√° y la temperatura del punto de roc√≠o no cambiar√°. En consecuencia, dado que el sensor siempre est√° en equilibrio con una capa delgada de aire que lo rodea, si el sensor (o todo el dispositivo) se calienta, la temperatura mostrada aumentar√°, la humedad mostrada disminuir√° y la temperatura del punto de roc√≠o mostrado no cambiar√°. En realidad, todo es algo m√°s complicado, porque el error y la discreci√≥n de medir la temperatura y especialmente la humedad afectan fuertemente la precisi√≥n del c√°lculo del punto de roc√≠o. Sin embargo, podemos decir que el punto de roc√≠o calculado,y no la humedad relativa es informaci√≥n sobre la cantidad de agua en la atm√≥sfera, y no se ve afectada por los errores de medici√≥n de temperatura asociados con el calentamiento del dispositivo por el sol. Como regla general, la temperatura del punto de roc√≠o cambia bastante lentamente, y sus fluctuaciones diarias pueden ser tan peque√±as como 2-5 grados contra 10-15 a la temperatura del aire. En verano, un aumento en el punto de roc√≠o de aproximadamente 20 grados es un presagio de la formaci√≥n de tormentas el√©ctricas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El lux√≥metro, ahora equipado con dos sensores, le permite medir la iluminaci√≥n y obtener resultados de medici√≥n confiables en una variedad de condiciones: tanto en un d√≠a soleado, en una noche sin luna e incluso en habitaciones muy oscuras. Su testimonio nos permite juzgar el grosor de la capa de nubes en el cielo o la profundidad del crep√∫sculo. No se ofrece la posibilidad de construir un gr√°fico de iluminaci√≥n en el instrumento, ya que las lecturas dependen en gran medida no solo de la iluminaci√≥n, sino tambi√©n de la posici√≥n espacial de los objetos circundantes y del instrumento en s√≠ mismo, por lo tanto, ser√≠a dif√≠cil extraer informaci√≥n de dicho gr√°fico. Debido a la presencia de dos sensores, uno de los cuales es RGB con un canal IR, el lux√≥metro proporciona mucha informaci√≥n sobre la iluminaci√≥n, la temperatura del color y el nivel de radiaci√≥n infrarroja. Sin embargo, en mi opini√≥n,Esta funcionalidad es m√°s √∫til cuando se eval√∫a la iluminaci√≥n interior que el senderismo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En resumen, observamos que el segundo dispositivo result√≥ ser m√°s conveniente y pr√°ctico que el primero. El estuche es bastante ligero, compacto y agradable al tacto incluso a bajas temperaturas. El tiempo de funcionamiento con una carga de bater√≠a es m√°s que suficiente para cualquier viaje. Los gr√°ficos se pueden escalar y voltear f√°cilmente en los √∫ltimos cuatro d√≠as, lo que es suficiente para analizar el clima y / o el perfil recorrido, y la funcionalidad del dispositivo, en mi opini√≥n, es suficiente. La tarjeta SD se puede quitar f√°cilmente para copiar datos.</font></font><br>
<br>
<img src="https://habrastorage.org/files/67c/0b3/f1f/67c0b3f1f11a402fa128af52faf9e1fd.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la descripci√≥n de la experiencia operativa de la primera versi√≥n del dispositivo termin√≥ con una lista de deficiencias, entonces no dar√© dicha lista aqu√≠, porque, en mi opini√≥n, el dispositivo no tiene deficiencias obvias. Por supuesto, siempre hay ideas para crear funcionalidad, pero durante la operaci√≥n no tuve la sensaci√≥n de falta de funci√≥n. Por lo tanto, considerar√© las posibles opciones para el desarrollo del proyecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una posible forma de desarrollar el instrumento es agregar nuevas funciones al software del instrumento. Aqu√≠ puede ofrecer las siguientes √°reas:</font></font><br>
<ul>
<li>                     .        ,       ,      ,          .</li>
<li>      SD .</li>
<li>             (   )     ,    .</li>
<li>         RGB   SD .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, hay ideas sobre el desarrollo de un conjunto de sensores para el futuro. Por ejemplo, puede agregar un sensor especial dise√±ado para medir la temperatura del agua en dep√≥sitos y manantiales, un sensor de salinidad del agua (medidor TDS) y agregar la capacidad de almacenar el historial de mediciones correspondiente en el software. Despu√©s de todo, a veces es interesante medir la temperatura del agua en un estanque, y los sensores de temperatura disponibles en el dispositivo son algo inerciales y no est√°n destinados al buceo, aunque el buceo es inofensivo para ellos. Adem√°s, se puede agregar un sensor ultravioleta al conjunto de sensores de luz para determinar qu√© tan peligroso es estar bajo la luz del sol bajo el estado actual de la atm√≥sfera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dise√±o de la carcasa del dispositivo de la segunda versi√≥n tambi√©n tiene cierto margen para una mayor reducci√≥n de peso y tama√±o. Al reducir el grosor de la pared, usando una almohadilla m√°s suave y una cubierta m√°s delgada (por ejemplo, vidrio templado), reduciendo el tama√±o de la bater√≠a, la carcasa se puede hacer un poco m√°s peque√±a y liviana. Por separado, vale la pena decir que logr√© encontrar la pantalla transflectiva de 2.4 "producida actualmente con una resoluci√≥n de 320x240 p√≠xeles. Por lo tanto, la tercera versi√≥n del dispositivo probablemente estar√° hecha completamente de componentes disponibles comercialmente. Sin embargo, al cambiar a una pantalla de mayor resoluci√≥n, debe aumentar la frecuencia del reloj del procesador para que el redise√±o no tome demasiado tiempo, y aumentar la RAM para usar efectivamente el mayor n√∫mero de p√≠xeles en la pantalla, reduciendo el n√∫mero m√≠nimo de grados, metros y minutos por p√≠xel.Por esta raz√≥n, es probable que la tercera versi√≥n del dispositivo se monte en un microcontrolador AVR Xmega o STM32.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo fuente del programa, las curvas para fresar y cablear la placa est√°n disponibles </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es384641/">https://habr.com/ru/post/es384641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es384629/index.html">Los cient√≠ficos han anunciado pruebas claras de la presencia de agua l√≠quida en Marte</a></li>
<li><a href="../es384631/index.html">Intel Edison Trabajando con Intel IoT Analytics Cloud: Administraci√≥n de dispositivos</a></li>
<li><a href="../es384633/index.html">La bi√≥nica y la rob√≥tica entran en el negocio del modelaje</a></li>
<li><a href="../es384635/index.html">"Fantasma humano" abrir√° grandes oportunidades para los m√©dicos. El cad√°ver de una mujer fue cortado en 5,000 partes y escaneado</a></li>
<li><a href="../es384637/index.html">Los cient√≠ficos no han encontrado ondas gravitacionales en once a√±os de observaci√≥n</a></li>
<li><a href="../es384647/index.html">No pasar√°s: c√≥digo de bloqueo en la l√≥gica</a></li>
<li><a href="../es384651/index.html">Informe de mixAR2015: Tecnolog√≠as AR&VR</a></li>
<li><a href="../es384653/index.html">Vista interior: 13 l√°mparas LED y una botella de ron. Parte 2</a></li>
<li><a href="../es384657/index.html">Automatizaci√≥n de bricolaje para el control de la calefacci√≥n del hogar. Parte 4</a></li>
<li><a href="../es384659/index.html">Control de tiburones inflables de ondas cerebrales</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>