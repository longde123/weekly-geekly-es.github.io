<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèø ‚ö°Ô∏è üë¶üèº Minuterie - D√©marrer üíÉ ‚úåÔ∏è üé∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tout a commenc√© avec lui. C'√©tait mon premier achat sur Aliexpress pour la premi√®re automatisation du pays - je voulais faire de l'auto-arrosage dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Minuterie - D√©marrer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422435/"><img src="https://habrastorage.org/webt/yz/s9/r3/yzs9r3pd5_c6uacf0cvy0wbl9r8.jpeg" align="left">  Tout a commenc√© avec lui.  C'√©tait mon premier achat sur Aliexpress pour la premi√®re automatisation du pays - je voulais faire de l'auto-arrosage dans la serre.  La minuterie est venue dans une bo√Æte froiss√©e, avec un capuchon protecteur fissur√©, mais qui fonctionnait.  Il a fait un excellent travail en arrosant les concombres pendant toute la saison estivale, il a √©t√© retir√© et cach√© dans un endroit chaud et sec pour l'hiver.  Mais la saison suivante, j'attendais une surprise d√©sagr√©able - la minuterie a commenc√© √† se bloquer, a cess√© de r√©pondre aux boutons de commande et a ouvert l'eau.  Au d√©but, j'ai p√©ch√© sur des piles bon march√© et les ai remplac√©es par des Duracell de marque.  Je pensais que le probl√®me √©tait la puissance et les courants d'appel.  √áa n'a pas aid√©.  Ensuite, j'ai sorti un fer √† souder et soud√© tout ce que je pouvais, m√™me ajout√© des condensateurs manquants.  Mais il a obstin√©ment continu√© √† pendre.  Malheureusement, le produit n'est pas tr√®s facile √† entretenir - en ce que j'ai utilis√© une goutte de microcircuit en circuit ouvert et, apparemment, quelque chose a √©t√© d√©mont√© pr√©cis√©ment sous le compos√© avec le microcircuit.  D'une mani√®re ou d'une autre, la saison √©tait finie avec une minuterie aussi difficile, et j'ai commenc√© √† penser √† quoi devrais-je la remplacer. <br><a name="habracut"></a><br>  Mes premi√®res pens√©es ont √©t√© de prendre un module Arduino Mini, un module d'horloge, un indicateur, et de le mettre en quelque sorte dans le cas d'une minuterie cass√©e et d'utiliser son moteur natif et sa vanne √† boisseau sph√©rique.  Mais d'une mani√®re ou d'une autre, il n'y √©tait pas vraiment all√©, il consommerait clairement plus que le remplissage d'origine (ce qui signifie que vous pouvez oublier les piles dans le bo√Ætier) et c'√©tait ennuyeux et non √©volutif - je voulais arroser non seulement la serre, mais seulement une minuterie cass√©e. <br><br>  Et puis sur Ali, je suis tomb√© sur une vanne √† boisseau sph√©rique motoris√©e normale.  Voici un si bel homme: <br><br><img src="https://habrastorage.org/webt/zu/md/c5/zumdc50whupl9mloczorxcmo6sg.jpeg"><br><br>  Oui, cela a co√ªt√© de l'argent d√©cent, mais il n'√©tait pas effrayant de le connecter √† un approvisionnement en eau d'√©t√© et de le laisser sans surveillance pendant une semaine.  Il est g√©n√©ralement assez solide, bien qu'avec une bo√Æte de vitesses en plastique - maintenant quelques robinets de ce type fonctionnent sur mon alimentation en eau principale, o√π la pression est de 5 atm. <br><br>  L'id√©e √©tait simple.  Un mouchoir avec le module WiFi ESP8266 attendait dans le tiroir de la table.  Il a √©t√© d√©cid√© d'abandonner les √©conomies d'√©nergie au profit d'une batterie de voiture usag√©e, qui, selon les calculs, aurait d√ª √™tre suffisante pour au moins un mois d'autonomie. Afin de ne pas manquer le moment de d√©charge de la batterie, le circuit a fourni un diviseur √† travers lequel l'ADC ESP8266 int√©gr√© a mesur√© en continu la tension d'alimentation. .  Le module DS3231 avec une batterie aurait d√ª servir d'horloge dans le circuit, et un mouchoir par m / s MP1584EN aurait d√ª abaisser la tension de 12V √† 3,3V. <br><br>  Voici un sch√©ma de principe: <br><br><img src="https://habrastorage.org/webt/qr/23/j6/qr23j6rhqqseg_haa2kevuaglqc.png"><br><div class="spoiler">  <b class="spoiler_title">Et voici une photo de sa mise en ≈ìuvre</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ux/80/-p/ux80-pghlpqxovrie-igtxbpuee.jpeg"><br><br>  <i>mise en ≈ìuvre d√©j√† un peu d√©mont√©e - le module DC-DC est entr√© dans la grue, le module d'horloge √† l'arri√®re de la planche √† pain</i> <br></div></div><br>  Le contr√¥le du moteur de la grue s'est fait ici simplement - quels transistors ont √©t√© trouv√©s dans le tiroir de la table, ils ont √©t√© install√©s.  En r√©alit√©, un moteur peut √™tre command√©, par exemple, via m / s ULN2003 en commutant sur plusieurs canaux en parall√®le soit avec des transistors √† effet de champ √† commande logique soit en g√©n√©ral via un module relais √† opto-isolation.  Il suffit de tenir compte du fait que le moteur, avec un courant de fonctionnement d'environ 70 mA, a un courant d'appel (et un courant au moment du blocage de la rotation) de l'ordre de 300-350 mA. <br><br>  Un croquis rapide serait √©crit en Arduino avec une interface Web simple: <br><br><img src="https://habrastorage.org/webt/vq/1u/rc/vq1urcw-ttzsjbbvcm7nbcxcuky.jpeg"><br><br>  Et le prototype √©tait en test.  J'ai transmis l'interface Web de la grue via le routeur et l'appareil √©tait constamment disponible en ligne. <br><br>  Et les pens√©es ont continu√©.  Un prototype est bon, mais je veux plusieurs de ces robinets et tout faire sur une maquette n'est pas une option.  La grue a √©t√© ouverte.  Et il est devenu clair qu'il y a beaucoup d'espace √† l'int√©rieur sous un couvercle scell√© et qu'il y a m√™me des endroits de fixation: <br><br><img src="https://habrastorage.org/webt/rt/tc/3f/rttc3f_0uzhnlpjql2vp4ds-nvm.jpeg"><br><br>  Dans ce robinet utilis√© dans le prototype, sous le couvercle se trouvait une petite carte de circuit imprim√© avec un relais, qui fournissait une logique de contr√¥le.  Et sur la photo il y a une grue avec indice CR05.  Il n'y a aucune logique ou carte de circuit imprim√© dans ces prises.  Les fils de commande du moteur et les fils de fin de course sont simplement retir√©s.  Et vous devez contr√¥ler ces grues en modifiant la polarit√© de la tension sur le moteur.  En m√™me temps, il est fortement conseill√© de contr√¥ler les moments finaux de fermeture / ouverture aux extr√©mit√©s du TC, on se souvient que le courant √† ces moments est d√©j√† 300-350 mA. <br><br>  Le diagramme a commenc√© √† appara√Ætre comme suit: <br><br><img src="https://habrastorage.org/webt/ae/a1/uv/aea1uvc0g09wxdkdyxoioq8t8z8.png"><br><br>  Maintenant, nous prenons l'√©trier, une feuille de papier dans nos mains et commen√ßons √† prendre des mesures, dessinons le contour de la carte de circuit imprim√© et essayons de placer les composants dessus.  Une grande batterie CR2032 a √©t√© abandonn√©e et une petite CR1220 (ou 1225) a √©t√© utilis√©e.  Pendant tr√®s longtemps, une puce de pont en H a √©t√© s√©lectionn√©e pour contr√¥ler le moteur.  Le choix semble large, mais bon nombre de ces microcircuits ne peuvent pas fonctionner avec une tension d'alimentation de 12 V, ou bien ils utilisent des transistors bipolaires avec une tr√®s grande chute de tension, eh bien, ou le bo√Ætier √©choue.  Au d√©but, la puce TB6612 n'a pas attir√© mon attention, puis elle semblait tr√®s redondante et peu pratique pour le soudage.  Mais √† la fin, je me suis concentr√© sur elle - c'est abordable et peu co√ªteux pour Ali.  Le pont en H est construit sur des transistors √† effet de champ et peut fonctionner √† des tensions allant jusqu'√† 15 volts.  Le module convertisseur DC-DC (MP1584EN) a √©t√© laiss√© par le module - il s'est av√©r√© simplement moins cher dans les d√©tails et il √©tait facile de le souder.  L'essentiel, pour la fiabilit√©, est de remplacer la r√©sistance de r√©glage en elle par une r√©sistance constante (27kOhm - cela donnera une tension de sortie de 3,4 V.) Le microcircuit de l'horloge pourrait √™tre utilis√© dans un bo√Ætier plus compact, mais il y avait une mise en garde - j'allais commander tous les composants pour Ali et il y avait un risque de se faire circuits faux ou cass√©s.  Par cons√©quent, au stade initial, il √©tait pr√©vu d'acheter tous les microcircuits dans le cadre des modules finis et de les souder √† la carte d√©velopp√©e.  Et dans les modules, l'horloge n'√©tait que dans le cas SO16.  En fait, un seul microcircuit de montre s'est av√©r√© √™tre d√©fectueux ou un faux faux - sa fr√©quence de quartz √©tait de 32727 avec 32768 kHz. <br><br>  Apr√®s tous les travaux pr√©paratoires, nous prenons KiKad, cherchons un peu sur Google √† la recherche de si√®ges manquants, dessinons nous-m√™mes certains composants et commen√ßons √† multiplier la planche: <br><br><img src="https://habrastorage.org/webt/vj/zf/cy/vjzfcyt6qukg3sj5mev5xhkzcem.jpeg"><br><br>  Nous le v√©rifions en imprimant √† l'√©chelle 1: 1.  Nous attachons des pi√®ces et des modules et, si tous correspondent, nous pr√©parons des fichiers Gerber pour la production et les envoyons √† EasyEda.  Apr√®s 3 semaines, nous obtenons 10 mouchoirs mignons et les collectons. <br><br><img src="https://habrastorage.org/webt/ui/jn/hs/uijnhsbq8zqklcjm1n-pjhpax-c.jpeg"><br>  <i>Il en reste 5 sur la photo, le reste tout fonctionne</i> <br><br><img src="https://habrastorage.org/webt/dn/8c/nx/dn8cnx12fhixuzkxywboqkqfmou.jpeg"><br>  <i>Assemblage du module</i> <br><br>  Les trous pour les attaches, bien s√ªr, ne co√Øncidaient pas un peu, certains des si√®ges ne se sont pas av√©r√©s comme ils le voulaient, mais en g√©n√©ral le produit, apr√®s assemblage et firmware, a fonctionn√© tout de suite.  Des queues herm√©tiques ont √©t√© achet√©es sur Ali, pass√©es √† travers un joint sous pression standard dans le b√¢timent, et la minuterie de la grue WiFi a obtenu son aspect d'usine: <br><br><img src="https://habrastorage.org/webt/kz/rn/zy/kzrnzyqalg_t_jsrrrjegdvc98q.jpeg"><br><br>  Voici quelques grues en service de combat dans le pays: <br><br><div class="spoiler">  <b class="spoiler_title">au poste</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/da/sx/ds/dasxds16utudu8su6efnv46dixy.jpeg"><br></div></div><br>  Mais alors la pens√©e a repris.  Je voulais plus d'automatisation dans le pays, et le module s'est av√©r√© assez compact et universel.  Gr√¢ce au pont en H, vous pouvez contr√¥ler assez facilement un relais conventionnel.  Pour l'automatisation DIY, beaucoup prennent Sonoff, mais il s'av√®re que je ne peux pas faire pire. <br><br>  Et ici commence la transformation d'un simple robinet Wi-Fi en ce qui est nomm√© <b>SHAPEsp</b> - abr√©viation de <b>S</b> mart <b>H</b> ome <b>A</b> utomation <b>P</b> latform bas√© sur <b>Esp</b> 8266.  Comme pr√©vu, cela devrait devenir un module universel peu co√ªteux pour la domotique.  Et tout cela devrait √™tre fiable et ressembler √† un produit fini apr√®s assemblage dans un bo√Ætier abordable. <br><br>  √âtonnamment, il s'est av√©r√© que dans le cas chinois avec Aliexpress sur 2DIN, l'appareil est bien, le corps dans le corps, le populaire convertisseur HiLink AC / DC 220V / 12V (enfin, ou son clone), le relais et le connecteur d'alimentation, et bien s√ªr mon module l√©g√®rement converti avec ESP8266, horloge et pont en H. <br><br><div class="spoiler">  <b class="spoiler_title">Faites-le une fois</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bp/wm/xk/bpwmxkb9rxu-mxso9_fbiz9wc4q.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Faites deux</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ok/jd/d-/okjdd-orz-ecgzujbub-j-p2hzc.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Faites trois</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/_i/ip/jm/_iipjmuknwsvpqelavmsrxrj3t0.jpeg"><br>  <i>le module peut √™tre install√© √† la fois dans le corps de la grue et dans le bo√Ætier du rack DIN</i> <br></div></div><br>  Et nous obtenons: <br><br><img src="https://habrastorage.org/webt/ht/2x/ui/ht2xuiatsx_ckjmyit2ihczozh4.jpeg"><br><br>  L√©g√®rement chang√© la forme du module.  J'ai ajout√© des connecteurs de bord pour qu'il puisse se tenir droit dans le package 2DIN.  J'ai plac√© des voyants indicateurs sur l'extr√©mit√© sup√©rieure de la carte, qui sont visibles √† la lumi√®re dans un bo√Ætier en plastique.  Eh bien, je d√©ploie la carte multim√©dia pour le relais et la source d'alimentation.  Pour le rendre moins cher, tout cela a √©t√© envoy√© en production avec une seule planche: <br><br><img src="https://habrastorage.org/webt/un/5j/z2/un5jz2k4nzvoo1g4bhkhdyik7bq.jpeg"><br><br>  J'ai assembl√© deux de ces prototypes et les ai mis dans le chalet pour contr√¥ler l'inclusion de convecteurs pour les arriv√©es d'hiver: <br><br><div class="spoiler">  <b class="spoiler_title">Dans un autre poste</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/2t/yo/po/2tyopox-lcaqrqdd6yb3j8fqb3i.jpeg"><br>  <i>L'un des modules du panneau, √† c√¥t√© d'une paire de contacteurs qui comprennent des convecteurs</i> <br></div></div><br>  Mais il a alors d√©cid√© de l'am√©liorer encore plus et de le rendre plus universel.  Pour un firmware plus fiable et plus pratique, j'ai plac√© le sch√©ma de firmware de NodeMcu sur le module.  Il a d√©duit toutes les broches possibles et ajout√© des plots de contact pour faciliter la connexion de diff√©rents capteurs.  Toutes les broches de bord sont plac√©es par incr√©ments de 2,54 mm, de sorte que le module puisse √™tre ins√©r√© dans la planche √† pain.  Naturellement, j'ai test√© la connexion du thermom√®tre ds1820, du capteur combin√© BME280 et du capteur d'humidit√© sur le comparateur.  Il s'est av√©r√© qu'en plus d'une simple minuterie avec un relais ou une grue, vous pouvez facilement construire une station m√©t√©o ou par exemple un syst√®me aquastop.  Eh bien, toutes sortes d'autres syst√®mes de notification et de contr√¥le ... <br><br>  Emport√©, a dessin√© un mod√®le de son module pour Fritzing.  Vous pouvez ainsi √©valuer et faire pivoter virtuellement les diff√©rentes options d'application: <br><br><img src="https://habrastorage.org/webt/ob/rs/qm/obrsqm8tbnl6mknximfdzp7ossc.png"><br><br>  Un lien vers le mod√®le GitHub se trouve en bas de l'article. <br><br>  Eh bien, alors la partie la plus difficile commence - le support logiciel pour le module.  Au d√©part, j'ai tout test√© et test√© avec mon croquis Arduino plut√¥t simple.  HTML simple, un peu de script Java, diff√©rentes fa√ßons simples de transmettre des donn√©es, seulement la fonctionnalit√© d'une minuterie et certains capteurs dont j'ai besoin.  Mais assez rapidement, il est devenu clair qu'il ne serait pas si facile de tout ma√Ætriser dans le monde moderne de l'IoT et de la construction de maisons intelligentes.  Et aussi juste la paresse (voici un smiley souriant).  Et parfois, je ne veux pas r√©inventer la roue. <br><br>  Par cons√©quent, il a √©t√© d√©cid√© de voir ce qu'il existe de micrologiciel pr√™t √† l'emploi dans lequel vous pouvez ajouter un support pour votre module.  Comme point de d√©part, des firmwares alternatifs pour les produits Sonoff ont √©t√© pris: Sonoff-Tasmota, ESPurna, ESPEasy.  La recherche peut trouver des critiques comparatives de ces micrologiciels. <br><br>  Par exemple: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://lobradov.github.io/FOSS-Firmware-comparison-overview/</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://lobradov.github.io/FOSS-Firmware-comparison-developers/</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br>  En r√©alit√©, j'ai en quelque sorte parcouru le code source dans les r√©f√©rentiels de ces firmwares avec mon ≈ìil, j'ai r√©alis√© que le moyen le plus simple pour moi serait d'ajouter mon module au firmware ESPurna.  Le code du micrologiciel √©tait assez raisonnablement structur√© et supposait initialement l'ajout de nouveaux modules et fonctions.  Dans le firmware, il y avait la fonctionnalit√© de minuterie dont j'avais besoin, le Sheduler autonome.  De plus, on peut dire tout de suite, d√©crivant simplement ma configuration avec un simple relais dans le fichier hardware.h, j'ai obtenu une version fonctionnelle du firmware du relais WiFi. <br><br>  Cependant, mon module avait des fonctionnalit√©s plus riches et plus complexes.  Et il a √©t√© d√©cid√© de contribuer au firmware.  D'une part, c'est assez simple - nous √©crivons des fonctionnalit√©s et faisons une pull-request, mais en r√©alit√© c'est un processus long et ennuyeux avec pas toujours un r√©sultat positif ou rapide.  Ce sont les co√ªts du fait que la fonctionnalit√© propos√©e dans l'ensemble n'est n√©cessaire que pour moi et ma carte inconnue. <br><br>  J'ai commenc√© avec le support de la montre.  Dans le firmware ESPurna, tout fonctionnait via NTP et la biblioth√®que de temps pour arduino - eh bien, historiquement, vous devez conna√Ætre l'heure, mais les produits Sonoff n'ont pas d'horloge autonome et on suppose qu'ils ont toujours acc√®s √† Internet.  Pour prendre en charge l'horloge RTC, j'ai √©crit un module simple qui, si vous le souhaitez, a remplac√© la fonction de fournisseur d'heure de NTP pur en NTP + RTC.  Le principe √©tait simple - si la synchronisation NTP n'est pas disponible, nous essayons de lire l'heure √† partir de l'horloge RTC locale.  Lorsque l'acc√®s aux serveurs NTP appara√Æt, nous r√©tablissons la synchronisation et, si vous le souhaitez, synchronisez l'horloge locale.  L'horloge de mon module s'est donc mise au travail.  La demande de tirage a √©t√© accept√©e assez rapidement, mais elle a √©t√© envoy√©e √† une succursale espurna-rtc distincte. <br><br>  Le suivant √©tait une demande de traction triviale.  Comme je mesure la tension d'alimentation du convertisseur DC-DC pour suivre la d√©charge de la batterie, je devais surveiller non pas la tension d'alimentation du module ESP8266, mais une tension d√©finie par l'utilisateur.  Ce que j'ai con√ßu comme une demande d'extraction "ajouter un support pour la surveillance VCC personnalis√©e".  Mais cette demande √©tait en quelque sorte suspendue dans l'air ... et le d√©sir de contribuer s'est quelque peu apais√©. <br><br>  De plus, il est devenu √©vident que l'ajout de votre module √† la liste des appareils finis pris en charge ne sera pas si facile - il a beaucoup de configurations diff√©rentes possibles.  Par cons√©quent, il a √©t√© d√©cid√© de simplement d√©velopper sa fourchette de firmware.  Et si possible et que vous souhaitez maintenir la synchronisation, faites des demandes d'extraction ou offrez une s√©lection dans le r√©f√©rentiel principal du firmware. <br><br>  Apr√®s une telle d√©cision, tout est devenu plus simple.  Dans le firmware, le syst√®me de contr√¥le des relais a √©t√© partiellement r√©√©crit.  Le mode de commande du pont en H y a √©t√© ajout√© et il est devenu plus pratique en termes d'ajout de modes de fonctionnement de relais personnalis√©s. <br><br>  Une √©tude plus approfondie du code du micrologiciel a montr√© qu'il n'√©tait pas possible de le refactoriser.  Le style d'√©criture et d'utilisation des ressources √† certains endroits est tr√®s cruel pour un microcontr√¥leur (bien qu'il soit plut√¥t intelligent en 32 bits).  Par exemple, le syst√®me d'√©mission de messages de d√©bogage a d√©vor√© la pile √† grande vitesse, mais en m√™me temps, pour ne pas supprimer tout le syst√®me, il a √©t√© bloqu√© lorsque la taille de la pile est devenue inf√©rieure √† 10 Ko.  J'ai r√©√©crit un peu le code dans mon fil de sorte que maintenant tous les messages de d√©bogage et les invites de la console s'affichent compl√®tement. <br><br>  Eh bien, pour le moment, un sous-syst√®me de calcul a √©t√© ajout√© au firmware <br>  Levers / couchers de soleil et un SunriseSensor virtuel, vous pouvez donc construire un simple relais astronomique √† partir du module SHAPEsp.  Il faudra prendre courage et s'engager sur le r√©f√©rentiel principal.  Je pense que c'est une fonctionnalit√© utile. <br><br>  Voici une histoire de la transformation des id√©es de bricolage d'un prototype √† un produit presque fini.  Peut-√™tre un produit en demande.  La chose la plus √©tonnante est que je n'ai pas encore essay√© de syst√®mes de maison intelligente - tous les modules fonctionnent pour moi de mani√®re compl√®tement autonome les uns par rapport aux autres et sont simplement accessibles via des interfaces Web sur Internet.  Et une fois achet√©e, la carte PC OrangePi se trouve dans un tiroir et attend dans les coulisses pour devenir un contr√¥leur domestique intelligent. <br><br>  Liste de liens: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mod√®le Fritzing et comment je me r√©unis Je pense qu'il y aura une disposition de circuits et de modules dans Kikad</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Micrologiciel de test simple pour le module</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fourche de micrologiciel ESPurna avec support de module</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le r√©f√©rentiel principal du firmware ESPurna</a> <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422435/">https://habr.com/ru/post/fr422435/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422425/index.html">Un aper√ßu des m√©thodes de post-traitement pour les mod√®les FDM imprim√©s en 3D</a></li>
<li><a href="../fr422427/index.html">Dagaz: Hors du brouillard</a></li>
<li><a href="../fr422429/index.html">Nous acc√©l√©rons le processus de d√©veloppement de projets complexes. Sans chaos ni nerfs</a></li>
<li><a href="../fr422431/index.html">Les f√©es japonaises montrent un d√©clencheur ma√Ætre-esclave dans un nouveau manga sur l'√©lectronique num√©rique</a></li>
<li><a href="../fr422433/index.html">Panneaux solaires et routes asphalt√©es. Symbiose de la technologie</a></li>
<li><a href="../fr422437/index.html">Jeux d'exp√©rience utilisateur et vitesse du site Web et des applications</a></li>
<li><a href="../fr422439/index.html">Le combat avec Yandex: comment j'ai pass√© plus d'un an pour amener le site au top</a></li>
<li><a href="../fr422441/index.html">Trouv√© une formule pour une transition indolore vers .Net Core</a></li>
<li><a href="../fr422443/index.html">Corona SDK Precise Timer</a></li>
<li><a href="../fr422445/index.html">Impl√©mentation de BottomAppBar. Partie 3: Comportement pour Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>