<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฉ๐ผโ๐ป ๐ ูุชุงุฆุฌ ูุนูุงุฑ Kubernetes ูุดุจูุฉ ุงูููููุงุช ุงูุฅุถุงููุฉ (CNI) ุนุจุฑ ุดุจูุฉ ุจุณุฑุนุฉ 10 ุฌูุฌุงุจุช ูู ุงูุซุงููุฉ (ุชู ุงูุชุญุฏูุซ: ุฃุจุฑูู 2019) ๐ฉ๐พโ๐ซ ๐ด ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐุง ุชุญุฏูุซ ูููุงููุณู ุงูุณุงุจูุฉ ุ ูุงูุฐู ูุนูู ุงูุขู ุนูู Kubernetes 1.14 ูุน ุฅุตุฏุงุฑ CNI ุงูุญุงูู ูุดูุฑ ุฃุจุฑูู 2019. 


 ุฃููุงู ุ ุฃูุฏ ุฃู ุฃุดูุฑ ูุฑูู Cilium: ููุฏ ุณุงุนุฏูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุชุงุฆุฌ ูุนูุงุฑ Kubernetes ูุดุจูุฉ ุงูููููุงุช ุงูุฅุถุงููุฉ (CNI) ุนุจุฑ ุดุจูุฉ ุจุณุฑุนุฉ 10 ุฌูุฌุงุจุช ูู ุงูุซุงููุฉ (ุชู ุงูุชุญุฏูุซ: ุฃุจุฑูู 2019)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/448688/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/kx/yg/h6/kxygh6biydolx6263yp5isug-ss.png"></p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุชุญุฏูุซ ูููุงููุณู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุณุงุจูุฉ</a> ุ ูุงูุฐู ูุนูู ุงูุขู ุนูู Kubernetes 1.14 ูุน ุฅุตุฏุงุฑ CNI ุงูุญุงูู ูุดูุฑ ุฃุจุฑูู 2019. </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุฃูุฏ ุฃู ุฃุดูุฑ ูุฑูู Cilium: ููุฏ ุณุงุนุฏูู ุงูุฑุฌุงู ูู ูุญุต ูุฅุตูุงุญ ูุตูุต ุงููุฑุงูุจุฉ ุงููุชุฑูุฉ. </p><br><h3 id="chto-izmenilos-s-noyabrya-2018" style=";text-align:right;direction:rtl">  ูุง ุงูุฐู ุชุบูุฑ ููุฐ ููููุจุฑ 2018 </h3><br><p style=";text-align:right;direction:rtl">  ุฅููู ูุง ุงูุฐู ุชุบูุฑ ููุฐ ุฐูู ุงูุญูู (ุฅุฐุง ูุงู ููุชููุง): </p><br><p style=";text-align:right;direction:rtl"> ุชุธู Flannel ูุงุฌูุฉ CNI ุงูุฃุณุฑุน ูุงูุฃุณูู ุ ูููููุง ูุง ุชุฒุงู ูุง ุชุฏุนู ุณูุงุณุงุช ุงูุดุจูุฉ ูุงูุชุดููุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุนุฏ ุฑููุงูุง ูุฏุนูููุง ุ ูุฐูู ูููุง ุจุฅุฒุงูุชู ูู ุงูุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุชุฏุนู WeaveNet ุงูุขู ุณูุงุณุงุช ุงูุดุจูุฉ ุงูุฎุงุตุฉ ุจู Ingress ู Egress!  ููู ุงูุฅูุชุงุฌูุฉ ุงูุฎูุถุช. </p><br><p style=";text-align:right;direction:rtl">  ูู Calico ุ ูุง ุชุฒุงู ุจุญุงุฌุฉ ุฅูู ุชูููู ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุญุฒูุฉ (MTU) ูุฏูููุง ููุญุตูู ุนูู ุฃุฏุงุก ุฃูุถู.  ุชูุฏู Calico ุฎูุงุฑูู ูุชุซุจูุช CNI ุ ุจุญูุซ ููููู ุงูุงุณุชุบูุงุก ุนู ูุณุชูุฏุน ETCD ูููุตู: </p><a name="habracut"></a><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุญุงูุฉ ูู API Kubernetes ููุฎุฒู ููุจูุงูุงุช (ุญุฌู ุงููุชูุฉ &lt;50 ุนูุฏุฉ) ุ </li><li style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุญุงูุฉ ูู API Kubernetes ููุฎุฒู ููุจูุงูุงุช ูุน ูููู Typha ูุชุฎููู ุงูุญูู ูู K8S API (ุญุฌู ุงููุชูุฉ&gt; 50 ุนูุฏุฉ). </li></ul><br><p style=";text-align:right;direction:rtl">  ุชุนูู Calico ุนู ุฏุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุงุณุฉ ูุณุชูู ุงูุชุทุจูู ุนูู</a> ุฑุฃุณ Istio ููุฃูุงู ุนูู ูุณุชูู ุงูุชุทุจูู. </p><br><p style=";text-align:right;direction:rtl">  Cilium ุงูุขู ูุฏุนู ุงูุชุดููุฑ!  ูููุฑ Cilium ุงูุชุดููุฑ ูุน ุฃููุงู IPSec ููููุฑ ุจุฏููุงู ูุดุจูุฉ WeaveNet ุงููุดูุฑุฉ.  ููู WeaveNet ุฃุณุฑุน ูู Cilium ูุน ุชูููู ุงูุชุดููุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฃุตุจุญ ูุดุฑ Cilium ุงูุขู ุฃูุซุฑ ุณูููุฉ - ุจูุถู ูุดุบู ETCD ุงููุฏูุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุญุงูู ูุฑูู Cilium ุงูุญูุงุธ ุนูู ูุฒู CNI ุ ููุง ูููู ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ูุชูุงููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูููู ุงูููุงูุณูู ูุง ูุฒุงููู ุฃุฎู ูุฒูุงู. </p><br><h3 id="kontekst-benchmarka" style=";text-align:right;direction:rtl">  ุงูุณูุงู ุงููุนูุงุฑู </h3><br><p style=";text-align:right;direction:rtl">  ูุชู ุชุดุบูู ุงููุนูุงุฑ ุนูู ุซูุงุซุฉ ุฎูุงุฏู Supermicro ุบูุฑ ุงูุชุฑุงุถูุฉ ูุฒูุฏุฉ ุจููุชุงุญ Supermicro ุจุณุฑุนุฉ 10 ุฌูุฌุงุจุช.  ูุชู ุชูุตูู ุงูุฎูุงุฏู ุจุงูููุชุงุญ ูุจุงุดุฑุฉู ูู ุฎูุงู ูุจูุงุช DAC SFP + ุงููููุนูุฉ ูุชู ุชููุฆุชูุง ูู ููุณ VLAN ูุน ุฅุทุงุฑุงุช ุถุฎูุฉ ุงูุญุฌู (MTU 9000). </p><br><p style=";text-align:right;direction:rtl">  ุชู ุชุซุจูุช Kubernetes 1.14.0 ุนูู Ubuntu 18.04 LTS ูุน Docker 18.09.2 (ุงูุฅุตุฏุงุฑ ุงูุงูุชุฑุงุถู ูู Docker ูู ูุฐุง ุงูุฅุตุฏุงุฑ). </p><br><p style=";text-align:right;direction:rtl">  ูุชุญุณูู ุฅููุงููุฉ ุงูุชูุฑุงุฑ ุ ูุฑุฑูุง ุฏุงุฆููุง ุชูููู ุงูุฑุฆูุณู ุนูู ุงูุนูุฏุฉ ุงูุฃููู ุ ููุถุน ุฌุฒุก ุงูุฎุงุฏู ูู ุงููุนูุงุฑ ุนูู ุงูุฎุงุฏู ุงูุซุงูู ุ ูุฌุฒุก ุงูุนููู ุนูู ุงูุซุงูุซ.  ููุฐุง ุ ูุณุชุฎุฏู NodeSelector ูู ุนูููุงุช ูุดุฑ Kubernetes. </p><br><p style=";text-align:right;direction:rtl">  ุณูุชู ูุตู ุงููุชุงุฆุฌ ุงููุฑุฌุนูุฉ ุนูู ูุฐุง ุงููุทุงู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sn/5q/c1/sn5qc1tansjhoplmjdfdrl31zry.png"></p><br><h3 id="vybor-cni-dlya-benchmarka" style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ CNI ูููุนูุงุฑ </h3><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ูุนูุงุฑ CNI ููุท ูู ุงููุงุฆูุฉ ูู ุงููุณู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฎุงุต ุจุฅูุดุงุก ูุฌููุนุฉ ุฑุฆูุณูุฉ ูุงุญุฏุฉ ูุน kubeadm</a> ูู ูุซุงุฆู Kubernetes ุงูุฑุณููุฉ.  ูู CNI 9 ุ ูุฃุฎุฐ 6 ููุท: ูุณุชุจุนุฏ ุชูู ุงูุชู ูุตุนุจ ุชุซุจูุชูุง ู / ุฃู ูุง ุชุนูู ุจุฏูู ุชูููู ุงููุซุงุฆู (Romana ู Contiv-VPP ู JuniperContrail / TungstenFabric). </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุจููุงุฑูุฉ CNIs ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงูููู v3.6 </li><li style=";text-align:right;direction:rtl">  ููุงุฉ v3.6 (ุฃุณุงุณูุง ููุงููู ููุชูุงุตู + ูุงูููู ูุฌุฏุงุฑ ุญูุงูุฉ) </li><li style=";text-align:right;direction:rtl">  Cilium 1.4.2 </li><li style=";text-align:right;direction:rtl">  ุงููุงูููุง 0.11.0 </li><li style=";text-align:right;direction:rtl">  Kube-router 0.2.5 </li><li style=";text-align:right;direction:rtl">  WeaveNet 2.5.1 </li></ul><br><h3 id="ustanovka" style=";text-align:right;direction:rtl">  ุชุฑููุจ </h3><br><p style=";text-align:right;direction:rtl">  ูููุง ูุงู ูู ุงูุฃุณูู ุชุซุจูุช CNI ุ ูููุง ูุงู ุงูุทุจุงุนูุง ุงูุฃูู ุฃูุถู.  ูู CNI ูู ุงููุนูุงุฑ ุจุณูุท ุฌุฏุง ููุชุซุจูุช (ูุน ูุฑูู ุฃู ูุฑูููู). </p><br><p style=";text-align:right;direction:rtl">  ููุง ูููุง ุ ูุชู ุชูููู ุงูุฎุงุฏู ูุงูุชุจุฏูู ูุน ุชูุดูุท ุฅุทุงุฑุงุช ุถุฎูุฉ ุงูุญุฌู (ูููุง ุจุชุซุจูุช MTU 9000).  ุณูููู ุณุนุฏุงุก ุฅุฐุง ูุงู CNI ุจุชุญุฏูุฏ MTU ุชููุงุฆููุง ุจูุงุกู ุนูู ุฅุนุฏุงุฏุงุช ุงููุญูู.  ููุน ุฐูู ุ ููุท Cilium ูุงููุงูููุง ุชุนุงููุช ูุน ูุฐุง.  ูุญุชูู ุจุงูู CNI ุนูู ุทูุจุงุช ุนูู GitHub ูุฅุถุงูุฉ ุงูุชุดุงู MTU ุชููุงุฆููุง ุ ููููุง ุณูููู ุจุชููููู ูุฏูููุง ุนู ุทุฑูู ุชุบููุฑ ConfigMap ูู Calico ู Canal ู Kube-router ุ ุฃู ุนู ุทุฑูู ุชูุฑูุฑ ูุชุบูุฑ ุจูุฆุฉ ูู WeaveNet. </p><br><p style=";text-align:right;direction:rtl">  ูุง ูู ูุดููุฉ MTU ุงูุฎุทุฃุ  ููุถุญ ูุฐุง ุงูุฑุณู ุงูุจูุงูู ุงููุฑู ุจูู WeaveNet ูุน ุชูููู ุฅุทุงุฑุงุช MTU ุงูุงูุชุฑุงุถูุฉ ูุฅุทุงุฑุงุช ุถุฎูุฉ ุงูุญุฌู: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ak/pm/od/akpmodkfstr5nxm5u6fydkd7p9m.png"></a> <br>  <em>ููู ุชุคุซุฑ MTU ุนูู ุงููุทุงู ุงูุชุฑุฏุฏู</em> </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุงูุชุดููุง ูุฏู ุฃูููุฉ MTU ุจุงููุณุจุฉ ููุฃุฏุงุก ุ ูุงูุขู ุฏุนููุง ูุฑู ููู ุชูุชุดู CNI ูุฏููุง ุฐูู ุชููุงุฆููุง: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/8f/_0/jf/8f_0jfpcfyvoo3nhibrmxwdwwg4.png"></a> <br>  <em>CNI ุงููุดู ุชููุงุฆูุง MTU</em> </p><br><p style=";text-align:right;direction:rtl">  ููุถุญ ุงูุฑุณู ุงูุจูุงูู ุฃูู ุจุญุงุฌุฉ ุฅูู ุชูููู MTU ููู ูู Calico ู Canal ู Kube-router ู WeaveNet ููุญุตูู ุนูู ุฃูุถู ุฃุฏุงุก.  ุชูููุช Cilium ู Flannel ูู ุชุญุฏูุฏ MTU ุจุดูู ุตุญูุญ ุฏูู ุฃู ุฅุนุฏุงุฏุงุช. </p><br><h3 id="bezopasnost" style=";text-align:right;direction:rtl">  ุณูุงูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุณููุงุฑู ุฃูุงู CNI ูู ุฌุงูุจูู: ุงููุฏุฑุฉ ุนูู ุชุดููุฑ ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูุชูููุฐ ุณูุงุณุงุช ุดุจูุฉ Kubernetes (ููููุง ููุงุฎุชุจุงุฑุงุช ุงูุญููููุฉ ุ ูููุณ ููููุง ูููุซุงุฆู). </p><br><p style=";text-align:right;direction:rtl">  ุชุดููุฑ ุงุซููู ููุท ูู CNI ุงูุจูุงูุงุช: Cilium ู WeaveNet.  <strong>ูุชู</strong> ุชูููู ุชุดููุฑ <strong>WeaveNet</strong> ุนู ุทุฑูู ุชุนููู ูููุฉ ูุฑูุฑ ุงูุชุดููุฑ ููุชุบูุฑ ุจูุฆุฉ CNI.  ูุตูุช WeaveNet ุฃู ูุฐุง ุงูุฃูุฑ ูุนูุฏ ุ ููู ูู ุดูุก ูุชู ุจุจุณุงุทุฉ.  <strong>ูุชู</strong> ุชูููู ุชุดููุฑ <strong>Cilium</strong> ุจูุงุณุทุฉ ุงูุฃูุงูุฑ ุ ุนู ุทุฑูู ุฅูุดุงุก ุฃุณุฑุงุฑ Kubernetes ุ ูุชุนุฏูู daemonSet (ุฃูุซุฑ ุชุนููุฏูุง ููููุงู ููุง ูู ุนููู ูู WeaveNet ุ ููู Cilium ูุญุชูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุฑุดุงุฏุงุช</a> ุฎุทูุฉ ุจุฎุทูุฉ). </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุชุทุจูู ุณูุงุณุฉ ุงูุดุจูุฉ ุ ูุฌุญุช <strong>Calico ู Canal ู Cilium ู WeaveNet</strong> ููุง ุ ุญูุซ ููููู ุชูููู ููุงุนุฏ ุงูุฏุฎูู ูุงูุฎุฑูุฌ.  ุจุงููุณุจุฉ ุฅูู <strong>Kube-router ุ</strong> ุชูุฌุฏ ููุงุนุฏ ูู Ingress ููุท ุ ุจูููุง ูุง ููุฌุฏ ูุฏู <strong>Flannel</strong> ุณูุงุณุงุช ุดุจูุฉ ุนูู ุงูุฅุทูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ุงููุชุงุฆุฌ ุงูุนุงูุฉ: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/dy/te/dr/dytedrktzayospwhfetapufzng0.png"></a> <br>  <em>ูุชุงุฆุฌ ุงููุนูุงุฑ ูููุฒุงุช ุงูุฃูุงู</em> </p><br><h3 id="proizvoditelnost" style=";text-align:right;direction:rtl">  ุฅูุชุงุฌูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ููุถุญ ูุฐุง ุงููุนูุงุฑ ูุชูุณุท โโุงูุฅูุชุงุฌูุฉ ูุซูุงุซุฉ ุฃุดูุงุท ุนูู ุงูุฃูู ูู ูู ุงุฎุชุจุงุฑ.  ูุญู ูุฎุชุจุฑ ุฃุฏุงุก TCP ู UDP (ุจุงุณุชุฎุฏุงู iperf3) ุฃู ุชุทุจููุงุช ุญููููุฉ ุ ุนูู ุณุจูู ุงููุซุงู HTTP (ูุน Nginx ู curl) ุฃู FTP (ูุน vsftpd ู curl) ุ ูุฃุฎูุฑุงู ุ ุงูุชุทุจููุงุช ุงูุชู ุชุณุชุฎุฏู ุงูุชุดููุฑ ุงุณุชูุงุฏูุง ุฅูู ุจุฑูุชูููู SCP (ุจุงุณุชุฎุฏุงู ุงูุนููู ูุงูุฎุงุฏู) ุงูููุชูุญ). </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุ ูููุง ุจุนูู ูุนูุงุฑ ููุงุณู ูููุนุงุฏู (ุงูุฎุท ุงูุฃุฎุถุฑ) ูููุงุฑูุฉ ุฃุฏุงุก CNI ูุน ุฃุฏุงุก ุงูุดุจูุฉ ุงูุฃุตูู.  ููุง ูุณุชุฎุฏู ููุณ ุงููููุงุณ ุ ูููู ุงูููู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃุตูุฑ = ุฌูุฏ ุฌุฏุง </li><li style=";text-align:right;direction:rtl">  ุงูุจุฑุชูุงู = ุฌูุฏ </li><li style=";text-align:right;direction:rtl">  ุงูุฃุฒุฑู = ูุง ุฅูู ุฐูู </li><li style=";text-align:right;direction:rtl">  ุฃุญูุฑ = ุณูุก </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ูุฃุฎุฐ CNIs ุงูููููุฉ ุจุดูู ุบูุฑ ุตุญูุญ ููุนุฑุถ ููุท ูุชุงุฆุฌ CNIs ุจุงุณุชุฎุฏุงู ูุญุฏุฉ ุงูุฅุฑุณุงู ุงููุจุฑู ุงูุตุญูุญุฉ.  (ููุงุญุธุฉ: ูุง ูุฃุฎุฐ Cilium ุจุดูู ุตุญูุญ ูุญุฏุฉ ุงูุฅุฑุณุงู ุงููุจุฑู ูู ุญุงูุฉ ุชูููู ุงูุชุดููุฑ ุ ูุฐูู ุณูููู ุนููู ุชูููู ูุญุฏุฉ ุงูุฅุฑุณุงู ุงููุจุฑู ูุฏูููุง ุฅูู 8900 ูู ุงูุฅุตุฏุงุฑ 1.4. ูู ุงูุฅุตุฏุงุฑ ุงูุชุงูู ุ 1.5 ุ ูุชู ุฐูู ุชููุงุฆููุง.) </p><br><p style=";text-align:right;direction:rtl">  ูููุง ุงููุชุงุฆุฌ: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/ky/eb/v4/kyebv4yogw1hobalxoe_yxx2qk4.png"></a> <br>  <em>ุฃุฏุงุก TCP</em> </p><br><p style=";text-align:right;direction:rtl">  ุฃุฏุงุก ุฌููุน CNIs ุจุดูู ุฌูุฏ ูู ูุนูุงุฑ TCP.  CNIs ุงููุดูุฑุฉ ูุชุฃุฎุฑุฉ ูุฃู ุงูุชุดููุฑ ูููู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/os/my/l4/osmyl4ynl5wc1kq7ypxsnpotzfm.png"></a> <br>  <em>ุฃุฏุงุก UDP</em> </p><br><p style=";text-align:right;direction:rtl">  ููุง ุ ุฃูุถูุง ุ ูู CNI ุชุนูู ุจุดูู ุฌูุฏ.  ุฃุธูุฑุช CNI ุงููุดูุฑุฉ ููุณ ุงููุชูุฌุฉ ุชูุฑูุจูุง.  Cilium ูุชุฃุฎุฑุฉ ููููุงู ุนู ููุงูุณููุง ุ ููููุง ููุณุช ุณูู 2.3 ูช ูู ุงููุนุฏู ุงูุนุงุฑู ุ ูุจุงูุชุงูู ูุฅู ุงููุชูุฌุฉ ููุณุช ุณูุฆุฉ.  ูุง ุชูุณ ุฃู Cilium ู Flannel ูุญุฏููุง ููุง ุงููุชุงู ุญุฏุฏุชุง ูุญุฏุฉ MTU ุจุดูู ุตุญูุญ ุ ููุฐู ูู ูุชุงุฆุฌูุง ุฏูู ุชูููู ุฅุถุงูู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/tw/ke/uh/twkeuh8lrlwksodlq9hwtv6igbi.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู ุชุทุจูู ุญููููุ  ููุง ุชุฑูู ุ ุจุงููุณุจุฉ ุฅูู HTTP ุ ุงูุฃุฏุงุก ุงูููู ุฃูู ููููุงู ูู TCP.  ุญุชู ุฅุฐุง ููุช ุชุณุชุฎุฏู HTTP ูุน TCP ุ ูู ูุนูุงุฑ TCP ุ ูููุง ุจุชูููู iperf3 ูุชุฌูุจ ุงูุจุฏุงูุฉ ุงูุจุทูุฆุฉ ุ ูุณูุคุซุฑ ุฐูู ุนูู ูุนูุงุฑ HTTP.  ูู ุดูุก ุชู ุจุดูู ุฌูุฏ ููุง.  ุชุชููุฒ ููุฒุฉ Kube-router ุจููุฒุฉ ูุงุถุญุฉ ุ ููู ุชุธูุฑ ุดุฑูุฉ WeaveNet ููุณูุง ุนูู ุฃูุถู ูุฌู: ุญูุงูู 20ูช ุฃุณูุฃ ูู ุงููุนุฏู ุงูุนุงุฑู.  Cilium ู WeaveNet ูุน ุชุดููุฑ ุชุจุฏู ุญุฒููุฉ ููุบุงูุฉ. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/s3/pz/b5/s3pzb5b0y1e9ihfqhjkrnevsulc.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ูุน FTP ุ ุจุฑูุชูููู ุขุฎุฑ ูุณุชูุฏ ุฅูู TCP ุ ุชููู ุงููุชุงุฆุฌ ูุฎุชููุฉ.  ุชุนุงูู Flannel ู Kube-router ุ ุจูููุง ุชุฃุฎุฑุช ูุงูููู ูุงูููุงุฉ ูุณููููู ููููุงู ุจูุณุจุฉ 10ูช ุนู ุงููุนุฏู ุงูุนุงุฑู.  ูุง ูุชูุงุดู ุชุทุจูู WeaveNet ูุน ูุง ูุตู ุฅูู 17ูช ุ ุฅูุง ุฃู ุชุทุจูู WeaveNet ุจุงูุชุดููุฑ ูุชูุฏู ุจูุณุจุฉ 40ูช ุนูู ูุธุงู Cilium ุงููุดูุฑ. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/-n/e4/f8/-ne4f8kfz9iyltdmzqotx9avrqy.png"></a> </p><br><p style=";text-align:right;direction:rtl">  ูุน SCP ููููู ุฃู ุชุฑู ุนูู ุงูููุฑ ูุง ุชุดููุฑ SSH ูููููุง.  ุชููู ุฌููุน ูุญุฏุงุช CNI ุชูุฑูุจูุง ุจุฐูู ุ ููุชุฎูู ูููุน WeaveNet ูุฑุฉ ุฃุฎุฑู.  ูู ุงููุชููุน ุฃู ูููู Cilium ู WeaveNet ูุน ุงูุชุดููุฑ ููุง ุงูุฃุณูุฃ ุนูู ุงูุฅุทูุงู ุจุณุจุจ ุงูุชุดููุฑ ุงููุฒุฏูุฌ (SSH + CNI). </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุฌุฏูู ููุฎุต ุจุงููุชุงุฆุฌ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xh/p_/bk/xhp_bk1ou753_af0cpebeug8swm.png"></p><br><h3 id="potreblenie-resursov" style=";text-align:right;direction:rtl">  ุงุณุชููุงู ุงูููุงุฑุฏ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนูุง ููุงุฑู ููู ูุณุชููู CNI ุงูููุงุฑุฏ ุชุญุช ุงูุฃุญูุงู ุงูุซูููุฉ (ุฃุซูุงุก ุงูุฅุฑุณุงู ุนุจุฑ TCP ุ 10 ุฌูุฌุงุจุช / ุซุงููุฉ).  ูู ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก ุ ูุงุฑูุง CNI ุจุงููุนุงุฏู ุงููุฌุฑุฏุฉ (ุงูุฎุท ุงูุฃุฎุถุฑ).  ูุงุณุชููุงู ุงูููุงุฑุฏ ุ ุณูู ูุนุฑุถ Kubernetes (ุฎุท ุฃุฑุฌูุงูู) ุฎุงูู ูู CNI ููุฑู ุนุฏุฏ ุงูููุงุฑุฏ ุงูุฅุถุงููุฉ ุงูุชู ูุณุชููููุง CNI. </p><br><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุงูุฐุงูุฑุฉ.  ูููุง ููู ูุชูุณุท โโูููุฉ ุฐุงูุฑุฉ ุงููุถูู (ุจุฏูู ุงููุฎุงุฒู ุงููุคูุชุฉ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช) ุจุงูููุบุงุจุงูุช ุฃุซูุงุก ุงูููู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/05/x0/es/05x0es48-t91rrrxx74zkfpsdcq.png"></a> <br>  <em>ุงุณุชููุงู ุงูุฐุงูุฑุฉ</em> </p><br><p style=";text-align:right;direction:rtl">  ุฃุธูุฑ ุงููุงูููุง ู Kube-router ูุชุงุฆุฌ ููุชุงุฒุฉ - ููุท 50 ููุฌุงุจุงูุช.  ูู ูู ูุงูููู ูููุงุฉ ููุง 70. ูู ุงููุงุถุญ ุฃู WeaveNet ูุณุชููู ุฃูุซุฑ ูู ุงูุจุงูู - 130 ููุบุงุจุงูุช ุ ุจูููุง ูุณุชุฎุฏู Cilium ูุง ูุตู ุฅูู 400. <br>  ุงูุขู ุฏุนููุง ูุชุญูู ูู ุงุณุชุฎุฏุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  <strong>ุฌุฏูุฑ ุจุงูููุงุญุธุฉ</strong> : ูู ุงูุฑุณู ุงูุชุฎุทูุทู ุ ูููุณ ุงููุณุจ ุงููุฆููุฉ ุ ูููู ููู ููู ุ ุฃู 38 ุฌุฒุก ูู ุงูููููู ูู "ุญุฏูุฏ ููุดูู" - ูุฐุง ูู 3.8 ูช.  ูููุง ุงููุชุงุฆุฌ: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/c6/5q/ny/c65qnyacfphwufceazosykqm874.png"></a> <br>  <em>ุงุณุชููุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ</em> </p><br><p style=";text-align:right;direction:rtl">  ุชุณุชุฎุฏู Calico ู Canal ู Flannel ู Kube-router ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุจููุงุกุฉ ุนุงููุฉ - ุฃูุซุฑ ูู 2ูช ููุท ูู Kubernetes ุจุฏูู CNI.  ุชุชุฎูู WeaveNet ุจุฏุฑุฌุฉ ูุจูุฑุฉ ุจูุณุจุฉ 5ูช ุ ุชูููุง Cilium - 7ูช. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ููุฎุต ูุงุณุชููุงู ุงูููุงุฑุฏ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sz/ug/hc/szughcsr5izg58bagm3mxee6hlq.png"></p><br><h3 id="itogi" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุฌุฏูู ูุน ุฌููุน ุงููุชุงุฆุฌ: </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/a1/je/fy/a1jefyyz3_4ompsbepfepd_sntk.png"></a> <br>  <em>ุงููุชุงุฆุฌ ุงููุฑุฌุนูุฉ ุงูุนุงูุฉ</em> </p><br><h3 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ุ ุณุฃุนุจุฑ ุนู ุฑุฃูู ุงูุดุฎุตู ูู ุงููุชุงุฆุฌ.  ุชุฐูุฑ ุฃู ูุฐุง ุงููุนูุงุฑ ูุฎุชุจุฑ ููุท ุตุจูุจ ุงุชุตุงู ูุงุญุฏ ุนูู ูุฌููุนุฉ ุตุบูุฑุฉ ุฌุฏูุง (3 ุนูุฏ).  ูุง ููุทุจู ุนูู ุงููุฌููุนุงุช ุงููุจูุฑุฉ (&lt;50 ุนูุฏูุง) ุฃู ุงูุงุชุตุงูุงุช ุงููุชูุงุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุตู ุจุงุณุชุฎุฏุงู CNIs ุงูุชุงููุฉ ููููุง ููุณููุงุฑูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏูู <strong>ุนูุฏ ุชุญุชูู ุนูู ูููุฉ ุตุบูุฑุฉ ูู ุงูููุงุฑุฏ</strong> ูู ูุฌููุนุชู (ุนุฏุฉ ุบูุบุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูุนุฏุฉ ูุฑุงูุฒ) ููุง ุชุญุชุงุฌ ุฅูู ููุฒุงุช ุฃูุงู - ุงุฎุชุฑ <strong>Flannel</strong> .  ูุฐุง ูู ูุงุญุฏ ูู CNIs ุงูุฃูุซุฑ ุงูุชุตุงุฏุง.  ููู ูุชูุงูู ูุน ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูููุงูู (amd64 ุ ุงูุฐุฑุงุน ุ arm64 ุ ุฅูุฎ).  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ ูุฐุง ูุงุญุฏูุง ูู ุงุซููู (ุงูุซุงูู ูู Cilium) CNI ุ ูุงูุฐู ููููู ุชุญุฏูุฏ MTU ุชููุงุฆููุง ุ ุจุญูุซ ูุง ููุฒู ุชูููู ุฃู ุดูุก.  ูุนุฏ Kube-router ููุงุณุจูุง ุฃูุถูุง ุ ูููู ููุณ ูุนูุงุฑููุง ููุบุงูุฉ ูุณุชุญุชุงุฌ ุฅูู ุชูููู MTU ูุฏูููุง. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู <strong>ุชุดููุฑ ุงูุดุจูุฉ</strong> ุจุญุซูุง ุนู ุงูุฃูุงู ุ <strong>ููู ุจุงุณุชุฎุฏุงู WeaveNet</strong> .  ูุง ุชูุณ ุชุญุฏูุฏ ุญุฌู ูุญุฏุฉ ุงูุฅุฑุณุงู ุงููุจุฑู ุ ุฅุฐุง ููุช ุชุณุชุฎุฏู ุฅุทุงุฑุงุช ุถุฎูุฉ ุ ููู ุจุชูุดูุท ุงูุชุดููุฑ ุนู ุทุฑูู ุชุญุฏูุฏ ูููุฉ ูุฑูุฑ ูู ุฎูุงู ูุชุบูุฑ ุจูุฆุฉ.  ููู ูู ุงูุฃูุถู ุฃู ุชูุณู ุงูุฃุฏุงุก - ููุฐู ูู ุฑุณูู ุงูุชุดููุฑ. </li><li style=";text-align:right;direction:rtl">  <strong>ููุงุณุชุฎุฏุงู ุงูุนุงุฏู ุ</strong> ุฃูุตู <strong>ูุงูููู</strong> .  ูุณุชุฎุฏู ูุฐุง CNI ุนูู ูุทุงู ูุงุณุน ูู ุฃุฏูุงุช ูุดุฑ Kubernetes ุงููุฎุชููุฉ (Kops ุ Kubespray ุ Rancher ุ ุฅูุฎ).  ููุง ูู ุงูุญุงู ูุน WeaveNet ุ ุชุฐูุฑ ุชูููู MTU ูู ConfigMap ุฅุฐุง ููุช ุชุณุชุฎุฏู ุฅุทุงุฑุงุช ุถุฎูุฉ ุฌุฏุงู.  ุฅููุง ุฃุฏุงุฉ ูุชุนุฏุฏุฉ ุงููุธุงุฆู ุ ูุนุงูุฉ ูู ุญูุซ ุงุณุชููุงู ุงูููุงุฑุฏ ูุงูุฅูุชุงุฌูุฉ ูุงูุฃูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฃุฎูุฑุงู ุ ุฃูุตุญู ุจูุชุงุจุนุฉ ุชุทูุฑ <strong>Cilium</strong> .  ูุญุชูู ูุฐุง CNI ุนูู ูุฑูู ูุดุท ููุบุงูุฉ ูุนูู ูุซูุฑูุง ุนูู ููุชุฌู (ุงููุธุงุฆู ุ ุชูููุฑ ุงูููุงุฑุฏ ุ ุงูุฅูุชุงุฌูุฉ ุ ุงูุฃูุงู ุ ุชูุฒูุน ุงููุฌููุนุฉ ...) ุ ููุฏููู ุฎุทุท ูุซูุฑุฉ ุฌุฏูุง ููุงูุชูุงู. </p><br><p style=";text-align:right;direction:rtl"> <a href=""><img src="https://habrastorage.org/webt/hf/r1/t1/hfr1t1uh52xpsj-_fblrwvjs8gy.png"></a> </p><br><p style=";text-align:right;direction:rtl">  <em>ูุฎุทุท ูุฑุฆู ูุงุฎุชูุงุฑ CNI</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar448688/">https://habr.com/ru/post/ar448688/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar448676/index.html">ูุฑุงูุจุฉ ุงูุทูุณ ูู ุบุฑุงูุงูุง</a></li>
<li><a href="../ar448680/index.html">ุจุฑุงุกุงุช ุงูุงุฎุชุฑุงุน ูู ุงูุชุตููู: ุงูุฌุฒุก ุงูุฃูู (ุฃุญูุงู ุนุงูุฉ ุ ุฃูุซูุฉ ูู Apple ุ Facebook)</a></li>
<li><a href="../ar448682/index.html">ููู ุญูุฒุช ุชุนุฒูุฉ ุงูุญุฑูุจ ุชูุฏู ููุญุงุช ุงูููุงุชูุญ ูุฃูุนุงุจ ุงูููุฏูู</a></li>
<li><a href="../ar448684/index.html">ูุง ูู ูุณุชูู ุงูุทูุจ ุนูู ูุทูุฑู PHP ููุฑุจุน ุงูุฃูู ูู ุนุงู 2019ุ</a></li>
<li><a href="../ar448686/index.html">ูุฏู ูููููุง ููุชูุฑ ุดุงุญูุชูู ููุฑุจุงุฆูุชูู ูุดูุก ุขุฎุฑ</a></li>
<li><a href="../ar448692/index.html">ุซูุงุซ ููุฒุงุช ุบูุฑ ูุงุถุญุฉ ูุฒููุจุฑุง ุงูุชู ูููู ุฃู ุชุฒูุฏ ูู ููุงุกุฉ ุงูููุธููู</a></li>
<li><a href="../ar448694/index.html">ูุตุฉ ููู ูู ูุตู ุฅูู ุงูุชููุฒููู</a></li>
<li><a href="../ar448696/index.html">Webinar Group-IB "ูุธุฑุฉ ุฌุฏูุฏุฉ ุนูู ุชูุฏูุฏ ุงูุตูุฏ: ุชูููุงุช ุงูุชุดุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุฌูู"</a></li>
<li><a href="../ar448698/index.html">ุงูุณุญุจ ุงูุณูุงุฏูุฉ</a></li>
<li><a href="../ar448700/index.html">DjangoCon Europe 2019. ูู ูุงุช ุงูููุฑ ุงูุฎุงุต ุจูุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>