<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐ค ๐ ุฎุฑุงุฆุท ุงูุธู ุงูุนุงูุณุฉ: ุงูุฌุฒุก 2 - ุงูุชูููุฐ ๐จ๐พโโ๏ธ ๐จโ๐ฉโ๐งโ๐ง ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ุชูุฏู ูุฐู ุงูููุงูุฉ ุชุทุจูููุง ุจุณูุทูุง ูุฎุฑุงุฆุท ุงูุธู ุงูุนุงูุณุฉ (ูุชู ูุตู ุงูุฎูุงุฑุฒููุฉ ูู ููุงู ุณุงุจู ). ุจุนุฏ ุฐูู ุ ุณูู ุฃุดุฑุญ ููู ูุนูุช ุฐูู ููุง ูู ุงููุฎุงุทุฑ. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุฑุงุฆุท ุงูุธู ุงูุนุงูุณุฉ: ุงูุฌุฒุก 2 - ุงูุชูููุฐ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440570/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ!  ุชูุฏู ูุฐู ุงูููุงูุฉ ุชุทุจูููุง ุจุณูุทูุง <b>ูุฎุฑุงุฆุท ุงูุธู ุงูุนุงูุณุฉ</b> (ูุชู ูุตู ุงูุฎูุงุฑุฒููุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุณุงุจู</a> ).  ุจุนุฏ ุฐูู ุ ุณูู ุฃุดุฑุญ ููู ูุนูุช ุฐูู ููุง ูู ุงููุฎุงุทุฑ.  ุณูุชู ุฃูุถูุง ุงููุธุฑ ูู ุจุนุถ ุงูุชุญุณููุงุช ุงููุญุชููุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/80f/588/6da/80f5886da498099f2e9716d4c0a53e3d.png" alt="ุงูุตูุฑุฉ"><br>  <i>ุงูุดูู 1: ูู ุงููุณุงุฑ ุฅูู ุงููููู: ุจุฏูู RSM ุ ูุน RSM ุ ุงููุฑู</i> <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงููุชูุฌุฉ </h2><br>  ูู <i>ุงูุดูู 1 ุ</i> ููููู ุฑุคูุฉ ุงููุชูุฌุฉ ุงูุชู ุชู ุงูุญุตูู ุนูููุง ุจุงุณุชุฎุฏุงู <b>RSM</b> .  ูุฅูุดุงุก ูุฐู ุงูุตูุฑ ุ ุชู ุงุณุชุฎุฏุงู "Stanford Rabbit" ูุซูุงุซุฉ ุฑุจุงุนูุงุช ูุชุนุฏุฏุฉ ุงูุฃููุงู.  ูู ุงูุตูุฑุฉ ุนูู ุงููุณุงุฑ ุ ููููู ุฑุคูุฉ ูุชูุฌุฉ ุงูุชูุฏูู ุจุฏูู <b>RSM</b> ุ ุจุงุณุชุฎุฏุงู <b>ุถูุก ููุถุนู</b> ููุท.  ูู ุดูุก ูู ุงูุธู ุฃุณูุฏ ุชูุงูุง.  ุชูุธูุฑ ุงูุตูุฑุฉ ูู ุงููุณุท ุงููุชูุฌุฉ ุจุงุณุชุฎุฏุงู <b>RSM</b> .  ุงูุงุฎุชูุงูุงุช ุงูุชุงููุฉ ููุญูุธุฉ: ูู ูู ููุงู ููุงู ุฃููุงู ุฃูุซุฑ ุฅุดุฑุงููุง ุ ูุฑุฏูุฉ ุงูููู ุ ุชุบูุฑ ุงูุฃุฑุถ ูุงูุฃุฑุงูุจ ุ ุงูุชุธููู ููุณ ุฃุณูุฏูุง ุชูุงููุง.  ุชุธูุฑ ุงูุตูุฑุฉ ุงูุฃุฎูุฑุฉ ุงููุฑู ุจูู ุงูุฃูู ูุงูุซุงูู ุ ูุจุงูุชุงูู ูุณุงููุฉ <b>RSM</b> .  ุชููู ุงูุญูุงู ูุงูุฃุฏูุงุช ุงููุดุฏูุฏุฉ ูุฑุฆูุฉ ูู ุงูุตูุฑุฉ ุงููุณุทู ุ ูููู ูููู ุญููุง ุนู ุทุฑูู ุถุจุท ุญุฌู ุงููุจ ุ ูุดุฏุฉ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุ ูุนุฏุฏ ุงูุนููุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูููุฐ </h2><br>  ุชู ุชูููุฐ ุงูุฎูุงุฑุฒููุฉ ุนูู ูุญุฑููุง ุงูุฎุงุต.  ุชุชู ูุชุงุจุฉ ุงูุชุธููู ูู HLSL ุ ููููู ุงูุชุฌุณูุฏ ูู DirectX 11. ููุช ุจุงููุนู ุจุฅุนุฏุงุฏ <b>ุงูุชุธููู ุงููุคุฌู</b> ูุชุนููู <b>ุงูุธู</b> ููุถูุก ุงูุงุชุฌุงู (ูุตุฏุฑ ุถูุก ุงูุงุชุฌุงู) ูุจู ูุชุงุจุฉ ูุฐู ุงูููุงูุฉ.  ุฃููุงู ุ ููุช ุจุชุทุจูู <b>RSM</b> ููุถูุก ุงูุงุชุฌุงูู ูููุท ุจุนุฏ ุฅุถุงูุฉ ุงูุฏุนู <b>ูุฎุฑูุทุฉ ุงูุธู</b> ู <b>RSM</b> ููุถูุก ุงูููุถุนู. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูุฏูุฏ ุฎุฑูุทุฉ ุงูุธู </h3><br>  ุชูููุฏููุง ุ ูุง ุชุนุฏ <b>ุฎุฑุงุฆุท ุงูุธู</b> (SM) ุณูู ุฎุฑูุทุฉ ููุนูู.  ูุฐุง ูุนูู ุฃูู ูุง ุชุญุชุงุฌ ุญุชู ุฅูู ุชุธููู ุจูุณู / ุฌุฒุก ูุชุฌููุน SM.  ููุน ุฐูู ุ ุณุชุญุชุงุฌ ุฅูู ุนุฏุฏ ูููู ูู ุงููุฎุงุฒู ุงููุคูุชุฉ ุงูุฅุถุงููุฉ ูู <b>RSM</b>  ุชุญุชุงุฌ ุฅูู ุชุฎุฒูู ูููุน ูุณุงุญุฉ ุงูุนุงูู ุ ููุณุงุญุฉ ูุณุงุญุฉ ุงูุนุงูู <b>ูุชุฏููู</b> (ุฎุฑุฌ ุงูุถูุก).  ูุฐุง ูุนูู ุฃูู ุชุญุชุงุฌ ุฅูู ุชุธููู ุจูุณู / ุชุฌุฒุฆุฉ ุฐู ุฃูุฏุงู ุชุฌุณูุฏ ูุชุนุฏุฏุฉ.  ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ูู ุฃุฌู ูุฐู ุงูุชูููุฉ ุชุญุชุงุฌ ุฅูู ูุทุน <b>ูุฌู ุงูุฅุนุฏุงู</b> ุ ูููุณ ุงูุฌุฒุก ุงูุฃูุงูู. <br><br>  ูุนุฏ ุงุณุชุฎุฏุงู ุงูุญูุงู ุงูุฃูุงููุฉ <b>ููุชุฎูุต ูู ุงููุฌู</b> ุทุฑููุฉ ูุณุชุฎุฏูุฉ ุนูู ูุทุงู ูุงุณุน ูุชุฌูุจ ุขุซุงุฑ ุงูุธู ุ ููู ูุฐุง ูุง ูุนูู ูุน <b>RSM</b> . <br><br>  ููููู ุชูุฑูุฑ ุงูููุงูู ูุงููุณุงุญุงุช ุงูุทุจูุนูุฉ ูู ุงูุนุงูู ุฅูู ุชุธููู ุงูุจูุณู ููุชุงุจุชูุง ุฅูู ุงููุฎุงุฒู ุงููุคูุชุฉ ุงูููุงุณุจุฉ.  ุฅุฐุง ููุช ุชุณุชุฎุฏู <b>ุงูุชุนููู ุงูุนุงุฏู</b> ุ <b>ููู</b> ุฃูุถูุง ุจุญุณุงุจูุง ูู ุชุธููู ุงูุจูุณู.  <b>ูุชู</b> ุงุญุชุณุงุจ <b>ุงูุชุฏูู</b> ููุงู ุ ุจุถุฑุจ ูุงุฏุฉ ุงูุจูุงุถ ุญุณุจ ููู ูุตุฏุฑ ุงูุถูุก.  <b>ููุถูุก ุงูููุถุนู ุ</b> ุชุญุชุงุฌ ุฅูู ุถุฑุจ ุงููููุฉ ุงููุงุชุฌุฉ ุจุฒุงููุฉ ุงูุญุฏูุซ.  <b>ููุถูุก ุงูุงุชุฌุงูู ุ</b> ูุชู ุงูุญุตูู ุนูู ุตูุฑุฉ ุบูุฑ ูุธููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุญุถูุฑ ูุญุณุงุจ ุงูุฅุถุงุกุฉ </h3><br>  ููุงู ุจุนุถ ุงูุฃุดูุงุก ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจูุง ูููุฑูุฑ ุงูุฑุฆูุณู.  ูุฌุจ ุฑุจุท ุฌููุน ุงููุฎุงุฒู ุงููุคูุชุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูุธู ุจุชูุฑูุฑ ุงูููุงู.  ุชุญุชุงุฌ ุฃูุถุง ุฅูู ุฃุฑูุงู ุนุดูุงุฆูุฉ.  ุชููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฑุณููุฉ</a> ุฃูู ุชุญุชุงุฌ ุฅูู ุญุณุงุจ ูุฐู ุงูุฃุฑูุงู ูุณุจููุง ูุญูุธูุง ูู ูุฎุฒู ูุคูุช ูุชูููู ุนุฏุฏ ุงูุนูููุงุช ูู ุชูุฑูุฑ ุฃุฎุฐ ุงูุนููุงุช <b>RSM</b> .  ูุธุฑูุง ูุฃู ุงูุฎูุงุฑุฒููุฉ ุซูููุฉ ูู ุญูุซ ุงูุฃุฏุงุก ุ ูุฃูุง ุฃุชูู ุชูุงููุง ูุน ุงูููุงูุฉ ุงูุฑุณููุฉ.  ููุตู ุฃูุถูุง ุจุงูุงูุชุฒุงู ุจุงูุชูุงุณู ุงูุฒููู (ุงุณุชุฎุฏู ููุณ ููุท ุฃุฎุฐ ุงูุนููุงุช ูุฌููุน ุญุณุงุจุงุช ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ).  ุณูููุน ูุฐุง ุงูุฎููุงู ุนูุฏูุง ูุณุชุฎุฏู ูู ุฅุทุงุฑ ุธู ูุฎุชูู. <br><br>  ุชุญุชุงุฌ ุฅูู ุฑูููู ุนุดุฑููู ุนุดูุงุฆููู ูู ุงููุทุงู [0 ุ 1] ููู ุนููุฉ.  ุณูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ูุชุญุฏูุฏ ุฅุญุฏุงุซูุงุช ุงูุนููุฉ.  ุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุงููุตูููุฉ ููุณูุง ุงูุชู ุชุณุชุฎุฏููุง ูุชุญููู ุงูููุงุถุน ูู ูุณุงุญุฉ ุงูุนุงูู (ูุณุงุญุฉ ุงูุนุงูู) ุฅูู ูุณุงุญุฉ ุงูุธู (ูุณุงุญุฉ ูุตุฏุฑ ุงูุถูุก).  ุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ูุซู ูุฐู ุงููุนููุงุช ูุฃุฎุฐ ุงูุนููุงุช ุ ูุงูุชู ุณุชุนุทู ููููุง ุฃุณูุฏ ุฅุฐุง ููุช ุจุงูุนููุฉ ุฎุงุฑุฌ ุญุฏูุฏ ุงููุณูุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูุฑูุฑ ุงูุฅุถุงุกุฉ </h3><br>  ุงูุขู ุงูุฌุฒุก ุงูุตุนุจ ูููู.  ููุตู ุจุญุณุงุจ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุจุนุฏ ุญุณุงุจ ุงูุฅุถุงุกุฉ ุงููุจุงุดุฑุฉ ููุตุฏุฑ ุถูุก ูุนูู.  ูุฐุง ูุฃูู ุชุญุชุงุฌ ุฅูู ุดุงุดุฉ ุจููุก ุงูุดุงุดุฉ ููุญุตูู ุนูู <b>ุฅุถุงุกุฉ ุงุชุฌุงููุฉ</b> .  ููุน ุฐูู ุ ุจุงููุณุจุฉ <b>ููุถูุก</b> <b>ุงูููุถุนู</b> <b>ูุงูููุทู ุ</b> ุนุงุฏุฉ ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุดุจูุงุช ุฐุงุช ุดูู ูุนูู ูุน <b>ุฅุนุฏุงู</b> ูููุก ูุญุฏุงุช ุจูุณู ุฃูู. <br><br>  ูู ุงูููุฏ ุฃุฏูุงู ุ ูุชู ุญุณุงุจ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ููุจูุณู.  ุจุนุฏ ุฐูู ุ ุณุฃุดุฑุญ ูุง ูุญุฏุซ ููุงู. <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoReflectiveShadowMapping</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float3 P, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> divideByW, float3 N)</span></span></span><span class="hljs-function"> </span></span>{ float4 textureSpacePosition = mul(lightViewProjectionTextureMatrix, float4(P, <span class="hljs-number"><span class="hljs-number">1.0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (divideByW) textureSpacePosition.xyz /= textureSpacePosition.w; float3 indirectIllumination = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rMax = rsmRMax; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uint i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; rsmSampleCount; ++i) { float2 rnd = rsmSamples[i].xy; float2 coords = textureSpacePosition.xy + rMax * rnd; float3 vplPositionWS = g_rsmPositionWsMap .Sample(g_clampedSampler, coords.xy).xyz; float3 vplNormalWS = g_rsmNormalWsMap .Sample(g_clampedSampler, coords.xy).xyz; float3 flux = g_rsmFluxMap.Sample(g_clampedSampler, coords.xy).xyz; float3 result = flux * ((max(<span class="hljs-number"><span class="hljs-number">0</span></span>, dot(vplNormalWS, P โ vplPositionWS)) * max(<span class="hljs-number"><span class="hljs-number">0</span></span>, dot(N, vplPositionWS โ P))) / <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(length(P โ vplPositionWS), <span class="hljs-number"><span class="hljs-number">4</span></span>)); result *= rnd.x * rnd.x; indirectIllumination += result; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> saturate(indirectIllumination * rsmIntensity); }</code> </pre> <br>  ุงููุณูุทุฉ ุงูุฃููู ููุฏุงูุฉ ูู <b>P</b> ุ ููู ููุถุน ูุณุงุญุฉ ุงูุนุงูู (ูู ูุณุงุญุฉ ุงูุนุงูู) ููุญุฏุฉ ุจูุณู ูุญุฏุฏุฉ.  <b>ูุชู</b> ุงุณุชุฎุฏุงู <b>DivideByW</b> ููุชูุณูู ุงููุญุชูููู ุงูุถุฑูุฑู ููุญุตูู ุนูู ุงููููุฉ <b>Z</b> ุงูุตุญูุญุฉ.  <b>N</b> ูู ุนุงูู ุงููุถุงุก ุงูุทุจูุนู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">float4 textureSpacePosition = mul(lightViewProjectionTextureMatrix, float4(P, <span class="hljs-number"><span class="hljs-number">1.0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (divideByW) textureSpacePosition.xyz /= textureSpacePosition.w; float3 indirectIllumination = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rMax = rsmRMax;</code> </pre><br>  ูู ูุฐุง ุงูุฌุฒุก ูู ุงูููุฏ ุ ูุชู ุญุณุงุจ ููุถุน ุงููุถุงุก ุงูุฎููู (ูุณุจุฉ ุฅูู ูุตุฏุฑ ุงูุถูุก) ุ ูุชููุฆุฉ ูุชุบูุฑ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑ ุ ุญูุซ ุณูุชู <b>ุฌูุน</b> ุงูููู ุงููุญุณูุจุฉ ูู ูู ุนููุฉ ุ ููุชู <b>ุชุนููู</b> ูุชุบูุฑ <b>rMax</b> ูู ูุนุงุฏูุฉ ุงูุฅุถุงุกุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฑุณููุฉ</a> ุ ุงูุชู <b>ุณุฃุดุฑุญูุง</b> ูู ุงููุณู ุงูุชุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uint i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; rsmSampleCount; ++i) { float2 rnd = rsmSamples[i].xy; float2 coords = textureSpacePosition.xy + rMax * rnd; float3 vplPositionWS = g_rsmPositionWsMap .Sample(g_clampedSampler, coords.xy).xyz; float3 vplNormalWS = g_rsmNormalWsMap .Sample(g_clampedSampler, coords.xy).xyz; float3 flux = g_rsmFluxMap.Sample(g_clampedSampler, coords.xy).xyz;</code> </pre><br>  ููุง ูุจุฏุฃ ุงูุฏูุฑุฉ ููุนุฏ ูุชุบูุฑุงุชูุง ูููุนุงุฏูุฉ.  ูุฃุบุฑุงุถ ุงูุชุญุณูู ุ ุชุญุชูู ุงูุนููุงุช ุงูุนุดูุงุฆูุฉ ุงูุชู ููุช ุจุญุณุงุจูุง ุจุงููุนู ุนูู ุฅุฒุงุญุฉ ุฅุญุฏุงุซูุงุช ุ ุฃู ููุญุตูู ุนูู ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุ ุฃุญุชุงุฌ ููุท ุฅูู ุฅุถุงูุฉ <b>rMax * rnd</b> ุฅูู ุฅุญุฏุงุซูุงุช ุงููุถุงุก ุงูุฎููู.  ุฅุฐุง ูุงูุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงููุงุชุฌุฉ ุฎุงุฑุฌ ุงููุทุงู [0.1] ุ ูุฌุจ ุฃู ุชููู ุงูุนููุงุช ุณูุฏุงุก.  ููู ุฃูุฑ ููุทูู ุ ูุฃูู ูุชุฌุงูุฒ ูุทุงู ุงูุฅุถุงุกุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> float3 result = flux * ((max(<span class="hljs-number"><span class="hljs-number">0</span></span>, dot(vplNormalWS, P โ vplPositionWS)) * max(<span class="hljs-number"><span class="hljs-number">0</span></span>, dot(N, vplPositionWS โ P))) / <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(length(P โ vplPositionWS), <span class="hljs-number"><span class="hljs-number">4</span></span>)); result *= rnd.x * rnd.x; indirectIllumination += result; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> saturate(indirectIllumination * rsmIntensity);</code> </pre><br>  ูุฐุง ูู ุงูุฌุฒุก ุงูุฐู ูุชู ููู ุญุณุงุจ ูุนุงุฏูุฉ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ( <i>ุงูุดูู 2</i> ) ุ ููุชู ูุฒููุง ุฃูุถูุง ููููุง ูููุณุงูุฉ ูู ุฅุญุฏุงุซูุงุช ุงููุถุงุก ุงูุฎููู ุฅูู ุงูุนููุฉ.  ุชุจุฏู ุงููุนุงุฏูุฉ ูุฎููุฉ ุ ููุง ูุณุงุนุฏ ุงูููุฏ ูู ููู ูู ุดูุก ุ ูุฐูู ุณุฃุดุฑุญ ุจูุฒูุฏ ูู ุงูุชูุตูู. <br><br>  ุงููุชุบูุฑ <b>ph</b> (ูุงู) ูู <b>ุชุฏูู</b> ุงูุถูุก ุ ููู ุดุฏุฉ ุงูุฅุดุนุงุน.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุณุงุจูุฉ</a> ุชุตู <b>ุงูุชุฏูู</b> ุจูุฒูุฏ ูู ุงูุชูุงุตูู. <br><br>  ุฌุฏุงูู <b>ุงูุชุฏูู</b> ูุน ุงุซููู ูู ุงูุฃุนูุงู ุงููููุฉ ุงูุนุฏุฏูุฉ.  ุงูุฃูู ูู ุจูู ูุตุฏุฑ ุงูุถูุก ุงูุทุจูุนู (texel) ูุงูุงุชุฌุงู ูู ูุตุฏุฑ ุงูุถูุก ุฅูู ุงูููุถุน ุงูุญุงูู.  ูุงูุซุงูู ูู ุจูู ุงูุชูุงุฑ ุงูุทุจูุนู ููุชุฌู ุงูุงุชุฌุงู ูู ุงูููุถุน ุงูุญุงูู ุฅูู ููุถุน ูุตุฏุฑ ุงูุถูุก (texel).  ูู ุฃุฌู ุนุฏู ุชูุฏูู ูุณุงููุฉ ุณูุจูุฉ ูู ุงูุฅุถุงุกุฉ (ูุชุถุญ ุฅุฐุง ูู ูุชู ุฅุถุงุกุฉ ุงูุจููุณู) ุ ุชูุชุตุฑ ุงูููุชุฌุงุช ุงูุนุฏุฏูุฉ ุนูู ุงููุทุงู [0 ุุ].  ูู ูุฐู ุงููุนุงุฏูุฉ ุ ูุชู ุงูุชุทุจูุน ูู ุงูููุงูุฉ ุ ุฃูุชุฑุถ ุ ูุฃุณุจุงุจ ุชุชุนูู ุจุงูุฃุฏุงุก.  ูู ุงูููุจูู ุจููุณ ุงููุฏุฑ ุชุทุจูุน ูุชุฌูุงุช ุงูุงุชุฌุงู ูุจู ุฃุฏุงุก ุงูููุชุฌุงุช ุงูุนุฏุฏูุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab4/dd3/258/ab4dd3258620fc3bae4a044df4072cf5.png" alt="ุงูุตูุฑุฉ"><br>  <i>ุงูุดูู 2: ูุนุงุฏูุฉ ุฅุถุงุกุฉ ููุทุฉ ูุน ุงูููุถุน <b>x</b> ููุตุฏุฑ ุถูุก ุงูุจูุณู ุงูุงุชุฌุงูู ุงูุนุงุฏู <b>p</b></i> <br><br>  ูููู ุฎูุท ูุชูุฌุฉ ูุฐุง ุงูุชูุฑูุฑ ูุน ุฎูููุฉ (ุฅุถุงุกุฉ ูุจุงุดุฑุฉ) ุ ูุณุชููู ุงููุชูุฌุฉ ููุง ูู <i>ุงูุดูู 1</i> . <br><br><h2 style=";text-align:right;direction:rtl">  ูุทุจุงุช </h2><br>  ุนูุฏ ุชูููุฐ ูุฐู ุงูุฎูุงุฑุฒููุฉ ุ ูุงุฌูุช ุจุนุถ ุงููุดุงูู.  ุณุฃุชุญุฏุซ ุนู ูุฐู ุงููุดููุงุช ุญุชู ูุง ุชุชุฏุฎู ูู ููุณ ุงููุดููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุนููุงุช ุฎุงุทุฆุฉ </h3><br>  ููุฏ ุฃูุถูุช ููุชูุง ุทูููุงู ูู ุงูุชุดุงู ุงูุณุจุจ ุงูุฐู ุฌุนู ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุชุจุฏู ูุชูุฑุฑุฉ.  ุชููู ููุงู Crytek Sponza ูุฎููุฉ ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุฃุฏุงุฉ ูู ูููููุฉ ูุฐูู.  ููู ุจุงููุณุจุฉ ูู <b>RSM</b> ุ ููู ููุณุช ููุงุณุจุฉ ุฌุฏูุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูุจูุฌู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูููู OpenGL ุจุชุนููู ูุณู <b>RSM</b> ุฅูู GL_CLAMP_TO_BORDER <br></div></div><br><h3 style=";text-align:right;direction:rtl">  ุงูููู ุงููุฎุตุตุฉ </h3><br>  ูุชุญุณูู ุณูุฑ ุงูุนูู ุ ูู ุงูููู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุชุบููุฑ ุจุนุถ ุงููุชุบูุฑุงุช ุจุถุบุทุฉ ุฒุฑ ูุงุญุฏุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุดุฏุฉ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ููุฌููุนุฉ ุฃุฎุฐ ุงูุนููุงุช ( <b>rMax</b> ).  ูุฌุจ ุถุจุท ูุฐู ุงููุนููุงุช ููู ูุตุฏุฑ ุถูุก.  ุฅุฐุง ูุงู ูุฏูู ูุทุงู ุนููุงุช ูุจูุฑ ุ ูุณุชุญุตู ุนูู ุฅุถุงุกุฉ ุบูุฑ ูุจุงุดุฑุฉ ูู ูู ููุงู ุ ููู ุฃูุฑ ูููุฏ ูููุดุงูุฏ ุงููุจูุฑุฉ.  ููุฒูุฏ ูู ุงูุฅุถุงุกุฉ ุงููุญููุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุ ุณุชุญุชุงุฌ ุฅูู ูุทุงู ุฃุตุบุฑ.  ููุถุญ <i>ุงูุดูู 3</i> ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุงูุนุงูููุฉ ูุงููุญููุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a08/c98/7f7/a08c987f7a9bf46344a623bafebfc903.png" alt="ุงูุตูุฑุฉ"><br>  <i>ุงูุดูู 3: ูุธุงูุฑุฉ ุงูุชุจุนูุฉ <b>rMax</b> .</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑูุฑ ูููุตู </h3><br>  ูู ุงูุจุฏุงูุฉ ุ ุงุนุชูุฏุช ุฃู ุจุฅููุงูู ุฅูุชุงุฌ ุฅุถุงุกุฉ ุบูุฑ ูุจุงุดุฑุฉ ูู ุธูุงู ุ ุญูุซ ุฃููุฑ ูู ุงูุฅุถุงุกุฉ ุงููุจุงุดุฑุฉ.  ุจุงููุณุจุฉ <b>ููุฅุถุงุกุฉ ุงูุงุชุฌุงููุฉ ุ</b> ูุนูู ูุฐุง ูุฃูู ูุง ุชุฒุงู ุชุฑุณู ุฑุจุงุนููุง ุจููุก ุงูุดุงุดุฉ.  ููุน ุฐูู ุ ุจุงููุณุจุฉ <b>ููุถูุก</b> <b>ุงูููุถุนู</b> <b>ูุงูููุทู ุ</b> ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชุญุณูู ุญุณุงุจ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ.  ูุฐูู ุ ุงุนุชุจุฑุช ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ูุฑูุฑูุง ูููุตูุงู ุ ููู ุฃูุฑ ุถุฑูุฑู ุฅุฐุง ููุช ุชุฑูุฏ ุฃูุถูุง ุฅุฌุฑุงุก <b>ุงูุงุณุชููุงุก ูู ูุณุงุญุฉ ุงูุดุงุดุฉ</b> . <br><br><h3 style=";text-align:right;direction:rtl">  ูุฎุจุฃ </h3><br>  ูุฐู ุงูุฎูุงุฑุฒููุฉ ููุณุช ุตุฏููุฉ ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู ุงูุฅุทูุงู.  ูููุฐ ุฃุฎุฐ ุงูุนููุงุช ูู ููุงุท ุนุดูุงุฆูุฉ ูู ุงูุนุฏูุฏ ูู ุงูููุงู.  ุนุฏุฏ ุงูุนููุงุช ุจุฏูู ุชุญุณููุงุช ูุจูุฑ ุฃูุถูุง ุจุดูู ุบูุฑ ููุจูู.  ุจุฏูุฉ 1280 * 720 ูุนุฏุฏ ุนููุงุช <b>RSM</b> 400 ุ ุณุชุฌุนู 1.105.920.000 ุนููุฉ ููู ูุตุฏุฑ ุถูุก. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅูุฌุงุจูุงุช ูุณูุจูุงุช </h3><br>  ุณูู ุฃุฏุฑุฌ ุฅูุฌุงุจูุงุช ูุณูุจูุงุช ูุฐู ุงูุฎูุงุฑุฒููุฉ ุญุณุงุจ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ. <br><table style=";text-align:right;direction:rtl"><tbody><tr><td>  ู </td><td>  <b>ุถุฏ</b> </td></tr><tr><td>  ูู ุงูุณูู ุฃู ูููู ุงูุฎูุงุฑุฒููุฉ </td><td>  ููุณ ุฃุตุฏูุงุก ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู ุงูุฅุทูุงู </td></tr><tr><td>  ูุชูุงูู ุจุดูู ุฌูุฏ ูุน ุงูุนุงุฑุถ ุงููุคุฌู </td><td>  ุงูุฅุนุฏุงุฏ ุงููุชุบูุฑ ูุทููุจ </td></tr><tr><td>  ูููู ุงุณุชุฎุฏุงููุง ูู ุงูุฎูุงุฑุฒููุงุช ุงูุฃุฎุฑู ( <b>LPV</b> ) </td><td>  ุงูุงุฎุชูุงุฑ ุงููุณุฑู ุจูู ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ุงููุญููุฉ ูุงูุนุงูููุฉ </td></tr></tbody></table><h2 style=";text-align:right;direction:rtl">  ุงูุชุญุณููุงุช </h2><br>  ููุฏ ุจุฐูุช ุนุฏุฉ ูุญุงููุงุช ูุฒูุงุฏุฉ ุณุฑุนุฉ ูุฐู ุงูุฎูุงุฑุฒููุฉ.  ููุง ูู ููุถุญ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฑุณููุฉ</a> ุ ููููู ุชูููุฐ <b>ุงูุงุณุชููุงุก ุจูู ูุณุงุญุฉ ุงูุดุงุดุฉ</b> .  ูุนูุช ูุฐุง ุ ูุฌุนู ุฃุณุฑุน ููููุง.  ูููุง ููู ุณูู ุฃุตู ุจุนุถ ุงูุชุญุณููุงุช ุ ูุฃุฌุฑู ููุงุฑูุฉ (ูู ุงูุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ) ุจูู ุงูุชุทุจููุงุช ุงูุชุงููุฉ ุ ุจุงุณุชุฎุฏุงู ูุดูุฏ ุจู 3 ุฌุฏุฑุงู ูุฃุฑูุจ: ุจุฏูู <b>RSM</b> ุ ุชูููุฐ ุณุงุฐุฌ ูู <b>RSM</b> ุ ูุญุฑู ุจูุงุณุทุฉ <b>RSM</b> . <br><br><h3 style=";text-align:right;direction:rtl">  Z ุชุญูู </h3><br>  ุฃุญุฏ ุฃุณุจุงุจ ุนูู ุฌูุงุฒ <b>RSM ุงูุฎุงุต ุจู</b> ุจุดูู ุบูุฑ ูุนุงู ูู ุฃููู ุญุณุจุช ุฃูุถูุง ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ ููุญุฏุงุช ุงูุจูุณู ุงูุชู ูุงูุช ุฌุฒุกูุง ูู ุตูุฏูู ุงูุณูุงุก.  Skybox ุจุงูุชุฃููุฏ ูุง ูุญุชุงุฌ ุฅูููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃุฎุฐ ุงูุนููุงุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนุดูุงุฆู </h3><br>  ูู ูููุฑ ุงูุญุณุงุจ ุงูุฃููู ููุนููุงุช ูุฒูุฏูุง ูู ุงูุชูุงุณู ุงูุฒููู ูุญุณุจ ุ ุจู ูููุฑ ูู ุฃูุถูุง ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุญุณุงุจ ูุฐู ุงูุนููุงุช ูู ุงูุชุธููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชููุงุก ูุณุงุญุฉ ุงูุดุงุดุฉ </h3><br>  ููุชุฑุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุฑุณูู</a> ุงุณุชุฎุฏุงู ูุฏู ุชูุฏูู ุฏูุฉ ููุฎูุถุฉ ูุญุณุงุจ ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ.  ุจุงููุณุจุฉ ูููุดุงูุฏ ุฐุงุช ุงูุนุฏูุฏ ูู ุงูููุงุนุฏ ุงูุณูุณ ูุงูุฌุฏุฑุงู ุงููุณุชูููุฉ ุ ูููู ุจุณูููุฉ ุชุญุฑูู ูุนูููุงุช ุงูุฅุถุงุกุฉ ุจูู ุงูููุงุท ุจุฏูุฉ ุฃูู.  ูู ุฃุตู ุงูุงุณุชููุงุก ุจุงูุชูุตูู ุญุชู ุชููู ูุฐู ุงูููุงูุฉ ุฃูุตุฑ ููููุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎุงุชูุฉ </h2><br>  ูููุง ููู ุงููุชุงุฆุฌ ูุนุฏุฏ ูุฎุชูู ูู ุงูุนููุงุช.  ูุฏู ุจุนุถ ุงูุชุนูููุงุช ุจุดุฃู ูุฐู ุงููุชุงุฆุฌ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุทููุงู ุ ูุธู FPS ุญูุงูู 700 ูุนุฏุฏ ูุฎุชูู ูู ุงูุนููุงุช ุนูุฏูุง ูุง ูุชู ุชูููุฐ ุญุณุงุจ <b>RSM</b> . </li><li style=";text-align:right;direction:rtl">  ุงูุงุณุชููุงุก ูุนุทู ุจุนุถ ุงููููุงุช ุงูุนุงูุฉ ูุบูุฑ ูููุฏ ููุบุงูุฉ ูุน ุนุฏุฏ ูููู ูู ุงูุนููุงุช. </li><li style=";text-align:right;direction:rtl">  ุญุชู ูุน 100 ุนููุฉ ุ ุชุจุฏู ุงูุตูุฑุฉ ุงูููุงุฆูุฉ ุฌูุฏุฉ.  ูุฏ ูููู ูุฐุง ุจุณุจุจ ุงูุงุณุชููุงุก ุ ุงูุฐู "ูุทูุณ" ุงูุฅุถุงุกุฉ ุบูุฑ ุงููุจุงุดุฑุฉ. </li></ul><br><table style=";text-align:right;direction:rtl"><tbody><tr><td>  ุนุฏุฏ ุงูุนููุงุช </td><td>  FPS ูู No RSM </td><td>  FPS ูู ุณุงุฐุฌ RSM </td><td>  FPS ูู RSM ูุญุฑู </td></tr><tr><td>  100 </td><td>  ~ 700 </td><td>  152 </td><td>  264 </td></tr><tr><td>  200 </td><td>  ~ 700 </td><td>  89 </td><td>  179 </td></tr><tr><td>  300 </td><td>  ~ 700 </td><td>  62 </td><td>  138 </td></tr><tr><td>  400 </td><td>  ~ 700 </td><td>  44 </td><td>  116 </td></tr></tbody></table></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar440570/">https://habr.com/ru/post/ar440570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar440560/index.html">ุงููุณูุฏุฑ Belokrylov ูุฏููุชุฑู Chuyko ุนู ููุจูุฑูุง JDK ุนูู jug.msk.ru</a></li>
<li><a href="../ar440562/index.html">Windows Phone - ูู ุดูุก ุ ุฅูู ูุฑุฉ ุฃุฎุฑู ุฃู ูุฑุฉ ุฃุฎุฑู</a></li>
<li><a href="../ar440564/index.html">ุงูุดุจูุฉ ุงูุนุตุจูุฉ GPT-2 ูู OpenAI. ุจุฏุงูุฉ ุณุฑูุนุฉ</a></li>
<li><a href="../ar440566/index.html">ุชุณุฑูุน ุฏูู ุนูุงุฆู ุฃู ุงูุชุนุฑู ุนูู SIMD</a></li>
<li><a href="../ar440568/index.html">ููุชุจ ุชุทุจูููุง ููุชุนูู ูู Go ู Javascript ูุชูููู ุนุงุฆุฏุงุช ุงูุฃุณูู ุงูุญููููุฉ. ุงูุฌุฒุก 2 - ุงุฎุชุจุงุฑ ุงูุฎูููุฉ</a></li>
<li><a href="../ar440574/index.html">ูุฃุณ AI ุงูุฑูุณู 2018 ุ ุชุงุฑูุฎ 9 ุฃูุงูู</a></li>
<li><a href="../ar440576/index.html">ุชุบููุฑุงุช ูููุฉ ุนูู CTE ูู PostgreSQL 12</a></li>
<li><a href="../ar440582/index.html">ูู ูุชู ุณุญุจ ุงูุณูุงุฑุงุช ุงูููุฑุจุงุฆูุฉ ุฅูู ุฃุณูู ุดุฑูุฉ ุงูุณูุงุฑุงุชุ</a></li>
<li><a href="../ar440584/index.html">ูุง ูู ุงูุฎุทุฃ ูู ุงูุชูุช ุจู</a></li>
<li><a href="../ar440586/index.html">ุฅุฌูุงุน ุฅูุณูููู: ููู ูุนููุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>