<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏻 👉🏽 ☄️ Das ewige Thema mit PHP und MySQL 👕 🤸🏿 👨🏾‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Sicherlich stieß jeder, der viel und ständig in PHP schreibt, auf das Problem, Abfragen an MySQL-Datenbanken zu optimieren und zu ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Das ewige Thema mit PHP und MySQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420697/">  <b>Hallo allerseits!</b>  Sicherlich stieß jeder, der viel und ständig in <b>PHP</b> schreibt, auf das Problem, Abfragen an <b>MySQL-Datenbanken zu</b> optimieren und zu vereinfachen.  Jemand hat bereits bequeme Klassen / Prozeduren für sich selbst geschrieben, jemand hat etwas auf den offenen Flächen des Netzwerks gefunden. <br><br>  Da meine Skripte in <b>PHP</b> immer mehr auf eine Aufgabe reduziert werden - das Abrufen aus einer Datenbank und das Übergeben dieser Daten an clientseitige Java-Skripte - habe ich es mir einfacher gemacht, indem ich eine bequeme (für mich natürlich) Datenbankklasse erstellt habe <b>MySQL</b> <br><br>  Ich werde <b>sofort</b> eine Reservierung vornehmen - die eingebaute <b>mqsli-</b> Klasse <b>ist</b> recht praktisch und funktional, aber angesichts der gleichen Fragen <b>jeden</b> Tag wäre es seltsam, Ihr Schicksal nicht ein bisschen zu erleichtern. <br><br>  Die <b>exDBase-</b> Klasse wird Ihrer Aufmerksamkeit angeboten, sie ist im Wesentlichen ein Wrapper für die <b>mysqli-</b> Klasse.  Reservieren Sie sofort - ich bin ein Programmierer für Anfänger und bin bereit, viel Kritik für den geschriebenen Code in Kommentaren oder persönlichen Nachrichten zu erhalten.  Ich besitze RegExp zum Beispiel nicht wirklich, was den Code stark vereinfachen würde, vielleicht gibt es andere Beschwerden.  Aber trotzdem ... <br><a name="habracut"></a><br>  Die gesamte Bibliothek ist in einer Datei enthalten - <b>exdbase.php</b> .  Diese Datei enthält die <b>Beschreibung</b> der <b>exDBase-</b> Klasse.  Um zu arbeiten, müssen Sie nur die Datei herunterladen und die folgende Zeile registrieren: <br><br><pre><code class="hljs lisp">require_once ('exdbase.php')<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  Erstellen Sie zunächst eine Instanz der Klasse. Dies ist sehr einfach: <br><br><pre> <code class="hljs php">$DB = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> exDBase (DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($DB-&gt;error) <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">" : $DB-&gt;error"</span></span>;</code> </pre> <br>  Die Eigenschaft <b>$ DB-&gt; error enthält</b> immer den Fehler der letzten Operation (falls ein Fehler aufgetreten ist), oder sie ist leer. <br><br>  Das Format ist fast identisch mit der Instanziierung der <b>mysqli-</b> Klasse.  Anstelle der im Beispiel angegebenen Konstanten müssen Sie natürlich die tatsächlichen Werte für Host, Benutzername, Kennwort und Datenbanknamen ersetzen. <br><br>  Jetzt kannst du üben.  Angenommen, wir haben eine vorgefertigte Datenbank und eine <b>Client-</b> Tabelle mit Feldern: <br><br>  <b>ID</b> - eindeutige Nummer, automatische Inkrementierung <br>  <b>NAME</b> - Kundenname <br>  <b>ALTER</b> - Kundenalter <br>  <b>BETRAG</b> - Anzahl der Einkäufe <br>  <b>BLOCKED</b> - Boolescher <b>Wert</b> , Client gesperrt oder aktiv <br>  <b>EINSTELLUNGEN</b> - persönliche Parameter, die wir im JSON-Format speichern <br><br><h3>  Datenbank abfragen </h3><br>  Lassen Sie uns alle Einträge aus der Tabelle ' <b>clients</b> ' abrufen.  <b>Hierfür</b> gibt es eine <b>fetchArray-</b> Methode. <br><br><pre> <code class="hljs ruby">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>         <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($res) foreach ($res as $client) echo print_r ($client, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     </code> </pre> <br>  Und wenn wir nur die erste Aufzeichnung der Anfrage erhalten wollen?  <b>Hierfür</b> gibt es eine <b>fetchFirst-</b> Methode. <br><br><pre> <code class="hljs ruby">$res = $DB-&gt;fetchFirst (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($res) echo print_r ($client, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     </code> </pre> <br>  Wir müssen jedoch kaum alle Datensätze aus der Tabelle abrufen, es gibt immer Auswahlbedingungen (das WHERE-Feld im SELECT-Befehl).  Was machen wir  Ja, sehr einfach.  Dies ist das zweite Argument für die Methoden fetchArray oder fetchFirst. <br><br>  Angenommen, wir möchten alle Kunden mit dem Namen John auswählen.  In unserer Klasse kann dies auf zwei Arten geschehen. <br><br>  Die erste besteht darin, die Bedingung einfach mit einer Zeichenfolge der Form "NAME = 'John'" festzulegen. <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-string"><span class="hljs-string">"NAME = 'John'"</span></span>);</code> </pre> <br>  Die zweite besteht darin, die Bedingung in einem Array festzulegen: <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"John"</span></span>));</code> </pre> <br>  Und wenn es mehr Bedingungen gibt?  Sollte zum Beispiel das Alter 30 sein?  Einfach: <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> = <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">30</span></span>));</code> </pre> <br>  Auf diese Weise können Sie mehrere Suchbegriffe kombinieren.  Aber Gleichheit ... Und wenn wir alle Kunden mit dem Namen John finden wollen, die über 25 Jahre alt sind?  Hier kommen spezielle Präfixe zur Rettung: <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> = <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"&gt;=AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">25</span></span>));</code> </pre> <br>  Zusätzlich zu "&gt; =" können Sie Folgendes verwenden: "&gt;", "&lt;", "&lt;=", "! =", "&lt;&gt;", "! =".  So können Sie Abfragen unterschiedlicher Komplexität erstellen und immer die richtigen Antworten erhalten. <br><br>  Der dritte Parameter der Datenbankabrufmethoden sind die Tabellenfelder.  Sie können entweder als Zeichenfolge (zum Beispiel: "NAME, AGE") oder als Array: Array ("NAME", "AGE") angegeben werden. <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> = <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"&gt;=AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">25</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span>, <span class="hljs-string"><span class="hljs-string">"AGE"</span></span>));</code> </pre> <br>  Der vierte und letzte Parameter der Abrufmethoden fetchArray und fetchFirst ist die Sortierreihenfolge.  Es wird auch entweder durch eine Zeichenfolge (Typ: "ID ASC, NAME DESC") oder ein Array-Array ("ID" =&gt; "ASC", "NAME" =&gt; "DESC") angegeben. <br><br><pre> <code class="hljs php">$res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> = <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"&gt;=AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">25</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span>, <span class="hljs-string"><span class="hljs-string">"AGE"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"ID"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"ASC"</span></span>, <span class="hljs-string"><span class="hljs-string">"NAME"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"DESC"</span></span>));</code> </pre> <br>  Nun, mit den Daten enden, die Sie fragen - und wie Sie die Auswahl einschränken können?  Zum Beispiel werden nur die ersten 10 Einträge benötigt? <br><br>  Dies geschieht mit der setLimit () -Methode wie folgt: <br><br><pre> <code class="hljs php">$DB-&gt;setLimit (<span class="hljs-number"><span class="hljs-number">10</span></span>); $res = $DB-&gt;fetchArray (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-string"><span class="hljs-string">"NAME = 'John'"</span></span>);</code> </pre> <br>  Die setLimit () -Methode arbeitet nur mit einer Anforderung, wonach die Grenzwerte zurückgesetzt werden. <br><br><h3>  Neue Daten einfügen </h3><br>  Es gibt eine <b>insert ()</b> -Methode zum Schreiben neuer Daten. <br><br><pre> <code class="hljs php">$id = $DB-&gt;insert (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Peter'</span></span>, <span class="hljs-string"><span class="hljs-string">"AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">27</span></span>, <span class="hljs-string"><span class="hljs-string">"AMOUNT"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1000.25</span></span>));</code> </pre> <br>  Es gibt den Wert des primären Auto-Inkrement-Schlüssels zurück (falls einer in der Tabelle angegeben ist).  In unserem Fall wird die ID des eingefügten Datensatzes zurückgegeben. <br><br><h3>  Datenaktualisierung </h3><br>  Die Daten werden mit der <b>update ()</b> -Methode aktualisiert. <br><br><pre> <code class="hljs php">$DB-&gt;update (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Peter'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-string"><span class="hljs-string">"AGE"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-string"><span class="hljs-string">"AMOUNT"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2000.25</span></span>));</code> </pre> <br>  Wir haben alle Datensätze aktualisiert, bei denen der Name (Feld NAME) "Peter" lautet.  Das zweite Argument für die Methode ist die Auswahlbedingung im exakt gleichen Format wie WHERE for SELECT.  Nun, das dritte Argument für die Methode sind die Daten selbst.  Jetzt werden alle derartigen Aufzeichnungen mit dem Namen "Peter" 30 Jahre alt und die Summe wird 2000,25 sein. <br><br><h3>  <b>Daten löschen</b> </h3><br>  Wenn Sie die Logik der Bibliothek bereits verstanden haben, ist das Entfernen sehr einfach.  Die Methode heißt <b>delete ()</b> . <br><br><pre> <code class="hljs perl">$DB-&gt;<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, array (<span class="hljs-string"><span class="hljs-string">"NAME"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Peter'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      <span class="hljs-string"><span class="hljs-string">'Peter'</span></span> $DB-&gt;<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> (<span class="hljs-string"><span class="hljs-string">'clients'</span></span>, array (<span class="hljs-string"><span class="hljs-string">"&gt;AGE"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       <span class="hljs-number"><span class="hljs-number">20</span></span>.</code> </pre> <br>  Hier ist so ein erster kurzer Ausflug in die exDBase-Bibliothek.  Es gibt eine Reihe anderer, erweiterter Funktionen, aber ein anderes Mal mehr dazu. <br><br>  UPD: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie können die Datei auf GitHub herunterladen</a> <br><br>  Guter Code an alle! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420697/">https://habr.com/ru/post/de420697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420687/index.html">Verwenden von VS-Code zum Aufrufen der REST-API in Azure IoT Hub [+ nützliche Materialien]</a></li>
<li><a href="../de420689/index.html">Game Designer von Grund auf neu: Wie man Spiele ohne Erfahrung macht</a></li>
<li><a href="../de420691/index.html">Kivy. Xamarin Native reagieren. Drei Frameworks - ein Experiment</a></li>
<li><a href="../de420693/index.html">Der Java-Entwicklungskurs von Mail.Ru Group auf dem Technostream-Kanal</a></li>
<li><a href="../de420695/index.html">Ray: Ein verteiltes System zur Verwendung von KI</a></li>
<li><a href="../de420701/index.html">HSBI lädt am 29. August zu einem Vortragsabend zum Thema Spieledesign ein</a></li>
<li><a href="../de420703/index.html">Inhaltsangabe des Buches „Verhandlungen ohne Niederlage. Harvard-Methode</a></li>
<li><a href="../de420705/index.html">8 tiefe Ideen von Tim Ferris 'Stamm der Mentoren</a></li>
<li><a href="../de420707/index.html">Der JITX-Start verwendet AI, um die Entwicklung komplexer Leiterplatten zu automatisieren</a></li>
<li><a href="../de420709/index.html">T2F: Ein Projekt zur Umwandlung von Text in Gesichtszeichnung mit tiefem Lernen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>