<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âš«ï¸ ğŸ¤ğŸ» ğŸ™ Go Lintpackï¼šå¯ç»„åˆçš„lintç®¡ç†å™¨ ğŸ™ğŸ» ğŸ‘©ğŸ½â€ğŸ”§ ğŸ‘¨ğŸ»â€ğŸ«</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="lintpackæ˜¯ç”¨äºæ„å»ºlinter ï¼ˆé™æ€åˆ†æå™¨ï¼‰çš„å®ç”¨ç¨‹åºï¼Œä½¿ç”¨æä¾›çš„APIç¼–å†™è¿™äº›å®ç”¨ç¨‹åºã€‚ åŸºäºæ­¤ï¼Œä¸€äº›äººç†Ÿæ‚‰çš„go-criticé™æ€åˆ†æå™¨ç°åœ¨æ­£åœ¨è¢«é‡å†™ã€‚ 


ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä»ç”¨æˆ·çš„è§’åº¦æ›´è¯¦ç»†åœ°lintpackä»€ä¹ˆæ˜¯lintpack ã€‚ 
 ä¸€å¼€å§‹æ˜¯æ‰¹è¯„å®¶... 


 go-criti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Go Lintpackï¼šå¯ç»„åˆçš„lintç®¡ç†å™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430196/"><p><img src="https://habrastorage.org/webt/65/mx/ms/65mxmsgairo1a_s7civi_cgklqq.png"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">lintpack</a>æ˜¯ç”¨äºæ„å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">linter</a> ï¼ˆé™æ€åˆ†æå™¨ï¼‰çš„å®ç”¨ç¨‹åºï¼Œä½¿ç”¨æä¾›çš„APIç¼–å†™è¿™äº›å®ç”¨ç¨‹åºã€‚ åŸºäºæ­¤ï¼Œä¸€äº›äººç†Ÿæ‚‰çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">go-critic</a>é™æ€åˆ†æå™¨ç°åœ¨æ­£åœ¨è¢«é‡å†™ã€‚ </p><br><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä»ç”¨æˆ·çš„è§’åº¦æ›´è¯¦ç»†åœ°<code>lintpack</code>ä»€ä¹ˆæ˜¯<code>lintpack</code> ã€‚ </p><a name="habracut"></a><br><h1 id="v-nachale-byl-go-critic"> ä¸€å¼€å§‹æ˜¯æ‰¹è¯„å®¶... </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">go-critic</a>ä»ä¸€ä¸ªè¯•ç‚¹é¡¹ç›®å¼€å§‹ï¼Œå½“æ—¶æ˜¯ä¸€ä¸ªæ²™ç›’ï¼Œç”¨äºä¸ºGoå‡ ä¹æ‰€æœ‰é™æ€åˆ†ææ„æƒ³åˆ¶ä½œåŸå‹ã€‚ </p><br><p> ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œæœ‰äººåœ¨ä»£ç ä¸­å‘é€äº†å„ç§é—®é¢˜æ£€æµ‹å™¨çš„å®ç°ã€‚ åœ¨æŠ€â€‹â€‹æœ¯å€ºåŠ¡å¼€å§‹ç§¯ç´¯ä¹‹å‰ï¼Œä¸€åˆ‡éƒ½å¤„äºæ§åˆ¶ä¹‹ä¸‹ï¼Œå®é™…ä¸Šæ²¡æœ‰äººå¯ä»¥æ¶ˆé™¤ã€‚ äººä»¬è¿›æ¥ï¼Œæ·»åŠ äº†éªŒè¯ï¼Œç„¶åæ¶ˆå¤±äº†ã€‚ è°æ¥çº æ­£é”™è¯¯å¹¶ä¿®æ”¹å®ç°ï¼Ÿ </p><br><p> ä¸€ä¸ªé‡å¤§äº‹ä»¶æ˜¯æè®®æ·»åŠ éœ€è¦å…¶ä»–é…ç½®çš„æ£€æŸ¥ï¼Œå³é‚£äº›ä¾èµ–äºé¡¹ç›®æœ¬åœ°å®‰æ’çš„æ£€æŸ¥ã€‚ ä¸€ä¸ªç¤ºä¾‹æ˜¯ä½¿ç”¨ç‰¹æ®Šæ¨¡æ¿æ­ç¤ºæ–‡ä»¶ä¸­ç‰ˆæƒæ ‡å¤´ï¼ˆè®¸å¯è¯æ ‡å¤´ï¼‰çš„å­˜åœ¨ï¼Œæˆ–è€…é€šè¿‡ç»™å®šæ›¿ä»£æ–¹æ¡ˆçš„å»ºè®®ç¦æ­¢å¯¼å…¥æŸäº›è½¯ä»¶åŒ…ã€‚ </p><br><p> å¦ä¸€ä¸ªå›°éš¾æ˜¯å¯æ‰©å±•æ€§ã€‚ ä¸æ˜¯æ¯ä¸ªäººéƒ½æ„¿æ„å°†å…¶ä»£ç å‘é€åˆ°å…¶ä»–äººçš„å­˜å‚¨åº“ã€‚ æœ‰äº›äººæƒ³åŠ¨æ€åœ°è¿æ¥ä»–ä»¬çš„æ”¯ç¥¨ï¼Œä»¥ä½¿ä»–ä»¬ä¸éœ€è¦ä¿®æ”¹<code>go-critic</code>æºä»£ç ã€‚ </p><br><p> æ€»ç»“ä¸€ä¸‹ï¼Œè¿™æ˜¯é˜»ç¢<code>go-critic</code>å‘å±•çš„é—®é¢˜ï¼š </p><br><ul><li> å¤§é‡çš„å¤æ‚æ€§ã€‚ æ”¯æŒè¿‡å¤šï¼Œæ— æ‰€æœ‰è€…ä»£ç çš„å­˜åœ¨ã€‚ </li><li> å¹³å‡è´¨é‡ä½ã€‚  <code>experimental</code>æ„æ€æ˜¯â€œå‡ ä¹éšæ—¶å¯ä»¥ä½¿ç”¨â€å’Œâ€œå®Œå…¨ä¸è¿è¡Œâ€ã€‚ </li><li> æœ‰æ—¶å€™ï¼Œå¾ˆéš¾å†³å®šæ˜¯å¦åœ¨<code>go-critic</code>åŒ…å«éªŒè¯<code>go-critic</code> ï¼Œè€Œæ‹’ç»éªŒè¯åˆ™ä¸åŸå§‹è®¾è®¡ç†å¿µèƒŒé“è€Œé©°ã€‚ </li><li> ä¸åŒçš„äºº<code>go-critic</code>çœ‹æ³•ä¸åŒã€‚ å¤§å¤šæ•°äººå¸Œæœ›å°†å®ƒä½œä¸º<code>gometalinter</code>éšé™„çš„CI <code>gometalinter</code> ã€‚ </li></ul><br><p> ä¸ºäº†ä»¥æŸç§æ–¹å¼é™åˆ¶é¡¹ç›®çš„å·®å¼‚å’Œä¸ä¸€è‡´çš„è§£é‡Šï¼Œæ’°å†™äº†ä¸€ä»½<a href="" rel="nofollow">å®£è¨€</a> ã€‚ </p><br><blockquote> å¦‚æœæ‚¨éœ€è¦æ›´å¤šçš„å†å²èƒŒæ™¯ä¿¡æ¯ï¼Œç”šè‡³éœ€è¦æ›´å¤šæœ‰å…³é™æ€åˆ†æå™¨åˆ†ç±»çš„æ€è€ƒï¼Œå¯ä»¥æ”¶å¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">GoCritic</a>å½•éŸ³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ï¼Œè¿™æ˜¯Goçš„æ–°é™æ€åˆ†æå™¨</a> ã€‚ é‚£æ—¶ï¼Œlintpackè¿˜ä¸å­˜åœ¨ï¼Œä½†æ˜¯å…¶ä¸­ä¸€äº›æƒ³æ³•æ˜¯åœ¨æŠ¥å‘Šå‘å¸ƒçš„é‚£å¤©è¯ç”Ÿçš„ã€‚ </blockquote><p> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸éœ€è¦å°†æ‰€æœ‰æ”¯ç¥¨å­˜å‚¨åœ¨ä¸€ä¸ªå­˜å‚¨åº“ä¸­æ€ä¹ˆåŠï¼Ÿ </p><br><h1 id="vstrechayte---lintpackhttpsgithubcomgo-lintpacklintpack"> è§é¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">-Lintpack</a> </h1><br><p><img title="é¡¹ç›®å¾½æ ‡çš„åˆå§‹ç‰ˆæœ¬" src="https://habrastorage.org/webt/_h/s3/wr/_hs3wriufjyktqsybtqsnkhka6m.png"><br></p><br><p>  <code>go-critic</code>åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š </p><br><ol><li> è‡ªå·±æ‰§è¡Œæ£€æŸ¥ã€‚ </li><li> ä¸€ä¸ªç¨‹åºï¼Œè¯¥ç¨‹åºä¸‹è½½GoéªŒè¯åŒ…å¹¶åœ¨å…¶ä¸Šè¿è¡ŒéªŒè¯ã€‚ </li></ol><br><p> æˆ‘ä»¬çš„ç›®æ ‡ï¼šèƒ½å¤Ÿå°†çŸ­ç»’çš„æ”¯ç¥¨å­˜å‚¨åœ¨ä¸åŒçš„å­˜å‚¨åº“ä¸­ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†å®ƒä»¬æ”¶é›†åœ¨ä¸€èµ·ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">lintpack</a>å°±æ˜¯è¿™æ ·åšçš„ã€‚ å®ƒå®šä¹‰äº†ä¸€äº›åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½¿æ‚¨å¯ä»¥æè¿°æ”¯ç¥¨ï¼Œä»è€Œå¯ä»¥åœ¨ç”Ÿæˆçš„çŸ­ç»’æ£‰çº¸ä¸Šè¿è¡Œæ”¯ç¥¨ã€‚ </p><br><blockquote> ä½¿ç”¨<code>lintpack</code>ä½œä¸ºæ¡†æ¶å®ç°çš„è½¯ä»¶åŒ…å°†ç§°ä¸º<code>lintpack</code>å…¼å®¹æˆ–<code>lintpack</code>å…¼å®¹çš„è½¯ä»¶åŒ…ã€‚ </blockquote><p> å¦‚æœ<code>go-critic</code>æ˜¯åŸºäº<code>lintpack</code>å®æ–½çš„ï¼Œåˆ™æ‰€æœ‰æ£€æŸ¥éƒ½å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå­˜å‚¨åº“ã€‚ åˆ†ç¦»çš„é€‰é¡¹ä¹‹ä¸€å¯èƒ½æ˜¯ï¼š </p><br><ol><li> æ‰€æœ‰ç¨³å®šå’Œå—æ”¯æŒçš„æ”¯ç¥¨éƒ½å°†è·å¾—çš„ä¸»è¦é›†åˆã€‚ </li><li> ä»£ç æ‰€åœ¨çš„contribå­˜å‚¨åº“è¿‡äºè¯•éªŒæˆ–ç¼ºå°‘ç»´æŠ¤è€…ã€‚ </li><li> å¯å®šåˆ¶æ£€æŸ¥ç‰¹å®šé¡¹ç›®ã€‚ </li></ol><br><p> ç¬¬ä¸€ç‚¹å¯¹äº<a href="" rel="nofollow">å°†go-criticé›†æˆåˆ°golangci-lint</a>ä¸­ç‰¹åˆ«é‡è¦ã€‚ </p><br><p> å¦‚æœæ‚¨ä¸€ç›´å¤„äº<code>go-critic</code>çº§åˆ«ï¼Œé‚£ä¹ˆå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚  <code>lintpack</code>åˆ›å»ºå‡ ä¹ç›¸åŒçš„<code>golangci-lint</code> ï¼Œè€Œ<code>golangci-lint</code>å°è£…äº†æ‰€æœ‰ä¸åŒçš„å®ç°ç»†èŠ‚ã€‚ </p><br><p> ä½†æ˜¯æƒ…å†µå‘ç”Ÿäº†å˜åŒ–ã€‚ å¦‚æœåœ¨<code>lintpack</code>çš„åŸºç¡€ä¸Šåˆ›å»ºäº†æ–°çš„<code>lintpack</code> ï¼Œåˆ™å°†æœ‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç°æˆè¯Šæ–­ç¨‹åºæ¥ç”Ÿæˆlinterã€‚ æš‚æ—¶æƒ³è±¡ä¸€ä¸‹ï¼Œä¸–ç•Œä¸Šæœ‰åâ€‹â€‹å¤šç§ä¸åŒçš„æ”¯ç¥¨ã€‚ </p><br><h1 id="quick-start"> å¿«é€Ÿä¸Šæ‰‹ </h1><br><p><img src="https://habrastorage.org/webt/jk/kn/2f/jkkn2fql7m45ueypxb7dytrvol8.jpeg"></p><br><p> é¦–å…ˆï¼Œæ‚¨éœ€è¦å®‰è£…<code>lintpack</code>æœ¬èº«ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># lintpack    `$(go env GOPATH)/bin`. go get -v github.com/go-lintpack/lintpack/...</span></span></code> </pre> <br><p> ä½¿ç”¨<code>lintpack</code>çš„æµ‹è¯•åŒ…åˆ›å»ºä¸€ä¸ª<code>lintpack</code> ï¼š </p><br><pre> <code class="bash hljs">lintpack build -o mylinter github.com/go-lintpack/lintpack/checkers</code> </pre> <br><p> è¯¥é›†åˆåŒ…æ‹¬<code>panicNil</code> ï¼Œå®ƒåœ¨ä»£ç ä¸­æ‰¾åˆ°<code>panic(nil)</code>å¹¶è¦æ±‚å°†å…¶æ›¿æ¢ä¸ºå¯åŒºåˆ†çš„å†…å®¹ï¼Œå¦åˆ™ï¼Œ <code>recover()</code>å°†æ— æ³•åˆ¤æ–­æ˜¯å¦ä½¿ç”¨<code>nil</code>å‚æ•°è°ƒç”¨äº†<code>panic</code> ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰ææ…Œã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ææ…Œï¼ˆæ— ï¼‰ç¤ºä¾‹</b> <div class="spoiler_text"><hr><br><p> ä¸‹é¢çš„ä»£ç å°è¯•æè¿°ä»<code>recover()</code>è·å¾—çš„å€¼ï¼š </p><br><pre> <code class="go hljs">r := <span class="hljs-built_in"><span class="hljs-built_in">recover</span></span>() fmt.Printf(<span class="hljs-string"><span class="hljs-string">"%T, %v\n"</span></span>, r, r)</code> </pre> <br><p> å¯¹äº<code>panic(nil)</code>å’Œä¸å‘ç”Ÿ<code>panic(nil)</code>çš„ç¨‹åºï¼Œç»“æœå°†ç›¸åŒã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ‰€æè¿°è¡Œä¸ºçš„è¿è¡Œç¤ºä¾‹</a> ã€‚ </p><br><hr></div></div><br><p> æ‚¨å¯ä»¥åœ¨å‚æ•°ä¸ºã€‚/ <code>./...</code>æˆ–ç¨‹åºåŒ…ï¼ˆæŒ‰å…¶å¯¼å…¥è·¯å¾„ï¼‰çš„å•ç‹¬æ–‡ä»¶ä¸Šå¯åŠ¨linterã€‚ </p><br><pre> <code class="bash hljs">./mylinter check bytes <span class="hljs-variable"><span class="hljs-variable">$GOROOT</span></span>/src/bytes/buffer_test.go:276:3: panicNil: panic(nil) calls are discouraged</code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,  go-lintpack    $GOPATH. mylinter=$(pwd)/mylinter cd $(go env GOPATH)/src/github.com/go-lintpack/lintpack/checkers/testdata $mylinter check ./panicNil/ ./panicNil/positive_tests.go:5:3: panicNil: panic(nil) calls are discouraged ./panicNil/positive_tests.go:9:3: panicNil: panic(interface{}(nil)) calls are discouraged</span></span></code> </pre> <br><p> é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ£€æŸ¥è¿˜ä¼šå“åº”<code>panic(interface{}(nil))</code> ã€‚ è¦è¦†ç›–æ­¤è¡Œä¸ºï¼Œè¯·å°†<code>skipNilEfaceLit</code>è®¾ç½®ä¸º<code>true</code> ã€‚ æ‚¨å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œæ­¤æ“ä½œï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$mylinter</span></span> check -@panicNil.skipNilEfaceLit=<span class="hljs-literal"><span class="hljs-literal">true</span></span> ./panicNil/ ./panicNil/positive_tests.go:5:3: panicNil: panic(nil) calls are discouraged</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">cmd / lintpackå’Œç”Ÿæˆçš„linterçš„ç”¨æ³•</b> <div class="spoiler_text"><hr><br><p>  <code>lintpack</code>å’Œç”Ÿæˆçš„<code>lintpack</code>éƒ½ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°æ¥é€‰æ‹©å­å‘½ä»¤ã€‚ å¯ä»¥é€šè¿‡è°ƒç”¨ä¸å¸¦å‚æ•°çš„å®ç”¨ç¨‹åºæ¥è·å¾—å¯ç”¨å­å‘½ä»¤çš„åˆ—è¡¨åŠå…¶å¯åŠ¨ç¤ºä¾‹ã€‚ </p><br><pre> <code class="bash hljs">lintpack not enough arguments, expected sub-command name Supported sub-commands: build - build linter from made of lintpack-compatible packages $ lintpack build -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> $ lintpack build -o gocritic github.com/go-critic/checkers $ lintpack build -linter.version=v1.0.0 . version - <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> lintpack version $ lintpack version</code> </pre> <br><p> å‡è®¾æˆ‘ä»¬ç”¨<code>gocritic</code>çš„åå­—å‘½åäº†åˆ›å»ºçš„<code>gocritic</code> ï¼š </p><br><pre> <code class="bash hljs">./gocritic not enough arguments, expected sub-command name Supported sub-commands: check - run linter over specified targets $ linter check -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> $ linter check -disableTags=none strings bytes $ linter check -enableTags=diagnostic ./... version - <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> linter version $ linter version doc - get installed checkers documentation $ linter doc -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> $ linter doc $ linter doc checkerName</code> </pre> <br><p>  <code>-help</code>æ ‡å¿—å¯ç”¨äºæŸäº›å­å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æä¾›äº†é™„åŠ ä¿¡æ¯ï¼ˆæˆ‘å°†æŸäº›è¡Œå‰ªå¾—å¤ªå®½äº†ï¼‰ï¼š </p><br><pre> <code class="bash hljs">./gocritic check -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-comment"><span class="hljs-comment">#     .</span></span></code> </pre> <br><hr></div></div><br><h1 id="dokumentaciya-ustanovlennyh-proverok"> å·²å®‰è£…æ”¯ç¥¨çš„æ–‡ä»¶ </h1><br><p> é—®é¢˜â€œå¦‚ä½•æ‰¾åˆ°å…³äºskipNilEfaceLitå‚æ•°çš„ç­”æ¡ˆâ€ï¼Ÿ  -é˜…è¯»ç²¾ç¾çš„æ‰‹å†Œï¼ˆRTFMï¼‰ï¼ </p><br><p> æœ‰å…³å·²å®‰è£…æ”¯ç¥¨çš„æ‰€æœ‰æ–‡æ¡£éƒ½åœ¨<code>mylinter</code> ã€‚ è¯¥æ–‡æ¡£å¯é€šè¿‡<code>doc</code>å­å‘½ä»¤è·å¾—ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#     : $mylinter doc panicNil [diagnostic] #      : $mylinter doc panicNil panicNil checker documentation URL: github.com/go-lintpack/lintpack Tags: [diagnostic] Detects panic(nil) calls. Such panic calls are hard to handle during recover. Non-compliant code: panic(nil) Compliant code: panic("something meaningful") Checker parameters: -@panicNil.skipNilEfaceLit bool whether to ignore interface{}(nil) arguments (default false)</span></span></code> </pre> <br><p> ç±»ä¼¼äº<code>go list -f</code>å¯¹æ¨¡æ¿çš„æ”¯æŒï¼Œæ‚¨å¯ä»¥ä¼ å…¥ä¸€ä¸ªè´Ÿè´£æ–‡æ¡£è¾“å‡ºæ ¼å¼çš„æ¨¡æ¿è¡Œï¼Œè¿™åœ¨ç¼–å†™markdownæ–‡æ¡£æ—¶å¾ˆæœ‰ç”¨ã€‚ </p><br><h1 id="gde-iskat-proverki-dlya-ustanovki"> åœ¨å“ªé‡Œå¯»æ‰¾å®‰è£…æ£€æŸ¥ï¼Ÿ </h1><br><p> ä¸ºäº†ç®€åŒ–å¯¹æœ‰ç”¨<code>lintpack</code>å¥—ä»¶çš„æœç´¢ï¼Œè¿™é‡Œæä¾›äº†ä¸<code>lintpack</code>å…¼å®¹çš„è½¯ä»¶åŒ…çš„é›†ä¸­åˆ—è¡¨ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https</a> : <code>lintpack</code> ã€‚ </p><br><p> ä»¥ä¸‹æ˜¯ä¸€äº›åˆ—è¡¨ï¼š </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://github.com/go-critic/go-critic/checkers</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://github.com/go-critic/checkers-contrib</a> </li></ul><br><p> è¯¥åˆ—è¡¨ä¼šå®šæœŸæ›´æ–°ï¼Œå¹¶ä¸”å¯ä»¥æ¥å—æ·»åŠ è¯·æ±‚ã€‚ è¿™äº›è½¯ä»¶åŒ…ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½å¯ç”¨äºåˆ›å»ºçŸ­ç»’ã€‚ </p><br><p> ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªlinterï¼Œå…¶ä¸­åŒ…å«ä¸Šé¢åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ£€æŸ¥ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,      #   Go . go get -v github.com/go-critic/go-critic/checkers go get -v github.com/go-critic/checkers-contrib # build   . lintpack build \ github.com/go-critic/go-critic/checkers \ github.com/go-critic/checkers-contrib</span></span></code> </pre> <br><p>  <code>lintpack build</code>åŒ…æ‹¬ç¼–è¯‘é˜¶æ®µçš„æ‰€æœ‰æ£€æŸ¥ï¼Œå¯ä»¥å°†ç”Ÿæˆçš„linteræ”¾ç½®åœ¨æ²¡æœ‰å¯ç”¨äºå®ç°å·²å®‰è£…è¯Šæ–­çš„æºä»£ç çš„ç¯å¢ƒä¸­ï¼Œæ‰€æœ‰æƒ…å†µä¸é™æ€é“¾æ¥ä¸€æ ·ã€‚ </p><br><h1 id="dinamicheskoe-podklyuchenie-paketov"> åŠ¨æ€åŒ…è£…é™„ä»¶ </h1><br><p> é™¤äº†é™æ€ç¨‹åºé›†ï¼Œè¿˜å¯ä»¥åŠ è½½æä¾›å…¶ä»–æ£€æŸ¥çš„æ’ä»¶ã€‚ </p><br><p> ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œæ£€æŸ¥å™¨å®ç°ä¸çŸ¥é“å®ƒå°†ç”¨äºé™æ€ç¼–è¯‘è¿˜æ˜¯ä½œä¸ºæ’ä»¶åŠ è½½ã€‚ æ— éœ€æ›´æ”¹ä»£ç ã€‚ </p><br><p> å‡è®¾æˆ‘ä»¬æƒ³å°†<code>panicNil</code>æ·»åŠ åˆ°<code>panicNil</code>ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä»ç¬¬ä¸€æ¬¡ç¼–è¯‘æœŸé—´ä½¿ç”¨çš„æ‰€æœ‰æºä¸­é‡å»ºå®ƒã€‚ </p><br><ol><li> åˆ›å»º<code>linterPlugin.go</code> ï¼š </li></ol><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-comment"><span class="hljs-comment">//         , //    import'. import ( _ "github.com/go-lintpack/lintpack/checkers" )</span></span></code> </pre> <br><ol><li> å»ºç«‹ä¸€ä¸ªåŠ¨æ€åº“ï¼š </li></ol><br><pre> <code class="bash hljs">go build -buildmode=plugin -o linterPlugin.so linterPlugin.go</code> </pre> <br><ol><li> ä½¿ç”¨<code>-pluginPath</code>å‚æ•°è¿è¡Œ<code>-pluginPath</code> ï¼š </li></ol><br><pre> <code class="bash hljs">./linter check -pluginPath=linterPlugin.so bytes</code> </pre> <br><blockquote>  <strong>è­¦å‘Šï¼š</strong>å¯¹åŠ¨æ€æ¨¡å—çš„æ”¯æŒæ˜¯é€šè¿‡åœ¨Windowsä¸Šä¸èµ·ä½œç”¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ’ä»¶</a>åŒ…å®ç°çš„ã€‚ </blockquote><p>  <code>-verbose</code>æ ‡å¿—å¯ä»¥å¸®åŠ©æ‚¨ç¡®å®šæ‰“å¼€æˆ–å…³é—­äº†å“ªä¸ªæ£€æŸ¥ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå®ƒå°†æ˜¾ç¤ºå“ªä¸ªè¿‡æ»¤å™¨ç¦ç”¨äº†è¯¥æ£€æŸ¥ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">-verboseçš„ç¤ºä¾‹</b> <div class="spoiler_text"><hr><br><p> è¯·æ³¨æ„ï¼Œ <code>panicNil</code>æ˜¾ç¤ºåœ¨åŒ…æ‹¬çš„æ£€æŸ¥åˆ—è¡¨ä¸­ã€‚ å¦‚æœåˆ é™¤-pluginPathå‚æ•°ï¼Œå®ƒå°†ä¸å†æ˜¯æ­£ç¡®çš„ã€‚ </p><br><pre> <code class="bash hljs">./linter check -verbose -pluginPath=./linterPlugin.so bytes debug: appendCombine: disabled by tags (-disableTags) debug: boolExprSimplify: disabled by tags (-disableTags) debug: builtinShadow: disabled by tags (-disableTags) debug: commentedOutCode: disabled by tags (-disableTags) debug: deprecatedComment: disabled by tags (-disableTags) debug: docStub: disabled by tags (-disableTags) debug: emptyFallthrough: disabled by tags (-disableTags) debug: hugeParam: disabled by tags (-disableTags) debug: importShadow: disabled by tags (-disableTags) debug: indexAlloc: disabled by tags (-disableTags) debug: methodExprCall: disabled by tags (-disableTags) debug: nilValReturn: disabled by tags (-disableTags) debug: paramTypeCombine: disabled by tags (-disableTags) debug: rangeExprCopy: disabled by tags (-disableTags) debug: rangeValCopy: disabled by tags (-disableTags) debug: sloppyReassign: disabled by tags (-disableTags) debug: typeUnparen: disabled by tags (-disableTags) debug: unlabelStmt: disabled by tags (-disableTags) debug: wrapperFunc: disabled by tags (-disableTags) debug: appendAssign is enabled debug: assignOp is enabled debug: captLocal is enabled debug: caseOrder is enabled debug: defaultCaseOrder is enabled debug: dupArg is enabled debug: dupBranchBody is enabled debug: dupCase is enabled debug: dupSubExpr is enabled debug: elseif is enabled debug: flagDeref is enabled debug: ifElseChain is enabled debug: panicNil is enabled debug: regexpMust is enabled debug: singleCaseSwitch is enabled debug: sloppyLen is enabled debug: switchTrue is enabled debug: typeSwitchVar is enabled debug: underef is enabled debug: unlambda is enabled debug: unslice is enabled <span class="hljs-comment"><span class="hljs-comment"># ...   .</span></span></code> </pre> <br><hr></div></div><br><h1 id="sravnenie-s-gometalinterhttpsgithubcomalecthomasgometalinter-i-golangci-linthttpsgithubcomgolangcigolangci-lint"> ä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">gometalinter</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">golangci-lintçš„æ¯”è¾ƒ</a> </h1><br><p> ä¸ºäº†é¿å…æ··æ·†ï¼Œå€¼å¾—æè¿°é¡¹ç›®ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">gometalinter</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">golangci-lint</a>ä¸»è¦é›†æˆäº†å…¶ä»–çš„ï¼Œé€šå¸¸å®ç°æ–¹å¼éå¸¸ä¸åŒçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">linter</a> ï¼Œå®ƒä»¬æä¾›äº†ä¾¿æ·çš„è®¿é—®é€”å¾„ã€‚ ä»–ä»¬é’ˆå¯¹ä½¿ç”¨é™æ€åˆ†æä»ªçš„æœ€ç»ˆç”¨æˆ·ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">lintpack</a>ç®€åŒ–äº†æ–°lintersçš„åˆ›å»ºï¼Œæä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œè¯¥æ¡†æ¶ä½¿åœ¨å…¶åŸºç¡€ä¸Šå®ç°çš„ä¸åŒç¨‹åºåŒ…åœ¨åŒä¸€å¯æ‰§è¡Œæ–‡ä»¶ä¸­å…¼å®¹ã€‚ ç„¶åï¼Œå¯ä»¥å°†è¿™äº›æ£€æŸ¥ï¼ˆå¯¹äºgolangci-lintï¼‰æˆ–å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¯¹äºgometalinterï¼‰åµŒå…¥åˆ°ä¸Šè¿°meta-lintä¸­ã€‚ </p><br><p> å‡è®¾ä¸<code>lintpack</code>å…¼å®¹çš„æ£€æŸ¥ä¹‹ä¸€æ˜¯<code>golangci-lint</code>ä¸€éƒ¨åˆ†ã€‚ å¦‚æœæœ‰ä»»ä½•ä¸å…¶å¯ç”¨æ€§ç›¸å…³çš„é—®é¢˜ï¼Œè¿™å¯èƒ½æ˜¯<code>golangci-lint</code>çš„è´£ä»»ï¼Œä½†æ˜¯å¦‚æœåœ¨å®æ–½éªŒè¯æœ¬èº«æ—¶å‡ºé”™ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯éªŒè¯ä½œè€…lintpackç”Ÿæ€ç³»ç»Ÿçš„é—®é¢˜ã€‚ </p><br><p> æ¢å¥è¯è¯´ï¼Œè¿™äº›é¡¹ç›®è§£å†³äº†å„ç§é—®é¢˜ã€‚ </p><br><h1 id="a-chto-tam-s-go-critic"> æ‰¹è¯„å®¶å‘¢ï¼Ÿ </h1><br><p> å°†<code>go-critic</code>ç§»æ¤åˆ°<code>lintpack</code>è¿‡ç¨‹å·²ç»å®Œæˆï¼›å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">go-critic / checkers</a>å­˜å‚¨åº“ä¸­æ‰¾åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">æ£€æŸ¥ç¨‹åº</a> ã€‚ </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  go-critic : go get -v github.com/go-critic/go-critic/... #  go-critic : lintpack -o gocritic github.com/go-critic/go-critic/checkers</span></span></code> </pre> <br><p> åœ¨<code>golangci-lint</code>ä¹‹å¤–ä½¿ç”¨<code>go-critic</code>æ¯«æ— æ„ä¹‰ï¼Œä½†æ˜¯<code>lintpack</code>å¯ä»¥è®©æ‚¨å®‰è£…<code>go-critic</code>æœªåŒ…å«çš„é‚£äº›æ£€æŸ¥ã€‚ ä¾‹å¦‚ï¼Œè¿™äº›å¯èƒ½æ˜¯æ‚¨ç¼–å†™çš„è¯Šæ–­ä¿¡æ¯ã€‚ </p><br><h1 id="prodolzhenie-sleduet"> å¾…ç»­ </h1><br><p> åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸<code>lintpack</code>å…¼å®¹çš„æ£€æŸ¥ã€‚ </p><br><p> ä¸ä»å¤´å¼€å§‹çš„å®ç°ç›¸æ¯”ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†åˆ†æåœ¨å®ç°åŸºäºlintpackçš„linteræ—¶è·å¾—çš„ä¼˜åŠ¿ã€‚ </p><br><p> æˆ‘å¸Œæœ›æ‚¨æœ‰å…´è¶£è´­ä¹°Goçš„æ–°æ”¯ç¥¨ã€‚ è®©æˆ‘çŸ¥é“é™æ€åˆ†æå˜å¾—å¤ªå¤šäº†ï¼Œæˆ‘ä»¬å°†ä¸€èµ·å¿«é€Ÿè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430196/">https://habr.com/ru/post/zh-CN430196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430182/index.html">CodeOne 2018ä½œä¸ºJavaOneï¼Œä½†ä»…åœ¨æ©ç ä¸­</a></li>
<li><a href="../zh-CN430186/index.html">æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ‡’æƒ°è®¡ç®—</a></li>
<li><a href="../zh-CN430188/index.html">ä»¥Apache 2.4ï¼ŒPHP 7å’ŒUbuntu 18.04 LTSä¸ºä¾‹é…ç½®HTTP / 2</a></li>
<li><a href="../zh-CN430190/index.html">å¯ä¿¡åº¦ï¼ŒPå€¼å’Œå¯å†ç°æ€§å±æœº</a></li>
<li><a href="../zh-CN430194/index.html">æŒ‡å—ï¼šåˆ›å»ºæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN430198/index.html">ä»ç›–é©æŸœå°ï¼Œç«æŸ´å’Œarduinsã€‚ ç¬¬ä¸€éƒ¨åˆ†-ç†è®º</a></li>
<li><a href="../zh-CN430200/index.html">åœ¨åŠ å¯†è´§å¸å¸‚åœºå´©æºƒå’Œé‡‡çŸ¿å…´è¶£ä¸‹é™çš„æƒ…å†µä¸‹ï¼Œè‹±ä¼Ÿè¾¾çš„è‚¡ä»·ä¸‹è·Œ</a></li>
<li><a href="../zh-CN430202/index.html">ä½¿ç”¨DirectX 11åœ¨C ++ä¸­ç¼–å†™æˆå¯¹ç›¸äº’ä½œç”¨çš„ç²’å­ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN430204/index.html">éº»çœç†å·¥å­¦é™¢çš„è¯¾ç¨‹â€œè®¡ç®—æœºç³»ç»Ÿå®‰å…¨â€ã€‚ è®²åº§18ï¼šâ€œç§äººäº’è”ç½‘æµè§ˆâ€ï¼Œç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN430206/index.html">éº»çœç†å·¥å­¦é™¢çš„è¯¾ç¨‹â€œè®¡ç®—æœºç³»ç»Ÿå®‰å…¨â€ã€‚ ç¬¬18è¯¾ï¼šç§äººæµè§ˆInternetï¼Œç¬¬2éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>