<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯС╢ЁЯП╝ ЁЯСйЁЯП╛тАНтЪЦя╕П ЁЯЪ╢ЁЯП╛ .NET рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рдЕрдкрд╡рд╛рдж рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдП ЁЯХ╡ЁЯП╗ ЁЯРЕ ЁЯзСЁЯП╗тАНЁЯдЭтАНЁЯзСЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=".NET рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЕрдкрд╡рд╛рджреЛрдВ рдХреА рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдирдирд╛ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред CLR рдЯреНрд░рд┐рдХ рдХреИрд╕реЗ рдХрд░реЗ? StackOverflowException рдХреЛ рдкрдХрдбрд╝рдХрд░ рд░рдирдЯрд╛рдЗрдо рдореЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>.NET рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рдЕрдкрд╡рд╛рдж рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдП</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/426045/">  .NET рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЕрдкрд╡рд╛рджреЛрдВ рдХреА рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдирдирд╛ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  CLR рдЯреНрд░рд┐рдХ рдХреИрд╕реЗ рдХрд░реЗ?  StackOverflowException рдХреЛ рдкрдХрдбрд╝рдХрд░ рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдЬреАрд╡рд┐рдд рдХреИрд╕реЗ рд░рд╣реЗрдВ?  рдХреНрдпрд╛ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдкрдХрдбрд╝рдирд╛ рдЕрд╕рдВрднрд╡ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f1/314/78d/4f131478de33b4a6acd0ed25a0e53987.png"><br><br>  рдХрдЯреМрддреА рдХреЗ рддрд╣рдд, рд╣рдорд╛рд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдЯрдиреЗрдХреНрд╕реНрдЯ 2018 рдкрд╛рдЗрдЯрд░</a> рд╕рдореНрдореЗрд▓рди рд╕реЗ рдпреВрдЬреАрди ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдПрдкреЗрд╢рдХ</a> ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдкреЗрд╢рдХреЛрд╡</a> рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐, рдЬрд╣рд╛рдВ рдЙрдиреНрд╣реЛрдВрдиреЗ рдЗрди рдФрд░ рдЕрдкрд╡рд╛рджреЛрдВ рдХреА рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреАред <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/WLSrYgMWif4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  рдирдорд╕реНрддреЗ!  рдореЗрд░рд╛ рдирд╛рдо рдпреВрдЬреАрди рд╣реИред  рдореИрдВ SKB рдХреЛрдВрдЯреВрд░ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ рдФрд░ рдПрдХ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддрд╛ рд╣реВрдВ рдФрд░ рд╡рд┐рдВрдбреЛрдЬ рдХреЗ рд▓рд┐рдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рддреИрдирд╛рдд рдХрд░рддрд╛ рд╣реВрдВред  рд▓рдмреНрдмреЛрд▓реБрдЖрдм рдпрд╣ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдИ рдЙрддреНрдкрд╛рдж рджрд▓ рд╣реИрдВ рдЬреЛ рдЕрдкрдиреА рд╕реЗрд╡рд╛рдПрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╣реЛрд╕реНрдЯ рдХрд░рддреЗ рд╣реИрдВред  рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдБрдЪреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрд╕рд╛рди рдФрд░ рд╕рд░рд▓ рд╕рдорд╛рдзрд╛рди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕рд┐рд╕реНрдЯрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЦрдкрдд рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдирд╛ рдпрд╛ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ред <br><br>  рдХрднреА-рдХрднреА рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд╣реЛрд╕реНрдЯ рдХрд┐рдП рдЧрдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЕрд▓рдЧ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рд╣рдордиреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рддрд░реАрдХреЗ рджреЗрдЦреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ рдХреЛрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдХреНрд░реИрд╢ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдРрд╕реЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреБрдЫ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдФрд░ рдХрд░рд╛рдорд╛рддреА рдЕрдкрд╡рд╛рдж рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдирд╛ рд╣реИред <br><br>  рдЖрдЬ рдореИрдВ .NET рдореЗрдВ рдЕрдкрд╡рд╛рджреЛрдВ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ред  рд╣рдордиреЗ рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдЗрди рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдХреБрдЫ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛, рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рджреМрд░рд╛рдиред <br><br><h2>  рдпреЛрдЬрдирд╛ </h2><br><ol><li>  .NET рдЕрдкрд╡рд╛рдж рд╡реНрдпрд╡рд╣рд╛рд░ <br></li><li>  рд╡рд┐рдВрдбреЛрдЬ рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдФрд░ рд╣реИрдХ <br></li></ol><br>  рдирд┐рдореНрди рдореЗрдВ рд╕реЗ рд╕рднреА Windows рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣реИред  рд╕рднреА рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдкреВрд░реНрдг .NET 4.7.1 рдврд╛рдВрдЪреЗ рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  .NET Core рдХреЗ рдХреБрдЫ рд╕рдВрджрд░реНрдн рднреА рд╣реЛрдВрдЧреЗред <br><br><h2>  рдкрд╣реБрдВрдЪ рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди </h2><br>  рдпрд╣ рдЕрдкрд╡рд╛рдж рдЧрд▓рдд рдореЗрдореЛрд░реА рдСрдкрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рд╣реЛрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдХреЛрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдореЛрд░реА рдХреНрд╖реЗрддреНрд░ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЙрд╕рдХреА рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рд╣реИред  рдЕрдкрд╡рд╛рдж рдирд┐рдореНрди рд╕реНрддрд░ рд╣реИ, рдФрд░ рдЖрдорддреМрд░ рдкрд░, рдпрджрд┐ рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдмрд╣реБрдд рд▓рдВрдмреА рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред <br><br>  рдЖрдЗрдП C # рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдкрддрд╛ 1000 рдХреЛ рдмрд╛рдЗрдЯ 42 рд▓рд┐рдЦрддреЗ рд╣реИрдВ (рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ 1000 рдПрдХ рдХрд╛рдлреА рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдкрддрд╛ рд╣реИ рдФрд░ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреА рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ)ред <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Marshal.WriteByte((IntPtr) <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AccessViolationException) { ... }</code> </pre> <br>  WriteByte рдХреЛ рдмрд╕ рд╡рд╣реА рдЪрд╛рд╣рд┐рдП рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП: рдпрд╣ рджрд┐рдП рдЧрдП рдкрддреЗ рдкрд░ рдПрдХ рдмрд╛рдЗрдЯ рд▓рд┐рдЦрддрд╛ рд╣реИред  рд╣рдо рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреЙрд▓ AccessViolationException рдХреЛ рдлреЗрдВрдХ рджреЗрдЧрд╛ред  рдпрд╣ рдХреЛрдб рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрдЧрд╛, рдпрд╣ рд╕рдВрднрд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдЧрд╛ред  рдЕрдм рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рдмрджрд▓реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bytes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] {<span class="hljs-number"><span class="hljs-number">42</span></span>}; Marshal.Copy(bytes, <span class="hljs-number"><span class="hljs-number">0</span></span>, (IntPtr) <span class="hljs-number"><span class="hljs-number">1000</span></span>, bytes.Length); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AccessViolationException) { ... }</code> </pre><br>  рдЕрдЧрд░ WriteByte рдХреЗ рдмрдЬрд╛рдп рдЖрдк рдХреЙрдкреА рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдмрд╛рдЗрдЯ 42 рдХреЛ рдкрддрд╛ 1000 рддрдХ рдХреЙрдкреА рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЯреНрд░рд╛рдЗ-рдХреИрдЪ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, AccessViolation рдХреЛ рдирд╣реАрдВ рдкрдХрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЙрд╕реА рд╕рдордп, рдХрдВрд╕реЛрд▓ рдкрд░ рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдПрдХ рдЕрдирдЪрд╛рд╣реЗ AccessViolusException рдХреЗ рдХрд╛рд░рдг рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ рдерд╛ред <br><br><pre> <code class="cs hljs">Marshal.Copy(bytes, <span class="hljs-number"><span class="hljs-number">0</span></span>, (IntPtr) <span class="hljs-number"><span class="hljs-number">1000</span></span>, bytes.Length); Marshal.WriteByte((IntPtr) <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);</code> </pre><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреЛрдб рдХреА рджреЛ рдкрдВрдХреНрддрд┐рдпрд╛рдБ рд╣реИрдВ, рдЬрдмрдХрд┐ рдкрд╣рд▓рд╛ AccessViolation рдХреЗ рд╕рд╛рде рдкреВрд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдХреНрд░реИрд╢ рдХрд░ рджреЗрддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдЙрд╕реА рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░реЛрд╕реЗрд╕реНрдб рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрддрд╛ рд╣реИред  рдРрд╕рд╛ рдХреНрдпреЛрдВ рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдЗрди рддрд░реАрдХреЛрдВ рдХреЛ рдЕрдВрджрд░ рд╕реЗ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЪрд▓реЛ рдХреЙрдкреА рд╡рд┐рдзрд┐ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...</span></span></span><span class="hljs-function">)</span></span> { Marshal.CopyToNative((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>) source, startIndex, destination, length); } [MethodImpl(MethodImplOptions.InternalCall)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CopyToNative</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> startIndex, IntPtr destination, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> length</span></span></span><span class="hljs-function">)</span></span>;</code> </pre><br>  рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рд╡рд┐рдзрд┐ рдХрд░рддрд╛ рд╣реИред CopyToNative рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред .NET рдХреЗ рдЕрдВрджрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рд╣рдорд╛рд░рд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЕрднреА рднреА рдХреНрд░реИрд╢ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдХрд╣реАрдВ рдЕрдкрд╡рд╛рдж рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдХреЗрд╡рд▓ CopyToNative рдХреЗ рдЕрдВрджрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рд╕реЗ рд╣рдо рдкрд╣рд▓рд╛ рдЕрд╡рд▓реЛрдХрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рдпрджрд┐ .NET рдХреЛрдб рдХреЛ рдиреЗрдЯрд┐рд╡ рдХреЛрдб рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ AccessViolation рдЗрд╕рдХреЗ рдЕрдВрджрд░ рд╣реЛрддрд╛ рд╣реИ, рддреЛ .NET рдХреЛрдб рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдирд╣реАрдВ рд╕рдВрднрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЕрдм рд╣рдо рд╕рдордЭреЗрдВрдЧреЗ рдХрд┐ WriteByte рдкрджреНрдзрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ AccessViolation рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рдХреНрдпреЛрдВ рд╕рдВрднрд╡ рдерд╛ред  рдЖрдЗрдП рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЗ рдХреЛрдб рдХреЛ рджреЗрдЦреЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsafe</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteByte</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IntPtr ptr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { *(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>*) ptr = val; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NullReferenceException) {     <span class="hljs-comment"><span class="hljs-comment">// this method is documented to throw AccessViolationException on any AV throw new AccessViolationException(); } }</span></span></code> </pre><br>  рдпрд╣ рд╡рд┐рдзрд┐ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рд▓рд╛рдЧреВ рд╣реИред  рдпрд╣ рд╡рд╛рдВрдЫрд┐рдд рдкрддреЗ рдкрд░ рдбреЗрдЯрд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП C #-рдкреЙрдЗрдВрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдФрд░ NullReferenceException рдХреЛ рднреА рдкрдХрдбрд╝рддрд╛ рд╣реИред  рдпрджрд┐ NRE рдХреЛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ AccessViolationException рдХреЛ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдкреЗрд╕рд┐рдлрд┐рдХреЗрд╢рди</a> рдХреА рд╡рдЬрд╣ рд╕реЗ рдпрд╣ рдЬрд░реВрд░реА рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдереНрд░реЛ рдХрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рдлреЗрдВрдХреЗ рдЧрдП рд╕рднреА рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддрджрдиреБрд╕рд╛рд░, рдЕрдЧрд░ WriteByte рдХреЗ рдЕрдВрджрд░ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдПрдХ NullReferenceException рд╣реЛрддреА рд╣реИ, рддреЛ рд╣рдо AccessViolation рдХреЛ рдкрдХрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдХреНрдпрд╛ рдПрдХ рдПрдирдЖрд░рдИ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЬрдм рдкрддреЗ рдХреЛ рд╢реВрдиреНрдп рдХреЗ рдмрдЬрд╛рдп 1000 рддрдХ рдкрд╣реБрдБрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ? <br><br>  рд╣рдо рд╕реАрдзреЗ C # рдкреЙрдЗрдВрдЯрд░реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдФрд░ рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдЬрдм рдПрдХ рдЧреИрд░-рд╢реВрдиреНрдп рдкрддреЗ рдкрд░ рдкрд╣реБрдВрдЪ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ NullReferenceException рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cs hljs">*(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>*) <span class="hljs-number"><span class="hljs-number">1000</span></span> = <span class="hljs-number"><span class="hljs-number">42</span></span>;</code> </pre><br>  рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдРрд╕рд╛ рдХреНрдпреЛрдВ рд╣реЛрддрд╛ рд╣реИ, рд╣рдореЗрдВ рдпрд╣ рдпрд╛рдж рд░рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдореЗрдореЛрд░реА рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИред  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдореЛрд░реА рдореЗрдВ, рд╕рднреА рдкрддреЗ рдЖрднрд╛рд╕реА рд╣реИрдВред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдПрдХ рдмрдбрд╝реА рдкрддрд╛ рдЬрдЧрд╣ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдХреБрдЫ рдкреГрд╖реНрда рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВред  рд▓реЗрдХрд┐рди рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ: рдкрд╣рд▓реЗ 64 рдХреЗрдмреА рдХреЗ рдкрддреЗ рдХреЛ рдХрднреА рднреА рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдореЗрдВ рдореИрдк рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  Rantime .NET рдпрд╣ рдЬрд╛рдирддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ AccessViolation рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рд╣реБрдЖ рд╣реИ, рддреЛ рд░рдирдЯрд╛рдЗрдо рдЪреЗрдХ рдЬреЛ рдореЗрдореЛрд░реА рдореЗрдВ рдкрддрд╛ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдФрд░ рдПрдХ рдЙрдкрдпреБрдХреНрдд рдЕрдкрд╡рд╛рдж рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред  0 рд╕реЗ 2 ^ 16 рддрдХ рдХреЗ рдкрддреЗ рдХреЗ рд▓рд┐рдП - рд╕рднреА рдХреЗ рд▓рд┐рдП NullReference, AccessViolationред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/775/3d4/38f/7753d438fc8a977ac0bb54e431d81c6f.png"><br><br>  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╢реВрдиреНрдп рдкрддреЗ рддрдХ рдкрд╣реБрдВрдЪрддреЗ рд╕рдордп рди рдХреЗрд╡рд▓ рдирд▓рд░реЗрд▓реЗрдВрд╕ рдХреНрдпреЛрдВ рдлреЗрдВрдХрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдХрд┐рд╕реА рд╕рдВрджрд░реНрдн рдкреНрд░рдХрд╛рд░ рдХреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдкрд╣реБрдБрдЪ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рд╕рдВрджрд░реНрдн рд╢реВрдиреНрдп рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/127/a27/867/127a27867ef7a568a242797758855b44.png"><br><br>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╣рдо NullReferenceException рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВред  рдХрд┐рд╕реА рд╡рд╕реНрддреБ рдХреЗ рдХреНрд╖реЗрддреНрд░ рддрдХ рдкрд╣реБрдВрдЪ рдЗрд╕ рд╡рд╕реНрддреБ рдХреЗ рдкрддреЗ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рдСрдлрд╕реЗрдЯ рджреНрд╡рд╛рд░рд╛ рд╣реЛрддреА рд╣реИред  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рд╣рдо рдПрдХ рдРрд╕реЗ рдкрддреЗ рдкрд░ рдЬрд╛рдПрдВрдЧреЗ рдЬреЛ рд╢реВрдиреНрдп рдХреЗ рдХрд░реАрдм рд╣реИ (рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рд╣рдорд╛рд░реА рдореВрд▓ рд╡рд╕реНрддреБ рдХрд╛ рд▓рд┐рдВрдХ рд╢реВрдиреНрдп рд╣реИ)ред  рдЗрд╕ рд░рдирдЯрд╛рдЗрдо рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд╕рд╛рде, рд╣рдореЗрдВ рд╕реНрд╡рдпрдВ рд╡рд╕реНрддреБ рдХреЗ рдкрддреЗ рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рддреНрдпрд╛рдкрди рдХреЗ рдмрд┐рдирд╛ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЕрдкрд╡рд╛рдж рдорд┐рд▓рддрд╛ рд╣реИред <br><br>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо рдХрд┐рд╕реА рд╡рд╕реНрддреБ рдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреА рдУрд░ рдореБрдбрд╝ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╡рд╕реНрддреБ рд╕реНрд╡рдпрдВ 64 рдХреЗрдмреА рд╕реЗ рдЕрдзрд┐рдХ рдХрд╛ рд╣реЛ рдЬрд╛рддреА рд╣реИ? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/356/897/143/356897143b1275403569dc9f9a71471a.png"><br><br>  рдХреНрдпрд╛ рд╣рдо рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ AccessViolation рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  рдЪрд▓реЛ рдПрдХ рдкреНрд░рдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЪрд▓реЛ рдПрдХ рдмрд╣реБрдд рдмрдбрд╝реА рд╡рд╕реНрддреБ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рд╣рдо рдЗрд╕рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░реЗрдВрдЧреЗред  рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдПрдХ рдлрд╝реАрд▓реНрдб, рдЕрдВрдд рдореЗрдВ рджреВрд╕рд░рд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08d/619/95a/08d61995a01630f94f31f759890af4a8.png"><br><br>  рджреЛрдиреЛрдВ рд╡рд┐рдзрд┐рдпрд╛рдБ рдПрдХ NullReferenceException рдХреЛ рдлреЗрдВрдХ рджреЗрдЧреАред  рдХреЛрдИ AccessViolationException рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рд╣реЛрдЧреАред <br>  рдЖрдЗрдП рдЙрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рджреЗрдЦреЗрдВ рдЬреЛ рдЗрди рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рд╣реЛрдВрдЧреЗред  рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЬреЗрдЖрдИрдЯреА рдХрдВрдкрд╛рдЗрд▓рд░ рдиреЗ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реАрдПрдордкреА рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝рд╛ рд╣реИ рдЬреЛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдкрддреЗ рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдХреНрд╕реЗрд╕рд╡рд┐рдУрд▓реЗрд╢рди рдХреЛ рд╢реВрдиреНрдп рдкрддреЗ рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд░рдирдЯрд╛рдЗрдо рджреНрд╡рд╛рд░рд╛ NullReferenceException рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЗрд╕ рдкреНрд░рдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рдгреА рдХреЛ рдПрдХ рдмрдбрд╝реА рд╡рд╕реНрддреБ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред  рдХреНрдпреЛрдВ?  рдЗрд╕ рд╕рд╡рд╛рд▓ рдХреЛ рдкрд╛рдардХ рдкрд░ рдЫреЛрдбрд╝реЗрдВ, рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд╡рд┐рдЪрд╛рд░ рд▓рд┐рдЦреЗрдВ :) <br><br>  рдЪрд▓реЛ AccessViolation рдХреЗ рд╕рд╛рде рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffa/86b/0a8/ffa86b0a85f29a16936c92845f5d3e1e.png"><br><br>  AccessViolationException рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддреА рд╣реИ рдЬрд╣рд╛рдВ рдкрд░ рдЕрдкрд╡рд╛рдж рд╣реБрдЖ (рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рдпрд╛ рдореВрд▓ рдореЗрдВ)ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рдХреЛрдИ рдЕрдкрд╡рд╛рдж рд╣реБрдЖ рд╣реИ, рддреЛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдкрддрд╛ рдЪреЗрдХ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рд╕рд╡рд╛рд▓ рдпрд╣ рд╣реИ: рдХреНрдпрд╛ рд╣рдо рдПрдХ AccessViolationException рдХреЛ рд╕рдВрднрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдореВрд▓ рдХреЛрдб рдпрд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рд╣реБрдИ рдереА, рд▓реЗрдХрд┐рди NullReference рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдирд╣реАрдВ рд╣реБрдИ рдФрд░ рди рд╣реА рдереНрд░реЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЧрдпрд╛?  рдпрд╣ рдХрднреА-рдХрднреА рдПрдХ рдЙрдкрдпреЛрдЧреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЬрдм рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдХреЛрдб рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реЛред  рдЗрд╕ рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ .NET рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/67a/785/318/67a785318bc8b5f084a3b23fa36e766b.png"><br><br>  .NET 1.0 рдореЗрдВ, рдХреЛрдИ AccessViolationException рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рдереАред  рд╕рднреА рд▓рд┐рдВрдХ рдХреЛ рд╡реИрдз рдпрд╛ рдЕрд╢рдХреНрдд рдорд╛рдирд╛ рдЬрд╛рддрд╛ рдерд╛ред  .NET 2.0 рдХреЗ рд╕рдордп рддрдХ, рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рдореЗрдореЛрд░реА рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рдХрд╛рдо рдХреЗ рдмрд┐рдирд╛ - рдХреЛрдИ рд░рд╛рд╕реНрддрд╛ рдирд╣реАрдВ, рдФрд░ AccessViolation рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛, рдЬрдмрдХрд┐ рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдерд╛ред  4.0 рдФрд░ рдЗрд╕рдХреЗ рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рдпрд╣ рдЕрднреА рднреА рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рдЗрддрдирд╛ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдкрдХрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрдм рдЖрдкрдХреЛ рдЙрд╕ рд╡рд┐рдзрд┐ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХреИрдЪ рдмреНрд▓реЙрдХ рд╣реИрдВрдбрд▓реЗрдкреНрд░реЛрд╕реЗрд╕рдХреНрд░реЙрдкреНрдЯреЗрдбрд╕реНрдЯреИрдЯрдЯреЗрд╕реЗрдкреНрд╢рди рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рдд рд╣реИред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ рдРрд╕рд╛ рдХрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдЙрдиреНрд╣реЗрдВ рд▓рдЧрд╛ рдХрд┐ AccessViolationException рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рдереА рдЬрд┐рд╕реЗ рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рдкрдХрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкрд┐рдЫрдбрд╝реА рд╕рдВрдЧрддрддрд╛ рдХреЗ рд▓рд┐рдП, рд░рдирдЯрд╛рдЗрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ: <br><br><ul><li>  legacyNullReferenceExceptionPolicy рд░рд┐рдЯрд░реНрди .NET 1.0 рд╡реНрдпрд╡рд╣рд╛рд░ - рд╕рднреА AVs NRE рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреЗ рд╣реИрдВ <br></li><li>  legacyCorruptedStateExceptionPolicy рд░рд┐рдЯрд░реНрди .NET 2.0 рд╡реНрдпрд╡рд╣рд╛рд░ - рд╕рднреА AV рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯреЗрдб рд╣реИрдВ <br></li></ul><br>  .NET рдореЗрдВ, Core AccessViolation рдХреЛ рд╕рдВрднрд╛рд▓рд╛ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╣рдорд╛рд░реЗ рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдереА: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad7/0f1/6d3/ad70f16d3438d1e8ab80e43ba29d5412.png"><br><br>  .NET 4.7.1 рдХреЗ рддрд╣рдд рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди .NET 3.5 рдХреЗ рддрд╣рдд рдирд┐рд░реНрдорд┐рдд рдПрдХ рд╕рд╛рдЭрд╛ рдХреЛрдб рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдПрдХ рдЖрд╡рдзрд┐рдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╣рд╛рдпрдХ рдерд╛: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (isRunning) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { action(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { log.Error(e); } WaitForNextExecution(... ); }</code> </pre><br>  рд╣рдордиреЗ рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рд╕реЗ рдЗрд╕ рд╕рд╣рд╛рдпрдХ рдХреЗ рдкрд╛рд╕ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреАред  рдРрд╕рд╛ рд╣реБрдЖ рдХрд┐ рд╡рд╣ AccessViolation рдХреЗ рд╕рд╛рде рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рдЧрдпрд╛ред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдорд╛рд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдиреЗ рд▓рдЧрд╛рддрд╛рд░ рдХреНрд░реИрд╢ рд╣реЛрдиреЗ рдХреЗ рдмрдЬрд╛рдп, AccessViolation рд▓реЙрдЧ рдХрд┐рдпрд╛  3.5 рдХреЗ рддрд╣рдд рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдХреЛрдб рдЗрд╕реЗ рдкрдХрдбрд╝ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЕрд╡рд░реЛрдзрди рдЙрд╕ рд░рдирдЯрд╛рдЗрдо рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЯрд╛рд░рдЧреЗрдЯрдлреНрд░реЙрдорд╡рд░реНрдХ рдкрд░, рдЬрд┐рд╕рдХреЗ рддрд╣рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдЗрд╕рдХреА рдирд┐рд░реНрднрд░рддрд╛рдПрдВред <br><br>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рджреЗрдирд╛ред  AccessVilolation рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдЗрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИ рдХрд┐ рдпрд╣ рдХрд╣рд╛рдВ рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реБрдЖ рд╣реИ - рджреЗрд╢реА рдпрд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рдореЗрдВ рдФрд░ рд╕рд╛рде рд╣реА рдЯрд╛рд░рдЧреЗрдЯрдлреНрд░реЙрдорд╡рд░реНрдХ рдФрд░ рд░рдирдЯрд╛рдЗрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕ред <br><br><h2>  рдзрд╛рдЧрд╛ рдЧрд░реНрднрдкрд╛рдд </h2><br>  рдХрднреА-рдХрднреА рдХреЛрдб рдореЗрдВ рдЖрдкрдХреЛ рдереНрд░реЗрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд░реЛрдХрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдереНрд░реЗрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдмреЛрд░реНрдЯ (); <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ThreadAbortException e) { ... Thread.ResetAbort(); } }); ... thread.Abort();</code> </pre><br>  рдЬрдм рдПрдмреЙрд░реНрдЯ рд╡рд┐рдзрд┐ рдХреЛ рдПрдХ рдереНрд░реЗрдб рдереНрд░реЗрдб рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ рдереНрд░реЗрдбрдмреЛрд░реНрдЯ рдПрдХреНрд╕рд╕реЗрдкреНрд╢рди рдлреЗрдВрдХрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдЗрдП рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдХреЛрдб рдЗрд╕ рддрд░рд╣: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { тАж } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ThreadAbortException e) { тАж } }); ... thread.Abort();</code> </pre><br>  рдЗрд╕рдХреЗ рдмрд┐рд▓реНрдХреБрд▓ рдмрд░рд╛рдмрд░: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ThreadAbortException e) { ... <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; } }); ... thread.Abort();</code> </pre><br>  рдпрджрд┐ рдЖрдкрдХреЛ рдереНрд░реЗрдбрдЕрдмреЛрд░реНрдЯ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рдмрдВрдж рдХрд┐рдП рдЧрдП рдереНрд░реЗрдб рдореЗрдВ рдХреБрдЫ рдЕрдиреНрдп рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдк Thread.ResetAbort () рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ;  рдпрд╣ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд░реЛрдХрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд░реЛрдХрддрд╛ рд╣реИ рдФрд░ рдЕрдкрд╡рд╛рдж рд╕реНрдЯреИрдХ рдХреЛ рдЙрдЪреНрдЪрддрд░ рдлреЗрдВрдХрдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдереНрд░реЗрдбред рдПрдмреЙрд░реНрдЯ () рд╡рд┐рдзрд┐ рд╕реНрд╡рдпрдВ рдХреБрдЫ рднреА рдЧрд╛рд░рдВрдЯреА рдирд╣реАрдВ рджреЗрддреА рд╣реИ - рдмрдВрдж рдзрд╛рдЧреЗ рдореЗрдВ рдХреЛрдб рдЗрд╕реЗ рд░реЛрдХрдиреЗ рд╕реЗ рд░реЛрдХ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдереНрд░реЗрдб рдХреА рдПрдХ рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛ред рдПрдмреЛрд░реНрдЯ () рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдХреЛрдб рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдпрджрд┐ рдпрд╣ рдкрдХрдбрд╝ рдореЗрдВ рд╣реИ рдФрд░ рдЕрдВрдд рдореЗрдВ рдмреНрд▓реЙрдХ рд╣реИред <br><br>  рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЛрдб рдХреЗ рдЕрдВрджрд░, рдЖрдк рдЕрдХреНрд╕рд░ рдЙрди рддрд░реАрдХреЛрдВ рдХреЛ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдЯреНрд░рд╛рдпрд▓ рдмреНрд▓реЙрдХ рдЦрд╛рд▓реА рд╣реИ рдФрд░ рд╕рднреА рддрд░реНрдХ рдЕрдВрдд рдореЗрдВ рд╣реИрдВред  рдпрд╣ рдХреЗрд╡рд▓ рдЗрд╕ рдХреЛрдб рдХреЛ рдереНрд░реЗрдбрдмреЛрд░реНрдЯрдПрдХреНрд╕рд╕реЗрдкреНрд╢рди рджреНрд╡рд╛рд░рд╛ рдлреЗрдВрдХреЗ рдЬрд╛рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдереНрд░реЗрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓ .bort () рд╡рд┐рдзрд┐ рдкрд┐рд░реЛрдпрд╛ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ ThreadAbortException рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред  рдЗрди рджреЛрдиреЛрдВ рддрдереНрдпреЛрдВ рдХреЛ рдорд┐рд▓рд╛рдПрдВ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдХрд┐ рдереНрд░реЗрдбред рдПрдмреЙрд░реНрдЯ () рд╡рд┐рдзрд┐ рдХреЙрд▓рд┐рдВрдЧ рдереНрд░реЗрдб рдХреЛ рдмреНрд▓реЙрдХ рдХрд░ рд╕рдХрддреА рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { }       <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { } <span class="hljs-comment"><span class="hljs-comment">// &lt;-- No ThreadAbortException in catch       finally { // &lt;-- No ThreadAbortException in finally           Thread.Sleep(- 1); } }); thread.Start(); ... thread.Abort(); // Never returns</span></span></code> </pre><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдХреЛрд╢рд┐рд╢ рдореЗрдВ рддреИрдирд╛рдд рд╣реИ / рдЕрдВрдд рдореЗрдВ, рдЕрдВрдд рдореЗрдВ рдЕрдВрджрд░, рдирд┐рдкрдЯрд╛рди рд╡рд┐рдзрд┐ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдЬрдЯрд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдШрдЯрдирд╛ рд╕рдВрдЪрд╛рд▓рдХреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рддрд╛рд▓реЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдЕрдЧрд░ рдереНрд░реЗрдбред рдПрдмреЙрд░реНрдЯ рдХреЛ рд░рди рдЯрд╛рдЗрдо рдкрд░ рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдбрд┐рд╕реНрдкреЛрдЬрд╝ - рдереНрд░реЗрдбред рдПрдмреЙрд░реНрдЯ () рдЗрд╕рдХреЗ рд▓рд┐рдП рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдЧрд╛ред  рддреЛ рд╣рдореЗрдВ рдЦрд░реЛрдВрдЪ рд╕реЗ рд▓рдЧрднрдЧ рдПрдХ рддрд╛рд▓рд╛ рдорд┐рд▓рддрд╛ рд╣реИред <br><br>  .NET рдХреЛрд░ рдореЗрдВ, Thread.Abort () рд╡рд┐рдзрд┐ рдПрдХ PlatformNotSupportedException рдлреЗрдВрдХрддрд╛ рд╣реИред  рдФрд░ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдореБрдЭреЗ рдереНрд░реЗрдб рдПрдмреЛрд░реНрдЯ () рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЧреИрд░-рдЗрдирд╡реЗрд╕рд┐рд╡ рддрд░реАрдХреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдХреИрдВрд╕рд┐рд▓реЗрд╢рдирдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред <br><br><h2>  рдпрд╛рдж рд╕реЗ рдмрд╛рд╣рд░ </h2><br>  рдпрд╣ рдЕрдкрд╡рд╛рдж рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рдорд╢реАрди рдкрд░ рдореЗрдореЛрд░реА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдХрдо рд╣реИред  рдпрд╛ рдЬрдм рд╣рдо 32-рдмрд┐рдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рд╕реАрдорд╛рдУрдВ рдореЗрдВ рднрд╛рдЧ рдЧрдПред  рд▓реЗрдХрд┐рди рдЖрдк рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рднрд▓реЗ рд╣реА рдХрдВрдкреНрдпреВрдЯрд░ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реА рдореБрдлреНрдд рдореЗрдореЛрд░реА рд╣реЛ, рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ 64-рдмрд┐рдЯ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr4gb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue/<span class="hljs-number"><span class="hljs-number">2</span></span>];</code> </pre><br>  рдКрдкрд░ рд╡рд╛рд▓рд╛ рдХреЛрдб OutOfMemory рдлреЗрдВрдХ рджреЗрдЧрд╛ред  рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, 2 рдЬреАрдмреА рд╕реЗ рдмрдбрд╝реА рд╡рд╕реНрддреБрдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИред  рдпрд╣ App.config рдореЗрдВ gcAllowVeryLargeObjects рд╕реЗрдЯ рдХрд░рдХреЗ рддрдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, 4 рдЬреАрдмреА рд╕рд░рдгреА рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИред <br><br>  рдЕрдм рдПрдХ рдФрд░ рднреА рдЕрд░реИ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> largeArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue];</code> </pre><br>  рдЕрдм рднреА gcAllowVeryLargeObjects рдорджрдж рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рд╕реА рд╕рд░рдгреА рдореЗрдВ рдЕрдзрд┐рдХрддрдо рд╕реВрдЪрдХрд╛рдВрдХ рдкрд░</a> .NET рдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реАрдорд╛ рд╣реИ</a> ред  рдпрд╣ рдкреНрд░рддрд┐рдмрдВрдз int.MaxValue рд╕реЗ рдХрдо рд╣реИред <br><br>  рдЕрдзрд┐рдХрддрдо рд╕рд░рдгреА рд╕реВрдЪрдХрд╛рдВрдХ: <br><br><ul><li>  рдмрд╛рдЗрдЯ рд╕рд░рдгрд┐рдпрд╛рдБ - 0x7FFFFFC7 <br></li><li>  рдЕрдиреНрдп рд╕рд░рдгрд┐рдпрд╛рдБ - 0X7F <b>E</b> FFFFF <br></li></ul><br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ OutOfMemoryException рдЙрддреНрдкрдиреНрди рд╣реЛрдЧреА, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣рдо рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдЦрд┐рд▓рд╛рдл рдЖрдП рд╣реИрдВ, рд╕реНрдореГрддрд┐ рдХреА рдХрдореА рдирд╣реАрдВред <br><br>  рдХрднреА-рдХрднреА OutOfMemory рдХреЛ .NET рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЗ рдЕрдВрджрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХреЛрдб рджреНрд╡рд╛рд░рд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efd/c84/d98/efdc84d98a7786e39c9c5931ac523d13.png"><br>  рдпрд╣ string.Concat рдкрджреНрдзрддрд┐ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИред  рдпрджрд┐ рдкрд░рд┐рдгрд╛рдо рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рд▓рдВрдмрд╛рдИ int.MaxValue рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рдПрдХ OutOfMemoryException рдХреЛ рддреБрд░рдВрдд рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЪрд▓реЛ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ рдЬрдм рдЖрдЙрдЯрдСрдлрд╝рдореЗрд░реА рдорд╛рдорд▓реЗ рдореЗрдВ рдЙрдарддрд╛ рд╣реИ рдЬрдм рдореЗрдореЛрд░реА рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреА рд╣реИред <br><br><pre> <code class="cs hljs">LimitMemory(<span class="hljs-number"><span class="hljs-number">64.</span></span>Mb()); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>)   list.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[size]); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (OutOfMemoryException e) { Console.WriteLine(e); }</code> </pre><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдЕрдкрдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдореЗрдореЛрд░реА рдХреЛ 64 рдПрдордмреА рддрдХ рд╕реАрдорд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдЕрдЧрд▓рд╛, рд▓реВрдк рдХреЗ рдЕрдВрджрд░, рдирдИ рдмрд╛рдЗрдЯ рд╕рд░рдгрд┐рдпреЛрдВ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рдЙрдиреНрд╣реЗрдВ рдХреБрдЫ рд╢реАрдЯ рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВ рддрд╛рдХрд┐ рдЬреАрд╕реА рдЙрдиреНрд╣реЗрдВ рдЗрдХрдЯреНрдард╛ рди рдХрд░реЗрдВ, рдФрд░ рдЖрдЙрдЯрдСрдлрдореЗрд░реА рдХреЛ рдкрдХрдбрд╝рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред <br><br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреБрдЫ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  рдЕрдкрд╡рд╛рдж рд╕рдВрднрд╛рд▓рд╛ <br></li><li>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд┐рд░ рдЬрд╛рдПрдЧреА <br></li><li>  рдЪрд▓реЛ рдкрдХрдбрд╝ рдореЗрдВ рдЖрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдкрд╡рд╛рдж рдлрд┐рд░ рд╕реЗ рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ <br></li><li>  рдЪрд▓реЛ рдкрдХрдбрд╝ рдореЗрдВ рдЖрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди StackOverflow рджреБрд░реНрдШрдЯрдирд╛ рд╣реЛрдЧреА <br></li></ul><br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрд╛рд░реНрдпрдХреНрд░рдо рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЧреИрд░-рдирд┐рдпрддрд╛рддреНрдордХ рд╣реЛрдЧрд╛ред  рдЖрдЗрдП рд╕рднреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ: <br><br><ol><li>  рдПрдХ рдЕрдкрд╡рд╛рдж рдХреЛ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  .NET рдХреЗ рдЕрдВрджрд░, рдЖрдкрдХреЛ OutOfMemoryException рдХреЛ рд╣реИрдВрдбрд▓ рдХрд░рдиреЗ рд╕реЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рд░реЛрдХ рд░рд╣рд╛ рд╣реИред <br></li><li>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд┐рд░ рд╕рдХрддреА рд╣реИред  рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рдЕрдВрджрд░ рди рдХреЗрд╡рд▓ рд╣рдорд╛рд░реЗ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рд░рдирдЯрд╛рдЗрдо рдХреЛрдб рднреА рд╣реЛрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬреАрд╕реАред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рд╕реНрдерд┐рддрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬрдм рд░рдирдЯрд╛рдЗрдо рдЕрдкрдиреЗ рд▓рд┐рдП рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЕрдкрд╡рд╛рдж рдХреЛ рдкрдХрдбрд╝рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред <br></li><li>  рдЪрд▓рд┐рдП рдкрдХрдбрд╝ рдореЗрдВ рдЖрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдкрд╡рд╛рдж рдлрд┐рд░ рд╕реЗ рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдХреИрдЪ рдХреЗ рдЕрдВрджрд░, рд╣рдо рд╡рд╣ рдХрд╛рд░реНрдп рднреА рдХрд░рддреЗ рд╣реИрдВ рдЬрд╣рд╛рдБ рд╣рдореЗрдВ рдореЗрдореЛрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рд╣рдо рдХрдВрд╕реЛрд▓ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рддреЗ рд╣реИрдВ), рдФрд░ рдпрд╣ рдПрдХ рдирдпрд╛ рдЕрдкрд╡рд╛рдж рдкреИрджрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br></li><li>  рдЪрд▓реЛ рдкрдХрдбрд╝ рдореЗрдВ рдЖрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди StackOverflow рджреБрд░реНрдШрдЯрдирд╛ рд╣реЛрдЧреАред  рд╕реНрдЯреИрдХрдСрд╡рд░рдлреНрд▓реЛ рд╕реНрд╡рдпрдВ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рд░рд╛рдЗрдЯрд▓рд╛рдЗрди рд╡рд┐рдзрд┐ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдХреЛрдИ рд╕реНрдЯреИрдХ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрд▓рдЧ рд╕реНрдерд┐рддрд┐ рд╣реЛрддреА рд╣реИред  рдЖрдЗрдП рдЗрд╕рдХрд╛ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВред <br></li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/6e3/d32/752/6e3d32752ba10fd39d1f4a5e2e6648a7.png"><br><br>  рд╡рд░реНрдЪреБрдЕрд▓ рдореЗрдореЛрд░реА рдореЗрдВ, рдкреГрд╖реНрдареЛрдВ рдХреЛ рди рдХреЗрд╡рд▓ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдореЗрдВ рдореИрдк рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рдЖрд░рдХреНрд╖рд┐рдд рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрджрд┐ рдкреГрд╖реНрда рдЖрд░рдХреНрд╖рд┐рдд рд╣реИ, рддреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдиреЗ рдиреЛрдЯ рдХрд┐рдпрд╛ рдХрд┐ рд╡рд╣ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рдерд╛ред  рдпрджрд┐ рдкреГрд╖реНрда рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЗрдореЛрд░реА рдпрд╛ рд╕реНрд╡реИрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ "рдкреНрд░рддрд┐рдмрджреНрдз" (рдкреНрд░рддрд┐рдмрджреНрдз) рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реНрдЯреИрдХ рдЗрд╕ рдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЗрдореЛрд░реА рдХреЛ рдЖрд░рдХреНрд╖рд┐рдд рдФрд░ рдкреНрд░рддрд┐рдмрджреНрдз рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b17/9e4/41f/b179e441f0c00f18e2a5fdf12b3093a9.png"><br><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рд╣рдо рд░рд╛рдЗрдЯрд▓рд╛рдЗрди рд╡рд┐рдзрд┐ рдХрд╣рддреЗ рд╣реИрдВ, рдЬреЛ рд╕реНрдЯреИрдХ рдкрд░ рдХреБрдЫ рдЬрдЧрд╣ рд▓реЗрддреА рд╣реИред  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рд╕рднреА рдкреНрд░рддрд┐рдмрджреНрдз рдореЗрдореЛрд░реА рдкрд╣рд▓реЗ рд╣реА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЗрд╕ рд╕рдордп рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕реНрдЯреИрдХ рдкрд░ рдПрдХ рдФрд░ рдЖрд░рдХреНрд╖рд┐рдд рдкреГрд╖реНрда рд▓реЗрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдореЗрдВ рдореИрдк рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрд╛рдЗрдЯ рд╕рд░рдгрд┐рдпреЛрдВ рд╕реЗ рднрд░рд╛ рд╣реИред  рдпрд╣ StackOverflow рдХреЗ рдЕрдкрд╡рд╛рдж рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдирд┐рдореНрди рдХреЛрдб рдЖрдкрдХреЛ рд╕реНрдЯреНрд░реАрдо рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдПрдХ рдмрд╛рд░ рдореЗрдВ рд╕рднреА рдореЗрдореЛрд░реА рдХреЛ рд╕реНрдЯреИрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; F(), <span class="hljs-number"><span class="hljs-number">4</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>).Start();</code> </pre><br>  рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк рдЕрдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВрдХреЙрдореНрдкрдЯрд┐рдЯрд╣реНрд░реЗрдбрд╕реНрдЯреИрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рдирдЯрд╛рдЗрдо рд╕реЗрдЯрд┐рдВрдЧ</a> ред  рдЗрд╕реЗ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдереНрд░реЗрдб рд╕реНрдЯреИрдХ рдЕрдЧреНрд░рд┐рдо рдореЗрдВ рд╣реЛред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдореЗрдВ рдордирд╛рдпрд╛ рдЧрдпрд╛ рдЕрд▓рдЧ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46e/0e6/dbd/46e0e6dbd47906fb1d0ddf74ac927383.png"><br><br><h2>  рдвреЗрд░ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ </h2><br>  рдЪрд▓реЛ StackOverflowException рдкрд░ рдХрд░реАрдм рд╕реЗ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред  рдЖрдЗрдП рджреЛ рдХреЛрдб рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВред  рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ, рд╣рдо рдЕрдирдВрдд рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рд╕реНрдЯреИрдХ рдУрд╡рд░рдлреНрд▓реЛ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рджреВрд╕рд░реЗ рдореЗрдВ рд╣рдо рд╕рд┐рд░реНрдл рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { InfiniteRecursion(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception) { ... }</code> </pre><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StackOverflowException(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception) { ... }</code> </pre><br>  рдЪреВрдВрдХрд┐ рд╕рднреА рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣рдо рдЕрдкрд╡рд╛рдж рдХреЛ рдкрдХрдбрд╝ рд▓реЗрдВрдЧреЗред  рдФрд░ рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдХреЗ рд╕рд╛рде, рд╕рдм рдХреБрдЫ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">MSDN рдХреА рдУрд░</a> рдореБрдбрд╝реЗрдВ: <br><br><blockquote>  "рдЖрдк рд╕реНрдЯреИрдХ рдУрд╡рд░рдлрд╝реНрд▓реЛ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдирд╣реАрдВ рдкрдХрдбрд╝ рд╕рдХрддреЗ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдкрд╡рд╛рдж-рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЛрдб рдХреЛ рд╕реНрдЯреИрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред" <br>  MSDN </blockquote><br>  рдпрд╣ рдпрд╣рд╛рдВ рдХрд╣рддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдПрдХ StackOverflowException рдХреЛ рдирд╣реАрдВ рдкрдХрдбрд╝ рдкрд╛рдПрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рдЕрд╡рд░реЛрдзрди рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реНрдЯреИрдХ рд╕реНрдкреЗрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╣реА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЪреБрдХрд╛ рд╣реИред <br><br>  рдХрд┐рд╕реА рддрд░рд╣ рдЗрд╕ рдЕрдкрд╡рд╛рдж рд╕реЗ рдмрдЪрд╛рд╡ рдХреЗ рд▓рд┐рдП, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдк рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреА рдЧрд╣рд░рд╛рдИ рдХреЛ рд╕реАрдорд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рджреВрд╕рд░реЗ, рдЖрдк RuntimeHelpers рд╡рд░реНрдЧ рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><blockquote>  RuntimeHelpers.EnsureSufficientExecutionStack (); <br><br><ul><li>  "рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╢реЗрд╖ рд╕реНрдЯреИрдХ рд╕реНрдкреЗрд╕ рдФрд╕рдд .NET рдлреНрд░реЗрдорд╡рд░реНрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдмрдбрд╝рд╛ рд╣реИред"  - MSDN <br></li><li>  InsufficientExecutionStackException <br></li><li>  512 KB - x86, AnyCPU, 2 MB - x64 (рд╕реНрдЯреИрдХ рдЖрдХрд╛рд░ рдХрд╛ рдЖрдзрд╛) <br></li><li>  64/128 KB - .NET рдХреЛрд░ <br></li><li>  рдХреЗрд╡рд▓ рд╕реНрдЯреИрдХ рдкрддрд╛ рд╕реНрдерд╛рди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ <br></li></ul><br></blockquote><br>  рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЗ рд▓рд┐рдП рдкреНрд░рд▓реЗрдЦрди рдХрд╛ рдХрд╣рдирд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ рдХрд┐ <i>рдФрд╕рдд</i> .NET рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреИрдХ рдкрд░ рдкрд░реНрдпрд╛рдкреНрдд рдЬрдЧрд╣ рд╣реИред  рд▓реЗрдХрд┐рди <i>рдФрд╕рдд</i> рдлрд╝рдВрдХреНрд╢рди рдХреНрдпрд╛ рд╣реИ?  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, .NET рдлреНрд░реЗрдорд╡рд░реНрдХ рдореЗрдВ рдпрд╣ рд╡рд┐рдзрд┐ рдкреБрд╖реНрдЯрд┐ рдХрд░рддреА рд╣реИ рдХрд┐ рд╕реНрдЯреИрдХ рдкрд░ рдЗрд╕рдХрд╛ рдХрдо рд╕реЗ рдХрдо рдЖрдзрд╛ рдЖрдХрд╛рд░ рдореБрдлреНрдд рд╣реИред  .NET Core рдореЗрдВ, рдпрд╣ 64K рдлреНрд░реА рдореЗрдВ рдЪреЗрдХ рдХрд░рддрд╛ рд╣реИред <br><br>  .NET рдХреЛрд░ рдореЗрдВ рдПрдХ рдПрдирд╛рд▓реЙрдЧ рднреА рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ рд╣реИ: RuntimeHelpers.TryEnsureSufficientExecutionStack () рдЬреЛ рдПрдХ рдЕрдкрд╡рд╛рдж рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдмреВрд▓ рд▓реМрдЯрд╛рддрд╛ рд╣реИред <br><br>  рд╕реА # 7.2 рдиреЗ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рд╕реНрдкреИрди рдФрд░ рд╕реНрдЯреИрдХрд▓реЙрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреЗрд╢ рдХреАред  рд╢рд╛рдпрдж рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ, рд╕реНрдЯреИрдХрд▓реЙрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЛрдб рдореЗрдВ рдЕрдзрд┐рдХ рдмрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдпрд╣ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕реНрдЯреИрдХрдСрд╡рд░рдлреНрд▓реЛ рд╕реЗ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рд╕реНрдореГрддрд┐ рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╣рд╛рдВ рдЪреБрдирдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕ рддрд░рд╣ рдХреА рд╡рд┐рдзрд┐ рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рд╡рд┐рдзрд┐ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ рдЬреЛ рд╕реНрдЯреИрдХ рдкрд░ рдЖрд╡рдВрдЯрди рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддреА рд╣реИ</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреНрд░рд╛рдЗрд╕реНрдЯрд╛рдХреЙрд▓реЙрдХ</a> рдирд┐рд░реНрдорд╛рдгред <br><br><pre> <code class="cs hljs">Span&lt;<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>&gt; span; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CanAllocateOnStack(size)) span = <span class="hljs-keyword"><span class="hljs-keyword">stackalloc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[size]; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> span = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[size];</code> </pre><br>  MSDN рдкрд░ StackOverflow рдХреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдБ <br><br><blockquote>  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЬрдм рдПрдХ <b>рд╕рд╛рдорд╛рдиреНрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧ</b> рдореЗрдВ рд╕реНрдЯреИрдХ рдУрд╡рд░рдлрд╝реНрд▓реЛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдХреЙрдорди рд▓реИрдВрдЧреНрд╡реЗрдЬ рд░рдирдЯрд╛рдЗрдо (CLR) рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрддреА рд╣реИред тАЭ <br>  MSDN <br></blockquote><br>  рдпрджрд┐ рдХреЛрдИ "рд╕рд╛рдорд╛рдиреНрдп" рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИ рдЬреЛ StackOverflow рдХреЗ рджреМрд░рд╛рди рдЧрд┐рд░рддрд╛ рд╣реИ, рддреЛ рдЧреИрд░-рд╕рд╛рдорд╛рдиреНрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИрдВ рдЬреЛ рдЧрд┐рд░рддреЗ рдирд╣реАрдВ рд╣реИрдВ?  рдЗрд╕ рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрддрд░ рд╕реЗ CLR рд╕реНрддрд░ рддрдХ рдПрдХ рд╕реНрддрд░ рдиреАрдЪреЗ рдЬрд╛рдирд╛ рд╣реЛрдЧрд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/186/516/64d/18651664dd1c1d1346e5377f0e0b3995.png"><br><br><blockquote>  "рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЬреЛ <b>рд╕реАрдПрд▓рдЖрд░</b> рдХреЛ <b>рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИ</b> рд╡рд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд╕реАрдПрд▓рдЖрд░ <b>рдЙрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЛрдореЗрди рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИ</b> рдЬрд╣рд╛рдВ рдЕрдкрд╡рд╛рдж рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рджреЗрддрд╛ рд╣реИред"  - MSDN <br>  StackOverflowException -&gt; AppDomainUnloadedException <br></blockquote><br>  рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЬреЛ рд╕реАрдПрд▓рдЖрд░ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИ, рд╕реНрдЯреИрдХ рдУрд╡рд░рдлреНрд▓реЛ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЛрдореЗрди рдЕрдирд▓реЛрдб рд╣реЛ, рдЬрд┐рд╕ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдпрд╣ рдУрд╡рд░рдлреНрд▓реЛ рд╣реБрдЖред  рддреЛ рд╣рдо рдПрдХ StackOverflowException рдХреЛ AppDomainUnloadedException рдореЗрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЬрдм рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ .NET рд░рдирдЯрд╛рдЗрдо рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЖрдк рджреВрд╕рд░реЗ рд░рд╛рд╕реНрддреЗ рд╕реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдЕрдкреНрд░рдмрдВрдзрд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди (C ++ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рднрд╛рд╖рд╛ рдореЗрдВ) рд▓рд┐рдЦреЗрдВ, рдЬреЛ CLR рдмрдврд╝рд╛рдиреЗ рдФрд░ рд╣рдорд╛рд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред  рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ CLR рдЪрд▓рд╛рдиреЗ рд╡рд╛рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ CLR- рд╣реЛрд╕реНрдЯ рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕реЗ рд▓рд┐рдЦрдХрд░ рд╣рдо рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рдХрдИ рдЪреАрдЬреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореЗрдореЛрд░реА рдореИрдиреЗрдЬрд░ рдФрд░ рдереНрд░реЗрдб рдореИрдиреЗрдЬрд░ рдХреЛ рдмрджрд▓реЗрдВред  рд╣рдо рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдореЗрдореЛрд░реА рдХреЗ рдкреГрд╖реНрдареЛрдВ рдХреА рдЕрджрд▓рд╛-рдмрджрд▓реА рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП CLR- рд╣реЛрд╕реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдирд┐рдореНрди рдХреЛрдб CLR- рд╣реЛрд╕реНрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ StackOverflow рдХреЗ рджреМрд░рд╛рди AppDomain (C ++) рдЕрдирд▓реЛрдб рд╣реЛ рдЬрд╛рдП: <br><br><pre> <code class="cpp hljs">ICLRPolicyManager *policyMgr; pCLRControl-&gt;GetCLRManager(IID_ICLRPolicyManager, (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>**) (&amp;policyMgr)); policyMgr-&gt;SetActionOnFailure(FAIL_StackOverflow, eRudeUnloadAppDomain);</code> </pre><br>  рдХреНрдпрд╛ рдпрд╣ StackOverflow рд╕реЗ рдмрдЪрдиреЗ рдХрд╛ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ?  рд╢рд╛рдпрдж рдмрд╣реБрдд рдирд╣реАрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ C ++ рдХреЛрдб рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рд╣рдо рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗред  рджреВрд╕рд░реЗ, рд╣рдореЗрдВ рдЕрдкрдирд╛ C # рдХреЛрдб рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ StackOverflowException рдХреЛ рдлреЗрдВрдХрдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдПрдХ рдЕрд▓рдЧ AppDomain рдФрд░ рдПрдХ рдЕрд▓рдЧ рдереНрд░реЗрдб рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  рд╣рдорд╛рд░рд╛ рдХреЛрдб рддреБрд░рдВрдд рдРрд╕реЗ рдиреВрдбрд▓реНрд╕ рдореЗрдВ рдмрджрд▓ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> appDomain = AppDomain.CreateDomain(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); appDomain.DoCallBack(() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; InfiniteRecursion()); thread.Start(); thread.Join(); }); AppDomain.Unload(appDomain); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AppDomainUnloadedException) { }</code> </pre><br>  InfiniteRecursion рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рд▓рд┐рдЦрд╛ред  рддреАрд╕рд░рд╛, рд╣рдордиреЗ AppDomain рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢реБрд░реВ рдХрд┐рдпрд╛ред  рдФрд░ рдпрд╣ рд▓рдЧрднрдЧ рдирдИ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдПрдХ рд╕рдореВрд╣ рд╣реИред  рдЕрдкрд╡рд╛рджреЛрдВ рд╕рд╣рд┐рддред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomException</span></span> : <span class="hljs-title"><span class="hljs-title">Exception</span></span> {} <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> appDomain = AppDomain.CreateDomain( <span class="hljs-string"><span class="hljs-string">"..."</span></span>); appDomain.DoCallBack(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomException()); System.Runtime.Serialization.SerializationException: Type <span class="hljs-string"><span class="hljs-string">'CustomException'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> not marked <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> serializable. at System.AppDomain.DoCallBack(CrossAppDomainDelegate callBackDelegate)</code> </pre><br>  рдЪреВрдБрдХрд┐ рд╣рдорд╛рд░реЗ рдЕрдкрд╡рд╛рдж рдХреЛ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдорд╛рд░рд╛ рдХреЛрдб рдПрдХ SerializationException рдХреЗ рд╕рд╛рде рдЧрд┐рд░ рдЬрд╛рдПрдЧрд╛ред  рдФрд░ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╣рдо рдЕрдкрдиреЗ рдЕрдкрд╡рд╛рдж рдХреЛ Serializable рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ, рд╣рдореЗрдВ рдЕрднреА рднреА рдХреНрд░рдорд╛рдВрдХрди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдирд┐рд░реНрдорд╛рддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomException</span></span> : <span class="hljs-title"><span class="hljs-title">Exception</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SerializationInfo info, StreamingContext ctx</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">info, context</span></span></span><span class="hljs-function">)</span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> appDomain = AppDomain.CreateDomain(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); appDomain.DoCallBack(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomException());</code> </pre><br>  рдпрд╣ рд╕рдм рдмрд╣реБрдд рд╕реБрдВрджрд░ рдирд╣реАрдВ рдирд┐рдХрд▓рд╛, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ - рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рд╣реИрдХреНрд╕ рдХреЗ рд╕реНрддрд░ рддрдХ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><h2>  рд╕реЗрд╣ / рд╡рд╛рд╣рди </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/2c5/7a2/aff/2c57a2aff0542b2a02ad8ab34d097412.png"><br><br>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкреНрд░рдмрдВрдзрд┐рдд-рдЕрдкрд╡рд╛рджреЛрдВ рдиреЗ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ CLR рдХреЗ рдмреАрдЪ рдЙрдбрд╝рд╛рди рднрд░реА, рдЬрдмрдХрд┐ SEH-рдЕрдкрд╡рд╛рдж CLR рдФрд░ Windows рдХреЗ рдмреАрдЪ рдЙрдбрд╝рд╛рди рднрд░рддреЗ рд╣реИрдВред <br><br>  SEH - рд╕рдВрд░рдЪрд┐рдд рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ <br><br><ul><li>  рд╡рд┐рдВрдбреЛрдЬ рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдЗрдВрдЬрди <br></li><li>  рдпреВрдирд┐рдлреЙрд░реНрдо рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдФрд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ <br></li><li>  рдПрд╕рдИрдПрдЪ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рд▓рд╛рдЧреВ рд╕реА # рдЕрдкрд╡рд╛рдж <br></li></ul><br>  SEH рд╡рд┐рдВрдбреЛрдЬ рдореЗрдВ рдПрдХ рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ рддрдВрддреНрд░ рд╣реИ, рдпрд╣ рдЖрдкрдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЖрдП рдХрд┐рд╕реА рднреА рдЕрдкрд╡рд╛рдж рдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕реНрддрд░ рд╕реЗ, рдпрд╛ рд╕реНрд╡рдпрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рддрд░реНрдХ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдерд╛ред <br><br>  Rantime .NET SEH рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рдмрдВрдзрд┐рдд рдЕрдкрд╡рд╛рджреЛрдВ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  EXCEPTION_STACK_OVERFLOW -&gt; рдХреНрд░реИрд╢ <br></li><li>  EXCEPTION_ACCESS_VIOLATION -&gt; AccessViolationException <br></li><li>  EXCEPTION_ACCESS_VIOLATION -&gt; NullReferenceException <br></li><li>  EXCEPTION_INT_DIVIDE_BY_ZERO -&gt; DivideByZeroException <br></li><li>  рдЕрдЬреНрдЮрд╛рдд SEH рдЕрдкрд╡рд╛рдж -&gt; SEHException <br></li></ul><br>  рд╣рдо WinApi рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ SEH рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DllImport(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"kernel32.dll"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RaiseException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dwExceptionCode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dwExceptionFlags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nNumberOfArguments,IntPtr lpArguments</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-comment"><span class="hljs-comment">// DivideByZeroException RaiseException(0xc0000094, 0, 0, IntPtr.Zero); // Stack overflow RaiseException(0xc00000fd, 0, 0, IntPtr.Zero);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдереНрд░реЛ рдХрдВрд╕реНрдЯреНрд░рдХреНрд╢рди SEH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреА рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> -&gt; RaiseException(<span class="hljs-number"><span class="hljs-number">0xe0434f4d</span></span>, ...)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рд╕реАрдПрд▓рдЖрд░-рдЕрдкрд╡рд╛рдж рдХреЛрдб рд╣рдореЗрд╢рд╛ рд╕рдорд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрддреЗ рд╣реИрдВ, рдпрд╣ рд╣рдореЗрд╢рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рд╣реЛрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реАрдИрдПрдЪ рдПрдХ рд╡реЗрдХреНрдЯрд░ рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ рд╣реИ, рдЬреЛ рдПрд╕рдИрдПрдЪ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИ, рд▓реЗрдХрд┐рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕реНрддрд░ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ, рдФрд░ рдПрдХ рднреА рдереНрд░реЗрдб рдХреЗ рд╕реНрддрд░ рдкрд░ рдирд╣реАрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдПрд╕рдИрдПрдЪ рд╢рдмреНрджрд╛рд░реНрдерд┐рдХ рд░реВрдк рд╕реЗ рдХреЛрд╢рд┐рд╢-рдХреИрдЪ рдХреЗ рд╕рдорд╛рди рд╣реИ, рддреЛ рд╡реАрдИрдПрдЪ рд╢рдмреНрджрд╛рд░реНрде рд░реВрдк рд╕реЗ рдПрдХ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░ рдХреЗ рд╕рдорд╛рди рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдо рдмрд╕ рдЕрдкрдирд╛ рд╣реИрдВрдбрд▓рд░ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╡реАрдИрдПрдЪ рдХреА рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдЖрдкрдХреЛ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдЬрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрд╕рдИрдПрдЪ рдЕрдкрд╡рд╛рдж рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b8/79d/848/7b879d848390b9e3d1b9156b00b8e2bf.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╡реЗрдХреНрдЯрд░ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рд░рдирдЯрд╛рдЗрдо рдХреЗ рдмреАрдЪ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ SEH рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдВрдЧреЗ рдФрд░ рдЬрдм рдпрд╣ EXCEPTION_STACK_OVERFLOW рд╕реЗ рднрд┐рдбрд╝рддрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рдмрджрд▓ рджреЗрдВ рддрд╛рдХрд┐ .NET рд░рдирдЯрд╛рдЗрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХреНрд░реИрд╢ рди рдХрд░реЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк WinApi рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ VEH рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DllImport(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"kernel32.dll"</span></span></span><span class="hljs-meta">, SetLastError = true)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> IntPtr </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddVectoredExceptionHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IntPtr FirstHandler,  VECTORED_EXCEPTION_HANDLER VectoredHandler</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> VEH </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PVECTORED_EXCEPTION_HANDLER</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EXCEPTION_POINTERS exceptionPointers</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> VEH : <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> { EXCEPTION_CONTINUE_SEARCH = <span class="hljs-number"><span class="hljs-number">0</span></span>, EXCEPTION_EXECUTE_HANDLER = <span class="hljs-number"><span class="hljs-number">1</span></span>, EXCEPTION_CONTINUE_EXECUTION = <span class="hljs-number"><span class="hljs-number">-1</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> VEH </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PVECTORED_EXCEPTION_HANDLER</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EXCEPTION_POINTERS exceptionPointers</span></span></span><span class="hljs-function">)</span></span>; [StructLayout(LayoutKind.Sequential)] <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> EXCEPTION_POINTERS { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> EXCEPTION_RECORD* ExceptionRecord; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IntPtr Context; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> VEH </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PVECTORED_EXCEPTION_HANDLER</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EXCEPTION_POINTERS exceptionPointers</span></span></span><span class="hljs-function">)</span></span>; [StructLayout(LayoutKind.Sequential)] <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> EXCEPTION_RECORD { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span> ExceptionCode; ... }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрджрд░реНрдн рдореЗрдВ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рдордп рд╕рднреА рдкреНрд░реЛрд╕реЗрд╕рд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдо EXCEPTION_RECORD рдФрд░ рдЗрд╕рдореЗрдВ рдореМрдЬреВрдж рдПрдХреНрд╕рд╕реЗрдкреНрд╢рдирдХреЛрдб рдореЗрдВ рд░реБрдЪрд┐ рд▓реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдо рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЛрдб рд╕реЗ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдПрд▓рдЖрд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╡реЗрдХреНрдЯрд░ рд╣реИрдВрдбрд▓рд░ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsafe</span></span></span><span class="hljs-function"> VEH </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Handler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EXCEPTION_POINTERS e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.ExceptionRecord == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VEH. EXCEPTION_CONTINUE_SEARCH; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> record = e. ExceptionRecord; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (record-&gt;ExceptionCode != ExceptionStackOverflow) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VEH. EXCEPTION_CONTINUE_SEARCH; record-&gt;ExceptionCode = <span class="hljs-number"><span class="hljs-number">0x01234567</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VEH. EXCEPTION_EXECUTE_HANDLER; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рд╣рдо рдПрдХ рд░реИрдкрд░ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬреЛ рд╣реИрдВрдбрд▓реЗрд╢реЛ рд╡рд┐рдзрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╡реЗрдХреНрдЯрд░ рд╣реИрдВрдбрд▓рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдореЗрдВ рд▓реЗрддрд╛ рд╣реИ рдЬреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдПрдХ StackOverflowException (рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдб рд╕реЗ рдЧрд┐рд░ рд╕рдХрддрд╛ рд╣реИ, WinA рдлрд╝рдВрдХреНрд╢рди рдлрд╝рдВрдХреНрд╢рди рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╣реИрдВрдбрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╡реЗрдХреНрдЯрд░ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ)ред </font></font><br><br><pre> <code class="cs hljs">HandleSO(() =&gt; InfiniteRecursion()) ; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T HandleSO&lt;T&gt;(Func&lt;T&gt; action) { Kernel32. AddVectoredExceptionHandler(IntPtr.Zero, Handler); Kernel32.SetThreadStackGuarantee(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> size); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> action(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) when ((<span class="hljs-keyword"><span class="hljs-keyword">uint</span></span>) Marshal. GetExceptionCode() == <span class="hljs-number"><span class="hljs-number">0x01234567</span></span>) {} <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(T); } HandleSO(() =&gt; InfiniteRecursion());</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрдВрджрд░, SetThreadStackGuarantee рд╡рд┐рдзрд┐ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╡рд┐рдзрд┐ StackOverflow рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕реНрдЯреИрдХ рд╕реНрдерд╛рди рд░рдЦрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рддрд░рд╣, рд╣рдо рдЕрдирдВрдд рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд┐рдзрд┐ рдХреЗ рдЖрд╣реНрд╡рд╛рди рд╕реЗ рдмрдЪ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реА рдзрд╛рд░рд╛ рдХрд╛рдо рдХрд░рддреА рд░рд╣реЗрдЧреА рдЬреИрд╕реЗ рдХрд┐ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реБрдЖ рдерд╛, рдЬреИрд╕реЗ рдХрд┐ рдХреЛрдИ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рдирд╣реАрдВ рд╣реБрдЖред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рдПрдХ рд╣реА рдзрд╛рдЧреЗ рдореЗрдВ рджреЛ рдмрд╛рд░ рд╣реИрдВрдбрд▓ рдХреЛ рдХрд╣рддреЗ рд╣реИрдВ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛?</font></font><br><br><pre> <code class="cs hljs">HandleSO(() =&gt; InfiniteRecursion()); HandleSO(() =&gt; InfiniteRecursion());</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдПрдХ AccessViolationException рд╣реЛрдЧреАред рд╕реНрдЯреИрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╡рд╛рдкрд╕ред </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/639/e93/c8d/639e93c8d187dc31fc37a2ac7247f193.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╕реНрдЯреИрдХ рдУрд╡рд░рдлреНрд▓реЛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддрд╛ рд╣реИред рдвреЗрд░ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреГрд╖реНрда рд╣реИ рдЬрд┐рд╕реЗ рдЧрд╛рд░реНрдб рдкреГрд╖реНрда рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдкрд╣рд▓реА рдмрд╛рд░ рдЬрдм рдпрд╣ рдкреГрд╖реНрда рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ рдФрд░ рдЕрдкрд╡рд╛рдж рд╣реЛрдЧрд╛ - STATUS_GUARD_PAGE_VIOLATION, рдФрд░ рдЧрд╛рд░реНрдб рдкреГрд╖реНрда рдзреНрд╡рдЬ рдкреГрд╖реНрда рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдпрджрд┐ рдЖрдк рдмрд╕ рдЗрд╕ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдкреГрд╖реНрда рдЕрдм рд╕реНрдЯреИрдХ рдкрд░ рдирд╣реАрдВ рд╣реЛрдЧрд╛ - рдЕрдЧрд▓реЗ рдУрд╡рд░рдлреНрд▓реЛ рдореЗрдВ, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдпрд╣ рд╕рдордЭрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдФрд░ рд╕реНрдЯреИрдХ-рдкреЙрдЗрдВрдЯрд░ рд╕реНрдЯреИрдХ рдХреЗ рд▓рд┐рдП рдЖрд╡рдВрдЯрд┐рдд рдореЗрдореЛрд░реА рд╕реЗ рдкрд░реЗ рдЬрд╛рдПрдЧрд╛ред рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдПрдХ AccessViolationException рдЙрддреНрдкрдиреНрди рд╣реЛрдЧреАред рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ StackOverflow рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдкреГрд╖реНрда рдХреЗ рдЭрдВрдбреЗ рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдРрд╕рд╛ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рд╕реА рд░рдирдЯрд╛рдЗрдо рд▓рд╛рдЗрдмреНрд░реЗрд░реА (msvcrt.dll) рд╕реЗ _resetstkoflw рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DllImport(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"msvcrt.dll"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _resetstkoflw();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕реА рддрд░рд╣ рд╕реЗ, рдЖрдк рд╡рд┐рдВрдбреЛрдЬ рдХреЗ рддрд╣рдд .NET рдХреЛрд░ рдореЗрдВ рдПрдХ AccessViolationException рдХреЛ рдкрдХрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ рдЙрд╕ рдХреНрд░рдо рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рд╡реЗрдХреНрдЯрд░ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЗ рд╣реИрдВрдбрд▓рд░ рдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ .NET Core рднреА рдПрдХреНрд╕реЗрд╕рд╡рд┐рд▓реЗрдЬреЗрд╢рди рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп VEH рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">AddVectoredExceptionHandler рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдЙрд╕ рдСрд░реНрдбрд░ рдХреЗ рд▓рд┐рдП рдЬрд╝рд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣реИрдВрдбрд▓рд░ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ:</font></font><br><br><pre> <code class="cs hljs">Kernel32.AddVectoredExceptionHandler(FirstHandler: (IntPtr) <span class="hljs-number"><span class="hljs-number">1</span></span>, handler);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдореБрджреНрджреЛрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рд╛рдорд╛рдиреНрдп рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддреЗ рд╣реИрдВ: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрд╡рд╛рдж рдЙрддрдиреЗ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИрдВ рдЬрд┐рддрдиреЗ рд╡реЗ рд▓рдЧрддреЗ рд╣реИрдВ; </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдПрдХ рд╣реА рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ; </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЧрд░реНрднрдкрд╛рдд рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕реНрддрд░реЛрдВ рдкрд░ рдЕрдкрд╡рд╛рдж рдХреА рд╣реИрдВрдбрд▓рд┐рдВрдЧ рд╣реЛрддреА рд╣реИ; </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЖрдк рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ .NET рд░рдирдЯрд╛рдЗрдо рдХреЛ рдореВрд▓ рд░реВрдк рд╕реЗ рдЗрдЪреНрдЫрд┐рдд рд╕реЗ рдЕрд▓рдЧ рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br></li></ul><br><h2>  рд╕рдВрджрд░реНрдн </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">тЖТ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯ рд╕реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рднрдВрдбрд╛рд░</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> тЖТ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдПрдбрдо Sitnik рджреНрд╡рд╛рд░рд╛ - Dotnext 2016 рдорд╛рд╕реНрдХреЛ рдЕрд╕рд╛рдзрд╛рд░рдг .NET рдореЗрдВ рдЕрдкрд╡рд╛рдж рд╣реИ</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> тЖТ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DotNetBook: рдЕрдкрд╡рд╛рдж</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> тЖТ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЗрдЯ рдЗрдирд╕рд╛рдЗрдб рдЖрдЙрдЯ рднрд╛рдЧ 8 - рд╣реИрдВрдбрд▓рд┐рдВрдЧ рд╕реНрдЯреИрдХ рдУрд╡рд░рдлрд╝реНрд▓реЛ рдореЗрдВ рд╕реА # VEH рд╕рд╛рде рдЕрдкрд╡рд╛рдж рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрд╡рд░реЛрдзрди StackOverflow рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рд╣реИ -ред</font></font><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22-23 рдирд╡рдВрдмрд░ рдХреЛ, рдпреВрдЬреАрди </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DotNext 2018 рдорд╛рд╕реНрдХреЛ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рдПрдХ рд░рд┐рдкреЛрд░реНрдЯ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╕рд┐рд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕: </font></font></a><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">рдХрд▓реЗрдХреНрдЯрд┐рдВрдЧ рдкрд┐рдЯреНрд╕ </font></b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">" рдХреЗ</font></a><font style="vertical-align: inherit;"> рд╕рд╛рде </font><font style="vertical-align: inherit;">рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬреЗрдлрд░реА рд░рд┐рдХреНрдЯрд░, рдЧреНрд░реЗрдЧ рдпрдВрдЧ, тАЛтАЛрдкрд╛рд╡реЗрд▓ рдпреЛрд╕рд┐рдлреЛрд╡рд┐рдЪ рдФрд░ рдЕрдиреНрдп рд╕рдорд╛рди рд░реВрдк рд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╡рдХреНрддрд╛ рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдЖрдПрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯреЛрдВ рдХреЗ рд╡рд┐рд╖рдп </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИрдВ</font></a><font style="vertical-align: inherit;"> , рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯрд┐рдХрдЯ рдЦрд░реАрдж рд╕рдХрддреЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИрдВ</font></a><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЕрдм рд╕рдореНрдорд┐рд▓рд┐рдд рд╣реЛрдВ!</font></font></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi426045/">https://habr.com/ru/post/hi426045/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi426029/index.html">рдХреНрдпрд╛ рдЖрдк рд╣рд╛рд░ рдорд╛рди рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдХрд╛рд░реНрдп рдЫреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╣ рдХреИрд╕реЗ рдкреНрд░рднрд╛рд╡реА рдбреЗрд╡рд▓рдкрд░ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХреА рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ</a></li>
<li><a href="../hi426031/index.html">рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рджреБрдирд┐рдпрд╛ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдирд╛ рдЕрд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдзрд╛рд░рдгрд╛рдУрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi426033/index.html">рдЧрдгрд┐рдд рдХреЗ рдЯрд╛рдЗрдЯрдиреНрд╕ рдПрдмреАрд╕реА рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХреЗ рдорд╣рд╛рдХрд╛рд╡реНрдп рдкреНрд░рдорд╛рдг рдкрд░ рдЯрдХрд░рд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi426039/index.html">рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд▓реЙрдиреНрдЪ "рд╕реЛрдпреВрдЬрд╝ рдПрдордПрд╕ -10" (рдЪрд╛рд▓рдХ рджрд▓ рдХреЛ рдмрдЪрд╛рдпрд╛, рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛)</a></li>
<li><a href="../hi426041/index.html">рд▓рд╛рдкреНрд▓рд╛рд╕ рдЯреНрд░рд╛рдВрд╕рдлреЙрд░реНрдо рдкрджреНрдзрддрд┐ рджреНрд╡рд╛рд░рд╛ рд░реИрдЦрд┐рдХ рдЕрдВрддрд░ рд╕рдореАрдХрд░рдгреЛрдВ рдФрд░ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд╕рдорд╛рдзрд╛рди рдХреЛ SymPy рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП</a></li>
<li><a href="../hi426047/index.html">рдЕрдВрдЧреНрд░реЗрдЬреА рдореЗрдВ рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП 10 рдорд╣рд╛рди рдкреБрд╕реНрддрдХреЗрдВ</a></li>
<li><a href="../hi426051/index.html">рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреМрд╢рд▓ рдореЗрдВ рд╕реБрдзрд╛рд░ - рдХреБрдЫ рд╕реБрдЭрд╛рд╡</a></li>
<li><a href="../hi426053/index.html">рдЗрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░ рдХреИрд╢рд┐рдВрдЧ рдФрд░ рд░рд┐рдПрдХреНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░</a></li>
<li><a href="../hi426055/index.html">TensorFlow.js рдФрд░ clmtrackr.js: рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЯрдХрдЯрдХреА рдХреА рджрд┐рд╢рд╛ рдкрд░ рдирдЬрд╝рд░ рд░рдЦрдирд╛</a></li>
<li><a href="../hi426059/index.html">рдЯреВрдЯреВ PHP рдореАрдЯрдЕрдк # 2: рднрд╛рд╖рдг рд╡реАрдбрд┐рдпреЛ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>