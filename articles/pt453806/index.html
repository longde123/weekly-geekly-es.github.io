<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÆ üïäÔ∏è üë©üèø‚ÄçüöÄ Tratamento de erros no Go üçΩÔ∏è üëåüèæ üÜò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, cidad√£os de Habrovsk! O curso Golang Developer j√° est√° come√ßando no OTUS hoje e consideramos uma √≥tima ocasi√£o para compartilhar outro post √∫til ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tratamento de erros no Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/453806/">  Ol√°, cidad√£os de Habrovsk!  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O</a> curso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Golang Developer</a> j√° est√° come√ßando no OTUS hoje e consideramos uma √≥tima ocasi√£o para compartilhar outro post √∫til sobre o assunto.  Hoje vamos falar sobre a abordagem da Go aos erros.  Vamos come√ßar! <br><br><img src="https://habrastorage.org/webt/mr/8i/ch/mr8ichd887jvkbuzbf3dh_h5oc0.png"><br><br><h3>  Dominar o tratamento pragm√°tico de erros no seu c√≥digo Go </h3><br><img src="https://habrastorage.org/webt/gp/i3/ff/gpi3ffckknhyvkcqyfyk1dnbltc.png"><br><br>  <i>Esta postagem faz parte da s√©rie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Antes de</a> Come√ßar, onde exploramos o mundo de Golang, compartilhamos dicas e id√©ias que voc√™ deve saber ao escrever c√≥digo no Go, para que voc√™ n√£o precise preencher seus pr√≥prios incha√ßos.</i> <br><br>  Suponho que voc√™ j√° tenha pelo menos uma experi√™ncia b√°sica com o Go, mas se, em algum momento, encontrou um material de discuss√£o desconhecido, n√£o hesite em fazer uma pausa, explorar o t√≥pico e voltar. <br><br>  Agora que abrimos o caminho, vamos l√°! <a name="habracut"></a><br><br>  A abordagem da Go ao tratamento de erros √© um dos recursos mais controversos e mal utilizados.  Neste artigo, voc√™ aprender√° a abordagem dos erros de Go e entender√° como eles funcionam "sob o cap√¥".  Voc√™ aprender√° algumas abordagens diferentes, examinar√° o c√≥digo-fonte Go e a biblioteca padr√£o para descobrir como os erros s√£o tratados e como trabalhar com eles.  Voc√™ aprender√° por que as asser√ß√µes de tipo desempenham um papel importante no tratamento delas e ver√° as pr√≥ximas altera√ß√µes no tratamento de erros que planeja introduzir no Go 2. <br><br><img src="https://habrastorage.org/webt/e3/0t/gk/e30tgk9zbbofawpffxugwstrhow.png"><br><br><h2>  Entrada </h2><br>  Primeiras coisas primeiro: erros no Go n√£o s√£o excep√ß√£o.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dave Cheney</a> escreveu um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post √©pico no blog</a> sobre isso, ent√£o eu o refiro e resumo: em outros idiomas, voc√™ n√£o pode ter certeza se uma fun√ß√£o pode gerar uma exce√ß√£o ou n√£o.  Em vez de lan√ßar exce√ß√µes, as fun√ß√µes Go suportam <b>v√°rios valores de retorno</b> e, por conven√ß√£o, esse recurso geralmente √© usado para retornar o resultado de uma fun√ß√£o junto com uma vari√°vel de erro. <br><br><img src="https://habrastorage.org/webt/p5/nl/dw/p5nldwpihop5qjmlgz4f0h0v_yi.png"><br><br>  Se, por algum motivo, sua fun√ß√£o falhar, provavelmente voc√™ deve retornar o tipo de <code>error</code> declarado anteriormente.  Por conven√ß√£o, retornar um erro sinaliza ao chamador sobre o problema e retornar zero n√£o √© considerado um erro.  Assim, voc√™ far√° com que o chamador entenda que um problema surgiu e ele precisa lidar com isso: quem chama sua fun√ß√£o, ele sabe que n√£o deve confiar no resultado antes de verificar se h√° um erro.  Se o erro n√£o for nulo, ele √© obrigado a verific√°-lo e process√°-lo (registrar, retornar, manter, chamar algum tipo de mecanismo de nova tentativa / limpeza, etc.). <br><br><img src="https://habrastorage.org/webt/l2/u-/05/l2u-05npjr4ptcwn7woqyb20usg.png"><br>  <i>(3 // tratamento de erros</i> <i><br></i>  <i>5 // continua√ß√£o)</i> <br><br>  Esses snippets s√£o muito comuns no Go, e alguns os consideram como c√≥digo padr√£o.  O compilador trata vari√°veis ‚Äã‚Äãn√£o utilizadas como erros de compila√ß√£o; portanto, se voc√™ n√£o deseja verificar se h√° erros, deve atribu√≠-los a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um identificador vazio</a> .  Por√©m, por mais conveniente que seja, os erros n√£o devem ser ignorados. <br><br><img src="https://habrastorage.org/webt/fm/pq/rv/fmpqrvcl6_eh4tvwhq0ebxmd4qo.png"><br>  <i>(4 // ignorar erros n√£o √© seguro e voc√™ n√£o deve confiar no resultado antes de verificar se h√° erros)</i> <br>  <i><b>o resultado n√£o pode ser confi√°vel at√© a verifica√ß√£o de erros</b></i> <br><br>  O retorno do erro junto com os resultados, junto com o sistema estrito do tipo Go, complica bastante a grava√ß√£o do c√≥digo marcado.  Voc√™ sempre deve assumir que o valor de uma fun√ß√£o est√° corrompido, a menos que tenha verificado o erro que ela retornou e, ao atribuir o erro a um identificador vazio, ignora explicitamente que o valor da sua fun√ß√£o pode estar corrompido. <br><br><img src="https://habrastorage.org/webt/lm/xj/uh/lmxjuhxt8v8sdvillwvsbbuct5o.png"><br>  <b><i>O id vazio √© escuro e cheio de horrores.</i></b> <br><br>  O Go possui mecanismos de <code>panic</code> e <code>recover</code> , que tamb√©m s√£o descritos em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">outra postagem detalhada do blog do Go</a> .  Mas eles n√£o pretendem simular exce√ß√µes.  De acordo com Dave, <i>"quando voc√™ entra em p√¢nico no Go, voc√™ realmente entra em p√¢nico: isso n√£o √© problema de outra pessoa, ele j√° √© um jogador".</i>  Eles s√£o fatais e levam a uma falha no seu programa.  Rob Pike cunhou o ditado "N√£o entre em p√¢nico", que fala por si: voc√™ provavelmente deve evitar esses mecanismos e retornar erros. <br><br><blockquote>  "Erros s√£o os significados." <br>  "N√£o apenas verifique se h√° erros, mas lide com eles com eleg√¢ncia." <br>  "N√£o entre em p√¢nico" <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">todas as palavras de Rob Pike</a> <br></blockquote><br><h2>  Sob o cap√¥ </h2><br>  <b>Interface de erro</b> <br><br>  Sob o cap√¥, o tipo de erro √© uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">interface simples com um m√©todo</a> , e se voc√™ n√£o estiver familiarizado com ele, recomendo ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esta postagem</a> no blog oficial do Go. <br><br><img src="https://habrastorage.org/webt/n_/c3/ip/n_c3iptfnwohofkgwwhhxc-cwda.png"><br>  <b><i>interface de erro da fonte</i></b> <br><br>  Cometer seus pr√≥prios erros n√£o √© dif√≠cil.  Existem v√°rias abordagens para estruturas de usu√°rio que implementam o m√©todo de <code>string</code> <code>Error()</code> .  Qualquer estrutura que implemente esse m√©todo √∫nico √© considerada um valor de erro v√°lido e pode ser retornada como tal. <br><br>  Vejamos algumas dessas abordagens. <br><br><h3>  Estrutura errorString interna </h3><br>  A implementa√ß√£o mais comum e amplamente usada da interface de erro √© a estrutura <code>errorString</code> .  Essa √© a implementa√ß√£o mais f√°cil que voc√™ pode imaginar. <br><br><img src="https://habrastorage.org/webt/uv/hj/by/uvhjbyzjh8cmovqpjdkda0ww5_c.png"><br>  Fonte: <a href="">c√≥digo fonte Go</a> <br><br>  Voc√™ pode ver sua implementa√ß√£o simplificada <a href="">aqui</a> .  Tudo o que faz √© conter uma <code>string</code> e essa sequ√™ncia √© retornada pelo m√©todo <code>Error</code> .  Esse erro de string pode ser formatado por n√≥s com base em alguns dados, digamos, usando <code>fmt.Sprintf</code> .  Mas, al√©m disso, ele n√£o cont√©m outros recursos.  Se voc√™ aplicou <a href="">errors.New</a> ou <a href="">fmt.Errorf</a> , voc√™ j√° o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usou</a> . <br><br><img src="https://habrastorage.org/webt/br/6h/g5/br6hg5p3lozppuf98ry0g2ptsw4.png"><br>  <i>(13 // sa√≠da :)</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tentar</a> <br><br><h3>  github.com/pkg/errors </h3><br>  Outro exemplo simples √© o <a href="">pacote pkg / errors</a> .  Para n√£o ser confundido com o pacote de <code>errors</code> interno que voc√™ aprendeu anteriormente, este pacote fornece recursos importantes adicionais, como quebra de erros, expans√£o, formata√ß√£o e grava√ß√£o de rastreamento de pilha.  Voc√™ pode instalar o pacote executando <code>go get github.com/pkg/errors</code> . <br><br><img src="https://habrastorage.org/webt/bo/vs/f7/bovsf7dn4l2gvaesqbepogmjxrw.png"><br><br>  Nos casos em que voc√™ precisa anexar o rastreamento de pilha ou as informa√ß√µes de depura√ß√£o necess√°rias aos seus erros, o uso das <code>Errorf</code> <code>New</code> ou <code>Errorf</code> deste pacote fornece erros que j√° foram gravados no rastreamento de pilha e voc√™ tamb√©m pode anexar metadados simples usando-os recursos de formata√ß√£o.  <code>Errorf</code> implementa a interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fmt.Formatter</a> , ou seja, voc√™ pode format√°-la usando as runas do pacote <code>fmt</code> ( <code>%s</code> , <code>%v</code> , <code>%+v</code> , etc.). <br><br><img src="https://habrastorage.org/webt/tz/r6/if/tzr6if2llu8ayda0lrnl1zblkju.png"><br>  <i>(// 6 ou alternativa)</i> <br><br>  Este pacote tamb√©m apresenta as <code>errors.Wrapf</code> e <code>errors.Wrapf</code> .  Essas fun√ß√µes adicionam contexto ao erro usando uma mensagem e um rastreamento de pilha no local em que foram chamados.  Portanto, em vez de simplesmente retornar o erro, voc√™ pode envolv√™-lo com contexto e dados importantes de depura√ß√£o. <br><br><img src="https://habrastorage.org/webt/pa/pz/3t/papz3tu-dlhtdcb4r8lmldfxazu.png"><br><br>  Os inv√≥lucros de erro de outros erros suportam o m√©todo de <code>Cause() error</code> , que retorna seu erro interno.  Al√©m disso, eles podem ser usados ‚Äã‚Äãcom <code>errors.Cause(err error) error</code> Fun√ß√£o de <code>errors.Cause(err error) error</code> , que extrai o principal erro interno do erro de <code>errors.Cause(err error) error</code> . <br><br><h2>  Tratamento de erros </h2><br><h3>  Homologa√ß√£o de tipo </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">As</a> asser√ß√µes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tipo</a> desempenham um papel importante ao lidar com erros.  Voc√™ os usar√° para extrair informa√ß√µes do valor da interface e, como o tratamento de erros est√° associado √†s implementa√ß√µes do usu√°rio na interface de <code>error</code> , a implementa√ß√£o de instru√ß√µes de <code>error</code> √© uma ferramenta muito conveniente. <br><br>  Sua sintaxe √© a mesma para todos os fins - <code>x.(T)</code> se <code>x</code> tiver um tipo de interface.  <code>x.(T)</code> afirma que <code>x</code> n√£o <code>x</code> <code>nil</code> e que o valor armazenado em <code>x</code> √© do tipo <code>T</code>  Nas pr√≥ximas se√ß√µes, consideraremos duas maneiras de usar instru√ß√µes de tipo - com um tipo espec√≠fico <code>T</code> e com uma interface do tipo <code>T</code> <br><br><img src="https://habrastorage.org/webt/tb/fd/e2/tbfde2ne-8parkmkbsthfamc_ym.png"><br>  <i>(2 // sintaxe abreviada pulando a vari√°vel booleana ok</i> <i><br></i>  <i>3 // panic: convers√£o de interface: interface {} √© nula, n√£o string</i> <i><br></i>  <i>6 // sintaxe estendida com booleano ok</i> <i><br></i>  <i>8 // n√£o entra em p√¢nico; em vez disso, define ok false quando a instru√ß√£o √© false</i> <i><br></i>  <i>9 // agora podemos usar s como uma string)</i> <br><br>  <b><i>sandbox: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√¢nico com sintaxe abreviada</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sintaxe estendida segura</a></i></b> <br><br><blockquote>  <i>Nota adicional sobre sintaxe: uma asser√ß√£o de tipo pode ser usada com uma sintaxe abreviada (que entra em p√¢nico quando uma instru√ß√£o falha) ou com uma sintaxe estendida (que usa o valor l√≥gico OK para indicar sucesso ou falha).</i>  <i>Eu sempre recomendo tomar alongado em vez de encurtado, pois prefiro verificar a vari√°vel OK e n√£o lidar com p√¢nico.</i> </blockquote><br><br><h3>  Aprova√ß√£o do tipo T </h3><br>  Uma declara√ß√£o do tipo <code>x.(T)</code> com uma interface do tipo <code>T</code> confirma que <code>x</code> implementa a interface de <code>T</code>  Assim, voc√™ pode garantir que o valor da interface implemente a interface e, somente se for o caso, poder√° usar seus m√©todos. <br><br><img src="https://habrastorage.org/webt/jl/ps/k7/jlpsk7f8m1bj-7jhwbgmzigsqea.png"><br>  <i>(5 ... // afirma que x implementa a interface do resolvedor</i> <i><br></i>  <i>6 ... // aqui j√° podemos usar esse m√©todo com seguran√ßa)</i> <br><br>  Para entender como isso pode ser usado, vamos dar uma olhada no <code>pkg/errors</code> novamente.  Voc√™ j√° conhece esse pacote de erros, ent√£o vamos nos aprofundar na fun√ß√£o de <code>errors.Cause(err error) error</code> . <br><br>  Essa fun√ß√£o recebe um erro e extrai o erro mais interno que ele sofre (aquele que n√£o serve mais como inv√≥lucro para outro erro).  Isso pode parecer primitivo, mas h√° muitas coisas excelentes que voc√™ pode aprender com esta implementa√ß√£o: <br><br><img src="https://habrastorage.org/webt/kj/uy/rm/kjuyrm3rxxgtqt-8a6_cd1bvsqg.png"><br>  fonte: <a href="">pkg / errors</a> <br><br>  A fun√ß√£o recebe o valor do erro e n√£o pode assumir que o argumento <code>err</code> que recebe √© um erro de wrapper (suportado pelo m√©todo <code>Cause</code> ).  Portanto, antes de chamar o m√©todo <code>Cause</code> , voc√™ precisa verificar se est√° lidando com um erro que implementa esse m√©todo.  Ao executar uma instru√ß√£o de tipo em cada itera√ß√£o do loop for, voc√™ pode garantir que a vari√°vel de <code>cause</code> d√™ suporte ao m√©todo <code>Cause</code> e continue a extrair erros internos at√© encontrar um erro que n√£o tenha <code>Cause</code> . <br><br>  Criando uma interface local simples que cont√©m apenas os m√©todos necess√°rios e aplicando asser√ß√µes, seu c√≥digo √© separado de outras depend√™ncias.  O argumento que voc√™ recebeu n√£o precisa ser uma estrutura conhecida, apenas um erro.  Qualquer tipo que implemente os m√©todos <code>Error</code> e <code>Cause</code> funcionar√°.  Portanto, se voc√™ implementar o m√©todo <code>Cause</code> no seu tipo de erro, poder√° usar esta fun√ß√£o com ele sem lentid√£o. <br><br>  No entanto, h√° uma pequena desvantagem a ser lembrada: as interfaces podem mudar, portanto, voc√™ deve manter cuidadosamente o c√≥digo para que suas instru√ß√µes n√£o sejam violadas.  N√£o se esque√ßa de definir suas interfaces onde voc√™ as usa, para mant√™-las esbeltas e organizadas, e voc√™ ficar√° bem. <br><br>  Finalmente, se voc√™ precisar de apenas um m√©todo, √†s vezes √© mais conveniente fazer uma declara√ß√£o em uma interface an√¥nima que contenha apenas o m√©todo em que voc√™ confia, ou seja <code>v, ok := x.(interface{ F() (int, error) })</code> .  O uso de interfaces an√¥nimas pode ajudar a separar seu c√≥digo de poss√≠veis depend√™ncias e proteg√™-lo de poss√≠veis altera√ß√µes nas interfaces. <br><br><h3>  Aprova√ß√£o do tipo T e do comutador de tipo </h3><br><br>  Eu pref√°cio esta se√ß√£o introduzindo dois padr√µes semelhantes de tratamento de erros que sofrem de v√°rias falhas e armadilhas.  Isso n√£o significa que eles n√£o sejam comuns.  Ambos podem ser ferramentas convenientes em pequenos projetos, mas n√£o s√£o bem dimensionados. <br><br>  A primeira √© a segunda vers√£o da asser√ß√£o de tipo: uma asser√ß√£o do tipo <code>x.(T)</code> com um tipo espec√≠fico <code>T</code> √© executada.  Ele afirma que o valor de <code>x</code> √© do tipo <code>T</code> ou pode ser convertido para o tipo <code>T</code> <br><br><img src="https://habrastorage.org/webt/mh/c5/qy/mhc5qyqfrrnhpct7wyfzhhpflju.png"><br>  <i>(2 // podemos usar v como mypkg.SomeErrorType)</i> <br><br>  Outro √© o padr√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">troca de tipo</a> .  A op√ß√£o Type Switch combina uma instru√ß√£o switch com uma instru√ß√£o type usando a palavra-chave <code>type</code> reservada.  Eles s√£o especialmente comuns no tratamento de erros, onde o conhecimento do tipo b√°sico de um erro vari√°vel pode ser muito √∫til. <br><br><img src="https://habrastorage.org/webt/on/iz/ji/onizji38uqjzltxqord4icmmvoq.png"><br>  <i>(3 // processando ...</i> <i><br></i>  <i>5 // processando ...)</i> <br><br>  A grande desvantagem de ambas as abordagens √© que ambas levam √† liga√ß√£o de c√≥digo com suas depend√™ncias.  Ambos os exemplos devem estar familiarizados com a estrutura <code>SomeErrorType</code> (que obviamente deve ser exportada) e deve importar o pacote <code>mypkg</code> . <br>  Nas duas abordagens, ao manipular seus erros, voc√™ deve estar familiarizado com o tipo e importar seu pacote.  A situa√ß√£o √© agravada quando voc√™ lida com erros em wrappers, nos quais a causa do erro pode ser um erro decorrente de uma depend√™ncia interna que voc√™ n√£o conhece e n√£o deve conhecer. <br><br><img src="https://habrastorage.org/webt/vz/xz/zq/vzxzzqe6qajcsroflsuy0mjt5jk.png"><br>  <i>(7 // processando ...</i> <i><br></i>  <i>9 // processando ...)</i> <br><br>  A op√ß√£o Tipo alterna entre <code>*MyStruct</code> e <code>MyStruct</code> .  Portanto, se voc√™ n√£o tiver certeza se est√° lidando com um ponteiro ou uma inst√¢ncia real de uma estrutura, precisar√° fornecer as duas op√ß√µes.  Al√©m disso, como no caso de comutadores regulares, os casos no comutador de tipo n√£o falham, mas, diferentemente do comutador de tipo usual, o uso de <code>fallthrough</code> proibido no comutador de tipo, portanto, voc√™ deve usar uma v√≠rgula e fornecer as duas op√ß√µes, o que √© f√°cil de esquecer. <br><br><img src="https://habrastorage.org/webt/pe/1y/g7/pe1yg7one8orth5kvcdguqtpteo.png"><br><br><h2>  Resumir </h2><br>  Isso √© tudo!  Agora voc√™ est√° familiarizado com os erros e deve estar preparado para corrigir quaisquer erros que seu aplicativo Go possa lan√ßar (ou realmente retornar) ao seu caminho! <br>  Os dois pacotes de <code>errors</code> fornecem abordagens simples, mas importantes, dos erros do Go e, se atenderem √†s suas necessidades, ser√£o uma √≥tima op√ß√£o.  Voc√™ pode implementar facilmente suas pr√≥prias estruturas de erro e tirar proveito do tratamento de erros Go combinando-os com <code>pkg/errors</code> . <br><br>  Quando voc√™ dimensiona erros simples, o uso correto de instru√ß√µes de tipo pode ser uma √≥tima ferramenta para lidar com v√°rios erros.  Usando o Type Switch, ou validando o comportamento do erro e verificando as interfaces que ele implementa. <br><br><h2>  O que vem a seguir? </h2><br>  O tratamento de erros no Go agora √© muito relevante.  Agora que voc√™ j√° conhece o b√°sico, pode estar se perguntando o que temos pela frente para lidarmos com os erros do Go! <br><br>  A pr√≥xima vers√£o do Go 2 presta muita aten√ß√£o a isso, e voc√™ j√° pode dar uma olhada na <a href="">vers√£o preliminar</a> .  Al√©m disso, durante o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dotGo 2019,</a> Marcel van Lojuizen teve uma excelente conversa sobre um t√≥pico que eu simplesmente n√£o posso deixar de recomendar - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúGO 2 valores de erro hoje‚Äù</a> . <br><br>  Obviamente, existem muitas outras abordagens, dicas e truques, e n√£o posso inclu√≠-las todas em um post!  Apesar disso, espero que tenham gostado, e at√© o pr√≥ximo epis√≥dio <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de Antes de come√ßar</a></i> ! <br><br>  E agora tradicionalmente aguardando seus coment√°rios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt453806/">https://habr.com/ru/post/pt453806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt453790/index.html">"O cliente se foi - √© para sempre?" Como contar a rotatividade de clientes em SaaS e o que h√° de errado nas m√©tricas b√°sicas</a></li>
<li><a href="../pt453792/index.html">Sistemas de recomenda√ß√£o: id√©ias, abordagens, tarefas</a></li>
<li><a href="../pt453796/index.html">As pessoas precisam de matem√°tica?</a></li>
<li><a href="../pt453800/index.html">Como resolver o "Campo Minado" (e torn√°-lo melhor)</a></li>
<li><a href="../pt453804/index.html">O livro "Competitividade e simultaneidade na plataforma .NET. Padr√µes de design eficazes ‚Äù</a></li>
<li><a href="../pt453808/index.html">Desmontamos o modelo de neg√≥cios da Viking</a></li>
<li><a href="../pt453810/index.html">Feedback biom√©trico</a></li>
<li><a href="../pt453812/index.html">Temas, estilos e outros</a></li>
<li><a href="../pt453816/index.html">Encefalite transmitida por carrapatos: um perigo negligenciado</a></li>
<li><a href="../pt453818/index.html">GitLab 11.11: v√°rios respons√°veis ‚Äã‚Äãpor solicita√ß√µes de mesclagem e melhorias para cont√™ineres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>