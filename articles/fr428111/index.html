<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë©üèº üçß ü¶ï Arithm√©tique de pr√©cision arbitraire √† Erlang üôèüèº ü§±üèæ ‚õπüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="@rawpixel 


 M√™me les √©coliers sont conscients de l'existence de divers syst√®mes de nombres et du fait que toutes les fractions d√©cimales finies ne s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arithm√©tique de pr√©cision arbitraire √† Erlang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428111/"><p><img src="https://habrastorage.org/webt/h6/vn/cg/h6vncgl-xdc_8d5peworwhnrg4a.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@rawpixel</a> </p><br><p>  M√™me les √©coliers sont conscients de l'existence de divers syst√®mes de nombres et du fait que toutes les fractions d√©cimales finies ne sont pas des fractions finies dans un syst√®me de nombres binaires.  Peu de gens pensent que de ce fait, les op√©rations sur float et double ne sont pas exactes. </p><br><p>  Si nous parlons d'Erlang, alors, comme beaucoup d'autres langages, il impl√©mente la norme IEEE754 pour float, tandis que le type Integer standard dans Erlang est impl√©ment√© en utilisant une arithm√©tique de pr√©cision arbitraire.  Cependant, je voudrais avoir non seulement le bigint, mais aussi la capacit√© de fonctionner avec des nombres rationnels, complexes et √† virgule flottante avec la pr√©cision n√©cessaire. </p><br><p> L'article fournit un aper√ßu minimal de la th√©orie du codage des nombres √† virgule flottante et les exemples les plus frappants d'effets √©mergents.  La solution qui fournit la pr√©cision n√©cessaire des op√©rations √† travers la transition vers une repr√©sentation en virgule fixe est con√ßue comme une biblioth√®que EAPA (Erlang Arbitrary Precision Arithmetic), con√ßue pour r√©pondre aux besoins des applications financi√®res d√©velopp√©es sur Erlang / Elixir. </p><a name="habracut"></a><br><hr><br><h2 id="standarty-standarty-standarty">  Normes, normes, normes ... </h2><br><p>  Aujourd'hui, la principale norme pour l'arithm√©tique √† virgule flottante binaire est l'IEEE754, largement utilis√© en ing√©nierie et en programmation.  Il d√©finit quatre formats de pr√©sentation: </p><br><ul><li>  32 bits simple pr√©cision </li><li>  64 bits double pr√©cision </li><li>  pr√©cision simple √©tendue&gt; = 43 bits (rarement utilis√©) </li><li>  pr√©cision √† double extension&gt; = 79 bits (g√©n√©ralement 80 bits utilis√©s) <br>  et quatre modes d'arrondi: </li><li>  Arrondi, tendant vers l'entier le plus proche. </li><li>  Arrondi tendant vers z√©ro. </li><li>  Arrondi tendant vers + ‚àû </li><li>  Arrondi vers -‚àû </li></ul><br><p>  La plupart des microprocesseurs modernes sont fabriqu√©s avec une impl√©mentation mat√©rielle de la repr√©sentation des variables r√©elles au format IEEE754.  Les formats de pr√©sentation limitent la taille limite d'un nombre et les modes d'arrondi affectent la pr√©cision.  Les programmeurs ne peuvent souvent pas modifier le comportement du mat√©riel et impl√©menter des langages de programmation.  Par exemple, l'impl√©mentation officielle d'Erlang stocke un flottant en 3 mots sur une machine 64 bits et en 4 mots sur une machine 32 bits. </p><br><p>  Comme mentionn√© ci-dessus, les nombres au format IEEE754 sont un ensemble fini sur lequel un ensemble infini de nombres r√©els est mapp√©, de sorte que le num√©ro d'origine peut √™tre pr√©sent√© au format IEEE754 avec une erreur. </p><br><p>  La majeure partie des nombres lorsqu'ils sont affich√©s sur un ensemble fini a une petite erreur relative stable.  Ainsi, pour le flotteur, il est de 11,920928955078125e-6% et pour le double - 2,2204460492503130808472633361816e-14%.  Dans la vie des programmeurs, la plupart des t√¢ches quotidiennes √† r√©soudre nous permettent de n√©gliger cette erreur, m√™me s'il convient de noter que m√™me dans les t√¢ches simples, vous pouvez marcher sur le r√¢teau, car l'ampleur de l'erreur absolue peut atteindre 10 <sup>31</sup> et 10 <sup>292</sup> pour float et double, respectivement, ce qui provoque des difficult√©s de calcul. </p><br><h2 id="illyustraciya-effektov">  Illustration des effets </h2><br><p>  De l'information g√©n√©rale aux affaires.  Essayons de reproduire les effets √©mergents dans Erlang. </p><br><p>  Tous les exemples ci-dessous sont con√ßus comme des tests ct. </p><br><h3 id="okruglenie-i-poterya-tochnosti">  Arrondi et perte de pr√©cision </h3><br><p>  Commen√ßons par les classiques - l'ajout de deux nombres: 0,1 + 0,2 = ?: </p><br><pre><code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t30000000000000004</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> [<span class="hljs-string"><span class="hljs-string">"0.30000000000000004"</span></span>] = io_lib:format(<span class="hljs-string"><span class="hljs-string">"~w"</span></span>, [<span class="hljs-number"><span class="hljs-number">0.1</span></span> + <span class="hljs-number"><span class="hljs-number">0.2</span></span>]).</code> </pre> <br><p>  Le r√©sultat de l'addition est l√©g√®rement diff√©rent de celui attendu intuitivement et le test r√©ussit.  Essayons d'obtenir le bon r√©sultat.  R√©√©crivez le test en utilisant EAPA: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t30000000000000004_eapa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">%% prec = 1 symbols after coma X = eapa_int:with_val(1, &lt;&lt;"0.1"&gt;&gt;), Y = eapa_int:with_val(1, &lt;&lt;"0.2"&gt;&gt;), &lt;&lt;"0.3"&gt;&gt; = eapa_int:to_float(1, eapa_int:add(X, Y)).</span></span></code> </pre> <br><p>  Ce test r√©ussit √©galement, montrant que le probl√®me a √©t√© r√©solu. <br>  Continuons les exp√©riences, ajoutons une tr√®s petite valeur √† 1.0: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tiny</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X = <span class="hljs-number"><span class="hljs-number">1.0</span></span>, Y = <span class="hljs-number"><span class="hljs-number">0.0000000000000000000000001</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> = X + Y.</code> </pre> <br><p>  Comme vous pouvez le constater, notre augmentation est pass√©e inaper√ßue.  Nous essayons de r√©soudre le probl√®me, illustrant simultan√©ment l'une des fonctionnalit√©s de la biblioth√®que - la mise √† l'√©chelle automatique: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tiny_eapa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X1 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>&gt;&gt;), X2 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">25</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"0.0000000000000000000000001"</span></span>&gt;&gt;), &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0000000000000000000000001"</span></span>&gt;&gt; = eapa_int:to_float(eapa_int:add(X1, X2)).</code> </pre> <br><h3 id="perepolnenie-razryadnoy-setki">  D√©bordement de la grille de bits </h3><br><p>  En plus des probl√®mes associ√©s aux petits nombres, le d√©bordement est un probl√®me √©vident et significatif. </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">float_overflow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function"> -&gt;</span></span> <span class="hljs-number"><span class="hljs-number">1.0</span></span> = <span class="hljs-number"><span class="hljs-number">9007199254740991.0</span></span> - <span class="hljs-number"><span class="hljs-number">9007199254740990.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> = <span class="hljs-number"><span class="hljs-number">9007199254740992.0</span></span> - <span class="hljs-number"><span class="hljs-number">9007199254740991.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span> = <span class="hljs-number"><span class="hljs-number">9007199254740993.0</span></span> - <span class="hljs-number"><span class="hljs-number">9007199254740992.0</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span> = <span class="hljs-number"><span class="hljs-number">9007199254740994.0</span></span> - <span class="hljs-number"><span class="hljs-number">9007199254740993.0</span></span>.</code> </pre> <br><p>  Comme vous pouvez le voir dans le test, √† un moment donn√©, la diff√©rence cesse d'√™tre √©gale √† 1,0, ce qui est √©videmment un probl√®me.  L'EAPA r√©sout √©galement ce probl√®me: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">float_overflow_eapa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X11 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740992.0"</span></span>&gt;&gt;), X21 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740991.0"</span></span>&gt;&gt;), &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>&gt;&gt; = eapa_int:to_float(<span class="hljs-number"><span class="hljs-number">1</span></span>, eapa_int:sub(X11, X21)), X12 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740993.0"</span></span>&gt;&gt;), X22 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740992.0"</span></span>&gt;&gt;), &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>&gt;&gt; = eapa_int:to_float(<span class="hljs-number"><span class="hljs-number">1</span></span>, eapa_int:sub(X12, X22)), X13 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740994.0"</span></span>&gt;&gt;), X23 = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"9007199254740993.0"</span></span>&gt;&gt;), &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>&gt;&gt; = eapa_int:to_float(<span class="hljs-number"><span class="hljs-number">1</span></span>, eapa_int:sub(X13, X23)).</code> </pre> <br><h3 id="opasnaya-redukciya">  R√©duction dangereuse </h3><br><p>  Le test suivant montre l'occurrence d'une r√©duction dangereuse.  Ce processus s'accompagne d'une diminution catastrophique de la pr√©cision des calculs dans les op√©rations o√π la valeur r√©sultante est bien inf√©rieure √† l'entr√©e.  Dans notre cas, le r√©sultat de la soustraction 1. </p><br><p>  Nous montrons qu'√† Erlang ce probl√®me est pr√©sent: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reduction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X = float(<span class="hljs-number"><span class="hljs-number">87654321098765432</span></span>), Y = float(<span class="hljs-number"><span class="hljs-number">87654321098765431</span></span>), <span class="hljs-number"><span class="hljs-number">16.0</span></span> = XY. <span class="hljs-comment"><span class="hljs-comment">%% has to be 1.0</span></span></code> </pre> <br><p>  Il s'est av√©r√© 16,0 au lieu du 1,0 attendu.  Essayons de r√©soudre cette situation: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reduction_eapa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"87654321098765432"</span></span>&gt;&gt;), Y = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"87654321098765431"</span></span>&gt;&gt;), &lt;&lt;<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>&gt;&gt; = eapa_int:to_float(eapa_int:sub(X, Y)).</code> </pre> <br><h3 id="drugie-osobennosti-arifmetiki-s-plavayuschey-tochkoy-v-erlang">  Autres caract√©ristiques de l'arithm√©tique en virgule flottante √† Erlang </h3><br><p>  Commen√ßons par ignorer le z√©ro n√©gatif. </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eq</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> = list_to_float(<span class="hljs-string"><span class="hljs-string">"0.0"</span></span>) =:= list_to_float(<span class="hljs-string"><span class="hljs-string">"-0.0"</span></span>).</code> </pre> <br><p>  Je veux juste dire que l'EAPA conserve ce comportement: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eq_eapa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function">-&gt;</span></span> X = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"0.0"</span></span>&gt;&gt;), Y = eapa_int:with_val(<span class="hljs-number"><span class="hljs-number">1</span></span>, &lt;&lt;<span class="hljs-string"><span class="hljs-string">"-0.0"</span></span>&gt;&gt;), <span class="hljs-literal"><span class="hljs-literal">true</span></span> = eapa_int:eq(X, Y).</code> </pre> <br><p>  car il est valide.  Erlang n'a pas de syntaxe et de traitement clairs du NaN et des infinis, ce qui donne lieu √† un certain nombre de fonctionnalit√©s, par exemple: </p><br><pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">1&gt; </span></span>math:sqrt(list_to_float(<span class="hljs-string"><span class="hljs-string">"-0.0"</span></span>)). <span class="hljs-number"><span class="hljs-number">0.0</span></span></code> </pre> <br><p>  Le point suivant est la caract√©ristique du traitement des grands et des petits nombres.  Essayons de reproduire pour les plus petits: </p><br><pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">2&gt; </span></span>list_to_float(<span class="hljs-string"><span class="hljs-string">"0."</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">322</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">"1"</span></span>). <span class="hljs-number"><span class="hljs-number">1.0e-323</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>&gt; list_to_float(<span class="hljs-string"><span class="hljs-string">"0."</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">323</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">"1"</span></span>). <span class="hljs-number"><span class="hljs-number">0.0</span></span></code> </pre> <br><p>  et pour les grands nombres: </p><br><pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">4&gt; </span></span>list_to_float(<span class="hljs-string"><span class="hljs-string">"1"</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">308</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">".0"</span></span>). <span class="hljs-number"><span class="hljs-number">1.0e308</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; list_to_float(<span class="hljs-string"><span class="hljs-string">"1"</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">309</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">".0"</span></span>). ** exception error: bad argument</code> </pre> <br><p>  Voici quelques exemples suppl√©mentaires pour les petits nombres: </p><br><pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">6&gt; </span></span>list_to_float(<span class="hljs-string"><span class="hljs-string">"0."</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">322</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">"123456789"</span></span>). <span class="hljs-number"><span class="hljs-number">1.0e-323</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>&gt; list_to_float(<span class="hljs-string"><span class="hljs-string">"0."</span></span>++lists:duplicate(<span class="hljs-number"><span class="hljs-number">300</span></span>, $<span class="hljs-number"><span class="hljs-number">0</span></span>)++<span class="hljs-string"><span class="hljs-string">"123456789"</span></span>). <span class="hljs-number"><span class="hljs-number">1.23456789e-301</span></span></code> </pre> <br><pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">8&gt; </span></span><span class="hljs-number"><span class="hljs-number">0.123456789e-100</span></span> * <span class="hljs-number"><span class="hljs-number">0.123456789e-100</span></span>. <span class="hljs-number"><span class="hljs-number">1.524157875019052e-202</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>&gt; <span class="hljs-number"><span class="hljs-number">0.123456789e-200</span></span> * <span class="hljs-number"><span class="hljs-number">0.123456789e-200</span></span>. <span class="hljs-number"><span class="hljs-number">0.0</span></span></code> </pre> <br><p>  Les exemples ci-dessus confirment la v√©rit√© pour les projets Erlang: l'argent ne peut pas √™tre compt√© dans IEEE754. </p><br><h2 id="eapa-erlang-arbitrary-precision-arithmetic">  EAPA (Erlang Arbitrary-Precision Arithmetic) </h2><br><p>  EAPA est une extension NIF √©crite en rouille.  √Ä l'heure actuelle, le r√©f√©rentiel EAPA fournit l'interface eapa_int la plus simple et la plus pratique pour travailler avec des nombres √† virgule fixe.  Les fonctionnalit√©s de eapa_int sont les suivantes: </p><br><ol><li>  Manque d'effets du codage IEEE754 </li><li>  Prise en charge des grands nombres </li><li>  Pr√©cision configurable jusqu'√† 126 d√©cimales.  (en cours de mise en ≈ìuvre) </li><li>  Mise √† l'√©chelle automatique </li><li>  Prise en charge de toutes les op√©rations de base sur les num√©ros </li><li>  Tests plus ou moins complets, y compris bas√©s sur la propri√©t√©. </li></ol><br><p>  Interface <code>eapa_int</code> : </p><br><ul><li>  <code>with_val/2</code> - traduction d'un nombre √† virgule flottante en une repr√©sentation fixe, qui peut √™tre utilis√©e, y compris en toute s√©curit√©, en json, xml. </li><li>  <code>to_float/2</code> - traduction d'un nombre √† virgule fixe en nombre √† virgule flottante avec une pr√©cision donn√©e. </li><li>  <code>to_float/1</code> - traduire un nombre √† virgule fixe en nombre √† virgule flottante. </li><li>  <code>add/2</code> - la somme de deux nombres </li><li>  <code>sub/2</code> - diff√©rence </li><li>  <code>mul/2</code> - multiplication </li><li>  <code>divp/2</code> - division </li><li>  <code>min/2</code> - le minimum de nombres </li><li>  <code>max/2</code> - le maximum des nombres </li><li>  <code>eq/2</code> - v√©rifier l'√©galit√© des nombres </li><li>  <code>lt/2</code> - v√©rifiez que le nombre est inf√©rieur </li><li>  <code>lte/2</code> - v√©rification inf√©rieure √† √©gale </li><li>  <code>gt/2</code> - v√©rifier que le nombre est sup√©rieur </li><li>  <code>gte/2</code> - la v√©rification est plus que √©gale </li></ul><br><p>  Le code EAPA se trouve dans le r√©f√©rentiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/Vonmo/eapa</a> </p><br><p>  Quand devriez-vous utiliser eapa_int?  Par exemple, si votre application fonctionne avec de l'argent ou si vous devez effectuer des op√©rations de calcul de mani√®re pratique et pr√©cise sur des nombres tels que 92233720368547758079223372036854775807.92233720368547758079223372036854775807, vous pouvez utiliser l'EAPA en toute s√©curit√©. </p><br><p>  Comme toute solution, l'EAPA est un compromis.  Nous obtenons la pr√©cision n√©cessaire en sacrifiant la m√©moire et la vitesse de calcul.Les tests de performance et les statistiques collect√©s sur des syst√®mes r√©els montrent que la plupart des op√©rations sont effectu√©es dans la plage de 3 √† 30 Œºs.  Ce point doit √©galement √™tre pris en compte lors du choix d'une interface √† point fixe EAPA. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Bien s√ªr, il est loin d'√™tre toujours n√©cessaire de r√©soudre de tels probl√®mes sur Erlang ou Elixir, mais lorsqu'un probl√®me survient et qu'un outil adapt√© n'est pas trouv√©, il faut inventer une solution. <br>  Cet article est une tentative de partager l'outil et l'exp√©rience avec la communaut√©, dans l'espoir que pour certaines personnes cette biblioth√®que sera utile et aidera √† gagner du temps. <br>  Que pensez-vous de l'argent √† Erlang? </p><br><p>  PS Le travail avec des nombres rationnels et complexes, ainsi que l'acc√®s natif aux types de pr√©cision arbitraire Integer, Float, Complex, Rational, seront trait√©s dans les publications suivantes.  Ne changez pas! </p><br><hr><br><p>  Mat√©riaux associ√©s: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ce que tout informaticien devrait savoir sur l'arithm√©tique √† virgule flottante</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ce que vous devez savoir sur l'arithm√©tique √† virgule flottante</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Num√©ros √† virgule flottante de la norme IEEE 754</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IEEE 754 - norme arithm√©tique binaire</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">virgule flottante</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">0.30000000000000004</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428111/">https://habr.com/ru/post/fr428111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428101/index.html">Comment automatiser avec Jenkins la cr√©ation et le roulement d'artefacts d'artefacts de mod√®le de m√©tadonn√©es pour les tables du r√©f√©rentiel</a></li>
<li><a href="../fr428103/index.html">Mitap √† Saint-P√©tersbourg: ing√©nierie des donn√©es et plus</a></li>
<li><a href="../fr428105/index.html">Blogger recommande: influencer le marketing</a></li>
<li><a href="../fr428107/index.html">Conteneurisation d'applications Angular 6 SPA Template ASP .NET Core 2.1</a></li>
<li><a href="../fr428109/index.html">Mur d'entreprise</a></li>
<li><a href="../fr428113/index.html">√Ä la question des courbes de B√©zier, de la vitesse Arduino et d'un site int√©ressant, ou comment j'ai pass√© le week-end</a></li>
<li><a href="../fr428115/index.html">D√©veloppement Web pour le commerce √©lectronique: 5 tendances technologiques pour 2019</a></li>
<li><a href="../fr428117/index.html">Processeurs tensoriels gratuits de Google dans le cloud collaboratif</a></li>
<li><a href="../fr428119/index.html">¬´Class-fields-proposition¬ª ou ¬´Qu'est-ce qui s'est mal pass√© dans tc39 commit¬ª</a></li>
<li><a href="../fr428121/index.html">Stan Drapkin. Pi√®ges de cryptographie de haut niveau dans .NET</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>