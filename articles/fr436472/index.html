<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî¶ ü§ΩüèΩ üôÖüèø Conf√©rence DEFCON 20. Capture en 60 secondes: d'un compte invit√© √† un administrateur de domaine Windows. Partie 1 üåÇ üë©üèø‚Äçüé® üõå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, je suis Zach Feysel, je vais parler rapidement, si c'est trop rapide, vous pouvez me ralentir. Le jour, je suis pentester, le soir je suis DJ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conf√©rence DEFCON 20. Capture en 60 secondes: d'un compte invit√© √† un administrateur de domaine Windows. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/436472/"> Bonjour, je suis Zach Feysel, je vais parler rapidement, si c'est trop rapide, vous pouvez me ralentir.  Le jour, je suis pentester, le soir je suis DJ et photographe, je peux √™tre trouv√© sur Twitter par @zfazel.  Les gens me demandent toujours des dipl√¥mes.  Je ne fais pas partie de ces personnes qui √©num√®rent un tas de dipl√¥mes, alors vous feriez mieux de me juger sur la base de cette pr√©sentation, et non sur le nombre de certificats que j'ai. <br><br><img src="https://habrastorage.org/webt/l3/kp/2g/l3kp2gz0xpfmgdk12en8bqyi4yq.jpeg"><br><br>  Un commentaire sans honte: nous avons peu de comp√©tition ici, en ce moment les gars de Chicago sont sur la piste 4, nous sommes tous de Chicago, levez rapidement la main qui est ici de Chicago.  Donc, je pense que j'ai perdu le pari.  Je serai DJ ce soir dans la piscine, donc si vous √™tes libre, bienvenue dans la bataille avec Kate Myers, apr√®s quoi je reviendrai √† Chicago pour une autre conf√©rence de hackers.  L'ann√©e derni√®re, 500 personnes √©taient pr√©sentes, cette ann√©e nous esp√©rons qu'il y aura plus d'invit√©s.  Mes 312 gars seront √©galement l√†, plus d'informations sur cette conf√©rence peuvent √™tre trouv√©es sur thotcon.org. <br><br>  Donc, pour ne pas perdre de temps: nous parlerons d'une alternative √† l'attaque Pass-the-hash appel√©e NTLM-Relay, d'un nouvel ensemble d'outils pour le relais inter-protocoles Cross Protocol Relaying pour les demandes d'authentification NTLM, de nouvelles m√©thodes d'authentification automatique du client et de nouvelles fins pour lesquelles vous pouvez utiliser Pass-the-hash. <br>  Commen√ßons par NTLM, pour ceux qui ne savent pas ce qu'est NTLM 101, le point peut √™tre √©nonc√© en moins de 10 minutes.  Alors qu'est-ce que LM / NTLM?  Il s'agit d'un r√©f√©rentiel de mots de passe et d'un protocole d'authentification r√©seau d√©velopp√©s par Microsoft pour une utilisation sur Windows.  Merde, mes diapositives sont en panne!  Ainsi, le hachage LM est un format de stockage des mots de passe utilisateur de moins de 15 caract√®res, le mot de passe est divis√© en 2 parties de 7 octets et est converti en majuscules.  J'esp√®re que vous pouvez voir √† quoi ressemblent les hachages LM et NTLM.  Je ne vais pas perdre de temps √† dire √† quel point le LM est mauvais et faible, vous le savez tous, et sinon, google. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/jl/rk/ge/jlrkge7x_ler-llqlbl4chy6jn8.jpeg"><br><br>  Un hachage NTLM est g√©n√©ralement sensible √† la casse, a une longueur illimit√©e, n'est pas divis√© en groupes de caract√®res et est l√©g√®rement plus fort que LM, mais il n'est pas non plus sans probl√®me.  Je vais maintenant en parler.  La premi√®re vuln√©rabilit√© est la possibilit√© d'une attaque Pass-the-hash, qui permet √† un pirate de se connecter √† un serveur distant qui utilise l'authentification client bas√©e sur les protocoles NTLM / LM.  D√©sol√©, les gars, j'ai m√©lang√© les diapositives, je les ai faites il y a 5 minutes, bref, LM craint. <br><br>  Qu'est-ce que l'authentification NTLM?  Il s'agit de l'authentification r√©seau pour les services distants.  Elle est n√©cessaire pour prouver que vous √™tes vraiment ce que vous vous appelez.  Le service s'ex√©cute g√©n√©ralement sur un ordinateur distinct, sur lequel vous souhaitez acc√©der aux ressources offertes par le service, par exemple, un serveur de fichiers est un service et les fichiers sont des ressources.  Dans une minute, nous verrons quels sont ces services. <br><br>  Nous pouvons √™tre confus lorsque nous parlons de NTLM v1, v2, NTLM 2, qu'il soit sign√© ou non, alors passons rapidement en revue l'authentification NTLM.  Lors de l'authentification, 3 types de messages sont envoy√©s. <br><br><img src="https://habrastorage.org/webt/xr/ub/mp/xrubmplrjtbebui7zomdfqkeuzu.jpeg"><br><br>  Le type 1 est la demande du client au serveur pour √©tablir un contact, quelque chose comme "Je veux m'authentifier".  Vous voyez le paquet fragment√©, captur√© par Wireshark, il y a des drapeaux pour prendre en charge l'authentification, le nom du poste de travail et son nom de domaine. <br><br>  Le message de type 2 est une r√©ponse du serveur.  Si vous avez remarqu√© dans le message de type 1 que nous ne savons pas encore qui est cet utilisateur, il a simplement demand√© √† se connecter au serveur et souhaite savoir si la demande est prise en charge. <br><br><img src="https://habrastorage.org/webt/wl/j0/v0/wlj0v0bz-jkpsykoklolampo0x8.jpeg"><br><br>  Vous voyez ici la r√©ponse du serveur NTML Challenge comme un ensemble de nombres qui change √† chaque fois.  La capture d'√©cran montre une r√©ponse statique qui peut √™tre utilis√©e pour cr√©er des ¬´tables arc-en-ciel¬ª.  Ainsi, le serveur r√©pond avec un message du second type: ¬´voici ce que je supporte, voici mon nom de domaine, voici mon nom de serveur¬ª.  Cette r√©ponse est utilis√©e pour ¬´saler¬ª le hachage de votre mot de passe, donc √† chaque fois qu'une r√©ponse unique est obtenue, et vous ne pouvez pas la r√©p√©ter encore et encore avec la m√™me demande. <br><br>  Message de type 3 - il s'agit du message d'authentification client. <br><br><img src="https://habrastorage.org/webt/mg/of/a8/mgofa83tlvbkexds9ksby3d4osu.jpeg"><br><br>  Il s'agit de la r√©ponse du serveur, qui est hach√©e avec le hachage de mot de passe pour le hachage NTML ainsi que le nom d'utilisateur, le nom du poste de travail et le nom de domaine et sa cl√© de session, si vous signez la session. <br><br>  Voici la version 1 de NTML. La version 2 de NTML est tr√®s similaire, mais des param√®tres suppl√©mentaires ont √©t√© ajout√©s au mot de passe de r√©ponse et √† l'appel du client afin de se prot√©ger contre l'utilisation de ¬´tables arc-en-ciel¬ª, c'est-√†-dire que le client utilise contre eux un √©l√©ment de hasard. <br><br>  Une autre chose dont nous devons parler est l'authentification Windows int√©gr√©e.  Il est n√©cessaire pour que, √† chaque fois, vous n'ayez pas √† entrer √† nouveau dans le syst√®me avec un mot de passe pour utiliser les ressources et les services.  Si vous √™tes connect√© √† un serveur de domaine ou √† un serveur Web interne, Windows ne vous demande pas de saisir un mot de passe, il demande simplement une API et en re√ßoit des informations que le syst√®me doit utiliser pour l'authentification. <br>  Dans le contexte de la s√©curit√© locale, HTTP prot√®ge en utilisant des zones de s√©curit√© approuv√©es, des sites approuv√©s ou des sites locaux en v√©rifiant uniquement un nom de domaine en un seul mot.  Je vais essayer de rafra√Æchir rapidement votre m√©moire.  Un domaine √† mot unique recherche d'abord un nom DNS sur les serveurs DNS, puis v√©rifie son h√¥te ou son nom d'h√¥te DNS et le retransmet.  Il v√©rifie la structure de votre nom complet, puis ex√©cute NBNS, qui est la demande de diffusion pour ce nom de domaine.  En fait, il demande au r√©seau: "h√©, je cherche un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nom</a> , connaissez-vous quelqu'un avec ce nom?", Distribuant cette requ√™te sur un r√©seau local en mode de diffusion multim√©dia MBNS. <br><br>  Comme je l'ai dit, puisque nous utilisons le protocole SMB partout, il n'y a pas de restrictions, nous avons juste une authentification automatique en utilisant SMB.  Cela pose quelques probl√®mes. <br><br>  Consid√©rez la m√©thode Pass-the-hash.  Les protocoles montrent que NTML n'utilise pas le mot de passe d'origine pour l'authentification, donc tout ce dont nous avons besoin est le hachage NTML lui-m√™me.  Nous pouvons acc√©der au hachage NTML √† l'aide de divers outils Windows, c'est-√†-dire extraire ce hachage du stockage local ou de la m√©moire.  Tout cela a √©t√© d√©crit dans d'autres discours, je vais juste vous rappeler rapidement l'essence du probl√®me pour montrer les diff√©rences entre les deux m√©thodes. <br>  Le fait est qu'en g√©n√©ral, pour ce Pass-the-hash, vous devez avoir acc√®s au niveau de l'administrateur syst√®me local, car avec un compte invit√©, vous n'aurez pas acc√®s au stockage local ou √† la m√©moire locale. <br><br>  Alors, qu'est-ce que le relais NTLM et en quoi est-il diff√©rent de la m√©thode Pass-the-hash?  Ils me disent constamment: "Ah, tu parles de Pass-the-hash!", Et je r√©ponds: "Non, je parle de Relais NTLM!".  La diff√©rence est que le relais NTLM ne n√©cessite pas de privil√®ges d'administrateur pour acc√©der au r√©seau ou au syst√®me.  En fait, vous vous connectez au r√©seau de l'int√©rieur ou de l'ext√©rieur et commencez √† travailler en tant qu'invit√©.  Il n'y a pas d'informations d'identification, il n'y a pas d'acc√®s au syst√®me, seule la demande est authentifi√©e si vous revenez aux types de messages 1,2,3 ci-dessus.  Il n'y a aucune v√©rification lorsque l'h√¥te r√©pond √† votre demande et s'assure que vous √™tes bien vous. <br>  Ce que nous faisons, c'est cr√©er un serveur frauduleux pour recevoir les demandes d'authentification, puis les relayer vers le serveur cible. <br><br>  √âcoutons l'histoire pour comprendre l'essence du probl√®me.  En 1996, lorsque Dominic Brezinsky a d√©couvert une vuln√©rabilit√© dans le processus d'authentification √† l'aide du protocole d'acc√®s CIFS, la premi√®re version du protocole SMB.  Apr√®s cela, ils ont d'abord parl√© de la possibilit√© d'utiliser le relais NTLM.  En 2001, NTLM a r√©ussi √† trouver un trou dans SMB.  Tout d'abord, un employ√© de Veracode, Christian Ryu (alias Dildog), l'a d√©clar√© lors d'une conf√©rence DefCon, puis le pirate Josh Bushbinder (alias Sir Dystic) a publi√© un code d'exploitation qui fonctionne avec cette vuln√©rabilit√©.  Nous avons utilis√© le protocole Telnet et la vuln√©rabilit√© du navigateur IE, o√π vous pouvez simplement taper telnet: // ip et vous authentifier automatiquement. <br><br><img src="https://habrastorage.org/webt/mn/z5/mc/mnz5mcfwjyklsnbgafwv6rkqtoq.jpeg"><br><br>  Apr√®s cela, la m√©thode de relais NTLM a commenc√© √† √™tre utilis√©e pour rediriger les demandes SMB vers d'autres h√¥tes ou vers son propre h√¥te.  Cela s'est poursuivi jusqu'en novembre 2008, lorsque Microsoft Windows a corrig√© les trous l√† o√π ils le pouvaient, emp√™chant la demande d'authentification NTLM de revenir avec le correctif MS08-068. <br><br>  Ainsi, nous avons perdu la possibilit√© de renvoyer une demande d'authentification √† notre h√¥te et nous ne pouvions la transmettre qu'√† d'autres h√¥tes en raison des fonctionnalit√©s de conception du protocole.  En 2008, un gars sous le surnom de Grutz a fait une d√©claration sur la mort de DefLon NTLM.  Je pense que ce fut l'une des meilleures performances de ces derni√®res ann√©es, car cela a eu un impact √©norme sur l'environnement de l'entreprise. <br><br><img src="https://habrastorage.org/webt/2a/3o/jt/2a3ojthljjqouilw7tkxdyhrkww.jpeg"><br><br>  Il a appel√© son instrument le nom du Pokemon Squirtle, et la technologie - "singe au milieu" par analogie avec "l'homme au milieu".  Cet outil a permis au relais NTLM d'√™tre ex√©cut√© via HTTP et a √©galement bien fonctionn√© avec SMB, recevant des demandes d'authentification. <br><br><img src="https://habrastorage.org/webt/zk/vw/0b/zkvw0bevvlrf-tkgcgofh2myqge.jpeg"><br><br>  Cette capture d'√©cran a √©t√© prise il y a deux jours et le d√©veloppement de son application Squirtle est toujours en cours.  J'ai d√©cid√© que vous connaissiez tous ces vuln√©rabilit√©s, dont nous parlons encore et encore des probl√®mes, car elles ne peuvent en aucun cas √™tre corrig√©es et se manifester partout.  J'appartiens √† l'environnement de l'entreprise, donc je suis bien conscient du probl√®me dont je me plains constamment: les sites ne font pas de cryptage SSL des demandes d'authentification, tout comme ils ne cryptent pas leurs cookies.  En 2010, une extension de navigateur Firefox appel√©e Firesheep a √©t√© lanc√©e. <br><br>  Vous connaissez probablement cet outil pour intercepter les cookies HTTP non chiffr√©s de sites Web populaires et d'autres sessions de travail avec des sites via Wi-Fi ou sniffing r√©seau, se faisant passer pour d'autres utilisateurs. <br><br><img src="https://habrastorage.org/webt/bq/wp/fk/bqwpfk8n_ufmlqpudkkukju9iqc.jpeg"><br><br>  Je me suis demand√© o√π les gens avaient-ils envie de cr√©er de tels outils.  Il s'av√®re que tout est une question de facilit√© d'utilisation.  Il est assez facile de cr√©er une application qui vous permet d'usurper l'identit√© d'une autre personne.  J'ai donc d√©cid√© de partir de la m√™me chose et de faire une application qui permettrait d'utiliser la m√©thode de relais NTLM pour montrer aux gens que c'est aussi simple que Firesheep. <br><br><img src="https://habrastorage.org/webt/rk/we/3g/rkwe3gmeq7t-edqk0jno3qqzwyu.jpeg"><br><br>  J'ai commenc√© √† travailler sur le relais NTLM pour voir comment la prise en charge multi-protocoles est possible.  Beaucoup de gens ont parl√© de la possibilit√© th√©orique d'un tel soutien, mais personne ne l'a mis en pratique.  Mon objectif √©tait donc de cr√©er Firesheep pour NTLM. <br>  J'ai d√©cid√© de commencer √† apprendre Ruby parce que j'allais √† l'origine int√©grer mon exploit dans Metasploit.  En 2012, je voulais aborder ce sujet lors des conf√©rences Black Hat et DefCon, mais mon rapport a √©t√© rejet√©.  Mes discours n'ont pas seulement √©t√© rejet√©s, j'ai re√ßu un faux email que DefCon a accept√© mon rapport.  Un ami a pens√© que ce serait tr√®s dr√¥le de me troller, c'est un idiot.  Il avait un ami ici dont la performance a √©t√© approuv√©e, et mon ami a ramass√© et m'a envoy√© le contenu de son e-mail.  Je n'ai pas fait attention √† l'en-t√™te, qui disait "From Nikita" et a paniqu√©, r√©alisant que je devrais parler √† DefCon dans une heure et demie, mais j'ai ensuite re√ßu une vraie lettre avec un refus. <br><br>  Pensez-vous que cela termine l'histoire?  Non, trois semaines plus tard, Nikita me dit: "H√©, nous avons une ouverture dimanche, quelqu'un a refus√© de participer, tu veux parler √† sa place?"  Je pensais que c'√©tait bien, mais j'ai r√©alis√© que j'avais tr√®s peu de temps avant la performance et j'ai commenc√© √† coder comme un fou, en essayant de tout finir √† temps. <br><br>  Quels √©taient donc mes probl√®mes?  Premi√®rement, les outils √©trangers ne pouvaient pas faire le travail Pentester dont j'avais besoin, ils manquaient cruellement de divers protocoles qui pouvaient renvoyer des demandes d'authentification.  La plupart des protocoles li√©s √† l'utilisation de SMB et HTTP, et aucun d'entre eux ne prenait en charge LDAP pour l'authentification MySQL, ou au moins pour tester les postes de travail distants, les VPN et autres. <br><br>  Un autre probl√®me est qu'ils ont tous transmis chaque demande √† la m√™me destination.  Autrement dit, nous avons re√ßu des donn√©es utilisateur, des comptes d'ordinateurs et envoy√© toute l'authentification √† une seule fin, par cons√©quent, nous n'avons pas pu identifier les utilisateurs avant l'authentification, c'est-√†-dire avant de recevoir un message de type 3.  Si vous vous souvenez de ces messages de type 1,2,3, alors le message de type 2 est la r√©ponse du serveur.  Il est unique pour chaque session, et je ne sais pas qui sont ces utilisateurs jusqu'√† ce qu'ils envoient le dernier message de type 3, et je ne sais pas quelle r√©ponse et √† partir de quel serveur l'utilisateur est.  Je m'int√©ressais √† la raison pour laquelle il n'y a pas d'outils qui feraient cela, alors j'ai examin√© de plus pr√®s les protocoles tels que SMB et HTTP, nous en parlerons plus en d√©tail plus tard. <br><br>  Windows 8 et Windows 2012 prennent toujours en charge NTLM par d√©faut.  C'est effrayant parce que nous connaissons la vuln√©rabilit√© de ces protocoles, mais NTLM n'est pas parti.  Par cons√©quent, en tant que pentesters, nous informons les organisations qu'elles doivent se prot√©ger contre de telles attaques. <br>  J'ai donc voulu r√©soudre ce probl√®me et j'ai cr√©√© un outil appel√© ZackAttack.  Je sais que √ßa a l'air moche, mais nous avons parcouru tout un tas de noms, j'ai personnellement aim√© le dernier - ¬´NTLMv2?  Chienne s'il te plait ... ". <br><br><img src="https://habrastorage.org/webt/m-/2t/ho/m-2tho0orjti9rj9ytmo0su1jv0.jpeg"><br><br>  Que contient cet outil?  Je vais rapidement passer en revue ces diapositives, car je pense que vous avez d√©j√† √©t√© assez diverti.  ZackAttack se compose de plusieurs composants diff√©rents, nous parlerons de chacun d'eux et de la fa√ßon dont ils sont li√©s les uns aux autres. <br><br>  Tout d'abord, il existe un serveur HTTP SMB - il s'agit d'un serveur frauduleux qui accepte les demandes d'authentification.  Les clients ciblent donc ce serveur, s'authentifient et le serveur les maintient authentifi√©s.  Ensuite, nous avons un ensemble de r√®gles pour le fonctionnement automatique. <br><br>  Nous avons des clients pour de tels exploits automatiques, ainsi que des API que nous pouvons associer √† toute application tierce qui transf√®re les demandes de relais NTLM. <br><br><img src="https://habrastorage.org/webt/1o/xt/om/1oxtompzqtshvinccoxpb1yfzwe.jpeg"><br><br>  Enfin, nous avons une g√©n√©ration de charges utiles qui obligent les clients √† s'authentifier automatiquement pour nous. <br><br>  Que sont les serveurs frauduleux?  Premi√®rement, ils authentifient les utilisateurs et les enregistrent pour nous, plus tard je vous dirai comment nous les utilisons. <br><br><img src="https://habrastorage.org/webt/c2/ik/io/c2ikiockvkztijbnn4e-kcqg6ke.jpeg"><br><br>  Nous avons besoin de toutes ces personnes pour maintenir leur √©tat d'authentification.  Il existe de nombreux outils qui d√©sactivent les utilisateurs apr√®s la premi√®re authentification r√©ussie, mais notre outil ZackAttack maintient les utilisateurs authentifi√©s aussi longtemps que possible.  Sur Windows LAN pour SMB, cela se produit environ 30 fois avant que la connexion ne soit d√©connect√©e.  Nous devons donc savoir qui est cet utilisateur, tout en le gardant authentifi√©. <br><br>  La premi√®re demande d'authentification est un appel statique de type 112233. Ceux d'entre vous qui sont impliqu√©s dans le pentestage savent qu'il s'agit d'une sorte de t√¢che pour les ¬´tables arc-en-ciel¬ª.  Comme je l'ai dit, nous devons d√©couvrir qui est cet utilisateur, mais nous ne le savons pas avant d'avoir re√ßu le message de type 3, nous envoyons donc un tas d'appels.  J'appelle cela ¬´l'√©l√©ment d'Alzheimer¬ª lorsque le syst√®me oublie qui est l'utilisateur et lui demande de s'authentifier √† chaque fois pour se connecter sans fermer la session. <br><br>  La raison pour laquelle nous le faisons est que HTTP, WPAD et d'autres requ√™tes ne prennent pas toujours en charge les cookies.En outre, l'identification SMB via IP ou le port source Le port source ne fonctionne pas si vous essayez de le faire √† distance via Internet. <br><br>  Par cons√©quent, pour le serveur HTTP, nous utilisons une redirection 302 avec le param√®tre Keep-Alive, qui nous permet de garder la session ouverte pendant que le socket est ferm√©, et apr√®s nous √™tre authentifi√©s, nous savons qui ils sont et nous le savons jusqu'√† la fin de cette session. <br><br>  Avec SMB c'√©tait plus difficile, j'ai d√ª √©crire un serveur SMB personnalis√©, c'est un peu bogu√©, mais √ßa marche quand m√™me.  Je ne vais pas me plonger dans le m√©canisme d'authentification du protocole SMB, car cela prendra quelques heures, je vais donc l'expliquer bri√®vement.  Une fois que le serveur a re√ßu la demande d'authentification, il semble oublier qui est cet utilisateur et dire: "Oh, bonjour, ravi de vous rencontrer!"  "Cool, je veux me connecter!"  "Attendez, et qui √™tes-vous?" Et n√©cessite √† nouveau une demande d'authentification. <br><br>  Nous devons donc recevoir les demandes d'authentification qui arrivent sur les serveurs HTTP et SMB.  Beaucoup de gens demandent comment nous menons l'attaque de ¬´l'homme au milieu¬ª.  Il existe plusieurs fa√ßons diff√©rentes de faire en sorte que les gens s'authentifient aupr√®s de notre serveur, puis de les envoyer pour faire autre chose.  Par cons√©quent, consid√©rez la charge utile de notre outil. <br><br>  Tout d'abord, il s'agit de WPAD - un protocole de configuration automatique de proxy, qui vous permet de d√©terminer l'emplacement du fichier de configuration.  Sous Windows, lorsque vous essayez de vous connecter, comme vous le savez, une fen√™tre appara√Æt avec une petite coche ¬´trouver automatiquement mes param√®tres de connexion¬ª qui active WPAD.  Ce protocole envoie des demandes de v√©rification des diffusions DNS et r√©seau, afin que vous puissiez simuler ces demandes et y r√©pondre. <br><br>  Par d√©faut, sous Windows, l'ordinateur authentifie automatiquement le serveur WPAD via HTTP avec les informations d'identification utilisateur actuelles. <br><br>  18:00 min <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conf√©rence DEFCON 20. Capture en 60 secondes: d'un compte invit√© √† un administrateur de domaine Windows.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2e partie</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/nHU3ujyw_sQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des mat√©riaux plus int√©ressants?  Soutenez-nous en passant une commande ou en le recommandant √† vos amis, une <b>r√©duction de 30% pour les utilisateurs Habr sur un analogue unique de serveurs d'entr√©e de gamme que nous avons invent√©s pour vous:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toute la v√©rit√© sur VPS (KVM) E5-2650 v4 (6 c≈ìurs) 10 Go DDR4 240 Go SSD 1 Gbps √† partir de 20 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'√† 24 c≈ìurs et jusqu'√† 40 Go de DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 c≈ìurs) 10 Go DDR4 240 Go SSD 1 Gbit / s jusqu'au printemps gratuitement</b> lors du paiement pendant <b>six</b> mois, vous pouvez commander <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV √† partir de 249 $</a> aux Pays-Bas et aux √âtats-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©ation d'un b√¢timent d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436472/">https://habr.com/ru/post/fr436472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436458/index.html">Progr√®s et battage m√©diatique dans la recherche en IA</a></li>
<li><a href="../fr436460/index.html">Le choix de la technologie, de l'architecture et du design dans les projets logiciels - sans esp√®ces</a></li>
<li><a href="../fr436464/index.html">2. Analyse du journal des points de contr√¥le: SmartEvent</a></li>
<li><a href="../fr436466/index.html">Electron: d√©veloppement d'applications de bureau en HTML, CSS et JavaScript</a></li>
<li><a href="../fr436468/index.html">Exp√©rience l√©gislative avec l'innovation num√©rique</a></li>
<li><a href="../fr436474/index.html">Conf√©rence DEFCON 20. Capture en 60 secondes: d'un compte invit√© √† un administrateur de domaine Windows. 2e partie</a></li>
<li><a href="../fr436476/index.html">Cloud pour les assureurs</a></li>
<li><a href="../fr436480/index.html">J'ai fait un bot qui communique avec les recruteurs pour moi, et j'ai aim√©</a></li>
<li><a href="../fr436482/index.html">Advanced Three.js: mat√©riaux de shader et post-traitement</a></li>
<li><a href="../fr436484/index.html">O√π trouver les param√®tres DNS sur MacOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>