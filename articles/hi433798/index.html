<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСГ ЁЯСОЁЯП╝ ЁЯМЗ HomeKit рдФрд░ ioBroker рдЪрд▓реЛ рдШрд░ рдкрд░ рджреЛрд╕реНрдд рдмрдирд╛рддреЗ рд╣реИрдВ ЁЯСП ЁЯзСЁЯП╗ ЁЯзСЁЯП┐тАНЁЯдЭтАНЁЯзСЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирд┐рд╕реНрд╕рдВрджреЗрд╣, рдРрдкреНрдкрд▓ рдЖрдИрдУрдПрд╕ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдореЛрдмрд╛рдЗрд▓ рдУрдПрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЖрдзреБрдирд┐рдХ рд╕реНрд╡рдЪрд╛рд▓рди рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдЗрд╕ рдкрд╛рд░рд┐рд╕реНрдерд┐рддрд┐рдХреА рддрдВрддреНрд░ рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд░рдиреЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HomeKit рдФрд░ ioBroker рдЪрд▓реЛ рдШрд░ рдкрд░ рджреЛрд╕реНрдд рдмрдирд╛рддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/iobroker/blog/433798/"><p><img src="https://habrastorage.org/webt/r6/5c/kp/r65ckpg2b-xatrgqefbyo7lflxa.png"></p><br><p>  рдирд┐рд╕реНрд╕рдВрджреЗрд╣, рдРрдкреНрдкрд▓ рдЖрдИрдУрдПрд╕ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдореЛрдмрд╛рдЗрд▓ рдУрдПрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЖрдзреБрдирд┐рдХ рд╕реНрд╡рдЪрд╛рд▓рди рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдЗрд╕ рдкрд╛рд░рд┐рд╕реНрдерд┐рддрд┐рдХреА рддрдВрддреНрд░ рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд░рдиреЗ рдФрд░ рдЗрдВрдЯрд░рдСрдкрд░реЗрдмрд┐рд▓рд┐рдЯреА рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдареАрдХ рд╡реИрд╕рд╛ рд╣реА рд╣реИ рдЬреИрд╕рд╛ рдХрд┐ рд╣реЛрдордХрд┐рдЯ рдлреНрд░реЗрдорд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ iPhone / iPad / iWatch рд╕реНрдХреНрд░реАрди рд╕реЗ рд╕реНрдорд╛рд░реНрдЯ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдФрд░ рд╣рд╛рд▓ рд╣реА рдореЗрдВ, рдореИрдХ (macOS Mojave)ред </p><br><p>  рдЕрдзрд┐рдХрд╛рдВрд╢ рдСрдЯреЛрдореЗрд╢рди рд╕рд┐рд╕реНрдЯрдо (рдореБрдЭреЗ "рд╕реНрдорд╛рд░реНрдЯ рд╣реЛрдо" рдорд╛рд░реНрдХреЗрдЯрд┐рдВрдЧ рдирд╛рдо рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ) рдореЗрдВ рд╣реЛрдордХрд┐рдЯ рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╢рд╛рдорд┐рд▓ рдореЙрдбреНрдпреВрд▓ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╣рдореЗрд╢рд╛ рдпрд╣ рдкрддрд╛ рдирд╣реАрдВ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдЙрдирдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рд╣реЛрдо (рдпрд╛ рдИрд╡) рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдХреИрд╕реЗ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдпрд╛ рдЬрд╛рдПред </p><br><p>  рдЖрдЬ рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ ioBroker рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдпреЗ рд╣реЗрд░рдлреЗрд░ рдХреИрд╕реЗ рдХрд░реЗрдВ (рдпрд╣ рдПрдХ рдУрдкрди рдФрд░ рдлреНрд░реА рдСрдЯреЛрдореЗрд╢рди рд╕рд┐рд╕реНрдЯрдо рд╣реИ)ред  рд▓реЗрдХрд┐рди рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рднреА рдХрдИ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдореВрд░реНрдЦрддрд╛рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдирд╣реАрдВ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдХреБрдЫ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдФрд░ рджреГрд╖реНрдЯрд┐рдХреЛрдг рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдЬрд┐рд╕реЗ рдЬрд╛рдирдХрд░, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдЕрдиреНрдп рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  <em>"рдХреБрдЫ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдЬрд╛рдирдиреЗ рд╕реЗ рдХреБрдЫ рддрдереНрдпреЛрдВ рдХреА рдЕрдЬреНрдЮрд╛рдирддрд╛ рдХреА рднрд░рдкрд╛рдИ рдЖрд╕рд╛рдиреА рд╕реЗ рд╣реЛ рдЬрд╛рддреА рд╣реИред"</em> <em><br></em>  <em>рдХреНрд▓рд╛рдЙрдб рдПрдбреНрд░рд┐рдпрди рд╣реЗрд▓реНрд╡реЗрдЯрд┐рдпрд╕</em> </p><a name="habracut"></a><br><h3 id="iobroker-drayvery-ustroystva-i-sostoyaniya">  ioBrokerред  рдбреНрд░рд╛рдЗрд╡рд░, рдЙрдкрдХрд░рдг, рдФрд░ рдХрд╝рд╛рдиреВрди </h3><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рдпрд╣ рдмрддрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ ioBroker рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХреНрдпрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдХреИрд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛ рджреВрдВ рдХрд┐ ioBroker рд╕рд┐рд╕реНрдЯрдо рдореЙрдбреНрдпреВрд▓рд░ рд╣реИ, рдФрд░ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдореЙрдбреНрдпреВрд▓ рдХреЛ рдбреНрд░рд╛рдЗрд╡рд░ (рдпрд╛ рдПрдбреЗрдкреНрдЯрд░) рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рдбреНрд░рд╛рдЗрд╡рд░ рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдпрд╛ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рдПрдХ рдПрдХреАрдХрд░рдг рдореЙрдбреНрдпреВрд▓ рд╣реИ, рдЬреЛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛, рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдпрд╛ рдирд┐рд░реНрдорд╛рддрд╛ рджреНрд╡рд╛рд░рд╛ рдПрдХрдЬреБрдЯ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдПрдХ рдпрд╛ рдХрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ ioBroker рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ "рдбреНрд░реИрдЧ" рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдПрдХ рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдПрдХ рд╣реА рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рдХрдИ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ, рдЬреЛ рдХрд┐рд╕реА рднреА рд╕реЗрдЯрд┐рдВрдЧ рдореЗрдВ рднрд┐рдиреНрди рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдЕрджреНрд╡рд┐рддреАрдп рдФрд░ рдЕрдиреБрдкрдпреЛрдЧреА рд╣реИ, рдЗрд╕рдХреА рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдФрд░ рдХреНрд╖рдорддрд╛рдПрдВ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, ioBroker рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╣реА рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдЙрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд░рд╛рдЬреНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред  <strong>рдПрдХ рд░рд╛рдЬреНрдп</strong> рдПрдХ рдЖрдВрддрд░рд┐рдХ ioBroker рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ рдЬреЛ рдореВрд▓реНрдп рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред  рд░рд╛рдЬреНрдп рдХреЗ рдкрд░реНрдпрд╛рдпрд╡рд╛рдЪреА рдорд╛рдиреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ: рд╕рдВрдХреЗрдд, рдЧреБрдг, рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ, рдЧреБрдг, рдШрдЯрдирд╛рдПрдБред  рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг: "рддрд╛рдкрдорд╛рди", "рдЪрдордХ рд╕реНрддрд░", "рдмреИрдЯрд░реА рд╕реНрддрд░", "рдкрд╛рд╡рд░-рдСрди рдлреНрд▓реИрдЧ", "рддреНрд░реБрдЯрд┐ рдзреНрд╡рдЬ", "рдзреНрд╡рдЬ рджрдмрд╛рдиреЗ", "рдбрдмрд▓-рджрдмрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдЭрдВрдбрд╛", рдЖрджрд┐ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреНрд░рддреНрдпреЗрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/oc/mn/q_/ocmnq_d-zdyhjj7bflfxaa3dxb8.png" alt="рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рдВрд░рдЪрдирд╛" title="рд╡рд╕реНрддреБ рд╕рдВрд░рдЪрдирд╛"></p><br><p>  рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рд╕реВрдЪрдирд╛рддреНрдордХ рд▓реЛрдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рд╡реЗ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рд╣реЛрддреЗ рд╣реИрдВ - рдЙрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреНрд╡рд╛рд░рд╛ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред  рддрджрдиреБрд╕рд╛рд░, рдЬрдм рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ - рдпрд╣ рдбреЗрдЯрд╛ рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЬрдм рд╕реНрдерд┐рддрд┐ ioBroker (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреНрд╡рд╛рд░рд╛) рд╕реЗ рдмрджрд▓ рдЬрд╛рддреА рд╣реИ - рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрдХреЗрдд рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЙрд╕реЗ рддрджрдиреБрд╕рд╛рд░ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП (рдпрд╣ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╣реА рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдЪрд╛рд▓рдХ рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ)ред </p><br><p>  рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдПрдХрд▓ рдкреЗрдбрд╝ (рд░рдЬрд┐рд╕реНрдЯреНрд░реА) рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЙрдиреНрд╣реЗрдВ рдкрд╣рд▓реЗ рдбрд┐рд╡рд╛рдЗрд╕ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЕрднреА рднреА рдЪреИрдирд▓рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рдФрд░ рдлрд┐рд░ рдЪрд╛рд▓рдХ рдЙрджрд╛рд╣рд░рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ред </p><br><p>  рдПрдордХреНрдпреВрдЯреАрдЯреА рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╡рд┐рд╖рдпреЛрдВ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдЗрд╕ рддрд░рд╣ рдХреЗ рд░рд╛рдЬреНрдп рдХреЗ рдкреЗрдбрд╝ рдореЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдлрд┐рдЯ рд╣реЛрддреА рд╣реИред  рдЗрд╕ рддрд░рд╣, рдЖрдк рдЕрддрд┐рд░рд┐рдХреНрдд рдЙрдкрдХрд░рдг рдпрд╛ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдПрдордХреНрдпреВрдЯреАрдЯреА рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ MQTT рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ - рд░рд╛рдЬреНрдп рд╡реГрдХреНрд╖ рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рд╢рд╛рдЦрд╛ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред </p><br><p>  рдФрд░ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдСрдирд▓рд╛рдЗрди рд╕реЗрд╡рд╛рдПрдВ рд╣реИрдВ рдЬреЛ рдЙрдкрдпреЛрдЧреА рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреА рд╣реИрдВ рдФрд░ / рдпрд╛ рдЕрдиреНрдп рдЙрдкрдХрд░рдг (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдХрд╛рд░ рдЕрд▓рд╛рд░реНрдо) рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдмрдирд╛рддреА рд╣реИрдВред  рдЗрди рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рджрд░реНрд╢рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/xi/qk/ay/xiqkay8bgotkcb7qjhouj5-zln4.png" alt="рд░рд╛рдЬрдХреАрдп рд╡реГрдХреНрд╖" title="рд░рд╛рдЬрдХреАрдп рд╡реГрдХреНрд╖"></p><br><p>  рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, ioBroker рдореЗрдВ рдПрдХ рдЙрдкрдХрд░рдг рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдПрдХ рд╕реЗрдЯ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><h3 id="homekit-aksessuary-servisy-i-harakteristiki">  HomeKitред  рд╕рд╛рдорд╛рди, рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╡рд┐рдирд┐рд░реНрджреЗрд╢реЛрдВ </h3><br><p>  рдЕрдм рд╣реЛрдордХрд┐рдЯ рдХреА рдУрд░ рдореБрдбрд╝реЗрдВред  рдпрд╣рд╛рдВ рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рд╡рд░реНрдЧреАрдХрд░рдг, рдЙрдирдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/xk/ch/8m/xkch8mdj6gv4zxw5g-kapazvuyy.png" alt="рд╣реЛрдордХрд┐рдЯ рдбрд┐рд╡рд╛рдЗрд╕ рд╢реНрд░реЗрдгрд┐рдпрд╛рдБ" title="рд╣реЛрдордХрд┐рдЯ рдбрд┐рд╡рд╛рдЗрд╕ рд╢реНрд░реЗрдгрд┐рдпрд╛рдВ"></p><br><p>  <strong>рд╕рд╣рд╛рдпрдХ рдЙрдкрдХрд░рдг</strong> рдПрдХ рднреМрддрд┐рдХ рдЙрдкрдХрд░рдг рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИред  рдЧреМрдг рдХреЗ рдкрд╛рд╕ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдореВрд╣ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╢реНрд░реЗрдгреА рд╣реИ</a> ред </p><br><p>  <strong>рд╕реЗрд╡рд╛рдУрдВ</strong> рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ рдЬреЛ рдПрдХ рд╕рд╣рд╛рдпрдХ рдХреЗ рдкрд╛рд╕ рд╣реИред  рдПрдХ рдЧреМрдг рдореЗрдВ рдХрдИ рд╕реЗрд╡рд╛рдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред </p><br><p>  рд╕реЗрд╡рд╛рдПрдВ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИрдВ: рджреАрдкрдХ, рдмреИрдЯрд░реА, рдмрдЯрди, рд╡рд╛рдпреБ рдЧреБрдгрд╡рддреНрддрд╛ рд╕реЗрдВрд╕рд░, рджрд░рд╡рд╛рдЬрд╛, рдПрдпрд░ рдХреНрд▓реАрдирд░, рдХреИрдорд░рд╛ редред </p><br><p>  рдпрд╣ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдбрд┐рд╕реНрдкреНрд▓реЗ, рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕реЗрдЯ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИред </p><br><p>  <strong>рд╡рд┐рд╢реЗрд╖рддрд╛</strong> рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ / рдЧреБрдгреЛрдВ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ рдЬреЛ рдПрдХ рд╕реЗрд╡рд╛ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред  рдпрд╣ рд╡рд╣ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИ рдЬреЛ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ рдЪрд╛рд▓реВ рд╣реИ, рджреАрдкрдХ рдХрд╛ рдЪрдордХ рд╕реНрддрд░, рдпрд╛ рдмрдЯрди рдХрд┐рддрдиреА рдмрд╛рд░ рджрдмрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдПрдХ рдПрдХрд▓ рд╕реЗрд╡рд╛ рдореЗрдВ рдХрдИ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/2f/rl/io/2frliotkqesh2zanlhpfiaskmaq.png" alt="рдСрдмреНрдЬреЗрдХреНрдЯ рд╕рдВрд░рдЪрдирд╛" title="рд╡рд╕реНрддреБ рд╕рдВрд░рдЪрдирд╛"></p><br><p>  рд╣реЛрдордХрд┐рдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд╣рд╛рдпрдХ рдЙрдкрдХрд░рдг рдХреА рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдкрдврд╝рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓рддреЗ рд╣реИрдВред  рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдорд╛рдиреЛрдВ рдХреЛ рдЙрдиреНрд╣реЗрдВ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрдордХрд┐рдЯ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рд╣реЛрдордХрд┐рдЯ рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдХреНрд░рдорд╢рдГ, рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдХрд┐рдирд╛рд░реЗ рд╕реЗ рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд╕рд╛рде рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, рд╣реЛрдо рдХрд┐рдЯ рдореЗрдВ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рдПрдХ рд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд╣рд╛рдпрдХ рдЙрдкрдХрд░рдг рд╣реИред </p><br><h3 id="yahka-stykuem-koncepcii">  Yahkaред  рд╣рдо рдЕрд╡рдзрд╛рд░рдгрд╛ рд╕реЗ рдЬреБрдбрд╝рддреЗ рд╣реИрдВ </h3><br><p>  рд╣реЛрдордХрд┐рдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, ioBroker <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╛рд╣рдХрд╛</a> рдЪрд╛рд▓рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рд╕реНрдерд╛рдкрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрддрд┐рд░рд┐рдХреНрдд рдореЙрдбреНрдпреВрд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛</a> рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП) - рдПрдХ рдкреНрд░рд╕рд┐рджреНрдз рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рд▓рд┐рдП рдПрдХ рдРрдб-рдСрди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/KhaosT/HAP-NodeJS</a> , рдЬреЛ рд▓реЛрдХрдкреНрд░рд┐рдп HomeBridge рдкреНрд░реЛрдЬреЗрдХреНрдЯ рднреА рдмрдирд╛рддрд╛ рд╣реИред  рдЗрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдЧреЗрдЯрд╡реЗ / рдмреНрд░рд┐рдЬ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ HomeKit рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рддрджрдиреБрд╕рд╛рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛, рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдирд╛, рд╣рдореЗрдВ рд╣реЛрдордХрд┐рдЯ рдФрд░ рд╣реЛрдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рддреИрдпрд╛рд░ рдбрд┐рд╡рд╛рдЗрд╕ рдорд┐рд▓рддрд╛ рд╣реИ, рдФрд░ рд╣рдо рд╕рд┐рд░реА рдХреЛ рдЗрд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдпрд╛рд╣рдХрд╛ рдЪрд╛рд▓рдХ рдХреЛ рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ, рдЙрдирдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛рдПрдВ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ (рд╣реЛрдордХрд┐рдЯ) рдФрд░ рд░рд╛рдЬреНрдпреЛрдВ (ioBroker) рдХреЗ рдкрддреНрд░рд╛рдЪрд╛рд░ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ, рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдЧреЗрдЯрд╡реЗ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЗрд╕реЗ рд╣реЛрдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдмрд╛рдж, рдЧреЗрдЯрд╡реЗ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЧрдП рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╣реЛрдо рдореЗрдВ рдЬреБрдбрд╝ рдЬрд╛рдПрдВрдЧреЗред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, "рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдирд╛рдо" рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ (рдпрд╣ рдХреЗрд╡рд▓ рд▓реИрдЯрд┐рди рдЕрдХреНрд╖рд░реЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рдВрдЫрдиреАрдп рд╣реИ) рдФрд░ рдкрд┐рди рдХреЛрдб рдпрд╛рдж рд░рдЦреЗрдВ (рдпрд╛ рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рд╕реЗрдЯ рдХрд░реЗрдВ)ред </p><br><p><img src="https://habrastorage.org/webt/mj/b9/lf/mjb9lfsfvknvbjjmec9x0nexnns.png" alt="рдЧреЗрдЯрд╡реЗ рд╕реЗрдЯрдЕрдк" title="рдЧреЗрдЯрд╡реЗ рдмреБрд▓реНрдЧрд╛рд░рд┐рдпрд╛"></p><br><div class="spoiler">  <b class="spoiler_title">рд╣рдо рд╣реЛрдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдирдпрд╛ рдПрдХреНрд╕реЗрд╕рд░реА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5k/m1/hr/5km1hrkrxh6whzmb8dn5zcvqtm4.png"><br><img src="https://habrastorage.org/webt/fo/p-/oz/fop-oz-o99nnegmciq7drkxjdyu.png"></p></div></div><br><p>  рдЕрдм рдЪрд▓реЛ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЛред  рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдЕрдЧрд░ ioBroker рдореЗрдВ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рд░рд╛рдЬреНрдпреЛрдВ рдХрд╛ рд╕реЗрдЯ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ HomeKit рдореЗрдВ рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд╕реЗрдЯ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛред  рдФрд░ рдпрд╣ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛ рдХрд┐ рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рдореВрд▓реНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реЛрдВред  рд▓реЗрдХрд┐рди рдЕрдХреНрд╕рд░ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рдбреЙрдХ рдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЛрдВ рдХреЗ рд╕рд╛рде рдЖрдирд╛ рд╣реЛрдЧрд╛ред  рдореИрдВ рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛, рдФрд░ рдЖрдкрдХреЛ рдЕрдиреНрдп рд╕рднреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╕реНрд╡рдпрдВ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, "рдЫрд╡рд┐ рдФрд░ рд╕рдорд╛рдирддрд╛ рдореЗрдВред" </p><br><p>  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рдЕрдиреБрд╡рд╛рдж рдХреЗ рд╕рд╛рде-рд╕рд╛рде рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдирд╛рдпрд╛</a> ред  рд╕рднреА рдкреНрд░рдХрд╛рд░ рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ <a href="">HAP-NodeJS рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ</a> рдЕрдиреБрд░реВрдк рд╣реИред </p><br><h3 id="datchik-temperatury">  рддрд╛рдкрдорд╛рди рд╕рдВрд╡реЗрджрдХ </h3><br>  рдпрд╣ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рд╣реИ - рдЖрдкрдХреЛ рдмрд╕ рдЗрддрдирд╛ рдХрд░рдирд╛ рд╣реИ рдХрд┐ рдПрдХ рд░рд╛рдЬреНрдп рдореЗрдВ рддрд╛рдкрдорд╛рди рдХрд╛ рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдореВрд▓реНрдп рд╣реИред  рдЗрд╕реЗ рдХрд╣реАрдВ рд╕реЗ рднреА рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рд╕реЗрдВрд╕рд░ рд╕реЗ рдпрд╛ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗрд╡рд╛рдУрдВ (рдореМрд╕рдо) рд╕реЗред <br><p>  рдЖрдкрдХреЛ рд╕реЗрдВрд╕рд░ рд╢реНрд░реЗрдгреА рдХрд╛ рдПрдХ рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ, рдФрд░ рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ рд╕реЗрд╡рд╛ рдХреЛ рдЙрдкрдХрд░рдг рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ, рдФрд░ рдЗрд╕ рд╕реЗрд╡рд╛ рдХреЛ рдПрдХ рдирд╛рдо рджреЗрдВред  рдЗрд╕ рд╕реЗрд╡рд╛ рдореЗрдВ 5 рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд░рдВрдЯ рдЯреЗрдВрдкрд░реНрд╕ред </p><br><p><img src="https://habrastorage.org/webt/xn/yr/k7/xnyrk7hwwcmtwhiy_kcbub-nlms.png" alt="рдЧреМрдг рдерд░реНрдорд╛рдореАрдЯрд░" title="рдЧреМрдВ рджрдХреНрд╖рд┐рдгрдореБрдЦреА"></p><br><p><img src="https://habrastorage.org/webt/j4/bj/bn/j4bjbnuijam7qadtoq9r9eh16ns.png" alt="рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ рд╕реЗрд╡рд╛" title="рддрд╛рдкрдорд╛рди рд╕реАрдорд╛ рд╕реЗрд╡рд╛"></p><br><p>  рдпрд╣ рд╡рд░реНрддрдорд╛рди рддрд╛рдкрдорд╛рди рдореЗрдВ рддрд╛рдкрдорд╛рди рдХреЗ рдЕрдиреБрд░реВрдк рд░рд╛рдЬреНрдп рдХреЗ рдирд╛рдо рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </p><br><p>  рдпрд╣рд╛рдВ рднреА HumiditySensor рдЖрд░реНрджреНрд░рддрд╛ рд╕реЗрд╡рд╛ рдЬреЛрдбрд╝реЗрдВ, рдФрд░ рд╣реЛрдордХрд┐рдЯ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдПрдХреНрд╕реЗрд╕рд░реА рдЖрдЗрдХрди рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p><img src="https://habrastorage.org/webt/ag/na/90/agna90qhvaz84v3qutrvu4dltei.png" alt="рд╣реНрдпреВрдорд┐рдбрд┐рдЯреА рд╕реЗрдВрд╕рд░ рд╕реЗрд╡рд╛" title="рд╣реНрдпреВрдорд┐рдбрд┐рдЯреА рд╕реЗрдВрд╕рд░ рд╕реЗрд╡рд╛"></p><br><p>  рдмрдЪрд╛рдУ, рдФрд░ рддреБрдо рд╣реЛ рдЧрдПред  рдЕрдм рдЖрдк рд╕рд┐рд░реА рдХреА рдУрд░ рд░реБрдЦ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЙрд╕рд╕реЗ рддрд╛рдкрдорд╛рди рдФрд░ рдЖрд░реНрджреНрд░рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/s4/cx/kg/s4cxkg72-7ycfuaentktjrhpdjy.png"></p><br><div class="spoiler">  <b class="spoiler_title">рд╕рд┐рд░реА рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ff/p9/tt/ffp9ttfpcj3_wcbt4ztgisnwxzi.png"><br><img src="https://habrastorage.org/webt/ax/7z/1i/ax7z1ioiynurem96c3gof_2gnha.png"></p></div></div><br><h3 id="batareyka">  рдмреИрдЯрд░реА </h3><br><p>  рдПрдХ рдФрд░ рд╕рд░рд▓ рд╕реЗрд╡рд╛ред  рдЗрд╕рдХреА рдЪрд╛рд▓ рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕реЗ рд▓рдЧрднрдЧ рдХрд┐рд╕реА рднреА рдПрдХреНрд╕реЗрд╕рд░реА рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  BatteryService рд╕реЗрд╡рд╛ рдЬреЛрдбрд╝реЗрдВ рдФрд░ BatteryLevel рд╡рд┐рд╢реЗрд╖рддрд╛ рдореЗрдВ рдмреИрдЯрд░реА рдЪрд╛рд░реНрдЬ рдХреЗ рдкреНрд░рддрд┐рд╢рдд рд╡рд╛рд▓реЗ рд░рд╛рдЬреНрдп рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдбреЗрдЯрд╛ рдореЗрдВ рдЪрд╛рд░реНрдЬ рдбреЗрдЯрд╛ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред </p><br><p><img src="https://habrastorage.org/webt/pd/4p/ib/pd4pibwilwjymthk2g30ldqneey.png" alt="рд╕реЗрд╡рд╛ BatteryService" title="рд╕реЗрд╡рд╛ рдмреИрдЯрд░реА рд╕реЗрд╡рд╛"></p><br><p>  рдЖрдк рддреБрд░рдВрдд "рдХрдо рдЪрд╛рд░реНрдЬ" (рд╡рд┐рд╢реЗрд╖рддрд╛ StatusLowBattery) рдХрд╛ рд╕рдВрдХреЗрдд рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрджрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд░рд╛рдЬреНрдп рдХрд╛ рдореВрд▓реНрдп 1 рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ, рддреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдЫрд╡рд┐ рдкрд░ рд╕рдВрдмрдВрдзрд┐рдд рдЖрдЗрдХрди рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдРрд╕рд╛ рд░рд╛рдЬреНрдп рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдо-рдмреИрдЯрд░реА рдЖрдЗрдХрди рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  рдЖрдкрдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдпрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╕реНрдерд┐рддрд┐ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВред </p><br><p>  рдЕрдм рдпрд╣ рдХреЗрд╡рд▓ рдЗрд╕ рд░рд╛рдЬреНрдп рдореЗрдВ рдореВрд▓реНрдп рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛ рд╣реБрдЖ рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ - рдпрд╣ рд╕рдЪ рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдЬрдм рдмреИрдЯрд░реА 30 рдкреНрд░рддрд┐рд╢рдд рддрдХ рдкрд╣реБрдВрдЪ рдЬрд╛рдПрдЧреАред </p><br><pre><code class="javascript hljs">createState(<span class="hljs-string"><span class="hljs-string">""</span></span>); on({<span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">"zigbee.0.00158d0001f41725.battery"</span></span>, <span class="hljs-attr"><span class="hljs-attr">change</span></span>: <span class="hljs-string"><span class="hljs-string">"ne"</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = obj.state.val; setState(<span class="hljs-string"><span class="hljs-string">"javascript.0."</span></span>, (value &lt;= <span class="hljs-number"><span class="hljs-number">30</span></span>)); });</code> </pre> <br><p>  рдкрд╣рд▓реЗ рднрд╛рдЧ рдХреЗ рдмрд╛рдж, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдХ рд╕реНрдерд┐рддрд┐ рдмрдирд╛рдПрдЧреА, рдФрд░ рдЗрд╕реЗ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рдЪреБрдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/tx/2z/6r/tx2z6r4deofbbram-k_muwaxut0.png"></p><br><p>  рдпрд╣ рдЪрд┐рд╣реНрди рд╕рд╛рдорд╛рди рдХреА рдЫрд╡рд┐рдпреЛрдВ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </p><br><p><img src="https://habrastorage.org/webt/9o/nu/it/9onuitzmxs8exjofr7cfkwtwrqi.png"></p><br><div class="spoiler">  <b class="spoiler_title">рдФрд░ рдЙрдкрдХрд░рдг рд╡рд┐рд╡рд░рдг</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fx/jg/av/fxjgavhu-spu27lskbzkmvb_dh8.png"></p></div></div><br><h3 id="lampy">  рд▓реИрдВрдк </h3><br><p>  рдкреНрд░рдХрд╛рд╢ рдмрд▓реНрдм рдЕрд▓рдЧ рд╣реИрдВ - рдЙрдЬреНрдЬреНрд╡рд▓, рдЧрд░реНрдо, рд▓рд╛рд▓ред  4 рдорд╛рдорд▓реЗ рд╣реИрдВ: </p><br><ul><li>  рд╕рд░рд▓ - рдкрд░ рдФрд░ рдмрдВрдж рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд </li><li>  Dimmable - рдЪрдордХ рд╕реНрддрд░ рджреНрд╡рд╛рд░рд╛ рднреА рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </li><li>  рддрд╛рдкрдорд╛рди рдХреЗ рд╕рд╛рде - рдЖрдк рдЪрдордХ рдХреЗ рддрд╛рдкрдорд╛рди рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </li><li>  рд░рдВрдЧ - рдЖрдк рдЪрдордХ рдХреЗ рд░рдВрдЧ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </li></ul><br><p>  рдЗрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП, рд▓рд╛рдЗрдЯрдмрд▓реНрдм рд╕реЗрд╡рд╛ рдореЗрдВ рдПрдХ рд╕рдВрдЧрдд рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ: </p><br><ul><li>  рдСрди - рдСрди / рдСрдл </li><li>  рдЪрдордХ - рдЪрдордХ рд╕реНрддрд░ </li><li>  рд╣реНрдпреВ - рдЫрд╛рдпрд╛ </li><li>  рд╕рдВрддреГрдкреНрддрд┐ - рд╕рдВрддреГрдкреНрддрд┐ </li><li>  рд░рдВрдЧ рддрд╛рдкрдорд╛рди - рд░рдВрдЧ рддрд╛рдкрдорд╛рди </li></ul><br><p>  рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, "рдСрди" рд╡рд┐рд╢реЗрд╖рддрд╛ рдореЗрдВ, рд╣рдо рд░рд╛рдЬреНрдп рдХреЛ рдЪрд╛рд▓реВ рдФрд░ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/7p/2j/l2/7p2jl2cqi7q8rbw98d_ytedxwke.png"></p><br><p>  рдпрджрд┐ рджреАрдкрдХ рдордВрдж рд╣реИ, рддреЛ рд╣рдо рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдЪрдордХ рд╕реНрддрд░ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/b6/da/n1/b6dan1fjltcn8sry8doex2hl6ck.png"></p><br><p>  рд╕рд╣реА рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕реНрд╡реАрдХрд╛рд░реНрдп рдореВрд▓реНрдпреЛрдВ рдХреЗ рдЕрдВрддрд░рд╛рд▓ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ! </p><br><p>  рдЙрджрд╛рд╣рд░рдг: рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рджреАрдкрдХ рдХреА рдЪрдордХ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд░рд╛рдЬреНрдп 0 рд╕реЗ 255 рддрдХ рдорд╛рди рд▓реЗ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣реЛрдордХрд┐рдЯ рдореЗрдВ рдпреЗ рдорд╛рди 0 рд╕реЗ 100 рдХреЗ рдЕрдВрддрд░рд╛рд▓ рддрдХ рд╕реАрдорд┐рдд рд╣реИрдВред рдЗрд╕ рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╛рд╣рдХрд╛ рдЪрд╛рд▓рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░реВрдкрд╛рдВрддрд░рдг рдХрд╛рд░реНрдпреЛрдВ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдлрд╝рдВрдХреНрд╢рди "рд╕реНрддрд░ 25" рдмрд╕ рдорд╛рдиреЛрдВ рдХреЗ рдЕрдВрддрд░рд╛рд▓ рдХреЛ 0..255 рдХреЛ рдЕрдВрддрд░рд╛рд▓ 0..100 (рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд) рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдкрдХрд╛ рджреАрдкрдХ рд░рдВрдЧреАрди рд╣реИ, рд▓реЗрдХрд┐рди рдирд┐рдореНрди рд░рдВрдЧ рдЖрд░рдЬреАрдмреА рд╣реИ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдард┐рдирд╛рдЗрдпрд╛рдБ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдпрд╣ рдпрд╛ рддреЛ рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдпреЛрдВ, рдпрд╛ рдПрдХ рдирдВрдмрд░ (рдпрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ) рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ рдПрдХ RGB рд░рдВрдЧ рд╕реНрдерд╛рди рд╕реЗ рджреВрд╕рд░реЗ XYB рд╕реНрдерд╛рди (рдпрд╣ рд╕реНрдерд╛рди HomeKit рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рдпрд╛ XY рд╡рд┐рдорд╛рди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ 2 рдирдП рд░рд╛рдЬреНрдп (рд╣реНрдпреВ рдФрд░ рд╕рдВрддреГрдкреНрддрд┐) рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣рдо RGB рд░рд╛рдЬреНрдп рд╕реЗ рдорд╛рдиреЛрдВ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрддред </p><br><div class="spoiler">  <b class="spoiler_title">рд░рдВрдЧ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдореА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       createState("Hue"); createState("Sat"); //      RGB- on({id: "Hue", ack: false, change: 'any'}, function (obj) {  var hue = parseInt(obj.state.val);  var sat = parseInt(getState('Sat').val);  var res = hsvToRgb(hue, sat, 100);  setRGB(parseInt(res[0]), parseInt(res[1]), parseInt(res[2])); }); //    RGB- function setRGB(r, g, b){  var val = ('00'+r.toString(16)).slice(-2)+('00'+g.toString(16)).slice(-2)+('00'+b.toString(16)).slice(-2);  // RGB-   setState('zigbee.0.00124b0014d016ab.color', val, false); } //   HSV   RGB function hsvToRgb(h, s, v) {  var r, g, b;  var i;  var f, p, q, t;   h = Math.max(0, Math.min(360, h));  s = Math.max(0, Math.min(100, s));  v = Math.max(0, Math.min(100, v));  s /= 100;  v /= 100;   if(s == 0) {      r = g = b = v;      return [          Math.round(r * 255),          Math.round(g * 255),          Math.round(b * 255)      ];  }   h /= 60;  i = Math.floor(h);  f = h - i;  p = v * (1 - s);  q = v * (1 - s * f);  t = v * (1 - s * (1 - f));   switch(i) {      case 0:          r = v;          g = t;          b = p;          break;       case 1:          r = q;          g = v;          b = p;          break;       case 2:          r = p;          g = v;          b = t;          break;       case 3:          r = p;          g = q;          b = v;          break;       case 4:          r = t;          g = p;          b = v;          break;       default: // case 5:          r = v;          g = p;          b = q;  }   return [      Math.round(r * 255),      Math.round(g * 255),      Math.round(b * 255)  ]; }</span></span></code> </pre> </div></div><br><p>  рд░рдВрдЧ рддрд╛рдкрдорд╛рди рдХреЛ рдЖрд╕рд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рдпрджрд┐ рдЖрдкрдХреЗ рджреАрдкрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдорд╛рдиреЛрдВ рдХреА рд╕реАрдорд╛ рдЬреНрдЮрд╛рдд рд╣реИ, рддреЛ рдЗрд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реЛрдордХреАрдЯ рдХреЗ</a> рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдЕрдВрддрд░рд╛рд▓ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдХреЗрд▓</a> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ)ред </p><br><p><img src="https://habrastorage.org/webt/f0/vm/xh/f0vmxhpcndendf_efjf9xrmjxke.png" alt="рд▓рд╛рдЗрдЯрдмрд▓реНрдм рд╕реЗрд╡рд╛" title="рд▓рд╛рдЗрдЯрдмрд▓реНрдм рд╕реЗрд╡рд╛"></p><br><p><img src="https://habrastorage.org/webt/et/sp/fg/etspfg0idwn5v-cun2hh2y9xmm0.png"></p><br><div class="spoiler">  <b class="spoiler_title">рджреАрдкрдХ рдореЗрдВ рдЧрд╣рд░рд╛рдкрди</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/w_/q8/8p/w_q88pboeca8hl0fygtssrjegim.png"><br><img src="https://habrastorage.org/webt/bt/5c/bc/bt5cbc59jttu8ibjev1hfnnwkdm.png"></p></div></div><br><h3 id="termostat">  рдерд░реНрдореЛрд╕реНрдЯреЗрдЯ </h3><br><p>  рдерд░реНрдореЛрд╕реНрдЯреИрдЯ - рд╕реЗрдЯ рддрд╛рдкрдорд╛рди (рдерд░реНрдореЛрд╕реНрдЯреИрдЯ рд╕реЗрд╡рд╛) рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдХрд░рдгред  рддрджрдиреБрд╕рд╛рд░, рдерд░реНрдореЛрд╕реНрдЯреИрдЯ рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛ рд╡рд╛рдВрдЫрд┐рдд рддрд╛рдкрдорд╛рди (рдЯрд╛рд░рдЧреЗрдЯрдиреИрд╕) рд╣реИред  рдирд┐рд░реНрдзрд╛рд░рд┐рдд рддрд╛рдкрдорд╛рди рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд░реНрддрдорд╛рди рддрд╛рдкрдорд╛рди (рд╡рд░реНрддрдорд╛рди рддрд╛рдкрдорд╛рди) рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдкреНрд░рдХреГрддрд┐ рдореЗрдВ рд╕реВрдЪрдирд╛рддреНрдордХ рд╣реИ (рдЪреВрдВрдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗрд╡рд▓ рд╕реЗрдВрд╕рд░ рд╕реЗ рдЗрд╕реЗ рдкрдврд╝рддрд╛ рд╣реИ)ред </p><br><p>  рд╣реЛрдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ, рдерд░реНрдореЛрд╕реНрдЯреИрдЯ рдореЗрдВ рд▓рдХреНрд╖реНрдп рддрд╛рдкрдорд╛рди рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╡рд░реНрддрдорд╛рди рддрд╛рдкрдорд╛рди рдХреЛ рдЯреНрд░реИрдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдореЗрд░реЗ рдерд░реНрдореЛрд╕реНрдЯреИрдЯ (Zont) рдореЗрдВ рд╕рд┐рд░реНрдл рдпреЗ рджреЛ рд░рд╛рдЬреНрдп рдереЗ - рд╡реЗ рд╕реЗрд╡рд╛ рдХреНрд▓рд╛рдЙрдб рдПрдкреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрд▓рдмреНрдз рдереЗред </p><br><p>  рд╣реЛрдордХрд┐рдЯ рдореЗрдВ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рд╕реБрдВрджрд░рддрд╛ рдХреЗ рд▓рд┐рдП, рдореБрдЭреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдкрдбрд╝рд╛: рд╣реАрдЯрд┐рдВрдЧ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рд╕рдХреНрд░рд┐рдп рд╣реИ (1), рд╣реАрдЯрд┐рдВрдЧ рдХреА рд▓рдХреНрд╖реНрдп рд╕реНрдерд┐рддрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╣реИ (3)ред </p><br><p><img src="https://habrastorage.org/webt/vn/dd/ey/vnddeyypjlofn2jkxrqwe5ybwuw.png" alt="рдерд░реНрдореЛрд╕реНрдЯреЗрдЯ рд╕реЗрд╡рд╛" title="рдЯреЗрдВрдмреЛ рдПрд╕реНрдЯреЗрдЯ рд╕реЗрд╡рд╛"></p><br><p><img src="https://habrastorage.org/webt/pk/9u/k3/pk9uk3vfurepl1kfgow5lrp66dc.png"></p><br><div class="spoiler">  <b class="spoiler_title">рддрд╛рдкрдорд╛рди рдЪрдпрди</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/_4/g8/co/_4g8coln1rlsodscr8sah8p_h9o.png"></p></div></div><br><h3 id="vorota">  рдЧреЗрдЯ </h3><br><p>  рдЧреЗрд░рд╛рдЬ рджрд░рд╡рд╛рдЬреЗ (рдЧреИрд░рд╛рдЬрдбреЙрд░реНрдкреЗрди рд╕реЗрд╡рд╛) рдХреЗ рд╕рд╛рде, рдерд░реНрдореЛрд╕реНрдЯреИрдЯ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╕рдм рдХреБрдЫ рдкреЗрдЪреАрджрд╛ рд╣реИред </p><br><p>  рдЙрдкрд▓рдмреНрдз рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ, рдЧреЗрдЯ рдореЗрдВ рдПрдХ рд▓рдХреНрд╖реНрдп рд░рд╛рдЬреНрдп (рдЯрд╛рд░рдЧреЗрдЯрд╕реНрдЯреЛрд░рд╕реНрдЯреЗрдЯ) рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЧреЗрдЯ рдХреЗ "рдЦреБрд▓реЗ" рдпрд╛ "рдмрдВрдж" рд╣реЛрдиреЗ рдХреА рд╣рдорд╛рд░реА рдЗрдЪреНрдЫрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдЧреЗрдЯ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ (CurrentDoorState) рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдХреНрдпрд╛ рд╡реЗ рдЦреБрд▓реЗ рдпрд╛ рдмрдВрдж рд╣реИрдВ, рдпрд╛ рд╢рд╛рдпрдж рд╡реЗ рдЦреБрд▓реЗ рдпрд╛ рдмрдВрдж рд╣реИрдВ? </p><br><p>  рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрдИ рд╕реВрдЪрдирд╛ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рд╕рд╛рде ioBroker рдореЗрдВ mqtt рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреНрд╡рд╛рд░ рдЦреЛрд▓реЗ рдЧрдП рдереЗ: </p><br><ul><li>  рдЧреЗрдЯ рдХреЗ рдЦреБрд▓реЗрдкрди рдХрд╛ рд╕рдВрдХреЗрдд (OB) </li><li>  рдЧреЗрдЯ рдХреЗ рдЖрдВрджреЛрд▓рди рдХрд╛ рд╕рдВрдХреЗрдд (LW) </li></ul><br><p><img src="https://habrastorage.org/webt/aw/b3/ip/awb3ipo5vz8qrn8jawhcfunuouc.png" alt="рдЧреЗрд░рд╛рдЬ рджрд░рд╡рд╛рдЬрд╛ рдирд┐рдпрдВрддреНрд░рдг рд░рд╛рдЬреНрдпреЛрдВ" title="рдбреЛрд░ рдХрдВрдЯреНрд░реЛрд▓ рд╕реНрдЯреЗрдЯреНрд╕"></p><br><p>  рдЗрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЖрдк рдЧреЗрдЯ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><ul><li>  рдпрджрд┐ рдХреЛрдИ рдУрдмреА рдФрд░ рдХреЛрдИ рдбреАрд╡реА рдирд╣реАрдВ рд╣реИ, рддреЛ рджреНрд╡рд╛рд░ рдмрдВрдж рд╣реИрдВ </li><li>  рдпрджрд┐ рдХреЛрдИ рдУрдмреА рдирд╣реАрдВ рд╣реИ рдФрд░ рдПрдХ рдбреАрд╡реА рд╣реИ, рддреЛ рдЧреЗрдЯ рдЦреБрд▓рддрд╛ рд╣реИ </li><li>  рдЕрдЧрд░ рдХреЛрдИ рдУрдмреА рдФрд░ рдХреЛрдИ рдбреАрд╡реА рд╣реИ, рддреЛ рдЧреЗрдЯ рдЦреБрд▓реЗ рд╣реИрдВ </li><li>  рдпрджрд┐ рдХреЛрдИ рдУрдмреА рд╣реИ рдФрд░ рдПрдХ рдбреАрд╡реА рд╣реИ, рддреЛ рдЧреЗрдЯ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ </li></ul><br><p>  рдЧреЗрдЯ рдЦреЛрд▓рдиреЗ рдФрд░ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреЗрдд рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рдореЗрд░реЗ рдкрд╛рд╕ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдп рд╣реИрдВ (рдпрд╣ рдПрдХ рд░рд╛рдЬреНрдп рдХреЗ рд╕рд╛рде рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рдкрд╛рд╕ рджреЛ рд╣реИрдВ), рдЬреЛ рдЧреЗрдЯ рдХрдВрдЯреНрд░реЛрд▓ рдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЛ mqtt рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддреЗ рд╣реИрдВ: </p><br><ul><li>  рд╕рд┐рдЧреНрдирд▓ рдЦреЛрд▓рдирд╛ </li><li>  рдмрдВрдж рд╣реЛрдиреЗ рдХрд╛ рд╕рдВрдХреЗрдд </li></ul><br><p>  рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ "рдХреНрд▓рд┐рдХ" рдмрдЯрди рдХреЛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдорд╛рди рдХреЛ рд╕рд╣реА рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВ, рдФрд░ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рдЗрд╕реЗ рдЧрд▓рдд рдкрд░ рд░реАрд╕реЗрдЯ рдХрд░реЗрдВред  рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ, HomeKit рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдФрд░ рд░рд╛рдЬреНрдп рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдерд╛ - "рдЧреЗрдЯ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рд╛рдЬреНрдп", рдЬрдм рдмрджрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЧреЗрдЯ рдХреЗ рдЦреБрд▓реЗрдкрди рдХрд╛ рд╕рдВрдХреЗрдд рд▓рдХреНрд╖реНрдп рд░рд╛рдЬреНрдп рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдпрд╛рдиреА рд▓рдХреНрд╖реНрдп рдХреНрдпрд╛ рд▓рдХреНрд╖реНрдп рдХрд░реЗрдЧрд╛): </p><br><ul><li>  рдпрджрд┐ CA "рдмрдВрдж" рд╣реИ рдФрд░ рдХреЛрдИ DV рдирд╣реАрдВ рд╣реИ, рддреЛ рдЧреЗрдЯ рдмрдВрдж рд╣реИ </li><li>  рдпрджрд┐ CA "рдмрдВрдж" рд╣реИ рдФрд░ рдПрдХ DV рд╣реИ, рддреЛ рджреНрд╡рд╛рд░ рдЦреБрд▓реЗ рд╣реИрдВ </li><li>  рдпрджрд┐ CA "рдЦреБрд▓рд╛" рд╣реИ рдФрд░ рдХреЛрдИ DV рдирд╣реАрдВ рд╣реИ, рддреЛ рдЧреЗрдЯ рдЦреБрд▓рд╛ рд╣реИ </li><li>  рдпрджрд┐ CA "рдЦреБрд▓рд╛" рд╣реИ рдФрд░ DV рд╣реИ, рддреЛ рдЧреЗрдЯ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ </li></ul><br><p>  рд╣рдо рдПрдХ рдЕрд▓рдЧ рд░рд╛рдЬреНрдп "рд╡рд░реНрддрдорд╛рди рдЧреЗрдЯ рд░рд╛рдЬреНрдп" рднреА рдмрдирд╛рдПрдВрдЧреЗ, рдФрд░ рд╣рдо рдЗрд╕реЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╕рдВрдХреЗрддреЛрдВ рдХреЗ рдореВрд▓реНрдп рдФрд░ рд▓рдХреНрд╖реНрдп рд░рд╛рдЬреНрдп рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реБрдП рднрд░реЗрдВрдЧреЗред </p><br><div class="spoiler">  <b class="spoiler_title">рдЧреЗрд░рд╛рдЬ рджрд░рд╡рд╛рдЬреЗ рдХреЗ рд▓рд┐рдП рд░рд╛рдЬреНрдп рдкрд░рд┐рд╡рд░реНрддрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ</b> <div class="spoiler_text"><pre> <code class="javascript hljs">createState(<span class="hljs-string"><span class="hljs-string">"gate_0.current"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   createState("gate_0.target"); //   //    0,   300 on({id: "mqtt.0.gate.gpio.13", ack: false, val: 1}, function (obj) {  setStateDelayed("mqtt.0.gate.gpio.13", 0,  300); }); on({id: "mqtt.0.gate.gpio.12", ack: false, val: 1}, function (obj) {  setStateDelayed("mqtt.0.gate.gpio.12", 0,  300); }); //     on({id: "mqtt.0.gate.is_open", ack: false, val: 1}, function (obj) {  // ""  setState("javascript.0.gate_0.current", 0, true); }); on({id: "mqtt.0.gate.is_open", ack: false, val: 0}, function (obj) {  // ""  setState("javascript.0.gate_0.current", 1, true); }); //    - ,      on({id: "javascript.0.gate_0.target", ack: false, val: 0}, function (obj) {  setState("mqtt.0.gate.gpio.12", 1); }); //    - ,      on({id: "javascript.0.gate_0.target", ack: false, val: 1}, function (obj) {  setState("mqtt.0.gate.gpio.13", 1); }); on({id: "mqtt.0.gate.in_progress", ack: true, change: 'any'}, function (obj) {  //    " ",      if (obj.state.val === 1) {      //    "",         const target = getState("javascript.0.gate_0.target");      if (target.val === 0) {          // ""          setState("javascript.0.gate_0.current", 2, true);      } else {          // ""          setState("javascript.0.gate_0.current", 3, true);      }  }  //    " ",      if (obj.state.val === 0) {      //    "",         const target = getState("javascript.0.gate_0.target");      if (target.val === 0) {          // ""          setState("javascript.0.gate_0.current", 0, true);      } else {          // ""          setState("javascript.0.gate_0.current", 1, true);      }  } });</span></span></code> </pre> </div></div><br><p>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЧреЗрд░рд╛рдЬ рджрд░рд╡рд╛рдЬрд╛ рд╕реЗрд╡рд╛ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><p><img src="https://habrastorage.org/webt/lb/cm/t5/lbcmt51du7vnivrjbj2o_h_u28u.png" alt="GarageDoorOpener рд╕реЗрд╡рд╛" title="GarageDoorOpener рд╕реЗрд╡рд╛"></p><br><p><img src="https://habrastorage.org/webt/pg/rh/ey/pgrhey_qs-cxm8rg6yj_lufgmgs.png"></p><br><h3 id="kamera">  рдХреИрдорд░рд╛ </h3><br><p>  рд╣реЛрдордХрд┐рдЯ рдореЗрдВ рдПрдХ рдХреИрдорд░рд╛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП, "рдХреНрд▓рд╛рд╕рд┐рдХ" рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  Ffmpeg рдореЙрдбреНрдпреВрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреИрдорд░реЗ рд╕реЗ рдЫрд╡рд┐ рдХрд╛ рдкреНрд░рд╕рд╛рд░рдг рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░реАрдо рдХреЛ рдПрдиреНрдХреЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рд╣реЛрдордХрд┐рдЯ рдХреЛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдЙрд╕ рд╕рд░реНрд╡рд░ рдкрд░ ffmpeg рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ ioBroker рд╕реНрдерд┐рдд рд╣реИред </p><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЖрдк рдЗрд╕реЗ рд╕реНрд░реЛрдд рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рддреИрдпрд╛рд░ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣рд╛рдВ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://www.johnvansickle.com/ffmpeg/</a> рдкрд░ рдПрдХ libx264 рдПрдирдХреЛрдбрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЖрдк рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде ffmpeg рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдПрдирдХреЛрдбрд░ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">ffmpeg -codecs | grep 264</code> </pre> <br><p>  рдкрд░рд┐рдгрд╛рдо рдореЗрдВ рдкреНрд░рдкрддреНрд░ рдХреА рдПрдХ рдкрдВрдХреНрддрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП: </p><br><pre> <code class="plaintext hljs">DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_v4l2m2m h264_vdpau ) (encoders: libx264 libx264rgb h264_v4l2m2m )</code> </pre> <br><p>  рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ 3 рдХреЗ рд▓рд┐рдП, рдЖрдк <a href="">рддреИрдпрд╛рд░ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ GPU рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдПрдиреНрдХреЛрдбрд┐рдВрдЧ (h264_omx, рдХрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЦрдкрдд) рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдПрдХ рдХреЛрдбреЗрдХ рд╣реИред  рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рд▓рдЧрд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">wget https://github.com/legotheboss/YouTube-files/raw/master/ffmpeg_3.1.4-1_armhf.deb sudo dpkg -i ffmpeg_3.1.4-1_armhf.deb</code> </pre> <br><p>  рджреЛрдиреЛрдВ рдХреЛрдбреЗрдХреНрд╕ рдЗрд╕ рдЕрд╕реЗрдВрдмрд▓реА рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ: libx264 рдФрд░ h264_omx </p><br><p>  рдЕрдЧрд▓рд╛, рдЖрдкрдХреЛ рдЙрд╕ рдХреИрдорд░рд╛ рд╕реНрдЯреНрд░реАрдо рдХрд╛ рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕реЗ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдпрд╣ рдХрджрдо рдЗрд╕ рд▓реЗрдЦ рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдкрд░реЗ рд╣реИ)ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреИрдпрд╛рд░ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕реНрдЯреНрд░реАрдо</a> рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЕрдм рдХреИрдорд░реЗ рдХреЛ рдпрд╛рд╣рдХрд╛ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ, рд╕реНрдЯреНрд░реАрдо рдХреЗ рдкрддреЗ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВ, рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдХреЛрдбреЗрдХ, рдЫрд╡рд┐ рдЖрдХрд╛рд░, рдлреНрд░реЗрдо рджрд░ рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдмрджрд▓реЗрдВред </p><br><p>  <strong>рдорд╣рддреНрд╡рдкреВрд░реНрдг: рд╣реЛрдордХрд┐рдЯ рдореЗрдВ рдХреИрдорд░реЗ рдХреЗ рд╕рд╣реА рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рд╕рдВрдпреЛрдЬрди рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдФрд░ рдХреИрдорд░рд╛ рдФрд░ рд╕реНрдЯреНрд░реАрдо рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред</strong>  <strong>рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рджрд░реНрд╢рди рдХреЛ рднреА рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐</strong>  <strong>ffmpeg рдХреА рд░рдирд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддреА рд╣реИред</strong> </p><br><p><img src="https://habrastorage.org/webt/zh/uj/6g/zhuj6gv7alolh2nfvmpyxgmnoju.png" alt="рдПрдХ рдХреИрдорд░рд╛ рдЬреЛрдбрд╝рдирд╛" title="рдПрдХ рдХреИрдорд░рд╛ рдЬреЛрдбрд╝рдирд╛"></p><br><p><img src="https://habrastorage.org/webt/w7/_z/pl/w7_zplfretbtbw0v66nb9ip9ira.png" alt="рд╕реНрдЯреНрд░реАрдо рд╕реЗрдЯрдЕрдк" title="рд╕реНрдЯреНрд░реАрдо рдкрдВрдЬреАрдХрд░рдг"></p><br><div class="spoiler">  <b class="spoiler_title">рдХреИрдорд░реЗ рдХреЛ рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рдХреЗ рдмрд╛рд╣рд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЧреЗрдЯрд╡реЗ рдХреЗ рд╕рдорд╛рди рдЬреЛрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ib/8v/s9/ib8vs9ksuw5mk4ese_-gg6rnrv4.png"></p></div></div><br><p><img src="https://habrastorage.org/webt/0d/hp/qd/0dhpqdbfe_hgez4u7x2edcu92za.png" alt="рдХреИрдорд░рд╛ рдердВрдмрдиреЗрд▓" title="рдХреИрдорд░рд╛ рд╢реВрдЯ"></p><br><p><img src="https://habrastorage.org/webt/ue/tj/o4/uetjo4rqvi-fsae2rlkt56cmaji.png" alt="рдХреИрдорд░реЗ рд╕реЗ рдкреНрд░рд╕рд╛рд░рдг" title="рдХреИрдорд░рд╛ рд╕реЗ рдкреНрд░рдХреНрд╖реЗрдкрдг"></p><br><h3 id="bonus">  рдмреЛрдирд╕ </h3><br><p>  рдПрдХ рдмреЛрдирд╕ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдХреИрдорд░реЗ рдХреЗ рдкреНрд░рд╕рд╛рд░рдг рдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдБрдЧрд╛ред </p><br><p>  рдХреИрдорд░реЗ рдХреЗ рдмрдЬрд╛рдп, рдЙрд╕реА ffmpeg рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдЫрд╡рд┐, рдХрд┐рд╕реА рднреА рдЪрд┐рддреНрд░ рдХреЛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрди рддрд╕реНрд╡реАрд░реЛрдВ рдХреЛ рд╡реАрдбрд┐рдпреЛ рд╕реНрдЯреНрд░реАрдо рдХреЗ рд╕рд╛рде рднреА рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЖрдк рдЪрд┐рддреНрд░ рдкрд░ рдкрд╛рда, рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдФрд░ рдЕрдиреНрдп рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/sg/cl/f7/sgclf7ssws1pkm_rlf3qy_avmhi.png" alt="рдкрд╛рда рдУрд╡рд░рд▓реЗ рдХрд╛рд╕реНрдЯ" title="рдкрд╛рда рдУрд╡рд░рд▓реЗ рдХрд╛рд╕реНрдЯ"></p><br><p>  рдирддреАрдЬрддрди, рдЖрдк рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдбреИрд╢рдмреЛрд░реНрдб рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдФрд░ рдЕрдЧрд░ рдЖрдк рддрд╕реНрд╡реАрд░ рдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЧрддрд┐рд╢реАрд▓ рдбреЗрдЯрд╛ рдорд┐рд▓рддрд╛ рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВрдиреЗ рдХреБрдЫ рд╕рдВрдХреЗрддрдХреЛрдВ рдореЗрдВ рдЪрд┐рддреНрд░ (рдбрд┐рд╕реНрдХ рдкрд░ рдлрд╝рд╛рдЗрд▓) рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рдПрдХ рдЧреНрд░рд╛рдл рдирд┐рдХрд╛рд▓рд╛ред  рдпрд╣ рдЧреНрд░рд╛рдлрд╝ рдорд┐рдирдЯ рдореЗрдВ рдПрдХ рдмрд╛рд░ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЫрд╡рд┐ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдЯ рдХрд░рддрд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">(рдлрд╝рдВрдХреНрд╢рдВрд╕ createImage1, createImage2, рдПрдХ рдЧреНрд░рд╛рдлрд╝ рдХрд╛ рдЧрдарди рдФрд░ рдПрдХ рдЪрд┐рддреНрд░ рдкрд░ рдкрд╛рда рдХрд╛ рдереЛрдкрдирд╛ рдЗрд╕ рд▓реЗрдЦ рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдкрд░реЗ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдПрдХ рд╕рдВрдХреЗрдд рджреВрдВрдЧрд╛)ред</b> <div class="spoiler_text"><p>  рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЪрд┐рддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдЧреНрд░рд╛рдл рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  IoBroker рдореЗрдВ рдЧреНрд░рд╛рдл рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рдорд╛рдирдХ рддрд░реАрдХрд╛ рд╣реИ - рдлрд╝реНрд▓реЛрдЯ рдбреНрд░рд╛рдЗрд╡рд░ред  рдпрд╣ рдбреНрд░рд╛рдЗрд╡рд░ рдПрдХ рд╡реЗрдм рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд╕рд╛рде рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдПрдХ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдПрдХ рдЪрд┐рддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд░реНрд╡рд░ (рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ) рдкрд░ рдмрдирд╛рдП рдЧрдП рдЧреНрд░рд╛рдл рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд PhantomJS рдбреНрд░рд╛рдЗрд╡рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреЛ рдкреГрд╖реНрда рдХрд╛ "рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ" рд▓реЗрддрд╛ рд╣реИ (рдЬрд┐рд╕ рдкрд░ рд╣рдо рдПрдХ рдлрд╝реНрд▓реЛрдЯ рдЧреНрд░рд╛рдлрд╝ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ)ред </p><br><p>  рд▓реЗрдХрд┐рди рдореИрдВ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╕рд░реНрд╡рд░ рдкрд░ рдЧреНрд░рд╛рдлрд╝ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ред </p><br><p>  рдРрд╕реА рдПрдХ рдЪрд╛рд░реНрдЯ.рдЬреЗрдПрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.chartjs.org/</a> рдЬреЛ рдЖрдкрдХреЛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЕрдЪреНрдЫреЗ рджрд┐рдЦрдиреЗ рд╡рд╛рд▓реЗ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.chartjs.org/samples/latest/</a> )ред </p><br><p>  рдбреНрд░рд╛рдЗрдВрдЧ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ "рдХреИрдирд╡рд╛рд╕" (рдХреИрдирд╡рд╛рд╕, рдХреИрдирд╡рд╛рд╕) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╕рд░реНрд╡рд░ рдкрд░ рдЗрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ "рдХреИрдирд╡рд╛рд╕" рдФрд░ рдбреЛрдо рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ "рд╕рд░реНрд╡рд░" рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдЪрд╛рд░реНрдЯрдЬ-рдиреЛрдб рдкреИрдХреЗрдЬ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/vmpowerio/chartjs-node</a> ) рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдкреИрдХреЗрдЬ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рдирд┐рд░реНрднрд░рддрд╛ рдХреИрдирд╡рд╛рд╕ рдкреИрдХреЗрдЬ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/Automattic/node-canvas</a> ) рд╣реИ, рдЬрд┐рд╕реЗ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ (рдпрд╛ iobroker рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ) рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЙрд╕ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рд▓рд┐рдП рдЬрд╣рд╛рдВ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/Automattic/node-canvas#compiling рд░рдЦрддреЗ рд╣реИрдВ</a> , рдХреЗ рд▓рд┐рдП рд╕рднреА рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред </p><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдк рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдбреНрд░рд╛рдЗрд╡рд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдЪрд╛рд░реНрдЯ.рдЬреЗрдПрд╕, рдЪрд╛рд░реНрдЯрдЬ-рдиреЛрдб рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрдиреНрд╣реЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛, рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЕрдиреНрдпрдерд╛, рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рдирд┐рдкрдЯреЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╣рд▓ рдХрд░реЗрдВред </p><br><p>  рдФрд░ рдлрд┐рд░, рдЖрдк рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдиреАрдЪреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐  рдЗрд╕рдореЗрдВ рдЗрддрд┐рд╣рд╛рд╕ рдбреНрд░рд╛рдЗрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИ рдФрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рд╛рдЬреНрдп рдирд╛рдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЪреЗрддрд╛рд╡рдиреА!  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП рдЬрдЯрд┐рд▓ рдирд┐рд░реНрдорд╛рдг рд╣реИрдВ - рд╡рд╛рджрд╛ред  рдпрд╣ рдХреЙрд▓рдмреИрдХ рдХреЗ рд╕рд╛рде рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдЪрд░рдгреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдЗрддрд┐рд╣рд╛рд╕ рд╕реЗ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдРрд╕рд╛ рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </p><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ChartjsNode = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'chartjs-node'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** *  sendTo  Promise,      */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendToPromise</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">adapter, cmd, params</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { sendTo(adapter, cmd, params, (result) =&gt; { resolve(result); }); }); } <span class="hljs-comment"><span class="hljs-comment">//    const chartColors = { black: 'rgb(0, 0, 0)', red: 'rgb(255, 99, 132)', orange: 'rgb(255, 159, 64)', yellow: 'rgb(255, 205, 86)', green: 'rgb(75, 192, 192)', blue: 'rgb(54, 162, 235)', purple: 'rgb(153, 102, 255)', grey: 'rgb(201, 203, 207)' }; /** *        * : * @param config -     * @param filename -     * : * @param Promise -    */ function doDraw(config, filename) { //     640x480  var chartNode = new ChartjsNode(640, 480); return chartNode.drawChart(config) .then(() =&gt; { //     return chartNode.writeImageToFile('image/png', filename); }); } /** *     ChartJS. * : * @param Promise -    */ function prepareDraw0(){ // ,    var ; //  Promise     return new Promise((resolve, reject)=&gt;{resolve()}) //       ,      .then(()=&gt;{ //  ,   ,      = [ {"val":3,"ack":1,"ts":1539063874301}, {"val":5,"ack":1,"ts":1539063884299}, {"val":5.3,"ack":1,"ts":1539063894299}, {"val":3.39,"ack":1,"ts":1539063904301}, {"val":5.6,"ack":1,"ts":1539063914300}, {"val":-1.3,"ack":1,"ts":1539063924300}, {"val":-6.3,"ack":1,"ts":1539063934302}, {"val":1.23,"ack":1,"ts":1539063944301}, ]; }) //   -    .then(()=&gt;{ const chartJsOptions = { //   -  type: 'line', data: { //    datasets: [ { //   label: '', //  backgroundColor: chartColors.black, borderColor: chartColors.black, //   pointRadius: 3, //    borderWidth: 3, //     ''        data: .map((item) =&gt; { return {y: item.val, t: new Date(item.ts)} }), //   -  fill: false, } ] }, options: { //   legend: { labels: { //   fontSize: 20, }, }, //   scales: { //  X xAxes: [{ //  -   type: 'time', display: true, //   scaleLabel: { display: true, labelString: '' }, }], //  Y yAxes: [{ //  -  type: 'linear', display: true, //   scaleLabel: { display: true, labelString: '' }, }] } } }; return chartJsOptions; }); } /** *     ChartJS. *         , *     . * * : * @param hours -  ,     * : * @param Promise -    */ function prepareDraw1(hours){ //   ,      const end = new Date().getTime(), start = end - 3600000*(hours || 1); // 1 =   //  ,       //   var , 2, 1, 2, 2; //  Promise     return new Promise((resolve, reject)=&gt;{resolve()}) //       'mqtt.0.ESP_Easy..Temperature' .then(() =&gt; { return sendToPromise('history.0', 'getHistory', { id: 'mqtt.0.ESP_Easy..Temperature', options: { start: start, end: end, aggregate: 'onchange' } } ).then((result) =&gt; { //     ''  = result.result; }); }) //       'sonoff.0.chicken2.DS18B20_Temperature' .then(() =&gt; { return sendToPromise('history.0', 'getHistory', { id: 'sonoff.0.chicken2.DS18B20_Temperature', options: { start: start, end: end, aggregate: 'onchange' } }).then((result)=&gt;{ //     '2' 2 = result.result; }); }) .then(() =&gt; { return sendToPromise('history.0', 'getHistory', { id: 'sonoff.0.sonoff_chicken_vent.DS18B20_Temperature', options: { start: start, end: end, aggregate: 'onchange' } }).then((result)=&gt;{ 1 = result.result; }); }) .then(() =&gt; { return sendToPromise('history.0', 'getHistory', { id: 'sonoff.0.chicken2.POWER1', options: { start: start, end: end, aggregate: 'onchange' } }).then((result)=&gt;{ 2 = result.result; }); }) .then(() =&gt; { return sendToPromise('history.0', 'getHistory', { id: 'sonoff.0.chicken2.POWER2', options: { start: start, end: end, aggregate: 'onchange' } }).then((result)=&gt;{ 2 = result.result; }); }) //   -    .then(()=&gt;{ const chartJsOptions = { //   -  type: 'line', data: { //    datasets: [ { //           label: ' ('+[.length - 1].val+')', //  backgroundColor: chartColors.blue, borderColor: chartColors.blue, //  . 0 -   pointRadius: 0, //    borderWidth: 3, //     ''        data: .map((item) =&gt; { return {y: item.val, t: new Date(item.ts)} }), //   -  fill: false, //   Y yAxisID: 'y-axis-1', },{ label: ' 1 ('+1[1.length - 1].val+')', backgroundColor: chartColors.green, borderColor: chartColors.green, pointRadius: 0, borderWidth: 3, data: 1.map((item) =&gt; { return {y: item.val, t: new Date(item.ts)} }), fill: false, yAxisID: 'y-axis-1', },{ label: ' 2 ('+2[2.length - 1].val+')', backgroundColor: chartColors.red, borderColor: chartColors.red, pointRadius: 0, borderWidth: 3, data: 2.map((item) =&gt; { return {y: item.val, t: new Date(item.ts)} }), fill: false, yAxisID: 'y-axis-1', },{ label: ' 2  ('+2[2.length - 1].val+')', backgroundColor: chartColors.yellow, borderColor: chartColors.yellow, pointRadius: 0, borderWidth: 1, data: 2.map((item) =&gt; { return {y: (item.val) ? 1 : 0, t: new Date(item.ts)} }), fill: true, lineTension: 0, steppedLine: true, yAxisID: 'y-axis-2', },{ label: ' 2  ('+2[2.length - 1].val+')', backgroundColor: chartColors.grey, borderColor: chartColors.grey, pointRadius: 0, borderWidth: 1, data: 2.map((item) =&gt; { return {y: (item.val) ? -1 : 0, t: new Date(item.ts)} }), fill: true, lineTension: 0, steppedLine: true, yAxisID: 'y-axis-2', } ] }, options: { //   legend: { labels: { //   fontSize: 20, }, }, //   scales: { //  X xAxes: [{ //  -   type: 'time', display: true, //   scaleLabel: { display: true, labelString: '' }, //    () time: { unit: 'minute', displayFormats: { minute: 'HH:mm' } }, }], //  Y yAxes: [{ //  -  type: 'linear', display: true, //   scaleLabel: { display: true, labelString: '' }, //   -  position: 'left', //   id: 'y-axis-1', },{ type: 'linear', display: true, scaleLabel: { display: true, labelString: '  ' }, ticks: { min: -4, max: 2 }, //   -  position: 'right', id: 'y-axis-2', }] } } }; return chartJsOptions; }); } function createImage(filename, callback){ // filename -  ,       //    prepareDraw1(2) //     .then((result) =&gt; { //        return doDraw(result, filename); }) .then(()=&gt;{ if (callback) callback(); }) .catch((err)=&gt;{ console.error(err); }); }</span></span></code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/4c/d5/bs/4cd5bslfzniznrd16qfmqu0tuly.png" alt="рдзрд╛рд░рд╛ рдХреЗ рдмрдЬрд╛рдп рдкреНрд░рд╕рд╛рд░рдг рдЫрд╡рд┐" title="рд╕реЗрдХреНрд╢рди рдХреЗ рдмрдЬрд╛рдп рдЗрдореЗрдЬ рдЗрдореЗрдЬ"></p><br><p>  рдердВрдмрдиреЗрд▓ рдЫрд╡рд┐ рдХреЛ рдкреНрд░рддрд┐ рдорд┐рдирдЯ рд▓рдЧрднрдЧ рдПрдХ рдмрд╛рд░ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рд╣рд░ 10 рд╕реЗрдХрдВрдб рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдЫрд╡рд┐ рдХреЛ рд╕реЗрдЯ рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="plaintext hljs">var fs = require('fs'); //  10    schedule("*/10 * * * * *", () =&gt; {  createImage1('/tmp/1_new.jpg', ()=&gt; {      fs.renameSync('/tmp/1_new.jpg', '/tmp/1.jpg');  });  createImage2('/tmp/2_new.jpg', ()=&gt; {      fs.renameSync('/tmp/2_new.jpg', '/tmp/2.jpg');  }); });</code> </pre> <br><p>  рдЦрд╝рд╛рд╕рд┐рдпрдд рдпрд╣ рд╣реИ рдХрд┐ рдЫрд╡рд┐ рдХреЛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рддрд╕реНрд╡реАрд░ рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ ffmpeg рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рди рд╣реЛ :) рдЗрд╕рд▓рд┐рдП, рдЪрд┐рддреНрд░ рдкрд╣рд▓реЗ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдмрдирддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рдмрджрд▓рдХрд░ рдЕрдиреБрд╡рд╛рдж рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЕрдм, рдХреИрдорд░рд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рд╕реНрдЯреНрд░реАрдо рдкрддреЗ рдХреЗ рдмрдЬрд╛рдп рдЬреЗрдирд░реЗрдЯ рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ, рдФрд░ рдЙрди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдЬреЛ рдЪрд┐рддреНрд░ "рдЕрдкрдбреЗрдЯреЗрдб" (рдкреИрд░рд╛рдореАрдЯрд░ "-рд▓реВрдк 1") рд╣реИред  рдпрд╣ рдХреИрдорд░реЗ рдХреЗ рдЙрдиреНрдирдд рдЧреБрдгреЛрдВ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпреЗ рдЧреБрдг ffmpeg рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рд╕реЗ рдЬреНрдпрд╛рджрд╛ рдХреБрдЫ рдирд╣реАрдВ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рдВрдпреЛрдЬрди рдХреЛ рдПрдлрдПрдлрдПрдордкреА рдкреНрд░рд▓реЗрдЦрди рдФрд░ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЧреБрдгреЛрдВ рдХреЛ 2 рдкреНрд░рдХрд╛рд░реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: "рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди" (рдХреИрдорд░реЗ рдХреА рдПрдХ рдЫреЛрдЯреА рдЫрд╡рд┐) рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рдкреНрд░рд╕рд╛рд░рдг рдХреЗ рд▓рд┐рдПред  рдЗрд╕рд▓рд┐рдП, рдЖрдк рд╡рд┐рднрд┐рдиреНрди рдЫрд╡рд┐ рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рд╕рд╛рдеред </p><br><p><img src="https://habrastorage.org/webt/zy/30/b4/zy30b4wc2zud54wr-px_ezovdgu.png" alt="Ffmpeg рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рд╡рд┐рдХрд▓реНрдк" title="Ffmpeg рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рд╡рд┐рдХрд▓реНрдк"></p><br><p><img src="https://habrastorage.org/webt/mk/l5/qi/mkl5qizqb41if_youa62qrgm9hc.png" alt="рд▓рд╛рдЗрд╡ рдкреНрд░рд╕рд╛рд░рдг рдЫрд╡рд┐" title="рд▓рд╛рдЗрд╡ рдЫрд╡рд┐"></p><br><h3 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><p>         ioBroker     .       ,       . ,   ,        . </p><br><p>  ,    Yahka       ,      Material.           ,            HomeKit. </p><br><p>       Yahka,    HomeKit     тАФ  Ham,     HomeBridge         .       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi433798/">https://habr.com/ru/post/hi433798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi433786/index.html">рдлрд┐рдирдЯреЗрдХ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ: рдХреНрд░рд┐рдкреНрдЯреЛрдХреНрдпреВрд░реЗрдВрд╕реА рд╕рдВрдкрддреНрддрд┐ рд╣реИ, рд░реВрд╕реА рд╕рдВрдШ рдореЗрдВ рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб рдХреА рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдЬрд╛рд░реА рдХреА рдЧрдИ рд╣реИ</a></li>
<li><a href="../hi433788/index.html">рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реМрджрд╛ рдФрд░ рдирдИ рдлреНрд░реАрд▓рд╛рдВрд╕ рд╕рдореАрдХреНрд╖рд╛</a></li>
<li><a href="../hi433790/index.html">рдЙрдиреНрдирдд рдорд▓реНрдЯреА-рд╕реНрдЯреЗрдЬ рдмрд┐рд▓реНрдб рдЯреЗрдореНрдкрд▓реЗрдЯ</a></li>
<li><a href="../hi433792/index.html">рд╢реЗрд▓рд┐рдмрд▓ рдореЗрдВ рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a></li>
<li><a href="../hi433796/index.html">рд╣реЛрдореЛ рд╕реЗрдкрд┐рдпрдиреНрд╕ рдиреЗ рджреБрдирд┐рдпрд╛ рдХреЛ рдХреИрд╕реЗ рдЬреАрдд рд▓рд┐рдпрд╛ред рд╕рдВрдЪрд╛рд░ рдФрд░ рдмрд╛рддрдЪреАрдд рдХреМрд╢рд▓</a></li>
<li><a href="../hi433800/index.html">рдПрдХ 3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдореЗрдВ рд░реБрдХрд╛рд╡рдЯ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реВ рдХреЗ рдпреВрдбреАрдмреА рдкреАрдПрд╕рдУрд╕реА рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../hi433802/index.html">рдЕрд░реНрдмрди рдЯреЗрдХ рдЪреИрд▓реЗрдВрдЬ рд╣реИрдХрдереЙрди рдореЗрдВ рд╣рдордиреЗ рдмрд┐рдЧ рдбреЗрдЯрд╛ рдЯреНрд░реИрдХ рдХреИрд╕реЗ рдФрд░ рдХреНрдпреЛрдВ рдЬреАрддрд╛</a></li>
<li><a href="../hi433804/index.html">рдорд┐рд╢реНрд░рдг рдШрдирддреНрд╡ рдиреЗрдЯрд╡рд░реНрдХ</a></li>
<li><a href="../hi433806/index.html">рдЬрдм рдСрдирд▓рд╛рдЗрди рд╕рдВрдЧреНрд░рд╣ рднреВрд▓ рдЬрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi433808/index.html">5 рд╕рдмрд╕реЗ рдЖрдо рдЧрд▓рддрд┐рдпрд╛рдБ рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдореЗрдВ рдХрд░рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>