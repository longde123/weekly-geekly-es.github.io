<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ½â€ğŸ« ğŸ— â­ï¸ Comment puis-je utiliser des machines virtuelles Yandex.Cloud interrompues et Ã©conomiser sur la rÃ©solution de problÃ¨mes Ã  grande Ã©chelle ğŸ‘¨ğŸ¼â€ğŸ”¬ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ ğŸ‘©ğŸ¼â€ğŸ’»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous voulons parler d'une fonctionnalitÃ© aussi utile de Yandex.Cloud que les machines virtuelles interrompues. Il s'agit d'une option spÃ©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment puis-je utiliser des machines virtuelles Yandex.Cloud interrompues et Ã©conomiser sur la rÃ©solution de problÃ¨mes Ã  grande Ã©chelle</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/457538/">  Aujourd'hui, nous voulons parler d'une fonctionnalitÃ© aussi utile de Yandex.Cloud que les machines virtuelles interrompues.  Il s'agit d'une option spÃ©ciale que vous pouvez choisir lors de la crÃ©ation d'une machine virtuelle pour utiliser les ressources informatiques Ã  un prix rÃ©duit.  Quelle est la particularitÃ© des machines virtuelles interruptibles, pourquoi sont-elles moins chÃ¨res que les machines normales et dans quels cas est-il judicieux de les utiliser? <br><br><img src="https://habrastorage.org/webt/ox/8d/3e/ox8d3etklg4mebfli2f7r0ofdf0.png"><br><a name="habracut"></a><br>  Les capacitÃ©s de Yandex.Cloud, et plus prÃ©cisÃ©ment du service d'infrastructure <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex Compute Cloud</a> , sont sensiblement supÃ©rieures Ã  celles utilisÃ©es par les utilisateurs.  Par dÃ©faut, il est supposÃ© que les utilisateurs devraient pouvoir Ã©voluer arbitrairement.  Au moins pour ces raisons, sans tenir compte d'autres aspects, les ressources disponibles de la plateforme cloud dÃ©passent considÃ©rablement la demande actuelle.  C'est Ã  ces capacitÃ©s libres que les machines virtuelles interrompues sont crÃ©Ã©es. <br><br><h2>  Limitations principales </h2><br>  En bref, la nature des machines virtuelles interrompues peut Ãªtre dÃ©crite comme suit: le service propose d'utiliser ses ressources informatiques gratuites Ã  un prix infÃ©rieur, Ã  condition que ces ressources puissent Ãªtre rappelÃ©es Ã  tout moment. <br><br>  En gÃ©nÃ©ral, les machines virtuelles interrompues fonctionnent comme des machines virtuelles normales, mais elles ont un certain nombre de limitations: <br><br><ul><li>  Ils ne sont pas couverts par un contrat de niveau de service (SLA). </li><li>  La possibilitÃ© de crÃ©er et d'exÃ©cuter n'est pas garantie. </li><li>  Ils peuvent Ãªtre contraints d'arrÃªter Ã  tout moment.  La probabilitÃ© d'un arrÃªt est faible, mais non nulle, elle peut changer au fil du temps et varier dans diffÃ©rentes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">zones de disponibilitÃ© de Yandex.Cloud</a> . </li><li>  Une machine virtuelle interrompue ne peut pas devenir normale, mais une machine normale interrompue.  L'indicateur correspondant est dÃ©fini une fois et ne change pas. </li><li>  La machine sera sÃ»rement arrÃªtÃ©e dans un dÃ©lai ne dÃ©passant pas 24 heures. </li></ul><br>  En pratique, dans la grande majoritÃ© des cas, les machines virtuelles interrompues effectuent toutes les 24 heures prÃ©vues par les conditions de service.  Un arrÃªt forcÃ© ne se produit gÃ©nÃ©ralement que lorsqu'un grand nombre de machines virtuelles ordinaires sont crÃ©Ã©es dans une zone de disponibilitÃ© spÃ©cifique dans un court laps de temps: un nouvel utilisateur ayant des besoins sÃ©rieux apparaÃ®t ou les utilisateurs actuels sont massivement mis Ã  l'Ã©chelle. <br><br>  Dans le mÃªme temps, une machine virtuelle arrÃªtÃ©e peut Ãªtre redÃ©marrÃ©e: toutes les donnÃ©es sur les disques sont enregistrÃ©es Ã  la fois lors de l'arrÃªt automatique et manuel. <br><br><h2>  Cas d'utilisation </h2><br>  Les limitations des machines virtuelles interrompues soulÃ¨vent une question logique: comment les appliquer si les ressources peuvent Ãªtre rÃ©voquÃ©es Ã  tout moment?  Ã€ titre d'explication, voici quelques cas d'utilisation possibles. <br><br><h3>  Traitement par lots </h3><br>  Le traitement par lots implique l'exÃ©cution parallÃ¨le d'un grand nombre de tÃ¢ches gourmandes en ressources.  Cela peut Ãªtre la conversion de formats de fichiers, le traitement et la reconnaissance d'images, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">opÃ©rations ETL</a> .  L'essentiel est que dans le traitement par lots, il existe une file d'attente de travaux et un ensemble complet de processus de travail (exÃ©cuteurs) qui reÃ§oivent des travaux de la file d'attente.  Si un exÃ©cuteur individuel exÃ©cutÃ© sur une machine interrompue s'arrÃªte, la tÃ¢che sera simplement transfÃ©rÃ©e au prochain exÃ©cuteur.  En d'autres termes, l'arrÃªt d'une ou mÃªme plusieurs machines virtuelles n'aura pas d'impact nÃ©gatif significatif sur le processus et le rÃ©sultat du traitement. <br><br><img src="https://habrastorage.org/webt/o9/tt/ny/o9ttnycyli2d6s7sg-c9i47rusk.png"><br><br>  Lorsque nous traitons des donnÃ©es par lots, nous parlons de l'utilisation de dizaines de machines virtuelles.  L'utilisation de machines intermittentes permet des Ã©conomies trÃ¨s sensibles.  DÃ©sormais, l'un des principaux consommateurs de machines virtuelles discontinues productives avec 32 cÅ“urs est un client de longue date de Yandex.Cloud, Seismotech.  Seismotek traite les donnÃ©es sismiques, nÃ©cessaires Ã  l'exploration des gisements de gaz et de pÃ©trole.  L'exploration sismique implique de travailler avec de grands volumes d'informations.  Les donnÃ©es sont traitÃ©es dans une mÃ©thode par lots.  La sociÃ©tÃ© utilise simultanÃ©ment jusqu'Ã  60 machines interrompues ou plus: un total de 2000 vCPU et 4000 Go de RAM. <br><br><h3>  Projets sur Hadoop </h3><br>  Hadoop est utilisÃ© pour dÃ©velopper et exÃ©cuter des programmes distribuÃ©s s'exÃ©cutant sur des clusters de centaines et de milliers de nÅ“uds Ã  faible coÃ»t.  Les mÃ©canismes de rÃ©plication de fichiers et de redÃ©marrage automatique des tÃ¢ches effectuÃ©es sur les nÅ“uds dÃ©faillants fournis par Hadoop assurent la stabilitÃ© d'un systÃ¨me distribuÃ© aux dÃ©faillances de machines individuelles.  C'est pourquoi, lorsque Hadoop est utilisÃ©, au moins une partie des nÅ“uds peut Ãªtre facilement dÃ©ployÃ©e sur des machines virtuelles interrompues.  S'ils s'arrÃªtent tÃ´t, les tÃ¢ches seront envoyÃ©es Ã  d'autres nÅ“uds. <br><br><h3>  Basculement des services Web </h3><br>  La disponibilitÃ© continue du service Web peut Ãªtre assurÃ©e en utilisant un cluster.  Un cluster se compose de deux serveurs ou plus.  L'une de ses tÃ¢ches dans l'application aux services Web est d'assurer un fonctionnement stable au moment des pics de charge.  Exemples typiques: sites d'achats en ligne ou sites sportifs oÃ¹ la croissance du trafic est liÃ©e Ã  des dates spÃ©cifiques.  Pour les magasins, il peut s'agir de jours fÃ©riÃ©s traditionnels ou de pÃ©riodes de rabais, et pour les sites liÃ©s au sport, il peut s'agir de jours d'Ã©vÃ©nements lorsque des Ã©missions ont lieu, des critiques et des reportages photo sont publiÃ©s.  Ã€ de tels moments, le volume de trafic peut augmenter considÃ©rablement. <br><br>  Le cluster doit faire face Ã  l'afflux de visiteurs en rÃ©partissant le trafic vers diffÃ©rents nÅ“uds.  Pour une pÃ©riode de forte croissance de charge, mais de courte durÃ©e, la tolÃ©rance aux pannes peut Ãªtre fournie en ajoutant des serveurs sur des machines virtuelles arrÃªtÃ©es.  Cette option est peu coÃ»teuse et fait bien son travail.  Il est important de respecter une condition: un tel cluster doit Ãªtre hybride, c'est-Ã -dire inclure des machines virtuelles ordinaires.  Dans ce cas, mÃªme l'arrÃªt improbable de machines interrompues n'entraÃ®nera pas de panne de service. <br><br><h3>  Projets chez Kubernetes </h3><br>  Kubernetes automatise le dÃ©ploiement, la mise Ã  l'Ã©chelle et la gestion des applications conteneurisÃ©es sur un grand nombre de nÅ“uds.  L'une des principales entitÃ©s que l'on peut appeler le bloc de construction de Kubernetes est sous (pod).  Pod permet le lancement d'un ou plusieurs conteneurs sur un nÅ“ud.  Un nÅ“ud pour chaque foyer est sÃ©lectionnÃ© et attribuÃ© par le planificateur Kubernetes.  Si un nÅ“ud sÃ©parÃ© avec un foyer en marche tombe en panne, le planificateur le transfÃ¨re automatiquement vers un nÅ“ud qui fonctionne en mode normal.  Ce schÃ©ma de maintien de l'intÃ©gritÃ© suggÃ¨re qu'une partie des nÅ“uds peut Ãªtre hÃ©bergÃ©e dans des machines virtuelles discontinues. <br><br><h3>  Test d'intÃ©gration continue </h3><br>  La pratique de l'intÃ©gration continue est basÃ©e sur l'assemblage et les tests frÃ©quents du projet.  Dans ce cas, des tests principalement automatisÃ©s sont utilisÃ©s.  SchÃ©matiquement, cela ressemble Ã  ceci: un environnement de test est crÃ©Ã© sur une machine virtuelle, la derniÃ¨re version de l'application y est tÃ©lÃ©chargÃ©e, des tests automatisÃ©s sont effectuÃ©s, les rÃ©sultats des tests sont tÃ©lÃ©chargÃ©s, la machine virtuelle est supprimÃ©e.  En rÃ¨gle gÃ©nÃ©rale, les tests prennent plusieurs dizaines de minutes, moins souvent plusieurs heures. <br><br>  Traditionnellement, les points faibles de l'intÃ©gration continue sont considÃ©rÃ©s comme des coÃ»ts importants pour soutenir le processus d'intÃ©gration lui-mÃªme et la forte demande de ressources informatiques.  De ce point de vue et compte tenu de la durÃ©e des tests automatisÃ©s, les machines virtuelles abandonnÃ©es semblent plus que adaptÃ©es Ã  une intÃ©gration continue.  Ils sont beaucoup moins chers et la probabilitÃ© qu'une voiture s'arrÃªte immÃ©diatement au moment des tests est extrÃªmement faible.  De plus, mÃªme si la voiture est toujours arrÃªtÃ©e, les dommages du point de vue de l'entreprise seront minimes. <br><br><h3>  Utiliser en conjonction avec d'autres services Yandex.Cloud </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le service Groupes d'instances Yandex</a> vous permet de surveiller automatiquement l'Ã©tat d'un groupe entier de machines virtuelles interrompues.  Il peut crÃ©er indÃ©pendamment des machines virtuelles avec les caractÃ©ristiques donnÃ©es, maintenir le nombre nÃ©cessaire de machines dans le groupe et redÃ©marrer les instances interrompues si elles s'arrÃªtent.  Peu importe si un arrÃªt forcÃ© s'est produit ou si 24 heures se sont Ã©coulÃ©es depuis le dÃ©but.  Une seule chose est importante: un redÃ©marrage se produira s'il y a des ressources disponibles.  Les groupes d'instances Yandex rendent le travail avec des machines virtuelles interrompues plus pratique, mais ne peuvent garantir que des capacitÃ©s libres existeront nÃ©cessairement dans une zone de disponibilitÃ© spÃ©cifique. <br><br><h2>  Performance Ã©conomique </h2><br>  Comme nous l'avons mentionnÃ©, les machines virtuelles interruptibles peuvent rÃ©duire le coÃ»t d'utilisation des ressources informatiques.  Au sein de Yandex, nous avons commencÃ© Ã  travailler sur une fonction similaire il y a plusieurs annÃ©es.  Pour diviser les tÃ¢ches informatiques en exÃ©cutables garantis et interruptibles, des investissements considÃ©rables ont Ã©tÃ© nÃ©cessaires.  Mais cela n'a pas Ã©tÃ© vain: au final, nous avons augmentÃ© le niveau d'utilisation utile de l'infrastructure serveur de 30-40% Ã  70-80%. <br><br><img src="https://habrastorage.org/webt/t5/co/jm/t5cojmli_xdhso9kjwoqbwciksk.png"><br><br>  Des fonctionnalitÃ©s similaires sont dÃ©sormais disponibles pour tous les utilisateurs de Yandex.Cloud en un seul clic.  Un exemple simple: si vous transfÃ©rez la moitiÃ© des machines virtuelles utilisÃ©es avec une charge du noyau Ã  cent pour cent au format d'interruption, vous pouvez Ã©conomiser jusqu'Ã  35 Ã  40% du budget. <br><br>  Ã€ un coÃ»t rÃ©duit, des ressources CPU et RAM sont disponibles.  L'espace disque et les adresses IP sont payÃ©s Ã  des tarifs rÃ©guliers.  Voici ce qu'un simple calcul montre pour la plate-forme Cascade Lake. <br><br><img src="https://habrastorage.org/webt/2z/u2/vh/2zu2vhioohfo6zfv77cl1a3lweq.png"><br><br>  Si vous le souhaitez, vous pouvez comparer le coÃ»t d'utilisation des machines virtuelles dans diffÃ©rents modes Ã  l'aide d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">calculatrice</a> . <br><br>  Nous espÃ©rons que nous avons pu apporter un peu de clartÃ© et donner quelques exemples utiles dans lesquels vous pouvez utiliser des machines virtuelles interruptibles pour rÃ©duire le coÃ»t des ressources informatiques sans perdre en qualitÃ© dans l'exÃ©cution des tÃ¢ches. <br><br><h3>  Autres publications sur Cloud on HabrÃ© </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Architecture du service Message Queuing distribuÃ©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Architecture de l'Ã©quilibreur de charge rÃ©seau</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MPLS est partout.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment est l'infrastructure rÃ©seau Yandex.Cloud</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment faire Ã©voluer des bases de donnÃ©es sans temps d'arrÃªt.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple de trois hÃ´tes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex ouvre le Cloud.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Architecture de la nouvelle plateforme</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457538/">https://habr.com/ru/post/fr457538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457522/index.html">Augmentez votre service de liste de diffusion ou utilisez des solutions toutes faites? Ce que j'ai appris pendant 5 ans chez UniSender</a></li>
<li><a href="../fr457524/index.html">CamÃ©ras de profondeur - rÃ©volution silencieuse (quand les robots verront) Partie 1</a></li>
<li><a href="../fr457526/index.html">Les mÃ©dias techniques comme bazar</a></li>
<li><a href="../fr457532/index.html">Il est grand temps de faire partie d'un projet open source</a></li>
<li><a href="../fr457534/index.html">Versions certifiÃ©es - le rÃ¢teau que nous choisissons</a></li>
<li><a href="../fr457540/index.html">Intel Optane DC Persistent Memory, un an plus tard</a></li>
<li><a href="../fr457542/index.html">Piratage et protection des lecteurs de chiffrement LUKS</a></li>
<li><a href="../fr457546/index.html">Demo Day: pourquoi tout cela et comment le faire UPD + Broadcast</a></li>
<li><a href="../fr457548/index.html">GÃ©nÃ©ration de signal PWM multiphasÃ© sur TMS320F28027</a></li>
<li><a href="../fr457550/index.html">De quoi l'industrie numÃ©rique doit-elle Ãªtre protÃ©gÃ©e</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>