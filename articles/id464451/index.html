<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¸ ğŸš£ğŸ» ğŸ‘­ Bagaimana saya melakukan pelacak parkir untuk orang-orang ğŸ‘°ğŸ¿ ğŸ‘©ğŸ¿ â™£ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, saya kembali menjepit. Saya tinggal di Eropa, dan bukannya denda karena parkir yang tidak tepat dan truk derek â€œclamperâ€, mereka mengik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya melakukan pelacak parkir untuk orang-orang</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464451/">  Baru-baru ini, saya kembali menjepit.  Saya tinggal di Eropa, dan bukannya denda karena parkir yang tidak tepat dan truk derek â€œclamperâ€, mereka mengikat roda mobil Anda.  Untuk keluar, Anda perlu melakukan panggilan telepon, membayar jumlah bulat dan menunggu pria dengan kunci untuk mengangkat rantai.  Itu panjang, memalukan dan kadang-kadang (tergantung pada area) mahal mahal. <br><br>  Hari itu saya terlambat kemana-mana.  Menunggu pekerja menelepon dengan kunci, saya bertanya-tanya seberapa bodohnya saya.  Saya berlari masuk, meninggalkan mobil selama setengah jam, bukannya maksimum 20 menit gratis - tepatnya di menit ke-21 dan tertangkap.  Sialnya, van bergaris parkir tidak jauh, dan mereka langsung bereaksi.  Mereka biasa menangkap saya sebelumnya, karena berbagai alasan: Saya lupa, jangka waktu pembayaran telah berakhir, dan kadang-kadang saya tidak dapat menemukan mobil saya di jalan yang berliku. <br><br>  "Pasti ada aplikasi untuk semuanya," pikirku, dan mulai mempelajari app store.  Setelah banyak hasil yang meragukan, kepercayaan diri saya berkurang, dan saya memutuskan untuk mengklarifikasi: "pasti ada aplikasi android untuk semuanya."  Kemudian dia menemukan huavei-nya dan naik ke perut play store.  Dari sana, lebih banyak puing menumpahkan pada saya, dan, tenggelam dalam kerajinan canggung, saya meludah.  Entah saya entah bagaimana keliru, atau tidak ada pelacak parkir yang nyaman dan dapat dimengerti.  Kesimpulannya sederhana: jika kita tidak memiliki sesuatu, mari kita lakukan sendiri. <br><br>  Terhadap latar belakang, saya sudah melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konstruksi jangka panjang</a> , menghilangkan hampir semua waktu luang saya.  Saya memutuskan untuk istirahat dan mengambil jeda proyeksi.  Setelah memperkirakan fungsionalitas yang diinginkan, saya membayangkan periode satu setengah bulan, dan, melihat ke depan, saya akan mengatakan bahwa, pada prinsipnya, ternyata lebih cepat.  Hasilnya adalah aplikasi yang ringkas dan bersih di kedua platform, sangat nyaman.  Sekarang saya menggunakannya sendiri dan menyarankan Anda mencobanya. <br><br><img src="https://habrastorage.org/webt/2w/wl/zl/2wwlzlz-6vimwsq9dt2xmyv-bqk.png" alt="gambar" width="800"><br><a name="habracut"></a><br><h3>  Ide </h3><br>  Jadi apa yang saya inginkan dari pelacak parkir?  Apa yang selalu saya lewatkan ketika saya mendapat denda?  Setelah berpikir, saya merumuskan pengantar berikut: <br><br><ol><li>  Sederhana  Idealnya, satu tombol.  Minimal fungsi yang mengganggu: tidak ada profil, riwayat parkir, dukungan untuk beberapa mobil secara bersamaan, dll. </li><li>  Dengan notifikasi.  Saya tidak akan lupa tentang mobil, jika aplikasi mengingatkan saya: bro, Anda memiliki parkir di sana, dan itu akan segera kedaluwarsa. </li><li>  Pertimbangkan waktu berjalan.  Ini adalah pemikiran paling sederhana yang belum pernah saya lihat di mana pun.  Saya tidak perlu tahu bahwa parkir akan berakhir dalam 5 menit jika saya setengah jam darinya.  Saya perlu diingatkan agar saya dapat <b>pergi</b> ke mobil beberapa menit sebelum akhir dan pergi. </li><li>  Rute dan navigasi ke tempat parkir.  Navigasi, tentu saja, melalui Google atau Apple Maps, tetapi rute dapat ditampilkan di aplikasi Anda.  Ini akan membantu jika Anda meninggalkan mobil di area yang tidak dikenal, timer berdetak, dan Anda berputar-putar di sepanjang jalan yang sama. </li></ol><br>  Saya memilih Flutter sebagai basis teknologi, karena saya telah bekerja dengannya untuk beberapa waktu dan menganggapnya bagus.  Untuk rute saya memutuskan untuk menggunakan API DI SINI, juga bukan untuk pertama kalinya, tetapi untuk peta - Mapbox.  Saya membuat sketsa beberapa opsi untuk antarmuka, memilih yang paling minimalis dan terlibat dalam pekerjaan. <br><br><h3>  Pengembangan </h3><br>  Pada prinsipnya, tidak banyak yang bisa diceritakan tentang proses pengembangan itu sendiri.  Tidak ada bagian server di sini, klien paling sederhana, yang pada dasarnya terdiri dari satu tampilan besar di berbagai negara.  Pada halaman pertama, Anda memilih preset - 1, 2, 4, 6 jam - atau menggunakan slider untuk menyesuaikan periode parkir Anda.  Setelah mencobanya secara langsung, saya menyadari bahwa slidernya cukup kasar, dan menambahkan tombol "+" dan "-" ke dalamnya.  Nuansa lucu dan agak tidak jelas di sini adalah saat Anda memilih, waktu terus berjalan.  Jadi, Anda perlu memperbarui tampilan ini secara real time.  Setelah memilih istilah, klik pada satu-satunya tombol di bawah ini, dan lokasi dan data waktu disimpan, dan parkir dimulai.  Penting untuk dicatat bahwa saya pada dasarnya menyimpan semua data di papan, tidak ada yang ditransfer ke server apa pun.  Di masa depan, ini, omong-omong, akan menciptakan kesulitan bagi saya, tetapi lebih pada nanti. <br><br>  Halaman kedua sebenarnya adalah penghitung waktu parkir.  Saya mencoba banyak opsi di sini: Saya mulai dengan prototipe info yang sangat berlebihan, kemudian secara iteratif menyingkirkan dan disederhanakan hingga batasnya.  Saya benar-benar ingin status parkir ditampilkan secara visual, bukan angka kering, jadi elemen utama halaman ini bersama dengan peta adalah bagan donat.  Ini menunjukkan waktu yang telah berlalu, waktu berjalan dan waktu yang tersisa.  Jika Anda tidak berada di dekat mobil dan waktu berjalannya adalah nol, tombol mulai navigasi akan muncul, dan peta menunjukkan perkiraan rute ke tempat parkir.  Faktanya, itu saja. <br><br>  Meskipun kesederhanaan visualnya, layar ini cukup membuat saya jengkel.  Harus dipahami bahwa ketika parkir aktif, sejumlah proses terjadi secara bersamaan: <br><br><ul><li>  waktu berlalu dan timer habis </li><li>  Anda bergerak dan waktu perjalanan berubah </li></ul><br>  Semua ini terjadi secara real time dan harus langsung ditampilkan pada antarmuka.  Bagan harus dibangun kembali dengan lancar, peta harus bergerak dan menggambar ulang rute, jika ada risiko terlambat atau parkir berakhir, peringatan yang sesuai juga akan muncul.  Selain itu: ketika Anda menutup dan membuka aplikasi, Anda harus mengembalikan semua ini dengan benar.  Dan akhirnya, yang menakutkan: semua fungsi harus dapat bekerja di latar belakang, karena aplikasi akan menghabiskan sebagian besar hidupnya di latar belakang.  Hal-hal seperti itu. <br><br>  Saya tidak akan menjelaskan implementasi secara rinci, saya hanya bisa mengatakan bahwa pekerjaan flutter dengan negara bagian sangat layak.  Di mana di android murni desain berorientasi objek yang berlebihan akan berubah, ternyata sederhana dan elegan.  Keadaan normal yang dapat dimengerti, penjilidan yang masuk akal ke model - dalam tugas seperti ini bergetar.  Namun, itu bukan tanpa tiang tembok yang khas: misalnya, perpustakaan lokal yang bekerja dengan peta tidak memiliki transisi animasi ke koordinat baru.  Saya harus masuk ke kodenya, mengeluarkan beberapa metode pribadi dan menambahkan kruk saya.  Ada kemungkinan bahwa fungsi ini akan ditambahkan segera, tetapi ini adalah keseluruhan bergetar - dengan semua daya tariknya, bersiaplah untuk penemuan seperti itu. <br><br>  Segalanya tampak berjalan lancar.  Sebenarnya, tidak banyak yang lain: beberapa dialog, dan halaman intro di mana pacar saya (dia seorang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seniman</a> ) menggambar animasi yang bagus.  Akhirnya, saya menerjemahkan seluruh aplikasi ke dalam bahasa Rusia, termasuk peta.  Tapi kemudian rasa sakit mulai: pemberitahuan. <br><br><h3>  Notifikasi </h3><br>  Bagi saya, kemampuan untuk mengirim pemberitahuan pintar adalah kunci ke aplikasi - tanpa itu, tidak ada yang perlu diributkan.  Namun, ketika saya mulai mengerjakan fitur ini, saya menyadari bahwa saya telah menginjak kaki saya sendiri.  Sebenarnya ada dua masalah.  Yang pertama adalah flutter, yang tidak tahu cara bekerja dengan perangkat api tingkat rendah di luar kotak: Anda perlu menulis paking dalam bentuk plug-in yang berisi dua kode asli dan abstraksi pada panah.  Masalah kedua adalah posisi fundamental saya bahwa semuanya harus dilakukan di atas kapal.  Jadi, kami meringkas apa yang dibutuhkan.  Perlu bahwa aplikasi <b>di latar belakang</b> : <br><br><ol><li>  Terus memantau geolokasi Anda, </li><li>  Memeriksa berapa menit berjalan kaki ke tempat parkir </li><li>  Diperiksa dengan timer yang kedaluwarsa </li><li>  Jika ada risiko tidak memiliki waktu untuk kembali, pemotretan pemberitahuan </li></ol><br>  Rasakan skala tragedi itu?  Jelas bahwa tidak ada kemampuan teknis untuk melakukan ini jika aplikasi benar-benar mati.  Tapi anggap saja diminimalkan, dan layar mati.  DI SINI api memberi saya rute dan perkiraan waktu berjalan, apakah ini berarti bahwa aplikasi akan mengirim permintaan spam di latar belakang?  Berapa banyak kode yang akan dijalankan?  Bagaimana dengan konsumsi memori dan energi? <br><br>  Saya duduk untuk berpikir.  Dimulai dengan yang kecil: secara teknis, flutter baru-baru ini memiliki kemampuan untuk mengeksekusi kode di latar belakang, itu disebut isolate.  Jika semuanya ditulis dengan benar, maka Anda dapat membangun logika dengan cara tertentu sehingga tidak semuanya berjalan dengan latar belakang, tetapi beberapa fungsi tertentu.  Memang, dalam mode diminimalkan, kita tidak perlu menggambar antarmuka atau memperbarui status - kita tertarik pada logika waktu penghitungan yang kosong, dan logika ini cukup kompak dan murah.  Pada saat yang sama, itu tidak boleh dipicu oleh perubahan geolokasi, seperti yang saya miliki di versi aslinya, tetapi oleh beberapa timer internal.  Karena notifikasi harus terbang, walaupun Anda tidak bergerak, tetapi duduk diam. <br><br>  Yah, kami menulis kode ringan yang dapat berjalan di latar belakang dan dikendalikan oleh timer.  Bagaimana kita dapat memicunya dalam kerangka aplikasi asli dan mengirimkan data geolokasi di sana?  Ternyata berbeda. <br><br>  Logika android dan iPhone dalam hal eksekusi kode di latar belakang sangat berbeda.  Untuk iPhone, tidak ada: kode latar belakang hanya dapat memicu peristiwa sistem dari jenis tertentu, misalnya, memutar audio streaming atau, untungnya bagi saya, memperbarui lokasi.  Untuk melakukan ini, cukup minta izin dan di bagian asli plug-in Flater berlangganan acara tersebut.  Dari sana, melalui saluran komunikasi tertentu (MethodChannel), kami memanggil panggilan balik dalam sebuah panah, meneruskan geodata ke sana dan memulai latar belakang dengan logika yang kita butuhkan.  Kecantikan <br><br>  Android bekerja secara berbeda.  Secara teknis, ia memiliki kemampuan untuk mengeksekusi kode di latar belakang tanpa terikat dengan peristiwa sistem - untuk ini Anda perlu menggambarkan layanan.  Itu tergantung secara terpisah dari aplikasi, baik sepenuhnya di latar belakang atau di atas tanah kosong (di sana itu membuatnya dirasakan oleh pesan terlampir pada orang buta).  Tampaknya masalah telah teratasi: di bagian asli plugin, kami menggambarkan layanan latar belakang yang melacak lokasi dan menarik kode Darth.  Namun, ada nuansa.  Dari Android versi 8.0, sikap terhadap layanan tersebut telah berubah: sekarang, jika aplikasi diminimalkan pada saat ini, layanan latar belakangnya sangat terpotong oleh poros untuk menghemat energi.  Dan, jika kode Anda melakukan, misalnya, backup data, maka pada prinsipnya Anda tidak peduli pada saat yang tepat sumbu akan membiarkannya bekerja - hal utama adalah ia bekerja.  Namun dalam kasus saya, kami perlu melacak perubahan lokasi dalam waktu yang hampir nyata, dan waktu sangat penting di sini.  Oleh karena itu, satu-satunya jalan keluar adalah memulai layanan dengan mudah.  Kami menjelaskan pemberitahuan kecil yang terpasang di tirai, berlangganan ke lokasi, mengirimkannya ke anak panah melalui MethodChannel.  Segalanya tampak bekerja. <br><br>  Omong-omong, kembali ke masalah memori, konsumsi energi dan jumlah permintaan - kode dijalankan ketika lokasi digeser ke 50 meter, atau oleh timer.  Selain itu, dia sendiri sangat ringan, dan permintaan tidak melewati saya, tetapi langsung pergi ke api DI SINI.  Saya sendiri tidak menerima data apa pun dan tidak menyimpannya di mana pun.  Secara umum, implementasi seperti itu dijelaskan dengan sangat baik di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , ini adalah blog dari salah satu insinyur flutter - kode ini juga dilampirkan di sana.  Contohnya agak berbeda, tetapi pendekatan umumnya jelas, jadi saya sarankan membacanya. <br><br><h3>  Hasil </h3><br>  Faktanya, itu saja.  Selama sebulan waktu luang, saya mendapat aplikasi yang dengan sempurna memecahkan masalah tertentu.  Saya harap artikel ini akan menarik bagi seseorang, dan aplikasi ini akan menyelamatkan Anda dari denda dan stres.  Anda dapat melihat dan memarahi di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Android</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">iOS</a> . <br><br>  Terima kasih atas perhatiannya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id464451/">https://habr.com/ru/post/id464451/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id464435/index.html">Bagaimana tidak tenggelam dalam lautan teknologi dan pendekatan: pengalaman 50 ahli</a></li>
<li><a href="../id464437/index.html">Bagaimana tim pengembangan dapat menghasilkan lebih banyak dengan membuat situs lalu lintas [Panduan Penerapan]</a></li>
<li><a href="../id464443/index.html">Natas Web. Passage dari platform KKP bertujuan untuk mengeksploitasi kerentanan Web. Bagian 2</a></li>
<li><a href="../id464445/index.html">Mengapa benar-benar mustahil menjadi vegetarian</a></li>
<li><a href="../id464447/index.html">Hitung Scoring de la Fer atau studi tentang penilaian kredit sebagai bagian dari memperluas wawasan seseorang. Bagian 1</a></li>
<li><a href="../id464453/index.html">Husky: hapus, tinggalkan, ganti? Apa?</a></li>
<li><a href="../id464457/index.html">22 situs untuk seorang programmer untuk membantu Anda berbicara bahasa Inggris</a></li>
<li><a href="../id464459/index.html">Empat aturan UX intuitif</a></li>
<li><a href="../id464463/index.html">iOS Responder Chain atau Apa yang mereka tanyakan pada saat wawancara</a></li>
<li><a href="../id464465/index.html">Bagaimana dan mengapa kami bermigrasi Preply ke Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>