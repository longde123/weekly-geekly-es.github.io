<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàÇÔ∏è üì™ üëè Optimizaci√≥n de consultas de bases de datos en el ejemplo de servicio B2B para constructores üòû ü§üüèª üê≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øC√≥mo crecer 10 veces por debajo del n√∫mero de consultas de la base de datos sin pasar a un servidor m√°s eficiente y mantener el sistema funcionando? ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimizaci√≥n de consultas de bases de datos en el ejemplo de servicio B2B para constructores</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461071/"> ¬øC√≥mo crecer 10 veces por debajo del n√∫mero de consultas de la base de datos sin pasar a un servidor m√°s eficiente y mantener el sistema funcionando?  Le dir√© c√≥mo luchamos con la degradaci√≥n del rendimiento de nuestra base de datos, c√≥mo optimizamos las consultas SQL para atender a la mayor cantidad de usuarios posible y no aumentar el costo de los recursos inform√°ticos. <br><a name="habracut"></a><br>  Realizo un servicio de gesti√≥n de procesos de negocio en empresas constructoras.  Alrededor de 3 mil empresas trabajan con nosotros.  M√°s de 10 mil personas trabajan con nuestro sistema durante 4-10 horas todos los d√≠as.  Resuelve varias tareas de planificaci√≥n, alertas, advertencias, validaciones ... Utilizamos PostgreSQL 9.6.  Tenemos alrededor de 300 tablas en la base de datos y todos los d√≠as se env√≠an hasta 200 millones de solicitudes (10 mil diferentes).  En promedio, tenemos 3-4 mil solicitudes por segundo, en los momentos m√°s activos m√°s de 10 mil solicitudes por segundo.  La mayor√≠a de las solicitudes son OLAP.  Hay muchas menos adiciones, modificaciones y eliminaciones, es decir, la carga OLTP es relativamente peque√±a.  Le di todas estas cifras para que pueda evaluar el alcance de nuestro proyecto y comprender c√≥mo nuestra experiencia puede serle √∫til. <br><br><h3>  La primera foto.  L√≠rico </h3><br>  Cuando comenzamos el desarrollo, realmente no pensamos en qu√© tipo de carga habr√° en la base de datos y qu√© haremos si el servidor deja de funcionar.  Al dise√±ar la base de datos, seguimos las recomendaciones generales e intentamos no dispararnos en el pie, pero m√°s all√° de consejos generales como ‚Äúno use el patr√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Valores de Atributo de Entidad</a> , no fuimos.  Dise√±ado en base a los principios de normalizaci√≥n, evitando la redundancia de datos y no le importaba acelerar ciertas consultas.  Tan pronto como llegaron los primeros usuarios, nos encontramos con un problema de rendimiento.  Como de costumbre, no est√°bamos preparados para esto.  Los primeros problemas fueron simples.  Como regla general, todo se decidi√≥ agregando un nuevo √≠ndice.  Pero lleg√≥ un momento en que los parches simples dejaron de funcionar.  Al darnos cuenta de que no hay suficiente experiencia y que cada vez es m√°s dif√≠cil entender la causa de los problemas, contratamos especialistas que nos ayudaron a configurar el servidor correctamente, conectar el monitoreo y mostrar d√≥nde buscar para obtener <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estad√≠sticas</a> . <br><br><h3>  La segunda foto.  Estad√≠stica </h3><br>  Entonces, tenemos alrededor de 10 mil consultas diferentes que se ejecutan en nuestra base de datos por d√≠a.  De estos 10 mil, hay monstruos que corren 2-3 millones de veces con un tiempo de ejecuci√≥n promedio de 0.1-0.3 ms y hay consultas con un tiempo de ejecuci√≥n promedio de 30 segundos que se llaman 100 veces al d√≠a. <br><br>  No fue posible optimizar las 10 mil consultas, por lo que decidimos averiguar hacia d√≥nde dirigir los esfuerzos para mejorar el rendimiento de la base de datos correctamente.  Despu√©s de varias iteraciones, comenzamos a dividir las solicitudes en tipos. <br><br><h4>  TOP consultas </h4><br>  Estas son las consultas m√°s dif√≠ciles que toman m√°s tiempo (tiempo total).  Estas son consultas que se llaman con mucha frecuencia o consultas que toman mucho tiempo (las consultas largas y frecuentes se optimizaron incluso en las primeras iteraciones de la lucha por la velocidad).  Como resultado, el servidor pasa la mayor parte del tiempo en su ejecuci√≥n en total.  Adem√°s, es importante separar las solicitudes principales por el tiempo de ejecuci√≥n total y por separado por tiempo de E / S.  Las formas de optimizar tales consultas son ligeramente diferentes. <br><br>  La pr√°ctica habitual de todas las empresas es trabajar con solicitudes TOP.  Hay pocos de ellos, la optimizaci√≥n de incluso una solicitud puede liberar del 5 al 10% de los recursos.  Sin embargo, a medida que el proyecto envejece, la optimizaci√≥n de las consultas TOP se convierte en una tarea cada vez m√°s trivial.  Todos los m√©todos simples ya se han resuelto, e incluso la solicitud m√°s "dif√≠cil" quita "solo" el 3-5% de los recursos.  Si las consultas TOP en total toman menos del 30-40% del tiempo, entonces lo m√°s probable es que ya haya hecho esfuerzos para que funcionen r√°pidamente y es hora de pasar a optimizar las consultas del siguiente grupo. <br>  Queda por responder la pregunta cu√°ntas consultas principales incluir en este grupo.  Por lo general, tomo no menos de 10, pero no m√°s de 20. Intento asegurarme de que el tiempo del primero y el √∫ltimo en el grupo TOP no difiera m√°s de 10 veces.  Es decir, si el tiempo de ejecuci√≥n de la consulta cae bruscamente de 1 lugar a 10, entonces tomo TOP-10, si la ca√≠da es m√°s suave, entonces aumento el tama√±o del grupo a 15 o 20. <br><img src="https://habrastorage.org/webt/y5/j5/yx/y5j5yxa6u4kxlpahplsaprh07ro.png" alt="imagen"><br><br><h4>  Los campesinos medios (medianos) </h4><br>  Estas son todas las solicitudes que van inmediatamente despu√©s de TOP, con la excepci√≥n del √∫ltimo 5-10%.  Por lo general, en la optimizaci√≥n de estas solicitudes particulares reside la capacidad de aumentar considerablemente el rendimiento del servidor.  Estas consultas pueden "pesar" hasta un 80%.  Pero incluso si su participaci√≥n ha excedido el 50%, entonces es hora de mirarlos m√°s de cerca. <br><br><h4>  Cola </h4><br>  Como se dijo, estas solicitudes se env√≠an al final y toman del 5 al 10% del tiempo.  Puede olvidarse de ellos solo si no utiliza herramientas de an√°lisis de consultas autom√°ticas, entonces su optimizaci√≥n tambi√©n puede ser barata. <br><br>  ¬øC√≥mo evaluar cada grupo? <br><br>  Utilizo una consulta SQL que ayuda a hacer una evaluaci√≥n de este tipo para PostgreSQL (estoy seguro de que para muchos otros DBMS puede escribir una consulta similar) <br><br><div class="spoiler">  <b class="spoiler_title">Consulta SQL para estimar el tama√±o de los grupos TOP-MEDIUM-TAIL</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_top) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_top, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_medium) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_medium, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(time_tail) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> sum_tail <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_top, <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &gt; <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">800</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_medium, <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> rn &gt; <span class="hljs-number"><span class="hljs-number">800</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> tt_percent <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> time_tail <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> total_time / (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(total_time) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> tt_percent, <span class="hljs-keyword"><span class="hljs-keyword">query</span></span>, ROW_NUMBER () <span class="hljs-keyword"><span class="hljs-keyword">OVER</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rn <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> t ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ts</code> </pre> <br></div></div><br>  El resultado de la consulta son tres columnas, cada una de las cuales contiene un porcentaje del tiempo que se dedica a procesar las solicitudes de este grupo.  Dentro de la consulta, hay dos n√∫meros (en mi caso, 20 y 800) que separan las solicitudes de un grupo de otro. <br><br>  As√≠ es como las proporciones de solicitudes en el momento del inicio del trabajo de optimizaci√≥n ahora se correlacionan aproximadamente. <br><br><img src="https://habrastorage.org/webt/db/at/i_/dbati_rdn49yulwdicigqdvrgew.png"><br><br>  El diagrama muestra que la proporci√≥n de solicitudes TOP ha disminuido dr√°sticamente, pero los "campesinos medios" han crecido. <br>  Inicialmente, los errores TOP golpearon las consultas TOP.  Con el tiempo, las enfermedades infantiles desaparecieron, la proporci√≥n de solicitudes TOP se redujo y se tuvieron que hacer m√°s esfuerzos para acelerar las solicitudes dif√≠ciles. <br><br><div class="spoiler">  <b class="spoiler_title">Para obtener el texto de las solicitudes, usamos dicha solicitud</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ROW_NUMBER () <span class="hljs-keyword"><span class="hljs-keyword">OVER</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rn, total_time / (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(total_time) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements) * <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> tt_percent, <span class="hljs-keyword"><span class="hljs-keyword">query</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_statements <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> total_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> T <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> rn &lt;= <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-comment"><span class="hljs-comment">-- TOP -- rn &gt; 20 AND rn &lt;= 800 -- MEDIUM -- rn &gt; 800 -- TAIL</span></span></code> </pre><br></div></div><br>  Aqu√≠ hay una lista de los trucos m√°s utilizados que nos ayudaron a acelerar las consultas TOP: <br><br><ul><li>  Redise√±ar sistemas, por ejemplo, procesar la l√≥gica de notificaci√≥n en el intermediario de mensajes en lugar de consultas peri√≥dicas </li><li>  Agregar o modificar √≠ndices </li><li>  Reescribir consultas ORM en SQL puro </li><li>  Reescribir l√≥gica de carga de datos diferida </li><li>  Almacenamiento en cach√© a trav√©s de la desnormalizaci√≥n de datos.  Por ejemplo, tenemos un enlace entre las tablas Entrega -&gt; Factura -&gt; Solicitud -&gt; Solicitud.  Es decir, cada entrega se asocia con la aplicaci√≥n a trav√©s de otras tablas.  Para no vincular todas las tablas en cada solicitud, duplicamos el enlace a la aplicaci√≥n en la tabla Entrega. </li><li>  Almacenamiento en cach√© de tablas est√°ticas con directorios y rara vez cambio de tablas en la memoria del programa. </li></ul><br>  A veces, los cambios arrastraron un redise√±o impresionante, pero dieron el 5-10% de la descarga del sistema y se justificaron.  Con el tiempo, el escape se hizo cada vez menos, y el redise√±o se hizo cada vez m√°s serio. <br><br>  Luego llamamos la atenci√≥n sobre el segundo grupo de solicitudes: el grupo de campesinos medios.  Tiene muchas m√°s solicitudes y parec√≠a que tomar√≠a mucho tiempo analizar a todo el grupo.  Sin embargo, la mayor√≠a de las consultas resultaron ser muy simples para la optimizaci√≥n, y muchos problemas se repitieron docenas de veces en diferentes variaciones.  Aqu√≠ hay ejemplos de algunas optimizaciones t√≠picas que aplicamos a docenas de consultas similares y cada grupo de consultas optimizadas descarg√≥ la base de datos en un 3-5%. <br><br><ul><li>  En lugar de verificar la presencia de registros con COUNT y un escaneo completo de la tabla, EXISTE <br></li><li>  Nos deshicimos de DISTINCT (no hay una receta general, pero a veces puedes deshacerte de ella f√°cilmente acelerando la solicitud 10-100 veces). <br><br>  Por ejemplo, en lugar de consultar para seleccionar todos los controladores en una tabla de entrega grande (ENTREGA) <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> P.ID, P.FIRST_NAME, P.LAST_NAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> DELIVERY D <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> PERSON P <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> D.DRIVER_ID = P.ID</code> </pre><br>  hizo una solicitud para una tabla PERSON relativamente peque√±a <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> P.ID, P.FIRST_NAME, P.LAST_NAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> PERSON <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> D.ID <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> DELIVERY <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> D.DRIVER_ID = P.ID)</code> </pre><br>  Parece que usamos una subconsulta de correlaci√≥n, pero da una aceleraci√≥n de m√°s de 10 veces. <br></li><li>  En muchos casos, COUNT y <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reemplazado por el c√°lculo del valor aproximado</a> <br></li><li>  en lugar de <br><br><pre> <code class="sql hljs">UPPER(s) LIKE JOHN%'</code> </pre><br>  usar <br><br><pre> <code class="sql hljs">s ILIKE ‚ÄúJohn%‚Äù</code> </pre><br></li></ul><br>  Cada solicitud espec√≠fica a veces se aceler√≥ 3-1000 veces.  A pesar del rendimiento impresionante, al principio nos pareci√≥ que no ten√≠a sentido optimizar la consulta, que se ejecut√≥ durante 10 ms, incluida en el tercer centenar de las consultas m√°s pesadas y en el tiempo total de carga de la base de datos tom√≥ cent√©simas de porcentaje.  Pero aplicando la misma receta a un grupo de solicitudes similares, recuperamos varios por ciento.  Para no perder el tiempo visualizando manualmente los cientos de consultas, escribimos varios scripts simples que, utilizando expresiones regulares, encontraron consultas similares.  Como resultado, la b√∫squeda autom√°tica de grupos de consulta nos permiti√≥ mejorar a√∫n m√°s nuestro rendimiento al realizar esfuerzos modestos. <br><br>  Como resultado, hemos estado trabajando en el mismo hardware durante tres a√±os.  La carga diaria promedio es de aproximadamente el 30%, en los picos alcanza el 70%.  La cantidad de solicitudes, as√≠ como la cantidad de usuarios, ha aumentado aproximadamente 10 veces.  Y todo esto gracias al monitoreo constante de estos mismos grupos de consultas TOP-MEDIUM.  Tan pronto como aparece una nueva solicitud en el grupo TOP, la analizamos inmediatamente e intentamos acelerarla.  Revisamos el grupo MEDIO una vez por semana utilizando scripts de an√°lisis de consultas.  Si encuentra nuevas solicitudes que ya sabemos c√≥mo optimizar, las cambiamos r√°pidamente.  A veces encontramos nuevos m√©todos de optimizaci√≥n que se pueden aplicar a varias consultas a la vez. <br><br>  Seg√∫n nuestras previsiones, el servidor actual resistir√° un aumento en el n√∫mero de usuarios en otras 3-5 veces.  Es cierto, tenemos una carta de triunfo m√°s en la manga; todav√≠a no hemos traducido las consultas SELECT al espejo, como se recomienda.  Pero no lo hacemos conscientemente, ya que primero queremos agotar por completo las posibilidades de optimizaci√≥n "inteligente" antes de activar la "artiller√≠a pesada". <br>  Una mirada cr√≠tica al trabajo realizado puede sugerir el uso de escala vertical.  Compre un servidor m√°s potente, en lugar de perder el tiempo de los especialistas.  Es posible que el servidor no cueste tanto, especialmente porque los l√≠mites de escala vertical a√∫n no se han agotado.  Sin embargo, solo el n√∫mero de solicitudes aument√≥ 10 veces.  Durante varios a√±os, la funcionalidad del sistema ha aumentado y ahora hay m√°s variedades de solicitudes.  La funcionalidad que se debi√≥ al almacenamiento en cach√© se realiza mediante menos solicitudes, adem√°s, solicitudes m√°s eficientes.  Por lo tanto, puede multiplicar de forma segura por otros 5 para obtener el coeficiente de aceleraci√≥n real.  Entonces, seg√∫n las estimaciones m√°s conservadoras, podemos decir que la aceleraci√≥n fue de 50 o m√°s veces.  Agitar verticalmente el servidor 50 veces costar√≠a m√°s.  Especialmente teniendo en cuenta que una vez que la optimizaci√≥n se lleva a cabo todo el tiempo, y cada mes llega una factura por un servidor alquilado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/461071/">https://habr.com/ru/post/461071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461059/index.html">Escribir una aplicaci√≥n de Android para fan√°ticos del cine - Parte 1 (creaci√≥n de prototipos)</a></li>
<li><a href="../461061/index.html">Aleaciones de magnesio, l√≠mites gemelos y segregaci√≥n</a></li>
<li><a href="../461063/index.html">Interacci√≥n de R con bases de datos en el ejemplo de Microsoft SQL Server y otros DBMS</a></li>
<li><a href="../461067/index.html">Las 65 preguntas principales de SQL de las entrevistas de trabajo para las que deber√≠a estar preparado en 2019. Parte 1</a></li>
<li><a href="../461069/index.html">C√°maras IP Nobelic para exteriores: pruebas, tecnolog√≠as y capacidades de los sistemas de videovigilancia Ivideon</a></li>
<li><a href="../461073/index.html">Conectamos mapas en l√≠nea al navegador en el tel√©fono inteligente. Parte 3 - OverpassTurbo</a></li>
<li><a href="../461075/index.html">Inteligencia empresarial. Objetos inform√°ticos, componentes, herramientas.</a></li>
<li><a href="../461077/index.html">¬øC√≥mo se cocinan los pentesters? Pruebas de entrada para pasantes de seguridad digital</a></li>
<li><a href="../461079/index.html">Ciudad sin atascos</a></li>
<li><a href="../461081/index.html">El d√≠a que Dodo se detuvo. Script asincr√≥nico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>