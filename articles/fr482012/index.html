<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛴️ 🔑 🈚️ Raspberry Pi et iperf - testeur de bande passante pour les appareils Smart Home et IoT 🈵 🙉 👨🏻‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le cadre de mon projet précédent, «Vidéophone de Raspberry Pi», j'ai utilisé l'utilitaire Iperf pour configurer l'équipement et résoudre le probl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raspberry Pi et iperf - testeur de bande passante pour les appareils Smart Home et IoT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482012/"><img src="https://habrastorage.org/webt/b_/k5/bo/b_k5bolvds_-izsufj8ovug4efs.jpeg"><br><br>  Dans le cadre de mon projet précédent, «Vidéophone de Raspberry Pi», j'ai utilisé l'utilitaire Iperf pour configurer l'équipement et résoudre le problème.  Le programme est connu depuis longtemps des spécialistes travaillant avec les réseaux locaux. <br><br>  L'utilitaire vous permet de générer du trafic pour analyser la bande passante du réseau. <br><br>  Avec son aide, il est assez simple de mesurer la bande passante réseau maximale entre deux appareils (serveur et client) et d'effectuer des tests de charge du canal de communication. <br>  Je pense que, en relation avec l'augmentation des appareils de réseau domestique, il sera très demandé, à la fois pour rechercher et analyser les dysfonctionnements (dysfonctionnements) au travail, et pour le placement optimal des équipements WiFi. <br><br>  Dans mon exemple, le programme a été installé sur le Raspberry Pi avec le système domotique MajorDoMo installé - l'image de base, et sur les appareils fonctionnant sous Windows (ordinateur portable), Android (smartphone, TV, lecteur multimédia). <br><br>  Sous le chat, un peu d'installation et de test, ainsi qu'un petit exemple d'intégration dans le système domotique MajorDoMo. <br><a name="habracut"></a><br>  Sur le Raspberry Pi, qui sert de serveur domotique MajorDoMo et fonctionne sur Debian 9, nous installons l'utilitaire iperf. <br><br><pre><code class="plaintext hljs">sudo apt-get install iperf</code> </pre> <br>  Par défaut, la version 2.0.9 est installée.  Il y a deux options pour iperf: iperf 2 et iperf 3. Ils ne sont pas compatibles entre eux, pour installer la 3ème version, vous devez spécifier la commande <br><br><pre> <code class="plaintext hljs">sudo apt-get install iperf3</code> </pre> <br>  Sur le deuxième appareil, si nous prenons un PC ou un ordinateur portable sous Windows, installez Jperf (installé à la fois 2.0 et 2.2).  Jperf est un complément graphique java pour Iperf.  L'add-on est multiplateforme, fonctionne à la fois sous Windows et sous les systèmes nix.  Jperf planifie la bande passante du canal en temps réel.  L'installation n'est pas requise; une machine java doit être installée dans le système d'exploitation. <br><br>  Nous connectons Ethernet avec le câble réseau Raspberry au routeur domestique, l'ordinateur portable est connecté au réseau WiFi domestique. <br><br>  Nous exécutons l'utilitaire sur Raspberry Pi en mode serveur, le client génère du trafic, le serveur l'attend. <br><br><pre> <code class="plaintext hljs">iperf -s -t 3600</code> </pre> <br>  où <b>–s</b> démarre en mode serveur, <b>–t 3600</b> pendant 3600 secondes ou 1 heure. <br>  Sur un ordinateur Windows, exécutez le fichier * .bat jperf.bat, entrez l'adresse du serveur, laissez le port par défaut, définissez la durée du test, cliquez sur l'icône de démarrage. <br><br>  Sur le serveur, nous obtenons les informations sous forme de texte, sur le client dans le graphique: <br><br><img src="https://habrastorage.org/webt/ua/wf/1e/uawf1eyl08phxwtvcg_o7aquj3m.png"><br><br>  Pour le système d'exploitation Android (smartphone, TV, décodeur TV, etc.), nous installons le programme du marché du jeu: Magic iPerf.  <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.nextdoordeveloper.miperf.miperf%26hl%3Dru" rel="nofollow">Magic iPerf</a> . <br><br>  Nous entrons l'adresse IP de notre RPi, les clés et commençons le test en déplaçant le curseur de la position arrêtée à la position commencée. <br><br><img src="https://habrastorage.org/webt/un/ok/3m/unok3m7bgexzu0gxhwduf82tly8.jpeg"><br><br>  L'aide sur les commandes (touches de lancement de l'utilitaire) peut être consultée en tapant dans le terminal ou l'application mobile - aide (-h). <br><br><img src="https://habrastorage.org/webt/bh/we/ei/bhweeiiscnzaagtsnkm3lpn_8je.jpeg"><br><br>  De plus: lors de l'utilisation du système domotique MajorDoMo, la configuration de base, l'image du Raspberri Pi. <br><br>  Lorsque le système démarre, le haut-parleur parle d'adresses IP.  Ce qui est assez pratique. <br>  Le serveur a également un nom d'hôte (un nom attribué à un ordinateur connecté au réseau qui identifie le réseau de manière unique et, ainsi, permet d'y accéder sans utiliser son adresse IP).  Même sans connaître l'adresse IP, nous pouvons nous connecter avec le terminal SSH, ou avec le client iperf en tapant à la place le nom IP: majordomopi. <br><br>  Un petit avantage du RPi, son coût relativement faible et ses dimensions, vous permettant de placer un mini PC en le connectant avec un câble réseau à un routeur, que ce soit dans une armoire, une table de chevet ou un rack 19 ". <br><br>  Dans la configuration de base de MajorDoMo, par défaut, il y a 3 boutons de commande qui ne sont occupés par rien, sur la page principale du système, c'est: lumière 1, lumière 2, lumière 3. <br><br><img src="https://habrastorage.org/webt/it/tx/r9/ittxr9mhkxo-etbh_cjygayaxek.png"><br><br>  Essayons d'en attribuer un pour tester la bande passante du réseau. <br><br>  Ouvrez la page de démarrage de MajorDoMo.  Allez dans <b>Panneau de configuration - Périphériques - Périphériques simples - Modifier le commutateur 1 - Actions</b> . <br><br>  Dans les actions, nous écrivons une ligne de code en PHP qui exécute l'utilitaire Iperf de l'utilisateur Pi en mode serveur pendant 600 secondes: <br><br><pre> <code class="plaintext hljs">exec ('sudo -u pi iperf -s -t 600 &gt;/dev/null &amp;');</code> </pre> <br><br><img src="https://habrastorage.org/webt/9d/i9/sw/9di9swom40plizpie19m7ihn91c.png"><br><br>  Après cela, lorsque vous appuyez sur le bouton «lumière 1» à partir de la page principale du système domotique, Iperf démarre pendant 10 minutes, puis le débit de l'appareil souhaité est testé. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482012/">https://habr.com/ru/post/fr482012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482000/index.html">Aimez-vous votre entreprise?</a></li>
<li><a href="../fr482002/index.html">Rédaction d'un blog sur les microservices - Partie 3 «Utilisateur»</a></li>
<li><a href="../fr482004/index.html">Nous testons 1C sur le serveur VPS</a></li>
<li><a href="../fr482008/index.html">Constructeur LEGO et zéro absolu</a></li>
<li><a href="../fr482010/index.html">"Nouvelles épopées". Pour les développeurs, les ops et les curieux</a></li>
<li><a href="../fr482014/index.html">Accepter et décoder la télévision analogique en utilisant SDR et Python</a></li>
<li><a href="../fr482020/index.html">Tâches R, Monte Carlo et entreprise</a></li>
<li><a href="../fr482022/index.html">Regardez! 20 films sur la science et les scientifiques</a></li>
<li><a href="../fr482030/index.html">Vue.js: hooks du cycle de vie de vos composants et des composants tiers</a></li>
<li><a href="../fr482032/index.html">On joue avec le feu: on exécute du code arbitraire sur le développement iPhone 7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>