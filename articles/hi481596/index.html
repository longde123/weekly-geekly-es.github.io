<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСЛЁЯП┐ ЁЯЫБ ЁЯСйЁЯП┐тАНЁЯПн рдорд┐рдХрд░реЛрдЯрд┐рдХ рд▓реЙрдЧ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдИрдПрд▓рдХреЗ 7.5 рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдирд╛ ЁЯТГЁЯП┐ ЁЯУй ЁЯО╖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдЪрд╛рд░ рд╣реИ рдХрд┐ рдЖрдк рдИрдПрд▓рдХреЗ рдФрд░ рд▓реЙрдЧ рдФрд░ рдЖрдВрдХрдбрд╝реЛрдВ рдХреЗ рддрд╛рддреНрдХрд╛рд▓рд┐рдХ рд╕реНрд░реЛрддреЛрдВ рдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╣реИрдмрд░ рдХреЗ рдкрдиреНрдиреЛрдВ рдкрд░, рдореИрдВ рдПрдХ рд╡реНрдпрд╛рд╡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдорд┐рдХрд░реЛрдЯрд┐рдХ рд▓реЙрдЧ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдИрдПрд▓рдХреЗ 7.5 рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481596/">  рдпрд╣ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдЪрд╛рд░ рд╣реИ рдХрд┐ рдЖрдк рдИрдПрд▓рдХреЗ рдФрд░ рд▓реЙрдЧ рдФрд░ рдЖрдВрдХрдбрд╝реЛрдВ рдХреЗ рддрд╛рддреНрдХрд╛рд▓рд┐рдХ рд╕реНрд░реЛрддреЛрдВ рдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣реИрдмрд░ рдХреЗ рдкрдиреНрдиреЛрдВ рдкрд░, рдореИрдВ рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЙрджрд╛рд╣рд░рдг рджрд┐рдЦрд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВ рдХрд┐ рдХреИрд╕реЗ, рдПрдХ рд╣реЛрдо рдорд┐рдиреА-рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдИрдПрд▓рдХреЗ рд╕реНрдЯреИрдХ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд▓реЙрдЧ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╕рд╛рде рд╣рдиреАрдкреЛрдЯред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ ELK рд╕реНрдЯреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд▓реЙрдЧ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдореИрдВ рдиреЗрдЯрдлреНрд▓реЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рд╡рд░рдг рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдФрд░ рдЬрд╝реАрдХ рджреНрд╡рд╛рд░рд╛ рдкреАрдХ рдбрдВрдкред <br><br><img src="https://habrastorage.org/webt/ze/cb/qx/zecbqxrubn4v0mutaoewxzsp1zm.png"><br><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдкреА рдкрддрд╛ рдФрд░ рдЧреЗрдЯрд╡реЗ / рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рд╕реНрдорд╛рд░реНрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИ, рддреЛ рдЖрдк "рд╕реНрд╡рд╛рджрд┐рд╖реНрдЯ" рдЯреАрд╕реАрдкреА рдФрд░ рдпреВрдбреАрдкреА рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдХреЗ рдПрдХ рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣рдиреАрдкреЛрдЯ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рдмрд┐рд▓реНрд▓реА рдХреЗ рдиреАрдЪреЗ рдорд┐рдХрд░реЛрдЯрд┐рдХ рд░рд╛рдЙрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣рд╛рде рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд╡рд┐рдХреНрд░реЗрддрд╛ рд░рд╛рдЙрдЯрд░ (рдпрд╛ рдХреБрдЫ рдЕрдиреНрдп рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рдгрд╛рд▓реА) рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдмрд╕ рдереЛрдбрд╝рд╛ рдбреЗрдЯрд╛ рдкреНрд░рд╛рд░реВрдк рдФрд░ рд╡рд┐рдХреНрд░реЗрддрд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рдПрдХ рд╣реА рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓реЗрдЧрд╛ред <br><br><h3>  рддреНрдпрд╛рдЧ </h3><br>  рд▓реЗрдЦ рдореВрд▓ рд╣реЛрдиреЗ рдХрд╛ рджрд┐рдЦрд╛рд╡рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рд╕реЗрд╡рд╛рдУрдВ, рд╕реБрд░рдХреНрд╖рд╛, рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдУрдВ, рдЖрджрд┐ рдХреЗ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдХреЗ рдореБрджреНрджреЛрдВ рдХреЛ рд╕рдВрдмреЛрдзрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдЕрдХрд╛рджрдорд┐рдХ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдпрд╣ рдИрдПрд▓рдХреЗ рд╕реНрдЯреИрдХ рдХреА рдореВрд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓реЙрдЧ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рддрдВрддреНрд░ рдХреЗ рд╕рд╛рде рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдПрдХ рдиреМрд╕рд┐рдЦрд┐рдП рдХреЗ рд▓рд┐рдП рднреА рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдбреЛрдХрд░-рдХрдореНрдкреЛрдЬрд╝ рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЗ рд╕рдорд╛рди рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рддреИрдирд╛рдд рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ, рднрд▓реЗ рд╣реА рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣рд╛рде рдкрд░ рдПрдХ рдЕрд▓рдЧ рд╡рд┐рдХреНрд░реЗрддрд╛ рдХрд╛ рд░рд╛рдЙрдЯрд░ рд╣реЛ, рдЖрдкрдХреЛ рдмрд╕ рдбреЗрдЯрд╛ рдкреНрд░рд╛рд░реВрдк рдФрд░ рд╡рд┐рдХреНрд░реЗрддрд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдмрд╛рдХреА рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ ELK рдХреЗ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдФрд░ рдПрд▓рд┐рдЯрд┐рдХреНрд╕ рдЦреЛрдЬ рдореИрдкрд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рд╕реЗ рдЬреБрдбрд╝реА рд╕рднреА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХрд╛ рдпрдерд╛рд╕рдВрднрд╡ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛ред  рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╕рднреА рдШрдЯрдХреЛрдВ рдХреЛ <a href="https://github.com/mekhanme/elk-mikrot" rel="nofollow">github</a> рдкрд░ рд╣реЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗрд╡рд╛ рд╡рд┐рдиреНрдпрд╛рд╕ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ, рдореИрдВ рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг рдЕрдиреБрднрд╛рдЧ рдХрд░реВрдВрдЧрд╛, рдЬреЛ рдЗрд╕ рд╡реНрдпрд╡рд╕рд╛рдп рдореЗрдВ рдирдП рд▓реЛрдЧреЛрдВ рдХреЛ рд▓реЛрдХрдкреНрд░рд┐рдп рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдирд┐рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪрд░рдгреЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдЧрд╛ред <br><a name="habracut"></a><br><h3>  рдкрд░рд┐рдЪрдп </h3><br>  рд╕рд░реНрд╡рд░ рдкрд░ рд╣реА, рдореИрдВрдиреЗ рдкреНрд░реЛрдХреНрд╕рдореЙрдХреНрд╕ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рд╕рд┐рд╕реНрдЯрдо рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рдЗрд╕ рдкрд░ рдХреЗрд╡реАрдПрдо рдорд╢реАрди рдореЗрдВ рдбреЙрдХрдЯрд░ рдХрдВрдЯреЗрдирд░ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЧрдП рд╣реИрдВред  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдбреЙрдХрдЯрд░ рдФрд░ рдбреЙрдХ-рдХрдВрдкреЛрдЬрд╝ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЗрдВрдЯрд░рдиреЗрдЯ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг рд╣реИрдВред  рдореИрдВ рдбреЙрдХрд░ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдореБрджреНрджреЛрдВ рдкрд░ рд╕реНрдкрд░реНрд╢ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдореИрдВ рдбреЙрдХрдЯрд░-рдХрдореНрдкреЛрдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд▓рд┐рдЦреВрдВрдЧрд╛ред <br><br>  рд╣рдиреАрдкреЛрдЯ рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдПрд▓рд┐рд╕реНрдЯрд┐рдХреНрд╕, рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдФрд░ рдХрд┐рдмрд╛рдирд╛ рдХреЗ рдЕрдзреНрдпрдпрди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЙрддреНрдкрдиреНрди рд╣реБрдЖред  рдЕрдкрдиреЗ рдкреЗрд╢реЗрд╡рд░ рдХрд░рд┐рдпрд░ рдореЗрдВ, рдореИрдВ рдХрднреА рднреА рдЗрд╕ рд╕реНрдЯреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╢рд╛рд╕рд┐рдд рдФрд░ рдЖрдо рддреМрд░ рдкрд░ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реБрдЖ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рдкрд╛рд╕ рд╢реМрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рд╣реИрдВ, рдЬрд┐рдирдХреА рдмрджреМрд▓рдд рдореИрдВрдиреЗ рдПрд▓рд┐рдЯрд┐рдХреНрд╕рд░реНрдЪ рдФрд░ рдХрд┐рдмрд╛рдирд╛ рд╕рд░реНрдЪ рдЗрдВрдЬрди рджреНрд╡рд╛рд░рд╛ рджреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреА рдЦреЛрдЬ рдореЗрдВ рдПрдХ рдмрдбрд╝реА рд░реБрдЪрд┐ рд╡рд┐рдХрд╕рд┐рдд рдХреА рд╣реИ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдбреЗрдЯрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдФрд░ рдХрд▓реНрдкрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  8 рдЬреАрдмреА рд░реИрдо рдХреЗ рд╕рд╛рде рдореЗрд░рд╛ рдирдпрд╛ рдорд┐рдиреА рдПрдирдпреВрд╕реА рд╕рд░реНрд╡рд░ рдХреЗрд╡рд▓ рдПрдХ рд▓реЛрдЪрджрд╛рд░ рдиреЛрдб рдХреЗ рд╕рд╛рде рдИрдПрд▓рдХреЗ рд╕реНрдЯреИрдХ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред  рдЙрддреНрдкрд╛рджрди рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ, рдпрд╣, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рдЕрдиреБрд╢рдВрд╕рд┐рдд рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдмрд╕ рд╕рд╣реА рд╣реИред  рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рдореБрджреНрджреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рдПрдХ рдЯрд┐рдкреНрдкрдгреА рд╣реИред <br><br>  рдЗрдВрдЯрд░рдиреЗрдЯ рд╕рдорд╛рди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП <a href="https://habr.com/ru/post/324760/">рдИрдПрд▓рдХреЗ</a> рд╕реНрдЯреИрдХ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рд╕реЗ рднрд░рд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://habr.com/ru/post/324760/">рд▓реЙрдЧрд╕реНрдЯреИрд╢ рд╕рдВрд╕реНрдХрд░рдг 2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ ssh рдкрд░ рдХреНрд░реВрд░ рдмрд▓ рдХреЗ рд╣рдорд▓реЛрдВ рдХрд╛</a> <a href="https://habr.com/ru/post/431600/">рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛</a> , <a href="https://habr.com/ru/post/431600/">рдлрд╝рд╛рдЗрд▓рдмреАрдЯ рд╕рдВрд╕реНрдХрд░рдг 6 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реБрд░рд┐рдХрдЯрд╛ рд▓реЙрдЧ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛</a> ), рд▓реЗрдХрд┐рди рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╡рд┐рд╡рд░рдг рдкрд░ рдзреНрдпрд╛рди рдирд╣реАрдВ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕рд╛рдордЧреНрд░реА рдХрд╛ 90 рдкреНрд░рддрд┐рд╢рдд рд╕рдВрд╕реНрдХрд░рдг 1 рд╕реЗ 6 рдХреЗ рд▓рд┐рдП рд╣реЛрдЧрд╛ (рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдИрдПрд▓рдХреЗ рдХрд╛ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг 7.5.0 рд╣реИ)ред  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╕рдВрд╕реНрдХрд░рдг 6 рд╕реЗ рдПрд▓реЗрд╕реНрдЯрд┐рдХреНрд╕ рдЦреЛрдЬ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/removal-of-types.html" rel="nofollow">рдиреЗ</a> рдореИрдкрд┐рдВрдЧ рдкреНрд░рдХрд╛рд░ рдХреА рдЗрдХрд╛рдИ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/removal-of-types.html" rel="nofollow">рдХреЛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛</a> , рдЬрд┐рд╕рд╕реЗ рдХреНрд╡реЗрд░реА рд╕рд┐рдВрдЯреИрдХреНрд╕ рдФрд░ рдореИрдкрд┐рдВрдЧ рд╕рдВрд░рдЪрдирд╛ рдмрджрд▓ рдЧрдИред  рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдореЗрдВ рдореИрдкрд┐рдВрдЧ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдЖрдо рддреМрд░ рдкрд░ рдПрдХ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд╕реНрддреБ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдХрд┐ рдмрд╛рдж рдореЗрдВ рдбреЗрдЯрд╛ рд╕реИрдВрдкрд▓рд┐рдВрдЧ рдФрд░ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рдореИрдВ рдЖрдкрдХреЛ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рди рд╣реЛрдВ рдФрд░ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдореИрдВ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рд╡рд░реНрдгрд┐рдд рд╕рдВрдЪрд╛рд▓рди рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИред <br><br><h2>  рд░рд╛рдЙрдЯрд░ рд╕реЗрдЯрдЕрдк </h2><br>  рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП, рдореИрдВ рд░рд╛рдЙрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдорд┐рдХрд░реЛрдЯрд┐рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдЗрд╕рд▓рд┐рдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЙрд╕рдХреЗ рд▓рд┐рдП рд╣реЛрдЧрд╛ред  рд▓реЗрдХрд┐рди рд▓рдЧрднрдЧ рдХрд┐рд╕реА рднреА рд╕рд┐рд╕реНрдЯрдо рдХреЛ рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рдкрд░ syslog рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЪрд╛рд╣реЗ рд╡рд╣ рдПрдХ рд░рд╛рдЙрдЯрд░ рд╣реЛ, рд╕рд░реНрд╡рд░ рд╣реЛ рдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рдгрд╛рд▓реА рдЬреЛ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br><br><h3>  рдХрд┐рд╕реА рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рдкрд░ syslog рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ </h3><br>  Mikrotik рдореЗрдВ, CLI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рдореЗрдВ рд▓реЙрдЧрд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдХреБрдЫ рд╣реА рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░реЗрдВ: <br><br><pre><code class="plaintext hljs">/system logging action add remote=192.168.88.130 remote-port=5145 src-address=192.168.88.1 name=logstash target=remote /system logging add action=logstash topics=info</code> </pre> <br><h3>  рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдореЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h3><br>  рд╣рдо рдХреЗрд╡рд▓ рдХреБрдЫ рдбреЗрдЯрд╛ (hostname, ip-adress, username, url рдЖрджрд┐) рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдПрдХ рд╕реБрдВрджрд░ рджреГрд╢реНрдп рдпрд╛ рдЪрдпрди рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкреЛрд░реНрдЯ рд╕реНрдХреИрди рдФрд░ рдПрдХреНрд╕реЗрд╕ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдпрдо рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдШрдЯрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдорд┐рдХрд░реЛрдЯрд┐рдХ рдкрд░, рдореИрдВрдиреЗ рдПрдирдПрдЯреА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдирд┐рдпрдо рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдП рд╣реИрдВ, рди рдХрд┐ рдлрд╝рд┐рд▓реНрдЯрд░, рдХреНрдпреЛрдВрдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдореИрдВ рдРрд╕реЗ рдЪрд┐рдирдкреЛрдЯреНрд╕ рд▓рдЧрд╛рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реВрдВ рдЬреЛ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдХрд╛рдо рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВрдЧреЗ, рдЗрд╕рд╕реЗ рдореБрдЭреЗ рдмреЙрдЯрдиреЗрдЯ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓реЗрдЧреА, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдзрд┐рдХ рдЙрдиреНрдирдд рдкрд░рд┐рджреГрд╢реНрдп рд╣реИ рдФрд░ рдЗрд╕ рд╕рдордп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВред <br><br>  рдЪреЗрддрд╛рд╡рдиреА!  рдиреАрдЪреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ, рдПрд╕рдПрд╕рдПрдЪ рд╕реЗрд╡рд╛ (22) рдХреЗ рдорд╛рдирдХ рдЯреАрд╕реАрдкреА рдкреЛрд░реНрдЯ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд▓реВрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдмрд╛рд╣рд░ рд╕реЗ рд░рд╛рдЙрдЯрд░ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрд╕рдПрд╕рдПрдЪ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдкреЛрд░реНрдЯ 22 (рд╕реАрдПрд▓рдЖрдИ рдореЗрдВ <i>рдЖрдИрдкреА тАЛтАЛрд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрдЯ</i> рдФрд░ рд╡рд┐рдирдмреЙрдХреНрд╕ рдореЗрдВ <i>рдЖрдИрдкреА тАЛтАЛрд╕реЗрд╡рд╛</i> ) рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдкреНрд░рдмрдВрдзрди рдПрд╕рдПрд╕рдПрдЪ рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ рдХреЛ рдлрд┐рд░ рд╕реЗ рдЕрд╕рд╛рдЗрди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдпрд╛ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЕрдВрддрд┐рдо рдирд┐рдпрдо рджрд░реНрдЬ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, WAN рдЗрдВрдЯрд░рдлрд╝реЗрд╕ (рдпрджрд┐ WAN рдмреНрд░рд┐рдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ) рдХреЗ рдирд╛рдо рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ <i>рдЗрди-рдЗрдВрдЯрд░рдлрд╝реЗрд╕</i> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдЙрдкрдпреБрдХреНрдд рдПрдХ <i>рдореЗрдВ</i> рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред <br><br><pre> <code class="plaintext hljs">/ip firewall nat add action=netmap chain=dstnat comment="HONEYPOT RDP" dst-port=3389 in-interface=bridge-wan log=yes log-prefix=honeypot_rdp protocol=tcp to-addresses=192.168.88.201 to-ports=3389 add action=netmap chain=dstnat comment="HONEYPOT ELASTIC" dst-port=9200 in-interface=bridge-wan log=yes log-prefix=honeypot_elastic protocol=tcp to-addresses=192.168.88.201 to-ports=9211 add action=netmap chain=dstnat comment=" HONEYPOT TELNET" dst-port=23 in-interface=bridge-wan log=yes log-prefix=honeypot_telnet protocol=tcp to-addresses=192.168.88.201 to-ports=2325 add action=netmap chain=dstnat comment="HONEYPOT DNS" dst-port=53 in-interface=bridge-wan log=yes log-prefix=honeypot_dns protocol=udp to-addresses=192.168.88.201 to-ports=9953 add action=netmap chain=dstnat comment="HONEYPOT FTP" dst-port=21 in-interface=bridge-wan log=yes log-prefix=honeypot_ftp protocol=tcp to-addresses=192.168.88.201 to-ports=9921 add action=netmap chain=dstnat comment="HONEYPOT SMTP" dst-port=25 in-interface=bridge-wan log=yes log-prefix=honeypot_smtp protocol=tcp to-addresses=192.168.88.201 to-ports=9925 add action=netmap chain=dstnat comment="HONEYPOT SMB" dst-port=445 in-interface=bridge-wan log=yes log-prefix=honeypot_smb protocol=tcp to-addresses=192.168.88.201 to-ports=9445 add action=netmap chain=dstnat comment="HONEYPOT MQTT" dst-port=1883 in-interface=bridge-wan log=yes log-prefix=honeypot_mqtt protocol=tcp to-addresses=192.168.88.201 to-ports=9883 add action=netmap chain=dstnat comment="HONEYPOT SIP" dst-port=5060 in-interface=bridge-wan log=yes log-prefix=honeypot_sip protocol=tcp to-addresses=192.168.88.201 to-ports=9060 add action=dst-nat chain=dstnat comment="HONEYPOT SSH" dst-port=22 in-interface=bridge-wan log=yes log-prefix=honeypot_ssh protocol=tcp to-addresses=192.168.88.201 to-ports=9922</code> </pre> <br><img src="https://habrastorage.org/webt/of/dm/jo/ofdmjo5n3f8fi54udyvbixhaifm.png"><br><br>  Winbox рдореЗрдВ, рд╕рдорд╛рди <i>IP&gt; рдлрд╝рд╛рдпрд░рд╡реЙрд▓&gt; NAT рдЯреИрдм</i> рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  рдЕрдм рд░рд╛рдЙрдЯрд░ рдкреНрд░рд╛рдкреНрдд рдкреИрдХреЗрдЯреЛрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдкрддреЗ 192.168.88.201 рдФрд░ рдХрд╕реНрдЯрдо рдкреЛрд░реНрдЯ рдкрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░реЗрдЧрд╛ред  рдЕрднреА рдЗрди рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдкрд░ рдХреЛрдИ рдирд╣реАрдВ рд╕реБрди рд░рд╣рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдХрдиреЗрдХреНрд╢рди рдЯреВрдЯ рдЬрд╛рдПрдВрдЧреЗред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, docker рдореЗрдВ, рдЖрдк honeypot рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдХрдИ рд╣реИрдВред  рдпрджрд┐ рдпрд╣ рдпреЛрдЬрдирд╛рдмрджреНрдз рдирд╣реАрдВ рд╣реИ, рддреЛ NAT рдирд┐рдпрдореЛрдВ рдХреЗ рдмрдЬрд╛рдп, рдЖрдкрдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдбреНрд░реЙрдк рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд╕рд╛рде рдПрдХ рдирд┐рдпрдо рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><h3>  рдИрдПрд▓рдХреЗ рдХреЛ рдбреЙрдХрдЯрд░-рдХрдВрдкреЛрдЬ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдирд╛ </h3><br>  рдЕрдЧрд▓рд╛, рдЖрдк рдЙрд╕ рдШрдЯрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд▓реЙрдЧ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛ред  рдореИрдВ рдЖрдкрдХреЛ рддреБрд░рдВрдд рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рддреБрд░рдВрдд рдЕрднреНрдпрд╛рд╕ рдФрд░ рдХреНрд▓реЛрди рдХрд░реЗрдВред  рд╕рднреА рд╡рд░реНрдгрд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд╣рд╛рдВ рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдЦ рдХреЗ рдкрд╛рда рдореЗрдВ рдореИрдВ рдХреЗрд╡рд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рднрд╛рдЧ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдКрдВрдЧрд╛ред <br><br><pre> <code class="plaintext hljs">тЭптЭп git clone https://github.com/mekhanme/elk-mikrot.git</code> </pre> <br><img src="https://habrastorage.org/webt/95/_b/9g/95_b9gu4scfg99nwtyfph-0pf7o.png"><br><br>  рдПрдХ рдкрд░реАрдХреНрд╖рдг рдпрд╛ рджреЗрд╡ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ, рдбреЙрдХ-рдХрдВрдкреЛрдЬрд╝ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЙрдХ рдХрдВрдЯреЗрдирд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред  рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рдореИрдВ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдирд╡реАрдирддрдо <a href="https://docs.docker.com/compose/compose-file/" rel="nofollow">рд╕рдВрд╕реНрдХрд░рдг 3.7 рдХреЗ</a> рдбреЙрдХ-рдХрдореНрдкреЛрдЬрд╝ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдбреЙрдХ рдЗрдВрдЬрди рд╕рдВрд╕реНрдХрд░рдг 18.06.0+ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдбреЙрдХрдЯрд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рд╕рд╛рде рд╣реА рдбреЙрдХ-рдХрдВрдкреЛрдЬрд╝ рднреАред <br><br><pre> <code class="plaintext hljs">тЭптЭп curl -L "https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose тЭптЭп chmod +x /usr/local/bin/docker-compose</code> </pre> <br>  рдЪреВрдВрдХрд┐ рдбреЙрдХрдЯрд░-рдХрдореНрдкреЛрдЬрд╝ рдХреЗ рд╣рд╛рд▓ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ, рдореЗрдо_рд▓реАрдореЗрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ <i>рдХрд╛рдЯ рджрд┐рдпрд╛</i> рдЧрдпрд╛ рдерд╛ рдФрд░ <i>рддреИрдирд╛рддреА рдХреЛ</i> рдЬреЛрдбрд╝рд╛ <i>рдЧрдпрд╛ рдерд╛</i> , рдЬреЛ рдХреЗрд╡рд▓ рдЭреБрдВрдб рдореЛрдб ( <i>рдбреЙрдХ рд╕реНрдЯреИрдХ рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд</i> ) рдореЗрдВ рдЪрд▓рддрд╛ рд╣реИ, рдбреЙрдХ-рдХрдВрдкреЛрдЬрд╝ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рд╕реЗ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИред  рдЪреВрдВрдХрд┐ рдореИрдВ рдЭреБрдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдореИрдВ рд╕рдВрд╕рд╛рдзрди рд╕реАрдорд╛рдПрдВ рд░рдЦрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдореБрдЭреЗ рдЗрд╕реЗ <i>--compatibility</i> рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рдХрд┐ <i>рдбреЙрдХ-рдХрдВрдкреЛрдЬ</i> рд╕реЗ рдирдП рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдЧреИрд░-рд╡реЗрд▓реНрдб рд╕рдордХрдХреНрд╖ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рднреА рдХрдВрдЯреЗрдирд░реЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рд░рди (рдкреГрд╖реНрдарднреВрдорд┐ -d рдореЗрдВ): <br><br><pre> <code class="plaintext hljs">тЭптЭп docker-compose --compatibility up -d</code> </pre> <br>  рдЖрдкрдХреЛ рд╕рднреА рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛрдиреЗ рддрдХ рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рд▓реЙрдиреНрдЪ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдХрдВрдЯреЗрдирд░реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs">тЭптЭп docker-compose --compatibility ps</code> </pre> <br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рд╕рднреА рдХрдВрдЯреЗрдирд░ рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣реЛрдВрдЧреЗ (рдпрджрд┐ рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдирдпрд╛ рдкреБрд▓ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ рдЙрдкрдпреБрдХреНрдд рд╣реИ) рдФрд░ docker-compose.yml рдореЗрдВ рд╕рднреА <i>рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ</i> рд▓рд┐рдП рдХрдВрдЯреЗрдирд░_рдирд╛рдо рдкреИрд░рд╛рдореАрдЯрд░ <i>рд╢рд╛рдорд┐рд▓ рд╣реИ</i> , рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд DNS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╣реЛрдЧреАред рдбреЛрдХрд░ред  рдирддреАрдЬрддрди, рдХрдВрдЯреЗрдирд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдЖрдИрдкреА рдкрддреЗ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред  рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ, 192.168.88.0/24 рд╕рдмрдиреЗрдЯ рд╕реНрдерд╛рдиреАрдп рдХреЗ рд░реВрдк рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реИ, рдЖрдЧреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рд╣реЛрдВрдЧреЗ, рдЬрд┐рд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЖрдк рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╡рд┐рдЪрд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h2>  ELK рд╕реЗрд╡рд╛рдПрдБ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h2><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ ELK рдШрдЯрдХреЛрдВ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рд╣реЛрдЧрд╛, рд╕рд╛рде рд╣реА рдХреБрдЫ рдФрд░ рдХреНрд░рд┐рдпрд╛рдПрдВ рдЬреЛ рдПрд▓рд┐рдЯрд┐рдХреНрд╕ рдЦреЛрдЬ рдкрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред <br><br>  IP рдкрддреЗ рджреНрд╡рд╛рд░рд╛ рднреМрдЧреЛрд▓рд┐рдХ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ MaxMind рд╕реЗ рдореБрдлреНрдд <a href="https://dev.maxmind.com/geoip/geoip2/geolite2/" rel="nofollow">GeoLite2</a> рдбреЗрдЯрд╛рдмреЗрд╕ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛: <br><br><pre> <code class="plaintext hljs">тЭптЭп cd elk-mikrot &amp;&amp; mkdir logstash/geoip_db тЭптЭп curl -O https://geolite.maxmind.com/download/geoip/database/GeoLite2-City-CSV.zip &amp;&amp; unzip GeoLite2-City-CSV.zip -d logstash/geoip_db &amp;&amp; rm -f GeoLite2-City-CSV.zip тЭптЭп curl -O https://geolite.maxmind.com/download/geoip/database/GeoLite2-ASN-CSV.zip &amp;&amp; unzip GeoLite2-ASN-CSV.zip -d logstash/geoip_db &amp;&amp; rm -f GeoLite2-ASN-CSV.zip</code> </pre> <br><h3>  рд▓реЙрдЧрд╕реНрдЯреИрд╢ рд╕реЗрдЯрдЕрдк </h3><br>  рдореБрдЦреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ <i>logstash.yml рд╣реИ</i> , рдЬрд╣рд╛рдВ рдореИрдВрдиреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреБрдирдГ рд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рд╣реИ, рдкрд░реАрдХреНрд╖рдг рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдмрд╛рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИрдВред  рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ (рд▓реЙрдЧ) рдХрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЧреЛрдкрдиреАрдп рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИ, рдЖрдорддреМрд░ рдкрд░ <i>рдкрд╛рдЗрдкрд▓рд╛рдЗрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпреЛрдЬрдирд╛ рдореЗрдВ, рдЬрдм <a href="https://www.elastic.co/guide/en/logstash/current/multiple-pipelines.html" rel="nofollow">рдХрдИ рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ <a href="https://www.elastic.co/guide/en/logstash/current/multiple-pipelines.html" rel="nofollow">рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ.рдЖрдИрдПрдордПрд▓</a> рдлрд╝рд╛рдЗрд▓ рд╕рдХреНрд░рд┐рдп <i>рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ рдХрд╛</i> рд╡рд░реНрдгрди рдХрд░рддреА рд╣реИред  рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдЕрд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рдкрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рд╣реИред  рдЕрд▓рдЧ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ <i>рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ рдХреЗ</i> рд╕рд╛рде рдПрдХ рдпреЛрдЬрдирд╛ред <i>рд╣рд╛рдЗрдорд▓</i> рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ, рдЖрдк рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рдорд╛рдЙрдВрдЯ <i>рдкрд╛рдЗрдк рд▓рд╛рдЗрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рд╕рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдХреЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ <i>рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд╕рд╛рдеред</i> рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдк <i>рдкрд╛рдЗрдкрд▓рд╛рдЗрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ <i>рдЧреЛрдкрдиреАрдп</i> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЪрд╛рд▓реВ рдФрд░ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрд╡рд╢реНрдпрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рдиред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреБрди: рд▓реЛрдб рдХрд░рдирд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ рдХреЗрд╡рд▓ рдХрдИ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдпреЛрдЬрдирд╛ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br><br><pre> <code class="plaintext hljs">тЭптЭп cat logstash/config/pipelines.yml - pipeline.id: logstash-mikrot path.config: "pipeline/logstash-mikrot.conf"</code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж Logstash config рдХрд╛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣рд┐рд╕реНрд╕рд╛ рдЖрддрд╛ рд╣реИред  рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╡рд┐рд╡рд░рдг рдореЗрдВ рдХрдИ рдЦрдВрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВ - рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдкреНрд▓рдЧрдЗрдиреНрд╕ <i>рдЗрдирдкреБрдЯ</i> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬрд┐рдирдХреА рдорджрдж рд╕реЗ рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдиреЗрдЯрд╡рд░реНрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ syslog рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ <a href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-tcp.html" rel="nofollow">tcp</a> / <a href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-udp.html" rel="nofollow">udp</a> рдЗрдирдкреБрдЯ рдкреНрд▓рдЧ рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред  рдЗрди рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХрдорд╛рддреНрд░ рдЖрд╡рд╢реНрдпрдХ рдкреИрд░рд╛рдореАрдЯрд░ <i>рдкреЛрд░реНрдЯ рд╣реИ</i> , рдЗрд╕реЗ рд░рд╛рдЙрдЯрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рджреВрд╕рд░рд╛ рдЦрдВрдб <i>рдлрд╝рд┐рд▓реНрдЯрд░ рд╣реИ</i> , рдЬреЛ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдХреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЕрднреА рддрдХ рд╕рдВрд░рдЪрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдореЗрд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдХреБрдЫ рдкрд╛рда рд╡рд╛рд▓реЗ рд░рд╛рдЙрдЯрд░ рд╕реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ syslog рд╕рдВрджреЗрд╢ рд╣рдЯрд╛ рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдпрд╣ рд╢рд░реНрдд рдФрд░ рдорд╛рдирдХ <a href="https://www.elastic.co/guide/en/logstash/7.5/plugins-filters-drop.html" rel="nofollow"><i>рдбреНрд░реЙрдк</i></a> рдПрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рдиреЗ рдкрд░ рдкреВрд░реЗ рд╕рдВрджреЗрд╢ рдХреЛ рддреНрдпрд╛рдЧ рджреЗрддрд╛ рд╣реИред  <a href="https://www.elastic.co/guide/en/logstash/7.5/event-dependent-configuration.html" rel="nofollow">рд╣рд╛рд▓рдд рдореЗрдВ</a> , <i>рд╕рдВрджреЗрд╢</i> рдлрд╝реАрд▓реНрдб рдХреЛ рдХреБрдЫ рдкрд╛рда рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХреА рдЬрд╛рддреА рд╣реИред <br><br><img src="https://habrastorage.org/webt/iq/j0/ut/iqj0utufb6itcsrwspxi9qw4e2c.png"><br><br>  рдпрджрд┐ рд╕рдВрджреЗрд╢ рдбреНрд░реЙрдк рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рдФрд░ рдиреАрдЪреЗ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ <a href="https://www.elastic.co/guide/en/logstash/7.5/plugins-filters-grok.html" rel="nofollow"><i>рдЧреНрд░реЙрдХ</i></a> рдлрд╝рд┐рд▓реНрдЯрд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдХрд╣рддрд╛ рд╣реИ, <i>рдирд╛рд▓реА рдЕрдирд┐рдпрдВрддреНрд░рд┐рдд рд▓реЙрдЧ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд░рдЪрд┐рдд рдФрд░ рдХреНрд╡реЗрд░реА рдореЗрдВ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╢рд╛рдирджрд╛рд░ рддрд░реАрдХрд╛ рд╣реИ</i> ред  рдЗрд╕ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ (рд▓рд┐рдирдХреНрд╕ syslog, рд╡реЗрдм рд╕рд░реНрд╡рд░, рдбреЗрдЯрд╛рдмреЗрд╕, рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдгреЛрдВ, рдЖрджрд┐) рдХреЗ рд▓реЙрдЧ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  <a href="https://github.com/logstash-plugins/logstash-patterns-core/tree/master/patterns" rel="nofollow">рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдкреИрдЯрд░реНрди рдХреЗ</a> рдЖрдзрд╛рд░ рдкрд░ <a href="https://github.com/logstash-plugins/logstash-patterns-core/tree/master/patterns" rel="nofollow">,</a> рдЖрдк рдмрд╣реБрдд рд╕рдордп рдЦрд░реНрдЪ рдХрд┐рдП рдмрд┐рдирд╛, рдХрд┐рд╕реА рднреА рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рджреЛрд╣рд░рд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрдХреНрд░рдо рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рд░реНрд╕рд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рдПрдХ <a href="http://grokdebug.herokuapp.com/" rel="nofollow">рдСрдирд▓рд╛рдЗрди рдкрд╛рд░реНрд╕рд░</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ (рдХрд┐рдмрд╛рдирд╛ рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, <i>рджреЗрд╡ рдЙрдкрдХрд░рдг</i> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рд╕рдорд╛рди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ)ред <br><br><img src="https://habrastorage.org/webt/_g/9q/ky/_g9qkyst3-na7a2i8mhxwf8avw0.gif"><br><br>  рд╡реЙрд▓реНрдпреВрдо <i>"./logstash/patterns:/usr/share/logstash/patterns" docker</i> <i>-compose.yml</i> рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реИ <i>,</i> <i>рдкреИрдЯрд░реНрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдорд╛рдирдХ рд╕рдореБрджрд╛рдп рдкреИрдЯрд░реНрди рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╣реИ (рдмрд╕ рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдореИрдВ рднреВрд▓ рдЧрдпрд╛), рд╕рд╛рде рд╣реА рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рднреАред рд╕рд╛рджреГрд╢реНрдп рджреНрд╡рд╛рд░рд╛ рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рдорд┐рдХрд░реЛрдЯрд┐рдХ рд╕рдВрджреЗрд╢реЛрдВ ( <i>рдлрд╝рд╛рдпрд░рд╡реЙрд▓</i> рдФрд░ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рдореЙрдбреНрдпреВрд▓ <i>) рдХреЗ</i> рдкреИрдЯрд░реНрди, рдЖрдк рдПрдХ рдЕрд▓рдЧ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдорд╛рдирдХ рд╡рд┐рдХрд▓реНрдк <i>add_field</i> рдФрд░ <i>remove_field</i> рдЖрдкрдХреЛ рдХрд┐рд╕реА рднреА рдлрд╝рд┐рд▓реНрдЯрд░ рдХреЗ рдЕрдВрджрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рд╕рдВрджреЗрд╢ рд╕реЗ рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, <i>рд╣реЛрд╕реНрдЯ</i> рдлрд╝реАрд▓реНрдб рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣реЛрд╕реНрдЯ рдирд╛рдо рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖ рдерд╛ред  рдореЗрд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдХреЗрд╡рд▓ рдПрдХ рдореЗрдЬрдмрд╛рди рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрд╕реА <i>рдлрд╝рд┐рд▓реНрдЯрд░</i> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ, рдореИрдВрдиреЗ <a href="https://www.elastic.co/guide/en/logstash/7.5/plugins-filters-cidr.html" rel="nofollow"><i>cidr</i></a> рдлрд╝рд┐рд▓реНрдЯрд░ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛, рдЬреЛ рджрд┐рдП рдЧрдП рд╕рдмрдиреЗрдЯ рдореЗрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╕реНрдерд┐рддрд┐ рдХреЗ рдЕрдиреБрдкрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд╕рд╛рде рдлрд╝реАрд▓реНрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЯреИрдЧ рдбрд╛рд▓рддрд╛ рд╣реИред  рдЖрдЧреЗ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдЯреИрдЧ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдкреНрд░рджрд░реНрд╢рди рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ рдпрд╛ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ (рдпрджрд┐ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рддреЛ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╕реНрдерд╛рдиреАрдп рдкрддреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдпреЛрдЖрдИрдкреА рд▓реБрдХрдЕрдк рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП)ред <br><br>  <i>рдлрд╝рд┐рд▓реНрдЯрд░</i> рд╕реЗрдХреНрд╢рди рдХреА рдХреЛрдИ рднреА рд╕рдВрдЦреНрдпрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ, рддрд╛рдХрд┐ рдПрдХ рд╕реЗрдХреНрд╢рди рдХреЗ рднреАрддрд░ рдХрдо рд╕реНрдерд┐рддрд┐рдпрд╛рдБ рд╣реЛрдВред рдирдП рд╕реЗрдХреНрд╢рди рдореЗрдВ рдореИрдВрдиреЗ <i>src_local</i> рдЯреИрдЧ рдХреЗ рдмрд┐рдирд╛ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдХреНрд░рд┐рдпрд╛рдПрдБ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рд╣реИрдВ, рдЕрд░реНрдерд╛рдд рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЛ рдпрд╣рд╛рдБ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рд╕реНрд░реЛрдд рдкрддреЗ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред <br><br>  рдЕрдм рд╣рдореЗрдВ рдереЛрдбрд╝рд╛ рдФрд░ рдмрд╛рдд рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдХреЛ рдЬрд┐рдпреЛрдЖрдИрдкреА рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХрд╣рд╛рдВ рд╕реЗ рдорд┐рд▓рддреА рд╣реИред  Logstash GeoLite2 рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдХрдИ рдбреЗрдЯрд╛рдмреЗрд╕ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ, рдореИрдВ рджреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ: GeoLite2 City (рдЬрд┐рд╕рдореЗрдВ рджреЗрд╢, рд╢рд╣рд░, рд╕рдордп рдХреНрд╖реЗрддреНрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реИ) рдФрд░ GeoLite2 ASN (рд╕реНрд╡рд╛рдпрддреНрдд рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдЬрд┐рд╕рдореЗрдВ рдЖрдИрдкреА рдкрддрд╛ рд╣реИ)ред <br><br><img src="https://habrastorage.org/webt/gf/ps/a1/gfpsa18cwgwa-7bcadoca7qyhtk.png"><br><br>  рдЬрд┐рдпреЛрдЖрдИрдкреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд╕рдВрджреЗрд╢ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://www.elastic.co/guide/en/logstash/7.3/plugins-filters-geoip.html" rel="nofollow"><i>рдЬрд┐рдпреЛрдЗрдк</i></a> рдкреНрд▓рдЧрдЗрди рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рдорд╛рдкрджрдВрдбреЛрдВ рд╕реЗ, рдЖрдкрдХреЛ рдЙрд╕ рдлрд╝реАрд▓реНрдб рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рдЖрдИрдкреА рдкрддрд╛, рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдЖрдзрд╛рд░, рдФрд░ рдирдП рдлрд╝реАрд▓реНрдб рдХрд╛ рдирд╛рдо рдЬрд┐рд╕рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд▓рд┐рдЦреА рдЬрд╛рдПрдЧреАред  рдореЗрд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдпрд╣реА рдмрд╛рдд рдЧрдВрддрд╡реНрдп рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд▓рд┐рдП рдХреА рдЬрд╛рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдЗрд╕ рд╕рд░рд▓ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рджрд┐рд▓рдЪрд╕реНрдк рдирд╣реАрдВ рд╣реЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рдЧрдВрддрд╡реНрдп рдХрд╛ рдкрддрд╛ рд╣рдореЗрд╢рд╛ рд░рд╛рдЙрдЯрд░ рдХрд╛ рдкрддрд╛ рд╣реЛрдЧрд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╕реЗ рд▓реЙрдЧ рдХреЛ рди рдХреЗрд╡рд▓ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рдмрд▓реНрдХрд┐ рдЕрдиреНрдп рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рд╕реЗ рднреА рдЬрд╣рд╛рдВ рджреЛрдиреЛрдВ рдкрддреЗ рдХреЛ рджреЗрдЦрдирд╛ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реЛрдЧрд╛ред <br><br>  <a href="https://www.elastic.co/guide/en/logstash/7.3/plugins-filters-mutate.html" rel="nofollow"><i>рдореНрдпреВрдЯреЗрдЯ</i></a> рдлрд╝рд┐рд▓реНрдЯрд░ рдЖрдкрдХреЛ рд╕рдВрджреЗрд╢ рдлрд╝реАрд▓реНрдб рдХреЛ рдмрджрд▓рдиреЗ рдФрд░ рдлрд╝реАрд▓реНрдб рдореЗрдВ рд╕реНрд╡рдпрдВ рдкрд╛рда рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ; рдкреНрд░рд▓реЗрдЦрди рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рд╣реИ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЯреИрдЧ рдЬреЛрдбрд╝рдиреЗ, рдлрд╝реАрд▓реНрдб рдХрд╛ рдирд╛рдо рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдХрд┐рдмрд╛рдирд╛ рдореЗрдВ рд▓реЙрдЧ рдХреЗ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд▓рд┐рдП, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.3/geo-point.html" rel="nofollow"><i>рдЬрд┐рдпреЛ-рдкреЙрдЗрдВрдЯ</i></a> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдкреНрд░рд╛рд░реВрдк рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдореИрдВ рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдЖрдЧреЗ рд╕реНрдкрд░реНрд╢ рдХрд░реВрдБрдЧрд╛) рдФрд░ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдлрд╝реАрд▓реНрдб рд╣рдЯрд╛ рджреВрдВрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/kn/9l/qf/kn9lqfj3uwaqh0fhh-tir-f7zr4.png"><br><br>  рдпрд╣ рдбреЗрдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╕реЗрдХреНрд╢рди рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд╕рдВрд░рдЪрд┐рдд рд╕рдВрджреЗрд╢ рдХрд╣рд╛рдВ рднреЗрдЬрдирд╛ рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрд▓реЗрд╕реНрдЯрд┐рдХреНрд╕ рдЦреЛрдЬ рдбреЗрдЯрд╛ рдПрдХрддреНрд░рд┐рдд рдХрд░реЗрдЧрд╛, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЖрдИрдкреА рдкрддреЗ, рдкреЛрд░реНрдЯ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рдирд╛рдо рджрд░реНрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдЪрд░ рджрд┐рдирд╛рдВрдХ рдлрд╝реАрд▓реНрдб рдХреЗ рд╕рд╛рде рд╕реВрдЪрдХрд╛рдВрдХ рджрд░реНрдЬ рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╣рд░ рджрд┐рди рдПрдХ рдирдпрд╛ рд╕реВрдЪрдХрд╛рдВрдХ рдмрдирд╛рдпрд╛ рдЬрд╛рдПред <br><br><img src="https://habrastorage.org/webt/ve/sk/ec/veskecc3kqsidcymnbkafoa3spo.png"><br><br><h3>  рдЗрд▓рд╛рд╕реНрдЯрд┐рдХреНрд╕ рдХреА рд╕реНрдерд╛рдкрдирд╛ </h3><br>  рдПрд▓реАрдЯреЗрд╕рд░реНрдЪ рдкрд░ рд╡рд╛рдкрд╕ред  рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╕рд░реНрд╡рд░ рдКрдкрд░ рдФрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИред  рд▓реЛрдЪрджрд╛рд░ рдХреЛ CLI рдореЗрдВ рд░реЗрд╕реНрдЯ рдПрдкреАрдЖрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдХреБрд╢рд▓рддрд╛ рд╕реЗ рдмрд╛рддрдЪреАрдд рдХреА рдЬрд╛рддреА рд╣реИред  рдХрд░реНрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдЖрдк рдиреЛрдб рдХреА рд╕реНрдерд┐рддрд┐ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ (рд╕реНрдерд╛рдиреАрдп рд╣реЛрд╕реНрдЯ рдХреЛ рд╣реЛрд╕реНрдЯ рдбреЙрдХрд░ рдЖрдИрдкреА рдкрддреЗ рдХреЗ рд╕рд╛рде рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ): <br><br><pre> <code class="plaintext hljs">тЭптЭп curl localhost:9200</code> </pre> <br>  рдлрд┐рд░ рдЖрдк рдХрд┐рдмрд╛рдирд╛ рдХреЛ рдЦреЛрд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <a href="http://localhost:5601/" rel="nofollow"></a>  <a href="http://localhost/" rel="nofollow"><i>рд▓реЛрдХрд▓рд╣реЛрд╕реНрдЯ</i></a> : 5601ред  рдХрд┐рдмрд╛рдирд╛ рд╡реЗрдм рдЗрдВрдЯрд░рдлреЗрд╕ рдореЗрдВ рдХреБрдЫ рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ (рдЬрдм рддрдХ рдХрд┐ рд╡рд┐рд╖рдп рдХреЛ рдЕрдВрдзреЗрд░реЗ рдореЗрдВ рдирд╣реАрдВ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдП)ред  рд╣рдо рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫреБрдХ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <i>рдореИрдиреЗрдЬрдореЗрдВрдЯ</i> рд╕реЗрдХреНрд╢рди рдХреЛ рдЦреЛрд▓реЗрдВ рдФрд░ рдмрд╛рдИрдВ рдУрд░ рд╕рдмрд╕реЗ рдКрдкрд░ рдореМрдЬреВрдж <i>рдПрд▓реАрдЯреЗрд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рдореИрдиреЗрдЬрдореЗрдВрдЯ</i> рдХреЛ рдЪреБрдиреЗрдВред  рдпрд╣рд╛рдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рддрдиреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдЕрдиреБрдХреНрд░рдорд┐рдд рд╣реИрдВ, рдпрд╣ рдбрд┐рд╕реНрдХ рд╕реНрдерд╛рди рдХреЛ рдХрд┐рддрдирд╛ рдКрдкрд░ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИ, рдЖрдк рдЙрдкрдпреЛрдЧреА рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдореИрдкрд┐рдВрдЧ рдХреА рдЬрд╛рдирдХрд╛рд░реА рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/kl/yp/vv/klypvvi1aa2zlueq98960wdut90.png"><br><br>  рдмрд╕ рдЗрд╕рдХреЗ рдмрд╛рдж рдЖрдкрдХреЛ рд╕рд╣реА рдореИрдкрд┐рдВрдЧ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рд╡рд╣ рд╕рдордЭ рд╕рдХреЗ рдХрд┐ рдХреМрди рд╕реЗ рдбреЗрдЯрд╛ рдХрд┐рд╕ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, IP рдкрддреЗ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд┐рд╢реЗрд╖ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <i>src_ip</i> рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП, <i>рдЖрдкрдХреЛ</i> рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <i>IP</i> рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рднреМрдЧреЛрд▓рд┐рдХ рд╕реНрдерд┐рддрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ <i>geoip.location</i> рдХреНрд╖реЗрддреНрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ <i>geo_point</i> рдкреНрд░рдХрд╛рд░ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА <i>рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</i> ред  рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рдХреНрд╖реЗрддреНрд░реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдирдП рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдбрд╛рдпрдиреЗрдорд┐рдХ рдкреИрдЯрд░реНрди (рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╕рдВрдЦреНрдпрд╛ рдФрд░ <i>рдХреАрд╡рд░реНрдб рдХреЗ</i> рд▓рд┐рдП <i>рд▓рдВрдмреЗ рд╕рдордп</i> ) рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЖрдк рдХрд░реНрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдирдпрд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рд╕реАрдзреЗ рдХрд┐рдмрд╛рдирд╛ рдХрдВрд╕реЛрд▓ (рд╕реЗрдХреНрд╢рди <i>рджреЗрд╡ рдЯреВрд▓реНрд╕</i> ) рд╕реЗред <br><br><pre> <code class="plaintext hljs">тЭптЭп curl -X POST -H "Content-Type: application/json" -d @elasticsearch/logstash_mikrot-template.json http://192.168.88.130:9200/_template/logstash-mikrot</code> </pre> <br>  рдореИрдкрд┐рдВрдЧ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">тЭптЭп curl -X DELETE http://192.168.88.130:9200/logstash-mikrot-2019.12.16</code> </pre> <br>  рдЬрдм рд╕реВрдЪрдХрд╛рдВрдХ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╕рдВрджреЗрд╢ рдЖрддрд╛ рд╣реИ, рддреЛ рдореИрдкрд┐рдВрдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ: <br><br><pre> <code class="plaintext hljs">тЭптЭп curl http://192.168.88.130:9200/logstash-mikrot-2019.12.16/_mapping</code> </pre> <br>  рдХрд┐рдмрд╛рдирд╛ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЗ рдЖрдЧреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <i>рдкреНрд░рдмрдВрдзрди&gt; рдХрд┐рдмрд╛рдирд╛ рдЗрдВрдбреЗрдХреНрд╕ рдкреИрдЯрд░реНрди</i> рдореЗрдВ рдПрдХ <i>рдкреИрдЯрд░реНрди</i> рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  <i>рдЗрдВрдбреЗрдХреНрд╕ рдирд╛рдо</i> рдХреЛ рдЪрд┐рдиреНрд╣ * ( <i>logstash-mikrot *) рдХреЗ</i> рд╕рд╛рде рджрд░реНрдЬ рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╕рднреА рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХрд╛ рдорд┐рд▓рд╛рди рд╣реЛ рдЬрд╛рдП, рд╕рдордп рдФрд░ рд╕рдордп рдХреЗ рд╕рд╛рде рдлрд╝реАрд▓реНрдб рдХреЗ рд░реВрдк рдореЗрдВ <i>рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк</i> рдлрд╝реАрд▓реНрдб рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред  <i>рдХрд╕реНрдЯрдо рдЗрдВрдбреЗрдХреНрд╕ рдкреИрдЯрд░реНрди рдЖрдИрдбреА</i> рдлрд╝реАрд▓реНрдб рдореЗрдВ, рдЖрдк рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдкреИрдЯрд░реНрди рдЖрдИрдбреА (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <i>рд▓реЙрдЧрд╕реНрдЯреИрд╢-рдорд┐рдХрд░реЛрдЯ</i> ) рджрд░реНрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, <i>рдЗрд╕рд╕реЗ</i> рдСрдмреНрдЬреЗрдХреНрдЯ рддрдХ рдкрд╣реБрдВрдЪ рдЖрд╕рд╛рди рд╣реЛ рд╕рдХрддреА рд╣реИред <br><br><h2>  рдХрд┐рдмрд╛рдирд╛ рдореЗрдВ рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдФрд░ рджреГрд╢реНрдп </h2><br>  рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк <i>рд╕реВрдЪрдХрд╛рдВрдХ рдкреИрдЯрд░реНрди рдмрдирд╛</i> рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рднрд╛рдЧ - рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдФрд░ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдХрд┐рдмрд╛рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдФрд░ рдЕрдиреБрднрд╛рдЧ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рд╣рдо рдХреЗрд╡рд▓ рджреЛ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦреЗрдВрдЧреЗред <br><br><h3>  рдбрд┐рд╕реНрдХрд╡рд░ </h3><br>  рдпрд╣рд╛рдВ рдЖрдк рдЕрдиреБрдХреНрд░рдорд┐рдд, рдлрд╝рд┐рд▓реНрдЯрд░, рдЦреЛрдЬ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рд╕рдордпрд░реЗрдЦрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордд рднреВрд▓рдирд╛, рдЬреЛ рдЦреЛрдЬ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рд╕рдордп рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/vk/wn/ta/vkwntasygmykelzligkpf3flsxu.gif"><br><br><h3>  рдХрд▓реНрдкрдирд╛ </h3><br>  рдЗрд╕ рдЦрдВрдб рдореЗрдВ, рдЖрдк рдПрдХрддреНрд░рд┐рдд рдЖрдВрдХрдбрд╝реЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рд╕рд░рд▓ рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдПрдХ рднреМрдЧреЛрд▓рд┐рдХ рдорд╛рдирдЪрд┐рддреНрд░ рдкрд░ рдмреЙрдЯрдиреЗрдЯ рд╕реНрдХреИрдирд┐рдВрдЧ рдХреЗ рд╕реНрд░реЛрддреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рдпрд╛ рддреЛ рдмрд┐рдВрджреАрджрд╛рд░ рдпрд╛ рд╣реАрдЯрдореИрдк рдХреЗ рд░реВрдк рдореЗрдВред  рд░реЗрдЦрд╛рдВрдХрди рдмрдирд╛рдиреЗ, рдЪрдпрди рдХрд░рдиреЗ рдЖрджрд┐ рдХреЗ рднреА рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/f_/rx/p2/f_rxp2xbq4necn0dcsyw2mxkfuy.gif"><br><br>  рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдореИрдВ рдбреЗрдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ, рд╕рдВрднрд╡рддрдГ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди, рд╢рд╛рдпрдж рдХреБрдЫ рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрддрд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВред  рдЕрдзреНрдпрдпрди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдореИрдВ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЛ рдкреВрд░рдХ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реВрдВрдЧрд╛ред <br><br><h2>  рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг </h2><br>  рдпрджрд┐ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ Elasticsearch рдореЗрдВ рдкреНрд░рдХрдЯ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдкрд╣рд▓реЗ Logstash рд▓реЙрдЧ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="plaintext hljs">тЭптЭп docker logs logstash --tail 100 -f</code> </pre> <br>  рдЕрдЧрд░ рдПрд▓реЗрд╕реНрдЯреЗрд╕рд░реНрдЪ рдХреЗ рд╕рд╛рде рдХреЛрдИ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдирд╣реАрдВ рд╣реИ, рддреЛ рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдпрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдореБрдЦреНрдп рдХрд╛рд░рдг рд╣реИ рдФрд░ рдпрд╣ рд▓реЙрдЧ рдХреЗ рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдЕрдзреНрдпрдпрди рдХреЗ рдмрд╛рдж рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ json docker рдХреЛ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдпрджрд┐ рд▓реЙрдЧ рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдЕрдкрдиреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╕реЙрдХреЗрдЯ рдкрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкрдХрдбрд╝рддрд╛ рд╣реИред  рдбрд┐рдмрдЧ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк <i>рдЖрдЙрдЯрдкреБрдЯ рдХреЗ</i> рд░реВрдк рдореЗрдВ <i>рд╕реНрдЯрдбрдЖрдЙрдЯ рдХрд╛</i> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="plaintext hljs">stdout { codec =&gt; rubydebug }</code> </pre> <br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд▓реЙрдЧрд╕реНрдЯреИрд╢ рдбрд┐рдмрдЧ рдЬрд╛рдирдХрд╛рд░реА рд▓рд┐рдЦреЗрдЧрд╛ рдЬрдм рд╕рдВрджреЗрд╢ рд╕реАрдзреЗ рд▓реЙрдЧ рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧрд╛ред <br><br>  рдЗрд▓рд╛рд╕реНрдЯрд┐рд╕рд░реНрдЪ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИ - рдмрд╕ рдЖрдИрдкреА рдкрддреЗ рдФрд░ рд╕рд░реНрд╡рд░ рдХреЗ рдкреЛрд░реНрдЯ рдкрд░, рдпрд╛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдкреАрдЖрдИ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдкрд░ рдЬреАрдИрдЯреА рдЕрдиреБрд░реЛрдз рдХрд░реНрд▓ рдХрд░реЗрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдорд╛рдирд╡-рдкрдардиреАрдп рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рджреЗрдЦреЗрдВ: <br><br><pre> <code class="plaintext hljs">тЭптЭп curl -s 'http://192.168.88.130:9200/_cat/indices?v'</code> </pre> <br><img src="https://habrastorage.org/webt/of/ke/v_/ofkev_rfp6uo9x5rf4tcey0egbm.gif"><br><br>  рдХрд┐рдмрд╛рдирд╛ рднреА рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдПрд▓реАрд╕реНрдЯреЗрд╕рд░реНрдЪ рд╕реЗ рдХреЛрдИ рд╕рдВрдмрдВрдз рдирд╣реАрдВ рд╣реИ, рддреЛ рд▓реЙрдЧреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЗрд╕реЗ рджреЗрдЦрдирд╛ рдЖрд╕рд╛рди рд╣реИред <br><br>  рдпрджрд┐ рд╡реЗрдм рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдирд╣реАрдВ рдЦреБрд▓рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд▓рд┐рдирдХреНрд╕ рдореЗрдВ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдпрд╛ рдЕрдХреНрд╖рдо рд╣реИ (рд╕реЗрдВрдЯреЛрд╕ рдореЗрдВ <i>iptables</i> рдФрд░ <i>docker рдХреЗ</i> рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рдереАрдВ, рд╡реЗ <a href="https://stackoverflow.com/questions/31667160/running-docker-container-iptables-no-chain-target-match-by-that-name" rel="nofollow">рд╡рд┐рд╖рдп</a> рд╕реЗ рд╕рд▓рд╛рд╣ рдкрд░ рд╣рд▓ рдХрд┐рдП рдЧрдП рдереЗ)ред  рдпрд╣ рднреА рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдмрд╣реБрдд рдЙрддреНрдкрд╛рджрдХ рдЙрдкрдХрд░рдг рдирд╣реАрдВ рд╣реЛрдиреЗ рдкрд░, рд╕рднреА рдШрдЯрдХ рдХрдИ рдорд┐рдирдЯреЛрдВ рддрдХ рд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕реНрдореГрддрд┐ рдХреА рдХрдореА рдХреЗ рд╕рд╛рде, рд╕реЗрд╡рд╛рдПрдВ рдмрд┐рд▓реНрдХреБрд▓ рднреА рд▓реЛрдб рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдХрдВрдЯреЗрдирд░ рд╕рдВрд╕рд╛рдзрди рдЙрдкрдпреЛрдЧ рджреЗрдЦреЗрдВ: <br><br><pre> <code class="plaintext hljs">тЭптЭп docker stats</code> </pre> <br>  рдЕрдЧрд░ рдЕрдЪрд╛рдирдХ рдХрд┐рд╕реА рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ <i>рдбреЙрдХрдЯрд░-рдХрдВрдкреЛрдЬрд╝.рдЖрдИрдПрдордПрд▓ рдлрд╝рд╛рдЗрд▓</i> рдореЗрдВ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХреИрд╕реЗ рдмрджрд▓рдирд╛ рд╣реИ рдФрд░ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ, рддреЛ рдпрд╣ <i>рдбреЙрдХрдЯрд░-рдХрдВрдкреЛрдЬрд╝.рдорд╛рдЗрд▓</i> рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдХреЗ рдФрд░ рд╕рдорд╛рди рдХрдорд╛рдВрдб <i>рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХреЗ</i> рд╕рд╛рде рдПрдХ рд╣реА рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">тЭптЭп docker-compose --compatibility up -d</code> </pre> <br>  рдЙрд╕реА рд╕рдордп, рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдЕрдиреБрднрд╛рдЧреЛрдВ рдореЗрдВ, рдкреБрд░рд╛рдиреА рд╡рд╕реНрддреБрдУрдВ (рдХрдВрдЯреЗрдирд░, рдиреЗрдЯрд╡рд░реНрдХ, рд╡реЙрд▓реНрдпреВрдо) рдХреЛ рдорд┐рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдирдП рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдбреЗрдЯрд╛ рдЙрд╕реА рд╕рдордп рдЦреЛ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ <i>рдирд╛рдо рд╡рд╛рд▓реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</i> , рдЬреЛ рдХрдВрдЯреЗрдирд░ рдХреЗ рд╕рд╛рде рд╣рдЯрд╛рдП рдирд╣реАрдВ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рд╣реЛрд╕реНрдЯ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рд▓реЙрдЧрд╕реНрдЯреИрд╢ рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдмрджрд▓рдиреЗ рдкрд░ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЖрдк <i>docker рдкреБрдирд░рд╛рд░рдВрдн рдХрдорд╛рдВрдб рдХреЗ</i> рд╕рд╛рде рд╕реЗрд╡рд╛ рдХреЛ рдЕрд▓рдЧ рд╕реЗ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ ( <i>docker-compose.nl рдХреЗ</i> рд╕рд╛рде рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ <i>)</i> : <br><br><pre> <code class="plaintext hljs">тЭптЭп docker restart logstash</code> </pre> <br>  рдЖрдк <i>docker рдирд┐рд░реАрдХреНрд╖рдг рдХрдорд╛рдВрдб рдХреЗ</i> рд╕рд╛рде <i>docker</i> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕реЗ <i><a href="https://stedolan.github.io/jq/tutorial/" rel="nofollow">jq рдХреЗ</a></i> рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред <br><br><img src="https://habrastorage.org/webt/vw/l0/-v/vwl0-vgzu8snbp16vgzet9lsa64.gif"><br><br><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br>  рдореИрдВ рдпрд╣ рдиреЛрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХреА рдЧрдИ рдереА рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рдкрд░реАрдХреНрд╖рдг (рджреЗрд╡) рд╡рд╛рддрд╛рд╡рд░рдг рд╣реИ рдФрд░ рдЗрд╕реЗ рд░рд╛рдЙрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рдЕрдзрд┐рдХ рдЧрдВрднреАрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрднреНрдпрд╛рд╕ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ, HTTPS рдХреЗ рд▓рд┐рдП рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ, рдмреИрдХрдЕрдк рдмрдирд╛рдиреЗ, рд╕рд╛рдорд╛рдиреНрдп рдирд┐рдЧрд░рд╛рдиреА (рдЬреЛ рдореБрдЦреНрдп рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдмрдЧрд▓ рдореЗрдВ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ) рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╡реИрд╕реЗ, рдЯреНрд░реИрдлрд┐рдХ рдореЗрд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдореЗрд░реЗ рдбреЙрдХ рдореЗрдВ рдЪрд▓рддрд╛ рд╣реИ, рдЬреЛ рдХреБрдЫ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рд╣реИ, рдФрд░ рд╕реНрд╡рдпрдВ рдкрд░ рдЯреАрдПрд▓рдПрд╕ рдХреЛ рднреА рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП DNS рдФрд░ рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдХрд┐рдмрд╛рдирд╛ рд╡реЗрдм рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдЧреИрд░-рдкрдВрдЬреАрдХреГрдд HTTPS рдФрд░ рдПрдХ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ (рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдВ, рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдХрд┐рдмрд╛рдирд╛ рд╡реЗрдм рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕рд╡рд░реНрдб рд╕реБрд░рдХреНрд╖рд╛ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ)ред  рдореИрдВ рдЖрдЧреЗ рдбреЙрдХрд░ рдХреЗ рд╕рд╛рде рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЯреНрд░рд╛рдлрд┐рдХ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдореЗрдВ рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi481596/">https://habr.com/ru/post/hi481596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi481584/index.html">рдПрдХ рдЯреАрдо рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╕рдордп, рд╕рднреА рдирд┐рдпрдореЛрдВ рдХреЛ рддреЛрдбрд╝ рджреЗрдВ</a></li>
<li><a href="../hi481586/index.html">рдИрдХреЙрдорд░реНрд╕ рдЯреЗрдХ рдЯреНрд░реЗрдВрдбреНрд╕ 2020: рдПрд░рд╛ рдСрдл рдЗрдорд░реНрд╕рд┐рд╡ рдЯреЗрдХреНрдиреЛрд▓реЙрдЬреАрдЬ</a></li>
<li><a href="../hi481588/index.html">рд░рдиреЗрдЯ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреА рдХрд╡рд╛рдпрдж рд╢реБрд░реВ рд╣реБрдИред рдХреНрдпрд╛ рд╣рдо рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВрдЧреЗ?</a></li>
<li><a href="../hi481592/index.html">рдПрдХ рдЕрдЪреНрдЫрд╛ рдЫреВрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдЯрд░ рдпрд╛рддреНрд░реА рдХреЗ рд▓рд┐рдП рдЫрд╣ рдирдП рд╕рд╛рд▓ рдХрд╛ рдЙрдкрд╣рд╛рд░ рд╡рд┐рдХрд▓реНрдк</a></li>
<li><a href="../hi481594/index.html">GOST R IEC 61508 (IEC 61508) рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдПрдХ "рд╕рд╛рдзрд╛рд░рдг рд╡реЛрд▓реНрдЯреЗрдЬ рдЬрдирд░реЗрдЯрд░" рдХрд╛ рд╡рд┐рдХрд╛рд╕</a></li>
<li><a href="../hi481598/index.html">рдПрд╡рд▓реЛрдирд┐рдпрд╛ рдпреВрдЖрдИ рдЪрд┐рдбрд╝рд┐рдпрд╛рдШрд░ рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдХреЗ рдЦрд┐рд▓рд╛рдл рд▓рдбрд╝рд╛рдИ рдореЗрдВ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рдпреЛрдЧрджрд╛рди</a></li>
<li><a href="../hi481600/index.html">рдмреЛрдиреНрд╕рд╛рдИ рдкрд░рд┐рд╡рд╛рд░ рд╡рд┐рдХреА рдЗрдВрдЬрди: 2019 рдкрд░рд┐рдгрд╛рдо</a></li>
<li><a href="../hi481604/index.html">рдЪреЗрд▓реНрдпрд╛рдмрд┐рдВрд╕реНрдХ рдбреЗрд╡рд▓рдкрд░реНрд╕ Google Play рдФрд░ рд╕рд╛рдорд╛рдЬрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдХрдареЛрд░ рдЦреЗрд▓ рдмрдирд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi481606/index.html">C ++ рдФрд░ Cortex M4 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдСрдмреНрдЬрд░реНрд╡рд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдереИрддрд┐рдХ рд╕рджрд╕реНрдпрддрд╛</a></li>
<li><a href="../hi481610/index.html">PostgreSQL Antipatterns: рд▓реЛрдб рдХреЗ рддрд╣рдд рдПрдХ рдмрдбрд╝реА рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>