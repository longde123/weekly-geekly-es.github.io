<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîù üè≠ ü§òüèæ Technische Details zum Hacken der Capital One Bank auf AWS üåÇ üë©üèæ‚Äçüåæ üïê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Am 19. Juli 2019 erhielt die Capital One Bank eine Nachricht, vor der jedes moderne Unternehmen Angst hat - ein Datenleck ist aufgetreten. Es betraf m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Technische Details zum Hacken der Capital One Bank auf AWS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463317/"><img src="https://habrastorage.org/getpro/habr/post_images/660/704/174/66070417484bc74908f6089c720dc7f4.png"><br><br>  Am 19. Juli 2019 erhielt die Capital One Bank eine Nachricht, vor der jedes moderne Unternehmen Angst hat - ein Datenleck ist aufgetreten.  Es betraf mehr als 106 Millionen Menschen.  140.000 US-Sozialversicherungsnummern, eine Million kanadische Sozialversicherungsnummern.  80.000 Bankkonten.  Unangenehm, stimme zu? <br><br>  Leider hat das Hacken am 19. Juli √ºberhaupt nicht stattgefunden.  Wie sich herausstellte, f√ºhrte Paige Thompson, auch bekannt als <i>Erratic</i> , es zwischen dem 22. und 23. M√§rz 2019 auf.  Das ist <u>fast vier Monate her</u> .  Tats√§chlich wusste Capital One nur mit Hilfe externer Berater, dass etwas passiert war. <br><a name="habracut"></a><br>  Ehemalige Amazon-Mitarbeiterin verhaftet, droht ihr eine Geldstrafe von 250.000 US-Dollar und f√ºnf Jahre Gef√§ngnis ... aber es gibt viel Negativit√§t.  Warum?  Weil viele Unternehmen, die gehackt wurden, versuchen, die Verantwortung f√ºr die St√§rkung ihrer Infrastruktur und Anwendungen angesichts der zunehmenden Internetkriminalit√§t beiseite zu schieben. <br><br>  In jedem Fall k√∂nnen Sie diese Geschichte einfach googeln.  Wir werden nicht ins Drama gehen, sondern √ºber die <b>technische</b> Seite der Dinge sprechen. <br><br><h4>  Was ist zuerst passiert? </h4><br>  Bei Capital One gab es ungef√§hr 700 S3-Eimer, die Paige Thompson kopierte und entleerte. <br><br><h4>  Ist dies zweitens ein weiterer Fall einer falsch konfigurierten S3-Bucket-Richtlinie? </h4><br>  Nein, diesmal nicht.  Hier erhielt sie Zugriff auf einen Server mit einer falsch konfigurierten Firewall und f√ºhrte von dort aus den gesamten Vorgang durch. <br><br><h4>  Warten Sie, wie ist das m√∂glich? </h4><br>  Beginnen wir mit der Anmeldung am Server, obwohl wir nur wenige Details haben.  Uns wurde nur gesagt, dass dies durch eine ‚Äûfalsch konfigurierte Firewall‚Äú geschehen ist.  Etwas so Einfaches wie die falschen Sicherheitsgruppeneinstellungen oder die Konfiguration der Webanwendungsfirewall (Imperva) oder der Netzwerkfirewall (iptables, ufw, shorewall usw.).  Capital One bekannte sich nur schuldig und sagte, dass es das Loch schloss. <br><br><blockquote>  Stone sagte, dass Capital One die Sicherheitsl√ºcke der Firewall zun√§chst nicht bemerkte, aber schnell reagierte, sobald es davon erfuhr.  Dies wurde nat√ºrlich durch die Tatsache unterst√ºtzt, dass der Hacker den Schl√ºssel zur Identifizierung der Informationen angeblich √∂ffentlich zug√§nglich gemacht habe, sagte Stone. </blockquote><br>  <i>Wenn Sie daran interessiert sind, warum wir uns nicht mit diesem Teil befassen, verstehen Sie, dass wir aufgrund begrenzter Informationen nur spekulieren k√∂nnen.</i>  <i>Dies ist sinnlos, da der Hack von der L√ºcke abh√§ngt, die Capital One hinterlassen hat.</i>  <i>Und wenn sie uns nicht mehr erz√§hlen, listen wir nur alle m√∂glichen M√∂glichkeiten auf, wie Capital One seinen Server offen gelassen hat, in Kombination mit allen m√∂glichen M√∂glichkeiten, wie jemand eine dieser verschiedenen Optionen nutzen kann.</i>  <i>Diese L√ºcken und Methoden k√∂nnen von wild dummen Versehen bis zu unglaublich komplexen Mustern reichen.</i>  <i>Angesichts der Vielzahl von M√∂glichkeiten wird dies zu einer langen Saga ohne wirklichen Abschluss.</i>  <i>Daher konzentrieren wir uns auf die Analyse des Teils, in dem wir die Fakten haben.</i> <br><br><h4>  Also die erste Schlussfolgerung: Wissen Sie, was Ihre Firewalls erlauben </h4><br>  Richten Sie eine Richtlinie oder einen Prozess ein, um sicherzustellen, dass NUR das, was offen ist, offen ist.  Wenn Sie AWS-Ressourcen wie Sicherheitsgruppen oder Netzwerk-ACLs verwenden, kann die Checkliste f√ºr die √úberpr√ºfung nat√ºrlich lang sein. Da jedoch viele Ressourcen automatisch erstellt werden (d. H. CloudFormation), k√∂nnen Sie auch deren Pr√ºfung automatisieren.  Ob es sich um ein provisorisches Skript handelt, das nach neuen Objekten auf Fehler sucht, oder um eine Sicherheits√ºberpr√ºfung in einem CI / CD-Prozess ... es gibt viele einfache Optionen, um dies zu vermeiden. <br><br>  Der ‚Äûlustige‚Äú Teil der Geschichte ist, dass nichts passiert w√§re, wenn Capital One das Loch von Anfang an geschlossen h√§tte.  Und deshalb ist es ehrlich gesagt immer schockierend zu sehen, wie wirklich etwas <i><b>ganz Einfaches</b></i> der einzige Grund f√ºr eine Hacking-Firma wird.  Besonders so gro√ü wie Capital One. <br><br><h4>  Also, der Hacker drinnen - was ist als n√§chstes passiert? </h4><br>  Nun, nach dem Einbruch in die EC2-Instanz ... kann viel schief gehen.  Sie gehen fast am Rand eines Messers entlang, wenn Sie jemandem erlauben, so weit zu gehen.  Aber wie ist sie in den S3-Eimer gekommen?  Um dies zu verstehen, diskutieren wir die Rollen von IAM (IAM-Rollen). <br><br>  Eine M√∂glichkeit, auf AWS-Services zuzugreifen, besteht darin, Benutzer zu sein.  Okay, das ist ziemlich offensichtlich.  Was aber, wenn Sie anderen AWS-Diensten, z. B. Ihren Anwendungsservern, Zugriff auf Ihre S3-Buckets gew√§hren m√∂chten?  Daf√ºr gibt es IAM-Rollen.  Sie bestehen aus zwei Komponenten: <br><br><ol><li>  Vertrauensrichtlinie - Welche Dienste oder welche Personen k√∂nnen diese Rolle nutzen? <br></li><li>  Berechtigungsrichtlinie - Was erm√∂glicht diese Rolle? </li></ol><br>  Sie m√∂chten beispielsweise eine IAM-Rolle erstellen, mit der EC2-Instanzen auf den S3-Bucket zugreifen k√∂nnen: Zun√§chst wird eine Vertrauensrichtlinie f√ºr die Rolle eingerichtet, die EC2 (der gesamte Dienst) oder bestimmte Instanzen die Rolle √ºbernehmen k√∂nnen.  Das Annehmen einer Rolle bedeutet, dass sie Rollenberechtigungen verwenden k√∂nnen, um Aktionen auszuf√ºhren.  Zweitens erm√∂glicht die Berechtigungsrichtlinie dem Dienst / der Person / der Ressource, die / die die Rolle √ºbernommen hat, etwas in S3 zu tun, sei es Zugriff auf einen bestimmten Bucket ... oder auf mehr als 700, wie im Fall von Capital One. <br><br>  Sobald Sie sich in einer EC2-Instanz mit der IAM-Rolle befinden, k√∂nnen Sie Anmeldeinformationen auf verschiedene Arten abrufen: <br><br><ol><li> Sie k√∂nnen Instanzmetadaten unter <code>http://169.254.169.254/latest/meta-data</code> anfordern <br><br>  Unter dieser Adresse finden Sie unter anderem die IAM-Rolle mit einem der Zugriffsschl√ºssel.  Nat√ºrlich nur, wenn Sie sich in einer Instanz befinden. <br></li><li>  Verwenden Sie AWS CLI ... <br><br>  Wenn die AWS-Befehlszeilenschnittstelle installiert ist, werden sie gegebenenfalls mit den Anmeldeinformationen der IAM-Rollen geladen.  Es bleibt nur die Instanz durchzuarbeiten.  Wenn ihre Vertrauensrichtlinie offen w√§re, k√∂nnte Page dies nat√ºrlich direkt tun. </li></ol><br>  Das Wesentliche an den IAM-Rollen ist daher, dass eine Ressource von IHREM NAMEN auf ANDERE RESSOURCEN reagieren kann. <br><br><h4>  Nachdem Sie die Rollen von IAM verstanden haben, k√∂nnen wir dar√ºber sprechen, was Page Thompson getan hat: </h4><br><ol><li>  Sie erhielt Zugriff auf den Server (EC2-Instanz) durch ein Loch in der Firewall <br><br>  Unabh√§ngig davon, ob es sich um Sicherheitsgruppen / ACLs oder um eigene Webanwendungs-Firewalls handelt, war die L√ºcke wahrscheinlich recht einfach zu schlie√üen, wie in den offiziellen Aufzeichnungen angegeben. <br></li><li>  Sobald sie auf dem Server war, konnte sie so tun, als w√§re sie der Server <br></li><li>  Da die IAM-Serverrolle S3 den Zugriff auf diese √ºber 700 Buckets erm√∂glichte, konnte sie darauf zugreifen </li></ol><br>  Von nun an konnte sie nur noch den Befehl <code>List Buckets</code> und dann den Befehl <code>Sync</code> √ºber die AWS CLI ausf√ºhren ... <br><br><hr><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Capital One Bank sch√§tzt den Schaden durch Hacking auf 100 bis 150 MILLIONEN Dollar</a> .  Um solche Sch√§den zu vermeiden, investieren Unternehmen so viel in den Schutz der Cloud-Infrastruktur, von DevOps und Sicherheitsexperten.  Und wie wertvoll und kosteng√ºnstig ist der √úbergang zur Cloud?  So sehr, dass der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√∂ffentliche Cloud-Markt</a> trotz immer mehr Cybersicherheitsproblemen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im ersten Quartal 2019 um 42% wuchs</a> ! <br><br>  Die Moral dieser Geschichte: √úberpr√ºfen Sie Ihre Sicherheit;  regelm√§√üige Audits durchf√ºhren;  Respektieren Sie das Prinzip des geringsten Privilegs f√ºr Sicherheitsrichtlinien. <br><br>  (Den vollst√§ndigen Rechtsbericht finden Sie hier). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463317/">https://habr.com/ru/post/de463317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463303/index.html">Facebook h√∂rt schlie√ülich auf, Anzeigen f√ºr Telefonnummern zu schalten, die f√ºr 2FA eingegeben werden</a></li>
<li><a href="../de463305/index.html">Tools zum Analysieren und Debuggen von .NET-Anwendungen</a></li>
<li><a href="../de463307/index.html">Fallstudie zur Kommunikation mit einem ‚Äûschweren‚Äú Kunden</a></li>
<li><a href="../de463311/index.html">CTT in Serverl√∂sungen. Die zweite Version + die Ank√ºndigung der dritten, mit der F√§higkeit zu ber√ºhren</a></li>
<li><a href="../de463313/index.html">Ein alternativer Ansatz zum Abonnieren von Ereignissen, oder ist EventObject wirklich notwendig?</a></li>
<li><a href="../de463321/index.html">Usability-K√∂rbe und Kassen: Analyse der 20 besten russischen Nischen-Online-Shops</a></li>
<li><a href="../de463325/index.html">Game Designer Reflection: Charaktere f√ºr ein Spiel, das nicht herausgekommen ist</a></li>
<li><a href="../de463327/index.html">Vue.js: 3 Anti-Patterns</a></li>
<li><a href="../de463329/index.html">Entwicklung dynamischer Baumdiagramme mit SVG und Vue.js.</a></li>
<li><a href="../de463331/index.html">Apollo Client. Jetzt mit React Hooks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>