<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>▫️ 🍌 ⏱️ الفرز ... حسب جدول التجزئة (أيضًا حسب عدد الأشجار وخريطة HashMap) 🌠 ✋🏽 ☔️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="قبل ثلاثة أيام ، فكرت في الجمع بين العد وفرز الأشجار. بعد مناقشتها مع زميل ، توصلنا إلى القرار التالي: استخدم HashMap بدلاً من TreeSet (ما علاقة TreeS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>الفرز ... حسب جدول التجزئة (أيضًا حسب عدد الأشجار وخريطة HashMap)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418355/" style=";text-align:right;direction:rtl">  قبل ثلاثة أيام ، فكرت في الجمع بين العد وفرز الأشجار.  بعد مناقشتها مع زميل ، توصلنا إلى القرار التالي: استخدم HashMap بدلاً من TreeSet (ما علاقة TreeSet به ، يمكنك أن ترى أدناه).  ولكن حتى هذا بدا لي قليلاً ، لذلك قررت تنفيذ جدول التجزئة الخاص بي ومعرفة ما جاء منه.  بدت النتائج مثيرة للاهتمام بالنسبة لي. <br><a name="habracut"></a><br>  تعتبر جميع الأنواع الثلاثة من الفرز رائعة للحالات التي تكون فيها قوة العديد من العناصر الفريدة في المصفوفة صغيرة نسبيًا (ما يعنيه هذا سيصبح واضحًا بعد إلقاء نظرة على نتائج الاختبار). <br><br><h4 style=";text-align:right;direction:rtl">  فرز عدد الأشجار </h4><br>  نقوم ببناء شجرة Steam (المفتاح ، الكمية) ، حيث يكون المفتاح مسؤولاً عن عنصر الصفيف ، والكمية هي عدد التكرارات لعنصر الصفيف هذا.  الشجرة متوازنة بشكل طبيعي ، أسود وأحمر ، على سبيل المثال. <br><br>  علاوة على ذلك ، كل شيء منطقي.  نضيف جميع عناصر المصفوفة إلى الزوج ، ونبحث عن الزوج في الشجرة (لتجنب إعادة إنشاء الكائنات ، نستخدم الزوج الذي تم إنشاؤه سابقًا ، والذي نغير منه المفتاح. هنا لا نرغب في الرقم ، لأننا نبحث عن تطابق فقط بواسطة المفتاح).  إذا كان هذا المفتاح موجودًا بالفعل ، قم بزيادة الكمية ، أو أضف زوجًا جديدًا (مفتاح 1). <br><br>  نعيد كتابة المصفوفة ونحذف قمة الرأس في كل مرة ونكتب المفتاح عدة مرات مثل رقمه. <br><br>  من أجل عدم تنفيذ الشجرة نفسها ، بالنسبة للخوارزمية الموصوفة ، استخدمت TreeSet ، والتي تعمل على شجرة سوداء حمراء. <br><br><h4 style=";text-align:right;direction:rtl">  باستخدام HashMap </h4><br>  سنقوم بتخزين عنصر الصفيف كمفتاح ، وعدد التكرار كقيمة المفتاح. <br><br><h4 style=";text-align:right;direction:rtl">  باستخدام جدول التجزئة الخاص بي </h4><br>  قررت اللجوء إلى طريقة العنونة المفتوحة.  في جدول التجزئة ، نقوم بتخزين كائنات من فئة الزوج ، حيث يكون الأول هو المفتاح ، والثاني هو عدد التكرار.  وبطبيعة الحال ، تمت إضافة منشئ يأخذ الحجم الأولي للجدول وعامل التحميل.  وظيفة التجزئة هي الأبسط: نأخذ المعادلة الرئيسية ، في حالة الوصول المتكرر ، نضيف واحدة (تعمل الوحدة بشكل جيد من حيث أن مجموعة المفاتيح هي الأكثر طلبًا ، وفي النهاية سيتعين علينا فرز جميع المفاتيح بفرز سريع قياسي ، لأنه في الجدول يمكن أن تتحول إلى غير مرتبة )  لذا يمكننا القول أن هذا مزيج من التجزئة ونوع آخر. <br><br><h4 style=";text-align:right;direction:rtl">  التصادمات </h4><br>  من الواضح أن التصادمات يمكن أن تحدث وهذا سيؤثر بشكل سيئ على كل من وقت تحديد التجزئة وسرعة فرز مجموعة التجزئة الناتجة (يتم فرز البيانات المرتبة أو المرتبة تقريبًا بشكل أسرع).  ولكن إليك الشيء: يتغير تجزئة لدينا مع توسيع الجدول.  لذا فإن اختيار مثل هذه البيانات يصبح أكثر صعوبة على وجه التحديد.  علاوة على ذلك ، من الممكن جعل عامل الحمل ومعامل التمدد عشوائيًا (في نطاق معين ، بالطبع) ، مما يجعل من المستحيل تحديد القيم التي تؤدي إلى التصادمات.  حسنًا ، إذا أدت بعض البيانات في جدول واحد إلى حدوث تصادمات ، فبعد إعادة التجزئة ، يمكن تقليل عدد التصادمات بشكل كبير (عدة مرات).  ستكون نقطة الضعف هي العوامل العددية ، ولكنها صغيرة بشكل لا يصدق (حتى 2 ^ 31 ، على سبيل المثال ، هناك 11 منها فقط (باستثناء 0)). <br><br>  تجزئة التشفير ليست مناسبة لنا ، ولأنها يمكنك نسيان مجموعة من التجزئة المجزأة تقريبًا (بمعنى الترتيب باستخدام المفاتيح). <br><br><h4 style=";text-align:right;direction:rtl">  وقت العمل </h4><br>  فرز العد الشجري: في أسوأ الحالات ، لـ O (n log n) ، في أفضل الأحوال ، للوقت الخطي. <br>  تصنيف جدول التجزئة: وقت التجزئة + تعقيد فرز مصفوفة التجزئة (قد يختلف بناءً على الخوارزمية والتطبيق المختارين ، لذلك لن أشير إلى أي شيء هنا).  تقدير التعقيد صعب بسبب استخدام دالة التجزئة والعديد من الأساليب الممكنة لفرز التجزئة.  يحتاج هذا السؤال إلى بحث إضافي ، ولكن من الواضح أنه في أسوأ الحالات (عندما تتطابق بيانات الإدخال عن قصد مع وظيفة تجزئة محددة في مرحلة معينة من التنفيذ) ، سيكون وقت التشغيل هو O (n ^ 2). <br><br><h4 style=";text-align:right;direction:rtl">  ماذا من الذاكرة؟ </h4><br>  يتطلب فرز عدد الأشجار ذاكرة إضافية O (مميزة (n)) <br>  بالنسبة لجدول التجزئة ، نحتاج إلى ذاكرة O (مميزة (n)) + ذاكرة لفرز التجزئة (اعتمادًا على الخوارزمية المحددة). <br><br>  فيما يلي النتائج بالمللي ثانية التي حصلت عليها على أرقام عشوائية عند فرز مصفوفة من الكائنات إلى 10 مليون elt ، مع مجموعة من القيم [0 ؛  س]: <br><br>  في الاختبارات ، عامل التحميل في جدول التجزئة الخاص بي = 0.75 ، السعة الأولية = 20 ، يتم مضاعفة الجدول في كل مرة <br><br>  بالنسبة إلى س = 10: <br>  2044 - متكامل <br>  285 - عدد الأشجار (فرز Usatov) <br>  276 - HashMap (فرز Usatov-Prokurat) <br>  140 - مع جدول التجزئة الخاص بي (فرز Usatov-Prokurat باستخدام MyHashTable) <br><br>  س = 100: <br>  2406 - مدمج <br>  455 - شجرة العد <br>  283 - هاشماب <br>  134 - جدول التجزئة <br><br>  س = 1_000: <br>  2171 - متكامل <br>  930 - شجرة العد <br>  380 - هاشماب <br>  209 - جدول التجزئة <br><br>  س = 10_000 <br>  2879 - متكامل <br>  1666 - شجرة العد <br>  634 - هاشماب <br>  326 - جدول التجزئة <br><br>  س = 100_000 <br>  4045 - متكامل <br>  2899 - شجرة العد <br>  866 - هاشماب <br>  762 - جدول التجزئة <br><br>  س = 1_000_000 <br>  4997 - متكامل <br>  5762 - شجرة العد <br>  2505- بندر عبد الحليم <br>  1294 - جدول التجزئة <br><br>  س = 10_000_000 <br>  5083 - متكامل <br>  11480 - شجرة العد <br>  5099 - هاشماب <br>  3240 - جدول التجزئة <br><br>  كما قلت في البداية ، فإن هذه الفرز هي الأنسب لتلك الحالات عندما تكون قوة العديد من عناصر المصفوفة صغيرة بما يكفي بالنسبة لحجم المصفوفة. <br><br>  من الجدير بالذكر أيضًا أن الفرز المضمّن يعمل بشكل أسرع بكثير على البيانات المطلوبة (التي تم طلبها تقريبًا) (أو مصفوفة بالترتيب العكسي) ، لكن أسلوبي يعمل بشكل أسرع على الأرقام العشوائية. <br><br>  فرز عدد الأشجار: <br><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovSort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ TreeSet&lt;MyPair&gt; tree = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TreeSet&lt;&gt;(); MyPair temp; MyPair mp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i : arr) { temp = mp; temp.first = i; temp = tree.ceiling(temp); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; temp.first == i) <span class="hljs-comment"><span class="hljs-comment">//   , .    ,      temp.second++; else tree.add(new MyPair(i, 1)); } int ptr = 0; while (!tree.isEmpty()) { temp = tree.pollFirst(); for (int i = 0; i &lt; temp.second; i++) arr[ptr++] = temp.first; } }</span></span></code> </pre> <br>  الفرز من خلال HashMap: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovProkuratSortUsingHashMap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ HashMap&lt;Integer, Integer&gt; hm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); Integer temp; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : arr) { temp = hm.get(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) hm.put(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> hm.put(i, temp + <span class="hljs-number"><span class="hljs-number">1</span></span>); } ArrayList&lt;Integer&gt; keys = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(hm.keySet().size()); keys.addAll(hm.keySet()); keys.sort(Comparator.naturalOrder()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : keys) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; hm.get(i); j++) arr[ptr++] = i; }</code> </pre><br>  فرز من خلال جدول التجزئة الخاص بي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usatovProkuratSortUsingMyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[] arr)</span></span></span><span class="hljs-function"> </span></span>{ MyHashTable mht = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyHashTable(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer i : arr) mht.add(i); MyPair[] res = mht.getPairs(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; Arrays.sort(res, Comparator.comparingInt(o -&gt; o.first)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair mp : res) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; mp.second; i++) arr[ptr++] = mp.first; }</code> </pre><br>  تنفيذ جدول التجزئة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MyPair[] hashArr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> loadFactor = <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> expansivity = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DEFAULT_CAPACITY = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[DEFAULT_CAPACITY]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[DEFAULT_CAPACITY]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyHashTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> capacity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> loadFactor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expansivity)</span></span></span><span class="hljs-function"> </span></span>{ hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[capacity]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadFactor = loadFactor; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expansivity = expansivity; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MyPair[] getPairs() { MyPair[] pairs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) count]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptr = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair i : hashArr) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) pairs[ptr++] = i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pairs; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MyPair </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length].first == key) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hashArr[(key + add) % hashArr.length]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (add++ == hashArr.length) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count / hashArr.length &gt;= loadFactor) grow(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(key + add) % hashArr.length] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair(key, <span class="hljs-number"><span class="hljs-number">1</span></span>); count++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(key + add) % hashArr.length].first == key) { hashArr[(key + add) % hashArr.length].second++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair newMP)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count / hashArr.length &gt;= loadFactor) grow(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(newMP.first + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(newMP.first + add) % hashArr.length] = newMP; count++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(newMP.first + add) % hashArr.length].first == newMP.first) { hashArr[(newMP.first + add) % hashArr.length].second += newMP.second; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">grow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ MyPair[] oldHash = hashArr; hashArr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyPair[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (expansivity * hashArr.length)]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyPair i : oldHash) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) innerAdd(i); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">innerAdd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair mp)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> add = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(mp.first + add) % hashArr.length] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { hashArr[(mp.first + add) % hashArr.length] = mp; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hashArr[(mp.first + add) % hashArr.length].first == mp.first) { hashArr[(mp.first + add) % hashArr.length].second += mp.second; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } add++; } } }</code> </pre><br>  فئة Steam: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> first; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> second; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> first, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> second)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.first = first; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.second = second; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compareTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyPair o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first - o.first; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; MyPair myPair = (MyPair) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first == myPair.first; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first; } }</code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar418355/">https://habr.com/ru/post/ar418355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar418341/index.html">يوم مسؤول النظام سعيد! بطاقة تهنئة ذات معنى</a></li>
<li><a href="../ar418345/index.html">توثيق صيغ تبادل المعلومات - سهلة وبسيطة</a></li>
<li><a href="../ar418347/index.html">كيف كتبت مكتبة C ++ 11 القياسية أو لماذا يكون التعزيز مخيفًا جدًا. الفصل 4.3</a></li>
<li><a href="../ar418349/index.html">خدمة Azure Kubernetes (AKS) و PowerShell</a></li>
<li><a href="../ar418353/index.html">خريطة ذهنية بدلاً من حالة اختبار ، أو كيف يسمح لك التصور باختبار التطبيق بشكل أسرع</a></li>
<li><a href="../ar418357/index.html">DEFCON 23. "اعترافات لاعب سيبراني محترف." كين ويستن</a></li>
<li><a href="../ar418359/index.html">ملخص التكنولوجيا المالية: تحديد مواطني السوبر ماركت المالي ، موظف QIWI السابق الملغومة 2.4 ٪ من البيتكوين ، بريكس و blockchain</a></li>
<li><a href="../ar418361/index.html">لماذا E في الاختصار EHD هو حول العمليات التجارية</a></li>
<li><a href="../ar418363/index.html">ثلاث علامات أكيدة على أن الوقت قد حان لتقليص إطار العمل الخاص بك</a></li>
<li><a href="../ar418365/index.html">بطيء ولكنه حقيقي: المحيطات والمحيطات تهدد البنية التحتية العالمية للإنترنت</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>