<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•™ üëÇüèΩ üßï Schreiben Sie sicheres Arbeiten mit PHP-Arrays üí± ‚òÅÔ∏è üçí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits, ich erz√§hle Ihnen von meinem eigenen Fahrrad f√ºr die bequeme Arbeit mit Arrays in PHP. 

 Tippe Andeutungen 
 In PHP7 tauchten Tippf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben Sie sicheres Arbeiten mit PHP-Arrays</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476102/">  Hallo allerseits, ich erz√§hle Ihnen von meinem eigenen Fahrrad f√ºr die bequeme Arbeit mit Arrays in PHP. <br><br><h2>  Tippe Andeutungen </h2><br>  In PHP7 tauchten Tippfehler auf, die es der IDE erm√∂glichten, eine bessere statische Analyse des Codes durchzuf√ºhren, und die Qualit√§t unseres Codes verbesserte sich (oder es wurde richtig " <b>besser</b> "?). <br><br>  Fr√ºher war es der IDE nat√ºrlich m√∂glich, einen Hinweis in die Kommentare f√ºr den Code zu schreiben, aber jetzt sind die Typen Teil des Codes geworden und jetzt ist es m√∂glich geworden, etwas umzugestalten, und Sie haben keine Angst mehr, etwas irgendwo zu vergessen (Umzugestalten nat√ºrlich im Sinne des Umbenennens von Klassen und Schnittstellen). <br><br>  Neben der M√∂glichkeit, den Ausgabetyp anzugeben, konnte auch der Typ des Eingabearguments angegeben werden. <br><br>  Neben den netten Funktionen sind mit dem Typhinweis auch Verantwortlichkeiten verbunden, dh die Variablentypen sollten wirklich den Angaben in der Methodensignatur entsprechen. <br><br>  Wenn Sie keine Typen √ºberpr√ºfen, k√∂nnen Fehler in Methoden und Konstruktoren auftreten (Fehler in Designern sind besonders ermutigend). <br><br>  Das manuelle Schreiben von Schecks ist m√ºhsam. Ich habe mich entschlossen, dieses Gesch√§ft zu automatisieren, aber nicht durch √úberpr√ºfung, sondern durch Casting auf den gew√ºnschten Typ. <br><a name="habracut"></a><br>  In meiner Arbeit muss ich oft von Grund auf neu schreiben, normalerweise sind es entweder Prototypen oder Parser oder ETLs f√ºr eine neue Datenquelle, tats√§chlich auch ein Parser. <br><br>  Nat√ºrlich arbeiten Sie mit Arrays (zum Beispiel, wenn Sie aus * .csv lesen), k√∂nnen Sie mit der Datenbank √ºber ORM arbeiten, aber f√ºr meine Aufgaben ist es zu umst√§ndlich, mit der Datenbank √ºber PDO zu arbeiten, wodurch Sie wieder Daten in Arrays erhalten.  "Favorit" Bitrix kann nur Daten in einem Array zur√ºckgeben. <br><br>  Egal wie Sie Daten von Arrays abrufen m√ºssen.  Also habe ich einen Wrapper f√ºr die Arbeit mit Arrays geschrieben. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Um</a> den Code nicht von Projekt zu Projekt zu kopieren, habe ich das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Paket f√ºr <b>Composer entworfen</b></a> : <br><br><pre><code class="bash hljs">composer require sbwerewolf/language-specific</code> </pre> <br><h2>  Werthandler </h2><br>  Meine erste Anforderung war, immer zu wissen, welchen Typ ich erhalten w√ºrde.  Zuvor mussten wir nat√ºrlich noch den Wert abrufen, wahrscheinlich √ºber den Index, und kamen zu dem Schluss, dass wir die <b>get</b> () -Methode ben√∂tigen. <br><br>  Und jetzt brauchen wir Methoden zum Casting, es gibt nicht viele Typen in PHP, wir haben die folgenden Methoden: <br><br><ol><li>  int () </li><li>  str () </li><li>  bool () </li><li>  double () </li></ol><br>  Arrays sto√üen manchmal auf etwas, also sei es f√ºr Arrays: <br><br><ul><li>  array () </li></ul><br>  Manchmal muss man das Element einfach so bekommen, wie es ist: <br><br><ul><li>  asIs () </li></ul><br>  Manchmal gibt es m√∂glicherweise kein Element mit einem bestimmten Index, und dann m√ºssen Sie den Standardwert verwenden: <br><br><ul><li>  default () </li></ul><br><h2>  Arrayhandler </h2><br>  Die n√§chste Anforderung bestand darin, das Array von einem Wert auf genau diesen Wert vereinfachen zu k√∂nnen. <br><br>  Ich zeige Ihnen ein Beispiel aus der Dokumentation: <br><br><pre> <code class="php hljs">$connection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDO ($dsn,$login,$password); $command = $connection-&gt;prepare(<span class="hljs-string"><span class="hljs-string">'select name from employee where salary &gt; 10000'</span></span>); $command-&gt;execute(); $data = $command-&gt;fetchAll(PDO::FETCH_ASSOC); <span class="hljs-comment"><span class="hljs-comment">/* $data = array ( 0 =&gt; array ( 'name' =&gt; 'Mike', ), 1 =&gt; array ( 'name' =&gt; 'Tom', ), 2 =&gt; array ( 'name' =&gt; 'Jerry', ), 3 =&gt; array ( 'name' =&gt; 'Mary', ) ); */</span></span> $names = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayHandler($data); $result = $names-&gt;simplify(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> var_export($result,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* LanguageSpecific\ArrayHandler::__set_state(array( '_data' =&gt; array ( 0 =&gt; 'Mike', 1 =&gt; 'Tom', 2 =&gt; 'Jerry', 3 =&gt; 'Mary', ), )) */</span></span></code> </pre><br>  Sie k√∂nnen nat√ºrlich das Array durchlaufen, das von der Anforderung zur√ºckgegeben wird, und diese Zuordnung vornehmen: <br><br><pre> <code class="php hljs">$response[] = $element[<span class="hljs-number"><span class="hljs-number">0</span></span>];</code> </pre><br>  , aber ich mag es nicht so sehr, lass es automatisch geschehen, also erschien die <b>simplify</b> () -Methode. <br><br>  Nun, da wir einen Wrapper √ºber dem Array haben, werden wir eine Methode hinzuf√ºgen, um das Vorhandensein von index - <b>has</b> () zu √ºberpr√ºfen. Wenn Sie die Elemente des Arrays durchgehen m√∂chten, hilft die <b>next</b> () -Methode. <br><br>  Dies h√§tte gestoppt werden k√∂nnen, weil die Automatisierungsebene eine angenehme Ebene erreicht hat, aber manchmal muss ich mit einem verschachtelten Array eines verschachtelten Arrays arbeiten, und es ist f√ºr mich bequemer, sofort einen <b>ArrayHandler</b> f√ºr das <b>Zielarray abzurufen. Deshalb</b> habe ich die <b>pull</b> () -Methode hinzugef√ºgt, die einen <b>ArrayHandler</b> f√ºr das verschachtelte Array zur√ºckgibt . <br><br>  Es sieht so aus: <br><br><pre> <code class="php hljs">$address = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayHandler($item)-&gt;pull(<span class="hljs-string"><span class="hljs-string">'metaDataProperty'</span></span>)-&gt;pull(<span class="hljs-string"><span class="hljs-string">'GeocoderMetaData'</span></span>)-&gt;pull(<span class="hljs-string"><span class="hljs-string">'Address'</span></span>)-&gt;asIs();</code> </pre><br>  Du kannst nat√ºrlich so schreiben: <br><br><pre> <code class="php hljs">$address = $item[<span class="hljs-string"><span class="hljs-string">'GeoObject'</span></span>][<span class="hljs-string"><span class="hljs-string">'metaDataProperty'</span></span>][<span class="hljs-string"><span class="hljs-string">'GeocoderMetaData'</span></span>][<span class="hljs-string"><span class="hljs-string">'Address'</span></span>];</code> </pre><br>  , aber in meinen Augen kr√§uselt sich die Anzahl der eckigen Klammern, es ist bequemer f√ºr mich durch <b>pull</b> (). <br><br><h2>  Allgemeine Begr√ºndung </h2><br>  Wenn der Code √ºber Composer verbunden ist, ist dies sehr praktisch, mit der Ausnahme, dass Sie das Kopieren und Einf√ºgen √ºberfl√ºssig machen. Sie erhalten Ihre Bibliothek mit einem Befehl und sie ist immer zur Hand. <br><br>  Bevor ich mein Paket zusammenstellte, habe ich mir Analoga angesehen und nichts Vergleichbares gefunden. Es gibt mehrere Projekte, die einfach in ein Array eingebunden werden. In diesen Projekten werden einfach viele Methoden f√ºr die Arbeit mit Arrays eingebunden, und es gibt nirgendwo eine Typensicherheit. <br><br>  Anscheinend ist das Schreiben von (int) oder (bool) vor dem Variablennamen f√ºr alle einfach und bequem, und niemand sieht einen Grund, sich mit einem separaten Repository f√ºr diese Sache zu befassen. <br><br>  Die Bibliotheksfunktionen sind geringf√ºgig breiter als die im Artikel beschriebenen. Weitere Informationen finden Sie <a href="">in der Dokumentation (README.md)</a> . <br><br>  PHP5 ist keine Seltenheit, daher hat die Bibliothek eine separate Version f√ºr PHP5, unterscheidet sich von der Version f√ºr PHP7 durch den Namen mehrerer Methoden und nat√ºrlich sind alle Typhinweise nur in Kommentaren enthalten. <br>  Es gibt eine Version der Bibliothek f√ºr PHP7.2, die sich nur dadurch unterscheidet, dass der Typ des R√ºckgabewerts in der Signatur der Methode <b>object</b> () - object enthalten ist. <br><br>  Der Code wird vollst√§ndig von Tests abgedeckt, aber im Prinzip gibt es nichts zu brechen :) <br><br>  Gebrauch f√ºr Gesundheit! <br><br><h2>  Ein weiterer Anwendungsfall </h2><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($featureMember <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $item) { $pointInfo = extract($item); $info = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayHandler($pointInfo); $address = $info-&gt;get(<span class="hljs-string"><span class="hljs-string">'formatted'</span></span>)-&gt;default(<span class="hljs-string"><span class="hljs-string">''</span></span>)-&gt;str(); $longitude = $info-&gt;get(<span class="hljs-string"><span class="hljs-string">'longitude'</span></span>)-&gt;default(<span class="hljs-number"><span class="hljs-number">61.402554</span></span>)-&gt;double(); $latitude = $info-&gt;get(<span class="hljs-string"><span class="hljs-string">'latitude'</span></span>)-&gt;default(<span class="hljs-number"><span class="hljs-number">55.159897</span></span>)-&gt;double(); $undefined = !$info-&gt;get(<span class="hljs-string"><span class="hljs-string">'formatted'</span></span>)-&gt;has(); $properties = [<span class="hljs-string"><span class="hljs-string">'longitude'</span></span> =&gt; $longitude, <span class="hljs-string"><span class="hljs-string">'latitude'</span></span> =&gt; $latitude, <span class="hljs-string"><span class="hljs-string">'address '</span></span> =&gt; $address ,<span class="hljs-string"><span class="hljs-string">'undefined'</span></span>=&gt;$undefined,]; $result = json_encode($properties); output($result); }</code> </pre><br>  Wenn ich beim Debuggen in JSON sehe, dass Zahlen Zahlen sind, logische Werte logisch sind, bin ich viel angenehmer als nur Zeichenfolgen. <br><br><img src="https://habrastorage.org/webt/z7/rb/j4/z7rbj4bimu2rinuh2xinotto5co.png" alt="Bild"><br><br>  Wie w√§re es mit dir? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de476102/">https://habr.com/ru/post/de476102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de476092/index.html">√úber die Richtungen "Photonics", "Programming and IT" und "Information and Cybersecurity" der Olympiade "I am a Professional"</a></li>
<li><a href="../de476094/index.html">Die R√ºckkehr des Zeitalters der Imperien: Alles √ºber das Zeitalter der Imperien IV</a></li>
<li><a href="../de476096/index.html">Inventar von I bis Z. Wir betrachten IT-Assets</a></li>
<li><a href="../de476098/index.html">Datenstrukturen in Java. N√ºtzliche Hilfsklassenmethoden</a></li>
<li><a href="../de476100/index.html">Architektur von Computersystemen 1 Teil. Logikgatter</a></li>
<li><a href="../de476104/index.html">Verwenden Sie kein freies MTProxy und keine anderen Arten von freien Proxys ...</a></li>
<li><a href="../de476106/index.html">"Cryptosystems Protocols": Diffie - Hellman, El-Gamal, MTI / A (0), STS</a></li>
<li><a href="../de476108/index.html">Ver√§nderliches Gehirn</a></li>
<li><a href="../de476110/index.html">Warum braucht die IT eine pers√∂nliche Marke?</a></li>
<li><a href="../de476112/index.html">Elixier als Entwicklungsziel f√ºr Python Async</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>