<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💅🏿 👨🏼‍🔬 👨🏼‍🚀 Einheit: Skriptfähige Objekte kennenlernen ✋🏾 📋 🏮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Tutorial erfahren Sie, wie Sie skriptfähige Objekte in Unity erstellen und verwenden. Mit skriptfähigen Objekten können Sie Ihren Workflow v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einheit: Skriptfähige Objekte kennenlernen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421523/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif" alt="Bild"></div><br>  In diesem Tutorial erfahren Sie, wie Sie skriptfähige Objekte in Unity erstellen und verwenden.  Mit skriptfähigen Objekten können Sie Ihren Workflow verbessern, den Speicherbedarf verringern und sogar die Codearchitektur aufteilen. <br><br>  Gemäß der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unity-</a> Dokumentation ist ScriptableObject ein Klassencode, mit dem Sie skriptfähige Objekte im Spiel erstellen können, um große Mengen gemeinsam genutzter Daten zu speichern, die unabhängig von Skriptinstanzen sind. <br><br>  Es gibt viele Gründe für die Verwendung von skriptfähigen Objekten in Unity.  Sie können den Speicherbedarf für jedes weitere Fertighaus reduzieren, da das skriptfähige Objekt im Wesentlichen dem Entwurfsmuster <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flyweight</a> folgt. <br><br>  Ein weiterer Vorteil von Scriptable Objects, der das Hauptthema dieses Tutorials sein wird, ist ihre Verwendung für die bequeme Datenübertragung.  Wir betrachten diese Eigenschaft als Beispiel für die Einrichtung eines Schwerthandelsgeschäfts, in dem die Parameter, Preise und Beschreibungen verschiedener Schwerter angezeigt werden. <br><a name="habracut"></a><br><blockquote>  <em>Hinweis: In</em> diesem Lernprogramm wird davon ausgegangen, dass Sie mit dem Unity-Editor vertraut sind.  Sie müssen verstehen, wie Code in einem Code-Editor bearbeitet wird, und über grundlegende C # -Kenntnisse verfügen.  Wenn Sie Ihre Unity-Fähigkeiten verbessern müssen, lesen Sie andere <a title="Unity-Tutorials" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unity-Tutorials</a> . </blockquote><br><h2>  An die Arbeit gehen </h2><br>  Beginnen wir mit dem <a href="">Herunterladen der benötigten Materialien</a> . <br><br>  Entpacken Sie die heruntergeladene Datei an einen für Sie geeigneten Ort und öffnen Sie das <em>Scriptable Object Tutorial-Starter-</em> Projekt in Unity. <br><br>  Der folgende Ordner sollte im Rahmen der Projektbeschaffung erstellt werden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/046/8c3/b63/0468c3b63c16cb562f7d826a51ff8597.png"></div><br><ul><li>  <em>_Setup</em> : Für das Tutorial wird dieser Ordner nicht benötigt. </li><li>  <em>Szenen</em> : Enthält eine <em>Sword Merchant-</em> Szene, die wir im gesamten Tutorial behandeln werden.  Öffne diese Szene. </li><li>  <em>Skripte</em> : Bisher gibt es nur ein Skript, aber während des Tutorials werden wir neue erstellen. </li><li>  <em>Schwertsymbole</em> : Enthält Standbilder einzelner Schwerter. </li><li>  <em>Sword Prefabs</em> : Enthält die Prefabs aller Schwerter in der Sword Merchant-Szene. </li></ul><br><h2>  Erstellen eines skriptfähigen Objekts </h2><br>  Um loszulegen, gehen Sie zur <em>Sword Merchant-</em> Szene.  Es sollte so aussehen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/372/6ea/e89/3726eae89b9ddb9f57a698ed5cd7626d.png"></div><br><h3>  Skriptfähiges Objekt vorbereiten </h3><br>  Es ist Zeit, das erste skriptfähige Objekt zu erstellen! <br><br>  Erstellen Sie im Ordner " <em>Skripte</em> " ein neues Skript mit dem Namen " <em>SwordData"</em> .  Diese Klasse wird als Container für alle Schwertdaten verwendet, die im Geschäft des Schwerthändlers angezeigt werden. <br><br>  Beginnen Sie in dieser Klasse damit, von <code>ScriptableObject</code> anstelle von <code>MonoBehaviour</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { }</code> </pre> <br>  Diese Aktion teilt Unity mit, dass wir die Unity-Funktionen und -Methoden wie bei normalem MonoBehaviour weiterhin verwenden möchten, dieses Skript jedoch nicht mehr an GameObject anhängen müssen.  Stattdessen wird es wie jedes normale Asset verarbeitet, das auf die gleiche Weise wie ein Fertighaus, eine Szene oder ein Material erstellt werden kann. <br><br>  Füllen Sie das Skript mit serialisierten Feldern, die alle Daten enthalten, die den in der Benutzeroberfläche von Sword Merchant angezeigten Informationen entsprechen. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> swordName; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sprite icon; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goldCost; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> attackDamage; }</code> </pre> <br><ul><li>  <em>Schwertname</em> : <code>string</code> , in der der Name des Schwertes gespeichert wird. </li><li>  <em>description</em> : <code>string</code> , in der die Beschreibung des Schwertes gespeichert wird. </li><li>  <em>Symbol</em> : Das Sprite, das das Schwertsymbol enthält. </li><li>  <em>goldCost</em> : <code>int</code> , um den Wert des Schwertes in Gold zu speichern. </li><li>  <em>attackDamage</em> : <code>int</code> , um Schaden zu speichern, wenn mit einem Schwert angegriffen wird. </li></ul><br><blockquote>  <em>Hinweis: SerializeField</em> <br><br>  In Unity können Sie mit dem SerializeField-Attribut private Skriptvariablen im Inspector verfügbar machen.  Damit können Sie Werte im Editor festlegen, ohne von anderen Skripten aus auf die Variable zugreifen zu können. </blockquote><br>  Jedes Schwert erfordert eine eigene Implementierung der Scriptable Object <em>SwordData</em> .  Bevor wir diese Implementierungen erstellen können, müssen wir dem Asset-Menü ein skriptfähiges Objekt hinzufügen. <br><br>  Fügen Sie unser skriptfähiges Objekt zum Asset-Menü hinzu, indem Sie der <em>SwordData-</em> Klasse das folgende Attribut <em>hinzufügen</em> : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CreateAssetMenu(fileName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"New SwordData"</span></span></span><span class="hljs-meta">, menuName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Sword Data"</span></span></span><span class="hljs-meta">, order = 51)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span></code> </pre> <br><ul><li>  <em>Dateiname</em> : Standardname beim Erstellen eines Assets. </li><li>  <em>menuName</em> : <em>Asset-</em> Name, der im Asset-Menü angezeigt wird. </li><li>  <em>Reihenfolge</em> : Asset-Platzierung im Asset-Menü.  Unity unterteilt Assets in Untergruppen mit einem Faktor von 50. Das heißt, ein Wert von 51 platziert das neue Asset in der zweiten Gruppe des Asset-Menüs. </li></ul><br>  Wenn alles richtig gemacht wurde, können Sie unter <em>Assets &gt;&gt; Create</em> das neue <em>Sword Data</em> Asset im Menü anzeigen.  Es sollte sich in der zweiten Gruppe unter dem Ordner-Asset befinden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/027/83d/d78/02783dd7809273371aeaf0fde21cbb07.png"></div><br>  Sie können auch mit der rechten Maustaste in das Projektfenster klicken und das neue Schwertdaten-Asset anzeigen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec8/f0c/1cf/ec8f0c1cf7b7b861517c0b6838d9c80c.png"></div><br><h3>  Daten hinzufügen </h3><br>  Wir <em>organisieren das</em> Projekt, indem wir einen Ordner namens <em>Scriptable Objects</em> im Ordner Scripts und in diesem Ordner einen weiteren Ordner namens <em>Sword Data</em> erstellen. <br><br>  Erstellen Sie im neu erstellten Ordner "Schwertdaten" unser erstes Schwertdaten-Asset. <br><br>  Das neue Sword Data-Asset sollte weiterhin den zuvor angegebenen Standardnamen <em>fileName haben</em> .  Wählen Sie ein Asset aus und duplizieren Sie es sechsmal ( <i>Strg / Befehlstaste + D</i> ), um sieben Schwertdaten-Assets zu erstellen, eines für jedes der Schwerter.  Benennen Sie nun jedes Asset gemäß den Fertighäusern um: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/953/191/9e69531917c13064e6af81b31b58fdf7.gif"></div><br>  Klicken Sie im Ordner "Schwertdaten" auf das erste <em>Schwertdaten-</em> Asset und sehen Sie sich das <em>Inspektorfenster an</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af3/380/b20/af3380b20efd5dc0a7485f4f3c7c971a.png"></div><br>  Hier sehen wir einen Vermögenswert, in dem Informationen über ein bestimmtes Schwert gespeichert werden.  Geben Sie die Informationen für jedes Schwert ein.  Versuchen Sie, ihnen während eines Angriffs eine eindeutige Beschreibung, einen Wert in Gold und Schaden zu geben.  Verwenden Sie im Feld Icon Sprite die entsprechenden Sprites im Ordner <em>Sword Icons</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b48/d31/025/b48d3102517ad8e0f0877dd6cc28faff.gif"></div><br>  Glückwunsch!  Sie haben ein Skriptobjekt erstellt und mehrere Assets mit diesem Skriptobjekt konfiguriert. <br><br><h2>  Verwenden eines skriptfähigen Objekts </h2><br>  Jetzt werden wir Daten von diesen skriptfähigen Objekten abrufen. <br><br>  Zuerst müssen wir einige öffentliche Getter-Methoden hinzufügen, damit andere Skripte auf private Felder innerhalb des Skriptobjekts zugreifen können.  Öffnen Sie <em>SwordData.cs</em> und fügen Sie unter den zuvor hinzugefügten Feldern Folgendes hinzu: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SwordName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> swordName; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Sprite Icon { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> icon; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GoldCost { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> goldCost; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> AttackDamage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> attackDamage; } }</code> </pre> <br>  Öffnen Sie <em>Sword.cs</em> und fügen Sie den folgenden Code hinzu: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SwordData swordData; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() // 2 { Debug.Log(swordData.name); // 3 Debug.Log(swordData.Description); // 3 Debug.Log(swordData.Icon.name); // 3 Debug.Log(swordData.GoldCost); // 3 Debug.Log(swordData.AttackDamage); // 3 }</span></span></code> </pre> <br>  Folgendes haben wir mit diesem Code hinzugefügt: <br><br><ol><li>  Der Datencontainer für die Daten für dieses Schwert. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OnMouseDown</a> ist eine integrierte MonoBehaviour-Funktion, die aufgerufen wird, wenn der Benutzer die linke Maustaste drückt. </li><li>  Beispiele zum Abrufen von Daten aus unserem Skriptobjekt-Asset </li></ol><br>  Gehen Sie zurück zu Unity und gehen Sie zum <em>Hierarchiefenster</em> .  Wählen Sie das 1_Longsword-Spielobjekt im Schwert-Fertighaus aus.  Fügen Sie der Sword Data-Variablen des Sword.cs-Skripts im Inspector-Fenster das entsprechende 1_Longsword Data-Asset hinzu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89d/dca/502/89ddca5023e919e838d92da776ca4e20.png"></div><br>  Klicken Sie im Unity-Editor auf Wiedergabe ( <i>Strg / Befehlstaste + P</i> ) und dann auf das Schwert ganz links: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/2e0/336/c8f2e0336b61da17786068f13a5e787b.png"></div><br>  Die Konsole sollte Informationen anzeigen, die Daten ähneln, die vom Schwertdaten-Asset übertragen wurden. <br><br>  Skriptfähige Objekte erleichtern das Ersetzen dieser Daten.  Versuchen Sie, verschiedene skriptfähige Objekte mit Schwertdaten in das Feld Schwertdaten des Schwertes einzufügen. <br><br><h2>  Eventable Scriptable Objects </h2><br>  Also haben wir ein skriptfähiges Objekt erstellt und Sie haben gesehen, wie Sie im Spiel auf seine Daten zugreifen können.  Wir müssen jedoch noch Schwertdaten in die Benutzeroberfläche integrieren! <br><br>  Sie können hierfür das schnelle und schmutzige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Singleton-</a> Muster verwenden.  Jetzt haben wir jedoch andere Möglichkeiten ... <br><br>  ... nämlich skriptfähige Objekte!  Wir werden sie verwenden, um sauberen und sauber unterteilten Code zu erstellen. <br><br>  In diesem Abschnitt erfahren Sie, wie Sie mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UnityEvent-</a> Klasse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spielereignisse</a> erstellen. <br><br><h3>  Spielereignisse und Hörer </h3><br>  Erstellen Sie im Ordner "Skripte" zwei Skripte: <em>GameEvent.cs</em> und <em>GameEventListener.cs</em> .  Sie hängen voneinander ab. Um Fehler zu beseitigen, müssen Sie beide erstellen. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"New Game Event"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Game Event"</span></span>, order = <span class="hljs-number"><span class="hljs-number">52</span></span>)] <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEvent : ScriptableObject // 2 { private List&lt;GameEventListener&gt; listeners = new List&lt;GameEventListener&gt;(); // 3 public void Raise() // 4 { for (int i = listeners.Count - 1; i &gt;= 0; i--) // 5 { listeners[i].OnEventRaised(); // 6 } } public void RegisterListener(GameEventListener listener) // 7 { listeners.Add(listener); } public void UnregisterListener(GameEventListener listener) // 8 { listeners.Remove(listener); } }</span></span></code> </pre> <br>  Der obige Code bewirkt Folgendes: <br><br><ol><li>  Fügt dem Asset-Menü ein GameEvent als Asset hinzu. </li><li>  GameEvent ist ein skriptfähiges Objekt, daher sollte es von ScriptableObject erben. </li><li>  Liste der GameEventListener, die GameEvent abonnieren sollen. </li><li>  Methode zum Aufrufen aller GameEvent-Abonnenten. </li><li>  Der zuletzt signierte GameEventListener wird als erster aufgerufen (last come, first come out). </li><li>  Rufen Sie jeden UnityEvent GameEventListener auf. </li><li>  Eine Methode, mit der GameEventListeners dieses GameEvent abonnieren können. </li><li>  Eine Methode, mit der GameEventListener dieses GameEvent abbestellen können. </li></ol><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events; <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEventListener : MonoBehaviour { [SerializeField] private GameEvent gameEvent; // 2 [SerializeField] private UnityEvent response; // 3 private void OnEnable() // 4 { gameEvent.RegisterListener(this); } private void OnDisable() // 5 { gameEvent.UnregisterListener(this); } public void OnEventRaised() // 6 { response.Invoke(); } }</span></span></code> </pre> <br>  In dem oben gezeigten Code wird das Projekt weiterentwickelt: <br><br><ol><li>  Voraussetzung für die Verwendung der UnityEvent-Klasse. </li><li>  Das GameEvent, das dieser GameEventListener abonniert. </li><li>  Die UnityEvent-Antwort, die ausgelöst wird, wenn das GameEvent-Ereignis diesen GameEventListener auslöst. </li><li>  Binden eines GameEvent an einen GameEventListener, wenn dieses GameObject aktiviert ist. </li><li>  Binden eines GameEvent aus einem GameEventListener, wenn dieses GameObject deaktiviert ist. </li><li>  Wird aufgerufen, wenn ein GameEvent generiert wird, das den GameEventListener veranlasst, das UnityEvent-Ereignis aufzurufen. </li></ol><br>  Ist es schwierig  Nichts, du wirst es mit der Zeit herausfinden! <br><br><h3>  Redaktionstraining </h3><br>  Kehren Sie zum Unity-Editor zurück und erstellen Sie einen neuen Ordner für Spielereignisse unter Skripte &gt;&gt; ScriptableObjects.  Erstellen Sie dann sieben Spielereignisse aus dem Asset-Menü, wie wir es für jedes Schwertdaten-Asset getan haben.  Legen Sie sie in den neuen Ordner "Spielereignisse". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/47b/22a/05547b22a285c4be816e03839eeead05.png"></div><br>  Ersetzen Sie den Code im Skript <em>Sword.cs durch die</em> folgenden Zeilen: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameEvent OnSwordSelected; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() { OnSwordSelected.Raise(); // 2 }</span></span></code> </pre> <br>  Dieser Code fügt dem Geschäft des Schwerthändlers zwei Möglichkeiten hinzu: <br><br><ol><li>  Generierung eines Spielereignisses bei der Auswahl eines Schwertes. </li><li>  Ereignisgenerierung, wenn Sie auf das Schwert klicken. </li></ol><br>  Speichern Sie das Skript.  Verbinden Sie nun in jedem Hierarchie-GameObject des Schwertes das entsprechende OnSwordSelected-Ereignis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ac/f02/acd/9acf02acd43968a370dd2208793919fe.gif"></div><br>  Jedes Schwert hat jetzt einen Link zu dem Ereignis, das ausgelöst wird, wenn auf das Schwert geklickt wird. <br><br><h2>  UI-Integration </h2><br>  Jetzt müssen Sie die Benutzeroberfläche zum Laufen bringen.  Unser Ziel ist es, die entsprechenden Schwertdaten anzuzeigen, wenn Sie auf jedes Schwert klicken. <br><br><h3>  UI-Links </h3><br>  Vor dem Aktualisieren der Benutzeroberfläche müssen Sie einen Link zu jedem Element der Benutzeroberfläche erhalten.  Beginnen wir mit der Erstellung eines neuen Skripts mit dem Namen <em>SwordMerchant.cs</em> und dem Hinzufügen des folgenden Codes zu diesem neuen Skript: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordMerchant</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Text swordName; <span class="hljs-comment"><span class="hljs-comment">// 1 [SerializeField] private Text description; // 2 [SerializeField] private Image icon; // 3 [SerializeField] private Text goldCost; // 4 [SerializeField] private Text attackDamage; // 5 }</span></span></code> </pre> <br>  Mit diesem Code haben wir Folgendes hinzugefügt: <br><br><ol><li>  Ein Verweis auf die Textkomponente des <em>NameText</em> -Spielobjekts. </li><li>  Link zur Textkomponente des <em>DescriptionText</em> -Spielobjekts. </li><li>  Link zur Image-Komponente des <em>Sword_Icon</em> -Spielobjekts. </li><li>  Link zur Textkomponente des <em>GoldText</em> -Spielobjekts. </li><li>  Ein Link zur Textkomponente des <em>AttackText</em> -Spielobjekts. </li></ol><br>  Die oben genannten Spielobjekte befinden sich im <em>SwordMerchantCanvas &gt;&gt; SwordMerchantPanel des</em> Hierarchiefensters.  Fügen Sie das Skript zu GameObject <em>SwordMerchantCanvas hinzu</em> und konfigurieren Sie dann alle Links: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2b/a6f/294/f2ba6f2948bc57b02efa9a1a925453e8.png"></div><br><h3>  Listener und UI-Antworten </h3><br>  Alle Schwerter haben ein Ereignis, das die Benutzeroberfläche mithilfe des <em>GameEventListener-</em> Skripts abonnieren kann.  Fügen Sie <em>GameObject</em> SwordMerchantCanvas einen <em>GameEventListener</em> für jedes OnSwordSelected-Ereignis <em>hinzu</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/51c/3ea/618/51c3ea618cb29226356febe1ff1aa8c1.gif"></div><br>  Wie Sie sehen können, verfügt unser Game Event Listener über zwei Felder: das Game Event-Ereignis, das er abhört, und die Antwort, die beim Generieren des Game Event ausgelöst wird. <br><br>  In unserem Fall wird die Antwort von der Benutzeroberfläche aktualisiert.  Fügen Sie dem Skript <em>SwordMerchant.cs</em> die folgende Methode <em>hinzu</em> : <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateDisplayUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SwordData swordData</span></span></span><span class="hljs-function">)</span></span> { swordName.text = swordData.SwordName; description.text = swordData.Description; icon.sprite = swordData.Icon; goldCost.text = swordData.GoldCost.ToString(); attackDamage.text = swordData.AttackDamage.ToString(); }</code> </pre> <br>  Diese Methode empfängt ein Schwertdaten-Asset und aktualisiert dann jedes UI-Feld mit dem Wert des entsprechenden Schwertdatenfelds.  Beachten Sie, dass <em>GoldCost</em> und <em>AttackDamage</em> ein <code>int</code> , sodass Sie es in eine Zeichenfolge für Text konvertieren müssen. <br><br>  Mit unserer neuen Methode können wir jedem <em>GameEventListener</em> eine Antwort <em>hinzufügen</em> . <br><br>  Für jede Antwort, die Sie hinzufügen, benötigen Sie einen Link zu unserem <em>SwordMerchantCanvas</em> -Spielobjekt als Wert des <em>Felds</em> <em>Keine (Objekt)</em> .  <em>Wählen</em> Sie danach <em>SwordMerchant.UpdateDisplayUI</em> aus dem Dropdown-Menü rechts neben der Dropdown-Liste <em>Nur Laufzeit</em> . <br><br>  Seien Sie vorsichtig und verwenden Sie für jedes <em>OnSwordSelected-</em> Ereignis das richtige <em>Schwertdaten-</em> Asset. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4d/ce8/e05/d4dce8e052a2440f4495a94dec1fc47d.png"></div><br>  Jetzt können wir das Spiel starten, auf das Schwert klicken und sehen, dass die Benutzeroberfläche entsprechend aktualisiert wird! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif"></div><br>  Da wir Game Events verwenden, können Sie einfach <em>SwordMerchantCanvas verwenden</em> , und alles funktioniert weiterhin, nur ohne Benutzeroberfläche.  Dies bedeutet, dass die Schwert- <em>Fertighäuser</em> von den <em>SwordMerchantCanvas getrennt sind</em> . <br><br><h2>  Wohin als nächstes? </h2><br>  Wenn Sie während der Geschichte etwas verpasst haben, können Sie <a href="">das fertige Projekt herunterladen</a> , das sich in den Materialien des Tutorials befindet. <br><br>  Wenn Sie weitermachen möchten, versuchen Sie, jedes Schwert seinen eigenen Klang wiedergeben zu lassen.  Versuchen Sie, Scriptable Object Sword Data zu erweitern und auf <code>OnSwordSelected</code> Ereignisse zu <code>OnSwordSelected</code> . <br><br>  Möchten Sie mehr über Unity erfahren?  Schauen Sie sich unsere Unity- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videoserien an</a> oder lesen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unity-Tutorials</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421523/">https://habr.com/ru/post/de421523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421505/index.html">Mini Life Hacks für die Arbeit mit Yandex.Direct</a></li>
<li><a href="../de421507/index.html">Was waren die Schweißer für Optik</a></li>
<li><a href="../de421513/index.html">Reibungslose Scrum-Einführung durch die Entwickler selbst (wir lösen die Widersprüche, stellen das Team zusammen, vermeiden Konflikte)</a></li>
<li><a href="../de421519/index.html">Das Buch "Apache Kafka. Stream-Verarbeitung und Datenanalyse “</a></li>
<li><a href="../de421521/index.html">Monster nach den Ferien: AMD Threadripper 2990WX 32-Core und 2950X 16-Core (Teil 3 - Tests)</a></li>
<li><a href="../de421525/index.html">Ein wenig über die Unterschiede zwischen russischen und ausländischen Gastgebern</a></li>
<li><a href="../de421527/index.html">Broadcast-Start des Projekts "Server in the Clouds"</a></li>
<li><a href="../de421529/index.html">Netflix, Uber, Google und Sie bei MBLT DEV 2018</a></li>
<li><a href="../de421531/index.html">So integrieren Sie ReactJS in 1C-Bitrix mit der automatischen Generierung von Vorlagen im Back-End am Beispiel des Globus-Netzwerks</a></li>
<li><a href="../de421533/index.html">Auswahl einer Programmiersprache: 3 Tipps von einem Programmierer von Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>