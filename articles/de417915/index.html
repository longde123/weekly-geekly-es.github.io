<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏽 🐤 ♠️ Wie man einen Mitbewohner spielt 🐴 👨‍🔬 🕵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vom Übersetzer 
 Der Student der Tufts University erzählt, wie man seinen Mitbewohner neckt. Er hat mich sogar gepinnt, als er seine Geschichte mit de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man einen Mitbewohner spielt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417915/"><h4>  Vom Übersetzer </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der</a> Student der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tufts University</a> erzählt, wie man seinen Mitbewohner neckt.  Er hat mich sogar gepinnt, als er seine Geschichte mit der Tatsache begann, dass sie einen 4K-Fernseher im Hostel haben. <br><a name="habracut"></a><br><h2>  Einführung </h2><br>  Bevor ich darüber spreche, wie ich den unglücklichen Logan gebracht habe, muss ich das Mediensystem in unserem Zimmer erklären.  Bald wirst du verstehen warum. <br><br>  Logan, wenn du das liest, hoffe ich, dass du mehr Spaß hattest als nicht. <br><br><h2>  Disposition </h2><br>  Wir haben einen Computer mit einem Desktop-Ubunt, der an ein Fernsehgerät angeschlossen ist.  Er fungiert als Medienserver.  Da er immer noch eine permanente Internetverbindung benötigt, drehen sich dort immer noch ein Webserver mit einigen Seiten, ein SSH-Server und eine Reihe anderer Dienste. <br><br>  Aufgrund der Tatsache, dass der Fernseher 4K ist und der Computer aus dem, was zur Hand war, zusammengebaut ist, zieht seine Grafikkarte nicht.  Logan entschied sich für den Kauf des alten NVIDIA-Vidyuha, der vor einigen Generationen veröffentlicht wurde (was immer noch viel besser ist als das, was er war), um 4K-Videos normal abzuspielen. <br><br><h2>  Die Geburt einer Idee </h2><br>  Kurz nach der Installation haben wir ein paar Probleme mit den Treibern.  In diesem Moment dachte ich, es würde Spaß machen, Fehlermeldungen manuell anzeigen zu können. <br><br>  Nach einigen Recherchen im Internet wurde klar, dass das Remote-Aufrufen einer Nachricht auf einem Fernseher so einfach ist wie: <br><br><ol><li>  Melden Sie sich über SSH beim Computer als Benutzer an, der die Übertragung ausführt </li><li><code>DISPLAY=:0 zenity --info --text '!'</code> </li> </ol><br>  <code>DISPLAY=:0</code> erforderlich, da in meiner Sitzung keine Anzeige erfolgt, ich die Meldung jedoch auf dem Hauptbildschirm anzeigen möchte. <br><br>  Da wir Probleme mit NVIDIA vidyuha hatten, beschloss ich, über Folgendes nachzudenken: <br><br><pre> <code class="bash hljs">DISPLAY=:0 zenity --warning --text <span class="hljs-string"><span class="hljs-string">'     .'</span></span></code> </pre> <br>  Es hat funktioniert, aber jedes Mal, wenn Sie sich mit dem SSH-Client beim Server anmelden, um Logan herunterzufahren, ist dies ein Vergnügen.  Also habe ich beschlossen zu betrügen.  Ich dachte über die Aufgabe in der Krone nach, ihn nach einem Zeitplan zu verärgern, aber es gab ein paar Probleme: <br><br><ol><li>  Eigentlich Regelmäßigkeit </li><li>  Wir hatten andere Aufgaben in der Krone, was das Risiko erhöhte, meine heimtückische Aufgabe preiszugeben </li></ol><br>  Andere Optionen wie das SysVInit-Skript wurden aus den gleichen Gründen gelöscht.  Aus diesem Grund habe ich beschlossen, eine öffentliche Webseite mit der Schaltfläche „Haben Sie einen Logan“ zu erstellen. <br><br><h2>  Vorbereitung zeichnen </h2><br>  Ich dachte mir, dass ich zunächst ein paar Dinge brauchen würde: <br><br><ol><li>  Etwas, das Benutzereingaben verarbeitet </li><li>  Etwas, das als Webbenutzer beliebige Befehle ausführt </li></ol><br>  Also kam ich zu: <br><br><ol><li>  Nginx </li><li>  FPM-Erweiterung für NGINX </li><li>  Php </li><li>  FPM-Paket für PHP </li></ol><br>  Als Ergebnis habe ich eine Site mit der Zielseite logan.html und der Aktionsseite <code>zenity.php</code> : <br><br><div class="spoiler">  <b class="spoiler_title">logan.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- logan.html --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">form</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">button</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">div</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.explanation</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">400px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IE=edge,chrome=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HandheldFriendly"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/zenity.php"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br>  <code>meta</code> Tags enthalten einen kleinen Unsinn, um die Seite für Mobiltelefone anzupassen (denken Sie daran, dass ich die Verwendung unterwegs einfach mache?). Für diejenigen, die nicht wissen, wie man HTML in meinem Kopf rendert, zeige ich Ihnen, wie es aussieht: <br><br><img src="https://habrastorage.org/webt/by/zg/er/byzgerhzhkqsvgweyxlu6-qyjig.png"><br><br>  Wenn die Taste gedrückt wird, wechselt die POST-Anforderung zu einer anderen Seite, die die gesamte Drecksarbeit erledigt: <br><br><div class="spoiler">  <b class="spoiler_title">zenity.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* zenity.php */</span></span> $messages = <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>( <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">"       ."</span></span>, <span class="hljs-string"><span class="hljs-string">"   ."</span></span>, <span class="hljs-string"><span class="hljs-string">"   ."</span></span>, <span class="hljs-string"><span class="hljs-string">"   ."</span></span>, <span class="hljs-string"><span class="hljs-string">"    and has recovered."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">"     ."</span></span>, <span class="hljs-string"><span class="hljs-string">" NVIDIA  ."</span></span>, <span class="hljs-string"><span class="hljs-string">"NVIDIA    - . ( 43)"</span></span>, <span class="hljs-string"><span class="hljs-string">"    wlx10bef54d395c."</span></span> ); $statuses = <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>(<span class="hljs-string"><span class="hljs-string">"error"</span></span>, <span class="hljs-string"><span class="hljs-string">"warning"</span></span>); $msg = $messages[array_rand($messages)]; $status = $statuses[array_rand($statuses)]; $timeout = <span class="hljs-string"><span class="hljs-string">"--timeout 10"</span></span>; exec(<span class="hljs-string"><span class="hljs-string">"sudo -u thedisplayuser /usr/sbin/zenity --$status --display=:0 --text ': $msg' $timeout &gt; /dev/null &amp;"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'logan.html'</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">explanation</span></span></span><span class="hljs-class">"&gt;                ,       .   ,        // .. &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">br</span></span></span><span class="hljs-class"> /&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">='/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">logan</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jpg</span></span></span><span class="hljs-class">' /&gt;</span></span></code> </pre> </div></div><br>  Diese Seite macht eine Reihe von Dingen: <br><br><ol><li>  Wählt eine zufällige Fehlermeldung aus </li><li>  Wählt den Typ des Dialogfelds aus. </li><li>  Demonstriert eine Nachricht für einen bestimmten Zeitraum (10 Sekunden) </li><li>  Er zieht einen Knopf und erklärt, was passiert - alles begleitet von Logans lustigem Bild persönlich </li></ol><br>  Für diejenigen, die HTML immer noch nicht in ihren Köpfen rendern können (hoffentlich wieder die meisten Leute), sieht die Seite folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/9d/5o/nd/9d5onds7a2wambsvfplh_fsah20.jpeg"><br><br>  Wenn Sie sich fragen, warum die Webseite Code auf diese Weise ausführen darf und warum der Eigentümer der Webserversitzung ( <code>www-data</code> ) Befehle als Anzeigebenutzer (der <code>thedisplayuser</code> ) ausführen kann, sind Sie möglicherweise froh zu wissen, dass ich dies stark eingeschränkt habe <code>sudoers</code> Datei: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /etc/sudoers www-data ALL=(thedisplayuser) NOPASSWD: /usr/bin/zenity</span></span></code> </pre> <br>  Dieser spezielle Teil der Konfiguration ermöglicht es www-data, nur / usr / bin / zenity als Displaybenutzer ohne Passwort auszuführen.  Ich habe dies getan, nachdem ich dumme Fehler in den PHP- und NGINX-Einstellungen durcheinander gebracht hatte.  Dann habe ich die URL an ein paar Freunde auf dem Campus gesendet, die Logan kennen. <br><br><h2>  Ergebnis zeichnen </h2><br>  Lob den Himmel, Logan reagierte so heftig wie er konnte.  Wenn er leicht genervt gewesen wäre, hätte mich der Gedanke, dass meine Bemühungen verschwendet worden wären, geärgert.  Aber nein!  Er verlor die Beherrschung.  Ich kann nicht zählen, wie viele Neustarts, Neuinstallationen von Treibern und Kernel-Änderungen es gab.  Ich bedauere nur, dass ich kein Video darüber gedreht habe, wie er nach dem Start von VLC wütend wurde, als jemand ein paar Fenster mit Nachrichten über Grafikkartenfehler herausgeschmissen hat. <br><br>  Aber ich wurde zu mitgerissen und Chris, unser anderer Mitbewohner, beschloss einzugreifen ... <br><br><h2>  Jägerjagd </h2><br><h3>  Erste Stufe </h3><br>  Eines schönen Tages, als Logan schlief, bemerkte ich eine Fehlermeldung: "Max steckt dahinter."  Choooo?  Ich habe eine Streichbox!  Also begann ich zu verstehen und fand heraus, dass jemand (Chris) diesen Satz in eine Reihe von zufälligen Nachrichten in <code>zenity.php</code> .  Ich löschte es schnell (bis Logan hörte, dass sie es spielten) und entschied, dass der Spaß vorbei war.  Da war es. <br><br><h3>  Zweite Stufe </h3><br>  Nach ungefähr einer Woche tauchte die Nachricht wieder auf.  Ich dachte, Chris hätte mich verbrannt und wieder in die Liste aufgenommen.  Keine verdammte Sache.  Er war nicht da.  Nach einer sorgfältigen Untersuchung der Datei stellte ich fest, dass sie jetzt <code>/usr/sbin/zenity</code> anstelle von <code>/usr/bin/zenity</code> (die Systemvorgabe) heißt und <code>sudoers</code> einen entsprechenden zulässigen Eintrag hatte.  Was ist <code>/usr/sbin/zenity</code> ?  Shell-Skript: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash echo '.' &gt;&gt; /tmp/log.txt if [ 0 -eq $((RANDOM % 100)) ]; then /usr/bin/zenity --error --display=:0 --text "   ." --timeout 10 &gt; /dev/null &amp; else /usr/bin/zenity "$@" fi</span></span></code> </pre> <br>  Nun, das war die nächste Stufe des Mistes, wenn ich jemals so etwas getroffen habe.  In 99% der Fälle funktionierte alles so, wie es sollte, und in den restlichen ein Prozent tauchte die Meldung „Max steht hinter“ auf.  Ich habe die Datei gelöscht (ich weiß, es hat sich nicht gelohnt) und durch das Schreiben an <code>sudoers</code> <code>zenity.php</code> in die ursprüngliche Form gebracht.  Nachrichten werden nicht mehr angezeigt.  Aber dann kamen sie zurück. <br><br><h3>  Dritte Stufe </h3><br>  Ich habe <code>zenity.php</code> überprüft.  Nichts Neues.  <code>/usr/sbin/zenity</code> ?  Verschwunden.  Ich bin entmutigt.  Dann habe ich beschlossen, in <code>/usr/bin/zenity</code> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # ---    --- # ---    --- # ---    --- # ---    --- # ---    --- if [ 0 -eq $((RANDOM % 70)) ]; then /usr/bin/rpmdb-client --error --display=:0 --text """"" """""" """""""""""" """"""""." --timeout 10 &gt; /dev/null &amp; else /usr/bin/rpmdb-client "$@" fi</span></span></code> </pre> <br>  Kleiner schlauer Bastard.  Er hat die Zenity-Binärdatei repariert und daraus ein Bash-Skript gemacht, das einmal und 70 funktioniert. Was zur Hölle?  Und es ist alles für <code>rpmdb-client</code> ?  Also habe ich mich gewehrt, indem ich es geändert habe: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># &lt;&gt; if [ 0 -eq $((RANDOM % 70)) ]; then /usr/sbin/rpmdb-client --error --display=:0 --text """"" """""" """""""""""" """"""""." --timeout 10 &gt; /dev/null &amp; else /usr/bin/rpmdb-client "$@" fi</span></span></code> </pre> <br>  Hast du den Unterschied bemerkt?  Andernfalls wird <code>/usr/sbin/rpmdb-client</code> anstelle von <code>/usr/bin/rpmdb-client</code> , wodurch ein Bash-Skript <code>/usr/bin/rpmdb-client</code> , das nichts tut.  Mit genügend Glück wird er keinen zusätzlichen Charakter bemerken und seine Nachricht wird niemals erscheinen. <br><br>  TODO: Verstehe den Unterschied zwischen den ausführbaren ELF-Dateien <code>/usr/sbin/zenity</code> und dem von Chris erstellten <code>/usr/bin/rpmdb-client</code> .  Es gibt einen merkwürdigen Unterschied in den Binärdateien, den ich noch nicht verstanden habe. <br><br><h3>  Vierte Stufe </h3><br>  Ich beschloss, die Verteidigung zu stärken, bis Chris den Unterschied in einem oben beschriebenen Brief bemerkte.  Ich habe alle meine Änderungen abgebrochen und beschlossen, stattdessen <code>zenity</code> zu patchen.  Ein tiefer Dank geht an Tom Hebb (wie in jedem meiner technischen Beiträge), der mir dabei geholfen hat.  Folgendes habe ich getan: <br><br><ol><li>  Konfiguriert <code>apt</code> zum Herunterladen der Quellen (in diesem Fall Hinzufügen von <code>deb-src</code> zu <code>/etc/apt/sources.list</code> ) </li><li> <code>apt-get source zenity</code> </li> <li>  Einen Patch mit <code>quilt</code> : <br><ol><li> <code>quilt new myPatch.diff</code> </li> <li>  Ein Patch für <code>src/msg.c</code> , der das Vorhandensein des Wortes "Max" im Nachrichtentext bestimmt: <br><br><div class="spoiler">  <b class="spoiler_title">msg.c</b> <div class="spoiler_text"><pre> <code class="diff hljs"><span class="hljs-comment"><span class="hljs-comment">Index: zenity-3.18.1.1/src/msg.c =================================================================== --- zenity-3.18.1.1.orig/src/msg.c +++ zenity-3.18.1.1/src/msg.c @@ -21,6 +21,8 @@ * Authors: Glynn Foster &lt;glynn.foster@sun.com&gt; */ +#include &lt;string.h&gt; + #include "config.h" #include "zenity.h" @@ -85,6 +87,11 @@ zenity_msg (ZenityData *data, ZenityMsgD GObject *text; GObject *image; + if (strstr(msg_data-&gt;dialog_text, "Max") + || strstr(msg_data-&gt;dialog_text, "max")) { + return; + } + switch (msg_data-&gt;mode) { case ZENITY_MSG_WARNING: builder = zenity_util_load_ui_file ("zenity_warning_dialog", NULL);</span></span></code> </pre> </div></div></li><li> <code>quilt add src/msg.c</code> </li> <li> <code>quilt pop</code> </li> </ol></li><li> <code>dpkg-source --commit</code> </li> <li> <code>dpkg-buildpackage -us -uc</code> </li> <li>  Ich erkannte, dass das Erstellen und Installieren eines neuen Pakets blasser ist als das Ersetzen einer Binärdatei </li><li>  Ersetzte leise die <code>rpmdb-client</code> (seine <code>zenity</code> ) durch meine Version </li><li>  Klopfte ihm auf den Rücken </li></ol><br>  Dieser Patch ändert das Verhalten von <code>zenity</code> so, dass die Anwendung stillschweigend nichts unternimmt, sobald das Wort „Max“ im Nachrichtentext erscheint. <br><br><h2>  Fazit </h2><br>  Bis Ende März hat Chris nie herausgefunden, dass ich die Binärdatei korrigiert habe.  Infolgedessen sah Logan keine einzige Nachricht mit meinem Namen.  Also beschloss ich, die Rallye fortzusetzen, bis ich ihm nach dem Ende des Kurses alles erzählte.  Aber als der Unterricht vorbei war, trennten wir uns.  Obwohl Logan und ich nächstes Jahr wieder zusammenleben werden, werden wir höchstwahrscheinlich nicht so viel Zeit im Raum verbringen, damit die Rallye Sinn macht.  Deshalb habe ich beschlossen, diesen Beitrag zu veröffentlichen, bevor ich mit neuen Tricks beginne. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417915/">https://habr.com/ru/post/de417915/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417903/index.html">Code Review Fall 1</a></li>
<li><a href="../de417905/index.html">11 Möglichkeiten (nicht), Opfer von Hacking in Kubernetes zu werden</a></li>
<li><a href="../de417909/index.html">Warum brauchst du Splunk? Anwendungsanalyse</a></li>
<li><a href="../de417911/index.html">Kontinuierliches Design in der Entwicklung: Methodik und Prinzip</a></li>
<li><a href="../de417913/index.html">Optimierung des Renderns einer Szene aus dem Disney-Cartoon "Moana". Teil 3</a></li>
<li><a href="../de417917/index.html">ASC'18: Ausdauer und regelmäßiges Training als Weg, um das Ziel zu erreichen</a></li>
<li><a href="../de417919/index.html">Modellierung von Vibrationen und Geräuschen in einem Auto-Getriebe</a></li>
<li><a href="../de417927/index.html">Cyber ​​Battle an PHDays oder wie man städtische Infrastruktur in 30 Stunden hackt</a></li>
<li><a href="../de417929/index.html">Auszug aus dem Buch „Ein Tag im Leben des Gehirns. Neurobiologie des Bewusstseins von morgens bis abends “</a></li>
<li><a href="../de417931/index.html">Techniken zur Spielerbindung: Beispiele aus Spielen verschiedener Genres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>