<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ๏ธ ๐ฅ ๐๐ฟ ุงููุณุฎ ุงููุชูุงุซู Tarantool: ุงูุชูููู ูุงูุงุณุชุฎุฏุงู โน๐พ ๐ฉ๐ฝโ๐ง ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุฏุฎู ูุฑูู Tarantool Core ูุฃุดุงุฑู ูู ุชุทููุฑ ูุญุฑู ูุงุนุฏุฉ ุจูุงูุงุช ุ ูุงูุงุชุตุงูุงุช ุงูุฏุงุฎููุฉ ูููููุงุช ุงูุฎุงุฏู ูุงููุณุฎ ุงููุชูุงุซู. ูุงูููู ุณูู ุฃุฎุจุฑู ุจููููุฉ ุนูู ุงููุณุฎ ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงููุณุฎ ุงููุชูุงุซู Tarantool: ุงูุชูููู ูุงูุงุณุชุฎุฏุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/439514/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ec/a3/bt/eca3bttl2uu6rg8sz7e9sj3o3us.jpeg"><br><br>  ุฃุฏุฎู ูุฑูู Tarantool Core ูุฃุดุงุฑู ูู ุชุทููุฑ ูุญุฑู ูุงุนุฏุฉ ุจูุงูุงุช ุ ูุงูุงุชุตุงูุงุช ุงูุฏุงุฎููุฉ ูููููุงุช ุงูุฎุงุฏู ูุงููุณุฎ ุงููุชูุงุซู.  ูุงูููู ุณูู ุฃุฎุจุฑู ุจููููุฉ ุนูู ุงููุณุฎ ุงููุชูุงุซู. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุญูู ุงููุณุฎ ุงููุชูุงุซู </h2><br>  ุงููุณุฎ ุงููุชูุงุซู ูู ุนูููุฉ ุฅูุดุงุก ูุณุฎ ูู ุงูุจูุงูุงุช ูู ูุชุฌุฑ ุฅูู ุขุฎุฑ.  ูู ูุณุฎุฉ ุชุณูู ูุณุฎุฉ ุทุจู ุงูุฃุตู.  ูููู ุงุณุชุฎุฏุงู ุงููุณุฎ ุงููุชูุงุซู ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุญุตูู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃู ุชูููุฐ ูุถุน ุงูุงุณุชุนุฏุงุฏ ุงูุณุฑูุน ุฃู ุชุบููุฑ ุญุฌู ุงููุธุงู ุฃูููุงู.  ูููุฐุง ูู ุงูุถุฑูุฑู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฏุงู ููุณ ุงูุจูุงูุงุช ุนูู ุงูุนูุฏ ุงููุฎุชููุฉ ูุดุจูุฉ ุงูููุจููุชุฑ ุงูุฎุงุตุฉ ุจุงููุชูุฉ. <br><br>  ูููู ุจุชุตููู ุงููุณุฎ ุงููุชูุงุซู ุจุทุฑููุชูู ุฑุฆูุณูุชูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <b>ุงูุงุชุฌุงู: ุงูุณูุฏ ูุงุฌุณุชูุฑ ุฃู ุงูุณูุฏ ุงูุนุจุฏ</b> .  ุชูุฑุงุฑ ุงูุณูุฏ ูุงูุนุจุฏ ูู ุงูุฎูุงุฑ ุงูุฃุณูู.  ูุฏูู ุนูุฏุฉ ูุงุญุฏุฉ ุชููู ุจุชุบููุฑ ุงูุจูุงูุงุช ุนูููุง.  ููููู ุชุฑุฌูุฉ ูุฐู ุงูุชุบููุฑุงุช ุฅูู ุงูุนูุฏ ุงูุฃุฎุฑู ุญูุซ ูุชู ุชุทุจูููุง.  ูุน ุงููุณุฎ ุงููุชูุงุซู ุงูุฑุฆูุณู ุ ูุชู ุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุนูุฏ ูุชุนุฏุฏุฉ ูู ููุช ูุงุญุฏ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชููู ูู ุนูุฏุฉ ุจุชุบููุฑ ุจูุงูุงุชูุง ููุณูุง ูุชุทุจูู ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง ุนูู ุงูุนูุฏ ุงูุฃุฎุฑู ุนูู ููุณูุง. </li><li style=";text-align:right;direction:rtl">  <b>ูุถุน ุงูุชุดุบูู: ุบูุฑ ูุชุฒุงูู ุฃู ูุชุฒุงูู</b> .  ูุชุถูู ุงููุณุฎ ุงููุชูุงุซู ุงููุชุฒุงูู ุฃู ุงูุจูุงูุงุช ูู ูุชู ุงูุงูุชุฒุงู ุจูุง ููู ูุชู ุชุฃููุฏ ุงููุณุฎ ุงููุชูุงุซู ูููุณุชุฎุฏู ุญุชู ูุชู ูุดุฑ ุงูุชุบููุฑุงุช ูู ุฎูุงู ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงูุนูุฏ ุนูู ุงูุฃูู.  ูู ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ุงููุชุฒุงูู ุ ูุนุฏ ุชูููุฐ ูุนุงููุฉ (ุงุฑุชูุงุจูุง) ูุงูุชูุงุนู ูุน ูุณุชุฎุฏู ุนูููุชูู ูุณุชููุชูู.  ูุงุฑุชุจุงุท ุงูุจูุงูุงุช ุ ูู ุงูุถุฑูุฑู ุฃู ุชูุฏุฑุฌ ูู ุงูุณุฌู ุงููุญูู ุ ูุนูุฏูุง ููุท ูุชู ููู ูุฐู ุงูุชุบููุฑุงุช ุจุทุฑููุฉ ูุง ุฅูู ุงูุนูุฏ ุงูุฃุฎุฑู.  ูู ุงููุงุถุญ ุฃู ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ุงููุชุฒุงูู ูู ุนุฏุฏ ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุจุณุจุจ ูุฐุง. </li></ul><br><h2 style=";text-align:right;direction:rtl">  ููู ูุนูู ุงููุณุฎ ุงููุชูุงุซู ูู Tarantoolุ </h2><br>  ูุญุชูู ุงููุณุฎ ุงููุชูุงุซู ูู Tarantool ุนูู ุงูุนุฏูุฏ ูู ุงูููุฒุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููู ูุจููุฉ ูู ุงูุทูุจ ุงูุฃุณุงุณู ุ ูุงูุชู ููููู ูู ุฎูุงููุง ุฅูุดุงุก ูุฌููุนุฉ ูู ุฃู ุทูุจูููุฌูุง.  ูู ุนูุตุฑ ุชูููู ุฃุณุงุณู ูู ูุฐุง ุงููุจูู ุฃุญุงุฏู ุงูุงุชุฌุงู ุ ุฃู ุฃู ูุฏูู ุฏุงุฆููุง ุงูุณูุฏ ูุงูุนุจุฏ.  ูููู Master ุจุชูููุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ููููู ุจุฅูุดุงุก ุณุฌู ููุนูููุงุช ุ ูุชู ุงุณุชุฎุฏุงูู ุนูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ. </li><li style=";text-align:right;direction:rtl">  ุงููุณุฎ ุงููุชูุงุซู Tarantool ุบูุฑ ูุชุฒุงูู.  ุฃู ุฃู ุงููุธุงู ูุคูุฏ ุงูุชุฒุงูู ุ ุจุบุถ ุงููุธุฑ ุนู ุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุชู ุดูุฏุชูุง ูุฐู ุงููุนุงููุฉ ุ ูููุฏุงุฑ ูุง ุชู ุชุทุจูููุง ุนูู ููุณูุง ุ ููุง ุฅุฐุง ูุงู ูุฏ ุชู ุชูููุฐู ุนูู ุงูุฅุทูุงู. </li><li style=";text-align:right;direction:rtl">  ุฎุงุตูุฉ ุฃุฎุฑู ูููุณุฎ ุงููุชูุงุซู ูู Tarantool ูู ุฃูู ูุงุฆู ุนูู ุงูุตู.  ูุญุชูุธ Tarantool ุจุณุฌู ููุนูููุงุช (WAL).  ุชุตู ุงูุนูููุฉ ุฅูู ููุงู ุณุทุฑุง ุ ุฃู ุนูุฏูุง ุชุชุบูุฑ ุจุนุถ ุงูููุญุงุช ูู ุงููุณุงุญุฉ ุ ุชุชู ูุชุงุจุฉ ูุฐู ุงูุนูููุฉ ุฅูู ุงูุณุฌู ูุณุทุฑ ูุงุญุฏ.  ุจุนุฏ ุฐูู ุ ุชููู ุนูููุฉ ุงูุฎูููุฉ ุจูุฑุงุกุฉ ูุฐุง ุงูุณุทุฑ ูู ุงูุณุฌู ูุฅุฑุณุงูู ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ.  ูู ุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ููุณูุฏ ุ ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ุงูุฎูููุฉ.  ุฃู ุ ูุชู ุชูููุฐ ูู ุนูููุฉ ุงููุณุฎ ุงููุชูุงุซู ุฅูู ุนูุฏ ูุฎุชููุฉ ูู ุงููุชูุฉ ุจุดูู ุบูุฑ ูุชุฒุงูู ูู ุงูุขุฎุฑูู. </li><li style=";text-align:right;direction:rtl">  ูู ุนูุฏุฉ ูุชูุฉ ููุง ูุนุฑู ูุฑูุฏ ุฎุงุต ุจูุง ุ ูุงูุชู ูุชู ุฅูุดุงุคูุง ุนูุฏ ุฅูุดุงุก ุงูุนูุฏุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุชูู ุงูุนูุฏุฉ ุฃูุถูุง ุนูู ูุนุฑู ูู ุงููุชูุฉ (ุฑูู ุงูุนุถู).  ูุฐุง ุซุงุจุช ุฑููู ูุชู ุชุนูููู ููุณุฎุฉ ูุชูุงุซูุฉ ุนูุฏ ุงูุงุชุตุงู ุจูุฌููุนุฉ ุ ููุจูู ูุน ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุทูุงู ุญูุงุชู ูู ุงููุชูุฉ. </li></ul><br>  ุจุณุจุจ ุนุฏู ุงูุชุฒุงูู ุ ูุชู ุชุณููู ุงูุจูุงูุงุช ุฅูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุชุฃุฎุฑุฉ.  ุฃู ุฃูู ููุช ุจุจุนุถ ุงูุชุบููุฑ ุ ูุฃูุฏ ุงููุธุงู ุงูุงูุชุฒุงู ุ ููุฏ ุชู ุจุงููุนู ุชุทุจูู ุงูุนูููุฉ ุนูู ุงูุฑุฆูุณู ุ ูููู ุนูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุณูุชู ุชุทุจูููุง ูุน ุจุนุถ ุงูุชุฃุฎูุฑ ุ ูุงูุชู ูุชู ุชุญุฏูุฏูุง ุจุงูุณุฑุนุฉ ุงูุชู ุชูุฑุฃ ุจูุง ุนูููุฉ ุงููุณุฎ ุงููุชูุงุซู ููุฎูููุฉ ุงูุนูููุฉ ุ ูุชุฑุณููุง ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ููุฐุง ููุทุจู . <br><br>  ููุฐุง ุงูุณุจุจ ุ ููุงู ูุฑุตุฉ ูุฎุฑูุฌ ุงูุจูุงูุงุช ูู ุงููุฒุงููุฉ.  ูููุชุฑุถ ุฃู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุฃุณุงุชุฐุฉ ุงูุฐูู ูุบูุฑูู ุงูุจูุงูุงุช ุงููุชุฑุงุจุทุฉ.  ูุฏ ูุชุถุญ ุฃู ุงูุนูููุงุช ุงูุชู ุชุณุชุฎุฏููุง ุบูุฑ ุชุจุงุฏููุฉ ูุชุดูุฑ ุฅูู ููุณ ุงูุจูุงูุงุช ุ ุซู ุณูููู ูุฏู ุนุถููู ูุฎุชูููู ูู ุงููุฌููุนุฉ ุฅุตุฏุงุฑุงุช ูุฎุชููุฉ ูู ุงูุจูุงูุงุช. <br><br>  <b>ุฅุฐุง ูุงู ุงููุณุฎ ุงููุชูุงุซู ูู Tarantool ุฃุญุงุฏู ุงูุงุชุฌุงู ุงูุณูุฏ ุ ุซู ููููุฉ ุฌุนู ุงูุณูุฏ ุงููุงุฌุณุชูุฑุ</b>  ุจุณูุท ุฌุฏูุง: ูู ุจุฅูุดุงุก ููุงุฉ ูุณุฎ ูุชูุงุซู ุฃุฎุฑู ูููู ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ.  ูุฌุจ ุฃู ุชููู ุฃู ุงููุณุฎ ุงููุชูุงุซู ุงูุฑุฆูุณู ูู Tarantool ูู ูุฌุฑุฏ ูุฒูุฌ ูู ุฏููุชู ุจูุงูุงุช ูุณุชููุชูู ุนู ุจุนุถููุง ุงูุจุนุถ. <br><br>  ุจุงุณุชุฎุฏุงู ููุณ ุงููุจุฏุฃ ุ ูููููุง ุชูุตูู ุฑุฆูุณูุฉ ุซุงูุซุฉ ุ ููุชูุฌุฉ ูุฐูู ุ ูุฅููุง ูุจูู ุดุจูุฉ ุดุจููุฉ ูุงููุฉ ุชููู ูููุง ูู ูุณุฎุฉ ูุชูุงุซูุฉ ุฑุฆูุณูุฉ ูุนุจุฏูุง ูุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุฃุฎุฑู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/nx/z5/b-/nxz5b-f9rzqtmhi7ga4fhq8pdq8.png" width="500"></div><br>  ูุฑุฌู ููุงุญุธุฉ ุฃูู ูุง ูุชู ููุท ูุณุฎ ุชูู ุงูุนูููุงุช ุงูุชู ุจุฏุฃุช ูุญูููุง ุนูู ูุฐุง ุงููุนูู ุงูุฑุฆูุณู ุ ูููู ุฃูุถูุง ุชูู ุงูุชู ุชููุงูุง ุฎุงุฑุฌููุง ุนุจุฑ ุจุฑูุชููููุงุช ุงููุณุฎ ุงููุชูุงุซู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุฃุชู ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุนูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุฑูู 1 ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุฑูู 3 ูุฑุชูู: ูุจุงุดุฑุฉ ููู ุฎูุงู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุฑูู 2. ุชุชูุญ ููุง ูุฐู ุงูุฎุงุตูุฉ ุจูุงุก ุทุจูููุฌูุง ุฃูุซุฑ ุชุนููุฏูุง ุฏูู ุงุณุชุฎุฏุงู ุดุจูุฉ ูุงููุฉ.  ุฏุนูุง ูููู ูุฐุง ูุงุญุฏ. <br><br><img src="https://habrastorage.org/webt/k3/wy/r4/k3wyr4imeqfncmfar65mohmcj24.png"><br><br>  ูุฏู ุฌููุน ุงูุฃุณุงุชุฐุฉ ุงูุซูุงุซุฉ ุ ุงูุฐูู ูุดูููู ูุนูุง ุดุจูุฉ ุฃุณุงุณูุฉ ูุงููุฉ ูู ุงููุฌููุนุฉ ุ ูุณุฎุฉ ูุชูุงุซูุฉ ูุฑุฏูุฉ ูุฑููุฉ.  ูุธุฑูุง ูุฃูู ูุชู ุฅุฌุฑุงุก ุจุฑููุณู ุงูุณุฌูุงุช ุนูู ูู ูู ุงูุฃุณุงุชุฐุฉ ุ ูุฅู ุงูุนุจูุฏ "ุงููุธูููู" ุงูุซูุงุซุฉ ุณูุญุชูููู ุนูู ุฌููุน ุงูุนูููุงุช ุงูุชู ุชู ุชูููุฐูุง ุนูู ุฃู ูู ุงูุนูุฏ ุงูุนูููุฏูุฉ. <br><br>  ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุชูููู ููุฌููุนุฉ ูุชููุนุฉ ูู ุงูููุงู.  ูุง ููููู ุฅูุดุงุก ุงุฑุชุจุงุทุงุช ุฒุงุฆุฏุฉ ุจูู ุฌููุน ุนูุฏ ุงููุชูุฉ ุ ูุฅุฐุง ุชู ูุถุน ุงููุณุฎ ุงููุชูุงุซูุฉ ูู ููุงู ูุฑูุจ ุ ูุณุชุญุตู ุนูู ูุณุฎุฉ ุฏูููุฉ ูู ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณู ูุน ุฃูู ุชุฃุฎูุฑ.  ููุชู ูู ูุฐุง ุจุงุณุชุฎุฏุงู ุนูุตุฑ ุงููุณุฎ ุงููุชูุงุซู ุงูุฃุณุงุณู ููุฑููู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุณู ุนูููุงุช ุงููุชูุฉ </h2><br>  ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู: <b>ุฅุฐุง ุชู ุฅุฌุฑุงุก ุงูุนูููุงุช ุจูู ุฌููุน ุฃุนุถุงุก ุงููุฌููุนุฉ ูุชูุตููู ุฅูู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ุนุฏุฉ ูุฑุงุช ุ ููู ูููู ุงูุนูููุฉ ุงูุชู ูุฌุจ ุชูููุฐูุง ูุฃููุง ูุงุ</b>  ูุฐุง ูุชุทูุจ ุขููุฉ ุชุตููุฉ.  ูุชู ุชุนููู ุณูุชูู ููู ุนูููุฉ ูุฑุงุกุฉ ูู ุงูุณุฌู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนุฑู ุงูุฎุงุฏู ุงูุฐู ุจุฏุฃุช ุนููู ูุฐู ุงูุนูููุฉ. </li><li style=";text-align:right;direction:rtl">  ุฑูู ุชุณูุณู ุงูุนูููุฉ ุนูู ุงูุฎุงุฏู ุ lsn ุ ูุงูุฐู ูู ุงูุจุงุฏุฆ ุงูุฎุงุต ุจู.  ูู ุฎุงุฏู ุ ุนูุฏ ุฅุฌุฑุงุก ุนูููุฉ ุ ูุนููู ุฑูููุง ูุชุฒุงูุฏูุง ููู ุณุทุฑ ุณุฌู ูุณุชูู: 1 ุ 2 ุ 3 ุ 4 ุ 5 ุ 6 ุ 7 ุ 8 ุ 9 ุ 10 ... ูููุฐุง ุ ุฅุฐุง ุนูููุง ุฃูู ุจุงููุณุจุฉ ูุฎุงุฏู ุฐู ูุนุฑู ูุนูู ุ ููุฏ ุทุจููุง ุงูุนูููุฉ ุจู lsn 10 ุ ุซู ุงูุนูููุงุช ูุน lsn 9 ู 8 ู 7 ู 10 ุงูุชู ุฌุงุกุช ุนุจุฑ ูููุงุช ุงููุณุฎ ุงููุชูุงุซู ุงูุฃุฎุฑู ููุณุช ุถุฑูุฑูุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูุทุจู ูุง ููู: 11 ู 12 ููุง ุฅูู ุฐูู. </li></ul><br><h2 style=";text-align:right;direction:rtl">  ุญุงูุฉ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ </h2><br>  <b>ูููู ุชุฎุฒู Tarantool ูุนูููุงุช ุญูู ุงูุนูููุงุช ุงูุชู ุทุจูุชูุง ุจุงููุนูุ</b>  ููููุงู ุจุฐูู ุ ููุงู ุณุงุนุฉ Vclock - ูุฐุง ูู ูุงูู lsn ุงูุฃุฎูุฑ ุงููุทุจูุฉ ุนูู ูู ุนูุฏุฉ ูู ุงููุชูุฉ. <br><br> <code>[lsn <sub>1</sub> , lsn <sub>2</sub> , lsn <sub>n</sub> ]</code> <br> <br>  ุญูุซ <code>lsn <sub>i</sub></code> ูู ุฑูู ุขุฎุฑ ุนูููุฉ ูุนุฑููุฉ ูู ุงูุฎุงุฏู ุฐุงุช ุงููุนุฑู i. <br><br>  ูููู ุฃูุถูุง ุงุณุชุฏุนุงุก Vclock ููุทุฉ ูุนููุฉ ูุญุงูุฉ ุงููุชูุฉ ุจุฃููููุง ุงููุนุฑููุฉ ุจูุฐู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ.  ุนูุฏ ูุนุฑูุฉ ูุนุฑู ุงูุฎุงุฏู ููุนูููุฉ ุงูุชู ูุตูุช ุ ูุฅููุง ูุนุฒู ูููู Vclock ุงููุญูู ุงูุฐู ูุญุชุงุฌู ุ ูููุงุฑู lsn ุงูุฐู ุชู ุงูุญุตูู ุนููู ูุน ุนูููุฉ lsn ุ ูููุฑุฑ ูุง ุฅุฐุง ููุง ุณูุณุชุฎุฏู ูุฐู ุงูุนูููุฉ.  ูุชูุฌุฉ ูุฐูู ุ ุณูุชู ุฅุฑุณุงู ุงูุนูููุงุช ุงูุชู ุจุฏุฃูุง ุฑุฆูุณู ูุญุฏุฏ ูุชุทุจูููุง ุจุงูุชุชุงุจุน.  ูู ุงูููุช ููุณู ุ ูููู ุฎูุท ููุงู ุณูุฑ ุงูุนูู ุงูุชู ุชู ุฅูุดุงุคูุง ุนูู ุดุฑุงุฆุญ ุฑุฆูุณูุฉ ูุฎุชููุฉ ูุน ุจุนุถูุง ุงูุจุนุถ ุจุณุจุจ ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ุงููุชุฒุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงููุชูุฉ </h2><br>  ูููุชุฑุถ ุฃู ูุฏููุง ูุฌููุนุฉ ุชุชููู ูู ุนูุตุฑูู ุฑุฆูุณููู ูุนุจุฏ ุ ููุฑูุฏ ุชูุตูู ูุซูู ุซุงูุซ ุจู.  ูุฏููุง UUID ูุฑูุฏุฉ ูู ููุนูุง ุ ูููู ูุง ููุฌุฏ ูุนุฑู ุงููุชูุฉ ุญุชู ุงูุขู.  ุฅุฐุง ูู ุชุชู ุงูุชููุฆุฉ ุจุนุฏ ุ ูุฑูุฏ Tarantool ุงูุงูุถูุงู ุฅูู ุงููุชูุฉ ุ ูุฌุจ ุฃู ูุฑุณู ุนูููุฉ JOIN ุฅูู ุฃุญุฏ ุงูุฃุณุงุชุฐุฉ ุงูุฐูู ูููููู ุชูููุฐูุง ุ ุฃู ุฃููุง ูู ูุถุน ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ุงุณุชุฌุงุจุฉู ูู JOIN ุ ูุฑุณู ุงููุนูู ููุทุฉ ุณุฑูุนุฉ ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงููุชุตูุฉ.  ุชููู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุจุชุทุจููู ูู ุงูููุฒู ุ ุจูููุง ูุง ูุฒุงู ูุง ูุญุชูู ุนูู ูุนุฑูู.  ุงูุขู ูุชู ูุฒุงููุฉ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูุน ุชุฃุฎุฑ ุทููู ูุน ุงููุชูุฉ.  ุจุนุฏ ุฐูู ุ ูุนูู ุงูุฑุฆูุณู ุงูุฐู ุชู ุชุดุบูู JOIN ูุนุฑููุง ููุฐู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ูุงูุฐู ูุชู ุชุณุฌููู ูุฅุฑุณุงูู ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ.  ุนูุฏูุง ูุชู ุชุนููู ูุนุฑู ุฅูู ูุณุฎุฉ ูุชูุงุซูุฉ ุ ูุตุจุญ ุนูุฏุฉ ูุงููุฉ ูุจุนุฏ ุฐูู ููููู ุจุฏุก ุงููุณุฎ ุงููุชูุงุซู ููุณุฌู ุฅูู ุฌุงูุจู. <br><br>  ูุชู ุฅุฑุณุงู ุฎุทูุท ูู ุฏูุชุฑ ุงูููููุฉ ุจุฏุกุงู ูู ุญุงูุฉ ูุฐู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูู ููุช ุทูุจ ุณุฌู ุงููุณุฎ ุงููุชูุงุซู ูู ุงูุฑุฆูุณู - ุฃู ูู vclock ุงูุชู ุชููุงูุง ุฃุซูุงุก ุนูููุฉ JOIN ุฃู ูู ุงูููุงู ุงูุฐู ุชูููุช ููู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุณุงุจููุง.  ุฅุฐุง ูุงูุช ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูุฏ ุณูุทุช ูุณุจุจ ูุง ุ ูุนูุฏูุง ุชุชุตู ูู ุงููุชูุฉ ูู ุงููุฑุฉ ุงูุชุงููุฉ ุ ูู ุชุนุฏ ุชููู ุจุชูููุฐ JOIN ุ ูุฃููุง ุชุญุชูู ุจุงููุนู ุนูู ููุทุฉ ูุญููุฉ.  ุทูุจุช ููุท ุฌููุน ุงูุนูููุงุช ุงูุชู ุญุฏุซุช ุฃุซูุงุก ุบูุงุจูุง ูู ุงููุฌููุนุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุณุฌูู ูุณุฎุฉ ูุชูุงุซูุฉ ูู ูุชูุฉ </h2><br>  ูุชุฎุฒูู ุงูุญุงูุฉ ุญูู ุจููุฉ ุงููุชูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุณุงุญุฉ ุฎุงุตุฉ - ุงููุชูุฉ.  ุฃูู ูุญุชูู ุนูู ูุนุฑูุงุช ุงูุฎุงุฏู ูู ุงููุชูุฉ ูุฃุฑูุงููุง ุงูุชุณูุณููุฉ ููุนุฑูุงุชูุง ุงููุฑูุฏุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/af/0f/hr/af0fhra2ln0s2xcq-qsmeim2xtc.png" width="500"></div><br><br> <code>[1, 'c35b285c-c5b1-4bbe-83b1-b825eb594aa4'] <br> [2, '37b12cb7-d324-4d75-b428-cde92c18e708'] <br> [3, 'b72b1aa6-42a0-4d73-a611-900e44cdd465']</code> <br> <br>  ูุง ููุทูุจ ูู ูุนุฑููุงุช ุงูุชุนุฑูู ุงูุชุฑุชูุจ ุ ูุฃู ุงูุนูุฏ ูููู ุฅุณูุงุทูุง ูุฅุถุงูุชูุง. <br><br>  ููุง ูู ุฃูู ูุฃุฒู.  ูููุงุนุฏุฉ ุนุงูุฉ ุ ูุง ูุชู ุชุฌููุน ุงููุชู ุนู ุทุฑูู ุนูุฏุฉ ูุงุญุฏุฉ: ุชููู ุจุชุดุบูู ุชุทุจูู ูุนูู ูุชููู ุจูุดุฑ ุงููุฌููุนุฉ ุจุงููุงูู ูุฑุฉ ูุงุญุฏุฉ.  ููู ุงููุณุฎ ุงููุชูุงุซู ูู Tarantool ุบูุฑ ูุชุฒุงูู.  ูุงุฐุง ูู ูุงู ุงุซูุงู ูู ุงูุฃุณุงุชุฐุฉ ูู ููุช ูุงุญุฏ ุจุชูุตูู ุนูุฏ ุฌุฏูุฏุฉ ูุชุนููู ูุนุฑููุงุช ูุชุทุงุจูุฉ ููุงุ  ุณูููู ููุงู ุตุฑุงุน. <br><br>  ูููุง ููู ูุซุงู ุนูู JOIN ุฎุงุทุฆ ูุตุญูุญ: <br><br><img src="https://habrastorage.org/webt/o2/9_/bc/o29_bcjs3dhyllneqlgaczljxys.png"><br><br>  ูุฏููุง ุงุซููู ูู ุงููุงุฌุณุชูุฑ ูุงุซููู ูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุชู ุชุฑุบุจ ูู ุงูุงุชุตุงู.  ุฃููุง ุชุฌุนู ุงูุงูุถูุงู ุฅูู ุฃุณูุงุฏ ูุฎุชููุฉ.  ุงูุชุฑุถ ุงูุญุตูู ุนูู ุงููุณุฎ ุงููุชูุงุซูุฉ ููุณ ุงููุนุฑูุงุช.  ุซู ุณูููุงุฑ ุงููุณุฎ ุงููุชูุงุซู ุจูู ุงูุฃุณุงุชุฐุฉ ูุฃููุฆู ุงูุฐูู ูุชููููู ูู ูุณุฎ ุณุฌูุงุชูู ุ ุณุชููุงุฑ ุงููุฌููุนุฉ. <br><br>  ูููุน ุญุฏูุซ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุจุฏุก ุงููุณุฎ ุงููุชูุงุซูุฉ ุจุฏูุฉ ุนูู ุฑุฆูุณูุฉ ูุงุญุฏุฉ ูู ุฃู ููุช.  ุชุญููููุง ููุฐู ุงูุบุงูุฉ ุ ูุฏู Tarantool ููููููุง ููุงุฆุฏ ุชููุฆุฉ ุ ููุงู ุจุชูููุฐ ุฎูุงุฑุฒููุฉ ูุงุฎุชูุงุฑ ูุฐุง ุงููุงุฆุฏ.  ุชูุดุฆ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงูุชู ุชุฑูุฏ ุงูุงุชุตุงู ุจุงููุชูุฉ ุฃููุงู ุงุชุตุงููุง ุจุฌููุน ุงูุดุฑุงุฆุญ ุงูุฑุฆูุณูุฉ ุงููุนุฑููุฉ ููุง ูู ุงูุชูููู ุงูููููู.  ุซู ุชุญุฏุฏ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุชูู ุงูุชู ุจุฏุฃุช ุจุงููุนู (ุนูุฏ ูุดุฑ ุงููุชูุฉ ุ ูุง ุชุณุชุทูุน ูู ุงูุนูุฏ ูุณุจ ุงููุงู ุงููุงูู).  ููููู ูุชู ุงุฎุชูุงุฑ ุงูุณุงุฏุฉ ุงููุชุงุญุฉ ููุชุณุฌูู.  ูู Tarantool ุ ููุงู ูููุฑุงุกุฉ ูุงููุชุงุจุฉ ููุท ุ ูุง ูููููุง ุงูุชุณุฌูู ุนูู ุนูุฏุฉ ุงููุฑุงุกุฉ ููุท.  ุจุนุฏ ุฐูู ุ ูู ูุงุฆูุฉ ุงูุนูุฏ ุงูุชู ุชูุช ุชุตููุชูุง ุ ูุฎุชุงุฑ ุชูู ุงูุชู ุชุญุชูู ุนูู ุฃูู UUID. <br><br>  ุฅุฐุง ุงุณุชุฎุฏููุง ููุณ ุงูุชูููู ูููุณ ูุงุฆูุฉ ุงูุฎูุงุฏู ุนูู ูุซููุงุช ุบูุฑ ูููุฃุฉ ุชุชุตู ุจุงููุชูุฉ ุ ูุณูุฎุชุงุฑูู ููุณ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ุ ููุง ูุนูู ุฃู JOIN ุณูู ููุฌุญ ุนูู ุงูุฃุฑุฌุญ. <br><br>  ูู ููุง ูุดุชู ูุงุนุฏุฉ: ุนูุฏ ุชูุตูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุฅูู ูุชูุฉ ุจุงูุชูุงุฒู ุ ูุฌุจ ุฃู ูููู ููู ูุฐู ุงููุณุฎ ุงููุชูุงุซูุฉ ููุณ ุชูููู ุงููุณุฎ ุงููุชูุงุซู.  ุฅุฐุง ุชุฌุงูููุง ุดูุฆูุง ูุง ูู ููุงู ูุง ุ ูููุงู ุงุญุชูุงู ุฃู ูุชู ุชุดุบูู ุงููุซููุงุช ุฐุงุช ุงูุชููููุงุช ุงููุฎุชููุฉ ุนูู ุฃุณุงุชุฐุฉ ูุฎุชููุฉ ููู ุชุชููู ุงููุฌููุนุฉ ูู ุงูุชุฌููุน. <br><br>  ูููุชุฑุถ ุฃููุง ููุง ูุฎุทุฆูู ุ ุฃู ุฃู ุงููุณุคูู ูุฏ ูุณู ุฅุตูุงุญ ุงูุชููุฆุฉ ุ ุฃู ูุณุฑ Ansible ุ ูุฃู ุงููุฌููุนุฉ ูุง ุชุฒุงู ูุชูุทุนุฉ.  ูุง ูููู ุฃู ูุดูุฏ ุนูู ูุฐุงุ  ุฃููุงู ุ ูู ุชุชููู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุงุจูุฉ ููุชูุตูู ูู ุฅูุดุงุก ููุทุงุช ูุญููุฉ: ูุง ูุชู ุจุฏุก ุงููุณุฎ ุงููุชูุงุซูุฉ ูุงูุฅุจูุงุบ ุนู ุงูุฃุฎุทุงุก.  ุซุงููุงู ุ ุนูู ุงูุดุฑุงุฆุญ ุงูุฑุฆูุณูุฉ ูู ุงูุณุฌูุงุช ุ ุณูุฑู ุงูุฃุฎุทุงุก ุงููุชุนููุฉ ุจุงูุชุนุงุฑุถุงุช ูู ุงููุชูุฉ ุงููุถุงุฆูุฉ. <br><br>  ููู ูููููุง ุญู ูุฐุง ุงููุถุนุ  ุงููุง ุจุณูุทุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ูู ุตุญุฉ ุงูุชูููู ุงูุฐู ุญุฏุฏูุงู ูููุณุฎ ุงููุชูุงุซูุฉ ููุฑุจุท ุ ูุฃูู ุฅุฐุง ูู ูุตูุญูุง ุ ูุณูุตุจุญ ูู ุดูุก ุขุฎุฑ ุนุฏูู ุงููุงุฆุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูููู ุจุฅุฒุงูุฉ ุงูุตุฑุงุนุงุช ูู ุงููุฌููุนุฉ ูุงูุชูุงุท ุตูุฑุฉ. </li></ul><br>  ุงูุขู ููููู ูุญุงููุฉ ุชููุฆุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ูุฑุฉ ุฃุฎุฑู. <br><br><h2 style=";text-align:right;direction:rtl">  ุญู ุงููุฒุงุน </h2><br>  ูุฐูู ุ ุฃูุดุฃูุง ูุฌููุนุฉ ููุชุตูุฉ.  ุชุนูู ุฌููุน ุงูุนูุฏ ูู ูุถุน ุงูุงุดุชุฑุงู ุ ุฃู ุฃููุง ุชุชููู ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุฃุณูุงุฏ ูุฎุชููุฉ.  ูุฃู ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ูุชุฒุงูู ุ ุชููู ุงูุชุนุงุฑุถุงุช ููููุฉ.  ุนูุฏูุง ุชููู ูู ููุช ูุงุญุฏ ุจุชุบููุฑ ุงูุจูุงูุงุช ุนูู ุงูุดุฑุงุฆุญ ุงูุฑุฆูุณูุฉ ุงููุฎุชููุฉ ุ ุชุญุตู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุฎุชููุฉ ุนูู ูุณุฎ ูุฎุชููุฉ ูู ุงูุจูุงูุงุช ุ ูุฃูู ูููู ุชุทุจูู ุงูุนูููุงุช ุจุชุฑุชูุจ ูุฎุชูู. <br><br>  ููุง ูุชูุฉ ูุซุงู ุจุนุฏ ุชูููุฐ JOIN: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/-o/2j/k2/-o2jk2hjv2dqndshyqta_blcmo8.png" width="500"></div><br>  ูุฏููุง ุซูุงุซุฉ ุนุจูุฏ ุณูุฏ ุ ูุชู ููู ุงูุณุฌูุงุช ุจูููู ุ ูุงูุชู ูุชู ุชูููููุง ูู ุงุชุฌุงูุงุช ูุฎุชููุฉ ููุชู ุชุทุจูููุง ุนูู ุงูุนุจูุฏ.  ุชุนูู ุงูุจูุงูุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุฃู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ุณูููู ููุง ุณุฌู ุชุบููุฑ vclock ุงูุฎุงุต ุจูุง ุ ูุฃูู ูููู ุฎูุท ุงูุชุฏููุงุช ูู ูุฎุชูู ุงูุดุฑุงุฆุญ ูุน ุจุนุถูุง ุงูุจุนุถ.  ูููู ุจุนุฏ ุฐูู ูููู ุฃู ูุฎุชูู ุชุฑุชูุจ ุงูุนูููุงุช ูู ุงูุญุงูุงุช.  ุฅุฐุง ูุงูุช ุนูููุงุชูุง ุบูุฑ ุชุจุฏูููุฉ ุ ูุซู ุนูููุฉ ุงุณุชุจุฏุงู ุ ูุฅู ุงูุจูุงูุงุช ุงูุชู ูุชููุงูุง ุนูู ูุฐู ุงููุณุฎ ุงููุชูุงุซูุฉ ุณุชููู ูุฎุชููุฉ. <br><br>  ูุซุงู ุตุบูุฑ.  ูููุชุฑุถ ุฃู ูุฏููุง ุงุซููู ูู ุงููุงุฌุณุชูุฑ ูุน vclock = {0ุ0}.  ูุณูููู ููุงููุง ุจุฅุฌุฑุงุก ุนูููุชูู ุ ุชู ุชุนูููููุง ูู op1 ุ 1 ุ op1 ุ 2 ุ op2 ุ 1 ุ op2 ุ 2.  ูุฐู ูู ุงููุฑุฉ ุงูุซุงููุฉ ุงูุชู ูููู ูููุง ูู ุฃุณุชุงุฐ ุจุฅุฌุฑุงุก ุนูููุฉ ูุญููุฉ ูุงุญุฏุฉ: <br><br><img src="https://habrastorage.org/webt/-y/z7/cy/-yz7cyhaozyxkdltf7pptl37oqa.png"><br><br>  ูุดูุฑ ุงูููู ุงูุฃุฎุถุฑ ุฅูู ุญุฏูุซ ุชุบููุฑ ูู ูููู vclock ุงูููุงุจู.  ุฃููุงู ุ ูุบููุฑ ูู ูู ุฑุฆูุณู vclock ุงูุฎุงุตูู ุจููุง ุ ุซู ูููู ุงูุณูุฏ ุงูุซุงูู ุจุฅุฌุฑุงุก ุนูููุฉ ูุญููุฉ ุฃุฎุฑู ููุฒูุฏ ูู ุฌุฏูุฏ vclock.  ูุชููู ุงูุณูุฏ ุงูุฃูู ุนูููุฉ ุงููุณุฎ ุงููุชูุงุซู ูู ุงูุฑุฆูุณู ุงูุซุงูู ุ ููุดุงุฑ ุฅูู ุฐูู ุจุงูุฑูู ุงูุฃุญูุฑ 1 ูู vclock ูุนูุฏุฉ ุงููุชูุฉ ุงูุฃููู. <br><br><img src="https://habrastorage.org/webt/if/j8/8f/ifj88f4rat3litvsyedit09shw0.png"><br><br>  ุซู ูุชููู ุงูุณูุฏ ุงูุซุงูู ุงูุนูููุฉ ูู ุงูุฃููู ุ ูุงูุฃููู - ุงูุนูููุฉ ุงูุซุงููุฉ ูู ุงูุซุงููุฉ.  ููู ุงูููุงูุฉ ุ ูููู ุงูุณูุฏ ุงูุฃูู ุจุชูููุฐ ุขุฎุฑ ุนูููุฉ ูู ุ ุจูููุง ูุชููู ุงูุณูุฏ ุงูุซุงูู ุฐูู. <br><br><img src="https://habrastorage.org/webt/gh/3z/jo/gh3zjoicvoxqd772_pt1m92wfem.png"><br><br>  Vclock ูู ูููุฉ ุงูููุช ุตูุฑ ูุฏููุง ููุณ - {0ุ0}.  ูู ุงููู ุงูุฃุฎูุฑ ูู ุงูููุช ุ ูุฏููุง ุฃูุถูุง ููุณ vclock {2ุ2} ุ ููุจุฏู ุฃู ุงูุจูุงูุงุช ูุฌุจ ุฃู ุชููู ูู ููุณูุง.  ููู ุชุฑุชูุจ ุงูุนูููุงุช ุงููููุฐุฉ ุนูู ูู ุณูุฏ ูุฎุชูู.  ูุฅุฐุง ูุงูุช ูุฐู ุนูููุฉ ุงุณุชุจุฏุงู ุจููู ูุฎุชููุฉ ูููุณ ุงูููุงุชูุญุ  ุซู ุ ุนูู ุงูุฑุบู ูู ููุณ vclock ูู ุงูููุงูุฉ ุ ุณูู ูุญุตู ุนูู ุฅุตุฏุงุฑุงุช ูุฎุชููุฉ ูู ุงูุจูุงูุงุช ุนูู ููุง ุงููุณุฎ ุงููุชูุงุซูุฉ. <br><br>  ูุญู ุฃูุถุง ูุงุฏุฑูู ุนูู ุญู ูุฐุง ุงููููู. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุชุจุงุฏู ุงูุณุฌูุงุช</b> .  ุฃููุงู ุ ูููููุง ุฅุฌุฑุงุก ุนูููุงุช ูุชุงุจุฉ ููุณ ุนูู ูุณุฎ ูุชูุงุซูุฉ ุชู ุงุฎุชูุงุฑูุง ุนุดูุงุฆููุง ุ ูููู ูููููุง ุดุทุจูุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู.  ููุฏ ูุณุฑูุง ุนูููุงุช ุงููุชุงุจุฉ ุนุจุฑ ุฃุณุงุชุฐุฉ ูุฎุชูููู ูุญุตููุง ุนูู ูุธุงู ุชูุงุณู ููุงุฆู.  ุนูู ุณุจูู ุงููุซุงู ุ ุชู ุชุบููุฑ ุงูููุงุชูุญ ูู 1 ุฅูู 10 ูู ุจุฑูุงูุฌ ุฑุฆูุณู ูุงุญุฏ ููู 11 ุฅูู 20 ุนูู ุฌูุงุฒ ุขุฎุฑ - ุณุชุชุจุงุฏู ุงูุนูุฏ ุณุฌูุงุชูุง ูุณุชุญุตู ุนูู ุงูุจูุงูุงุช ููุณูุง ุชูุงููุง. <br><br>  ุชุนูู ุงููุดุงุฑูุฉ ุฃู ูุฏููุง ุฌูุงุฒ ุชูุฌูู ูุนูู.  ููุณ ูู ุงูุถุฑูุฑู ุฃู ูููู ููุงููุง ูููุตูุงู ุนูู ุงูุฅุทูุงู ุ ูููู ุฃู ูููู ุฌูุงุฒ ุงูุชูุฌูู ุฌุฒุกูุง ูู ุงูุชุทุจูู.  ูููู ุฃู ูููู ุนุจุงุฑุฉ ุนู ูุทุนุฉ ุตุบูุฑุฉ ุชุทุจู ุนูููุงุช ุงููุชุงุจุฉ ุนูู ููุณูุง ุฃู ุชููููุง ุฅูู ุฑุฆูุณู ุขุฎุฑ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู.  ููููู ููุฑ ุจุทุฑููุฉ ุชูุชูู ุจูุง ุงูุชุบููุฑุงุช ูู ุงูููู ุงููุฑุชุจุทุฉ ุฅูู ุนูุตุฑ ุฑุฆูุณู ูุนูู: ูุชูุฉ ูุงุญุฏุฉ ูู ุงููููุฉ ุฐูุจุช ุฅูู ุฑุฆูุณูุฉ ูุงุญุฏุฉ ุ ูุชูุฉ ุฃุฎุฑู ุฅูู ุฑุฆูุณูุฉ ุฃุฎุฑู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุฅุฑุณุงู ุนูููุงุช ุงููุฑุงุกุฉ ุฅูู ุฃู ุนูุฏุฉ ูู ุงููุชูุฉ.  ููุง ุชูุณู ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ุงููุชุฒุงูู: ุฅุฐุง ููุช ุจุงูุชุณุฌูู ุนูู ููุณ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุ ููุฏ ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุงููุฑุงุกุฉ ููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/de/cq/wv/decqwvuzuaz-yn6t7fbyq2o2sv4.png" width="500"></div></li><li style=";text-align:right;direction:rtl">  <b>ุงูุชุฑุชูุจ ุงูููุทูู ููุนูููุงุช</b> .  ุงูุชุฑุถ ุฃูู ููููุง ูุธุฑูู ุงููุดููุฉ ุ ููููู ุชุญุฏูุฏ ุฃููููุฉ ุงูุนูููุฉ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู.  ูู ุ ุฃู ุถุน ุทุงุจุนูุง ุฒููููุง ุ ุฃู ุฅุตุฏุงุฑูุง ุขุฎุฑ ุ ุฃู ุชุณููุฉ ุฃุฎุฑู ุชุณูุญ ููุง ุจููู ุงูุนูููุฉ ุงูุชู ุญุฏุซุช ูุนูููุง ูู ููุช ุณุงุจู.  ููุฐุง ูู ุ ูุญู ูุชุญุฏุซ ุนู ูุตุฏุฑ ุฎุงุฑุฌู ููุทูุจ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/h8/pt/zl/h8ptzlm1ieiugdnjr66ubi9pxwq.png" width="500"></div><br>  ูุญุชูู <code>before_replace</code> ูุดุบู <code>before_replace</code> ุงูุฐู ูููู ุชูููุฐู ุฃุซูุงุก ุงููุณุฎ ุงููุชูุงุซู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุณูุง ูููุฏูู ุจุงูุญุงุฌุฉ ุฅูู ุชูุฌูู ุงูุทูุจุงุช ุ ูููููุง ุฅุฑุณุงููุง ุฅูู ุฃู ููุงู ูุฑูุฏ.  ูููู ุนูุฏ ุฅุฌุฑุงุก ุงููุณุฎ ุงููุชูุงุซู ุนูุฏ ุฅุฏุฎุงู ุฏูู ุงูุจูุงูุงุช ุ ูุฏููุง ูุญูุฒ.  ููุฑุฃ ุงูุฎุท ุงููุฑุณู ูููุงุฑูู ูุน ุงูุฎุท ุงูุฐู ุชู ุชุฎุฒููู ุจุงููุนู ุ ูููุฑุฑ ุฃู ูู ุงูุฎุทูุท ูู ุฃููููุฉ ุฃุนูู.  ุฃู ุฃู ุงููุดุบู ุฅูุง ูุชุฌุงูู ุทูุจ ุงููุณุฎ ุงููุชูุงุซู ุฃู ูุทุจูู ุ ุฑุจูุง ูุน ุงูุชุนุฏููุงุช ุงููุทููุจุฉ.  ูุญู ูุทุจู ูุฐุง ุงูููุฌ ุจุงููุนู ุ ุนูู ุงูุฑุบู ูู ุฃู ูู ุนููุจู ุฃูุถูุง.  ุฃููุงู ุ ุชุญุชุงุฌ ุฅูู ูุตุฏุฑ ุณุงุนุฉ ุฎุงุฑุฌู.  ูููุชุฑุถ ุฃู ุงููุดุบู ูู ุตุงููู ุงููุงุชู ุงููุญููู ูููู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงููุดุชุฑู.  ุจุงููุณุจุฉ ุฅูู ูุฐู ุงูุนูููุงุช ุ ููููู ุงุณุชุฎุฏุงู ุงูููุช ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจุงููุดุบู ุ ูุฃูู ูู ุบูุฑ ุงููุญุชูู ุฃู ูููู ุงูุนุฏูุฏ ูู ุงููุดุบููู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ูุดุชุฑู ูุงุญุฏ ูู ููุณ ุงูููุช.  ูููู ุฃู ุชุฃุชู ุงูุนูููุงุช ุจุทุฑู ูุฎุชููุฉ ุ ูููู ุฅุฐุง ูุงู ุจุงูุฅููุงู ุชุนููู ูุณุฎุฉ ูุนููุฉ ููู ูููุง ุ ูุนูุฏ ุงููุฑูุฑ ุนุจุฑ ุงููุดุบูุงุช ุ ุชุจูู ููุท ุชูู ุฐุงุช ุงูุตูุฉ. <br><br>  ุงูุนูุจ ุงูุซุงูู ูู ุงูุทุฑููุฉ: ุจูุง ุฃู ุงููุดุบู ูุชู ุชุทุจููู ุนูู ูู ุฏูุชุง ุชุฃุชู ุจุงููุณุฎ ุงููุชูุงุซู ููู ุทูุจ ุ ูุฅู ูุฐุง ูุฎูู ุญูููุฉ ุญุณุงุจูุฉ ุฅุถุงููุฉ.  ูููู ุจุนุฏ ุฐูู ุณูููู ูุฏููุง ูุณุฎุฉ ูุชุณูุฉ ูู ุงูุจูุงูุงุช ุนูู ูุทุงู ุงููุชูุฉ. </li></ul><br><h2 style=";text-align:right;direction:rtl">  ูุฒุงููุฉ </h2><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jr/1n/db/jr1ndb23coit6rz1qeblip_tpy0.png" width="500"></div><br>  ุงููุณุฎ ุงููุชูุงุซู ุงูุฎุงุต ุจูุง ุบูุฑ ูุชุฒุงูู ุ ุจูุนูู ุฃูู ูู ุฎูุงู ุชูููุฐ ุงูุงูุชุฒุงู ุ ูุง ุชุนุฑู ูุง ุฅุฐุง ูุงูุช ูุฐู ุงูุจูุงูุงุช ููุฌูุฏุฉ ุจุงููุนู ุนูู ุจุนุถ ุนูุฏุฉ ูุธุงู ุงููุฌููุนุฉ ุงูุฃุฎุฑู.  ุฅุฐุง ููุช ุจุฅุฌุฑุงุก ุงูุชุฒุงู ุฑุฆูุณู ุ ุชู ุชุฃููุฏ ุฐูู ูู ุ ูุชูููุช ุนู ุงูุนูู ูุณุจุจ ูุง ุนูู ุงูููุฑ ุ ููุง ููููู ุงูุชุฃูุฏ ูู ุญูุธ ุงูุจูุงูุงุช ูู ููุงู ุขุฎุฑ.  ูุญู ูุฐู ุงููุดููุฉ ุ ูุญุชูู ุจุฑูุชูููู ุงููุณุฎ ุงููุชูุงุซู Tarantool ุนูู ACK.  ูู ุณูุฏ ูุญูู ุงููุนุฑูุฉ ุนู ุขุฎุฑ ACK ุฌุงุก ูู ูู ุนุจุฏ. <br><br>  ูุง ูู ACKุ  ุนูุฏูุง ูุชููู ุงูุนุจุฏ ุงูุฏูุชุง ุ ุงูุชู ุชู ุชูููุฒูุง ุจูุงุณุทุฉ lsn ุงูุฑุฆูุณู ููุนุฑููุง ุ ูุฅูู ุงุณุชุฌุงุจุฉ ูุฐูู ูุฑุณู ุญุฒูุฉ ACK ุฎุงุตุฉ ุ ุญูุซ ูุญุฒู vclock ุงููุญูู ุจุนุฏ ุชุทุจูู ูุฐู ุงูุนูููุฉ.  ุฏุนููุง ูุฑู ููู ูููู ููุฐุง ุงูุนูู. <br><br>  ูุฏููุง ุณูุฏ ุงูุฐู ุฃุฌุฑู 4 ุนูููุงุช ูู ููุณู.  ูููุชุฑุถ ุฃูู ูู ููุช ูุง ุชููู ุงูุนุจุฏ ุงูุฑููู ุงูุฃุณุทุฑ ุงูุซูุงุซุฉ ุงูุฃููู ูุฒุงุฏ ุนุฏุฏ vclock ุฅูู {3.0}. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/oy/iw/y1/oyiwy1eifo7_jfsb9ylvi1wkija.png" width="500"></div><br>  ACK ูู ูุญู ุจุนุฏ.  ุจุนุฏ ุชููู ูุฐู ุงูุฃุณุทุฑ ุงูุซูุงุซุฉ ุ ูุฑุณู ุงูุนุจุฏ ุญุฒูุฉ ACK ุงูุชู ูุงู ุจุชุซุจูุชูุง ูู ุงูููุช ุงูุฐู ุชู ุฅุฑุณุงู ุงูุญุฒูุฉ ุฅููู.  ุงุณูุญ ููุณูุฏ ุงูุฑููู ุจุฅุฑุณุงู ุณุทุฑ ุขุฎุฑ ูู ููุณ ุงููุชุฑุฉ ุงูุฒูููุฉ ุ ุฃู ุฃู vclock ุงูุฎุงุต ุจุงูุนุจุฏ ูุฏ ุฒุงุฏ.  ุจูุงุกู ุนูู ุฐูู ุ ูุนุฑู ุงูุณูุฏ ุฑูู 1 ุจุงูุชุฃููุฏ ุฃู ุงูุนูููุงุช ุงูุซูุงุซ ุงูุฃููู ุงูุชู ูุงู ุจูุง ูุฏ ุชู ุชุทุจูููุง ุจุงููุนู ุนูู ูุฐุง ุงูุนุจุฏ.  ูุชู ุชุฎุฒูู ูุฐู ุงูุญุงูุงุช ูุฌููุน ุงูุนุจูุฏ ุงูุฐูู ูุนูููู ูุนูู ุ ููู ูุณุชูููู ุชูุงููุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/u1/rx/va/u1rxvazmmssfoizpfecbwf3ceas.png" width="500"></div><br>  ููู ุงูููุงูุฉ ุ ูุณุชุฌูุจ ุงูุนุจุฏ ุจุญุฒูุฉ ACK ุงูุฑุงุจุนุฉ.  ุจุนุฏ ุฐูู ุ ูุนูู ุงูุณูุฏ ุฃู ุงูุฑููู ูุชุฒุงูู ูุนู. <br><br>  ูููู ุงุณุชุฎุฏุงู ูุฐู ุงูุขููุฉ ูู ุฑูุฒ ุงูุชุทุจูู.  ุนูุฏูุง ุชููู ุจุฅุฌุฑุงุก ุนูููุฉ ุ ูุฃูุช ูุง ุชุชุนุฑู ุนูู ุงูููุฑ ุนูู ุงููุณุชุฎุฏู ุ ููููู ุชุชุตู ุฃููุงู ุจูุธููุฉ ุฎุงุตุฉ.  ููุชุธุฑ ุฃู ูููู ุงูุนุจุฏ lsn ุงููุนุฑูู ููุณูุฏ ูุณุงููุงู ูู lsn ุณูุฏู ูู ููุช ุงูุชูุงู ุงูุงูุชุฒุงู.  ูุฐูู ูุง ุชุญุชุงุฌ ุฅูู ุงูุงูุชุธุงุฑ ููุชุฒุงูู ุงููุงูู ุ ููุท ุงูุชุธุฑ ุงููุญุธุฉ ุงููุฐููุฑุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/1-/oe/93/1-oe930isjznmsurqj314c2-gue.png" width="500"></div><br>  ูููุชุฑุถ ุฃู ููุงููุชูุง ุงูุฃููู ุบูุฑุช ุซูุงุซุฉ ุฃุณุทุฑ ุ ูุฃู ุงูููุงููุฉ ุงูุซุงููุฉ ุบูุฑุช ุฃุญุฏูุง.  ุจุนุฏ ุงูููุงููุฉ ุงูุฃููู ุ ุชุฑูุฏ ุงูุชุฃูุฏ ูู ูุฒุงููุฉ ุงูุจูุงูุงุช.  ุงูุญุงูุฉ ุงูููุถุญุฉ ุฃุนูุงู ุชุนูู ุจุงููุนู ุฃู ุงูููุงููุฉ ุงูุฃููู ูุงูุช ูุชุฒุงููุฉ ุนูู ุนุจุฏ ูุงุญุฏ ุนูู ุงูุฃูู. <br><br>  ุฃูููุง ุชุจุญุซ ุจุงูุถุจุท ุนู ูุนูููุงุช ุญูู ูุฐุง ุงูููุถูุน ุ ุณููุธุฑ ูู ุงููุณู ุงูุชุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฑุตุฏ </h2><br>  ุนูุฏูุง ูููู ุงููุณุฎ ุงููุชูุงุซู ูุชุฒุงูููุง ุ ุชููู ุงููุฑุงูุจุฉ ุจุณูุทุฉ ุฌุฏูุง: ุฅุฐุง ุชููู ุ ูุชู ุฅุตุฏุงุฑ ุงูุฃุฎุทุงุก ูุนูููุงุชู.  ูุฅุฐุง ูุงู ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ูุชุฒุงูู ุ ูุตุจุญ ุงููููู ูุฑุจููุง.  ุณูุฏ ูุฌูุจู ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูุฃููุง ุชุนูู ุ ููุจูู ุ ููุชุจ.  ูููู ูู ุงูููุช ููุณู ุ ูุฅู ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ูุฏ ูุงุชุช ุ ูุงูุจูุงูุงุช ูุง ุชุญุชูู ุนูู ุชูุฑุงุฑ ุ ูุฅุฐุง ููุฏุช ุงูุณูุฏ ุ ูุณูู ุชููุฏ ุงูุจูุงูุงุช.  ูุฐูู ุ ุฃุฑูุฏ ุญููุง ูุฑุงูุจุฉ ุงููุชูุฉ ุ ูููู ูุง ูุญุฏุซ ูุน ุงููุณุฎ ุงููุชูุงุซู ุบูุฑ ุงููุชุฒุงูู ุ ุญูุซ ุชูุฌุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ุ ูู ุงูุญุงูุฉ ุงูุชู ุชููู ูููุง. <br><br>  ูููุฑุงูุจุฉ ุงูุฃุณุงุณูุฉ ุ ูุญุชูู Tarantool ุนูู ููุงู box.info.  ูุฌุฏุฑ ุงูุงุชุตุงู ุจู ูู ูุญุฏุฉ ุงูุชุญูู ุ ุญูุซ ุณุชุฑู ุจูุงูุงุช ูุซูุฑุฉ ููุงูุชูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">id: 1 uuid: c35b285c-c5b1-4bbe-83b1-b825eb594aa4 lsn : 5 vclock : {2: 1, 1: 5} replication : 1: id: 1 uuid : c35b285c -c5b1 -4 bbe -83b1 - b825eb594aa4 lsn : 5 2: id: 2 uuid : 37 b12cb7 -d324 -4 d75 -b428 - cde92c18e708 lsn : 1 upstream : status : follow idle : 0.30358312401222 peer : lag: 3.6001205444336 e -05 downstream : vclock : {2: 1, 1: 5}</code> </pre> <br>  ุงููุชุฑู ุงูุฃูุซุฑ ุฃูููุฉ ูู ูุนุฑู <code>id</code> .  ูู ูุฐู ุงูุญุงูุฉ ุ 1 ูุนูู ุฃูู ุณูุชู ุชุฎุฒูู lsn ูุฐุง ุงููุนูู ูู ุงูููุถุน ุงูุฃูู ูู ูู vclock.  ุดูุก ูููุฏ ุฌุฏุง.  ุฅุฐุง ูุงู ูุฏูู ุชุนุงุฑุถ ูุน JOIN ุ ูููููู ุงูุชูููุฒ ุจูู ูุนูู ุฑุฆูุณู ูุขุฎุฑ ูู ุฎูุงู ูุนุฑูุงุช ูุฑูุฏุฉ.  ุฃูุถุง ุ ุงููููุงุช ุงููุญููุฉ ุชุดูู ูููุงุช ูุซู lsn.  ูุฐุง ูู ุฑูู ุงูุณุทุฑ ุงูุฃุฎูุฑ ุงูุฐู ุชู ุชูููุฐู ุจูุงุณุทุฉ ูุฐุง ุงูุฃุณุชุงุฐ ููุชุงุจุชู ูู ุณุฌูู.  ูู ูุซุงููุง ุ ุฃุฌุฑู ุงูุณูุฏ ุงูุฃูู ุฎูุณ ุนูููุงุช.  Vclock ูู ุญุงูุฉ ุงูุนูููุงุช ุงูุชู ูุนุฑู ุฃูู ูุฏู ุทูุจูุง ูููุณู.  ูุฃุฎูุฑุงู ุ ุจุงููุณุจุฉ ููุณูุฏ ุฑูู 2 ุ ุฃุฌุฑู ุฅุญุฏู ุนูููุงุช ุงููุณุฎ ุงููุชูุงุซู ูู. <br><br>  ุจุนุฏ ูุคุดุฑุงุช ุงูุญุงูุฉ ุงููุญููุฉ ุ ููููู ูุนุฑูุฉ ูุง ูุนุฑูู ูุฐุง ุงููุซูู ุญูู ุญุงูุฉ ุงููุณุฎ ุงููุชูุงุซู ูููุชูุฉ ุ ูููุฐุง ุ ููุฌุฏ ูุณู <code>replication</code> .  ูุณุฑุฏ ูุงูุฉ ุงูุนูุฏ ุงููุชูุฉ ุงููุนุฑููุฉ ูููุซูู ุ ุจูุง ูู ุฐูู ููุณู.  ุงูุนูุฏุฉ ุงูุฃููู ููุง ุงููุนุฑู 1 ุ ูุนุฑู ูุชูุงูู ูุน ุงููุซูู ุงูุญุงูู.  ุงูุนูุฏุฉ ุงูุซุงููุฉ ููุง ุงููุนุฑู 2 ุ lsn 1 ููุง ูุชูุงูู ูุน lsn ุงูููุชูุจ ุฅูู vclock.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฅููุง ูุนุชุจุฑ ุงููุณุฎ ุงููุชูุงุซู ุงูุฑุฆูุณู-ุงูุฑุฆูุณู ุ ุนูุฏูุง ูููู master ุฑูู 1 ูู ููุง ุฑุฆูุณู ููุนูุฏุฉ ุงูุซุงููุฉ ูู ุงููุชูุฉ ูุงูุนุจุฏ ุงูุฎุงุต ุจู ุ ุฃู ูุชุจุนู. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌููุฑ <code>upstream</code> .  ุชุนูู ุงูุณูุฉ <code>status follow</code> ุฃู master 1 ูุชุจุน master 2. Idle ูู ุงูููุช ุงูุฐู ุงููุถู ูุญูููุง ููุฐ ุขุฎุฑ ุชูุงุนู ูุน ูุฐุง ุงููุนูู.  ูุญู ูุง ูุฑุณู ุฏูููุง ูุณุชูุฑูุง ุ ูุฑุณู master ุฏูุชุง ููุท ุนูุฏ ุญุฏูุซ ุชุบููุฑุงุช ุนูููุง.  ุนูุฏูุง ูุฑุณู ููุนูุง ูู ACK ุ ูุฅููุง ูุชูุงุตู ุฃูุถูุง.  ูู ุงููุงุถุญ ุ ุฅุฐุง ุฃุตุจุญ ุงูุฎููู ูุจูุฑูุง (ุจุงูุซูุงูู ูุงูุฏูุงุฆู ูุงูุณุงุนุงุช) ุ ูููุงู ุฎุทุฃ ูุง. </li><li style=";text-align:right;direction:rtl">  ุณูุฉ <code>lag</code> .  ุชุญุฏุซูุง ุนู ุชุฃุฎุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู lsn <code>server id</code> ูุชู ุชูููุฒ ูู ุนูููุฉ ูู ุงูุณุฌู ุฃูุถูุง ุจุทุงุจุน ุฒููู - ุจุงูุชูููุช ุงููุญูู ุงูุฐู ุชู ุฎูุงูู ุชุณุฌูู ูุฐู ุงูุนูููุฉ ูู vclock ุนูู ุงูุฑุฆูุณู ุงูุฐู ูุงู ุจุชูููุฐูุง.  ูู ุงูููุช ููุณู ุ ููุงุฑู Slave ุทุงุจุนู ุงูุฒููู ุงููุญูู ูุน ุงูุทุงุจุน ุงูุฒููู ููุฏูุชุง ุงูุฐู ุชููุงู.  ุงูุทูุงุจุน ุงูุฒูููุฉ ุงูุญุงููุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ูุฑุฏุช ููุฎุท ุงูุฃุฎูุฑ ุ ูุนุฑุถ ุงูุฑููู ูู ุงููุฑุงูุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุงูุณูุฉ <code>downstream</code> .  ุฅูู ููุถุญ ูุง ูุนุฑูู ุงูุณูุฏ ุนู ุนุจุฏู ุงูุฎุงุต.  ูุฐุง ูู ACK ุงูุฐู ูุฑุณูู ุงูุนุจุฏ ุฅููู.  <code>downstream</code> ุงูููุถุญ ุฃุนูุงู ูุนูู ุฃู ุขุฎุฑ ูุฑุฉ ุฃุฑุณู ูููุง ุนุจุฏู ุ ุงููููุจ ุณูุฏูุง ูู ุงูุฑูู 2 ุ ุตูุชู ุ ุงูุฐู ูุงู 5.1.  ูุนูู ูุฐุง ุงูุณูุฏ ุฃู ุฌููุน ุฎุทูุทู ุงูุฎูุณุฉ ุ ุงูุชู ุฃููููุง ูู ููุงูู ุ ุบุงุฏุฑุช ุฅูู ุนูุฏุฉ ุฃุฎุฑู. </li></ul><br><h2 style=";text-align:right;direction:rtl">  ุฎุณุงุฑุฉ XLOG </h2><br>  ุงููุธุฑ ูู ุงููุถุน ูุน ุณููุท ุงูุณูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">lsn : 0 id: 3 replication : 1: &lt;...&gt; upstream : status: disconnected peer : lag: 3.9100646972656 e -05 idle: 1602.836148153 message: connect, called on fd 13, aka [::1]:37960 2: &lt;...&gt; upstream : status : follow idle : 0.65611373598222 peer : lag: 1.9550323486328 e -05 3: &lt;...&gt; vclock : {2: 2, 1: 5}</code> </pre> <br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุณุชุชุบูุฑ ุงูุญุงูุฉ.  <code>Lag</code> ูุง ูุชุบูุฑ ูุฃู ุงูุฎุท ุงูุฐู ุทุจููุงู ุธู ููุง ูู ุ ูู ูุญุตู ุนูู ุฃู ุฎุทูุท ุฌุฏูุฏุฉ.  ูู ููุณ ุงูููุช ุ ูููู <code>idle</code> ุ ูู ูุฐู ุงูุญุงูุฉ ูููู ูุณุงููุงู ุจุงููุนู 1602 ุซุงููุฉ ุ ููุฏ ูุงุช ุงููุซูุฑ ูู ุงูููุช.  ููุญู ูุฑู ุจุนุถ ุฑุณุงุฆู ุงูุฎุทุฃ: ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุดุจูุฉ. <br><br>  ูุง ูุฌุจ ุงูููุงู ุจู ูู ูุถุน ููุงุซูุ  ููุฏ ุงูุชุดููุง ูุง ุญุฏุซ ูุน ุณูุฏูุง ุ ูุฌุฐุจ ุงููุณุคูู ุ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุ ูุฑูุน ุงูุนูุฏุฉ.  ูุชู ุฅุฌุฑุงุก ุงููุณุฎ ุงููุชูุงุซู ุงููุชูุฑุฑ ุ ูุนูุฏูุง ูุฏุฎู master ุงููุธุงู ุ ูุฅููุง ูุชุตู ุจู ุ ููุดุชุฑู ูู XLOG ุ ููุญุตู ุนููู ูุฃููุณูุง ูุชุณุชูุฑ ุงููุฌููุนุฉ. <br><br>  ูููู ููุงู ูุดููุฉ ูุงุญุฏุฉ ุตุบูุฑุฉ.  ุชุฎูู ุฃู ูุฏููุง ุนุจุฏูุง ุ ูุงูุฐู ูุณุจุจ ูุง ูุงู ูุบูููุง ููุงู ุบุงุฆุจูุง ููุชุฑุฉ ุทูููุฉ.  ุฎูุงู ูุฐุง ุงูููุช ุ ูุงู ุงููุนูู ุ ุงูุฐู ูุงู ุจุฎุฏูุชู ุ ุจุญุฐู XLOG.  ุนูู ุณุจูู ุงููุซุงู ุ ุงููุฑุต ููุชูุฆ ุ ูุงู ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุจุฌูุน ุงูุณุฌูุงุช.  ููู ูููู ูุนุจุฏ ุนุงุฆุฏ ุฃู ูุณุชูุฑุ  ูุง ููุฑ  ูุฃู ุงูุณุฌูุงุช ุงูุชู ูุญุชุงุฌูุง ูุชุทุจูู ููุชู ูุฒุงููุชู ูุน ุงููุชูุฉ ูุฏ ููุช ููุง ููุฌุฏ ููุงู ูุฃุฎุฐ ูููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุฑู ุฎุทุฃู ูุซูุฑูุง ููุงูุชูุงู: ูู ุชุนุฏ ุงูุญุงูุฉ ุบูุฑ <code>disconnected</code> ุ ูููู ุชู <code>stopped</code> .  ูุฑุณุงูุฉ ูุญุฏุฏุฉ: ูุง ููุฌุฏ ููู ุณุฌู ูุทุงุจูุฉ ูุซู LSN. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">id: 3 replication : 1: &lt;...&gt; upstream : peer : status: stopped lag : 0.0001683235168457 idle : 9.4331328970147 message: 'Missing .xlog file between LSN 7 1: 5, 2: 2 and 8 1: 6, 2: 2' 2: &lt;...&gt; 3: &lt;...&gt; vclock : {2: 2, 1: 5}</code> </pre> <br>  ูู ุงููุงูุน ุ ูุฅู ุงููุถุน ููุณ ูุงุชูุง ุฏุงุฆูุง.  ูููุชุฑุถ ุฃู ูุฏููุง ุฃูุซุฑ ูู ุณูุฏูู ุ ููุง ุชุฒุงู ูุฐู ุงูุณุฌูุงุช ูุญููุธุฉ ูุจุนุถูุง.  ูุญู ูุตุจูู ุนูู ุฌููุน ุงูุฃุณูุงุฏ ูู ููุช ูุงุญุฏ ุ ููุง ูุฎุฒููู ุนูู ูุงุญุฏ ููุท.  ุซู ุงุชุถุญ ุฃู ูุฐู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ุงูุชู ุชุชุตู ุจุฌููุน ุงูุฃุณุงุชุฐุฉ ุงูุฐูู ุชุนุฑููู ุ ุนูู ุจุนุถูุง ุณุชุฌุฏ ุงูุณุฌูุงุช ุงูุชู ุชุญุชุงุฌูุง.  ุณุชููู ุจุชูููุฐ ุฌููุน ูุฐู ุงูุนูููุงุช ูู ุงูููุฒู ุ ูุณุชุฒุฏุงุฏ ุณุฑุนุฉ ุงูููุฏูู ุงูุฎุงุตุฉ ุจูุง ุ ูุณุชุตู ุฅูู ุงููุถุน ุงูุญุงูู ูููุฌููุนุฉ.  ุจุนุฏ ุฐูู ุ ููููู ูุญุงููุฉ ุฅุนุงุฏุฉ ุงูุงุชุตุงู. <br><br>  ุฅุฐุง ูู ุชูู ููุงู ุณุฌูุงุช ุนูู ุงูุฅุทูุงู ุ ููุง ูููููุง ูุชุงุจุนุฉ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ.  ูุจูู ููุท ูุฅุนุงุฏุฉ ุชููุฆุฉ.  ุชุฐูุฑ ูุนุฑููุง ุงููุฑูุฏ ุ ููููู ูุชุงุจุชู ุนูู ูุทุนุฉ ูู ุงููุฑู ุฃู ูู ููู.  ุซู ูููู ุจุชูุธูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูุญูููุง: ุงุญุฐู ุตูุฑูุง ูุณุฌูุงุชูุง ููุง ุฅูู ุฐูู.  ุจุนุฏ ุฐูู ุ ุฃุนุฏ ุชูุตูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุจููุณ UUID ุงูุฐู ูุงูุช ุจู. <br><br>  ุชุฌุฑูุฏ ุงููุชูุฉ ุฃู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู UUID <code>box.cfg{instance_uuid =  uuid}</code> ุงููุชูุงุซูุฉ ุงูุฌุฏูุฏุฉ: <code>box.cfg{instance_uuid =  uuid}</code> . <br><br>   ,   .   UUID    space cluster,    .       ,    .    UUID,  master,     JOIN,     ,       UUID,   ,    . <br><br>   ,   UUID ,     space cluster      ,    .       .  ,  ,          . <br><br><h2 style=";text-align:right;direction:rtl">  </h2><br> ,  -           .   ,        .    ,   ,      . <br><br>  Tarantool   . <br><br> <code>replication_connect_quorum: 2 <br> replication_connect_timeout: 30 <br> replication_sync_lag: 0.1</code> <br> <br> ,   , ,            ,   ,  ,  master'     0,1 .    30 .     ,   .   0,1 .  ,      . <br><br><h2 style=";text-align:right;direction:rtl"> Keep alive </h2><br>  ,      ip tables drop.  ,    -  30   30 ,    ,      .     ,   keep alive-. <br><br>  keep alive-  : <code>box.cfg.replication_timeout</code> . <br><br>      master'      ,    keep alive-, ,   .    4  master  slave   keep alive-   ,         .             master'. <br><br><h2 style=";text-align:right;direction:rtl">    </h2><br>  ,      .    6 ,      5 .     10 ,    9 .     . <br><br>   ,    ,     .       ,         master',   .  -          .   . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pp/wv/qo/ppwvqoys4enyzstnxbfp0mtkug4.png" width="500"></div><br>     6 ,       3.     ,    .  ,     5 ,      3 . <br><br><h2 style=";text-align:right;direction:rtl">     </h2><br>   ,       : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  . </li><li style=";text-align:right;direction:rtl">  ,       space cluster,        .          . </li></ul><br>   ,    Telegram-,  .          ,     GitHub,   . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439514/">https://habr.com/ru/post/ar439514/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439504/index.html">ูู ูุญุชุงุฌ ูุฑููู ุฅูู ูููุฏุณ ุจูุงูุงุชุ</a></li>
<li><a href="../ar439506/index.html">9 ุจุฏุงุฆู ููุฑูู ุณูุก (ููุท ุงูุชุตููู)</a></li>
<li><a href="../ar439508/index.html">Mitap ุนูู ุชุทููุฑ ุงููุตุฏุฑ ุงูููุชูุญ ูู ููุณูู</a></li>
<li><a href="../ar439510/index.html">ูุธุงู ุงูุชุญูู ุงูููุฒุน ุนุงูู ุงูุชุญููู ููุญุทุฉ ุงูุทุงูุฉ ุงูููููุฉ ุงูุญุฏูุซุฉ</a></li>
<li><a href="../ar439512/index.html">ุนุตุฑ ุงูุฏููุงุตูุฑุงุช ุฃู ุฅุนุงุฏุฉ ุงูุชุฃููู ุงูุชู ุชู ุงูุชุญูู ูููุง ูุงููููุงุ</a></li>
<li><a href="../ar439516/index.html">00110001 00110100 00101110 00110000 00110010</a></li>
<li><a href="../ar439518/index.html">GeekUniversity ูุญุฏุซ ุจุฑูุงูุฌ ุชุฏุฑูุจ ุชุทููุฑ ุงูููุจ: ุงููุฒูุฏ ูู ููุงุฑุณุงุช ูุงุฏู ุงูุชุณููู ูุงูุญุงูุงุช</a></li>
<li><a href="../ar439520/index.html">ุฅุซุจุงุช ุงูููููุฉ: ูููุฐุฌ ุฃุนูุงู ุฌุฏูุฏ ูู ุนุงู 2019ุ</a></li>
<li><a href="../ar439522/index.html">DNS rebinding ูู 2k19 ุ ุฃู ููููุฉ ุงูุนุฑู ุญูุง ูู ุฎูุงู ุฒูุงุฑุฉ ูููุน ุงูุงุจุงุญูุฉ</a></li>
<li><a href="../ar439524/index.html">Fortnite ูู ุงููุณุชูุจู ุ ูููู ูุฃุณุจุงุจ ุบูุฑ ูุชููุนุฉ ุฅูู ุญุฏ ูุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>