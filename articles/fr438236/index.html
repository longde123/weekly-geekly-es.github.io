<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÄ üëö üë©üèæ‚Äç‚öïÔ∏è Confluence pour une base de connaissances publique: changer la conception et mettre en place la s√©paration linguistique üîà üñï üêç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous avons six produits utilis√©s en Russie et √† l'√©tranger. Cela signifie que la documentation pour eux doit √™tre au m√™me endroit, mais divis√©e par pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confluence pour une base de connaissances publique: changer la conception et mettre en place la s√©paration linguistique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/438236/">  Nous avons six produits utilis√©s en Russie et √† l'√©tranger.  Cela signifie que la documentation pour eux doit √™tre au m√™me endroit, mais divis√©e par produits et langues. <br><br>  Nous avions l'habitude d'utiliser MediaWiki, mais au fil du temps, il est devenu obsol√®te.  De la plateforme, nous nous attendions √©galement √† une bonne mise en page des articles, une recherche flexible et un √©diteur de texte interne.  Confluence a √©t√© choisie comme alternative. <br><br>  Dans le processus, il est devenu clair que les capacit√©s de cette plate-forme pr√™te √† l'emploi ne sont pas non plus suffisantes pour toutes nos t√¢ches.  J'ai d√ª acheter le plugin Scroll Viewport et passer du temps √† le configurer. <br><br>  Vous pouvez voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce qui s'est pass√© √† la fin</a> , et je vais vous dire comment j'ai chang√© la conception, mis en place la s√©paration linguistique, la recherche interne et l'indexation. <br><br><img src="https://habrastorage.org/webt/az/dn/d3/azdnd3muoqlkshm_d-jppor95yw.jpeg"><br><a name="habracut"></a><br><h2>  Changer le design </h2><br>  La soci√©t√© a commenc√© √† d√©placer la documentation du moteur MediaWiki vers Confluence il y a un an.  Mais quand j'ai commenc√© le projet, Confluence avait l'air standard, le d√©veloppeur pr√©c√©dent a ajout√© notre logo et a cach√© des √©l√©ments inutiles pour un utilisateur anonyme.  Le lancement devait apporter de la documentation √† notre style.  Les concepteurs ont pr√©par√© des plans et j'ai d√ª les inventer. <br><br>  Mais le fait est que Confluence lui-m√™me donne tr√®s peu de flexibilit√© dans les styles et les scripts, et les possibilit√©s pr√™tes √† l'emploi ne sont pas triviales √† comprendre et √† utiliser, et sont inhabituelles pour un d√©veloppeur Web. <br><br>  Je note que Confluence est une application Java et non un site Web avec le backend et le frontend habituels.  Dans la section Apparence, vous pouvez ajouter une feuille de style ou du HTML personnalis√©, mais cela ne suffit pas pour une refonte compl√®te.  Par cons√©quent, pour la mise en page, nous avons achet√© le plugin Scroll Viewport.  Et puis le plaisir a commenc√©. <br><br><h3>  Scroll Viewport Plugin </h3><br>  Scroll Viewport est un plugin pour Confluence, qui vous permet de cr√©er des th√®mes √† l'aide de l'√©diteur de code et du gestionnaire de fichiers familiers.  Avec lui, vous pouvez √©crire des styles, travailler avec des mod√®les de page, ajouter des images et personnaliser la recherche. <br><br>  Les th√®mes sont cr√©√©s pour les espaces.  Les espaces dans Confluence sont des entit√©s de contenu qui stockent des informations sur un seul projet.  Nous avons de l'espace pour les produits: ISPmanager, BILLmanager, etc., ainsi que pour la page principale.  L'espace a une cl√©, un titre, un certain nombre de param√®tres et, en fait, un th√®me. <br><br><h3>  Modification des th√®mes dans la fen√™tre de d√©filement: mise en page, styles et html </h3><br>  Commen√ßons √† explorer la fen√™tre de d√©filement.  Lorsque le plugin est install√© et activ√©, vous devez cliquer sur l'engrenage, puis - <b>Param√®tres de base</b> - section <b>Fen√™tre de d√©filement</b> - <b>Th√®mes</b> . <br><br>  S√©lectionnez, copiez ou cr√©ez un th√®me et cliquez sur <b>Modifier</b> .  L'√©diteur de th√®me Scroll Viewport s'ouvre. <br><br>  Veuillez noter que Scroll Viewport recommande de ne pas cr√©er un th√®me √† partir de z√©ro, mais de prendre le th√®me Scroll WebHelp comme base. <br><br><img src="https://habrastorage.org/webt/d-/cz/hl/d-czhlnbxkamowxin2rcflgywuq.png"><br>  <i>√âditeur de th√®me de la fen√™tre de d√©filement: √† gauche se trouve la structure du th√®me, en haut le nom du fichier, dans la partie principale les fichiers eux-m√™mes</i> <br><br>  Une fois le th√®me cr√©√©, vous pouvez commencer √† le configurer.  Nous allons configurer la mise en page et la structure des pages, ajouter des styles et des scripts, puis passer √† la modification de la mise en page HTML des √©l√©ments de contenu. <br><br><h3>  Balisage: √©ditez, ajoutez des classes et affichez le m√™me type d'√©l√©ments dans une boucle </h3><br>  <b>Structure de la page par type</b> <br><br>  √Ä la racine du sujet se trouvent les principaux mod√®les: page.vm, search.vm, error.vm, ainsi que l'image de couverture du th√®me thumbnail.png. <br><br>  Le mod√®le ¬´page.vm¬ª d√©finit la structure de toutes les pages du th√®me.  Ici, vous pouvez modifier le html et utiliser les variables d'espace r√©serv√© pour sp√©cifier o√π le contenu sera affich√©.  Les espaces r√©serv√©s se r√©f√®rent au contenu de l'espace ou aux donn√©es utilisateur (titre du mat√©riel, nom de l'espace, nom de l'auteur), leur liste compl√®te se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans le centre d'aide du d√©veloppeur Scroll Viewport</a> . <br><br>  ¬´Page.vm¬ª fait r√©f√©rence aux mod√®les qui se trouvent un niveau plus bas dans le dossier ¬´include¬ª et les encapsule dans des balises et des blocs.  Dans ce fichier (page.vm), nous assemblons la page en morceaux et compl√©tons le balisage avec tous les attributs n√©cessaires d'un document html.  C'est ici que nous pr√©cisons le doctype, prescrivons la t√™te et le corps. <br><br>  <b>√âl√©ments de page</b> <br><br>  Dans le dossier ¬´include¬ª se trouvent des morceaux de la page.  √Ä partir des noms de fichiers, vous pouvez deviner lequel est responsable de: <br><br><ul><li>  include-htmlhead.vm contient tout ce que nous indiquons habituellement dans la t√™te d'un document html: acc√®s aux feuilles de style, aux fichiers de polices, √† certains scripts, y compris les scripts Confluence et Scroll Viewport standard; </li><li>  include-headerbar.vm d√©finit la structure de l'en-t√™te; </li><li>  include-footer.vm d√©finit la structure du pied de page; </li><li>  include-content.vm d√©crit la structure du bloc de contenu principal; </li><li>  include-sidebar.vm d√©crit la disposition du menu lat√©ral, qui contient g√©n√©ralement une liste de tous les articles de l'espace. </li></ul><br>  La syntaxe du mod√®le de fen√™tre de d√©filement est facile √† comprendre.  Les op√©rations commencent par un treillis, tel que ¬´#if (condition)¬ª ou ¬´#foreach ($ language in $ languages.available)¬ª, et se terminent par ¬´#end¬ª, √† l'int√©rieur du corps de l'op√©rateur.  Tout le reste est des balises html. <br><br><h3>  Stylisation: ajoutez des styles, des images et des scripts </h3><br>  Dans le dossier ¬´assets¬ª, les fichiers js et css sont stock√©s.  Comme nous n'avons pas cr√©√© le th√®me √† partir de z√©ro, il contient d√©j√† des fichiers provenant des d√©veloppeurs de Scroll Viewport. <br><br>  Pour personnaliser les styles, il est pr√©f√©rable de cr√©er un nouveau fichier CSS et de l'inclure en t√™te du mod√®le de page.  Les fichiers qui commencent sur un th√®me contiennent des r√®gles de th√®me de la fen√™tre de d√©filement.  Ils doivent √™tre modifi√©s dans le cas o√π de nouveaux styles reposent sur la base.  Soyez prudent lorsque vous supprimez et ajoutez des r√®gles, rappelez-vous la hi√©rarchie des s√©lecteurs, cela peut vous aider. <br><br>  Dans ¬´actifs¬ª, j'ai √©galement ajout√© un dossier avec des images et un dossier avec des fichiers de polices.  Le gestionnaire de fichiers ne fonctionne pas parfaitement, vous ne pouvez pas ajouter de dossier au r√©pertoire souhait√©, j'ai donc d√ª tricher.  J'ai cr√©√© un dossier sur mon ordinateur, y ai ajout√© un fichier, puis l'ai charg√© dans le r√©pertoire souhait√© par glisser-d√©poser.  Une fois le dossier cr√©√©, il n'y a aucun probl√®me √† t√©l√©charger des fichiers. <br><br>  Lors de la cr√©ation d'un nouveau design, nous avons pris en compte les capacit√©s du plugin et nous sommes concentr√©s sur les sujets existants dans Scroll Viewport, donc √† l'int√©rieur des actifs / js, je me suis attard√© pendant un certain temps.  Apport√© de petites modifications aux fichiers de script existants et ajout√© des fichiers des biblioth√®ques n√©cessaires.  Si les modifications sont plus importantes, vous devrez traiter les scripts plus en d√©tail. <br><br><h3>  √âditeur de contenu HTML pour le contenu de l'article </h3><br>  Dans le processus de travail avec Scroll Viewport, il s'est av√©r√© que nous pouvons composer, mais pas tous.  Les autorisations de mod√®le de plugin se terminent par la variable $ page.renderContent.  Comment disposer les √©l√©ments avec les classes principales et les liens?  Pas clair.  O√π est le HTML?  Par d√©faut, il n'est pas l√†.  La variable nous indique que nous devons compl√©ter une partie de la mise en page directement sur la page de l'article, cependant, jusqu'√† pr√©sent, seul le texte peut y √™tre modifi√©, mais pas les balises. <br><br><img src="https://habrastorage.org/webt/qq/e2/89/qqe289edxae5x6nm8zelzi1mm9i.jpeg"><br><br>  Heureusement, vous pouvez toujours rechercher des plugins, et quelle chance, le bon a √©t√© trouv√© presque imm√©diatement.  Il s'agit de l'√©diteur de source de Confluence.  Apr√®s l'avoir install√©, vous pouvez √©galement dessiner le bon vieux hypertexte en mode d'√©dition d'article.  Enfin! <br><br><img src="https://habrastorage.org/webt/jq/wf/cz/jqwfczvsgt68h7zdrcydqmvipqu.png"><br>  <i>Plugin de l'√©diteur de source</i> <br><br>  Dans la fen√™tre de d√©filement, nous cr√©ons l'en-t√™te, la barre lat√©rale, le pied de page et d√©finissons les styles.  Nous imposons du contenu √† l'aide de l'√©diteur de source.  Au total, j'ai cr√©√© deux rubriques: pour les pages d'articles et pour la page de documentation principale. <br><br><h2>  Param√®tres d'espace d'affichage: appliquez le th√®me </h2><br>  Lorsqu'un th√®me est cr√©√©, il doit √™tre associ√© √† l'espace.  Pour ce faire, vous devez cr√©er une fen√™tre dans les param√®tres d'espace.  La fen√™tre est ce qui relie l'espace et le th√®me.  Ce n'est qu'en cr√©ant cette entit√© que vous pouvez appliquer des styles de th√®me √† l'espace. <br><br>  Entrez l'espace du produit souhait√©, ouvrez <b>Param√®tres d'espace - Modules compl√©mentaires</b> .  Ici, vous pouvez cr√©er et g√©rer Viewport: d√©finir des th√®mes, des types de contenu, des autorisations, un domaine et un chemin. <br><br><img src="https://habrastorage.org/webt/vo/jk/wb/vojkwbyn6kiqem-5ha0kxzyuh2w.png"><br>  <i>Un formulaire pour connecter l'espace √† un th√®me, cr√©er une fen√™tre</i> <br><br><h3>  Choisissez un sujet </h3><br>  <b>L'</b> onglet <b>Th√®mes</b> affiche tous les th√®mes cr√©√©s et un th√®me par d√©faut qui appara√Æt avec le plugin Scroll Viewport.  S√©lectionnez un th√®me et appliquez-le √† l'espace. <br><br>  L'onglet <b>Contenu</b> vous permet de s√©lectionner le type de contenu auquel le th√®me s'appliquera.  Cela nous int√©resse le moins, car la cl√© de l'espace est automatiquement r√©tract√©e. <br><br><h3>  D√©finir des adresses </h3><br>  Dans l'onglet <b>URL</b> , vous pouvez s√©lectionner le domaine et le chemin le long duquel l'espace s'ouvrira, et √©galement sp√©cifier la structure des adresses.  Il sera √©galement n√©cessaire de diviser la documentation en deux langues par langue. <br><br>  Il existe deux types de structure d'URL: <br><br><ul><li>  multi-niveaux - le chemin refl√®te la hi√©rarchie des articles spatiaux et des noms de page, </li><li>  un niveau - tous les articles sont disponibles au m√™me niveau avec des suffixes num√©riques </li></ul><br>  Avec les adresses de page, il y a une nuance.  Pour les articles dans diff√©rentes langues, Confluence g√©n√®re des URL diff√©remment.  En anglais, affiche le nom et en russe - un ensemble incoh√©rent de lettres, de caract√®res et de chiffres.  La fen√™tre de d√©filement vous permet de regrouper des adresses dans un seul formulaire.  Si vous choisissez une structure √† plusieurs niveaux, l'adresse des articles russes affichera le nom du texte translitt√©r√©. <br><br>  Mais gardez √† l'esprit que lorsque vous choisissez des URL √† plusieurs niveaux, l'URL d√©pendra du titre de l'article.  Le nom changera - l'adresse de l'article changera √©galement.  Si vous s√©lectionnez une structure √† un niveau, l'adresse sera moins lisible et compr√©hensible, mais ne d√©pendra plus du titre de la page. <br><br>  Nous avons choisi un type de structure √† plusieurs niveaux et des adresses lisibles, mais nous devrons suivre l'√©volution des titres d'articles et mettre en place des redirections dans le temps.  Et nous recherchons toujours l'option parfaite.  Nous utilisons √©galement des liens courts qui m√®nent toujours √† l'article et ne changent pas, un tel lien peut √™tre trouv√© dans la section <b>Informations de la page</b> . <br><br><h3>  Inclure le sujet </h3><br>  Dans l'onglet <b>Autorisations</b> , vous pouvez sp√©cifier quels utilisateurs pourront voir l'espace √† l'aide de la fen√™tre d'affichage. <br><br>  Pour que les utilisateurs anonymes ne voient la documentation que dans une conception donn√©e, vous devez cocher deux cases: <br><br><ul><li>  Restreindre l'acc√®s √† Confluence UI, </li><li>  Redirigez automatiquement les utilisateurs vers la fen√™tre d'affichage. </li></ul><br><img src="https://habrastorage.org/webt/h0/x8/v1/h0x8v1womjmfi9zevwhqssyntko.png"><br>  <i>Param√®tres d'affichage de l'espace dans l'onglet Autorisations</i> <br><br><h2>  Configurer la s√©paration linguistique </h2><br>  Nous avons de la documentation en anglais et en russe, nous devons donc ouvrir des espaces en russe sur le domaine .ru et en anglais sur .com. <br><br>  Scroll Viewport fournit de tels param√®tres, mais si vous entrez simplement un domaine diff√©rent du domaine principal dans l'onglet <b>URL</b> dans le champ <b>Nom de</b> domaine, les deux domaines ne fonctionneront pas.  Il s'agit d'une fonctionnalit√© du plugin Scroll Viewport. <br><br>  Il est n√©cessaire de configurer le proxy inverse pour que les demandes des utilisateurs soient transmises par Confluence et y soient r√©solues en deux domaines - voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'instruction Scroll Viewport</a> (configurations pour Nginx et TOMCAT).  Apr√®s cela, vous devez d√©sactiver le mode de co√©dition ou apporter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des modifications suppl√©mentaires</a> .  Vous pouvez maintenant sp√©cifier l'un des deux domaines dans les param√®tres de la fen√™tre. <br><br><h3>  Th√®mes pour diff√©rentes langues </h3><br>  L'application d'un th√®me √† des espaces dans une langue diff√©rente ne fonctionnera pas, car le th√®me comprend non seulement des styles, mais √©galement des mod√®les de page.  Cela signifie que la langue des √©l√©ments qui ne sont pas affich√©s en tant que variables ne change pas.  Par exemple, un espace r√©serv√© de texte dans la barre de recherche, des contacts dans le pied de page, etc. J'ai donc d√ª cr√©er des sujets distincts pour les espaces en russe et en anglais. <br><br>  En fait, je cr√©e des th√®mes qui sont identiques dans le style, mais les mod√®les pour eux sont diff√©rents, principalement en termes de texte.  C'est un exc√®s et une duplication, oui, mais je n'ai pas encore trouv√© d'autre moyen.  En outre, le sujet r√©glemente √©galement la recherche, et c'est un autre argument en faveur de la s√©paration par langue. <br><br>  En cons√©quence, j'ai eu quatre sujets: deux pour les pages principales en russe et en anglais, et deux autres pour les pages de contenu pour chaque langue. <br><br><h2>  Personnaliser la recherche sur le site </h2><br>  Les param√®tres de recherche sont configur√©s dans des fichiers du dossier ¬´include¬ª.  √Ä l'int√©rieur d'eux, nous d√©finissons les param√®tres de recherche: <br><br><ul><li>  include-quicksearch.vm est responsable du champ de recherche sur toutes les pages de contenu, </li><li>  include-search.vm d√©finit la structure des pages de r√©sultats de recherche. </li></ul><br><h3>  O√π chercher </h3><br>  Par d√©faut, la recherche ne fonctionne que sur l'espace actuel.  Par exemple, dans l'espace ISPmanager - uniquement sur les articles sur ISPmanager.  Si vous devez rechercher la liste des espaces, vous devez sp√©cifier leurs cl√©s dans les param√®tres de include-quicksearch.vm. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search"</span></span></span><span class="hljs-tag">&gt;</span></span> #set($search = "/search") #if ($stringUtils.equals(${viewport.link}, "/") == false) #set($search = "${viewport.link}/search") #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$!searchRequest.queryString"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Submit"</span></span></span><span class="hljs-tag">&gt;</span></span> ## --- START --- Scroll Versions and Scroll Translations Integration ------------------------------------------- #if ($versions || $variants || $languages) #if($versions) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:version-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$versions.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($variants) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"variant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:variant-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$variants.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($languages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"language"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-translations:language-key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$languages.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #end ## --- END ----------------------------------------------------------------------------------------------------- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <i>Formulaire de recherche d'espace individuel</i> <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search"</span></span></span><span class="hljs-tag">&gt;</span></span> #set($search = "/search") #if ($stringUtils.equals(${viewport.link}, "/") == false) #set($search = "${viewport.link}/search") #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$!searchRequest.queryString"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BILLmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMKVM"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMmgr5Cloud"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMmgr5OVZ"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DCImgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IPmgr5"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" ISPmgr5BUSINESS"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ISPmgr5Lite"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" DNSmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" COREmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Submit"</span></span></span><span class="hljs-tag">&gt;</span></span> ## --- START --- Scroll Versions and Scroll Translations Integration ------------------------------------------- #if ($versions || $variants || $languages) #if($versions) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:version-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$versions.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($variants) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"variant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:variant-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$variants.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($languages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"language"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-translations:language-key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$languages.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #end ## --- END ----------------------------------------------------------------------------------------------------- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <i>Formulaire de recherche de la liste des espaces</i> <br><br><h3>  Comment afficher les r√©sultats </h3><br>  La liste des r√©sultats de recherche ressemblera √† celle des ensembles de mod√®les include-search.vm.  Dans mon cas, chaque lien trouv√© a un titre, une description et un nom de l'espace auquel appartient l'article.  Ici, vous pouvez sp√©cifier ce que l'utilisateur verra si la recherche ne trouve rien. <br><br>  On peut voir dans le fragment de mod√®le ci-dessous que les r√©sultats de la recherche sont affich√©s en boucle √† l'aide de variables d'espace r√©serv√©.  Les r√©sultats de recherche peuvent √™tre tr√®s nombreux, donc en bas de la page, il y a eu la pagination.  Pour un guide d√©taill√© sur les mod√®les de page de recherche, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation de recherche de la fen√™tre de d√©filement</a> . <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-wrap-container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results"</span></span></span><span class="hljs-tag">&gt;</span></span> #if ($searchResults.total &gt; 0) #foreach($result in $searchResults.items) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result"</span></span></span><span class="hljs-tag">&gt;</span></span> #set( $space = '' ) #if( $result.type == 'page' ) #set( $space = $result.getObject().fromConfluence.getSpace().getName() ) #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$result.link"</span></span></span><span class="hljs-tag">&gt;</span></span>$result.displayTitle<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-desc"</span></span></span><span class="hljs-tag">&gt;</span></span>$result.getDescription(280)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #if( $space ) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-space"</span></span></span><span class="hljs-tag">&gt;</span></span>$space<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> #end #else <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span>    :(<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>   ,     .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results-pager"</span></span></span><span class="hljs-tag">&gt;</span></span> #if($pager.hasPrev) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"back"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pager.prevLink"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end #foreach ($pagerPage in $pager.pages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pagerPage.link"</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> ($</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pagerPage.current</span></span></span><span class="hljs-tag">) </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current"</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag">&gt;</span></span>$velocityCount<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end #if($pager.hasNext) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"next"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pager.nextLink"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h3>  A quoi ressemble la page de recherche </h3><br>  Le mod√®le ¬´search.vm¬ª d√©finit la structure compl√®te des pages de recherche, √† partir de la balise d'ouverture.  Dans ce mod√®le, vous devez rassembler le formulaire de recherche et ses r√©sultats.  En cons√©quence, nous obtenons une page de type ¬´recherche¬ª, qui comprend un formulaire de recherche et des correspondances trouv√©es, divis√©e en plusieurs pages. <br><br>  Tous les mod√®les de premier niveau situ√©s dans la structure √† c√¥t√© de page.vm red√©finissent la structure de la page en fonction de son type.  Ainsi, search.vm d√©finit la disposition des pages de recherche et error.vm d√©finit les pages d'erreur. <br><br>  Il reste √† d√©finir des styles pour les √©l√©ments, il est possible d'ajouter des scripts, et notre th√®me devient fonctionnel, effectue des t√¢ches et ressemble selon la conception. <br><br><h2>  Personnaliser l'indexation </h2><br>  Pour configurer l'indexation, vous devez placer le plan du site dans le dossier racine.  Mais nous n'avons pas de dossier racine, car Confluence est une application Java, pas un site.  Que faire <br><br>  L'astuce a √©t√© trouv√©e dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation de Scroll Viewport</a> .  √Ä l'int√©rieur de l'espace des pages de diffusion o√π la page principale est stock√©e, vous devez cr√©er un nouvel article, l'appeler sitemap.xml et le placer un niveau en dessous de la page principale. <br><br>  L'emplacement est important car, comme indiqu√© dans la documentation, le fichier de carte ne sera pas disponible pour Viewport avec le pr√©fixe de chemin ¬´/¬ª.  Un tel pr√©fixe pour l'espace de la fen√™tre d'affichage sur la page principale. <br><br><img src="https://habrastorage.org/webt/kd/0q/dk/kd0qdkmlbzk-nqz0w8nekmgelbs.png"><br>  <i>Article Sitemap.xml dans la structure de l'espace</i> <br><br>  Nous nous souvenons que dans Confluence, le titre de l'article et son URL sont li√©s.  Lorsque la page est cr√©√©e et s'ouvre d√©j√† sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.ispsystem.com/sitemap-xml</a> , nous nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">occupons de</a> son affichage correct.  Ce format d'URL n'est pas tout √† fait typique, mais il nous conviendra. <br><br>  Un plan de site doit √™tre sans balises et styles inutiles, car il est cr√©√© pour les moteurs de recherche.  Pour emp√™cher les styles d√©finis pr√©c√©demment d'√™tre appliqu√©s au plan du site, vous devez cr√©er un mod√®le include-sitemap.vm et y copier le contenu du plan du site pr√©par√© - sitemap.xml.  Cela ressemblera √† ceci: <br><br><img src="https://habrastorage.org/webt/it/eu/ud/iteuudh6ptkr0aj3nqlipbkjnhe.png"><br><br>  Maintenant, pour la page sitemap.xml, cr√©ez une condition distincte dans le mod√®le page.vm afin que les styles et la structure des mod√®les soient appliqu√©s √† toutes les pages √† l'exception du plan du site. <br><br>  Un identifiant est requis pour la condition.  Vous pouvez le reconna√Ætre en ouvrant la page, puis en cliquant sur <b>Ellipsis - Informations sur la page</b> , √† la fin de la barre d'adresse, il y aura un identifiant.  Maintenant, nous √©crivons la condition: <br><br><pre> <code class="xml hljs">#if ($page.id == 25370522) $include.template("/include/include-sitemap.vm") #else /   /</code> </pre><br>  Apr√®s les manipulations d√©crites, le chemin vers le plan du site peut √™tre sp√©cifi√© dans les panneaux des webmasters Yandex et Google, et l'indexation commencera. <br><br>  De mani√®re g√©n√©rale, la question de l'indexation reste ouverte pour moi.  Il n'est pas compl√®tement clair comment les pages de contenu Confluence sont index√©es.  Vous devez r√©fl√©chir √† la fa√ßon d'automatiser le processus. <br><br><h2>  De telles choses </h2><br>  C'est ainsi que j'ai mis en place la conception, la localisation, la recherche et l'indexation de la documentation sur Confluence.  Il a fallu du temps et le support technique de Scroll Viewport pour faire face √† des choses non √©videntes.  J'esp√®re que mon exp√©rience sera utile √† ceux qui font face √† une t√¢che similaire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438236/">https://habr.com/ru/post/fr438236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438224/index.html">Quartier du gouvernement. Pilote</a></li>
<li><a href="../fr438226/index.html">R√©soudre les probl√®mes d'installation de .NET Framework 3.5 sur Windows 8 sur un r√©seau avec WSUS</a></li>
<li><a href="../fr438228/index.html">Avez-vous command√© des lunettes vid√©o transparentes avec HDMI et USB-C? Rencontre: Epson Moverio BT-35E</a></li>
<li><a href="../fr438230/index.html">Traduction "Pr√©parez vos applications pour les exigences 64 bits"</a></li>
<li><a href="../fr438234/index.html">R√©sum√© des √©v√©nements informatiques de f√©vrier</a></li>
<li><a href="../fr438238/index.html">En tant que designer, je refuse d'appeler les gens ¬´utilisateurs¬ª</a></li>
<li><a href="../fr438240/index.html">Test de charge du CPU et du SSD des h√©bergeurs cloud: comparer Selectel, Servers, MCS et I. Cloud</a></li>
<li><a href="../fr438242/index.html">Compressez la liste des adresses IP de la meilleure fa√ßon</a></li>
<li><a href="../fr438244/index.html">Nous traitons de la r√©glementation cryptographique russe ... en utilisant l'exemple de l'arrestation d'un seigneur de la drogue</a></li>
<li><a href="../fr438248/index.html">GitHub Action Life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>