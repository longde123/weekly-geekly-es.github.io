<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📀 👚 👩🏾‍⚕️ Confluence pour une base de connaissances publique: changer la conception et mettre en place la séparation linguistique 🔈 🖕 🐍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous avons six produits utilisés en Russie et à l'étranger. Cela signifie que la documentation pour eux doit être au même endroit, mais divisée par pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confluence pour une base de connaissances publique: changer la conception et mettre en place la séparation linguistique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/438236/">  Nous avons six produits utilisés en Russie et à l'étranger.  Cela signifie que la documentation pour eux doit être au même endroit, mais divisée par produits et langues. <br><br>  Nous avions l'habitude d'utiliser MediaWiki, mais au fil du temps, il est devenu obsolète.  De la plateforme, nous nous attendions également à une bonne mise en page des articles, une recherche flexible et un éditeur de texte interne.  Confluence a été choisie comme alternative. <br><br>  Dans le processus, il est devenu clair que les capacités de cette plate-forme prête à l'emploi ne sont pas non plus suffisantes pour toutes nos tâches.  J'ai dû acheter le plugin Scroll Viewport et passer du temps à le configurer. <br><br>  Vous pouvez voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce qui s'est passé à la fin</a> , et je vais vous dire comment j'ai changé la conception, mis en place la séparation linguistique, la recherche interne et l'indexation. <br><br><img src="https://habrastorage.org/webt/az/dn/d3/azdnd3muoqlkshm_d-jppor95yw.jpeg"><br><a name="habracut"></a><br><h2>  Changer le design </h2><br>  La société a commencé à déplacer la documentation du moteur MediaWiki vers Confluence il y a un an.  Mais quand j'ai commencé le projet, Confluence avait l'air standard, le développeur précédent a ajouté notre logo et a caché des éléments inutiles pour un utilisateur anonyme.  Le lancement devait apporter de la documentation à notre style.  Les concepteurs ont préparé des plans et j'ai dû les inventer. <br><br>  Mais le fait est que Confluence lui-même donne très peu de flexibilité dans les styles et les scripts, et les possibilités prêtes à l'emploi ne sont pas triviales à comprendre et à utiliser, et sont inhabituelles pour un développeur Web. <br><br>  Je note que Confluence est une application Java et non un site Web avec le backend et le frontend habituels.  Dans la section Apparence, vous pouvez ajouter une feuille de style ou du HTML personnalisé, mais cela ne suffit pas pour une refonte complète.  Par conséquent, pour la mise en page, nous avons acheté le plugin Scroll Viewport.  Et puis le plaisir a commencé. <br><br><h3>  Scroll Viewport Plugin </h3><br>  Scroll Viewport est un plugin pour Confluence, qui vous permet de créer des thèmes à l'aide de l'éditeur de code et du gestionnaire de fichiers familiers.  Avec lui, vous pouvez écrire des styles, travailler avec des modèles de page, ajouter des images et personnaliser la recherche. <br><br>  Les thèmes sont créés pour les espaces.  Les espaces dans Confluence sont des entités de contenu qui stockent des informations sur un seul projet.  Nous avons de l'espace pour les produits: ISPmanager, BILLmanager, etc., ainsi que pour la page principale.  L'espace a une clé, un titre, un certain nombre de paramètres et, en fait, un thème. <br><br><h3>  Modification des thèmes dans la fenêtre de défilement: mise en page, styles et html </h3><br>  Commençons à explorer la fenêtre de défilement.  Lorsque le plugin est installé et activé, vous devez cliquer sur l'engrenage, puis - <b>Paramètres de base</b> - section <b>Fenêtre de défilement</b> - <b>Thèmes</b> . <br><br>  Sélectionnez, copiez ou créez un thème et cliquez sur <b>Modifier</b> .  L'éditeur de thème Scroll Viewport s'ouvre. <br><br>  Veuillez noter que Scroll Viewport recommande de ne pas créer un thème à partir de zéro, mais de prendre le thème Scroll WebHelp comme base. <br><br><img src="https://habrastorage.org/webt/d-/cz/hl/d-czhlnbxkamowxin2rcflgywuq.png"><br>  <i>Éditeur de thème de la fenêtre de défilement: à gauche se trouve la structure du thème, en haut le nom du fichier, dans la partie principale les fichiers eux-mêmes</i> <br><br>  Une fois le thème créé, vous pouvez commencer à le configurer.  Nous allons configurer la mise en page et la structure des pages, ajouter des styles et des scripts, puis passer à la modification de la mise en page HTML des éléments de contenu. <br><br><h3>  Balisage: éditez, ajoutez des classes et affichez le même type d'éléments dans une boucle </h3><br>  <b>Structure de la page par type</b> <br><br>  À la racine du sujet se trouvent les principaux modèles: page.vm, search.vm, error.vm, ainsi que l'image de couverture du thème thumbnail.png. <br><br>  Le modèle «page.vm» définit la structure de toutes les pages du thème.  Ici, vous pouvez modifier le html et utiliser les variables d'espace réservé pour spécifier où le contenu sera affiché.  Les espaces réservés se réfèrent au contenu de l'espace ou aux données utilisateur (titre du matériel, nom de l'espace, nom de l'auteur), leur liste complète se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans le centre d'aide du développeur Scroll Viewport</a> . <br><br>  «Page.vm» fait référence aux modèles qui se trouvent un niveau plus bas dans le dossier «include» et les encapsule dans des balises et des blocs.  Dans ce fichier (page.vm), nous assemblons la page en morceaux et complétons le balisage avec tous les attributs nécessaires d'un document html.  C'est ici que nous précisons le doctype, prescrivons la tête et le corps. <br><br>  <b>Éléments de page</b> <br><br>  Dans le dossier «include» se trouvent des morceaux de la page.  À partir des noms de fichiers, vous pouvez deviner lequel est responsable de: <br><br><ul><li>  include-htmlhead.vm contient tout ce que nous indiquons habituellement dans la tête d'un document html: accès aux feuilles de style, aux fichiers de polices, à certains scripts, y compris les scripts Confluence et Scroll Viewport standard; </li><li>  include-headerbar.vm définit la structure de l'en-tête; </li><li>  include-footer.vm définit la structure du pied de page; </li><li>  include-content.vm décrit la structure du bloc de contenu principal; </li><li>  include-sidebar.vm décrit la disposition du menu latéral, qui contient généralement une liste de tous les articles de l'espace. </li></ul><br>  La syntaxe du modèle de fenêtre de défilement est facile à comprendre.  Les opérations commencent par un treillis, tel que «#if (condition)» ou «#foreach ($ language in $ languages.available)», et se terminent par «#end», à l'intérieur du corps de l'opérateur.  Tout le reste est des balises html. <br><br><h3>  Stylisation: ajoutez des styles, des images et des scripts </h3><br>  Dans le dossier «assets», les fichiers js et css sont stockés.  Comme nous n'avons pas créé le thème à partir de zéro, il contient déjà des fichiers provenant des développeurs de Scroll Viewport. <br><br>  Pour personnaliser les styles, il est préférable de créer un nouveau fichier CSS et de l'inclure en tête du modèle de page.  Les fichiers qui commencent sur un thème contiennent des règles de thème de la fenêtre de défilement.  Ils doivent être modifiés dans le cas où de nouveaux styles reposent sur la base.  Soyez prudent lorsque vous supprimez et ajoutez des règles, rappelez-vous la hiérarchie des sélecteurs, cela peut vous aider. <br><br>  Dans «actifs», j'ai également ajouté un dossier avec des images et un dossier avec des fichiers de polices.  Le gestionnaire de fichiers ne fonctionne pas parfaitement, vous ne pouvez pas ajouter de dossier au répertoire souhaité, j'ai donc dû tricher.  J'ai créé un dossier sur mon ordinateur, y ai ajouté un fichier, puis l'ai chargé dans le répertoire souhaité par glisser-déposer.  Une fois le dossier créé, il n'y a aucun problème à télécharger des fichiers. <br><br>  Lors de la création d'un nouveau design, nous avons pris en compte les capacités du plugin et nous sommes concentrés sur les sujets existants dans Scroll Viewport, donc à l'intérieur des actifs / js, je me suis attardé pendant un certain temps.  Apporté de petites modifications aux fichiers de script existants et ajouté des fichiers des bibliothèques nécessaires.  Si les modifications sont plus importantes, vous devrez traiter les scripts plus en détail. <br><br><h3>  Éditeur de contenu HTML pour le contenu de l'article </h3><br>  Dans le processus de travail avec Scroll Viewport, il s'est avéré que nous pouvons composer, mais pas tous.  Les autorisations de modèle de plugin se terminent par la variable $ page.renderContent.  Comment disposer les éléments avec les classes principales et les liens?  Pas clair.  Où est le HTML?  Par défaut, il n'est pas là.  La variable nous indique que nous devons compléter une partie de la mise en page directement sur la page de l'article, cependant, jusqu'à présent, seul le texte peut y être modifié, mais pas les balises. <br><br><img src="https://habrastorage.org/webt/qq/e2/89/qqe289edxae5x6nm8zelzi1mm9i.jpeg"><br><br>  Heureusement, vous pouvez toujours rechercher des plugins, et quelle chance, le bon a été trouvé presque immédiatement.  Il s'agit de l'éditeur de source de Confluence.  Après l'avoir installé, vous pouvez également dessiner le bon vieux hypertexte en mode d'édition d'article.  Enfin! <br><br><img src="https://habrastorage.org/webt/jq/wf/cz/jqwfczvsgt68h7zdrcydqmvipqu.png"><br>  <i>Plugin de l'éditeur de source</i> <br><br>  Dans la fenêtre de défilement, nous créons l'en-tête, la barre latérale, le pied de page et définissons les styles.  Nous imposons du contenu à l'aide de l'éditeur de source.  Au total, j'ai créé deux rubriques: pour les pages d'articles et pour la page de documentation principale. <br><br><h2>  Paramètres d'espace d'affichage: appliquez le thème </h2><br>  Lorsqu'un thème est créé, il doit être associé à l'espace.  Pour ce faire, vous devez créer une fenêtre dans les paramètres d'espace.  La fenêtre est ce qui relie l'espace et le thème.  Ce n'est qu'en créant cette entité que vous pouvez appliquer des styles de thème à l'espace. <br><br>  Entrez l'espace du produit souhaité, ouvrez <b>Paramètres d'espace - Modules complémentaires</b> .  Ici, vous pouvez créer et gérer Viewport: définir des thèmes, des types de contenu, des autorisations, un domaine et un chemin. <br><br><img src="https://habrastorage.org/webt/vo/jk/wb/vojkwbyn6kiqem-5ha0kxzyuh2w.png"><br>  <i>Un formulaire pour connecter l'espace à un thème, créer une fenêtre</i> <br><br><h3>  Choisissez un sujet </h3><br>  <b>L'</b> onglet <b>Thèmes</b> affiche tous les thèmes créés et un thème par défaut qui apparaît avec le plugin Scroll Viewport.  Sélectionnez un thème et appliquez-le à l'espace. <br><br>  L'onglet <b>Contenu</b> vous permet de sélectionner le type de contenu auquel le thème s'appliquera.  Cela nous intéresse le moins, car la clé de l'espace est automatiquement rétractée. <br><br><h3>  Définir des adresses </h3><br>  Dans l'onglet <b>URL</b> , vous pouvez sélectionner le domaine et le chemin le long duquel l'espace s'ouvrira, et également spécifier la structure des adresses.  Il sera également nécessaire de diviser la documentation en deux langues par langue. <br><br>  Il existe deux types de structure d'URL: <br><br><ul><li>  multi-niveaux - le chemin reflète la hiérarchie des articles spatiaux et des noms de page, </li><li>  un niveau - tous les articles sont disponibles au même niveau avec des suffixes numériques </li></ul><br>  Avec les adresses de page, il y a une nuance.  Pour les articles dans différentes langues, Confluence génère des URL différemment.  En anglais, affiche le nom et en russe - un ensemble incohérent de lettres, de caractères et de chiffres.  La fenêtre de défilement vous permet de regrouper des adresses dans un seul formulaire.  Si vous choisissez une structure à plusieurs niveaux, l'adresse des articles russes affichera le nom du texte translittéré. <br><br>  Mais gardez à l'esprit que lorsque vous choisissez des URL à plusieurs niveaux, l'URL dépendra du titre de l'article.  Le nom changera - l'adresse de l'article changera également.  Si vous sélectionnez une structure à un niveau, l'adresse sera moins lisible et compréhensible, mais ne dépendra plus du titre de la page. <br><br>  Nous avons choisi un type de structure à plusieurs niveaux et des adresses lisibles, mais nous devrons suivre l'évolution des titres d'articles et mettre en place des redirections dans le temps.  Et nous recherchons toujours l'option parfaite.  Nous utilisons également des liens courts qui mènent toujours à l'article et ne changent pas, un tel lien peut être trouvé dans la section <b>Informations de la page</b> . <br><br><h3>  Inclure le sujet </h3><br>  Dans l'onglet <b>Autorisations</b> , vous pouvez spécifier quels utilisateurs pourront voir l'espace à l'aide de la fenêtre d'affichage. <br><br>  Pour que les utilisateurs anonymes ne voient la documentation que dans une conception donnée, vous devez cocher deux cases: <br><br><ul><li>  Restreindre l'accès à Confluence UI, </li><li>  Redirigez automatiquement les utilisateurs vers la fenêtre d'affichage. </li></ul><br><img src="https://habrastorage.org/webt/h0/x8/v1/h0x8v1womjmfi9zevwhqssyntko.png"><br>  <i>Paramètres d'affichage de l'espace dans l'onglet Autorisations</i> <br><br><h2>  Configurer la séparation linguistique </h2><br>  Nous avons de la documentation en anglais et en russe, nous devons donc ouvrir des espaces en russe sur le domaine .ru et en anglais sur .com. <br><br>  Scroll Viewport fournit de tels paramètres, mais si vous entrez simplement un domaine différent du domaine principal dans l'onglet <b>URL</b> dans le champ <b>Nom de</b> domaine, les deux domaines ne fonctionneront pas.  Il s'agit d'une fonctionnalité du plugin Scroll Viewport. <br><br>  Il est nécessaire de configurer le proxy inverse pour que les demandes des utilisateurs soient transmises par Confluence et y soient résolues en deux domaines - voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'instruction Scroll Viewport</a> (configurations pour Nginx et TOMCAT).  Après cela, vous devez désactiver le mode de coédition ou apporter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des modifications supplémentaires</a> .  Vous pouvez maintenant spécifier l'un des deux domaines dans les paramètres de la fenêtre. <br><br><h3>  Thèmes pour différentes langues </h3><br>  L'application d'un thème à des espaces dans une langue différente ne fonctionnera pas, car le thème comprend non seulement des styles, mais également des modèles de page.  Cela signifie que la langue des éléments qui ne sont pas affichés en tant que variables ne change pas.  Par exemple, un espace réservé de texte dans la barre de recherche, des contacts dans le pied de page, etc. J'ai donc dû créer des sujets distincts pour les espaces en russe et en anglais. <br><br>  En fait, je crée des thèmes qui sont identiques dans le style, mais les modèles pour eux sont différents, principalement en termes de texte.  C'est un excès et une duplication, oui, mais je n'ai pas encore trouvé d'autre moyen.  En outre, le sujet réglemente également la recherche, et c'est un autre argument en faveur de la séparation par langue. <br><br>  En conséquence, j'ai eu quatre sujets: deux pour les pages principales en russe et en anglais, et deux autres pour les pages de contenu pour chaque langue. <br><br><h2>  Personnaliser la recherche sur le site </h2><br>  Les paramètres de recherche sont configurés dans des fichiers du dossier «include».  À l'intérieur d'eux, nous définissons les paramètres de recherche: <br><br><ul><li>  include-quicksearch.vm est responsable du champ de recherche sur toutes les pages de contenu, </li><li>  include-search.vm définit la structure des pages de résultats de recherche. </li></ul><br><h3>  Où chercher </h3><br>  Par défaut, la recherche ne fonctionne que sur l'espace actuel.  Par exemple, dans l'espace ISPmanager - uniquement sur les articles sur ISPmanager.  Si vous devez rechercher la liste des espaces, vous devez spécifier leurs clés dans les paramètres de include-quicksearch.vm. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search"</span></span></span><span class="hljs-tag">&gt;</span></span> #set($search = "/search") #if ($stringUtils.equals(${viewport.link}, "/") == false) #set($search = "${viewport.link}/search") #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$!searchRequest.queryString"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Submit"</span></span></span><span class="hljs-tag">&gt;</span></span> ## --- START --- Scroll Versions and Scroll Translations Integration ------------------------------------------- #if ($versions || $variants || $languages) #if($versions) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:version-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$versions.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($variants) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"variant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:variant-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$variants.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($languages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"language"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-translations:language-key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$languages.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #end ## --- END ----------------------------------------------------------------------------------------------------- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <i>Formulaire de recherche d'espace individuel</i> <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search"</span></span></span><span class="hljs-tag">&gt;</span></span> #set($search = "/search") #if ($stringUtils.equals(${viewport.link}, "/") == false) #set($search = "${viewport.link}/search") #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-search-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$!searchRequest.queryString"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BILLmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMKVM"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMmgr5Cloud"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VMmgr5OVZ"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DCImgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IPmgr5"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" ISPmgr5BUSINESS"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ISPmgr5Lite"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" DNSmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" COREmgr"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Submit"</span></span></span><span class="hljs-tag">&gt;</span></span> ## --- START --- Scroll Versions and Scroll Translations Integration ------------------------------------------- #if ($versions || $variants || $languages) #if($versions) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:version-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$versions.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($variants) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"variant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-versions:variant-name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$variants.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #if($languages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"language"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scroll-translations:language-key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$languages.current.value"</span></span></span><span class="hljs-tag">/&gt;</span></span> #end #end ## --- END ----------------------------------------------------------------------------------------------------- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <i>Formulaire de recherche de la liste des espaces</i> <br><br><h3>  Comment afficher les résultats </h3><br>  La liste des résultats de recherche ressemblera à celle des ensembles de modèles include-search.vm.  Dans mon cas, chaque lien trouvé a un titre, une description et un nom de l'espace auquel appartient l'article.  Ici, vous pouvez spécifier ce que l'utilisateur verra si la recherche ne trouve rien. <br><br>  On peut voir dans le fragment de modèle ci-dessous que les résultats de la recherche sont affichés en boucle à l'aide de variables d'espace réservé.  Les résultats de recherche peuvent être très nombreux, donc en bas de la page, il y a eu la pagination.  Pour un guide détaillé sur les modèles de page de recherche, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation de recherche de la fenêtre de défilement</a> . <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ht-wrap-container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results"</span></span></span><span class="hljs-tag">&gt;</span></span> #if ($searchResults.total &gt; 0) #foreach($result in $searchResults.items) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result"</span></span></span><span class="hljs-tag">&gt;</span></span> #set( $space = '' ) #if( $result.type == 'page' ) #set( $space = $result.getObject().fromConfluence.getSpace().getName() ) #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$result.link"</span></span></span><span class="hljs-tag">&gt;</span></span>$result.displayTitle<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-desc"</span></span></span><span class="hljs-tag">&gt;</span></span>$result.getDescription(280)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #if( $space ) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-result-space"</span></span></span><span class="hljs-tag">&gt;</span></span>$space<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> #end #else <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span>    :(<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>   ,     .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results-pager"</span></span></span><span class="hljs-tag">&gt;</span></span> #if($pager.hasPrev) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"back"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pager.prevLink"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end #foreach ($pagerPage in $pager.pages) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pagerPage.link"</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> ($</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pagerPage.current</span></span></span><span class="hljs-tag">) </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current"</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag">&gt;</span></span>$velocityCount<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end #if($pager.hasNext) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"next"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$pager.nextLink"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> #end <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h3>  A quoi ressemble la page de recherche </h3><br>  Le modèle «search.vm» définit la structure complète des pages de recherche, à partir de la balise d'ouverture.  Dans ce modèle, vous devez rassembler le formulaire de recherche et ses résultats.  En conséquence, nous obtenons une page de type «recherche», qui comprend un formulaire de recherche et des correspondances trouvées, divisée en plusieurs pages. <br><br>  Tous les modèles de premier niveau situés dans la structure à côté de page.vm redéfinissent la structure de la page en fonction de son type.  Ainsi, search.vm définit la disposition des pages de recherche et error.vm définit les pages d'erreur. <br><br>  Il reste à définir des styles pour les éléments, il est possible d'ajouter des scripts, et notre thème devient fonctionnel, effectue des tâches et ressemble selon la conception. <br><br><h2>  Personnaliser l'indexation </h2><br>  Pour configurer l'indexation, vous devez placer le plan du site dans le dossier racine.  Mais nous n'avons pas de dossier racine, car Confluence est une application Java, pas un site.  Que faire <br><br>  L'astuce a été trouvée dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation de Scroll Viewport</a> .  À l'intérieur de l'espace des pages de diffusion où la page principale est stockée, vous devez créer un nouvel article, l'appeler sitemap.xml et le placer un niveau en dessous de la page principale. <br><br>  L'emplacement est important car, comme indiqué dans la documentation, le fichier de carte ne sera pas disponible pour Viewport avec le préfixe de chemin «/».  Un tel préfixe pour l'espace de la fenêtre d'affichage sur la page principale. <br><br><img src="https://habrastorage.org/webt/kd/0q/dk/kd0qdkmlbzk-nqz0w8nekmgelbs.png"><br>  <i>Article Sitemap.xml dans la structure de l'espace</i> <br><br>  Nous nous souvenons que dans Confluence, le titre de l'article et son URL sont liés.  Lorsque la page est créée et s'ouvre déjà sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.ispsystem.com/sitemap-xml</a> , nous nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">occupons de</a> son affichage correct.  Ce format d'URL n'est pas tout à fait typique, mais il nous conviendra. <br><br>  Un plan de site doit être sans balises et styles inutiles, car il est créé pour les moteurs de recherche.  Pour empêcher les styles définis précédemment d'être appliqués au plan du site, vous devez créer un modèle include-sitemap.vm et y copier le contenu du plan du site préparé - sitemap.xml.  Cela ressemblera à ceci: <br><br><img src="https://habrastorage.org/webt/it/eu/ud/iteuudh6ptkr0aj3nqlipbkjnhe.png"><br><br>  Maintenant, pour la page sitemap.xml, créez une condition distincte dans le modèle page.vm afin que les styles et la structure des modèles soient appliqués à toutes les pages à l'exception du plan du site. <br><br>  Un identifiant est requis pour la condition.  Vous pouvez le reconnaître en ouvrant la page, puis en cliquant sur <b>Ellipsis - Informations sur la page</b> , à la fin de la barre d'adresse, il y aura un identifiant.  Maintenant, nous écrivons la condition: <br><br><pre> <code class="xml hljs">#if ($page.id == 25370522) $include.template("/include/include-sitemap.vm") #else /   /</code> </pre><br>  Après les manipulations décrites, le chemin vers le plan du site peut être spécifié dans les panneaux des webmasters Yandex et Google, et l'indexation commencera. <br><br>  De manière générale, la question de l'indexation reste ouverte pour moi.  Il n'est pas complètement clair comment les pages de contenu Confluence sont indexées.  Vous devez réfléchir à la façon d'automatiser le processus. <br><br><h2>  De telles choses </h2><br>  C'est ainsi que j'ai mis en place la conception, la localisation, la recherche et l'indexation de la documentation sur Confluence.  Il a fallu du temps et le support technique de Scroll Viewport pour faire face à des choses non évidentes.  J'espère que mon expérience sera utile à ceux qui font face à une tâche similaire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438236/">https://habr.com/ru/post/fr438236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438224/index.html">Quartier du gouvernement. Pilote</a></li>
<li><a href="../fr438226/index.html">Résoudre les problèmes d'installation de .NET Framework 3.5 sur Windows 8 sur un réseau avec WSUS</a></li>
<li><a href="../fr438228/index.html">Avez-vous commandé des lunettes vidéo transparentes avec HDMI et USB-C? Rencontre: Epson Moverio BT-35E</a></li>
<li><a href="../fr438230/index.html">Traduction "Préparez vos applications pour les exigences 64 bits"</a></li>
<li><a href="../fr438234/index.html">Résumé des événements informatiques de février</a></li>
<li><a href="../fr438238/index.html">En tant que designer, je refuse d'appeler les gens «utilisateurs»</a></li>
<li><a href="../fr438240/index.html">Test de charge du CPU et du SSD des hébergeurs cloud: comparer Selectel, Servers, MCS et I. Cloud</a></li>
<li><a href="../fr438242/index.html">Compressez la liste des adresses IP de la meilleure façon</a></li>
<li><a href="../fr438244/index.html">Nous traitons de la réglementation cryptographique russe ... en utilisant l'exemple de l'arrestation d'un seigneur de la drogue</a></li>
<li><a href="../fr438248/index.html">GitHub Action Life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>