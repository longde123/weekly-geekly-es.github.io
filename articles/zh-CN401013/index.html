<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕊️ ◼️ 🚘 Подарок любимой на 14 февраля от электронщика 🧙🏼 🕛 😨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=", GT. — . , . 
 
 :  ,  () — . « v1.0»
 
 
 
 « v1.0». :
 
 — 
 — ( microUSB)
 — RGB , 
 — 
 — . .
 
 / — …
 
 
 — . :
 
 
 
 , , . : USB STM32F042F6P...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Подарок любимой на 14 февраля от электронщика</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401013/"> ,  GT.               —  .                ,      . <br>
<br>
  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   ,   </a> () —   .    « v1.0»<br>
<br>
<img src="https://habrastorage.org/files/772/31e/41d/77231e41d878453c8cbc358f4d397607.png"><br>
<a name="habracut"></a><br>
           « v1.0».   :<br>
<br>
 —    <br>
 —     ( microUSB)<br>
 — RGB      ,   <br>
 —  <br>
 —     .       .<br>
<br>
/      —         …<br>
<br>
<h3></h3><br>
  —    .       :<br>
<br>
<img src="https://habrastorage.org/files/7a4/93c/70e/7a493c70e0ab4951b1ec11086a5553a4.png"><br>
<br>
   ,      ,        .    :     USB   STM32F042F6P6,  LDO — XC6206P332MR, 32 SPI  W25Q32FVSSIG (   2 ,     ),  RGB  WS2812.<br>
<br>
 :<br>
<br>
<img src="https://habrastorage.org/files/72a/0e4/c6b/72a0e4c6b92543d7b7fc91347f86a5e6.png"><br>
<br>
      —   ,  WS2812      3,3 (!      …  ).<br>
<br>
    ,        .  .    .<br>
<br>
<img src="https://habrastorage.org/files/faa/dae/2a4/faadae2a46f748629f281affc3c31656.png"><br>
<br>
<h3></h3><br>
       ,  WS2812     3,3?    !!!          USB.      Blue.     , ,     ,     PB1  5   1    .    .1   4,3. ,     ,    .      «»:<br>
<br>
<img src="https://habrastorage.org/files/317/0e1/b98/3170e1b98c5f4404a1032072a5e2039f.jpg"><br>
<br>
<h3> </h3><br>
       STM HAL Library,     ,           .   ,  ,  STM32CubeMX —        .       —       ,      —  HAL   .<br>
<br>
  ,     32,     ,           (R-G-B),        .       ,     .<br>
<br>
     :  WS2812       ,      (0.4-0.8)       48.  ,  ,    ,           usb  /  .<br>
 ,             ,       STM.  , ,        ,           — DMA + . DMA    GPIO ,    DMA.  DMA     ,         .         PB1.   ,       ,     ,   Martin Hubáček    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>.           RGB ,    .<br>
<br>
<h3> </h3><br>
,      .  , , ,    ,  ,  «!»,   «    »   -   . .<br>
<br>
            ,    .     usb   «Mass storage device»,  STM32 USB Device Library    . ! ????  .<br>
<br>
   STM32CubeMX,   read/write  spi        usb mass storage     :       «»      -    «Hello World»   README.txt.<br>
<br>
    —     SCSI  StartStopUnit.   .     (,   8 ,    Fat16) 512 .       4.         ( 4     6     ).     512 ,   4,  4,    .  ,    ,        64  ,               ,         .  ,       256    (  ),   (   Fedora,     )   ,     . <br>
<br>
      ,  «   ».       mass storage device          Read-Only (     «»     « »,     ),       com- (aka Communication Device Class).            RGB .<br>
<br>
  (mass storage  cdc)       ( ) .<br>
 —  ( ,           ).  read-write  MSC ,      read-only macOs   , —  ,         «success»    ,      ( ,    «  ,    »).    —   .<br>
<br>
<h3> </h3><br>
         cdc,          ,     .   :      ,           .       // RGB . <br>
<br>
   -,        Qt      FatFS  ChaN      .      com-   Qt   « » ( QSerialPort),       QTreeView  item model,   QabstractItemModel,      Drag&amp;Drop (  , « »   ,     /).   RGB   QListWidget (   ),  QtColorWidgets ( Mattia Basaglia)       Qt  QEasingCurve   (  )       .<br>
<br>
:    :<br>
<br>
1) «Storage»   <br>
<br>
<img src="https://habrastorage.org/files/592/3ac/357/5923ac357ea541ad8ba3a3fef2da78c5.png"><br>
<br>
2) «LED»   RGB  <br>
<br>
<img src="https://habrastorage.org/files/a0a/8a6/e6b/a0a8a6e6b4f54dfb865a8b7acd1399c6.png"><br>
<br>
  RGB :<br>
<br>
<img src="https://habrastorage.org/files/d3f/2fb/2d2/d3f2fb2d2e334f008ef4ed03664ea45d.png"><br>
<br>
    : <br>
<br>
) RGB —          RGB.<br>
) HSV —   ,    HSV —       ,    «HSV» + «Iterate-&gt;HUE»   .<br>
) Custom —         .     ,      -  (  «»)       .<br>
 <br>
 , ,       Windows/macOs/Linux(Gnome):<br>
<br>
<img src="https://habrastorage.org/files/dcc/621/4b9/dcc6214b92aa40b5a3b5dd3cf77a2ef1.png"><br>
<br>
<img src="https://habrastorage.org/files/397/434/a0d/397434a0d4ea40d5a061fcd7fa3bab77.png"><br>
<br>
<img src="https://habrastorage.org/files/5cf/549/4fc/5cf5494fcefe47dba54c442f72f9eaf3.png"><br>
<br>
<h3></h3><br>
          ,         .    « »:<br>
<br>
<img src="https://habrastorage.org/files/185/4b5/0d2/1854b50d264a44b8b7054dc876c3b211.jpg"><br>
<br>
<img src="https://habrastorage.org/files/25c/ccb/987/25cccb9873d946b083101dcae6af2b48.jpg"><br>
<br>
    (   ).   !!!</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN401013/">https://habr.com/ru/post/zh-CN401013/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN401003/index.html">随时可用的蓝牙护身符</a></li>
<li><a href="../zh-CN401005/index.html">三星领导层谈到了Galaxy Note 7自燃的原因</a></li>
<li><a href="../zh-CN401007/index.html">殖民地 第二章：遇险反应</a></li>
<li><a href="../zh-CN401009/index.html">越来越多的人蒙昧主义并否认艾滋病毒的存在。俄罗斯濒临流行病</a></li>
<li><a href="../zh-CN401011/index.html">召回射手改进调查研究</a></li>
<li><a href="../zh-CN401015/index.html">Polivox传奇：苏联凤凰城从80年代飞到DOOM的“光明”未来</a></li>
<li><a href="../zh-CN401019/index.html">1925年1月1日：发现宇宙的那一天</a></li>
<li><a href="../zh-CN401021/index.html">全球互联网：中国</a></li>
<li><a href="../zh-CN401023/index.html">灯不一样</a></li>
<li><a href="../zh-CN401027/index.html">儿童如何获得[18岁以上]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>