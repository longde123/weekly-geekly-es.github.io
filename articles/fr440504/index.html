<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚úàÔ∏è üó∫Ô∏è üë©üèΩ‚Äçü§ù‚Äçüë©üèº Docker et Kubernetes dans des environnements exigeants en mati√®re de s√©curit√© üöª ‚è¨ üßíüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Remarque perev. : L'article original a √©t√© √©crit par un ing√©nieur su√©dois - Christian Abdelmassih, qui aime l'architecture au niveau de l'entreprise, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker et Kubernetes dans des environnements exigeants en mati√®re de s√©curit√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440504/"> <i><b>Remarque</b></i>  <i><b>perev.</b></i>  <i>: L'article original a √©t√© √©crit par un ing√©nieur su√©dois - Christian Abdelmassih, qui aime l'architecture au niveau de l'entreprise, la s√©curit√© informatique et le cloud computing.</i>  <i>R√©cemment, il a obtenu une ma√Ætrise en informatique et est press√© de partager son travail - une th√®se de ma√Ætrise, ou plut√¥t une partie de celle-ci, consacr√©e aux probl√®mes d'isolement d'une application conteneuris√©e [et lanc√©e dans Kubernetes].</i>  <i>En tant que ¬´client¬ª pour lequel ce travail de recherche a √©t√© pr√©par√©, il agit tout autant que la police de son pays d'origine.</i> <br><br><img src="https://habrastorage.org/webt/_8/ys/gr/_8ysgrs-atvkocc6r8jpzyzzu1g.jpeg"><br><br>  L'orchestration de conteneurs et l'informatique native dans le cloud sont devenues tr√®s populaires ces derni√®res ann√©es.  Leur adaptation a atteint un niveau tel que m√™me les entreprises financi√®res, les banques et le secteur public s'y int√©ressent.  Par rapport √† d'autres entreprises, elles se distinguent par des exigences importantes dans le domaine de la s√©curit√© de l'information et de l'informatique. <a name="habracut"></a><br><br>  L'un des aspects importants est la fa√ßon dont les conteneurs peuvent √™tre utilis√©s dans les environnements de production et en m√™me temps, la s√©paration du syst√®me entre les applications peut √™tre maintenue.  √âtant donn√© que ces organisations utilisent des environnements de cloud priv√© bas√©s sur la virtualisation au-dessus du m√©tal nu, la perte d'une telle isolation lors de la migration vers un environnement avec des conteneurs orchestr√©s est inacceptable.  Compte tenu de ces limites, ma th√®se a √©t√© √©crite et la police su√©doise est consid√©r√©e comme un client cible. <br><br>  La probl√©matique sp√©cifique de l'√©tude consid√©r√©e dans la th√®se est: <br><br><blockquote>  Comment la d√©marcation des applications est-elle prise en charge dans Docker et Kubernetes par rapport aux machines virtuelles ex√©cut√©es au-dessus de l'hyperviseur ESXi fonctionnant sur du m√©tal nu? </blockquote><br>  Ce probl√®me n√©cessite une √©tude approfondie.  Pour commencer, regardez le d√©nominateur commun - les applications. <br><br><h2>  Les applications Web pr√™tent √† confusion </h2><br>  Vuln√©rabilit√©s dans les applications Web - un v√©ritable zoo de vecteurs d'attaque.  Les risques les plus importants sont pr√©sent√©s dans le Top 10 de l'OWASP ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2013</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2017</a> ).  Ces ressources aident √† √©duquer les d√©veloppeurs √† r√©duire les risques typiques.  Cependant, m√™me si les d√©veloppeurs ont √©crit du code sans faille, l'application peut toujours √™tre vuln√©rable - par exemple, gr√¢ce aux d√©pendances des packages. <br><br>  David Gilbertson a √©crit une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">grande histoire</a> sur la fa√ßon dont vous pouvez injecter du code via un package malveillant distribu√©, par exemple, dans le cadre de NPM pour les applications bas√©es sur Node.js.  Pour d√©tecter les vuln√©rabilit√©s, vous pouvez utiliser des scanners de d√©pendance, mais ils ne font que <i>r√©duire le</i> risque, mais ne l'√©liminent pas compl√®tement. <br><br>  M√™me si vous cr√©ez des applications sans d√©pendances tierces, il est toujours irr√©aliste de croire que l'application ne deviendra jamais vuln√©rable. <br><br>  <b>En raison de ces risques, nous ne pouvons pas dire que les applications Web sont s√ªres.</b> <br><br>  Au lieu de cela, respectez une strat√©gie de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>d√©fense en profondeur</b></a> (DID).  Jetons un ≈ìil au niveau sup√©rieur: les conteneurs et les machines virtuelles. <br><br><h2>  Conteneurs contre machines virtuelles - une histoire d'isolement </h2><br>  Un conteneur est un environnement d'espace utilisateur isol√© qui est souvent impl√©ment√© en utilisant les capacit√©s du noyau.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker</a> utilise pour cela les espaces de noms, les groupes de contr√¥le et les capacit√©s Linux.  En ce sens, l'isolement des conteneurs Docker est <b>tr√®s diff√©rent</b> des machines virtuelles lanc√©es par des hyperviseurs de type 1 <i>(c'est-√†-dire travaillant directement sur le mat√©riel; hyperviseurs nus)</i> . <br><br>  La diff√©renciation pour de telles machines virtuelles peut √™tre impl√©ment√©e √† un niveau aussi bas que dans le mat√©riel r√©el, par exemple, via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Intel VT</a> .  Les conteneurs Docker, √† leur tour, s'appuient sur le noyau Linux pour la d√©marcation.  Cette diff√©rence est tr√®s importante √† prendre en compte lorsqu'il s'agit d' <i>attaques en couches inf√©rieures</i> . <br><br>  Si un attaquant est capable d'ex√©cuter du code dans une machine virtuelle ou un conteneur, il peut potentiellement atteindre un niveau inf√©rieur en effectuant une <i>attaque d'√©chappement</i> . <br><br><img src="https://habrastorage.org/webt/36/hl/_c/36hl_cjove9e7ufmr4g7f3vcq5q.png"><br>  <i>selon que les conteneurs ou les machines virtuelles sont utilis√©s sur le mat√©riel, la diff√©renciation est mise en ≈ìuvre √† diff√©rents niveaux d'infrastructure.</i> <br><br>  La possibilit√© de telles attaques a √©t√© prouv√©e pour l'hyperviseur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VMware ESXi</a> lors du concours de hacker Pwn2Own 2017, ainsi que pour GeekPwn2018.  Le r√©sultat a √©t√© une paire de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2017‚Äì4902</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2018‚Äì6981</a> ) qui peuvent √™tre utilis√©s dans les attaques de couche inf√©rieure pour <b>quitter les machines</b> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">virtuelles</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©chappement de machine virtuelle</a> )</i> .  Les machines virtuelles sur serveurs de fer ne garantissent pas une s√©curit√© absolue, m√™me si elles utilisent la technologie pour diff√©rencier le niveau de fer. <br><br>  D'un autre c√¥t√©, si nous regardons les vecteurs d'attaque sur un hyperviseur nu-m√©tal par rapport au noyau Linux, il est √©vident que ce dernier a une surface d'attaque beaucoup plus grande - en raison de sa taille [noyau Linux] et de sa gamme de capacit√©s.  Une surface d'attaque plus grande implique plus de vecteurs d'attaque potentiels pour les environnements cloud utilisant l'isolement des conteneurs.  Cela se manifeste par l'attention croissante port√©e aux <i>attaques d'√©chappement de conteneurs</i> , qui ont √©t√© rendues possibles gr√¢ce aux exploits du noyau (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2016‚Äì5195</a> <i>[c.</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-√†-</a> <i>d. Dirty COW - approx. Transl.]</i> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2017‚Äì1000405</a> ) <br><br>  Des modules comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SELinux</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AppArmor</a> peuvent √™tre utilis√©s pour augmenter l'isolation <b>√† l'int√©rieur du</b> conteneur.  Malheureusement, de tels m√©canismes de s√©curit√© dans le noyau n'emp√™chent pas les attaques d'√©chappement sur le noyau lui-m√™me.  Ils ne limiteront les actions possibles de l'attaquant que si le d√©passement des limites n'est <i>pas possible</i> .  Si nous voulons g√©rer les sorties √† l'ext√©rieur du conteneur, un m√©canisme d'isolement <b>√† l'ext√©rieur du</b> conteneur ou m√™me du noyau <b>est</b> n√©cessaire.  Par exemple, un bac √† sable <i>(bac √† sable)</i> ! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gVisor</a> est un sandbox pour le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">runtime</a> du conteneur, dont le code a √©t√© ouvert par Google et qui ajoute un noyau suppl√©mentaire entre le conteneur et le noyau du syst√®me d'exploitation.  Ce type de sandbox peut am√©liorer la situation avec des attaques de conteneurs hors limites qui ont lieu <i>au niveau du noyau</i> .  Cependant, les principaux exploits ne sont qu'un des outils de l'attaquant. <br><br>  Pour voir comment d'autres attaques peuvent conduire √† des r√©sultats similaires, vous devez regarder une image plus g√©n√©rale de la fa√ßon dont les conteneurs sont utilis√©s √† l'√®re du cloud. <br><br><h2>  L'effet de l'orchestration des conteneurs sur l'isolement </h2><br>  Pour g√©rer les conteneurs s'ex√©cutant dans des environnements avec de nombreux n≈ìuds, ils introduisent l'orchestration, dans laquelle Kubernetes donne le r√¥le principal.  Il s'av√®re que les bogues d'orchestrateur peuvent √©galement affecter l'isolement des conteneurs. <br><br>  Tim Allclair a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fait</a> une merveilleuse pr√©sentation √† KubeCon 2018, dans laquelle il a not√© quelques surfaces d'attaque.  Dans son rapport, il <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mentionne</a> un exemple ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2017-1002101</a> ), comment les bogues d'orchestration peuvent affecter l'isolement - dans ce cas, gr√¢ce √† la possibilit√© de monter de l'espace disque en dehors du pod.  Les vuln√©rabilit√©s de ce type sont tr√®s probl√©matiques, car  peut contourner le bac √† sable dans lequel le conteneur est emball√©. <br><br>  En introduisant Kubernetes, nous avons √©largi la surface d'attaque.  Il comprend des syst√®mes h√©berg√©s sur le ma√Ætre Kubernetes.  L'un d'eux est le serveur API Kubernetes, o√π ils ont r√©cemment d√©couvert une vuln√©rabilit√© qui pourrait autoriser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> privil√®ges <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">excessifs</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE-2018‚Äì1002105</a> ).  √âtant donn√© que la surface d'attaque du ma√Ætre Kubernetes d√©passe le cadre de ma th√®se, cette vuln√©rabilit√© particuli√®re n'est pas prise en compte. <br><br>  Pourquoi les attaques par √©vasion sont-elles si importantes?  Les conteneurs ont permis d'ex√©cuter de nombreuses applications co-h√©berg√©es dans le m√™me syst√®me d'exploitation.  Il y avait donc un risque associ√© √† l'isolement des applications.  Si une application critique et une autre application vuln√©rable s'ex√©cutent sur le m√™me h√¥te, un attaquant pourrait acc√©der √† une application critique via une attaque contre une application vuln√©rable. <br><br>  Selon le type de donn√©es avec lesquelles l'organisation travaille, leur fuite peut nuire non seulement √† l'organisation elle-m√™me, mais √©galement aux individus et √† l'ensemble du pays.  Comme vous vous en souvenez, nous parlons du secteur public, des finances, des banques ... - une fuite peut s√©rieusement affecter la vie des gens. <br><br>  L'orchestration de conteneurs peut-elle m√™me √™tre utilis√©e dans de tels environnements?  Avant d'entamer une r√©flexion plus approfondie, une √©valuation des risques doit √™tre effectu√©e. <br><br><h2>  Quel risque est acceptable? </h2><br>  Avant d'introduire des mesures de s√©curit√©, il est important de r√©fl√©chir au type d'informations que l'organisation essaie r√©ellement de prot√©ger.  La d√©cision de savoir si des mesures suppl√©mentaires sont n√©cessaires pour emp√™cher d'√©ventuelles attaques d'√©chappement sur les conteneurs d√©pend des donn√©es avec lesquelles l'organisation travaille et des services qu'elle fournit. <br><br>  √Ä long terme, cela signifie que pour obtenir la possibilit√© de quitter le conteneur sur un h√¥te <i>correctement configur√©</i> prot√©g√© par le sandbox du conteneur, l'attaquant doit: <br><br><ol><li>  ex√©cuter du code dans un conteneur, par exemple, par injection de code ou en utilisant des vuln√©rabilit√©s dans le code d'application; </li><li>  profiter d'une autre vuln√©rabilit√©, zero-day, ou pour laquelle un correctif n'a pas encore √©t√© appliqu√© pour quitter le conteneur m√™me <i>s'il existe un sandbox</i> . </li></ol><br>  Comme vous pouvez le deviner, une organisation qui ne consid√®re pas un tel sc√©nario comme acceptable devrait travailler avec des donn√©es ou offrir des services tr√®s exigeants en mati√®re de <b>confidentialit√©</b> , d' <b>int√©grit√©</b> et / ou d' <b>accessibilit√©</b> . <br><br>  √âtant donn√© que la th√®se est consacr√©e √† de tels clients, la perte de l'isolement du syst√®me en sortant du conteneur n'est pas autoris√©e, car  ses cons√©quences sont trop importantes.  Quelles mesures peuvent √™tre prises pour am√©liorer l'isolement?  Pour monter d'un niveau dans l'√©chelle d'isolement, vous devez √©galement regarder les bacs √† sable dans lesquels le noyau du syst√®me d'exploitation est envelopp√©, c'est-√†-dire  machines virtuelles! <br><br>  Les technologies de virtualisation qui utilisent des hyperviseurs h√©berg√©s am√©lioreront la situation, mais nous voulons limiter <i>encore plus la</i> surface d'attaque.  Par cons√©quent, examinons les hyperviseurs install√©s sur le fer et voyons vers quoi ils nous m√®neront. <br><br><h2>  Hyperviseurs sur le fer </h2><br>  Une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tude de l'</a> Agence su√©doise su√©doise de recherche pour la d√©fense a examin√© les risques de virtualisation en relation avec les forces arm√©es su√©doises.  Sa conclusion a parl√© des avantages de ces technologies pour l'arm√©e, m√™me avec les exigences de s√©curit√© strictes et les risques que la virtualisation apporte. <br><br>  √Ä cet √©gard, nous pouvons dire que la virtualisation est utilis√©e (dans une certaine mesure) dans l'industrie de la d√©fense, car elle comporte <b>des risques acceptables</b> .  √âtant donn√© que les agences et les entreprises de l'industrie de la d√©fense sont l'un des clients les plus exigeants en mati√®re de s√©curit√© informatique, nous pouvons √©galement affirmer que le risque acceptable pour eux signifie qu'il est acceptable pour les clients consid√©r√©s dans la th√®se.  Et tout cela - malgr√© les sorties potentielles au-del√† de la machine virtuelle, discut√©es ci-dessus. <br><br>  Si nous d√©cidons d'utiliser ce type de bac √† sable pour les conteneurs, il y a quelques √©l√©ments √† consid√©rer dans le contexte des sp√©cificit√©s natives du cloud. <br><br><h2>  Noeuds sandbox pour machines virtuelles </h2><br>  L'id√©e est que les n≈ìuds du cluster Kubernetes sont des machines virtuelles qui utilisent la virtualisation mat√©rielle.  √âtant donn√© que les machines virtuelles joueront le r√¥le de sandbox pour les conteneurs qui s'ex√©cutent dans des pods, chaque n≈ìud peut √™tre consid√©r√© comme un environnement prot√©g√© par sandbox. <br><br>  Remarque importante √† propos de ces bacs √† sable dans le contexte des bacs √† sable de conteneur d√©j√† mentionn√©s: cette approche vous permet de placer plusieurs conteneurs dans un bac √† sable.  Cette flexibilit√© vous permet de r√©duire les frais g√©n√©raux par rapport au cas o√π chaque conteneur a son propre bac √† sable.  Comme chaque sandbox apporte son propre syst√®me d'exploitation, nous voulons r√©duire leur nombre tout en maintenant l'isolement. <br><br><img src="https://habrastorage.org/webt/wg/2t/jr/wg2tjra8xh9y_i7vlyygm7vulzy.png"><br>  <i>Les machines virtuelles install√©es sur le mat√©riel - n≈ìuds de cluster - agissent comme des sandbox pour les conteneurs.</i>  <i>Les conteneurs s'ex√©cutant sur diff√©rentes machines virtuelles sont d√©limit√©s avec un niveau de risque acceptable.</i>  <i>Cependant, cela ne s'applique pas aux conteneurs s'ex√©cutant sur la m√™me machine virtuelle.</i> <br><br>  Cependant, √©tant donn√© que Kubernetes est capable de changer le placement des gousses pour diverses raisons, ce qui peut <b>ruiner l'id√©e d'utiliser des bacs √† sable</b> , il sera n√©cessaire d'ajouter des restrictions sur le m√©canisme de placement des gousses communes.  Vous pouvez atteindre le r√©sultat souhait√© de plusieurs mani√®res. <br><br>  Au moment de la r√©daction, Kubernetes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">v1.13</a> ) prend en charge trois m√©thodes principales pour contr√¥ler la planification et / ou le lancement des pods: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NodeSelector</a> &amp; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NodeAffinity</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Taints &amp; tol√©rances</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PodAffinity &amp; PodAntiAffinity</a> . </li></ul><br>  La ou les m√©thodes √† utiliser d√©pendent de l'application de l'organisation.  Cependant, il est important de noter que les m√©thodes diff√®rent dans leur capacit√© √† √©liminer les pods apr√®s leur entr√©e dans la phase d'ex√©cution.  Maintenant, seules les souillures sont capables de cela - gr√¢ce √† l'action <code>NoExecute</code> .  Si vous ne traitez pas ce moment de quelque fa√ßon que ce soit et que certaines √©tiquettes changent, tout peut entra√Æner une colocalisation ind√©sirable. <br><br><h2>  Conformit√© aux exigences de colocalisation </h2><br>  La th√®se propose l'id√©e d'utiliser un syst√®me de classification qui montre comment la sensibilit√© se refl√®te dans la colocalisation.  L'id√©e est d'utiliser la relation 1: 1 entre le conteneur et le pod et de d√©terminer la colocalisation des pods en fonction de la classification des applications conteneuris√©es. <br><br>  Pour plus de simplicit√© et de r√©utilisabilit√©, le syst√®me de classification en 3 √©tapes suivant est utilis√©: <br><br><ul><li>  <b>Classe O</b> : l'application n'est pas sensible et n'a pas d'exigences d'isolement.  Il peut √™tre plac√© sur tous les n≈ìuds n'appartenant √† aucune autre classe. </li><li>  <b>Classe PG</b> <i>(groupe priv√©)</i> : une application, avec un ensemble d'autres applications, forme un groupe priv√© pour lequel un n≈ìud d√©di√© est requis.  Une application ne peut √™tre h√©berg√©e que sur des n≈ìuds de classe PG qui ont l'identifiant de groupe priv√© correspondant. </li><li>  <b>Classe P</b> <i>(priv√©e)</i> : une application n√©cessite un n≈ìud priv√© et s√©par√© et ne peut √™tre plac√©e que sur des n≈ìuds vides de sa classe (P). </li></ul><br>  Pour r√©pondre aux exigences de colocalisation pour de nombreuses applications classifi√©es, des taches et des tol√©rances sont utilis√©es, avec lesquelles chaque n≈ìud est affect√© √† une classe, et PodAffinity pour appliquer des restrictions suppl√©mentaires pour les pods avec des applications de classe P ou PG. <br><br>  Cet exemple simplifi√© montre comment les souillures et les tol√©rances peuvent √™tre utilis√©es pour impl√©menter le contr√¥le de colocalisation: <br><br><img src="https://habrastorage.org/webt/ul/qj/ec/ulqjecbgz60kuw7upls5jyrxpik.gif"><br><br>  <i>Les pods 2 et 3 contiennent des applications d'un groupe priv√©, et l'application sur le pod 1 est plus sensible et n√©cessite un n≈ìud d√©di√©.</i> <br><br>  Cependant, les classes P et PG n√©cessiteront des r√®gles d'affinit√© suppl√©mentaires pour garantir que les demandes de d√©marcation sont ex√©cut√©es √† mesure que le cluster et les applications h√©berg√©es se d√©veloppent.  Voyons comment vous pouvez impl√©menter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ces r√®gles</a> pour diff√©rentes classes: <br><br><pre> <code class="plaintext hljs"># Class P affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" namespaces: ["default"] labelSelector: matchExpressions: - key: non-existing-key operator: DoesNotExist</code> </pre> <br>  Les r√®gles d'affinit√© pour les applications de classe P n√©cessitent des n≈ìuds d√©di√©s.  Dans ce cas, le pod ne sera pas planifi√© si le pod se ferme sans <code>non-existing-key</code> .  Tout fonctionnera jusqu'√† ce qu'un seul pod ait cette cl√©. <br><br><pre> <code class="plaintext hljs"># Class PG affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchLabels: class-pg-group-1: foobar podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchExpressions: - key: class-pg-group-1 operator: DoesNotExist</code> </pre> <br>  Pour les applications de classe PG, les r√®gles d'affinit√© co-h√©bergent les pods qui ont un identifiant de groupe <code>class-pg-group-1</code> et sur les n≈ìuds qui ont des pods sans identifiant. <br><br>  Une telle approche nous permettra d'utiliser un syst√®me de classification pour d√©limiter les conteneurs en fonction des exigences pertinentes d'une application conteneuris√©e. <br><br>  Qu'avons-nous obtenu? <br><br><h2>  Conclusion </h2><br>  Nous avons envisag√© un moyen d'impl√©menter des bacs √† sable bas√©s sur l'hyperviseur de type 1 (c'est-√†-dire lanc√© sur du m√©tal nu) pour cr√©er des n≈ìuds dans les clusters Kubernetes et pr√©sent√© un syst√®me de classification qui d√©finit les exigences de d√©limitation des applications conteneuris√©es.  Si nous comparons cette approche avec les autres solutions envisag√©es, elle pr√©sente des avantages en termes d‚Äôisolation du syst√®me. <br><br>  Une conclusion importante est que la strat√©gie d'isolement <i>limite la propagation des</i> attaques d'√©chappement au conteneur.  <b>En d'autres termes, le fait de laisser le conteneur seul n'est pas emp√™ch√©, mais ses effets sont att√©nu√©s.</b>  De toute √©vidence, cela s'accompagne de difficult√©s suppl√©mentaires qui doivent √™tre prises en compte lors de comparaisons similaires. <br><br>  Pour utiliser la m√©thode sp√©cifi√©e dans un environnement cloud et fournir une √©volutivit√©, des exigences suppl√©mentaires seront impos√©es √† l'automatisation.  Par exemple, pour automatiser la cr√©ation de machines virtuelles et leur utilisation dans le cluster Kubernetes.  La chose la plus importante sera la mise en ≈ìuvre et la v√©rification de la classification <b>r√©pandue</b> des demandes. <br><br>  Cela fait partie de ma th√®se sur l' <b>isolement d'une application conteneuris√©e</b> . <br><br>  Pour √©viter qu'un attaquant qui se d√©connecte du conteneur sur un n≈ìud n'attaque les services d'autres n≈ìuds, il est n√©cessaire de consid√©rer <i>les attaques propag√©es par le r√©seau</i> .  Pour prendre en compte ces risques, ma th√®se propose une <b><i>segmentation du r√©seau de clusters</i></b> et introduit des architectures cloud, dont l'une dispose d'un <b>pare-feu mat√©riel</b> . <br><br>  Ceux qui le souhaitent peuvent se familiariser avec le document complet - le texte de la th√®se est accessible au public: ¬´ <a href="">Container Orchestration in Security Demanding Environments at the Swedish Police Authority</a> ¬ª. <br><br><h2>  PS du traducteur </h2><br>  Lisez aussi dans notre blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vuln√©rabilit√© CVE-2019-5736 dans runc, permettant d'obtenir des privil√®ges root sur l'h√¥te</a> "; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">9 meilleures pratiques de s√©curit√© chez Kubernetes</a> ¬ª; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">11 fa√ßons de (ne pas) devenir une victime du piratage Kubernetes</a> ¬ª; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comprendre RBAC chez Kubernetes</a> ¬ª; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OPA et SPIFFE - Deux nouveaux projets au CNCF pour la s√©curit√© des applications cloud</a> ¬ª; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vulnerable Docker VM - un jeu de puzzle virtuel par Docker et pentesting</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440504/">https://habr.com/ru/post/fr440504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440490/index.html">Biomodule 1-2</a></li>
<li><a href="../fr440492/index.html">La Cor√©e du Sud abandonnera les voitures √©lectriques et la construction de nouvelles centrales nucl√©aires</a></li>
<li><a href="../fr440498/index.html">La police de Moscou recevra des points avec reconnaissance faciale</a></li>
<li><a href="../fr440500/index.html">D'abord</a></li>
<li><a href="../fr440502/index.html">Comment lancer votre podcast, un guide pour d√©butants</a></li>
<li><a href="../fr440506/index.html">La sonde en orbite lunaire de la NASA a pris de nouvelles photos de la station chinoise Chang'e 4 - de plus en plus claire</a></li>
<li><a href="../fr440508/index.html">Comment perdre votre passe-temps et en faire une entreprise en ligne r√©ussie aux √âtats-Unis</a></li>
<li><a href="../fr440510/index.html">Qui d√©veloppe des commutateurs 400GbE pour les centres de donn√©es</a></li>
<li><a href="../fr440512/index.html">Factorielles divisibles</a></li>
<li><a href="../fr440514/index.html">Qui peuplera le pays des cyborgs? Le statut de d√©veloppement de la soci√©t√© Motorika a parl√© du statut futur de l'√Æle Russky</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>