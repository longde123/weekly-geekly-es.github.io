<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèæ üêÉ üë©‚ÄçüöÄ Comment nous avons pr√©par√© l'√©tape de qualification de CTFZone-2020 üêÖ üëßüèª üôãüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Du 30 novembre au 1er d√©cembre, la phase de qualification du tournoi CTFZone a enregistr√© 1043 √©quipes du monde entier. Selon nos donn√©es, les probl√®m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons pr√©par√© l'√©tape de qualification de CTFZone-2020</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bizone/blog/481280/"><p>  Du 30 novembre au 1er d√©cembre, la phase de qualification du tournoi <a href="https://ctf.bi.zone/">CTFZone a</a> enregistr√© 1043 √©quipes du monde entier.  Selon nos donn√©es, les probl√®mes ont √©t√© r√©solus m√™me au Zimbabwe (26 adresses IP uniques).  Pour creuser plus profond√©ment, il s'agissait d'une √©quipe universitaire de la ville de Bulawayo. </p><br><p>  Cette ann√©e, la CTFZone est devenue la phase de qualification de la <a href="https://www.oooverflow.io/dc-ctf-2020-quals/">DEF CON CTF</a> , donc l'√©quipe qui remportera la finale (qui se tiendra √† <a href="https://offzone.moscow/ru/">OFFZONE</a> du 16 au 17 avril 2020) ira au tournoi de Las Vegas.  Afin que les chanceux aient le temps d'obtenir des visas, les dates de la conf√©rence ont m√™me √©t√© report√©es √† une date ant√©rieure. </p><br><p>  DEF CON CTF est la comp√©tition de s√©curit√© la plus ancienne et la plus respect√©e pour de nombreuses √©quipes.  Les gagnants ne re√ßoivent pas de branche de palmier, mais m√™me sans elle, tout se passe bien.  Maintenant dans le monde, il n'y a que 6 tournois √† travers lesquels vous pouvez vous qualifier pour DEF CON CTF. </p><br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/iy/2x/xtiy2x-ewxvtrylyhnclq6rfiku.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i_/de/cm/i_decmpgdkn4esd5c8dfjoe12zs.png"></div><br>  <i>G√©ographie des participants CTFZone</i> <br><br><h2>  √Ä propos du concept </h2><br><p> Dans le mouvement international de la FCE, il est arriv√© que des √©quipes de diff√©rentes r√©gions se sp√©cialisent dans certains domaines.  Par exemple, historiquement, les Russes sont meilleurs dans la r√©solution du Web, tandis que les √©quipes asiatiques et am√©ricaines sont plus fortes chez PWN.  Sur le m√™me DEF CON, presque toutes les t√¢ches sont des binaires.  C'est peut-√™tre la raison pour laquelle r√©cemment les √©quipes am√©ricaines et asiatiques ont mieux perform√© l√†-bas.  Chez CTFZone, nous essayons de montrer que CTF n'est pas seulement PWN, mais aussi de nombreuses autres cat√©gories int√©ressantes: web, cryptographie, reverse, OSINT, criminalistique, PPC. </p><br><h3>  <u>Web</u> </h3><br><p>  Dans les missions bas√©es sur le Web, les auteurs - des experts en tests de p√©n√©tration pendant les heures de travail - ont tent√© de transf√©rer les vuln√©rabilit√©s de projets r√©els.  Par exemple, dans la t√¢che <b>Web-Shop</b> , nous avons utilis√© la biblioth√®que python-markdown2 populaire, o√π notre expert a trouv√© une vuln√©rabilit√© de jour z√©ro pour contourner le filtre XSS quelques semaines avant la comp√©tition.  Pendant le CTF, cependant, chacune des quatre √©quipes d√©cisives a trouv√© sa propre version de cette vuln√©rabilit√©, ce qui nous fait r√©fl√©chir √† la qualit√© du filtrage dans la biblioth√®que. </p><br><p>  Pour le travail de <b>carte Web</b> , nous avons utilis√© la vuln√©rabilit√© zero-day dans la classe de validation Java XML standard.  Il a √©t√© d√©couvert lors du test d'un v√©ritable pare-feu d'application Web, nous avons donc invit√© les participants √† contourner WAF, que nous avons d√©velopp√© sp√©cifiquement pour la t√¢che.  La version d√©taill√©e de wrightup sera publi√©e plus tard. </p><br><p>  Eh bien, la t√¢che <b>EmeraldRush a</b> montr√© √† quoi ressemblaient GitLab et Github au cours de l'ann√©e derni√®re - les vuln√©rabilit√©s associ√©es √† Ruby, sur lesquelles elles sont toutes les deux √©crites.  L'un d'eux est bas√© sur CVE-2018-18649 (il n'y a cependant pas d'exploit d'acc√®s libre pour celui-ci), le second a r√©cemment √©t√© d√©couvert et publi√© sur la plateforme HackerOne (pour une description, voir l' <a href="https://blog.teddykatz.com/2019/11/05/github-oauth-bypass.html">article</a> ).  Bien s√ªr, les d√©veloppeurs ont √©t√© inform√©s de ces vuln√©rabilit√©s Web et de toutes les autres avant la comp√©tition, conform√©ment aux principes de divulgation responsable. </p><br><h3>  <u>Crypto</u> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bm/88/yk/bm88ykz-uzxelmwibh5blfghnue.jpeg"></div><br><p>  √Ä son tour, l'√©quipe de d√©veloppement de la crypto-t√¢che a pris comme base non seulement les bogues constamment rencontr√©s dans CTF li√©s √† la mise en ≈ìuvre de RSA, mais √©galement les attaques sensationnelles de ces derni√®res ann√©es.  Par exemple, la t√¢che <b>OCB2 a</b> d√ª faire face √† une attaque contre le syst√®me de cryptage sym√©trique du m√™me nom, pour la d√©couverte de laquelle lors de la conf√©rence Crypto, ils ont d√©cern√© le Best Paper Award. </p><br><p>  Et dans la t√¢che <b>NTRU</b> , il √©tait n√©cessaire d'√©tudier l'attaque d'un syst√®me de r√©seau asym√©trique.  Elle a √©t√© d√©crite en septembre, mais trouver et lire l'article correspondant ne suffisait pas.  L'auteur du probl√®me lui-m√™me a rencontr√© des probl√®mes lorsqu'il s'est av√©r√© que la publication prenait le cas le plus pratique pour la description, ce qui ne fonctionnait pas avec les param√®tres s√©lectionn√©s dans la t√¢che finale.  J'ai d√ª refaire l'algorithme!  Il est int√©ressant qu'un des participants (Alexey Udovenko de l'√©quipe LC / BC) ait r√©solu le probl√®me sans article, ayant trouv√© une m√©thode de solution l√©g√®rement diff√©rente bas√©e sur le m√™me principe. <br><br></p><h3>  <u>M√©decine l√©gale</u> </h3><br><p>  Eh bien, la cat√©gorie la plus d√©licate de notre FCT √©tait la m√©decine l√©gale.  Tout le monde est habitu√© √† penser que ces t√¢ches sont r√©solues √† l'aide de trois utilitaires: avant tout, la volatilit√© et les cha√Ænes.  Mais nous avons eu diff√©rentes t√¢ches - par exemple, une t√¢che <b>In-The-Shadows</b> inhabituelle, pour laquelle il √©tait n√©cessaire de traiter la technique d√©crite <a href="https://github.com/libyal/libvshadow/blob/master/documentation/Volume%2520Shadow%2520Snapshot%2520(VSS)%2520format.asciidoc">ici</a> .  Les d√©tails seront √©galement communiqu√©s ult√©rieurement au comit√© de district. </p><br><h2>  √Ä propos de la formation </h2><br><p>  La pr√©paration directe aux qualifications de la CTFZone comprenait plusieurs √©tapes principales (rassembler une √©quipe de projet, d√©velopper des t√¢ches, tester et d√©ployer une infrastructure, lancer une fus√©e dans l'espace) et de nombreuses auxiliaires (rechercher l'inspiration, √©tablir la communication, tourmenter et douter, la d√©pression, surmonter la crise existentielle). </p><br><p>  Trois mois avant le d√©but de l'assembl√©e g√©n√©rale, les dates ont √©t√© choisies - 7 et 8 d√©cembre.  L'√©quipe est parvenue √† la conclusion que rien n'aurait le temps, mais elle s'est quand m√™me mise au travail.  Et sept jours plus tard, ces d√©lais irr√©alistes ont √©t√© d√©cal√©s une semaine plus t√¥t, car les dates s√©lectionn√©es et toutes les suivantes ont d√©j√† pris d'autres CTF.  Il ne restait plus qu'√† sourire, √† serrer les dents et √† travailler avec une √©nergie tripl√©e.  Il n'y avait pas de retour en arri√®re; d√©veloppement du startanul. </p><br><br><img src="https://habrastorage.org/webt/bj/pr/j7/bjprj7dhi5vsmc2-4nkohbuzxxm.png"><br><br><p>  En cons√©quence, la t√¢che √©tait plus que d'habitude - 30 pi√®ces.  Chaque t√¢che est unique, mais ne dure pas tr√®s longtemps: 3 mois de pr√©paration et seulement 36 heures de vol.  Mais quoi!  Les boutons que vous avez soigneusement peints √† l'avant seront touch√©s par les meilleurs CTF au monde - ils se plongeront dans votre id√©e et vous donneront un retour personnel.  C'est une grande exp√©rience et une occasion de parler de votre travail avec une grande communaut√©.  Apr√®s tout, souvent avec les vuln√©rabilit√©s qui se trouvent dans les t√¢ches, une sorte d'histoire est li√©e.  Certaines t√¢ches √©taient si difficiles que personne ne pouvait les comprendre.  √Ä la fin de la qualification des probl√®mes non r√©solus, il en restait deux: <b>la m√©decine l√©gale populaire</b> et la <b>carte Web</b> . </p><br><h2>  √Ä propos de l'infrastructure </h2><br><p>  L'organisation de l'infrastructure du tournoi pourrait √™tre abord√©e de diff√©rentes mani√®res.  Par exemple, √† l'ancienne, coupez les machines virtuelles pour les d√©veloppeurs de t√¢ches et donnez-leur acc√®s.  Dans cette situation, chaque d√©veloppeur devient un administrateur satisfait de l'h√¥te local, tout fonctionne comme il le souhaite, et il ne reste plus qu'√† fournir la connectivit√© r√©seau.  Il est clair, cependant, qu'il n'est pas question de r√©plication et de tol√©rance aux pannes dans ce cas.  Le responsable de notre infrastructure vient d'√©chouer √† l'un des FFC √† ZeroNights en 2016, et cette fois, enseign√© par une exp√©rience am√®re, a d√©cid√© de faire les choses diff√©remment. </p><br><p>  Nous avons d√©cid√© longtemps o√π nous habiterons, et finalement nous avons d√©cid√© de faire demi-tour dans le cloud.  Les raisons sont claires: des comp√©titions pour les pirates, donc il vaut mieux casser Google, et il y avait d√©j√† des d√©veloppements tout faits dans la zashnik.  Le principal outil de cr√©ation de la plateforme a √©t√© Terraform, qui permet de d√©crire l'infrastructure sous forme de code dans un format d√©claratif, et prend en charge tous les autres gestes.  Autrement dit, vous n'avez pas besoin de r√©fl√©chir √† la mani√®re d'acc√©der √† l'API Google et de lui indiquer le nombre et les machines virtuelles que vous souhaitez d√©ployer. <br>  Il fallait √©galement d√©cider comment lancer les t√¢ches.  Nous avons eu beaucoup de chance que tous les d√©veloppeurs aient d√©j√† pu √©crire des t√¢ches dans Docker.  C'est un tel conteneuriseur hype qui vous permet de compresser un service avec toutes les d√©pendances dans un environnement isol√© qui ne change pas entre les red√©marrages.  Il n'y a pas beaucoup de fa√ßons de travailler avec Docker: ce sont principalement des orchestrateurs comme Compose et k8s.  Pour tout faire magnifiquement, c'est-√†-dire pour impl√©menter Wishlist avec √©quilibrage, rep√®res, tol√©rance aux pannes et autres entreprises, le choix de l'orchestre √©tait √©vident - Kubernetes. </p><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mw/ra/ed/mwraedirnl7haxeqf7fg7yedopk.jpeg"></div><br><p>  Ici, cependant, il y a eu un malentendu entre le cr√©ateur de l'infrastructure et les d√©veloppeurs.  Les pentesters sont une caste sp√©ciale du monde informatique: ils sont en partie comme des administrateurs, des networkers et savent comment cr√©er des bases de donn√©es, et sont orient√©s dans la programmation.  En g√©n√©ral, pas des gens, mais des couteaux suisses.  Ils sont extr√™mement extraordinaires et ambitieux, mais, malheureusement, quand il a √©t√© d√©cid√© d'√©crire Helm pour chaque t√¢che, on a en quelque sorte oubli√© que les pentesters ne sont toujours pas des administrateurs professionnels.  Cela a conduit √† une petite guerre, au cours de laquelle il a fallu expliquer pourquoi certaines d√©cisions sont prises de force et des restrictions sont fix√©es. </p><br><p>  Les gars n'avaient aucune exp√©rience de l'√©criture de Helm, mais ils savaient tous comment √©crire Compose.  Vous comprenez vous-m√™me qu'entre le Compose local et le Helm-chart, il y a un √©cart en quelques semaines, voire quelques mois, pour √©tudier le mat√©riel.  Ce fut la premi√®re cloche qui a laiss√© entendre qu'il y avait des probl√®mes (o√π la FCE serait-elle sans eux, surtout lorsque l'√©quipe et l'administrateur sont nouveaux presque √† chaque fois). </p><br><p>  Par manque de temps, il n'a pas √©t√© possible d'automatiser tout - certaines choses ont d√ª √™tre transmises aux √©paules des d√©veloppeurs eux-m√™mes.  Les pentesters ont d√ª s'asseoir dans des r√©unions o√π on leur a dit comment √©crire des casques, alors qu'eux-m√™mes, apparemment, ont maudit ce d√©vopage sur ce qu'est la lumi√®re.  Mais, malgr√© tout, nous avons r√©ussi - toutes les t√¢ches ont √©t√© d√©crites et regroup√©es dans des graphiques Helm, la surveillance a √©t√© configur√©e sous la forme de Grafana et Prometheus.  Le moment de v√©rit√© est arriv√©. </p><br><p>  Et ici, au grand soulagement de tous, il s'est av√©r√© que l'infrastructure r√©sultante est tr√®s facile √† g√©rer.  Lorsque tout a √©t√© d√©crit et d√©ploy√© sur Google, nous avons organis√© un briefing pour les personnes en service.  Il y en avait dix, et tout le monde a fait un excellent travail: ils ont soulev√© les tomb√©s, collect√© et d√©ploy√© la version corrig√©e dans un cube. </p><br><h2>  √Ä propos des finalistes </h2><br><p>  En cons√©quence, 10 √©quipes √©toiles ont √©t√© s√©lectionn√©es pour la finale.  Pourquoi stellaire?  Le fait est que 6 √©quipes sur 10 sont dans les dix premiers championnats du monde √† CTFtime, et les quatre autres sont un peu derri√®re le top dix, mais aussi dans le top. </p><br><p>  La caract√©ristique principale du tournoi √©tait que la lutte la plus acharn√©e n'√©tait pas pour une place dans les trois premiers, mais pour la dixi√®me ligne.  Il √©tait important pour les participants de se qualifier pour la finale, et l√†, la situation est r√©initialis√©e, et la r√©partition des si√®ges que nous avons bas√©e sur les r√©sultats des comp√©titions de qualification peut changer consid√©rablement. </p><br><br><img src="https://habrastorage.org/webt/er/bh/re/erbhrehftsca65fee8fimrrdvrw.png"><br>  <i>Classement final des finalistes des qualifications de la CTFZone 2019</i> <br><br><h2>  Et ensuite? </h2><br><p>  De plus, il sera possible d'expirer un peu, puis de reprendre une profonde inspiration et de commencer les pr√©paratifs de la finale.  Il se tiendra au format Attaque / D√©fense, et c'est une histoire compl√®tement diff√©rente.  Quelqu'un peut demander: pourquoi tout cela?  La question est bonne, mais il n'y a probablement pas de r√©ponse logique.  C‚Äôest juste que si au moins pendant 5 secondes vous pouvez vraiment vous d√©foncer, vous sentir en vie et voir de quelle √©quipe vous faites partie, alors ce n‚Äôest pas en vain! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481280/">https://habr.com/ru/post/fr481280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481258/index.html">Nous collons le cadre de la go√©lette sans inscription et SMS</a></li>
<li><a href="../fr481260/index.html">Exploration des formats binaires en utilisant le bytecode du fichier .class comme exemple.</a></li>
<li><a href="../fr481264/index.html">Combien de personnes voient votre ic√¥ne dans l'App Store pendant l'application ¬´App du jour¬ª</a></li>
<li><a href="../fr481272/index.html">Gel ou modernisation - que faisons-nous en vacances?</a></li>
<li><a href="../fr481276/index.html">Comment j'ai cr√©√© mon PJ et mon compilateur pendant 12 ans</a></li>
<li><a href="../fr481282/index.html">Que vaut l'id√©e et comment la transformer en concept: des outils de game designer</a></li>
<li><a href="../fr481286/index.html">Monte sur la table! Bureau de petites choses qui ne sont pas du tout petites</a></li>
<li><a href="../fr481288/index.html">Redux Toolkit comme outil pour un d√©veloppement efficace de Redux</a></li>
<li><a href="../fr481290/index.html">COMMENT / Param√®tres r√©seau et VLAN sur un serveur Hetzner et Mikrotik d√©di√©</a></li>
<li><a href="../fr481294/index.html">10 meilleurs outils d'automatisation de test de logiciels</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>