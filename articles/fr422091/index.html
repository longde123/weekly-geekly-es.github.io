<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏻 🖖🏻 🙍🏾 Utilisation efficace des méthodes de tableau en JavaScript ↗️ 👨‍👩‍👦‍👦 💪🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur du matériel, dont nous publions la traduction aujourd'hui, dit qu'au cours des derniers mois, lors de la vérification des demandes de tirage,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation efficace des méthodes de tableau en JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/422091/">  L'auteur du matériel, dont nous publions la traduction aujourd'hui, dit qu'au cours des derniers mois, lors de la vérification des demandes de tirage, il a constamment rencontré les quatre mêmes lacunes associées à l'utilisation irrationnelle des méthodes de tableau en JavaScript.  Afin de réduire ces défauts de code qui apparaissaient auparavant dans ses programmes, il a écrit cet article. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/tp/fn/nn/tpfnnn-6nib_hhiucgr13y9ns00.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Remplacement de indexOf () par includes ()</font> </h2><br>  "Si vous recherchez quelque chose dans un tableau, utilisez la méthode <code>indexOf()</code> ."  J'ai rencontré une telle recommandation dans l'un des cours lorsque j'ai étudié JavaScript.  Cette recommandation est tout à fait normale, on ne peut rien en dire de mal. <br><br>  Sur MDN, vous pouvez découvrir que la méthode <code>indexOf()</code> renvoie le premier index par lequel un certain élément peut être trouvé dans le tableau.  Cela signifie que si nous prévoyons d'utiliser cet index dans le programme, la méthode <code>indexof()</code> est idéale pour trouver des éléments dans des tableaux. <br><br>  Mais que faire si nous avons juste besoin de savoir s'il y a un certain élément dans le tableau ou non?  Autrement dit, nous ne nous intéressons pas à l'index de cet élément, s'il se trouve dans le tableau, mais au fait de sa présence ou de son absence.  Avec cette approche, nous sommes assez à l'aise avec une commande qui renvoie <code>true</code> ou <code>false</code> .  Dans de tels cas, je recommande de ne pas utiliser la méthode <code>indexOf()</code> , mais la méthode <code>includes()</code> , qui renvoie une valeur booléenne.  Prenons un exemple: <br><br><pre> <code class="hljs javascript"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> characters = [ <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-string"><span class="hljs-string">'hulk'</span></span>, <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>, <span class="hljs-string"><span class="hljs-string">'hulk'</span></span>, <span class="hljs-string"><span class="hljs-string">'thor'</span></span>, ]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(characters.indexOf(<span class="hljs-string"><span class="hljs-string">'hulk'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// 2 console.log(characters.indexOf('batman')); // -1 console.log(characters.includes('hulk')); // true console.log(characters.includes('batman')); // false</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Utilisation de la méthode find () au lieu de la méthode filter ()</font> </h2><br>  La méthode <code>filter()</code> est un outil très utile.  Il, sur la base d'un tableau, crée un autre tableau contenant les éléments du tableau d'origine qui correspondent à la condition spécifiée.  Comme on peut le comprendre d'après le nom de cette méthode, elle est destinée au filtrage des tableaux, au cours desquels sont généralement obtenus des tableaux plus courts que les originaux. <br><br>  Et si nous savons qu'après avoir filtré le tableau, il ne restera qu'un élément?  Par exemple, cela peut se produire lorsque vous essayez de filtrer les éléments d'un tableau en fonction d'un identifiant unique.  Dans une telle situation, je ne recommanderais pas d'utiliser la méthode <code>filter()</code> , car le tableau qu'il forme ne contiendra qu'un seul élément.  Si nous sommes intéressés par un élément de tableau avec une valeur unique, alors nous allons travailler avec une seule valeur, et un tableau n'est pas nécessaire pour représenter une telle valeur. <br><br>  Si nous parlons des performances de la méthode <code>filter()</code> , il s'avère que pour former une liste d'éléments correspondant à la condition spécifiée lors de son appel, il faudrait regarder l'ensemble du tableau.  De plus, imaginez qu'il y a des centaines d'éléments dans un tableau qui satisfont une condition donnée.  Cela se traduira par le tableau résultant étant assez grand. <br><br>  Afin d'éviter d'entrer dans de telles situations, je recommanderais d'utiliser la méthode <code>find()</code> .  Lorsqu'elle est appelée, elle reçoit un rappel décrivant la condition, très similaire à celle utilisée avec la méthode <code>filter()</code> , mais la méthode <code>find()</code> ne renvoie que le premier élément qui correspond à la condition.  Dans le même temps, cette méthode cesse de fonctionner immédiatement après avoir trouvé un tel élément.  Par conséquent, il n'a pas à parcourir l'intégralité du tableau. <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; const characters = [ { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span> }, { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span> }, { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCharacter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> character =&gt; character.name === name; } console.log(characters.filter(getCharacter(<span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>))); // [ //   { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, //   { <span class="hljs-type"><span class="hljs-type">id</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, // ] console.log(characters.find(getCharacter(<span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>))); // { id: <span class="hljs-number"><span class="hljs-number">3</span></span>, name: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }</code> </pre> <br><h2>  <font color="#3AC1EF">Remplacement de la méthode find () par la méthode some ()</font> </h2><br>  Je dois admettre que la surveillance dont nous allons discuter maintenant, je l'ai engagée à plusieurs reprises.  Ensuite, ils m'ont conseillé de regarder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MDN</a> et de voir comment améliorer ce que je faisais irrationnellement.  En un mot, cela est très similaire à ce que nous venons de voir en parlant des <code>indexOf()</code> et <code>includes()</code> . <br><br>  Dans le cas ci-dessus, nous avons vu que la méthode <code>find()</code> , comme argument, prend un rappel et retourne un élément de tableau.  La méthode <code>find()</code> peut-elle être appelée la solution la plus efficace si nous devons savoir si le tableau contient une certaine valeur ou non?  Peut-être pas, car cette méthode renvoie la valeur d'un élément de tableau, pas un booléen. <br><br>  Dans une telle situation, je recommanderais d'utiliser la méthode <code>some()</code> , qui renvoie une valeur booléenne. <br><br><pre> <code class="hljs javascript"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> characters = [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'wonder_woman'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'dc_comics'</span></span> }, ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasCharacterFrom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">env</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">character</span></span></span><span class="hljs-function"> =&gt;</span></span> character.env === env; } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(characters.find(hasCharacterFrom(<span class="hljs-string"><span class="hljs-string">'marvel'</span></span>))); <span class="hljs-comment"><span class="hljs-comment">// { id: 1, name: 'ironman', env: 'marvel' } console.log(characters.some(hasCharacterFrom('marvel'))); // true</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Utilisation de la méthode Reduce () au lieu d'une combinaison de méthodes filter () et map ()</font> </h2><br>  Il vaut la peine de dire que la méthode <code>reduce()</code> ne peut pas être classée comme facile à comprendre.  Cependant, si ce qui peut être fait avec cela se fait en deux étapes, en utilisant les méthodes <code>filter()</code> et <code>map()</code> combinées dans une chaîne, il semble que quelque chose dans cette approche soit incorrect. <br><br>  Je dis qu'avec cette approche, vous devez regarder le tableau deux fois.  La première passe, effectuée par la méthode <code>filter()</code> , implique la visualisation de l'ensemble du tableau et la création d'un nouveau tableau filtré.  Après la deuxième passe, effectuée par la méthode <code>map()</code> , encore une fois, un nouveau tableau est créé qui contient les résultats de la transformation des éléments du tableau obtenus après l'exécution de la méthode <code>filter()</code> .  Par conséquent, pour atteindre le tableau fini, deux méthodes sont utilisées.  Chaque méthode a son propre rappel, et pendant l'exécution d'une telle opération à l'aide de la méthode <code>filter()</code> , un tableau est créé avec lequel nous ne pouvons plus travailler. <br><br>  Afin de réduire la charge sur le système créé en utilisant deux méthodes et d'augmenter la productivité des programmes, dans de tels cas, je recommanderais d'utiliser la méthode <code>reduce()</code> .  Le résultat sera le même, mais le code sera meilleur.  Cette méthode vous permet de filtrer les éléments qui nous intéressent et de les ajouter à la batterie.  La batterie peut être une variable numérique qui stocke, disons, la somme des éléments du tableau, elle peut être un objet, une chaîne ou un tableau dans lequel nous pouvons accumuler les éléments dont nous avons besoin. <br><br>  Dans notre cas, puisque nous parlons de l'utilisation de la méthode <code>map()</code> , je conseillerais d'utiliser la méthode <code>reduce()</code> avec un tableau comme accumulateur.  Dans l'exemple suivant, nous filtrons les éléments du tableau qui sont des objets par la valeur du champ <code>env</code> et effectuons leur conversion. <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; const characters = [ { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'wonder_woman'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'dc_comics'</span></span> }, ]; console.log( characters   .filter(character =&gt; character.env === <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>)   .map(character =&gt; Object.assign({}, character, { alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] })) ); // [ //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, <span class="hljs-type"><span class="hljs-type">alsoSeenIn</span></span>: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }, //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, <span class="hljs-type"><span class="hljs-type">alsoSeenIn</span></span>: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] } // ] console.log( characters   .reduce((acc, character) =&gt; {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> character.env === <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>       ? acc.concat(Object.assign({}, character, { alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }))       : acc;   }, []) ) // [ //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, <span class="hljs-type"><span class="hljs-type">alsoSeenIn</span></span>: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }, //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-type"><span class="hljs-type">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, <span class="hljs-type"><span class="hljs-type">alsoSeenIn</span></span>: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] } // ]</code> </pre> <br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Dans cet article, nous avons examiné certaines approches de l'utilisation efficace des méthodes de tableau pour résoudre divers problèmes.  Nous pensons que les idées sur lesquelles les recommandations données par l'auteur de cet article sont basées peuvent aider à améliorer le code JS dans d'autres situations. <br><br>  <b>Chers lecteurs!</b>  Avez-vous déjà rencontré des exemples de mauvaise allocation des mécanismes JavaScript? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/xo/rv/il/xorvilnd4ei8brpdilnh8o--s_i.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422091/">https://habr.com/ru/post/fr422091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422081/index.html">Demande de framework pour un bot multi-plateforme</a></li>
<li><a href="../fr422083/index.html">Site d'une seule page sur Kotlin et SpringBoot sans utiliser JSP</a></li>
<li><a href="../fr422085/index.html">Trier par sélection</a></li>
<li><a href="../fr422087/index.html">Vision par ordinateur dans l'industrie. Conférence à Yandex</a></li>
<li><a href="../fr422089/index.html">Contexte d'exécution JavaScript et pile d'appels</a></li>
<li><a href="../fr422093/index.html">«Storytelling with Data», par Cole Nussbaumer Knaflic: un recueil informel de livres</a></li>
<li><a href="../fr422095/index.html">Gadget audio spécial: voix «silencieuse» de «Medusa», «murmure» de boucliers et 162 dB de LRAD</a></li>
<li><a href="../fr422097/index.html">Notes du fournisseur IoT. Un peu sur les fréquences</a></li>
<li><a href="../fr422099/index.html">Les grands opérateurs gagneront sur la "loi du printemps" en fournissant des services d'hébergement aux petits opérateurs</a></li>
<li><a href="../fr422103/index.html">Pourquoi un programmeur devrait être capable d'écrire correctement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>