<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîï ü§öüèª ‚ôÇÔ∏è Sous le capot d'un JobIntentService üèáüèΩ ‚¨õÔ∏è ‚úçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous parlerons d'un probl√®me avec JobIntentService, sur lequel il y a de nombreuses questions sur les ressources et les rapports cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sous le capot d'un JobIntentService</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432576/"><p>  Dans cet article, nous parlerons d'un probl√®me avec JobIntentService, sur lequel il y a de nombreuses questions sur les ressources et les rapports correspondants dans le traqueur de bogues Google.  Et aussi sur la raison pour laquelle, √† en juger par tout, Google ne le consid√®re pas comme un bug et ferme ces rapports. </p><a name="habracut"></a><br><h2 id="vvedenie">  Pr√©sentation </h2><br><p>  JobIntentServices ont √©t√© cr√©√©s pour le travail en arri√®re-plan.  Ils √©taient largement utilis√©s dans Android 8 et sup√©rieur, lorsque la possibilit√© d'utiliser des services en arri√®re-plan a disparu. <br>  En fait, ils remplacent les services en arri√®re-plan et sont √©galement sous le contr√¥le du planificateur de t√¢ches (JobScheduler). </p><br><p>  Ainsi, le syst√®me a la capacit√© de contr√¥ler la progression des t√¢ches en arri√®re-plan et contr√¥le √©galement les wakelocks lui-m√™me, ce qui a permis d'optimiser la consommation de batterie de l'appareil et d'√©viter l'utilisation incorrecte des wakelocks par les d√©veloppeurs.  Ces √©tapes ont minimis√© la situation lorsque l'appareil ne peut pas plonger en mode veille (mode Doze), ce qui affecte √† nouveau l'√©conomie de batterie. </p><br><h2 id="korotko-o-jobintentservice">  En bref sur JobIntentService </h2><br><p>  En substance, le JobIntentService est le m√™me IntentService sous le contr√¥le du planificateur de t√¢ches (JobScheduler). </p><br><p>  Ex√©cution dans le thread d'arri√®re-plan d'AsyncTask. </p><br><p>  Dans les versions d'Android 4.4 et inf√©rieures, l'IntentService habituel est utilis√©. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une description d√©taill√©e se trouve dans la documentation.</a> </p><br><h2 id="zhiznennyy-cikl-i-podvodnye-kamni">  Cycle de vie et pi√®ges </h2><br><p>  Les deux types de t√¢ches ont le m√™me cycle de vie.  Les t√¢ches sont contr√¥l√©es par le gestionnaire et ont des √©tats. </p><br><p>  Bien que ces √©tats ne soient pas accessibles de l'ext√©rieur, dans certaines circonstances, le syst√®me l√®ve des exceptions dans lesquelles l'application se bloque.  Ces comportements sont un probl√®me et un casse-t√™te pour de nombreux d√©veloppeurs et n'ont malheureusement pas de solution simple.  Pour commencer, nous √©tudions le statut et le cycle de vie des t√¢ches, puis √©tudions les solutions possibles. </p><br><h4 id="posledovatelnost-sostoyaniy-zadach">  S√©quence d'√©tat des t√¢ches </h4><br><p><img src="https://habrastorage.org/webt/ix/nu/if/ixnuifwlnlnsdr6m9ong9riwdd0.png" alt="image"><br>  <em>BINDING</em> - d√©lai de cr√©ation de la t√¢che (liaison de service) 18 secondes. <br>  <em>D√âMARRAGE</em> - √©tat de lancement de la t√¢che, d√©lai d'expiration 8 secondes. <br>  <em>EXECUTING</em> - √©tat d'ex√©cution de la t√¢che, timeout 10 minutes. <br>  <em>STOPPING</em> - √©tat d'arr√™t de la t√¢che (par exemple, apr√®s avoir appel√© cancel ()), d√©lai d'expiration 8 secondes. <br>  <em>FINISHED</em> - l'√©tat final de la t√¢che termin√©e, le dernier √©tat du cycle de vie de la t√¢che. </p><br><h4 id="uproschennaya-shema-zhiznennogo-cikla-zadach">  Diagramme de cycle de vie des t√¢ches simplifi√© </h4><br><p><img src="https://habrastorage.org/webt/ys/rm/t3/ysrmt3elk_ymztwmtymubn94ea0.png" alt="image"><br>  Chaque √©tat de t√¢che a son propre d√©lai d'expiration.  Apr√®s un d√©lai d'expiration, la t√¢che est interrompue quel que soit son √©tat.  En fait, il s'agit d'un m√©canisme de temporisation et est un √©cueil depuis  apr√®s l'expiration du d√©lai, le syst√®me l√®ve une exception de type <code>java.lang.SecurityException</code> et l'application se bloque avec le message suivant L' <code>Caller no longer running, last stopped +1s600ms because: timed out while starting</code> o√π <code>+1s600ms</code> est le temps √©coul√© depuis le d√©lai d'expiration au moment o√π l'exception a √©t√© lev√©e et la ¬´raison¬ª ( <code>because: timed out while starting</code> expiration au <code>because: timed out while starting</code> ) indique l'√©tat dans lequel se trouvait la t√¢che lorsque le d√©lai d'expiration a expir√©. </p><br><h2 id="vyvody">  Conclusions </h2><br><p>  Comme le montre l'exp√©rience, ces exceptions se trouvent dans des applications assez charg√©es. </p><br><p>  √Ä l'appui de ce probl√®me, on peut observer √† la fois sur des appareils faibles et sur des appareils sup√©rieurs.  Ce probl√®me est √©galement indiqu√© par des exceptions lev√©es avec des messages d'expiration.  En cons√©quence, la d√©cision de d√©charger l'application et d'optimiser l'utilisation de JobIntentServices, par exemple, pour √©viter des situations o√π plusieurs JobIntentServices sont lanc√©s en parall√®le, se sugg√®re.  La deuxi√®me solution, dans certains cas plus triviale et parfois plus compliqu√©e que la premi√®re option, consiste √† utiliser JobService. </p><br><p>  De plus, si vous recherchez ce probl√®me sur Google, vous pouvez tomber sur d'autres options "douteuses" pour r√©soudre ce probl√®me, par exemple, vous pouvez voir les liens suivants: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Option 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Option 2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Option 3</a> </p><br><h2 id="p-s">  PS </h2><br><p>  √Ä l'heure actuelle, Google pr√©pare un bon remplacement pour JobService et JobIntentService - il s'agit de Worker et WorkManger du package androidx.work. </p><br><p>  Malheureusement, ces outils ne sont pas encore pr√™ts pour la production et comportent un certain nombre de bogues, mais d√©j√†, comme les tests l'ont montr√©, ils r√©solvent le probl√®me d√©crit ci-dessus. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr432576/">https://habr.com/ru/post/fr432576/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr432564/index.html">Rust 2018 est sorti ... mais qu'est-ce que c'est?</a></li>
<li><a href="../fr432566/index.html">Deux mondes ou ¬´ing√©nieurs ont quelque chose √† dire¬ª. Sur les diff√©rents types de t√¢ches complexes et les processus qui leur sont associ√©s</a></li>
<li><a href="../fr432568/index.html">¬´Quand vous √™tes le r√©dacteur en chef de Rusbase¬ª: un nouveau podcast sur l'utilisation du contenu et une carri√®re dans les m√©dias technologiques</a></li>
<li><a href="../fr432572/index.html">Le transistor m√©tal-air √©tendra la loi de Moore - comment fonctionne la technologie</a></li>
<li><a href="../fr432574/index.html">Conception sophistiqu√©e d'appareils simples</a></li>
<li><a href="../fr432578/index.html">La Chine confirme son leadership dans la course lunaire asiatique</a></li>
<li><a href="../fr432580/index.html">Qu'est-ce que l'IA perce lors de la g√©n√©ration de visages humains</a></li>
<li><a href="../fr432584/index.html">La Chine √† la pointe des syst√®mes de cryptographie quantique</a></li>
<li><a href="../fr432586/index.html">Atomic CSS - ordre et propret√©</a></li>
<li><a href="../fr432590/index.html">Comment Emelya est all√© √† Ludum Dare</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>