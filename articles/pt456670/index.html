<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏽 👩‍🔬 📒 Sobre o método de autenticação muito espião 👩🏼‍✈️ 💈 🐼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Então, enviamos agentes super secretos Alice e Bob para um país inimigo disfarçado. Durante a missão, eles terão que entrar em contato e trabalhar jun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre o método de autenticação muito espião</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456670/"><p> Então, enviamos agentes super secretos Alice e Bob para um país inimigo disfarçado.  Durante a missão, eles terão que entrar em contato e trabalhar juntos, trocar informações, assuntos comuns de espionagem.  Obviamente, tudo isso deve ser feito em conformidade com todas as regras e procedimentos de segurança possíveis. </p><br><p>  De fato, no último turno, queremos revelá-los: tanto a própria missão quanto os próprios agentes e toda a segurança nacional estão em risco.  Portanto, é do nosso interesse fornecer aos espiões as informações mínimas necessárias.  Em particular, quanto menos eles se conhecerem e sobre técnicas de comunicação, melhor. </p><br><p>  Mas como eles identificarão o camarada da sede? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ceb/454/721/ceb4547217be4972a9e5f8fe323cf257.gif" alt="KDPV"></p><br><p>  TL; DR - inventando um mecanismo de autenticação de usuário usando esteganografia para uma agência imaginária de três caracteres de um país inexistente. </p><a name="habracut"></a><br><h2 id="o-volkah-i-ovechih-shkurah">  Sobre lobos e peles de ovelhas </h2><br><p>  Uma capa é uma capa, então nem Alice nem Bob devem levantar suspeitas por nenhuma de suas ações.  O planejamento adequado implica paranóia sobre o monitoramento constante deles em todos os níveis possíveis.  Esta publicação não abordará a tarefa de troca direta de informações (ela merece uma série separada), mas apenas uma maneira de garantir que ela seja transmitida por quem precisa e para quem precisa. </p><br><p>  Muito provavelmente, ambos os espiões terão uma história no formato de cidadãos comuns, além disso, de forma alguma conectados um ao outro.  Portanto, você precisa vetar imediatamente o uso de ferramentas criptográficas clássicas e canais seguros - cada agente de contrainteligência sabe que pessoas honestas que não têm um relacionamento próximo não têm nada a esconder. </p><br><h2 id="chto-delat">  O que fazer </h2><br><p>  Obviamente, essa tarefa não é nova, existia felizmente e foi resolvida muito antes do advento desses na Internet.  E não apenas foi decidido, como algumas decisões foram fortalecidas na cultura e ainda são encontradas em livros, filmes e jogos. </p><br><p>  Vejamos exatamente essa cena: duas pessoas em casacos longos convergem para um local público e trocam frases muito estranhas.  Se a frase e a resposta iniciais estiverem corretas, a autenticação foi bem-sucedida e as pessoas trocam pastas marcadas com "Top Secret" e divergem em direções desconhecidas. </p><br><p>  A desvantagem de tal esquema é imediatamente óbvia - as frases devem ser mantidas em segredo e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muitas vezes alteradas</a> , o que não é muito simples no território inimigo.  Ao mesmo tempo, para não serem falados aleatoriamente e não levarem ao caso do KDPV, eles se tornam bastante proeminentes e aleatórios, o que significa que podem distribuir agentes que os pronunciam. </p><br><p><img src="https://habrastorage.org/webt/pl/pe/sh/plpeshe7ifcmijrxlaziosekgey.png"></p><br><p>  Nós, na era da tecnologia digital, não gostamos desse método.  Especialmente se você se lembrar de que quase todos os canais de comunicação são controlados por alguém e aproveitados por motivos bons e ruins.  E não importa o que eles nos assegurem, a vida das pessoas não deve ser confiável na política de privacidade de qualquer Facebook. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/984/c5d/c5d/984c5dc5dae5cba450b58907693ceed6.png"></p><br><h2 id="steganografiya-opyat">  Esteganografia (de novo?) </h2><br><p>  Hedgehog, é claro que a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">capacidade de se esconder</a> em tal situação parece mais atraente do que nunca.  De fato, mesmo o método descrito é sua subespécie - as frases de código podem ser consideradas como contêineres com apenas um bit de informação. </p><br><p>  O mesmo mamífero do desapego dos insetívoros entende que não se trata simplesmente de atirar contêineres uns aos outros.  Essa troca causará quase mais suspeitas do que alguma criptografia PGP comum, por isso não estamos interessados. </p><br><h3 id="a-o-chem-togda">  E então? </h3><br><p>  Diferentemente dos criptogramas, os contêineres têm uma vantagem óbvia - o contexto do aplicativo.  Qualquer texto, imagem, arquivo de áudio etc., além do conteúdo óbvio, também traz a possibilidade de sua discussão <strong>natural</strong> e pode ser enviado não apenas da baía, mas no processo de um diálogo que não causa suspeitas. </p><br><p>  Munidos dessas idéias, já podemos elaborar um protocolo simples de autenticação esteganográfica com base em uma chave comum: </p><br><ul><li>  A -&gt; B: uma mensagem bonita solicitando um contêiner esteganográfico de certos parâmetros; </li><li>  B: seleciona o contêiner <em>C</em> que corresponde ao contexto e aos parâmetros solicitados; </li><li>  B: similarmente cria uma mensagem <em>M</em> ; </li><li>  B -&gt; A: <em>C '= Incorporado (C, M, K)</em> ; </li><li>  A: Verifica <em>C '</em> quanto à conformidade com os parâmetros definidos; </li><li>  A -&gt; B: <em>M '= Extrato (C', K)</em> ; </li><li>  B: Verifica se <em>M</em> e <em>M '</em> correspondem. </li></ul><br><p>  Esse protocolo tem desvantagens óbvias - Alice e Bob devem ter uma chave comum e funções de incorporação e extração.  Seu comprometimento pode levar à possibilidade de uma análise detalhada do método de autenticação do inimigo e colocar em risco outros usuários e a sede.  Algo precisa ser consertado. </p><br><h2 id="ispolnitel-ne-cherepashka">  O artista não é um bug </h2><br><p>  Se o leitor foi para a escola após o advento das aulas de informática, ele deveria se lembrar de aprender o básico da algoritmo usando o artista de uma tartaruga, formiga e coisas do gênero.  Sua idéia era demonstrar as possibilidades de otimizar um grande número de ações únicas manuais, criando programas simples.  Para resolver nosso problema, precisamos seguir na direção oposta. </p><br><p><img src="https://habrastorage.org/webt/nc/lo/lo/nclolotljunb2zzbkgr2-4qo0ri.png" alt="Bem, não é fofo?"></p><br><p>  Como podemos simplificar a escrita do algoritmo final da sequência de etapas até a descrição processual de acordo com os parâmetros fornecidos, podemos realizar o processo inverso.  Se você imaginar um contêiner como uma matriz de alguns de seus componentes, a incorporação de uma mensagem por chave pode ser escrita como uma sequência ordenada de operações nos elementos do contêiner em índices específicos com vários parâmetros constantes. </p><br><p>  É aí que a não-matemática começa, então peço aos tímidos que simplesmente folheiem os parágrafos de aparência difícil para a seção de operações ou até um pouco mais.  Nada terrível vai acontecer, eu prometo. </p><br><p>  Para incorporar os dados, precisamos de uma sequência do formulário: <em>(f1, S1, i, D1), (f2, S2, j, D2) ...</em> , onde: </p><br><ul><li>  <em>Di</em> - alguma parte dos dados incorporados; </li><li>  <em>i, j</em> são os índices dos elementos do contêiner; </li><li>  <em>fi: (Estado, Elemento, D) -&gt; (Estado, Elemento)</em> - função incorporada; </li><li>  <em>Si</em> é um certo estado, o contexto da operação, <em>(El ', S [i + 1]) = fi (Si, El, Di)</em> . </li></ul><br><p>  Para extraí-lo, você não precisa armazenar partes dos dados (K.O.), portanto, existem triplos suficientes: <em>(g1, S1, I1), (g2, S2, I2) ...</em> com os mesmos valores, apenas <em>gi: (State, Element) -&gt; (Estado, D)</em> . </p><br><p>  Tudo isso pode ser representado pelo diagrama simétrico abaixo.  Se, por algum motivo, não consegui alcançar clareza, não é assustador, basta ler. </p><br><p><img src="https://habrastorage.org/webt/l7/yk/pk/l7ykpkwfi8sfkcebwxryswzo1r0.png" alt="Bem ou não mais"></p><br><p>  Pode-se observar que a função de incorporação possui um maior número de graus de liberdade.  Ao contrário de sua irmã, ela modifica o contêiner, enquanto faz isso com base em dois elementos independentes - dados incorporados e o elemento.  Obrigado, ou, mais precisamente, por isso, são possíveis duas abordagens globais para a implementação do algoritmo de esteganografia por esse sistema: </p><br><ol><li>  Escolha os índices mais apropriados dos elementos a serem alterados de acordo com a função de incorporação (menos perceptível ou que não exija nada) e transfira a sequência formada ligada a um contêiner específico.  Com essa abordagem, eles precisam ser isolados um do outro antes que seja necessário incorporar usando métodos clássicos, como criptografia e outras mídias seguras; </li><li>  Encontre um método para dividir o contêiner em elementos e a função de incorporação que qualquer alteração esperada será igualmente invisível.  Nesse caso, a sequência é independente do contêiner e pode ser criada mesmo por um gerador completamente aleatório.  Menos flexibilidade e falta de controle do pior caso possível.  Por outro lado, essa abordagem é mais simples e mais conveniente quando aplicada em campo, portanto, a seguir, a utilizarei. </li></ol><br><p>  Se o estado não for necessário para o algoritmo, todas as opções acima permanecerão válidas, simplesmente sem uma única letra e bloco no diagrama.  Sem ele, é ainda mais fácil, na verdade. </p><br><h2 id="i-zachem-ono-nam">  E por que precisamos disso? </h2><br><p>  Agora, se você souber com antecedência quais contêineres com quais mensagens e chaves serão usadas, em vez de divulgar completamente as partes do algoritmo, poderá gerar e fornecer agentes para usar apenas sequências semelhantes e um intérprete para elas.  Bem, ok, não apenas dando, é claro, mas mais sobre isso mais tarde. </p><br><h3 id="dobavlyaem-asimmetrichnost">  Adicionar assimetria </h3><br><p>  Mesmo um artista de tartaruga pode desenhar um quadrado de centenas de maneiras diferentes, simplesmente mudando a ordem das operações e adicionando novas.  Isso significa que ninguém nos incomoda e faz o mesmo com as seqüências descritas para dados de entrada fixos. </p><br><p>  Ou seja, podemos pegar a sequência de incorporação, adicionar novas operações, misturar tudo e, para que o resultado permaneça o mesmo.  A menos que, na presença de um estado, seja necessário rastreá-lo e adicionar separadamente as alterações necessárias à sequência.  É por isso que sem é mais fácil, sim. </p><br><p>  De um jeito ou de outro, depois de tão amassado e barulhento, até o próprio incorporador não será mais capaz de entender o que ele está realmente incorporando: qualquer sequência de <em>N</em> operações representará <em>N!</em>  mensagens potencialmente incorporadas - uma para cada permutação das partes incorporadas.  Ao mesmo tempo, o próprio <em>N</em> é uma grande questão.  Portanto, pode-se abrir essas seqüências - elas não fornecem nenhuma informação sobre a mensagem incorporada, nem sobre o algoritmo e a chave usados. </p><br><p>  Ao extrair informações, é muito importante para nós, tanto a ordem (restaurar a mesma mensagem correta quanto possível) e o número de partes a serem extraídas, para que as seqüências de extração permaneçam inalteradas desde o momento do nascimento.  Como eles contêm implicitamente informações sobre a chave, gerador e algoritmo usado, eles, como os animais do livro vermelho, precisam ser armazenados e protegidos.  E mantenha isso em segredo. </p><br><p>  O que a assimetria tem a ver com isso?  O fato é que agora cada sequência de extração está associada a um número infinito de incorporadores.  E restaurar um do outro é, no caso geral, uma tarefa insolúvel. </p><br><h3 id="ekspluatiruem">  Estamos operando </h3><br><p>  Esquecemos qualquer matemática próxima e retornamos à tarefa original - como podemos enviar Alice e Bob para o território inimigo, a fim de: </p><br><ul><li>  eles não se conheciam </li><li>  não tinha algoritmos secretos na mão </li><li>  mas você pode verificar um ao outro enquanto se comunica em um canal aberto? </li></ul><br><p>  Bem, com o primeiro parágrafo, tudo fica claro, apenas não fornecemos informações explícitas uma sobre a outra, nem chaves compartilhadas.  Para o segundo, você precisa se lembrar da descrição do protocolo acima.  Agora podemos excluir diretamente os algoritmos <em>Incorporar</em> e <em>Extrair</em> que representam potenciais segredos de estado e tudo mais.  E, levando isso em consideração, no terceiro é possível elaborar o seguinte protocolo de duas etapas. </p><br><p>  Geração de informações de autenticação <strong>antes do início da missão</strong> com sede como parte confiável de Trent: </p><br><ul><li>  T: seleciona o algoritmo secreto e a chave secreta K, cria com a ajuda deles: <br><ul><li>  Sequência de extração <em>Ex</em> ; </li><li>  adequado para autenticação (abaixo) do contexto <em>Ctx</em> ; </li></ul></li><li>  T -&gt; A: <em>Ctx, Ex</em> ; </li><li>  T: usando <em>Ex</em> e o contexto criado, gera: <br><ul><li>  mensagem <em>M</em> não usada anteriormente para os agentes selecionados dentre as partes <em>| Ex |</em>  ; </li><li>  uma sequência única de <em>Em</em> , abrindo-a como descrito acima; </li></ul></li><li>  T -&gt; B: <em>Em, h (M)</em> , se desejado, cria conjuntos adicionais. </li></ul><br><p>  Assim, Alice tem apenas uma sequência para todas as ocasiões e o contexto de contato futuro, e Bob se torna o feliz proprietário de um conjunto de sequências únicas e hashes de mensagens que eles incorporam. </p><br><p>  O protocolo de autenticação já <strong>durante a missão</strong> é assim: </p><br><ul><li>  A -&gt; B: uma mensagem <em>IM inicial com</em> base no contexto <em>Ctx</em> com uma descrição do contêiner; </li><li>  B: seleciona o <em>C ~ IM</em> apropriado; </li><li>  B -&gt; A: <em>C '= Em (C)</em> ; </li><li>  A: verifica a conformidade com <em>C '~ IM</em> (como as alterações são invisíveis, elas devem ser salvas); </li><li>  A -&gt; B: <em>M '= Ex (C')</em> , marca M 'como usado; </li><li>  B: verifica, <em>h (M ') == h (M)</em> , destrói <em>Em, h (M)</em> . </li></ul><br><p>  Um leitor atento perceberá que, antes do protocolo, Alice e Bob têm apenas um conjunto de informações, o que por si só não significa nada para eles, nem para um adversário em potencial, e apenas durante o "brincar com as cores". </p><br><p>  Cada conjunto aberto de Bob é usado apenas uma vez, que é controlado pelo penúltimo passo de Alice.  Ao encontrar um <em>M</em> usado anteriormente (e, portanto, <em>Em</em> invisível <em>por</em> ela) por outra pessoa, ela percebe que um de seus "associados" é falso. </p><br><p>  O uso repetido pela mesma pessoa diz a ela que ela não está ciente dos meandros do protocolo e certamente não é a pessoa com quem ela teve que fazer contato.  Bem, antes tarde do que nunca. </p><br><p><img src="https://habrastorage.org/webt/bv/6v/0h/bv6v0hcim8kmzndrvn5__thsp1y.png"></p><br><p>  Ok, é assim que tudo parece muito complicado e incompreensível.  Alguém chegou aqui? </p><br><p>  Vamos demonstrá-lo melhor na prática, porque até os próprios espiões não precisam conhecer os detalhes do protocolo para uso, muito menos os leitores pobres.  Apenas a princípio um pouco sobre como tudo foi implementado. </p><br><h2 id="vysokie-tehnologii">  Alta tecnologia </h2><br><p>  Portanto, resta apenas escrever tudo o que é necessário para o protocolo.  Bem, você não faz tudo com as mãos (embora possa).  E hoje a vítima do meu código estará ... <em>girando a roda da fortuna</em> ... Java?  Bem, tudo bem, ao mesmo tempo em que tudo estiver na STL, você não precisará procurar nada. </p><br><p>  Vamos começar com a API necessária.  Para funcionar, você só precisa determinar a classe da matriz de elementos de contêiner com a capacidade de receber e alterar elementos por índice: </p><br><pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StegoContainer</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyElement</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MyElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  i-  } public void set(int i, MyElement v) { //  i-  } public int size() { //    } }</span></span></code> </pre> <br><p>  O uso adicional é reduzido à criação de um invólucro de um autômato esteganográfico sobre o contêiner necessário e ao fornecimento das funções de incorporação e extração de sua entrada: </p><br><pre> <code class="java hljs">StegoMachine&lt;MyState, MyElement&gt; myMachine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StegoMachine( initialState, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyContainer&lt;MyElement&gt;(<span class="hljs-comment"><span class="hljs-comment">/*   */</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> StegoEmbed myEmbed = (st, el, dp) -&gt; { <span class="hljs-comment"><span class="hljs-comment">//    dp   el   st }; final StegoExtract myExtract = (st, el) -&gt; { //     el   st return dp; }; //    MyDataPart part = /*    */; myMachine.exec(1337, myEmbed, part); //... //    /,   //      State currState = myMachine.getState(); //... //    part = myMachine.exec(80085, myExtract); //... //        MyContainer container = (MyContainer) myMachine.getContainer();</span></span></code> </pre> <br><p>  Classes com o sufixo Stateless são usadas da mesma maneira, se a implementação do algoritmo não exigir a manutenção do estado interno. </p><br><p>  Os geradores de sequência podem funcionar como você gosta e não possui uma API comum.  No caso geral, qualquer coisa pode fazer parte dos dados em geral, de bits isolados a arte rupestre em uma codificação separada. </p><br><h3 id="primer-realizacii">  Exemplo de implementação </h3><br><h4 id="o-metode">  Sobre o método </h4><br><p>  Como exemplo de implementação, usando as interfaces criadas, implementei um algoritmo simples da família LSB para imagens de bitmap com compactação sem perdas.  Seus elementos são pixels que não têm vizinhos no bit menos significativo de todos os componentes RGB.  A função incorporar trabalha com bits únicos dos dados de origem e simplesmente altera o bit de ordem inferior do valor de um dos componentes (para o qual o índice apontará). </p><br><p>  É bastante simples, mas é ótimo para implementar o protocolo, já que alterar qualquer elemento é igualmente imperceptível de acordo com a escolha deles, portanto os índices dos elementos a serem alterados são gerados usando um gerador aleatório.  No caso de Java, usando <em>SecureRandom</em> , mas se desejado, ele muda facilmente para sua fonte de entropia. </p><br><p>  <em>No entanto, este é um método muito simples, não recomendo usá-lo para espiões de verdade.</em> </p><br><h4 id="o-heshah">  Sobre hashes </h4><br><p>  Como o texto tende a ficar distorcido, dependendo da identidade simulada do agente (alguns não colocam letras maiúsculas, outros gostam de colocar emoticons etc., outros geralmente são analfabetos), sugiro usar sha256 para calcular o hash, mas apenas com palavras impressas em letras minúsculas: </p><br><pre> <code class="plaintext hljs">h("Hello world?...") == h("hello, world!11")</code> </pre> <br><h4 id="ob-interfeyse">  Sobre a interface </h4><br><p>  O pacote de software consiste em duas partes - uma para gerar sequências e outros hashes para o Trent, a outra para incorporar e verificar as mensagens recebidas quanto à conformidade. </p><br><p>  O trabalho com ambos ocorre na linha de comando, através de seus argumentos e fluxos de entrada e saída; nenhuma outra interface foi fornecida (medo e horror).  Ainda assim, ser aquele funcionário da sede, que o espião - significa ter algum tipo de qualificação.  Bem, se não, ainda mostrarei um exemplo. </p><br><div class="spoiler">  <b class="spoiler_title">Aqui está uma ajuda</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/yx/1m/ge/yx1mge8ligshzbsv7hxi3olw__g.png" alt="Captura de tela de uso"></p><br></div></div><br><h3 id="chto-im-vsem-delat-to">  O que todos eles fazem? </h3><br><p>  Para começar, Trent na sede precisa elaborar informações de autenticação.  Em particular, pensar antecipadamente em uma situação na qual os agentes trabalharão. </p><br><p>  Por exemplo, deixe Bob ser um freelancer de gráficos e Alice, sua cliente.  A autenticação ocorrerá sob o disfarce de um pedido para criar gráficos / design / outra coisa. </p><br><p>  Relatamos essas informações úteis para ambos e retornamos ao próprio protocolo.  Prepararemos uma mensagem incorporada no <em>M.txt</em> com <em>antecedência</em> , minimizando o número de caracteres: "é adequado para mim onde transferir dinheiro".  Gere <em>Em</em> e <em>Ex</em> usando o utilitário para Trent: </p><br><pre> <code class="bash hljs">Trent@HQWorkstation:~$ java -jar HQUtil.jar -ex $(<span class="hljs-built_in"><span class="hljs-built_in">stat</span></span> -c%s <span class="hljs-string"><span class="hljs-string">"M.txt"</span></span>) 4096 &gt; Ex.txt Trent@HQWorkstation:~$ cat Ex.txt | java -jar HQUtil.jar -em <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(cat M.txt)</span></span></span><span class="hljs-string">"</span></span> 0.25 4096 &gt; Em.txt Trent@HQWorkstation:~$ cat M.txt | java -jar HQUtil.jar -h &gt; hash.bin</code> </pre> <br><p>  Aqui <code>$(stat -c%s "M.txt")</code> retorna o tamanho da mensagem em bytes e 4096 - a restrição no intervalo de índices gerados (para permitir o uso de contêineres menores).  Da mesma forma, <code>$(cat M.txt)</code> usado para passar a própria mensagem para o parâmetro da linha de comandos.  Em princípio, você pode fazer sem o bash, usando seu próprio trabalho manual, mas para quem é mais conveniente. </p><br><p>  <em>Ex.txt</em> é passado para Alice, <em>Em.txt</em> e <em>hash.bin</em> para Bob.  Agora imagine que os agentes foram implantados com sucesso e desejam se comunicar - prosseguimos para a execução do protocolo.  Bob coloca seu currículo ou oferta de emprego em alguma troca e Alice começa a se comunicar: </p><br><pre> <code class="plaintext hljs">: ,     %_% :        ,   .  ? : ,   </code> </pre> <br><p>  Bob procura a imagem de um guarda-chuva, talvez até desenhe ele mesmo se a alma é criativa, comprime / impõe um pouco uma marca d'água (ou o que os freelancers estão fazendo lá agora) e faz: </p><br><pre> <code class="bash hljs">Bob@PC:~$ cat Em.txt | java -jar SpyUtil.jar -e umbrella.png</code> </pre> <br><p>  Depois de esperar um pouco, fingindo trabalhar, se na verdade ele não fez isso, ele envia a Alice o contêiner recebido, naturalmente, tendo em mente o contexto: </p><br><pre> <code class="plaintext hljs">: ,  ,     </code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Transmite um guarda-chuva com uma mensagem, 670kb</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/qw/nk/in/qwnkinuhpppynf6ve9gkrmpnehm.png"></p></div></div><br><p>  Por sua vez, recupera a mensagem armazenada internamente: </p><br><pre> <code class="bash hljs">Alice@PC:~$ cat Ex.txt | java -jar SpyUtil.jar -e umbrella.png      </code> </pre> <br><p>  Transforma um conjunto de palavras em uma frase normal e envia para Bob: </p><br><pre> <code class="plaintext hljs">: ,  ,   ?</code> </pre><br><p>  Ele verifica a precisão da mensagem: </p><br><pre> <code class="java hljs">Bob<span class="hljs-meta"><span class="hljs-meta">@PC</span></span>:~$ java -jar SpyUtil.jar -c hash.bin <span class="hljs-string"><span class="hljs-string">",  ,   ?"</span></span> ,  ,   ? - Correct</code> </pre><br><p>  E continua a comunicação fácil, se estiver tudo bem.  Todo o diálogo por parte do observador é mais ou menos assim: </p><br><div class="spoiler">  <b class="spoiler_title">500 kilobyte gif</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ff/ye/he/ffyeheonv4qo9dxdjygalg8kvtq.gif"></p></div></div><br><p>  É claro que a contrainteligência não encontrará nada suspeito em tudo isso interceptado.  De fato, mesmo os métodos de análise stego neste caso nem sempre serão aplicados - bem, alguém encomendou uma foto de um guarda-chuva por 5 dólares, encontrou algo para surpreender a Internet.  Os recursos e pessoas de computação não são infinitos para verificar todas essas situações.  A autenticação foi bem sucedida, a cortina. </p><br><p>  -&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456670/">https://habr.com/ru/post/pt456670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456658/index.html">Crescimento: como avaliamos as habilidades em uma equipe</a></li>
<li><a href="../pt456662/index.html">Como economizar dinheiro com um terapeuta usando desenvolvimento orientado a testes</a></li>
<li><a href="../pt456664/index.html">Quem processar quando um robô perde seu dinheiro</a></li>
<li><a href="../pt456666/index.html">WebTotem ou como queremos tornar a Internet mais segura</a></li>
<li><a href="../pt456668/index.html">Microsoft ML Spark: uma extensão Spark que torna o SparkML mais humano e o LightGBM como um bônus</a></li>
<li><a href="../pt456672/index.html">Receitas Nginx: notificações assíncronas do PostgreSQL para o websocket</a></li>
<li><a href="../pt456674/index.html">Novas oportunidades de promoção no Facebook que você não conhecia</a></li>
<li><a href="../pt456676/index.html">Efetuando login em um aplicativo php distribuído</a></li>
<li><a href="../pt456678/index.html">O estado eletrônico do futuro. Parte 4</a></li>
<li><a href="../pt456680/index.html">Oito leis de nomenclatura no design de UX (parte 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>