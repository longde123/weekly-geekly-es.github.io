<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùé ü•ä üï∑Ô∏è 9 mejores pr√°cticas de seguridad en Kubernetes üë∑üèº üíáüèæ üçó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : Este no es el primer art√≠culo con recomendaciones generales de seguridad sobre Kubernetes que traducimos en nuestro blog. Sin embargo, s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>9 mejores pr√°cticas de seguridad en Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/436300/">  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no</a> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el primer art√≠culo</a> con recomendaciones generales de seguridad sobre Kubernetes que traducimos en nuestro blog.</i>  <i>Sin embargo, su relevancia, al menos como un recordatorio de cosas simples e importantes que no se deben ignorar debido a la falta de tiempo, solo se confirma por los eventos recientes mencionados por el autor al comienzo del material.</i>  <i>Por cierto, el autor es Connor Gilbert, gerente de producto de StackRox, una plataforma preparada para proteger las aplicaciones implementadas dentro de los cl√∫steres de Kubernetes.</i>  <i>Entonces, esto es lo que aconseja a los lectores del blog de CNCF ...</i> <i><br><br></i>  <i><b>NB</b> : Para que el art√≠culo sea m√°s informativo, para algunos de los t√©rminos / m√©todos mencionados por el autor, agregamos enlaces a la documentaci√≥n relevante.</i> <br><br><img src="https://habrastorage.org/webt/rr/ce/ki/rrcekiyjzfuqxa1w3wzc4ilmggg.jpeg"><br><br>  El mes pasado, Kubernetes, el sistema de orquestaci√≥n de contenedores m√°s popular del mundo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descubri√≥ la</a> primera vulnerabilidad de seguridad importante que golpe√≥ el ecosistema del proyecto.  La vulnerabilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CVE-2018-1002105</a> permite a los atacantes comprometer los cl√∫steres a trav√©s del servidor API de Kubernetes, lo que permite que se ejecute c√≥digo malicioso para instalar malware, etc. <a name="habracut"></a><br><br>  A principios de a√±o, la configuraci√≥n incorrecta del panel de control de Kubernetes llev√≥ al hecho de que los recursos de Tesla <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ten√≠an instalado un</a> software de miner√≠a de criptomonedas.  Luego, los atacantes aprovecharon el hecho de que uno de los paneles de Kubernetes no estaba protegido con contrase√±a, lo que les permiti√≥ acceder a una de las c√°psulas con una cuenta para acceder a la infraestructura m√°s grande de Tesla en AWS. <br><br>  Las organizaciones que aceleran la implementaci√≥n de contenedores y su orquestaci√≥n tambi√©n deben tomar medidas obligatorias para proteger una parte tan cr√≠tica de su infraestructura.  A continuaci√≥n se presentan nueve de las mejores pr√°cticas de seguridad de Kubernetes basadas en datos de clientes: s√≠galas para proteger mejor su infraestructura. <br><br><h2>  1. Actualiza a la √∫ltima versi√≥n </h2><br>  En cada versi√≥n trimestral de [Kubernetes] no solo hay correcciones de errores, sino tambi√©n nuevas caracter√≠sticas de seguridad: para aprovecharlas, recomendamos trabajar con la √∫ltima versi√≥n estable. <br><br>  El uso de la √∫ltima versi√≥n con los √∫ltimos parches ser√° especialmente relevante a la luz del reciente descubrimiento de CVE-2018-1002105.  Las actualizaciones y el soporte pueden ser m√°s dif√≠ciles que las nuevas funciones ofrecidas en las versiones, por lo tanto, planifique sus actualizaciones al menos una vez por trimestre. <br><br>  Las actualizaciones simplificadas significativamente pueden usar los proveedores de soluciones Kubernetes administradas. <br><br><h2>  2. Habilite el control de acceso basado en roles (RBAC) </h2><br>  Use <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RBAC</a> (Control de acceso basado en roles) para controlar qui√©n puede acceder a la API de Kubernetes y qu√© derechos tienen.  Por lo general, RBAC est√° habilitado de forma predeterminada en Kubernetes versi√≥n 1.6 y superior (o posterior para algunos proveedores), pero si ha sido actualizado desde entonces y no ha cambiado la configuraci√≥n, debe verificar nuevamente su configuraci√≥n.  Debido al mecanismo por el cual se combina el trabajo de los controladores de autorizaci√≥n en Kubernetes <i>(para la secuencia general de operaciones, lea el art√≠culo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© sucede en Kubernetes cuando comienza la ejecuci√≥n de kubectl? Parte 1</a> " - <b>Transl. Aprox.</b> )</i> , Debe tener habilitados tanto RBAC como ABAC heredado (Control de acceso basado en atributos). <br><br>  Sin embargo, habilitar RBAC no es suficiente, a√∫n debe usarse de manera efectiva.  En el caso general, se deben evitar los derechos de todo el cl√∫ster <i>(en</i> todo el cl√∫ster <i>)</i> , dando preferencia a los derechos en ciertos espacios de nombres.  Evite otorgar privilegios de administrador de cl√∫ster a alguien incluso para la depuraci√≥n: es mucho m√°s seguro otorgar derechos solo cuando sea necesario y de vez en cuando. <br><br>  Puede ver roles de cl√∫ster y simplemente roles con los <code>kubectl get clusterrolebinding</code> o <code>kubectl get rolebinding --all-namespaces</code> .  Y as√≠ puede verificar r√°pidamente a qui√©n se le <code>cluster-admin</code> rol de <code>cluster-admin</code> (en este ejemplo, es solo para el grupo de <code>masters</code> ): <br><br><pre> <code class="bash hljs">$ kubectl describe clusterrolebinding cluster-admin Name: cluster-admin Labels: kubernetes.io/boostrapping=rbac-defaults Annotations: rbac.authorization.kubernetes.io/autoupdate=<span class="hljs-literal"><span class="hljs-literal">true</span></span> Role: Kind: ClusterRole Name: cluster-admin Subjects: Kind Name ---- ---- Group system:masters Namespace ---------</code> </pre> <br>  Si la aplicaci√≥n requiere acceso a la API de Kubernetes, cree cuentas de servicio separadas <i>(lea m√°s sobre ellas en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este material</a> , <b>aprox. Transl.</b> )</i> Y deles el conjunto m√≠nimo de derechos necesarios para cada caso de uso.  Este enfoque es mucho mejor que otorgar demasiados privilegios a la cuenta predeterminada en el espacio de nombres. <br><br>  La mayor√≠a de las aplicaciones no necesitan acceso a la API en absoluto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">puede configurar</a> <code>automountServiceAccountToken</code> en <code>false</code> para ellas. <br><br><h2>  3. Use espacios de nombres para establecer l√≠mites de seguridad </h2><br>  Crear espacios de nombres separados es importante como primer nivel de aislamiento de componentes.  Es mucho m√°s f√°cil ajustar la configuraci√≥n de seguridad, por ejemplo, las pol√≠ticas de red, cuando se implementan diferentes tipos de cargas de trabajo en espacios de nombres separados. <br><br>  ¬øSu equipo usa espacios de nombres de manera eficiente?  Verifique su lista de no est√°ndar (no creado por defecto): <br><br><pre> <code class="bash hljs">$ kubectl get ns NAME STATUS AGE default Active 16m kube-public Active 16m kube-system Active 16m</code> </pre> <br><h2>  4. Separar las cargas de trabajo sensibles. </h2><br>  Una buena pr√°ctica para limitar las posibles consecuencias del compromiso es ejecutar cargas de trabajo con datos confidenciales en un conjunto dedicado de m√°quinas.  Este enfoque reduce el riesgo de que una aplicaci√≥n menos segura acceda a la aplicaci√≥n con datos confidenciales que se ejecutan en el mismo entorno ejecutable del contenedor o en el mismo host.  Por ejemplo, un kubelet de un nodo comprometido generalmente tiene acceso al contenido de los secretos solo si est√°n montados en pods que est√°n programados para ejecutarse en el mismo nodo.  Si se pueden encontrar secretos importantes en m√∫ltiples nodos del cl√∫ster, un atacante tendr√° m√°s oportunidades de obtenerlos. <br><br>  La separaci√≥n se puede hacer usando <i>agrupaciones de nodos</i> ( <i>agrupaciones de nodos</i> (en la nube o locales)), as√≠ como mecanismos de control de Kubernetes, como espacios de nombres, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">contaminaciones, tolerancias</a> y otros. <br><br><h2>  5. Proteger el acceso a los metadatos del servicio en la nube </h2><br>  Los metadatos confidenciales, por ejemplo, las credenciales administrativas de kubelet, pueden ser robados o utilizados maliciosamente para escalar privilegios en un cl√∫ster.  Por ejemplo, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hallazgo reciente</a> dentro de la recompensa de errores de Shopify mostr√≥ en detalle c√≥mo un usuario podr√≠a exceder la autoridad al recibir metadatos de un proveedor de la nube utilizando datos especialmente generados para uno de los microservicios. <br><br>  En GKE, la funci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ocultaci√≥n de metadatos</a> , la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ocultaci√≥n de metadatos</a> , cambia el mecanismo para implementar el cl√∫ster de una manera que evite tal problema, y ‚Äã‚Äãrecomendamos usarlo hasta que se implemente una soluci√≥n permanente. <br><br>  Se pueden requerir contramedidas similares en otros entornos. <br><br><h2>  6. Crear y definir pol√≠ticas de red de cl√∫ster </h2><br>  Pol√≠ticas de red - Pol√≠ticas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">red</a> - le permiten controlar el acceso a la red desde y hacia aplicaciones en contenedores.  Para usarlos, debe tener un proveedor de red con soporte para dicho recurso;  Para los proveedores de soluciones administradas de Kubernetes como Google Kubernetes Engine (GKE), ser√° necesario habilitar el soporte.  (La habilitaci√≥n de pol√≠ticas de red para los cl√∫steres existentes en GKE requerir√° una breve actualizaci√≥n continua). <br><br>  Una vez que todo est√© listo, comience con pol√≠ticas de red simples y predeterminadas, por ejemplo, bloqueando (por defecto) el tr√°fico de otros espacios de nombres. <br><br>  Si est√° utilizando Google Container Engine, puede verificar si el soporte de pol√≠ticas est√° habilitado en cl√∫steres de trabajo: <br><br><pre> <code class="bash hljs">$ gcloud container clusters list \ --format=<span class="hljs-string"><span class="hljs-string">'table[box] (name,addonsConfig.networkPolicyConfig)'</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/li/p_/m0/lip_m0ktegylgndbgtlryqcmxwk.png"><br><br><h2>  7. Establezca la Pol√≠tica de seguridad de pod para el cl√∫ster. </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pol√≠tica de seguridad de pod: pol√≠tica de seguridad de pod</a> : establece los valores predeterminados utilizados para iniciar las cargas de trabajo en el cl√∫ster.  Considere la posibilidad de definir una pol√≠tica y habilitar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">controlador de admisi√≥n de la</a> Pol√≠tica de seguridad de pod: las instrucciones para estos pasos var√≠an seg√∫n el proveedor de la nube o el modelo de implementaci√≥n utilizado. <br><br>  Para empezar, es posible que <code>NET_RAW</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">capacidad</a> <code>NET_RAW</code> en contenedores para protegerse de ciertos tipos de ataques de suplantaci√≥n de identidad. <br><br><h2>  8. Trabajar en seguridad de nodo </h2><br>  Para mejorar la seguridad del host, puede seguir estos pasos: <br><br><ol><li>  <b>Aseg√∫rese de que el host est√© configurado de forma segura y correcta</b> .  Una forma son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los puntos de referencia CIS</a> ;  Muchos productos tienen un autochecker que verifica autom√°ticamente que el sistema cumpla con estos est√°ndares. </li><li>  <b>Monitoree la disponibilidad de red de puertos importantes</b> .  Aseg√∫rese de que su red est√© bloqueando el acceso a los puertos utilizados por kubelet, incluidos 10250 y 10255. Considere restringir el acceso al servidor API de Kubernetes, a excepci√≥n de las redes confiables.  En los cl√∫steres que no requer√≠an autenticaci√≥n y autorizaci√≥n en la API de Kubelet, los atacantes utilizaron el acceso a dichos puertos para lanzar mineros de criptomonedas. </li><li>  <b>Minimice el acceso administrativo a los hosts Kubernetes</b> .  En principio, el acceso a los nodos del cl√∫ster debe ser limitado: para depurar y resolver otros problemas, por regla general, puede prescindir del acceso directo al nodo. </li></ol><br><h2>  9. Habilite el registro de auditor√≠a </h2><br>  Aseg√∫rese de que los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">registros de auditor√≠a</a> est√©n habilitados y de que est√© supervisando la aparici√≥n de llamadas API inusuales o no deseadas en ellos, especialmente en el contexto de fallas de autorizaci√≥n; dichas entradas tendr√°n un mensaje con el estado "Prohibido".  Las fallas de autorizaci√≥n pueden significar que un atacante est√° tratando de aprovechar las credenciales obtenidas. <br><br>  Los proveedores de soluciones administradas (incluido GKE) proporcionan acceso a estos datos en sus interfaces y pueden ayudarlo a configurar notificaciones en caso de fallas de autorizaci√≥n. <br><br><h2>  Mirando hacia el futuro </h2><br>  Siga estas pautas para un cl√∫ster de Kubernetes m√°s seguro.  Recuerde que incluso despu√©s de que el cl√∫ster est√© configurado de forma segura, debe garantizar la seguridad en otros aspectos de la configuraci√≥n y el funcionamiento de los contenedores.  Para mejorar la seguridad de la pila de tecnolog√≠a, explore las herramientas que proporcionan un sistema central para administrar los contenedores desplegados, monitoreando y protegiendo constantemente los contenedores y las aplicaciones nativas de la nube. <br><br><h2>  PD del traductor </h2><br>  Lea tambi√©n en nuestro blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">11 maneras de (no) convertirse en una v√≠ctima del pirateo de Kubernetes</a> " </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Comprender RBAC en Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OPA y SPIFFE: dos nuevos proyectos en CNCF para la seguridad de aplicaciones en la nube</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vulnerable Docker VM: un juego de rompecabezas virtual de Docker y pentesting</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">7 mejores pr√°cticas de manejo de contenedores por parte de Google</a> ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436300/">https://habr.com/ru/post/es436300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436288/index.html">¬øC√≥mo comenz√≥ el monopolio, o un peque√±o alboroto con la PC 5150 de IBM?</a></li>
<li><a href="../es436292/index.html">Controlar, modificar, eliminar: los 10 mejores informes de DotNext 2018 Mosc√∫</a></li>
<li><a href="../es436294/index.html">Modelado de series de tiempo</a></li>
<li><a href="../es436296/index.html">expl√≠cito en detalle</a></li>
<li><a href="../es436298/index.html">Ideas de la mesa: vinilo virtual</a></li>
<li><a href="../es436302/index.html">Experiencia de sustituci√≥n real de importaciones utilizando el sistema de almacenamiento ruso AERODISK</a></li>
<li><a href="../es436304/index.html">Zimbra Collaboration Suite y la lucha contra el phishing</a></li>
<li><a href="../es436306/index.html">Machine Learning para Vertica</a></li>
<li><a href="../es436308/index.html">Rostelecom puede convertirse en un monopolista en el mercado de centros de datos</a></li>
<li><a href="../es436310/index.html">Como lo hizo Ivan Metrics, DevOps lo hizo. Objeto de influencia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>