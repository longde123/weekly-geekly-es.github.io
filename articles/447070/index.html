<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèà ü§µüèª üì• AERODISK ENGINE N2 Pruebas de choque de almacenamiento, prueba de resistencia ‚è´ üöí üë©üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Con este art√≠culo, AERODISK abre un blog sobre Habr√©. ¬°Hurra, camaradas! 


 En art√≠culos anteriores sobre Habr, se consideraron pregunt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AERODISK ENGINE N2 Pruebas de choque de almacenamiento, prueba de resistencia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/aerodisk/blog/447070/"><p><img src="https://habrastorage.org/webt/vw/lz/ss/vwlzssiugbxwzzvjzgil6jm6nhu.jpeg"></p><br><p>  Hola a todos!  Con este art√≠culo, AERODISK abre un blog sobre Habr√©.  ¬°Hurra, camaradas! </p><br><p>  En art√≠culos anteriores sobre Habr, se consideraron preguntas sobre la arquitectura y la configuraci√≥n b√°sica de los sistemas de almacenamiento.  En este art√≠culo, consideraremos una pregunta que no se cubri√≥ anteriormente, pero que a menudo se hizo, sobre la tolerancia a fallas de los sistemas de almacenamiento AERODISK ENGINE.  Nuestro equipo har√° todo lo posible para que el sistema de almacenamiento AERODISK deje de funcionar, es decir  rompi√©ndola </p><a name="habracut"></a><br><p>  Dio la casualidad de que los art√≠culos sobre la historia de nuestra empresa, sobre nuestros productos, as√≠ como un ejemplo de implementaci√≥n exitosa, ya est√°n pendientes de Habr√©, por lo que <u>muchas gracias a nuestros socios: TS Solution y las compa√±√≠as Softline.</u> </p><br><p>  Por lo tanto, no entrenar√© las habilidades de gesti√≥n de copiar y pegar aqu√≠, sino simplemente dar enlaces a los originales de estos art√≠culos: </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Art√≠culo No. 1.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Sobre la historia de la empresa y la arquitectura del sistema de almacenamiento AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Art√≠culo No. 2.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Acerca de c√≥mo configurar r√°pidamente el almacenamiento de AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Art√≠culo No. 3.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Un proyecto interesante sobre la implementaci√≥n de videovigilancia grande bajo la Copa Mundial 2018 en el marco del proyecto Ciudad Segura</strong></a> </li></ul><br><p>  Tambi√©n quiero compartir las buenas noticias.  Pero comenzar√©, por supuesto, con el problema.  Nosotros, como proveedores j√≥venes, entre otros costos, enfrentamos constantemente el hecho de que muchos ingenieros y administradores son cursi y no saben c√≥mo operar adecuadamente nuestros sistemas de almacenamiento. <br>  Est√° claro que la administraci√≥n de la mayor√≠a de los sistemas de almacenamiento se ve aproximadamente igual desde el punto de vista del administrador, pero cada fabricante tiene sus propias caracter√≠sticas.  Y no somos la excepci√≥n. </p><br><p>  Por lo tanto, para simplificar la tarea de capacitar a profesionales de TI, decidimos dedicar este a√±o a la educaci√≥n gratuita.  Para hacer esto, en muchas grandes ciudades de Rusia, estamos abriendo una red de Centros de Competencia AERODISK en los cuales cualquier especialista t√©cnico interesado podr√° tomar un curso de forma totalmente gratuita y recibir un certificado de administraci√≥n de almacenamiento de AERODISK ENGINE. </p><br><p>  En cada Centro de Competencias, instalaremos un soporte de demostraci√≥n completo desde el sistema de almacenamiento AERODISK y un servidor f√≠sico en el que nuestro maestro llevar√° a cabo una capacitaci√≥n a tiempo completo.  El calendario de trabajo de los Centros de Competencia se publicar√° cuando aparezcan, pero ahora hemos abierto un centro en Nizhny Novgorod y la ciudad de Krasnodar es la siguiente en la fila.  Puede inscribirse en la capacitaci√≥n utilizando los enlaces a continuaci√≥n.  Traigo la informaci√≥n actualmente conocida sobre ciudades y fechas: </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (YA FUNCIONA: puede registrarse aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  Hasta el 16 de abril de 2019, puede visitar el centro en cualquier horario de trabajo, y el 16 de abril de 2019 se organizar√° un gran curso de capacitaci√≥n. </li><li>  <strong>Krasnodar</strong> (PR√ìXIMAMENTE - reg√≠strese aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  Del 9 al 25 de abril de 2019 puede visitar el centro en cualquier horario de trabajo, y el 25 de abril de 2019 se organizar√° un gran curso de capacitaci√≥n. </li><li>  <strong>Ekaterimburgo</strong> (APERTURA PRONTO, siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Mayo-junio de 2019. </li><li>  <strong>Novosibirsk</strong> (siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Octubre 2019 </li><li>  <strong>Krasnoyarsk</strong> (siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Noviembre 2019 </li></ul><br><p>  Y, por supuesto, si Mosc√∫ no est√° lejos de usted, puede visitar nuestra oficina en Mosc√∫ en cualquier momento y recibir una capacitaci√≥n similar. </p><br><p>  Eso es todo.  Atado al marketing, ¬°ve a la t√©cnica! </p><br><p>  En Habr√© publicaremos peri√≥dicamente art√≠culos t√©cnicos sobre nuestros productos, pruebas de estr√©s, comparaciones, caracter√≠sticas de uso e implementaciones interesantes. </p><br><h2>  AERODISK ENGINE N2 Pruebas de choque de almacenamiento, prueba de resistencia </h2><br><p>  <b>ACHTUNG!</b>  <em>Despu√©s de leer el art√≠culo, puede decir: bueno, por supuesto, el vendedor se revisar√° a s√≠ mismo para que todo salga "bien", las condiciones del invernadero, etc.</em>  <em>Contestar√©: ¬°nada por el estilo!</em>  <em>A diferencia de nuestros competidores extranjeros, estamos aqu√≠, cerca de usted, y siempre puede venir a nosotros (en Mosc√∫ o en cualquier Comit√© Central) y probar nuestro sistema de almacenamiento de cualquier manera.</em>  <em>Por lo tanto, no tiene mucho sentido ajustar los resultados a la imagen ideal del mundo, porque</em>  <em>Somos muy f√°ciles de verificar.</em>  <em>Para aquellos <s>que son demasiado flojos para caminar</s> y que no tienen tiempo, podemos organizar pruebas remotas.</em>  <em>Tenemos un laboratorio especial para esto.</em>  <em>Contacto</em> </p><br><p>  <strong>ACHTUNG-2!</strong>  <em>Esta prueba no es una prueba de carga porque</em>  <em>aqu√≠ solo nos preocupa la tolerancia a fallas.</em>  <em>En un par de semanas, prepararemos un stand m√°s potente y realizaremos pruebas de carga de los sistemas de almacenamiento, publicando los resultados aqu√≠ (por cierto, se aceptan los deseos de pruebas).</em> </p><br><p>  Entonces, vamos a descansar. </p><br><h3>  Banco de pruebas </h3><br><p>  Nuestro stand consiste en el siguiente hierro: </p><br><ul><li>  1 x almacenamiento Aerodisk Engine N2 (2 controladores, 64 GB de cach√©, 8xFC puertos 8Gb / s, 4x puertos Ethernet 10Gb / s SFP +, 4x puertos Ethernet 1Gb / s);  Los siguientes discos est√°n instalados en el sistema de almacenamiento: </li><li>  4 x disco SSD SAS de 900 GB; </li><li>  12 x unidades SAS 10k de 1,2 TB; </li><li>  1 x servidor f√≠sico con Windows Server 2016 (2xXeon E5 2667 v3, 96GB RAM, 2xFC puertos 8Gb / s, 2x puertos Ethernet 10Gb / s SFP +); </li><li>  2 x conmutador SAN 8G; </li><li>  2 x conmutador LAN 10G; </li></ul><br><p>  Conectamos el servidor al almacenamiento mediante conmutadores a trav√©s de FC y Ethernet 10G.  Esquema del stand a continuaci√≥n. </p><br><img src="https://habrastorage.org/webt/vd/b7/lb/vdb7lbehpksnfqj0ssv46rwfcta.png" alt="imagen"><br><p>  Los componentes necesarios, como MPIO e iniciador iSCSI, est√°n instalados en Windows Server. <br>  Las zonas se configuran en los conmutadores FC, las VLAN correspondientes se configuran en los conmutadores LAN y MTU 9000 se instala en los puertos de almacenamiento, los conmutadores y el host (c√≥mo hacer todo esto se describe en nuestra documentaci√≥n, por lo que no describiremos este proceso aqu√≠). </p><br><h3>  Metodolog√≠a de prueba </h3><br><p>  El plan de prueba de choque es el siguiente: </p><br><ul><li>  Verificaci√≥n de falla del puerto FC y Ethernet. </li><li>  Verificaci√≥n de falla de energ√≠a. </li><li>  Comprobando la falla del controlador. </li><li>  Verifique la falla del disco en un grupo / grupo. </li></ul><br><p>  Todas las pruebas se realizar√°n en condiciones de carga sint√©tica, que generaremos con IOMETER.  Paralelamente, realizaremos las mismas pruebas, pero en condiciones de copiar archivos grandes al sistema de almacenamiento. </p><br><p>  La configuraci√≥n de IOmeter es la siguiente: </p><br><ul><li>  Lectura / Escritura - 70/30 </li><li>  Bloque: 128k (decidimos mojar el sistema de almacenamiento con bloques grandes) </li><li>  El n√∫mero de subprocesos es 128 (que es muy similar a la carga de trabajo) </li><li>  Al azar completo </li><li>  N√∫mero de trabajadores: 4 (2 para FC, 2 para iSCSI) </li></ul><br><img src="https://habrastorage.org/webt/th/p7/94/thp7947ybxy0k63hkq4_b-o7bnc.png"><br><img src="https://habrastorage.org/webt/jz/pm/wl/jzpmwldtif_cvydlavihoj2muby.png"><br><br>  <b>La prueba tiene las siguientes tareas:</b> <br><ol><li>  Aseg√∫rese de que la carga sint√©tica y el proceso de copia no se interrumpan y no causen errores con varios modos de falla. </li><li>  Aseg√∫rese de que el proceso de conmutaci√≥n de puertos, controladores, etc., est√© suficientemente automatizado y no requiera acciones del administrador en caso de fallas (es decir, con la conmutaci√≥n por error, por supuesto, no se habla de fallas). </li><li>  Aseg√∫rese de que la informaci√≥n se muestre correctamente en los registros. </li></ol><br><h3>  Host y preparaci√≥n de almacenamiento </h3><br><p>  Configuramos el acceso de bloque en el almacenamiento utilizando los puertos FC y Ethernet (FC e iSCSI, respectivamente).  C√≥mo hacer esto, los chicos de TS Solution describieron en detalle en un art√≠culo anterior ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/en/company/tssolution/blog/432876/</a> ).  Bueno y, por supuesto, nadie cancel√≥ manuales y cursos. </p><br><p>  Configuramos un grupo h√≠brido utilizando todas las unidades que tenemos.  Se agregan 2 discos SSD a la memoria cach√©, se agregan 2 discos SSD como nivel de almacenamiento adicional (nivel en l√≠nea).  Agrupamos 12 discos SAS10k en RAID-60P (triple paridad) para verificar la falla de tres discos en un grupo a la vez.  Se dej√≥ un disco para Autocorrecci√≥n. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zq/9i/yp/zq9iyp63dnbgws4d6tljrqdauao.png"></a> </p><br><p>  Conectamos dos LUN (uno en FC, uno en iSCSI). </p><br><img src="https://habrastorage.org/webt/au/ep/3o/auep3oxzc5aye2vvimnopowk0mk.png"><br><p>  Ambos LUN son propiedad del controlador Engine-0. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zb/bc/up/zbbcupqx0qx2khjxkftflnpxb14.png"></a> </p><br><h3>  Comience la prueba </h3><br><p>  Encienda IOMETER con la configuraci√≥n anterior. </p><br><img src="https://habrastorage.org/webt/sv/tq/zm/svtqzmxa23agepb4llmphniye2y.png"><br><p>  Arreglamos el ancho de banda de 1.8 GB / sy un retraso de 3 milisegundos.  No hay errores (recuento total de errores). </p><br><p>  Al mismo tiempo, desde la unidad local "C" de nuestro host, simult√°neamente comenzamos a copiar dos archivos grandes de 100 GB a los LUN FC e iSCSI del sistema de almacenamiento (discos E y G en Windows) utilizando otras interfaces. </p><br><p>  Arriba est√° el proceso de copia a LUN FC, abajo est√° iSCSI. </p><br><img src="https://habrastorage.org/webt/uy/en/hs/uyenhsu8kfolew7ys9zdxytixds.png"><br><br><h3>  Prueba No. 1. Desactivaci√≥n de puertos de E / S </h3><br><p>  Nos acercamos a la parte posterior del sistema de almacenamiento))) y con un simple movimiento de mu√±eca sacamos todos los cables FC y Ethernet 10G del controlador Engine-0.  Como si una se√±ora de la limpieza con un trapeador pasara y decidiera lavar el piso justo donde <del>  mocos mentir </del>  los cables estaban tendidos (es decir, el controlador sigue funcionando, pero los puertos de E / S est√°n muertos). </p><br><img src="https://habrastorage.org/webt/sw/ok/56/swok56qvdezrj1c13dmwibj2miu.jpeg"><br><p>  Nos fijamos en IOMETER y copia de archivos.  El ancho de banda se redujo a 0.5 GB / s, pero r√°pidamente volvi√≥ a su nivel anterior (en aproximadamente 4-5 segundos).  No hay errores </p><br><img src="https://habrastorage.org/webt/es/7f/ng/es7fngm-y2jgf2alxdzbmqcmg8y.png"><br><p>  La copia de archivos no se detuvo, hay una reducci√≥n en la velocidad, pero no es cr√≠tica (de 840 MB / s se redujo a 720 MB / s).  La copia no se detuvo. </p><br><p>  Buscamos en los registros del sistema de almacenamiento y vemos un mensaje sobre la falta de disponibilidad de puertos y el movimiento autom√°tico del grupo. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/i0/z7/pv/i0z7pvkfpnjjzs3itnkertzq58c.png"></a> </p><br><p>  Adem√°s, el tablero de instrumentos nos dice que no todo es muy bueno con los puertos FC. </p><br><img src="https://habrastorage.org/webt/rs/h_/ev/rsh_evhm1pt0nzbwtoyselmpcv4.png"><br><p>  Los puertos de E / S de almacenamiento fallaron <strong>correctamente.</strong> </p><br><h3 id="test--2-otklyuchenie-kontrollera-shd">  Prueba n√∫mero 2. Deshabilitar el controlador de almacenamiento </h3><br><p>  Casi de inmediato (despu√©s de volver a enchufar los cables al sistema de almacenamiento), decidimos terminar el almacenamiento retirando el controlador del chasis. </p><br><p>  Nuevamente, nos acercamos al sistema de almacenamiento desde atr√°s (nos gust√≥))) y esta vez sacamos el controlador Engine-1, que en este momento es el propietario de RDG (al cual el grupo se mud√≥). </p><br><p>  La situaci√≥n en IOmeter es la siguiente.  La salida de entrada se detuvo durante unos 5 segundos.  Los errores no se acumulan. </p><br><img src="https://habrastorage.org/webt/bz/ve/gr/bzvegryvez7_ba9vegtf3f9fdbc.png"><br><p>  Despu√©s de 5 segundos, se reanud√≥ la E / S, con aproximadamente las mismas tasas de rendimiento, pero con demoras de 35 milisegundos (las demoras se corrigieron despu√©s de unos minutos).  Como se puede ver en las capturas de pantalla, el valor del recuento total de errores es 0, es decir, no hubo errores de escritura o lectura. </p><br><img src="https://habrastorage.org/webt/kr/-_/ym/kr-_ymrz1ri4ihrlvzq-ggdzuqw.png"><br><p>  Buscamos copiar nuestros archivos.  Como puede ver, no se interrumpi√≥, hubo una peque√±a reducci√≥n en el rendimiento, pero en general, todo volvi√≥ a los mismos ~ 800 MB / s. </p><br><img src="https://habrastorage.org/webt/aw/3v/-2/aw3v-2qgghdkeurdw69fb1gzpas.png"><br><p>  Vamos al sistema de almacenamiento y vemos abuso en el panel de informaci√≥n de que el controlador Engine-1 no est√° disponible (por supuesto, lo golpeamos). </p><br><img src="https://habrastorage.org/webt/8a/-a/th/8a-athpryrmgg972g0us7zpcrbc.png"><br><p>  Tambi√©n vemos una entrada similar en los registros. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/20/3c/j_/203cj_pltjuab6nqituqfooel8s.png"></a> </p><br><p>  La falla del controlador de almacenamiento tambi√©n ha sobrevivido con <strong>√©xito.</strong> </p><br><h3 id="test--3-otklyuchenie-bloka-pitaniya">  Prueba n√∫mero 3. Desconexi√≥n de la fuente de alimentaci√≥n. </h3><br><p>  Por si acaso, comenzamos a copiar los archivos nuevamente, pero IOMETER no se detuvo. <br>  Tiramos del BP-Schnick. </p><br><img src="https://habrastorage.org/webt/vm/ze/_o/vmze_okexjlv5n-voldjt0mik-s.jpeg"><br><p>  Se agreg√≥ otra alerta al almacenamiento en el panel de informaci√≥n. </p><br><img src="https://habrastorage.org/webt/8o/ym/lr/8oymlratdbsngvztm2z52cv3v4g.png"><br><p>  Tambi√©n vemos en el men√∫ de sensores que los sensores asociados con la fuente de alimentaci√≥n extra√≠da se vuelven rojos. </p><br><img src="https://habrastorage.org/webt/m_/rr/zw/m_rrzwbyfqjd3-eeo9mgawbm8kq.png"><br><p>  SHD contin√∫a trabajando.  La falla de BP-Schnick no afecta el funcionamiento del sistema de almacenamiento de ninguna manera, desde el punto de vista del host, la velocidad de copia y los indicadores IOMETER permanecieron sin cambios. </p><br><p>  Prueba de falla de energ√≠a completada con <strong>√©xito.</strong> </p><br><p>  Antes de la prueba final, decidimos revivir un poco el SHD, volver a poner el controlador y el BP-shnik, y tambi√©n poner las cosas en orden con los cables, que el SHD nos inform√≥ felizmente con iconos verdes en su panel de salud. </p><br><img src="https://habrastorage.org/webt/zp/gm/fp/zpgmfpl2_rwhn6iowq5sriglb2a.png"><br><br><h3 id="test--4-otkaz-tryoh-diskov-v-gruppe">  Prueba n√∫mero 4. Fallo de tres discos en el grupo </h3><br><p>  Antes de esta prueba, realizamos un paso preparatorio adicional.  El hecho es que el almacenamiento ENGINE proporciona algo muy √∫til: diferentes pol√≠ticas de reconstrucci√≥n (reconstrucci√≥n).  Anteriormente, TS Solution escribi√≥ sobre esta caracter√≠stica, pero recuerda su esencia.  El administrador de almacenamiento puede especificar la prioridad de la asignaci√≥n de recursos durante la reconstrucci√≥n.  O en la direcci√≥n del rendimiento de E / S, es decir, una reconstrucci√≥n m√°s larga, pero no hay reducci√≥n de rendimiento.  O en la direcci√≥n de la velocidad de reconstrucci√≥n, pero el rendimiento se ver√° reducido.  O una opci√≥n equilibrada.  Dado que el rendimiento del almacenamiento durante la reconstrucci√≥n de un grupo de discos es siempre un dolor de cabeza para el administrador, probaremos la pol√≠tica con un sesgo hacia el rendimiento de E / S y en detrimento de la velocidad de la reconstrucci√≥n. </p><br><img src="https://habrastorage.org/webt/8k/zn/kw/8kznkwmg0cwy_2bde0jafjknsbw.png"><br><p>  <strong>Ahora verifique el fallo de las unidades.</strong>  Tambi√©n habilitamos la grabaci√≥n en LUN (archivos e IOMETER).  Dado que tenemos un grupo de triple paridad (RAID-60P), significa que el sistema debe soportar la falla de tres discos, y despu√©s de la falla debe funcionar el reemplazo autom√°tico, un disco debe estar en el RDG en lugar de uno de los fallidos, y la reconstrucci√≥n debe comenzar en √©l. </p><br><p>  Nosotros comenzamos  Primero, a trav√©s de la interfaz de almacenamiento, resalte los discos que queremos extraer (para no perder y no extraer el disco de reemplazo autom√°tico). </p><br><p> <a href=""><img src="https://habrastorage.org/webt/65/uw/jm/65uwjm8dhk9hw2znrqwwendgrse.png"></a> </p><br><p>  Verifique la indicaci√≥n en la plancha.  Todo est√° bien, vemos las tres unidades resaltadas. </p><br><img src="https://habrastorage.org/webt/da/-h/tc/da-htc08d-p2gjbx6ewbq_itfay.jpeg"><br><p>  Y saca estos tres discos. </p><br><img src="https://habrastorage.org/webt/om/l0/vn/oml0vntroubzlzesyecekjzdxy4.jpeg"><br><p>  Nos fijamos en el anfitri√≥n.  Y all√≠ ... no pas√≥ nada especial. </p><br><img src="https://habrastorage.org/webt/6n/yt/dt/6nytdttcprx0vdzzy4pac6aq87g.png"><br><img src="https://habrastorage.org/webt/9n/_8/nv/9n_8nvme4niskzv2ej2snvvjs0o.png"><br><p>  Las tasas de copia (son m√°s altas que al principio, porque el cach√© se calent√≥) y el IOMETER no cambian mucho al extraer discos e iniciar la reconstrucci√≥n (dentro del 5-10%). </p><br><p>  Nos fijamos en el almacenamiento. </p><br><img src="https://habrastorage.org/webt/my/px/e3/mypxe3hllsk-w3kp_pimqivdbnu.png"><br><p>  En el estado del grupo, vemos que el proceso de reconstrucci√≥n ha comenzado y est√° a punto de completarse. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/jr/on/o5/jrono5wwt7mxpxmznkrmhqugzim.png"></a> </p><br><p>  El esqueleto RDG muestra que 2 discos est√°n en estado rojo y uno ya ha sido reemplazado.  El disco de Autocorrecci√≥n ya no est√° all√≠, reemplaz√≥ el tercer disco fallido.  Rebild se ejecut√≥ durante varios minutos, la grabaci√≥n de archivos no se interrumpi√≥ cuando fallaron 3 discos, el rendimiento de E / S no cambi√≥ mucho. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/_u/gj/-i/_ugj-izftgd1ka7nuyd4bph8miw.png"></a> </p><br><img src="https://habrastorage.org/webt/xw/2i/af/xw2iafiq60i63kvrd6aecyxzg0i.png"><br><p>  La prueba de falla del disco definitivamente ha sido <strong>exitosa.</strong> </p><br><h3 id="zaklyuchenie">  Conclusi√≥n </h3><br><p>  Sobre esto, decidimos detener el abuso de los sistemas de almacenamiento.  Para resumir: </p><br><ul><li>  Verificaci√≥n de falla de puerto FC - Exitosa </li><li>  Verificaci√≥n de falla del puerto Ethernet - Exitosa </li><li>  Verificaci√≥n de falla del controlador - exitosa </li><li>  Verificaci√≥n de falla de energ√≠a: exitosa </li><li>  Verifique la falla del disco en el grupo \ pool - con √©xito </li></ul><br><p>  Ninguna de las fallas detuvo la grabaci√≥n y no caus√≥ errores de carga sint√©tica, la reducci√≥n de rendimiento, por supuesto, fue (y sabemos c√≥mo vencer esto, lo que haremos pronto), pero, dado que esto es segundos, es bastante aceptable.  Conclusi√≥n: la tolerancia a fallas de todos los componentes de almacenamiento de AERODISK funcion√≥ a nivel, no hay puntos de falla. </p><br><p>  Obviamente, en el marco de un art√≠culo, no podemos probar todos los escenarios de falla, pero tratamos de cubrir los m√°s populares.  Por lo tanto, env√≠e sus comentarios, deseos para las siguientes publicaciones y, por supuesto, cr√≠ticas adecuadas.  Estaremos encantados de debatir (y mejor asistir a la capacitaci√≥n, por si acaso, duplicar el horario).  Hasta nuevas pruebas! </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (YA FUNCIONA: puede registrarse aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  Hasta el 16 de abril de 2019, puede visitar el centro en cualquier horario de trabajo, y el 16 de abril de 2019 se organizar√° un gran curso de capacitaci√≥n. </li><li>  <strong>Krasnodar</strong> (PR√ìXIMAMENTE - reg√≠strese aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  Del 9 al 25 de abril de 2019 puede visitar el centro en cualquier horario de trabajo, y el 25 de abril de 2019 se organizar√° un gran curso de capacitaci√≥n. </li><li>  <strong>Ekaterimburgo</strong> (APERTURA PRONTO, siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Mayo-junio de 2019. </li><li>  <strong>Novosibirsk</strong> (siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Octubre 2019 </li><li>  <strong>Krasnoyarsk</strong> (siga la informaci√≥n en nuestro sitio web o en Habr√©); <br>  Noviembre 2019 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447070/">https://habr.com/ru/post/447070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447056/index.html">C√≥mo se calculan los hombres locos - 2: El brillo y la pobreza del diagn√≥stico fisiopatol√≥gico</a></li>
<li><a href="../447058/index.html">Nuevo equilibrador de carga de CPU MIT</a></li>
<li><a href="../447062/index.html">Historia de la tecnolog√≠a de audio: sintetizadores y samplers</a></li>
<li><a href="../447064/index.html">Conozca el Manual de cumplimiento de licencia de c√≥digo abierto</a></li>
<li><a href="../447068/index.html">Compara cadenas similares</a></li>
<li><a href="../447072/index.html">"Hice todo, fue una historia divertida": un podcast sobre marketing de contenidos y una carrera en medios inform√°ticos</a></li>
<li><a href="../447074/index.html">Estamos escribiendo el primer microservicio en Node.js con comunicaci√≥n a trav√©s de RabbitMQ</a></li>
<li><a href="../447076/index.html">OWASP Russia Meetup - Grabaci√≥n de actuaciones</a></li>
<li><a href="../447078/index.html">Flightradar24: ¬øc√≥mo funciona? Parte 2, protocolo ADS-B</a></li>
<li><a href="../447080/index.html">Redes para los m√°s peque√±os. Parte oh eso es todo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>