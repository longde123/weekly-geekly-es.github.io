<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêª ‚èØÔ∏è ü§òüèΩ Ne dors pas! Comment nous avons appris √† publier 12 000 offres de billets par nuit üçÑ üëºüèº üëèüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le fonctionnement ininterrompu de milliers de magasins Pyaterochka d√©pend en grande partie de logiciels fiables et personnalis√©s. Maintenant, le r√©sea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ne dors pas! Comment nous avons appris √† publier 12 000 offres de billets par nuit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/483800/">  Le fonctionnement ininterrompu de milliers de magasins Pyaterochka d√©pend en grande partie de logiciels fiables et personnalis√©s.  Maintenant, le r√©seau utilise le produit de GK SOFTWARE, qui est pass√© de la version en bo√Æte au d√©veloppement de code √† l'int√©rieur de X5.  Dans notre article, nous vous expliquerons la voie √† suivre pour installer les versions, garantissant ainsi la croissance des activit√©s de l'entreprise, des magasins uniques de nouveaux logiciels aux 15 000 actuels. <br><br><img src="https://habrastorage.org/webt/ps/qh/vf/psqhvf_lkkljsaixaki1r0svy2w.jpeg"><br><a name="habracut"></a><br><h3>  Les cas d'autrefois, une profonde tradition </h3><br>  La p√©riode de dix ans pour l'informatique dans le monde moderne appartient √† l'histoire.  En 2009, la premi√®re cha√Æne de magasins Pyaterochka vient de passer √† GK, les premi√®res t√¢ches de mise √† jour logicielle sont apparues.  Le processus ressemblait √† ceci: travail compl√®tement manuel, analyse des journaux avec les ¬´yeux¬ª dans chaque magasin, probl√®mes constants avec le d√©marrage du logiciel - √† la caisse, l'√©quipement cesse de s'initialiser, puis les services GK ne d√©marrent pas sur le serveur. <br><br>  Au fur et √† mesure que le syst√®me GK se stabilisait et que les outils de mise √† jour se d√©veloppaient, nous sommes all√©s d√©ployer √† travers la composante centrale du syst√®me GK - Storemanager - √† raison de 100 √† 200 magasins par nuit (par employ√©).  Ensuite, cela a √©t√© consid√©r√© comme une grande r√©ussite.  Pour assurer la rapidit√© de la mise √† jour dans 1000 magasins, un personnel √©tait d√©j√† requis - ce n'est qu'avec une √©quipe de 6 personnes par nuit que nous pourrions atteindre le nombre de points de vente requis.  Pour cr√©er une t√¢che de mise √† jour, il fallait ¬´cliquer¬ª sur chaque magasin avec ses mains.  Chaque travail ne contenait que 50 objets, car il y avait une chance en raison d'une erreur interne de perdre tous les statuts apr√®s la mise √† jour, et une v√©rification manuelle compl√®te serait alors n√©cessaire. <br><br><img src="https://habrastorage.org/webt/bw/dj/d4/bwdjd4nesmm3ton16-fuufagn-e.jpeg"><br><br>  √Ä ce moment-l√†, le bilan de sant√© du magasin √©tait initialement effectu√© par le statut de la mission, enfin en se connectant au bureau du caissier et en analysant visuellement l'√©cran du caissier. <br><br>  Pour 2014, l'intensit√© de la mise √† jour pour 1 personne par nuit √©tait de 150 magasins. <br><br><h3>  Premi√®re perc√©e </h3><br>  Une telle situation avec la rapidit√© et le co√ªt de la mise √† jour ne pouvait convenir ni √† nous ni √† l'entreprise.  Le domaine de travail le plus important √©tait le processus d'am√©lioration et d'automatisation du processus pour assurer une ¬´livraison¬ª rapide et de haute qualit√© des modifications dans les magasins afin d'aider les entreprises √† r√©soudre efficacement les t√¢ches. <br><br>  √âtant donn√© que le code GK n'appartenait pas √† X5, nous ne pouvions pas apporter les am√©liorations de Storemanager par nous-m√™mes, modifier le processus ou corriger des bogues.  C'est pourquoi, en collaboration avec des entrepreneurs, nous avons commenc√© √† travailler sur le d√©veloppement √† partir de z√©ro d'un outil technologique alternatif, que nous avons appel√© ¬´Booster¬ª. <br><br>  Nous avons abord√© de mani√®re globale l'analyse du processus de mise √† jour, l'avons examin√© de tous les c√¥t√©s.  Et ils ont compris le processus, qui est devenu la base de tous les changements futurs.  Le succ√®s de la mise en ≈ìuvre des modifications d√©pend de la rapidit√© avec laquelle nous livrons les distributions de la nouvelle version aux magasins, de la fa√ßon dont nous les pr√©parons pour la mise √† niveau, de l'organisation du processus d'installation et du d√©roulement du contr√¥le de performances ult√©rieur. <br><br>  ¬´Booster¬ª a une liste unique de tous les magasins dans le tableau de bord, des pr√©-contr√¥les et des statuts pour chaque √©tape, et le premier contr√¥le automatis√© primitif apr√®s la mise √† jour. <br><br><img src="https://habrastorage.org/webt/an/lp/ve/anlpvezxubaxpa0eif_er0izpii.jpeg"><br><br>  La mise en ≈ìuvre du projet ¬´Booster¬ª a permis de r√©duire les co√ªts salariaux de 6 fois et de mettre √† jour environ 1000 magasins par nuit avec l'aide d'un employ√© (fin 2016).  √Ä cette √©poque, c'√©tait une perc√©e sans pr√©c√©dent. <br><br><h3>  D√©veloppement r√©ussi </h3><br>  L'√©tape suivante a √©t√© de consolider et de d√©velopper notre succ√®s.  Nous avons lanc√© un pool d'am√©liorations appel√© ¬´Booster2¬ª. <br><br>  La plateforme a √©t√© d√©plac√©e vers un nouveau mat√©riel, l'interface utilisateur a √©t√© compl√®tement repens√©e, nous nous sommes d√©barrass√©s du freinage.  Introduction de nouveaux contr√¥les et statuts pour chaque √©tape. <br><br><img src="https://habrastorage.org/webt/le/ya/we/leyawey9njbhy9dapfs_t9dfnh0.jpeg"><br><br>  Nous avons fourni √† l'employ√© de mise √† jour tous les soirs toutes les informations pour identifier les probl√®mes et les r√©soudre rapidement.  L'effet maximum pour la pr√©vention des accidents nous a √©t√© donn√© par un contr√¥le automatis√© de l'op√©rabilit√© de la billetterie bas√© sur des captures d'√©cran.  Le syst√®me a d√©termin√© o√π la condition de l'√©cran diff√®re de la norme, et ce sont ces magasins que les employ√©s ont examin√©s en premier. <br><br>  Le ¬´Booster¬ª mis √† jour a permis de mettre √† jour 1 500 magasins par employ√© et par nuit fin 2017-d√©but 2018. <br><br><h3>  Vers de nouveaux sommets </h3><br>  1500 magasins par nuit, c'est bien, nous pouvons facilement g√©rer le calendrier de sortie, prendre des sprints suppl√©mentaires pour l'installation, nous sommes pr√™ts √† fournir une correction d'erreurs et installer jusqu'√† 6 assemblages √† la caisse et au back office, mais la t√¢che de notre entreprise est de construire aujourd'hui la prochaine g√©n√©ration de magasins de d√©tail .  Le processus, fondement technique et technologique de la num√©risation de notre entreprise est, entre autres, la vitesse de d√©veloppement et de distribution de nouvelles versions de logiciels.  Et en mars 2019, une t√¢che ambitieuse a √©t√© fix√©e - √† l'automne, pour atteindre la mise √† jour de 3000 serveurs et 12000 caisses en une nuit.  Nous nous sommes abstenus de nos r√©alit√©s actuelles, avons une fois de plus men√© un grand travail d'analyse pour identifier les goulots d'√©tranglement dans le processus.  Des t√¢ches ont √©t√© identifi√©es qui n√©cessitent une automatisation, des am√©liorations techniques, le d√©veloppement de nouveaux logiciels sp√©cialis√©s, ainsi qu'une refonte g√©n√©rale.  De plus, nous avons constitu√© un pool de t√¢ches organisationnelles. <br><br>  En cons√©quence, un projet informatique interne est n√©, une feuille de route a √©t√© √©labor√©e, un budget a √©t√© calcul√©, des jalons ont √©t√© d√©termin√©s et le cercle des divisions et des sous-traitants pour l'interaction interne et externe a √©t√© clairement d√©fini. <br><br>  <b>Feuille de route</b> <br><br>  Arr√™tons-nous plus en d√©tail sur les t√¢ches form√©es.  Nous avons identifi√© 3 domaines: <br><br><ul><li>  objectifs de r√©duction des risques; </li><li>  t√¢ches administratives et organisationnelles; </li><li>  t√¢ches pour augmenter les magasins mis √† jour par jour. </li></ul><br>  <b>R√©duction des risques.</b>  Notre t√¢che - ind√©pendamment du succ√®s ou de l'√©chec de la mise √† jour, pour assurer le fonctionnement du n≈ìud de tr√©sorerie et la capacit√© √† servir les clients, c'est-√†-dire  ouvrir un magasin le matin.  Avec l'augmentation du nombre de points de vente, les risques augmentent plusieurs fois que quelque chose va mal. <br><br>  Un employ√© du groupe de distribution des versions est comme un pilote d'avion ou un contr√¥leur a√©rien qui a beaucoup de responsabilit√©s.  Dans ces conditions, il est n√©cessaire de d√©velopper des outils simples et automatis√©s qui minimisent le facteur d'erreur humaine. <br>  Dans ce domaine, des t√¢ches ont √©t√© formul√©es pour d√©velopper un nouveau syst√®me d'inspection des magasins, automatiser la pr√©paration des installations pour la mise √† jour, cr√©er des m√©canismes d'enregistrement des travaux sur l'infrastructure du r√©seau et la r√©cup√©ration automatique. <br><br>  Le nouvel outil de v√©rification vous permet de d√©terminer rapidement la sant√© de la boutique dans son ensemble, de g√©n√©rer un rapport sur un plus grand nombre de param√®tres et de montrer imm√©diatement √† l'employ√© du support les objets qui ne peuvent pas s'ouvrir le matin apr√®s la mise √† jour.  Nous analysons √† la fois le lancement du logiciel et les √©tapes de son t√©l√©chargement.  Nous v√©rifions la formation de la base du caissier du c√¥t√© du back office, l'initialisation du mat√©riel, la sortie du logiciel caisse enregistreuse en mode d'enregistrement caissier, etc.  Le processus est bas√© sur le dernier-n√© de notre syst√®me d'entreprise - ¬´Business Monitoring¬ª utilisant une pile technologique moderne (Filebeat, Kafka, ClickHouse, Grafana). <br><br>  <u>Dans l'outil (syst√®me) pour la pr√©paration compl√®te des magasins pour la mise √† jour,</u> nous avons combin√© tous les scripts de v√©rification dispers√©s qui pourraient m√™me √™tre sur diff√©rents serveurs.  Nous avons connect√© des scripts automatiques pour corriger les erreurs typiques (espace insuffisant, pas de droits n√©cessaires, etc.) et les envoyer aux employ√©s responsables dans diff√©rentes directions, si le probl√®me n'est pas r√©solu automatiquement.  Nous avons ajout√© un robot qui demande "inlassablement" laineux dans MFSM et exclut les caisses enregistreuses des d√©panneurs de la mise √† jour de la caisse.  Un tel robot √©conomise chaque jour plus de trois heures de temps aux employ√©s. <br><br>  <u>Outil robotique pour la comptabilit√© des travaux sur l'infrastructure r√©seau</u> : il fournit l'analyse des lettres compl√®tement dispers√©es des fournisseurs, l'identification des codes de magasin aux adresses SAP indiqu√©es et le chargement des donn√©es sur la date et l'heure du travail dans la base de donn√©es.  En outre, sur la base de ces informations, le calendrier de diffusion est mis √† jour.  Cela √©limine progressivement les moments o√π 300 magasins sont laiss√©s sans communication, et nous ne pouvons pas obtenir l'√©tat des mises √† jour ou des contr√¥les. <br><br>  <u>M√©canisme de r√©cup√©ration automatique</u> : du c√¥t√© du magasin, il permettra l'autodiagnostic du n≈ìud de caisse, d√©terminera l'impossibilit√© de d√©marrer la caisse et restaurera le syst√®me √† partir de la sauvegarde, permettant ainsi au magasin de s'ouvrir le matin dans la plupart des cas, m√™me si le personnel de support ne peut pas se connecter √† distance √† la solution du probl√®me. <br><br>  <b>T√¢ches administratives et organisationnelles.</b>  Le travail efficace du syst√®me repr√©sente la moiti√© de la bataille; pour r√©ussir, il est n√©cessaire d'assurer le travail efficace de l'√©quipe. <br><br>  <b>La solution est une formation suppl√©mentaire, des week-ends ajout√©s √† l'horaire de travail, configurer l'interaction avec toutes les lignes.</b>  <b>D√©ployez le week-end.</b> <br><br>  Nous avons organis√© une formation interne pour les employ√©s, garantissant l'interchangeabilit√© et la possibilit√© de redistribuer toutes les t√¢ches.  L'horaire de travail de l'√©quipe a √©galement √©t√© r√©vis√© - tous les employ√©s ont √©t√© transf√©r√©s au travail de nuit, ce qui a permis de garantir des mises √† jour continues.  Cette option que nous avons mise en ≈ìuvre cette ann√©e.  D√©sormais, les mises √† jour de GK ont lieu 7 jours sur 7 sans implication de personnel suppl√©mentaire. <br><br>  <b>T√¢ches pour augmenter le nombre de magasins par nuit.</b>  Ici, nous r√©solvons le probl√®me de la livraison rapide et garantie des distributions afin d'assurer la mise √† jour de n'importe quel nombre de magasins, quelle que soit la rapidit√© des changements.  Cela comprend √©galement, en fait, des am√©liorations du syst√®me lui-m√™me. <br><br>  Tout d'abord, nous avons commenc√© √† utiliser l'outil de mise √† jour ¬´Booster¬ª actuel aussi efficacement que possible.  Les tests de charge ont r√©v√©l√© les op√©rations les plus difficiles, nous avons d√©termin√© la limite des possibilit√©s, trouv√© des options pour la mise √† l'√©chelle horizontale des instances de mise √† jour. <br><br>  De plus, dans le cadre du projet, nous avons d√©cid√© quel outil cibler pour la mise √† jour et lequel d√©velopper.  Storemanager a √©t√© choisi comme outil cible, car avec l'acquisition du code source de GK, nous avons pu d√©velopper et am√©liorer ind√©pendamment des outils standard. <br><br>  Depuis le lancement du projet, nous avons identifi√© des √©tapes pour impl√©menter toutes les fonctionnalit√©s ¬´Booster¬ª dans Storemanager et cette ann√©e, nous avons cr√©√© des exigences suppl√©mentaires pour des am√©liorations afin d'assurer la mise √† jour du nombre requis de magasins. <br><br>  Nous avons √©galement √©labor√© des options pour utiliser les outils actuels, les avons am√©lior√©s, avons port√© l'infrastructure cible vers Linux exclusivement pour le serveur de t√©l√©chargement.  Et avec leurs coll√®gues, ils ont introduit un nouvel outil suppl√©mentaire qui a consid√©rablement √©tendu nos capacit√©s. <br><br><h3>  Ce qui s'est d√©j√† produit </h3><br>  √Ä l'heure actuelle, la plupart des t√¢ches de notre plan ont d√©j√† √©t√© mises en ≈ìuvre: <br><br><ul><li>  Modernisation et am√©lioration du syst√®me de pompage. </li><li>  R√©duire la taille des distributions GK. </li><li>  T√¢ches administratives et organisationnelles en √©quipe. </li><li>  Automatisation de la pr√©paration des magasins pour la mise √† jour. </li><li>  Comptabilisation du travail en r√©seau. </li></ul><br>  Il reste √† introduire une nouvelle v√©rification des magasins et √† affiner l'outil de mise √† jour cible. <br><br><img src="https://habrastorage.org/webt/ef/xr/oa/efxroa1tpnmsyc6jwoobgehdf6e.jpeg"><br><br><h3>  Et ensuite? </h3><br>  Encore plus.  Maintenant, nos efforts visent √† mettre √† jour 20 000 (+) magasins par nuit, mais ce sera d√©j√† sur une nouvelle plateforme diff√©rente, avec de nouveaux outils et m√©thodes.  Nous en parlerons certainement √† l'avenir. <br><br>  <b>Les auteurs</b> <br><br>  Vasily Golubev, chef du groupe de distribution des versions de logiciels # ITX5 <br>  Evgeny Lapshin, chef du d√©partement de support pour les solutions de magasin # ITX5 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483800/">https://habr.com/ru/post/fr483800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483788/index.html">Une petite nation insulaire gagne gr√¢ce √† Twitch</a></li>
<li><a href="../fr483790/index.html">Notes du fournisseur IoT. Technologie et √©conomie LoRaWAN dans l'√©clairage urbain</a></li>
<li><a href="../fr483794/index.html">Quitter: pourquoi ne pas prendre Kontroffer</a></li>
<li><a href="../fr483796/index.html">Param√®tres facultatifs dans les r√©f√©rentiels de donn√©es Spring</a></li>
<li><a href="../fr483798/index.html">Comment automatiser la composition d'annonces dans Google Ads</a></li>
<li><a href="../fr483802/index.html">Comment lancer un produit seul si vous √™tes d√©veloppeur: conseils du cr√©ateur de Laravel, Taylor Otvel. Partie 1: Public</a></li>
<li><a href="../fr483804/index.html">Richard Hamming "Chapitre inexistant": Comme nous savons ce que nous savons (11-20 minutes sur 40)</a></li>
<li><a href="../fr483814/index.html">Abraham Flexner: l'utilit√© des connaissances inutiles (1939)</a></li>
<li><a href="../fr483818/index.html">Moteur, langage de script et roman visuel - en 45 heures</a></li>
<li><a href="../fr483820/index.html">Ce qui affecte l'√©mission de cr√©dit. Aper√ßu de la concurrence pour le risque de d√©faut de cr√©dit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>