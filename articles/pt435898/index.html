<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüíº ü§ûüèæ ‚ôëÔ∏è O que pensar em uma entrevista do NALSD ‚òùüèª ‚õπüèª ü§∑üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eu descrevi uma entrevista t√≠pica de codifica√ß√£o anteriormente. Al√©m da codifica√ß√£o, quase sempre h√° uma pergunta sobre o design do sistema. Projeto d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que pensar em uma entrevista do NALSD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/google/blog/435898/">  Eu descrevi uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">entrevista</a> t√≠pica de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">codifica√ß√£o</a> anteriormente.  Al√©m da codifica√ß√£o, quase sempre h√° uma pergunta sobre o design do sistema.  Projeto de sistema (grande).  No caso de entrevistas sobre SRE, essa √© uma fera ainda mais interessante (quanto a mim) - NALSD.  Projeto de sistema grande n√£o abstrato.  A principal diferen√ßa entre SWE e SRE est√° justamente nessas letras ‚ÄúNA‚Äù. <br><br><img src="https://habrastorage.org/webt/zr/dx/lz/zrdxlzdyc1xmixaibmzonhnkup0.jpeg" align="right" width="400" title="Biblioteca no google zurich">  Qual √© a diferen√ßa e como se preparar para isso?  Vejamos um exemplo.  Como exemplo, pegaremos algo muito material, algo que ningu√©m jamais pedir√° para uma entrevista real (no Google) :) <br><br>  Por exemplo - vamos criar uma biblioteca.  Para livros de papel, o habitual.  O texto inteiro abaixo foi escrito em uma sess√£o em cerca de uma hora para mostrar aproximadamente o que voc√™ pode fazer e o que √© importante fazer.  Ent√£o, perdoe-me pela confus√£o, mas acho que sim (e, portanto, existe). <br><a name="habracut"></a><blockquote><h4>  Pergunta NALSD: crie uma biblioteca p√∫blica. </h4><br>  Primeiro, estamos interessados ‚Äã‚Äãnas caracter√≠sticas da carga ou fazemos uma suposi√ß√£o razo√°vel.  Como se trata de um sistema escal√°vel, √© uma cidade m√≠nima de um milh√£o de pessoas.  Vale a pena considerar as op√ß√µes - um pr√©dio grande ou bibliotecas distritais mais armazenamento.  Parece-me que o √∫ltimo √© mais razo√°vel.  Especialmente se n√£o uma cidade, mas uma cidade. <br><br>  Portanto, focaremos no momento o sistema de uma cidade (com algumas reservas, podemos aplicar um mecanismo semelhante em um n√≠vel mais alto para expandir para muitas cidades).  Ent√£o, a cidade √© um milh√£o de pessoas.  Arredondamos os n√∫meros para a conveni√™ncia das estimativas - que haja 1 milh√£o de leitores prov√°veis.  Os leitores v√£o ler a qualquer momento, independentemente um do outro.  Ent√£o, podemos descobrir isso como um simples processo de Poisson.  Por√©m, a contagem "on the run" normalmente ser√° dif√≠cil, portanto, execute outra etapa de simplifica√ß√£o e apenas 1% dos leitores desejar√£o fazer um livro por dia.  No total, para c√°lculos adicionais, levamos 10.000 livros por dia. <br><br>  Nossa tarefa √© oferecer a possibilidade de emitir 10.000 livros por dia (al√©m de devolver os mesmos 10.000 em qualquer outro dia no futuro, a prop√≥sito) na cidade de mais de um milh√£o.  Neste ponto, a quest√£o da mono-biblioteca ou distrito j√° est√° desaparecendo (a prop√≥sito, para que todo o milh√£o seja um potencial leitor, eles devem poder chegar √† biblioteca em um per√≠odo de tempo razo√°vel, caso contr√°rio, o desejo de levar o livro certamente cair√° com o tempo limite).  Portanto, precisamos avaliar a capacidade de cada biblioteca local.  √â certo fazer isso levando em considera√ß√£o a densidade e a acessibilidade da popula√ß√£o, mas como isso n√£o afeta muito o sistema em si, para simplificar os c√°lculos, vamos imaginar que os colocamos uniformemente.  Mas isso ainda n√£o significa como podemos compartilh√°-los.  Obviamente, colocar 10.000 bibliotecas com um livro uniformemente pela cidade n√£o faz sentido; portanto, voc√™ precisa entender o que faz sentido.  Sa√≠mos para o n√≠vel abaixo. <br><br>  Ent√£o, uma biblioteca.  Para que fa√ßa sentido, a maioria dos que v√™m devem encontrar o livro de que precisam.  Isso significa que precisaremos manter um registro e uma previs√£o das consultas mais populares e manter esses livros prontos.  Ent√£o, precisamos manter o sortimento em princ√≠pio.  Imediatamente, eu diria que uma biblioteca local deve ter pelo menos 1000 itens, os mais altos deles em uma infinidade de c√≥pias, mais os melhores, menos os de cauda.  O livro m√©dio em nossa biblioteca √© lido de 3 dias a 2 semanas (de fato, a caracter√≠stica depende do livro, √© necess√°ria uma an√°lise separada aqui), consideramos o valor igual √† semana m√©dia e seguimos em frente.  Ou seja, o livro retirado est√° ausente por cerca de uma semana, portanto, os livros mais importantes precisam ser armazenados por uma semana (eles come√ßar√£o a se recuperar dos retornos). <br><br>  Vamos considerar um fator de infla√ß√£o m√©dio de 6. Portanto, a capacidade de armazenamento come√ßa em 6.000 livros.  Menos significa que este √© apenas um pequeno tampo, o que ainda pode ajudar em alguns casos (por exemplo, uma ilha com "crep√∫sculo" em um supermercado perto da sala de jogos infantil), mas vamos deix√°-lo do lado de fora por enquanto. <br><br>  No estado de "equil√≠brio", eles retornam e levam aproximadamente um dia aproximadamente, mais ou menos a dispers√£o, mas ainda precisamos da capacidade de aceitar um n√∫mero aumentado de n√∫meros de pico de retorno (por exemplo, devido a sincroniza√ß√£o externa, como feriados ou uma mudan√ßa de moda).  √â isso mesmo - simular.  Mas aqui e agora tomaremos um ter√ßo como reserva.  No total, apoiamos 6.000 livros dispon√≠veis para emiss√£o, al√©m de um local para outros 2.000 em reserva. <br><br>  Portanto, precisamos de uma unidade que possa armazenar 8000 livros.  O reabastecimento di√°rio √© muito caro, o que significa que dura uma semana ou duas.  Duas semanas, 6.000 livros, com um vi√©s de retorno, isso √© cerca de 300 por dia.  No momento da abertura, podemos pontuar todos os 8000 livros para criar o 2000 inicial em circula√ß√£o antes dos primeiros retornos.  2000 por 3 dias = cerca de 600 livros por dia, mais buffer = 800 livros por dia. <br><br>  Vamos estimar a largura de banda e os limites de armazenamento.  Um livro ocupa uma m√©dia de 2 cent√≠metros de espa√ßo linear, 8000 livros - 160 metros.  gire 4 vezes na vertical, 40 metros.  Arrombamos at√© racks de 5 metros, temos 8 racks de 4 prateleiras de 5 metros de comprimento.  Um bibliotec√°rio (ou um rob√¥-bibliotec√°rio) poder√° trabalhar com dois racks, a extra√ß√£o de um livro levar√° at√© 5 segundos para alcan√ß√°-lo, 5 segundos para sair ou colocar o livro, 5 segundos ao contr√°rio, por um total de 15 segundos.  4 bibliotec√°rios nos fornecer√£o aproximadamente 15 livros por minuto, no m√°ximo, ou seja, 900 livros por hora a partir do armaz√©m aproximadamente. <br><br>  Adicionamos tempo para processar a solicita√ß√£o (10s), pesquisar (5s), entrar no sistema de recebimento e emiss√£o (2s) =&gt; 400 livros por hora.  Portanto, o armazenamento em seu pico pode emitir 400 livros por hora, portanto, 800 livros por dia s√£o alcan√ß√°veis ‚Äã‚Äãem 2 horas √∫teis. <br><br>  Agora, consideramos outras caracter√≠sticas: para distribuir 400 livros por hora por 4 pessoas, √© necess√°rio acomodar 100 pessoas na sala de espera em uma fila em frente √† janela de processamento, para que essas pessoas n√£o criem multid√µes na entrada e na sa√≠da.  Ou seja, o grupo de entrada deve passar 400 pessoas por hora nas duas dire√ß√µes.  Acontece que o limitador principal nem ser√° o armazenamento, mas a capacidade do sal√£o e do grupo de entrada. <br><br>  Isso significa que ser√° poss√≠vel encontrar a propor√ß√£o ideal de armazenamento e armazenamento com c√°lculos mais precisos. <br><br>  Assim, com a unidade resolvida, retornamos ao n√≠vel acima.  Estimamos a carga total na biblioteca em cerca de 10.000 livros por dia, contamos uma unidade com 800 livros por dia, ou seja, precisamos de 12,5 unidades.  Com a distribui√ß√£o geogr√°fica pela cidade, uma ou duas unidades alternativas (nos limites da cidade) ou at√© 3-4 (dentro) ser√£o acess√≠veis a cada leitor, o que permite suavizar levemente os picos de tr√°fego e / ou aumentar a demanda por posi√ß√µes espec√≠ficas. <br><br>  Tamb√©m sabemos que, a qualquer momento, qualquer biblioteca pode ser fechada (inc√™ndio, inspe√ß√£o sanit√°ria, pintura das al√ßas dos refrigeradores ou algo mais), com um aumento no n√∫mero deles, a probabilidade de dois cair fora da vida coincide, por isso precisamos de uma unidade sobressalente para a cada 5-6 unidades.  No total, 15 unidades devem garantir o desempenho necess√°rio, desde que mantenham o estoque estimado em seus armaz√©ns. <br><br>  Para manter o estoque estimado, precisamos atualizar uma vez por semana ou duas (pensamos acima de duas) cerca de metade do sortimento para acompanhar as tend√™ncias e assim por diante.  Isso significa que cada unidade precisa transportar e exportar 4.000 livros a cada duas semanas.  A cada importa√ß√£o e exporta√ß√£o, esses mesmos 4.000 livros devem ser removidos do reposit√≥rio e outros s√£o colocados l√°.  A 400 livros por hora, a atualiza√ß√£o do sortimento levar√° 10 horas com carga m√°xima.  O que, ao que parece, ainda n√£o √© t√£o ruim, mais uma vez, com o carregamento em massa, muitas coisas v√£o mais rapidamente, no entanto, manter a variedade leva 5 vezes mais do que trabalhar com a popula√ß√£o. <br><br>  O livro m√©dio (2 cm * 20 cm * 30 cm) √© de cerca de 1,5 l, ou seja, 4000 livros = 6 metros c√∫bicos.  Cabe facilmente em uma gazela.  O peso de um metro c√∫bico de papel √© de 600 kg, ou seja, 6 metros c√∫bicos √© de 3,6 toneladas.  A capacidade de carga da gazela √© de uma tonelada e meia, portanto ser√£o necess√°rias tr√™s gazelas.  Mais um backup.  Temos 15 unidades, atualizamos a cada 2 semanas, com uma distribui√ß√£o uniforme, estamos no limite, temos que adicionar outra gazela. <br><br>  <i>E n√£o tivemos tempo para pensar sobre onde e onde essas gazelas foram transportadas, para que os armaz√©ns dos fornecedores e os pontos de descarga de livros que perdessem relev√¢ncia aparecessem no diagrama ...</i> <br></blockquote><br>  Ent√£o o tempo acabou.  O que √© t√£o anormal na pergunta NALSD?  Escalabilidade deve estar em qualquer projeto de sistema grande.  O principal √© <b>concretude</b> . <br><br>  Fiz muitas suposi√ß√µes e suposi√ß√µes acima, mas todas as estimativas subsequentes foram baseadas nas anteriores.  Para n√∫meros, tamb√©m tentei dar "como avaliar corretamente", no entanto, √© muito f√°cil esquecer de faz√™-lo, voc√™ se cansa e esquece.  Ainda √© muito f√°cil manter algum n√∫mero da mem√≥ria, sem explica√ß√£o ... Mas, como o design √© concreto, se alguma das suposi√ß√µes for incorreta, ela poder√° ser corrigida e recontada mais tarde. <br><br>  <i>Como me lembro agora, em minha entrevista com as estimativas, tirei um IOPS de um disco de 600, simplesmente porque o otimizei recentemente e trabalhei com uma matriz, onde _array_ distribuiu 600 IOPS ... O entrevistado me perguntou um pouco surpreso: 600 IOPS em disco?</i>  <i>: D</i> <br><br>  Durante a entrevista, o entrevistador pode corrigir qualquer uma de suas suposi√ß√µes.  Ou adicione algum tipo de restri√ß√£o (que voc√™ n√£o conhecia, n√£o pensava, n√£o perguntava ou apenas a mudan√ßa usual de TK em tempo real).  Ao mesmo tempo, como voc√™ est√° operando exclusivamente com n√∫meros espec√≠ficos, isso ser√° apenas uma atualiza√ß√£o trivial dos n√∫meros. <br><br>  Se o ajuste da suposi√ß√£o causa um redesenho do sistema, isso √© um erro de design, um ajuste incorreto ou est√° al√©m da aplicabilidade do sistema, o que tamb√©m n√£o √© uma situa√ß√£o rara na vida real.  √â importante n√£o perder esses momentos e avaliar os valores recebidos quanto √† realidade durante a fase de projeto e com quaisquer ajustes. <br><br>  Como SRE, somos obrigados a pensar em termos de escala de sistemas reais sob as limita√ß√µes reais de hardware real.  Pode haver um excelente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">algoritmo</a> que troque enormes custos de tempo por uma pequena quantidade de mem√≥ria ... Mas, ainda assim, voc√™ n√£o pode colocar um petabyte de RAM no n√∫cleo de um processador em condi√ß√µes reais.  Portanto, se temos um petabyte de RAM, temos pelo menos dez mil processadores.  Ou vinte.  Ou trinta.  E devemos procurar o melhor, n√£o global, mas aqui e agora, nas condi√ß√µes dadas. <br><br>  Voc√™ n√£o precisa se lembrar dos n√∫meros exatos, mas deve ter uma id√©ia da ordem: o mesmo IOPS, que o HDD tem cerca de cem, e o SSD, centenas de milhares.  Mas essas centenas de milhares acompanham a raz√£o entre o custo de um terabyte de HDD e o custo de um terabyte de SSDs como um em tr√™s a quatro.  E isso n√£o conta o equipamento - um lugar no rack, l√¢minas para eles, portas nos switches e outras coisas que deixam de ser um centavo quando a conta chega a petabytes. <br><br>  Agora, recoste-se um pouco na cadeira, relaxe e tente criar um sistema para fornecer ovos de galinha frescos por assinatura. <br><br>  Se houver um desejo de compartilhar com colegas de l√≠ngua inglesa, existe uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√£o em ingl√™s</a> (assim como no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hub</a> em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ingl√™s</a> ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435898/">https://habr.com/ru/post/pt435898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435886/index.html">SpaceX mostrou prot√≥tipo de nave estelar e reduzir√° 10% do pessoal</a></li>
<li><a href="../pt435890/index.html">Os lados sombrios de uma pessoa ativa</a></li>
<li><a href="../pt435892/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel 281 (de 7 a 13 de janeiro)</a></li>
<li><a href="../pt435894/index.html">Aulas particulares. Escondendo em php</a></li>
<li><a href="../pt435896/index.html">Usando DiagnosticSource no .NET Core: Teoria</a></li>
<li><a href="../pt435900/index.html">Encapsule-o</a></li>
<li><a href="../pt435902/index.html">Voc√™ n√£o pode simplesmente pegar e escrever SELECT se o fornecedor n√£o permitir ... mas escreveremos</a></li>
<li><a href="../pt435904/index.html">IA traduziu a atividade cerebral em fala</a></li>
<li><a href="../pt435906/index.html">Armazenamento de Cluster de Marcapasso + DRBD (Prim√°rio Duplo) + ctdb</a></li>
<li><a href="../pt435908/index.html">Ascetic web: prot√≥tipos de mercados de pulgas em movimento e js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>