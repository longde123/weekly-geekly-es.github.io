<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÜüèæ ‚èπÔ∏è üåõ Wir schreiben "Hallo Welt!" Haskell-Webanwendung (Spock) üé≥ ü§ì üëä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich war gelangweilt vom Schreiben in Python, ich wollte etwas Ungew√∂hnliches. Ich beschloss, Haskell auszuprobieren. Ich kenne die Sprache nicht, woll...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir schreiben "Hallo Welt!" Haskell-Webanwendung (Spock)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449628/"><p> Ich war gelangweilt vom Schreiben in Python, ich wollte etwas Ungew√∂hnliches.  Ich beschloss, Haskell auszuprobieren.  Ich kenne die Sprache nicht, wollte aber keine Konsolentrainingsprogramme wie die Berechnung der Fakult√§t schreiben.  Nachdem ich eine ziemlich gro√üe Anzahl von Posts √ºber Haskell und seine Anwendung im wirklichen Leben studiert hatte, wurde mir klar, dass einer der potenziellen Punkte f√ºr das Wachstum der Popularit√§t der Sprache das Schreiben von Webanwendungen ist.  Seltsamerweise gibt es unter Haskell einige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Web-Frameworks</a> .  Meine Wahl fiel auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spock</a> , weil es nach der Beschreibung ein einfacher und schneller Rahmen f√ºr die Entwicklung ist.  Ich habe einige Erfahrung mit dem Schreiben von Webanwendungen in Flask, daher hielt ich es f√ºr interessant, solche unterschiedlichen Ans√§tze zur L√∂sung √§hnlicher Probleme zu vergleichen.  In dem Artikel werde ich versuchen, meine detaillierteste Art des Versuchs und Irrtums in der Studie von Haskell am Beispiel der einfachsten Spock-Webanwendung anzugeben.  Vielleicht ist dies n√ºtzlich f√ºr diejenigen, die bezweifeln, ob sie versuchen sollen, Haskell zu studieren, und ob es im wirklichen Leben n√ºtzlich sein wird. </p><a name="habracut"></a><br><h2 id="nemnogo-pro-haskell-i-kak-ego-gotovit">  Ein bisschen √ºber Haskell und wie man es kocht </h2><br><p>  Das erste, was jeder Entwickler beim Erlernen einer neuen Sprache erwartet, ist die Auswahl und Einrichtung einer Entwicklungsumgebung.  Nat√ºrlich k√∂nnen Sie in ein Notizbuch schreiben, aber wenn Sie mindestens Erfahrung in der Entwicklung von Produktionsprojekten haben, verursacht diese Methode Schmerzen.  √úbrigens ist Haskell eine ziemlich alte und gebr√§uchliche Sprache und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unterst√ºtzt</a> die bekanntesten Redakteure und Ideen.  Mein Freund Haskellist benutzt Emacs.  Ich bin an die normale IDE gew√∂hnt und habe das Plugin f√ºr IntelliJ installiert. </p><br><p>  F√ºr die Entwicklung ben√∂tigen Sie au√üerdem einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stack</a> , der jetzt Standard ist und einen Compiler, ein Paketverwaltungssystem, ein Build- und Testsystem kombiniert. </p><br><p>  Alles sieht ziemlich freundlich aus, es gab keine Probleme mit der Installation.  F√ºr die Entwicklung verwende ich Mac OS, ich habe es nicht auf anderen Systemen getestet, aber ich vermute, dass unter Linux auch alles ohne Probleme startet. </p><br><h2 id="hello-world">  Hallo Welt! </h2><br><h3 id="podgotovka">  Vorbereitung </h3><br><p> Wir gehen zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tutorial</a> und versuchen, alles gem√§√ü den Anweisungen zu machen.  Dort schlagen sie vor, zuerst ein Standardprojekt √ºber Stack zu <code>stack new MyLovelyProlect</code> : <code>stack new MyLovelyProlect</code> .  Das Standardprojekt ist ein Ordner mit drei Unterordnern: <code>app</code> , <code>src</code> , <code>test</code> .  Es sieht ziemlich logisch aus: ein Ordner f√ºr die Hauptanwendung, einer f√ºr Zusatzfunktionen, der dritte zum Testen.  Da wir "Hallo Welt!" Schreiben, ben√∂tigen wir die Ordner <code>src</code> und <code>test</code> nicht, m√ºssen sie jedoch nicht l√∂schen, da wir sonst andere Dateien, z. B. <code>HelloWorld.cabal</code> , sorgf√§ltig bereinigen m√ºssen. </p><br><h3 id="sobstvenno-kod">  Eigentlich der Code </h3><br><p>  Weiter im Tutorial wird vorgeschlagen, etwas Code in <code>Main.hs</code> zu <code>Main.hs</code>  Wir werden es etwas vereinfachen, um es mit dem Angebot der Flasche zu vergleichen. </p><br><pre> <code class="haskell hljs"><span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE OverloadedStrings #-}</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> Main <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock.Config app :: SpockM () () () () app = get root $ text "Hello World!" main :: IO () main = do cfg &lt;- defaultSpockCfg () PCNoDatabase () let mw = spock cfg app runSpock 8080 mw</code> </pre> <br><p>  Zum Vergleich werde ich den gleichen Code in der Flasche geben: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask app = Flask(__name__) @app.route(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> app.run()</code> </pre> <br><p>  Durch die Anzahl der Zeilen gewinnt flask immer noch: 8 gegen 13. Aber wenn man bedenkt, dass Haskell eine statisch typisierte Sprache ist und 2 Zeilen die Typbestimmung belegen, ist der Unterschied meiner Meinung nach gering.  Zumindest hat mich der obige Code nicht davon abgehalten, die Sprache weiter zu lernen. </p><br><h3 id="sborka-i-zapusk">  Montage und Start </h3><br><p>  Gehen Sie als N√§chstes zu <code>HelloWorld.cabal</code> und f√ºgen Sie die <code>executable HelloWorld-exe</code> zum Abschnitt " <code>build-depends:</code> " hinzu <code>build-depends:</code> Zeile <code>Spock &gt;=0.13</code> .  Im Tutorial auf der Website wird vorgeschlagen, zwei weitere Abh√§ngigkeiten aufzunehmen, die f√ºr meine Zwecke jedoch noch nicht ben√∂tigt werden.  Wenn wir jetzt versuchen, die Anwendung mit <code>stack build --fast --pedantic</code> , wird der folgende Fehler <code>stack build --fast --pedantic</code> : </p><br><pre> <code class="plaintext hljs">Error: While constructing the build plan, the following exceptions were encountered: In the dependencies for HelloWorld-0.1.0.0: Spock must match &gt;=0.13, but the stack configuration has no specified version (latest matching version is 0.13.0.0) needed since HelloWorld is a build target. Some different approaches to resolving this: * Consider trying 'stack solver', which uses the cabal-install solver to attempt to find some working build configuration. This can be convenient when dealing with many complicated constraint errors, but results may be unpredictable. * Recommended action: try adding the following to your extra-deps in /Users/dkvasov/Documents/Haskell/Spock/HelloWorld/stack.yaml: Spock-0.13.0.0@sha256:8115862eb4fb84a26fb7bcd34f30acf036bd2e7c4eaf813c185c5562d138bba2 Plan construction failed.</code> </pre> <br><p>  Es ist ziemlich klar: Stack wei√ü nicht, welche Version von Spock installiert werden muss, daher muss sie in die Datei <code>stack.yaml</code> werden.  F√ºgen Sie dort <code>extra-deps</code> und versuchen Sie erneut, diese zu erstellen.  Dort werden einige andere √§hnliche Fehler <code>stack.yaml</code> , und als Ergebnis habe ich in der Datei <code>stack.yaml</code> Folgendes erhalten: </p><br><pre> <code class="plaintext hljs">extra-deps: - Spock-0.13.0.0 - Spock-core-0.13.0.0 - reroute-0.5.0.0 - stm-containers-0.2.16 - focus-0.1.5.2</code> </pre> <br><p>  Danach sammelte sich alles.  Meine Sammlungsartefakte befanden sich im <code>.stack-work/dist/x86_64-osx/Cabal-2.4.0.1/build</code> . </p><br><p>  Alles begann mit dem Befehlstack <code>stack exec HelloWorld-exe</code> und auf <code>localhost:8080</code> sah ich das Willkommen "Hallo Welt!".  Es wurde kein Tamburin-Tanz ben√∂tigt. </p><br><h3 id="probuem-razobratsya-chto-voobsche-proishodit">  Wir versuchen herauszufinden, was los ist. </h3><br><p>  Bisher haben wir keine spezifischen Kenntnisse der funktionalen Programmierung (FP) und der Haskell-Sprache verwendet.  Wir haben den gesunden Menschenverstand und das Wissen √ºber die Grundlagen der Entwicklung genutzt.  So k√∂nnen Sie nicht weitermachen.  Zum weiteren Verst√§ndnis m√ºssen wir einige Dinge √ºber AF wissen.  AF ist nicht der Antipode von OOP.  Diejenigen, die mit der Scala-Sprache vertraut sind, wissen, dass beide Konzepte leicht nebeneinander existieren.  Der Antipode von FP ist eine zwingende Programmierung.  W√§hrend das Funktionsmodell von Berechnungen auf der Zusammensetzung von Funktionen beruht, beruht das imperative Modell auf dem Prozess aufeinanderfolgender √Ñnderungen in den Zust√§nden des Systems.  Daraus folgt, dass in rein funktionalen Sprachen wie Haskell angenommen wird, dass die Funktionen "rein" sind, dh sie enthalten zus√§tzlich zum R√ºckgabewert keinen ver√§nderlichen Zustand und keine "Nebenwirkungen".  Dies erleichtert das Erstellen von Feature-Kompositionen.  Tats√§chlich legt das Erfordernis der "Reinheit" viele Einschr√§nkungen f√ºr die Verwendung funktionaler Sprachen in der realen Welt fest.  Da es jedoch Produktionsanwendungen auf Haskell gibt, k√∂nnen Sie in der realen Welt immer noch reine Funktionen verwenden.  Schauen wir <code>Main.hs</code> unsere <code>Main.hs</code> genauer an. </p><br><p>  Soweit ich wei√ü, ist die App <code>app</code> eine Variable vom Typ <code>SpockM</code> , bei der es sich um eine <em>Monade handelt</em> .  Wenn Sie mit dem Funktionsstil der Programmierung und der Kategorietheorie nicht vertraut sind, werden Sie h√∂chstwahrscheinlich beim ersten Mal nicht verstehen, was es ist und warum Sie es ben√∂tigen.  Dies muss jedoch zumindest auf der Basisebene behandelt werden, da Monaden die Grundlage f√ºr die Anwendung der Haskell-Sprache bilden.  Zu diesem Thema gibt es einige Artikel mit unterschiedlichem Detaillierungsgrad, darunter auch zu Habr√©.  Nat√ºrlich werde ich sie nicht hierher bringen.  Bisher m√∂chte ich ber√ºcksichtigen, dass Monaden eine solche Magie sind, die es Ihnen erm√∂glicht, sogenannte Nebenwirkungen hervorzurufen.  In unserer Anwendung gibt es eine weitere Monade: <code>IO</code> .  Der Nebeneffekt ist die Dateneingabe / -ausgabe. </p><br><p>  SpockM wird von vier anderen Typen parametrisiert.  Sie entsprechen der Datenbankverbindung, der Sitzung, dem Status und dem R√ºckgabewert.  F√ºr eine leere Anwendung wird nichts davon ben√∂tigt, daher verwenden wir immer den Typ <code>()</code> , der als Unit bezeichnet wird.  Innerhalb der <code>app</code> binden wir Pfade an Aktionen.  In diesem Fall haben wir den Basispfad <code>/</code> und die Aktion gibt <code>   "Hello, world!  get-</code> . </p><br><p>  Als n√§chstes erstellen wir eine Standardkonfiguration und weisen sie <code>cfg</code> .  Erstellen Sie anschlie√üend mithilfe der <code>spock</code> Funktion Middleware f√ºr die App und cfg und √ºbertragen Sie sie zusammen mit dem gew√ºnschten <code>runSpock</code> auf <code>runSpock</code> . </p><br><h3 id="zaklyuchenie">  Fazit </h3><br><p>  Es ist klar, dass alles, was hier beschrieben wird, sehr einfach ist und jeder, der Englisch spricht und mit einem Gehirn ausgestattet ist, das Gleiche tun kann, indem er sich das erste Spock-Tutorial ansieht.  In diesem Artikel ging es mehr darum, wie ich die Haskell-Sprache kennenlernte.  Was weiter?  Au√üerdem schlagen fast alle Lernressourcen vor, den Status zu verwenden und eine Aufgabenanwendung zu schreiben, dann die Datenbank zu verbinden und dann ... Vielleicht werde ich in Zukunft eine Fortsetzung schreiben. </p><br><h2 id="ssylki">  Referenzen </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ihre erste Webanwendung mit Spock</a> ist ein ziemlich detailliertes Video in englischer Sprache mit einer Analyse einer √§hnlichen Hello World. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de449628/">https://habr.com/ru/post/de449628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de449616/index.html">Fibonacci-Interview</a></li>
<li><a href="../de449618/index.html">Die Zukunft liegt in den Wolken</a></li>
<li><a href="../de449622/index.html">Anpassen: Passen Sie Ihre Snom-Telefone an</a></li>
<li><a href="../de449624/index.html">Wie und warum Sie Datenbl√§tter lesen sollten, wenn Mikrocontroller Ihr Hobby sind</a></li>
<li><a href="../de449626/index.html">Kognitive Begradigung: Eine Illusionssitzung zur vollst√§ndigen Belichtung</a></li>
<li><a href="../de449630/index.html">"Sie schlugen vor, sich mit den Berechnungen eines Indikators vertraut zu machen, und es gibt zwei Bl√§tter mit Integralen und zweiten Ableitungen."</a></li>
<li><a href="../de449632/index.html">AMA mit Habr. V.8.0. Onboarding, Neuigkeiten f√ºr alle, PWA</a></li>
<li><a href="../de449634/index.html">Ich liebe IoT</a></li>
<li><a href="../de449636/index.html">So vermeiden Sie den Biss eines Kusswanzen</a></li>
<li><a href="../de449640/index.html">Videospieldesign: Sie m√ºssen verstehen, dass Sie erben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>