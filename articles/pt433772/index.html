<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¢ üëçüèæ üëæ Ferramenta de anota√ß√£o da Vis√£o por computador: Marca√ß√£o de dados completa üîÑ ü§ß üçû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O escrit√≥rio de Nizhny Novgorod da Intel, entre outras coisas, est√° desenvolvendo algoritmos de vis√£o computacional baseados em redes neurais profunda...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ferramenta de anota√ß√£o da Vis√£o por computador: Marca√ß√£o de dados completa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/433772/"> O escrit√≥rio de Nizhny Novgorod da Intel, entre outras coisas, est√° desenvolvendo algoritmos de vis√£o computacional baseados em redes neurais profundas.  Muitos de nossos algoritmos s√£o publicados no reposit√≥rio do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Open Model Zoo</a> .  O treinamento do modelo requer um grande n√∫mero de dados marcados.  Teoricamente, existem muitas maneiras de prepar√°-los, mas a disponibilidade de software especializado acelera esse processo muitas vezes.  Portanto, para melhorar a efici√™ncia e a qualidade da marca√ß√£o, desenvolvemos nossa pr√≥pria ferramenta - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ferramenta de Anota√ß√£o de Vis√£o por Computador (CVAT)</a> . <br><br><img src="https://habrastorage.org/webt/cv/du/hz/cvduhzr0pnmfv8hmiqysajpzseo.jpeg"><br><a name="habracut"></a><br>  Obviamente, na Internet, voc√™ pode encontrar muitos dados anotados, mas existem alguns problemas.  Por exemplo, surgem constantemente novas tarefas para as quais simplesmente n√£o existem dados.  Outra quest√£o √© que nem todos os dados s√£o adequados para uso no desenvolvimento de produtos comerciais, devido a seus contratos de licen√ßa.  Assim, al√©m do desenvolvimento e treinamento de algoritmos, nossa atividade tamb√©m inclui marca√ß√£o de dados.  Este √© um processo bastante demorado e demorado, o que n√£o seria razo√°vel para se apoiar nos desenvolvedores.  Por exemplo, para treinar um de nossos algoritmos, cerca de 769.000 objetos foram marcados por mais de 3.100 horas por homem. <br><br>  Existem duas solu√ß√µes para o problema: <br><br><ul><li>  O primeiro √© transferir os dados da marca√ß√£o para empresas de terceiros, com a especializa√ß√£o apropriada.  Tivemos uma experi√™ncia semelhante.  Vale ressaltar o processo complicado de valida√ß√£o e particionamento de dados, bem como a presen√ßa de burocracia. </li><li>  O segundo, mais conveniente para n√≥s, √© a cria√ß√£o e o suporte de nossa pr√≥pria equipe de anota√ß√µes.  A conveni√™ncia reside na capacidade de definir rapidamente novas tarefas, gerenciar o progresso de sua implementa√ß√£o e o equil√≠brio facilitado entre pre√ßo e qualidade.  Al√©m disso, √© poss√≠vel implementar algoritmos de automa√ß√£o personalizados e melhorar a qualidade da marca√ß√£o. </li></ul><br>  Inicialmente, a Computer Vision Annotation Tool foi desenvolvida especificamente para nossa equipe de anota√ß√µes. <br><br><img src="https://habrastorage.org/webt/81/7o/ya/817oyak9ssk-qa4i-fxowpo-k14.jpeg"><br><br>  Obviamente, nosso objetivo n√£o era criar o "15¬∫ padr√£o".  Inicialmente, usamos uma solu√ß√£o pronta - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vatic</a> , mas, no processo, as equipes de anota√ß√£o e algoritmos apresentaram novos requisitos, cuja implementa√ß√£o acabou levando a uma reescrita completa do c√≥digo do programa. <br><br>  Mais adiante no artigo: <br><br><ul><li>  Informa√ß√µes gerais (funcionalidade, aplicativos, vantagens e desvantagens da ferramenta) </li><li>  Hist√≥ria e evolu√ß√£o (uma breve hist√≥ria sobre como o CVAT viveu e se desenvolveu) </li><li>  Dispositivo interno (descri√ß√£o da arquitetura de alto n√≠vel) </li><li>  Instru√ß√µes de desenvolvimento (um pouco sobre os objetivos que eu gostaria de alcan√ßar e poss√≠veis caminhos para eles) </li></ul><br><h3>  <font color="#0071c5">Informa√ß√£o geral</font> </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Computer Vision Annotation Tool</a> (CVAT) √© uma ferramenta de c√≥digo aberto para marcar imagens e v√≠deos digitais.  Sua principal tarefa √© fornecer ao usu√°rio meios convenientes e eficazes de marcar conjuntos de dados.  Criamos o CVAT como um servi√ßo universal que suporta diferentes tipos e formatos de marca√ß√£o. <br><br>  Para usu√°rios finais, o CVAT √© um aplicativo da web baseado em navegador.  Ele suporta v√°rios cen√°rios de trabalho e pode ser usado tanto para trabalho pessoal quanto para equipe.  As principais tarefas de aprendizado de m√°quina com um professor na √°rea de processamento de imagens podem ser divididas em tr√™s grupos: <br><br><ul><li>  Detec√ß√£o de Objetos </li><li>  Classifica√ß√£o da imagem </li><li>  Segmenta√ß√£o de imagem </li></ul><br>  O CVAT √© adequado em todos esses cen√°rios. <br><br>  <b>Vantagens:</b> <br><br><ul><li>  Falta de instala√ß√£o pelos usu√°rios finais.  Para criar uma tarefa ou marcar dados, basta abrir um link espec√≠fico no navegador. </li><li>  A capacidade de trabalhar juntos.  H√° uma oportunidade de disponibilizar publicamente a tarefa aos usu√°rios e paralelizar o trabalho nela. </li><li>  F√°cil de implantar.  A instala√ß√£o do CVAT na rede local √© um par de comandos atrav√©s do uso do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker</a> . </li><li>  Automa√ß√£o do processo de marca√ß√£o.  A interpola√ß√£o, por exemplo, permite obter marca√ß√µes em muitos quadros, com trabalho real apenas em alguns dos principais. </li><li>  A experi√™ncia dos profissionais.  A ferramenta foi desenvolvida com a participa√ß√£o de anota√ß√µes e v√°rias equipes algor√≠tmicas. </li><li>  A capacidade de integrar.  O CVAT √© adequado para integra√ß√£o em uma plataforma mais ampla.  Por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Onepanel</a> . </li><li>  Suporte opcional para v√°rias ferramentas: <br><br><ul><li>  Deep Learning Deployment Toolkit (componente como parte do OpenVINO) </li><li>  API de detec√ß√£o de objeto de fluxo de tens√£o (TF OD API) </li><li>  Sistema de an√°lise ELK (Elasticsearch + Logstash + Kibana) </li><li>  Kit de ferramentas NVIDIA CUDA </li></ul></li><li>  Suporte para v√°rios cen√°rios de anota√ß√£o. </li><li>  C√≥digo aberto sob uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">licen√ßa MIT</a> simples e gratuita. </li></ul><br>  <b>Desvantagens:</b> <br><br><ul><li>  Suporte limitado ao navegador.  O desempenho da parte do cliente √© garantido apenas no navegador Google Chrome.  N√£o testamos o CVAT em outros navegadores, mas teoricamente, a ferramenta pode funcionar no Opera, no Yandex Browser e em outros com o mecanismo Chromium. </li><li>  O sistema de testes autom√°ticos n√£o foi desenvolvido.  Todas as verifica√ß√µes de integridade s√£o realizadas manualmente, o que diminui significativamente o desenvolvimento.  No entanto, j√° estamos trabalhando em uma solu√ß√£o para esse problema em conjunto com os alunos da UNN.  Lobachevsky como parte do projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IT Lab</a> . </li><li>  Nenhuma documenta√ß√£o do c√≥digo fonte dispon√≠vel.  Envolver-se no desenvolvimento pode ser bastante dif√≠cil. </li><li>  Limita√ß√µes de desempenho.  Com as crescentes demandas no volume de marca√ß√£o, enfrentamos v√°rios problemas, como a limita√ß√£o do Chrome Sandbox ao uso da RAM. </li></ul><br>  Obviamente, essas listas n√£o s√£o exaustivas, mas cont√™m disposi√ß√µes b√°sicas. <br><br>  Como mencionado anteriormente, o CVAT suporta v√°rios componentes adicionais.  Entre eles est√£o: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Deep Learning Deployment Toolkit</a> como parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenVINO Toolkit</a> - √© usado para acelerar o lan√ßamento do modelo TF OD API na aus√™ncia de uma GPU.  Estamos trabalhando em alguns outros usos √∫teis para esse componente. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API de detec√ß√£o de objetos do Tensorflow</a> - usada para marcar objetos automaticamente.  Por padr√£o, usamos o modelo Faster RCNN Inception Resnet V2, treinado em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">COCO</a> (80 classes), mas n√£o deve haver dificuldade em conectar outros modelos. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Logstash, Elasticsearch, Kibana</a> - permitem visualizar e analisar os logs acumulados pelos clientes.  Isso pode ser usado, por exemplo, para monitorar o processo de marca√ß√£o ou procurar erros e as causas de sua ocorr√™ncia. <br><br><img src="https://habrastorage.org/webt/ji/ps/dh/jipsdhgbmv5mdz5xg9zcdlehvc0.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NVIDIA CUDA Toolkit</a> - um conjunto de ferramentas para executar c√°lculos no processador gr√°fico (GPU).  Ele pode ser usado para acelerar o layout autom√°tico com a API TF OD ou em outros complementos personalizados. <br><br><h4>  <font color="#0071c5">Marca√ß√£o de dados</font> </h4><br><ol><li>  O processo come√ßa com a declara√ß√£o do problema para o layout.  A prepara√ß√£o inclui: <br><ul><li>  Especificando um nome de tarefa </li><li>  Enumera√ß√£o de classes a serem marcadas e seus atributos </li><li>  Especificando arquivos para download <br><ul><li>  Os dados s√£o baixados do sistema de arquivos local ou de um sistema de arquivos distribu√≠do montado em um cont√™iner </li><li>  Uma tarefa pode conter um arquivo com imagens, um v√≠deo, um conjunto de imagens e at√© uma estrutura de diret√≥rio com imagens ao fazer o download via armazenamento distribu√≠do </li></ul><br></li><li>  Opcionalmente, defina: <br><ul><li>  Link para especifica√ß√µes detalhadas de marca√ß√£o, bem como outras informa√ß√µes adicionais (Bug Tracker) </li><li>  Link para um reposit√≥rio Git remoto para armazenar anota√ß√µes (reposit√≥rio de conjunto de dados) </li><li>  Gire todas as imagens em 180 graus (Flip Images) </li><li>  Suporte de camada para tarefas de segmenta√ß√£o (Z-Order) </li><li>  Tamanho do segmento  Uma tarefa para download pode ser dividida em v√°rias subtarefas para trabalho paralelo </li><li>  √Årea de interse√ß√£o de segmento (sobreposi√ß√£o).  Usado no v√≠deo para mesclar anota√ß√µes em diferentes segmentos </li><li>  N√≠vel de qualidade ao converter imagens (Qualidade da imagem) </li></ul><br></li></ul><br><img src="https://habrastorage.org/webt/f6/cm/aw/f6cmaw990imxl1p7hti0qoqjpga.jpeg"><br></li><li>  Ap√≥s o processamento da solicita√ß√£o, a tarefa criada aparecer√° na lista de tarefas. <br><br><img src="https://habrastorage.org/webt/qh/k6/9a/qhk69afukjxpdtwe37ttbtpxima.jpeg"><br></li><li>  Cada um dos links na se√ß√£o Trabalhos corresponde a um segmento.  Nesse caso, a tarefa n√£o foi segmentada anteriormente.  Clicar em qualquer um dos links abre a p√°gina de marca√ß√£o. <br><br><img src="https://habrastorage.org/webt/bj/l2/gz/bjl2gzyiftncpmkjdijdyal3lzg.jpeg"><br></li><li>  Em seguida, os dados s√£o marcados diretamente.  Ret√¢ngulos, pol√≠gonos (principalmente para tarefas de segmenta√ß√£o), polilinhas (podem ser √∫teis, por exemplo, para marca√ß√£o de estradas) e muitos pontos (por exemplo, marca√ß√£o de marcos de face ou estimativa de pose) s√£o fornecidos como primitivos. <br><br><img src="https://habrastorage.org/webt/xb/ks/yo/xbksyo5brlzgxqun7q62g2tprsy.jpeg"><br><br>  V√°rias ferramentas de automa√ß√£o tamb√©m est√£o dispon√≠veis (c√≥pia, multiplica√ß√£o para outros quadros, interpola√ß√£o, marca√ß√£o preliminar com a API TF OD), configura√ß√µes visuais, muitas teclas de atalho, pesquisa, filtragem e outras funcionalidades √∫teis.  Na janela de configura√ß√µes, voc√™ pode alterar v√°rios par√¢metros para um trabalho mais confort√°vel. <br><br><img src="https://habrastorage.org/webt/gu/lj/77/gulj77fqjkufvwbc1bfysmmloh0.jpeg"><br><br>  A caixa de di√°logo de ajuda cont√©m muitos atalhos de teclado suportados e algumas outras dicas. <br><br><img src="https://habrastorage.org/webt/qz/1t/gb/qz1tgbca457ylk4wqduofcfhpse.jpeg"><br><br>  O processo de marca√ß√£o pode ser visto nos exemplos abaixo. <br><br>  O CVAT pode interpolar linearmente ret√¢ngulos e atributos entre quadros-chave em um v√≠deo.  Por esse motivo, a anota√ß√£o no conjunto de quadros √© exibida automaticamente. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U3MYDhESHo4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O Modo de anota√ß√£o de atributo foi desenvolvido para o cen√°rio de classifica√ß√£o, que permite acelerar a anota√ß√£o de atributos, concentrando a marca√ß√£o em uma propriedade espec√≠fica.  Al√©m disso, a marca√ß√£o aqui ocorre atrav√©s do uso de "teclas de atalho". <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UPNfWl8Egd8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Os pol√≠gonos suportam scripts de segmenta√ß√£o sem√¢ntica e de segmenta√ß√£o de inst√¢ncia.  Diferentes configura√ß√µes visuais facilitam o processo de valida√ß√£o. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6IJ0QN7PBKo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></li><li>  Receber anota√ß√£o <br>  Pressionar o bot√£o ‚ÄúDump Annotation‚Äù inicia o processo de prepara√ß√£o e carregamento dos resultados da marca√ß√£o como um √∫nico arquivo.  Um arquivo de anota√ß√£o √© um arquivo <a href="">.xml especificado</a> que cont√©m alguns metadados da tarefa e a anota√ß√£o inteira.  A marca√ß√£o pode ser baixada diretamente no reposit√≥rio Git, se o √∫ltimo estiver conectado no est√°gio de cria√ß√£o da tarefa. </li></ol><br><h3>  <font color="#0071c5">Hist√≥ria e evolu√ß√£o</font> </h3><br>  Inicialmente, n√£o t√≠nhamos unifica√ß√£o e cada tarefa de marca√ß√£o era realizada com suas pr√≥prias ferramentas, escritas principalmente em C ++ usando a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">biblioteca OpenCV</a> .  Essas ferramentas foram instaladas localmente em m√°quinas de usu√°rios finais, n√£o havia mecanismo para compartilhar dados, um pipeline comum para tarefas de configura√ß√£o e marca√ß√£o; muitas coisas tinham que ser feitas manualmente. <br><br>  O ponto de partida da hist√≥ria do CVAT pode ser considerado no final de 2016, quando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vatic</a> foi introduzido como uma ferramenta de layout, cuja interface √© apresentada abaixo.  O Vatic era de c√≥digo aberto e introduziu algumas id√©ias gerais excelentes, como a marca√ß√£o interpolada entre quadros-chave em uma arquitetura de aplicativo de v√≠deo ou cliente-servidor.  No entanto, em geral, ele forneceu uma funcionalidade de marca√ß√£o bastante modesta e fizemos muito trabalho por conta pr√≥pria. <br><br><img src="https://habrastorage.org/webt/ag/ze/et/agzeet_35gfb2io-dqo36vtf6jg.jpeg"><br><br>  Assim, por exemplo, nos primeiros seis meses, foi implementada a capacidade de anotar imagens, foram adicionados atributos de objetos ao usu√°rio, uma p√°gina foi desenvolvida com uma lista de tarefas existentes e a capacidade de adicionar novas por meio da interface da web. <br><br>  Durante o segundo semestre de 2017, introduzimos a API de detec√ß√£o de objetos do Tensorflow como um m√©todo para obter a marca√ß√£o preliminar.  Houve muitas pequenas melhorias no cliente, mas no final fomos confrontados com o fato de que a parte do cliente come√ßou a trabalhar muito lentamente.  O fato foi que, o tamanho das tarefas aumentou, o tempo de abertura aumentou proporcionalmente ao n√∫mero de quadros e dados marcados, a interface do usu√°rio diminuiu devido √† apresenta√ß√£o ineficiente dos objetos marcados; o progresso foi muitas vezes perdido ao longo das horas de trabalho.  A produtividade caiu principalmente nas tarefas com imagens, pois a base da arquitetura da √©poca foi originalmente projetada para trabalhar com v√≠deo.  Havia uma necessidade de uma mudan√ßa completa na arquitetura do cliente, com a qual lidamos com sucesso.  A maioria dos problemas de desempenho da √©poca se foi.  A interface da web se tornou muito mais r√°pida e mais est√°vel.  A marca√ß√£o de tarefas maiores tornou-se poss√≠vel.  No mesmo per√≠odo, houve uma tentativa de introduzir testes de unidade para fornecer, em certa medida, a automa√ß√£o de verifica√ß√µes durante as altera√ß√µes.  Esta tarefa n√£o foi resolvida com tanto sucesso.  Configuramos o QUnit, Karma, Chrome sem cabe√ßa no cont√™iner do Docker, escrevemos alguns testes e lan√ßamos tudo isso no CI.  No entanto, uma grande parte do c√≥digo permaneceu, e ainda permanece, descoberta por testes.  Outra inova√ß√£o foi um sistema de registro de a√ß√µes do usu√°rio com pesquisa e visualiza√ß√£o subsequentes baseadas no ELK Stack.  Permite monitorar o processo de anotadores e procurar cen√°rios de a√ß√£o que levam a exce√ß√µes de software. <br><br>  No primeiro semestre de 2018, expandimos a funcionalidade de nosso cliente.  Foi adicionado o Modo de anota√ß√£o de atributo, que implementa um script eficaz para a marca√ß√£o de atributos, cuja ideia pedimos emprestada aos colegas e generalizamos;  Agora voc√™ pode filtrar objetos de acordo com v√°rios sinais, conectar um armazenamento comum para fazer o download de dados ao definir tarefas para visualiz√°-los atrav√©s de um navegador e muitos outros.  As tarefas ficaram mais volumosas e os problemas de desempenho come√ßaram a surgir novamente, mas desta vez a parte do servidor era o gargalo.  O problema com o Vatic era que ele continha muito c√≥digo auto-escrito para tarefas que poderiam ser resolvidas com mais facilidade e efici√™ncia usando solu√ß√µes prontas.  Por isso, decidimos refazer o lado do servidor.  Escolhemos o Django como estrutura de servidor, em grande parte devido √† sua popularidade e √† disponibilidade de muitas coisas, como se costuma dizer, prontas para uso.  Ap√≥s a altera√ß√£o da parte do servidor, quando n√£o havia mais nada do Vatic, decidimos que j√° t√≠nhamos feito muito trabalho, que pode ser compartilhado com a comunidade.  Por isso, foi decidido ir para o c√≥digo aberto.  Obter permiss√£o para isso dentro de uma grande empresa √© um processo bastante complicado.  H√° uma grande lista de requisitos para isso.  Inclusive, era necess√°rio inventar um nome.  Esbo√ßamos op√ß√µes e realizamos uma s√©rie de pesquisas entre colegas.  Como resultado, nossa ferramenta interna foi denominada CVAT e, em 29 de junho de 2018, o c√≥digo fonte foi publicado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub na organiza√ß√£o OpenCV,</a> sob a licen√ßa MIT e com a vers√£o inicial 0.1.0.  Desenvolvimento adicional ocorreu em um reposit√≥rio p√∫blico. <br><br>  No final de setembro de 2018, a vers√£o principal 0.2.0 foi lan√ßada.  Houve muitas pequenas altera√ß√µes e corre√ß√µes, mas o foco principal foi no suporte a novos tipos de anota√ß√µes.  Assim, surgiram v√°rias ferramentas para marcar e validar a segmenta√ß√£o, bem como a capacidade de anotar com polilinhas ou pontos. <br><br>  O pr√≥ximo lan√ßamento, assim como um presente de Natal, est√° agendado para 31 de dezembro de 2018.  Os pontos mais significativos aqui s√£o a integra√ß√£o opcional do Deep Learning Deployment Toolkit como parte do OpenVINO, que √© usado para acelerar o lan√ßamento da API TF OD na aus√™ncia de uma placa gr√°fica NVIDIA;  sistema de an√°lise de log do usu√°rio que n√£o estava dispon√≠vel anteriormente na vers√£o p√∫blica;  muitas melhorias no lado do cliente. <br><br>  Resumimos o hist√≥rico do CVAT at√© a data (dezembro de 2018) e revisamos os eventos mais significativos.  Voc√™ sempre pode ler mais sobre o hist√≥rico de altera√ß√µes no <a href="">changelog</a> . <br><br><h3>  <font color="#0071c5">Dispositivo interno</font> </h3><br><img src="https://habrastorage.org/webt/le/ae/7l/leae7ly26adciu2xh8ik8r52p9a.jpeg"><br><br>  Para simplificar a instala√ß√£o e a implanta√ß√£o, o CVAT usa cont√™ineres do Docker.  O sistema consiste em v√°rios cont√™ineres.  Um processo supervisord √© executado no cont√™iner CVAT, que gera v√°rios processos Python no ambiente Django.  Um deles √© o servidor wsgi, que lida com solicita√ß√µes do cliente.  Outros processos, rq workers, s√£o usados ‚Äã‚Äãpara processar tarefas "longas" das filas do Redis: padr√£o e baixa.  Essas tarefas incluem aquelas que n√£o podem ser processadas em uma √∫nica solicita√ß√£o do usu√°rio (configura√ß√£o de uma tarefa, prepara√ß√£o de um arquivo de anota√ß√£o, marca√ß√£o com a API TF OD e outras).  O n√∫mero de trabalhadores pode ser configurado no arquivo de configura√ß√£o da supervisord. <br><br>  O ambiente do Django interage com dois servidores de banco de dados.  O servidor Redis armazena o status das filas de tarefas e o banco de dados CVAT cont√©m todas as informa√ß√µes sobre tarefas, usu√°rios, anota√ß√µes etc.  O PostgreSQL (e o SQLite 3 em desenvolvimento) √© usado como o DBMS para CVAT.  Todos os dados s√£o armazenados em uma parti√ß√£o conect√°vel (volume cvat db).  Se√ß√µes s√£o usadas onde √© necess√°rio evitar a perda de dados ao atualizar o cont√™iner.  Assim, o seguinte √© montado no cont√™iner CVAT: <br><br><ul><li>  Se√ß√£o com v√≠deo e imagens (volume de dados cvat) </li><li>  Se√ß√£o com chaves (volume de chaves cvat) </li><li>  Se√ß√£o com logs (volume de logs do cvat) </li><li>  Armazenamento de arquivo compartilhado (volume compartilhado cvat) </li></ul><br>  O sistema de an√°lise consiste em Elasticsearch, Logstash e Kibana envoltos em cont√™ineres Docker.  Ao salvar o trabalho no cliente, todos os dados, incluindo logs, s√£o transferidos para o servidor.  O servidor, por sua vez, os envia ao Logstash para filtragem.  Al√©m disso, existe a capacidade de enviar notifica√ß√µes automaticamente para e-mails quando ocorrerem erros.  Em seguida, os logs caem no Elasticsearch.  O √∫ltimo os salva em uma parti√ß√£o conect√°vel (volume de eventos cvat).  Em seguida, o usu√°rio pode usar a interface do Kibana para visualizar estat√≠sticas e logs.  Ao mesmo tempo, o Kibana ir√° interagir ativamente com o Elasticsearch. <br><br>  No n√≠vel da fonte, o CVAT consiste em muitos aplicativos Django: <br><br><ul><li>  autentica√ß√£o - autentica√ß√£o de usu√°rios no sistema (b√°sico e LDAP) </li><li>  engine - um aplicativo essencial (modelos b√°sicos de banco de dados; tarefas de carregamento e salvamento; carregamento e descarregamento de anota√ß√µes; interface do cliente de marca√ß√£o; interface do servidor para cria√ß√£o, altera√ß√£o e exclus√£o de tarefas) </li><li>  dashboard - interface do cliente para criar, editar, pesquisar e excluir tarefas </li><li>  documentation - exibi√ß√£o da documenta√ß√£o do usu√°rio na interface do cliente </li><li>  tf_annotation - anota√ß√£o autom√°tica com a API de detec√ß√£o de objetos do Tensorflow </li><li>  log_viewer - enviando logs do cliente para o Logstash ao salvar uma tarefa </li><li>  log_proxy - conex√£o de proxy CVAT ‚Üí Kibana </li><li>  git - Integra√ß√£o do reposit√≥rio Git para armazenar anota√ß√µes </li></ul><br>  N√≥s nos esfor√ßamos para criar um projeto com uma estrutura flex√≠vel.  Por esse motivo, os aplicativos opcionais n√£o possuem incorpora√ß√£o de c√≥digo r√≠gido.  Infelizmente, embora n√£o tenhamos um prot√≥tipo ideal do sistema de plug-in, mas gradualmente, com o desenvolvimento de novos aplicativos, a situa√ß√£o aqui est√° melhorando. <br><br>  A parte do cliente √© implementada nos modelos JavaScript e Django.    JavaScript  ,  , -   (   )   model-view-controller. ,      (, , )     ,      .       (    -   UI),     (, ,    :      , ,   models, views  controllers). <br><br><h3> <font color="#0071c5"> </font> </h3><br>   open source,        . ,    .      .   ,           CVAT.  ,  , .    : <br><br><ul><li>  CVAT  ,  ,   , ,  .       UI         . </li><li>     . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>      . </li><li>     ,  .         ,        . </li><li>     .   deep learning ,  .  ,  Deep Learning Deployment Toolkit      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  OpenVINO  -  .       ,           .  ,      . </li><li>  demo- CVAT,  ,           ,     .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> demo-</a>  Onepanel,  CVAT              . </li><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amazon Mechanical Turk</a>  CVAT      .     SDK   . </li></ul><br>       ,     .  ,   ,     .            open source .        ‚Äì     ,  .   <a href=""></a>      ,    PR   .    ,     ,             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gitter</a> .  ,   !  ! <br><br><h3>  <font color="#0071c5">Refer√™ncias</font> </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub CVAT</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gitter Chat</a> </li><li> <a href="">Changelog</a> </li><li> <a href="">Contributing</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenVINO</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pretrained models</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433772/">https://habr.com/ru/post/pt433772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433760/index.html">Elei√ß√µes, elei√ß√µes ...</a></li>
<li><a href="../pt433762/index.html">Como voc√™ escolhe produtos na loja?</a></li>
<li><a href="../pt433764/index.html">Criamos ferramentas para an√°lise aprofundada da classifica√ß√£o de aplicativos na Google Play Store</a></li>
<li><a href="../pt433768/index.html">Por que os desenvolvedores do Android odeiam o Google</a></li>
<li><a href="../pt433770/index.html">A ci√™ncia da procura de emprego, parte VII: apenas 50% dos "requisitos" de uma vaga devem ser atendidos</a></li>
<li><a href="../pt433774/index.html">Quem cria o TeamLead Conf e por qu√™</a></li>
<li><a href="../pt433776/index.html">Tutorial do Driver MongoDB Go</a></li>
<li><a href="../pt433780/index.html">Transi√ß√£o do kit de interface do usu√°rio para o sistema de design no QIWI</a></li>
<li><a href="../pt433782/index.html">Um exemplo pr√°tico de cria√ß√£o do seu pr√≥prio componente View</a></li>
<li><a href="../pt433786/index.html">Fintech Digest: criptomoeda √© propriedade, um n√∫mero recorde de cart√µes de cr√©dito foi emitido na Federa√ß√£o Russa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>