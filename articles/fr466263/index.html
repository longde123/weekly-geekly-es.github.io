<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ½â€ğŸ’¼ ğŸ•ºğŸ¼ ğŸ“¡ SystÃ¨mes RPC de rÃ©fÃ©rence (et Json inversÃ©) ğŸ‘ ğŸ‘¨â€ğŸ³ ğŸ™ŒğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comparaison de diffÃ©rents outils (RabbitMQ, Crossbar.io, Nats.io, Nginx, etc.) pour organiser RPC entre microservices. 

 Utilisation de la mÃ©moire 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SystÃ¨mes RPC de rÃ©fÃ©rence (et Json inversÃ©)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466263/"><img src="https://habrastorage.org/webt/ek/32/ry/ek32ryce-qyz-_veggjdlpckrhu.png"><br>  Comparaison de diffÃ©rents outils (RabbitMQ, Crossbar.io, Nats.io, Nginx, etc.) pour organiser RPC entre microservices. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Utilisation de la mÃ©moire</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/nf/e6/2j/nfe62jq7jepzlt7hvdrmxdftndu.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Utilisation du processeur</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/r7/0m/pv/r70mpvfluxfgh8gkuj778vcua3i.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Test multiprocesseur</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/a3/ic/yh/a3icyhyhqxigksng211u_08ahbu.png"><br></div></div><br><br>  <i>Article mis Ã  jour 2019-12-15</i> <br><br>  <b>RÃ©sumÃ©</b> .  La mise en Å“uvre d'appels RPC synchrones via le systÃ¨me MQ classique n'est pas efficace - elle rÃ©duit les performances et les effets secondaires qui doivent Ãªtre enroulÃ©s manuellement (ou avec des outils supplÃ©mentaires). <br>  Inverted Json est un serveur de tÃ¢ches lÃ©ger qui vous permet de faire des appels RPC synchrones Â«honnÃªtesÂ» (le client et le serveur se connectent via Inverted Json pour envoyer des informations), ce qui garantit des performances Ã©levÃ©es (7 fois plus rapides que RabbitMQ), et la communication se fait via http , qui vous permet d'utiliser tous les outils http, mÃªme les boucles depuis la console. <br><br><h3>  1. Tests </h3><br>  Tous les outils sont divisÃ©s en 3 groupes: <br><ul><li>  <b>Â«Connexion directeÂ»</b> - lorsque le client s'adresse directement au travailleur, dans les projets avec un grand nombre de travailleurs / services, il est le plus difficile Ã  configurer, il nÃ©cessite un Â«client intelligentÂ», c'est-Ã -dire  lors de l'appel, le client doit avoir des informations sur comment et oÃ¹ envoyer la demande (ou un proxy local supplÃ©mentaire est nÃ©cessaire), en rÃ¨gle gÃ©nÃ©rale, il produit la moindre charge sur le rÃ©seau. </li><li>  <b>Â«Connexion proxyÂ»</b> - une variante avec un point d'entrÃ©e unique, un client simple, mais en mÃªme temps des difficultÃ©s subsistent du cÃ´tÃ© des travailleurs / publications en sÃ©rie - transfert et allocation de ports, enregistrement d'adresses pour les proxys, paramÃ¨tres de pare-feu plus compliquÃ©s, des outils supplÃ©mentaires sont souvent utilisÃ©s pour gÃ©rer l'ensemble de la batterie de serveurs . </li><li>  <b>Â«Connexion inversÃ©eÂ»</b> - un point d'entrÃ©e unique pour les clients et les travailleurs (peut Ãªtre considÃ©rÃ© comme un ESB), la configuration rÃ©seau la plus simple. </li><li>  Utilisation de la mÃ©moire et du processeur tirÃ©e des Â«statistiques du dockerÂ» </li><li>  Dans le test Â«2 cÅ“ursÂ», le serveur et les clients avec disjoncteurs sont divisÃ©s en diffÃ©rents cÅ“urs afin de rÃ©duire l'influence les uns sur les autres, donc le serveur est limitÃ© Ã  2 cÅ“urs via le jeu de tÃ¢ches (test multicÅ“ur sans restrictions) </li></ul>  Quelques rÃ©flexions sur le benchmark ci-dessous. <br><br><h3>  2. MQ ou RPC </h3><br>  Bien que ces 2 mÃ©thodes de communication soient diffÃ©rentes, parfois la premiÃ¨re est utilisÃ©e Ã  la place de la seconde et vice versa. <br>  Si vous essayez de dÃ©finir les limites, quand utiliser quoi, vous pouvez obtenir quelque chose comme ceci: <br><ul><li>  <b>RPC</b> (appel de procÃ©dure synchrone) - lorsque le client a besoin d'une rÃ©ponse immÃ©diatement (dans un court laps de temps), lorsque le travailleur doit rÃ©pondre pendant que le client attend une rÃ©ponse, et si le client est parti (par timeout), cette rÃ©ponse n'est plus nÃ©cessaire (c'est pourquoi vous n'avez pas besoin de sauvegarder " demande â€, comme cela se fait souvent dans les systÃ¨mes MQ). <br>  Par exemple, lorsque vous effectuez une requÃªte dans la base de donnÃ©es - vous effectuez RPC, vous ne voudrez pas utiliser MQ pour cela. </li><li>  <b>MQ</b> (appel de procÃ©dure asynchrone) - lorsque la rÃ©ponse n'est pas nÃ©cessaire (immÃ©diatement), lorsque vous avez juste besoin de terminer une sorte de tÃ¢che Ã  la fin ou simplement de transfÃ©rer des donnÃ©es. <br>  Par exemple, pour envoyer des lettres, vous pouvez envoyer une tÃ¢che via MQ <br></li></ul><br><h3>  3. RPC sur RabbitMQ </h3><br>  <b>RabbitMQ est</b> souvent utilisÃ© pour organiser les RPC, mais comme les systÃ¨mes MQ similaires, il crÃ©e une surcharge supplÃ©mentaire, c'est pourquoi son utilisation n'est pas trÃ¨s productive. <br><br>  Si vous utilisez la "file d'attente" pour RPC, vous devez nettoyer les canaux, car  si le travailleur est tombÃ© pendant un certain temps, aprÃ¨s le redÃ©marrage, il peut obtenir un tas de tÃ¢ches non pertinentes, car les clients ont envoyÃ© des demandes tout ce temps et, en outre, ont attendu en vain une rÃ©ponse.  le travailleur n'Ã©tait pas actif.  Au total, le travailleur recevra la tÃ¢che mÃªme si le client est parti avant, la mÃªme chose avec le client, si le canal du client n'est pas comptÃ©, alors il peut se boucher avec des rÃ©ponses non reÃ§ues du travailleur, bien que dans RabbitMQ il soit possible de fermer le canal client, mais en mÃªme temps les performances seront considÃ©rablement rÃ©duites. <br><br>  Vous devez Ã©galement faire un travailleur du porc pour savoir s'il est vivant. <br>  De plus, les ressources sont dÃ©pensÃ©es pour travailler avec les canaux, alors que dans les systÃ¨mes RPC, les donnÃ©es sont simplement envoyÃ©es au travailleur et vice versa. <br><br><h3>  4. Json inversÃ© </h3><br>  Il existe de nombreux systÃ¨mes MQ diffÃ©rents, mais peu de Job Servers (RPC) tels que Gearman / Crossbar.io sont de trÃ¨s petits choix, donc les dÃ©veloppeurs prennent souvent des systÃ¨mes MQ pour les RPC. <br>  Par consÃ©quent, le <b>JSON inversÃ©</b> (iJson) a Ã©tÃ© crÃ©Ã© - un serveur proxy avec une interface http oÃ¹ les clients et les travailleurs se connectent en tant que client rÃ©seau: [client] -&gt; [Json inversÃ©] &lt;- [travailleur], Ã©crit en C / C ++, utilise epoll, des machines d'Ã©tat pour le routage, l'analyseur de streaming json, les tranches au lieu des chaÃ®nes *, etc. des moyens pour de meilleures performances. <br><br>  <b>Avantages du JSON inversÃ© par rapport Ã  RabbitMQ:</b> <br><ul><li>  Pas besoin de nettoyer les canaux client et travailleur des messages non reÃ§us </li><li>  Il n'est pas nÃ©cessaire d'envoyer une requÃªte ping au travailleur, le client recevra immÃ©diatement une erreur si le travailleur se dÃ©connecte (avec une connexion permanente) </li><li>  API plus simple - juste une requÃªte http (en rÃ¨gle gÃ©nÃ©rale, elle est dÃ©jÃ  prise en charge par tous les langages et frameworks) </li><li>  Fonctionne plus rapidement et consomme moins de mÃ©moire </li><li>  Un moyen plus simple d'envoyer des commandes Ã  un travailleur spÃ©cifique (par exemple, s'il y a plusieurs travailleurs dans la file d'attente, mais que vous devez travailler avec un seul) </li></ul><br>  <b>Autres informations Json inversÃ©es</b> <br><ul><li>  La possibilitÃ© de transfÃ©rer des donnÃ©es binaires (pas seulement json, comme son nom l'indique) </li><li>  Il n'est pas nÃ©cessaire de spÃ©cifier l'id si le travailleur est connectÃ© en tant que keep-alive, Inverted Json connecte simplement le client et le travailleur directement. </li><li>  La possibilitÃ© de "s'abonner" Ã  plusieurs commandes (canaux), de s'abonner Ã  un pattern (par exemple commande / *) sans perdre en performance. </li><li>  L'image Docker ne fait que <b>2,6 Mo</b> (version slim) </li><li>  Kernel Inverted Json seulement ~ 1400 lignes de code (v0.3), moins de code - moins de bugs;) </li><li>  Le JSON inversÃ© ne modifie pas le corps de la demande (corps), mais l'envoie tel quel. </li></ul><br><br><h3>  5. Essayez Json inversÃ© en 3 minutes </h3><br>  Vous pouvez essayer Inverted Json dÃ¨s maintenant si vous avez <b>Docker</b> et <b>curl</b> : <br><img src="https://habrastorage.org/webt/lw/ky/d3/lwkyd3pm8zfnhlyxgpjnsrk6vbu.gif"><br><br>  Description de l'image: <br>  1) Lancement de l'image docker de <b>Json inversÃ©</b> sur le port 8001, --log 47 enregistre les demandes entrantes, etc.: <br><pre><code class="bash hljs">$ docker run -it -p 8001:8001 lega911/ijson --<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> 47</code> </pre> <br>  2) Enregistrez le travailleur pour la tÃ¢che Â«calc / sumÂ» et attendez la tÃ¢che, demandez le type Â«getÂ», c.-Ã -d.  - obtenez la tÃ¢che: <br><pre> <code class="bash hljs">$ curl localhost/calc/sum -H <span class="hljs-string"><span class="hljs-string">'type: get'</span></span></code> </pre><br>  3) Le client fait une demande de calcul / somme RPC: <br><pre> <code class="bash hljs">$ curl localhost/calc/sum -d <span class="hljs-string"><span class="hljs-string">'{"id": 15, "data": "2+3"}'</span></span></code> </pre><br>  4) Le travailleur reÃ§oit la tÃ¢che `{" id ": 15," data ":" 2 + 3 "}` - les donnÃ©es sont inchangÃ©es, vous devez maintenant envoyer le rÃ©sultat au mÃªme id, le type de demande est "result": <br><pre> <code class="bash hljs">$ curl localhost -H <span class="hljs-string"><span class="hljs-string">'type: result'</span></span> -d <span class="hljs-string"><span class="hljs-string">'{"id": 15, "result": 5}'</span></span></code> </pre><br>  ... et le client obtient le rÃ©sultat tel qu'il est <code>`{"id": 15, "result": 5}`</code> <br><br><h4>  5.1.  Jsonrpc </h4><br>  JsonRPC 2 n'est pas pris en charge, mais il y a quelques rudiments, par exemple, le client peut envoyer des requÃªtes comme (url / rpc / call): <br><pre> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"jsonrpc"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"calc/sum"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"params"</span></span>: [<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>], <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}</code> </pre>  accepter des erreurs comme: <br><pre> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"jsonrpc"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"error"</span></span>: {<span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">-32601</span></span>, <span class="hljs-attr"><span class="hljs-attr">"message"</span></span>: <span class="hljs-string"><span class="hljs-string">"Method not found"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>}</code> </pre>  Cependant, en cas de demande, la prise en charge de JsonRPC peut Ãªtre amÃ©liorÃ©e. <br><br><h4>  5.2.  Exemple de client et de travailleur Python </h4><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># client.py import requests print(requests.post('http://127.0.0.1:8001/test/command', json={'id': 1, 'params': 'Hello'}).json()) # worker.py import requests while True: req = requests.post('http://127.0.0.1:8001/test/command', headers={'type': 'get'}).json() response = { 'id': req['id'], 'result': req['params'] + ' world!' } requests.post('http://127.0.0.1:8001/', json=response, headers={'type': 'result'})</span></span></code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Et ici,</a> vous pouvez trouver un exemple dans le "mode travailleur", qui est plus productif et plus compact. <br><br><h3>  6. Quelques rÃ©flexions sur le rÃ©sultat de rÃ©fÃ©rence </h3><br><ul><li>  <b>Crossbar.io</b> : est basÃ© sur python, il n'est donc pas si rapide et ne peut pas utiliser plusieurs cÅ“urs en raison du GIL. </li><li>  <b>RabbitMQ</b> : RPC au-dessus de MQ, ce qui impose une surcharge supplÃ©mentaire.  Une baisse rapide des performances avec une charge croissante (non reflÃ©tÃ©e dans le test). </li><li>  <b>Nats</b> : pas un mauvais, bien que infÃ©rieur Ã  Json inversÃ©, comme  RPC sur MQ aura Ã©galement les mÃªmes problÃ¨mes. </li><li>  <b>Json inversÃ©</b> : a atteint la limite du rÃ©seau (c'est-Ã -dire que le lancement de plusieurs copies de tests sur diffÃ©rents cÅ“urs ne donne pas un meilleur rÃ©sultat au total), a montrÃ© l'utilisation la plus efficace de la mÃ©moire et du processeur par rapport aux performances. </li><li>  <b>Nginx</b> : lorsque proxy-pass, les performances chutent rapidement si le mode Keep-Alive n'est pas activÃ© (dÃ©sactivÃ© par dÃ©faut), car Linux ne permet pas d'ouvrir / fermer de nombreux sockets dans un court laps de temps (cela ne se reflÃ¨te pas dans le test). </li><li>  <b>Traefik</b> : trÃ¨s vorace, utilisÃ© 600% du CPU au pic, infÃ©rieur Ã  nginx en vitesse </li><li>  <b>uvloop</b> (sous asyncio) - donne de trÃ¨s bonnes performances, car  la plupart Ã©crites en C / C ++, pour RPC est plus prÃ©fÃ©rable que ZeroMQ </li><li>  <b>ZeroMQ</b> - le travailleur lui-mÃªme est Ã©crit en Python, donc il a fonctionnÃ© dans le noyau, bien que le test multiprocesseur consomme plus de 100% de CPU, cela est dÃ» au fait que zeromq lui-mÃªme est Ã©crit en C / C ++ sans capture GIL.  Il donne de grandes performances, mais d'un autre cÃ´tÃ©, si le travailleur ne se contente pas de a + b, toute complication entraÃ®nera une rÃ©duction significative du RPC, car  frappera le noyau encore plus tÃ´t. </li><li>  <b>ZeroRPC</b> : dÃ©clarÃ© comme un wrapper lÃ©ger sur ZeroMQ, en rÃ©alitÃ©, 95% des performances de ZeroMQ sont perdues, il semble que ce ne soit pas si lÃ©ger. </li><li>  <b>GRPC</b> : l'option pour python produit beaucoup de code python standard, c'est-Ã -dire  le processeur s'avÃ¨re lourd et repose rapidement sur le CPU, pour les langages compilÃ©s il n'y a probablement pas un tel problÃ¨me. </li><li>  Tests 2 cÅ“urs et multicÅ“urs, en multicÅ“ur, certains indicateurs ont diminuÃ©, car vous devez rivaliser pour les ressources CPU avec le code de test client, par contre, certains tests ont donnÃ© de grandes performances, par exemple Traefik, qui a mangÃ© 600% CPU </li></ul><br><br><h3>  7. Conclusion </h3><br>  Si vous avez une grande entreprise et de nombreux employÃ©s, vous pouvez vous permettre de prendre en charge divers outils complexes pour organiser des connexions directes entre microservices, qui peuvent fournir une communication efficace. <br>  Et pour les petites entreprises et les startups, oÃ¹ une petite Ã©quipe doit rÃ©soudre des problÃ¨mes dans divers domaines, Inverted Json peut Ã©conomiser du temps et des ressources. <br><br>  Pour le dÃ©veloppement d'Inverted Json, les plans incluent un support pour pubsub, kubernetes et d'autres idÃ©es intÃ©ressantes. <br>  Si vous Ãªtes intÃ©ressÃ© par le projet ou si vous souhaitez simplement aider l'auteur, vous pouvez mettre un astÃ©risque sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">projet github</a> , merci. <br><br><h3>  PS: </h3><br><ul><li>  Il a fallu plus de temps pour crÃ©er cet article incluant des tests que pour crÃ©er Json inversÃ© lui-mÃªme </li><li>  Des prototypes Json inversÃ©s ont Ã©galement Ã©tÃ© Ã©crits en 1. python + asyncio + uvloop, 2. en GoLang </li><li>  Les tests ont Ã©tÃ© examinÃ©s par diffÃ©rents experts. </li><li>  Â«Tranches au lieu de chaÃ®nesÂ» - dans la plupart des cas, lors de l'analyse de http / json, les donnÃ©es ne sont pas copiÃ©es dans des chaÃ®nes, mais le lien vers les donnÃ©es source est utilisÃ©, il n'y a donc pas d'allocation et de copie inutiles de la mÃ©moire. </li><li>  Si vous allez tester - n'utilisez pas de requÃªtes en python, c'est trÃ¨s lent, mieux que pycurl, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ce wrapper est</a> utilisÃ© dans les tests. </li><li>  La rÃ©fÃ©rence <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">est ici</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Sources ici</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466263/">https://habr.com/ru/post/fr466263/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466247/index.html">Entretien de Introvert</a></li>
<li><a href="../fr466249/index.html">Ã‰crire un serpent pour Android dans Kivy, Python</a></li>
<li><a href="../fr466251/index.html">Faire passer le projet de Soft Launch Ã  1 million de dollars de revenus par mois</a></li>
<li><a href="../fr466253/index.html">Comment j'ai reconstruit les sites de dÃ©barquement de la SLA Luna-9 et Luna-13</a></li>
<li><a href="../fr466257/index.html">Ã€ la conquÃªte des mers: entrepÃ´ts de donnÃ©es flottants</a></li>
<li><a href="../fr466267/index.html">Pourquoi beaucoup sous-estiment leurs jeux</a></li>
<li><a href="../fr466271/index.html">Cours communs Groupe-IB et Belkasoft: ce que nous enseignons et qui venir</a></li>
<li><a href="../fr466279/index.html">La plupart des appareils Android vulnÃ©rables aux attaques de phishing via SMS</a></li>
<li><a href="../fr466281/index.html">RÃ©alitÃ© virtuelle, jeux open source et voitures Ã©lectriques: ce que John Carmack a dit sur le podcast Joe Rogan</a></li>
<li><a href="../fr466283/index.html">Opencartforum et amis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>