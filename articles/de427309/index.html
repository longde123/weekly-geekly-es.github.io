<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèæ ü§µüèΩ üçõ Wie sich herausstellte, dass PVS-Studio aufmerksamer war als dreieinhalb Programmierer ü§¶üèø üêé üëàüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PVS-Studio erzeugt wie andere statische Code-Analysatoren h√§ufig falsch positive Ergebnisse. Aber beeilen Sie sich nicht, seltsame Antworten als falsc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie sich herausstellte, dass PVS-Studio aufmerksamer war als dreieinhalb Programmierer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/427309/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e1/207/92e/8e120792e15aa808598ab23995db53ab.png" alt="Wie sich herausstellt, dass das PVS-Studio als dreieinhalb Programmierer"></div><br>  PVS-Studio erzeugt wie andere statische Code-Analysatoren h√§ufig falsch positive Ergebnisse.  Aber beeilen Sie sich nicht, seltsame Antworten als falsch zu betrachten.  Dies ist eine kurze Geschichte dar√ºber, wie sich PVS-Studio erneut als aufmerksamer gegen√ºber mehreren Personen herausstellte. <br><br>  Der Benutzer schrieb zur Unterst√ºtzung von uns und behauptete, dass der Analysator sofort vier falsch positive Ergebnisse pro Codezeile erzeugt.  Der zur Unterst√ºtzung verfasste Brief ging zun√§chst an Jewgeni Ryzhkow, der ihn, nachdem er ihn flie√üend gelesen und keine ungew√∂hnlichen R√ºckmeldungen bemerkt hatte, sofort an den Hauptentwickler Svyatoslav Razmyslov schickte.  Eugene hat nicht in den Code geschaut, daher w√§re es fair, ihn nur f√ºr die H√§lfte des Programmierers zu z√§hlen :). <br><a name="habracut"></a><br><br>  Svyatoslav las den Brief und bezweifelte, dass der Analysator so grob falsch sein k√∂nnte.  Deshalb kam er zu einer Beratung zu mir.  Svyatoslav hatte die Hoffnung, dass mein Auge gesetzt war und ich etwas bemerken werde, das mir sagt, warum der Analysator all diese seltsamen Nachrichten ausgegeben hat.  Leider habe ich nur best√§tigt, dass die Nachrichten wirklich sehr seltsam sind und nicht sein sollten.  Was jedoch der Grund f√ºr ihr Auftreten war, konnte ich nicht bemerken.  Es wurde beschlossen, die Aufgabe im Bugtracker zu √∂ffnen und zu verstehen, was falsch war. <br><br>  Und erst als Svyatoslav anfing, synthetische Beispiele zu erstellen, um das Problem im Bugtracker detailliert zu beschreiben, d√§mmerte ihm die Einsicht.  Lassen Sie uns nun sehen, ob Sie schnell den Grund finden k√∂nnen, warum der Analysator 4 Meldungen anzeigt. <br><br>  Hier ist der Text des Briefes, der mit Genehmigung des Autors ver√∂ffentlicht wurde.  Und ein erkl√§rendes Bild, das dem Brief beigef√ºgt war. <br><br>  V560-Warnungen hier sind alle falsch.  L√§uft mit der neuesten Version von PVS-Studio f√ºr den pers√∂nlichen Gebrauch.  Grunds√§tzlich ist die IF-Anweisung korrekt.  Das √Ñu√üere geschieht aus Gr√ºnden der Geschwindigkeit - das Innere wird immer noch ben√∂tigt und das Nicht-Wahre ist immer wahr oder falsch. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e83/c09/3d7/e83c093d7e29c109f3ecd693c7941a5d.png" alt="Ein kurzer"></div><br><br>  Nun, lieber Leser, Ihre Zeit, sich selbst zu testen!  Sehen Sie den Fehler? <br><br>  Ihre Zeit, aufmerksam zu sein.  Und das Einhorn wird ein bisschen warten. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbc/493/aec/fbc493aec04fd30214afa75a79e6f388.png" alt="Einhorn geh√∂rt"></div><br><br>  Nach dem einleitenden Teil des Artikels haben h√∂chstwahrscheinlich viele einen Fehler gefunden.  Wenn konfiguriert, um einen Fehler zu finden, befindet er sich.  Es ist viel schwieriger, einen Fehler nach dem Lesen des Briefes zu bemerken, der als "falsch positiv" bezeichnet wird :). <br><br>  Nun eine Erkl√§rung f√ºr diejenigen, die zu faul sind, um nach einem Fehler zu suchen.  Betrachten Sie die Bedingung noch einmal: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>)) || ((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF21</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF3A</span></span>)) || ((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF41</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF5A</span></span>)))</code> </pre> <br>  Der Autor des Codes wollte √ºberpr√ºfen, ob das Zeichen in einen der drei Bereiche f√§llt. <br><br>  Der Fehler ist, dass der logische NOT-Operator (!) Nur f√ºr den ersten Unterausdruck gilt. <br><br>  Wenn die Bedingung erf√ºllt ist: <br><br><pre> <code class="cpp hljs">!((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>))</code> </pre> <br>  dann wird die Ausdrucksauswertung gem√§√ü der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kurzschlussauswertung</a> unterbrochen.  Wenn die Bedingung nicht erf√ºllt ist, liegt der Wert der Variablen <i>ch</i> im Bereich [0xFF10..0xFF19].  Dementsprechend sind vier weitere Vergleiche nicht sinnvoll.  Alle von ihnen werden falsch oder wahr sein. <br><br>  Noch einmal.  Sehen Sie, wenn <i>ch</i> im Bereich <i>[0xFF10..0xFF19] liegt</i> und die Berechnung fortgesetzt wird, dann: <br><br><ul><li>  ch&gt; = 0x0FF21 - immer falsch </li><li>  ch &lt;= 0x0FF3A - immer wahr </li><li>  ch&gt; = 0x0FF41 - immer falsch </li><li>  ch &lt;= 0x0FF5A - immer wahr </li></ul><br>  Darum warnt der PVS-Studio-Analysator. <br><br>  Der statische Analysator erwies sich als aufmerksamer als der Benutzer und zweieinhalb Programmierer aus unserem Team. <br><br>  Um die Situation zu beheben, m√ºssen Sie zus√§tzliche Klammern hinzuf√ºgen: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>)) || ((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF21</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF3A</span></span>)) || ((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF41</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF5A</span></span>))))</code> </pre> <br>  Oder schreiben Sie die Bedingung neu: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((ch &lt; <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span>) || (ch &gt; <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>)) &amp;&amp; ((ch &lt; <span class="hljs-number"><span class="hljs-number">0x0FF21</span></span>) || (ch &gt; <span class="hljs-number"><span class="hljs-number">0x0FF3A</span></span>)) &amp;&amp; ((ch &lt; <span class="hljs-number"><span class="hljs-number">0x0FF41</span></span>) || (ch &gt; <span class="hljs-number"><span class="hljs-number">0x0FF5A</span></span>)))</code> </pre> <br>  Ich kann jedoch keine dieser Optionen empfehlen.  Ich w√ºrde dies schreiben, um das Lesen des Codes zu vereinfachen: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isLetterOrDigit = (ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span> &amp;&amp; ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 0..9 || (ch &gt;= 0x0FF21 &amp;&amp; ch &lt;= 0x0FF3A) // A..Z || (ch &gt;= 0x0FF41 &amp;&amp; ch &lt;= 0x0FF5A); // a..z if (!isLetterOrDigit)</span></span></code> </pre> <br>  Beachten Sie, dass ich einige der Klammern entfernt habe.  Wie wir gerade gesehen haben, hat eine gro√üe Anzahl von Klammern nicht dazu beigetragen, einen Fehler √ºberhaupt zu vermeiden.  Klammern sollten das Lesen von Code erleichtern und nicht komplizierter sein.  Programmierer erinnern sich gut daran, dass die Priorit√§t von Vergleichen = &lt;, =&gt; h√∂her ist als die des Operators &amp;&amp;.  Daher werden hier keine Klammern ben√∂tigt.  Wenn Sie jedoch fragen, welche Priorit√§t &amp;&amp; oder || ist, werden viele verwirrt.  Um die Reihenfolge der Berechnungen &amp;&amp; anzugeben, ||  Klammern sind besser zu setzen. <br><br>  Warum ist es besser zu schreiben ||  Am Anfang habe ich im Artikel ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das Hauptproblem des Programmierens, Refactorings und all das</a> ‚Äú beschrieben (siehe Kapitel: Den gleichen Codetyp an einer ‚ÄûTabelle‚Äú ausrichten). <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit.  Laden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PVS-Studio</a> herunter und starten Sie es.  Es wird helfen, viele Fehler und potenzielle Schwachstellen in den fr√ºhesten Stadien zu identifizieren. <br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  Wenn Sie diesen Artikel einem englischsprachigen Publikum zug√§nglich machen m√∂chten, verwenden Sie bitte den Link zur √úbersetzung: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie sich PVS-Studio als aufmerksamer als dreieinhalb Programmierer erwies</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427309/">https://habr.com/ru/post/de427309/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427297/index.html">Apache Ignite + Apache Spark-Datenrahmen: zusammen mehr Spa√ü</a></li>
<li><a href="../de427299/index.html">Lassen Sie uns noch etwas sammeln? Konstruktor 3 in 1 "Mondflotte"</a></li>
<li><a href="../de427301/index.html">GitHub st√ºrzt Datenbank ab</a></li>
<li><a href="../de427303/index.html">Windows verlangsamen Teil 2: Prozesse erstellen</a></li>
<li><a href="../de427307/index.html">Java-Backend-Testpraxis + Rest-Assured</a></li>
<li><a href="../de427311/index.html">So werden Sie ein Rechenzentrum, wenn Sie √ºber 40 Jahre alt sind und kein Programmierer sind</a></li>
<li><a href="../de427313/index.html">Wie SoftBank j√§hrlich 50 Milliarden US-Dollar in Startups investiert und warum es Investoren verbl√ºfft</a></li>
<li><a href="../de427315/index.html">Izba-Lesesaal oder eine Auswahl an Fachliteratur</a></li>
<li><a href="../de427317/index.html">Im IT-Bereich erfolgreich sein oder was t√∂tet IT'shnikov?</a></li>
<li><a href="../de427319/index.html">Rekrutierungsprogrammierer f√ºr Herren UE4, Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>