<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ŒğŸ¾ ğŸ‘ƒğŸ¾ ğŸ¨ é›¶åœæœºæ—¶é—´éƒ¨ç½²å’Œæ•°æ®åº“ ğŸ‘ƒ ğŸ›ï¸ âœŒğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡è¯¦ç»†è¯´æ˜äº†å¦‚ä½•è§£å†³ä¸éƒ¨ç½²è¿‡ç¨‹ä¸­æ•°æ®åº“å…¼å®¹æ€§ç›¸å…³çš„é—®é¢˜ã€‚ å¦‚æœæ‚¨åœ¨æ²¡æœ‰ä»»ä½•å‡†å¤‡çš„æƒ…å†µä¸‹å°è¯•æ‰§è¡Œéƒ¨ç½²ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰æ‚¨äº§å“ä¸Šçš„åº”ç”¨ç¨‹åºä¼šå‘ç”Ÿä»€ä¹ˆã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†ç»å†åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µï¼Œè¿™äº›é˜¶æ®µå¯¹äºå®ç°é›¶åœæœºæ—¶é—´ï¼ˆ å¤§çº¦Transl .ï¼šè¿›ä¸€æ­¥-é›¶åœæœºæ—¶é—´ ï¼‰æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ æˆ‘ä»¬æ“ä½œçš„ç»“æœå°†æ˜¯ä»¥å‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é›¶åœæœºæ—¶é—´éƒ¨ç½²å’Œæ•°æ®åº“</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/481932/"><p><img src="https://habrastorage.org/webt/hr/vy/qq/hrvyqqi2mmitehw9vx_xklbofj8.png" alt="å›¾ç‰‡"></p><br><p> æœ¬æ–‡è¯¦ç»†è¯´æ˜äº†å¦‚ä½•è§£å†³ä¸éƒ¨ç½²è¿‡ç¨‹ä¸­æ•°æ®åº“å…¼å®¹æ€§ç›¸å…³çš„é—®é¢˜ã€‚ å¦‚æœæ‚¨åœ¨æ²¡æœ‰ä»»ä½•å‡†å¤‡çš„æƒ…å†µä¸‹å°è¯•æ‰§è¡Œéƒ¨ç½²ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰æ‚¨äº§å“ä¸Šçš„åº”ç”¨ç¨‹åºä¼šå‘ç”Ÿä»€ä¹ˆã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†ç»å†åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µï¼Œè¿™äº›é˜¶æ®µå¯¹äºå®ç°é›¶åœæœºæ—¶é—´ï¼ˆ <em>å¤§çº¦Transl .ï¼šè¿›ä¸€æ­¥-é›¶åœæœºæ—¶é—´</em> ï¼‰æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ æˆ‘ä»¬æ“ä½œçš„ç»“æœå°†æ˜¯ä»¥å‘åå…¼å®¹çš„æ–¹å¼åº”ç”¨å‘åä¸å…¼å®¹çš„æ•°æ®åº“æ›´æ”¹ã€‚ </p><a name="habracut"></a><br><p> å¦‚æœæ‚¨æƒ³äº†è§£æœ¬æ–‡ä¸­çš„ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥åœ¨<a href="https://github.com/spring-cloud-samples/zero-downtime-deployment">GitHubä¸Š</a>æ‰¾åˆ°å®ƒä»¬ã€‚ </p><br><h2 id="vvedenie"> å¼•è¨€ </h2><br><h3 id="zero-downtime-deployment"> é›¶åœæœºæ—¶é—´éƒ¨ç½² </h3><br><p> ä»€ä¹ˆæ˜¯<strong>é›¶åœæœº</strong>ç¥ç§˜<strong>éƒ¨ç½²</strong> ï¼Ÿ æ‚¨å¯ä»¥åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶è¿™æ ·è¯´ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æˆåŠŸå¼•å…¥æ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºè¿›è¡Œç”Ÿäº§ï¼Œè€Œç”¨æˆ·ä¸ä¼šæ³¨æ„åˆ°å…¶ä¸å¯è®¿é—®æ€§ã€‚ ä»ç”¨æˆ·å’Œå…¬å¸çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯æœ€ä½³çš„éƒ¨ç½²æ–¹æ¡ˆï¼Œå› ä¸ºè¿™æ ·æ‚¨å°±å¯ä»¥å¼•å…¥æ–°åŠŸèƒ½å¹¶æ¶ˆé™¤é”™è¯¯è€Œä¸ä¼šä¸­æ–­ã€‚ </p><br><p> å¦‚ä½•å®ç°å‘¢ï¼Ÿ æœ‰å‡ ç§æ–¹æ³•ï¼Œè¿™æ˜¯å…¶ä¸­ä¸€ç§ï¼š </p><br><ul><li> æ‰©å±•æœåŠ¡çš„ç‰ˆæœ¬1 </li><li> è¿ç§»æ•°æ®åº“ </li><li> ä¸ç‰ˆæœ¬1å¹¶è¡Œéƒ¨ç½²æœåŠ¡çš„ç‰ˆæœ¬2 </li><li> ä¸€æ—¦çœ‹åˆ°ç‰ˆæœ¬å·2æ­£å¸¸è¿è¡Œï¼Œè¯·åˆ é™¤ç‰ˆæœ¬å·1 </li><li> å®Œæˆäº†ï¼ </li></ul><br><p> å®¹æ˜“å§ï¼Ÿ ä¸å¹¸çš„æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯é‚£ä¹ˆç®€å•ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è¯¦ç»†è®¨è®ºã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦ä¸€ä¸ªç›¸å½“æ™®éçš„éƒ¨ç½²è¿‡ç¨‹-è“ç»¿è‰²éƒ¨ç½²ã€‚ </p><br><p> æ‚¨å¬è¯´è¿‡<a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">è“ç»¿è‰²éƒ¨ç½²</a>å—ï¼Ÿ ä½¿ç”¨Cloud Foundryï¼Œè¿™éå¸¸å®¹æ˜“åšåˆ°ã€‚ åªéœ€çœ‹ä¸€ä¸‹<a href="https://spring.io/blog/2014/04/04/project-sagan-zero-downtime-deployments">æœ¬æ–‡</a> ï¼Œæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œæ›´è¯¦ç»†çš„æè¿°ã€‚ ç®€è¦æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å›é¡¾äº†å¦‚ä½•è¿›è¡Œè“ç»¿è‰²éƒ¨ç½²ï¼š </p><br><ul><li>  <em>ç¡®ä¿æ“ä½œä¸¤ä¸ªç”Ÿäº§ä»£ç å‰¯æœ¬ï¼ˆâ€œè“è‰²â€å’Œâ€œç»¿è‰²â€ï¼‰ï¼›</em> </li><li>  <em>å°†æ‰€æœ‰æµé‡å®šå‘åˆ°è“è‰²ç¯å¢ƒï¼Œå³</em>  <em>ä»¥ä¾¿å°†ç”Ÿäº§URLæŒ‡å‘æ­¤å¤„ï¼›</em> </li><li>  <em>åœ¨ç»¿è‰²ç¯å¢ƒä¸­éƒ¨ç½²å’Œæµ‹è¯•æ‰€æœ‰åº”ç”¨ç¨‹åºæ›´æ”¹</em> </li><li>  <em>å°†ç½‘å€ä»è“è‰²ç¯å¢ƒåˆ‡æ¢åˆ°ç»¿è‰²ç¯å¢ƒ</em> </li></ul><br><p> è“ç»¿è‰²éƒ¨ç½²æ˜¯ä¸€ç§ä½¿æ‚¨å¯ä»¥è½»æ¾å¼•å…¥æ–°åŠŸèƒ½è€Œä¸å¿…æ‹…å¿ƒç”Ÿäº§ä¼šä¸­æ–­çš„æ–¹æ³•ã€‚ è¿™æ˜¯ç”±äºè¿™æ ·çš„äº‹å®ï¼Œå³ä½¿å‘ç”Ÿäº†æŸäº›äº‹æƒ…ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç®€å•åœ°â€œå•å‡»å¼€å…³â€è½»æ¾å›æ»šåˆ°ä»¥å‰çš„ç¯å¢ƒã€‚ </p><br><p> é˜…è¯»å®Œä»¥ä¸Šæ‰€æœ‰å†…å®¹åï¼Œæ‚¨å¯ä»¥æå‡ºä»¥ä¸‹é—®é¢˜ï¼šè“ç»¿è‰²éƒ¨ç½²ä¸é›¶åœæœºæ—¶é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ </p><br><p> å—¯ï¼Œå®ƒä»¬æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œå› ä¸ºæ”¯æŒåŒä¸€ç¯å¢ƒçš„ä¸¤ä¸ªå‰¯æœ¬éœ€è¦ä»˜å‡ºåŒé‡åŠªåŠ›æ¥ç»´æŠ¤å®ƒä»¬ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">é©¬ä¸Â·ç¦å‹’</a> ï¼ˆ <a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">Martin Fowler</a> ï¼‰è®¤ä¸ºæŸäº›å›¢é˜ŸåšæŒé‡‡ç”¨è¿™ç§æ–¹æ³•çš„åŸå› ï¼š </p><br><p> <em>å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“ï¼Œä¸ºWebå’ŒåŸŸå±‚åˆ›å»ºè“ç»¿è‰²å¼€å…³ã€‚</em>  <em>åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ•°æ®åº“é€šå¸¸æ˜¯ä¸ªé—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“æ‚¨éœ€è¦æ›´æ”¹å…¶æ¶æ„ä»¥æ”¯æŒè¯¥è½¯ä»¶çš„æ–°ç‰ˆæœ¬æ—¶ã€‚</em> </p><br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®¨è®ºæœ¬æ–‡çš„ä¸»è¦é—®é¢˜ã€‚  <strong>æ•°æ®åº“</strong> ã€‚ è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹è¿™å¥è¯ã€‚ </p><br><p>  <em>è¿ç§»æ•°æ®åº“ã€‚</em> </p><br><p> ç°åœ¨æ‚¨å¿…é¡»é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜-å¦‚æœæ›´æ”¹æ•°æ®åº“å‘åä¸å…¼å®¹æ€ä¹ˆåŠï¼Ÿ æˆ‘çš„åº”ç”¨ç¨‹åºçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸ä¼šä¸­æ–­å—ï¼Ÿ å®é™…ä¸Šï¼Œè¿™æ­£æ˜¯å°†è¦å‘ç”Ÿçš„äº‹æƒ…... </p><br><p> å› æ­¤ï¼Œå°½ç®¡é›¶åœæœºæ—¶é—´/è“ç»¿è‰²éƒ¨ç½²å¸¦æ¥äº†å·¨å¤§çš„å¥½å¤„ï¼Œä½†å…¬å¸ä»å€¾å‘äºä¸ºå…¶åº”ç”¨éµå¾ªä»¥ä¸‹æ›´å®‰å…¨çš„éƒ¨ç½²è¿‡ç¨‹ï¼š </p><br><ul><li> ä½¿ç”¨æ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºå‡†å¤‡è½¯ä»¶åŒ… </li><li> å…³é—­æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åº </li><li> è¿è¡Œè„šæœ¬è¿›è¡Œæ•°æ®åº“è¿ç§» </li><li> éƒ¨ç½²å¹¶å¯åŠ¨æ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åº </li></ul><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†æè¿°å¦‚ä½•ä½¿ç”¨æ•°æ®åº“å’Œä»£ç æ¥åˆ©ç”¨é›¶åœæœºæ—¶é—´éƒ¨ç½²ã€‚ </p><br><h3 id="problemy-s-bazoy-dannyh"> æ•°æ®åº“é—®é¢˜ </h3><br><p> å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæ— çŠ¶æ€åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºæœªåœ¨æ•°æ®åº“ä¸­å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œåˆ™å¯ä»¥ç«‹å³è·å¾—é›¶åœæœºæ—¶é—´éƒ¨ç½²ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œå¤§å¤šæ•°è½¯ä»¶éƒ½éœ€è¦å°†æ•°æ®å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æ›´æ”¹ç”µè·¯ä¹‹å‰åº”è¯¥ä¸‰æ€è€Œåè¡Œçš„åŸå› ã€‚ åœ¨æ·±å…¥ç ”ç©¶å¦‚ä½•æ›´æ”¹æ–¹æ¡ˆçš„ç»†èŠ‚ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹è¿›è¡Œéƒ¨ç½²ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆå…³æ³¨ç‰ˆæœ¬æ§åˆ¶æ–¹æ¡ˆã€‚ </p><br><h3 id="shema-upravleniya-versiyami"> ç‰ˆæœ¬æ§åˆ¶æ–¹æ¡ˆ </h3><br><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://flywaydb.org/">Flyway</a>ä½œä¸ºç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆ <em>å¤§çº¦Translã€‚ï¼šæˆ‘ä»¬æ­£åœ¨è°ˆè®ºæ•°æ®åº“è¿ç§»</em> ï¼‰ã€‚ è‡ªç„¶ï¼Œæˆ‘ä»¬è¿˜å°†ç¼–å†™ä¸€ä¸ªå…·æœ‰å†…ç½®Flywayæ”¯æŒçš„Spring Bootåº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨è®¾ç½®åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ—¶è¿ç§»ç”µè·¯ã€‚ ä½¿ç”¨Flywayæ—¶ï¼Œå¯ä»¥å°†è¿ç§»è„šæœ¬å­˜å‚¨åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨<code>classpath:db/migration</code> ï¼‰ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ­¤ç±»è¿ç§»æ–‡ä»¶çš„ç¤ºä¾‹ã€‚ </p><br><pre> <code class="plaintext hljs">â””â”€â”€ db â””â”€â”€ migration â”œâ”€â”€ V1__init.sql â”œâ”€â”€ V2__Add_surname.sql â”œâ”€â”€ V3__Final_migration.sql â””â”€â”€ V4__Remove_lastname.sql</code> </pre> <br><p> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†4ç§è¿ç§»æ–¹æ¡ˆï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰æ›´æ—©æ‰§è¡Œï¼Œåˆ™å°†åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œã€‚ è®©æˆ‘ä»¬ä»¥å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ï¼ˆ <code>V1__init.sql</code> ï¼‰ä¸ºä¾‹ã€‚ </p><br><pre> <code class="plaintext hljs">CREATE TABLE PERSON ( id BIGINT GENERATED BY DEFAULT AS IDENTITY, first_name varchar(255) not null, last_name varchar(255) not null ); insert into PERSON (first_name, last_name) values ('Dave', 'Syer');</code> </pre> <br><p> ä¸€åˆ‡éƒ½å®Œç¾åœ°è¯´æ˜äº†ä¸€åˆ‡ï¼šæ‚¨å¯ä»¥ä½¿ç”¨SQLæ¥ç¡®å®šåº”å¦‚ä½•ä¿®æ”¹æ•°æ®åº“ã€‚ æœ‰å…³Spring Bootå’ŒFlywayçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a href="https://docs.spring.io/spring-boot/docs/1.3.5.RELEASE/reference/html/howto-database-initialization.html">Spring Boot Docs</a> ã€‚ </p><br><p> å°†ç‰ˆæœ¬æ§åˆ¶ä¸Spring Bootç»“åˆä½¿ç”¨å¯ä¸ºæ‚¨å¸¦æ¥2å¤§å¥½å¤„ï¼š </p><br><ul><li> æ‚¨å°†æ•°æ®åº“æ›´æ”¹ä¸ä»£ç æ›´æ”¹åˆ†å¼€ </li><li> æ•°æ®åº“è¿ç§»ä¸åº”ç”¨ç¨‹åºçš„æ¨å‡ºåŒæ—¶å‘ç”Ÿï¼Œå³ æ‚¨çš„éƒ¨ç½²è¿‡ç¨‹å¾—ä»¥ç®€åŒ– </li></ul><br><h2 id="reshenie-problem-s-bazoy-dannyh"> è§£å†³æ•°æ®åº“é—®é¢˜ </h2><br><p> åœ¨æœ¬æ–‡çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è€ƒè™‘ä¸¤ç§æ•°æ®åº“æ›´æ”¹æ–¹æ³•ã€‚ </p><br><ul><li> å‘åä¸å…¼å®¹ </li><li> å‘åå…¼å®¹ </li></ul><br><p> å‰è€…å°†è¢«è§†ä¸ºè­¦å‘Šï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œåˆæ­¥å‡†å¤‡ï¼Œåˆ™ä¸åº”æ‰§è¡Œé›¶åœæœºæ—¶é—´éƒ¨ç½²ã€‚ç¬¬äºŒè€…æä¾›äº†æœ‰å…³å¦‚ä½•åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹æ‰§è¡Œéƒ¨ç½²å¹¶åŒæ—¶ä¿æŒå‘åå…¼å®¹æ€§çš„è§£å†³æ–¹æ¡ˆã€‚ </p><br><p> æˆ‘ä»¬å°†è¿›è¡Œçš„é¡¹ç›®å°†æ˜¯ä¸€ä¸ªç®€å•çš„Spring Boot Flywayåº”ç”¨ç¨‹åºï¼Œå…¶ä¸­æ•°æ®åº“ä¸­å­˜åœ¨ä¸€ä¸ªå…·æœ‰<code>first_name</code>å’Œ<code>last_name</code>çš„<code>Person</code> ï¼ˆ <em>å¤§çº¦per .: <code>Person</code>æ˜¯ä¸€ä¸ªè¡¨ï¼Œè€Œ<code>irst_name</code>å’Œ<code>last_name</code>æ˜¯å…¶ä¸­çš„å­—æ®µ</em> ï¼‰ã€‚ æˆ‘ä»¬æƒ³å°†<code>last_name</code>é‡å‘½åä¸º<code>surname</code> ã€‚ </p><br><h3 id="dopuscheniya"> å‡è®¾æ¡ä»¶ </h3><br><p> åœ¨æ·±å…¥ç ”ç©¶ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¦‚è¿°ä¸€äº›å…³äºåº”ç”¨ç¨‹åºçš„å‡è®¾ã€‚ æˆ‘ä»¬è¦å®ç°çš„ä¸»è¦ç»“æœå°†æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„è¿‡ç¨‹ã€‚ </p><br><blockquote>  <strong>æ³¨æ„äº‹é¡¹</strong> å•†ä¸šä¸“ä¸šæç¤ºã€‚ ç®€åŒ–æµç¨‹å¯ä»¥ä¸ºæ‚¨èŠ‚çœå¤§é‡æ”¯æŒè´¹ç”¨ï¼ˆåœ¨å…¬å¸å·¥ä½œçš„äººè¶Šå¤šï¼Œæ‚¨å¯ä»¥èŠ‚çœçš„é’±å°±æ›´å¤šï¼‰ï¼ </blockquote><br><h3 id="ne-nado-delat-otkat-bazy-dannyh"> æ— éœ€å›æ»šæ•°æ®åº“ </h3><br><p> è¿™ç®€åŒ–äº†éƒ¨ç½²è¿‡ç¨‹ï¼ˆå‡ ä¹ä¸å¯èƒ½è¿›è¡Œæ•°æ®åº“çš„æŸäº›å›æ»šï¼Œä¾‹å¦‚å›æ»šåˆ é™¤ï¼‰ã€‚ æˆ‘ä»¬åªå–œæ¬¢å›æ»šåº”ç”¨ç¨‹åºã€‚ è¿™æ ·ï¼Œå³ä½¿æ‚¨å…·æœ‰ä¸åŒçš„æ•°æ®åº“ï¼ˆä¾‹å¦‚SQLå’ŒNoSQLï¼‰ï¼Œæ‚¨çš„éƒ¨ç½²ç®¡é“ä¹Ÿå°†çœ‹èµ·æ¥ç›¸åŒã€‚ </p><br><p>  <strong>å¿…é¡»å§‹ç»ˆå¯ä»¥å°†åº”ç”¨ç¨‹åºå›æ»šä¸€ä¸ªç‰ˆæœ¬ï¼ˆä¸å†ï¼‰</strong> </p><br><p> ä»…åœ¨å¿…è¦æ—¶æ‰è¿›è¡Œå›æ»šã€‚ å¦‚æœå½“å‰ç‰ˆæœ¬ä¸­å­˜åœ¨ä¸€ä¸ªä¸å®¹æ˜“ä¿®å¤çš„é”™è¯¯ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿè¿”å›æœ€æ–°çš„å·¥ä½œç‰ˆæœ¬ã€‚ æˆ‘ä»¬å‡å®šæ­¤æœ€æ–°çš„å·¥ä½œç‰ˆæœ¬ä¸ºå…ˆå‰çš„ç‰ˆæœ¬ã€‚ ç»´æŒå¤šä¸ªå‘è¡Œç‰ˆçš„ä»£ç å’Œæ•°æ®åº“å…¼å®¹æ€§éå¸¸å›°éš¾ä¸”æˆæœ¬å¾ˆé«˜ã€‚ </p><br><blockquote>  <strong>æ³¨æ„äº‹é¡¹</strong> ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œåœ¨æœ¬æ–‡çš„æ¡†æ¶å†…ï¼Œæˆ‘ä»¬å°†æ›´æ”¹åº”ç”¨ç¨‹åºçš„ä¸»è¦ç‰ˆæœ¬ã€‚ </blockquote><br><h3 id="shag-1-ishodnoe-sostoyanie"> æ­¥éª¤1ï¼šåˆå§‹çŠ¶æ€ </h3><br><p> åº”ç”¨ç‰ˆæœ¬ï¼š <code>1.0.0</code> <br> æ•°æ®åº“ç‰ˆæœ¬ï¼š <code>v1</code> </p><br><h3 id="kommentariy"> è¯„æ³¨ </h3><br><p> è¿™å°†æ˜¯åº”ç”¨ç¨‹åºçš„åˆå§‹çŠ¶æ€ã€‚ </p><br><h3 id="izmeneniya-bd"> æ•°æ®åº“æ›´æ”¹ </h3><br><p> è¯¥æ•°æ®åº“åŒ…å«<code>last_name.</code> </p><br><pre> <code class="plaintext hljs">CREATE TABLE PERSON ( id BIGINT GENERATED BY DEFAULT AS IDENTITY, first_name varchar(255) not null, last_name varchar(255) not null ); insert into PERSON (first_name, last_name) values ('Dave', 'Syer');</code> </pre> <br><h3 id="izmeneniya-koda"> ä»£ç å˜æ›´ </h3><br><p> è¯¥åº”ç”¨ç¨‹åºå°†Personæ•°æ®ä¿å­˜åˆ°<code>last_name</code> ï¼š </p><br><pre> <code class="plaintext hljs">/* * Copyright 2012-2016 the original author or authors. * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ package sample.flyway; import javax.persistence.Entity; import javax.persistence.GeneratedValue; import javax.persistence.Id; @Entity public class Person { @Id @GeneratedValue private Long id; private String firstName; private String lastName; public String getFirstName() { return this.firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getLastName() { return this.lastName; } public void setLastName(String lastname) { this.lastName = lastname; } @Override public String toString() { return "Person [firstName=" + this.firstName + ", lastName=" + this.lastName + "]"; } }</code> </pre> <br><h3 id="obratno-nesovmestimoe-pereimenovanie-stolbca"> ä¸å…¼å®¹çš„åˆ—é‡å‘½å </h3><br><p> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•æ›´æ”¹åˆ—åçš„ç¤ºä¾‹ï¼š </p><br><blockquote>  <strong>æ³¨æ„äº‹é¡¹</strong> ä»¥ä¸‹ç¤ºä¾‹å°†æœ‰æ„ä¸­æ–­ã€‚ ä¸ºäº†è¯´æ˜æ•°æ®åº“å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬å±•ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ </blockquote><p> åº”ç”¨ç¨‹åºç‰ˆæœ¬ï¼š <code>2.0.0.BAD</code> </p><br><p> æ•°æ®åº“ç‰ˆæœ¬ï¼š <code>v2bad</code> </p><br><h3 id="kommentariy-1"> è¯„æ³¨ </h3><br><p> å½“å‰çš„æ›´æ”¹ä¸å…è®¸æˆ‘ä»¬åŒæ—¶è¿è¡Œä¸¤ä¸ªå®ä¾‹ï¼ˆæ—§å®ä¾‹å’Œæ–°å®ä¾‹ï¼‰ã€‚ å› æ­¤ï¼Œå°†å¾ˆéš¾å®ç°é›¶åœæœºæ—¶é—´éƒ¨ç½²ï¼ˆè€ƒè™‘åˆ°å‡è®¾ï¼Œè¿™å®é™…ä¸Šæ˜¯ä¸å¯èƒ½çš„ï¼‰ã€‚ </p><br><h3 id="ab-testirovanie">  A / Bæµ‹è¯• </h3><br><p> å½“å‰çš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåœ¨prodä¸­éƒ¨ç½²çš„åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>1.0.0,</code>å’Œä¸€ä¸ªæ•°æ®åº“<code>v1</code> ã€‚ æˆ‘ä»¬å¿…é¡»éƒ¨ç½²åº”ç”¨ç¨‹åºçš„ç¬¬äºŒä¸ªå®ä¾‹<code>2.0.0.BAD</code>ç‰ˆæœ¬ï¼Œå¹¶å°†æ•°æ®åº“å‡çº§åˆ°<code>v2bad</code> ã€‚ </p><br><p> æ­¥éª¤ï¼š </p><br><ol><li> éƒ¨ç½²äº†åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>2.0.0.BAD</code>çš„æ–°å®ä¾‹ï¼Œè¯¥å®ä¾‹å°†æ•°æ®åº“æ›´æ–°ä¸º<code>v2bad</code> </li><li>  <code>v2bad</code>æ•°æ®åº“ä¸­çš„<code>last_name</code>åˆ—ä¸å†å­˜åœ¨-æ›´æ”¹ä¸º<code>surname</code> </li><li> æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºæ›´æ–°æˆåŠŸï¼Œå¹¶ä¸”æŸäº›å®ä¾‹åœ¨<code>1.0.0</code>å·¥ä½œï¼Œå…¶ä»–å®ä¾‹åœ¨<code>2.0.0.BAD</code> ã€‚ æ‰€æœ‰ä¸<code>v2bad</code>ç›¸å…³çš„ </li><li> ç‰ˆæœ¬<code>1.0.0</code>æ‰€æœ‰å®ä¾‹å°†å¼€å§‹å¼•å‘é”™è¯¯ï¼Œå› ä¸ºå®ƒä»¬å°†å°è¯•å°†æ•°æ®æ’å…¥åˆ°<code>last_name</code>åˆ—ä¸­ï¼Œè¯¥åˆ—ä¸å† </li><li> ç‰ˆæœ¬<code>2.0.0.BAD</code>æ‰€æœ‰å®ä¾‹<code>2.0.0.BAD</code>æ­£å¸¸ä½¿ç”¨ </li></ol><br><p> å¦‚æ‚¨æ‰€è§ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºè¿›è¡Œå‘åä¸å…¼å®¹çš„æ›´æ”¹ï¼Œåˆ™æ— æ³•è¿›è¡ŒA / Bæµ‹è¯•ã€‚ </p><br><h3 id="otkat-prilozheniya"> å›æ»šåº”ç”¨ </h3><br><p> å‡è®¾åœ¨å°è¯•æ‰§è¡ŒA / Béƒ¨ç½²ï¼ˆ <em>å¤§çº¦Translã€‚:ï¼šä½œè€…å¯èƒ½æ˜¯åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯A / Bæµ‹è¯•</em> ï¼‰ä¹‹åï¼Œæˆ‘ä»¬å†³å®šéœ€è¦å°†åº”ç”¨ç¨‹åºå›æ»šåˆ°<code>1.0.0.</code>ç‰ˆ<code>1.0.0.</code> å‡è®¾æˆ‘ä»¬ä¸æƒ³å›æ»šæ•°æ®åº“ã€‚ </p><br><p> æ­¥éª¤ï¼š </p><br><ol><li> æˆ‘ä»¬åœæ­¢äº†åº”ç”¨ç¨‹åºå®ä¾‹ç‰ˆæœ¬<code>2.0.0.BAD</code> </li><li> æ•°æ®åº“ä»ç„¶æ˜¯<code>v2bad</code> </li><li> ç”±äº<code>1.0.0</code>ç‰ˆä¸äº†è§£ä»€ä¹ˆæ˜¯<code>surname</code> ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°é”™è¯¯ </li><li> åœ°ç‹±æŒ£è„±äº†æˆ‘ä»¬ä¸èƒ½å†å›æ¥ </li></ol><br><p> å¦‚æ‚¨æ‰€è§ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºè¿›è¡Œå‘åä¸å…¼å®¹çš„æ›´æ”¹ï¼Œåˆ™æ— æ³•å›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬ã€‚ </p><br><h3 id="logi-ispolneniya-skripta"> è„šæœ¬æ‰§è¡Œæ—¥å¿— </h3><br><pre> <code class="plaintext hljs">Backward incompatible scenario: 01) Run 1.0.0 02) Wait for the app (1.0.0) to boot 03) Generate a person by calling POST localhost:9991/person to version 1.0.0 04) Run 2.0.0.BAD 05) Wait for the app (2.0.0.BAD) to boot 06) Generate a person by calling POST localhost:9991/person to version 1.0.0 &lt;-- this should fail 07) Generate a person by calling POST localhost:9992/person to version 2.0.0.BAD &lt;-- this should pass Starting app in version 1.0.0 Generate a person in version 1.0.0 Sending a post to 127.0.0.1:9991/person. This is the response: {"firstName":"b73f639f-e176-4463-bf26-1135aace2f57","lastName":"b73f639f-e176-4463-bf26-1135aace2f57"} Starting app in version 2.0.0.BAD Generate a person in version 1.0.0 Sending a post to 127.0.0.1:9991/person. This is the response: curl: (22) The requested URL returned error: 500 Internal Server Error Generate a person in version 2.0.0.BAD Sending a post to 127.0.0.1:9995/person. This is the response: {"firstName":"e156be2e-06b6-4730-9c43-6e14cfcda125","surname":"e156be2e-06b6-4730-9c43-6e14cfcda125"}</code> </pre> <br><h3 id="izmeneniya-bd-1"> æ•°æ®åº“æ›´æ”¹ </h3><br><p> å°†<code>last_name</code>é‡å‘½åä¸º<code>surname</code>è¿ç§»è„šæœ¬ </p><br><p> æºFlywayè„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">CREATE TABLE PERSON ( id BIGINT GENERATED BY DEFAULT AS IDENTITY, first_name varchar(255) not null, last_name varchar(255) not null ); insert into PERSON (first_name, last_name) values ('Dave', 'Syer');</code> </pre> <br><p> é‡å‘½å<code>last_name</code>çš„è„šæœ¬ã€‚ </p><br><pre> <code class="plaintext hljs">-- This change is backward incompatible - you can't do A/B testing ALTER TABLE PERSON CHANGE last_name surname VARCHAR;</code> </pre> <br><h3 id="izmeneniya-koda-1"> ä»£ç å˜æ›´ </h3><br><p> æˆ‘ä»¬å°†<code>lastName</code>å­—æ®µåç§°æ›´æ”¹ä¸º<code>surname</code> ã€‚ </p><br><h3 id="pereimenovanie-stolbca-obratno-sovmestimym-sposobom"> ä»¥å‘åå…¼å®¹çš„æ–¹å¼é‡å‘½ååˆ— </h3><br><p> è¿™æ˜¯æˆ‘ä»¬å¯èƒ½é‡åˆ°çš„æœ€å¸¸è§çš„æƒ…å†µã€‚ æˆ‘ä»¬éœ€è¦è¿›è¡Œå‘åä¸å…¼å®¹çš„æ›´æ”¹ã€‚ æˆ‘ä»¬å·²ç»è¯æ˜ï¼Œå¯¹äºæ²¡æœ‰åœæœºçš„éƒ¨ç½²ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åªæ˜¯åœ¨æ²¡æœ‰å…¶ä»–æ“ä½œçš„æƒ…å†µä¸‹åº”ç”¨æ•°æ®åº“è¿ç§»ã€‚ åœ¨æœ¬æ–‡çš„è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œ3ä¸ªéƒ¨ç½²ä»¥åŠæ•°æ®åº“è¿ç§»ï¼Œä»¥å®ç°æ‰€éœ€çš„ç»“æœå¹¶åŒæ—¶ä¿æŒå‘åå…¼å®¹æ€§ã€‚ </p><br><blockquote>  <strong>æ³¨æ„äº‹é¡¹</strong> å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®åº“ç‰ˆæœ¬<code>v1</code> ã€‚ å®ƒåŒ…å«åˆ—<code>first_name</code>å’Œ<code>last_name</code> ã€‚ æˆ‘ä»¬å¿…é¡»å°†<code>last_name</code>æ›´æ”¹ä¸º<code>surname</code> ã€‚ æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªç‰ˆæœ¬<code>1.0.0,</code>çš„åº”ç”¨ç¨‹åºï¼Œå°šæœªä½¿ç”¨<code>surname</code> ã€‚ </blockquote><br><h3 id="shag-2-dobavlyaem-surname"> æ­¥éª¤2ï¼šæ·»åŠ å§“ </h3><br><p> åº”ç”¨ç‰ˆæœ¬ï¼š <code>2.0.0</code> <br> æ•°æ®åº“ç‰ˆæœ¬ï¼š <code>v2</code> </p><br><h3 id="kommentariy-2"> è¯„æ³¨ </h3><br><p> é€šè¿‡æ·»åŠ æ–°åˆ—å¹¶å¤åˆ¶å…¶å†…å®¹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å‘åå…¼å®¹çš„æ•°æ®åº“æ›´æ”¹ã€‚ åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬å›æ»šJARæˆ–æ‹¥æœ‰å¯ç”¨çš„æ—§JARï¼Œåˆ™å®ƒåœ¨è¿è¡Œæ—¶ä¸ä¼šä¸­æ–­ã€‚ </p><br><h3 id="vykatyvaem-novuyu-versiyu"> æˆ‘ä»¬æ¨å‡ºæ–°ç‰ˆæœ¬ </h3><br><p> æ­¥éª¤ï¼š </p><br><ol><li> è¿ç§»æ•°æ®åº“ä»¥åˆ›å»ºæ–°çš„<code>surname</code>åˆ—ã€‚ ç°åœ¨æ‚¨çš„æ•°æ®åº“ç‰ˆæœ¬<code>v2</code> </li><li> å°†æ•°æ®ä»<code>last_name</code>å¤åˆ¶åˆ°<code>surname</code> ã€‚  <strong>è¯·æ³¨æ„</strong> ï¼Œå¦‚æœæ‚¨æœ‰å¤§é‡æ­¤ç±»æ•°æ®ï¼Œåˆ™åº”è€ƒè™‘æ‰¹é‡è¿ç§»ï¼ </li><li> ç¼–å†™åŒæ—¶ä½¿ç”¨<strong>æ–°</strong>åˆ—å’Œ<strong>æ—§</strong>åˆ—çš„ä»£ç ã€‚ ç°åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºç‰ˆæœ¬ä¸º<code>2.0.0</code> </li><li> å¦‚æœè¯¥å€¼ä¸ä¸º<code>null</code> ï¼Œåˆ™ä»<code>surname</code>åˆ—ä¸­è¯»å–è¯¥å€¼ï¼›å¦‚æœæœªæŒ‡å®š<code>surname</code> ï¼Œåˆ™ä»l <code>ast_name</code> ã€‚ æ‚¨å¯ä»¥ä»ä»£ç ä¸­åˆ é™¤<code>getLastName()</code> ï¼Œå› ä¸ºå½“æ‚¨å°†åº”ç”¨ç¨‹åºä»<code>3.0.0</code>å›æ»šåˆ°<code>2.0.0</code>æ—¶ï¼Œå®ƒå°†è¿”å›<code>null</code> ã€‚ </li></ol><br><p> å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Spring Boot Flywayï¼Œåˆ™å°†åœ¨å¯åŠ¨åº”ç”¨ç¨‹åº<code>2.0.0</code>ç‰ˆæ—¶æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤ã€‚ å¦‚æœæ‰‹åŠ¨è¿è¡Œæ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œåˆ™å¿…é¡»ä¸ºæ­¤æ‰§è¡Œä¸¤é¡¹ä¸åŒçš„æ“ä½œï¼ˆé¦–å…ˆæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ç‰ˆæœ¬ï¼Œç„¶åéƒ¨ç½²æ–°çš„åº”ç”¨ç¨‹åºï¼‰ã€‚ </p><br><blockquote>  <strong>è¿™å¾ˆé‡è¦ã€‚</strong> è¯·è®°ä½ï¼Œæ–°åˆ›å»ºçš„åˆ—<strong>ä¸€å®š</strong> <strong>ä¸èƒ½</strong>ä¸º<strong>NOT NULL</strong> ã€‚ å¦‚æœå›æ»šï¼Œæ—§åº”ç”¨ç¨‹åºå°†ä¸çŸ¥é“æ–°åˆ—ï¼Œå¹¶ä¸”åœ¨<code>Insert.</code>è¿‡ç¨‹ä¸­å°†ä¸ä¼šå®‰è£…æ–°åˆ—<code>Insert.</code> ä½†æ˜¯ï¼Œå¦‚æœæ·»åŠ æ­¤é™åˆ¶ï¼Œå¹¶ä¸”æ•°æ®åº“å°†æ˜¯<code>v2</code> ï¼Œåˆ™éœ€è¦è®¾ç½®æ–°åˆ—çš„å€¼ã€‚ è¿™å°†å¯¼è‡´è¿åé™åˆ¶ã€‚ <br><br>  <strong>è¿™å¾ˆé‡è¦ã€‚</strong> æ‚¨åº”è¯¥åˆ é™¤<code>getLastName()</code>æ–¹æ³•ï¼Œå› ä¸ºç‰ˆæœ¬<code>3.0.0</code>åœ¨ä»£ç <code>getLastName()</code>æ²¡æœ‰<code>last_name</code>åˆ—çš„æ¦‚å¿µã€‚ è¿™æ„å‘³ç€å°†åœ¨æ­¤å¤„è®¾ç½®nullã€‚ æ‚¨å¯ä»¥ä¿ç•™è¯¥æ–¹æ³•å¹¶æ·»åŠ <code>null</code>æ£€æŸ¥ï¼Œä½†æ˜¯æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¡®ä¿åœ¨<code>getSurname()</code>é€»è¾‘ä¸­é€‰æ‹©äº†æ­£ç¡®çš„éé›¶å€¼ã€‚ </blockquote><br><h3 id="ab-testirovanie-1">  A / Bæµ‹è¯• </h3><br><p> å½“å‰çš„æƒ…å†µæ˜¯æˆ‘ä»¬åœ¨prodä¸Šéƒ¨ç½²äº†åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>1.0.0</code> ï¼Œåœ¨<code>v1</code>éƒ¨ç½²äº†æ•°æ®åº“ã€‚ æˆ‘ä»¬éœ€è¦éƒ¨ç½²åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>2.0.0</code>çš„ç¬¬äºŒä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹ä¼šå°†æ•°æ®åº“å‡çº§åˆ°<code>v2</code> ã€‚ </p><br><p> æ­¥éª¤ï¼š </p><br><ol><li> éƒ¨ç½²äº†åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>2.0.0</code>çš„æ–°å®ä¾‹ï¼Œè¯¥å®ä¾‹å°†æ•°æ®åº“æ›´æ–°ä¸º<code>v2</code> </li><li> åŒæ—¶ï¼Œä¸€äº›è¯·æ±‚ç”±ç‰ˆæœ¬<code>1.0.0</code>çš„å®ä¾‹å¤„ç† </li><li> æ›´æ–°æˆåŠŸï¼Œå¹¶ä¸”æ‚¨æ‹¥æœ‰åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>1.0.0</code>å’Œå…¶ä½™ç‰ˆæœ¬<code>2.0.0.</code>å¤šä¸ªå·¥ä½œå®ä¾‹<code>2.0.0.</code> æ¯ä¸ªäººéƒ½åœ¨<code>v2</code>ä¸æ•°æ®åº“é€šä¿¡ </li><li>  <code>1.0.0</code>ç‰ˆä¸ä½¿ç”¨æ•°æ®åº“ä¸­çš„å§“åˆ—ï¼Œä½†<code>2.0.0</code>ç‰ˆä½¿ç”¨ã€‚ å®ƒä»¬ä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œå¹¶ä¸”åº”è¯¥æ²¡æœ‰é”™è¯¯ã€‚ </li><li>  <code>2.0.0</code>ç‰ˆå°†æ•°æ®å­˜å‚¨åœ¨æ—§åˆ—å’Œæ–°åˆ—ä¸­ï¼Œè¿™æä¾›äº†å‘åå…¼å®¹æ€§ </li></ol><br><blockquote>  <strong>è¿™å¾ˆé‡è¦ã€‚</strong> å¦‚æœæ‚¨æœ‰ä»»ä½•æŸ¥è¯¢æ ¹æ®æ—§/æ–°åˆ—ä¸­çš„å€¼å¯¹é¡¹ç›®è¿›è¡Œè®¡æ•°ï¼Œåˆ™åº”è®°ä½ï¼Œç°åœ¨æ‚¨æœ‰é‡å¤çš„å€¼ï¼ˆå¾ˆå¯èƒ½å®ƒä»¬ä»åœ¨è¿ç§»ï¼‰ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è¦è®¡ç®—å§“æ°ï¼ˆæ— è®ºåˆ—åå¦‚ä½•ï¼‰ä»¥å­—æ¯<code>A</code>å¼€å¤´<code>A</code> ï¼Œåˆ™åœ¨æ•°æ®è¿ç§»ï¼ˆ <code>old</code> â†’ <code>new</code>åˆ—ï¼‰å®Œæˆä¹‹å‰ï¼Œå¦‚æœåœ¨æ–°åˆ—ä¸Šæ‰§è¡ŒæŸ¥è¯¢ï¼Œåˆ™æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚ </blockquote><br><h3 id="otkat-prilozheniya-1"> å›æ»šåº”ç”¨ </h3><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºç‰ˆæœ¬<code>2.0.0</code>å’Œä¸€ä¸ª<code>v2</code>çš„æ•°æ®åº“ã€‚ </p><br><p> æ­¥éª¤ï¼š </p><br><ol><li> å°†æ‚¨çš„åº”ç”¨ç¨‹åºå›æ»šåˆ°<code>1.0.0</code>ç‰ˆæœ¬ã€‚ </li><li>  <code>1.0.0</code>ç‰ˆä¸ä½¿ç”¨æ•°æ®åº“ä¸­çš„<code>surname</code>åˆ—ï¼Œå› æ­¤å›æ»šå¿…é¡»æˆåŠŸ </li></ol><br><h3 id="izmeneniya-db"> æ•°æ®åº“æ›´æ”¹ </h3><br><p> è¯¥æ•°æ®åº“åŒ…å«ä¸€ä¸ªåä¸º<code>last_name</code>çš„åˆ—ã€‚ </p><br><p> æºFlywayè„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">CREATE TABLE PERSON ( id BIGINT GENERATED BY DEFAULT AS IDENTITY, first_name varchar(255) not null, last_name varchar(255) not null ); insert into PERSON (first_name, last_name) values ('Dave', 'Syer');</code> </pre> <br><p> ç”¨äºæ·»åŠ <code>surname</code>çš„è„šæœ¬ã€‚ </p><br><blockquote>  <strong>æ³¨æ„äº‹é¡¹</strong> è¯·è®°ä½ï¼Œæ‚¨ä¸èƒ½å°†ä»»ä½•NOT NULLçº¦æŸæ·»åŠ åˆ°æ·»åŠ çš„åˆ—ã€‚ å¦‚æœå›æ»šJARï¼Œåˆ™æ—§ç‰ˆæœ¬å¯¹æ·»åŠ çš„åˆ—ä¸€æ— æ‰€çŸ¥ï¼Œå¹¶å°†è‡ªåŠ¨å°†å…¶è®¾ç½®ä¸ºNULLã€‚ å¦‚æœæœ‰è¿™æ ·çš„é™åˆ¶ï¼Œæ—§çš„åº”ç”¨ç¨‹åºå°†è¢«ç ´åã€‚ </blockquote><br><pre> <code class="plaintext hljs">-- NOTE: This field can't have the NOT NULL constraint cause if you rollback, the old version won't know about this field -- and will always set it to NULL ALTER TABLE PERSON ADD surname varchar(255); -- WE'RE ASSUMING THAT IT'S A FAST MIGRATION - OTHERWISE WE WOULD HAVE TO MIGRATE IN BATCHES UPDATE PERSON SET PERSON.surname = PERSON.last_name</code> </pre> <br><h3 id="izmeneniya-koda-2"> ä»£ç å˜æ›´ </h3><br><p> æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨<code>last_name</code>å’Œ<code>surname</code> ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä»<code>last_name</code>è¯»å–å†…å®¹ï¼Œå› ä¸ºæ­¤åˆ—æœ€ç›¸å…³ã€‚ åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼ŒæŸäº›è¯·æ±‚å¯èƒ½å·²ç”±å°šæœªæ›´æ–°çš„åº”ç”¨ç¨‹åºå®ä¾‹å¤„ç†ã€‚ </p><br><pre> <code class="plaintext hljs">/* * Copyright 2012-2016 the original author or authors. * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ package sample.flyway; import javax.persistence.Entity; import javax.persistence.GeneratedValue; import javax.persistence.Id; @Entity public class Person { @Id @GeneratedValue private Long id; private String firstName; private String lastName; private String surname; public String getFirstName() { return this.firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } /** * Reading from the new column if it's set. If not the from the old one. * * When migrating from version 1.0.0 -&gt; 2.0.0 this can lead to a possibility that some data in * the surname column is not up to date (during the migration process lastName could have been updated). * In this case one can run yet another migration script after all applications have been deployed in the * new version to ensure that the surname field is updated. * * However it makes sense since when looking at the migration from 2.0.0 -&gt; 3.0.0. In 3.0.0 we no longer * have a notion of lastName at all - so we don't update that column. If we rollback from 3.0.0 -&gt; 2.0.0 if we * would be reading from lastName, then we would have very old data (since not a single datum was inserted * to lastName in version 3.0.0). */ public String getSurname() { return this.surname != null ? this.surname : this.lastName; } /** * Storing both FIRST_NAME and SURNAME entries */ public void setSurname(String surname) { this.lastName = surname; this.surname = surname; } @Override public String toString() { return "Person [firstName=" + this.firstName + ", lastName=" + this.lastName + ", surname=" + this.surname + "]"; } }</code> </pre> <br><h3 id="shag-3-udalenie-last_name-iz-koda"> æ­¥éª¤3ï¼šä»ä»£ç ä¸­åˆ é™¤last_name </h3><br><p> åº”ç”¨ç‰ˆæœ¬ï¼š <code>3.0.0</code> </p><br><p> æ•°æ®åº“ç‰ˆæœ¬ï¼š <code>v3</code> </p><br><h3 id="kommentariy-3"> è¯„æ³¨ </h3><br><p>  <em>æ³¨æ„äº‹é¡¹</em>  <em>trans .ï¼šæ˜¾ç„¶ï¼Œä½œè€…é”™è¯¯åœ°å¤åˆ¶äº†åŸå§‹æ–‡ç« ä¸­ç¬¬2æ­¥ä¸­çš„è¯¥å—çš„æ–‡æœ¬ï¼Œåœ¨æ­¤æ­¥éª¤ä¸­ï¼Œåº”å¯¹åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œæ›´æ”¹ï¼Œä»¥åˆ é™¤ä½¿ç”¨<code>last_name</code>åˆ—çš„åŠŸèƒ½ã€‚</em> </p><br><p> é€šè¿‡æ·»åŠ æ–°åˆ—å¹¶å¤åˆ¶å…¶å†…å®¹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å‘åå…¼å®¹çš„æ•°æ®åº“æ›´æ”¹ã€‚ å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬å›æ»šJARæˆ–æœ‰å¯ç”¨çš„æ—§JARï¼Œåˆ™å®ƒåœ¨è¿è¡Œæ—¶ä¸ä¼šä¸­æ–­ã€‚ </p><br><h3 id="otkat-prilozheniya-2"> å›æ»šåº”ç”¨ </h3><br><p> æˆ‘ä»¬ç›®å‰æœ‰<code>3.0.0</code>ç‰ˆçš„åº”ç”¨ç¨‹åºå’Œ<code>v3</code>æ•°æ®åº“ã€‚ ç‰ˆæœ¬<code>3.0.0</code>ä¸ä¼šå°†æ•°æ®ä¿å­˜åœ¨<code>last_name</code> ã€‚ è¿™æ„å‘³ç€<code>surname</code>å°†å­˜å‚¨æœ€æ–°ä¿¡æ¯ã€‚ </p><br><p> æ­¥éª¤ï¼š </p><br><ol><li> å°†æ‚¨çš„åº”ç”¨ç¨‹åºå›æ»šåˆ°<code>2.0.0</code>ç‰ˆæœ¬ã€‚ </li><li>  <code>2.0.0</code>ç‰ˆåŒæ—¶ä½¿ç”¨<code>last_name</code>å’Œ<code>surname</code> ã€‚ </li><li> å¦‚æœç‰ˆæœ¬<code>2.0.0</code>ä¸ä¸ºnullï¼Œåˆ™å®ƒå°†ä½¿ç”¨<code>surname</code> ï¼Œå¦åˆ™ä¸º<code>last_name</code> </li></ol><br><h3 id="izmeneniya-bd-2"> æ•°æ®åº“æ›´æ”¹ </h3><br><p> æ•°æ®åº“ä¸­æ²¡æœ‰ç»“æ„ä¸Šçš„æ›´æ”¹ã€‚ æ‰§è¡Œä»¥ä¸‹è„šæœ¬ï¼Œè¯¥è„šæœ¬æ‰§è¡Œæ—§æ•°æ®çš„æœ€ç»ˆè¿ç§»ï¼š </p><br><pre> <code class="plaintext hljs">-- WE'RE ASSUMING THAT IT'S A FAST MIGRATION - OTHERWISE WE WOULD HAVE TO MIGRATE IN BATCHES -- ALSO WE'RE NOT CHECKING IF WE'RE NOT OVERRIDING EXISTING ENTRIES. WE WOULD HAVE TO COMPARE -- ENTRY VERSIONS TO ENSURE THAT IF THERE IS ALREADY AN ENTRY WITH A HIGHER VERSION NUMBER -- WE WILL NOT OVERRIDE IT. UPDATE PERSON SET PERSON.surname = PERSON.last_name; -- DROPPING THE NOT NULL CONSTRAINT; OTHERWISE YOU WILL TRY TO INSERT NULL VALUE OF THE LAST_NAME -- WITH A NOT_NULL CONSTRAINT. ALTER TABLE PERSON MODIFY COLUMN last_name varchar(255) NULL DEFAULT NULL;</code> </pre> <br><h3 id="izmeneniya-koda-3"> ä»£ç å˜æ›´ </h3><br><p>  <em>æ³¨æ„äº‹é¡¹</em>  <em>trans .ï¼šä½œè€…åœ¨ç¬¬2æ­¥ä¸­ä¹Ÿé”™è¯¯åœ°å¤åˆ¶äº†æ­¤å—çš„æè¿°ã€‚æ ¹æ®æ–‡ç« æ•…äº‹çš„é€»è¾‘ï¼Œæ­¤æ­¥éª¤ä¸­çš„ä»£ç æ›´æ”¹åº”æ—¨åœ¨ä»ä¸­åˆ é™¤ä¸<code>last_name</code>åˆ—ä¸€èµ·ä½¿ç”¨çš„å…ƒç´ ã€‚</em> </p><br><p> æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨<code>last_name</code>å’Œ<code>surname.</code> å¦å¤–ï¼Œæˆ‘ä»¬ä»åˆ—<code>last_name</code>è¯»å–å†…å®¹ï¼Œå› ä¸ºå®ƒæœ€ç›¸å…³ã€‚ åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼ŒæŸäº›è¯·æ±‚å¯èƒ½ç”±å°šæœªæ›´æ–°çš„å®ä¾‹å¤„ç†ã€‚ </p><br><pre> <code class="plaintext hljs">/* * Copyright 2012-2016 the original author or authors. * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ package sample.flyway; import javax.persistence.Entity; import javax.persistence.GeneratedValue; import javax.persistence.Id; @Entity public class Person { @Id @GeneratedValue private Long id; private String firstName; private String surname; public String getFirstName() { return this.firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getSurname() { return this.surname; } public void setSurname(String lastname) { this.surname = lastname; } @Override public String toString() { return "Person [firstName=" + this.firstName + ", surname=" + this.surname + "]"; } }</code> </pre> <br><h3 id="shag-4-udalenie-last_name-iz-bd"> æ­¥éª¤4ï¼šä»æ•°æ®åº“ä¸­åˆ é™¤last_name </h3><br><p> åº”ç”¨ç‰ˆæœ¬ï¼š <code>4.0.0</code> </p><br><p> æ•°æ®åº“ç‰ˆæœ¬ï¼š <code>v4</code> </p><br><h3 id="kommentariy-4"> è¯„æ³¨ </h3><br><p> ç”±äºç‰ˆæœ¬<code>3.0.0</code>ä»£ç æœªä½¿ç”¨<code>last_name</code>åˆ—ï¼Œå› æ­¤ï¼Œå¦‚æœåœ¨ä»æ•°æ®åº“ä¸­åˆ é™¤è¯¥åˆ—åå›æ»šåˆ°<code>3.0.0</code> ï¼Œåˆ™åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿä»»ä½•ä¸è‰¯æƒ…å†µã€‚ </p><br><h3 id="logi-ispolneniya-skripta-1"> è„šæœ¬æ‰§è¡Œæ—¥å¿— </h3><br><pre> <code class="plaintext hljs">We will do it in the following way: 01) Run 1.0.0 02) Wait for the app (1.0.0) to boot 03) Generate a person by calling POST localhost:9991/person to version 1.0.0 04) Run 2.0.0 05) Wait for the app (2.0.0) to boot 06) Generate a person by calling POST localhost:9991/person to version 1.0.0 07) Generate a person by calling POST localhost:9992/person to version 2.0.0 08) Kill app (1.0.0) 09) Run 3.0.0 10) Wait for the app (3.0.0) to boot 11) Generate a person by calling POST localhost:9992/person to version 2.0.0 12) Generate a person by calling POST localhost:9993/person to version 3.0.0 13) Kill app (3.0.0) 14) Run 4.0.0 15) Wait for the app (4.0.0) to boot 16) Generate a person by calling POST localhost:9993/person to version 3.0.0 17) Generate a person by calling POST localhost:9994/person to version 4.0.0 Starting app in version 1.0.0 Generate a person in version 1.0.0 Sending a post to 127.0.0.1:9991/person. This is the response: {"firstName":"52b6e125-4a5c-429b-a47a-ef18bbc639d2","lastName":"52b6e125-4a5c-429b-a47a-ef18bbc639d2"} Starting app in version 2.0.0 Generate a person in version 1.0.0 Sending a post to 127.0.0.1:9991/person. This is the response: {"firstName":"e41ee756-4fa7-4737-b832-e28827a00deb","lastName":"e41ee756-4fa7-4737-b832-e28827a00deb"} Generate a person in version 2.0.0 Sending a post to 127.0.0.1:9992/person. This is the response: {"firstName":"0c1240f5-649a-4bc5-8aa9-cff855f3927f","lastName":"0c1240f5-649a-4bc5-8aa9-cff855f3927f","surname":"0c1240f5-649a-4bc5-8aa9-cff855f3927f"} Killing app 1.0.0 Starting app in version 3.0.0 Generate a person in version 2.0.0 Sending a post to 127.0.0.1:9992/person. This is the response: {"firstName":"74d84a9e-5f44-43b8-907c-148c6d26a71b","lastName":"74d84a9e-5f44-43b8-907c-148c6d26a71b","surname":"74d84a9e-5f44-43b8-907c-148c6d26a71b"} Generate a person in version 3.0.0 Sending a post to 127.0.0.1:9993/person. This is the response: {"firstName":"c6564dbe-9ab5-40ae-9077-8ae6668d5862","surname":"c6564dbe-9ab5-40ae-9077-8ae6668d5862"} Killing app 2.0.0 Starting app in version 4.0.0 Generate a person in version 3.0.0 Sending a post to 127.0.0.1:9993/person. This is the response: {"firstName":"cbe942fc-832e-45e9-a838-0fae25c10a51","surname":"cbe942fc-832e-45e9-a838-0fae25c10a51"} Generate a person in version 4.0.0 Sending a post to 127.0.0.1:9994/person. This is the response: {"firstName":"ff6857ce-9c41-413a-863e-358e2719bf88","surname":"ff6857ce-9c41-413a-863e-358e2719bf88"}</code> </pre> <br><h3 id="izmeneniya-db-1"> æ•°æ®åº“æ›´æ”¹ </h3><br><p> å¯¹äº<code>v3</code>æˆ‘ä»¬åªéœ€åˆ é™¤<code>last_name</code>åˆ—å¹¶æ·»åŠ ç¼ºå°‘çš„çº¦æŸã€‚ </p><br><pre> <code class="plaintext hljs">-- REMOVE THE COLUMN ALTER TABLE PERSON DROP last_name; -- ADD CONSTRAINTS UPDATE PERSON SET surname='' WHERE surname IS NULL; ALTER TABLE PERSON ALTER COLUMN surname VARCHAR NOT NULL;</code> </pre> <br><h3 id="izmeneniya-koda-4"> ä»£ç å˜æ›´ </h3><br><p> ä»£ç æ²¡æœ‰å˜åŒ–ã€‚ </p><br><h3 id="vyvod"> ç»“è®º </h3><br><p> æˆ‘ä»¬é€šè¿‡æ‰§è¡Œå‡ ä¸ªå‘åå…¼å®¹çš„éƒ¨ç½²æˆåŠŸåœ°åº”ç”¨äº†å‘åä¸å…¼å®¹çš„åˆ—åæ›´æ”¹ã€‚ ä»¥ä¸‹æ˜¯æ‰€é‡‡å–æ­¥éª¤çš„æ‘˜è¦ï¼š </p><br><ol><li> å…·æœ‰<code>v1</code>æ•°æ®åº“æ¶æ„çš„åº”ç”¨ç¨‹åºéƒ¨ç½²ç‰ˆæœ¬<code>1.0.0</code> ï¼ˆåˆ—åç§°= <code>last_name</code> ï¼‰ </li><li> éƒ¨ç½²åº”ç”¨ç¨‹åºç‰ˆæœ¬<code>2.0.0,</code>è¯¥ç‰ˆæœ¬å°†æ•°æ®ä¿å­˜åœ¨<code>last_name</code>å’Œ<code>surname</code> ã€‚ åº”ç”¨ç¨‹åºä»<code>last_name</code>è¯»å–ã€‚ è¯¥æ•°æ®åº“çš„ç‰ˆæœ¬ä¸º<code>v2</code> ï¼Œå…¶ä¸­åŒ…å«<code>last_name</code>å’Œ<code>surname. surname</code>çš„åˆ—<code>surname. surname</code>  <code>surname. surname</code>æ˜¯l <code>ast_name</code>çš„å‰¯æœ¬ã€‚ (:       not null) </li><li>    <code>3.0.0</code> ,      <code>surname</code>    surname.   ,     <code>last_name</code>  <code>surname</code> .   <strong>NOT NULL</strong>   <code>last_name</code> .     <code>v3</code> </li><li>    <code>4.0.0</code> â€”      .    <code>v4</code> ,   <code>last_name</code> .         . </li></ol><br><p>   ,        ,      / . </p><br><h3 id="kod"> ä»£å· </h3><br><p>  ,    ,   <a href="https://github.com/spring-cloud-samples/zero-downtime-deployment">Github</a> .   . </p><br><h3 id="proekty">  </h3><br><p>   ,     . </p><br><pre> <code class="plaintext hljs">â”œâ”€â”€ boot-flyway-v1 - 1.0.0 version of the app with v1 of the schema â”œâ”€â”€ boot-flyway-v2 - 2.0.0 version of the app with v2 of the schema (backward-compatible - app can be rolled back) â”œâ”€â”€ boot-flyway-v2-bad - 2.0.0.BAD version of the app with v2bad of the schema (backward-incompatible - app cannot be rolled back) â”œâ”€â”€ boot-flyway-v3 - 3.0.0 version of the app with v3 of the schema (app can be rolled back) â””â”€â”€ boot-flyway-v4 - 4.0.0 version of the app with v4 of the schema (app can be rolled back)</code> </pre> <br><h3 id="skripty">  </h3><br><p>    ,    ,         . </p><br><p>   <strong>    </strong> , : </p><br><pre> <code class="plaintext hljs">./scripts/scenario_backward_compatible.sh</code> </pre> <br><p>    <strong>    </strong> , : </p><br><pre> <code class="plaintext hljs">./scripts/scenario_backward_incompatible.sh</code> </pre> <br><h3 id="spring-boot-sample-flyway"> Spring Boot Sample Flyway </h3><br><p>     <code>Spring Boot Sample Flyway.</code> </p><br><p>     <code>http://localhost:8080/flyway</code> ,   . </p><br><p>        H2 (  <code>http://localhost:8080/h2-console</code> ),        (URL jdbc   â€” <code>jdbc:h2:mem:testdb</code> ). </p><br><h2 id="dopolnitelno"> é€‰é… </h2><br><ul><li> <a href="https://databaserefactoring.com/">Database Refactoring patterns</a> </li><li> <a href="https://martinfowler.com/bliki/ContinuousDelivery.html">Continuous Delivery</a> </li></ul><br><h2 id="takzhe-chitayte-drugie-stati-v-nashem-bloge"> å¦è¯·é˜…è¯»æˆ‘ä»¬åšå®¢ä¸Šçš„å…¶ä»–æ–‡ç« ï¼š </h2><br><ul><li>  <a href="https://habr.com/ru/company/nixys/blog/480072/">Kubernetesï¼šä¸ºä»€ä¹ˆè®¾ç½®ç³»ç»Ÿèµ„æºç®¡ç†å¦‚æ­¤é‡è¦ï¼Ÿ</a> </li><li>  <a href="https://habr.com/ru/company/nixys/blog/481992/">Tektonç®¡é“-KubernetesåŸç”Ÿç®¡é“</a> </li><li>  <a href="https://habr.com/ru/company/nixys/blog/473578/">ä¸ºNginxæ„å»ºåŠ¨æ€æ¨¡å—</a> </li><li>  <a href="https://habr.com/ru/company/nixys/blog/473014/">Hashicorp Consulçš„Kubernetesæˆæƒç®€ä»‹</a> </li><li>  <a href="https://habr.com/ru/company/nixys/blog/468779/">ä»æœªç»æˆæƒçš„ClickHouseè¿ç§»åˆ°å…·æœ‰æˆæƒçš„ClickHouseçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</a> </li><li>  <a href="https://habr.com/ru/company/nixys/blog/470568/">ä½¿ç”¨Nginx Web Serverè¿›è¡ŒSpringåº”ç”¨ç¨‹åºçš„è“ç»¿è‰²éƒ¨ç½²</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481932/">https://habr.com/ru/post/zh-CN481932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481916/index.html">è®°å¾—2019å¹´çš„å‘å±•å¹´æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN481922/index.html">æ–°å¹´IMaskjs 6-React Nativeï¼Œç®¡é“ï¼ŒESM</a></li>
<li><a href="../zh-CN481924/index.html">Apache Sparkï¼Œæƒ°æ€§è¯„ä¼°å’Œå¤šé¡µSQLæŸ¥è¯¢</a></li>
<li><a href="../zh-CN481926/index.html">æ»¡è¶³é€‚ç”¨äºAWSçš„æ–°Veeam Backupè§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="../zh-CN481930/index.html">å‘å±•æ–‡åŒ–ï¼šå¦‚ä½•è¯„ä¼°ç»©æ•ˆå’Œæ•ˆç‡</a></li>
<li><a href="../zh-CN481934/index.html">åˆ†æï¼šç‰¹æ–¯æ‹‰è‚¡ä»·ä¸ºä½•ä¸Šæ¶¨</a></li>
<li><a href="../zh-CN481936/index.html">A / Bæµ‹è¯•çš„ä¼˜ç¼ºç‚¹ï¼šå¤§å…¬å¸çš„ç»éªŒ</a></li>
<li><a href="../zh-CN481940/index.html">åœ¨å‘½ä»¤è¡Œä¸­å¿«é€Ÿæœ‰æ•ˆåœ°å·¥ä½œ</a></li>
<li><a href="../zh-CN481942/index.html">å›åˆ°æœªæ¥ï¼š2010å¹´å±•ç¤ºäº†å“ªäº›ç°ä»£æ¸¸æˆ</a></li>
<li><a href="../zh-CN481944/index.html">æ˜¯ä»€ä¹ˆå†³å®šäº†ç½‘ç«™åœ¨æœç´¢é¡µé¢ä¸Šçš„ä½ç½®ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>