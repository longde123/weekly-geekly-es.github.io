<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏾 👍🏾 🏗️ 强大的LED四通道调光器 🍫 🛫 🖐🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在本文中，我将讨论一种用于LED灯带和灯的强大四通道调光器（最高功率200瓦，每通道50..100瓦）的项目，该调光器具有高PWM调节频率（1 kHz，色深10位），用于高质量照明。 此外，它还具有用于光传感器的输入，反馈功能（向控制器提供有关输入电压，测量输入端的电压等信息），以及串行控制端口的电...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>强大的LED四通道调光器</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402155/"> 在本文中，我将讨论一种用于LED灯带和灯的强大四通道调光器（最高功率200瓦，每通道50..100瓦）的项目，该调光器具有高PWM调节频率（1 kHz，色深10位），用于高质量照明。 此外，它还具有用于光传感器的输入，反馈功能（向控制器提供有关输入电压，测量输入端的电压等信息），以及串行控制端口的电流隔离。 <br><br><img src="https://habrastorage.org/files/34a/40c/43c/34a40c43cea94d2c86d0a577633c5993.JPG"><br><a name="habracut"></a><br> 碰巧的是，我决定更改个人资料，开始忙于微控制器和自动化，几个月后，我收到了一份诱人的报价，要求在多米尼加共和国建造“智能住宅”，这样一来，由三人组成的相当大的别墅的几乎所有方面都得到了管理和自动化。建筑物，从照明和气候到花园机器人和灌溉系统。 由于我很长时间以来都对积雪和霜冻感到厌倦，因此无法拒绝这样的提议，更是如此，因为它们在移动和适应方面给了我很大帮助。 <br><br> 当然，最关键的任务之一是控制许多房间和室外的照明。 为了节省这里昂贵的能源，几乎所有地方都将使用LED灯条和12伏灯，必须使用调光器对其进行控制。 现有的调光器模型在所有方面都不太令人满意（控制频率足够高，没有闪烁；功率大，用于控制明亮的长条或灯/聚光灯；封闭的交换协议，等等）。 所以我决定调光。 <br><br> 在设计阶段非常痛苦的一点是选择从110伏交流电中获得低压电源。 我们甚至考虑了具有非变压器降压功能的奇异版本，该降压版本可立即升至12伏，但出于电气和消防安全考虑，我们拒绝了该版本。 现成的电源110-&gt; 12并不是很贵（120瓦20美元，200瓦40美元），尽管总体上还是不错的。 但是，幸运的是，设备空间很大，所以我选择了此选项。 <br><br> 电路相对简单（四个光电耦合器上串行端口的电流隔离节点除外）-STM32F030F4P6微控制器，两个ADP3624 MOSFET驱动器和IRLB8748关键晶体管，以较大的余量进行选择（每个通道负载100瓦-它们几乎不发热） ，以及现成的3.3伏中文脉冲降压模块。 选定的驱动器使您可以控制高达兆赫兹的频率，该频率以千赫兹为单位给出输出电压的频率，PWM步进为一微秒。 在实践中，甚至测试了PWM频率为八千赫兹，阶跃为125纳秒的模式，但在实践中，如此高的调整频率会威胁到输出端的某些不稳定性-晶体管可能无法如此迅速地关闭并且调整质量将``浮动''。 <br><br> <a href=""><img src="https://habrastorage.org/files/066/0b3/8bb/0660b38bbd6f408894a90839f6ce3407.png" width="900"></a> <br><br> 对于如此高的电流，电路板的布线对我来说是一个相当艰巨的挑战，我以前从未遇到过这样的任务。 决定使它们尽可能宽（在70微米的铜层上的宽度至少为10mm的导体），并且在不可能的情况下，请使用第二层，将它们与大量通孔结合在一起。 我从高负载导体上取下了屏蔽罩，以便在必要时可以在顶部应用铜总线（但是即使最大负载为200瓦，也不需要这样做）-在封闭的情况下，该板的温度几乎只有40度）。 <br><br> 由于缺少闪存，交换协议的选择非常简单，命令以文本“ 0：512”（通道零，PWM 512）的形式逐行传输，输出数据以相同的方式传输（电源，来自第一个光敏电阻的数据，来自第二个光敏电阻的数据，ADC3输入的输入电压，ADC5输入的输入电压，控制器的电压，芯片温度）。 使用MQTT协议会更正确，但是我担心它不适合闪存（千字节的可用空间仍然不足16字节）。 <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github上的源代码</a> <br><br> 调光器通过相同的控制端口闪烁（您需要将一个单元施加到第4引脚，然后将脉冲施加到第5引脚，然后可以使用标准串行协议STM32加载微控制器。要控制已经闪烁的调光器，三根线就足够了，+ 3.3 / + 5V固件中控制端口的设置为38400波特8n1。 <br><br> 当然，调光器的第一个版本并非没有缺陷。 事实证明，每12伏一个470微法拉的电容器是不够的，它在高负载下会发热太多（尤其是如果连接到电源的电线对于这种电流来说很细），我们需要增加几对功率更大的电容器（根据最大允许电流）。 中文电源模块也证明是不成功的解决方案，其中一个模块在测试期间完全没有任何原因失败，我将在TPS62177上将其替换为转换器，此外，我还将在AP1501上添加另一个可选转换器（24-&gt; 12），以防止电源变暗24伏特 好了，您将需要一个用于电源的120毫米风扇的控制电路（在负载接近最大的情况下），并具有热控制功能和无级可调功能。 我还决定用SI8641芯片代替控制端口的复杂电隔离。 <br><br> 软件部分存在问题-有时会从串行端口读取挂起，阻止控制（我对STM32的了解还不是很多），而且该协议实在是太愚蠢了，也许我会尝试在其中填充普通的MQTT。 <br><br> 这是在测试台（我的前门）上使用调光器以及IR距离传感器（RGBW色带的颜色和亮度可通过openhab进行调节，取决于距离）的示例： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/knXuq3a6p4M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> 在下一篇文章中，我将通过测量每个通道的电流消耗来讨论具有双稳态继电器的8千瓦交流负载的四通道开关单元（以减少无用的能量消耗）。 <br><br> 好吧，我会以积极的态度结束发言。 事实证明，在多米尼加共和国，找不到用于洗涤电路板（以及纯汽油）的99％异丙醇或乙醇。 您会发现70％的混合物显然不与蒸馏水混合，留下污渍。 而且，您仍然可以轻松找到99.6％的甲基（我不知道他们为什么要出售它，将其用作溶剂甚至很可怕-您可以成对呼吸）。 我决定尝试用蒸馏水冲洗第一块调光板，该蒸馏水是我在一家家庭用品商店购买的。 幸运的是，我没有意识到检查馏出液质量的想法。 但是，当我将电池电解液倒入电路板和镀锌水槽时，它们确实不喜欢它（水瓶放在架子上，很明显，当我将其放在篮子中时，我抓住了错误的东西）... <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN402155/">https://habr.com/ru/post/zh-CN402155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN402145/index.html">继续主题“癌症。 该怎么办...”</a></li>
<li><a href="../zh-CN402147/index.html">IBM在一个原子中记录了一点信息</a></li>
<li><a href="../zh-CN402149/index.html">英特尔XMM 7560-空中千兆</a></li>
<li><a href="../zh-CN402151/index.html">区块链数字公证员：Emercoin DPO Antifake</a></li>
<li><a href="../zh-CN402153/index.html">“我们排序”印刷厂</a></li>
<li><a href="../zh-CN402157/index.html">克里斯·卡巴斯基死了。 真正的黑客的记忆是专门的</a></li>
<li><a href="../zh-CN402159/index.html">2月最具媒体科学发展排名</a></li>
<li><a href="../zh-CN402161/index.html">软件制造商大规模关闭CIA使用的漏洞</a></li>
<li><a href="../zh-CN402163/index.html">更新的史蒂夫·乔布斯故事</a></li>
<li><a href="../zh-CN402165/index.html">伊斯特拉最伟大的科学“圆顶”</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>