<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôªÔ∏è üßëüèø‚Äçü§ù‚Äçüßëüèº ü§ò 39 nouvelles fonctionnalit√©s disponibles dans Java 12 üëêüèΩ üßìüèø üßìüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Extrait d'une merveilleuse interview sur Habr√©: ¬´Simon Ritter est une personne qui a travaill√© sur Java depuis le tout d√©but et continue de le faire e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>39 nouvelles fonctionnalit√©s disponibles dans Java 12</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446590/"><blockquote>  Extrait d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merveilleuse interview</a> sur Habr√©: ¬´Simon Ritter est une personne qui a travaill√© sur Java depuis le tout d√©but et continue de le faire en tant que directeur technique adjoint d'Azul, une entreprise travaillant sur la machine virtuelle Jing Zing et l'un des meilleurs ramasseurs de d√©chets, C4 (Continuously Concurrent Compacting Collectionneur) ¬ª <br>  Vous trouverez ci-dessous une traduction de son article sur les nouvelles fonctionnalit√©s de JDK 12 et certaines difficult√©s que vous pouvez rencontrer lors de la migration vers une nouvelle version. </blockquote><p> J'ai √©crit plusieurs articles de blog qui r√©pertorient toutes les modifications pour chacune des derni√®res versions de Java ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JDK 10</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JDK 11</a> ).  J'explorerai maintenant le c√¥t√© obscur de JDK 12, en me concentrant sur certains des pi√®ges qui peuvent poser des probl√®mes si vous souhaitez porter l'application sur cette version. </p><br><img src="https://habrastorage.org/webt/0e/rn/j0/0ernj0wwnqnwdejls6zvzjup5k8.png"><br><p><a name="habracut"></a>  JDK 12 poss√®de le plus petit nombre de nouvelles fonctionnalit√©s de toutes les versions Java √† ce jour (j'en ai compt√© 109 dans JDK 10 et 90 dans JDK 11).  Ce n'est pas mal - en raison des cycles de publication, certaines versions contiendront plus de changements et d'autres moins. </p><br><p>  Je d√©composerai de nouvelles fonctions en domaines logiques √©vidents: Java, biblioth√®ques, JVM et autres fonctions JDK. </p><br><h2>  Changements de langue </h2><br><p>  La fonction que je (et je suppose que beaucoup d'autres personnes) consid√©reront la plus visible dans JDK 12 est la nouvelle instruction switch ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 325</a> ).  Il s'agit √©galement du premier changement de langue √† utiliser comme fonction de ¬´pr√©visualisation¬ª.  L'id√©e de ¬´pr√©visualisation¬ª a √©t√© introduite d√©but 2018 dans le cadre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 12</a> .  Il s'agit essentiellement d'un moyen d'activer les versions b√™ta de nouvelles fonctionnalit√©s √† l'aide des options de ligne de commande.  En utilisant l'aper√ßu, il est toujours possible d'effectuer des modifications en fonction des commentaires des utilisateurs et, dans le pire des cas, de supprimer compl√®tement une fonction si elle n'a pas √©t√© re√ßue correctement.  La cl√© des fonctions d'aper√ßu est qu'elles ne sont pas incluses dans la sp√©cification Java SE.  √Ä propos du nouveau commutateur, il y a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tr√®s bonne traduction</a> sur Habr√©. <br>  Dans JDK 12, un commutateur est devenu une expression qui √©value son ¬´contenu¬ª pour produire un r√©sultat.  J'expliquerai tout de suite que cela n'affecte pas la compatibilit√© descendante, vous n'avez donc pas besoin de changer de code utilisant Switch comme op√©rateur. </p><br><p>  Je vais utiliser l'exemple de JEP, car il est simple et clair: </p><br><div class="spoiler">  <b class="spoiler_title">Ancien interrupteur</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numLetters; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (day) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MONDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FRIDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SUNDAY: numLetters = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TUESDAY: numLetters = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> THURSDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SATURDAY: numLetters = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WEDNESDAY: numLetters = <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Huh? "</span></span> + day); }</code> </pre> </div></div><br><p>  Comme vous pouvez le voir, nous mappons le jour de la semaine au nom de la variable <code>day</code> , puis <code>numLetters</code> la valeur <code>numLetters</code> .  Maintenant que switch est un op√©rateur, nous pouvons effectuer l'affectation une fois (ce qui r√©duit consid√©rablement la probabilit√© d'un code erron√©) en utilisant le r√©sultat de l'instruction switch: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numLetters = <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (day) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MONDAY, FRIDAY, SUNDAY -&gt; <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TUESDAY -&gt; <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> THURSDAY, SATURDAY -&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WEDNESDAY -&gt; <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Huh? "</span></span> + day); };</code> </pre> <br><p>  Vous remarquerez rapidement deux changements de syntaxe.  Les d√©veloppeurs d'OpenJDK sont tomb√©s sur une fonction de syntaxe peu connue appel√©e liste s√©par√©e par des virgules.  L'op√©rateur d'expression lambda <code>-&gt;</code> facilite √©galement le retour de la valeur.  Vous pouvez toujours utiliser <code>break</code> avec une valeur si vous le voulez vraiment.  Il existe plusieurs autres d√©tails sur cette fonctionnalit√©, mais il est probablement plus facile de lire JEP. </p><br><h2>  Biblioth√®ques </h2><br><p>  Il y a un changement que je trouve tr√®s utile.  Il en existe √©galement plusieurs. </p><br><h3>  collecteur de d√©part </h3><br><p>  L'API Streams, comme d'habitude, a un nouveau collecteur, fourni par la classe utilitaire Collectors.  Un nouveau collecteur peut √™tre obtenu en utilisant la m√©thode <code>teeing()</code> .  Le collecteur de d√©parts prend trois arguments: deux collecteurs et une bifonction.  Pour comprendre le travail de ce collectionneur, je recommande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet article sur Habr√©</a> . <br>  Pour comprendre comment il fait √ßa, j'ai dessin√© un sch√©ma: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/821/2db/503/8212db5034c04db49aed57dd44697b22.jpg" alt="image"><br><p>  Toutes les valeurs du flux d'entr√©e sont transmises √† chaque collecteur.  Le r√©sultat de chaque collecteur est transmis en tant qu'arguments √† BiFunction pour g√©n√©rer le r√©sultat final. </p><br><p>  Un exemple simple est le calcul de la valeur moyenne (oui, je sais qu'il existe d√©j√† des collecteurs pour cela, comme <code>averagingInt()</code> , mais ceci est un exemple simple pour aider √† comprendre le concept). </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* Assume Collectors is statically imported */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> average = Stream.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) .collect(teeing( summingDouble(i -&gt; i), counting(), (sum, n) -&gt; sum / n) );</code> </pre> <br><p>  Le premier collecteur calcule la somme du flux d'entr√©e, et le second - le nombre d'√©l√©ments.  BiFunction divise la somme par le nombre d'√©l√©ments pour obtenir la valeur moyenne. </p><br><h3>  java.io </h3><br><p>  <code>InputStream skipNBytes(long n)</code> - ignore et supprime exactement n octets du flux d'entr√©e InputStream.  Si n est √©gal ou inf√©rieur √† z√©ro, les octets ne sont pas ignor√©s. </p><br><h3>  java.lang </h3><br><p>  Un nouveau package est apparu, java.lang.constant, qui fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie de l'API JVM constante, JEP 334</a> . </p><br><p>  Chaque fichier de classe Java poss√®de un pool persistant qui stocke des op√©randes pour les instructions de bytecode dans la classe.  Il est difficile pour les d√©veloppeurs de manipuler les fichiers de classe en raison de probl√®mes de chargement des classes.  L'API JVM constante fournit des types de r√©f√©rence symboliques pour d√©crire chaque forme d'une constante (classe, constante chargeable, <code>MethodHandle</code> , constante <code>MethodHandle</code> , constante <code>MethodType</code> ). </p><br><p>  Il a √©galement influenc√© plusieurs autres classes.  Toutes les classes suivantes ont d√©sormais une m√©thode <code>describeConstable()</code> : </p><br><ul><li>  Classe </li><li>  Double </li><li>  Enum </li><li>  Flotter </li><li>  Entier </li><li>  Long </li><li>  String </li><li>  Methodhandle </li><li>  MethodType </li><li>  Varhandle </li></ul><br><p>  En tant que britannique, je trouve √ßa assez dr√¥le.  Le terme Constable, <code>describeConstable</code> utilis√© depuis le XIe si√®cle, et c'est ainsi que nous nous r√©f√©rons souvent aux policiers.  C'est aussi le nom du c√©l√®bre artiste du XVIIIe si√®cle, John Constable.  Cela me fait me demander si la m√©thode <code>describeTurner()</code> sera dans une future version.  √âvidemment, dans ce cas, il s'agit d'une abr√©viation de la <code>Constant Table</code> , sans lien avec un avocat ou un paysagiste. </p><br><p>  Les classes suivantes incluent d√©sormais la m√©thode <code>resolveConstantDesc()</code> : </p><br><ul><li>  Double </li><li>  Enum.EnumDesc </li><li>  Flotter </li><li>  Entier </li><li>  Long </li><li>  String </li></ul><br><h3>  java.lang.Character </h3><br><p>  Les classes internes ont √©t√© mises √† jour pour inclure de nouveaux blocs Unicode.  J'aime toujours voir ce que les gens ont trouv√© √† ajouter √† Unicode, voici quelques exemples: </p><br><ul><li>  Symboles d'√©checs </li><li>  Num√©ros mayas </li><li>  Le sogdian est une langue iranienne orientale qui n'√©tait plus utilis√©e au 11e si√®cle. </li><li>  Old Sogdian est une version plus ancienne (et, je suppose, encore plus limit√©e) de Sogdian </li></ul><br><h3>  java.lang.Class </h3><br><p>  <code>arrayType()</code> renvoie <code>Class</code> pour le type du tableau dont le type de composant est d√©crit par cette <code>Class</code> .  Cela peut √™tre v√©rifi√© √† l'aide de <code>jshell</code> : </p><br><pre> <code class="bash hljs">jshell&gt; (new String[2]).getClass().getName() <span class="hljs-variable"><span class="hljs-variable">$11</span></span> ==&gt; <span class="hljs-string"><span class="hljs-string">"[Ljava.lang.String;"</span></span> jshell&gt; (new String[2]).getClass().arrayType() <span class="hljs-variable"><span class="hljs-variable">$12</span></span> ==&gt; class [[Ljava.lang.String; jshell&gt; <span class="hljs-string"><span class="hljs-string">"foo"</span></span>.getClass().arrayType() <span class="hljs-variable"><span class="hljs-variable">$15</span></span> ==&gt; class [Ljava.lang.String;</code> </pre> <br><p>  Je ne suis pas tout √† fait s√ªr de la signification de cette m√©thode, car elle ne fait qu'ajouter une <code>Class</code> au type que cette classe repr√©sente. </p><br><p>  <code>componentType()</code> , identique √† <code>getComponentType()</code> .  La question se pose - pourquoi ajouter une m√©thode redondante? </p><br><p>  <code>descriptorString()</code> - renvoie √† nouveau le m√™me r√©sultat que <code>getName()</code> .  Cependant, cela est n√©cessaire car <code>Class</code> impl√©mente d√©sormais l'interface <code>TypeDescriptor</code> associ√©e √† la nouvelle API JVM constante. </p><br><h3>  lava.lang.String </h3><br><p>  <code>indent()</code> - Ajoute une s√©rie d'espaces de d√©but √† une cha√Æne.  Si le param√®tre est n√©gatif, ce nombre d'espaces de t√™te sera supprim√© (si possible). </p><br><p>  <code>transform()</code> - Applique la fonction fournie √† une cha√Æne.  Le r√©sultat peut ne pas √™tre une cha√Æne. </p><br><h3>  java.lang.invoke </h3><br><p>  <code>VarHandle</code> maintenant <code>toString()</code> pour renvoyer une description compacte. </p><br><p>  <code>java.net.SecureCacheResponse</code> et <code>java.net.ssl.HttpsConnection</code> ont une nouvelle m√©thode, <code>getSSLSession()</code> qui renvoie <code>Optional</code> contenant la <code>SSLSession</code> utilis√©e dans la connexion. </p><br><h3>  java.nio.files </h3><br><p>  La classe <code>Files</code> poss√®de une nouvelle m√©thode, <code>mismatch()</code> , qui recherche et renvoie la position du premier octet de non-concordance dans le contenu de deux fichiers, ou -1L s'il n'y a pas de non-concordance. </p><br><h3>  java.text </h3><br><p>  Il existe une nouvelle classe <code>CompactNumberFormat</code> .  Il s'agit d'une sous-classe de <code>NumberFormat</code> qui formate un nombre d√©cimal sous forme compacte.  Un exemple de formulaire compact - <code>1M</code> au lieu de <code>1000000</code> , donc - n√©cessite deux au lieu de neuf caract√®res.  <code>NumberFormat</code> et <code>java.text.spi.NumberFormatProvider</code> ont √©t√© √©tendus pour inclure la nouvelle m√©thode <code>getCompactNumberInstance()</code> .  Il existe √©galement une nouvelle √©num√©ration, <code>NumberFormatStyle</code> qui a deux significations: LONG et SHORT. </p><br><h3>  java.util.concurrent </h3><br><p>  CompletionStage comprend d√©sormais plusieurs formulaires surcharg√©s avec trois m√©thodes: </p><br><ul><li>  exceptionnellement asynchrone </li><li>  exceptionnellement </li><li>  exceptionnellementComposeAsync </li></ul><br><p>  Ces m√©thodes √©largissent les possibilit√©s de cr√©ation d'un nouveau <code>CompletionStage</code> partir d'un existant, <code>CompletionStage</code> si l'actuel se termine par une exception.  Consultez la documentation de l'API pour plus de d√©tails. </p><br><h3>  javax.crypto </h3><br><p>  La classe <code>Cipher</code> a une nouvelle <code>toString()</code> qui renvoie une cha√Æne contenant la transformation, le mode et le fournisseur <code>Cipher</code> . </p><br><h3>  javax.naming.ldap.spi </h3><br><p>  Il s'agit d'un nouveau package dans JDK 12 et il contient deux classes: <code>LdapDnsProvider</code> , qui est la classe de fournisseur pour les recherches DNS pendant les op√©rations LDAP, et <code>LdapDnsProviderResults</code> qui encapsule le r√©sultat de la recherche DNS pour l'URL LDAP. </p><br><h3>  Swing </h3><br><p>  Swing est toujours en cours de mise √† jour!  Oui, <code>filechooser.FileSystemView</code> dispose d√©sormais d'une nouvelle m√©thode <code>getChooserShortcutPanelFiles()</code> .  Il renvoie un tableau de fichiers repr√©sentant les valeurs √† afficher par d√©faut dans la barre de raccourcis de s√©lection de fichiers. </p><br><h2>  Modifications de la JVM </h2><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 189: Shenandoah</a> : ramasseur d'ordures √† faible pause </h3><br><p>  Shenandoah est un projet de recherche annonc√© par Red Hat en 2014 qui se concentre sur les exigences des applications √† faible latence pour la gestion de la m√©moire dans la JVM.  Ses objectifs sont un temps de pause maximal de 1 √† 10 ms pour un tas de plus de 20 Go ( <del>  il n'est donc pas destin√© aux petites applications </del>  - comme l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un des d√©veloppeurs de Shenandoah a r√©pondu</a> , ce n'est pas le cas et il fait un excellent travail avec de petites applications).  Ce collecteur est con√ßu pour fonctionner en parall√®le avec les threads d'application, √©vitez donc les probl√®mes que nous voyons dans la plupart des r√©cup√©rateurs de place. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 344: Collections mixtes G1</a> </h3><br><p>  Cette modification vise √† am√©liorer le comportement du collecteur G1 lorsqu'il atteint l'objectif de retard d√©fini.  G1 divise l'espace de m√©moire (ancien et ancien) en r√©gions.  L'id√©e est que dans l'ancienne g√©n√©ration, vous n'avez pas besoin de collecter les d√©chets en une seule op√©ration.  Lorsque G1 doit collecter des ordures, il s√©lectionne les r√©gions qu'il d√©finit.  C'est ce qu'on appelle un kit de collecte.  Avant JDK 12, lorsque les travaux ont commenc√© sur le plateau, tous les travaux devaient √™tre achev√©s, essentiellement, comme une op√©ration atomique.  Le probl√®me √©tait que, parfois, en raison de changements dans l'utilisation de l'espace de tas par l'application, l'ensemble de collecte s'av√©rait trop volumineux et prenait trop de temps √† collecter, ce qui conduisait au fait que le temps de pause n'√©tait pas atteint. </p><br><p>  Dans JDK 12, si G1 identifie cette situation, il interrompra la collecte de donn√©es √† mi-chemin si cela n'affecte pas la capacit√© de l'application √† continuer d'allouer de l'espace pour de nouveaux objets.  L'effet net de G1 sera meilleur lorsqu'un temps de pause court sera atteint. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 346: retourne rapidement la m√©moire allou√©e inutilis√©e de G1</a> </h3><br><p>  Il s'agit d'une autre am√©lioration des performances pour G1, mais une autre est li√©e √† la fa√ßon dont la JVM interagit avec le reste du syst√®me.  De toute √©vidence, la m√©moire est requise pour le tas JVM et, au d√©marrage, il demande de la m√©moire √† l'allocateur de m√©moire virtuelle du syst√®me d'exploitation.  Lorsque l'application d√©marre, il peut arriver que la quantit√© de m√©moire requise pour le segment de m√©moire diminue et qu'une partie de la m√©moire allou√©e puisse √™tre renvoy√©e au syst√®me d'exploitation pour √™tre utilis√©e par d'autres applications. </p><br><p>  G1 le fait d√©j√†, mais ne peut le faire qu'√† deux endroits.  D'une part, lors d'une collection compl√®te, et d'autre part, lors d'un des cycles parall√®les.  G1 essaie de ne pas effectuer de collecte compl√®te et avec une faible utilisation de la m√©moire, il peut y avoir des p√©riodes importantes entre les cycles de collecte.  Cela conduit au fait que G1 peut conserver une m√©moire fixe pendant une longue p√©riode. </p><br><p>  Dans JDK 12, G1 essaiera p√©riodiquement de continuer ou d'ex√©cuter une boucle parall√®le pendant que l'application est inactive pour d√©terminer l'utilisation globale du tas Java.  La m√©moire inutilis√©e peut √™tre retourn√©e au syst√®me d'exploitation de mani√®re plus rapide et pr√©visible. </p><br><p>  Le nouvel indicateur de ligne de commande <code>-XX:G1PeriodicGCInterval</code> peut √™tre utilis√© pour d√©finir le nombre de millisecondes entre les v√©rifications. </p><br><p>  Cette fonctionnalit√© entra√Ænera une utilisation plus conservatrice de la m√©moire JVM pour les applications qui ont √©t√© inactives pendant de longues p√©riodes. </p><br><h2>  Autres nouvelles fonctionnalit√©s JDK </h2><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 230: Kit de micro-analyse comparative</a> </h3><br><p>  Java Microbenchmarking Harness (JMH) a √©t√© d√©velopp√© par Alexey Shipilev lorsqu'il travaillait chez Oracle et fournit une plate-forme √©tendue pour d√©velopper des tests de performances pour les applications Java.  Alexey a fait un travail remarquable en aidant les gens √† √©viter de nombreuses erreurs simples qu'ils font en essayant d'analyser les performances des applications: √©chauffement, √©viter les exceptions, etc. </p><br><p>  Maintenant, JMH peut √™tre inclus dans OpenJDK.  Quiconque souhaite travailler sur le JDK lui-m√™me et changer le code peut l'utiliser pour comparer les performances avant et apr√®s leurs modifications, ainsi que pour comparer les performances dans diff√©rentes versions.  Un certain nombre de tests sont inclus pour permettre les tests;  La conception de JMH est telle qu'il est facile d'ajouter de nouveaux tests l√† o√π cela est n√©cessaire. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 340: un port Aarch64, pas deux</a> </h3><br><p>  OpenJDK poss√®de deux ports pour l'architecture Arm64, l'un fourni par Oracle et l'autre par Red Hat.  Comme cela n'√©tait pas n√©cessaire et qu'Oracle a cess√© de prendre en charge Arm pour ses binaires JDK, il a √©t√© d√©cid√© d'utiliser uniquement le port Red Hat, qui est toujours pris en charge et d√©velopp√©. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JEP 341: archives CDS par d√©faut</a> </h3><br><p>  La classe de partage de donn√©es (CDS) √©tait auparavant une fonctionnalit√© commerciale d'Oracle JDK.  Avec une transition r√©cente effectu√©e dans JDK 11 pour √©liminer toutes les diff√©rences fonctionnelles entre Oracle JDK et OpenJDK, il a √©t√© inclus dans OpenJDK. </p><br><p>  Pour utiliser CDS, vous avez besoin d'une archive cr√©√©e pour les classes qui se chargent au d√©marrage de l'application.  JDK 12 pour les plates-formes 64 bits a d√©sormais le fichier <code>classes.jsa</code> dans le r√©pertoire <code>lib/server</code> .  Il s'agit de l'archive CDS pour les ¬´classes par d√©faut¬ª.  Je suppose que cela signifie toutes les classes publiques dans les modules JDK;  Je n'ai pas trouv√© de moyen de le d√©baller pour v√©rifier.  √âtant donn√© que CDS est activ√© par d√©faut, ce qui √©quivaut √† l'option <code>-Xshare:auto</code> sur la ligne de commande, les utilisateurs b√©n√©ficieront de temps de d√©marrage de l'application am√©lior√©s. </p><br><h2>  Conclusions </h2><br><p>  JDK 12 fournit un petit nombre de nouvelles fonctions et API, la <code>switch</code> √©tant la plus int√©ressante pour les d√©veloppeurs.  Les utilisateurs de G1 appr√©cieront certainement les am√©liorations de performances. </p><br><p>  Avec la nouvelle version de la version, je conseillerais √† tous les utilisateurs de tester leurs applications dans cette version.  Le suivi des modifications incr√©mentielles vous aidera √† √©viter les surprises si vous d√©cidez de passer √† la prochaine version du support √† long terme. </p><br><p>  Nous avons des versions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JDK 12</a> gratuites <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour Zulu Community Edition</a> pour vous aider avec vos tests.  Assurez-vous de les essayer. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr446590/">https://habr.com/ru/post/fr446590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr446576/index.html">Substitution √† l'importation ou comment les h√©licopt√®res russes ont fait quelque chose de mal</a></li>
<li><a href="../fr446578/index.html">Langage de programmation bas√© sur une carte postale</a></li>
<li><a href="../fr446582/index.html">R√©flexions sur l'h√©bergement solaire pour les abeilles</a></li>
<li><a href="../fr446586/index.html">Param√®tres r√©seau de FreeRadius via DHCP</a></li>
<li><a href="../fr446588/index.html">V√©rification du code source de Roslyn</a></li>
<li><a href="../fr446592/index.html">V√©rification du code source de Roslyn</a></li>
<li><a href="../fr446598/index.html">Recr√©ation de polices CRT</a></li>
<li><a href="../fr446602/index.html">Transistor √† effet de champ √† courant continu maximal</a></li>
<li><a href="../fr446604/index.html">ESET: Nouveaux sch√©mas de livraison de porte d√©rob√©e OceanLotus Cybergroup</a></li>
<li><a href="../fr446606/index.html">V√©rifiez √† quel point vous √™tes bon en technologie additive</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>