<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👤 🗝️ ⚒️ Funktionen zum Verwenden und Testen von C ++ - Code auf Mikrocontrollern 👩‍⚕️ 🔊 🏤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So kam es, dass die Hauptsprache für die Arbeit mit Mikrocontrollern C ist. Viele große Projekte sind darauf geschrieben. Aber das Leben steht nicht s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Funktionen zum Verwenden und Testen von C ++ - Code auf Mikrocontrollern</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390837/"><img src="https://habrastorage.org/files/38e/0cb/e8e/38e0cbe8e4c0498cadd1c9a0d51a0a6f.png" align="left" width="150"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So kam es, dass die Hauptsprache für die Arbeit mit Mikrocontrollern C ist. Viele große Projekte sind darauf geschrieben. </font><font style="vertical-align: inherit;">Aber das Leben steht nicht still. </font><font style="vertical-align: inherit;">Moderne Entwicklungstools können C ++ seit langem bei der Entwicklung von Software für eingebettete Systeme verwenden. </font><font style="vertical-align: inherit;">Dieser Ansatz ist jedoch immer noch selten. </font><font style="vertical-align: inherit;">Vor nicht allzu langer Zeit habe ich versucht, C ++ zu verwenden, wenn ich an einem anderen Projekt gearbeitet habe. </font><font style="vertical-align: inherit;">Ich werde in diesem Artikel über diese Erfahrung sprechen.</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eintrag</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der größte Teil meiner Arbeit mit Mikrocontrollern ist mit C verbunden. Zuerst waren es Kundenanforderungen, und dann wurde es nur eine Gewohnheit. Zur gleichen Zeit, wenn es um Anwendungen für Windows ging, wurde dort zuerst C ++ und dann allgemein C # verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gab lange keine Fragen zu C oder C ++. Selbst die Veröffentlichung der nächsten Version von Keils MDK mit C ++ - Unterstützung für ARM hat mich nicht sonderlich gestört. Wenn Sie sich Keil-Demo-Projekte ansehen, wird dort alles in C geschrieben. Gleichzeitig wird C ++ zusammen mit dem Blinky-Projekt in einen separaten Ordner verschoben. CMSIS und LPCOpen sind ebenfalls in C geschrieben. Und wenn „jeder“ C verwendet, gibt es einige Gründe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber viel hat sich geändert .Net Micro Framework. Wenn jemand es nicht weiß, handelt es sich um eine .NET-Implementierung, mit der Sie Anwendungen für Mikrocontroller in C # in Visual Studio schreiben können. Sie können ihn in näher kennenlernen</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artikel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher wird .Net Micro Framework mit C ++ geschrieben. </font><font style="vertical-align: inherit;">Beeindruckt davon beschloss ich, ein anderes Projekt in C ++ zu schreiben. </font><font style="vertical-align: inherit;">Ich muss sofort sagen, dass ich keine eindeutigen Argumente für C ++ gefunden habe, aber es gibt einige interessante und nützliche Punkte in diesem Ansatz.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist der Unterschied zwischen C- und C ++ - Projekten?</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer der Hauptunterschiede zwischen C und C ++ besteht darin, dass die zweite eine objektorientierte Sprache ist. </font><font style="vertical-align: inherit;">Bekannte Einkapselung, Polymorphismus und Vererbung sind hier an der Tagesordnung. </font><font style="vertical-align: inherit;">C ist eine prozedurale Sprache. </font><font style="vertical-align: inherit;">Es gibt nur Funktionen und Prozeduren, und für die logische Gruppierung des Codes werden Module verwendet (ein Paar von .h + .c). </font><font style="vertical-align: inherit;">Wenn Sie sich jedoch genau ansehen, wie C in Mikrocontrollern verwendet wird, können Sie den üblichen objektorientierten Ansatz erkennen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns den Code für die Arbeit mit LEDs aus dem Keil-Beispiel für MCB1000 an ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keil_v5 \ ARM \ Boards \ Keil \ MCB1000 \ MCB11C14 \ CAN_Demo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LED.h:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> __LED_H</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __LED_H</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/* LED Definitions */</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LED_NUM     8                        </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* Number of user LEDs          */</span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_on</span></span></span><span class="hljs-function">  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_off</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_out</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LED.c:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"LPC11xx.h"</span></span></span><span class="hljs-meta">                    </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* LPC11xx definitions                */</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"LED.h"</span></span></span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> led_mask[] = {<span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>, 
                                  <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">7</span></span> };<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*----------------------------------------------------------------------------
  initialize LED Pins
 *----------------------------------------------------------------------------*/</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_init</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
  LPC_SYSCON-&gt;SYSAHBCLKCTRL |= (<span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt;  <span class="hljs-number"><span class="hljs-number">6</span></span>);     <span class="hljs-comment"><span class="hljs-comment">/* enable clock for GPIO      */</span></span><font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">/* configure GPIO as output */</span></span>
  LPC_GPIO2-&gt;DIR  |=  (led_mask[<span class="hljs-number"><span class="hljs-number">0</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">1</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">2</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">3</span></span>] |<font></font>
                       led_mask[<span class="hljs-number"><span class="hljs-number">4</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">5</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">6</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">7</span></span>] );<font></font>
<font></font>
  LPC_GPIO2-&gt;DATA &amp;= ~(led_mask[<span class="hljs-number"><span class="hljs-number">0</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">1</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">2</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">3</span></span>] |<font></font>
                       led_mask[<span class="hljs-number"><span class="hljs-number">4</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">5</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">6</span></span>] | led_mask[<span class="hljs-number"><span class="hljs-number">7</span></span>] );<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*----------------------------------------------------------------------------
  Function that turns on requested LED
 *----------------------------------------------------------------------------*/</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_on</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> num)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
  LPC_GPIO2-&gt;DATA |=  led_mask[num];<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*----------------------------------------------------------------------------
  Function that turns off requested LED
 *----------------------------------------------------------------------------*/</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_off</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> num)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
  LPC_GPIO2-&gt;DATA &amp;= ~led_mask[num];<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*----------------------------------------------------------------------------
  Output value to LEDs
 *----------------------------------------------------------------------------*/</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LED_out</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; LED_NUM; i++) {
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &amp; (<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;i)) {<font></font>
      LED_on (i);<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
      LED_off(i);<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie genau hinschauen, können Sie eine Analogie zu OOP geben. </font><font style="vertical-align: inherit;">LED ist ein Objekt mit einer öffentlichen Konstante, einem Konstruktor, drei öffentlichen Methoden und einem privaten Feld:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LED</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>:
        <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> led_mask[] = {<span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>, 
                                  <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">1U</span></span>L &lt;&lt; <span class="hljs-number"><span class="hljs-number">7</span></span> };<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
	<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> LED_NUM=<span class="hljs-number"><span class="hljs-number">8</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:<font></font>
        LED(); <span class="hljs-comment"><span class="hljs-comment">// LED_init</span></span>
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function">  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">off</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">out</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> led)</span></span></span></span>;<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Tatsache, dass der Code in C geschrieben ist, verwendet er das Paradigma der Objektprogrammierung. Eine .C-Datei ist ein Objekt, mit dem Sie die Implementierungsmechanismen der in der .h-Datei beschriebenen öffentlichen Methoden einkapseln können. Aber hier gibt es keine Vererbung und damit auch Polymorphismus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der größte Teil des Codes in den Projekten, die ich getroffen habe, ist im gleichen Stil geschrieben. Und wenn der OOP-Ansatz verwendet wird, warum dann nicht eine Sprache verwenden, die ihn vollständig unterstützt? Gleichzeitig ändert sich beim Wechsel zu C ++ im Großen und Ganzen nur die Syntax, nicht jedoch die Entwicklungsprinzipien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie ein anderes Beispiel. </font><font style="vertical-align: inherit;">Angenommen, wir haben ein Gerät, das einen Temperatursensor verwendet, der über I2C angeschlossen ist. </font><font style="vertical-align: inherit;">Es wurde jedoch eine neue Version des Geräts veröffentlicht, und derselbe Sensor ist jetzt mit dem SPI verbunden. </font><font style="vertical-align: inherit;">Was zu tun ist? </font><font style="vertical-align: inherit;">Die erste und die zweite Version des Geräts müssen unterstützt werden. Dies bedeutet, dass der Code diese Änderungen flexibel berücksichtigen muss. </font><font style="vertical-align: inherit;">In C können Sie #define-Vordefinitionen verwenden, um das Schreiben von zwei nahezu identischen Dateien zu vermeiden. </font><font style="vertical-align: inherit;">Zum Beispiel</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV1</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> “i2c.h”</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV2</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> “spi.h”</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TEMPERATURE_init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV1</span></span><font></font>
	I2C_int()<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV2</span></span><font></font>
	SPI_int()<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span><font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In C ++ können Sie dieses Problem etwas eleganter lösen. </font><font style="vertical-align: inherit;">Schnittstelle erstellen</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ITemperature</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
	<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und mache 2 Implementierungen</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Temperature_I2C</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ITemperature<font></font>
{<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
	<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Temperature_SPI</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ITemperature<font></font>
{<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
	<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dann verwenden Sie diese oder jene Implementierung abhängig von der Revision:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemperatureGetter</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <font></font>
         ITemperature* _temperature;<font></font>
<font></font>
pubic:<font></font>
         Init(ITemperature* temperature)<font></font>
         {<font></font>
                 _temperature = temperature;<font></font>
         }<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>:
	<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTemperature</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
        </span></span>{<font></font>
                _temperature-&gt;GetValue();<font></font>
        }<font></font>
<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV1</span></span><font></font>
	Temperature_I2C temperature;<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> REV2</span></span><font></font>
	Temperature_SPI temperature;<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span><font></font>
<font></font>
TemperatureGetter tGetter;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
        tGetter.Init(&amp;temperature);<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass der Unterschied zwischen C- und C ++ - Code nicht sehr groß ist. </font><font style="vertical-align: inherit;">Die objektorientierte Option sieht noch umständlicher aus. </font><font style="vertical-align: inherit;">Sie können jedoch eine flexiblere Entscheidung treffen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Verwendung von C können zwei Hauptlösungen unterschieden werden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie #define wie oben gezeigt. </font><font style="vertical-align: inherit;">Diese Option ist nicht sehr gut, da sie die Verantwortung des Moduls „untergräbt“. </font><font style="vertical-align: inherit;">Es stellt sich heraus, dass er für mehrere Revisionen des Projekts verantwortlich ist. </font><font style="vertical-align: inherit;">Wenn es viele solcher Dateien gibt, wird es ziemlich schwierig, sie zu pflegen.</font></font></li>
<li> 2 ,     C++.  “”  ,     .       ,           #ifdef.   ,  ,   .          ,     .          ,    ,      .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung von Polymorphismus ergibt ein schöneres Ergebnis. Einerseits löst jede Klasse ein klares atomares Problem, andererseits ist der Code nicht verschmutzt und leicht zu lesen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die „Verzweigung“ des Codes in der Revision muss im ersten und zweiten Fall noch durchgeführt werden. Die Verwendung von Polymorphismus erleichtert jedoch die Übertragung der Verzweigungsstelle zwischen den Programmebenen, ohne den Code mit unnötigem #ifdef zu überladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung von Polymorphismus macht es einfach, eine noch interessantere Entscheidung zu treffen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, es wird eine neue Version veröffentlicht, in der beide Temperatursensoren installiert sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit demselben Code mit minimalen Änderungen können Sie Ihre SPI- und I2C-Implementierung in Echtzeit auswählen, indem Sie einfach die Init- (&amp; Temperatur-) Methode verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Beispiel ist sehr vereinfacht, aber in einem realen Projekt habe ich denselben Ansatz verwendet, um dasselbe Protokoll auf zwei verschiedenen physischen Datenübertragungsschnittstellen zu implementieren. </font><font style="vertical-align: inherit;">Dies machte es einfach, die Wahl der Schnittstelle in den Geräteeinstellungen zu treffen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei alledem bleibt der Unterschied zwischen der Verwendung von C und C ++ jedoch nicht sehr groß. </font><font style="vertical-align: inherit;">Die Vorteile von C ++ in Bezug auf OOP liegen nicht auf der Hand und stammen aus der Kategorie "Amateur". </font><font style="vertical-align: inherit;">Die Verwendung von C ++ in Mikrocontrollern hat jedoch ziemlich ernsthafte Probleme.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum ist die Verwendung von C ++ gefährlich?</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite wichtige Unterschied zwischen C und C ++ ist die Speichernutzung. Die C-Sprache ist meist statisch. Alle Funktionen und Prozeduren haben feste Adressen, und die Arbeit mit einem Bündel wird nur bei Bedarf ausgeführt. C ++ ist eine dynamischere Sprache. Normalerweise impliziert seine Verwendung aktive Arbeit mit Zuweisung und Freigabe von Speicher. Dies ist, was C ++ gefährlich ist. Mikrocontroller verfügen nur über sehr wenige Ressourcen, daher ist die Kontrolle über sie wichtig. Die unkontrollierte Nutzung des Arbeitsspeichers ist mit Schäden an den dort gespeicherten Daten und solchen „Wundern“ in der Programmarbeit behaftet, die niemandem erscheinen werden. Viele Entwickler sind auf solche Probleme gestoßen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich die obigen Beispiele genau ansehen, können Sie feststellen, dass Klassen keine Konstruktoren und Destruktoren haben. Dies liegt daran, dass sie niemals dynamisch erstellt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Verwendung des dynamischen Speichers (und bei Verwendung des neuen Speichers) wird immer die Malloc-Funktion aufgerufen, die die erforderliche Anzahl von Bytes aus dem Heap zuweist. Selbst wenn Sie darüber nachdenken (obwohl es sehr schwierig ist) und die Verwendung des Speichers steuern, kann das Problem der Fragmentierung auftreten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Bündel kann als Array dargestellt werden. Zum Beispiel </font></font><br>
<img src="https://habrastorage.org/files/05a/c96/6c5/05ac966c58a744058f06c0552789825c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
weisen </font><font style="vertical-align: inherit;">wir ihm 20 Bytes zu: </font><font style="vertical-align: inherit;">Jedes Mal, wenn Speicher zugewiesen wird, wird der gesamte Speicher (von links nach rechts oder von rechts nach links - dies ist nicht so wichtig) auf das Vorhandensein einer bestimmten Anzahl nicht besetzter Bytes gescannt. Außerdem sollten sich diese Bytes alle in der Nähe befinden: </font></font><br>
<img src="https://habrastorage.org/files/72d/0bf/e62/72d0bfe6220048a487dddf81032082fb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Speicher nicht mehr benötigt wird, kehrt er in seinen ursprünglichen Zustand zurück:</font></font><br>
<img src="https://habrastorage.org/files/05a/c96/6c5/05ac966c58a744058f06c0552789825c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies kann sehr leicht passieren, wenn genügend freie Bytes vorhanden sind, diese jedoch nicht in einer Reihe angeordnet sind. Lassen Sie 10 Zonen mit jeweils 2 Bytes zuweisen: </font></font><br>
<img src="https://habrastorage.org/files/a26/7b6/698/a267b6698df2402aaab7340b86b1357d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann werden 2,4,6,8,10 Zonen freigegeben: </font></font><br>
<img src="https://habrastorage.org/files/ad6/b46/3af/ad6b463af9804994ad77c1e20e039426.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formal bleibt die Hälfte des gesamten Heaps (10 Bytes) frei. Das Zuweisen eines Speicherbereichs von 3 Bytes schlägt jedoch weiterhin fehl, da das Array keine 3 freien Zellen in einer Reihe enthält. Dies wird als Speicherfragmentierung bezeichnet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und auf Systemen ohne Speichervirtualisierung ist dies ziemlich schwierig. Besonders bei großen Projekten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Situation kann leicht emuliert werden. Ich habe dies in Keil mVision auf dem LPC11C24-Mikrocontroller gemacht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie die Heap-Größe auf 256 Byte ein: </font></font><br>
<img src="https://habrastorage.org/files/928/56b/179/92856b179a9e4165b8c476fe40870c25.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, wir haben 2 Klassen:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdint.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foo</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>:
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pr1;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pr2;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pr3;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pr4;<font></font>
<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pb1;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pb2;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pb3;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pb4;<font></font>
<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pc1;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pc2;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pc3;
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pc4;<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:<font></font>
	foo()<font></font>
	{<font></font>
		_pr1 = <span class="hljs-number"><span class="hljs-number">100</span></span>;<font></font>
		_pr2 = <span class="hljs-number"><span class="hljs-number">200</span></span>;<font></font>
		_pr3 = <span class="hljs-number"><span class="hljs-number">300</span></span>;<font></font>
		_pr4 = <span class="hljs-number"><span class="hljs-number">400</span></span>;<font></font>
		<font></font>
		_pb1 = <span class="hljs-number"><span class="hljs-number">100</span></span>;<font></font>
		_pb2 = <span class="hljs-number"><span class="hljs-number">200</span></span>;<font></font>
		_pb3 = <span class="hljs-number"><span class="hljs-number">300</span></span>;<font></font>
		_pb4 = <span class="hljs-number"><span class="hljs-number">400</span></span>;<font></font>
		<font></font>
		_pc1 = <span class="hljs-number"><span class="hljs-number">100</span></span>;<font></font>
		_pc2 = <span class="hljs-number"><span class="hljs-number">200</span></span>;<font></font>
		_pc3 = <span class="hljs-number"><span class="hljs-number">300</span></span>;<font></font>
		_pc4 = <span class="hljs-number"><span class="hljs-number">400</span></span>;<font></font>
	}<font></font>
	~foo(){};	<font></font>
<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> F1(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr1*a;<font></font>
	};<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> F2(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr1/a;<font></font>
	};<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> F3(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr1+a;<font></font>
	};<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> F4(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr1-a;<font></font>
	};<font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bar</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>:
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> _pr1;
	<span class="hljs-keyword"><span class="hljs-keyword">int8_t</span></span> _pr2;<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:<font></font>
	bar()<font></font>
	{<font></font>
		_pr1 = <span class="hljs-number"><span class="hljs-number">100</span></span>;<font></font>
		_pr2 = <span class="hljs-number"><span class="hljs-number">10</span></span>;<font></font>
	}<font></font>
	~bar() {};	<font></font>
<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> F1(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr2/a;<font></font>
	}<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> F2(<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> a)<font></font>
	{<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pr2*a;<font></font>
	}<font></font>
};<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, nimmt die Balkenklasse mehr Speicherplatz ein als foo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
14 Instanzen der Balkenklasse werden im Heap abgelegt und die Instanz der foo-Klasse passt nicht mehr:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">  
</span></span>{<font></font>
		foo *f;<font></font>
		bar *b[<span class="hljs-number"><span class="hljs-number">14</span></span>];<font></font>
<font></font>
                b[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">4</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">6</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar(); <font></font>
		b[<span class="hljs-number"><span class="hljs-number">7</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">8</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">9</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">10</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">11</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">12</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">13</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
<font></font>
f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> foo(); <font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie nur 7 Instanzen von Balken erstellen, wird foo auch normal erstellt:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">  
</span></span>{<font></font>
		foo *f;<font></font>
		bar *b[<span class="hljs-number"><span class="hljs-number">14</span></span>];<font></font>
<font></font>
               <span class="hljs-comment"><span class="hljs-comment">//b[0] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[2] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[4] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[6] = new bar(); </span></span>
		b[<span class="hljs-number"><span class="hljs-number">7</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[8] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">9</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[10] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">11</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();
		<span class="hljs-comment"><span class="hljs-comment">//b[12] = new bar();</span></span>
		b[<span class="hljs-number"><span class="hljs-number">13</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
<font></font>
f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> foo(); <font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie jedoch zuerst 14 Instanzen von Balken erstellen und dann 0,2,4,6,8,10 und 12 Instanzen löschen, kann foo aufgrund der Fragmentierung des Heaps keinen Speicher zuweisen:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">  
</span></span>{<font></font>
		foo *f;<font></font>
		bar *b[<span class="hljs-number"><span class="hljs-number">14</span></span>];<font></font>
<font></font>
               b[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">4</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">6</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar(); <font></font>
		b[<span class="hljs-number"><span class="hljs-number">7</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">8</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">9</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">10</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">11</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">12</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
		b[<span class="hljs-number"><span class="hljs-number">13</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bar();<font></font>
<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">0</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">2</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">4</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">6</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">8</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">10</span></span>];
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> b[<span class="hljs-number"><span class="hljs-number">12</span></span>];<font></font>
<font></font>
f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> foo(); <font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich heraus, dass Sie C ++ nicht vollständig nutzen können, und dies ist ein deutliches Minus. </font><font style="vertical-align: inherit;">Aus architektonischer Sicht ist C ++ zwar C überlegen, aber unbedeutend. </font><font style="vertical-align: inherit;">Infolgedessen bringt der Übergang zu C ++ keine signifikanten Vorteile (obwohl es auch keine großen negativen Punkte gibt). </font><font style="vertical-align: inherit;">Aufgrund eines kleinen Unterschieds bleibt die Wahl der Sprache einfach die persönliche Präferenz des Entwicklers. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber für mich selbst fand ich einen signifikanten positiven Punkt bei der Verwendung von C ++. </font><font style="vertical-align: inherit;">Tatsache ist, dass mit dem richtigen C ++ - Ansatz der Code für Mikrocontroller leicht mit Komponententests in Visual Studio abgedeckt werden kann.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein großes Plus von C ++ ist die Möglichkeit, Visual Studio zu verwenden.</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für mich persönlich war das Thema Codetests für Mikrocontroller schon immer recht komplex. Natürlich wurde der Code auf jede mögliche Weise überprüft, aber die Erstellung eines vollwertigen automatischen Testsystems war immer mit hohen Kosten verbunden, da ein Hardwareständer zusammengebaut und eine spezielle Firmware dafür geschrieben werden musste. Besonders wenn es um ein verteiltes IoT-System geht, das aus Hunderten von Geräten besteht.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich anfing, ein Projekt in C ++ zu schreiben, wollte ich sofort versuchen, den Code in Visual Studio einzufügen und Keil mVision nur zum Debuggen zu verwenden. Erstens ist es in Visual Studio, einem sehr leistungsfähigen und praktischen Code-Editor, und in Keil mVision überhaupt keine bequeme Integration in Versionskontrollsysteme, und in Visual Studio ist alles automatisch. Drittens hatte ich die Hoffnung, dass ich es schaffen könnte, zumindest einen Teil des Codes mit Unit-Tests abzudecken, die auch in Visual Studio gut unterstützt werden. Und viertens ist dies die Entstehung von Resharper C ++ - einer Visual Studio-Erweiterung für die Arbeit mit C ++ - Code, mit der Sie viele potenzielle Fehler im Voraus vermeiden und den Stil des Codes überwachen können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Projekts in Visual Studio und das Verbinden mit dem Versionskontrollsystem verursachte keine Probleme. Aber mit Unit-Tests musste man basteln.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von der Hardware abstrahierte Klassen (z. B. Protokollparser) waren leicht zu testen. </font><font style="vertical-align: inherit;">Aber ich wollte mehr! </font><font style="vertical-align: inherit;">In meinen Peripherieprojekten verwende ich Keil-Header-Dateien. </font><font style="vertical-align: inherit;">Für LPC11C24 ist es beispielsweise LPC11xx.h. </font><font style="vertical-align: inherit;">Diese Dateien beschreiben alle erforderlichen Register gemäß dem CMSIS-Standard. </font><font style="vertical-align: inherit;">Die direkte Definition eines bestimmten Registers erfolgt über #define:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LPC_I2C_BASE          (LPC_APB0_BASE + 0x00000)</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LPC_I2C               ((LPC_I2C_TypeDef    *) LPC_I2C_BASE   )</span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich heraus, dass der Code, der Peripheriegeräte verwendet, sehr gut in VisualStudio kompiliert werden kann, wenn Sie die Register korrekt überschreiben und einige Stubs erstellen. </font><font style="vertical-align: inherit;">Wenn Sie eine statische Klasse erstellen und ihre Felder als Registeradressen angeben, erhalten Sie nicht nur einen vollwertigen Mikrocontroller-Emulator, mit dem Sie auch die Arbeit mit Peripheriegeräten vollständig testen können:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LPC11xx.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LPC11C24Emulator</span></span></span><span class="hljs-class">
{</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
	<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registers</span></span></span><span class="hljs-class">
	{</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
		<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> LPC_ADC_TypeDef ADC;<font></font>
<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
		<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
		</span></span>{
			<span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;ADC, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(LPC_ADC_TypeDef));<font></font>
		}<font></font>
	};<font></font>
}<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> LPC_ADC</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LPC_ADC				((LPC_ADC_TypeDef *) &amp;LPC11C24Emulator::Registers::ADC)</span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dann mach das:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined ( _M_IX86 )</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"..\Emulator\LPC11C24Emulator.h"</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LPC11xx.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diese Weise können Sie den gesamten Projektcode für Mikrocontroller in VisualStudio mit minimalen Änderungen kompilieren und testen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während der Entwicklung eines Projekts in C ++ habe ich über 300 Tests geschrieben, die sowohl reine Hardwareaspekte als auch von der Hardware abstrahierten Code abdecken. </font><font style="vertical-align: inherit;">Gleichzeitig wurden im Voraus ungefähr 20 ziemlich schwerwiegende Fehler festgestellt, die aufgrund der Größe des Projekts ohne automatische Tests nicht leicht zu erkennen wären.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlussfolgerungen</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C ++ zu verwenden oder nicht zu verwenden, wenn mit Mikrocontrollern gearbeitet wird, ist eine ziemlich komplizierte Frage. Ich habe oben gezeigt, dass einerseits die architektonischen Vorteile eines vollwertigen OOP nicht so groß sind und die Unfähigkeit, vollständig mit einem Haufen zu arbeiten, ein ziemlich großes Problem ist. Angesichts dieser Aspekte gibt es keinen großen Unterschied zwischen C und C ++ für die Arbeit mit Mikrocontrollern. Die Wahl zwischen diesen kann durchaus durch die persönlichen Vorlieben des Entwicklers gerechtfertigt sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gelang mir jedoch, einen großen positiven Punkt bei der Verwendung von C ++ in der Arbeit mit Visaul Studio zu finden. Auf diese Weise können Sie die Zuverlässigkeit der Entwicklung aufgrund der vollständigen Arbeit mit Versionskontrollsystemen, der Verwendung vollständiger Komponententests (einschließlich Tests für die Arbeit mit Peripheriegeräten) und anderer Vorteile von Visual Studio erheblich erhöhen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich hoffe, dass meine Erfahrung nützlich ist und jemandem hilft, die Effektivität seiner Arbeit zu steigern. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Kommentaren zur englischen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dieses Artikels gab es nützliche Links zu diesem Thema:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meeting C ++ 2015 Lightning Talks: Odin Holmes - Abstraktion von Sonderfunktionsregistern </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.youtube.com/watch?v=AKAYc9ZFBhk</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treffen C ++ 2015: John Hinke - Tief eingebettetes C ++ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.youtube.com/watch?v=TYqbgvHfxjM</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treffen C ++ 2014: Wouter van Ooijen - Objekte? </font><font style="vertical-align: inherit;">Nein danke. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.youtube.com/watch?v=k8sRQMx2qUw</font></font></a></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de390837/">https://habr.com/ru/post/de390837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de390825/index.html">So wählen Sie einen Kommunikationsstandard für das IoT-Netzwerk</a></li>
<li><a href="../de390827/index.html">"Vorgewarnt - bewaffnet" oder was Sie über einen Schlaganfall wissen müssen, auch wenn Sie jung sind</a></li>
<li><a href="../de390829/index.html">Tim Cook bestätigt erneut die Festigkeit seiner Position, 51% der befragten Amerikaner unterstützen das FBI</a></li>
<li><a href="../de390833/index.html">Übersicht über die OCZ Trion 100 SSD</a></li>
<li><a href="../de390835/index.html">Opera Presto wurde auf Version 12.18 aktualisiert</a></li>
<li><a href="../de390841/index.html">Im Fall von Playpen-Kinderpornografie befahl ein Richter dem FBI, Tor-Hacking-Techniken aufzudecken</a></li>
<li><a href="../de390843/index.html">Projekt "Auge" Teil 16</a></li>
<li><a href="../de390845/index.html">Überprüfung der 8-Zoll "thermonuklearen" Tablette bb-mobile Topol 'LTE</a></li>
<li><a href="../de390849/index.html">US-Zollbeamte beginnen mit der Biometrie von Personen, die die US-Grenze zu Fuß überschreiten</a></li>
<li><a href="../de390851/index.html">Praktische Anwendung von ROS auf dem Raspberry Pi - Teil 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>