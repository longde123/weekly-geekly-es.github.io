<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏽 🙃 🌼 Capteur combiné, avec préférence et poètes 🏇🏿 ➿ 🙏🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au début, nous avons fabriqué un capteur de température et d'humidité pour les bureaux dans un magnifique boîtier mural avec une interface Modbus RS-4...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Capteur combiné, avec préférence et poètes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/423523/"><img src="https://habrastorage.org/getpro/habr/post_images/4fa/4f0/978/4fa4f09782c605501bc41ec58afd5c19.jpg" width="350" align="right">  Au début, nous avons fabriqué un capteur de température et d'humidité pour les bureaux dans un magnifique boîtier mural avec une interface Modbus RS-485, mais pendant ce temps, notre appétit a légèrement augmenté. <br><br>  En conséquence, les capteurs ont été placés dans un boîtier compact: <br>  - concentration de CO2, <br>  - température / humidité <br>  - éclairage <br>  - bruit <br>  - concentration de COV - «substances organiques volatiles (COV)» <br>  - mouvements <br><br>  Et aussi: <br>  - Émetteur IR (avec récepteur pour la formation) <br>  - et sait aussi grincer et cligner des "yeux" rouges / verts <br><a name="habracut"></a><br>  En conséquence, la quantité va dans la qualité.  L'installation d'un appareil dans une pièce couvre entièrement la tâche de surveillance et de gestion du climat intérieur.  Il est plus facile à installer et à configurer, et l'appareil lui-même est moins cher que quelques appareils séparés. <br><br><h2>  Comment avons-nous fait l'affaire </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/400/7fc/42a/4007fc42afc4165adbf61e5705e774f7.jpg"><br>  <i>De gauche à droite - le capteur dans le boîtier chinois, le premier prototype, un boîtier série.</i> <i><br></i> <br>  Nous fabriquons des capteurs muraux combinés pour les locaux résidentiels et de bureaux depuis plusieurs années.  Il y a eu de nombreuses révisions, plusieurs milliers d'exemplaires vendus, plusieurs implémentations majeures: vous avez peut-être vu un capteur dans le boîtier de gauche, par exemple, dans une chaîne de magasins ou dans les bureaux d'une grande banque. <br><br>  Naturellement, au début, nous avons utilisé un étui standard provenant des catalogues d'innombrables fabricants chinois d'étuis standard. <br><br>  Nous l'avons modifié nous-mêmes: trous fraisés, verres collés.  Cela s'est avéré assez bien et technologiquement, mais je le voulais mieux - plastique plus dur, loquets confortables, etc. Un des problèmes amusants: lorsque les clients accrochaient des capteurs bas sur les murs, les visiteurs confondaient parfois la lentille qui sortait avec un bouton et tentaient de «l'appuyer» .  Particulièrement fort s'est avéré comme ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y-/yy/si/y-yysistqwyuvr3zifcoibbdkm8.jpeg" width="500"></div><br><img src="https://habrastorage.org/getpro/habr/post_images/acf/9e0/6c9/acf9e06c9de44b1e468be20993508366.png" width="400" align="right"><br>  Lorsque nous avons commencé à construire notre propre bâtiment, nous nous sommes basés sur l'ancien standard: nous l'avons examiné et corrigé ce que nous n'aimions pas. <br><br>  Nous avons approfondi l'objectif, élargi les trous de montage, ajouté des fentes pour le câble, fait de petites pattes en bas, monté l'objectif sur les vis.  L'impression d'un prototype (modèle principal) a été réalisée sur une imprimante 3D (~ 15 000 roubles) + lot d'essai de moulage en silicone. <br><br>  Le modèle principal était de couleur noire, et dans l'ensemble, l'uniforme nous convenait, mais après avoir reçu un lot de tests de cas blancs, nous avons été attristés - cela s'est avéré pire que l'original chinois.  Le principe du «slim noir, gras blanc» est vrai non seulement pour les robes.  Ce n'est pas très visible sur la photo, mais, malgré l'égalité formelle des dimensions, le nouveau boîtier avait l'air beaucoup plus épais.  En raison des angles lisses, des renflements autour de l'objectif. <br><br><img src="https://habrastorage.org/webt/go/9f/0q/go9f0qyqlg5kk4oecspyt03naxk.jpeg"><br><br>  Et le rétrécissement des murs vers le bas du boîtier chinois donne un effet intéressant - lorsque le boîtier est suspendu au mur et que vous le regardez légèrement, vous ne pouvez voir que la partie droite du mur latéral et il semble que le boîtier soit deux fois plus mince. <br><br>  Par conséquent, la version suivante a été sous-estimée avec le zèle du Daghestan - et reposait en fait contre l'épaisseur du capteur de CO2.  Nous avons également ajouté une découpe latérale pour le canal de câble 10 * 15 mm - maintenant le bord tordu du canal de câble est couvert par le boîtier lui-même. <br><br>  Le résultat était le suivant: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/495/c4e/65c/495c4e65cfab0cfad706b26bb8131839.jpg"><br><br>  Faites attention aux petites choses: il y a des «lunettes» autour des trous de montage pour protéger la carte du tournevis de l'installateur;  les trous technologiques sous les loquets fonctionnent comme des fenêtres pour les LED d'état;  le loquet n'est qu'un, mais tellement encastré que vous ne pouvez pas appuyer dessus avec un doigt. <br><br>  Nous avons fait une petite erreur avec les loquets - à cause des tolérances, ils se sont avérés être légèrement plus épais que les trous pour eux, vous devez modifier doucement le fichier, mais ce n'est que 10-20 secondes par cas. <br><br>  Le moule et la coulée ont été réalisés en Chine.  aux prix, il s'est avéré seulement ~ 2500 $ pour un moule et ~ 600 $ pour la coulée de 1000 pièces.  Mais il y avait beaucoup plus de travail sur la conception du boîtier :).  Beaucoup de temps et d'argent ont été dépensés pour le prototypage, mais davantage en raison des raisons de leur négligence.  Et la coulée de silicone s'est avérée être une étape supplémentaire - la précision de la coulée ne permettait toujours pas de remarquer l'absence d'écarts sur les tolérances aux endroits des verrous, et le principe général et l'apparence peuvent également être compris par le modèle d'une imprimante 3D photopolymère, s'il est peint de la bonne couleur. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b5/a99/c41/8b5a99c41b3437d9d85cb9aa4b4e6d3a.jpg" width="350" align="right"><br><h2>  Ils nous ont parlé du bâtiment, mais qu'en est-il de l'intérieur? </h2><br>  Et il y a un tableau vert!  Une partie des capteurs sous forme de modules séparés (TH, COV, CO2), le reste sur la carte. <br><br>  En bref sur les capteurs: <br><br><h3>  Capteurs de CO2 </h3><br>  - célèbre Winsen MH-Z19B.  Ils travaillent sur la technologie NDIR ( <i>capteur infrarouge</i> non dispersif, analyseur infrarouge non dispersif) - c'est-à-dire que la lumière d'une certaine longueur d'onde est entraînée à travers la chambre avec du gaz, et une diminution de son intensité est mesurée. <br><br>  Plus il y a de dioxyde de carbone dans l'air, plus la lumière s'estompe.  Cette technologie est supérieure aux capteurs électrochimiques, y compris sa haute sélectivité (c'est-à-dire une réaction spécifique au dioxyde de carbone, et non à d'autres similaires (par exemple, le CO - monoxyde de carbone). <br><br>  La concentration de dioxyde de carbone en soi est un paramètre important qui affecte directement les performances humaines ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://ehp.niehs.nih.gov/doi/10.1289/ehp.1510037</a> ) La concentration de CO2 dans la rue est de 400 ppm, un bon niveau pour une utilisation en intérieur peut atteindre 600 ppm, à une concentration de 1000 ppm (ce qui est facilement réalisable, par exemple, en rencontrant les fenêtres fermées), la dégradation des performances est perceptible sans études spéciales.  Une augmentation du niveau de CO2 signale que la pièce doit être ventilée - et non seulement pour abaisser la concentration de dioxyde de carbone, mais aussi pour nettoyer la pièce des bactéries - par exemple, provoquant des rhumes. <br><br><h3>  Capteur de température / humidité </h3><br>  - nous mettons un capteur numérique combiné T + RH avec étalonnage individuel.  Il y a eu une expérience négative avec les capteurs chinois AOSONG AM2320 - après un certain temps (1-2 ans) ~ 20% du parti a commencé à sous-estimer les lectures.  Encore plus tôt, ils ont trouvé une grande dispersion entre les différents lots, ce qui indique indirectement que les lots sont au mieux rejetés par le fabricant, mais non calibrés. <br><br>  La puce est fermée dans un «sandwich» composé de cartes de circuits imprimés afin de protéger davantage l'élément sensible du capteur de la poussière, des gouttes d'eau et des doigts de l'installateur. <br><br><h3>  Capteur de COV </h3><br>  Le nouveau capteur de gaz multi-pixels SGPC3 de Sensirion pour mesurer la qualité de l'air.  Le capteur lui-même est généralement à la pointe du développement, de la technologie MEMS, de la faible consommation, de la compacité, de la stabilité des lectures et de nombreux autres beaux mots. <br><br>  Qu'est-ce que la qualité de l'air?  Que mesure-t-on du tout?  Le capteur réagit aux gaz organiques.  C'est l'évaporation des vernis / peintures, des alcools, des légumes pourris, des gaz émis par l'homme, qui détecte également les fuites de gaz domestique.  Il complète, mais n'exclut pas, un capteur de CO2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c43/999/453/c43999453a3fe79d9b647db5597d25dc.jpg" width="600"></div><br><br>  Le capteur est recouvert d'un film perméable aux gaz (à gauche).  Le capteur avec le film retiré vers la droite.  Et à l'intérieur il y a une telle beauté: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a04/a3e/b59/a04a3eb59807e7c35802256cc83f0fc9.jpg"><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/449/886/434/44988643423dbef60aa2bbd7d104e579.jpg" width="400"></div><br>  Vous pouvez voir que les fils du réchauffeur en spirale du substrat conviennent de droite à gauche, et 4 fils en haut et en bas du fil.  Mais ce n'est pas exact. <br><br><h3>  Capteur de lumière </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/a79/115/8ba/a791158baa6ea6be344bcfb35d05ed03.jpg" width="350" align="right"><br>  - Avancé, avec un filtre qui répète la courbe de sensibilité spectrale de l'œil humain.  Par conséquent, il a une bonne précision et mesure de véritables suites, pas des perroquets. <br><br>  L'effet est particulièrement visible lorsque l'on compare les lectures de notre capteur avec les appareils concurrents, où il y a une photodiode régulière, dans différentes conditions d'éclairage: lumière du jour, lampes à incandescence, lampes LED bon marché et coûteuses. <br><br>  Pourquoi avons-nous besoin d'un capteur de lumière?  Commande d'éclairage, volets roulants.  Comme les suites sont réelles, les valeurs de seuil peuvent être définies non pas «à l'œil nu», mais selon les normes de SanPiN. <br><br><h3>  Détecteur de mouvement </h3><br>  - basé sur le capteur PIR D203S.  La sensibilité et l'angle de vision ne sont pas les plus remarquables (120 °, jusqu'à 10 m), mais ils suffisent largement pour travailler en intérieur. <br><br>  Il est transmis non seulement un signal est un mouvement / pas de mouvement, mais une certaine "quantité" de mouvement chez les perroquets.  Cela vous permet de programmer dans le système de règles pour répondre différemment à différents seuils. <br><br><h3>  Capteur de bruit </h3><br>  - Un microphone avec un amplificateur et des filtres de correction sur une échelle A, prenant en compte les particularités de la perception par l'oreille humaine de sons de fréquences différentes.  Il peut être utilisé en complément d'un capteur de mouvement. <br><br>  Vous pouvez réduire le volume du téléviseur si l'heure est plus tardive et que les enfants sont emportés en regardant un film d'action.  Ou couine fort si les poétesses lisent trop leur poésie :) <br><br>  Cependant, pour la plupart des clients, les applications sont plus «ennuyeuses»: surveiller la conformité au SanPiN;  donnent parfois des informations supplémentaires sur le fonctionnement des unités bruyantes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e36/495/7bc/e364957bc7dab7e5606e7632f99e46a5.png"><br>  <i>Sur la photo: le bruit dans la chambre et le fonctionnement du MSC (c'est un très grand réfrigérateur) à l'épicerie.</i> <br><br><h3>  Télécommandes à émulation IR pour la technologie </h3><br>  Dans le nouveau WB-MSW, un récepteur IR pour l'entraînement et 8 LED IR sont cachés sous l'objectif.  Leur puissance est suffisante pour "couvrir" le signal d'une grande pièce. <br><br>  La formation est effectuée une seule fois - les commandes sont stockées dans la mémoire de l'appareil et peuvent être lues par la commande Modbus du contrôleur.  Le nombre de commandes mémorisées est suffisamment important (jusqu'à des centaines, selon le modèle de la télécommande) pour contrôler tous les appareils dans la pièce à la fois: TV, climatisation, récepteur, lecteur, projecteur - l'essentiel est que les récepteurs IR des appareils «voient» l'émetteur. <br><br>  Compte tenu des recommandations pour placer les capteurs de température, d'humidité et de dioxyde de carbone à environ la hauteur de la croissance humaine, cela sera facile à fournir.  La puissance de l'émetteur est suffisante pour que les appareils contrôlés reçoivent non seulement un signal direct, mais aussi un signal réfléchi. <br><br>  Dans les locaux non résidentiels, l'IR peut contrôler les climatiseurs (presque tous ont une fenêtre de récepteur IR, et le contrôle IR coûte plusieurs fois moins cher que les interfaces «natives») et les rideaux thermiques.  Naturellement, WB-MSW ne convient que si tous les appareils dans le domaine de la visibilité doivent être commandés de manière synchrone: une télécommande ne pourra pas mettre de modes différents sur deux climatiseurs différents.  Pour le contrôle individuel de chaque climatiseur, le «petit frère» du capteur convient - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WB-MIR</a> . <br><br><h3>  Indication </h3><img src="https://habrastorage.org/webt/xy/qq/so/xyqqso5ufezxdnh6rdilbgardr4.gif" width="300" align="right"><br><br>  Le capteur peut émettre un bip à haute voix et clignoter de différentes couleurs. <br><br>  Les commandes Modbus spécifient la période et la durée des «flashs» des LED: en effet, la fréquence et la luminosité du clignotement peuvent être modifiées. <br><br>  Sur les LED, vous pouvez faire des commentaires pour l'utilisateur, par exemple, clignoter en rouge à un niveau élevé de CO2.  Et c'est également pratique lorsque vous installez de nombreux capteurs identiques dans une grande pièce: vous pouvez allumer à distance, par exemple, un siffleur et trouver le bon. <br><br><h3>  Total </h3>  Ainsi, le capteur combiné est une source sérieuse de données pour l'automatisation de la pièce.  Avec son aide, un script avancé sur le contrôleur peut offrir un séjour confortable aux personnes. <br><br><ol><li>  Conditions de température et d'humidité et qualité de l'air: contrôle de la ventilation et de l'humidification de l'alimentation, contrôle des têtes de radiateurs de chauffage, climatisation, entraînements d'ouverture / fermeture des fenêtres, rideaux automatiques (température, humidité, dioxyde de carbone, COV) </li><li>  Fonctions de sécurité: notification des mouvements et du son (microphone, capteur de mouvement). </li><li>  Mise en place de scénarios: contrôle de l'éclairage, rideaux automatiques, musique d'ambiance, activation / désactivation de la vidéo programmée, réveil confortable, éclairage circadien (capteur de lumière, microphone). </li><li>  Attention aux situations d'urgence (squeaker, LED de signalisation) </li><li>  Économie d'énergie: présence / absence de personnes dans la pièce (détecteur de mouvement, microphone, capteur de CO2). </li></ol><br><h3>  Je veux déjà acheter </h3><br>  Les testeurs heureux ont déjà des échantillons du nouveau modèle; le premier lot de production était en production.  Comme d'habitude, mille et une pièces peuvent être commandées <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur notre site Internet</a> . <br>  Nous nous préparons pour le lot de nouveaux MSW v.  3 et libérer de l'espace sur l'étagère: ancien («mature», «éprouvé») WB-MSW v.  2 vendus avec une remise de ~ 30%. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423523/">https://habr.com/ru/post/fr423523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423511/index.html">Interception de l'installation de Firefox et Chrome sur Windows 10</a></li>
<li><a href="../fr423513/index.html">Nous économisons sur un contrôleur RAID, ou comment nourrir Varia avec Iops</a></li>
<li><a href="../fr423515/index.html">Est-ce que DRY est bon ou peut-il casser O de SOLID</a></li>
<li><a href="../fr423519/index.html">Monstre errant: comment se débarrasser des problèmes sur la carte</a></li>
<li><a href="../fr423521/index.html">Sept règles de base pour expérimenter avec des sites Web</a></li>
<li><a href="../fr423527/index.html">Les applications pour enfants collectent massivement des données personnelles et les transmettent à des tiers</a></li>
<li><a href="../fr423529/index.html">De quoi toute l'équipe a-t-elle besoin pour travailler? Comment faire glisser tout le monde dans le système de gestion de projet?</a></li>
<li><a href="../fr423531/index.html">Évolution de l'architecture mobile de Reddit</a></li>
<li><a href="../fr423533/index.html">FAQ pour les vols interurbains en bus de passagers</a></li>
<li><a href="../fr423535/index.html">Pourquoi les poubelles accèdent-elles à Internet?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>