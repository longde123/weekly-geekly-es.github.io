<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïõ üñ•Ô∏è üë©üèº‚Äçüè´ Aktualisieren Sie Ihre Releases üë®üèΩ‚Äç‚úàÔ∏è üòΩ üèáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Henry Ford hat einmal gesagt: "Das beste Auto ist ein neues Auto." Deshalb denken wir in der Tinkoff-Unternehmensgruppe √ºber Software-Releases nach. D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aktualisieren Sie Ihre Releases</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472434/"><p><img src="https://habrastorage.org/webt/gk/69/t-/gk69t-xi2-9rxwwn8xmp_gz1lo0.png"></p><br><p>  Henry Ford hat einmal gesagt: "Das beste Auto ist ein neues Auto."  Deshalb denken wir in der Tinkoff-Unternehmensgruppe √ºber Software-Releases nach.  Die Tr√§gheit bei der Bereitstellung von Funktionen und dringenden Korrekturen f√ºhrt fr√ºher oder sp√§ter zu einer hohen technischen Verschuldung des Kunden und endet meistens mit einer Stagnation des gesamten Projekts. </p><br><p>  Es ist keine leichte Aufgabe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, einen</a> Indikator f√ºr eine hohe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Markteinf√ºhrungszeit</a> bei gleichbleibender Qualit√§t zu gew√§hrleisten.  Aus meiner Sicht k√∂nnen Sie nicht sofort Schienen bauen, auf denen √Ñnderungen viele Monate nach dem Start schnell und bequem geliefert werden k√∂nnen.  Das Wachstum eines Projekts geht normalerweise mit einer Zunahme der Anzahl der Personen einher, die daran arbeiten. Dies bedeutet, dass es in Ihren Ver√∂ffentlichungen zu einer potenziellen Chaosquelle kommt. </p><br><p>  Unsere Erfahrung ist kaum als Anleitung f√ºr den Erfolg zu betrachten, aber eine Reihe von Ideen schien mir interessant genug, um sie mit Ihnen zu teilen.  Fangen wir an. </p><a name="habracut"></a><br><p>  Der Ausgangspunkt unserer Geschichte ist technisch wie folgt.  Das System besteht aus mehreren Diensten, deren Codebasis von etwa 30 Personen durchsucht wird - mehreren Teams, die nach Gesch√§ftsbereichen unterteilt sind, z. B. zur Betreuung von Einzelpersonen und juristischen Personen.  Ich werde versuchen, die technischen und architektonischen Details des Projekts zu ignorieren, um mich auf den Ver√∂ffentlichungsprozess selbst zu konzentrieren. </p><br><p>  Wir arbeiten an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gitflow</a> , daher wird der Artikel in erster Linie f√ºr diejenigen interessant sein, die sich f√ºr diese bestimmte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Versandmethode</a> entschieden haben. </p><br><h3 id="problemy">  Die Probleme </h3><br><p>  Das erste Problem, auf das wir gesto√üen sind, h√§ngt mit einer <strong>unzureichenden Automatisierung von Prozessen zusammen</strong> .  Die Implementierung aller Release-Aktivit√§ten in unserem Team ist an die Rolle des Release Managers (RM) gebunden. </p><br><p>  Hier sind einige davon: </p><br><ol><li>  Release-Zweige verlassen und Tags erstellen. </li><li>  Mit dem Meister verschmelzen und Zweige entwickeln. </li><li>  Erstellen und Bereitstellen von Artefakten, die in der Version enthalten sind. </li><li>  Kommunikation mit am Prozess beteiligten Spezialisten - zum Beispiel mit QS oder Administratoren. </li></ol><br><p>  Diese Routineaufgaben erfordern mit der Erweiterung des Projekts immer mehr Ressourcen (in unserem Fall eine Erh√∂hung der Anzahl der Services). Der erste Schritt besteht also darin, alles zu automatisieren, was automatisiert werden kann.  Wir integrieren uns in das CI / CD-Tool, um Release-Zweige zuzuweisen und zusammenzuf√ºhren, Testbuilds zu starten und Artefakte bereitzustellen.  Mit dem Task-Tracking-Tool und dem Corporate Messenger k√∂nnen Sie den f√ºr den n√§chsten Schritt verantwortlichen Teilnehmer rechtzeitig benachrichtigen. √Ñndern Sie beispielsweise den Status der Aufgabe und konfigurieren Sie den Hook zum Senden einer Benachrichtigung. </p><br><div class="spoiler">  <b class="spoiler_title">Gitflow-Automatisierungsjobs</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5j/d9/jj/5jd9jjsprv33w-m1my1mahamqam.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Ein Beispiel f√ºr eine Benachrichtigung in einem Messenger</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ui/cs/0v/uics0vc4rqqacwoi3ax1nq029oi.png"></p></div></div><br><p>  Der Release-Manager muss potenzielle Konflikte, die sich aus dem Zusammenf√ºhren von Zweigen ergeben, weiterhin manuell l√∂sen. Schnelle und h√§ufige Releases sollten jedoch deren Anzahl auf Null reduzieren. </p><br><p>  Das n√§chste Problem ist das <strong>Testen</strong> . </p><br><p>  Eines der Build-Kriterien f√ºr uns ist die erfolgreiche Durchf√ºhrung der Tests.  Es ist √ºblich, Tests in mindestens zwei Typen zu unterteilen: Einheit und Integration. </p><br><p>  <strong>Mit Unit-Tests</strong> k√∂nnen Sie die Richtigkeit der einzelnen Module des Quellcodes des Programms √ºberpr√ºfen. In der Praxis kommt es meistens darauf an, eine oder mehrere Methoden zu √ºberpr√ºfen, die eine offensichtliche logische Verbindung haben. </p><br><p>  <strong>Integrationstests √ºberpr√ºfen</strong> normalerweise die Funktionsf√§higkeit einer ganzen Kaskade solcher Module, dh die Funktionsweise eines gesamten Features auf der Clientseite.  Wenn beispielsweise eine Restschnittstelle in einer Aufgabe implementiert wurde, √ºberpr√ºfen wir die Funktionsf√§higkeit der Autorisierung, die Deserialisierung der Anforderung selbst, die G√ºltigkeit der √ºbertragenen Felder, die Integration mit anderen Diensten und Datenbanken sowie die Gesch√§ftslogik selbst.  Auf den ersten Blick scheinen solche Tests sehr autark zu sein und alle potenziellen Problembereiche abzudecken.  Es ist nicht erforderlich zu verstehen, wie jeder einzelne Baustein funktioniert, und die aufgerufene Schnittstelle kapselt die gesamte Logik, um eine einfache Antwort auf die Ausgabe zu erhalten: ob sie funktioniert oder nicht. </p><br><p>  Tats√§chlich verursachen sie eine Reihe von verz√∂gerten Problemen, hier einige davon: </p><br><ol><li>  Die Teilnahme einer gro√üen Anzahl getesteter Komponenten wirkt sich proportional auf die Montagezeit und die Durchf√ºhrung solcher Tests aus. </li><li>  Das Einkapseln der Testlogik f√ºhrt h√§ufig dazu, dass es schwierig ist, die Richtigkeit des Testergebnisses zu gew√§hrleisten.  Oft passen wir den Test an das Ergebnis an, und noch h√§ufiger entspricht das Ergebnis aufgrund zuf√§lliger Nebenwirkungen den Erwartungen. </li><li>  Die Relevanz von Testdaten geht verloren. </li><li>  Integrationen mit Systemen von Drittanbietern, insbesondere in Testumgebungen, fallen h√§ufig aus.  Dies negiert die Zeit, die f√ºr das Laufen aufgewendet wird, da dies nicht immer offensichtlich ist: Dies ist ein vor√ºbergehender Ausfall oder Ausfall, der durch unsere √Ñnderungen verursacht wird. </li></ol><br><p>  F√ºr die meisten Probleme wurde bereits eine L√∂sung gefunden.  Wie √ºblich kommen L√∂sungen jedoch nicht ohne zus√§tzliche Einschr√§nkungen oder neue Probleme. </p><br><p>  Die richtigen Tests f√ºr Sie auszuw√§hlen und richtig umzusetzen, ist eine sehr schwierige Aufgabe.  Dar√ºber hinaus ist es wichtig, ein Gleichgewicht zwischen Coverage-Qualit√§t und Build-Geschwindigkeit herzustellen, um Ihre Releases zu optimieren. </p><br><p>  In unserem Fall haben wir uns f√ºr einen Hybrid entschieden.  Wir erh√∂hen weiterhin alle erforderlichen Komponenten f√ºr einen vollst√§ndigen Funktionstest und waschen gleichzeitig alle m√∂glichen Integrationen.  Um die API-Vertr√§ge zu speichern, verwenden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pact</a> und √ºberpr√ºfen die Integration in die Datenbank - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testcontainer</a> . </p><br><p>  Ein solcher Ansatz zum Schreiben von Tests f√ºhrte zu einer L√∂sung des dritten Problems - einer <strong>langen Zeit f√ºr das manuelle Testen einer Aufgabe</strong> .  Die Stabilit√§t von Hybridtests hat zu der Idee gef√ºhrt, einen QS-Ingenieur in der Phase der Festlegung der Aufgabe f√ºr die Erstellung von Testf√§llen zu gewinnen. Dadurch k√∂nnen sie in der Phase der manuellen Tests √ºbersprungen werden.  Die Integration mit n√ºtzlichen Produkten wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TestRail</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allure</a> ist zu einer Art Br√ºcke zwischen Entwickler und Tester geworden.  Es wird ein Vertrag erstellt, dessen Ausf√ºhrung Schritt f√ºr Schritt in dem w√§hrend der Testmontage erstellten Bericht wiedergegeben wird. </p><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Test Build Details</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nk/wv/kc/nkwvkcxtmk1j_sxutjmni2rganu.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Vom Entwickler implementierte Testf√§lle</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ha/oh/5r/haoh5rijpl5xjg6arorfgwdnkzi.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Auto Test Build Report</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/1f/w2/cy/1fw2cyotmhbopjohdm47y7spkaq.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Informationen zu jedem laufenden Test und schrittweise Detaillierung der Ausf√ºhrung</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/g_/q-/os/g_q-osvljwhuecjhtkta1avthwk.png"></p></div></div><br><p>  Es bleibt √ºbrig, Berichte mit Ihrem Aufgabenverfolgungstool zu verbinden, um eine transparente Aufgabenverfolgung zu gew√§hrleisten.  Eine klare Geschichte reduziert auch die Zeit, die zum Kompilieren und Implementieren von Tests f√ºr zuk√ºnftige Aufgaben ben√∂tigt wird. </p><br><div class="spoiler">  <b class="spoiler_title">Jira.</b>  <b class="spoiler_title">Testf√§lle, die automatisch an die Aufgabe angeh√§ngt werden</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/66/dv/fr66dvaumtfhdc56iw5tnezg4vk.png"></p></div></div><br><p>  Auf diese Weise sparen QS-Ingenieure genug Zeit, um sich auf das Testen von Ausnahmef√§llen und die Integration in andere Systeme zu konzentrieren. </p><br><p>  Das letzte Problem h√§ngt damit zusammen.  Beim manuellen Testen werden alle Aufgaben aus den Feature-Zweigen zusammengef√ºhrt, um eine Bereitstellung auf dem Pr√ºfstand zu entwickeln und zu starten. </p><br><p>  Erstens k√∂nnen Sie bei diesem Ansatz nicht √ºber das reine Testen der Funktion sprechen, da parallel dazu die damit verbundenen √Ñnderungen anderer Entwickler in die Entwicklung fallen k√∂nnen. </p><br><p>  Zweitens kann sich beim Freigeben des Release-Zweigs herausstellen, dass die Qualit√§tssicherung keine Zeit hatte, einige der Aufgaben zu testen.  Sie haben die Wahl: Setzen Sie die von diesen Aufgaben betroffenen √Ñnderungen zur√ºck oder verlangsamen Sie die Freigabe bis zum Ende des Tests. </p><br><p>  Sie m√ºssen die ganze Zeit eine solche Wahl treffen, es sei denn, Sie <strong>isolieren Ihre Testumgebung</strong> .  Es ist wichtig, dass an der zu testenden Komponente keine anderen als die von der Aufgabe vorgenommenen √Ñnderungen vorgenommen werden.  In unserem Fall m√ºssen wir in der Lage sein, einen oder mehrere Dienste aufzunehmen, deren Zweige √Ñnderungen erfahren haben, und das Routing innerhalb des Clusters zu verwalten, indem nur die von der Qualit√§tssicherung ben√∂tigten Anforderungen an diese Instanzen gesendet werden.  Die Aufgabe ist kompliziert, wenn im Cluster bereits Ausgleichsmechanismen verwendet werden, die ebenfalls ber√ºcksichtigt werden m√ºssen. </p><br><p>  Nachdem wir diese Gelegenheit erkannt hatten, begannen wir, manuelle Tests direkt in separaten Feature-Zweigen durchzuf√ºhren: Stellen Sie den erforderlichen Service f√ºr die Dauer des Tests bereit und integrieren Sie ihn isoliert in die Gesamtumgebung.  Durch das Zusammenf√ºhren nur vorgefertigter Aufgaben in den Entwicklungszweig und das Entfernen von Sperren haben wir selbst festgelegt, welche √Ñnderungen in die Version aufgenommen werden sollen und welche nicht. </p><br><p>  Es ist erw√§hnenswert, dass eine solche L√∂sung f√ºr Teams, die √Ñnderungen an fast denselben Dateien vornehmen, wahrscheinlich nicht zu einer Silberkugel wird.  In diesem Fall ist die Speicherung von Features umgekehrt proportional zur Anzahl der Konflikte, die w√§hrend der Fusion auftreten.  In der Praxis kommt dies bei relativ h√§ufigen Ver√∂ffentlichungen in einem Team mit f√ºnfzig Entwicklern √§u√üerst selten vor. </p><br><h3 id="vmesto-vyvoda">  Anstelle von Ausgabe </h3><br><p>  Zusammenfassend k√∂nnen wir die wichtigsten Ans√§tze identifizieren, die bei der Beschleunigung von Releases helfen k√∂nnen: </p><br><ol><li>  Automatisierung von Routineoperationen. </li><li>  Transparenz der Prozesse f√ºr alle Beteiligten. </li><li>  Das notwendige Gleichgewicht zwischen Geschwindigkeit und Qualit√§t beim Schreiben automatisierter Tests. </li><li>  Reduzierte Zeit f√ºr manuelle Tests. </li><li>  Isolierung der Umgebung zum Testen. </li></ol><br><p>  Es ist wichtig zu verstehen, dass es sich bei der Auswahl verschiedener Ans√§tze, Prinzipien und Strategien immer lohnt, vom Kontext Ihres Problems auszugehen.  Es gibt viele ebenso zuverl√§ssige und ausgefeiltere M√∂glichkeiten, um die Lieferung Ihrer Software an den Kunden zu beschleunigen.  Der Versuch, auf neu auftretende Schwierigkeiten zu reagieren, hat zu den oben beschriebenen Schlussfolgerungen gef√ºhrt.  F√ºr uns waren sie der erste Schritt in Richtung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eines mutigeren Ansatzes zur Ver√∂ffentlichung von Ver√∂ffentlichungen</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472434/">https://habr.com/ru/post/de472434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472422/index.html">Sber X RamblerFront & Meet Up</a></li>
<li><a href="../de472426/index.html">Sicherheitswoche 43: Das geheime Leben der IoT Hanipots</a></li>
<li><a href="../de472428/index.html">Tarantool kubernetes Betreiber</a></li>
<li><a href="../de472430/index.html">Wie wir die Komponentenbasis f√ºr ein Smart Home ausgew√§hlt haben: √ºber Sensoren und eine Steuerung</a></li>
<li><a href="../de472432/index.html">Python 3.8: Was ist neu und wie wird es verwendet?</a></li>
<li><a href="../de472438/index.html">Verwendung von Proxys in der Informationssicherheit: 6 praktische Anwendungsf√§lle</a></li>
<li><a href="../de472440/index.html">Ein Tag bei Joker 2019</a></li>
<li><a href="../de472442/index.html">Die Situation: Alle reden √ºber die R√ºckkehr vergessener Audioformate - warum sie dazu bestimmt sind, eine Nische zu bleiben</a></li>
<li><a href="../de472444/index.html">Die besten Produkte gehen von echten Problemen aus: Gegensprechanlage √ºber zu erledigende Jobs. Teil 3 endg√ºltig</a></li>
<li><a href="../de472446/index.html">Wie man den Code auf "Habr√©" richtig f√§rbt und warum es so schwierig ist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>