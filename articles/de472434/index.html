<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕛 🖥️ 👩🏼‍🏫 Aktualisieren Sie Ihre Releases 👨🏽‍✈️ 😽 🏇🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Henry Ford hat einmal gesagt: "Das beste Auto ist ein neues Auto." Deshalb denken wir in der Tinkoff-Unternehmensgruppe über Software-Releases nach. D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aktualisieren Sie Ihre Releases</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472434/"><p><img src="https://habrastorage.org/webt/gk/69/t-/gk69t-xi2-9rxwwn8xmp_gz1lo0.png"></p><br><p>  Henry Ford hat einmal gesagt: "Das beste Auto ist ein neues Auto."  Deshalb denken wir in der Tinkoff-Unternehmensgruppe über Software-Releases nach.  Die Trägheit bei der Bereitstellung von Funktionen und dringenden Korrekturen führt früher oder später zu einer hohen technischen Verschuldung des Kunden und endet meistens mit einer Stagnation des gesamten Projekts. </p><br><p>  Es ist keine leichte Aufgabe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, einen</a> Indikator für eine hohe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Markteinführungszeit</a> bei gleichbleibender Qualität zu gewährleisten.  Aus meiner Sicht können Sie nicht sofort Schienen bauen, auf denen Änderungen viele Monate nach dem Start schnell und bequem geliefert werden können.  Das Wachstum eines Projekts geht normalerweise mit einer Zunahme der Anzahl der Personen einher, die daran arbeiten. Dies bedeutet, dass es in Ihren Veröffentlichungen zu einer potenziellen Chaosquelle kommt. </p><br><p>  Unsere Erfahrung ist kaum als Anleitung für den Erfolg zu betrachten, aber eine Reihe von Ideen schien mir interessant genug, um sie mit Ihnen zu teilen.  Fangen wir an. </p><a name="habracut"></a><br><p>  Der Ausgangspunkt unserer Geschichte ist technisch wie folgt.  Das System besteht aus mehreren Diensten, deren Codebasis von etwa 30 Personen durchsucht wird - mehreren Teams, die nach Geschäftsbereichen unterteilt sind, z. B. zur Betreuung von Einzelpersonen und juristischen Personen.  Ich werde versuchen, die technischen und architektonischen Details des Projekts zu ignorieren, um mich auf den Veröffentlichungsprozess selbst zu konzentrieren. </p><br><p>  Wir arbeiten an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gitflow</a> , daher wird der Artikel in erster Linie für diejenigen interessant sein, die sich für diese bestimmte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Versandmethode</a> entschieden haben. </p><br><h3 id="problemy">  Die Probleme </h3><br><p>  Das erste Problem, auf das wir gestoßen sind, hängt mit einer <strong>unzureichenden Automatisierung von Prozessen zusammen</strong> .  Die Implementierung aller Release-Aktivitäten in unserem Team ist an die Rolle des Release Managers (RM) gebunden. </p><br><p>  Hier sind einige davon: </p><br><ol><li>  Release-Zweige verlassen und Tags erstellen. </li><li>  Mit dem Meister verschmelzen und Zweige entwickeln. </li><li>  Erstellen und Bereitstellen von Artefakten, die in der Version enthalten sind. </li><li>  Kommunikation mit am Prozess beteiligten Spezialisten - zum Beispiel mit QS oder Administratoren. </li></ol><br><p>  Diese Routineaufgaben erfordern mit der Erweiterung des Projekts immer mehr Ressourcen (in unserem Fall eine Erhöhung der Anzahl der Services). Der erste Schritt besteht also darin, alles zu automatisieren, was automatisiert werden kann.  Wir integrieren uns in das CI / CD-Tool, um Release-Zweige zuzuweisen und zusammenzuführen, Testbuilds zu starten und Artefakte bereitzustellen.  Mit dem Task-Tracking-Tool und dem Corporate Messenger können Sie den für den nächsten Schritt verantwortlichen Teilnehmer rechtzeitig benachrichtigen. Ändern Sie beispielsweise den Status der Aufgabe und konfigurieren Sie den Hook zum Senden einer Benachrichtigung. </p><br><div class="spoiler">  <b class="spoiler_title">Gitflow-Automatisierungsjobs</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5j/d9/jj/5jd9jjsprv33w-m1my1mahamqam.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Ein Beispiel für eine Benachrichtigung in einem Messenger</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ui/cs/0v/uics0vc4rqqacwoi3ax1nq029oi.png"></p></div></div><br><p>  Der Release-Manager muss potenzielle Konflikte, die sich aus dem Zusammenführen von Zweigen ergeben, weiterhin manuell lösen. Schnelle und häufige Releases sollten jedoch deren Anzahl auf Null reduzieren. </p><br><p>  Das nächste Problem ist das <strong>Testen</strong> . </p><br><p>  Eines der Build-Kriterien für uns ist die erfolgreiche Durchführung der Tests.  Es ist üblich, Tests in mindestens zwei Typen zu unterteilen: Einheit und Integration. </p><br><p>  <strong>Mit Unit-Tests</strong> können Sie die Richtigkeit der einzelnen Module des Quellcodes des Programms überprüfen. In der Praxis kommt es meistens darauf an, eine oder mehrere Methoden zu überprüfen, die eine offensichtliche logische Verbindung haben. </p><br><p>  <strong>Integrationstests überprüfen</strong> normalerweise die Funktionsfähigkeit einer ganzen Kaskade solcher Module, dh die Funktionsweise eines gesamten Features auf der Clientseite.  Wenn beispielsweise eine Restschnittstelle in einer Aufgabe implementiert wurde, überprüfen wir die Funktionsfähigkeit der Autorisierung, die Deserialisierung der Anforderung selbst, die Gültigkeit der übertragenen Felder, die Integration mit anderen Diensten und Datenbanken sowie die Geschäftslogik selbst.  Auf den ersten Blick scheinen solche Tests sehr autark zu sein und alle potenziellen Problembereiche abzudecken.  Es ist nicht erforderlich zu verstehen, wie jeder einzelne Baustein funktioniert, und die aufgerufene Schnittstelle kapselt die gesamte Logik, um eine einfache Antwort auf die Ausgabe zu erhalten: ob sie funktioniert oder nicht. </p><br><p>  Tatsächlich verursachen sie eine Reihe von verzögerten Problemen, hier einige davon: </p><br><ol><li>  Die Teilnahme einer großen Anzahl getesteter Komponenten wirkt sich proportional auf die Montagezeit und die Durchführung solcher Tests aus. </li><li>  Das Einkapseln der Testlogik führt häufig dazu, dass es schwierig ist, die Richtigkeit des Testergebnisses zu gewährleisten.  Oft passen wir den Test an das Ergebnis an, und noch häufiger entspricht das Ergebnis aufgrund zufälliger Nebenwirkungen den Erwartungen. </li><li>  Die Relevanz von Testdaten geht verloren. </li><li>  Integrationen mit Systemen von Drittanbietern, insbesondere in Testumgebungen, fallen häufig aus.  Dies negiert die Zeit, die für das Laufen aufgewendet wird, da dies nicht immer offensichtlich ist: Dies ist ein vorübergehender Ausfall oder Ausfall, der durch unsere Änderungen verursacht wird. </li></ol><br><p>  Für die meisten Probleme wurde bereits eine Lösung gefunden.  Wie üblich kommen Lösungen jedoch nicht ohne zusätzliche Einschränkungen oder neue Probleme. </p><br><p>  Die richtigen Tests für Sie auszuwählen und richtig umzusetzen, ist eine sehr schwierige Aufgabe.  Darüber hinaus ist es wichtig, ein Gleichgewicht zwischen Coverage-Qualität und Build-Geschwindigkeit herzustellen, um Ihre Releases zu optimieren. </p><br><p>  In unserem Fall haben wir uns für einen Hybrid entschieden.  Wir erhöhen weiterhin alle erforderlichen Komponenten für einen vollständigen Funktionstest und waschen gleichzeitig alle möglichen Integrationen.  Um die API-Verträge zu speichern, verwenden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pact</a> und überprüfen die Integration in die Datenbank - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testcontainer</a> . </p><br><p>  Ein solcher Ansatz zum Schreiben von Tests führte zu einer Lösung des dritten Problems - einer <strong>langen Zeit für das manuelle Testen einer Aufgabe</strong> .  Die Stabilität von Hybridtests hat zu der Idee geführt, einen QS-Ingenieur in der Phase der Festlegung der Aufgabe für die Erstellung von Testfällen zu gewinnen. Dadurch können sie in der Phase der manuellen Tests übersprungen werden.  Die Integration mit nützlichen Produkten wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TestRail</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allure</a> ist zu einer Art Brücke zwischen Entwickler und Tester geworden.  Es wird ein Vertrag erstellt, dessen Ausführung Schritt für Schritt in dem während der Testmontage erstellten Bericht wiedergegeben wird. </p><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Test Build Details</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nk/wv/kc/nkwvkcxtmk1j_sxutjmni2rganu.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Vom Entwickler implementierte Testfälle</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ha/oh/5r/haoh5rijpl5xjg6arorfgwdnkzi.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Auto Test Build Report</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/1f/w2/cy/1fw2cyotmhbopjohdm47y7spkaq.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Informationen zu jedem laufenden Test und schrittweise Detaillierung der Ausführung</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/g_/q-/os/g_q-osvljwhuecjhtkta1avthwk.png"></p></div></div><br><p>  Es bleibt übrig, Berichte mit Ihrem Aufgabenverfolgungstool zu verbinden, um eine transparente Aufgabenverfolgung zu gewährleisten.  Eine klare Geschichte reduziert auch die Zeit, die zum Kompilieren und Implementieren von Tests für zukünftige Aufgaben benötigt wird. </p><br><div class="spoiler">  <b class="spoiler_title">Jira.</b>  <b class="spoiler_title">Testfälle, die automatisch an die Aufgabe angehängt werden</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/66/dv/fr66dvaumtfhdc56iw5tnezg4vk.png"></p></div></div><br><p>  Auf diese Weise sparen QS-Ingenieure genug Zeit, um sich auf das Testen von Ausnahmefällen und die Integration in andere Systeme zu konzentrieren. </p><br><p>  Das letzte Problem hängt damit zusammen.  Beim manuellen Testen werden alle Aufgaben aus den Feature-Zweigen zusammengeführt, um eine Bereitstellung auf dem Prüfstand zu entwickeln und zu starten. </p><br><p>  Erstens können Sie bei diesem Ansatz nicht über das reine Testen der Funktion sprechen, da parallel dazu die damit verbundenen Änderungen anderer Entwickler in die Entwicklung fallen können. </p><br><p>  Zweitens kann sich beim Freigeben des Release-Zweigs herausstellen, dass die Qualitätssicherung keine Zeit hatte, einige der Aufgaben zu testen.  Sie haben die Wahl: Setzen Sie die von diesen Aufgaben betroffenen Änderungen zurück oder verlangsamen Sie die Freigabe bis zum Ende des Tests. </p><br><p>  Sie müssen die ganze Zeit eine solche Wahl treffen, es sei denn, Sie <strong>isolieren Ihre Testumgebung</strong> .  Es ist wichtig, dass an der zu testenden Komponente keine anderen als die von der Aufgabe vorgenommenen Änderungen vorgenommen werden.  In unserem Fall müssen wir in der Lage sein, einen oder mehrere Dienste aufzunehmen, deren Zweige Änderungen erfahren haben, und das Routing innerhalb des Clusters zu verwalten, indem nur die von der Qualitätssicherung benötigten Anforderungen an diese Instanzen gesendet werden.  Die Aufgabe ist kompliziert, wenn im Cluster bereits Ausgleichsmechanismen verwendet werden, die ebenfalls berücksichtigt werden müssen. </p><br><p>  Nachdem wir diese Gelegenheit erkannt hatten, begannen wir, manuelle Tests direkt in separaten Feature-Zweigen durchzuführen: Stellen Sie den erforderlichen Service für die Dauer des Tests bereit und integrieren Sie ihn isoliert in die Gesamtumgebung.  Durch das Zusammenführen nur vorgefertigter Aufgaben in den Entwicklungszweig und das Entfernen von Sperren haben wir selbst festgelegt, welche Änderungen in die Version aufgenommen werden sollen und welche nicht. </p><br><p>  Es ist erwähnenswert, dass eine solche Lösung für Teams, die Änderungen an fast denselben Dateien vornehmen, wahrscheinlich nicht zu einer Silberkugel wird.  In diesem Fall ist die Speicherung von Features umgekehrt proportional zur Anzahl der Konflikte, die während der Fusion auftreten.  In der Praxis kommt dies bei relativ häufigen Veröffentlichungen in einem Team mit fünfzig Entwicklern äußerst selten vor. </p><br><h3 id="vmesto-vyvoda">  Anstelle von Ausgabe </h3><br><p>  Zusammenfassend können wir die wichtigsten Ansätze identifizieren, die bei der Beschleunigung von Releases helfen können: </p><br><ol><li>  Automatisierung von Routineoperationen. </li><li>  Transparenz der Prozesse für alle Beteiligten. </li><li>  Das notwendige Gleichgewicht zwischen Geschwindigkeit und Qualität beim Schreiben automatisierter Tests. </li><li>  Reduzierte Zeit für manuelle Tests. </li><li>  Isolierung der Umgebung zum Testen. </li></ol><br><p>  Es ist wichtig zu verstehen, dass es sich bei der Auswahl verschiedener Ansätze, Prinzipien und Strategien immer lohnt, vom Kontext Ihres Problems auszugehen.  Es gibt viele ebenso zuverlässige und ausgefeiltere Möglichkeiten, um die Lieferung Ihrer Software an den Kunden zu beschleunigen.  Der Versuch, auf neu auftretende Schwierigkeiten zu reagieren, hat zu den oben beschriebenen Schlussfolgerungen geführt.  Für uns waren sie der erste Schritt in Richtung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eines mutigeren Ansatzes zur Veröffentlichung von Veröffentlichungen</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472434/">https://habr.com/ru/post/de472434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472422/index.html">Sber X RamblerFront & Meet Up</a></li>
<li><a href="../de472426/index.html">Sicherheitswoche 43: Das geheime Leben der IoT Hanipots</a></li>
<li><a href="../de472428/index.html">Tarantool kubernetes Betreiber</a></li>
<li><a href="../de472430/index.html">Wie wir die Komponentenbasis für ein Smart Home ausgewählt haben: über Sensoren und eine Steuerung</a></li>
<li><a href="../de472432/index.html">Python 3.8: Was ist neu und wie wird es verwendet?</a></li>
<li><a href="../de472438/index.html">Verwendung von Proxys in der Informationssicherheit: 6 praktische Anwendungsfälle</a></li>
<li><a href="../de472440/index.html">Ein Tag bei Joker 2019</a></li>
<li><a href="../de472442/index.html">Die Situation: Alle reden über die Rückkehr vergessener Audioformate - warum sie dazu bestimmt sind, eine Nische zu bleiben</a></li>
<li><a href="../de472444/index.html">Die besten Produkte gehen von echten Problemen aus: Gegensprechanlage über zu erledigende Jobs. Teil 3 endgültig</a></li>
<li><a href="../de472446/index.html">Wie man den Code auf "Habré" richtig färbt und warum es so schwierig ist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>