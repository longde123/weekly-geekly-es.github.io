<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◾️ 🧑🏻‍🤝‍🧑🏻 🔉 Kaspresso: el marco de autotest que estabas esperando 💃🏽 🏥 🛫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos los que han estado o participan en autotest de Android saben lo doloroso que es. 
 Te cansas del volumen de tareas y problemas para que las vaca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kaspresso: el marco de autotest que estabas esperando</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kaspersky/blog/467617/">  Todos los que han estado o participan en autotest de Android saben lo doloroso que es. <br>  Te cansas del volumen de tareas y problemas para que las vacaciones no ayuden.  La gente incluso deja de fumar debido a los autotest. <br><br>  El dolor, el sufrimiento y el tormento conducen inevitablemente a la aparición de algo nuevo y hermoso.  Intentamos reunir todos los rastrillos que tuvimos que pisar, unimos fuerzas con los muchachos de Avito y HH y creamos algo que haría que su relación con las pruebas automáticas fuera incomparablemente mejor y más fructífera. <br><br>  Conoce: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kaspresso</a> : ¡el marco de autotest que estabas esperando! <br><br><img src="https://habrastorage.org/webt/dw/jh/9k/dwjh9kypjl637kxj8tiaxwjvtp0.png"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Notaré de</a> inmediato que hay dos videos de bastante alta calidad en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">red</a> dedicados a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kaspresso</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AdbServer</a> (auxiliar para Kaspresso, pero al mismo tiempo, un proyecto sólido e independiente): <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dmitry Movchan, Eugene Matsyuk - Cómo comenzar a escribir autotests y no volverse loco</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Egor Kournikov: lo único que necesita para las pruebas de IU</a> <br><br>  Describen en detalle la historia de la creación de bibliotecas: cómo pasamos de resolver un problema a resolver otro y qué sucedió al final.  Lo recomiendo mucho <br><br>  Por lo tanto, en el artículo solo hablaré sobre los puntos principales y las fichas para que pueda comprender rápidamente de qué se trata este marco y qué tareas resuelve.  Y se pueden encontrar agallas y detalles en el video y la documentación. <br><br><h2>  ¿Por qué necesitamos nuestro propio marco? </h2><br>  Cada desarrollador que comienza a escribir autotests inevitablemente hace preguntas: <br><br><ol><li>  ¿Cómo comenzar a escribir autotests? </li><li>  ¿Qué herramientas elegir? </li><li>  ¿Qué hacer si no hay una herramienta necesaria? </li><li>  ¿Cuáles son las mejores prácticas? </li></ol><br>  A todo esto agregue que cada equipo está tratando de resolver estos problemas de alguna manera a su manera.  Como resultado, no hay una respuesta única para ellos, no hay ningún lugar para ver cómo hacerlo bien.  Por lo tanto, escribir y respaldar autotests es costoso para las empresas, lo que pone en duda la viabilidad de la automatización como tal. <br><br>  Mientras tanto, la automatización de pruebas persigue buenos objetivos.  Le permite tener siempre un asistente verde y listo para lanzar.  Y esto significa que puede implementar el lanzamiento rápidamente. <br>  El único problema es encontrar respuestas a las preguntas anteriores.  Pero son casi iguales para todos los equipos.  Entonces, ¿por qué no automatizar su solución? <br><br><h2>  ¿Qué queremos del marco? </h2><br>  Revelemos un poco nuestras expectativas del marco. <br><br><h3>  Buena legibilidad </h3><br>  Por defecto, solo la biblioteca Espresso está disponible para nosotros en Android.  Existe, por supuesto, Appium + Cucumber, que en teoría le permite escribir pruebas en dos plataformas a la vez.  Pero la comunidad se está moviendo con confianza hacia el primer instrumento.  No describiré todos los pros y los contras de las bibliotecas anteriores: la red está llena de información sobre esto.  Aquí, por ejemplo, está uno de los enlaces relativamente recientes: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Appium vs Espresso.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¿Qué elegir y cómo usar?</a> <br><br>  Entonces, espresso.  No es una mala herramienta, pero su API está un poco al revés.  Eche un vistazo a un código simple: <br><br><pre><code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">espressoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { onView(allOf(allOf(withId(R.id.espresso), isDescendantOfA(withId(R.id.coffee_variates))), isDescendantOfA(withId(R.id.content)))) .check(matches(withEffectiveVisibility(View.VISIBLE))) }</code> </pre> <br>  Tienes que pensar para resolverlo, ¿verdad? <br><br>  Los dioses de Tailandia y Australia nos presentaron la biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kakao</a> , con la que puede comprender de un vistazo lo que sucede en su prueba.  Aquí está el mismo código, pero con Kakao: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kakaoTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { mainScreen { myView.isVisible() } }</code> </pre><br>  Mucho mejor  Pero ahora imagine que ha automatizado un caso de prueba completo.  ¿Cómo sería el código? <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { MainScreen() { homeButton.click() } HomeScreen() { title { isVisible() hasAnyText() } } } }</code> </pre><br>  El problema principal es que, al observar esta prueba, es difícil correlacionarla con el caso de prueba que automatizó.  Por supuesto, puede agregar registros o algo así.  O ingrese dsl, que transforma inmediatamente el aspecto de sus pruebas: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { step(“<span class="hljs-number"><span class="hljs-number">1</span></span>. Open Home screen”) { MainScreen() { homeButton.click() } } step(“<span class="hljs-number"><span class="hljs-number">2</span></span>. Check Home title”) { HomeScreen() { title { isVisible() hasAnyText() } } } } }</code> </pre><br>  De acuerdo, se ve completamente diferente. <br><br><h3>  Estabilidad </h3><br>  Cualquier biblioteca para ui-tests falla.  La misma acción se puede realizar 50 veces con éxito, y en el descanso 51 sin razón aparente.  Y en la carrera 52, todo vuelve a estar bien.  Y tal "flacidez" puede estropear decentemente sus nervios. <br><br>  Pensamos, ¿por qué no tratar de interceptar todas las acciones de Kakao-Espresso, y ya agregar allí un comportamiento adicional destinado a manejar tales errores aleatorios? <br><br>  Así nació la <a href="">versión 2.1 de la biblioteca de Kakao</a> , que le permite integrarse en todas las llamadas de Espresso. <br><br>  Además, creamos nuestros propios interceptores, con los que puede cambiar el comportamiento en el dial-peer o, por ejemplo, simplemente iniciar sesión.  Además, estos interceptores son personalizables, por lo que puede personalizarlos para satisfacer sus necesidades.  Lea más en el <a href="">muelle</a> . <br><br>  Específicamente, como parte de la lucha contra las pruebas escamosas: si algunas de sus acciones arrojaron una excepción, Kaspresso intentará: <br><br><ul><li>  Desplazarse  Tal vez su vista simplemente no sea visible en la pantalla. </li><li>  Eliminar el diálogo del sistema que podría provenir de Dios sabe dónde. </li><li>  Repita una llamada interrumpida durante dos segundos. </li></ul><br>  ¡Con estos pasos, resolvemos completamente el problema con pruebas escamosas! <br><br><h3>  Registro </h3><br>  Uno de los principales problemas que acompaña a las pruebas automáticas es la falta de registro inteligible, lo que es especialmente insuficiente cuando la prueba falla.  Siéntate y pregúntate qué y cómo ha caído aquí. <br><br>  Gracias a la interceptación antes mencionada, pudimos construir un sistema de registro bastante extenso. <br><br>  Echemos un vistazo a un ejemplo: <br><br><img src="https://habrastorage.org/webt/03/nn/qg/03nnqgupdqnwa_i4jwyz1uqq6r0.png"><br><br><img src="https://habrastorage.org/webt/tq/az/3v/tqaz3vjsgpw0-ivylrfbnuqyiqa.png"><br><br>  Por defecto, Kaspresso registra todas sus acciones, selecciona cada paso de la prueba, muestra el tiempo de ejecución, etc. <br><br><h3>  Adb completo en pruebas de espresso </h3><br>  Inicialmente, adb no está disponible en las pruebas de Espresso.  Sí, hay <i>adb shell</i> , pero hay muchas menos funciones que en <i>adb</i> completo.  Pero hay tantas cosas que pueden ser útiles en las pruebas. <br><br>  ¡Hemos creado una biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AdbServer</a> separada que devolverá <i>adb</i> completo a sus pruebas!  El video anterior detalla cómo peleamos y por lo que pasamos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">uno</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dos</a> ). <br><br><h3>  Trabajar con sistema operativo Android </h3><br>  Los detalles de las pruebas en Kaspersky Lab son tales que tenemos que trabajar mucho con el sistema operativo Android: configurar algunas configuraciones, subir archivos al sistema, etc. Todo esto nos llevó a estandarizar todo nuestro trabajo con el sistema, creando un conjunto de interfaces claras, accesible a través de un único punto de entrada - <i>Dispositivo de</i> clase. <br><br>  ¿Qué son estas interfaces y qué están haciendo?  Permíteme darte un par de diapositivas de la presentación de Yegor como ilustración: <br><br><img src="https://habrastorage.org/webt/ye/5w/po/ye5wpoo2z5ezglihfrlkpobobrs.png"><br><br><img src="https://habrastorage.org/webt/f-/tc/ow/f-tcowtztognmdjlaxkl9x6z9sg.png"><br><br><img src="https://habrastorage.org/webt/um/wj/te/umwjteh2qef3xv-4hw4xzkjkrh8.png"><br><br><img src="https://habrastorage.org/webt/qz/yy/qs/qzyyqsa4aeqaozts7uy367ryofw.png"><br><br>  La documentación está <a href="">aquí</a> . <br><br>  Debajo del capó, AdbServer y UiAutomator se utilizan principalmente. <br>  Pero!  Si de repente no está satisfecho con la implementación de una interfaz, puede configurarla a través del Configurador. <br><br><h3>  Captura de pantalla para DocLoc (Documentación y localización) </h3><br>  En todos los proyectos donde hay localización, a menudo es necesario tomar capturas de pantalla en diferentes idiomas para dárselas al traductor como ilustraciones.  Después de todo, es muy difícil hacer una traducción correcta sin ver dónde y cómo se usa una línea en particular.  Por lo tanto, quiero poder tomar capturas de pantalla de forma rápida e inmediata en todos los idiomas.  Incluyendo capturas de pantalla de los cuadros de diálogo del sistema.  También puede necesitar capturas de pantalla en pantallas heredadas y sin refactorización global. <br><br>  Todo esto le permite hacer Kaspresso fuera de la caja.  Lea más en la <a href="">documentación</a> . <br><br><h3>  Arquitectura y mejores prácticas. </h3><br>  Una de las tareas clave de Kaspresso era crear un dsl que lo llevara a la arquitectura de prueba correcta y su escritura correcta. <br><br>  Se rompieron muchas copias sobre este tema, porque, desafortunadamente, no encontrará tales reglas en ningún lado.  Lo máximo que puede encontrar son artículos sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Objeto de página</a> . <br><br>  Por lo tanto, no escatimamos esfuerzos y destacamos estos problemas en la <a href="">documentación</a> y en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">video una vez</a> y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">video dos</a> . <br>  Además, Sasha Blinov escribió un excelente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">artículo sobre el DSL Kotlin y las pruebas elegantes</a> .  La dsl descrita en el artículo es proporcionada por Kaspresso. <br><br>  De vuelta en Mobius, propusimos una opción sobre cómo acelerar el impacto de las pruebas automáticas e integrarlas rápidamente en PullRequest, evitando problemas inevitables de infraestructura.  Hablamos de esto con más detalle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> . <br><br><h3>  Cómo conectar y configurar Kaspresso si ya tiene muchas pruebas </h3><br>  El principal encanto es que si ya tiene muchas pruebas escritas en Kakao y desea implementar Kaspresso, ¡entonces no necesita reescribir nada!  Simplemente herede sus clases de prueba de la clase especial TestCase.  ¡Y eso es todo! <br><br>  Fue: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Se convirtió en: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Y si no le gusta la herencia, use una clase <i>TestRule</i> similar. <br><br>  Como ya mencionamos, Kaspresso es un marco muy flexible y personalizable.  Todos los ajustes están disponibles a través de la clase <i>Kaspresso</i> del mismo nombre. <br><br>  La configuración predeterminada es predeterminada.  Si desea personalizar algo, se verá así: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpenHomeScreenTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TestCase</span></span></span></span>( Kaspresso.Builder.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().apply { viewBehaviorInterceptors.add(MyInterceptor()) flakySafetyParams.timeoutMs = <span class="hljs-number"><span class="hljs-number">1_000</span></span> } ) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mainScreen = MainScreen() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> homeScreen = HomeScreen() <span class="hljs-meta"><span class="hljs-meta">@get:Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityTestRule = ActivityTestRule(MainActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">true</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">false) @Test fun test</span></span></span></span>() { ... } }</code> </pre><br>  Es decir, <i>Kaspresso.Builder</i> está disponible a través del <i>constructor</i> <i>TestCase</i> , donde establece todas las configuraciones que necesita.  Los detalles sobre el configurador están escritos en la <a href="">documentación</a> . <br><br><h2>  Planes inmediatos </h2><br>  En un futuro muy cercano, planeamos agregar lo siguiente: <br><br><h3>  Mostrar pasos de prueba en Allure (hola a los chicos de HeadHunter) </h3><br>  A través de un interceptor especial, preparamos datos para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Marathon</a> .  Esto nos permite ver informes de Allure de la siguiente naturaleza: <br><br><img src="https://habrastorage.org/webt/ad/dm/ux/addmux7l65zlvxi0fxlr97wr_o0.jpeg"><br><br>  Detalles en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PR # 4</a> <br><br>  PS PR ya está en la versión 1.0.1, ahora estamos preparando el PR correspondiente en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Marathon</a> . <br>  Pss.  Existe la idea de adjuntar una parte específica del registro a cada paso y agregar una captura de pantalla al paso "caído". <br><br><h3>  Prueba de scripts de actualización </h3><br>  A menudo es necesario verificar la corrección de las actualizaciones de la aplicación.  Sí, algunos de los controles se pueden transferir a pruebas unitarias.  Pero nos gustaría estar tranquilos para toda la aplicación en su conjunto. <br><br>  Desafortunadamente, en un Espresso puro es imposible hacer esto, porque si reinstalamos el apk probado, la prueba fallará.  De alguna manera puedes intentar engañar al corredor, pero me resulta difícil imaginar cómo se verán esas mejoras y qué tan estables serán. <br>  Por lo tanto, en Kaspresso, estamos preparando una solución a este problema, basada en UiAutomator.  Sin embargo, en la parte superior, tendrá el mismo dsl familiar, muy similar a Kakao y con el mismo soporte para la intersección. <br><br><h2>  Enlaces utiles </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kaspresso</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AdbServer</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Chat</a> , en el que siempre estaremos encantados de responder todas sus preguntas <br><br><h2>  Agradecimientos </h2><br>  Un agradecimiento especial a todos los que participaron en el desarrollo del proyecto. <br>  ¡Fue muy difícil, pero genial! <br><br><img src="https://habrastorage.org/webt/_l/vd/_u/_lvd_ux_onb1ft8uoo2eat8_5uo.png"><br><br><img src="https://habrastorage.org/webt/j2/bm/i1/j2bmi1ov0wicizc7iru0shunom0.png"><br><br><h2>  En lugar de una conclusión </h2><br>  Creemos que Kaspresso y AdbServer mejorarán su vida. <br>  Agradecemos sus comentarios, recomendaciones, Yishuyam y PulRequest! <br>  ¡Y no olvides poner un asterisco, por favor! <br><br>  PD Y al final una pequeña encuesta =) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467617/">https://habr.com/ru/post/467617/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467605/index.html">Todo lo que necesitas es URL</a></li>
<li><a href="../467607/index.html">Confesión del enemigo del estibador</a></li>
<li><a href="../467609/index.html">Crear una aplicación móvil en React Native</a></li>
<li><a href="../467611/index.html">Algoritmos de detección de esquema de imagen</a></li>
<li><a href="../467615/index.html">Cómo crear Python wrapper y no volverse loco</a></li>
<li><a href="../467619/index.html">Los lanzadores Aquafor son un buen ejemplo de cómo no se pueden diseñar filtros para el tratamiento del agua</a></li>
<li><a href="../467621/index.html">Reunión de Elasticsearch Moscú en Ozon</a></li>
<li><a href="../467623/index.html">React Native: crear un campo de entrada animado con la API animada</a></li>
<li><a href="../467625/index.html">10 servicios para crear una estructura de sitio en 2020</a></li>
<li><a href="../467627/index.html">AZN-V como tecnología de vigilancia para drones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>