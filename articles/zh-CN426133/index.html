<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€ğŸ¤ ğŸ‘¨ğŸ½â€ğŸ³ ğŸš´ğŸ¼ åœ¨Kubernetesä¸­å¼•å…¥å·å¿«ç…§çš„Alphaç‰ˆæœ¬ ğŸ¥¦ ğŸ¤© ğŸ‘¨ğŸ½â€ğŸ«</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„äº‹é¡¹ ä½©é›·å¤« ï¼šæœ€åˆçš„æ–‡ç« æœ€è¿‘å‘è¡¨åœ¨Kubernetesåšå®¢ä¸Šï¼Œç”±Googleå’Œåä¸ºï¼ˆå¾é™ï¼Œæ¨æ˜Ÿï¼ŒSaad Aliï¼‰çš„å‘˜å·¥æ’°å†™ï¼Œå¦‚æœæ‚¨å¯¹K8çš„åŠŸèƒ½å’Œä¸ä¹‹ç›¸å…³çš„é—®é¢˜æ„Ÿå…´è¶£ï¼Œæ‚¨è‚¯å®šä¼šåœ¨è¯¥é¡¹ç›®çš„GitHubä¸Šçœ‹åˆ°ä»–ä»¬çš„æ´»åŠ¨ã€‚ä¸æ•°æ®å­˜å‚¨ã€‚ å·¥ç¨‹å¸ˆè®¨è®ºäº†å·å¿«ç…§çš„ç”¨é€”ï¼Œå…¶å½“å‰åŠŸèƒ½ä»¥åŠä½¿ç”¨å®ƒä»¬çš„åŸºç¡€çŸ¥è¯†ã€‚ 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨Kubernetesä¸­å¼•å…¥å·å¿«ç…§çš„Alphaç‰ˆæœ¬</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/426133/"><img src="https://habrastorage.org/webt/ok/pe/iy/okpeiy2vp8v36hzrr-ddpboknyi.png"><br><br>  <i><b>æ³¨æ„äº‹é¡¹</b></i>  <i><b>ä½©é›·å¤«</b></i>  <i>ï¼šæœ€åˆçš„æ–‡ç« æœ€è¿‘å‘è¡¨åœ¨Kubernetesåšå®¢ä¸Šï¼Œç”±Googleå’Œåä¸ºï¼ˆå¾é™ï¼Œæ¨æ˜Ÿï¼ŒSaad Aliï¼‰çš„å‘˜å·¥æ’°å†™ï¼Œå¦‚æœæ‚¨å¯¹K8çš„åŠŸèƒ½å’Œä¸ä¹‹ç›¸å…³çš„é—®é¢˜æ„Ÿå…´è¶£ï¼Œæ‚¨è‚¯å®šä¼šåœ¨è¯¥é¡¹ç›®çš„GitHubä¸Šçœ‹åˆ°ä»–ä»¬çš„æ´»åŠ¨ã€‚ä¸æ•°æ®å­˜å‚¨ã€‚</i>  <i>å·¥ç¨‹å¸ˆè®¨è®ºäº†å·å¿«ç…§çš„ç”¨é€”ï¼Œå…¶å½“å‰åŠŸèƒ½ä»¥åŠä½¿ç”¨å®ƒä»¬çš„åŸºç¡€çŸ¥è¯†ã€‚</i> <a name="habracut"></a><br><br>  Kubernetes v1.12å¼•å…¥äº†å¯¹å·å¿«ç…§çš„æ”¯æŒçš„Alphaç‰ˆæœ¬ã€‚ æ­¤åŠŸèƒ½ä½¿æ‚¨å¯ä»¥åˆ›å»ºå’Œåˆ é™¤å·çš„å¿«ç…§ï¼Œä»¥åŠé€šè¿‡Kubernetes APIä½¿ç”¨ç³»ç»Ÿçš„â€œæœ¬æœºâ€æ–¹å¼ä»å¿«ç…§ä¸­åˆ›å»ºæ–°å·ã€‚ <br><br><h2> ä»€ä¹ˆæ˜¯å¿«ç…§ï¼Ÿ </h2><br> è®¸å¤šå­˜å‚¨ç³»ç»Ÿï¼ˆä¾‹å¦‚Google Cloudæ°¸ä¹…ç£ç›˜ï¼ŒAmazon Elastic Block Storageå’Œè®¸å¤šæœ¬åœ°å­˜å‚¨ç³»ç»Ÿï¼‰éƒ½æä¾›äº†ä¸ºæ°¸ä¹…å·åˆ›å»ºå¿«ç…§ï¼ˆâ€œå¿«ç…§â€ï¼‰çš„åŠŸèƒ½ã€‚ å¿«ç…§æ˜¯åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å·çš„å‰¯æœ¬ã€‚ å®ƒå¯ç”¨äºæä¾›ä¸€ä¸ªæ–°å·ï¼ˆå·²ç»ç”¨å¿«ç…§ä¸­çš„æ•°æ®å¡«å……ï¼‰æˆ–å°†ç°æœ‰å·è¿˜åŸåˆ°ä»¥å‰çš„çŠ¶æ€ï¼ˆåœ¨å¿«ç…§ä¸­æ˜¾ç¤ºï¼‰ã€‚ <br><br><h2> ä¸ºä»€ä¹ˆè¦å°†å¿«ç…§æ·»åŠ åˆ°Kubernetesï¼Ÿ </h2><br>  Kuberneteså·æ’ä»¶ç³»ç»Ÿä¸­å·²ç»æä¾›äº†å¼ºå¤§çš„æŠ½è±¡åŠŸèƒ½ï¼Œå¯ä»¥è‡ªåŠ¨é…ç½®ï¼Œè¿æ¥å’Œå®‰è£…å—å’Œæ–‡ä»¶å­˜å‚¨ã€‚ <br><br> æä¾›æ‰€æœ‰è¿™äº›åŠŸèƒ½æ˜¯Kubernetesçš„å·¥ä½œè´Ÿè½½å®¹å¿ç›®æ ‡çš„ä¸€éƒ¨åˆ†ï¼šKubernetesæ—¨åœ¨åœ¨å……å½“åˆ†å¸ƒå¼ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºå’ŒåŸºç¡€é›†ç¾¤ä¹‹é—´åˆ›å»ºæŠ½è±¡çº§åˆ«ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºç‹¬ç«‹äºè¿è¡Œå®ƒä»¬çš„ç‰¹å®šé›†ç¾¤ï¼Œå¹¶ä¸”ä¸éœ€è¦åº”ç”¨ç¨‹åºéƒ¨ç½²ä»»ä½•ç‰¹å®šäºç¾¤é›†çš„çŸ¥è¯†ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes Storage SIGå·²å°†</a>å¿«ç…§æ“ä½œç¡®å®šä¸ºå„ç§æœ‰çŠ¶æ€å·¥ä½œè´Ÿè½½çš„å…³é”®åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œæ•°æ®åº“ç®¡ç†å‘˜å¯èƒ½æƒ³åœ¨å¯¹å…¶æ•°æ®åº“æ‰§è¡Œä»»ä½•æ“ä½œä¹‹å‰å…ˆå¯¹å…¶æ•°æ®åº“è¿›è¡Œå¿«ç…§ã€‚ <br><br> é€šè¿‡ä½¿Kubernetes APIæˆä¸ºè°ƒç”¨å¿«ç…§æ“ä½œçš„æ ‡å‡†æ–¹å¼ï¼ŒKubernetesç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ— éœ€è§£å†³æ–¹æ³•ï¼ˆä»¥åŠæ‰‹åŠ¨è°ƒç”¨ç‰¹å®šäºå­˜å‚¨ç³»ç»Ÿçš„æ“ä½œï¼‰ã€‚ å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œè®©ç”¨æˆ·æœ‰æœºä¼šå°†å¿«ç…§æ“ä½œåµŒå…¥ä»–ä»¬çš„å·¥å…·å’Œç­–ç•¥ä¸­ï¼Œè¿™æ˜¯ä¸€ç§å†·é™çš„ç†è§£ï¼Œå³æ— è®ºåº•å±‚å­˜å‚¨å¦‚ä½•ï¼Œä¸€åˆ‡éƒ½å°†é€‚ç”¨äºä»»ä½•Kubernetesé›†ç¾¤ã€‚ <br><br> æ­¤å¤–ï¼Œè¿™äº›KubernetesåŸè¯­ç”¨ä½œåŸºæœ¬æ„å»ºå—ï¼Œä¸ºå¼€å‘ç”¨äºå­˜å‚¨ç®¡ç†ï¼ˆä¾‹å¦‚ä¿æŠ¤ï¼Œå¤åˆ¶å’Œæ•°æ®è¿ç§»ï¼‰çš„æ›´é«˜çº§ä¼ä¸šçº§åŠŸèƒ½å¼€è¾Ÿäº†é“è·¯ã€‚ <br><br><h2> å“ªäº›å·æ’ä»¶æ”¯æŒKubernetesä¸­çš„å¿«ç…§ï¼Ÿ </h2><br>  Kubernetesæ”¯æŒä¸‰ç§ç±»å‹çš„æ‰¹é‡æ’ä»¶ï¼šin-treeï¼ŒFlexå’ŒCSIã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="">Kubernetes Volume Plugin FAQ</a> ã€‚ <br><br> ä»…CSIé©±åŠ¨ç¨‹åºæ”¯æŒå¿«ç…§ï¼ˆæ ‘å†…æˆ–Flexå‡ä¸æ”¯æŒå¿«ç…§ï¼‰ã€‚ è¦åˆ©ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·ç¡®ä¿åœ¨Kubernetesç¾¤é›†ä¸­éƒ¨ç½²äº†å®ç°å¿«ç…§æ”¯æŒçš„CSIé©±åŠ¨ç¨‹åºã€‚ <br><br> åœ¨<i><b>æ’°å†™</b></i>æœ¬åšæ–‡æ—¶<i>ï¼ˆ2018å¹´10æœˆ9æ—¥- <b>å¤§çº¦ç¿»è¯‘</b> ï¼‰</i> ï¼Œä»¥ä¸‹CSIé©±åŠ¨ç¨‹åºæ”¯æŒå¿«ç…§ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GCEæ°¸ä¹…ç£ç›˜</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenSDS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¡å¤«Â·ç½—ä¼¯ç‰¹</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ³¢ç‰¹æ²ƒå…‹æ–¯</a> </li></ul><br> å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¶ä»–é©±åŠ¨ç¨‹åº</a>å¿«ç…§çš„æ”¯æŒæ­£åœ¨å¼€å‘ä¸­ï¼Œåº”å°½å¿«æä¾›ã€‚ æœ‰å…³CSIä»¥åŠå¦‚ä½•éƒ¨ç½²CSIé©±åŠ¨ç¨‹åºçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œåœ¨å‡ºç‰ˆç‰©â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes Goes Betaçš„å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆCSIï¼‰â€ä¸­è¿›è¡Œäº†æè¿°</a> <i>ï¼ˆå¦è¯·å‚è§æ³¨é‡Šâ€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç†è§£å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆåœ¨Kubernetesç­‰ï¼‰ä¸­</a> â€çš„ç¿»è¯‘ï¼‰ - <b>å¤§çº¦ç¿»è¯‘</b> ï¼‰</i> ã€‚ <br><br><h2>  Kuberneteså¿«ç…§API </h2><br> ä¸ºäº†ç®¡ç†å¿«ç…§ï¼ŒKubernetes Volume Snapshotsä»¥ä¸Kubernetes Persistent Volumes APIä¸­ç›¸åŒçš„æ–¹å¼å¼•å…¥äº†ä¸‰ä¸ªæ–°çš„APIå¯¹è±¡ï¼š <br><br><ul><li> <code>VolumeSnapshot</code> <br> <ul><li> ç”±Kubernetesç”¨æˆ·åˆ›å»ºï¼Œä»¥è¯·æ±‚æŒ‡å®šå·çš„å¿«ç…§ã€‚ åŒ…å«æœ‰å…³å¿«ç…§æ“ä½œçš„ä¿¡æ¯ï¼Œä¾‹å¦‚åˆ é™¤å¿«ç…§çš„æ—¶é—´æˆ³ä»¥åŠå¿«ç…§æ˜¯å¦å‡†å¤‡å°±ç»ªã€‚ </li><li> ä¸<code>PersistentVolumeClaim</code>å¯¹è±¡ç±»ä¼¼ï¼Œåˆ›å»ºå’Œåˆ é™¤è¯¥å¯¹è±¡è¡¨ç¤ºç”¨æˆ·å¸Œæœ›åˆ›å»ºæˆ–åˆ é™¤ç¾¤é›†èµ„æºï¼ˆå¿«ç…§ï¼‰ã€‚ </li></ul></li><li> <code>VolumeSnapshotContent</code> <br> <ul><li> æˆåŠŸåˆ›å»ºå¿«ç…§åï¼Œç”±CSIé©±åŠ¨ç¨‹åºåˆ›å»ºã€‚ åŒ…å«æœ‰å…³å¿«ç…§çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶IDã€‚ </li><li> åƒ<code>PersistentVolume</code>å¯¹è±¡ä¸€æ ·ï¼Œå®ƒè¡¨ç¤ºç¾¤é›†å·²ç»æä¾›çš„èµ„æºï¼ˆå¿«ç…§ï¼‰ã€‚ </li><li> ä¸<code>PersistentVolumeClaim</code>å’Œ<code>PersistentVolume</code>å¯¹è±¡ç±»ä¼¼ï¼Œåˆ›å»ºå¿«ç…§æ—¶ï¼Œ <code>VolumeSnapshotContent</code>å¯¹è±¡<code>VolumeSnapshotContent</code>é™„åŠ åˆ°<code>VolumeSnapshot</code>åˆ›å»ºå¿«ç…§çš„<code>VolumeSnapshotContent</code> ï¼ˆä½¿ç”¨ä¸€å¯¹ä¸€æ˜ å°„ï¼‰ã€‚ </li></ul></li><li> <code>VolumeSnapshotClass</code> <br> <ul><li> ç”±é›†ç¾¤ç®¡ç†å‘˜å®šä¹‰ï¼Œä»¥æè¿°å¯ä»¥åˆ›å»ºå“ªäº›å¿«ç…§ã€‚ åŒ…æ‹¬é©±åŠ¨ç¨‹åºä¿¡æ¯ï¼Œç”¨äºè®¿é—®å¿«ç…§çš„æœºå¯†ç­‰ã€‚ </li></ul></li></ul><br> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Kubernetesä¸­çš„ä¸»è¦Persistent Volumeå¯¹è±¡ä¸åŒï¼Œè¿™äº›å¿«ç…§å¯¹è±¡è¢«å®šä¹‰ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CustomResourceDefinitionsï¼ˆCRDï¼‰</a> ã€‚  Kubernetesé¡¹ç›®æ­£åœ¨é€æ­¥æ‘†è„±APIæœåŠ¡å™¨ä¸­é¢„å®šä¹‰çš„èµ„æºç±»å‹ï¼Œè€Œé‡‡ç”¨ä¸€ç§æ¨¡å‹ï¼Œå…¶ä¸­APIæœåŠ¡å™¨ç‹¬ç«‹äºAPIå¯¹è±¡ã€‚ è¿™ç§æ–¹æ³•å…è®¸æ‚¨åœ¨å…¶ä»–é¡¹ç›®ä¸­ï¼ˆé™¤äº†Kubernetesä¹‹å¤–ï¼‰é‡ç”¨APIæœåŠ¡å™¨ï¼Œå¹¶ä¸”ä½¿ç”¨è€…ï¼ˆä¾‹å¦‚Kubernetesï¼‰å¯ä»¥å°†å…¶æ‰€éœ€çš„èµ„æºç±»å‹è®¾ç½®ä¸ºCRDã€‚ <br><br> æ”¯æŒå¿«ç…§çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CSIé©±åŠ¨ç¨‹åº</a>å°†è‡ªåŠ¨å®‰è£…å¿…è¦çš„CRDã€‚  Kubernetesæœ€ç»ˆç”¨æˆ·åªéœ€è¦éªŒè¯ç¾¤é›†ä¸­æ˜¯å¦éƒ¨ç½²äº†æ”¯æŒå¿«ç…§çš„CSIé©±åŠ¨ç¨‹åºã€‚ <br><br> é™¤äº†è¿™äº›æ–°å¯¹è±¡ä¹‹å¤–ï¼Œç°æœ‰çš„<code>PersistentVolumeClaim</code>ä¸€ä¸ªæ–°çš„<code>DataSource</code>å­—æ®µï¼š <br><br><pre> <code class="plaintext hljs">type PersistentVolumeClaimSpec struct { AccessModes []PersistentVolumeAccessMode Selector *metav1.LabelSelector Resources ResourceRequirements VolumeName string StorageClassName *string VolumeMode *PersistentVolumeMode DataSource *TypedLocalObjectReference }</code> </pre> <br> åˆ›å»ºæ–°å·æ—¶ï¼Œæ­¤å­—æ®µï¼ˆå¤„äºAlphaç‰ˆæœ¬çŠ¶æ€ï¼‰å…è®¸æ‚¨è‡ªåŠ¨ä½¿ç”¨ç°æœ‰å¿«ç…§ä¸­çš„æ•°æ®å¡«å……å®ƒã€‚ <br><br><h2>  Kuberneteså¿«ç…§è¦æ±‚ </h2><br> åœ¨Kubernetesä¸­ä½¿ç”¨å·å¿«ç…§ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ï¼š <br><br><ul><li> ç¡®ä¿å®ç°å¿«ç…§çš„CSIé©±åŠ¨ç¨‹åºå·²åœ¨ç¾¤é›†ä¸Šéƒ¨ç½²å¹¶è¿è¡Œï¼› </li><li> é€šè¿‡æ–°åŠŸèƒ½é—¨å¯ç”¨Kubernetes Volume SnapshottingåŠŸèƒ½ï¼ˆé»˜è®¤æƒ…å†µä¸‹å¯¹äºAlphaç‰ˆæœ¬ç¦ç”¨ï¼‰ï¼š <br><ul><li> ä¸ºAPI Server <code>--feature-gates=VolumeSnapshotDataSource=true</code>è®¾ç½®ä»¥ä¸‹æ ‡å¿—ï¼š-- <code>--feature-gates=VolumeSnapshotDataSource=true</code> </li></ul></li></ul><br> åœ¨åˆ›å»ºå¿«ç…§ä¹‹å‰ï¼Œè¿˜å¿…é¡»ç¡®å®šè¦ä½¿ç”¨çš„CSIé©±åŠ¨ç¨‹åºï¼Œè¿™æ˜¯é€šè¿‡åˆ›å»º<code>VolumeSnapshotClass</code>å¯¹è±¡å¹¶åœ¨<code>VolumeSnapshotClass</code>å­—æ®µä¸­æŒ‡å®šCSIé©±åŠ¨ç¨‹åºæ¥å®Œæˆçš„ã€‚ åœ¨ä¸‹é¢çš„<code>VolumeSnapshotClass</code>ç¤ºä¾‹ä¸­ï¼Œæ­¤é©±åŠ¨ç¨‹åºæ˜¯<code>com.example.csi-driver</code> ã€‚ æ¯ä¸ªå¿«ç…§æä¾›ç¨‹åºè‡³å°‘éœ€è¦ä¸€ä¸ª<code>VolumeSnapshotClass</code>å¯¹è±¡ã€‚ ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªCSIé©±åŠ¨ç¨‹åºå®šä¹‰ä¸€ä¸ªé»˜è®¤çš„<code>VolumeSnapshotClass</code>è¿™å¯ä»¥é€šè¿‡åœ¨ç±»å®šä¹‰ä¸­è®¾ç½®<code>snapshot.storage.kubernetes.io/is-default-class: "true"</code>æ³¨é‡Šæ¥å®Œæˆï¼š <br><br><pre> <code class="plaintext hljs">apiVersion: snapshot.storage.k8s.io/v1alpha1 kind: VolumeSnapshotClass metadata: name: default-snapclass annotations: snapshot.storage.kubernetes.io/is-default-class: "true" snapshotter: com.example.csi-driver apiVersion: snapshot.storage.k8s.io/v1alpha1 kind: VolumeSnapshotClass metadata: name: csi-snapclass snapshotter: com.example.csi-driver parameters: fakeSnapshotOption: foo csiSnapshotterSecretName: csi-secret csiSnapshotterSecretNamespace: csi-namespace</code> </pre> <br> å¿…é¡»æ ¹æ®CSIé©±åŠ¨ç¨‹åºæ–‡æ¡£è®¾ç½®æ‰€æœ‰å¿…éœ€çš„å‚æ•°ã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨åˆ›å»ºå’Œåˆ é™¤å¿«ç…§æœŸé—´ï¼Œ <code>fakeSnapshotOption: foo</code>å‚æ•°å’Œæ‰€æœ‰æåŠçš„æœºå¯†å°†ä¼ é€’ç»™CSIé©±åŠ¨ç¨‹åºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CSI external-snapshotter</a>ä¿å­˜<code>csiSnapshotterSecretName</code>å’Œ<code>csiSnapshotterSecretNamespace</code>å‚æ•°å¯†é’¥ã€‚ <br><br> æœ€åï¼Œåœ¨åˆ›å»ºå¿«ç…§ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡CSIé©±åŠ¨ç¨‹åºåˆ›å»ºå·ï¼Œå¹¶åœ¨å…¶ä¸­å¡«å……è¦åœ¨å…¶ä¸­æŸ¥çœ‹çš„æ•°æ®ï¼ˆæœ‰å…³å¦‚ä½•ä½¿ç”¨CSIå·çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å‡ºç‰ˆç‰©</a> ï¼‰ã€‚ <br><br><h2> åœ¨Kubernetesä¸­åˆ›å»ºæ–°å¿«ç…§ </h2><br> ä¸€æ—¦å®šä¹‰äº†<code>VolumeSnapshotClass</code>å¯¹è±¡å¹¶ä¸”è¯¥å¯¹è±¡<code>VolumeSnapshotClass</code>è¦ä»ä¸­åˆ é™¤å¿«ç…§çš„å·ï¼Œå°±å¯ä»¥é€šè¿‡åˆ›å»º<code>VolumeSnapshot</code>å¯¹è±¡æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ <br><br> å¿«ç…§çš„æ¥æºç”±ä¸¤ä¸ªå‚æ•°ç¡®å®šï¼š <br><br><ul><li>  <code>kind</code> -è¿™é‡Œæ˜¾ç¤ºäº†<code>PersistentVolumeClaim</code> ï¼› </li><li>  <code>name</code> -PVCå¯¹è±¡çš„å®é™…åç§°ã€‚ </li></ul><br> å¯ä»¥ç†è§£ï¼Œä¸ºå…¶åˆ›å»ºå¿«ç…§çš„å·çš„åç§°ç©ºé—´ç”±<code>VolumeSnapshot</code>å¯¹è±¡çš„åç§°ç©ºé—´ç¡®å®šã€‚ <br><br><pre> <code class="plaintext hljs">apiVersion: snapshot.storage.k8s.io/v1alpha1 kind: VolumeSnapshot metadata: name: new-snapshot-demo namespace: demo-namespace spec: snapshotClassName: csi-snapclass source: name: mypvc kind: PersistentVolumeClaim</code> </pre> <br>  <code>VolumeSnapshot</code>è§„èŒƒå¯ä»¥<code>VolumeSnapshot</code>ä¸€ä¸ª<code>VolumeSnapshotClass</code> ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³å°†ä½¿ç”¨å“ªä¸ªCSIé©±åŠ¨ç¨‹åºæ¥åˆ›å»ºå¿«ç…§çš„ä¿¡æ¯ã€‚ å¦‚å…ˆå‰æ‰€æŠ¥é“ï¼Œåœ¨åˆ›å»º<code>VolumeSnapshot</code>å¯¹è±¡ä¹‹å<code>VolumeSnapshot</code> <code>fakeSnapshotOption: foo</code>å‚æ•°å’Œæ‰€æœ‰æåˆ°çš„<code>VolumeSnapshotClass</code>æœºå¯†å°†åœ¨<code>CreateSnapshot</code>è°ƒç”¨ä¸­ä¼ é€’ç»™CSIæ’ä»¶<code>com.example.csi-driver</code> ã€‚ <br><br> å“åº”äºè¿™æ ·çš„è¯·æ±‚ï¼ŒCSIé©±åŠ¨ç¨‹åºè·å–å·çš„å¿«ç…§ï¼Œç„¶åè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä»£è¡¨æ–°å¿«ç…§çš„<code>VolumeSnapshotContent</code>å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡é™„åŠ åˆ°<code>VolumeSnapshot</code> ï¼Œä»¥å¤‡ä½¿ç”¨ã€‚ å¦‚æœCSIé©±åŠ¨ç¨‹åºæ— æ³•åˆ›å»ºå¿«ç…§å¹¶è¿”å›é”™è¯¯ï¼Œåˆ™å¿«ç…§æ§åˆ¶å™¨å°†åœ¨<code>VolumeSnapshot</code>å¯¹è±¡çš„çŠ¶æ€ä¸­æŠ¥å‘Šæ­¤é”™è¯¯ï¼Œå¹¶ä¸”<b>ä¸ä¼š</b>è¿›è¡Œæ–°çš„å°è¯•ï¼ˆæ­¤è¡Œä¸ºä¸Kubernetesä¸­çš„å…¶ä»–æ§åˆ¶å™¨ä¸åŒ-å®ç°è¯¥è¡Œä¸ºæ˜¯ä¸ºäº†é¿å…åœ¨ä¸å¯é¢„æµ‹çš„æ—¶é—´åˆ›å»ºå¿«ç…§ï¼‰ ã€‚ <br><br> å¦‚æœæœªæŒ‡å®šå¿«ç…§ç±»ï¼Œåˆ™å¤–éƒ¨å¿«ç…§è€…å°†å°è¯•æŸ¥æ‰¾é»˜è®¤ç±»å¹¶å°†å…¶ç”¨äºåˆ›å»ºçš„å¿«ç…§ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>snapshotter</code>åœ¨é»˜è®¤ç±»ä¸­æŒ‡å‘çš„CSIé©±åŠ¨ç¨‹åºåº”ä¸PVCå­˜å‚¨ç±»ä¸­çš„<code>provisioner</code>ç¨‹åºæ‰€æŒ‡å‘çš„CSIé©±åŠ¨ç¨‹åºç›¸å¯¹åº”ã€‚ <br><br> è¯·æ³¨æ„ï¼ŒKuberneteså¿«ç…§çš„Alphaç‰ˆæœ¬ä¸ä¿è¯ä¸€è‡´æ€§ã€‚ ä¸ºäº†ç¡®ä¿å¿«ç…§ä¸­çš„å®Œæ•´æ•°æ®ï¼Œæœ‰å¿…è¦åœ¨åˆ é™¤åº”ç”¨ç¨‹åºä¹‹å‰å¯¹å…¶è¿›è¡Œé€‚å½“çš„å‡†å¤‡ï¼ˆåœæ­¢åº”ç”¨ç¨‹åºï¼Œå†»ç»“æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ã€‚ <br><br> è¦<code>VolumeSnapshot</code>åˆ›å»º<code>VolumeSnapshot</code>å¯¹è±¡å¹¶å°†å…¶ä¸<code>VolumeSnapshotContent</code>å…³è”ï¼Œå¯ä»¥ä½¿ç”¨<code>kubectl describe volumesnapshot</code> ï¼š <br><br><ul><li>  <code>Ready</code>åº”ä¸º<code>true</code> ï¼Œè¿™å°†æŒ‡ç¤ºå·²å‡†å¤‡å¥½ä½¿ç”¨å·å¿«ç…§ã€‚ </li><li>  <code>Creation Time</code>å­—æ®µæ˜¾ç¤ºå®é™…æ‹æ‘„å¿«ç…§çš„<code>Creation Time</code> ã€‚ </li><li>  <code>Restore Size</code>å­—æ®µæ˜¯è¿˜åŸå¿«ç…§çš„æœ€å°å·å¤§å°ã€‚ </li><li> è§„èŒƒä¸­çš„â€œ <code>Snapshot Content Name</code>å­—æ®µæŒ‡å‘ä¸ºæ­¤å¿«ç…§åˆ›å»ºçš„<code>VolumeSnapshotContent</code>å¯¹è±¡ã€‚ </li></ul><br><h2> å°†ç°æœ‰å¿«ç…§å¯¼å…¥Kubernetes </h2><br> å¯ä»¥é€šè¿‡æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯¥å¿«ç…§çš„<code>VolumeSnapshotContent</code>å¯¹è±¡ï¼Œå°†ç°æœ‰å¿«ç…§å¯¼å…¥Kubernetesã€‚ ç”±äº<code>VolumeSnapshotContent</code>æ˜¯ä¸ä¸å‘½åç©ºé—´ç»‘å®šçš„APIå¯¹è±¡ï¼Œå› æ­¤åªæœ‰ç³»ç»Ÿç®¡ç†å‘˜æ‰æœ‰æƒåˆ›å»ºå®ƒã€‚ <br><br> åˆ›å»º<code>VolumeSnapshotContent</code>å¯¹è±¡æ—¶ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„å¯¹è±¡<code>VolumeSnapshot</code> ã€‚ åœ¨æ£€æŸ¥<code>VolumeSnapshot</code>å’Œ<code>VolumeSnapshotContent</code>ä¹‹é—´æ˜¯å¦å­˜åœ¨è¿æ¥å’Œæ­£ç¡®æ€§ä¹‹åï¼Œå¤–éƒ¨å¿«ç…§<code>VolumeSnapshot</code>å™¨æ§åˆ¶å™¨ä¼šå°†å¿«ç…§æ ‡è®°ä¸ºå°±ç»ªã€‚ å»ºç«‹æ­¤è¿æ¥åï¼Œå¿«ç…§å³å¯åœ¨Kubernetesä¸­ä½¿ç”¨ã€‚ <br><br> å¿…é¡»ä½¿ç”¨ä»¥ä¸‹è¡¨ç¤º<i>é¢„é…ç½®</i>å¿«ç…§çš„å­—æ®µåˆ›å»º<code>VolumeSnapshotContent</code>å¯¹è±¡ï¼š <br><br><ul><li>  <code>csiVolumeSnapshotSource</code>æ ‡è¯†å¿«ç…§çš„ä¿¡æ¯ï¼š <br><ul><li>  <code>snapshotHandle</code>åç§°/æ ‡è¯†ç¬¦ã€‚ å¿…å¡«é¡¹ </li><li>  driver-ç”¨äºæ­¤å·çš„CSIé©±åŠ¨ç¨‹åºã€‚ å¿…å¡«å­—æ®µã€‚ å¿…é¡»ä¸æ§åˆ¶å™¨ï¼ˆå¿«ç…§æ§åˆ¶å™¨ï¼‰ä¸­<code>snapshotter</code>çš„åç§°åŒ¹é…ï¼› </li><li>  <code>creationTime</code>å’Œ<code>restoreSize</code>å¯¹äºé¢„é…ç½®çš„å·ï¼Œè¿™äº›å­—æ®µæ˜¯å¯é€‰çš„ã€‚ åˆ›å»ºå¿«ç…§åï¼Œå¤–éƒ¨å¿«ç…§ç¨‹åºæ§åˆ¶å™¨å°†è‡ªåŠ¨æ›´æ–°å®ƒä»¬ã€‚ </li></ul></li><li>  <code>volumeSnapshotRef</code>æŒ‡å‘åº”å°†æ­¤å¯¹è±¡ï¼ˆå³<code>VolumeSnapshotContent</code> ï¼‰é™„åŠ åˆ°çš„<code>VolumeSnapshot</code>å¯¹è±¡çš„æŒ‡é’ˆï¼š <br><ul><li>  <code>name</code>å’Œ<code>namespace</code> -ç»‘å®šäº†å†…å®¹çš„<code>VolumeSnapshot</code>å¯¹è±¡çš„åç§°å’Œåç§°ç©ºé—´ï¼› </li><li>  <code>UID</code>å¯é€‰ï¼ˆç”¨äºé¢„å…ˆå‡†å¤‡çš„å·ï¼‰å­—æ®µã€‚ ç»‘å®šåï¼Œå¤–éƒ¨å¿«ç…§ç¨‹åºæ§åˆ¶å™¨å°†è‡ªåŠ¨æ›´æ–°æ­¤å­—æ®µã€‚ å¦‚æœç”¨æˆ·å®šä¹‰äº†è¯¥å­—æ®µï¼Œåˆ™éœ€è¦ç¡®ä¿å®ƒä¸å‘ç”Ÿç»‘å®šçš„å¿«ç…§çš„UIDç›¸åŒ¹é…ã€‚ å¦‚æœæ²¡æœ‰è¿™æ ·çš„å¯¹åº”å…³ç³»ï¼Œåˆ™è®¤ä¸ºå†…å®¹æ— å…³ç´§è¦ï¼ˆå­¤ç«‹å¯¹è±¡ï¼‰ï¼Œå› æ­¤æ§åˆ¶å™¨å°†åˆ é™¤è¯¥å†…å®¹å’Œå…³è”çš„å¿«ç…§ã€‚ </li></ul></li><li>  <code>snapshotClassName</code>æ˜¯ä¸€ä¸ªå¯é€‰å­—æ®µã€‚ ç»‘å®šåï¼Œå¤–éƒ¨å¿«ç…§å™¨æ§åˆ¶å™¨å°†è‡ªåŠ¨å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚ </li></ul><br><pre> <code class="plaintext hljs">apiVersion: snapshot.storage.k8s.io/v1alpha1 kind: VolumeSnapshotContent metadata: name: static-snapshot-content spec: csiVolumeSnapshotSource: driver: com.example.csi-driver snapshotHandle: snapshotcontent-example-id volumeSnapshotRef: kind: VolumeSnapshot name: static-snapshot-demo namespace: demo-namespace</code> </pre> <br> å¿…é¡»åˆ›å»º<code>VolumeSnapshot</code>å¯¹è±¡ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨å¿«ç…§ã€‚ åœ¨å…¶ä¸­ï¼š <br><br><ul><li>  <code>snapshotClassName</code>å·çš„å¿«ç…§ç±»çš„åç§°ã€‚ å¯é€‰å­—æ®µã€‚ å¦‚æœå·²è®¾ç½®ï¼Œåˆ™<code>snapshotter</code>ç±»ä¸­çš„<code>snapshotter</code>å­—æ®µåº”ä¸å¿«ç…§æ§åˆ¶å™¨çš„åç§°åŒ¹é…ã€‚ å¦‚æœæœªè®¾ç½®ï¼Œåˆ™æ§åˆ¶å™¨å°†æŸ¥æ‰¾é»˜è®¤å¿«ç…§ç±»ï¼›å¦åˆ™ï¼Œæ§åˆ¶å™¨å°†æŸ¥æ‰¾é»˜è®¤å¿«ç…§ç±»ã€‚ </li><li>  <code>snapshotContentName</code>å¿«ç…§å·å†…å®¹çš„åç§°ã€‚ é¢„å…ˆå‡†å¤‡çš„å·çš„å¿…å¡«å­—æ®µã€‚ </li></ul><br><pre> <code class="plaintext hljs">apiVersion: snapshot.storage.k8s.io/v1alpha1 kind: VolumeSnapshot metadata: name: static-snapshot-demo namespace: demo-namespace spec: snapshotClassName: csi-snapclass snapshotContentName: static-snapshot-content</code> </pre> <br> åˆ›å»ºè¿™äº›å¯¹è±¡åï¼Œå¿«ç…§æ§åˆ¶å™¨å°†ç»‘å®šå®ƒä»¬ï¼Œå°†â€œ <code>Ready</code>å­—æ®µï¼ˆåœ¨â€œ <code>Status</code> ï¼‰è®¾ç½®ä¸º<code>True</code> ï¼Œè¡¨ç¤ºå¿«ç…§å·²å‡†å¤‡å°±ç»ªã€‚ <br><br><h2> ä»Kubernetesä¸­çš„å¿«ç…§å‡†å¤‡æ–°å· </h2><br> è¦åˆ›å»ºä¸€ä¸ªé¢„å¡«å……äº†å¿«ç…§å¯¹è±¡ä¸­æ•°æ®çš„æ–°å·ï¼Œè¯·ä½¿ç”¨<code>PersistentVolumeClaim</code>çš„new <code>dataSource</code>å­—æ®µã€‚ å®ƒå…·æœ‰ä¸‰ä¸ªå‚æ•°ï¼š <br><br><ul><li>  <code>VolumeSnapshot</code>ä»£è¡¨å¿«ç…§æºçš„<code>VolumeSnapshot</code>å¯¹è±¡çš„åç§°ï¼› </li><li>  <code>VolumeSnapshot</code>åº”è¯¥è®¾ç½®ä¸º<code>VolumeSnapshot</code> ; </li><li>  <code>apiGroup</code>åº”è¯¥æ˜¯<code>snapshot.storage.k8s.io</code> ã€‚ </li></ul><br> å‡å®šæºçš„åç§°ç©ºé—´ï¼ˆ <code>VolumeSnapshot</code> ï¼‰ä¸<code>PersistentVolumeClaim</code>çš„åç§°ç©ºé—´åŒ¹é…ã€‚ <br><br><pre> <code class="plaintext hljs">apiVersion: v1 kind: PersistentVolumeClaim metadata: name: pvc-restore Namespace: demo-namespace spec: storageClassName: csi-storageclass dataSource: name: new-snapshot-demo kind: VolumeSnapshot apiGroup: snapshot.storage.k8s.io accessModes: - ReadWriteOnce resources: requests: storage: 1Gi</code> </pre> <br> åˆ›å»º<code>PersistentVolumeClaim</code>å¯¹è±¡æ—¶ï¼Œå®ƒå°†è°ƒç”¨æ–°å·çš„é…ç½®ï¼Œè¯¥æ–°å·å·²é¢„å¡«å……äº†æ¥è‡ªæŒ‡å®šå¿«ç…§çš„æ•°æ®ã€‚ <br><br><h2> å¦‚æœæˆ‘æ˜¯å­˜å‚¨å¼€å‘äººå‘˜ï¼Œå¦‚ä½•ä¸ºæˆ‘çš„CSIé©±åŠ¨ç¨‹åºæ·»åŠ å¿«ç…§æ”¯æŒï¼Ÿ </h2><br> ä¸ºäº†æä¾›å¯¹å¿«ç…§çš„æ”¯æŒï¼Œåº”å°†å…¶ä»–æ§åˆ¶å™¨åŠŸèƒ½æ·»åŠ åˆ°CSIé©±åŠ¨ç¨‹åºï¼š <code>CREATE_DELETE_SNAPSHOT</code>å’Œ<code>LIST_SNAPSHOTS</code> ï¼Œä»¥åŠå…¶ä»–RPCæ§åˆ¶å™¨ï¼š <code>CreateSnapshot</code> ï¼Œ <code>DeleteSnapshot</code> ï¼Œ <code>ListSnapshots</code> ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="">CSIè§„èŒƒ</a> ã€‚ <br><br> å°½ç®¡Kubernetesæä¾›äº†æ‰“åŒ…å’Œéƒ¨ç½²CSI Volume Driverçš„<a href="">æœ€åŸºæœ¬å‡†åˆ™</a> ï¼Œä½†æ˜¯è¿˜æ˜¯<a href="">å»ºè®®ä½¿ç”¨ä¸€ç§æœºåˆ¶</a>åœ¨Kubernetesä¸­éƒ¨ç½²ä»»æ„å®¹å™¨åŒ–çš„CSIé©±åŠ¨ç¨‹åºï¼Œä»¥ç®€åŒ–æ­¤è¿‡ç¨‹ã€‚ <br><br> ä½œä¸ºå»ºè®®çš„éƒ¨ç½²è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼ŒKuberneteså›¢é˜Ÿå»ºè®®ä½¿ç”¨å„ç§é™„å¸¦ï¼ˆå³è¾…åŠ©ï¼‰å®¹å™¨ï¼ŒåŒ…æ‹¬å¸¦æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤–éƒ¨å¿«ç…§</a>å™¨çš„é™„å¸¦å®¹å™¨ã€‚ <br><br> æåˆ°çš„å¤–éƒ¨å¿«ç…§ç¨‹åºç›‘è§†APIæœåŠ¡å™¨ä¸­çš„<code>VolumeSnapshot</code>å’Œ<code>VolumeSnapshotContent</code>å¯¹è±¡ï¼Œå¹¶ä¸ºCSIç«¯ç‚¹è°ƒç”¨<code>CreateSnapshot</code>å’Œ<code>DeleteSnapshot</code> ã€‚ å¸¦æœ‰CSI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">external-provisioner</a>çš„sidecarå®¹å™¨ä¹Ÿå·²æ›´æ–°ï¼Œä»¥æ”¯æŒä½¿ç”¨æ–°çš„PVC <code>dataSource</code>å­—æ®µä»å¿«ç…§è¿›è¡Œå·æ¢å¤ã€‚ <br><br> ä¸ºäº†æ”¯æŒå¿«ç…§åŠŸèƒ½ï¼Œå»ºè®®å­˜å‚¨åˆ¶é€ å•†åœ¨å¤–éƒ¨ç½®å¤‡å™¨ä¹‹å¤–ï¼Œè¿˜é€šè¿‡å¤–éƒ¨å¿«ç…§ç¨‹åºéƒ¨ç½²sidecarå®¹å™¨ï¼Œå¹¶å°†CSIé©±åŠ¨ç¨‹åºæ”¾åœ¨<code>StatefulSet</code> ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š <br><br><img src="https://habrastorage.org/webt/9e/og/xm/9eogxmximi8i_y-6tlhber-xjts.png"><br><br> åœ¨<a href="">æ­¤éƒ¨ç½²ç¤ºä¾‹ä¸­ï¼Œæœ‰</a>ä¸¤ä¸ªsidecarå®¹å™¨ï¼Œä¸€ä¸ªå¤–éƒ¨ä¾›åº”å™¨å’Œä¸€ä¸ªå¤–éƒ¨å¿«ç…§å™¨ï¼Œå¹¶ä¸”CSIé©±åŠ¨ç¨‹åºä¸StatefulSetå®¹å™¨å†…çš„CSIä¸»æœºè·¯å¾„æ’ä»¶ä¸€èµ·éƒ¨ç½²ã€‚  CSIä¸»æœºè·¯å¾„æ˜¯ä¸€ä¸ªç¤ºä¾‹æ’ä»¶ï¼Œä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ <br><br><h2>  alphaç‰ˆæœ¬çš„å±€é™æ€§æ˜¯ä»€ä¹ˆï¼Ÿ </h2><br>  Kubernetesä¸­å¿«ç…§å®ç°çš„Alphaç‰ˆæœ¬å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š <br><br><ul><li> ä¸æ”¯æŒå°†ç°æœ‰å·å›æ»šåˆ°å¿«ç…§ä»£è¡¨çš„å…ˆå‰çŠ¶æ€ï¼ˆä»…æ”¯æŒä»å¿«ç…§é…ç½®æ–°å·ï¼‰ã€‚ </li><li> å¿«ç…§ä¸­çš„ç°æœ‰<code>PersistentVolumeClaim</code>ä¸æ”¯æŒå°±åœ°è¿˜åŸï¼š é€šè¿‡å¿«ç…§é…ç½®æ–°å·æ˜¯å¯è¡Œçš„ï¼Œä½†ä¸ä¼šæ›´æ–°ç°æœ‰çš„<code>PersistentVolumeClaim</code> ï¼Œä½¿å…¶æŒ‡å‘æ–°å·ï¼Œå¹¶ä¸”PVCå›æ»šåˆ°è¾ƒæ—©çš„çŠ¶æ€ï¼ˆä»…æ”¯æŒé€šè¿‡æ–°PV / PVCä½¿ç”¨ä»å¿«ç…§åˆ›å»ºçš„æ–°å·ï¼‰ã€‚ </li><li> å¿«ç…§ä¸€è‡´æ€§çš„ä¿è¯ä¸ä¼šè¶…å‡ºå­˜å‚¨ç³»ç»Ÿæä¾›çš„ä¿è¯ï¼ˆä¾‹å¦‚ï¼Œåˆ é™¤æ—¶çš„å®Œæ•´æ€§ï¼‰ã€‚ </li></ul><br><h2> æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ </h2><br>  Kuberneteså›¢é˜Ÿè®¡åˆ’æ ¹æ®æ”¶åˆ°çš„åé¦ˆå’ŒæŠ€æœ¯çš„é€‚åº”æ€§ï¼Œå°†CSIå¿«ç…§çš„å®ç°å¼•å…¥1.13æˆ–1.14ç‰ˆçš„betaç‰ˆæœ¬ã€‚ <br><br><h2> å¦‚ä½•æ‰¾å‡ºæ›´å¤šç»†èŠ‚ï¼Ÿ </h2><br> è¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">k8s.io/docs/concepts/storage/volume-snapshots</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">kubernetes-csi.github.io/docsä¸Šçš„</a>å…¶ä»–å¿«ç…§æ–‡æ¡£ã€‚ <br><br><h2> è¯‘è€…çš„PS </h2><br> å¦è¯·å‚é˜…æˆ‘ä»¬çš„åšå®¢ï¼š <br><br><ul><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.12ï¼šå…³é”®åˆ›æ–°æ¦‚è¿°</a> â€ï¼› </li><li>  â€œæˆ‘ä»¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†è§£å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆä¸ä»…é™äºKubernetesï¼‰</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Rookæ˜¯Kubernetesçš„â€œè‡ªåŠ©å¼â€æ•°æ®ä»“åº“</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬åœ¨å°å‹é¡¹ç›®ä¸­ä½¿ç”¨Kubernetesçš„ç»éªŒ</a> â€ <i>ï¼ˆå®¡æŸ¥å’Œè§†é¢‘æŠ¥å‘Šï¼‰</i> ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç›‘æ§å’ŒKubernetes</a> â€ <i>ï¼ˆå®¡æŸ¥å’Œè§†é¢‘æŠ¥å‘Šï¼‰</i> ã€‚ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN426133/">https://habr.com/ru/post/zh-CN426133/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN426119/index.html">ä¸Šå¤ï¼šCryptonomiconé“</a></li>
<li><a href="../zh-CN426121/index.html">MC.exeï¼ˆæ¶ˆæ¯ç¼–è¯‘å™¨ï¼‰ï¼Œrc.exeï¼Œlink.exeä¸ºEventMessageFileç”Ÿæˆ.dll</a></li>
<li><a href="../zh-CN426123/index.html">å­¦ä¹ OpenGLã€‚ ç¬¬6.1è¯¾ã€‚ PBRæˆ–ç‰©ç†æ­£ç¡®çš„æ¸²æŸ“ã€‚ ç†è®º</a></li>
<li><a href="../zh-CN426125/index.html">èŒä¸šç±»å›ºé†‡ã€‚ ç”µæ¢¯</a></li>
<li><a href="../zh-CN426131/index.html">é€šè¿‡USBå°†é…ç½®ä¸‹è½½åˆ°FPGAæˆ–æ‹†å¸FTDI MPSSE</a></li>
<li><a href="../zh-CN426135/index.html">ç‰©è”ç½‘ä¸“ç”¨äº‘</a></li>
<li><a href="../zh-CN426137/index.html">è¯šä¿¡æ—¶ä»£</a></li>
<li><a href="../zh-CN426141/index.html">çº¢å¸½ç”¨Podmanå–ä»£Docker</a></li>
<li><a href="../zh-CN426143/index.html">3DåŠ¨ç”»-è§†é¢‘è¿˜æ˜¯äº’åŠ¨çš„ï¼Ÿ</a></li>
<li><a href="../zh-CN426145/index.html">ç‹¬ç«‹æ¥å—ç ”è®¨ä¼šï¼Œè«æ–¯ç§‘ï¼Œ10æœˆ23æ—¥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>