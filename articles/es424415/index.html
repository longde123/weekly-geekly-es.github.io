<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òπÔ∏è üå¶Ô∏è üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø Una soluci√≥n compleja a los problemas simples de los servicios web de HighLoad ‚òëÔ∏è üë®üèΩ‚ÄçüöÄ üßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una tarea clave de los sistemas WEB altamente cargados es la capacidad de procesar una gran cantidad de solicitudes. Este problema se puede resolver d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Una soluci√≥n compleja a los problemas simples de los servicios web de HighLoad</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424415/"><img src="https://habrastorage.org/webt/ml/qd/qi/mlqdqibdtdla5vfms90qpg9ydse.png"><br><br>  Una tarea clave de los sistemas WEB altamente cargados es la capacidad de procesar una gran cantidad de solicitudes.  Este problema se puede resolver de diferentes maneras.  En este art√≠culo, propongo considerar un m√©todo inusual para optimizar las solicitudes de back-end a trav√©s de la tecnolog√≠a de rango de contenido (rango).  Es decir, reducir su n√∫mero sin perder la calidad del sistema a trav√©s del almacenamiento en cach√© eficiente. <br><a name="habracut"></a><br>  Para empezar, propongo estudiar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo</a> en el que la tecnolog√≠a pre√°mbulo con un ejemplo para S2S se presenta de manera muy concisa e inteligible.  Adem√°s, es recomendable familiarizarse con mi primer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> sobre el uso de esta tecnolog√≠a para optimizar el trabajo con datos de mercado en un proyecto de intercambio de criptomonedas. <br><br>  En este art√≠culo, quiero mostrar que esta tecnolog√≠a puede usarse m√°s ampliamente que el primer art√≠culo demostrado.  Perm√≠tame recordarle que la informaci√≥n comercial ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://ru.wikipedia.org/wiki/%25D0%25AF%25D0%25BF%25D0%25BE%25D0%25BD%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2581%25D0%25B2%25D0%25B5%25D1%2587%25D0%25B8">velas</a> ) se obtiene mediante solicitudes de rango para archivos est√°ticos, que se preparan previamente por un servicio especial.  Ahora, quiero considerar las solicitudes de un back-end completo utilizando los mismos datos de mercado como ejemplo, y para las mismas velas, sin perder ganancias clave. <br><br>  Entonces, ¬øqu√© se planea lograr: <br><br><ol><li>  Optimizar las solicitudes de back-end (reducir su n√∫mero); </li><li>  Aumentar la velocidad de entrega de contenido al usuario final; </li><li>  Optimizar el tr√°fico. </li></ol><br>  Una vez m√°s, enfatizo que la tecnolog√≠a de rango es un est√°ndar ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RFC 2616</a> ).  Es compatible de forma nativa con los navegadores y pueden almacenar en cach√© las porciones de datos recibidas.  Por lo tanto, la siguiente solicitud del navegador, si hay una memoria cach√© real de la parte solicitada, se implementa en el cliente sin molestar a sus servidores. <br><br>  Si agrega <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CDN</a> entre el cliente y los servidores, puede obtener otra capa potente de almacenamiento en cach√©.  Y si en el primer caso, el almacenamiento en cach√© ocurrir√° para un cliente final espec√≠fico, luego emparejado con un CDN, tendr√° la oportunidad de almacenar datos en cach√© ya para un grupo de clientes finales. <br><br>  Por lo tanto, para realizar una solicitud real al servidor, la solicitud debe superar dos niveles de almacenamiento en cach√©, cada uno de los cuales reduce el volumen de solicitudes al servidor de destino.  Por supuesto, el "reducto" final, en la ruta de solicitud, puede ser su servidor con su cach√©. <br><br>  De las caracter√≠sticas del uso de la tecnolog√≠a de rango, debe tener en cuenta que funciona con porciones de bytes.  Es decir  con datos binarios  Y podemos solicitar intervalos de bytes exactos.  Deben responder, respectivamente, con un bloque binario. <br><br>  Creo que lo suficientemente introductorio.  Pasemos a un caso especial, y ya a modo de ejemplo, descubriremos c√≥mo podemos usar toda esta "felicidad" en un problema particular: solicitar velas para un intervalo determinado con una exposici√≥n determinada. <br><br>  Para empezar, como  Necesitamos trabajar con estructuras binarias, codifiquemos nuestra vela.  Para esto tomamos, por ejemplo, la siguiente estructura: <br><br><pre><code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">moment:</span></span> int32 /<span class="hljs-regexp"><span class="hljs-regexp">/   min: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   max: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   open: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   close: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   volume: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  average: float64 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  </span></span></code> </pre> <br>  Por lo tanto, nuestra estructura ocupar√° 52 bytes.  Lo tomamos como un cuanto: el bloque binario m√≠nimo. <br><br>  A continuaci√≥n, implementamos un controlador que aceptar√° solicitudes GET y analizar√° el encabezado del rango.  En este caso, traduciremos el intervalo solicitado a cuantos por divisi√≥n simple sin resto, es decir  por ejemplo, una solicitud de intervalo: <br><br> <code>Range: 5200-52000</code> <br> <br>  Debemos interpretar en la dimensi√≥n de nuestro cuanto como: <br><br> <code>Range: 100-1000</code> <br> <br>  En esencia, este ser√° el desplazamiento y el l√≠mite de nuestra consulta de base de datos. <br><br>  Con la definici√≥n de exposici√≥n es muy simple, podemos ponerla en la url.  Por ejemplo: <br><br> <code>/api/v1/candles/7m</code> <br> <br>  Es decir  solicitaremos velas con una exposici√≥n de 7 minutos.  Naturalmente, suponemos que este par√°metro se puede cambiar a petici√≥n de la interfaz. <br><br>  Ahora, conociendo la exposici√≥n requerida, el n√∫mero de la primera vela y el n√∫mero de la √∫ltima vela que solicita la interfaz, podemos ejecutar la consulta correspondiente a la base de datos. <br><br>  En general, recuerda mucho el cl√°sico problema de paginaci√≥n. <br><br>  Quedan peque√±as cosas.  Cada l√≠nea del resultado de la consulta se convierte en una estructura binaria (el mismo cuanto) y la matriz binaria resultante se muestra como el resultado de la consulta, y el rango de contenido se devuelve al encabezado de respuesta: <br><br> <code>Content-Range: [ ] / [[   ] * [ ]]</code> <br> <br>  Para  Pero, ¬øc√≥mo puede solicitar el frente el intervalo de tiempo deseado, e incluso en el intervalo de bytes?  ¬øC√≥mo sabe √©l alg√∫n n√∫mero de vela all√≠?  Aqu√≠, tambi√©n, todo fue inventado.  El rango admite desplazamiento relativo, p. <br><br> <code>Range: -52</code> <br> <br>  Solicite 52 bytes desde el final.  Es decir  La √∫ltima vela.  Ahora, conociendo el √∫ltimo momento de la √∫ltima vela, sabiendo, a partir de la respuesta, el tama√±o total del "archivo", puede calcular el n√∫mero total de velas, y desde aqu√≠ determinar el intervalo de bytes para solicitar la exposici√≥n de tiempo deseada. <br><br>  Si de repente quisiste hacer una pregunta, ¬øpor qu√© tantas dificultades?  Por favor regrese a sus objetivos.  Esta tecnolog√≠a "enmascar√≥" las consultas anal√≠ticas de la base de datos en archivos binarios para el CDN y el navegador.  Esto le permite transferir la mayor√≠a de las solicitudes repetidas al CDN y al cliente final. <br><br>  Quiz√°s surja otra pregunta: ¬øpor qu√© no utilizar el almacenamiento en cach√© simple de las solicitudes GET?  Bueno  Vamos a hacerlo bien.  Si ejecutamos dicha solicitud en REST cl√°sico: <br><br> <code>GET /api/v1/candles/7m?from=01-03-2018&amp;to=31-03-2018</code> <br> <br>  Obtendremos un cach√© √∫nico para esta solicitud.  Al ejecutar la siguiente consulta: <br><br> <code>GET /api/v1/candles/7m?from=15-03-2018&amp;to=20-03-2018</code> <br> <br>  Obtendremos otro cach√© √∫nico ...  aunque, tenga en cuenta, la segunda solicitud solicita los datos incluidos en la respuesta de la primera. <br><br>  Entonces, en el caso de la implementaci√≥n propuesta arriba (rango), la segunda solicitud no formar√° un cach√© separado, sino que utilizar√° los datos ya recibidos de la primera solicitud.  Y no entrar√° en el servidor.  Y esto, ahorrando el tama√±o de cach√©s y reduciendo el n√∫mero de llamadas al servidor. <br><br>  ¬øHay alguna desventaja en esta tecnolog√≠a?  Si  Son obvios: <br><br><ol><li>  Esta tecnolog√≠a no es adecuada para el cambio de datos a lo largo del tiempo, ya que  basado en el almacenamiento en cach√© total. </li><li>  CDN CloudFlare solo almacena en cach√© los archivos por completo.  Esto significa que si el cliente final solicita un intervalo de, por ejemplo, 1 a 100 bytes, CloudFlare realmente solicitar√° el archivo completo del servidor.  Es decir  en nuestro caso, cargar√° todas las velas con una cierta exposici√≥n.  Lo pondr√° solo y ya lo distribuir√° √©l mismo.  Esto incluso podr√≠a considerarse una ventaja, si no fuera por las restricciones en el lugar.  Y si puede formar respuestas "pesadas" y muchos par√°metros, entonces ... En general, est√° claro que el lugar terminar√°.  Quiz√°s no pudimos configurarlo correctamente.  Pero hasta ahora el resultado es el siguiente. </li><li>  Se requiere para administrar las cach√©s con prudencia.  Existen mecanismos suficientes para esto, pero requieren ajuste. </li><li>  El frontend deber√≠a poder analizar datos binarios y tener un conjunto de datos a bordo para trabajar con las solicitudes de rango. </li></ol><br>  Formular√≠a la viabilidad de implementar esta estrategia de la siguiente manera: cuando lo necesite, lo comprender√°.  Si ahora hay dudas, es √∫til saber sobre ella, pero no te molestes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424415/">https://habr.com/ru/post/es424415/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424403/index.html">Webinar abierto "√çndices"</a></li>
<li><a href="../es424407/index.html">Radiograf√≠a digital: de alfa a gamma</a></li>
<li><a href="../es424409/index.html">Recorrido fotogr√°fico por Audioman√≠a: segunda parte</a></li>
<li><a href="../es424411/index.html">¬øCu√°l es la diferencia de sonido entre el refuerzo y el bajo din√°mico?</a></li>
<li><a href="../es424413/index.html">Descripci√≥n general de la aplicaci√≥n 3D de electr√≥nica</a></li>
<li><a href="../es424417/index.html">Roskomnadzor informa sobre los resultados de una lucha de tres a√±os contra piratas</a></li>
<li><a href="../es424419/index.html">¬øQu√© sucede al crear un contenedor Flexbox?</a></li>
<li><a href="../es424421/index.html">Errores comunes de negocios en Internet que puede evitar</a></li>
<li><a href="../es424423/index.html">Google Chrome 69 inicia sesi√≥n autom√°ticamente en su cuenta y no borra las cookies de Google al borrar el historial</a></li>
<li><a href="../es424425/index.html">Estamos lanzando un proyecto Java con Maven de una nueva manera</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>