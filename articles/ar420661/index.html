<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌮 😵 ⬜️ البنية التحتية السحابية المستمرة ⚠️ 🔧 👵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="عرض توضيحي لاستخدام أدوات مفتوحة المصدر مثل Packer و Terraform لتقديم تغييرات البنية الأساسية باستمرار لبيئات السحابة المفضلة لدى المستخدمين. 


 استن...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>البنية التحتية السحابية المستمرة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/420661/" style=";text-align:right;direction:rtl"> عرض توضيحي لاستخدام أدوات مفتوحة المصدر مثل Packer و Terraform لتقديم تغييرات البنية الأساسية باستمرار لبيئات السحابة المفضلة لدى المستخدمين. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FJvl13EYtBU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  استندت المادة إلى عرض تقديمي قدمه Paul Stack في مؤتمر الخريف <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DevOops</a> 2017. Paul هو مطور بنية أساسية اعتاد العمل في HashiCorp وشارك في تطوير أدوات يستخدمها ملايين الأشخاص (على سبيل المثال ، Terraform).  غالبًا ما يتحدث في المؤتمرات وينقل الممارسة من واجهة تنفيذ CI / CD ، ومبادئ التنظيم الصحيح لجزء العمليات ، وهو قادر على شرح سبب قيام المسؤولين بذلك على الإطلاق.  باقي المقال في السرد. <br><a name="habracut"></a><br>  لذا ، فلنبدأ فورًا ببعض النتائج الرئيسية. <br><br><h3 style=";text-align:right;direction:rtl">  تمتص الخادم لفترة طويلة </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/7f5/1dc/232/7f51dc232bf87288dc7f5c1bf7140a0d.jpg"><br><br>  لقد عملت سابقًا في مؤسسة نشرنا فيها Windows Server 2003 في عام 2008 ، واليوم لا يزالون قيد الإنتاج.  ومثل هذه الشركة ليست وحدها.  باستخدام سطح المكتب البعيد على هذه الخوادم ، يتم تثبيت البرنامج يدويًا ، وتنزيل الملفات الثنائية من الإنترنت.  هذه فكرة سيئة للغاية ، لأن الخوادم ليست نموذجية.  لا يمكنك ضمان حدوث نفس الشيء في الإنتاج كما هو الحال في بيئة التطوير الخاصة بك ، في البيئة الوسيطة ، في بيئة ضمان الجودة. <br><br><h3 style=";text-align:right;direction:rtl">  البنية التحتية الثابتة </h3><br>  في عام 2013 ، ظهر مقال على مدونة تشاد فويلر بعنوان "رمي خوادمك وحرق كودك: بنية تحتية ثابتة ومكونات يمكن التخلص منها" (تشاد فويلر <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"قم</a> بتفريغ خوادمك وحرق كودك <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">: بنية أساسية غير قابلة للتغيير ومكونات يمكن التخلص منها"</a> ).  هذه في الغالب محادثة مفادها أن البنية التحتية الثابتة هي الطريق إلى الأمام.  لقد أنشأنا البنية التحتية ، وإذا كنا بحاجة إلى تغييرها ، فنحن نقوم بإنشاء بنية تحتية جديدة.  هذا النهج شائع جدًا في السحابة ، لأنه هنا سريع ورخيص.  إذا كان لديك مراكز بيانات فعلية ، فهذا أكثر صعوبة.  من الواضح أنه إذا قمت بتشغيل المحاكاة الافتراضية لمركز البيانات ، فإن الأمور تصبح أسهل.  ومع ذلك ، إذا استمر تشغيل الخوادم الفعلية في كل مرة ، فسيستغرق إدخال خادم جديد وقتًا أطول قليلاً من تعديل خادم موجود. <br><br><h3 style=";text-align:right;direction:rtl">  بنية تحتية يمكن التخلص منها </h3><br>  وفقًا للمبرمجين الوظيفيين ، فإن مصطلح "غير قابل للتغيير" هو في الواقع المصطلح الخاطئ لهذه الظاهرة.  لأنه لكي تكون ثابتة حقًا ، تحتاج بنيتك الأساسية إلى نظام ملفات للقراءة فقط: لن تتم كتابة أي ملفات محليًا ، ولا يمكن لأحد استخدام SSH أو RDP ، إلخ.  وبالتالي ، يبدو أن البنية التحتية في الواقع ليست ثابتة. <br><br>  تمت مناقشة المصطلحات على تويتر لمدة ستة أو حتى ثمانية أيام من قبل عدة أشخاص.  في النهاية ، اتفقوا على أن "البنية التحتية لمرة واحدة" هي صيغة أكثر ملاءمة.  عندما تنتهي دورة حياة "البنية التحتية لمرة واحدة" ، يمكن تدميرها بسهولة.  لا تحتاج إلى التمسك بها. <br><br>  سأعطي القياس.  لا تعتبر أبقار المزرعة بشكل عام حيوانات أليفة. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be9/a17/baf/be9a17baf223a45e34c63684197cc2ce.png"><br><br>  عندما يكون لديك ماشية في المزرعة ، لا تمنحهم أسماء فردية.  لكل فرد رقم وعلامة.  لذلك مع الخوادم.  إذا كنت لا تزال تنشئ خوادم يدويًا في الإنتاج في عام 2006 ، فلها أسماء مهمة ، على سبيل المثال ، "SQL Database on Production 01".  ولها معنى محدد للغاية.  وإذا تعطل أحد الخوادم ، فسيبدأ الجحيم. <br><br>  إذا مات أحد الحيوانات في القطيع ، يشتري المزارع حيوانًا جديدًا.  هذه هي "البنية التحتية لمرة واحدة". <br><br><h3 style=";text-align:right;direction:rtl">  التسليم المستمر </h3><br>  لذا ، كيف تدمج هذا مع التسليم المستمر؟ <br>  كل ما أتحدث عنه الآن موجود منذ فترة طويلة.  أنا أحاول فقط دمج أفكار تطوير البنية التحتية وتطوير البرمجيات. <br><br>  يلتزم مطورو البرامج منذ فترة طويلة بالتوصيل المستمر والتكامل المستمر.  على سبيل المثال ، كتب مارتن فاولر عن التكامل المستمر في مدونته في أوائل العقد الأول من القرن الحادي والعشرين.  لطالما شجع Jez Humble التسليم المستمر. <br><br>  إذا ألقيت نظرة فاحصة ، فلا يوجد شيء تم إنشاؤه خصيصًا لشفرة المصدر للبرنامج.  هناك تعريف موحد من ويكيبيديا: <i>التسليم المستمر هو مجموعة من الممارسات والمبادئ التي تهدف إلى إنشاء واختبار وإطلاق البرمجيات في أسرع وقت ممكن</i> . <br><br>  لا يعني التعريف تطبيقات الويب أو واجهات برمجة التطبيقات ، بل يتعلق بالبرامج بشكل عام.  يتطلب إنشاء برنامج ألغاز الكثير من قطع الألغاز.  وبهذه الطريقة يمكنك ممارسة التسليم المستمر لرمز البنية التحتية بنفس الطريقة. <br><br>  تطوير البنية التحتية والتطبيقات هي اتجاهات قريبة جدًا.  والأشخاص الذين يكتبون رمز التطبيق يكتبون أيضًا رمز البنية التحتية (والعكس صحيح).  تبدأ هذه العوالم في التوحد.  لم يعد هناك مثل هذا الفصل والفخاخ المحددة لكل من العوالم. <br><br><h3 style=";text-align:right;direction:rtl">  مبادئ وممارسات التسليم المستمر </h3><br>  التسليم المستمر لديه عدد من المبادئ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يجب أن تكون عملية تحرير / نشر البرنامج قابلة للتكرار وموثوقة. <br></li><li style=";text-align:right;direction:rtl">  أتمتة كل شيء! <br></li><li style=";text-align:right;direction:rtl">  إذا كان الإجراء صعبًا أو مؤلمًا ، فافعله كثيرًا. <br></li><li style=";text-align:right;direction:rtl">  حافظ على كل شيء في التحكم بالمصادر. <br></li><li style=";text-align:right;direction:rtl">  تم - تعني "لم يصدر". <br></li><li style=";text-align:right;direction:rtl">  دمج العمل مع الجودة! <br></li><li style=";text-align:right;direction:rtl">  كل شخص مسؤول عن عملية الإصدار. <br></li><li style=";text-align:right;direction:rtl">  زيادة الاستمرارية. <br></li></ul><br>  ولكن الأهم من ذلك ، أن التسليم المستمر له أربع ممارسات.  اصطحبهم وانقلهم مباشرة إلى البنية التحتية: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إنشاء ملفات ثنائية مرة واحدة فقط.  بناء الخادم الخاص بك مرة واحدة.  هنا نتحدث عن "التخلص" من البداية. <br></li><li style=";text-align:right;direction:rtl">  استخدم نفس آلية النشر في كل بيئة.  لا تمارس عمليات نشر مختلفة في التطوير والإنتاج.  يجب عليك استخدام نفس المسار في كل بيئة.  هذا مهم جدا. <br></li><li style=";text-align:right;direction:rtl">  اختبار النشر الخاص بك.  لقد أنشأت العديد من التطبيقات.  لقد خلقت الكثير من المشاكل لأنني لم أتبع آلية النشر.  يجب عليك دائما التحقق مما يحدث.  وأنا لا أقول أنه يجب عليك قضاء خمس أو ست ساعات في اختبار واسع النطاق.  يكفي "اختبار الدخان".  لديك جزء أساسي من النظام ، والذي ، كما تعلم ، يسمح لك ولشركتك بكسب المال.  لا تكن كسولًا جدًا لبدء الاختبار.  إذا لم تفعل ذلك ، فقد تكون هناك انقطاعات ستكلف أموال شركتك. <br></li><li style=";text-align:right;direction:rtl">  وأخيرًا ، أهم شيء.  إذا انكسر شيء ما ، فتوقف وقم بإصلاحه على الفور!  لا يمكنك السماح للمشكلة بأن تنمو وتتفاقم وتزداد سوءًا.  يجب عليك اصلاحها  هذا مهم حقًا. <br></li></ul><br>  هل قرأ أحد كتاب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">التسليم المستمر</a> ؟ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cad/9eb/b6f/cad9ebb6f6c3562724d78ef5a0454e7e.png"><br><br>  أنا متأكد من أن شركاتك ستدفع لك نسخة يمكنك نقلها داخل الفريق.  أنا لا أقول أنه يجب عليك الجلوس وقضاء يوم لقراءته.  إذا قمت بذلك ، فربما تريد إنهاء تكنولوجيا المعلومات.  لكنني أوصي دوريًا بإتقان أجزاء صغيرة من الكتاب ، وهضمها والتفكير في كيفية نقلها إلى بيئتك وثقافتك وعملتك.  قطعة صغيرة في كل مرة.  لأن العرض المستمر هو محادثة حول التحسين المستمر.  ليس من السهل أن تجلس في المكتب مع الزملاء والمدير وتبدأ محادثة بالسؤال: "كيف سننفذ التوصيل المستمر؟" ، ثم اكتب 10 أشياء على السبورة وبعد 10 أيام تفهم أنك نفذتها.  يستغرق هذا الكثير من الوقت ، ويسبب الكثير من الاحتجاجات ، لأنه مع إدخال التغييرات الثقافية. <br><br>  اليوم سنستخدم أداتين: Terraform و Packer (كلاهما من تطويرات Hashicorp).  ستتم مناقشة أخرى حول سبب استخدام Terraform وكيفية دمجها في بيئتنا.  ليس من قبيل الصدفة أن أتحدث عن هاتين الأداتين.  حتى وقت قريب ، عملت أيضًا في Hashicorp.  ولكن حتى بعد أن غادرت Hashicorp ، ما زلت أساهم في رمز هذه الأدوات ، لأنني أجدها مفيدة حقًا. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d0/4b0/807/5d04b08076e6d28da7cc17589d79de6d.png"><br><br>  يدعم Terraform التفاعل مع مقدمي الخدمة.  الموفرون هم الغيوم ، خدمات Saas ، إلخ. <br><br>  داخل كل مزود خدمة سحابية ، هناك العديد من الموارد ، مثل الشبكة الفرعية ، VPC ، موازن التحميل ، وما إلى ذلك. باستخدام DSL (لغة خاصة بالمجال) ، تخبر Terraform كيف ستبدو البنية التحتية الخاصة بك. <br><br>  يستخدم Terraform نظرية الرسم البياني. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c7/142/7d2/1c71427d2d18431acfe78d79797f9948.png"><br><br>  ربما تعرف نظرية الرسم البياني.  العقد هي أجزاء من بنيتنا التحتية ، مثل موازن التحميل أو الشبكة الفرعية أو VPC.  الأضلاع هي العلاقات بين هذه الأنظمة.  هذا هو كل ما أعتبره شخصياً ضروريًا لمعرفته حول نظرية الرسم البياني لاستخدام Terraform.  نترك الباقي للخبراء. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8de/db7/fe6/8dedb7fe6a72bd36d371f3576e841cfa.png"><br><br>  يستخدم Terraform في الواقع رسمًا بيانيًا موجهًا لأنه لا يعرف فقط العلاقات ، ولكن أيضًا ترتيبها: يجب تعيين A (افترض أن A هو VPC) على B ، وهي شبكة فرعية.  ويجب إنشاء B قبل C (مثيل) ، نظرًا لوجود إجراء محدد لإنشاء تجريدات في Amazon أو أي سحابة أخرى. <br>  يتوفر مزيد من المعلومات حول هذا الموضوع على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">موقع YouTube بواسطة</a> Paul Hinze ، الذي لا يزال مدير البنية التحتية في Hashicorp.  بالإشارة - محادثة رائعة حول البنية التحتية ونظرية الرسم البياني. <br><br><h3 style=";text-align:right;direction:rtl">  تدرب </h3><br>  كتابة كود أفضل بكثير من مناقشة نظرية. <br><br>  سبق لي أن أنشأت AMI (Amazon Machine Images).  أستخدم Packer لإنشائها وسأوضح لك كيفية القيام بذلك. <br><br>  AMI هو مثيل لخادم افتراضي في Amazon ، وهو محدد مسبقًا (من حيث التكوين والتطبيقات وما إلى ذلك) ويتم إنشاؤه من صورة.  أنا أحب أنه يمكنني إنشاء AMIs جديدة.  بشكل أساسي ، AMIs هي حاويات Docker الخاصة بي. <br><br>  لذا ، لدي AMI ، لديهم هوية.  بالانتقال إلى واجهة أمازون ، نرى أنه لدينا AMI واحد فقط ولا شيء أكثر: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/b65/563/4cbb65563af0eea258e8c5cdc936a318.png"><br><br>  يمكنني أن أريكم ما هو في AMI.  كل شيء بسيط للغاية. <br><br>  لدي نموذج ملف JSON: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"variables"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"builders"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"amazon-ebs"</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'region'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'source_ami'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_pty"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"instance_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"t2.micro"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_username"</span></span>: <span class="hljs-string"><span class="hljs-string">"ubuntu"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"associate_public_ip_address"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_virtualization_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"hvm"</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"application_instance-{{isotime \"2006-01-02-1504\"}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Version"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'version'}}"</span></span> } }], <span class="hljs-string"><span class="hljs-string">"provisioners"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"10m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo apt-get update -y"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo apt-get install -y ntp nginx"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/nginx.conf"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/index.html"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo mkdir -p /usr/share/nginx/html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/index.html /usr/share/nginx/html/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/nginx.conf /etc/nginx/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo systemctl enable nginx.service"</span></span> ] } ] }</code> </pre> <br>  لدينا متغيرات نمررها ، ولدى باكر قائمة بما يسمى بناة لمناطق مختلفة ؛  هناك الكثير منهم.  يستخدم Builder مصدر AMI خاصًا ، والذي أمرر به معرف AMI.  أعطيته اسم المستخدم وكلمة المرور لـ SSH ، وأشير أيضًا إلى ما إذا كان يحتاج إلى عنوان IP عام حتى يتمكن الأشخاص من الوصول إليه من الخارج.  في حالتنا ، لا يهم هذا حقًا ، لأنه مثيل AWS لـ Packer. <br>  قمنا أيضًا بتعيين اسم وعلامات AMI. <br><br>  ليس لديك لتحليل هذا الرمز.  هو هنا فقط ليريك كيف يعمل.  الجزء الأكثر أهمية هنا هو الإصدار.  ستصبح ذات صلة لاحقًا عندما ندخل Terraform. <br><br>  بعد استدعاء منشئ المثيل ، يتم تشغيل وكلاء التزويد عليه.  أقوم بتثبيت NCP و nginx لإظهار ما يمكنني فعله هنا.  أقوم بنسخ بعض الملفات وقمت بإعداد تكوين nginx.  كل شيء بسيط للغاية.  ثم أقوم بتفعيل nginx بحيث يبدأ عندما يبدأ المثيل. <br><br>  لذلك ، لدي خادم تطبيق ويعمل.  يمكنني استخدامه في المستقبل.  ومع ذلك ، دائمًا ما أتحقق من نماذج باكر.  لأنه تكوين JSON حيث قد تواجه بعض المشاكل. <br>  للقيام بذلك ، قم بتشغيل الأمر: <br><br> <code>make validate <br></code> <br>  أحصل على إجابة بأن قالب باكر تم التحقق منه بنجاح: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f0/aa3/1a7/2f0aa31a768c26246877688d0c81cc9e.png"><br><br>  هذا مجرد أمر ، لذا يمكنني توصيله بأداة CI (أي شخص).  في الواقع ، ستكون عملية: إذا قام المطور بتغيير القالب ، يتم إنشاء طلب السحب ، ستتحقق أداة CI من الطلب ، وتقوم بتنفيذ ما يعادل فحص القالب وتنشر القالب إذا نجح الفحص.  كل هذا يمكن دمجه في "السيد". <br>  نحصل على دفق لقوالب AMI - ما عليك سوى رفع الإصدار. <br><br>  لنفترض أن المطور أنشأ إصدارًا جديدًا من AMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc9/3b9/546/dc93b95464ccf7b7e6fbe959d4a5ddf0.png"><br><br>  سأقوم فقط بإصلاح الإصدار في الملفات من 1.0.0 إلى 1.0.1 لتظهر لك الفرق: <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Version: 1.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  سأعود إلى سطر الأوامر وأبدأ في إنشاء AMI. <br>  لا أحب أن أدير نفس الفرق.  أحب إنشاء AMI بسرعة ، لذلك أستخدم ملفات makefiles.  دعونا نلقي نظرة مع <code>cat</code> في ملفي: <br><br> <code>cat Makefile <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/163/0e4/bea/1630e4bea410b10ffcbb5fce2a27d595.png"><br><br>  هذا ملفي.  حتى أنني قدمت المساعدة: اكتب إنشاء وانقر فوق علامة التبويب ، ويظهر لي كل الهدف. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74d/cbb/611/74dcbb6110c7350483735a0f96d9fe90.png"><br><br>  لذا ، سنقوم بإنشاء إصدار جديد من AMI 1.0.1. <br><br> <code>make ami <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/879/16c/482/87916c482f6410c8a2fc73c150308409.png"><br><br>  عودة إلى Terraform. <br><br>  أؤكد أن هذا ليس رمز الإنتاج.  هذه مظاهرة.  هناك طرق للقيام بنفس الشيء بشكل أفضل. <br><br>  أستخدم وحدات Terraform في كل مكان.  نظرًا لأنني لم أعد أعمل في Hashicorp ، لذا يمكنني التعبير عن رأيي في الوحدات.  بالنسبة لي ، الوحدات في مستوى التغليف.  على سبيل المثال ، أحب أن أغلف كل شيء يتعلق بـ VPC: الشبكات والشبكات الفرعية وجداول التوجيه وما إلى ذلك. <br><br>  ما الذي يحدث في الداخل؟  قد لا يهتم المطورون الذين يعملون مع هذا الأمر.  يحتاجون إلى فهم أساسي لكيفية عمل السحابة ، ما هو VPC.  ولكن ليس من الضروري الخوض في التفاصيل.  فقط الأشخاص الذين يحتاجون حقًا لتغيير الوحدة النمطية يجب أن يفهموها. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a8/90c/b85/1a890cb85c3fb6a6580e8b6a25492f4f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/177/a14/a24/177a14a241d80ee6bcc2cf64f194ce4e.png"><br><br>  هنا سوف أقوم بإنشاء مورد AWS ووحدة VPC.  ما الذي يحدث هنا؟  خذ <code>cidr_block</code> المستوى <code>cidr_block</code> بإنشاء ثلاث شبكات فرعية خاصة وثلاث شبكات فرعية عامة.  فيما يلي قائمة بمناطق التوفر.  لكننا لا نعرف ما هي مناطق الوصول هذه. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/26b/ec1/4ea/26bec14eab18a025c33c2a871c4d3ed4.png"><br><br>  سنقوم بإنشاء VPN.  فقط لا تستخدم وحدة VPN هذه.  هذا هو openVPN ، الذي يقوم بإنشاء مثيل AWS واحد ليس لديه شهادة.  يستخدم عنوان IP العام فقط ويذكر هنا فقط لإظهار أنه يمكننا الاتصال بـ VPN.  هناك أدوات أكثر ملاءمة لإنشاء VPN.  استغرق الأمر مني حوالي 20 دقيقة وبيرتين لكتابة بلدي. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae3/a5f/8a6/ae3a5f8a6561b2b9f726e2e129dfcb2f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/6a8/f0e/7b9/6a8f0e7b965f44255365d50ad64669e0.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/078/e4c/073/078e4c073df61b68e97372c7e4730f5b.png"><br><br>  ثم نقوم بإنشاء <code>application_tier</code> ، وهي مجموعة قياس تلقائي - موازن تحميل.  تعتمد بعض تكوينات بدء التشغيل على معرف AMI ، وتجمع بين العديد من الشبكات الفرعية ومناطق التوافر ، وتستخدم أيضًا مفتاح SSH. <br>  دعنا نعود إلى هذا في ثانية. <br><br>  لقد ذكرت بالفعل مناطق التوفر.  وهي تختلف باختلاف حسابات AWS.  قد يكون لحسابي في الولايات المتحدة في الشرق حق الوصول إلى المناطق A و B و D. قد يكون لحساب AWS الخاص بك حق الوصول إلى B و C و E. وبالتالي ، عند إصلاح هذه القيم في الرمز ، سنواجه مشاكل.  اقترحنا في Hashicorp أنه يمكننا إنشاء مصادر البيانات هذه حتى نتمكن من سؤال أمازون عما هو متاح لنا.  تحت الغطاء ، نطلب وصفًا لمناطق التوفر ، ثم نرجع قائمة بجميع المناطق لحسابك.  بفضل هذا ، يمكننا استخدام مصادر البيانات لـ AMI. <br><br>  الآن نصل إلى قاع مظاهري.  لقد أنشأت مجموعة قياس تلقائي تعمل فيها ثلاث حالات.  بشكل افتراضي ، لديهم جميعًا الإصدار 1.0.0. <br><br>  عندما ننشر الإصدار الجديد من AMI ، سأبدأ تكوين Terraform مرة أخرى ، سيؤدي هذا إلى تغيير تكوين التشغيل ، وستتلقى الخدمة الجديدة الإصدار التالي من الرمز ، وما إلى ذلك ، ويمكننا التحكم فيه. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53e/030/d08/53e030d08a8820f28ce8970bdb2bcee8.png"><br><br>  نرى أن باكر قد انتهى ولدينا AMI جديد. <br>  أعود إلى أمازون ، وقم بتحديث الصفحة ورؤية AMI ثانية. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab7/966/88d/ab796688d7e117c00b12343d54547a3a.png"><br><br>  عودة إلى Terraform. <br><br>  بدءًا من الإصدار 0.10 ، قسمت Terraform الموفرين إلى مستودعات منفصلة.  ويحصل الأمر <code>init terraform</code> على نسخة من الموفر المطلوب للتشغيل. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a71/f24/5c1/a71f245c166bffd9cce8d2da21612bb3.png"><br><br>  تم تحميل موفري الخدمة.  نحن على استعداد للمضي قدما. <br>  بعد ذلك علينا تنفيذ <code>terraform get</code> - تحميل الوحدات اللازمة.  هم الآن على جهازي المحلي.  لذا ستحصل Terraform على جميع الوحدات محليًا.  بشكل عام ، يمكن تخزين الوحدات في مستودعاتها الخاصة على GitHub أو في أي مكان آخر.  هذا هو السبب في أنني تحدثت عن وحدة VPC.  يمكنك منح فريق الشبكة حق الوصول لإجراء التغييرات.  وهذه هي واجهة برمجة التطبيقات لفريق التطوير للعمل معهم.  مفيد حقا. <br><br>  الخطوة التالية هي بناء رسم بياني. <br><br>  ابدأ بـ <br><br> <code>terraform plan <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/854/852/ea8/854852ea82a25694dbef99af5832eb27.png"><br><br>  سيأخذ Terraform الحالة المحلية الحالية ويقارن مع حساب AWS ، مشيرًا إلى الاختلافات.  في حالتنا ، سيخلق 35 موارد جديدة. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ce/d53/2cc/3ced532cc5cbe65758669980fda88f9e.png"><br><br>  الآن نطبق التغييرات: <br><br> <code>terraform apply <br></code> <br><br>  ليس عليك القيام بكل هذا من الجهاز المحلي.  هذه مجرد أوامر لتمرير المتغيرات إلى Terraform.  يمكنك نقل هذه العملية إلى أدوات CI. <br>  إذا كنت تريد نقل هذا إلى CI ، يجب عليك استخدام الحالة البعيدة.  أود أن يستخدم أي شخص يستخدم Terraform في أي وقت للعمل مع حالة بعيدة.  من فضلك لا تستخدم الدولة المحلية. <br><br>  لاحظ أحد أصدقائي أنه حتى بعد كل سنوات العمل مع Terraform ، لا يزال يكتشف شيئًا جديدًا.  على سبيل المثال ، إذا كنت تقوم بإنشاء مثيل AWS ، فأنت بحاجة إلى تزويده بكلمة مرور ، ويمكنه حفظه في حالتك.  عندما عملت في Hashicorp ، افترضنا أنه ستكون هناك عملية تعاونية تغير كلمة المرور هذه.  لذلك ، لا تحاول تخزين كل شيء محليًا.  وبعد ذلك يمكنك وضع كل هذا في أدوات CI. <br><br>  لذا ، تم إنشاء البنية التحتية بالنسبة لي. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/040/c1d/c55040c1d4544a4d7c53f77a494c2be7.png"><br><br>  يمكن لـ Terraform إنشاء رسم بياني: <br><br> <code>terraform graph <br></code> <br><br>  كما قلت ، إنه يبني شجرة.  في الواقع ، يمنحك الفرصة لتقييم ما يحدث في البنية التحتية الخاصة بك.  سيوضح لك العلاقة بين جميع الأجزاء المختلفة - جميع العقد والحواف.  نظرًا لأن الاتصالات لها اتجاهات ، فإننا نتحدث عن رسم بياني موجه. <br><br>  سيكون الرسم البياني عبارة عن قائمة JSON يمكن حفظها في ملف PNG أو DOC. <br><br>  عودة إلى Terraform.  نحن بالفعل نقوم بإنشاء مجموعة قياس تلقائي. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9fe/253/799/9fe253799368629b6c98d7472cbc3634.png"><br><br>  مجموعة التحجيم التلقائي بسعة 3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0dd/2a3/e47/0dd2a3e47ef49ba119c37c6ee1118fe9.png"><br><br>  سؤال مثير للاهتمام: هل يمكننا استخدام Vault لإدارة الأسرار في Terraform؟  للأسف لا.  لا يوجد مصدر بيانات Vault لقراءة الأسرار في Terraform.  هناك طرق أخرى ، مثل متغيرات البيئة.  بمساعدتهم ، لا تحتاج إلى إدخال أسرار في التعليمات البرمجية ؛ يمكنك قراءتها كمتغيرات بيئة. <br><br>  لذا ، لدينا بعض مرافق البنية التحتية: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/107/2ef/61e/1072ef61ea789635cb6e9894005734b2.png"><br><br>  أدخل VPN الخاص بي السري للغاية (لا تكسر شبكات VPN الخاصة بي). <br><br>  أهم شيء هنا هو أن لدينا ثلاث حالات من التطبيق.  صحيح ، كان يجب أن أشير إلى إصدار التطبيق الذي يعمل عليها.  هذا مهم جدا. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/009/bef/b7d/009befb7dcb30e11c9454e3b27f036cf.png"><br>  كل شيء حقًا وراء VPN: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9f/5d3/e43/b9f5d3e436b981cfc21db8e42b782db5.png"><br><br>  إذا أخذت هذا ( <code>application-elb-1069500747.eu-west-1.elb.amazonaws.com</code> ) وقمت بلصقه في شريط عنوان المتصفح ، أحصل على ما يلي: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/016/40e/203/01640e2034e1cd80ff454b5c6b74c386.png"><br><br>  دعني أذكرك بأنني متصل بشبكة VPN.  إذا قمت بتسجيل الخروج ، فلن يكون العنوان المحدد متاحًا. <br>  نرى الإصدار 1.0.0.  وبغض النظر عن مدى تحديث الصفحة ، نحصل على 1.0.0. <br>  ماذا يحدث إذا قمت بتغيير الإصدار من 1.0.0 إلى 1.0.1 في التعليمات البرمجية؟ <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>] }</code> </pre> <br>  من الواضح أن أدوات CI ستضمن لك إنشاء الإصدار الصحيح. <br>  ألاحظ عدم وجود تحديثات يدوية!  نحن غير كاملين ، نرتكب أخطاء ، ويمكننا وضع الإصدار 1.0.6 بدلاً من 1.0.1 عند التحديث يدويًا. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.6"</span></span>] }</code> </pre><br>  ولكن دعنا ننتقل إلى نسختنا (1.0.1). <br><br> <code>terraform plan <br></code> <br><br>  حالة تحديثات Terraform: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb8/7f5/221/fb87f522107164e64498825e1e4e0562.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c39/8ec/61b/c398ec61bfdbd060b526417c56631b14.png"><br><br>  لذا ، في هذه اللحظة يخبرني أنه سيغير الإصدار في تكوين التشغيل.  نظرًا للتغيير في المعرف ، سيفرض إعادة تشغيل التكوين ، وستتغير مجموعة التحجيم التلقائي (يعد ذلك ضروريًا لتمكين تكوين الإطلاق الجديد). <br><br>  هذا لا يغير حالات التشغيل.  هذا مهم حقًا.  يمكنك متابعة هذه العملية واختبارها دون تغيير المثيلات في الإنتاج. <br><br>  ملاحظة: يجب عليك دائمًا إنشاء تكوين تشغيل جديد قبل تدمير التكوين القديم ، وإلا فسيكون هناك خطأ. <br><br>  دعنا نطبق التغييرات: <br><br> <code>terraform apply <br></code> <br><br>  نعود الآن إلى AWS.  عندما يتم تطبيق جميع التغييرات ، نذهب إلى مجموعة التحجيم التلقائي. <br>  دعنا ننتقل إلى تكوين AWS.  نرى أن هناك ثلاث حالات بتكوين تشغيل واحد.  هم نفس الشيء. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/365/ae7/49c/365ae749cd5c77ea0634247410b58da6.png"><br><br>  تضمن أمازون أنه إذا أردنا تشغيل ثلاث حالات من الخدمة ، فسيتم إطلاقها بالفعل.  لهذا السبب ندفع لهم المال. <br><br>  دعنا ننتقل إلى التجارب. <br><br>  تم إنشاء تكوين تشغيل جديد.  لذلك ، إذا قمت بحذف أحد المثيلات ، فلن يتلف الباقي.  هذا مهم.  ومع ذلك ، إذا كنت تستخدم المثيلات مباشرة ، أثناء تغيير بيانات المستخدم ، فسيؤدي ذلك إلى تدمير المثيلات "الحية".  من فضلك لا تفعل هذا. <br><br>  لذا ، احذف إحدى الحالات: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb3/373/05a/eb337305af7a4e537d2f5963661f909f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/244/711/a7c/244711a7c5beb5edd4863239e2997fc1.png"><br><br>  ماذا سيحدث في مجموعة التحجيم التلقائي عند إيقاف تشغيلها؟  سيظهر مثيل جديد في مكانه. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86d/1dd/8f5/86d1dd8f57f1af6e56ddf9054b777e91.png"><br><br>  هنا تجد نفسك في وضع مثير للاهتمام.  سيتم تشغيل المثيل مع التكوين الجديد.  أي أنه في النظام قد يكون لديك عدة صور مختلفة (مع تكوينات مختلفة).  في بعض الأحيان ، من الأفضل عدم حذف تكوين بدء التشغيل القديم على الفور من أجل الاتصال حسب الحاجة. <br><br>  هنا يصبح كل شيء أكثر إثارة للاهتمام.  لماذا لا تفعل ذلك مع البرامج النصية والأدوات CI ، وليس يدويًا ، كما أظهر؟  هناك أدوات يمكنها القيام بذلك ، مثل أدوات AWS الممتازة المفقودة على GitHub. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/948/2b7/96d/9482b796d437daa84cf7c26dc85aa08f.png"><br><br>  وماذا تفعل هذه الأداة؟  هذا هو نص bash الذي يتم تشغيله من خلال جميع الحالات في موازن التحميل ، ويدمرها واحدًا تلو الآخر ، مما يضمن إنشاء مواضع جديدة في مكانها. <br>  إذا فقدت إحدى حالاتي مع الإصدار 1.0.0 وظهرت نسخة جديدة - 1.1.1 ، أود أن أقتل كل 1.0.0 ، وأنقل كل شيء إلى الإصدار الجديد.  لأنني دائما أمضي قدما.  اسمحوا لي أن أذكركم ، لا أحب عندما يعيش خادم التطبيق لفترة طويلة. <br><br>  في أحد المشاريع ، كل سبعة أيام ، كان لدي نص برمجي للتحكم أدى إلى تدمير جميع الحالات في حسابي.  لذلك كان عمر الخادم لا يتجاوز سبعة أيام.  شيء آخر (المفضل) هو وضع علامة على الخوادم على أنها "ملطخة" باستخدام SSH في صندوق وتدميرها كل ساعة باستخدام برنامج نصي - لا نريد أن يقوم الناس بذلك يدويًا. <br><br>  تتيح لك برامج التحكم النصية هذه الحصول على أحدث إصدار دائمًا مع أخطاء ثابتة وتحديثات أمنية. <br><br>  يمكنك استخدام البرنامج النصي فقط عن طريق تشغيل: <br><br> <code>aws-ha-relesae.sh -a my-scaling-group <br></code> <br><br>  <code>-a</code> هي مجموعة التحجيم التلقائي الخاصة بك.  سيتصفح النص البرمجي جميع مثيلات مجموعة التحجيم التلقائي ويستبدلها.  يمكنك تشغيله ليس فقط يدويًا ، ولكن أيضًا من أداة CI. <br>  يمكنك القيام بذلك في ضمان الجودة أو في الإنتاج.  يمكنك القيام بذلك حتى في حساب AWS المحلي.  تفعل ما تريد ، في كل مرة باستخدام نفس الآلية. <br><br>  عودة إلى أمازون.  لدينا مثال جديد: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f4b/1aa/079/f4b1aa079ec971f111abce895d28c771.png"><br><br>  بعد تحديث الصفحة في المتصفح ، حيث رأينا سابقًا الإصدار 1.0.0 ، نحصل على: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff4/923/d78/ff4923d78d16d508c0e8bae753044c15.png"><br><br>  الشيء المثير للاهتمام هو أنه منذ أن أنشأنا نص إنشاء AMI ، يمكننا اختبار إنشاء AMI. <br><br>  هناك بعض الأدوات الرائعة ، مثل ServerScript أو Serverspec. <br><br>  يتيح لك Serverspec إنشاء مواصفات على غرار Ruby لاختبار كيفية ظهور خادم التطبيق الخاص بك.  على سبيل المثال ، أعطي أدناه اختبارًا يتحقق من تثبيت nginx على الخادم. <br><br><pre style=";text-align:right;direction:rtl"> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'spec_helper'</span></span> describe package(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_installed } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe service(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { sould be_enabled } it { sould be_running } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe port(<span class="hljs-number"><span class="hljs-number">80</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_listening } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  يجب تثبيت Nginx وتشغيله على الخادم والاستماع إليه على المنفذ 80.  يمكنك القول أن المستخدم X يجب أن يكون متاحًا على الخادم.  ويمكنك وضع كل هذه الاختبارات في مكانها.  وبالتالي ، عند إنشاء AMI ، يمكن لأداة CI التحقق مما إذا كانت AMI مناسبة لغرض معين.  ستعرف أن AMI جاهزة للإنتاج. <br><br><h3 style=";text-align:right;direction:rtl">  بدلا من الاستنتاج </h3><br>  من المحتمل أن ماري بوبينديك هي واحدة من أروع النساء اللواتي سمعت بهن على الإطلاق.  في وقت ما ، تحدثت عن كيفية تطور تطوير البرمجيات الخالية من الدهن على مر السنين.  وكيف ارتبطت بشركة 3M في الستينيات ، عندما انخرطت الشركة حقًا في التطوير الهزيل. <br><br>  وسألت السؤال: كم من الوقت ستستغرق مؤسستك لنشر التغييرات المرتبطة بسطر واحد من التعليمات البرمجية؟  هل يمكنك جعل هذه العملية موثوقة وقابلة للتكرار؟ <br><br>  كقاعدة ، يتعلق هذا السؤال دائمًا برمز البرنامج.  كم من الوقت يستغرق إصلاح خطأ واحد في هذا التطبيق عند النشر في الإنتاج؟  ولكن لا يوجد سبب يمنعنا من استخدام نفس السؤال للبنية التحتية أو قواعد البيانات. <br><br>  عملت في شركة تدعى OpenTable.  فيه ، سمينا هذا مدة الدورة.  وفي OpenTable كانت تبلغ من العمر سبعة أسابيع.  وهذا جيد نسبيا.  أعرف الشركات التي تستغرق شهورًا لإرسال الرمز إلى الإنتاج.  في OpenTable ، راجعنا العملية لمدة أربع سنوات.  استغرق هذا الكثير من الوقت ، لأن المنظمة كبيرة - 200 شخص.  وقمنا بتقليل وقت الدورة إلى ثلاث دقائق.  كان ذلك ممكنًا بفضل قياسات تأثير تحولاتنا. <br><br>  الآن كل شيء مكتوب.  لدينا العديد من الأدوات والأمثلة ، هناك GitHub.  لذلك ، خذ أفكارًا من مؤتمرات مثل DevOops ، نفذها في مؤسستك.  لا تحاول تنفيذ كل شيء.  خذ شيئًا صغيرًا وبيعه.  أظهر شخص ما.  يمكن قياس تأثير التغيير البسيط وقياسه والمضي قدمًا! <br><blockquote style=";text-align:right;direction:rtl">  سيصل بول ستاك إلى سان بطرسبرغ في مؤتمر <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DevOops 2018</a> مع تقرير <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"اختبار النظام المستدام مع الفوضى"</a> .  سيتحدث بول عن منهجية هندسة الفوضى ويوضح كيفية استخدام هذه المنهجية في المشاريع الحقيقية. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar420661/">https://habr.com/ru/post/ar420661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar420651/index.html">اكتشف العلماء أدلة على سابقة غير سارة تتعلق بتغير المناخ</a></li>
<li><a href="../ar420653/index.html">خمسة أشياء عليك القيام بها لتجهيز منزلك على كوكب المريخ</a></li>
<li><a href="../ar420655/index.html">تستأجر الروبوتات الشقق من خلال Airbnb لمعرفة كيفية الحصول على العناصر بشكل أفضل</a></li>
<li><a href="../ar420657/index.html">التحليل: على ماله يمكن لأيلون ماسك سحب تسلا من البورصة</a></li>
<li><a href="../ar420659/index.html">حملة USB من HRF (مؤسسة حقوق الإنسان) "محركات أقراص فلاش من أجل الحرية"</a></li>
<li><a href="../ar420663/index.html">مقاييس بسيطة وطريقة لتوفير الوقت عند البحث عن مشاكل في البنية التحتية</a></li>
<li><a href="../ar420665/index.html">بناء تطبيق على .NET Core و Kubernetes: تجربتنا</a></li>
<li><a href="../ar420667/index.html">مبادئ تشغيل بروتوكول EIGRP</a></li>
<li><a href="../ar420669/index.html">نظرة عامة على سوق أتمتة المشاريع: حلول لشركات إدارة وإدارة الإسكان والمرافق</a></li>
<li><a href="../ar420671/index.html">[ايكاترينبرغ ، إعلان] UralJS # 9 - ثلاثة تقارير حول الخدمات الدقيقة والاختبار وتسجيل الأخطاء في المقدمة</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>