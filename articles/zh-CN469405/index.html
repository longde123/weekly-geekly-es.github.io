<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎸 🧑🏽‍🤝‍🧑🏼 🕶️ 深度学习现已使用Java ⬛️ 🙅🏽 👦🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="不喜欢Java？ 是的，您不知道如何烹饪！ Mani Sarkar邀请我们熟悉Valohai工具，该工具可让您使用Java进行模型研究。 



 译者的免责声明 我希望这不是广告刊物。 我不隶属于Valohai。 我刚刚翻译了我引用该链接的文章。 如果翻译得很笨拙，请加入PM。 如有必要，我可以删...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>深度学习现已使用Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469405/"> 不喜欢Java？ 是的，您不知道如何烹饪！  Mani Sarkar邀请我们熟悉Valohai工具，该工具可让您使用Java进行模型研究。 <br><br><img src="https://habrastorage.org/webt/et/p-/se/etp-sezekre2qlznmvgdzlgds0a.png"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">译者的免责声明</b> <div class="spoiler_text">我希望这不是广告刊物。 我不隶属于Valohai。 我刚刚翻译了我引用该链接的文章。 如果翻译得很笨拙，请加入PM。 如有必要，我可以删除链接并提及其他外部资源。 感谢您的理解。 <br></div></div><br><h3> 引言 </h3><br> 前一段时间，我遇到了一个名为Valohai的云服务，它的用户界面以及设计和布局的简单性令我感到满意。 我要求一名Valohai成员提供服务，并收到了演示版。 在此之前，我使用GNU Parallel，JavaScript，Python和Bash编写了一个简单的管道-另一个仅使用GNU Parallel和Bash的管道。 <br><br> 我还考虑过使用现成的任务/工作流管理工具，例如Jenkins X，Jenkins Pipeline，Concourse或Airflow，但出于各种原因，我决定不使用它。 <br><br> 我注意到许多Valohai的示例和文档都基于Python和R及其各自的框架和库。 我决定不要错过这个机会，并且想纠正缺少示例和文档的问题。 <br><br>  Valohai促使我使用著名的Java库<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DL4J-Java深度学习</a>来实现某些东西。 <br><br> 在对Valohai的设计，布局和工作流程感到满意之后，我对Valohai的第一次体验给我留下了很好的印象。 创建者已经考虑了开发人员的工作流程和基础架构的各个方面。 在我们的世界中，基础架构开发过程主要由DevOps或SysOps团队控制，我们知道与之相关的细微差别和痛点。 <br><br><h3> 我们需要什么以及如何？ </h3><br> 在任何机器学习项目中，都有两个重要的组件（从高层的角度来看）-一个将与模型一起工作的代码，以及将与整个基础结构生命周期一起执行的基础结构一起工作的代码。 <br><br> 当然，之前，之中和之后都将需要一些步骤和组件，但为简单起见，我们需要代码和基础结构。 <br><br><h4> 代号 </h4><br> 对于代码，我选择了一个使用DL4J的复杂示例，这是一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MNist项目</a> ，训练集为60,000张图像，测试集为10,000张手写数字图像。 该数据集可通过DL4J库获得（就像Keras一样）。 <br><br> 在开始之前，建议您先看看我们将使用的源代码。  Java主类称为<a href="">org.deeplearning4j.feedforward.mnist.MLPMnistSingleLayerRunner</a> 。 <br><br><h4> 基础设施 </h4><br> 我们决定尝试使用Valohai作为我们进行实验（训练和模型评估）的基础结构的Java示例。  Valohai可以识别git存储库并直接连接到它们，从而使我们无论平台或语言如何都能执行代码-因此，我们将了解其工作原理。 这也意味着，如果您使用GitOps或“基础结构即代码”，那么一切也将为您工作。 <br><br> 为此，我们只需要在Valohai开设一个帐户即可。 创建免费帐户后，我们可以访问各种配置的多个实例。 对于我们想做的事情，Free-Tier绰绰有余。 <br><br><h4>  Java和Valohai的深度学习 </h4><br> 我们将提供对Docker映像的所有依赖关系，并使用它来编译我们的Java应用程序，训练模型并使用位于项目存储库根文件夹中的简单<a href="">valohai.yaml</a>文件在Valohai平台上对其进行评估。 <br><br><h4>  Java深度学习：DL4J </h4><br> 最简单的部分。 我们不需要做很多事情，只需收集jar并将数据集加载到Docker容器中即可。 我们有一个预先创建的Docker映像，其中包含创建Java应用程序所需的所有依赖项。 我们将此图像放在Docker Hub中，您可以通过搜索dl4j-mnist-single-layer（我们将使用YAML文件中定义的特殊标记）来找到它。 我们决定将GraalVM 19.1.1用作该项目的构建和运行时Java环境，并且将其内置到Docker映像中。 <br><br> 从命令行调用uber jar时，我们将创建类MLPMnistSingleLayerRunner，该类根据传递给以下参数的参数告诉我们预期的操作： <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ MLPMnistSingleLayerRunner mlpMnistRunner = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MLPMnistSingleLayerRunner(); JCommander.newBuilder() .addObject(mlpMnistRunner) .build() .parse(args); mlpMnistRunner.execute(); }</code> </pre> <br> 传递给uber jar的参数将被此类接受，并由execute（）方法处理。 <br><br> 我们可以使用--action训练参数来创建模型，并使用传递给Java应用程序的--action评估参数来评估创建的模型。 <br><br> 可以在以下各节中提到的两个Java类中找到完成此工作的Java应用程序的主要部分。 <br><br><h3> 模型训练 </h3><br> 致电 <br><br><pre> <code class="plaintext hljs">./runMLPMnist.sh --action train --output-dir ${VH_OUTPUTS_DIR} or java -Djava.library.path="" \ -jar target/MLPMnist-1.0.0-bin.jar \ --action train --output-dir ${VH_OUTPUTS_DIR}</code> </pre><br> 此命令在执行开始时传递的--output-dir参数指定的文件夹中创建一个名为mlpmnist-single-layer.pb的模型。 从Valohai的角度来看，它应该放在$ {VH_OUTPUTS_DIR}中，我们可以这样做（请参阅文件<a href="">valohai.yaml</a> ）。 <br><br> 有关源代码，请参见<a href="">MLPMNistSingleLayerTrain.java</a>类。 <br><br><h3> 模型评估 </h3><br> 致电 <br><br><pre> <code class="plaintext hljs">./runMLPMnist.sh --action evaluate --input-dir ${VH_INPUTS_DIR}/model or java -Djava.library.path="" \ -jar target/MLPMnist-1.0.0-bin.jar \ --action evaluate --input-dir ${VH_INPUTS_DIR}/model</code> </pre><br> 假定在调用应用程序时通过的--input-dir参数指定的文件夹中将存在一个名称为mlpmnist-single-layer.pb的模型（在训练阶段创建）。 <br><br> 有关源代码，请参见类<a href="">MLPMNistSingleLayerEvaluate.java</a> 。 <br><br> 我希望这段简短的插图可以阐明教导和评估模型的Java应用程序是如何工作的。 <br><br> 这就是我们所需要的，但不要犹豫，与其他<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">资源</a>一起使用（以及<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">README.md</a>和bash脚本），并满足您的好奇心和对如何实现的了解！ <br><br><h3> 瓦洛海 </h3><br>  Valohai允许我们自由链接我们的运行时，代码和数据集，如下面的YAML文件结构所示。 因此，各种组件可以彼此独立地开发。 因此，只有程序集和运行时组件才打包在我们的Docker容器中。 <br><br> 在运行时，我们将Uber JAR收集在Docker容器中，将其加载到内部或外部存储中，然后使用其他执行步骤从存储（或其他位置）中加载Uber JAR和数据集以开始训练。 这样，两个执行步骤就被断开了。 例如，我们可以一次编译一个jar，并在一个jar上完成数百个训练步骤。 由于程序集和运行时环境不必经常更改，因此我们可以对其进行缓存，并且可以在运行时动态访问代码，数据集和模型。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">valohai.yaml</a> <br> 将Java项目与Valohai基础结构集成的主要部分是确定位于项目文件夹根目录中的valohai.yaml文件中执行步骤的顺序。 我们的valohai.yaml看起来像这样： <br><br><pre> <code class="xml hljs">--- - step: name: Build-dl4j-mnist-single-layer-java-app image: neomatrix369/dl4j-mnist-single-layer:v0.5 command: - cd ${VH_REPOSITORY_DIR} - ./buildUberJar.sh - echo "~~~ Copying the build jar file into ${VH_OUTPUTS_DIR}" - cp target/MLPMnist-1.0.0-bin.jar ${VH_OUTPUTS_DIR}/MLPMnist-1.0.0.jar - ls -lash ${VH_OUTPUTS_DIR} environment: aws-eu-west-1-g2-2xlarge - step: name: Run-dl4j-mnist-single-layer-train-model image: neomatrix369/dl4j-mnist-single-layer:v0.5 command: - echo "~~~ Unpack the MNist dataset into ${HOME} folder" - tar xvzf ${VH_INPUTS_DIR}/dataset/mlp-mnist-dataset.tgz -C ${HOME} - cd ${VH_REPOSITORY_DIR} - echo "~~~ Copying the build jar file from ${VH_INPUTS_DIR} to current location" - cp ${VH_INPUTS_DIR}/dl4j-java-app/MLPMnist-1.0.0.jar . - echo "~~~ Run the DL4J app to train model based on the the MNist dataset" - ./runMLPMnist.sh {parameters} inputs: - name: dl4j-java-app description: DL4J Java app file (jar) generated in the previous step 'Build-dl4j-mnist-single-layer-java-app' - name: dataset default: https://github.com/neomatrix369/awesome-ai-ml-dl/releases/download/mnist-dataset-v0.1/mlp-mnist-dataset.tgz description: MNist dataset needed to train the model parameters: - name: --action pass-as: '--action {v}' type: string default: train description: Action to perform ie train or evaluate - name: --output-dir pass-as: '--output-dir {v}' type: string default: /valohai/outputs/ description: Output directory where the model will be created, best to pick the Valohai output directory environment: aws-eu-west-1-g2-2xlarge - step: name: Run-dl4j-mnist-single-layer-evaluate-model image: neomatrix369/dl4j-mnist-single-layer:v0.5 command: - cd ${VH_REPOSITORY_DIR} - echo "~~~ Copying the build jar file from ${VH_INPUTS_DIR} to current location" - cp ${VH_INPUTS_DIR}/dl4j-java-app/MLPMnist-1.0.0.jar . - echo "~~~ Run the DL4J app to evaluate the trained MNist model" - ./runMLPMnist.sh {parameters} inputs: - name: dl4j-java-app description: DL4J Java app file (jar) generated in the previous step 'Build-dl4j-mnist-single-layer-java-app' - name: model description: Model file generated in the previous step 'Run-dl4j-mnist-single-layer-train-model' parameters: - name: --action pass-as: '--action {v}' type: string default: evaluate description: Action to perform ie train or evaluate - name: --input-dir pass-as: '--input-dir {v}' type: string default: /valohai/inputs/model description: Input directory where the model created by the previous step can be found created environment: aws-eu-west-1-g2-2xlarge</code> </pre><br><h4>  Build-dl4j-mnist-single-layer-java-app如何工作 </h4><br> 从YAML文件中，我们看到我们定义了这一步骤，首先使用Docker映像，然后运行脚本来构建Uber JAR。 我们的Docker映像具有自定义的构建环境依赖项（例如GraalVM JDK，Maven等）以创建Java应用程序。 我们没有提供任何输入或参数，因为这是组装阶段。 构建成功后，我们将名为MLPMnist-1.0.0-bin.jar（原始名称）的超级jar复制到/ valohai / outputs文件夹（表示为$ {VH_OUTPUTS_DIR}）。 此文件夹中的所有内容都会自动保存在项目的存储中，例如，在AWS S3回收站中。 最后，我们定义了AWS的工作。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 免费的Valohai帐户无法从Docker容器进行网络访问（默认情况下处于禁用状态），请与支持人员联系以启用此选项（我必须这样做），否则我们将无法下载Maven和其他依赖项在组装过程中。 <br></div></div><br><h4>  Run-dl4j-mnist-单层火车模型如何工作 </h4><br> 该定义的语义与上一步相似，不同之处在于我们指定了两个输入：一个输入用于超级jar（MLPMnist-1.0.0.jar），另一个输入用于数据集（解压到文件夹$ {HOME} /。Deeplearning4j中）。 我们将传递两个参数---action train和--output-dir / valohai / outputs。 在此步骤中创建的模型内置于/ valohai /输出/模型（表示为$ {VH_OUTPUTS_DIR} /模型）。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 在Valohai Web界面的``运行''选项卡上的输入字段中，除了使用基准：//或http：/ URL，我们还可以使用运行编号（即＃1或＃2）选择以前运行的输出。 /，输入文件名的几个字母也有助于搜索整个列表。 <br></div></div><br><h4>  Run-dl4j-mnist-单层-valu-model如何工作 </h4><br> 同样，此步骤与上一步相似，除了我们将传递两个参数--action评估和--input-dir / valohai / inputs / model。 此外，我们在输入中再次指出：在YAML文件中定义的部分，名称分别为dl4j-java-app和model，这两个部分均没有默认设置。 这将使我们能够选择uber jar和我们要评估的模型-它是通过​​使用Web界面的Run-dl4j-mnist-single-layer-train-model步骤创建的。 <br><br> 希望以上解释了定义文件中的步骤，但是如果您需要进一步的帮助，请随时查看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">教程</a> 。 <br><br><h3>  Valohai Web界面 </h3><br> 收到帐户后，我们可以登录并继续创建名称为mlpmnist-single-layer的项目，并将git repo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github.com/valohai/mlpmnist-dl4j-example</a>与该项目相关联，然后保存该项目。 <br><br> 现在，您可以完成该步骤，看看结果如何！ <br><br><h4> 生成DL4J Java应用程序 </h4><br> 转到Web界面中的“执行”选项卡，然后复制现有执行或使用[创建执行]按钮创建一个新的执行。 所有必需的默认参数将被填充。 选择Step Build-dl4j-mnist-single-layer-java-app。 <br><br> 对于<i>环境，</i>我选择了AWS eu-west-1 g2.2xlarge，然后单击页面底部的[创建执行]按钮以查看执行开始。 <br><br><img src="https://habrastorage.org/webt/le/18/zo/le18zo_udbscmekflaux7kqfjcw.png"><br><br><h3> 模型训练 </h3><br> 转到Web界面中的“执行”选项卡，并执行与上一步相同的操作，然后选择Run-dl4j-mnist-single-layer-train-model。 您将需要选择在上一步中创建的Java应用程序（只需在字段中输入jar）。 数据集已经使用valohai.yaml文件进行了预填充： <br><br><img src="https://habrastorage.org/webt/md/ls/ov/mdlsovhg3vw9zjnpoeqhxwzgk7w.png"><br><br> 单击[创建执行]开始。 <br><br><img src="https://habrastorage.org/webt/6n/mr/wm/6nmrwmveck6cgdughud1xgx7qdg.png"><br><br> 您将在控制台中看到结果： <br><br><pre> <code class="plaintext hljs">[&lt;--- snipped ---&gt;] 11:17:05 ======================================================================= 11:17:05 LayerName (LayerType) nIn,nOut TotalParams ParamsShape 11:17:05 ======================================================================= 11:17:05 layer0 (DenseLayer) 784,1000 785000 W:{784,1000}, b:{1,1000} 11:17:05 layer1 (OutputLayer) 1000,10 10010 W:{1000,10}, b:{1,10} 11:17:05 ----------------------------------------------------------------------- 11:17:05 Total Parameters: 795010 11:17:05 Trainable Parameters: 795010 11:17:05 Frozen Parameters: 0 11:17:05 ======================================================================= [&lt;--- snipped ---&gt;]</code> </pre><br> 在执行期间和执行之后，可以在“执行”主选项卡的“输出”选项卡上找到创建的模型： <br><br><img src="https://habrastorage.org/webt/pg/g2/-k/pgg2-kmsr85x87fedfoy24lreye.png"><br><br> 您可能会在Outputs子选项卡中注意到一些工件。 这是因为我们在每个时代的末期都维护着控制点。 让我们在日志中看一下： <br><br><pre> <code class="plaintext hljs">[&lt;--- snipped ---&gt;] 11:17:14 odolCheckpointListener - Model checkpoint saved: epoch 0, iteration 469, path: /valohai/outputs/checkpoint_0_MultiLayerNetwork.zip [&lt;--- snipped ---&gt;]</code> </pre><br> 检查点在三个文件中包含模型的状态： <br><br><pre> <code class="plaintext hljs">configuration.json coefficients.bin updaterState.bin</code> </pre><br><h3> 模型训练。 元数据 </h3><br> 您可能已经在执行日志中注意到以下条目： <br><br><pre> <code class="plaintext hljs">[&lt;--- snipped ---&gt;] 11:17:05 {"epoch": 0, "iteration": 0, "score (loss function)": 2.410047} 11:17:07 {"epoch": 0, "iteration": 100, "score (loss function)": 0.613774} 11:17:09 {"epoch": 0, "iteration": 200, "score (loss function)": 0.528494} 11:17:11 {"epoch": 0, "iteration": 300, "score (loss function)": 0.400291} 11:17:13 {"epoch": 0, "iteration": 400, "score (loss function)": 0.357800} 11:17:14 odolCheckpointListener - Model checkpoint saved: epoch 0, iteration 469, path: /valohai/outputs/checkpoint_0_MultiLayerNetwork.zip [&lt;--- snipped ---&gt;]</code> </pre><br> 此数据使Valohai可以获取以下值（JSON格式），这些值将用于构建度量，这些度量可以在执行期间和执行后在“执行”主选项卡上的其他“元数据”选项卡上看到： <br><br><img src="https://habrastorage.org/webt/et/p-/se/etp-sezekre2qlznmvgdzlgds0a.png"><br><br> 通过将ValohaiMetadataCreator类与模型连接，我们可以做到这一点，以便Valohai在训练期间引用该类。 在此类的情况下，我们得出了几个时代，即迭代次数和得分（损失函数的值）。 这是该类的代码片段： <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterationDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Model model, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> iteration, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> epoch)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (printIterations &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) printIterations = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (iteration % printIterations == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> score = model.score(); System.out.println(String.format( <span class="hljs-string"><span class="hljs-string">"{\"epoch\": %d, \"iteration\": %d, \"score (loss function)\": %f}"</span></span>, epoch, iteration, score) ); } }</code> </pre><br><h3> 模型评估 </h3><br> 一旦在上一步中成功创建了模型，就应该对其进行评估。 我们以与以前相同的方式创建一个新的执行，但是这次选择Run-dl4j-mnist-single-layer -valu-model步骤。 在开始执行之前，我们将需要再次选择Java应用程序（MLPMnist-1.0.0.jar）和创建的模型（mlpmnist-single-layer.pb）（如下所示）： <br><br><img src="https://habrastorage.org/webt/e9/_b/am/e9_bamnlhownoo40utziaqazg8e.png"><br><br> 选择所需的模型作为输入后，单击[创建执行]按钮。 它的执行速度比上一个要快，我们将看到以下结果： <br><br><img src="https://habrastorage.org/webt/gp/0i/co/gp0icomuurv7a0gt-niye5hyri4.png"><br><br> 我们看到，“ hello world”导致了一个模型，根据测试数据集，该模型的准确性约为97％。 混淆矩阵有助于查找将某个数字错误地预测为另一个数字的情况。 <br><br> 问题仍然存在（并且不在本文的讨论范围之内）-当面对真实数据时，模型的质量如何？ <br><br> 要克隆git存储库，您需要执行以下操作： <br><br><pre> <code class="plaintext hljs"> $ git clone https://github.com/valohai/mlpmnist-dl4j-example</code> </pre><br> 然后，我们需要将通过上一节中的Web界面创建的Valohai项目与存储在本地计算机（我们刚刚克隆的计算机）上的项目链接。 运行以下命令以执行此操作： <br><br><pre> <code class="plaintext hljs">$ cd mlpmnist-dl4j-example $ vh project --help ### to see all the project-specific options we have for Valohai $ vh project link</code> </pre><br> 您将看到如下所示： <br><br><pre> <code class="plaintext hljs">[ 1] mlpmnist-single-layer ... Which project would you like to link with /path/to/mlpmnist-dl4j-example? Enter [n] to create a new project.:</code> </pre><br> 选择1（或适合您的那个），您将看到以下消息： <br><br><pre> <code class="plaintext hljs">Success! Linked /path/to/mlpmnist-dl4j-example to mlpmnist-single-layer.</code> </pre><br> 在继续之前，还要做一件事，通过执行以下操作确保您的Valohai项目与最新的git项目同步： <br><br><pre> <code class="plaintext hljs"> $ vh project fetch</code> </pre><br><img src="https://habrastorage.org/webt/h0/l4/vb/h0l4vbe1eqis5kb9sd7gfslbozk.png"><br><br> 现在，我们可以使用以下命令从CLI完成步骤： <br><br><pre> <code class="plaintext hljs"> $ vh exec run Build-dl4j-mnist-single-layer-java-app</code> </pre><br> 执行完成后，我们可以使用以下命令进行检查： <br><br><pre> <code class="plaintext hljs">$ vh exec info $ vh exec logs $ vh exec watch</code> </pre><br><h3> 结论 </h3><br> 如我们所见，与DL4J和Valohai一起工作非常方便。 此外，我们可以开发构成实验（研究）的各种组件，即构建/运行时环境，代码和数据集，并将它们集成到我们的项目中。 <br><br> 本文中使用的示例模板是开始创建更复杂项目的好方法。 您可以使用Web或命令行界面来与Valohai一起工作。 使用CLI，您还可以将其与安装和脚本（甚至与CRON或CI / CD作业）集成。 <br><br> 另外，很明显，如果我正在从事与AI / ML / DL相关的项目，则不必担心创建和维护端到端管道（过去许多人都必须这样做）。 <br><br><h5> 参考文献 </h5><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub上的mlpmnist-dl4j-examples项目</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">很棒的AI / ML / DL资源</a> </li><li>  <a href="">Java AI / ML / DL资源</a> </li><li>  <a href="">深度学习和DL4J资源</a> </li></ol><br> 感谢您的关注！ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN469405/">https://habr.com/ru/post/zh-CN469405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN469393/index.html">Flare-On 2019报道</a></li>
<li><a href="../zh-CN469395/index.html">在何处以及如何使用多列（CSS列）</a></li>
<li><a href="../zh-CN469399/index.html">阿尔汉格尔斯科耶博物馆附近的无线网络</a></li>
<li><a href="../zh-CN469401/index.html">3CX WebMeeting服务更新，Elastix在线转换器和新视频教程</a></li>
<li><a href="../zh-CN469403/index.html">我们正在面试高级软件开发人员的职位</a></li>
<li><a href="../zh-CN469407/index.html">ARIES PLC110 [M02] -MS4，HMI，OPC和SCADA，或一个人需要多少甘菊茶。 第一部分</a></li>
<li><a href="../zh-CN469409/index.html">使用Performance Analyzer进行Linux分析</a></li>
<li><a href="../zh-CN469411/index.html">RE：痛苦和眼泪在Svelte 3</a></li>
<li><a href="../zh-CN469413/index.html">上周第382期（2019年9月22日至29日）的前端世界摘要</a></li>
<li><a href="../zh-CN469415/index.html">最小的事务隔离级别</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>