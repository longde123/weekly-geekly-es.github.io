<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📩 🛌🏾 🤱🏼 Малиновый Прог против Интернета Кирпичей, или Raspberry Pi с графикой на read-only microSD 😞 👨‍⚖️ 🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Raspberry Pi microSD, read-only . - - , . . . 
 
  HDMI, . , Pi: . , . ,  , , à la turnkey box. , , Ubuntu (.. Raspbian Jessie) microSD, swap . , face...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Малиновый Прог против Интернета Кирпичей, или Raspberry Pi с графикой на read-only microSD</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400011/"><blockquote> Raspberry Pi      microSD,     read-only   .  -    -   ,      .  .       . </blockquote><br>
<br>
<img width="300" height="286" align="left" src="https://habrastorage.org/files/3fe/926/297/3fe9262971804740b78796c19094cd31.jpg">         HDMI,      . ,      <i>Pi</i>: <i></i>.  ,    .  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a>,        ,   <i>à la turnkey box</i>.  ,      ,  Ubuntu (.. Raspbian Jessie)   microSD,   swap  .   , face palm.<br>
<br>
  .   —     ,    .        ,     fsck.     ,        ,     .<br>
<br>
,              -,     ,   -    .   , ,   .  — .<a name="habracut"></a><br>
<br>
<h4>  </h4><br>
   ,   ,      . <br>
<br>
<div class="spoiler"><b class="spoiler_title"> ,    </b><div class="spoiler_text">      -   RPi,      (!)   . ,    Raspbian -   720   . ,   12     ,    ,   «» USB-  4 .   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">   RPi</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ECIO28P</a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a> .</div></div><br>
,       :   -  ,         .      -  <s></s>   , -         ( PS/2    ). ,       ,    über-   ,        .  :    .      ,    ,      .     -  ,   .<br>
<br>
<div class="spoiler"><b class="spoiler_title"> DPMS,     GUI-</b><div class="spoiler_text">  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">LightDM</a>,   X- <abbr title="Display Power Management Signaling">DPMS</abbr>   <code><nobr>/etc/lightdm/lightdm.conf</nobr></code>:<br>
<pre><code class="plaintext">...
xserver-command=X -s 0 -dpms -nocursor
...</code></pre><br>
 <code>-nocursor</code>        .            <code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code>.    ,    <code>cron(8)</code>   718   <code><nobr>xscreensaver-command -deactivate</nobr></code> (  ,   ;-)</div></div><br>
  :  LightDM  ,     <code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">feh</a>   '@'       . . ..    ,   <code>lxpanel</code>,  <code>pcmanfm</code>,  <code>xscreensaver</code>,   DPMS     .<br>
<br>
      <code><nobr>apt-get</nobr></code>    <code>autostart</code>,          ,  X-,  ,        .      ,     .<br>
<br>
<blockquote><b>UPD</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Jaromir</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">unclutter</a>   ,    .    ,       .<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Spider55</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">LightDM</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">noDM</a>.   ,      .</blockquote><br>
<h4></h4><br>
    —  .         GPIO  I2C/PWM,    CSI-DSI   .        -    HDMI-,       «»  -       ,    .      ,        ,   .     ,           «» <i></i> ,       .      -,     . ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Sauron</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>.<br>
<br>
,    <i></i> ,       (..  )   .      :  Raspberry Pi     microSD   read-only,       <i></i> - .<br>
<br>
<h4> </h4><br>
             ,   SD-   . ,  SSD-      ,          ,     .       microSD?  ,     ,     ,    NAND-   .           ,     .      fsck.<br>
<br>
   microSD Raspberry Pi   read-only  , ..     ?  ,    (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>).      <i></i>      ,        .       ,      . ,  <i></i>        ,     .    ,    .<br>
<br>
<b>:</b>        -     ,    «»      .<br>
<br>
<b>:</b>            ,          ,   read-only,    ,        .<br>
<br>
<h4>: UnionFS</h4><br>
                 UnionFS         .  ,         ,     .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a> ,       . <br>
<br>
  ,    «» (read-only    microSD)      «»  ,      «»    .    microSD    read-only,         ,      . <s>    ?  EXT4,  ,     - -      -  ,      read-only.  <code>noatime</code>  ,     microSD.     ,   <code>/sys/block/mmcblk0/stat</code>     282612 ,    96,     read-only? ,    3000:1,  <i></i>   5:1.</s> (, ,     )<br>
<br>
<blockquote><b>UPD:</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">gattopazzo83</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Flash Media Kit</a>    - (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>).    100,000  ,   SLC-   microSD.         read-only,          ,   <i></i> («» -  «» ;-)</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">doga</a>,     «»          SD-     RPi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">doga</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">   </a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">mmc-utils</a>,     SD-,     Raspbian   . -   , , ,    .<br>
<div class="spoiler"><b class="spoiler_title">SD-</b><div class="spoiler_text">:<pre><code class="bash">udevadm info -a -n /dev/mmcblk0</code></pre><br>
  «»  <code>CID</code>  <code>CSD</code>,     (<code>name</code>),   (<code>serial</code>),   (<code>date</code>),   (<code>hwrev, fwrev, oemid, manfid</code>).      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">www.sdcard.org</a>    «»  (Simplified Specifications), . Part 1 Simplified, Physical Layer Simplified Specification.<br>
   <code>stat</code>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">kernel.org</a>.     ,           .<br>
  -  ,        <a href="" rel="nofollow">lsmmc.c</a>.<br>
«  »       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">RPi SD cards</a>   Embedded Linux,    .<br>
  —   —   ,   mmc-utils ,      .</div></div></blockquote><br>
<br>
<h4></h4><br>
 ,  «» ?        ,    1  1970 ,             NTP.          «»    46  ,   .   ,      —   .<br>
<br>
<blockquote><b>UPD:</b>   <br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">st1373</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>   I2C-    DS3231 (      ).      : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> RTC (  )  Raspberry Pi</a>.</blockquote><br>
<br>
<h4></h4><br>
       . ,  ,     ,    Adobe Flash    .        ,    ,   «»       .   SquashFS    .         ,      «»  read-only , ..   «»    ,    :     (?)      .     ,     root,    —       ,    .<br>
<br>
<h4> </h4><br>
      Rasbian Jessie       microSD   read-only,      .   .<br>
<br>
<h5>DISCLAIMER</h5><blockquote>   .      <code>root</code>,        <code>sudo</code>.  ,   ,  <i> </i>   <code>sudo</code>,     -.  ,      * * ,       ?        -,       0.33, ,     …    :      ,   <code>root</code>  <code>sudo bash</code>,   .<br>
</blockquote><br>
<h5>1. </h5><br>
 Raspbian Jessie Lite.  <code>raspi-config</code>       <code>pi</code>.  , Debian —   .      .<br>
<br>
<pre><code class="bash">apt-key update<font></font>
apt-get update</code></pre><br>
<h5>2.    </h5><br>
 , :<br>
<br>
<pre><code class="bash">apt-get install --no-install-recommends tightvncserver xtightvncviewer xserver-xorg xinit lxde-core lxappearance lightdm feh xprintidle policykit-1 busybox-syslogd ntpdate watchdog unionfs-fuse</code></pre><br>
:<br>
<br>
<pre><code class="bash">dpkg --purge rsyslog<font></font>
apt-get remove --purge wolfram-engine triggerhappy cron anacron logrotate dphys-swapfile fake-hwclock<font></font>
apt-get autoremove --purge</code></pre><br>
<br>
 <code>tightvncserver, xtightvncviewer, xprintidle  feh</code>     ,    .<br>
<br>
  ,  **  : <code>xserver-xorg xinit lxde-core lxappearance lightdm policykit-1</code>.<br>
<br>
<h5>3.   </h5><br>
  <code>raspi-config</code>        ,      <code>pi</code>.    <code>sudo</code>,      <code>pi</code>,    <code>pi</code>      .     <code>pu</code>   «»   .    (default shell)       ( <code><nobr>/usr/sbin/nologin</nobr></code>),      <code>/usr/local/bin/pu</code>.        ,       SSH,          .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Sauron</a> <i>et al</i>.<br>
<br>
<pre><code class="bash">adduser --home /home/pu --shell /usr/local/bin/pu --uid 990 --gecos "RPi p-u" --gid 1000 pu<font></font>
mkdir -p /home/pu/.config/lxsession/LXDE<font></font>
cp -p /etc/xdg/lxsession/LXDE/desktop.conf /home/pu/.config/lxsession/LXDE/desktop.conf<font></font>
touch /home/pu/.config/lxsession/LXDE/autostart<font></font>
chown -R pu:pi /home/pu<font></font>
sed -i 's/^#\?xserver-command=.*$/xserver-command=X -s 0 -dpms -nocursor/' /etc/lightdm/lightdm.conf<font></font>
sed -i 's/^#\?autologin-user=.*$/autologin-user=pu/' /etc/lightdm/lightdm.conf</code></pre><br>
       <code><nobr>/etc/lightdm/lightdm.conf</nobr></code>     ,     ,     :<br>
<br>
<pre><code class="plaintext">...<font></font>
xserver-command=X -s 0 -dpms -nocursor<font></font>
...<font></font>
autologin-user=pu<font></font>
...</code></pre><br>
<h5>4.   ( )</h5><br>
  Raspberry Pi 3 Model B,       :<br>
<br>
<pre><code class="bash">modprobe bcm2835_wdt<font></font>
echo "bcm2835_wdt " | sudo tee -a /etc/modules</code></pre><br>
      <code>[Install]</code>    <code><nobr>/lib/systemd/system/watchdog.service</nobr></code>:<br>
<br>
<pre><code class="plaintext">[Install]<font></font>
WantedBy=multi-user.target</code></pre> <br>
   :<br>
<br>
<pre><code class="bash">systemctl enable watchdog.service</code></pre><br>
      ,   .      , ,     ,   ,   ,      .. .  <code>watchdog(8)</code>  <code>watchdog.conf(5)</code><br>
<br>
<h5>5.  </h5><br>
      swap-,   .     <code><nobr>/boot/cmdline.txt</nobr></code>    <code>logo.nologo fastboot noswap</code>.      :<br>
<br>
<pre><code class="plaintext">logo.nologo dwc_otg.lpm_enable=0 console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait fastboot noswap</code></pre><br>
<h5>6.     Raspberry Pi  read-only</h5><br>
   , ,  .<br>
<br>
 ,      <code>mount_unionfs</code> -  <code><nobr>/usr/local/bin</nobr></code>.      +x (<code>chmod</code> 755  555).     <code>.orig</code>  <code>.rw</code>,      ():<br>
<br>
<pre><code class="bash">#!/bin/sh<font></font>
DIR=$1<font></font>
ROOT_MOUNT=$(awk '$2=="/" {print substr($4,1,2)}' &lt; /etc/fstab)<font></font>
if [ $ROOT_MOUNT = "rw" ]; then<font></font>
	/bin/mount --bind ${DIR}.orig ${DIR}<font></font>
else<font></font>
	/bin/mount -t tmpfs ramdisk ${DIR}.rw<font></font>
	/usr/bin/unionfs-fuse -o cow,allow_other,suid,dev,nonempty ${DIR}.rw=RW:${DIR}.orig=RO ${DIR}<font></font>
fi</code></pre> <br>
         :<br>
<br>
<pre><code class="bash">insserv -r bootlogs<font></font>
insserv -r alsa-utils<font></font>
<font></font>
rm -rf /var/lib/dhcp/<font></font>
ln -s /tmp /var/lib/dhcp</code></pre><br>
      <code>/home</code> - ,     <code>/etc</code>  <code>/var</code>     <code>/home</code>.       UnionFS (   <code>.orig</code>  <code>.rw</code>):<br>
<br>
<pre><code class="bash"><font></font>
cp -al /etc /etc.orig<font></font>
mv /var /var.orig<font></font>
mv /home /home.orig<font></font>
mkdir /etc.rw /var /var.rw /home /home.rw</code></pre><br>
,  <code>fstab(5)</code><br>
<br>
<pre><code class="plaintext">proc            /proc           proc    defaults        0       0<font></font>
/dev/mmcblk0p1  /boot           vfat    ro              0       2<font></font>
/dev/mmcblk0p2  /               ext4    ro              0       1<font></font>
mount_unionfs   /etc            fuse    defaults        0       0<font></font>
mount_unionfs   /var            fuse    defaults        0       0<font></font>
mount_unionfs   /home           fuse    defaults        0       0<font></font>
none            /tmp            tmpfs   defaults        0       0</code></pre><br>
<h5>7.    </h5><br>
  ,    <code>.bash_history</code>,  -  .. ,       ,   (,  <code><nobr>/var.orig</nobr></code>  <code>var</code>).<br>
<br>
   ,  .    ,   ,     <i>single user</i>     <code>root</code>.    ,    <i>read-only</i>  <i>read-write</i>  :<br>
<br>
<pre><code class="bash">mount -o rw,remount /</code></pre><br>
      read-only    , !<br>
  -.<br>
<br>
<h5>8.   </h5><br>
   ,       read-write (. ).    <code>fstab(5)</code> ,    <code>mount_unionfs</code>,   **     <code><nobr>/var.orig</nobr></code>    (  <code><nobr>/home.orig</nobr></code> ).    <code>/var</code>,    ,         <code>apt-get</code>     ,   ?  <code>apt-get</code>       .   , ;)<br>
<br>
<h4></h4><br>
 ,        (  read-only)  Raspberry Pi    ,    . ,            ,     :)<br>
<br>
           ( HDMI-),       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>, , ,   .   Raspberry Pi  ,   :)<br>
<br>
, .<br>
<br>
<blockquote><b>UPD:</b> OverlayFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">ValdikSS</a>   OverlayFS,     Linux  2014,     ,   <code>initramfs</code>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">art_gl</a>     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Raspbian with Read-only Root</a>.<br>
,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Domoticz</a>,         , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a> OverlayFS.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Sauron</a>    Domoticz.</blockquote><br>
<br>
<blockquote><b>UPD:</b> SquashFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Vooon</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Vcoderlab</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">av_in</a> et al     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">SquashFS</a>.    ,      «» <code>union mount</code>,          .    ,  SquashFS by-design <i></i>  read-only, ..       <i>firmware-</i>,   ()  ,    . <b>  </b>,    ,     .     ,      IoT         .   ,       ,        SquashFS,    -  ? ,     ,         community-      SquashFS,  ..   Raspberry Pi. , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">OpenELEC</a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b> F2FS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">nlykl</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">F2FS</a> aka «Flash-Friendly File System»,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">HOWTO: Replace the micro SD card's ext4 root partition by f2fs on the Raspberry PI</a>. DISCLAIMER:   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> F2FS</a>   -.</blockquote> <br>
<br>
<blockquote><b>UPD:</b>   <br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">ilmarin77</a>        : <a href="" rel="nofollow">Network booting</a>.    . ,    , ,      ,  (    )   .     USB-Ethernet LAN9514  0..70°C</blockquote><br>
<br>
<blockquote><b>UPD:</b>   USB-<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">ilmarin77</a>     USB: <a href="" rel="nofollow">How to boot from a USB Mass Storage Device on a Raspberry Pi 3</a>.      SSD,   USB,   ,  microSD,    USB 2.0 (- 30-40/,     ).      ,       . ,    read-only microSD,       SSD     ,      . USB-     ,   microSD,     .</blockquote><br>
<br>
<blockquote><b>UPD:</b>   (watchdog)<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">homecreate</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a>     <code>systemd</code>, ,   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
<h4>      ?</h4><br>
       .  ,  -        ,  S.M.A.R.T  HDD  SSD. SanDisk, ,     ,      EXTCSD.     - <i></i>,     Linux    .  , ,   <code>smartd(8)</code>    .<br>
<br>
     «  Linux-   SD-  /»   ,       ,     (..  uptime  ,    10 ). ,        ( sudo  root):<br>
<br>
<pre><code class="bash">uptime<font></font>
cat /sys/block/mmcblk0/stat | awk '{printf "Uptime read: %.3fMiB (%.1f%% I/Os merged) written: %.3f MiB (%.1f%% I/Os merged)\n", $3*512/1048576, $2/$1*100, $7*512/1048576, $6/$5*100}'</code></pre><br>
    ,            ,  ,   «» . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Meklon</a>       -,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">openELEC</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">KODI</a>.   6     72    66.   /   1:1,      SquashFS (        SD-      ).      /  5:1  10:1,     .    ,  10   —  <i></i>   ,      .<br>
   ,         :        512 ,    ,    erase-  .   <i>Optimizations for Cheap Flash Media</i>  Arnd Bergmann (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>, .)        «» ,  ..    32,  erase- 4..8.       «» ,    512    <s> </s>  erase-, ..       <s>64 </s>  ,   <code>stat</code>.          6/,   microSD-    .<br>
     ,     .</blockquote><br>
<br>
<h4></h4><br>
<blockquote>Make Raspbian System Read-Only<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">blog.pi3g.com/2014/04/make-raspbian-system-read-only</a><br>
()<br>
<br>
How to make RaspberryPi truly read-only, reliable and trouble-free<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">k3a.me/how-to-make-raspberrypi-truly-read-only-reliable-and-trouble-free</a><br>
( )<br>
<br>
Protect your Raspberry PI SD card, use Read-Only filesystem<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">hallard.me/raspberry-pi-read-only</a><br>
( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">sisaenkov</a>,  ,    )<br>
<br>
Stopping SD Card Corruption on Raspberry Pi’s Raspbian<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ideaheap.com/2013/07/stopping-sd-card-corruption-on-a-raspberry-pi</a><br>
( )<br>
<br>
Raspberry Pi    —   VNC  localhost<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">habrahabr.ru/post/212661</a><br>
<br>
 RTC (  )  Raspberry Pi<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">raspberrypi.ru/blog/598.html</a><br>
( I2C-  DS3231)<br>
<br>
How to boot from a USB Mass Storage Device on a Raspberry Pi 3<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md</a><br>
<br>
Network booting<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md</a><br>
<br>
ECIO(TM), a powerful USB programmable single chip computer based on PICmicro microcontroller technology<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">www.matrixtsl.com/product.php?Prod=ECIO28P</a><br>
<br>
Easy Raspberry Pi Based Screensaver/Slideshow for Exhibitions/Store Front<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">www.instructables.com/id/Easy-Raspberry-Pi-Based-ScreensaverSlideshow-for-E</a><br>
(      6)<br>
<br>
Flash memory card design (2013)<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">wiki.linaro.org/WorkingGroups/KernelArchived/Projects/FlashCardSurvey</a><br>
(    ,   ?         FAT;   ;   2013)<br>
<br>
Optimizing Linux with cheap flash drives, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">lwn.net/Articles/428584</a><br>
( )<br>
<br>
Optimizations for Cheap Flash Media, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">free-electrons.com/blog/elce-2011-videos</a><br>
(   ,  ,  )<br>
<br>
SD Association, Simplified Specifications, Part 1 Simplified: Physical Layer Simplified Specification<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">www.sdcard.org/downloads/pls/index.html</a><br>
<br>
Block layer statistics in /sys/block/&lt;dev&gt;/stat<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">www.kernel.org/doc/Documentation/block/stat.txt</a><br>
(   SD-    :  <code>cat /sys/block/mmcblk0/stat</code>    <code>uptime</code>)<br>
</blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es400011/">https://habr.com/ru/post/es400011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es399997/index.html">La terapia génica extiende la vida a los ratones en un 30%</a></li>
<li><a href="../es399999/index.html">"Nuevo en el mundo del sonido": los fonogramas en formato Dolby Atmos se grabarán en "Mosfilm"</a></li>
<li><a href="../es400001/index.html">Un mundo completamente nuevo al borde del sistema solar.</a></li>
<li><a href="../es400005/index.html">Infecte la PC de dos amigos y obtenga la clave de desbloqueo de su propia computadora: un nuevo esquema del crypto ransomware</a></li>
<li><a href="../es400009/index.html">Como experimenté el Alfa-Lighthouse en Ekaterimburgo</a></li>
<li><a href="../es400013/index.html">De la tierra a la luna. Historia y matemática. Parte 1</a></li>
<li><a href="../es400015/index.html">El personal de Uber usó el "modo Dios" para rastrear a los ex</a></li>
<li><a href="../es400017/index.html">Rusia está perdiendo terreno en el creciente mundo del espacio. O no?</a></li>
<li><a href="../es400019/index.html">Los expertos se manifestaron en contra del proyecto de ley para limitar la participación de capital extranjero en los servicios audiovisuales.</a></li>
<li><a href="../es400021/index.html">Revisión de teléfono inteligente Sony Xperia XCompact</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>