<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë®‚Äçüëß‚Äçüëß üë®üèº üßëüèΩ‚Äçü§ù‚Äçüßëüèª Minha vida com a Boost Graph Library üç™ üë©üèΩ‚Äç‚öïÔ∏è üßöüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo, cuja primeira parte √© apresentada aqui, cont√©m v√°rias considera√ß√µes do autor, acumuladas durante o longo desenvolvimento de um sistema espec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Minha vida com a Boost Graph Library</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471652/">  O artigo, cuja primeira parte √© apresentada aqui, cont√©m v√°rias considera√ß√µes do autor, acumuladas durante o longo desenvolvimento de um sistema especializado para busca de conex√µes sociais, com base na Boost Graph Library (BGL).  Esta se√ß√£o (t√©cnica) resume as impress√µes do autor de trabalhar com esta biblioteca, levanta quest√µes de instrumenta√ß√£o ao criar aplicativos gr√°ficos e aborda alguns problemas pr√°ticos da metaprograma√ß√£o em C ++. <br><a name="habracut"></a><br><h3>  BGL e com o que √© consumido </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A biblioteca de modelos BGL</a> provavelmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√©</a> conhecida por qualquer desenvolvedor que tenha encontrado tarefas gr√°ficas.  Aparecendo no Boost 1.18.1 em 2000, ela imediatamente ganhou cr√≠ticas de aprova√ß√£o de cl√°ssicos do g√™nero como Alexander Stepanov.  O guia da biblioteca, compilado por Jeremy Sik, Lai-Kwan Lee e Andrew Lamsdane, foi publicado em russo em 2006 por Peter (original - Jeremy G. Siek, Lie-Quan Lee e Andrew Lumsdaine, ‚ÄúThe Boost Graph Library‚Äù, 2001 Addison-Wesley).  A biblioteca foi intensamente atualizada e desenvolvida quase at√© o final de 2013 (Boost 1.55.0).  Em particular, em 2005, apareceu o an√∫ncio de sua vers√£o distribu√≠da (PBGL), que foi inclu√≠da no Boost da vers√£o 1.40 em 2009 e at√© hoje continua sendo uma esp√©cie de padr√£o de fato para computa√ß√£o gr√°fica em clusters de alto desempenho, em qualquer caso, no mundo acad√™mico.  Tanto quanto a hist√≥ria dos commits pode ser julgada, at√© 2005, o principal desenvolvedor da biblioteca foi Jeremy Sik, depois de 2005 - Douglas Gregor, e em geral v√°rias vezes uma quantidade consider√°vel de diversas pessoas trabalhava na biblioteca.  As publica√ß√µes dedicadas a ele apareceram repetidamente no habr.com: em primeiro lugar, uma s√©rie de artigos de Vadim Androsov deve ser observada: [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">3</a> ].  Assim, em princ√≠pio, boa e diversa literatura √© dedicada √† biblioteca, mas sua pr√≥pria documenta√ß√£o, tamb√©m, de um modo geral, bastante extensa, sofre um pouco devido ao fato de que: <br><br><ol><li>  Seu √≠ndice e se√ß√µes raiz, que pretendem fornecer uma lista exaustiva das principais entidades, n√£o foram alterados desde 2001.  Por exemplo, o autor dessas linhas, que ingenuamente acreditava que: <blockquote>  Atualmente, o BGL fornece duas classes de gr√°ficos e um adaptador de lista de arestas: <br><br>  adjacency_list <br>  adjacency_matrix <br>  edge_list </blockquote>  , depois de algum tempo, fiquei surpreso ao encontrar a representa√ß√£o compressed_sparse_row_graph (matriz esparsa) implementada em 2005.  Uma hist√≥ria semelhante ocorreu com o algoritmo Bron-Kerbosch.  N√£o acredite no √≠ndice, use uma pesquisa direta nos arquivos de cabe√ßalho; <br></li><li>  N√£o h√° uma √∫nica lista comentada das categorias internas da biblioteca (categoria_cont√™iner, caracter√≠sticas_alterna_ paralela, estabilidade_do_erador etc.) necess√°rias para implementar suas pr√≥prias visualiza√ß√µes.  Os problemas de compreens√£o do que est√° acontecendo ultrapassam, aparentemente, todos os usu√°rios da biblioteca que desejam ir mais fundo, o que leva √† apar√™ncia de um "tipo de c√≥digo funcional", que leva muito tempo e esfor√ßo para traz√™-lo a um estado completo: veja, por exemplo, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">discuss√£o t√≠pica</a> . </li></ol><br>  O n√∫mero de categorias e v√°rios seletores, incluindo aqueles que s√£o confusamente semelhantes, √© t√£o grande que os pr√≥prios autores √†s vezes se confundem neles.  Por exemplo, nos construtores do compressed_sparse_row_graph j√° mencionado acima, na vers√£o atual, h√° um erro sistem√°tico que causa falhas ao tentar copiar uma lista de adjac√™ncias n√£o direcionadas: <br><br><img src="https://habrastorage.org/webt/5r/1e/se/5r1esesty1oui-pwco4b2pkfxei.jpeg"><br><br>  Pode-se notar aqui ocasionalmente que o teste completo de um mecanismo t√£o flex√≠vel √© um problema separado, uma vez que √© acompanhado por uma explos√£o combinat√≥ria do n√∫mero de poss√≠veis substitui√ß√µes. <br><br>  Deve-se notar com pesar que, atualmente, os principais desenvolvedores aparentemente tenham perdido o interesse em mais trabalhos na biblioteca e, nos √∫ltimos seis anos, ela, de maneira alguma esgotou seu potencial de desenvolvimento e nem mesmo se libertou completamente de inconsist√™ncias internas e erros diretos, est√° em voo livre.  Os planos expressados ‚Äã‚Äãna regi√£o de 2011 para expandir significativamente o conjunto de m√©todos e abranger novas √°reas da teoria dos grafos (incluindo a adi√ß√£o de suporte interno ao particionamento de gr√°ficos √† capacidade de ler o formato METIS) permaneceram por cumprir.  Parece tamb√©m que a biblioteca poderia se beneficiar muito (pelo menos em termos de legibilidade) com o amplo uso de novos produtos que se tornaram padr√£o ap√≥s 2011. <br><br>  Assim, as quest√µes de escolher uma biblioteca de refer√™ncia para aplicativos gr√°ficos ao olhar para 2019 n√£o parecem t√£o claras quanto gostar√≠amos, e nos √∫ltimos 5 anos, a incerteza aumentou e n√£o diminuiu. <br><br>  Essa situa√ß√£o causa tristeza, porque a cria√ß√£o de um mecanismo universal semelhante ao BGL √© em si uma esp√©cie de fa√ßanha intelectual, tanto em termos de poder da abordagem quanto da riqueza do arsenal de m√©todos universais implementados (uma boa e meia centena de thread √∫nico e duas d√∫zias distribu√≠das) a biblioteca, at√© onde o autor dessas linhas √© conhecido, ainda n√£o tem igual. <br><br>  No momento, somente essa biblioteca permite, em princ√≠pio, sem perda de desempenho, impor acordos estritos sobre a apresenta√ß√£o de dados e perda de controle sobre os mecanismos internos da pr√≥pria biblioteca, para separar completamente os algoritmos e representa√ß√µes gr√°ficas, tornando a √∫ltima completamente independente da apresenta√ß√£o de metadados associados a arestas e v√©rtices ( que, em princ√≠pio, √© obviamente a maneira mais correta de fazer as coisas). <br><br>  A palavra "fundamentalmente" √© usada aqui por uma raz√£o.  Considerando uma situa√ß√£o espec√≠fica usando o exemplo da longa classe compressed_sparse_row_graph j√° mencionada acima, podemos observar, por exemplo, os seguintes desvios em rela√ß√£o aos altos padr√µes: <br><br><ol><li>  O operador [] para a lista de adjac√™ncia e a matriz esparsa lida com as propriedades internas e externas das arestas de maneira diferente (Propriedades Internas e Agrupadas): o primeiro retorna apenas propriedades externas (internas s√£o acess√≠veis apenas com property_map), o segundo retorna uma propriedade de estrutura de estrutura que cont√©m uma lista comum de propriedades. </li><li>  A fun√ß√£o get para obter o √≠ndice de borda usando boost :: property_map &lt;compressed_sparse_row_graph, boost :: edge_index_t&gt; :: type caiu em boost :: detail e n√£o em boost, como em todos os outros casos. </li></ol><br>  Finalmente, no modelo compressed_sparse_row_graph, a especializa√ß√£o para o gr√°fico n√£o direcionado (boost :: undirectedS) permaneceu n√£o preenchida. <br><br>  Nesse sentido, ao usar a propriedade edge_index (n√∫mero de s√©rie da borda), surgem dificuldades adicionais devido ao fato de que, para a lista de adjac√™ncias, essa propriedade deve ser explicitamente definida como interna e, como tal, pode ser alterada arbitrariamente, mas para um gr√°fico n√£o direcionado, seu valor n√£o depende da dire√ß√£o onde a costela passa.  Para uma matriz esparsa (sempre direcional), √© uma constante constante property_map de uma forma especial (calculada como um √≠ndice em uma matriz de arestas).  Consequentemente, os valores para as arestas pr√≥ximas (representando um gr√°fico n√£o direcionado) n√£o podem ser alterados e sempre ser√£o diferentes. <br><br>  Todas essas discrep√¢ncias levam √† impossibilidade de "simplesmente substituir a representa√ß√£o gr√°fica por uma equivalente" ao chamar fun√ß√µes algor√≠tmicas, o que prejudica significativamente a principal vantagem da biblioteca.  Na pr√°tica, nesses casos, √© necess√°ria uma especializa√ß√£o excessiva de c√≥digo ou seu processamento para excluir elementos com comportamentos diferentes, ou um ajuste de modelos de gr√°fico para que eles "se comportem de forma id√™ntica" com diferentes defini√ß√µes de atributo ou, finalmente, remo√ß√£o de arquivos individuais da biblioteca e cria√ß√£o "Vers√£o de refor√ßo pessoal." <br><br>  Al√©m disso, os seguintes inconvenientes, n√£o t√£o significativos, podem ser observados: <br><br><ul><li>  As dimens√µes dos descritores internos das representa√ß√µes gr√°ficas t√™m um impacto significativo no consumo de mem√≥ria necess√°rio para armazenar o gr√°fico e, algumas vezes, afetam o desempenho dos algoritmos. <br><br>  Algumas visualiza√ß√µes (a mesma compressed_sparse_row_graph) permitem controlar essas dimens√µes.  Outros (adjacency_list) n√£o possuem esses par√¢metros e sempre usam n√∫meros inteiros de 64 bits (geralmente redundantes), que n√£o podem ser substitu√≠dos sem modificar o c√≥digo; <br></li><li>  Apesar de os autores da biblioteca fornecerem muito, muito, algumas primitivas obviamente necess√°rias n√£o foram inclu√≠das na biblioteca.  Por exemplo, n√£o h√° fun√ß√£o como reverse_edge que executa invers√£o de borda. <br><br>  A implementa√ß√£o de tais fun√ß√µes, √© claro, depende da representa√ß√£o gr√°fica: nesse caso, pode ser implementada por uma troca trivial de elementos de um par, pesquisa mais ou menos eficiente por cont√™iner ou n√£o.  √â dif√≠cil para o usu√°rio final entender toda essa variedade de op√ß√µes, principalmente porque, de acordo com a ideologia da biblioteca, os membros internos dos descritores n√£o devem lhe interessar. <br></li><li>  Da mesma forma, alguns scripts longe de in√∫teis ca√≠ram da biblioteca.  Por exemplo, voc√™ pode definir predicados de aresta que usam o filter_graph para transformar um gr√°fico n√£o direcionado em um gr√°fico direcionado, mas n√£o h√° como chamar essa transforma√ß√£o √† aten√ß√£o da biblioteca.  Consequentemente, algoritmos regulares para gr√°ficos direcionados n√£o ser√£o compilados com esse objeto, e algoritmos para gr√°ficos n√£o direcionados n√£o funcionar√£o corretamente com ele. <br><br>  Em algum lugar da vizinhan√ßa, h√° o t√≥pico de suporte para gr√°ficos tecnicamente n√£o direcionais que t√™m um marcador de dire√ß√£o de servi√ßo nas bordas.  No entanto, maior aten√ß√£o a essa vis√£o pode ser devida √† natureza espec√≠fica das tarefas que o autor resolve, e o amplo interesse em apoiar esses objetos n√£o √© √≥bvio. <br></li><li>  Quanto √† fun√ß√£o reverse_edge, tomada como exemplo acima, n√£o existe uma op√ß√£o incr√≠vel de que a fun√ß√£o desejada esteja presente em algum lugar nas entranhas da biblioteca, mas por algum motivo recebeu um nome n√£o √≥bvio.  Isso leva ao seguinte problema, que √† primeira vista n√£o √© s√©rio, mas diminui significativamente o trabalho com bibliotecas de modelos complexas (n√£o apenas o BGL, embora esteja claramente entre os l√≠deres por esse crit√©rio): trabalhe com sistemas extensos de fun√ß√µes relacionadas implicitamente sem digitar explicitamente os par√¢metros e com a sem√¢ntica n√£o √≥bvia do uso (geralmente a menos transparente que a mais bem pensada) √© fisicamente dif√≠cil, e os ambientes de desenvolvimento existentes n√£o fornecem suporte para isso no desenvolvedor: <br><br> <abbr title="Obrigado, voc√™ ajudou muito."><img src="https://habrastorage.org/webt/bn/ad/fq/bnadfqng3f4ryjrc8qkwaxtf78e.png"></abbr> <br><br>  De fato, assistentes autom√°ticos: <br><br><ol><li>  Projetado principalmente para suporte a OOP, quando um conjunto de fun√ß√µes √© vinculado ao objeto √† direita, de acordo com seu tipo.  Com fun√ß√µes globais que podem ficar √† esquerda de um tipo (muito menos um conjunto de tipos), elas ajudam muito pior, mesmo que todos os tipos sejam conhecidos. </li><li>  Eles ridiculamente nem s√£o capazes de trabalhar com modelos simples.  A vers√£o do assistente visual usada pelo autor, tendo √† sua frente a defini√ß√£o de uma classe de modelo com par√¢metros padr√£o, oferece a especifica√ß√£o de uma ‚Äúsubstitui√ß√£o de teste‚Äù para poder gerar uma dica para a classe.  Se voc√™ a conhecer, absolutamente nada acontece. </li><li>  Al√©m disso, eles s√£o menos capazes de entender qualificadores de metaprograma, mesmo os mais simples, como enable_if. </li><li>  Sobre um cen√°rio t√≠pico: ‚Äúestamos dentro de uma fun√ß√£o de modelo chamada a partir de um n√∫mero indefinido de cadeias de comprimento indefinido de outras fun√ß√µes, incluindo as de modelo‚Äù, √© imposs√≠vel falar sem l√°grimas.  Nesse caso, o vim realmente continua sendo o melhor amigo do programador. </li></ol><br>  Outro aspecto da mesma situa√ß√£o pode ser ilustrado usando a primeira linha do fragmento de c√≥digo mostrado na figura anterior.  O leitor √© convidado a concluir as consultas "aumentar a hora atual" versus "hora atual da CRT" e comparar os resultados.  Sim, o boost :: date_time (agora parcialmente movido para std) torna poss√≠vel fazer muitas coisas complexas corretamente, enquanto o CRT permite executar v√°rias opera√ß√µes triviais incorretamente, mas em situa√ß√µes dom√©sticas comuns, o CRT √© mais conveniente de todos os pontos de vista e polinomiais constru√ß√µes do formato posix_time :: second_clock :: local_time (um exemplo simples) tendem a se transformar em hier√≥glifos vagando no programa.  Privar o desenvolvedor de acesso √† biblioteca pessoal de tais hier√≥glifos e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a velocidade de desenvolvimento ser√° zero</a> . <br><br>  O Boost :: string_algo torna poss√≠vel fazer qualquer coisa com strings, mas, honestamente, cada opera√ß√£o n√£o muito trivial √© acompanhada de uma sess√£o de releitura da documenta√ß√£o para atualizar a l√≥gica geral da biblioteca, os nomes dos predicados e um exerc√≠cio separado para descobrir a compatibilidade dos par√¢metros.  Uma situa√ß√£o semelhante ocorre com opera√ß√µes de tokeniza√ß√£o no boost :: regexp, com l√≥gica interna impec√°vel do √∫ltimo. <br><br>  Se tal situa√ß√£o ocorrer com as bibliotecas mais usadas, n√£o surpreende que o BGL, como uma biblioteca mais especializada, na qual, por exemplo, existam fun√ß√µes make_property_map_function e make_function_property_map que n√£o estejam relacionadas entre si, assim como uma fun√ß√£o get sacramental que seja recarregada para qualquer o n√∫mero de argumentos de qualquer tipo gera os mesmos problemas, mas de forma hipertrofiada.  Sim, qualquer tarefa pode ser resolvida pela cadeia de chamadas get, mas, infelizmente, nem toda cadeia get resolve esse problema. <br><br>  Ler um c√≥digo como esse pode ser f√°cil e agrad√°vel, pode at√© parecer uma sinopse de um algoritmo formalmente escrito em uma linguagem natural, mas ao escrev√™-lo, a impossibilidade de substituir palavras por sin√¥nimos, etc. manifesta√ß√µes de rigidez, n√£o √© caracter√≠stica de um real. <br></li><li>  Em ordem geral, n√£o se pode deixar de repetir a observa√ß√£o banal, mas n√£o se tornando menos verdadeira, de que a metaprograma√ß√£o em C ++ ainda √© literalmente baseada em efeitos colaterais de ferramentas de linguagem cujo objetivo original era diferente e at√© nas id√©ias mais simples com base em Como resultado, √© dif√≠cil expressar e ler a metalinguagem, e vincular o c√≥digo do modelo ao sistema arcaico dos arquivos inclu√≠dos n√£o facilita a vida do desenvolvedor e n√£o reduz a quantidade de c√≥digo processado pelo compilador. <br><br>  (Por outro lado, as atualiza√ß√µes peri√≥dicas de boost e std trazem muitas constru√ß√µes n√£o muito triviais e muitas vezes extremamente √∫teis e solu√ß√µes inesperadas, o que realmente permite escrever c√≥digos mais claros e compactos a um custo menor. No entanto, o fluxo de novos produtos √© t√£o amplo, desigual e mal estruturado que os mais importantes adi√ß√µes √† biblioteca padr√£o, mesmo as mais √≥bvias, como as op√ß√µes / apply_visitor ou qualquer outra mencionada abaixo, se as vantagens conceituais de sua aplica√ß√£o no contexto de um projeto espec√≠fico n√£o forem relevantes  Por √≥bvio, sem a ajuda de um evento feliz, eles podem ficar fora de foco por um longo tempo, se voc√™ n√£o gastar uma parte significativa do tempo de trabalho rastreando cuidadosamente novos produtos, estudando exemplos n√£o triviais de uso e tentativas mentais de aplic√°-los a um c√≥digo existente. para lidar com esse problema - manter para cada cinco programadores de C ++ em pr√°tica um C ++ - um te√≥rico ocupado apenas com quest√µes priorit√°rias de novos produtos, sua implementa√ß√£o  √ß√µes no projeto e os profissionais da educa√ß√£o seletiva.  Conclus√£o: <s>n√£o inicie projetos C ++ com menos desenvolvedores</s> ). <br></li><li>  Por fim, objetivamente, o problema mais s√©rio que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ocorre ao trabalhar com o c√≥digo padr√£o da BGL</a> .  Suponha que estamos usando algum algoritmo de gabarito que faz uma passagem atrav√©s de um gr√°fico e toma uma representa√ß√£o do gr√°fico G como argumento.  Em um caso t√≠pico, essa representa√ß√£o depende dos filtros sobrepostos nos v√©rtices e nas arestas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>v</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.524ex" height="2.419ex" viewBox="0 -780.1 1086.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-76" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>v</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> F_v </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>e</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.493ex" height="2.419ex" viewBox="0 -780.1 1073.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-65" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>e</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> F_e </script>  e esquema de peso <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-57" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> W </script>  .  Para trabalhar com gr√°ficos filtrados, o BGL oferece a classe de modelo filter_graph mencionada acima, a maneira de anexar o esquema de pondera√ß√£o √© a crit√©rio do usu√°rio.  Functors representando <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>v</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.524ex" height="2.419ex" viewBox="0 -780.1 1086.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-76" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>v</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> F_v </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>e</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.493ex" height="2.419ex" viewBox="0 -780.1 1073.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-65" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>e</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> F_e </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/471652/&amp;usg=ALkJrhgD21NktMCTffX08ozlZr5WwiJRcA#MJMATHI-57" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> W </script>  pode incluir pelo menos as seguintes visualiza√ß√µes: <br><br><ul><li>  Diretamente um wrapper para uma fun√ß√£o que representa um esquema de pondera√ß√£o e predicados que representam filtros (lentamente, sem perda de inicializa√ß√£o); </li><li>  Caches sobre esses wrappers, mapeando descritores de borda / n√≥ para √≠ndices de borda / n√≥, abordando o bitmap e a matriz de valores (sem perdas de inicializa√ß√£o, com um aumento gradual na velocidade conforme usado); </li><li>  Mapeamento direto de descritores de n√≥ / borda para matrizes de valor preenchidas (requer inicializa√ß√£o, mas pode ser constru√≠do com base na representa√ß√£o anterior; a velocidade atinge o m√°ximo). </li></ul><br>  Portanto, se esse algoritmo fosse escrito em um estilo tradicional, tr√™s seletores com pelo menos tr√™s ramifica√ß√µes em cada apareceriam em seu corpo (e a necessidade de ajustar o corpo quando novas representa√ß√µes aparecerem).  Como cada ramifica√ß√£o no corpo do algoritmo, que executa um grande n√∫mero de vezes ao passar pelo gr√°fico, resulta em perda de tempo percept√≠vel, o desejo de evitar essas perdas enquanto mant√©m o c√≥digo do mesmo estilo tradicional pode levar a mais de 27 implementa√ß√µes do algoritmo para v√°rias combina√ß√µes de representa√ß√µes. <br><br>  O estilo do metaprograma deve salv√°-lo desses problemas, permitindo que voc√™ suporte uma metafun√ß√£o que descreve o algoritmo que gera implicitamente todas as implementa√ß√µes necess√°rias (e tamb√©m, possivelmente, algumas e possivelmente uma quantidade consider√°vel de desnecess√°ria se as estruturas de c√≥digo de tempo de execu√ß√£o n√£o gerarem de fato algumas combina√ß√µes de tipos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">      </a> ),        . <br><br>   ,  ,          inline-    ,           ‚ÄìO2.           -      (              1:3  1:5,           ‚Äì <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  ,  ,  </a> ). <br><br>           ,    .               . ,    ( )     ,      ¬´¬ª  ¬´¬ª  .   ,       .       :    ¬´¬ª      ¬´¬ª  ,                 ¬´¬ª ,                 ¬´¬ª . <br><br>    ,         :    ,   100%         ,       ,   ¬´¬ª  . ( ,    ,     - ,   ,    , ,      ,  ). <br></li><li>         ,   ,     ,     .     C++   , -,  ,          . <br><br>   ,   ,    : <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type_selector_fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type_a a, type_b b, ...)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = get_type_1_obj(a, b, ...); run_calc(arg, a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = get_type_2_obj(a, b, ...); run_calc(arg, a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... }</code> </pre> <br>  Ele pode ser reescrito de forma um pouco mais compacta usando a variante &lt;...&gt; aproximadamente da seguinte forma: <br><br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type_selector_fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type_a a, type_b b, ...)</span></span></span><span class="hljs-function"> </span></span>{ variant&lt;type_1, type_2, ...&gt; arg; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { arg = get_type_1_obj(a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ... ... apply_visitor([&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg_){run_calc(arg_, a, b, ...); }, arg); }</code> </pre><br>  A desvantagem dessa forma de escrita √© a necessidade de enumera√ß√£o expl√≠cita dos tipos type_1, type_2, ... na declara√ß√£o da variante.  Esses tipos podem ser complicados, a grava√ß√£o usando declval / result_of_t n√£o pode ser menos complicada. <br><br>  Ao usar qualquer, n√£o h√° necessidade de listar tipos, mas n√£o h√° como obter um apply_visitor anal√≥gico. <br><br>  O uso de alguma fun√ß√£o de modelo make_variant, que permite escrever c√≥digo do seguinte tipo, sugere-se: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> arg = make_variant ( bind(condition_1, a, b, ...), bind(get_type_1_obj, a, b, ...), bind(condition_2, a, b, ...), bind(get_type_2_obj, a, b, ...), ... );</code> </pre><br>  mas a cura n√£o parece melhor que a doen√ßa. <br><br>  Em geral, existe uma situa√ß√£o t√≠pica para a metaprograma√ß√£o em C ++, quando, para expressar uma id√©ia muito simples, √© necess√°rio usar todo um arsenal de ferramentas auxiliares com um resultado que n√£o √© muito satisfat√≥rio em termos de legibilidade e facilidade de grava√ß√£o.  Essencialmente, eu gostaria de poder escrever algo como o seguinte: <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//   variant&lt;...&gt;      //  ,   : type_1, type_2 etc. variant&lt;auto...&gt; get_type_obj(typa_a a, type_b b, ...) { if (condition_1(a, b, ...)) { return get_type_1_obj(a, b, ...); } else if (condition_2(a, b, ...)) { return get_type_2_obj(a, b, ...); } else ... }</span></span></code> </pre><br>  ou at√©: <br><br><pre> <code class="cpp hljs"> select_value_type(arg) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition_1(a, b, ...)) { arg = get_type_1_obj(a, b, ...); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... ... } run_calc(arg, a, b, ‚Ä¶);</code> </pre><br>  A √∫ltima op√ß√£o, embora seja completamente eliminada do estilo C ++, parece mais pr√°tica, pois pode haver mais de uma vari√°vel arg para a qual o tipo √© selecionado e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o h√° motivo para antecipar a l√≥gica de sua constru√ß√£o</a> . <br></li><li>  O outro lado da mesma situa√ß√£o √© o uso de estruturas auxiliares (por exemplo, armazenamento em cache) que implementam um script que merece o nome de uma "vari√°vel de modelo", mas difere da extens√£o padr√£o C ++ 14 com o mesmo nome. <br><br>  O c√≥digo correspondente pode ser algo como isto: <br><br><pre> <code class="cpp hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CacheHolder</span></span></span><span class="hljs-class"> {</span></span> boost::variant&lt; container&lt;T1&gt;, container&lt;T2&gt;, <span class="hljs-comment"><span class="hljs-comment">// ... container&lt;TN&gt;&gt; ct; template&lt;typename T&gt; struct result_type_selector { typedef typename if_c&lt;is_compatible&lt;T, T1&gt;::value, T1, if_c&lt;is_compatible&lt;T, T2&gt;::value, T2, // ... if_c&lt;is_compatible&lt;T, TN&gt;::value, TN, std::decay_t&lt;T&gt;&gt;&gt;&gt;::type type; }; template&lt;typename T&gt; auto get() const -&gt; const container&lt;typename result_type_selector&lt;T&gt;::type&gt;&amp; { return boost::get&lt;container&lt;typename result_type_selector&lt;T&gt;::type&gt;&gt;(ct); } };</span></span></code> </pre><br>  Aqui, como acima, constru√ß√µes longas expressam a id√©ia simples de acessar uma vari√°vel que representa o cache por um nome espec√≠fico, independentemente da dimens√£o do valor em cache (passando de maneira transparente pelo c√≥digo de chamada). <br><br>  Por uma quest√£o de brevidade, o c√≥digo √© fornecido para o caso em que apenas um tipo pode estar ativo, mas na pr√°tica a situa√ß√£o √© mais comum quando v√°rios cont√™ineres podem existir simultaneamente (ele pode ser facilmente implementado no mesmo estilo usando tupla e opcional). <br><br>  A implementa√ß√£o da fun√ß√£o get &lt;...&gt; sup√µe que o c√≥digo de chamada tenha alguma id√©ia de que tipo de valor em cache ele deseja acessar (por exemplo, n√∫mero inteiro ou ponto flutuante). <br><br>  N√£o menos comum √© a situa√ß√£o em que o valor exato do tipo n√£o √© importante para o chamador.  Nesse caso, o script select_value_type / apply_visitor do par√°grafo anterior √© reproduzido (ajustado para a poss√≠vel multiplicidade de valores, o que implica a visualiza√ß√£o de tipos em ordem decrescente de prioridade). <br></li><li>  At√© agora, praticamente n√£o houve men√ß√£o ao PBGL neste texto.  Isso √© explicado pela experi√™ncia cada vez menor do autor de trabalhar com essa parte da biblioteca (em rela√ß√£o √† qual o pr√≥prio autor, com um certo ceticismo, se refere a tudo o que est√° escrito abaixo neste par√°grafo e apela a outros para o mesmo).  De fato, esse experimento se resume a v√°rios experimentos, no mesmo tipo de problemas de pesquisa que demonstraram em dados pr√°ticos a perda de uma vers√£o distribu√≠da para uma solu√ß√£o local 3-5 vezes na mem√≥ria e 15-20 vezes no desempenho geral (a origem dessa figura assustadora √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">explicada aqui</a> e comentada adicionalmente nos par√°grafos seguintes) .  Dada a maior complexidade de trabalhar com estruturas distribu√≠das, a escolha a favor da vers√£o local era evidente em tal situa√ß√£o. <br><br>  Vamos explicar a mec√¢nica da opera√ß√£o PBGL usando um exemplo t√≠pico do algoritmo delta-walking.  Nesta vers√£o paralela do algoritmo de Dijkstra, a fila de prioridade √© substitu√≠da por uma matriz de "buckets".  Os elementos que se enquadram em um "bloco" s√£o processados ‚Äã‚Äãem paralelo.  Na sua forma original, o ritmo delta √© um algoritmo t√≠pico para sistemas de mem√≥ria compartilhada. <br><br>  Na vers√£o distribu√≠da, acontece o seguinte: no PBGL, ao carregar, o gr√°fico √© espalhado entre os processos, e cada processo possui um intervalo cont√≠nuo de n√∫meros de v√©rtices.  Assim, pelo n√∫mero do v√©rtice global, √© f√°cil saber a qual processo ele pertence.  Consequentemente, cada processo em cada turno do algoritmo armazena uma parte do "bucket" que cont√©m os v√©rtices pertencentes a esse processo.  Todos os processos simultaneamente selecionam e processam os v√©rtices de suas partes dos "buckets", um de cada vez, enquanto enviam mensagens sobre a necessidade de atualizar os seguintes "buckets" para processos que possuem os v√©rtices vizinhos.  √â f√°cil ver que, ceteris paribus, um aumento no n√∫mero de processos leva a um aumento no n√∫mero de mensagens que eles enviam.  Como resultado, o tempo de execu√ß√£o do algoritmo pode n√£o apenas diminuir, mas at√© aumentar.  Em particular, o lan√ßamento de v√°rios processos MPI para resolver esse problema em uma m√°quina f√≠sica com uma certa probabilidade s√≥ levar√° a um aumento na carga total do processador sem nenhum ganho de tempo. <br><br>  Deve-se observar que o ritmo delta √© o algoritmo de pesquisa distribu√≠do mais r√°pido (dos tr√™s suportados pela biblioteca). <br><br>  Portanto, se o gr√°fico n√£o for preparado anteriormente, ele dever√° ser dividido em blocos de tamanho m√°ximo, um bloco por m√°quina f√≠sica.  Por prepara√ß√£o preliminar, entendemos aqui a renumera√ß√£o dos v√©rtices do gr√°fico para que os intervalos cont√≠nuos de n√∫meros usados ‚Äã‚Äãpelo PBGL, se poss√≠vel, correspondam a subgr√°ficos vagamente conectados.  Pacotes como METIS, paraMETIS e Zoltan s√£o usados ‚Äã‚Äãpara esses fins.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trabalhar com gr√°ficos din√¢micos nesse modo √© dif√≠cil.</a> <br><br>  Em geral, de acordo com os resultados dos experimentos descritos, o autor teve a impress√£o de que a opera√ß√£o normal do cluster PBGL √© poss√≠vel apenas com equipamentos de comunica√ß√£o especiais, e faz sentido usar m√°quinas com um n√∫mero m√≠nimo de n√∫cleos e desempenho m√°ximo do encadeamento como n√≥s desse cluster.  Os autores do <a href="">Trinity,</a> em seu artigo, argumentam que o armazenamento distribu√≠do funciona com muito mais efici√™ncia - o autor acha dif√≠cil comentar sobre essa afirma√ß√£o, mas, dadas as circunst√¢ncias acima, considera bastante poss√≠vel: a arquitetura PBGL tem um selo distinto do tempo em que as m√°quinas com v√°rios n√∫cleos ainda n√£o receberam ampla distribui√ß√£o. <br><br>  O PBGL tamb√©m compartilha os problemas da vers√£o single-threaded: alguma sincroniza√ß√£o de c√≥digo, documenta√ß√£o e exemplos, agravados pela maior complexidade do sistema e menos usu√°rios dispostos a compartilhar experi√™ncias √∫teis. <br></li></ul><br><h3>  BGL e outros animais </h3><br>  Levando em conta uma lista bastante longa de reclama√ß√µes espec√≠ficas, n√£o ser√° inapropriado perguntar: o autor pode recomendar a BGL para novos projetos em 2019.  A resposta √© a seguinte: o autor acredita que as bibliotecas desse estilo e aplicativos baseados neles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">devem ter um futuro</a> .  Quanto √† escolha de uma biblioteca de refer√™ncia para um projeto em particular, devemos considerar seriamente a instrumenta√ß√£o, sem perder de vista os problemas listados acima.  A resposta, obviamente, depende de muitas circunst√¢ncias, incluindo, entre outras, as listadas nos par√°grafos seguintes: <br><br><ul><li>  Se trabalhar com gr√°ficos em um projeto √© a base da funcionalidade ou uma tarefa opcional; </li><li>  Um projeto pode obter vantagem com o uso de v√°rias representa√ß√µes ou trabalhar com algoritmos de tipo r√≠gido o suficiente; </li><li>  O tipo mais ben√©fico de simultaneidade para o projeto; </li><li>  Nuan√ßas organizacionais: o desejo de metaprograma√ß√£o em C ++ entre funcion√°rios (especialmente programadores de matem√°tica), etc. </li></ul><br>  Provavelmente, ceteris paribus, o uso de BGL pode ser justificado no caso de um uso √∫nico muito pequeno (para extrudar ou copiar um c√≥digo de trabalho e esquecer), ou para um sistema grande para o qual uma maior flexibilidade pagar√° entrada pesada e outros custos ao longo do tempo.  Em outros casos, faz sentido estudar cuidadosamente outras op√ß√µes. <br><br>  Quanto √†s poss√≠veis alternativas, sua lista inclui pelo menos os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seguintes itens</a> : <br><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  Lemon </td></tr><tr><td>  Tipo de biblioteca </td><td>  Cabe√ßalho do modelo C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lemon.cs.elte.hu</a> </td></tr><tr><td>  Distribu√≠do </td><td>  n√£o </td></tr><tr><td>  Multithread </td><td>  n√£o </td></tr><tr><td>  OS </td><td>  qualquer </td></tr><tr><td>  Vers√£o mais recente </td><td>  2014 <br>  Distribu√≠do pelo arquivo </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Stackoverflow menciona</a> </td><td>  ~ 100 (36 na se√ß√£o [lemon-graph-library]) </td></tr><tr><td>  Coment√°rio </td><td>  Segundo alguns relat√≥rios, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no modo de thread √∫nico excede significativamente a velocidade do BGL</a> . <br>  A atitude dos autores em rela√ß√£o ao multithreading <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√© evidente no di√°logo a seguir</a> .  Em vista do exposto na se√ß√£o sobre PBGL, essa posi√ß√£o √© duvidosa. </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  SNAP </td></tr><tr><td>  Tipo de biblioteca </td><td>  C ++ </td></tr><tr><td>  URL </td><td>  <a href="">github.com/snap-stanford/snap.git</a> </td></tr><tr><td>  Distribu√≠do </td><td>  n√£o </td></tr><tr><td>  Multithread </td><td>  sim (parte dos m√©todos) </td></tr><tr><td>  OS </td><td>  Linux, Mac, Cygwin </td></tr><tr><td>  Vers√£o mais recente </td><td>  2018 <br>  O reposit√≥rio est√° sendo atualizado ativamente. </td></tr><tr><td>  O Stackoverflow menciona </td><td>  &lt;50 </td></tr><tr><td>  Coment√°rio </td><td>  Uma das maiores bibliotecas de an√°lise de rede (com mais de 10 Mb de c√≥digo) (Network Ananlysis), que se desenvolve ativamente h√° muitos anos.  De uma maneira estranha, √© comparativamente ignorado pela aten√ß√£o do p√∫blico. <br>  Veja a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">descri√ß√£o da ideologia do sistema</a> .  A atitude em rela√ß√£o √† implementa√ß√£o de m√©todos paralelos, expressa na p√°gina 12, √© pr√≥xima ao autor deste artigo.  Sob as condi√ß√µes operacionais de um parque de m√°quinas moderno t√≠pico, √© o mais natural.  A mudan√ßa de paradigma ocorreu em 2011 condicional, a que a declara√ß√£o LEMON acima se refere. </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  MTGL </td></tr><tr><td>  Tipo de biblioteca </td><td>  Cabe√ßalho do modelo C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">software.sandia.gov/svn/public/mtgl/trunk</a> </td></tr><tr><td>  Distribu√≠do </td><td>  ? </td></tr><tr><td>  Multithread </td><td>  sim </td></tr><tr><td>  OS </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">qualquer</a> </td></tr><tr><td>  Vers√£o mais recente </td><td>  ? </td></tr><tr><td>  O Stackoverflow menciona </td><td>  3 </td></tr><tr><td>  Coment√°rio </td><td>  Membro misterioso da reuni√£o.  A biblioteca estava se desenvolvendo ativamente entre 2005 e 2012.  As fontes foram carregadas em 2017.  Status n√£o claro, men√ß√£o do projeto no site Sandia removida.  Ideologicamente inspirado pelo mesmo BGL, mas o c√≥digo √© completamente independente.  A quantidade total de c√≥digo fonte (incluindo v√°rios testes e exemplos) atinge 17 MB.  O c√≥digo parece bem projetado.  Veja a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">descri√ß√£o</a> . </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  igraph </td></tr><tr><td>  Tipo de biblioteca </td><td>  C </td></tr><tr><td>  URL </td><td>  <a href="">github.com/igraph/igraph.git</a> </td></tr><tr><td>  Distribu√≠do </td><td>  n√£o </td></tr><tr><td>  Multithread </td><td>  n√£o </td></tr><tr><td>  OS </td><td>  alguma? </td></tr><tr><td>  Vers√£o mais recente </td><td>  2014 <br>  O reposit√≥rio est√° sendo atualizado ativamente. <br></td></tr><tr><td>  O Stackoverflow menciona </td><td>  Cerca de 100 nas se√ß√µes [igraph] [c ++] e [igraph] [c] e mais de 500 no total (para todos os idiomas) <br></td></tr><tr><td>  Coment√°rio </td><td>  Outra biblioteca de an√°lise de redes, aparentemente, √© muito popular (principalmente entre pythonists, etc.).  Descri√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  ferramenta gr√°fica </td></tr><tr><td>  Tipo de biblioteca </td><td>  C ++ python lib </td></tr><tr><td>  URL </td><td>  <a href="">git.skewed.de/count0/graph-tool.git</a> </td></tr><tr><td>  Distribu√≠do </td><td>  n√£o </td></tr><tr><td>  Multithread </td><td>  sim </td></tr><tr><td>  OS </td><td>  A julgar pelo uso do autoconf - * nix, apenas uma prov√°vel adapta√ß√£o a outros sistemas </td></tr><tr><td>  Vers√£o mais recente </td><td>  2019 </td></tr><tr><td>  O Stackoverflow menciona </td><td>  &lt;20 </td></tr><tr><td>  Coment√°rio </td><td>  Outra biblioteca de an√°lise de rede em desenvolvimento ativo com um longo hist√≥rico de confirma√ß√µes que usa diretamente o BGL (na vers√£o corrigida local). <br>  Consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tabela de compara√ß√£o de desempenho.</a> </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td>  T√≠tulo </td><td>  LEDA </td></tr><tr><td>  Tipo de biblioteca </td><td>  C ++ </td></tr><tr><td>  URL </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.algorithmic-solutions.com/index.php/products/leda-for-c</a> </td></tr><tr><td>  Distribu√≠do </td><td>  n√£o </td></tr><tr><td>  Multithread </td><td>  ? </td></tr><tr><td>  OS </td><td>  qualquer </td></tr><tr><td>  Vers√£o mais recente </td><td>  ? </td></tr><tr><td>  O Stackoverflow menciona </td><td>  ~ 10 </td></tr><tr><td>  Coment√°rio </td><td>  Licen√ßa comercial.  Uma grande (e, pode-se dizer, antiga) biblioteca de computa√ß√£o cient√≠fica e tecnol√≥gica, incluindo uma se√ß√£o de gr√°ficos.  Aparentemente, depende de sua pr√≥pria infraestrutura, e n√£o de stl / boost, e nesse sentido √© arcaico. </td></tr></tbody></table></div><br>  De particular interesse geral √© a quest√£o da classifica√ß√£o de v√°rios produtos de software orientados para trabalhar com gr√°ficos.  Sua diversidade, para n√£o mencionar o n√∫mero, √© muito grande.  Sem pretender concluir (e at√© mesmo formalmente) a classifica√ß√£o, podemos tentar, no entanto, destacar as seguintes √°reas importantes no desenvolvimento de aplicativos gr√°ficos: <br><ol><li>  Gr√°fico de DBMS (neo4j, etc.). <br><br>  Sistemas desse tipo est√£o focados na execu√ß√£o de opera√ß√µes transacionais em gr√°ficos grandes (disco distribu√≠do).  Embora a API desse sistema possa ser altamente desenvolvida, a velocidade de execu√ß√£o dos pr√≥prios algoritmos gr√°ficos, at√© onde se pode julgar, n√£o √© a primeira prioridade.  O sistema pode nem tentar carregar o gr√°fico inteiro na mem√≥ria.  Para modifica√ß√£o e passagem de gr√°fico, s√£o suportadas linguagens declarativas (SPARQL, Cypher, Gremlin).  √â de grande import√¢ncia garantir a continuidade dos sistemas SQL tradicionais. </li><li>  Extens√µes gr√°ficas de sistemas de processamento de big data que trabalham no paradigma mapear / reduzir (GraphX ‚Äã‚Äãno Spark, Pegasus e Giraph para Hadoop) e sistemas de cluster independentes ( <a href="">MS Trinity / MS Graph Engine</a> , GraphLab).  Os primeiros a executar opera√ß√µes no gr√°fico implementam o modelo do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Google Pregel</a> (mas n√£o apenas ele) e podem ser configurados para uso, incluindo n√≥s de computa√ß√£o paralela em massa.  Esses e outros podem ser usados, entre outras coisas, como base para projetos de software corporativo. <br><br>  Embora a API desses sistemas possa ser bastante desenvolvida (entre outras coisas, o GraphX ‚Äã‚Äãsuporta SPARQL e Cypher), o foco principal ao trabalhar com eles √© a solu√ß√£o de problemas de infraestrutura.  O GraphX ‚Äã‚Äã√© caracterizado pela imutabilidade dos dados e um vi√©s no pipelining de todas as opera√ß√µes.  Atualmente, o MS Trinity n√£o inclui m√©todos de alto n√≠vel e fornece apenas um conjunto de primitivas para trabalhar com n√≥s e arestas.  Os sistemas executados no topo do Hadoop s√£o, em princ√≠pio, de pouca utilidade para resolver problemas gr√°ficos arbitr√°rios. <br></li><li>  Bibliotecas de ferramentas realmente universais que implementam conjuntos de m√©todos mais ou menos amplos (BGL / PBGL, LEMON etc.), incluindo os massivamente paralelos (nvGraph, Gunrock). <br><br>  Com base neles, podem ser criados sistemas de aplicativos que adaptam algoritmos gr√°ficos a √°reas espec√≠ficas. </li><li>  Sistemas e bibliotecas especializados em problemas complexos e de import√¢ncia universal (METIS, paraMETIS, Zoltran: particionamento de gr√°ficos, GraphViz, Gephi: visualiza√ß√£o, GraphBLAS: algoritmos alg√©bricos para trabalhar com gr√°ficos, etc.). <br><br>  Muitos aplicativos gr√°ficos independentes podem ser atribu√≠dos condicionalmente a essa categoria, cuja an√°lise detalhada exigiria muito tempo.  Este √∫ltimo cont√©m aplica√ß√µes de todas as variedades poss√≠veis: acad√™micas e comerciais, de usu√°rio √∫nico e multiusu√°rio, surgiram recentemente e existem h√° mais de uma d√©cada, etc. </li></ol><br>  Uma parte obscura, mas significativa, dos aplicativos gr√°ficos √© focada nas tarefas de An√°lise de Rede e, j√°, An√°lise de Rede Social (Detec√ß√£o de Comunidade).  Curiosamente, os sistemas de An√°lise de Link (usados, geralmente, por v√°rios "combatentes do crime") s√£o muito menos comuns, que t√™m uma certa semelhan√ßa com o sistema que estamos desenvolvendo.  Em todos os casos, sem uma verifica√ß√£o especial, √© dif√≠cil determinar a natureza dos modelos de dados usados ‚Äã‚Äãpor v√°rios sistemas e as limita√ß√µes de desempenho associadas, volumes suportados, conjuntos de opera√ß√µes etc. <br><br><h3>  Anota√ß√µes </h3><br><ol><li><a name="P1"></a>  O BGL n√£o √© uma biblioteca puramente de cabe√ßalho, mas, no momento, a √∫nica funcionalidade que precisa de vincula√ß√£o √© (bastante opcional) trabalhar com arquivos DOT do GraphViz.  Portanto, na grande maioria dos casos, n√£o h√° necessidade de vincular e vincular automaticamente a vers√£o adequada do libbost-graph para incluir cabe√ßalhos BGL na configura√ß√£o do Boost.  Portanto, para obter consist√™ncia com a biblioteca libboost-regex usada por fun√ß√µes BGL sem cabe√ßalho, √© conveniente simplesmente conectar o cabe√ßalho boost \ regex.hpp do c√≥digo do projeto, mesmo que este √∫ltimo n√£o use express√µes regulares. </li><li><a name="P2"></a>  Caos adicional √© introduzido pela presen√ßa de entidades cuja aparente equival√™ncia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">incentiva a ca√ßa a (possivelmente ausentes) gatos pretos em salas escuras</a> . </li><li><a name="P3"></a>  Antes de prosseguir com sua descri√ß√£o (usando um exemplo espec√≠fico, onde ele se manifestou de maneira especialmente forte e desagrad√°vel), observamos que o autor est√° entre as poucas pessoas de sorte que trabalham com um projeto carregado em um poderoso sistema operacional Windows e a linha salva de Deus de compiladores MSVC.  √â poss√≠vel que os problemas descritos abaixo sejam artefatos dessa linha de compiladores: uma variedade de circunst√¢ncias particulares dificulta a realiza√ß√£o de um experimento comparativo com o gcc / clang no ambiente * nix.  Nesse caso, voc√™ s√≥ pode parabenizar usu√°rios de outros compiladores. </li><li><a name="P4"></a>  Para suavizar o que, em alguns casos, o recentemente apareceu constexpr if provavelmente ajudar√°. </li><li><a name="P5"></a>  No nosso caso, isso levou a uma aten√ß√£o especial √† fun√ß√£o de economia de estado, que permite a depura√ß√£o com conveni√™ncia, primeiro levando o sistema ao estado inicial desejado em uma montagem otimizada. </li><li><a name="P6"></a>  Na minha pr√°tica, por v√°rias raz√µes, havia a necessidade de converter par√¢metros de tempo de execu√ß√£o em argumentos de modelo, e muitas vezes eu tive que recorrer a formas muito elaboradas (com muita precis√£o) (inspiradas nas implementa√ß√µes desatualizadas de boost typeof e boost lambda para C ++ 98, que atingiam diretamente o (tratar a t√©cnica de programa√ß√£o em C ++ como uma solu√ß√£o para o r√©bus), entre as quais a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrela brilha na sele√ß√£o do argumento dividindo-a ao meio</a> , mas, em geral, os principais problemas com essas opera√ß√µes sempre foram associados √† incapacidade de exportar  tipo selecionado fora do escopo, que deu origem a padr√µes ex√≥ticos. </li><li><a name="P6X1"></a>       (   ‚Äî  80   4      50    200  ,     )     (  )       -   . ,                .    ,  6-8      ‚Äî   ,        . </li><li><a name="P7"></a>        ,        . (  ,       -  ,      .  ,     ,  ,     ,  ,       , ,        ). </li><li><a name="P8"></a>   ,    ,    ‚Äì   ,     ,   ¬´¬ª     (--  ..)     .  (  ,   ),    ,   ¬´¬ª    ,     ‚Äî     (              ).  ,  ,      , -   .  ,    ,   : ¬´¬ª  (   )  ,     ¬´¬ª (   ),         ,     .           .         ,   - ,      ¬´      ¬ª,      .        ,   ¬´  ¬ª     ? ,        ,         ,   :  ‚Äì    , ,       ,    ,          . </li><li><a name="P9"></a>    .         ,     ,             . </li><li><a name="P10"></a>    ¬´LIBNAME C++ graph¬ª  ,           stackoverflow.  ,  BGL   500    [boost-graph]. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt471652/">https://habr.com/ru/post/pt471652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt471636/index.html">Ve√≠culo n√£o tripulado: algoritmos de anima√ß√£o. Relat√≥rio Yandex</a></li>
<li><a href="../pt471640/index.html">Uma vis√£o geral das t√©cnicas de an√°lise de blockchain an√¥nimas</a></li>
<li><a href="../pt471642/index.html">Assassino de inf√¢ncia</a></li>
<li><a href="../pt471644/index.html">Novamente sobre o phpQuery</a></li>
<li><a href="../pt471650/index.html">Pizza AI: como usamos duas redes neurais recorrentes</a></li>
<li><a href="../pt471654/index.html">Como desenvolvemos um dispositivo de Internet resistente √†s geadas</a></li>
<li><a href="../pt471658/index.html">Golpistas por telefone. A primeira a√ß√£o em que sou gentilmente informado sobre outros golpistas</a></li>
<li><a href="../pt471660/index.html">Palestra sobre Psicologia do Jogador</a></li>
<li><a href="../pt471662/index.html">Web - autentica√ß√£o javascript, ofusca√ß√£o e c√≥digo nativo. Solu√ß√£o de problemas com o r0ot-mi Web - Client. Parte 1</a></li>
<li><a href="../pt471664/index.html">Est√°gio na ABBYY: uma empresa com a qual voc√™ pode ser ‚Äúvoc√™‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>