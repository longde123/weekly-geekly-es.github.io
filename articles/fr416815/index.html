<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â›¹ğŸ¼ âŒšï¸ ğŸ¤ Comment nous avons arrÃªtÃ© de passer une semaine Ã  publier un stand de dÃ©veloppement ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨ğŸ¿ ğŸ›… ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chaque dÃ©veloppeur veut son propre stand de dÃ©veloppement. Chaque testeur veut son propre banc d'essai. Et chaque spÃ©cialiste de la prÃ©-production veu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons arrÃªtÃ© de passer une semaine Ã  publier un stand de dÃ©veloppement</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rencredit/blog/416815/">  Chaque dÃ©veloppeur veut son propre stand de dÃ©veloppement.  Chaque testeur veut son propre banc d'essai.  Et chaque spÃ©cialiste de la prÃ©-production veut son propre stand - pour enfin tout vÃ©rifier et rÃ©pÃ©ter le lancement dans la prod.  Lorsque toutes ces listes de souhaits convergent dans le traitement - l'un des systÃ¨mes les plus importants et les plus actifs de la banque - les coÃ»ts d'infrastructure vous font vous gratter la tÃªte et rechercher des Â«optionsÂ».  Nous raconterons ce que nous avons trouvÃ© dans ce post. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0e/f74/1d0/a0ef741d02ea7e944c115e6f0a34f1b0.png"></div><a name="habracut"></a><br>  Le volume de traitement des bases de donnÃ©es dans notre entreprise est d'environ 6 To.  Sur une copie des bases de donnÃ©es, les dÃ©veloppeurs interfÃ¨rent les uns avec les autres, de sorte que l'espace rÃ©el occupÃ© par les bases croÃ®t rapidement et proportionnellement.  Bien qu'Ã  quelle vitesse ... trop rapide pour le service d'escorte et pas assez rapide pour ceux qui ont besoin de copies des bases de donnÃ©es.  Et voici pourquoi. <br><br>  Pour les tests, il est nÃ©cessaire que le banc d'essai soit parfaitement cohÃ©rent avec la version actuelle de production (il en va de mÃªme pour le banc de prÃ©-production).  La sauvegarde principale du systÃ¨me est copiÃ©e toute la journÃ©e, puis dÃ©ployÃ©e sur le stand.  Pendant ces longues opÃ©rations, les stands ne sont pas disponibles, donc la copie est reportÃ©e aux week-ends et jours fÃ©riÃ©s lorsque personne ne travaille avec des stands.  Nous obtenons un dÃ©lai de 1 Ã  5 jours.  Pour s'entendre au prÃ©alable sur le processus de copie lui-mÃªme, cela prend Ã©galement du temps - nous avons plusieurs bancs d'essai, gÃ©nÃ©ralement de trois Ã  six.  Nous ajoutons 2-3 jours pour coordonner le temps d'inactivitÃ© du stand.  Avant d'obtenir l'approbation de l'administrateur, l'application est toujours dans la file d'attente.  Au total, nous obtenons un trÃ¨s gros retard. <br><br><h2>  Ce qui a aidÃ© Delphix </h2><br>  Qu'est-ce qui peut accÃ©lÃ©rer le processus et Ã©conomiser de l'espace?  Virtualisation de la base de donnÃ©es.  Nous avons considÃ©rÃ© diffÃ©rentes options: Oracle SnapClone, NetApp + Oracle Cloud, uniquement des instantanÃ©s sur des tableaux.  Tout nÃ©cessite une configuration complexe.  De plus, les solutions Oracle ne fonctionnent qu'avec des bases de donnÃ©es Oracle. <br><br>  Ensuite, j'ai regardÃ© Delphix.  Il est facile Ã  mettre en Å“uvre, il prend en charge diffÃ©rentes bases de donnÃ©es - Oracle, SQL Server, DB2, Sybase ASE.  Une interface est fournie pour toutes les opÃ©rations.  GrÃ¢ce Ã  lui, les dÃ©veloppeurs et les testeurs peuvent gÃ©rer indÃ©pendamment leurs copies - mise Ã  jour, Ã©tat de sauvegarde / restauration, arrÃªt / dÃ©marrage, etc.  Il existe Ã©galement une API et une CLI pour l'intÃ©gration avec les systÃ¨mes CI / CD ou leurs processus. <br><br>  Le dÃ©ploiement de Delphix lui-mÃªme ne prend pas trÃ¨s longtemps - plusieurs heures.  La source peut Ãªtre connectÃ©e beaucoup plus longtemps, ici le temps est proportionnel Ã  la taille.  Dans notre cas, la source Ã©tait une copie commerciale de la base de donnÃ©es et sa connexion a pris prÃ¨s d'une journÃ©e.  La prÃ©paration de la source et des serveurs pour les clones de base de donnÃ©es ne nÃ©cessite pas de travail particulier.  Sur le serveur cible, vous devez installer le ORACLE_HOME appropriÃ© et Ã©galement crÃ©er un utilisateur spÃ©cial pour se connecter.  Pour les copies de test virtuelles, nous utilisons les mÃªmes serveurs qui possÃ©daient auparavant des copies physiques. <br><br>  Delphix vous permet de crÃ©er des bancs d'essai en temps quasi rÃ©el, sans aucune coordination, car les bancs sont complÃ¨tement isolÃ©s les uns des autres.  Un certain temps est consacrÃ© uniquement Ã  la mise Ã  jour de la base de donnÃ©es Ã  l'Ã©tat actuel - de 20 minutes Ã  plusieurs heures, il n'est pas question de jours. <br><br>  Nous essayons d'effectuer des tests de rÃ©sistance dans des conditions aussi proches que possible du produit.  Si la prod sur les disques physiques - alors la charge aussi.  Dans ce cas, le bouton Delphix V2P aide, ce qui vous permet de crÃ©er une base de donnÃ©es Â«honnÃªteÂ» Ã  partir d'une base virtuelle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebc/e68/e50/ebce68e5021b33c29f67bffc947c2f3f.png"><br><br>  En ce qui concerne l'Ã©conomie d'espace disque, les lectures de notre tableau de bord Delphix, bien sÃ»r, sont trompeuses - une rÃ©duction de 73 fois du volume est trop fabuleuse.  Dans notre traitement, une copie de la vente avec des instantanÃ©s quotidiens et des journaux de transactions archivÃ©s pendant 2 semaines (200 Go par jour) occupe 4,5 To d'espace disque.  Un autre 1,5 To - neuf clones de tailles de 50 Ã  500 Go, chacun d'entre eux stockant Ã©galement un historique des instantanÃ©s quotidiens.  Au total, 6 To sont obtenus. <br><br>  Nous ajoutons encore 15% d'espace libre (900 Go) pour que Delphix puisse fonctionner normalement.  Ainsi, en ne dÃ©pensant qu'environ 7 To, nous pouvons obtenir une copie de test avec des donnÃ©es pertinentes Ã  tout moment au cours des deux derniÃ¨res semaines. <br><br>  Auparavant, pour stocker neuf copies physiques de la base de donnÃ©es dans 6 To, nous avions besoin de 54 To (ou ~ 20 To en tenant compte de la compression 2-3 fois sur le stockage).  Et, contrairement au nouveau systÃ¨me, ici, les dÃ©veloppeurs ne pouvaient pas gÃ©rer ces copies et restaurer les Ã©tats prÃ©cÃ©dents - lorsque les donnÃ©es Ã©taient dÃ©truites, il n'Ã©tait possible de recharger qu'Ã  partir d'une copie de la vente. <br><br>  Delphix vous permet Ã©galement de crÃ©er rapidement diffÃ©rentes branches du mÃªme conteneur pour diffÃ©rents projets - et tout cela en un minimum de temps.  Les dÃ©veloppeurs n'ont pas peur de corrompre les donnÃ©es, ils peuvent revenir en arriÃ¨re et restaurer leur Ã©tat prÃ©cÃ©dent.  Cela donne un coup de pouce aux performances. <br><br><h2>  Mais il y a des nuances ... </h2><br>  Les impressions de Delphix sont gÃ©nÃ©ralement positives, mÃªme si tout n'est pas parfait.  Le plus gros problÃ¨me est l'utilisation de disques.  Chaque bloc de donnÃ©es n'est stockÃ© qu'une seule fois pour toutes les copies virtuelles et jusqu'Ã  ce que toutes les copies virtuelles cessent d'utiliser le bloc, il ne peut pas Ãªtre supprimÃ©.  Des problÃ¨mes d'organisation peuvent survenir ici - tous les utilisateurs ne sont pas prÃªts Ã  supporter le court cycle de vie de leurs stands.  Si le banc d'essai vit sur une ancienne copie, je la vendrai.  Nous rÃ©solvons ce problÃ¨me en profondeur, en Ã©tendant les disques, ce qui peut Ãªtre fait sans interrompre le service.  Nous nous assurons que 15% de l'espace libre est toujours Ã©conomisÃ©.  S'il est plus petit, le systÃ¨me cessera simplement d'effectuer toutes les opÃ©rations avec des copies virtuelles.  Bien que les bases elles-mÃªmes restent disponibles. <br><br>  Pour les systÃ¨mes avec des E / S disque intensives, la bande passante rÃ©seau est susceptible d'Ãªtre un facteur limitant.  Selon le profil de charge spÃ©cifique, le systÃ¨me peut commencer Ã  mieux fonctionner avec la virtualisation.  En fonction de la charge, la latence de lecture sÃ©quentielle moyenne d'un fichier db est de 5 Ã  10 ms, ce qui est assez bon mÃªme pour les systÃ¨mes industriels. <br><br>  Les disques Delphix Â«classiquesÂ» sont connectÃ©s de n'importe quelle maniÃ¨re qui prend en charge ESX, et le fournisseur a une liste de recommandations sur la faÃ§on de le faire avec des performances maximales.  Nous utilisons SAN.  Le systÃ¨me lui-mÃªme prÃ©sente les disques sur lesquels se trouvent les fichiers de la base de donnÃ©es virtuelle, uniquement via le protocole NFS.  Pour cette raison, vous devez faire attention Ã  la bande passante du canal et Ã  sa congestion.  Dans notre cas, il est logique de placer uniquement des fichiers de donnÃ©es pour Delphix sur des baies de disques afin qu'aucune activitÃ© dans la banque n'affecte la vitesse d'E / S pour les bases de donnÃ©es virtuelles. <br><br>  Maintenant, nous travaillons sur Delphix 5.1.9, mais regardez la version 5.2 - l'interface utilisateur a quittÃ© le flash et, selon le fournisseur, est devenue beaucoup plus pratique.  Delphix a impressionnÃ© nos collÃ¨gues et, aprÃ¨s le traitement, nous envisageons de transfÃ©rer le profil, le CRM et les services bancaires par Internet Ã  ce systÃ¨me de dÃ©veloppeurs. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416815/">https://habr.com/ru/post/fr416815/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416801/index.html">La Douma d'Ã‰tat en premiÃ¨re lecture a adoptÃ© un projet de loi pour annuler l'itinÃ©rance</a></li>
<li><a href="../fr416805/index.html">Comment passer du temps lors d'une confÃ©rence d'affaires Ã  bon escient? Conseils de ISPsystem bizdedev</a></li>
<li><a href="../fr416807/index.html">ArrivÃ©e de Jeffrey Richter en Russie: annonce de la confÃ©rence DotNext 2018 Ã  Moscou</a></li>
<li><a href="../fr416809/index.html">ModÃ¨les de snooker Elo et EloBet</a></li>
<li><a href="../fr416813/index.html">Lorsque 2 x 3 = 2, ou encore une fois sur la virtualisation des donnÃ©es</a></li>
<li><a href="../fr416817/index.html">3e place dans la phase de qualification de DataScienceGame 2018</a></li>
<li><a href="../fr416819/index.html">Adieu, microservices: de cent enfants Ã  problÃ¨mes Ã  une superstar</a></li>
<li><a href="../fr416821/index.html">Fonctionnement de JS: communications WebRTC et P2P</a></li>
<li><a href="../fr416823/index.html">Sang, sueur et pixels: quel est le livre de Jason Schreier</a></li>
<li><a href="../fr416825/index.html">Comment ne PAS Ãªtre un dÃ©veloppeur mÃ©diocre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>