<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçë üîõ üë©üèæ G√©oservices Web. Aper√ßu des solutions modernes üî¥ ‚ÜôÔ∏è ‚öíÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le cadre de presque tous les produits en ligne, vous pouvez r√©pondre √† une t√¢che qui n√©cessite l'utilisation d'un service particulier li√© aux car...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©oservices Web. Aper√ßu des solutions modernes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462011/"><img src="https://habrastorage.org/webt/0u/8u/jn/0u8ujnh7xzhzt6m8mp2ed630fei.jpeg"><br><br>  Dans le cadre de presque tous les produits en ligne, vous pouvez r√©pondre √† une t√¢che qui n√©cessite l'utilisation d'un service particulier li√© aux cartes, au g√©ocodage, au g√©o-positionnement.  Personnellement, je travaille sur un catalogue immobilier en ligne depuis pr√®s de 10 ans, et dans le cadre d'un certain nombre d'autres projets, j'ai de l'exp√©rience dans l'utilisation des fonctions sp√©cifiques de divers g√©o-services en ligne. <br><br>  Dans cet article, je vais examiner les g√©o-t√¢ches auxquelles les programmeurs sont le plus souvent confront√©s, faire un bref examen des services qui offrent des solutions √† ces probl√®mes et partager mon exp√©rience d'utilisation de ces services. <br><br>  Je compte √©galement sur la participation de commentateurs - si vous remarquez dans la critique une inexactitude dans la description, le manque de votre bon service ou si vous avez juste quelque chose √† ajouter √† ce que vous avez d√©j√† √©crit - √©crivez dans les commentaires, je vais tout rassembler dans le texte principal afin d'avoir toujours une bonne liste d'outils √† port√©e de main pour l'avenir pour toutes les occasions. <br><a name="habracut"></a><br><h2>  Table des mati√®res </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Afficher des cartes sur le site</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©ocodage avant et arri√®re</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse et saisie semi-automatique des adresses</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rechercher des organisations</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Emplacement de l'utilisateur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Construire des itin√©raires</a> </li></ul><br><a name="sitemaps"></a><br><h2>  Afficher des cartes sur le site </h2><br>  Une t√¢che tr√®s populaire consiste √† afficher des cartes en ligne sur un site.  Par exemple, pour montrer exactement o√π se trouve votre bureau sur la carte.  Ou o√π vous pouvez r√©cup√©rer ce que le cr√©ateur de l'annonce vend. <br><br>  Pour afficher les cartes, deux principaux types d'API sont utilis√©s: <br><br><ul><li>  API Javascript (interactive) </li><li>  API statique (statique) </li></ul><br><h3>  API Javascript </h3><br>  Tous les services que j'ai d√©velopp√©s fonctionnent principalement avec la Russie, je vais donc parler des API que j'ai utilis√©es moi-m√™me et qui sont populaires aupr√®s de nous.  Je sais que bing et d'autres fournisseurs de cartes ont des API, mais je ne les ai pas utilis√©es. <br><br>  L'API Javascript vous permet d'afficher une carte interactive sur le site avec la possibilit√© de zoomer, d'afficher des marqueurs, d'interagir avec la carte (glisser des marqueurs, afficher des info-bulles, etc.). <br><br><h4>  API Javascript Yandex.Maps </h4><br><ul><li>  Bonnes cartes de la Russie </li><li>  Bien que gratuit, sans inclure certaines fonctionnalit√©s </li><li>  Nombreuses opportunit√©s - regroupement d'√©tiquettes, etc. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/maps/jsapi/doc/2.1/quick-start/index-docpage</a> </li></ul><br><h4>  API Javascript Google Maps </h4><br><ul><li>  Bonnes cartes du monde entier </li><li>  Par fonctionnalit√©s au niveau Yandex </li><li>  Pay√© - √† partir de 7 $ pour 1000 appels </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/javascript/tutorial</a> </li></ul><br><h4>  API 2GIS </h4><br><ul><li>  De tr√®s bonnes cartes, mais pas partout. </li><li>  Au revoir gratuitement </li><li>  La fonctionnalit√© de l'API est plus faible que Yandex / Google, mais peut √™tre √©tendue √† l'aide des modules Leaflet </li><li>  Mais il existe des plans d'√©tage pour les centres commerciaux </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">api.2gis.ru/doc/maps/ru/quickstart</a> </li></ul><br><h4>  Cartes Azure </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">azure.microsoft.com/en-us/services/azure-maps</a> </li><li>  Un grand nombre de services, dont un constructeur d'itin√©raire, d√©terminant l'emplacement par IP </li><li>  Il y a des limites gratuites et une API payante </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.mapbox.com/api/maps</a> </li><li>  Cartes mignonnes pour le Web et le mobile. </li><li>  Je peux me tromper, mais les cartes semblent √™tre uniquement en anglais </li><li>  Pour les applications mobiles, lib√©rez jusqu'√† 25 000 utilisateurs par mois, sur le Web jusqu'√† 50 000 t√©l√©chargements par mois </li></ul><br><br><h3>  API statique </h3><br>  L'API statique peut √™tre utilis√©e l√† o√π vous devez afficher uniquement une image de carte, sans interactivit√©.  Par exemple, vous souhaitez joindre une carte √† un e-mail ou permettre √† l'utilisateur de vous imprimer un itin√©raire.  Eh bien, ou votre concepteur a dessin√© une disposition dans laquelle une carte est utilis√©e √† la place de l'arri√®re-plan - le chargement de cartes JS compl√®tes pour une telle t√¢che semble redondant.  En outre, une image statique peut √™tre utilis√©e comme aper√ßu pour acc√©l√©rer le chargement d'une page par l'utilisateur - et en la rendant interactive. <br><br><h4>  API statique Yandex.Maps </h4><br><ul><li>  Taille maximale 650x450 pixels </li><li>  Au revoir gratuitement </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/maps/staticapi/doc/1.x/dg/concepts/input_params-docpage</a> </li></ul><br><h4>  API Google Maps statiques </h4><br><ul><li>  2 $ pour mille demandes </li><li>  La taille maximale est 640x640 pour le tarif de base et 2048x2048 pour la prime (200 $ par mois) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/maps-static/intro</a> </li></ul><br><h4>  API statique 2GIS </h4><br><ul><li>  Pour une raison quelconque, le site est r√©pertori√© comme "obsol√®te" </li><li>  Au revoir gratuitement </li><li>  Taille maximale 1280x1280 </li><li>  Il n'y en a pas partout </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">api.2gis.ru/doc/maps/1.0/static</a> </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.mapbox.com/api/maps</a> </li><li>  Je peux me tromper, mais les cartes semblent √™tre uniquement en anglais </li><li>  Taille maximale 1280x1280 </li><li>  Jusqu'√† 25 000 t√©l√©chargements de cartes gratuits par mois </li></ul><br><a name="geocoding"></a><br><h2>  G√©ocodage </h2><br>  Le g√©ocodage est un processus qui vous permet de conna√Ætre les coordonn√©es d'un objet √† son adresse.  Eh bien, ou g√©ocodage invers√© - d√©couvrez par coordonn√©es le type de g√©o-objet qui s'y trouve.  En fait, tous les services de g√©ocodage fonctionnent avec des adresses saisies dans un format arbitraire, tout en les amenant √† leur niveau standard.  Je n'ai pas trouv√© de services de g√©ocodage enti√®rement gratuits sur le march√© pour le moment. <br><br>  Les applications typiques du g√©ocodage sont d'afficher l'adresse entr√©e par l'utilisateur sur la carte, ou vice versa (inverse) - l'utilisateur a mis une marque sur la carte, elle doit √™tre transform√©e en adresse. <br><br><h3>  Geocoder Yandex.Map </h3><br><ul><li>  Il y a un taux gratuit limit√© √† 25 000 demandes par jour. </li><li>  En plus du nombre de demandes, il est √©galement limit√© par le contrat de licence - les r√©sultats de codage ne peuvent pas √™tre enregistr√©s et utilis√©s sans carte (mais peuvent √™tre mis en cache), ils doivent √™tre affich√©s uniquement sur les cartes Yandex et uniquement dans le cadre des services publics (accessibles √† tous ou avec inscription gratuite et ouverte). </li><li>  Fonctionne tr√®s bien en Russie, √† la fois directe et inverse. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/maps/geocoder</a> </li></ul><br><h3>  Conseils de DaData </h3><br><ul><li>  DaData dispose d'un service de ¬´conseil¬ª qui vous permet d'impl√©menter l'auto-compl√©tion des adresses saisies par l'utilisateur. </li><li>  Il comprend les fonctions d'un g√©ocodeur (il peut fournir des coordonn√©es par adresse et une adresse par coordonn√©es). </li><li>  Cela ne fonctionne qu'en Russie, le rev√™tement est boiteux - chez les millionnaires au niveau de 75-95%, en moyenne en Russie environ 50% </li><li>  10000 demandes par jour sont gratuites, mais l'offre ne permet pas de l'utiliser compl√®tement en mode automatique - pour le g√©ocodage automatique, vous devez utiliser le service de normalisation. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dadata.ru/api/suggest/address</a> </li></ul><br><h3>  API de g√©ocodage de Google Maps </h3><br><ul><li>  5 $ pour 1000 demandes. </li><li>  Je ne l'ai pas utilis√©, car il existe des analogues gratuits de Yandex et dadata </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/geocoding/intro</a> </li></ul><br><br><h3>  Graphhopper </h3><br><ul><li>  Lib√©rez jusqu'√† 500 demandes par jour. </li><li>  Beaucoup d'autres fonctionnalit√©s int√©ressantes. </li><li>  Fonctionne avec OpenStreetMaps </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.graphhopper.com/developers</a> </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.mapbox.com/api/search</a> </li><li>  La faible base de rues en Russie, au moins √† Kazan, les rues sur lesquelles je teste - n'a pas pu trouver </li><li>  Jusqu'√† 100 000 demandes par mois gratuites </li></ul><br><h3>  OpenStreetMaps Nominatim </h3><br><ul><li>  Solution OpenSource que vous pouvez d√©ployer sur votre propre serveur. </li><li>  Non utilis√©, peut-√™tre dans les commentaires que quelqu'un √©crira sur son exp√©rience d'utilisation </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nominatim.org/release-docs/develop/api/Overview</a> </li></ul><br><h3>  2GIS </h3><br><ul><li>  La documentation de l'API Javascript a d√©clar√© l'existence de fonctions de g√©ocodage, mais en fait je n'ai pas trouv√© comment les utiliser dans la documentation.  Peut-√™tre en cours de d√©veloppement. </li></ul><br><img src="https://habrastorage.org/webt/zf/vt/-4/zfvt-4myl-bujpmdet-49-br-h0.png"><br><a name="parsing"></a><br><h2>  Analyse et saisie semi-automatique des adresses </h2><br>  Parfois, il est n√©cessaire de laisser l'utilisateur entrer une adresse dans un format al√©atoire, puis de transformer cette adresse en donn√©es structur√©es - s√©par√©ment le nom du pays, de la r√©gion, de la ville, de la rue et du num√©ro de maison.  Cela est n√©cessaire pour tous les services qui travaillent avec l'immobilier, il est n√©cessaire de d√©terminer les adresses en double, de remplir les re√ßus de courrier, etc. <br><br>  En principe, tous les services de g√©ocodage de la liste ci-dessus r√©alisent cette t√¢che sans probl√®me.  Avec le g√©ocodage direct, en plus des coordonn√©es, ils renvoient √©galement des informations structur√©es sur le g√©o-objet trouv√©. <br><br>  Par ailleurs, il convient de noter le service de ¬´standardisation¬ª de DaData - aux adresses de Russie, elles renvoient de nombreuses informations utiles diff√©rentes, 10 kopecks pour chaque adresse: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dadata.ru/api/clean/address</a> <br><br>  De plus, je me r√©f√®re √©galement √† cette section les t√¢ches de recherche d'informations suppl√©mentaires sur l'adresse.  En particulier, cette d√©termination du quartier de la ville auquel appartient l'adresse sp√©cifi√©e et la recherche des stations de m√©tro les plus proches sont des t√¢ches importantes si nous recherchons des annonces par adresse. <br><br><h3>  D√©finition de la zone au sein de la ville </h3><br>  √Ä l'heure actuelle, j'ai trouv√© deux solutions pour d√©terminer la zone au sein de la ville.  Les deux ne fonctionnent que pour la Russie. <br><br>  Le premier et le plus √©vident est DaData.  Beaucoup de choses ont √©t√© √©crites sur ce service, c'est vraiment un bon service pour travailler avec des adresses russes (et ce n'est pas une publicit√©).  Essayez-le vous-m√™me, assurez-vous. <br><br>  Si vous ne voulez pas d√©pendre d'un service tiers, il y a une autre solution que j'ai appliqu√©e et continuez d'appliquer jusqu'√† pr√©sent.  C'est la d√©finition du quartier par le code de l'adresse <abbr title="Classification panrusse des objets de la division administrative-territoriale">OKATO</abbr> .  Chaque adresse en Russie a son propre code OKATO - 11 chiffres.  Parmi ceux-ci, les 5-8 premiers, selon la ville, indiquent clairement la zone. <br><br>  Pour les villes dont j'ai besoin, j'ai simplement compil√© une base de donn√©es de codes OKATO pour les districts, j'ai obtenu quelque chose comme ce tableau: <br><br><div class="spoiler">  <b class="spoiler_title">Exemples de codes OKATO</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gl/vz/fk/glvzfkojdmgvtmmkbbzs1u4pydc.png"><br></div></div><br>  La question suivante est de savoir comment trouver le code d'adresse OKATO?  DaData le renvoie dans le cadre de ses services de conseils et de normalisation.  Il existe un site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">okato-oktmo.rf</a> qui √† l'adresse affiche le code OKATO en utilisant le m√™me dadat.  Notre t√¢che consiste √† trouver ind√©pendamment le code OKATO √† l'adresse, quel que soit le service. <br><br>  Pour ce faire, nous devons t√©l√©charger la derni√®re <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base de donn√©es FIAS</a> et lancer une recherche sur celle-ci.  Il y a d√©j√† un article sur le hub avec un exemple de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comment importer la base de donn√©es FIAS dans MSSQL</a> .  En g√©n√©ral, vous configurez la recherche par FIASU, trouvez l'adresse dont vous avez besoin l√†-bas, trouvez son code OKATO, par le code OKATO √† partir des listes de districts que vous connaissez le district - c'est tout, le probl√®me est r√©solu. <br><br>  Si vous ne souhaitez pas prendre un bain de vapeur en t√©l√©chargeant 60 gigaoctets de fichiers XML dans votre base de donn√©es, il existe un service moins cher, mais aussi moins fonctionnel que les donn√©es qui vous permet de travailler avec la base de donn√©es FIAS: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kladr-api.ru/docs</a> <br><br><h3>  Rechercher les stations de m√©tro les plus proches </h3><br>  Une fonction n√©cessaire, en particulier pour les habitants de Moscou, lorsque vous devez trouver les stations de m√©tro les plus proches √† l'adresse.  Pour cette t√¢che, je connais actuellement deux solutions: <br><br><h4>  Yandex Geocoder </h4><br>  Vous devez d'abord trouver les coordonn√©es de l'adresse.  Ensuite, comme dans le g√©ocodage inverse, nous passons ces coordonn√©es comme param√®tres de requ√™te et le type du toponyme retourn√© kind = metro. <br>  Un param√®tre distinct d√©finit la taille de la zone dans laquelle il est n√©cessaire de rechercher la station la plus proche.  Empiriquement, j'ai s√©lectionn√© des valeurs de 0,02 √† 0,05 degr√©s selon la ville (√† Moscou, un rayon de 2 kilom√®tres du m√©tro est toujours consid√©r√© comme une distance de marche, et √† Kazan la distance entre les stations est de 1,5 kilom√®tre). <br><br>  Il y a aussi un probl√®me avec cette m√©thode, que parfois le m√©tro le plus proche en coordonn√©es n'est pas toujours le plus proche en fait (par exemple, c'est de l'autre c√¥t√© de la rivi√®re, ou quelque chose comme √ßa).  Vous ne pouvez d√©terminer le m√©tro le plus proche que par accessibilit√© en utilisant les services de construction d'itin√©raires et de matrices de distance, qui seront abord√©s dans l'article ci-dessous.  Pour une d√©termination approximative de la station la plus proche - le g√©ocodeur Yandex est tout √† fait appropri√© et vous permet d'effectuer jusqu'√† 25 000 demandes par jour gratuitement. <br><br><h4>  DaData </h4><br>  Oui, et DaData peut vous aider dans cette t√¢che - dans le cadre des tarifs pay√©s du service ¬´prompt¬ª ou ¬´standardisation¬ª, les 3 stations de m√©tro les plus proches et les distances qui les s√©parent sont √©galement renvoy√©es √† chaque adresse. <br><a name="places"></a><br><h2>  Rechercher des organisations </h2><br>  Une t√¢che courante si vous voulez montrer √† vos clients une sorte d'organisation dans sa ville.  Par exemple, vous vendez des marchandises avec livraison et vous souhaitez montrer √† une personne tous les points de livraison d'un service dans sa ville.  Ou vous faites des mises en page pour l'impression et montrez √† l'utilisateur sur la carte toutes les imprimeries o√π il peut aller pour imprimer votre mise en page. <br><br><h3>  Recherche Yandex par organisation </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/maps/geosearch</a> </li><li>  Jusqu'√† 500 requ√™tes par jour sont gratuites, √† condition que les r√©sultats soient affich√©s sur une carte publique. </li><li>  Les r√©sultats de la recherche ne peuvent pas √™tre enregistr√©s ou affich√©s sur des cartes autres que Yandex. </li></ul><br><h3>  Google place une API </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/places/web-service/usage-and-billing</a> </li><li>  Un syst√®me de tarification tr√®s compliqu√©, je ne le comprenais pas compl√®tement.  Peut-√™tre que quelqu'un qui a utilis√© √©crira dans les commentaires. </li><li>  Si je comprends bien, les requ√™tes de base sont gratuites, mais toutes ext.  les informations (contacts, avis, ...) sont factur√©es s√©par√©ment. </li></ul><br><h3>  2GIS </h3><br>  La rumeur veut qu'ils disposent d'une API priv√©e payante pour rechercher des organisations.  Je n'ai pas encore r√©ussi √† y acc√©der, et il y a assez de recherche d'organisations de Yandex pour nos t√¢ches. <br><a name="users"></a><br><h2>  Localisation de l'utilisateur par IP </h2><br>  Une t√¢che courante sur le Web consiste √† comprendre de quelle ville un visiteur est venu sur votre site.  Il existe des solutions pour cette t√¢che sous la forme de services en ligne ou de solutions autonomes pour ceux qui ne veulent pas d√©pendre de services tiers. <br><br>  Service en ligne pour d√©terminer la ville par IP - ici je peux conseiller √† nouveau (pour la Russie) DaData: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dadata.ru/api/detect_address_by_ip</a> <br>  La limite est de 10 000 demandes par jour.  Si votre pr√©sence d√©passe 10 000 entr√©es uniques par jour, il est logique de consid√©rer les solutions install√©es sur votre serveur.  Vous pouvez en savoir plus √† leur sujet dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la revue DaData de la</a> fa√ßon dont ils ont choisi quoi utiliser. <br><br>  Je vais dupliquer bri√®vement les informations: <br>  <b>IpGeoBase</b> - √©tait un bon site qui √©tait mis √† jour quotidiennement et fournissait une base de donn√©es d'adresses IP et de leurs villes respectives dans un format lisible par machine compr√©hensible qui est facilement import√© dans n'importe quelle base de donn√©es.  Malheureusement, il a cess√© de se mettre √† jour en 2017. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ipgeobase.ru</a> <br><br>  <b>SypexGeo</b> - est toujours en cours de mise √† jour, il se pr√©sente sous la forme d'un script php et d'une base de donn√©es pour celui-ci dans son propre format.  Fonctionne rapidement, d√©termine bien <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sypexgeo.net/en/download</a> <br><br>  <b>MaxMind</b> propose de t√©l√©charger des bases de donn√©es gratuites avec une pr√©cision r√©duite et une API s√©par√©e pour elles dans divers langages de programmation.  Des bases de donn√©es plus pr√©cises sont disponibles dans le cadre des produits payants. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dev.maxmind.com/geoip/geoip2/geolite2</a> <br><br><h2>  D√©terminer l'emplacement de l'utilisateur par ses coordonn√©es </h2><br>  La t√¢che est similaire √† celle du g√©ocodage invers√©, avec de l√©g√®res diff√©rences. <br><br>  Parfois, nous devons d√©terminer l'emplacement de l'utilisateur lorsque nous connaissons exactement ses coordonn√©es (par exemple, nous les avons obtenues √† l'aide des capteurs GPS de l'appareil ou de l'API de g√©olocalisation dans le navigateur).  Il existe deux options: le g√©ocodage invers√© renvoie le nom du lieu o√π se trouve l'utilisateur.  Mais que se passe-t-il si l'internaute se situe quelque part sur l'autoroute entre les villes, ou en banlieue ou simplement dans un champ propre et souhaite voir des annonces de vente de terrain sur ce champ?  Pas toujours le g√©ocodeur invers√© fera face √† cela. <br><br>  Dans ce cas, je le fais personnellement - j'ai dans ma base de donn√©es toutes les coordonn√©es des villes russes dans lesquelles nous avons des annonces et avec lesquelles nous travaillons g√©n√©ralement.  Et selon les coordonn√©es de l'utilisateur, je d√©termine simplement la ville la plus proche de lui √† partir de notre base de donn√©es, sur simple demande: <br><br><pre><code class="sql hljs">ORDER BY (|lng - :lng| + |lat - :lat|) ASC LIMIT 1</code> </pre> <br><a name="directions"></a><br><h2>  Construction de routes </h2><br>  Parfois, vous devez cr√©er un itin√©raire d'un point √† un autre.  Par exemple, cr√©ez une carte de localisation de l'emplacement de l'utilisateur √† votre bureau.  Il existe des solutions payantes de Yandex et de Google - leur principale diff√©rence est que Yandex vend un abonnement avec un paiement annuel, et Google facture les demandes √† la pi√®ce et d√©duit l'argent de la carte une fois par mois pour le mois. <br>  Google dispose √©galement d'un abonnement premium, qui offre certaines fonctions suppl√©mentaires (par exemple, l'augmentation de la taille maximale de l'image de l'API statique) et un d√©p√¥t sur les limites.  Il existe √©galement une solution de 2GIS - la plus ch√®re en termes de 1 itin√©raire construit. <br><br>  Les t√¢ches de cr√©ation d'itin√©raires sont divis√©es en plusieurs sous-t√¢ches: <br><ol><li>  Construire un itin√©raire d'un point √† un autre est compr√©hensible </li><li>  La matrice des distances - un service qui vous permet de construire une matrice des distances et du temps en transit entre un ensemble de points de d√©part et d'arriv√©e.  Par exemple, si vous devez calculer les itin√©raires optimaux pour plusieurs courriers qui doivent livrer des marchandises de diff√©rents entrep√¥ts √† diff√©rents clients.  Ou offrez-vous des services de nettoyage et vous devez savoir quel nettoyant sera le plus pratique √† la maison pour vous rendre √† chacune des commandes d'aujourd'hui et faire un sch√©ma optimal pour d√©placer les nettoyeurs. </li><li>  API Isochrone - construire autour d'une zone ponctuelle, qui peut √™tre atteinte en m√™me temps.  Par exemple, ¬´trouvez tous les caf√©s √† moins de 15 minutes √† pied de la position de l'utilisateur¬ª. </li></ol><br>  Diff√©rents fournisseurs proposent diff√©rentes solutions pour toutes ces t√¢ches. <br><br>  Gr√¢ce √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">3aiats</a> , une solution Open Source gratuite a √©t√© trouv√©e - <br><h3>  Graphhopper </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.graphhopper.com/open-source</a> </li><li>  S'installe sur votre serveur, utilise OpenStreetMap pour cr√©er des itin√©raires, s'ex√©cute en Java </li><li>  Il existe une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API gratuite et payante</a> pour ceux qui ne souhaitent pas installer ce logiciel sur leur serveur. </li><li>  Il existe une API pour le g√©ocodage, la construction d'itin√©raires, la construction de matrices de distance et l'optimisation d'itin√©raires, ainsi que l'isochrone </li></ul><br><br><h3>  MapBox (merci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ne_kotin</a> ) </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docs.mapbox.com/api/navigation</a> </li><li>  Il existe une API pour le g√©ocodage, la construction d'itin√©raires, la construction de matrices de distance et l'optimisation d'itin√©raires. </li><li>  Jusqu'√† 100 000 demandes par mois gratuites </li></ul><br><br><h3>  Yandex </h3><br>  Une caract√©ristique commune √† tous les services Yandex pour les itin√©raires est qu'ils op√®rent en Russie, Abkhazie, Azerba√Ødjan, Arm√©nie, Bi√©lorussie, G√©orgie, Kazakhstan, Kirghizistan, Moldavie, Tadjikistan, Turquie, Ouzb√©kistan et Ukraine. <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/routing/router</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/routing/distance_matrix</a> </li><li>  Tarifs √† partir de 120 000 roubles par an </li><li>  Il existe une API pour construire des routes et des matrices de distance </li><li>  Comprend les embouteillages, y compris ceux pr√©vus pour un moment donn√© dans le futur </li><li>  Capable de construire des itin√©raires de marche, sur les transports personnels et publics </li></ul><br>  Il existe un service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">app.swizz.ru</a> qui utilise l'API Yandex pour cr√©er des itin√©raires.  Le service n'a pas sa propre API, et il rencontre des probl√®mes avec les limites de Yandex, mais en substance, vous pouvez voir comment fonctionne le g√©n√©rateur de routes Yandex.  Merci pour le lien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">3aiats</a> <br><br><h3>  Google </h3><br>  La principale diff√©rence avec Yandex est la tarification √† l'utilisation, c'est-√†-dire pour chaque demande.  Pour les petits volumes, les tarifs seront plus rentables avec Google, pour les grands - avec Yandex. <br>  De plus, Google n'a aucune restriction sur les pays o√π ils construisent des itin√©raires. <br><br><h4>  API Google Directions </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/directions/intro</a> </li><li>  Le tarif est de 5 $ ou 10 $ pour 1000 demandes.  10 - si l'optimisation est utilis√©e en tenant compte des embouteillages et des waypoints interm√©diaires.  5 - si ce n'est qu'un itin√©raire entre 2 points. </li><li>  Par fonctions, un analogue du service Yandex pour la construction de routes entre 2 points, mais avec plus de param√®tres </li><li>  Il est notamment en mesure de proposer plusieurs itin√©raires alternatifs </li></ul><br><br><h4>  API Google Distance Matrix </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/distance-matrix/start</a> </li><li>  Tarif 5 $ ou 10 $ pour 1000 demandes, similaire aux directions </li><li>  API de matrice de distance r√©guli√®re </li></ul><br><br><h4>  API Google Roads </h4><br>  Un service Google unique qui vous permet de travailler avec les routes sur lesquelles votre v√©hicule se d√©place. <br>  Relie automatiquement les points de votre itin√©raire aux routes, affiche le meilleur sch√©ma de circulation et toutes les informations sur les sections de routes que vous rencontrez en chemin. <br>  Il sait comment lier les sections de route les plus proches aux points (par exemple, sur une piste GPS qui saute d'avant en arri√®re pour montrer quelles routes l'itin√©raire a √©t√© r√©ellement travers√©). <br>  Capable d'afficher les limites de vitesse sur les routes de l'itin√©raire. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developers.google.com/maps/documentation/roads/intro</a> </li><li>  Tarif 10 $ pour les routes et 20 $ pour 1000 demandes de limitation de vitesse </li></ul><br><br><h3>  WikiRoutes </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wikiroutes.info/developers</a> </li><li>  Construire des itin√©raires en utilisant les transports publics </li><li>  Il existe une API payante pour l'int√©gration avec le site </li></ul><br><br><h3>  Cartes Azure </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">azure.microsoft.com/en-us/services/azure-maps</a> </li><li>  Un grand nombre de services, dont un constructeur d'itin√©raire </li><li>  Il y a des limites gratuites et une API payante </li></ul><br><br><h3>  2Gis Logistics </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">logistic.2gis.ru</a> </li><li>  Service de construction d'itin√©raires </li><li>  5 itin√©raires par jour pour 3 500 roubles par mois, pr√™ts √† discuter d'une augmentation de la limite </li><li>  Pour un peu d'argent, il y a le suivi des mouvements de messagerie et d'autres fonctions suppl√©mentaires </li></ul><br><br><h3>  Services d'optimisation de la logistique </h3><br>  En tant que classe distincte de services pour la construction d'itin√©raires, il convient de mettre en √©vidence des solutions toutes faites pour optimiser la logistique, qui sont factur√©es en fonction du nombre de courriers / v√©hicules sur la ligne.  En effet, ils combinent des outils de construction d'itin√©raire et d'autres services pour optimiser au maximum votre logistique.  Ce sont des solutions assez complexes et de niche, donc je les ai combin√©es en une seule liste. <br>  Merci d'avoir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ajout√© √† la</a> liste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">3aiats</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tech.yandex.ru/routing/vrp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">zig-zag.org</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quickrun.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">maxoptra.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.antor.ru</a> </li></ul><br><br><h2>  Conclusion </h2><br>  Dans le monde d'aujourd'hui, vous pouvez trouver un service pr√™t √† l'emploi pour pratiquement toutes les t√¢ches que vous devez r√©soudre, ou le r√©soudre en utilisant une combinaison de services de la liste ci-dessus.  La seule question est le co√ªt de cette solution, combien elle vous sera b√©n√©fique. <br><br>  De nombreux services, au fur et √† mesure que leur popularit√© augmente, passent √† des syst√®mes de mon√©tisation de plus en plus s√©v√®res - tout comme les cartes Google gratuites de Google sont devenues enti√®rement payantes, Yandex s'oriente progressivement vers cela. <br><br>  Il existe des OpenStreetMaps ouverts, qui semblent vous faire r√©soudre tous les probl√®mes de la liste, mais pour cela, vous devez les d√©ployer vous-m√™me, et en plus de votre projet, maintenir s√©par√©ment une infrastructure enti√®re pour les cartes - autant que n√©cessaire, chacun d√©cide pour lui-m√™me. <br><br>  Probablement, dans la revue, je n'ai pas indiqu√© d'excellents services que vous utilisez, ou vous avez utilis√© les services de la revue et vous avez quelque chose √† ajouter √† ce qui a d√©j√† √©t√© √©crit - √©crivez dans les commentaires, je vais ajouter au texte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462011/">https://habr.com/ru/post/fr462011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461999/index.html">Une autre version de l'environnement de d√©veloppement WordPress (docker, wp-cli)</a></li>
<li><a href="../fr462003/index.html">Comment j'ai post√© PWA sur Svelte sur Google Play</a></li>
<li><a href="../fr462005/index.html">Caract√©ristiques de Google PageSpeed: am√©lioration de l'√©valuation du site et du classement de recherche</a></li>
<li><a href="../fr462007/index.html">D√©veloppement de scripts Python robustes</a></li>
<li><a href="../fr462009/index.html">Tendances de programmation: √† quoi s'attendre en 2020?</a></li>
<li><a href="../fr462013/index.html">Historique des probl√®mes de migration du stockage Docker (racine Docker)</a></li>
<li><a href="../fr462015/index.html">Univers de reporting SAP</a></li>
<li><a href="../fr462021/index.html">Comment arr√™ter de faire la m√™me chose</a></li>
<li><a href="../fr462023/index.html">Cascadeur: L'avenir de l'animation de jeux</a></li>
<li><a href="../fr462025/index.html">Mod√®le de donn√©es de r√©seau relationnel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>