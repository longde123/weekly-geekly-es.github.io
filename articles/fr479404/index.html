<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😻 👩🏿‍🍳 🛬 Personnel pour le Père Noël 🧦 🈶 🤛🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chaque année, le 31 décembre, moi, en costume de père Noël, et ma femme, dans le rôle de la fille des neiges, conduisons la ville en voiture avec mes ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personnel pour le Père Noël</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479404/"><img src="https://habrastorage.org/webt/_m/qk/q9/_mqkq91grdlhtsaiv0-utvh-2r4.jpeg"><br><br>  Chaque année, le 31 décembre, moi, en costume de père Noël, et ma femme, dans le rôle de la fille des neiges, conduisons la ville en voiture avec mes félicitations.  Comme la nouvelle année arrive bientôt, j'ai décidé de vérifier si tout était prêt pour moi et j'ai sorti mon personnel de longue date du sous-sol.  À ma grande surprise, après avoir passé un an au sous-sol, il a bien fonctionné même maintenant!  Sa batterie est toujours en quelque sorte chargée!  Le personnel n'est pas très lumineux, mais ça brille.  Bien sûr, je vais devoir me recharger et je regarde une LED cesser de fonctionner, mais c'est réparable - nous allons le réparer. <br><br>  J'ai fait ce personnel en 2012, et depuis lors, il m'a fidèlement servi.  La chose est assez simple, mais très efficace, surtout les enfants s'en réjouissent.  Il est presque comme une épée Jedi - seulement un bâton, et pour le vrai Père Noël - c'est une chose nécessaire.  J'ai décidé d'écrire à son sujet ici sur Habré - tout à coup quelqu'un sera inspiré par l'idée et le fera pour lui d'ici le Nouvel An, il est encore temps. <br><a name="habracut"></a><br>  Pour faire un personnel, vous aurez besoin de: <br><br><ul><li>  un morceau de tuyau d'eau en plastique de 1,3 mètre; </li><li>  un peu d'autocollant brillant pour la décoration; </li><li>  un morceau de câble réseau UTP-5 ou tout autre câble approprié; </li><li>  LED bleues, au moins 24 pièces; </li><li>  batterie </li><li>  bouton d'alimentation; </li><li>  tout petit microcontrôleur ou carte FPGA qui a quelque chose que vous pouvez programmer; </li><li>  un grand jouet boule-arbre de Noël qui peut être divisé en deux afin que la planche et la batterie puissent y être cachées. </li></ul><br>  Les pièces nécessaires sont visibles sur cette photo: <br><br><img src="https://habrastorage.org/webt/wi/8f/zd/wi8fzdau34zglx89jlc59vd7js8.jpeg"><br><br>  L'appareil du personnel est très simple.  Il n'y a surtout rien à écrire.  Nous prenons une conduite d'eau en plastique blanc et forons plusieurs trous à la même distance de 200 mm.  J'ai 6 trous. <br><br>  Nous dissolvons le câble UTP-5 en plusieurs paires torsadées.  Six paires de fils sont nécessaires.  Nous les lançons dans les trous et sortons par une extrémité du tuyau, là où sera la boule magique du bâton.  Lorsque des paires de fils entrent dans les trous du tuyau, nous les nettoyons et enroulons étroitement autour du tuyau à une certaine distance les uns des autres.  Nous soudons.  Au "bus" résultant dans un cercle de la soudure du personnel en parallèle 4 LED bleues: <br><br><img src="https://habrastorage.org/webt/l1/je/dl/l1jedl9jftto90xq6rkkl-k22pm.jpeg"><br><br>  En haut du tuyau, vous devez percer un trou plus grand et y coller le bouton d'alimentation de la carte de contrôle: <br><br><img src="https://habrastorage.org/webt/3u/73/b1/3u73b1fpnh8xlup4lq1l-hrzej4.jpeg"><br><br>  J'ai l'écharpe Mars rover comme panneau de contrôle.  Voici le FPGA d'Altera MAX II, et puisque la carte était à l'origine destinée à connecter des moteurs jouets à faible puissance, les sorties de puce sur la carte sont combinées en 10 pièces pour donner plus de courant.  Il n'y a que 6 de ces broches combinées sur la carte - ce sont les «signaux» de la carte f0, f1, f2, f3, f4, f5.  Je peux donc alimenter directement les LED à partir de ces conclusions sans craindre de brûler la sortie du FPGA.  Sur la carte elle-même, il y a 8 LED jaunes - elles peuvent également être allumées.  Si la balle sur le dessus de la portée est translucide, cela ajoutera également un effet visuel. <br><br>  Si vous utilisez Arduino, par exemple, dans un bâton, vous devrez peut-être souder une petite écharpe avec des touches de transistor pour contrôler de nombreuses LED, car il vaut mieux ne pas prendre plus de 10-15mA d'une broche du microcontrôleur, mais nous avons besoin de beaucoup plus pour les LED. <br><br>  La carte doit clignoter avec le programme de contrôle.  L'idée est que lorsque vous appuyez sur le bouton de la portée, le tableau s'allume et il commence immédiatement à allumer les lumières de la portée.  Alors qui a quel fantasme.  J'allume d'abord tour à tour toutes les LED de la première rangée à la sixième, puis j'éteins les virages de la sixième à la première. <br><br>  Le code Verilog HDL expliquera probablement mieux ce que je veux dire: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">module</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">effect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( input wire clk, input wire mclk, output wire [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">:</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">]leds, output wire f0, output wire f1, output wire f2, output wire f3, output wire f4, output wire f5 )</span></span></span></span>; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]cnt; reg [<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]bits; initial begin bits= <span class="hljs-number"><span class="hljs-number">6'</span></span>h00; cnt = <span class="hljs-number"><span class="hljs-number">4'</span></span>h0; end always @(posedge clk) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cnt==<span class="hljs-number"><span class="hljs-number">11</span></span>) cnt&lt;=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cnt &lt;= cnt + <span class="hljs-number"><span class="hljs-number">1'b</span></span>1; always @* <span class="hljs-function"><span class="hljs-function">begin </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">case</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cnt)</span></span></span><span class="hljs-function"> 4'h0: bits </span></span>= <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-number"><span class="hljs-number">4'</span></span>h1: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>h2: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h3: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h4: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h5: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>111111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h6: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h7: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h8: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h9: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>ha: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000000; endcase end assign f0 = bits[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp; mclk; assign f1 = bits[<span class="hljs-number"><span class="hljs-number">1</span></span>] &amp; mclk; assign f2 = bits[<span class="hljs-number"><span class="hljs-number">2</span></span>] &amp; mclk; assign f3 = bits[<span class="hljs-number"><span class="hljs-number">3</span></span>] &amp; mclk; assign f4 = bits[<span class="hljs-number"><span class="hljs-number">4</span></span>] &amp; mclk; assign f5 = bits[<span class="hljs-number"><span class="hljs-number">5</span></span>] &amp; mclk; assign leds = {bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">4</span></span>],bits[<span class="hljs-number"><span class="hljs-number">3</span></span>],bits[<span class="hljs-number"><span class="hljs-number">2</span></span>],bits[<span class="hljs-number"><span class="hljs-number">1</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>]}; endmodule</code> </pre> <br>  Ce n'est pas un module de niveau supérieur, c'est un module effect.v. À partir du module supérieur, deux fréquences d'horloge de clk ~ 40Hz sont fournies ici - cette fréquence détermine la vitesse de l'effet et la deuxième fréquence mclk ~ 320Hz, huit fois plus élevée.  Le signal mclk module en outre les sorties à nouveau, de sorte qu'elles ne sont pas toujours allumées, de sorte que les LED ne brillent pas si fort et que la puce ne chauffe pas. <br><br>  Je ne sais pas si je dois mémoriser cet article.  Mais juste au cas où, j'écrirai que le code Verilog ci-dessus peut être entièrement simulé en utilisant ce banc de test: <br><br><pre> <code class="cpp hljs">`timescale <span class="hljs-number"><span class="hljs-number">1</span></span>ms / <span class="hljs-number"><span class="hljs-number">1u</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> tb; reg clock = <span class="hljs-number"><span class="hljs-number">1'b</span></span>0; always #<span class="hljs-number"><span class="hljs-number">10</span></span> clock = ~clock; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; always @(posedge clock) counter &lt;= counter+<span class="hljs-number"><span class="hljs-number">1</span></span>; wire [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]wleds; wire wf0,wf1,wf2,wf3,wf4,wf5; <span class="hljs-function"><span class="hljs-function">effect </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( .clk( counter[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">] ), .mclk( clock ), .leds( wleds ), .f0( wf0 ), .f1( wf1 ), .f2( wf2 ), .f3( wf3 ), .f4( wf4 ), .f5( wf5 ) )</span></span></span></span>; initial begin $dumpfile(<span class="hljs-string"><span class="hljs-string">"out.vcd"</span></span>); $dumpvars(<span class="hljs-number"><span class="hljs-number">0</span></span>,tb); #<span class="hljs-number"><span class="hljs-number">10000</span></span>; $finish(); end endmodule</code> </pre><br>  Comment est exactement la simulation des projets peut être lu, par exemple, <a href="https://marsohod.org/11-blog/113-icarus" rel="nofollow">ici</a> . <br><br>  Eh bien, selon les résultats de la simulation, vous pouvez obtenir ces chronogrammes de signaux: <br><br><img src="https://habrastorage.org/webt/fr/y-/sz/fry-szzviv-w_nhslins4ops3be.png"><br><br>  Si vous prévoyez de faire ce projet sur Arduin - c'est également possible.  Je ne suis vraiment pas un grand connaisseur d'Arduina, mais il me semble que le code peut ressembler à ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> start_pin = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> end_pin = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) pinMode(i, OUTPUT); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, HIGH); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, LOW); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } }</code> </pre><br>  Le résultat devrait être quelque chose comme ceci: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UjECakae2AY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Malgré le fait que le projet dans son ensemble soit très simple, les spectateurs et passants occasionnels du 31 décembre sont toujours ravis.  Surtout quand vous sortez de la voiture en costume de Père Noël dans une rue enneigée, vous vous approchez d'un passant aléatoire et illuminez le chemin avec un staff, vous donnez un canard mandarin. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr479404/">https://habr.com/ru/post/fr479404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr479392/index.html">Pinebook Pro: plus de Chromebook</a></li>
<li><a href="../fr479394/index.html">Comment j'ai cherché un helpdesk parmi 15 solutions et ... n'a pas trouvé</a></li>
<li><a href="../fr479398/index.html">Nous apportons l'équation de régression linéaire sous forme de matrice</a></li>
<li><a href="../fr479400/index.html">Comment faire d'un journaliste un réseau de neurones, ou "Les secrets de la réduction du texte sur Habré sans un mot"</a></li>
<li><a href="../fr479402/index.html">Comment payer officiellement des services d'indépendant à l'étranger, payer 0% d'impôts et ne pas alimenter les systèmes de paiement</a></li>
<li><a href="../fr479406/index.html">16 conseils de développement pour Android dans Kotlin. Partie 1</a></li>
<li><a href="../fr479414/index.html">Façons de trouver le but. Le rôle du hasard</a></li>
<li><a href="../fr479416/index.html">Voyez où vous allez (vision périphérique vs charge cognitive)</a></li>
<li><a href="../fr479420/index.html">Microphone ouvert: backend. Inscription des invités</a></li>
<li><a href="../fr479422/index.html">[Animation vidéo] Monde filaire: comment en 35 ans un réseau de câbles sous-marins a enveloppé le globe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>