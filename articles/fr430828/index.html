<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∑ ü§¥ üßñ Exp√©rience dans l'utilisation d'√©crans LCD bas√©s sur les produits MELT üìÖ ü§õüèø ü§¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est consacr√© √† une qu√™te d'aventure passionnante que j'ai d√ª traverser dans le processus de cr√©ation d'un capteur externe mis √† jour pour ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exp√©rience dans l'utilisation d'√©crans LCD bas√©s sur les produits MELT</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430828/"> Cet article est consacr√© √† une qu√™te d'aventure passionnante que j'ai d√ª traverser dans le processus de cr√©ation d'un capteur externe mis √† jour pour la station m√©t√©o d√©crite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici dans cet article il y a</a> un an et demi.  Selon l'exp√©rience de fonctionnement de la version pr√©c√©dente, je voulais vraiment cr√©er un capteur avec un √©cran de contr√¥le afin qu'il soit possible de v√©rifier p√©riodiquement (et v√©rifier) ‚Äã‚Äãle composant le plus capricieux de la station - le capteur de vitesse du vent.  Les aventures ont commenc√© lorsque j'ai commenc√© √† s√©lectionner un pr√©sentoir √† cet effet et, pour un certain nombre de raisons, √† propos desquelles, j'ai choisi les produits de mon MELT natif.  Mais avant de continuer √† d√©crire les <s>techniques des</s> mani√®res <s>sexuelles non traditionnelles</s> pour faire face aux produits de cette entreprise que j'ai choisie, il vaut la peine de s'attarder bri√®vement sur la raison principale de toute cette modernisation grandiose que j'ai commenc√©e. <br><a name="habracut"></a><br>  Dans les commentaires de cet article, j'ai √©t√© soulign√© √† juste titre au sujet de la conception des capteurs que l'axe d'un tel appareil devrait avoir une pointe solide et reposer sur une base √©galement solide (rappelez-vous une montre-bracelet "sur tant de pierres").  Bien s√ªr, je le savais, mais je ne pouvais pas penser √† un moyen de fournir un axe l√©ger avec un point pointu de duret√© suffisante, donc, au contraire, j'ai pris le chemin de minimiser les frottements en plongeant une pointe en laiton (pour girouette) ou en dural (pour capteur de vitesse) dans un PTFE doux (voir .Dessinateur dans l'article sp√©cifi√©).  En toute connaissance de cause, cette d√©cision est temporaire et de courte dur√©e et, dans un proche avenir, il faudra trouver quelque chose de plus substantiel. <br><br>  Le r√©sultat des deux derni√®res saisons de fonctionnement a n√©anmoins montr√© qu'une telle solution est tout √† fait adapt√©e √† une girouette, qui, bien s√ªr, a sci√© la base fluoroplastique sur le m√©tal avec un axe en laiton, mais cela ne l'a pas bless√© du tout - un frottement minimal n'y est pas n√©cessaire, m√™me partiellement inversement.  C'√©tait pire avec un capteur de vitesse, dans lequel non seulement le fluoroplastique √©tait sci√© √† la base, mais aussi la pointe elle-m√™me d'un duralumin doux effac√© de deux millim√®tres de longueur.  En cons√©quence, tout d'abord, le seuil de d√©marrage a √©t√© augment√© de mani√®re inacceptable et le capteur a d√ª √™tre modernis√©.  L'an√©mom√®tre lui-m√™me a √©galement subi une modernisation, car le disque compact laser sur la base duquel il a √©t√© fabriqu√© stratifi√© √† partir du soleil et a acquis une apparence d√©sordonn√©e (enfin, je ne savais pas plus t√¥t que les disques compacts se composaient de deux couches). <br><br>  J'esp√®re vous en dire plus sur le nouveau capteur plus tard, apr√®s qu'il soit au moins un peu en fonctionnement et vous pouvez vous assurer que vous n'aurez rien √† modifier en m√™me temps (c'est-√†-dire au plus t√¥t au d√©but de l'√©t√©).  Et maintenant seulement quelques d√©tails sur les changements dans le circuit de mesure, car ils sont li√©s au sujet principal de cet article. <br><br><h2>  √Ä propos du circuit de mesure du capteur </h2><br>  Dans le cadre de l'abaissement du seuil de d√©marrage, la question s'est pos√©e du temps consid√©rable qu'il faut pour mesurer les basses fr√©quences provenant du capteur de vitesse (pour plus de d√©tails, voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette publication</a> sur les m√©thodes de mesure des basses fr√©quences).  Afin de ne pas limiter le seuil de d√©marrage artificiel, dans ce cas il faut mesurer des fr√©quences √† partir de 1-2 hertz: en tenant compte du fait que le capteur a 16 trous dans un cercle (voir photo du capteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans l'article d'origine</a> ), cela correspond √† environ une r√©volution en 8-16 secondes, ce qui est √©videmment inf√©rieur √† tout seuil de d√©marrage.  Autrement dit, le d√©lai d'attente pour l'arriv√©e de la prochaine impulsion de fr√©quence doit √™tre d'au moins 1 s (voir l'article indiqu√© sur les m√©thodes de mesure), ce qui donne un sens √† l'histoire d'√©conomie d'√©nergie: afin d'obtenir un temps de mise √† jour acceptable et en m√™me temps, g√©rer la moyenne des donn√©es pour √©viter les bavardages sur l'√©cran, nous devons r√©veiller le contr√¥leur toutes les deux secondes.  Et si la moiti√© d'entre eux prend le temps d'attendre les impulsions, il n'y aura pas d'√©conomie d'√©nergie - compte tenu du fait que la LED √©mettrice du capteur a fonctionn√© tout ce temps, consommant environ 20 mA. <br><br><div class="spoiler">  <b class="spoiler_title">Quelques d√©tails entre parenth√®ses</b> <div class="spoiler_text">  Je note entre parenth√®ses que dans le cadre de ce probl√®me, je me suis imm√©diatement souvenu du compteur actuel qui avait √©t√© con√ßu dans notre bureau d'√©tudes au d√©but des ann√©es 80, avant m√™me l'apparition de toutes sortes de contr√¥leurs.  De v√©ritables moyennes vectorielles y ont √©t√© impl√©ment√©es: √† savoir, l'enregistrement de toutes les lectures √©tait cadenc√© par le signal de la platine du capteur de vitesse lui-m√™me - un analogue approximatif du sillage d'une interruption externe.  En d'autres termes, s'il n'y a pas de courant, aucun enregistrement n'a √©t√© effectu√© et le circuit n'a consomm√© rien - seules les horloges en temps r√©el ont fonctionn√©.  Le seuil pour le d√©but de cette plaque tournante, faite sous la forme d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">roue</a> √† flottabilit√© nulle, √©tait, √† vrai dire, de 2-3 cm / sec, et le compteur indiquait la direction en tournant tout le corps.  C'est donc dans l'eau, 700 fois plus dense que l'air!  Pendant le temps moyen, qui se chiffrait en heures, un tel moulinet se retournerait au moins une fois, car il n'y avait presque pas de mesures vides l√†-bas.  Et pour une station m√©t√©orologique, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comme d√©j√† mentionn√©</a> , une m√©thode de calcul math√©matiquement correcte ne convient pas, car en l'absence de vent, elle devrait montrer quelque chose de r√©el.  Par cons√©quent, ici, nous ne pouvons pas nous passer d'un d√©lai d'attente artificiellement limit√© pour attendre les impulsions du capteur. <br></div></div><br>  Il est possible d'√©quiper un contr√¥le complexe de l'√©veil du contr√¥leur √† partir de deux sources: normalement √† partir d'une interruption externe du capteur de vitesse (c'est-√†-dire qu'en attendant les impulsions du capteur, le contr√¥leur passe √©galement en mode d'√©conomie d'√©nergie), et en l'absence de vent, il est forc√© de Watchdog.  Cela n'aurait de sens que lors du changement du principe de lecture du capteur de vitesse de circuits optiques √† des circuits moins √©nergivores (qui doivent encore √™tre recherch√©s - le capteur Hall, par exemple, consomme 5-10 mA, ce qui est fondamentalement inf√©rieur √† la conception optique).  Mais tout a √©t√© simplifi√© du fait que mon capteur est d√©sormais aliment√© par une batterie solaire, ce qui m'a permis d'abandonner tout simplement le mode √©conomie d'√©nergie. <br><br>  Pour lire les horloges, je ne me suis pas souci√© des minuteries ou des compteurs Arduino millis (), mais j'ai simplement mis en place un g√©n√©rateur de fr√©quence externe primitif avec une p√©riode d'environ 1,5 seconde sur la minuterie 555: <br><br><img src="https://habrastorage.org/webt/hn/o0/ig/hno0igehcu7spf5ge0q4fx9jynu.png" width="400"><br>  Comme nous le rappelons, le circuit du capteur utilise le contr√¥leur Atmega328 ¬´nu¬ª dans le package DIP, programm√© via Uno et install√© sur la prise, Arduino lui-m√™me est utilis√© uniquement pour le prototypage.  La sortie du g√©n√©rateur √©tait connect√©e √† la broche d'interruption INT0, la broche 4 du microcircuit (broche D2 de la carte Uno).  L'interruption de diff√©rence positive (RISING) d√©finit un certain indicateur, selon lequel la lecture suivante est prise dans le cycle principal.  La fr√©quence du capteur est √©galement mesur√©e par la m√©thode d'interruption (la sortie du capteur est connect√©e √† l'entr√©e d'interruption INT1, broche 4 (D3), voir la derni√®re m√©thode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans le m√™me article</a> ), car le temps d'attente total maximum est le double de la p√©riode de la fr√©quence mesur√©e.  Avec une temporisation de 1 seconde, la fr√©quence minimale mesur√©e est donc de 2 Hz (un tour de l'an√©mom√®tre en 8 secondes).  √Ä chaque quatri√®me cycle, la moyenne se produit et les donn√©es finies sont envoy√©es au module principal, c'est-√†-dire que les lectures sont mises √† jour toutes les 6 secondes environ. <br><br>  L'histoire enti√®re avec un capteur mis √† jour devra √™tre calibr√©e et v√©rifi√©e p√©riodiquement pour voir si la friction a augment√©, en comparant les lectures avec un an√©mom√®tre manuel.  Par cons√©quent, il est tr√®s g√™nant lorsque les lectures sont affich√©es en un seul endroit (dans la maison) et que le capteur externe est install√© dans un endroit compl√®tement diff√©rent - sur le gazebo de jardin.  La question s'est pos√©e de l'installation d'un √©cran LCD de contr√¥le dans le bo√Ætier du capteur.  La beaut√© n'√©tant pas requise ici, les informations requises sont minimes: un affichage √† 10 caract√®res sur une seule ligne suffit.  Mais les exigences g√©om√©triques sont assez strictes: l'√©cran doit tenir dans le bo√Ætier existant en largeur, qui est de 70 mm.  Je dois dire qu'en raison de mon aversion organique pour les √©crans LCD (faible, faible contraste, avec de petites lettres, qualit√© d√©go√ªtante du r√©tro-√©clairage, et aussi consommer beaucoup, plus sur cela plus tard), je ne suis presque pas au courant de la gamme disponible dans la vente au d√©tail.  Et donc, il est imm√©diatement devenu clair que les √©crans dont j'avais besoin devaient √™tre tr√®s recherch√©s en vente: l'√©cran LCD standard 16x2, qui est dominant dans les magasins, a une carte de 80 mm et ne peut pas tenir dans mon capteur, et tous les autres types sont encore plus grands, ind√©pendamment de de l'entreprise.  Dans la nature, bien s√ªr, il existe des vari√©t√©s plus petites, mais dans la nature, et non dans le commerce de d√©tail national. <br><br><h2>  Solution: oh MELT! </h2><br>  En fin de compte, j'ai d√©couvert deux MELT √† la fois qui correspondent √† merveille √† ma t√¢che.  Le premier d'entre eux est un MT-10S1 √† 10 lignes avec un contr√¥leur qui, selon les fabricants, "est <i>similaire au HD44780 de HITACHI et au KS0066 de SAMSUNG</i> ".  Il a des caract√®res assez grands: plus de 8 mm de hauteur, ce qui est en fait caract√©ristique des √©crans chinois de tailles beaucoup plus grandes.  La largeur de la planche est de 66 mm, les dimensions de l'√©cran saillant (externe) sont de 62x19,5.  La consommation dans ce cas ne me d√©range pas beaucoup (parce que le capteur externe est aliment√© par une batterie solaire de puissance √©videmment plus grande que n√©cessaire), mais par habitude, en regardant la ligne dans la fiche technique, j'ai trouv√© qu'elle est √©galement plus petite que d'habitude - 0,7 mA (tous les √©crans LCD ordinaires les affichages sur les analogues du HD44780 consomment √† partir de 1,2 mA et plus).  Il y a toujours un r√©tro-√©clairage dans le tas, comme cela est habituel pour tous ces types - plut√¥t mis√©rable et en m√™me temps consommant beaucoup d'√©nergie. <br><br><img src="https://habrastorage.org/webt/6h/j2/wp/6hj2wpcmpeo_32v2pui7fxdbqwm.png" width="400"><br><br>  Le deuxi√®me √©cran du MT-10T7 est encore plus √©tonnant: exactement dans les m√™mes dimensions, il peut contenir 10 chiffres √† sept segments avec une hauteur pouvant atteindre 13 mm.  Certains soup√ßons ont √©t√© caus√©s par une interface non standard, et, apparemment, une self-made (pour laquelle l'exemple de la programmation en pseudocode verbal est m√™me donn√© dans la fiche technique).  L'affichage ne contient pas de v√©ritable contr√¥leur: il existe un ensemble de d√©clencheurs de verrouillage statiques contr√¥l√©s par une logique combinatoire.  Mais gr√¢ce √† une telle simplicit√©, toute cette conception ne consomme que 30 ŒºA, c'est-√†-dire qu'elle convient vraiment aux appareils fonctionnant sur batterie 24h / 24 (la consommation de 1,4 mA dans les √©crans conventionnels et m√™me de 0,7 mA dans le MT-10S1 est beaucoup plus √©lev√©e que ce qui est autoris√© pour de tels appareils). application de la valeur - calculez vous-m√™me combien de temps un tel √©cran fonctionnera, m√™me sans tenir compte des autres composants de l'appareil, par exemple, √† partir de piles AAA d'une capacit√© d'environ 1500 mAh). <br><br><img src="https://habrastorage.org/webt/4c/dv/ki/4cdvkitbls9tkoihtq7swvmauly.png" width="400"><br><br>  Bref, donnez-en deux! <br><br><h2>  MT-10T7 </h2><br>  Une tentative de reproduire ind√©pendamment l'algorithme pour MT-10T7, d√©crit dans la fiche technique (√† la fois sur Arduino et en assembleur pur), n'a pas abouti.  Ce qui a √©t√© mal fait, je ne l'ai pas compris, car je suis tomb√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette publication</a> , o√π l'auteur (eshkinkot) a donn√© un exemple tr√®s bien √©crit et soigneusement ex√©cut√© de la manipulation du MT-10T7, apr√®s quoi tout a fonctionn√© imm√©diatement.  Si quelqu'un est int√©ress√©, <a href="">voici un</a> exemple modifi√© d'eshkinkot, compl√©t√© par tous les symboles significatifs valables sur des indicateurs √† sept chiffres, y compris les lettres qui ne correspondent pas aux chiffres: <br><br><img src="https://habrastorage.org/webt/hz/1u/4_/hz1u4_8n0uolveo40f-osvuitua.jpeg" width="400"><br><img src="https://habrastorage.org/webt/lk/wo/4g/lkwo4gmlxuqqfkmntzs13krvitc.jpeg" width="400"><br><img src="https://habrastorage.org/webt/n6/dd/pj/n6ddpjvxujkqk82ballqqvmua3w.jpeg" width="400"><br><img src="https://habrastorage.org/webt/gm/qq/x0/gmqqx0kwdiutig9tfvwrtuq2mtq.jpeg" width="400"><br><br>  Dans ces images, le contraste de l'√©cran est l√©g√®rement d√©form√© en r√©glant le diviseur sur la sortie Vo - 18 kOhm (√† l'alimentation): 10 kOhm (√† la masse), bien que sans lui, le contraste ¬´par d√©faut¬ª est tout √† fait acceptable. <br><br>  J'ai ensuite ajout√© √† l'exemple indiqu√© une fonction qui reproduit un nombre arbitraire sur l'affichage entre trois et quatre d√©cimales - positive ou n√©gative, entier ou virgule flottante, c'est-√†-dire que le nombre total de caract√®res peut atteindre cinq: "-12,7", par exemple.  √âtant donn√© que le point dans le code √† sept segments n'occupe pas une familiarit√© distincte, le nombre maximal de bits √† afficher est de 4. Les param√®tres d'entr√©e pour cette fonction sont: a) un tableau (char buf [5]) contenant une repr√©sentation ACSII du nombre, b) le nombre r√©el de caract√®res qu'il contient (ii de 1 √† 5) et c) la position (pos de 0 √† 9) o√π placer le premier signe (gauche) du nombre (pour les fonctions et la notation utilis√©es en cours de route, voir la publication indiqu√©e par eshkinkot ou dans l'exemple par r√©f√©rence): <br><br><div class="spoiler">  <b class="spoiler_title">Code de fonction</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeASCIIdig_serial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> buf[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">], byte ii, byte pos)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//      { boolean dot; //     //  ,   pos: pos=pos+(4-ii); //  ,    : for (byte i=0; i &lt;= ii; i++) if (buf[i]=='.') pos++; // : for (byte i=0; i &lt;= ii; i++){ // .  ,    : if (buf[i+1]=='.') dot=true; else dot=false; switch (buf[i]) { //decoder ASCII -&gt; 7-  case '0': writeSymbol(pos, DIGIT_ZERO, dot); break; case '1': writeSymbol(pos, DIGIT_ONE, dot); break; case '2': writeSymbol(pos, DIGIT_TWO, dot); break; case '3': writeSymbol(pos, DIGIT_THREE, dot); break; case '4': writeSymbol(pos, DIGIT_FOUR, dot); break; case '5': writeSymbol(pos, DIGIT_FIVE, dot); break; case '6': writeSymbol(pos, DIGIT_SIX, dot); break; case '7': writeSymbol(pos, DIGIT_SEVEN, dot); break; case '8': writeSymbol(pos, DIGIT_EIGHT, dot); break; case '9': writeSymbol(pos, DIGIT_NINE, dot); break; case '-': writeSymbol(pos, SYMBOL_MINUS, dot); break; } //end decoder if (buf[i]!='.') pos++; //  ,  +1  }//end for i }</span></span></span></span></code> </pre> <br></div></div><br>  Le module MT-10T7 pour la sortie de contr√¥le des valeurs num√©riques est plus pratique que les √©crans matriciels ordinaires: il a de grands nombres, et la virgule d√©cimale n'occupe pas une familiarit√© distincte et, par cons√©quent, on peut adapter un caract√®re de plus aux m√™mes positions.  Mais pour mes besoins, il est plus pratique s'il existe la possibilit√© de sortir des lettres (sinon la direction devra √™tre affich√©e en degr√©s boussole, ce qui est quelque peu inhabituel).  Par cons√©quent, pour ce cas, j'ai tourn√© mes yeux vers la matrice monoligne de taille identique MT-10S1, qui, malgr√© un certain nombre d'inconv√©nients, a migr√© vers la conception finale.  En m√™me temps, il a d√©j√† un r√©tro-√©clairage qui manque au MT-10T7 (pour cela il fallait acheter imm√©diatement le MT-10T8), et j'ai d√©cid√© que dans ce cas sa pr√©sence ne ferait pas de mal. <br><br><h2>  MT-10S1 </h2><br>  L'√©cran MT-10S1 a des lettres une fois et demie plus petites, mais aussi une taille assez d√©cente.  De plus, son √©cran est √©conomiquement compact dans ses dimensions globales: il n'y a pas d'homologues d'importation √† 10 chiffres, mais dans le Winstar WH1601L (o√π les caract√®res sont m√™me un peu plus courts en hauteur), toute la longueur de la planche et de l'√©cran par caract√®re est plus longue d'un millim√®tre.  Eh bien, la consommation du contr√¥leur est presque divis√©e par deux (par rapport au m√™me WH1601L).  En fait, les avantages s'arr√™tent l√†, puis les ¬´fonctionnalit√©s¬ª commencent. <br><br>  Le module poss√®de, comme d√©j√† mentionn√©, un contr√¥leur compatible avec le HD44780 de HITACHI.  Autrement dit, il devrait travailler avec son cristal liquide bien-aim√© sans stress excessif.  De plus, la page d'encodage ¬´par d√©faut¬ª co√Øncide avec la page anglais-cyrillique du HD44780 et ses nombreux analogues, c'est-√†-dire que le MT-10S1 devrait fonctionner sans probl√®me avec Liquid Crystal Rus, aucune page de code n'est requise pour que cela soit commut√©.  Et il fait vraiment tout cela, mais avec des nuances. <br><br>  La premi√®re mise en garde - dans la version √† ligne unique, les d√©veloppeurs √©conomisent apparemment sur les registres, et seuls 8 caract√®res d'une cha√Æne (adresses 00h - 07h) sont en m√©moire par registre (et les deux caract√®res restants sont d√©j√† dans un autre registre (40h-41h).  Autrement dit, l'affichage de facto est sur deux lignes, seules les deux lignes sont physiquement situ√©es sur une seule ligne.  Apr√®s un examen plus approfondi, il s'est av√©r√© que la m√™me chose est vraie pour WH1601 (seulement l√†, le deuxi√®me registre prend huit chiffres complets).  La raison pour laquelle cela est si peu pratique est compl√®tement inconnue, dans les √©crans 16x2 ordinaires, les registres sont √† seize bits, et une telle troncature ne rend gu√®re le produit moins cher, au contraire, en raison de la n√©cessit√© de produire diff√©rentes versions du contr√¥leur (si elles sont diff√©rentes, dont je ne suis pas du tout s√ªr).  Je pensais qu'il √©tait associ√© √† une consommation inf√©rieure √† la normale du MT-10S1, mais le m√™me WH1601 consomme 1,2 √† 1,4 mA, c'est-√†-dire qu'il n'est pas diff√©rent de ses homologues avanc√©s. <br><br>  Eh bien, il semblerait, d'accord - dans Liquid Crystal Rus, la fonction setDRAMModel () et la constante correspondante LCD_DRAM_WH1601 ont √©t√© trouv√©es.  Pour ce mode, la biblioth√®que a une traduction d'adresse √©vidente: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ac&gt;<span class="hljs-number"><span class="hljs-number">7</span></span> &amp;&amp; ac&lt;<span class="hljs-number"><span class="hljs-number">0x14</span></span>) command(LCD_SETDDRAMADDR | (<span class="hljs-number"><span class="hljs-number">0x40</span></span>+ac<span class="hljs-number"><span class="hljs-number">-8</span></span>));</code> </pre> <br>  Mais je ne sais pas comment cela fonctionne sur les autres √©crans unifilaires, et le MT-10S1 refuse compl√®tement de fonctionner dans ce mode - l'√©cran reste simplement vide.  Puisque nous parlons d'adressage, vous ne pourrez pas r√©soudre ce probl√®me avec une simple fonction auto-√©crite au-dessus de la biblioth√®que, mais je n'ai pas fouill√© dans la biblioth√®que et d√©couvert ce qui se passait - j'ai d√©j√† plus d'une demi-douzaine d'options corrig√©es par cristal liquide, je ne veux pas les produire et plus loin. <br><br>  L'affichage du MT-10S1 doit √™tre d√©clar√© sur deux lignes: lcd.begin (16, 2);  (au lieu de 16, vous pouvez remplacer 10 ou 12, rien ne changera, car le nombre r√©el de caract√®res sur une ligne est toujours de 8).  Une tentative d'initialisation en une seule ligne (num√©ro 1 en deuxi√®me position) entra√Ænera un √©chec - l'arri√®re-plan deviendra sombre.  Et les nombres √† plusieurs chiffres ne peuvent √™tre affich√©s que sur 8 caract√®res, pour les lignes plus longues, les caract√®res extr√™mes au-del√† de 8 dispara√Ætront tout simplement.  Par cons√©quent, les 9 et 10 caract√®res ne conviennent qu'√† l'affichage des quantit√©s auxiliaires (unit√©s de mesure, par exemple), ou vous devez diviser le num√©ro de ligne en chiffres s√©par√©s, et lorsque vous allez au-del√† du 8√®me caract√®re, changez la position du curseur sur le premier caract√®re de la deuxi√®me ligne. <br><br>  Pour les patients <a href="">,</a> vous pouvez t√©l√©charger <a href="">ici</a> un croquis d'essai pour cet affichage (connexion des fils - dans le texte du croquis ou dans le sch√©ma ci-dessous).  Soit dit en passant, le contraste (√† propos duquel il n'y a pas de mot dans le jeu de donn√©es d'usine et la sortie Vo est d√©sign√©e comme NC) est ajust√© de la mani√®re habituelle ici, mais vous n'avez vraiment pas besoin de le faire: en l'absence de r√©tro-√©clairage, l'arri√®re-plan semble un peu sombre, mais lorsque vous essayez de l'√©clairer en connectant le s√©parateur √† la sortie Vo le contraste est sensiblement perdu lorsque le r√©tro√©clairage est activ√©. <br><br><h2>  Interface avec contr√¥leur </h2><br>  Apr√®s avoir v√©rifi√© que tout fonctionne comme il se doit, la question s'est pos√©e de savoir comment connecter tout cela au contr√¥leur du capteur.  Bien s√ªr, il n'y avait pas suffisamment de conclusions libres pour que le contr√¥leur de capteur puisse en contr√¥ler le contr√¥le, mais je ne voulais pas vraiment cl√¥turer la ville avec des contr√¥leurs de grande taille - c'est plus pratique lorsque la construction du syst√®me est modulaire et que l'√©cran n'interf√®re pas avec l'algorithme de base d√©j√† d√©bogu√© plus t√¥t.  Il restait √† utiliser l'une des interfaces s√©rie. <br><br>  Cela demande la solution I <sup>2</sup> C bas√©e sur PCF8574 (ou ses nombreux analogues), d'autant plus que cette puce elle-m√™me n'est qu'un registre √† d√©calage tromp√©, et consomme donc plusieurs dizaines de ŒºA en fonctionnement et moins de 10 ŒºA au repos.  Avec le MT-10T7, ils forment une excellente paire pour cr√©er des appareils √† faible puissance avec des indicateurs, et MELT a m√™me une option pr√™te √† l'emploi pour ce cas: le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MT-10T11</a> avec une consommation totale de 30 ŒºA. <br><br>  Mais pour le MT-10S1, il n'y a pas de solution aussi pratique - pour une raison quelconque, seules les versions avec une configuration 20x4 sont fournies avec un ajout sous la forme d'un analogue de PCF8574 parmi les √©crans de ligne MELT ( <b>UPD:</b> dans les commentaires, ils ont sugg√©r√© qu'il existe √©galement une configuration MT-16S2H de 16x4 avec la m√™me interface, bien que , ses dimensions d√©passent celles dont j'ai besoin).  Le module fini du type d√©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet article n'est pas</a> pratique √† utiliser dans ce cas, car la deuxi√®me caract√©ristique d√©sagr√©able de l'affichage MT-10S1 est son brochage non standard.  Les conclusions sont les m√™mes (HD44780, n√©anmoins, plus pr√©cis√©ment, son homologue domestique, KB1013VG6), mais elles se situent dans un ordre totalement non standard.  Par souci d'int√©r√™t, j'ai v√©rifi√© les deux import√©s 16x1 et MELT deux lignes / quatre lignes - ils ont tous un ordre de sortie standard, et le MT-10S1 se d√©marque dans ce contexte pour une raison quelconque.  Vous devez donc prendre une d√©cision personnelle. <br><br>  En cons√©quence, j'ai mis trivialement le m√™me contr√¥leur ATmega328 √† l'√©cran, programm√© de la m√™me mani√®re - via UNO, puis ins√©r√© dans la prise sur une carte s√©par√©e, √©quip√©e uniquement des accessoires n√©cessaires au d√©marrage: quartz avec conducteurs, alimentation et circuit RC R√©initialiser la sortie (voir le circuit du capteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans l'article d'origine</a> , o√π le contr√¥leur est connect√© de mani√®re similaire). <br><br><div class="spoiler">  <b class="spoiler_title">En parlant de r√©initialisation de cha√Ænage</b> <div class="spoiler_text">  √Ä propos, sur le circuit de r√©initialisation: j'ai un condensateur aussi petit que 1 ŒºF sur la r√©sistance de plusieurs kOhms, c'est-√†-dire que le temps de retard √† la mise sous tension est de quelques millisecondes.  Combien?  Le manuel nous apprend que, comme pour toute la famille Mega, une cha√Æne externe n'est pas du tout n√©cessaire ici, le d√©marrage correct est cens√© √™tre effectu√© par le circuit interne, et beaucoup plus rapidement.  Mais l'habitude de mettre une cha√Æne RC externe sur la broche 1 du contr√¥leur pour un d√©marrage retard√© lorsque je l'ai allum√© est rest√©e avec moi √† l'√©poque de la famille AVR Classic d√©j√† oubli√©e, o√π le contr√¥leur pourrait ne pas d√©marrer correctement si la tension d'alimentation n'augmentait pas assez rapidement.  Et dans la famille des d√©tecteurs Mega Brown-out, cela peut ne pas fonctionner tr√®s bien.  Dans les cas critiques, il vaut toujours la peine d'installer un moniteur d'alimentation externe, mais ici, la cha√Æne RC ne fait rien de mal, mais elle peut aider dans les cas avec de mauvaises sources d'alimentation.  Les d√©veloppeurs de cartes Arduino, au fait, le savent bien, car sur la carte Uno, par exemple, il y a la m√™me cha√Æne de 10 kOhm / 100 nF. <br></div></div><br>  Et Dieu lui-m√™me a ordonn√© que deux contr√¥leurs AVR identiques soient ancr√©s via l'interface s√©rie habituelle, qui de toute fa√ßon, √† l'exception du processus de programmation, n'est utilis√©e nulle part ailleurs dans ce projet, et pour l'utilisation de laquelle tout est d√©j√† √† port√©e de main.  √Ä propos, une telle solution ne diff√®re pas du prix des composants bas√©s sur PCF8574 et peut rivaliser avec elle en termes d'√©conomie d'√©nergie dans la variante avec MT-10T7 - au cas o√π le MT-10T11 mentionn√© ci-dessus n'est pas √† port√©e de main. <br><br>  Au total, le circuit du module MT-10S1 avec le contr√¥leur est le suivant (dans le sch√©ma, la d√©signation des conclusions de l'ATmega328 est donn√©e entre parenth√®ses apr√®s les conclusions de la carte Arduino): <br><br><img src="https://habrastorage.org/webt/zu/4h/sg/zu4hsgop0jxa8ufsqopzlr4xqro.png" width="880"><br><br>  Dans le contr√¥leur, j'ai appliqu√© le mode d'√©conomie d'√©nergie (enfin, oui, ce n'est pas vraiment n√©cessaire ici, mais pourquoi garder la puce allum√©e inutilement?).  De plus, le r√©veil se produit selon le signal du m√™me g√©n√©rateur d'ondes carr√©es sur la puce 555 que l'horloge du contr√¥leur principal, mais cette fois le long du front descendant (FALLING) afin de s√©parer l√©g√®rement les fonctions de mesure et de transfert de donn√©es. <br><br><div class="spoiler">  <b class="spoiler_title">Le myst√®re de la nature</b> <div class="spoiler_text">  Un myst√®re de la nature est li√© √† cela, que je n'ai pas pu r√©soudre.  Il est connu que Mega ne peut √™tre retir√© du sommeil profond que par une interruption asynchrone externe, car l'horloge est √©teinte et une interruption synchrone ne peut tout simplement pas se produire.  Et toute la famille des contr√¥leurs AVR 28 broches, menant leur arbre g√©n√©alogique √† partir d'ATmega8 (48/88/168/328), n'a en tant que tel que des interruptions de bas niveau INT0 et INT1 (et une interruption PCINT, mais elle n'est pas utilis√©e dans Arduino).  Toutes les recommandations officielles sont li√©es √† cela √† la fois dans les mat√©riaux Atmel et sur les sites Arduino.  L'exemple sur le site arduino.cc dit explicitement: " <i>Dans tous les modes de veille, sauf IDLE, seul LOW peut √™tre utilis√©</i> ."  Et cela, pour ainsi dire, ne fait aucun doute, par exemple, Monk r√©p√®te la m√™me chose plus en d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans son livre</a> : ¬´ <i>Notez que le type d'interruption LOW est s√©lectionn√©.</i>  <i>Il s'agit du seul type d'interruption pouvant √™tre utilis√© dans cet exemple.</i>  <i>Les types RISING, FALLING et CHANGE ne fonctionneront pas</i> . ¬ª <br><br>  Une interruption √† un niveau bas est tr√®s peu pratique √† utiliser, car une fois qu'elle se produit, avec ce niveau le plus bas en sortie, elle se reproduira encore et encore, et des mesures sp√©ciales doivent √™tre prises pour se d√©barrasser des d√©clencheurs inutiles.  Donc, en fouillant sur les forums √† la recherche de diverses solutions √† ce probl√®me, je suis soudainement tomb√© sur quelques exemples de code dans lesquels INT0 du type RISING ou FALLING est explicitement utilis√© pour sortir du sommeil.  Bien s√ªr, j'ai attribu√© cela √† l'analphab√©tisme des auteurs.  Mais quand <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">je suis</a> tomb√© sur la phrase: " <i>Bien que vous puissiez utiliser n'importe quel autre type d'interruption (RISING, FALLING, CHANGE) - ils sortiront tous le processeur du sommeil</i> ", j'ai d√©cid√©, malgr√© les ennemis, de mener une exp√©rience en direct - c'√©tait bon pour √ßa √† la main. <br><br>  Et, √† ma grande surprise, tout a parfaitement fonctionn√©.  Mode d'√©conomie d'√©nergie - SLEEP_MODE_PWR_DOWN;  en raison de l'inutilit√©, ici, je n'ai pas pris de mesures pour r√©duire davantage la consommation en d√©sactivant toutes les autres fonctions, mais le g√©n√©rateur d'horloge est toujours √©videmment √©teint.  N√©anmoins, le contr√¥leur se r√©veille r√©guli√®rement sur le front descendant, demande des donn√©es, les affiche √† l'√©cran et s'endort √† nouveau.  Pour la puret√© de l'exp√©rience, j'ai retir√© le MK de la carte UNO et l'ai ins√©r√© dans ma prise avec le quartz connect√©, et tout a continu√© √† fonctionner.  Cela peut √™tre vu √† partir de la consommation: pr√®s de 17 mA en mode normal et 0,9-1 mA avec l'√©conomie d'√©nergie activ√©e (dont 0,7 mA doit √™tre attribu√© √† l'affichage). <br><br>  Sans sortir de mon √©tonnement, j'ai relu les fiches techniques d‚ÄôAtmel, j‚Äôai regard√© le livre d‚ÄôEvstifeev (avec leur traduction), j‚Äôai m√™me parcouru le vieux manuel d‚ÄôAtmel sur la famille Classic, puis pass√© une demi-journ√©e √† chercher au moins quelques explications sur ce qui se passait (en russe et en anglais) dans deux moteurs de recherche bien connus, mais nulle part n'a trouv√© m√™me un indice.  √Ä moins que cela ne soit utile dans les notes d'application d'Atmel, car il est douteux que tout ce qui est contraire aux fiches techniques y soit publi√©. Je serai heureux si quelqu'un qui sait sait ce que je comprends mal. <br>  <b>UPD:</b> la v√©rification de l'assembleur en direct (ATmega8) a montr√© une pleine conformit√© avec les fiches techniques, c'est-√†-dire que seules les interruptions de niveau fonctionnent.  La seule explication qui me vient √† l'esprit est que Arduino a en quelque sorte connect√© l'interruption PCINT √† une interruption r√©guli√®re.  Une tentative de clarifier la situation en √©tudiant le texte des biblioth√®ques du syst√®me Arduino n'a rien donn√© - l√†, le diable lui briserait la jambe. <br></div></div><br>  Le transfert de donn√©es du contr√¥leur de capteur au contr√¥leur d'affichage via UART est organis√© sous la forme d'une bo√Æte de dialogue.  Au r√©veil, toutes les 4 interruptions, le contr√¥leur d'affichage demande √† son tour les donn√©es: <br><br><pre> <code class="cpp hljs">. . . . . <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flag==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   4-  ~6  Serial.print('T'); //   while(!Serial.available()); //  T iit = Serial.readBytes(buft,5); //  5  , //  ii    Serial.print('H'); //   while(!Serial.available()); //  iihh=Serial.readBytes(bufhh,5); //  5  , //  ii    Serial.print('S'); //   while(!Serial.available()); //  iiss=Serial.readBytes(bufss,5); //  5  , //  ii    Serial.print('D'); //   while(!Serial.available()); //  iid=Serial.readBytes(bufd,5); //  5  , //  ii    flag=0; //   } . . . . .</span></span></code> </pre><br>  Ici buft, bufhh, bufss et bufd sont des tableaux (pas des cha√Ænes!) De cinq octets qui contiennent des donn√©es sur la temp√©rature, l'humidit√©, la vitesse et la direction sous la forme d'une d√©composition ASCII des nombres correspondants.  Afin de ne pas en accepter trop, le setup'e sp√©cifie un timeout abr√©g√© pour la r√©ception: <br><br><pre> <code class="cpp hljs">. . . . . Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); Serial.setTimeout(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   10  . . . . .</span></span></code> </pre><br>  Il est plus pratique d'afficher: d'une part, vous avez imm√©diatement la longueur du num√©ro re√ßu, et d'autre part, la fonction Serial.print () envoie une cha√Æne ASCII du c√¥t√© du contr√¥leur de capteur, avec des pauses d√©finies juste dans les 10 ms entre les envois : <br><br><pre> <code class="cpp hljs">. . . . . <span class="hljs-comment"><span class="hljs-comment">//     : if (Serial.available()&gt;0) //  { char ch=Serial.read(); if (ch=='T') { Serial.print(temperature,1); delay(10);} if (ch=='H') { Serial.print(humidity,0); delay(10);} if (ch=='S') { float wFrq=(3+0.8*f)/10; //   / if (wFrq&gt;0.3) Serial.print(wFrq,1); else Serial.print(0.0,1); delay(10);} if (ch=='D') { // Serial.println(wind_G); Serial.println(wind_Avr); delay(10); }//end ch }//end serial . . . . .</span></span></code> </pre><br>  Le calcul de la vitesse en m / s ici est identique √† celui effectu√© dans le module principal de la station (le seuil de d√©marrage est fix√© au hasard √† 0,3 m / s) et il devra √©galement √™tre modifi√© en fonction des r√©sultats de l'√©talonnage. <br><br>  Si vous essayez d'accepter les donn√©es avec le Serial.read () habituel, puis affichez le r√©sultat de la r√©ception sur un √©cran avec une fonction comme lcd.print (t, 1), o√π t est la temp√©rature en degr√©s, √©gale, par exemple, √† 12,7, puis MT-10S1 en r√©ponse √† cela la commande affichera "49,5".  Devin√©, ou sugg√©rer?  Ce sont les trois premiers caract√®res de la s√©quence ¬´49 50 46 55¬ª, c'est-√†-dire dans l'extension ASCII du nombre ¬´12,7¬ª.  Par cons√©quent, il est plus facile de prendre imm√©diatement un tableau de caract√®res et d'afficher directement autant de caract√®res qu'il a √©t√© envoy√© (count est un compteur qui augmente d'une unit√© √† chaque interruption): <br><br><pre> <code class="cpp hljs">. . . . <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count%<span class="hljs-number"><span class="hljs-number">8</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-comment"><span class="hljs-comment">// 8   lcd.clear(); if (buft[0]!='-') lcd.print("+"); for (byte i = 0; i &lt; iit; i++) lcd.print(buft[i]); //  lcd.setCursor(6, 0); for (byte i = 0; i &lt; iihh; i++) lcd.print(bufhh[i]); //  lcd.setCursor(0, 1); lcd.print("%"); } if ((count+4)%8==0){ //  4  lcd.clear(); lcd.setCursor(0, 0); for (byte i = 0; i &lt; iiss; i++) lcd.print(bufss[i]); //  lcd.setCursor(5, 0); dir_dd(bufd); //  } . . . . .</span></span></code> </pre><br>  La derni√®re ligne doit √™tre d√©chiffr√©e.  Le fait est que les donn√©es de direction sont envoy√©es dans le code 0-15 (auquel elles sont toujours transf√©r√©es √† partir du code Gray lors de la mise en ≈ìuvre de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moyenne vectorielle</a> ).  Dans le cas de l'affichage √† sept segments MT-10T7, ils ont √©t√© convertis en degr√©s boussole: <br><br><pre> <code class="cpp hljs">. . . . . dd=atoi(bufd); <span class="hljs-comment"><span class="hljs-comment">//   dd=dd*22.5; //   itoa(dd,bufd,10); //    . . . . .</span></span></code> </pre><br>  Et ici, nous pouvons √©crire directement en lettres russes, de la m√™me mani√®re que dans le module principal de la station m√©t√©o (√† cause duquel cet affichage, en fait, a √©t√© choisi): <br><br><pre> <code class="cpp hljs">. . . . . <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dir_dd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dd[])</span></span></span><span class="hljs-function"> </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(atoi(dd)) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>: {lcd.print(<span class="hljs-string"><span class="hljs-string">"C"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} }<span class="hljs-comment"><span class="hljs-comment">//end switch }//end dir . . . . .</span></span></code> </pre><br><h2>  Apparence </h2><br>  La photo montre l'apparence de l'√©cran avec le contr√¥leur connect√© en √©tat de fonctionnement: <br><br><img src="https://habrastorage.org/webt/wo/dg/fk/wodgfkuefea3shdafmubstmlmke.jpeg" width="400"><br><br>  Voici √† quoi ressemble le capteur modifi√©: <br><br><img src="https://habrastorage.org/webt/ww/v4/p_/wwv4p_duhu45imp1gwppoz0ydzo.jpeg" width="400"><br><br>  Les param√®tres de r√©tro-√©clairage sont ceux indiqu√©s dans le sch√©ma ci-dessus.  √âtant donn√© que la chute de tension √† travers le r√©tro√©clairage dans les modules MELT est de 4,5 V, avec une alimentation 12 V, le courant de r√©tro√©clairage est de 50 mA (au maximum pour ce module, 60 mA). <br><br>  Le bo√Ætier est scell√© au maximum pour √©viter de p√©n√©trer de l'air humide √† l'int√©rieur (le cadre noir de l'√©cran d'affichage provient de la gaine en caoutchouc d'un c√¢ble mince).  La plaque blanche √† droite est le bo√Ætier du capteur d'humidit√©-temp√©rature SHT-75, retir√© du bo√Ætier (le capteur lui-m√™me est situ√© derri√®re).  Le fil jaune ci-dessus est l'antenne de l'√©metteur 433 MHz.  √Ä gauche se trouvent les connecteurs o√π les capteurs de vitesse et de direction sont connect√©s. <br><br>  Et donc les lectures sur l'affichage du module principal de la station m√©t√©o ressemblent (le module noir avec l'antenne blanche √† droite est le r√©cepteur 433 MHz): <br><br><img src="https://habrastorage.org/webt/53/kd/kg/53kdkgcw_aqjwuzrjw4ev1k7uby.jpeg" width="400"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430828/">https://habr.com/ru/post/fr430828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430818/index.html">Acc√©l√©ration SQLAlchemy pour les astronautes architecturaux</a></li>
<li><a href="../fr430820/index.html">Black Friday 2018 - VDS √† Moscou et Amsterdam</a></li>
<li><a href="../fr430822/index.html">S√©curit√© de l'information de l'Internet des objets: qui est la chose et qui est le ma√Ætre?</a></li>
<li><a href="../fr430824/index.html">Rechercher un objet endommag√© par num√©ro de page endommag√© dans MS SQL Server 2005</a></li>
<li><a href="../fr430826/index.html">Comment d√©velopper un gestionnaire de d√©veloppement</a></li>
<li><a href="../fr430830/index.html">Vendredi noir, traditions et idiomes anglais sur le shopping</a></li>
<li><a href="../fr430832/index.html">Prix ‚Äã‚Äãdu Black Friday humain</a></li>
<li><a href="../fr430834/index.html">10 p√©ch√©s capitaux du Pr√©sident</a></li>
<li><a href="../fr430836/index.html">Kotlin: statique qui n'existe pas</a></li>
<li><a href="../fr430838/index.html">Les merveilles du marketing de foule ou comment promouvoir une entreprise avec des avis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>