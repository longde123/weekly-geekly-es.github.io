<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê§ üë©üèæ‚Äçü§ù‚Äçüë®üèº üë©üèº‚Äç‚öïÔ∏è Adaptaci√≥n del proyecto MR para HoloLens üë©üèø‚Äçüöí üï∂Ô∏è üíè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As√≠ que nuestra serie de art√≠culos sobre Windows Mixed Reality est√° llegando a su fin. En √©l, desarrollamos desde cero una aplicaci√≥n con realidad mix...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptaci√≥n del proyecto MR para HoloLens</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/418665/">  As√≠ que nuestra serie de art√≠culos sobre Windows Mixed Reality est√° llegando a su fin.  En √©l, desarrollamos desde cero una aplicaci√≥n con realidad mixta en Unity en el formato de trabajo de laboratorio (trabajo de laboratorio).  Hoy es el acorde final en el que hablaremos sobre un tema muy interesante: HoloLens y la adaptaci√≥n del proyecto a este dispositivo.  √önete ahora! <br><br><img src="https://habrastorage.org/webt/7l/qn/el/7lqnelncue7h3vwfqqxkqerm4u8.jpeg"><a name="habracut"></a><br><br><blockquote>  La gu√≠a completa constar√° de 5 partes.  Se repondr√° cada semana.  A continuaci√≥n puede ir a la parte que necesita. <br><br>  <b>Parte 1:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exportar la aplicaci√≥n UWP para Windows Mixed Reality desde Unity</a> ; <br>  <b>Parte 2:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configuraci√≥n del entorno (VR)</a> ; <br>  <b>Parte 3:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Controladores</a> ; <br>  <b>Parte 4:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sonido espacial</a> ; <br>  <b>Parte 5:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HoloLens y gr√°ficos</a> . </blockquote><br><h2>  Hololen </h2><br>  Hasta ahora, nuestra aplicaci√≥n solo funciona con auriculares envolventes.  Sin embargo, al hacer solo unos pocos cambios en la aplicaci√≥n, podemos implementar soporte para todo el espectro de dispositivos de Realidad Mixta (incluyendo HoloLens) en ella. <br><br>  Dado que utilizamos el Kit de herramientas de realidad mixta para controlar la c√°mara, implementar la interacci√≥n y agregar botones, solo necesitamos hacer algunos cambios en el proyecto. <br><br><h4>  Ocultar una sala virtual </h4><br>  Necesitamos escribir una secuencia de comandos que determine en qu√© dispositivo se est√° ejecutando nuestra aplicaci√≥n: en un auricular inmersivo o en un dispositivo HoloLens.  Si la aplicaci√≥n se ejecuta en un dispositivo HoloLens, debemos ocultar la sala virtual para que el usuario pueda interactuar con el entorno real.  Para hacer esto, primero agregamos el elemento Etiqueta al prefabricado RoomPrefab, y luego accederemos a esta etiqueta en nuestro script. <br><br>  1. Seleccione el prefabricado RoomPrefab en el panel Jerarqu√≠a. <br><br>  2. En la lista desplegable Etiqueta en el panel Inspector, seleccione Agregar etiqueta ... <br><br><img src="https://habrastorage.org/webt/qk/48/-o/qk48-otwilnhukhdowcvhdavqii.png"><br><br>  3. Haga clic en el signo + para crear una nueva etiqueta y as√≠gnele el nombre HMDUOnly. <br><br><img src="https://habrastorage.org/webt/r7/yx/11/r7yx11_dfmnofazlnqssj3rgiog.png"><br><br>  4. Ahora haga clic nuevamente en el prefabricado RoomPrefab en el panel Jerarqu√≠a y seleccione la etiqueta HMDUOnly en el men√∫ desplegable Etiqueta en el panel Inspector. <br><br>  Puede seleccionar objetos del juego en el gui√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">varias maneras</a> .  Podemos agregar una etiqueta a cualquier objeto que necesitemos ocultar (si tenemos varios objetos), y luego ocultar cada uno de ellos secuencialmente.  Llamar al m√©todo FindGameObjectsWithTag no es la forma m√°s √≥ptima, pero es bastante adecuado para nosotros. <br><br>  5. Desde el men√∫ superior de Unity, seleccione GameObject -&gt; Create Empty. <br><br>  6. En el panel Jerarqu√≠a, cambie el nombre del GameObject vac√≠o agregado a GameManager. <br><br>  7. En el panel Inspector, haga clic en Agregar componente -&gt; Nuevo gui√≥n y asigne a este gui√≥n el nombre GameManager, eligiendo C sharp como lenguaje de programaci√≥n.  Haga clic en Crear y Agregar para crear el script. <br><br>  8. Para abrir el script GameManager, haga doble clic en el panel Inspector o en el panel Activos. <br><br>  9. Reemplace el c√≥digo de script de GameManager con el siguiente c√≥digo.  Esta prueba debe realizarse solo una vez, en el inicio de la aplicaci√≥n.  Lo ejecutaremos dentro de la funci√≥n Start () y eliminaremos la funci√≥n Update (). <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-comment"><span class="hljs-comment">// We need the UnityEngine.XR.WSA namespace to access Holographic Settings which contain // functions which effect the performance and presentation of Holograms on Windows // Holographic platforms. using UnityEngine.XR.WSA; public class GameManager : MonoBehaviour { void Start () { // Check if the MR headset display is transparent (not opaque). if(!HolographicSettings.IsDisplayOpaque){ // If that is the case, then we need to hide the virtual living room GameObject[] HMDUOnlyObjects = GameObject.FindGameObjectsWithTag("HMDUOnly"); for (int i = 0; i &lt; HMDUOnlyObjects.Length; i++){ // Set active to false disables the object. HMDUOnlyObjects[i].SetActive(false); } } } }</span></span></code> </pre> <br>  Finalmente, para garantizar que la aplicaci√≥n funcione correctamente en el dispositivo HoloLens, necesitamos que el fondo de la c√°mara sea negro. <br><br>  10. En el panel Jerarqu√≠a, seleccione el objeto MixedRealityCameraParent-&gt; MixedRealityCamera.  Despl√°cese hacia abajo en el panel Inspector y seleccione negro como valor para el Administrador de c√°mara de realidad mixta -&gt; Configuraci√≥n de pantalla transparente -&gt; Par√°metro de color de fondo (Administrador de c√°mara de realidad mixta -&gt; Configuraci√≥n de pantalla transparente -&gt; Color de fondo). <br><br><img src="https://habrastorage.org/webt/n0/gh/qc/n0ghqcj63thf4zmn62uld9iu6pc.png"><br><br><h4>  Agregar mapeo espacial </h4><br>  ¬°Casi todo est√° listo!  Ahora necesitamos habilitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el mapeo espacial</a> .  La tecnolog√≠a de im√°genes espaciales proporciona una vista detallada de las superficies f√≠sicas en el entorno HoloLens, lo que permite a los desarrolladores crear aplicaciones de realidad mixta que son impresionantes con su probabilidad.  En nuestro caso, el mapeo espacial permitir√° al usuario colocar los altavoces de forma natural, para que no se vean oscurecidos por las superficies f√≠sicas. <br><br>  Primero, asegur√©monos de que los controles del objeto Bounding Box (cuadro delimitador) responsables del movimiento y la rotaci√≥n no est√©n ocultos. <br><br>  1. Localice el prefabricado AppBarCustom en la carpeta Activos -&gt; Prefabricados en el panel Proyecto. <br><br>  2. Establezca el valor 0 para la propiedad Hover Offset Y Scale (Hover Offset Scale). <br><br><img src="https://habrastorage.org/webt/bv/tg/u8/bvtgu8gsj2xo8sg7n_ltnynmkgy.png"><br><br>  Ahora agreguemos componentes de mapeo espacial a la escena. <br><br>  3. Localice la prefabricaci√≥n SpatialMapping en la carpeta Activos -&gt; HoloTookit -&gt; SpatialMapping -&gt; Prefabs (Recursos -&gt; HoloTookit -&gt; Asignaci√≥n espacial -&gt; Prefabs). <br><br>  4. Arr√°strelo al panel Jerarqu√≠a de nuestra escena. <br><br><img src="https://habrastorage.org/webt/pu/gp/k3/pugpk3-irjbq5_tmpvbex8pcthg.png"><br><br><h4>  Gestos HoloLens </h4><br>  Hasta ahora, todos los tipos de interacci√≥n en nuestra aplicaci√≥n se llevaban a cabo utilizando controladores de movimiento.  Si la aplicaci√≥n se ejecutar√° en el dispositivo HoloLens (o su emulador), debemos usar otra forma de mover el altavoz y cambiarlo en el c√≥digo del programa.  El m√©todo BoundingBox tambi√©n se puede reutilizar para HoloLens, pero queremos optimizar la interacci√≥n haciendo algunos cambios. <br><br>  1. Seleccione el altavoz prefabricado en el panel Proyecto. <br><br>  2. Haga clic en Agregar componente -&gt; Toque para colocar.  Este es un script para HoloLens del MR Toolkit que permite al usuario tocar objetos u hologramas y moverlos f√°cilmente en el espacio. <br><br>  3. Deshabil√≠telo para que no se inicie por defecto.  Para deshabilitar un script, simplemente desmarque la casilla junto a su nombre en el panel Inspector.  Este componente tambi√©n agregar√° la secuencia de comandos del interpolador al prefabricado de altavoces. <br><br><img src="https://habrastorage.org/webt/fu/od/db/fuoddb8y3g7lu_bmbd86dugvcrk.png"><br><br>  4. Agregue la secuencia de comandos a la prefabricaci√≥n de altavoces seleccionando Agregar componente -&gt; Nueva secuencia de comandos y asigne a esta secuencia de comandos SpeakerMovement. <br><br>  5. Edite la secuencia de comandos: haga doble clic en ella y reemplace el c√≥digo de la secuencia de comandos con el siguiente c√≥digo. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.XR.WSA; <span class="hljs-comment"><span class="hljs-comment">// namespace for the TwoHandManipulatable script using HoloToolkit.Unity.InputModule.Utilities.Interactions; // namespace for the TapToPlace script using HoloToolkit.Unity.SpatialMapping; public class SpeakerMovement : MonoBehaviour { void Start () { if(!HolographicSettings.IsDisplayOpaque){ GetComponent&lt;TwoHandManipulatable&gt;().enabled = false; GetComponent&lt;TapToPlace&gt;().enabled = true; } } }</span></span></code> </pre> <br>  Al especificar el espacio de nombres para los escenarios utilizados, utilizaremos la misma prueba que se utiliz√≥ en el script GameManager para ocultar la sala.  Esta vez, cuando se detecta un dispositivo HoloLens, la prueba apagar√° un script y encender√° otro.  Como cambiamos la prefabricaci√≥n de altavoces, este cambio afectar√° a todos los altavoces de la escena.  Si cambi√≥ una de las instancias prefabricadas de altavoces, haga clic en Aplicar en la esquina superior derecha del panel Inspector para actualizar esta prefabricada. <br><br>  Hecho  Ahora puede compilar la aplicaci√≥n y ejecutarla en un auricular o dispositivo HoloLens inmersivo, y luego colocar los altavoces en cualquier lugar de la habitaci√≥n, rotarlos y controlarlos. <br><br><h2>  Gr√°ficos (opcional) </h2><br>  Veamos c√≥mo podemos mejorar el aspecto visual de nuestra aplicaci√≥n, porque incluso una peque√±a mejora puede cambiar significativamente su percepci√≥n.  Si desea aprender c√≥mo hacer que la aplicaci√≥n sea a√∫n m√°s atractiva sin mucha dificultad, puede usar las instrucciones a continuaci√≥n. <br><br><h4>  Agregar un skybox personalizado </h4><br>  1. En el men√∫ superior, seleccione Ventana -&gt; Iluminaci√≥n -&gt; Configuraci√≥n (Ventana -&gt; Iluminaci√≥n -&gt; Configuraci√≥n). <br><br>  2. Arrastre el skybox Cloudymorning.mat desde la carpeta Activos -&gt; Texturas a la propiedad Material de Skybox. <br><br><h4>  Post procesamiento </h4><br>  Nota  Las siguientes acciones se pueden realizar para cualquier c√°mara en la escena, pero no se pueden ver en el editor. <br><br>  1. Seleccione el elemento MixedRealityCameraParent -&gt; MixedRealityCamera en el panel Jerarqu√≠a de la escena. <br><br>  2. Haga clic en Agregar componente -&gt; Comportamiento posterior al procesamiento. <br><br>  3. Localice el elemento CustomProfile.asset en la carpeta Activos -&gt; Postproceso y arr√°strelo a la propiedad Perfil del script de Comportamiento de procesamiento posterior. <br><br>  Experimente con el perfil de posprocesamiento tanto como lo necesite, pero recuerde que el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">posprocesamiento consume recursos</a> . <br><br>  Felicidades  Has completado esta pr√°ctica. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El original</a> <br>  Autores: Eric Ahlstrom, cbarkerms, Madison Hight </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418665/">https://habr.com/ru/post/es418665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418655/index.html">Windows Mixed Reality: una gu√≠a para desarrolladores (parte 1)</a></li>
<li><a href="../es418657/index.html">Realidad mixta asequible: c√≥mo crear espacio virtual</a></li>
<li><a href="../es418659/index.html">Descubra la programaci√≥n cu√°ntica con Quantum Katas</a></li>
<li><a href="../es418661/index.html">Desarrollo de realidad mixta: ¬øpusiste un altavoz en una sala de estar virtual?</a></li>
<li><a href="../es418663/index.html">C√≥mo se hace el sonido para otra realidad</a></li>
<li><a href="../es418667/index.html">Evaluaci√≥n comparativa de HDFS 3 con HDFS 2</a></li>
<li><a href="../es418669/index.html">Semana de la seguridad 28: NetSpectre, ataque a canales de terceros a trav√©s de la red</a></li>
<li><a href="../es418673/index.html">Por qu√© est√° creciendo el mercado ERP: estad√≠sticas y tendencias</a></li>
<li><a href="../es418675/index.html">C√≥mo fui a Droidcon Berlin</a></li>
<li><a href="../es418677/index.html">Toda la verdad sobre RTOS. Art√≠culo # 6. Otros servicios RTOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>