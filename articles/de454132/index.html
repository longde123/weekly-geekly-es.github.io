<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏽 🏞️ 👷 Videoüberwachung auf Orange Pi Zero - billig und überhaupt nicht böse 👩🏿‍💻 🤳🏼 👉🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kürzlich habe ich mir die Aufgabe gestellt, Videoüberwachung mit folgenden Merkmalen zu implementieren: 



1. Minimaler Stromverbrauch 
2. Die Mindes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Videoüberwachung auf Orange Pi Zero - billig und überhaupt nicht böse</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454132/">  Kürzlich habe ich mir die Aufgabe gestellt, Videoüberwachung mit folgenden Merkmalen zu implementieren: <br><br><ol><li>  Minimaler Stromverbrauch </li><li>  Die Mindestgröße des Geräts, das Videos von der Kamera (oder mehreren Kameras) empfängt.  Mit einer so geringen Größe, dass es beispielsweise in eine 10-10 cm große Installationsbox gepackt oder in einem breiten Kabelkanal (!) Versteckt werden kann. </li><li>  IP-Kameras werden über WLAN verbunden, dh es ist unmöglich festzustellen, wer Videos von ihnen ansieht / schreibt.  Sie können sie über das allgemeine Netzwerk mit Strom versorgen, unabhängig davon, ob es sich um Zugangsbeleuchtung oder Steckdosen im Büro handelt </li><li>  Es muss eine Videoaufzeichnung (in meinem Fall - auf einer Microsd-Karte) vorhanden sein. Es muss möglich sein, Videos über das Internet von überall auf der Welt sowie über eine mobile Anwendung anzusehen </li><li>  Natürlich sollte es möglich sein, das gesamte System remote zu konfigurieren - neue Kameras hinzufügen, Aufzeichnungen kopieren und löschen, Zugriff auf alle Einstellungen haben </li><li>  Die minimalen Kosten!  Aber was ist mit?  Nirgendwo ohne </li></ol><br>  Um diese Idee umzusetzen, fiel die Wahl auf folgende Komponenten: <br><a name="habracut"></a><br>  1) Der billigste Single-Board-Computer mit Wi-Fi an Bord, auf dem Sie eine Arm-Linux-Distribution rollen können - zum Beispiel mein Lieblings-Debian.  Malinka ist teuer, aber Orange Pi Zero bei eBay kostet Sie nur 900 Rubel (vor ein paar Monaten habe ich es überhaupt für 700 Rubel gekauft).  Hier ist ein Link zu ebay - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier.</a> <br><br><img src="https://ltparts.ru/upload/shop_1/4/5/5/item_45566/item_45566.jpg" alt="Bild"><br><br>  2) Eigentlich WLAN-IP-Kameras - nirgendwo ohne sie.  Klein, gewölbt, Decke.  Und mindestens 720p - normalerweise für die Videoüberwachung in einer Büro-Veranda nicht mehr erforderlich.  Der Ausgabepreis beträgt ca. 1.500 Rubel pro Kamera.  Was ist noch zu tun, hier auf aliexpress - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> <br><br><img src="https://ae01.alicdn.com/kf/HTB1YiqTdjrguuRjy0Feq6xcbFXao.jpg" alt="Bild"><br><br>  3) 32 GB microSD-Karte.  Warum 32, nicht mehr oder weniger?  In meinem Fall müssen Sie das Video vor einigen Tagen von zwei Kameras zurückspulen können.  Na dann noch 300-400 Rubel. <br><br>  4) Netzteile für Single Board und für Kameras. <br><br>  Also, was wurde getan?  Nachdem ich das geschätzte Paket per Post erhalten hatte, holte ich einen orangefarbenen Einzahler heraus, untersuchte es und dachte zuerst - verdammt, aber es gibt keine Videoausgabe.  Wie installiere ich Debian- und Videoüberwachungssoftware und nehme erste Einstellungen vor?  Ich erinnerte mich sofort daran, dass es auf der Himbeere immer einen gewöhnlichen Composite-AV gab, aber hier ist es nicht.  Nun, es kann nicht sein, dass der Hersteller keine Gelegenheit gelassen hat, eine Verbindung über Composite herzustellen - dachte ich und ging zu Google, um die GPIO-Pinbelegung anzusehen.  Ja, der zweite Stift ist die Erde und der neunte ist TV-Out. <br><br>  Löten Sie die Av-Buchse.  Jetzt werden wir den AV-&gt; VGA-Adapter verwenden (Sie haben vermutet, dass er auch über aliexpress gekauft werden kann, eine nützliche Sache) und eine Verbindung zu unserem Monitor herstellen.  Wir werden aber noch nichts aufnehmen - schließlich haben wir noch keine Microsd-Karte vorbereitet. <br><br>  Wir gehen auf die Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.orangepi.org</a> und laden die Debian xfce-Desktop-Distribution herunter. Schreiben Sie sie mit dem win32 Disk Imager oder Etcher auf die Karte.  Wir stecken den USB-Stick in unsere Orange, schalten den Monitor ein, schließen das Netzteil an und ... nichts.  Dies ist genau das, was Neulingen am wahrscheinlichsten begegnet - ein Single-Board-Computer bootet in keiner Weise, sondern leuchtet nur spöttisch mit einer gelben Diode.  Was ist das?  Eine falsch aufgenommene Karte (vielleicht), eine nicht funktionierende Single-Board-Karte (unwahrscheinlich, weil wir sie gerade ausgepackt haben), gibt es kein Signal vom Videoausgang?  Das häufigste Problem ist die Ernährung.  Orange pi ist wie Himbeeren und andere Single-Board-Beeren sehr stromhungrig - der Adapter sollte 5 V / 2 A betragen. Wenn der Adapter schwach ist und in den ersten Sekunden nach dem Einschalten eines Single-Boards ein Stromausfall auftritt, funktioniert er nicht und funktioniert nicht.  Verwenden Sie also ein gutes, leistungsstarkes Netzteil und laden Sie es nicht von Ihrem alten Android-Gerät auf. <br><br>  Wir schließen ein gutes Netzteil an, wir sehen, wie der Debian-Download gelaufen ist.  Wir sehen den Desktop - großartig!  Jetzt müssen Sie das Gerät so konfigurieren, dass es über WLAN funktioniert.  Wir gehen in Netzwerkverbindungen, stellen eine neue Wi-Fi-Verbindung her, geben unseren Benutzernamen und unser Passwort über das Home-Office-Wi-Fi ein - jetzt befindet sich das Gerät in unserem lokalen Netzwerk und hat Internetzugang!  Jetzt müssen wir den Monitor loswerden. <br><br>  Um den Desktop aus der Ferne sehen zu können, hilft uns das vnc viewer-Programm und für einen Single-Board-vnc-Server.  Normalerweise ist dieses Ding bereits in das Debian integriert, das vom Hersteller der Daten der Einzelzahler verteilt wird. Sie müssen es nur konfigurieren - Autorisierungsparameter eingeben usw.  Nachdem wir sichergestellt haben, dass wir jetzt Zugriff auf den Desktop in unserem lokalen Netzwerk haben, entfernen wir den Monitor, verstecken das Gerät in einer Box / einem Kabelkanal / an einem anderen Ort und konfigurieren alles andere über den VNC-Viewer, während wir am üblichen Computer sitzen. <br><br>  Als Software für die Videoüberwachung wurde zoneminder ausgewählt.  Warum genau er?  Kostenlos, flexibel, einfach zu konfigurieren, verfügbar in der Arm-Version für unser Single Board mit Debian.  Diese Software funktioniert unter PHP / MySQL. Sie müssen also zunächst die erforderlichen Pakete installieren: <br><br><pre><code class="plaintext hljs">sudo apt-get install php5 mysql-server php-pear php5mysql php5-gd</code> </pre> <br>  Als nächstes müssen wir die Zeile in /etc/apt/sources.list hinzufügen: <br><br><pre> <code class="plaintext hljs">deb http://ftp.debian.org/debian jessie-backports main</code> </pre> <br>  Wir führen ein Update durch: <br><br><pre> <code class="plaintext hljs">sudo apt-get update</code> </pre> <br>  Und schließlich für das, was wir alle damit begonnen haben: <br><br><pre> <code class="plaintext hljs">sudo apt-get install zoneminder</code> </pre> <br>  Wenn die Konsole uns mitteilt, dass zoneminder installiert ist, fahren wir mit der Konfiguration fort.  Der Konfigurationsprozess wird auf der offiziellen zoneminder-Website ausführlich beschrieben. Es macht keinen Sinn, alle Punkte in diesem Artikel aufzulisten. Wir werden also entscheiden, dass der liebe Leser dies getan hat. Wenn wir jetzt unseren Browser unter der Computeradresse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unseres Einteilnehmers / zm eingeben, werden</a> wir zum webbasierten Videoüberwachungs-Verwaltungsbereich wechseln.  Hier müssen wir die IP-Adressen der Kameras hinzufügen, die Parameter für die Videoaufzeichnung einstellen und so weiter. <br><br><img src="http://d.radikal.ru/d26/1905/68/8ed0bed4007c.jpg" alt="Bild"><br><br>  Jetzt können wir Videos von Kameras über den Browser aus dem internen Netzwerk ansehen, sowohl über das kabelgebundene Netzwerk als auch über WLAN. <br><br><img src="http://d.radikal.ru/d33/1905/f1/4c69d9aaab2a.jpg" alt="Bild"><br><br>  Die Aufgabe bestand jedoch darin, Videos von überall auf der Welt über das Internet anzusehen - und das haben wir noch nicht implementiert.  Also lasst uns implementieren!  Mindestens zwei Optionen kommen in den Sinn: <br><br><ol><li>  Geben Sie über den Remotedesktop wie eine Zeitleiste ein.  Leider funktioniert die Zeitleiste mehr oder weniger korrekt nur bei "Himbeeren", hier kann man selbst mit einem Tamburin und Zaubersprüchen nichts erreichen </li><li>  Wir haben eine dedizierte IP-Adresse, gehen zu den Router-Einstellungen, leiten die erforderlichen Ports weiter, konfigurieren den virtuellen Server. Jetzt können wir das zoneminder-Administrationsfenster beispielsweise unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">our_white_ip</a> : 123 sehen.  Das ist gut, aber was ist, wenn es keine dedizierte IP gibt? </li><li>  Wenn es keine dedizierte IP gibt, rufen Sie vpn und dyndns auf.  Eine große Anzahl von Artikeln widmet sich diesem Thema, unter anderem über Habré, Informationen zum Suchen und Finden </li></ol><br>  Jetzt muss noch die Möglichkeit hinzugefügt werden, Videos vom Telefon aus anzusehen.  Download für unsere Android-Anwendung zoneminder client mobile (einfach google) und für iphone - Surveillance Pro. <br><br><img src="http://dvr-security.net/air/zmc/screenshots/login_portrait.png" alt="Bild"><br><br><img src="https://is4-ssl.mzstatic.com/image/thumb/Purple118/v4/66/6f/22/666f2254-ac58-834b-3b6f-832a0ff9f120/mzl.cqzeieud.png/690x0w.jpg" alt="Bild"><br><br>  Insgesamt erhalten wir für mehrere tausend Rubel einen eigenen Mini-Videoüberwachungsserver, der leicht in einem Kabelkanal versteckt werden kann und für nur einen Cent Strom verbraucht, ein Paar drahtloser Kameras und die Möglichkeit, immer von einem Computer oder Telefon aus von jedem Ort aus zu schauen, an dem es einen Internetzugang gibt Was passiert in Ihrem Büro / Garage / Veranda? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454132/">https://habr.com/ru/post/de454132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454114/index.html">Erfahrung mit Starwind VSAN und EMC ScaleIO (VxFlexOS) + Spickzettel für Mini Enterprise Storage (1 Teil)</a></li>
<li><a href="../de454124/index.html">Das Buch "Lernen, in JavaScript zu programmieren"</a></li>
<li><a href="../de454126/index.html">Vom täglichen Absturz bis zur Stabilität: Informatica mit 10 Admin-Augen</a></li>
<li><a href="../de454128/index.html">So erstellen Sie zwei Anwendungen aus einer. Tinkoff Junior Erfahrung</a></li>
<li><a href="../de454130/index.html">C-V2X mit Unterstützung für 5G NR-Netze: Ein neues Paradigma für den Datenaustausch zwischen Fahrzeugen</a></li>
<li><a href="../de454136/index.html">Der schönste Satz der Mathematik: Eulers Identität</a></li>
<li><a href="../de454138/index.html">10. Juni, Deworkacy - QS Gute Kommunikation</a></li>
<li><a href="../de454140/index.html">Vom Anwalt zum Tester in Yandex. Die Geschichte meines Praktikums</a></li>
<li><a href="../de454144/index.html">In Java 13 möchten sie "Textblöcke" hinzufügen</a></li>
<li><a href="../de454148/index.html">Überprüfen der SOC-Leistung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>