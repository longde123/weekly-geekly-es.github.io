<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ผ ๐ ๐ผ RabbitMQ ููุงุจู ูุงููุง: ุชุฌุงูุฒ ุงููุดู ูุงูุชูุงูุฑ ุงูุนุงูู ๐ ๐๐ผ ๐ง๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุงู ุณุงุจู ุ ุฏุฑุณูุง ุชุฌููุน RabbitMQ ููุชุณุงูุญ ูุน ุงูุฎุทุฃ ูุชูุงูุฑ ุนุงููุฉ. ุงูุขู ุฏุนูุง ูุญูุฑ ุจุนูู ูู ุฃุจุงุชุดู ูุงููุง. 

 ููุง ุ ูุญุฏุฉ ุงููุณุฎ ุงููุชูุงุซู ูู ูุณู. ูู ููุถูุน ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RabbitMQ ููุงุจู ูุงููุง: ุชุฌุงูุฒ ุงููุดู ูุงูุชูุงูุฑ ุงูุนุงูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/474984/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rc/zb/n7/rczbn7bwtp8b5day0whi_wace2e.jpeg"><br><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุณุงุจู ุ</a> ุฏุฑุณูุง ุชุฌููุน RabbitMQ ููุชุณุงูุญ ูุน ุงูุฎุทุฃ ูุชูุงูุฑ ุนุงููุฉ.  ุงูุขู ุฏุนูุง ูุญูุฑ ุจุนูู ูู ุฃุจุงุชุดู ูุงููุง. <br><br>  ููุง ุ ูุญุฏุฉ ุงููุณุฎ ุงููุชูุงุซู ูู ูุณู.  ูู ููุถูุน ูู ูุณู ูุงุญุฏ ุฃู ุฃูุซุฑ.  ูู ูุณู ูุฏูู ุฒุนูู ูุน ุฃู ุจุฏูู ุฃุชุจุงุน.  ุนูุฏ ุฅูุดุงุก ููุถูุน ุ ุชุชู ุงูุฅุดุงุฑุฉ ุฅูู ุนุฏุฏ ุงูุฃูุณุงู ููุนุฏู ุงููุณุฎ ุงููุชูุงุซู.  ุงููููุฉ ุงููุนุชุงุฏุฉ ูู 3 ุ ููุง ูุนูู ุซูุงุซ ููุงุญุธุงุช: ูุงุฆุฏ ูุงุญุฏ ูุงุซููู ูู ุงููุชุงุจุนูู. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/ly/hd/ml/lyhdmlstwyv-tf_-ts54gife3cw.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">1. ูุชู ุชูุฒูุน ุฃุฑุจุนุฉ ุฃูุณุงู ุจูู ุซูุงุซุฉ ูุณุทุงุก</font></i> <br><br>  ุฌููุน ุทูุจุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุชุฐูุจ ุฅูู ุงููุงุฆุฏ.  ูููู ุงููุชุงุจุนูู ุจุฅุฑุณุงู ุทูุจุงุช ุฅูู ุงููุงุฆุฏ ุจุดูู ุฏูุฑู ูุชููู ุฃุญุฏุซ ุงูุฑุณุงุฆู.  ูุง ููุฌุฃ ุงููุณุชููููู ุฃุจุฏูุง ุฅูู ุงููุชุงุจุนูู ุ ูุงูุฃุฎูุฑ ููุฌูุฏ ููุท ููุชูุฑุงุฑ ูุงูุชุณุงูุญ ูุน ุงูุฎุทุฃ. <br><br><img src="https://habrastorage.org/webt/sb/fc/v0/sbfcv0j3mosfzvrb7qktoexl_lg.png"><br><br><h1 style=";text-align:right;direction:rtl">  ูุดู ุงููุณู </h1><br>  ุนูุฏูุง ูุณูุท ุงููุณูุท ุ ููุดู ูุงุฏุฉ ุงูุนุฏูุฏ ูู ุงูุฃูุณุงู.  ูู ูู ูุงุญุฏ ูููู ุ ูุตุจุญ ุงูุชุงุจุน ูู ุนูุฏุฉ ุฃุฎุฑู ูู ุงูุฒุนูู.  ูู ุงููุงูุน ุ ููุณุช ูุฐู ูู ุงูุญุงูุฉ ุฏุงุฆููุง ุ ูุธุฑูุง ูุฃู ุนุงูู ุงููุฒุงููุฉ ูุคุซุฑ ุฃูุถูุง ุนูู ูุง ุฅุฐุง ูุงู ููุงู ูุชุงุจุนูู ูุชุฒุงูููู ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุฅู ุงูุงูุชูุงู ุฅูู ูุณุฎุฉ ูุชูุงุซูุฉ ุบูุฑ ูุชุฒุงููุฉ ูุณููุญ ุจู.  ููู ูู ุงูููุช ุงูุญุงูู ุ ุฏุนููุง ูุง ูุนููุฏ ุฐูู. <br><br>  ูุบุงุฏุฑ ุงููุณูุท 3 ุงูุดุจูุฉ - ูุจุงููุณุจุฉ ูููุณู 2 ุ ูุชู ุงูุชุฎุงุจ ูุงุฆุฏ ุฌุฏูุฏ ูููุณูุท 2. <br><br><img src="https://habrastorage.org/webt/im/ct/r0/imctr0qotjsjg4_jx3g6p5otk9u.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">2. ููุงุฉ ุงููุณูุท 3 ูุงูุชุฎุงุจ ุฃุชุจุงุนู ุนูู ุงููุณูุท 2 ููุงุฆุฏ ุฌุฏูุฏ ูููุณู 2</font></i> <br><br>  ุซู ูุบุงุฏุฑ ูุณูุท 1 ููุฎุณุฑ ุงููุณู 1 ุฃูุถูุง ูุงุฆุฏู ุ ุงูุฐู ูุฐูุจ ุฏูุฑู ูููุณูุท 2. <br><br><img src="https://habrastorage.org/webt/rg/fo/zp/rgfozpk7b_t1odoxso1mvihmccu.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">3. ูุง ููุฌุฏ ุณูู ูุณูุท ูุงุญุฏ ุงููุณุงุฑ.</font></i>  <i><font color="gray">ุฌููุน ุงููุงุฏุฉ ุนูู ููุณ ูุณูุท ุงูุชูุฑุงุฑ ุตูุฑ.</font></i> <br><br>  ุนูุฏูุง ูุนูุฏ ุงููุณูุท 1 ุฅูู ุงูุดุจูุฉ ุ ูุถูู ุฃุฑุจุนุฉ ูุชุงุจุนูู ุ ููุง ูููุฑ ุจุนุถ ุงูุชูุฑุงุฑ ููู ูุณู.  ููู ูู ุงููุงุฏุฉ ุธููุง ูู ุงููุณูุท 2. <br><br><img src="https://habrastorage.org/webt/mh/lj/2s/mhlj2sn5r6rcjodqnl22450bjn8.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">4. ูุจูู ุงููุงุฏุฉ ุนูู ูุณูุท 2</font></i> <br><br>  ุนูุฏูุง ูุฑุชูุน ุงููุณูุท 3 ุ ูุนูุฏ ุฅูู ุซูุงุซ ูุณุฎ ูุชูุงุซูุฉ ููู ูุณู.  ูููู ุฌููุน ุงููุงุฏุฉ ูุง ูุฒุงููู ุนูู ูุณูุท 2. <br><br><img src="https://habrastorage.org/webt/3u/tb/op/3utbopk0awdg8rg62natyoxqg9o.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">5. ูุถุน ุบูุฑ ูุชูุงุฒู ูููุงุฏุฉ ุจุนุฏ ุงุณุชุนุงุฏุฉ ุงููุณุทุงุก 1 ู 3</font></i> <br><br>  ูุงููุง ูุฏูู ุฃุฏุงุฉ ููุงุฏุฉ ุฅุนุงุฏุฉ ุงูุชูุงุฒู ุฃูุถู ูู RabbitMQ.  ููุงู ุ ูุงู ุนููู ุงุณุชุฎุฏุงู ูููู ุฅุถุงูู ุฃู ุจุฑูุงูุฌ ูุตู ุชุงุจุน ูุฌูุฉ ุฃุฎุฑู ุบูุฑ ุงูุณูุงุณุงุช ุงูุฎุงุตุฉ ุจุชุฑุญูู ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ ุนู ุทุฑูู ุชูููู ุงูุชูุฑุงุฑ ุฃุซูุงุก ุงูุชุฑุญูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุงู ุนูู ุทูุงุจูุฑ ูุจูุฑุฉ ูุชุญูู ุตุนูุจุฉ ุงููุตูู ุฅูููุง ุฃุซูุงุก ุงูุชุฒุงูู. <br><br>  ูุฏู ูุงููุง ููููู "ุงูุฅุดุงุฑุงุช ุงูููุถูุฉ" ูุฏูุฑ ุงูููุงุฏุฉ.  ุนูุฏูุง ูุชู ุฅูุดุงุก ุฃูุณุงู ุงูููุถูุน ุ ูุญุงูู ูุงููุง ุชูุฒูุน ุงููุงุฏุฉ ุจุงูุชุณุงูู ุนุจุฑ ุงูุนูุฏ ููููุฒ ูุคูุงุก ุงููุงุฏุฉ ุงูุฃูุงุฆู ุนูู ุฃููู ุงูุฃูุถู.  ุจูุฑูุฑ ุงูููุช ุ ุจุณุจุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุ ููุดู ุ ููุดู ุงูุงุชุตุงู ุ ูุฏ ููุชูู ุงููุงุฏุฉ ูู ุงูุนูุฏ ุงูุฃุฎุฑู ุ ููุง ูู ุงูุญุงูุฉ ุงููุตูู ุงูููุตููุฉ ุฃุนูุงู. <br><br>  ูุฅุตูุงุญ ุฐูู ุ ููุฏู Kafka ุฎูุงุฑูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชูุญ ุงูุฎูุงุฑ <i>auto.leader.rebalance.enable = true</i> ูุนูุฏุฉ ุงูุชุญูู ุฅุนุงุฏุฉ ุชุนููู ุงููุงุฏุฉ ุชููุงุฆููุง ุฅูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูููุถูุฉ ููู ุซู ุงุณุชุนุงุฏุฉ ุงูุชูุฒูุน ุงูููุญุฏ. <br></li><li style=";text-align:right;direction:rtl">  ูููู ูููุณุคูู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู <i>kafka-preferred-replica-election.sh</i> ูุฅุนุงุฏุฉ ุงูุชุนููู ูุฏูููุง. </li></ul><br><br><img src="https://habrastorage.org/webt/qt/2l/th/qt2lth99rb1fhzq8g4r93uoxh6k.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">6. ุงููุณุฎ ุงููุชูุงุซูุฉ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชูุงุฒู</font></i> <br><br>  ููุฏ ูุงูุช ูุณุฎุฉ ูุจุณุทุฉ ูู ุงููุดู ุ ูููู ุงููุงูุน ุฃูุซุฑ ุชุนููุฏูุง ุ ุฑุบู ุฃูู ูุง ููุฌุฏ ุดูุก ูุนูุฏ ููุบุงูุฉ ููุง.  ูู ุฐูู ูุฃุชู ุฅูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุชุฒุงููุฉ (ุงููุณุฎ ุงููุชูุงุซูุฉ ูู ุงููุฒุงููุฉ ุ ISR). <br><br><h1 style=";text-align:right;direction:rtl">  ุงููุณุฎ ุงููุชูุงุซูุฉ ุงููุชุฒุงููุฉ (ISR) </h1><br>  ISR ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงููุณุฎ ุงููุชูุงุซูุฉ ููุณู ูุนุชุจุฑ "ูุชุฒุงูู" (ูุชุฒุงูู).  ููุงู ูุงุฆุฏ ุ ููู ูุฏ ูุง ูููู ููุงู ูุชุงุจุนูู.  ูุนุชุจุฑ ูุชุงุจุนุง ูุชุฒุงููุง ุฅุฐุง ูุงู ุจุนูู ูุณุฎ ุฏูููุฉ ูุฌููุน ุฑุณุงุฆู ุงููุงุฆุฏ ูุจู ุงูุชูุงุก ุงููุงุตู ุงูุฒููู <i>replica.lag.time.max.ms</i> . <br><br>  ุชุชู ุฅุฒุงูุฉ ุงูุชุงุจุน ูู ูุฌููุนุฉ ISR ุฅุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุชูุฏู ุทูุจูุง ูุฃุฎุฐ ุนููุงุช <i>ูููุณุฎุฉ ุงููุชูุงุซูุฉ</i> ูููุงุตู ุงูุฒููู. <i>lag.time.max.ms</i> (ุชุนุชุจุฑ ููุชุฉ) <br></li><li style=";text-align:right;direction:rtl">  ูู ููู ูุฏูู ุงูููุช ูุชุญุฏูุซ ุงููุณุฎุฉ <i>ุงููุชูุงุซูุฉ</i> ุงููุงุตู ุงูุฒููู. <i>lag.time.max.ms</i> (ุชุนุชุจุฑ ุจุทูุฆุฉ) </li></ul><br>  ููุฏู ุงููุชุงุจุนูู ุทูุจุงุช ุฌูุจ ูู ุงููุงุตู ุงูุฒููู <i>replica.fetch.wait.max.ms</i> ุ ูุงูุฐู ูููู ุงูุชุฑุงุถููุง ูู 500 ูููู ุซุงููุฉ. <br><br>  ูุชูุถูุญ ุงูุบุฑุถ ูู ISR ุจูุถูุญ ุ ุชุญุชุงุฌ ุฅูู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุชุฃููุฏุงุช ูู ุงูููุชุฌ (ุงูููุชุฌ) ูุจุนุถ ุณููุงุฑูููุงุช ุงููุดู.  ูููู ููููุชุฌูู ุงูุงุฎุชูุงุฑ ุนูุฏูุง ูุฑุณู ูุณูุท ุชุฃููุฏูุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  aks = 0 ุ ูุง ูุชู ุฅุฑุณุงู ุงูุชุฃููุฏ <br></li><li style=";text-align:right;direction:rtl">  acks = 1 ุ ูุชู ุฅุฑุณุงู ุงูุชุฃููุฏ ุจุนุฏ ุฃู ูุชุจ ุงููุงุฆุฏ ุฑุณุงูุฉ ุฅูู ุณุฌูู ุงููุญูู <br></li><li style=";text-align:right;direction:rtl">  acks = ุงููู ุ ูุชู ุฅุฑุณุงู ุงูุชุฃููุฏ ุจุนุฏ ุฃู ูุชุจุช ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ูู ISR ุฑุณุงูุฉ ุฅูู ุงูุณุฌูุงุช ุงููุญููุฉ </li></ul><br>  ูู ูุตุทูุญุงุช ูุงููุง ุ ุฅุฐุง ูุงู ISR ูุฏ ุฃููุฐ ุงูุฑุณุงูุฉ ุ ููู "ููุชุฒู".  ุฃูุณ = ูู ุดูุก ูู ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุฃูุงูุง ุ ูููู ุฃูุถุง ุชุฃุฎูุฑ ุฅุถุงูู.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงููู ูููุดู ูููู ุชุชูุงุนู ุฎูุงุฑุงุช "aks" ุงููุฎุชููุฉ ูุน ููููู ISR. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃูุณ = 1 ู ISR </h3><br>  ูู ูุฐุง ุงููุซุงู ุ ุณูุฑู ุฃูู ูู ุญุงูุฉ ุนุฏู ุงูุชุธุงุฑ ุงููุงุฆุฏ ุญุชู ูุชู ุญูุธ ูู ุฑุณุงูุฉ ูู ุฌููุน ุงููุชุงุจุนูู ุ ูู ุญุงูุฉ ูุดู ุงููุงุฆุฏ ุ ูุฏ ูุชู ููุฏ ุงูุจูุงูุงุช.  ูููู ุชูููู ุฃู ุชุนุทูู ุงูุงูุชูุงู ุฅูู ูุชุงุจุน ุบูุฑ ูุชุฒุงูู ูู ุฎูุงู ุชุนููู <i>unclean.leader.election.enable</i> . <br><br>  ูู ูุฐุง ุงููุซุงู ุ ุชู ุถุจุท ุงูุดุฑูุฉ ุงููุตูุนุฉ ุนูู acks = 1.  ูุชู ุชูุฒูุน ุงููุณู ุนูู ุฌููุน ุงููุณุทุงุก ุงูุซูุงุซุฉ.  ุงููุณูุท 3 ูุชุฎูู ุ ุชุฒุงูู ูุน ุงููุงุฆุฏ ูุจู ุซูุงูู ุซูุงู ุ ููู ุงูุขู ูุชุฎูููุง ุนู ุทุฑูู 7456 ุฑุณุงูุฉ.  ุงููุณูุท 1 ูู ูุฑุงุก ุซุงููุฉ ูุงุญุฏุฉ ููุท.  ูุฑุณู ููุชุฌูุง ุฑุณุงูุฉ ููุชููู ุจุณุฑุนุฉ ุนูุฏุฉ ุ ุฏูู ุงููููุงุช ุงูุนุงูุฉ ููุชุงุจุนูู ุงูุจุทูุฆูู ุฃู ุงููุชูู ุงูุฐูู ูุง ูุชููุนูู ุงูุฒุนูู. <br><br><img src="https://habrastorage.org/webt/ej/bh/g7/ejbhg7svgcphrhpdtzbwuw--wg4.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">7. ISR ูุน ุซูุงุซุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ</font></i> <br><br>  ูุดู ุงููุณูุท 2 ุ ูุชุชููู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุฎุทุฃ ูู ุงูุงุชุตุงู.  ุจุนุฏ ุงูุชูุงู ุงูููุงุฏุฉ ุฅูู ูุณูุท 1 ุ ูููุฏ 123 ุฑุณุงูุฉ.  ูุงู ุชุงุจุน ุงููุณูุท 1 ุฌุฒุกูุง ูู ISR ุ ูููู ูู ูุชุฒุงูู ุชูุงููุง ูุน ุงููุงุฆุฏ ุนูุฏูุง ุณูุท. <br><br><img src="https://habrastorage.org/webt/6y/th/y9/6ythy9olfa5zr2wyqtfqcrq8u5e.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">8. ุนูุฏ ุงููุดู ุ ูุชู ููุฏ ุงูุฑุณุงุฆู</font></i> <br><br>  ูู ุชูููู <i>bootstrap.servers</i> ุ ูุณุฑุฏ ุงูุตุงูุน ุงูุนุฏูุฏ ูู ุงููุณุทุงุก ุ ูููููู ุฃู ูุณุฃู ูุณูุทูุง ุขุฎุฑ ุฃุตุจุญ ุงููุงุฆุฏ ุงูุฌุฏูุฏ ูููุณู.  ุซู ูููู ุจุฅูุดุงุก ุงุชุตุงู ูุน ูุณูุท 1 ููุณุชูุฑ ูู ุฅุฑุณุงู ุงูุฑุณุงุฆู. <br><br><img src="https://habrastorage.org/webt/br/o6/jr/bro6jrn5nt-a0wzvg_yt0csmdgg.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">9. ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุณุชุฃูู ุจุนุฏ ุงุณุชุฑุงุญุฉ ูุตูุฑุฉ</font></i> <br><br>  ูุณูุท 3 ูุชุฎูู ุฃูุซุฑ ูู ุฐูู.  ูุฌุนู ุทูุจุงุช ุฌูุจ ุ ูููู ูุง ูููู ูุฒุงููุชูุง.  ูุฏ ูููู ูุฐุง ุจุณุจุจ ุงุชุตุงู ุงูุดุจูุฉ ุงูุจุทูุก ุจูู ุงูุณูุงุณุฑุฉ ููุดููุฉ ุงูุชุฎุฒูู ููุง ุฅูู ุฐูู. ุชุชู ุฅุฒุงูุชู ูู ISR.  ุงูุขู ISR ูุชููู ูู ูุณุฎุฉ ูุงุญุฏุฉ - ุงููุงุฆุฏ!  ุชูุงุตู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุชููู ุงูุชุฃููุฏ. <br><br><img src="https://habrastorage.org/webt/b2/qj/aj/b2qjaj5g_yx2wfb-jdkalxr9074.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">10. ุชุชู ุฅุฒุงูุฉ ุงูุชุงุจุน ุนูู ูุณูุท 3 ูู ISR</font></i> <br><br>  ุงูุณูุณุงุฑ 1 ูุณูุท ุ ูุฏูุฑ ุงููุงุฆุฏ ูุฐูุจ ุฅูู ุงููุณูุท 3 ุจุฎุณุงุฑุฉ 15286 ุฑุณุงูุฉ!  ุชุชููู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุฑุณุงูุฉ ุฎุทุฃ ุงุชุตุงู.  ูุงู ุงูุฐูุงุจ ุฅูู ุงูุฒุนูู ุฎุงุฑุฌ ISR ูููููุง ููุท ุจุณุจุจ ุงูุฅุนุฏุงุฏ <i>unclean.leader.election.enable = true</i> .  ุฅุฐุง ุชู ุถุจุทู ุนูู " <i>ุฎุทุฃ"</i> ุ ููู ูููู ุงูุงูุชูุงู ูุฏ ุญุฏุซ ุ ูุณูุชู ุฑูุถ ุฌููุน ุทูุจุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ููุชุธุฑ ุนูุฏุฉ ุงููุณูุท 1 ุจุจูุงูุงุชู ุงูุชู ูู ุชูุณูุง ูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ูุงูุชู ุณุชุชููู ุงูููุงุฏุฉ ูุฑุฉ ุฃุฎุฑู. <br><br><img src="https://habrastorage.org/webt/rr/n1/-n/rrn1-nekmhjtro9pxeueciytb50.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">11. ุงููุณูุท 1 ูุทุฑุงุช.</font></i>  <i><font color="gray">ูู ุญุงูุฉ ุญุฏูุซ ูุดู ุ ูุชู ููุฏ ุนุฏุฏ ูุจูุฑ ูู ุงูุฑุณุงุฆู</font></i> <br><br>  ุชููู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุจุชุฃุณูุณ ุงุชุตุงู ูุน ุขุฎุฑ ูุณูุท ูุชุฑู ุฃูู ูู ุงูุขู ูุงุฆุฏ ุงููุณู.  ูุจุฏุฃ ุจุฅุฑุณุงู ุฑุณุงุฆู ุฅูู ูุณูุท 3. <br><br><img src="https://habrastorage.org/webt/qj/qq/go/qjqqgoevfafcmcxtidd_bvjw9wi.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">12. ุจุนุฏ ุงุณุชุฑุงุญุฉ ูุตูุฑุฉ ุ ูุชู ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุฑุฉ ุฃุฎุฑู ุฅูู ุงููุณู 0</font></i> <br><br>  ููุฏ ุฑุฃููุง ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุงููุทุงุนุงุช ุงููุตูุฑุฉ ูุฅูุงูุฉ ุงุชุตุงูุงุช ุฌุฏูุฏุฉ ูุงูุจุญุซ ุนู ูุงุฆุฏ ุฌุฏูุฏ ุ ูุฅู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุชุฑุณู ุงูุฑุณุงุฆู ุจุงุณุชูุฑุงุฑ.  ูููุฑ ูุฐุง ุงูุชูููู ุฅููุงููุฉ ุงููุตูู ูู ุฎูุงู ุงูุชูุงุณู (ุฃูุงู ุงูุจูุงูุงุช).  ูุงููุง ููุฏุช ุงูุขูุงู ูู ุงูุฑุณุงุฆู ุ ููููุง ุงุณุชูุฑุช ูู ูุจูู ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃูุณ = ุงููู ู ISR </h3><br>  ุฏุนูุง ููุฑุฑ ูุฐุง ุงูุณููุงุฑูู ูุฑุฉ ุฃุฎุฑู ุ ูููู ูุน <i>acks = ุงููู</i> .  ุชุฃุฎูุฑ ูุณูุท 3 ุจูุนุฏู ุฃุฑุจุน ุซูุงู.  ูุฑุณู ุงูุตุงูุน ุฑุณุงูุฉ ูุน <i>acks = ุงููู</i> ุ ูุงูุขู ูุง ูุชููู ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ.  ููุชุธุฑ ุงููุงุฆุฏ ุญุชู ุชุฎุฒู ูู ุงูุฑุณุงุฆู ูู ISR ุงูุฑุณุงูุฉ. <br><br><img src="https://habrastorage.org/webt/3c/6j/a5/3c6ja5msoncfx1s-xbyjpmujtdo.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">13. ISR ูุน ุซูุงุซุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ.</font></i>  <i><font color="gray">ูุงุญุฏ ุจุทูุก ุ ููุง ุชุณุจุจ ูู ุชุฃุฎูุฑ ูู ุงูุชุณุฌูู</font></i> <br><br>  ุจุนุฏ ุฃุฑุจุน ุซูุงูู ูู ุงูุชุฃุฎูุฑ ุงูุฅุถุงูู ุ ูุฑุณู ุงููุณูุท 2 ุงูุฃูุฑ.  ูุชู ุงูุขู ุชุญุฏูุซ ูุงูุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุจุงููุงูู. <br><br><img src="https://habrastorage.org/webt/ol/eg/y6/olegy6unibvup0tlza6cbd4gqic.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">14. ุญูุธ ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ููุฑุณุงุฆู ู ack</font></i> <br><br>  ุฃุตุจุญ ุงููุณูุท 3 ูุชุฎูููุง ุนู ุงูุฎุฏูุฉ ููุชู ุฅุฒุงูุชู ูู ISR.  ูุชู ุชูููู ุงูุชุฃุฎูุฑ ุจุดูู ูุจูุฑ ูุฃูู ูุง ุชูุฌุฏ ูุณุฎ ูุชูุงุซูุฉ ุจุทูุฆุฉ ูู ISR.  ููุชุธุฑ Broker 2 ุงูุขู ุงููุณูุท 1 ููุท ุ ููุฏูู ูุชูุณุท โโุชุฃุฎูุฑ ูุฏุฑู 500 ูููู ุซุงููุฉ. <br><br><img src="https://habrastorage.org/webt/ub/0e/7j/ub0e7jm1siaa9dvcmxyldti1ify.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">15. ุชุชู ุฅุฒุงูุฉ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุนูู ูุณูุท 3 ูู ISR</font></i> <br><br>  ุซู ูุณูุท ุงููุณูุท 2 ุ ูุชูุชูู ุงูููุงุฏุฉ ุฅูู ุงููุณูุท 1 ุฏูู ููุฏ ุงูุฑุณุงุฆู. <br><br><img src="https://habrastorage.org/webt/a7/ts/8m/a7ts8mywsvuowiof5jp6f6eszlq.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">16. ุงูุณูุณุงุฑ 2 ูุณูุท</font></i> <br><br>  ูุฌุฏ ุงูุตุงูุน ูุงุฆุฏูุง ุฌุฏูุฏูุง ููุจุฏุฃ ูู ุฅุฑุณุงู ุฑุณุงุฆู ุฅููู.  ูุง ูุฒุงู ูุชู ุชูููู ุงูุชุฃุฎูุฑ ุ ูุฃู ISR ูุชููู ุงูุขู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ูุงุญุฏุฉ!  ูุฐูู ุ ูุง ูุถูู ุงูุฎูุงุฑ <i>= ุงููู</i> ุฎูุงุฑ ุงูุชูุฑุงุฑ. <br><br><img src="https://habrastorage.org/webt/-z/i_/od/-zi_odb0nc-nf0xe1tsxmzlr-uq.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">17. ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุนูู ูุณูุท 1 ุชุฃุฎุฐ ุฒูุงู ุงููุจุงุฏุฑุฉ ุฏูู ููุฏุงู ุงูุฑุณุงุฆู</font></i> <br><br>  ุซู ูุณูุท ุงููุณูุท 1 ุ ูุชูุชูู ุงูููุงุฏุฉ ุฅูู ุงููุณูุท 3 ุจุฎุณุงุฑุฉ 14ุ238 ุฑุณุงูุฉ! <br><br><img src="https://habrastorage.org/webt/sr/x5/1m/srx51mjemyxnksoewy6n91_lgqy.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">18. ููุงุฉ ุงููุณูุท 1 ุ ููุคุฏู ุงูุชูุงู ุงูููุงุฏุฉ ูุน ุงูุฅุนุฏุงุฏ ุบูุฑ ุงููุธูู ุฅูู ููุฏุงู ูุงุณุน ููุจูุงูุงุช</font></i> <br><br>  ูู ูุชููู ูู ุถุจุท ุงูุฎูุงุฑ <i>unclean.leader.election.enable</i> ุนูู <i>true</i> .  ุงูุชุฑุงุถูุง ุ ูุฐุง <i>ุฎุทุฃ</i> .  ูุคุฏู ุฅุนุฏุงุฏ <i>acks = all</i> ุจุงุณุชุฎุฏุงู <i>unclean.leader.election.enable = true ุฅูู</i> ุชูููุฑ ุฅููุงููุฉ ุงููุตูู ูุน ุจุนุถ ุฃูุงู ุงูุจูุงูุงุช ุงูุฅุถุงูู.  ูููู ุ ููุง ุชุฑูู ุ ูุง ูุฒุงู ุจุฅููุงููุง ููุฏ ุงูุฑุณุงุฆู. <br><br>  ููู ูุงุฐุง ูู ุฃุฑุฏูุง ุฒูุงุฏุฉ ุฃูุงู ุงูุจูุงูุงุชุ  ููููู ุชุนููู <i>unclean.leader.election.enable = false</i> ุ ููู ูุฐุง ูุง ูุญูููุง ุจุงูุถุฑูุฑุฉ ูู ููุฏุงู ุงูุจูุงูุงุช.  ุฅุฐุง ุณูุท ุงููุงุฆุฏ ุจุดุฏุฉ ูุฃุฎุฐ ุงูุจูุงูุงุช ูุนู ุ ููุง ุชุฒุงู ุงูุฑุณุงุฆู ููููุฏุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ููุฏ ุฅููุงููุฉ ุงููุตูู ุฅูู ุฃู ูุณุชุฑุฏ ุงููุณุคูู ุงููููู. <br><br>  ูู ุงูุฃูุถู ุถูุงู ุชูุฑุงุฑ ุฌููุน ุงูุฑุณุงุฆู ุ ูุฑูุถ ุงูุชุณุฌูู ุจุทุฑููุฉ ุฃุฎุฑู.  ุจุนุฏ ุฐูู ุ ุนูู ุงูุฃูู ูู ูุฌูุฉ ูุธุฑ ุงููุณูุท ุ ูุง ูููู ููุฏ ุงูุจูุงูุงุช ุฅูุง ุจูุดููู ูุชุฒุงูููู ุฃู ุฃูุซุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  Akss = ุงููู ุ min.insync.replicas ู ISR </h3><br>  ุจุงุณุชุฎุฏุงู <i>ุชูููู</i> ููุถูุน <i>min.insync.replicas ุ</i> ูุฒูุฏ ูู ุฃูุงู ุงูุจูุงูุงุช.  ุฏุนูุง ูุฐูุจ ุฅูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูุณููุงุฑูู ุงูุฃุฎูุฑ ูุฑุฉ ุฃุฎุฑู ุ ูููู ูุฐู ุงููุฑุฉ ูุน <i>min.insync.replicas = 2</i> . <br><br>  ูุฐูู ุ ูุฏู ุงููุณูุท 2 ูุงุฆุฏ ูุชูุงุซูุฉ ุ ูุชุชู ุฅุฒุงูุฉ ุงูุชุงุจุน ุนูู ูุณูุท 3 ูู ISR. <br><br><img src="https://habrastorage.org/webt/5g/ij/ls/5gijlstkvqxo4ojr6wfxxwn719m.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">19. ISR ูู ุงุซููู ูู ุงููุณุฎ ุงููุชูุงุซูุฉ</font></i> <br><br>  ููุน ุงูุณูุณุงุฑ 2 ุ ูุชูุชูู ุงูููุงุฏุฉ ุฅูู ุงููุณูุท 1 ุฏูู ููุฏ ุงูุฑุณุงุฆู.  ูููู ุงูุขู ISR ูุชููู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ูุงุญุฏุฉ ููุท.  ูุฐุง ูุง ูุชูุงูู ูุน ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุชููู ุงูุณุฌูุงุช ุ ูุจุงูุชุงูู ูุณุชุฌูุจ ุงููุณูุท ููุญุงููุฉ ุงูุชุณุฌูู ูุน ุฎุทุฃ <i>NotEnoughReplicas</i> . <br><br><img src="https://habrastorage.org/webt/ng/p5/fj/ngp5fjym6nvykpohj8brnl8bvxc.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">20. ุนุฏุฏ ISRs ุฃูู ูู ุงูุฑูู ุงููุญุฏุฏ ูู min.insync.replicas</font></i> <br><br>  ูุฐุง ุงูุชูููู ุงูุชุถุญูุฉ ุชูุงูุฑ ูู ุฃุฌู ุงูุงุชุณุงู.  ูุจู ุชุฃููุฏ ุงูุฑุณุงูุฉ ุ ูุถูู ุชุณุฌูููุง ุนูู ูุณุฎุชูู ูุชูุงุซูุชูู ุนูู ุงูุฃูู.  ูุฐุง ูุนุทู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุซูุฉ ุฃูุจุฑ ุจูุซูุฑ.  ููุง ุ ูููู ููุฏุงู ุงูุฑุณุงูุฉ ูููููุง ููุท ูู ุญุงูุฉ ูุดู ูุณุฎุชูู ูุชูุงุซูุชูู ูู ููุช ูุงุญุฏ ูู ูุชุฑุฉ ุฒูููุฉ ูุตูุฑุฉ ุ ุญุชู ูุชู ูุณุฎ ุงูุฑุณุงูุฉ ุฅูู ูุชุงุจูุน ุฅุถุงูู ุ ููู ุฃูุฑ ุบูุฑ ูุฑุฌุญ.  ูููู ุฅุฐุง ููุช superparanoid ุ ูููููู ุถุจุท ูุณุจุฉ ุงููุณุฎ ุงููุชูุงุซู ุนูู 5 ุ ู <i>min.insync.replicas</i> ุฅูู 3. ุซู ูุฌุจ ุฃู ูุณูุท ุซูุงุซุฉ ูุณุทุงุก ูู ููุช ูุงุญุฏ ูู ููุณ ุงูููุช ูู ุฃุฌู ููุฏ ุงูุณุฌู!  ุจุงูุทุจุน ุ ููุซู ูุฐู ุงูููุซูููุฉ ุณูู ุชุฏูุน ุชุฃุฎูุฑูุง ุฅุถุงูููุง. <br><br><h1 style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ูููุตูู ุฅูู ุฃูู ุงูุจูุงูุงุช </h1><br>  ููุง ูู ุงูุญุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุน RabbitMQ</a> ุ ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ุฅููุงููุฉ ุงููุตูู ุถุฑูุฑูุฉ ูุฃูุงู ุงูุจูุงูุงุช.  ุชุญุชุงุฌ ุฅูู ุงูุชูููุฑ ูู ูุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ูููู ูููุงุดุฑ ููุท ุฅุฑุฌุงุน ุฎุทุฃ ุ ูุฎุฏูุฉ ุฃู ูุณุชุฎุฏู ุฃุนูู ุญุงูู ูุฑุฉ ุฃุฎุฑู ูุงุญููุงุ <br></li><li style=";text-align:right;direction:rtl">  ูู ูููู ูููุงุดุฑ ุญูุธ ุฑุณุงูุฉ ูุญูููุง ุฃู ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุงุญููุงุ </li></ul><br>  ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุฉ "ูุง" ุ ูุฅู ุชุญุณูู ุฅููุงููุฉ ุงููุตูู ูุญุณู ูู ุฃูุงู ุงูุจูุงูุงุช.  ุณุชููุฏ ุจูุงูุงุช ุฃูู ุฅุฐุง ุงุฎุชุฑุช ุงูุชููุฑ ุจุฏูุงู ูู ุชุฌุงูู ุงูุชุณุฌูู.  ูุจุงูุชุงูู ุ ูู ูุฐุง ูุชููู ุนูู ุฅูุฌุงุฏ ุชูุงุฒู ุ ูุงููุฑุงุฑ ูุนุชูุฏ ุนูู ุงููููู ุงููุญุฏุฏ. <br><br><h1 style=";text-align:right;direction:rtl">  ูุนูู ISR </h1><br>  ุชุณูุญ ูู ูุฌููุนุฉ ISR ุจุงุฎุชูุงุฑ ุงูุชูุงุฒู ุงูุฃูุซู ุจูู ุฃูุงู ุงูุจูุงูุงุช ูุงููููู.  ุนูู ุณุจูู ุงููุซุงู ุ ููุชุฃูุฏ ูู ุฃู ูุนุธู ุงููุณุฎ ุงููุชูุงุซูุฉ ูููู ุงููุตูู ุฅูููุง ูู ุญุงูุฉ ุงููุดู ุ ููุง ูููู ูู ุชุฃุซูุฑ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูููุชุฉ ุฃู ุงูุจุทูุฆุฉ ูู ุญูุซ ุงูุชุฃุฎูุฑ. <br><br>  ูุญู ุฃููุณูุง ุงุฎุชูุงุฑ ูููุฉ <i>replica.lag.time.max.ms</i> ูููุง ูุงุญุชูุงุฌุงุชูุง.  ูู ุฌููุฑูุง ุ ุชุนูู ูุฐู ุงููุนููุฉ ุงูุชุฃุฎูุฑ ุงูุฐู ูุญู ุนูู ุงุณุชุนุฏุงุฏ ููุจููู ูุน <i>aks = ุงููู</i> .  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู ุนุดุฑ ุซูุงูู.  ุฅุฐุง ูุงู ูุฐุง ุทููููุง ุฌุฏูุง ุจุงููุณุจุฉ ูู ุ ูููููู ุชููููู.  ุซู ุณูู ูุฒุฏุงุฏ ูุนุฏู ุชูุฑุงุฑ ุงูุชุบููุฑุงุช ูู ISR ุ ุญูุซ ุณูุชู ุญุฐู ุงููุชุงุจุนูู ูุฅุถุงูุชูู ูู ุฃุบูุจ ุงูุฃุญูุงู. <br><br>  RabbitMQ ูู ูุฌุฑุฏ ูุฌููุนุฉ ูู ุงููุฑุงูุง ุงูุชู ุชุญุชุงุฌ ุฅูู ุชูุฑุงุฑูุง.  ุชูุฏู ุงููุฑุงูุง ุงูุจุทูุฆุฉ ุชุฃุฎูุฑูุง ุฅุถุงูููุง ุ ููููู ุชููุน ุงุณุชุฌุงุจุฉ ุงููุฑุงูุง ุงููุงูุตุฉ ูุจู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุญุฒู ุงูุชู ุชุชุญูู ูู ุชููุฑ ูู ุนูุฏุฉ (ุนูุงูุฉ ุงูุชุฌุฒุฆุฉ).  ุชุนุฏ ISRs ุทุฑููุฉ ููุชุนุฉ ูุชุฌูุจ ูุฐู ุงููุดููุงุช ูุน ุงููููู ุงููุชุฒุงูุฏ.  ููููุง ูุฎุงุทุฑ ุจููุฏุงู ุงูุชูุฑุงุฑ ุ ูุธุฑูุง ูุฃู ISR ูุง ูููู ุชุญูููู ุฅูุง ุฅูู ูุงุฆุฏ.  ูุชุฌูุจ ูุฐุง ุงูุฎุทุฑ ุ ุงุณุชุฎุฏู ุฅุนุฏุงุฏ <i>min.insync.replicas</i> . <br><br><h1 style=";text-align:right;direction:rtl">  ุถูุงู ุงุชุตุงู ุงูุนููุงุก </h1><br>  ูู ุฅุนุฏุงุฏุงุช <i>bootstrap.servers ุงูุฎุงุตุฉ ุจุงูุดุฑูุฉ</i> ุงููุตูุนุฉ ูุงููุณุชููู ุ ููููู ุชุญุฏูุฏ ุงูุนุฏูุฏ ูู ุงููุณุทุงุก ูุฑุจุท ุงูุนููุงุก.  ุชุชูุซู ุงูููุฑุฉ ูู ุฃูู ุนูุฏูุง ุชููู ุจูุตู ุนูุฏุฉ ูุงุญุฏุฉ ุ ููุงู ุนุฏุฉ ุนูุฏ ุงุญุชูุงุทูุฉ ูููู ููุนููู ูุชุญ ุงุชุตุงู ุจูุง.  ูุฐู ููุณุช ุจุงูุถุฑูุฑุฉ ูุงุฏุฉ ุงููุณู ุ ูููู ุจุจุณุงุทุฉ ููุทุฉ ุงูุทูุงู ู bootstrapping.  ูููู ููุนููู ุฃู ูุณุฃููู ุนู ุงูุนูุฏุฉ ุงูุชู ููุฌุฏ ุจูุง ูุงุฆุฏ ูุณู ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ. <br><br>  ูู RabbitMQ ุ ูููู ููุนููุงุก ุงูุงุชุตุงู ุจุฃู ูุถูู ุ ูุงูุชูุฌูู ุงูุฏุงุฎูู ูุฑุณู ุทูุจูุง ุนูุฏ ุงูุถุฑูุฑุฉ.  ูุฐุง ูุนูู ุฃูู ููููู ุชุซุจูุช ููุงุฒู ุงูุชุญููู ุฃูุงู RabbitMQ.  ูุชุทูุจ Kafka ูู ุงูุนููุงุก ุงูุงุชุตุงู ุจุงููุถูู ุงูุฐู ูุณุชุถูู ูุงุฆุฏ ุงููุณู ุงูููุงุจู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูุญูู ููุงุฒู ุงูุชุญููู.  ุชุนุฏ ูุงุฆูุฉ <i>bootstrap.servers</i> ูููุฉ ููุบุงูุฉ ุจุญูุซ ูููู ููุนููุงุก ุงููุตูู ุฅูู ุงูุนูุฏ ุงูุตุญูุญุฉ ูุงูุนุซูุฑ ุนูููุง ุจุนุฏ ุญุฏูุซ ุฃู ุนุทู. <br><br><h1 style=";text-align:right;direction:rtl">  ุฅุฌูุงุน ูุงููุง </h1><br>  ุญุชู ุงูุขู ุ ูู ูููุฑ ูู ููููุฉ ูุนุฑูุฉ ุงููุฌููุนุฉ ุจุณููุท ุงููุณูุท ูููู ูุชู ุงุฎุชูุงุฑ ูุงุฆุฏ ุฌุฏูุฏ.  ูููู ููููุฉ ุนูู Kafka ูุน ุฃูุณุงู ุงูุดุจูุฉ ุ ุชุญุชุงุฌ ุฃููุงู ุฅูู ููู ุจููุฉ ุงูุฅุฌูุงุน. <br><br>  ูุชู ูุดุฑ ูู ูุฌููุนุฉ ูู ูุฌููุนุงุช Kafka ูุน ูุธุงู Zookeeper - ุฅููุง ุฎุฏูุฉ ุฅุฌูุงุน ููุฒุนุฉ ุชุณูุญ ูููุธุงู ุจุงูุชูุตู ุฅูู ุฅุฌูุงุน ุจุดุฃู ุญุงูุฉ ูุนููุฉ ูุน ุฅุนุทุงุก ุงูุฃููููุฉ ููุชูุงุณู ุนูู ุงูุชููุฑ.  ุชุชุทูุจ ุงูููุงููุฉ ุนูู ุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ููุงููุฉ ูุนุธู ุนูุฏ Zookeeper. <br><br>  Zookeeper ูุฎุฒู ุญุงูุฉ ุงููุชูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูููุงุถูุน ุ ุงูุฃูุณุงู ุ ุงูุชูููู ุ ุงููุณุฎ ุงููุชูุงุซูุฉ ููุฒุนูู ุงูุญุงูู ุ ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูููุถูุฉ. <br></li><li style=";text-align:right;direction:rtl">  ุฃุนุถุงุก ุงููุชูุฉ.  ูู ูุณูุท ุงูุฃุตูุงุช ูู ูุชูุฉ Zookeeper.  ุฅุฐุง ูู ูุชุณูู ุงูุฃูุฑ ping ููุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ ุ ูุณููุชุจ Zookeeper ุนู ุงููุณูุท ุงูุฐู ูุชุนุฐุฑ ุงููุตูู ุฅููู. <br></li><li style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ ุงูุนูุฏ ุงูุงุจุชุฏุงุฆูุฉ ูุงูุซุงูููุฉ ููุญุฏุฉ ุงูุชุญูู. </li></ul><br>  ุนูุฏุฉ ุงูุชุญูู ูู ูุงุญุฏุฉ ูู ูุณุทุงุก Kafka ุงููุณุคูููู ุนู ุงูุชุฎุงุจ ูุงุฏุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ.  ูุฑุณู Zookeeper ุฅุนูุงูุงุช ูุญุฏุฉ ุงูุชุญูู ูุนุถููุฉ ุงููุชูุฉ ูุชุบููุฑุงุช ุงูููุถูุน ุ ููุฌุจ ุฃู ุชุนูู ูุญุฏุฉ ุงูุชุญูู ููููุง ููุฐู ุงูุชุบููุฑุงุช. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุฎุฐ ููุถูุนูุง ุฌุฏูุฏูุง ูุชููู ูู ุนุดุฑุฉ ุฃูุณุงู ููุนุงูู ูุณุฎ ูุชูุงุซู ูุฏุฑู 3. ูุฌุจ ุฃู ุชุฎุชุงุฑ ูุญุฏุฉ ุงูุชุญูู ูุงุฆุฏ ูู ูุณู ุ ูู ูุญุงููุฉ ูุชูุฒูุน ุงููุงุฏุฉ ุนูู ุงููุญู ุงูุฃูุซู ุจูู ุงููุณุทุงุก. <br><br>  ููู ูุณู ุ ูุญุฏุฉ ุงูุชุญูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ุงููุนูููุงุช ูู Zookeeper ุญูู ISR ูุงููุงุฆุฏ ุ <br></li><li style=";text-align:right;direction:rtl">  ูุฑุณู ุฃูุฑ LeaderAndISRCommand ุฅูู ูู ูุณูุท ูููู ุจูุดุฑ ูุณุฎุฉ ุทุจู ุงูุฃุตู ูู ูุฐุง ุงููุณู ุ ูุฅุจูุงุบ ุงููุณุทุงุก ุนู ISR ูุงูุฒุนูู. </li></ul><br>  ุนูุฏูุง ููุน ูุณูุท ูุน ุฒุนูู ุ ูุฑุณู Zookeeper ุฅุฎุทุงุฑูุง ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ููุฎุชุงุฑ ูุงุฆุฏูุง ุฌุฏูุฏูุง.  ูุฑุฉ ุฃุฎุฑู ุ ูููู ุฌูุงุฒ ุงูุชุญูู ุฃููุงู ุจุชุญุฏูุซ Zookeeper ุ ุซู ูุฑุณู ุฃูุฑูุง ุฅูู ูู ูุณูุท ุ ูุฅุนูุงููู ุจุชุบููุฑ ุงูููุงุฏุฉ. <br><br>  ูู ูุงุฆุฏ ูุณุคูู ุนู ุชุฌููุฏ ISR.  ูุญุฏุฏ <i>ุฅุนุฏุงุฏ replica.lag.time.max.ms ูู</i> ุณูุฐูุจ ุฅูู ููุงู.  ุนูุฏูุง ูุชุบูุฑ ISR ุ ูููู ุงููุงุฆุฏ ุจุชูุฑูุฑ ุงููุนูููุงุช ุงูุฌุฏูุฏุฉ ุฅูู Zookeeper. <br><br>  ูุชู ุฅุจูุงุบ Zookeeper ุฏุงุฆููุง ุจุฃู ุชุบููุฑุงุช ุ ูุฐูู ูู ุญุงูุฉ ุญุฏูุซ ูุดู ุ ุชูุชูู ุงูุฅุฏุงุฑุฉ ุจุณูุงุณุฉ ุฅูู ุงูุฒุนูู ุงูุฌุฏูุฏ. <br><br><img src="https://habrastorage.org/webt/yi/1v/in/yi1vinwmeg4exdiautqohweg8rq.png"><br>  <i><font color="gray">ุงูุชูู.</font></i>  <i><font color="gray">21. ุชูุงูู ูุงููุง</font></i> <br><br><h1 style=";text-align:right;direction:rtl">  ุจุฑูุชูููู ุงููุณุฎ ุงููุชูุงุซู </h1><br>  ูุณุงุนุฏู ููู ุชูุงุตูู ุงููุณุฎ ุงููุชูุงุซู ุนูู ููู ุณููุงุฑูููุงุช ููุฏ ุงูุจูุงูุงุช ุงููุญุชููุฉ ุจุดูู ุฃูุถู. <br><br><h3 style=";text-align:right;direction:rtl">  ุทูุจุงุช ูููุฐุฌ ุ ุฅุฒุงุญุฉ ููุงูุฉ ุงูุณุฌู (LEO) ูุนูุงูุฉ Highwater (HW) </h3><br>  ููุฏ ุงุนุชุจุฑูุง ุฃู ุงููุชุงุจุนูู ูุฑุณููู ุทูุจุงุช ุฌูุจ ุจุดูู ุฏูุฑู ุฅูู ุงููุงุฆุฏ.  ุงููุงุตู ุงูุฒููู ุงูุงูุชุฑุงุถู ูู 500 ูููู ุซุงููุฉ.  ูุฐุง ูุฎุชูู ุนู RabbitMQ ูู ุฃูู ูู RabbitMQ ุ ูุชู ุจุฏุก ุงููุณุฎ ุงููุชูุงุซู ููุณ ุจูุงุณุทุฉ ูุณุฎุฉ ูุชุทุงุจูุฉ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูููู ุจูุงุณุทุฉ ุงููุนุงูุฌ.  ุณูุฏ ูุฏูุน ุงูุชุบููุฑุงุช ุนูู ุงููุฑุงูุง. <br><br>  ูุญุชูุธ ุงูุฒุนูู ูุฌููุน ุงููุชุงุจุนูู ุจุนูุงูุฉ Log End Offset (LEO) ู Highwater (HW).  ุชุฎุฒู ุนูุงูุฉ LEO ุฅุฒุงุญุฉ ุงูุฑุณุงูุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุงููุญููุฉ ุ ูุชููู HW ุจุชุฎุฒูู ุฅุฒุงุญุฉ ุงูุงูุชุฒุงู ุงูุฃุฎูุฑ.  ุชุฐูุฑ ุฃูู ุจุงููุณุจุฉ ูุญุงูุฉ ุงูุงูุชุฒุงู ุ ูุฌุจ ุญูุธ ุงูุฑุณุงูุฉ ูู ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ูู ISR.  ูุฐุง ูุนูู ุฃู LEO ุนุงุฏุฉ ูุง ุชููู ูุชูุฏูุฉ ููููุงู ุนู ุงููุฎููุงุช ุงูุฎุทุฑุฉ. <br><br>  ุนูุฏูุง ูุชููู ุฒุนูู ุฑุณุงูุฉ ุ ูุฅูู ูุญูุธูุง ูุญููุง.  ููุฏู ุงูุชุงุจุน ุทูุจ ุฅุญุถุงุฑ ุ ูููุฑุฑ LEO.  ูููู ุงููุงุฆุฏ ุจุนุฏ ุฐูู ุจุฅุฑุณุงู ุญุฒูุฉ ูู ุงูุฑุณุงุฆู ุงูุชู ุชุจุฏุฃ ุจูุฐุง ุงููุฏุงุฑ ุงูุฃุฑุถู ุงูููุฎูุถ ุ ููุง ูููู ุงูุฎุทุงู ุงูุญุงูู.  ุนูุฏูุง ูุชููู ุงูุฒุนูู ูุนูููุงุช ุชููุฏ ุจุฃู ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ ูุฏ ุญูุธุช ุงูุฑุณุงูุฉ ูู ุฅุฒุงุญุฉ ูุนููุฉ ุ ูุฅูู ูุญุฑู ุนูุงูุฉ ุงูุฎุท.  ูููู ููุฒุนูู ููุท ุชุญุฑูู ุงููุฎููุงุช ุงูุฎุทุฑุฉ ุ ูุจุงูุชุงูู ูุนุฑู ุฌููุน ุงููุชุงุจุนูู ุงููููุฉ ุงูุญุงููุฉ ูู ุงูุฑุฏูุฏ ุนูู ุทูุจูู.  ูุฐุง ูุนูู ุฃู ุงููุชุงุจุนูู ูููููู ุฃู ูุชุฎูููุง ุนู ุงููุงุฆุฏ ูู ูู ูู ุงูุฅุจูุงุบ ููุนุฑูุฉ ุงููุฎููุงุช ุงูุฎุทุฑุฉ.  ูุชููู ุงููุณุชููููู ุงูุฑุณุงุฆู ุญุชู ุงูุญุฏ ุงูุฃูุตู ุงูุญุงูู. <br><br>  ูุงุญุธ ุฃู ูููุฉ "ุงูุฏุงุฆูุฉ" ุชุนูู ุงููุชุงุจุฉ ุฅูู ุงูุฐุงูุฑุฉ ูููุณ ุฅูู ุงููุฑุต.  ููุฃุฏุงุก ุ ูุชุฒุงูู ุชุทุจูู ูุงููุง ูุน ุงููุฑุต ูู ูุงุตู ุฒููู ูุญุฏุฏ.  ูุญุชูู RabbitMQ ุฃูุถูุง ุนูู ูุซู ูุฐุง ุงููุงุตู ุงูุฒููู ุ ูููู ูู ูุฑุณู ุชุฃููุฏูุง ูููุงุดุฑ ุฅูุง ุจุนุฏ ุงููุนูู ููุชุจุช ุฌููุน ุงููุฑุงูุง ุงูุฑุณุงูุฉ ุนูู ุงููุฑุต.  ูุฑุฑ ูุทูุฑู ุดุฑูุฉ Kafka ูุฃุณุจุงุจ ุชุชุนูู ุจุงูุฃุฏุงุก ุฅุฑุณุงู ุฑุณุงูุฉ ุจูุฌุฑุฏ ูุชุงุจุฉ ุงูุฑุณุงูุฉ ุฅูู ุงูุฐุงูุฑุฉ.  ุชุนุชูุฏ ูุงููุง ุนูู ุญูููุฉ ุฃู ุงูุชูุฑุงุฑ ูุนูุถ ุนู ุฎุทุฑ ุงูุชุฎุฒูู ุงููุตูุฑ ุงูุฃุฌู ููุฑุณุงุฆู ุงููุคูุฏุฉ ูู ุงูุฐุงูุฑุฉ ููุท. <br><br><h1 style=";text-align:right;direction:rtl">  ูุดู ุงููุงุฆุฏ </h1><br>  ุนูุฏูุง ูุณูุท ุฒุนูู ุ ูููู Zookeeper ุจุฅุนูุงู ูุญุฏุฉ ุงูุชุญูู ุ ููููู ุจุชุญุฏูุฏ ูุณุฎุฉ ูุชูุงุซูุฉ ุฌุฏูุฏุฉ ููุฒุนูู.  ูุถุน ุงููุงุฆุฏ ุงูุฌุฏูุฏ ุนูุงูุฉ ุฌุฏูุฏุฉ ุนูู ุงููุฎููุงุช ุงูุฎุทุฑุฉ ุชุชูุงุดู ูุน ูุนุฏู ุถุฑุจุงุช ุงูุฃุฑุถ ุงูููุฎูุถ.  ุซู ูุชููู ุงููุชุงุจุนูู ูุนูููุงุช ุนู ุงูุฒุนูู ุงูุฌุฏูุฏ.  ุงุนุชูุงุฏูุง ุนูู ุฅุตุฏุงุฑ Kafka ุ ุณูุฎุชุงุฑ ุงููุชุงุจุน ุฃุญุฏ ุงูุณููุงุฑููููู ุงูุชุงูููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุทุงุน ุงูุณุฌู ุงููุญูู ุฅูู HW ุงูุดููุฑุฉ ูุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุงูุฒุนูู ุงูุฌุฏูุฏ ุจุนุฏ ูุฐู ุงูุนูุงูุฉ. <br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุฑุณู ุทูุจูุง ุฅูู ุงููุงุฆุฏ ูุงูุชุดุงู ุงูุฃุจ ูู ููุช ุงูุชุฎุงุจู ููุงุฆุฏ ุ ุซู ุงูุชุทุงุน ุงูุณุฌู ุฅูู ูุฐุง ุงูุฅุฒุงุญุฉ. </font><font style="vertical-align: inherit;">ุซู ุณุชุจุฏุฃ ูู ุชูุฏูู ุทูุจุงุช ุฏูุฑูุฉ ูุฃุฎุฐ ุงูุนููุงุช ุ ุจุฏุกูุง ูู ูุฐุง ุงูุฅุฒุงุญุฉ.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏ ูุญุชุงุฌ ุงููุชุงุจุน ุฅูู ูุต ุงูุณุฌู ููุฃุณุจุงุจ ุงูุชุงููุฉ: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">    ,     ISR,   Zookeeper,     .    ISR,    ยซยป,          .  ,        . Kafka ,     .  ,   ,         HW      .    ,   <i>acks=all</i>    . <br></li><li style=";text-align:right;direction:rtl">     .      ,        .  ,       ,  ,   ,    ,        . </li></ul><br><h3 style=";text-align:right;direction:rtl">  c  </h3><br>        ,     :          HW (  ).  , RabbitMQ       .        .    ,             ยซ    ยป.            .       . <br><br> Kafka โ   ,       ,   RabbitMQ,        .      .  Kafka โ      ,        .            .    Kafka      HW  (   )   ,     .    ,    ,       ,     LEO. <br><br>        ISR     .      ,    ,  ,         ISR.          . <br><br><h1 style=";text-align:right;direction:rtl">   </h1><br>  Kafka  ,   RabbitMQ,      ,     .  Kafka    ,      . <br><br>      : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  1.    ,     Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  2.      ,     Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  3.   ,    Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  4.   ,    Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  5.        Kafka,   Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  6.        Kafka,   Zookeeper. <br></li><li style=";text-align:right;direction:rtl">  7.   Kafka     Kafka. <br></li><li style=";text-align:right;direction:rtl">  8.  Kafka   Zookeeper. </li></ul><br>      . <br><br><h3 style=";text-align:right;direction:rtl">  1.    ,     Zookeeper </h3><br><img src="https://habrastorage.org/webt/je/cd/f1/jecdf1kc9y8gc8ej5sfmuelo30a.png"><br> <i><font color="gray">. 22.  1. ISR   </font></i> <br><br>     3   1  2,    Zookeeper.  3       .    <i>replica.lag.time.max.ms</i>    ISR      .    ,         ISR,   . Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/ir/tq/ir/irtqir6cr8whigmvfqo1t-bbsso.png"><br> <i><font color="gray">. 23.  1.    ISR,            replica.lag.time.max.ms</font></i> <br><br>     (split-brain)   ,   RabbitMQ.    . <br><br><h3 style=";text-align:right;direction:rtl">  2.      ,     Zookeeper </h3><br><img src="https://habrastorage.org/webt/ri/fy/q6/rifyq652am8lmbhlgpfvfq-pjnm.png"><br> <i><font color="gray">. 24.  2.    </font></i> <br><br>       ,      Zookeeper.     , ISR ,       ,        .  ,    .        ,    . Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/hj/8g/-1/hj8g-1veu8rkisccp7t6c9bxq7k.png"><br> <i><font color="gray">. 25.  2. ISR    </font></i> <br><br><h3 style=";text-align:right;direction:rtl">  3.   ,    Zookeeper </h3><br>    Zookeeper,      .           ISR. Zookeeper        ,     ,     . <br><br><img src="https://habrastorage.org/webt/cv/tb/gj/cvtbgjgw7ub1w8dmii46aql3bhc.png"><br> <i><font color="gray">. 26.  3.       </font></i> <br><br><h3 style=";text-align:right;direction:rtl">  4.   ,    Zookeeper </h3><br><img src="https://habrastorage.org/webt/zw/k4/8o/zwk48obscffldqgdhpyl0dvvipc.png"><br> <i><font color="gray">. 27.  4.    </font></i> <br><br>    Zookeeper,      . <br><br><img src="https://habrastorage.org/webt/eh/s1/hx/ehs1hxu4sako2udflhmhhbqhtsu.png"><br> <i><font color="gray">. 28.  4.    Zookeeper</font></i> <br><br>    Zookeeper        .      .      ,           <i>acks=1</i> .        ,         ISR   .        Zookeeper,     ,         . <br><br>  <i>acks=all</i>   ,    ISR   ,      .        ISR,          - . <br><br>            .    ,   ,     ,       HW,        ,    .         .     ,    .     ,        ,    . <br><br><img src="https://habrastorage.org/webt/pt/z_/pn/ptz_pnhoyrwvw4v-l9re3ffjzcg.png"><br> <i><font color="gray">. 29.  4.    1     </font></i> <br><br><h3 style=";text-align:right;direction:rtl">  5.        Kafka,   Zookeeper </h3><br>        Kafka,   Zookeeper.     ISR,    ,    . <br><br><img src="https://habrastorage.org/webt/ik/aj/a1/ikaja1i4z3fnodbcmam8sp2jbjc.png"><br> <i><font color="gray">. 30.  5.     ISR</font></i> <br><br><h3 style=";text-align:right;direction:rtl">  6.        Kafka,   Zookeeper </h3><br><img src="https://habrastorage.org/webt/cz/5h/2m/cz5h2mnqelpalxozp-jv4yv23rc.png"><br> <i><font color="gray">. 31.  6.    </font></i> <br><br>      ,   Zookeeper.          <i>acks=1</i> . <br><br><img src="https://habrastorage.org/webt/pj/pi/vj/pjpivjf1bsnvowntmkjqxdzipfe.png"><br> <i><font color="gray">. 32.  6.      Kafka  Zookeeper</font></i> <br><br>      <i>replica.lag.time.max.ms</i> ,    ISR   ,     ,     Zookeeper,     . <br><br>  , Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/g8/rg/wo/g8rgwol3elzkz8dwxojtclogyns.png"><br> <i><font color="gray">. 33.  6.  </font></i> <br><br>         ,      .    60    .            . <br><br><img src="https://habrastorage.org/webt/zu/zl/dh/zuzldhf62qbynz_voxil-25roxe.png"><br> <i><font color="gray">. 34.  6.     </font></i> <br><br>     ,       .    ,    Zookeeper ,     .      HW           . <br><br><img src="https://habrastorage.org/webt/zj/5e/vd/zj5evdyqhphl9uupogfvbjx7zjk.png"><br> <i><font color="gray">. 35.  6.        </font></i> <br><br>           ,    <i>acks=1</i>  <i>min.insync.replicas</i>  1.        ,    ,     ,     ,         โ    ,   .       ,    <i>acks=1</i> . <br><br>     ,       ,    ISR   .    -  .   ,      ,  <i>acks=all</i> ,    ISR    .       .      โ <i>min.insync.replicas = 2</i> . <br><br><h3 style=";text-align:right;direction:rtl">  7.   Kafka     Kafka </h3><br>  ,      Kafka          .         ,    6.             . <br><br><h3 style=";text-align:right;direction:rtl">  8.  Kafka   Zookeeper </h3><br>    Zookeeper         Kafka.       ,       Zookeeper,         .    ,  ,     ,     Kafka. <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>  ,         ,     ,    . , ,     ,      . <br><br>  -      Zookeeper,        <i>acks=1</i> .    Zookeeper       .     <i>acks=all</i> . <br><br>  <i>min.insync.replicas</i>        ,         ,    6. <br><br><h1 style=";text-align:right;direction:rtl">     </h1><br>   ,      Kafka: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   ,      <i>acks=1</i> <br></li><li style=";text-align:right;direction:rtl">   (unclean)  ,       ISR,   <i>acks=all</i> <br></li><li style=";text-align:right;direction:rtl">    Zookeeper,      <i>acks=1</i> <br></li><li style=";text-align:right;direction:rtl">   ,     ISR   .    ,  <i>acks=all</i> .      ,  <i>min.insync.replicas=1</i> . <br></li><li style=";text-align:right;direction:rtl">     .     ,       .        . </li></ul><br>     ,   ,      .    โ   <i>acks=all</i>  <i>min.insync.replicas</i>  1. <br><br><h1 style=";text-align:right;direction:rtl">    RabbitMQ  Kafka </h1><br>              .   RabbitMQ   .        ,   .           RabbitMQ.       ,    .       .    ,         ( )       . <br><br>  Kafka   .          .    .  ,    .    ,     ,           . , -  ,       .     ,      . <br><br> RabbitMQ  Kafka         .    , RabbitMQ              .        : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fsync ูู ุจุถุน ูุฆุงุช ูู ุงููููู ุซุงููุฉ </font></font><br></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุงูุชุดุงู ุงููุฑุงูุง ุฅูุง ุจุนุฏ ุนูุฑ ุงูุญุฒู ุงูุชู ุชุชุญูู ูู ุชููุฑ ูู ุนูุฏุฉ (ุนูุงูุฉ ุงูุชุฌุฒุฆุฉ). </font><font style="vertical-align: inherit;">ุฅุฐุง ุชุจุงุทุฃุช ุงููุฑุขุฉ ุฃู ุณูุทุช ุ ููุฐุง ูุถูู ุชุฃุฎูุฑูุง.</font></font></li></ul><br>  ูุนุชูุฏ ูุงููุง ุนูู ุญูููุฉ ุฃูู ุฅุฐุง ุชู ุชุฎุฒูู ุงูุฑุณุงูุฉ ุนูู ุนุฏุฉ ุนูุฏ ุ ูููููู ุชุฃููุฏ ุงูุฑุณุงุฆู ุจูุฌุฑุฏ ูุฌูุฏูุง ูู ุงูุฐุงูุฑุฉ.  ููุฐุง ุงูุณุจุจ ุ ููุงู ุฎุทุฑ ููุฏุงู ุงูุฑุณุงุฆู ูู ุฃู ููุน (ุญุชู <i>acks = ุงููู</i> ุ <i>min.insync.replies = 2</i> ) ูู ุญุงูุฉ ุญุฏูุซ ูุดู ูู ููุช ูุงุญุฏ. <br><br>  ุจุดูู ุนุงู ุ ููุธูุฑ Kafka ุฃุฏุงุกู ุฃูุถู ููุฏ ุชู ุชุตูููู ูู ุงูุฃุตู ูููุฌููุนุงุช.  ูููู ุฒูุงุฏุฉ ุนุฏุฏ ุงููุชุงุจุนูู ุฅูู 11 ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ููููุซูููุฉ.  ุนุงูู ุงููุณุฎ ุงููุชูุงุซู 5 ูุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงููุณุฎ ุงููุชูุงุซูุฉ ูู ุญุงูุฉ ูุชุฒุงููุฉ ูู <i>min.insync.replicas = 3</i> ุณูุฌุนู ููุฏุงู ุงูุฑุณุงูุฉ ุญุฏุซูุง ูุงุฏุฑูุง ููุบุงูุฉ.  ุฅุฐุง ูุงูุช ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ูุฏูู ูุงุฏุฑุฉ ุนูู ุชูููุฑ ูุนุฏู ุงููุณุฎ ุงููุชูุงุซู ูุฐุง ููุณุชูู ุงูุชูุฑุงุฑ ุ ูููููู ุงุฎุชูุงุฑ ูุฐุง ุงูุฎูุงุฑ. <br><br>  ูุฌููุนุงุช RabbitMQ ุฌูุฏุฉ ูููุงุฆู ุงูุงูุชุธุงุฑ ุงูุตุบูุฑุฉ.  ูููู ุญุชู ุงูุทูุงุจูุฑ ุงูุตุบูุฑุฉ ูููู ุฃู ุชููู ุจุณุฑุนุฉ ูุน ุญุฑูุฉ ุงููุฑูุฑ ุงูุนุงููุฉ.  ุจูุฌุฑุฏ ุฃู ุชุตุจุญ ููุงุฆู ุงูุงูุชุธุงุฑ ูุจูุฑุฉ ุ ูุฌุจ ุนููู ุงุชุฎุงุฐ ุฎูุงุฑ ุตุนุจ ุจูู ุงูุชููุฑ ูุงูููุซูููุฉ.  ุชุนุชุจุฑ ูุฌููุนุงุช RabbitMQ ููุงุณุจุฉ ุชูุงููุง ููููุงูู ุบูุฑ ุงูุชูููุฏูุฉ ุญูุซ ุชููู ูุฒุงูุง ูุฑููุฉ RabbitMQ ุฃููุง ูู ุนููุจ ุชุฌููุนูุง. <br><br>  ุฃุญุฏ ุงูุชุฑูุงู ูุถุนู ูุงุฆูุฉ ุงูุชุธุงุฑ RabbitMQ ูู ุชูุณูููุง ุฅูู ุงูุนุฏูุฏ ูู ุงูุฃุตุบุฑ ูููุง.  ุฅุฐุง ููุช ูุง ุชุญุชุงุฌ ุฅูู ุชุฑุชูุจ ูุงูู ููุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุงููุงูู ุ ูููู ููุท ุงูุฑุณุงุฆู ุฐุงุช ุงูุตูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุฑุณุงุฆู ุนููู ูุนูู) ุ ุฃู ูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทูุจ</a> ุฃู ุดูุก ุนูู ุงูุฅุทูุงู ุ ูุฅู ูุฐุง ุงูุฎูุงุฑ ููุจูู: ุงูุธุฑ ุฅูู ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Rebalanser</a> ุงูุฎุงุต ุจู ูุชูุณูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ (ูุง ูุฒุงู ุงููุดุฑูุน ูู ูุฑุญูุฉ ูุจูุฑุฉ). <br><br>  ุฃุฎูุฑูุง ุ ูุง ุชูุณู ุนุฏุฏูุง ูู ุงูุฃุฎุทุงุก ูู ุขููุงุช ุงูุชุฌููุน ูุงูุชูุฑุงุฑ ููู ูู RabbitMQ ู Kafka.  ุจูุฑูุฑ ุงูููุช ุ ุฃุตุจุญุช ุงูุฃูุธูุฉ ุฃูุซุฑ ูุถุฌูุง ูุงุณุชูุฑุงุฑูุง ุ ูููู ูู ูุชู ุญูุงูุฉ ุฑุณุงูุฉ ูุงุญุฏุฉ ุฃุจุฏูุง ุจูุณุจุฉ 100ูช ูู ุงูุถูุงุน!  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุฏุซ ุญูุงุฏุซ ูุงุณุนุฉ ุงููุทุงู ูู ูุฑุงูุฒ ุงูุจูุงูุงุช! <br><br>  ุฅุฐุง ูุงุชูู ุดูุก ุฃู ุงุฑุชูุจุช ุฎุทุฃ ุฃู ููุช ูุง ุชูุงูู ุนูู ุฃู ูู ุงูููุงุท ุ ููุง ุชุชุฑุฏุฏ ูู ูุชุงุจุฉ ุชุนููู ุฃู ุงูุงุชุตุงู ุจู. <br><br>  ุบุงูุจูุง ูุง ูุณุฃููู ุงููุงุณ: "ูุงุฐุง ุชุฎุชุงุฑ ุ ูุงููุง ุฃู ุฑุงุจูุช ุฃู ูููุ" ุ "ูุง ูู ุงูููุตุฉ ุงูุฃูุถูุ".  ุงูุญูููุฉ ูู ุฃู ุงูุฃูุฑ ูุนุชูุฏ ุญููุง ุนูู ููููู ุ ูุชุฌุฑุจุชู ุงูุญุงููุฉ ุ ููุง ุฅูู ุฐูู. ูุง ุฃุฌุฑุค ุนูู ุงูุชุนุจูุฑ ุนู ุฑุฃูู ุ ูุฃูู ุณูููู ูู ุงูุชุจุณูุท ุงูููุฑุท ุงูุชูุตูุฉ ุจุฃูุฉ ููุตุฉ ูุงุญุฏุฉ ูุฌููุน ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ูุงููููุฏ ุงููุญุชููุฉ.  ูุชุจุช ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช ุญุชู ุชุชููู ูู ุชูููู ุฑุฃูู. <br><br>  ุฃุฑูุฏ ุฃู ุฃููู ุฅู ููุง ุงููุธุงููู ูุงุฏุฉ ูู ูุฐุง ุงููุฌุงู.  ุฑุจูุง ุฃููู ูุชุญูุฒูุง ุจุนุถ ุงูุดูุก ุ ูุฃูู ูู ุฎูุงู ุชุฌุฑุจุฉ ูุดุงุฑูุนู ุ ุฃููู ุฃูุซุฑ ุฅูู ุชูุฏูุฑ ุฃุดูุงุก ูุซู ุชุฑุชูุจ ุงูุฑุณุงุฆู ุงููุถูููุฉ ูุงูููุซูููุฉ. <br><br>  ุฃุฑู ุงูุชูููุงุช ุงูุฃุฎุฑู ุงูุชู ุชูุชูุฑ ุฅูู ูุฐู ุงูููุซูููุฉ ูุงูุทูุจ ุงููุถููู ุ ุซู ุงูุธุฑ ุฅูู RabbitMQ ู Kafka - ูุฃูุง ุฃููู ุงููููุฉ ุงููุฐููุฉ ููู ูู ูุฐูู ุงููุธุงููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar474984/">https://habr.com/ru/post/ar474984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar474968/index.html">RxDart ูุฃุตุบุฑ ... ุงููุดุงุฑูุน</a></li>
<li><a href="../ar474970/index.html">ููููุฉ ูุชุงุจุฉ ุนูุฏ ุฐูู ูุน ุจูุซูู ุนูู ุงูุฃูุทูููุฌูุงุ ุงูุฌุฒุก 5: API ุงูุฃุตูู</a></li>
<li><a href="../ar474976/index.html">ุงูููุงุฑุจ ุงููุฏููุฉ: ููู ุงูุจูุฏููุฉ ููุฌูุฏุฉ ุจุฏูู ุณูุงุฑุงุช</a></li>
<li><a href="../ar474978/index.html">IBM Watson ุงูุชุนุฑู ุงูุจุตุฑู: ุงูุชุนุฑู ุนูู ุงููุงุฆูุงุช ูุชุงุญ ุงูุขู ูู IBM Cloud</a></li>
<li><a href="../ar474982/index.html">JavaFX ุงูุจุฑูุงูุฌ ุงูุชุนูููู: FXML ู SceneBuilder</a></li>
<li><a href="../ar474988/index.html">ูุฑุญุจูุง ุจูู ูู Mitap: ูุธุงุฆู ูู ุนูู ุงูุจูุงูุงุช ูููุจุชุฏุฆูู</a></li>
<li><a href="../ar474990/index.html">ุงูููุงุฑุณุฉ ุงูุตุนุจุฉ: ููููุฉ ุฅูุดุงุก ุดุจูุฉ Wi-Fi ูู ุญุฏููุฉ ุงููุฏููุฉ</a></li>
<li><a href="../ar474992/index.html">ุชุญููู ุจุทุงุฑูุงุช ุฎูู ุงูููุจููุชุฑ ุงููุญููู. ููุงุญุธุงุช ุงูุณุงุฆู ุงูููุฑุจุงุฆูุฉ</a></li>
<li><a href="../ar474994/index.html">ููููุฉ ูุทุน ูุชุฑุงุตุฉ ูู ุงูุฎุฏูุงุช ูุงูุญูุงุธ ุนูู ุฃุฏุงุก ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช ูู ุงูุฐุงูุฑุฉ ุฏูู ููุฏุงู ุงูุงุชุณุงู</a></li>
<li><a href="../ar474996/index.html">ููุฎุต ุฃุญุฏุงุซ ุชูููููุฌูุง ุงููุนูููุงุช ูู ููููุจุฑ (ุงูุฌุฒุก ุงูุซุงูู)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>