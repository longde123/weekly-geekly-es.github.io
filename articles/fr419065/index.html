<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏üèª üë©üèø‚Äç‚öïÔ∏è ‚ûñ Monde virtuel Intel. Pratique üë®‚Äçüîß üëç üõÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je souhaite examiner les aspects pratiques de la cr√©ation d'un hyperviseur simple bas√© sur la technologie de virtualisation mat√©riel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monde virtuel Intel. Pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419065/">  Dans cet article, je souhaite examiner les aspects pratiques de la cr√©ation d'un hyperviseur <u>simple</u> bas√© sur la technologie de virtualisation mat√©rielle Intel VMX. <br><br>  La virtualisation mat√©rielle est un domaine assez √©troitement sp√©cialis√© de la programmation syst√®me et n'a pas une grande communaut√©, en Russie √† coup s√ªr.  J'esp√®re que le contenu de l'article aidera ceux qui veulent d√©couvrir la virtualisation mat√©rielle et les possibilit√©s qu'elle offre.  Comme dit au d√©but, je veux consid√©rer uniquement l'aspect pratique sans plonger dans la th√©orie, donc on suppose que le lecteur est familier avec l'architecture x86-64 et a au moins une id√©e g√©n√©rale des m√©canismes VMX.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources de l'article</a> . <br><br>  Commen√ßons par fixer des objectifs pour l'hyperviseur: <br><a name="habracut"></a><br><ol><li>  En cours d'ex√©cution avant de charger le syst√®me d'exploitation invit√© </li><li>  Prise en charge d'un processeur logique et de 4 Go de m√©moire physique invit√©e </li><li>  S'assurer que le syst√®me d'exploitation invit√© fonctionne correctement avec les appareils projet√©s dans la zone de m√©moire physique </li><li>  Traitement VMexits </li><li>  Le syst√®me d'exploitation invit√© des premi√®res commandes doit s'ex√©cuter dans un environnement virtuel. </li><li>  Sortie des informations de d√©bogage via le port COM (m√©thode universelle, facile √† impl√©menter) </li></ol><br>  En tant qu'OS invit√©, j'ai choisi Windows 7 x32, dans lequel les restrictions suivantes ont √©t√© d√©finies: <br><br><ul><li>  Un seul c≈ìur de processeur est impliqu√© </li><li>  L'option PAE est d√©sactiv√©e, ce qui permet √† un syst√®me d'exploitation 32 bits d'utiliser la quantit√© de m√©moire physique sup√©rieure √† 4 Go. </li><li>  BIOS en mode h√©rit√©, UEFI d√©sactiv√© </li></ul><br><h3>  Description du chargeur de d√©marrage </h3><br>  Pour que l'hyperviseur d√©marre au d√©marrage du PC, j'ai choisi le moyen le plus simple, √† savoir, j'ai not√© mon chargeur de d√©marrage dans le secteur MBR du disque sur lequel l'OS invit√© est install√©.  Il √©tait √©galement n√©cessaire de placer le code de l'hyperviseur quelque part sur le disque.  Dans mon cas, le MBR d'origine lit le chargeur de d√©marrage √† partir du secteur 2048, ce qui donne une zone libre conditionnelle pour l'√©criture √† (2047 * 512) Ko.  C'est plus que suffisant pour accueillir tous les composants d'un hyperviseur. <br><br>  Ci-dessous se trouve la disposition de l'hyperviseur sur le disque, toutes les valeurs sont d√©finies en secteurs. <br><br><img src="https://habrastorage.org/webt/ek/tv/_z/ektv_zcfq5gcq4bslygiyc2lbqc.jpeg"><br><br>  Le processus de t√©l√©chargement est le suivant: <br><br><img src="https://habrastorage.org/webt/ba/ej/ae/baejaecukny9u7mi6b8udh9crfo.jpeg"><br><ol><li>  loader.mbr lit le code du chargeur loader.main √† partir du disque et lui transf√®re le contr√¥le. </li><li>  loader.main bascule en mode long, puis lit le tableau des √©l√©ments loader.table charg√©s, en fonction du chargement ult√©rieur des composants de l'hyperviseur en m√©moire. </li><li>  Une fois que le chargeur de d√©marrage a fini de travailler dans la m√©moire physique √† l'adresse 0x100000000, il existe un code d'hyperviseur, cette adresse a √©t√© choisie pour que la plage de 0 √† 0xFFFFFFFF puisse √™tre utilis√©e pour le mappage direct avec la m√©moire physique de l'invit√©. </li><li>  Le mbr Windows d'origine d√©marre √† l'adresse physique 0x7C00. </li></ol><br>  Je veux attirer l'attention sur le fait que le chargeur de d√©marrage apr√®s avoir bascul√© en mode long ne peut plus utiliser les services du BIOS pour travailler avec des disques physiques, j'ai donc utilis√© l '"interface de contr√¥leur h√¥te avanc√©" pour lire le disque. <br><br>  Plus de d√©tails sur ce qui peut √™tre trouv√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Description du travail de l'hyperviseur </h3><br>  Une fois que l'hyperviseur a re√ßu le contr√¥le, sa premi√®re t√¢che consiste √† initialiser l'environnement dans lequel il doit fonctionner, pour ce faire, les fonctions sont appel√©es s√©quentiellement: <br><br><ul><li>  <b>InitLongModeGdt ()</b> - cr√©e et charge une table de 4 descripteurs: NULL, CS64, DS64, TSS64 </li><li>  <b>InitLongModeIdt (isr_vector)</b> - initialise les 32 premiers vecteurs d'interruption par un gestionnaire commun, ou plut√¥t, son stub <br></li><li>  <b>InitLongModeTSS ()</b> - initialise le segment d'√©tat de la t√¢che </li><li>  <b>InitLongModePages ()</b> - initialisation de la pagination: <br><br>  [0x00000000 - 0xFFFFFFFF] - taille de page 2 Mo, d√©sactivation du cache; <br>  [0x100000000 - 0x13FFFFFFF] - taille de page 2 Mo, r√©√©criture du cache, pages globales; <br>  [0x140000000 - n] - non pr√©sent; </li><li>  <b>InitControlAndSegmenRegs ()</b> - recharger les registres de segments </li></ul><br>  Ensuite, vous devez vous assurer que le processeur prend en charge VMX, la v√©rification est effectu√©e par la fonction <b>CheckVMXConditions ()</b> : <br><br><ul><li>  CPUID.1: ECX.VMX [bit 5] doit √™tre d√©fini sur 1 </li><li>  Dans le registre MSR IA32_FEATURE_CONTROL, le bit 2 doit √™tre d√©fini - active VMXON en dehors du fonctionnement SMX et le bit 0 - Lock (pertinent lors du d√©bogage dans Bochs) </li></ul><br>  Si tout est en ordre et que l'hyperviseur fonctionne sur un processeur prenant en charge la virtualisation mat√©rielle, passez √† l'initialisation initiale de VMX, voir la fonction <b>InitVMX ()</b> : <br><br><ul><li>  Cr√©ation de zones de m√©moire VMXON et VMCS (structures de donn√©es de contr√¥le de machine virtuelle) de 4096 octets.  L'identifiant de r√©vision VMCS extrait de MSR IA32_VMX_BASIC est enregistr√© dans les 31 premiers bits de chaque zone. </li><li>  Il est v√©rifi√© que dans les registres syst√®me CR0 et CR4, tous les bits sont d√©finis conform√©ment aux exigences de VMX. </li><li>  Le processeur logique est mis en mode racine vmx par la commande VMXON (l'adresse physique de la r√©gion VMXON comme argument). </li><li>  La commande VMCLEAR (VMCS) d√©finit l'√©tat de lancement de VMCS sur Clear, et la commande d√©finit des valeurs sp√©cifiques √† l'impl√©mentation sur VMCS. </li><li>  La commande VMPTRLD (VMCS) charge l'adresse VMCS actuelle pass√©e en argument dans le pointeur current-VMCS. </li></ul><br>  L'ex√©cution de l'OS invit√© commencera en mode r√©el √† partir de l'adresse 0x7C00 √† laquelle, comme nous le rappelons, le chargeur loader.main place win7.mbr.  Afin de recr√©er un environnement virtuel identique √† celui dans lequel mbr est g√©n√©ralement ex√©cut√©, la fonction <b>InitGuestRegisterState ()</b> est <b>appel√©e,</b> ce qui d√©finit les registres vmx non root comme suit: <br><br><pre><code class="hljs pgsql">CR0 = <span class="hljs-number"><span class="hljs-number">0x10</span></span> CR3 = <span class="hljs-number"><span class="hljs-number">0</span></span> CR4 = <span class="hljs-number"><span class="hljs-number">0</span></span> DR7 = <span class="hljs-number"><span class="hljs-number">0</span></span> RSP = <span class="hljs-number"><span class="hljs-number">0xFFD6</span></span> RIP = <span class="hljs-number"><span class="hljs-number">0x7C00</span></span> RFLAGS = <span class="hljs-number"><span class="hljs-number">0x82</span></span> ES.base = <span class="hljs-number"><span class="hljs-number">0</span></span> CS.base = <span class="hljs-number"><span class="hljs-number">0</span></span> SS.base = <span class="hljs-number"><span class="hljs-number">0</span></span> DS.base = <span class="hljs-number"><span class="hljs-number">0</span></span> FS.base = <span class="hljs-number"><span class="hljs-number">0</span></span> GS.base = <span class="hljs-number"><span class="hljs-number">0</span></span> LDTR.base = <span class="hljs-number"><span class="hljs-number">0</span></span> TR.base = <span class="hljs-number"><span class="hljs-number">0</span></span> ES.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span> CS.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> SS.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> DS.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span> FS.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> GS.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> LDTR.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> TR.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFF</span></span> ES.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0xF093</span></span> CS.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x93</span></span> SS.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x93</span></span> DS.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0xF093</span></span> FS.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x93</span></span> GS.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x93</span></span> LDTR.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x82</span></span> TR.<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> rights = <span class="hljs-number"><span class="hljs-number">0x8B</span></span> ES.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> CS.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> SS.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> DS.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> FS.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> GS.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> LDTR.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> TR.selector = <span class="hljs-number"><span class="hljs-number">0</span></span> GDTR.base = <span class="hljs-number"><span class="hljs-number">0</span></span> IDTR.base = <span class="hljs-number"><span class="hljs-number">0</span></span> GDTR.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> IDTR.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> = <span class="hljs-number"><span class="hljs-number">0x3FF</span></span></code> </pre> <br>  Il convient de noter que le champ limite du cache de descripteur pour les registres de segments DS et ES est 0xFFFFFFFF.  Ceci est un exemple d'utilisation du mode irr√©el - une fonctionnalit√© de processeur x86 qui vous permet de contourner la limite de segment en mode r√©el.  Vous pouvez en savoir plus √† ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  En mode non root vmx, le syst√®me d'exploitation invit√© peut rencontrer une situation dans laquelle il est n√©cessaire de retourner le contr√¥le √† l'h√¥te en mode root vmx.  Dans ce cas, une sortie de machine virtuelle se produit pendant laquelle l'√©tat actuel de vmx non root est enregistr√© et vmx-root est charg√©.  L'initialisation de vmx-root est effectu√©e par la fonction <b>InitHostStateArea ()</b> , qui d√©finit la valeur suivante des registres: <br><br><pre> <code class="hljs cs">CR0 = <span class="hljs-number"><span class="hljs-number">0x80000039</span></span> CR3 = PML4_addr CR4 = <span class="hljs-number"><span class="hljs-number">0x420A1</span></span> RSP =     STACK64 RIP =   VMEXIT_handler ES.selector = <span class="hljs-number"><span class="hljs-number">0x10</span></span> CS.selector = <span class="hljs-number"><span class="hljs-number">0x08</span></span> SS.selector = <span class="hljs-number"><span class="hljs-number">0x10</span></span> DS.selector = <span class="hljs-number"><span class="hljs-number">0x10</span></span> FS.selector = <span class="hljs-number"><span class="hljs-number">0x10</span></span> GS.selector = <span class="hljs-number"><span class="hljs-number">0x10</span></span> TR.selector = <span class="hljs-number"><span class="hljs-number">0x18</span></span> TR.<span class="hljs-keyword"><span class="hljs-keyword">base</span></span> =  TSS GDTR.<span class="hljs-keyword"><span class="hljs-keyword">base</span></span> =  GDT64 IDTR.<span class="hljs-keyword"><span class="hljs-keyword">base</span></span> =  IDTR</code> </pre> <br>  Ensuite, la cr√©ation de l'espace d'adressage physique invit√© est <b>effectu√©e (fonction InitEPT ()</b> ).  C'est l'un des moments les plus importants lors de la cr√©ation d'un hyperviseur, car une taille ou un type incorrectement d√©fini sur l'un des emplacements de m√©moire peut entra√Æner des erreurs qui peuvent ne pas se manifester imm√©diatement, mais avec une probabilit√© √©lev√©e, cela entra√Ænera des freins ou des gels inattendus du syst√®me d'exploitation invit√©.  En g√©n√©ral, il y a peu d'agr√©ment ici et il vaut mieux faire assez attention au r√©glage de la m√©moire. <br><br>  L'image suivante montre le mod√®le d'espace d'adressage physique invit√©: <br><br><img src="https://habrastorage.org/webt/lm/7b/ll/lm7bllv6hrh9kjv4aoopbzapz1q.jpeg"><br><br>  Donc ce que nous voyons ici: <br><br><ul><li>  [0 - 0xFFFFFFFF] toute la plage de l'espace d'adressage invit√©.  Type par d√©faut: r√©√©crire </li><li>  [0xA0000 - 0xBFFFFF] - RAM vid√©o.  Type: non amovible </li><li>  [0xBA647000 - 0xFFFFFFFF] - RAM des p√©riph√©riques.  Type: non amovible </li><li>  [0x0000000 - 0xCFFFFFFF] - RAM vid√©o.  Type: √©criture combinant </li><li>  [0xD0000000 - 0xD1FFFFFF] - RAM vid√©o.  Type: √©criture combinant </li><li>  [0xFA000000 - 0xFAFFFFFF] - RAM vid√©o.  Type: √©criture combinant </li></ul><br>  J'ai pris les informations pour cr√©er ces zones √† partir de l'utilitaire RAMMap (onglet Plages physiques). J'ai √©galement utilis√© les donn√©es du Gestionnaire de p√©riph√©riques Windows.  Bien s√ªr, sur un autre PC, les plages d'adresses sont susceptibles de diff√©rer.  Quant au type de m√©moire invit√©, dans mon impl√©mentation, le type est d√©termin√© uniquement par la valeur sp√©cifi√©e dans les tables EPT.  C'est simple, mais pas tout √† fait correct, et en g√©n√©ral le type de m√©moire que l'OS invit√© veut installer dans son adressage de page doit √™tre pris en compte. <br><br>  Une fois la cr√©ation de l'espace d'adressage invit√© termin√©e, vous pouvez passer aux <b>param√®tres du</b> champ de contr√¥le VM Execution <b>(</b> fonction <b>InitExecutionControlFields ()</b> ).  Il s'agit d'un ensemble d'options assez large qui vous permet de d√©finir les conditions de fonctionnement du syst√®me d'exploitation invit√© en mode non root vmx.  Vous pouvez, par exemple, suivre les appels vers les ports d'entr√©e / sortie ou surveiller les changements dans les registres MSR.  Mais dans notre cas, je n'utilise que la possibilit√© de contr√¥ler le r√©glage de certains bits dans le registre CR0.  Le fait est que 30 (CD) et 29 (NW) bits sont communs aux modes vmx non root et vmx root, et si le syst√®me d'exploitation invit√© d√©finit ces bits √† 1, cela affectera n√©gativement les performances. <br><br>  Le processus de configuration de l'hyperviseur est presque termin√©, il ne reste plus qu'√† √©tablir le contr√¥le de la transition vers le mode invit√© vmx non root et revenir au mode h√¥te vmx root.  Les param√®tres sont d√©finis dans les fonctions: <br><br>  <b>Param√®tres InitVMEntryControl ()</b> pour la transition vers vmx non root: <br><br><ul><li>  Charger l'invit√© IA32_EFER </li><li>  Charger l'invit√© IA32_PAT </li><li>  Charger les MSR invit√©s (IA32_MTRR_PHYSBASE0, IA32_MTRR_PHYSMASK0, IA32_MTRR_DEF_TYPE) </li></ul><br>  <b>Param√®tres InitVMExitControl ()</b> pour passer √† la racine vmx: <br><br><ul><li>  Charger l'h√¥te IA32_EFER; </li><li>  Enregistrer l'invit√© IA32_EFER; </li><li>  Charger l'h√¥te IA32_PAT; </li><li>  Enregistrer l'invit√© IA32_PAT; </li><li>  Host.CS.L = 1, Host.IA32_EFER.LME = 1, Host.IA32_EFER.LMA = 1; </li><li>  Enregistrer les MSR invit√©s (IA32_MTRR_PHYSBASE0, IA32_MTRR_PHYSMASK0, IA32_MTRR_DEF_TYPE); </li><li>  Charger les MSR de l'h√¥te (IA32_MTRR_PHYSBASE0, IA32_MTRR_PHYSMASK0, IA32_MTRR_DEF_TYPE); </li></ul><br>  Maintenant que tous les param√®tres sont termin√©s, la fonction <b>VMLaunch () met le</b> processeur en mode non root vmx et le syst√®me d'exploitation invit√© commence √† s'ex√©cuter.  Comme je l'ai mentionn√© pr√©c√©demment, les conditions peuvent √™tre d√©finies dans les param√®tres de contr√¥le d'ex√©cution vm, auquel cas l'hyperviseur retournera le contr√¥le √† lui-m√™me en mode racine vmx.  Dans mon exemple simple, je donne au syst√®me d'exploitation invit√© une totale libert√© d'action, cependant, dans certains cas, l'hyperviseur devra encore intervenir et ajuster le syst√®me d'exploitation. <br><br><ol><li>  Si le syst√®me d'exploitation invit√© essaie de modifier les bits CD et NW dans le registre CR0, le gestionnaire de sortie VM <br>  corrige les donn√©es enregistr√©es dans CR0.  Le champ fant√¥me de lecture CR0 est √©galement modifi√© de sorte que lors de la lecture de CR0, le syst√®me d'exploitation invit√© re√ßoive la valeur enregistr√©e. </li><li>  Ex√©cution de la commande xsetbv.  Cette commande appelle toujours VM Exit, quels que soient les param√®tres, je viens donc d'ajouter son ex√©cution en mode racine vmx. </li><li>  Ex√©cution de la commande cupidon.  Cette commande appelle √©galement une sortie de machine virtuelle inconditionnelle.  Mais j'ai apport√© une petite modification √† son gestionnaire.  Si les valeurs dans l'argument eax sont 0x80000002 - 0x80000004, cpuid renverra non pas le nom de la marque du processeur, mais la ligne: <i>VMX Study Core :)</i> Le r√©sultat peut √™tre vu dans la capture d'√©cran: </li></ol><br><img src="https://habrastorage.org/webt/gx/br/cg/gxbrcgcfoiara6ivchp_lm0hgja.jpeg"><br><br><h3>  R√©sum√© </h3><br>  L'hyperviseur √©crit comme exemple pour l'article est tout √† fait capable de prendre en charge le fonctionnement stable du syst√®me d'exploitation invit√©, bien que ce ne soit bien s√ªr pas une solution compl√®te.  Intel VT-d n'est pas utilis√©, la prise en charge d'un seul processeur logique est impl√©ment√©e, il n'y a aucun contr√¥le sur les interruptions et le fonctionnement des p√©riph√©riques.  En g√©n√©ral, je n'ai presque rien utilis√© de l'ensemble riche d'outils qu'Intel fournit pour la virtualisation mat√©rielle.  Cependant, si la communaut√© est int√©ress√©e, je continuerai d'√©crire sur Intel VMX, d'autant plus qu'il y a quelque chose √† √©crire. <br><br>  Oui, j'ai presque oubli√©, il est pratique de d√©boguer l'hyperviseur et ses composants √† l'aide de Bochs.  Au d√©but, c'est un outil indispensable.  Malheureusement, le t√©l√©chargement d'un hyperviseur dans Bochs est diff√©rent du t√©l√©chargement sur un PC physique.  √Ä un moment donn√©, j'ai fait un montage sp√©cial pour simplifier ce processus, je vais essayer de mettre les sources en ordre et de les mettre ensemble avec le projet dans un avenir proche. <br><br>  C‚Äôest tout.  Merci de votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419065/">https://habr.com/ru/post/fr419065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419051/index.html">Comment Flant aide les d√©butants</a></li>
<li><a href="../fr419053/index.html">Test de la technologie de cache RAID Adaptec</a></li>
<li><a href="../fr419055/index.html">En th√©orie des cordes, vous pouvez vous en tirer avec beaucoup moins d'univers.</a></li>
<li><a href="../fr419061/index.html">Nouveaut√©s de GoLand 2018.2</a></li>
<li><a href="../fr419063/index.html">Automatisation de l'obtention d'informations aupr√®s d'USRLE √† l'aide de Freepascal</a></li>
<li><a href="../fr419067/index.html">Comment vendre des donn√©es personnelles ou pourquoi il est difficile de mettre un prix sur les informations</a></li>
<li><a href="../fr419069/index.html">Le r√©chauffement climatique rendra notre monde plus vert, mais ne vous r√©jouissez pas</a></li>
<li><a href="../fr419071/index.html">Suivre le hack tp-link</a></li>
<li><a href="../fr419075/index.html">Sur la formation des s√©quences dans l'hypoth√®se Collatz (3n + 1)</a></li>
<li><a href="../fr419077/index.html">Localisation d'applications dans iOS. Partie 1. Qu'avons-nous?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>