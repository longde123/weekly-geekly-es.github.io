<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìπ üßïüèº üòÜ Le travail commence par les tests. üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ ‚ùå üí∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la vie de chaque d√©veloppeur, il arrive un moment o√π il pense √† cr√©er un composant de test pour son id√©e originale. Je vais mieux - dans la vie d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le travail commence par les tests.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436714/">  Dans la vie de chaque d√©veloppeur, il arrive un moment o√π il pense √† cr√©er un composant de test pour son id√©e originale.  Je vais mieux - dans la vie de tout bon d√©veloppeur.  Lorsque vous √™tes junior et ne portez aucune responsabilit√© particuli√®re, vous avez droit √† de nombreuses erreurs et vous pouvez les corriger √† tout moment.  Vous n'√™tes pas responsable du produit que vous cr√©ez et n'avez pas la motivation de passer une minute suppl√©mentaire pour rev√©rifier le code g√©n√©r√©.  ¬´Rien, ce montant ne peut pas √™tre reproduit¬ª, ¬´cette chose semble fonctionner¬ª, ¬´enfin, au moins, il fait ce qu'il faut¬ª - si vous voulez d√©passer le niveau de la p√©pini√®re de programmeur, vous devrez nier chacune de ces pens√©es. <br><br>  Avec le d√©veloppement de votre propre exp√©rience de programmation, vous avez de nouveaux clients de plus en plus cool / gros.  Vous serez m√™me ravi de certains (de tous, si vous avez de la chance) - les gens sont bons, ils paient g√©n√©reusement et ne sont pas pointilleux sur les probl√®mes qui se posent.  Regardons un cas aussi simple (tr√®s simple, mais l'essentiel qui se cache derri√®re) de cr√©er un gestionnaire de formulaire √† partir d'un programmeur qui ne conna√Æt pas les tracas. <br><a name="habracut"></a><br>  Ainsi, la t√¢che simple est arriv√©e - √©crire un gestionnaire de formulaire.  L'objectif est d'accepter les demandes des clients pour l'achat de briques.  Le client est grand, il est engag√© dans de grandes livraisons de briques en vrac (par exemple, pour un montant de plus de 500 000 roubles - afin de se sentir au moins un certain niveau de responsabilit√© pour ce qui se passe).  La concurrence est f√©roce - les clients peuvent se rendre rapidement chez le fournisseur de briques s'ils ne r√©pondent pas dans la journ√©e. <br><br>  Notre programmeur a √©t√© inform√© qu'il √©tait n√©cessaire de sauvegarder les donn√©es du client √† partir du formulaire - le nom du repr√©sentant, le num√©ro de t√©l√©phone, le nom de l'entreprise du client, le volume de la commande et un champ de description de commande facultatif.  Cerveau de Porakinine, un formulaire simple a √©t√© rapidement cr√©√© avec des champs standards pour l'avant du site: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/6d6647072b.png" alt="la forme"><br><br>  Les donn√©es du formulaire sont envoy√©es par une demande AJAX, sans recharger la page.  De plus, le programmeur prend en charge la conception du gestionnaire de formulaires et il doit faire face √† une t√¢che plut√¥t triviale - ajouter des enregistrements pour le nouveau client √† la table des commandes existante et envoyer au client un e-mail avec une notification sur le nouveau client. <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/4393f0f44e.png" alt="code d'insertion simple"><br><br>  Le formulaire fonctionne, les donn√©es sont enregistr√©es avec succ√®s, le client est satisfait.  Mais tout d'un coup, un appel en col√®re vient du client, "alors ils disent que la commande est arriv√©e - la soci√©t√© millionnaire veut m'acheter toutes les briques, mais le num√©ro de t√©l√©phone n'est pas venu du formulaire et comment puis-je les contacter maintenant?!  Demain, ils trouveront un autre fournisseur!  Comment tu as fait quoi?!  C'est ta faute ... "  Le client se d√©chire et se balance, moins les nerfs, moins la confiance et moins le respect.  La situation est extr√™mement standard pour un junior - l'absence de toute validation et test des donn√©es entrantes du formulaire.  La premi√®re t√¢che (validation) est r√©solue extr√™mement simplement en ajoutant des r√®gles de validation: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/3cbaa9c0e8.png" alt="validation"><br><cut><br>  D√©sormais, le client du site n'indiquera que les donn√©es correctes dont nous avons besoin pour un traitement ult√©rieur.  Au m√™me stade, le d√©veloppeur a l'id√©e de tester le code pour √©viter davantage une situation aussi d√©licate.  Par exemple, tester le champ du nom de famille ressemblera √† ceci (pour simplifier l'exemple de base, la protection csrf est d√©sactiv√©e): <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/00ccfbb500.png" alt="test sur le terrain manquant"><br><br>  Nous savons qu'en l'absence de ce champ, le code devrait renvoyer une r√©ponse avec une erreur et un √©tat de 400 enregistr√© par nous. De telles m√©thodes de test sont prescrites pour chaque situation sp√©cifique (ou validation de champ sp√©cifique, tout d√©pend des t√¢ches et de l'imagination du d√©veloppeur). <br><br>  Mais existe-t-il une m√©thode de d√©veloppement diff√©rente de "Je l'ai fait, mais maintenant je vais v√©rifier"?  Nous √©crivons d'abord le code, tombons sur les montants d'ex√©cution, le r√©parons, puis nous nous souvenons des tests.  Cette approche peut aller de travers pour nous et nos clients, √©tant donn√© le client de plusieurs millions perdu (bien qu'en th√©orie, tous ces clients le seraient).  Et puis je me suis demand√© - que se passe-t-il si nous commen√ßons la logique de cr√©ation de l'application √† partir de l'extr√©mit√© oppos√©e - d'abord nous ferons des demandes √† ¬´l'ex√©cuteur¬ª, puis nous le ferons r√©pondre √† ces exigences?  Essayons. <br><br>  On laisse la t√¢che comme avant, on ne change que l'approche.  Nous devons √©crire un gestionnaire de formulaire avec les champs fio, phone, corp, quant et content.  Le r√©sultat d'une ex√©cution r√©ussie est le statut 200, en ajoutant un champ √† la commande avec le message ¬´ok¬ª et en renvoyant des donn√©es sur l'enregistrement saisi, d'autres options - le statut 400 et une liste d'erreurs. <br><cut><br>  Tout d'abord, nous devons √©crire une m√©thode de test pour remplir valablement les donn√©es du formulaire: <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/479183d938.png" alt="m√©thode valide"><br><br>  Ensuite, cr√©ez la route et la m√©thode de contr√¥leur n√©cessaires (lorsqu'elles sont vides).  Si nous ex√©cutons le test maintenant, il devrait obtenir une erreur.  La validation de donn√©es valides n'est pas tout ce dont nous avons besoin.  Nous commen√ßons maintenant √† tester la validation des champs de formulaire.  Nous d√©terminons quels champs sont requis - fio, phone, corp, quant et ajoutons une m√©thode de v√©rification (le commentaire est facultatif): <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/9fbc334d6e.png" alt="vide"><br><br>  Le gestionnaire de formulaire devra simplement v√©rifier les donn√©es entrantes fio, phone, corp, quant.  Puisque nous avons supprim√© tous les champs obligatoires de la demande, une erreur dans les erreurs doit √™tre renvoy√©e pour chacun d'eux.  Dans le cas o√π au moins l'un d'entre eux n'est pas pr√©sent - le probl√®me d'ex√©cution.  Si vous le souhaitez, vous pouvez ajouter un message de v√©rification, comme cela a √©t√© fait pr√©c√©demment (v√©rifier ¬´ok¬ª). <br>  Nous √©mettons une v√©rification de la longueur minimale des champs fio, phone et corp (une v√©rification similaire sera effectu√©e pour la longueur maximale et pour les caract√®res invalides dans ces champs). <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/e6d3507ea2.png" alt="longueur minimum"><br><br>  Nos contr√¥les sont en place, vous pouvez ex√©cuter et v√©rifier <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/d3d2572d83.png" alt="v√©rifier le r√©sultat"><br><br>  Parfait.  Notre application s'est √©cras√©e dans 5 tests sur 5.  Notre objectif suppl√©mentaire est de passer par des m√©thodes de test qui d√©finissent des valeurs non valides dans les champs et formulent des r√®gles de validation pour les donn√©es entrantes.  La logique est quelque chose comme ceci: le champ fio ne peut pas √™tre vide;  longueur d'au moins 3 et d'au plus 120;  il s'agit d'une cha√Æne avec l'ensemble de caract√®res autoris√© dans le nom (lettres, tirets, retraits).  Le r√©sultat de cette logique dans tous les domaines: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/1bc13f4444.png" alt="validation"><br><br>  En r√©ponse √† un fichier, une liste d'erreurs a √©t√© ajout√©e qui correspond √† chaque champ ¬´probl√®me¬ª.  Cela nous aidera √† v√©rifier des champs sp√©cifiques pour la validation (assertJsonStructure dans le fichier de test).  Ensuite, nous ajoutons la m√©thode de validation et obtenons la version finale: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/b979543be1.png" alt="m√©thode finale"><br><br>  Et enfin, nous pouvons v√©rifier comment notre script fonctionne sur les tests (je me souviens, il y a eu 5 √©checs en 5 tests). <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/e17df357d5.png" alt="ok"><br><br>  Comme vous pouvez le voir, tous les tests ont r√©ussi et une seule entr√©e a √©t√© entr√©e dans la base de donn√©es (car une seule m√©thode a √©t√© configur√©e pour fonctionner correctement). <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/77c0dabe23.png" alt="le r√©sultat est entr√© dans la base de donn√©es"><br><br>  Quelles sont les conclusions?  Le d√©veloppement d'applications, √† commencer par les tests, est une meilleure option que l'√©criture habituelle des fonctionnalit√©s.  La n√©cessit√© de ne recevoir de la m√©thode que ce qui est n√©cessaire est comparable √† la discipline militaire - le code fait exactement ce que vous en avez besoin, pas un pas de c√¥t√©.  Cependant, cette approche a un c√¥t√© n√©gatif (bien que controvers√©) - le fait est que l'√©criture de fonctionnalit√©s suppl√©mentaires (qui est en cours de test) prend √©galement une partie du temps allou√© pour le d√©veloppement du projet.  Quant √† moi, le choix est clair - un bon programmeur devrait √©crire des tests, et commencer par la fonctionnalit√© de test aide √† √©crire un projet fiable et qui fonctionne bien.  Je vais essayer de l'utiliser dans quelque chose de moins trivial. </cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436714/">https://habr.com/ru/post/fr436714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436700/index.html">Anti-spoofing: comment les syst√®mes de reconnaissance faciale r√©sistent-ils aux escrocs?</a></li>
<li><a href="../fr436704/index.html">L'histoire de la fa√ßon dont nous avons choisi les balances pour l'automatisation des caisses enregistreuses</a></li>
<li><a href="../fr436708/index.html">En quoi consiste l'IoT</a></li>
<li><a href="../fr436710/index.html">Les tendances du march√© gamedev de l'ann√©e 2019 √† mon humble avis. D√©centralisation?</a></li>
<li><a href="../fr436712/index.html">Comment promouvoir un jeu incr√©mental? Gratuit, rapide et efficace *</a></li>
<li><a href="../fr436716/index.html">Fake Door dans le cadre du d√©veloppement client</a></li>
<li><a href="../fr436718/index.html">Exp√©rience personnelle: cinq d√©fis lors du d√©marrage d'une entreprise aux √âtats-Unis</a></li>
<li><a href="../fr436720/index.html">Il y a une opinion: IPv6 a √©chou√© - qui le pense et pourquoi</a></li>
<li><a href="../fr436722/index.html">Syst√®me expert m√©dical de diagnostic sur Prolog</a></li>
<li><a href="../fr436742/index.html">Android Robotics jusqu'en 2019: la vraie histoire; en 5 parties; partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>