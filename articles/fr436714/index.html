<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📹 🧕🏼 😆 Le travail commence par les tests. 🧑🏾‍🤝‍🧑🏽 ❌ 💸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la vie de chaque développeur, il arrive un moment où il pense à créer un composant de test pour son idée originale. Je vais mieux - dans la vie d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le travail commence par les tests.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436714/">  Dans la vie de chaque développeur, il arrive un moment où il pense à créer un composant de test pour son idée originale.  Je vais mieux - dans la vie de tout bon développeur.  Lorsque vous êtes junior et ne portez aucune responsabilité particulière, vous avez droit à de nombreuses erreurs et vous pouvez les corriger à tout moment.  Vous n'êtes pas responsable du produit que vous créez et n'avez pas la motivation de passer une minute supplémentaire pour revérifier le code généré.  «Rien, ce montant ne peut pas être reproduit», «cette chose semble fonctionner», «enfin, au moins, il fait ce qu'il faut» - si vous voulez dépasser le niveau de la pépinière de programmeur, vous devrez nier chacune de ces pensées. <br><br>  Avec le développement de votre propre expérience de programmation, vous avez de nouveaux clients de plus en plus cool / gros.  Vous serez même ravi de certains (de tous, si vous avez de la chance) - les gens sont bons, ils paient généreusement et ne sont pas pointilleux sur les problèmes qui se posent.  Regardons un cas aussi simple (très simple, mais l'essentiel qui se cache derrière) de créer un gestionnaire de formulaire à partir d'un programmeur qui ne connaît pas les tracas. <br><a name="habracut"></a><br>  Ainsi, la tâche simple est arrivée - écrire un gestionnaire de formulaire.  L'objectif est d'accepter les demandes des clients pour l'achat de briques.  Le client est grand, il est engagé dans de grandes livraisons de briques en vrac (par exemple, pour un montant de plus de 500 000 roubles - afin de se sentir au moins un certain niveau de responsabilité pour ce qui se passe).  La concurrence est féroce - les clients peuvent se rendre rapidement chez le fournisseur de briques s'ils ne répondent pas dans la journée. <br><br>  Notre programmeur a été informé qu'il était nécessaire de sauvegarder les données du client à partir du formulaire - le nom du représentant, le numéro de téléphone, le nom de l'entreprise du client, le volume de la commande et un champ de description de commande facultatif.  Cerveau de Porakinine, un formulaire simple a été rapidement créé avec des champs standards pour l'avant du site: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/6d6647072b.png" alt="la forme"><br><br>  Les données du formulaire sont envoyées par une demande AJAX, sans recharger la page.  De plus, le programmeur prend en charge la conception du gestionnaire de formulaires et il doit faire face à une tâche plutôt triviale - ajouter des enregistrements pour le nouveau client à la table des commandes existante et envoyer au client un e-mail avec une notification sur le nouveau client. <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/4393f0f44e.png" alt="code d'insertion simple"><br><br>  Le formulaire fonctionne, les données sont enregistrées avec succès, le client est satisfait.  Mais tout d'un coup, un appel en colère vient du client, "alors ils disent que la commande est arrivée - la société millionnaire veut m'acheter toutes les briques, mais le numéro de téléphone n'est pas venu du formulaire et comment puis-je les contacter maintenant?!  Demain, ils trouveront un autre fournisseur!  Comment tu as fait quoi?!  C'est ta faute ... "  Le client se déchire et se balance, moins les nerfs, moins la confiance et moins le respect.  La situation est extrêmement standard pour un junior - l'absence de toute validation et test des données entrantes du formulaire.  La première tâche (validation) est résolue extrêmement simplement en ajoutant des règles de validation: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/3cbaa9c0e8.png" alt="validation"><br><cut><br>  Désormais, le client du site n'indiquera que les données correctes dont nous avons besoin pour un traitement ultérieur.  Au même stade, le développeur a l'idée de tester le code pour éviter davantage une situation aussi délicate.  Par exemple, tester le champ du nom de famille ressemblera à ceci (pour simplifier l'exemple de base, la protection csrf est désactivée): <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/00ccfbb500.png" alt="test sur le terrain manquant"><br><br>  Nous savons qu'en l'absence de ce champ, le code devrait renvoyer une réponse avec une erreur et un état de 400 enregistré par nous. De telles méthodes de test sont prescrites pour chaque situation spécifique (ou validation de champ spécifique, tout dépend des tâches et de l'imagination du développeur). <br><br>  Mais existe-t-il une méthode de développement différente de "Je l'ai fait, mais maintenant je vais vérifier"?  Nous écrivons d'abord le code, tombons sur les montants d'exécution, le réparons, puis nous nous souvenons des tests.  Cette approche peut aller de travers pour nous et nos clients, étant donné le client de plusieurs millions perdu (bien qu'en théorie, tous ces clients le seraient).  Et puis je me suis demandé - que se passe-t-il si nous commençons la logique de création de l'application à partir de l'extrémité opposée - d'abord nous ferons des demandes à «l'exécuteur», puis nous le ferons répondre à ces exigences?  Essayons. <br><br>  On laisse la tâche comme avant, on ne change que l'approche.  Nous devons écrire un gestionnaire de formulaire avec les champs fio, phone, corp, quant et content.  Le résultat d'une exécution réussie est le statut 200, en ajoutant un champ à la commande avec le message «ok» et en renvoyant des données sur l'enregistrement saisi, d'autres options - le statut 400 et une liste d'erreurs. <br><cut><br>  Tout d'abord, nous devons écrire une méthode de test pour remplir valablement les données du formulaire: <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/479183d938.png" alt="méthode valide"><br><br>  Ensuite, créez la route et la méthode de contrôleur nécessaires (lorsqu'elles sont vides).  Si nous exécutons le test maintenant, il devrait obtenir une erreur.  La validation de données valides n'est pas tout ce dont nous avons besoin.  Nous commençons maintenant à tester la validation des champs de formulaire.  Nous déterminons quels champs sont requis - fio, phone, corp, quant et ajoutons une méthode de vérification (le commentaire est facultatif): <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/9fbc334d6e.png" alt="vide"><br><br>  Le gestionnaire de formulaire devra simplement vérifier les données entrantes fio, phone, corp, quant.  Puisque nous avons supprimé tous les champs obligatoires de la demande, une erreur dans les erreurs doit être renvoyée pour chacun d'eux.  Dans le cas où au moins l'un d'entre eux n'est pas présent - le problème d'exécution.  Si vous le souhaitez, vous pouvez ajouter un message de vérification, comme cela a été fait précédemment (vérifier «ok»). <br>  Nous émettons une vérification de la longueur minimale des champs fio, phone et corp (une vérification similaire sera effectuée pour la longueur maximale et pour les caractères invalides dans ces champs). <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/e6d3507ea2.png" alt="longueur minimum"><br><br>  Nos contrôles sont en place, vous pouvez exécuter et vérifier <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/d3d2572d83.png" alt="vérifier le résultat"><br><br>  Parfait.  Notre application s'est écrasée dans 5 tests sur 5.  Notre objectif supplémentaire est de passer par des méthodes de test qui définissent des valeurs non valides dans les champs et formulent des règles de validation pour les données entrantes.  La logique est quelque chose comme ceci: le champ fio ne peut pas être vide;  longueur d'au moins 3 et d'au plus 120;  il s'agit d'une chaîne avec l'ensemble de caractères autorisé dans le nom (lettres, tirets, retraits).  Le résultat de cette logique dans tous les domaines: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/1bc13f4444.png" alt="validation"><br><br>  En réponse à un fichier, une liste d'erreurs a été ajoutée qui correspond à chaque champ «problème».  Cela nous aidera à vérifier des champs spécifiques pour la validation (assertJsonStructure dans le fichier de test).  Ensuite, nous ajoutons la méthode de validation et obtenons la version finale: <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/b979543be1.png" alt="méthode finale"><br><br>  Et enfin, nous pouvons vérifier comment notre script fonctionne sur les tests (je me souviens, il y a eu 5 échecs en 5 tests). <br><br><img src="http://dl3.joxi.net/drive/2019/01/16/0025/3302/1694950/50/e17df357d5.png" alt="ok"><br><br>  Comme vous pouvez le voir, tous les tests ont réussi et une seule entrée a été entrée dans la base de données (car une seule méthode a été configurée pour fonctionner correctement). <br><br><img src="http://dl4.joxi.net/drive/2019/01/16/0025/3302/1694950/50/77c0dabe23.png" alt="le résultat est entré dans la base de données"><br><br>  Quelles sont les conclusions?  Le développement d'applications, à commencer par les tests, est une meilleure option que l'écriture habituelle des fonctionnalités.  La nécessité de ne recevoir de la méthode que ce qui est nécessaire est comparable à la discipline militaire - le code fait exactement ce que vous en avez besoin, pas un pas de côté.  Cependant, cette approche a un côté négatif (bien que controversé) - le fait est que l'écriture de fonctionnalités supplémentaires (qui est en cours de test) prend également une partie du temps alloué pour le développement du projet.  Quant à moi, le choix est clair - un bon programmeur devrait écrire des tests, et commencer par la fonctionnalité de test aide à écrire un projet fiable et qui fonctionne bien.  Je vais essayer de l'utiliser dans quelque chose de moins trivial. </cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436714/">https://habr.com/ru/post/fr436714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436700/index.html">Anti-spoofing: comment les systèmes de reconnaissance faciale résistent-ils aux escrocs?</a></li>
<li><a href="../fr436704/index.html">L'histoire de la façon dont nous avons choisi les balances pour l'automatisation des caisses enregistreuses</a></li>
<li><a href="../fr436708/index.html">En quoi consiste l'IoT</a></li>
<li><a href="../fr436710/index.html">Les tendances du marché gamedev de l'année 2019 à mon humble avis. Décentralisation?</a></li>
<li><a href="../fr436712/index.html">Comment promouvoir un jeu incrémental? Gratuit, rapide et efficace *</a></li>
<li><a href="../fr436716/index.html">Fake Door dans le cadre du développement client</a></li>
<li><a href="../fr436718/index.html">Expérience personnelle: cinq défis lors du démarrage d'une entreprise aux États-Unis</a></li>
<li><a href="../fr436720/index.html">Il y a une opinion: IPv6 a échoué - qui le pense et pourquoi</a></li>
<li><a href="../fr436722/index.html">Système expert médical de diagnostic sur Prolog</a></li>
<li><a href="../fr436742/index.html">Android Robotics jusqu'en 2019: la vraie histoire; en 5 parties; partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>