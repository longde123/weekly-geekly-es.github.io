<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåè üìá üë®üèæ‚Äçüî¨ Entwicklung mandantenf√§higer Anwendungen auf der SAP Cloud Platform in Neo, Teil 2: Autorisierung und Authentifizierung üèΩ üë©üèª‚Äçü§ù‚Äçüë®üèΩ ‚õπüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im zweiten Artikel der Reihe √ºber die Entwicklung von Anwendungen auf der SAP Cloud Platform in der Neo-Umgebung werden wir einen der wichtigsten Aspe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung mandantenf√§higer Anwendungen auf der SAP Cloud Platform in Neo, Teil 2: Autorisierung und Authentifizierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/418237/"> Im zweiten Artikel der Reihe √ºber die Entwicklung von Anwendungen auf der SAP Cloud Platform in der Neo-Umgebung werden wir einen der wichtigsten Aspekte behandeln - Autorisierung und Verwaltung der Benutzerauthentifizierung. <br><br>  In diesem Artikel wird gezeigt, wie eine Verbindung zwischen der SAP Cloud Platform und dem Identit√§tsanbieter (IDP) des imagin√§ren ABC PetroCorp-Clients hergestellt und Benutzer zum IDP hinzugef√ºgt werden.  Als N√§chstes wird untersucht, wie Rollen f√ºr Benutzer des Clientunternehmens in einer bestimmten Anwendung (von IDP) zugewiesen werden und wie SAML-Attribute f√ºr die √úbertragung von IDP an die Anwendung der Cloud-Plattform SCP konfiguriert werden. <br><a name="habracut"></a><br>  Im Unterkonto des fiktiven ABC PetroCorp-Clients <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus dem ersten Artikel</a> ist bereits ein Abonnement f√ºr SCP-Anwendungen zur √úberwachung der Umweltverschmutzung installiert, die von ITeLO Consulting bereitgestellt werden.  Jetzt muss der ABC PetroCorp-Mitarbeiter diese Anwendung anderen Kollegen zur Verf√ºgung stellen. <br><br>  Ein Benutzer der SAP Cloud Platform kann seinen Unternehmens-IDP mit der Cloud-Plattform verbinden und das Sicherheits- und Authentifizierungsmanagement f√ºr seine in SCP geladene Anwendung konfigurieren. <br><br>  ABC PetroCorp hat den Identit√§tsauthentifizierungsdienst der SAP Cloud Platform aktiviert, der den Zugriff auf Gesch√§ftsprozesse, Anwendungen und Daten erm√∂glicht.  Dieser Dienst stellt einen SCI-Mandanten bereit, in dem sich eine Anwendungskonfiguration und eine Benutzerautorisierungsverwaltung befinden. <br><br>  Emily, die imagin√§re Heldin aus dem ersten Artikel, hat Zugriff auf diesen SCI-Mandanten - sie ist seine Administratorin und kann die Benutzerberechtigung in einer bestimmten Anwendung konfigurieren.  Sie m√∂chte herausfinden, wie diese Konfigurationen mithilfe des Identit√§tsauthentifizierungsdienstes erstellt werden. <br><br>  Anforderungen: <br><br><ul><li>  Ein produktives globales SCP-Konto (keine Testversion) mit dem damit verbundenen Identit√§tsauthentifizierungsdienst (als IDP f√ºr das ABC PetroCorp-Unterkonto); </li><li>  Der Benutzer des Unterkontos des Clients muss der Administrator des SCI-Mandanten sein, damit er Zugriff auf die Administrationskonsole des Identit√§tsauthentifizierungsdienstes hat. </li></ul><br>  Emily muss die folgenden Schritte in der Administrationskonsole des Identit√§tsauthentifizierungsdienstes und im SCP-Kontrollfeld ausf√ºhren, um die Anwendung in der Cloud-Plattform anderen ABC PetroCorp-Mitarbeitern zur Verf√ºgung zu stellen: <br><br>  <i>Schritt 1: Stellen Sie eine Vertrauensbeziehung zwischen dem SCI-Mandanten und dem SCP-Unterkonto her.</i> <i><br></i>  <i>Schritt 2: Importieren Sie Benutzer in den SCI-Mandanten und aktualisieren (f√ºgen) Sie die erforderlichen Attribute hinzu.</i> <i><br></i>  <i>Schritt 3: Weisen Sie Benutzern auf Anwendungsebene in SCP Rollen zu.</i> <i><br></i>  <i>Schritt 4: Konfigurieren Sie die Attribute im SCI-Mandanten- und SCP-Kontrollfeld, um sie an die Anwendung zu √ºbertragen.</i> <i><br></i>  <i>Schritt 5: √úberpr√ºfen Sie die Einstellungen.</i> <br><br>  <b><i>Schritt 1: Stellen Sie eine Vertrauensstellung zwischen dem SCI-Mandanten und dem SCP-Unterkonto her</i></b> <b><i><br></i></b> <br>  Emily ist die Administratorin des ABC PetroCorp-Unterkontos und des SCI-Mandanten. Dadurch kann sie die erforderlichen Einstellungen vornehmen, um den SCI-Mandanten als ‚ÄûBenutzer-Repository‚Äú f√ºr die vom ITeLO Consulting-Anbieter bereitgestellte mandantenf√§hige Anwendung zu verwenden. <br><br>  Zun√§chst muss Emily eine vertrauensvolle Beziehung zwischen dem SCI-Mandanten und dem SCP-Unterkonto des ABC PetroCorp-Kunden herstellen. <br><br>  Wir rufen die Administrationskonsole des Identit√§tsauthentifizierungsdienstes √ºber den Link "https: //.accounts.ondemand.com/admin" auf, in dem sich die Kennung des SCI-Mandanten befindet.  Dieser Link befindet sich im Registrierungsschreiben an den Administrator des Mandanten des Identit√§tsauthentifizierungsdienstes.  Dort wird auch die Mieter-ID angegeben. <br><br>  Die Administrationskonsole des Identit√§tsauthentifizierungsdienstes lautet wie folgt: <br><br><img src="https://habrastorage.org/webt/cp/co/sg/cpcosgfcvdxme2noud-nmpiu9z8.png"><br><br>  √ñffnen Sie auf einer anderen Browser-Registerkarte die Systemsteuerung f√ºr das Client-Unterkonto "ABC PetroCorp" und wechseln Sie zur Registerkarte "Sicherheit" -&gt; "Vertrauen". <br><br><img src="https://habrastorage.org/webt/6w/xx/m0/6wxxm0jlg4ba0p4j6cin6m2n4by.png"><br><br>  Wechseln Sie im daraufhin ge√∂ffneten Men√º "Vertrauensverwaltung" zur Registerkarte "Lokaler Dienstanbieter" und klicken Sie auf "Bearbeiten". <br><br><img src="https://habrastorage.org/webt/8r/r5/gt/8rr5gt5cef-3zbr4bh-xwapupuu.png"><br><br>  Dann f√ºhren wir die folgenden Schritte aus: <br><br><ul><li>  √Ñndern Sie im Feld "Konfigurationstyp" den Typ in "Benutzerdefiniert". </li><li>  Klicken Sie auf "Schl√ºsselpaar generieren", um einen Schl√ºssel und ein Zertifikat f√ºr das Konto zu erstellen. </li><li>  √Ñndern Sie den Wert im Feld "Hauptausbreitung" in "Aktivieren". </li><li>  Klicken Sie auf "Speichern". </li></ul><br><img src="https://habrastorage.org/webt/pj/i_/yt/pji_ytcjevq_bzd5odtcvdchclm.png"><br><br>  Klicken Sie auf "Metadaten abrufen", um die Metadatendatei im "XML" -Format herunterzuladen, das die zuvor beschriebenen Konfigurationen enth√§lt.  Es wird verwendet, um Vertrauen mit dem SCI-Mandanten aufzubauen. <br><br>  Kehren wir zur Administrationskonsole des Identit√§tsauthentifizierungsdienstes zur√ºck und gehen Sie im Men√º links zur Registerkarte "Anwendungen und Ressourcen" -&gt; "Anwendungen".  Klicken Sie im Bereich "Anwendungen" auf die Schaltfl√§che "Hinzuf√ºgen", um eine neue Anwendung anzugeben, die im Unterkonto "ABC PetroCorp" bereitgestellt wird. <br><br><img src="https://habrastorage.org/webt/en/a4/ow/ena4owiid3yz0_qdn5ch4c2vexe.png"><br><br>  Geben Sie im angezeigten Fenster den Namen der Anwendung ein (z. B. ABC_PetroCorp_IDP) und klicken Sie auf "Speichern".  Danach wird im Mandanten ein neuer Punkt f√ºr unsere Anwendung erstellt. <br><br>  Wechseln Sie in der erstellten Anwendung zur Registerkarte "Vertrauensw√ºrdig" und w√§hlen Sie den Parameter "SAML 2.0-Konfiguration" aus. <br><br><img src="https://habrastorage.org/webt/oi/cy/fg/oicyfgksa9mue9msaysvy_7asyq.png"><br><br>  Klicken Sie im Abschnitt "Aus Metadaten definieren" auf "Durchsuchen" und w√§hlen Sie die Metadatendatei im "XML" -Format aus, das wir zuvor beim Einrichten der Vertrauensw√ºrdigkeit in das SCP-Unterkonto heruntergeladen haben.  Details zur SAML 2.0-Konfiguration werden nach dem Herunterladen der Datei automatisch ausgef√ºllt.  Klicken Sie auf "Speichern" - jetzt wird die SAML 2.0-Konfiguration f√ºr diese Anwendung erstellt und gespeichert. <br><br><img src="https://habrastorage.org/webt/eu/dv/se/eudvsepyrbw9drrqhzl6ydstbhe.png"><br><br>  Kehren Sie im Mandanten zum Anwendungspunkt ABC_PetroCorp_IDP zur√ºck, klicken Sie auf "Home URL" und geben Sie eine URL wie "https: // Pollutionmonitoringui- &lt;Unterkontoname&gt; .dispatcher. &lt;Region_host&gt;" ein. <br><br>  Diese URL finden Sie in der Beschreibung der HTML5-Anwendung, f√ºr die der Client abonniert ist (Unterkonto "ABC PetroCorp").  Gehen Sie dazu zum Unterkonto des Kunden auf der Registerkarte "Anwendungen" -&gt; "Abonnements" und w√§hlen Sie die signierte HTML5-Anwendung aus. <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Auf der Registerkarte "√úbersicht" befindet sich die URL, die wir ben√∂tigen. <br><br><img src="https://habrastorage.org/webt/zx/sg/_j/zxsg_jrg0wntfrttlqjlv5l2q3y.png"><br><br>  Anschlie√üend kehren wir zum Anwendungspunkt im SCI-Mandanten zur√ºck, geben die Anwendungs-URL in der ‚ÄûHome-URL‚Äú an und klicken auf ‚ÄûSpeichern‚Äú. <br><br><img src="https://habrastorage.org/webt/rm/ie/od/rmieoddhrh-rj2wopqy9llz_dqm.png"><br><br>  Gehen Sie nun in der Administrationskonsole des Identit√§tsauthentifizierungsdienstes zur Registerkarte ‚ÄûAnwendungen &amp; Ressourcen‚Äú -&gt; ‚ÄûMandanteneinstellungen‚Äú.  W√§hlen Sie auf der Seite mit den Mandanteneinstellungen die Option ‚ÄûSAML 2.0-Konfiguration‚Äú aus. <br><br><img src="https://habrastorage.org/webt/nj/yf/fx/njyffxlfgdvcp5y3m-nyeqznqde.png"><br><br>  Klicken Sie im folgenden Fenster auf "Metadatendatei herunterladen", um die XML-Datei mit den SCI-Mandantenkonfigurationen herunterzuladen.  Es wird in Zukunft verwendet, um Vertrauen in das Unterkonto des Kunden in SCP aufzubauen. <br><br>  Gehen Sie zur√ºck zum Unterkonto "ABC PetroCorp" und gehen Sie zum Men√º "Sicherheit" -&gt; "Vertrauen". W√§hlen Sie im folgenden Fenster die Registerkarte "Application Identity Provider".  Klicken Sie auf "Vertrauensw√ºrdigen Identit√§tsanbieter hinzuf√ºgen", um Details zum SCI-Mandanten hinzuzuf√ºgen. <br><br><img src="https://habrastorage.org/webt/ai/x9/yg/aix9ygszpkfu5bhbmalbvyj0hpk.png"><br><br>  Klicken Sie auf der Registerkarte "Allgemein" auf "Durchsuchen" und w√§hlen Sie die Metadatendatei im Format "XML" aus, das von der Administrationskonsole des Identit√§tsauthentifizierungsdienstes heruntergeladen wurde.  Konfigurationsdetails werden nach dem Herunterladen der Datei automatisch ausgef√ºllt.  Deaktivieren Sie das Kontrollk√§stchen "Nur f√ºr IDP-initiiertes SSO" und klicken Sie auf "Speichern". <br><br><img src="https://habrastorage.org/webt/il/ob/nw/ilobnwscixyn19_7dfsdjifo_pm.png"><br><br>  Jetzt wurde die Vertrauensbeziehung zwischen dem Unterkonto des ABC PetroCorp-Kunden und seinem SCI-Mandanten erfolgreich hergestellt.  Die gleichen Einstellungen k√∂nnen auf Unterkonten anderer Clients angewendet werden (z. B. f√ºr den XYZ EnergyCorp-Client). <br><br>  <i><b>Schritt 2: Importieren Sie Benutzer in den SCI-Mandanten und aktualisieren (f√ºgen) Sie die erforderlichen Attribute hinzu</b></i> <i><b><br></b></i> <br>  Emily muss sicherstellen, dass Anwendungsbenutzer beim Unternehmens-IDP von ABC PetroCorp registriert sind. <br><br>  Im Idealfall enth√§lt ein Unternehmens-IDP (in unserem Fall ein SCI-Mandant) bereits eine Liste aller Benutzer im Unternehmen.  Aus Gr√ºnden der √úbersichtlichkeit importieren wir einige Benutzer in den SCI-Mandanten. Anschlie√üend erhalten sie die entsprechenden Berechtigungen f√ºr den Zugriff auf die Anwendung. <br>  Demos f√ºr die Anwendung werden in einer CSV-Datei auf Github - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Github</a> gespeichert. <br><br>  Laden Sie die "CSV" -Datei f√ºr "ABC PetroCorp" von GitHub herunter.  In der CSV-Datei sind zwei Benutzer angegeben: <br><br><ul><li>  ABCPlantSupervisor: Dieser Benutzer ist der Manager einer bestimmten ABC PetroCorp-Anlage und kann nur Daten zu seiner Anlage anzeigen. </li><li>  ABCAreaManager: Dieser Benutzer ist der Manager eines gesamten Bereichs, der mehrere ABC PetroCorp-Werke umfassen kann.  Er kann Daten zu allen Pflanzen in seiner Umgebung anzeigen. </li></ul><br><img src="https://habrastorage.org/webt/1g/jj/kg/1gjjkg_amk9yp8nu-ht9j8ju5yg.png"><br><br>  Die CSV-Datei f√ºr ABC PetroCorp enth√§lt fiktive Benutzer-E-Mail-Adressen.  Sie m√ºssen durch echte ersetzt werden, da dann Briefe an sie kommen, um Konten zu aktivieren.  Wenn Ihre echte E-Mail beispielsweise "john.smith@sap.com" lautet, m√ºssen Sie die Bezeichnung &lt;&gt; durch "john.smith" und &lt;&lt; Ihr_Unternehmen &gt;&gt; durch "sap" ersetzen. <br><br><img src="https://habrastorage.org/webt/-g/z_/jt/-gz_jtxt7lwrrhkqrsrxggowp6s.png"><br><br>  Gehen Sie zur Administrationskonsole des Identit√§tsauthentifizierungsdienstes und w√§hlen Sie die Registerkarte "Benutzer &amp; Berechtigungen" -&gt; "Benutzer importieren".  W√§hlen Sie den zuvor erstellten Anwendungspunkt "ABC_PetroCorp_IDP" aus und klicken Sie auf "Durchsuchen". W√§hlen Sie dann die Datei "ABCPetroCorp.csv" aus, die unsere Demo-Benutzer beschreibt, und klicken Sie auf die Schaltfl√§che "Importieren". <br><br><img src="https://habrastorage.org/webt/ah/dv/k2/ahdvk2otnkhjwdfueyubevzd0vk.png"><br><br>  Benutzer m√ºssen ihr Konto aktivieren.  Um eine E-Mail mit einem Aktivierungslink zu erhalten, m√ºssen Sie im Fenster "E-Mails senden" auf "Senden" klicken. <br><br>  Bevor Sie den Benutzer aktivieren, m√ºssen Sie einige Konfigurationen √§ndern. <br>  Gehen Sie zur Registerkarte "Benutzer &amp; Berechtigungen" -&gt; "Benutzerverwaltung".  In den Benutzerlisten wurden zwei Benutzer angezeigt: "Area Manager" und "Plant Supervisor".  Ihnen werden automatisch Kennungen zugewiesen: P000011 und P000010.  Diese Kennungen k√∂nnen als Anmeldungen zur Eingabe des Mandanten verwendet werden (und in die Anwendung, wenn alle erforderlichen Einstellungen vorgenommen wurden). <br><br><img src="https://habrastorage.org/webt/kr/5n/ns/kr5nnsayi-h_uzenvlbkvzvttds.png"><br><br>  Gehen wir zum Benutzer P000011 oder "Area Manager" und f√ºgen einen Namen hinzu, der auch als Login f√ºr die Eingabe verwendet werden kann.  Klicken Sie dazu auf das Bearbeitungssymbol im Feld "Pers√∂nliche Informationen" und geben Sie den "Anmeldenamen" ein (in unserem Fall ist es Johan). <br><br><img src="https://habrastorage.org/webt/cr/qa/vg/crqavg4m8ids9ec4eqifslnuwu0.png"><br><br>  Klicken Sie dann auf "Speichern". <br><br>  Machen wir dasselbe mit dem Benutzer P000010 oder dem Plant Supervisor, aber nennen wir ihn Smith. <br><br><img src="https://habrastorage.org/webt/8-/yr/-k/8-yr-klcft-lnsvvfxtg_gyphfc.png"><br><br>  Der Benutzer des Werksleiters sollte nur Informationen zu seiner Anlage anzeigen k√∂nnen. In dem Abschnitt mit Informationen zur Firma muss dann die Firmenkennung angegeben werden (wie diese Kennung verwendet wird, wird in Schritt 4 erl√§utert). <br><br>  Gehen Sie dazu zum Abschnitt "Unternehmensinformationen" und geben Sie die Werkskennung "101" in das Feld "Unternehmen" ein. <br><br>  Jetzt wurden die Informationen √ºber unsere Benutzer ge√§ndert.  Um sie zu aktivieren, gehen Sie zu den in der CSV-Datei angegebenen Postf√§chern und klicken Sie auf den Aktivierungslink oder klicken Sie auf "Klicken Sie hier, um Ihr Konto zu aktivieren". <br><br><img src="https://habrastorage.org/webt/us/nr/jr/usnrjrph5ur5oawb8yamdoir3zg.png"><br><br>  Daher haben wir Benutzer erfolgreich in den SCI-Mandanten importiert, Informationen √ºber sie aktualisiert und aktiviert. <br><br>  <b><i>Schritt 3: Zuweisen von Rollen zu Benutzern auf Anwendungsebene in der SAP Cloud Platform</i></b> <b><i><br></i></b> <br>  Die mandantenf√§hige Pollution Monitoring-Anwendung, die von Robert von ITeLO Consulting erstellt wurde, bietet zwei vordefinierte Rollen, PlantSupervisor und AreaManager, die die Benutzerberechtigung in der Anwendung steuern und bestimmen, was der Endbenutzer sieht. <br><br><ul><li>  PlantSupervisor-Rolle: Benutzer, denen diese Rolle zugewiesen ist, k√∂nnen nur Daten aus dem Werk anzeigen, die in den Unternehmensinformationen im SCI-Mandanten angegeben sind. </li><li>  Rolle "AreaManager": Benutzer, denen diese Rolle zugewiesen ist, k√∂nnen Daten von allen Werken in ihrem Gebiet anzeigen. </li></ul><br>  Mal sehen, wie die Rollentrennung auf Projektcode-Ebene erreicht wird. <br><br>  Fahren wir mit der Datei web.xml fort, die sich entlang des Pfads / der √úberwachung der Umweltverschmutzung befindet <br>  /src/main/webapp/WEB-INF/web.xml ‚Äùim Projektordner. <br><br>  √ñffnen Sie die Datei und stellen Sie sicher, dass die beiden oben genannten Rollen in der Anwendung definiert sind. <br><br><img src="https://habrastorage.org/webt/vm/jy/4r/vmjy4ruivum6qlp-a2kw-6nsar4.png"><br><br>  Gehen wir nun zur Datei "PollutionDataService.java" im Pfad "/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java" des Projekts und √∂ffnen Sie sie. <br><br>  Die Methode "getCompanyPollutionData ()" ist in dieser Datei angegeben.  Hier k√∂nnen Sie √ºberpr√ºfen, ob der Benutzer ein Administrator (Manager) ist.  Wenn ja, zeigt die Anwendung Daten f√ºr alle Anlagen an. Wenn nicht, werden die Daten nach der Anlagen-ID (plant_id) gefiltert.  Au√üerdem zeigt die Anwendung nur Informationen f√ºr diejenigen Anlagen an, deren Kennungen den in den Benutzerinformationen angegebenen entsprechen. <br><br><img src="https://habrastorage.org/webt/wb/nr/-1/wbnr-1xbi_tiqah2efsv4444tn4.png"><br><br>  Der √úbersichtlichkeit halber k√∂nnen Sie auf die Methode isUserAdmin () verweisen, mit der Sie anhand der Rolle bestimmen k√∂nnen, ob ein Benutzer ein Administrator (Manager) ist oder nicht. <br><br><img src="https://habrastorage.org/webt/hg/az/25/hgaz25dqc9shpbzdjr8szqb81dc.png"><br><br>  Ein √§hnlicher Algorithmus wird verwendet, um Anlagendaten aus lokalen Systemen zu extrahieren. <br><br><img src="https://habrastorage.org/webt/im/ds/qa/imdsqalrzqvuubw7e9lx1ppwgo0.png"><br><br>  Jetzt muss Emily als Mitarbeiterin von ABC PetroCorp Gebietsleiter und Werksleiter identifizieren, indem sie ihnen die entsprechenden Rollen (ABCPlantSupervisor und ABCAreaManager) in der Anwendung in SCP zuweisen. <br><br>  Wir gehen zum Unterkonto des ABC PetroCorp-Clients und w√§hlen die vom ITeLO Consulting-Anbieter bereitgestellte Java-Anwendung zur √úberwachung der Umweltverschmutzung aus (sie befindet sich auf der Registerkarte Anwendungen -&gt; Registerkarte Abonnements). <br><br><img src="https://habrastorage.org/webt/py/ql/b_/pyqlb_s5jxwjw3amjgu3z2lzcus.png"><br><br>  Wechseln Sie als N√§chstes zur Registerkarte ‚ÄûRollen‚Äú (auf Anwendungsebene). <br><br>  In dem sich √∂ffnenden Fenster wird eine Liste der in der Anwendung angegebenen Rollen angezeigt.  W√§hlen Sie die Rolle "PlantSupervisor" und klicken Sie auf "Zuweisen".  Geben Sie im angezeigten Fenster die Benutzer-ID ein, die im SCI-Mandanten als "ABCPlantSupervisor" angegeben ist.  In unserem Fall lautet die Kennung eines solchen Benutzers P000010. <br><br>  W√§hlen Sie dann die Rolle "AreaManager" und klicken Sie auf "Zuweisen".  Geben Sie im angezeigten Fenster die im SCI-Mandanten als "ABCAreaManager" angegebene Benutzerkennung ein (in unserem Fall lautet die Kennung eines solchen Benutzers P000011). <br><br><img src="https://habrastorage.org/webt/pw/k2/qr/pwk2qre0nnl8iyytqg8szu9wwhc.png"><br><br>  Daher haben wir die Rollen der Anwendung erfolgreich mit den entsprechenden Benutzern von ABC PetroCorp vom SCI-Mandanten verglichen. <br><br>  Die gleichen Einstellungen k√∂nnen im Unterkonto eines anderen Kunden angewendet werden (z. B. ‚ÄûXYZ EnergyCorp‚Äú). <br><br>  <i><b>Schritt 4: Konfigurieren von Attributen in der SCI-Mandanten- und SCP-Systemsteuerung f√ºr die √úbertragung an die Anwendung</b></i> <i><b><br></b></i> <br>  Robert von ITeLO Consulting hat die mandantenf√§hige Anwendung so programmiert, dass er die PlantSupervisor-Benutzer-ID an die Anlage √ºbergeben muss, damit die Anlagendaten in der Anwendung f√ºr diese bestimmte Anlagen-ID herausgefiltert werden k√∂nnen. <br>  In den vorherigen Schritten haben wir dem Benutzer "PlantSupervisor" im SCI-Mandanten im Feld "Unternehmensinformationen" die Anlagenkennung hinzugef√ºgt, die wir nun in die mandantenf√§hige Anwendung √ºbertragen m√ºssen.  Es kann dann in einer Anwendung verwendet werden, um Daten anzuzeigen, die sich auf eine bestimmte Anlage beziehen.  Der AreaManager-Benutzer ist im Wesentlichen ein Administrator, der Daten aus allen Werken anzeigen kann. <br><br>  Mal sehen, wie dies auf der Ebene des Anwendungscodes organisiert ist. <br><br>  √ñffnen Sie die Datei "PollutionDataService.java" im Pfad "/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java" im Projekt. <br><br>  Diese Datei beschreibt die Methode getPlantId ().  Diese Methode beschreibt das Abrufen des Benutzernamens und das √úberpr√ºfen des Attributs ‚ÄûPLANT_ID‚Äú, mit dem Verschmutzungsdaten und Anlagendaten gefiltert werden. <br><br><img src="https://habrastorage.org/webt/oo/5k/8f/oo5k8fcedmqrdjgd1qc3b1jink8.png"><br><br>  Wir k√∂nnen Benutzerattribute vom SCI-Mandanten √ºber die SAML-Assertionsattribute an die Anwendung √ºbertragen.  Dies ist erforderlich, damit das Benutzerattribut des SCI-Mandanten, das Unternehmensinformationen enth√§lt, zum Zeitpunkt der Anmeldung des Benutzers von SCP gelesen wird.  Das f√ºr den Benutzer definierte sogenannte ‚ÄûAssertion Attribute‚Äú (Genehmigungsattribut) muss in die Anwendung zur √úberwachung der Umweltverschmutzung √ºbertragen werden. <br><br>  Erstellen Sie dazu zun√§chst im SCI-Mandanten ein "Assertion-Attribut" und dann - das Genehmigungsattribut im Hauptattribut ("Principal Attribute") im Unterkonto "ABC PetroCorp", das wie oben gezeigt vom Anwendungscode gelesen werden kann. <br><br>  Gehen Sie zur Administrationskonsole des Identit√§tsauthentifizierungsdienstes und w√§hlen Sie die Registerkarte "Anwendungen &amp; Ressourcen" -&gt; "Anwendungen".  W√§hlen Sie die gew√ºnschte Anwendung aus (ABC_PetroCorp_IDP) und klicken Sie auf der Registerkarte "Trust" auf "Assertion Attributes". <br><br><img src="https://habrastorage.org/webt/aj/vx/a1/ajvxa1wkg_edv7_a4s8peeug_ge.png"><br><br>  Eine Liste der vorhandenen Attribute wird angezeigt. Wir ben√∂tigen eine weitere.  Klicken Sie dazu auf die Schaltfl√§che ‚ÄûHinzuf√ºgen‚Äú und w√§hlen Sie das Attribut ‚ÄûFirma‚Äú. <br><br>  Dann f√ºgen wir dem Attributwert "plant_id" (Gro√ü- und Kleinschreibung beachten) hinzu und klicken auf "Speichern". <br><br><img src="https://habrastorage.org/webt/gq/_0/g7/gq_0g7ulur1s6brsmvessvvt-2e.png"><br><br>  Gehen Sie nun in SCP zum Unterkonto "ABC PetroCorp" und gehen Sie zur Registerkarte "Sicherheit" -&gt; "Vertrauen".  Wechseln Sie im Fenster "Trust Management" zur Registerkarte "Application Identity Provider" und w√§hlen Sie den dem Unterkonto zugeordneten IdP aus. <br><br><img src="https://habrastorage.org/webt/wd/bo/x8/wdbox8lmoxamqgwybxzrsugpmru.png"><br><br>  Wechseln Sie im folgenden Fenster zur Registerkarte "Attribute" und klicken Sie auf "Assertionsbasiertes Attribut hinzuf√ºgen".  Im Feld "Assertion Attribute" geben wir den Wert "plant_id" ein (wie im SCI-Mandanten) und im Feld "Principal Attribute" geben wir "PLANT_ID" ein (dieser Wert wird als Anlagencode an die Anwendung √ºbertragen) - und klicken auf "Save". <br><br>  Daher haben wir die Attribute im SCI-Mandanten und in der SCP-Systemsteuerung erfolgreich konfiguriert, um sie an die Anwendung zu √ºbertragen. <br><br>  <b><i>Schritt 5: √úberpr√ºfen Sie die Einstellungen</i></b> <b><i><br></i></b>  Emily kann jetzt √ºberpr√ºfen, ob die Einstellungen f√ºr den SCI-Mandanten (IdP) f√ºr das Unterkonto "ABC PetroCorp" in SCP und f√ºr die vom Anbieter bereitgestellte Anwendung korrekt definiert sind. <br><br>  Gehen Sie dazu zum Unterkonto "ABC PetroCorp" und wenden Sie sich an die HTML5-Anwendung "Pollutionmonitoringui" (diese befindet sich auf der Registerkarte "Anwendungen" -&gt; "Abonnements"). <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Kopieren Sie den Link zur Anwendung.  √ñffnen Sie im Inkognito-Modus eine neue Registerkarte im Browser und f√ºgen Sie einen Link zur HTML5-Anwendung ein.  Zur Eingabe der Anwendung wird ein Fenster angezeigt, in dem der im SCI-Mandanten angegebene Name angezeigt wird. <br><br>  Wenn alles korrekt eingerichtet ist, sollten Sie in der Lage sein, die Anwendung unter den Benutzern von "AreaManager" und "PlantSupervisor" einzugeben, die im SCI-Mandanten angegeben sind. <br><br>  In unserem Fall ist der Manager der Region Benutzer Johan (P000011) und der Leiter der Anlage ist Smith (P000010).  Sie k√∂nnen die Anwendung unter diesen Benutzern eingeben, indem Sie entweder den Benutzernamen oder dessen Kennung als Login verwenden. <br><br>  <i>Hinweis: Wenn Sie zu diesem Zeitpunkt die Anwendung eingeben, werden keine Daten angezeigt.</i>  <i>Dies ist normal, da die Konfiguration noch nicht abgeschlossen ist und das lokale System nicht verbunden ist.</i> <i><br></i> <br><br>  Daher haben wir eine IDP-Verbindung (Identity Provider) mit unserer SCP-Anwendung zur √úberwachung der Umweltverschmutzung eingerichtet.  Wir haben auch Benutzer importiert und ihnen die richtigen Rollen f√ºr den Zugriff auf die Anwendung zugewiesen, um sicherzustellen, dass die richtigen Anlageninformationen an die Anwendung √ºbertragen wurden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418237/">https://habr.com/ru/post/de418237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418225/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Native Client Sandbox Teil 2</a></li>
<li><a href="../de418227/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 3</a></li>
<li><a href="../de418229/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 1</a></li>
<li><a href="../de418233/index.html">BMW Mnemonik zum Finden von Grenzwerten</a></li>
<li><a href="../de418235/index.html">Orchestrierte Saga oder Erstellen von Gesch√§ftstransaktionen in Diensten mit der Datenbank nach Dienstmuster</a></li>
<li><a href="../de418239/index.html">48 Megapixel f√ºr Smartphone</a></li>
<li><a href="../de418241/index.html">Warum Gau√ü? (100 M√∂glichkeiten, das Gleichungssystem zu l√∂sen)</a></li>
<li><a href="../de418243/index.html">Die popul√§re Geschichte der Astronomie ist falsch</a></li>
<li><a href="../de418245/index.html">Wie man kein Projekt auf Bitrix entwickelt</a></li>
<li><a href="../de418247/index.html">Beschleunigen Sie die Float 4x4 Matrix Multiplikation mit SIMD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>