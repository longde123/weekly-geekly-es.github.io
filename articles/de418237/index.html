<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌏 📇 👨🏾‍🔬 Entwicklung mandantenfähiger Anwendungen auf der SAP Cloud Platform in Neo, Teil 2: Autorisierung und Authentifizierung 🏽 👩🏻‍🤝‍👨🏽 ⛹🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im zweiten Artikel der Reihe über die Entwicklung von Anwendungen auf der SAP Cloud Platform in der Neo-Umgebung werden wir einen der wichtigsten Aspe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung mandantenfähiger Anwendungen auf der SAP Cloud Platform in Neo, Teil 2: Autorisierung und Authentifizierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/418237/"> Im zweiten Artikel der Reihe über die Entwicklung von Anwendungen auf der SAP Cloud Platform in der Neo-Umgebung werden wir einen der wichtigsten Aspekte behandeln - Autorisierung und Verwaltung der Benutzerauthentifizierung. <br><br>  In diesem Artikel wird gezeigt, wie eine Verbindung zwischen der SAP Cloud Platform und dem Identitätsanbieter (IDP) des imaginären ABC PetroCorp-Clients hergestellt und Benutzer zum IDP hinzugefügt werden.  Als Nächstes wird untersucht, wie Rollen für Benutzer des Clientunternehmens in einer bestimmten Anwendung (von IDP) zugewiesen werden und wie SAML-Attribute für die Übertragung von IDP an die Anwendung der Cloud-Plattform SCP konfiguriert werden. <br><a name="habracut"></a><br>  Im Unterkonto des fiktiven ABC PetroCorp-Clients <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus dem ersten Artikel</a> ist bereits ein Abonnement für SCP-Anwendungen zur Überwachung der Umweltverschmutzung installiert, die von ITeLO Consulting bereitgestellt werden.  Jetzt muss der ABC PetroCorp-Mitarbeiter diese Anwendung anderen Kollegen zur Verfügung stellen. <br><br>  Ein Benutzer der SAP Cloud Platform kann seinen Unternehmens-IDP mit der Cloud-Plattform verbinden und das Sicherheits- und Authentifizierungsmanagement für seine in SCP geladene Anwendung konfigurieren. <br><br>  ABC PetroCorp hat den Identitätsauthentifizierungsdienst der SAP Cloud Platform aktiviert, der den Zugriff auf Geschäftsprozesse, Anwendungen und Daten ermöglicht.  Dieser Dienst stellt einen SCI-Mandanten bereit, in dem sich eine Anwendungskonfiguration und eine Benutzerautorisierungsverwaltung befinden. <br><br>  Emily, die imaginäre Heldin aus dem ersten Artikel, hat Zugriff auf diesen SCI-Mandanten - sie ist seine Administratorin und kann die Benutzerberechtigung in einer bestimmten Anwendung konfigurieren.  Sie möchte herausfinden, wie diese Konfigurationen mithilfe des Identitätsauthentifizierungsdienstes erstellt werden. <br><br>  Anforderungen: <br><br><ul><li>  Ein produktives globales SCP-Konto (keine Testversion) mit dem damit verbundenen Identitätsauthentifizierungsdienst (als IDP für das ABC PetroCorp-Unterkonto); </li><li>  Der Benutzer des Unterkontos des Clients muss der Administrator des SCI-Mandanten sein, damit er Zugriff auf die Administrationskonsole des Identitätsauthentifizierungsdienstes hat. </li></ul><br>  Emily muss die folgenden Schritte in der Administrationskonsole des Identitätsauthentifizierungsdienstes und im SCP-Kontrollfeld ausführen, um die Anwendung in der Cloud-Plattform anderen ABC PetroCorp-Mitarbeitern zur Verfügung zu stellen: <br><br>  <i>Schritt 1: Stellen Sie eine Vertrauensbeziehung zwischen dem SCI-Mandanten und dem SCP-Unterkonto her.</i> <i><br></i>  <i>Schritt 2: Importieren Sie Benutzer in den SCI-Mandanten und aktualisieren (fügen) Sie die erforderlichen Attribute hinzu.</i> <i><br></i>  <i>Schritt 3: Weisen Sie Benutzern auf Anwendungsebene in SCP Rollen zu.</i> <i><br></i>  <i>Schritt 4: Konfigurieren Sie die Attribute im SCI-Mandanten- und SCP-Kontrollfeld, um sie an die Anwendung zu übertragen.</i> <i><br></i>  <i>Schritt 5: Überprüfen Sie die Einstellungen.</i> <br><br>  <b><i>Schritt 1: Stellen Sie eine Vertrauensstellung zwischen dem SCI-Mandanten und dem SCP-Unterkonto her</i></b> <b><i><br></i></b> <br>  Emily ist die Administratorin des ABC PetroCorp-Unterkontos und des SCI-Mandanten. Dadurch kann sie die erforderlichen Einstellungen vornehmen, um den SCI-Mandanten als „Benutzer-Repository“ für die vom ITeLO Consulting-Anbieter bereitgestellte mandantenfähige Anwendung zu verwenden. <br><br>  Zunächst muss Emily eine vertrauensvolle Beziehung zwischen dem SCI-Mandanten und dem SCP-Unterkonto des ABC PetroCorp-Kunden herstellen. <br><br>  Wir rufen die Administrationskonsole des Identitätsauthentifizierungsdienstes über den Link "https: //.accounts.ondemand.com/admin" auf, in dem sich die Kennung des SCI-Mandanten befindet.  Dieser Link befindet sich im Registrierungsschreiben an den Administrator des Mandanten des Identitätsauthentifizierungsdienstes.  Dort wird auch die Mieter-ID angegeben. <br><br>  Die Administrationskonsole des Identitätsauthentifizierungsdienstes lautet wie folgt: <br><br><img src="https://habrastorage.org/webt/cp/co/sg/cpcosgfcvdxme2noud-nmpiu9z8.png"><br><br>  Öffnen Sie auf einer anderen Browser-Registerkarte die Systemsteuerung für das Client-Unterkonto "ABC PetroCorp" und wechseln Sie zur Registerkarte "Sicherheit" -&gt; "Vertrauen". <br><br><img src="https://habrastorage.org/webt/6w/xx/m0/6wxxm0jlg4ba0p4j6cin6m2n4by.png"><br><br>  Wechseln Sie im daraufhin geöffneten Menü "Vertrauensverwaltung" zur Registerkarte "Lokaler Dienstanbieter" und klicken Sie auf "Bearbeiten". <br><br><img src="https://habrastorage.org/webt/8r/r5/gt/8rr5gt5cef-3zbr4bh-xwapupuu.png"><br><br>  Dann führen wir die folgenden Schritte aus: <br><br><ul><li>  Ändern Sie im Feld "Konfigurationstyp" den Typ in "Benutzerdefiniert". </li><li>  Klicken Sie auf "Schlüsselpaar generieren", um einen Schlüssel und ein Zertifikat für das Konto zu erstellen. </li><li>  Ändern Sie den Wert im Feld "Hauptausbreitung" in "Aktivieren". </li><li>  Klicken Sie auf "Speichern". </li></ul><br><img src="https://habrastorage.org/webt/pj/i_/yt/pji_ytcjevq_bzd5odtcvdchclm.png"><br><br>  Klicken Sie auf "Metadaten abrufen", um die Metadatendatei im "XML" -Format herunterzuladen, das die zuvor beschriebenen Konfigurationen enthält.  Es wird verwendet, um Vertrauen mit dem SCI-Mandanten aufzubauen. <br><br>  Kehren wir zur Administrationskonsole des Identitätsauthentifizierungsdienstes zurück und gehen Sie im Menü links zur Registerkarte "Anwendungen und Ressourcen" -&gt; "Anwendungen".  Klicken Sie im Bereich "Anwendungen" auf die Schaltfläche "Hinzufügen", um eine neue Anwendung anzugeben, die im Unterkonto "ABC PetroCorp" bereitgestellt wird. <br><br><img src="https://habrastorage.org/webt/en/a4/ow/ena4owiid3yz0_qdn5ch4c2vexe.png"><br><br>  Geben Sie im angezeigten Fenster den Namen der Anwendung ein (z. B. ABC_PetroCorp_IDP) und klicken Sie auf "Speichern".  Danach wird im Mandanten ein neuer Punkt für unsere Anwendung erstellt. <br><br>  Wechseln Sie in der erstellten Anwendung zur Registerkarte "Vertrauenswürdig" und wählen Sie den Parameter "SAML 2.0-Konfiguration" aus. <br><br><img src="https://habrastorage.org/webt/oi/cy/fg/oicyfgksa9mue9msaysvy_7asyq.png"><br><br>  Klicken Sie im Abschnitt "Aus Metadaten definieren" auf "Durchsuchen" und wählen Sie die Metadatendatei im "XML" -Format aus, das wir zuvor beim Einrichten der Vertrauenswürdigkeit in das SCP-Unterkonto heruntergeladen haben.  Details zur SAML 2.0-Konfiguration werden nach dem Herunterladen der Datei automatisch ausgefüllt.  Klicken Sie auf "Speichern" - jetzt wird die SAML 2.0-Konfiguration für diese Anwendung erstellt und gespeichert. <br><br><img src="https://habrastorage.org/webt/eu/dv/se/eudvsepyrbw9drrqhzl6ydstbhe.png"><br><br>  Kehren Sie im Mandanten zum Anwendungspunkt ABC_PetroCorp_IDP zurück, klicken Sie auf "Home URL" und geben Sie eine URL wie "https: // Pollutionmonitoringui- &lt;Unterkontoname&gt; .dispatcher. &lt;Region_host&gt;" ein. <br><br>  Diese URL finden Sie in der Beschreibung der HTML5-Anwendung, für die der Client abonniert ist (Unterkonto "ABC PetroCorp").  Gehen Sie dazu zum Unterkonto des Kunden auf der Registerkarte "Anwendungen" -&gt; "Abonnements" und wählen Sie die signierte HTML5-Anwendung aus. <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Auf der Registerkarte "Übersicht" befindet sich die URL, die wir benötigen. <br><br><img src="https://habrastorage.org/webt/zx/sg/_j/zxsg_jrg0wntfrttlqjlv5l2q3y.png"><br><br>  Anschließend kehren wir zum Anwendungspunkt im SCI-Mandanten zurück, geben die Anwendungs-URL in der „Home-URL“ an und klicken auf „Speichern“. <br><br><img src="https://habrastorage.org/webt/rm/ie/od/rmieoddhrh-rj2wopqy9llz_dqm.png"><br><br>  Gehen Sie nun in der Administrationskonsole des Identitätsauthentifizierungsdienstes zur Registerkarte „Anwendungen &amp; Ressourcen“ -&gt; „Mandanteneinstellungen“.  Wählen Sie auf der Seite mit den Mandanteneinstellungen die Option „SAML 2.0-Konfiguration“ aus. <br><br><img src="https://habrastorage.org/webt/nj/yf/fx/njyffxlfgdvcp5y3m-nyeqznqde.png"><br><br>  Klicken Sie im folgenden Fenster auf "Metadatendatei herunterladen", um die XML-Datei mit den SCI-Mandantenkonfigurationen herunterzuladen.  Es wird in Zukunft verwendet, um Vertrauen in das Unterkonto des Kunden in SCP aufzubauen. <br><br>  Gehen Sie zurück zum Unterkonto "ABC PetroCorp" und gehen Sie zum Menü "Sicherheit" -&gt; "Vertrauen". Wählen Sie im folgenden Fenster die Registerkarte "Application Identity Provider".  Klicken Sie auf "Vertrauenswürdigen Identitätsanbieter hinzufügen", um Details zum SCI-Mandanten hinzuzufügen. <br><br><img src="https://habrastorage.org/webt/ai/x9/yg/aix9ygszpkfu5bhbmalbvyj0hpk.png"><br><br>  Klicken Sie auf der Registerkarte "Allgemein" auf "Durchsuchen" und wählen Sie die Metadatendatei im Format "XML" aus, das von der Administrationskonsole des Identitätsauthentifizierungsdienstes heruntergeladen wurde.  Konfigurationsdetails werden nach dem Herunterladen der Datei automatisch ausgefüllt.  Deaktivieren Sie das Kontrollkästchen "Nur für IDP-initiiertes SSO" und klicken Sie auf "Speichern". <br><br><img src="https://habrastorage.org/webt/il/ob/nw/ilobnwscixyn19_7dfsdjifo_pm.png"><br><br>  Jetzt wurde die Vertrauensbeziehung zwischen dem Unterkonto des ABC PetroCorp-Kunden und seinem SCI-Mandanten erfolgreich hergestellt.  Die gleichen Einstellungen können auf Unterkonten anderer Clients angewendet werden (z. B. für den XYZ EnergyCorp-Client). <br><br>  <i><b>Schritt 2: Importieren Sie Benutzer in den SCI-Mandanten und aktualisieren (fügen) Sie die erforderlichen Attribute hinzu</b></i> <i><b><br></b></i> <br>  Emily muss sicherstellen, dass Anwendungsbenutzer beim Unternehmens-IDP von ABC PetroCorp registriert sind. <br><br>  Im Idealfall enthält ein Unternehmens-IDP (in unserem Fall ein SCI-Mandant) bereits eine Liste aller Benutzer im Unternehmen.  Aus Gründen der Übersichtlichkeit importieren wir einige Benutzer in den SCI-Mandanten. Anschließend erhalten sie die entsprechenden Berechtigungen für den Zugriff auf die Anwendung. <br>  Demos für die Anwendung werden in einer CSV-Datei auf Github - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Github</a> gespeichert. <br><br>  Laden Sie die "CSV" -Datei für "ABC PetroCorp" von GitHub herunter.  In der CSV-Datei sind zwei Benutzer angegeben: <br><br><ul><li>  ABCPlantSupervisor: Dieser Benutzer ist der Manager einer bestimmten ABC PetroCorp-Anlage und kann nur Daten zu seiner Anlage anzeigen. </li><li>  ABCAreaManager: Dieser Benutzer ist der Manager eines gesamten Bereichs, der mehrere ABC PetroCorp-Werke umfassen kann.  Er kann Daten zu allen Pflanzen in seiner Umgebung anzeigen. </li></ul><br><img src="https://habrastorage.org/webt/1g/jj/kg/1gjjkg_amk9yp8nu-ht9j8ju5yg.png"><br><br>  Die CSV-Datei für ABC PetroCorp enthält fiktive Benutzer-E-Mail-Adressen.  Sie müssen durch echte ersetzt werden, da dann Briefe an sie kommen, um Konten zu aktivieren.  Wenn Ihre echte E-Mail beispielsweise "john.smith@sap.com" lautet, müssen Sie die Bezeichnung &lt;&gt; durch "john.smith" und &lt;&lt; Ihr_Unternehmen &gt;&gt; durch "sap" ersetzen. <br><br><img src="https://habrastorage.org/webt/-g/z_/jt/-gz_jtxt7lwrrhkqrsrxggowp6s.png"><br><br>  Gehen Sie zur Administrationskonsole des Identitätsauthentifizierungsdienstes und wählen Sie die Registerkarte "Benutzer &amp; Berechtigungen" -&gt; "Benutzer importieren".  Wählen Sie den zuvor erstellten Anwendungspunkt "ABC_PetroCorp_IDP" aus und klicken Sie auf "Durchsuchen". Wählen Sie dann die Datei "ABCPetroCorp.csv" aus, die unsere Demo-Benutzer beschreibt, und klicken Sie auf die Schaltfläche "Importieren". <br><br><img src="https://habrastorage.org/webt/ah/dv/k2/ahdvk2otnkhjwdfueyubevzd0vk.png"><br><br>  Benutzer müssen ihr Konto aktivieren.  Um eine E-Mail mit einem Aktivierungslink zu erhalten, müssen Sie im Fenster "E-Mails senden" auf "Senden" klicken. <br><br>  Bevor Sie den Benutzer aktivieren, müssen Sie einige Konfigurationen ändern. <br>  Gehen Sie zur Registerkarte "Benutzer &amp; Berechtigungen" -&gt; "Benutzerverwaltung".  In den Benutzerlisten wurden zwei Benutzer angezeigt: "Area Manager" und "Plant Supervisor".  Ihnen werden automatisch Kennungen zugewiesen: P000011 und P000010.  Diese Kennungen können als Anmeldungen zur Eingabe des Mandanten verwendet werden (und in die Anwendung, wenn alle erforderlichen Einstellungen vorgenommen wurden). <br><br><img src="https://habrastorage.org/webt/kr/5n/ns/kr5nnsayi-h_uzenvlbkvzvttds.png"><br><br>  Gehen wir zum Benutzer P000011 oder "Area Manager" und fügen einen Namen hinzu, der auch als Login für die Eingabe verwendet werden kann.  Klicken Sie dazu auf das Bearbeitungssymbol im Feld "Persönliche Informationen" und geben Sie den "Anmeldenamen" ein (in unserem Fall ist es Johan). <br><br><img src="https://habrastorage.org/webt/cr/qa/vg/crqavg4m8ids9ec4eqifslnuwu0.png"><br><br>  Klicken Sie dann auf "Speichern". <br><br>  Machen wir dasselbe mit dem Benutzer P000010 oder dem Plant Supervisor, aber nennen wir ihn Smith. <br><br><img src="https://habrastorage.org/webt/8-/yr/-k/8-yr-klcft-lnsvvfxtg_gyphfc.png"><br><br>  Der Benutzer des Werksleiters sollte nur Informationen zu seiner Anlage anzeigen können. In dem Abschnitt mit Informationen zur Firma muss dann die Firmenkennung angegeben werden (wie diese Kennung verwendet wird, wird in Schritt 4 erläutert). <br><br>  Gehen Sie dazu zum Abschnitt "Unternehmensinformationen" und geben Sie die Werkskennung "101" in das Feld "Unternehmen" ein. <br><br>  Jetzt wurden die Informationen über unsere Benutzer geändert.  Um sie zu aktivieren, gehen Sie zu den in der CSV-Datei angegebenen Postfächern und klicken Sie auf den Aktivierungslink oder klicken Sie auf "Klicken Sie hier, um Ihr Konto zu aktivieren". <br><br><img src="https://habrastorage.org/webt/us/nr/jr/usnrjrph5ur5oawb8yamdoir3zg.png"><br><br>  Daher haben wir Benutzer erfolgreich in den SCI-Mandanten importiert, Informationen über sie aktualisiert und aktiviert. <br><br>  <b><i>Schritt 3: Zuweisen von Rollen zu Benutzern auf Anwendungsebene in der SAP Cloud Platform</i></b> <b><i><br></i></b> <br>  Die mandantenfähige Pollution Monitoring-Anwendung, die von Robert von ITeLO Consulting erstellt wurde, bietet zwei vordefinierte Rollen, PlantSupervisor und AreaManager, die die Benutzerberechtigung in der Anwendung steuern und bestimmen, was der Endbenutzer sieht. <br><br><ul><li>  PlantSupervisor-Rolle: Benutzer, denen diese Rolle zugewiesen ist, können nur Daten aus dem Werk anzeigen, die in den Unternehmensinformationen im SCI-Mandanten angegeben sind. </li><li>  Rolle "AreaManager": Benutzer, denen diese Rolle zugewiesen ist, können Daten von allen Werken in ihrem Gebiet anzeigen. </li></ul><br>  Mal sehen, wie die Rollentrennung auf Projektcode-Ebene erreicht wird. <br><br>  Fahren wir mit der Datei web.xml fort, die sich entlang des Pfads / der Überwachung der Umweltverschmutzung befindet <br>  /src/main/webapp/WEB-INF/web.xml ”im Projektordner. <br><br>  Öffnen Sie die Datei und stellen Sie sicher, dass die beiden oben genannten Rollen in der Anwendung definiert sind. <br><br><img src="https://habrastorage.org/webt/vm/jy/4r/vmjy4ruivum6qlp-a2kw-6nsar4.png"><br><br>  Gehen wir nun zur Datei "PollutionDataService.java" im Pfad "/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java" des Projekts und öffnen Sie sie. <br><br>  Die Methode "getCompanyPollutionData ()" ist in dieser Datei angegeben.  Hier können Sie überprüfen, ob der Benutzer ein Administrator (Manager) ist.  Wenn ja, zeigt die Anwendung Daten für alle Anlagen an. Wenn nicht, werden die Daten nach der Anlagen-ID (plant_id) gefiltert.  Außerdem zeigt die Anwendung nur Informationen für diejenigen Anlagen an, deren Kennungen den in den Benutzerinformationen angegebenen entsprechen. <br><br><img src="https://habrastorage.org/webt/wb/nr/-1/wbnr-1xbi_tiqah2efsv4444tn4.png"><br><br>  Der Übersichtlichkeit halber können Sie auf die Methode isUserAdmin () verweisen, mit der Sie anhand der Rolle bestimmen können, ob ein Benutzer ein Administrator (Manager) ist oder nicht. <br><br><img src="https://habrastorage.org/webt/hg/az/25/hgaz25dqc9shpbzdjr8szqb81dc.png"><br><br>  Ein ähnlicher Algorithmus wird verwendet, um Anlagendaten aus lokalen Systemen zu extrahieren. <br><br><img src="https://habrastorage.org/webt/im/ds/qa/imdsqalrzqvuubw7e9lx1ppwgo0.png"><br><br>  Jetzt muss Emily als Mitarbeiterin von ABC PetroCorp Gebietsleiter und Werksleiter identifizieren, indem sie ihnen die entsprechenden Rollen (ABCPlantSupervisor und ABCAreaManager) in der Anwendung in SCP zuweisen. <br><br>  Wir gehen zum Unterkonto des ABC PetroCorp-Clients und wählen die vom ITeLO Consulting-Anbieter bereitgestellte Java-Anwendung zur Überwachung der Umweltverschmutzung aus (sie befindet sich auf der Registerkarte Anwendungen -&gt; Registerkarte Abonnements). <br><br><img src="https://habrastorage.org/webt/py/ql/b_/pyqlb_s5jxwjw3amjgu3z2lzcus.png"><br><br>  Wechseln Sie als Nächstes zur Registerkarte „Rollen“ (auf Anwendungsebene). <br><br>  In dem sich öffnenden Fenster wird eine Liste der in der Anwendung angegebenen Rollen angezeigt.  Wählen Sie die Rolle "PlantSupervisor" und klicken Sie auf "Zuweisen".  Geben Sie im angezeigten Fenster die Benutzer-ID ein, die im SCI-Mandanten als "ABCPlantSupervisor" angegeben ist.  In unserem Fall lautet die Kennung eines solchen Benutzers P000010. <br><br>  Wählen Sie dann die Rolle "AreaManager" und klicken Sie auf "Zuweisen".  Geben Sie im angezeigten Fenster die im SCI-Mandanten als "ABCAreaManager" angegebene Benutzerkennung ein (in unserem Fall lautet die Kennung eines solchen Benutzers P000011). <br><br><img src="https://habrastorage.org/webt/pw/k2/qr/pwk2qre0nnl8iyytqg8szu9wwhc.png"><br><br>  Daher haben wir die Rollen der Anwendung erfolgreich mit den entsprechenden Benutzern von ABC PetroCorp vom SCI-Mandanten verglichen. <br><br>  Die gleichen Einstellungen können im Unterkonto eines anderen Kunden angewendet werden (z. B. „XYZ EnergyCorp“). <br><br>  <i><b>Schritt 4: Konfigurieren von Attributen in der SCI-Mandanten- und SCP-Systemsteuerung für die Übertragung an die Anwendung</b></i> <i><b><br></b></i> <br>  Robert von ITeLO Consulting hat die mandantenfähige Anwendung so programmiert, dass er die PlantSupervisor-Benutzer-ID an die Anlage übergeben muss, damit die Anlagendaten in der Anwendung für diese bestimmte Anlagen-ID herausgefiltert werden können. <br>  In den vorherigen Schritten haben wir dem Benutzer "PlantSupervisor" im SCI-Mandanten im Feld "Unternehmensinformationen" die Anlagenkennung hinzugefügt, die wir nun in die mandantenfähige Anwendung übertragen müssen.  Es kann dann in einer Anwendung verwendet werden, um Daten anzuzeigen, die sich auf eine bestimmte Anlage beziehen.  Der AreaManager-Benutzer ist im Wesentlichen ein Administrator, der Daten aus allen Werken anzeigen kann. <br><br>  Mal sehen, wie dies auf der Ebene des Anwendungscodes organisiert ist. <br><br>  Öffnen Sie die Datei "PollutionDataService.java" im Pfad "/pollutionmonitoring/src/main/java/com/sap/hana/cloud/samples/pollutionmonitoring/api/PollutionDataService.java" im Projekt. <br><br>  Diese Datei beschreibt die Methode getPlantId ().  Diese Methode beschreibt das Abrufen des Benutzernamens und das Überprüfen des Attributs „PLANT_ID“, mit dem Verschmutzungsdaten und Anlagendaten gefiltert werden. <br><br><img src="https://habrastorage.org/webt/oo/5k/8f/oo5k8fcedmqrdjgd1qc3b1jink8.png"><br><br>  Wir können Benutzerattribute vom SCI-Mandanten über die SAML-Assertionsattribute an die Anwendung übertragen.  Dies ist erforderlich, damit das Benutzerattribut des SCI-Mandanten, das Unternehmensinformationen enthält, zum Zeitpunkt der Anmeldung des Benutzers von SCP gelesen wird.  Das für den Benutzer definierte sogenannte „Assertion Attribute“ (Genehmigungsattribut) muss in die Anwendung zur Überwachung der Umweltverschmutzung übertragen werden. <br><br>  Erstellen Sie dazu zunächst im SCI-Mandanten ein "Assertion-Attribut" und dann - das Genehmigungsattribut im Hauptattribut ("Principal Attribute") im Unterkonto "ABC PetroCorp", das wie oben gezeigt vom Anwendungscode gelesen werden kann. <br><br>  Gehen Sie zur Administrationskonsole des Identitätsauthentifizierungsdienstes und wählen Sie die Registerkarte "Anwendungen &amp; Ressourcen" -&gt; "Anwendungen".  Wählen Sie die gewünschte Anwendung aus (ABC_PetroCorp_IDP) und klicken Sie auf der Registerkarte "Trust" auf "Assertion Attributes". <br><br><img src="https://habrastorage.org/webt/aj/vx/a1/ajvxa1wkg_edv7_a4s8peeug_ge.png"><br><br>  Eine Liste der vorhandenen Attribute wird angezeigt. Wir benötigen eine weitere.  Klicken Sie dazu auf die Schaltfläche „Hinzufügen“ und wählen Sie das Attribut „Firma“. <br><br>  Dann fügen wir dem Attributwert "plant_id" (Groß- und Kleinschreibung beachten) hinzu und klicken auf "Speichern". <br><br><img src="https://habrastorage.org/webt/gq/_0/g7/gq_0g7ulur1s6brsmvessvvt-2e.png"><br><br>  Gehen Sie nun in SCP zum Unterkonto "ABC PetroCorp" und gehen Sie zur Registerkarte "Sicherheit" -&gt; "Vertrauen".  Wechseln Sie im Fenster "Trust Management" zur Registerkarte "Application Identity Provider" und wählen Sie den dem Unterkonto zugeordneten IdP aus. <br><br><img src="https://habrastorage.org/webt/wd/bo/x8/wdbox8lmoxamqgwybxzrsugpmru.png"><br><br>  Wechseln Sie im folgenden Fenster zur Registerkarte "Attribute" und klicken Sie auf "Assertionsbasiertes Attribut hinzufügen".  Im Feld "Assertion Attribute" geben wir den Wert "plant_id" ein (wie im SCI-Mandanten) und im Feld "Principal Attribute" geben wir "PLANT_ID" ein (dieser Wert wird als Anlagencode an die Anwendung übertragen) - und klicken auf "Save". <br><br>  Daher haben wir die Attribute im SCI-Mandanten und in der SCP-Systemsteuerung erfolgreich konfiguriert, um sie an die Anwendung zu übertragen. <br><br>  <b><i>Schritt 5: Überprüfen Sie die Einstellungen</i></b> <b><i><br></i></b>  Emily kann jetzt überprüfen, ob die Einstellungen für den SCI-Mandanten (IdP) für das Unterkonto "ABC PetroCorp" in SCP und für die vom Anbieter bereitgestellte Anwendung korrekt definiert sind. <br><br>  Gehen Sie dazu zum Unterkonto "ABC PetroCorp" und wenden Sie sich an die HTML5-Anwendung "Pollutionmonitoringui" (diese befindet sich auf der Registerkarte "Anwendungen" -&gt; "Abonnements"). <br><br><img src="https://habrastorage.org/webt/ys/6l/bb/ys6lbbnjrqqh1tnwwsfufr_tmpe.png"><br><br>  Kopieren Sie den Link zur Anwendung.  Öffnen Sie im Inkognito-Modus eine neue Registerkarte im Browser und fügen Sie einen Link zur HTML5-Anwendung ein.  Zur Eingabe der Anwendung wird ein Fenster angezeigt, in dem der im SCI-Mandanten angegebene Name angezeigt wird. <br><br>  Wenn alles korrekt eingerichtet ist, sollten Sie in der Lage sein, die Anwendung unter den Benutzern von "AreaManager" und "PlantSupervisor" einzugeben, die im SCI-Mandanten angegeben sind. <br><br>  In unserem Fall ist der Manager der Region Benutzer Johan (P000011) und der Leiter der Anlage ist Smith (P000010).  Sie können die Anwendung unter diesen Benutzern eingeben, indem Sie entweder den Benutzernamen oder dessen Kennung als Login verwenden. <br><br>  <i>Hinweis: Wenn Sie zu diesem Zeitpunkt die Anwendung eingeben, werden keine Daten angezeigt.</i>  <i>Dies ist normal, da die Konfiguration noch nicht abgeschlossen ist und das lokale System nicht verbunden ist.</i> <i><br></i> <br><br>  Daher haben wir eine IDP-Verbindung (Identity Provider) mit unserer SCP-Anwendung zur Überwachung der Umweltverschmutzung eingerichtet.  Wir haben auch Benutzer importiert und ihnen die richtigen Rollen für den Zugriff auf die Anwendung zugewiesen, um sicherzustellen, dass die richtigen Anlageninformationen an die Anwendung übertragen wurden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418237/">https://habr.com/ru/post/de418237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418225/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Native Client Sandbox Teil 2</a></li>
<li><a href="../de418227/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 3</a></li>
<li><a href="../de418229/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 1</a></li>
<li><a href="../de418233/index.html">BMW Mnemonik zum Finden von Grenzwerten</a></li>
<li><a href="../de418235/index.html">Orchestrierte Saga oder Erstellen von Geschäftstransaktionen in Diensten mit der Datenbank nach Dienstmuster</a></li>
<li><a href="../de418239/index.html">48 Megapixel für Smartphone</a></li>
<li><a href="../de418241/index.html">Warum Gauß? (100 Möglichkeiten, das Gleichungssystem zu lösen)</a></li>
<li><a href="../de418243/index.html">Die populäre Geschichte der Astronomie ist falsch</a></li>
<li><a href="../de418245/index.html">Wie man kein Projekt auf Bitrix entwickelt</a></li>
<li><a href="../de418247/index.html">Beschleunigen Sie die Float 4x4 Matrix Multiplikation mit SIMD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>