<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏿 🎣 🏂🏽 Penskalaan otomatis horizontal Kubernet dan Prometheus untuk ketersediaan tinggi dan ketersediaan infrastruktur 🧟 🗄️ 🧛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, orang Khabrovit! Terjemahan artikel berikut disiapkan khusus untuk siswa kursus Platform Infrastruktur berbasis Kubernetes , yang akan memulai ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Penskalaan otomatis horizontal Kubernet dan Prometheus untuk ketersediaan tinggi dan ketersediaan infrastruktur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/457742/">  Salut, orang Khabrovit!  Terjemahan artikel berikut disiapkan khusus untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Platform Infrastruktur berbasis Kubernetes</a> , yang akan memulai kelas besok.  Mari kita mulai. <br><br><img src="https://habrastorage.org/webt/ex/tr/ly/extrlyzx2l86vdau8i-upyejtf4.png"><br><br><h3>  Melakukan autoscaling di Kubernetes </h3><br>  Penskalaan otomatis memungkinkan Anda untuk secara otomatis menambah dan mengurangi beban kerja tergantung pada penggunaan sumber daya. <br><br>  Kubernet autoscaling memiliki dua dimensi: <br><br><ul><li>  Cluster Autoscaler, yang bertanggung jawab untuk penskalaan node; </li><li>  Horizontal Pod Autoscaler (HPA), yang secara otomatis menskalakan jumlah perapian dalam set penyebaran atau replika. </li></ul><br>  Auto-scaling Cluster dapat digunakan bersama dengan auto-scaling hearth horizontal untuk secara dinamis mengontrol sumber daya komputasi dan tingkat konkurensi sistem yang diperlukan untuk mematuhi perjanjian tingkat layanan (SLA). <a name="habracut"></a><br><br>  Cluster autoscaling sangat tergantung pada kemampuan penyedia infrastruktur cloud yang menjadi tuan rumah cluster, dan HPA dapat beroperasi secara independen dari penyedia IaaS / PaaS. <br><br><h3>  Pengembangan HPA </h3><br>  Penskalaan otomatis perapian horisontal telah mengalami perubahan besar sejak diperkenalkannya Kubernetes v1.1.  Versi pertama HPA skala perapian didasarkan pada konsumsi CPU yang diukur, dan kemudian berdasarkan penggunaan memori.  Kubernetes 1.6 memperkenalkan API baru yang disebut Metrik Kustom, yang menyediakan akses HPA ke metrik khusus.  Kubernetes 1.7 menambahkan level agregasi yang memungkinkan aplikasi pihak ketiga untuk memperluas Kubernetes API dengan mendaftar sebagai add-on API. <br><br>  Berkat API Metrik Kustom dan tingkat agregasi, sistem pemantauan seperti Prometheus dapat memberikan metrik khusus aplikasi ke pengontrol HPA. <br><br>  Penskalaan otomatis perapian horisontal diimplementasikan sebagai loop kontrol yang secara berkala menanyakan API Metrik Sumber Daya (API metrik sumber daya) untuk metrik kunci, seperti penggunaan CPU dan memori, dan API Metrik Kustom (API metrik khusus) untuk metrik aplikasi tertentu. <br><br><img src="https://habrastorage.org/webt/j3/7c/-b/j37c-bs-leoz4u_a8tg6ov6zflu.png"><br><br>  Di bawah ini adalah panduan langkah demi langkah untuk mengkonfigurasi HPA v2 untuk Kubernetes 1.9 dan yang lebih baru. <br><br><ol><li>  Instal Add-in Server Metrik, yang menyediakan metrik kunci. </li><li>  Luncurkan aplikasi demo untuk melihat bagaimana skala otomatis perapian bekerja berdasarkan penggunaan CPU dan memori. </li><li>  Menyebarkan Prometheus dan server API khusus.  Daftarkan server API khusus di tingkat agregasi. </li><li>  Konfigurasikan HPA menggunakan metrik khusus yang disediakan oleh aplikasi demo. </li></ol><br>  Sebelum Anda mulai, Anda harus menginstal Go versi 1.8 (atau lebih baru) dan mengkloning <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori k8s-prom-hpa</a> di <code>GOPATH</code> : <br><br><pre> <code class="go hljs">cd $GOPATH git clone https:<span class="hljs-comment"><span class="hljs-comment">//github.com/stefanprodan/k8s-prom-hpa</span></span></code> </pre> <br><h2>  1. Menyiapkan server metrik </h2><br>  Server <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Metrik</a> Kubernetes adalah agregator data pemanfaatan sumber daya intra-cluster yang menggantikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Heapster</a> .  Server metrik mengumpulkan informasi penggunaan CPU dan memori untuk node dan perapian dari <code>kubernetes.summary_api</code> .  API Ringkasan adalah API yang efisien-memori untuk mentransmisikan metrik data Kubelet / cAdvisor ke server. <br><br><img src="https://habrastorage.org/webt/a-/ks/a5/a-ksa5k66aqr8auak_onalu3jki.png"><br><br>  Dalam versi pertama HPA, agregator Heapster diperlukan untuk mendapatkan CPU dan memori.  Di HPA v2 dan Kubernetes 1.8, hanya server metrik yang diperlukan jika <code>horizontal-pod-autoscaler-use-rest-clients</code> enabled diaktifkan.  Opsi ini diaktifkan secara default di Kubernetes 1.9.  GKE 1.9 dilengkapi dengan server metrik yang telah diinstal sebelumnya. <br><br>  Perluas server metrik di namespace <code>kube-system</code> kubus: <br><br><pre> <code class="go hljs">kubectl create -f ./metrics-server</code> </pre> <br>  Setelah 1 menit, <code>metric-server</code> akan mulai mengirimkan data tentang penggunaan CPU dan memori melalui node dan pod. <br><br>  Lihat metrik simpul: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/metrics.k8s.io/v1beta1/nodes"</span></span> | jq .</code> </pre> <br>  Lihat indikator detak jantung: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/metrics.k8s.io/v1beta1/pods"</span></span> | jq .</code> </pre> <br><h2>  2. Penskalaan otomatis berdasarkan penggunaan CPU dan memori </h2><br>  Untuk menguji hearth horizontal auto-scaling (HPA), Anda dapat menggunakan aplikasi web berbasis Golang kecil. <br><br>  Perluas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">podinfo</a> di namespace <code>default</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-svc.yaml,./podinfo/podinfo-dep.yaml</code> </pre> <br>  Hubungi <code>podinfo</code> menggunakan layanan NodePort di <code>http://&lt;K8S_PUBLIC_IP&gt;:31198</code> . <br><br>  Tentukan HPA yang akan melayani setidaknya dua replika dan skala hingga sepuluh replika jika pemanfaatan CPU rata-rata melebihi 80% atau jika konsumsi memori di atas 200 MiB: <br><br><pre> <code class="go hljs">apiVersion: autoscaling/v2beta1 kind: HorizontalPodAutoscaler metadata: name: podinfo spec: scaleTargetRef: apiVersion: extensions/v1beta1 kind: Deployment name: podinfo minReplicas: <span class="hljs-number"><span class="hljs-number">2</span></span> maxReplicas: <span class="hljs-number"><span class="hljs-number">10</span></span> metrics: - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Resource resource: name: cpu targetAverageUtilization: <span class="hljs-number"><span class="hljs-number">80</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Resource resource: name: memory targetAverageValue: <span class="hljs-number"><span class="hljs-number">200</span></span>Mi</code> </pre> <br>  Buat HPA: <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-hpa.yaml</code> </pre> <br>  Setelah beberapa detik, pengontrol HPA akan menghubungi server metrik dan menerima informasi tentang penggunaan CPU dan memori: <br><br><pre> <code class="go hljs">kubectl get hpa NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE podinfo Deployment/podinfo <span class="hljs-number"><span class="hljs-number">2826240</span></span> / <span class="hljs-number"><span class="hljs-number">200</span></span>Mi, <span class="hljs-number"><span class="hljs-number">15</span></span>% / <span class="hljs-number"><span class="hljs-number">80</span></span>% <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>m</code> </pre> <br>  Untuk meningkatkan penggunaan CPU, lakukan uji beban dengan rakyll / hey: <br><br><pre> <code class="go hljs">#install hey <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> get -u github.com/rakyll/hey #do <span class="hljs-number"><span class="hljs-number">10</span></span>K requests hey -n <span class="hljs-number"><span class="hljs-number">10000</span></span> -q <span class="hljs-number"><span class="hljs-number">10</span></span> -c <span class="hljs-number"><span class="hljs-number">5</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//&lt;K8S_PUBLIC_IP&gt;:31198/</span></span></code> </pre> <br>  Anda dapat memantau acara HPA sebagai berikut: <br><br><pre> <code class="go hljs">$ kubectl describe hpa Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">7</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">4</span></span>; reason: cpu resource utilization (percentage of request) above target Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">3</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">8</span></span>; reason: cpu resource utilization (percentage of request) above target</code> </pre> <br>  Hapus podinfo sementara (Anda harus memindahkannya di salah satu langkah selanjutnya dari panduan ini). <br><br><pre> <code class="go hljs">kubectl <span class="hljs-built_in"><span class="hljs-built_in">delete</span></span> -f ./podinfo/podinfo-hpa.yaml,./podinfo/podinfo-dep.yaml,./podinfo/podinfo-svc.yaml</code> </pre> <br><h2>  3. Pengaturan Server Metrik Khusus </h2><br>  Untuk penskalaan berdasarkan metrik khusus, diperlukan dua komponen.  Yang pertama - basis data time series <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Prometheus</a> - mengumpulkan metrik aplikasi dan menyimpannya.  Komponen kedua, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">adaptor k8s-prometheus</a> , melengkapi Kubernetes Metrik API Kustom dengan metrik yang disediakan oleh pembangun. <br><br><img src="https://habrastorage.org/webt/hf/g5/-j/hfg5-js5hf_5ldfgkrhk0dwgfu0.png"><br><br>  Ruang nama khusus digunakan untuk menggunakan Prometheus dan adaptor. <br><br>  Buat ruang nama <code>monitoring</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./namespaces.yaml</code> </pre> <br>  Perluas Prometheus v2 di ruang nama <code>monitoring</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./prometheus</code> </pre> <br>  Hasilkan sertifikat TLS yang diperlukan untuk adaptor Prometheus: <br><br><pre> <code class="go hljs"><span class="hljs-built_in"><span class="hljs-built_in">make</span></span> certs</code> </pre> <br>  Menyebarkan adaptor Prometheus untuk API Metrik Khusus: <br><br><pre> <code class="go hljs">kubectl create -f ./custom-metrics-api</code> </pre> <br>  Dapatkan daftar metrik khusus yang disediakan oleh Prometheus: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1"</span></span> | jq .</code> </pre> <br>  Kemudian ekstrak data penggunaan sistem file untuk semua pod di namespace <code>monitoring</code> : <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/monitoring/pods/*/fs_usage_bytes"</span></span> | jq .</code> </pre> <br><h2>  4. Penskalaan otomatis berdasarkan metrik khusus </h2><br>  Buat layanan NodePort <code>podinfo</code> dan gunakan ke namespace <code>default</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-svc.yaml,./podinfo/podinfo-dep.yaml</code> </pre> <br>  Aplikasi <code>podinfo</code> akan melewati <code>http_requests_total</code> metrik khusus.  Adaptor Prometheus akan menghapus akhiran <code>_total</code> dan menandai metrik ini sebagai penghitung. <br><br>  Dapatkan jumlah total kueri per detik dari API Metrik Khusus: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/default/pods/*/http_requests"</span></span> | jq . { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"MetricValueList"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"custom.metrics.k8s.io/v1beta1"</span></span>, <span class="hljs-string"><span class="hljs-string">"metadata"</span></span>: { <span class="hljs-string"><span class="hljs-string">"selfLink"</span></span>: <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/default/pods/%2A/http_requests"</span></span> }, <span class="hljs-string"><span class="hljs-string">"items"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"describedObject"</span></span>: { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Pod"</span></span>, <span class="hljs-string"><span class="hljs-string">"namespace"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"podinfo-6b86c8ccc9-kv5g9"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"/__internal"</span></span> }, <span class="hljs-string"><span class="hljs-string">"metricName"</span></span>: <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span>, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-01-10T16:49:07Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"901m"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"describedObject"</span></span>: { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Pod"</span></span>, <span class="hljs-string"><span class="hljs-string">"namespace"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"podinfo-6b86c8ccc9-nm7bl"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"/__internal"</span></span> }, <span class="hljs-string"><span class="hljs-string">"metricName"</span></span>: <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span>, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-01-10T16:49:07Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"898m"</span></span> } ] }</code> </pre> <br>  Huruf <code>m</code> berarti <code>milli-units</code> , jadi, misalnya, <code>901m</code> adalah 901 milidetik. <br><br>  Buat HPA yang akan memperluas penyebaran podinfo jika jumlah permintaan melebihi 10 permintaan per detik: <br><br><pre> <code class="go hljs">apiVersion: autoscaling/v2beta1 kind: HorizontalPodAutoscaler metadata: name: podinfo spec: scaleTargetRef: apiVersion: extensions/v1beta1 kind: Deployment name: podinfo minReplicas: <span class="hljs-number"><span class="hljs-number">2</span></span> maxReplicas: <span class="hljs-number"><span class="hljs-number">10</span></span> metrics: - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Pods pods: metricName: http_requests targetAverageValue: <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br>  Perluas HPA <code>podinfo</code> di namespace <code>default</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-hpa-custom.yaml</code> </pre> <br>  Setelah beberapa detik, HPA akan mendapatkan nilai <code>http_requests</code> dari API metrik: <br><br><pre> <code class="go hljs">kubectl get hpa NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE podinfo Deployment/podinfo <span class="hljs-number"><span class="hljs-number">899</span></span>m / <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>m</code> </pre> <br>  Terapkan beban untuk layanan podinfo dengan 25 permintaan per detik: <br><br><pre> <code class="go hljs">#install hey <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> get -u github.com/rakyll/hey #do <span class="hljs-number"><span class="hljs-number">10</span></span>K requests rate limited at <span class="hljs-number"><span class="hljs-number">25</span></span> QPS hey -n <span class="hljs-number"><span class="hljs-number">10000</span></span> -q <span class="hljs-number"><span class="hljs-number">5</span></span> -c <span class="hljs-number"><span class="hljs-number">5</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//&lt;K8S-IP&gt;:31198/healthz</span></span></code> </pre> <br>  Setelah beberapa menit, HPA akan mulai mengukur penyebaran: <br><br><pre> <code class="go hljs">kubectl describe hpa Name: podinfo Namespace: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Reference: Deployment/podinfo Metrics: ( current / target ) <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span> on pods: <span class="hljs-number"><span class="hljs-number">9059</span></span>m / <span class="hljs-number"><span class="hljs-number">10</span></span>&lt; Min replicas: <span class="hljs-number"><span class="hljs-number">2</span></span> Max replicas: <span class="hljs-number"><span class="hljs-number">10</span></span> Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">2</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">3</span></span>; reason: pods metric http_requests above target</code> </pre> <br>  Dengan jumlah permintaan saat ini per detik, penyebaran tidak akan pernah mencapai maksimum 10 pod.  Tiga replika cukup untuk memastikan bahwa jumlah permintaan per detik untuk setiap pod kurang dari 10. <br><br>  Setelah menyelesaikan tes beban, HPA akan mengurangi skala penyebaran ke jumlah awal replika: <br><br><pre> <code class="go hljs">Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">5</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">3</span></span>; reason: pods metric http_requests above target Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">21s</span></span> horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">2</span></span>; reason: All metrics below target</code> </pre> <br>  Anda mungkin telah memperhatikan bahwa scaler otomatis tidak segera menanggapi perubahan dalam metrik.  Secara default, mereka disinkronkan setiap 30 detik.  Selain itu, penskalaan terjadi hanya jika belum ada peningkatan atau penurunan beban kerja selama 3-5 menit terakhir.  Ini membantu mencegah keputusan yang bertentangan dan menyisakan waktu untuk menghubungkan scaler otomatis kluster. <br><br><h2>  Kesimpulan </h2><br>  Tidak semua sistem dapat menegakkan kepatuhan SLA hanya berdasarkan penggunaan CPU atau memori (atau keduanya).  Sebagian besar server web dan server seluler untuk menangani lonjakan lalu lintas memerlukan penskalaan otomatis berdasarkan jumlah permintaan per detik. <br><br>  Untuk aplikasi ETL (dari Eng. Extract Transform Load - "ekstraksi, transformasi, memuat"), penskalaan otomatis dapat dipicu, misalnya, ketika panjang ambang batas yang ditentukan dari antrian pekerjaan terlampaui. <br><br>  Dalam semua kasus, menginstruksikan aplikasi menggunakan Prometheus dan menyoroti indikator yang diperlukan untuk autoscaling memungkinkan Anda menyempurnakan aplikasi untuk meningkatkan pemrosesan lonjakan lalu lintas dan memastikan ketersediaan infrastruktur yang tinggi. <br><br>  Gagasan, pertanyaan, komentar?  Bergabunglah dengan diskusi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Slack</a> ! <br><br>  Berikut adalah materi semacam itu.  Kami menunggu komentar Anda dan sampai jumpa di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kursus</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457742/">https://habr.com/ru/post/id457742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457728/index.html">Tabel hash di Go. Detail implementasi</a></li>
<li><a href="../id457730/index.html">Di kantor ada ilusi kontrol - tidak ada di remote. Percakapan dengan Devhab</a></li>
<li><a href="../id457734/index.html">Revolusi Sumber Terbuka Italia Dimulai</a></li>
<li><a href="../id457736/index.html">"Alat tidak sepenting kemampuan untuk berpikir tentang sistem yang mereka buat." Wawancara hebat dengan Martin Kleppman</a></li>
<li><a href="../id457738/index.html">Bagaimana kami menerapkan SD-Access, dan mengapa itu diperlukan</a></li>
<li><a href="../id457744/index.html">Membuat Sistem Ekstensi di Perpustakaan Qt - Bagian 2</a></li>
<li><a href="../id457746/index.html">Meteorologi dan penerbangan</a></li>
<li><a href="../id457750/index.html">Bekerja dengan JSON RPC di Symfony 4</a></li>
<li><a href="../id457752/index.html">Bukan penemu bulan dan bukan pelawak. Apa yang kita ketahui tentang robot di Fukushima</a></li>
<li><a href="../id457754/index.html">Negara dan Pembunuh-T</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>