<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüç≥ üëÅ‚Äçüó® üòï Serverless and React 2: Handfertigkeit und kein Betrug üõÑ üö¥üèø üê´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kann ich Front-End-Entwicklern auf einfache Weise Informationen √ºber die Cloudless Serverless-Architektur in AWS (Amazon Web Services) geben? Warum ni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Serverless and React 2: Handfertigkeit und kein Betrug</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/417943/"> Kann ich Front-End-Entwicklern auf einfache Weise Informationen √ºber die Cloudless Serverless-Architektur in AWS (Amazon Web Services) geben?  Warum nicht.  Lassen Sie uns die AWS React / Redux-Anwendung rendern und dann √ºber die Vor- und Nachteile von AWS Lambdas sprechen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wJcXVjemrEY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Das Material basiert auf der Abschrift des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Berichts</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Marina Mironovich</a> von unserer Fr√ºhjahrskonferenz HolyJS 2018 in St. Petersburg.</i> <br><a name="habracut"></a><br>  Offiziell ist Marina ein f√ºhrender Entwickler von EPAM.  Jetzt arbeitet sie in einer L√∂sungsarchitektengruppe f√ºr einen Kunden und nimmt deshalb an einer Vielzahl von Projekten teil.  Daher wird es f√ºr uns einfacher sein, den Kreis ihrer aktuellen Interessen zu skizzieren, als alle Technologien aufzulisten, mit denen sie arbeitet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0e6/caf/b0d/0e6cafb0de05d040b8b7bc30ab969b34.jpg" align="left">  <i>Zun√§chst interessiere ich mich f√ºr alle Cloud-Technologien, insbesondere f√ºr AWS, weil ich in der Produktion viel damit arbeite.</i>  <i>Aber ich versuche mit allem anderen Schritt zu halten.</i> <i><br><br></i>  <i>Frontend ist meine erste Liebe und scheint f√ºr immer.</i>  <i>Insbesondere arbeite ich derzeit mit React und React Native, daher wei√ü ich etwas mehr dar√ºber.</i>  <i>Ich versuche auch, alles andere im Auge zu behalten.</i>  <i>Ich interessiere mich f√ºr alles, was mit Projektdokumentation zu tun hat, zum Beispiel f√ºr UML-Diagramme.</i>  <i>Da ich Mitglied der Solution Architect Group bin, muss ich viel tun.</i> <i><br><br></i> <br><br><h2>  Teil 1. Hintergrund </h2><br>  Die Idee, √ºber Serverless zu sprechen, kam mir vor ungef√§hr einem Jahr.  Ich wollte einfach und nat√ºrlich √ºber Serverless f√ºr Front-End-Entwickler sprechen.  Damit Sie kein zus√§tzliches Wissen ben√∂tigen, um es zu verwenden, k√∂nnen Sie dies jetzt mit mehr Technologien tun. <br><br>  Bis zu einem gewissen Grad wurde die Idee verwirklicht - ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habe</a> auf FrontTalks 2017 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºber Serverless</a> gesprochen. Es stellte sich jedoch heraus, dass 45 Minuten f√ºr eine einfache und verst√§ndliche Geschichte nicht ausreichen.  Daher wurde der Bericht in zwei Teile geteilt, und jetzt vor Ihnen ist die zweite "Serie".  Wer das erste nicht gesehen hat - keine Sorge, es wird nicht schaden zu verstehen, was unten geschrieben steht.  Wie in anst√§ndigen Fernsehsendungen werde ich mit einer Zusammenfassung des vorherigen Teils beginnen.  Dann gehe ich zum Saft selbst √ºber - wir rendern die React / Redux-Anwendung.  Und schlie√ülich werde ich √ºber die Vor- und Nachteile von Cloud-Funktionen im Prinzip (insbesondere AWS Lambdas) sprechen und dar√ºber, was mit ihnen sonst noch getan werden kann.  Ich hoffe, dass dieser Teil f√ºr alle n√ºtzlich sein wird, die bereits mit dem AWS Lambda vertraut sind.  Am wichtigsten ist, dass die Welt nicht mit Amazon endet. Sprechen wir also dar√ºber, was es sonst noch im Bereich der Cloud-Funktionen gibt. <br><br><h3>  Was ich verwenden werde </h3><br>  Zum Rendern der Anwendung werde ich viele Amazon-Dienste verwenden: <br><br><ol><li>  S3 ist ein Dateisystem in den Clouds.  Dort speichern wir statische Assets. <br></li><li>  IAM (Zugriffsrechte f√ºr Benutzer und Dienste) - implizit, wird jedoch im Hintergrund verwendet, damit die Dienste miteinander kommunizieren. <br></li><li>  API-Gateway (URL f√ºr den Zugriff auf die Site) - Sie sehen die URL, unter der wir unser Lambda aufrufen k√∂nnen. <br></li><li>  CloudFormation (f√ºr die Bereitstellung) - wird implizit im Hintergrund verwendet. <br></li><li>  AWS Lambda - daf√ºr sind wir hergekommen. <br></li></ol><br><h3>  Was ist serverlos und was ist AWS Lambda? </h3><br>  Eigentlich ist Serverless ein gro√üer Betrug, denn nat√ºrlich gibt es Server: Irgendwo f√§ngt alles an.  Aber was ist dort los? <br><br>  Wir schreiben eine Funktion, die auf den Servern ausgef√ºhrt wird.  Nat√ºrlich f√§ngt es nicht nur so an, sondern in einer Art Beh√§lter.  Tats√§chlich wird diese Funktion im Container auf dem Server als Lambda bezeichnet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ad/2c6/ff1/6ad2c6ff181236d39a29121e8b607a96.png"></div><br>  Im Falle von Lambda k√∂nnen wir die Server vergessen.  Ich w√ºrde sogar folgendes sagen: Wenn Sie die Lambda-Funktion schreiben, ist es sch√§dlich, √ºber sie nachzudenken.  Wir arbeiten mit Lambda nicht so wie mit einem Server. <br><br><h3>  So setzen Sie Lambda ein </h3><br>  Es stellt sich eine logische Frage: Wenn wir keinen Server haben, wie stellen wir ihn bereit?  Es gibt SSH auf dem Server, wir haben den Code hochgeladen, ihn gestartet - alles ist in Ordnung.  Was tun mit Lambda? <br><br>  <b>Option 1. Wir k√∂nnen es nicht bereitstellen.</b> <br><br>  AWS in der Konsole hat eine nette und sanfte IDE f√ºr uns erstellt, in der wir genau dort eine Funktion schreiben k√∂nnen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08e/1cd/f73/08e1cdf73c5d5fec2c6315e0207e51ed.png"><br><br>  Es ist sch√∂n, aber nicht sehr erweiterbar. <br><br>  <b>Option 2. Wir k√∂nnen eine Zip-Datei erstellen und von der Befehlszeile herunterladen</b> <br><br>  Wie erstellen wir eine Zip-Datei? <br><br> <code>zip -r build/lambda.zip index.js [node_modules/] [package.json] <br></code> <br>  Wenn Sie node_modules verwenden, wird dies alles in einem Archiv komprimiert. <br>  Je nachdem, ob Sie eine neue Funktion erstellen oder ob Sie bereits √ºber eine solche Funktion verf√ºgen, k√∂nnen Sie dies auch tun <br><br> <code>aws lambda create-function... <br></code> <br>  entweder <br><br> <code>aws lambda update-function-code... <br></code> <br>  Was ist das Problem?  Zun√§chst m√∂chte die AWS-CLI wissen, ob eine Funktion erstellt wird oder ob Sie bereits eine haben.  Dies sind zwei verschiedene Teams.  Wenn Sie nicht nur den Code, sondern auch einige Attribute dieser Funktion aktualisieren m√∂chten, treten Probleme auf.  Die Anzahl dieser Befehle nimmt zu, und Sie m√ºssen sich in ein Verzeichnis setzen und √ºberlegen, welchen Befehl Sie verwenden m√∂chten. <br><br>  Wir k√∂nnen es besser und einfacher machen.  Daf√ºr haben wir Rahmenbedingungen. <br><br><h3>  AWS Lambda Frameworks </h3><br>  Es gibt viele solcher Rahmenbedingungen.  Dies ist in erster Linie AWS CloudFormation, die in Verbindung mit der AWS CLI funktioniert.  CloudFormation ist eine Json-Datei, die Ihre Dienste beschreibt.  Sie beschreiben sie in einer Json-Datei, sagen dann √ºber die AWS-CLI "Ausf√ºhren" und es wird automatisch alles f√ºr Sie im AWS-Service erstellt. <br><br>  F√ºr eine so einfache Aufgabe wie das Rendern ist es jedoch immer noch schwierig.  Hier ist die Eintrittsschwelle zu gro√ü - Sie m√ºssen lesen, welche Struktur CloudFormation usw. hat. <br><br>  Versuchen wir es zu vereinfachen.  Und hier erscheinen verschiedene Frameworks: APEX, Zappa (nur f√ºr Python), Claudia.js.  Ich habe nur wenige zuf√§llig aufgelistet. <br><br>  Das Problem und die St√§rke dieser Frameworks besteht darin, dass sie hoch spezialisiert sind.  Sie sind also sehr gut darin, einfache Aufgaben zu erledigen.  Zum Beispiel ist Claudia.js sehr gut zum Erstellen einer REST-API geeignet.  Sie wird das AWS-Aufruf-API-Gateway erstellen, sie wird ein Lambda f√ºr Sie erstellen, alles wird wundersch√∂n gesperrt sein.  Wenn Sie jedoch etwas mehr bereitstellen m√ºssen, treten Probleme auf - Sie m√ºssen etwas hinzuf√ºgen, helfen, schauen usw. <br><br>  Zappa wurde nur f√ºr Python geschrieben.  Und ich m√∂chte etwas ehrgeizigeres.  Und hier kommt Terraform und meine Serverless Liebe. <br><br>  Serverless liegt irgendwo in der Mitte zwischen der sehr gro√üen CloudFormation, die fast alles kann, und diesen hochspezialisierten Frameworks.  Fast alles kann darin bereitgestellt werden, aber alles zu tun ist immer noch recht einfach.  Es hat auch eine sehr leichte Syntax. <br><br>  Terraform ist bis zu einem gewissen Grad ein Analogon zu CloudFormation.  Terraform ist Open Source, darin k√∂nnen Sie alles bereitstellen - gut oder fast alles.  Und wenn AWS die Services erstellt, k√∂nnen Sie dort etwas Neues hinzuf√ºgen.  Aber es ist gro√ü und kompliziert. <br><br>  Um ehrlich zu sein, verwenden wir in der Produktion Terraform, weil mit Terraform alles, was wir haben, einfacher wird - Serverless wird dies alles nicht beschreiben.  Aber Terraform ist sehr komplex.  Und wenn ich etwas f√ºr die Arbeit schreibe, schreibe ich es zuerst auf Serverless, teste es auf Leistung und erst nachdem meine Konfiguration getestet und ausgearbeitet wurde, schreibe ich es auf Terraform neu (das macht noch ein paar Tage ‚ÄûSpa√ü‚Äú). <br><br><h3>  Serverlos </h3><br>  Warum liebe ich Serverless? <br><br><ol><li>  Serverless verf√ºgt √ºber ein System, mit dem Sie Plugins erstellen k√∂nnen.  Meiner Meinung nach ist dies eine Rettung von allem.  Serverlos - Open Source.  Das Hinzuf√ºgen von Open Source ist jedoch nicht immer einfach.  Sie m√ºssen verstehen, was im vorhandenen Code passiert, Richtlinien beachten, zumindest den Codestil einhalten, eine PR einreichen, diese PR vergessen und sie drei Jahre lang verstauben.  Entsprechend den Ergebnissen gabelst du, und dies wird irgendwo f√ºr dich separat sein.  Das alles ist nicht sehr gesund.  Aber wenn es Plugins gibt, wird alles vereinfacht.  Sie m√ºssen etwas hinzuf√ºgen - Sie sind auf dem Knie und erstellen Ihr eigenes kleines Plugin.  Dazu m√ºssen Sie nicht mehr verstehen, was in Serverless geschieht (wenn dies keine benutzerdefinierte Frage ist).  Sie verwenden einfach die verf√ºgbare API, speichern das Plugin irgendwo oder stellen es f√ºr alle bereit.  Und alles funktioniert f√ºr Sie.  Dar√ºber hinaus gibt es bereits einen gro√üen Zoo von Plugins und Leuten, die diese Plugins schreiben.  Das hei√üt, vielleicht wurde bereits etwas f√ºr Sie entschieden. <br></li><li>  Serverless hilft dabei, Lambda lokal auszuf√ºhren.  Das ausreichend gro√üe Minus des Lambda ist, dass AWS nicht dar√ºber nachgedacht hat, wie wir es debuggen und testen werden.  Mit Serverless k√∂nnen Sie jedoch alles lokal ausf√ºhren und sehen, was passiert (er tut dies sogar in Verbindung mit der Gateway-API). <br></li></ol><br><h3>  Demonstration </h3><br>  Jetzt werde ich zeigen, wie das alles wirklich funktioniert.  In den n√§chsten anderthalb bis zwei Minuten k√∂nnen wir einen Dienst erstellen, der unsere HTML-Seite rendert. <br>  Zuerst f√ºhre ich in einem neuen Ordner die SLS Create-Vorlage aus: <br><br> <code><br> mkdir sls-holyjs <br> cd sls-holyjs <br> sls create --template aws-nodejs-ecma-script <br></code> <br><img src="https://habrastorage.org/getpro/habr/post_images/4d2/620/2e5/4d26202e5337684014e9f43fb25771d3.png"><br><br> <code>npm install <br></code> <br><img src="https://habrastorage.org/getpro/habr/post_images/bee/67c/81f/bee67c81fbb0b19e21432a73b69751dc.png"><br><br>  Serverlose Entwickler haben sich um uns gek√ºmmert - es ist m√∂glich geworden, Services aus Vorlagen zu erstellen.  In diesem Fall verwende ich die Vorlage <code>nodejs-ecma-script</code> , mit der einige Dateien f√ºr mich erstellt werden, z. B. die Webpack-Konfiguration, package.json, einige Funktionen und serverless.yml: <br><br> <code>ls <br></code> <br><img src="https://habrastorage.org/getpro/habr/post_images/35b/6c6/86a/35b6c686a1fbe3e323ddb939147d1b3d.png"><br><br>  Ich brauche nicht alle Funktionen.  Ich werde die erste, zweite Umbenennung in Holyjs entfernen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/030/599/ae0/030599ae094881637ae09ee3daf33ffd.png"><br><br>  Ich werde serveless.yml ein wenig optimieren, wo ich eine Beschreibung aller erforderlichen Dienste habe: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85d/0ba/f9b/85d0baf9bad8e2918866f5a97c096017.png"><br><br>  Nun, dann werde ich die Antwort korrigieren, die die Funktion zur√ºckgibt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e13/07a/d85/e1307ad8550ea44532f79e6db27d561c.png"><br><br>  Ich mache den HTML-Code "Hello HolyJS" und f√ºge ein Handle zum Rendern hinzu. <br><br>  Weiter: <br><br> <code>sls deploy <br></code> <br>  Und voila!  Es gibt eine URL, √ºber die ich im √∂ffentlichen Zugriff sehen kann, was gerendert wird: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/228/4f3/b94/2284f3b9487a8d70a9244652d99874ff.png"><br><br>  Vertrauen, aber √ºberpr√ºfen.  Ich gehe zur AWS-Konsole und √ºberpr√ºfe, ob ich eine HolyJS-Funktion erstellt habe: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/458/e98/e62458e98369c7022c280c419f79be55.png"><br><br>  Wie Sie sehen k√∂nnen, erstellt Serverless es vor der Bereitstellung mithilfe von Webpack.  Au√üerdem wird der Rest der dort beschriebenen Infrastruktur erstellt - API-Gateway usw. <br><br>  Wenn ich dies entfernen m√∂chte: <br><br> <code>sls remove <br></code> <br>  Alle in serverless.yml beschriebenen Infrastrukturen werden gel√∂scht. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad7/8fb/f2d/ad78fbf2d65cbcaef9094673bcca4026.png"><br><br>  Wenn jemand hinter dem hier beschriebenen Prozess steht, lade ich Sie ein, einfach meinen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Bericht</a> zu √ºberpr√ºfen. <br><br><h3>  F√ºhren Sie Lambda lokal aus </h3><br>  Ich erw√§hnte, dass Lambda lokal betrieben werden kann.  Hier gibt es zwei Startoptionen. <br><br>  <b>Option 1. Wir f√ºhren einfach alles im Terminal aus</b> <br><br>  Wir bekommen, was unsere Funktion zur√ºckgibt. <br><br> <code><br> sls invoke local -f [fn_name] <br></code> <br>  <b>Option 2. Starten Sie Lambda lokal serverlos-offline</b> <br><br>  Vergessen Sie nicht, wir machen eine isomorphe Anwendung, es wird HTML und CSS sein, daher ist es im Terminal irgendwie nicht sehr interessant, lange HTML-Zeilen zu betrachten.  Dort k√∂nnen Sie √ºberpr√ºfen, ob die Funktion funktioniert.  Aber ich m√∂chte dies ausf√ºhren und im Browser rendern.  Dementsprechend brauche ich ein paar API-Gateways mit Lambda. <br><br>  Zu diesem Zweck gibt es ein separates Plugin ohne Server und Offline, das Ihr Lambda an einem Port startet (dies ist geschrieben). Anschlie√üend wird im Terminal eine URL angezeigt, √ºber die Sie darauf zugreifen k√∂nnen. <br><br> <code>sls offline --port 8000 start <br></code> <br>  Das Beste daran ist, dass es hei√ües Nachladen gibt.  Das hei√üt, Sie schreiben den Funktionscode, aktualisieren Ihren Browser und Sie werden aktualisiert, was die Funktion zur√ºckgibt.  Sie m√ºssen nicht alles neu starten. <br><br>  Dies war eine Zusammenfassung des ersten Teils des Berichts.  Nun gehen wir zum Hauptteil √ºber. <br><br><h2>  Teil 2. Rendern mit AWS </h2><br>  Das unten beschriebene Projekt ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereits</a> auf GitHub.  Wenn Sie interessiert sind, k√∂nnen Sie den Code dort herunterladen. <br><br>  Beginnen wir damit, wie alles funktioniert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f03/f9d/a97/f03f9da976ac1723c15aad19dd631689.png"><br><br>  Angenommen, es gibt einen Benutzer - mich. <br><br><ul><li>  Ich √∂ffne die Seite. <br></li><li>  Unter einer bestimmten URL greifen wir auf die Gateway-API zu.  Ich m√∂chte darauf hinweisen, dass die Gateway-API bereits ein AWS-Service ist, wir befinden uns bereits in den Clouds. <br></li><li>  Die Gateway-API ruft Lambda auf. <br></li><li>  Das Lambda rendert die Site und all dies kehrt zum Browser zur√ºck. <br></li><li>  Der Browser beginnt zu rendern und stellt fest, dass einige statische Dateien fehlen.  Dann wendet er sich dem S3-Bucket zu (unserem Dateisystem, in dem wir alle statischen Daten speichern; im S3-Bucket k√∂nnen Sie alles einf√ºgen - Schriftarten, Bilder, CSS, JS). <br></li><li>  Daten aus dem S3-Bucket werden an den Browser zur√ºckgegeben. <br></li><li>  Der Browser rendert die Seite. <br></li><li>  Jeder ist gl√ºcklich. <br></li></ul><br>  Lassen Sie uns einen kleinen Code√ºberblick √ºber das machen, was ich geschrieben habe. <br><br>  Wenn Sie zu GitHub gehen, sehen Sie die folgende Dateistruktur: <br><br> <code><b>lambda-react</b> <br> README.md <br> <b>config <br> package.json</b> <br> public <br> scripts <br> <b>serverless.yml <br> src</b> <br> yarn.lock <br></code> <br>  All dies wird automatisch im React / Redux-Toolkit generiert.  In der Tat werden wir hier nur an ein paar Dateien interessiert sein und sie m√ºssen leicht korrigiert werden: <br><br><ul><li>  config <br></li><li>  package.json <br></li><li>  serverless.yml - weil wir bereitstellen werden, <br></li><li>  src - nirgendwo ohne. <br></li></ul><br><h3>  Beginnen wir mit der Konfiguration </h3><br>  Um alles auf dem Server zusammenzubringen, m√ºssen wir eine weitere webpack.config hinzuf√ºgen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c0/990/786/6c099078652d80adcdcb70518187644f.png"><br><br>  Diese webpack.config wird bereits f√ºr Sie generiert, wenn Sie eine Vorlage verwenden.  Und dort wird die Variable <code>slsw.lib.entries</code> automatisch ersetzt, die auf Ihre Lambda-Handler <code>slsw.lib.entries</code> .  Wenn Sie m√∂chten, k√∂nnen Sie es selbst √§ndern, indem Sie etwas anderes angeben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/535/90e/c6a/53590ec6ae4247d42bab7deca58a0b62.png"><br><br>  Wir m√ºssen alles f√ºr den Knoten rendern ( <code>target: 'node'</code> ).  Grunds√§tzlich bleiben alle anderen Lader die gleichen wie bei einer regul√§ren React-Anwendung. <br><br><h3>  Weiter zu package.json </h3><br>  Wir werden nur ein paar Skripte hinzuf√ºgen - Start und Build wurden bereits mit React / Redux generiert - nichts √§ndert sich.  F√ºgen Sie ein Skript zum Starten des Lambda und ein Skript zum Bereitstellen des Lambda hinzu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4e2/822/8c4/4e28228c43ebd1548ff77f0f2d3421a2.png"><br><br><h3>  serverless.yml </h3><br>  Eine sehr kleine Datei - nur 17 Zeilen, alle unten: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0c5/404/6fa/0c54046fa5a2461532d6f7638aaf650b.png"><br><br>  Was interessiert uns daran?  Zuallererst Handler.  Dort wird der vollst√§ndige Pfad zur Datei <code>src/lambda/handler</code> ( <code>src/lambda/handler</code> ) und die Handlerfunktion wird durch den Punkt angegeben. <br><br>  Wenn Sie wirklich m√∂chten, k√∂nnen Sie mehrere Handler in einer Datei registrieren.  Auch hier ist der Weg zum Webpack, der all dies sammeln soll.  Grunds√§tzlich alles: Der Rest wird bereits automatisch generiert. <br><br><h3>  Das interessanteste ist src </h3><br>  Hier ist eine riesige React / Redux-Anwendung (in meinem Fall ist sie nicht riesig - auf die Seite).  Im zus√§tzlichen Lambda-Ordner finden Sie alles, was wir zum Rendern des Lambda ben√∂tigen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f4/b29/61a/3f4b2961a0c6f9218b715d6f013c53bf.png"><br><br>  Dies sind 2 Dateien: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f10/df3/485/f10df348528805e990f1d781a2406226.png"><br><br>  Beginnen wir mit dem Handler.  Das wichtigste ist Zeile 13.  Dies ist der Renderer, der genau das Lambda ist, das in den Wolken genannt wird: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3dd/d02/4a2/3ddd024a27fe4ccd1d919885f56f1009.png"><br><br>  Wie Sie sehen k√∂nnen, gibt die Funktion <code>render ()</code> ein Versprechen zur√ºck, von dem alle Ausnahmen abgefangen werden m√ºssen.  Dies ist die Besonderheit des Lambda, andernfalls endet das Lambda nicht sofort, sondern funktioniert bis zum Timeout.  Sie m√ºssen zus√§tzliches Geld f√ºr einen Code bezahlen, der bereits gefallen ist.  Um dies zu verhindern, m√ºssen Sie das Lambda so fr√ºh wie m√∂glich beenden - zun√§chst alle Ausnahmen abfangen und behandeln.  Wir werden sp√§ter darauf zur√ºckkommen. <br><br>  Wenn wir keine Fehler oder Ausnahmen haben, rufen wir die Funktion <code>createResponse</code> , die buchst√§blich f√ºnf Zeilen umfasst.  Wir f√ºgen einfach alle Header hinzu, damit sie im Browser korrekt gerendert werden: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c3/15c/025/1c315c025f85e3d63a70a9843cb0a8d3.png"><br><br>  Das Interessanteste hier ist die <code>render</code> , mit der unsere Seite gerendert wird: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3d/336/0b8/d3d3360b83d7d5c329c5177719029ba8.png"><br><br>  Diese Funktion kommt von renderer.js zu uns.  Mal sehen, was da ist. <br><br>  Dort wird eine isomorphe Anwendung gerendert.  Dar√ºber hinaus wird es auf jedem Server gerendert - es spielt keine Rolle, ob es sich um Lambda handelt oder nicht. <br><br>  Ich werde Ihnen nicht im Detail sagen, was eine isomorphe Anwendung ist, wie man sie rendert, da dies ein v√∂llig anderes Thema ist und es Leute gibt, die es besser gesagt haben als ich.  Hier sind einige Tutorials, die ich durch Googeln in nur wenigen Minuten gefunden habe: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e3/366/3d0/1e33663d08624d7649ae4cb084571b98.png"><br><br>  Wenn Sie andere Berichte kennen, k√∂nnen Sie raten, ich werde auf meinem Twitter Links zu ihnen geben. <br><br>  Um niemanden zu verlieren, gehe ich einfach nach oben und erz√§hle, was dort passiert. <br>  Zun√§chst m√ºssen wir dies mit HTML / React / Redux rendern. <br><br>  Dies erfolgt √ºber die Standardmethode React - <code>renderToString</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81f/69f/3e8/81f69f3e89005f3ff76e389a65a6d731.png"><br><br>  Als n√§chstes m√ºssen wir Stile rendern, damit unser Inhalt nicht blinkt.  Dies ist keine sehr triviale Aufgabe.  Es gibt mehrere npm-Pakete, die das Problem l√∂sen.  Zum Beispiel habe ich <code>node-style-loader</code> , der alles in <code>styleTag</code> , und dann k√∂nnen Sie es in HTML einf√ºgen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/509/827/653/509827653575b822318cc8746c893b1b.png"><br><br>  Wenn es bessere Pakete gibt, liegt es in Ihrem Ermessen. <br><br>  Als n√§chstes m√ºssen wir den Redux-Status √ºbergeben.  Da Sie auf dem Server rendern, m√∂chten Sie wahrscheinlich einige Daten abrufen, und Sie m√∂chten nicht, dass Redux sie erneut fragt und erneut rendert.  Dies ist eine ziemlich normale Aufgabe.  Auf der Redux-Hauptwebsite finden Sie Beispiele dazu: Wir erstellen ein Objekt und √ºbergeben es dann √ºber eine globale Variable: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/732/726/151/7327261516c4747f0994c83f5237668b.png"><br>  Jetzt etwas n√§her am Lambda. <br><br>  Es ist notwendig, eine Fehlerbehandlung durchzuf√ºhren.  Wir wollen alles fangen und etwas mit ihnen machen, zumindest die Entwicklung von Lambda stoppen.  Zum Beispiel habe ich dies durch <code>promise</code> getan: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe4/eb4/827/fe4eb4827fd43e48c17a84767612da2d.png"><br><br>  Als n√§chstes m√ºssen wir unsere URLs durch statische Dateien ersetzen.  Und daf√ºr m√ºssen wir herausfinden, wo das Lambda l√§uft - lokal oder irgendwo in den Wolken.  Wie finde ich es heraus? <br><br>  Wir werden dies durch Umgebungsvariablen tun: <br><br> <code><br> <br> ‚Ä¶ <br> const bundleUrl = process.env.NODE_ENV === 'AWS' ? <br> AWS_URL : LOCAL_URL; <br></code> <br>  Eine interessante Frage: Wie kommen Umgebungsvariablen in einem Lambda zusammen?  Eigentlich einfach genug.  In yml k√∂nnen Sie beliebige Variablen an die <code>environment</code> .  Wenn es gesperrt ist, sind sie verf√ºgbar: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6bf/a6d/083/6bfa6d083ab79f39cf033342e7e1cec6.png"><br><br>  Nun, ein Bonus - nachdem wir ein Lambda bereitgestellt haben, m√∂chten wir alle statischen Assets bereitstellen.  Zu diesem Zweck haben wir bereits ein Plugin geschrieben, in dem Sie den S3-Warenkorb festlegen k√∂nnen, in dem Sie etwas bereitstellen m√∂chten: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/784/43d/2a3/78443d2a3bcfbf351429efa9f98e9965.png"><br>  Insgesamt haben wir in etwa f√ºnf Minuten eine isomorphe Anwendung durchgef√ºhrt, um zu zeigen, dass dies alles einfach ist. <br><br>  Lassen Sie uns nun ein wenig √ºber die Theorie sprechen - die Vor- und Nachteile von Lambda. <br><br>  Beginnen wir mit dem B√∂sen. <br><br><h3>  Nachteile Lambda-Funktionen </h3><br>  Die Minuspunkte k√∂nnen die Zeit eines Kaltstarts enthalten (oder auch nicht).  F√ºr das Lambda auf Node.js, das wir gerade schreiben, bedeutet die Kaltstartzeit beispielsweise nicht viel. <br><br>  Die folgende Grafik zeigt die Kaltstartzeit.  Dies kann eine gro√üe Sache sein, insbesondere f√ºr Java und C # (achten Sie auf die orangefarbenen Punkte). Sie m√∂chten nicht, dass die Ausf√ºhrung des Codes nur f√ºnf bis sechs Sekunden dauert. <br><br>  F√ºr Node.js betr√§gt die Startzeit fast Null - 30 - 50 ms.  F√ºr einige kann dies nat√ºrlich auch ein Problem sein.  Die Funktionen k√∂nnen jedoch aufgew√§rmt werden (obwohl dies nicht das Thema dieses Berichts ist).  Wenn jemand daran interessiert ist, wie diese Tests durchgef√ºhrt wurden, willkommen bei acloud.guru, wird er Ihnen alles erz√§hlen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Artikel</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb7/11b/185/cb711b1856839c3b9ee9d0a268e0b4cc.png"><br><br>  Was sind die Nachteile? <br><br><h3>  Gr√∂√üenbeschr√§nkungen des Funktionscodes </h3><br>  Der Code muss kleiner als 50 MB sein.  Ist es m√∂glich, eine so gro√üe Funktion zu schreiben?  Bitte vergessen Sie nicht node_modules.  Wenn Sie etwas verbinden, insbesondere wenn dort Bin√§rdateien vorhanden sind, k√∂nnen Sie selbst bei Zip-Dateien problemlos √ºber 50 MB √ºbertragen.  Ich habe solche F√§lle gehabt.  Dies ist jedoch ein zus√§tzlicher Grund, um zu sehen, was Sie mit node_modules verbinden. <br><br><h3>  Laufzeitbeschr√§nkungen </h3><br>  Standardm√§√üig wird die Funktion f√ºr eine Sekunde ausgef√ºhrt.  Wenn es nicht nach einer Sekunde endet, haben Sie eine Zeit√ºberschreitung.  Diese Zeit kann jedoch in den Einstellungen erh√∂ht werden.  Beim Erstellen einer Funktion k√∂nnen Sie den Wert auf f√ºnf Minuten einstellen.  F√ºnf Minuten sind eine harte Frist.  Dies ist kein Problem f√ºr die Website.  Wenn Sie jedoch etwas Interessanteres an Lambdas tun m√∂chten, z. B. Bilder verarbeiten, Text in Ton oder Ton in Text konvertieren usw., k√∂nnen solche Berechnungen leicht mehr als f√ºnf Minuten dauern.  Und das wird ein Problem sein.  Was tun?  Lambda optimieren oder nicht verwenden. <br><br>  Eine weitere interessante Sache, die sich im Zusammenhang mit der Frist f√ºr die Ausf√ºhrung von Lambda ergibt.  Erinnern Sie sich an das Layout unserer Website.  Alles funktionierte perfekt, bis das Produkt kam und auf der Website Echtzeit-Feeds w√ºnschte - um Nachrichten in Echtzeit anzuzeigen.  Wir wissen, dass dies mit WebSockets implementiert wird.  WebSockets funktionieren jedoch f√ºnf Minuten lang nicht. Sie m√ºssen l√§nger aufbewahrt werden.  Und hier wird das F√ºnf-Minuten-Limit zum Problem. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a3/baa/e78/4a3baae784a50a373e56e5e3652187c9.png"><br><br>  Eine kleine Bemerkung.  F√ºr AWS ist dies kein Problem mehr.  Sie fanden heraus, wie sie das umgehen konnten.  Aber im Allgemeinen ist Lambda keine L√∂sung f√ºr Sie, sobald Web-Sockets erscheinen.  Sie m√ºssen wieder zu den guten alten Servern wechseln. <br><br><h3>  Die Anzahl der parallelen Funktionen pro Minute </h3><br>  Oben ist ein Limit von 500 bis 3.000, abh√§ngig von der Region, in der Sie sich befinden.  Meiner Meinung nach werden in Europa fast 500. 3000 in den USA unterst√ºtzt. <br><br>  Wenn Sie eine ausgelastete Site haben und mehr als dreitausend Anfragen pro Minute erwarten (was leicht vorstellbar ist), wird dies zu einem Problem.  Aber bevor wir √ºber dieses Minus sprechen, lassen Sie uns ein wenig dar√ºber sprechen, wie Lambda skaliert. <br><br>  Eine Anfrage kommt zu uns und wir bekommen ein Lambda.  W√§hrend dieses Lambda ausgef√ºhrt wird, kommen zwei weitere Anfragen zu uns - wir starten zwei weitere Lambdas.  Die Leute kommen auf unsere Seite, Anfragen erscheinen und Lambdas werden immer mehr gestartet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a1/58e/a49/4a158ea4922c44333fbe590440dde1b3.png"><br><br>  Dabei zahlen Sie f√ºr die Zeit, in der das Lambda l√§uft.  Angenommen, Sie zahlen einen Cent f√ºr eine Sekunde Lambda-Ausf√ºhrung.  Wenn Sie 10 Lambdas pro Sekunde haben, zahlen Sie 10 Cent f√ºr diese Sekunde.  Wenn Sie eine Million Lambdas pro Sekunde haben, sind das ungef√§hr 10 Tausend Dollar.  Unangenehme Figur. <br><br>  Aus diesem Grund hat AWS entschieden, dass Ihre Brieftasche nicht in einer Sekunde geleert werden soll, wenn Sie Ihre Tests falsch durchgef√ºhrt haben und DDOS selbst gestartet haben, was zu Lambdas gef√ºhrt hat, oder wenn jemand anderes gekommen ist, um DDOS auszuf√ºhren.  Daher wurde ein Limit von dreitausend festgelegt, damit Sie die M√∂glichkeit haben, auf die Situation zu reagieren. <br><br>  Wenn Sie regelm√§√üig 3000 Anforderungen laden, k√∂nnen Sie in AWS schreiben, wodurch das Limit erh√∂ht wird. <br><br><h3>  Staatenlos </h3><br>  Dies ist wieder das letzte umstrittene Minus. <br><br>  Was ist staatenlos?  Hier kommt ein Witz √ºber Goldfische auf - sie halten einfach nicht den Kontext: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b03/c26/620/b03c26620417a57fec13f48b896c7ef9.png"><br><br>  Das Lambda, das zum zweiten Mal angerufen wird, wei√ü nichts √ºber den ersten Anruf. <br><br>  Lassen Sie mich Ihnen ein Beispiel zeigen.  Nehmen wir an, ich habe ein System - eine gro√üe Black Box.  Und dieses System kann unter anderem SMS senden. <br><br>  Der Benutzer kommt und sagt: SMS-Vorlage Nummer 1 senden. Und das System sendet sie an ein reales Ger√§t. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad0/1e9/dea/ad01e9dead7ca1c6a23788c5179f1b3f.png"><br><br>  Irgendwann dr√ºckt das Produkt den Wunsch aus, herauszufinden, was dort hingehen wird, und zu √ºberpr√ºfen, ob in diesem System nirgendwo etwas kaputt gegangen ist.  Dazu ersetzen wir das reale Ger√§t durch eine Testnummer - beispielsweise kann Twilio dies tun.  Er wird Webhook anrufen, den SMS-Text senden, wir werden diesen SMS-Text in der Anwendung verarbeiten (wir m√ºssen √ºberpr√ºfen, ob unsere Vorlage die richtige SMS geworden ist). <br><br>  Um dies zu √ºberpr√ºfen, m√ºssen wir wissen, was gesendet wurde - wir werden dies √ºber eine Testanwendung tun.  Es bleibt zu vergleichen und die Ergebnisse anzuzeigen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5be/881/81f/5be88181fc05100d0f9000d2eb3be124.png"><br><br>  Versuchen wir, dasselbe mit Lambda zu tun. <br><br>  Lambda wird SMS senden, SMS wird zu Twilio kommen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bce/e3d/499/bcee3d4993dc73090829810748f97ea4.png"><br><br>  Ich habe die gestrichelte Linie nicht zuf√§llig gezogen, da SMS in Minuten, Stunden oder Tagen zur√ºckgehen k√∂nnen - dies h√§ngt von Ihrem Netzbetreiber ab, dh, dies ist kein synchroner Anruf.  Zu diesem Zeitpunkt wird das Lambda alles vergessen und wir k√∂nnen keine SMS mehr abrufen. <br><br>  Ich w√ºrde sagen, dass dies kein Minus ist, sondern ein Feature.  Das Schema kann wiederholt werden.  Es gibt verschiedene M√∂glichkeiten, dies zu tun, ich werde meine eigenen anbieten.  Wenn wir zustandslos sind und etwas speichern m√∂chten, m√ºssen wir definitiv Speicher verwenden, zum Beispiel eine Datenbank, S3, aber alles, was unseren Kontext speichert. <br><br>  Im Schema mit dem SMS-Speicher wird es an die Testnummer gesendet.  Und wenn Webhook es aufruft - ich schlage vor, zum Beispiel das zweite Lambda aufzurufen, da dies eine etwas andere Funktion ist.  Und das zweite Lambda kann bereits das SMS-ku, das aus der Datenbank stammt, abholen, √ºberpr√ºfen und die Ergebnisse anzeigen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d7f/fdc/2c3/d7ffdc2c3761dbadd4d2500daadd68db.png"><br><br>  Bingo! <br><br>     ,     ,   .   ,    node.js    express-.     ,     .  ,   ,   ,   ‚Äî .   ? <br><br> ,    ,     .   ‚Äî    . , -,   .   ,    ,        .      ,   ,   AWS ,       . AWS   ,     ,   .   . -,  node   ,  Java     12-15 .   ,      ,           .   -  node cache ‚Äî     .. ‚Äî     ,    .      ,      ,      .   . <br><br><h3>  - </h3><br>  ,      . <br><br><ul><li>      ,   .  ,     javascript,  .  ,        javascript-,        . <br></li><li>      ,   ,   . ,   ,  .   ,             . <br></li><li>    AWS- ‚Äî            (DynamoDB, Alexa, API Gateway,  . .). <br></li></ul><br><h3>      ? </h3><br>      ‚Äî      ,       ,   REST API.        ,     ,         . <br><br>  ,     ,  ‚Ä¶  . <br><br><ul><li> HTTP Services ‚Äî     . REST API,  API endpoint ‚Äî  .   .    ,   enterprise   node.js   middleware.    java,    ,     js ,     .         . <br></li><li> IoT ‚Äî ,   Alexa      - -,         ,  . <br></li><li> Chat Bots ‚Äî    ,   IoT. <br></li><li> Image/Video conversions. <br></li><li> Machine learning. <br></li><li> Batch Jobs ‚Äî -  ,  Batch Job     . <br></li></ul><br>   Amazon, Google, Azure, IBM, Twillio ‚Äî         cloud functions.     ,               .     open source (      ,  open source ‚Äî ).  open source    .        .         ‚Äî Docker Swarm, Kubernetes ‚Äî    . <br><br>  , , -,      .       AWS   ,    open source    . <br><br>      .      .   :         : <br><br><ul><li> Iron functions <br></li><li> Fnproject <br></li><li> Openfaas <br></li><li> Apache OpenWhisk <br></li><li> Kubeless <br></li><li> Fission <br></li><li> Funktion <br></li></ul><br>   Fnproject     ,       Fnproject       Kubernetes-. <br><br>     .     API Gateway (,   ),     URL,   .          ,   ,   ,          Kubernetes,       . <br><br><blockquote>  .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  HolyJS 2018 Moscow,   24-25   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>      ,     Early Bird-. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417943/">https://habr.com/ru/post/de417943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417933/index.html">Sicherheitswoche 27: Gef√§lschtes iPhone und Sicherheitspreis</a></li>
<li><a href="../de417935/index.html">Memos zu k√ºnstlicher Intelligenz, maschinellem Lernen, Deep Learning und Big Data</a></li>
<li><a href="../de417937/index.html">Machen "eiserne" Leute Software?</a></li>
<li><a href="../de417939/index.html">Optimierung des Renderns einer Szene aus dem Disney-Cartoon "Moana". Teile 4 und 5</a></li>
<li><a href="../de417941/index.html">Wo verschwindet das Wasser im Wasserkocher?</a></li>
<li><a href="../de417945/index.html">Welche Werkzeuge hat die Parker-Sonde?</a></li>
<li><a href="../de417947/index.html">Datenvisualisierung f√ºr Ihr Webprojekt</a></li>
<li><a href="../de417949/index.html">Wie habe ich die Standard-C ++ 11-Bibliothek geschrieben oder warum ist Boost so be√§ngstigend? Kapitel 4.2</a></li>
<li><a href="../de417951/index.html">Schreiben von Java-freundlichem Kotlin-Code</a></li>
<li><a href="../de417953/index.html">Trends beim Design von FPGAs. √úbersetzung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>