<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåª üßñüèø üí™üèº Verwenden von passwordstore.org - Passwort-Manager im KISS-Stil üïß ‚úãüèª üîÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits. In diesem Artikel m√∂chte ich meine Erfahrungen beim Einrichten und Verwenden eines Kennwortverwalters f√ºr Linux mitteilen. Dies zeic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verwenden von passwordstore.org - Passwort-Manager im KISS-Stil</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479540/"><p>  Hallo allerseits.  In diesem Artikel m√∂chte ich meine Erfahrungen beim Einrichten und Verwenden eines Kennwortverwalters f√ºr Linux mitteilen. Dies zeichnet sich nicht nur durch seine Einfachheit aus, sondern auch durch die Verwendung der bereits im System vorhandenen Tools und die M√∂glichkeit, ausschlie√ülich von der Konsole aus zu arbeiten.  Insbesondere sind Probleme im Zusammenhang mit der Erstellung und Speicherung des geheimen gpg-Schl√ºssels sowie der Einstellung der Zusammenarbeit zwischen pass, gpg, git, github und dem Browser betroffen.  Alles ist unter Linux, Windows und Android. </p><a name="habracut"></a><br><h1 id="chto-eto-takoe-i-kak-ono-rabotaet">  Was ist das und wie funktioniert es? </h1><br><p>  Technisch gesehen ist pass eine sehr einfache Bindung √ºber GnuPG und git, die in bash geschrieben sind.  Jedes Kennwort (und zugeh√∂rige Informationen, z. B. die Anmeldung) werden in einer verschl√ºsselten Datei gespeichert.  Die Suche nach dem gew√ºnschten Passwort erfolgt √ºber den Dateinamen, Verschl√ºsselung - mit GnuPG, Synchronisation zwischen Ger√§ten - mit git. </p><br><p>  Zus√§tzlich zum urspr√ºnglichen Pass gibt es zwei weitere beliebte Projekte, die mit dem Pass kompatibel sind und unter Windows ausgef√ºhrt werden: </p><br><ol><li>  <a href="https://github.com/IJHack/QtPass">QtPass</a> .  Eine GUI-Anwendung, die, wie Sie vielleicht vermuten, in Qt geschrieben wurde. </li><li>  <a href="https://github.com/gopasspw/gopass">Gopass</a> .  Eine in go geschriebene Kommandozeilenanwendung.  Unter Windows benutze ich es.  Meiner Meinung nach f√ºgten die Entwickler dort jedoch zu viele zus√§tzliche Funktionen hinzu, ohne auf ihre Intuitivit√§t zu verzichten. </li></ol><br><blockquote>  Entwickler des Passes ist Jason Donenfeld, der auch Autor von WireGuard (VPN-Implementierungen basierend auf modernen Kryptografiestandards, "Kunstwerk im Vergleich zu OpenVPN und IPSec" nach Linus Torvalds, der <a href="http://lkml.iu.edu/hypermail/linux/kernel/1911.3/04056.html">voraussichtlich</a> im Linux 5.6-Kernel erscheinen wird). </blockquote><br><h1 id="sozdanie-sekretnogo-klyucha">  Geheime Schl√ºsselerstellung </h1><br><p>  GnuPG - ein System zur Verschl√ºsselung und elektronischen Signatur.  Trotz der M√§ngel (zum Beispiel <a href="https://habr.com/ru/post/460827/">ein Artikel</a> , der gpg kritisiert) ist es seit mehr als 20 Jahren der De-facto-Standard.  Selbst der Artikel √ºber den Link findet es schwierig, ein alternatives Tool zum Verschl√ºsseln von Dateien zu benennen. </p><br><p>  Der Vorgang zum Erstellen eines geheimen Schl√ºssels in der Konsole wird beispielsweise <a href="https://habr.com/ru/post/358182/">unter habr beschrieben</a> . Warum nicht in der GUI?  Im KDE-Projekt erstellten sie ein Frontend f√ºr die GPG mit dem Namen <a href="https://kde.org/applications/utilities/org.kde.kleopatra">Kleopatra</a> .  Linux-Benutzer finden es in den Repositories und in gpg4win ist Kleopatra sofort einsatzbereit. </p><br><p> W√§hlen Sie im Men√º <code>File</code> - <code>New Key Pair</code> - <code>Create a personal OpenPGP key pair</code> . </p><br><p>  Geben Sie den Namen und die E-Mail-Adresse ein.  Sie m√ºssen sich keine Sorgen machen, dass Sie sie in Zukunft √§ndern werden.  Mit GPG k√∂nnen Sie dem Schl√ºssel nach Belieben eine neue UID hinzuf√ºgen und vorhandene l√∂schen.  Wenn Sie Ihre Git-Commits mit dem erstellten Schl√ºssel signieren m√∂chten und die entsprechenden Kontrollk√§stchen "Best√§tigt" aktivieren m√∂chten, m√ºssen Sie in Ihrem Github-Konto eine echte E-Mail-Adresse mit dem Status "Best√§tigt" angeben. </p><br><p>  Klicken Sie anschlie√üend auf <code>Advanced Settings</code> , um die Schl√ºsseleinstellungen zu konfigurieren. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/73/_t/sf/73_tsfmk36_soxx0wybhhpmmlpa.png"></div><br><p>  <code>ECDSA/EdDSA</code> Abschnitt <code>Key Material</code> <code>ECDSA/EdDSA</code> + <code>ECDH</code> .  Ich bevorzuge es, nicht den klassischen RSA-Algorithmus zu verwenden, sondern auf der Grundlage der elliptischen Kurven ed25519 / cv25519.  Ihr Hauptvorteil gegen√ºber RSA aus Sicht des Endbenutzers ist die geringere Schl√ºsselgr√∂√üe bei gleicher kryptografischer St√§rke.  Es wird argumentiert, dass der 256-Bit-Schl√ºssel ed25519 ungef√§hr so ‚Äã‚Äãstark ist wie der 3072-Bit-RSA-Schl√ºssel.  Der einzige Vorteil des letzteren ist seine hohe Verbreitung, insbesondere in Hardwaresystemen. </p><br><p>  Sie k√∂nnen auch die Kurvenfamilien Brainpool und NIST aus dem Men√º ausw√§hlen.  Letztere stehen jedoch im Verdacht, eine NSA-Hintert√ºr zu haben, und erstere haben auch geringf√ºgige Beschwerden.  Daher sind ed25519 und cv25519, die vom ber√ºhmten Kryptographen Daniel Bernstein vorgeschlagen wurden, die beste Wahl. </p><br><blockquote>  Interessant: Im aktiv beworbenen Authentifizierungsstandard FIDO U2F (an dessen Entwicklung Google aktiv beteiligt war) werden NIST-Kurven verwendet.  Beispielsweise wird auch Android Keystore unterst√ºtzt, es gibt jedoch keine Unterst√ºtzung f√ºr ed25519.  Warum ist das passiert? </blockquote><p>  Als Ergebnis werden 2 Unterschl√ºssel f√ºr elliptische Kurven erstellt.  Eine f√ºr Signaturen, die andere f√ºr die Verschl√ºsselung, was wir brauchen.  GPG erlaubt nicht, dass ein Unterschl√ºssel f√ºr beide verwendet wird, obwohl dies algorithmisch m√∂glich ist (es gibt entsprechende Funktionen zum Beispiel in der <code>libsodium</code> Bibliothek). </p><br><p>  Wenn Sie diesen Schl√ºssel f√ºr die Arbeit mit Git verwenden m√∂chten, <code>Certificate Usage</code> Abschnitt <code>Certificate Usage</code> die Elemente <code>Signing</code> und <code>Authentication</code> . </p><br><p>  Im n√§chsten Schritt wird vorgeschlagen, ein Passwort einzugeben, mit dem der Schl√ºssel gesch√ºtzt wird.  Da der Schl√ºssel zum Verschl√ºsseln aller Daten im Speicher verwendet wird, handelt es sich bei diesem Kennwort um ein Master-Kennwort.  Es lohnt sich, sich seiner Wahl mit besonderer Pedanterie zu n√§hern. </p><br><h2 id="generaciya-master-parolya">  Master-Passwort-Generierung </h2><br><p>  Nat√ºrlich k√∂nnen Sie immer eine zuf√§llige Zeichenfolge aus einer ausreichenden Anzahl (z. B. 20) Zeichen generieren.  Es ist jedoch fast unm√∂glich, sich zu erinnern, und es ist schwierig, ohne Fehler einzugeben, insbesondere auf einem Smartphone.  Aus diesem Grund empfiehlt die EFF, in Ihrem <a href="https://ssd.eff.org/en/module/creating-strong-passwords">Leitfaden</a> stattdessen Passphrasen zu verwenden. </p><br><p>  Die Methode funktioniert folgenderma√üen: Nehmen Sie ein ausreichend gro√ües W√∂rterbuch (EFF bietet mehrere W√∂rterb√ºcher an, zum Beispiel <a href="https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt">dieses</a> ) und w√§hlen Sie mindestens 6 zuf√§llige W√∂rter aus.  Sie k√∂nnen w√§hlen, wie Sie m√∂chten, auch ohne einen Computer √ºberhaupt mit einem W√ºrfel oder einer M√ºnze.  Diese Methode wird als <a href="http://world.std.com/~reinhold/diceware.html">Diceware bezeichnet</a> .  Ich habe W√ºrfel und M√ºnzen noch nicht erreicht, daher verwende ich nur das in GNU coreutils <code>shuf</code> Dienstprogramm <code>shuf</code> : </p><br><pre> <code class="plaintext hljs">$ shuf --random-source=/dev/random -n 6 ./eff_large_wordlist.txt 51345 rendering 24564 edging 65652 vivacious 31343 footprint 55261 snore 24436 earache</code> </pre> <br><p>  Wir speichern diese Passphrase an einem sicheren Ort au√üerhalb des Computers. </p><br><p>  Als Ergebnis wird ein geheimer Schl√ºssel erstellt.  Wenn Sie in der Konsole arbeiten, m√ºssen Sie h√§ufig den Fingerabdruck der Konsole angeben. Es lohnt sich, diese Nummer aufzuschreiben. </p><br><p>  Jetzt k√∂nnen Sie die Integration von gpg und git konfigurieren. </p><br><h1 id="integraciya-gpg-git-i-github">  Integration von Gpg, Git und Github </h1><br><blockquote>  Genau genommen ist dieser Artikel optional.  Der Passwort-Speicherpass ist nur ein Verzeichnis mit verschl√ºsselten Dateien, das hei√üt, er kann nach Belieben synchronisiert werden.  Google Drive, Yandex.Disk usw.  usw.  Wenn Sie git nicht verwenden m√∂chten, empfehle ich Ihnen, auf <a href="https://github.com/syncthing/syncthing">Syncthing</a> zu achten.  Dies ist ein Open-Source-Programm, das ein Minimum an Einstellungen erfordert und Dateien direkt zwischen Ger√§ten √ºbertr√§gt, ohne sie auf Servern von Drittanbietern zu speichern. </blockquote><p>  Als Git-Hosting st√∂rt sich niemand daran, seinen eigenen Server durch den Einsatz von <a href="https://github.com/go-gitea/gitea">Gitea</a> zu erh√∂hen. Dies bedeutet jedoch die Kosten f√ºr den Support und garantiert nicht unbedingt eine hohe Sicherheit und Zuverl√§ssigkeit.  Aus diesem Grund habe ich, ohne die Verwendung von Microsoft-Produkten zu verachten, einfach ein privates Repository auf Github erstellt. </p><br><p>  Der Standard-Authentifizierungsmechanismus in Git ist durch SSH.  Es versteht sich normalerweise, dass hierf√ºr ein spezieller SSH-Schl√ºssel erforderlich ist.  Es ist jedoch m√∂glich, den im vorherigen Schritt erstellten gpg-Schl√ºssel zu verwenden, ohne unn√∂tige Entit√§ten zu generieren.  Damit der gpg-Schl√ºssel (genauer gesagt der Unterschl√ºssel) von ssh verwendet werden kann, m√ºssen zwei Bedingungen erf√ºllt sein: </p><br><ol><li>  Es muss das Flag <code>A</code> - Authenticate gesetzt sein. </li><li>  Der Schl√ºsselgriff muss in die <code>~/.gnupg/sshcontrol</code> . </li></ol><br><p>  Das erste Element wurde bereits abgeschlossen, und Sie k√∂nnen mit dem Befehl keygrip abrufen </p><br><pre> <code class="plaintext hljs">gpg --list-secret-keys --with-keygrip 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7</code> </pre> <br><p>  In der gpg-Ausgabe interessieren wir uns f√ºr den Schl√ºsselgriff des Unterschl√ºssels <code>05B6641E23D720E87EE6A26020BAB214B842F2B7</code> ( <code>05B6641E23D720E87EE6A26020BAB214B842F2B7</code> ). </p><br><p>  Jetzt k√∂nnen Sie den √∂ffentlichen Schl√ºssel auf github hochladen.  Wechseln Sie zum Abschnitt <code>SSH and GPG keys</code> im <a href="https://github.com/settings/keys">Profil</a> und w√§hlen Sie <code>New SSH key</code> .  In der Konsole tippen wir </p><br><pre> <code class="plaintext hljs">$ gpg --export-ssh-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPfj81nennAoujvw1fLzGx9iED34zk5oDMYKuUcBq5wv openpgp:0x54068AC7</code> </pre> <br><p>  und kopieren Sie den resultierenden √∂ffentlichen SSH-Schl√ºssel. </p><br><p>  Git kann Commits mit gpg signieren, und github unterst√ºtzt dies.  Ich halte dies f√ºr ein n√ºtzliches Sicherheitsmerkmal.  Exportieren Sie den gpg-Befehl f√ºr den √∂ffentlichen Schl√ºssel </p><br><pre> <code class="plaintext hljs">$ gpg --export --armor 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 -----BEGIN PGP PUBLIC KEY BLOCK----- mDMEXcrHrBYJKwYBBAHaRw8BAQdA9+PzWd6ecCi6O/DV8vMbH2IQPfjOTmgMxgq5 RwGrnC+0G0hlbGxvIEhhYnIgPGZha2VAZW1haWwuY29tPoiQBBMWCAA4BQsJCAcC BhUKCQgLAgQWAgMBAh4BAheAFiEEBgnJ3+8aorON7brcwFRLVVQGiscFAl3WO2wC GyMACgkQwFRLVVQGiscg5AEAkh0a6OQS2CPiXq9bWB+wULHUGT6NYZhwZ3eUQCfH Zq0A/iFBJQkAZIFdqH84ksFbvv6K/LQy72NRJzK0tho6qFwHuDgEXcrHrBIKKwYB BAGXVQEFAQEHQEs6UVOtj5yMGxvRcMU577miH/Bh5kZWMJKHxsDBcXV4AwEIB4h4 BBgWCAAgFiEEBgnJ3+8aorON7brcwFRLVVQGiscFAl3Kx6wCGwwACgkQwFRLVVQG isea8wD/X5JSJW0PMu/KucytUZZo8obHa86/TUwH/8+xQ3+djuEBALugbQRmCIr5 /JYO7x5PNA0QYqhh7LIZ9nKYp0mhqpcO =dc89 -----END PGP PUBLIC KEY BLOCK-----</code> </pre> <br><p>  und kopieren Sie, was mit dem <code>New GPG key</code> passiert ist. <br>  Weitere Aktionen sind spezifisch f√ºr Ihr Betriebssystem. </p><br><h2 id="integraciya-gpg-i-git-linux">  Integration von GPG und Git (Linux) </h2><br><p>  Der von git verwendete OpenSSH-Client kann Schl√ºssel auf zwei Arten empfangen: aus dem <code>~/.ssh</code> und √ºber den vom <code>ssh-agent</code> Daemon erstellten Socket.  Letzterer kann <code>gpg-agent</code> , den wir verwenden werden.  In die Datei <code>~/.gnupg/gpg-agent.conf</code> muss die Zeile <code>enable-ssh-support</code> . </p><br><p>  Starten Sie den gpg-agent mit dem Befehl neu </p><br><pre> <code class="plaintext hljs">gpg-connect-agent reloadagent /bye</code> </pre> <br><p>  Danach wird ein Socket bei erstellt </p><br><pre> <code class="plaintext hljs">${XDG_RUNTIME_DIR}/gnupg/S.gpg-agent.ssh</code> </pre> <br><p>  Dieser Pfad (abh√§ngig von der Distribution) muss in die Umgebungsvariable <code>$SSH_AUTH_SOCK</code> werden und wird von ssh √ºbernommen.  Wir geben den Befehl in die Konsole ein </p><br><pre> <code class="plaintext hljs">ssh -T git@github.com</code> </pre> <br><p>  Wenn alles geklappt hat, wird nach Eingabe des Master-Passworts eine Meldung √ºber die erfolgreiche Authentifizierung angezeigt. </p><br><h2 id="integraciya-gpg-i-git-windows">  Integration von gpg und git (Windows) </h2><br><p>  In j√ºngerer Zeit hat Microsoft OpenSSH zur Anzahl der f√ºr die Installation verf√ºgbaren Windows-Komponenten hinzugef√ºgt und auch die Unterst√ºtzung f√ºr Sockets wie <code>AF_UNIX</code> , beispielsweise dasselbe <code>SSH_AUTH_SOCK</code> .  Win32-OpenSSH kann jedoch nicht mit gpg4win interagieren, da weiterhin nur Named Pipes verwendet werden. </p><br><p>  Daher muss der immergr√ºne Kitt installiert werden.  Wir schreiben in die Datei </p><br><pre> <code class="plaintext hljs">~/AppData/Roaming/gnupg/gpg-agent.conf</code> </pre> <br><p>  <code>enable-putty-support</code> und starte gpg-agent neu.  Danach wird er so tun, als w√§re er ein Festzug - der D√§mon der Schl√ºssel.  Die <code>sshcontrol</code> Datei muss sich im selben Ordner befinden. </p><br><p>  Damit der Git-Client Putty verwenden kann, m√ºssen Sie die Umgebungsvariable <code>GIT_SSH</code> mit dem Pfad zu <code>plink.exe</code> .  Zum Beispiel habe ich das </p><br><pre> <code class="plaintext hljs">C:\ProgramData\chocolatey\bin\PLINK.EXE</code> </pre> <br><blockquote>  √úbrigens √ºber git.  Der normalerweise installierte <code>git for windows</code> Client enth√§lt eine Menge Unn√∂tiges (zumindest nicht, damit Gopass funktioniert), zum Beispiel eine eigene Implementierung von OpenSSH.  Die Entwickler stellen jedoch leichtere Versionen her, die <a href="https://github.com/git-for-windows/git/releases">auf Github</a> heruntergeladen werden <a href="https://github.com/git-for-windows/git/releases">k√∂nnen</a> .  Zum Beispiel gibt es 2-mal kleineres MinGit und riskante Leute k√∂nnen MinGit-busybox ausprobieren.  Die busybox-Version entstand aufgrund des Wunsches der Entwickler, einen Git-Client mit der Win32-API ohne Ebenen wie MSYS2 zu erstellen.  Allerdings enth√§lt mingit-busybox nach eigenen Angaben immer noch viele Bugs.  Mehr √ºber diese Bem√ºhungen k√∂nnen Sie im <a href="https://github.com/git-for-windows/git/issues/1439">Ticket</a> nachlesen. </blockquote><p>  Stellen Sie sicher, dass gpg-agent ausgef√ºhrt wird ( <code>gpg-connect-agent /bye</code> ) und √ºberpr√ºfen Sie die Verbindung zu github: </p><br><pre> <code class="plaintext hljs">plink git@github.com</code> </pre> <br><h2 id="nastroyka-git">  Git-Setup </h2><br><p>  Nichts ungew√∂hnliches hier.  Ich denke, die Befehle k√∂nnen ohne Kommentar gegeben werden: </p><br><pre> <code class="plaintext hljs">git config --global user.name "Hello Habr" git config --global user.email fake@email.com git config --global user.signingKey 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 git config --global gpg.program /usr/bin/gpg git config --global commit.gpgSign true</code> </pre> <br><p>  Das Element <code>gpg.program</code> ben√∂tigt, wenn sich gpg nicht im <code>PATH</code> . </p><br><h1 id="bekap-sekretnogo-klyucha">  Geheime Schl√ºsselsicherung </h1><br><p>  Der geheime Schl√ºssel sollte genauso sicher gespeichert werden wie die Passphrase, dh au√üerhalb des Computers.  Sie k√∂nnen einfach eine lange Folge von Zahlen drucken, diese aber erkennen oder √ºber die Tastatur eingeben - dies ist nichts f√ºr schwache Nerven.  Daher ziehe ich es vor, einen QR-Code zu generieren, der mit jedem Smartphone einfach zu scannen ist.  <code>qrencode</code> gibt es ein spezielles <code>qrencode</code> Programm.  Ein QR-Code-Bild wird wie folgt generiert: </p><br><pre> <code class="plaintext hljs">gpg --export-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 | qrencode --8bit --output secret-key.qr.png</code> </pre> <br><p>  Je weniger unn√∂tige Informationen im Backup sind, desto besser.  Hier ist eine sehr kleine Schl√ºsselgr√∂√üe ed25519.  Danke an Daniel Bernstein! </p><br><p>  Es gibt ein spezielles <a href="http://www.jabberwocky.com/software/paperkey/">Paperkey-</a> Dienstprogramm, mit dem Sie die Datenmenge auf das Limit reduzieren k√∂nnen.  Der Preis f√ºr die Reduzierung ist, dass der geheime Schl√ºssel aus einem solchen Backup nur wiederhergestellt werden kann, wenn es einen √∂ffentlichen gibt.  Das GPG-√ñkosystem verf√ºgt √ºber spezielle Server zum Speichern √∂ffentlicher Schl√ºssel, die Sie nicht nur im Artikel <a href="https://eax.me/gpg/">https://eax.me/gpg/</a> nachlesen k√∂nnen. </p><br><p>  Ein Paperkey-Backup wird wie folgt erstellt: </p><br><pre> <code class="plaintext hljs">gpg --export-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 &gt; pubkey.asc gpg --export-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 | paperkey --output-type raw | qrencode --8bit --output secret-key.qr.png</code> </pre> <br><p>  Die zweite Regel der Sicherung: Die Sicherung existiert erst, wenn die F√§higkeit zur Wiederherstellung von Daten best√§tigt wurde.  Deshalb f√ºhren wir einen Stresstest durch.  L√∂schen Sie den geheimen Schl√ºssel mit dem Befehl </p><br><pre> <code class="plaintext hljs">gpg --delete-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7</code> </pre> <br><p>  Dann scannen wir den QR-Code und importieren den Schl√ºssel zur√ºck in das GPG.  Als QR-Code-Scanner f√ºr Android mag ich <a href="https://github.com/markusfisch/BinaryEye">BinaryEye</a> , ein kostenloses Programm mit einer benutzerfreundlichen Oberfl√§che.  Im Bild unten - Sicherung des geheimen Schl√ºssels aus diesem Artikel. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ej/xv/un/ejxvunen3dhkjbktvla6clwajjm.png"></div><br><pre> <code class="plaintext hljs">paperkey --pubring pubkey.asc --secrets from_qr.asc &gt; secretkey.asc gpg --import ./secretkey.asc</code> </pre> <br><p>  Ich hoffe, Sie werden diesen Schl√ºssel nirgendwo verwenden.  Es wird nur zu Illustrationszwecken erstellt. </p><br><p>  Wenn alles funktioniert, k√∂nnen Sie weitermachen. </p><br><h1 id="ispolzovanie-gopass">  Mit (go) pass </h1><br><p>  Jetzt, da wir einen sicher gespeicherten und sicheren privaten Schl√ºssel haben und die Integration mit git funktionieren, k√∂nnen wir den Pass selbst verwenden.  Ich bevorzuge Gopass, da diese alternative Bindung unter Windows funktioniert. <br>  Initialisieren Sie die Passwortspeicherung mit dem Befehl </p><br><pre> <code class="plaintext hljs">gopass init</code> </pre> <br><p>  und w√§hlen Sie den gew√ºnschten geheimen Schl√ºssel aus der Liste aus. </p><br><p>  Die Arbeit mit git geschieht auf die gleiche Weise wie bei einem regul√§ren Repository, nur die Befehlszeile muss einen <code>(go)pass</code> hinzuf√ºgen.  Wir initialisieren das Repository und f√ºgen dort den gew√ºnschten Ursprung hinzu: </p><br><pre> <code class="plaintext hljs">gopass git init gopass git remote add origin git@github.com:xxx/taisho-secrets.git</code> </pre> <br><p>  Die Adresse finden Sie auf der Repository-Seite von Github, indem Sie auf die Schaltfl√§che Klonen <code>Clone or download</code> klicken. </p><br><p>  Gopass hat einen bestimmten Befehl </p><br><pre> <code class="plaintext hljs">gopass sync</code> </pre> <br><p>  Durchf√ºhren sowohl des <code>git pull</code> als auch des <code>git push</code> , d. h. der vollst√§ndigen Synchronisation. </p><br><p>  Der Standardspeicher wird im Ordner <code>~/.password-store</code> Sie k√∂nnen jedoch auch Ihren eigenen Pfad angeben. <br>  Um mit Passw√∂rtern zu arbeiten, unterst√ºtzt die Konsole die Befehle ls, cp, mv, search, create usw.  Sie k√∂nnen die vollst√§ndige Liste <code>gopass --help</code> , indem <code>gopass --help</code> . Ich pers√∂nlich verwende jedoch nicht die Konsole, sondern das Browser-Plugin in 95% der <code>gopass --help</code> . </p><br><h2 id="integraciya-s-brauzerom">  Browser-Integration </h2><br><p>  Das Browser-Plugin hei√üt <a href="https://github.com/gopasspw/gopassbridge">gopass bridge</a> und befindet sich im <a href="https://github.com/gopasspw/gopassbridge">Chrome-</a> und Firefox-Store (siehe Link). </p><br><p>  Um das Plugin mit gopass selbst zu verbinden, ben√∂tigen Sie ein Hilfsskript und ein Manifest f√ºr natives Messaging.  Sie werden vom Team erstellt. </p><br><pre> <code class="plaintext hljs">gopass jsonapi configure</code> </pre> <br><p>  Dadurch k√∂nnen wir einen Browser und den Speicherort des Skripts ausw√§hlen. </p><br><p>  √úberpr√ºfen Sie, wie alles funktioniert.  Erstelle ein neues Passwort: </p><br><pre> <code class="plaintext hljs">gopass new habr</code> </pre> <br><p>  Wir beantworten alle Fragen und sparen.  GPG fordert Sie auf, ein Hauptkennwort f√ºr die Arbeit mit dem privaten Schl√ºssel einzugeben. </p><br><p>  Jetzt √∂ffnen wir das Men√º des Plugins mit einem charakteristischen blauen Gopher und wenn alles gut gegangen ist, k√∂nnen wir dort unser Passwort finden. </p><br><h2 id="totp-klyuchi">  TOTP-Tasten </h2><br><p>  Pers√∂nlich verwende ich <a href="https://freeotp.github.io/">FreeOTP</a> , Sie k√∂nnen jedoch mit diesen Schl√ºsseln mit pass arbeiten.  Benutzer des urspr√ºnglichen Passes m√ºssen die <a href="https://github.com/tadfisher/pass-otp">pass-otp-Erweiterung</a> installieren, und in gopass und APS (siehe unten) sind die erforderlichen Funktionen sofort verf√ºgbar. </p><br><p>  Um dem Passwortspeicher mit pass-otp einen TOTP-Schl√ºssel hinzuzuf√ºgen, erhalten wir die URL (beginnend mit <code>otpauth://</code> ) und geben den Befehl ein </p><br><pre> <code class="plaintext hljs">pass otp insert totp-secret</code> </pre> <br><p>  Ob die resultierende Authentifizierung als Zwei-Faktor bezeichnet werden kann, ist ein strittiger Punkt.  KeePassXC-Entwickler empfehlen, TOTP-Schl√ºssel in einer separaten Datenbank zu speichern, die durch ein anderes Kennwort gesch√ºtzt ist.  Im Vorbeigehen kann dies auch gemacht werden. </p><br><h1 id="integraciya-s-android">  Android-Integration </h1><br><p>  Die Implementierung von GnuPG f√ºr Android hei√üt <a href="https://github.com/open-keychain/open-keychain">OpenKeychain</a> .  Um es zu konfigurieren, gehen Sie einfach zum Men√º "Schl√ºsselverwaltung" und importieren Sie den zuvor erstellten geheimen Schl√ºssel.  Der einzige Nachteil von OpenKeychain f√ºr mich pers√∂nlich ist, dass es keine Fingerabdrucksperre gibt. </p><br><p>  Die Pass-Implementierung f√ºr Android hei√üt <a href="https://github.com/android-password-store/Android-Password-Store">Android-Password-Store</a> oder einfach APS. </p><br><p>  Installieren Sie APS und f√ºhren Sie es aus.  Rufen Sie vor dem Synchronisieren des Passwortspeichers das Men√º "Einstellungen" auf.  Dort ben√∂tigen wir folgende Gegenst√§nde: </p><br><ol><li>  <code>  git</code> .  Die resultierende URL sollte mit der auf der Repository-Seite von github angegebenen √ºbereinstimmen.  Art der Autorisierung - <code>OpenKeychain</code> . </li><li>  <code>Git utils</code> .  Geben Sie in diesem Abschnitt den Benutzernamen und die E-Mail-Adresse des GPG-Schl√ºssels an. </li><li>  <code> OpenPGP</code> .  W√§hlen Sie <code>OpenKeychain</code> . </li><li>  <code></code>  Diese zuletzt aufgetauchte Funktion umfasst das Ausf√ºllen von Kennw√∂rtern in Anwendungen unter Android 8.0+. </li></ol><br><blockquote>  Hinweis f√ºr Benutzer von Huawei-Smartphones und f√ºr alle anderen: OpenKeychain, APS, BinaryEye, FreeOTP sowie Syncthing, Telegram, Tachiyomi, KDE Connect und vieles mehr sind in <a href="https://f-droid.org/">F-Droid</a> verf√ºgbar.  Google Play-Nutzer sollten dies zu sch√§tzen wissen: ein Softwarekatalog, der keine Anzeigen, Rootkits oder einfach nur Junk-Software aus dem <a href="https://habr.com/ru/post/423889/">ber√ºhmten Tonsky-Artikel enth√§lt</a> . <br><br>  Vor der automatischen Vervollst√§ndigung in APS habe ich <a href="https://github.com/PhilippC/keepass2android">keepass2android verwendet</a> .  Es ist aus dem urspr√ºnglichen Grund nicht in F-Droid enthalten: Es ist in Xamarin geschrieben, aber F-Droid-Betreuer k√∂nnen dieses Framework <a href="https://gitlab.com/fdroid/fdroiddata/issues/1529">seit 9 Monaten</a> nicht mehr auf ihrem Build-Server installieren.  Jemand macht etwas. </blockquote><p>  Jetzt k√∂nnen Sie klonen.  W√§hlen Sie auf dem Hauptbildschirm "Vom Server klonen", geben Sie den gew√ºnschten Speicherort f√ºr das Repository an und √ºberpr√ºfen Sie die Git-Einstellungen. </p><br><p>  Wenn ein Versuch, mit git zu arbeiten, zu einem Fehler f√ºhrt (dies war wahrscheinlich in fr√ºheren Versionen von APS der <code>jgit</code> eine veraltete Version der <code>jgit</code> Bibliothek aus dem Eclipse-Projekt verwendet wurde), gibt es immer noch Syncthing. </p><br><h1 id="zaklyuchenie">  Fazit </h1><br><p>  Nat√ºrlich ist pass nicht so einfach zu konfigurieren.  F√ºr diesen Preis k√∂nnen Sie jedoch darauf vertrauen, dass die von uns verwendeten Tools (sowie Leute wie Linus Torvalds oder Edward Snowden) nicht an einem Punkt veraltet sind, das Datenformat nicht √§ndern und nicht ohne Support sein werden.  In diesem Fall wird durch die einfache modulare Architektur von pass die Erstellung alternativer Clients und Erweiterungen gef√∂rdert. </p><br><p>  Wenn Sie sich gegen die Verwendung von pass entscheiden, hoffe ich, dass einige der im Artikel genannten Programme f√ºr sich allein von Nutzen sind. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479540/">https://habr.com/ru/post/de479540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479524/index.html">Service for Active Restore oder die Geschichte eines Industrieprojekts in Innopolis</a></li>
<li><a href="../de479530/index.html">Ultraschallkoordinatensystem 2.0</a></li>
<li><a href="../de479534/index.html">Kubernetes 1.17 - wie Sie ein Upgrade durchf√ºhren und nicht das gesamte Fehlerbudget ausgeben</a></li>
<li><a href="../de479536/index.html">Lastausgleich in Zimbra Open-Source Edition mit HAProxy</a></li>
<li><a href="../de479538/index.html">Technologie f√ºhrt die Menschheit in den Niedergang. Es ist Zeit, etwas zu √§ndern</a></li>
<li><a href="../de479542/index.html">Wie schreibe ich meinen eigenen √úbersetzer?</a></li>
<li><a href="../de479548/index.html">Der Weg vom Praktikum zum Auftritt bei HighLoad 2019</a></li>
<li><a href="../de479550/index.html">MVC in Einheit mit skriptf√§higen Objekten. Teil 3</a></li>
<li><a href="../de479552/index.html">DevOps-Ingenieure gibt es nicht. Wer existiert dann und was ist dagegen zu tun?</a></li>
<li><a href="../de479554/index.html">Gegen alle: In-App-Sprachassistenten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>