<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüöí üêë üí± Comparaison et s√©lection de syst√®mes de migration de donn√©es üôÖüèø üöü üë©üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comparaison et s√©lection de syst√®mes de migration de donn√©es 


 Le mod√®le de donn√©es dans le processus de d√©veloppement a la propri√©t√© de changer et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comparaison et s√©lection de syst√®mes de migration de donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/crosstech/blog/453930/"><h2>  Comparaison et s√©lection de syst√®mes de migration de donn√©es </h2><br><img src="https://habrastorage.org/webt/gk/bk/fo/gkbkfoq2o5erkxt4lvc063hkvkc.jpeg"><br><br>  Le mod√®le de donn√©es dans le processus de d√©veloppement a la propri√©t√© de changer et √† un moment donn√©, il cesse de correspondre √† la base de donn√©es.  Bien s√ªr, la base de donn√©es peut √™tre supprim√©e, puis ORM cr√©era une nouvelle version qui correspondra au mod√®le, mais une telle proc√©dure entra√Ænera la perte de donn√©es existantes.  Ainsi, la fonction du syst√®me de migration est de garantir que, suite √† la modification du sch√©ma, le synchroniser avec le mod√®le de donn√©es dans l'application sans perdre les donn√©es existantes. <br><br>  Dans cet article, nous aimerions consid√©rer diff√©rents outils pour g√©rer les migrations de bases de donn√©es.  Nous esp√©rons que cette revue sera utile aux d√©veloppeurs confront√©s √† ce choix. <br><a name="habracut"></a><br><h3>  D√©fi </h3><br>  Notre soci√©t√© d√©veloppe actuellement activement la prochaine g√©n√©ration du produit - Docs Security Suite (DSS).  La partie serveur est √©crite sur .Net Core et Entity Framework Core est respectivement utilis√©e comme SGBD.  Lors de la conception de l'application, nous utilisons l'approche Code First. <br><br>  Le mod√®le de domaine de l'application est cr√©√© par plusieurs d√©veloppeurs en m√™me temps - chacun est responsable de sa propre partie logique du syst√®me. <br><br>  Dans la g√©n√©ration pr√©c√©dente de DSS, le classique Entity Framework Migrations (EF 6) √©tait utilis√© comme syst√®me de gestion des migrations.  Cependant, certaines r√©clamations se sont accumul√©es contre elle, la principale √©tant que EF n'a pas une approche saine pour r√©soudre les conflits de version.  Ce fait nous d√©range toujours lors de la correction de bogues dans le cadre du support, il a donc √©t√© d√©cid√© d'envisager des options alternatives. <br><br>  √Ä la suite de la discussion, les exigences suivantes pour le syst√®me de gestion de la migration ont √©t√© form√©es: <br><br><ol><li>  Prise en charge de divers SGBD.  Obligatoire MS SQL Server, PostgreSQL, Oracle, mais vous pouvez potentiellement utiliser d'autres </li><li>  Travaillez avec ORM.  Initialement, l'utilisation d'EF Core √©tait suppos√©e, mais au stade de la conception, d'autres ORM √©taient pr√™ts √† envisager </li><li>  Autog√©n√©ration des migrations.  √âtant donn√© le d√©veloppement de Code First, je voudrais √©viter d'avoir √† migrer avec des stylos </li><li>  Conflits de version.  Dans un environnement de d√©veloppement distribu√© avec fusion, EF Core peut se bloquer dans les conflits.  Cela devient un probl√®me important, car diff√©rentes parties de l'application sont cr√©√©es par diff√©rents d√©veloppeurs, vous devez donc passer beaucoup de temps pour chacune </li><li>  Documentation et support avanc√©s.  Ici, il nous semble, aucune explication n'est n√©cessaire </li><li>  Gratuit.  Le crit√®re conditionnel, puisque les syst√®mes ne sont pas tr√®s chers ou chers, mais id√©al dans la commodit√©, nous √©tions √©galement pr√™ts √† consid√©rer </li></ol><br>  √Ä la suite d'une petite √©tude, les options suivantes ont √©t√© trouv√©es et jug√©es souhaitables: <br><br><ol><li>  Migrations de c≈ìur EF </li><li>  Dbup </li><li>  RoundhousE </li><li>  ThinkingHome.Migrator </li><li>  Migrateur courant </li></ol><br><h3>  Et maintenant un peu plus </h3><br><img src="https://habrastorage.org/webt/en/rv/1c/enrv1ctva0jyb5s6mlpawv_v0gi.jpeg"><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Migrations de base EntityFramework</a></b> <br><br>  Naturellement, c'√©tait la premi√®re et principale option de choix.  Un outil natif qui fonctionne hors de la bo√Æte sans danser avec un tambourin.  Une grande quantit√© de documentation, officielle et pas tr√®s, simplicit√©, etc.  Cependant, les revendications pr√©sent√©es √† l'EF classique sont tout √† fait pertinentes pour l'EF Core. <br><br>  Ainsi, les avantages d'EF Core sont mis en √©vidence: <br><br><ul><li>  Support Microsoft, documentation, y compris en russe, une √©norme communaut√© </li><li>  Migration automatique bas√©e sur CodeFirst </li><li>  Par rapport √† EF 6, l'instantan√© de la base de donn√©es n'est plus stock√© dans EF Core.  Lorsque vous travaillez avec EF Core dans Code First, vous n'avez plus √† d√©ployer de base de donn√©es </li><li>  Puisque nous dansons sur Code First - il est possible d'effectuer une migration vers tous les fournisseurs d'acc√®s aux donn√©es requis </li><li>  Concernant les fournisseurs - PostgreSQL, Oracle, etc., etc., etc., et m√™me - MS SQL Server sont pris en charge  </li></ul><br>  Ainsi que les inconv√©nients: <br><br><ul><li>  La r√©solution des conflits est rest√©e au m√™me niveau.  Il est n√©cessaire de construire une s√©quence de migrations et de mettre √† jour les images de base de donn√©es </li><li>  D√©pendance √† l'√©gard des mod√®les sur la base desquels les migrations sont g√©n√©r√©es </li></ul><br>  <b>Dbup</b> <br><br><img src="https://habrastorage.org/webt/th/ip/le/thipledfm_ndz51kplcdyphsq7w.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dbup.github.io</a> <br><br>  DbUp est une biblioth√®que .NET qui est install√©e par NuGet et aide √† apporter des modifications √† SQL Server.  Il garde la trace des scripts de changement qui ont d√©j√† √©t√© ex√©cut√©s et lance ceux qui sont n√©cessaires pour mettre √† jour la base de donn√©es.  La biblioth√®que est n√©e du projet de moteur de blog open source ASP.NET et existe sous la licence MIT, et le code est sur GitHub.  Les migrations sont d√©crites √† l'aide de T-SQL. <br><br>  Quels sont les avantages: <br><br><ul><li>  Prise en charge d'un grand nombre de SGBD (MS SQL Server, PstgreSQL, MySQL) </li><li>  Comme les scripts sont √©crits en T-SQL, ils semblent assez simples </li><li>  Les conflits sont √©galement r√©solus √† l'aide de SQL </li></ul><br>  Un contre: <br><br><ul><li>  Avec toute la vari√©t√© des SGBD pris en charge, Oracle ne fait pas partie d'eux. </li><li>  N'interagit pas avec ORM </li><li>  L'√©criture de scripts T-SQL avec des stylets n'est pas ce que nous visions </li><li>  La documentation et la communaut√© sont telles quelles, bien qu'elles ne soient peut-√™tre pas n√©cessaires dans le contexte de l'√©criture de scripts SQL. </li></ul><br>  <b>RoundhousE</b> <br><br><img src="https://habrastorage.org/webt/go/ll/-e/goll-eicd6htkeqnvno4qtuxk1w.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/chucknorris/roundhouse</a> <br><br>  Cet outil de gestion de la migration, distribu√© sous la licence Apache 2.0, comme le pr√©c√©dent, s'ex√©cute sur le moteur de migration T-SQL.  Apparemment, les d√©veloppeurs se sont concentr√©s sur la r√©solution de probl√®mes techniques concernant la prise en charge du SGBD, plut√¥t que sur la cr√©ation d'un processus de d√©veloppement confortable. <br><br>  Avantages: <br><br><ul><li>  Prend en charge le SGBD n√©cessaire (y compris Oracle) </li></ul><br>  Inconv√©nients: <br><br><ul><li>  Oracle (ainsi qu'Access non pertinent pour nous) n'est pas pris en charge sur .NET Core, uniquement sur .NET Full Framework </li><li>  Ne fonctionne pas avec ORM </li><li>  Il y a encore moins de documentation que l'outil pr√©c√©dent </li><li>  Encore une fois - les migrations sont √©crites dans des scripts </li></ul><br>  <b>ThinkingHome.Migrator</b> <br><br><img src="https://habrastorage.org/webt/jc/rk/sb/jcrksb-jfsvr4zq_wofil0jir5c.jpeg"><br><br>  Un outil pour la migration versionn√©e d'un sch√©ma de base de donn√©es pour la plate-forme .NET Core, distribu√© sous la licence MIT.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le d√©veloppeur lui-m√™me a √©crit il y a pr√®s d'un an sur la derni√®re version</a> . <br><br>  Avantages: <br><br><ul><li>  Aiguis√© sous .NET Core </li><li>  Impl√©mentation de la s√©quence de branchement des migrations </li><li>  Journalisation de la migration impl√©ment√©e </li></ul><br>  Inconv√©nients: <br><br><ul><li>  Derni√®re mise √† jour - il y a un an.  Apparemment, le projet n'est pas pris en charge. </li><li>  Non pris en charge par Oracle (l'article indique que cela est d√ª √† l'absence d'une impl√©mentation stable pour .NET Core - mais il y a un an) </li><li>  G√©n√©ration automatique des migrations manquante </li></ul><br>  En g√©n√©ral, le projet semble prometteur, surtout s'il se d√©velopperait, mais nous devions prendre une d√©cision ici et maintenant. <br><br>  <b>Migrateur courant</b> <br><br><img src="https://habrastorage.org/webt/nz/nj/0t/nznj0tjqevhr0mofgo9qeoz7i7q.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/fluentmigrator/fluentmigrator</a> <br><br>  L'outil de migration le plus populaire avec une grande arm√©e de fans.  Distribu√© sous la licence Apache 2.0.  Comme indiqu√© dans la description, il s'agit d'une plate-forme de migration pour .NET, similaire √† Ruby on Rails Migrations.  Les modifications apport√©es au sch√©ma de base de donn√©es sont d√©crites dans les classes en C #. <br><br>  Il y a des avantages: <br><br><ul><li>  Prise en charge du SGBD n√©cessaire </li><li>  Prise en charge de .NET Core </li><li>  Grande communaut√© d√©velopp√©e </li><li>  Les conflits de migrations sont r√©solus de mani√®re s√©quentielle - l'ordre d'ex√©cution est indiqu√© pour les migrations.  De plus, en cas de conflit autour d'une entit√©, lors de la fusion de code, sa solution s'effectue de la m√™me mani√®re que dans le reste du code </li><li>  Il existe des profils qui s'ex√©cutent apr√®s une migration r√©ussie.  Et ils peuvent transporter des fonctions de service. La derni√®re mise √† jour remonte √† un mois, c'est-√†-dire que le projet vit </li></ul><br>  Quant aux inconv√©nients, voici: <br><br><ul><li>  G√©n√©ration automatique des migrations manquante </li><li>  Pas de connexion avec les mod√®les EF </li><li>  Aucun instantan√© de base de donn√©es </li></ul><br><h3>  Quel a √©t√© notre choix? </h3><br><img src="https://habrastorage.org/webt/fm/1e/5r/fm1e5rub5hfdlr3rr8ugmlccvig.jpeg"><br><br>  Le d√©bat le plus houleux a tourn√© autour de deux param√®tres: l'auto-g√©n√©ration des migrations et la r√©solution saine des conflits.  D'autres facteurs ont fait beaucoup moins peur.  En cons√©quence, √† la suite de la discussion, l'√©quipe a d√©cid√© d'utiliser Fluent Migrator dans le nouveau projet.  Car la r√©solution des conflits √† l'avenir apportera beaucoup plus d'avantages. <br><br><h4>  Conclusions </h4><br>  Bien s√ªr, il n'y a pas d'outils parfaits.  Nous avons donc d√ª prioriser notre ¬´liste de souhaits¬ª pour un choix.  Cependant, d'autres facteurs peuvent √™tre d√©cisifs pour d'autres √©quipes et d'autres t√¢ches.  Nous esp√©rons que cet article vous aidera √† faire un choix. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453930/">https://habr.com/ru/post/fr453930/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453908/index.html">RTOS Neutrino dans les ordinateurs industriels</a></li>
<li><a href="../fr453914/index.html">Instructions d'installation du client de test TON</a></li>
<li><a href="../fr453916/index.html">Comment vous prot√©ger contre les escrocs mobiles</a></li>
<li><a href="../fr453920/index.html">Comment prendre le contr√¥le de votre infrastructure r√©seau. Chapitre quatre Automatisation Mod√®les</a></li>
<li><a href="../fr453926/index.html">Fonctionnement et fonctionnement du service d'autopartage</a></li>
<li><a href="../fr453932/index.html">Quelques mots pour d√©fendre le monolithe</a></li>
<li><a href="../fr453934/index.html">11 questions √† discuter avant de commencer √† travailler</a></li>
<li><a href="../fr453938/index.html">Suivi des v√©los vol√©s NB-IoT</a></li>
<li><a href="../fr453942/index.html">√Ä propos de l'√©thique avec l'exemple du PMI Codex</a></li>
<li><a href="../fr453944/index.html">Insectes masqu√©s int√©gr√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>