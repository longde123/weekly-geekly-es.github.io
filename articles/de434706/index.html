<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÖ ‚õ∑Ô∏è üöΩ UDB. Was ist das Teil 3. Datenpfad-FIFO üë©üèΩ‚Äçü§ù‚Äçüë®üèº üëàüèª üí´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir √ºbersetzen weiterhin die propriet√§re Dokumentation von Cypress in UDB-Bl√∂cke. Au√üerdem stimmt alles sehr gut √ºberein. Um den praktischen Artikel √º...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. Was ist das Teil 3. Datenpfad-FIFO</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434706/"><img src="https://habrastorage.org/webt/et/v5/rr/etv5rr-xdmsl0tyw4vtp_doh75k.jpeg"><br><br>  Wir √ºbersetzen weiterhin die propriet√§re Dokumentation von Cypress in UDB-Bl√∂cke.  Au√üerdem stimmt alles sehr gut √ºberein.  Um den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">praktischen Artikel √ºber UDB</a> fortzusetzen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, m√ºssen Sie</a> FIFO verwenden, und im theoretischen Teil haben wir die genaue Beschreibung dieser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel gefunden</a> .  Deshalb beginnen wir, sie im Detail zu studieren. <br><a name="habracut"></a><br>  Der allgemeine Inhalt des Zyklus ‚ÄûUDB.  Was ist das? " <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1. Einf√ºhrung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pld.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2. Datenpfad.</a> <br>  Teil 3. Datenpfad-FIFO.  (Aktueller Artikel) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 4. Datenpfad ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 5. Datenpfad.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">N√ºtzliche Kleinigkeiten.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 6. Management- und Statusmodul.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 7. Steuermodul f√ºr Timing und Reset</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 8. Adressierung von UDB</a> <br><br><h2>  21.3.2.2 Datenpfad-FIFO </h2><br><h3>  FIFO-Modi und -Konfigurationen </h3><br>  F√ºr jeden FIFO-Puffer stehen verschiedene Betriebsarten und Konfigurationen zur Verf√ºgung: <br><br>  Tabelle 21-2.  FIFO-Modi und -Konfigurationen. <br><div class="scrollable-table"><table><tbody><tr><th>  Modus </th><th>  Beschreibung </th></tr><tr><td>  Eingabe / Ausgabe <br>  (Eingabe- / Ausgabepuffer) </td><td>  Im Eingangspuffermodus schreibt die CPU oder der DMA <br>  Daten im FIFO und Datapath liest sie.  Im Modus <br>  Ausgabepufferdaten gelangen von in den FIFO <br>  Datenpfad und liest sie von dort CPU oder DMA. </td></tr><tr><td>  Einzelpuffer <br>  (Einzelpuffer) </td><td>  FIFO arbeitet als einzelner Puffer ohne Status. <br>  Die im FIFO aufgezeichneten Daten sind sofort lesbar und k√∂nnen <br>  jederzeit √ºberschrieben werden. </td></tr><tr><td>  Ebene / Kante <br>  (Level / Delta) </td><td>  Der Parameter, der f√ºr das Laden von FIFO aus Datapath verantwortlich ist. <br>  kann durch Pegel oder Differential ausgel√∂st werden. </td></tr><tr><td>  Normal / schnell <br>  (Normal / schnell) </td><td>  Parameter, der f√ºr das Laden des FIFO aus der Quelle verantwortlich ist <br>  Datenpfad: Er wird mit der Frequenz des ausgew√§hlten Datenpfads getaktet. <br>  Taktquelle (normal) oder Busfrequenz (schnell). <br>  Auf diese Weise k√∂nnen Sie mit der h√∂chsten Frequenz aufnehmen. <br>  im System (Busfrequenz), unabh√§ngig von der Datenpfad-Taktfrequenz. </td></tr><tr><td>  Software-Erfassung <br>  (Software-Erfassung) </td><td>  Wenn dieser Modus aktiviert ist und sich FIFO im Modus befindet <br>  Ausgabepuffer, CPU- oder DMA-bezogen lesen <br>  Batterie (A0 f√ºr F0, A1 f√ºr F1) wird initialisiert <br>  Batteriewert synchron zum FIFO √ºbertragen. <br>  Der erfasste Wert ist sofort vom FIFO lesbar. <br>  Wenn die Verkettungsunterst√ºtzung aktiviert ist, <br>  Die Operation folgt der Kette zum MS-Block, so dass <br>  Datapath k√∂nnte ein atomares Lesen von Multibyte durchf√ºhren <br>  Werte. </td></tr><tr><td>  Asynch <br>  (Asynchron) </td><td>  Wenn die Datapach- und Systembusuhren nicht sind <br>  synchronisiert k√∂nnen FIFO-Statussignale sein <br>  entweder an den Rest des Datenpfads weitergeleitet <br>  direkt von der Datapath-Taktfrequenz getaktet, <br>  oder mit doppelter Synchronisation im Asynch-Modus. </td></tr><tr><td>  Unabh√§ngige Uhrpolarit√§t <br>  (Unabh√§ngige Uhrpolarit√§t) </td><td>  Jedes FIFO hat ein Steuerbit zum Invertieren <br>  FIFO-Taktpolarit√§t gegen√ºber Datenpfaduhr. </td></tr></tbody></table></div><br>  Abbildung 21-7 zeigt die m√∂glichen Konfigurationsoptionen f√ºr das FIFO-Paar in Abh√§ngigkeit von den jeweils ausgew√§hlten Ein- / Ausgabemodi.  Befindet sich ein FIFO im Eingangsmodus und der andere im Ausgangsmodus, erhalten wir die RX / TX-Konfiguration.  Ein typisches Beispiel, bei dem eine solche Konfiguration erforderlich ist, ist der SPI-Bus-Controller.  Die <b>Dual-Capture-</b> Konfiguration (beide FIFOs sind f√ºr die Ausgabe konfiguriert) erm√∂glicht die unabh√§ngige Erfassung des A0- und A1-Paares oder zwei unabh√§ngige Erfassung der A0- oder A1-Register.  Schlie√ülich ist es im <b>Dual-Buffer-</b> Modus (beide am Eingang) m√∂glich, entweder ein Registerpaar oder zwei unabh√§ngige Register zum Laden oder Vergleichen zu verwenden. <br><br><img src="https://habrastorage.org/webt/jw/ii/lz/jwiilz_qkbulrpqu4n1xahxnsjq.png"><br><br>  Abbildung 21-7.  FIFO-Konfigurationen. <br><br>  Abbildung 21-8 zeigt detailliert die Quellen und Empf√§nger f√ºr FIFO. <br><br><img src="https://habrastorage.org/webt/lj/rf/4l/ljrf4lqn5lyyq2xsi6sml5ywi5o.png"><br><br>  Abbildung 21-8.  FIFO-Quellen und -Empf√§nger. <br><br>  Wenn FIFO im Eingangspuffermodus arbeitet, ist die Quelle der Systembus und die Empf√§nger sind die Register Dx und Ax.  Wenn Sie im Ausgangspuffermodus arbeiten, sind die Quellen die Ax- und ALU-Register, und der Empf√§nger ist der Systembus.  Die Multiplexerauswahl wird statisch im UDB CFG15-Konfigurationsregister festgelegt, wie in der Tabelle f√ºr F0_INSEL [1: 0] oder F1_INSEL [1: 0] gezeigt: <br><br>  Tabelle 21-3.  Ein Satz von FIFO-Multiplexern im UDB-Konfigurationsregister. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  Beschreibung </th></tr><tr><td>  00 </td><td>  Eingangspuffermodus: Der Systembus schreibt in den FIFO, w√§hrend der Empf√§nger <br>  FIFO ist Ax oder Dx. </td></tr><tr><td>  01 </td><td>  Ausgangspuffermodus: Die FIFO-Quelle ist A0 und der Empf√§nger <br>  FIFO - Systembus. </td></tr><tr><td>  10 </td><td>  Ausgangspuffermodus: Die Quelle des FIFO ist A1 und der Empf√§nger <br>  FIFO - Systembus. </td></tr><tr><td>  11 </td><td>  Ausgangspuffermodus: Die FIFO-Quelle ist der ALU-Ausgang und der Empf√§nger <br>  FIFO - Systembus. </td></tr></tbody></table></div><br><h3>  FIFO-Status </h3><br>  Jeder FIFO erzeugt zwei Statussignale, "Bus" und "Block", die √ºber den Datenpfad-Ausgangsmultiplexer an die UDB-Trace-Ressourcen √ºbertragen werden.  Der Busstatus kann verwendet werden, um ein DMA-Lesen / Schreiben in den FIFO zu unterbrechen oder anzufordern.  Der Blockzustand soll in erster Linie den FIFO-Zustand an interne UDB-Entit√§ten √ºbergeben.  Der Zweck der Statusbits h√§ngt von der konfigurierten Richtung (Fx_INSEL [1: 0]) und den FIFO-Pegelbits ab.  FIFO-Pegelbits (Fx_LVL) werden im Hilfssteuerregister im Arbeitsregisterraum gesetzt.  Statusoptionen werden in der folgenden Tabelle angezeigt: <br><br>  Tabelle 21-4.  FIFO-Statusoptionen. <br><div class="scrollable-table"><table><tbody><tr><th>  Fx_INSEL [1: 0] </th><th>  Fx_lvl </th><th>  Zustand </th><th>  Signal </th><th>  Beschreibung </th></tr><tr><td>  Geben Sie ein </td><td>  0 </td><td>  Nicht voll </td><td>  Busstatus </td><td>  Gespannt, wenn es einen FIFO gibt <br>  Platz f√ºr mindestens ein Byte. </td></tr><tr><td>  Geben Sie ein </td><td>  1 </td><td>  Am Boden zerst√∂rt <br>  zumindest <br>  halb </td><td>  Busstatus </td><td>  Gespannt, wenn es einen FIFO gibt <br>  Platz f√ºr mindestens 2 Bytes. </td></tr><tr><td>  Geben Sie ein </td><td>  N / A. </td><td>  Ist leer </td><td>  Blockstatus </td><td>  Gespannt, wenn kein FIFO <br>  kein einziges Byte. <br>  Wenn FIFO nicht leer ist, Datapath <br>  kann Bytes lesen. <br>  Wenn FIFO leer ist, Datapath <br>  kann in der Lage sein <br>  Erwartungen erzeugen entweder <br>  Zustand der Verw√ºstung. </td></tr><tr><td></td></tr><tr><td>  Fazit </td><td>  0 </td><td>  Nicht leer </td><td>  Busstatus </td><td>  Im FIFO gespannt <br>  mindestens 1 Byte verf√ºgbar <br>  zum lesen. </td></tr><tr><td>  Fazit </td><td>  1 </td><td>  Ist voll <br>  zumindest <br>  halb </td><td>  Busstatus </td><td>  Gespannt, wenn im FIFO verf√ºgbar <br>  mindestens 2 Bytes zu lesen. </td></tr><tr><td>  Fazit </td><td>  N / A. </td><td>  Ist voll </td><td>  Blockstatus </td><td>  Gespannt, wenn der FIFO voll ist. <br>  Wenn FIFO nicht vollst√§ndig ist, Datapath <br>  kann Bytes in FIFO schreiben. <br>  Wenn FIFO voll ist, Datapath <br>  kann in sein <br>  Standby oder <br>  Bedingung erzeugen <br>  √úberlauf. </td></tr></tbody></table></div><br><h3>  FIFO-Arbeitsillustration </h3><br>  Abbildung 21-9 zeigt eine typische Abfolge von Lesen und Schreiben sowie die Generierung von Status, die diesen Vorg√§ngen zugeordnet sind.  In der Abbildung erfolgt das Lesen und Schreiben zu unterschiedlichen Zeiten, sie k√∂nnen jedoch gleichzeitig ausgef√ºhrt werden. <br><br><img src="https://habrastorage.org/webt/pp/kr/-p/ppkr-pcweqaiz61mam-o3d4oeti.png"><br><br>  Abbildung 21-9 Betrieb der FIFO-Empf√§nger <br><br><h3>  FIFO-Schnellmodus (FIFO FAST) </h3><br>  Wenn sich das FIFO im Ausgangspuffermodus befindet, verwendet die FIFO-Startoperation typischerweise die Taktfrequenz des ausgew√§hlten Datenpfads, um das Schreibsignal zu takten.  Wie in Abbildung 21-10 dargestellt, k√∂nnen Sie bei Auswahl des FIFO-Schnellmodus (FIFO FAST) die Busfrequenz f√ºr diesen bestimmten Vorgang ausw√§hlen.  In Verbindung mit dem <b>Level / Edge = Edge-</b> Modus reduziert dieser Vorgang die √úbertragungsverz√∂gerung von der Batterie zum FIFO von der Datenpfad-Taktperiode zur Bustaktperiode, da die Busfrequenz viel h√∂her sein kann.  Dadurch kann die CPU oder der DMA das empfangene FIFO-Ergebnis mit minimaler Verz√∂gerung lesen. <br><br>  Wie in Abbildung 21-10 dargestellt, wird der Schnellstartvorgang unabh√§ngig vom aktuellen Datenpfadtakt ausgef√ºhrt. Die Verwendung der Bustaktrate kann jedoch den Stromverbrauch erh√∂hen. <br><br><img src="https://habrastorage.org/webt/au/4c/0i/au4c0iq5pfcnnebsvxxq1hmf-zu.png"><br><br>  Abbildung 21-10.  FIFO-Empf√§nger mit schneller Konfiguration. <br><br><h3>  FIFO Edge / Level-Aufnahmemodus (Differential / Level) </h3><br>  Im FIFO von Datapath gibt es zwei Aufnahmemodi.  Im ersten Modus werden Daten synchron von den Batterien zum FIFO √ºbertragen.  Das Steuersignal dieses Datensatzes (FX_LD) wird normalerweise von einer Zustandsmaschine oder von einer Bedingung generiert, die mit der Datenpfad-Taktung synchronisiert ist.  Das Schreiben in den FIFO wird in jedem Zyklus ausgef√ºhrt, in dem das Eingangslaststeuersignal '1' ist.  Im zweiten Modus wird FIFO verwendet, um Batteriewerte als Reaktion auf eine positive Flanke des FX_LD-Signals zu erfassen.  In diesem Modus ist das Signalformat des Signals beliebig (seine Periode muss jedoch mindestens einem Datenpfad-Taktzyklus entsprechen).  Ein Beispiel f√ºr diesen Modus ist die Erfassung des Batteriewertes unter Verwendung des Eingangs des externen Fu√ües als Ausl√∂ser.  Eine Einschr√§nkung dieses Modus besteht darin, dass der Eingabeparameter mindestens einen Zyklus auf den Wert '0' zur√ºckkehren muss, bevor eine weitere positive Differenz erkannt wird. <br><br>  Abbildung 21-11 zeigt die Implementierung des Differentialerkennungsmodus am Eingang FX_LD.  Der Modus beider FIFOs in der UDB wird durch dasselbe Bit gesteuert, wodurch diese Option umgeschaltet wird.  Es ist zu beachten, dass die Differentialerkennung mit einer Frequenz getaktet wird, die der Frequenz des ausgew√§hlten FIFO entspricht. <br><br><img src="https://habrastorage.org/webt/xv/hq/u8/xvhqu8l5xwjgn-4aaww9ru8tkli.png"><br><br>  Abbildung 21-11.  Differentialerkennung f√ºr interne FIFO-Aufzeichnungsempf√§nger. <br><br><h3>  FIFO-Software-Erfassungsmodus </h3><br>  Eine h√§ufige und wichtige Anforderung besteht darin, dass CPU und DMA den Inhalt der Batterie w√§hrend des normalen Betriebs zuverl√§ssig lesen k√∂nnen.  Dies erfolgt mithilfe der Softwareerfassung und wird mithilfe des FIFO-Cap-Konfigurationsbits aktiviert.  Dieses Bit gilt f√ºr beide FIFOs in der UDB, funktioniert jedoch nur, wenn sich das FIFO im Ausgabepuffermodus befindet.  Bei Verwendung der Softwareerfassung muss F0 von A0 und F1 von A1 lesen. <br><br>  Wie in Abbildung 21-12 gezeigt, leitet das Lesen der Batterie das Schreiben von der Batterie in den FIFO ein.  Das Signal ist in einer Kette verkn√ºpft, sodass beim gleichzeitigen Lesen eines bestimmten Bytes die Batteriewerte aller UDBs in der Kette erfasst werden.  Dadurch kann der 8-Bit-Prozessor 16 Bit oder mehr gleichzeitig erfolgreich lesen.  Daten, die beim Lesen der Batterie zur√ºckgegeben werden, sollten ignoriert werden, und der erfasste Wert kann sofort vom FIFO gelesen werden. <br><br>  Das verfolgte FX_LD-Signal, das die FIFO-Last erzeugt, wird zusammen mit dem Programmerfassungssignal an den ODER-Term gesendet.  Wenn die Hardware- und Softwareerfassung gleichzeitig verwendet wird, kann das Ergebnis unvorhersehbar sein.  In der Regel sollten sich diese Funktionen gegenseitig ausschlie√üen. Die Erfassung von Hardware und Software kann jedoch unter den folgenden Bedingungen gleichzeitig verwendet werden: <br><br><ul><li>  Der FIFO-Erfassungstaktmodus ist auf FIFO SCHNELL eingestellt. </li><li>  Der FIFO-Aufzeichnungsmodus ist auf FIFO EDGE eingestellt. </li></ul><br>  Unter den oben beschriebenen Bedingungen funktionieren Hardware- und Software-Erfassungen im Wesentlichen gleich, und w√§hrend eines Bustaktzyklus kann jedes dieser Signale eine Erfassung ausl√∂sen. <br><br>  Es wird au√üerdem empfohlen, das Ziel-FIFO im Programmcode (ACTL-Register) zu l√∂schen, bevor die Programmerfassung beginnt.  Dank dessen werden die FIFO-Lese- und Schreibzeiger auf einen bekannten Zustand gesetzt. <br><br><img src="https://habrastorage.org/webt/0n/c7/zg/0nc7zgc7je5sn3emupt2ij7kdc0.png"><br><br>  Abbildung 21-12.  Software Capture-Konfiguration. <br><br>  <i><b>Anmerkung des √úbersetzers:</b></i> <i><br></i>  <i>Ich konnte die Bedeutung dieses Abschnitts lange Zeit nicht verstehen.</i>  <i>Dann war ich mir lange sicher, dass der Abschnitt f√ºr PSoC3 geschrieben wurde, dessen 8-Bit-Kern nicht mehr als Byte zugreifen kann.</i>  <i>Beim Erstellen des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">achten Teils der √úbersetzung</a> stellte sich jedoch heraus, dass selbst in PSoC5LP f√ºr alle 32-Bit-ARM-Prozessorkerne der Zugriff auf die funktionierenden UDB-Register entweder im 8-Bit- oder im 16-Bit-Modus erfolgen kann.</i>  <i>Nach dem Dokument zu urteilen, nicht mehr.</i>  <i>Hier bietet sich die beschriebene Funktionalit√§t an.</i> <i><br></i> <br><br><h3>  FIFO-Kontrollbits </h3><br>  Das Hilfssteuerregister, mit dem der FIFO w√§hrend des normalen Betriebs gesteuert werden kann, enth√§lt 4 Bits. <br><br>  Die FIFO0-CLR- und FIFO1-CLR-Bits werden zum Zur√ºcksetzen oder L√∂schen von FIFOs verwendet.  Wenn einem dieser Bits der Wert '1' zugewiesen wird, wird der zugeh√∂rige FIFO zur√ºckgesetzt.  Das Bit muss auf seinen urspr√ºnglichen Wert ('0') zur√ºckgesetzt werden, damit das FIFO weiterarbeiten kann.  Wenn der Bitwert gleich eins bleibt, wird das entsprechende FIFO deaktiviert und arbeitet als Einzelbytepuffer ohne Status.  Daten k√∂nnen in FIFO geschrieben werden, Daten sind sofort lesbar und k√∂nnen jederzeit √ºberschrieben werden.  Die Datenrichtung mit den FX INSEL-Konfigurationsbits [1: 0] kann weiterhin gesetzt werden. <br><br>  Die FIFO0-LVL- und FIFO1-LVL-Bits bestimmen den Pegel, auf dem FIFO das Statusbit <b>"Bus"</b> spannt (wenn der Bus in FIFO liest oder schreibt).  Das hei√üt, der Status des <b>"Bus"</b> -Status h√§ngt von der angegebenen Richtung ab, wie in der folgenden Tabelle gezeigt. <br><br>  Tabelle 21-5.  FIFO Level Control Bits <br><div class="scrollable-table"><table><tbody><tr><th>  FIFO LVL </th><th>  Eingangspuffermodus <br>  (Bus schreibt an FIFO) </th><th>  Ausgabepuffermodus <br>  (Der Bus liest vom FIFO) </th></tr><tr><td>  0 </td><td>  Nicht voll <br>  Es kann mindestens 1 Byte geschrieben werden. </td><td>  Nicht leer <br>  Es kann mindestens 1 Byte gelesen werden. </td></tr><tr><td>  1 </td><td>  Mindestens zur H√§lfte leer <br>  Es k√∂nnen mindestens 2 Bytes geschrieben werden. </td><td>  Halb voll <br>  Es k√∂nnen mindestens 2 Bytes gelesen werden. </td></tr></tbody></table></div><br><h3>  FIFO-Asynchronbetrieb </h3><br>  Abbildung 21-13 zeigt das Prinzip des asynchronen FIFO-Betriebs.  Stellen Sie sich als Beispiel vor, dass F0 im Eingangspuffermodus und F1 im Ausgangspuffermodus arbeitet, was eine typische Konfiguration von TX- und RX-Registern ist. <br><br><img src="https://habrastorage.org/webt/ct/ei/lo/cteilo6ne7nn0ah0hprjtkbawvo.png"><br><br>  Abbildung 21-13.  Asynchrone FIFO-Operation. <br><br>  Auf der TX-Seite verwendet die Datenpfad-Zustandsmaschine das <b>Leer-</b> Flag, um festzustellen, ob Bytes zum Empfangen verf√ºgbar sind.  Der Leerwert wird synchron mit der Datapath-Zustandsmaschine festgelegt und aufgrund des Schreibens vom Bus asynchron gel√∂scht.  Nach der Reinigung wird der Status erneut mit der Datapath-Zustandsmaschine synchronisiert. <br><br>  Auf der RX-Seite verwendet die RX-Zustandsmaschine <b>Full</b> , um zu bestimmen, ob freier Speicherplatz zum Schreiben in das FIFO vorhanden ist.  Der Wert " <b>Voll"</b> wird synchron mit der Datenpfad-Zustandsmaschine eingestellt und aufgrund des Lesens durch den Bus asynchron gel√∂scht.  Nach der Reinigung wird der Status erneut mit der Datapath-Zustandsmaschine synchronisiert. <br><br>  Ein FIFO-ASYNCH-Bit wird verwendet, um diese Synchronisationsmethode zu aktivieren. Nach der Aktivierung wird diese Methode auf beide FIFOs angewendet. <br><br>  Dies gilt nur f√ºr den <b>Blockstatus</b> , da davon ausgegangen wird, dass der <b>Busstatus</b> nat√ºrlich durch den Interrupt-Prozess synchronisiert wird. <br><br>  Tabelle 21-6.  <b>Blockieren Sie die</b> FIFO-Statussynchronisationsoptionen. <br><div class="scrollable-table"><table><tbody><tr><th>  Async </th><th>  SYNC HINZUF√úGEN </th><th>  Bedienung </th><th>  Nutzungsmodell </th></tr><tr><td>  0 </td><td>  0 </td><td>  Synchronisiert mit dem Bus-Timing </td><td>  √Ñnderungen des CPU-Schreib- / Lesestatus <br>  bei Busfrequenz auftreten.  Kann <br>  Verwenden Sie f√ºr minimale <br>  Verz√∂gerungen, wenn Sie erreichen k√∂nnen <br>  Datapatch-Taktfrequenzen <br>  gleich der Frequenz des Busses. </td></tr><tr><td>  0 </td><td>  1 </td><td>  Frequenz-Resynchronisation <br>  Reifen auf Datapath Frequenz. </td><td>  Dieser Modus sollte sein <br>  Standardbetriebsart.  Wann <br>  CPU f√ºhrt Lese- / Schreiboperationen durch, <br>  Status√§nderung wird neu synchronisiert <br>  mit der in Datapath verwendeten Frequenz. <br>  Es macht es m√∂glich, das volle zu nutzen <br>  Einstellen der Datenpfadfrequenzperiode <br>  Signal f√ºr UDB-Logik. </td></tr><tr><td>  1 </td><td>  0 </td><td>  Reserviert </td><td>  - - </td></tr><tr><td>  1 </td><td>  1 </td><td>  Zweifrequenzsynchronisation <br>  Reifen auf Datapath Frequenz. </td><td>  Wenn die Uhr f√ºr den Datenpfad pulsiert <br>  nicht nur nicht synchron mit <br>  systemisch in der Frequenz aber auch <br>  separat hergestellt <br>  unabh√§ngiger Generator <br>  Dieser Parameter kann sein <br>  verwendet f√ºr doppelt <br>  Synchronisationsoperationen <br>  CPU lesen und schreiben <br>  mit Datenpfad-Taktung. </td></tr></tbody></table></div><br><h3>  FIFO-√úberlauf w√§hrend des Betriebs </h3><br>  F√ºr die sichere Implementierung interner (Datenpfad) und externer (CPU oder DMA) Lese- und Schreibvorg√§nge sollten FIFO-Statussignale verwendet werden.  Es gibt keinen eingebauten Schutz gegen Entleerung und √úberlauf.  Wenn der FIFO voll ist und nachfolgende Schreibvorg√§nge ausgef√ºhrt werden (√úberlauf), √ºberschreiben die neuen Daten den Anfang des FIFO (die aktuell ausgegebenen Daten sind die n√§chsten in der Lesewarteschlange).  Wenn der FIFO leer ist und nachfolgende Lesevorg√§nge ausgef√ºhrt werden (Entleeren oder Entleeren), ist der Lesewert undefiniert.  FIFO-Zeiger bleiben unabh√§ngig von Unterlauf und √úberlauf genau. <br><br><h3>  FIFO Clock Inversion </h3><br>  Jedes FIFO hat ein Steuerbit Fx CK INV, das f√ºr die Polarit√§t des Takt-FIFO in Bezug auf die Polarit√§t des Taktdatenpfads verantwortlich ist.  Standardm√§√üig arbeitet FIFO mit der gleichen Polarit√§t wie die Datenpfad-Taktung.  Wenn dieses Bit 1 ist, arbeitet der FIFO relativ zum Datenpfad mit umgekehrter Polarit√§t.  Dies bietet Protokollunterst√ºtzung f√ºr den Datenaustausch an beiden Fronten, z. B. SPI. <br><br><h3>  Dynamische FIFO-Steuerung </h3><br>  Typischerweise werden FIFOs statisch entweder im Eingangspuffermodus oder im Ausgangspuffermodus konfiguriert.  Alternativ kann jeder FIFO so konfiguriert werden, dass er in einem Modus arbeitet, in dem die Richtung dynamisch gesteuert wird (unter dem Einfluss externer Signale).  Ein Konfigurationsbit pro FIFO (Fx DYN) ist f√ºr die Aktivierung dieses Modus verantwortlich.  Abbildung 21-14 zeigt die im dynamischen FIFO-Modus verf√ºgbaren Konfigurationen. <br><br><img src="https://habrastorage.org/webt/ny/ei/vo/nyeivo9hrnmr6vg8tkcbnnkaz8i.png"><br><br>  Abbildung 21-14.  Dynamischer FIFO-Modus. <br><br>  Im internen Zugriffsmodus kann Datapath in FIFO lesen und schreiben.  In dieser Konfiguration m√ºssen die Fx INSEL-Bits auf 1 gesetzt werden, um die Quelle der Schreiboperationen im FIFO auszuw√§hlen. Fx INSEL = 0 (CPU-Busquelle) ist in diesem Modus falsch, es k√∂nnen nur die Werte 1, 2 oder 3 (A0, A1 oder ALU) angenommen werden )  Es ist anzumerken, dass das Lesen nur Zugriff auf die entsprechende Batterie hat, die Richtung der Datenregister in diesem Modus ist nicht verf√ºgbar. <br><br>  Im externen Zugriffsmodus kann die CPU oder der DMA entweder lesen oder in den FIFO schreiben. <br><br>  Die Konfiguration wechselt dynamisch zwischen externem und internem Zugriff, indem Signale von Datapath weitergeleitet werden.  Hierzu werden die Eingangssignale Datapath d0_load und d1_load verwendet.  Es ist anzumerken, dass im dynamischen Steuermodus d0_load und d1_load nicht f√ºr ihre normale Verwendung verf√ºgbar sind, wenn die Register D0 / D1 von F0 / F1 geladen werden.  Dx_load-Signale k√∂nnen durch jedes Trace-Signal einschlie√ülich Konstanten ausgel√∂st werden. <br><br>  Stellen Sie sich ein Beispiel vor, in dem die CPU oder der DMA beginnend mit dem externen Zugriff (dx_load == 1) ein oder mehrere Datenbytes in den FIFO schreiben k√∂nnen.  Beim Umschalten auf internen Zugriff (dx_load == 0) kann Datapath dann Operationen an den Daten ausf√ºhren.  Danach kann die CPU oder der DMA beim Umschalten auf externen Zugriff das Ergebnis der Berechnungen lesen. <br>  Da Fx INSEL immer 01, 10 oder 11 (A0, A1 oder ALU) sein sollte, was im normalen Betrieb dem ‚ÄûAusgangspuffermodus‚Äú entspricht, haben die FIFO-Statussignale die folgenden Definitionen (abh√§ngig vom Fx LVL-Parameter): <br><br>  Tabelle 21-7.  FIFO-Status. <br><div class="scrollable-table"><table><tbody><tr><th>  Statussignal </th><th>  Wert </th><th>  Fx LVL = 0 </th><th>  Fx LVL = 1 </th></tr><tr><td>  fx_blk_stat </td><td>  Status aufzeichnen </td><td>  FIFO ist voll </td><td>  FIFO ist voll </td></tr><tr><td>  fx_bus_stat </td><td>  Lesestatus </td><td>  FIFO ist nicht vollst√§ndig </td><td>  Halb voll </td></tr></tbody></table></div><br>  Da sowohl Datapath als auch die CPU aus FIFOs schreiben und lesen k√∂nnen, werden diese Signale nicht mehr als Block- und Busstatus betrachtet.  Das Signal blk_stat wird f√ºr den Schreibstatus und das Signal bus_stat f√ºr den Lesestatus verwendet <br><br><h2>  21.3.2.3 FIFO-Status </h2><br>  Es gibt vier FIFO-Statussignale, zwei f√ºr jedes FIFO: fifo0_bus_stat, fifo0_blk_stat, fifo1_bus_stat und fifo1_blk_stat.  Die Bedeutung dieser Signale h√§ngt von der Richtung des jeweiligen FIFO ab, die durch die statische Konfiguration bestimmt wird.  Der FIFO-Status wird ausf√ºhrlich in Abschnitt <b>21.3.2.2 Datenpfad-FIFO beschrieben</b> . <br><br>  Im n√§chsten Teil werden wir mit der Analyse der Arithmetic Logic Unit (ALU) fortfahren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de434706/">https://habr.com/ru/post/de434706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de434696/index.html">Mitarbeiter von IT-Giganten haben herausgefunden, wie sie die Richtlinien ihrer Unternehmen beeinflussen k√∂nnen</a></li>
<li><a href="../de434698/index.html">Pessimismus √ºber Multithreading</a></li>
<li><a href="../de434700/index.html">Vorteile der folgenden Styleguides bei der Entwicklung von Angular-Anwendungen</a></li>
<li><a href="../de434702/index.html">Warum moderne SSD mich zum Absturz bringt</a></li>
<li><a href="../de434704/index.html">Gr√ºnde f√ºr den R√ºckgang der Kosten des Mobilfunkverkehrs in Russland und die Prognose f√ºr 2019</a></li>
<li><a href="../de434708/index.html">HL 2018. Zusammenfassung des Berichts ‚ÄûMachen Sie Passw√∂rter wieder gro√üartig! Wie man rohe Gewalt besiegt und Hackern nichts hinterl√§sst ‚Äú</a></li>
<li><a href="../de434710/index.html">RUVDS-Blog √ºber Habr: Jahr in drei</a></li>
<li><a href="../de434712/index.html">Dritter Turing-Test in russischer Sprache</a></li>
<li><a href="../de434714/index.html">Synchronisierung von Clientanforderungen im Fr√ºhjahr</a></li>
<li><a href="../de434716/index.html">Umzug ins Rechenzentrum: Vorbereitung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>