<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèΩ üë©üèº‚Äçüíº üòï Enregistrement vid√©o avec √©jection automatique de pause par logiciel gratuit avec construction de v√©los üîõ üôç üçÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les d√©veloppeurs russophones ont toujours quelque chose √† dire: partager certaines de leurs exp√©riences et opinions uniques. Mais dans le format du bl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Enregistrement vid√©o avec √©jection automatique de pause par logiciel gratuit avec construction de v√©los</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437918/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_2/bs/h8/_2bsh8brje9tatdcz3fpvpv-l1g.jpeg" alt="V√©lo Timeline"></div><br><p>  Les d√©veloppeurs russophones ont toujours quelque chose √† dire: partager certaines de leurs exp√©riences et opinions uniques.  Mais dans le format du blog vid√©o, en raison de la grande complexit√© de l'enregistrement, seuls quelques-uns le font maintenant. </p><br><p>  Sous la coupe, il a parl√© de son chemin difficile vers l'enregistrement et le montage de vid√©os √† l'aide de logiciels gratuits, de scripts Ruby et d'outils improvis√©s. <a name="habracut"></a></p><br><h1 id="teoriya">  Th√©orie </h1><br><p> J'ai commenc√© par √©tudier la th√©orie de l'enregistrement de blogs vid√©o sur des vid√©os YouTube en anglais.  Et √† partir de documents en russe, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce cours</a> s'est av√©r√© tr√®s utile (en particulier, le module sur les blogs vid√©o et la premi√®re vid√©o sur la construction d'un cadre √† partir du module sur les rapports).  Je me suis √©galement familiaris√© avec les fonctionnalit√©s populaires des monteurs vid√©o propri√©taires afin d'aborder plus consciemment le choix d'un √©diteur gratuit. </p><br><p>  Je n'ai pas os√© investir dans la lumi√®re: il n'y a pas assez de temps pour l'√©tudier et rechercher la meilleure option, et une √©tude superficielle des options bon march√© parle de r√¢teaux potentiels comme le scintillement et le mauvais rendu des couleurs.  Avec la lumi√®re du jour, je n'ai pas eu de grosses difficult√©s, √ßa suffit juste pour de courtes vid√©os. </p><br><h1 id="videoredaktor">  Editeur vid√©o </h1><br><p>  Les outils de montage vid√©o gratuits existants contiennent un certain nombre de probl√®mes connus: des solutions infructueuses dans l'interface utilisateur et des blocages qui transforment le montage en infini, aux fuites de m√©moire, aux plantages et aux artefacts inattendus qui n'apparaissent qu'apr√®s le rendu final. </p><br><p>  Il y a beaucoup de probl√®mes et il a fallu du temps pour s√©lectionner un √©diteur vid√©o et √©tudier ses bugs, juste pour apprendre √† g√©rer les choses de base.  Finalement, il s'est arr√™t√© √† <strong>Pitivi</strong> , simplement parce qu'il a pass√© tellement de temps √† chercher et √† exp√©rimenter. </p><br><h2 id="zvuk-iz-flatpak">  Son de Flatpak </h2><br><p>  La m√©thode d'installation prise en charge pour Pitivi n√©cessite Flatpak.  Pendant un moment, je l'ai contourn√©, car  Je n'ai pas systemd et PulseAudio dans mon syst√®me. </p><br><p>  Il s'av√®re que systemd <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">n'est plus n√©cessaire depuis</a> longtemps.  Eh bien, PulseAudio - <s>J'ai d√ª installer et configurer,</s> il √©tait plus facile de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modifier Flatpak</a> .  Mais il serait plus correct de mettre PulseAudio, c'est juste un peu fastidieux et il n'est pas clair s'il faut s'attendre √† des probl√®mes d'enregistrement du son sur du mat√©riel existant ou non. </p><br><p>  Installez Pitivi, supprimez les configurations PulseAudio, ex√©cutez: </p><br><pre><code class="bash hljs">$ sudo flatpak remote-add --<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo $ sudo flatpak install flathub org.pitivi.Pitivi $ sudo find {/var/lib,~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share}/flatpak/runtime -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name <span class="hljs-string"><span class="hljs-string">'*pulseaudio*.conf'</span></span> -delete $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=pitivi org.pitivi.Pitivi</code> </pre> <br><p>  Il n'y a pas de son.  Essayons d'ex√©cuter quelque chose de plus simple, par exemple <code>aplay</code> : </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak/app/org.pitivi.Pitivi/x86_64 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -path <span class="hljs-string"><span class="hljs-string">'*/files/bin'</span></span> -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp `<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> aplay` {} \; $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib dlmisc.c:162:(snd_dlsym_verify) unable to verify version <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> symbol _snd_pcm_empty_open ALSA lib dlmisc.c:283:(snd1_dlobj_cache_get) symbol _snd_pcm_empty_open is not defined inside [<span class="hljs-built_in"><span class="hljs-built_in">builtin</span></span>] aplay: main:828: audio open error: No such device or address</code> </pre> <br><p>  Probablement <code>alsa-lib</code> inclus dans Flatpak a √©t√© compil√© avec <code>--with-versioned</code> .  Une solution rapide consiste √† remplacer <code>libasound.so</code> syst√®me: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; <span class="hljs-comment"><span class="hljs-comment">#      -</span></span></code> </pre> <br><p>  Pour moi, cela ne suffisait pas: </p><br><pre> <code class="bash hljs">$ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib /var/tmp/portage/media-libs/alsa-lib-1.1.6-r1/work/alsa-lib-1.1.6/src/pcm/pcm_direct.c:1943:(snd1_pcm_direct_parse_open_conf) The field ipc_gid must be a valid group (create group audio) aplay: main:828: audio open error: Invalid argument</code> </pre> <br><p>  Besoin d'une autre configuration ALSA: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; <span class="hljs-comment"><span class="hljs-comment">#      - $ flatpak run --device=alsa --branch=stable --arch=x86_64 --command=aplay org.pitivi.Pitivi /dev/urandom</span></span></code> </pre> <br><p>  Enfin, vous pouvez utiliser Pitivi. </p><br><div class="spoiler">  <b class="spoiler_title">Param√®tres de rendu pour Pitivi r√©sultant</b> <div class="spoiler_text"><ul><li>  format de conteneur: MP4 </li><li>  vid√©o <br><ul><li>  codec x264enc </li><li>  avanc√© <br><ul><li>  passe / type d'encodage: quantificateur constant </li><li>  quantificateur constant: 18 </li><li>  d√©bit: 16384 kbit / s </li><li>  pr√©r√©glage de la qualit√© de la vitesse: ultra-rapide </li><li>  pr√©r√©glage de r√©glage psychovisuel: film </li></ul></li></ul></li><li>  audio <br><ul><li>  libav ALAC </li></ul></li><li>  √† mes risques et p√©rils, j'utilise "Ne jamais rendre √† partir de fichiers proxy" </li><li>  tout le reste est la valeur par d√©faut </li></ul></div></div><br><h2 id="drugie-effekty">  Autres effets </h2><br><p>  Je fais des effets d'animation pour le texte en utilisant le screencast des pages en plein √©cran, dispos√© en utilisant r√©v√©ler.js et animate.css.  Dans r√©v√©ler.js pour certaines diapositives, j'ajoute un son de transition: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font-size: 5em"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-autoplay</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/path/to/sound.wav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag">&gt;</span></span> #1 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Il s'est av√©r√© important d'enregistrer une capture d'√©cran avec 60 FPS si le texte est tr√®s volumineux.  Screencast fait ceci: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh SOUND_INPUT=shared_input_loopback CHANNELS=2 SOUND_RATE=48000 FRAMERATE=60 DRAW_MOUSE=0 VIDEO_SIZE=$(xdpyinfo | awk '/dimensions:/ { print $2; exit }') OUTPUT="${HOME}/video/screen/$(date --rfc-3339=seconds).mp4" ffmpeg \ -thread_queue_size 512 \ -video_size "${VIDEO_SIZE}" \ -framerate "${FRAMERATE}" \ -f x11grab \ -draw_mouse "${DRAW_MOUSE}" \ -i :0.0+0,0 \ -thread_queue_size 512 \ -f alsa \ -ac "${CHANNELS}" \ -i "${SOUND_INPUT}" \ -ar "${SOUND_RATE}" \ -vcodec libx264 -preset ultrafast -crf 18 \ -acodec alac \ -f ipod \ "${OUTPUT}"</span></span></code> </pre> <br><p>  Dans mon cas, <code>shared_input_loopback</code> est le p√©riph√©rique de la <a href="">configuration asound.conf</a> . </p><br><p>  Cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">add-</a> on sur <code>ffmpeg</code> pour les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">transitions</a> entre les clips √©tait toujours utile. </p><br><h1 id="zapis-video">  Enregistrement vid√©o </h1><br><p>  √Ä port√©e de main √©tait un t√©l√©phone Meizu MX4, sur lequel j'ai d√©cid√© d'utiliser une cam√©ra frontale et d'enregistrer en utilisant Open Camera.  Il vous a fallu un certain temps pour vous entra√Æner √† regarder la cam√©ra et contr√¥ler votre position dans l'espace sans faire d'erreurs typiques, comme vous couper la t√™te.  En m√™me temps, parlez assez clairement, fort, gesticulez et g√©n√©rez au moins une sorte d'expression faciale.  Mais ce n'√©tait que le d√©but. </p><br><p>  Qu'est-ce qui m'a pouss√© √† faire du d√©coupage vid√©o automatique, et m√™me au stade de l'enregistrement? </p><br><ol><li>  Pitivi freine et corrige des bugs lors de l'√©dition, en particulier lors de l'utilisation de l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ripple Move / Edit</a> , ce qui oblige √† red√©marrer p√©riodiquement Pitivi. </li><li>  Pour moi, le processus de d√©coupe manuelle de la vid√©o est l'une des choses les plus ennuyeuses.  Il est clair qu'il n'est pas tr√®s possible d'automatiser compl√®tement (au moins sans un sc√©nario dans lequel les pauses n√©cessaires pour comprendre ce qui a √©t√© dit ne sont pas explicitement indiqu√©es), mais au moins ce processus peut √™tre optimis√©. </li></ol><br><p>  Voici les pr√©requis pour le futur v√©lo que je me suis fix√©: </p><br><ol><li>  Enregistrez des vid√©os √† l'aide d'un t√©l√©phone Android et du son √† l'aide d'un ordinateur portable. </li><li>  Contr√¥le de la mise au point de la cam√©ra. </li><li>  Possibilit√© d'arr√™ter l'enregistrement pour sauvegarder ou supprimer le dernier fragment enregistr√©. </li><li>  T√©l√©chargez la vid√©o du t√©l√©phone via USB, avec des tentatives r√©p√©t√©es et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">reprenez</a> , sans bloquer la possibilit√© d'enregistrer le fragment suivant. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Synchronisation</a> sonore. </li><li>  D√©terminer la pr√©sence de la voix et lancer des pauses. </li><li>  La possibilit√© de lire rapidement les derniers clips vid√©o enregistr√©s, avec des pauses d√©j√† interrompues. </li></ol><br><p>  Pourquoi tant de contr√¥le sur les appareils pendant la phase d'enregistrement?  Pourquoi ne pas simplement commencer l'enregistrement pendant plusieurs heures d'affil√©e, puis le modifier?  Il y a plusieurs raisons: </p><br><ol><li>  Manque banal d'espace disque. </li><li>  La tendance du t√©l√©phone √† surchauffer et √† se d√©charger rapidement lors d'un enregistrement de longue dur√©e. </li><li>  Dysfonctionnement de l'√©cran tactile d√ª au fait que le t√©l√©phone est dans l'eau.  Mais vous devez en quelque sorte contr√¥ler la mise au point.  Oui, et la prochaine pression cr√©erait une vibration inutile de l'appareil. </li><li>  Probl√®mes de t√©l√©chargement de fichiers volumineux en raison de la mauvaise alimentation du port USB sur mon ordinateur portable.  En th√©orie, cela peut √™tre r√©solu en utilisant un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">concentrateur USB</a> avec une puissance suppl√©mentaire.  L'utilisation d'un r√©seau est trop lente. </li><li>  L'envie de revoir rapidement les derniers fragments enregistr√©s pour s'assurer qu'il n'y a pas d'erreurs et de les r√©√©crire rapidement avant que la plan√®te ne tourne au mauvais endroit devant le soleil. </li><li>  Le d√©sir de jeter des doublons √©videmment mauvais le plus t√¥t possible afin de ne pas perdre de temps et d'espace disque sur eux √† l'avenir. </li><li>  Besoin de synchroniser le long audio enregistr√© par t√©l√©phone et ordinateur portable.  Cela peut entra√Æner un d√©calage avec la vid√©o en raison du fait que les images des flux audio sont √©ject√©es √† la fois lors de l'enregistrement √† partir d'un ordinateur portable ou lors de l'enregistrement √† partir d'un t√©l√©phone (ce que vous pouvez probablement r√©soudre d'une mani√®re ou d'une autre, mais ne voulez pas le risquer et perdre du temps √† exp√©rimenter).  Il est plus facile de synchroniser les petits fragments s√©par√©ment, alors une d√©synchronisation possible ne sera pas perceptible. </li><li>  La n√©cessit√© de g√©rer une situation o√π Open Camera red√©marre l'enregistrement en raison d'une taille vid√©o de 4 Gio.  Vous devrez probablement modifier Open Camera.  Si cette restriction sur 4 Gio ne peut pas √™tre supprim√©e ou augment√©e, vous devrez lancer un √©v√©nement sur l'ordinateur portable pour remarquer que l'enregistrement a √©t√© red√©marr√© √† cet endroit. </li></ol><br><p>  Il est plus facile d'enregistrer en petits fragments et de rendre l'automatisation primitive de tout ce qui est possible.  Ruby a √©t√© choisi comme langue principale pour d√©velopper un v√©lo.  En fait, maintenant je choisirais probablement Python, mais √† ce moment-l√†, j'apprenais juste Ruby, et je lance de nouvelles langues pour moi dans des exp√©riences aussi √©tranges. </p><br><h2 id="avtomaticheskaya-narezka-video">  D√©coupage vid√©o automatique </h2><br><p>  Les informations sur le r√©seau sur ce sujet sont peu nombreuses.  √Ä propos des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recherches dont Stanford et Adobe se</a> sont souvenus plus tard (ce qui n'est pas effrayant, j'ai toujours besoin d'une solution moins sophistiqu√©e). </p><br><p>  Le d√©coupage se d√©roule en 2 √©tapes: au stade de l'enregistrement - grossier, au stade du rendu - plus pr√©cis, avec la possibilit√© de corriger manuellement trop de fragments coup√©s.  Rough impl√©ment√© √† l'aide de <abbr title="D√©tection d'activit√© vocale">VAD</abbr> de WebRTC.  Plus pr√©cis - avec l'aide de Google Speech (plus pr√©cis√©ment - avec l'aide d'une modification du projet de sous- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">automatique</a> , pour g√©n√©rer des sous-titres pour la vid√©o).  Je suis s√ªr qu'il y aura des solutions plus efficaces, il s'est av√©r√© que c'√©tait le meilleur de ce que nous avons r√©ussi √† faire rapidement. </p><br><p>  Si vous voulez d√©velopper quelque chose comme √ßa en utilisant <code>ffmpeg</code> , respectez le principe de ne pas essayer d'en faire trop en un seul appel √† <code>ffmpeg</code> .  Cr√©ez des fichiers interm√©diaires et contr√¥lez chaque √©tape afin de ne pas avoir √† rechercher d'√©tranges bogues autres que Google, tels que des coupes incorrectes ou des effets non appliqu√©s. </p><br><p>  Je commence la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>disgr√¢ce qui en r√©sulte en</strong></a> quelque sorte comme ceci: </p><br><pre> <code class="plaintext hljs">$ bin/vlog-recorder \ --project /path/to/project \ --debug true \ --sound-settings ' --device=usb_card --format=dat' #   arecord r - (RE)START recording s - STOP and SAVE current clip S - STOP and SAVE current clip, don't use auto trimming d - STOP and DELETE current clip p - PLAY last saved clip f - FOCUS camera on center h - show HELP q / Ctrl+C - QUIT [ stopped ] [ battery: 100% / 36¬∞C ]</code> </pre> <br><p>  J'ai besoin des arguments pour <code>arecord</code> pour indiquer explicitement le p√©riph√©rique afin d'√©viter les probl√®mes p√©riodiques qui sont probablement dus au plugin dsnoop bas√© sur ALSA.  Vous pouvez √©galement ouvrir le journal pour contr√¥ler le processus de t√©l√©chargement de fichiers √† partir du t√©l√©phone: <code>tail -f /path/to/project/log.txt</code> . </p><br><p>  Rendez-vous rapidement dans une vid√©o pour un aper√ßu, vous pouvez le faire: </p><br><pre> <code class="bash hljs">$ bin/vlog-render \ --project /path/to/project \ --language ru \ --video-filters <span class="hljs-string"><span class="hljs-string">'hqdn3d,hflip,curves=psfile=/path/to/curves.acv,vignette'</span></span> \ --speed 1.3 \ --fps 60 \ --preview <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  L'argument <code>--video-filters</code> sont les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">filtres</a> pass√©s √† <code>ffmpeg</code> .  La vid√©o s'ouvrira automatiquement dans le lecteur <code>mpv</code> . </p><br><p>  Vous pouvez √©galement √©changer ou √©liminer les doublons inutiles restants en modifiant le fichier <code>/path/to/project/render.conf</code> qui peut √™tre d√©tect√© gr√¢ce √† la voix reconnue.  L'id√©e, d'ailleurs, n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas nouvelle</a> .  L√†, vous pouvez acc√©l√©rer des fragments individuels et √©diter les coupures vid√©o infructueuses, le cas √©ch√©ant.  La prochaine fois, <code>vlog-render</code> relira <code>render.conf</code> et appliquera les modifications. </p><br><p>  Pour pr√©parer des fragments pour un √©diteur vid√©o, vous devez sp√©cifier <code>--preview false</code> .  En plus des fragments qui se trouveront en <code>output</code> , il les fusionnera n√©anmoins en un <code>output.mp4</code> fichier <code>output.mp4</code> , car au d√©part je n'√©tais pas s√ªr: </p><br><ul><li>  vais-je utiliser de petits clips dans pitivi </li><li>  ou t√©l√©chargez une longue vid√©o pour un d√©coupage suppl√©mentaire (afin que vous puissiez appliquer un certain nombre d'effets au ¬´groupe¬ª de clips). </li></ul><br><p>  J'utilise principalement la premi√®re option.  La seconde a √©t√© utile dans une vid√©o avec une faible luminosit√©: l√†, je n'ai utilis√© qu'un morceau de <code>output.mp4</code> .  Pour la deuxi√®me option, le script <code>vlog-play-segments</code> peut √©galement √™tre utile: avec lui, vous pouvez voir rapidement toutes les pauses entre les clips dans l'ordre d√©croissant de dur√©e.  Cela vous aidera √† <code>render.conf</code> plus pr√©cis√©ment <code>render.conf</code> et √† gagner du temps plus tard sur l'√©dition de cette longue vid√©o dans Pitivi. </p><br><p>  Les petits clips r√©sultants peuvent √™tre t√©l√©charg√©s une fois par ligne de temps dans Pitivi: s√©lectionnez tous les clips import√©s et faites-les glisser √† l'aide du glisser-d√©poser. </p><br><h2 id="kreplenie-dlya-telefona">  Support de t√©l√©phone </h2><br><p>  Je ne voulais pas chercher un support de t√©l√©phone adapt√©, et mes mains me grattaient d√©j√† le visage pour enregistrer au moins quelque chose.  Nous prenons un morceau de carton qui vient √† port√©e de main et d√©coupons le support de t√©l√©phone pour nos besoins: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kl/u8/tj/klu8tjf8huzxyqf71-ci7xnah_w.jpeg" alt="Support de t√©l√©phone"></div><br><p>  Le support est mont√© sur un √©cran d'ordinateur portable pour minimiser la distance entre le script et la cam√©ra. </p><br><h1 id="zapis-zvuka">  Enregistrement sonore </h1><br><p>  Un son acceptable est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tr√®s critique</a> .  √Ä port√©e de main se trouvait un microphone Boya BY-M1.  Bien qu'il soit annonc√© comme un microphone omnidirectionnel, un bon son en pratique n'est obtenu que lorsque vous l'utilisez comme unidirectionnel. </p><br><p>  Il est encore plus facile de faire tenir le microphone: nous prenons une bouteille de jus de grenade qui vient √† port√©e de main, un rouleau de scotch et assemblons ce constructeur: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/qt/1u/xpqt1ue6ikhdrwwh6oqr1x83vo0.jpeg" alt="Pied de microphone"></div><br><p>  Vous pouvez √©galement mettre une serviette sous cette conception afin de supprimer une partie des vibrations de la table et en m√™me temps ajuster la hauteur. </p><br><h2 id="zvukovaya-karta">  Carte son </h2><br><p>  Dans mon cas, c'est ASUS Xonar U3.  Il s'est av√©r√©, cependant, qu'il n'est pas compatible avec un tel microphone: le microphone a une prise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CTIA</a> con√ßue pour les t√©l√©phones.  Le probl√®me a √©t√© r√©solu par l'adaptateur dans les fiches TRS pour microphone et casque.  Et ce n'√©tait pas facile: les fabricants de tels adaptateurs √©crivent rarement des d√©tails.  Dans mon cas, un Cablexpert CCA-418W a aid√©. </p><br><p>  Un autre probl√®me avec cette carte est le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©calage DC</a> dans le canal droit lors de l'enregistrement.  Ce qui n'interf√®re pas, car  J'enregistre quand m√™me en mono.  Et pour les logiciels qui ne vous permettent pas de d√©finir mono, j'ai <a href="">redirig√© un</a> bon canal vers un mauvais canal en utilisant ALSA. </p><br><p>  Cette carte a √©galement peur de surchauffer.  Vous devez le tenir √©loign√© de la glaci√®re, sinon il ralentira et enregistrera le son par √†-coups. </p><br><h2 id="obrabotka-zvuka">  Traitement du son </h2><br><p>  J'√©dite le son dans le casque (dans mon cas c'est le Pioneer SE-M390), √† un volume sup√©rieur √† celui sur lequel j'√©coute habituellement de la musique.  L'algorithme est quelque chose comme ceci: </p><br><ol><li>  En utilisant Pitivi, je rend s√©par√©ment le son (en utilisant tout de m√™me ALAC et MP4).  Souvent, je cr√©e plusieurs pistes distinctes, en choisissant des couches sp√©cifiques dans Pitivi et en supprimant temporairement celles qui ne sont pas n√©cessaires. </li><li>  Si les fichiers re√ßus sont imm√©diatement t√©l√©charg√©s sur Audacity, nous <strong>perdrons l'</strong> √©tirement / la compression du flux audio, ce qui peut entra√Æner une d√©synchronisation de la vid√©o et de l'audio.  Ce qui n'est pas √©vident, cela ne se produit pas avec toutes les vid√©os.  Pour √©viter que cela ne se produise, appliquez simplement ces √©tirements / compressions: <code>ffmpeg -async 1 -i input.mp4 output.flac</code> </li><li>  T√©l√©chargez toutes les pistes dans Audacity.  Ajoutez de la musique de fond si n√©cessaire. </li><li>  Pour toutes les pistes, r√©glez le volume souhait√© √† l'aide de Gain. </li><li>  Pour la piste avec la voix, appliquez les effets de r√©duction du bruit (dans mon cas double), de compresseur et d'√©galisation selon les conseils de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette vid√©o</a> . </li><li>  Nous √©galisons et augmentons le volume de la piste avec la voix.  L'un des moyens classiques est √† nouveau Normalize, Amplify, Limiter et Normalize, mais avec cette approche, je n'ai pas encore pu obtenir la qualit√© sonore souhait√©e.  <s>J'agis temporairement comme ceci: je fais d'abord le gain de toute la piste pour que la partie la plus forte sonne sans surcharge, puis j'applique manuellement Amplify pour des fragments individuels.</s>  <strong>Mise √† jour</strong> : Un autre moyen puissant est RMS Normalize, Limiter et normal Normalize.  Les param√®tres de normalisation et de limitation RMS peuvent √™tre pris √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> .  N√©anmoins, cette m√©thode ne m'a pas √©t√© utile, car  Quoi qu'il en soit, j'ai d√©cid√© de passer √† un autre microphone (Zoom H1n) avec le limiteur int√©gr√©, ce qui me convient (donc avec le nouveau microphone, je dois tr√®s probablement ne faire que Normalize normal, au lieu de toutes ces choses). </li><li>  Le microphone enregistre parfois le son avec quelques d√©fauts qui ressemblent √† des clics.  Ils peuvent √™tre supprim√©s √† l'aide de l'effet multi-outils d'√©dition spectrale.  Le plus souvent, il est n√©cessaire de l'appliquer plusieurs fois de suite pour la zone s√©lectionn√©e, en utilisant Ctrl + R.  <strong>Mise √† jour</strong> : gr√¢ce au nouveau microphone, j'ai d√©couvert que ces d√©fauts sont li√©s √† quelque chose d'ext√©rieur, probablement une combinaison de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bruit dans la bouche</a> et d'autres sons √©trangers. </li><li>  Nous exportons d'Audacity vers FLAC et fusionnons tout dans un seul fichier: <code>ffmpeg -i sound.flac -an -i video.mp4 -c copy output.mkv</code> </li><li>  Au moins la premi√®re vid√©o que j'ai test√©e sur diff√©rents volumes et diff√©rents appareils. </li></ol><br><h1 id="rezultat">  R√©sultat </h1><br><p>  Profitant de l'occasion pour assouplir les r√®gles du jeu, je vous invite √† visiter la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>cha√Æne YouTube</strong></a> qui en r√©sulte, o√π je partage des id√©es sur l'√©tude efficace de la programmation et des disciplines connexes. </p><br><p>  Bonne chance dans le d√©veloppement de programmes et la cr√©ation de blogs vid√©o! </p><br><p>  <strong>Mise √† jour</strong> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">traduit</a> cet article pour son blog en anglais. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437918/">https://habr.com/ru/post/fr437918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437908/index.html">Arduino collabore avec Google et introduit la certification</a></li>
<li><a href="../fr437910/index.html">Civilisation printani√®re, 1/5</a></li>
<li><a href="../fr437912/index.html">Un petit ordinateur portable pour un administrateur syst√®me</a></li>
<li><a href="../fr437914/index.html">Jaxb (XJC) g√©n√©rant des classes √† partir d'un sch√©ma XML (XSD) avec des descriptions de classe et de champ sous forme d'annotations. Plugin XJC</a></li>
<li><a href="../fr437916/index.html">Donnez le lecteur de livre √©lectronique dans chaque poche! Retour sur les derni√®res innovations d'ONYX BOOX</a></li>
<li><a href="../fr437922/index.html">Mod√®le d'attaque: o√π il est principalement utilis√© abusivement dans les achats √©lectroniques et comment y faire face</a></li>
<li><a href="../fr437924/index.html">Blockchain Sharding</a></li>
<li><a href="../fr437926/index.html">Le guide faisant autorit√© pour le partage de blockchain</a></li>
<li><a href="../fr437928/index.html">Comment apprendre l'anglais</a></li>
<li><a href="../fr437930/index.html">Combo luminaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>