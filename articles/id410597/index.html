<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏻 👨🏾‍🚒 🕟 Perangkat rumah pintar lainnya 🔖 🛕 ♿️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entri 
 Terlibat dalam otomatisasi rumah selama tiga tahun terakhir, saya mencoba untuk melacak semua perangkat baru di daerah ini. Baru-baru ini, pam...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perangkat rumah pintar lainnya</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410597/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/7e/rp/b87erppacywqripfkc5as0cvpxu.png"></div><br><h3>  Entri </h3><br>  Terlibat dalam otomatisasi rumah selama tiga tahun terakhir, saya mencoba untuk melacak semua perangkat baru di daerah ini.  Baru-baru ini, pameran menarik perhatian perangkat baru produksi dalam negeri.  Setelah mencari di internet, saya tidak menemukan informasi tentang mereka.  Saya berpikir aneh dan memutuskan untuk menghubungi pabrikan (saya tidak akan menunjukkannya).  Setelah berbicara, saya berhasil mendapatkan sampel uji selama sebulan.  Sebulan kemudian, saya memutuskan untuk membagikan kesan saya tentang produk ini. <br><br><h3>  Deskripsi dari pabrikan </h3><br>  Menurut pabrikan, perangkat yang diteliti adalah platform yang memungkinkan Anda membuat sistem otomatis untuk memantau dan mengelola fasilitas infrastruktur.  Platform ini memungkinkan Anda untuk mengembangkan sistem terpusat dan terdistribusi, termasuk menghubungkan perangkat pintar apa pun, dan fitur fungsional sistem ditentukan oleh perangkat lunak yang diinstal. <br><br>  Pabrikan menyatakan karakteristik perangkat berikut: <br><a name="habracut"></a><table><tbody><tr><td>  CPU </td><td>  • CPU: Allwinner H5 ， Quad-core 64-bit Cortex A53 <br>  • RAM: 1GB <br>  • Penyimpanan: 8GB eMMC, kartu MicroSD </td></tr><tr><td>  Sistem operasi </td><td>  • Linux Debian atau Ubuntu </td></tr><tr><td>  Komunikasi </td><td>  • Jaringan: Gbps Ethernet <br>  • WiFi: 802.11b / g / n <br>  • Bluetooth: 4.0 mode ganda <br>  • Radio: 2,4 GHz <br>  • 2 x Host USB <br>  • 1 x RS485 </td></tr><tr><td>  Port input / output </td><td>  • 4 "kering" kontak 350 v / 120mA <br>  • 4 output 12 v / 1A <br>  • 4 input 0 - 12 v </td></tr><tr><td>  Indikasi status </td><td>  • tampilan OLED <br>  • LED </td></tr><tr><td>  Nutrisi </td><td>  • DC 12 v </td></tr></tbody></table><br><h3>  Kami mempersiapkan klien <br></h3><br>  Perangkat ini hadir dalam dua versi: hanya bare metal dan solusi siap pakai dengan perangkat lunak.  Saya mendapat pilihan pertama, tetapi bahkan lebih menarik - ada tempat untuk bermain-main fantasi. <br><br>  Penampilan perangkat ini cukup asketis: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/7e/rp/b87erppacywqripfkc5as0cvpxu.png"></div><br>  Pelindung perangkat menyediakan pemasangan di kabinet pada rel DIN dan menempati empat modul dengan lebar. <br><br>  Di panel depan adalah: <br><br><ul><li>  tampilan </li><li>  empat tombol; </li><li>  Indikator LED dari status perangkat ("merah" - dinonaktifkan, "hijau" - daya disuplai, "biru" - menunjukkan aktivitas prosesor); </li></ul><br>  Di bawah selimut berada: <br><br><ul><li>  Konektor I / O (sekilas bagi saya jumlah mereka mungkin tidak mencukupi, tetapi saya akan berkomentar saat ini sedikit lebih rendah); </li><li>  Antarmuka RS485 </li><li>  koneksi daya. </li></ul><br>  Semua konektor sangat ketat, yang membuat saya senang karena saya tidak suka menjepit.  Tidak ada konektor dan kontrol di sisi kanan kotak, yang secara umum dapat berguna untuk pemasangan peralatan yang lebih ketat di kabinet. <br><br>  Semua konektor terpasang di sisi kiri: <br><br><ul><li>  antena WiFi yang dapat dilepas; </li><li>  2 USB; </li><li>  1 Et </li><li>  jack audio. </li></ul><br>  Antena WiFi mengganggu koneksi perangkat USB dan kabel jaringan.  Entah itu harus ditolak, atau dibawa ke depan kabinet dengan kabel, opsi kedua mungkin lebih benar, sehingga meningkatkan level sinyal. <br><br>  Kami melanjutkan ke "pembukaan pasien" (seluruh case dipasang pada kait, tidak sulit untuk membongkar itu) dan melihat apa yang terdiri dari dalam / Buka penutup depan dan lihat: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/j4/d4/kaj4d4omm3_z-78fnhmpqiv5ws4.png"></div><br><ul><li>  Layar OLED SSD1306 (128x64px): layarnya tentu kecil, tetapi Anda bisa mendapatkan informasi minimal; </li><li>  Empat tombol untuk kontrol lokal perangkat, dilihat dari peruntukannya, untuk mengendalikan keluaran informasi di layar; </li><li>  Tombol manajemen daya (seperti ATtiny13 yang kemudian diketahui untuk manajemen daya); </li><li>  RGB LED </li><li>  Di bawah tulisan ada antena modul radio. </li></ul><br>  Kami melangkah lebih jauh - membuka kasing dan melihat bahwa perangkat terdiri dari tiga papan: papan utama, papan prosesor terpasang padanya dan papan "atas", sisi depan yang dijelaskan di atas, dihubungkan dengan kabel ke sana.  Kami memeriksanya lebih cermat: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/ty/hz/lttyhznbz7tcf5yn8dzppnqxjtc.png"></div><br><br><ul><li>  Modul prosesor adalah komputer papan tunggal NanoPi NEO Plus2.  Tidak terlalu hyped OBC, tetapi sangat menarik dari sudut pandang teknis.  Anda dapat membacanya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gp/3p/x-/gp3px-m9pebjgkevd2dnqi-fsbm.png"></div><br>  Di papan utama terletak: <br><br><ul><li>  Perlindungan terhadap pembalikan polaritas (kami memikirkan "perlindungan terhadap orang bodoh" sudah tidak buruk); </li><li>  Konverter DC-DC pada XL4005E1 5A, senang bahwa mereka tidak menjalankan dioda Schottky yang kuat (12A), tetapi kumparan terluka dengan kawat tipis - 3A akan menarik, tetapi saya tidak akan memuatnya lagi, poligon pendingin konverter dibuat di bagian belakang papan, yang menambah kepercayaan dalam pekerjaan (konverter dari ATtiny13 dikontrol); </li><li>  Detail lainnya termasuk dalam skema standar: regulator tegangan AMS 1117 untuk 3.3 v, extender MCP23017, SP3485 untuk mengatur antarmuka RS485, ADS1115 16-bit ADC, kehadiran sensor tekanan atmosfer BMP180 yang terkejut. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/iw/r_/qkiwr_vhzvpuc6l9aii7ovcb6u0.png"></div><br>  Di sisi belakang papan "atas" dipasang: <br><br><ul><li>  Modul RTC DS3231; </li><li>  PCF8574 port expander yang bertanggung jawab untuk memproses klik tombol; </li><li>  Modul radio nRF24L01P dengan amplifier. </li></ul><br><h3>  Gunakan dan Pemrograman </h3><br>  Seperti yang sudah saya katakan, saya mendapatkan bare metal dan harus memeriksa pengoperasian modul dan membuat skrip sendiri.  Dia tidak berfilsafat, Armbian mengambil perakitan Linux, dan melakukan semua pemrograman dengan Python - cepat, murah dan ceria!  Semua sirkuit mikro diketahui oleh banyak penggemar radio ham, menemukan deskripsi dan metode dasar penggunaan tidak akan sulit. <br><br>  Setelah mempelajari perangkat, daftar tugas kira-kira terbentuk: <br><br><ol><li>  Hubungkan kontaktor 220v melalui output dari kontak "kering".  (Dapatkan saluran listrik yang dapat dikontrol) </li><li>  Untuk dua output 12v / 1A dan dua input menghubungkan standar keamanan dan sensor kebakaran.  (Dapatkan sistem keamanan dan kebakaran, tanpa akses ke remote control, tetapi ini seringkali tidak perlu). </li><li>  Terhubung ke input dan output gratis, sensor kebocoran dan katup bola dengan penggerak listrik 12 v.  (Dapatkan perlindungan terhadap kebocoran). </li><li>  Naikkan server WEB dan tulis antarmuka manajemen (Dapatkan remote control). </li><li>  Periksa koneksi melalui radio, WiFi dan RS485 perangkat tambahan (Periksa kemungkinan membangun jaringan terdistribusi). </li><li>  Periksa pengoperasian modem USB. </li><li>  Periksa operasi sebagai router. </li></ol><br><img src="https://habrastorage.org/webt/zc/za/cu/zczacu4t1wrx2kogetbvn3kx53u.png"><br><br>  Untuk pengujian, saya dengan cepat membuat dudukan dan mulai bersenang-senang: <br><br>  ATtiny13 telah diprogram, saya tidak menyentuhnya, biarkan bertanggung jawab atas catu daya sesuai dengan rencana pabrikan. <br><br>  MCP23017, ADS1115, PCF8574, DS3231, BMP180 - semua ini bekerja sesuai dengan I2C, sehingga pemahaman tentang pengoperasian bus ini segera menentukan sekitar 80% dari kode.  Semuanya dimulai (seperti yang diharapkan), karena pengalamatan perangkat telah ditetapkan oleh pabrikan. <br><br>  nRF24L01P beroperasi dengan bus SPI, contohnya juga cukup.  Saya menghubungi sepasang perangkat di Arduino, semuanya berfungsi sebagaimana mestinya. <br><br>  RS485 diuji pada protokol Modbus dengan power meter Eastron SDM220.  Bacaan diambil, tidak ada kejutan yang muncul. <br><br>  Colokan USB pada modem Huawei E1550 menentukan segalanya, mengambil klien vpn dan menghubungi server rumah.  Menginstal server web dan bermain dengan remote control. <br><br>  Modul WiFi berfungsi baik dalam mode klien dan dalam mode titik akses.  Dia memasukkan modul ke mode AP, menginstal server DHCP, mengkonfigurasi iptables dan menerima router WiFi. <br><br>  Menginstal server Blynk lokal tidak menimbulkan masalah.  Memeriksa pekerjaan dengan ESP8266.  Kontrol dari ponsel cerdas berfungsi, bacaan ditampilkan. <br><br>  Jadi, semua tugas telah selesai, perangkat pusat rumah pintar telah diluncurkan!  Tampaknya semuanya diprogram, dikonfigurasi dengan mudah dan sederhana, atau saya jenius. <br><br>  Saya yakinkan Anda ini tidak begitu!  Saya sudah menemukan sebagian besar sirkuit mikro dan modul, jadi saya menginjak menyapu sebelumnya dan dahi saya sangat sakit , tetapi benjolan itu berlalu, tetapi pengetahuan itu tetap ada! <br><br>  Kekuatan modul prosesor lebih dari cukup untuk menyelesaikan tugas saya, selama pengujian beban rata-rata pada prosesor tidak melebihi 15%.  Kehadiran memori eMMC dan kartu MicroSD akan memungkinkan duplikasi OS dan perangkat lunak.  Konsumsi tanpa menghubungkan perangkat USB adalah sekitar 300 mA.  Dengan konsumsi seperti ini, tidak akan sulit untuk mengatur catu daya tanpa gangguan dari baterai berjam-jam untuk 5 pekerjaan. <br><br>  Basis elemen yang dipilih untuk membangun periferal cukup dapat diandalkan, yang memberikan kepercayaan pada operasi perangkat yang bebas masalah dalam mode 24x7. <br><br>  Kehadiran sejumlah kecil input dan output pada perangkat itu sendiri sepenuhnya dikompensasi oleh kehadiran 485 bus dan modul radio, yaitu, membangun sistem kontrol terdistribusi tidak akan terlalu sulit, dan set input dan output yang ada di papan dapat digunakan untuk kontrol lokal di kabinet listrik. <br><br><h3>  Kesimpulan </h3><br>  Akankah perangkat ini, yang dinyatakan oleh pabrikan, mengintegrasikan semua perangkat pintar?  Dengan peregangan, Anda bisa mengatakan itu akan terjadi.  Namun sayangnya, tidak ada modul radio yang cukup untuk 433 MHz, CAN-bus, dukungan ZigBee, tetapi keberadaan RS485, modul radio pada 2,4 GHz dan WiFi akan memungkinkan menghubungkan sejumlah perangkat yang cukup, dan protokol komunikasi dapat diimplementasikan dalam perangkat lunak. <br><br>  Saya ulangi, perangkat yang dipermasalahkan dibuat dalam dua versi: solusi yang sepenuhnya siap pakai untuk membangun sistem kontrol terdistribusi dan hanya perangkat keras.  Menurut pendapat saya, solusi yang sudah jadi hanya bisa dibeli jika Anda tidak ingin berurusan dengan pemrograman dan kemalasan.  Dalam kasus lain, jauh lebih menarik untuk mengambil platform dan memprogramnya sendiri. <br><br>  Biaya perangkat saat ini tidak saya ketahui.  Menurut pendapat saya, jika pabrikan tidak mendorong harga lebih dari 13 tr.  untuk versi "telanjang", maka perangkat ini cukup menarik untuk dibeli.  Setelah membeli semua suku cadang di China dan memasukkannya ke dalam satu paket, Anda tidak mungkin mendapatkan yang lebih murah. <br><br>  Pesaing mungkin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wiren Board 5</a> .  Ia menang dalam jumlah port dan kemungkinan antarmuka, tetapi kehilangan kekuatan modul prosesor.  Ini tidak memengaruhi tugas standar, tetapi menginstal server Blynk secara lokal atau membuat modul kontrol suara dapat menjadi masalah.  Jika ada yang mencoba melakukan ini di WB5, silakan komentar di komentar. <br><br>  <b>PS:</b> Setelah menyelesaikan artikel, saya juga menemukan chip kriptografi ATSHA204 di papan tulis.  Ini mendukung algoritma cryptographic SHA - 256 dan bagus untuk tugas otentikasi simetris.  Nah, ini benar-benar untuk Geeks! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id410597/">https://habr.com/ru/post/id410597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id410585/index.html">Bagaimana menjadi pesulap (bagian 1)</a></li>
<li><a href="../id410587/index.html">Apple bermaksud membeli kobalt secara eksklusif dari perusahaan pertambangan</a></li>
<li><a href="../id410589/index.html">Ekosistem laut mampu beradaptasi dengan pemanasan global</a></li>
<li><a href="../id410591/index.html">Sejarah emosional prosesor untuk komputer pertama dari 70-an hingga awal 90-an</a></li>
<li><a href="../id410593/index.html">Telegram melakukan putaran ICO yang lain</a></li>
<li><a href="../id410599/index.html">Gelombang pencurian peralatan dari ladang tambang menyapu Islandia</a></li>
<li><a href="../id410601/index.html">Apa itu robotika pendidikan saat ini</a></li>
<li><a href="../id410603/index.html">Manifesto of Propriety</a></li>
<li><a href="../id410605/index.html">Astronom amatir menguji kamera baru dan secara tidak sengaja memotret supernova</a></li>
<li><a href="../id410607/index.html">SpaceX terus bekerja: dua satelit pertama dari jaringan Internet nirkabel global dan perburuan fairing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>