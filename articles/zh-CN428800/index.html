<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ– ğŸ§–ğŸ¼ âœŠğŸ¼ çƒ¹é¥ªå®Œç¾çš„CSS ğŸ‘¯ ğŸ•Ÿ ğŸ€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ 

 ä¸ä¹…å‰ï¼Œæˆ‘æ„è¯†åˆ°åœ¨æ‰€æœ‰åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨CSSä¼šå¯¹å¼€å‘äººå‘˜å’Œç”¨æˆ·é€ æˆç—›è‹¦ã€‚ 

 æˆ‘è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåœ¨æ­£ç¡®ä½¿ç”¨æ ·å¼çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€å †å¥‡æ€ªçš„ä»£ç å’Œé™·é˜±ã€‚ 


 CSSé—®é¢˜ 
 åœ¨æˆ‘æ‰€åšçš„Reactå’ŒVueé¡¹ç›®ä¸­ï¼Œæ ·å¼çš„æ–¹æ³•å¤§è‡´ç›¸åŒã€‚ è¯¥é¡¹ç›®ç”±webpackç»„è£…ï¼Œä»ä¸»å…¥å£ç‚¹å¯¼å…¥ä¸€ä¸ªCSSæ–‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>çƒ¹é¥ªå®Œç¾çš„CSS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/constanta/blog/428800/"> å“ˆHaï¼ <br><br> ä¸ä¹…å‰ï¼Œæˆ‘æ„è¯†åˆ°åœ¨æ‰€æœ‰åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨CSSä¼šå¯¹å¼€å‘äººå‘˜å’Œç”¨æˆ·é€ æˆç—›è‹¦ã€‚ <br><br> æˆ‘è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåœ¨æ­£ç¡®ä½¿ç”¨æ ·å¼çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€å †å¥‡æ€ªçš„ä»£ç å’Œé™·é˜±ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hh/ut/5e/hhut5eodm-tw-e1wdqnecn7dxlu.png"></div><a name="habracut"></a><br><h2>  CSSé—®é¢˜ </h2><br> åœ¨æˆ‘æ‰€åšçš„Reactå’ŒVueé¡¹ç›®ä¸­ï¼Œæ ·å¼çš„æ–¹æ³•å¤§è‡´ç›¸åŒã€‚ è¯¥é¡¹ç›®ç”±webpackç»„è£…ï¼Œä»ä¸»å…¥å£ç‚¹å¯¼å…¥ä¸€ä¸ªCSSæ–‡ä»¶ã€‚ æ­¤æ–‡ä»¶å°†ä½¿ç”¨BEMå‘½åç±»çš„å…¶ä½™CSSæ–‡ä»¶å¯¼å…¥å…¶å†…éƒ¨ã€‚ <br><br><pre><code class="plaintext hljs">styles/ indes.css blocks/ apps-banner.css smart-list.css ...</code> </pre> <br> ç†Ÿæ‚‰å—ï¼Ÿ æˆ‘å‡ ä¹åœ¨æ‰€æœ‰åœ°æ–¹éƒ½ä½¿ç”¨äº†æ­¤å®ç°ã€‚ ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªç«™ç‚¹å‘å±•åˆ°ä¸€ç§çŠ¶æ€é—®é¢˜ï¼Œä½¿æˆ‘çš„çœ¼ç›å¼€å§‹å¤§ä¸ºæ¼ç«ã€‚ <br><br>  <b>1.çƒ­è£…é—®é¢˜</b> <br> ç›¸äº’ä¹‹é—´å¯¼å…¥æ ·å¼æ˜¯é€šè¿‡postcssæ’ä»¶æˆ–æ‰‹å†™ç¬”åŠ è½½å™¨è¿›è¡Œçš„ã€‚ <br> è¦æ³¨æ„çš„æ˜¯ï¼š <br><br> å½“æˆ‘ä»¬é€šè¿‡postcssæˆ–stylus-loaderæ’ä»¶è§£å†³å¯¼å…¥é—®é¢˜æ—¶ï¼Œè¾“å‡ºä¸ºä¸€ä¸ªå¤§CSSæ–‡ä»¶ã€‚ ç°åœ¨ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªæ ·å¼è¡¨ç¨æœ‰æ›´æ”¹ï¼Œæ‰€æœ‰CSSæ–‡ä»¶ä¹Ÿå°†è¢«å†æ¬¡å¤„ç†ã€‚ <br><br> å®ƒç¡®å®æ€æ­»äº†çƒ­é‡è£…çš„é€Ÿåº¦ï¼šå¤„ç†å¤§çº¦950 KBçš„æ‰‹å†™ç¬”æ–‡ä»¶å¤§çº¦éœ€è¦4ç§’é’Ÿã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å…³äºCSSåŠ è½½å™¨çš„æ³¨æ„äº‹é¡¹</b> <div class="spoiler_text"> å¦‚æœé€šè¿‡css-loaderè§£å†³äº†å¯¼å…¥CSSæ–‡ä»¶çš„é—®é¢˜ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼š <br>  css-loaderå°†CSSå˜æˆJavaScriptã€‚ å®ƒå°†ç”¨requireæ›¿æ¢æ‰€æœ‰æ ·å¼å¯¼å…¥ã€‚ ç„¶åï¼Œæ›´æ”¹ä¸€ä¸ªCSSæ–‡ä»¶ä¸ä¼šå½±å“å…¶ä»–æ–‡ä»¶ï¼Œå¹¶ä¸”çƒ­é‡æ–°åŠ è½½ä¼šå¾ˆå¿«å‘ç”Ÿã€‚ <br><br> åˆ°css-loader <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* main.css */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./test.css'</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* background-color: #a1616e; */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: red; }</code> </pre><br> ä¹‹å <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* main.css */</span></span> <span class="hljs-comment"><span class="hljs-comment">// imports exports.i(require("-!../node_modules/css-loader/index.js!./test.css"), ""); // module exports.push([module.id, "html, body {\n margin: 0;\n padding: 0;\n width: 100%;\n height: 100%;\n}\n\nbody {\n /* background-color: #a1616e; */\n background-color: red;\n}\n", ""]); // exports</span></span></code> </pre><br></div></div><br>  <b>2.ä»£ç æ‹†åˆ†é—®é¢˜</b> <br><br> ä»å•ç‹¬çš„æ–‡ä»¶å¤¹åŠ è½½æ ·å¼æ—¶ï¼Œæˆ‘ä»¬ä¸çŸ¥é“æ¯ç§æ ·å¼çš„ä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ— æ³•å°†CSSåˆ†æˆå¤šä¸ªéƒ¨åˆ†å¹¶æ ¹æ®éœ€è¦åŠ è½½å®ƒä»¬ã€‚ <br><br>  <b>3.å¾ˆæ£’çš„CSSç±»å</b> <br><br> æ¯ä¸ªBEMç±»åç§°å¦‚ä¸‹æ‰€ç¤ºï¼šblock-name__element-nameã€‚ å¦‚æ­¤é•¿çš„åç§°ä¼šä¸¥é‡å½±å“æœ€ç»ˆçš„CSSæ–‡ä»¶å¤§å°ï¼šä¾‹å¦‚ï¼Œåœ¨Habrç½‘ç«™ä¸Šï¼ŒCSSç±»åå æ ·å¼æ–‡ä»¶å¤§å°çš„36ï¼…ã€‚ <br><br>  Googleæ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”é•¿æœŸä»¥æ¥ä¸€ç›´åœ¨å…¶æ‰€æœ‰é¡¹ç›®ä¸­ä½¿ç”¨åç§°æœ€å°åŒ–ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zb/ft/yx/zbftyxjxnsh-irc6odfc5cszvxk.png" alt="ä¸€å—google.com"></div><br>  <font color="#999999"><i>ä¸€å—google.com</i></font> <br><br> æ‰€æœ‰è¿™äº›é—®é¢˜ä½¿æˆ‘äº•ç„¶æœ‰åºï¼Œæˆ‘æœ€ç»ˆå†³å®šç»“æŸè¿™äº›é—®é¢˜ï¼Œå¹¶å–å¾—ç†æƒ³çš„ç»“æœã€‚ <br><br><h2> å†³ç­–é€‰æ‹© </h2><br> ä¸ºäº†æ‘†è„±ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼šJSä¸­çš„CSSï¼ˆæ ·å¼ç»„ä»¶ï¼‰å’ŒCSSæ¨¡å—ã€‚ <br><br> æˆ‘æ²¡æœ‰çœ‹åˆ°è¿™äº›è§£å†³æ–¹æ¡ˆä¸­çš„ä¸¥é‡ç¼ºé™·ï¼Œä½†æœ€ç»ˆç”±äºä»¥ä¸‹å‡ ä¸ªåŸå› ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨CSSæ¨¡å—ï¼š <br><br><ul><li> æ‚¨å¯ä»¥å°†CSSæ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œä»¥åˆ†åˆ«ç¼“å­˜JSå’ŒCSSã€‚ </li><li> çƒ§ç»“æ ·å¼çš„æ›´å¤šé€‰é¡¹ã€‚ </li><li> ä½¿ç”¨CSSæ–‡ä»¶æ›´ä¸ºå¸¸è§ã€‚ </li></ul><br> åšå‡ºäº†é€‰æ‹©ï¼Œæ˜¯æ—¶å€™å¼€å§‹åšé¥­äº†ï¼ <br><br><h2> åŸºæœ¬è®¾å®š </h2><br> ç¨å¾®é…ç½®ä¸€ä¸‹webpackã€‚ æ·»åŠ css-loaderå¹¶åœ¨å…¶ä¸­å¯ç”¨CSSæ¨¡å—ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* webpack.config.js */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span> { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, } }, ], }, ], }, };</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†CSSæ–‡ä»¶ä¼ æ’­åˆ°åŒ…å«ç»„ä»¶çš„æ–‡ä»¶å¤¹ä¸­ã€‚ åœ¨æ¯ä¸ªç»„ä»¶å†…éƒ¨ï¼Œæˆ‘ä»¬å¯¼å…¥å¿…è¦çš„æ ·å¼ã€‚ <br><br><pre> <code class="plaintext hljs">project/ components/ CoolComponent/ index.js index.css</code> </pre><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* components/CoolComponent/index.css */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.contentWrapper</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">8px</span></span> <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgba</span></span>(45, 45, 45, .3); } <span class="hljs-selector-class"><span class="hljs-selector-class">.title</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: bold; } <span class="hljs-selector-class"><span class="hljs-selector-class">.text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; }</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* components/CoolComponent/index.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styles <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./index.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ({ text }) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.contentWrapper}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.title}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Weird title </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {text} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> );</code> </pre><br> æ—¢ç„¶æˆ‘ä»¬å·²ç»ç ´åäº†CSSæ–‡ä»¶ï¼Œçƒ­é‡è£…å°†åªå¤„ç†å¯¹ä¸€ä¸ªæ–‡ä»¶çš„æ›´æ”¹ã€‚ é—®é¢˜1è§£å†³äº†ï¼Œå¹²æ¯ï¼ <br><br><h2> å°†CSSåˆ†æˆå¤§å— </h2><br> å½“ä¸€ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šé¡µé¢ï¼Œè€Œå®¢æˆ·ç«¯åªéœ€è¦å…¶ä¸­ä¸€ä¸ªé¡µé¢æ—¶ï¼Œå°†æ‰€æœ‰æ•°æ®æŠ½å‡ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚  Reactä¸ºæ­¤æä¾›äº†ä¸€ä¸ªå¾ˆæ£’çš„react-loadableåº“ã€‚ å®ƒå…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€ä¸‹è½½æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* AsyncCoolComponent.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loading <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'path/to/Loading'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Loadable({ <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* webpackChunkName: 'CoolComponent' */</span></span><span class="hljs-string"><span class="hljs-string">'path/to/CoolComponent'</span></span>), <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: Loading, });</code> </pre><br>  Webpackå°†æŠŠCoolComponentç»„ä»¶è½¬æ¢ä¸ºä¸€ä¸ªå•ç‹¬çš„JSæ–‡ä»¶ï¼ˆå—ï¼‰ï¼Œè¯¥æ–‡ä»¶å°†åœ¨å‘ˆç°AsyncCoolComponentæ—¶ä¸‹è½½ã€‚ <br><br> åŒæ—¶ï¼ŒCoolComponentåŒ…å«è‡ªå·±çš„æ ·å¼ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒCSSéƒ½ä»¥JSå­—ç¬¦ä¸²å½¢å¼å­˜åœ¨äºå…¶ä¸­ï¼Œå¹¶ä½¿ç”¨style-loaderä½œä¸ºæ ·å¼æ’å…¥ã€‚ ä½†æ˜¯ä¸ºä»€ä¹ˆä¸å°†æ ·å¼åˆ‡æˆå•ç‹¬çš„æ–‡ä»¶å‘¢ï¼Ÿ <br><br> æˆ‘ä»¬å°†ä¸ºä¸»æ–‡ä»¶å’Œæ¯ä¸ªå—åˆ›å»ºè‡ªå·±çš„CSSæ–‡ä»¶ã€‚ <br><br> å®‰è£…mini-css-extract-pluginå¹¶ä¸webpacké…ç½®ç»“åˆä½¿ç”¨ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* webpack.config.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MiniCssExtractPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mini-css-extract-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isDev = process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'development'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> test: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ (isDev ? <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span> : MiniCssExtractPlugin.loader), { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, }, ], }, ], }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> ...(isDev ? [] : [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MiniCssExtractPlugin({ <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].[contenthash].css'</span></span>, <span class="hljs-attr"><span class="hljs-attr">chunkFilename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].[contenthash].css'</span></span>, }), ]), ], };</code> </pre><br> ä»…æ­¤è€Œå·²ï¼ è®©æˆ‘ä»¬ä»¥ç”Ÿäº§æ¨¡å¼ç»„è£…é¡¹ç›®ï¼Œæ‰“å¼€æµè§ˆå™¨å¹¶æŸ¥çœ‹ç½‘ç»œé€‰é¡¹å¡ï¼š <br><br><pre> <code class="plaintext hljs">//    GET /main.aff4f72df3711744eabe.css GET /main.43ed5fc03ceb844eab53.js //  CoolComponent ,   JS  CSS GET /CoolComponent.3eaa4773dca4fffe0956.css GET /CoolComponent.2462bbdbafd820781fae.js</code> </pre><br> é—®é¢˜2å·²ç»ç»“æŸã€‚ <br><br><h2> æˆ‘ä»¬ç¼©å°CSSç±» </h2><br>  Css-loaderåœ¨å†…éƒ¨æ›´æ”¹ç±»åï¼Œå¹¶è¿”å›ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å…·æœ‰æœ¬åœ°ç±»ååˆ°å…¨å±€çš„æ˜ å°„ã€‚ <br><br> å®ŒæˆåŸºæœ¬è®¾ç½®åï¼Œcss-loaderä¼šæ ¹æ®æ–‡ä»¶çš„åç§°å’Œä½ç½®ç”Ÿæˆä¸€ä¸ªé•¿å“ˆå¸Œã€‚ <br><br> åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬çš„CoolComponentç°åœ¨å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rs2inRqijrGnbl0txTQ8v"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_2AU-QBWt5K2v7J1vRT0hgn"</span></span></span><span class="hljs-tag">&gt;</span></span> Weird title <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_1DaTAH8Hgn0BQ4H13yRwQ0"</span></span></span><span class="hljs-tag">&gt;</span></span> Lorem ipsum dolor sit amet consectetur. <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> å½“ç„¶ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´è¿˜ä¸å¤Ÿã€‚ <br><br> åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»æœ‰åç§°æ¥æŸ¥æ‰¾åŸå§‹æ ·å¼ã€‚ åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œåº”æœ€å°åŒ–ç±»åã€‚ <br><br>  Css-loaderå…è®¸æ‚¨é€šè¿‡é€‰é¡¹localIdentNameå’ŒgetLocalIdentè‡ªå®šä¹‰ç±»åç§°çš„æ›´æ”¹ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å°†è®¾ç½®æè¿°æ€§çš„localIdentName-'[path] _ [name] _ [local]'ï¼Œåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå°†ç±»åæœ€å°åŒ–çš„å‡½æ•°ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* webpack.config.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getScopedName = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path/to/getScopedName'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isDev = process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'development'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isDev ? </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'style-loader'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : MiniCssExtractPlugin.loader</span></span></span><span class="hljs-function">), { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loader</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">css</span></span></span><span class="hljs-function">-</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loader</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">: { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">, ...(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isDev ? { localIdentName: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'[path]_[name]_[local]'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, } : { getLocalIdent: (context, localIdentName, localName</span></span></span><span class="hljs-function">) =&gt;</span></span> ( getScopedName(localName, context.resourcePath) ), }), }, }, ], }, ], }, };</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* getScopedName.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   ,        CSS      */</span></span> <span class="hljs-comment"><span class="hljs-comment">//      const incstr = require('incstr'); const createUniqueIdGenerator = () =&gt; { const uniqIds = {}; const generateNextId = incstr.idGenerator({ //  d ,    ad, //      Adblock alphabet: 'abcefghijklmnopqrstuvwxyzABCEFGHJKLMNOPQRSTUVWXYZ', }); //       return (name) =&gt; { if (!uniqIds[name]) { uniqIds[name] = generateNextId(); } return uniqIds[name]; }; }; const localNameIdGenerator = createUniqueIdGenerator(); const componentNameIdGenerator = createUniqueIdGenerator(); module.exports = (localName, resourcePath) =&gt; { //   ,     index.css const componentName = resourcePath .split('/') .slice(-2, -1)[0]; const localId = localNameIdGenerator(localName); const componentId = componentNameIdGenerator(componentName); return `${componentId}_${localId}`; };</span></span></code> </pre><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ­£åœ¨å¼€å‘æ¼‚äº®çš„è§†è§‰åç§°ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src-components-ErrorNotification-_index_content-wrapper"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src-components-ErrorNotification-_index_title"</span></span></span><span class="hljs-tag">&gt;</span></span> Weird title <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src-components-ErrorNotification-_index_text"</span></span></span><span class="hljs-tag">&gt;</span></span> Lorem ipsum dolor sit amet consectetur. <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> å¹¶åœ¨ç”Ÿäº§ä¸­å‡å°‘ç­çº§ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"e_f"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"e_g"</span></span></span><span class="hljs-tag">&gt;</span></span> Weird title <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"e_h"</span></span></span><span class="hljs-tag">&gt;</span></span> Lorem ipsum dolor sit amet consectetur. <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> ç¬¬ä¸‰ä¸ªé—®é¢˜è¢«å…‹æœã€‚ <br><br><h2> åˆ é™¤ä¸å¿…è¦çš„ç¼“å­˜å¤±æ•ˆ </h2><br> ä½¿ç”¨ä¸Šè¿°çš„ç±»æœ€å°åŒ–æŠ€æœ¯ï¼Œå°è¯•å¤šæ¬¡æ„å»ºé¡¹ç›®ã€‚ æ³¨æ„æ–‡ä»¶ç¼“å­˜ï¼š <br><br><pre> <code class="plaintext hljs">/*   */ app.bf70bcf8d769b1a17df1.js app.db3d0bd894d38d036117.css /*   */ app.1f296b75295ada5a7223.js app.eb2519491a5121158bd2.css</code> </pre><br> ä¼¼ä¹åœ¨æ¯ä¸ªæ–°æ„å»ºä¹‹åï¼Œæˆ‘ä»¬éƒ½ä½¿ç¼“å­˜æ— æ•ˆã€‚ æ€ä¹ˆä¼šè¿™æ · <br><br> é—®é¢˜åœ¨äºwebpackæ— æ³•ä¿è¯æ–‡ä»¶çš„å¤„ç†é¡ºåºã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒCSSæ–‡ä»¶å°†ä»¥ä¸å¯é¢„æµ‹çš„é¡ºåºå¤„ç†ï¼Œå¯¹äºå…·æœ‰ä¸åŒç¨‹åºé›†çš„ç›¸åŒç±»åç§°ï¼Œå°†ç”Ÿæˆä¸åŒçš„æœ€å°åç§°ã€‚ <br><br> ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬åœ¨ç¨‹åºé›†ä¹‹é—´ä¿å­˜æœ‰å…³ç”Ÿæˆçš„ç±»åçš„æ•°æ®ã€‚ ç¨å¾®æ›´æ–°getScopedName.jsæ–‡ä»¶ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* getScopedName.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> incstr = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'incstr'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     const { getGeneratorData, saveGeneratorData, } = require('./generatorHelpers'); const createUniqueIdGenerator = (generatorIdentifier) =&gt; { //    const uniqIds = getGeneratorData(generatorIdentifier); const generateNextId = incstr.idGenerator({ alphabet: 'abcefghijklmnopqrstuvwxyzABCEFGHJKLMNOPQRSTUVWXYZ', }); return (name) =&gt; { if (!uniqIds[name]) { uniqIds[name] = generateNextId(); //    , //      // (   debounce  ) saveGeneratorData(generatorIdentifier, uniqIds); } return uniqIds[name]; }; }; //     , //          const localNameIdGenerator = createUniqueIdGenerator('localName'); const componentNameIdGenerator = createUniqueIdGenerator('componentName'); module.exports = (localName, resourcePath) =&gt; { const componentName = resourcePath .split('/') .slice(-2, -1)[0]; const localId = localNameIdGenerator(localName); const componentId = componentNameIdGenerator(componentName); return `${componentId}_${localId}`; };</span></span></code> </pre><br>  generatorHelpers.jsæ–‡ä»¶çš„å®ç°å¹¶ä¸é‡è¦ï¼Œä½†æ˜¯å¦‚æœæ‚¨æœ‰å…´è¶£ï¼Œè¿™é‡Œæ˜¯æˆ‘çš„ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">generatorHelpers.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getGeneratorDataPath = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">generatorIdentifier</span></span></span><span class="hljs-function"> =&gt;</span></span> ( path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">`meta/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${generatorIdentifier}</span></span></span><span class="hljs-string">.json`</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getGeneratorData = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">generatorIdentifier</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = getGeneratorDataPath(generatorIdentifier); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fs.existsSync(path)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(path); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}; }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> saveGeneratorData = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">generatorIdentifier, uniqIds</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = getGeneratorDataPath(generatorIdentifier); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(uniqIds, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); fs.writeFileSync(path, data, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>); }; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { getGeneratorData, saveGeneratorData, };</code> </pre><br></div></div><br> å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„ç¼“å­˜å·²ç›¸åŒï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚ å¦å¤–ä¸€ç‚¹å¯¹æˆ‘ä»¬æœ‰åˆ©ï¼ <br><br><h2> åˆ é™¤è¿è¡Œæ—¶å˜é‡ </h2><br> ç”±äºæˆ‘å†³å®šåšå‡ºæ›´å¥½çš„å†³å®šï¼Œå› æ­¤æœ€å¥½é€šè¿‡ç±»æ˜ å°„æ¥åˆ é™¤æ­¤å˜é‡ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç¼–è¯‘é˜¶æ®µæ‹¥æœ‰æ‰€æœ‰å¿…éœ€çš„æ•°æ®ã€‚ <br><br>  Babel-plugin-react-css-moduleså°†å¯¹æ­¤æä¾›å¸®åŠ©ã€‚ åœ¨ç¼–è¯‘æ—¶ï¼Œå®ƒï¼š <br><br><ol><li> å°†åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°CSSå¯¼å…¥ã€‚ </li><li> å®ƒå°†æ‰“å¼€æ­¤CSSæ–‡ä»¶ï¼Œå¹¶åƒcss-loaderä¸€æ ·æ›´æ”¹CSSç±»åç§°ã€‚ </li><li> å®ƒå°†æ‰¾åˆ°å…·æœ‰styleNameå±æ€§çš„JSXèŠ‚ç‚¹ã€‚ </li><li> å°†styleNameä¸­çš„æœ¬åœ°ç±»åç§°æ›¿æ¢ä¸ºå…¨å±€åç§°ã€‚ </li></ol><br> è®¾ç½®æ­¤æ’ä»¶ã€‚ è®©æˆ‘ä»¬ç©babelé…ç½®ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* .babelrc.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ,     const getScopedName = require('path/to/getScopedName'); const isDev = process.env.NODE_ENV === 'development'; module.exports = { /* ... */ plugins: [ /* ... */ ['react-css-modules', { generateScopedName: isDev ? '[path]_[name]_[local]' : getScopedName, }], ], };</span></span></code> </pre><br> æ›´æ–°æˆ‘ä»¬çš„JSXæ–‡ä»¶ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* CoolComponent/index.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./index.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ({ text }) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styleName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"content-wrapper"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styleName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Weird title </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styleName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {text} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> );</code> </pre><br> å› æ­¤ï¼Œæˆ‘ä»¬ä¸å†ä½¿ç”¨æ˜¾ç¤ºæ ·å¼åç§°çš„å˜é‡ï¼Œè€Œç°åœ¨è¿˜æ²¡æœ‰å®ƒï¼ <br><br>  ...è¿˜æ˜¯åœ¨é‚£é‡Œï¼Ÿ <br><br> æˆ‘ä»¬å°†æ”¶é›†é¡¹ç›®å¹¶ç ”ç©¶èµ„æºï¼š <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* main.24436cbf94546057cae3.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e, t, n</span></span></span><span class="hljs-function">) </span></span>{ e.exports = { <span class="hljs-string"><span class="hljs-string">"content-wrapper"</span></span>: <span class="hljs-string"><span class="hljs-string">"e_f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">"e_g"</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">"e_h"</span></span> } } <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span></code> </pre><br> å°½ç®¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒï¼Œä½†çœ‹èµ·æ¥è¯¥å˜é‡ä»ç„¶å­˜åœ¨ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ <br><br> è¯¥webpackæ”¯æŒå¤šç§ç±»å‹çš„æ¨¡å—åŒ–ç»“æ„ï¼Œå…¶ä¸­æœ€å—æ¬¢è¿çš„æ˜¯ES2015ï¼ˆå¯¼å…¥ï¼‰å’ŒcommonJSï¼ˆå¿…éœ€ï¼‰ã€‚ <br><br>  ES2015æ¨¡å—ä¸commonJSä¸åŒï¼Œç”±äºå®ƒä»¬çš„é™æ€ç»“æ„ï¼Œå®ƒä»¬æ”¯æŒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‘‡æ ‘</a> ã€‚ <br><br> ä½†æ˜¯css-loaderå’Œmini-css-extract-pluginåŠ è½½å™¨éƒ½ä½¿ç”¨commonJSè¯­æ³•å¯¼å‡ºç±»åï¼Œå› æ­¤ä¸ä¼šä»æ„å»ºä¸­åˆ é™¤å¯¼å‡ºçš„æ•°æ®ã€‚ <br><br> æˆ‘ä»¬å°†ç¼–å†™æˆ‘ä»¬çš„å°å‹åŠ è½½å™¨ï¼Œå¹¶åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹åˆ é™¤å¤šä½™çš„æ•°æ®ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* webpack.config.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resolve = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">relativePath</span></span></span><span class="hljs-function"> =&gt;</span></span> path.resolve(__dirname, relativePath); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isDev = process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'development'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ ...(isDev ? [<span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>] : [ resolve(<span class="hljs-string"><span class="hljs-string">'path/to/webpack-loaders/nullLoader'</span></span>), MiniCssExtractPlugin.loader, ]), { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }, ], }, ], }, };</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* nullLoader.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">//     ,   module.exports = () =&gt; '// empty';</span></span></code> </pre><br> å†æ¬¡æ£€æŸ¥æ±‡ç¼–æ–‡ä»¶ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* main.35f6b05f0496bff2048a.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e, t, n</span></span></span><span class="hljs-function">) </span></span>{} <span class="hljs-comment"><span class="hljs-comment">/* â€¦ */</span></span></code> </pre><br> æ‚¨å¯ä»¥æ¾ä¸€å£æ°”ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">åˆ é™¤ç±»æ˜ å°„å˜é‡å¤±è´¥</b> <div class="spoiler_text"> æœ€åˆï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œä½¿ç”¨å·²ç»å­˜åœ¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">nullåŠ è½½ç¨‹åº</a>åŒ…ä¼¼ä¹æœ€ä¸ºæ˜æ˜¾ã€‚ <br><br> ä½†äº‹å®è¯æ˜å¹¶éå¦‚æ­¤ç®€å•ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*  null-loader */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'// empty (null-loader)'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pitch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'// empty (null-loader)'</span></span>; }</code> </pre><br> å¦‚æ‚¨æ‰€è§ï¼Œé™¤äº†ä¸»å‡½æ•°å¤–ï¼Œç©ºåŠ è½½å™¨è¿˜å¯¼å‡ºäº†pitchå‡½æ•°ã€‚ æˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»æ–‡æ¡£</a>ä¸­äº†è§£åˆ°ï¼ŒéŸ³è°ƒæ–¹æ³•æ¯”å…¶ä»–æ–¹æ³•æ›´æ—©è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¦‚æœå®ƒä»¬ä»æ­¤æ–¹æ³•è¿”å›ä¸€äº›æ•°æ®ï¼Œåˆ™å¯ä»¥å–æ¶ˆæ‰€æœ‰åç»­çš„åŠ è½½å™¨ã€‚ <br><br> ä½¿ç”¨null-loaderï¼ŒCSSç”Ÿæˆåºåˆ—å¼€å§‹å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><ul><li> è°ƒç”¨null-loaderçš„pitchæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚ </li><li> ç”±äºpitchæ–¹æ³•è¿”å›å€¼ï¼Œå› æ­¤ä¸ä¼šè°ƒç”¨æ‰€æœ‰åç»­åŠ è½½ç¨‹åºã€‚ </li></ul><br> æˆ‘å†ä¹Ÿæ²¡æœ‰çœ‹åˆ°è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤å†³å®šè‡ªå·±åˆ¶é€ è£…è½½æœºã€‚ <br></div></div><br><div class="spoiler">  <b class="spoiler_title">ä¸Vue.jsä¸€èµ·ä½¿ç”¨</b> <div class="spoiler_text"> å¦‚æœæ‚¨åªæœ‰ä¸€ä¸ªVue.jsè§¦æ‰‹å¯åŠï¼Œä½†çœŸçš„æƒ³å‹ç¼©ç±»åå¹¶åˆ é™¤è¿è¡Œæ—¶å˜é‡ï¼Œé‚£ä¹ˆæˆ‘æœ‰ä¸ªä¸é”™çš„é€‰æ‹©ï¼ <br><br> æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸¤ä¸ªæ’ä»¶ï¼šbabel-plugin-transform-vue-jsxå’Œbabel-plugin-react-css-modulesã€‚ æˆ‘ä»¬å°†éœ€è¦ç¬¬ä¸€ä¸ªåœ¨æ¸²æŸ“å‡½æ•°ä¸­ç¼–å†™JSXï¼Œç¬¬äºŒä¸ªï¼Œæ­£å¦‚æ‚¨å·²ç»çŸ¥é“çš„ï¼Œéœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆåç§°ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* .babelrc.js */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-string"><span class="hljs-string">'transform-vue-jsx'</span></span>, [<span class="hljs-string"><span class="hljs-string">'react-css-modules'</span></span>, { <span class="hljs-comment"><span class="hljs-comment">//    attributeNames: { styleName: 'class', }, }], ], };</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./index.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TextComponent = { render(h) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styleName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Lorem ipsum dolor. </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }, mounted() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I\'m mounted!'</span></span>); }, }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> TextComponent;</code> </pre><br></div></div><br><br><h2> å……åˆ†å‹ç¼©CSS </h2><br> å‡è®¾ä»¥ä¸‹CSSå‡ºç°åœ¨é¡¹ç›®ä¸­ï¼š <br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.component1__title</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; } <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: green; } <span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title_red</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; }</code> </pre><br> æ‚¨æ˜¯CSSç¼©å°å™¨ã€‚ æ‚¨ä¼šå¦‚ä½•æŒ¤å‹å®ƒï¼Ÿ <br><br> æˆ‘è®¤ä¸ºæ‚¨çš„ç­”æ¡ˆæ˜¯è¿™æ ·çš„ï¼š <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title</span></span>{<span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:green} <span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title_red</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.component1__title</span></span>{<span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:red}</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥å¸¸ç”¨çš„ç¼©å°å™¨ä¼šæ‰§è¡Œçš„æ“ä½œã€‚ å°†æˆ‘ä»¬çš„ä»£ç æ”¾åœ¨ä¸€äº›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨çº¿å‹ç¼©å™¨ä¸­</a> ï¼š <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.component1__title</span></span>{<span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:red} <span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title</span></span>{<span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:green} <span class="hljs-selector-class"><span class="hljs-selector-class">.component2__title_red</span></span>{<span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:red}</code> </pre><br> ä»–ä¸ºä»€ä¹ˆä¸èƒ½å‘¢ï¼Ÿ <br><br> ç¼©å°å™¨æ‹…å¿ƒç”±äºæ ·å¼å£°æ˜é¡ºåºçš„æ›´æ”¹ï¼ŒæŸäº›ä¸œè¥¿ä¼šæŸåã€‚ ä¾‹å¦‚ï¼Œå¦‚æœé¡¹ç›®å…·æœ‰ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"component1__title component2__title"</span></span></span><span class="hljs-tag">&gt;</span></span>Some weird title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> ç”±äºæ‚¨çš„åŸå› ï¼Œæ ‡é¢˜å°†å˜ä¸ºçº¢è‰²ï¼Œå¹¶ä¸”åœ¨çº¿ç¼©å°å™¨å°†ä¿ç•™æ­£ç¡®çš„æ ·å¼å£°æ˜é¡ºåºï¼Œå¹¶ä¸”å°†å˜ä¸ºç»¿è‰²ã€‚ å½“ç„¶ï¼Œæ‚¨çŸ¥é“component1__titleå’Œcomponent2__titleæ°¸è¿œä¸ä¼šäº¤é›†ï¼Œå› ä¸ºå®ƒä»¬ä½äºä¸åŒçš„ç»„ä»¶ä¸­ã€‚ ä½†æ˜¯ï¼Œå¦‚ä½•å¯¹çŸ¿å·¥è¯´å‘¢ï¼Ÿ <br><br> æœç´¢æ–‡æ¡£åï¼Œæˆ‘å‘ç°å¯ä»¥æŒ‡å®šä»…ç”¨äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">cssoçš„</a>ç±»çš„ä¸Šä¸‹æ–‡ã€‚ è€Œä¸”ä»–æ²¡æœ‰å¼€ç®±å³ç”¨çš„Webpackä¾¿æ·è§£å†³æ–¹æ¡ˆã€‚ è¦èµ°å¾—æ›´è¿œï¼Œæˆ‘ä»¬éœ€è¦ä¸€è¾†å°å‹è‡ªè¡Œè½¦ã€‚ <br><br> æ‚¨éœ€è¦å°†æ¯ä¸ªç»„ä»¶çš„ç±»åç»„åˆåˆ°å•ç‹¬çš„æ•°ç»„ä¸­ï¼Œå¹¶åœ¨cssoä¸­æä¾›å®ƒã€‚ æ—©äº›æ—¶å€™ï¼Œæˆ‘ä»¬æ ¹æ®è¿™ç§æ¨¡å¼ç”Ÿæˆäº†æœ€å°åŒ–çš„ç±»åï¼šâ€œ [componentId] _ [classNameId]â€ã€‚ å› æ­¤ï¼Œå¯ä»¥é€šè¿‡åç§°çš„ç¬¬ä¸€éƒ¨åˆ†ç®€å•åœ°ç»„åˆç±»åç§°ï¼ <br><br> ç³»å¥½å®‰å…¨å¸¦å¹¶ç¼–å†™æ’ä»¶ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* webpack.config.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cssoLoader = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path/to/cssoLoader'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> plugins: [ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> cssoLoader(), ], };</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* cssoLoader.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csso = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'csso'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RawSource = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack-sources/lib/RawSource'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getScopes = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./helpers/getScopes'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isCssFilename = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filename</span></span></span><span class="hljs-function"> =&gt;</span></span> /\.css$/.test(filename); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cssoPlugin</span></span></span><span class="hljs-class"> </span></span>{ apply(compiler) { compiler.hooks.compilation.tap(<span class="hljs-string"><span class="hljs-string">'csso-plugin'</span></span>, (compilation) =&gt; { compilation.hooks.optimizeChunkAssets.tapAsync(<span class="hljs-string"><span class="hljs-string">'csso-plugin'</span></span>, (chunks, callback) =&gt; { chunks.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chunk</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    CSS  chunk.files.forEach((filename) =&gt; { if (!isCssFilename(filename)) { return; } const asset = compilation.assets[filename]; const source = asset.source(); //  ast  CSS  const ast = csso.syntax.parse(source); //        const scopes = getScopes(ast); //  ast const { ast: compressedAst } = csso.compress(ast, { usage: { scopes, }, }); const minifiedCss = csso.syntax.generate(compressedAst); compilation.assets[filename] = new RawSource(minifiedCss); }); }); callback(); }); }); } } /*    sourceMap,     ,       https://github.com/zoobestik/csso-webpack-plugin" */</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* getScopes.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   ,          ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csso = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'csso'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getComponentId = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tokens = className.split(<span class="hljs-string"><span class="hljs-string">'_'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   ,   //   [componentId]_[classNameId], //     if (tokens.length !== 2) { return 'default'; } return tokens[0]; }; module.exports = (ast) =&gt; { const scopes = {}; //      csso.syntax.walk(ast, (node) =&gt; { if (node.type !== 'ClassSelector') { return; } const componentId = getComponentId(node.name); if (!scopes[componentId]) { scopes[componentId] = []; } if (!scopes[componentId].includes(node.name)) { scopes[componentId].push(node.name); } }); return Object.values(scopes); };</span></span></code> </pre><br> å¹¶ä¸æ˜¯é‚£ä¹ˆå›°éš¾ï¼Œå¯¹å§ï¼Ÿ é€šå¸¸ï¼Œæ­¤ç¼©å°è¿˜ä¼šå°†CSSå‹ç¼©3-6ï¼…ã€‚ <br><br><h2> å€¼å¾—å—ï¼Ÿ </h2><br> å½“ç„¶å¯ä»¥ <br><br> åœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ï¼Œç»ˆäºå‡ºç°äº†å¿«é€Ÿçš„çƒ­é‡è£…ï¼ŒCSSå¼€å§‹åˆ†è£‚æˆç¢ç‰‡ï¼Œå¹³å‡é‡é‡å‡è½»äº†40ï¼…ã€‚ <br><br> è¿™å°†åŠ å¿«ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œå¹¶å‡å°‘è§£ææ ·å¼çš„æ—¶é—´ï¼Œè¿™ä¸ä»…ä¼šå½±å“ç”¨æˆ·ï¼Œè¿˜ä¼šå½±å“CEOã€‚ <br><br> è¿™ç¯‡æ–‡ç« å·²ç»æœ‰äº†å¾ˆå¤§çš„å¢é•¿ï¼Œä½†æ˜¯æˆ‘å¾ˆé«˜å…´æœ‰äººèƒ½å¤Ÿå°†å…¶æ»šåŠ¨åˆ°æœ€åã€‚ æ„Ÿè°¢æ‚¨çš„å®è´µæ—¶é—´ï¼ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cd/wm/b8/cdwmb8ygmq0mysnve4zjina7-iw.png"></div><br><h4> æ‰€ç”¨ææ–™ </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é€šè¿‡å‡å°‘ç±»åå¹¶ä½¿ç”¨èŒƒå›´éš”ç¦»å°†CSSåŒ…å¤§å°å‡å°‘70ï¼…</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428800/">https://habr.com/ru/post/zh-CN428800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428790/index.html">æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨longpollåœ¨pythonä¸­ä¸ºVKontakteç¼–å†™æœºå™¨äººèŠå¤©ã€‚ ç¬¬äºŒéƒ¨åˆ† åŒå¾ªç¯ï¼Œå¼‚å¸¸å’Œå…¶ä»–å¼‚ç«¯</a></li>
<li><a href="../zh-CN428792/index.html">æ–°çš„Apple T2èŠ¯ç‰‡ä½¿ç¬”è®°æœ¬ç”µè„‘çš„å†…ç½®éº¦å…‹é£éš¾ä»¥æ”¶å¬</a></li>
<li><a href="../zh-CN428794/index.html">çº¦æŸé—®é¢˜æ•°å­¦ä¼˜åŒ–çš„åŸºæœ¬æ–¹æ³•æ¦‚è¿°</a></li>
<li><a href="../zh-CN428796/index.html">åœ¨Unityä¸Šå®æ—¶æ“çºµç½‘æ ¼</a></li>
<li><a href="../zh-CN428798/index.html">å¦‚ä½•åœ¨ç‹¬ç«‹å¼€å‘äººå‘˜ä¸­ç”Ÿå­˜ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN428806/index.html">æ¶ˆè´¹è€…æ”¯ç¥¨åˆ†æï¼šä»–ä»¬åœ¨äºšé©¬é€Šè´­ä¹°çš„å•†å“</a></li>
<li><a href="../zh-CN428808/index.html">å­¦ç”Ÿç”Ÿæ´»ä¸­çš„ä¸ä¾¿</a></li>
<li><a href="../zh-CN428810/index.html">18ç§éŸ³é¢‘æ•°å­—æŠ€æœ¯ææ–™</a></li>
<li><a href="../zh-CN428812/index.html">TypeScriptï¼šä½¿ç”¨å±æ€§çš„ç±»å‹éªŒè¯å°†JSONååºåˆ—åŒ–ä¸ºç±»</a></li>
<li><a href="../zh-CN428814/index.html">ä½¿ç”¨Elasticsearchä¸ºç«äº‰å¯¹æ‰‹çš„ä»·æ ¼ç›‘æ§æœåŠ¡è¿›è¡Œäº§å“åŒ¹é…</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>