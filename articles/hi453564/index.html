<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЬКЁЯП╛ ЁЯЩЖЁЯП╜ ЁЯМЦ рдЗрд╕реЗ рд╕рдЪ рдХрд░реЗрдВ - рдПрдХрддрд╛ рдкрд░ рдПрдХ рд▓реЙрдЬрд┐рдХ рдЧреЗрдо рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ ЁЯеБ ЁЯСиЁЯП╝тАНтЬИя╕П ЁЯзЪЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореИрдВ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдореЛрдмрд╛рдЗрд▓ рдЧреЗрдо рдХреА рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдФрд░ рдПрдХ рдХрд▓рд╛рдХрд╛рд░ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред рдпрд╣ рд▓реЗрдЦ рдХрд╛рдлреА рд╣рдж рддрдХ рддрдХрдиреАрдХреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рд╡рд┐рд╡рд░рдг рд╣реИред ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЗрд╕реЗ рд╕рдЪ рдХрд░реЗрдВ - рдПрдХрддрд╛ рдкрд░ рдПрдХ рд▓реЙрдЬрд┐рдХ рдЧреЗрдо рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453564/"><img src="https://habrastorage.org/webt/4k/h-/6e/4kh-6e4-iwvtuaz42eqb2gg81iu.png"><br><br>  рдореИрдВ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдореЛрдмрд╛рдЗрд▓ рдЧреЗрдо рдХреА рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдФрд░ рдПрдХ рдХрд▓рд╛рдХрд╛рд░ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рдпрд╣ рд▓реЗрдЦ рдХрд╛рдлреА рд╣рдж рддрдХ рддрдХрдиреАрдХреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рд╡рд┐рд╡рд░рдг рд╣реИред <br>  рд╕рд╛рд╡рдзрд╛рдиреА, рдмрд╣реБрдд рд╕рд╛рд░рд╛ рдкрд╛рда! <br><br>  рд▓реЗрдЦ рдПрдХ рдЧрд╛рдЗрдб рдпрд╛ рдкрд╛рда рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдкрд╛рдардХ рдЗрд╕рд╕реЗ рдЙрдкрдпреЛрдЧреА рдХреБрдЫ рд╕реАрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдХреБрдЫ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдЕрдиреБрднрд╡ рдХреЗ рд╕рд╛рде рдПрдХрддрд╛ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ред <br><a name="habracut"></a><br><a name="Content"></a><h4>  рд╕рд╛рдордЧреНрд░реА: </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдЪрд╛рд░</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреЗрдордкреНрд▓реЗ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд╣рд╛рдиреА</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд┐рдЬрд╝рд╛рдЗрди</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд░</a> <br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рджреНрдпреБрдд рддрддреНрд╡</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЙрд▓реНрд╡рд░</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ElementsProvider</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CircuitGenerator</a> </li></ol><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреЗрд▓ рдХреА рдХрдХреНрд╖рд╛рдПрдВ</a> <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдХрд╛рд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдФрд░ рдбрд┐</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдиреНрдпрд╛рд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рджреНрдпреБрдд рддрддреНрд╡</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреЗрд▓ рдкреНрд░рдмрдВрдзрди</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрддрд░ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">cutscene</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрддрд┐рд░рд┐рдХреНрдд рдЧреЗрдордкреНрд▓реЗ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореБрджреНрд░реАрдХрд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреИрдорд░рд╛ рдкреЛрдЬрд┐рд╢рдирд┐рдВрдЧ рдФрд░ рдЖрд░реЗрдЦ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рдВрдЧ рдпреЛрдЬрдирд╛рдУрдВ</a> </li></ol><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрдкрд╛рджрдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рди</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><br></a> <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬрдирдХ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЙрд▓реНрд╡рд░</a> </li></ol><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрдкрдпреЛрдЧреА</a> <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">AssertHelper</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SceneObjectsHelper</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CoroutineStarter</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">gizmo</a> </li></ol><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░реАрдХреНрд╖рдг</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдХрд╛рд╕ рд╕рд╛рд░рд╛рдВрд╢</a> <br><br><a name="Idea"></a><h2>  рд╡рд┐рдЪрд╛рд░ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдХрдо рд╕рдордп рдореЗрдВ рдПрдХ рд╕рд░рд▓ рдореЛрдмрд╛рдЗрд▓ рдЧреЗрдо рдмрдирд╛рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдерд╛ред <br><br>  рдирд┐рдпрдо рдФрд░ рд╢рд░реНрддреЗрдВ: <br><br><ul><li>  рдЦреЗрд▓ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╕рд╛рди рд╣реИ </li><li>  рдиреНрдпреВрдирддрдо рдХрд▓рд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ </li><li>  рд▓рдШреБ рд╡рд┐рдХрд╛рд╕ рд╕рдордп (рдХрдИ рдорд╣реАрдиреЗ) </li><li>  рд╕рд╛рдордЧреНрд░реА рдирд┐рд░реНрдорд╛рдг (рд╕реНрддрд░реЛрдВ, рд╕реНрдерд╛рдиреЛрдВ, рдЦреЗрд▓ рддрддреНрд╡реЛрдВ) рдХреЗ рдЖрд╕рд╛рди рд╕реНрд╡рдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде </li><li>  рдЕрдЧрд░ рдЦреЗрд▓ рдореЗрдВ рд╕реНрддрд░реЛрдВ рдХреА рдПрдХ рд╕реАрдорд┐рдд рд╕рдВрдЦреНрдпрд╛ рд╣реИ рддреЛ рдЬрд▓реНрджреА рд╕реЗ рдПрдХ рд╕реНрддрд░ рдмрдирд╛рдПрдВ </li></ul><br>  рдлреИрд╕рд▓рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдХрд░рддреЗ рд╣реИрдВ?  рдЖрдЦрд┐рд░рдХрд╛рд░, рдПрдХ рдЧреЗрдо рдмрдирд╛рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдЖрдпрд╛, рди рдХрд┐ рдПрдХ рдЧреЗрдо рдмрдирд╛рдиреЗ рдХрд╛ред  рдРрдк рд╕реНрдЯреЛрд░ рд╕реЗ рдкреНрд░реЗрд░рдгрд╛ рд▓реЗрдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ред <br><br>  рдЙрдкрд░реЛрдХреНрдд рдорджреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><ul><li>  рдЦреЗрд▓ рдХреЛ рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд▓реЛрдХрдкреНрд░рд┐рдпрддрд╛ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП (рдбрд╛рдЙрдирд▓реЛрдб + рд░реЗрдЯрд┐рдВрдЧ рдХреА рд╕рдВрдЦреНрдпрд╛) </li><li>  рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рд╕рдорд╛рди рдЧреЗрдо рдХреЗ рд╕рд╛рде рднреАрдбрд╝ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП </li></ul><br>  рддрд╛рд░реНрдХрд┐рдХ рдЧреЗрдЯреНрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЧреЗрдордкреНрд▓реЗ рдХреЗ рд╕рд╛рде рдПрдХ рдЧреЗрдо рдкрд╛рдпрд╛ рдЧрдпрд╛ред  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рдорд╛рди рдирд╣реАрдВ рдереЗред рдЦреЗрд▓ рдореЗрдВ рдХрдИ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд░реЗрдЯрд┐рдВрдЧ рд╣реИрдВред  рдлрд┐рд░ рднреА, рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдХреБрдЫ рдХрдорд┐рдпрд╛рдВ рдереАрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдХреЗ рдЦреЗрд▓ рдореЗрдВ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЧреЗрдо рдХрд╛ рдЧреЗрдордкреНрд▓реЗ рдпрд╣ рд╣реИ рдХрд┐ рд╕реНрддрд░ рдПрдХ рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд░реНрдХрд┐рдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрддреЗ рд╣реИрдВред  рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдЗрдирдкреБрдЯ рдХрд╛ рдПрдХ рд╕рдВрдпреЛрдЬрди рдЪреБрдирдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рдЖрдЙрдЯрдкреБрдЯ рддрд╛рд░реНрдХрд┐рдХ рд╣реЛред рдпрд╣ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИред  рдЦреЗрд▓ рдиреЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реНрддрд░ рдЙрддреНрдкрдиреНрди рдХрд┐рдП рд╣реИрдВ, рдЬреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╕реНрддрд░реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдмрд╣реБрдд рд╕рд░рд▓ рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИред  рдЦреЗрд▓ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЕрдЪреНрдЫрд╛ рд╣реИ, рдЬреЛ рдореБрдЭреЗ рдмрд╣реБрдд рдкрд╕рдВрдж рд╣реИред <br><br>  рдкреЗрд╢реЗрд╡рд░реЛрдВ: <br><br><ul><li>  рдЧреЗрдордкреНрд▓реЗ рдХреА рддрдХрдиреАрдХреА рд╕рд░рд▓рддрд╛ </li><li>  рдСрдЯреЛрдЯреЗрд╕реНрдЯ рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдЖрд╕рд╛рди рд▓рдЧрддрд╛ рд╣реИ </li><li>  рдСрдЯреЛ-рдЬрдирд░реЗрдЯ рд╕реНрддрд░реЛрдВ рдХреА рдХреНрд╖рдорддрд╛ </li></ul><br>  рд╡рд┐рдкрдХреНрд╖: <br><br><ul><li>  рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реНрддрд░ рдмрдирд╛рдиреЗ рд╣реЛрдВрдЧреЗ </li></ul><br>  рдЕрдм рдЙрд╕ рдЦреЗрд▓ рдХреА рдЦрд╛рдорд┐рдпреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ, рдЬрд┐рд╕рдиреЗ рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ред <br><br><ul><li>  рдХрд╕реНрдЯрдо рдкрд╣рд▓реВ рдЕрдиреБрдкрд╛рдд рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рдирд╣реАрдВ, 18: 9 рдХреА рддрд░рд╣ </li><li>  рдПрдХ рдХрдард┐рди рд╕реНрддрд░ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдпрд╛ рдПрдХ рд╕рдВрдХреЗрдд рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ </li><li>  рд╕рдореАрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рдХреБрдЫ рд╕реНрддрд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╢рд┐рдХрд╛рдпрддреЗрдВ рдереАрдВ </li><li>  рд╕рдореАрдХреНрд╖рд╛ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рддрддреНрд╡реЛрдВ рдХреА рдХрдореА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╢рд┐рдХрд╛рдпрдд рдХреА рдЧрдИ рдереА </li></ul><br>  рд╣рдо рдЕрдкрдиреЗ рдЦреЗрд▓ рдХреА рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ: <br><br><ul><li>  рд╣рдо рдорд╛рдирдХ рддрд░реНрдХ рдЧреЗрдЯреНрд╕ (рдФрд░, рдирдВрдж, рдпрд╛, NOR, XOR, XNOR, NOR, NOT) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </li><li>  рдлрд╛рдЯрдХреЛрдВ рдХреЛ рдПрдХ рдкрд╛рда рдкрджрдирд╛рдо рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдЪрд┐рддреНрд░ рдХреЗ рд╕рд╛рде рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рднреЗрдж рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдЪреВрдВрдХрд┐ рддрддреНрд╡реЛрдВ рдореЗрдВ рдорд╛рдирдХ рдПрдПрдирдПрд╕рдЖрдИ рд╕рдВрдХреЗрддрди рд╣реИ, рд╣рдо рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </li><li>  рд╣рдо рдЙрд╕ рд╕реНрд╡рд┐рдЪ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдПрдХ рдЗрдирдкреБрдЯ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЖрдк рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбрд┐рдЬрд┐рдЯрд▓ рддрддреНрд╡реЛрдВ рдореЗрдВ рдереЛрдбрд╝рд╛ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реИред  рд╣рд╛рдБ, рдФрд░ рдПрдХ рдЪрд┐рдк рдореЗрдВ рдЯреЙрдЧрд▓ рд╕реНрд╡рд┐рдЪ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░рдирд╛ рдХрдард┐рди рд╣реИред </li><li>  рдПрдирдХреЛрдбрд░ рдФрд░ рдбрд┐рдХреЛрдбрд░ рдХреЗ рддрддреНрд╡реЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВред </li><li>  рд╣рдо рдПрдХ рдореЛрдб рдкреЗрд╢ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рд╕рд░реНрдХрд┐рдЯ рдХреЗ рдЗрдирдкреБрдЯ рдкрд░ рдирд┐рд╢реНрдЪрд┐рдд рдорд╛рди рдХреЗ рд╕рд╛рде рд╕реЗрд▓ рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рддрддреНрд╡ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </li><li>  рд╣рдо рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдорджрдж рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ: рд╕рдВрдХреЗрдд + рд▓рдВрдШрди рд╕реНрддрд░ред </li><li>  рдХреБрдЫ рдкреНрд▓реЙрдЯ рдЬреЛрдбрд╝рдирд╛ рдЕрдЪреНрдЫрд╛ рд░рд╣реЗрдЧрд╛ред </li></ul><br><a name="Gameplay"></a><h2>  рдЧреЗрдордкреНрд▓реЗ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдореЛрдб 1: рдЦрд┐рд▓рд╛рдбрд╝реА рдПрдХ рд╕рд░реНрдХрд┐рдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрдирдкреБрдЯ рдкрд░ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br>  рдореЛрдб 2: рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдПрдХ рд╕рд░реНрдХрд┐рдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд╣ рддрддреНрд╡реЛрдВ рдХреЛ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдЗрдирдкреБрдЯ рдореЗрдВ рдорд╛рдиреЛрдВ рдХреЛ рдирд╣реАрдВ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЧреЗрдордкреНрд▓реЗ рдкреВрд░реНрд╡-рддреИрдпрд╛рд░ рд╕реНрддрд░реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╣реЛрдЧрд╛ред  рд╕реНрддрд░ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдХреБрдЫ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдпрд╣ рдкрд╛рд░рдВрдкрд░рд┐рдХ рддреАрди рд╕рд┐рддрд╛рд░реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдХрд┐ рдкрд╛рд░рд┐рдд рд╣реЛрдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рдкреНрд░рджрд░реНрд╢рди рд╕рдВрдХреЗрддрдХ рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: <br>  рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛: рдЦреЗрд▓ рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рддреНрдпреЗрдХ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХрд╛рдЙрдВрдЯрд░ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИред <br>  рдореВрд▓ рд╕реЗ рдкрд░рд┐рдгрд╛рдореА рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдЕрдВрддрд░ рдХреА рд╕рдВрдЦреНрдпрд╛ред  рдпрд╣ рдзреНрдпрд╛рди рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИ рдХрд┐ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдХрд┐рддрдиреЗ рдкреНрд░рдпрд╛рд╕ рдкреВрд░реЗ рдХрд░рдиреЗ рдереЗред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдпрд╣ рджреВрд╕рд░реЗ рд╢рд╛рд╕рди рдХреЗ рд╕рд╛рде рдлрд┐рдЯ рдирд╣реАрдВ рд╣реИред <br>  рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд╕реНрддрд░ рдХреА рдкреАрдврд╝реА рдХреЗ рд╕рд╛рде рдПрдХ рд╣реА рдореЛрдб рдЬреЛрдбрд╝рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ред  рд▓реЗрдХрд┐рди рдЕрднреА рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдмрд╛рдж рдХреЗ рд▓рд┐рдП рдмрдВрдж рдХрд░ рджреЗрдВред <br><br><a name="Plot"></a><h2>  рдХрд╣рд╛рдиреА </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдЧреЗрдордкреНрд▓реЗ рдФрд░ рд╢реБрд░реБрдЖрддреА рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрддреЗ рд╣реБрдП, рдЦреЗрд▓ рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдЪрд╛рд░ рдкреНрд░рдХрдЯ рд╣реБрдПред  рдФрд░ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдкрд░реНрдпрд╛рдкреНрдд рд╡рд┐рдЪрд╛рд░ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ - рдПрдХ рднреВрдЦрдВрдб рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдПред <br><br>  рдпрд╣ рдПрдХ рдЗрдВрдЬреАрдирд┐рдпрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ рдЬреЛ рд╕рд░реНрдХрд┐рдЯ рдбрд┐рдЬрд╛рдЗрди рдХрд░рддрд╛ рд╣реИред  рдмреБрд░рд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдкреВрд░рд╛ рдирд╣реАрдВ рд╣реИред рд╢рд╛рдпрдж рдпрд╣ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреНрдпрд╛ рдХрд░рддрд╛ рд╣реИ рдЙрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЪрд┐рдкреНрд╕ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ?  рдХрд┐рд╕реА рддрд░рд╣ рджрд┐рдирдЪрд░реНрдпрд╛, рдХреЛрдИ рд╕рдордЭрдиреЗ рдпреЛрдЧреНрдп рдФрд░ рд╕рд░рд▓ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рд╣реИред <br><br>  рд╡рд┐рдЪрд╛рд░!  рдПрдХ рдЗрдВрдЬреАрдирд┐рдпрд░ рдЕрдкрдиреЗ рддрд░реНрдХ рд╕рд░реНрдХрд┐рдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╢рд╛рдВрдд рд░реЛрдмреЛрдЯ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддрд╛ рд╣реИред  рд░реЛрдмреЛрдЯ рдПрдХ рдХрд╛рдлреА рд╕рд░рд▓ рд╕рдордЭрдиреЗ рд╡рд╛рд▓реА рдЪреАрдЬ рд╣реИ рдФрд░ рдЧреЗрдордкреНрд▓реЗ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдлрд┐рдЯ рдмреИрдарддрд╛ рд╣реИред <br><br>  рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдпрд╛рдж рд░рдЦреЗрдВ, "рдХрд▓рд╛ рдХреЗ рд▓рд┐рдП рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ"?  рдкреНрд▓реЙрдЯ рдореЗрдВ рдХрдЯрдХрдиреЗрд╕реЗрд╕ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рдлрд┐рд░ рдПрдХ рдкрд░рд┐рдЪрд┐рдд рдХрд▓рд╛рдХрд╛рд░ рдмрдЪрд╛рд╡ рдХреЗ рд▓рд┐рдП рдЖрддрд╛ рд╣реИ, рдЬреЛ рд╣рдорд╛рд░реА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рд╣реБрдЖред <br><br>  рдЕрдм рдЪрд▓реЛ рдЧреЗрдо рдореЗрдВ рдХрдЯрдХрдиреЗрд╕реЗрд╕ рдХреЗ рдкреНрд░рд╛рд░реВрдк рдФрд░ рдПрдХреАрдХрд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд┐рд░реНрдгрдп рд▓реЗрддреЗ рд╣реИрдВред <br><br>  рдкреНрд▓реЙрдЯ рдХреЛ рдмрд┐рдирд╛ рдХрдЯрд┐рдВрдЧ рдпрд╛ рдХрд┐рд╕реА рдЯреЗрдХреНрд╕реНрдЯ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рдХрдЯрд╕реНрдХреИрди рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рджреВрд░ рдХрд░реЗрдЧрд╛, рдЗрд╕рдХреА рд╕рдордЭ рдХреЛ рд╕рд░рд▓ рдХрд░реЗрдЧрд╛, рдФрд░ рдзреНрд╡рдирд┐ рдХреЗ рдмрд┐рдирд╛ рдореЛрдмрд╛рдЗрд▓ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рдмрд╣реБрдд рд╕реЗ рдЦреЗрд▓ред  рдЦреЗрд▓ рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд░реНрдХрд┐рдЯ рдХрд╛ рдПрдХ рдмрд╣реБрдд рд╣реА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рддрддреНрд╡ рд╣реИ, рдЕрд░реНрдерд╛рддреН, рдЗрд╕реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдХрд╛рдлреА рд╕рдВрднрд╡ рд╣реИред <br><br>  Cutscenes рдФрд░ рд╕реНрддрд░реЛрдВ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рджреГрд╢реНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕реНрддрд░ рд╕реЗ рдкрд╣рд▓реЗ, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╢реНрдп рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдареАрдХ рд╣реИ, рдХрд╛рд░реНрдп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реИ, рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрди рд╣реИрдВ, рдХрд╛рдо рдореЗрдВ рдЙрдмрд╛рд▓ рдЖрдирд╛ рд╢реБрд░реВ рд╣реЛ рдЧрдпрд╛ рд╣реИред <br><br><a name="Development"></a><h2>  рдбрд┐рдЬрд╝рд╛рдЗрди </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдореИрдВрдиреЗ рддреБрд░рдВрдд рдордВрдЪ рдкрд░ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдпрд╣ рдПрдХрддрд╛ рд╣реИред  рд╣рд╛рдВ рдереЛрдбрд╝рд╛ рдУрд╡рд░рдХрд┐рд▓, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рдореИрдВ рдЙрд╕реЗ рдЬрд╛рдирддрд╛ рд╣реВрдВред <br><br>  рд╡рд┐рдХрд╛рд╕ рдХреЗ рджреМрд░рд╛рди, рдХреЛрдб рдХреЛ рддреБрд░рдВрдд рдкрд░реАрдХреНрд╖рдг рдпрд╛ рдЙрд╕рдХреЗ рдмрд╛рдж рднреА рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдПрдХ рд╕рдордЧреНрд░ рдХрдерд╛ рдХреЗ рд▓рд┐рдП, рдкрд░реАрдХреНрд╖рдг рдиреАрдЪреЗ рдПрдХ рдЕрд▓рдЧ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред  рд╡рд░реНрддрдорд╛рди рдЦрдВрдб рдкрд░реАрдХреНрд╖рдг рд╕реЗ рдЕрд▓рдЧ рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдЧрд╛ред <br><br><a name="Core"></a><h3>  рдХреЛрд░ </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдЧреЗрдордкреНрд▓реЗ рдХрд╛ рдХреЛрд░ рдмрд╣реБрдд рд╕рд░рд▓ рджрд┐рдЦрддрд╛ рд╣реИ рдФрд░ рдЗрдВрдЬрди рд╕реЗ рдмрдВрдзрд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рд╕реА # рдХреЛрдб рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд┐рдпрд╛ред  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдЕрд▓рдЧ рдХреЛрд░ рдХреЛрд░ рд▓реЙрдЬрд┐рдХ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕реЗ рдПрдХ рдЕрд▓рдЧ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░ рд▓реЗ рдЬрд╛рдПрдВред <br><br>  рдПрдХрддрд╛ рдПрдХ C # рд╕рдорд╛рдзрд╛рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреА рд╣реИ рдФрд░ рдЕрдВрджрд░ рдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рдПрдХ рдирд┐рдпрдорд┐рдд .NET рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝реА рдЕрд╕рд╛рдорд╛рдиреНрдп рд╣реЛрддреА рд╣реИрдВ, .sln рдФрд░ .csproj рдлрд╛рдЗрд▓реЗрдВ рдпреВрдирд┐рдЯреА рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рдпрдВ рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдЕрдВрджрд░ рдкрд░рд┐рд╡рд░реНрддрди рдПрдХрддрд╛ рдкрдХреНрд╖ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рд╡рд╣ рдмрд╕ рдЙрдиреНрд╣реЗрдВ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░ рджреЗрдЧрд╛ рдФрд░ рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдЧрд╛ред  рдПрдХ рдирдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрд╕реЗрдВрдмрд▓реА рдбреЗрдлрд┐рдирд┐рд╢рди</a> рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/b2/84/92/b28492ps5o-_mv62mdvo1frk4l8.png"><br><br><img src="https://habrastorage.org/webt/vd/xk/_k/vdxk_k9ydjfhu1aiee8ctlx3eau.png"><br><br>  рдПрдХрддрд╛ рдЕрдм рдЙрдкрдпреБрдХреНрдд рдирд╛рдо рдХреЗ рд╕рд╛рде рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рддреА рд╣реИред  .Asmdef рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╕рдм рдХреБрдЫ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрдЧрд╛ред <br><br><a name="CoreElectricalElements"></a><h4>  рд╡рд┐рджреНрдпреБрдд рддрддреНрд╡ </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдХрд╛рд░реНрдп рдХреЛрдб рдореЗрдВ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рддрд╛рд░реНрдХрд┐рдХ рддрддреНрд╡реЛрдВ рдХреА рдмрд╛рддрдЪреАрдд рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдирд╛ рд╣реИред <br><br><ul><li>  рдПрдХ рддрддреНрд╡ рдореЗрдВ рдХрдИ рдЗрдирдкреБрдЯ рдФрд░ рдХрдИ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  рддрддреНрд╡ рдХрд╛ рдЗрдирдкреБрдЯ рджреВрд╕рд░реЗ рддрддреНрд╡ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  рддрддреНрд╡ рдореЗрдВ рд╕реНрд╡рдпрдВ рдХрд╛ рддрд░реНрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li></ul><br>  рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><ul><li>  <b>рддрддреНрд╡</b> рдореЗрдВ рдСрдкрд░реЗрд╢рди рдХрд╛ рдЕрдкрдирд╛ рддрд░реНрдХ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдВрдХ рд╣реИрдВред  рдХрд┐рд╕реА рддрддреНрд╡ рд╕реЗ рдореВрд▓реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╕рдордп, рдпрд╣ рдЗрдирдкреБрдЯ рд╕реЗ рдорд╛рди рд▓реЗрддрд╛ рд╣реИ, рдЙрди рдкрд░ рддрд░реНрдХ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдкрд░рд┐рдгрд╛рдо рджреЗрддрд╛ рд╣реИред  рдХрдИ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдореВрд▓реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ 0 рд╣реИред </li><li>  рдЗрдирдкреБрдЯ рдкрд░ рдорд╛рди рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ <b>рдЗрдирдкреБрдЯ рдХрдиреЗрдХреНрдЯрд░</b> рдкреА рд╣реЛрдЧрд╛, рдпрд╣ рдПрдХ рд▓рд┐рдВрдХ рдХреЛ рджреВрд╕рд░реЗ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИ - рдЖрдЙрдЯрдкреБрдЯ рдХрдиреЗрдХреНрдЯрд░ред </li><li>  <b>рдЖрдЙрдЯрдкреБрдЯ рдХрдиреЗрдХреНрдЯрд░</b> рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрддреНрд╡ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЬрдм рдПрдХ рдореВрд▓реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рддрддреНрд╡ рд╕реЗ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред </li></ul><br><img src="https://habrastorage.org/webt/am/7q/yo/am7qyonro-bohnomthogk8qy8o0.png"><br><br>  рддреАрд░ рдбреЗрдЯрд╛ рдХреА рджрд┐рд╢рд╛, рд╡рд┐рдкрд░реАрдд рджрд┐рд╢рд╛ рдореЗрдВ рддрддреНрд╡реЛрдВ рдХреА рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред <br>  рдХрдиреЗрдХреНрдЯрд░ рдХреЗ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВред  рдЖрдк рдЗрд╕рд╕реЗ рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConnector</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br>  рдмрд╕ рдЗрд╕реЗ рджреВрд╕рд░реЗ рдХрдиреЗрдХреНрдЯрд░ рд╕реЗ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдП? <br><br>  рдЕрдзрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IInputConnector</span></span> : <span class="hljs-title"><span class="hljs-title">IConnector</span></span> { IOutputConnector ConnectedOtherConnector { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  IInputConnector рдПрдХ рдЗрдирдкреБрдЯ рдХрдиреЗрдХреНрдЯрд░ рд╣реИ, рдЗрд╕рдореЗрдВ рджреВрд╕рд░реЗ рдХрдиреЗрдХреНрдЯрд░ рдХрд╛ рд▓рд┐рдВрдХ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IOutputConnector</span></span> : <span class="hljs-title"><span class="hljs-title">IConnector</span></span> { IElectricalElement Element { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br>  рдЖрдЙрдЯрдкреБрдЯ рдХрдиреЗрдХреНрдЯрд░ рдЗрд╕рдХреЗ рддрддреНрд╡ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдПрдХ рдореВрд▓реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдЧрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IElectricalElement</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br>  рд╡рд┐рджреНрдпреБрдд рддрддреНрд╡ рдореЗрдВ рдПрдХ рд╡рд┐рдзрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдЬреЛ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдорд╛рди рд▓реМрдЯрд╛рддреА рд╣реИ, рд╕рдВрдЦреНрдпрд╛ рдЖрдЙрдЯрдкреБрдЯ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реЛрддреА рд╣реИред <br><br>  <i>рдореИрдВрдиреЗ рдЗрд╕реЗ IElectricalElement рдХрд╣рд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ рддрд╛рд░реНрдХрд┐рдХ рд╡реЛрд▓реНрдЯреЗрдЬ рд╕реНрддрд░реЛрдВ рдХреЛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рджреВрд╕рд░реА рдУрд░ рдпрд╣ рдПрдХ рдРрд╕рд╛ рддрддреНрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рддрд░реНрдХ рдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдирд╣реАрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдмрд╕ рдПрдХ рдХрдВрдбрдХреНрдЯрд░ рдХреА рддрд░рд╣ рдПрдХ рдорд╛рди рджреЗрддрд╛ рд╣реИред</i> <br><br>  рдЕрдм рд╣рдо рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">InputConnector</span></span> : <span class="hljs-title"><span class="hljs-title">IInputConnector</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IOutputConnector ConnectedOtherConnector { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ConnectedOtherConnector?.Value ?? <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } }</code> </pre> <br>  рдЖрдиреЗ рд╡рд╛рд▓рд╛ рдХрдиреЗрдХреНрдЯрд░ рдЬреБрдбрд╝рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдпрд╣ рдЧрд▓рдд рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">OutputConnector</span></span> : <span class="hljs-title"><span class="hljs-title">IOutputConnector</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> number; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OutputConnector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.number = number; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IElectricalElement Element { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Value =&gt; Element.GetValue(number); } }</code> </pre> <br>  рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рддрддреНрд╡ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рдЗрд╕рдХреЗ рддрддреНрд╡ рдФрд░ рдЗрд╕рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рд▓рд┐рдВрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╡рд╣ рддрддреНрд╡ рд╕реЗ рдПрдХ рдореВрд▓реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ElectricalElementBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IInputConnector[] Input { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  рд╕рднреА рддрддреНрд╡реЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдзрд╛рд░ рд╡рд░реНрдЧ, рдмрд╕ рдЗрдирдкреБрдЯ рдХреА рдПрдХ рд╕рд░рдгреА рд╣реИред <br><br>  рдПрдХ рддрддреНрд╡ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">And</span></span> : <span class="hljs-title"><span class="hljs-title">ElectricalElementBase</span></span>, <span class="hljs-title"><span class="hljs-title">IElectricalElement</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> outputValue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input?.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { outputValue = Input[<span class="hljs-number"><span class="hljs-number">0</span></span>].Value; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Input) { outputValue &amp;= item.Value; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> outputValue; } }</code> </pre> <br>  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдПрдХ рдХрдард┐рди рд╕рддреНрдп рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдмрд┐рдирд╛ рддрд╛рд░реНрдХрд┐рдХ рд╕рдВрдЪрд╛рд▓рди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рд╢рд╛рдпрдж рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд▓рдЪреАрд▓рд╛ рд╣реЛрдЧрд╛, рдпрд╣ рдХрд┐рд╕реА рднреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЗрдирдкреБрдЯ рдкрд░ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред <br>  рд╕рднреА рд▓реЙрдЬрд┐рдХ рдЧреЗрдЯреНрд╕ рдореЗрдВ рдПрдХ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдореВрд▓реНрдп рдЗрдирдкреБрдЯ рдирдВрдмрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред <br><br>  рдЙрд▓реНрдЯреЗ рддрддреНрд╡реЛрдВ рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Nand</span></span> : <span class="hljs-title"><span class="hljs-title">And</span></span>, <span class="hljs-title"><span class="hljs-title">IElectricalElement</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !<span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.GetValue(number); } }</code> </pre> <br>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдпрд╣рд╛рдБ GetValue рд╡рд┐рдзрд┐ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рд╡рд╕реНрддреБрддрдГ рдУрд╡рд░рд░рд╛рдЗрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдЗрд╕ рддрд░реНрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрджрд┐ рдирдВрдж рдПрдВрдб рдХреЛ рдмрдЪрд╛рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдПрдВрдб рдХреА рддрд░рд╣ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдЧрд╛ред  рд░рдЪрдирд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рднреА рд╕рдВрднрд╡ рдерд╛, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдЬреЛ рдмрд╣реБрдд рдорд╛рдпрдиреЗ рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИред <br><br>  рдкрд╛рд░рдВрдкрд░рд┐рдХ рд╡рд╛рд▓реНрд╡реЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрддреНрд╡ рдмрдирд╛рдП рдЧрдП рдереЗ: <br>  рд╕реНрд░реЛрдд - 0 рдпрд╛ 1 рдХрд╛ рдирд┐рд░рдВрддрд░ рдорд╛рди рд╕реНрд░реЛрддред <br>  рдХрдВрдбрдХреНрдЯрд░ - рдмрд╕ рдПрдХ рд╣реА рдпрд╛ рдХрдВрдбрдХреНрдЯрд░, рдХреЗрд╡рд▓ рдПрдХ рдЕрд▓рдЧ рдЖрд╡реЗрджрди рд╣реИ, рдкреАрдврд╝реА рджреЗрдЦреЗрдВред <br>  рдСрд▓рд╡реЗрдЬрдлреНрд▓реЗрд╕реЗ - рд╣рдореЗрд╢рд╛ 0 рд░рд┐рдЯрд░реНрди, рджреВрд╕рд░реА рдореЛрдб рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХред <br><br><a name="Solver"></a><h4>  рд╕реЙрд▓реНрд╡рд░ </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдЕрдЧрд▓рд╛, рдПрдХ рд╡рд░реНрдЧ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рдВрдпреЛрдЬрди рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬреЛ рд╕рд░реНрдХрд┐рдЯ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ 1 рджреЗрддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ISolver</span></span> { ICollection&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[]&gt; GetSolutions(IElectricalElement root, <span class="hljs-keyword"><span class="hljs-keyword">params</span></span> Source[] sources); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Solver</span></span> : <span class="hljs-title"><span class="hljs-title">ISolver</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICollection&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[]&gt; GetSolutions(IElectricalElement root, <span class="hljs-keyword"><span class="hljs-keyword">params</span></span> Source[] sources) { <span class="hljs-comment"><span class="hljs-comment">// max value can be got with this count of bits(sources count), also it's count of combinations -1 // for example 8 bits provide 256 combinations, and max value is 255 int maxValue = Pow(sources.Length); // inputs that can solve circuit var rightInputs = new List&lt;bool[]&gt;(); for (int i = 0; i &lt; maxValue; i++) { var inputs = GetBoolArrayFromInt(i, sources.Length); for (int j = 0; j &lt; sources.Length; j++) { sources[j].Value = inputs[j]; } if (root.GetValue()) { rightInputs.Add(inputs); } } return rightInputs; } private static int Pow(int power) { int x = 2; for (int i = 1; i &lt; power; i++) { x *= 2; } return x; } private static bool[] GetBoolArrayFromInt(int value, int length) { var bitArray = new BitArray(new[] {value}); var boolArray = new bool[length]; for (int i = length - 1; i &gt;= 0; iтАФ) { boolArray[i] = bitArray[i]; } return boolArray; }</span></span></code> </pre> <br>  рд╕рдорд╛рдзрд╛рди рдХреНрд░реВрд░ рдмрд▓ рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП, рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ рдЬрд┐рд╕реЗ рдмрд┐рдЯреНрд╕ рдХреЗ рд╕реЗрдЯ рджреНрд╡рд╛рд░рд╛ рд╕реНрд░реЛрддреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдмрд░рд╛рдмрд░ рд░рд╛рд╢рд┐ рдореЗрдВ рд╡реНрдпрдХреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, 4 рд╕реНрд░реЛрдд = 4 рдмрд┐рдЯреНрд╕ = рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ 15. рд╣рдо 0 рд╕реЗ 15 рддрдХ рд╕рднреА рдирдВрдмрд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЙрд░реНрдЯ рдХрд░рддреЗ рд╣реИрдВред <br><br><a name="ElementsProvider"></a><h4>  ElementsProvider </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдкреАрдврд╝реА рдХреА рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ IEPProvider рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде ElementsProvider рд╡рд░реНрдЧ рдмрдирд╛рдпрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IElementsProvider</span></span> { IList&lt;Func&lt;IElectricalElement&gt;&gt; Gates { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IList&lt;Func&lt;IElectricalElement&gt;&gt; Conductors { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IList&lt;ElectricalElementType&gt; GateTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IList&lt;ElectricalElementType&gt; ConductorTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ElementsProvider</span></span> : <span class="hljs-title"><span class="hljs-title">IElementsProvider</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;Func&lt;IElectricalElement&gt;&gt; Gates { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Func&lt;IElectricalElement&gt;&gt; { () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> And(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Nand(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Or(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Nor(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Xor(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Xnor() }; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;Func&lt;IElectricalElement&gt;&gt; Conductors { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Func&lt;IElectricalElement&gt;&gt; { () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Conductor(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Not() }; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;ElectricalElementType&gt; GateTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ElectricalElementType&gt; { ElectricalElementType.And, ElectricalElementType.Nand, ElectricalElementType.Or, ElectricalElementType.Nor, ElectricalElementType.Xor, ElectricalElementType.Xnor }; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;ElectricalElementType&gt; ConductorTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ElectricalElementType&gt; { ElectricalElementType.Conductor, ElectricalElementType.Not }; }</code> </pre> <br>  рдкрд╣рд▓реА рджреЛ рд╕реВрдЪрд┐рдпрд╛рдБ рдХрд╛рд░рдЦрд╛рдиреЛрдВ рдХреА рддрд░рд╣ рд╣реИрдВ рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдПрдХ рдЖрдЗрдЯрдо рджреЗрддреА рд╣реИрдВред  рдЕрдВрддрд┐рдо рджреЛ рд╕реВрдЪрд┐рдпрд╛рдБ рдПрдХ рдмреИрд╕рд╛рдЦреА рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХрддрд╛ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдХрд╛рд░рдг рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЖрдЧреЗред <br><br><a name="CircuitGenerator"></a><h4>  CircuitGenerator </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдЕрдм рд╡рд┐рдХрд╛рд╕ рдХрд╛ рд╕рдмрд╕реЗ рдХрдард┐рди рд╣рд┐рд╕реНрд╕рд╛ рд╕рд░реНрдХрд┐рдЯ рдкреАрдврд╝реА рд╣реИред <br><br>  рдХрд╛рд░реНрдп рдЙрди рдпреЛрдЬрдирд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рддреИрдпрд╛рд░ рдХрд░рдирд╛ рд╣реИ рдЬрд┐рдирд╕реЗ рдЖрдк рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдЕрдкрдиреА рдкрд╕рдВрдж рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХреЗрд╡рд▓ рд╕рд╛рдзрд╛рд░рдг рд╡рд╛рд▓реНрд╡ рдХреЗ рд▓рд┐рдП рдкреАрдврд╝реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  рдпреЛрдЬрдирд╛ рдХреЗ рдХреБрдЫ рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдпреЗ рд╣реИрдВ: рдкрд░рддреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ (рддрддреНрд╡реЛрдВ рдХреА рдХреНрд╖реИрддрд┐рдЬ рд░реЗрдЦрд╛рдПрдВ) рдФрд░ рдкрд░рдд рдореЗрдВ рддрддреНрд╡реЛрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ред  рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рднреА рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдХрд┐рд╕ рдЧреЗрдЯ рд╕реЗ рдЖрдкрдХреЛ рд╕рд░реНрдХрд┐рдЯ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдореЗрд░рд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛рд░реНрдп рдХреЛ рджреЛ рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ рдерд╛ - рд╕рдВрд░рдЪрдирд╛ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЪрдпрдиред <br><br>  рд╕рдВрд░рдЪрдирд╛ рдЬрдирд░реЗрдЯрд░ рддрд░реНрдХ рддрддреНрд╡реЛрдВ рдХреЗ рдкрджреЛрдВ рдФрд░ рдХрдиреЗрдХреНрд╢рди рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br>  рд╡реИрд░рд┐рдПрдВрдЯ рдЬрдирд░реЗрдЯрд░ рдкрджреЛрдВ рдореЗрдВ рддрддреНрд╡реЛрдВ рдХреЗ рдорд╛рдиреНрдп рд╕рдВрдпреЛрдЬрдиреЛрдВ рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реИред <br><br><h4>  StructureGenerator </h4><br>  рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рддрд░реНрдХ рддрддреНрд╡реЛрдВ рдХреА рдкрд░рддреЗрдВ рдФрд░ рдХрдВрдбрдХреНрдЯрд░ / рдЗрдирд╡рд░реНрдЯрд░ рдХреА рдкрд░рддреЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдкреВрд░реА рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рддрддреНрд╡ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдирдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░ рд╣реИрдВред <br><br>  рдХрдВрдЯреЗрдирд░ IElectricalElement рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рдПрдХ рд╡рд░реНрдЧ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рд╡реИрдз рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рд╕реНрд╡рд┐рдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕реВрдЪреА рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЖрдЗрдЯрдо рдХрд╛ рдЕрдкрдирд╛ рдирдВрдмрд░ рд╣реИред <br><br><pre> <code class="cs hljs">ElectricalElementContainer : ElectricalElementBase, IElectricalElement</code> </pre> <br><br>  рдПрдХ рдХрдВрдЯреЗрдирд░ рд╕реВрдЪреА рд╕реЗ рддрддреНрд╡реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ "рдЦреБрдж" рд╕реЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЖрд░рдВрднреАрдХрд░рдг рдХреЗ рджреМрд░рд╛рди, рдЖрдкрдХреЛ рдЗрд╕реЗ рдЙрди рдкреНрд░рддрд┐рдирд┐рдзрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рджреЗрдиреА рд╣реЛрдЧреА рдЬреЛ рдЖрдЗрдЯрдо рдмрдирд╛рдПрдВрдЧреЗред  рдЕрдВрджрд░, рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдХреЛ рдмреБрд▓рд╛рддрд╛ рд╣реИ рдФрд░ рдЖрдЗрдЯрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд░ рдЖрдк рдЗрд╕ рддрддреНрд╡ рдХреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХрд╛рд░ рдХреЛ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдЖрдВрддрд░рд┐рдХ рддрддреНрд╡ рдХреЛ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЙрд╕реА рдЗрдирдкреБрдЯ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИ рдФрд░ рдХрдВрдЯреЗрдирд░ рд╕реЗ рдЖрдЙрдЯрдкреБрдЯ рдЗрд╕ рддрддреНрд╡ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/wq/kt/bn/wqktbn6x7esbfnqxkuwh606qvqa.png"><br><br>  рддрддреНрд╡реЛрдВ рдХреА рд╕реВрдЪреА рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рд╡рд┐рдзрд┐: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetElements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IList&lt;Func&lt;IElectricalElement&gt;&gt; elements</span></span></span><span class="hljs-function">)</span></span> { Elements = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;IElectricalElement&gt;(elements.Count); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> elements) { Elements.Add(item()); } }</code> </pre> <br>  рдЕрдЧрд▓рд╛, рдЖрдк рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдЯрд╛рдЗрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isInitialized == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(UnitializedElementsExceptionMessage); } SelectedType = number; RealElement = Elements[number]; ((ElectricalElementBase) RealElement).Input = Input; }</code> </pre> <br>  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЖрдЗрдЯрдо рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред <br><br>  рд╕рд░реНрдХрд┐рдЯ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдИ рдЧрдИ рдереА: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CircuitStructure</span></span> : <span class="hljs-title"><span class="hljs-title">ICloneable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, ElectricalElementContainer[]&gt; Gates; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, ElectricalElementContainer[]&gt; Conductors; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Source[] Sources; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> And FinalDevice; }</code> </pre> <br>  рдпрд╣рд╛рдВ рдХреЗ рд╢рдмреНрдж рдХреБрдВрдЬреА рдореЗрдВ рдкрд░рдд рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЗрд╕ рдкрд░рдд рдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдмрд╛рдж рд╕реНрд░реЛрддреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рд╣реИ рдФрд░ рдПрдХ рдлрд╝рд╛рдЗрдирд▓рдбреЗрд╡рд┐рд╕ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рдм рдХреБрдЫ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдЬрдирд░реЗрдЯрд░ рдХрдВрдЯреЗрдирд░ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдпрд╣ рд╕рднреА рдкрд░рддреЛрдВ рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдиреАрдЪреЗ рд╕реЗ рдКрдкрд░ рддрдХред  рдиреАрдЪреЗ рд╕рдмрд╕реЗ рдЪреМрдбрд╝рд╛ (рдЕрдзрд┐рдХрд╛рдВрд╢ рддрддреНрд╡) рд╣реИред  рдКрдкрд░ рдХреА рдкрд░рдд рдореЗрдВ рджреЛ рдЧреБрдирд╛ рдХрдо рддрддреНрд╡ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реА рддрд░рд╣ рдЬрдм рддрдХ рд╣рдо рдиреНрдпреВрдирддрдо рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪ рдЬрд╛рддреЗред  рд╢реАрд░реНрд╖ рдкрд░рдд рдХреЗ рд╕рднреА рддрддреНрд╡реЛрдВ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдЕрдВрддрд┐рдо рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред <br><br>  рддрд░реНрдХ рддрддреНрд╡ рдкрд░рдд рдореЗрдВ рдЧреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░ рд╣реЛрддреЗ рд╣реИрдВред  рдХрдВрдбрдХреНрдЯрд░реЛрдВ рдХреА рдкрд░рдд рдореЗрдВ рдПрдХ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд╕рд╛рде рддрддреНрд╡ рд╣реЛрддреЗ рд╣реИрдВред  рддрддреНрд╡ рдпрд╛ рддреЛ рдПрдХ рдХрдВрдбрдХреНрдЯрд░ рдпрд╛ рдХреЛрдИ рддрддреНрд╡ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдХрдВрдбрдХреНрдЯрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рдкрд╛рд╕ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рдЖрдпрд╛ рдерд╛, рдФрд░ рдХреЛрдИ рддрддреНрд╡ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдЙрд▓реНрдЯреЗ рдореВрд▓реНрдп рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕реНрд░реЛрддреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдкрд╣рд▓реЗред  рдкреАрдврд╝реА рдиреАрдЪреЗ рд╕реЗ рд╣реЛрддреА рд╣реИ, рдХрдВрдбрдХреНрдЯрд░реЛрдВ рдХреА рдкрд░рдд рдкрд╣рд▓реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ, рдлрд┐рд░ рддрд░реНрдХ рдХреА рдкрд░рдд, рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдХрдВрдбрдХреНрдЯрд░ред <br><br><img src="https://habrastorage.org/webt/pq/bj/hs/pqbjhsbn3xxxi6r6wosryczrdjc.png"><br><br>  рд▓реЗрдХрд┐рди рдЗрд╕ рддрд░рд╣ рдХреА рдпреЛрдЬрдирд╛рдПрдБ рдмрд╣реБрдд рдЙрдмрд╛рдК рд╣реИрдВ!  рд╣рдо рдЕрдкрдиреЗ рдЬреАрд╡рди рдХреЛ рдФрд░ рднреА рд╕рд░рд▓ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗ рдФрд░ рдЙрддреНрдкрдиреНрди рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЕрдзрд┐рдХ рд░реЛрдЪрдХ (рдЬрдЯрд┐рд▓) рдмрдирд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред рдпрд╣ рдХрдИ рдкрд░рддреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╢рд╛рдЦрд╛ рдпрд╛ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд╕рд╛рде рд╕рдВрд░рдЪрдирд╛ рд╕рдВрд╢реЛрдзрдиреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ред <br><br>  рдареАрдХ рд╣реИ, "рд╕рд░рд▓реАрдХреГрдд" рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП - рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЛ рдХрд┐рд╕реА рдФрд░ рдЪреАрдЬрд╝ рдореЗрдВ рдЙрд▓рдЭрд╛ рджреЗрдирд╛ред <br>  рдЕрдзрд┐рдХрддрдо рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓рддрд╛ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрдиреНрди рд╕рд░реНрдХрд┐рдЯ рдПрдХ рд╢реНрд░рдорд╕рд╛рдзреНрдп рдФрд░ рдХрд╛рдлреА рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдп рдирд╣реАрдВ рдирд┐рдХрд▓рд╛ред  рдЗрд╕рд▓рд┐рдП, рд╣рдорд╛рд░реА рдЯреАрдо рдиреЗ рдЗрди рдорд╛рдирджрдВрдбреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛: <br>  рдЗрд╕ рдХрд╛рд░реНрдп рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдЕрдзрд┐рдХ рд╕рдордп рдирд╣реАрдВ рд▓рдЧрд╛ред <br>  рд╕рдВрд╢реЛрдзрд┐рдд рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдХрдо рдпрд╛ рдЬреНрдпрд╛рджрд╛ рдкрд░реНрдпрд╛рдкреНрдд рдкреАрдврд╝реАред <br>  рдХрдВрдбрдХреНрдЯрд░реЛрдВ рдХреЗ рдмреАрдЪ рдХреЛрдИ рдЪреМрд░рд╛рд╣рд╛ рдирд╣реАрдВ рдерд╛ред <br>  рдПрдХ рд▓рдВрдмреА рдФрд░ рдХрдард┐рди рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╕рдорд╛рдзрд╛рди рд╢рд╛рдо 4 рдмрдЬреЗ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ред <br>  рдХреЛрдб рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ рдФрд░ the a╠╢╠╢╠╢╠╢╠╢╠╢╠╢╠╢ред <br><br>  <i>рдпрд╣рд╛рдБ рдкрд░ OverflowArray рдХреНрд▓рд╛рд╕ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</i>  <i>рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рдХрд╛рд░рдгреЛрдВ рд╕реЗ, рдЗрд╕реЗ рдореВрд▓ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдкреАрдврд╝реА рдХреЗ рдмрд╛рдж рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛ рдФрд░ рдЗрд╕рдХрд╛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рдкреАрдврд╝реА рдХреЗ рд╕рд╛рде рд╕рдВрдмрдВрдз рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдиреАрдЪреЗ рд╕реНрдерд┐рдд рд╣реИред</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдВрдХ</a> ред</i> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerable&lt;CircuitStructure&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateStructure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxElementsInLine, StructureModification modification</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseStructure = GenerateStructure(lines, maxElementsInLine); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; lines; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxValue = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> branchingSign = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (modification == StructureModification.All) { maxValue = <span class="hljs-number"><span class="hljs-number">2</span></span>; branchingSign = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lengthOverflowArray = baseStructure.Gates[(i * <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>].Length; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elementArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OverflowArray(lengthOverflowArray, maxValue); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> numberOfOption = Math.Pow(<span class="hljs-number"><span class="hljs-number">2</span></span>, lengthOverflowArray); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> k = <span class="hljs-number"><span class="hljs-number">1</span></span>; k &lt; numberOfOption - <span class="hljs-number"><span class="hljs-number">1</span></span>; k++) { elementArray.Increase(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (modification == StructureModification.Branching || modification == StructureModification.All) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CheckOverflowArrayForAllConnection(elementArray, branchingSign, lengthOverflowArray)) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">// Clone CircuitStructure var structure = (CircuitStructure) baseStructure.Clone(); ConfigureInputs(lines, structure.Conductors, structure.Gates); var sources = AddSourcesLayer(structure.Conductors, maxElementsInLine); var finalElement = AddFinalElement(structure.Conductors); structure.Sources = sources; structure.FinalDevice = finalElement; int key = (i * 2) + 1; ModifyStructure(structure, elementArray, key, modification); ClearStructure(structure); yield return structure; } } }</span></span></code> </pre> <br>  рдЗрд╕ рдХреЛрдб рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рд╕рдордЭрдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рдЗрд╕рдореЗрдВ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИред <br>  рдЪрд┐рдВрддрд╛ рдордд рдХрд░реЛ!  рдмрд┐рдирд╛ рд╡рд┐рд╡рд░рдг рдХреЗ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг рдЖрдкрдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдкрд╣рд▓реА рдЪреАрдЬ рдЬреЛ рд╣рдо рдХрд░рддреЗ рд╣реИрдВ рд╡рд╣ рдПрдХ рд╕рд╛рдзрд╛рд░рдг (рдЖрдзрд╛рд░) рд╕рдВрд░рдЪрдирд╛ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseStructure = GenerateStructure(lines, maxElementsInLine);</code> </pre> <br>  рдлрд┐рд░, рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЬрд╛рдБрдЪ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдордиреЗ рд╢рд╛рдЦрд╛ рдЪрд┐рдиреНрд╣ (рдмреНрд░рд╛рдВрдЪрд┐рдВрдЧрд╕рд╛рдЗрди) рдХреЛ рдЙрдЪрд┐рдд рдореВрд▓реНрдп рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рд╣реИред рдпрд╣ рдХреНрдпреЛрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ?  рдЖрдЧреЗ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛрдЧрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxValue = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> branchingSign = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (modification == StructureModification.All) { maxValue = <span class="hljs-number"><span class="hljs-number">2</span></span>; branchingSign = <span class="hljs-number"><span class="hljs-number">2</span></span>; }</code> </pre> <br>  рдЕрдм рд╣рдо рдЕрдкрдиреЗ OverflowArray рдХреА рд▓рдВрдмрд╛рдИ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lengthOverflowArray = baseStructure.Gates[(i * <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>].Length; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elementArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OverflowArray(lengthOverflowArray, maxValue);</code> </pre> <br>  рд╣рдореЗрдВ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рдЬреЛрдбрд╝рддреЛрдбрд╝ рдХреЛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЕрдкрдиреЗ рдУрд╡рд░рдлреНрд▓реЛрдЕрд░реЗ рдХреА рд╕рдВрднрд╛рд╡рд┐рдд рд╡рд┐рд╡рд┐рдзрддрд╛рдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╕реВрддреНрд░ рд╣реИ рдЬрд┐рд╕реЗ рдЕрдЧрд▓реА рдкрдВрдХреНрддрд┐ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lengthOverflowArray = baseStructure.Gates[(i * <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>].Length;</code> </pre> <br>  рдЕрдЧрд▓рд╛ рдПрдХ рдиреЗрд╕реНрдЯреЗрдб рд▓реВрдк рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рднреА "рдЬрд╛рджреВ" рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдпрд╣ рд╕рдм рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛ рд╣реИред рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ, рд╣рдо рдЕрдкрдиреЗ рд╕рд░рдгреА рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs">elementArray.Increase();</code> </pre><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдПрдХ рд╕рддреНрдпрд╛рдкрди рдЬрд╛рдВрдЪ рджреЗрдЦрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд╣рдо рдЖрдЧреЗ рдпрд╛ рдЕрдЧрд▓реЗ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (modification == StructureModification.Branching || modification == StructureModification.All) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CheckOverflowArrayForAllConnection(elementArray, branchingSign, lengthOverflowArray)) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } }</code> </pre><br>  рдпрджрд┐ рд╕рд░рдгреА рд╕рддреНрдпрд╛рдкрди рдЬрд╛рдВрдЪ рдкрд╛рд╕ рдХрд░ рдЧрдИ рд╣реИ, рддреЛ рд╣рдо рдЕрдкрдиреЗ рдЖрдзрд╛рд░ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдХреНрд▓реЛрди рдХрд░рддреЗ рд╣реИрдВред  рдХреНрд▓реЛрдирд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЕрдкрдиреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдХрдИ рдФрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВрдЧреЗред <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Clone CircuitStructure var structure = (CircuitStructure) baseStructure.Clone(); ConfigureInputs(lines, structure.Conductors, structure.Gates); var sources = AddSourcesLayer(structure.Conductors, maxElementsInLine); var finalElement = AddFinalElement(structure.Conductors); structure.Sources = sources; structure.FinalDevice = finalElement;</span></span></code> </pre> <br>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рд╣рдо рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рддрддреНрд╡реЛрдВ рд╕реЗ рд╕рд╛рдл рдХрд░рддреЗ рд╣реИрдВред  рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд╕рдВрд╢реЛрдзрди рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд╡реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╣реЛ рдЧрдПред <br><br><pre> <code class="cs hljs">ModifyStructure(structure, elementArray, key, modification); ClearStructure(structure);</code> </pre> <br>  рдореБрдЭреЗ рдЙрди рджрд░реНрдЬрдиреЛрдВ рдЫреЛрдЯреЗ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрд╛рдд рдирд╣реАрдВ рджрд┐рдЦрддреА рд╣реИ рдЬреЛ "рдХрд╣реАрдВ рди рдХрд╣реАрдВ" рдЧрд╣рд░рд╛рдИ рдореЗрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред <br><br><h4>  VariantsGenerator </h4><br>  рд╕рдВрд░рдЪрдирд╛ + рддрддреНрд╡ рдЬреЛ рдЗрд╕рдореЗрдВ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП, рдЙрдиреНрд╣реЗрдВ рд╕рд░реНрдХрд┐рдЯ рд╡реЗрд░рд┐рдПрдВрдЯ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> CircuitVariant { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CircuitStructure Structure; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]&gt; Gates; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]&gt; Conductors; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[]&gt; Solutions; }</code> </pre> <br>  рдкрд╣рд▓рд╛ рдХреНрд╖реЗрддреНрд░ рд╕рдВрд░рдЪрдирд╛ рдХреА рдПрдХ рдХрдбрд╝реА рд╣реИред  рджреВрд╕рд░рд╛ рджреЛ рд╢рдмреНрджрдХреЛрд╢ рдЬрд┐рд╕рдореЗрдВ рдХреБрдВрдЬреА рдкрд░рдд рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ, рдФрд░ рдорд╛рди рдПрдХ рд╕рд░рдгреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдЙрдирдХреЗ рд╕реНрдерд╛рдиреЛрдВ рдореЗрдВ рддрддреНрд╡реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред <br><br>  рд╣рдо рд╕рдВрдпреЛрдЬрдиреЛрдВ рдХреЗ рдЪрдпрди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡реИрдз рддрд░реНрдХ рддрддреНрд╡ рдФрд░ рдХрдВрдбрдХреНрдЯрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдХреБрд▓ рдореЗрдВ, 6 рддрд░реНрдХ рддрддреНрд╡ рдФрд░ 2 рдХрдВрдбрдХреНрдЯрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред <br>  рдЖрдк 6 рдХреЗ рдЖрдзрд╛рд░ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рдгрд╛рд▓реА рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╢реНрд░реЗрдгреА рдореЗрдВ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рддрддреНрд╡реЛрдВ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЗрд╕ рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдмрдврд╝рд╛рдХрд░, рдЖрдк рддрддреНрд╡реЛрдВ рдХреЗ рд╕рднреА рд╕рдВрдпреЛрдЬрдиреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕрд░реНрдерд╛рддреН, рддреАрди рдЕрдВрдХреЛрдВ рдХреА рдПрдХ рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ рд╕рдВрдЦреНрдпрд╛ 3 рддрддреНрд╡ рд╣реЛрдЧреАред  рдпрд╣ рдХреЗрд╡рд▓ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рддрддреНрд╡реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ 6 рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди 4 рдкреНрд░реЗрд╖рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред <br><br>  рдЗрд╕ рддрд░рд╣ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдирд┐рд░реНрд╡рд╣рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рд╕рдВрд░рдЪрдирд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА <br><a name="ClampedInt"></a><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> ClampedInt { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = Mathf.Clamp(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, MaxValue); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MaxValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampedInt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxValue</span></span></span><span class="hljs-function">)</span></span> { MaxValue = maxValue; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryIncrease</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Value + <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;= MaxValue) { Value++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// overflow return true; } }</span></span></code> </pre> <br><a name="OverflowArray"></a><br>  рдЕрдЧрд▓рд╛ рдПрдХ рд╡рд░реНрдЧ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЕрдЬреАрдм рдирд╛рдо <b>OverflowArray рд╣реИ</b> ред  рдЗрд╕рдХрд╛ рд╕рд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд▓реИрдореНрдкрдбрд╛рдЗрдВрдЯ</a></b> рд╕рд░рдгреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдЪреНрдЪ рдХреНрд░рдо рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╣реЛрддреА рд╣реИ рдЕрдЧрд░ рд╕рднреА рдХреЛрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рдЕрдзрд┐рдХрддрдо рдореВрд▓реНрдп рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рддрдХ <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдо</a></b> рдХреНрд░рдо рдореЗрдВ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рд╣реЛрддрд╛ рд╣реИред <br><br>  рдкреНрд░рддреНрдпреЗрдХ ClampedInt рдХреЗ рдЕрдиреБрд╕рд╛рд░, рд╕рдВрдмрдВрдзрд┐рдд ElectricalElementContainer рдХреЗ рдорд╛рди рд╕реЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╕рднреА рд╕рдВрднрд╡ рд╕рдВрдпреЛрдЬрдиреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЫрд╛рдВрдЯрдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдк рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдпреЛрдЬрдирд╛ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдФрд░ (0) рдФрд░ Xor (4)), рддреЛ рдЖрдкрдХреЛ 1,2,3 рддрддреНрд╡реЛрдВ рд╕рд╣рд┐рдд рд╕рднреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреНрд░рдордмрджреНрдз рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП, рдкреАрдврд╝реА рдХреЗ рджреМрд░рд╛рди, рддрддреНрд╡реЛрдВ рдХреЛ рдЙрдирдХреЗ рд╕реНрдерд╛рдиреАрдп рдирдВрдмрд░ рдорд┐рд▓рддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдФрд░ = 0, Xor = 1), рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдЙрдиреНрд╣реЗрдВ рд╡рд╛рдкрд╕ рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рддреЛ рдЖрдк рд╕рднреА рддрддреНрд╡реЛрдВ рдореЗрдВ рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрдпреЛрдЬрдиреЛрдВ рдкрд░ рдкреБрдирд░рд╛рд╡реГрддрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдорд╛рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рд╕рд░реНрдХрд┐рдЯ рдХреЛ <b>рд╕реЙрд▓реНрд╡рд░</b> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕рдХреЗ рд╕рдорд╛рдзрд╛рди рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рд╕рд░реНрдХрд┐рдЯ рдирд┐рд░реНрдгрдп рдкрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╕рд░реНрдХрд┐рдЯ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╕рдорд╛рдзрд╛рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рдЬрд╛рдВрдЪ рдХреА рдЬрд╛рддреА рд╣реИред  рдпрд╣ рд╕реАрдорд╛ рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ 0 рдпрд╛ 1 рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд┐рд░реНрдгрдп рдирд╣реАрдВ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред <br><br><div class="spoiler">  <b class="spoiler_title">рдвреЗрд░ рд╕рд╛рд░рд╛ рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IVariantsGenerator</span></span> { <span class="hljs-function"><span class="hljs-function">IEnumerable&lt;CircuitVariant&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;CircuitStructure&gt; structures, ICollection&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; availableGates, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> useNot, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxSolutions = </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">.MaxValue</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">VariantsGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IVariantsGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ISolver solver; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IElementsProvider elementsProvider; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VariantsGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISolver solver, IElementsProvider elementsProvider</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.solver = solver; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.elementsProvider = elementsProvider; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerable&lt;CircuitVariant&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;CircuitStructure&gt; structures, ICollection&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; availableGates, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> useNot, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxSolutions = </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">.MaxValue</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> manyGates = availableGates.Count &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> availableLeToGeneralNumber = GetDictionaryFromAllowedElements(elementsProvider.Gates, availableGates); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gatesList = GetElementsList(availableLeToGeneralNumber, elementsProvider.Gates); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> availableConductorToGeneralNumber = useNot ? GetDictionaryFromAllowedElements(elementsProvider.Conductors, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>}) : GetDictionaryFromAllowedElements(elementsProvider.Conductors, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {<span class="hljs-number"><span class="hljs-number">0</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conductorsList = GetElementsList(availableConductorToGeneralNumber, elementsProvider.Conductors); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> structure <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> structures) { InitializeCircuitStructure(structure, gatesList, conductorsList); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gates = GetListFromLayersDictionary(structure.Gates); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conductors = GetListFromLayersDictionary(structure.Conductors); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gatesArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OverflowArray(gates.Count, availableGates.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conductorsArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OverflowArray(conductors.Count, useNot ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useNot &amp;&amp; conductorsArray.EqualInts) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } SetContainerValuesAccordingToArray(conductors, conductorsArray); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (manyGates &amp;&amp; gatesArray.Length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; gatesArray.EqualInts) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } SetContainerValuesAccordingToArray(gates, gatesArray); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> solutions = solver.GetSolutions(structure.FinalDevice, structure.Sources); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (solutions.Any() &amp;&amp; solutions.Count &lt;= maxSolutions &amp;&amp; !(solutions.Any(s =&gt; s.All(b =&gt; b)) || solutions.Any(s =&gt; s.All(b =&gt; !b)))) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variant = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CircuitVariant { Conductors = GetElementsNumberFromLayers(structure.Conductors, availableConductorToGeneralNumber), Gates = GetElementsNumberFromLayers(structure.Gates, availableLeToGeneralNumber), Solutions = solutions, Structure = structure }; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> variant; } } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!gatesArray.Increase()); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (useNot &amp;&amp; !conductorsArray.Increase()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeCircuitStructure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">CircuitStructure structure, IList&lt;Func&lt;IElectricalElement&gt;&gt; gates, IList&lt;Func&lt;IElectricalElement&gt;&gt; conductors</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lElements = GetListFromLayersDictionary(structure.Gates); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> lElements) { item.SetElements(gates); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cElements = GetListFromLayersDictionary(structure.Conductors); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cElements) { item.SetElements(conductors); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IList&lt;Func&lt;IElectricalElement&gt;&gt; GetElementsList(IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; availableToGeneralGate, IReadOnlyList&lt;Func&lt;IElectricalElement&gt;&gt; elements) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Func&lt;IElectricalElement&gt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> availableToGeneralGate) { list.Add(elements[item.Value]); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IDictionary&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">, </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDictionaryFromAllowedElements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IReadOnlyCollection&lt;Func&lt;IElectricalElement&gt;&gt; allElements, IEnumerable&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; availableElements</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enabledDic = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(allElements.Count); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; allElements.Count; i++) { enabledDic.Add(i, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> availableElements) { enabledDic[item] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> availableToGeneralNumber = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enabledDic) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.Value) { availableToGeneralNumber.Add(index, item.Key); index++; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> availableToGeneralNumber; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetContainerValuesAccordingToArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IReadOnlyList&lt;ElectricalElementContainer&gt; containers, IOverflowArray overflowArray</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; containers.Count; i++) { containers[i].SetType(overflowArray[i].Value); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IReadOnlyList&lt;ElectricalElementContainer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetListFromLayersDictionary</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IDictionary&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, ElectricalElementContainer[]&gt; layers</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ElectricalElementContainer&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> layers) { elements.AddRange(layer.Value); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> elements; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]&gt; GetElementsNumberFromLayers(IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, ElectricalElementContainer[]&gt; layers, IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; elementIdToGlobal = <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dic = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]&gt;(layers.Count); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> convert = elementIdToGlobal != <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> layers) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[layer.Value.Length]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; layer.Value.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!convert) { values[i] = layer.Value[i].SelectedType; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { values[i] = elementIdToGlobal[layer.Value[i].SelectedType]; } } dic.Add(layer.Key, values); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dic; } }</code> </pre> <br></div></div><br>  рдкреИрджрд╛рд╡рд╛рд░ рд╡рд┐рд╡рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЬрдирд░реЗрдЯрд░ рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рд▓реМрдЯрд╛рддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, StructureGenerator рдФрд░ VariantsGenerator рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд░реНрдХрд┐рдЯ рдЬреЗрдирд░реЗрдЯрд░ IEnumerable рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред (рдЙрдкрдЬ рдХреЗ рд╕рд╛рде рджреГрд╖реНрдЯрд┐рдХреЛрдг рдиреЗ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдмрд╣реБрдд рдорджрдж рдХреА, рдиреАрдЪреЗ рджреЗрдЦреЗрдВ) <br><br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рдж рдХрд┐ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЬрдирд░реЗрдЯрд░ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд╡рд┐рдХрд▓реНрдк рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рд╕рдорд╛рдирд╛рдВрддрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди AsParallel рдХреЛ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рд╣реБрдЖ (рд╢рд╛рдпрдж рдЙрдкрдЬ рд╣рд╕реНрддрдХреНрд╖реЗрдк)ред  рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдПрдХ рд▓рдВрдмрд╛ рд╕рдордп рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВред  <i>рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореИрдВрдиреЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреАрдврд╝реА рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдпрд╣ рдХрд╛рдо рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдХреБрдЫ рдХрдард┐рдирд╛рдЗрдпрд╛рдВ рдереАрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдирд╣реАрдВ рдЧрдИ рдереАред</i> <br><br><a name="GameClasses"></a><h3>  рдЦреЗрд▓ рдХреА рдХрдХреНрд╖рд╛рдПрдВ </h3><br><a name="Approach"></a><h4>  рд╡рд┐рдХрд╛рд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдФрд░ рдбрд┐ </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдордЧреНрд░реА</a> <br><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ <b>рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЗрдВрдЬреЗрдХреНрд╢рди</b> (DI) рдХреЗ рддрд╣рдд рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рд╡рд░реНрдЧреЛрдВ рдХреЛ рдХреЗрд╡рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдЕрдиреБрд░реВрдк рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд╕реНрддреБ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рдФрд░ рдЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдмрдирд╛рдиреЗ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдХреНрдпрд╛ рд▓рд╛рдн рд╣реИрдВ: <br><br><ul><li>  рдирд┐рд░реНрднрд░рддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдФрд░ рдЖрд░рдВрднреАрдХрд░рдг рдХреЗ рд╕реНрдерд╛рди рдХреЛ рдПрдХ рд╕реНрдерд╛рди рдкрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдирд┐рд░реНрднрд░ рд╡рд░реНрдЧреЛрдВ рдХреЗ рддрд░реНрдХ рд╕реЗ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рджреЛрд╣рд░рд╛рд╡ рдХреЛ рд╣рдЯрд╛рддрд╛ рд╣реИред </li><li>  рд╕рдВрдкреВрд░реНрдг рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдкреЗрдбрд╝ рдХреЛ рдЦреЛрджрдиреЗ рдФрд░ рд╕рднреА рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рддрддреНрдХрд╛рд▓ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред </li><li>  рдЖрдкрдХреЛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдИ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li></ul><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ DI рдХрдВрдЯреЗрдирд░ рдХреЗ рд░реВрдк рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://github.com/modesttree/Zenject">Zenject рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  Zenject рдХреЗ рдХрдИ рд╕рдВрджрд░реНрдн рд╣реИрдВ, рдореИрдВ рдЙрдирдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рджреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ: <br><br><ul><li>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рд╕рдВрджрд░реНрдн - рдкреВрд░реЗ рдЖрд╡реЗрджрди рдХреЗ рднреАрддрд░ рдирд┐рд░реНрднрд░рддрд╛ рдХрд╛ рдкрдВрдЬреАрдХрд░рдгред </li><li>  рджреГрд╢реНрдп рд╕рдВрджрд░реНрдн: рдЙрди рдХрдХреНрд╖рд╛рдУрдВ рдХрд╛ рдкрдВрдЬреАрдХрд░рдг рдЬреЛ рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢реЗрд╖ рджреГрд╢реНрдп рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ рдФрд░ рдЙрдирдХрд╛ рдЬреАрд╡рдирдХрд╛рд▓ рджреГрд╢реНрдп рдХреЗ рдЬреАрд╡рди рдХрд╛рд▓ рддрдХ рд╕реАрдорд┐рдд рд╣реИред </li><li>  рдПрдХ рд╕реНрдерд┐рд░ рд╕рдВрджрд░реНрдн рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╕рдм рдХреБрдЫ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдВрджрд░реНрдн рд╣реИ, рдЦрд╝рд╛рд╕рд┐рдпрдд рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдореМрдЬреВрдж рд╣реИред  рдореИрдВ рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ </li></ul><br>  рдХрдХреНрд╖рд╛ рдХрд╛ рдкрдВрдЬреАрдХрд░рдг <b>рдЗрдВрд╕реНрдЯреЙрд▓рд░</b> s рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рд╣реИред  рдореИрдВ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП <b>ScriptableObjectInstaller</b> рдФрд░ рджреГрд╢реНрдп рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП <b>MonoInstaller рдХрд╛</b> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред <br><br>     AsSingle,     ,      . AsTransient               . <br><br>       MonoBehaviour ,     .    Unity         Core . <br><br><img src="https://habrastorage.org/webt/eg/s1/se/egs1seui5csmxylqk9we7qhedwc.png"><br><br>  MonoBehaviour      . ,    ,        MonoBehaviour. <br><br>   DI        ,  MonoBehaviour   . ,    Start  Update ,     ,   MonoBehaviour   -      Start  Update.   тАЬтАЭ   ,     DI     . <br><br><a name="Config"></a><h4>  рд╡рд┐рдиреНрдпрд╛рд╕ </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>           .     ,     , ,    ..      ScriptableObject': <br><br><ol><li>        ScriptableObject </li><li>       </li><li>        </li><li>      </li><li>      DI  </li><li>  рд▓рд╛рдн </li></ol><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ITags</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FixedColor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> BackgroundColor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ForegroundColor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> AccentedColor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } } [CreateAssetMenu(fileName = <span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Tags), menuName = <span class="hljs-string"><span class="hljs-string">"Configuration/"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Tags))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Tags</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span>, <span class="hljs-title"><span class="hljs-title">ITags</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fixedColor; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> backgroundColor; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> foregroundColor; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> accentedColor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FixedColor =&gt; fixedColor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> BackgroundColor =&gt; backgroundColor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ForegroundColor =&gt; foregroundColor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> AccentedColor =&gt; accentedColor; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { fixedColor.AssertNotEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(fixedColor)); backgroundColor.AssertNotEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(backgroundColor)); foregroundColor.AssertNotEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(foregroundColor)); accentedColor.AssertNotEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(accentedColor)); } }</code> </pre> <br>     ( ): <br><br><pre> <code class="cs hljs">CreateAssetMenu(fileName = <span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(ConfigurationInstaller), menuName = <span class="hljs-string"><span class="hljs-string">"Installers/"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(ConfigurationInstaller))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConfigurationInstaller</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObjectInstaller</span></span>&lt;<span class="hljs-title"><span class="hljs-title">ConfigurationInstaller</span></span>&gt; { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EditorElementsPrefabs editorElementsPrefabs; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LevelCompletionSteps levelCompletionSteps; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CommonValues commonValues; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AdsConfiguration adsConfiguration; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CutscenesConfiguration cutscenesConfiguration; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Colors colors; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Tags tags; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InstallBindings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Container.Bind&lt;IEditorElementsPrefabs&gt;().FromInstance(editorElementsPrefabs).AsSingle(); Container.Bind&lt;ILevelCompletionSteps&gt;().FromInstance(levelCompletionSteps).AsSingle(); Container.Bind&lt;ICommonValues&gt;().FromInstance(commonValues).AsSingle(); Container.Bind&lt;IAdsConfiguration&gt;().FromInstance(adsConfiguration).AsSingle(); Container.Bind&lt;ICutscenesConfiguration&gt;().FromInstance(cutscenesConfiguration).AsSingle(); Container.Bind&lt;IColors&gt;().FromInstance(colors).AsSingle(); Container.Bind&lt;ITags&gt;().FromInstance(tags).AsSingle(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { editorElementsPrefabs.AssertNotNull(); levelCompletionSteps.AssertNotNull(); commonValues.AssertNotNull(); adsConfiguration.AssertNotNull(); cutscenesConfiguration.AssertNotNull(); colors.AssertNOTNull(); tags.AssertNotNull(); } }</code> </pre> <br><a name="GameElectricalElements"></a><h4>   </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>   -    <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IElectricalElementMb</span></span> { GameObject GameObject { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } IElectricalElement Element { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } IOutputConnectorMb[] OutputConnectorsMb { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IInputConnectorMb[] InputConnectorsMb { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } Transform Transform { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetInputConnectorsMb</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">InputConnectorMb[] inputConnectorsMb</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetOutputConnectorsMb</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OutputConnectorMb[] outputConnectorsMb</span></span></span><span class="hljs-function">)</span></span>; } [DisallowMultipleComponent] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ElectricalElementMb</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span>, <span class="hljs-title"><span class="hljs-title">IElectricalElementMb</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OutputConnectorMb[] outputConnectorsMb; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> InputConnectorMb[] inputConnectorsMb; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform Transform =&gt; transform; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject GameObject =&gt; gameObject; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; name; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; name = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> IElectricalElement Element { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IOutputConnectorMb[] OutputConnectorsMb =&gt; outputConnectorsMb; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IInputConnectorMb[] InputConnectorsMb =&gt; inputConnectorsMb; }</code> </pre> <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Provide additional data to be able to configure it after manual install. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public interface IElectricalElementMbEditor : IElectricalElementMb { ElectricalElementType Type { get; } } public class ElectricalElementMbEditor : ElectricalElementMb, IElectricalElementMbEditor { [SerializeField] private ElectricalElementType type; public ElectricalElementType Type =&gt; type; }</span></span></code> </pre> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IInputConnectorMb</span></span> : <span class="hljs-title"><span class="hljs-title">IConnectorMb</span></span> { IOutputConnectorMb OutputConnectorMb { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } IInputConnector InputConnector { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">InputConnectorMb</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span>, <span class="hljs-title"><span class="hljs-title">IInputConnectorMb</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OutputConnectorMb outputConnectorMb; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform Transform =&gt; transform; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IOutputConnectorMb OutputConnectorMb { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; outputConnectorMb; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; outputConnectorMb = (OutputConnectorMb) <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IInputConnector InputConnector { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputConnector(); <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR private void OnDrawGizmos() { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (outputConnectorMb != null) { Handles.DrawLine(transform.position, outputConnectorMb.Transform.position); } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre> <br>     public IElectricalElement Element { get; set;  } <br><br>      ? <br>      generic: <br> public class ElectricalElementMb: MonoBehaviour, IElectricalElementMb where T: IElectricalElement <br>     ,  Unity   generic  MonoBehaviour-.  , Unity      . <br><br>   ,       IElectricalElement Element { get; set;  } <br>  . <br><br>   enum ElectricalElementType      . Enum   Unity         .    :             .  ,  IElectricalElementMb  IElectricalElementMbEditor,      ElectricalElementType. <br><br>        .    ,               enum .  : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Dictionary&lt;ElectricalElementType, Func&lt;IElectricalElement&gt;&gt; ElementByType = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;ElectricalElementType, Func&lt;IElectricalElement&gt;&gt; { {ElectricalElementType.And, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> And()}, {ElectricalElementType.Or, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Or()}, {ElectricalElementType.Xor, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Xor()}, {ElectricalElementType.Nand, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Nand()}, {ElectricalElementType.Nor, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Nor()}, {ElectricalElementType.NOT, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NOT()}, {ElectricalElementType.Xnor, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Xnor()}, {ElectricalElementType.Source, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Source()}, {ElectricalElementType.Conductor, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Conductor()}, {ElectricalElementType.Placeholder, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AlwaysFalse()}, {ElectricalElementType.Encoder, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Encoder()}, {ElectricalElementType.Decoder, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Decoder()} };</code> </pre> <br><a name="GameManagement"></a><h4> Game Management </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>   ,     (  ,      )?..          ,   . <br><br>      -,      . <br><br> <b>DataManager</b>          .   AsSingle   .  ,      .         ,  DataManager. <br>   <b>IFileStoreService</b> ,         <b>IFileSerializer</b>         . <br><br> <b>LevelGameManager</b>        . <br> <i>     GodObject,       UI,      ,   .   ,        .        .</i> <br><br>    .    <b>LevelGameManager1</b>  <b>LevelGameManager2</b>   1  2 . <br><br>                     . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рддрд░реНрдХ рдПрдХ рддрддреНрд╡ рдкрд░рд┐рд╡рд░реНрддрди рдШрдЯрдирд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рд░реНрдХрд┐рдЯ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдореВрд▓реНрдпреЛрдВ рдХреА рднреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рд╡рд░реНрддрдорд╛рди рд╕реНрддрд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рд╕реНрддрд░ рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЦрд┐рд▓рд╛рдбрд╝реА рд╕рд╣рд╛рдпрддрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрддрдорд╛рди рд╕реНрддрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CurrentLevelData</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИ </font><font style="vertical-align: inherit;">ред рдПрдХ рд╕реНрддрд░ рд╕рдВрдЦреНрдпрд╛ рд╡рд╣рд╛рдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рддреА рд╣реИ - рдорджрдж рдХреЗ рд▓рд┐рдП рдЪреЗрдХ рдХреЗ рд╕рд╛рде рдПрдХ рдмреВрд▓рд┐рдпрди рд╕рдВрдкрддреНрддрд┐, рдЦрд┐рд▓рд╛рдбрд╝реА рдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЦреЗрд▓ рдФрд░ рдбреЗрдЯрд╛ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЭрдВрдбрд╛ред</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICurrentLevelData</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LevelNumber { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HelpExist { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ProposeRate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICurrentLevelDataMode1</span></span> : <span class="hljs-title"><span class="hljs-title">ICurrentLevelData</span></span> { IEnumerable&lt;SourcePositionValueHelp&gt; PartialHelp { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICurrentLevelDataMode2</span></span> : <span class="hljs-title"><span class="hljs-title">ICurrentLevelData</span></span> { IEnumerable&lt;PlaceTypeHelp&gt; PartialHelp { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рдореЛрдб рдХреЗ рд▓рд┐рдП рдорджрдж рд╕реНрд░реЛрдд рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЙрди рдкрд░ рдорд╛рди рд╣реИред рджреВрд╕рд░реЗ рдореЛрдб рдореЗрдВ, рдпрд╣ рдЙрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рддрддреНрд╡ рд╣реИ рдЬрд┐рд╕реЗ рд╕реЗрд▓ рдореЗрдВ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдЧреНрд░рд╣ рдореЗрдВ рд╕рдВрд░рдЪрдирд╛рдПрдВ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдФрд░ рдореВрд▓реНрдп рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕реНрдерд╛рди рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдПрдХ рд╢рдмреНрджрдХреЛрд╢ рдкреНрд░рдЪрд▓рд┐рдд рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдПрдХрддрд╛ рд╢рдмреНрджрдХреЛрд╢реЛрдВ рдХреЛ рдХреНрд░рдордмрджреНрдз рдирд╣реАрдВ рдХрд░ рд╕рдХрддреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рднрд┐рдиреНрди рдореЛрдб рдХреЗ рджреГрд╢реНрдпреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рджреГрд╢реНрдп рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рдПрдХ рдЕрдиреНрдп </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LevelGameManager</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдПрдХ рдЕрдиреНрдп </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICurrentLevelData рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br><br>  ,       -.   ,    .   тАФ    ,    .   ,      ,      .           .      ,    . <br><br><a name="LevelsLoading"></a><h4>   </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>      Unity-,      ,  тАЬLevel23тАЭ.    .     ,    .    <b>LevelsManager</b>     . <br><br><a name="Cutscenes"></a><h4>  </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>     unity     ,  . <br>      Timeline.     ,     Timeline   ,   тАЬ    тАФ  ,  тАЭ. <br><br><img src="https://habrastorage.org/webt/h8/ny/rf/h8nyrfwesvjp8v6kmy70tcfiduc.png"><br><br>  ,            . ,     ,   :            . <br><br><img src="https://habrastorage.org/webt/s1/jq/jc/s1jqjces_osngyiexu03i3inrlk.png"><br><br><a name="AdditionalGameplay"></a><h4>   </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>          .     .       2 ,   тАФ  1 .        .     :   ( 3 )  (1 ). <br><br>           ,    ,         .      .         : <br><br><img src="https://habrastorage.org/webt/fl/uc/4q/fluc4q2iu7946a11fywzat8afck.png"><br><br>       .     ,       Unity,       . <br><br>          тАФ     ,      .     ,     . <br><br>     ,     .         1 . <br><br>           ,           ,    . <br><br><a name="Monetization"></a><h4>  рдореБрджреНрд░реАрдХрд░рдг </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>      :       .               . <br><br>            .             . <br><br>       <b>AdsService</b> ,   <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IAdsService</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AdsDisabled { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadBetweenLevelAd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowBetweenLevelAd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> level, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> force = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadHelpAd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action onLoaded = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowHelpAd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action onRewarded, Action onClosed</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HelpAdLoaded { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br>  HelpAd тАФ      .        .   ,     . <br><br>          ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Google Mobile Ads Unity Plugin</a> . <br><br>        тАФ         ,    .              Unity.        ,           . <br><br>     <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IPurchaseService</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsAdsDisablePurchased { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action DisableAdsPurchased; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuyDisableAds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveDisableAd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Unity IAP</a> <br><br>      . Google Play             .   ,     .         <b>Complete</b>  <b>Pending</b>       <b>hasReceipt</b> .   true    . <br><br>     .      . <br><br>  RemoveDisableAd    ,     . <br><br><a name="UI"></a><h4>   </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>        - .         ,   ,    Unity.           . <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UiElementBase</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span>, <span class="hljs-title"><span class="hljs-title">IUiElement</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action ShowClick; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action HideCLick; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Show</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); ShowClick?.Invoke(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Hide</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); HideCLick?.Invoke(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PauseMenu</span></span> : <span class="hljs-title"><span class="hljs-title">UiElementEscapeClose</span></span>, <span class="hljs-title"><span class="hljs-title">IPauseMenu</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Text levelNumberText; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LocalizedText finishedText; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameObject restartButton; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> levelNumber; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action GoToMainMenuClick; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action RestartClick; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LevelNumber { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; levelNumberText.text = <span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{finishedText.Value}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DisableRestartButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { restartButton.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GoToMainMenu</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GoToMainMenuClick?.Invoke(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Restart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RestartClick?.Invoke(); } }</code> </pre> <br>        .         View,     ,    ,       . <br><br><a name="Analytics"></a><h4>  рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  Unity</a> .   ,       тАФ    .       тАФ 100/  . <br>    - <b>AnalyticsService</b> .       ,           Unity.           ,          -   . <br>     <b>CustomEvent</b> .           . AnalyticsService  e       . <br><br>        .       ScriptableObject,        . <br><br>  : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LevelComplete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> stars, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> actionCount, TimeSpan timeSpent, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> levelMode</span></span></span><span class="hljs-function">)</span></span> { CustomEvent(LevelCompleteEventName, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt; { {LevelNumber, number}, {LevelStars, stars}, {LevelActionCount, actionCount}, {LevelTimeSpent, timeSpent}, {LevelMode, levelMode} }); }</code> </pre> <br><a name="CameraAlign"></a><h4>     </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>    FinalDevice  ,        Sources          .       ,       ,       . <br><br>     <b>CameraAlign</b> .   : <br><br><ol><li>       </li><li>          </li><li>    </li><li>     </li><li>  FinalDevice     </li><li>       </li></ol><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CameraAlign</span></span> : <span class="hljs-title"><span class="hljs-title">ICameraAlign</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ISceneObjectsHelper sceneObjectsHelper; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ICommonValues commonValues; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CameraAlign</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISceneObjectsHelper sceneObjectsHelper, ICommonValues commonValues</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sceneObjectsHelper = sceneObjectsHelper; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.commonValues = commonValues; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Align</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Camera camera</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = sceneObjectsHelper.FindObjectsOfType&lt;IElectricalElementMb&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> finalDevice = sceneObjectsHelper.FindObjectOfType&lt;IFinalDevice&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sources = elements.OfType&lt;ISourceMb&gt;().ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (finalDevice != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; sources.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> leftPos = elements.Min(s =&gt; s.Transform.position.x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rightPos = elements.Max(s =&gt; s.Transform.position.x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> width = Mathf.Abs(leftPos - rightPos); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fPos = finalDevice.Transform.position; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> height = Mathf.Abs(sources.First().Transform.position.y - fPos.y) * camera.aspect; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> size = Mathf.Max(width * commonValues.CameraOffset, height * commonValues.CameraOffset); camera.orthographicSize = Mathf.Clamp(size, commonValues.MinCameraSize, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.MaxValue); camera.transform.position = GetCenterPoint(elements, <span class="hljs-number"><span class="hljs-number">-1</span></span>); fPos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(fPos.x, camera.ScreenToWorldPoint(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(Screen.width, Screen.height)).y - commonValues.FinalDeviceTopOffset * camera.orthographicSize); finalDevice.Transform.position = fPos; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sourceY = camera.ScreenToWorldPoint(Vector2.zero).y + commonValues.SourcesBottomOffset; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sources) { item.Transform.position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(item.Transform.position.x, sourceY); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.Log(<span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">nameof</span></span></span></span><span class="hljs-string"><span class="hljs-subst">(CameraAlign)}</span></span></span><span class="hljs-string">: No final device or no sources in scene"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCenterPoint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ICollection&lt;IElectricalElementMb&gt; elements, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> top = elements.Max(e =&gt; e.Transform.position.y); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> bottom = elements.Min(e =&gt; e.Transform.position.y); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> left = elements.Min(e =&gt; e.Transform.position.x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> right = elements.Max(e =&gt; e.Transform.position.x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = left + ((right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = bottom + ((top - bottom) / <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(x, y, z); } }</code> </pre> <br>        -. <br><br><a name="Colors"></a><h4>   </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>              ,   . <br><br>     <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IColors</span></span> { Color ColorAccent { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } Color Background { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } Color Foreground { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action ColorsChanged; }</code> </pre> <br>       Unity     .         . <br><br>    Background  Foreground,      . <br><br>       ,        .        ,     . <br><br>    : <b>CameraColorAdjustment</b> тАФ       , <b>UiColorAdjustment</b> тАФ      <b>TextMeshColorAdjustment</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рд╕реНрд░реЛрддреЛрдВ рдкрд░ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХрд╛ рд░рдВрдЧ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">UiColorAdjustment рдЯреИрдЧ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рдВрдкрд╛рджрдХ рдореЗрдВ, рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЛ рдПрдХ рдЯреИрдЧ рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдпрд╣ рд╕рдВрдХреЗрдд рджреЗрдЧрд╛ рдХрд┐ рдпрд╣ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд░рдВрдЧ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдкреГрд╖реНрдарднреВрдорд┐, рдЕрдЧреНрд░рднреВрдорд┐, AccentColor рдФрд░ FixedColor)ред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рднреА рджреГрд╢реНрдп рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдпрд╛ рдПрдХ рд░рдВрдЧ рдпреЛрдЬрдирд╛ рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдШрдЯрдирд╛ рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИред</font></font><br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><img src="https://habrastorage.org/webt/jk/6o/zz/jk6ozzdaz6h8ixxrykmnocrtgze.png"><br><br><img src="https://habrastorage.org/webt/kl/4d/u6/kl4du6hxim70hyncofiakaiqsi4.png"><br><br><a name="Editor"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдВрдкрд╛рджрдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рди </font></font></h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>           ,      .    Unity   - EditorWindow.      UiElements,      ,     . <br><br>    ,  -    UnityEditor      ,     ,        .   : <br><br><ul><li>       </li><li>     Assets/Editor </li><li>     #if UNITY_EDITOR </li></ul><br>        #if UNITY_EDITOR    ,    ,     . <br><br>  ,         ,      .      . <br><br><img src="https://habrastorage.org/webt/-u/yv/ie/-uyviepp1z3u4aal0mgbzlothxg.png"><br><br>     DI    .     Zenject.StaticContext.           InitializeOnLoad ,     . <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">InitializeOnLoad</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EditorInstaller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditorInstaller</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = StaticContext.Container; container.Bind&lt;IElementsProvider&gt;().To&lt;ElementsProvider&gt;().AsSingle(); container.Bind&lt;ISolver&gt;().To&lt;Solver&gt;().AsSingle(); .... } }</code> </pre> <br>   ScriptableObject-      : <br><br><pre> <code class="cs hljs">BindFirstScriptableObject&lt;ISceneNameConfiguration, SceneNameConfiguration&gt;(container); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> BindFirstScriptableObject&lt;TInterface, TImplementation&gt;(DiContainer container) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TImplementation : ScriptableObject, TInterface { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = GetFirstScriptableObject&lt;TImplementation&gt;(); container.Bind&lt;TInterface&gt;().FromInstance(obj).AsSingle(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T GetFirstScriptableObject&lt;T&gt;() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : ScriptableObject { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> guids = AssetDatabase.FindAssets(<span class="hljs-string"><span class="hljs-string">"t:"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T).Name); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = AssetDatabase.GUIDToAssetPath(guids.First()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = AssetDatabase.LoadAssetAtPath&lt;T&gt;(path); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj; }</code> </pre> <br> TImplementation      AssetDatabase.LoadAssetAtPath(path) <br><br>      .         [Inject]  -      <br> StaticContext.Container.Inject(this); <br><br>          null   -         .      , Unity         Awake. <br><br><a name="GeneratorWindow"></a><h4> Generator </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рдордЧреНрд░реА</font></font></a> <br><br><img src="https://habrastorage.org/webt/4i/cp/ud/4icpudizv2-8r-bwrbkk3bva8kq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬрдирд░реЗрдЯрд░ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдХрд╛</font></a><font style="vertical-align: inherit;"> рдкреНрд░рд╛рд░рдВрднрд┐рдХ рджреГрд╢реНрдп рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдВрдбреЛ рдХреЛ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдпреЛрдЬрдирд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдпреЛрдЬрдирд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдФрд░ рдЪрдпрдирд┐рдд рдпреЛрдЬрдирд╛ рдХреЛ рд╡рд░реНрддрдорд╛рди рджреГрд╢реНрдп рдкрд░ рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдВрдбреЛ рдореЗрдВ рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ рддреАрди рдЦрдВрдб рд╣реЛрддреЗ рд╣реИрдВ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреАрдврд╝реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрдЯрди рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд╕реВрдЪреА </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╛рда рдХреЗ рд░реВрдк рдореЗрдВ рдЪрдпрдирд┐рдд рд╡рд┐рдХрд▓реНрдк </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЙрд▓рдо EditorGUILayout.BeginVertical () рдФрд░ EditorGUILayout.EndVertical () рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЧрдП рд╣реИрдВред рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдпрд╣ рдЖрдХрд╛рд░реЛрдВ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдФрд░ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрддрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рд░реНрдХрд┐рдЯ рдкрд░ рдкреАрдврд╝реА рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрддрдиреА рддреЗрдЬрд╝ рдирд╣реАрдВ рд╣реИред рдЖрдИ рдХреЗ рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕рдВрдпреЛрдЬрди рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЬреИрд╕рд╛ рдХрд┐ рдкреНрд░реЛрдлрд╛рдЗрд▓рд░ рдиреЗ рджрд┐рдЦрд╛рдпрд╛ рд╣реИ, рд╕рдмрд╕реЗ рдзреАрдорд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╕рд░реНрдХрд┐рдЯ рд╣реА рд╣реИред рдЗрд╕реЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдХрд░рдирд╛ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рд╣реИ, рд╕рднреА рд╡рд┐рдХрд▓реНрдк рдПрдХ рдпреЛрдЬрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдХреНрд▓реЛрди рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрдм рдореБрдЭреЗ рд▓рдЧрд╛ рдХрд┐ рд╢рд╛рдпрдж рдбрд┐рдмрдЧ рдореЛрдб рдореЗрдВ рд╕рдВрдкрд╛рджрдХ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рд╕рднреА рдХреЛрдб рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред рд░рд┐рд▓реАрдЬ рдХреЗ рддрд╣рдд, рдбрд┐рдмрдЧ рдЗрддрдиреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдмреНрд░реЗрдХрдкреНрд╡рд╛рдЗрдВрдЯ рдмрдВрдж рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рд▓рд╛рдЗрдиреЗрдВ рдЫреЛрдбрд╝ рджреА рдЬрд╛рддреА рд╣реИрдВ, рдЖрджрд┐ред рджрд░рдЕрд╕рд▓, рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдорд╛рдкрдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдпреВрдирд┐рдЯреА рдореЗрдВ рдЬрдирд░реЗрдЯрд░ рдХреА рдЧрддрд┐ рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ рд▓реЙрдиреНрдЪ рдХреА рдЧрдИ рдбрд┐рдмрдЧ рдЕрд╕реЗрдВрдмрд▓реА рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ, рдЬреЛ рд░рд┐рд▓реАрдЬ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ ~ 6 рдЧреБрдирд╛ рдзреАрдореА рд╣реИред</font></font> рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦреЗрдВред <br><br>          Unity DLL  ,        . <br><br>       Task    : <br> circuitGenerator.Generate(lines, maxElementsInLine, availableLogicalElements, useNOT, modification).ToList() <br><br>  ,       .      ,   ( 20     ).   ,              . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Ext</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IEnumerable&lt;CircuitVariant&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderVariants</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IEnumerable&lt;CircuitVariant&gt; circuitVariants</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> circuitVariants.OrderBy(a =&gt; a.Solutions.Count()) .ThenByDescending(a =&gt; a.Solutions .Select(b =&gt; b.Sum(i =&gt; i ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">-1</span></span>)) .OrderByDescending(b=&gt;b) .First()); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IEditorGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { CircuitVariant[] FilteredVariants { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LastPage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FilterVariants</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> page</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxElementsInLine, ICollection&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; availableGates, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> useNOT, StructureModification? modification, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxSolutions</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fetch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EditorGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IEditorGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PageSize = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ICircuitGenerator circuitGenerator; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ConcurrentBag&lt;CircuitVariant&gt; variants; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;CircuitVariant&gt; sortedVariants; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Thread generatingThread; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditorGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ICircuitGenerator circuitGenerator</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.circuitGenerator = circuitGenerator; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { generatingThread?.Abort(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CircuitVariant[] FilteredVariants { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LastPage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FilterVariants</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> page</span></span></span><span class="hljs-function">)</span></span> { CheckVariants(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sortedVariants == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Fetch(); } FilteredVariants = sortedVariants.Skip(page * PageSize) .Take(PageSize) .ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = sortedVariants.Count; LastPage = count % PageSize == <span class="hljs-number"><span class="hljs-number">0</span></span> ? (count / PageSize) - <span class="hljs-number"><span class="hljs-number">1</span></span> : count / PageSize; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fetch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CheckVariants(); sortedVariants = variants.OrderVariants() .ToList(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxElementsInLine, ICollection&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; availableGates, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> useNOT, StructureModification? modification, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxSolutions</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (generatingThread != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Stop(); } variants = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentBag&lt;CircuitVariant&gt;(); generatingThread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> v = circuitGenerator.Generate(lines, maxElementsInLine, availableGates, useNOT, modification, maxSolutions); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> v) { variants.Add(item); } }); generatingThread.Start(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { generatingThread?.Abort(); sortedVariants = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; variants = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; generatingThread = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; FilteredVariants = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckVariants</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (variants == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(<span class="hljs-string"><span class="hljs-string">"VariantsGeneration is not started. Use Start before."</span></span>); } } ~EditorGenerator() { generatingThread.Abort(); } }</code> </pre> <br></div></div><br>   ,     ,        .      .        ,       .    тАЬтАЭ:   ,           .      1 1 1 1    1 0 1 1. <br><br><img src="https://habrastorage.org/webt/mr/ud/aa/mrudaajqtmoetizlrvzd1muja4q.png"><br><br>   ,    ,     .   ,           . <br><br>    Unity  ,    Play   ,     .      ,         .        .     ,      , . <br><br>         <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.Length == <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Input[<span class="hljs-number"><span class="hljs-number">0</span></span>].Value &amp;&amp; Input[<span class="hljs-number"><span class="hljs-number">1</span></span>].Value; }</code> </pre> <br>    . <br><br><a name="SolverWindow"></a><h4> Solver </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>     ,               .      тАЬтАЭ.         <br><br><img src="https://habrastorage.org/webt/k4/4e/pk/k44epkd08ngv_gh2rpejtr6jzkg.png"><br><br>    тАЬbackendтАЭ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSourcesLabel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sourcesMb = sceneObjectsHelper.FindObjectsOfType&lt;SourceMb&gt;().OrderBy(s =&gt; s.name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sourcesLabelSb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sourcesMb) { sourcesLabelSb.Append(<span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{item.name.Replace(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">"Source"</span></span></span></span><span class="hljs-string"><span class="hljs-subst">, </span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">"Src"</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">\t"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sourcesLabelSb.ToString(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[]&gt; FindSolutions() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elementsMb = sceneObjectsHelper.FindObjectsOfType&lt;IElectricalElementMbEditor&gt;(); elementsConfigurator.Configure(elementsMb); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> root = sceneObjectsHelper.FindObjectOfType&lt;FinalDevice&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (root == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(<span class="hljs-string"><span class="hljs-string">"No final device in scene"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sourcesMb = sceneObjectsHelper.FindObjectsOfType&lt;SourceMb&gt;().OrderBy(s =&gt; s.name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sources = sourcesMb.Select(mb =&gt; (Source) mb.Element).ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> solver.GetSolutions(root.Element, sources); }</code> </pre> <br><a name="Useful"></a><h3>  </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br><a name="AssertHelper"></a><h4> AssertHelper </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br>  ,     ,    ,    OnEnable <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AssertHelper</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AssertType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IElectricalElementMbEditor elementMbEditor, ElectricalElementType expectedType</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elementMbEditor.Type != expectedType) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">$"Field for </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{expectedType}</span></span></span><span class="hljs-string"> require element with such type, but given element is </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{elementMbEditor.Type}</span></span></span><span class="hljs-string">"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AssertNOTNull&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> T obj, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fieldName = <span class="hljs-string"><span class="hljs-string">""</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(fieldName)) { fieldName = <span class="hljs-string"><span class="hljs-string">$"of type </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-string"><span class="hljs-subst">(T).Name}</span></span></span><span class="hljs-string">"</span></span>; } Debug.LogError(<span class="hljs-string"><span class="hljs-string">$"Field </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{fieldName}</span></span></span><span class="hljs-string"> is not installed"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AssertNOTEmpty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fieldName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(str)) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">$"Field </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{fieldName}</span></span></span><span class="hljs-string"> is not installed"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AssertSceneCanBeLoaded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Application.CanStreamedLevelBeLoaded(name)) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">$"Scene </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string"> can't be loaded."</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> name; } }</code> </pre> <br> ,          ,     .     Unity. <br><br>  : <br><br><pre> <code class="cs hljs">mainMenuSceneName.AssertNOTEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(mainMenuSceneName)).AssertSceneCanBeLoaded(); levelNamePrefix.AssertNOTEmpty(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(levelNamePrefix)); editorElementsPrefabs.AssertNOTNull(); not.AssertType(ElectricalElementType.NOT); <span class="hljs-comment"><span class="hljs-comment">//     enum    </span></span></code> </pre> <br><a name="SceneObjectsHelper"></a><h4> SceneObjectsHelper </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>     ,     SceneObjectsHelper: <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Circuit.Game.Utility</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ISceneObjectsHelper</span></span> { T[] FindObjectsOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>; T FindObjectOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>; T Instantiate&lt;T&gt;(T prefab) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : Object; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> DestroyObjectsOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> immediate = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Destroy&lt;T&gt;(T obj, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> immediate = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : Object; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyAllChildren</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Transform transform</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Inject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span>; T GetComponent&lt;T&gt;(GameObject obj) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SceneObjectsHelper</span></span> : <span class="hljs-title"><span class="hljs-title">ISceneObjectsHelper</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> DiContainer diContainer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SceneObjectsHelper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DiContainer diContainer</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.diContainer = diContainer; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T GetComponent&lt;T&gt;(GameObject obj) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj.GetComponents&lt;Component&gt;().OfType&lt;T&gt;().FirstOrDefault(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T[] FindObjectsOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (includeDisabled) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Resources.FindObjectsOfTypeAll(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Object)).OfType&lt;T&gt;().ToArray(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Object.FindObjectsOfType&lt;Component&gt;().OfType&lt;T&gt;().ToArray(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> DestroyObjectsOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> immediate = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objects = includeDisabled ? Resources.FindObjectsOfTypeAll(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Object)).OfType&lt;T&gt;().ToArray() : Object.FindObjectsOfType&lt;Component&gt;().OfType&lt;T&gt;().ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> objects) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (immediate) { Object.DestroyImmediate((item <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Component)?.gameObject); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Object.Destroy((item <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Component)?.gameObject); } } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Destroy&lt;T&gt;(T obj, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> immediate = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : Object { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (immediate) { Object.DestroyImmediate(obj); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Object.Destroy(obj); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyAllChildren</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Transform transform</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> childCount = transform.childCount; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; childCount; i++) { Destroy(transform.GetChild(i).gameObject); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T FindObjectOfType&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> includeDisabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (includeDisabled) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Resources.FindObjectsOfTypeAll(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Object)).OfType&lt;T&gt;().FirstOrDefault(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Object.FindObjectsOfType&lt;Component&gt;().OfType&lt;T&gt;().FirstOrDefault(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Inject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { diContainer.Inject(obj); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T Instantiate&lt;T&gt;(T prefab) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : Object { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = Object.Instantiate(prefab); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Component) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> components = ((Component) (<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>) obj).gameObject.GetComponents&lt;Component&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> component <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> components) { Inject(component); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Inject(obj); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj; } } }</code> </pre> <br></div></div><br>             ,           .       ,    . <br><br><a name="CoroutineStarter"></a><h4> CoroutineStarter </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>  Coroutine   MonoBehaviour.     CoroutineStarter      . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICoroutineStarter</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BeginCoroutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerator routine</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CoroutineStarter</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span>, <span class="hljs-title"><span class="hljs-title">ICoroutineStarter</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BeginCoroutine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerator routine</span></span></span><span class="hljs-function">)</span></span> { StartCoroutine(routine); } }</code> </pre> <br>  ,       .     : <br><br><pre> <code class="cs hljs">coroutineStarter.When(x =&gt; x.BeginCoroutine(Arg.Any&lt;IEnumerator&gt;())).Do(info =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = (IEnumerator) info[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (a.MoveNext()) { } });</code> </pre> <br><a name="Gizmo"></a><h4> Gizmo </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>        -gizmo,     .       .       : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (outputConnectorMb != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Handles.DrawLine(transform.position, outputConnectorMb.Transform.position); } }</code> </pre> <br><img src="https://habrastorage.org/webt/ta/ce/d5/taced5wyeyhwkpj5vtiuvauu68s.png"><br><br><a name="Testing"></a><h3>  рдкрд░реАрдХреНрд╖рдг </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br>      ,          . <br><br>  Unit-   mock-         .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">NSubstitute</a> .   . <br><br> Unity   NuGet,     DLL,  ,     AssemblyDefinition     . <br><br><img src="https://habrastorage.org/webt/y-/bh/sp/y-bhsprsfvxo-j9javgdhdzzhig.png"><br><br>    Unity  TestRunner,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">NUnit</a> .    TestRunner    : <br><br><ul><li> EditMode тАФ     ,   .    Nunit .    ,    .        GameObject  Monobehaviour .   ,     EditMode . </li><li> PlayMode тАФ     .    </li></ul> EditMode.   ,         .              .            Start, Update  . <br><br> PlayMode    ,   NUnit    .  PlayMode         .         Coroutine .     IEnumerator/IEnumerable  ,   ,  , : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> <br>  рдпрд╛ <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">    .</a> <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">UnityTest</a> .     <br> UnitySetUp  UnityTearDown      . <br><br> ,   ,  EditMode     . <br><br>            .             ,   ,     . <br><br>  unit ,    Core       . <br>     ,      <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ElectricalElementTestsBase</span></span>&lt;<span class="hljs-title"><span class="hljs-title">TElement</span></span>&gt; <span class="hljs-title"><span class="hljs-title">where</span></span> <span class="hljs-title"><span class="hljs-title">TElement</span></span> : <span class="hljs-title"><span class="hljs-title">ElectricalElementBase</span></span>, <span class="hljs-title"><span class="hljs-title">IElectricalElement</span></span>, <span class="hljs-title"><span class="hljs-title">new</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> TElement element; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> IInputConnector mInput1; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> IInputConnector mInput2; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> IInputConnector mInput3; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> IInputConnector mInput4; [OneTimeSetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { element = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TElement(); mInput1 = Substitute.For&lt;IInputConnector&gt;(); mInput2 = Substitute.For&lt;IInputConnector&gt;(); mInput3 = Substitute.For&lt;IInputConnector&gt;(); mInput4 = Substitute.For&lt;IInputConnector&gt;(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue_3Input</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input3, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expectedOutput</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// arrange mInput1.Value.Returns(input1); mInput2.Value.Returns(input2); mInput3.Value.Returns(input3); element.Input = new[] {mInput1, mInput2, mInput3}; // act bool result = element.GetValue(); // assert Assert.AreEqual(expectedOutput, result); } protected void GetValue_2Input(bool input1, bool input2, bool expectedOutput) { // arrange mInput1.Value.Returns(input1); mInput2.Value.Returns(input2); element.Input = new[] {mInput1, mInput2}; // act bool result = element.GetValue(); // assert Assert.AreEqual(expectedOutput, result); } protected void GetValue_1Input(bool input, bool expectedOutput) { // arrange mInput1.Value.Returns(input); element.Input = new[] {mInput1}; // act bool result = element.GetValue(); // assert Assert.AreEqual(expectedOutput, result); } }</span></span></code> </pre> <br>     : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AndTests</span></span> : <span class="hljs-title"><span class="hljs-title">ElectricalElementTestsBase</span></span>&lt;<span class="hljs-title"><span class="hljs-title">And</span></span>&gt; { [TestCase(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [TestCase(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [TestCase(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [TestCase(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue_2Input</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> output</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.GetValue_2Input(input1, input2, output); } [TestCase(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [TestCase(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetValue_1Input</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expectedOutput</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.GetValue_1Input(input, expectedOutput); } }</code> </pre> <br>        ,      ,      11   . <br><br>     GameManager-.     ,       .             .                 .    ,         : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Test</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FullHelpAgree_FinishLevel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// arrange levelGameManager.Start(); helpMenu.ClearReceivedCalls(); dataManager.ClearReceivedCalls(); // act helpMenu.FullHelpClick += Raise.Event&lt;Action&gt;(); fullHelpWindow.Agreed += Raise.Event&lt;Action&lt;bool&gt;&gt;(true); // assert dataManager.Received().SaveGame(); helpMenu.Received().Hide(); } [Test] public void ChangeSource_RootOutBecomeTrue_SavesGameOpensMenu() { // arrange currentLevelData.IsTestLevel.Returns(false); rootOutputMb.OutputConnector.Value.Returns(true); // act levelGameManager.Start(); levelFinishedMenu.ClearReceivedCalls(); dataManager.ClearReceivedCalls(); source.ValueChanged += Raise.Event&lt;Action&lt;bool&gt;&gt;(true); // assert dataManager.Received().SaveGame(); levelFinishedMenu.Received().Show(); }</span></span></code> </pre> <br>          ,        DI .        ,       . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlacerTests</span></span> { [Inject] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ICircuitEditorPlacer circuitEditorPlacer; [Inject] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ICircuitGenerator circuitGenerator; [Inject] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IEditorSolver solver; [Inject] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ISceneObjectsHelper sceneObjectsHelper; [TearDown] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TearDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { sceneObjectsHelper.DestroyObjectsOfType&lt;IElectricalElementMb&gt;(immediate: <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } [OneTimeSetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = StaticContext.Container; container.Inject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } [TestCase(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)] [TestCase(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)] [TestCase(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaceSolve_And_NoModifications_AllVariantsSolved</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> elementsInLine</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variants = circuitGenerator.Generate(lines, elementsInLine, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; {<span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variant <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> variants) { circuitEditorPlacer.PlaceCircuit(variant); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> solutions = solver.FindSolutions(); CollectionAssert.IsNOTEmpty(solutions); } } [TestCase(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.Branching)] [TestCase(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.ThroughLayer)] [TestCase(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.All)] [TestCase(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.Branching)] [TestCase(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.ThroughLayer)] [TestCase(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, StructureModification.All)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaceSolve_And_Modifications_AllVariantsSolved</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> elementsInLine, StructureModification modification</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variants = circuitGenerator.Generate(lines, elementsInLine, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; {<span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, modification); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variant <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> variants) { circuitEditorPlacer.PlaceCircuit(variant); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> solutions = solver.FindSolutions(); CollectionAssert.IsNOTEmpty(solutions); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдкрд░реАрдХреНрд╖рдг рд╕рднреА рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдордВрдЪ рдкрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рднреА рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ EditMode рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рдХрд╛рдлреА рд╕рдВрднрд╡ рд╣реИред рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рд╕рд╣реА рд╣реИ рдХрд┐ рдЗрд╕рдиреЗ рдЙрдиреНрд╣реЗрдВ рд╕рдордЭрджрд╛рд░ рдмрдирд╛ рджрд┐рдпрд╛ - рдореБрдЭреЗ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреИрд╕реЗ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЬрд╛рдВрдЪрддрд╛ рд╣реВрдВ рдХрд┐ рдкреЛрд╕реНрдЯ рдХрд┐рдП рдЧрдП рд╕рд░реНрдХрд┐рдЯ рдореЗрдВ рд╕рдорд╛рдзрд╛рди рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХреАрдХрд░рдг рдореЗрдВ, рд╕рд░реНрдХрд┐рдЯрдЧреЗрдВрдиреЗрдЯрд░ (рд╕реНрдЯреНрд░рдХреНрдЪрдирд░рдЧреЗрдВрдиреЗрдЯрд░ + рд╡реЗрд░рд┐рдПрдВрдЯрдЬреЗрдирд░реЗрдЯрд░) рдФрд░ рд╕реЙрд▓реНрд╡рд░ рдХреЗ рдкрд░реАрдХреНрд╖рдг рднреА рд╣реИрдВ</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CircuitGeneratorTests</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ICircuitGenerator circuitGenerator; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ISolver solver; [SetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { solver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Solver(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gates = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Func&lt;IElectricalElement&gt;&gt; { () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> And(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Or(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Xor() }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conductors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Func&lt;IElectricalElement&gt;&gt; { () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Conductor(), () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Not() }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = Substitute.For&lt;IElementsProvider&gt;(); elements.Conductors.Returns(conductors); elements.Gates.Returns(gates); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> structGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructureGenerator(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> variantsGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VariantsGenerator(solver, elements); circuitGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CircuitGenerator(structGenerator, variantsGenerator); } [Test] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate_2l_2max_ReturnsVariants</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// act var variants = circuitGenerator.Generate(2, 2, new[] {0, 1, 2}, false).ToArray(); // assert Assert.True(variants.Any()); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Nand)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Nor)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Xnor)); AssertLayersNotContains(variants.First().Structure.Conductors, typeof(Not)); AssertLayersContains(variants.First().Structure.Gates, typeof(Or)); AssertLayersContains(variants.First().Structure.Gates, typeof(Xor)); AssertLayersContains(variants.First().Structure.Conductors, typeof(Conductor)); } [Test] public void Generate_2l_2max_RestrictedElementsWithConductors() { // arrange var available = new[] {0}; // act var variants = circuitGenerator.Generate(2, 2, available, true).ToArray(); // assert Assert.True(variants.Any()); var lElements = new List&lt;int&gt;(); var layers = variants.Select(v =&gt; v.Gates); foreach (var layer in layers) { foreach (var item in layer.Values) { lElements.AddRange(item); } } Assert.True(lElements.Contains(0)); Assert.False(lElements.Contains(1)); Assert.False(lElements.Contains(2)); AssertLayersContains(variants.First().Structure.Gates, typeof(And)); AssertLayersContains(variants.First().Structure.Conductors, typeof(Conductor)); AssertLayersContains(variants.First().Structure.Conductors, typeof(Not)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Nand)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Or)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Nor)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Xnor)); AssertLayersNotContains(variants.First().Structure.Gates, typeof(Xor)); } private static void AssertLayersContains(IDictionary&lt;int, ElectricalElementContainer[]&gt; layers, Type elementType) { AssertLayersContains(layers, elementType, true); } private static void AssertLayersNotContains(IDictionary&lt;int, ElectricalElementContainer[]&gt; layers, Type elementType) { AssertLayersContains(layers, elementType, false); } private static void AssertLayersContains(IDictionary&lt;int, ElectricalElementContainer[]&gt; layers, Type elementType, bool shouldContain) { bool contains = false; foreach (var layer in layers) { foreach (var item in layer.Value) { contains |= item.Elements.Select(e =&gt; e.GetType()).Contains(elementType); } } Assert.AreEqual(shouldContain, contains); } } }</span></span></code> </pre> <br><br> PlayMode  ,   .    ,   ..              .         ,          .    PlayMode     ,    ,      ,      ,        ( ). <br><br>        ,      Unity    . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдорд┐рд▓реА рдХрд┐ рдПрдХрддрд╛ рдХреЛ 2018.3 рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде, рдкрд░реАрдХреНрд╖рдгреЛрдВ рдиреЗ рдмрд╣реБрдд рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛, 10 рдЧреБрдирд╛ рддрдХ рдзреАрдорд╛ (рдПрдХ рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ)ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ 288 EditMode рдкрд░реАрдХреНрд╖рдг рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ 11 рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдЪрд▓рддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЗрддрдиреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╡рд╣рд╛рдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</font></font><br><br><a name="Resume"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рдХрд╛рд╕ рд╕рд╛рд░рд╛рдВрд╢ </font></font></h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> <br><br><img src="https://habrastorage.org/webt/kl/4d/u6/kl4du6hxim70hyncofiakaiqsi4.png"><br> <i>  </i> <br><br>        .          . <br><br> DI  .    ,  Unity    ,     . <br><br> Unity    .      GameObject         mock-    Collider, SpriteRenderer, MeshRenderer  ..  .  GetComponent     .  ,     . <br><br>       ,        .        .,    ,           /        .   DI, , scriptable objects  ,   ,  ,       Zenject,   ,     . <br><br> Unity    , .     .         .       (ToString()  тАЬnullтАЭ)    ,        .       .   , ,           тАФ    . <br><br>  ,           Library. <br><br>       Google Play   .     3,      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi453564/">https://habr.com/ru/post/hi453564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi453546/index.html">рдПрдХ рдЫреЛрдЯреЗ рдХреАрдмреЛрд░реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдХрд░реЗрдВ</a></li>
<li><a href="../hi453548/index.html">рд╣рдо рдмреНрд░реЗрдХрд┐рдВрдЧ рд╕реИрдорд╕рдВрдЧ рдЧреИрд▓реЗрдХреНрд╕реА рдЯреАрдПрдмреА 2 рд╡рд╛рдИрдлрд╛рдИ рдХреЛ рдкреБрдирд░реНрдЬреАрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi453554/index.html">рд╕реНрдкреЗрд╕рдПрдХреНрд╕ рд╕реЗ рд╕реНрдЯрд╛рд░рд▓рд┐рдВрдХ рдХреИрд╕реЗ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi453558/index.html">рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдХрд╛ рдкрд░рд┐рдЪрдп</a></li>
<li><a href="../hi453562/index.html">27 рдордИ рд╕реЗ 2 рдЬреВрди рддрдХ рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi453566/index.html">рдХрд┐рдВрд╡рджрдВрддреА рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: рдЦреБрд▓реЗ рдбреЗрдЯрд╛ рдХреЗ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓ рдЬреЛ рдиреЛрдЯреНрд░реЗ рдбреЗрдо рдХреА рдмрд╣рд╛рд▓реА рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi453568/index.html">рдПрдХ рдЖрдЗрдХрди рдХрд╛ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг: рдиреЛрдЯреНрд░реЗ-рдбреЗрдо рдХреЛ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЦреБрд▓реЗ рдбреЗрдЯрд╛ рдХреЗ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓</a></li>
<li><a href="../hi453570/index.html">MacOS рдХреЗ рд▓рд┐рдП Microsoft рдПрдЬ</a></li>
<li><a href="../hi453572/index.html">MacOS рдХреЗ рд▓рд┐рдП Microsoft рдПрдЬ</a></li>
<li><a href="../hi453574/index.html">B2B рдЙрддреНрдкрд╛рдж рдкреНрд░рдмрдВрдзрди</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>