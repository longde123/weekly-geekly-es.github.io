<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖüèø üç† üö§ Introdu√ß√£o aos ganchos de rea√ß√£o ‚ô£Ô∏è üóúÔ∏è üßó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ l√™ o Twitter, provavelmente sabe que Hooks √© um novo recurso do React, mas voc√™ pode perguntar: como podemos us√°-los na pr√°tica ? Neste artigo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o aos ganchos de rea√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429712/"><img src="https://habrastorage.org/webt/fi/qp/xs/fiqpxsj8dqr3mts4ayrpml4es0u.png"><br><br>  Se voc√™ l√™ o Twitter, provavelmente sabe que Hooks √© um novo recurso do React, mas voc√™ pode perguntar: <b>como podemos us√°-los na pr√°tica</b> ?  Neste artigo, mostraremos alguns exemplos de uso de ganchos. <br>  Uma das id√©ias principais a entender √© que os <b>ganchos permitem usar o estado e outros recursos do React sem escrever aulas</b> . <br><a name="habracut"></a><br><h1>  A motiva√ß√£o por tr√°s dos ganchos </h1><br>  Embora a arquitetura orientada a componentes nos permita reutilizar a visualiza√ß√£o em nosso aplicativo, um dos maiores problemas que um desenvolvedor enfrenta √© como <b>reutilizar a l√≥gica baseada em estado entre os componentes</b> .  Quando temos componentes com l√≥gica de estado semelhante, n√£o h√° boas solu√ß√µes para reutilizar componentes, e isso √†s vezes pode levar √† duplica√ß√£o da l√≥gica nos m√©todos construtor e de ciclo de vida. <br>  Para resolver esse problema, geralmente use: <br><br><ul><li>  Componentes de alta ordem </li><li>  render adere√ßos </li></ul><br>  Mas esses dois padr√µes t√™m desvantagens que podem contribuir para a complexidade da base de c√≥digo. <br><br>  <b>Os ganchos t√™m como objetivo resolver todos esses problemas, permitindo escrever componentes funcionais que tenham acesso ao estado, contexto, m√©todos de ciclo de vida, ref, etc., sem escrever classes.</b> <br><br><h1>  Ganchos em Alpha </h1><br><blockquote>  Antes de mergulhar, √© importante mencionar que o desenvolvimento da API Hooks ainda n√£o est√° completo. <br><br>  Al√©m disso, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o oficial √©</a> muito boa, e recomendamos a leitura tamb√©m, porque descreve extensivamente a motiva√ß√£o por tr√°s da introdu√ß√£o de Hooks. <br>  <b>UPD</b> O artigo original, cuja tradu√ß√£o voc√™ est√° lendo, foi escrito no momento em que esta API estava em teste alfa, no momento em que o React Hooks est√° oficialmente pronto para uso.  Altera√ß√µes irrevers√≠veis feitas no release (em compara√ß√£o ao alpha) podem ser encontradas na parte inferior do artigo ou nas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">notas de lan√ßamento</a> . <br></blockquote><br><h2>  Como os ganchos se relacionam com as classes </h2><br>  Se voc√™ est√° familiarizado com o React, uma das melhores maneiras de entender Hooks √© ver como podemos reproduzir o comportamento que estamos acostumados a trabalhar com classes usando Hooks. <br><br>  Lembre-se de que, ao escrever classes de componentes, geralmente precisamos: <br><br><ul><li>  Gerenciar estado </li><li>  Use m√©todos de ciclo de vida como componentDidMount () e componentDidUpdate () </li><li>  Contexto de acesso (contextType est√°tico) </li></ul><br><br>  Com o React Hooks, podemos reproduzir um comportamento semelhante nos componentes funcionais: <br><br><ul><li>  Para usar o estado de um componente, use o gancho useState () </li><li>  Em vez de usar m√©todos de ciclo de vida, como componentDidMount () e componentDidUpdate (), use o gancho useEffect (). </li><li>  Em vez de usar a propriedade static contextType, use o gancho useContext (). </li></ul><br><h2>  A vers√£o mais recente do React √© necess√°ria para usar os Hooks. </h2><br>  Voc√™ pode come√ßar o Hooks agora mesmo, alterando o valor de react e react-dom no package.json para "next". <br><br><img src="https://habrastorage.org/webt/ys/tx/47/ystx47s3snw_tfev_vqedjlzqfe.png"><br><br><h1>  Exemplo de gancho UseState () </h1><br>  O estado √© parte integrante do React.  Ele nos permite declarar vari√°veis ‚Äã‚Äãque cont√™m dados, que, por sua vez, ser√£o utilizados em nossa aplica√ß√£o.  Usando classes, o estado √© geralmente definido da seguinte maneira: <br><br><img src="https://habrastorage.org/webt/qs/se/7a/qsse7afsrvty1pgadlncirgnljk.png"><br><br>  Antes de Hooks, o estado geralmente era usado apenas em um componente - uma classe, mas, como mencionado acima, <b>Hooks nos permite adicionar estado a um componente funcional tamb√©m</b> . <br>  Vamos ver um exemplo abaixo.  Aqui, constru√≠mos um comutador retroiluminado que muda de cor dependendo do valor do estado.  Para isso, usaremos hook useState (). <br>  Aqui est√° o c√≥digo completo (e um exemplo execut√°vel) - veremos o que acontece abaixo.  Ao clicar na imagem, voc√™ pode ver este exemplo no CodeSandBox. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ct/-f/xa/ct-fxahjxyoqamk8h-rkguxnfia.png"></a> <br><br><h2>  Nosso componente √© uma fun√ß√£o </h2><br>  No bloco de c√≥digo acima, come√ßamos importando <b>useState</b> do React.  UseState √© uma nova maneira de tirar proveito das possibilidades que este estado poderia oferecer. <br>  Observe que esse componente <b>√© uma fun√ß√£o, n√£o uma classe</b> .  Interessante! <br><br><h2>  Estado de leitura e grava√ß√£o </h2><br>  Dentro desta fun√ß√£o, chamamos useState para criar uma vari√°vel no estado: <br><br><img src="https://habrastorage.org/webt/mw/3n/ti/mw3ntirdvzk3oxyedpzi00q-vv0.png"><br><br>  <b>useState √© usado para declarar uma vari√°vel de estado</b> e pode ser inicializado com qualquer tipo de valor (diferente do estado nas classes, que deve ser um objeto). <br><br>  Como visto acima, estamos usando a desestrutura√ß√£o no valor de retorno de useState. <br><ul><li>  O primeiro valor, leve neste caso, √© o estado atual (como this.state) </li><li>  O segundo valor √© a fun√ß√£o usada para atualizar o valor do estado (primeiro valor) (como this.setState). </li></ul><br>  Em seguida, criamos duas fun√ß√µes, cada uma das quais define o estado com valores diferentes, 0 ou 1. <br><br><img src="https://habrastorage.org/webt/ma/sp/lk/masplkqh6lcp33bsywxmhs9zu7g.png"><br><br>  Em seguida, aplicamos-os como manipuladores de eventos nos bot√µes da exibi√ß√£o: <br><br><img src="https://habrastorage.org/webt/bu/6y/ht/bu6yhtzsnm1tory2ro257etb2yi.png"><br><br><h2>  React rastreia o estado </h2><br>  Quando o bot√£o ‚ÄúOn‚Äù √© pressionado, a fun√ß√£o setOn √© chamada, que chama setLight (1).  Chamar setLight (1) <b>atualiza o valor da luz para a pr√≥xima renderiza√ß√£o</b> .  Isso pode parecer um pouco m√°gico, mas o <b>React mant√©m o controle do valor dessa vari√°vel</b> e passa um novo valor quando esse componente √© renderizado novamente. <br>  Em seguida, usamos o estado atual ( <b>luz</b> ) para determinar se a l√¢mpada deve estar acesa ou n√£o.  Ou seja, definimos a cor de preenchimento do SVG, dependendo do valor da <b>luz</b> .  Se a luz for 0 (desativada), fillColor ser√° definido como # 000000 (e se for 1 (ativado), fillColor ser√° definido como # ffbb73). <br><br><h2>  V√°rios estados </h2><br>  Embora n√£o fa√ßamos isso no exemplo acima, voc√™ pode criar v√°rios estados chamando useState mais de uma vez.  Por exemplo: <br><br><img src="https://habrastorage.org/webt/f6/hc/rt/f6hcrt31natgsnrwwxznmwya2da.png"><br><br><blockquote>  NOTA <br>  Existem algumas limita√ß√µes ao uso de ganchos que voc√™ deve conhecer.  Mais importante, voc√™ s√≥ deve chamar ganchos no n√≠vel superior de sua fun√ß√£o.  Consulte " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Regras dos ganchos</a> " para obter mais informa√ß√µes. </blockquote><br><br><h2>  Exemplo de gancho UseEffect () </h2><br>  <b>O UseEffect Hook permite realizar efeitos colaterais em componentes funcionais</b> .  Os efeitos colaterais podem incluir acessar a API, atualizar o DOM, inscrever-se em manipuladores de eventos - tudo o que voc√™ deseja √© que uma a√ß√£o "imperativa" ocorra. <br><br>  Usando o gancho useEffect (), o React sabe que voc√™ deseja executar uma a√ß√£o espec√≠fica ap√≥s a renderiza√ß√£o. <br><br>  Vejamos um exemplo abaixo.  Usaremos useEffect () para chamar a API e obter uma resposta. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/d3/s9/wm/d3s9wmjvrllc8z6xfwol0hocesg.png"></a> <br><br>  Este exemplo de c√≥digo usa <b>useState</b> e <b>useEffect</b> , e isso ocorre porque queremos gravar o resultado da chamada da API no estado. <br><br><img src="https://habrastorage.org/webt/l_/ro/uh/l_rouhqptfnk3xxxpevplnsg8qm.png"><br><br><h2>  Receber dados e atualizar estado </h2><br>  Para ‚Äúusar o efeito‚Äù, precisamos colocar nossa a√ß√£o na fun√ß√£o <b>useEffect</b> , ou seja, passamos o efeito de ‚Äúa√ß√£o‚Äù como uma fun√ß√£o an√¥nima, como o primeiro argumento a <b>usar o Effect</b> . <br>  No exemplo acima, estamos nos referindo a uma API que retorna uma lista de nomes.  Quando a <b>resposta</b> retorna, convertemos para JSON e usamos <b>setNames (data)</b> para definir o estado. <br><br><img src="https://habrastorage.org/webt/jn/2m/a6/jn2ma6v7m2cdiiy6pwxoscgdtsq.png"><br><br><h2>  Problemas de desempenho ao usar efeitos </h2><br><br>  No entanto, h√° algo mais a ser dito sobre o uso de <b>useEffect</b> . <br><br>  A primeira coisa a se pensar √© que, por padr√£o, nosso <b>useEffect</b> ser√° chamado em todas as renderiza√ß√µes!  A boa not√≠cia √© que n√£o precisamos nos preocupar com dados desatualizados, mas a m√° not√≠cia √© que provavelmente n√£o queremos fazer uma solicita√ß√£o HTTP para cada renderiza√ß√£o (como neste caso). <br><br>  Voc√™ pode pular efeitos <b>usando o segundo argumento useEffect</b> , como neste caso.  O segundo argumento para useEffect √© uma lista de vari√°veis ‚Äã‚Äãque queremos ‚Äúobservar‚Äù e, em seguida, executaremos novamente o efeito somente quando um desses valores for alterado. <br><br>  No exemplo de c√≥digo acima, observe que estamos passando <b>uma matriz vazia</b> como o segundo argumento.  Somos n√≥s que dizemos ao React que queremos apenas nomear esse efeito ao montar o componente. <br><br><blockquote>  Para saber mais sobre o desempenho do efeito, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">consulte esta se√ß√£o em white papers.</a> </blockquote><br>  Al√©m disso, como a fun√ß√£o useState, useEffect permite usar v√°rias inst√¢ncias, o que significa que voc√™ pode ter v√°rias fun√ß√µes useEffect. <br><br><h2>  Exemplo de gancho UseContext () </h2><br>  <b>Ponto de contexto</b> <br><br>  O contexto no React √© uma maneira de um componente filho acessar um valor no componente pai. <br><br>  Para entender a necessidade de contexto: ao criar um aplicativo React, muitas vezes voc√™ precisa passar valores da parte superior da √°rvore do React para baixo.  Ao n√£o usar o contexto, voc√™ passa adere√ßos por componentes que n√£o precisam saber sobre eles. <br><br>  Passar adere√ßos pela √°rvore de componentes ‚Äún√£o relacionados‚Äù √© chamado carinhosamente de perfura√ß√£o de adere√ßos. <br>  O contexto de rea√ß√£o resolve o problema de perfura√ß√£o de adere√ßos, permitindo que voc√™ compartilhe valores atrav√©s da √°rvore de componentes, com qualquer componente que solicite esses valores. <br><br>  <b>useContext () simplifica o uso do contexto</b> <br><br>  Com o useContext Hook, o uso do contexto √© mais f√°cil do que nunca. <br><br>  A fun√ß√£o <b>useContext ()</b> pega um objeto de contexto, que √© retornado inicialmente de <b>React.createContext ()</b> e, em seguida, retorna o valor atual do contexto.  Vejamos um exemplo abaixo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/aa/uh/w6/aauhw6dryv5g7ltu15gake6yu_a.png"></a> <br><br>  No c√≥digo acima, o contexto do JediContext √© criado usando React.createContext (). <br><br>  Usamos JediContext.Provider em nosso componente App e definimos o valor como "Luke" l√°.  Isso significa que qualquer componente que precise acessar o contexto agora poder√° ler esse valor. <br><br>  Para ler esse valor na fun√ß√£o Display (), chamamos useContext, passando o argumento JediContext. <br><br>  Em seguida, passamos o objeto de contexto obtido de React.createContext e ele exibe automaticamente o valor.  Quando o valor do provedor √© atualizado, este Hook funciona automaticamente com o √∫ltimo valor de contexto. <br><br><h4>  Obtendo um Link para o Contexto em um Aplicativo Maior </h4><br>  Acima, criamos o JediContext nos dois componentes, mas em um aplicativo maior, o Display e o App estar√£o em arquivos diferentes.  Portanto, se voc√™ tiver uma situa√ß√£o semelhante, pode estar se perguntando: "Como podemos obter um link para o JediContext entre arquivos?" <br><br>  A resposta √© que voc√™ precisa <b>criar um novo arquivo que exporte o JediContext</b> . <br>  Por exemplo, voc√™ pode ter um arquivo context.js que contenha algo como isto: <br><br><img src="https://habrastorage.org/webt/7p/aj/8g/7paj8gv_3osxvml7qa8figr6jnk.png"><br><br>  e, em App.js (e Display.js), voc√™ deve escrever: <br><br><img src="https://habrastorage.org/webt/3p/sp/f1/3pspf1ab9sgflp2xvfhqn_edcig.png"><br><br>  Obrigado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dave</a> ) <br><br><h3>  Exemplo de gancho de UseRef () </h3><br>  Refs fornece uma maneira de acessar os elementos React criados no m√©todo render (). <br>  Se voc√™ √© novo no React refs, pode ler esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">introdu√ß√£o aos React refs</a> . <br>  A fun√ß√£o <b>useRef ()</b> retorna um objeto ref. <br><br><img src="https://habrastorage.org/webt/lx/ti/yw/lxtiywoqga-4a5mynvgtmhc9nhq.png"><br><br><h3>  useRef () e formul√°rios com entrada </h3><br>  Vamos ver um exemplo usando o gancho useRef (). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/kj/5j/kv/kj5jkvt8rawy6g9relz8icq7rks.png"></a> <br><br>  No exemplo acima, usamos useRef () em combina√ß√£o com useState () para renderizar o valor de entrada na tag p. <br><br>  Ref √© criado na vari√°vel nameRef.  Em seguida, a vari√°vel nameRef pode ser usada na entrada, fornecida como ref.  Essencialmente, isso significa que agora o conte√∫do do campo de entrada estar√° acess√≠vel via ref. <br><br>  O bot√£o enviar no c√≥digo possui um manipulador de eventos onClick chamado submitButton.  A fun√ß√£o submitButton chama setName (criada por meio de useState). <br><br>  Como j√° fizemos usando hookState, setName ser√° usado para definir o nome do estado.  Para extrair o nome da tag de entrada, lemos o valor de nameRef.current.value. <br><br>  Outra observa√ß√£o sobre useRef √© que ele pode ser usado mais que o atributo ref. <br><br><h3>  Usando ganchos personalizados </h3><br>  Um dos recursos mais interessantes do Hooks √© que voc√™ pode <b>compartilhar</b> facilmente a <b>l√≥gica entre v√°rios componentes criando seu pr√≥prio Hook.</b> <br><br>  No exemplo abaixo, criaremos um gancho <b>setCounter ()</b> personalizado que nos permite rastrear o estado e fornecer fun√ß√µes personalizadas de atualiza√ß√£o de estado! <br><br><blockquote>  Consulte tamb√©m este <b>useCounter</b> Hook de <b>react</b> <a href="">-use</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">useCounter de Kent</a> </blockquote><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/5j/1t/po/5j1tpoviea-npppg002j2vbyydw.png"></a> <br><br>  No bloco de c√≥digo acima, criamos uma fun√ß√£o useCounter que armazena a l√≥gica do nosso gancho. <br><br>  Observe que o useCounter pode usar outros ganchos!  Vamos come√ßar criando um novo estado Hook atrav√©s do useState. <br><br>  Em seguida, definimos duas fun√ß√µes auxiliares: <b>incremento</b> e <b>decremento</b> , que chamam <b>setCount</b> e ajustam a <b>contagem</b> atual de acordo. <br><br>  Finalmente, retornamos os links necess√°rios para interagir com nosso gancho. <br><br>  P: O que acontece, retornando uma matriz com um objeto? <br>  R: Bem, como a maioria das coisas em Hooks, as conven√ß√µes da API ainda n√£o est√£o completas.  Mas o que fazemos aqui retorna uma matriz, onde: <br><br><ul><li>  O primeiro item √© o valor atual do gancho. </li><li>  O segundo elemento √© um objeto que cont√©m as fun√ß√µes usadas para interagir com o gancho. </li></ul><br>  Esta conven√ß√£o permite que voc√™ "renomeie" facilmente o valor atual do Hook - como fazemos acima com <b>myCount</b> . <br><br>  No entanto, voc√™ pode retornar o que quiser do gancho personalizado. <br><br>  No exemplo acima, usamos <b>incremento</b> e <b>decremento</b> como manipuladores <b>onClick</b> em nossa vis√£o.  Quando o usu√°rio pressiona os bot√µes, o contador √© atualizado e exibido novamente (como <b>myCount</b> ) na exibi√ß√£o. <br><br><h2>  Escrevendo testes para ganchos de rea√ß√£o </h2><br>  Para escrever testes para ganchos, usaremos a <b>biblioteca react-testing-</b> test para testes. <br><br>  <b>A biblioteca react-testing-library</b> √© uma solu√ß√£o muito leve para testar componentes do React.  √â uma extens√£o do <b>react-dom</b> e <b>react-dom / test-utils</b> .  O uso da <b>biblioteca de teste de rea√ß√£o</b> garante que seus testes funcionem diretamente com n√≥s DOM. <br><br>  Com ganchos de teste, nem tudo est√° claro ainda.  Atualmente, voc√™ n√£o pode testar o gancho isoladamente.  Em vez disso, voc√™ precisa conectar seu gancho ao componente e testar esse componente. <br><br>  Ent√£o, abaixo, escreveremos testes para nossos Hooks, interagindo com nossos componentes, e n√£o diretamente com Hooks.  A boa not√≠cia √© que nossos testes ter√£o a apar√™ncia de testes regulares do React. <br><br><h3>  Testando o gancho useState () </h3><br>  Vamos ver um exemplo de grava√ß√£o de testes para <b>useState</b> Hook.  No tutorial acima, testamos mais varia√ß√µes do exemplo useState usado acima.  Escreveremos testes para garantir que pressionar o bot√£o "Desligado" define o estado como 0 e pressionar o bot√£o "Ligar" define o estado como 1. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/y4/tc/i7/y4tci7evnak6quqqgjfp1ngdg9m.png"></a> <br><br>  No bloco de c√≥digo acima, come√ßamos importando alguns auxiliares da <b>biblioteca de testes de rea√ß√£o</b> e do componente em teste. <br><br><ul><li>  <b>render</b> , isso ajudar√° a exibir nosso componente.  √â renderizado em um cont√™iner que √© adicionado ao <b>document.body</b> </li><li>  <b>getByTestId</b> obt√©m o elemento DOM <b>por data-testid</b> </li><li>  <b>fireEvent</b> , √© usado para "acionar" eventos DOM.  Ele anexa um manipulador de eventos para <b>documentar</b> e processar alguns eventos DOM por meio da delega√ß√£o de eventos, por exemplo.  clicando em um bot√£o. </li></ul><br>  Al√©m disso, na fun√ß√£o de aprova√ß√£o de teste, configuramos os valores das vari√°veis ‚Äã‚Äãpara elementos com <b>data-testid</b> e seus valores que gostar√≠amos de usar no teste.  Com links para elementos no DOM, podemos usar o m√©todo <b>fireEvent</b> para simular um clique em um bot√£o. <br><br>  O teste verifica se, ao clicar em <b>onButton</b> , o valor do estado √© definido como 1 e, quando voc√™ clica em <b>offButton, o</b> estado √© 1. <br><br><h3>  Testando o gancho useEffect () </h3><br>  Neste exemplo, escreveremos testes para adicionar um produto ao carrinho usando <b>useEffect</b> Hook.  O n√∫mero de itens tamb√©m √© armazenado no localStorage.  O arquivo index.js no CodeSandbox abaixo cont√©m a l√≥gica real usada para adicionar itens ao carrinho. <br><br>  Escreveremos testes para garantir que a atualiza√ß√£o do n√∫mero de itens do carrinho tamb√©m seja refletida no localStorage e, mesmo que a p√°gina seja recarregada, o n√∫mero de itens do carrinho ainda ser√° o mesmo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/74/w8/vj/74w8vjaiwkk_okdrqgrgg4s90bc.png"></a> <br><br>  Na fun√ß√£o que confirma o teste, primeiro definimos <b>cartItem</b> em <b>localStorage</b> como 0, o que significa que o n√∫mero de itens do carrinho √© 0. Em seguida, obtemos o <b>cont√™iner</b> e o <b>renderizador novamente</b> do componente <b>App</b> por meio da desestrutura√ß√£o.  <b>Rerender</b> nos permite simular recargas de p√°gina. <br><br>  Em seguida, obtemos os links para os bot√µes e a tag p, que exibe o valor atual da cesta e os define como vari√°veis. <br><br>  Feito isso, o teste simula um clique no <b>addButton</b> e verifica se o contador atual da cesta √© 1 e recarrega a p√°gina, ap√≥s o que se verifica se <b>localStorage</b> , <b>cartItem</b> est√° definido como 1. Em seguida, simula um clique no <b>resetButton</b> e verifica se o n√∫mero atual de itens do carrinho est√° definido como 0. <br><br><h3>  Testando o gancho useRef () </h3><br>  Neste exemplo, testaremos o <b>uso do</b> gancho <b>Ref</b> , e usaremos o exemplo original do <b>uso</b> acima acima como base para o teste.  <b>UseRef √©</b> usado para obter o valor do campo de entrada e, em seguida, define o valor para o estado.  O arquivo <b>index.js</b> no <b>CodeSandbox</b> abaixo cont√©m a l√≥gica para inserir e enviar um valor. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/zu/m4/yu/zum4yuqeeszwservqx8mzj8ypoy.png"></a> <br><br>  Na fun√ß√£o que aprova o teste, definimos as vari√°veis ‚Äã‚Äãno campo de entrada, uma tag p que exibe o valor atual de ref e um bot√£o de envio.  Tamb√©m definimos o valor que gostar√≠amos de inserir no campo de entrada para a vari√°vel newName.  Isso ser√° usado para verifica√ß√£o no teste. <br><br><img src="https://habrastorage.org/webt/pj/gz/jz/pjgzjzqildkkv6tkasce6xy389c.png"><br><br>  O m√©todo fireEvent.change √© usado para inserir um valor no campo de entrada. Nesse caso, o nome armazenado na constante newName √© usado, ap√≥s o qual o bot√£o de envio √© pressionado. <br><br>  O teste verifica se o valor ref depois de pressionar o bot√£o <b>corresponde ao</b> valor de <b>newName</b> . <br><br>  Por fim, voc√™ ver√° "Nenhum teste falha, parab√©ns!"  mensagem no console. <br><br><h3>  Resposta da comunidade aos ganchos </h3><br>  Desde a introdu√ß√£o do React Hooks, a comunidade ficou encantada com esse recurso e vimos <b>muitos</b> exemplos e exemplos de uso do React Hooks.  Aqui est√£o alguns dos principais: <br><br><ul><li>  Este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> cont√©m uma cole√ß√£o de ganchos de rea√ß√£o. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">react-use</a> , a biblioteca que vem com v√°rios React Hooks. </li><li>  Este exemplo do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CodeSandbox</a> mostra como usar o gancho useEffect para criar anima√ß√µes usando react <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">-spring</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo</a> useMutableReducer que permite simplesmente alterar um estado para atualiz√°-lo em um redutor. </li><li>  Este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">exemplo est√°</a> no CodeSandbox, que mostra um uso integrado complexo da comunica√ß√£o entre pais e filhos e o uso de redisers. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Componente do interruptor dos</a> ganchos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rea√ß√£o</a> </li><li>  Outra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cole√ß√£o de ganchos de rea√ß√£o</a> que possuem ganchos para valores de entrada, orienta√ß√£o do dispositivo e visibilidade do documento. </li></ul><br><br><h3>  Diferentes tipos de ganchos </h3><br>  Existem v√°rios tipos de ganchos que voc√™ pode come√ßar a usar no aplicativo React.  Eles est√£o listados abaixo: <br><br><ul><li>  <b>useState</b> - permite escrever fun√ß√µes puras com acesso ao estado nelas. </li><li>  <b>useEffect</b> - permite realizar efeitos colaterais.  Os efeitos colaterais podem ser chamadas de API, atualiza√ß√£o do DOM, assinatura de manipuladores de eventos. </li><li>  <b>useContext</b> - permite escrever fun√ß√µes puras com o contexto nelas. </li><li>  <b>useReducer</b> - fornece um link para um redutor semelhante ao Redux </li><li>  <b>useRef</b> - permite escrever fun√ß√µes puras que retornam um objeto ref mut√°vel. </li><li> <b>useMemo</b> -      . </li><li> <b>useCallback</b> ‚Äî  Hook     . </li><li> <b>useImperativeMethods</b> -   ,       ref. </li><li> <b>useMutationEffects</b> ‚Äî   useEffect Hook   ,     DOM-. </li><li> <b>useLayoutEffect</b> -       DOM   -. </li><li> <b> hooks</b> -        . </li></ul><br><br><h3>  hooks </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O melhor do Hooks √© que eles funcionam lado a lado com o c√≥digo existente, para que voc√™ possa fazer altera√ß√µes lentamente que implementem o Hooks. Tudo o que voc√™ precisa fazer √© atualizar o React para uma vers√£o que suporta ganchos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, os Hooks ainda s√£o um recurso experimental e a equipe do React alertou repetidamente que a API est√° sujeita a altera√ß√µes. Considere que voc√™ foi avisado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual o significado de ganchos para as aulas? Como a equipe do React relata, as classes ainda permanecem, elas s√£o uma grande parte da base de c√≥digos do React e provavelmente ainda ser√° por algum tempo.</font></font><br><br><blockquote>      .  Facebook      ,  , ,    ,     .    React  Hooks,          ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> </blockquote><br> <b>  API- Hooks   ,    Hooks,   ,      .</b> <br><br><h3>  Recursos Adicionais </h3><br><ul><li>  React      React Hooks,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> </li><li> API    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . </li><li>    RFC,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,       </li></ul><br><br><blockquote> <b>UPD</b> <br>  : <br>      React 16.8   Hooks API.        -: <br> ‚Äî  useMutationEffect. <br> ‚Äî  useImperativeMethods  useImperativeHandle. <br> ‚Äî         useState  useReducer Hooks. <br> ‚Äî      ,   useEffect/useMemo/useCallback Hooks. <br> ‚Äî  Object.is     useState  useReducer. <br> ‚Äî     Strict Mode (DEV-only). <br> ‚Äî  lazy initialization API  useReducer Hook. <br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429712/">https://habr.com/ru/post/pt429712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429702/index.html">Google Analytics Sincroniza√ß√£o de pixels Facebook, VK, Yandex, MyTarget</a></li>
<li><a href="../pt429704/index.html">Conectar armazenamento LUN de caminhos m√∫ltiplos ao Windows Server 2008 e Windows Server 2012</a></li>
<li><a href="../pt429706/index.html">A1: 2017 - Inje√ß√µes (Parte 3 e √öltima)</a></li>
<li><a href="../pt429708/index.html">Parte do programa HolyJS 2018 Moscou</a></li>
<li><a href="../pt429710/index.html">Di√≥xido de carbono na ISS</a></li>
<li><a href="../pt429714/index.html">Mais f√°cil que o MQTT? MQTT / UDP</a></li>
<li><a href="../pt429716/index.html">Os 5 melhores jogos de PC para aprender ingl√™s</a></li>
<li><a href="../pt429718/index.html">Eu quero tudo de uma vez! Estudamos a RAM HyperX Predator DDR4 RGB, com uma frequ√™ncia de 4000 MHz</a></li>
<li><a href="../pt429720/index.html">Como um desenvolvedor iniciante para sobreviver em uma entrevista e n√£o enlouquecer no trabalho</a></li>
<li><a href="../pt429722/index.html">Como fizemos o pagamento via Google Pay no Yandex.Cash [atualizado]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>