<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🏫 👉🏼 🚽 3. Pile élastique: analyse du journal de sécurité. Tableaux de bord ⚰️ 👩🏾‍🏫 👩🏿‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans les articles précédents, nous nous sommes un peu familiarisés avec la pile elk et la configuration du fichier de configuration Logstash pour l'an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>3. Pile élastique: analyse du journal de sécurité. Tableaux de bord</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/482054/"><img src="https://habrastorage.org/webt/1h/r_/da/1hr_dazcr60epg8j9trtakaflhq.png"><br><br>  Dans les articles précédents, nous nous sommes un peu familiarisés avec la pile elk et la configuration du fichier de configuration Logstash pour l'analyseur de journal, dans cet article, nous allons passer à la chose la plus importante du point de vue analytique, ce que vous voulez voir du système et pour tout ce qui a été créé - ce sont des graphiques et des tableaux combinés en <b>tableaux de bord</b> .  Aujourd'hui, nous allons examiner de plus près le <b>système de</b> visualisation <b>Kibana</b> , examiner comment créer des graphiques, des tableaux et, par conséquent, créer un tableau de bord simple basé sur les journaux du pare-feu Check Point. <br><a name="habracut"></a><br>  La première étape du travail avec kibana est de créer un <b>modèle d'index</b> , logiquement, c'est une base de données d'indices qui sont unifiés selon un certain principe.  Bien sûr, ce n'est qu'un paramètre pour que Kibana recherche plus commodément des informations sur tous les indices en même temps.  Il est spécifié en faisant correspondre la chaîne, par exemple, «checkpoint- *» et le nom de l'index.  Par exemple, «checkpoint-2019.12.05» s'adaptera au modèle, mais simplement «checkpoint» n'est plus là.  Il convient de mentionner séparément que vous ne pouvez pas rechercher des informations sur différents modèles d'index en même temps, un peu plus loin dans les articles suivants, nous verrons que les demandes d'API sont effectuées soit par le nom de l'index, soit par une seule ligne du modèle, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/64/nm/tb/64nmtbsfwl-qfysx5n6km6iwr3m.png"></a> <br><br>  Après cela, nous vérifions dans le menu Découvrir que tous les journaux sont indexés et que le bon analyseur est configuré.  Si des incohérences sont détectées, par exemple, en changeant le type de données d'une chaîne en un entier, vous devez modifier le fichier de configuration Logstash, par conséquent, les nouveaux journaux seront enregistrés correctement.  Pour que les anciens journaux prennent la forme souhaitée avant le changement, seul le processus de réindexation aide, dans les articles suivants, cette opération sera examinée plus en détail.  Assurez-vous que tout est en ordre, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/y1/-h/jk/y1-hjkcxrtdpuufzqxqdpqhlvha.png"></a> <br><br>  Les journaux étaient en place, ce qui signifie que vous pouvez commencer à créer des tableaux de bord.  Sur la base des analyses de tableau de bord des produits de sécurité, vous pouvez comprendre l'état de la sécurité des informations dans une organisation, voir clairement les vulnérabilités de la politique actuelle et développer davantage les moyens de les éliminer.  Construisons un petit tableau de bord à l'aide de plusieurs outils de visualisation.  Le tableau de bord comprendra 5 composants: <br><br><ol><li>  tableau de calcul du nombre total de bûches par lames </li><li>  Table de signature critique IPS </li><li>  Graphique circulaire d'événement de prévention des menaces </li><li>  tableau des sites les plus visités </li><li>  schéma d'utilisation des applications les plus dangereuses </li></ol><br>  Pour créer des formes de visualisation, vous devez aller dans le menu <b>Visualiser</b> et sélectionner la forme souhaitée que nous voulons construire!  Allons dans l'ordre. <br><br><h3>  Tableau de calcul du nombre total de bûches par lames </h3><br>  Pour ce faire, sélectionnez la forme du <b>tableau de données</b> , déposez-la dans le composant logiciel enfichable pour créer des graphiques, placez les paramètres de forme à gauche et à droite à quoi ils ressembleront dans les paramètres actuels.  Tout d'abord, je vais montrer à quoi ressemblera le tableau fini, puis passer par les paramètres, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/h6/qh/zs/h6qhzsfawr4qslqtdfybm3zvzsw.png"></a> <br><br>  Paramètres de forme plus détaillés, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/pe/2j/d2/pe2jd28os3xkfs70wi9jl--0kcc.png"></a> <br><br>  Analysons les paramètres. <br><br>  La <b>métrique est</b> initialement configurée, c'est la valeur par laquelle tous les champs seront agrégés.  Les métriques sont calculées en fonction des valeurs extraites d'une manière ou d'une autre des documents.  Les valeurs sont généralement extraites des <b>champs</b> du document, mais peuvent également être générées à l'aide de scripts.  Dans ce cas, entrez <b>Agrégation: Nombre</b> (le nombre total de journaux). <br><br>  Après cela, nous divisons la table en segments (champs) selon lesquels la métrique sera prise en compte.  Le réglage des godets remplit cette fonction, qui à son tour se compose de 2 options de réglage: <br><br><ol><li>  diviser les lignes - ajouter des colonnes et ensuite diviser le tableau en lignes </li><li>  split table - division en plusieurs tables en fonction des valeurs d'un champ spécifique. </li></ol><br>  Dans les <b>compartiments,</b> vous pouvez ajouter plusieurs divisions pour créer plusieurs colonnes ou tables, les limitations ici sont plus logiques.  Dans l'agrégation, vous pouvez choisir par quelle méthode la segmentation se produira: plage ipv4, plage de dates, termes, etc.  Le choix le plus amusant est précisément les <b>termes</b> et les <b>termes</b> <b>significatifs</b> , la division en segments est effectuée en fonction des valeurs d'un certain champ d'index, la différence entre eux est le nombre de valeurs renvoyées et leur affichage.  Puisque nous voulons diviser le tableau par le nom des lames, sélectionnez le champ - <b>product.keyword</b> et définissez la taille au montant de 25 valeurs renvoyées. <br><br>  Au lieu de chaînes, elasticsearch utilise 2 types de données - <b>texte</b> et <b>mot</b> - <b>clé</b> .  Si vous souhaitez effectuer une recherche en texte intégral, vous devez utiliser le type de texte, une chose très pratique lors de l'écriture de votre service de recherche, par exemple, vous recherchez la mention d'un mot dans une valeur de champ spécifique (texte).  Si vous ne voulez qu'une correspondance exacte, vous devez utiliser le type de mot clé.  En outre, le type de données de mot clé doit être utilisé pour les champs qui nécessitent un tri ou une agrégation, c'est-à-dire dans notre cas. <br><br>  En conséquence, Elasticsearch considère le nombre de journaux pendant un certain temps avec une agrégation par valeur dans le champ produit.  Dans l'étiquette personnalisée, nous définissons le nom de la colonne qui sera affichée dans le tableau, définissons la durée pendant laquelle nous collectons les journaux, commençons à dessiner - Kibana envoie une demande à elasticsearch, attend une réponse, puis visualise les données reçues.  La table est prête! <br><br><h3>  Graphique circulaire d'événement de prévention des menaces </h3><br>  Les informations sont particulièrement intéressantes et combien, en général, dans le pourcentage de <b>détecter</b> et de <b>prévenir les</b> réactions aux incidents de sécurité des informations dans la politique de sécurité actuelle.  Dans ce cas, un graphique à secteurs est bien adapté.  Sélectionnez dans Visualiser - <b>Graphique à secteurs</b> .  Toujours dans la métrique, nous définissons l'agrégation par le nombre de journaux.  Dans les compartiments, définissez Termes =&gt; action. <br><br>  Il semble que tout soit correct, mais en conséquence, les valeurs de toutes les lames sont affichées, vous devez filtrer uniquement pour les lames qui fonctionnent sous la prévention des menaces.  Par conséquent, nous devons configurer le <b>filtre</b> afin de rechercher des informations uniquement sur les lames responsables des incidents de sécurité des informations - produit: («Anti-Bot» OU «Nouvel Anti-Virus» OU «DDoS Protector» OU «SmartDefense» OU «Émulation de menace»).  L'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/te/1p/wo/te1pwo7es8c1nnssm5tuhtdfxog.png"></a> <br><br>  Et des paramètres plus détaillés, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/20/yf/xs/20yfxs1tflzd3ja05bulm9s8pco.png"></a> <br><br><h3>  Table d'événements IPS </h3><br>  De plus, il est très important, du point de vue de la sécurité des informations, d'afficher et de vérifier les événements sur les lames <b>IPS</b> et <b>Threat Emulation</b> , qui <b>ne</b> sont <b>pas bloquées par la</b> stratégie actuelle, afin de basculer ultérieurement la signature pour empêcher, ou si le trafic est valide, de ne pas vérifier la signature.  Nous créons la table comme pour le premier exemple, à la différence près que nous créons plusieurs colonnes: protections.keyword, severity.keyword, product.keyword, originsicname.keyword.  Veillez à configurer le filtre afin de rechercher des informations uniquement sur les lames responsables des incidents de sécurité des informations - produit: («SmartDefense» OU «Emulation de menace»).  L'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/gu/pt/q_/guptq_dmmsig3ueo2xoahhgh_ts.png"></a> <br><br>  Paramètres plus détaillés, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/7h/va/ma/7hvamanbqtsl3vvkbk_r_wgpu4e.png"></a> <br><br><h3>  Graphiques des sites les plus visités </h3><br>  Pour ce faire, créez une forme - <b>Barre verticale</b> .  Nous utilisons également le nombre de métriques (l'axe Y), et sur l'axe X, nous utiliserons le nom des sites visités comme nom_appi comme valeurs.  Il y a une petite astuce ici, si vous exécutez les paramètres dans la version actuelle, alors tous les sites seront marqués sur le graphique en une seule couleur, afin de les rendre colorés, nous utilisons le paramètre supplémentaire - "split series", qui vous permet de diviser la colonne finie en quelques valeurs supplémentaires, selon du domaine sélectionné bien sûr!  Cette division peut être utilisée soit comme une colonne multicolore selon les valeurs en mode empilé ou en mode normal afin de créer plusieurs colonnes selon une certaine valeur à partir de l'axe X. Dans ce cas, nous utilisons la même valeur que l'axe X, ce permet de rendre toutes les colonnes multicolores, en haut à droite elles seront indiquées par des couleurs.  Dans le filtre que nous avons défini - produit: "Filtrage d'URL" afin de ne voir que les informations sur les sites visités, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/mm/7z/eu/mm7zeuhxbi7mycsbe9iwhfvj-pi.png"></a> <br><br>  Paramètres: <br><br> <a href=""><img src="https://habrastorage.org/webt/ab/fq/s8/abfqs80dexym6ks4kt_ktyzzzzk.png"></a> <br><br><h3>  Tableau d'utilisation des applications les plus dangereuses </h3><br>  Pour ce faire, créez une forme - Barre verticale.  Nous utilisons également le nombre de métriques (l'axe Y) et sur l'axe X, nous utiliserons le nom des applications utilisées, «appi_name», comme valeurs.  Le plus important est la tâche de filtrage - produit: "Application Control" AND app_risk: (4 OR 5 OR 3) AND action: "accept".  Nous filtrons les journaux par la lame de contrôle des applications, nous prenons uniquement les sites classés comme sites à risque critique, élevé, moyen et uniquement si l'accès à ces sites est autorisé.  L'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/2q/nz/82/2qnz82z39bhtf-eohfvqcfqae-0.png"></a> <br><br>  Paramètres, cliquables: <br><br> <a href=""><img src="https://habrastorage.org/webt/pb/aj/6s/pbaj6sk3l1qbc8cgluy4yiaj1qy.png"></a> <br><br><h3>  Tableau de bord </h3><br>  L'affichage et la création de tableaux de bord se trouvent dans un élément de menu distinct - <b>Tableau de bord</b> .  Ici, tout est simple, un nouveau tableau de bord est créé, la visualisation y est ajoutée, tout est mis à sa place! <br><br>  Nous créons un tableau de bord, selon lequel il sera possible de comprendre la situation de base de l'état de la sécurité de l'information dans l'organisation, bien sûr, uniquement au niveau de Check Point, l'image est cliquable: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/9p/lv/ct9plv4cwbpt6ammjhqmn6x76fe.png"></a> <br><br>  Sur la base de ces graphiques, nous pouvons comprendre quelles signatures critiques ne sont pas bloquées sur le pare-feu, où vont les utilisateurs, quelles sont les applications les plus dangereuses qu'ils utilisent. <br><br><h3>  Conclusion </h3><br>  Nous avons examiné les possibilités de visualisation de base dans Kibana et construit un tableau de bord, mais ce n'est qu'une petite partie.  Plus loin dans le cours, nous examinerons séparément la configuration des cartes, travaillerons avec le système elasticsearch, nous familiariserons avec les requêtes API, l'automatisation et bien plus encore! <br><br>  Alors restez à l'écoute ( <a href="https://t.me/tssolution">Telegram</a> , <a href="https://www.facebook.com/groups/tssolution.info/">Facebook</a> , <a href="https://vk.com/ts_solution">VK</a> , <a href="https://tssolution.ru/blog">TS Solution Blog</a> ), <a href="https://zen.yandex.ru/id/5c7d2162fa818600ae386a52">Yandex.Zen</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482054/">https://habr.com/ru/post/fr482054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482040/index.html">Caractéristiques des programmes de profilage en C ++</a></li>
<li><a href="../fr482042/index.html">Travailler avec la bibliothèque Newtonsoft.Json avec un exemple réel. 2e partie</a></li>
<li><a href="../fr482044/index.html">10 meilleures pratiques pour sécuriser les images Docker. 2e partie</a></li>
<li><a href="../fr482050/index.html">Technique de réduction du réseau de convolution Jedi - élagage</a></li>
<li><a href="../fr482052/index.html">Jeu de données du Nouvel An 2019: dictionnaire tonal ouvert de la langue russe</a></li>
<li><a href="../fr482058/index.html">Prédateur ou proie? Qui protégera les autorités de certification</a></li>
<li><a href="../fr482060/index.html">Modèle de mandat de contrôle d'accès (MAC): présentation et applications</a></li>
<li><a href="../fr482064/index.html">Facilité de développement de sites multilingues sur CMS Umbraco 8</a></li>
<li><a href="../fr482066/index.html">Remplacer la User Story par la Job Story</a></li>
<li><a href="../fr482068/index.html">Dois-je créer une matrice RAID à partir d'un SSD et quels contrôleurs sont nécessaires pour cela</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>