<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”“ ğŸ‘ŒğŸ¼ ğŸŒŸ Panduan Pencatatan Node.js ğŸ¦„ ğŸš¾ ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tugas pertama yang paling sering dihadapi oleh pengembang yang mulai memprogram dalam JavaScript adalah cara mencatat peristiwa dalam log konsol mengg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panduan Pencatatan Node.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/461881/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/o7/dd/qs/o7ddqsvqk7dz2uljo7mz4e-ox2o.png"></div><br>  Tugas pertama yang paling sering dihadapi oleh pengembang yang mulai memprogram dalam JavaScript adalah cara mencatat peristiwa dalam log konsol menggunakan metode <code>console.log</code> .  Dalam mencari informasi tentang debugging kode JavaScript, Anda akan menemukan ratusan artikel blog, serta instruksi tentang StackOverflow, yang memberi tahu Anda untuk "sekadar" menampilkan data ke konsol melalui metode <code>console.log</code> .  Ini adalah praktik yang umum sehingga saya harus memperkenalkan aturan untuk kontrol kualitas kode, seperti <code>no-console</code> , agar tidak meninggalkan entri log acak dalam kode produksi.  Tetapi bagaimana jika Anda perlu secara khusus mendaftarkan suatu acara untuk memberikan informasi tambahan? <br><br>  Artikel ini membahas berbagai situasi di mana Anda perlu memelihara log;  Ini menunjukkan perbedaan antara metode <code>console.log</code> dan <code>console.error</code> di Node.js dan menunjukkan cara meneruskan fungsi logging ke pustaka tanpa membebani konsol pengguna. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/fl/st/fl/flstflpirz79u4y-4nc0ot6yroe.png"><br><br><h3>  Fondasi teoretis untuk bekerja dengan Node.js </h3><br>  Metode <code>console.log</code> dan <code>console.error</code> dapat digunakan di browser dan di Node.js.  Namun, ketika menggunakan Node.js, ada satu hal penting yang perlu diingat.  Jika Anda membuat kode berikut di Node.js menggunakan file bernama <code>index.js</code> , <br><br><img src="https://habrastorage.org/webt/9d/f8/fr/9df8fr10y-luiwbcqp6kizl8-ce.png"><br><br>  dan kemudian jalankan di terminal menggunakan <code>node index.js</code> , maka hasil dari eksekusi perintah akan terletak satu di atas yang lain: <br><br><img src="https://habrastorage.org/webt/rf/n_/wi/rfn_wioub6pircw7tcrgvmt8g4w.png"><br><br>  Terlepas dari kenyataan bahwa mereka tampak serupa, sistem memprosesnya secara berbeda.  Jika Anda melihat bagian operasi <code>console</code> di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Node.js</a> , ternyata <code>console.log</code> mencetak hasilnya melalui <code>stdout</code> , dan <code>console.error</code> mencetak melalui <code>stderr</code> . <br><br>  Setiap proses dapat bekerja dengan tiga aliran ( <code>stream</code> ) secara default: <code>stdin</code> , <code>stdout</code> dan <code>stderr</code> .  Aliran <code>stdin</code> memproses input untuk suatu proses, misalnya, klik tombol atau keluaran diarahkan (lebih lanjut tentang ini di bawah).  Aliran output <code>stdout</code> standar adalah untuk menghasilkan data aplikasi.  Akhirnya, aliran kesalahan <code>stderr</code> standar dirancang untuk menampilkan pesan kesalahan.  Jika Anda perlu mencari tahu untuk apa <code>stderr</code> dan kapan menggunakannya, baca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> . <br><br>  Singkatnya, ini dapat digunakan untuk menggunakan pengalihan ( <code>&gt;</code> ) dan operator pipa ( <code>|</code> ) untuk bekerja dengan kesalahan dan informasi diagnostik secara terpisah dari hasil aktual aplikasi.  Jika operator <code>&gt;</code> memungkinkan Anda untuk mengarahkan output dari hasil perintah ke file, maka menggunakan operator <code>2&gt;</code> Anda dapat mengarahkan output dari stream kesalahan <code>stderr</code> ke file.  Misalnya, perintah ini mengirimkan <i>Halo</i> ke file <code>hello.log</code> , dan <i>Bye bye</i> ke file <code>error.log</code> . <br><br><img src="https://habrastorage.org/webt/cf/xm/se/cfxmsetuf_6ohz4zqoeg_oqsojw.png"><br><br><img src="https://habrastorage.org/webt/ve/ji/i0/vejii0f6_q4zhetko-f9bg1pozy.png"><br><br><h3>  Kapan saya perlu menulis acara ke log? </h3><br>  Sekarang kami telah meninjau aspek teknis yang mendasari penebangan, mari beralih ke berbagai skenario di mana Anda perlu mendaftarkan acara.  Biasanya, skenario ini termasuk dalam salah satu dari beberapa kategori: <br><br><ul><li>  debugging cepat ketika perilaku tak terduga selama pengembangan; </li><li>  logging berbasis browser untuk analisis dan diagnostik; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">logging untuk aplikasi server</a> untuk mendaftarkan permintaan yang masuk dan kemungkinan kesalahan; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memelihara log debug tambahan untuk perpustakaan</a> untuk membantu pengguna memecahkan masalah; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">logout untuk output dari antarmuka baris perintah</a> dan untuk menampilkan pesan di konsol tentang kemajuan operasi, konfirmasi dan kesalahan. </li></ul><br>  Artikel ini hanya membahas tiga skenario terakhir berdasarkan Node.js. <br><br><h3>  Logging untuk aplikasi server </h3><br>  Ada beberapa alasan untuk mencatat peristiwa yang terjadi di server.  Misalnya, mencatat permintaan masuk memungkinkan Anda untuk mendapatkan statistik tentang seberapa sering pengguna menemukan 404 kesalahan, apa yang bisa menjadi alasan untuk ini, atau aplikasi klien <code>User-Agent</code> mana yang sedang digunakan.  Anda juga dapat mengetahui waktu kesalahan terjadi dan penyebabnya. <br><br>  Untuk bereksperimen dengan materi yang diberikan di bagian artikel ini, Anda perlu membuat katalog baru untuk proyek tersebut.  Di direktori proyek, buat <code>index.js</code> untuk kode yang akan digunakan, dan jalankan perintah berikut untuk memulai proyek dan menginstal <code>express</code> : <br><br><img src="https://habrastorage.org/webt/ma/sw/qo/maswqo4k3lr9my_vnkcmrksqxme.png"><br><br>  Kami menyiapkan server dengan middleware, yang akan mendaftarkan setiap permintaan di konsol menggunakan metode <code>console.log</code> .  Kami menempatkan baris berikut di file <code>index.js</code> : <br><br><img src="https://habrastorage.org/webt/pr/y5/js/pry5js_udhlcqeurmmwyld57zky.png"><br><br>  Ini menggunakan <code>console.log('%O', req)</code> untuk mencatat seluruh objek dalam log.  Dari sudut pandang struktur internal, metode <code>console.log</code> menggunakan <code>util.forma</code> t, yang, selain <code>%O</code> mendukung placeholder lain.  Informasi tentang mereka dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Node.js.</a> <br><br>  Ketika menjalankan <code>node index.js</code> untuk memulai server dan beralih ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">localhost</a> : 3000, konsol menampilkan banyak informasi yang tidak perlu: <br><br><img src="https://habrastorage.org/webt/qy/c1/ta/qyc1ta1h1em_xkl0f9683zvesfe.png"><br><br>  Jika sebaliknya menggunakan <code>console.log('%s', req)</code> agar tidak menampilkan objek sepenuhnya, Anda tidak akan mendapatkan banyak informasi: <br><br><img src="https://habrastorage.org/webt/ru/ew/kz/ruewkz1ihxicigymk_oqta9s9gc.png"><br><br>  Anda dapat menulis fungsi logging Anda sendiri, yang hanya akan menghasilkan data yang diperlukan, tetapi pertama-tama Anda harus memutuskan informasi mana yang dibutuhkan.  Terlepas dari kenyataan bahwa fokusnya biasanya pada isi pesan, pada kenyataannya seringkali perlu untuk mendapatkan informasi tambahan, yang meliputi: <br><br><ul><li>  timestamp - untuk mengetahui kapan peristiwa terjadi; </li><li>  nama komputer / server - jika sistem terdistribusi berjalan; </li><li>  pengidentifikasi proses - jika beberapa proses Node berjalan menggunakan, misalnya, <code>pm2</code> ; </li><li>  message - pesan aktual dengan beberapa konten; </li><li>  stack trace - jika ada kesalahan yang dicatat; </li><li>  variabel / informasi tambahan. </li></ul><br>  Selain itu, mengingat bahwa bagaimanapun juga, semuanya adalah output ke <code>stdout</code> dan <code>stderr</code> stream, ada kebutuhan untuk menyimpan jurnal di level yang berbeda, serta mengkonfigurasi dan memfilter entri jurnal tergantung pada level. <br><br>  Ini dapat dicapai dengan mendapatkan akses ke berbagai bagian <code>process</code> dan menulis beberapa baris kode dalam JavaScript.  Namun, Node.js luar biasa karena sudah memiliki ekosistem <code>npm</code> dan beberapa perpustakaan yang dapat digunakan untuk tujuan ini.  Ini termasuk: <br><br><ul><li>  <code>pino</code> ; </li><li>  <code>winston</code> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">roarr</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bunyan</a> (perpustakaan ini belum diperbarui selama dua tahun). </li></ul><br>  Pino sering disukai karena cepat dan memiliki ekosistemnya sendiri.  Mari kita lihat bagaimana <code>pino</code> dapat membantu logging.  Keuntungan lain dari perpustakaan ini adalah paket <code>express-pino-logger</code> , yang memungkinkan Anda untuk mendaftar permintaan. <br><br>  Instal <code>pino</code> dan <code>express-pino-logger</code> : <br><br><img src="https://habrastorage.org/webt/nq/j_/jq/nqj_jqvxgyqqdmfgydf9740la-y.png"><br><br>  Setelah itu, kami memperbarui file <code>index.js</code> untuk menggunakan event logger dan middleware: <br><br><img src="https://habrastorage.org/webt/qw/ge/sq/qwgesqqth2bnxd447led_m35ud8.png"><br><br>  Dalam fragmen ini, kami membuat sebuah instance dari event <code>logger</code> untuk <code>pino</code> dan meneruskannya ke <code>express-pino-logger</code> untuk membuat perangkat lunak logging event lintas platform baru yang dengannya Anda dapat memanggil <code>app.use</code> .  Selain itu, <code>console.log</code> diganti pada <code>logger.info</code> oleh <code>logger.info</code> dan <code>logger.debug</code> ditambahkan ke rute untuk menampilkan berbagai tingkat log. <br><br>  Jika Anda me-restart server dengan berulang kali mengeksekusi <code>node index.js</code> , Anda akan mendapatkan hasil yang berbeda pada output, di mana setiap baris / baris akan menjadi output dalam format JSON.  Sekali lagi, buka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">localhost</a> : 3000 untuk melihat baris baru dalam format JSON. <br><br><img src="https://habrastorage.org/webt/tr/mh/0v/trmh0vi7-h9khu3355byqn5s-pg.png"><br><br>  Di antara data dalam format JSON, Anda dapat menemukan informasi yang disebutkan sebelumnya, seperti cap waktu.  Juga perhatikan bahwa pesan <code>logger.debug</code> tidak ditampilkan.  Untuk membuatnya terlihat, Anda perlu mengubah level log default.  Setelah membuat instance dari registrasi event logger, <code>process.env.LOG_LEVEL</code> ditetapkan.  Ini berarti Anda dapat mengubah nilai atau menerima nilai <code>info</code> default.  <code>LOG_LEVEL=debug node index.js</code> menjalankan <code>LOG_LEVEL=debug node index.js</code> , kami mengubah level log. <br><br>  Sebelum melakukan ini, perlu untuk memecahkan masalah format output, yang tidak nyaman untuk persepsi saat ini.  Langkah ini disengaja.  Menurut filosofi <code>pino</code> , untuk alasan kinerja, perlu untuk mentransfer pemrosesan entri jurnal ke proses terpisah, melewati output (menggunakan operator <code>|</code> ).  Prosesnya melibatkan menerjemahkan output ke dalam format yang lebih nyaman untuk persepsi manusia, atau mengunggahnya ke cloud.  Tugas ini dilakukan oleh alat transfer yang disebut <code>transports</code> .  Lihatlah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> alat <code>transports</code> dan lihat mengapa kesalahan <code>pino</code> tidak dihasilkan melalui <code>stderr</code> . <br><br>  Untuk melihat versi majalah yang lebih mudah dibaca, gunakan alat <code>pino-pretty</code> .  Jalankan di terminal: <br><br><img src="https://habrastorage.org/webt/yi/-b/v6/yi-bv6ct4r1zozscacob9xp5urc.png"><br><br>  Semua entri log ditransfer menggunakan <code>|</code>  siap untuk <code>pino-pretty</code> , karena yang outputnya "dibersihkan", yang hanya akan berisi informasi penting yang ditampilkan dalam warna yang berbeda.  Jika Anda meminta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">localhost</a> : 3000 lagi, pesan <code>debug</code> debugging akan muncul. <br><br><img src="https://habrastorage.org/webt/_p/lb/w1/_plbw1wcxgonrmw4lsyt5ls7cka.png"><br><br>  Agar entri jurnal lebih mudah dibaca atau dikonversi, ada banyak alat transmisi.  Mereka bahkan dapat ditampilkan menggunakan emoji menggunakan <code>pino-colada</code> .  Alat-alat ini akan berguna untuk pengembangan lokal.  Ketika server sedang dalam produksi, mungkin perlu untuk mentransfer data log menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alat lain</a> , menulisnya ke disk menggunakan <code>&gt;</code> untuk diproses lebih lanjut, atau melakukan dua operasi pada saat yang sama menggunakan perintah tertentu, misalnya <code>tee</code> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumen ini</a> juga berbicara tentang memutar file log, memfilter dan menulis data log ke file lain. <br><br><h3>  Penjurnalan perpustakaan </h3><br>  Dengan menjelajahi cara-cara untuk mengatur logging untuk aplikasi server secara efisien, Anda dapat menggunakan teknologi yang sama untuk perpustakaan Anda sendiri. <br><br>  Masalahnya adalah bahwa dalam kasus perpustakaan, Anda mungkin perlu menyimpan log untuk keperluan debugging tanpa memuat aplikasi klien.  Sebaliknya, klien harus dapat mengaktifkan log jika debugging diperlukan.  Secara default, perpustakaan tidak boleh merekam output, memberi pengguna ini hak. <br><br>  Contoh yang baik dari hal ini adalah kerangka kerja <code>express</code> .  Banyak proses terjadi dalam struktur internal framework <code>express</code> , yang dapat menyebabkan minat untuk mempelajarinya lebih dalam selama debugging aplikasi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi untuk kerangka kerja</a> menyatakan bahwa Anda dapat menambahkan <code>DEBUG=express:*</code> ke awal perintah sebagai berikut: <br><br><img src="https://habrastorage.org/webt/ts/ht/a9/tshta9wjl_atyr3wrm11i11fuzu.png"><br><br>  Jika Anda menerapkan perintah ini ke aplikasi yang ada, Anda dapat melihat banyak output tambahan yang akan membantu debugging: <br><br><img src="https://habrastorage.org/webt/tn/ea/pl/tneaplymuzok_eenshb-zv50oiq.png"><br><br>  Informasi ini tidak dapat dilihat kecuali log debug diaktifkan.  Ada paket <code>debug</code> untuk ini.  Ini dapat digunakan untuk menulis pesan di "namespace", dan jika pengguna perpustakaan menyertakan namespace ini atau wildcard yang cocok dengan itu dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">variabel lingkungan</a> <code>DEBUG</code> mereka, pesan akan ditampilkan.  Pertama, Anda perlu menginstal perpustakaan <code>debug</code> : <br><br><img src="https://habrastorage.org/webt/gi/4h/mp/gi4hmppeawcqdpwsncu3g5rqlzs.png"><br><br>  Buat file baru bernama <code>random-id.j</code> yang akan mensimulasikan perpustakaan dan memasukkan kode berikut ke dalamnya: <br><br><img src="https://habrastorage.org/webt/le/fq/cn/lefqcnt7-3nft1klqsjuugnkupa.png"><br><br>  Akibatnya, logger kejadian <code>debug</code> baru akan dibuat dengan <code>mylib:randomid</code> , di mana dua pesan akan didaftarkan.  Kami menggunakannya di <code>index.js</code> dari bagian sebelumnya: <br><br><img src="https://habrastorage.org/webt/bb/cj/ja/bbcjjan7ygf-9z26w8etpccfx8o.png"><br><br>  Jika Anda memulai server lagi, menambahkan <code>DEBUG=mylib:randomid node index.js</code> kali ini, maka entri log debug untuk "pustaka" kami akan ditampilkan: <br><br><img src="https://habrastorage.org/webt/fg/3c/8t/fg3c8tejhceciqntzcb-a1n2xd4.png"><br><br>  Jika pengguna perpustakaan ingin memasukkan informasi debug dalam entri log <code>pino</code> , mereka dapat menggunakan perpustakaan yang disebut <code>pino-debug</code> dibuat oleh perintah <code>pino</code> untuk memformat entri ini dengan benar. <br><br>  Instal perpustakaan: <br><br><img src="https://habrastorage.org/webt/wg/dh/y1/wgdhy11xkqt-e8csfhcrjcctkl8.png"><br><br>  Sebelum menggunakan <code>debug</code> untuk pertama kali, <code>pino-debug</code> harus diinisialisasi.  Cara termudah untuk melakukan ini adalah dengan menggunakan tanda <code>-r</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">atau</a> <code>--require</code> untuk meminta modul sebelum menjalankan skrip.  Kami me-restart server menggunakan perintah (asalkan <code>pino-colada</code> diinstal): <br><br><img src="https://habrastorage.org/webt/l-/ug/yn/l-ugyn16-kzn1hhye_zus2adfkk.png"><br><br>  Akibatnya, entri log debug perpustakaan akan ditampilkan dengan cara yang sama seperti di log aplikasi: <br><br><img src="https://habrastorage.org/webt/-y/n8/7e/-yn87ertfjgensbyew95aaz8f7y.png"><br><br><h3>  Output Antarmuka Baris Perintah (CLI) </h3><br>  Kasus terakhir yang dibahas oleh artikel ini adalah masuk ke antarmuka baris perintah.  Lebih disukai, log yang merekam peristiwa yang berkaitan dengan logika program disimpan terpisah dari log untuk mendaftarkan data antarmuka baris perintah.  Untuk merekam peristiwa apa pun yang terkait dengan logika program, Anda perlu menggunakan pustaka tertentu, misalnya <code>debug</code> .  Dalam hal ini, Anda dapat menggunakan kembali logika program tanpa dibatasi pada satu skenario menggunakan antarmuka baris perintah. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dengan membuat antarmuka baris perintah menggunakan Node.js</a> , Anda dapat menambahkan berbagai warna, blok nilai variabel, atau alat pemformatan untuk memberikan tampilan yang menarik secara visual kepada antarmuka.  Namun, Anda perlu mengingat beberapa skenario. <br><br>  Menurut salah satu dari mereka, antarmuka dapat digunakan dalam konteks sistem integrasi kontinu (CI), dalam hal ini lebih baik untuk meninggalkan pemformatan warna dan presentasi hasil yang terlalu banyak secara visual.  Beberapa sistem integrasi berkelanjutan memiliki flag <code>CI</code> ditetapkan.  Anda dapat memverifikasi bahwa Anda berada dalam sistem integrasi berkelanjutan menggunakan paket <code>is-ci</code> , yang mendukung beberapa sistem seperti itu. <br><br>  Beberapa perpustakaan, seperti <code>chalk</code> , mendefinisikan sistem integrasi berkelanjutan dan mengganti output teks berwarna ke konsol.  Mari kita lihat cara kerjanya. <br><br>  Instal <code>chalk</code> dengan perintah <code>install chalk</code> npm dan buat file bernama <code>cli.js</code>  Masukkan baris berikut dalam file: <br><br><img src="https://habrastorage.org/webt/6c/oa/u-/6coau-msy3lievszm36fvfaeffi.png"><br><br>  Sekarang, jika Anda menjalankan skrip ini menggunakan <code>node cli.js</code> , hasilnya akan disajikan menggunakan warna yang berbeda: <br><br><img src="https://habrastorage.org/webt/nn/zf/rl/nnzfrlbh5jqiyoqfn-m2b3j2ff8.png"><br><br>  Tetapi jika Anda menjalankan skrip menggunakan <code>CI=true node cli.js</code> , pemformatan warna teks akan dibatalkan: <br><br><img src="https://habrastorage.org/webt/iz/fg/cs/izfgcsne498gjwybmd_3f7p9ap0.png"><br><br>  Dalam skenario lain yang patut diingat, <code>stdout</code> berjalan dalam mode terminal, yaitu  data adalah output ke terminal.  Dalam hal ini, hasilnya dapat ditampilkan dengan baik menggunakan <code>boxen</code> .  Kalau tidak, output kemungkinan besar akan diarahkan ke file atau di tempat lain. <br><br>  Anda dapat memeriksa operasi <code>stdin</code> , <code>stdout</code> atau <code>stderr</code> stream dalam mode terminal dengan melihat atribut <code>isTTY</code> dari aliran yang sesuai.  Misalnya, <code>process.stdout.isTTY</code> .  <code>TTY</code> berarti "teletypewriter" dan dalam hal ini dirancang khusus untuk terminal. <br><br>  Nilai dapat bervariasi untuk masing-masing dari tiga utas, tergantung pada bagaimana proses Node.js dimulai.  Informasi terperinci tentang ini dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Node.js, di bagian â€œInput / output prosesâ€</a> . <br><br>  Mari kita lihat bagaimana nilai <code>process.stdout.isTTY</code> bervariasi dalam situasi yang berbeda.  <code>cli.js</code> file <code>cli.js</code> untuk memeriksanya: <br><br><img src="https://habrastorage.org/webt/ha/qh/gl/haqhglnf6rs38hn6gxl2_ihnntw.png"><br><br>  Sekarang jalankan <code>node cli.js</code> di terminal dan lihat kata <code>true</code> , setelah itu pesan ditampilkan dalam font berwarna: <br><br><img src="https://habrastorage.org/webt/i8/z2/gx/i8z2gxbba0zk1cm5cnk4gxzkqbq.png"><br><br>  Setelah itu, kita kembali menjalankan perintah, tetapi mengarahkan output ke file, dan kemudian melihat isinya: <br><br><img src="https://habrastorage.org/webt/sb/8b/sf/sb8bsftkufhbufqrmj_a2fkg4jk.png"><br><br>  Kali ini, kata <code>undefined</code> muncul di terminal, diikuti oleh pesan yang ditampilkan dalam font tidak berwarna, karena aliran <code>stdout</code> mengarahkannya keluar dari mode terminal.  Di sini <code>chalk</code> menggunakan alat <code>supports-color</code> , yang dari sudut pandang struktur internal memeriksa <code>isTTY</code> aliran yang sesuai. <br><br><img src="https://habrastorage.org/webt/2n/8j/bs/2n8jbshyf2a9qdqpt7ihez8hcsy.png"><br><br>  Alat-alat seperti <code>chalk</code> melakukan hal-hal ini sendiri.  Namun, ketika mengembangkan antarmuka baris perintah, Anda harus selalu waspada terhadap situasi ketika antarmuka bekerja dalam sistem integrasi berkelanjutan atau output dialihkan.  Alat-alat ini membantu Anda menggunakan antarmuka baris perintah di tingkat yang lebih tinggi.  Misalnya, data di terminal dapat diatur dengan cara yang lebih terstruktur, dan jika <code>isTTY</code> tidak <code>undefined</code> , beralihlah ke cara analisis yang lebih sederhana. <br><br><h3>  Kesimpulan </h3><br>  Mulai menggunakan JavaScript dan memasukkan baris pertama di log konsol menggunakan <code>console.log</code> cukup sederhana.  Tetapi sebelum Anda menyebarkan kode dalam produksi, Anda harus mempertimbangkan beberapa aspek menggunakan log.  Artikel ini hanya pengantar berbagai metode dan solusi yang digunakan dalam mengatur log peristiwa.  Itu tidak mengandung semua yang perlu Anda ketahui.  Oleh karena itu, disarankan untuk memperhatikan proyek open source yang sukses dan memantau bagaimana mereka memecahkan masalah logging dan alat apa yang digunakan.  Dan sekarang coba login sendiri tanpa mengeluarkan data ke konsol. <br><br><div style="text-align:center;"><img src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/original_images/mDf8ceyn8JviZCtuUmtELF8nB0-JFgfvtuRqE6kGRq_9OBdN54bcmQNMKDJ_YdFPOuqO5T_pSHHKV4"></div><br><br>  Jika Anda tahu alat lain yang layak disebut, tulislah di komentar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461881/">https://habr.com/ru/post/id461881/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461871/index.html">101 tips untuk menjadi programmer yang baik (dan manusia)</a></li>
<li><a href="../id461873/index.html">ViewPager 2 - fungsionalitas baru di bungkus lama</a></li>
<li><a href="../id461875/index.html">5 nm vs 3 nm</a></li>
<li><a href="../id461877/index.html">Java vs Kotlin untuk Android: pendapat pengembang</a></li>
<li><a href="../id461879/index.html">Buku "Linux beraksi"</a></li>
<li><a href="../id461885/index.html">EDS adalah jenis penipuan lainnya</a></li>
<li><a href="../id461887/index.html">Memasuki Aeronet Episode 2: Dring Homing</a></li>
<li><a href="../id461891/index.html">Bagaimana kami berteman di infrastruktur bank menggunakan ManageIQ</a></li>
<li><a href="../id461895/index.html">Learn While Travel - bagaimana kami melaju pada Hari Analisis Bisnis Eropa pertama</a></li>
<li><a href="../id461897/index.html">Bagaimana kami menjaga stabilitas aplikasi Lamoda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>