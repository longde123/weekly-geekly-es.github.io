<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüöí üë±üèø üë®üèæ‚Äçüíª Hacemos una aplicaci√≥n de escritorio nativa multiplataforma en Angular üí¢ üò∞ üë®‚Äçüë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como probablemente ya sepa, Angular ya existe en muchas plataformas: 


- Ionic ( https://ionicframework.com/ ) 
- NativeScript ( https://www.nativesc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hacemos una aplicaci√≥n de escritorio nativa multiplataforma en Angular</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480396/"><p><img src="https://habrastorage.org/getpro/habr/post_images/f3f/72b/000/f3f72b000ad7efa23f81443c177b5209.png" alt="angular-nodegui"></p><br><p>  Como probablemente ya sepa, Angular ya existe en muchas plataformas: </p><br><ul><li>  Ionic ( <a href="https://ionicframework.com/" rel="nofollow">https://ionicframework.com/</a> ) </li><li>  NativeScript ( <a href="https://www.nativescript.org/" rel="nofollow">https://www.nativescript.org/</a> ) </li><li>  NestJs ( <a href="https://nestjs.com/" rel="nofollow">https://nestjs.com/</a> ) </li><li>  Universal ( <a href="https://github.com/angular/universal" rel="nofollow">https://github.com/angular/universal</a> ) </li><li>  Terminal de plataforma, aplicaci√≥n de consola ( <a href="https://github.com/Tibing/platform-terminal" rel="nofollow">https://github.com/Tibing/platform-terminal</a> ) </li></ul><br><p>  Bueno, por supuesto, no hab√≠a suficiente escritorio aqu√≠ (no hablemos de Electron todav√≠a). </p><a name="habracut"></a><br><p> Para crear aplicaciones de escritorio, hay muchas soluciones que usan plantillas, por ejemplo, soluciones como JavaFx, Qt, WPF.  Todos ellos, excepto el √∫ltimo, son multiplataforma. </p><br><p>  Pero, ¬øqu√© pasar√≠a si quisi√©ramos usar el marco familiar y hacer una aplicaci√≥n nativa en √©l?  En realidad, eso fue lo que hice. </p><br><p>  Para empezar, mir√© lo que est√° disponible actualmente y lo que ya se pudo haber hecho en Angular. </p><br><blockquote>  De hecho, de esta manera quiero demostrar que puedes hacer cualquier cosa en Angular, y durante varios a√±os he estado haciendo todo tipo de <a href="https://gist.github.com/irustm/b0de33afa58dfb4ca1c0791dab051929" rel="nofollow">cosas por √©l</a> . </blockquote><br><h2 id="poisk">  Buscar </h2><br><h3 id="libui-node">  nodo libui </h3><br><p>  Es una biblioteca GUI liviana y port√°til que aprovecha las caracter√≠sticas nativas de la GUI para cada plataforma que admite.  Viene como una alternativa al electr√≥n. </p><br><p>  Un ejemplo de aplicaci√≥n simple: </p><br><pre><code class="plaintext hljs">const win = new libui.UiWindow('Test window', 800, 600, false);</code> </pre> <br><p>  Bajo el cap√≥, √©l tiene simples carpetas de libui.  (libui: una biblioteca GUI port√°til para C).  Todo esto est√° pasando por node-gyp, una utilidad dise√±ada para compilar extensiones nativas para Node.js.  libui-node incluye m√°s de 30 componentes listos, bueno, y si de repente decides crear algo personalizado, necesitar√°s sumergirte en el c√≥digo en C. Y adem√°s, los componentes en s√≠ mismos se escribieron hace 2 a√±os, y desde entonces actualizado  Quiz√°s todo es tan bueno que no hay necesidad de hacer cambios, y estos 30 componentes son suficientes para el desarrollo, bueno, o nadie necesita el proyecto en absoluto. </p><br><p>  Bueno, en realidad, la aplicaci√≥n final puede verse as√≠: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/770/479/1d6/7704791d6885a578edae404b43de415a.png" alt="nodo libui">  <em>nodo libui</em> </p><br><h3 id="proton-native-i-vuido">  <strong>Proton-native y Vuido</strong> </h3><br><p>  Y aqu√≠ es un poco m√°s interesante, proton-native y vuido es el mismo nodo libui, solo bajo React y Vue.  Los contenedores correspondientes est√°n escritos bajo los componentes de libui-node.  A pesar de la cantidad de estrellas en github (9k y 6k), los proyectos est√°n abandonados y casi nadie los usa.  De todo lo que pude encontrar, estas fueron aplicaciones muy simples.  Otro problema que <a href="https://github.com/mimecorg/vuido/issues/62" rel="nofollow">descubr√≠</a> son los problemas con la personalizaci√≥n de la propia interfaz de usuario, es imposible hacerlo dentro de libui, y el autor del proyecto est√° considerando reescribir todo en Qt. </p><br><blockquote>  Libui en s√≠ es bastante popular para escribir todo tipo de enlaces, los entusiastas lo arrastraron incluso en <a href="https://github.com/krakjoe/ui" rel="nofollow">php</a> </blockquote><p>  La aplicaci√≥n final puede verse as√≠: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b45/454/19a/b4545419a7f7cec8ec108b31ce712696.png" alt="Nativo de protones">  <em>Nativo de protones</em> </p><br><p>  Una interfaz bastante aburrida sin personalizaci√≥n, por lo que esta opci√≥n desapareci√≥ de inmediato. </p><br><h2 id="a-mozhet-vzyat-qt">  O tal vez tomar Qt? </h2><br><h3 id="qt-js-css">  Qt, js, css </h3><br><p>  Por supuesto que escuch√≥ sobre Qt y el hecho de que se puede encontrar en todas partes, pero no muchos han escuchado que ahora est√° integrado con Javascript fuera de la caja.  QML permite la construcci√≥n declarativa de interfaces de usuario utilizando ligantes de propiedades y, por lo tanto, expandiendo la capacidad de los elementos QML existentes.  Por supuesto, este es Javascript m√°s riguroso que en la web.  Puede escribir algo similar a ES5 utilizando objetos QML, pero no tendr√° una API DOM. </p><br><p>  Solo una nota r√°pida, ¬øc√≥mo escribir√≠as en Qt bajo C ++: </p><br><pre> <code class="plaintext hljs">#include &lt;QApplication&gt; #include &lt;QPushButton&gt; int main(int argc, char *argv[]) { QApplication app(argc, argv); *// Important * QPushButton hello("Hello world!"); hello.resize(100, 30); hello.show(); return app.exec(); *// Important *}</code> </pre> <br><p>  C√≥mo se ver√≠a su c√≥digo en Qml: </p><br><pre> <code class="plaintext hljs">Item { function factorial(a) { a = parseInt(a); if (a &lt;= 0) return 1; else return a * factorial(a - 1); } MouseArea { anchors.fill: parent onClicked: console.log(factorial(10)) } }</code> </pre> <br><p>  Estos componentes se pueden crear din√°micamente. </p><br><p>  QML tambi√©n tiene un sistema de <a href="https://doc.qt.io/qt-5/qmltypes.html" rel="nofollow">tipo</a> grande, que sin duda ser√° √∫til al definir todo esto en Typecript. </p><br><p>  Tambi√©n puede personalizar f√°cilmente los componentes: </p><br><pre> <code class="plaintext hljs">Reactangle { id: redRectId width: 50 color: red }</code> </pre> <br><p>  Casi CSS, ¬øno? </p><br><p>  Todo lo que queda por agregar es lo que Qt puede hacer en la mayor√≠a de las plataformas. </p><br><h2 id="a-nam-by-esche-nodejs">  Y tendr√≠amos Node.js </h2><br><p>  Al buscar ‚Äúnodejs + qt‚Äù, obtendremos inmediatamente <a href="https://github.com/arturadib/node-qt" rel="nofollow">node-qt</a> , pero inmediatamente llama la atenci√≥n que el producto ha estado muerto hace mucho tiempo, y la √∫ltima vez mostr√≥ signos de vida hace 8 a√±os. </p><br><p>  Sin embargo, en la b√∫squeda puede encontrar un proyecto muy nuevo: NodeGui. </p><br><h3 id="nodegui">  NodeGui </h3><br><p>  Al igual que muchas bibliotecas para Gui, Qt usa su bucle de evento / mensaje para procesar eventos desde widgets.  Por lo tanto, cuando llamamos condicionalmente a app.exec (), Qt inicia el bucle de mensajes y lo bloquea all√≠.  Todo esto es bueno cuando solo hay un bucle de mensaje en toda la aplicaci√≥n.  Pero dado que necesitamos usar Qt con NodeJs, y este √∫ltimo tambi√©n tiene su propio bucle de eventos, es imposible integrarlos tan f√°cilmente.  Pero tales decisiones ya se han tomado, por ejemplo, el mismo paquete con Electron o yode.  Estas soluciones tienen su propia peculiaridad, generan al menos 2 procesos: para el hilo principal y para el renderizador.  A pesar de esto, este enfoque tiene una ganancia significativa, no es necesario modificar NodeJs o Chromium. </p><br><p>  En el caso de NodeGui, la situaci√≥n es ligeramente diferente, hay un proceso para todo y, por lo tanto, no hay necesidad de buscar eventos entre procesos.  Nodejs se bifurc√≥ para esto, y se realizaron mejoras menores en las carpetas necesarias en Qt.  Y ahora necesita comenzar el proceso no de la forma habitualnode main.js, sino qode main.js.  Afortunadamente, qode se publica como un m√≥dulo npm en el paquete @ nodegui / qode.  Para comenzar un mundo hola simple, necesita instalar algunos paquetes m√°s, para obtener m√°s detalles sobre cada sistema operativo, consulte el sitio web oficial: <a href="https://docs.nodegui.org/docs/guides/getting-started" rel="nofollow">https://docs.nodegui.org/docs/guides/getting-started</a> </p><br><p>  Por defecto, en nodegui, todo es un widget, y se pueden atornillar a varias plantillas.  Actualmente hay 2 tipos de plantillas en nodegui: FlexLayout y QGridLayout. </p><br><p>  <strong>Estilos en Nodegui</strong> </p><br><p>  Por el momento, puede establecer estilos para widgets tanto en l√≠nea como a trav√©s de styleSheet. </p><br><pre> <code class="plaintext hljs">widget.setInlineStyle(`color: green`) view.setStyleSheet(` `#helloLabel { color: red; padding: 10px; } #worldLabel { color: green; padding: 10px; } #rootView { background-color: black; } `);</code> </pre> <br><p>  Qt por defecto admite todos los selectores CSS2 ( <a href="https://doc.qt.io/qt-5/stylesheet-syntax.html" rel="nofollow">https://doc.qt.io/qt-5/stylesheet-syntax.html#selector-types</a> ) </p><br><p>  Tampoco lo hace sin propiedades personalizadas para los componentes de estilo.  Afortunadamente, tales propiedades ya se describen en los muelles de Qt y se mastican en stackoverflow. </p><br><pre> <code class="plaintext hljs">*QPushButton* { qproperty-iconsize: 20px 20px; }</code> </pre> <br><h2 id="angular">  Angular </h2><br><blockquote>  El autor del proyecto ya ha implementado el soporte para reaccionar, pero por supuesto, todos olvidaron la existencia de Angular. </blockquote><p>  Como ya se escribi√≥ al principio, Angular puede hacer la mayor√≠a de las plataformas, pero hasta ahora no ha habido una plataforma para el escritorio.  Debido a la API Angular bien dise√±ada y estructurada, la implementaci√≥n de nodegui para Angular se reduce a escribir una plataforma personalizada BrowserDynamics con Renderer y reemplazarlos en la aplicaci√≥n. </p><br><p>  <strong>Pero, ¬øc√≥mo funciona todo de adentro hacia afuera?</strong> </p><br><p>  Tenemos un main.ts condicional, y comenzaremos con √©l. </p><br><p>  El proceso de arranque consta de dos partes: crear una plataforma y lanzar un m√≥dulo de inicio. </p><br><pre> <code class="plaintext hljs">platformBrowserDynamic().bootstrapModule(AppModule);</code> </pre> <br><p>  A trav√©s de createPlatformFactory podemos crear absolutamente cualquier plataforma que necesite.  Para nosotros, esto significa que no queremos trabajar con el DOM habitual y, adem√°s, repasaremos la descripci√≥n del esquema de interacci√≥n de elementos al trabajar con el render.  Puede encontrar m√°s informaci√≥n sobre la creaci√≥n de la plataforma en la fuente. </p><br><p>  En el m√≥dulo de inicio, describimos qu√© componente representar primero.  Al crear una instancia de un componente, Angular llama <code>renderComponent</code> y, asoci√°ndolo con el render deseado que recibe, con esa instancia del componente.  Todo lo que Angular har√° con respecto a la representaci√≥n de componentes (crear elementos, establecer atributos, suscribirse a eventos, etc.) pasar√° por este renderizador.  Por lo tanto, debemos reemplazar la RendererFactory. </p><br><p>  En primer lugar, en Renderer nos interesar√° el m√©todo createElement.  En este m√©todo, obtenemos el nombre de la etiqueta y, a partir de ella, necesitamos crear el componente deseado.  Afortunadamente, nodegui tiene un conjunto b√°sico de componentes, que port√© cuidadosamente y describ√≠ c√≥mo se representar√°n en el marco de Angular, arrojando todo al directorio general de componentes.  Otras acciones con componentes est√°ndar tambi√©n pasar√°n por este renderizador.  <a href="" rel="nofollow">M√°s detalles</a> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cee/24b/6ef/cee24b6ef9d13815c2640dc6dc80c5dd.png" alt="[https://blog.nrwl.io/‚Ä†(https://blog.nrwl.io/)">  <em><a href="https://blog.nrwl.io/" rel="nofollow">https://blog.nrwl.io/</a></em> </p><br><p>  Para escuchar eventos en el renderizador, se lanza el nombre del evento y para estos componentes colgamos el eventListener habitual. </p><br><pre> <code class="plaintext hljs">listen(target: any, eventName: string, callback: (event: any) =&gt; boolean | void): () =&gt; void { const callbackFunc = (e: NativeEvent) =&gt; callback.call(target, e); target.addEventListener(eventName, callbackFunc); return () =&gt; target.removeEventListener(eventName, callbackFunc); }</code> </pre> <br><p>  Los eventos de componentes son exactamente los mismos que Qt, por ejemplo, en lugar del usual <code>(click)=‚ÄùclickFunc($event)‚Äù</code> debe escribir <code>(clicked) = ‚ÄùclickFunc($event)‚Äù</code> . </p><br><p>  Actualmente hay 16 componentes est√°ndar disponibles.  Pero si necesita escribir su componente personalizado, siempre existe la oportunidad de hacerlo a trav√©s de QWidget. </p><br><p>  Tambi√©n se hizo un enrutador para hacer que nuestra aplicaci√≥n sea lo m√°s compatible posible con Angular. </p><br><pre> <code class="plaintext hljs">const appRoutes: Routes = [ { path: 'home', component: HomeComponent }, { path: 'about', component: AboutComponent } ]; // AppModule imports ... NodeguiRouterModule.forRoot(appRoutes),</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/342/601/fdc/342601fdc2e1966941b62b6344ff0199.png" alt="Aplicaci√≥n angular nodegui"><br>  <em>Aplicaci√≥n angular nodegui</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/102/1bf/dc7/1021bfdc7072181099313790edfdc408.png" alt="aplicaci√≥n meteorol√≥gica"><br>  <em>aplicaci√≥n meteorol√≥gica</em> </p><br><h2 id="sobiraem-v-prod">  Recopilamos en prod </h2><br><p>  Para construir una aplicaci√≥n lista para usar, nodegui tiene su propio empaquetador - <code>@nodegui/packer.</code> </p><br><p>  La utilidad es muy simple, hasta ahora consta de 2 equipos. </p><br><p>  <em>npx nodegui-packer - init myapp</em> </p><br><p>  Este comando crear√° una carpeta de empaque que contiene la plantilla.  Puede cambiar el contenido para agregar un icono, cambiar el nombre, la descripci√≥n y otra informaci√≥n de la aplicaci√≥n, as√≠ como agregar las dependencias necesarias. </p><br><p>  <em>npx nodegui-packer - paquete</em> <br></p><p>  Este comando inicia la herramienta necesaria para empaquetar (por ejemplo, macdeployqt para mac) y empaqueta las dependencias. </p><br><h2 id="v-zaklyuchenie">  En conclusi√≥n </h2><br><p>  En conclusi√≥n, quiero comparar los resultados con otras soluciones web en el escritorio (resultados del lanzamiento en Mac OS). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ba5/cec/b59/ba5cecb59da4212fed93ef4d22bc55e2.png" alt="tama√±o de descarga">  <em>tama√±o de descarga</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1a0/aeb/2be/1a0aeb2bec9bc454066d7ded783e3bdb.png" alt="uso de memoria">  <em>uso de memoria</em> </p><br><br><p>  Enlace al proyecto: <br>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow"><strong>irustm / angular-nodegui</strong></a> <a href="https://github.com/irustm/angular-nodegui" rel="nofollow"><br></a>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow">* Cree aplicaciones de escritorio performantes, nativas y multiplataforma con Angular.</a>  <a href="https://github.com/irustm/angular-nodegui" rel="nofollow">Angular NodeGUI es impulsado por Angular</a> </p><br><p>  Informaci√≥n sobre el proyecto: <br>  <a href="https://t.me/ngFanatic" rel="nofollow">https://t.me/ngFanatic</a> </p><br><p>  Informaci√≥n sobre mis proyectos de c√≥digo abierto <br>  <a href="https://twitter.com/irustm" rel="nofollow">https://twitter.com/irustm</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/480396/">https://habr.com/ru/post/480396/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480378/index.html">14 proyectos de c√≥digo abierto para bombear habilidades de ciencia de datos (f√°cil, normal, dif√≠cil)</a></li>
<li><a href="../480386/index.html">Copias de seguridad autom√°ticas de equipos de red y su almacenamiento en el sistema de control de versiones</a></li>
<li><a href="../480390/index.html">ONYX BOOX Livingstone: un lector de un formato popular en un dise√±o inusual</a></li>
<li><a href="../480392/index.html">Conferencia HACKTIVITY 2012. The Big Bang Theory: The Evolution of Pentesting in Enhanced Security. Parte 2</a></li>
<li><a href="../480394/index.html">Entrada de contabilidad duplicada en una base de datos relacional</a></li>
<li><a href="../480398/index.html">9 consejos JavaScript muy √∫tiles</a></li>
<li><a href="../480400/index.html">¬øKubernetes es el nuevo Linux? Entrevista con Pavel Selivanov</a></li>
<li><a href="../480402/index.html">¬øC√≥mo pÃ∂–µÃ∂—Ä T–≤Ã∂—ãÃ∂–πÃ∂ el segundo mitap de Android de Tinkoff</a></li>
<li><a href="../480404/index.html">Mikrotik y Linux. Rutina y Automatizaci√≥n</a></li>
<li><a href="../480408/index.html">52 conjuntos de datos para proyectos de capacitaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>