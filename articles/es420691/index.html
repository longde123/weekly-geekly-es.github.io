<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Kivy Xamarin Reaccionar nativo. Tres marcos: un experimento   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un saludo a todos! Tan pronto como el humo de la acalorada discusi贸n en los comentarios a mi art铆culo, Kivy es un marco burro para el desarrollo multi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kivy Xamarin Reaccionar nativo. Tres marcos: un experimento</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420691/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/ph/zy/zsphzyh0mmbmfwzsfmkdi5tff4w.png"></div><br>  Un saludo a todos!  Tan pronto como el humo de la acalorada discusi贸n en los comentarios a mi art铆culo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kivy es un marco burro para el desarrollo multiplataforma No. 1</a> , y entre otros lo hizo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un comentario digno de atenci贸n</a> , nosotros ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Mirimon</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">SeOd</a> ) pensamos que ser铆a interesante para nosotros y los lectores comparar Kivy, Xamarin.Forms y React Native, escribiendo la misma aplicaci贸n en ellos, lo acompa帽an con el art铆culo correspondiente sobre Habr茅, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">activa GitHub</a> y te dice honestamente qui茅n enfrent贸 las dificultades durante la implementaci贸n.  Despu茅s de reunirnos en el Telegram y haber discutido los detalles, nos pusimos a trabajar. <a name="habracut"></a><br><br>  Para esta comparaci贸n, decidimos escribir un programador de tareas simple con tres pantallas.  Hacer un corte del estado de estas tres plataformas hoy, usando el ejemplo de algo m谩s voluminoso que el ejemplo que hemos elegido, porque todos est谩n ocupados en sus proyectos / en el trabajo / en casa, lleva demasiado tiempo.  A pesar de la simplicidad de nuestra aplicaci贸n, le permitir谩 demostrar claramente los principios del desarrollo de aplicaciones en cada entorno, trabajar con datos, IU, etc. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tres marcos: un experimento.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Xamarin.Forms.</b></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Parte 2</b></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tres marcos: un experimento.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Reaccionar nativo.</b></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Parte 3</b></a> <br><br>  Este art铆culo es el primero en el ciclo, por lo que quiero comenzar con los ToR, que esbozamos para nosotros, para que el resultado sea similar. <br><br><h3>  Opci贸n TK: </h3><br><ul><li>  Las notas deben estar estructuradas por proyecto. </li><li>  Las notas pueden ser agregadas por diferentes personas, por lo que se debe indicar el autor de la nota </li><li>  Las notas dentro del proyecto se deben agregar / eliminar / editar. </li><li>  Las notas deben ser del tama帽o del contenido, pero no m谩s de 150 p铆xeles. </li><li>  La eliminaci贸n de notas debe realizarse tanto a trav茅s del men煤 contextual de la nota como a trav茅s de deslizar </li></ul><br><h3>  Un ejemplo de interfaz de usuario deber铆a verse as铆: </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9a/59/pe/9a59pegwbpwor9yytkfxwxqd_ue.png"></div><br><div class="spoiler">  <b class="spoiler_title">Antes de comenzar, un poco de ayuda en Kivy:</b> <div class="spoiler_text">  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kivy</a> es un marco de gr谩ficos multiplataforma escrito en el lenguaje de programaci贸n Python / Cython, basado en OpenGL ES 2, destinado a crear interfaces de usuario modernas, m谩s enfocadas en trabajar con dispositivos t谩ctiles.</i>  <i>Las aplicaciones Kivy se ejecutan en plataformas como Linux, OS X, Windows, Android, iOS y Rapberry Pi.</i>  <i>En desarrollo, tiene acceso a una amplia gama de bibliotecas de Python que van desde Solicitudes hasta NumPy y OpenCV.</i>  <i>Kivy tiene acceso a casi todas las API m贸viles nativas (GPS, c谩mara, aceler贸metro, API de Google para Android), a trav茅s de PyJNIus (Android) y PyOBJus (iOS), que envuelven autom谩ticamente el c贸digo Java / Objective-C en Python .</i> <i><br><br></i>  <i>Kivy es r谩pido.</i>  <i>Esto se aplica tanto al desarrollo de la aplicaci贸n como a la velocidad de ejecuci贸n de la aplicaci贸n.</i>  <i>Todas las funciones cr铆ticas se implementan en el nivel C.</i>  <i>Kivy tambi茅n usa la GPU donde sea que tenga sentido.</i>  <i>La GPU hace la mayor parte del trabajo, aumentando considerablemente el rendimiento.</i> <i><br><br></i>  <i>Kivy es muy flexible.</i>  <i>Esto significa que el r谩pido desarrollo de Kivy le permite adaptarse instant谩neamente a las nuevas tecnolog铆as.</i>  <i>Los desarrolladores de Kivy han agregado repetidamente soporte para nuevos dispositivos externos y protocolos de software, a veces incluso antes de su lanzamiento.</i>  <i>Kivy se puede usar junto con muchas soluciones de terceros diferentes.</i>  <i>Por ejemplo, en Windows, Kivy admite WM_TOUCH, lo que significa que cualquier dispositivo con controladores Windows 7 Pen &amp; Touch funcionar谩 con Kivy.</i>  <i>En OS X, puede usar dispositivos Apple con soporte Multi-Touch, como trackpads y mouse.</i>  <i>En Linux, puede usar eventos de entrada de entrada HID.</i>  <i>Adem谩s, Kivy admite TUIO (objetos tangibles de interfaz de usuario) y una serie de otras fuentes de entrada.</i> <i><br><br></i>  <i>Puede escribir una aplicaci贸n simple con unas pocas l铆neas de c贸digo.</i>  <i>Los programas Kivy se crean utilizando el lenguaje de programaci贸n Python, que es incre铆blemente vers谩til y potente, pero f谩cil de usar.</i>  <i>Adem谩s, los desarrolladores de Kivy han creado su propio lenguaje de marcado GUI para crear sofisticadas GUI personalizadas.</i>  <i>Este lenguaje le permite configurar, conectar y organizar r谩pidamente los elementos de la aplicaci贸n.</i> <i><br><br></i>  <i>Y s铆, Kivy es completamente gratis.</i>  <i>隆Puedes usarlo en todas partes!</i>  <i>En un producto comercial o en C贸digo Abierto.</i> <br></div></div><br>  Dar茅 todo el c贸digo de la aplicaci贸n y mostrar茅 con suficiente detalle c贸mo se implementan estos o esos elementos cuando se desarrollen para plataformas m贸viles.  Como IDE, siempre uso <i>PyCharm</i> , que admite perfectamente la sintaxis del <b>lenguaje Kv</b> , un lenguaje DSL especial en el que se escribe la representaci贸n de la interfaz de usuario de su aplicaci贸n.  El esqueleto de la aplicaci贸n se cre贸 con la utilidad de consola <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CreatorKivyProject</a> , que proporciona pantallas b谩sicas con la plantilla MVVM. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i5/de/m1/i5dem1ryi468aeeeo60_tjnxpke.png"></div><br>  La carpeta <b>baseclass</b> contiene la l贸gica de widgets y controles implementados en el lenguaje de programaci贸n Python, en <b>kv</b> - archivos de descripci贸n de interfaz en el <i>lenguaje Kv</i> .  El directorio <b>applibs se</b> utiliza para bibliotecas de terceros, en la carpeta de <b>datos</b> hay contenido multimedia, bases de datos y otros datos.  El archivo <b>main.py</b> es el punto de entrada de la aplicaci贸n.  l no hace nada m谩s que iniciar la UI <b>TodoList (). Ejecutar ()</b> render, detectar un error si ocurre y mostrar una ventana para enviar un informe de error, creado autom谩ticamente por la utilidad <i>CreatorKivyProject</i> , no tiene nada que ver con escribir nuestra aplicaci贸n, y por lo tanto no se considera. <br><br>  El archivo <b>todolist.py</b> con el c贸digo del programa implementa la clase <b>TodoList</b> , que carga los dise帽os de la interfaz, inicializa sus instancias, monitorea los eventos de las teclas <b>f铆sicas</b> del dispositivo y devuelve nuestra primera pantalla, que se enumera en el Administrador de actividades.  Despu茅s de <b>TodoList (). Run ()</b> , se llama a la funci贸n de <b>compilaci贸n</b> y devuelve el widget que se mostrar谩 en la pantalla. <br><br>  Por ejemplo, el c贸digo para un programa simple que muestra una sola pantalla con una imagen se ver谩 as铆: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/dc/wi/1edcwilpi3ejmykf6qiqjvhftcy.png"></div><br>  Y aqu铆 est谩 el diagrama de nuestra clase de aplicaci贸n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/9j/8n/sv9j8npirktg3qeglec4vclue4i.png"></div><br><div class="spoiler">  <b class="spoiler_title">todolist.py:</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- import os from kivy.app import App from kivy.lang import Builder from kivy.core.window import Window from kivy.factory import Factory from libs.applibs.kivymd.theming import ThemeManager from libs.dataBase import DataBase class TodoList(App, DataBase): title = 'Todo List' icon = 'icon.png' theme_cls = ThemeManager() theme_cls.primary_palette = 'BlueGrey' def __init__(self, **kvargs): super(TodoList, self).__init__(**kvargs) Window.bind(on_keyboard=self.eventsProgram) Window.softinput_mode = 'below_target' self.Window = Window self.pathToBase = '%s/data/dataProjects.json' % self.directory self.nameAuthor = u' ' def build(self): self.setDataProjects() self.loadAllKvFiles(os.path.join(self.directory, 'libs', 'uix', 'kv')) self.rootScreen = Factory.RootScreen() #    #  Activity. self.activityManager = self.rootScreen.ids.activityManager self.listProjectsActivity = self.rootScreen.ids.listProjectsActivity self.listNotesActivity = self.rootScreen.ids.listNotesActivity self.addNewNoteActivity = self.rootScreen.ids.addNewNoteActivity return self.rootScreen def loadAllKvFiles(self, directory_kv_files): for kv_file in os.listdir(directory_kv_files): kv_file = os.path.join(directory_kv_files, kv_file) if os.path.isfile(kv_file): Builder.load_file(kv_file) def on_start(self): self.listProjectsActivity.setListProjects(self) def eventsProgram(self, instance, keyboard, keycode, text, modifiers): if keyboard in (1001, 27): if self.activityManager.current == 'add new note activity': self.activityManager.backActivity( 'list notes activity', self.addNewNoteActivity.ids.floatingButton) if self.activityManager.current == 'list notes activity': self.activityManager.current = 'list project activity' return True</span></span></code> </pre> <br></div></div><br>  Nuestra aplicaci贸n consta de solo tres <i>actividades</i> , el administrador de pantalla ( <i>ScreenMenager</i> ), que volvimos a las funciones de <b>compilaci贸n</b> , es responsable de <b>cambiar</b> : <br><br><pre> <code class="hljs scala">#:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span>.<span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span>.<span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span>.<span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ActivityManager</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ActivityManager</span></span>.<span class="hljs-type"><span class="hljs-type">ActivityManager</span></span> &lt;<span class="hljs-type"><span class="hljs-type">RootScreen</span></span><span class="hljs-meta"><span class="hljs-meta">@BoxLayout</span></span>&gt;: orientation: <span class="hljs-symbol"><span class="hljs-symbol">'vertica</span></span>l' spacing: dp(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-type"><span class="hljs-type">ActivityManager</span></span>: id: activityManager <span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span>: id: listProjectsActivity <span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span>: id: listNotesActivity <span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span>: id: addNewNoteActivity</code> </pre><br>  Cuando se inicia la aplicaci贸n, se instalar谩 primero la Actividad que se especifica en el ActivityManager.  En nuestro caso, es <i>ListProjectsActivity</i> .  En la aplicaci贸n para listas de proyectos y tareas, utilic茅 <i>ScrollView</i> .  Aunque fue m谩s correcto: <i>RecycleView</i> .  Porque el primero, si hay m谩s de cien publicaciones y proyectos, no puede hacerlo.  M谩s precisamente, tomar谩 mucho tiempo renderizar listas.  <i>RecycleView le</i> permite mostrar listas de cualquier longitud casi al instante.  Pero dado que, en cualquier caso, con listas grandes, tendr铆a que usar la carga de datos din谩micos en una lista o paginaci贸n, pero esto no se discuti贸 en los TOR, utilic茅 <i>ScrollView</i> .  La segunda raz贸n es que era demasiado vago para rehacer las listas en <i>RecycleView</i> (y es <i>fundamentalmente</i> diferente en uso de <i>ScrollView</i> ), y no hubo mucho tiempo, porque toda la aplicaci贸n se escribi贸 en cuatro horas en pausas para fumar y pausas para el caf茅. <br><br>  La pantalla de inicio con una lista de proyectos (ListProjectsActivity.kv y ListProjectsActivity.py) se ve as铆: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4g/lu/i4/4glui4eyzptivo76zrmmqj_amqw.png"></div><br>  Dado que el dise帽o de la pantalla ListProjectsActivity ya se muestra en la pantalla, mostrar茅 c贸mo se ve su clase de control: <br><br><pre> <code class="hljs pgsql"># -*- coding: utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -*- <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.screenmanager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Screen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Activity <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.uix.baseclass.InputDialog <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> InputDialog <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . ProjectItem <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ProjectItem <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> ListProjectsActivity(Activity): objApp = App.get_running_app() def setListProjects(self, objApp): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nameProject <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> objApp.dataProjects.keys(): self.ids.layoutContainer.add_widget(ProjectItem(projectName=nameProject)) def createNewProject(self, projectName): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> projectName <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> projectName.isspace(): self.ids.layoutContainer.add_widget(ProjectItem(projectName=projectName)) self.objApp.addProjectInBase(projectName) def deleteProject(self, instance): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> projectName <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.objApp.dataProjects: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> instance.projectName == projectName: self.objApp.deleteProjectFromBase(projectName) break def showDialogCreateProject(self, *args): InputDialog( title=<span class="hljs-string"><span class="hljs-string">' '</span></span>, hintText=<span class="hljs-string"><span class="hljs-string">' '</span></span>, textButtonCancel=<span class="hljs-string"><span class="hljs-string">''</span></span>, textTuttonOk=<span class="hljs-string"><span class="hljs-string">''</span></span>, eventsCallback=self.createNewProject).<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>()</code> </pre><br>  Llamada al cuadro de di谩logo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/t1/kj/btt1kjdoddave7eoowlvhxigdpq.png"></div><br>  En el trabajo, llamar a la ventana y crear un nuevo proyecto se ver谩 as铆: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/gh/hm/teghhm6op9paveubdsjwh0m_d60.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/v7/hl/uzv7hllrtghzrnw-rj0i7e7xnds.gif"></div></td></tr></tbody></table><br>  No me detendr茅 en la pregunta sobre los datos de la aplicaci贸n, porque los datos son un diccionario regular del formulario <br><br><pre> <code class="python hljs">{<span class="hljs-string"><span class="hljs-string">"Name Project"</span></span>: [{<span class="hljs-string"><span class="hljs-string">"pathToAvatar"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"nameDate"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"nameAuthor"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"textNote"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>}]}</code> </pre> <br>  y que se almacena en el directorio de <b>datos</b> como un simple archivo json. <br><br>  Veamos cu谩l es el elemento con el nombre del proyecto y c贸mo usar Kivy para eliminar un elemento de la lista deslizando el dedo.  Para hacer esto, debemos heredar el comportamiento del widget en la lista de la clase <i>SwipeBehavior</i> de la biblioteca <i>SwipeToDelete</i> : <br><br>  <b>ProjectItemActivity.py</b> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.boxlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BoxLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.swipetodelete <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SwipeBehavior <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProjectItemActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(SwipeBehavior, BoxLayout)</span></span></span><span class="hljs-class">:</span></span> projectName = StringProperty() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_down</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.move_to = self.x, self.y <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_down(touch) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.reduce_opacity() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_move(touch) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_up</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.check_for_left() self.check_for_right() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_up(touch)</code> </pre><br>  Y la descripci贸n del elemento del proyecto en el marcado Kv: <br><br>  <b>ProjectItemActivity.kv</b> <br><pre> <code class="hljs css">&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">ProjectItemActivity</span></span>&gt;: <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_rectangle</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.y</span></span> , <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.width</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.height</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_timeout</span></span>: 1000000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_distance</span></span>: 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">event_after_swipe</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.listActivity</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.deleteProject</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OneLineListItem</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">text</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">root</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.projectName</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on_press</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.listActivity</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setNotesProject</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">root</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.projectName</span></span>)</code> </pre><br>  En general, cada widget en Kivy tiene un m茅todo <b><i>on_touch</i></b> con el que puede capturar cualquier evento que ocurra en la pantalla.  Aqu铆 hay una peque帽a parte de la lista de eventos disponibles: <br><br><pre> <code class="python hljs">[<span class="hljs-string"><span class="hljs-string">'double_tap_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'grab_state'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_double_tap'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_mouse_scrolling'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_touch'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_triple_tap'</span></span>, <span class="hljs-string"><span class="hljs-string">'move'</span></span>, <span class="hljs-string"><span class="hljs-string">'push'</span></span>, <span class="hljs-string"><span class="hljs-string">'push_attrs'</span></span>, <span class="hljs-string"><span class="hljs-string">'push_attrs_stack'</span></span>, <span class="hljs-string"><span class="hljs-string">'scale_for_screen'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_end'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_start'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_update'</span></span>, <span class="hljs-string"><span class="hljs-string">'triple_tap_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'ungrab'</span></span>, <span class="hljs-string"><span class="hljs-string">'update_time_end'</span></span>]</code> </pre><br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/bl/rl/zzblrlviduost-tycdnpvs-xyy0.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/bd/dv/ml/bddvmlttyqkolsl5a-cy2r9a6vc.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/nm/i0/fw/nmi0fw493_feuoafuwzbm4xr7hm.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/yr/9a/kjyr9axwzdywc3tdgkm_eyq9tzo.gif"></div></td></tr></tbody></table><br>  Implementando el men煤 contextual para Android ... <br><br>  Tampoco hubo problemas aqu铆, ya que este es solo un widget DropDown est谩ndar.  Gracias al hecho de que puede personalizar todos los widgets y controles en Kivy tanto como lo permita su imaginaci贸n, obtuve f谩cilmente un bonito men煤.  A la izquierda est谩 la base DropDown, a la derecha est谩 la m铆a: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/9r/wh/nm/9rwhnm1vtqz-z9sbkosz-69rnrs.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/hp/oz/xt/hpozxtujdyich9u4u9oh3wmasdw.gif"></div></td></tr></tbody></table><br>  Dise帽o de la lista del men煤 contextual: <br><br>  <b>ContextMenuAndroidActivity.kv</b> <br><pre> <code class="hljs pgsql">#:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDSeparator libs.applibs.kivymd.card.MDSeparator #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuItem libs.applibs.animdropdown.MenuItem &lt;ContextMenuAndroidActivity&gt;: MenuItem: <span class="hljs-type"><span class="hljs-type">text</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> menu: root on_press: root.tapOnItem(self.text) MDSeparator: MenuItem: <span class="hljs-type"><span class="hljs-type">text</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> menu: root on_press: root.tapOnItem(self.text)</code> </pre><br>  La parte del software del men煤 contextual: <br><br>  <b>ContextMenuAndroidActivity.kv</b> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.clock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Clock <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.animdropdown <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AnimMenuDropDown <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextMenuAndroidActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(AnimMenuDropDown)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tapOnItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, textItem)</span></span></span><span class="hljs-function">:</span></span> objApp = App.get_running_app() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> textItem == <span class="hljs-string"><span class="hljs-string">''</span></span>: objApp.listActivity.deletePost() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: objApp.activityManager.current = <span class="hljs-string"><span class="hljs-string">'add new note activity'</span></span> Clock.schedule_once(objApp.addNewNoteActivity.editNote, <span class="hljs-number"><span class="hljs-number">.5</span></span>)</code> </pre><br>  A continuaci贸n, importamos el bot贸n <i>MenuDropDown</i> de la biblioteca <i>animdropdown</i> , le pasamos el objeto de nuestro men煤 contextual como par谩metro, y luego agregamos este bot贸n a la pantalla que necesitamos.  En nuestra aplicaci贸n, este es el bot贸n a la derecha en la tarjeta de notas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/27/qr/jt/27qrjtfka-i1bjmtzte93q2iefm.png"></div><br>  Notas de la tarjeta de actividad de marcado: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/aq/bt/tx/aqbttxbii2mhh-jo6ispppmo6ks.png"></div><br>  Clase base <b>NoteActivity</b> : <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.boxlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BoxLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.animdropdown <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuButton <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.swipetodelete <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SwipeBehavior <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . ContextMenu <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ContextMenu <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(SwipeBehavior, BoxLayout)</span></span></span><span class="hljs-class">:</span></span> nameDate = StringProperty() textNote = StringProperty() pathToAvatar = StringProperty() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super(NoteActivity, self).__init__(**kwargs) self.objApp = App.get_running_app() menuButton = MenuButton( dropdown_cls=ContextMenu, icon=<span class="hljs-string"><span class="hljs-string">'dots-vertical'</span></span>, _on_dropdown_fnc=self.setCurrentPost) self.ids.titleBox.add_widget(menuButton) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCurrentPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args)</span></span></span><span class="hljs-function">:</span></span> self.objApp.listNotesActivity.checkCurentPost = self</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ir/y9/vi/iry9vibv89ycgb70uwcb6rensce.png"></div><br>  Implementaci贸n de software de <b>ListNotesActivity</b> : <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- from kivy.app import App from kivy.uix.screenmanager import Screen as Activity from kivy.properties import ObjectProperty from . NoteActivity import NoteActivity class ListNotesActivity(Activity): checkCurentPost = ObjectProperty() objApp = App.get_running_app() def clearList(self): if self.objApp.activityManager.current == 'list project activity': self.ids.layoutContainer.clear_widgets() def addNewNote(self, objApp): objApp.activityManager.current = 'add new note activity' def setDefaultcheckCurentPost(self): self.checkCurentPost = lambda x: None def setNotesProject(self, nameProject): self.ids.toolBar.title = nameProject for dataProject in self.objApp.dataProjects[nameProject][1]: self.ids.layoutContainer.add_widget(NoteActivity( textNote=dataProject['textNote'], nameDate=dataProject['nameDate'], pathToAvatar=dataProject['pathToAvatar'])) def deletePost(self, instance=None): #  . if not self.checkCurentPost: checkCurentPost = instance else: checkCurentPost = self.checkCurentPost self.ids.layoutContainer.remove_widget(self.checkCurentPost) nameProject = self.ids.toolBar.title self.objApp.deleteNoteFromBase(nameProject, checkCurentPost.textNote) def checkScroll(self): if self.checkCurentPost and type(self.checkCurentPost) is not NoteActivity: self.checkCurentPost(self)</span></span></code> </pre><br>  驴C贸mo gestionar la actividad de la aplicaci贸n?  Para cambiar de una Actividad a otra, debemos indicar al administrador de pantalla el nombre de la nueva Actividad: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListNotesActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNewNote</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args)</span></span></span><span class="hljs-function">:</span></span> self.objApp.activityManager.current = <span class="hljs-string"><span class="hljs-string">'add new note activity'</span></span></code> </pre><br>  ... donde <i><b>'agregar nueva actividad de nota' es el</b></i> nombre de la Actividad para agregar una nueva nota. <br><br>  Pantalla y dise帽o de la <b>actividad AddNewNoteActivity</b> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6m/wc/pd/6mwcpd7f5dswgcy8vgcehomb7ci.png"></div><br>  Clase base: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.animation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Animation <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.screenmanager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Screen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Activity <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.metrics <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dp <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.uix.baseclass.NoteActivity <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NoteActivity <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddNewNoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> objApp = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> edit = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> oldTextNote = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animationButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.objApp = App.get_running_app() self.ids.toolBar.title = self.objApp.listNotesActivity.ids.toolBar.title Animation(size=(dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>)), d=<span class="hljs-number"><span class="hljs-number">.5</span></span>, t=<span class="hljs-string"><span class="hljs-string">'in_out_cubic'</span></span>).start(self.ids.floatingButton) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNewNotes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, textNote)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.edit: nameProject = self.ids.toolBar.title self.objApp.addEditNoteInBase(nameProject, textNote, self.oldTextNote) self.objApp.activityManager.backActivity(<span class="hljs-string"><span class="hljs-string">'list notes activity'</span></span>, self.ids.floatingButton) self.objApp.listNotesActivity.checkCurentPost.textNote = textNote self.edit = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.objApp.listNotesActivity.ids.layoutContainer.add_widget( NoteActivity( textNote=textNote, nameDate=<span class="hljs-string"><span class="hljs-string">'%s\n%s'</span></span> % ( self.objApp.nameAuthor, self.objApp.getDate()), pathToAvatar=<span class="hljs-string"><span class="hljs-string">'data/images/avatar.png'</span></span>)) self.objApp.addNoteInBase(self.ids.toolBar.title, textNote, <span class="hljs-string"><span class="hljs-string">'data/images/avatar.png'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">editNote</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, interval)</span></span></span><span class="hljs-function">:</span></span> self.edit = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> self.ids.textInput.text = self.objApp.listNotesActivity.checkCurentPost.textNote self.oldTextNote = self.ids.textInput.text</code> </pre><br>  Para animar el bot贸n, utilic茅 el evento <b>on_enter</b> , que se <b>genera</b> cuando la Actividad se instala en la pantalla: <br><br>  En el marcado: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AddNewNoteActivity</span></span></span><span class="hljs-tag">&gt;</span></span> on_enter: root.animationButton()</code> </pre><br>  En c贸digo Python: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddNewNoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animationButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> Animation(size=(dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>)), d=<span class="hljs-number"><span class="hljs-number">.5</span></span>, t=<span class="hljs-string"><span class="hljs-string">'in_out_cubic'</span></span>).start(self.ids.floatingButton)</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/fj/lq/wefjlq6o_4ohxersgl96zebkxo4.gif"></div><br>  A diferencia de Xamarin.Forms, la interfaz de usuario en Kivy se ver谩 igual en todas partes.  Por lo tanto, si est谩 escribiendo una aplicaci贸n para dos plataformas (Android e iOS), debe tener esto en cuenta al marcar la interfaz y especificar las propiedades de los widgets.  O haga dos marcas para dos plataformas (la l贸gica permanece sin cambios).  Esto es una ventaja, ya que la representaci贸n y los eventos de la interfaz de usuario son independientes de las caracter铆sticas de la plataforma, no utiliza API nativas para controlar estas acciones, lo que permite que su aplicaci贸n se ejecute sin problemas en casi cualquier plataforma.  Todos los gr谩ficos se representan utilizando llamadas nativas de OpenGL y SDL2 en la GPU, lo que le permite dibujar r谩pidamente men煤s, botones y otros encantos de la interfaz gr谩fica, incluidos gr谩ficos 2D y 3D. <br><br>  Esta aplicaci贸n utiliza la interfaz de usuario de Android MaterialDesign.  Por ejemplo, mi 煤ltimo proyecto ten铆a una interfaz adaptativa: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rm/de/xt/rmdextdb8krmw5ylbk2o7zwailk.png" width="600" height="400"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/pv/3_/evpv3_f2ht9oqh3cs7m4htfqdiq.png" width="600" height="400"></div><br>  Aqu铆 hay una demostraci贸n de las posibilidades en el estilo de Dise帽o de materiales: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Como dije, Kivy no usa API nativas para renderizar la interfaz de usuario, por lo tanto, le permite emular varios modelos de dispositivos y plataformas utilizando el m贸dulo de <b><i>pantalla</i></b> .  Es suficiente ejecutar su proyecto con los par谩metros necesarios para que la ventana de la aplicaci贸n probada se abra en la computadora como si se estuviera ejecutando en un dispositivo real.  Suena extra帽o, pero dado que Kivy extrae de la plataforma al procesar la interfaz de usuario, esto elimina la necesidad de emuladores pesados y lentos para las pruebas.  Esto solo se aplica a la interfaz de usuario.  Por ejemplo, la aplicaci贸n de prueba descrita en este art铆culo se prob贸 con los par谩metros <b><i>-m screen: droid2, portrait, scale = .75</i></b> that one to one corresponde a mi dispositivo real. <br><br><div class="spoiler">  <b class="spoiler_title">Lista completa de par谩metros del m贸dulo de pantalla:</b> <div class="spoiler_text"><pre> <code class="python hljs">devices = { <span class="hljs-comment"><span class="hljs-comment"># device: (name, width, height, dpi, density) 'onex': ('HTC One X', 1280, 720, 312, 2), 'one': ('HTC One', 1920, 1080, 468, 3), 'onesv': ('HTC One SV', 800, 480, 216, 1.5), 's3': ('Galaxy SIII', 1280, 720, 306, 2), 'note2': ('Galaxy Note II', 1280, 720, 267, 2), 'droid2': ('Motorola Droid 2', 854, 480, 240, 1.5), 'xoom': ('Motorola Xoom', 1280, 800, 149, 1), 'ipad': ('iPad (1 and 2)', 1024, 768, 132, 1), 'ipad3': ('iPad 3', 2048, 1536, 264, 2), 'iphone4': ('iPhone 4', 960, 640, 326, 2), 'iphone5': ('iPhone 5', 1136, 640, 326, 2), 'xperiae': ('Xperia E', 480, 320, 166, 1), 'nexus4': ('Nexus 4', 1280, 768, 320, 2), 'nexus7': ('Nexus 7 (2012 version)', 1280, 800, 216, 1.325), 'nexus7.2': ('Nexus 7 (2013 version)', 1920, 1200, 323, 2), # taken from design.google.com/devices # please consider using another data instead of # a dict for autocompletion to work # these are all in landscape 'phone_android_one': ('Android One', 854, 480, 218, 1.5), 'phone_htc_one_m8': ('HTC One M8', 1920, 1080, 432, 3.0), 'phone_htc_one_m9': ('HTC One M9', 1920, 1080, 432, 3.0), 'phone_iphone': ('iPhone', 480, 320, 168, 1.0), 'phone_iphone_4': ('iPhone 4', 960, 640, 320, 2.0), 'phone_iphone_5': ('iPhone 5', 1136, 640, 320, 2.0), 'phone_iphone_6': ('iPhone 6', 1334, 750, 326, 2.0), 'phone_iphone_6_plus': ('iPhone 6 Plus', 1920, 1080, 400, 3.0), 'phone_lg_g2': ('LG G2', 1920, 1080, 432, 3.0), 'phone_lg_g3': ('LG G3', 2560, 1440, 533, 3.0), 'phone_moto_g': ('Moto G', 1280, 720, 327, 2.0), 'phone_moto_x': ('Moto X', 1280, 720, 313, 2.0), 'phone_moto_x_2nd_gen': ('Moto X 2nd Gen', 1920, 1080, 432, 3.0), 'phone_nexus_4': ('Nexus 4', 1280, 768, 240, 2.0), 'phone_nexus_5': ('Nexus 5', 1920, 1080, 450, 3.0), 'phone_nexus_5x': ('Nexus 5X', 1920, 1080, 432, 2.6), 'phone_nexus_6': ('Nexus 6', 2560, 1440, 496, 3.5), 'phone_nexus_6p': ('Nexus 6P', 2560, 1440, 514, 3.5), 'phone_samsung_galaxy_note_4': ('Samsung Galaxy Note 4', 2560, 1440, 514, 3.0), 'phone_samsung_galaxy_s5': ('Samsung Galaxy S5', 1920, 1080, 372, 3.0), 'phone_samsung_galaxy_s6': ('Samsung Galaxy S6', 2560, 1440, 576, 4.0), 'phone_sony_xperia_c4': ('Sony Xperia C4', 1920, 1080, 400, 2.0), 'phone_sony_xperia_z_ultra': ('Sony Xperia Z Ultra', 1920, 1080, 348, 2.0), 'phone_sony_xperia_z1_compact': ('Sony Xperia Z1 Compact', 1280, 720, 342, 2.0), 'phone_sony_xperia_z2z3': ('Sony Xperia Z2/Z3', 1920, 1080, 432, 3.0), 'phone_sony_xperia_z3_compact': ('Sony Xperia Z3 Compact', 1280, 720, 313, 2.0), 'tablet_dell_venue_8': ('Dell Venue 8', 2560, 1600, 355, 2.0), 'tablet_ipad': ('iPad', 1024, 768, 132, 1.0), 'tablet_ipad_mini': ('iPad Mini', 1024, 768, 163, 1.0), 'tablet_ipad_mini_retina': ('iPad Mini Retina', 2048, 1536, 326, 2.0), 'tablet_ipad_pro': ('iPad Pro', 2732, 2048, 265, 2.0), 'tablet_ipad_retina': ('iPad Retina', 2048, 1536, 264, 2.0), 'tablet_nexus_10': ('Nexus 10', 2560, 1600, 297, 2.0), 'tablet_nexus_7_12': ('Nexus 7 12', 1280, 800, 216, 1.3), 'tablet_nexus_7_13': ('Nexus 7 13', 1920, 1200, 324, 2.0), 'tablet_nexus_9': ('Nexus 9', 2048, 1536, 288, 2.0), 'tablet_samsung_galaxy_tab_10': ('Samsung Galaxy Tab 10', 1280, 800, 148, 1.0), 'tablet_sony_xperia_z3_tablet': ('Sony Xperia Z3 Tablet', 1920, 1200, 282, 2.0), 'tablet_sony_xperia_z4_tablet': ('Sony Xperia Z4 Tablet', 2560, 1600, 297, 2.0)TodoList() app.run() }</span></span></code> </pre><br></div></div><br>  驴Qu茅 se puede decir en conclusi贸n?  驴Kivy es bueno?  Sin duda bueno!  Si conoce el maravilloso lenguaje de programaci贸n Python, puede crear f谩cilmente aplicaciones para plataformas m贸viles (y no solo) con el marco no menos maravilloso de Kivy. <br><br>  <b>Ventajas de desarrollar aplicaciones usando el framework Kivy:</b> <br><br><ul><li>  Como estamos tratando con Python, la velocidad de desarrollo de las aplicaciones es varias veces m谩s r谩pida que la velocidad de desarrollo en cualquier otro lenguaje o marco de programaci贸n. </li><li>  Megatones de bibliotecas Python listas para usar que puede usar en sus proyectos: <b>OpenCV, Django, Flask, NumPy, ffmpeg, sqlite3, lxml</b> y miles de otras. </li><li>  Dado que Kivy usa OpenGL y GPU para renderizar gr谩ficos, as铆 como sus propios widgets y controles, la velocidad de renderizaci贸n de la interfaz de usuario es muy alta y est谩 completamente aliviado del dolor de cabeza, que est谩 presente en otros marcos que necesitan ingresar a la parte nativa para implementar algunas partes de la interfaz. </li><li>  Utiliza el nativo solo cuando necesita acceso a funciones espec铆ficas de la plataforma que simplemente no pueden existir en un marco verdaderamente multiplataforma: por ejemplo, acceso a geolocalizaci贸n, acceso a la c谩mara, tecnolog铆a BlueTooth ... <br><br>  Implementando acceso a la API nativa de Android para obtener IMEI y modelo de dispositivo usando PyJnius: </li></ul><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_model_android</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnius <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> autoclass Build = autoclass(<span class="hljs-string"><span class="hljs-string">'android.os.Build'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(Build.DEVICE) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_imei_android</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnius <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> autoclass Service = autoclass(<span class="hljs-string"><span class="hljs-string">'org.renpy.android.PythonActivity'</span></span>).mActivity Context = autoclass(<span class="hljs-string"><span class="hljs-string">'android.content.Context'</span></span>) TelephonyManager = Service.getSystemService(Context.TELEPHONY_SERVICE) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(TelephonyManager.getDeviceId())</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/bi/pm/fwbipmzqlt4iebzxbaap4f_-e0y.gif"></div><br>  Por ejemplo, una implementaci贸n de dispositivos IMEI receptores nativos en Java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.telephony.TelephonyManager; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GetImeiAndroid</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImeiAndroid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); String IMEINumber = tm.getDeviceId(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IMEINumber; } }</code> </pre><br><ul><li>  Puede usar bibliotecas jar de terceros en sus proyectos cuando se trata de Android. </li><li>  Usted es completamente propietario de todos los eventos que ocurren en la pantalla: toque, multit谩ctil, deslizar, golpear y otros eventos sin ir al nativo, por lo que es una parte integral de Kivy. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Caracter铆sticas de Kivy en dispositivos t谩ctiles:</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://player.vimeo.com/video/45240986" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://player.vimeo.com/video/40730046" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://player.vimeo.com/video/25680681" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/u4NRu7mBXtA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  <b>A pesar de todas las ventajas, Kivy tiene varias desventajas:</b> <br><br><ul><li>  La velocidad del "arranque en fr铆o", es decir, el primer lanzamiento de la aplicaci贸n desde el momento en que se implementan todas las bibliotecas, es bastante larga.  Los siguientes son ordinarios, pero m谩s largos que los nativos, dependiendo de la carga del procesador del dispositivo m贸vil. </li><li>  Trabaja con listas.  Puede mostrar una lista con un tama帽o de 100,000 art铆culos en medio segundo (por ejemplo, tarjetas de usuario, escaparate, citas), pero con una condici贸n: todas las tarjetas deben tener la misma altura.  Si muestra una lista de, por ejemplo, citas, con una cantidad desconocida de texto por adelantado, pero en su totalidad, en un momento dado no se pueden mostrar m谩s de diez puntos, ya que esto tomar谩 entre 10 y 15 segundos.  En este caso, tendr谩 que cargar 10-15 elementos cada uno mientras se desplaza por la lista. </li><li>  Es imposible mostrar texto que exceda los 6500 caracteres (3.5 p谩ginas de texto impreso): obtenemos una pantalla en negro.  Esto se resuelve rompiendo el texto y luego peg谩ndolo, lo que todav铆a parece ser una muleta.  Sin embargo, no est谩 claro a qui茅n se le ocurrir铆a enviar una cantidad de texto a la vez.  Especialmente cuando se trata de plataformas m贸viles. </li></ul><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M谩s art铆culos sobre Kivy</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una m谩quina virtual</a> (la primera publicaci贸n de ZenCODE) de los desarrolladores de Kivy est谩 lista y configurada para construir proyectos para ambas ramas de Python. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420691/">https://habr.com/ru/post/es420691/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420679/index.html">Nuevos cursos de Python del grupo Mail.Ru</a></li>
<li><a href="../es420681/index.html">AMD ThreadRipper 2: primera introducci贸n</a></li>
<li><a href="../es420685/index.html">Arreglar y neutralizar: c贸mo domesticamos la plata. Una palabra sobre bactericidas para el agua</a></li>
<li><a href="../es420687/index.html">Uso de VS Code para llamar a REST API en Azure IoT Hub [+ materiales 煤tiles]</a></li>
<li><a href="../es420689/index.html">Dise帽ador de juegos desde cero: c贸mo comenzar a hacer juegos sin experiencia</a></li>
<li><a href="../es420693/index.html">El curso de desarrollo Java del grupo Mail.Ru en el canal Technostream</a></li>
<li><a href="../es420695/index.html">Ray: un sistema distribuido para usar IA</a></li>
<li><a href="../es420697/index.html">El eterno tema con PHP y MySQL</a></li>
<li><a href="../es420701/index.html">HSBI invita a una tarde de conferencias sobre dise帽o de juegos el 29 de agosto</a></li>
<li><a href="../es420703/index.html">Sinopsis del libro "Negociaciones sin derrota. M茅todo Harvard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>