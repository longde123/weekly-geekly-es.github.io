<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂 😩 🐣 Test des modems radio LoRa / LoRaWAN RN2483. Partie 2, LoRaWAN 🔠 🏠 👸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La partie précédente a décrit comment connecter les modems RN2483 en mode LoRa. Passons maintenant à la partie suivante, plus complexe - la connexion ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Test des modems radio LoRa / LoRaWAN RN2483. Partie 2, LoRaWAN</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398247/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La partie précédente a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> décrit comment connecter les modems RN2483 en mode LoRa. </font><font style="vertical-align: inherit;">Passons maintenant à la partie suivante, plus complexe - la connexion au réseau LoRaWAN.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que LoRaWAN?</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/fbc/821/466/fbc8214665cb4bfb94e1c75021ec502b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LoRaWAN est un réseau "conditionnellement global" composé de terminaux (nœuds) qui envoient des données aux concentrateurs (passerelle). </font><font style="vertical-align: inherit;">Chaque concentrateur a accès à Internet et envoie les données reçues à un serveur, qui à son tour les envoie aux clients signés. </font><font style="vertical-align: inherit;">Le réseau, d'une part, est «mondial», car </font><font style="vertical-align: inherit;">les données peuvent être reçues par n'importe quelle passerelle à proximité, en revanche, elles sont «conditionnellement globales», car </font><font style="vertical-align: inherit;">cela ne fonctionnera pas sans Internet / intranet (bien que personne ne se soucie d'avoir sa propre passerelle et son propre serveur au sein de l'organisation). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le modem RN2483 sera utilisé comme «nœud», un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">service</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuit sera utilisé pour se connecter </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Suite sous la coupe.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le réseau des choses</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.thethingsnetwork.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une communauté ouverte dont les utilisateurs peuvent créer, enregistrer des appareils et des hubs, expérimenter comment tout cela fonctionne, etc. </font><font style="vertical-align: inherit;">Comme on dit, gratuitement et sans SMS. </font><font style="vertical-align: inherit;">Nous l'utiliserons pour les tests. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le monde peut enregistrer à la fois un nœud et une passerelle sur le réseau. </font><font style="vertical-align: inherit;">Le Things Network est entièrement gratuit, de nombreux passionnés achètent du matériel à leurs frais. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte de couverture au moment de la rédaction est la suivante: </font></font><br>
<br>
<img src="https://habrastorage.org/files/18f/37b/249/18f37b249adb417193d8a3c679287cf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, le segment de couverture en langue russe laisse beaucoup à désirer, mais il l'est toujours. </font><font style="vertical-align: inherit;">Il y a un côté positif à cela - à Londres ou à Amsterdam, vous ne surprendrez personne avec un nouveau concentrateur, mais en Russie - il y a de fortes chances d'être le premier.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connectez RN2483 à LoRaWAN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement à une simple connexion p2p, tout est beaucoup plus compliqué dans LoRaWAN - les appareils sont enregistrés sur le réseau, le trafic est crypté avec différentes clés, etc. Parce que le réseau est public et public, les questions de protection des données sont très pertinentes ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe 2 types d'authentification dans le réseau LoRaWAN: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Authentification "over the air" ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OTAA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Over-the-Air Activation). Les appareils s'enregistrent sur le réseau et reçoivent la clé nécessaire au fonctionnement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Activation d' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ABP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Activation par personnalisation). Les paramètres sont pré-enregistrés dans l'appareil, aucune authentification supplémentaire n'est requise. Ce mode est plus simple, mais il y a aussi un inconvénient - les données sont simplement envoyées à l'air, il n'y a aucune garantie qu'elles ont été reçues par le hub. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est important</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: De nombreux concentrateurs monocanaux bon marché ne prennent en charge que le mode ABP, de sorte que la première méthode peut ne pas fonctionner. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Enregistrement de l'appareil - OTAA</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première étape consiste à aller sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">staging.thethingsnetwork.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et à enregistrer une «application». </font><font style="vertical-align: inherit;">Je l'ai appelé Raspberry Pi Home. </font><font style="vertical-align: inherit;">Lors de l'enregistrement de l'application, l'utilisateur reçoit la première clé, qui sera utile à l'avenir. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b33/8a7/790/b338a779084444d193521ef6ce945d04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous voyons l'onglet Appareils où vous pouvez ajouter notre modem (il peut y en avoir plusieurs). </font><font style="vertical-align: inherit;">Cliquez sur "enregistrer l'appareil" et sélectionnez le mode OTAA. </font><font style="vertical-align: inherit;">Une fenêtre apparaît dans laquelle vous devez saisir l'identifiant de l'appareil.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f23/d56/979/f23d5697934245b7abffe51bb831a4e1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet identifiant peut être obtenu en envoyant la commande sys get hweui au modem. </font><font style="vertical-align: inherit;">Cette inscription est complétée, comme promis, gratuitement et sans SMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ouvrant les paramètres de l'appareil, vous pouvez voir toutes les clés; elles doivent être enregistrées dans le programme. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9f0/8c4/8ff/9f08c48ff5a54bb7a8bc13086b1815ef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour simplifier le code, j'ai utilisé la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliothèque python-loranode</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le code source pour l'envoi des données est donné ci-dessous. </font><font style="vertical-align: inherit;">Comme vous pouvez le voir, dans le code, il y a 3 lignes appkey, appeui et deveui, qui sont utilisées pour l'authentification.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code source</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> loranode <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RN2483Controller
<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> commands <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment"># LoRaController OTAA based join and message test</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:<font></font>
    set_debug_level(Level.DEBUG)<font></font>
    <font></font>
    port = <span class="hljs-string"><span class="hljs-string">"COM3"</span></span>
    appkey = <span class="hljs-string"><span class="hljs-string">"58FF3007CAED02xxxxxxxxxxxxxxxxxxxx"</span></span>
    appeui = <span class="hljs-string"><span class="hljs-string">"70B3D57Exxxxxxxxxxxxxx"</span></span>
    deveui = <span class="hljs-string"><span class="hljs-string">"0004A30xxxxxxxxxxx"</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Test controller</span></span><font></font>
    lc = RN2483Controller(port)<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.test():<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to LoRa RN2483 device"</span></span>, Level.INFO)<font></font>
        lc.serial_sr(CMD_GET_VERSION)<font></font>
        lc.serial_sr(CMD_GET_HWEUI)<font></font>
        lc.get_freq()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
        printd(clr(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"[-] Failed to get version from LoRa device"</span></span>), Level.WARNING)<font></font>
<font></font>
    lc.set_pwr(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
    lc.set_adr(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)<font></font>
    lc.serial_sr(CMD_SET_SF, <span class="hljs-string"><span class="hljs-string">"sf7"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># sf12, sf7</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Join and send a message</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.join_otaa(appkey, appeui, deveui):<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to gateway"</span></span>, Level.INFO)<font></font>
        <font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-1</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #1"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
            printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
            printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-2</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #2"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
        exit()<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
    printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[-] Test failed"</span></span>), Level.CRITICAL)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, les paquets contenant l'heure actuelle (hhmm) sont envoyés au serveur. </font><font style="vertical-align: inherit;">C'est pratique pour contrôler quel paquet a été reçu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Enregistrement de l'appareil - ABP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est plus simple ici - nous enregistrons l'appareil en tant qu'ABP, et nous obtenons plusieurs clés qui doivent être enregistrées dans le programme. </font></font><br>
<br>
<img src="https://habrastorage.org/files/751/7d9/eb7/7517d9eb74f44a0a8ab6c608c7adc63f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le modem envoie les données «telles quelles», il n'y a aucune garantie que l'authentification a réussi, non. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour envoyer des données, vous devez insérer les clés nwkskey, appskey, devaddr dans le code. </font><font style="vertical-align: inherit;">Le code source est donné ci-dessous.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code source</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> loranode <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RN2483Controller
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> platform
<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> commands <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment"># LoRaController ABP based join and ACK test</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>:<font></font>
    set_debug_level(Level.DEBUG)<font></font>
<font></font>
    port = <span class="hljs-string"><span class="hljs-string">"COM3"</span></span>
    nwkskey = <span class="hljs-string"><span class="hljs-string">"58AA52E96035Axxxxxxxxxxxxxxxxxxxx"</span></span>
    appskey = <span class="hljs-string"><span class="hljs-string">"381B1C9206E9BE9xxxxxxxxxxxxxxxxxxx"</span></span>
    devaddr = <span class="hljs-string"><span class="hljs-string">"B639xxxx"</span></span><font></font>
    <font></font>
    lc = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span><font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>:
      <span class="hljs-comment"><span class="hljs-comment"># Test controller</span></span><font></font>
      lc = RN2483Controller(port)<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.test():<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to LoRa RN2483 device"</span></span>, Level.INFO)<font></font>
<font></font>
        lc.serial_sr(CMD_GET_VERSION)<font></font>
        lc.serial_sr(CMD_GET_HWEUI)<font></font>
        lc.get_freq()<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
        printd(clr(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"[-] Failed to get version from LoRa device"</span></span>), Level.WARNING)<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception, e:
      <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Error: "</span></span> + str(e)<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>:<font></font>
      printd(Color.YELLOW, <span class="hljs-string"><span class="hljs-string">"Error: cannot connect to device"</span></span>)<font></font>
      exit()<font></font>
<font></font>
    lc.set_adr(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)<font></font>
    lc.set_pwr(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
    lc.serial_sr(CMD_MAC_PAUSE)<font></font>
    lc.serial_sr(CMD_SET_SF, <span class="hljs-string"><span class="hljs-string">"sf12"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># sf12, sf7</span></span><font></font>
    lc.serial_sr(CMD_MAC_RESUME)<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment"># Join and send a message</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.join_abp(nwkskey, appskey, devaddr):<font></font>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Connected to gateway"</span></span>, Level.INFO)<font></font>
        <font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-1</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #1"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-1 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-comment"><span class="hljs-comment"># Data-2</span></span>
        printd(<span class="hljs-string"><span class="hljs-string">"[+] Sending packet #2"</span></span>, Level.INFO)<font></font>
        timeStr = time.strftime(<span class="hljs-string"><span class="hljs-string">"%H%M"</span></span>, time.gmtime())
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lc.send(timeStr, ack=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>):<font></font>
          printd(clr(Color.GREEN, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 succeeded"</span></span>), Level.CRITICAL)
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<font></font>
          printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[+] Send-2 failed"</span></span>), Level.CRITICAL)<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">15</span></span>)<font></font>
<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc<font></font>
        exit()<font></font>
<font></font>
    printd(clr(Color.RED, <span class="hljs-string"><span class="hljs-string">"[-] Test failed"</span></span>), Level.CRITICAL)
    <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> lc
</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dernière étape, une chose reste - prendre un ordinateur portable (ou Arduino ou Raspberry Pi) avec un modem avec vous et aller (aller, voler) à l'endroit où se trouve la zone de couverture de la passerelle la plus proche. </font><font style="vertical-align: inherit;">Je suis arrivé à la zone de couverture la plus proche pendant environ une demi-heure en tramway, donc le processus n'est pas si long et coûteux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cas de réception de données réussie, les paquets seront affichés sur le serveur. </font></font><br>
<br>
<img src="https://habrastorage.org/files/359/4fe/106/3594fe1069394a35a4f06ca59775b5e2.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le serveur lui-même ne fait rien avec les données; vous pouvez configurer votre propre code sur le serveur pour traiter les données reçues. </font><font style="vertical-align: inherit;">Cet exemple n'est qu'un test, rien n'est fait avec les données, dans une application réelle, elles peuvent être ajoutées à la base de données, envoyer des notifications, etc., tout dépend de la tâche.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi est-ce nécessaire?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idéalement, le réseau LoRaWAN fournit à l'utilisateur un service de transfert de données prêt à l'emploi qui fonctionne tout de suite. Il vous suffit de connecter l'appareil et les données seront envoyées et traitées par le concentrateur le plus proche (bien sûr, si l'utilisateur se trouve dans la zone de couverture du réseau). </font><font style="vertical-align: inherit;">Le champ d'application est assez étendu, des capteurs pour ouvrir la porte, la température ou le niveau d'eau dans le pays, à une balise GPS sur un animal ou une maquette d'avion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plusieurs vidéos (en anglais). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Présentation de l'Alliance LoRa:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2Y0bMX3TVi0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Things Network Introduction:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VEvopr1FLtw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, si nous parlons de The Things Network, il s'agit d'un service "amateur", bien sûr ne garantissant pas une connexion permanente. </font><font style="vertical-align: inherit;">S'il existe des fournisseurs commerciaux LoRaWAN, je ne sais toujours pas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et s'il n'y a pas de couverture?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une question raisonnable peut se poser - que faire si quelques jours en train ou quelques heures en avion jusqu'à la passerelle la plus proche? </font><font style="vertical-align: inherit;">Cela a son propre avantage - vous pouvez être le premier. </font><font style="vertical-align: inherit;">Vous pouvez créer votre propre passerelle et l'enregistrer sur le serveur The Things Network, le prix du problème varie en fonction de la fonctionnalité - de&gt; 1000 EUR pour les concentrateurs multicanaux «propriétaires», jusqu'à 15 $ pour les appareils faits maison basés sur SX1276 et Raspberry Pi. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> existe un tableau comparatif des différents routeurs, ceux qui le souhaitent peuvent l'étudier plus en détail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dernière option sera examinée dans la partie suivante.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr398247/">https://habr.com/ru/post/fr398247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr398235/index.html">Demandez à Ethan n ° 97: les lunes peuvent-elles avoir des lunes?</a></li>
<li><a href="../fr398239/index.html">HyperX sur Igromir: réponses aux questions</a></li>
<li><a href="../fr398241/index.html">Asgardia: la première nation à vivre dans l'espace</a></li>
<li><a href="../fr398243/index.html">Comment et pourquoi les services musicaux forment des listes de lecture</a></li>
<li><a href="../fr398245/index.html">Choisir un étage phono - pour chacun son son</a></li>
<li><a href="../fr398251/index.html">La résolution d'énigmes n'aide qu'à résoudre des énigmes</a></li>
<li><a href="../fr398253/index.html">Présentation du marché des services Game Cloud</a></li>
<li><a href="../fr398255/index.html">Xiaomi Redmi Note 4: un smartpad abordable</a></li>
<li><a href="../fr398257/index.html">Coup de pied MAINTENANT! Tendances du financement participatif, partie 1</a></li>
<li><a href="../fr398259/index.html">"Fallout 1.5: Resurrection": le jeu post-apocalypse, ce qu'il devrait être</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>