<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úçüèª üÜì üë®üèª‚Äçüè´ Comment utiliser efficacement les salles de r√©union en utilisant l'Internet des objets? üë∞ üç∂ üçÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En juillet, nous avons ouvert notre propre centre de technologie et d'exposition √† Moscou, le Digital Leadership Center. Il s'agit d'une nouvelle plat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment utiliser efficacement les salles de r√©union en utilisant l'Internet des objets?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/422475/">  En juillet, nous avons ouvert notre propre centre de technologie et d'exposition √† Moscou, le Digital Leadership Center.  Il s'agit d'une nouvelle plateforme d'√©v√©nements, d√©monstration de nouveaux sc√©narios innovants d√©velopp√©s conjointement avec les clients et les partenaires SAP. <br><br><img src="https://habrastorage.org/webt/iy/sh/hj/iyshhjwysnjmzo_qn6o8aqir7g0.jpeg"><br><br>  Lors de la construction de notre propre Centre, nous avons d√©cid√© qu'il fallait non seulement montrer les nouvelles technologies sous forme de stands de d√©monstration, mais aussi les introduire dans le travail du Centre lui-m√™me. <br>  Par exemple, toutes les salles et tous les publics du Centre peuvent √™tre transform√©s - divis√©s en plusieurs parties - et r√©unis en un seul espace.  Le site est √©galement √©quip√© d'un ¬´bureau intelligent¬ª - solutions de gestion des ressources, cam√©ras avec reconnaissance faciale, capteurs pour l'Internet des objets. <br><br>  Au cours de ce processus, nous avons √©labor√© un sc√©nario simple et efficace bas√© sur la plateforme SAP Cloud pour surveiller l'utilisation efficace des salles de r√©union.  Dans cet article, nous vous expliquerons comment assembler rapidement et facilement un tel sc√©nario en une journ√©e. <br><br>  <i>Plus loin - sur les capteurs, le service IoT dans SAP Cloud Platform et le ¬´karma rating¬ª pour les employ√©s.</i> <i><br></i> <a name="habracut"></a><br>  Nous avons commenc√© par pr√©parer des services sur la plateforme SAP Cloud pour l'int√©gration avec des capteurs pour l'Internet des objets.  Pour d√©velopper la solution, nous avons utilis√© le service IoT dans SAP Cloud Platform (SCP) pour automatiser le transfert de donn√©es, ainsi que l'environnement de d√©veloppement Cloud Foundry dans SCP. <br><br>  Nous avons fait une d√©monstration en utilisant ces capteurs: <br><br><ol><li>  Capteur magn√©tocontact, qui fonctionne √† la fois sur l'ouverture et la fermeture des portes </li><li>  D√©tecteur de mouvement infrarouge pour d√©tecter la p√©n√©tration dans la zone prot√©g√©e, et dans notre cas √©galement dans la salle de r√©union </li></ol><br>  Une surveillance des salles de r√©union doit √™tre effectu√©e pour v√©rifier comment les employ√©s utilisent r√©ellement les locaux - si la r√©union a eu lieu ou si la salle de r√©union √©tait vide √† ce moment-l√†, combien de personnes ont fini par assister √† la r√©union et d'autres d√©tails.  Par cons√©quent, vous pouvez collecter des statistiques sur la fa√ßon dont les employ√©s ont utilis√© efficacement les salles de r√©union sur une p√©riode de temps. <br><br><img src="https://habrastorage.org/webt/du/nm/us/dunmusoraoz-1kkv3tfr8pbk0qi.png"><br>  <i>Figure 1. Architecture du service Internet des objets dans la plateforme cloud SAP</i> <i><br></i> <br>  Nous avons utilis√© la plateforme cloud SAP et le service Internet des objets comme base pour cet exemple.  L'architecture de la plate-forme est illustr√©e √† la Fig. 1, elle prend en charge des fonctions pour combiner √† la fois des appareils individuels et des points d'acc√®s (passerelles) en un r√©seau commun bas√© sur le service Internet des objets dans la plateforme SAP Cloud. <br><br>  Pour les appareils sans protocoles HTTPS / MQTT, ainsi que pour diviser les appareils en segments qui consolident les messages et les envoient de mani√®re centralis√©e vers SAP Cloud Internet of Things, IoT GateWay Edge est utilis√©.  Il s'agit d'un composant logiciel qui peut communiquer avec des appareils via des protocoles: HTTPS, MQTT, Modbus (1), CoAP, File (2), OPC UA (3), SigFox (4), SNMP (5).  De plus, le d√©veloppeur peut utiliser le SDK pour √©tendre les capacit√©s de GateWay et impl√©menter ses protocoles pour l'√©change de donn√©es avec des appareils. <br><br><div class="spoiler">  <b class="spoiler_title">Remarques</b> <div class="spoiler_text">  Notes de la documentation SAP Cloud Platform: <br><br>  1) Modus est actuellement impl√©ment√© en utilisant: <br>  ‚Ä¢ TCP / IP sur Ethernet <br>  ‚Ä¢ Transmission s√©rie asynchrone sur divers supports (fil: RS-232, RS-485; fibre, radio, etc.) <br>  ‚Ä¢ ModbusPLUS, un r√©seau de passage de jetons √† grande vitesse. <br>  Modbus d√©finit une unit√© de donn√©es de protocole simple qui est ind√©pendante des couches de communication sous-jacentes.  Le mappage sur des bus ou r√©seaux sp√©cifiques peut introduire des champs suppl√©mentaires sur l'unit√© de donn√©es d'application.  Le protocole suit une approche client-serveur, o√π un client initie une transaction Modbus pour interroger un serveur pour les donn√©es. <br><br>  2) Le flux de travail typique de l'adaptateur est le suivant: <br>  1. Lisez un certain fichier, bas√© sur un ensemble de param√®tres de configuration. <br>  2. Parcourez le contenu du fichier et extrayez les champs importants comme indiqu√© par un fichier de sch√©ma d'analyse de l'adaptateur. <br>  3. Mappez ces champs sur les concepts et les entit√©s du service Internet des objets (par exemple, les m√©tadonn√©es d'adressage des p√©riph√©riques, les mesures, etc.), √©galement en fonction du fichier de sch√©ma d'analyse de l'adaptateur. <br>  4. Diffusez des donn√©es normalis√©es jusqu'au service principal Internet of Things. <br>  5. Supprimez le fichier cible de son emplacement d'origine et, √©ventuellement, sauvegardez-le dans un autre dossier. <br>  Les formats de fichiers pris en charge sont JSON, CSV et binaire.  Pour le binaire, le fichier est transf√©r√© sous forme de cha√Æne cod√©e en Base64 au service Internet de base. <br><br>  3) La passerelle Internet des objets int√®gre les serveurs OPC UA en agissant en tant que client OPC UA.  L'adaptateur peut se connecter au serveur pour √©tablir une session OPC UA;  lors de la premi√®re connexion, l'adaptateur parcourt l'espace d'adressage du serveur et cr√©e un p√©riph√©rique correspondant avec un ensemble de capteurs.  Ensuite, il configure la r√©cup√©ration des donn√©es, pour deux options possibles: <br>  ‚Ä¢ Mode d'extraction p√©riodique: l'adaptateur interroge le serveur pour les donn√©es sur une base p√©riodique, avec un intervalle d'interrogation configurable <br>  ‚Ä¢ Mode d'abonnement: l'adaptateur cr√©e un abonnement sur les n≈ìuds du serveur, pour √™tre averti par le serveur lui-m√™me chaque fois que la valeur d'un n≈ìud change <br><br>  4) SigFox est une entreprise fran√ßaise utilisant une technologie radio bas√©e sur UNB (Ultra Narrow Band) pour connecter des appareils IoT √† son r√©seau.  Il utilise actuellement la bande ISM sur 868 MHz (tel que d√©fini par ETSI et CEPT) en Europe et sur 902 MHz aux √âtats-Unis (tel que d√©fini par la FCC), en fonction de r√©glementations r√©gionales sp√©cifiques.  Pour √©tendre la zone de couverture des services, SigFox a √©tabli des partenariats avec plusieurs op√©rateurs de r√©seaux √† travers le monde.  En utilisant l'infrastructure UNB fournie par ces partenaires, SigFox permet la communication entre les appareils utilisant le protocole radio SigFox et le cloud SigFox.  Dans ce contexte, l'infrastructure SigFox agit comme la couche de transport qui envoie les donn√©es g√©n√©r√©es par les appareils vers le cloud.  Cette couche est ind√©pendante des donn√©es, ce qui signifie qu'elle n'interpr√®te pas les donn√©es mais les transf√®re simplement.  Compte tenu de cela, les fabricants d'appareils qui installent le micrologiciel SigFox sur leurs produits peuvent utiliser le service SigFox pour acc√©der √† leurs donn√©es et un ensemble d'API REST pour cr√©er des applications bas√©es sur ces donn√©es.  Le graphique illustre le r√©seau SigFox de mani√®re simplifi√©e. <br><br>  5) Le flux de donn√©es suit deux voies: <br>  ‚Ä¢ La passerelle Internet des objets √©met une interrogation cyclique sur tous les appareils, effectuant une MIB-WALK compl√®te pour chaque appareil connect√©. <br>  ‚Ä¢ La passerelle Internet des objets re√ßoit des interruptions des appareils, si les appareils peuvent envoyer les interruptions. <br></div></div><br>  Dans l'architecture de l'Internet des objets, le service GateWay peut √™tre d√©ploy√© √† la fois dans le cadre de la plateforme cloud SAP et sur le terminal.  L'un des principaux avantages de GateWay est l'int√©gration avec la plateforme cloud SAP, car elle r√©sout le probl√®me du transfert de donn√©es des appareils vers la plateforme cloud.  Mais il est √©galement possible de s'int√©grer au service Internet des objets sans GateWay, en utilisant les protocoles MQTT / HTTPS. <br><br>  L'architecture du service Internet des objets est construite √† l'aide de l'environnement Cloud Foundry, qui vous permet de d√©ployer vos applications d√©velopp√©es sur la base des langages Python, JavaScript (Nodejs), Java (Tomcat), Go, Scala, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">etc.</a> sur la plateforme SAP Cloud.  Dans ce sc√©nario, nous avons utilis√© le serveur d'applications Nodejs pour cr√©er notre propre service de traitement des messages des capteurs dans l'environnement SAP Cloud Platform. <br><br><div class="spoiler">  <b class="spoiler_title">Un exemple de code pour un service bas√© sur Nodejs peut √™tre trouv√© ici.</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hdb = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'hdb'</span></span>); http.createServer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.method === <span class="hljs-string"><span class="hljs-string">'POST'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> body = <span class="hljs-string"><span class="hljs-string">''</span></span>; req.on(<span class="hljs-string"><span class="hljs-string">'data'</span></span>, chunk =&gt; { body += chunk.toString(); <span class="hljs-comment"><span class="hljs-comment">// convert Buffer to string }); req.on('end', () =&gt; { var data = JSON.parse(body); var id = data.id; var data = data.payload; var timestamp = data.TIMESTAMP; var vcap_services = JSON.parse(process.env.VCAP_SERVICES); var db_cred = vcap_services["hana-db"]; var credentials = db_cred[0].credentials; var port = credentials.port; var host = credentials.host; var crt = credentials.certificate; var client = hdb.createClient({ host : host, port : port, user : 'user_name', password : 'password', useTLS: true }); client.on('error', function (err) { console.error('Network connection error', err); }); console.log(client.readyState); // new client.connect(function (err) { if (err) { return console.error('Error:', err); } console.log(client.readyState); // connected }); client.prepare('call NEW_EVENT (?, ?, ?)', function(err, statement){ if (err) { return console.error('Prepare error:', err); } statement.exec({ ID: id, PAYLOAD : data, TS: timestamp}, function(err, affectedRows) { if (err) { return console.error('Exec error:', err); } console.log('Number of affected rows:', affectedRows); }); }); res.write("OK"); res.end(); }</span></span></code> </pre> <br></div></div><br>  Pour pr√©parer le code dans Nodejs, nous avons utilis√© le module node-hdb, qui assure la communication avec le SGBD HANA et est d√©j√† pr√©sent dans le buildpack nodejs dans CloudFoundry. <br><br>  Dans un environnement CloudFoundry, vous devez d√©finir les d√©pendances entre l'application et les modules utilis√©s.  Dans ce cas, Nodejs pourra acc√©der au module et lancer notre application, nous sp√©cifions donc le lien dans le fichier package.json <br><br><div class="spoiler">  <b class="spoiler_title">d√©pendance</b> <div class="spoiler_text"> <code>"dependencies" : { <br> "hdb" : "0.xx" <br> }</code> <br> </div></div><br>  En tant que principal entrep√¥t de donn√©es et moteur de cr√©ation de requ√™tes analytiques, nous utilisons le SGBD HANA.  En utilisant le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">node-hdb</a> , vous pouvez utiliser les capacit√©s de Bulk Insert (pour acc√©l√©rer l'insertion de donn√©es), la gestion des transactions (commit, rollback, autocommit), l'appel de proc√©dures SQL stock√©es. <br><br>  Les donn√©es obtenues √† l'aide des capteurs de l'Internet des objets transitent par le service Internet des objets vers la plateforme cloud SAP - directement vers notre service bas√© sur Nodejs.  Vous devez d'abord configurer le mod√®le de donn√©es et le format de message dans SAP Cloud Internet of Things. <br><br><h3>  Comment cr√©er rapidement une interface utilisateur et personnaliser les composants de base de SAP UI5? </h3><br>  Pour afficher l'√©tat de la salle de r√©union dans le service, nous avons utilis√© le composant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GenericTile</a> .  La figure 2 montre un exemple de composant GenericTile personnalis√© pour indiquer l'√©tat de la salle de r√©union. <br><br><img src="https://habrastorage.org/webt/yy/fp/ib/yyfpibdnrv_4dhqmh7juyfvkvlm.png"><br><br>  Pour dessiner des ic√¥nes et des affichages couleur sur le composant GenericTile, nous avons utilis√© l'extension HTML5 canvas et la m√©thode de rendu du mod√®le d'objet SAP UI5. <br><br><div class="spoiler">  <b class="spoiler_title">Un exemple de code peut √™tre trouv√© ici.</b> <div class="spoiler_text"><pre> <code class="javascript hljs">renderer: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oRM, oControl</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> model; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = sap.ui.getCore().byId(<span class="hljs-string"><span class="hljs-string">"samplecontainer---mainview"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status = {<span class="hljs-string"><span class="hljs-string">"door"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"motion"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"color"</span></span>:<span class="hljs-string"><span class="hljs-string">"#2bbc2d"</span></span>,<span class="hljs-string"><span class="hljs-string">"busy"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (view != <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) model = view.getModel(<span class="hljs-string"><span class="hljs-string">"DT1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (model != <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>){ d = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(model.getJSON()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.busy = d.busy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.door = d.door; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.motion = d.motion; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.color = d.color; } } oRM.write(<span class="hljs-string"><span class="hljs-string">"&lt;div"</span></span>); oRM.writeControlData(oControl); oRM.write(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>); <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">spoiler</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.busy == <span class="hljs-number"><span class="hljs-number">0</span></span>){ oRM.write(<span class="hljs-string"><span class="hljs-string">"&lt;img id='iDT1' src='/iotex/images/room_empty.png' alt='Empty' height='64' width='70'&gt;"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { oRM.write(<span class="hljs-string"><span class="hljs-string">"&lt;img id='iDT1' src='/iotex/images/room_booked.png' alt='Booked' height='64' width='70'&gt;"</span></span>); } oRM.write(<span class="hljs-string"><span class="hljs-string">"&lt;canvas id='cDT1' width='30' height='30'&gt;&lt;/canvas&gt;"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"&lt;script&gt;"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"var canvas = document.getElementById('cDT1');"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"var context = canvas.getContext('2d');"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"var centerX = canvas.width / 2;"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"var centerY = canvas.height / 2;"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"var radius = 12;"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"context.beginPath();"</span></span>); oRM.write(<span class="hljs-string"><span class="hljs-string">"context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.busy == <span class="hljs-number"><span class="hljs-number">1</span></span>)&amp;&amp;((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.door != <span class="hljs-number"><span class="hljs-number">0</span></span>)||(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status.motion != <span class="hljs-number"><span class="hljs-number">0</span></span>))){ oRM.write(<span class="hljs-string"><span class="hljs-string">"context.fillStyle = '#f46e41';"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//red } else { oRM.write("context.fillStyle = '#ffff00';"); //yellow } if (this.status.busy == 0){ oRM.write("context.fillStyle = '#2bbc2d';"); //green } oRM.write("context.fill();"); oRM.write("&lt;/script&gt;"); oRM.write("&lt;/div&gt;"); }</span></span></code> </pre> <br></div></div><br>  <b>Comment puis-je cr√©er des requ√™tes analytiques et afficher des graphiques dans une interface utilisateur dans une application sur SCP?</b> <br><br>  Le moyen le plus simple d'acc√©der aux donn√©es dans SAP HANA √† partir d'UI5 est le protocole OData.  Il vous permet d'utiliser un mod√®le d'objet pr√™t √† l'emploi pour transf√©rer des donn√©es vers un √©l√©ment d'affichage UI5.  Cependant, si une requ√™te analytique complexe est requise pour former un ensemble de donn√©es, SQLScript et les proc√©dures stock√©es dans SAP HANA viennent √† la rescousse.  Vous ne pouvez pas non plus recourir au d√©veloppement complexe de requ√™tes dans SQLScript, mais simplement utiliser l'√©diteur de vue de calcul dans SAP Web IDE. <br><br><img src="https://habrastorage.org/webt/f9/4r/un/f94runnzbafdsnd1cgmjd8ryxcm.png"><br>  <i>Figure 3. Un exemple de graphique √† secteurs de la biblioth√®que sap.viz.ui5</i> <br><br>  Exemple de code Javascript et SAP UI5 pour afficher un graphique √† secteurs <br><br><div class="spoiler">  <b class="spoiler_title">montr√© ici</b> <div class="spoiler_text"><pre> <code class="javascript hljs">$.ajax ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"GET"</span></span>, <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">"/iotex/odatasource/rooms.xsodata/rooms?$format=json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">dataType</span></span>: <span class="hljs-string"><span class="hljs-string">'json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">async</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data, status</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> aData = data.d.results; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UData = {<span class="hljs-attr"><span class="hljs-attr">Data</span></span>: aData}; room_model.setData(UData); } }); View.setModel(room_model,<span class="hljs-string"><span class="hljs-string">"Rooms"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oVizFrame = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.oVizFrame = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getView().byId(<span class="hljs-string"><span class="hljs-string">"idVizFrame"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oDataset = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> sap.viz.ui5.data.FlattenedDataset({ <span class="hljs-attr"><span class="hljs-attr">dimensions</span></span> : [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span> : <span class="hljs-string"><span class="hljs-string">'Time'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span> : <span class="hljs-string"><span class="hljs-string">"{Time}"</span></span>}], <span class="hljs-attr"><span class="hljs-attr">measures</span></span> : [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span> : <span class="hljs-string"><span class="hljs-string">'Usage'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span> : <span class="hljs-string"><span class="hljs-string">'{Value}'</span></span>} ], <span class="hljs-attr"><span class="hljs-attr">data</span></span> : { <span class="hljs-attr"><span class="hljs-attr">path</span></span> : <span class="hljs-string"><span class="hljs-string">"/Data"</span></span> } }); oVizFrame.setDataset(oDataset); oVizFrame.setVizProperties({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">text</span></span> : <span class="hljs-string"><span class="hljs-string">"   "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">plotArea</span></span>: { <span class="hljs-attr"><span class="hljs-attr">colorPalette</span></span> : [<span class="hljs-string"><span class="hljs-string">'#2bbc2d'</span></span>,<span class="hljs-string"><span class="hljs-string">'#f46e41'</span></span>,<span class="hljs-string"><span class="hljs-string">'#c5f442'</span></span>], <span class="hljs-attr"><span class="hljs-attr">drawingEffect</span></span>: <span class="hljs-string"><span class="hljs-string">"glossy"</span></span> }}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> feedSize = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> sap.viz.ui5.controls.common.feeds.FeedItem({ <span class="hljs-string"><span class="hljs-string">'uid'</span></span>: <span class="hljs-string"><span class="hljs-string">"size"</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span>: <span class="hljs-string"><span class="hljs-string">"Measure"</span></span>, <span class="hljs-string"><span class="hljs-string">'values'</span></span>: [<span class="hljs-string"><span class="hljs-string">"Usage"</span></span>] }), feedColor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> sap.viz.ui5.controls.common.feeds.FeedItem({ <span class="hljs-string"><span class="hljs-string">'uid'</span></span>: <span class="hljs-string"><span class="hljs-string">"color"</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span>: <span class="hljs-string"><span class="hljs-string">"Dimension"</span></span>, <span class="hljs-string"><span class="hljs-string">'values'</span></span>: [<span class="hljs-string"><span class="hljs-string">"Time"</span></span>] }); oVizFrame.addFeed(feedSize); oVizFrame.addFeed(feedColor);</code> </pre> <br></div></div><br>  Pour afficher correctement les donn√©es sur le graphique √† secteurs, vous devez soigneusement v√©rifier le chemin des donn√©es au format sp√©cifi√© dans la propri√©t√© Path de l'objet FlattenedDataset.  Dans ce cas, la propri√©t√© Path pointe vers l'objet / Data, il est donc n√©cessaire de pr√©senter la structure JSON souhait√©e sous la forme indiqu√©e <br><br><div class="spoiler">  <b class="spoiler_title">ici</b> <div class="spoiler_text"><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">var</span></span> datapiechart = { <span class="hljs-string"><span class="hljs-string">"Data"</span></span> : []}; var yellow = {<span class="hljs-string"><span class="hljs-string">"Time"</span></span>:<span class="hljs-string"><span class="hljs-string">"Abused"</span></span>,<span class="hljs-string"><span class="hljs-string">"Value"</span></span>:<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">.yellow}; var red = {"</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Time</span></span></span><span class="hljs-class">":"</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Occupied</span></span></span><span class="hljs-class">","</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Value</span></span></span><span class="hljs-class">":</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">red</span></span></span><span class="hljs-class">}; var green = {"</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Time</span></span></span><span class="hljs-class">":"</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Free</span></span></span><span class="hljs-class">","</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Value</span></span></span><span class="hljs-class">":</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">green</span></span></span><span class="hljs-class">}; datapiechart.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Data</span></span></span><span class="hljs-class">.push(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yellow</span></span></span><span class="hljs-class">); datapiechart.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Data</span></span></span><span class="hljs-class">.push(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">red</span></span></span><span class="hljs-class">); datapiechart.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Data</span></span></span><span class="hljs-class">.push(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">green</span></span></span><span class="hljs-class">); var mod = viz.getModel(); mod.setData(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">datapiechart</span></span></span><span class="hljs-class">); viz.setModel(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mod</span></span></span><span class="hljs-class">);</span></span></code> </pre> <br></div></div><br>  Pour afficher des statistiques (voir figure 4) sur les utilisateurs qui r√©servent des salles de r√©union, nous avons utilis√© un simple √©l√©ment de table UI5.  Il affiche les ¬´points¬ª accumul√©s en fonction du nombre de ¬´visites¬ª aux √©v√©nements.  Il est ainsi possible d'identifier les employ√©s peu scrupuleux qui r√©servent des salles de r√©union. <br><br><img src="https://habrastorage.org/webt/xo/4c/e9/xo4ce9mlpn1-614bazbu4zfbslw.png"><br>  <i>Fig 4. Statistiques des visites pour un utilisateur sp√©cifique</i> <br><br>  En utilisant le service Internet des objets, ainsi que l'environnement CloudFoundry dans la plateforme cloud SAP, vous pouvez cr√©er rapidement vos services IoT et les int√©grer facilement √† n'importe quel appareil.  En tant que source d'informations de r√©f√©rence sur le service Internet des objets, vous pouvez utiliser le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien dans</a> lequel l'architecture du service est d√©crite en d√©tail et des exemples de code sont fournis. <br><br><img src="https://habrastorage.org/webt/rj/jl/12/rjjl12bkcija7bpkqnvkiz-lzi8.jpeg"><br><br>  Vous pouvez √©galement utiliser l'acc√®s d'essai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> pour tester l'environnement Cloud Foundry en appuyant d'abord sur le bouton Connexion et en compl√©tant la proc√©dure d'enregistrement. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422475/">https://habr.com/ru/post/fr422475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422463/index.html">Nous √©tudions le climat des villes russes en utilisant Python</a></li>
<li><a href="../fr422465/index.html">Utilisation des emplacements dans Vue comme exemple d'extrait de produit</a></li>
<li><a href="../fr422467/index.html">Architecture de cat√©gorisation des √©v√©nements - Varya</a></li>
<li><a href="../fr422469/index.html">Connexion des passerelles FXstream Grandstream GXW4216, GXW4224, GXW4232, GXW4248 √† 3CX</a></li>
<li><a href="../fr422473/index.html">Sortie de GitLab 11.2: pr√©visualisation dans Web IDE et importation de projets pour Android</a></li>
<li><a href="../fr422477/index.html">Comment Bad UX aide les d√©veloppeurs √† perdre de l'argent</a></li>
<li><a href="../fr422479/index.html">La certification n'est pas pour la certification</a></li>
<li><a href="../fr422483/index.html">MIS. Insertions et organes distants</a></li>
<li><a href="../fr422485/index.html">Comment √©conomiser de l'argent lors du d√©marrage d'une entreprise aux √âtats-Unis: enregistrement d'entreprise, bureau, comptabilit√© et promotion</a></li>
<li><a href="../fr422487/index.html">Guide de d√©marrage rapide des variables CSS (cas d'utilisation, syntaxe et exemples)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>