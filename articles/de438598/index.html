<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌄 🏴 🏿 React & BEM - offizielle Zusammenarbeit. Historischer Teil 👨🏿‍🏭 💷 🐳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hier ist die Geschichte der Integration der BEM-Methodik in das React-Universum. Das Material, das Sie lesen werden, basiert auf der Erfahrung von Yan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>React & BEM - offizielle Zusammenarbeit. Historischer Teil</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/438598/"><p>  Hier ist die Geschichte der Integration der BEM-Methodik in das React-Universum.  Das Material, das Sie lesen werden, basiert auf der Erfahrung von Yandex-Entwicklern, die den größten und am meisten ausgelasteten Service in Russland entwickelt haben - Yandex.Search.  Wir hatten noch nie so ausführlich und tief darüber gesprochen, warum wir das taten und nicht anders, was uns motivierte und was wir wirklich wollten.  Der Außenseiter erhielt auf Konferenzen Trockenveröffentlichungen und Bewertungen.  Nur am Rande konnte man so etwas hören.  Als Co-Autor war ich empört über den Mangel an Informationen außerhalb jedes Mal, wenn ich über neue Versionen von Bibliotheken sprach.  Aber dieses Mal werden wir alle Details teilen. </p><br><img src="https://habrastorage.org/webt/wb/mt/xc/wbmtxcvurtd6cdv1aomjrtcyfw8.png"><br><p>  Jeder hat von der BEM-Methodik gehört.  CSS-Selektoren mit Unterstrichen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der besprochene Komponentenansatz</a> berücksichtigt die Art und Weise, wie CSS-CSS-Selektoren geschrieben werden.  Aber es wird kein Wort über CSS in dem Artikel geben.  Nur JS, nur Hardcore! </p><a name="habracut"></a><br><p>  Um zu verstehen, warum die Methodik erschien und mit welchen Problemen Yandex damals konfrontiert war, empfehle ich Ihnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, sich mit der Geschichte von</a> BEM <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vertraut zu machen</a> . </p><br><h2 id="prolog">  Prolog </h2><br><p> BEM wurde wirklich als Rettung aus starker Konnektivität und Verschachtelung in CSS geboren.  Die Aufteilung des <code>style.css</code> Blattes in Dateien für jeden Block, jedes Element oder jeden Modifikator führte jedoch zwangsläufig zu einer ähnlichen Strukturierung des JavaScript-Codes. </p><br><p>  Im Jahr 2011 erwarb Open Source die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Commits des</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>i-bem.js</code></a> , das in Verbindung mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>bem-xjst</code></a> Template-Engine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>bem-xjst</code></a> .  Beide Technologien sind aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">XSLT hervorgegangen</a> und dienten der damals beliebten Idee, Geschäftslogik und Komponentenpräsentation zu trennen.  In der Außenwelt waren dies die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">großartigen Zeiten von</a> Lenker und Unterstrich. </p><br><p>  <code>bem-xjst</code> ist eine andere Art von Template-Engine.  Um mein Wissen über die Architektur von Standardisierungsansätzen zu erweitern, empfehle ich den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bericht von Sergei Berezhnoy</a> .  <code>bem-xjst</code> können die <code>bem-xjst</code> Vorlagen-Engine in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Online-Sandbox</a> ausprobieren. </p><br><p>  Aufgrund der Besonderheiten der Yandex-Suchdienste werden Benutzeroberflächen mithilfe von Daten erstellt.  Die Suchergebnisseite ist für jede Abfrage eindeutig. </p><br><p><img src="https://habrastorage.org/webt/6g/af/sc/6gafsczppz4ul8glzeliauwnkjc.png"><br>  <em>Suchanfrage nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a></em> </p><br><p><img src="https://habrastorage.org/webt/ni/z5/nc/niz5ncgv3rlci2jfymornobfvcy.png"><br>  <em>Suchanfrage nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a></em> </p><br><p><img src="https://habrastorage.org/webt/eb/6q/ws/eb6qws6vwtclkce_jsumewy4jkk.png"><br>  <em>Suchanfrage nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a></em> </p><br><p>  Wenn sich die Unterteilung in einen Block, ein Element und einen Modifikator auf das Dateisystem ausbreitete, konnte so viel wie möglich nur der erforderliche Code für jede Seite für jede Benutzeranforderung gesammelt werden.  Aber wie? </p><br><pre> <code class="plaintext hljs">src/components ├── ComponentName │ ├── _modName │ │ ├── ComponentName_modName.tsx —   │ │ └── ComponentName_modName_modVal.tsx —    │ ├── ElementName │ │ └── ComponentName-ElementName.tsx —   ComponentName │ ├── ComponentName.i18n —   │ │ ├── ru.ts —     │ │ ├── en.ts —     │ │ └── index.ts —    │ ├── ComponentName.test —   │ │ ├── ComponentName.page-object.js — Page Object │ │ ├── ComponentName.hermione.js —   │ │ └── ComponentName.test.tsx — unit- │ ├── ComponentName.tsx —    │ ├── ComponentName.scss —   │ ├── ComponentName.examples.tsx —    Storybook │ └── README.md —  </code> </pre> <br><p>  <em>Moderne Komponentenverzeichnisstruktur</em> </p><br><p>  Wie in einigen anderen Unternehmen sind in Yandex Schnittstellenentwickler für das Frontend verantwortlich, das aus dem Client-Teil im Browser und dem Server-Teil auf <code>Node.js</code>  Der Serverteil verarbeitet die Daten der "großen" Suche und legt ihnen Vorlagen auf.  Die primäre Datenverarbeitung konvertiert JSON in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BEMJSON</a> , die Datenstruktur für <code>bem-xjst</code> Template-Engine.  Die Vorlagen-Engine umgeht jeden Knoten des Baums und legt ihm eine Vorlage auf.  Da die primäre Konvertierung auf dem Server stattfindet und die Knoten aufgrund der Aufteilung in kleine Entitäten den Dateien entsprechen, wird bei der Vorlagengenerierung der Browsercode gepusht, der nur auf der aktuellen Seite verwendet wird. </p><br><p>  Unten finden Sie die Entsprechung von BEMJSON-Knoten zu Dateien im Dateisystem. </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'Select'</span></span>, <span class="hljs-attr"><span class="hljs-attr">elem</span></span>: <span class="hljs-string"><span class="hljs-string">'Item'</span></span>, <span class="hljs-attr"><span class="hljs-attr">elemMods</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'navigation'</span></span> } };</code> </pre> <br><pre> <code class="plaintext hljs">src/components ├── Select │ ├── Item │ │ _type │ │ ├── Select-Item_type_navigation.js │ │ └── Select-Item_type_navigation.css</code> </pre> <br><p>  Das modulare System von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>YModules</code></a> war für die Isolierung der Komponenten des JavaScript-Codes im Browser verantwortlich.  Sie können damit Module synchron und asynchron an den Browser senden.  Ein Beispiel für die Funktionsweise von Komponenten mit <code>YModules</code> und <code>i-bem.js</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">finden Sie hier</a> .  Für die meisten Entwickler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tun dies heute</a> das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>  webpack</code></a> und der unveröffentlichte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Standard für dynamische Importe</a> . </p><br><p>  Eine Reihe von BEM-Methoden, eine deklarative Template-Engine und ein JS-Framework mit einem modularen System ermöglichten die Lösung jedes Problems.  Im Laufe der Zeit hat sich die Dynamik der Benutzeroberflächen jedoch verbessert. </p><br><h2 id="novaya-nadezhda">  Neue Hoffnung </h2><br><p>  Im Jahr 2013 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verzauberte React die</a> Open Source.  Tatsächlich hat Facebook bereits 2011 damit begonnen.  James Long sagt in seinen Notizen von der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JS Conf US-</a> Konferenz: </p><br><blockquote>  Die letzten beiden Sitzungen waren eine Überraschung.  Der erste wurde von zwei Facebook-Entwicklern gegeben und sie kündigten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Facebook React an</a> .  Ich habe nicht viele Notizen gemacht, weil ich schockiert war, wie schlecht eine Idee ist, die ich denke.  Im Wesentlichen haben sie eine Sprache namens JSX erstellt, mit der Sie XML in JavaScript einbetten können, um reaktive Live-Benutzeroberflächen zu erstellen.  XML  In JavaScript. </blockquote><p>  React hat den Ansatz zum Entwerfen von Webanwendungen geändert.  Es ist so populär geworden, dass Sie heute keinen Entwickler finden können, der noch nichts von React gehört hat.  Aber noch etwas ist wichtig: Anwendungen sind anders geworden, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SPA ist</a> in unser Leben getreten. </p><br><p>  Es ist allgemein anerkannt, dass Yandex-Entwickler einen besonderen Sinn für Schönheit in Bezug auf Technologie haben.  Manchmal seltsam, was schwer zu diskutieren ist, aber niemals ohne Grund.  Als React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf GitHub Sterne</a> gewann, bestanden viele, die mit Yandex-Webtechnologien vertraut waren: Facebook gewann, ließ Ihr Handwerk fallen und schrieb alles auf React neu, bevor es zu spät war.  Es ist wichtig, zwei Dinge zu verstehen. </p><br><p>  Erstens gab es keinen Krieg.  Unternehmen konkurrieren nicht darum, die besten Rahmenbedingungen der Welt zu schaffen.  Wenn ein Unternehmen weniger Zeit (Lesegeld) für Infrastrukturaufgaben mit gleicher Produktivität verbringt, profitieren alle davon.  Es macht keinen Sinn, Frameworks zu schreiben, um Frameworks zu schreiben.  Die besten Entwickler erstellen Tools, die die Aufgaben des Unternehmens optimal lösen.  Unternehmen, Dienstleistungen, Ziele - alles ist anders.  Daher die Vielfalt der Werkzeuge. </p><br><p>  Zweitens suchten wir nach einer Möglichkeit, React so zu verwenden, wie wir es gerne hätten.  Mit all den Funktionen, die unsere oben beschriebenen Technologien bieten. </p><br><p>  Es wird allgemein angenommen, dass Code, der React verwendet, standardmäßig schnell ist.  Wenn Sie das auch denken, dann irren Sie sich zutiefst.  Das einzige, was React tut, ist in den meisten Fällen die optimale Interaktion mit dem DOM. </p><br><p>  Bis zur Version 16 hatte React einen schwerwiegenden Fehler.  Es war 10 mal langsamer als <code>bem-xjst</code> auf dem Server.  Wir konnten uns solche Abfälle nicht leisten.  Die Reaktionszeit für Yandex ist eine der wichtigsten Messgrößen.  Stellen Sie sich vor, wenn Sie nach einem Glühweinrezept fragen, erhalten Sie eine zehnmal langsamere Antwort als gewöhnlich.  Sie werden mit Ausreden nicht zufrieden sein, selbst wenn Sie etwas über Webentwicklung wissen.  Was können wir über die Erklärung sagen, wie "aber es ist für Entwickler bequemer geworden, mit dem DOM zu kommunizieren".  Fügen Sie hier das Verhältnis von Implementierungspreis und Gewinn hinzu - und Sie selbst treffen die einzig richtige Entscheidung. </p><br><p>  Zum Glück sind die Entwickler seltsame Leute.  Wenn etwas nicht funktioniert, ist dies kein Grund, alles fallen zu lassen ... </p><br><h2 id="shivorot-navyvorot">  Auf den Kopf gestellt </h2><br><p>  Wir waren zuversichtlich, die Langsamkeit von React besiegen zu können.  Wir haben bereits eine schnelle Template-Engine.  Alles, was Sie brauchen, ist, HTML auf dem Server mit <code>bem-xjst</code> zu generieren und auf dem Client React zu "erzwingen", dieses Markup als sein eigenes zu akzeptieren.  Die Idee war so einfach, dass nichts auf einen Misserfolg hindeutete. </p><br><p>  In Versionen bis einschließlich 15 hat React die Gültigkeit des Markups mithilfe einer Hash-Summe überprüft - einem Algorithmus, der jede Optimierung in einen Kürbis verwandelt.  Um React von der Gültigkeit des Markups zu überzeugen, musste für jeden Knoten eine ID angegeben und die Hash-Summe aller Knoten berechnet werden.  Es bedeutete auch, zwei Vorlagen zu unterstützen: Reagieren Sie für den Client und <code>bem-xjst</code> für den Server.  Einfache Geschwindigkeitstests mit ID-Installation machten deutlich, dass es keinen Sinn machte, fortzufahren. </p><br><p>  Die bem- <code>bem-xjst</code> ist ein sehr unterschätztes Tool.  Schauen Sie sich den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bericht des Hauptbetreuers von Glory Oliyanchuk an</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">überzeugen Sie sich</a> selbst.  <code>bem-xjst</code> basiert auf einer Architektur, mit der Sie eine Vorlagensyntax für verschiedene Transformationen des <code>bem-xjst</code> verwenden können.  Sehr ähnlich zu React, nicht wahr?  Mit dieser Funktion können heute Tools wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>react-sketchapp</code></a> . </p><br><p>  <code>bem-xjst</code> enthält <code>bem-xjst</code> zwei Arten von Konvertierungen: in HTML und in JSON.  Jeder ausreichend sorgfältige Entwickler kann seine eigene Engine schreiben, um Vorlagen in alles umzuwandeln.  Wir haben <code>bem-xjst</code> einen <code>bem-xjst</code> in eine Folge von Aufrufen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HyperScript-Funktionen umzuwandeln</a> .  Dies bedeutete vollständige Kompatibilität mit React und anderen Implementierungen des Virtual DOM-Algorithmus, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Preact</a> . </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yPV6pcMdezM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <em>Eine detaillierte Einführung in die Generierung von HyperScript-Funktionsaufrufen</em> </p><br><p>  Da React-Vorlagen das Nebeneinander von Layout und Geschäftslogik erfordern, mussten wir die Logik von <code>i-bem.js</code> in unsere Vorlagen <code>i-bem.js</code> , die dafür nicht vorgesehen waren.  Für sie war es unnatürlich.  Sie gingen anders.  Übrigens! </p><br><p>  Unten sehen Sie ein Beispiel aus den Tiefen des Verklebens verschiedener Welten in einer Laufzeit. </p><br><pre> <code class="javascript hljs">block(<span class="hljs-string"><span class="hljs-string">'select'</span></span>).elem(<span class="hljs-string"><span class="hljs-string">'menu'</span></span>)( def()(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Menu = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'../components/menu/menu'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MenuItem = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'../components/menu-item/menu-item'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> _select = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ctx._select; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> selectComponent = _select._select; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> React.createElement.apply(React, [ Menu, { <span class="hljs-attr"><span class="hljs-attr">mix</span></span>: { <span class="hljs-attr"><span class="hljs-attr">block</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.block, <span class="hljs-attr"><span class="hljs-attr">elem</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.elem }, <span class="hljs-attr"><span class="hljs-attr">ref</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">menu</span></span></span><span class="hljs-function"> =&gt;</span></span> selectComponent._menu = menu, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: _select.mods.size, <span class="hljs-attr"><span class="hljs-attr">disabled</span></span>: _select.mods.disabled, <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: _select.mods.mode, <span class="hljs-attr"><span class="hljs-attr">content</span></span>: _select.options, <span class="hljs-attr"><span class="hljs-attr">checkedItems</span></span>: _select.bindings.checkedItems, <span class="hljs-attr"><span class="hljs-attr">style</span></span>: _select.bindings.popupMenuWidth, <span class="hljs-attr"><span class="hljs-attr">onKeyDown</span></span>: _select.bindings.onKeyDown, <span class="hljs-attr"><span class="hljs-attr">theme</span></span>: _select.mods.theme, }].concat(_select.options.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">option</span></span></span><span class="hljs-function"> =&gt;</span></span> React.createElement( MenuItem, { <span class="hljs-attr"><span class="hljs-attr">onClick</span></span>: _select.bindings.onOptionCheck, <span class="hljs-attr"><span class="hljs-attr">theme</span></span>: _select.mods.theme, <span class="hljs-attr"><span class="hljs-attr">val</span></span>: option.value, }, option.content) )) ); }) );</code> </pre> <br><p>  Natürlich hatten wir unsere eigene Versammlung.  Wie Sie wissen, ist die schnellste Operation die Verkettung von Zeichenfolgen.  Der <code>bem-xjst</code> Motor wurde darauf gebaut, die Baugruppe wurde darauf gebaut.  Dateien mit Blöcken, Elementen und Modifikatoren lagen in Ordnern, und die Baugruppe musste die Dateien nur in der richtigen Reihenfolge kleben.  Mit diesem Ansatz können Sie JS, CSS und Vorlagen sowie die Entitäten selbst parallel kleben.  Das heißt, wenn Sie vier Komponenten in einem Projekt haben, vier Kerne auf dem Laptop und die Montage einer Komponententechnologie eine Sekunde dauert, dauert das Erstellen des Projekts zwei Sekunden.  Hier soll klarer werden, wie wir es schaffen, nur den notwendigen Code in den Browser zu pushen. </p><br><p>  All dies hat für uns <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ENB getan</a> .  Wir haben den endgültigen Baum zur Standardisierung nur zur Laufzeit erhalten, und da die Abhängigkeit zwischen den Komponenten etwas früher auftreten musste, um Bündel zu sammeln, wurde diese Funktion von der wenig bekannten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>deps.js</code></a> Technologie übernommen.  Sie konnten ein Abhängigkeitsdiagramm zwischen Komponenten erstellen, wonach der Kollektor den Code in der gewünschten Reihenfolge unter Umgehung des Diagramms kleben konnte. </p><br><p>  React Version 16 funktioniert in dieser Richtung nicht mehr. Die Ausführungsgeschwindigkeit der Vorlagen auf dem Server war <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gleich</a> .  In Produktionsstätten wurde der Unterschied nicht mehr wahrnehmbar. </p><br><p>  Knoten: <strong>v8.4.0</strong> <br>  Kinder: <strong>5K</strong> </p><br><table><thead><tr><th>  Renderer </th><th>  mittlere Zeit </th><th>  ops / sek </th></tr></thead><tbody><tr><td>  <strong>predct</strong> v8.2.6 </td><td>  66,235 ms </td><td>  15 </td></tr><tr><td>  <strong>bem-xjst</strong> v8.8.4 </td><td>  71,326 ms </td><td>  14 </td></tr><tr><td>  <strong>reagiere</strong> v16.1.0 </td><td>  73,966 ms </td><td>  14 </td></tr></tbody></table><br><p>  Über die folgenden Links können Sie den Verlauf des Ansatzes wiederherstellen: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://ru.bem.info/forum/961/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/awinogradov/react-bl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/awinogradov/xjst-ddsl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/awinogradov/ddsl-react</a> </li></ul><br><p>  Haben wir noch etwas versucht? </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/veged/bem-components-react</a> - der erste Ansatz zur Implementierung der Methodik in React; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/Yeti-or/bem-hazard</a> - ein ähnlicher Ansatz, der auf der BH-Template-Engine basiert.  Mit BH können Sie übrigens online herumspielen; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/dfilatov/bem-react</a> - Erstellen von Komponenten über BEMJSON; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/rebem</a> - BEM-Dienstprogramme in der React-Welt. </li></ul><br><p><img src="https://habrastorage.org/webt/uv/si/wt/uvsiwtsrexhffeuznrqhpxvtjva.png"></p><br><h2 id="motivaciya">  Motivation </h2><br><p>  In der Mitte der Geschichte wird es nützlich sein, darüber zu sprechen, was uns motiviert hat.  Es hat sich am Anfang gelohnt, aber - wer erinnert sich an das alte, dieses Auge als Geschenk.  Warum brauchen wir das alles?  Was kann BEM bringen, was React nicht kann?  Fragen, die fast jeder stellt. </p><br><h3 id="dekompoziciya">  Zersetzung </h3><br><p>  Die Funktionalität der Komponenten wird von Jahr zu Jahr komplizierter und die Anzahl der Variationen nimmt zu.  Dies wird durch <code>if</code> oder <code>switch</code> Konstruktionen ausgedrückt, wodurch die Codebasis zwangsläufig wächst, wodurch das Gewicht der Komponente und des Projekts, das eine solche Komponente verwendet, zunimmt.  Der Hauptteil der Logik der React-Komponente ist in der <code>render()</code> -Methode enthalten.  Um die Funktionalität einer Komponente zu ändern, muss der größte Teil der Methode neu geschrieben werden, was zwangsläufig zu einer exponentiellen Zunahme der Anzahl hochspezialisierter Komponenten führt. </p><br><p>  Jeder kennt die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bibliotheken</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Material-UI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fabric-UI</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React-Bootstrap</a> .  Im Allgemeinen haben alle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bekannten Bibliotheken</a> mit Komponenten den gleichen Nachteil.  Stellen Sie sich vor, Sie haben mehrere Projekte und alle verwenden dieselbe Bibliothek.  Sie nehmen die gleichen Komponenten, aber in verschiedenen Variationen: Hier gibt es Auswahlmöglichkeiten mit Kontrollkästchen, es gibt keine, es gibt blaue Schaltflächen mit einem Symbol, es gibt rote Schaltflächen ohne.  Das Gewicht von CSS und JS, das die Bibliothek Ihnen bietet, ist in allen Projekten gleich.  Aber warum?  Variationen von Komponenten sind in die Komponente selbst eingebettet und werden mitgeliefert, ob Sie es möchten oder nicht.  Für uns ist das inakzeptabel. </p><br><p>  Yandex hat auch eine eigene Bibliothek mit Komponenten - Lego.  Es wird in ~ 200 Diensten angewendet.  Möchten wir, dass die Verwendung von Lego in Search für Yandex.Health gleich viel kostet?  Sie kennen die Antwort. </p><br><h3 id="krossplatformennaya-razrabotka">  Plattformübergreifende Entwicklung </h3><br><p>  Um mehrere Plattformen zu unterstützen, erstellen sie meistens entweder eine separate Version für jede Plattform oder eine adaptive. </p><br><p>  Die Entwicklung einzelner Versionen erfordert zusätzliche Ressourcen: Je mehr Plattformen, desto mehr Aufwand.  Das Beibehalten des synchronen Zustands der Produkteigenschaften in verschiedenen Versionen führt zu neuen Schwierigkeiten. </p><br><p>  Die Entwicklung einer adaptiven Version verkompliziert den Code, erhöht das Gewicht und verringert die Geschwindigkeit des Produkts mit dem richtigen Unterschied zwischen den Plattformen. </p><br><p>  Wollen wir, dass unsere Eltern / Freunde / Kollegen / Kinder Desktop-Versionen auf Mobilgeräten mit geringerer Internetgeschwindigkeit und geringerer Produktivität verwenden?  Sie kennen die Antwort. </p><br><h3 id="eksperimenty">  Die Experimente </h3><br><p>  Wenn Sie Projekte für ein großes Publikum entwickeln, müssen Sie sich jeder Änderung sicher sein.  A / B-Experimente sind eine Möglichkeit, dieses Vertrauen zu gewinnen. </p><br><p>  Möglichkeiten, Code für Experimente zu organisieren: </p><br><ul><li>  Projektgabel und Erstellung von Service-Instanzen in der Produktion; </li><li>  Punktbedingungen innerhalb der Codebasis. </li></ul><br><p>  Wenn das Projekt viele langwierige Experimente umfasst, verursacht das Verzweigen der Codebasis erhebliche Kosten.  Es ist notwendig, jeden Zweig mit dem Experiment auf dem neuesten Stand zu halten: Port-korrigierte Fehler und Produktfunktionalität.  Die Codebasis-Verzweigung erschwert das Überschneiden von Experimenten mehrmals. </p><br><p>  Die Punktbedingungen funktionieren flexibler, erschweren jedoch die Codebasis: Die Bedingungen des Experiments können verschiedene Teile des Projekts beeinflussen.  Eine große Anzahl von Bedingungen beeinträchtigt die Leistung, indem die Codemenge für den Browser erhöht wird.  Es ist notwendig, die Bedingungen zu entfernen, den Code grundlegend zu machen oder das fehlgeschlagene Experiment vollständig zu löschen. </p><br><p>  In Search ~ 100 Online-Experimente in verschiedenen Kombinationen für unterschiedliche Zielgruppen.  Sie konnten es selbst sehen.  Denken Sie daran, vielleicht haben Sie die Funktionalität bemerkt und eine Woche später ist sie auf magische Weise verschwunden.  Wollen wir Produkttheorien testen, um Hunderte von Zweigen der aktiven Codebasis von 500.000 Zeilen zu verwalten, die täglich von ~ 60 Entwicklern geändert werden?  Sie kennen die Antwort. </p><br><h3 id="globalnye-izmeneniya">  Globaler Wandel </h3><br><p>  Sie können beispielsweise eine von <code>Button</code> geerbte <code>CustomButton</code> Komponente aus einer Bibliothek erstellen.  Der geerbte <code>CustomButton</code> jedoch nicht für alle Komponenten aus der Bibliothek, die <code>Button</code> .  Eine Bibliothek verfügt möglicherweise über eine <code>Search</code> , die aus <code>Input</code> und <code>Button</code> .  In diesem Fall wird der geerbte <code>CustomButton</code> nicht in der <code>CustomButton</code> .  Wollen wir die gesamte Codebasis, in der <code>Button</code> verwendet wird, manuell umgehen? </p><br><p><img src="https://habrastorage.org/webt/po/7j/fg/po7jfgnxrawurvtkoi-3ch2wneu.jpeg"></p><br><h2 id="dolgaya-doroga-v-kompoziciyu">  Langer Weg zur Komposition </h2><br><p>  Wir haben beschlossen, die Strategie zu ändern.  Im vorherigen Ansatz haben sie die Yandex-Technologie als Grundlage genommen und versucht, React dazu zu bringen, auf dieser Basis zu arbeiten.  Neue Taktiken deuteten auf das Gegenteil hin.  So entstand <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das bem-react-core-</a> Projekt. </p><br><blockquote>  Hör auf!  Warum überhaupt reagieren? </blockquote><p>  Wir sahen darin die Möglichkeit, explizites anfängliches Rendern in HTML und die manuelle Unterstützung des Status der JS-Komponente später in der Laufzeit zu beseitigen - tatsächlich wurde es möglich, BEMHMTL-Vorlagen und JS-Komponenten in einer Technologie zusammenzuführen. </p><br><h3 id="v100httpsgithubcombembem-reacttreev100">  <a href="">v1.0.0</a> </h3><br><p>  Zunächst wollten wir alle Best Practices und Eigenschaften <code>bem-xjst</code> zu React in die Bibliothek übertragen.  Das erste, was auffällt, ist die Signatur oder, wenn Sie es vorziehen, die Syntax zur Beschreibung der Komponenten. </p><br><p>  <em>Was hast du getan, da ist JSX!</em> </p><br><p>  Die erste Version wurde auf der Grundlage der Vererbung erstellt - einer Bibliothek, mit deren Hilfe Klassen und Vererbung implementiert werden können.  Wie einige von Ihnen sich erinnern, hatten Prototyp-Prototypen in JavaScript damals keine Klassen, es gab kein <code>super</code> .  Im Allgemeinen fehlen sie noch, genauer gesagt, dies sind nicht die Klassen, die zuerst in den Sinn kommen.  <code>inherit</code> hat alles getan, was Klassen im ES2015-Standard jetzt können, und was als schwarze Magie gilt: Mehrfachvererbung und Zusammenführung von Prototypen, anstatt die Kette neu aufzubauen, was sich positiv auf die Leistung auswirkt.  Sie werden sich nicht irren, wenn Sie der Meinung sind, dass es wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erben in Node.js</a> sinnvoll erscheint, aber sie funktionieren anders. </p><br><p>  Unten finden Sie ein Beispiel für die Syntax der Vorlagen <code>bem-react-core@v1.0.0</code> . </p><br><p>  <strong>App-Header.js</strong> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { decl } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bem-react-core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> decl({ <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'App'</span></span>, <span class="hljs-attr"><span class="hljs-attr">elem</span></span>: <span class="hljs-string"><span class="hljs-string">'Header'</span></span>, <span class="hljs-attr"><span class="hljs-attr">attrs</span></span>: { <span class="hljs-attr"><span class="hljs-attr">role</span></span>: <span class="hljs-string"><span class="hljs-string">'heading'</span></span> }, content() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>; } });</code> </pre> <br><p>  <strong>App-Header@desktop.js</strong> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { decl } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bem-react-core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> decl({ <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'App'</span></span>, <span class="hljs-attr"><span class="hljs-attr">elem</span></span>: <span class="hljs-string"><span class="hljs-string">'Header'</span></span>, <span class="hljs-attr"><span class="hljs-attr">tag</span></span>: <span class="hljs-string"><span class="hljs-string">'h1'</span></span>, attrs() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...this.__base(...arguments), <span class="hljs-string"><span class="hljs-string">'aria-level'</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, }, content() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">` </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.__base(...</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">arguments</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">     h1`</span></span>; } });</code> </pre> <br><p>  <strong>App-Header@touch.js</strong> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { decl } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bem-react-core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> decl({ <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'App'</span></span>, <span class="hljs-attr"><span class="hljs-attr">elem</span></span>: <span class="hljs-string"><span class="hljs-string">'Header'</span></span>, <span class="hljs-attr"><span class="hljs-attr">tag</span></span>: <span class="hljs-string"><span class="hljs-string">'h2'</span></span>, content() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">` </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.__base(...</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">arguments</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">  `</span></span>; } });</code> </pre> <br><p>  <strong>index.js</strong> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDomServer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom/server'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppHeader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'b:App e:Header'</span></span>; ReactDomServer.renderToStaticMarkup(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppHeader</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">);</span></span></code> </pre> <br><p>  <strong>output@desktop.html</strong> </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"App-Header"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heading"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-level</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span>A       h1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <strong>output@touch.html</strong> </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"App-Header"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heading"</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <em>Die Gerätevorlagen für komplexere Komponenten finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .</em> </p><br><p>  Da eine Klasse ein Objekt ist und die Arbeit mit Objekten in JavaScript am bequemsten ist, ist die Syntax angemessen.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Syntax wurde</a> später zu ihrem Mastermind <code>bem-xjst</code> . </p><br><p>  Die Bibliothek war ein globales Repository für Objektdeklarationen - die Ergebnisse der Ausführung der Deklarationsfunktion, Teile von Entitäten: ein Block, ein Element oder ein Modifikator.  BEM bietet einen eindeutigen Namensmechanismus und eignet sich daher zum Erstellen von Schlüsseln in einem Tresor.  Die resultierende React-Komponente wurde an ihrem Verwendungsort geklebt.  Der Trick ist, dass die <code>decl</code> beim Importieren des Moduls funktioniert hat.  Auf diese Weise konnte anhand einer einfachen Liste von Importen angegeben werden, welche Teile der Komponente an den jeweiligen Stellen benötigt werden.  Aber denken Sie daran: Die Komponenten sind komplex, es gibt viele Teile, die Liste der Importe ist lang, die Entwickler sind faul. </p><br><h4 id="magiya-importov">  Magie importieren </h4><br><p>  Wie Sie sehen können, gibt es in den Codebeispielen Zeilen, <code>import AppHeader from 'b:App e:Header'</code> . </p><br><p>  <em>Du hast den Standard gebrochen!</em>  <em>Es ist unmöglich!</em>  <em>Es wird einfach nicht funktionieren!</em> </p><br><p>  Erstens arbeitet der Importstandard nicht mit Begriffen im Sinne von „Es muss einen Pfad zu einem echten Modul in der Importlinie geben“.  Zweitens ist es syntaktischer Zucker, der mit Babel umgewandelt wurde.  Drittens, seltsame <code>import txt from 'raw-loader!./file.txt';</code> Interpunktionskonstrukte für den Webpack- <code>import txt from 'raw-loader!./file.txt';</code>  aus irgendeinem Grund haben sie niemanden gestört. <br>  Unser Block wird also auf zwei Plattformen präsentiert: <code>desktop</code> , <code>touch</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Hello <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'b:Hello'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     : var Hello = [ require('path/to/desktop/Hello/Hello.js'), require('path/to/touch/Hello/Hello.js') ][0].applyDecls();</span></span></code> </pre> <br><p>          <code>Hello</code> ,     <code>applyDecls</code> ,          <code>inherit</code>   ,       React-. </p><br><p>   Babel,   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> .    webpack,       , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> . </p><br><p>  ,   : </p><br><ul><li> ,   ,         ; </li><li>     ; </li><li>  React-    . </li></ul><br><p>    : </p><br><ul><li>   TypeScript/Flow; </li><li>    React- ; </li><li> -         ; </li><li>      . </li></ul><br><h3 id="v200httpsgithubcombembem-reacttreev200"> <a href="">v2.0.0</a> </h3><br><p>     <code>bem-react-core@v1.0.0</code>  ,       . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Elem } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bem-react-core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Button } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../Button'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppHeader</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Elem</span></span></span><span class="hljs-class"> </span></span>{ block = <span class="hljs-string"><span class="hljs-string">'App'</span></span>; elem = <span class="hljs-string"><span class="hljs-string">'Header'</span></span>; tag() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'h2'</span></span>; } content() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br><p>     ,     .    ,   ,      TypeScript/Flow.   ,     <code>inherit</code>  «» ,     ,            . </p><br><p>   : <br> —         webpack    Babel; <br> —      ; <br> —       ,    . </p><br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HOC</a> ,             . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Block, Elem, withMods } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bem-react-core'</span></span>; interface IButtonProps { <span class="hljs-attr"><span class="hljs-attr">children</span></span>: string; } interface IModsProps extends IButtonProps { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'link'</span></span> | <span class="hljs-string"><span class="hljs-string">'button'</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//   Text class Text extends Elem { block = 'Button'; elem = 'Text'; tag() { return 'span'; } } //   Button class Button&lt;T extends IModsProps&gt; extends Block&lt;T&gt; { block = 'Button'; tag() { return 'button'; } mods() { return { type: this.props.type }; } content() { return ( &lt;Text&gt;{this.props.children}&lt;/Text&gt; ); } } //    Button,    type   link class ButtonLink extends Button&lt;IModsProps&gt; { static mod = ({ type }: any) =&gt; type === 'link'; tag() { return 'a'; } mods() { return { type: this.props.type }; } attrs() { return { href: 'www.yandex.ru' }; } } //   Button  ButtonLink const ButtonView = withMods(Button, ButtonLink); ReactDOM.render( &lt;React.Fragment&gt; &lt;ButtonView type='button'&gt;Click me&lt;/ButtonView&gt; &lt;ButtonView type='link'&gt;Click me&lt;/ButtonView&gt; &lt;/React.Fragment&gt;, document.getElementById('root') );</span></span></code> </pre> <br><p>              ,     . </p><br><p> <code>withMods</code>       ,   (),      .   ,     , withMods        ,      .      .       , ,     ,   ( )   .               .       ,   ,    —    ,    . </p><br><p> ,   : </p><br><ul><li>    . ,        .   ,    TS.        ,      .    ES5 TS   super   ,         . , TS     ,    . </li><li>    . TS  ES6  Babel  ES5.      ,    npm-    .  ,          Babel. </li></ul><br><p>  : </p><br><ul><li>       ,   . ,     . :    DOM-.     HOC,      .   withMods       . </li><li>   (, , )       .             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SFC</a> . </li><li>  CSS-.  CSS-   JS-     .      ,   ,          . </li></ul><br><p>      v2. </p><br><h2 id="manifest">  </h2><br><p> ,    .   .  ,    ,      1  2.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> . </p><br><p>   —    .   CSS-     HOC,        —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dependency injection</a> . </p><br><p>       React: </p><br><ul><li>   CSS-. </li><li>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> (, ); </li></ul><br><p>         .         .        <code>React.ComponentType</code>     -.         HOC     compose    . </p><br><p>             . </p><br><p>        dependency injection,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>React.ContextAPI</code></a>    .             ,        ,        .        ,      .   DI —  HOC,     .         .     ,  ,         . </p><br><p> ,    ,         .   ,      ,    4 ,    <code>1.5Kb</code> . </p><br><p>     .  Vielen Dank an diejenigen, die bis zum Ende gelesen haben.     ,     React  . . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438598/">https://habr.com/ru/post/de438598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438588/index.html">Benutzerdefiniertes GoogleTranslate-Widget für die Website</a></li>
<li><a href="../de438590/index.html">Donner im Paradies oder Warum Sie FlylinkDC ++ nicht verwenden sollten</a></li>
<li><a href="../de438592/index.html">Worauf Sie bei der Auswahl eines Lesegeräts achten sollten - wir sprechen über den Formfaktor und die Anzeige</a></li>
<li><a href="../de438594/index.html">Arbeitsplatz und 4k @ 60Hz</a></li>
<li><a href="../de438596/index.html">Speichern von Benutzerdaten nach dem erneuten Laden der Seite</a></li>
<li><a href="../de438600/index.html">SciPy, Eingabe und Ausgabe in MATLAB</a></li>
<li><a href="../de438602/index.html">Wir zerlegen das Protokoll der Pager-Nachrichten POCSAG, Teil 1</a></li>
<li><a href="../de438606/index.html">Anmutige Erniedrigung. Bericht Yandex.Taxi</a></li>
<li><a href="../de438610/index.html">Responsive Figma-Vorlagen: Erstellen einer flexiblen Designkomponente für die mobile iOS-Navigation</a></li>
<li><a href="../de438614/index.html">Was ist eine hochwertige Leerlaufanimation? Entwickler teilen ihre Lieblingsbeispiele.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>