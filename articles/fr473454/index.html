<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÖ üì• üßñüèæ Automatisation des tests √† l'aide de Selenide via Selenoid dans un conteneur Docker üïö üéì üë®üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article sera utile aux experts en assurance qualit√© d√©butants, ainsi qu'√† ceux qui sont int√©ress√©s par les fonctionnalit√©s et les capacit√©s de fra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisation des tests √† l'aide de Selenide via Selenoid dans un conteneur Docker</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473454/"><p> Cet article sera utile aux experts en assurance qualit√© d√©butants, ainsi qu'√† ceux qui sont int√©ress√©s par les fonctionnalit√©s et les capacit√©s de frameworks de test populaires tels que Selenide et Selenoid. <br><br>  Nous examinons ici un projet de base sur le s√©l√©nium.  Nous verrons comment connecter <b>Selenium</b> et <b>TestNG</b> au projet, un exemple de Page Object avec une description des √©l√©ments de la page et des m√©thodes utilis√©es. <br><br>  Ensuite, familiarit√© avec <b>Selenide</b> : consid√©rez le framework lui-m√™me, ses principales caract√©ristiques et avantages, en ajoutant Selenide √† un projet de test.  Envisagez de travailler avec les √©l√©ments, les contr√¥les et les attentes disponibles dans Selenide. <br><br>  Et enfin, <b>connectons le</b> framework <b>Selenoid</b> √† notre projet pour ex√©cuter des tests dans le conteneur <b>Docker</b> et √† l'ext√©rieur. <br><br><img src="https://habrastorage.org/webt/fq/0u/6m/fq0u6mqwmrsun_01cyazmpwa6yc.jpeg"><br><a name="habracut"></a><br><br>  <i>* L'article a √©t√© pr√©par√© sur la base d'un rapport de Nikita Kalinichenko - sp√©cialiste senior en assurance qualit√© chez IntexSoft.</i> <i><br></i>  <i>L'article contient des liens vers des documents externes.</i> <br></p><br><h3>  1. S√©l√©nium + TestNG </h3><br>  Nous envisageons un projet sur le <b>g√©n√©rateur Maven</b> , nous pouvons donc trouver une description de la structure du projet dans le fichier <i>pom.xml</i> .  Afin d'utiliser <b>Selenium</b> et <b>TestNG</b> , les d√©pendances appropri√©es doivent √™tre ajout√©es √† notre fichier <i>pom.xml</i> .  Vous pouvez les observer entre les balises de <i>d√©pendances</i> ci-dessous: <br><br><pre><code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;project xmlns=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span> xmlns:xsi=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span> xsi:schemaLocation=<span class="hljs-string"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span>&gt; &lt;modelVersion&gt;<span class="hljs-number"><span class="hljs-number">4.0</span></span>.0&lt;/modelVersion&gt; &lt;groupId&gt;test&lt;/groupId&gt; &lt;artifactId&gt;test&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">1.0</span></span>-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.141</span></span>.59&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.testing&lt;/groupId&gt; &lt;artifactId&gt;testing&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">6.14</span></span>.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt;</code> </pre> <br>  Ensuite, nous allons voir un exemple d'un objet Page: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignUpPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WebDriver driver)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.driver = driver; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By emailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By confirmEmailFriend = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-confirm-email"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By passwordField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-password"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By displayNameField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-displayname"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By monthDropDown = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-month"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By dayField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-day"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By yearField = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-dob-year"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By shareCheckbox = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-thirdparty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> By registerButton = cssSelector(<span class="hljs-string"><span class="hljs-string">"#register-button-email-submit"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       driver.findElement(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailFriend(String email) {...} //    password public SignUpPage typePassword(String Password) {...} //      public SignUpPage typeName(String name) {...} //   public SignUpPage setMonth(String month) {...} //    Day public SignUpPage typeDay(String day) {...} //    Year public SignUpPage typeYear(String year) {...}</span></span></code> </pre> <br>  Comme nous pouvons le voir, en haut du fichier java se trouve une description des variables avec des localisateurs pour les √©l√©ments de la page d'enregistrement.  Sous la section variable se trouvent des m√©thodes permettant d'interagir directement avec les √©l√©ments de notre page. <br><br>  Ouvrons les tests eux-m√™mes: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    private WebDriver driver; //   private SignUpPage page; @BeforeMethod public void setUp() { //    geckodriver System.setProperty("webdriver.gecko.driver", "C:\\Users\\Nikita\\IdeaProjects\\autotests_examples\\drivers\\geckodriver.exe"); //   driver = new FirefoxDriver(); //  ,       driver.manage().timeouts().impicitlyWait(10, TimeUnit.SECONDS); // url      webdrivera get driver.get("https://www.spotify.com/us/signup/"); }</span></span></code> </pre> <br>  Comme vous pouvez le voir, dans l'annotation <b>BeforeMethod,</b> nous d√©crivons ce que nous aurons avant chaque m√©thode. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">typeInvalidYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          driver page = new SignUpPage(driver); //  page.setMonth("December"); //  .typeDay("20") //  .typeYear("85") //  .setShare(true); //  ,    ; Assert.assertTrue(page.isErrorVisible("Please enter a valid year."));</span></span></code> </pre> <br>  L'annotation <b>Test fournit du</b> code pour les m√©thodes de test. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AfterMethod</span></span> <span class="hljs-comment"><span class="hljs-comment">//,   public void tearDown() { driver.quit(); }</span></span></code> </pre><br>  Et l'annotation <b>AfterMethod</b> contient du code qui doit s'ex√©cuter apr√®s chaque m√©thode. <br><br>  Lors de l'ex√©cution de tests √† l'aide de <b>Selenium</b> , les <b>√©v√©nements</b> suivants se produisent: <br><br><ol><li>  Ouverture d'une fen√™tre de navigateur distincte </li><li>  Aller √† l'URL </li><li>  Ex√©cution du code de test </li><li>  Fermer la session et la fen√™tre du navigateur apr√®s chaque test </li></ol><br>  Le prochain test fera de m√™me.  Il convient de mentionner que l'ex√©cution de tests sur le s√©l√©nium est un processus plut√¥t gourmand en ressources. <br><br><h3>  2. S√©l√©niure: quoi, o√π et comment </h3><br>  Qu'est-ce que <b>Selenide</b> lui-m√™me, quelles sont ses principales caract√©ristiques et avantages? <br><br>  En bref, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Selenide</a> est un wrapper autour de Selenium WebDriver qui le rend rapide et facile √† utiliser lors de l'√©criture de tests.  √Ä la base, Selenide est un outil d'automatisation des actions des utilisateurs dans un navigateur, ax√© sur la commodit√© et la facilit√© d'impl√©mentation de la logique m√©tier dans les autotests dans la langue de l'utilisateur, sans √™tre distrait par les d√©tails techniques de l'utilisation du ¬´pilote de navigateur¬ª.  Par exemple, nous n'avons pas besoin de nous concentrer sur le travail avec les attentes des √©l√©ments dans le processus d'automatisation des tests d'applications Web dynamiques, ainsi que sur la mise en ≈ìuvre d'actions de haut niveau sur les √©l√©ments. <br><br>  Principaux et principaux avantages de Selenide: <br><br><ul><li>  Syntaxe concise de style jQuery </li><li>  R√©soudre automatiquement la plupart des probl√®mes avec Ajax, les attentes et les d√©lais </li><li>  Gestion de la vie du navigateur </li><li>  Cr√©er automatiquement des captures d'√©cran </li></ul><br>  L'objectif de Selenide est de se concentrer sur la logique m√©tier des tests et non de ¬´gaspiller¬ª l'√©nergie mentale sur les d√©tails techniques. <br><br><h4>  Traduction du projet sur Selenide </h4><br>  Afin de connecter Selenide et de commencer √† travailler avec lui, dans le fichier <i>pom.xml</i> entre <i>les</i> balises de <i>d√©pendances,</i> nous <i>sp√©cifions</i> la d√©pendance √† Selenide.  Puisque nous n'avons plus besoin de la d√©pendance au s√©l√©nium, nous la supprimons simplement. <br><br><pre> <code class="java hljs">&lt;dependency&gt; &lt;groupId&gt;com.codeborne&lt;/groupId&gt; &lt;artifactId&gt;selenide&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.2</span></span>.8&lt;/version&gt; &lt;/dependency&gt;</code> </pre> <br>  De plus, afin de se connecter et de commencer √† utiliser Selenide dans notre projet, nous devons effectuer plusieurs importations.  Exemples d'importation: <br><br>  <i>import statique com.codeborne.selenide.Selenide. *;</i> <br>  <i>import statique com.codeborne.selenide.Selectors. *;</i> <br>  <i>import statique com.codeborne.selenide.Condition. *;</i> <br>  <i>import statique com.codeborne.selenide.CollectionCondition. *;</i> <br><br>  Pour plus d'informations sur la connexion de Selenide √† l'aide des autres g√©n√©rateurs de projet, consultez la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">D√©marrage rapide</a> de la documentation Selenide. <br><br><h4>  Travailler avec des √©l√©ments, des contr√¥les et des attentes </h4><br>  Passons au travail de Selenide avec des √©l√©ments et familiarisons-nous avec certains des contr√¥les et des attentes qui s'offrent √† nous √† Selenide. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignUpTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    private SignUpPage page; @BeforeClass public static void setUp() { //Property baseurl,     Configuration     url baseurl = "https://www.spotify.com"; //Property browser,     Configuration          browser = "chrome"; }</span></span></code> </pre> <br>  Dans le fichier de test, nous rempla√ßons l'annotation <b>BeforeMethod</b> par l'annotation <b>BeforeClass</b> , puisque nous n'en avons plus besoin, Selenide √©limine le besoin d'√©crire les m√©thodes Before et After - <b>Selenide</b> reprend la fonction AfterMethod.  Il ne nous reste que l'annotation <b>BeforeClass</b> pour enregistrer quelques <i>propri√©t√©s</i> . <br><br>  Dans l'annotation <b>BeforeClass,</b> nous avons enregistr√© une <i>propri√©t√© baseurl</i> , qui est dans la classe de <i>configuration</i> et sera l'url de base.  Par cons√©quent, <i>driver.get</i> , que nous avons utilis√© dans les tests sur Selenium, n'est plus n√©cessaire.  Dans le <i>navigateur de propri√©t√©s,</i> nous d√©finissons le navigateur sur lequel nous ex√©cuterons nos tests. <br><br>  Dans notre projet de test, nous pouvons abandonner compl√®tement le pilote Selenium, Selenide se chargera de tout le travail avec lui, l'encapsulant dans ses classes.  Nous devrons nous concentrer sur la logique des tests eux-m√™mes. <br><br>  Passons √† l'utilisation de Selenide sur notre page: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//       Selenide open public SignUpPage open() { //   Selenide.open (relativeOrAbsoluteUrl: "/us/signup/"); return this; } //    email public SignUpPage typeEmail(string Email) { //       $(emailFriend).sendKeys(email); return this; }</span></span></code> </pre> <br>  Lorsque vous appelez la m√©thode <i>open</i> , Selenide lance le navigateur lui-m√™me et ouvre la page.  Il s'assure √©galement que le navigateur se ferme √† la fin.  √Ä S√©l√©nide.  <i>ouvert,</i> nous pouvons enregistrer le chemin complet avec <i>http</i> , ou en passer par rapport √† baseurl - <i>URL relative</i> .  En tant que <i>baseurl,</i> nous avons donc sp√©cifi√© le chemin absolu dans la m√©thode Selenide.  <i>ouvrir</i> il nous suffira de sp√©cifier "/". <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    email public SignUpPage typeEmail(String email) { //       $(emailField).sendKeys(email); return this; } //    Confirm email public SignUpPage typeConfirmEmailField(String email) { //       $(confirmEmailField).setValue(email); return this; }</span></span></code> </pre><br><p>  Afin de trouver un √©l√©ment √† l'aide de Selenide, nous devons sp√©cifier <b>$</b> au lieu de <i>driver.findElement</i> , qui est utilis√© dans Selenium.  Autrement dit, en utilisant la m√©thode d'un caract√®re de longueur, nous pouvons trouver directement l'√©l√©ment lui-m√™me.  Par d√©faut, la m√©thode de recherche est accept√©e sous forme de cha√Æne, similaire √† la biblioth√®que JavaScript jQuery. <br><br>  Pour utiliser Selenide pour trouver une liste d'√©l√©ments, vous devez sp√©cifier deux caract√®res <b>$$</b> .  Au lieu de <i>List &lt;WebElement</i> , nous prescrivons <i>ElementsCollection</i> , qui est d√©j√† √©tendu par des m√©thodes suppl√©mentaires. <br></p><br><p>  Pour travailler avec des √©l√©ments, nous pouvons utiliser √† la fois les m√©thodes Selenium standard <i>(sendKeys ())</i> et <i>setValue ()</i> ou une version plus courte de <i>val ()</i> . <br></p><br><p>  Sur la base du nom, comme nous le voyons, les m√©thodes Selenide sont plus compr√©hensibles.  La m√©thode <i>click ()</i> reste ainsi.  Bien que Selenide ait plusieurs m√©thodes <i>click (): contextClick ()</i> (simulant un clic droit), <i>doubleClick ()</i> (simulant un double-clic sur un √©l√©ment), etc.  Ayant d√©j√† trouv√© un √©l√©ment, nous pouvons continuer la recherche en utilisant d'autres localisateurs. </p><br><p>  La m√©thode Selenide <i>find ()</i> diff√®re de la m√©thode Selenium <i>driver.findElement (By)</i> en ce qu'elle peut recevoir imm√©diatement des s√©lecteurs CSS et fonctionne avec des √©l√©ments Selenide et non avec des √©l√©ments Web.  Fondamentalement, les √©l√©ments Selenide sont une alternative plus intelligente et avec leurs m√©thodes aux √©l√©ments Web Selenium. </p><br><p>  Selenide contient d√©j√† des m√©thodes qui devraient √™tre ex√©cut√©es via une classe d' <i>actions</i> ou d'une autre mani√®re.  Il vous permet d'√©crire des m√©thodes courtes et ¬´belles¬ª √©crites dans un langage compr√©hensible par tous.  Selenide dispose √©galement d'une grande flexibilit√©, gr√¢ce √† laquelle nous pouvons utiliser les fonctionnalit√©s standard de Selenium. </p><br><p>  D'autres m√©thodes Selenide peuvent √©galement √™tre trouv√©es dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">documentation officielle</a> . <br></p><br><p>  Consid√©rez les exemples larges et compr√©hensibles de contr√¥les que Selenide nous fournit: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     page.getError("Please enter a valid year.").shouldBe(Condition.visible); //  ,      page.getError("When were you born?").shouldNotBe(Condition.visible); //       page.getErrors().shoildHave(CollectionCondition.size(6)); //      page.getErrorByNumber(3).shouldHave(Condition.text("Please enter your birth month."));</span></span></code> </pre><br><p>  Le sch√©ma de v√©rification Selenide nous permet de prendre un √©l√©ment, de le trouver et d'utiliser les formulations suivantes pour lui: should, shouldBe, shouldHave, shouldNot, shouldNotBe et shouldNotHave.  Le sch√©ma de v√©rification se r√©duit √† trouver l'√©l√©ment et √† l'appeler de ces formulations.  Plus loin entre parenth√®ses, nous indiquons soit l'√©tat auquel il doit correspondre ou non, soit un attribut. </p><br><p>  Selon la logique et nos besoins, nous utilisons certaines m√©thodes.  Si nous voulons v√©rifier que l'√©l√©ment existe, nous utilisons la m√©thode should (exist), si nous voulons v√©rifier la visibilit√© de l'√©l√©ment, nous utilisons shouldBe (visible), etc.  En fait, nous utilisons seulement trois formulations: soit should, shouldBe, shouldHave, ou leur inverse shouldNot, shouldNotBe, shouldNotHave. </p><br><p>  Les contr√¥les sur les √©l√©ments ou les collections d'√©l√©ments sont effectu√©s sur S√©l√©niure en utilisant les m√©thodes d√©crites ci-dessus, qui satisfont √† la condition de v√©rification.  Ils jouent le r√¥le d'attendre le moment o√π l'√©l√©ment remplira une condition, et non seulement d'effectuer une v√©rification de la condition. </p><br><p>  Le libell√© de Selenide est tout √† fait logique et compr√©hensible.  Nous pouvons r√©diger nos ch√®ques, soit en utilisant les indices de l'environnement de d√©veloppement, soit des hypoth√®ses logiques.  Et en soi, nous pouvons toujours regarder le code d'impl√©mentation des m√©thodes n√©cessaires dans la documentation ou regarder l'impl√©mentation de la m√©thode elle-m√™me. <br></p><br><h3>  Captures d'√©cran automatiques dans le test <br></h3><br><p>  Pour <b>JUnit</b> : <br><br>  Pour prendre automatiquement une capture d'√©cran apr√®s chaque test qui √©choue, vous pouvez importer et sp√©cifier la <b>r√®gle</b> <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.junit.screenShooter; <span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failledTests();</code> </pre><br>  Mais en fait, c'est un rudiment, car Selenide prend depuis longtemps automatiquement des captures d'√©cran lorsque les tests tombent.  C'est tr√®s pratique pour analyser nos erreurs.  Par d√©faut, Selenide place les captures d'√©cran dans le dossier <i>build / reports / tests</i> . <br><br>  Afin de prendre automatiquement une capture d'√©cran apr√®s chaque test (y compris le vert), vous pouvez utiliser la commande suivante: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter makeScreenshotOnFailure = ScreenShooter.failedTests().succeededTests();</code> </pre><br><p>  Pour <b>TestNG,</b> nous importons √©galement: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.codeborne.selenide.testng.ScreenShooter; <span class="hljs-meta"><span class="hljs-meta">@Listeners</span></span>({ ScreenShooter.class})</code> </pre><br><p>  Pour prendre des captures d'√©cran apr√®s des tests verts, vous devez appeler la commande suivante avant d'ex√©cuter les tests: <br></p><br><pre> <code class="java hljs">ScreenShooter.captureSuccessfulTests = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br><p>  Vous pouvez √©galement prendre une capture d'√©cran n'importe o√π dans le test sur une seule ligne: <br></p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> com.codeborne.selenide.selenide.screenshot; screenshot(<span class="hljs-string"><span class="hljs-string">"my_file_name"</span></span>);</code> </pre><br><p>  Selenide cr√©era deux fichiers: <i>my_file_name.png</i> et <i>my_file_name.html</i> <br><br></p><h3>  3. Docker: caract√©ristiques et avantages </h3><br><p>  Passons directement √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Docker</a> et consid√©rons ses avantages: <br></p><br><ul><li>  Processus de d√©veloppement acc√©l√©r√©.  Pas besoin d'installer des outils auxiliaires; ils peuvent √™tre ex√©cut√©s dans des conteneurs </li><li>  Encapsulation d'application pratique </li><li>  Surveillance claire </li><li>  Mise √† l'√©chelle facile </li></ul><br><p>  Lorsque nous parlons de Docker, les points suivants doivent √™tre clarifi√©s: </p><br><p>  <b>Un conteneur</b> est une instance ex√©cutable qui encapsule le logiciel requis.  Il se compose d'images.  Il peut √™tre facilement supprim√© et recr√©√© en peu de temps. </p><br><p>  <b>Une image</b> est l'√©l√©ment de base de chaque conteneur. </p><br><p>  <b>Docker Hub</b> est un r√©f√©rentiel d'interface public fourni par Docker Inc.  Il stocke de nombreuses images.  La ressource est une source d'images ¬´officielles¬ª r√©alis√©es par l'√©quipe Docker ou cr√©√©es en collaboration avec un d√©veloppeur de logiciels. <br></p><br><h4>  Installer Docker </h4><br><p>  Pour obtenir Docker sur Windows, acc√©dez √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">https://hub.docker.com</a> et t√©l√©chargez l'application <b>Docker Desktop</b> pour Windows ou MacOS et installez-la plus tard. </p><br><p>  Pour Ubuntu Linux, installez Docker avec la commande <i>sudo apt install docker.io</i> </p><br><p>  Ensuite, vous devez d√©marrer Docker et le configurer pour qu'il d√©marre automatiquement au d√©marrage du syst√®me en ex√©cutant les commandes suivantes: </p><br><ul><li>  <i>sudo systemctl start docker</i> </li><li>  <i>sudo systemctl enable docker</i> </li></ul><br><br><h3>  4. Selenoid: caract√©ristiques et avantages </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Selenoid</a> est un serveur qui ex√©cute des navigateurs isol√©s dans des conteneurs Docker. </p><br><p>  Avantages de l'utilisation de Selenoid: </p><br><ul><li>  Environnement unifi√© pour l'ex√©cution d'autotests parall√®les <br></li><li>  Environnement isol√©: chaque navigateur s'ex√©cute dans un conteneur s√©par√©, ce qui nous permet d'isoler compl√®tement l'environnement de notre navigateur <br></li><li>  √âvolutivit√©: l'environnement n'affecte pas la qualit√© et les tests en continu <br></li><li>  Consommation et utilisation des ressources: Selenoid vous permet de maintenir une charge √©lev√©e sans co√ªts de ressources suppl√©mentaires;  en outre, il recycle tous les conteneurs inactifs apr√®s la fin de sa session, maintenant ainsi constamment la quantit√© de m√©moire libre n√©cessaire. <br></li><li>  Installation: ne prend pas beaucoup de temps et s'effectue, en fait, avec une seule commande <br></li><li>  Prise en charge simultan√©e de plusieurs versions d'un navigateur: cette option n'est disponible qu'avec Selenoid, pour cela vous devez cr√©er plusieurs conteneurs avec les navigateurs n√©cessaires <br></li><li>  Focus: le syst√®me d'exploitation fonctionne de telle mani√®re qu'une seule fen√™tre peut √™tre mise au point.  Lors de l'ex√©cution de plusieurs navigateurs sur la m√™me machine, les fen√™tres peuvent commencer √† rivaliser pour la mise au point.  Selenoid n'a pas un tel probl√®me, car chaque test s'ex√©cute dans un conteneur s√©par√© <br></li><li>  Interface utilisateur et journaux: Selenoid vous permet d'acc√©der rapidement aux journaux existants.  De plus, il est possible de l'int√©grer √† la pile <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ELK</a> pour une collecte et une analyse plus rapides des fichiers actuels. <br></li></ul><br><p>  De plus, Selenoid est assez pratique √† utiliser et poss√®de une interface informative. </p><br><h4>  Installer Selenoid </h4><br><p>  √âtapes pr√©paratoires √† l'installation de Selenoid: </p><br><ul><li>  Un Docker install√© et en cours d'ex√©cution est requis, car l'utilisation de Selenoid avec Docker est discut√©e plus en d√©tail. <br></li><li>  La fa√ßon la plus simple d'installer Selenoid est de t√©l√©charger Configuration Manager, qui est utilis√© pour automatiser l'installation des produits <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b>Aerokube</b></a> , qui est Selenoid <br></li><li>  Renommez le fichier t√©l√©charg√© en <i>cm.exe</i> (pour une interaction facile) <br></li><li>  Ex√©cutez Selenoid avec la commande: <br><br>  <i>./cm.exe selenoid start --vnc</i> <br>  <i>./cm.exe selenoid-ui start</i> </li></ul><br>  √Ä la suite de la commande <i>./cm.exe selenoid start - vnc</i> , les images seront charg√©es avec le serveur VNC, c'est-√†-dire des images dans lesquelles la possibilit√© de voir l'√©cran du navigateur en temps r√©el est disponible.  De plus, lors de l'ex√©cution de cette commande, la derni√®re version de Selenoid sera t√©l√©charg√©e avec les conteneurs, les fichiers ex√©cutables du pilote Web, les fichiers de configuration seront cr√©√©s et la derni√®re √©tape lancera imm√©diatement Selenoid lui-m√™me. <br><br>  <i>Avec la</i> commande suivante <i>./cm.exe selenoid-ui</i> start, nous t√©l√©chargeons et <b>ex√©cutons Selenoid UI</b> - un shell graphique √† travers lequel nous pouvons voir la progression de nos tests en temps r√©el, des enregistrements vid√©o d'ex√©cution de script, des exemples de fichiers de configuration, collecter des statistiques, etc. d. <br><br>  Selenoid fonctionne par d√©faut sur le port Selenium 4444 standard. Le port peut √™tre red√©fini √† l'aide du <i>commutateur --port</i> . <br><br>  Selenoid a √©t√© cr√©√© pour fonctionner dans de grands clusters Selenium et n'a donc pas d'interface utilisateur int√©gr√©e.  Essayez donc d'ouvrir <br>  Point de terminaison pour les tests de l' <s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">h√¥te local</a> : 4444 / wd / hub</s> renverra une erreur 404. <br><br><h4>  S√©l√©no√Øde UI statistiques et sessions </h4><br>  L'interface utilisateur Selenoid est disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">http: // localhost: 8080 /</a> <br><br><img src="https://habrastorage.org/webt/_f/oy/rb/_foyrbnw27c5zmpypzanlfdzwdu.png"><br><p>  Ici, nous pouvons nous familiariser avec les statistiques et les sessions.  Affichez l'utilisation actuelle des quotas, les navigateurs en attente et la file d'attente elle-m√™me.  Selenoid UI re√ßoit des mises √† jour via SSE, vous n'avez donc pas besoin d'actualiser la page dans votre navigateur pour voir ce qui se passe.  Apr√®s toute interruption temporaire, le contenu de la page sera automatiquement actualis√©. <br></p><br><p>  Si nous parlons de tests simultan√©s sur divers appareils: par exemple, nous avons une application Web multiplateforme avec une fonctionnalit√© de chat en temps r√©el, nous pouvons alors tester simultan√©ment l'interaction entre eux, ce qui est certainement pratique. </p><br><h4>  Caract√©ristiques de Selenoid UI </h4><br>  Selenoid UI poss√®de √©galement les fonctionnalit√©s suivantes: <br><br><img src="https://habrastorage.org/webt/rv/0t/pj/rv0tpju5jxdgoyveokqbuhq5_la.png"><br><br>  Nous pouvons choisir un navigateur dans la liste des navigateurs disponibles et l'interface utilisateur nous fournira un exemple de configuration avec les <i>capacit√©s</i> appropri√©es.  La capture d'√©cran montre que les exemples sont disponibles pour plusieurs langues. <br><br><img src="https://habrastorage.org/webt/yq/fr/cl/yqfrclbbutpdlszforvqlyjl2tq.png"><br><br>  Lors du choix d'un navigateur, nous pouvons le lancer manuellement directement dans l'interface.  Lors de l'ex√©cution des tests, il est possible de se connecter au port <i>vnc</i> en temps r√©el et d'acc√©der √† l'√©cran du navigateur souhait√©, voire d'intervenir dans le processus d'ex√©cution des autotests. <br><br><h4>  Journaux et VNC </h4><br><p>  Si vous utilisez la capacit√© <i>enabaleVnc = true</i> , vous pouvez voir une liste des statistiques disponibles sur la page.  VNC nous permet de voir le navigateur et d'interagir avec lui.  Alors que notre journal affichera toutes les actions du navigateur. </p><br>  Session VNC: <br><img src="https://habrastorage.org/webt/7p/pz/k1/7ppzk1cvnbmulvkndmifleukq1u.png"><br><br>  Le mode VNC plein √©cran est le suivant: <br><img src="https://habrastorage.org/webt/28/ot/4j/28ot4j3qmtke8tnzah8fsja-4eq.png"><br><br>  Vous pouvez √©galement voir les journaux du conteneur Docker pour chaque session, m√™me sans VNC.  Autrement dit, si, par exemple, vous n'avez pas utilis√© l'indicateur --vnc lors de l'installation de Selenoid lui-m√™me, vous ne verrez que les journaux. <br><img src="https://habrastorage.org/webt/bc/qx/cj/bcqxcjiqbxv5-agmiq60ejiohwi.png"><br><br>  Il est √©galement possible de regarder des vid√©os de nos tests.  Vous pouvez acc√©der aux fichiers vid√©o en ouvrant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">http: // localhost: 4444 / video /</a> , ou en acc√©dant √† l'onglet ¬´Vid√©os¬ª dans l'interface utilisateur de Selenoid. <br><br><h4>  Connexion √† un projet Selenide Selenoid pour ex√©cuter vos tests dans un conteneur Docker </h4><br>  Afin de connecter Selenoid, √† l'annotation <b>BeforeClass,</b> nous devons ajouter la configuration suivante: <br><br><pre> <code class="java hljs">Configuration.remote = <span class="hljs-string"><span class="hljs-string">"http://localhost:4444/wd/hub"</span></span>; Configuration.browser = <span class="hljs-string"><span class="hljs-string">"chrome"</span></span>; Configuration.browserSize = <span class="hljs-string"><span class="hljs-string">"1920x1080"</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVNC"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); capabilities.setCapability(capabilityName: <span class="hljs-string"><span class="hljs-string">"enableVideo"</span></span>, value: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); Configuration.browserCapabilities = capabilities;</code> </pre> <br>  Nous <i>supprimons</i> la <i>propri√©t√© baseurl</i> , qui indiquait sur quel navigateur les tests ont √©t√© ex√©cut√©s, puisque maintenant nous utilisons la propri√©t√© <br>  <i>Configuration.browser = "chrome"</i> ; <br><br>  Dans un projet, cela ressemble √† ceci: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Url    Configuration.remote = "http://10.0.75.1:4444/wd/hub"; //     Configuration.browser = "chrome"; //   Configuration.browserSize = "1920x1080"; //   DesiredCapabilities,         - DesiredCapabilities capabilities = new DesiredCapabilities(); //         capabilities.setCapability(capabilityName: "enableVNC", value: true); //       capabilities.setCapability(capabilityName: "enableVideo", value: true); // Browser capabilities Configuration.browserCapabilities = capabilities;</span></span></code> </pre><br><h4>   Selenoid </h4><br><ul><li>     :  Selenoid      <i>Tmpfs</i> ‚Äì   ,       .   ,  ,   ,      . </li><li> Selenoid     :          .           <i>Browser Capabilities</i> . </li><li>  :    Selenoid    Google Chrome      <i>true</i>     <i>Browser Capabilities</i> : <br><br> <i>ChromeOptions options = new ChromeOptions();</i> <br> <i>options.setCapability(‚ÄúenableVideo‚Äù,true);</i> </li></ul><br><h4>  Selenoid  Docker </h4><br> Selenoid     ,   ,      . ,  Windows    Internet Explorer,     . Selenoid     ‚Äú‚Äù   Selenium   Internet Explorer, Firefox  Chrome  Windows, ,   Selenoid  Internet Explorer. <br><br>    : <br><br> 1.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">IEDriverServer</a>     -  (   C: \) <br><br> 2.     <a href="" rel="nofollow">Selenoid</a> <br><br> 3.    <i>browsers.json</i> <br><br>   browsers.json: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"internet explorer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"11"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: [<span class="hljs-string"><span class="hljs-string">"C:\\IEDriverServer.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"--log-level=DEBUG"</span></span>] } } } }</code> </pre> <br><br> 4.  Selenoid: <br> <i>./selenoid_win_amd64.exe -conf ./browsers.json -disable-docker</i> <br><br> 5.  ,  endpoint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">http://localhost:4444/wd/hub</a>   <i>capabilities</i> : <br> <i>browserName = internet explorer</i> <br> <i>version = 11</i> <br><br> 6.  ,   Chrome,     Chromedriver , ,  browsers.json <br><br> 7.   Selenoid     ,    Selenoid   <i>-capture-driver-logs</i> ,          . <br><br><h4>   </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La solution bas√©e sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenide + Selenoid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le </font><font style="vertical-align: inherit;">conteneur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d√©montre un haut niveau de flexibilit√© dans la personnalisation de l'environnement d'ex√©cution. </font><font style="vertical-align: inherit;">La stabilit√© de cette solution, des gains de temps importants lors de son utilisation et un certain nombre de fonctionnalit√©s suppl√©mentaires vous permettent d'optimiser le processus et d'assurer des produits logiciels de haute qualit√© en peu de temps.Par cons√©quent, il est facile de privil√©gier les solutions ci-dessus, car elles vous permettent d'effectuer rapidement et avec pr√©cision des tests d'automatisation.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473454/">https://habr.com/ru/post/fr473454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473440/index.html">La psychologie minimale n√©cessaire pour le leader</a></li>
<li><a href="../fr473442/index.html">Quelque chose va mal tourner, et c'est tr√®s bien: comment gagner un hackathon avec une √©quipe de trois</a></li>
<li><a href="../fr473444/index.html">Accord de non-concurrence: l'essentiel est de ne pas avoir peur</a></li>
<li><a href="../fr473446/index.html">DevOops 2019 et C ++ Russia 2019 Piter gratuits</a></li>
<li><a href="../fr473452/index.html">Intelligence artificielle Robotique InterSystems IRIS</a></li>
<li><a href="../fr473456/index.html">La derni√®re fronti√®re de l'AQ en mati√®re de d√©fense: la d√©tection automatique des erreurs</a></li>
<li><a href="../fr473460/index.html">A la question des math√©matiques</a></li>
<li><a href="../fr473462/index.html">Semaine de la s√©curit√© 44: NordVPN, TorGuard et Half Hack</a></li>
<li><a href="../fr473468/index.html">Comprendre le th√©or√®me de Bayes</a></li>
<li><a href="../fr473470/index.html">GitLab 12.4 avec une am√©lioration de la demande de fusion et des d√©pendances de l'API d'audit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>