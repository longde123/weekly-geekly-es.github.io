<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🎓 🤢 👩‍👦‍👦 Trabalhar com a API KOMPAS-3D → Lição 16 → Caracteres de controle 🌐 🤰🏼 📁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a série de artigos sobre como trabalhar com a API CAD COMPASS-3D. Os caracteres de controle já foram vistos várias vezes nas lições anteri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhar com a API KOMPAS-3D → Lição 16 → Caracteres de controle</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/457702/">  Continuamos a série de artigos sobre como trabalhar com a API CAD COMPASS-3D.  Os caracteres de controle já foram vistos várias vezes nas lições anteriores do ciclo.  Cada vez que se dizia que as linhas de saída não deveriam contê-las, uma vez que o COMPAS as processa de maneira especial.  Agora é hora de conhecê-los melhor. <br><br>  Depois de dominar o trabalho com eles, você entenderá que criar seqüências compostas complexas é uma tarefa trivial, na maioria dos casos, não exigindo a gravação de uma grande quantidade de código. <br><br>  Na lição, veremos como usar caracteres especiais e caracteres de fonte com caracteres de controle, falaremos sobre como criar frações e desvios com sua ajuda e também consideraremos seu uso em conjunto com parágrafos. <br><br><img src="https://habrastorage.org/webt/5c/cs/bd/5ccsbdc8ufpd1vavz6hzfbqasas.png"><br><a name="habracut"></a><br><blockquote><h4>  O conteúdo da série de lições “Trabalhando com a API KOMPAS-3D” </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O básico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Desenho de desenho</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conexão correta com o KOMPAS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Inscrição principal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Primitivas gráficas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Salvando um documento em vários formatos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conhecendo as configurações</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Métodos de escrita mais sofisticados no bloco de título</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lendo células de legenda</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caracteres especiais, incluindo uma sequência</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Etiquetas de texto simples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cordas compostas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parágrafos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Texto de várias linhas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Linhas compostas baseadas em parágrafos</a> </li><li>  <b>Caracteres de controle</b> </li></ol></blockquote><br><h2>  <font color="#00B2FF">Revisão superficial</font> </h2><br>  Os caracteres de controle são: @, $, &amp;,;, ~, ^ e #.  Infelizmente, o KOMPAS SDK tem muito pouca informação sobre como usá-los.  Para mais informações, consulte a ajuda do KOMPAS, na seção <i>“9.</i>  <i>Configurações do KOMPAS-3D / Armazenamento das configurações do sistema / Arquivos de serviço / Arquivo de menu do usuário / Sintaxe do arquivo</i> . <i>”</i> <br><br><img src="https://habrastorage.org/webt/ya/jc/cx/yajccx87d-06xfzy5rjhfdlc2wa.png"><br><br>  Todos os caracteres de controle podem ser divididos condicionalmente em dois grupos: principal e auxiliar.  Os símbolos auxiliares são usados ​​apenas em conjunto com os principais e, por si só, não descrevem nenhum componente.  A tabela abaixo fornece uma breve descrição dos caracteres de controle. <br><br><img src="https://habrastorage.org/webt/bg/tj/ap/bgtjapszut_xvfq_u2vq0l3rak4.png"><br><br>  Vamos considerá-los com mais detalhes. <br><br><h2>  <font color="#00B2FF">Inserir caracteres especiais</font> </h2><br>  Já consideramos caracteres especiais (ver lições <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">4</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">10</a> ).  Em seguida, para inserir um caractere especial, uma instância separada da interface <b>ksTextItemParam</b> foi <b>usada</b> .  Usando caracteres de controle, você pode inserir tantos caracteres especiais em uma sequência de caracteres que desejar, sem <b>reutilizar a</b> interface <b>ksTextItemParam</b> . <br>  A sintaxe para inserir caracteres especiais é: <br><br>  <i><b>AA</b> @ <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  onde <br>  <b>AA</b> - uma sequência localizada antes de um caractere especial, <br>  <b>Y</b> - modificador para a representação do código de caractere especial, <br>  <b>XXXX</b> - código do caractere especial inserido. <br>  <b>BB</b> - uma linha localizada após o caractere especial. <br><br>  O código para o caractere especial inserido é especificado entre <i>@</i> e <i>~</i> .  Além disso, dependendo do valor do modificador <b>Y</b> , ele pode ser especificado em notação decimal ou hexadecimal.  Os valores válidos do modificador <b>Y</b> são mostrados na tabela abaixo. <br><br><img src="https://habrastorage.org/webt/pk/td/jq/pktdjqgmgj8ftldxtei4-614ct0.png"><br><br>  <i>Nota:</i> como mostram meus experimentos, o COMPASS normalmente processa a ausência do caractere <i>~</i> .  Nesse caso, caracteres especiais são inseridos conforme necessário.  No entanto, eu recomendo não confiar nesse comportamento e sempre conclua a operação de inserção com o caractere <i>~</i> . <br><br>  A seguir, é apresentado um exemplo de um programa que demonstra a saída de caracteres especiais. <br><br><pre><code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @+51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" @*33~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre> <br>  Neste exemplo, o mesmo caractere (α alfa) é exibido duas vezes.  A primeira vez que seu código é especificado em decimal, a segunda vez em hexadecimal.  A figura abaixo mostra o resultado do programa. <br><br><img src="https://habrastorage.org/webt/o3/4b/3i/o34b3igkqgkvdrmze1ky6w4a1es.png"><br><br>  Os caracteres de controle permitem exibir vários caracteres especiais na mesma linha.  Portanto, no exemplo a seguir, as três primeiras letras do alfabeto grego são exibidas em uma chamada para o método <b>ksText</b> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@+51~ @+52~ @+53~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/mg/_v/xv/mg_vxv17mpco689p7gm6fzhp-ms.png"><br><br>  Modificador + é o modificador padrão.  Portanto, a linha acima pode ser escrita assim: <br><br>  <i>“@ 51 ~ @ 52 ~ @ 53 ~”</i> <br><br>  Nesse caso, o resultado do programa permanecerá o mesmo. <br><br>  Se <i>@ for</i> um caractere inválido, a linha entre <i>@</i> e <i>~</i> será exibida como está.  Os caracteres <i>@</i> e <i>~ são</i> omitidos.  Por exemplo, com a linha: <br><br>  <i>“Antes @ T51 ~ Depois”</i> <br><br>  O documento exibirá: <br><br>  <i>Antes de T51 Depois</i> <br><br>  <i>Nota:</i> esse comportamento do KOMPAS não está documentado e pode variar em diferentes versões do programa. <br><br>  <i>Nota:</i> os caracteres de controle não são adequados para inserir caracteres especiais contendo uma sequência.  O fato é que, para limitar a ação deles, é necessário usar o sinalizador SPECIAL_SYMBOL_END (para obter mais detalhes, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lição 10 do</a> ciclo), mas os caracteres de controle não permitem o uso de sinalizadores. <br><br><h2>  <font color="#00B2FF">Inserir caracteres de fonte</font> </h2><br>  Além de caracteres especiais, você pode inserir caracteres comuns por seu código.  Os caracteres de controle <i>^</i> e <i>~</i> são usados ​​para isso.  Sua sintaxe é dada abaixo. <br><br>  <i><b>AA</b> ^ ( <b>FNAME</b> ) <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  onde <br>  <b>AA</b> - uma sequência localizada antes do caractere inserido, <br>  <b>FNAME</b> - o nome da fonte da qual o caractere é retirado, <br>  <b>Y</b> - modificador para a representação do código de caractere (semelhante a @), <br>  <b>XXXX</b> - código numérico do caractere inserido, <br>  <b>BB</b> - uma linha localizada após o caractere inserido. <br><br>  Por seu propósito, o caractere de controle <i>^</i> é semelhante a <i>@</i> .  Eles ainda têm uma sintaxe semelhante.  Mas existem duas diferenças importantes entre eles: <br><br><ol><li>  <i>^</i> insere não um caractere especial, mas um caractere de fonte por seu código; </li><li>  para o caractere a ser inserido, você pode definir a fonte no campo <b>FNAME</b> (@ não permite isso). </li></ol><br>  Os códigos de símbolos podem ser visualizados usando o aplicativo charmap (Tabela de símbolos), que faz parte do sistema operacional Windows. <br><br>  Se nenhuma fonte for especificada, a fonte padrão será usada.  A seguir, um exemplo usando o caractere <i>^</i> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" ^(Arial)*B1~  ^*39~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  Neste exemplo, dois caracteres são inseridos na sequência resultante; no primeiro, selecionamos a fonte <i>Arial</i> ; no segundo, deixamos a fonte padrão.  A figura abaixo mostra a linha que é impressa no documento. <br><br><img src="https://habrastorage.org/webt/lj/8i/5k/lj8i5kqw_acqwuvq0lulgnmgolw.png"><br><br>  Observe: a fonte está definida apenas para o caractere exibido.  Como mostram meus experimentos, o KOMPAS normalmente processa a ausência de um terminador.  No entanto, eu não recomendo confiar nesse comportamento e sempre definir um finalizador. <br><br>  Se um caractere inválido (ou um código inválido) for especificado após <i>^</i> , <i>^</i> e <i>~ serão</i> omitidos e a linha entre eles será exibida como se <i>estivesse</i> usando a fonte padrão.  Por exemplo, com a linha <br><br>  <i>“Antes ^ Q (Arial) * B1 ~ Depois”</i> <br><br>  O documento exibirá: <br><br>  <i>“Antes de Q (Arial) * B1 Depois”</i> <br><br>  Se um nome de fonte incorreto for indicado no campo <b>FNAME</b> , o KOMPAS selecionará a fonte e exibirá o caractere. <br><br>  Se não houver parênteses de fechamento na linha, essa linha não será exibida completamente.  Por exemplo, com a linha: <br><br>  <i>“Antes ^ Q (Arial * B1 ~ Depois”</i> <br><br>  O documento será exibido apenas <br><br>  <i>"Até"</i> <br><br>  <i>Nota:</i> o comportamento acima com sintaxe incorreta de caractere de controle é válido para o KOMPAS-3D V17 e não está documentado.  Em outras versões, pode ser diferente. <br><br><h2>  <font color="#00B2FF">Maneiras adicionais de inserir caracteres</font> </h2><br>  Os caracteres <i>@</i> e <i>^</i> têm análogos - <i>&amp;</i> e <i>#</i> respectivamente.  Eles têm sintaxe semelhante: <br><br>  <i><b>AA</b> e <b>XX</b> ~ <b>BB</b></i> <i><br></i>  <i><b>AA</b> # ( <b>FNAME</b> ) <b>XX</b> ~ <b>BB</b></i> <br><br>  onde <br><br>  <b>AA</b> - uma sequência exibida antes do caractere inserido, <br>  <b>XX</b> - código do caractere inserido (para &amp; - caractere especial, para # - caractere de fonte), <br>  <b>BB</b> - uma sequência exibida após o caractere inserido, <br>  <b>FNAME</b> - o nome da fonte. <br><br>  Existem apenas duas diferenças entre os caracteres <i>@</i> e <i>^</i> e suas contrapartes: <br><br><ol><li>  Os caracteres &amp; e # não possuem um modificador Y. O código do caractere é sempre especificado em notação decimal. </li><li>  O código para o caractere a ser inserido é especificado por um máximo de dois dígitos. </li></ol><br>  A seguir está o código fonte de um programa que demonstra como usar os caracteres <i>&amp;</i> e <i>#</i> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" &amp;51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" #(Arial)37~  #37~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/xq/ku/tw/xqkutwd7x225k5zx8dd-lsriorg.png"><br><br><h2>  <font color="#00B2FF">Texto de várias linhas</font> </h2><br>  Usando caracteres de controle, o texto de várias linhas pode ser exibido.  Para fazer isso, no local de transferência para uma nova linha, você precisa inserir a sequência: <i>@ /</i> .  Nota: o caractere <i>@</i> é usado sem um terminador <i>~</i> .  A seguir está o código fonte de um programa que exibe texto de várias linhas usando caracteres de controle. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @/ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  Observação: graças ao uso de caracteres de controle, exibimos texto de duas linhas com apenas uma chamada para o método <b>ksText</b> .  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/tp/-3/fm/tp-3fmwgsjpyrgrhhw9icccok70.png"><br><br><h2>  <font color="#00B2FF">Inserir caracteres de controle</font> </h2><br>  Nós descobrimos como inserir caracteres especiais arbitrários e caracteres Unicode.  Mas e se você quiser inserir o próprio caractere de controle?  Aqui você pode ir de duas maneiras.  A primeira maneira é usar o caractere <i>^</i> e colá-lo como caracteres de fonte regulares.  Mas existe uma maneira mais fácil. <br><br>  Símbolo <i>;</i>  é auxiliar e pode ser inserido diretamente no texto.  Para inserir outros caracteres de controle, você precisa dobrá-los.  Ou seja, um par de caracteres <i>@@</i> insere um único caractere <i>@</i> no texto.  O mesmo vale para outros caracteres de controle. <br><br>  A seguir, é apresentado um exemplo de programa que demonstra a inserção de caracteres de controle em uma seqüência de caracteres. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" : @@ $$ &amp;&amp; ; ~~ ^^ ##")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/4t/jv/rx/4tjvrxux7i2epcfivimh8aai-2g.png"><br><br><h2>  <font color="#00B2FF">Desvios superiores e inferiores</font> </h2><br>  A seguinte sintaxe é usada para inserir desvios: <br><br>  <i><b>AA</b> $ <b>XX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <br><br>  onde <br><br>  <b>AA</b> - texto exibido antes dos desvios; <br>  <b>XX</b> - desvio superior; <br>  <b>YY</b> é o desvio mais baixo; <br>  <b>BB</b> - texto exibido após os desvios. <br><br>  Observe: toda a construção é limitada a <i>$</i> caracteres e o " <i>;</i>  »Serve como separador entre os desvios superior e inferior. <br><br>  Se não houver delimitador "entre os caracteres <i>$</i> <i>;</i>  ", A linha inteira entre eles é interpretada como o desvio superior.  Se o componente <b>XX estiver</b> ausente, ou seja, após o primeiro <i>$</i> ir imediatamente " <i>;</i>  ", A linha subsequente inteira até o <i>$</i> mais próximo <i>é</i> interpretada como o desvio mais baixo. <br><br>  <i>Nota: o</i> texto do desvio superior não deve começar pelas letras <i>b</i> , <i>d</i> , <i>s</i> , <i>m</i> e <i>l</i> ( <i>L</i> minúsculo).  A razão para isso será explicada um pouco mais tarde. <br><br>  A seguir, é apresentado um exemplo de um programa que exibe a saída com desvios <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa: <br><br><img src="https://habrastorage.org/webt/-w/hr/ql/-whrqlu38elpopxgq22zblob6tm.png"><br><br>  Observe que o KOMPAS processa apenas um caractere " <i>;</i>  "  O segundo caractere é " <i>;</i>  "Pode ser interpretado como o finalizador de toda a estrutura.  Por exemplo, com a linha " <i>11 $ 22; 33; 44 $</i> ", a tela exibirá: <br><br><img src="https://habrastorage.org/webt/pf/22/0i/pf220i_rer29nw_nsx2h88ja_le.png"><br><br>  <i>Nota:</i> esse comportamento do KOMPAS não está documentado, portanto você não pode confiar nele. <br><br><h2>  <font color="#00B2FF">Fração</font> </h2><br>  A sintaxe da fração é semelhante à sintaxe do desvio e possui duas opções equivalentes: <br><br>  <i><b>AA</b> $ <b>bXX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <i><br></i>  <i><b>AA</b> $ <b>dXX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <br><br>  onde <br><br>  <b>AA</b> - saída de texto para frações; <br>  <b>XX</b> é o numerador; <br>  <b>YY</b> é o denominador; <br>  <b>BB</b> - texto exibido após a fração. <br><br>  Observe: a única diferença entre a saída da fração e a saída dos desvios é a presença da letra <i>d</i> ou <i>b</i> imediatamente após o primeiro sinal de <i>$</i> .  Caso contrário, suas sintaxes são idênticas. <br><br>  Se não houver " <i>;</i> " entre os caracteres <i>$ d</i> ( <i>$ b</i> ) e <i>$</i>  ", A linha inteira entre eles será interpretada como um numerador.  Se o componente <b>XX estiver</b> ausente, ou seja, depois que <i>$ d</i> ( <i>$ b</i> ) vier imediatamente " <i>;</i>  ", A linha subsequente inteira até o <i>$</i> mais próximo <i>é</i> interpretada como o denominador. <br><br>  <i>Nota:</i> o texto do numerador não deve começar pelas letras <i>s</i> , <i>m</i> ou <i>l</i> ( <i>L</i> minúsculo).  A razão para isso será explicada um pouco mais tarde. <br><br>  A seguir, é apresentado um exemplo de um programa que demonstra a saída da fração usando caracteres de controle. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/ha/sm/dd/hasmddwd9o67w8t747vhwceoae0.png"><br><br>  Por favor, note que o KOMPAS processa os caracteres "extras" <i>;</i>  »Bem como no caso de desvios.  Esse comportamento não é documentado e não pode ser invocado. <br><br><h2>  <font color="#00B2FF">Controle de variação e tamanho de fração</font> </h2><br>  No início da construção de desvios ou frações, uma das letras pode ser localizada: <i>s</i> , <i>m</i> ou <i>l</i> ( <i>L</i> minúsculo).  Eles especificam o tamanho dos desvios e elementos da fração (numerador e denominador).  Seu objetivo é descrito na tabela abaixo. <br><br><img src="https://habrastorage.org/webt/mp/ez/1u/mpez1un_2njdu3jxixivvwqbdz4.png"><br><br>  Se nenhuma dessas letras for especificada, <i>l será</i> usado para a fração e <i>m será</i> usado para desvios.  A seguir, é apresentado um exemplo de programa que demonstra o uso dessas letras. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dl;$ ")); document2D-&gt;ksText(100.0,85.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dm;$ ")); document2D-&gt;ksText(100.0,70.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $ds;$ ")); document2D-&gt;ksText(100.0,60.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/z2/2_/dj/z22_djahn5b1uiugptca_0doqui.png"><br><br>  Embora as letras <i>s</i> , <i>me</i> sejam usadas para frações neste exemplo, seu uso para desvios não é diferente. <br><br>  Observe que se entre o início de uma fração ou desvio ( <i>$</i> , <i>$ d</i> ou <i>$ b</i> ) e a letra <i>s</i> , <i>m</i> ou <i>l</i> houver pelo menos um caractere “estranho” (por exemplo, um espaço), o COMPAS não “verá” as letras e a fração ou O desvio será o tamanho padrão. <br><br><h2>  <font color="#00B2FF">Caracteres de controle aninhados</font> </h2><br>  Ao emitir frações e desvios, as linhas incluídas em sua composição são processadas recursivamente.  Isso significa que, ao formar o numerador e o denominador, os caracteres de controle também podem ser usados.  Essa abordagem é demonstrada no exemplo a seguir. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@54~$s2$ + $d@+51~;@+52~$ - ^(Symbol)*70~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/qq/f_/9a/qqf_9au_d7ijxvxhvopiuzlhpbk.png"><br><br>  Para inserir letras do alfabeto grego, usamos os caracteres de controle @ e ^ (para a letra  pi).  O grau no primeiro termo é derivado usando desvios.  A substring <i>$ s2 $ a</i> exibe.  A letra <i>s</i> indica o tamanho pequeno do desvio, mas devido à ausência de um separador " <i>;</i>  »Apenas o desvio superior é exibido. <br><br>  Para formar uma fração, a combinação <i>$ d; $ é usada</i> .  Além disso, o numerador e o denominador incluem caracteres de controle que fornecem a saída das letras do alfabeto grego. <br><br>  O último subtraído (π pi) é exibido como o símbolo da fonte Symbol usando os caracteres de controle <i>^</i> e <i>~</i> . <br><br>  Infelizmente, as possibilidades de tal "recursão" são muito limitadas.  Não podemos investir frações e desvios um no outro.  O problema é que os dois são formados usando o caractere <i>$</i> control.  Por esse motivo, o COMPASS não pode analisar corretamente qual <i>$</i> pertence a qual elemento. <br><br><h2>  <font color="#00B2FF">Controlar caracteres no parágrafo</font> </h2><br>  Você pode ignorar parcialmente a restrição com caracteres de controle aninhado usando parágrafos.  O uso de caracteres e parágrafos de controle juntos permite criar estruturas ainda mais complexas.  O exemplo abaixo demonstra a construção de uma fração de 4 níveis. <br><br><div class="spoiler">  <b class="spoiler_title">Código de programa para criar uma fração de 4 níveis</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">//   DynamicArrayPtr dynamicArray; dynamicArray = static_cast&lt;DynamicArrayPtr&gt;(kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR)); dynamicArray-&gt;ksClearArray(); TextItemParamPtr textItemParam; textItemParam = static_cast&lt;TextItemParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextItemParam)); //     BSTR str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //     TextItemFontPtr textItemFont; textItemFont = static_cast&lt;TextItemFontPtr&gt;(textItemParam-&gt;GetItemFont()); textItemFont-&gt;set_bitVector(NUMERATOR); str = SysAllocString(OLESTR("1 + $d@+51~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //    textItemFont-&gt;set_bitVector(DENOMINATOR); str = SysAllocString(OLESTR("1 + $d@+56~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //  textItemFont-&gt;set_bitVector(END_FRACTION); str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //   textItemFont.Unbind(); textItemParam.Unbind(); //    ksTextLineParam TextLineParamPtr textLineParam; textLineParam = static_cast&lt;TextLineParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextLineParam)); textLineParam-&gt;Init(); textLineParam-&gt;SetTextItemArr(dynamicArray); dynamicArray.Unbind(); //  ParagraphParamPtr paragraphParam; paragraphParam=static_cast&lt;ParagraphParamPtr&gt;(kompas-&gt;GetParamStruct(ko_ParagraphParam)); paragraphParam-&gt;Init(); paragraphParam-&gt;set_x(100.0); paragraphParam-&gt;set_y(100.0); document2D-&gt;ksParagraph(paragraphParam); document2D-&gt;ksTextLine(textLineParam); document2D-&gt;ksEndObj(); //   textLineParam.Unbind(); paragraphParam.Unbind();</code> </pre><br></div></div><br>  Neste exemplo, caracteres de controle são usados ​​para construir frações no numerador e denominador da fração principal, além de inserir letras do alfabeto grego.  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/ji/x6/lo/jix6loqqynqpondf3g47pvhopj0.png"><br><br><h2>  Conclusão </h2><br>  Nesta lição, encontramos os caracteres de controle e aprendemos como usá-los para exibir caracteres especiais e caracteres de fonte.  Como você pode ver, eles fornecem uma sintaxe simples para criar strings que incluem caracteres especiais, frações e desvios.  Infelizmente, eles não são adequados para inserir caracteres especiais contendo cadeias.  Mas esses caracteres especiais são extremamente raros.  Essa é uma das limitações dos caracteres de controle.  Além disso, eles não podem ser usados ​​para criar substrings e substrings, e há limitações ao trabalhar com caracteres especiais que incluem strings.  Mas isso não diminui seus méritos.  Isso conclui nossa discussão sobre caracteres de controle. <br><br>  <b>Para continuar, acompanhe as notícias do blog.</b> <br><br> <a href=""><img src="https://habrastorage.org/web/595/eee/f27/595eeef271b24830b3578751fcb52716.png"></a>  Sergey Norseev, Ph.D., autor do livro "Application Development for COMPAS in Delphi". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt457702/">https://habr.com/ru/post/pt457702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt457692/index.html">Reflexões sobre os padrões nacionais de NB-Fi e sistemas de cobrança</a></li>
<li><a href="../pt457694/index.html">Os perigos do uso de constantes com vários caracteres</a></li>
<li><a href="../pt457696/index.html">Os perigos do uso de constantes com vários caracteres</a></li>
<li><a href="../pt457698/index.html">Experiência: usamos proxies como uma ferramenta para combater ataques DoS</a></li>
<li><a href="../pt457700/index.html">Guia de autenticação do Node.js. sem passport.js e serviços de terceiros</a></li>
<li><a href="../pt457704/index.html">Como as GPUs lidam com ramificação</a></li>
<li><a href="../pt457706/index.html">Robô testa SAP ERP</a></li>
<li><a href="../pt457710/index.html">Os incríveis recursos das redes neurais 2019</a></li>
<li><a href="../pt457712/index.html">Como a Verizon e o BGP Optimizer configuram ótimos offline</a></li>
<li><a href="../pt457714/index.html">Estouro de pilha em inglês: Community Kill Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>