<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฟ ๐ ๐ฐ ููู ุชุฏูุฑ ุณุงุนุฉุ ุชุญููู ุงููุณุงุฑ ุงูุฃูุงูู ููุจุทููุฉ ุงูุจุฑูุฌุฉ ุงูุซุงููุฉ ๐ถ ๐๏ธ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุตุฉ ุญุจ ุฌุฏูุฏุฉ ูู ุณูุณูุฉ ูู ุชุญูููุงุช ุงูุจุทููุฉ ุงูุฃุฎูุฑุฉ. ูุฌุจ ุนูู ุงููุดุงุฑููู ุงููุคูููู ุงูุฐูู ุงุฎุชุงุฑูุง ูุณู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุญู ุงูุนุฏูุฏ ูู ุงูููุงู ุฐุงุช ุงูุชุนููุฏ ุงููุฎุชู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููู ุชุฏูุฑ ุณุงุนุฉุ ุชุญููู ุงููุณุงุฑ ุงูุฃูุงูู ููุจุทููุฉ ุงูุจุฑูุฌุฉ ุงูุซุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/478550/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4e/n2/ks/4en2ksorc6zfdwcwfcvsceozmxg.jpeg" width="300" align="right">  ูุตุฉ ุญุจ ุฌุฏูุฏุฉ ูู ุณูุณูุฉ ูู ุชุญูููุงุช ุงูุจุทููุฉ ุงูุฃุฎูุฑุฉ.  ูุฌุจ ุนูู ุงููุดุงุฑููู ุงููุคูููู ุงูุฐูู ุงุฎุชุงุฑูุง ูุณู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุญู ุงูุนุฏูุฏ ูู ุงูููุงู ุฐุงุช ุงูุชุนููุฏ ุงููุฎุชูู ููุบุงูุฉ: ุงูุฃูู (ุญุณุจ ุชููุนุงุชูุง) ุงุณุชุบุฑู 20 ุฏูููุฉ ุ ูุงูุฃุฎูุฑ - ุญูุงูู ุณุงุนุฉ.  ููุฏ ุงุฎุชุจุฑูุง ูุฌููุนุฉ ูุงุณุนุฉ ูู ููุงุฑุงุช ูุทูุฑ ุงููุงุฌูุฉ ุ ุจูุง ูู ุฐูู ุงููุฏุฑุฉ ุนูู ููู ูุฌุงู ููุถูุน ุบูุฑ ุนุงุฏู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุจุงุฏุฉ ุฐูู </h2>  <sup><i>ุงููุคูููู: ููุณูู ุณูุณูู ุ ูููุณุชุงูุชูู ุจูุชุฑููู</i></sup> <br><br>  ุงููููุฉ ุงูุฃููู ูู ุงูุงุญูุงุก.  ุญุตู ูู ูุดุงุฑู ุนูู ูุงุญุฏ ูู ุฃุฑุจุนุฉ ุฎูุงุฑุงุช ูููููุฉ ุ ุชุดุจู ุจุนุถูุง ุงูุจุนุถ.  ููุฏ ุงูุชุฑุญูุง ููุณ ููุท ุดุฑุทูุง ูุตููุง ุ ูููู ุฃูุถูุง ุญู ุชูุฑุงุฑู "ุณูุก".  ูุงู ูู ุงูุถุฑูุฑู ุฅุนุงุฏุฉ ุงูุฑูุฒ (ูุชุงุจุฉ ุฎูุงุฑุฒููุฉ ุฌุดุนุฉ ุฃูุชุฌุช ุงูุญู ุงูุฃุณุฑุน) ุ ูุฅุฒุงูุฉ ุงูุนูุฏูุฉ ููุฎุชูู ุงููุฑุงุก ูุซู ุงูุนูููุงุช ูุงูุญุณุงุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุญุงูุฉ </h4><br>  ุญุตูุช ุนูู ูุธููุฉ ูู ูุฎุชุจุฑ ูุฏุฑุงุณุฉ ุงููุงุฏุฉ ุงููุถุงุฏุฉ ุ ุญูุซ ุฃุฌุฑูุง ุชุฌุงุฑุจ ูุฎุชููุฉ.  ูููู ูุณูู ุจุฏุฑุงุณุฉ ุงูุนูููุงุช ุงูุชู ุชุญุฏุซ ุนูุฏ ุงูุฌูุน ุจูู ุงููุงุฏุฉ ูุงูููุงุฏ ุงููุถุงุฏุฉ.  ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุณูุณูุฉ ูู ุงูุชุฌุงุฑุจ ุนูู ุนุฏุฏ ูุนูู ูู ุงูุฌุฒูุฆุงุช. <br><a name="habracut"></a><br>  ุทูุฑุช ุงูุฏุงุฆุฑุฉ ุงููุฌุงูุฑุฉ ุฌูุงุฒูุง ูุญูู ุงููุงุฏุฉ ุฅูู ูุงุฏุฉ ูุถุงุฏุฉ ููุชุฑุฉ ูุตูุฑุฉ.  ุณูููู ูููุฏูุง ูู ูู ุฅุฌุฑุงุก ุชุฌุงุฑุจ ุชุณุชุฎุฏู ูููุง ุงูุฎูุงุฑุฒููุฉ ุงูุชุงููุฉ: <br><br>  - ูุฌุฏ 2 ูู ุฃุซูู ุงูุฌุฒูุฆุงุช. <br>  - ูุญูู ูุงุญุฏ ูููู ุฅูู ูุงุฏุฉ ูุถุงุฏุฉ. <br>  - ุงูุฌูุน ุจููููุง.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ูุงู ุงููุฒู ูู ููุณู ุ ูุชู ุฅุฒุงูุชูุง.  ุฅุฐุง ูุงู ุงููุฒู ูุฎุชูููุง ุ ูุณูุญุตู ุนูู ุฌุฒูุก ุฌุฏูุฏ ุ ูุฒูู ูุณุงูู ุงููุฑู ูู ุฃูุฒุงู ุงูุณุงุจูุชูู.  ุงูุฌุฒูุก ุงููุงุชุฌ ููุณู ูู ุงููุณุฃูุฉ. <br>  - ุฅุฐุง ูุงู ููุงู ุฌุฒูุก ูุงุญุฏ ูุชุจูู ุ ูุฃูุช ุจุญุงุฌุฉ ููุนุฑูุฉ ูุฒูู.  ุฅุฐุง ูุงู ููุงู ุงูุนุฏูุฏ ูู ุงูุฌุฒูุฆุงุช ุ ูุนูุฏ ุฅูู ุงูุฎุทูุฉ 1. <br><br>  ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุฌุฒูุก ุงููุฒู ุงูุฐู ุณูุจูู ูู ููุงูุฉ ุงูุชุฌุฑุจุฉ ุ ููุฐู ุงููุนุฑูุฉ ูุทููุจุฉ ูู ูุจู ุนููุงุก ูุณู ุขุฎุฑ. <br><br>  ูุงู ุงููุทูุฑ ุงูุณุงุจู ุจุฑุณู ุงูููุฏ ุงูุฐู ุชู ุชุถูููู ูู ูุฐู ุงูุญุณุงุจุงุช ุ ููู ูุง ูููู ููููุฏ ุฃู ูููู ุงูุญุณุงุจุงุช ุนูุฏูุง ูุชู ุฅุฌุฑุงุก ุงูุชุฌุฑุจุฉ ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูุฌุฒูุฆุงุช.  ุชุญุชุงุฌ ุฅูู ุชุญุณูู ุงูููุฏ ุจุญูุซ ูุนูู ูู ูุชุฑุฉ ุฒูููุฉ ูุนูููุฉ. <br><br>  <b>ุฑูุฒ ุงูููุฑูุซุฉ ูู</b> <br><br>  ููุฏุฎูุงุช ุ ุณูููู ูุฏูู ูุฌููุนุฉ ูู ุงูุฃูุฒุงู ุงูุฌุฒูุฆูุฉ.  ูุฅุฎุฑุงุฌ ุ ุชุญุชุงุฌ ุฅูู ุฅุฑุฌุงุน ุฑูู ูุดูุฑ ุฅูู ูุฒู ุงูุฌุฒูุก ุงูุฃุฎูุฑ.  ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุฌุฒูุฆุงุช ูุชุจููุฉ ุ ููู ุงูุถุฑูุฑู ุฅุฑุฌุงุน 0. <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> findLatestWeight = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">weights, i = weights.length - </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cur = weights.length - <span class="hljs-number"><span class="hljs-number">1</span></span> === i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> weights[<span class="hljs-number"><span class="hljs-number">0</span></span>]; weights.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a - b); weights[i - <span class="hljs-number"><span class="hljs-number">1</span></span>] = (weights[i] === weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : weights[i] - weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> findLatestWeight(weights, i - <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุซุงู ูููุงุญุธุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl">  ูุซุงู </h4><br>  ุงููุฏุฎู: [2ุ7ุ4ุ1ุ8ุ1] <br>  ุงูุฅุฎุฑุงุฌ: 1 <br><br>  ูุฃุฎุฐ ุฌุฒูุฆุงุช ูุจูุบ ูุฒููุง 7 ู 8 ุ ููุญูู 7 ุฅูู ุฌุฒูุก ูุถุงุฏ ููุตุทุฏู ุจู ุจุฌุฒูุก ูู ุงููุฒู 8. ูุง ูุฒุงู ููุงู ุฌุฒูุก ูู ุงููุฒู 1. ุฃูุฒุงู ุงูุฌุฒูุฆุงุช ุงููุชุจููุฉ ูู ุงูุตูุจ [2ุ4ุ1ุ1ุ1].  ูุฃุฎุฐ ุฌุฒูุฆุงุช ุจูุฒู 2 ู 4 ุ ููุญูู 2 ุฅูู ุฌุฒูุก ูุถุงุฏ ููุตุทุฏู ุจู ุจุฌุฒูุก ูู ุงููุฒู 4. ูุง ูุฒุงู ููุงู ุฌุฒูุก ูู ุงููุฒู 2. ุฃูุฒุงู ุงูุฌุฒูุฆุงุช ุงููุชุจููุฉ ูู ุงูุตูุจ [2ุ1ุ1ุ1].  ูุฃุฎุฐ ุฌุฒูุฆุงุช ุจูุฒู 2 ู 1 ุ ููุญูู 1 ุฅูู ุฌุฒูุก ูุถุงุฏ ููุตุทุฏู ุจู ุจุฌุฒูุก ูู ุงููุฒู 2. ูุง ูุฒุงู ููุงู ุฌุฒูุก ูู ุงููุฒู 1. ุฃูุฒุงู ุงูุฌุฒูุฆุงุช ุงููุชุจููุฉ ูู ุงูุตูุจ [1ุ1ุ1].  ูุญู ูุฃุฎุฐ ุฌุฒูุฆุงุช ุจูุฒู 1 ู 1 ุ ููุญูู ุฃุญุฏูุง ุฅูู ุฌุฒูุก ูุถุงุฏ ููุตุทุฏู ุจู ูุน ุซุงูู.  ูู ูุจูุฏูู.  ุฃูุฒุงู ุงูุฌุฒูุฆุงุช ุงููุชุจููุฉ [1].  ุฌุฒูุก ูุงุญุฏ ุงููุณุงุฑ.  ูุงููุชูุฌุฉ ูู 1. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูููุงุญุธุงุช </h4><br>  ูุญู ุ ูู ุจุชูููุฑ ููู ูููู ุจุชุตุฏูุฑ ุงูุฅุตุฏุงุฑ ุงูุฐู ุชู ุชุตุญูุญู ูู ุฏุงูุฉ findLatestWeight: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findLatestWeight</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">weights</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... } module.exports = findLatestWeight;</span></span></code> </pre> <br>  ุณูุชู ุชุดุบูู ุงูุญู ูู Node.js 12. <br></div></div><br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br>  ูุญุชูู ุงูุญู "ุงูุณูุฆ" ุงูููุฏู ุนูู ุงูุนุฏูุฏ ูู ุงููุดููุงุช ูู ููุช ูุงุญุฏ.  ุงูุฃูู ูู ุงูุนูุฏูุฉ.  ููุง ูู ูุฐููุฑ ูู ุงูุดุฑุท ุ ุณูููู ุจูุนุงูุฌุฉ ุตูุงุฆู ูุจูุฑุฉ ูู ุงูุฃุฑูุงู ุ ููุง ููุบู ุนูู ุงูููุฑ ุญู ุชูุฑุงุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> findLatestWeight = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">weights</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = weights.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> weights[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-number"><span class="hljs-number">0</span></span>; weights.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a - b); weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>] = (weights[i]=== weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : weights[i]-weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]; i--; } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>); }</code> </pre> <br>  ุชูุณูุน ุงูุนูุฏูุฉ ููุง ุจุณูุท ููุบุงูุฉ ุ ูููู ุชูุดุฃ ูุดููุฉ ุฃุฎุฑู - ููุงู ุฅุนุงุฏุฉ ูุฑุฒ ูุณุชูุฑุฉ (ูู ุงูุฃุตุบุฑ ุฅูู ุงููุจูุฑ) ูุชุนูู ูุน ููุงูุฉ ุงูุตููู.  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ุงูุฎูุงุถ ูู ุงูุนูุตุฑ ูุจู ุงูุฃุฎูุฑ ูู ุงูุตููู.  ููู ุจุนุฏ ุฐูู ุ ูุง ูููู ุจูุต ุงูุตููู ุ ูุฅุฐุง ุชู ุชูุฑูุฑ ูุฌููุนุฉ ูู ููููู ุนูุตุฑ ุฅูู ุงููุธููุฉ ุ ูุณูููู ุจุฅุนุงุฏุฉ ูุฑุฒูุง ุญุชู ุงูููุงูุฉ. <br><br>  ุฎูุงุฑ ุญู ูุฐู ุงููุดููุฉ ูู ูุญุงููุฉ ุชูููู ุงูุตููู ุจุงุณุชูุฑุงุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> findLatestWeight = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">weights</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = weights.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> weights[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-number"><span class="hljs-number">0</span></span>; weights.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a - b); weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>] = (weights[i]=== weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : weights[i]-weights[i<span class="hljs-number"><span class="hljs-number">-1</span></span>]; weights.length = i; <span class="hljs-comment"><span class="hljs-comment">// &lt;---   i--; } while (true); }</span></span></code> </pre> <br>  ููุณ ุณูุฆูุง ุ ููููุง ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุงูุชุฎูุต ูู ุงููุฑุฒ ุ ููู ูู ุญุฏ ุฐุงุชู ุนูููุฉ ููููุฉ.  ุจุดูู ุนุงู ุ ูู ุฃู ููุช ุ ุณูููู ููุชููู ุจุฃูุจุฑ ุนุถููู ูู ุงููุฌููุนุฉ.  ููุฐุง ูู ุ ูู ุงูุจุญุซ ุนู ุงุซููู ูู ุฃุนูู ุงููุณุชููุงุช ุ ูุงูุชู ุชุชู ูู ูุฑูุฑ ูุงุญุฏ ุจุณูุท ููุบุงูุฉ.  ููุฑุงุญุฉ ุ ูููู ุจุชูููุฐ ูุฐุง ุงูุจุญุซ ูู ูุธููุฉ ูููุตูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> maximumTwo = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> max1 = arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> max2 = arr[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> max1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> max2I = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; arr.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arr[i] &gt; max1) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (max1 &gt; max2) { max2 = arr[i]; max2I = i; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { max1 = arr[i]; max1I = i; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arr[i] &gt; max2) { max2 = arr[i]; max2I = i; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (max1 &gt; max2) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [max2, max1, max2I, max1I]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [max1, max2, max1I, max2I]; };</code> </pre> <br>  ููุบูุฑ ูุธููุฉ ุงูุจุญุซ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fn = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">weights</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weights.length &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> weights[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [x, y, xI, yI] = maximumTwo(weights); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x === <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> y; } weights[xI] = <span class="hljs-number"><span class="hljs-number">0</span></span>; weights[yI] = y - x; } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); };</code> </pre> <br>  ูุจุงูุชุงูู ุ ุณูููู ุฏุงุฆููุง ุจุชุฌุงูู ุฃุตุบุฑ ุนูุตุฑูู ุ ููุญูู ุฃูุจุฑ ุฅูู ุงููุฑู ุจููููุง.  ุชุฎูุตูุง ูู ุงููุฑุฒ ูุญุตููุง ุนูู ุฎุทูุฉ ูุงุญุฏุฉ ุจุฏูุงู ูู ุฐูู. <br><br>  ูู ุจูู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ุงูุชู ูุงุญุธูุงูุง ุ ุฃุฎุฐ ุงููุดุงุฑููู ุงูุญุฏ ุงูุฃูุตู ููุนูุตุฑ ุ ูุงุถุฑุจูู ูู -1 ุซู ุฃุถุงููู ุฅูู ุซุงูู ุฃูุจุฑ ุญุฌุฑ.  ูุงููุชูุฌุฉ ูู ุฑูู ุณุงูุจ ุ ูุงูุฐู ุชู ุงุณุชุฎุฏุงูู ุจุนุฏ ุฐูู ูู ุญุณุงุจ "ููุง ูู".  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุชุถูู ุงููููุฉ ูุฎูุง ุนููููุง ูุฑุชุจุทูุง ุจุญูููุฉ ุฃูู ููููู ูุญุงููุฉ ุชุฑู ุฃุญุฌุงุฑ ุฐุงุช ูุฒู ูุฑูุฏ ูุญุณุงุจ ุงููุฑู ุจูููุง.  ููุน ุฐูู ุ ูุฅู ูุฐุง ุงูููุฌ ูุง ูุนุทู ุงููุชูุฌุฉ ุงูุตุญูุญุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจ </h2>  <sup><i>ุงููุคูููู: ููุฌูู <a href="https://habr.com/ru/users/tadatuta/" class="user_link">ููุดุดูููู</a> ุ ููุงุฏูููุฑ <a href="https://habr.com/ru/users/tadatuta/" class="user_link">ุบุฑูููููู ุชุงุฏุงุชูุชุง</a></i></sup> <br><br><h4 style=";text-align:right;direction:rtl">  ุญุงูุฉ </h4><br>  ูุดุงุฑู Layout Alexander ูู ุงูุนุฏูุฏ ูู ุงููุดุงุฑูุน ุจุงุณุชุฎุฏุงู ูููุฌูุฉ BEM.  ุญุชู ุฃูู ุฃูุดุฃ ูููููุง ูููุฏูุง ูููุนุฑูู IDE ุงูููุถู ูุฏูู ุ ูุงูุฐู ูุณูุญ ูู ุจูุชุงุจุฉ ุฃุณูุงุก ุงููุฆุงุช ุจุชุฑููุฒ ูุฎุชุตุฑ ููุดุฑูุง ุจุงููุงูู.  ููู ุงููุดููุฉ ูู ุฃูู ุจุงููุณุจุฉ ููู ูุดุฑูุน ุ ูููู ุงูุฃุดุฎุงุต ุจุชุนููู ูุญุฏุฏุงุช ูุฎุชููุฉ ุจูู ุงููุชูุฉ ูุงูุนูุตุฑ ูุงููุนุฏู (block__mod__val - elem ุ block - mod - val ___ elem) ุ ููู ูู ูุฑุฉ ูุชุนูู ุนููู ุชุนุฏูู ูุฐุง ูุฏูููุง ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุงูุฎุงุต ุจู.  ุณุงุนุฏ ุฃููุณุงูุฏุฑ ูู ูุชุงุจุฉ ูุญุฏุฉ ุณุชุญุฏุฏ ุงููุงุตู ููููุงูุงุช ุจูุงุกู ุนูู ุงููุตู.  ูุงุนุฏุฉ ุงููุญุฏุฏุงุช ูู ุนุฏุฏ ุชุนุณูู ูู ุงูุฃุญุฑู (ูููุณ ุงูุญุฑูู).  ุฃูุซูุฉ ููุฑููุฒ ุงููุญุชููุฉ (ูุฏ ุชููู ุงููุนุฏูุงุช ุงูุฎุงุตุฉ ุจููู ูู ุจูุงูุงุช ุงูุฅุฏุฎุงู ุจุฏูู ูููุฉ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">block_mod__elem <span class="hljs-comment"><span class="hljs-comment">// ,     block_mod_mod__elem block__elem_mod_mod</span></span></code> </pre><br>  ุงูุชุญุณููุงุช: <br>  - ูุชู ูุชุงุจุฉ ุงูุฏุฑูุณ ูู ุงููุดุงุฑูุน ููุท ุจุฃุญุฑู ุตุบูุฑุฉ. <br>  - ูุชู ุชุบุฐูุฉ ุณูุณูุฉ ูุน ูุฆุฉ CSS ุตุงูุญุฉ ูุฅุฏุฎุงู ุงููุญุฏุฉ ุงูููุทูุฉ. <br><br>  ูุฌุจ ุนูู ุงููุญุฏุฉ ุงูููุทูุฉ ุฅุฑุฌุงุน ุงุณุชุฌุงุจุฉ ุงููููุฐุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">mod</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//    elem: "__", //    }</span></span></code> </pre> <br>  ูุฌุจ ุฃู ุชุตุฏุฑ ุงููุญุฏุฉ ููุญุฏุฉ ููุทูุฉ ูุดุชุฑูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) </span></span>{ }</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br>  ุงุณุชุบุฑูุช ุงููููุฉ ุงูุซุงููุฉ ุญูุงูู 20 ุฏูููุฉ.  ุจูุณุงุนุฏุชูุง ุ ุฃุฑุฏูุง ุงุฎุชุจุงุฑ ูุนุฑูุฉ ุงูุชุนุจูุฑุงุช ุงูููุชุธูุฉ ุจูู ุงููุดุงุฑููู. <br><br>  ูู ุงูุดุฑุท ุ ุนูููุง ุฃู ุงูุฅุฏุฎุงู ุฅูู ุงููุธููุฉ ุณูููู ุนุจุงุฑุฉ ุนู ุณูุณูุฉ ุชุญุชูู ุนูู ูุฆุฉ CSS ุตุงูุญุฉ ูุน ูููุฏ ุฅุถุงููุฉ ุ ุญูุซ ูุชู ูุตู ุชุณูุณู ุงูุญุฑูู ุนู ุทุฑูู ุชุณูุณู ุชุนุณูู ููุฃุญุฑู ุบูุฑ ุงูุญุฑููุฉ.  ูููุชูุง ูู ุฅูุฌุงุฏ ููุงุตู ูููู ุฏูุงูุงุชูุง. <br><br>  ุงูุฌุฒุก ุงูุฃูู ูู ุงุณู ุงููุตู ุณูููู ุฏุงุฆููุง ุงุณู ุงููุชูุฉ.  ูุฐุง ุชุณูุณู ูุงุญุฏ ุฃู ุฃูุซุฑ ูู ุงูุญุฑูู.  ููุชุจ ุงูุชุนุจูุฑ ุงูุนุงุฏู ุงูููุงุจู: [az] +. <br><br>  ุณูุญุชุงุฌ ุฅูู ุชุนุจูุฑุงุช ููุงุซูุฉ ููุจุญุซ ุนู ุงูุฃุฌุฒุงุก ุงููุชุจููุฉ: ุงุณู ุงููุนุฏู ููููุชู ุ ุฃู ุงุณู ุงูุนูุตุฑ ุงูุฐู ูุญุชูู ุนูู ุงููุนุฏู ูุงููููุฉ ุงููุทุงุจููู. <br><br>  ููุจุญุซ ุนู ุงููุญุฏุฏุงุช ุ ูุญุชุงุฌ ุฅูู ุชุณูุณู ุบูุฑ ุญุฑูู ุ ุงูุชุนุจูุฑ: [^ az] + ููุงุณุจ. <br><br>  ุถุนูุง ูุนูุง ูุญุฏุฏ ุงููุฌููุนุงุช ุงูุชู ุณูุณุชุฎุฏู ููููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> [, mod, elem ] = str.match(<span class="hljs-regexp"><span class="hljs-regexp">/[az]+(?:([^az]+)[az]+(?:\1)?[az]+)([^az]+)[az]+(?:\2)?[az]+/</span></span>);</code> </pre> <br>  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุงูุชุฃูุฏ ูู ุฃููุง ูููุง ุจุชุนุฑูู ุฏูุงูุงุช ุงููุฌููุนุงุช ุงูููุฌูุฏุฉ ุจุดูู ุตุญูุญ.  ููููู ุงูุงุณุชูุงุฏุฉ ูู ุญูููุฉ ุฃู ูุนุฏูู ููุท ููููู ุงูุงุฌุชูุงุน ูุฑุชูู. <br><br>  ุณูู ููุชุจ ุฏุงูุฉ ุณุชุฃุฎุฐ ุงูุณูุณูุฉ ุงูุฃุตููุฉ ูุณูุฌุฏ ุงููุงุตู ูุญุณุงุจ ุนุฏุฏ ุงูุชูุฑุงุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> substringCount = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source, substr</span></span></span><span class="hljs-function">) =&gt;</span></span> (source.match(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(<span class="hljs-string"><span class="hljs-string">'[az]'</span></span> + substr + <span class="hljs-string"><span class="hljs-string">'[az]'</span></span>, <span class="hljs-string"><span class="hljs-string">'g'</span></span>)) || []).length;</code> </pre> <br>  ุฅุฐุง ุงุชุถุญ ุฃู ุนูุตุฑ delimiter ูุญุฏุซ ูุฑุชูู ุ ู mod - ูุฑุฉ ูุงุญุฏุฉ ุ ูู ุงููุงูุน ูุฅู ุงูุนูุณ ูู ุงูุตุญูุญ.  ุงููุฑุงุฑ ุงูููุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> [, mod, elem ] = str.match(<span class="hljs-regexp"><span class="hljs-regexp">/[az]+(?:([^az]+)[az]+(?:\1)?[az]+)([^az]+)[az]+(?:\2)?[az]+/</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> substringCount = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source, substr</span></span></span><span class="hljs-function">) =&gt;</span></span> (source.match(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(<span class="hljs-string"><span class="hljs-string">'[az]'</span></span> + substr + <span class="hljs-string"><span class="hljs-string">'[az]'</span></span>, <span class="hljs-string"><span class="hljs-string">'g'</span></span>)) || []).length; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (substringCount(str, elem) === <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; substringCount(str, mod) === <span class="hljs-number"><span class="hljs-number">1</span></span>) { [mod, elem] = [elem, mod]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { mod, elem }; }</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ูุตูุน ุฌูู ุงุณุชูุณุงุฎ </h2>  <sup><i>ุงููุคูููู: ุฏููุชุฑู ุฃูุฏุฑูุงููู <a href="https://habr.com/ru/users/dima117/" class="user_link">ุฏููุง 117</a> ุ ุฃูููุณู ุบูุณูู</i></sup> <br><br><h4 style=";text-align:right;direction:rtl">  ุญุงูุฉ </h4><br>  ุฎุงุฑุฌ ุงููุงูุฐุฉ ูู 2319.  ุงูุดุฑูุงุช ุงุณุชูุณุงุฎ ุงูููุธููู ุงููุงุฌุญูู ูุฃุฏุงุก ููุงู ูุนูุฏุฉ. <br><br>  ูู ุฅูุชุงุฌ ุงูุญููุงูุงุช ุงููุณุชูุณุฎุฉ ุ ูุฑุฑูุง ุชุณููุฉ "ููุชุฌุงุช" ุฌุฏูุฏุฉ ูุน ูุดู ุงูุจุงุฑููุฏ ุนูู ูุชููู - ูุชูููุฒ ุงูุญููุงูุงุช ุงููุณุชูุณุฎุฉ ุนู ุจุนุถูุง ุงูุจุนุถ. <br><br>  ุณุงุนุฏ ููุธูู ุงููุตูุน ูู ูุชุงุจุฉ ูุธููุฉ ูู ุดุฃููุง ุฑุณู ุฑูุฒ ุดุฑูุทู ูุญุชูู ุนูู ูุนูููุงุช ุญูู ุงููุณุฎ. <br><br>  <b>ุงุณุชูุณุงุฎ ุชูุณูู ุงููุนูููุงุช</b> <br><br>  ูุชู ุชุฎุฒูู ุงููุนูููุงุช ุญูู ุงุณุชูุณุงุฎ ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">type CloneInfo = { <span class="hljs-comment"><span class="hljs-comment">/** *   โ  'male'  'female' */</span></span> sex: string; <span class="hljs-comment"><span class="hljs-comment">/** *   โ      *    ,  10  */</span></span> id: string; <span class="hljs-comment"><span class="hljs-comment">/** *   โ      *     ( 0  26 ) */</span></span> name: string; }</code> </pre> <br>  <b>ุฎูุงุฑุฒููุฉ ุชูุฏูู ุงูุจุงุฑููุฏ</b> <br><br>  ุงูุฑููุฒ ุงูุดุฑูุทูุฉ ุงููุณุชุฎุฏูุฉ ูู ูุตูุน ุงููุณุฎ ุชุจุฏู ููุง ููู: <br><br><img src="https://habrastorage.org/webt/jl/jj/dc/jljjdcawcmcsrmsgyyi9bk19oii.png" width="400"><br><br>  ุญุฌู ุงูุจุงุฑููุฏ ุซุงุจุช - 148 ร 156 ุจูุณู.  ุญูู ูุญูุท ุงูุจุงุฑููุฏ ุฅุทุงุฑุงุช ุณูุฏุงุก ูุจูุถุงุก ูู 3 ุจูุณู ููู ููููุง.  ููุฌุฏ ุฏุงุฎู ุงูุฅุทุงุฑุงุช ูุญุชูู ุงูุจุงุฑููุฏ ุ ููุชุฃูู ูู 18 ุณุทุฑูุง ูู 17 ูุฑุจุนูุง ุฃุณูุฏ ุฃู ุฃุจูุถ ููู ุณุทุฑ.  ุญุฌู ูู ูุฑุจุน ูู 8 ร 8 ุจูุณู. <br><br>  ุงููุฑุจุนุงุช ุงูุจูุถุงุก ูู ุงููุญุชูู ุชุฑููุฒ 0 ุ ุฃุณูุฏ - 1. <br><br>  <b>ุฎูุงุฑุฒููุฉ ุฅูุดุงุก ูุญุชูู ุงูุจุงุฑููุฏ</b> <br><br>  ุนูุฏ ุชูุงุทุน ุงูุตู ุงูุฃูู ูุงูุนููุฏ ุงูุฃูู ูููุญุชูู ุ ูุชู ุฑุณู ูุฑุจุน ูุดูุฑ ุฌูุณ ุงููุณุชูุณุฎุฉ.  ูุชู ุชุฑููุฒ ูููุฉ ุงูุฃูุซู ุจุตูุฑ (ุฃุจูุถ) ุ ุฐูุฑ ุจูุงุญุฏ (ุฃุณูุฏ). <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูุชู ุชุดููู ุณุทุฑ ูู ุงููููุฐุฌ &lt;id&gt; &lt;name&gt; ูู ูุนุฑู ุงูุญููู ูุงุณููุง.  ุญูู ุงูุงุณู ูุจุทู ุจูุณุงูุงุช ูู ููุงูุฉ 26 ุญุฑููุง. <br><br>  ูุชู ุชุญููู ุงูุณูุณูุฉ ุงููุงุชุฌุฉ ุฅูู ุตููู ุจุงูุช - ูุชู ุชุนููู ุฑูุฒ ASCII ุงูููุงุจู ููู ุญุฑู ูู ุงูุณูุณูุฉ (ุฑูู ูู 0 ุฅูู 255). <br><br>  ุซู ููุชุฑุฌู ูู ุนูุตุฑ ูู ุงูุตููู ุงููุงุชุฌ ุฅูู ุชุฑููุฒ ุซูุงุฆู (ุซูุงููุฉ ุฃุญุฑู 0 ุฃู 1) ููุชู ุชุฑููุฒู ุจุณูุณูุฉ ูู ุซูุงููุฉ ูุฑุจุนุงุช (0 - ุฑุจุน ุฃุจูุถ ุ 1 - ูุฑุจุน ุฃุณูุฏ).  ูุชู ุฑุณู ุงููุฑุจุนุงุช ูู ูุญุชูู ุงูุจุงุฑููุฏ ุจุงูุชุชุงุจุน ูุงูุณุทุฑ ุณุทุฑุงู. <br><br>  ูุญุชูู ุงูุณุทุฑ ุงูุฃุฎูุฑ ูู ุงููุญุชูู ุนูู ูุนูููุงุช ุงูุชุญูู. <br><br>  <b>ุฎูุงุฑุฒููุฉ ุงูุชุญูู ูู ูุนูููุงุช ุงูุชุญูู</b> <br><br>  ุชุญุฏุฏ ูู ูุฑุจุน ูู ุณุทุฑ ูุนูููุงุช ุงูุชุญูู ุชูุงูุค ูุฌููุน ููู ุงููุญุชูู ูู ุงูุนููุฏ ุงูููุงุจู.  ุฅุฐุง ูุงู ูุฌููุน ุงูุฃุตูุงุฑ ูุชูู ุงูููุฌูุฏุฉ ูู ุงูุนููุฏ ูุชุณุงูููุง ุ ูุณูุชู ุฑุณู ูุฑุจุน ุฃุจูุถ ูู ูุนูููุงุช ุงูุชุญูู ุ ูุฅูุง ุ ูุฅู ุงููุฑุจุน ุงูุฃุณูุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูู ุงูุญู ูุงูุฃูุซูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <b>ุชูุณูู ุงูุญู</b> <br><br>  ูุฌุจ ุฃู ูุญุชูู ุงูุญู ุงูุฐู ุชููู ุจุชุญูููู ุนูู ูุธููุฉ renderBarcode: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *       element * @param cloneInfo {CloneInfo} โ    * @param element {HTMLDivElement} โ div    * 148x156 ,      */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderBarcode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cloneInfo, element</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   }&lt;/source lang="javascript"&gt;      Google Chrome 77. &lt;h4&gt; 1&lt;/h4&gt;   : &lt;source lang="javascript"&gt;{ "sex": "male", "id": "c5j818dyo5", "name": "Oleg Vladimirovich" }</span></span></code> </pre> <br>  ุงูุจุงุฑููุฏ: <br><br><img src="https://habrastorage.org/webt/zm/pi/iz/zmpiiztvwzeo77-xswxzdrfhshs.png"><br><br><h4 style=";text-align:right;direction:rtl">  ูุซุงู 2 </h4><br>  ุงุณุชูุณุงุฎ ุงููุนูููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"sex"</span></span>: <span class="hljs-string"><span class="hljs-string">"female"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"0owrgqqwfw"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Dazdraperma Petrovna"</span></span> }</code> </pre> <br>  ุงูุจุงุฑููุฏ: <br><br><img src="https://habrastorage.org/webt/9e/yk/vo/9eykvoqjupololm76rjmle7030k.png"></div></div><br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br>  ูุงู ูู ุงูุถุฑูุฑู ุชูููู ุงูุชูุซูู ุงูุซูุงุฆู ููุจูุงูุงุช ุจุดูู ุตุญูุญ ุ ูุญุณุงุจ ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ููุง ูุฑุณู ูุฐู ุงูุจูุงูุงุช ูู ุงูุชุฎุทูุท.  ุฏุนูุง ูุญุงูู ุงูููุงู ุจุฐูู ุจุฃุณููุจ ุจุณูุท ูุจุฌุจูุฉ ูุฏุฑ ุงูุฅููุงู - ุจุฏูู ุชุญุณููุงุช ุงูููุฏ. <br><br>  ููุจุฏุฃ ุจุงูุชูุซูู ุงูุซูุงุฆู.  ุฃููุงู ุ ุฃุนูู ูุธุงุฆู ุงููุณุงุนุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    ASCII- function charToByte(char) { return char.charCodeAt(0); } //      0  1 (      ) function byteToString(byte) { return byte.toString(2).padStart(8, '0'); }</span></span></code> </pre> <br>  ูููู ุจุชูููู ุณูุณูุฉ ูู ุงูุจูุงูุงุช ุงููุตุฏุฑ ุชุชููู ูู ุฃุตูุงุฑ ูุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dataString = (cloneInfo.sex === <span class="hljs-string"><span class="hljs-string">'female'</span></span> ? <span class="hljs-string"><span class="hljs-string">'0'</span></span> : <span class="hljs-string"><span class="hljs-string">'1'</span></span>) + cloneInfo.id.split(<span class="hljs-string"><span class="hljs-string">''</span></span>).map(charToByte).map(byteToString).join(<span class="hljs-string"><span class="hljs-string">''</span></span>) + cloneInfo.name.padEnd(<span class="hljs-number"><span class="hljs-number">26</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>).split(<span class="hljs-string"><span class="hljs-string">''</span></span>).map(charToByte).map(byteToString).join(<span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br>  ุซู ุงูุชุจ ุงูุชุตููู ูุงูุฃููุงุท ุงูุฎุงุตุฉ ุจุงูุจุงุฑููุฏ ุงูุฎุงุต ุจูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,    ยซยป . //  ,      DOM API   innerHTML,     . //     ,      ,      ยซยป. //         โ   ,        . const contentElId = 'content-' + Math.random(); element.style.display = 'flex'; element.innerHTML = ` &lt;style&gt; .barcode { border: 3px solid black; box-sizing: border-box; } .content { margin-top: 3px; margin-left: 3px; width: 136px; height: 144px; display: flex; flex-wrap: wrap; } .content__bit { width: 8px; height: 8px; } .content__bit_one { background: black; } &lt;/style&gt; &lt;div class="content" id="${contentElId}"&gt;&lt;/div&gt; `; const contentDiv = document.getElementById(contentElId); element.className += ' barcode';</span></span></code> </pre> <br>  ุชูุฏูู ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ ูู ุงูุชุฎุทูุท: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">dataString .split(<span class="hljs-string"><span class="hljs-string">''</span></span>) .forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bit</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bitDiv = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); bitDiv.className = <span class="hljs-string"><span class="hljs-string">'content__bit content__bit_'</span></span> + (bit === <span class="hljs-string"><span class="hljs-string">'0'</span></span> ? <span class="hljs-string"><span class="hljs-string">'zero'</span></span> : <span class="hljs-string"><span class="hljs-string">'one'</span></span>); contentDiv.appendChild(bitDiv); });</code> </pre> <br>  ูุจูู ูุญุณุงุจ ูุนุฑุถ ุงูุงุฎุชุจุงุฑู.  ูุฐุง ูููู ุงูููุงู ุจู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">17</span></span>; i++) { <span class="hljs-comment"><span class="hljs-comment">//   let sum = 0; for (let j = i; j &lt; 17 ** 2; j += 17) { sum += parseInt(dataString[j], 2); } const check = 0; const bitDiv = document.createElement('div'); //       bitDiv.className = 'content__bit content__bit_' + (sum % 2 === 0 ? 'zero' : 'one'); contentDiv.appendChild(bitDiv); }</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  D. ุฃุชูุชุฉ ุฐูู </h2>  <sup><i>ุงููุคูููู: ููุงุฏูููุฑ ุฑูุณูู ุ ุฏููุชุฑู ูุงูุงุชููููู</i></sup> <br><br>  ูู ูู ุฎูุงุฑ ูู ุฎูุงุฑุงุช ุงูุชุฃููู ุ ูุงูุช ููุงู ูููุฉ ุชู ูููุง ุงูุชุฑุงุญ ุตูุญุฉ HTML ูุน ุฌุฏูู ุฃู ูุงุฆูุฉ ููุฏุฎูุงุช.  ูุงู ูููุงู ูุฐู ุงูุณูุณูุฉ ุฃุณุทูุฑุฉ ูุฎุชููุฉ ุ ููููู ุฌููุนุง ุชูุตููุง ุฅูู ุญูููุฉ ุฃูู ุจุญุงุฌุฉ ุฅูู ููู ุงูุตูุญุฉ ุฅูู ุชูุณูู ูุดุงุจู ูู Markdown.  ุณูููู ุจุชุญููู ุงูุญู ูุฃุญุฏ ุงููุดุงูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุญุงูุฉ </h4><br>  ุนูู ุจูุงุจุฉ ุงูููุงูุฉ ูุชูููุฑ ุงูุฎุฏูุงุช ุ ุฃุชุงุญูุง ุชูุฏูู ุทูุจ ููุญุตูู ุนูู ุงููุณุชูุฏุงุช ุชููุงุฆููุง ุจุงููุงูู ุ ูุฐูู ุชุญุชุงุฌ ููุท ุฅูู ููุก ุฌุฏูู ุจุงูุจูุงูุงุช ุงูุดุฎุตูุฉ. <br><br>  ุซู ูุชู ููู ูุฐู ุงูุจูุงูุงุช ููุชุญูู ุฅูู ุงูุนุฏูุฏ ูู ุงูุณูุทุงุช ุ ุจูุง ูู ุฐูู ูุฒุงุฑุฉ ุงูุดุคูู ุงูุฏุงุฎููุฉ.  ุจุนุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑ ุ ุชุจูู ุฃู ูุฒุงุฑุฉ ุงูุดุคูู ุงูุฏุงุฎููุฉ ุชูุจู ุงูุจูุงูุงุช ุจุชูุณูู ุชุฎููุถ ุงูุณุนุฑ ุ ูุฃู ุฎุฏูุงุช ุงูุฏููุฉ ุชุณุชุฎุฏู ุชูุณูู HTML.  ุณุงุนุฏูู ูู ูุชุงุจุฉ ุจุฑูุงูุฌ ูุตู ูุชุฑุญูู ุฃุญุฏ ุงูุชูุณููุงุช ุฅูู ุชูุณูู ุขุฎุฑ ุ ุจุญูุซ ูุจุฏุฃ ุงููุงุนุจูู ูู ุฃุณุฑุน ููุช ูููู. <br><br>  ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ูุธููุฉ ุชุฃุฎุฐ ุฌุฏูู HTML ููุฏุฎูุงุช ูุชุญููููุง ุฅูู ุนูุงูุฉ ุชุดุจู Markdown. <br><br>  ูุญู ููุฐู ุงููููุฉ ุ ุฃุฑุณู ููู .js ุงูุฐู ูุชู ููู ุงูุฅุนูุงู ุนู ูุธููุฉ ุงูุญู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">solution</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูุณูู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุงูููุงุญุธุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl">  ุชูุณูู ุงูุฅุฏุฎุงู </h4><br>  ูุฃุชู ุฌุฏูู HTML ูุณูุณูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colgroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"right"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">col</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colgroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Command <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Description <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Is implemented <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>git status<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>List all new or modified files<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Yes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>git diff<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Show file differences that haven't been staged<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>No<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ูุฏ ูุญุชูู ุงูุฌุฏูู ุนูู ุนูุงูุงุช colgroup ู thead ู tbody ุจุชุฑุชูุจ ุซุงุจุช.  ูู ูุฐู ุงูุนูุงูุงุช ุงุฎุชูุงุฑูุฉ ุ ูููู ุนูู ุงูุฃูู ุณูููู ููุงู ุฏุงุฆููุง tead ุฃู tbody. <br><br>  - ูุญุชูู colgroup ุนูู ุนูุงูุงุช col ูููู ุฃู ุชุญุชูู ุนูู ุณูุฉ ุงููุญุงุฐุงุฉ ุงูุงุฎุชูุงุฑูุฉ ูุน ุฅุญุฏู ุงูููู ุงูุซูุงุซ (ูุณุงุฑ | ูุฑูุฒ | ูููู) <br>  - thead ู tbody ูุญุชูู ุนูู 1 ุฃู ุฃูุซุฑ tr <br>  - tr ุ ุจุฏูุฑู ุ ูุญุชูู ุนูู ูู ูู td ู th <br>  - ุณูููู ุงูุฌุฏูู ุฏุงุฆูุง ุตู ูุงุญุฏ ุนูู ุงูุฃูู.  - ุณูููู ููุตู ุฏุงุฆููุง ุฎููุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู.  - ููุฌุฏ ุฑูุฒ ุบูุฑ ุฃุจูุถ ุนูู ุงูุฃูู ูู ุงูุฎููุฉ. <br>  - ูุชุทุงุจู ุนุฏุฏ ุงูุนูุงุตุฑ th / td ูู ุงูุฎุทูุท ุฏุงุฆููุง ุจูู ุฌููุน ุงูุฎุทูุท ููุน ุนุฏุฏ ุนูุงุตุฑ col ูู colgroup ุ ุฅุฐุง ูุงู ููุงู colgroup. <br>  - ูููู ุฃู ุชุญุฏุซ ุงููุณุงูุงุช ูููุงุตู ุงูุฃุณุทุฑ ูู ูุตุฏุฑ HTML ูู ุฃู ููุงู ูุง ููุชูู ุตูุงุญูุฉ HTML. <br><br><h4 style=";text-align:right;direction:rtl">  ุชูุณูู ุงูุฅุฎุฑุงุฌ </h4><br>  ูุฌุจ ุฃู ูููู ุงูุฅุฎุฑุงุฌ ุนุจุงุฑุฉ ุนู ุฎุท ูุน ุงูุนูุงูุงุช ุงูุชุฑููุฒูุฉ: <br><br> <code>| Command | Description | **Is implemented** | <br> | ---: | :--- | :---: | <br> | **git status** | List all new or modified files | **Yes** | <br> | **git diff** | Show file differences that haven't been staged | No |</code> <br> <br>  - ูุฌุจ ุฃู ูุชุญูู ุงูุตู ุงูุฃูู ุงูุฐู ูุชู ููุงุฌูุชู ูู ุฌุฏูู ุฏุงุฆููุง ุฅูู ุตู ุฑุฃุณ ูู ุนูุงูุฉ ุชูููุฒ. <br>  - ุฌููุน ุงูุตููู ุงูุฃุฎุฑู ุชุฐูุจ ุฅูู ุฌุณู ุงูุฌุฏูู. <br>  - ูุชู ุนุฑุถ ูุงุตู ุงูุฑุฃุณ ุฏุงุฆููุง. <br>  - ูุชู ุฅุฏุฑุงุฌ ูุญุชููุงุช td ููุง ูู ุ ูุญุชููุงุช th ูู ** bold **. <br>  - ููุงู ุฏุงุฆููุง ูุณุงูุฉ ูุงุญุฏุฉ ุจูู ูุญุชููุงุช ุงูุฎููุฉ ูู ุนูุงูุฉ ุงูุชุฑููุฒ ููุญุฏุฏุงุช ุงูุฎููุฉ (|). <br>  - ูุฌุจ ุฅุฒุงูุฉ ุงููุณุงูุงุช ุนูู ุญูุงู ูุญุชููุงุช ุนูุงูุงุช td ู th. <br>  - ูุฌุจ ุญุฐู ููุงุตู ุงูุฃุณุทุฑ ูู ูุญุชููุงุช ุงูุฎููุฉ. <br>  - ูุฌุจ ุงุณุชุจุฏุงู ุฃูุซุฑ ูู ูุณุงุญุฉ ูุงุญุฏุฉ ุนูู ุงูุชูุงูู ูู ูุญุชููุงุช ุงูุฎูุงูุง ุจูุณุงูุฉ ูุงุญุฏุฉ. <br>  - ูููุญุงุฐุงุฉ ูู ุฎูุงูุง ุฃุนูุฏุฉ ุฌุฏูู ุชุฎููุถ ุงูุณุนุฑ ุ ูููู ุชูุณูู ูุงุตู ุงูุฑุฃุณ ูุณุคููุงู: <br><br>  |  : --- |  ูุนูู ุงููุณุงุฑ ุงููุญุงุฐุงุฉ <br>  |  : ---: |  ูุนูู ูุญุงุฐุงุฉ ุงููุณุท <br>  |  ---: |  ูุนูู ุงููุญุงุฐุงุฉ ุงูุตุญูุญุฉ <br><br>  ุฅุฐุง ูู ููู ููุงู ุณูุฉ ูุญุงุฐุงุฉ ูุญุฏุฏุฉ ูู ุนูุงูุฉ col ุ ููุฌุจ ุชุนููู ุงููุญุงุฐุงุฉ ุฅูู ุงููุณุงุฑ. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูููุงุญุธุงุช </h4><br>  - ุจุงููุณุจุฉ ูุฎูุงุตุฉ ุงูุณุทุฑ ุ ููุฒู ุงุณุชุฎุฏุงู ุงูุญุฑู \ n. <br>  - ุณูุชู ุงุฎุชุจุงุฑ ุงูุญู ูู ุจูุฆุฉ ูุณุชุนุฑุถ <b>(Chrome 78)</b> ูุน ุฅููุงููุฉ ุงููุตูู ุฅูู ูุงุฆูุงุช ุงููุณุชูุฏ ูุงููุงูุฐุฉ. <br>  - ููููู ุงุณุชุฎุฏุงู ุจูุงุก ุงูุฌููุฉ ุญุชู <b>es2018</b> ุถููุงู. </div></div><br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br>  ูุชู ุญู ุงููุดููุฉ ุจุจุณุงุทุฉ ุนู ุทุฑูู ุงุฌุชูุงุฒ ุดุฌุฑุฉ DOM ูู ุงูุฌุฏูู.  ูุชู ุชูููุฐ ุฏุนู ุดุฌุฑุฉ DOM ุนูู ูุณุชูู ุงููุชุตูุญ ุ ููู ุฌุฒุก ูุง ูุชุฌุฒุฃ ููู ุ ูุฐูู ูู ุชููู ููุงู ูุดุงูู.  ูุญู ุงููุดููุฉ ุ ูููู ุชุฑุฌูุฉ ุดุฌุฑุฉ DOM ูู HTML ุฅูู ุชุฑููุฒ ุงูุนูุงูุงุช. <br><br>  ุจุนุฏ ูุญุต ุงูุฃูุซูุฉ ุ ููููู ุฃู ุชุฑู ุฃู ุงูุชุญููู ุจุณูุท ููุบุงูุฉ.  ููุฌุฏ ุฃุฏูุงู ุงูููุฏ ุงูุฐู ููุซู ูุต ูุธููุฉ ุงูุญู (ุงูุฅุฏุฎุงู). <br><br>  ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุชุญููู ุงูุณูุณูุฉ ูู HTML ุฅูู ุดุฌุฑุฉ DOM: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> div = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); div.innerHTML = input; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = div.firstChild;</code> </pre> <br>  ุจุนุฏ ุชููู ุดุฌุฑุฉ DOM ุ ูููููุง ููุท ุงููุฑูุฑ ุนุจุฑูุง ููุนุงูุฌุฉ ุงูุจูุงูุงุช ูู ุนูุฏ DOM ูุฎุชููุฉ.  ููููุงู ุจุฐูู ุ ูููู ุชุฌุงูุฒ ุชุณูุณู ุงูุนูุงุตุฑ ุงููุฎุชููุฉ ูุนูุงุตุฑ DOM: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processors = { <span class="hljs-string"><span class="hljs-string">'colgroup'</span></span>: processColgroup, <span class="hljs-string"><span class="hljs-string">'thead'</span></span>: processThead, <span class="hljs-string"><span class="hljs-string">'tbody'</span></span>: processTbody, }; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> child <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> table.children) { processors[child.tagName.toLowerCase()](child); }</code> </pre> <br>  ูู ุนูุงูุงุช colgroup ู col ุ ูุญู ููุชููู ุจูุนุฑูุฉ ูุญุงุฐุงุฉ ุฃุนูุฏุฉ ุงูุฌุฏูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> alignments = []; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> defaultAlign = <span class="hljs-string"><span class="hljs-string">'left'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processColgroup = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">colgroup</span></span></span><span class="hljs-function">) =&gt;</span></span> { alignments.push(...Array(...colgroup.children).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">col</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> col.align || defaultAlign; })); };</code> </pre> <br>  ูู ุงูุนูุงูุงุช ุ tbody ู tr ุ ูุญู ููุชููู ููุท ุจุงูุฃุทูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rows = []; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processThead = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">thead</span></span></span><span class="hljs-function">) =&gt;</span></span> { rows.push(...Array(...thead.children).map(processTr)); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processTbody = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tbody</span></span></span><span class="hljs-function">) =&gt;</span></span> { rows.push(...Array(...tbody.children).map(processTr)); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processTr = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tr</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...tr.children).map(processCell); };</code> </pre> <br>  ูู ุงูููู ุฃูุง ููุณู ุฃูู ุ ููููุง ููุงุชูุงููุฉ ุ ูุชู ุชูุณูู td ู th ุจุดูู ูุฎุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processCell = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cell</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tag = cell.tagName.toLowerCase(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> content = clearString(cell.innerHTML); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">'td'</span></span>: content, <span class="hljs-string"><span class="hljs-string">'th'</span></span>: <span class="hljs-string"><span class="hljs-string">`**</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${content}</span></span></span><span class="hljs-string">**`</span></span>, }[tag]; };</code> </pre> <br>  ููุนูู ูุน ูุญุชูู ุงุฎุชุจุงุฑ DOM ุ ูุฌุจ ุนููู ุชูุจูุฉ ุงููุชุทูุจุงุช ุงูููุถุญุฉ ูู ุงูุดุฑุท: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clearLineBreaks = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> str.replace(<span class="hljs-regexp"><span class="hljs-regexp">/\r?\n|\r/g</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clearSpaces = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> str.replace(<span class="hljs-regexp"><span class="hljs-regexp">/\s+/g</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clearString = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> clearSpaces(clearLineBreaks(str)).trim();</code> </pre> <br>  ุจุนุฏ ุฃู ุชุฌูููุง ุญูู ุดุฌุฑุฉ DOM ุ ุชู ูุชุงุจุฉ ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุทุงููุชูุง ุฅูู ูุฌููุนุฉ ุงูุตููู: <br><br> <code>[ <br> ["Command","Description","**Is implemented**"], <br> ["**git status**","List all new or modified files","**Yes**"], <br> ["**git diff**","Show file differences that haven't been staged","No"] <br> ]</code> <br> <br>  ูุงูุช ูุนูููุงุช ูุญุงุฐุงุฉ ุงูุนููุฏ ูู ุตููู ุงููุญุงุฐุงุฉ: <br><br> <code>["right","left","center"]</code> <br> <br>  ูู ุงูููู ุฃู ุชุชุฐูุฑ ุฃู ูุนูููุงุช ูุญุงุฐุงุฉ ุงูุนููุฏ ูุฏ ูุง ุชููู ูู ุงูุฅุฏุฎุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateAlignments = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (alignments.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; alignments.push(...rows[<span class="hljs-number"><span class="hljs-number">0</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> defaultAlign)); }; updateAlignments();</code> </pre> <br>  ุชุญููู ุงููุญุงุฐุงุฉ ุฅูู ุงููููุฐุฌ ุงูููุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> alignmentsContents = alignments.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">align</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">'left'</span></span>: <span class="hljs-string"><span class="hljs-string">' :--- '</span></span>, <span class="hljs-string"><span class="hljs-string">'center'</span></span>: <span class="hljs-string"><span class="hljs-string">' :---: '</span></span>, <span class="hljs-string"><span class="hljs-string">'right'</span></span>: <span class="hljs-string"><span class="hljs-string">' ---: '</span></span> }[align]; }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> delimiter = <span class="hljs-string"><span class="hljs-string">`|</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${alignmentsContents.join(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'|'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">|`</span></span>;</code> </pre> <br>  ูุซุงู ุนูู ูููุฉ ุงููุญุฏุฏ: <br><br> <code>"| ---: | :--- | :---: |"</code> <br> <br>  ุณุชููู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุชุดููู ุฎุท ุชุฎููุถ ุงูุณุนุฑ ุงูุฐู ูุญุชูู ุนูู ุฌููุน ุงูุจูุงูุงุช ุงูููุฑูุกุฉ ูู HTML: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lineEnd = <span class="hljs-string"><span class="hljs-string">'\n'</span></span>; rows.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row, i</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) markdown += lineEnd; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mdRow = <span class="hljs-string"><span class="hljs-string">`| </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${row.join(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">' | '</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string"> |`</span></span>; markdown += mdRow; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i === <span class="hljs-number"><span class="hljs-number">0</span></span>) { markdown += lineEnd; markdown += delimiter; } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> markdown;</code> </pre> <br>  ุนูุฏุฉ ุจูุงุก ูุนูู ุฃู ูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฃุนูุงู ูุงู ูุต ูุธููุฉ ุงูุญู (ุงููุฏุฎูุงุช).  ูุชูุฌุฉ ููุฐู ุงููุธููุฉ ุ ูุญุตู ุนูู ููุฏ ุฌุฏูู ุชุฎููุถ ุงูุณุนุฑ ุงููุทููุจ ุงูููุถุญ ูู ูุซุงู ุงูุฅุฎุฑุงุฌ ูู ุญุงูุฉ ุงููููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  E. ูุจุงุก ุงูููุฑูุณ </h2>  <sup><i>ุงููุคูููู: ุฃูุฏุฑูู ูููุฑูุณูู ุ ุฅููุงู ุจูุชูุฎูู</i></sup> <br><br>  ูุดุฑุช ููุธูุฉ ุงูุตุญุฉ ุงูุนุงูููุฉ ุชูุฑูุฑุง ุนู ุนูุงูุงุช ุงููุจุงุก ุงููุดูู ูููุฑูุณ ุฌุฏูุฏ ููุฏุฏ ุงููุทูุฑูู ุงูุฃูุงูููู.  ูู ุงููุนุฑูู ุฃู ุงูููุฑูุณ ูุง ูุธูุฑ ููุณู ุญุชู ูุฑู ุงููุถูู ุฑูุฒ JS ุงูุฐู ูุญุชูู ุนูู ุจุนุถ ุงูุชุนุจูุฑุงุช.  ุจูุฌุฑุฏ ุฃู ูุฑู ุงูุดุฎุต ุงููุตุงุจ ูุฐุง ุงูุชุนุจูุฑ ุ ูููุฏ ูุฏุฑุชู ุนูู ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู JS ููุจุฏุฃ ูู ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุชููุงุฆููุง ูู ููุฑุชุฑุงู. <br><br>  ูุฐูุฑ ุงูุชูุฑูุฑ ุฃู ุงูููุฑูุณ ูุฏ ุชู ุชูุดูุทู ูู ุฎูุงู ุงููุธุฑ ูู ุงุณุชุฎุฏุงู ุงููุณูุทุฉ ุงูุฃููู ูู ุงูุฏุงูุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุจูุงุณุทุฉ ุงููุณูุทุฉ ุฅูู ุงุณุชุฏุนุงุก ุฏุงูุฉ Zyn ุ ุฃู ุฃู ุงูุดุฎุต ุงููุตุงุจ ูุง ููููู ุฅุธูุงุฑ ุชุนุจูุฑ ูุซู Zyn (ุฏุงูุฉ (a ุ b ุ c) {console.log (a)}). <br><br>  ูู ุฃุฌู ุนุฏู ููุฏ ุฌููุน ุงููุงุฌูุงุช ุงูุฃูุงููุฉ ุนู ุทุฑูู ุงูุฎุทุฃ ุ ูุฑุฑุช AST &amp; Co ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูููุฏุงุช ุงูุฎุงุตุฉ ุจูุง ุชุญุชูู ุนูู ุงูุชุนุจูุฑ ุฃุนูุงู.  ุณุงุนุฏ ูููุฏุณู ุงูุดุฑูุฉ ูู ูุชุงุจุฉ ูุฐุง ุงูุดูู. <br><br>  ุญูู ุฑูุฒ AST &amp; Co ุ ูุนูู ุฃู: <br><br>  - ูู ููุชูุจ ูู ES3 ุ <br>  - ุงููุตูู ุฅูู ุฎุตุงุฆุต ูุงุฆู ูููู ูู ุฎูุงู ููุทุฉ ูุนุจุฑ ุงูุฃููุงุณ (ab ู ['b']) ุ <br>  - ูููู ุชุฎุฒูู ุฌุฒุก ูู ุงูุชุนุจูุฑ ูู ูุชุบูุฑ ุ ููู ูุง ูุชู ุชูุฑูุฑู ุฅูู ุงูุฏุงูุฉ ุจูุงุณุทุฉ ุงููุนููุฉ (a (x) - ูุญุธูุฑ) ุ <br>  - ูุง ุชูุฌุฏ ูุธุงุฆู ุชุฑุฌุน ุฌุฒุกูุง ูู ุงูุชุนุจูุฑ ุงููุทููุจ ุ <br> โ      ,    , <br> โ             (a[x], x โ ), <br> โ         , . .      var a = x; a = y;  var a = b = 1. <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">   </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl">   </h4><br>       CommonJS-,   ,       (ast)  . <br><br>      ast-,       callback-,    Zyn      ,   . <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) </span></span>{ ... return [...]; }</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุงูููุงุญุธุงุช </h4><br>         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *   .     , *   callback- onNodeEnter (  ) *  onNodeLeave (  )    *     (  Scope ). * * @param {object} ast  ast. * @param {Function} [onNodeEnter=(node, scope)=&gt;{}]       . * @param {Function} [onNodeLeave=(node, scope)=&gt;{}]       . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traverse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ast, onNodeEnter = (node, scope</span></span></span><span class="hljs-function">) =&gt; </span></span>{}, onNodeLeave = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node, scope</span></span></span><span class="hljs-function">) =&gt;</span></span> {} ) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootScope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scope(ast); _inner(ast, rootScope); <span class="hljs-comment"><span class="hljs-comment">/** *    . *     scope,   . * * @param {object} astNode ast-. * @param {Scope} currentScope   . * @return {Scope}      astNode. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolveScope</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">astNode, currentScope</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> isFunctionExpression = ast.type === <span class="hljs-string"><span class="hljs-string">'FunctionExpression'</span></span>, isFunctionDeclaration = ast.type === <span class="hljs-string"><span class="hljs-string">'FunctionDeclaration'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isFunctionExpression &amp;&amp; !isFunctionDeclaration) { <span class="hljs-comment"><span class="hljs-comment">//      . return currentScope; } //      . const newScope = new Scope(ast, currentScope); ast.params.forEach(param =&gt; { //     . newScope.add(param.name); }); if (isFunctionDeclaration) { //       . currentScope.add(ast.id.name); } else { //  -    . newScope.add(ast.id.name); } return newScope; } /** *    ast. * * @param {object} astNode  ast-. * @param {Scope} scope     ast-. */ function _inner(astNode, scope) { if (Array.isArray(astNode)) { astNode.forEach(node =&gt; { /*    . *  , ,  . */ _inner(node, scope); }); } else if (astNode &amp;&amp; typeof astNode === 'object') { onNodeEnter(astNode, scope); const innerScope = resolveScope(astNode, scope), keys = Object.keys(astNode).filter(key =&gt; { // loc -  ,   ast-. return key !== 'loc' &amp;&amp; astNode[key] &amp;&amp; typeof astNode[key] === 'object'; }); keys.forEach(key =&gt; { //   . _inner(astNode[key], innerScope); }); onNodeLeave(astNode, scope); } } } /** *   . * * @class Scope (name) * @param {object} astNode ast-,    . * @param {object} parentScope   . */ function Scope(astNode, parentScope) { this._node = astNode; this._parent = parentScope; this._vars = new Set(); } Scope.prototype = { /** *      . * * @param {string} name  . */ add(name) { this._vars.add(name); }, /** *       . * * @param {string} name  . * @return {boolean}          . */ isDefined(name) { return this._vars.has(name) || (this._parent &amp;&amp; this._parent.isDefined(name)); } };</span></span></code> </pre> </div></div><br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br>    . <br><br><blockquote style=";text-align:right;direction:rtl"> โ    ES3 </blockquote> ,          . ,       . <br><br><blockquote style=";text-align:right;direction:rtl"> โ        ,     (ab  a['b']) </blockquote>       Zyn,   Z['y'].n, Zy['n']  Z['y']['n']. <br><br><blockquote style=";text-align:right;direction:rtl">       ,        (a(x) โ ) </blockquote>         ,         . ,     : var x = Zy; xn(...). <br><br><blockquote style=";text-align:right;direction:rtl"> โ  ,     , <br> โ      ,    , <br> โ         , ..      var a = x; a = y;  var a = b = 1. </blockquote>   (       )  ,        - . <br><br><blockquote style=";text-align:right;direction:rtl"> โ     ,        (a[x], x โ ) </blockquote>          ,    : var x = 'y'; Z[x].n(...). <br><br> C    : <br> 1.   ,     ,     . <br> 2.   ,     . <br><br> ,     ,         โ          .        2. <br><br> <b> </b> <br><br>     :   Zyn(function(a, b, c){...}),  โ     . <br><br>    FunctionExpression โ      CallExpression,   callee โ MemberExpression.   property โ n,  object (  MemberExpression  object  property   y) โ Z. <br><br>        ,      โ  โ  .     โ  Identifier    ,      MemberExpression  ObjectLiteral    (xa  var x = {a: ...} ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">+++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-120</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> +<span class="hljs-number"><span class="hljs-number">120</span></span>,<span class="hljs-number"><span class="hljs-number">59</span></span> @@ Scope.prototype = { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._vars.has(name) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._parent &amp;&amp; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._parent.isDefined(name</span></span></span><span class="hljs-function">)); } }; + +</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">exports</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) { + </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> = []; + + </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">traverse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast, (node, scope</span></span></span><span class="hljs-function">) =&gt;</span></span> { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type !== <span class="hljs-string"><span class="hljs-string">'CallExpression'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> args = node.arguments; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (args.length !== <span class="hljs-number"><span class="hljs-number">1</span></span> || + args[<span class="hljs-number"><span class="hljs-number">0</span></span>].type !== <span class="hljs-string"><span class="hljs-string">'FunctionExpression'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> callee = node.callee; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (callee.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property = callee.property, + object = callee.object; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property.name !== <span class="hljs-string"><span class="hljs-string">'n'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + property = object.property; + object = object.object; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property.name !== <span class="hljs-string"><span class="hljs-string">'y'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span> || + object.name !== <span class="hljs-string"><span class="hljs-string">'Z'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + + checkFunction(args[<span class="hljs-number"><span class="hljs-number">0</span></span>]); + }); + + <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) </span></span>{ + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstArg = ast.params[<span class="hljs-number"><span class="hljs-number">0</span></span>]; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!firstArg) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + + traverse(ast.body, (node, scope) =&gt; { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type !== <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.name === firstArg.name) { + result.push(node); + } + }); + } + + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; +};</code> </pre> <br>    traverse ,       ,      MemberExpression  ObjectProperty. : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">--- a/traverse.js +++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-60</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span> +<span class="hljs-number"><span class="hljs-number">60</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span> @@ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traverse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> * @param {object} astNode  ast- * @param {Scope} scope     ast- *</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/ - function _inner(astNode, scope) { + function _inner(astNode, scope, parent) { if (Array.isArray(astNode)) { astNode.forEach(node =&gt; { /</span></span></span></span><span class="hljs-function"><span class="hljs-params">*    . *  , ,   *</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/ - _inner(node, scope); + _inner(node, scope, parent); }); } else if (astNode &amp;&amp; typeof astNode === 'object') { - onNodeEnter(astNode, scope); + onNodeEnter(astNode, scope, parent); const innerScope = resolveScope(astNode, scope), keys = Object.keys(astNode).filter(key =&gt; { @@ -80,10 +80,10 @@ function traverse( keys.forEach(key =&gt; { /</span></span></span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/    - _inner(astNode[key], innerScope); + _inner(astNode[key], innerScope, astNode); }); - onNodeLeave(astNode, scope); + onNodeLeave(astNode, scope, parent); } } } @@ -164,10 +164,22 @@ module.exports = function (ast) { return; } - traverse(ast.body, (node, scope) =&gt; { + traverse(ast.body, (node, scope, parent) =&gt; { if (node.type !== 'Identifier') { return; } + if (!parent) { + return; + } + if (parent.type === 'MemberExpression' &amp;&amp; + parent.computed === false &amp;&amp; + parent.property === node) { + return; + } + if (parent.type === 'ObjectProperty' &amp;&amp; + parent.key === node) { + return; + } if (node.name === firstArg.name) { result.push(node); }</span></span></span></span></span></span></code> </pre> </div></div><br>         .   getPropName: <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">--- a/traverse.js +++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-121</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">121</span></span>,<span class="hljs-number"><span class="hljs-number">18</span></span> @@ Scope.prototype = { } }; +<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPropName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) </span></span>{ + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prop = node.property; + + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!node.computed) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prop.name; + } + + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prop.type === <span class="hljs-string"><span class="hljs-string">'StringLiteral'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prop.value; + } +} + <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = []; @@ <span class="hljs-number"><span class="hljs-number">-137</span></span>,<span class="hljs-number"><span class="hljs-number">17</span></span> +<span class="hljs-number"><span class="hljs-number">149</span></span>,<span class="hljs-number"><span class="hljs-number">17</span></span> @@ <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (callee.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } - <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property = callee.property, + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property = getPropName(callee), object = callee.object; - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property.name !== <span class="hljs-string"><span class="hljs-string">'n'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property !== <span class="hljs-string"><span class="hljs-string">'n'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } - property = object.property; + property = getPropName(object); object = object.object; - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property.name !== <span class="hljs-string"><span class="hljs-string">'y'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property !== <span class="hljs-string"><span class="hljs-string">'y'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span> ||</code> </pre> </div></div><br>      :        .        .     1. <br><br> <b> Scope</b> <br><br>    Scope       .  ,   ,        traverse: <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">--- a/traverse.js +++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> +<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span> @@ +<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scopeStorage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>(); + +<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScopeFor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast, outerScope</span></span></span><span class="hljs-function">) </span></span>{ + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!scopeStorage.has(ast)) { + scopeStorage.set(ast, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scope(ast, outerScope)); + } + + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scopeStorage.get(ast); +} <span class="hljs-comment"><span class="hljs-comment">/** *   .     , *   callback- onNodeEnter (  ). @@ -13,7 +22,7 @@ function traverse( onNodeEnter = (node, scope) =&gt; {}, onNodeLeave = (node, scope) =&gt; {} ) { - const rootScope = new Scope(ast); + const rootScope = getScopeFor(ast); _inner(ast, rootScope); @@ -36,19 +45,19 @@ function traverse( } //      . - const newScope = new Scope(ast, currentScope); + const newScope = getScopeFor(ast, currentScope); ast.params.forEach(param =&gt; { //     . - newScope.add(param.name); + newScope.add(param.name, param); }); if (isFunctionDeclaration) { //       . - currentScope.add(ast.id.name); + currentScope.add(ast.id.name, ast); } else if (ast.id) { //  -    . - newScope.add(ast.id.name); + newScope.add(ast.id.name, ast); } return newScope; @@ -98,7 +107,7 @@ function traverse( function Scope(astNode, parentScope) { this._node = astNode; this._parent = parentScope; - this._vars = new Set(); + this._vars = new Map(); } Scope.prototype = { @@ -107,8 +116,24 @@ Scope.prototype = { * * @param {string} name   */</span></span> - add(name) { - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._vars.add(name); + add(name, value) { + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._vars.set(name, { + value: value, + scope: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> + }); + }, + resolve(node) { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!node) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type === <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._vars.get(node.name); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value) { + <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; + } + value = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._parent &amp;&amp; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._parent.resolve(node</span></span></span><span class="hljs-function">)); + </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">; + } }, /** *       . @@ -136,6 +161,12 @@ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getPropName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">exports</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> = []; + </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">traverse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast, (node, scope</span></span></span><span class="hljs-function">) =&gt;</span></span> { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type === <span class="hljs-string"><span class="hljs-string">'VariableDeclarator'</span></span>) { + scope.add(node.id.name, node.init); + } + }); + traverse(ast, (node, scope) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type !== <span class="hljs-string"><span class="hljs-string">'CallExpression'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;</code> </pre> </div></div><br> <b> Scope</b> <br><br>      .        ,     Scope    . ,   Scope   ,        : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">--- a/traverse.js +++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-146</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span> +<span class="hljs-number"><span class="hljs-number">146</span></span>,<span class="hljs-number"><span class="hljs-number">17</span></span> @@ Scope.prototype = { } }; -<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPropName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) </span></span>{ +<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPropName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node, scope</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prop = node.property; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!node.computed) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prop.name; } + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> resolved = scope.resolve(prop); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolved) { + prop = resolved.value; + } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prop.type === <span class="hljs-string"><span class="hljs-string">'StringLiteral'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prop.value; } @@ <span class="hljs-number"><span class="hljs-number">-177</span></span>,<span class="hljs-number"><span class="hljs-number">22</span></span> +<span class="hljs-number"><span class="hljs-number">181</span></span>,<span class="hljs-number"><span class="hljs-number">43</span></span> @@ <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> callee = node.callee; + + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> resolved = scope.resolve(callee); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolved) { + callee = resolved.value; + scope = resolved.scope; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (callee.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } - <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property = getPropName(callee), + <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property = getPropName(callee, scope), object = callee.object; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property !== <span class="hljs-string"><span class="hljs-string">'n'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } + + resolved = scope.resolve(object); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolved) { + object = resolved.value; + scope = resolved.scope; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'MemberExpression'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } - property = getPropName(object); + property = getPropName(object, scope); object = object.object; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property !== <span class="hljs-string"><span class="hljs-string">'y'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } + + resolved = scope.resolve(object); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolved) { + object = resolved.value; + scope = resolved.scope; + } + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (object.type !== <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span> || object.name !== <span class="hljs-string"><span class="hljs-string">'Z'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;</code> </pre> </div></div><br> <b> </b> <br><br>        :       .    : <br><br> โ  ,  Z โ     ,   - . <br> โ  ,         ,        . <br> โ       ,       var a = 'x', b = a. <br><br>    ,   . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">--- a/traverse.js +++ b/traverse.js @@ <span class="hljs-number"><span class="hljs-number">-128</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span> +<span class="hljs-number"><span class="hljs-number">128</span></span>,<span class="hljs-number"><span class="hljs-number">23</span></span> @@ Scope.prototype = { } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.type === <span class="hljs-string"><span class="hljs-string">'Identifier'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._vars.get(node.name); - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value) { - <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!value) { + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parent) { + value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parent.resolve(node); + } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { + <span class="hljs-comment"><span class="hljs-comment">//   scope,  node โ + //   . + this.add(node.name, node); + return this.resolve(node); + } + } + if (!value) { + return; + } + if (value.value.type === 'Identifier' &amp;&amp; + value.value !== node) { + return value.scope.resolve(value.value) || value; } - value = (this._parent &amp;&amp; this._parent.resolve(node)); return value; } }, @@ -165,12 +178,15 @@ function getPropName(node, scope) { module.exports = function (ast) { var result = []; + traverse(ast, (node, scope) =&gt; { if (node.type === 'VariableDeclarator') { scope.add(node.id.name, node.init); } }); + let rootScope = getScopeFor(ast); + traverse(ast, (node, scope) =&gt; { if (node.type !== 'CallExpression') { return; @@ -213,9 +229,10 @@ module.exports = function (ast) { } resolved = scope.resolve(object); + let zScope; if (resolved) { object = resolved.value; - scope = resolved.scope; + zScope = resolved.scope; } if (object.type !== 'Identifier' || @@ -223,6 +240,10 @@ module.exports = function (ast) { return; } + if (zScope &amp;&amp; zScope !== rootScope) { + return; + } + checkFunction(args[0]); }); @@ -232,7 +253,10 @@ module.exports = function (ast) { return; } - traverse(ast.body, (node, scope, parent) =&gt; { + traverse(ast, (node, scope, parent) =&gt; { + if (parent === ast) { + return; + } if (node.type !== 'Identifier') { return; } @@ -248,7 +272,9 @@ module.exports = function (ast) { parent.key === node) { return; } - if (node.name === firstArg.name) { + + let resolved = scope.resolve(node); + if (resolved &amp;&amp; resolved.value === firstArg) { result.push(node); } });</span></span></code> </pre> </div></div><br>   : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scopeStorage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScopeFor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast, outerScope</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!scopeStorage.has(ast)) { scopeStorage.set(ast, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scope(ast, outerScope)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scopeStorage.get(ast); } <span class="hljs-comment"><span class="hljs-comment">/** *   .     , *  callback- onNodeEnter (  ) *  onNodeLeave (  )    *     (  Scope ) * * @param {object} ast  ast * @param {Function} [onNodeEnter=(node, scope)=&gt;{}]        * @param {Function} [onNodeLeave=(node, scope)=&gt;{}]        */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traverse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ast, onNodeEnter = (node, scope</span></span></span><span class="hljs-function">) =&gt; </span></span>{}, onNodeLeave = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node, scope</span></span></span><span class="hljs-function">) =&gt;</span></span> {} ) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootScope = getScopeFor(ast); _inner(ast, rootScope); <span class="hljs-comment"><span class="hljs-comment">/** *    . *     scope,    * * @param {object} ast ast- * @param {Scope} currentScope    * @return {Scope}      astNode */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolveScope</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ast, currentScope</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> isFunctionExpression = ast.type === <span class="hljs-string"><span class="hljs-string">'FunctionExpression'</span></span>, isFunctionDeclaration = ast.type === <span class="hljs-string"><span class="hljs-string">'FunctionDeclaration'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isFunctionExpression &amp;&amp; !isFunctionDeclaration) { <span class="hljs-comment"><span class="hljs-comment">//       return currentScope; } //       const newScope = getScopeFor(ast, currentScope); ast.params.forEach(param =&gt; { //      newScope.add(param.name, param); }); if (isFunctionDeclaration) { //        currentScope.add(ast.id.name, ast); } else if (ast.id) { //  -     newScope.add(ast.id.name, ast); } return newScope; } /** *    ast * * @param {object} astNode  ast- * @param {Scope} scope     ast- */ function _inner(astNode, scope, parent) { if (Array.isArray(astNode)) { astNode.forEach(node =&gt; { /*    . *  , ,   */ _inner(node, scope, parent); }); } else if (astNode &amp;&amp; typeof astNode === 'object') { onNodeEnter(astNode, scope, parent); const innerScope = resolveScope(astNode, scope), keys = Object.keys(astNode).filter(key =&gt; { // loc -  ,   ast- return key !== 'loc' &amp;&amp; astNode[key] &amp;&amp; typeof astNode[key] === 'object'; }); keys.forEach(key =&gt; { //    _inner(astNode[key], innerScope, astNode); }); onNodeLeave(astNode, scope, parent); } } } /** *    * * @class Scope (name) * @param {object} astNode ast-,     * @param {object} parentScope    */ function Scope(astNode, parentScope) { this._node = astNode; this._parent = parentScope; this._vars = new Map(); } Scope.prototype = { /** *       * * @param {string} name   */ add(name, value) { this._vars.set(name, { value: value, scope: this }); }, resolve(node) { if (!node) { return node; } if (node.type === 'Identifier') { let value = this._vars.get(node.name); if (!value) { if (this._parent) { value = this._parent.resolve(node); } else { //   scope,  node - //    this.add(node.name, node); return this.resolve(node); } } if (!value) { return; } if (value.value.type === 'Identifier' &amp;&amp; value.value !== node) { return value.scope.resolve(value.value) || value; } return value; } }, /** *       . * * @param {string} name   * @return {boolean}           */ isDefined(name) { return this._vars.has(name) || (this._parent &amp;&amp; this._parent.isDefined(name)); } }; function getPropName(node, scope) { let prop = node.property; if (!node.computed) { return prop.name; } let resolved = scope.resolve(prop); if (resolved) { prop = resolved.value; } if (prop.type === 'StringLiteral') { return prop.value; } } module.exports = function (ast) { var result = []; traverse(ast, (node, scope) =&gt; { if (node.type === 'VariableDeclarator') { scope.add(node.id.name, node.init); } }); let rootScope = getScopeFor(ast); traverse(ast, (node, scope) =&gt; { if (node.type !== 'CallExpression') { return; } let args = node.arguments; if (args.length !== 1 || args[0].type !== 'FunctionExpression') { return; } let callee = node.callee; let resolved = scope.resolve(callee); if (resolved) { callee = resolved.value; scope = resolved.scope; } if (callee.type !== 'MemberExpression') { return; } let property = getPropName(callee, scope), object = callee.object; if (property !== 'n') { return; } resolved = scope.resolve(object); if (resolved) { object = resolved.value; scope = resolved.scope; } if (object.type !== 'MemberExpression') { return; } property = getPropName(object, scope); object = object.object; if (property !== 'y') { return; } resolved = scope.resolve(object); let zScope; if (resolved) { object = resolved.value; zScope = resolved.scope; } if (object.type !== 'Identifier' || object.name !== 'Z') { return; } if (zScope &amp;&amp; zScope !== rootScope) { return; } checkFunction(args[0]); }); function checkFunction(ast) { let firstArg = ast.params[0]; if (!firstArg) { return; } traverse(ast, (node, scope, parent) =&gt; { if (parent === ast) { return; } if (node.type !== 'Identifier') { return; } if (!parent) { return; } if (parent.type === 'MemberExpression' &amp;&amp; parent.computed === false &amp;&amp; parent.property === node) { return; } if (parent.type === 'ObjectProperty' &amp;&amp; parent.key === node) { return; } let resolved = scope.resolve(node); if (resolved &amp;&amp; resolved.value === firstArg) { result.push(node); } }); } return result; };</span></span></code> </pre> </div></div><br><h2 style=";text-align:right;direction:rtl"> F.  Framework- </h2> <sup><i>:  ,   <a href="https://habr.com/ru/users/collapsus/" class="user_link">collapsus</a></i></sup> <br><br>                  API.          โ   ,    .         . <br><br><h4 style=";text-align:right;direction:rtl">  </h4><br>     โ        .    .       ,         .     ! <br><br>         .     ,       .    ,         ,   ,    (       ).  ,        ,         0 (0 , 0 , 0 ). <br><br> ,    ,       .      JavaScript  JS-   Framework. <br><br>     : ,   .            ( ,    ).      ()   .             (  ). <br><br>         0.       ,    ( time)     . <br><br> <b>   </b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ONE_SECOND_DEGREES = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ONE_SECOND_FACTOR = <span class="hljs-number"><span class="hljs-number">1</span></span> / Framework.SPEED * ONE_SECOND_DEGREES; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyClock</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Framework</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Clock</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Framework.Arrow(<span class="hljs-string"><span class="hljs-string">"seconds"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"red"</span></span> })); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Framework.Arrow(<span class="hljs-string"><span class="hljs-string">"minutes"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">weight</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">length</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span> })); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Framework.Arrow(<span class="hljs-string"><span class="hljs-string">"hours"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">weight</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">length</span></span>: <span class="hljs-number"><span class="hljs-number">60</span></span> })); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.buttons.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Framework.Button(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, () =&gt; { alert(<span class="hljs-string"><span class="hljs-string">"A"</span></span>); })); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.tick = <span class="hljs-number"><span class="hljs-number">0</span></span>; } onBeforeTick() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [arrow] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.tick++; arrow.rotateFactor = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.tick % <span class="hljs-number"><span class="hljs-number">10</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : ONE_SECOND_FACTOR; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"before: "</span></span> + arrow.pos); } onAfterTick() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [arrow] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"after: "</span></span> + arrow.pos); } }</code> </pre> <br>     : <br> โ  โ  ,   , <br> โ      , <br> โ  ,    ;     (100 )        ;   ,      . <br><br><h4 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h4><br> ,      -,   ยซ   ยป,      .    ,    ,      ,           . <br><br>       : ,   .       . ,       ,           . <br><br>         : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TPS = <span class="hljs-number"><span class="hljs-number">1000</span></span> / Framework.INTERVAL; <span class="hljs-comment"><span class="hljs-comment">//   </span></span></code> </pre> <br>       //      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTarget</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ticks, planet</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { h, m, s } = planet; <span class="hljs-comment"><span class="hljs-comment">//    const ts = Math.floor(ticks / TPS); //   const ss = ts % s * 360 / s; const mm = Math.floor(ts / s) % m * 360 / m; const hh = Math.floor(ts / (s * m)) % h * 360 / h; return { hh, mm, ss }; }</span></span></code> </pre> <br>   ,          โ     rotateFactor.      getRotateFactor,     ,       ,    .     : <br> 1.   , <br> 2.  . <br><br>         .    . <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRotateFactor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos, target, forward = true</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> angle = target - pos; <span class="hljs-comment"><span class="hljs-comment">//        if (forward) { //      angle &lt; 0 &amp;&amp; (angle += 360); //        0  360 ( 360   0),    } else { //         Math.abs(angle) &gt; 180 &amp;&amp; (angle -= Math.sign(angle) * 360) } return angle / Framework.SPEED; }</span></span></code> </pre> <br>     ,    MAX_SPEED    .      getRotateFactor. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_FACTOR = Framework.MAX_SPEED / Framework.SPEED; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRotateFactor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos, target, forward = true</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> angle = target - pos; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (forward) { angle &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; (angle += <span class="hljs-number"><span class="hljs-number">360</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(angle) &gt; <span class="hljs-number"><span class="hljs-number">180</span></span> &amp;&amp; (angle -= <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sign(angle) * <span class="hljs-number"><span class="hljs-number">360</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> factor = angle / Framework.SPEED; <span class="hljs-comment"><span class="hljs-comment">//      ,    return Math.abs(factor) &gt; MAX_FACTOR ? Math.sign(factor) * MAX_FACTOR : factor; }</span></span></code> </pre> <br>       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">buttonAHandler() { <span class="hljs-comment"><span class="hljs-comment">//     this.pos = (this.pos + 1) % this.planets.length; //      this.forward = false; }</span></span></code> </pre> <br>  ,     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">onBeforeTick() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [sec, min, hour] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.arrows; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> time = ++<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ticks; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> planet = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.planets[<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pos]; <span class="hljs-comment"><span class="hljs-comment">//        const target = getTarget(time, planet); //      sec.rotateFactor = getRotateFactor(sec.pos, target.ss, this.forward); min.rotateFactor = getRotateFactor(min.pos, target.mm, this.forward); hour.rotateFactor = getRotateFactor(hour.pos, target.hh, this.forward); //       ,       !sec.rotateFactor &amp;&amp; !min.rotateFactor &amp;&amp; !hour.rotateFactor &amp;&amp; (this.forward = true); }</span></span></code> </pre> <br>   : <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TPS = <span class="hljs-number"><span class="hljs-number">1000</span></span> / Framework.INTERVAL; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_FACTOR = Framework.MAX_SPEED / Framework.SPEED; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTarget</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ticks, planet</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { h, m, s } = planet; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ts = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(ticks / TPS); <span class="hljs-comment"><span class="hljs-comment">// total seconds const ss = ts % s * 360 / s; const mm = Math.floor(ts / s) % m * 360 / m; const hh = Math.floor(ts / (s * m)) % h * 360 / h; return { hh, mm, ss }; } function getRotateFactor(pos, target, forward = true) { let angle = target - pos; if (forward) { angle &lt; 0 &amp;&amp; (angle += 360); } else { Math.abs(angle) &gt; 180 &amp;&amp; (angle -= Math.sign(angle) * 360) } const factor = angle / Framework.SPEED; return Math.abs(factor) &gt; MAX_FACTOR ? Math.sign(factor) * MAX_FACTOR : factor; } class MyClock extends Clock { // planets -   // [ { h: 4, m: 20, s: 10 }, ... ] constructor({ planets, time }) { super(); this.arrows.push(new Arrow('seconds', { color: 'red' })); this.arrows.push(new Arrow('minutes', { weight: 3, length: 80 })); this.arrows.push(new Arrow('hours', { weight: 3, length: 60 })); this.buttons.push(new Button('Switch', this.buttonAHandler.bind(this))); this.planets = planets; this.ticks = time * TPS; this.pos = 0; this.forward = false; } onBeforeTick() { const [sec, min, hour] = this.arrows; const time = ++this.ticks; const planet = this.planets[this.pos]; const target = getTarget(time, planet); sec.rotateFactor = getRotateFactor(sec.pos, target.ss, this.forward); min.rotateFactor = getRotateFactor(min.pos, target.mm, this.forward); hour.rotateFactor = getRotateFactor(hour.pos, target.hh, this.forward); !sec.rotateFactor &amp;&amp; !min.rotateFactor &amp;&amp; !hour.rotateFactor &amp;&amp; (this.forward = true); } buttonAHandler() { this.pos = (this.pos + 1) % this.planets.length; this.forward = false; } }</span></span></code> </pre> </div></div><br> <b></b> <br><br>   .              .  ,  ,     ,             . <br><br>    :   ,  ,  ,   ,      (,   ,      ). <br><br>  <b>ุงุณุชูุชุงุฌ</b> <br><br>    .           .     โ ,      .         . <br><br>   ,      .      ,     (   )  18 . <br><br><hr><br>  ุงููุฑุงุฌุน: <br><br> โ <a href="https://habr.com/ru/company/yandex/blog/477452/"> ML-  </a> <br> โ <a href="https://habr.com/ru/company/yandex/blog/460139/"> -  </a> <br> โ <a href="https://habr.com/ru/company/yandex/blog/430560/"> -    </a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar478550/">https://habr.com/ru/post/ar478550/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar478536/index.html">WebRTC ูู ุฎูุงู Kurento: ุชุฌุฑุจุฉ ุงูุงุฎุชุจุงุฑ ูุงูุชูููุฐ</a></li>
<li><a href="../ar478538/index.html">ููููุฉ ุงูุชุญูู ูู ุฌูุงุฒ ุณูุฑู ููุชุฃูุฏ ูู ุตุญุชู</a></li>
<li><a href="../ar478540/index.html">ุงูุงุณุชุนุฏุงุฏุงุช ููููุชุฏู ุงูุนุงุดุฑ "ุฃูุงู ุงูุงุฎุชุฑุงู ุงูุฅูุฌุงุจูุฉ: ุจุฏุก ุงูุนูู"</a></li>
<li><a href="../ar478542/index.html">FigmaGen: ุฃุชูุชุฉ ุงูููุท ูู ุชุทุจูู iOS</a></li>
<li><a href="../ar478546/index.html">ูุขุฎุฐ ุงูููุจ. ุจุนุถ ุงูุฎุจุฑุฉ ูู ุงูุชูููุฉ ูุงูุชุดุบูู. ูุญู ุชุนุฏูู ุงูุนููู</a></li>
<li><a href="../ar478554/index.html">ูุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช "SRE - ุงูุถุฌูุฌ ุฃู ุงููุณุชูุจูุ" 12 ุฏูุณูุจุฑ ูู ุชูุงู ุงูุณุงุนุฉ 11:00</a></li>
<li><a href="../ar478560/index.html">ูู ุงูุฑุณุงุฆู ุงูููุฑูุฉ ูุฌุงููุฉ ูุฌูููุฉุ</a></li>
<li><a href="../ar478564/index.html">ููู ูุญู ูู TsIAN ุชุฑููุถ ุชูุฑุงุจุงูุช ูู ุงูุณุฌูุงุช</a></li>
<li><a href="../ar478566/index.html">ุฏุงุฆุฑุฉ ุงูุฑูุงุจุฉ ุงูุฏุงุฎููุฉ. ุงูุชูุงุตู ุนูุฏูุง ูุง ูููู ุงูุชุทุจูู ููุฏ ุงูุชุดุบูู</a></li>
<li><a href="../ar478572/index.html">ุจูุช ุนูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ: ููู ูุนูู ุงููุณุงุนุฏ ุงูุธุงูุฑู ููุชุนูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>