<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐ง๐ผ ๐ ุฌุนู ุชุญููู ูุญุชูู ุงุณุชุฌุงุจุฉ ุนูู ุงููููุน โ ๐พ ๐บ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! 

 ุฃููู ุจุฅูุดุงุก ูููุน ููุจ ููุดุฑูุนู. ุชุญุชุงุฌ ุฅูู ุนุฑุถ ุงููุซูุฑ ูู ุตูุฑ ูุชุญุฑูุฉ ูู ุงููููุน ูู ููุณ ุงูููุช ุ ูู ูููุง ูุฒู ุฌูุฏูุง. ุฅุฐุง ุนุฑุถุช ูู ุดูุก ุฏูุนุฉ ูุงุญ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฌุนู ุชุญููู ูุญุชูู ุงุณุชุฌุงุจุฉ ุนูู ุงููููุน</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480704/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ! <br><br>  ุฃููู ุจุฅูุดุงุก ูููุน ููุจ ููุดุฑูุนู.  ุชุญุชุงุฌ ุฅูู ุนุฑุถ ุงููุซูุฑ ูู ุตูุฑ ูุชุญุฑูุฉ ูู ุงููููุน ูู ููุณ ุงูููุช ุ ูู ูููุง ูุฒู ุฌูุฏูุง.  ุฅุฐุง ุนุฑุถุช ูู ุดูุก ุฏูุนุฉ ูุงุญุฏุฉ ุ ูุณูุชู ุชุญููู ุงูุตูุญุฉ ููุชุฑุฉ ุทูููุฉ ุฌุฏูุง.  ูู ุงูููุช ููุณู ุ ูู ุงููุณุชุญูู ุฃูุถูุง ุฅุนุทุงุก ุงูุตูุญุฉ ุจุฏูู ุตูุฑ GIF (ุจุญูุซ ูููู ุชูุฒูููุง ููุงู). <br><br>  ุฃู ุดุฎุต ููุชู ุจููููุฉ ุงูุชุนุงูู ูุน ูุฐู ุงููุดููุฉ ุ ุฃุทูุจ ูุทุฉ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ุงููุดููุฉ </h2><br>  ููุง ููุช ุ ููุงู ุงูุนุฏูุฏ ูู ุตูุฑ ูุชุญุฑูุฉ ุนูู ุงููููุน ุ ุฌูุฏุฉ ููุฎุชููุฉ.  ููููู ุฃู ุชุฑู ุจููุณู ูู ูููู: <a href="https://reface.tech/">reface.tech</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/468/0e4/bb9/4680e4bb9c37c109cfbb02929ac29633.jpg" alt="ุตูุฑุฉ"><br><br>  ุจูุฌุฑุฏ ุฑุคูุฉ ุงูุฅุตุฏุงุฑ ุงูุชุฌุฑูุจู ูู ุงููุจูุท ุ ูุงุฌูุช ุนูู ุงูููุฑ ูุดููุฉ ูู ุงูุชุญููู: ุจุงููุณุจุฉ ูุจุนุถ ุงููุณุชุฎุฏููู ุ ูุงูุช ุงูุตูุญุงุช ูุชู ุชุญููููุง ููุชุฑุฉ ุทูููุฉ.  ุจุงููุณุจุฉ ููุนูู ุงูุฌุงุฏ ุ ูุฐุง ุ ุจุงูุทุจุน ุ ููุณ ูู ุงูุญุงู. <br><br>  ูุงู ูู ุงูุถุฑูุฑู ุญู ูุฐุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู.  ูุงู ูู ุงููุณุชุญูู ุงูุญุตูู ุนูู ุถุบุท ุจุณูุท ุจูุง ุถูุงุน ุ ููุง ูู ุงูุญุงู ุจุงููุนู ูู ุฐูู ุงูููุช ุ ุชู ููู ุฌููุน ูุญุชููุงุช ุงููุณุงุฆุท ูู ุฎูุงู <a href="https://compressor.io/">compressor.io</a> .  ูุฐูู ุ ูุงู ูู ุงูุถุฑูุฑู ุงูุถุบุท ุจุฎุณุงุฆุฑ ูุฅุนุทุงุก ุตูุฑ GIF ุจุฌูุฏุฉ ุฃุณูุฃ. <br><br>  ูููู ุฅุนุทุงุก ูุญุชูู ุณูุก ูููุณุงุฆุท ูููุณุชุฎุฏููู ุฐูู ุงูุฅูุชุฑูุช ุงูุฌูุฏ ูู ููุน ูู ุงูุชุถุญูุฉ ุจุงูููุณ.  ูุฐูู ุ ุชูุฑุฑ ุชุญุฏูุฏ ุณุฑุนุฉ ูุฐู ุงูุฅูุชุฑูุช ุงูุฎุงุต ุจู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุงุนุชูุงุฏูุง ุนูู ุงูุณุฑุนุฉ ุงููุงุฒูุฉ ูุฌูุฏุฉ ุงูุฌูุฏุฉ ุงูููุงุณุจุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุตูุน ุฑุณููุง ุชูุฑูุจููุง </h2><br>  ุณูููู ูุฏููุง ุตููู ูุน ูุตู ููุญุชูู ุงููุณุงุฆุท ุงููุฑุงุฏ ุชุญููููุง. <br><br>  ูุซุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="json hljs">[ { <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0.6211118698120117</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"gifs/control/large/control_1.gif"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"middle"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5330495834350586</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"gifs/control/middle/control_1.gif"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0.4901447296142578</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"gifs/control/small/control_1.gif"</span></span> } } ]</code> </pre> <br>  ููุง ูู ุงูููุงุฏ ุงูุฃุณุงุณูุฉ ููุญุตูู ุนูู ุฏุฑุฌุฉ ููุงุณุจุฉ ูู ุงูุฌูุฏุฉ ูููู ุนููุงู url ูุญุฌู ุงูููู. <br><br>  ุณูููู ุจุจุณุงุทุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุตูุญ ุงูุตููู (ุนูุฏ ุชุญููู ุงูุตูุญุฉ) </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงูุญุฌู ุงูููู ุชุญููู ููู ุฏุฑุฌุฉ ูู ุงูุฌูุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุณูุชู ุชุญููู ูู ุดูุก ูู 4 ุซูุงู (ูุฐู ูู ุงููุชุฑุฉ ุงูุชู ูุฒุนุฌูู ุดุฎุตูุง) </li></ol><br>  ููููุง ูุฐูู ุ ูู ุงูุถุฑูุฑู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑุฃูุช ุดูุฆูุง ูุง ูู ุดุฃูู ุฃู ูุตูุน ูุซู ูุฐุง ุงูุตููู ุจุญูุซ ูุง ูุชู ุงุญุชุณุงุจ ูู ุดูุก ูุน ุงูุฃููุงู (ูู ุงูุซุนุจุงู) </li><li style=";text-align:right;direction:rtl">  ุฑุฃู ุณุฑุนุฉ ุงูุฅูุชุฑูุช </li></ol><br><h2 style=";text-align:right;direction:rtl">  ูุดุฑ ูููุงุณ ุงูุณุฑุนุฉ </h2><br>  ุณูููู ุจุณูุทุง ูุณุจูุง.  <a href="httpbin.org/stream-bytes/51200">ููุชุจ</a> ูู ุดุฑูุท ุงูุนููุงู ูู ูุชุตูุญู <a href="httpbin.org/stream-bytes/51200">eu.httpbin.org/stream-bytes/51200</a> .  ูุชู ุชูุฒูู ููู ุจุทูู 51200 ุจุงูุช.  ูุญู ูุดููุง ุนูู ุฃููุณูุง ูู ุงูุฃูุงูู ุงูุนุงูุฉ (ูููุงุณ ุงูุณุฑุนุฉ ูุงุณุชุถุงูุฉ). <br><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ูู ููุฏุงุฑ ุชููุจุงุช ุงูููู.  ุณููุฏู ูุธููุฉ ุจุณูุทุฉ ููุฐุง ุงูุฃูุฑ ุ ูุงูุชู ุณุชุนูุฏ ุฅูููุง ุงูุณุฑุนุฉ ุจุงูููุบุงุจุงูุช ูู ุงูุซุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> checkDownloadSpeed(baseUrl, fileSizeInBytes) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, _</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> startTime = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> axios.get(baseUrl).then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> endTime = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> duration = (endTime - startTime) / <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bytesPerSecond = (fileSizeInBytes / duration); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> megabytesPerSecond = (bytesPerSecond / <span class="hljs-number"><span class="hljs-number">1000</span></span> / <span class="hljs-number"><span class="hljs-number">1000</span></span>); resolve(megabytesPerSecond); }); }).catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(error); }); }</code> </pre><br>  ุฃู ุฃููุง ุณุฌููุง ููุช ุจุฏุก ุงูุชูุฒูู ุ ูููุช ุงูุงูุชูุงุก ุ ููุงุณูุง ุงููุฑู ุ ูุจูุง ุฃููุง ูุนุฑู ุญุฌู ุงูููู ุ ููุฏ ูููุง ุจุจุณุงุทุฉ ุจุชูุณููู. <br><br>  ุณูููู ุงูุขู ุจูุชุงุจุฉ ูุธููุฉ ุณุชูุนู ุดูุฆูุง ุจูุฐู ุงูุณุฑุนุฉ ุงููุญุฏุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getNetworkDownloadSpeed() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> baseUrl = process.env.PUBLIC_URL + <span class="hljs-string"><span class="hljs-string">'/51200'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fileSize = <span class="hljs-number"><span class="hljs-number">51200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> speed = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.checkDownloadSpeed(baseUrl, fileSize); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Network speed: "</span></span> + speed); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (speed.mbps === <span class="hljs-string"><span class="hljs-string">"Infinity"</span></span>) { SpeedMeasure.speed = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { SpeedMeasure.speed = speed * <span class="hljs-number"><span class="hljs-number">5</span></span>; } }</code> </pre><br>  ุจุดูู ุนุงู ุ ุชูุฌุฏ ูุดููุฉ ูู ูุฐุง ุงูุฑูุฒ: ุฅูู ูู ูุชู ุชุญุฏูุฏ ุณุฑุนุฉ ุงูุงุชุตุงู ุงูุฏูููุฉ ูุธุฑูุง ูุตุบุฑ ุญุฌู ุงูููู.  ููู ุชูุฒูู ุดูุก ุฃูุซุฑ ุชูููุฉ ุฃูุฑูุง ุจุงูุธูุง ุจุงููุณุจุฉ ููุง ุ ูุฐูู ุจุจุณุงุทุฉ ูููู ุจุถุฑุจ ุงูุณุฑุนุฉ ุงููุงุชุฌุฉ ุจููุฏุงุฑ 5. ุญุชู ูุน ูุฌูุฏ ูุงูุด ุ ูุฅููุง ูุฃุฎุฐูุง ูุฃู ุงูุณุฑุนุฉ ุณุชููู ูู ุงููุงูุน ุฃุนูู. <br><br>  ุงูุขู ุ ุฏุนูุง ูููุฑ ูุธููุฉ ุ ุชุจุนุง ููุณุฑุนุฉ ุ ุณุชูุฏุฆ ุงูุฌูุฏุฉ ุงููุทุงุจูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> getResolution(gifsArray) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> totalSizeLevel1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> totalSizeLevel2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> totalSizeLevel3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; gifsArray.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">0</span></span>; a &lt; gifsArray[i].length; a++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> element = gifsArray[i][a]; totalSizeLevel1 += element.small.size; totalSizeLevel2 += element.middle.size; totalSizeLevel3 += element.large.size; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>(SpeedMeasure.speed)) { SpeedMeasure.speed = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timeLevel1 = totalSizeLevel1 / SpeedMeasure.speed; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timeLevel2 = totalSizeLevel2 / SpeedMeasure.speed; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timeLevel3 = totalSizeLevel3 / SpeedMeasure.speed; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timeLevel3 &lt; APPROPRIATE_TIME_LIMIT) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"large"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timeLevel2 &lt; APPROPRIATE_TIME_LIMIT) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"middle"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"small"</span></span>; } }</code> </pre><br>  ูุธุฑูุง ูุฃู ุงููุธููุฉ ุงูุชู ุชุนุฏ ุงูุณุฑุนุฉ ุบูุฑ ูุชุฒุงููุฉ ุจุงููุณุจุฉ ุฅูููุง ุ ููุฏ ูููู SpeedMeasure.speed ุตูุฑูุง.  ุจุดูู ุงูุชุฑุงุถู ุ ูุนุชูุฏ ุฃู ุณุฑุนุฉ ุงูุงุชุตุงู ูู 1 ููุบุง ุจุงูุช ูู ุงูุซุงููุฉ.  ุนูุฏูุง ุชููู ุงููุธููุฉ ุจุญุณุงุจ ุงูุณุฑุนุฉ ุ ูุนูุฏ ุชูุฏูู ุงูุญุงููุฉ. <br><br>  ููุฑุฑ ูุฌููุนุฉ ูู ุงููุตูููุงุช ุฅูู ูุธููุฉ getResolution.  ููุงุฐุงุ  ูุฃูู ุฅุฐุง ูุงู ูุฏููุง ุนุฏุฉ ุญุงููุงุช ุนูู ุงูุตูุญุฉ ุ ููู ุงูููุงุฆู ููุง ููู ุงููุญุชูู ุงูููุงุจู ููู ูููุง ูู ุตููู ุ ููููุง ุจุญุงุฌุฉ ุฅูู ูุฑุงุนุงุฉ ุณุฑุนุฉ ุงูุชูุฒูู ููุฌููุน ูุฑุฉ ูุงุญุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุซุงู ููุงุณุชุฎุฏุงู </h2><br>  ูููุง ููู ูุซุงู ููุงุณุชุฎุฏุงู (ุนูู React): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> runFunction() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> speedMeasure = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeedMeasure(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> speedMeasure.getNetworkDownloadSpeed(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.forceUpdate() } componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.runFunction(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> quality = SpeedMeasure.getResolution([ Control.getControlArray(), Health.getHealthArray() ]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div className="app"&gt; &lt;Presentation /&gt; &lt;Control quality={quality} /&gt; &lt;Health quality={quality} /&gt; &lt;/div&gt; ); }</code> </pre><br>  ูููุง ูุฐูู ุ ุนูุฏูุง ูุชู ุชุญููู ุชุญุฏูุฏ ุงูุณุฑุนุฉ ูุฏููุง ุ ุณูุชู ุชูุฏูู ุงูุญุงููุฉ ูุฑุฉ ุฃุฎุฑู. <br>  ุฏุงุฎู ุงูุญุงููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุฏุงุฎู ุงูุชุญูู) ุ ููููู ุจุจุณุงุทุฉ ุงูุญุตูู ุนูู GIF ุงููุทุงุจู ูู ุงูุตููู (ุญุณุจ ุงูููุฑุณ) ุ ุซู ุชุญุตู ุนูู ูุงุฆู ุญุณุจ ุงูุฌูุฏุฉ ูุชุญุตู ุนูู ูุฑุฌุน ุจูุงุณุทุฉ ุนููุงู url.  ูู ุดูุก ุจุณูุท. <br><br><h2 style=";text-align:right;direction:rtl">  ูุชุงุจุฉ ุณููุงุฑูู ุจูุซูู </h2><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุถุบุท ูููุงุช GIF ุชููุงุฆููุง ูุฅุฎุฑุงุฌ ุงูุตููู ูุน ูุตู ุงููุญุชูู. <br><br>  ููุจุฏุก ุ ุฏุนูุง ููุชุจ ุณูุฑูุจุช ููุถุบุท.  ุณูู ูุณุชุฎุฏู gifsicle.  ุจุงููุณุจุฉ ููุญุชูู ุงูุถุบุท ุงููุชูุณุท โโุ ุณูููู ูุณุชูู ุงูุถุบุท 80 (ูู 200) ุ ุฃูุง ุจุงููุณุจุฉ ููููุฒุฉ ุงููููุฉ ููุบุงูุฉ ุ ูุณุชููู 160. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os GIFS_DIR = <span class="hljs-string"><span class="hljs-string">"/home/mixeden//Landingv2/"</span></span> COMPRESSOR_DIR = <span class="hljs-string"><span class="hljs-string">"/home/mixeden//gifsicle-static"</span></span> NOT_OPTIMIZED_DIR = <span class="hljs-string"><span class="hljs-string">"not_optimized"</span></span> OPTIMIZED_DIR = <span class="hljs-string"><span class="hljs-string">"optimized"</span></span> GIF_RESIZED_DIR = <span class="hljs-string"><span class="hljs-string">"gif_not_optimized_resized"</span></span> GIF_COMPRESSED_DIR = <span class="hljs-string"><span class="hljs-string">"gif_compressed"</span></span> COMPRESSION_TYPE = [<span class="hljs-string"><span class="hljs-string">"middle"</span></span>, <span class="hljs-string"><span class="hljs-string">"small"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (root, dirs, files) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.walk(GIFS_DIR, topdown=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(files) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> GIF_RESIZED_DIR <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: path = root + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> compression <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> COMPRESSION_TYPE: final_path = path.replace(GIF_RESIZED_DIR, GIF_COMPRESSED_DIR + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + compression + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + OPTIMIZED_DIR) print(path, final_path) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> compression == COMPRESSION_TYPE[<span class="hljs-number"><span class="hljs-number">0</span></span>]: rate = <span class="hljs-number"><span class="hljs-number">80</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: rate = <span class="hljs-number"><span class="hljs-number">160</span></span> os.system(<span class="hljs-string"><span class="hljs-string">"echo 0 &gt; "</span></span> + final_path) os.system(COMPRESSOR_DIR + <span class="hljs-string"><span class="hljs-string">" -O3 --lossy={} -o {} {}"</span></span>.format(rate, final_path, path))</code> </pre><br>  ูุฌุนู ุงููุณุงุฑุงุช ุฅูู ุงููููุงุช ูููููุฉ ุ ุฅููู ูุตู ุฏููู ุงููููุงุช ุจุงุณุชุฎุฏุงู gifs: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  NOT_OPTIMIZED_DIR - ุตูุฑ GIF ุบูุฑ ุงููุญุณูุฉ </li><li style=";text-align:right;direction:rtl">  GIF_RESIZED_DIR - ุตูุฑ GIF ุบูุฑ ูุญุณูุฉ ุ ูููู ุชู ุชุบููุฑ ุญุฌููุง ููููุง ูุญุฌู ุงูุญุงููุฉ ุงูุฎุงุตุฉ ุจูู </li><li style=";text-align:right;direction:rtl">  GIF_COMPRESSED_DIR - ุตูุฑ GIF ูุถุบูุทุฉ </li></ol><br>  ุฏุงุฎู ุงููุฌูุฏุงุช ุชูุฌุฏ ูุฌูุฏุงุช ุจุฃุณูุงุก ูุฆุงุช GIF.  ุฏุงุฎู ูุฌูุฏ ูุญุชูู ุนูู ูุฌูุฏ ูุนูู ูุญุชูู ุนูู "ูุจูุฑ" ู "ูุชูุณุท" ู "ุตุบูุฑ" (ุชุญุช ุฃููุงุน ุงููููุงุช ุงููุถุบูุทุฉ). <br><br>  ูู ุงูุจุฑูุงูุฌ ุงููุตู ุ ูุฐูุจ ุฅูู ุงูุฏููู ุจุงุณุชุฎุฏุงู gifs ูููู ููู ูููู ุจููุนูู ูู ุงูุถุบุท ุ ูุฏุนู ุฃูุฑ ุณุทุฑ ุงูุฃูุงูุฑ ุงูููุงุจู. <br><br>  ุงูุขู ุฏุนูุง ููุชูู ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู ูุฅูุดุงุก ูุฌููุนุฉ ุชุญุชูู ุนูู ูุนูููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os GIFS_DIR = <span class="hljs-string"><span class="hljs-string">"/home/mixeden//Landingv2/"</span></span> COMPRESSOR_DIR = <span class="hljs-string"><span class="hljs-string">"/home/mixeden//gifsicle-static"</span></span> NOT_OPTIMIZED_DIR = <span class="hljs-string"><span class="hljs-string">"not_optimized"</span></span> OPTIMIZED_DIR = <span class="hljs-string"><span class="hljs-string">"optimized"</span></span> GIF_RESIZED_DIR = <span class="hljs-string"><span class="hljs-string">"gif_not_optimized_resized"</span></span> GIF_COMPRESSED_DIR = <span class="hljs-string"><span class="hljs-string">"gif_compressed"</span></span> COMPRESSION_TYPE = [<span class="hljs-string"><span class="hljs-string">"large"</span></span>, <span class="hljs-string"><span class="hljs-string">"middle"</span></span>, <span class="hljs-string"><span class="hljs-string">"small"</span></span>] OUTPUT = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (root, dirs, files) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.walk(GIFS_DIR, topdown=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(files) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> GIF_COMPRESSED_DIR <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> NOT_OPTIMIZED_DIR <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root: files.sort() type = root.split(GIFS_DIR)[<span class="hljs-number"><span class="hljs-number">1</span></span>].split(GIF_COMPRESSED_DIR)[<span class="hljs-number"><span class="hljs-number">0</span></span>].replace(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>) print(type) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> OUTPUT: OUTPUT[type] = [] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(OUTPUT[type]) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: OUTPUT[type].append( { <span class="hljs-string"><span class="hljs-string">"large"</span></span>: { <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-string"><span class="hljs-string">"middle"</span></span>: { <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-string"><span class="hljs-string">"small"</span></span>: { <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: full_path = root + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + file bytes_size = os.path.getsize(full_path) kilobytes_size = bytes_size / <span class="hljs-number"><span class="hljs-number">1000</span></span> megabytes_size = kilobytes_size / <span class="hljs-number"><span class="hljs-number">1000</span></span> index = int(file.split(<span class="hljs-string"><span class="hljs-string">"_"</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>].replace(<span class="hljs-string"><span class="hljs-string">".gif"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> typer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> COMPRESSION_TYPE: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> typer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root: local_type = typer new_url = <span class="hljs-string"><span class="hljs-string">"gifs/"</span></span> + full_path.replace(GIFS_DIR, <span class="hljs-string"><span class="hljs-string">""</span></span>).replace(<span class="hljs-string"><span class="hljs-string">"/"</span></span> + GIF_COMPRESSED_DIR, <span class="hljs-string"><span class="hljs-string">""</span></span>).replace(<span class="hljs-string"><span class="hljs-string">"/"</span></span> + OPTIMIZED_DIR, <span class="hljs-string"><span class="hljs-string">""</span></span>) OUTPUT[type][index][local_type][<span class="hljs-string"><span class="hljs-string">'url'</span></span>] = new_url OUTPUT[type][index][local_type][<span class="hljs-string"><span class="hljs-string">'size'</span></span>] = megabytes_size print(OUTPUT) print(json.dumps(OUTPUT, indent=<span class="hljs-number"><span class="hljs-number">4</span></span>, sort_keys=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>))</code> </pre><br>  ููุชูู ููุง ุฅูู ุงููุฌูุฏุงุช ุงูุชู ุชุญุชูู ุนูู ุงููููุงุช ุ ููุญุฏุฏ ุญุฌู ุงูููู ุ ููุนุฑู ููุน ุงูุถุบุท ููุถุน ุงููุนูููุงุช ุงูุนุงูุฉ ูู ุตููู OUTPUT.  ุซู ูููู ุจุฅุฎุฑุงุฌ ูุฐุง ุงูุตููู ุจุดูู ุฌููู ุฅูู ูุญุฏุฉ ุงูุชุญูู ููุณุฎู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ุขูู ุฃู ูุณุงุนุฏู ูุฐุง ุงูููุงู ูู ุดูุก ูุง.  ูู ูุฏูู ุงูุชุฑููุฒ ูุทููุฉ ุ ูุงูุฑุฌุงู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480704/">https://habr.com/ru/post/ar480704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480688/index.html">ูู ุฃูู ูุฃุชู ููุฎุจุงูุณุ ุฃุณุงุณูุงุช ุงูุชุฑููุฒุงุช</a></li>
<li><a href="../ar480690/index.html">ูุฏูุฑ ุงูุณุชุงุฆุฑ ุจูุตุฉ ุจุซูู ุจุฎุณ</a></li>
<li><a href="../ar480692/index.html">MobX ุฃู Redux: ุฃูููุง ุฃูุถู ูุฅุฏุงุฑุฉ ุญุงูุฉ ุฑุฏ ุงููุนูุ</a></li>
<li><a href="../ar480694/index.html">ูู ูููููุง ุงูุชููู ุนู ุงูุงุชุตุงู ุจุฅููุงููุฉ ุงููุตูู UX ูุณูููุฉ ุงูุงุณุชุฎุฏุงูุ</a></li>
<li><a href="../ar480702/index.html">ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุงูููุงูุจ ูุงูุฎุจุฑุงุก ูุงูุฅุจุฏุงุน: ููู ูุงูุช ุงูุญููุฉ ุงูุฏุฑุงุณูุฉ ุงูุซุงููุฉ</a></li>
<li><a href="../ar480708/index.html">ุงูุนููุฏ ุชูุชุฑุจ ูู ููุงูุชูุง. ูุง ุงูุชุทุจููุงุช ุนูู Google Play ุงูุชู ูุงูุช ุงูุฃูุซุฑ ุชูุฒูููุง ูู ุงูุณููุงุช ุงูุนุดุฑ ุงููุงุถูุฉุ</a></li>
<li><a href="../ar480710/index.html">ุฅุนุงุฏุฉ ุจูุน ุฃูุนุงุจ SFML</a></li>
<li><a href="../ar480712/index.html">ุงูุฑุญูุฉ ูุน ูููุงุณ ุงูุฌุฑุนุงุช ูู ุงูุฌูุจ</a></li>
<li><a href="../ar480714/index.html">ููููุฉ ุฅุถุงูุฉ ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุฅูู FFmpeg</a></li>
<li><a href="../ar480716/index.html">ูุงุชูุงุจ ุถุฏ. ุฌูููุง ุถุฏ ุงูุซุนุจุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>