<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍦 📃 🍹 Génération de texte en russe par des modèles 🙎🏿 🚻 🚊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quand je commençais à peine à travailler sur mon jeu de texte, j'ai décidé que l'une de ses principales caractéristiques devait être de belles descrip...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Génération de texte en russe par des modèles</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471278/">  Quand je commençais à peine à travailler sur mon jeu de texte, j'ai décidé que l'une de ses principales caractéristiques devait être de belles descriptions artistiques des actions des personnages.  En partie, je voulais «sauvegarder», car je ne savais pas comment le planifier.  La sauvegarde n'a pas fonctionné, mais il s'est avéré une bibliothèque Python ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pypi</a> ) pour générer des textes, en tenant compte de la dépendance des mots et de leurs caractéristiques grammaticales. <br><br>  Par exemple, à partir du modèle: <br><blockquote> <b>[Héros] [passé | héros]</b> devant une cour discrète et soudain <b>[remarqua | héros] des</b> enfants jouant.  Ils couraient avec des épées en bois, des bâtons et des masques de monstres.  Soudain, un des joueurs s'est arrêté, a mis <b>[jouet | hero.weapon | vn] [hero.weapon | vn]</b> , a crié: “ <b>[I | hero] [grand | hero] [Hero]</b> !  Obtenez-le! "  - et se précipita vers la "bête".  Ils sont tombés au sol, ont sauté leurs bras et leurs jambes, puis se sont levés, ont enlevé leurs masques et ont ri.  <b>[Grunted | hero]</b> et <b>[lui-même | hero] [Hero]</b> , mais <b>[</b> start <b>| hero] ne</b> sont pas allés voir le petit. </blockquote>  Nous pouvons obtenir le texte suivant (les mots changeants sont en gras): <br><blockquote>  <b>Hallr passa</b> devant une cour discrète et <b>remarqua</b> soudain des enfants jouant.  Ils couraient avec des épées en bois, des bâtons et des masques de monstres.  Soudain, un des joueurs s'est arrêté, <b>a sorti une épée dorée jouet</b> , a crié: « <b>Je suis un grand Hallr</b> !  Obtenez-le! "  - et se précipita vers la "bête".  Ils sont tombés au sol, ont sauté leurs bras et leurs jambes, puis se sont levés, ont enlevé leurs masques et ont ri.  <b>Hallr</b> <b>lui-même gloussa</b> , mais ne sortit pas vers le petit. </blockquote>  Ou comme ça: <br><blockquote>  <b>Fievara passa</b> devant une cour discrète et <b>remarqua</b> soudain des enfants qui jouaient.  Ils couraient avec des épées en bois, des bâtons et des masques de monstres.  Soudain, l'un des joueurs s'est arrêté, <b>a sorti un jouet catarrhe</b> , a crié: « <b>Je suis le grand Fievara</b> !  Obtenez-le! "  - et se précipita vers la "bête".  Ils sont tombés au sol, ont sauté leurs bras et leurs jambes, puis se sont levés, ont enlevé leurs masques et ont ri.  <b>Fievara</b> <b>elle-même grogna</b> , mais ne sortit pas vers le petit. </blockquote><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Réservations de couple</b> <div class="spoiler_text">  <b>Clause de non-responsabilité 1</b> .  Je ne suis pas linguiste et la bibliothèque a été écrite «pour travailler», et non «pour correspondre exactement à toutes les règles de la langue».  Par conséquent, je m'excuse à l'avance pour les inexactitudes dans la terminologie ou une interprétation incomplète des règles de la langue russe. <br><br>  <b>Clause de non-responsabilité 2</b> .  La bibliothèque a été développée il y a environ 5 ans, maintenant des moyens alternatifs de génération de texte pourraient apparaître (ou atteindre un état normal).  Par exemple, quelque chose d'intéressant peut être dans le logiciel de localisation. <br></div></div><br><h2>  Sur la complexité de la génération de texte </h2><br>  La langue russe est complexe sous de nombreux aspects.  En particulier, les mots ont un grand nombre de formes morphologiques.  Par exemple, les adjectifs peuvent avoir une forme complète et courte, variant selon le sexe, le nombre, le cas, l'animation et le degré de comparaison.  Le choix d'une forme spécifique dépend d'autres mots de la phrase.  Nous disons «belle femme», mais «bel homme».  Le mot «beau» dans ce cas dépend des mots «homme» / «femme» - sa forme est déterminée par le sexe du mot principal. <br><br>  Par conséquent, les difficultés commencent lorsque nous essayons de contacter quelqu'un en fonction de son sexe.  Lors de la compilation de textes pour des sites Web, des lettres, des jeux, il faut soit proposer une formulation très soignée (en évitant le sexe de l'utilisateur), écrire plusieurs textes à la fois, ou utiliser des langages de balisage de divers degrés de polyvalence. <br><br>  Je voulais quelque chose de plus qu'une simple dépendance du sexe du joueur, et même pour que les utilisateurs eux-mêmes puissent ajouter de nouveaux textes (et l'utilisateur "moyen" est assez analphabète, comme nous le savons tous :-)).  Par conséquent, ne trouvant pas le bon logiciel, j'ai décidé de le faire moi-même. <br><br><h2>  Fonctionnalités de la bibliothèque </h2><br>  UTG (générateur de texte universel - pas un nom très modeste) vous permet de créer des modèles pour générer du texte avec les éléments suivants: <br><br><ul><li>  variables (par exemple nom du caractère); </li><li>  dépendances des mots sur les variables (par exemple, un adjectif sur un nom); </li><li>  Dépendances de certaines variables sur d'autres; </li><li>  Propriétés explicites des mots et des variables (par exemple, vous pouvez spécifier que le nom du caractère est inséré dans la casse parent); </li></ul><br>  Lors de la génération de texte à partir d'un modèle: <br><br><ul><li>  Les propriétés nécessaires du mot principal sont transférées aux mots dépendants.  Par exemple, le sexe d'un nom est transféré à l'adjectif. </li><li>  La forme des mots dépendants est cohérente avec les chiffres (en tenant compte de la forme des mots dépendants). </li><li>  Les prépositions sont modifiées si nécessaire (par exemple, à propos de moi / à propos de vous), le prétexte à cela doit être balisé. </li></ul><br>  En outre mis en œuvre: <br><br><ul><li>  Un dictionnaire pour stocker les mots nécessaires. </li><li>  Un référentiel de modèles pour les stocker par type et choisir des modèles aléatoires. </li></ul><br>  La bibliothèque «connaît» l'existence des noms, adjectifs, pronoms, verbes, participes, nombres, prépositions et «citations» (texte immuable). <br><br>  Les propriétés suivantes des mots sont prises en compte: partie du discours, cas, animation, nombre, sexe, forme verbale, temps, personne, type, catégorie d'adjectif, degré d'adjectif, catégorie de pronom, promesse, forme de préposition, forme d'adjectif, forme de participe, forme de nom ( en plus de la forme normale, les noms ont un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dénombrable</a> ). <br><br><h2>  Format de modèle et exemple d'utilisation </h2><br>  Regardons un modèle simple: <br><blockquote>  Hier <b>[mob] [mordu | mob] [héros | ext]</b> . </blockquote>  Selon les valeurs des variables, le modèle peut apparaître comme une telle phrase: <br><blockquote>  Hier, une hyène a mordu Hallre. </blockquote>  tel et tel: <br><blockquote>  Les lucioles ont mordu un fantôme hier. </blockquote>  Examinez le modèle plus en détail: <br><br><ul><li> <code></code> - texte brut. </li><li>  <code>[mob]</code> - une variable, au lieu de laquelle le nom du monstre est substitué. </li><li>  <code>[|mob]</code> - un mot dépendant d'une variable, une partie de ses propriétés changera en fonction des propriétés du nom du monstre (par exemple, un nombre).  Le générateur de texte reconnaît automatiquement les propriétés du formulaire Word et essaie de les enregistrer (par exemple, le temps écoulé sera reconnu et enregistré, vous n'avez donc pas besoin de le spécifier). </li><li>  <code>[hero|]</code> - une variable, au lieu de laquelle le nom du héros est substitué.  Il est en outre indiqué que le nom devrait figurer dans le dossier d'accusation. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Plus d'exemples de modèles.</b> <div class="spoiler_text">  Quelques exemples techniques peuvent être trouvés dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tests</a> . <br><br>  Si vous êtes intéressé par plus d'exemples, vous pouvez les voir sur le site Web de jouets.  Un lien vers celui-ci peut être trouvé en fouillant dans mon profil, ou en écrivant à titre personnel. <br></div></div><br>  Les mots variables et dépendants du modèle sont mis en évidence de manière identique et ont le format suivant: <br><br><ul><li>  <code>[</code> - ouverture du support carré. </li><li>  <code></code> ou identificateur de variable dépendant du mot.  Le générateur vérifie d'abord la présence d'une variable portant ce nom; s'il n'y en a pas, le mot est recherché dans le dictionnaire. </li><li> <code>|</code>  - barre verticale - séparateur, nécessaire si nous spécifions des propriétés supplémentaires. </li><li>  <code> </code> - la variable dont dépend la forme du mot peut être absente. </li><li> <code>|</code>  - barre verticale - séparateur, nécessaire si nous spécifions des propriétés supplémentaires. </li><li>  <code>   </code> - une description de la forme requise du mot (casse, sexe, etc.).  Une liste d'entre eux peut être trouvée sur les pages du projet dans github et pypi. </li><li>  <code>]</code> Est le crochet carré de fermeture. </li></ul><br>  Vous pouvez spécifier toutes les propriétés supplémentaires à votre guise, elles seront appliquées dans l'ordre de définition, par exemple: <br><br> <code>[ 1| 2|,| 3|,,]</code> <br> <br>  Dans la plupart des cas, les formats suivants suffisent: <br><br><ul><li>  <code>[]</code> - insère une variable sous forme normale (par exemple, un nom dans le cas nominatif du singulier). </li><li>  <code>[|]</code> - insère une variable avec les propriétés spécifiées. </li><li>  <code>[|]</code> - insère un mot, en le faisant correspondre avec une variable (par exemple, l'adjectif "beau" avec un nom en genre et en casse). </li><li>  <code>[||]</code> - insérez un mot, en le faisant correspondre avec une variable et en spécifiant des propriétés supplémentaires. </li></ul><br>  Veuillez noter: <br><br><ul><li>  La spécification des propriétés des mots et des variables n'est valable qu'au lieu d'insertion. Par conséquent, pour obtenir l'expression «beau héros», nous devons indiquer explicitement le cas accusatif pour deux mots: <code>[|hero|] [hero|]</code> . </li><li>  Le générateur de texte peut «deviner» les propriétés du mot par sa forme, par exemple, dans la phrase <code>[hero] [|hero]</code> vous pouvez omettre le temps du verbe. </li><li>  Les propriétés spécifiées ultérieurement remplacent les propriétés spécifiées précédemment.  Par exemple, dans la phrase <code>[|hero] [hero|]</code> , l'accusatif de l'adjectif ne sera pas établi, car il sera remplacé par le cas nominatif du héros variable. </li><li>  Une liste des propriétés des mots peut être trouvée sur les pages de la bibliothèque dans github et pypi. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text">  Python 3 requis <br><br>  L'installation <br><br><pre> <code class="bash hljs">pip install utg python -m unittest discover utg</code> </pre><br>  Code <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> relations <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dictionary <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> templates <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> utg <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> constructors <span class="hljs-comment"><span class="hljs-comment">####################################### #     ####################################### coins_forms = [#   '', '', '', '', '', '', #   '', '', '', '', '', '', #   (  , #     autofill_missed_forms) '', '', '', '', '', ''] # : ,   coins_properties = words.Properties(r.ANIMALITY.INANIMATE, r.GENDER.FEMININE) #      ,    coins_word = words.Word(type=r.WORD_TYPE.NOUN, forms=coins_forms, properties=coins_properties) #        . #      , #          : # - utg.data.WORDS_CACHES # - utg.data.INVERTED_WORDS_CACHES ############################## #     ############################## #       # (     utg.data.WORDS_CACHES[r.WORD_TYPE.VERB]) action_forms = (['', '', '', '', ''] + [''] * 15) # : ,   action_properties = words.Properties(r.ASPECT.PERFECTIVE, r.VOICE.DIRECT) action_word = words.Word(type=r.WORD_TYPE.VERB, forms=action_forms, properties=action_properties) #       (  ) action_word.autofill_missed_forms() ############################################## #       ############################################## test_dictionary = dictionary.Dictionary(words=[coins_word, action_word]) ################ #   ################ template = templates.Template() # externals —  ,      template.parse('[Npc] [|npc] [hero|] [coins] [|coins|].', externals=('hero', 'npc', 'coins')) ############################## #    ############################## hero_forms = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] # : ,   hero_properties = words.Properties(r.ANIMALITY.ANIMATE, r.GENDER.MASCULINE) hero = words.WordForm(words.Word(type=r.WORD_TYPE.NOUN, forms=hero_forms, properties=hero_properties)) npc_forms = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] # : ,   npc_properties = words.Properties(r.ANIMALITY.ANIMATE, r.GENDER.FEMININE) npc = words.WordForm(words.Word(type=r.WORD_TYPE.NOUN, forms=npc_forms, properties=npc_properties)) ########################## #   ########################## result = template.substitute(externals={'hero': hero, 'npc': npc, 'coins': constructors.construct_integer(125)}, dictionary=test_dictionary) ########################## #  ########################## result == '   125 .'</span></span></code> </pre></div></div><br><h2>  À propos des dictionnaires </h2><br>  Comme vous l'avez peut-être remarqué, UTG nécessite la formation d'un dictionnaire.  Cela se fait «à la main» puisqu'au moment du développement: <br><br><ul><li>  Je n'ai trouvé aucun dictionnaire morphologique qualitatif généralement accessible. </li><li>  La bibliothèque de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pymorphie</a> était toujours la première version et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plissait</a> souvent les yeux (surtout avec le cas accusatif), c'est pourquoi j'ai dû l'abandonner. </li></ul><br>  Si vous souhaitez utiliser un générateur avec beaucoup de mots, avant de les entrer manuellement, essayez d'utiliser pymorphy2, ou recherchez un dictionnaire prêt à l'emploi et exportez-le. <br><br><h2>  Total </h2><br>  J'espère que la bibliothèque vous sera utile. <br><br>  Si vous avez des idées pour son développement (ou mieux encore, un désir d'y participer) - écrivez dans un message personnel, faites des requêtes pull, postez des bugs sur le github. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471278/">https://habr.com/ru/post/fr471278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471264/index.html">Choisir une alternative à Mailchimp: pourquoi changer et quel produit choisir</a></li>
<li><a href="../fr471266/index.html">L'avenir est ici ou encodé directement dans le navigateur</a></li>
<li><a href="../fr471268/index.html">Comprendre les courtiers de messages. Apprentissage de la mécanique de la messagerie via ActiveMQ et Kafka. Chapitre 2. ActiveMQ</a></li>
<li><a href="../fr471270/index.html">Nous automatisons la réception de données sur la vitesse de chargement d'un site à partir de Google PageSpeed ​​Insights [modèle]</a></li>
<li><a href="../fr471272/index.html">Les avantages de la frappe forte en C ++: expérience pratique</a></li>
<li><a href="../fr471282/index.html">Recherche de pneumonie aux rayons X avec Fast.ai</a></li>
<li><a href="../fr471288/index.html">Création du visage d'un personnage pour le jeu "OnAir"</a></li>
<li><a href="../fr471294/index.html">Poèmes sur Haskell, C ++ et les programmeurs</a></li>
<li><a href="../fr471296/index.html">Lean Manufacturing - Un outil pour l'efficacité</a></li>
<li><a href="../fr471298/index.html">Bieber et Bilan agitent un stylo. AI chante maintenant des chansons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>