<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèª üí© üë©üèº‚Äçüéì Python consome muita mem√≥ria ou como reduzir o tamanho dos objetos? üë© üéå ‚úäüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Um problema de mem√≥ria pode surgir quando voc√™ precisa ter um grande n√∫mero de objetos durante a execu√ß√£o do programa, especialmente se houver restri√ß...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python consome muita mem√≥ria ou como reduzir o tamanho dos objetos?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455722/"><p>  Um problema de mem√≥ria pode surgir quando voc√™ precisa ter um grande n√∫mero de objetos durante a execu√ß√£o do programa, especialmente se houver restri√ß√µes no tamanho total da RAM dispon√≠vel. </p><br><p>  A seguir, √© apresentada uma vis√£o geral de alguns m√©todos para reduzir o tamanho dos objetos, o que pode reduzir significativamente a quantidade de RAM necess√°ria para programas em Python puro. </p><a name="habracut"></a><br><p> Para simplificar, consideraremos estruturas no Python para representar pontos com coordenadas <code>x</code> , <code>y</code> , <code>z</code> com acesso a valores de coordenadas por nome. </p><br><h3 id="dict">  Dict </h3><br><p>  Em pequenos programas, especialmente scripts, √© bastante simples e conveniente usar o <code>dict</code> para representar informa√ß√µes estruturais: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; ob = {'x':1, 'y':2, 'z':3} &gt;&gt;&gt; x = ob['x'] &gt;&gt;&gt; ob['y'] = y</code> </pre> <br><p>  Com o advento de uma implementa√ß√£o mais "compacta" no Python 3.6 com um conjunto ordenado de chaves, o <code>dict</code> tornou ainda mais atraente.  No entanto, observe o tamanho de seu rastreamento na RAM: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; print(sys.getsizeof(ob)) 240</code> </pre> <br><p>  √â preciso muita mem√≥ria, especialmente se voc√™ precisar criar repentinamente um grande n√∫mero de inst√¢ncias: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  240 Mb </td></tr><tr><td>  10.000.000 </td><td>  2,40 GB </td></tr><tr><td>  100.000.000 </td><td>  24 GB </td></tr></tbody></table></div><br><h3 id="class-instance">  Inst√¢ncia de classe </h3><br><p>  Para quem gosta de vestir tudo nas classes, √© prefer√≠vel defini-lo como uma classe com acesso pelo nome do atributo: </p><br><pre> <code class="plaintext hljs">class Point: # def __init__(self, x, y, z): self.x = x self.y = y self.z = z &gt;&gt;&gt; ob = Point(1,2,3) &gt;&gt;&gt; x = ob.x &gt;&gt;&gt; ob.y = y</code> </pre> <br><p>  A estrutura da inst√¢ncia da classe √© interessante: </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyGC_Head </td><td>  24 </td></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  __weakref__ </td><td>  8 </td></tr><tr><td>  __dict__ </td><td>  8 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>56.</b> </td></tr></tbody></table></div><br><p>  Aqui <code>__weakref__</code> √© um link para uma lista das chamadas <em>refer√™ncias fracas</em> para esse objeto, o campo <code>__dict__</code> √© um link para o dicion√°rio de inst√¢ncia da classe que cont√©m os valores dos atributos da inst√¢ncia (observe que os links em uma plataforma de 64 bits ocupam 8 bytes).  A partir do Python 3.3, um espa√ßo de chave do dicion√°rio compartilhado √© usado para todas as inst√¢ncias da classe.  Isso reduz o tamanho do rastreamento da inst√¢ncia na mem√≥ria: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; print(sys.getsizeof(ob), sys.getsizeof(ob.__dict__)) 56 112</code> </pre> <br><p>  Como resultado, um grande n√∫mero de inst√¢ncias de classe deixa uma pegada menor na mem√≥ria que um dicion√°rio comum ( <code>dict</code> ): </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  168 Mb </td></tr><tr><td>  10.000.000 </td><td>  1,68 GB </td></tr><tr><td>  100.000.000 </td><td>  16,8 GB </td></tr></tbody></table></div><br><p>  √â f√°cil ver que o rastreamento da inst√¢ncia na mem√≥ria ainda √© grande devido ao tamanho do dicion√°rio da inst√¢ncia. </p><br><h3 id="instance-of-class-with--__slots__">  Inst√¢ncia da classe com __slots__ </h3><br><p>  Uma redu√ß√£o significativa no rastreamento de uma inst√¢ncia na mem√≥ria √© obtida com a elimina√ß√£o de <code>__dict__</code> e <code>__weakref__</code> .  Isso √© poss√≠vel com o "truque" com <code>__slots__</code> : </p><br><pre> <code class="plaintext hljs">class Point: __slots__ = 'x', 'y', 'z' def __init__(self, x, y, z): self.x = x self.y = y self.z = z &gt;&gt;&gt; ob = Point(1,2,3) &gt;&gt;&gt; print(sys.getsizeof(ob)) 64</code> </pre> <br><p>  O rastreamento na mem√≥ria se tornou muito mais compacto: </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyGC_Head </td><td>  24 </td></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  x </td><td>  8 </td></tr><tr><td>  y </td><td>  8 </td></tr><tr><td>  z </td><td>  8 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>64</b> </td></tr></tbody></table></div><br><p>  O uso de <code>__slots__</code> na defini√ß√£o de classe leva ao fato de que o rastreamento de um grande n√∫mero de inst√¢ncias na mem√≥ria √© reduzido significativamente: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  64 Mb </td></tr><tr><td>  10.000.000 </td><td>  640 Mb </td></tr><tr><td>  100.000.000 </td><td>  6,4 GB </td></tr></tbody></table></div><br><p>  Atualmente, esse √© o principal m√©todo para reduzir significativamente o rastreamento de uma inst√¢ncia de classe na mem√≥ria do programa. </p><br><p>  Essa redu√ß√£o √© alcan√ßada pelo fato de que, ap√≥s o cabe√ßalho do objeto, as refer√™ncias aos objetos s√£o armazenadas na mem√≥ria e o acesso a eles √© realizado usando descritores especiais que est√£o no dicion√°rio de classes: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; pprint(Point.__dict__) mappingproxy( .................................... 'x': &lt;member 'x' of 'Point' objects&gt;, 'y': &lt;member 'y' of 'Point' objects&gt;, 'z': &lt;member 'z' of 'Point' objects&gt;})</code> </pre> <br><p>  Existe uma biblioteca de lista <code>__slots__</code> para automatizar o processo de cria√ß√£o de uma classe com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">__slots__</a> .  A fun√ß√£o <code>namedlist.namedlist</code> cria uma estrutura de classe id√™ntica √† classe com <code>__slots__</code> : </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; Point = namedlist('Point', ('x', 'y', 'z'))</code> </pre> <br><p>  Outro pacote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">attrs</a> permite automatizar o processo de cria√ß√£o de classes com e sem <code>__slots__</code> . </p><br><h3 id="tuple">  Tuple </h3><br><p>  O Python tamb√©m possui um tipo de <code>tuple</code> para representar conjuntos de dados.  Tupla √© uma estrutura ou registro fixo, mas sem nomes de campos.  Para acessar o campo, o √≠ndice do campo √© usado.  Os campos da tupla s√£o associados de uma vez por todas aos objetos de valor no momento em que a tupla √© instanciada: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; ob = (1,2,3) &gt;&gt;&gt; x = ob[0] &gt;&gt;&gt; ob[1] = y # </code> </pre> <br><p>  Inst√¢ncias de tupla s√£o bastante compactas: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; print(sys.getsizeof(ob)) 72</code> </pre> <br><p>  Eles ocupam 8 bytes mais na mem√≥ria do que inst√¢ncias de classe com <code>__slots__</code> , pois o rastreamento da tupla na mem√≥ria tamb√©m cont√©m o n√∫mero de campos: </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyGC_Head </td><td>  24 </td></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  ob_size </td><td>  8 </td></tr><tr><td>  [0] </td><td>  8 </td></tr><tr><td>  [1] </td><td>  8 </td></tr><tr><td>  [2] </td><td>  8 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>72</b> </td></tr></tbody></table></div><br><h3 id="namedtuple">  Namedtuple </h3><br><p>  Como a tupla √© usada muito amplamente, um dia houve uma solicita√ß√£o para poder ainda ter acesso aos campos tamb√©m pelo nome.  A resposta a esta solicita√ß√£o foi o m√≥dulo <code>collections.namedtuple</code> . </p><br><p>  A fun√ß√£o <code>namedtuple</code> projetada para automatizar o processo de gera√ß√£o dessas classes: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; Point = namedtuple('Point', ('x', 'y', 'z'))</code> </pre> <br><p>  Ele cria uma subclasse de tupla, que define identificadores para acessar campos pelo nome.  Para o nosso exemplo, ser√° algo parecido com isto: </p><br><pre> <code class="plaintext hljs"> class Point(tuple): # @property def _get_x(self): return self[0] @property def _get_y(self): return self[1] @property def _get_y(self): return self[2] # def __new__(cls, x, y, z): return tuple.__new__(cls, (x, y, z))</code> </pre> <br><p>  Todas as inst√¢ncias dessas classes t√™m um rastreamento na mem√≥ria id√™ntico √† tupla.  Um grande n√∫mero de inst√¢ncias deixa um espa√ßo de mem√≥ria um pouco maior: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  72 Mb </td></tr><tr><td>  10.000.000 </td><td>  720 Mb </td></tr></tbody></table></div><br><h3 id="recordclass-mutiruemyy-namedtuple-bez-gc">  Classe de grava√ß√£o: mutuado nomeado duplo sem GC </h3><br><p>  Como as <code>tuple</code> e, consequentemente, <code>namedtuple</code> classes <code>namedtuple</code> geram objetos n√£o mut√°veis ‚Äã‚Äãno sentido de que um objeto de valor <code>ob.x</code> n√£o <code>ob.x</code> mais ser associado a outro objeto de valor, surgiu uma solicita√ß√£o para uma variante mutada de nomeado duplo.  Como o Python n√£o possui um tipo interno id√™ntico a uma tupla que suporta atribui√ß√µes, muitas varia√ß√µes foram criadas.  Vamos nos concentrar na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe de registro</a> , que recebeu uma classifica√ß√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fluxo de pilha</a> .  Al√©m disso, com sua ajuda, √© poss√≠vel reduzir o tamanho do rastreamento de um objeto na mem√≥ria em compara√ß√£o com o tamanho do rastreamento de objetos do tipo <code>tuple</code> . </p><br><p>  No pacote <strong>recordclass</strong> , √© introduzido o <strong>tipo recordclass.mutabletuple</strong> , que √© quase id√™ntico √† tupla, mas tamb√©m suporta atribui√ß√µes.  Basicamente, s√£o criadas subclasses quase id√™nticas aos nomeados, mas tamb√©m suportam a atribui√ß√£o de novos valores aos campos (sem criar novas inst√¢ncias).  A fun√ß√£o <code>recordclass</code> , como a fun√ß√£o <code>namedtuple</code> , automatiza a cria√ß√£o de tais classes: </p><br><pre> <code class="plaintext hljs"> &gt;&gt;&gt; Point = recordclass('Point', ('x', 'y', 'z')) &gt;&gt;&gt; ob = Point(1, 2, 3)</code> </pre> <br><p>  Inst√¢ncias da classe t√™m a mesma estrutura que <code>tuple</code> , mas apenas sem <code>PyGC_Head</code> : </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  ob_size </td><td>  8 </td></tr><tr><td>  x </td><td>  8 </td></tr><tr><td>  y </td><td>  8 </td></tr><tr><td>  y </td><td>  8 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>48.</b> </td></tr></tbody></table></div><br><p>  Por padr√£o, a fun√ß√£o <code>recordclass</code> gera uma classe que n√£o est√° envolvida no mecanismo de coleta de lixo circular.  Normalmente, <code>namedtuple</code> e <code>recordclass</code> s√£o usados ‚Äã‚Äãpara gerar classes que representam registros ou estruturas de dados simples (n√£o recursivas).  Seu uso correto no Python n√£o gera refer√™ncias circulares.  Por esse motivo, o rastreamento de inst√¢ncias de classes geradas pela classe de <code>PyGC_Head</code> padr√£o <code>PyGC_Head</code> fragmento <code>PyGC_Head</code> , necess√°rio para classes que suportam o mecanismo de coleta de lixo c√≠clico (mais precisamente: o sinalizador <code>PyTypeObject</code> n√£o est√° definido no campo <code>flags</code> na estrutura <code>PyTypeObject</code> correspondente √† classe que est√° sendo criada). </p><br><p>  O tamanho do rastreamento de um grande n√∫mero de inst√¢ncias √© menor que o das inst√¢ncias de uma classe com <code>__slots__</code> : </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  48 Mb </td></tr><tr><td>  10.000.000 </td><td>  480 Mb </td></tr><tr><td>  100.000.000 </td><td>  4,8 GB </td></tr></tbody></table></div><br><h3 id="dataobject">  Dataobject </h3><br><p>  Outra solu√ß√£o proposta na biblioteca de <code>recordclass</code> baseada na id√©ia: usar a estrutura de armazenamento na mem√≥ria, como nas inst√¢ncias de classes com <code>__slots__</code> , mas n√£o participar do mecanismo de coleta de lixo c√≠clico.  A classe √© <code>recordclass.make_dataclass</code> usando a fun√ß√£o <code>recordclass.make_dataclass</code> : </p><br><pre> <code class="plaintext hljs"> &gt;&gt;&gt; Point = make_dataclass('Point', ('x', 'y', 'z'))</code> </pre> <br><p>  A classe padr√£o criada dessa maneira cria inst√¢ncias mutadas. </p><br><p>  Outra maneira √© usar a declara√ß√£o de classe herdando de <code>recordclass.dataobject</code> : </p><br><pre> <code class="plaintext hljs">class Point(dataobject): x:int y:int z:int</code> </pre> <br><p>  As classes criadas dessa maneira gerar√£o inst√¢ncias que n√£o participam do mecanismo de coleta de lixo circular.  A estrutura da inst√¢ncia na mem√≥ria √© a mesma de <code>__slots__</code> , mas sem o cabe√ßalho <code>PyGC_Head</code> : </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  x </td><td>  8 </td></tr><tr><td>  y </td><td>  8 </td></tr><tr><td>  y </td><td>  8 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>40.</b> </td></tr></tbody></table></div><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; ob = Point(1,2,3) &gt;&gt;&gt; print(sys.getsizeof(ob)) 40</code> </pre> <br><p>  Para acessar os campos, tamb√©m s√£o utilizados descritores especiais para acessar o campo por seu deslocamento em rela√ß√£o ao in√≠cio do objeto, que s√£o colocados no dicion√°rio de classes: </p><br><pre> <code class="plaintext hljs">mappingproxy({'__new__': &lt;staticmethod at 0x7f203c4e6be0&gt;, ....................................... 'x': &lt;recordclass.dataobject.dataslotgetset at 0x7f203c55c690&gt;, 'y': &lt;recordclass.dataobject.dataslotgetset at 0x7f203c55c670&gt;, 'z': &lt;recordclass.dataobject.dataslotgetset at 0x7f203c55c410&gt;})</code> </pre> <br><p>  O tamanho do rastreamento de um grande n√∫mero de inst√¢ncias √© o menor poss√≠vel para o CPython: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  40 Mb </td></tr><tr><td>  10.000.000 </td><td>  400 Mb </td></tr><tr><td>  100.000.000 </td><td>  4,0 GB </td></tr></tbody></table></div><br><h3 id="cython">  Cython </h3><br><p>  Existe uma abordagem baseada no uso do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cython</a> .  Sua vantagem √© que os campos podem assumir valores dos tipos de linguagem C. Os descritores para acessar campos do Python puro s√£o criados automaticamente.  Por exemplo: </p><br><pre> <code class="plaintext hljs">cdef class Python: cdef public int x, y, z def __init__(self, x, y, z): self.x = x self.y = y self.z = z</code> </pre> <br><p>  Nesse caso, as inst√¢ncias t√™m um tamanho de mem√≥ria ainda menor: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; ob = Point(1,2,3) &gt;&gt;&gt; print(sys.getsizeof(ob)) 32</code> </pre> <br><p>  Um rastreamento de inst√¢ncia na mem√≥ria possui a seguinte estrutura: </p><br><div class="scrollable-table"><table><tbody><tr><th>  O campo </th><th>  Tamanho (bytes) </th></tr><tr><td>  PyObject_HEAD </td><td>  16 </td></tr><tr><td>  x </td><td>  4 </td></tr><tr><td>  y </td><td>  4 </td></tr><tr><td>  y </td><td>  4 </td></tr><tr><td>  est√° vazio </td><td>  4 </td></tr><tr><td>  <b>TOTAL:</b> </td><td>  <b>32.</b> </td></tr></tbody></table></div><br><p>  O tamanho do rastreamento de um grande n√∫mero de c√≥pias √© menor: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  32 Mb </td></tr><tr><td>  10.000.000 </td><td>  320 Mb </td></tr><tr><td>  100.000.000 </td><td>  3,2 GB </td></tr></tbody></table></div><br><p>  No entanto, deve-se lembrar que, ao acessar do c√≥digo Python, a convers√£o do objeto <code>int</code> para o Python e vice-versa ser√° realizada a cada vez. </p><br><h3 id="numpy">  Numpy </h3><br><p>  O uso de matrizes multidimensionais ou de registro para grandes quantidades de dados fornece um ganho de mem√≥ria.  No entanto, para um processamento eficiente em Python puro, voc√™ deve usar m√©todos de processamento focados no uso de fun√ß√µes do pacote <code>numpy</code> . </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; Point = numpy.dtype(('x', numpy.int32), ('y', numpy.int32), ('z', numpy.int32)])</code> </pre> <br><p>  Uma matriz e <code>N</code> elementos inicializados com zeros s√£o criados usando a fun√ß√£o: </p><br><pre> <code class="plaintext hljs"> &gt;&gt;&gt; points = numpy.zeros(N, dtype=Point)</code> </pre> <br><p>  O tamanho da matriz √© o menor poss√≠vel: </p><br><div class="scrollable-table"><table><thead><tr><th>  N√∫mero de c√≥pias </th><th>  Tamanho do rastreamento </th></tr></thead><tbody><tr><td>  1.000.000 </td><td>  12 Mb </td></tr><tr><td>  10.000.000 </td><td>  120 Mb </td></tr><tr><td>  100.000.000 </td><td>  1,20 GB </td></tr></tbody></table></div><br><p>  O acesso regular a elementos e cadeias de array exigir√° uma convers√£o de objeto Python <br>  no valor de C <code>int</code> e vice-versa.  A extra√ß√£o de uma √∫nica linha resulta em uma matriz que cont√©m um √∫nico elemento.  Sua trilha n√£o ser√° t√£o compacta: </p><br><pre> <code class="plaintext hljs"> &gt;&gt;&gt; sys.getsizeof(points[0]) 68</code> </pre> <br><p>  Portanto, como observado acima, no c√≥digo Python, √© necess√°rio processar matrizes usando fun√ß√µes do pacote <code>numpy</code> . </p><br><h3 id="zaklyuchenie">  Conclus√£o </h3><br><p>  Usando um exemplo claro e simples, foi poss√≠vel verificar se a comunidade de desenvolvedores e usu√°rios da linguagem de programa√ß√£o Python (CPython) tinha oportunidades reais de reduzir significativamente a quantidade de mem√≥ria usada pelos objetos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt455722/">https://habr.com/ru/post/pt455722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt455702/index.html">Gera√ß√£o efetiva de n√∫meros em um determinado intervalo</a></li>
<li><a href="../pt455710/index.html">Por que n√≥s da Leroy Merlin precisamos de nosso pr√≥prio departamento de desenvolvimento russo para 200 pessoas</a></li>
<li><a href="../pt455714/index.html">Exporte automaticamente o Google Forms para o Notion usando IFTTT e Django</a></li>
<li><a href="../pt455716/index.html">15 pr√°ticas recomendadas para implantar o software de Business Intelligence</a></li>
<li><a href="../pt455720/index.html">Como criamos interface do usu√°rio para sistemas de an√∫ncios</a></li>
<li><a href="../pt455726/index.html">C ++ Enterprise Edition. Isso √© poss√≠vel?</a></li>
<li><a href="../pt455728/index.html">Fazendo seu bot√£o de a√ß√£o flutuante quase estendido</a></li>
<li><a href="../pt455730/index.html">Instale o MacOS High Sierra quando apenas o WiFi estiver dispon√≠vel</a></li>
<li><a href="../pt455734/index.html">H√°bito de fazer agora</a></li>
<li><a href="../pt455736/index.html">Consenso em criptomoedas com minera√ß√£o h√≠brida e Multi-PoW</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>