<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŸ ğŸ–ğŸ» ğŸ˜“ GTMä¸­çš„è‡ªå®šä¹‰æ¨¡æ¿ï¼šä¸€ä¸ªç¤ºä¾‹ â ğŸ‘©â€ğŸ”¬ ğŸ‘©ğŸ¿â€ğŸ’¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="5æœˆåº•ï¼ŒGoogleåœ¨Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨ï¼ˆGTMï¼‰ä¸­å¼•å…¥äº†ä¸€é¡¹æ–°åŠŸèƒ½ï¼šè‡ªå®šä¹‰æ¨¡æ¿æˆ–è‡ªå®šä¹‰æ¨¡æ¿ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Œå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä¸HTMLæ ‡ç­¾å’ŒJavaScriptå˜é‡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ 

 ä¾‹å¦‚ï¼Œè¯·è€ƒè™‘ä¸ºVKontakteåŠ¨æ€é‡å®šå‘åƒç´ åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡æ¿è¿›ä¸€æ­¥è‡ªå®šä¹‰GTMæ ‡ç­¾ã€‚...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GTMä¸­çš„è‡ªå®šä¹‰æ¨¡æ¿ï¼šä¸€ä¸ªç¤ºä¾‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458788/">  5æœˆåº•ï¼ŒGoogleåœ¨Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨ï¼ˆGTMï¼‰ä¸­å¼•å…¥äº†ä¸€é¡¹æ–°åŠŸèƒ½ï¼šè‡ªå®šä¹‰æ¨¡æ¿æˆ–è‡ªå®šä¹‰æ¨¡æ¿ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Œå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä¸HTMLæ ‡ç­¾å’ŒJavaScriptå˜é‡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ <br><br> ä¾‹å¦‚ï¼Œè¯·è€ƒè™‘ä¸ºVKontakteåŠ¨æ€é‡å®šå‘åƒç´ åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡æ¿è¿›ä¸€æ­¥è‡ªå®šä¹‰GTMæ ‡ç­¾ã€‚ <br><br><img src="https://habrastorage.org/webt/c-/62/zr/c-62zrfxks1t6c2gfsv0kn2brjm.png"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…³äºè‡ªå®šä¹‰æ¨¡æ¿çš„ç®€å•è¯æ±‡</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢ä¿¡æ¯é€‰é¡¹å¡</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢å­—æ®µé€‰é¡¹å¡</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢ä»£ç æ ‡ç­¾</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢æƒé™é€‰é¡¹å¡</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨åˆ›å»ºçš„è‡ªå®šä¹‰æ¨¡æ¿ä¸Šè‡ªå®šä¹‰å’Œæµ‹è¯•æ ‡ç­¾</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢æµè§ˆé‡</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢æ·»åŠ åˆ°è´­ç‰©è½¦</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€¢é‡‡çŸ¿æµ‹è¯•</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»“è®º</a> <br><br><a name="1"></a><h2> å…³äºè‡ªå®šä¹‰æ¨¡æ¿çš„ç®€å•è¯æ±‡ </h2><br> è‡ªå®šä¹‰æ¨¡æ¿æ˜¯ç”¨æˆ·å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°æ ‡ç­¾æˆ–å˜é‡çš„æ¨¡æ¿ã€‚  GTMå…·æœ‰ç°æˆçš„æ¨¡æ¿ï¼ˆåœ¨â€œç‰¹è‰²â€æˆ–â€œæ¨èâ€éƒ¨åˆ†ï¼‰ï¼Œä¾‹å¦‚Google Analyticsï¼ˆåˆ†æï¼‰æ ‡è®°ï¼ŒGoogle Optimizeç­‰ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬çš„æ¨¡æ¿å¯¹å…¶è¿›è¡Œè¡¥å……ã€‚ åˆ›å»ºåï¼Œå®ƒä»¬å°†å‡ºç°åœ¨â€œè‡ªå®šä¹‰â€é€‰é¡¹å¡ä¸­ï¼š <br><br><img src="https://habrastorage.org/webt/nx/q_/mu/nxq_mu_uxl6tyiumnl8xbzt6o2c.png"><br><br> ä¸HTMLæ ‡è®°å’ŒJSå˜é‡çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå½“ç”¨æˆ·ä½¿ç”¨ç°æˆçš„æ¨¡æ¿åˆ›å»ºæ ‡è®°æˆ–å˜é‡æ—¶ï¼Œä»–ä¸ä¼šä¸JSä»£ç è¿›è¡Œäº¤äº’ã€‚ <br><br> ç”¨æˆ·æ¨¡æ¿çš„ä»£ç ç”±å¼€å‘äººå‘˜æˆ–ç½‘ç»œåˆ†æå¸ˆåœ¨å…¶åˆ›å»ºé˜¶æ®µç¼–å†™ã€‚ ç„¶åï¼Œå½“æ ¹æ®ç”¨æˆ·æ¨¡æ¿åˆ›å»ºæ ‡ç­¾æˆ–å˜é‡æ—¶ï¼Œæ‰€æœ‰äº¤äº’éƒ½é€šè¿‡æ¥å£æ‰§è¡Œï¼ˆåœ¨åˆ›å»ºç”¨æˆ·æ¨¡æ¿æ—¶ä¹Ÿè¿›è¡Œäº†é…ç½®ï¼‰ï¼š <br><br><img src="https://habrastorage.org/webt/pe/e2/te/pee2tevqbahm_nplbfgj0btis34.png"><br><br> å› æ­¤ï¼Œä¸ç¼–å†™HTMLæ ‡ç­¾æˆ–JSå˜é‡ç›¸æ¯”ï¼Œæ ¹æ®ç”¨æˆ·æ¨¡æ¿è‡ªå®šä¹‰æ ‡ç­¾æˆ–å˜é‡å˜å¾—å®¹æ˜“ä¸€ä¸ªæ•°é‡çº§ï¼Œå› ä¸ºè¿™ä¸éœ€è¦ä½¿ç”¨JavaScriptçš„çŸ¥è¯†å’ŒæŠ€èƒ½ã€‚ <br><br> è‡ªå®šä¹‰æ¨¡æ¿çš„å¦ä¸€å¤§ä¼˜ç‚¹æ˜¯ï¼Œç”±äºæ ‡ç­¾çš„JSä»£ç ä¸­çš„é”™è¯¯ï¼Œâ€œæ”¾ç½®â€ç½‘ç«™çš„å¯èƒ½æ€§é™ä½äº†ä¸€ä¸ªæ•°é‡çº§ã€‚ <br><br> åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¦é…ç½®åŠ¨æ€é‡å®šå‘æ ‡ç­¾â€œ VKontakteâ€ï¼Œæ‚¨ä¸å†éœ€è¦ä¸å¼€å‘äººå‘˜è”ç³»-ä¸€åˆ‡éƒ½å¯ä»¥ç‹¬ç«‹è®¾ç½®ï¼Œå³ä½¿å•†å“çš„æ•°æ®ä¼ è¾“ï¼ˆåœ¨ç½‘ç«™ä¸Šé…ç½®äº†Googleçš„é«˜çº§ç”µå­å•†åŠ¡ï¼‰ï¼Œä¹Ÿåªæœ‰GTMç»éªŒã€‚ <br><br><a name="2"></a><h2> åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿ </h2><br> ç”±äºæˆ‘ä»¬æ­£åœ¨åˆ›å»ºæ ‡ç­¾æ¨¡æ¿ï¼Œå› æ­¤éœ€è¦è½¬åˆ°â€œæ¨¡æ¿â€éƒ¨åˆ†ï¼Œç„¶åå•å‡»â€œæ ‡ç­¾æ¨¡æ¿â€éƒ¨åˆ†ä¸­çš„â€œæ–°å»ºâ€æŒ‰é’®ã€‚ <br><br><img src="https://habrastorage.org/webt/ca/bt/sa/cabtsaamxy-zoglccqgvt1v_tra.png"><br><br> ä¹‹åï¼Œæ¨¡æ¿ç¼–è¾‘å™¨å°†æ‰“å¼€ï¼š <br><br><img src="https://habrastorage.org/webt/bf/c3/jf/bfc3jf2xgpkasmc3qvik2tp4wxy.png"><br><br> ç¼–è¾‘å™¨çš„å·¦ä¾§æ˜¯è®¾ç½®çª—å£ï¼Œå³ä¾§æ˜¯é¢„è§ˆçª—å£å’Œæ§åˆ¶å°ã€‚ è®¾ç½®çª—å£ä¸­æœ‰å››ä¸ªé€‰é¡¹å¡ï¼Œå®ƒä»¬æ˜¯åˆ›å»ºå’Œä½¿ç”¨æ¨¡æ¿æ‰€å¿…éœ€çš„ã€‚ <br><br><a name="3"></a><h3> ä¿¡æ¯æ ‡ç­¾ </h3><br> æ ‡ç­¾ä¸Šçš„ä¿¡æ¯åœ¨æ­¤é€‰é¡¹å¡ä¸Šå¡«å†™ï¼šåç§°ï¼Œæè¿°ï¼Œå›¾æ ‡ã€‚ è¿™æ˜¯åœ¨æ¨¡æ¿åˆ—è¡¨ä¸­åˆ›å»ºæ–°æ ‡ç­¾æ—¶å°†çœ‹åˆ°çš„ä¿¡æ¯ï¼š <br><br><img src="https://habrastorage.org/webt/dd/nm/9f/ddnm9fvcygh2ob6jzkliccqgi1o.png"><br><br> æ ‡è®°å›¾æ ‡æœ‰ä»¥ä¸‹è¦æ±‚ï¼šPNGï¼ŒJPEGæˆ–GIFæ ¼å¼ï¼Œè‡³å°‘64x64åƒç´ çš„åˆ†è¾¨ç‡å’Œä¸è¶…è¿‡50 KBçš„å¤§å°ã€‚ <br><br><a name="4"></a><h3> å­—æ®µæ ‡ç­¾ </h3><br> æœ¬éƒ¨åˆ†åˆ›å»ºæ¨¡æ¿çš„ç•Œé¢ã€‚ è¯¥ç•Œé¢åŒ…å«å„ç§å­—æ®µå’Œå½¢å¼ï¼Œåœ¨åˆ›å»ºæ–°æ ‡ç­¾æˆ–å˜é‡çš„é˜¶æ®µï¼Œç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’ã€‚ <br><br> å°†æ¥ï¼Œæ¨¡æ¿ä»£ç ä¸­å°†ä½¿ç”¨ç”¨æˆ·ä½¿ç”¨ç•Œé¢åˆ›å»ºæ ‡ç­¾æ—¶è¾“å…¥çš„ä¿¡æ¯ã€‚ <br><br> è¦æ·»åŠ æ–°å…ƒç´ ï¼Œè¯·å•å‡»â€œæ·»åŠ å­—æ®µâ€æŒ‰é’®ã€‚ å‡ºç°ç”¨äºé€‰æ‹©å…ƒç´ ç±»å‹çš„çª—å£ï¼š <br><br><img src="https://habrastorage.org/webt/g5/ko/d7/g5kod7ox7dal761180kpdfhojto.png"><br><br>  GTMå…è®¸æ‚¨é€‰æ‹©ä»¥ä¸‹ç±»å‹çš„ç•Œé¢å…ƒç´ ï¼š <br><br><ul><li>  <b>æ–‡å­—æ¡†</b> </li><li>  <b>ä¸‹æ‹‰èœå•</b> </li><li>  <b>å¤é€‰æ¡†</b> ; </li><li>  <b>å¼€å…³</b> </li><li>  <b>ç®€å•è¡¨æ ¼</b> ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„ç¼–è¾‘æ¯ä¸ªå•å…ƒæ ¼ã€‚ </li><li>  <b>æ‰©å±•è¡¨</b> ï¼Œæ‚¨åªèƒ½ç¼–è¾‘ä¸€è¡Œï¼Œè¿™ç§ç±»å‹çš„è¡¨å¾ˆæ–¹ä¾¿ç”¨äºä»é”®å€¼å¯¹åˆ›å»ºå­—å…¸ï¼› </li><li>  <b>å…ƒç´ ç»„</b> ï¼Œå…è®¸æ‚¨å°†å‡ ç§ç±»å‹åˆ†ç»„ä¸ºä¸€ç»„ï¼› </li><li>  <b>å¿«æ·æ–¹å¼</b>ç”¨äºå‘ç•Œé¢æ·»åŠ æ–‡æœ¬ï¼›å®ƒä¸éœ€è¦ç”¨æˆ·è¾“å…¥ä»»ä½•æ•°æ®ã€‚ </li></ul><br> æ·»åŠ å…ƒç´ åï¼Œéœ€è¦ç»™å®ƒèµ·ä¸€ä¸ªå‹å¥½çš„åç§°ï¼Œè¯¥åç§°éšåå°†åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚ è¿™æ˜¯ä¸€ç§å˜é‡å-åº”è¯¥æ˜“äºç†è§£å¹¶ä¸”å¯ä»¥æ­ç¤ºæ‰€åˆ›å»ºæ¥å£å…ƒç´ çš„æœ¬è´¨ã€‚ ä¾‹å¦‚ï¼Œåç§°â€œ IDâ€å¹¶ä¸è¡¨ç¤ºä»»ä½•ç‰¹å®šå«ä¹‰ï¼Œä½†åç§°â€œ pixelIDsâ€å·²ç»è¡¨æ˜ç”¨æˆ·è¾“å…¥çš„åƒç´ IDå­˜å‚¨åœ¨æ­¤å…ƒç´ ä¸­ï¼š <br><br><img src="https://habrastorage.org/webt/fv/1h/ht/fv1hht_iaatbuhi1ejovajkehhc.png"><br><br> æ¥ä¸‹æ¥ï¼Œè½¬åˆ°æ¯ä¸ªå…ƒç´ çš„è®¾ç½®å¹¶æ¿€æ´»å¿…è¦çš„å±æ€§ã€‚ <br> åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œéœ€è¦æ¥å£å…ƒç´ çš„ä¸åŒå±æ€§ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å®ƒä»¬éƒ½æ˜¯éšè—çš„ï¼Œæˆ‘ä»¬éœ€è¦æ¿€æ´»ç°åœ¨éœ€è¦çš„é‚£äº›å±æ€§ï¼š <br><br><img src="https://habrastorage.org/webt/ah/jx/o1/ahjxo1oz0w8fp6pntytshfs1y_o.png"><br><br> å¯¹äºä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå¯ç”¨å±æ€§æœ‰æ‰€ä¸åŒï¼Œæˆ‘å°†æŒ‡å‡ºæœ€å¸¸ç”¨çš„å…ƒç´ ï¼Œå‡ ä¹æ˜¯æ‰€æœ‰å…ƒç´ ï¼š <br><br>  <b>1.æ˜¾ç¤ºåç§°</b> ã€‚ è¿™æ˜¯ç”¨æˆ·åœ¨åˆ›å»ºæ ‡ç­¾æ—¶å°†åœ¨ç•Œé¢ä¸­çœ‹åˆ°çš„åç§°ï¼š <br><br><img src="https://habrastorage.org/webt/jf/lk/-g/jflk-glzt0dahft6vpdx9qrzy8q.png"><br><br>  <b>2.ç¤ºä¾‹å€¼</b> ã€‚ è¿™å‘ç”¨æˆ·æç¤ºè¦åœ¨å­—æ®µä¸­è¾“å…¥å“ªäº›å€¼ï¼š <br><br><img src="https://habrastorage.org/webt/b6/zz/sc/b6zzscielm1pjho74x22rk88c0c.png"><br><br>  <b>3.å¸®åŠ©æ–‡æœ¬</b> ã€‚ è¿™æ˜¯ç”¨æˆ·å°†é¼ æ ‡æ‚¬åœåœ¨å…ƒç´ çš„å¸®åŠ©å›¾æ ‡ä¸Šæ—¶å°†çœ‹åˆ°çš„æ–‡æœ¬ï¼š <br><br><img src="https://habrastorage.org/webt/nv/wo/qr/nvwoqraide7hp-qrbdjaomwvg3e.png"><br><br>  <b>4.æ•°æ®éªŒè¯è§„åˆ™</b> ã€‚ åœ¨æ­¤å±æ€§ä¸­ï¼Œæ‚¨å¯ä»¥è®¾ç½®æŸäº›è§„åˆ™æ¥æ£€æŸ¥ç”¨æˆ·åœ¨å­—æ®µä¸­è¾“å…¥çš„æ•°æ®ï¼Œå¹¶åœ¨å¿…è¦æ—¶è®¾ç½®å°è¯•ä½¿ç”¨æœªé€šè¿‡æµ‹è¯•çš„æ•°æ®ä¿å­˜æ ‡ç­¾æ—¶æ˜¾ç¤ºçš„é”™è¯¯æ–‡æœ¬ã€‚ <br><br> ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æŒ‡å®šå¿…é¡»å¡«å†™è¯¥å­—æ®µã€‚ ç¬¬äºŒä¸ªç¤ºä¾‹ï¼šæ‚¨éœ€è¦ä»ç”¨æˆ·é‚£é‡Œè·å–ç”µå­é‚®ä»¶åœ°å€ï¼Œç„¶åå¯ä»¥éªŒè¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®å¿…é¡»ä¸æ­£åˆ™è¡¨è¾¾å¼<b>ã€‚* @ã€‚* \ .. *</b>åŒ¹é…ã€‚ <br><br><img src="https://habrastorage.org/webt/3s/ma/pb/3smapbl1aorsc4fsvhwpd-1oy4m.png"><br><br> è¦æŒ‡å®šåœ¨è¾“å…¥çš„æ•°æ®ä¸ç¬¦åˆéªŒè¯è§„åˆ™æ—¶å‡ºç°çš„é”™è¯¯æ–‡æœ¬ï¼Œæ‚¨éœ€è¦æ¿€æ´»é«˜çº§è§„åˆ™è®¾ç½®ï¼š <br><br><img src="https://habrastorage.org/webt/kb/zw/qr/kbzwqr32irigkreu9bbht9fxf1m.png"><br><br><img src="https://habrastorage.org/webt/ek/xh/hg/ekxhhgobsta59wpr6uxsbaqzdwg.png"><br><br> å¦å¤–ï¼Œåœ¨é«˜çº§è®¾ç½®ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®šæ¿€æ´»æ­¤è§„åˆ™çš„æ¡ä»¶ï¼ˆâ€œå¯ç”¨æ¡ä»¶â€å­—æ®µï¼‰ã€‚ <br><br>  <b>5.çº³å…¥æ¡æ¬¾</b> ã€‚ è¿™äº›æ˜¯ç”¨æˆ·æ‹¥æœ‰æ­¤ç•Œé¢å…ƒç´ çš„æ¡ä»¶ã€‚ <br><br> ä¾‹å¦‚ï¼Œä¸ºäº†ä¸ä½¿æ¨¡æ¿ä¸­çš„ç•Œé¢å…ƒç´ è¶…è½½ï¼Œå¯ä»¥åœ¨é€‰ä¸­å¤é€‰æ¡†æ—¶ä½¿å¿…è¦å…ƒç´ çš„å¤–è§‚ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾ç”¨æˆ·æƒ³è¦ä»¥åƒç´ ä¸ºå•ä½é…ç½®äº§å“æ•°æ®çš„ä¼ è¾“ï¼ˆä½¿ç”¨ç½‘ç«™ä¸Šé…ç½®çš„é«˜çº§Googleç”µå­å•†åŠ¡ç½‘ç«™å¯ä»¥å®ç°ï¼‰ï¼Œé‚£ä¹ˆä»–é€‰ä¸­â€œä½¿ç”¨dataLayerä¼ è¾“äº§å“æ•°æ®â€å¤é€‰æ¡†ï¼Œå¹¶åœ¨é€‰ä¸­è¯¥å¤é€‰æ¡†åï¼Œå…ƒç´ å°†å‡ºç°åœ¨æ ‡ç­¾ç•Œé¢ä¸­éœ€è¦é…ç½®è¿™æ ·çš„ä¼ è¾“ã€‚ å¦‚æœæœªé€‰ä¸­è¯¥æ¡†ï¼Œåˆ™ç•Œé¢ä¸­æ²¡æœ‰å…ƒç´ ã€‚ <br><br><img src="https://habrastorage.org/webt/rp/ui/x_/rpuix__y-ya--_uat8taekcwpa0.png"><br><br> æˆ‘æ³¨æ„åˆ°åœ¨è¿™é‡Œæœ‰å¿…è¦æŒ‡å‡ºå…ƒç´ çš„åç§°ï¼Œåœ¨æ·»åŠ ä¹‹åå¿…é¡»ç«‹å³ä¸ºå…¶èµ‹å€¼ã€‚ <br><br> æ·»åŠ è®¾ç½®å¹¶åˆ›å»ºç•Œé¢æ—¶ï¼Œå¯ä»¥åœ¨é¢„è§ˆçª—å£ä¸­ç«‹å³æŸ¥çœ‹å’Œæµ‹è¯•æ‰€æœ‰æ›´æ”¹ï¼š <br><br><img src="https://habrastorage.org/webt/df/bl/l9/dfbll9mc0qvpwcxnbzzx-fbg71g.png"><br><br><a name="5"></a><h3> ä»£ç æ ‡ç­¾ </h3><br> æ­¤é€‰é¡¹å¡æ˜¯ä»£ç ç¼–è¾‘å™¨ã€‚ <br><br>  GTMè‡ªå®šä¹‰æ¨¡æ¿ä»£ç æ˜¯ç”¨ç²¾ç®€çš„JavaScript ES6ç¼–å†™çš„ï¼Œå¹¶åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œåœ¨è¯¥ç¯å¢ƒä¸­ï¼Œæ‰€æœ‰ä¸å…¨å±€æ•°æ®ï¼ˆå³ç›´æ¥ä¸é¡µé¢ï¼‰çš„é€šä¿¡éƒ½æ˜¯é€šè¿‡APIå®Œæˆçš„ã€‚ ä¹Ÿæ²¡æœ‰åˆ†åˆ«ä½¿ç”¨å¸¸è§„æ–¹æ³•çš„å…¨å±€å¯¹è±¡ï¼Œä¾‹å¦‚çª—å£æˆ–æ–‡æ¡£ã€‚ ä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°ï¼ˆæ–°å¯¹è±¡ç­‰ï¼‰ï¼ŒsetTimeoutï¼ŒparseIntï¼Œdeleteç­‰ã€‚  -æ‰€æœ‰è¿™äº›éƒ½æ— æ³•åœ¨â€œè‡ªå®šä¹‰æ¨¡æ¿â€ä¸­ä½¿ç”¨ã€‚ <br><br> ä½†æ˜¯æ‰€æœ‰è¿™äº›éƒ½æœ‰ä¸€ä¸ªAPIã€‚ å› æ­¤ï¼Œç¼–å†™è‡ªå®šä¹‰æ¨¡æ¿çš„ä»£ç åº”é¦–å…ˆå®šä¹‰æˆ‘ä»¬å°†åœ¨ä»£ç ä¸­ä½¿ç”¨çš„APIï¼š <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// API //     const copyFromWindow = require('copyFromWindow'); //     const setInWindow = require('setInWindow'); //      const injectScript = require('injectScript'); //    const callInWindow = require('callInWindow'); //  ,     ,    const makeTableMap = require('makeTableMap'); //   URL  const getUrl = require('getUrl'); //    const getQueryParameters = require('getQueryParameters'); //     const makeInteger = require('makeInteger'); //    const makeString = require('makeString'); //  setTimeout const callLater = require('callLater'); //  console.log const logToConsole = require('logToConsole');</span></span></code> </pre> <br> è¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Google Developer Helpï¼Œä»¥è·å–</a> API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>å®Œæ•´åˆ—è¡¨ä»¥åŠè¯¦ç»†æ–‡æ¡£ã€‚ <br><br> æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨APIâ€‹â€‹çš„ç¤ºä¾‹ï¼š <br><div class="scrollable-table"><table><tbody><tr><th> åŠ¨ä½œè¯´æ˜ </th><th> ç»å…¸js </th><th> è‡ªå®šä¹‰æ¨¡æ¿API </th></tr><tr><td> æ§åˆ¶å°è¾“å‡º </td><td>  console.logï¼ˆ'å—¨'ï¼‰; </td><td>  logToConsoleï¼ˆ'Hi'ï¼‰; </td></tr><tr><td> è®¾å®šè®¡æ—¶å™¨ </td><td>  setTimeoutï¼ˆå‡½æ•°ï¼Œ100ï¼‰; </td><td>  callLaterï¼ˆå‡½æ•°ï¼‰ï¼› </td></tr><tr><td> è½¬æ¢ä¸ºå­—ç¬¦ä¸² </td><td> å­—ç¬¦ä¸²ï¼ˆ1234ï¼‰; </td><td>  makeStringï¼ˆ1234ï¼‰; </td></tr><tr><td> è½¬æ¢ä¸ºæ•´æ•° </td><td>  parseIntï¼ˆ'1234'ï¼Œ10ï¼‰; </td><td>  makeIntegerï¼ˆ'1234'ï¼‰; </td></tr><tr><td> é¡µé¢ä¸»æœº </td><td>  window.location.hostname </td><td>  getUrlï¼ˆ'host'ï¼‰; </td></tr></tbody></table></div><br> ä»ç¤ºä¾‹è¡¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå®šä¹‰APIåï¼Œå¿…é¡»ä½¿ç”¨å®ƒè€Œä¸æ˜¯æ ‡å‡†JSæ„é€ ã€‚ <br><br> å®šä¹‰APIä¹‹åï¼Œæœ€å¥½ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„è®¾ç½®æ¥å®šä¹‰å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œè¿™ä¹Ÿå¯ä»¥åœ¨å¯æ‰§è¡Œä»£ç æœŸé—´ä»ç”¨æˆ·çš„è®¾ç½®ä¸­è¯·æ±‚å¿…è¦çš„æ•°æ®ä¹‹åå®Œæˆã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä»ä¸€å¼€å§‹å°±å®šä¹‰è®¾ç½®å¯¹è±¡ï¼Œé‚£ä¹ˆä½¿ç”¨ä»£ç å°†å˜å¾—æ›´åŠ å®¹æ˜“å’Œæ˜“äºç†è§£ï¼Œå› ä¸ºæ‰€æœ‰ç”¨æˆ·è®¾ç½®éƒ½å­˜å‚¨åœ¨å•ç‹¬çš„å¯¹è±¡ä¸­ã€‚ <br><br> è¦ä»æ¥å£å…ƒç´ è·å–æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨æ•°æ®æ„é€ ã€‚ <br><br>  {{å…ƒç´ åç§°}}ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    const settings = { //  event: data.event, //ID  () pixelIDs: data.pixelIDs, //ID - (  1 -) priceListId: data.priceListId, //   -? fewPriceLists: data.fewPriceLists, //ID - (    ) priceListIds: data.priceListIds === undefined ? data.priceListIds : makeTableMap(data.priceListIds,'hostname','priceListId'), //  ecommerce   ? ecommerceUse: data.ecommerceUse, // ecommerce   eventEcommerce: data.eventEcommerce, //     siteSearchQueryParam: data.siteSearchQueryParam };</span></span></code> </pre><br> æ³¨æ„ï¼šå¦‚æœå°†undefinedä¼ é€’ç»™makeTableMapæ–¹æ³•ï¼Œå°†å¯¼è‡´è„šæœ¬é”™è¯¯ï¼Œå› æ­¤æˆ‘ä½¿ç”¨å¸¦æœ‰ä¸‰å…ƒè¿ç®—ç¬¦çš„æ„é€ ï¼ˆif-elseæ„é€ çš„ç¼©å†™è®°å½•ï¼‰æ¥è¿‡æ»¤æ‰æ­¤ç±»è„šæœ¬ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å…³äºmakeTableMapæ–¹æ³•ã€‚</b> <div class="spoiler_text"> å¦‚æœæ¥å£ä½¿ç”¨æ‰©å±•è¡¨ï¼Œåˆ™å…¶ä¸­çš„æ•°æ®å°†ä»¥ä»¥ä¸‹å½¢å¼å­˜å‚¨ï¼š <br><br><pre> <code class="javascript hljs">[ <span class="hljs-string"><span class="hljs-string">'key'</span></span>: <span class="hljs-string"><span class="hljs-string">'k1'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>}, <span class="hljs-string"><span class="hljs-string">'key'</span></span>: <span class="hljs-string"><span class="hljs-string">'k2'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>: <span class="hljs-string"><span class="hljs-string">'v2'</span></span>} ]</code> </pre><br> ä½¿ç”¨makeTableMapæ–¹æ³•å¤„ç†åï¼Œæ•°æ®å°†æˆä¸ºå…·æœ‰é”®å€¼å¯¹çš„å¸¸è§„å¯¹è±¡ï¼š <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">'k1'</span></span>: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>, <span class="hljs-string"><span class="hljs-string">'k2'</span></span>: <span class="hljs-string"><span class="hljs-string">'v2'</span></span> }</code> </pre><br></div></div><br> è‡ªå®šä¹‰æ¨¡æ¿ä»£ç çš„å¦ä¸€ä¸ªè¦æ±‚ï¼šå¦‚æœæˆåŠŸæ‰§è¡Œäº†æ ‡è®°ï¼Œåˆ™å¿…é¡»è°ƒç”¨data.gtmOnSuccessï¼ˆï¼‰æ–¹æ³•ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¯·è°ƒç”¨data.gtmOnFailureï¼ˆï¼‰æ–¹æ³•ã€‚ <br><br> ä¾‹å¦‚ï¼Œåœ¨æˆ‘çš„ä»£ç ä¸­ï¼ŒæˆåŠŸå‘é€è¯·æ±‚åï¼Œå°†è°ƒç”¨data.gtmOnSuccessï¼ˆï¼‰æ–¹æ³•ï¼Œå¦‚æœåœ¨å¤–éƒ¨è„šæœ¬é¡µé¢VK openapi.jsä¸Šä¸‹è½½å¤±è´¥ï¼Œåˆ™å°†è°ƒç”¨data.gtmOnFailureï¼ˆï¼‰æ–¹æ³•ã€‚ <br><br> åœ¨å®šä¹‰äº†APIå¹¶ä½¿ç”¨è®¾ç½®å®šä¹‰äº†å¯¹è±¡ä¹‹åï¼Œæ‚¨å¯ä»¥å¼€å§‹ç¼–å†™ç”¨äºè®¡ç®—åƒç´ çš„ç®—æ³•ã€‚ <br><br> è¿™é‡Œè¦è®°ä½çš„ä¸»è¦äº‹æƒ…æ˜¯ï¼š <br><br>  â€¢å¦‚æœéœ€è¦è·å–å…¨å±€å˜é‡ï¼Œè¯·ä½¿ç”¨copyFromWindow APIæ–¹æ³•ã€‚ <br><br><pre> <code class="javascript hljs">copyFromWindow(<span class="hljs-string"><span class="hljs-string">'VK'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//VK -   ,    </span></span></code> </pre><br>  â€¢å¦‚æœéœ€è¦è®¾ç½®å…¨å±€å˜é‡ï¼Œåˆ™ä½¿ç”¨setInWindow APIæ–¹æ³•ã€‚ <br><br><pre> <code class="javascript hljs">setInWindow(<span class="hljs-string"><span class="hljs-string">'openapiInject'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//openapiInject -   ,    //1 - ,    .</span></span></code> </pre><br>  â€¢å¦‚æœæ‚¨éœ€è¦è¿è¡Œå…¨å±€å‡½æ•°ï¼Œè¯·ä½¿ç”¨callInWindow APIæ–¹æ³•ã€‚ <br><br><pre> <code class="javascript hljs">callInWindow(<span class="hljs-string"><span class="hljs-string">'VK.Retargeting.Init'</span></span>, p); <span class="hljs-comment"><span class="hljs-comment">//VK.Retargeting.Init -   ,    //p - ,     </span></span></code> </pre><br>  â€¢å¦‚æœéœ€è¦åœ¨é¡µé¢ä¸Šæ·»åŠ å¤–éƒ¨è„šæœ¬ï¼Œè¯·ä½¿ç”¨injectScript APIæ–¹æ³•ã€‚ <br><br><pre> <code class="javascript hljs">injectScript(<span class="hljs-string"><span class="hljs-string">'https://vk.com/js/api/openapi.js?159'</span></span>, pixel.setVkAsyncInit(), data.gtmOnFailure, <span class="hljs-string"><span class="hljs-string">'vkPixel'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//https://vk.com/js/api/openapi.js?159 -  ,      //pixel.setVkAsyncInit() - ,        //data.gtmOnFailure - ,        //vkPixel -  ,  ,   URL  .    ,   JavaScript      </span></span></code> </pre><br>  â€¢å¦‚æœéœ€è¦è·å–URLï¼ˆæˆ–URLçš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¯·ä½¿ç”¨getUrl APIæ–¹æ³•ã€‚ <br><br><pre> <code class="javascript hljs">getUrl(<span class="hljs-string"><span class="hljs-string">'host'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//host -  URL,  .  ,  host: protocol, port, path, extension, fragment, query.</span></span></code> </pre><br> å¦‚æˆ‘ä¸Šé¢æ‰€å†™ï¼Œè‡ªå®šä¹‰æ¨¡æ¿æ”¯æŒJS ES6ã€‚ å»ºè®®ä½¿ç”¨æ­¤è¯­æ³•ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¼©çŸ­ä»£ç å¹¶ä½¿ä»£ç æ›´æ˜“è¯»ï¼Œå¹¶ä¸”JSçš„å·¥ä½œæ›´å¯é¢„æµ‹ä¸”ç±»ä¼¼äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æœ‰å…³JS ES6è¯­æ³•çš„æ›´å¤šä¿¡æ¯</b> <div class="spoiler_text"> éœ€è¦ä½¿ç”¨çš„ä¸»è¦åŠŸèƒ½æ˜¯ç®­å¤´å‡½æ•°å’Œconstçš„å£°æ˜ï¼Œå¹¶è®©å˜é‡è€Œä¸æ˜¯varã€‚ <br><br> é€šè¿‡constå£°æ˜çš„å˜é‡æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå…¶å€¼ä¸èƒ½æ›´æ”¹ã€‚ <br><br> é€šè¿‡letå£°æ˜çš„å˜é‡ä¸é€šè¿‡varå£°æ˜çš„å˜é‡ä¸åŒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><ul><li>  letä¸æ·»åŠ åˆ°å…¨å±€çª—å£å¯¹è±¡ï¼› </li><li> è®©å¯è§æ€§ä»…é™äºå£°æ˜å—ï¼› </li><li> é€šè¿‡letå£°æ˜çš„å˜é‡æ— æ³•é‡æ–°å£°æ˜ã€‚ </li></ul><br> ç®­å¤´åŠŸèƒ½æ˜¯å¸¸ç”¨åŠŸèƒ½çš„ç¼©å†™ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//1.   const func1 = function() { return 'test'; } //    const func1 = () =&gt; 'test'; //2.   const func2 = function(arg) { if (arg &gt; 0) return 'plus'; else return 'minus'; } //    const func2 = arg =&gt; { if (arg &gt; 0) return 'plus'; else return 'minus'; } //3.   const func3 = function(arg1, arg2){ if (arg1 &gt; arg2) return arg1; else return arg2; } //    const func3 = (arg1, arg2) =&gt; { if (arg1 &gt; arg2) return arg1; else return arg2; }</span></span></code> </pre><br></div></div><br> ç°åœ¨ï¼Œæˆ‘ä»¬äº†è§£äº†å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ¨¡æ¿APIï¼Œå¯ä»¥ä½¿ç”¨JavaScript ES6è¯­æ³•ç¼–å†™æ ‡ç­¾æ“ä½œä»£ç ã€‚ <br><br> æˆ‘çš„ä»£ç åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼šå¯åŠ¨åƒç´ ï¼Œå®‰è£…VK openapi.jsï¼Œä»dataLayerï¼ˆé…ç½®äº†Googleçš„é«˜çº§ç”µå­å•†åŠ¡ç½‘ç«™ï¼‰ä¸­æ£€ç´¢äº§å“æ•°æ®ï¼Œå¤„ç†è¿™äº›æ•°æ®ï¼Œä½¿å…¶è½¬åŒ–ä¸ºå‘é€ç»™VKontakteé‡å®šå‘åƒç´ æ‰€éœ€çš„æ ¼å¼ï¼Œä»¥åŠäº‹ä»¶åˆ†é…æ–¹æ³•ã€‚ <br><br> åƒç´ è§¦å‘æ–¹æ³•æ”¯æŒä¸‰ç§æƒ…å†µï¼š <br><br><ol><li> åƒç´ åœ¨ç¼ºå°‘openapi.jsçš„é¡µé¢ä¸Šè¿è¡Œã€‚ </li><li> è¯¥åƒç´ åœ¨å­˜åœ¨openapi.jsçš„é¡µé¢ä¸Šè¿è¡Œï¼Œä½†å°šæœªåŠ è½½ã€‚ </li><li> åœ¨åŠ è½½äº†openapi.jsçš„é¡µé¢ä¸Šå¯åŠ¨åƒç´ ã€‚ </li></ol><br><div class="spoiler">  <b class="spoiler_title">æˆ‘çš„VKontakteåŠ¨æ€é‡å®šå‘åƒç´ çš„è‡ªå®šä¹‰GTMæ¨¡æ¿çš„å®Œæ•´ä»£ç </b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//api const copyFromWindow = require('copyFromWindow'); const setInWindow = require('setInWindow'); const injectScript = require('injectScript'); const callInWindow = require('callInWindow'); const makeTableMap = require('makeTableMap'); const getUrl = require('getUrl'); const getQueryParameters = require('getQueryParameters'); const makeInteger = require('makeInteger'); const makeString = require('makeString'); const callLater = require('callLater'); //    const settings = { event: data.event, pixelIDs: data.pixelIDs, priceListId: data.priceListId, fewPriceLists: data.fewPriceLists, priceListIds: data.priceListIds === undefined ? data.priceListIds : makeTableMap(data.priceListIds,'hostname','priceListId'), ecommerceUse: data.ecommerceUse, eventEcommerce: data.eventEcommerce, siteSearchQueryParam: data.siteSearchQueryParam }; //       const pixel = { //    getPageHostname: () =&gt; getUrl('host'), //    VK getVK: () =&gt; copyFromWindow('VK'), //    VK setVkAsyncInit: () =&gt; { setInWindow('vkAsyncInit', pixel.sendEvent); }, //       getSiteSearchPhrase: () =&gt; { if (settings.event === 'view_search') return getQueryParameters(settings.siteSearchQueryParam); else return undefined; }, //      getEventParams: (products, currencyCode, revenue) =&gt; { let eventParamsClean= {}; let eventParams = { products: eventProducts.getProductParams(products), category_ids: eventProducts.getCategoryString(products), currency_code: currencyCode, total_price: eventProducts.getTotalPrice(products, revenue), search_string: pixel.getSiteSearchPhrase() }; if (eventParams.products !== undefined) eventParamsClean.products = eventParams.products; if (eventParams.category_ids !== undefined) eventParamsClean.category_ids = eventParams.category_ids; if (eventParams.currency_code !== undefined) eventParamsClean.currency_code = eventParams.currency_code; if (eventParams.total_price !== undefined) eventParamsClean.total_price = eventParams.total_price; if (eventParams.search_string !== undefined) eventParamsClean.search_string = eventParams.search_string; return eventParamsClean; }, //  - getPriceListId: hostname =&gt; { if (settings.fewPriceLists) return settings.priceListIds[hostname]; else return settings.priceListId; }, //  openapi.js openapiInit: () =&gt; { injectScript('https://vk.com/js/api/openapi.js?159', pixel.setVkAsyncInit(), data.gtmOnFailure, 'vkPixel'); setInWindow('openapiInject', 1); }, //   sendEvent: () =&gt; { if (settings.event === 'hit') { settings.pixelIDs.split(',').forEach(p =&gt; { callInWindow('VK.Retargeting.Init',p); callInWindow('VK.Retargeting.Hit'); }); } else { const pricelist = pixel.getPriceListId(pixel.getPageHostname()); const name = settings.event; let products = []; if(settings.ecommerceUse) products = name === 'view_home' || name === 'view_category' || name === 'view_search' || name === 'view_other' ? settings.eventEcommerce : settings.eventEcommerce.products; else products = undefined; const currencyCode = settings.ecommerceUse ? settings.eventEcommerce.currencyCode : undefined; const revenue = (settings.ecommerceUse &amp;&amp; name === 'purchase') ? settings.eventEcommerce.actionField.revenue : undefined; const eventParams = settings.ecommerceUse ? pixel.getEventParams(products, currencyCode, revenue) : undefined; settings.pixelIDs.split(',').forEach(p =&gt; { callInWindow('VK.Retargeting.Init',p); callInWindow('VK.Retargeting.ProductEvent', pricelist, name, eventParams); }); }, //   start: () =&gt; { if (pixel.getVK() === undefined &amp;&amp; copyFromWindow('openapiInject') !== 1) { pixel.openapiInit(); data.gtmOnSuccess(); } else if (pixel.getVK() === undefined &amp;&amp; copyFromWindow('openapiInject') === 1) { if (pixel.count &lt; 50) { callLater(pixel.start); pixel.count++; } else return; } else { pixel.sendEvent(); data.gtmOnSuccess(); }, //   count: 0 }; //       const eventProducts = { //    products   getProductParams: products =&gt; { let arr = []; products.forEach(i =&gt; { let productParamsClean = {}; let productParams = { id: makeString(i.id), group_id: makeString(i.brand), price: makeInteger(i.price * 100) / 100 }; if (productParams.id !== 'undefined') productParamsClean.id = productParams.id; if (productParams.group_id !== 'undefined') productParamsClean.group_id = productParams.group_id; if (productParams.price !== 0) productParamsClean.price = productParams.price; arr.push(productParamsClean); }); return arr; }, //       'a,b,c'       getCategoryString: products =&gt; { let categoryId = ''; let check = []; products.forEach(i =&gt; { if(check.indexOf(i.category) === -1) { check.push(i.category); categoryId += ',' + i.category; }); return categoryId.slice(1); }, //     getTotalPrice: (products, revenue) =&gt; { let sumPrice = 0; if (revenue !== undefined ) return makeInteger(revenue * 100) / 100; else { products.forEach(i =&gt; { if (i.hasOwnProperty('quantity')) sumPrice += (makeInteger(i.price * 100) / 100) * makeInteger(i.quantity); else sumPrice += makeInteger(i.price * 100) / 100; }); return sumPrice; }; //  pixel.start();</span></span></code> </pre> <br></div></div><br><a name="6"></a><h2> æƒé™æ ‡ç­¾ </h2><br> ç¼–å†™å®Œæ ‡è®°ä»£ç åï¼Œæœ€åé˜¶æ®µä»ç„¶å­˜åœ¨-å‘å‡ºä¸é¡µé¢çš„å…¨å±€æ•°æ®è¿›è¡Œäº¤äº’çš„æƒé™ã€‚ åªéœ€åœ¨â€œæƒé™â€é€‰é¡¹å¡ä¸Šå³å¯å®Œæˆã€‚ <br><br> ç”±äºä»£ç æ˜¯åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­æ‰§è¡Œçš„ï¼Œå¹¶ä¸”é€šè¿‡APIä¸å…¨å±€æ•°æ®è¿›è¡Œäº¤äº’ï¼Œå› æ­¤å¯¹äºæ¯ç§APIæ–¹æ³•ï¼ˆå¿…è¦æ—¶ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŒ‡å®šæŸäº›æ“ä½œçš„æƒé™ã€‚ <br><br> è¿™æ ·åšæ˜¯ä¸ºäº†å°½å¯èƒ½å®¡æ…åœ°ä½¿ç”¨å…¨å±€é¡µé¢æ•°æ®ï¼Œä»è€Œæœ€å¤§ç¨‹åº¦åœ°å‡å°‘äº†å°†ç½‘ç«™â€œæ”¾å…¥â€æ¨¡æ¿ä»£ç é”™è¯¯çš„æœºä¼šã€‚ <br><br> å¯¹äºæˆ‘çš„ä»£ç ä¸­ä½¿ç”¨çš„APIæ–¹æ³•ï¼Œå¿…é¡»å‘å‡ºä¸‰ç§ç±»å‹çš„æƒé™ï¼š <br><br><img src="https://habrastorage.org/webt/29/og/lw/29oglwyra6zkhac7_2lr4jpqq5a.png"><br><br>  <b>1.è®¿é—®å…¨å±€å˜é‡</b> -è¯»å–ï¼Œå†™å…¥ï¼Œæ‰§è¡Œå¯¹æˆ‘ä»¬ä»£ç ä¸­ä½¿ç”¨çš„å…¨å±€å˜é‡çš„è®¿é—®ã€‚ å¿…é¡»æ‰‹åŠ¨æ·»åŠ å˜é‡ï¼Œå¹¶ä¸”æ¯ä¸ªå˜é‡éƒ½æŒ‡ç¤ºæˆ‘ä»¬å…è®¸æ‰§è¡Œçš„æ“ä½œã€‚ <br><br><img src="https://habrastorage.org/webt/f3/qb/6b/f3qb6b9sj6rn1v4q55t_z9f362e.png"><br><br> ä¾‹å¦‚ï¼Œåªèƒ½è¯»å–VKå˜é‡ï¼Œå¯ä»¥è¯»å–å’Œé‡æ–°å®šä¹‰vkAsyncInitï¼Œå¹¶ä¸”åªèƒ½æ‰§è¡ŒVK.Retargeting.Hitæ–¹æ³•ã€‚ <br><br>  <b>2.è¯»å–URL</b> ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¿…é¡»æŒ‡å®šå…è®¸æ¥æ”¶URLçš„å“ªäº›éƒ¨åˆ†ã€‚ æˆ‘å…è®¸æ¥æ”¶URLçš„ä»»ä½•éƒ¨åˆ†ï¼š <br><br><img src="https://habrastorage.org/webt/do/um/li/doumlixqd-rw2cppm4ordw1svae.png"><br><br> ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥æŒ‡å®šä»»ä½•ç‰¹å®šçš„ï¼š <br><br><img src="https://habrastorage.org/webt/sj/d3/ne/sjd3nefe52_foeat88kifeodi-w.png"><br><br>  <b>3.æ³¨å…¥è„šæœ¬</b> ã€‚ åœ¨æ­¤å¿…é¡»æ³¨å†Œå¯ä»ä¸­ä¸‹è½½å¤–éƒ¨è„šæœ¬çš„åœ°å€ã€‚ åœ¨æˆ‘çš„ä»£ç ä¸­ï¼Œä»…åŠ è½½äº†ä¸€ä¸ªå¸¦æœ‰VK openapi.jsçš„è„šæœ¬ï¼Œæˆ‘æŒ‡å®šäº†å…¶åœ°å€ï¼š <br><br><img src="https://habrastorage.org/webt/xt/oy/hd/xtoyhd-yprd2sn_eu41mbquh2s0.png"><br><br> å°±æ˜¯è¿™æ ·ï¼Œè‡ªå®šä¹‰æ¨¡æ¿è®¾ç½®å·²å®Œæˆï¼Œæ‚¨å¯ä»¥ä¿å­˜æ¨¡æ¿å¹¶è¿›è¡Œæµ‹è¯•ã€‚ <br><br><a name="7"></a><h2> åœ¨åˆ›å»ºçš„è‡ªå®šä¹‰æ¨¡æ¿ä¸Šè‡ªå®šä¹‰å’Œæµ‹è¯•æ ‡ç­¾ </h2><br> ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åˆ›å»ºçš„è‡ªå®šä¹‰æ¨¡æ¿åˆ›å»ºä¸¤ä¸ªâ€œ VKontakteâ€åŠ¨æ€é‡å®šå‘æ ‡ç­¾ï¼špageviewå’ŒaddToCartã€‚ <br><br><a name="8"></a><h3> æµè§ˆé‡ </h3><br> æˆ‘ä»¬å°†è¿›å…¥å¿…è¦çš„GTMå®¹å™¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œç„¶ååœ¨â€œè‡ªå®šä¹‰â€éƒ¨åˆ†ä¸­é€‰æ‹©æ ‡ç­¾ç±»å‹VK Pixelï¼š <br><br><img src="https://habrastorage.org/webt/gd/s-/fi/gds-fi0tqxxcmfkkccsi8trowq4.png"><br><br> å¡«å†™æ ‡ç­¾åç§°ï¼Œé€‰æ‹©è¦è·Ÿè¸ªçš„äº‹ä»¶ï¼Œé€‰æ‹©â€œå‘½ä¸­â€ï¼ˆè¿™æ˜¯æ ‡å‡†çš„ç½‘é¡µæµè§ˆé‡ï¼‰ï¼Œåœ¨â€œåƒç´ IDâ€å­—æ®µä¸­ï¼Œå°†æ•°æ®å‘é€åˆ°çš„ä¸¤ä¸ªåƒç´ çš„IDï¼Œç„¶åè®¾ç½®â€œæ‰€æœ‰é¡µé¢â€è§¦å‘å™¨ï¼š <br><br><img src="https://habrastorage.org/webt/vr/op/-0/vrop-0cjfqndkh35qnbtdsoxpc4.png"><br><br> ä¿å­˜åˆ›å»ºçš„æ ‡ç­¾ã€‚ <br><br><a name="9"></a><h3> åŠ å…¥è´­ç‰©è½¦ </h3><br> ä¸ºå°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦çš„äº‹ä»¶åˆ›å»ºæ ‡ç­¾æ¯”ç‚¹å‡»æ ‡ç­¾è¦å¤æ‚ä¸€äº›ã€‚ <br><br> é¦–å…ˆï¼Œæ‚¨éœ€è¦è½¬ç§»æ·»åŠ åˆ°è´­ç‰©ç¯®ä¸­çš„è´§ç‰©ã€‚ æ­£å¦‚æˆ‘åœ¨ä¸Šæ–‡æ‰€è¿°ï¼Œé€šè¿‡åœ¨ç½‘ç«™ä¸Šé…ç½®Googleçš„é«˜çº§ç”µå­å•†åŠ¡ï¼Œè¿™æ˜¯æœ‰å¯èƒ½çš„ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº§å“æ•°æ®å–è‡ªdataLayerã€‚ <br><br> ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨GTMä¸­åˆ›å»ºdataLayerå˜é‡ï¼Œè¯¥å˜é‡å°†å­˜å‚¨addToCartäº‹ä»¶çš„ç”µå­å•†åŠ¡å¯¹è±¡ã€‚ å˜é‡è®¾ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><img src="https://habrastorage.org/webt/ko/r5/gu/kor5gumudjjzs9groemuo7nepco.png"><br><br> å…¶æ¬¡ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œè¯¥è§¦å‘å™¨å°†åœ¨ç”µå­å•†åŠ¡addToCartäº‹ä»¶å‘ç”Ÿæ—¶æ¿€æ´»æ ‡ç­¾ï¼ˆå½“addToCartäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåœ¨æ¨å…¥dataLayeræ—¶ï¼Œè§¦å‘å™¨å°†æ¿€æ´»æ ‡ç­¾ï¼‰ï¼š <br><br><img src="https://habrastorage.org/webt/og/xl/lt/ogxlltp_4_spurvq8fesqg3uy0m.png"><br><br> åœ¨ä½¿ç”¨ç”µå­å•†åŠ¡å¯¹è±¡å’Œè§¦å‘å™¨åˆ›å»ºå˜é‡åï¼Œæ‚¨å¯ä»¥å¼€å§‹åˆ›å»ºä»£ç ï¼š <br><br><img src="https://habrastorage.org/webt/dp/qg/zq/dpqgzqb27rcdydnjeen5fftp6ba.png"><br><br> ä¸ºäº†ï¼š <br><br><ol><li> ä½œä¸ºè·Ÿè¸ªäº‹ä»¶ï¼Œé€‰æ‹©â€œæ·»åŠ åˆ°è´­ç‰©è½¦â€ã€‚ </li><li> æˆ‘ä»¬å¡«å†™ä¸¤ä¸ªåƒç´ çš„é€—å·åˆ†éš”IDï¼Œå¿…é¡»å°†æ•°æ®ä¼ è¾“åˆ°å…¶ä¸­ã€‚ </li><li> è®¾ç½®å¤é€‰æ¡†â€œä½¿ç”¨å¤šä¸ªä»·æ ¼è¡¨â€ï¼šåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå¯¹äºè«æ–¯ç§‘å’Œåœ£å½¼å¾—å ¡ï¼Œå¿…é¡»ä½¿ç”¨ä¸åŒçš„ä»·æ ¼è¡¨ã€‚ </li><li> ç”¨ä»·æ ¼è¡¨å¡«å†™è¡¨æ ¼ã€‚ </li><li> è®¾ç½®å¤é€‰æ¡†â€œä½¿ç”¨ç”µå­å•†åŠ¡è½¬ç§»äº§å“å’Œå‚æ•°â€ã€‚ </li><li> åœ¨æ­¤äº‹ä»¶çš„ç”µå­å•†åŠ¡å¯¹è±¡ä¸­ï¼ŒæŒ‡å®šå…ˆå‰åˆ›å»ºçš„å˜é‡ã€‚ </li><li> æˆ‘ä»¬ä¸ºå—ç›‘æ§äº‹ä»¶è®¾ç½®è§¦å‘å™¨ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸ºAddToCartã€‚ </li><li> ä¿å­˜ã€‚ </li></ol><br><a name="10"></a><h3> é‡‡çŸ¿æµ‹è¯• </h3><br> è¦æ£€æŸ¥VKontakteä¸ŠåŠ¨æ€é‡å®šå‘çš„åƒç´ å€¼ï¼Œæ‚¨éœ€è¦åœ¨GTMä¸­æ¿€æ´»é¢„è§ˆæ¨¡å¼ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™å¹¶åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰“å¼€â€œç½‘ç»œâ€éƒ¨åˆ†ï¼Œç„¶ååœ¨â€œè¿‡æ»¤å™¨â€å­—æ®µä¸­è¾“å…¥â€œ rtrgâ€ï¼š <br><img src="https://habrastorage.org/webt/ci/m9/z8/cim9z824mbc9dfvdz-4425fe02w.png"><br><br> ä¹‹åï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œå¹¶ä¸”åº”è¯¥æœ‰ä¸¤ä¸ªè¯·æ±‚-ä»¥ä¸¤ä¸ªåƒç´ å‘é€çš„Hitäº‹ä»¶ï¼š <br><br><img src="https://habrastorage.org/webt/o0/5x/80/o05x80jeypiwcogusca_zgsnaju.png"><br><br> çŠ¶æ€200è¡¨ç¤ºæœåŠ¡å™¨å·²æˆåŠŸå‘é€å’Œæ¥æ”¶è¯·æ±‚ã€‚ <br><br> åŒæ ·åœ¨â€œé¢„è§ˆGTMâ€çª—å£ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºçš„æ ‡è®°å¯¹äºâ€œé¡µé¢æŸ¥çœ‹â€äº‹ä»¶æ­£å¸¸å·¥ä½œã€‚ <br><br> è¦æ£€æŸ¥â€œæ·»åŠ åˆ°è´­ç‰©è½¦â€äº‹ä»¶ï¼Œè¯·å°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ï¼Œåœ¨æ§åˆ¶å°ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸¤ä¸ªè¯·æ±‚ï¼š <br><br><img src="https://habrastorage.org/webt/wt/jm/-k/wtjm-k50mmapqa1xtyva_yd3wcc.png"><br><br> åœ¨â€œé¢„è§ˆGTMâ€çª—å£ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç¬¬äºŒä¸ªæ ‡ç­¾æˆåŠŸè¿è¡Œã€‚ æ¥è‡ªdataLayerçš„äº§å“æ•°æ®è¢«æ­£ç¡®æå–å¹¶å¤„ç†ï¼Œæ­£ç¡®çš„ä»·æ ¼è¡¨ä¹Ÿè¢«æ›¿æ¢ã€‚ <br><br> å¯¹äºç¬¬äºŒä¸ªä¸»æœºï¼Œä»·æ ¼è¡¨ä¹Ÿå¯ä»¥æ­£ç¡®æ›¿æ¢ï¼š <br><br><img src="https://habrastorage.org/webt/n3/de/h3/n3deh30jep61h2kv9zefwruu8cy.png"><br><br> å…¶ä»–äº‹ä»¶çš„æ ‡ç­¾ä»¥ç›¸åŒçš„æ–¹å¼é…ç½®å’Œæ£€æŸ¥ã€‚ <br><br><a name="11"></a><h2> ç»“è®º </h2><br> è‡ªå®šä¹‰æ¨¡æ¿æ­£åœ¨æ”¹å˜ä½¿ç”¨GTMçš„ç†Ÿæ‚‰èŒƒä¾‹ã€‚ æ¯ä¸ªäººéƒ½ä¹ æƒ¯äº†HTMLæ ‡ç­¾å’ŒJSå˜é‡ï¼Œä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ <br><br> ä¸€æ¬¡åˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„è‡ªå®šä¹‰æ¨¡æ¿å°±è¶³å¤Ÿäº†ï¼Œç„¶åç†Ÿæ‚‰GTMçš„ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚ <br><br> é‰´äºå¯ä»¥å…±äº«åˆ›å»ºçš„æ¨¡æ¿çš„åŠŸèƒ½ï¼Œæˆ‘è®¤ä¸ºå®ƒä»¬åº”è¯¥åœ¨ç”¨æˆ·ä¸­è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ <br><br> æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸‹è½½</a>æˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­ç ”ç©¶è¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a> VKontakte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‡ªå®šä¹‰</a>åŠ¨æ€é‡å®šå‘åƒç´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¨¡æ¿</a> ã€‚ <br><br> è¦å¯¼å…¥æ¨¡æ¿ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰æ¨¡æ¿ï¼Œç„¶åä»èœå•ä¸­é€‰æ‹©å¯¼å…¥ï¼š <br><br><img src="https://habrastorage.org/webt/mx/nn/jc/mxnnjc0419poxmshokabjcgeoye.png"><br><br>  <i>æˆ‘ä¸ºppc.worldå‡†å¤‡çš„ææ–™</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458788/">https://habr.com/ru/post/zh-CN458788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458774/index.html">åŠŸèƒ½æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN458778/index.html">Satellite 6.5æŠ¥å‘Šå¼•æ“ï¼šä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</a></li>
<li><a href="../zh-CN458782/index.html">é€šè¿‡ç°ä»£æ‰‹æ®µå°†ZX Spectrumçš„ç¨‹åºæ”¹ç¼–ä¸ºTR-DOSã€‚ ç¬¬ä¸‰éƒ¨åˆ†</a></li>
<li><a href="../zh-CN458784/index.html">ä»Altium Designeråˆ°PADS Professionalå¹¿æ’­é¡¹ç›®å’Œåº“</a></li>
<li><a href="../zh-CN458786/index.html">è§†é¢‘æ¸¸æˆç®¡ç†å‘˜é€æ­¥ä¿æŒæ¸¸æˆæ–‡åŒ–</a></li>
<li><a href="../zh-CN458790/index.html">CatBoostç®€ä»‹ã€‚ YandexæŠ¥å‘Š</a></li>
<li><a href="../zh-CN458792/index.html">â€œç–²å€¦â€çš„å‘˜å·¥ï¼šæœ‰æ²¡æœ‰å‡ºè·¯ï¼Ÿ</a></li>
<li><a href="../zh-CN458794/index.html">7æœˆ18æ—¥åœ¨Redmadrobotä¸¾è¡Œçš„ä¸šåŠ¡åˆ†æå¸ˆä¼šè®®</a></li>
<li><a href="../zh-CN458796/index.html">å¦‚ä½•ä¸ºç¹é‡çš„å·¥ä½œé‡åšå¥½ç«™ç‚¹å‡†å¤‡ï¼š5ä¸ªå®ç”¨æŠ€å·§å’Œæœ‰ç”¨å·¥å…·</a></li>
<li><a href="../zh-CN458798/index.html">è¥å…»æœºå™¨äººæˆ–æˆ‘æƒ³å¦‚ä½•ä»å¥èº«æ•™ç»ƒé‚£é‡Œæ‹¿é¢åŒ…</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>