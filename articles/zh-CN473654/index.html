<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ƒ ğŸ´ ğŸ–ï¸ PHP Composerï¼šè½»æ¾è§£å†³ä¾èµ–å…³ç³» ğŸ•·ï¸ ğŸ”§ ğŸ•³ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½ ä»¬ä¸­è®¸å¤šäººå¯èƒ½é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼Œå³æ‚¨ä½¿ç”¨çš„åº“æˆ–æ¡†æ¶ä¸­å­˜åœ¨é”™è¯¯æˆ–æ²¡æœ‰å¿…è¦çš„åŠŸèƒ½ã€‚ å‡è®¾æ‚¨ä¸å¤ªæ‡’æƒ°å¹¶å½¢æˆäº†è¯·æ±‚è¯·æ±‚ã€‚ ä½†æ˜¯ä»–ä»¬ä¸ä¼šç«‹å³æ¥å—å®ƒï¼Œå¹¶ä¸”è¯¥äº§å“çš„ä¸‹ä¸€æ¬¡å‘å¸ƒé€šå¸¸å¯èƒ½ä¼šåœ¨ä¸€å¹´å†…å®Œæˆã€‚ 





 å¦‚æœæ‚¨è¿«åˆ‡éœ€è¦å¯¹äº§å“è¿›è¡Œæ›´æ­£ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨åº“æˆ–æ¡†æ¶çš„åˆ†æ”¯ã€‚ ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP Composerï¼šè½»æ¾è§£å†³ä¾èµ–å…³ç³»</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/473654/"><p> ä½ ä»¬ä¸­è®¸å¤šäººå¯èƒ½é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼Œå³æ‚¨ä½¿ç”¨çš„åº“æˆ–æ¡†æ¶ä¸­å­˜åœ¨é”™è¯¯æˆ–æ²¡æœ‰å¿…è¦çš„åŠŸèƒ½ã€‚ å‡è®¾æ‚¨ä¸å¤ªæ‡’æƒ°å¹¶å½¢æˆäº†è¯·æ±‚è¯·æ±‚ã€‚ ä½†æ˜¯ä»–ä»¬ä¸ä¼šç«‹å³æ¥å—å®ƒï¼Œå¹¶ä¸”è¯¥äº§å“çš„ä¸‹ä¸€æ¬¡å‘å¸ƒé€šå¸¸å¯èƒ½ä¼šåœ¨ä¸€å¹´å†…å®Œæˆã€‚ </p><br><p><img src="https://habrastorage.org/webt/jv/ys/9h/jvys9h_dh2zmefozo_xhrosiipo.jpeg" alt="PHP Composerï¼šè½»æ¾è§£å†³ä¾èµ–å…³ç³»"></p><br><p> å¦‚æœæ‚¨è¿«åˆ‡éœ€è¦å¯¹äº§å“è¿›è¡Œæ›´æ­£ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨åº“æˆ–æ¡†æ¶çš„åˆ†æ”¯ã€‚ ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äº‹æƒ…éƒ½ç®€å•ã€‚ ä½¿ç”¨ç»§æ‰¿æ¥è¦†ç›–éœ€è¦æ›´æ”¹çš„åŠŸèƒ½å¹¶ä¸æ€»æ˜¯å¯èƒ½çš„ï¼Œå¹¶ä¸”é€šå¸¸éœ€è¦è¿›è¡Œé‡å¤§æ›´æ”¹ã€‚ å¯ä»¥ä¿®è¡¥ä¾èµ–é¡¹çš„Composeræ’ä»¶å¯åŠ©æ‚¨ä¸€è‡‚ä¹‹åŠ›ã€‚ </p><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†æ›´å¤šåœ°è®¨è®ºä¸ºä»€ä¹ˆforkä¼šå¸¦æ¥ä¸ä¾¿ï¼Œå¹¶ä¸”è¿˜å°†è€ƒè™‘Composerçš„ä¸¤ä¸ªç”¨äºä¾èµ–é¡¹ä¿®è¡¥çš„æ’ä»¶ï¼šå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ï¼Œå¦‚ä½•ä½¿ç”¨å®ƒä»¬ä»¥åŠå®ƒä»¬çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆã€‚ å¦‚æœæ‚¨é‡åˆ°ç±»ä¼¼çš„é—®é¢˜æˆ–åªæ˜¯æƒ³çŸ¥é“ï¼Œæ¬¢è¿ä¸æˆ‘ä»¬è”ç³»ã€‚ <a name="habracut"></a></p><br><p>é€šè¿‡ç¤ºä¾‹æœ€æ–¹ä¾¿åœ°è€ƒè™‘è¯¥é—®é¢˜ã€‚ å‡è®¾æˆ‘ä»¬è¦æ›´æ”¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PHP Code Coverage</a>åº“ä¸­çš„æŸäº›å†…å®¹ï¼Œè¯¥åº“åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PHPUnit</a>æµ‹è¯•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¡†æ¶ä¸­</a>ç”¨äºæµ‹é‡æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ã€‚ å‡è®¾æˆ‘ä»¬è¦åœ¨7.0.8ç‰ˆï¼ˆ <code>myFix.patch</code>æ–‡ä»¶ï¼‰ä¸­ä¿®å¤ç±»ä¼¼çš„é—®é¢˜ï¼š </p><br><pre> <code class="diff hljs">diff --git a/src/CodeCoverage.php b/src/CodeCoverage.php index 2c92ae2..514171e 100644 --- a/src/CodeCoverage.php +++ b/src/CodeCoverage.php @@ -190,6 +190,7 @@ public function filter(): Filter */ public function getData(bool $raw = false): array { + // for example some changes here if (!$raw &amp;&amp; $this-&gt;addUncoveredFilesFromWhitelist) { $this-&gt;addUncoveredFilesFromWhitelist(); }</code> </pre> <br><p> è®©æˆ‘ä»¬åˆ›å»ºç¤ºä¾‹åº“ã€‚ è®©å®ƒæˆä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">php-composer-patches-example</a> ã€‚ è¿™é‡Œçš„ç»†èŠ‚ä¸æ˜¯å¾ˆé‡è¦ï¼Œä½†æ˜¯å¦‚æœæ‚¨å†³å®šçœ‹ä¸€ä¸‹åº“æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¼šå°†æ§åˆ¶å°è¾“å‡ºç½®äºæ‰°æµå™¨ä¸‹æ–¹ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">éšè—æ–‡å­—</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">$ git clone git@github.com:mougrim/php-composer-patches-example.git   Â«php-composer-patches-exampleÂ»â€¦ remote: Enumerating objects: 3, done. remote: Counting objects: 100% (3/3), done. remote: Compressing objects: 100% (2/2), done. remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0  : 100% (3/3), . $ cd php-composer-patches-example/ $ $ composer.phar init --name=mougrim/php-composer-patches-example --description="It's an example for article with using forks and patches for changing dependencies" --author='Mougrim &lt;rinat@mougrim.ru&gt;' --type=library --require='phpunit/phpunit:^8.4.2' --license=MIT --homepage='https://github.com/mougrim/php-composer-patches-example' Welcome to the Composer config generator This command will guide you through creating your composer.json config. Package name (&lt;vendor&gt;/&lt;name&gt;) [mougrim/php-composer-patches-example]: Description [It's an example for article with using forks and patches for changing dependencies]: Author [Mougrim &lt;rinat@mougrim.ru&gt;, n to skip]: Minimum Stability []: Package Type (eg library, project, metapackage, composer-plugin) [library]: License [MIT]: Define your dependencies. Would you like to define your dev dependencies (require-dev) interactively [yes]? no { "name": "mougrim/php-composer-patches-example", "description": "It's an example for article with using forks and patches for changing dependencies", "type": "library", "homepage": "https://github.com/mougrim/php-composer-patches-example", "require": { "phpunit/phpunit": "^8.4.2" }, "license": "MIT", "authors": [ { "name": "Mougrim", "email": "rinat@mougrim.ru" } ] } Do you confirm generation [yes]? yes Would you like to install dependencies now [yes]? yes Loading composer repositories with package information Updating dependencies (including require-dev) Package operations: 29 installs, 0 updates, 0 removals - Installing sebastian/version (2.0.1): Loading from cache - Installing sebastian/type (1.1.3): Loading from cache - Installing sebastian/resource-operations (2.0.1): Loading from cache - Installing sebastian/recursion-context (3.0.0): Loading from cache - Installing sebastian/object-reflector (1.1.1): Loading from cache - Installing sebastian/object-enumerator (3.0.3): Loading from cache - Installing sebastian/global-state (3.0.0): Loading from cache - Installing sebastian/exporter (3.1.2): Loading from cache - Installing sebastian/environment (4.2.2): Loading from cache - Installing sebastian/diff (3.0.2): Loading from cache - Installing sebastian/comparator (3.0.2): Loading from cache - Installing phpunit/php-timer (2.1.2): Loading from cache - Installing phpunit/php-text-template (1.2.1): Loading from cache - Installing phpunit/php-file-iterator (2.0.2): Loading from cache - Installing theseer/tokenizer (1.1.3): Loading from cache - Installing sebastian/code-unit-reverse-lookup (1.0.1): Loading from cache - Installing phpunit/php-token-stream (3.1.1): Loading from cache - Installing phpunit/php-code-coverage (7.0.8): Loading from cache - Installing doctrine/instantiator (1.2.0): Loading from cache - Installing symfony/polyfill-ctype (v1.12.0): Loading from cache - Installing webmozart/assert (1.5.0): Loading from cache - Installing phpdocumentor/reflection-common (2.0.0): Loading from cache - Installing phpdocumentor/type-resolver (1.0.1): Loading from cache - Installing phpdocumentor/reflection-docblock (4.3.2): Loading from cache - Installing phpspec/prophecy (1.9.0): Loading from cache - Installing phar-io/version (2.0.1): Loading from cache - Installing phar-io/manifest (1.0.3): Loading from cache - Installing myclabs/deep-copy (1.9.3): Loading from cache - Installing phpunit/phpunit (8.4.2): Loading from cache sebastian/global-state suggests installing ext-uopz (*) phpunit/phpunit suggests installing phpunit/php-invoker (^2.0.0) phpunit/phpunit suggests installing ext-soap (*) Writing lock file Generating autoload files $ $ echo 'vendor/' &gt; .gitignore $ echo 'composer.lock' &gt;&gt; .gitignore $ git add .gitignore composer.json $ $ git commit --gpg-sign --message='Init composer' [master ce800ae] Init composer 2 files changed, 18 insertions(+) create mode 100644 .gitignore create mode 100644 composer.json $ git push origin master  : 4, . Delta compression using up to 4 threads.  : 100% (3/3), .  : 100% (4/4), 1.21 KiB | 1.21 MiB/s, . Total 4 (delta 0), reused 0 (delta 0) To github.com:mougrim/php-composer-patches-example.git f31c342..ce800ae master -&gt; master</code> </pre> </div></div><br><h2 id="chto-ne-tak-s-forkom-zavisimosti"> ä¸Šç˜¾çš„å‰å­æ€ä¹ˆäº† </h2><br><p> è®©æˆ‘ä»¬çœ‹çœ‹forkä¾èµ–æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ è®©æˆ‘ä»¬å°è¯•åˆ†å‰PHPä»£ç è¦†ç›–ç‡ã€‚ </p><br><ol><li> æˆ‘ä»¬è½¬åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubä¸Šçš„PHPä»£ç è¦†ç›–ç‡é¡µé¢</a> ã€‚ </li><li> æŒ‰ä¸‹å‰å‰æŒ‰é’® <img src="https://habrastorage.org/webt/qj/ff/ta/qjfftaa4kurvcfu91mlrvr2twie.png" alt="å‰å­æŒ‰é’®">  ï¼ˆæ³¨æ„ï¼šæ‚¨å°†æ‹¥æœ‰å‰å­ï¼Œå°†mougrimæ›¿æ¢ä¸ºæ‚¨çš„ç”¨æˆ·åï¼‰ã€‚ </li><li> å…‹éš†å‰å­ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git@github.com:mougrim/php-code-coverage.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-code-coverage</code> </pre> </li><li> è½¬åˆ°æˆ‘ä»¬è¦ä¿®è¡¥çš„ç‰ˆæœ¬ï¼š <br><pre> <code class="bash hljs">git checkout 7.0.8</code> </pre> </li><li> åˆ›å»ºä¸€ä¸ªåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼š <br><pre> <code class="bash hljs">git checkout -b 7.0.8-myFix</code> </pre> </li><li> æˆ‘ä»¬è¿›è¡Œå¿…è¦çš„æ›´æ”¹ï¼Œæäº¤ï¼Œæ¨é€ï¼š <br><pre> <code class="bash hljs">git apply ../myFix.patch git add src/CodeCoverage.php git commit --gpg-sign --message=<span class="hljs-string"><span class="hljs-string">'My fix'</span></span> git push -u origin 7.0.8-myFix</code> </pre> </li><li> åœ¨æˆ‘ä»¬çš„åº“çš„composer.jsonä¸­æ·»åŠ forkä½œä¸ºå­˜å‚¨åº“ï¼ˆè¿™æ˜¯å¿…éœ€çš„ï¼Œå› æ­¤åœ¨è¿æ¥<code>phpunit/php-code-coverage</code>è½¯ä»¶åŒ…æ—¶ï¼Œä¸æ˜¯è¿æ¥åŸå§‹è½¯ä»¶åŒ…ï¼Œè€Œæ˜¯è¿æ¥forkï¼‰ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-composer-patches-example git checkout -b useFork composer.phar config repositories.phpunit/php-code-coverage vcs https://github.com/mougrim/php-code-coverage.git</code> </pre> </li><li> å°†ä¾èµ–é¡¹çš„ç‰ˆæœ¬æ›´æ”¹ä¸ºæ—©åˆé¤ï¼š <br><pre> <code class="bash hljs">composer.phar require phpunit/php-code-coverage <span class="hljs-string"><span class="hljs-string">'dev-7.0.8-myFix'</span></span></code> </pre> </li></ol><br><p> ä½†æ˜¯å®é™…ä¸Šå®ƒä»ç„¶æ›´åŠ å¤æ‚ï¼šComposerè¯´å®‰è£…æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸º<code>phpunit/phpunit</code>éœ€è¦<code>phpunit/php-code-coverage</code>ç‰ˆæœ¬<code>^7.0.7</code> ï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®åˆ™éœ€è¦<code>dev-7.0.8-myFix</code> ï¼š </p><br><pre> <code class="plaintext hljs">$ composer.phar require phpunit/php-code-coverage 'dev-7.0.8-myFix' ./composer.json has been updated Loading composer repositories with package information Updating dependencies (including require-dev) Your requirements could not be resolved to an installable set of packages. Problem 1 - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev]. - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev]. - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev]. - Can only install one of: phpunit/php-code-coverage[7.0.x-dev, dev-7.0.8-myFix]. - Installation request for phpunit/php-code-coverage dev-7.0.8-myFix -&gt; satisfiable by phpunit/php-code-coverage[dev-7.0.8-myFix]. - Installation request for phpunit/phpunit ^8.4.2 -&gt; satisfiable by phpunit/phpunit[8.4.2]. Installation failed, reverting ./composer.json to its original content.</code> </pre> <br><p> æ€ä¹ˆåŠå‘¢ï¼Ÿ æœ‰å››ä¸ªé€‰é¡¹ï¼š </p><br><ol><li> é™¤äº†<code>phpunit/php-code-coverage</code>åˆ†æ”¯å¤–ï¼Œè¿˜åˆ†æ”¯PHPUnitå¹¶ä¸ºä¾èµ–é¡¹<code>phpunit/php-code-coverage</code>ç¼–å†™ç‰ˆæœ¬<code>dev-7.0.8-myFix</code> ã€‚ å°±æ”¯æŒè€Œè¨€ï¼Œæ­¤è·¯å¾„ç›¸å½“å¤æ‚ï¼Œå¹¶ä¸”è¶Šå¤æ‚ï¼Œåˆ™ä¾èµ–<code>phpunit/php-code-coverage</code>åº“å°±è¶Šå¤šã€‚ </li><li> è¿æ¥<code>phpunit/php-code-coverage</code>æ—¶ä½¿ç”¨<a href="">åˆ«å</a> ã€‚ ä½†æ˜¯åˆ«åä¸ä¼šä»ä¾èµ–é¡¹ä¸­æå–ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å°†å§‹ç»ˆéœ€è¦æ‰‹åŠ¨ç¼–å†™ã€‚ </li><li> åœ¨æ‚¨çš„forkä¸­<code>phpunit/php-code-coverage</code> ï¼Œä»¥ä¾¿<code>7.0.8</code>æ ‡è®°<code>7.0.8</code>å¦ä¸€ä¸ªæäº¤ã€‚ è‡³å°‘è¿™ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯æœ€å¤§ç¨‹åº¦åœ°-åœ¨Gitä¸­ï¼Œä½¿ç”¨æ ‡è®°å¼•ç”¨ä¸åŒè¿œç¨‹å­˜å‚¨åº“ä¸­å…·æœ‰ç›¸åŒåç§°çš„ä¸åŒæäº¤çš„æ ‡è®°æ˜¯ä¸æ–¹ä¾¿çš„ã€‚ </li><li> åœ¨æ‚¨çš„æ´¾ç”Ÿ<code>phpunit/php-code-coverage</code>ä½¿ç”¨alphaå‘è¡Œç‰ˆæ ‡ç­¾ï¼Œä¾‹å¦‚<code>7.0.8-a+myFix</code> ï¼ˆå¯èƒ½ä¸æºåº“çš„alphaå‘è¡Œç‰ˆå‘ç”Ÿå†²çªï¼‰ã€‚ </li></ol><br><p> æ‰€æœ‰é€‰é¡¹éƒ½æœ‰å…¶ç¼ºç‚¹ã€‚ æˆ‘ä¹Ÿå°è¯•ä½¿ç”¨<code>7.0.8.1</code>ç±»çš„æ ‡ç­¾ï¼Œä½†Composerä¸æ¥å—æ­¤ç±»æ ‡ç­¾ã€‚ </p><br><p> ç¬¬äºŒç§é€‰æ‹©å’Œç¬¬å››ç§é€‰æ‹©ä¼¼ä¹é‚ªæ¶ç¨‹åº¦è¾ƒå°ã€‚ ç”±äºå®ƒä»¬çš„åŠ¨ä½œæ•°é‡å¤§è‡´ç›¸åŒï¼Œå› æ­¤åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»…è€ƒè™‘å…¶ä¸­ä¹‹ä¸€-ç¬¬å››ã€‚ åˆ›å»ºä¸€ä¸ªalphaå‘å¸ƒæ ‡ç­¾ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-code-coverage git tag 7.0.8<span class="hljs-_"><span class="hljs-_">-a</span></span>+myFix git push origin 7.0.8<span class="hljs-_"><span class="hljs-_">-a</span></span>+myFix <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-composer-patches-example composer.phar require phpunit/php-code-coverage <span class="hljs-string"><span class="hljs-string">'7.0.8-a+myFix'</span></span> git add composer.json git commit --gpg-sign --message=<span class="hljs-string"><span class="hljs-string">'Use fork'</span></span> git push -u origin useFork</code> </pre> <br><p> å‡è®¾æˆ‘ä»¬è¦åœ¨ä¾èµ–äº<code>phpunit/phpunit</code>çš„é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬çš„åº“<code>mougrim/php-composer-patches-example</code> ã€‚ åœ¨è¿™é‡Œï¼Œä¸èƒ½æ²¡æœ‰è¨æ»¡<code>phpunit/php-code-coverage</code> ï¼Œæ‚¨å°†ä¸å¾—ä¸å†æ¬¡ä¸º<code>phpunit/php-code-coverage</code>æŒ‡å®šå­˜å‚¨åº“<code>https://github.com/mougrim/php-code-coverage.git</code> ï¼Œå¹¶æ˜ç¡®æŒ‡å‡ºå¯¹<code>phpunit/php-code-coverage</code>çš„ä¾èµ–æ€§ç‰ˆæœ¬<code>7.0.8-a+myFix</code> ï¼ˆå¦åˆ™å®‰è£…å°†ä¸ä¼šæˆåŠŸï¼‰ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ mkdir php-project <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-project/ composer.phar require phpunit/phpunit <span class="hljs-string"><span class="hljs-string">'^8.4.2'</span></span> composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git composer.phar config repositories.phpunit/php-code-coverage vcs https://github.com/mougrim/php-code-coverage.git composer.phar require phpunit/php-code-coverage 7.0.8<span class="hljs-_"><span class="hljs-_">-a</span></span>+myFix composer.phar require mougrim/php-composer-patches-example dev-useFork</code> </pre> <br><p> è¯·æ³¨æ„ï¼Œphp-composer-patches-exampleä½œä¸ºå­˜å‚¨åº“è¿æ¥ï¼Œå› ä¸ºè¯¥å­˜å‚¨åº“åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå› æ­¤å°šæœªæ·»åŠ åˆ°Packagistä¸­ã€‚ æ‚¨çš„æƒ…å†µä¸‹ï¼Œå¾ˆå¯èƒ½ä¼šè·³è¿‡æ­¤æ­¥éª¤ã€‚ </p><br><p> æ€»ç»“ä¸€ä¸‹å‰å­çš„ä½¿ç”¨ã€‚ </p><br><p> è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼š </p><br><ul><li> æ— éœ€ä¸ºComposerå®‰è£…æ’ä»¶ã€‚ </li></ul><br><p> è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹ï¼š </p><br><ul><li> å¦‚æœä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>roave/security-advisories</code></a> ï¼Œåˆ™ä¸ä¼šçœ‹åˆ°æœ‰å…³æ‚¨åˆ†å‰å’Œä¿®æ”¹çš„ä¾èµ–é¡¹ç‰ˆæœ¬åŒ…å«æ¼æ´çš„ä¿¡æ¯ï¼› </li><li> å½“æ–°ç‰ˆæœ¬çš„ä¾èµ–å…³ç³»å‡ºç°æ—¶ï¼Œå°†ä¸å¾—ä¸é‡æ–°é‡å¤forkçš„æ•…äº‹ï¼› </li><li> å¦‚æœè¦ä¿®å¤ä¾èµ–é¡¹ä¾èµ–å…³ç³»ï¼ˆå¦‚æ‰€è€ƒè™‘çš„ç¤ºä¾‹ä¸­æ‰€ç¤ºï¼‰ï¼Œåˆ™<code>dev-*</code>ä¸é€‚ç”¨äºè¯¥ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»ä½¿ç”¨ç‰ˆæœ¬è¿›è¡Œè¨æ»¡åŒ–æˆ–ä¸ºå†²çªçš„ä¾èµ–é¡¹è¿›è¡Œåˆ†å‰ï¼› </li><li> å¦‚æœæœ‰ä¾èµ–äºåº“çš„é¡¹ç›®ï¼Œåˆ™ä¸å¿…ä»¥æœ€æ˜æ˜¾ï¼Œæœ€æ–¹ä¾¿çš„æ–¹å¼åœ¨é¡¹ç›®ä¸­å®‰è£…åº“ï¼› </li><li> å¦‚æœæœ‰ä¸€äº›é¡¹ç›®ä¾èµ–äºæ‚¨çš„åº“ï¼Œåˆ™å¯¹äºå®ƒä»¬ï¼Œ <code>phpunit/php-code-coverage</code>ç‰ˆæœ¬å°†ä¸¥æ ¼å›ºå®šï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¯ä»¥æ¥å—çš„ï¼› </li><li> æ­¤å¤–ï¼Œå¦‚æœä¸Šè¿°å‡ ç‚¹çš„é¡¹ç›®ç”±äºå…¶ä»–åŸå› å·²ç»åˆ†å‰äº†PHPä»£ç è¦†ç›–ç‡ï¼Œé‚£ä¹ˆä¸€åˆ‡å°†å˜å¾—æ›´åŠ å¤æ‚ã€‚ </li></ul><br><p> æˆ‘è®¤ä¸ºæ‚¨å·²ç»æ„è¯†åˆ°åˆ†å‰ä¸Šç˜¾ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ </p><br><h2 id="ispolzovanie-cweaganscomposer-patches"> ä½¿ç”¨Cweagans /ä½œæ›²å®¶è¡¥ä¸ </h2><br><p> æˆ‘å†æ¬¡é‡åˆ°äº†ä½¿ç”¨å‰å­çš„ç—›è‹¦å’Œç—›è‹¦ï¼Œæˆ‘é‡åˆ°äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PHP Digest No. 101ä¸­çš„</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>cweagans/composer-patches</code></a> ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">pronskiyæœ‰ä¸€ä¸ª</a>æœ‰ç”¨çš„åšå®¢ï¼Œæˆ‘å»ºè®®è®¢é˜…ï¼‰ã€‚ è¿™æ˜¯omposerçš„æ’ä»¶ï¼Œå®ƒä½¿æ‚¨å¯ä»¥å°†è¡¥ä¸åº”ç”¨äºä¾èµ–é¡¹ã€‚ é˜…è¯»è¯´æ˜åï¼Œæˆ‘è®¤ä¸ºè¿™æ­£æ˜¯æ‚¨æ‰€éœ€è¦çš„ã€‚ </p><br><p> å¦‚ä½•ä½¿ç”¨cweagans / composer-patchesï¼š </p><br><ol><li> å…‹éš†PHPä»£ç è¦†ç›–ç‡ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ rm -rf php-code-coverage git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git@github.com:sebastianbergmann/php-code-coverage.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-code-coverage</code> </pre> </li><li> è½¬åˆ°æˆ‘ä»¬è¦ä¿®è¡¥çš„ç‰ˆæœ¬ï¼š <br><pre> <code class="bash hljs">git checkout 7.0.8</code> </pre> </li><li> æˆ‘ä»¬è¿›è¡Œå¿…è¦çš„æ›´æ”¹ã€‚ </li><li> åˆ›å»ºè¡¥ä¸ï¼š <br><pre> <code class="bash hljs">mkdir -p ../php-composer-patches-example/patches/phpunit/php-code-coverage git diff HEAD &gt; ../php-composer-patches-example/patches/phpunit/php-code-coverage/myFix.patch</code> </pre> </li><li> åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿æ¥<code>cweagans/composer-patches</code> ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-composer-patches-example git checkout master composer.phar update git checkout -b cweagansComposerPatches composer.phar require cweagans/composer-patches <span class="hljs-string"><span class="hljs-string">'^1.6.7'</span></span></code> </pre> </li><li> è¦é…ç½®<code>cweagans/composer-patches</code>è¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code>composer.json</code> ï¼ˆæ‚¨å¯ä»¥ä¸ºä¸€ä¸ªè½¯ä»¶åŒ…æŒ‡å®šå¤šä¸ªè¡¥ä¸ï¼‰ï¼š <br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"config"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"preferred-install"</span></span>: <span class="hljs-string"><span class="hljs-string">"source"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"extra"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"patches"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"phpunit/php-code-coverage"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"My fix description"</span></span>: <span class="hljs-string"><span class="hljs-string">"patches/phpunit/php-code-coverage/myFix.patch"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"enable-patching"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> </li><li> æ›´æ–°ä¾èµ–é¡¹ï¼š <br><pre> <code class="bash hljs">composer.phar update</code> </pre> </li><li> å¦‚æœå‡ºäº†ç‚¹é—®é¢˜ï¼Œå¯ä»¥åœ¨ä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºä¸­çœ‹åˆ°ï¼Œä½†ä»¥é˜²ä¸‡ä¸€ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬çš„æ›´æ”¹æ˜¯å¦å·²åº”ç”¨ï¼š <br><pre> <code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php // for example some changes here</code> </pre> </li><li> æäº¤å¹¶æ¨é€ç»“æœï¼š <br><pre> <code class="bash hljs">git add composer.json patches/phpunit/php-code-coverage/myFix.patch git commit --gpg-sign --message=<span class="hljs-string"><span class="hljs-string">'Use cweagans/composer-patches'</span></span> git push -u origin cweagansComposerPatches</code> </pre> </li></ol><br><p> æˆ‘ä»¬ç¡®ä¿åœ¨é¡¹ç›®ä¸­å®‰è£…åº“æ—¶ï¼Œè¡¥ä¸ä¹Ÿå°†é€‚ç”¨ã€‚ </p><br><p> åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ rm -rf php-project mkdir php-project <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-project composer.phar require phpunit/phpunit <span class="hljs-string"><span class="hljs-string">'^8.4.2'</span></span></code> </pre> <br><p>  <code>composer.json</code>æ·»åŠ åˆ°<code>composer.json</code> ï¼š </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"extra"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enable-patching"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p> å®‰è£…<code>mougrim/php-composer-patches-example</code> ï¼š </p><br><pre> <code class="bash hljs">composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git composer.phar require mougrim/php-composer-patches-example dev-cweagansComposerPatches</code> </pre> <br><p> ä¼¼ä¹åœ¨è¿æ¥è½¯ä»¶åŒ…æ—¶åº”è¯¥å°è¯•åº”ç”¨è¡¥ä¸ï¼Œä½†æ²¡æœ‰ã€‚ <br> æˆ‘ä»¬å°†æ›´æ–°è½¯ä»¶åŒ…ï¼Œä»¥ä¾¿åº”ç”¨è¡¥ä¸ï¼Œä½†è¿™ä¸ä¼šå‘ç”Ÿï¼š </p><br><pre> <code class="plaintext hljs">$ composer.phar update Removing package phpunit/php-code-coverage so that it can be re-installed and re-patched. - Removing phpunit/php-code-coverage (7.0.8) Loading composer repositories with package information Updating dependencies (including require-dev) Package operations: 1 install, 0 updates, 0 removals No patches supplied. Gathering patches for dependencies. This might take a minute. - Installing phpunit/php-code-coverage (7.0.8): Loading from cache - Applying patches for phpunit/php-code-coverage patches/phpunit/php-code-coverage/myFix.patch (My fix description) Could not apply patch! Skipping. The error was: The "patches/phpunit/php-code-coverage/myFix.patch" file could not be downloaded: failed to open stream: No such file or directory Writing lock file Generating autoload files</code> </pre> <br><p> åœ¨é”™è¯¯è·Ÿè¸ªå™¨ä¸­ç¿»é˜…åï¼Œæˆ‘å‘ç°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¾èµ–é¡¹</a>é”™è¯¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœªè§£å†³åŸºäºæ–‡ä»¶çš„è¡¥ä¸</a> ã€‚ äº‹å®è¯æ˜ï¼Œæ‚¨å¿…é¡»åœ¨ä¿®è¡¥ç¨‹åºä¹‹å‰æŒ‡å®šURLï¼ˆè¿™æ„å‘³ç€ä»æŸå¤„ä¸‹è½½URLï¼‰ï¼Œæˆ–è€…åœ¨å®‰è£…äº†éœ€è¦ä¿®è¡¥ç¨‹åºçš„ä¾èµ–é¡¹çš„æ¯ä¸ªé¡¹ç›®ä¸­æ‰‹åŠ¨æŒ‡å®šä¿®è¡¥ç¨‹åºçš„è·¯å¾„ã€‚ </p><br><p> æ€»ç»“<code>cweagans/composer-patches</code> ã€‚ </p><br><p> è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼š </p><br><ul><li> è¯¥æ’ä»¶æœ‰ä¸€ä¸ªç¤¾åŒºï¼› </li><li>  <code>roave/security-advisories</code>å°†ä¸ä¼šåœæ­¢å·¥ä½œï¼› </li><li> å½“å‘å¸ƒæ–°ç‰ˆæœ¬çš„ä¾èµ–é¡¹æ—¶ï¼Œå¦‚æœæˆåŠŸåº”ç”¨äº†è¡¥ä¸ç¨‹åºï¼Œå°±è¶³ä»¥ç¡®ä¿ä¸€åˆ‡éƒ½å¯ä»¥ä¸æ–°ç‰ˆæœ¬ä¸€èµ·ä½¿ç”¨ï¼ˆå¯¹äºæ¬¡è¦ç‰ˆæœ¬ï¼Œå¾ˆæœ‰å¯èƒ½å®Œå…¨å¯ä»¥å•ç‹¬å·¥ä½œï¼Œå¯¹äºä¸»è¦ç‰ˆæœ¬ï¼Œä¹Ÿå¾ˆå¯èƒ½ä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œï¼‰; </li><li> å¦‚æœæŸäº›é¡¹ç›®ä¾èµ–äºæ‚¨çš„åº“ï¼Œåˆ™å¯¹äºå®ƒä»¬ï¼Œ <code>phpunit/php-code-coverage</code>å°†ä¸ä¼šä¸¥æ ¼å›ºå®šï¼› </li><li> è€Œä¸”ï¼Œåœ¨ä»¥ä¸Šæ®µè½çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„é¡¹ç›®å°†èƒ½å¤Ÿåœ¨PHP Code Coverageä¸­åº”ç”¨å…¶è¡¥ä¸ã€‚ </li></ul><br><p> ç¼ºç‚¹ï¼š </p><br><ul><li> è¿™æ˜¯Composerçš„æ’ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨æ›´æ–°Composeræ—¶å¯èƒ½ä¼šæŸåï¼› </li><li> å¿…é¡»æŒ‡å®š<code>enable-patching=true</code>ä»¥ä¾¿ä»ä¾èµ–é¡¹åº”ç”¨è¡¥ä¸ï¼› </li><li> ä¸»è¦é¡¹ç›®ç»´æŠ¤è€…æ²¡æœ‰å¤ªå¤šæ—¶é—´æ¥å¤„ç†å®ƒï¼Œå› æ­¤ï¼Œé€šå¸¸ï¼Œä»–æ¥å—è¯·æ±‚è¯·æ±‚ï¼Œä½†å¹¶æ²¡æœ‰ç‰¹åˆ«å¼€å‘é¡¹ç›®ï¼ˆä¾‹å¦‚ï¼Œä»–å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»»åŠ¡</a>çš„ç¬¬äºŒä¸ªç‰ˆæœ¬æœ‰æƒ³æ³•ï¼Œä½†ä¸‰å¹´åå‡ ä¹æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ï¼‰ï¼› </li><li> æœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŸºäºæ–‡ä»¶çš„è¡¥ä¸ä¸èƒ½åœ¨ä¾èµ–é¡¹</a>é”™è¯¯ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è§£å†³</a> ï¼Œè¿™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¾ˆä¸</a>æ–¹ä¾¿ï¼Œå¹¶ä¸”å·²ç»ç§¯å‹äº†ä¸‰å¹´äº†ã€‚ </li><li> æ‚¨ä¸èƒ½å¯¹ä¸åŒç‰ˆæœ¬çš„ä¾èµ–é¡¹ä½¿ç”¨ä¸åŒçš„è¡¥ä¸ã€‚ </li></ul><br><p> æœ€åä¸€ç‚¹å·²æˆä¸ºæˆ‘çš„éšœç¢ã€‚ é¦–å…ˆï¼Œæˆ‘æå‡ºäº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠŸèƒ½è¯·æ±‚</a> ã€‚ ç»´æŠ¤è€…å†™é“ï¼Œä»–ä¸æƒ³å°†æ­¤åŠŸèƒ½æ·»åŠ åˆ°ä¸»ä»£ç ä¸­ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ç¼–å†™æ’ä»¶ï¼ˆæ˜¯çš„ï¼Œæ˜¯Composeræ’ä»¶çš„æ’ä»¶ï¼‰ã€‚ ç¬¬äºŒç‰ˆçš„å‰æ™¯ä¸æ˜ç¡®ï¼Œæ‰€ä»¥æˆ‘å†³å®šå¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚ åœ¨å°æ¸…å•ä¸­ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°å°†å—æ”¯æŒçš„æ’ä»¶ã€‚ </p><br><p> æˆ‘ä¸æƒ³è¿›å…¥æ’ä»¶ä»£ç ï¼Œæ‰€ä»¥æˆ‘å†³å®šåˆ†å‰-å½“ç„¶ï¼Œæœ‰äººå·²ç»é‡åˆ°äº†é—®é¢˜å¹¶å·²è§£å†³ã€‚ </p><br><h2 id="ispolzovanie-vaimo-composer-patches"> ä½¿ç”¨Vaimo Composerä¿®è¡¥ç¨‹åº </h2><br><p> åœ¨å¤§å¤šæ•°è´§å‰ä¸­ï¼Œä¸åŸå§‹è´§å‰å®Œå…¨æ²¡æœ‰åŒºåˆ«ï¼ˆä¸ºä»€ä¹ˆå®ƒä»¬ç”šè‡³ä¼šè´§å‰ï¼Ÿï¼‰ã€‚ å‰çš„ä¸€éƒ¨åˆ†ç”¨äºè¯·æ±‚è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚å·²ä¸ä¸»åº“åˆå¹¶ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæœ‰è¶£çš„å€™é€‰äººæ­£åœ¨è§£å†³æˆ‘çš„é—®é¢˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-Vaimo Composer Patches</a> ã€‚ å½“æ—¶å®ƒä»ç„¶è¢«æ„é€ ä¸ºforkï¼Œä½†æ˜¯å®ƒçš„ç»´æŠ¤è€…ä¼¼ä¹å¹¶ä¸ä¼šæ‰§è¡Œæ‹‰å–è¯·æ±‚ã€‚ ä¾‹å¦‚ï¼Œé™¤å…¶ä»–å¤–ï¼Œä»–å·²ç»å°†è½¯ä»¶åŒ…åç§°æ›´æ”¹ä¸º<code>vaimo/composer-patches</code> ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼šé—®é¢˜è¢«ç¦ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æœ¬æ²¡æœ‰ä½œè€…çš„åé¦ˆã€‚ å¦å¤–ï¼Œè¯¥æ’ä»¶ä¹Ÿæœªæ‰˜ç®¡åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Packagistä¸Š</a> ã€‚ </p><br><p> å¦‚æ­¤å¥½çš„å‰å­ä¸åº”ä¸¢åœ¨å…¶ä»–æ— ç”¨çš„å‰å­ä¸­ã€‚ å› æ­¤ï¼Œæˆ‘è”ç³»äº†ä½œè€…ï¼Œè¦æ±‚å¯ç”¨é—®é¢˜å¹¶å°†ç¨‹åºåŒ…æ·»åŠ åˆ°Packagistã€‚ ç»è¿‡å°†è¿‘ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œä½œè€…å›ç­”å¹¶å®Œæˆäº†æ‰€æœ‰è¿™äº›å·¥ä½œã€‚  :) </p><br><p> ä½¿ç”¨<code>vaimo/composer-patches</code>ä¸ä½¿ç”¨å…ˆå‰çš„æ’ä»¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä¸ºä¸åŒçš„ç‰ˆæœ¬æŒ‡å®šä¸åŒçš„è¡¥ä¸ã€‚ </p><br><ol><li> æˆ‘ä»¬å›æ»šæˆ‘ä»¬çš„åº“â€‹â€‹ï¼ˆåˆ é™¤<code>vendor</code>æ–‡ä»¶å¤¹æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºæ’ä»¶<code>cweagans/composer-patches</code>å’Œ<code>vaimo/composer-patches</code>ä¸å¤ªå…¼å®¹ï¼‰ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-composer-patches-example git checkout master rm -rf vendor/ composer.phar update</code> </pre> </li><li> æˆ‘ä»¬æ‰§è¡Œä¸Šä¸€èŠ‚ä¸­çš„1-4ç‚¹ã€‚ </li><li> åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿æ¥<code>vaimo/composer-patches</code> ï¼š <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../php-composer-patches-example git checkout -b vaimoComposerPatches composer.phar require vaimo/composer-patches <span class="hljs-string"><span class="hljs-string">'^4.20.2'</span></span></code> </pre> </li><li> è¦é…ç½®<code>vaimo/composer-patches</code>è¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code>composer.json</code> ï¼ˆå¯åœ¨<a href="">æ­¤å¤„æŸ¥çœ‹</a>æ–‡æ¡£ï¼‰ï¼š <br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"extra"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"patches"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"phpunit/php-code-coverage"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"My fix description"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"&lt; 7.0.0"</span></span>: <span class="hljs-string"><span class="hljs-string">"patches/phpunit/php-code-coverage/myFix-leagcy.patch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"&gt;= 7.0.0"</span></span>: <span class="hljs-string"><span class="hljs-string">"patches/phpunit/php-code-coverage/myFix.patch"</span></span> } } } } }</code> </pre> </li><li> æ›´æ–°ä¾èµ–é¡¹ï¼š <br><pre> <code class="bash hljs">composer.phar update</code> </pre> </li><li> å¦‚æœå‡ºäº†ç‚¹é—®é¢˜ï¼Œå¯ä»¥åœ¨ä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºä¸­çœ‹åˆ°ï¼Œä½†ä»¥é˜²ä¸‡ä¸€ï¼Œæ‚¨å¯ä»¥ç¡®ä¿åº”ç”¨æˆ‘ä»¬çš„æ›´æ”¹ï¼š <br><pre> <code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php // for example some changes here</code> </pre> </li><li> æäº¤å¹¶æ¨é€ç»“æœï¼š <br><pre> <code class="bash hljs">git add composer.json patches/phpunit/php-code-coverage/myFix.patch git commit --gpg-sign --message=<span class="hljs-string"><span class="hljs-string">'Use vaimo/composer-patches'</span></span> git push -u origin vaimoComposerPatches</code> </pre> </li></ol><br><p> æˆ‘ä»¬ç¡®ä¿åœ¨é¡¹ç›®ä¸­å®‰è£…åº“æ—¶ï¼Œè¡¥ä¸ä¹Ÿå°†é€‚ç”¨ã€‚ </p><br><p> åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶å®‰è£…<code>mougrim/php-composer-patches-example</code> ï¼š </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ rm -rf php-project mkdir php-project <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php-project composer.phar require phpunit/phpunit <span class="hljs-string"><span class="hljs-string">'^8.4.2'</span></span> composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git composer.phar require mougrim/php-composer-patches-example dev-vaimoComposerPatches</code> </pre> <br><p> ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œæ‚¨å¯ä»¥ç¡®ä¿å·²åº”ç”¨æˆ‘ä»¬çš„æ›´æ”¹ï¼š </p><br><pre> <code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php // for example some changes here</code> </pre> <br><p> æ€»ç»“<code>vaimo/composer-patches</code> ã€‚ </p><br><p> è¯¥æ’ä»¶çš„ä¼˜ç‚¹ä¸ä»¥å‰çš„ä¼˜ç‚¹å‡ ä¹ç›¸åŒï¼Œä½†è¿˜åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š </p><br><ul><li> ç»´æŠ¤è€…æ­£åœ¨ç§¯æå¼€å‘è¯¥æ’ä»¶ï¼Œå¹¶å·²ç»å‘å¸ƒäº†ç¬¬å››ä¸ªä¸»è¦ç‰ˆæœ¬ï¼› </li><li> æ— éœ€ä¸ºè¦åº”ç”¨ä¾èµ–é¡¹çš„è¡¥ä¸è§„å®šä»»ä½•é™„åŠ è§„å®šï¼› </li><li> æ‚¨å¯ä»¥å¯¹ä¸åŒç‰ˆæœ¬çš„ä¾èµ–é¡¹ä½¿ç”¨ä¸åŒçš„è¡¥ä¸ã€‚ </li><li> è¯¥æ’ä»¶æœ‰å¾ˆå¤šè®¾ç½®ï¼Œå› æ­¤ï¼Œå¦‚æœæœ¬æ–‡ä¸­æè¿°çš„åŠŸèƒ½ä¸è¶³ä»¥æ»¡è¶³æ‚¨çš„è¦æ±‚ï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£-å¯èƒ½æ‚¨æ‰€éœ€çš„åŠŸèƒ½å·²ç»å®ç°ã€‚ </li></ul><br><p> ç¼ºç‚¹ï¼š </p><br><ul><li> åƒä¸Šä¸€ä¸ªä¸€æ ·ï¼Œå®ƒæ˜¯Composerçš„æ’ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨æ›´æ–°Composeræ—¶å®ƒå¯èƒ½ä¼šæŸåï¼› </li><li> ä¸ä»¥å‰çš„æ’ä»¶ä¸åŒï¼Œæ­¤ç¤¾åŒºçš„æ’ä»¶è¾ƒå°‘ã€‚ </li></ul><br><h2 id="vyvody"> ç»“è®º </h2><br><p> æ€»ç»“ä¸€èˆ¬ç»“æœï¼š </p><br><ul><li> ä½¿ç”¨åŒ…å‰è¿›è¡Œä»»ä½•è¾ƒå°çš„ä¿®å¤æ˜¯ä¸æ–¹ä¾¿çš„ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>cweagans/composer-patches</code></a>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ’ä»¶ï¼Œä½†æ˜¯å¼€å‘å¾ˆå·®ï¼Œæ‰€ä»¥æˆ‘ä¸æ¨èå®ƒã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vaimo Composer Patches</a>æ˜¯ä¸€ä¸ªå‡ºè‰²çš„æ’ä»¶ï¼Œå¯ä»¥å¾ˆå¥½åœ°è§£å†³ä¾èµ–å…³ç³»ä¿®å¤çš„é—®é¢˜ï¼Œå¹¶ä¸”è¿˜æœ‰å¾ˆå¤šè®¾ç½®ã€‚ </li><li>  Vaimo Composer Patchesçš„ç¤¾åŒºå¾ˆå°ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›æœ¬æ–‡èƒ½æœ‰æ‰€å¢åŠ ï¼› </li><li> å¦‚æœä¾èµ–é¡¹éœ€è¦å¤§é‡æ›´æ”¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç¡¬æ´¾ç”Ÿï¼ˆä¿æŒæ´¾ç”Ÿç‹¬ç«‹äºåŸå§‹ä¾èµ–é¡¹ï¼‰æ›´ä¸ºå®¹æ˜“ã€‚ </li></ul><br><p> æˆ‘è¿˜å¾—å‡ºäº†ä¸€ä¸ªé—´æ¥ç»“è®ºï¼šå¦‚æœæŸç§ä¾èµ–å…³ç³»æ²¡æœ‰æä¾›å¿…è¦çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæœ‰å®ç°æ­¤åŠŸèƒ½çš„åˆ†å‰ç”šè‡³æ›´å¤šã€‚ </p><br><p> åœ¨Badooï¼Œæˆ‘ä»¬åœ¨ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨Vaimo Composer Patchesï¼š </p><br><ul><li> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SoftMocks</a>ä¸­ä¿®è¡¥PHPUnitå’ŒPHPä»£ç è¦†ç›–ç‡ï¼› </li><li> åœ¨Webmozartçš„å†…éƒ¨å­˜å‚¨åº“ä¸­å£°æ˜ä¸ºä¸SoftMockså…¼å®¹çš„ä¸´æ—¶ä¿®è¡¥ç¨‹åºï¼ˆè€ŒSoftMocksä¸æ”¯æŒ<code>array_map(array('static', 'valueToString')</code>æ„é€ <code>array_map(array('static', 'valueToString')</code> ï¼‰ã€‚ </li></ul><br><p> é‡Œçº³ç‰¹Â·é˜¿èµ«ç›å¾·è€¶å¤«ï¼ˆRinat Akhmadeevï¼‰ï¼Œé«˜çº§  PHPå¼€å‘äººå‘˜ </p><br><p>  <strong>UPD1</strong> ï¼šæ„Ÿè°¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">BoShurik</a>æä¾›çš„<a href="">åˆ«å</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a> ã€‚ åœ¨æ–‡ç« ä¸­æ·»åŠ äº†æœ‰å…³åˆ«åçš„è¦ç‚¹ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN473654/">https://habr.com/ru/post/zh-CN473654/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN473640/index.html">å¤§æ•°æ®æ—¥è½</a></li>
<li><a href="../zh-CN473642/index.html">Cribble Crabble Gradleï¼šè‡ªåŠ¨æ„å»ºé­”æœ¯</a></li>
<li><a href="../zh-CN473646/index.html">å°å…¬å¸çš„Hackathonï¼šå¦‚ä½•åœ¨ä¸æµªè´¹èµ„æºçš„æƒ…å†µä¸‹è¿›è¡Œå®‰æ’</a></li>
<li><a href="../zh-CN473648/index.html">é©¬å·²ç»æ­»äº†-å“­æ³£ï¼šä»tslintåˆ°eslintçš„è¿‡æ¸¡</a></li>
<li><a href="../zh-CN473652/index.html">ä½¿ç”¨Node.jså’ŒOracleæ•°æ®åº“åˆ›å»ºREST APIã€‚ ç¬¬5éƒ¨åˆ†</a></li>
<li><a href="../zh-CN473656/index.html">é›¨æœé™æ€ç½‘ç«™ç”Ÿæˆå™¨ä½“éªŒ</a></li>
<li><a href="../zh-CN473658/index.html">å¤„ç†Go 1.13ä¸­çš„é”™è¯¯</a></li>
<li><a href="../zh-CN473660/index.html">è¡—æœºé€†å‘å·¥ç¨‹ï¼šåœ¨NBA Jamä¸Šåˆ›ä¸‹Michael Jordan</a></li>
<li><a href="../zh-CN473664/index.html">äº²èº«å­¦ä¹ ç»éªŒã€‚ Yandex.Practicum-æ•°æ®åˆ†æå¸ˆ</a></li>
<li><a href="../zh-CN473666/index.html">ä½œä¸ºç§‘å¹»å°è¯´ä½œå®¶ï¼Œäºšç‘ŸÂ·å…‹æ‹‰å…‹ï¼ˆArthur Clarkï¼‰å‡ ä¹å…³é—­äº†ã€Šç§‘æŠ€-é’å¹´ã€‹æ‚å¿—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>