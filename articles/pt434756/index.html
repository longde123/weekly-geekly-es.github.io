<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌧️ 🈹 🍔 O futuro do Kubernetes é com máquinas virtuais 🙂 🤹🏿 🐀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cartomancia 

 O Kubernetes já desempenhou um papel importante no meu trabalho, e no futuro se tornará ainda mais importante. Mas 2018 está chegando a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O futuro do Kubernetes é com máquinas virtuais</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434756/">  <b>Cartomancia</b> <br><br>  O Kubernetes já desempenhou um papel importante no meu trabalho, e no futuro se tornará ainda mais importante.  Mas 2018 está chegando ao fim, então esqueça a modéstia e faça uma previsão ousada: <br><blockquote>  <b>O futuro do Kubernetes são máquinas virtuais, não contêineres</b> </blockquote>  De acordo com o horóscopo chinês, 2018 foi o ano do cão, mas em tecnologia foi o ano de Kubernetes.  Agora, muitos estão aprendendo sobre essa tecnologia revolucionária, e os departamentos de TI de todos os lugares estão tentando desenvolver uma "estratégia Kubernetes" [1].  Algumas organizações já transferiram grandes cargas de trabalho para o Kubernetes. <br><br>  <i>[1] Se você está tentando desenvolver uma estratégia do Kubernetes, já falhou, mas este é um tópico para outro artigo.</i> <br><a name="habracut"></a><br>  Em outras palavras, há muitas pessoas no Kubernetes em todas as etapas do "Ciclo de Sensação da Gartner".  Alguns estão presos em um vazio de decepção ou afogados em um poço de desespero. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d1/1c3/5cc/2d11c35cc85a9c572e535142bf018277.png"><br>  <i><font color="gray">Jeremykemp, <a href="">Wikipedia</a> .</font></i>  <i><font color="gray"><a href="">Creative Commons CC BY-SA 3.0</a></font></i> <br><br>  Sou um grande fã de contêineres e não direi que eles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estão mortos</a> .  Em 2013, o Docker nos deu um shell para Linux Containers: uma nova maneira incrível de criar, empacotar, compartilhar e implantar aplicativos.  Apareceu no momento certo, quando começamos a levar a sério a entrega contínua.  Seu modelo tornou-se ideal para a cadeia de entrega e contribuiu para o surgimento da plataforma PaaS e, em seguida, CaaS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/55a/94d/33055a94d32a0087206df9a0f9cc06f1.png"><br><br>  Os engenheiros do Google viram que a comunidade de TI estava finalmente pronta para os contêineres.  O Google usa contêineres há muito tempo e, em certo sentido, eles podem ser considerados os inventores da contêiner.  Eles começaram a desenvolver o Kubernetes.  Como você sabe agora, esta é a reencarnação gratuita da plataforma Borg do Google. <br><br>  Logo, o suporte ao Kubernetes foi fornecido por todas as nuvens grandes (GKE, AKS, EKS).  Os serviços locais também aumentaram rapidamente as plataformas baseadas no Kubernetes (Pivotal Container Service, Openshift, etc.). <br><br><h1>  Multilocação suave </h1><br>  Foi necessário resolver um problema irritante, que pode ser considerado uma falta de contêineres ... isso é multilocação. <br><br>  Os contêineres do Linux não foram criados como caixas de proteção seguras (como Solaris Zones ou FreeBSD Jails).  Em vez disso, eles criaram um modelo comum de kernel que usa funções do kernel para fornecer isolamento básico do processo.  Como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diria Jesse Frazel</a> , "os contêineres não são a coisa real". <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1015407561187655680"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Isso é agravado pelo fato de a maioria dos componentes do Kubernetes não estar ciente dos inquilinos.  Obviamente, você tem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">namespaces de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pod</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">políticas de segurança</a> , mas não existe na API.  Bem como em componentes internos, como <code>kubelet</code> ou <code>kube-proxy</code> .  Isso leva ao fato de que o Kubernetes implementa o modelo de "aluguel suave" (arrendamento temporário). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/e54/556/eefe545564f03e8b6813e8bc83ed0188.png"><br>  <i><font color="gray">Arquitetura Kubernetes</font></i> <br><br>  Abstrações se infiltram ainda mais.  Uma plataforma em cima de contêineres herda muitos aspectos do aluguel suave.  As plataformas em cima das máquinas virtuais com vários locatários herdam esse contrato difícil (VMware, Amazon Web Services, OpenStack etc.). <br><br>  O modelo de aluguel flexível da Kubernetes coloca os prestadores de serviços e as distribuições em uma posição estranha.  O próprio cluster Kubernetes está se tornando uma linha de "aluguel duro".  Mesmo dentro da mesma organização, há muitos motivos para exigir um aluguel rígido entre usuários (ou aplicativos).  Como as nuvens públicas fornecem Kubernetes totalmente gerenciados como um serviço, é fácil para os clientes pegar seu próprio cluster e usar o limite do cluster como um ponto de isolamento. <br><br>  Algumas distribuições do Kubernetes, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PKS (Pivotal Container Service)</a> , conhecem bem esse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">problema de aluguel</a> e usam um modelo semelhante, fornecendo o mesmo Kubernetes como um serviço que pode ser obtido de uma nuvem pública, mas em seu próprio data center. <br><br>  Isso levou ao surgimento do modelo de "muitos clusters", em vez de "um grande cluster comum".  Freqüentemente, os clientes GKE do Google têm dezenas de clusters Kubernetes implantados para várias equipes.  Geralmente, cada desenvolvedor obtém seu próprio cluster.  Esse comportamento gera um número chocante de instâncias (Kubesprawl). <br><br>  Como alternativa, os operadores criam seus próprios clusters Kubernetes em seus próprios datacenters para realizar trabalhos adicionais para gerenciar vários clusters ou concordam em conceder um ou dois clusters grandes suavemente. <br><br>  Normalmente, o menor cluster é de quatro máquinas (ou máquinas virtuais).  Um (ou três para HA) para o Kubernetes Master, três para os Trabalhadores do Kubernetes.  Muito dinheiro é gasto em sistemas que, na maioria das vezes, estão ociosos. <br><br>  Portanto, você precisa de alguma forma mover o Kubernetes em direção a uma multilocação rígida.  A comunidade Kubernetes está bem ciente dessa necessidade.  Um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">grupo de trabalho com várias locações</a> já foi formado.  Ela está trabalhando duro nesse problema, e eles têm vários modelos e sugestões sobre como trabalhar com cada modelo. <br><br>  Jesse Frazel escreveu um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post</a> sobre este tópico, e é ótimo porque ela é muito mais esperta do que eu, para que eu possa me referir a ela e me salvar de dez anos de intenso estudo, tentando alcançar seu nível.  Se você não leu essa postagem, leia-a agora. <br><br><h1>  Apenas VMs muito pequenas otimizadas para velocidade ... </h1><br><blockquote>  O Kata Containers é um projeto de código aberto e uma comunidade trabalhando para criar uma implementação padrão de máquinas virtuais leves que parecem e funcionam como contêineres, mas fornecem isolamento de carga de trabalho e benefícios de segurança da VM. </blockquote>  Jesse sugere usar a tecnologia de contêineres VM, como os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">contêineres Kata</a> .  Eles oferecem isolamento no nível da VM, mas funcionam como contêineres.  Isso permite que o Kubernetes dê a cada "inquilino" (assumimos que o inquilino no espaço de nomes) seu próprio conjunto de serviços do sistema Kubernetes em execução em contêineres VM aninhados (o contêiner VM dentro da máquina virtual que a infraestrutura IaaS fornece). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/157/3ce/1b6/1573ce1b64d7607f5cb9ca0d09caef6e.png"><br>  <i><font color="gray">Imagem de Jesse Frasel: locação múltipla em Kubernetes</font></i> <br><br>  Esta é uma elegante solução de aluguel múltiplo da Kubernetes.  Sua proposta vai ainda mais longe para o Kubernetes usar contêineres VM aninhados para cargas de trabalho (Pods) em execução no Kubernetes, o que fornece um aumento significativo na utilização de recursos. <br><br>  Temos pelo menos mais uma otimização.  Crie o hipervisor certo para o provedor de infraestrutura subjacente ou provedor de nuvem.  Se o contêiner da VM for uma abstração de primeiro nível fornecida pelo IaaS, aumentaremos ainda mais a utilização de recursos.  O número mínimo de VMs para iniciar um cluster Kubernetes é reduzido para uma máquina (ou três para HA) para hospedar o sistema de gerenciamento Kubernetes, disponível para o "superusuário". <br><br><h1>  Multilocação (custo) com otimização de recursos </h1><br>  Uma implantação do Kubernetes com dois namespaces e vários aplicativos em execução terá a seguinte aparência: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffc/4e2/d7f/ffc4e2d7ffb239fa1e0822e3d20afcd2.png"><br><blockquote>  Nota: existem outras cargas na mesma infraestrutura IaaS.  Por serem contêineres de VM, eles têm o mesmo nível de isolamento que as VMs em nuvem convencionais.  Portanto, eles podem trabalhar no mesmo hipervisor com risco mínimo. </blockquote>  Inicialmente, nenhuma infraestrutura é implantada na nuvem; portanto, para um superusuário, os custos são zero. <br><br>  Um superusuário solicita um cluster Kubernetes da nuvem.  O provedor de serviços em nuvem cria uma máquina virtual com um contêiner (ou três para HA) que executa as principais APIs do Kubernetes e os serviços do sistema.  O superusuário pode implantar módulos no espaço para nome do sistema ou criar novos espaços para delegar o acesso a outros usuários. <br><br>  O superusuário cria dois namespaces <code>foo</code> e <code>bar</code> .  O Kubernetes solicita dois contêineres de VM da nuvem para cada nível de gerenciamento de namespace (API do Kubernetes e Serviços do Sistema).  O superusuário delega o acesso a esses namespaces a alguns usuários, cada um deles lança algumas cargas de trabalho (módulos) e os contêineres da VM solicitam esses contêineres para essas cargas de trabalho. <br><br>  Em todas as etapas, o superusuário paga apenas pelos recursos realmente consumidos.  O provedor de serviços em nuvem controla esses recursos e eles estão disponíveis para qualquer usuário da nuvem. <br><br><h1>  Eu realmente não estou dizendo nada de novo ... </h1><br>  Os provedores de serviços em nuvem já estão trabalhando nessa direção.  Você pode verificar isso assistindo a eventos da comunidade (a Amazon já pode ter feito isso silenciosamente com o Fargate). <br><br>  A primeira dica é o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Virtual Kubelet</a> , uma ferramenta de código aberto projetada para disfarçar como kubelet.  Ele conecta o Kubernetes a outras APIs, o que permite ao Kubernetes solicitar contêineres de VM de um agendador padrão na nuvem. <br><br>  Outras dicas são um grande número de novas tecnologias para contêineres de VM, como os contêineres Kata já mencionados, bem como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Firecracker</a> da Amazon e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orientador</a> do Google. <br><br><h1>  Conclusão </h1><br>  Se você implementar corretamente as melhorias no modelo de aluguel rígido, encontrará a virtualização do Santo Graal de Kubernetes.  Isolamento completo de cargas de trabalho e sem custos adicionais. <br><br>  Se você não usar a nuvem pública, ainda obterá os benefícios de uma maior utilização de recursos, que compensa com os requisitos de hardware mais baixos. <br><br>  Esperamos que o VMware e o OpenStack prestem atenção e liberem hipervisores com base em contêineres leves da VM e nas implementações correspondentes do Virtual Kubelet. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434756/">https://habr.com/ru/post/pt434756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434742/index.html">Parte 2: Usando os controladores UDB PSoC da Cypress para reduzir o número de interrupções em uma impressora 3D</a></li>
<li><a href="../pt434744/index.html">Samsung SSD 860 QVO 1 TB e 4 TB: o primeiro consumidor SATA QLC (2 partes)</a></li>
<li><a href="../pt434746/index.html">BLE sob microscópio 4</a></li>
<li><a href="../pt434750/index.html">Como assumir o controle de sua infraestrutura de rede. Capítulo Dois Limpeza e documentação</a></li>
<li><a href="../pt434752/index.html">Robomoroz: o futuro do personagem principal do Ano Novo</a></li>
<li><a href="../pt434758/index.html">Guia do moderador do Facebook: mais de 1.400 páginas de slides conflitantes</a></li>
<li><a href="../pt434760/index.html">Resumo de notícias do PostgreSQL. Edição de ano novo (abreviada) número 13</a></li>
<li><a href="../pt434762/index.html">Notas de um fitoquímico. Banana verde, ou lembre-se de alimentar a microbiota</a></li>
<li><a href="../pt434770/index.html">Energia renovável: palavras e seu significado</a></li>
<li><a href="../pt434774/index.html">5 lições que aprendemos escrevendo mais de 300.000 linhas de código de infraestrutura</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>