<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ§ï¸ ğŸˆ¹ ğŸ” O futuro do Kubernetes Ã© com mÃ¡quinas virtuais ğŸ™‚ ğŸ¤¹ğŸ¿ ğŸ€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cartomancia 

 O Kubernetes jÃ¡ desempenhou um papel importante no meu trabalho, e no futuro se tornarÃ¡ ainda mais importante. Mas 2018 estÃ¡ chegando a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O futuro do Kubernetes Ã© com mÃ¡quinas virtuais</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434756/">  <b>Cartomancia</b> <br><br>  O Kubernetes jÃ¡ desempenhou um papel importante no meu trabalho, e no futuro se tornarÃ¡ ainda mais importante.  Mas 2018 estÃ¡ chegando ao fim, entÃ£o esqueÃ§a a modÃ©stia e faÃ§a uma previsÃ£o ousada: <br><blockquote>  <b>O futuro do Kubernetes sÃ£o mÃ¡quinas virtuais, nÃ£o contÃªineres</b> </blockquote>  De acordo com o horÃ³scopo chinÃªs, 2018 foi o ano do cÃ£o, mas em tecnologia foi o ano de Kubernetes.  Agora, muitos estÃ£o aprendendo sobre essa tecnologia revolucionÃ¡ria, e os departamentos de TI de todos os lugares estÃ£o tentando desenvolver uma "estratÃ©gia Kubernetes" [1].  Algumas organizaÃ§Ãµes jÃ¡ transferiram grandes cargas de trabalho para o Kubernetes. <br><br>  <i>[1] Se vocÃª estÃ¡ tentando desenvolver uma estratÃ©gia do Kubernetes, jÃ¡ falhou, mas este Ã© um tÃ³pico para outro artigo.</i> <br><a name="habracut"></a><br>  Em outras palavras, hÃ¡ muitas pessoas no Kubernetes em todas as etapas do "Ciclo de SensaÃ§Ã£o da Gartner".  Alguns estÃ£o presos em um vazio de decepÃ§Ã£o ou afogados em um poÃ§o de desespero. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d1/1c3/5cc/2d11c35cc85a9c572e535142bf018277.png"><br>  <i><font color="gray">Jeremykemp, <a href="">Wikipedia</a> .</font></i>  <i><font color="gray"><a href="">Creative Commons CC BY-SA 3.0</a></font></i> <br><br>  Sou um grande fÃ£ de contÃªineres e nÃ£o direi que eles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estÃ£o mortos</a> .  Em 2013, o Docker nos deu um shell para Linux Containers: uma nova maneira incrÃ­vel de criar, empacotar, compartilhar e implantar aplicativos.  Apareceu no momento certo, quando comeÃ§amos a levar a sÃ©rio a entrega contÃ­nua.  Seu modelo tornou-se ideal para a cadeia de entrega e contribuiu para o surgimento da plataforma PaaS e, em seguida, CaaS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/55a/94d/33055a94d32a0087206df9a0f9cc06f1.png"><br><br>  Os engenheiros do Google viram que a comunidade de TI estava finalmente pronta para os contÃªineres.  O Google usa contÃªineres hÃ¡ muito tempo e, em certo sentido, eles podem ser considerados os inventores da contÃªiner.  Eles comeÃ§aram a desenvolver o Kubernetes.  Como vocÃª sabe agora, esta Ã© a reencarnaÃ§Ã£o gratuita da plataforma Borg do Google. <br><br>  Logo, o suporte ao Kubernetes foi fornecido por todas as nuvens grandes (GKE, AKS, EKS).  Os serviÃ§os locais tambÃ©m aumentaram rapidamente as plataformas baseadas no Kubernetes (Pivotal Container Service, Openshift, etc.). <br><br><h1>  MultilocaÃ§Ã£o suave </h1><br>  Foi necessÃ¡rio resolver um problema irritante, que pode ser considerado uma falta de contÃªineres ... isso Ã© multilocaÃ§Ã£o. <br><br>  Os contÃªineres do Linux nÃ£o foram criados como caixas de proteÃ§Ã£o seguras (como Solaris Zones ou FreeBSD Jails).  Em vez disso, eles criaram um modelo comum de kernel que usa funÃ§Ãµes do kernel para fornecer isolamento bÃ¡sico do processo.  Como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diria Jesse Frazel</a> , "os contÃªineres nÃ£o sÃ£o a coisa real". <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1015407561187655680"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Isso Ã© agravado pelo fato de a maioria dos componentes do Kubernetes nÃ£o estar ciente dos inquilinos.  Obviamente, vocÃª tem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">namespaces de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pod</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">polÃ­ticas de seguranÃ§a</a> , mas nÃ£o existe na API.  Bem como em componentes internos, como <code>kubelet</code> ou <code>kube-proxy</code> .  Isso leva ao fato de que o Kubernetes implementa o modelo de "aluguel suave" (arrendamento temporÃ¡rio). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/e54/556/eefe545564f03e8b6813e8bc83ed0188.png"><br>  <i><font color="gray">Arquitetura Kubernetes</font></i> <br><br>  AbstraÃ§Ãµes se infiltram ainda mais.  Uma plataforma em cima de contÃªineres herda muitos aspectos do aluguel suave.  As plataformas em cima das mÃ¡quinas virtuais com vÃ¡rios locatÃ¡rios herdam esse contrato difÃ­cil (VMware, Amazon Web Services, OpenStack etc.). <br><br>  O modelo de aluguel flexÃ­vel da Kubernetes coloca os prestadores de serviÃ§os e as distribuiÃ§Ãµes em uma posiÃ§Ã£o estranha.  O prÃ³prio cluster Kubernetes estÃ¡ se tornando uma linha de "aluguel duro".  Mesmo dentro da mesma organizaÃ§Ã£o, hÃ¡ muitos motivos para exigir um aluguel rÃ­gido entre usuÃ¡rios (ou aplicativos).  Como as nuvens pÃºblicas fornecem Kubernetes totalmente gerenciados como um serviÃ§o, Ã© fÃ¡cil para os clientes pegar seu prÃ³prio cluster e usar o limite do cluster como um ponto de isolamento. <br><br>  Algumas distribuiÃ§Ãµes do Kubernetes, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PKS (Pivotal Container Service)</a> , conhecem bem esse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">problema de aluguel</a> e usam um modelo semelhante, fornecendo o mesmo Kubernetes como um serviÃ§o que pode ser obtido de uma nuvem pÃºblica, mas em seu prÃ³prio data center. <br><br>  Isso levou ao surgimento do modelo de "muitos clusters", em vez de "um grande cluster comum".  FreqÃ¼entemente, os clientes GKE do Google tÃªm dezenas de clusters Kubernetes implantados para vÃ¡rias equipes.  Geralmente, cada desenvolvedor obtÃ©m seu prÃ³prio cluster.  Esse comportamento gera um nÃºmero chocante de instÃ¢ncias (Kubesprawl). <br><br>  Como alternativa, os operadores criam seus prÃ³prios clusters Kubernetes em seus prÃ³prios datacenters para realizar trabalhos adicionais para gerenciar vÃ¡rios clusters ou concordam em conceder um ou dois clusters grandes suavemente. <br><br>  Normalmente, o menor cluster Ã© de quatro mÃ¡quinas (ou mÃ¡quinas virtuais).  Um (ou trÃªs para HA) para o Kubernetes Master, trÃªs para os Trabalhadores do Kubernetes.  Muito dinheiro Ã© gasto em sistemas que, na maioria das vezes, estÃ£o ociosos. <br><br>  Portanto, vocÃª precisa de alguma forma mover o Kubernetes em direÃ§Ã£o a uma multilocaÃ§Ã£o rÃ­gida.  A comunidade Kubernetes estÃ¡ bem ciente dessa necessidade.  Um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">grupo de trabalho com vÃ¡rias locaÃ§Ãµes</a> jÃ¡ foi formado.  Ela estÃ¡ trabalhando duro nesse problema, e eles tÃªm vÃ¡rios modelos e sugestÃµes sobre como trabalhar com cada modelo. <br><br>  Jesse Frazel escreveu um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post</a> sobre este tÃ³pico, e Ã© Ã³timo porque ela Ã© muito mais esperta do que eu, para que eu possa me referir a ela e me salvar de dez anos de intenso estudo, tentando alcanÃ§ar seu nÃ­vel.  Se vocÃª nÃ£o leu essa postagem, leia-a agora. <br><br><h1>  Apenas VMs muito pequenas otimizadas para velocidade ... </h1><br><blockquote>  O Kata Containers Ã© um projeto de cÃ³digo aberto e uma comunidade trabalhando para criar uma implementaÃ§Ã£o padrÃ£o de mÃ¡quinas virtuais leves que parecem e funcionam como contÃªineres, mas fornecem isolamento de carga de trabalho e benefÃ­cios de seguranÃ§a da VM. </blockquote>  Jesse sugere usar a tecnologia de contÃªineres VM, como os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">contÃªineres Kata</a> .  Eles oferecem isolamento no nÃ­vel da VM, mas funcionam como contÃªineres.  Isso permite que o Kubernetes dÃª a cada "inquilino" (assumimos que o inquilino no espaÃ§o de nomes) seu prÃ³prio conjunto de serviÃ§os do sistema Kubernetes em execuÃ§Ã£o em contÃªineres VM aninhados (o contÃªiner VM dentro da mÃ¡quina virtual que a infraestrutura IaaS fornece). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/157/3ce/1b6/1573ce1b64d7607f5cb9ca0d09caef6e.png"><br>  <i><font color="gray">Imagem de Jesse Frasel: locaÃ§Ã£o mÃºltipla em Kubernetes</font></i> <br><br>  Esta Ã© uma elegante soluÃ§Ã£o de aluguel mÃºltiplo da Kubernetes.  Sua proposta vai ainda mais longe para o Kubernetes usar contÃªineres VM aninhados para cargas de trabalho (Pods) em execuÃ§Ã£o no Kubernetes, o que fornece um aumento significativo na utilizaÃ§Ã£o de recursos. <br><br>  Temos pelo menos mais uma otimizaÃ§Ã£o.  Crie o hipervisor certo para o provedor de infraestrutura subjacente ou provedor de nuvem.  Se o contÃªiner da VM for uma abstraÃ§Ã£o de primeiro nÃ­vel fornecida pelo IaaS, aumentaremos ainda mais a utilizaÃ§Ã£o de recursos.  O nÃºmero mÃ­nimo de VMs para iniciar um cluster Kubernetes Ã© reduzido para uma mÃ¡quina (ou trÃªs para HA) para hospedar o sistema de gerenciamento Kubernetes, disponÃ­vel para o "superusuÃ¡rio". <br><br><h1>  MultilocaÃ§Ã£o (custo) com otimizaÃ§Ã£o de recursos </h1><br>  Uma implantaÃ§Ã£o do Kubernetes com dois namespaces e vÃ¡rios aplicativos em execuÃ§Ã£o terÃ¡ a seguinte aparÃªncia: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffc/4e2/d7f/ffc4e2d7ffb239fa1e0822e3d20afcd2.png"><br><blockquote>  Nota: existem outras cargas na mesma infraestrutura IaaS.  Por serem contÃªineres de VM, eles tÃªm o mesmo nÃ­vel de isolamento que as VMs em nuvem convencionais.  Portanto, eles podem trabalhar no mesmo hipervisor com risco mÃ­nimo. </blockquote>  Inicialmente, nenhuma infraestrutura Ã© implantada na nuvem; portanto, para um superusuÃ¡rio, os custos sÃ£o zero. <br><br>  Um superusuÃ¡rio solicita um cluster Kubernetes da nuvem.  O provedor de serviÃ§os em nuvem cria uma mÃ¡quina virtual com um contÃªiner (ou trÃªs para HA) que executa as principais APIs do Kubernetes e os serviÃ§os do sistema.  O superusuÃ¡rio pode implantar mÃ³dulos no espaÃ§o para nome do sistema ou criar novos espaÃ§os para delegar o acesso a outros usuÃ¡rios. <br><br>  O superusuÃ¡rio cria dois namespaces <code>foo</code> e <code>bar</code> .  O Kubernetes solicita dois contÃªineres de VM da nuvem para cada nÃ­vel de gerenciamento de namespace (API do Kubernetes e ServiÃ§os do Sistema).  O superusuÃ¡rio delega o acesso a esses namespaces a alguns usuÃ¡rios, cada um deles lanÃ§a algumas cargas de trabalho (mÃ³dulos) e os contÃªineres da VM solicitam esses contÃªineres para essas cargas de trabalho. <br><br>  Em todas as etapas, o superusuÃ¡rio paga apenas pelos recursos realmente consumidos.  O provedor de serviÃ§os em nuvem controla esses recursos e eles estÃ£o disponÃ­veis para qualquer usuÃ¡rio da nuvem. <br><br><h1>  Eu realmente nÃ£o estou dizendo nada de novo ... </h1><br>  Os provedores de serviÃ§os em nuvem jÃ¡ estÃ£o trabalhando nessa direÃ§Ã£o.  VocÃª pode verificar isso assistindo a eventos da comunidade (a Amazon jÃ¡ pode ter feito isso silenciosamente com o Fargate). <br><br>  A primeira dica Ã© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Virtual Kubelet</a> , uma ferramenta de cÃ³digo aberto projetada para disfarÃ§ar como kubelet.  Ele conecta o Kubernetes a outras APIs, o que permite ao Kubernetes solicitar contÃªineres de VM de um agendador padrÃ£o na nuvem. <br><br>  Outras dicas sÃ£o um grande nÃºmero de novas tecnologias para contÃªineres de VM, como os contÃªineres Kata jÃ¡ mencionados, bem como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Firecracker</a> da Amazon e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orientador</a> do Google. <br><br><h1>  ConclusÃ£o </h1><br>  Se vocÃª implementar corretamente as melhorias no modelo de aluguel rÃ­gido, encontrarÃ¡ a virtualizaÃ§Ã£o do Santo Graal de Kubernetes.  Isolamento completo de cargas de trabalho e sem custos adicionais. <br><br>  Se vocÃª nÃ£o usar a nuvem pÃºblica, ainda obterÃ¡ os benefÃ­cios de uma maior utilizaÃ§Ã£o de recursos, que compensa com os requisitos de hardware mais baixos. <br><br>  Esperamos que o VMware e o OpenStack prestem atenÃ§Ã£o e liberem hipervisores com base em contÃªineres leves da VM e nas implementaÃ§Ãµes correspondentes do Virtual Kubelet. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434756/">https://habr.com/ru/post/pt434756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434742/index.html">Parte 2: Usando os controladores UDB PSoC da Cypress para reduzir o nÃºmero de interrupÃ§Ãµes em uma impressora 3D</a></li>
<li><a href="../pt434744/index.html">Samsung SSD 860 QVO 1 TB e 4 TB: o primeiro consumidor SATA QLC (2 partes)</a></li>
<li><a href="../pt434746/index.html">BLE sob microscÃ³pio 4</a></li>
<li><a href="../pt434750/index.html">Como assumir o controle de sua infraestrutura de rede. CapÃ­tulo Dois Limpeza e documentaÃ§Ã£o</a></li>
<li><a href="../pt434752/index.html">Robomoroz: o futuro do personagem principal do Ano Novo</a></li>
<li><a href="../pt434758/index.html">Guia do moderador do Facebook: mais de 1.400 pÃ¡ginas de slides conflitantes</a></li>
<li><a href="../pt434760/index.html">Resumo de notÃ­cias do PostgreSQL. EdiÃ§Ã£o de ano novo (abreviada) nÃºmero 13</a></li>
<li><a href="../pt434762/index.html">Notas de um fitoquÃ­mico. Banana verde, ou lembre-se de alimentar a microbiota</a></li>
<li><a href="../pt434770/index.html">Energia renovÃ¡vel: palavras e seu significado</a></li>
<li><a href="../pt434774/index.html">5 liÃ§Ãµes que aprendemos escrevendo mais de 300.000 linhas de cÃ³digo de infraestrutura</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>