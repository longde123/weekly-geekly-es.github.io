<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüé® üë©üèª‚Äçü§ù‚Äçüë®üèΩ üò£ Base de chave e TOFU verdadeiro üîπ ü§≥üèª üêÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em mensageiros com criptografia de ponta a ponta (E2E), o usu√°rio √© respons√°vel por suas chaves. Quando ele os perde, ele √© for√ßado a redefinir sua co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Base de chave e TOFU verdadeiro</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449350/">  Em mensageiros com criptografia de ponta a ponta (E2E), o usu√°rio √© respons√°vel por suas chaves.  Quando ele os perde, ele √© for√ßado a redefinir sua conta. <br><br>  Redefinir uma conta √© perigoso.  Voc√™ apaga as chaves p√∫blicas e em todas as conversas se torna um estranho criptogr√°fico.  Voc√™ precisa restaurar sua identidade e, em quase todos os casos, isso significa uma reuni√£o pessoal e uma compara√ß√£o de "n√∫meros de seguran√ßa" com cada um dos contatos.  Com que frequ√™ncia voc√™ realmente passa por esse teste, que √© a √∫nica prote√ß√£o contra o MiTM? <br><br>  Mesmo se voc√™ for s√©rio sobre os n√∫meros de seguran√ßa, ver√° muitos parceiros de bate-papo apenas uma vez por ano em uma confer√™ncia. <br><a name="habracut"></a><br>
<h1>  Mas isso acontece com pouca frequ√™ncia, certo? </h1><br>  Com que frequ√™ncia ocorre uma redefini√ß√£o?  Resposta: na maioria dos aplicativos de bate-papo E2E o tempo todo. <br><br>  Nesses mensageiros instant√¢neos, voc√™ descarta a criptografia e simplesmente come√ßa a confiar no servidor: (1) sempre que muda para um novo telefone;  (2) sempre que um interlocutor mudar para um novo telefone;  (3) quando redefinir as configura√ß√µes de f√°brica do telefone;  (4) quando qualquer interlocutor fizer um reset nas configura√ß√µes de f√°brica;  (5) sempre que voc√™ desinstalar e reinstalar o aplicativo ou (6) quando qualquer pessoa com quem voc√™ estiver falando desinstalar e reinstalar.  Se voc√™ tiver dezenas de contatos, uma redefini√ß√£o ocorrer√° a cada poucos dias. <br><br>  A redefini√ß√£o ocorre com tanta regularidade que esses aplicativos fingem que isso n√£o √© um problema: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbe/046/a7f/dbe046a7fde23783eff076ae8a59084a.png"></div><br>  <i>Parece que temos uma atualiza√ß√£o de seguran√ßa!</i>  <i>(Mas na verdade n√£o)</i> <br><br><h1>  √â realmente TOFU? </h1><br>  Na criptografia, o termo TOFU ("confian√ßa no primeiro uso") descreve um jogo de azar quando duas partes falam pela primeira vez.  Em vez de se encontrar pessoalmente, o mediador √© respons√°vel por cada lado ... e, depois que as partes se apresentam, cada lado monitora cuidadosamente as chaves para garantir que nada mudou.  Se a chave mudou, cada lado emite um alarme. <br><br>  Se a chave do host remoto mudar no SSH em tal situa√ß√£o, ela n√£o "funcionar√°", mas se tornar√° completamente beligerante: <br><br><blockquote><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ <br> @ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @ <br> @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ <br> <br> IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY! <br> Someone could be eavesdropping on you right now (man-in-the-middle attack)! <br> It is also possible that a host key has just been changed. <br> The fingerprint for the RSA key sent by the remote host is <br> 00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff <br> Please contact your system administrator. <br> Add correct host key in /Users/rmueller/.ssh/known_hosts to get rid of this message. <br> Offending RSA key in /Users/rmueller/.ssh/known_hosts:12 <br> RSA host key for 8.8.8.8 has changed and you have requested strict checking. <br> Host key verification failed.</code> </blockquote> <br>  Aqui est√° o comportamento correto.  E lembre-se: <b>isso n√£o √© TOFU se permitir que voc√™ trabalhe mais com um pequeno aviso.</b>  <b>Voc√™ deve ver uma caveira gigante com ossos cruzados</b> . <br><br>  Obviamente, esses mensageiros instant√¢neos alegam que est√° tudo bem, porque o usu√°rio √© avisado.  Se ele quiser, ele <i>pode</i> verificar os n√∫meros de seguran√ßa.  √â por isso que n√£o concordamos: <br><br><ol><li>  A verifica√ß√£o n√£o √© realizada porque acontece com muita frequ√™ncia. <br></li><li>  Cheque √© uma merda. <br></li><li>  Mesmo uma pesquisa superficial de nossos amigos preocupados com a seguran√ßa mostrou que ningu√©m est√° preocupado com esse teste. <br></li><li>  Portanto, √© apenas confiar no servidor e no SMS (bem, bem!) <b>Novamente, novamente e novamente</b> . <br></li><li>  Finalmente, esses aplicativos n√£o devem funcionar dessa maneira.  Especialmente ao trocar de dispositivo.  Um caso normal t√≠pico pode ser tratado sem problemas e com seguran√ßa, e quanto mais rara a situa√ß√£o, pior deve parecer.  Em um minuto, mostre a solu√ß√£o Keybase. </li></ol><br><h1>  Pare de cham√°-lo de TOFU </h1><br>  H√° um ataque muito eficaz.  Suponha que Eve queira entrar na conversa existente de Alice e Bob e ficar entre eles.  Alice e Bob est√£o em contato h√° muitos anos, h√° muito que passaram no TOFU. <br><br>  Eve apenas faz Alice pensar que Bob comprou um telefone novo: <br><br><blockquote>  <b>Bob (Eve):</b> Ei, ei! <br><br>  <b>Alice:</b> Ei, Bob!  Parece que voc√™ tem novos n√∫meros de seguran√ßa. <br><br>  <b>Bob (Eve):</b> Sim, comprei o iPhone XS, um bom celular, muito satisfeito com ele.  Vamos trocar n√∫meros de seguran√ßa no RWC 2020. Ei, voc√™ tem seu endere√ßo atual de Caroline?  Quero surpreend√™-la enquanto estiver em S√£o Francisco. <br><br>  <b>Alice: N√£o</b> consigo comparar, vida no Android 4!  Sim, Rua Cosy 555. </blockquote><br>  Portanto, √© improv√°vel que a maioria dos mensageiros criptografados obtenha conformidade com TOFU.  √â mais parecido com o TADA - confie ap√≥s adicionar dispositivos.  Esse √© um problema real, n√£o fict√≠cio, porque cria a oportunidade de implementa√ß√£o maliciosa em uma conversa pr√©-existente.  No TOFU real, quando algu√©m estiver interessado em sua conversa, ele n√£o poder√° se infiltrar.  Com o TADA, isso √© poss√≠vel. <br><br>  Nas conversas em grupo, a situa√ß√£o √© ainda pior.  Quanto mais pessoas no bate-papo, mais frequentemente a conta ser√° reinstalada.  Em uma empresa de apenas 20 pessoas, isso acontecer√° aproximadamente a cada duas semanas, de acordo com nossa estimativa.  E todas as pessoas na empresa devem conhecer essa pessoa.  Pessoalmente.  Caso contr√°rio, o chat inteiro ser√° comprometido por uma toupeira ou hacker. <br><br><h1>  Solu√ß√£o </h1><br>  Existe uma boa solu√ß√£o que n√£o implique confian√ßa em servidores de chave privada?  Achamos que existe: suporte real para v√°rios dispositivos.  Isso significa que voc√™ gerencia uma cadeia de dispositivos que representam sua identidade.  Quando voc√™ recebe um novo dispositivo (telefone, laptop, computador de mesa, iPad etc.), ele gera seu pr√≥prio par de chaves e o dispositivo anterior o assina.  Se voc√™ perder o dispositivo, exclua-o de um dos demais.  Tecnicamente, essa exclus√£o √© um recall e, nesse caso, tamb√©m h√° algum tipo de invers√£o de chave que ocorre automaticamente. <br><br>  Como resultado, <b>voc√™ n√£o precisa confiar no servidor ou se encontrar pessoalmente quando o interlocutor ou colega recebe um novo dispositivo</b> .  Da mesma forma, voc√™ n√£o precisa confiar no servidor ou se encontrar pessoalmente quando ele remover o dispositivo, se n√£o foi o √∫ltimo.  O √∫nico momento em que voc√™ precisa receber um aviso √© quando algu√©m realmente perde o acesso a todas as suas configura√ß√µes.  E, neste caso, voc√™ ver√° um aviso s√©rio, como deveria: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b52/c11/c30/b52c11c30705695088a044658f3fb608.png"></div><br>  <i><font color="gray">Especialmente maximamente feio</font></i> <br><br>  Como resultado, muito menos contas s√£o redefinidas e reinstaladas.  Historicamente, no Keybase, o n√∫mero total de complementos e avalia√ß√µes de dispositivos √© <b>dez vezes o</b> n√∫mero de descargas de conta (voc√™ n√£o precisa aceitar nossa palavra, est√° dispon√≠vel publicamente na nossa √°rvore Merkle).  Ao contr√°rio de outros mensageiros, podemos mostrar um aviso verdadeiramente aterrador quando voc√™ est√° conversando com algu√©m que reinstalou recentemente as chaves. <br><br>  O gerenciamento de dispositivos √© uma opera√ß√£o de engenharia complexa que refinamos v√°rias vezes.  O dispositivo existente assina as chaves p√∫blicas do novo dispositivo e criptografa todos os dados secretos importantes da chave p√∫blica do novo dispositivo.  Esta opera√ß√£o deve ser executada rapidamente (em um segundo), pois estamos falando sobre o alcance da aten√ß√£o do usu√°rio.  Como resultado, o Keybase usa uma hierarquia de chaves, para que, ao transferir 32 bytes de dados secretos de um dispositivo antigo, o novo dispositivo possa ver todos os dados criptogr√°ficos de longa dura√ß√£o (consulte as Perguntas frequentes abaixo para obter mais detalhes).  Isso pode parecer um pouco surpreendente, mas <i>esse √© exatamente o ponto da criptografia</i> .  Ele n√£o resolve seus problemas de gerenciamento de segredos, apenas torna o sistema mais escal√°vel. <br><br><h1>  A imagem completa da seguran√ßa </h1><br>  Agora podemos formular quatro propriedades b√°sicas de seguran√ßa para o aplicativo Keybase: <br><br><ol><li>  chaves secretas de longa dura√ß√£o nunca deixam os dispositivos nos quais s√£o criadas <br></li><li>  suporte completo para v√°rios dispositivos minimiza quedas de conta <br></li><li>  a revoga√ß√£o de chave n√£o pode ser adiada ou revertida com intuito malicioso <br></li><li>  sigilo direto usando mensagens de tempo ef√™meras </li></ol><br>  Os dois primeiros parecem compreens√≠veis.  Um ter√ßo se torna importante em um projeto em que a recupera√ß√£o do dispositivo √© esperada e considerada normal.  O sistema deve verificar se os servidores mal-intencionados n√£o podem atrasar as an√°lises de dispositivos, sobre as quais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escrevemos anteriormente</a> . <br><br>  Veja nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo sobre mensagens ef√™meras para</a> obter mais informa√ß√µes sobre o quarto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurso de</a> seguran√ßa. <br><br><h1>  Muita criptografia nova, tudo est√° implementado corretamente? </h1><br>  O Keybase nunca implementou as fun√ß√µes b√°sicas de seguran√ßa e nunca a descreveu em artigos cient√≠ficos.  Tivemos que inventar alguns <i>protocolos</i> criptogr√°ficos.  Felizmente, existem muitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>algoritmos</i> criptogr√°ficos <i>prontos</i></a> para uso, padronizados e amplamente utilizados para qualquer situa√ß√£o.  Todo o nosso c√≥digo de cliente est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aberto</a> .  Teoricamente, qualquer pessoa pode encontrar erros de design ou implementa√ß√£o.  Mas quer√≠amos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">demonstrar a estrutura interna</a> e contratamos a melhor empresa de auditoria de seguran√ßa para uma an√°lise completa. <br><br>  Hoje, apresentamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rio do</a> Grupo NCC e somos extremamente encorajados pelos resultados.  A Keybase gastou mais de US $ 100.000 em auditoria e o NCC Group contratou especialistas de alto n√≠vel em seguran√ßa e criptografia.  Eles encontraram dois erros importantes em nossa implementa√ß√£o e os corrigimos rapidamente.  Esses erros s√≥ poderiam aparecer se nossos servidores agissem maliciosamente.  Podemos garantir que eles n√£o agir√£o assim, mas voc√™ n√£o tem motivos para acreditar em n√≥s.  <i>Essa √© a coisa!</i> <br><br>  Acreditamos que a equipe da NCC fez um excelente trabalho.  Respeito ao tempo gasto para entender completamente nossa arquitetura e implementa√ß√£o.  Eles encontraram erros sutis que chamaram a aten√ß√£o de nossos desenvolvedores, embora recentemente tenhamos assistido essa parte da base de c√≥digo repetidamente.  Recomendamos que voc√™ analise o relat√≥rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ou acesse nossas Perguntas frequentes. <br><br><h1>  Perguntas frequentes </h1><br><h3>  Como se atreve a atacar um produto XYZ? </h3><br>  J√° removemos refer√™ncias a produtos espec√≠ficos do artigo. <br><br><h3>  O que mais? </h3><br>  Estamos orgulhosos de que o Keybase n√£o exija n√∫meros de telefone e possa verificar criptograficamente os identificadores do Twitter, HackerNews, Reddit e Github se voc√™ conhece algu√©m. <br><br>  E ... muito em breve ... haver√° suporte para o Mastodon. <br><br><h3>  E os ataques de redirecionamento de telefone? </h3><br>  Muitos aplicativos s√£o suscet√≠veis a redirecionar ataques.  Eve entra em um quiosque em um shopping center e convence Bob, a operadora de celular, a encaminhar o n√∫mero de telefone de Bob para seu dispositivo.  Ou ela convence o representante por telefone.  Agora, Eve pode se autenticar nos servidores de mensagens, alegando que ela √© Bob.  O resultado parece que nosso exemplo de Alice, Bob e Eve √© maior, mas ela n√£o precisa penetrar em nenhum servidor.  Alguns aplicativos oferecem "bloqueio de registro" para se proteger contra esse ataque, mas, por padr√£o, s√£o irritantes. <br><br><h3>  Ouvi o Keybase enviar algumas chaves privadas para o servidor? </h3><br>  Nos primeiros dias (2014 e in√≠cio de 2015), o Keybase funcionava como um aplicativo da Web PGP, e o usu√°rio podia escolher a fun√ß√£o para armazenar suas chaves PGP privadas em nossos servidores, criptografadas com senhas (que a Keybase n√£o sabia). <br><br>  Em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">setembro de 2015,</a> introduzimos o novo modelo Keybase.  As chaves PGP nunca s√£o usadas (e nunca usadas) no sistema de arquivos ou bate-papo do Keybase. <br><br><h3>  Como os bate-papos antigos aparecem instantaneamente em novos telefones? </h3><br>  Em alguns outros aplicativos, os novos dispositivos n√£o veem mensagens antigas, pois a sincroniza√ß√£o de mensagens antigas pelo servidor √© contr√°ria ao sigilo direto.  O aplicativo Keybase permite que voc√™ designe certas mensagens - ou conversas inteiras - como "ef√™meras".  Eles s√£o destru√≠dos ap√≥s um certo tempo e s√£o criptografados duas vezes: uma vez usando chaves de criptografia de bate-papo de longa dura√ß√£o e a outra usando chaves ef√™meras que mudam com frequ√™ncia.  Assim, as mensagens ef√™meras fornecem sigilo direto e n√£o podem ser sincronizadas entre os telefones. <br><br>  As mensagens n√£o ef√™meras permanecem at√© que o usu√°rio as exclua explicitamente e sincronize o E2E com os novos dispositivos no estilo Slack, apenas com criptografia!  Portanto, quando voc√™ adiciona algu√©m a uma equipe ou adiciona um novo dispositivo para si mesmo, as mensagens s√£o desbloqueadas. <br><br>  Mais sobre sincroniza√ß√£o no pr√≥ximo par√°grafo. <br><br><h3>  Conte-nos sobre PUKs! </h3><br>  H√° dois anos, introduzimos as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chaves para usu√°rios (PUK)</a> .  A metade p√∫blica do PUK √© anunciada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sigchain</a> p√∫blico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dos</a> usu√°rios.  A metade secreta √© criptografada para a chave p√∫blica de cada dispositivo.  Quando Alice est√° preparando um novo dispositivo, seu dispositivo antigo conhece a metade secreta de seu PUK e a chave p√∫blica do novo dispositivo.  Ele criptografa a metade secreta do PUK para a chave p√∫blica do novo dispositivo, e o novo dispositivo baixa esse texto cifrado atrav√©s do servidor.  O novo dispositivo descriptografa o PUK e pode acessar imediatamente todas as mensagens de bate-papo de longa dura√ß√£o. <br><br>  Sempre que Alice se lembra de um dispositivo, ela altera seu PUK, para que todos os seus dispositivos, exceto os mais recentes, recebam um novo PUK. <br><br>  Esse esquema de sincroniza√ß√£o √© fundamentalmente diferente do sistema PGP Keybase inicial.  Aqui, todas as chaves envolvidas t√™m 32 bytes de entropia verdadeira; elas n√£o quebram com for√ßa bruta no caso de uma invas√£o do servidor.  √â verdade que, se o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curve25519</a> ou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PRNG</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">da Go</a> estiver quebrado, tudo quebrar√°.  Mas a sincroniza√ß√£o PUK n√£o faz outras suposi√ß√µes criptogr√°ficas significativas. <br><br><h3>  E as conversas em grandes grupos? </h3><br>  <b>Os</b> grupos <b>tL; dr</b> t√™m suas pr√≥prias cadeias de assinaturas auditadas para alterar fun√ß√µes, adicionar e remover membros. <br><br>  Os pesquisadores de seguran√ßa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escreveram</a> sobre ataques fantasmas de usu√°rios em bate-papos em grupo.  Se os clientes dos usu√°rios n√£o conseguirem verificar criptograficamente a associa√ß√£o ao grupo, os servidores mal-intencionados poder√£o incorporar spyware e moles nas conversas em grupo.  O Keybase possui um sistema muito confi√°vel na forma de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√£o especial de grupos</a> , sobre a qual iremos escrever no futuro. <br><br><h3>  Voc√™ pode falar sobre NCC-KB2018-001? </h3><br>  Acreditamos que esse bug √© a descoberta mais significativa da auditoria do NCC.  O Keybase usa ativamente estruturas de dados imut√°veis ‚Äã‚Äãpara se proteger contra a ambiguidade do servidor somente de acr√©scimo.  No caso de um bug, um servidor honesto pode come√ßar a se esquivar: "Eu disse A antes, mas ocorreu um bug, eu quis dizer B".  Mas nossos clientes t√™m uma pol√≠tica comum de n√£o permitir ao servidor tanta flexibilidade: eles t√™m <a href="">exce√ß√µes codificadas</a> no caso de erros. <br><br>  Recentemente, tamb√©m introduzimos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sigchain V2</a> : esse sistema resolve os problemas de escalabilidade que n√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">previmos</a> corretamente na primeira vers√£o.  Agora, os clientes s√£o mais econ√¥micos com os dados criptogr√°ficos que eles extraem do servidor, recebendo apenas uma assinatura do final da cadeia de assinaturas, em vez da assinatura de cada link intermedi√°rio.  Portanto, os clientes perderam a oportunidade de fazer ciclos em busca de um hash de assinatura espec√≠fico, mas anteriormente usamos esses hashes para procurar links de cadeia inv√°lidos nesta lista de exce√ß√µes codificadas.  Est√°vamos nos preparando para o lan√ßamento do Sigchain V2, esquecendo esses detalhes enterrados em v√°rias camadas de abstra√ß√µes, para que o sistema simplesmente confiasse no campo a partir da resposta do servidor. <br><br>  Depois que o NCC descobriu esse erro, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">corre√ß√£o</a> foi bastante simples: procurando exce√ß√µes codificadas com um hash de link de cadeia em vez de um hash de assinatura de link de cadeia.  O cliente sempre pode calcular diretamente esses hashes. <br><br>  Tamb√©m podemos atribuir esse erro √† complexidade adicional necess√°ria para oferecer suporte ao Sigchain V1 e Sigchain V2 simultaneamente.  Clientes modernos gravam links Sigchain V2, mas todos os clientes devem suportar links herdados v1 por um tempo ilimitado.  Lembre-se de que os clientes assinam links com suas chaves privadas para cada dispositivo.  N√£o podemos coordenar todos os clientes que substituem os dados hist√≥ricos em um per√≠odo de tempo razo√°vel, pois esses clientes podem simplesmente ficar offline. <br><br><h3>  Voc√™ pode falar sobre o NCC-KB2018-004? </h3><br>  Como em 001 (veja acima), fomos desapontados por uma certa combina√ß√£o de suporte simult√¢neo a solu√ß√µes desatualizadas e otimiza√ß√£o, que parecia importante √† medida que ganhamos mais experi√™ncia trabalhando com o sistema. <br><br>  No Sigchain V2, reduzimos o tamanho das cadeias em bytes para reduzir a largura de banda necess√°ria para procurar usu√°rios.  Essa economia √© especialmente importante em telefones celulares.  Assim, codificamos links de cadeia com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MessagePack</a> , n√£o com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSON</a> , o que proporciona uma boa economia.  Por sua vez, os clientes assinam e verificam assinaturas nessas cadeias.  Pesquisadores da NCC descobriram maneiras complicadas de criar "assinaturas" que se parecem com JSON e MessagePack ao mesmo tempo, levando a um conflito.  Involuntariamente, introduzimos essa ambiguidade de decodifica√ß√£o durante a otimiza√ß√£o quando trocamos os analisadores JSON do analisador Go padr√£o para um mais eficiente.  Esse analisador r√°pido ignorou silenciosamente um monte de lixo antes de encontrar o JSON real, que inclu√≠a esse recurso de ataque poliglota.  O erro foi corrigido pela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">verifica√ß√£o de entrada adicional</a> . <br><br>  No Sigchain V2, tamb√©m aceitamos a sugest√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adam Langley de</a> que os assinantes precedem seus pacotes com assinaturas pelo prefixo da linha de contexto e pelo byte <code>\0</code> para que os verificadores n√£o se confundam com as inten√ß√µes do assinante.  No lado de verifica√ß√£o dessa id√©ia de prefixo de contexto, houve erros que podem levar a outros ataques poliglotas.  Corrigimos rapidamente essa falha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">com uma lista de permiss√µes</a> . <br><br>  Ap√≥s corrigir os dois erros, o servidor rejeita as cargas maliciosas do ataque poliglota, portanto, a explora√ß√£o dessas vulnerabilidades √© poss√≠vel apenas com a ajuda de um servidor comprometido. <br><br><h3>  Onde est√° a documenta√ß√£o? </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://keybase.io/docs</a> <br><br>  Nos pr√≥ximos meses, dedicaremos mais tempo ao trabalho na documenta√ß√£o. <br><br><h3>  Voc√™ pode contar mais sobre essa declara√ß√£o da NCC: ‚ÄúNo entanto, um invasor pode se recusar a atualizar o sigchain ou reverter o sigchain de um usu√°rio para um estado anterior, truncando os links subsequentes na cadeia‚Äù </h3><br>  O Keybase faz uso extensivo de estruturas de dados p√∫blicas imut√°veis ‚Äã‚Äãsomente para anexos que for√ßam a infraestrutura do servidor a capturar uma representa√ß√£o verdadeira dos identificadores de usu√°rios.  Podemos garantir a recupera√ß√£o de dispositivos e a remo√ß√£o de membros do grupo de forma que um servidor comprometido n√£o possa reverter.  Se o servidor decidir mostrar uma exibi√ß√£o inconsistente, esse desvio se tornar√° parte do registro p√∫blico imut√°vel.  Os clientes da Keybase ou um auditor de terceiros podem detectar uma incompatibilidade a qualquer momento ap√≥s o ataque.  Acreditamos que essas garantias excedem em muito as garantias dos produtos concorrentes e s√£o quase √≥timas, levando em considera√ß√£o as limita√ß√µes pr√°ticas de telefones celulares e clientes com poder de computa√ß√£o limitado. <br><br>  Simplificando, o Keybase n√£o pode inventar assinaturas de outra pessoa.  Como qualquer servidor, ele pode armazenar dados.  Mas a nossa √°rvore Merkle transparente foi projetada para armazen√°-los por um per√≠odo muito curto e √© sempre poss√≠vel descobrir. <br><br><h3>  Como o Keybase lida com redefini√ß√µes de conta? </h3><br>  Quando os usu√°rios do Keybase realmente perdem todos os seus dispositivos (em vez de adicionar novos ou perder alguns), eles precisam redefinir.  Depois de redefinir a conta, o usu√°rio √© basicamente novo, mas ele tem o mesmo nome de usu√°rio.  Ele n√£o pode assinar a "instru√ß√£o de redefini√ß√£o" porque perdeu todas as suas chaves.  Portanto, o servidor Keybase confirma a instru√ß√£o n√£o apag√°vel na √°rvore Merkle, o que significa redefinir.  Os clientes for√ßam a impossibilidade de reverter essas instru√ß√µes.  Em um artigo futuro, mecanismos espec√≠ficos ser√£o descritos em detalhes. <br><br>  Este usu√°rio ter√° que adicionar novamente as verifica√ß√µes de identidade (Twitter, Github, o que for) com as novas chaves. <br><br><h3>  Um servidor pode simplesmente trocar a folha da √°rvore Merkle de algu√©m para anunciar um conjunto de chaves completamente diferente? </h3><br>  Os autores da NCC est√£o considerando um servidor hostil Keybase que muda completamente a folha da √°rvore Merkle, substituindo o conjunto de chaves verdadeiras de Bob por um conjunto falso completamente novo.  Um servidor atacante tem duas op√ß√µes.  Primeiro, ele pode bifurcar o estado do mundo colocando Bob em um garfo e aqueles que ele quer enganar em outro.  Em segundo lugar, ele pode "trapacear" publicando uma vers√£o da √°rvore Merkle com o conjunto correto de chaves Bob e outras vers√µes com um conjunto falso.  Os usu√°rios que interagem regularmente com Bob descobrir√£o esse ataque, pois verificar√£o se as vers√µes baixadas anteriormente do hist√≥rico de Bob s√£o prefixos v√°lidos das novas vers√µes baixadas do servidor.  Os validadores de terceiros que examinam todas as atualiza√ß√µes do Keybase tamb√©m notar√£o esse ataque.  Se voc√™ escrever um validador de Keybase de terceiros que gostamos, podemos oferecer uma recompensa significativa.  Consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>max</code></a> no Keybase.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Caso contr√°rio, esperamos planejar em breve a cria√ß√£o de um validador aut√¥nomo. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Voc√™ pode acreditar no que eu li at√© o fim? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Leia ou apenas role para baixo? </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449350/">https://habr.com/ru/post/pt449350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449340/index.html">Bloquear oracle baseado em oracle aleat√≥rio com base em assinatura digital</a></li>
<li><a href="../pt449342/index.html">Or√°culo aleat√≥rio baseado em assinatura digital blockchain</a></li>
<li><a href="../pt449344/index.html">Kodim - pizza</a></li>
<li><a href="../pt449346/index.html">MODX Digest # 4 (8 a 22 de abril de 2019)</a></li>
<li><a href="../pt449348/index.html">Buildroot - parte 2. Criando a configura√ß√£o da sua placa; aplica√ß√£o de √°rvore externa, sobreposi√ß√£o de rootfs, scripts de p√≥s-constru√ß√£o</a></li>
<li><a href="../pt449352/index.html">Como constru√≠mos o monitoramento em Prometheus, Clickhouse e ELK</a></li>
<li><a href="../pt449356/index.html">Processos de neg√≥cios. Extra√ß√£o do modelo BPMN do documento. Parte 1</a></li>
<li><a href="../pt449358/index.html">Novas Fronteiras em F√≠sica</a></li>
<li><a href="../pt449360/index.html">A Microsoft adaptou a realidade virtual para pessoas com defici√™ncia visual</a></li>
<li><a href="../pt449362/index.html">UPS de assist√™ncia m√©dica: Experi√™ncia em sa√∫de da Delta Electronics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>