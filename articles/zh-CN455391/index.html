<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¸ğŸ» ğŸ˜¢ ğŸ˜‰ ç¬¬1éƒ¨åˆ†ï¼šéè‡ªç„¶æ –æ¯åœ°ä¸­çš„RISC-V / RocketChip ğŸ‚ğŸ½ ğŸï¸ ğŸ¥š</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ€è¿‘åœ¨å“ˆå¸ƒé›·ï¼ˆHabrÃ© ï¼‰ä¸Šå‘è¡¨äº†ä¸€ç¯‡æ–‡ç« ï¼Œä»‹ç»äº†å¦‚ä½•åœ¨ä¸èŠ±è´¹ç¡¬ä»¶çš„æƒ…å†µä¸‹å°è¯•RISC-Væ¶æ„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨è°ƒè¯•æ¿ä¸Šæ‰§è¡Œæ­¤æ“ä½œæ€ä¹ˆåŠï¼Ÿ è®°ä½æœ‰å…³æ¸¸æˆç”Ÿæˆå™¨çš„æ¨¡å› ï¼šâ€œå›¾å½¢ä¸æ¯”å±æœºè¿˜ç³Ÿâ€ï¼Œâ€œæ‚¨å¯ä»¥æŠ¢åŠ«corovansâ€å’Œâ€œ Generateâ€ï¼ˆç”Ÿæˆï¼‰æŒ‰é’®æ ·å¼çš„å¤§çº¦20ä¸ªå¤é€‰æ ‡è®°ã€‚ RocketCh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç¬¬1éƒ¨åˆ†ï¼šéè‡ªç„¶æ –æ¯åœ°ä¸­çš„RISC-V / RocketChip</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455391/"><img src="https://habrastorage.org/webt/it/on/yz/itonyz90xq9l_bvyih5h20xhuds.png" alt="é…ç½®RocketChip" align="left"><br><p> æœ€è¿‘åœ¨å“ˆå¸ƒé›·ï¼ˆHabrÃ© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼‰ä¸Š</a>å‘è¡¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äº†ä¸€ç¯‡æ–‡ç« ï¼Œ</a>ä»‹ç»äº†å¦‚ä½•åœ¨ä¸èŠ±è´¹ç¡¬ä»¶çš„æƒ…å†µä¸‹å°è¯•RISC-Væ¶æ„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨è°ƒè¯•æ¿ä¸Šæ‰§è¡Œæ­¤æ“ä½œæ€ä¹ˆåŠï¼Ÿ è®°ä½æœ‰å…³æ¸¸æˆç”Ÿæˆå™¨çš„æ¨¡å› ï¼šâ€œå›¾å½¢ä¸æ¯”å±æœºè¿˜ç³Ÿâ€ï¼Œâ€œæ‚¨å¯ä»¥æŠ¢åŠ«corovansâ€å’Œâ€œ Generateâ€ï¼ˆç”Ÿæˆï¼‰æŒ‰é’®æ ·å¼çš„å¤§çº¦20ä¸ªå¤é€‰æ ‡è®°ã€‚  RocketChip SoCç”Ÿæˆå™¨çš„æ’åˆ—æ–¹å¼å¤§è‡´ç›¸åŒï¼Œåªæ˜¯ä¸å­˜åœ¨å¸¦æœ‰å¤é€‰æ ‡è®°çš„çª—å£ï¼Œè€Œæ˜¯Scalaä»£ç ä»¥åŠä¸€äº›æ±‡ç¼–å’ŒMakeæ–‡ä»¶ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å±•ç¤ºå°†RocketChipä»å…¶æœ¬åœ°Xilinxç§»æ¤åˆ°Altera / Intelçš„è¿‡ç¨‹æœ‰å¤šä¹ˆå®¹æ˜“ã€‚ </p><a name="habracut"></a><br><p> <strong>å…è´£å£°æ˜ï¼š</strong>ä½œè€…å¯¹â€œçƒ§æ¯â€æ¿ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»-ä»”ç»†è§‚å¯Ÿæ‚¨å¦‚ä½•é…ç½®å¼•è„šï¼Œç‰©ç†è¿æ¥ç­‰ã€‚ å¥½äº†ï¼Œè¿˜è¦éµå®ˆå®‰å…¨é¢„é˜²æªæ–½ã€‚ æ‚¨ä¸åº”è¯¥ä»¥ä¸ºæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é€šè¿‡USBè¿æ¥çš„ï¼Œè¿™ç»å¯¹å¯¹ä¸€ä¸ªäººæ˜¯å®‰å…¨çš„ï¼šæ®æˆ‘åœ¨ä¹‹å‰çš„å®éªŒä¸­äº†è§£åˆ°ï¼Œå³ä½¿æ‚¨ä½¿ç”¨USBæ¿ï¼Œä¹Ÿä¸å¿…ç”¨è„šè§¦æ‘¸åŠ çƒ­ç”µæ± ï¼Œå› ä¸ºä¸¤è€…ä¹‹é—´çš„ç”µåŠ¿å·®å¾ˆå¤§ã€‚ ï¼Œæˆ‘å‡ ä¹ä¸æ˜¯ä¸“ä¸šçš„plisovodeæˆ–ç”µå­å·¥ç¨‹å¸ˆ-æˆ‘åªæ˜¯Scalaç¨‹åºå‘˜ã€‚ </p><br><p>æ®æˆ‘äº†è§£ï¼Œç”¨äºè°ƒè¯•RocketChipçš„æœ€åˆå¹³å°æ˜¯Xilinx FPGAã€‚ ä»æˆ‘ä»¬å³å°†å…‹éš†çš„å­˜å‚¨åº“æ¥çœ‹ï¼Œå®ƒä¹Ÿå·²ç§»æ¤åˆ°Microsemiã€‚ æˆ‘åœ¨æŸå¤„å¬è¯´è¿‡ä½¿ç”¨Alteraï¼Œä½†æ²¡æœ‰çœ‹åˆ°æºã€‚ äº‹å®è¯æ˜ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼šä»æˆ‘ä»¬æ”¶åˆ°è‘£äº‹ä¼šå¹¶å¼€å§‹ç ”â€‹â€‹ç©¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SiFive Freedom</a>å­˜å‚¨åº“åˆ°å·¥ä½œçš„æ— å†…å­˜ï¼ˆå³åªæœ‰å¤„ç†å™¨å¯„å­˜å™¨ï¼ŒBootROMå’Œå†…å­˜æ˜ å°„å¯„å­˜å™¨ï¼‰çš„32ä½â€œå¾®æ§åˆ¶å™¨â€ï¼ˆå°½ç®¡è¿™å·²ç»æ˜¯äº‹å®ï¼‰äº†ã€‚ <em>çº³ç±³æ§åˆ¶å™¨çš„</em>ç»“æœ...ï¼‰3å¤©å‡å’Œ4ä¸ªå·¥ä½œæ—¥è¿‡å»äº†ï¼Œè€Œä¸”å¦‚æœæˆ‘ç«‹å³å®šä¹‰å…¨å±€å®šä¹‰<code>SYNTHESIS</code> ï¼ŒèŠ±è´¹çš„æ—¶é—´ç”šè‡³æ›´å°‘ã€‚ </p><br><h1 id="materialy"> ç”¨æ–™ </h1><br><p> å¯¹äºåˆå­¦è€…-å¹¿ä¹‰ä¸Šçš„<em>ææ–™</em>æ¸…å•ã€‚ æˆ‘ä»¬éœ€è¦ä»¥ä¸‹è½¯ä»¶ï¼š </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RocketChip-</a>åŒ…å«å¤„ç†å™¨æœ¬èº«å’Œæ±‡ç¼–ç¯å¢ƒï¼ˆåŒ…æ‹¬æè¿°å‡ ä¸ªå­å­˜å‚¨åº“ï¼‰ã€‚ èƒ½å¤Ÿä½¿ç”¨Rocketæ ¸å¿ƒé¡ºåºå¤„ç†å™¨åˆ›å»ºRocketChipã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SiFive Freedom-</a>ç»‘å®šå„ç§è°ƒè¯•æ¿-æˆ‘ä»¬å°†åœ¨å…¶ä¸­æ·»åŠ å¯¹æˆ‘ä»¬çš„æ”¯æŒ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">rocket-</a> tools-ç”¨äºä¸º32ä½å’Œ64ä½RISC-Væ¶æ„æ„å»ºä»£ç å’Œè°ƒè¯•çš„å·¥å…· </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">openocd-riscv-</a>ç”¨äºå¸¦æœ‰RISC-Vå†…æ ¸çš„JTAGï¼ˆè‡³å°‘æ˜¯RocketChipï¼‰çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenOCD</a>ç«¯å£ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IntelliJ IDEAç¤¾åŒºï¼Œ</a>ç”¨äºç¼–è¾‘Scalaä»£ç ï¼Œè¿™æ˜¯RocketChipä¸­çš„å¤§å¤šæ•°ä»£ç  </li><li>  SiFiveçš„é¢„ç»„è£…å·¥å…·é“¾ä¹Ÿå¯èƒ½æ´¾ä¸Šç”¨åœºï¼Œæˆ‘å·²ç»åœ¨å‰é¢æåˆ°çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« ä¸­</a>çœ‹åˆ°äº†ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a> </li></ul><br><p> é“éœ€è¦ä»€ä¹ˆï¼š </p><br><ul><li>  Aliexpressçš„Zeowaaå¥—ä»¶ï¼šå¸¦æœ‰Cyclone 4 EP4CE115å’Œï¼ˆå…‹éš†çš„ï¼‰USB Blasterçš„æ¿å¡ </li><li>  RaspberryPiä½œä¸ºè½¯æ ¸çš„JTAGè°ƒè¯•å™¨ </li></ul><br><p> å‡å®šä¸»æœºæ˜¯å®‰è£…äº†Ubuntuå’ŒQuartus Lite 18çš„åŠŸèƒ½ç›¸å¯¹å¼ºå¤§çš„è®¡ç®—æœºã€‚ </p><br><p> å®é™…ä¸Šï¼Œæœ‰ä¸€ä¸ªé€‰é¡¹å¯ä»¥ä»ç›¸åŒçš„åä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FireSimçš„SiFive</a>åœ¨Amazonäº‘ä¸­çš„FPGAå®ä¾‹ä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯åŠ¨</a> ï¼Œä½†è¿™å¹¶ä¸æ˜¯é‚£ä¹ˆæœ‰è¶£ï¼Œ <del> æ˜¯çš„ï¼ŒLEDçš„å¯è§åº¦å¾ˆå·® </del>  ã€‚ æ­¤å¤–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†éœ€è¦åœ¨æ§åˆ¶å®ä¾‹ä¸ŠæŒ‡å®šAPIå¯†é’¥ä»¥å¯åŠ¨å…¶ä»–è™šæ‹Ÿæœºï¼Œå¹¶ä¸”éœ€è¦<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ¼å¤–å°å¿ƒ</a> ï¼Œå¦åˆ™æ ¹æ®ä¼ è¨€ï¼Œæ‚¨å¯èƒ½ä¼šèƒŒè´Ÿæ•°ä¸‡ç¾å…ƒçš„å€ºåŠ¡è€Œé†’æ¥ä¸€å¤©... </p><br><h1 id="izuchaem-obstanovku"> æˆ‘ä»¬ç ”ç©¶æƒ…å†µ </h1><br><p> é¦–å…ˆï¼Œæˆ‘ä»ç”µè·¯æ¿ä¾›åº”å•†å¤„è·å–äº†<code>read_write_1G</code>æµ‹è¯•é¡¹ç›®ï¼Œå¹¶å°è¯•å‘å…¶ä¸­æ·»åŠ æ‰€éœ€çš„èµ„æºã€‚ ä¸ºä»€ä¹ˆä¸åˆ›å»ºä¸€ä¸ªæ–°çš„å‘¢ï¼Ÿ å› ä¸ºæˆ‘æ˜¯æ–°æ¥çš„ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå¼•è„šçš„åç§°å·²ç»è¢«æ˜ å°„ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦ä»æŸå¤„è·å–æºä»£ç ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†éœ€è¦å·²ç»æŒ‡å®šçš„<code>freedom</code>å­˜å‚¨åº“ï¼ˆä¸è¦ä¸<code>freedom-e-sdk</code>æ··æ·†ï¼‰ã€‚ ä¸ºäº†è·å¾—è‡³å°‘ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬å°†æ ¹æ®è¯´æ˜æ”¶é›†<code>rocket-tools</code> ï¼ˆå®é™…ä¸Šæ˜¯å¯åŠ¨ä¸¤ä¸ªè„šæœ¬å¹¶ç­‰å¾…å¾ˆå¤šæ—¶é—´ï¼‰ï¼Œç„¶åè¿è¡Œ </p><br><pre> <code class="plaintext hljs">RISCV=$(pwd)/../rocket-tools make -f Makefile.e300artydevkit verilog mcs</code> </pre> <br><p> ç›®æ ‡<code>verilog</code>ç”Ÿæˆå¸¦æœ‰å¤„ç†å™¨æºçš„å·¨å¤§Verilogæ–‡ä»¶ï¼Œè€Œ<code>mcs</code>ç¼–è¯‘BootROMã€‚ ä¸å¿…æ‹…å¿ƒ<code>mcs</code>å¤±è´¥-æˆ‘ä»¬æ²¡æœ‰Xilinx Vivadoï¼Œå› æ­¤ç¼–è¯‘åçš„BootROMæ— æ³•è½¬æ¢ä¸ºVivadoæ‰€éœ€çš„æ ¼å¼ã€‚ </p><br><p> é€šè¿‡èœå•é¡¹Quartus <strong>Project-&gt;åœ¨Projectä¸­æ·»åŠ /åˆ é™¤æ–‡ä»¶...</strong>æ·»åŠ <code>freedom/builds/e300artydevkit/sifive.freedom.everywhere.e300artydevkit.E300ArtyDevKitConfig.v</code> ï¼Œåœ¨â€œå¸¸è§„â€é€‰é¡¹å¡ä¸Šè®¾ç½®é¡¶çº§å®ä½“ï¼š <strong>E300ArtyDevKitFPGAChip</strong>å¹¶å¼€å§‹ç¼–è¯‘ï¼ˆå¯èƒ½ï¼Œé¡¶çº§å®ä½“è‡ªåŠ¨å®Œæˆåˆ—è¡¨ä»…åœ¨ç¬¬ä¸€æ¬¡ç¼–è¯‘åå‡ºç°ï¼‰ã€‚ ç»“æœï¼Œæˆ‘ä»¬æ”¶åˆ°å¤§é‡é”™è¯¯ï¼Œå‘Šè¯‰æˆ‘ä»¬ç¼ºå°‘<code>AsyncResetReg</code> ï¼Œ <code>IOBUF</code>æ¨¡å—ç­‰ã€‚ å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™æ‚¨å¿˜è®°æ›´æ”¹é¡¶çº§å®ä½“ã€‚ å¦‚æœæ‚¨ä»”ç»†æŸ¥çœ‹æºä»£ç ï¼Œåˆ™å¯ä»¥ç›´æ¥æ‰¾åˆ°<code>AsyncResetReg.v</code>æ–‡ä»¶ï¼Œä½†æ˜¯<code>IOBUF</code>æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Xilinx</a> IPå†…æ ¸çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»‘å®š</a> ã€‚ é¦–å…ˆï¼Œ <code>freedom/rocket-chip/src/main/resources/vsrc/AsyncResetReg.v</code>æ·»åŠ <code>freedom/rocket-chip/src/main/resources/vsrc/AsyncResetReg.v</code> ã€‚ å¹¶ä¸”è¿˜å°†æ·»åŠ <code>plusarg_reader.v</code> ã€‚ </p><br><p> è¿è¡Œç¼–è¯‘å¹¶å¾—åˆ°å¦ä¸€ä¸ªé”™è¯¯ï¼š </p><br><pre> <code class="plaintext hljs">Error (10174): Verilog HDL Unsupported Feature error at plusarg_reader.v(18): system function "$value$plusargs" is not supported for synthesis</code> </pre> <br><p> åŸåˆ™ä¸Šï¼Œå¯ä»¥ä»åç§°ç›¸ä¼¼çš„æ–‡ä»¶ä¸­è·å¾—éåˆæˆçš„æ„é€ ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">plusarg_reader.v</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// See LICENSE.SiFive for license details. //VCS coverage exclude_file // No default parameter values are intended, nor does IEEE 1800-2012 require them (clause A.2.4 param_assignment), // but Incisive demands them. These default values should never be used. module plusarg_reader #(parameter FORMAT="borked=%d", DEFAULT=0) ( output [31:0] out ); `ifdef SYNTHESIS assign out = DEFAULT; `else reg [31:0] myplus; assign out = myplus; initial begin if (!$value$plusargs(FORMAT, myplus)) myplus = DEFAULT; end `endif endmodule</code> </pre> </div></div><br><p> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œè¯¥æ¨¡å—å¯èƒ½ä»å‘½ä»¤è¡Œè¯»å–æ¨¡æ‹Ÿé€‰é¡¹ï¼Œå¹¶ä¸”åœ¨åˆæˆæ—¶ä»…è¿”å›é»˜è®¤å€¼ã€‚ é—®é¢˜åœ¨äºæˆ‘ä»¬çš„é¡¹ç›®æ²¡æœ‰å®šä¹‰åä¸º<code>SYNTHESIS</code>å®šä¹‰ã€‚ å¯ä»¥åœ¨<code>ifdef</code>çš„å‰ä¸€è¡Œçš„å‰ä¸€è¡Œ<code>ifdef</code> <code>`define SYNTHESIS</code> ï¼Œç„¶åèŠ±åŠä¸ªæ˜ŸæœŸçš„æ—¶é—´æ¥äº†è§£ä¸ºä»€ä¹ˆå†…æ ¸æ— æ³•å¯åŠ¨ï¼ˆæ¯•ç«Ÿï¼Œæ„ŸæŸ“æ˜¯åˆæˆçš„...ï¼‰ã€‚ ä¸è¦é‡å¤æˆ‘çš„é”™è¯¯ï¼Œè€Œåªéœ€å†æ¬¡æ‰“å¼€é¡¹ç›®å±æ€§ï¼Œç„¶ååœ¨â€œ <strong>ç¼–è¯‘å™¨è®¾ç½®â€-&gt;â€œ Verilog HDLè¾“å…¥â€</strong>é€‰é¡¹å¡ä¸Šï¼Œå®šä¹‰<code>SYNTHESIS</code>å®ï¼Œå¹¶ä¸”è‡³å°‘åœ¨â€œ <code>&lt;NONE&gt;</code> ï¼ˆç©ºè¡Œï¼‰ä¸­å®šä¹‰ã€‚ </p><br><p> åœ¨è¿™é‡Œï¼ ç°åœ¨Quartuså‘èª“ç¼ºå°‘ç»‘å®š-æ˜¯æ—¶å€™åœ¨Ideaä¸­å»ºç«‹ä¸€ä¸ªé¡¹ç›®å¹¶å¼€å§‹ç§»æ¤äº†ã€‚ </p><br><h1 id="znakomimsya-s-proektom"> äº†è§£é¡¹ç›® </h1><br><p> æˆ‘ä»¬å‘Šè¯‰å¯¼å…¥é¡¹ç›®æ„æƒ³ï¼ŒæŒ‡å®š<code>freedom</code>å­˜å‚¨åº“çš„è·¯å¾„ï¼ŒæŒ‡ç¤ºsbté¡¹ç›®çš„ç±»å‹ï¼Œæ£€æŸ¥ä½¿ç”¨sbt shellè¿›è¡Œå¯¼å…¥ï¼Œä»¥åŠæ„å»ºå¤é€‰æ¡†ã€‚ ç«¥è¯æ•…äº‹åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œä½†ä¼¼ä¹æ‰¾ä¸åˆ°ä¸€ä¸ªåŠé¡¹ç›®çš„æƒ³æ³•-æ‰€æœ‰æºä»£ç éƒ½æ ‡è®°ä¸ºçº¢è‰²ã€‚ æ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>çš„ä¿¡æ¯ï¼Œæˆ‘å¾—åˆ°äº†ä»¥ä¸‹è¿‡ç¨‹ï¼š </p><br><ul><li> æ‰“å¼€sbt shellçª—å£ </li><li> è¾“å…¥<code>clean</code> </li><li> æŒ‰ä¸‹å·¦ä¾§çš„ç»¿è‰²â€œé‡å¯â€æŒ‰é’® </li><li> é‡æ–°å¯åŠ¨sbtåï¼Œè¾“å…¥ç¬¬ä¸€ä¸ªå‘½ä»¤<code>++2.12.4</code> ï¼Œä»è€Œå°†æ‰€æœ‰å­é¡¹ç›®åˆ‡æ¢åˆ°Scala 2.12.4ç‰ˆï¼Œç„¶åè¿è¡Œ<code>compile</code> </li><li> å•å‡»åˆ·æ–°æ‰€æœ‰sbté¡¹ç›®çš„æƒ³æ³• </li><li>  PROFITï¼ï¼Œç°åœ¨èƒŒå…‰æ­£å¸¸å·¥ä½œ </li></ul><br><p> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å°†å°è¯•ä»¥æŸç§æ–¹å¼è‡³å°‘åœ¨åŠæ‰‹åŠ¨æ¨¡å¼ä¸‹ç»„è£…é¡¹ç›®ã€‚  <strong>é¡ºä¾¿è¯´ä¸€å¥ï¼Œæœ‰äººå‘Šè¯‰<code>quartus_ipcreate</code> ï¼Œ <code>quartus_ipcreate</code>åœ¨Lite Editionä¸­æ ¹æœ¬ä¸å­˜åœ¨å—ï¼Ÿ</strong> ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ‰‹åŠ¨åˆ›å»ºIPå˜ä½“ï¼Œå¹¶ä¸”ç»‘å®šä»…ä»¥BlackBoxçš„å½¢å¼ä½äºScalaä¸Šã€‚ </p><br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹ä»¥ä¸‹ç›®å½•å±‚æ¬¡ç»“æ„æ„Ÿå…´è¶£ï¼š </p><br><pre> <code class="plaintext hljs">fpga-shells () | +-src/main/scala | +- ip/intel &lt;--     IP Variations | | | +- Intel.scala | +- shell/intel &lt;--       | +- ZeowaaShell.scala src/main/scala | +- everywhere.e300artydevkit &lt;--   "" ,    | +- zeowaa/e115 &lt;--      "" SoC | +- Config +- FPGAChip +- Platform +- System</code> </pre> <br><p> æ‚¨è¿˜éœ€è¦æ·»åŠ ç±»ä¼¼äº<code>Makefile.e300artydevkit</code> ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><p>  <strong>Makefile.zeowaa-e115ï¼š</strong> </p><br><pre> <code class="plaintext hljs"># See LICENSE for license details. base_dir := $(patsubst %/,%,$(dir $(abspath $(lastword $(MAKEFILE_LIST))))) BUILD_DIR := $(base_dir)/builds/zeowaa-e115 FPGA_DIR := $(base_dir)/fpga-shells/intel MODEL := FPGAChip PROJECT := sifive.freedom.zeowaa.e115 export CONFIG_PROJECT := sifive.freedom.zeowaa.e115 export CONFIG := ZeowaaConfig export BOARD := zeowaa export BOOTROM_DIR := $(base_dir)/bootrom/xip rocketchip_dir := $(base_dir)/rocket-chip sifiveblocks_dir := $(base_dir)/sifive-blocks include common.mk</code> </pre> <br><h1 id="bindingi"> ç»‘å®š </h1><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬å®ç°æ­¤<code>IOBUF</code>å‡ ä¹æ²¡æœ‰å›°éš¾ã€‚ ä»Scalaä»£ç åˆ¤æ–­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å¾®ç”µè·¯çš„ç‰©ç†â€œè…¿â€ï¼ˆçƒï¼‰çš„æ¨¡å—ï¼šå®ƒå¯ä»¥æ‰“å¼€ï¼Œå¯ä»¥æ‰“å¼€æˆ–å®Œå…¨å…³é—­ã€‚ åœ¨Quartusçª—å£çš„å³ä¾§ï¼Œæˆ‘ä»¬å°†åœ¨IP Catalogä¸­è¾“å…¥â€œ IOBUFâ€ï¼Œå¹¶ç«‹å³è·å¾—ä¸€ä¸ªåä¸º<code>ALTIOBUF</code>çš„ç»„ä»¶ã€‚ è®©æˆ‘ä»¬ä¸ºå˜ä½“æ–‡ä»¶è®¾ç½®ä¸€äº›åç§°ï¼Œé€‰æ‹©â€œä½œä¸ºåŒå‘ç¼“å†²åŒºâ€ã€‚ ä¹‹åï¼Œä¸€ä¸ªåä¸º<code>iobuf</code>çš„æ¨¡å—å°†å‡ºç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼š </p><br><pre> <code class="plaintext hljs">// ... module obuf ( datain, oe, dataout); input [0:0] datain; input [0:0] oe; output [0:0] dataout; wire [0:0] sub_wire0; wire [0:0] dataout = sub_wire0[0:0]; obuf_iobuf_out_d5t obuf_iobuf_out_d5t_component ( .datain (datain), .oe (oe), .dataout (sub_wire0)); endmodule // ...</code> </pre> <br><p> è®©æˆ‘ä»¬ä¸ºå…¶ç¼–å†™ä¸€ä¸ªé»‘ç›’æ¨¡å—ï¼š </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ip.intel <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3._ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3.core.{<span class="hljs-type"><span class="hljs-type">Analog</span></span>, <span class="hljs-type"><span class="hljs-type">BlackBox</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> freechips.rocketchip.jtag.<span class="hljs-type"><span class="hljs-type">Tristate</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOBUF</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlackBox</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> datain = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dataout = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> oe = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dataio = <span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>) }) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">desiredName</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"iobuf"</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOBUF</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">Analog</span></span>, t: <span class="hljs-type"><span class="hljs-type">Tristate</span></span>): <span class="hljs-type"><span class="hljs-type">IOBUF</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> res = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">IOBUF</span></span>) res.io.datain := t.data res.io.oe := t.driven a &lt;&gt; res.io.dataio res } }</code> </pre> <br><p> æˆ‘ä»¬æè¿°äº†<code>Analog</code>ç±»å‹çš„Verilogue <code>inout</code> ï¼Œå¹¶ä¸”requiredNameæ–¹æ³•å…è®¸<code>desiredName</code>æ›´æ”¹æ¨¡å—çš„ç±»åã€‚ è¿™ä¸€ç‚¹ç‰¹åˆ«é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„æ˜¯ç»‘å®šå™¨ï¼Œè€Œä¸æ˜¯å®ç°ã€‚ </p><br><p> æˆ‘ä»¬è¿˜éœ€è¦BootROM-ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†<strong>ROM</strong>çš„å˜ä½“<strong>ï¼š1-PORT</strong> ï¼ˆ2048 x 32ä½å­—ï¼Œä»…åœ°å€å¯„å­˜å™¨ï¼Œåˆ›å»º<code>rden</code>ç«¯å£ï¼‰ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º<code>rom</code>çš„å—ï¼Œå› ä¸ºç„¶åæˆ‘ä»¬å¿…é¡»ä¸º<code>ROMGenerator</code>ç±»<code>ROMGenerator</code>çš„æ¥å£ç¼–å†™ä¸€ä¸ªé€‚é…å™¨ï¼š <code>ROMGenerator</code>è€Œä¸æ˜¯<code>me</code>å’Œæˆ‘ä»¬æ‰€ç¼ºå°‘çš„<code>oe</code> ï¼ˆå®ƒä»é™„åŠ åˆ°1ï¼‰ï¼š </p><br><p>  <strong>BootROM.vï¼š</strong> </p><br><pre> <code class="plaintext hljs">module BootROM( input wire [10:0] address, input wire clock, input wire me, input wire oe, output wire [31:0] q ); rom r( .address(address), .clock(clock), .rden(me), .q(q) ); endmodule</code> </pre><br><p> ç«‹å³å‘ç°å¦ä¸€ä¸ªé—®é¢˜ï¼šç”±äºæŸç§åŸå› ï¼Œæ”¶é›†å™¨ç”Ÿæˆçš„åå…­è¿›åˆ¶æ–‡ä»¶ä¸Quartusä¸å…¼å®¹ã€‚ åœ¨ä»”ç»†æµè§ˆäº†è‹±ç‰¹å°”HEXæ–‡ä»¶çš„ä¸»é¢˜ä¹‹åï¼ˆæ®æˆ‘æ‰€çŸ¥ï¼Œè‹±ç‰¹å°”æ—©äºè´­ä¹°æ­¤è‹±ç‰¹å°”Alteraçš„æ—¶é—´ï¼‰ï¼Œå°±å‡ºç°äº†å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºHEXçš„å‘½ä»¤ï¼š </p><br><pre> <code class="plaintext hljs">srec_cat -Output builds/zeowaa-e115/xip.hex -Intel builds/zeowaa-e115/xip.bin -Binary -Output_Block_Size 128</code> </pre> <br><p> å› æ­¤ï¼Œæˆ‘ä»¬çš„Makefileå°†ä¼šè¿›è¡Œä¸€äº›è½¬æ¢ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">éšè—æ–‡å­—</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">base_dir := $(patsubst %/,%,$(dir $(abspath $(lastword $(MAKEFILE_LIST))))) BUILD_DIR := $(base_dir)/builds/zeowaa-e115 FPGA_DIR := $(base_dir)/fpga-shells/intel MODEL := FPGAChip PROJECT := sifive.freedom.zeowaa.e115 export CONFIG_PROJECT := sifive.freedom.zeowaa.e115 export CONFIG := ZeowaaConfig export BOARD := zeowaa export BOOTROM_DIR := $(base_dir)/bootrom/xip rocketchip_dir := $(base_dir)/rocket-chip sifiveblocks_dir := $(base_dir)/sifive-blocks all: verilog $(MAKE) -C $(BOOTROM_DIR) clean romgen || true srec_cat -Output $(BUILD_DIR)/xip.hex -Intel $(BUILD_DIR)/xip.bin -Binary -Output_Block_Size 128 include common.mk</code> </pre> </div></div><br><h1 id="ono-shevelitsyaw-sinteziruetsya"> å®ƒç§»åŠ¨^ Wåˆæˆ </h1><br><p> å› æ­¤ï¼Œæ•´ä¸ªé¡¹ç›®æ˜¯ç»¼åˆçš„ï¼Œç°åœ¨æœ€æœ‰è¶£çš„æ˜¯è°ƒè¯•ã€‚ é¦–å…ˆå…è®¸çŒ«è¿›å…¥æˆ¿é—´ï¼Œä¹Ÿè®¸è®©JTAGè¿›å…¥å¾®æ§åˆ¶å™¨ã€‚ è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºè°ƒè¯•çš„å‡ ä¹æœ€å°çš„ç³»ç»Ÿï¼šBootROMå¼•å¯¼ï¼ŒGPIOé—ªçƒLEDï¼Œä»¥åŠJTAGäº†è§£ä¸ºä»€ä¹ˆä»€ä¹ˆéƒ½ä¸åŠ è½½è€Œä¸é—ªçƒã€‚ ä¸<code>E300ArtyDevKit</code>åˆ›å»ºä¸€ä¸ªåŒ…å«å››ä¸ªæ–‡ä»¶çš„åŒ…ã€‚ é¦–å…ˆ </p><br><p>  <strong>Config.scalaï¼š</strong> </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultZeowaaConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Config</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> new </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">WithNBreakpoints</span></span></span></span><span class="hljs-class"><span class="hljs-params">(2</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">++</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithNExtTopInterrupts</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">0</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">++</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithJtagDTM</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">++</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TinyConfig</span></span></span><span class="hljs-class"> ) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Peripherals</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Config</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(site, here, up</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">PeripheryGPIOKey</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-type"><span class="hljs-type">GPIOParams</span></span>(address = <span class="hljs-type"><span class="hljs-type">BigInt</span></span>(<span class="hljs-number"><span class="hljs-number">0x64002000</span></span>L), width = <span class="hljs-number"><span class="hljs-number">6</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">PeripheryMaskROMKey</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-type"><span class="hljs-type">MaskROMParams</span></span>(address = <span class="hljs-number"><span class="hljs-number">0x10000</span></span>, name = <span class="hljs-string"><span class="hljs-string">"BootROM"</span></span>)) }) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZeowaaConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Config</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> new </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Peripherals</span></span></span></span><span class="hljs-class"><span class="hljs-params"> ++ new </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">DefaultZeowaaConfig</span></span></span></span><span class="hljs-class"><span class="hljs-params">(</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alter</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(site, here, up</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">JtagDTMKey</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">JtagDTMConfig</span></span> ( idcodeVersion = <span class="hljs-number"><span class="hljs-number">2</span></span>, idcodePartNum = <span class="hljs-number"><span class="hljs-number">0xe31</span></span>, idcodeManufId = <span class="hljs-number"><span class="hljs-number">0x489</span></span>, debugIdleCycles = <span class="hljs-number"><span class="hljs-number">5</span></span>) }) )</code> </pre> <br><p> è¯¥è¯´æ˜å¤§éƒ¨åˆ†æ˜¯ä»E300å¤åˆ¶å’Œæˆªæ–­çš„ï¼šæˆ‘ä»¬è¯¢é—®å†…æ ¸ç”±ä»€ä¹ˆç»„æˆä»¥åŠå®ƒåœ¨åœ°å€ç©ºé—´ä¸­çš„ä½ç½®ã€‚ è¯·æ³¨æ„ï¼Œå°½ç®¡æˆ‘ä»¬æ²¡æœ‰RAMï¼ˆè¿™æ˜¯<code>TinyConfig</code>çš„é»˜è®¤<code>TinyConfig</code> ï¼‰ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œè€Œä¸”æ˜¯32ä½ï¼ </p><br><p> è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶å¸¦æœ‰ä¸€å®šæ•°é‡çš„æ ·æ¿æ–‡ä»¶ã€‚ <br>  <strong>System.scalaï¼š</strong> </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">System</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">implicit p: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Parameters</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketSubsystem</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasPeripheryMaskROMSlave</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasPeripheryDebug</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasPeripheryGPIO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> module = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">SystemModule</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SystemModule</span></span></span><span class="hljs-class">[+</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">L</span></span></span><span class="hljs-class"> &lt;: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">System</span></span></span><span class="hljs-class">](</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">_outer: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">L</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketSubsystemModuleImp</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">_outer</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasPeripheryDebugModuleImp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasPeripheryGPIOModuleImp</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Reset vector is set to the location of the mask rom val maskROMParams = p(PeripheryMaskROMKey) global_reset_vector := maskROMParams(0).address.U }</span></span></code> </pre> <br><p> å®é™…ä¸Šï¼Œâ€œä¸»æ¿â€çš„å¸ƒå±€åŒ…å«ä¸‰ä¸ªï¼ˆåˆ°ç›®å‰ä¸ºæ­¢ï¼‰ç®€å•æ–‡ä»¶ï¼š <br>  <strong>Platform.scalaï¼š</strong> </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlatformIO</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">implicit val p: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Parameters</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bundle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag = <span class="hljs-type"><span class="hljs-type">Flipped</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">JTAGIO</span></span>(hasTRSTn = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag_reset = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gpio = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">GPIOPins</span></span>(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">BasePin</span></span>(), p(<span class="hljs-type"><span class="hljs-type">PeripheryGPIOKey</span></span>)(<span class="hljs-number"><span class="hljs-number">0</span></span>)) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Platform</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">implicit p: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Parameters</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sys = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-type"><span class="hljs-type">LazyModule</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">System</span></span>).module) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PlatformIO</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sjtag = sys.debug.systemjtag.get sjtag.reset := io.jtag_reset sjtag.mfr_id := p(<span class="hljs-type"><span class="hljs-type">JtagDTMKey</span></span>).idcodeManufId.<span class="hljs-type"><span class="hljs-type">U</span></span>(<span class="hljs-number"><span class="hljs-number">11.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>) sjtag.jtag &lt;&gt; io.jtag io.gpio &lt;&gt; sys.gpio.head }</code> </pre> <br><p>  <strong>FPGAChip.scalaï¼š</strong> </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FPGAChip</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">override implicit val p: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Parameters</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZeowaaShell</span></span></span><span class="hljs-class"> </span></span>{ withClockAndReset(cpu_clock, cpu_rst) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dut = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Platform</span></span>) dut.io.jtag.<span class="hljs-type"><span class="hljs-type">TCK</span></span> := jtag_tck dut.io.jtag.<span class="hljs-type"><span class="hljs-type">TDI</span></span> := jtag_tdi <span class="hljs-type"><span class="hljs-type">IOBUF</span></span>(jtag_tdo, dut.io.jtag.<span class="hljs-type"><span class="hljs-type">TDO</span></span>) dut.io.jtag.<span class="hljs-type"><span class="hljs-type">TMS</span></span> := jtag_tms dut.io.jtag_reset := jtag_rst <span class="hljs-type"><span class="hljs-type">Seq</span></span>(led_0, led_1, led_2, led_3) zip dut.io.gpio.pins foreach { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (led, pin) =&gt; led := <span class="hljs-type"><span class="hljs-type">Mux</span></span>(pin.o.oe, pin.o.oval, <span class="hljs-literal"><span class="hljs-literal">false</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span>) } dut.io.gpio.pins.foreach(_.i.ival := <span class="hljs-literal"><span class="hljs-literal">false</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span>) dut.io.gpio.pins(<span class="hljs-number"><span class="hljs-number">4</span></span>).i.ival := key1 dut.io.gpio.pins(<span class="hljs-number"><span class="hljs-number">5</span></span>).i.ival := key2 } }</code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Chiselä»¥åŠŸèƒ½æ ·å¼ç¼–å†™ç”Ÿæˆå™¨ï¼ˆæ­¤å¤„æ˜¾ç¤ºäº†ä¸€ä¸ªéå¸¸ç®€å•çš„æƒ…å†µï¼‰ã€‚ ä½†æ˜¯æ‚¨å¯ä»¥æ¸…æ¥šåœ°å†™å‡ºæ¯æ¡ç”µçº¿ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ZeowaaShell.scala</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZeowaaShell</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemIf</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bundle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_addr = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">14.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_ba = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">3.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_cas_n = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_cke = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">2.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_clk = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">2.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_clk_n = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">2.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_cs_n = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">2.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_dm = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_dq = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">64.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_dqs = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_odt = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">2.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_ras_n = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem_we_n = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ZeowaaShell</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">implicit val p: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Parameters</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RawModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> clk25 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Clock</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> clk27 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Clock</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> clk48 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Clock</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key1 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key2 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key3 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> led_0 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> led_1 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> led_2 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> led_3 = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag_tdi = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag_tdo = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag_tck = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Clock</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jtag_tms = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> uart_rx = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>())) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> uart_tx = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-type"><span class="hljs-type">Analog</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-comment"><span class="hljs-comment">// Internal wiring val cpu_clock = Wire(Clock()) val cpu_rst = Wire(Bool()) val jtag_rst = Wire(Bool()) withClockAndReset(cpu_clock, false.B) { val counter = Reg(UInt(64.W)) counter := counter + 1.U cpu_rst := (counter &gt; 1000.U) &amp;&amp; (counter &lt; 2000.U) jtag_rst := (counter &gt; 3000.U) &amp;&amp; (counter &lt; 4000.U) } cpu_clock &lt;&gt; clk25 }</span></span></code> </pre> </div></div><br><p> ä¸ºä»€ä¹ˆå°†å…¶åˆ†ä¸ºä¸‰ä¸ªæ–‡ä»¶ï¼Ÿ å¥½å§ï¼Œé¦–å…ˆï¼Œå°±åƒåœ¨åŸå‹ä¸­é‚£æ ·ï¼š)æ˜¾ç„¶ï¼Œå°†<code>Shell</code>ä¸<code>FPGAChip</code>åˆ†å¼€çš„é€»è¾‘æ˜¯Shellæ˜¯å¯¹å¤–ç•Œæ¥å£çš„æè¿°ï¼šæˆ‘ä»¬åœ¨ç‰¹å®šæ¿ä¸Šæœ‰ä»€ä¹ˆç»“è®ºï¼ˆä»¥åŠå¦‚ä½•åœ¨æ¿ä¸Šæ˜¾ç¤ºï¼‰ã€‚èŠ¯ç‰‡ç»“è®ºï¼ï¼‰ï¼Œè€Œ<code>FPGAChip</code>æ˜¯ç”±æˆ‘ä»¬è¦<code>FPGAChip</code>å®šSoCçš„äº‹å®å†³å®šçš„ã€‚ å¥½å§ï¼Œå¹³å°åœ¨é€»è¾‘ä¸Šæ˜¯åˆ†å¼€çš„ï¼šæ³¨æ„ï¼š <code>ZeowaaShell</code> ï¼ˆå› æ­¤ä¹Ÿå°±æ˜¯<code>Platform</code> ï¼‰æ˜¯<code>RawModule</code> ï¼Œå°¤å…¶æ˜¯å®ƒä»¬æ²¡æœ‰éšå¼çš„<code>clock</code>å’Œ<code>reset</code> -è¿™å¯¹äºâ€œæ¥çº¿å›¾æ¿â€æ¥è¯´æ˜¯å¾ˆè‡ªç„¶çš„ï¼Œä½†æ˜¯å¯¹å·¥ä½œæ¥è¯´å¾ˆä¸æ–¹ä¾¿ï¼ˆå¹¶ä¸”å¯èƒ½å……æ»¡äº†é¢‘åŸŸä¸°å¯Œçš„æ£˜æ‰‹é”™è¯¯ï¼‰ã€‚ å¥½çš„ï¼Œå¹³å°å·²ç»æ˜¯ä¸€ä¸ªæ™®é€šçš„Chiselæ¨¡å—ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å®‰å…¨åœ°æè¿°å¯„å­˜å™¨ç­‰ã€‚ </p><br><h1 id="jtag"> æ³°æ ¼ </h1><br><p> å…³äºå¦‚ä½•é…ç½®JTAGçš„å‡ å¥è¯ã€‚ ç”±äºæˆ‘å·²ç»æœ‰äº†RaspberryPi 3 Model B +ï¼Œå› æ­¤æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»¥æŸç§æ–¹å¼å°è¯•ä½¿ç”¨å…¶GPIOã€‚ å¹¸è¿çš„æ˜¯ï¼Œ <em>æ‰€æœ‰äº‹æƒ…å·²ç»åœ¨æˆ‘ä»¬é¢å‰å®ç°äº†</em> ï¼šåœ¨æ–°çš„OpenOCDä¸­ï¼Œæœ‰ä¸€ä¸ªå…³äº<code>interface/sysfsgpio-raspberrypi.cfg</code>çš„æè¿°ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯¥<code>interface/sysfsgpio-raspberrypi.cfg</code>å‘Šè¯‰è°ƒè¯•å™¨é€šè¿‡å—è¿›è¡Œè¿æ¥ï¼ˆTCK = 11ï¼ŒTMS = 25ï¼ŒTDI = 10ï¼ŒTDO = 9ï¼Œä»¥åŠGNDä½œä¸ºç»ƒä¹ ï¼‰- <a href="">åœ¨æ­¤å¤„</a>å¼•å‡ºã€‚ </p><br><p> æ­¤å¤–ï¼Œä»¥<code>riscv-tests</code>å­˜å‚¨åº“ä¸­çš„<code>riscv-tests</code>ä¸ºåŸºç¡€ï¼Œæˆ‘å¾—åˆ°äº†ä»¥ä¸‹å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">adapter_khz 10000 source [find interface/sysfsgpio-raspberrypi.cfg] set _CHIPNAME riscv jtag newtap $_CHIPNAME cpu -irlen 5 -expected-id 0x20e31913 set _TARGETNAME $_CHIPNAME.cpu target create $_TARGETNAME riscv -chain-position $_TARGETNAME -rtos riscv init halt echo "Ready for Remote Connections"</code> </pre> <br><p> è¦å·¥ä½œï¼Œæ‚¨å°†éœ€è¦åœ¨ARMä¸‹æ„å»ºçš„<a href="">riscv-openocd</a>ç«¯å£ï¼Œå› æ­¤ <del> å…è´¹èµ å“æ²¡æœ‰é€šè¿‡ </del> è€Œä¸æ˜¯SiFiveçš„é¢„ç»„è£…ç‰ˆæœ¬ï¼Œæ‚¨å¿…é¡»å…‹éš†å­˜å‚¨åº“å¹¶æ”¶é›†ï¼š </p><br><pre> <code class="plaintext hljs">./configure --enable-remote-bitbang --enable-sysfsgpio</code> </pre> <br><p> å¦‚æœæœ‰äººçŸ¥é“å¦‚ä½•è¿è¡Œè¿œç¨‹bitbangï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¸éœ€è¦ä¸ºARMæ„å»ºè‡ªå®šä¹‰ç«¯å£ã€‚ </p><br><p> ç»“æœï¼Œæˆ‘ä»¬ä»Malinkaçš„æ ¹ç›®å½•å¯åŠ¨ </p><br><pre> <code class="plaintext hljs">root@ubuntu:~/riscv-openocd# ./src/openocd -s tcl -f ../riscv.tcl Open On-Chip Debugger 0.10.0+dev-00614-g998fed1fe-dirty (2019-06-03-10:27) Licensed under GNU GPL v2 For bug reports, read http://openocd.org/doc/doxygen/bugs.html adapter speed: 10000 kHz SysfsGPIO nums: tck = 11, tms = 25, tdi = 10, tdo = 9 SysfsGPIO nums: swclk = 11, swdio = 25 Info : auto-selecting first available session transport "jtag". To override use 'transport select &lt;transport&gt;'. Info : SysfsGPIO JTAG/SWD bitbang driver Info : JTAG and SWD modes enabled Warn : gpio 11 is already exported Warn : gpio 25 is already exported Info : This adapter doesn't support configurable speed Info : JTAG tap: riscv.cpu tap/device found: 0x20e31913 (mfg: 0x489 (SiFive, Inc.), part: 0x0e31, ver: 0x2) Info : datacount=1 progbufsize=16 Info : Disabling abstract command reads from CSRs. Info : Examined RISC-V core; found 1 harts Info : hart 0: XLEN=32, misa=0x40001105 Info : Listening on port 3333 for gdb connections Ready for Remote Connections Info : Listening on port 6666 for tcl connections Info : Listening on port 4444 for telnet connections</code> </pre> <br><p> ä½¿ç”¨ç«¯å£è½¬å‘3333ç™»å½•åˆ°SSHä¹‹åï¼Œæ›¿æ¢æ‰€éœ€çš„IPï¼š </p><br><pre> <code class="plaintext hljs">ssh -L 3333:127.0.0.1:3333 ubuntu@192.168.1.104</code> </pre> <br><p> ç°åœ¨ï¼Œåœ¨ä¸»æœºä¸Šï¼Œæ‚¨å¯ä»¥<strong>åœ¨riscv32æ¶æ„ä¸‹</strong>è¿è¡ŒGDBï¼š </p><br><pre> <code class="plaintext hljs">$ ../../rocket-tools/bin/riscv32-unknown-elf-gdb -q (gdb) target remote :3333 Remote debugging using :3333 warning: No executable has been specified and target does not support determining executable automatically. Try using the "file" command. 0x00000000 in ?? ()</code> </pre> <br><p> ç”±äºä¸»è¦åœ¨ç”Ÿæˆçš„ä¸»æ–‡ä»¶ä¸­ä½¿ç”¨äº†<code>SYNTHESIS</code>å®ï¼Œå› æ­¤æˆ‘ä»¬å°†è·³è¿‡å¯¹éç²˜æ»JTAGçš„ä¸€äº›ç›²ç›®è°ƒè¯•ï¼Œç„¶åå°†æƒ…å†µå€’é€€åˆ°â€œå·²æŒ‚èµ·JTAGï¼Œä½†æŒ‡ç¤ºç¯ä¸é—ªçƒâ€çš„çŠ¶æ€ã€‚ </p><br><h1 id="pervyy-kod"> ç¬¬ä¸€ä¸ªä»£ç  </h1><br><p> æ­£å¦‚æˆ‘ä»¬åœ¨Makefileä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œbootromçš„ä»£ç æ¥è‡ª<code>bootrom/xip/xip.S</code> ã€‚ ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="plaintext hljs">// See LICENSE for license details. // Execute in place // Jump directly to XIP_TARGET_ADDR .section .text.init .option norvc .globl _start _start: csrr a0, mhartid la a1, dtb li t0, XIP_TARGET_ADDR jr t0 .section .rodata dtb: .incbin DEVICE_TREE</code> </pre> <br><p> æˆ‘çŸ¥é“æ“ä½œç³»ç»Ÿå¿…é¡»è¦æœ‰ä¸€ä¸ªè®¾å¤‡æ ‘ï¼ˆdtbæ–‡ä»¶çš„å†…å®¹ï¼‰æ‰èƒ½è¯»å–ï¼Œä½†æ˜¯æ²¡æœ‰RAMçš„æ“ä½œç³»ç»Ÿæ˜¯ä»€ä¹ˆã€‚ å› æ­¤ï¼Œè¯·å¤§èƒ†åœ°æš‚æ—¶å°†å…¶æ›¿æ¢ä¸ºé—ªçƒçš„ç¯æ³¡ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">éšè—æ–‡å­—</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> .section .text.init .option norvc .globl _start _start: li a5, 0x64002000 li a1, 0x0F li a2, 0x01 li a3, 0x30 li a6, 0x10 li a7, 0x20 sw zero, 0x38(a5) // iof_en sw a1, 0x08(a5) // output_en sw a2, 0x00(a5) // value sw a1, 0x14(a5) // drive sw a3, 0x04(a5) // input_en // a0 &lt;- timer // a1 &lt;- 0x0F // a2 &lt;- [state] // a3 &lt;- 0x30 // a4 &lt;- [buttons] // a5 &lt;- [gpio addr] // a6 &lt;- 0x10 // a7 &lt;- 0x20 loop: li a4, 0x1000 add a0, a0, a4 bgtu a0, zero, loop lw a4, 0x00(a5) // value beq a4, a6, plus beq a4, a7, minus j store plus: srai a2, a2, 1 beq a2, zero, pzero j store pzero: li a2, 0x08 j store minus: slli a2, a2, 1 beq a2, a6, mzero j store mzero: li a2, 0x01 store: sw a2, 0x0c(a5) // value j loop</code> </pre> </div></div><br><p> è¿™æ®µä»£ç æ˜¯è¿­ä»£å¼€å‘çš„ï¼Œå› æ­¤è¯·ä¸ºå¯„å­˜å™¨çš„å¥‡æ€ªç¼–å·æ‰“æ‰°ä¸€ä¸‹ã€‚ å¦å¤–ï¼Œæˆ‘ä½¿ç”¨â€œå°†ä¸€æ®µä»£ç ç¼–è¯‘æˆä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œç„¶ååæ±‡ç¼–ï¼Œè¯·å‚è§â€æ–¹æ³•è¯šå®åœ°ç ”ç©¶äº†RISC-Væ±‡ç¼–ç¨‹åºã€‚ å‡ å¹´å‰ï¼Œå½“æˆ‘è¯»ä¸€æœ¬ç”µå­ä¹¦æ—¶ï¼Œå®ƒè°ˆåˆ°äº†ç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹ATTinyã€‚ æˆ‘æƒ³ï¼šâ€œå¯èƒ½æ˜¯æ— èŠçš„äº‹æƒ…å’Œä¾‹è¡Œäº‹åŠ¡ï¼Œâ€ä½†ç°åœ¨ï¼Œæ˜¾ç„¶ï¼Œ <em>ä¸€å®¶ç‘å…¸å•†åº—çš„å½±å“å·²ç»æ˜¾ç°å‡ºæ¥</em> ï¼š <del> å‚¨ç‰©æŸœ </del> ç”¨å¤‡ä»¶ç»„è£…å¤„ç†å™¨ï¼Œç”šè‡³ç»„è£…å™¨ä¼¼ä¹ä¹Ÿæ˜¯æœ¬æœºä¸”æœ‰è¶£ã€‚ æ‰§è¡Œæ­¤ä»£ç çš„ç»“æœæ˜¯ï¼Œå–å†³äºæŒ‰ä¸‹å“ªä¸ªæŒ‰é’®ï¼Œç‚¹äº®çš„LEDåº”è¯¥â€œå‘å·¦â€æˆ–â€œå‘å³â€è¿è¡Œã€‚ </p><br><p> æˆ‘ä»¬å¼€å§‹â€¦â€¦ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼šæ‰€æœ‰çš„ç¯éƒ½äº®ç€ï¼Œå®ƒä»¬å¯¹æŒ‰é’®æ²¡æœ‰ååº”ã€‚ è®©æˆ‘ä»¬é€šè¿‡JTAGè¿æ¥ï¼šç¨‹åºè®¡æ•°å™¨= 0x00000000-ä¸çŸ¥ä½•æ•…ï¼Œä¸€åˆ‡éƒ½æ˜¯ä»¤äººéš¾è¿‡çš„ã€‚ ä½†æ˜¯åœ¨<code>0x64002000</code>æˆ‘ä»¬æœ‰å¯ç”¨çš„GPIOå¯„å­˜å™¨ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">GPIOCtrlRegs.scala</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">// See LICENSE for license details. package sifive.blocks.devices.gpio object GPIOCtrlRegs { val value = 0x00 val input_en = 0x04 val output_en = 0x08 val port = 0x0c val pullup_en = 0x10 val drive = 0x14 val rise_ie = 0x18 val rise_ip = 0x1c val fall_ie = 0x20 val fall_ip = 0x24 val high_ie = 0x28 val high_ip = 0x2c val low_ie = 0x30 val low_ip = 0x34 val iof_en = 0x38 val iof_sel = 0x3c val out_xor = 0x40 }</span></span></code> </pre> </div></div><br><p> è®©æˆ‘ä»¬å°è¯•æ‰‹åŠ¨ç§»åŠ¨å®ƒä»¬ï¼š </p><br><pre> <code class="plaintext hljs">(gdb) set variable *0x64002038=0 (gdb) set variable *0x64002008=0xF (gdb) set variable *0x64002000=0x1 (gdb) set variable *0x64002014=0xF (gdb) set variable *0x6400200c=0x1</code> </pre> <br><p> å› æ­¤... LEDä¹‹ä¸€ç†„ç­äº†...å¦‚æœä¸æ˜¯<code>0x1</code> ï¼Œè€Œæ˜¯<code>0x5</code> ...æ˜¯çš„ï¼Œç°åœ¨LEDç‚¹äº®äº†ä¸€ä¸ªã€‚ åŒæ ·æ¸…æ¥šçš„æ˜¯ï¼Œå®ƒä»¬éœ€è¦åè½¬ï¼Œä½†æ˜¯æ‚¨ä¸éœ€è¦å†™å…¥0x00å¯„å­˜å™¨-æ‚¨éœ€è¦ä»é‚£é‡Œè¯»å–ã€‚ </p><br><pre> <code class="plaintext hljs">(gdb) x/x 0x64002000 0x64002000: 0x00000030 //    (gdb) x/x 0x64002000 0x64002000: 0x00000020 //   (gdb) x/x 0x64002000 0x64002000: 0x00000010 //   (gdb) x/x 0x64002000 0x64002000: 0x00000000</code> </pre> <br><p> å‡ºè‰²çš„å†…å­˜æ˜ å°„å¯„å­˜å™¨æ— éœ€å¯åŠ¨å¤„ç†å™¨å³å¯è¿›è¡Œæ›´æ–°ï¼Œæ‚¨ä¸èƒ½æ¯æ¬¡éƒ½æŒ‰cont + Ctrl-Cç»„åˆé”®-è¿™å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯å¾ˆå¥½ã€‚ </p><br><p> ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸å¾ªç¯åœ°æ—‹è½¬ï¼Œè€Œæ˜¯å¤„äº<code>$pc=0x0000000</code>å‘¢ï¼Ÿ </p><br><pre> <code class="plaintext hljs">(gdb) x/10i 0x10000 0x10000: addi s1,sp,12 0x10002: fsd ft0,-242(ra) 0x10006: srli a4,a4,0x21 0x10008: addi s0,sp,32 0x1000a: slli t1,t1,0x21 0x1000c: lb zero,-1744(a2) 0x10010: nop 0x10012: addi a0,sp,416 0x10014: c.slli zero,0x0 0x10016: 0x9308</code> </pre> <br><p> ä»€ä¹ˆæ˜¯å£è¢‹å¦–æ€ªï¼Ÿ æˆ‘æ²¡æœ‰å†™è¿™æ ·çš„æŒ‡ç¤ºï¼Œä»–ä»¬æŠŠæˆ‘æ‰”äº†ï¼ è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹ï¼š </p><br><pre> <code class="plaintext hljs">(gdb) x/10x 0x10000 0x10000: 0xb7270064 0x9305f000 0x13061000 0x93060003 0x10010: 0x13080001 0x93080002 0x23ac0702 0x23a4b700 0x10020: 0x23a0c700 0x23aab700</code> </pre> <br><p> å¦ä¸€æ–¹é¢ï¼Œåº”è¯¥åœ¨é‚£é‡Œï¼Ÿ </p><br><pre> <code class="plaintext hljs">$ ../../rocket-tools/bin/riscv32-unknown-elf-objdump -d builds/zeowaa-e115/xip.elf builds/zeowaa-e115/xip.elf:   elf32-littleriscv   .text: 00010054 &lt;_start&gt;: 10054: 640027b7 lui a5,0x64002 10058: 00f00593 li a1,15 1005c: 00100613 li a2,1 10060: 03000693 li a3,48 10064: 01000813 li a6,16 10068: 02000893 li a7,32 1006c: 0207ac23 sw zero,56(a5) # 64002038 &lt;__global_pointer$+0x63ff0770&gt; 10070: 00b7a423 sw a1,8(a5) 10074: 00c7a023 sw a2,0(a5) 10078: 00b7aa23 sw a1,20(a5) 1007c: 00d7a223 sw a3,4(a5) ...</code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼ŒQuartusè¯šå®åœ°æ”¾ç½®äº†ä¸åˆå§‹åŒ–æ–‡ä»¶ä¸­ç›¸åŒçš„è¯ï¼Œä½†æ˜¯æ”¹å˜äº†å®ƒä»¬çš„å­—èŠ‚åºã€‚ æ‚¨å¯ä»¥åœ¨Googleä¸Šæ‰¾åˆ°å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯<em>æˆ‘æ˜¯ä¸€åç¨‹åºå‘˜</em> ï¼Œæ‹æ–æ˜¯æˆ‘ä»¬çš„ï¼Œæ‰€ä»¥æˆ‘å°†é‡å†™ </p><br><div class="spoiler">  <b class="spoiler_title">å¼•å¯¼ROM</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">module BootROM( input wire [10:0] address, input wire clock, input wire me, input wire oe, output wire [31:0] q ); wire [31:0] q_r; rom r( .address(address), .clock(clock), .rden(me), .q(q_r) ); assign q[31:24] = q_r[7:0]; assign q[23:16] = q_r[15:8]; assign q[15:8] = q_r[23:16]; assign q[7:0] = q_r[31:24]; endmodule</code> </pre> </div></div><br><p> æ‰€ä»¥ï¼Œæˆ‘ä»¬æ”¶é›†ï¼Œå¼€å§‹ï¼Œå®ƒä¸å‘å…‰ã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬é€šè¿‡JTAGè¿æ¥ï¼šè¯´</font></font><code>$pc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®è¯ï¼Œ</font><font style="vertical-align: inherit;">å®ƒ</font><font style="vertical-align: inherit;">æŒ‡ç¤ºå‘¨æœŸå†…æŸä¸ªåœ°æ–¹ï¼Œç‡ƒçƒ§çš„ç¯æ³¡çš„é®ç½©= 4ï¼Œå“¦ï¼Œæ˜¯çš„ï¼Œæ‚¨éœ€è¦è®¾ç½®</font></font><code>output_en</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šï¼Œ</font></font><code>set variable *0x64002008=0xF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å•å‡»</font></font><code>c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆç»§ç»­ï¼‰-ä¸€åˆ‡æ­£å¸¸ï¼</font><font style="vertical-align: inherit;">å“¦ï¼Œæˆ‘ä»¬å·²ç»æ·˜æ±°äº†ã€‚</font><font style="vertical-align: inherit;">ç”±äºæŸç§åŸå› ï¼Œæ— è®ºæˆ‘å¦‚ä½•å¯¹å†™å…¥å¯„å­˜å™¨çš„é¡ºåºè¿›è¡Œæ’åºï¼Œéƒ½è¡Œä¸é€š...å› æ­¤ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ‹æ–å¯¹å…¶è¿›è¡Œå¤‡ä»½ï¼Œ</font></font><code>output_en</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è®¾ç½®å®é™…å€¼ä¹‹å‰å°†</font><font style="vertical-align: inherit;">æ›å…‰å»¶è¿Ÿ</font><font style="vertical-align: inherit;">ã€‚</font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å½“å‰æ­£åœ¨ä½¿ç”¨çš„èµ„æºæ€»æ•°ï¼š </font></font></p><br><pre> <code class="plaintext hljs">Total logic elements 17,370 / 114,480 ( 15 % ) Total registers 8357 Total pins 16 / 281 ( 6 % ) Total virtual pins 0 Total memory bits 264,000 / 3,981,312 ( 7 % ) Embedded Multiplier 9-bit elements 4 / 532 ( &lt; 1 % )</code> </pre> <br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡¿å­ä¸Šçš„èµ„æ–™</font></font></a> </p><br><p> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾…ç»­...</font></font></em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN455391/">https://habr.com/ru/post/zh-CN455391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN455377/index.html">ç‰©è”ç½‘æ¶æ„</a></li>
<li><a href="../zh-CN455379/index.html">ï¼ˆé™æ€ï¼‰åœ¨C ++ç¨‹åºä¸­é€‰æ‹©æœ€ä½³å®¹å™¨</a></li>
<li><a href="../zh-CN455381/index.html">3CXæŠ€æœ¯æ”¯æŒåšå‡ºå“åº”ï¼šåœ¨PBXæœåŠ¡å™¨ä¸Šæ•è·SIPé€šä¿¡</a></li>
<li><a href="../zh-CN455387/index.html">äº†è§£å¼¹æ€§å †æ ˆä¸­çš„æœºå™¨å­¦ä¹ ï¼ˆåˆåElasticsearchï¼ŒåˆåELKï¼‰</a></li>
<li><a href="../zh-CN455389/index.html">Haxe 4ï¼šæ–°åŠŸèƒ½ï¼Ÿ</a></li>
<li><a href="../zh-CN455393/index.html">å…³äºé›·è¾¾ä¸­é¢‘è°±ä¼°è®¡çš„å‚æ•°æ–¹æ³•çš„ä½¿ç”¨-MUSICæ–¹æ³•ã€‚ æ–‡ç« çš„è¡¥å……</a></li>
<li><a href="../zh-CN455397/index.html">æˆ‘ä»¬å¦‚ä½•åœ¨è«æ–¯ç§‘åŠå…¬å®¤çš„åä¸ºä¸Šè®¾è®¡å’Œå®ç°æ–°ç½‘ç»œï¼Œç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN455401/index.html">ç®€å•ç¤ºä¾‹ä¸­çš„Cisco IOSçš„â€‹â€‹Tcl</a></li>
<li><a href="../zh-CN455403/index.html">ä»äº”åˆ†é’±åˆ°ç¥çµæ¸¸æˆ</a></li>
<li><a href="../zh-CN455405/index.html">å°å‹è®¡åˆ’å¦‚ä½•å°†å°å‹åŠå…¬å®¤å˜æˆè”é‚¦å…¬å¸ï¼Œæ¯æœˆè·åˆ©100+ç™¾ä¸‡å¢å¸ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>