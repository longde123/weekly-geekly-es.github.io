<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฐ ๐ง๐ฟ Micropython ุนูู GSM + GPS ูุญุฏุฉ A9G ๐คท ๐ฝ โ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ุงููุฑุฉ ููุฑุช ูู ุฅุฎูุงุก ุฌูุงุฒ ุชุนูุจ GPS ูู ุฏุฑุงุฌุชู ูุฅุฌุฑุงุก ููุงุฆู. ููุงู ุงููุซูุฑ ูู ุงูุฃุฌูุฒุฉ ุงููุณุชููุฉ ูู ุงูุณูู ูุชุชุจุน ุงูุณูุงุฑุงุช ูุงูุจุถุงุฆุน ูุงูุฏุฑุงุฌุงุช ูุงูุฃูุชุนุฉ ูุงูุฃ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Micropython ุนูู GSM + GPS ูุญุฏุฉ A9G</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446090/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฐู ุงููุฑุฉ ููุฑุช ูู ุฅุฎูุงุก ุฌูุงุฒ ุชุนูุจ GPS ูู ุฏุฑุงุฌุชู ูุฅุฌุฑุงุก ููุงุฆู.  ููุงู ุงููุซูุฑ ูู ุงูุฃุฌูุฒุฉ ุงููุณุชููุฉ ูู ุงูุณูู ูุชุชุจุน ุงูุณูุงุฑุงุช ูุงูุจุถุงุฆุน ูุงูุฏุฑุงุฌุงุช ูุงูุฃูุชุนุฉ ูุงูุฃุทูุงู ูุงูุญููุงูุงุช.  ุชุชูุงุนู ุงูุบุงูุจูุฉ ุงูุนุธูู ูููู ูุน ุงููุณุชุฎุฏู ุนุจุฑ ุงูุฑุณุงุฆู ุงููุตูุฑุฉ.  ุชููุฑ ุฎูุงุฑุงุช ุฃูุซุฑ ุชูููุฉ ุงูุนุซูุฑ ุนูู ูุธููุฉ ูุงุชูู ุ ูููู ูุฑุชุจุทุฉ ุจุฎุฏูุฉ ูุนููุฉ ุนุจุฑ ุงูุฅูุชุฑูุช. <br>  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุฃูุฏ ุงูุชุญูู ุงููุงูู ูู ุจุฑูุงูุฌ ุงูุชุนูุจ: ุงุณุชุฎุฏูู ูู ูุถุน ููุงุณุจ ุจุฏูู ุฑุณุงุฆู ูุตูุฉ ูุตูุฑุฉ ูุชุณุฌูู.  ุฃุญุถุฑ ูู ุฌูุฌู ุงูุณุทุญู ุจุถุนุฉ ูุญุฏุงุช ูู ุงูุตูู ุ ูุงุญุฏุฉ ูููุง ุทูุจุช (ุจูุฏูุฌ A9G) (ุญูุงูู 15 ุฏููุงุฑูุง). </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f7f/b34/fe0/f7fb34fe016bb3a6c532712b9b2e75e1.png" alt="ูุญุฏุฉ"></p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงูููุงู ูุฏูุฑ ุญูู ููููุฉ ููุงูู ุจูุซูู ุจุงูุนูู ุนูู ูุฐู ุงููุญุฏุฉ. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช A9G ุชูุซูููุฉ ูู ESP (ุงูุดุฑูุฉ ุงููุตูุนุฉ ุ ุจุงูููุงุณุจุฉ ุ ูู ููุณูุง) ุ ูุฅู ููุญุฉ ุงูุจูุฏูุฌ ููุณูุง ุชูุซูููุฉ ูููุญุฉ NodeMCU ุ ุจุงุณุชุซูุงุก ุฃู ููุญุฉ ุงูุจูุฏูุฌ ูุง ุชุญุชูู ุนูู ูุญูู USB-UART ูุถูู.  ูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุงูุฃุฎุฑู ุงููุซูุฑุฉ ููุงูุชูุงู.  ููุงุตูุงุช <a href="">ุงููุตูุน</a> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  32 ุจุช ุงูุฃุณุงุณูุฉ (RISC) ุ ูุชุตู ุฅูู 312MHz </li><li style=";text-align:right;direction:rtl">  29x GPIO (ุฌููุนูุง ููุญููุฉ ุ ุฌููุน ุงููุงุฌูุงุช ูุฏุฑุฌุฉ ูู ูุฐุง ุงูุฑูู) </li><li style=";text-align:right;direction:rtl">  ุงูุณุงุนุงุช ูุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ </li><li style=";text-align:right;direction:rtl">  1x ูุงุฌูุฉ USB 1.1 (ูู ุฃุฌุฏูุง ููุงู ุ ูููู ูุณุฎ ูู ุฎุงุฑุฌ ุงููููุน) ู microUSB ููุญุตูู ุนูู ุงูุทุงูุฉ </li><li style=";text-align:right;direction:rtl">  UART 2x (ุฎุฏูุฉ +1) </li><li style=";text-align:right;direction:rtl">  2X SPI (ูู ุชุชู ูุญุงููุชู) </li><li style=";text-align:right;direction:rtl">  3X I2C (ูู ูุญุงูู) </li><li style=";text-align:right;direction:rtl">  1MM SDMMC (ูุน ูุชุญุฉ ุงููุงุฏูุฉ) </li><li style=";text-align:right;direction:rtl">  ูุฏุฎูุงุช ุชูุงุธุฑูุฉ 2x (10 ุจุชุงุช ุ ุฑุจูุง ูุชู ุงุณุชุฎุฏุงู ูุงุญุฏุฉ ูููุง ุจูุงุณุทุฉ ุฃุฏูุงุช ุงูุชุญูู ูู ุจุทุงุฑูุฉ ุงูููุซููู) </li><li style=";text-align:right;direction:rtl">  4 ููุบุงุจุงูุช ููุงุด </li><li style=";text-align:right;direction:rtl">  4Mb PSRAM </li><li style=";text-align:right;direction:rtl">  ADC (ูููุฑูููู ุ ููุฌูุฏ ูุนูููุง ุนูู ุงูููุญุฉ) ู DAC (ููุจุฑ ุตูุช ุ ุบุงุฆุจ) </li><li style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุชุญูู ุดุญู ุงูุจุทุงุฑูุฉ (ูุง ุชูุฌุฏ ุจุทุงุฑูุฉ ูู ุญุฏ ุฐุงุชูุง) </li><li style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ GSM (800 ุ 900 ุ 1800 ุ 1900 ููุบุงููุฑุชุฒ) ูุน ุงูุฑุณุงุฆู ุงููุตูุฑุฉ ูุงูุตูุช ู GPRS </li><li style=";text-align:right;direction:rtl">  ุงุชุตุงู GPS ุนุจุฑ UART2 (ุชูุฌุฏ ูุญุฏุฉ "A9" ุจุฏูููุง) </li><li style=";text-align:right;direction:rtl">  ูุชุญุฉ SIM (nanoSIM) </li><li style=";text-align:right;direction:rtl">  ุฒุฑูู (ุฅุนุงุฏุฉ ุชุนููู ูุงุญุฏ ุ ูุงูุขุฎุฑ - ูุธููุฉ ุงูุชุถููู ูุงูุจุฑูุฌุฉ) </li><li style=";text-align:right;direction:rtl">  ุงุซููู ูู ุงููุตุงุจูุญ </li></ul><br><p style=";text-align:right;direction:rtl">  ุงูุฌูุฏ ุงูุชุดุบููู ูู 3.3 ูููุช ุ ุฌูุฏ ุงูุฏุฎู ูู 5-3.8 ูููุช (ุงุนุชูุงุฏุง ุนูู ุงูุงุชุตุงู).  ุจุดูู ุนุงู ุ ุชุญุชูู ุงููุญุฏุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ ุงููุงุฒูุฉ ูุชุฌููุน ุฌูุงุฒ ูุญููู ุจุณูุท ูุนูู ุจุงูุถุบุท ุนูู ุงูุฒุฑ.  ูููู ูู ุงูุฃูุซูุฉ ุ ูุจุฏู ุฃู ุงูุตููููู ูุดุชุฑูููุง ููุจูุน ูู ูุงูููุงุช ุงูููุงุฑ ุฃู ูุงูููุงุช ุงูููุงุฑ ุฃู ุดูุก ูู ูุฐุง ุงููุจูู.  ุจุฏุงุฆู ุงููุญุฏุฉ ุงูููุทูุฉ ูู ูุญุฏุงุช SIM800 ุงูุดุงุฆุนุฉ ุฅูู ุญุฏ ูุง ุ ูุงูุชู ุ ููุฃุณู ุ ูุง ุชููู SDK ูู ุงููุฌุงู ุงูุนุงู (ุนูู ุณุจูู ุงููุซุงู ุ ุชูุจุงุน ุงููุญุฏุงุช ููุญุฏุงุช ููุฏู AT). </p><br><h1 style=";text-align:right;direction:rtl">  SDK </h1><br><p style=";text-align:right;direction:rtl"> ุงููุญุฏุฉ ูุฃุชู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SDK</a> ูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูุฑุถูุฉ.  ุงูุชุซุจูุช ุชุญุช Ubuntu ุ ูููู ููุถู ุงุณุชุฎุฏุงู Windows ูุงูุญุงููุงุช.  ูู ุดูุก ูุนูู ูู ุฎูุงู ุจุฏุณ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ: ESPtool ููุฐู ุงููุญุฏุฉ ูู ูุชู ุฅุฑุฌุงุนูุง ุจุนุฏ.  ุชู ุจูุงุก ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ููุณูุง ุจูุงุณุทุฉ Makefile.  ูุตุญุญ ุงูุฃุฎุทุงุก ููุฌูุฏ: ูุจู ุงูุชุฌููุฏ ุ ุชููู ุงููุญุฏุฉ ุจุฅููุงุก ุชุชุจุน ุงูููุฏุณ ูู ูููุฐ ุงูุฎุฏูุฉ.  ููู ุดุฎุตูุงู ุ ูู ุฃุชููู ูู ุชุฑุฌูุฉ ุงูุนูุงููู ุฅูู ุณุทูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ (ุชูุงุฑูุฑ gdb ุฃู ุงูุนูุงููู ูุง ุชุชูุงูู ูุน ุฃู ุดูุก).  ูู ุงููุญุชูู ุฃู ูููู ูุฐุง ุจุณุจุจ ุงูุฏุนู ุงูุถุนูู ููุธุงู Linux ุนูู ูุฐุง ุงููุญู.  ููููุง ูุฐูู ุ ุฅุฐุง ููุช ุชุฑูุฏ ุงูุนุจุซ ุจุงููุญุฏุฉ ุงูููุทูุฉ - ูุญุงูู ุงูููุงู ุจุฐูู ุชุญุช Windows (ููู ุจุฅูุบุงุก ุงูุงุดุชุฑุงู ูู github).  ุฎูุงู ุฐูู ุ ูููุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูููุงุช</a> ููููุณ.  ุจุนุฏ ุงูุชุซุจูุช ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุตุญุฉ ุงููุณุงุฑุงุช ูู .bashrc ูุญุฐู (ุฅุนุงุฏุฉ ุชุณููุฉ) ุฌููุน <code>CSDTK/lib/libQt*</code> : ูุฅูุง ุ ููู ูุจุฏุฃ ุงููุชุนุฑู (ุงููุนุฑูู ุฃูุถูุง ุจุงุณู ูุตุญุญ ุงูุฃุฎุทุงุก) ุจุณุจุจ ุชุนุงุฑุถ ูุน ุ ุฑุจูุง ุ libQt ุงููุซุจุช. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7a7/955/5bc/7a79555bca02e1ad6363b8da9559c91e.png" alt="ุงููุชุนุฑู"></p><br><p style=";text-align:right;direction:rtl">  ุฅูู ุงููุชุนุฑู ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูููุงุช</a> . </p><br><h1 style=";text-align:right;direction:rtl">  ุตูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ูู NodeMCU.  ุชุจุฏู ุงููุญุฏุงุช ูุชุดุงุจูุฉ ุ ูููู ูุง ุชูุฌุฏ ุฑูุงูุฉ USB-TTY ุนูู ููุญุฉ ุงูุญููู ููุณุชุฎุฏู microUSB ููุท ูู ุฃุฌู ุงูุทุงูุฉ.  ูููุง ูุฐูู ุ ุณูู ุชุญุชุงุฌ USB-TTY ูู 3.3V.  ุงุซูุงู ุฃูุถู: ูุงุญุฏ ููููุฐ ุงูุชุตุญูุญ ูุงูุขุฎุฑ ูู UART1: ุงูุฃูู ููุณุชุฎุฏู ูุชุญููู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุงูุซุงูู ููููู ุงุณุชุฎุฏุงูู ูุทุฑู ููุชุธู.  ููู ูุง ุงุณุญุจ ูู ูุฐู ุงูุฃุฌุฒุงุก ุฅูู ุงูููุจููุชุฑ ุ ุงุดุชุฑูุช ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ููุฒุน USB 4 ููุงูุฐ ูุน ูุงุจู ุจุทูู ูุชุฑูู ููุฒูุฏ ุทุงูุฉ ุฎุงุฑุฌู (ูุทููุจ).  ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ููุฐู ุงููุฌููุนุฉ ูุน ุงููุญุฏุฉ ููุณูุง ุณุชููู 25-30 ุฏููุงุฑ (ุจุฏูู ุงูุฏุงุฏุงุช ุงูุทุงูุฉ: ุงุณุชุฎุฏุงู ูู ุงููุงุชู). </p><br><h1 style=";text-align:right;direction:rtl">  ุฅุฏุฑุงุฌ </h1><br><p style=";text-align:right;direction:rtl">  ุชุฃุชู ุงููุญุฏุฉ ูุน ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ AT: ููููู ุงูุงุชุตุงู ุจู arduino 3.3V ูุงุณุชุฎุฏุงูู ูููุฏู ุนุจุฑ UART1.  ุชูุช ูุชุงุจุฉ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฎุงุตุฉ ุจูู ูู C. <code>make</code> ุจุฅูุดุงุก ููููู ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ: ุฃุญุฏููุง ูุฎูุท ููุฏุฉ ุฏูููุฉ ุ ูุงูุขุฎุฑ ุณุฑูุน ุจูุง ููู ุงูููุงูุฉ.  ูููู ุฎูุงุทุฉ ููู ูุงุญุฏ ููุท ูู ูุฐู ุงููููุงุช: ุงููุฑุฉ ุงูุฃููู ูุจูุฑุฉ ุ ูุงูุฃููุงุช ุงููุงุญูุฉ ุตุบูุฑุฉ.  ุฅุฌูุงูุงู ุ ุฃุซูุงุก ุนูููุฉ ุงูุชุทููุฑ ุ ูุฏูู SDK Chinese ( <code>coolwatcher</code> ) ููุชูุญ ุนูู ุณุทุญ ุงูููุชุจ ูุฅุฏุงุฑุฉ ุงููุญุฏุฉ ุงูููุทูุฉ ุ ูุงูุตุบูุฑ ุ stdio ููุญุฑุฑ ุงูุดูุฑุฉ. </p><br><h1 style=";text-align:right;direction:rtl">  API </h1><br><p style=";text-align:right;direction:rtl">  ูุนูุณ ูุญุชูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช</a> ุงููุงุฆูุฉ ุฃุนูุงู ููุดุจู ESP8266 ูู ุงูุฃูุงู ุงูุฃููู: ุงุณุชุบุฑู ุงูุฃูุฑ ุญูุงูู 3 ุณุงุนุงุช ูุฅุทูุงู HelloWorld.  ูุณูุก ุงูุญุธ ุ ูุฅู ูุฌููุนุฉ ุงููุธุงุฆู ุงููุชุงุญุฉ ูููุณุชุฎุฏู ูุญุฏูุฏุฉ ููุบุงูุฉ: ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูููู ุงููุตูู ุฅูู ุฏูุชุฑ ุงููุงุชู ุนูู ุจุทุงูุฉ SIM ุ ูุงููุนูููุงุช ุฐุงุช ุงููุณุชูู ุงูููุฎูุถ ุญูู ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุงูุฎูููุฉ ุ ููุง ุฅูู ุฐูู.  ูุซุงุฆู API ุฃูู ุงูุชูุงูุง ุ ูุฐูู ูุฌุจ ุนููู ุงูุงุนุชูุงุฏ ุนูู ุฃูุซูุฉ (ูุงูุชู ููุฌุฏ ูููุง 24) ูุชุถููู ุงููููุงุช.  ููุน ุฐูู ุ ูููู ูููุญุฏุฉ ุงูููุงู ุจุงููุซูุฑ ูู ุงูุฃุดูุงุก ุญุชู ุงุชุตุงูุงุช ุทุจูุฉ ุงูููุงุจุณ ุงูุขููุฉ: ูู ุงููุงุถุญ ุฃู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุฑูุฒุช ุนูู ุงููุธุงุฆู ุงูุฃูุซุฑ ุฃููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุฌุจ ุฃู ูููู ูุญุจูุจ ุจุฑูุฌุฉ ูููุฑูููุชุฑููุฑ ุงูุตูููุฉ ูู ุฎูุงู API ุงูุตูููุฉ.  ุจุงููุณุจุฉ ููุฌููุน ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฏุฃุช</a> ุงูุดุฑูุฉ ุงููุตูุนุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญููู micropython</a> ุฅูู ูุฐู ุงููุญุฏุฉ.  ูุฑุฑุช ุฃู ุฃุฌุฑุจ ููุณู ูู ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูุฃูุงุตู ูุฐุง ุงูุนูู ุงูุฌูุฏ (ุฑุงุจุท ูู ููุงูุฉ ุงูููุงู). </p><br><h1 style=";text-align:right;direction:rtl">  micropython </h1><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9a1/b46/e00/9a1b46e00d290db2f478ebb54f7d9e74.jpg" alt="ุดุนุงุฑ"></p><br><p style=";text-align:right;direction:rtl">  Micropython ูู ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูููู cPython ุฅูู ูููุฑูููุชุฑููุฑ.  ูุชู ุชูููุฐ ุงูุชูููุฉ ูู ุงุชุฌุงููู.  ุงูุฃูู ูู ุฏุนู ูุชุทููุฑ ุงูููุชุจุงุช ุงูุฃุณุงุณูุฉ ุงููุดุชุฑูุฉ ุจูู ุฌููุน ุงููุชุญููุงุช ุงูุฏูููุฉ ุงูุชู ุชุตู ุงูุนูู ูุน ุฃููุงุน ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ูู ุจูุซูู: ุงููุงุฆูุงุช ุ ุงููุธุงุฆู ุ ุงููุฆุงุช ุ ุงูุณูุงุณู ุ ุงูุฃููุงุน ุงูุฐุฑูุฉ ุ ูุฃูุซุฑ ูู ุฐูู.  ูุงูุซุงูู ูู ุ ูู ุงููุงูุน ุ ุงูููุงูุฐ: ููู ูุชุญูู ุ ูู ุงูุถุฑูุฑู "ุชุนููู" ุงูููุชุจุฉ ููุนูู ูุน UART ูู ุฃุฌู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช ุ ูุชุญุฏูุฏ ุฑุตุฉ ูุฌูุงุฒ ุงูุชุฑุงุถู ุ ูุชุญุฏูุฏ ูุฌููุนุฉ ูู ุงูุชุญุณููุงุช.  ุงุฎุชูุงุฑูุง ุ ูุชู ูุตู ุงูุนูู ูุน ุงูุฃุฌูุฒุฉ: GPIO ุ ุงูุทุงูุฉ ุ ุงููุงุณููู ุ ูุธุงู ุงููููุงุช. <br>  ูู ูุฐุง ููุชูุจ ุจูุบุฉ C ูููุฉ ูุน ูุญุฏุงุช ูุงูุฑู: ูุญุชูู micropython ุนูู ูุฌููุนุฉ ูู ุงููุตูุงุช ุงูููุตู ุจูุง ูู ุงูุฅุนูุงู ุนู ุงูุฌูู ูู ROM ุฅูู ูุญุฏุงุช ุงููุชุงุจุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุชู ุฏุนู ูุญุฏุงุช python ุงูููุชูุจุฉ ุฐุงุชูุง ุจุงููุงูู (ุงูุดูุก ุงูุฑุฆูุณู ูู ุนุฏู ูุณูุงู ุญุฌู ุงูุฐุงูุฑุฉ).  ุญุฏุฏ ุงูููููู ุนูู ุงููุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏููู ุงููุฑุตุฉ ูุฅุทูุงู dzhanga</a> (ุตูุฑุฉ ูุน ุฑุบูู ุงูุฎุจุฒ).  ูุฅุนูุงู: ูุจูุน ุงููุดุฑูุน ุงูููุญุฉ ุงูุฎุงุตุฉ ุจู ูุทูุงุจ ููุญุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุนูููุงุช</a> ุ ููู ููุงูุฐ ูุญุฏุงุช ESP8266 ู ESP32 ุดุงุฆุนุฉ ุฃูุถูุง. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชููู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุฌุงูุฒุฉ ูุชุญููููุง - ููููู ููุท ุงูุงุชุตุงู ุจุงููุฑุงูุจ ุงูุฏููู ุนุจุฑ UART ูุงูุฏุฎูู ุฅูู Python REPL. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ miniterm.py /dev/ttyUSB1 115200 --raw MicroPython cd2f742 on 2017-11-29; unicorn with Cortex-M3 Type <span class="hljs-string"><span class="hljs-string">"help()"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> more information. &gt;&gt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>) hello</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ููููู ุงูุจุฏุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู</a> ุงููุชุงุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู python3 ุงูุนุงุฏู ุชูุฑูุจูุง</a> ุฏูู ูุณูุงู ูููุฏ ุงูุฐุงูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุฏุฉ A9G ุบูุฑ ูุฏุนููุฉ ุฑุณูููุง (ูุงุฆูุฉ ุงููุญุฏุงุช ุงููุฏุนููุฉ ุฑุณูููุง ูุชููุฑุฉ ูู <code>micropython/ports</code> ุ ูููุงู ุญูุงูู ุนุดุฑุฉ ูููุง).  ููุน ุฐูู ุ ูุงู ุตุงูุน ุงูุญุฏูุฏ ุจุชุดููู micropython ูุฎูู ุงูุจูุฆุฉ ููููุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>micropython/ports/gprs_a9</code></a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>micropython/ports/gprs_a9</code></a> ุ ูุงูุฐู ุดูุฑู ุฌุฒููุงู ุนููู.  ูู ุงูููุช ุงูุฐู ุฃุตุจุญุช ููู ููุชููุง ุจูุฐู ุงููุดููุฉ ุ ุชู ุชุฌููุน ุงููููุฐ ุจูุฌุงุญ ูุงุณุชูุจููู ุงููุชุญูู ุงูุตุบูุฑ ุจู REPL.  ูููู ุ ูุณูุก ุงูุญุธ ุ ูู ููู ููุงู ุนูู ูู ุฎูุงู ุงููุญุฏุงุช ุงูุชุงุจุนุฉ ูุฌูุงุช ุฎุงุฑุฌูุฉ ุฅูุง ูุน ูุธุงู ุงููููุงุช ู GPIO: ูู ููู ููุงู ุดูุก ูุชุนูู ุจุงูุดุจูุฉ ุงููุงุณูููุฉ ููุธุงู ุชุญุฏูุฏ ุงูููุงูุน ุงูุนุงููู (GPS).  ูุฑุฑุช ุฅุตูุงุญ ูุฐุง ุงูุนูุจ ูุญุฏุฏุช ููุณู ูุฏู ููู ุฌููุน ุงููุธุงุฆู ุงููุงุฒูุฉ ูุชุนูุจ GPS.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู ุงูุฑุณููุฉ</a> ููุฐู ุงูุญุงูุฉ ูู ููุฌุฒุฉ ูุง ุฏุงุนู ููุง: ูุฐูู ุ ูุงู ูุง ุจุฏ ูู ูู ุงูุจุญุซ ูู ุงูุดูุฑุฉ. </p><br><h2 style=";text-align:right;direction:rtl">  ูู ุฃูู ุชุจุฏุฃ </h2><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุงูุชูู ุฅูู <code>micropython/ports</code> ููุณุฎ <code>micropython/ports/minimal</code> ุฅูู ุงููุฌูุฏ ุงูุฌุฏูุฏ ุญูุซ ุณูุชู ูุถุน ุงููููุฐ.  ุจุนุฏ ุฐูู ุ ูู ุจุชุญุฑูุฑ <code>main.c</code> ุงูุฃุณุงุณู.  ุถุน ูู ุงุนุชุจุงุฑู ุฃู ูู ูุฐูุฐ ูู ูู ุงููุธููุฉ <code>main</code> ุ ุญูุซ ุชุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก <code>mp_init()</code> ุ ุจุนุฏ ุฃู ุฃุนุฏุช ูุณุจูุง ูุชุญูู ูุฅุนุฏุงุฏุงุช ุงูููุฏุณ ูุฐูู.  ุจุนุฏ ุฐูู ุ ุจุงููุณุจุฉ ููุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช <code>pyexec_event_repl_init()</code> ุนูู ุงูุฃุญุฏุงุซ ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก <code>pyexec_event_repl_init()</code> ูุฅุทุนุงู ุงูุฃุญุฑู ุงูุชู ุชู ุฅุฏุฎุงููุง ุนุจุฑ UART ุฅูู <code>pyexec_event_repl_process_char(char)</code> .  ุณูููุฑ ูุฐุง ุฅููุงููุฉ ุงูุชุดุบูู ุงููุชุฏุงุฎู ูู ุฎูุงู REPL.  <code>micropython/ports/minimal/uart_core.c</code> ุงูููู ุงูุซุงูู ุ <code>micropython/ports/minimal/uart_core.c</code> ุญุธุฑ ุงูุฅุฏุฎุงู ูุงูุฅุฎุฑุงุฌ ูู UART.  ุฃุญูู ุงูุฑูุฒ ุงูุฃุตูู ู STM32 ูุฃููุฆู ุงูุฐูู ูุณูู ุฌุฏุง ููุจุญุซ ุนููุง. </p><br><p style=";text-align:right;direction:rtl"> <code>main.c</code> </p> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> stack_dummy; stack_top = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*)&amp;stack_dummy; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> MICROPY_ENABLE_GC gc_init(heap, heap + sizeof(heap)); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> mp_init(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> MICROPY_ENABLE_COMPILER #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> MICROPY_REPL_EVENT_DRIVEN pyexec_event_repl_init(); for (;;) { int c = mp_hal_stdin_rx_chr(); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (pyexec_event_repl_process_char(c)) { break; } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> pyexec_friendly_repl(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//do_str("print('hello world!', list(x+1 for x in range(10)), end='eol\\n')", MP_PARSE_SINGLE_INPUT); //do_str("for i in range(10):\r\n print(i)", MP_PARSE_FILE_INPUT); #else pyexec_frozen_module("frozentest.py"); #endif mp_deinit(); return 0; }</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"> <code>uart_core.c</code> </p> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Receive single character int mp_hal_stdin_rx_chr(void) { unsigned char c = 0; #if MICROPY_MIN_USE_STDOUT int r = read(0, &amp;c, 1); (void)r; #elif MICROPY_MIN_USE_STM32_MCU // wait for RXNE while ((USART1-&gt;SR &amp; (1 &lt;&lt; 5)) == 0) { } c = USART1-&gt;DR; #endif return c; } // Send string of given length void mp_hal_stdout_tx_strn(const char *str, mp_uint_t len) { #if MICROPY_MIN_USE_STDOUT int r = write(1, str, len); (void)r; #elif MICROPY_MIN_USE_STM32_MCU while (len--) { // wait for TXE while ((USART1-&gt;SR &amp; (1 &lt;&lt; 7)) == 0) { } USART1-&gt;DR = *str++; } #endif }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ Makefile ุจุงุณุชุฎุฏุงู ุชูุตูุงุช / ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ูู ุงูุดุฑูุฉ ุงููุตูุนุฉ: ูู ุดูุก ูุฑุฏู ููุง.  ูู ุดูุก ุ ูุฌุจ ุฃู ูููู ูุฐุง ูุซุงูููุง: ูุฌูุน ููููุฃ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ููุฑู REPL ูู UART. <br>  ุจุนุฏ ุฅุญูุงุก <code>micropython</code> ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู <code>micropython</code> : ุฅุนุฏุงุฏ ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนู ุงูุจูุงูุงุช ุงูููููุฉ ุ ูุฑุฏ ุงููุนู ุงูุตุญูุญ ุนูู Ctrl-D (ุฅุนุงุฏุฉ <code>mpconfigport.h</code> ุงููุงุนู) ูุจุนุถ ุงูุฃุดูุงุก ุงูุฃุฎุฑู ุงูุชู ูู <code>mpconfigport.h</code> : ุงูุธุฑ ููู <code>mpconfigport.h</code> . </p><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุญุฏุฉ ููุทูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ูุชุงุจุฉ ุงููุญุฏุงุช ุงูุฎุงุตุฉ ุจู.  ูุฐูู ุ ุชุจุฏุฃ ุงููุญุฏุฉ ุงูููุทูุฉ (ุบูุฑ ุถุฑูุฑูุฉ ุ ูููููุง ูุฑุบูุจ ูููุง) ุจููู <code>mod[].c</code> ุ ูุงูุฐู ุชุชู ุฅุถุงูุชู ุจูุงุณุทุฉ <code>Makefile</code> (ูุชุบูุฑ <code>SRC_C</code> ุฅุฐุง ุงุชุจุนุช ุงูุงุชูุงููุฉ).  ูุญุฏุฉ ูุงุฑุบุฉ ูู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// nlr - non-local return:  C  ,      goto-  . //  nlr_raise             . #include "py/nlr.h" //   .  ,  mp_map_elem_t,  ,   . #include "py/obj.h" //   . mp_raise_ValueError(char* msg)  mp_raise_OSError(int errorcode)   . //  ,   mp_call_function_*     Callable (  callback-). #include "py/runtime.h" #include "py/binary.h" //  header   :       #include "portmodules.h" //    --  .     MP_QSTR_[ ]. MP_OBJ_NEW_QSTR   . //             RAM. //      -      __name__ STATIC const mp_map_elem_t mymodule_globals_table[] = { { MP_OBJ_NEW_QSTR(MP_QSTR___name__), MP_OBJ_NEW_QSTR(MP_QSTR_mymodule) }, }; //      STATIC MP_DEFINE_CONST_DICT (mp_module_mymodule_globals, mymodule_globals_table); //   :             const mp_obj_module_t mp_module_mymodule = { .base = { &amp;mp_type_module }, .globals = (mp_obj_dict_t*)&amp;mp_module_mymodule_globals, };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ูุง ูุชุนุฑู ุงููููุฐ ููุณู ุนูู ุซุงุจุช <code>mp_module_mymodule</code> : ูุฌุจ ุฅุถุงูุชู ุฅูู ูุชุบูุฑ <code>MICROPY_PORT_BUILTIN_MODULES</code> ูู <code>mpconfigport.h</code> ูููุฐ <code>mpconfigport.h</code> .  ุจุงูููุงุณุจุฉ <del>  ุฎูููุงุช ูููุฉ </del>  ุงุณู ุฑูุงูุฉ ูุงุณู ุงููููุฐ ุฃูุถุง ุชุบููุฑ ููุงู.  ุจุนุฏ ูู ูุฐู ุงูุชุบููุฑุงุช ุ ููููู ูุญุงููุฉ ุชุฑุฌูุฉ ุงููุญุฏุฉ ุงูููุทูุฉ ูุงุณุชูุฑุงุฏูุง ูู REPL.  <code>__name__</code> ุณูุฉ <code>__name__</code> ูุงุญุฏุฉ ููุท ูุน ุงุณู ุงููุญุฏุฉ ุงูููุทูุฉ ูุชุงุญุฉ ูููุญุฏุฉ ุงูููุทูุฉ (ููู ุญุงูุฉ ุฑุงุฆุนุฉ ููุชุญูู ูู ุงูุฅููุงู ุงูุชููุงุฆู ูู REPL ุนุจุฑ Tab). </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mymodule &gt;&gt;&gt; mymodule.__name__ <span class="hljs-string"><span class="hljs-string">'mymodule'</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุงูุซูุงุจุช </h2><br><p style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ ุงูุชุงููุฉ ูู ุงูุชุนููุฏ ุชุถูู ุงูุซูุงุจุช.  ุบุงูุจูุง ูุง ุชููู ุงูุซูุงุจุช ุถุฑูุฑูุฉ ููุฅุนุฏุงุฏุงุช ( <code>INPUT</code> ุ <code>OUTPUT</code> ุ <code>HIGH</code> ุ <code>LOW</code> ุ ุฅูุฎ.) ูู ุดูุก ุจุณูุท ุฌุฏูุง ููุง.  ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>magic_number = 10</code> ุงูุซุงุจุช <code>magic_number = 10</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">STATIC <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mp_map_elem_t</span></span> mymodule_globals_table[] = { { MP_OBJ_NEW_QSTR(MP_QSTR___name__), MP_OBJ_NEW_QSTR(MP_QSTR_mymodule) }, { MP_OBJ_NEW_QSTR(MP_QSTR_magic_number), MP_OBJ_NEW_SMALL_INT(<span class="hljs-number"><span class="hljs-number">10</span></span>) }, };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mymodule &gt;&gt;&gt; mymodule.magic_number <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ูุธุงุฆู </h2><br><p style=";text-align:right;direction:rtl">  ุชุชุจุน ุฅุถุงูุฉ ูุธููุฉ ุฅูู ูุญุฏุฉ ููุทูุฉ ุงููุจุฏุฃ ุงูุนุงู: ุงูุชุตุฑูุญ ุ ุงูุงูุชูุงู ุ ุงูุฅุถุงูุฉ (ุฃุนุทู ูุซุงููุง ุฃูุซุฑ ุชุนููุฏูุง ุจูููู ููุง ูู ุงููุซุงุฆู). </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  STATIC mp_obj_t conditional_add_one(mp_obj_t value) { //   int.         -  :   . int value_int = mp_obj_get_int(value); value_int ++; if (value_int == 10) { //  None return mp_const_none; } //   int return mp_obj_new_int(value); } //    .     // runtime.h   . STATIC MP_DEFINE_CONST_FUN_OBJ_1(conditional_add_one_obj, conditional_add_one); //  STATIC const mp_map_elem_t mymodule_globals_table[] = { { MP_OBJ_NEW_QSTR(MP_QSTR___name__), MP_OBJ_NEW_QSTR(MP_QSTR_mymodule) }, { MP_OBJ_NEW_QSTR(MP_QSTR_magic_number), MP_OBJ_NEW_SMALL_INT(10) }, { MP_OBJ_NEW_QSTR(MP_QSTR_conditional_add_one), (mp_obj_t)&amp;conditional_add_one_obj }, };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mymodule &gt;&gt;&gt; mymodule.conditional_add_one(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">4</span></span> &gt;&gt;&gt; mymodule.conditional_add_one(<span class="hljs-number"><span class="hljs-number">9</span></span>) &gt;&gt;&gt;</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ูุฆุงุช (ุฃููุงุน) </h2><br><p style=";text-align:right;direction:rtl">  ูุน ุงููุฆุงุช (ุฃููุงุน) ุ ูู ุดูุก ุจุณูุท ุฃูุถูุง.  ูููุง ููู ูุซุงู ูู ุงููุซุงุฆู (ุฌูุฏูุง ุ ุชูุฑูุจูุง): </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     STATIC const mp_map_elem_t mymodule_hello_locals_dict_table[] = {}; //   STATIC MP_DEFINE_CONST_DICT(mymodule_hello_locals_dict, mymodule_hello_locals_dict_table); // ,  ,   const mp_obj_type_t mymodule_helloObj_type = { //    { &amp;mp_type_type }, // : helloObj .name = MP_QSTR_helloObj, //  .locals_dict = (mp_obj_dict_t*)&amp;mymodule_hello_locals_dict, }; //    STATIC const mp_map_elem_t mymodule_globals_table[] = { { MP_OBJ_NEW_QSTR(MP_QSTR___name__), MP_OBJ_NEW_QSTR(MP_QSTR_mymodule) }, { MP_OBJ_NEW_QSTR(MP_QSTR_magic_number), MP_OBJ_NEW_SMALL_INT(10) }, { MP_OBJ_NEW_QSTR(MP_QSTR_conditional_add_one), (mp_obj_t)&amp;conditional_add_one_obj }, { MP_OBJ_NEW_QSTR(MP_QSTR_conditional_add_one), (mp_obj_t)&amp;mymodule_helloObj_type }, };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>mymodule.helloObj &lt;type <span class="hljs-string"><span class="hljs-string">'helloObj'</span></span>&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูุชู ุชูุฑูุซ ุงูููุน ุงููุงุชุฌ ุ ููุงุฑูุฉ ุ ูููู ูุง ูุญุชูู ุนูู ูููุดุฆ ุฃู ุฃู ุจูุงูุงุช ูุฑุชุจุทุฉ ุจู.  ุชุชู ุฅุถุงูุฉ ุงูุจูุงูุงุช "ุจุฌุงูุจ" ุงููููุดุฆ: ูููุชุฑุญ ุฅูุดุงุก ูููู ูููุตู ูุชู ููู ุชุฎุฒูู ููุน ุจูุซูู ุจุดูู ูููุตู ููููุตู - ูุฌููุนุฉ ุจูุงูุงุช ุชุนุณููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  -. ,    typedef struct _mymodule_hello_obj_t { //   mp_obj_base_t base; // -  uint8_t hello_number; } mymodule_hello_obj_t;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุชุชูุงุนู ูุน ูุฐู ุงูุจูุงูุงุชุ  ูุงุญุฏุฉ ูู ุฃุตุนุจ ุงูุทุฑู ูู ูู ุฎูุงู ุงูููุดุฆ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// -,   (,  ,   mymodule_helloObj_type //   ,     - ),   (args  kwargs)  //        : args, kwargs STATIC mp_obj_t mymodule_hello_make_new( const mp_obj_type_t *type, size_t n_args, size_t n_kw, const mp_obj_t *args ) { //    mp_arg_check_num(n_args, n_kw, 1, 1, true); //   mymodule_hello_obj_t *self = m_new_obj(mymodule_hello_obj_t); //     self-&gt;base.type = &amp;mymodule_hello_type; //   self-&gt;hello_number = mp_obj_get_int(args[0]) //   return MP_OBJ_FROM_PTR(self); //    __init__, ,  } //      make_new const mp_obj_type_t mymodule_helloObj_type = { { &amp;mp_type_type }, .name = MP_QSTR_helloObj, .locals_dict = (mp_obj_dict_t*)&amp;mymodule_hello_locals_dict, //  .make_new = mymodule_hello_make_new, };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุญููู ุงูุฃุฎุฑู ุ ููุงู ุฃูุถูุง <code>.print</code> ุ ูุฃุนุชูุฏ ุฃู ูุง ุชุจูู ูู ุณุญุฑ <code>Python3</code> . </p><br><p style=";text-align:right;direction:rtl">  ููู <code>make_new</code> ููุณ ุถุฑูุฑููุง ุนูู ุงูุฅุทูุงู ููุญุตูู ุนูู ูุซูู ููุงุฆู: ูููู ุฅุฌุฑุงุก ุงูุชููุฆุฉ ูู ูุธููุฉ ุชุนุณููุฉ.  ูููุง ููู ูุซุงู ุฌูุฏ ูู <code>micropython/ports/esp32/modsocket.c</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   :       STATIC mp_obj_t get_socket(size_t n_args, const mp_obj_t *args) { socket_obj_t *sock = m_new_obj_with_finaliser(socket_obj_t); sock-&gt;base.type = &amp;socket_type; sock-&gt;domain = AF_INET; sock-&gt;type = SOCK_STREAM; sock-&gt;proto = 0; sock-&gt;peer_closed = false; if (n_args &gt; 0) { sock-&gt;domain = mp_obj_get_int(args[0]); if (n_args &gt; 1) { sock-&gt;type = mp_obj_get_int(args[1]); if (n_args &gt; 2) { sock-&gt;proto = mp_obj_get_int(args[2]); } } } sock-&gt;fd = lwip_socket(sock-&gt;domain, sock-&gt;type, sock-&gt;proto); if (sock-&gt;fd &lt; 0) { exception_from_errno(errno); } _socket_settimeout(sock, UINT64_MAX); return MP_OBJ_FROM_PTR(sock); } //     0-3  STATIC MP_DEFINE_CONST_FUN_OBJ_VAR_BETWEEN(get_socket_obj, 0, 3, get_socket);</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุทุฑู ููุฒูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅุถุงูุฉ ุงูุฃุณุงููุจ ุงูููุถูุฉ.  ููุน ุฐูู ุ ูุฐุง ูุง ูุฎุชูู ูุซูุฑุง ุนู ุฌููุน ุงูุฃุณุงููุจ ุงูุฃุฎุฑู.  ูุนูุฏ ุฅูู ุงููุซุงู ูู ุงููุซุงุฆู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    :     1 (self) STATIC mp_obj_t mymodule_hello_increment(mp_obj_t self_in) { mymodule_hello_obj_t *self = MP_OBJ_TO_PTR(self_in); self-&gt;hello_number += 1; return mp_const_none; } //     MP_DEFINE_CONST_FUN_OBJ_1(mymodule_hello_increment_obj, mymodule_hello_increment); //      'inc' STATIC const mp_map_elem_t mymodule_hello_locals_dict_table[] = { { MP_OBJ_NEW_QSTR(MP_QSTR_inc), (mp_obj_t)&amp;mymodule_hello_increment_obj }, }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุดุฆ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>x = mymodule.helloObj(<span class="hljs-number"><span class="hljs-number">12</span></span>) &gt;&gt;&gt; x.inc()</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุฌููุน ุงูุณูุงุช ุงูุฃุฎุฑู: <strong>getattr</strong> ุ <strong>setattr</strong> </h2><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู ุฅุถุงูุฉ ุบูุฑ ูุธุงุฆู ุ ุจุงุณุชุฎุฏุงู <code>@property</code> ูุนูููุง <code>__getattr__</code> ุงูุฎุงุตุฉ ุจูุ  ูุฑุฌู: ุฃู ูุชู ุฐูู ูุฏููุง ุชุฌุงูุฒ <code>mymodule_hello_locals_dict_table</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     ... STATIC void mymodule_hello_attr(mp_obj_t self_in, qstr attr, mp_obj_t *dest) { mymodule_hello_obj_t *self = MP_OBJ_TO_PTR(self_in); if (dest[0] != MP_OBJ_NULL) { // __setattr__ if (attr == MP_QSTR_val) { self-&gt;val = dest[1]; dest[0] = MP_OBJ_NULL; } } else { // __getattr__ if (attr == MP_QSTR_val) { dest[0] = self-&gt;val; } } } // ...     attr const mp_obj_type_t mymodule_helloObj_type = { { &amp;mp_type_type }, .name = MP_QSTR_helloObj, //     //.locals_dict = (mp_obj_dict_t*)&amp;mymodule_hello_locals_dict, .make_new = mymodule_hello_make_new, //   - attr .attr = mymodule_hello_attr, };</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุชุญููุช ุดูุฆุง ููุฌุฒุง ูุคูู attr ุ ููุง ุชููู.  ุฃูู ูู ูุฐู <code>mp_raise_AttributeError</code> ( <em>ููุงุญุธุฉ</em> : ูุฐู ุงููุธููุฉ ุบูุฑ ููุฌูุฏุฉ)ุ  ูู ุงููุงูุน ุ ุณูุชู ุงุณุชุฏุนุงุก <code>AttributeError</code> ุชููุงุฆููุง.  ุงูุณุฑ ูู ุฃู <code>dest</code> ูู ูุฌููุนุฉ ูู ุนูุตุฑูู.  ูุญุชูู ุงูุนูุตุฑ ุงูุฃูู ุนูู ูุนูู "ุงูุฅุฎุฑุงุฌ" ุ ูููุชุงุจุฉ ููุท: ูุณุชุบุฑู ุงููููุฉ <code>MP_OBJ_SENTINEL</code> ุฅุฐุง ูุงูุช ุงููููุฉ ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ู <code>MP_OBJ_NULL</code> ุฅุฐุง ูุงูุช ุจุญุงุฌุฉ ุฅูู ูุฑุงุกุชูุง.  ููููุง ูุฐูู ุ ุนูุฏ ุงูุฎุฑูุฌ ูู ุงููุธููุฉ ุ ูู ุงููุชููุน <code>MP_OBJ_NULL</code> ูู ุงูุญุงูุฉ ุงูุฃููู ูุดูุก <code>mp_obj_t</code> ูู ุงูุญุงูุฉ ุงูุซุงููุฉ.  ุงูุนูุตุฑ ุงูุซุงูู ูู ุงูุฅุฏุฎุงู ุ ูููุฑุงุกุฉ ููุท: ูุฃุฎุฐ ูููุฉ ุงููุงุฆู ูู ุงููุชุงุจุฉ ุฅุฐุง ูุงูุช ุงููููุฉ ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ู <code>MP_OBJ_NULL</code> ุฅุฐุง ูุงูุช ุจุญุงุฌุฉ ุฅูู ุงููุฑุงุกุฉ.  ูุง ุชุญุชุงุฌ ุฅูู ุชุบููุฑู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุดูุก ุ ููููู ุงูุชุญูู ูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>x = mymodule.helloObj(<span class="hljs-number"><span class="hljs-number">12</span></span>) &gt;&gt;&gt; x.val = <span class="hljs-number"><span class="hljs-number">3</span></span> &gt;&gt;&gt; x.val <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุฃู ุฅููุงู ุนูุงูุฉ ุงูุชุจููุจ ูู REPL ูุง ูุฒุงู ูุนูู ูููุฏู <code>.val</code> !  ููู ุฃููู ุฃููููุง ุ ูุณุช ุฎุจูุฑูุง ูู C ุ ูุฐูู ูุง ูููููู ุฅูุง ุฃู ุฃุฎูู ููู ูุญุฏุซ ุฐูู (ุนู ุทุฑูู ุฅุนุงุฏุฉ ุชุนุฑูู ุงููุดุบู '=='). </p><br><h2 style=";text-align:right;direction:rtl">  ูููุงุก </h2><br><p style=";text-align:right;direction:rtl">  ุจุงูุนูุฏุฉ ุฅูู ูุญุฏุฉ A9G ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตูุช</a> ุฏุนู ุฌููุน ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ุ ููู SMS ู GPRS (usockets) ู GPS ูุฅุฏุงุฑุฉ ุงูุทุงูุฉ.  ุงูุขู ููููู ุชุญููู ุดูุก ูุซู ูุฐุง ุฅูู ุงููุญุฏุฉ ุงูููุทูุฉ ูุณูุนูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cellular <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> usocket <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gps <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> machine <span class="hljs-comment"><span class="hljs-comment">#   print("Waiting network registration ...") while not c.is_network_registered(): time.sleep(1) time.sleep(2) #  GPRS print("Activating ...") c.gprs_activate("internet", "", "") print("Local IP:", sock.get_local_ip()) #  GPS gps.on() #    thingspeak host = "api.thingspeak.com" api_key = "some-api-key" fields = ('latitude', 'longitude', 'battery', 'sat_visible', 'sat_tracked') #  ,      ! fields = dict(zip(fields, map(lambda x: "field{}".format(x+1), range(len(fields))) )) x, y = gps.get_location() level = machine.get_input_voltage()[1] sats_vis, sats_tracked = gps.get_satellites() s = sock.socket() print("Connecting ...") s.connect((host, 80)) print("Sending ...") #      ,     HTTP.           HTTP, SSL   print("Sent:", s.send("GET /update?api_key={}&amp;{latitude}={:f}&amp;{longitude}={:f}&amp;{battery}={:f}&amp;{sat_visible}={:d}&amp;{sat_tracked}={:d} HTTP/1.1\r\nHost: {}\r\nConnection: close\r\n\r\n".format( api_key, x, y, level, sats_vis, sats_tracked, host, **fields ))) print("Receiving ...") print("Received:", s.recv(128)) s.close()</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุญุจ ุงููุดุฑูุน ุจุฃู ูุณุงุนุฏุฉ ููููุฉ.  ุฅุฐุง ููุช ุชุญุจ ุงููุดุฑูุน ู / ุฃู ูุฐู ุงูููุงูุฉ ุ ูุง ุชูุณู ุฃู ุชุชุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซู ุนูู ุฌูุซุจ</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar446090/">https://habr.com/ru/post/ar446090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar446078/index.html">"ุงูุตูุช": ููุงูุดุฉ ุงูุจูุฏูุงุณุช ุญูู ุชูููุฉ ุงูุตูุช</a></li>
<li><a href="../ar446080/index.html">ูู ุงูููุงูุงุช ุงููุชุญุฏุฉ ุ ุฃูุตุช ุงููุญููุฉ ุจุญุธุฑ ุงุณุชูุฑุงุฏ ุจุนุถ ุทุฑุฒ iPhone ุจุณุจุจ ุงูุชูุงู ุจุฑุงุกุงุช ุงุฎุชุฑุงุน Qualcomm Apple</a></li>
<li><a href="../ar446082/index.html">ุญูุงูุฉ ุงููุตู ุฎูุงุชู</a></li>
<li><a href="../ar446086/index.html">ุชุงุฑูุฎ ููููุณ. ุงูุฌุฒุก ุงูุซุงูุซ: ุฃุณูุงู ุฌุฏูุฏุฉ ู "ุฃุนุฏุงุก" ูุฏูููู</a></li>
<li><a href="../ar446088/index.html">ุฃุดูุงุก ูุง ุฃุนุฑููุง ูู ุนุงู 2018</a></li>
<li><a href="../ar446092/index.html">ููุท ุจุฏูู ุฃูุฏู! ุงูุฑูุจูุชุงุช ุงูุชู ูุง ุชูุฑุฑ ุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู</a></li>
<li><a href="../ar446094/index.html">ูุน ุฌุฏูู ุฏูุฑู ููุญูุงุฉ</a></li>
<li><a href="../ar446096/index.html">ูุชุงุจ "TasteVill: ููููุฉ ุฅุญุฏุงุซ ุซูุฑุฉ ูู ุชุฌุงุฑุฉ ุงูุชุฌุฒุฆุฉ ุ ูุงูููุงู ุจูู ุดูุก ุฎุงุทุฆ"</a></li>
<li><a href="../ar446098/index.html">ูุฑูุฒ ูุฑุงูุจุฉ ุงูุทูุฑุงู ุงูุณูููุชู ูู ุฃููุงุช "ููุณุชูู" ู "ุดุฑูู ุงูุดูุณ"</a></li>
<li><a href="../ar446100/index.html">ุฅูุดุงุก ูููุงุช ุชุนุฑูุจ Android ู iOS ุชููุงุฆููุง ูู ุฌุฏูู ุจูุงูุงุช Excel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>