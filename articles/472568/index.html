<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèø üë±üèø üî† Despliegue Apache Ignite Zero: ¬øexactamente cero? üë®üèª‚Äçüî¨ ‚ú≥Ô∏è üì¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somos un departamento de desarrollo de tecnolog√≠a minorista. Una vez, la administraci√≥n estableci√≥ la tarea de acelerar los c√°lculos volum√©tricos util...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Despliegue Apache Ignite Zero: ¬øexactamente cero?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472568/"><p><img src="https://habrastorage.org/webt/3n/sz/ql/3nszqltvkgimlabres4hunyxfc0.jpeg"></p><br><p> Somos un departamento de desarrollo de tecnolog√≠a minorista.  Una vez, la administraci√≥n estableci√≥ la tarea de acelerar los c√°lculos volum√©tricos utilizando Apache Ignite junto con MSSQL, y mostr√≥ un sitio con hermosas ilustraciones y ejemplos de c√≥digo Java.  Al sitio inmediatamente le gust√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zero Deployment</a> , cuya descripci√≥n promete milagros: no tiene que implementar manualmente su c√≥digo Java o Scala en cada nodo de la cuadr√≠cula y volver a implementarlo cada vez que cambie.  En el curso del trabajo, result√≥ que Zero Deployment tiene un uso espec√≠fico, cuyas caracter√≠sticas quiero compartir.  Bajo el gato reflexiones y detalles de implementaci√≥n. </p><a name="habracut"></a><br><h2 id="1-postanovka-zadachi">  1. Declaraci√≥n del problema </h2><br><p>  La esencia del problema es la siguiente.  Hay un libro de puntos de venta de SalesPoint y una referencia de producto Sku (Stock Keeping Unit).  El punto de venta tiene el atributo "Tipo de tienda" con los valores "peque√±o" y "grande".  Se conecta un surtido (una lista de productos de un punto de venta) (cargado desde un DBMS) a cada punto de venta y se proporciona informaci√≥n de que el producto especificado ha sido fechado <br>  excluido del surtido o agregado al surtido. </p><br><p>  Se requiere organizar un cach√© particionado de puntos de venta y almacenar en √©l informaci√≥n sobre productos conectados con un mes de anticipaci√≥n.  La compatibilidad con el sistema de combate requiere que el nodo del cliente Ignite descargue datos, calcule un agregado del tipo (tipo de tienda, c√≥digo de producto, d√≠a, n√∫mero de puntos de venta) y vuelva a cargarlo en el DBMS. </p><br><h2 id="2-izuchenie-literatury">  2. El estudio de la literatura. </h2><br><p>  Todav√≠a no tengo experiencia, as√≠ que estoy empezando a bailar desde la estufa.  Es decir, con una revisi√≥n de publicaciones. </p><br><p>  Un art√≠culo de 2016 que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">presenta Apache Ignite: los primeros pasos</a> contienen un enlace a la documentaci√≥n del proyecto Apache Ignite y, al mismo tiempo, reprocharlo por el slurring.  Lo le√≠ un par de veces, la claridad no llega.  En cuanto al tutorial oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de inicio</a> , que <br>  promete optimistamente "¬°Estar√°s listo y funcionando en un santiam√©n!".  Entiendo la configuraci√≥n de las variables de entorno, miro dos videos de Apache Ignite Essentials, resultaron no ser muy √∫tiles para mi tarea espec√≠fica.  Lanzo con √©xito Ignite desde la l√≠nea de comandos con el archivo est√°ndar "example-ignite.xml", construyo la primera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aplicaci√≥n de</a> c√≥mputo usando Maven.  La aplicaci√≥n funciona y utiliza Zero Deployment, ¬°qu√© belleza! </p><br><p>  Le√≠ m√°s, y all√≠ el ejemplo usa inmediatamente affinityKey (creado anteriormente a trav√©s de una consulta SQL), e incluso se aplica el misterioso BinaryObject: </p><br><pre><code class="plaintext hljs">IgniteCache&lt;BinaryObject, BinaryObject&gt; people = ignite.cache("Person").withKeepBinary();</code> </pre> <br><p>  Le√≠ un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">poco</a> : el formato binario es un poco reflejo, el acceso a los campos de un objeto por su nombre.  Puede leer el valor de un campo sin deserializar completamente el objeto (guardar memoria).  Pero, ¬øpor qu√© se usa BinaryObject en lugar de Person, porque hay Zero Deployment?  ¬øPor qu√© se traduce IgniteCache &lt;Key, Person&gt; en IgniteCache &lt;BinaryObject, BinaryObject&gt;?  A√∫n no est√° claro. </p><br><p>  Rehago Compute Application a mi caso.  La clave principal del directorio de punto de venta en MSSQL se define como [id] [int] NOT NULL, creo un cach√© por analog√≠a </p><br><pre> <code class="plaintext hljs">IgniteCache&lt;Integer, SalesPoint&gt; salesPointCache=ignite.cache("spCache")</code> </pre> <br><p>  En xml-config indico que el cach√© est√° particionado </p><br><pre> <code class="plaintext hljs">&lt;bean class="org.apache.ignite.configuration.CacheConfiguration"&gt; &lt;property name="name" value="spCache"/&gt; &lt;property name="cacheMode" value="PARTITIONED"/&gt; &lt;/bean&gt;</code> </pre> <br><p>  El particionamiento por puntos de venta supone que el agregado requerido se construir√° en cada nodo del cl√∫ster para los registros de salesPointCache disponibles all√≠, despu√©s de lo cual el nodo del cliente realizar√° la suma final. </p><br><p>  Le√≠ el tutorial de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera aplicaci√≥n de c√≥mputo de</a> encendido, lo hago por analog√≠a.  En cada nodo del cl√∫ster ejecuto IgniteRunnable (), algo como esto: </p><br><pre> <code class="plaintext hljs"> @Override public void run() { SalesPoint sp=salesPointCache.get(spId); sp.calculateSalesPointCount(); .. }</code> </pre> <br><p>  Agrego la l√≥gica de agregaci√≥n y carga, ejecuto un conjunto de datos de prueba.  Localmente, todo funciona en el servidor de desarrollo. </p><br><p>  Lanzo dos servidores de prueba CentOs, especifico direcciones IP en default-config.xml, ejecuto en cada </p><br><pre> <code class="plaintext hljs">./bin/ignite.sh config/default-config.xml</code> </pre> <br><p>  Ambos nodos de encendido se inician y se ven.  Especifico las direcciones necesarias en la configuraci√≥n xml de la aplicaci√≥n cliente, se inicia, agrega un tercer nodo a la topolog√≠a e inmediatamente hay dos nodos nuevamente.  El registro dice "ClassNotFoundException: model.SalesPoint" en la l√≠nea </p><br><pre> <code class="plaintext hljs">SalesPoint sp=salesPointCache.get(spId);</code> </pre> <br><p>  StackOverflow dice que la causa del error es que los servidores CentOs no tienen una clase personalizada de SalesPoint.  Llegado  Entonces, ¬øc√≥mo no tiene que implementar manualmente su c√≥digo Java en cada nodo y en adelante?  ¬øO su c√≥digo Java no se trata de SalesPoint? </p><br><p>  Probablemente me perd√≠ algo, nuevamente comienzo a buscar, leer y buscar nuevamente.  Con el tiempo, siento que leo todo sobre el tema, no hay nada nuevo.  Mientras buscaba, encontr√© algunos comentarios interesantes. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Valentin Kulichenko</a> , arquitecto jefe de GridGain Systems, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">respuesta</a> a StackOverflow, abril de 2016: </p><br><pre> <code class="plaintext hljs">Model classes are not peer deployed, but you can use withKeepBinary() flag on the cache and query BinaryObjects. This way you will avoid deserialization on the server side and will not get ClassNotFoundException.</code> </pre> <br><p>  Otra opini√≥n autorizada: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Denis Magda</a> , Director de gesti√≥n de productos, GridGain Systems. </p><br><p>  Un art√≠culo sobre Habr√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre microservicios se</a> refiere a tres art√≠culos de Denis Magda: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microservicios Parte I</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microservicios Parte II</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microservicios Parte III</a> 2016-2017.  En un segundo art√≠culo, Denis sugiere iniciar un nodo de cl√∫ster a trav√©s de MaintenanceServiceNodeStartup.jar.  Tambi√©n puede usar el inicio con la configuraci√≥n xml y la l√≠nea de comando, pero luego debe colocar manualmente clases personalizadas en cada nodo del cl√∫ster desplegado: </p><br><pre> <code class="plaintext hljs">That's it. Start (..) node using MaintenanceServiceNodeStartup file or pass maintenance-service-node-config.xml to Apache Ignite's ignite.sh/bat scripts. If you prefer the latter then make sure to build a jar file that will contain all the classes from java/app/common and java/services/maintenance directories. The jar has to be added to the classpath of every node where the service might be deployed.</code> </pre> <br><p>  De hecho, eso es todo.  ¬°Aqu√≠ resulta, por qu√©, este misterioso formato binario! </p><br><h2 id="3-singlejar">  3. SingleJar </h2><br><p>  Denis tom√≥ el primer lugar en mi calificaci√≥n personal, en mi humilde opini√≥n el tutorial m√°s √∫til de todos los disponibles.  Su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> MicroServicesExample contiene un ejemplo completamente listo de configuraci√≥n de nodos de cl√∫ster, que se compila sin ning√∫n tipo de sentadillas adicionales. </p><br><p>  Lo hago a imagen y semejanza, obtengo un solo archivo jar que ejecuta el "nodo de datos" o "nodo de cliente" dependiendo del argumento de la l√≠nea de comando.  El ensamblaje comienza y se ejecuta.  Zero Deployment es derrotado. </p><br><p>  La transici√≥n de megabytes de datos de prueba a decenas de gigabytes de datos de combate mostr√≥ que el formato binario existe por una buena raz√≥n.  Era necesario optimizar el consumo de memoria en los nodos, y aqu√≠ BinaryObject fue muy √∫til. </p><br><h2 id="4-vyvody">  4. Conclusiones </h2><br><p>  La primera reprimenda que encontramos sobre la documentaci√≥n borrosa del proyecto Apache Ignite result√≥ ser justa, ha cambiado un poco desde 2016.  No es f√°cil para un principiante construir un prototipo funcional basado en un sitio y / o repositorio. </p><br><p>  Como resultado del trabajo realizado, parec√≠a que Zero Deployment funciona, pero solo a nivel del sistema.  Algo como esto: BinaryObject se usa para ense√±ar a los nodos remotos del cl√∫ster c√≥mo trabajar con clases personalizadas;  Implementaci√≥n cero: mecanismo interno <br>  Apache se enciende y distribuye objetos del sistema a trav√©s del cl√∫ster. </p><br><p>  Espero que mi experiencia sea √∫til para los nuevos usuarios de Apache Ignite. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472568/">https://habr.com/ru/post/472568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472552/index.html">63 n√∫cleos bloqueados por siete instrucciones</a></li>
<li><a href="../472556/index.html">¬øEl secreto para la felicidad de los empleados es la naturaleza en la oficina?</a></li>
<li><a href="../472560/index.html">Pruebas de Gestalt: un nuevo enfoque para la optimizaci√≥n de listas de correo basado en la teor√≠a bayesiana y el aprendizaje autom√°tico</a></li>
<li><a href="../472562/index.html">Tendencias financieras: las grandes empresas necesitan cada vez m√°s profesionales de TI</a></li>
<li><a href="../472566/index.html">El infierno personal del escritor Fraerman, o el cuento del primer amor</a></li>
<li><a href="../472570/index.html">Intel Xeon W Big Update</a></li>
<li><a href="../472572/index.html">DevOps y el caos: entrega de software en un mundo descentralizado</a></li>
<li><a href="../472574/index.html">Crea tu Minecraft: genera niveles 3D a partir de cubos</a></li>
<li><a href="../472576/index.html">XVI conferencia de desarrolladores de software libre o d√≥nde obtener contribuyentes gratuitos</a></li>
<li><a href="../472580/index.html">Gesti√≥n de servicios empresariales: por qu√© ampliar la gesti√≥n de servicios m√°s all√° de TI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>