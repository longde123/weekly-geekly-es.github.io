<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏐 💏 ✡️ Alat pengembang Node.js. Protokol Mqtt untuk bekerja dengan soket web 🔴 ⛳️ 🎻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Teknologi soket web memungkinkan pengiriman pesan dari server ke klien dalam aplikasi web atau dalam aplikasi seluler, yang tidak dapat dilakukan meng...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alat pengembang Node.js. Protokol Mqtt untuk bekerja dengan soket web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469315/"> Teknologi soket web memungkinkan pengiriman pesan dari server ke klien dalam aplikasi web atau dalam aplikasi seluler, yang tidak dapat dilakukan menggunakan REST-API.  Untuk bekerja dengan soket web, mereka sering menggunakan perpustakaan socket.io, atau pengembang bekerja dengan objek soket web browser asli.  Dalam posting ini, saya akan mencoba menunjukkan bahwa kedua cara tidak menyelesaikan semua masalah, dan jauh lebih baik menggunakan server khusus, misalnya, server mqtt (sebelumnya disebut pialang mqtt) untuk bekerja dengan soket web. <br><br>  Dalam keadilan, dan untuk menghindari perselisihan yang tidak perlu, saya perhatikan bahwa selain server mqtt, sejumlah server lain dapat digunakan, misalnya rabbitmq. <br><a name="habracut"></a><br>  Mengembangkan aplikasi menggunakan soket web tampaknya sangat sederhana sampai kita menemukan kenyataan di mana koneksi sering terputus.  Tugas pertama yang harus dipecahkan adalah melacak jeda koneksi dan memulihkannya.  Situasi ini diperumit oleh kenyataan bahwa selama pemutusan dan penyambungan kembali, klien terus mengirim pesan baru, serta pesan baru dapat dikirim ke klien yang lebih mungkin hilang. <br><br>  Diperlukan pada tingkat aplikasi untuk memantau penerimaan pesan, dan untuk menerapkan pengiriman berulang mereka.  Saya terutama ingin menarik perhatian pada frase "di level aplikasi" (tapi saya ingin berada di level protokol). <br><br>  Segera setelah kami menambahkan logika untuk melacak pengiriman pesan, semua pesan mulai berdatangan, tetapi segera menjadi jelas bahwa ada pesan duplikat, karena pesan tersebut dapat diterima, dan konfirmasi fakta ini hilang karena koneksi terputus.  Dan Anda perlu menggandakan jumlah kode program untuk mengecualikan pesan duplikat. <br><br>  Seiring dengan komplikasi kode program, efisiensinya juga menurun, yang sering mereka kritik terhadap socket.io library.  Ini, tentu saja, kurang efektif daripada bekerja dengan soket web asli, khususnya, karena adanya logika koneksi ulang dan konfirmasi pengiriman pesan (saya segera melihat bahwa logika pengiriman ulang tidak diterapkan pada socket.io). <br><br>  Cara yang lebih andal dan efisien adalah membawa logika ini ke tingkat protokol.  Dan protokol seperti itu ada - itu adalah mqtt.  Versi pertama dari protokol mqtt dikembangkan oleh Andy Stanford-Clark (IBM) dan Arlene Nipper (Arcom) pada tahun 1999. Spesifikasi MQTT 3.1.1 distandarisasi oleh konsorsium OASIS pada tahun 2014. <br><br>  Protokol mqtt memiliki parameter "kualitas layanan" (qos) yang dapat mengambil nilai: <br>  0 - pesan dikirimkan jika memungkinkan; <br>  1 - pesan yang dikirim dijamin, tetapi mungkin ada duplikat; <br>  2 - pesan dikirim dijamin dan dijamin sekali. <br><br>  Yaitu, protokol mqtt memecahkan masalah dengan pengiriman pesan yang dijamin, dan masalah ini dihapus dari agenda.  Tapi bukan hanya pertanyaan ini. <br><br>  Performa dan penskalaan. <br><br>  Saat bekerja dengan soket web, semua klien yang terhubung meninggalkan koneksi terbuka ke server, bahkan jika tidak ada pesan nyata.  Beban ini secara inheren berbeda dari beban di REST-API, yang ditentukan oleh aliran permintaan.  Beban koneksi terbuka pada soket web sulit untuk ditiru selama fase pengujian.  Oleh karena itu, asumsi yang keliru sering dibuat tentang kinerja aplikasi yang cukup dengan jumlah pesan yang dikirim dan diterima, tanpa memperhitungkan beban mempertahankan sejumlah besar koneksi terbuka dengan klien. <br><br>  Jika kami mentransfer semua pekerjaan dengan soket web ke server mqtt khusus, maka aplikasi nodejs kami hanya membuka satu koneksi pada soket web (atau tcp, karena mqtt mendukung kedua protokol) dengan server mqtt, dan kami dapat skala aplikasi kita dengan menghubungkan beberapa instance dari nodejs ke server mqtt. <br><br>  Jika sumber daya dari satu server mqtt habis, Anda dapat mengatur sekelompok server mqtt tanpa mempengaruhi aplikasi pada nodejs. <br><br>  Sekarang mari kita beralih ke contoh. <br><br>  Server atau broker mqtt, seperti yang disebut dalam spesifikasi sebelumnya, berfungsi sesuai dengan model pengiriman pesan / berlangganan pesan.  Setiap pesan dikirim ke topik.  Penerima berlangganan utas pesan.  Baik pengirim dan penerima memiliki dua pengidentifikasi: clientId (pengidentifikasi perangkat) dan nama pengguna (nama pengguna). <br><br>  Pengidentifikasi perangkat penting, karena dikaitkan dengan langganan dan pesan akan dikirim ke sana.  Nama pengguna, tidak seperti pengenal perangkat, tidak memainkan peran yang menentukan dalam pengiriman pesan, dan digunakan untuk membedakan akses ke topik. <br><br>  Untuk bekerja dengan protokol mqtt pada sisi klien, pustaka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/eclipse/paho.mqtt.javascript</a> digunakan.  Ada beberapa implementasi server, termasuk yang gratis.  Dalam contoh ini, kita akan menggunakan server emqx, yang dijalankan melalui docker-compose (lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/apapacy/tut-mqtt</a> ). <br><br>  Untuk pengujian, buat dokumen di mana kami akan mengatur clientId, userName dan teks pesan: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/paho-mqtt.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/messages.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sender"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onsubmit</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"return false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"client"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"message"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"connect()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"connect"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"send()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"send"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Mengirim pesan diimplementasikan dalam file message.js: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> client; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> connectOptions = { <span class="hljs-attr"><span class="hljs-attr">timeout</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">reconnect</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">cleanSession</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">mqttVersion</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">keepAliveInterval</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">onSuccess</span></span>: onConnect, <span class="hljs-attr"><span class="hljs-attr">onFailure</span></span>: onFailure } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Paho.Client(<span class="hljs-string"><span class="hljs-string">'localhost'</span></span>, <span class="hljs-number"><span class="hljs-number">8083</span></span>, <span class="hljs-string"><span class="hljs-string">'/mqtt'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.forms.sender.client.value); connectOptions.userName = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.forms.sender.user.value; client.connect(connectOptions); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ex) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(ex); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onConnect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'on connect'</span></span>); client.onMessageArrived = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"onMessageArrived: "</span></span> + message.payloadString); } client.subscribe(<span class="hljs-string"><span class="hljs-string">"test"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">qos</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFailure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'on failure'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(err)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> message = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Paho.Message(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.forms.sender.message.value); message.destinationName = <span class="hljs-string"><span class="hljs-string">"test"</span></span>; message.qos = <span class="hljs-number"><span class="hljs-number">2</span></span>; client.send(message); }</code> </pre><br><br>  Untuk memeriksa, buka file index.html di browser, tentukan clientId, nama pengguna, teks pesan, dan kirim beberapa pesan (Anda dapat membacanya di konsol, saat klien mengirim pesan ke topik pengujian, dan berlangganan ke topik ini sendiri). <br><br>  Sekarang buka browser lain atau tab browser lain, dan gabung dengan clientId lainnya (ini penting).  Kirim beberapa pesan lagi dari browser pertama, dan pastikan mereka datang ke kedua klien, karena mereka memiliki clientId yang berbeda dan mereka berlangganan tes topik. <br><br>  Sekarang tutup browser kedua (atau tab browser kedua), dan kirim beberapa pesan lagi.  Setelah itu, buka kembali browser kedua, dan bergabung dengan clientId yang sama.  Pastikan di log konsol bahwa Anda telah menerima semua pesan yang dikirim selama periode ketika browser kedua (tab kedua) ditutup.  Ini terjadi karena: <br><br><ul><li>  Saat mengirim pesan, tingkat kualitas qos = 2 ditetapkan; </li><li>  Anda sebelumnya telah bergabung dengan topik yang sama dengan clientId yang sama dengan menetapkan qos = 2; </li><li>  Opsi koneksi diatur ke cleanSession: false. </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode sampel dapat diunduh dari repositori</a> . <br><br>  apapacy@gmail.com <br>  29 September 2019 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id469315/">https://habr.com/ru/post/id469315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id469299/index.html">Tampilan Instan, Instan dan tidak dapat diakses</a></li>
<li><a href="../id469301/index.html">Agilean: Lean + Agile</a></li>
<li><a href="../id469303/index.html">Andrei Belyaev tentang refleksi di Jawa pada pertemuan jug.msk.ru</a></li>
<li><a href="../id469307/index.html">Google nuts</a></li>
<li><a href="../id469309/index.html">Kami memasang layanan sederhana untuk memantau pergerakan objek ke server</a></li>
<li><a href="../id469317/index.html">Keuangan untuk PMa di presale: cara cepat menghitung anggaran dan Arus Kas di Proyek MS</a></li>
<li><a href="../id469319/index.html">Pengalaman Kampus F2P</a></li>
<li><a href="../id469321/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari ke 51. Pemecahan Masalah EIGRP</a></li>
<li><a href="../id469323/index.html">Masalah akseptor / setter dan enkapsulasi dalam proyek symfony</a></li>
<li><a href="../id469327/index.html">Salah satu cara untuk menghitung logaritma basis 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>