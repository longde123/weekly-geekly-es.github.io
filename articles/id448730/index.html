<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🚀 🏜️ 🎂 Monitor overclocking 🍧 🧑🏿‍🤝‍🧑🏿 💃🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Overclocking prosesor atau memori dapat dimengerti, tetapi mengapa melakukan overclock pada lampu latar monitor? 



 Ini tentang 23-inch Samsung Sync...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monitor overclocking</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448730/"> Overclocking prosesor atau memori dapat dimengerti, tetapi mengapa melakukan overclock pada lampu latar monitor? <br><br><img src="https://habrastorage.org/webt/j9/-x/td/j9-xtd1vnzydcain6_yk9lq6u7k.png"><br><br>  Ini tentang 23-inch Samsung SyncMaster BX2340 (dirilis pada Januari 2011) dengan LED backlight.  Seiring waktu, ia mulai memperhatikan bahwa bekerja untuknya melelahkan, dan berkonsentrasi semakin sulit.  Dan tidak hanya berfungsi, baca saja, misalnya.  Monitor itu sendiri tetap sama, tetapi menjadi lebih sulit bagi saya.  Dan untuk layar lain itu bekerja dengan sangat baik. <br><a name="habracut"></a><br>  Setelah <i>di Internet</i> saya membaca tentang perasaan subjektif pengguna ponsel dengan layar OLED dengan kecepatan refresh 240 Hz.  Keluhan lelah dan sakit kepala.  Dan ada referensi (tanpa bukti) studi tentang pengaruh frekuensi redup cahaya latar pada tubuh: meskipun mata tidak melihat berkedip pada 240 Hz, otak meresponnya.  Cahaya konstan atau dengan frekuensi lebih dari 3 kHz tidak memuat otak dengan cara ini. <br><br>  Kemudian di YouTube saya mendapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video</a> tentang membuat kembali lampu latar monitor untuk arus searah.  Intervensi dalam skema tersebut adalah kardinal.  Di bawah video ada komentar tentang perubahan warna pada arus rendah pada kabel.  Dan lampu latar saya bekerja pada 10-25%, karena ruangannya cukup gelap.  <b>UPD</b> : Dalam video, penulis hanya memiliki satu karangan LED, dan saya punya 4. <br><br>  Diputuskan untuk meninggalkan kontrol kecerahan menggunakan <abbr title="Modulasi Lebar Pulsa, PWM">PWM</abbr> , tetapi meningkatkan frekuensi.  Saya bahkan tidak mulai mengukur flicker dengan metode non-invasif menggunakan fotoresistor atau fotodioda, saya segera membongkar monitor. <br><br><img src="https://habrastorage.org/webt/vh/xo/gv/vhxogvdagy1igeuolvfj8pnaqpq.jpeg"><br><br>  Pengontrol Cahaya Latar - OZ9993CN.  Tidak ada lembar data normal, hanya driver lampu latar grup yang dibuat oleh O <sub>2</sub> Micro.  Ternyata pengemudi juga terlibat dalam meningkatkan tegangan (menurut pengukuran dari 14,4 V menjadi 54,6 V) menggunakan transistor efek medan kuat dan induktansi. <br><br>  Salah satu sirkuit memiliki arti yang mirip dengan pengemudi, nomor pin tidak cocok: <br><br><img src="https://habrastorage.org/webt/cm/z0/15/cmz015ibazr_t1kscsgzsi1u8aw.png"><br><br>  Di papan tulis, jalur sinyal PWM ke pengemudi ditandatangani sebagai B-Dim (Backlight dimming?), Saya tidak perlu mencari.  Selanjutnya, tiruan dari USBee AX USB digital osiloskop digabungkan dengan sigrok di sisi PC ikut bermain.  Pengukuran menunjukkan bahwa frekuensi lampu latar adalah 180 Hz (itu tidak akan cukup!).  Level sinyal tinggi - 5 V. <br><br><img src="https://habrastorage.org/webt/sa/cw/eh/sacwehre4ijik_-yuuwyqscppfs.png"><br><br>  Sekarang Anda perlu menaikkan frekuensi PWM ke nilai kilohertz, sekali setiap 16. Hal pertama yang terlintas dalam pikiran adalah memasukkan mikrokontroler ke dalam celah trek PWM untuk menerima sinyal dan memutarnya 16 kali lebih cepat.  Kami membutuhkan 2 timer, yang satu akan mengukur durasi level rendah dan tinggi, yang lain akan memberikan sinyal PWM.  Setelah mengambil koefisien pembagi, kita dapat melakukannya tanpa aritmatika sama sekali, hanya dengan menyalin.  Tidak, Arduino tidak akan melakukannya.  Tidak akan ada assembler juga, akan ada GCC.  MK kecil dengan setidaknya dua timer (dari stok) adalah ATtiny15.  Tapi WinAVR tidak ingin bekerja dengannya, jadi saya harus mengambil versi yang lebih lama - ATtiny45 (ATtiny25 / 85 juga akan bekerja). <br><br>  Skema: <br><br><pre><code class="plaintext hljs">100n ┌───────┤├───────┐ │ ┌────────────┐ │ │ │ 1 8 ├─┴─ VCC │ │ 2 7 ├─ PB2 (INT0) INPUT │ │ 3 6 ├─ PB1 (OC1A) OUTPUT GND ─┴─┤ 4 5 │ └────────────┘ ATtiny45</code> </pre> <br>  Kami memilih faktor pembagi timer.  Ambil frekuensi CPU sekitar 8 MHz, dari built-in RC-generator. <br><br><ul><li>  Pengukur waktu.  Berapa banyak ukuran dalam periode peredupan? <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>8000000</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>180</mn><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>e</mi><mi>k</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mn>4444</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.486ex" height="2.66ex" viewBox="0 -832 11403.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="2502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="3003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2F" x="3503" y="0"></use><g transform="translate(4004,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-73" x="5755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-65" x="6225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-6B" x="6691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-69" x="7213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-74" x="7558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-61" x="7920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-72" x="8449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-24" x="8901" y="0"></use><g transform="translate(9401,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-34"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-34" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-34" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-34" x="1501" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>8000000</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>180</mn><mtext>&nbsp;</mtext><mi>s</mi><mi>e</mi><mi>k</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mn>4444</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> 8000000/180 \ sekitar $ 4444</script>  .  Agar sesuai dengan register delapan-bit timer dengan kehilangan akurasi minimum, kami mengambil pre-divider 256, nilai maksimum dari counter akan menjadi <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>8.000.000</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>180</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>256</mn><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>e</mi><mi>k</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mn>173</mn><mo>,</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.914ex" height="2.66ex" viewBox="0 -832 13740.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2E" x="2280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="2559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="3059" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="3560" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2F" x="4060" y="0"></use><g transform="translate(4561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2F" x="6062" y="0"></use><g transform="translate(6563,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-73" x="8314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-65" x="8784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-6B" x="9250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-69" x="9772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-74" x="10117" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-61" x="10479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-72" x="11008" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-24" x="11460" y="0"></use><g transform="translate(11960,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-37" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-33" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2C" x="13462" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>8.000.000</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>180</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>256</mn><mtext>&nbsp;</mtext><mi>s</mi><mi>e</mi><mi>k</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mn>173</mn><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> 8.000.000 / 180/256 \ sekitar $ 173,</script>  . </li><li>  Timer PWM  Kami akan membuat frekuensinya 16 kali lebih besar: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>180</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>16</mn><mo>=</mo><mn>2880</mn><mi>H</mi><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.483ex" height="2.057ex" viewBox="0 -780.1 9249.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-63" x="1751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-64" x="2185" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-6F" x="2708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-74" x="3194" y="0"></use><g transform="translate(3555,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-3D" x="4834" y="0"></use><g transform="translate(5890,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1501" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-48" x="7892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-7A" x="8781" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>180</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>16</mn><mo>=</mo><mn>2880</mn><mi>H</mi><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> 180 \ cdot 16 = 2880 Hz </script>  , maka pra-pembagi adalah beberapa kali lebih kecil: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>256</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>16</mn><mo>=</mo><mn>16</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.398ex" height="2.66ex" viewBox="0 -832 5338.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-36" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-2F" x="1501" y="0"></use><g transform="translate(2002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-36" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-3D" x="3280" y="0"></use><g transform="translate(4337,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-36" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>256</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>16</mn><mo>=</mo><mn>16</mn></math></span></span><script type="math/tex" id="MathJax-Element-4"> 256/16 = 16 </script>  . </li></ul><br>  Sinyal input terhubung ke kaki interupsi eksternal.  Penangannya: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* External Interrupt 0 */</span></span> ISR(INT0_vect, ISR_NAKED) { <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> timer = TCNT0; <span class="hljs-comment"><span class="hljs-comment">//     if (PINB &amp; 1&lt;&lt;PB2) { //  .   -    OCR1C = timer; //   TCNT0 = 0; //     } else { //   -  OCR1A = timer; //   } reti(); }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Apa itu ISR_NAKED?</b> <div class="spoiler_text">  "ISR_NAKED" berarti bahwa penyimpanan / pengembalian register dan bendera prosesor dibuang, ini dilakukan untuk mempercepat.  Ini dapat dilakukan dengan memastikan bahwa mereka tidak terpengaruh dalam loop utama (kami hanya memiliki loop <code>while(1) {}</code> ), dan bahwa tidak akan ada panggilan dari subrutin.  Nah, pada akhirnya, kami meresepkan kembalinya dari fungsi dengan memiringkan <code>reti()</code> interrupt <code>reti()</code> bendera. <br></div></div><br>  Disolder, dipasang - dan berhasil! <br><br><img src="https://habrastorage.org/webt/bb/at/e0/bbate0_liq4thqfjsibldj4yd-w.jpeg"><br><br>  Tetapi throttle itu mulai berdecit.  Kami melihat apa yang ada di gerbang pengontrol lapangan yang mengontrol arus melalui induktor daya: <br><br><img src="https://habrastorage.org/webt/nj/ia/ph/njiaphmjgkj_23joxovlut5-afm.png"><br><br>  Semuanya sesuai dengan throttle, itu terus beroperasi pada frekuensi 320 kHz, tetapi jika sebelumnya frekuensi PWM adalah 180 Hz dan hampir tidak terdengar (hanya jika Anda membawa telinga Anda), maka 2,9 kHz sangat terdengar.  Dan kenyamanan jelas tidak meningkat.  Tetapi bagaimana jika Anda membawa frekuensi melampaui batas kemampuan mendengar?  Sebagai contoh <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>180</mn><mi>H</mi><mi>z</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>128</mn><mo>=</mo><mn>23040</mn><mi>H</mi><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.96ex" height="2.057ex" viewBox="0 -780.1 11607.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-48" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-7A" x="2390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-63" x="3108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-64" x="3542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-6F" x="4065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-74" x="4551" y="0"></use><g transform="translate(4912,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-38" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-3D" x="6691" y="0"></use><g transform="translate(7748,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-33" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-34" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMAIN-30" x="2002" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-48" x="10250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/448730/&amp;usg=ALkJrhi3vQP1DVJPWx9spxu1cW2Q_WscAg#MJMATHI-7A" x="11139" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>180</mn><mi>H</mi><mi>z</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>128</mn><mo>=</mo><mn>23040</mn><mi>H</mi><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> 180 Hz \ cdot 128 = 23040 Hz </script>  ?  Kami mengubah pengali pembagi timer PWM dari 16 menjadi 2, dan mem-flash-nya.  Ternyata semuanya beres.  Hampir. <br><br>  Timer delapan bit dalam kasus ini tidak cukup <s>, Anda perlu lebih banyak mineral</s> .  Ini memanifestasikan dirinya dalam bentuk fluktuasi frekuensi rendah dalam kecerahan, dengan peningkatan halus dan hilangnya frekuensi beberapa detik.  Untuk mengatasi momok ini, Anda dapat mengambil kristal lebih gemuk, tapi ini bukan cara kami.  Kami akan meningkatkan kedalaman bit timer pengukur secara terprogram dan memperkenalkan ambang batas (histeresis) untuk deteksi andal perpindahan kecerahan oleh pengguna (0-100 dengan resolusi 1).  Kami meningkatkan keakuratan pengukur waktu sebanyak 256 kali, dan faktor pengali menjadi sama dengan 1. <br><br>  Mengukur timer overflow handler dengan opsi "ada yang salah dan durasi level berlarut-larut": <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Timer/Counter0 Overflow */</span></span> ISR(TIM0_OVF_vect, ISR_NAKED) { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TIME_H_LIM (UCHAR_MAX-1) </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (time_h &lt; TIME_H_LIM) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Normal way time_h += 1; } else { // High part overflowed if (PINB &amp; 1&lt;&lt;PB2) { OCR1A = TIME_H_LIM; // Always on } else { OCR1A = 0; // Always off } OCR1C = TIME_H_LIM; time_h = 0; time_cycle = 0; time_on = 0; } reti(); // Because ISR_NAKED }</span></span></span></span></code> </pre> <br>  Gangguan eksternal sekarang juga sedikit lebih rumit: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* External Interrupt 0 */</span></span> ISR(INT0_vect, ISR_NAKED) { <span class="hljs-comment"><span class="hljs-comment">// F_CPU / Timer1 prescaler / F_PWM_IN / grades / 4 #define THRESHOLD (F_CPU / 1 / F_PWM_IN / 100 / 4) uint16_t time; uint8_t time_l = TCNT0; if ((TIFR &amp; 1&lt;&lt;TOV0) &amp;&amp; (time_l &lt;= UCHAR_MAX/2)) { // Overflow occured right now time_l = UCHAR_MAX; // 0xff } time = (time_h &lt;&lt; 8) + time_l; if (PINB &amp; 1&lt;&lt;PB2) { // Risen if (abs(time - time_cycle) &gt; THRESHOLD) { time_cycle = time; OCR1C = time_h; } TCNT0 = 0; time_h = 0; if (TIFR &amp; 1&lt;&lt;TOV0) { TIFR = 1&lt;&lt;TOV0; // Clear Timer0 overflow flag } } else { // Falled if (abs(time - time_on) &gt; THRESHOLD) { time_on = time; OCR1A = time_h; } } reti(); // Because ISR_NAKED }</span></span></code> </pre> <br>  Ada beberapa variabel global yang saya kendarai ke register, bagaimanapun juga kita memiliki overclocking.  SRAM hanya digunakan untuk menyimpan alamat pengirim saat memasukkan interrupt handler.  Bagian tertinggi dari penghitung pengukuran interval adalah dalam variabel time_h, dan nilai-nilai dari panjang siklus PWM yang diukur dan siklus tugas masing-masing adalah dalam time_cycle dan time_on.  THRESHOLD - ambang batas untuk mendeteksi perubahan kecerahan. <br><br>  Sekarang semuanya berfungsi, seperti yang dimaksudkan. <br><br><div class="spoiler">  <b class="spoiler_title">Kode lengkap</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* PWM frequency multiplier x128 100n ┌───────┤├───────┐ │ ┌────────────┐ │ │ │ 1 8 ├─┴─ VCC │ │ 2 7 ├─ PB2 (INT0) INPUT │ │ 3 6 ├─ PB1 (OC1A) OUTPUT GND ─┴─┤ 4 5 │ └────────────┘ ATtiny45 fuses: lfuse=0xe2 hfuse=0xdf */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;avr/interrupt.h&gt; #include &lt;avr/wdt.h&gt; #include &lt;stdlib.h&gt; #include &lt;limits.h&gt; #define F_CPU 8000000UL #define F_PWM_IN 180U register uint8_t time_h asm("r4"); // High part of time counter register uint16_t time_cycle asm("r12"); // Period register uint16_t time_on asm("r14"); // H level duration __attribute__((naked)) int main(void) { time_h = 0; time_cycle = 0; time_on = 0; ACSR |= 1&lt;&lt;ACD; // Comparator disable // Timer0 TCCR0A = 0; // CK/1 TCCR0B = 1&lt;&lt;CS00; // Timer1 DDRB |= 1&lt;&lt;PB1; // PWM output // CK/2, Clear the OC1A output line TCCR1 = 1&lt;&lt;CTC1|1&lt;&lt;PWM1A|2&lt;&lt;COM1A0|2&lt;&lt;CS10; TIMSK |= 1&lt;&lt;TOIE0; // Timer0 overflow // Ext int 0 MCUCR |= 1&lt;&lt;ISC00; // Any logical change on INT0 generates an interrupt request GIMSK |= 1&lt;&lt;INT0; // External Interrupt Request 0 Enable PORTB |= 1&lt;&lt;PB2; // Input wdt_enable(WDTO_120MS); // Watchdog on sei(); // Interrupts enable while (1) { // Do not use flags or registers wdt_reset(); // Watchdog reset } } /* External Interrupt 0 */ ISR(INT0_vect, ISR_NAKED) { // F_CPU / Timer1 prescaler / F_PWM_IN / grades / 4 #define THRESHOLD (F_CPU / 1 / F_PWM_IN / 100 / 4) uint16_t time; uint8_t time_l = TCNT0; if ((TIFR &amp; 1&lt;&lt;TOV0) &amp;&amp; (time_l &lt;= UCHAR_MAX/2)) { // Overflow occured right now time_l = UCHAR_MAX; // 0xff } time = (time_h &lt;&lt; 8) + time_l; if (PINB &amp; 1&lt;&lt;PB2) { // Risen if (abs(time - time_cycle) &gt; THRESHOLD) { time_cycle = time; OCR1C = time_h; } TCNT0 = 0; time_h = 0; if (TIFR &amp; 1&lt;&lt;TOV0) { TIFR = 1&lt;&lt;TOV0; // Clear Timer0 overflow flag } } else { // Falled if (abs(time - time_on) &gt; THRESHOLD) { time_on = time; OCR1A = time_h; } } reti(); // Because ISR_NAKED } /* Timer/Counter0 Overflow */ ISR(TIM0_OVF_vect, ISR_NAKED) { #define TIME_H_LIM (UCHAR_MAX-1) if (time_h &lt; TIME_H_LIM) { // Normal way time_h += 1; } else { // High part overflowed if (PINB &amp; 1&lt;&lt;PB2) { OCR1A = TIME_H_LIM; // Always on } else { OCR1A = 0; // Always off } OCR1C = TIME_H_LIM; time_h = 0; time_cycle = 0; time_on = 0; } reti(); // Because ISR_NAKED }</span></span></span></span></code> </pre><br></div></div><br>  Anda dapat menyebutnya saran otomatis, tetapi hasilnya adalah ini: hidup menjadi lebih baik, hidup telah menjadi lebih menyenangkan!  Bahkan proyek yang sudah lama berjalan pun berlanjut. <br><br>  Jika dalam kasus Anda, frekuensi lampu latar tidak memengaruhi kesejahteraan dan produktivitas Anda - anggaplah Anda beruntung.  Mungkin  Serta orang yang memastikan bahwa mereka benar-benar nyaman ketika konten CO <sub>2</sub> di dalam ruangan lebih dari 0,2% (2000 <abbr title="Ppm juta">ppm</abbr> ). <br><br><div class="spoiler">  <b class="spoiler_title">Tapi bagaimana dengan tautan ke github?</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ini dia</a> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448730/">https://habr.com/ru/post/id448730/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448714/index.html">Slack - tema gelap tidak resmi untuk versi desktop Windows, Linux, MacOS</a></li>
<li><a href="../id448718/index.html">Pembuatan rangka logam di SPDS</a></li>
<li><a href="../id448724/index.html">Berita minggu ini: FSB bukan keputusan untuk operator, juara yang mengalahkan AI, rekonsiliasi Apple dan Qualcomm</a></li>
<li><a href="../id448726/index.html">Kasing. Dari 0 hingga 81% semantik dalam TOP dalam 2 hari</a></li>
<li><a href="../id448728/index.html">Setelah beberapa dekade, otak akan terhubung ke Internet</a></li>
<li><a href="../id448732/index.html">Hernia intervertebralis? Bekerja padanya</a></li>
<li><a href="../id448734/index.html">Drone dan robot membantu menyelamatkan Katedral Paris Notre Dame</a></li>
<li><a href="../id448738/index.html">Siapa yang memburu startup?</a></li>
<li><a href="../id448740/index.html">Kami mendengarkan musik SID (Commodore 64) melalui OPL3 pada PC modern</a></li>
<li><a href="../id448742/index.html">Kotak Pandora: kami menganalisis eksploitasi kerentanan WinRAR menggunakan contoh pekerjaan NeoQUEST-2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>