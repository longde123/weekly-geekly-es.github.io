<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÇ üí∞ üíáüèø Grava√ß√£o de v√≠deo com eje√ß√£o autom√°tica de pausa por software livre com constru√ß√£o de bicicletas ü§í üëá üíáüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os desenvolvedores de l√≠ngua russa sempre t√™m algo a dizer: compartilhar algumas de suas experi√™ncias e opini√µes √∫nicas. Por√©m, no formato do blog de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grava√ß√£o de v√≠deo com eje√ß√£o autom√°tica de pausa por software livre com constru√ß√£o de bicicletas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437918/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_2/bs/h8/_2bsh8brje9tatdcz3fpvpv-l1g.jpeg" alt="Timeline Bike"></div><br><p>  Os desenvolvedores de l√≠ngua russa sempre t√™m algo a dizer: compartilhar algumas de suas experi√™ncias e opini√µes √∫nicas.  Por√©m, no formato do blog de v√≠deo, devido √† alta complexidade da grava√ß√£o, apenas alguns o fazem agora. </p><br><p>  Sob o corte, ele falou sobre seu dif√≠cil caminho para gravar e editar v√≠deos usando software livre, scripts Ruby e ferramentas improvisadas. <a name="habracut"></a></p><br><h1 id="teoriya">  Teoria </h1><br><p> Comecei estudando a teoria da grava√ß√£o de blogs de v√≠deo em v√≠deos do YouTube em ingl√™s.  E a partir de materiais em russo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este curso</a> acabou sendo bastante √∫til (em particular, o m√≥dulo sobre blogs de v√≠deo e o primeiro v√≠deo sobre como criar um quadro a partir do m√≥dulo sobre relat√≥rios).  Tamb√©m me familiarizei fluentemente com os recursos populares dos editores de v√≠deo propriet√°rios, a fim de abordar mais conscientemente a escolha de um editor gratuito. </p><br><p>  N√£o me atrevi a investir em luz: n√£o h√° tempo suficiente para estud√°-la e procurar a melhor op√ß√£o, e um estudo superficial de op√ß√µes baratas fala de poss√≠veis riscos, como cintila√ß√£o e baixa reprodu√ß√£o de cores.  Com a luz do dia, n√£o tive grandes dificuldades, basta apenas v√≠deos curtos. </p><br><h1 id="videoredaktor">  Editor de v√≠deo </h1><br><p>  As ferramentas de edi√ß√£o de v√≠deo gratuitas existentes cont√™m v√°rios problemas conhecidos: de solu√ß√µes malsucedidas na interface do usu√°rio e congelamentos que transformam a edi√ß√£o em infinito, a vazamentos de mem√≥ria, falhas e artefatos inesperados que aparecem somente ap√≥s a renderiza√ß√£o final. </p><br><p>  Existem muitos problemas e levou tempo para selecionar um editor de v√≠deo e estudar seus bugs, apenas para aprender a lidar com coisas b√°sicas.  Por fim, ele parou em <strong>Pitivi</strong> , simplesmente porque passava muito tempo pesquisando e experimentando. </p><br><h2 id="zvuk-iz-flatpak">  Som de Flatpak </h2><br><p>  O m√©todo de instala√ß√£o suportado pelo Pitivi requer o Flatpak.  Por um tempo eu andei em volta dele, porque  N√£o tenho o systemd e o PulseAudio no meu sistema. </p><br><p>  Acontece que o systemd <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o √© necess√°rio h√°</a> muito tempo.  Bem, PulseAudio - <s>eu tive que instalar e configurar</s> , era mais f√°cil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modificar o Flatpak</a> .  Mas seria mais correto colocar o PulseAudio, √© um pouco entediante e n√£o est√° claro se √© esperado problemas com a grava√ß√£o de som no hardware existente ou n√£o. </p><br><p>  Instale o Pitivi, exclua as configura√ß√µes do PulseAudio, execute: </p><br><pre><code class="bash hljs">$ sudo flatpak remote-add --<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo $ sudo flatpak install flathub org.pitivi.Pitivi $ sudo find {/var/lib,~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share}/flatpak/runtime -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name <span class="hljs-string"><span class="hljs-string">'*pulseaudio*.conf'</span></span> -delete $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=pitivi org.pitivi.Pitivi</code> </pre> <br><p>  N√£o h√° som.  Vamos tentar executar algo mais simples, por exemplo, <code>aplay</code> : </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak/app/org.pitivi.Pitivi/x86_64 -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -path <span class="hljs-string"><span class="hljs-string">'*/files/bin'</span></span> -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp `<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> aplay` {} \; $ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib dlmisc.c:162:(snd_dlsym_verify) unable to verify version <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> symbol _snd_pcm_empty_open ALSA lib dlmisc.c:283:(snd1_dlobj_cache_get) symbol _snd_pcm_empty_open is not defined inside [<span class="hljs-built_in"><span class="hljs-built_in">builtin</span></span>] aplay: main:828: audio open error: No such device or address</code> </pre> <br><p>  Provavelmente a <code>alsa-lib</code> inclu√≠da no Flatpak foi compilada com <code>--with-versioned</code> .  Uma solu√ß√£o r√°pida √© substituir o <code>libasound.so</code> sistema: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -name libasound.so.2.0.0 -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /usr/lib64/libasound.so.2.0.0 {} \; <span class="hljs-comment"><span class="hljs-comment">#      -</span></span></code> </pre> <br><p>  Para mim, isso n√£o foi suficiente: </p><br><pre> <code class="bash hljs">$ flatpak run --device=alsa --branch=stable --arch=x86_64 --<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>=aplay org.pitivi.Pitivi /dev/urandom ALSA lib /var/tmp/portage/media-libs/alsa-lib-1.1.6-r1/work/alsa-lib-1.1.6/src/pcm/pcm_direct.c:1943:(snd1_pcm_direct_parse_open_conf) The field ipc_gid must be a valid group (create group audio) aplay: main:828: audio open error: Invalid argument</code> </pre> <br><p>  Precisa de outra configura√ß√£o do ALSA: </p><br><pre> <code class="bash hljs">$ sudo find /var/lib/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; $ find ~/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/share/flatpak -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -name etc -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> cp /etc/asound.conf {} \; <span class="hljs-comment"><span class="hljs-comment">#      - $ flatpak run --device=alsa --branch=stable --arch=x86_64 --command=aplay org.pitivi.Pitivi /dev/urandom</span></span></code> </pre> <br><p>  Finalmente, voc√™ pode usar o Pitivi. </p><br><div class="spoiler">  <b class="spoiler_title">Configura√ß√µes de renderiza√ß√£o para o Pitivi resultantes</b> <div class="spoiler_text"><ul><li>  formato do cont√™iner: MP4 </li><li>  video <br><ul><li>  codec x264enc </li><li>  avan√ßado <br><ul><li>  passo / tipo de codifica√ß√£o: quantizador constante </li><li>  quantizador constante: 18 </li><li>  taxa de bits: 16384 kbit / s </li><li>  velocidade qualidade predefinida: ultra-r√°pida </li><li>  predefini√ß√£o de ajuste psicovisual: filme </li></ul></li></ul></li><li>  audio <br><ul><li>  ALAC libav </li></ul></li><li>  por meu pr√≥prio risco e medo, uso "Nunca renderizar a partir de arquivos proxy" </li><li>  tudo o resto √© o padr√£o </li></ul></div></div><br><h2 id="drugie-effekty">  Outros efeitos </h2><br><p>  Fa√ßo alguns efeitos de anima√ß√£o para o texto usando o screencast das p√°ginas em tela cheia, dispostas usando o discover.js e o animate.css.  No discover.js de alguns slides, adiciono um som de transi√ß√£o: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font-size: 5em"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-autoplay</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/path/to/sound.wav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">audio</span></span></span><span class="hljs-tag">&gt;</span></span> #1 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Acabou sendo importante gravar um screencast com 60 FPS se o texto for muito grande.  O Screencast faz isso: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh SOUND_INPUT=shared_input_loopback CHANNELS=2 SOUND_RATE=48000 FRAMERATE=60 DRAW_MOUSE=0 VIDEO_SIZE=$(xdpyinfo | awk '/dimensions:/ { print $2; exit }') OUTPUT="${HOME}/video/screen/$(date --rfc-3339=seconds).mp4" ffmpeg \ -thread_queue_size 512 \ -video_size "${VIDEO_SIZE}" \ -framerate "${FRAMERATE}" \ -f x11grab \ -draw_mouse "${DRAW_MOUSE}" \ -i :0.0+0,0 \ -thread_queue_size 512 \ -f alsa \ -ac "${CHANNELS}" \ -i "${SOUND_INPUT}" \ -ar "${SOUND_RATE}" \ -vcodec libx264 -preset ultrafast -crf 18 \ -acodec alac \ -f ipod \ "${OUTPUT}"</span></span></code> </pre> <br><p>  No meu caso, <code>shared_input_loopback</code> √© o dispositivo da <a href="">configura√ß√£o asound.conf</a> . </p><br><p>  Ainda assim, esse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">complemento</a> sobre <code>ffmpeg</code> para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">transi√ß√µes</a> entre clipes foi √∫til. </p><br><h1 id="zapis-video">  Grava√ß√£o de v√≠deo </h1><br><p>  Na m√£o estava um telefone Meizu MX4, no qual decidi usar uma c√¢mera frontal e gravar usando a C√¢mera Aberta.  Demorou algum tempo para se treinar a olhar para a c√¢mera e controlar sua posi√ß√£o no espa√ßo sem cometer erros t√≠picos, como cortar a cabe√ßa.  Ao mesmo tempo, fale claramente, em voz alta, gesticule e gere pelo menos algum tipo de express√£o facial.  Mas isso foi apenas o come√ßo. </p><br><p>  O que me levou a cortar o v√≠deo automaticamente, e mesmo na fase de grava√ß√£o? </p><br><ol><li>  O Pitivi freia e falha ao editar, especialmente ao usar a ferramenta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ripple Move / Edit</a> , levando √† necessidade de reiniciar periodicamente o Pitivi. </li><li>  Para mim, o processo de cortar manualmente o v√≠deo √© uma das coisas mais chatas.  √â claro que n√£o √© muito poss√≠vel automatizar isso totalmente (pelo menos sem um cen√°rio em que as pausas necess√°rias para entender o que foi dito n√£o sejam explicitamente indicadas), mas pelo menos esse processo pode ser otimizado. </li></ol><br><p>  Aqui est√£o os requisitos para a futura bicicleta que eu me propus: </p><br><ol><li>  Grave v√≠deo usando um telefone Android e √°udio usando um laptop. </li><li>  Controle de foco da c√¢mera. </li><li>  Capacidade de parar a grava√ß√£o para salvar ou excluir o √∫ltimo fragmento gravado. </li><li>  Baixe o v√≠deo do telefone via USB, com tentativas repetidas e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reinicie</a> , sem bloquear a capacidade de gravar o pr√≥ximo fragmento. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sincroniza√ß√£o de</a> som. </li><li>  Determinando a presen√ßa de voz e jogando pausas. </li><li>  A capacidade de reproduzir rapidamente os √∫ltimos videoclipes gravados, com pausas j√° pausadas. </li></ol><br><p>  Por que tanto controle sobre os dispositivos durante a fase de grava√ß√£o?  Por que n√£o come√ßar a gravar por v√°rias horas seguidas e depois edit√°-lo?  Existem muitas raz√µes: </p><br><ol><li>  Banal falta de espa√ßo em disco. </li><li>  A tend√™ncia do telefone superaquecer e descarregar rapidamente durante a grava√ß√£o por um longo per√≠odo de tempo. </li><li>  Mau funcionamento da tela de toque devido ao telefone estar na √°gua.  Mas de alguma forma voc√™ precisa controlar o foco.  Sim, e a prensa seguinte criaria vibra√ß√£o desnecess√°ria do dispositivo. </li><li>  Problemas ao carregar arquivos grandes devido √† falta de energia da porta USB no meu laptop.  Em teoria, isso pode ser resolvido usando um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hub USB</a> com energia adicional.  O uso de uma rede √© muito lento. </li><li>  O desejo de revisar rapidamente os √∫ltimos fragmentos registrados para garantir que n√£o haja erros e reescrev√™-lo rapidamente antes que o planeta vire no lugar errado na frente do sol. </li><li>  O desejo de lan√ßar duplicatas obviamente ruins o mais cedo poss√≠vel, para n√£o perder tempo e espa√ßo em disco com elas no futuro. </li><li>  Precisa sincronizar o √°udio longo gravado por telefone e laptop.  Isso pode causar uma incompatibilidade com o v√≠deo devido ao fato de que os quadros do fluxo de √°udio s√£o ejetados durante a grava√ß√£o de um laptop ou durante a grava√ß√£o de um telefone (que voc√™ provavelmente pode resolver de alguma forma, mas n√£o deseja arriscar e perder tempo experimentando).  √â mais f√°cil sincronizar pequenos fragmentos separadamente, ent√£o uma poss√≠vel dessincroniza√ß√£o n√£o ser√° percept√≠vel. </li><li>  A necessidade de lidar com uma situa√ß√£o em que o Open Camera reinicia a grava√ß√£o devido a um tamanho de v√≠deo de 4 GiB.  Voc√™ provavelmente precisaria modificar o Open Camera.  Se essa restri√ß√£o em 4 GiB n√£o puder ser removida ou aumentada, voc√™ dever√° lan√ßar um evento no laptop para perceber que a grava√ß√£o foi reiniciada neste local. </li></ol><br><p>  √â mais f√°cil gravar em pequenos fragmentos e tornar a automa√ß√£o primitiva de tudo o que √© poss√≠vel.  Ruby foi escolhido como o principal idioma para o desenvolvimento de uma bicicleta.  Na verdade, agora eu provavelmente escolheria o Python, mas naquele momento estava aprendendo Ruby e estou executando novas linguagens para mim em experimentos t√£o estranhos. </p><br><h2 id="avtomaticheskaya-narezka-video">  Corte de v√≠deo autom√°tico </h2><br><p>  As informa√ß√µes na rede sobre este t√≥pico n√£o s√£o muito.  Sobre as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pesquisas que Stanford e Adobe</a> lembraram mais tarde (o que n√£o √© assustador, ainda preciso de uma solu√ß√£o menos sofisticada). </p><br><p>  O fatiamento ocorre em 2 est√°gios: no est√°gio de grava√ß√£o - grosso, no est√°gio de renderiza√ß√£o - mais preciso, com a capacidade de corrigir manualmente muitos fragmentos aparados.  √Åspero implementado usando o <abbr title="Detec√ß√£o de atividade de voz">VAD</abbr> do WebRTC.  Mais preciso - com a ajuda do Google Speech (mais especificamente - com a ajuda de uma modifica√ß√£o do projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">autosub</a> , para gerar legendas para v√≠deo).  Estou certo de que haver√° solu√ß√µes mais bem-sucedidas; acabou sendo o melhor do que conseguimos fazer rapidamente. </p><br><p>  Se voc√™ deseja desenvolver algo assim usando o <code>ffmpeg</code> , <code>ffmpeg</code> o princ√≠pio de n√£o tentar fazer muito em uma chamada para o <code>ffmpeg</code> .  Crie arquivos intermedi√°rios e controle todas as etapas para n√£o precisar procurar bugs estranhos que n√£o sejam do Google, como corte incorreto ou efeito n√£o aplicado. </p><br><p>  Come√ßo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>desgra√ßa resultante de</strong></a> alguma forma assim: </p><br><pre> <code class="plaintext hljs">$ bin/vlog-recorder \ --project /path/to/project \ --debug true \ --sound-settings ' --device=usb_card --format=dat' #   arecord r - (RE)START recording s - STOP and SAVE current clip S - STOP and SAVE current clip, don't use auto trimming d - STOP and DELETE current clip p - PLAY last saved clip f - FOCUS camera on center h - show HELP q / Ctrl+C - QUIT [ stopped ] [ battery: 100% / 36¬∞C ]</code> </pre> <br><p>  Preciso dos argumentos a serem <code>arecord</code> para indicar explicitamente o dispositivo, a fim de evitar falhas peri√≥dicas provavelmente devido ao plug-in dsnoop baseado em ALSA.  Voc√™ tamb√©m pode abrir o log para controlar o processo de download de arquivos do telefone: <code>tail -f /path/to/project/log.txt</code> . </p><br><p>  Renderize rapidamente em um v√≠deo para visualiza√ß√£o, voc√™ pode fazer o seguinte: </p><br><pre> <code class="bash hljs">$ bin/vlog-render \ --project /path/to/project \ --language ru \ --video-filters <span class="hljs-string"><span class="hljs-string">'hqdn3d,hflip,curves=psfile=/path/to/curves.acv,vignette'</span></span> \ --speed 1.3 \ --fps 60 \ --preview <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  O argumento <code>--video-filters</code> s√£o os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">filtros</a> passados ‚Äã‚Äãpara o <code>ffmpeg</code> .  O v√≠deo ser√° aberto automaticamente no player <code>mpv</code> . </p><br><p>  Voc√™ tamb√©m pode trocar ou eliminar as duplicatas desnecess√°rias restantes, editando o arquivo <code>/path/to/project/render.conf</code> exibido, que pode ser detectado gra√ßas √† voz reconhecida.  A ideia, a prop√≥sito, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nova</a> .  L√°, voc√™ pode acelerar fragmentos individuais e editar cortes de v√≠deo sem √™xito, se houver.  Na pr√≥xima vez que o <code>vlog-render</code> reler o <code>render.conf</code> aplicar√° as altera√ß√µes. </p><br><p>  Para preparar fragmentos para um editor de v√≠deo, voc√™ precisa especificar <code>--preview false</code> .  Al√©m dos fragmentos que estar√£o na <code>output</code> , ele os mesclar√° em um arquivo <code>output.mp4</code> , porque inicialmente eu n√£o tinha certeza: </p><br><ul><li>  vou usar pequenos clipes no pitivi </li><li>  ou fa√ßa upload de um v√≠deo longo para obter mais fatias (para que voc√™ possa aplicar v√°rios efeitos ao "grupo" de clipes). </li></ul><br><p>  Eu uso principalmente a primeira op√ß√£o.  O segundo foi √∫til em um v√≠deo com pouca luz: l√° usei apenas um peda√ßo de <code>output.mp4</code> .  Para a segunda op√ß√£o, o script <code>vlog-play-segments</code> tamb√©m pode ser √∫til: com ele, voc√™ pode ver rapidamente todas as pausas entre os clipes em ordem decrescente de dura√ß√£o.  Isso ajudar√° a <code>render.conf</code> com mais precis√£o o <code>render.conf</code> e economizar√° tempo mais tarde, ao editar este longo peda√ßo de v√≠deo no Pitivi. </p><br><p>  Os pequenos clipes resultantes podem ser baixados uma vez por linha do tempo no Pitivi: selecione todos os clipes importados e arraste-os usando arrastar e soltar. </p><br><h2 id="kreplenie-dlya-telefona">  Montagem do telefone </h2><br><p>  Eu n√£o queria procurar um suporte de telefone adequado e minhas m√£os j√° arranhavam meu rosto para gravar pelo menos alguma coisa.  Pegamos um peda√ßo de papel√£o que vem √† m√£o e cortamos o suporte do telefone para nossas necessidades: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kl/u8/tj/klu8tjf8huzxyqf71-ci7xnah_w.jpeg" alt="Montagem do telefone"></div><br><p>  O suporte √© montado em uma tela de laptop para minimizar a dist√¢ncia entre o script e a c√¢mera. </p><br><h1 id="zapis-zvuka">  Grava√ß√£o de som </h1><br><p>  Som aceit√°vel √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muito cr√≠tico</a> .  Na m√£o estava um microfone Boya BY-M1.  Embora seja anunciado como um microfone omnidirecional, na pr√°tica, o bom som √© obtido apenas quando voc√™ o usa como unidirecional. </p><br><p>  √â ainda mais f√°cil colocar o microfone em p√©: pegamos uma garrafa de suco de rom√£ que vem √† m√£o, um rolo de fita adesiva e montamos esse construtor: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/qt/1u/xpqt1ue6ikhdrwwh6oqr1x83vo0.jpeg" alt="Suporte para microfone"></div><br><p>  Voc√™ tamb√©m pode colocar uma toalha sob esse design para suprimir parte das vibra√ß√µes da mesa e, ao mesmo tempo, ajustar a altura. </p><br><h2 id="zvukovaya-karta">  Placa de som </h2><br><p>  No meu caso, este √© o ASUS Xonar U3.  No entanto, descobriu-se que n√£o √© compat√≠vel com esse microfone: o microfone possui um plugue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CTIA</a> projetado para telefones.  O problema foi resolvido pelo adaptador nos plugues TRS para microfone e fones de ouvido.  E achar que n√£o era f√°cil: os fabricantes desses adaptadores raramente escrevem detalhes.  No meu caso, um Cablexpert CCA-418W ajudou. </p><br><p>  Outro problema com esta placa est√° no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">deslocamento CC</a> no canal correto durante a grava√ß√£o.  O que n√£o interfere, porque  Estou gravando de qualquer maneira em mono.  E para softwares que n√£o permitem definir mono, <a href="">redirecionei um</a> bom canal para um canal ruim usando o ALSA. </p><br><p>  Este cart√£o tamb√©m tem medo de superaquecer.  Voc√™ precisa mant√™-lo afastado do refrigerador, caso contr√°rio, ele diminuir√° a velocidade e gravar√° o som em movimentos bruscos. </p><br><h2 id="obrabotka-zvuka">  Processamento de som </h2><br><p>  Eu edito o som nos fones de ouvido (no meu caso, √© o Pioneer SE-M390), em um volume maior do que aquele em que costumo ouvir m√∫sica.  O algoritmo √© algo como isto: </p><br><ol><li>  Usando Pitivi, renderizo separadamente o som (usando todos os mesmos ALAC e MP4).  Frequentemente fa√ßo v√°rias trilhas separadas, escolhendo camadas espec√≠ficas no Pitivi e removendo temporariamente as desnecess√°rias. </li><li>  Se os arquivos recebidos forem enviados imediatamente para o Audacity, <strong>perderemos o</strong> alongamento / compacta√ß√£o do fluxo de √°udio, o que pode levar ao v√≠deo e ao √°udio fora de sincronia.  O que n√£o √© √≥bvio, isso n√£o acontece com todos os v√≠deos.  Para impedir que isso aconte√ßa - basta aplicar estes <code>ffmpeg -async 1 -i input.mp4 output.flac</code> / compacta√ß√£o: <code>ffmpeg -async 1 -i input.mp4 output.flac</code> </li><li>  Fa√ßa o download de todas as faixas no Audacity.  Adicione m√∫sica de fundo, se necess√°rio. </li><li>  Para todas as faixas, defina o volume desejado usando Gain. </li><li>  Na faixa com a voz, aplique os efeitos de Redu√ß√£o de ru√≠do (no meu caso duplo), Compressor e Equaliza√ß√£o de acordo com as dicas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">deste v√≠deo</a> . </li><li>  Equalizamos e aumentamos o volume da faixa com a voz.  Uma das formas cl√°ssicas √© Normalizar, Amplificar, Limitador e Normalizar novamente, mas com essa abordagem ainda n√£o consegui obter a qualidade de som desejada.  <s>Eu ajo temporariamente assim: primeiro fa√ßo o ganho de toda a faixa para que a parte mais alta pare√ßa sem sobrecargas e depois aplico manualmente o Amplify para fragmentos individuais.</s>  <strong>Atualiza√ß√£o</strong> : Outra maneira poderosa √© RMS Normalizar, Limitador e Normalizar normal.  As configura√ß√µes de Normaliza√ß√£o e Limitador do RMS podem ser obtidas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  No entanto, esse m√©todo n√£o foi √∫til para mim, porque  de qualquer maneira, decidi mudar para outro microfone (Zoom H1n) com o Limiter embutido, o que me conv√©m (ent√£o, com o novo microfone, provavelmente tenho que fazer apenas Normalizar normal, em vez de todas essas coisas). </li><li>  √Äs vezes, o microfone grava o som com alguns defeitos que parecem cliques.  Eles podem ser removidos usando o efeito de ferramenta m√∫ltipla Spectral edit.  Na maioria das vezes, √© necess√°rio aplic√°-lo v√°rias vezes seguidas na √°rea selecionada, usando Ctrl + R.  <strong>Atualiza√ß√£o</strong> : gra√ßas ao novo microfone, descobri que esses defeitos est√£o conectados a algo externo, provavelmente essa √© uma combina√ß√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ru√≠do na boca</a> e outros sons estranhos. </li><li>  Exportamos do Audacity para FLAC e <code>ffmpeg -i sound.flac -an -i video.mp4 -c copy output.mkv</code> tudo em um arquivo: <code>ffmpeg -i sound.flac -an -i video.mp4 -c copy output.mkv</code> </li><li>  Pelo menos o primeiro v√≠deo que testei em diferentes volumes e dispositivos diferentes. </li></ol><br><h1 id="rezultat">  Resultado </h1><br><p>  Aproveitando a oportunidade para relaxar as regras, convido voc√™ a visitar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>canal</strong></a> resultante do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>YouTube</strong></a> , onde compartilho id√©ias sobre o estudo eficaz da programa√ß√£o e disciplinas relacionadas. </p><br><p>  Boa sorte no desenvolvimento de programas e na cria√ß√£o de blogs de v√≠deo! </p><br><p>  <strong>Atualiza√ß√£o</strong> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">traduziu</a> este artigo para o blog em ingl√™s. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437918/">https://habr.com/ru/post/pt437918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437908/index.html">Arduino colabora com o Google e introduz certifica√ß√£o</a></li>
<li><a href="../pt437910/index.html">Civiliza√ß√£o da Primavera, 1/5</a></li>
<li><a href="../pt437912/index.html">Um notebook pequeno para um administrador de sistema</a></li>
<li><a href="../pt437914/index.html">Jaxb (XJC) gerando classes do XML Schema (XSD) com descri√ß√µes de classe e campo como anota√ß√µes. Plug-in XJC</a></li>
<li><a href="../pt437916/index.html">D√™ ao leitor de livros eletr√¥nicos todos os bolsos! Revis√£o das √∫ltimas inova√ß√µes do ONYX BOOX</a></li>
<li><a href="../pt437922/index.html">Modelo de ataque: onde √© usado principalmente em compras eletr√¥nicas e como lidar com isso</a></li>
<li><a href="../pt437924/index.html">Fragmento de Blockchain</a></li>
<li><a href="../pt437926/index.html">O guia oficial para o compartilhamento de Blockchain</a></li>
<li><a href="../pt437928/index.html">Como aprender ingl√™s</a></li>
<li><a href="../pt437930/index.html">Lumin√°ria Combo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>