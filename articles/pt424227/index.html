<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✍🏿 🤗 🍴 Distribuir uniformemente pontos pela esfera em pytorch e tensorflow 👨🏽‍🔬 💕 👩🏻‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este texto foi escrito para aqueles que estão interessados ​​em aprendizado profundo, que desejam usar métodos diferentes das bibliotecas pytorch e te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Distribuir uniformemente pontos pela esfera em pytorch e tensorflow</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/424227/"><p>  Este texto foi escrito para aqueles que estão interessados ​​em aprendizado profundo, que desejam usar métodos diferentes das bibliotecas pytorch e tensorflow para minimizar a função de muitas variáveis, que estão interessados ​​em aprender como transformar um programa executado sequencialmente em cálculos de matriz vetorizada executados usando numpy.  Você também pode aprender como criar um desenho animado a partir de dados visualizados usando o PovRay e o vapory. </p><br><p><img src="https://habrastorage.org/webt/kz/fa/h2/kzfah2g6zgoehvsimumi8hy9nie.jpeg"></p><a name="habracut"></a><br><h3 id="otkuda-zadacha">  De onde vem a tarefa </h3><br><blockquote>  Cada um minimiza sua funcionalidade (c) Anonymous Data Scientist </blockquote><p> Em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma das publicações anteriores do nosso blog</a> , especificamente no parágrafo "Rake No. 6", falamos sobre a tecnologia DSSM, que permite converter texto em vetores.  Para encontrar esse mapeamento, é necessário encontrar os coeficientes de transformações lineares que minimizem a função de perda bastante complexa.  Compreender o que acontece quando se aprende esse modelo é difícil devido à grande dimensionalidade dos vetores.  Para desenvolver uma intuição que permita escolher o método de otimização e definir os parâmetros desse método, considere uma versão simplificada desta tarefa.  Agora deixe que os vetores estejam em nosso espaço tridimensional habitual, para que sejam fáceis de desenhar.  E a função de perda será o potencial de separar os pontos e atrair a esfera unitária.  Nesse caso, a solução para o problema será uma distribuição uniforme de pontos na esfera.  A qualidade da solução atual é fácil de avaliar a olho nu. </p><br><p>  Então, procuraremos uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Definição em Mathworld">distribuição uniforme na esfera de uma</a> dada quantidade <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> n </script>  pontos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Wikilivros">Essa distribuição</a> às vezes é necessária para a acústica, a fim de entender em qual direção lançar uma onda em um cristal.  Signalman - para descobrir como colocar satélites em órbita para obter comunicações da melhor qualidade.  Meteorologista - para a colocação de estações de monitoramento meteorológico. </p><br><p>  Para alguns <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> n </script>  a tarefa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Resposta do Stackoverflow com sólidos platônicos">é resolvida facilmente</a> .  Por exemplo, se <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>=</mo><mn>8</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-38" x="1934" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>8</mn></math></span></span><script type="math/tex" id="MathJax-Element-3"> n = 8 </script>  , podemos pegar o cubo e seus vértices serão a resposta para o problema.  Nós também temos sorte se <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> n </script>  será igual ao número de vértices do icosaedro, dodecaedro ou outro sólido platônico.  Caso contrário, a tarefa não é tão simples. </p><br><p>  Para um número suficientemente grande de pontos, existe uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="matemática espiral discreta">fórmula com coeficientes empiricamente selecionados</a> ; várias outras opções estão <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Mais uma vez sobre a espiral">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="correção de irregularidades">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Site do programa de matemática">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="pesquisa básica">aqui</a> .  Mas há uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Stackoverflow russo">solução</a> mais universal, embora mais complexa, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Stackoverflow russo">à</a> qual este artigo é dedicado. </p><br><p>  Resolvemos um problema muito semelhante ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="A tarefa de Thomson em esboços">problema de Thomson</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" title="Problema na Wikipédia de Thomson">wiki</a> ).  Dispersão <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> n </script>  pontos aleatoriamente e depois os atraem para uma superfície, como uma esfera, e se afastam um do outro.  Atração e repulsa são determinadas pela função - potencial.  No valor mínimo da função potencial, os pontos estarão na esfera mais uniformemente. </p><br><p>  Essa tarefa é muito semelhante ao processo de aprendizado dos modelos de aprendizado de máquina (ML), durante o qual a função de perda é minimizada.  Mas um cientista de dados geralmente observa como um único número diminui e podemos observar a mudança da imagem.  Se conseguirmos, veremos como os pontos colocados aleatoriamente dentro do cubo com o lado 1 divergem ao longo da superfície da esfera: </p><br><p><img src="https://habrastorage.org/webt/52/sl/vj/52slvj5tsk6xdd-d1ymry_lty1i.png"></p><br><p>  Esquematicamente, o algoritmo para resolver o problema pode ser representado da seguinte maneira.  Cada ponto localizado no espaço tridimensional corresponde a uma linha da matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> X </script>  .  A função de perda é calculada a partir desta matriz. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> L </script> , cujo valor mínimo corresponde a uma distribuição uniforme de pontos na esfera.  O valor mínimo é encontrado usando as <code>tensorflow</code> e <code>tensorflow</code> , que permitem calcular o gradiente da função de perda pela matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> X </script>  e reduza ao mínimo usando um dos métodos implementados na biblioteca: SGD, ADAM, ADAGRAD, etc. </p><br><p><img src="https://habrastorage.org/webt/aq/ol/q_/aqolq_qbiybgyykwurj9dzap1nw.png"></p><br><h3 id="schitaem-potencial">  Consideramos o potencial </h3><br><p>  Devido à sua simplicidade, expressividade e capacidade de servir como uma interface para bibliotecas escritas em outros idiomas, o Python é amplamente usado para resolver problemas de aprendizado de máquina.  Portanto, os exemplos de código neste artigo são escritos em Python.  Para cálculos matriciais rápidos, usaremos a biblioteca numpy.  Para minimizar a função de muitas variáveis ​​- pytorch e tensorflow. </p><br><p>  Nós dispersamos aleatoriamente pontos no cubo com o lado 1. Vamos ter 500 pontos, e a interação elástica é 1000 vezes mais significativa que a eletrostática: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np n = <span class="hljs-number"><span class="hljs-number">500</span></span> k = <span class="hljs-number"><span class="hljs-number">1000</span></span> X = np.random.rand(n, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p>  Este código gerou uma matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> X </script>  o tamanho <math></math><img src="https://habrastorage.org/getpro/habr/formulas/6ef/4cf/16e/6ef4cf16e1ed3244f80b47ca4c3fe73a.svg" alt="US $ 3 \ vezes n $" data-tex="inline">  preenchido com números aleatórios de 0 a 1: </p><br><p><img src="https://habrastorage.org/webt/vn/vf/s-/vnvfs-cf0qee5vhmzn3vwidsn64.png"></p><br><p>  Assumimos que cada linha desta matriz corresponde a um ponto.  E em três colunas as coordenadas são registradas <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.641ex" height="1.817ex" viewBox="0 -520.7 2428.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-79" x="1017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="1515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-7A" x="1960" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> x, y, z </script>  todos os nossos pontos. </p><br><p>  O potencial de interação elástica de um ponto com a superfície de uma esfera unitária <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>1</mn></msub><mo>=</mo><mi>k</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>r</mi><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.704ex" height="2.901ex" viewBox="0 -935.7 9344.8 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="809" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="1304" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6B" x="2360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="3131" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-64" x="3565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="4088" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="4574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="4935" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="5325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="6048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="7048" y="0"></use><g transform="translate(7500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2F" x="8343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="8844" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mn>1</mn></msub><mo>=</mo><mi>k</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-11"> u_1 = k \ cdot (1 - r) ^ 2/2 </script>  .  Potencial de interação eletrostática de pontos <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> p </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>q</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.07ex" height="1.817ex" viewBox="0 -520.7 460.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> q </script>  - <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><msub><mi>r</mi><mi>p</mi></msub><mo>&amp;#x2212;</mo><msub><mi>r</mi><mi>q</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.086ex" height="2.78ex" viewBox="0 -832 6926.1 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="809" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="1304" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="2360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2F" x="2860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="3361" y="0"></use><g transform="translate(3639,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="4769" y="0"></use><g transform="translate(5770,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="6647" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><msub><mi>r</mi><mi>p</mi></msub><mo>−</mo><msub><mi>r</mi><mi>q</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-14"> u_2 = 1 / | r_p - r_q | </script>  .  O potencial total consiste na interação eletrostática de todos os pares de pontos e na interação elástica de cada ponto com a superfície da esfera: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>U</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>o</mi><mi>m</mi><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi>e</mi><msubsup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>o</mi><mi>m</mi><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi>e</mi><msubsup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>q</mi><mo>=</mo><mi>p</mi><mo>+</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>x</mi><mi>p</mi></msub></mrow><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>x</mi><mi>q</mi></msub></mrow><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow><mo>+</mo><mi>k</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>x</mi><mi>p</mi></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>i</mi><mi>n</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="151.342ex" height="3.503ex" viewBox="0 -987.6 65160.8 1508.3" role="img" focusable="false" style="vertical-align: -1.209ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-55" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="767" y="0"></use><g transform="translate(1157,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="2183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2E" x="2628" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2E" x="3073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2E" x="3518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="3964" y="0"></use><g transform="translate(4409,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="5506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="6173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="7479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="7949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="8434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-61" x="9313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6C" x="10092" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="10391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="10736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="11615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="11960" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="12322" y="0"></use><g transform="translate(12788,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="1379" y="0"></use></g><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="1282" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="14937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="15406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="15892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-61" x="16770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6C" x="17550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="17848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="18194" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="19072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="19418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="19779" y="0"></use><g transform="translate(20246,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="663" y="499"></use><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="460" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="1239" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2B" x="1742" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="2521" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-66" x="23202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="23752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-61" x="24204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="24733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="25167" y="0"></use><g transform="translate(25667,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="2455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="2941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="3407" y="0"></use><g transform="translate(3841,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="5091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="6342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="6827" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="7294" y="0"></use><g transform="translate(7727,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="8976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="9427" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-67" x="9773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-68" x="10253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="10830" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="11191" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2B" x="37360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6B" x="38360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="39132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-64" x="39565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="40089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="40574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="41186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-75" x="41655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="42228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6C" x="43356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="43655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="44000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="44879" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="45224" y="0"></use><g transform="translate(45586,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="663" y="499"></use><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="1282" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6C" x="47666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="47964" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-66" x="48431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="48981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="49343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="49732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="50455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="51456" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="51984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="52470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="52936" y="0"></use><g transform="translate(53370,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-7C" x="54398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="54927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="55378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-67" x="55724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-68" x="56204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="56781" y="0"></use><g transform="translate(57142,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="58236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="58687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-67" x="59033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-68" x="59513" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="60090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-61" x="60451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="60981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="61432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="61884" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-77" x="62369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6D" x="63336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-69" x="64214" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="64560" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>U</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>o</mi><mi>m</mi><mi>a</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi>e</mi><msubsup><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mtext>&nbsp;</mtext><mi>s</mi><mi>o</mi><mi>m</mi><mi>a</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi>e</mi><msubsup><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>q</mi><mo>=</mo><mi>p</mi><mo>+</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></msubsup><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mi>p</mi></msub></mrow><mo>−</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mi>q</mi></msub></mrow><mtext>&nbsp;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow><mo>+</mo><mi>k</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mtext>&nbsp;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mi>p</mi></msub></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mtext>&nbsp;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mtext>&nbsp;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi><mtext>&nbsp;</mtext><mi>m</mi><mi>i</mi><mi>n</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> U (x_1, ..., x_n) = \ soma \ limites _ {p = 1} ^ {n - 1} \ soma \ limites _ {q = p + 1} ^ {n} \ frac 1 {\ left | \ vec {x_p} - \ vec {x_q} \ right | } + k \ cdot \ sum \ limits _ {p = 1} ^ n \ left (1 - | \ vec {x_p} | \ right) ^ 2 \ rightarrow \ min </script></p><br><p>  Em princípio, o valor potencial pode ser calculado usando esta fórmula: </p><br><pre> <code class="python hljs">L_for = <span class="hljs-number"><span class="hljs-number">0</span></span> L_for_inv = <span class="hljs-number"><span class="hljs-number">0</span></span> L_for_sq = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): p_distance = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>): p_distance += x[p, i]**<span class="hljs-number"><span class="hljs-number">2</span></span> p_distance = math.sqrt(p_distance) L_for_sq += k * (<span class="hljs-number"><span class="hljs-number">1</span></span> - p_distance)**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-comment"><span class="hljs-comment">#     ,     for q in range(p + 1, n): if q != p: pq_distance = 0 for i in range(3): pq_distance += (x[p, i] - x[q, i]) ** 2 pq_distance = math.sqrt(pq_distance) L_for_inv += 1 / pq_distance #      L_for = (L_for_inv + L_for_sq) / n print('loss =', L_for)</span></span></code> </pre> <br><p>  Mas há um pequeno problema.  Para um patético 2000 pontos, este programa será executado por 2 segundos.  Será muito mais rápido se calcularmos esse valor usando cálculos de matriz vetorizada.  A aceleração é alcançada através da implementação de operações de matriz usando as linguagens “rápidas” fortran e C, e através do uso de operações de processador vetorizadas que permitem executar uma ação em uma grande quantidade de dados de entrada em um ciclo de clock. </p><br><p>  Vamos olhar para a matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi><mo>=</mo><mi>X</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>X</mi><mi>T</mi></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.734ex" height="2.419ex" viewBox="0 -935.7 6344 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="3082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-64" x="3515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="4039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="4524" y="0"></use><g transform="translate(4886,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-54" x="1215" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mo>=</mo><mi>X</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>X</mi><mi>T</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-16"> S = X \ cdot X ^ T </script>  .  Possui muitas propriedades interessantes e é frequentemente encontrada em cálculos relacionados à teoria dos classificadores lineares no ML.  Então, se assumirmos que na linha da matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></span></span><script type="math/tex" id="MathJax-Element-17"> X </script>  com índices <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"> p </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>q</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.07ex" height="1.817ex" viewBox="0 -520.7 460.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-19"> q </script>  vetores espaciais tridimensionais são escritos <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>q</mi></msub></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.776ex" height="2.057ex" viewBox="0 -520.7 5500.8 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="1202" y="0"></use><g transform="translate(1635,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="2543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="3238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="3723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="4190" y="0"></use><g transform="translate(4623,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="638" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>,</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>q</mi></msub></mrow></math></span></span><script type="math/tex" id="MathJax-Element-20"> \ vec {r _ p}, \ vec {r_q} </script>  então a matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.499ex" height="2.057ex" viewBox="0 -780.1 645.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-53" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> S </script>  consistirá em produtos escalares desses vetores.  Tais vetores <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> n </script>  peças, então a dimensão da matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.499ex" height="2.057ex" viewBox="0 -780.1 645.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-53" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"> S </script>  é igual a <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.843ex" height="1.455ex" viewBox="0 -520.7 3807.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="1336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-7A" x="1802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="2271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-73" x="2737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6E" x="3207" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>z</mi><mi>e</mi><mi>s</mi><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-24"> n \ vezes n </script>  . </p><br><p><img src="https://habrastorage.org/webt/kh/bw/ct/khbwctgydbzj51g5qwybvxtr9wo.png"></p><br><p>  Na diagonal da matriz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.499ex" height="2.057ex" viewBox="0 -780.1 645.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-53" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> S </script>  quadrados de comprimentos de vetores <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><merror><mtext>\&amp;#xA0;vec&amp;#xA0;{r_p}:&amp;#xA0;s_&amp;#xA0;{p}}&amp;#xA0;=&amp;#xA0;r_p&amp;#xA0;^&amp;#xA0;2</mtext></merror></math>" role="presentation"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;vec&nbsp;{r_p}:&nbsp;s_&nbsp;{p}}&nbsp;=&nbsp;r_p&nbsp;^&nbsp;2</span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><merror><mtext>\&nbsp;vec&nbsp;{r_p}:&nbsp;s_&nbsp;{p}}&nbsp;=&nbsp;r_p&nbsp;^&nbsp;2</mtext></merror></math></span></span><script type="math/tex" id="MathJax-Element-26"> \ vec {r_p}: s_ {p}} = r_p ^ 2 </script>  .  Sabendo disso, vamos considerar todo o potencial da interação.  Começamos calculando duas matrizes auxiliares.  Em uma matriz diagonal <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.499ex" height="2.057ex" viewBox="0 -780.1 645.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-53" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> S </script>  será repetido em linhas, em outro - em colunas. </p><br><p><img src="https://habrastorage.org/webt/ms/np/ps/msnppskk5fbczwgqvelu3jgeo80.png"></p><br><p>  Agora, vejamos o valor da expressão <code>p_roll + q_roll - 2 * S</code> </p><br><p><img src="https://habrastorage.org/webt/cc/py/ii/ccpyiidioj3yrxqnpxxbuyt8ht0.png"></p><br><p>  Item indexado <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mi>q</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.082ex" height="2.66ex" viewBox="0 -832 2188.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="1338" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="1798" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mi>q</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-28"> (p, q) </script>  matriz <code>sq_dist</code> é igual <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msubsup><mi>r</mi><mi>p</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>r</mi><mi>q</mi><mn>2</mn></msubsup><mo>&amp;#x2212;</mo><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>q</mi></msub></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>r</mi><mi>q</mi></msub></mrow><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="50.955ex" height="3.021ex" viewBox="0 -935.7 21938.7 1300.8" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="638" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="638" y="-212"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2B" x="1129" y="0"></use><g transform="translate(2130,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="638" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="638" y="-211"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="3258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="4258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="5009" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-64" x="5442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6F" x="5966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-74" x="6451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="6813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="7452" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="7938" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="8404" y="0"></use><g transform="translate(8838,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2C" x="9745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="10441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="10926" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="11393" y="0"></use><g transform="translate(11826,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="12703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-3D" x="13370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="14427" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="15066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="15552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="16018" y="0"></use><g transform="translate(16452,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-70" x="638" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="17581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-76" x="18832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-65" x="19318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-63" x="19784" y="0"></use><g transform="translate(20218,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-71" x="638" y="-213"></use></g><g transform="translate(21095,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-32" x="550" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>r</mi><mi>p</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>r</mi><mi>q</mi><mn>2</mn></msubsup><mo>−</mo><mn>2</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>,</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>q</mi></msub></mrow><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>p</mi></msub></mrow><mo>−</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>r</mi><mi>q</mi></msub></mrow><msup><mo stretchy="false">)</mo><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-29"> r_p ^ 2 + r_q ^ 2 - 2 \ cdot (\ vec {r_p}, \ vec {r_q}) = (\ vec {r_p} - \ vec {r_q}) ^ 2 </script>  .  Ou seja, temos uma matriz de quadrados de distâncias entre pontos. </p><br><h3 id="elektrostaticheskoe-ottalkivanie-na-sfere">  Repulsão eletrostática em uma esfera </h3><br><p>  <code>dist = np.sqrt(sq_dist)</code> - matriz de distâncias entre pontos.  Precisamos calcular o potencial, levando em conta a repulsa de pontos entre si e a atração pela esfera.  Coloque as unidades na diagonal e substitua cada elemento pelo inverso (não pense que invertemos a matriz!): <code>rec_dist_one = 1 / (dist + np.eye(n))</code> .  O resultado é uma matriz na diagonal da qual existem unidades, outros elementos são os potenciais da interação eletrostática entre os pontos. </p><br><p>  Agora adicionamos o potencial quadrático de atração à superfície da esfera unitária.  A distância da superfície da esfera <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>r</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.861ex" height="2.66ex" viewBox="0 -832 2953.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-2212" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-72" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMAIN-29" x="2564" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-30"> (1 - r) </script>  .  Esquadre e multiplique por <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/hh/blog/424227/&amp;usg=ALkJrhhsZ4QnHigzMCjSsFY1FJFVXU1E_A#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-31"> k </script>  , que define a relação entre o papel da repulsão eletrostática de partículas e a atração de uma esfera.  Total <code>k = 1000</code> , todas as <code>all_interactions = rec_dist_one - torch.eye(n) + (d.sqrt() - torch.ones(n))**2</code> .  A função de perda esperada, que minimizaremos: <code>t = all_interactions.sum()</code> </p><br><p>  Um programa que calcula o potencial usando a biblioteca numpy: </p><br><pre> <code class="python hljs">S = X.dot(XT) <span class="hljs-comment"><span class="hljs-comment">#    pp_sq_dist = np.diag(S) #  p_roll = pp_sq_dist.reshape(1, -1).repeat(n, axis=0) #     q_roll = pp_sq_dist.reshape(-1, 1).repeat(n, axis=1) #     pq_sq_dist = p_roll + q_roll - 2 * S #      pq_dist = np.sqrt(pq_sq_dist) #    pp_dist = np.sqrt(pp_sq_dist) #      surface_dist_sq = (pp_dist - np.ones(n)) ** 2 #       rec_pq_dist = 1 / (pq_dist + np.eye(n)) - np.eye(n) #      L_np_rec = rec_pq_dist.sum() / 2 #     L_np_surf = k * surface_dist_sq.sum() #       L_np = (L_np_rec + L_np_surf) / n #   ,     print('loss =', L_np)</span></span></code> </pre> <br><p>  Aqui as coisas estão um pouco melhores - 200 ms em 2000 pontos. </p><br><p>  Usamos pytorch: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> torch pt_x = torch.from_numpy(X) <span class="hljs-comment"><span class="hljs-comment"># pt_x -   tensor   pytorch pt_S = pt_x.mm(pt_x.transpose(0, 1)) # mm - matrix multiplication pt_pp_sq_dist = pt_S.diag() pt_p_roll = pt_pp_sq_dist.repeat(n, 1) pt_q_roll = pt_pp_sq_dist.reshape(-1, 1).repeat(1, n) pt_pq_sq_dist = pt_p_roll + pt_q_roll - 2 * pt_S pt_pq_dist = pt_pq_sq_dist.sqrt() pt_pp_dist = pt_pp_sq_dist.sqrt() pt_surface_dist_sq = (pt_pp_dist - torch.ones(n, dtype=torch.float64)) ** 2 pt_rec_pq_dist = 1/ (pt_pq_dist + torch.eye(n, dtype=torch.float64)) - torch.eye(n, dtype=torch.float64) L_pt = (pt_rec_pq_dist.sum() / 2 + k * pt_surface_dist_sq.sum()) / n print('loss =', float(L_pt))</span></span></code> </pre> <br><p>  E finalmente tensorflow: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tensorflow <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf tf_x = tf.placeholder(name=<span class="hljs-string"><span class="hljs-string">'x'</span></span>, dtype=tf.float64) tf_S = tf.matmul(tf_x, tf.transpose(tf_x)) tf_pp_sq_dist = tf.diag_part(tf_S) tf_p_roll = tf.tile(tf.reshape(tf_pp_sq_dist, (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>)), (n, <span class="hljs-number"><span class="hljs-number">1</span></span>)) tf_q_roll = tf.tile(tf.reshape(tf_pp_sq_dist, (<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)), (<span class="hljs-number"><span class="hljs-number">1</span></span>, n)) tf_pq_sq_dist = tf_p_roll + tf_q_roll - <span class="hljs-number"><span class="hljs-number">2</span></span> * tf_S tf_pq_dist = tf.sqrt(tf_pq_sq_dist) tf_pp_dist = tf.sqrt(tf_pp_sq_dist) tf_surface_dist_sq = (tf_pp_dist - tf.ones(n, dtype=tf.float64)) ** <span class="hljs-number"><span class="hljs-number">2</span></span> tf_rec_pq_dist = <span class="hljs-number"><span class="hljs-number">1</span></span> / (tf_pq_dist + tf.eye(n, dtype=tf.float64)) - tf.eye(n, dtype=tf.float64) L_tf = (tf.reduce_sum(tf_rec_pq_dist) / <span class="hljs-number"><span class="hljs-number">2</span></span> + k * tf.reduce_sum(tf_surface_dist_sq)) / n glob_init = tf.local_variables_initializer() <span class="hljs-comment"><span class="hljs-comment">#     with tf.Session() as tf_s: #     glob_init.run() #   res, = tf_s.run([L_tf], feed_dict={tf_x: x}) #   print(res)</span></span></code> </pre> <br><p>  Compare o desempenho dessas três abordagens: </p><br><table><tbody><tr><td>  N </td><td>  python </td><td>  entorpecido </td><td>  pitão </td><td>  tensorflow </td></tr><tr><td>  2000 </td><td>  4.03 </td><td>  0,083 </td><td>  1.11 </td><td>  0,205 </td></tr><tr><td>  10.000 </td><td>  99 </td><td>  2,82 </td><td>  2,18 </td><td>  7,9 </td></tr></tbody></table><br><p>  Cálculos vetorizados dão um ganho de mais de uma ordem decimal e meia em relação ao código python puro.  A "placa da caldeira" em pytorch é visível: cálculos de pequenos volumes levam uma quantidade notável de tempo, mas quase não muda com o aumento do volume de cálculos. </p><br><h3 id="vizualizaciya">  Visualização </h3><br><p>  Atualmente, os dados podem ser visualizados usando um grande número de pacotes, como Matlab, Wolfram Mathematica, Maple, Matplotlib, etc. etc. Nesses pacotes, existem muitas funções complexas que fazem coisas complexas.  Infelizmente, se você enfrentar uma tarefa simples, mas não padronizada, ficará desarmado.  Minha solução favorita nessa situação é o povray.  Este é um programa muito poderoso que geralmente é usado para criar imagens fotorrealistas, mas pode ser usado como um "montador de visualização".  Normalmente, não importa o quão difícil seja a superfície que você deseja exibir, basta pedir ao povray para desenhar esferas com centros sobre essa superfície. </p><br><p>  Usando a biblioteca vapory, você pode criar uma cena de povray diretamente em python, renderizá-la e ver o resultado.  Agora fica assim: </p><br><p><img src="https://habrastorage.org/webt/fh/1j/6x/fh1j6xkcdedx1m4s0x9clmsgjse.gif"></p><br><p>  A imagem é obtida da seguinte forma: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vapory <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(moment)</span></span></span><span class="hljs-function">:</span></span> angle = <span class="hljs-number"><span class="hljs-number">2</span></span> * math.pi * moment / <span class="hljs-number"><span class="hljs-number">360</span></span> r_camera = <span class="hljs-number"><span class="hljs-number">7</span></span> camera = vapory.Camera(<span class="hljs-string"><span class="hljs-string">'location'</span></span>, [r_camera * math.cos(angle), <span class="hljs-number"><span class="hljs-number">1.5</span></span>, r_camera * math.sin(angle)], <span class="hljs-string"><span class="hljs-string">'look_at'</span></span>, [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-string"><span class="hljs-string">'angle'</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) light1 = vapory.LightSource([<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">-3</span></span>], <span class="hljs-string"><span class="hljs-string">'color'</span></span>, [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]) light2 = vapory.LightSource([<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], <span class="hljs-string"><span class="hljs-string">'color'</span></span>, [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]) plane = vapory.Plane([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-number"><span class="hljs-number">-1</span></span>, vapory.Pigment(<span class="hljs-string"><span class="hljs-string">'color'</span></span>, [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>])) box = vapory.Box([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], vapory.Pigment(<span class="hljs-string"><span class="hljs-string">'Col_Glass_Clear'</span></span>), vapory.Finish(<span class="hljs-string"><span class="hljs-string">'F_Glass9'</span></span>), vapory.Interior(<span class="hljs-string"><span class="hljs-string">'I_Glass1'</span></span>)) spheres = [vapory.Sphere( [float(r[<span class="hljs-number"><span class="hljs-number">0</span></span>]), float(r[<span class="hljs-number"><span class="hljs-number">1</span></span>]), float(r[<span class="hljs-number"><span class="hljs-number">2</span></span>])], <span class="hljs-number"><span class="hljs-number">0.05</span></span>, vapory.Texture(vapory.Pigment(<span class="hljs-string"><span class="hljs-string">'color'</span></span>, [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]))) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> x] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vapory.Scene(camera, objects=[light1, light2, plane, box] + spheres, included=[<span class="hljs-string"><span class="hljs-string">'glass.inc'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">360</span></span>): flnm = <span class="hljs-string"><span class="hljs-string">'out/sphere_{:03}.png'</span></span>.format(t) scene = create_scene(t) scene.render(flnm, width=<span class="hljs-number"><span class="hljs-number">800</span></span>, height=<span class="hljs-number"><span class="hljs-number">600</span></span>, remove_temp=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) clear_output() display(Image.open(flnm))</code> </pre> <br><p>  De vários arquivos, os gifs animados são montados usando o ImageMagic: </p><br><pre> <code class="bash hljs">convert -delay 10 -loop 0 sphere_*.png sphere_all.gif</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No github,</a> você pode ver o código de funcionamento, cujos fragmentos são dados aqui.  No segundo artigo, falarei sobre como começar a minimizar o funcional para que os pontos saiam do cubo e se espalhem uniformemente pela esfera. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424227/">https://habr.com/ru/post/pt424227/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424209/index.html">Teste do Wireless Grace: Snom A170 Headset</a></li>
<li><a href="../pt424211/index.html">Entendendo a Interface de Armazenamento de Contêiner (no Kubernetes e mais)</a></li>
<li><a href="../pt424215/index.html">Elm. Confortável e desajeitado</a></li>
<li><a href="../pt424217/index.html">Raciocínio para guerras sagradas, bem como um pedido de paz</a></li>
<li><a href="../pt424223/index.html">Clientes descartáveis. Segmentação para compras repetidas</a></li>
<li><a href="../pt424229/index.html">Kubernetes em produção: serviços</a></li>
<li><a href="../pt424231/index.html">Como ganhar dinheiro com hosters</a></li>
<li><a href="../pt424233/index.html">Computador ensinado a detectar demência com uma precisão de 93%</a></li>
<li><a href="../pt424235/index.html">Como usar o STATSPACK em vez do AWR no Oracle Standard Edition</a></li>
<li><a href="../pt424237/index.html">Carregue seu cérebro diretamente! Tempo de execução, compiladores e desempenho no Joker 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>