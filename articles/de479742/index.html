<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚔 🌭 🔄 Backyards - ein automatisiertes Service-Mesh auf einer Multi-Cloud- und Hybrid-Infrastruktur 👱🏿 🔚 🗜️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Testen Sie Backyards auf Ihren eigenen Clustern: curl https://getbackyards.sh | sh && backyards install -a --run-demo curl https://getbackyards.sh | s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Backyards - ein automatisiertes Service-Mesh auf einer Multi-Cloud- und Hybrid-Infrastruktur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/479742/"><img src="https://habrastorage.org/getpro/habr/post_images/83b/36e/e0b/83b36ee0bc8ba785116ec27befe716bc.png"><br><br><blockquote> Testen Sie Backyards auf Ihren eigenen Clustern: <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code>  <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code> .  Bei Interesse lesen Sie die <a href="https://banzaicloud.com/blog/backyards-release-1-0/">Details der neuesten Version</a> . </blockquote><br>  Im Juni führten wir <a href="https://banzaicloud.com/blog/istio-the-easy-way/">Backyards ein</a> , ein <b>automatisiertes „Service-Mesh“</b> über unserem <a href="https://github.com/cloud/istio-operator">Istio-Betreiber</a> .  Es vereinfacht das Service-Mesh-Management in einer Multi-Cloud- und Hybrid-Infrastruktur erheblich.  Backyards ist in <b>die <a href="https://github.com/banzaicloud/pipeline">Pipeline-</a> Container-Management-Plattform</b> in der Banzai Cloud integriert, ist jedoch auch als <b>eigenständiges</b> Produkt erhältlich.  Natürlich bietet die Integration mit Pipeline viele spezifische Vorteile (wie das <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">Verwalten von Anwendungen in mehreren Clouds</a> ), aber Backyards funktioniert auf jeder Kubernetes-Installation. <br><a name="habracut"></a><br>  In der <a href="https://banzaicloud.com/blog/istio-the-easy-way/">Ankündigung von Backyards haben</a> wir einige der Hauptfunktionen besprochen: Erstellen eines Servicegitters mit wenigen Klicks, Überwachen von Anwendungen über eine einzigartige grafische Darstellung und Verwalten von Istio-Funktionen über eine komfortable Benutzeroberfläche.  Dann erwähnten wir, dass die Plattform in der Lage ist, Istio-Multi-Cluster-Service-Netzwerke in Multi-Cloud- und Hybrid-Bereitstellungen zu verwalten. <br><br>  In diesem Artikel werden wir uns dieses Feature genauer ansehen - das <b>automatisierte Multi-Cluster-Service-Mesh</b> . <br><br><blockquote>  Egal, ob es sich um einen oder mehrere Cluster, eine Multi-Cloud- oder Hybridumgebung handelt, Backyards verwendet dieselben Funktionen und eine praktische Benutzeroberfläche.  Es ist extrem einfach, mit einem Cluster zu beginnen und dann mit wenigen Klicks das Servicenetz auf andere Cluster (Multi-Cloud oder Hybrid-Cloud) auszudehnen. </blockquote><br><h1>  Motivation </h1><br>  Hybrid- und Multi-Cloud-Systeme tauchen schnell in den Unternehmensalltag ein.  Das Interesse und die Entscheidungsfindung sind stark gewachsen, seit Google <a href="https://cloud.google.com/blog/topics/hybrid-cloud/new-platform-for-managing-applications-in-todays-multi-cloud-world">Anthos</a> im April dieses Jahres eingeführt hat. <br><br>  Auch bei den meisten Unternehmen, mit denen wir dieses Thema diskutiert haben, ist ein Anstieg des Interesses zu beobachten.  Jemand verarbeitet Daten lieber in seinen eigenen Rechenzentren und greift nur zu Spitzenlastzeiten auf Cloud-Dienste zu.  Andere suchen ständig nach den niedrigsten Tarifen und besten Angeboten von Cloud-Anbietern und erhöhen die Arbeitslast nur, wenn der Preis dies zulässt.  Sie alle benötigen eine bequeme Möglichkeit, auf Anforderung eines bestimmten Kunden aufgrund gesetzlicher Vorschriften oder geschäftlicher Anforderungen zwischen verschiedenen Clouds zu wechseln und <a href="https://banzaicloud.com/blog/istio-multi-mesh/">mehrere verschiedene Topologien</a> auf dieser Multi-Cloud- und Hybridinfrastruktur aufzubauen. <br><br>  Als die Nachfrage nach Hybrid- und Multi-Cluster-Lösungen zunahm, begannen wir zu überlegen, wie wir die Bedürfnisse unserer Kunden befriedigen können. <br><br><blockquote>  Pipeline-Benutzer arbeiten mit einer oder mehreren Clouds.  Es kommt darauf an, welche spezifischen Funktionen sie benötigen.  Drei Schlüsselfunktionen können unterschieden werden: <br><br><ul><li>  <a href="https://banzaicloud.com/blog/multi-cloud-apps/">Verwaltung mehrerer Cloud-Anwendungen</a> <br></li><li>  <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">Istio-basiertes automatisiertes Service-Mesh auf einer Multi-Cloud- und Hybrid-Infrastruktur</a> <br></li><li>  <a href="https://banzaicloud.com/blog/multi-cloud-fedv2/">Verbundbereitstellung von Ressourcen und Anwendungen über Kubernetes Federation v2</a> </li></ul></blockquote><br><h1>  Hintergrund </h1><br>  Von Anfang an unterstützte die Pipeline-Plattform die Verbindung verschiedener Cloud-Anbieter auf verschiedenen Ebenen (Cluster, Bereitstellungen und Dienste).  Dies war schon immer eine unserer Prioritäten. <br><br>  Gleichzeitig haben wir aktiv an Istio gearbeitet.  Der <a href="https://banzaicloud.com/blog/istio-operator/">Betreiber wurde</a> zuerst freigegeben, um die Bereitstellung und Verwaltung von Istio zu vereinfachen, und <a href="https://banzaicloud.com/tags/federation/">erkundete</a> dann seine Multi-Cluster-Funktionen.  Als Ergebnis haben <b>wir</b> mit dem Open-Source-Betreiber Istio <b>Backyards entwickelt, ein automatisiertes Produkt für Multi-Cloud- und Hybrid-Infrastrukturen</b> , das in Pipeline integriert ist. <br><br><h1>  Hinterhöfe bei Pipeline </h1><br>  <b>In Pipeline können Sie ein hybrides oder Multi-Cluster-Service-Mesh installieren und in einer lokalen Umgebung oder in einer beliebigen Kombination der fünf von uns unterstützten Cloud-Anbieter verwalten.</b> <br><br><blockquote>  Mit der Funktion zum <b>Gruppieren von Clustern</b> (Clustergruppe) können Sie Clustergruppen bilden, vorausgesetzt, Sie wählen einen Cluster als Hauptcluster aus.  Sie können sie dann mit verschiedenen Funktionen verknüpfen, z. B. mit <code>Multi-cluster Deployment</code> <code>Service Mesh</code> <code>Multi-cluster Deployment</code> oder mit <code>Service Mesh</code> . <br><br>  <code>Multi-cluster Deployment</code> der Bereitstellung mehrerer Cluster können Sie die Anwendung gleichzeitig auf mehreren Clustern bereitstellen.  Hier konzentrieren wir <b>uns nicht</b> auf diese Funktion, sie <b>wird jedoch</b> verwendet, um die Anwendung auf einfache Weise auf mehreren Clustern bereitzustellen.  Lesen Sie mehr darüber in <a href="https://banzaicloud.com/blog/multi-cloud-apps/">diesem Artikel</a> . <br><br>  In diesem Artikel wird die Funktion " <code>Service Mesh</code> näher <code>Service Mesh</code> .  Es installiert Istio auf dem Hauptcluster und verbindet automatisch alle Cluster in der Gruppe mithilfe <a href="https://github.com/banzaicloud/istio-operator">des Istio-Operators</a> .  Danach erhalten Sie eine Intercluster-Ansicht Ihrer Services, und ein Multicluster-Netz unterscheidet sich aus Sicht des Managements praktisch nicht von einem herkömmlichen Einzelcluster-Netz. </blockquote><br><h1>  Funktionen </h1><br><h4>  Erstellen eines Servicenetzes </h4><br>  Beginnen wir mit der Erstellung eines Clusters auf AWS mithilfe der leichten und CNCF-zertifizierten Kubernetes-Distribution <a href="https://github.com/banzaicloud/pke">PKE</a> .  Erstellen Sie dann ein Service-Mesh-Istio auf diesem Cluster. <br><br><blockquote>  Beim Anlegen eines Servicenetzes wird im Hintergrund auch eine <i>Clustergruppe</i> gebildet. </blockquote><br>  Nach wenigen Sekunden ist das "Gitter" installiert und einsatzbereit. <br><br><img src="https://habrastorage.org/webt/y3/in/et/y3inetitm4ngvd4wbcwkzrtpbzw.gif"><br><br><h4>  Anwendungsbereitstellung </h4><br>  Jetzt brauchen wir eine Demo-Anwendung mit Microservices, um die Fähigkeiten unseres Produkts zu demonstrieren.  Zu Demonstrationszwecken haben wir ein sehr einfaches <a href="https://github.com/banzaicloud/allspark">AllSpark-</a> Projekt erstellt und ein Helm-Diagramm mit einer vorläufigen Konfiguration des AllSpark-Einsatzes erstellt, das ein Kinokarten-Reservierungssystem simuliert.  Alles wird in unserem <a href="https://banzaicloud.com/blog/chart-repository-service/">Cloud-Service (SaaS) für Helm-Diagramme</a> erledigt. <br><br>  Mit der oben genannten Funktion zur Bereitstellung <code>Multi Cluster Deployments</code> wir diese Anwendung bereit, indem Sie auf der Benutzeroberfläche auf die Registerkarte " <code>Multi Cluster Deployments</code> mehrerer <code>Multi Cluster Deployments</code> .  Fügen Sie der Pipeline das Repository <code>https://charts.banzaicloud.io/gh/spotguidetest</code> , dann das <code>meshdemo</code> Diagramm und klicken Sie auf <code>DEPLOY</code> (um alle Komponenten zu installieren, stellen Sie sicher, dass alle Werte auf <code>true</code> ). <br><br><img src="https://habrastorage.org/webt/xm/el/jy/xmeljy6q3iqbshd48bybu8lqmig.gif"><br><br><blockquote>  Es war möglich, eine einfache Bereitstellung für einen Cluster zu wählen, aber wir haben eine Multicluster-Option angegeben, die sich später bei der Arbeit mit mehreren Clustern als nützlich erweisen wird. </blockquote><br><h4>  Service Mesh Übersicht </h4><br>  Wenn Sie zur Netzliste zurückkehren und auf die <code>observe</code> klicken, wird eine Systemsteuerung angezeigt.  Da in unserer Testanwendung kein Datenverkehr vorhanden ist und keine Metriken im System vorhanden sind, wird hier noch keine Visualisierung angezeigt.  Die Schnittstelle verfügt über eine <code>test flight</code> , die den Datenverkehr zu ausgewählten Endpunkten weiterleitet.  Wenn Sie oben rechts auf die Schaltfläche <code>HTTP</code> klicken, können Sie ein Formular mit Informationen zum Endpunkt ausfüllen und Testdaten an Ihre Dienste senden.  In unserem Beispiel sollte der Datenverkehr an den Frontpage-Dienst auf Port 8080 geleitet werden. <br><br>  Nach einigen Sekunden wird ein Zeitplan Ihrer Dienste angezeigt.  Die Knoten darauf repräsentieren Dienste oder Workloads, und die Pfeile repräsentieren Netzwerkverbindungen zwischen verschiedenen Diensten.  Die Grafik basiert auf Istio-Metriken, die von Prometheus stammen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a39/7e0/099/a397e00992f49c862bb4fc039328d4cb.png"><br><br><h4>  Erstellen Sie zusätzliche Cluster </h4><br>  Die Ausweitung des Service-Netzes auf zusätzliche Cluster - auch von mehreren verschiedenen Cloud-Anbietern - ist mit wenigen Klicks erledigt.  Erstellen wir drei zusätzliche Cluster bei drei verschiedenen Anbietern. Das ist interessanter.  Wir können problemlos einen anderen PKE-Cluster in Azure sowie OKE- und GKE-Cluster bereitstellen. <br><br><img src="https://habrastorage.org/webt/bd/g7/wp/bdg7wpkuagluo5redzodlh3q0ka.gif"><br><br><h4>  Service Mesh Erweiterung </h4><br>  <code>RESIZE MESH</code> zur <code>RESIZE MESH</code> der Dienste zurück, drücken Sie die Taste <code>RESIZE MESH</code> und dann <code>ADD NEW CLUSTER</code> <code>RESIZE MESH</code> .  Wählen Sie die zuvor erstellten Cluster aus und <code>ADD</code> Schaltfläche <code>ADD</code> .  Das ist alles. <br><br><img src="https://habrastorage.org/webt/mm/g9/rp/mmg9rp74sdp8hmybk7odulh9yzi.gif"><br><br>  Die Erweiterung kann einige Minuten dauern: Jeder Cluster muss eine Verbindung herstellen und den <code>HEALTHY</code> erreichen. <br><br><h4>  Bereitstellen einer Anwendung in mehreren Clustern </h4><br>  Jetzt haben wir ein Servicegitter für mehrere Cluster und die Funktion zur Bereitstellung mehrerer Cluster in der Pipeline war zuvor aktiviert, sodass es einfach ist, unsere Demo-Microservices auf diesen Clustern bereitzustellen.  In diesem speziellen Helm-Diagramm können Sie Komponenten einfach ein- und ausschalten.  Da die Funktion zur <code>Multi-cluster Deployment</code> die Neudefinition von Parametern für jeden Cluster unterstützt, müssen Sie nur die Bereitstellung bearbeiten und festlegen, welche Komponenten in welchem ​​Cluster ausgeführt werden sollen. <br><br>  Bei der Bereitstellung mit mehreren Clustern haben wir die Einstellungen folgendermaßen geändert: <br><br> <code>PKE  AWS <br> <br> services: true <br> istioresources: true <br> frontpage: true <br> catalog: true <br> bookings: true <br> <br> PKE  Azure <br> <br> services: true <br> moviesv1: true <br> moviesv2: true <br> moviesv3: true <br> <br> OKE <br> <br> services: true <br> payments: true <br> notifications: true <br> <br> GKE <br> <br> services: true <br> analytics: true</code> <br> <br><img src="https://habrastorage.org/webt/hi/zd/1a/hizd1ajvovnzl7nn0cg5dstgtrg.gif"><br><br><h4>  Übersicht über das Servicenetz in mehreren Clustern </h4><br>  Wählen Sie erneut <code>test flight</code> in der Benutzeroberfläche aus, um zusätzlichen Datenverkehr zum zuvor ausgewählten Endpunkt zu leiten.  Nach ein paar Sekunden wird etwas angezeigt, das der folgenden Grafik ähnelt.  Jetzt ist unsere Anwendung auf <b>vier</b> Cluster bei <b>vier</b> verschiedenen Anbietern verteilt. <br><br>  <i>Erstaunlich</i> , oder? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/11a/72c/12a/11a72c12a16805ea697effda2d9d17f9.png"><br><br><h4>  NRA-Konfiguration </h4><br>  Sehen Sie sich die letzte Einstellung an, bevor Sie diesen Artikel beenden: <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">Horizontal Pod Autoscaler</a> .  Auf der Seite <code>Single-cluster Deployment</code> in Pipeline können Sie HPA einfach für jede Bereitstellung konfigurieren (in unserem Fall <code>analytics-v1</code> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ef/ac0/7ec/1efac07ecb4dc9f722b6b970c8a2647a.png"><br><br>  Wenn Sie HPA installieren und genügend Datenverkehr an Ihre Services senden, um die automatische Skalierung zu starten, werden in der Benutzeroberfläche immer mehr Pods angezeigt, die dem <code>analytics-v1</code> Projekt entsprechen.  Sie werden auch einen Anstieg des Abfragestroms entlang der Kanten des Diagramms feststellen, der sich in den Zahlen und in der Dicke der Kanten widerspiegelt. <br><br><img src="https://habrastorage.org/webt/lw/0p/7d/lw0p7dzyj5eq9rtbcaqgc_l53km.gif"><br><br><h1>  Zusammenfassung </h1><br><blockquote>  Dank Backyards at Pipeline ist es einfach, ein Hybrid- oder Multi-Cluster-Service-Mesh einzurichten.  Sie können dann Anwendungen in mehreren Clustern mithilfe einer praktischen Benutzeroberfläche bereitstellen, verfolgen, verwalten und Fehler beheben. <br><br>  <a href="https://beta.banzaicloud.io/">Probieren Sie es kostenlos aus</a> ! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479742/">https://habr.com/ru/post/de479742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479726/index.html">Vladimir aka wowik: "OpenStreetMap braucht Ideen, die in anderen Systemen nicht umsetzbar sind"</a></li>
<li><a href="../de479728/index.html">Wie organisiere ich einen erfolgreichen Start?</a></li>
<li><a href="../de479732/index.html">Stellen Sie die Ausgabe von etwas anderem als Speicherverlust ein</a></li>
<li><a href="../de479736/index.html">Kameras oder Laser</a></li>
<li><a href="../de479738/index.html">Wie Youtube und Instagram: Internationalisierung und Lokalisierung einer Python-Anwendung</a></li>
<li><a href="../de479744/index.html">Python Memory Management: Ein wenig über Speicherfragmentierung</a></li>
<li><a href="../de479746/index.html">Unternehmenssoftware macht Ihre Mitarbeiter kühler. Brauchst du es</a></li>
<li><a href="../de479748/index.html">GoLand 2019.3 mit verbesserter Leistung, verbesserter Unterstützung für Go-Module und mehr</a></li>
<li><a href="../de479750/index.html">2. Fortinet Erste Schritte v 6.0. Lösungsarchitektur</a></li>
<li><a href="../de479756/index.html">Daten öffnen. Roscosmos. Holen Sie sich mit Amerika</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>