<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò† üìå üíÇüèº Erstellen Sie einen auf Raspberry Pi basierenden RDP Thin Client üëêüèø üîµ ü§Æ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mit der wachsenden Popularit√§t von Mini-PCs wie Raspberry Pi und √§hnlichen Klonen gab es viele F√§lle f√ºr deren Verwendung in der IT-Infrastruktur des ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie einen auf Raspberry Pi basierenden RDP Thin Client</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479504/">  Mit der wachsenden Popularit√§t von Mini-PCs wie Raspberry Pi und √§hnlichen Klonen gab es viele F√§lle f√ºr deren Verwendung in der IT-Infrastruktur des Unternehmens, in Smart Home / Cottage / Garage und in anderen Anwendungen. <br><br>  Einer der bequemen und w√ºnschenswerten F√§lle ist die Verwendung von RPi als Thin Client, der √ºber RDP eine Verbindung zu Windows-basierten Systemen herstellt. <br><br>  Wenn Sie daran interessiert sind, einen solchen Ort auf der Basis des Raspberry Pi einzurichten und so zu "einrichten und vergessen" - willkommen bei der Katze.  Es gibt ein fertiges Bild f√ºr die v√∂llig Faulen (siehe Abschnitt 6.B). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3v/mj/zp/3vmjzprnt4v33dvnqnr6rwlikb8.png" alt="Ein Bild, das Aufmerksamkeit erregt"></div><br><a name="habracut"></a><br>  Insbesondere musste ich meiner Erfahrung nach (Spezialist f√ºr Buchhaltung / Management-Automatisierung) h√§ufig Arbeitspl√§tze organisieren, deren einziger Zweck darin bestand, auf ein Programm (meistens gelb), eine Office-Suite, das Internet und E-Mails zuzugreifen.  Manchmal - mit Flash-Laufwerken arbeiten.  Der Server war gleichzeitig bereits im Unternehmen. <br><br>  Gleichzeitig war die Station ger√§uscharm, kompakt und zuverl√§ssig.  Oder lasst uns ehrlich sein, Billigkeit.  Vor allem, wenn es um den Einzelhandel ging, in dem alles ‚Äûfestgenagelt‚Äú werden sollte. <br><br>  Gleichzeitig wurden in der Vergangenheit viele L√∂sungen in Form von spezialisierten ‚ÄûEisen‚Äú -D√ºnnclients ausprobiert, die sich jedoch aus verschiedenen Gr√ºnden als unangenehm herausstellten.  Irgendwo waren bestimmte damit verbundene Aufgaben erforderlich, z. B. die Weiterleitung von Druckern an einen Server, die sie nicht bew√§ltigen konnten.  Irgendwo tauchten langsam Tische auf, was die Benutzer verr√ºckt machte.  Irgendwo arbeiteten Thin Clients einfach an einem Ort, und es war unm√∂glich zu verstehen, warum.  Irgendwo funktionierte die launische Netzwerklast nicht oder die Parameter wurden nicht √ºber DHCP √ºbertragen. <br><br>  Daher kam auf nat√ºrliche Weise alles zu dem Schluss, dass es einfacher ist, ein Junk-Nettop zu kaufen und ein Minimum an Software darauf zu installieren, als ein Spiel mit obskurem Eisen zu erraten, und das auf eigene Kosten, da nicht im Voraus bekannt ist, wo und was nicht funktioniert , aber es ist sicher bekannt, dass alles in Ordnung sein sollte und nicht so viel Zeit in Anspruch nehmen. <br><br>  Der Artikel war etwas sp√§t mit der Relevanz.  Wenn Sie zu demselben gelben Programm zur√ºckkehren, hat die Plattform in den letzten Jahren einen eigenen Thin Client entwickelt, und die Relevanz der Bereitstellung im Remotedesktopmodus hat abgenommen. <br><br>  Es gibt jedoch auch eine Reihe anderer Aufgaben, bei denen eine √ºber RDP verbundene leise und zuverl√§ssige Workstation geeignet ist.  In den letzten Jahren sind die Kosten f√ºr Mini-PCs erheblich gestiegen, und die Kosten f√ºr Standard-Computer und -Nettops sind rentabler geworden (Hardwarekosten, eine Stunde Facharbeit plus CAL / TCAL-Lizenzen f√ºr Windows Server), um genau solche L√∂sungen zu erstellen. <br><br><h2>  Erkl√§rung des Problems </h2><br>  Auf der Basis von Raspberry Pi m√ºssen wir also einen Thin-RDP-Client bereitstellen, der sich an einen bestimmten Server ‚Äûnagelt‚Äú und bei einem Ausfall eine erneute Verbindung herstellt. <br><br>  Jegliche Benutzerinteraktion mit dem Ger√§t selbst sollte ausgeschlossen werden.  Dementsprechend keine lokalen Desktop- und Konsolenbefehle.  Das Passwort wird nur f√ºr die RDP-Sitzung eingegeben. <br><br>  Als Bonus - organisieren Sie automatisch einbindende und austauschbare USB-Laufwerke. <br><br>  <b>Gegeben:</b> <br><br><ul><li>  reiner Himbeer-Pi 3 Modell B 1 Gb oder 4 Modell B 1 Gb </li><li>  5V 2A Netzteil, </li><li>  HDMI-Kabel </li><li>  Adapter mit HDMI an den Monitor (wenn der Monitor keinen eingebauten HDMI-Anschluss hat), </li><li>  Ethernet-Kabel (oder Vorhandensein eines WiFi-Netzwerks), </li><li>  MicroSD-Speicherkarte mit 8 GB oder mehr (4 GB sind objektiv genug, aber es scheint mir, dass Sie eine 4 GB-Karte nur im Museum kaufen k√∂nnen). </li><li>  Monitor, Tastatur, Maus f√ºr Himbeere. </li></ul><br>  Zum Zeitpunkt der Installation - ein Computer (Laptop) mit Windows oder Linux, ein microSD-Kartenadapter dazu. <br><br>  Es wird davon ausgegangen, dass der Leser √ºber grundlegende Kenntnisse in der Verwaltung von Linux-Systemen verf√ºgt und die Frage ‚ÄûErstellen und Bearbeiten einer Datei, Kopieren und Einf√ºgen des Texts aus diesem Artikel‚Äú oder ‚ÄûHerstellen einer Verbindung √ºber SSH‚Äú keine Probleme verursacht.  Manchmal erlaube ich mir jedoch einen tieferen Ausflug f√ºr diejenigen, die Raspbian nicht speziell kennengelernt haben. <br><br>  Allgemeine Logik: Konfigurieren Sie das Basissystem, installieren Sie den RDP-Client, konfigurieren Sie die automatische Anmeldung, testen Sie, beheben Sie Probleme. <br><br>  Es wird auch beschrieben, wie eine fertige Baugruppe auf eine andere Himbeere geklont wird. <br><br>  Das Software-Layout selbst ist unkompliziert, es wurde in der einen oder anderen Form vor ungef√§hr 9 Jahren geboren - wie ich mich erinnere, habe ich es unter Debian Etch gemacht.  Seitdem hat es sich ein wenig von Software- und Hardwareversionen zu Versionen gewandelt, und jetzt ist es Zeit, es auf Raspberry zu portieren. <br><br>  Der geplante Zeitaufwand betr√§gt ca. 30 Minuten. <br><br><h2>  1. Einrichten des Basissystems </h2><br><h4>  1.1 System-Image herunterladen </h4><br>  Wir werden Raspbian als System w√§hlen. <br><br>  Zum Zeitpunkt des Schreibens <a href="https://www.raspberrypi.org/downloads/raspbian/" rel="nofollow">kann dies hier durchgef√ºhrt werden</a> .  Die aktuelle Version ist Buster. <br><br>  W√§hlen Sie Minimal Image Based on Debian Buster. <br><br><img src="https://habrastorage.org/webt/iy/eb/jv/iyebjvlxbebhaqflevjeihob5fa.png"><br><br>  Laden Sie das ZIP-Archiv herunter, aus dem Sie die einzige IMG-Datei erhalten. <br><br><img src="https://habrastorage.org/webt/vp/qo/5w/vpqo5wlbndwf9n2ntw5stuylso0.png"><br><br><h4>  1.2 Schreiben Sie es auf eine Flash-Karte </h4><br>  <b>a) Unter Windows</b> <br><br>  Laden Sie das <b>Rufus-</b> Programm von der <a href="https://rufus.ie/" rel="nofollow">offiziellen Website</a> herunter.  Eine portable Version reicht aus. <br><br>  F√ºhren Sie das Programm aus, w√§hlen Sie die SD-Karte und das Bild aus dem Archiv in Abschnitt 1.1. <br><br><img src="https://habrastorage.org/webt/yx/9o/3f/yx9o3ftepbvxw5qytwiu5__d_fi.png"><br><br>  Dr√ºcken Sie die Taste ‚ÄúSTART‚Äù, best√§tigen Sie die Zerst√∂rung der Daten auf der SD-Karte und warten Sie, bis der Vorgang abgeschlossen ist (ca. 5 Minuten). <br><br>  Entfernen Sie die Karte sicher. <br><br>  <b>b) unter Linux</b> <br><br>  F√ºhren Sie den Befehl aus: <br><br><pre><code class="plaintext hljs"># dd if=2019-09-26-raspbian-buster-lite.img of=/dev/&lt; SD-&gt; bs=4M</code> </pre> <br>  Warten Sie, bis der Vorgang abgeschlossen ist, und ziehen Sie die Karte heraus. <br><br><h4>  1.3 Stellen Sie das System f√ºr RPI bereit </h4><br>  Wir ordnen die Karte auf dem Zielger√§t neu an.  Wir verbinden den Mini-PC mit einem Monitor, einer Tastatur und einer Maus und schalten ihn ein. <br><br>  Nach einiger Zeit startet der Mini-PC ohne zus√§tzliche Fragen neu in das frisch bereitgestellte System und fordert Sie auf, Ihren Benutzernamen und Ihr Kennwort einzugeben. <br>  Standardm√§√üig ist dies <b>pi: himbeere.</b> <br><br><img src="https://habrastorage.org/webt/7p/ej/p6/7pejp6fntkhztb-4tkbhdlcmdq8.jpeg"><br><br><h4>  1.4 Melden Sie sich an und √§ndern Sie Ihr Passwort </h4><br><pre> <code class="plaintext hljs"># passwd pi</code> </pre> <br>  oder <br><br><pre> <code class="plaintext hljs">$ sudo passwd pi</code> </pre> <br>  (Ich f√ºhre absichtlich passwd f√ºr den Benutzer pi als root aus, damit Raspbian uns nicht mit den Sicherheitsanforderungen f√ºr das Passwort plagt, sondern es akzeptiert und akzeptiert) <br><br>  Sie k√∂nnen sich nicht direkt als root anmelden, es sei denn, Sie haben explizit ein Passwort daf√ºr festgelegt.  Im Allgemeinen ist das nicht schlecht.  Dann sollten alle Befehle, die unter dem Superuser ausgef√ºhrt werden m√ºssen, vom Benutzer pi mit dem Befehl sudo prefix ausgef√ºhrt werden.  Wie in Ubuntu. <br><br>  Zum Beispiel (ein <b><u>ber√ºhmter Witz, lauf nicht weg!</u></b> ) <br><br><pre> <code class="plaintext hljs">$ sudo rm -rf --no-preserve-root</code> </pre> <br>  Da ich jedoch pathologisch faul bin und mich bei Raspbian oder auf demselben Ubuntu anmelde, gebe ich Folgendes ein: <br><br><pre> <code class="plaintext hljs">$ sudo bash</code> </pre> <br>  Und ich bekomme die Einladung #, bereits mit erh√∂hten Rechten.  Also arbeite ich. <br>  Genau genommen ist das nicht gut, aber in der Phase der Ersteinrichtung des Systems spart es viel Zeit. <br><br>  Wenn den obigen Befehlen ein # vorangestellt ist, m√ºssen sie nachfolgend unter dem Superuser ausgef√ºhrt werden.  Wenn mit $, dann unter dem Benutzer (normalerweise wird oben angegeben, unter welchem). <br><br><h2>  2. Installieren Sie die erforderliche Software "mindestens" und testen Sie die Verbindung </h2><br><h4>  2.1 Netzwerk konfigurieren </h4><br>  F√ºhren Sie dazu das Verwaltungsdienstprogramm aus, indem Sie den folgenden Befehl ausf√ºhren: <br><br><pre> <code class="plaintext hljs"># raspi-config</code> </pre> <br><img src="https://habrastorage.org/webt/cl/ds/fb/cldsfbbpwcg-xln0ezbmc54refm.png"><br><br>  (Navigation erfolgt durch Pfeile, Tabellierung, Enter - Auswahl, ESC - Return) <br>  Gehen Sie zu <b>Netzwerkoptionen</b> . <br><br>  Stellen Sie den Computernamen (Punkt <b>N1 Hostname</b> ) ein, zum Beispiel <b>TERM1</b> . <br><br>  Wenn der Computer √ºber ein Ethernet-Kabel mit dem Netzwerk verbunden ist und eine DHCP-Adresse erh√§lt, muss nichts weiter getan werden. <br><br>  Wenn Sie ein WiFi-Netzwerk konfigurieren m√ºssen, tun Sie dies (Punkt <b>N2 Wi-Fi</b> ).  W√§hle dein Land.  <b>Der Netzwerkname</b> muss manuell eingegeben werden, es erfolgt keine √úbersicht.  Wir geben das <b>Passwort an</b> . <br><br>  Dann <b>Fertig stellen -&gt; Fertig stellen</b> . <br><br>  Auf Anforderung oder mit dem folgenden Befehl neu starten: <br><br><pre> <code class="plaintext hljs"># reboot</code> </pre> <br>  Stellen Sie nach dem erneuten Anmelden sicher, dass Sie √ºber einen Internetzugang verf√ºgen. <br><br><pre> <code class="plaintext hljs"># ping 8.8.8.8</code> </pre> <br><h4>  2.2 System aktualisieren </h4><br>  Aktualisieren Sie die Informationen zu verf√ºgbaren Paketen. <br><br><pre> <code class="plaintext hljs"># apt-get update</code> </pre> <br>  Aktualisieren Sie nun das System (Optional, aber h√∂chst w√ºnschenswert. Kann sp√§ter durchgef√ºhrt werden.) <br><br><pre> <code class="plaintext hljs"># apt-get upgrade</code> </pre> <br>  Diese Phase kann sehr lange dauern (ich habe ungef√§hr 15 Minuten Zeit), da das RPi des bin√§ren Bootloaders aktualisiert wird, wodurch viele kleine Dateien auf die SD-Karte entpackt werden. <br><blockquote>  Bitte beachten Sie, dass fast unmittelbar nach Abschluss des Downloads und Beginn des Entpackens ein b√∂ses Paket Sie auffordert, "q" zu dr√ºcken, um den Vorgang abzubrechen.  Sie m√ºssen klicken, bevor Sie durch andere Dinge abgelenkt werden, um zu warten. <br></blockquote>  Am Ende des Updates sollten Sie einen Neustart durchf√ºhren <br><br><pre> <code class="plaintext hljs"># reboot</code> </pre><br><h4>  2.3 Installieren Sie das russische Gebietsschema und Layout </h4><br>  Nochmals im Verwaltungsdienstprogramm: <br><br><pre> <code class="plaintext hljs"># raspi-config</code> </pre> <br>  Befolgen Sie die <b>Lokalisierungsoptionen</b> , dort: <br><br><ol><li>  <b>Gebietsschema √§ndern</b> , * von <b>de-DE.UTF-8</b> entfernen und gegen√ºber <b>ru-RU.UTF-8</b> installieren.  Wir best√§tigen, und im n√§chsten Fenster w√§hlen wir es als Hauptfenster aus. </li><li>  <b>√Ñndern Sie die Zeitzone</b> und w√§hlen Sie die <b>Zeitzone</b> Ihres Landes und Ihrer Stadt aus. </li><li>  <b>√Ñndern Sie das Tastaturlayout</b> , dort <b>Allgemeiner PC mit 105 Tasten (Intl)</b> ‚Üí <b>Sonstiges</b> ‚Üí <b>Russisch</b> ‚Üí <b>Russisch</b> ‚Üí <b>Strg + Umschalt</b> (oder Alt + Umschalt, falls gew√ºnscht, um das <b>Layout</b> zu wechseln) ‚Üí <b>Kein tempor√§rer Umschalter</b> ‚Üí <b>Rechts Alt (AltGr)</b> ‚Üí <b>Keine Compose-Taste</b> . </li></ol><br>  Best√§tigen und beenden - <b>Fertig stellen</b> ‚Üí <b>Fertig stellen</b> . <br><br>  Wir haben das Administrationsprogramm verlassen und f√ºhren den folgenden Befehl aus: <br><br><pre> <code class="plaintext hljs"># dpkg-reconfigure console-setup</code> </pre> <br>  W√§hlen Sie <b>UTF-8 aus.</b> ‚Üí <b>Erraten Sie den optimalen Zeichensatz.</b> ‚Üí <b>Lassen Sie das System ...</b> (unten) <b>ausw√§hlen</b> . ‚Üí <b>8x16</b> . <br><br>  Die Schriftarten sollten dann optisch d√ºnner werden. Hauptsache, sie unterst√ºtzen jetzt das kyrillische Alphabet. <br><br>  Wir starten neu, melden uns an, testen das englische Layout, die Umschaltung und das russische Layout. <br><br><h4>  2.4 Bestimmt mit Hilfssoftware und Editor </h4><br>  F√ºr die Arbeit mit Dateien, das Navigieren in der Ordnerstruktur und das Bearbeiten von Dateien mag ich <b>Midnight Commander sehr</b> , deshalb: <br><br><pre> <code class="plaintext hljs"># apt-get install mc</code> </pre><br>  Ich starte es unter root-Rechten, und wenn ich den Editor zum ersten Mal benutze (F4-Taste auf einer Datei), w√§hle ich <b>mcedit</b> (Punkt 2). <br><br>  Nat√ºrlich k√∂nnen Sie Dateien mit den Werkzeugen Ihrer Wahl bearbeiten.  Zum Beispiel mit Nano oder sogar VIM. <br><br><h4>  2.5 Installieren Sie den SSH-Server </h4><br><pre> <code class="plaintext hljs"># apt-get install ssh</code> </pre> <br>  Bearbeiten von / etc / ssh / sshd_config.  Kommentiere die Zeile aus: <br><br><pre> <code class="plaintext hljs">ListenAddress 0.0.0.0</code> </pre> <br>  Autoload entsperren <br><br><pre> <code class="plaintext hljs"># systemctl enable ssh.service</code> </pre> <br>  Starten Sie den Dienst neu <br><br><pre> <code class="plaintext hljs"># systemctl restart ssh.service</code> </pre> <br>  Die IP-Adresse ermitteln wir mit dem Befehl <br><br><pre> <code class="plaintext hljs"># ifconfig</code> </pre> <br>  Und jetzt k√∂nnen wir vom Quellcomputer aus √ºber SSH eine Remoteverbindung zum Ger√§t herstellen (unter Windows mag ich den <b>PuTTY</b> SSH-Client pers√∂nlich), um die Konfiguration von einer praktischen Arbeitsstation aus vorzunehmen und in der Lage zu sein, die Texte aus diesem Artikel in configs zu kopieren und einzuf√ºgen.  Ich erinnere Sie daran, dass der Login <b>pi ist</b> , nicht root. <br><br><img src="https://habrastorage.org/webt/n7/rf/dp/n7rfdpupnveaxml-qs16hyjmmnw.png"><br><br>  Weitere Aktionen w√ºrde ich genau durch SSH empfehlen, sofern nicht anders angegeben. <br><br><h4>  2.6 Verschieben Sie fl√ºchtige Partitionen auf virtuelle Festplatten </h4><br>  Zum Beispiel <b>/ tmp</b> und <b>/ var / log</b> , um: <br><br><ol><li>  Das System hat keine SD-Karte gesch√§rft. </li><li>  Es bestand eine geringere Wahrscheinlichkeit, dass das Root-Dateisystem bei einem Stromausfall auseinanderfiel. </li><li>  Damit in ferner Zukunft die Protokolle nicht den freien Speicherplatz auf der Karte verstopfen. </li></ol><br>  F√ºgen Sie dazu Zeilen zu <b>/ etc / fstab hinzu</b> : <br><br><pre> <code class="plaintext hljs">tmpfs /var/log tmpfs defaults,noatime,nosuid,mode=0755,size=100m 0 0 tmpfs /tmp tmpfs defaults,noatime,nosuid,size=100m 0 0</code> </pre><br>  Vergessen Sie nicht, einen Zeilenumbruch am Ende der Datei einzuf√ºgen. <br><br>  Hier werden den Abschnitten <b>/ var / log</b> und <b>/ tmp</b> jeweils 100 MB Speicher zugewiesen (wird nur verwendet, wenn er voll ist).  Gigabyte Pi, das nur f√ºr RDP verwendet wird, wird diese Ausgaben nichts behindern. <br><br>  Starten Sie das System neu und f√ºhren Sie den folgenden Befehl aus: <br><br><pre> <code class="plaintext hljs"># df</code> </pre> <br>  und stellen Sie sicher, dass die Partitionen auf tmpfs gemountet sind (3 und 4 Spalten k√∂nnen unterschiedlich sein): <br><br><pre> <code class="plaintext hljs">tmpfs 102400 8 102392 1% /tmp tmpfs 102400 224 102176 1% /var/log</code> </pre><br><h4>  2.7 Wir erhalten den Benutzer, unter dem wir anschlie√üend automatisch die grafische Shell starten </h4><br>  F√ºhren Sie den Befehl aus: <br><br><pre> <code class="plaintext hljs"># adduser user</code> </pre> <br>  Legen Sie ein beliebiges Passwort fest.  Alle Arten von Namen und Telefonen k√∂nnen √ºbersprungen werden.  Best√§tige. <br><br><h4>  2.8 Installieren Sie X-Server in einer minimalen Version </h4><br>  F√ºhren Sie den Befehl aus: <br><br><pre> <code class="plaintext hljs"># apt-get install xserver-xorg xinit xterm x11-xserver-utils</code> </pre> <br>  Dies kann ungef√§hr 5 Minuten dauern. <br><br>  Jetzt m√ºssen Sie <u>am physischen Terminal sitzen</u> (im Sinne eines Monitors, einer Tastatur und einer Maus, die direkt mit dem Pi verbunden sind), sich als Benutzer user anmelden und den Befehl ausf√ºhren: <br><br><pre> <code class="plaintext hljs">$ startx</code> </pre> <br>  Das folgende Bild sollte auf dem Bildschirm angezeigt werden. Dies bedeutet, dass x-server erfolgreich installiert wurde und Sie fortfahren k√∂nnen. <br><br><img src="https://habrastorage.org/webt/c1/na/qb/c1naqbmygzqagi02s3dm5exinn0.png"><br><br>  Wir bewegen uns √ºber dem Cursor (es ist wichtig, dass kein Fenster einen Rahmen und einen Fenstertitel bildet und das Fenster einfach keinen Text ohne expliziten Fokus empf√§ngt) und tippen <br><br><pre> <code class="plaintext hljs">$ exit</code> </pre> <br>  zur√ºckkommen. <br><br><h4>  2.9 Installieren Sie die Software f√ºr die Arbeit mit dem Remotedesktop </h4><br>  Ich pers√∂nlich mag <b>rdesktop</b> .  Es ist nat√ºrlich nicht ohne Nuancen (siehe Abschnitt "Rechenextraktion").  Es gibt Alternativen wie <b>xfreerdp</b> , <b>remmina</b> usw., obwohl sie sich auch dar√ºber beschweren. <br><br>  Ich werde ein Beispiel f√ºr die erste geben. <br><br><pre> <code class="plaintext hljs"># apt-get install rdesktop</code> </pre> <br>  Erstellen Sie ein Skript, mit dem rdesktop im Vollbildmodus ausgef√ºhrt wird.  Erstellen <b>Sie</b> im Verzeichnis <b>/ home / user</b> die <b>runrdp-</b> Datei (vorzugsweise als Benutzer): <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash rdesktop &lt;  IP  &gt; -u &lt;   &gt; -f -z</span></span></code> </pre><br>  Wenn Sie einen anderen RDP-Client ausgew√§hlt haben, schreiben Sie hier die Befehlszeile daf√ºr oder verwenden Sie die Masse der zus√§tzlichen Parameter, die rdesktop hat.  Sie k√∂nnen das Passwort sogar fest codieren, um sich automatisch anzumelden. <br><br>  Sie m√ºssen die Berechtigungen zum Ausf√ºhren dieses Skripts festlegen. Wenn Sie es als Root erstellt haben, ist der Eigent√ºmer der Benutzer. <br><br><pre> <code class="plaintext hljs"># chmod 755 /home/user/runrdp # chown user:user /home/user/runrdp</code> </pre><br>  Gehen wir nun zur physischen Konsole unter Benutzer und starten Sie startx. Geben Sie in das ge√∂ffnete Grafikterminal (siehe Abbildung oben) Folgendes ein: <br><br><pre> <code class="plaintext hljs">$ ./runrdp</code> </pre> <br>  Das Fenster zum Herstellen einer Verbindung mit dem Remotedesktop sollte auf dem Bildschirm angezeigt werden. <br><br><img src="https://habrastorage.org/webt/av/mt/y8/avmty8dt4vclbpt5yrkw-3mmmlc.png"><br><br>  Wenn: <br><br>  a) Die Konsole zeigt etwas √ºber den CredSSP-Fehler an. <br>  b) Der Vollbildmodus in FullHD hinterl√§sst dunkle R√§nder (wie im Foto Nr. 4 in diesem Artikel, obwohl es einen Konsolenmodus gibt, aber Sie k√∂nnen die R√§nder sehen) <br>  Dann lesen Sie den Abschnitt Rake-Extraktion. <br><br>  Und wenn alles in Ordnung ist, brechen Sie die Systemanmeldung ab (Esc oder den Men√ºpunkt "Deaktivieren"), verlassen Sie das x-terminal, geben Sie exit ein und kehren Sie zur Konsole zur√ºck. <br><br><h2>  3. Automatisierung von Hebevorg√§ngen </h2><br>  Wenn alle vorherigen Schritte funktionieren, ist es Zeit, alles zusammenzusetzen. <br><br>  Zu diesem Zweck stellen wir sicher, dass sich der Benutzer beim Systemstart automatisch beim Terminal anmeldet, den X-Server startet und eine Verbindung mit dem darunter befindlichen RDP herstellt.  Aus diesem Grund wird das Kennwort nur f√ºr die RDP-Sitzung angefordert. Dies erspart unreifen Benutzern unn√∂tige Kenntnisse beim B√§ndigen von Linux. <br><br><h4>  3.1 Unendlich RDP </h4><br>  Erstellen wir ein Skript, das beim Starten des X-Servers endlos versucht, eine RDP-Sitzung zu √∂ffnen. <br>  Erstellen Sie dazu im Verzeichnis <b>/ home / user</b> eine Autorun-Datei am Anfang der X-Session <b>.xinitrc</b> mit folgendem Inhalt: <br><pre> <code class="bash hljs">setxkbmap -option terminate:ctrl_alt_bksp <span class="hljs-comment"><span class="hljs-comment">#    Ctrl-Alt-BkSpace setterm -blank 0 -cursor off #   xsetroot -solid gray #      while /bin/true; do ./runrdp done</span></span></code> </pre> <br><h4>  3.2 Unendlicher X-Server </h4><br>  Wir korrigieren ein Skript, das den automatischen Start von Programmen und Profileinstellungen w√§hrend der Konsolenanmeldung definiert, sodass die X-Sitzung automatisch gestartet wird, jedoch nur, wenn sich der Benutzer beim ersten Terminal anmeldet. <br><br><blockquote>  Vielen Dank an <a href="https://habr.com/ru/users/gecube/">gecube</a> , der mich daran erinnert hat, den Bildschirmschoner zu deaktivieren.  Standardm√§√üig handelt es sich um einen schwarzen Bildschirm, der f√ºr die meisten modernen Monitore eher sch√§dlich ist. </blockquote><br><br>  <b>Bearbeiten wir /home/user/.profile</b> und <u><b>f√ºgen dort</b></u> die folgenden Zeilen hinzu: <br><br><pre> <code class="bash hljs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DISPLAY</span></span></span><span class="hljs-string">"</span></span> ] &amp;&amp; [ $(tty) = <span class="hljs-string"><span class="hljs-string">"/dev/tty1"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> startx clear <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">" 5    "</span></span> sleep 5 <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre><br><h4>  3.3 Testen Sie einen Haufen </h4><br>  Wir starten Pi neu, setzen uns ans Terminal, melden uns als Benutzer user an.  Wir erhalten das Sitzungsstartfenster auf dem Bildschirm, wie in der Abbildung oben. <br><br>  Wir versuchen, die Eingabe des Passworts zu verweigern (esc oder abh√§ngig von der Windows-Version) - wir erhalten das gleiche Fenster zum Start der Sitzung (d. H. Unser Skript von 3.1 wird st√§ndig neu verbunden). <br><br>  Wir warten ungef√§hr eine Minute (abh√§ngig vom Server), ohne die Tastatur und die Maus zu ber√ºhren - das Fenster zum Starten der Sitzung sollte sich bald ausschalten (die RDP-Sitzung in der Phase der Passworteingabe ohne Aktivit√§t l√§uft in einem Timeout ab).  Es wird sich nat√ºrlich aufgrund von Abschnitt 3.1 wieder verbinden. <br><br>  Dr√ºcken Sie jetzt <b>Ctrl + Alt + BkSp</b> .  Sollte die X-Sitzung unterbrochen werden, wird eine Meldung mit einer Wartezeit von 5 Sekunden angezeigt, wonach auch die Konsolensitzung endet.  Der Bildschirm fordert Sie auf, das Terminal mit einem Benutzernamen und einem Passwort zu betreten. <br><br>  Wenn alles so ist - ausgezeichnet. <br><br>  Wir brauchen nur eine automatische Anmeldung am Terminal. <br><br><h4>  3.4 Unendlich leckeres, sich wiederholendes <s>Orange-</s> Autologin bei tty1 </h4><br>  Erstellen Sie dazu im Stammverzeichnis die Datei <b>/etc/systemd/system/getty@tty1.service.d/autologin.conf</b> mit dem folgenden Inhalt: <br><br><pre> <code class="plaintext hljs">[Service] ExecStart= ExecStart=-/sbin/agetty --autologin user --noclear %I 38400 linux</code> </pre><br>  Dann: <br><br><pre> <code class="plaintext hljs">#systemctl enable getty@tty1.service</code> </pre> <br>  Wir starten neu, stellen sicher, dass die physische Konsole automatisch als Benutzer angemeldet wird, der X-Server startet und die RDP-Sitzung ge√∂ffnet wird, und dann ist alles wie in 3.3. <br>  Dr√ºcken Sie Strg + Alt + BkSp, und warten Sie, bis die Verbindung wiederhergestellt ist. <br><br>  Wir betreten das System, testen das Schalten, die Arbeit der Layouts.  Wenn etwas nicht stimmt, siehe Abschnitt 4. <br><br>  <b>Damit ist die Einrichtung abgeschlossen.</b> <br><br>  Benutzer sollten darauf hingewiesen werden, dass sie bei einem Fehler (der Bildschirm wird dunkel, etwas friert ein usw.) zuerst die Tastenkombination Strg + Alt + BkSp dr√ºcken und auf die Reaktion warten m√ºssen. <br><br>  Siehe auch Abschnitt 5 zur automatischen USB-Einbindung. <br><br><h2>  4. Rechenextraktion </h2><br>  Da es sich um OpenSource handelt, ist die Rake-Extraktion ein verzweifelter und kontinuierlicher Prozess.  Ich werde versuchen, den wichtigsten m√∂glichen Schwader zu skizzieren, aber wer wei√ü, was uns erwartet.  Ich pers√∂nlich hatte nie Gl√ºck, und ohne stundenlanges Suchen hat f√ºr mich kein einziger Befehl funktioniert. <br><br><h4>  4.1 Probleme bei unvollst√§ndiger Nutzung der Bildschirmaufl√∂sung </h4><br>  Symptome: In einigen F√§llen (HDMI-DSUB-Adapter, einige Monitore) verwendet raspbian nicht die gesamte verf√ºgbare Aufl√∂sung eines Full-HD-Monitors.  Dunkle Felder verbleiben zwischen den relevanten Informationen und dem physischen Rand des Bildschirms. <br><br>  Es wird wie folgt gel√∂st: <br><br>  Bearbeite <b>/boot/config.txt</b> und finde die Zeile <br><br><pre> <code class="plaintext hljs"># disable_overscan = 1</code> </pre> <br>  und kommentiere es aus. <br><br>  Starten Sie neu. <br><br>  Jetzt sollten die dunklen Felder von den R√§ndern des Bildschirms sowohl im Konsolen- als auch im Grafikmodus entfernt werden. <br><br><h4>  4.2 Probleme mit dem Mauszeiger beim Anschlie√üen von rdesktop an moderne RDP-Server </h4><br>  Dies betrifft haupts√§chlich Windows 2012, 2016 und Windows 10, in denen das Cursorthema enthalten ist. <br><br>  Symptome: Der Cursor verschwindet, ist schlecht gezeichnet, nach dem Umschalten auf Nicht-Standard (Sanduhr, I-Symbol, Fensterverbreiterungspfeile usw.) wird vergessen, auf einen regul√§ren Pfeil umzuschalten. <br><br>  L√∂sung: Wechseln Sie als Benutzer des Servers, zu dem Sie eine Verbindung herstellen, √ºber das Bedienfeld zu den Eigenschaften der Maus, setzen Sie das Thema auf "Nein" zur√ºck und deaktivieren Sie die Schatten unter dem Mauszeiger. <br><br><img src="https://habrastorage.org/webt/ek/na/rc/eknarc92omul5c37i4ta4lfenmc.png"><br><br>  Cursor m√ºssen zum Gehorsam kommen. <br><br><h4>  4.3.  Codierungsprobleme mit rdesktop </h4><br>  Symptome: In einigen F√§llen werden √ºber die RDP-Verbindung Sonderzeichen auf dem Remotesystem falsch eingegeben: Tilden, Schr√§gstriche, Anf√ºhrungszeichen, Punkte, vertikale Sticks.  Fangen Sie besonders an, die Punkte zu ver√§rgern, weil sie h√§ufig getippt werden. <br><br>  L√∂sung: <br><br>  Erstellen Sie in <b>/ usr / share / rdesktop / keymaps</b> eine <b>Rohdatei</b> und f√ºllen Sie sie mit folgendem Inhalt: <br><br><pre> <code class="plaintext hljs">include common map 0x419 grave 0x29 asciicircum 0x07 shift backslash 0x2b bar 0x2b shift apostrophe 0x28 greater 0x34 shift less 0x33 shift</code> </pre><br>  F√ºgen Sie der Eingabeaufforderung rdesktop im Skript <b>/ home / user / runrdp das</b> Argument <b>-k raw</b> <b>hinzu</b> .  Zum Beispiel: <br><br><pre> <code class="bash hljs">rdesktop 10.0.0.1 -u user -k raw</code> </pre> <br>  Starten Sie die Sitzung auf dem Terminal mit Strg + Alt + BkSp neu oder starten Sie den Pi generell neu. <br><br>  Geben Sie RDP ein, testen Sie alle Sonderzeichen, einschlie√ülich  Mit der Umschalttaste in der Zahlenzeile der Tastatur und den Seitentasten links und rechts neben dem Buchstabenbereich, mit und ohne Umschalttaste (Anf√ºhrungszeichen, Doppelpunkte, Satzzeichen, Sticks usw.).  Alles sollte funktionieren. <br><br><h4>  4.4.  Wenn Sie versuchen, rdesktop zu starten, wird die Sitzung nicht ge√∂ffnet und der Fehler CredSSP in der Konsole angezeigt </h4><br><pre> <code class="bash hljs">CredSSP: Initialize failed, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> you have correct kerberos tgt initialized ? Failed to connect, CredSSP required by server.</code> </pre><br>  Das Zielsystem erfordert einen modernen Client-Authentifizierungsalgorithmus, den rdesktop normalerweise nicht kann. <br><br>  L√∂sungsoptionen: <br><br><ol><li>  Deaktivieren Sie die Serverauthentifizierung, indem Sie die Sicherheitseinstellungen verringern.  Grunds√§tzlich sollte dies in Umgebungen, in denen Pi versucht, RDP als Client zu verwenden, kein zu gro√ües Sicherheitsproblem darstellen. </li><li>  Verwenden Sie einen anderen Client, z. B. freerdp, remmina, und ersetzen Sie den Inhalt des runrdp-Skripts durch die Startzeile dieses Clients. </li><li>  Installiere und konfiguriere den Kerberos-Client, aber irgendwie ist dort alles kompliziert.  Wenn Sie es versuchen m√∂chten, <a href="https://github.com/rdesktop/rdesktop/issues/71" rel="nofollow">beginnen Sie hier</a> . </li></ol><br><h4>  4.5.  Schalten Sie das Ger√§t ein und aus </h4><br>  Raspberry Pi hat keine Abschalttaste.  Das ist schlecht.  Es stellt sich heraus, dass es keine effektive M√∂glichkeit gibt, es ein- und auszuschalten.  Es wurde viel dar√ºber geschrieben, ich werde versuchen, es kurz zusammenzufassen: <br><br><ol><li>  Einerseits k√∂nnen wir das Ger√§t √ºberhaupt nicht ausschalten, sondern nur den Monitor ausschalten.  Genau genommen ist alles erledigt, wo ich das RPi abgelegt habe.  Im Allgemeinen erw√§rmt sich das Ger√§t fast nicht, verbraucht keinen Strom und macht keine Ger√§usche.  Vor dem Verlassen des Monitors wird der Benutzer ausgeschaltet. </li><li>  Sie k√∂nnen die Nachtabschaltung von Cron konfigurieren, aber um das RPi am Morgen einzuschalten, muss der Benutzer den Draht oder das Netzteil unter Kontrolle bringen. </li><li>  Sie k√∂nnen dieses Problem l√∂sen, indem Sie ein USB-Versorgungskabel mit einem offenen Knopf kaufen (um das RPi einzuschalten, m√ºssen Sie den Stromkreis nur kurz mit einem Knopf √∂ffnen).  120 Rubel ist alles ein Vergn√ºgen.  In diesem Fall wird das automatische Herunterfahren jedoch genauso ausgef√ºhrt wie der Absturz des Ger√§ts.  Angesichts der Tatsache, dass wir die fl√ºchtigen Partitionen auf tmpfs verschoben haben, ist es wahrscheinlich unwahrscheinlich, dass es Probleme geben wird, aber dennoch ist niemand sicher, dass der Benutzer am Morgen aufgrund des Zusammenbruchs von rootfs nicht angemeldet wird.  Es hat sozusagen nicht geklappt, die L√∂sung "festgenagelt". </li><li>  Es gibt L√∂sungen mit einer zus√§tzlichen Taste, die im GPIO-Anschluss enthalten ist und das Ger√§t vorsichtig (auf die richtige Weise) ein- und ausschaltet.  Aber Kollektivwirtschaften bauen auf - es gilt Stunden zu verbringen und die Produktionskosten zu erh√∂hen. </li><li>  F√ºr das RPi gibt es jedoch sogar ein Geh√§use mit einem eingebauten Knopf (die Chinesen haben alles).  Aber ich pers√∂nlich habe es noch nicht ausprobiert. </li><li>  Ich denke dar√ºber nach, das Ger√§t √ºber einen Unterbrecher im USB-Kabel einzuschalten und es √ºber eine vom Systemdienst √ºberwachte Tastenkombination (z. B. Strg + Alt + Umschalt + P) auszuschalten. Diese L√∂sung ist jedoch nicht m√∂glich. </li></ol><br><h4>  4.6 Mehrere Wiederverbindungen zum RDP-Server </h4><br>  Im aktuellen Schema stellt das Clientger√§t √ºber das RDP-Protokoll eine Verbindung zum Server her, zeigt das Anmelde- und Kennworteingabefenster an. Wenn der Benutzer nichts eingibt, wird die Sitzung nach einiger Zeit zur√ºckgesetzt und der RDP-Client wird erneut gestartet. <br><br><blockquote>  In den Kommentaren <a href="https://habr.com/ru/users/Mnemonik/">teilte</a> der <a href="https://habr.com/ru/users/Mnemonik/">Mnemonik-</a> Benutzer mit <a href="https://habr.com/ru/post/479504/">,</a> dass Windows Server bei mehreren dauerhaften Wiederverbindungen nicht mehr <a href="https://habr.com/ru/users/Mnemonik/">gen√ºgend Arbeitsspeicher</a> zur Verf√ºgung <a href="https://habr.com/ru/users/Mnemonik/">stehe</a> , und gab ein Beispiel zur L√∂sung des Problems. <br></blockquote><br>  Ich werde meins bringen.  Das Skript .xinitrc wird so ge√§ndert, dass nach Abschluss des n√§chsten rdesktop-Vorgangs ein modales Dialogfeld auf dem Bildschirm angezeigt wird, das den Neustart verhindert, bis auf die Schaltfl√§che OK geklickt wird. <br><br>  Dazu k√∂nnen Sie die normale xmessage verwenden, die im xorg-Paket enthalten ist, aber die von ihr erstellten Fenster sind so h√§sslich, dass mein Monitor knackt.  Dar√ºber hinaus ist diese Anwendung nicht mit der russischen Sprache vertraut, und das Einschalten ist eine weitere Aufgabe. <br><br>  Ich bin beeindruckt von gxmessage, ohne diesen Nachteil, aber es zieht GTK und 25 Megabyte an anderen Abh√§ngigkeiten, die ich auch nicht mag.  Nun, w√§hlen wir ein kleineres √úbel: <br><pre> <code class="plaintext hljs">apt-get install gxmessage</code> </pre> <br>  √Ñndern Sie das Skript .xinitrc: <br><pre> <code class="bash hljs">setxkbmap -option terminate:ctrl_alt_bksp <span class="hljs-comment"><span class="hljs-comment">#    Ctrl-Alt-BkSpace setterm -blank 0 -cursor off #   xsetroot -solid gray #      while /bin/true; do ./runrdp gxmessage --center " OK      RDP" done</span></span></code> </pre> <br>  Jetzt wird zwischen den Verbindungsversuchen von rdesktop mit dem Server eine entsprechende Meldung auf unserem Bildschirm angezeigt, und der Server wird nicht st√§ndig bombardiert. <br><br>  Nachdem Sie das Skript problemlos beendet haben, k√∂nnen Sie die Netzwerkverf√ºgbarkeit des Servers vorab √ºberpr√ºfen und eine Meldung zum erneuten Herstellen der Verbindung anzeigen, wenn keine Kommunikation besteht. <br><br><h4>  4.7 NTP konfigurieren </h4><br><blockquote>  Vielen Dank an <a href="https://habr.com/ru/users/gecube/">gecube</a> , der mich an diesen Moment erinnert hat.  Theoretisch kann die Zeit auf dem Ger√§t mit der Zeit "vergehen", was zu Schwierigkeiten bei der Authentifizierung und m√∂glicherweise zu anderen Problemen f√ºhren kann. <br></blockquote>  Um dieses kleine Problem zu beheben, sollten Sie das Programm ntpdate installieren und bei cron eine Task registrieren, um die Uhrzeit st√ºndlich zu aktualisieren (das Ger√§t ben√∂tigt Internetzugang): <br><br><pre> <code class="plaintext hljs"># apt-get install ntpdate # echo "0 * * * * root ntpdate pool.ntp.org" &gt; /etc/cron.d/ntp</code> </pre><br>  Wenn Sie einen lokalen NTP-Server in Ihrem Netzwerk haben, ersetzen Sie den Hostnamen durch Ihren eigenen. <br><h2>  5 Optional: Anschlie√üen, Trennen und Weiterleiten von USB-Ger√§ten </h2><br>  Tats√§chlich umfasst dieser Abschnitt zwei entscheidende Phasen.  Erstens, um USB-Ger√§te so zu verwalten, dass deren automatische Bereitstellung und zumindest einigerma√üen benutzergesteuertes Entfernen sichergestellt ist.  Und zweitens leiten Sie die angeschlossenen Ger√§te an das Terminal weiter, damit sie √ºber das Netzwerk erreichbar sind. <br><br><h4>  5.1.  Automount-Setup </h4><br>  Plug-in-USB-Ger√§te mit Dateisystemen werden in Unterverzeichnissen des Verzeichnisses / media bereitgestellt.  Wir leiten dann dasselbe Verzeichnis an rdesktop weiter. <br><br>  Wir brauchen das pmount-Paket. <br><br><pre> <code class="plaintext hljs"># apt-get install pmount.</code> </pre> <br>        udev,        . <br><br>  <b>/etc/udev/rules.d</b>   <b>80-usbstick.rules</b>   : <br><br><pre> <code class="plaintext hljs">ACTION=="add", KERNEL=="sd[az][0-9]", TAG+="systemd", ENV{SYSTEMD_WANTS}="usbstick-handler@%k"</code> </pre><br>     systemd. <br><br>  <b>/lib/systemd/system</b>   <b>usbstick-handler@.service</b>   : <br><br><pre> <code class="plaintext hljs">[Unit] Description=Mount USB sticks BindsTo=dev-%i.device After=dev-%i.device [Service] Type=oneshot RemainAfterExit=yes ExecStart=/usr/bin/pmount --umask 000 --noatime -w --sync /dev/%i /media/%i ExecStop=/usr/bin/pumount /dev/%i</code> </pre><br>  <b>/usr/local/bin</b>   <b>unmount-devices</b>   : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for folder in /media/*; do pumount $folder echo "Unmounted $folder" done</span></span></code> </pre><br>     . <br><br><pre> <code class="plaintext hljs">#chmod 755 unmount-devices</code> </pre> <br>   user   plugdev,       (pumount        ) <br><br><pre> <code class="plaintext hljs"># adduser user plugdev</code> </pre> <br> .    ,      USB  -,   ,   /media    sda1  .,       -. <br><br>     ‚Äîsync, ,  ,       ,        ,       . <br><br>    ( ,  ,        Windows    ). <br><br>     Pi , ,   /media/sda1  . <br>  unmount-devices    user. sda1  /media  ,     ,          Windows. <br><br><h4> 5.2   /media  RDP     </h4><br>  <b>/home/user/runrdp</b>    rdesktop   : <br><br><pre> <code class="bash hljs">rdesktop ‚Ä¶... -r disk:USB=/media/</code> </pre> <br>   <b>/home/user/.profile</b> ,   unmount-devices. <br><br><pre> <code class="bash hljs">... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DISPLAY</span></span></span><span class="hljs-string">"</span></span> ] &amp;&amp; [ $(tty) = <span class="hljs-string"><span class="hljs-string">"/dev/tty1"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> startx clear unmount-devices <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">" 5    "</span></span> sleep 5 <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre><br> . <br><br> ,     RDP-,      Pi USB-,    ,     ,     . <br><br><img src="https://habrastorage.org/webt/vu/l_/qu/vul_quyi50ig54vjbewcwgpa83w.png"><br><br>      ,      (sda1-xx, sdb1-xx  ..) <br><br>     ,   Ctrl+Alt+BkSp.    (    -   ,    ),      (   <b></b>   )     5      RDP. <br> ,  ,           ,      .       . <br><br>      . <br><br><h2> 6.     Rpi </h2><br><h4> 6.    </h4><br>    ,   ,       .   ,        . <br>  SD- (  16- )  -,    USB- Raspberry. <br><br>        ,    <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># unmount-devices</span></span></code> </pre> <br>       SD-, ,  ,    /media/sdxx. <br><br>    lsblk     : <br><br><pre> <code class="plaintext hljs">sda 8:0 1 14.6G 0 disk ‚îî‚îÄsda1 8:1 1 14.6G 0 part mmcblk0 179:0 0 7.4G 0 disk ‚îú‚îÄmmcblk0p1 179:1 0 256M 0 part /boot ‚îî‚îÄmmcblk0p2 179:2 0 7.2G 0 part /</code> </pre><br> <b>sda</b>     ,  <b>mmcblk0</b> ‚Äì . <br> : <br><br><pre> <code class="plaintext hljs">dd if=/dev/mmcblk0 of=/dev/sda bs=4M</code> </pre> <br>   ,      ( 8 ). <br><br>      Raspberry,   ,     runrdp,    . <br><br><h4> 6.    </h4><br> , ,   ,   ,  ,   . - ,  ,  .. ‚Äî   ,   Windows 10,    Microsoft,         RPi    . <br>     ,      SD-   2  ()  (1977614336 ). ,       1966080000 ,        SD-. <br><br>   : <br> 1)   <a href="https://dropmefiles.com/ljUGS" rel="nofollow"> </a> (MD5: 0B5033A9CA12BA8299340BC482111998)    . <br> 2)    SD-, ,  ,    1.2. <br> 3)  ,       Ctrl+Alt+F2    . <br>    pi,  111. : <br><br><pre> <code class="plaintext hljs">$ sudo bash</code> </pre> <br> 4)    1.4, 2.1, ,    ( ping, ). <br> 5)  raspi-config,   Advanced Options,  Expand Filesystem (        SD- ) <br> 6)  /home/user/runrdp,    ¬´¬ª    IP-  ,    ¬´user¬ª   ,       . <br> 7)      . <br><br><h2>  Fazit </h2><br>   ,   . ,    - . <br>  ,       .    , ,       . <br><br> PS 11.12.2019.   (gecube, Mnemonik, mkovalevskyi, SannX)    .  : <br><ul><li>    ; </li><li>   NTP; </li><li>          RDP- ‚Äî    messagebox  . </li></ul><br>  ,    ,   RPi3,     RPi4 Model B 1Gb.     - . ,      RPi 4,       . <br><br>   ,    (.  6.),     ,    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479504/">https://habr.com/ru/post/de479504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479488/index.html">Von einem Laptop - ein Heimserver mit redundanter Stromversorgung f√ºr den Mikrotik-Router</a></li>
<li><a href="../de479492/index.html">Serverloses Rechnen basierend auf OpenWhisk, Teil 3</a></li>
<li><a href="../de479496/index.html">Analysieren von WTF-Aufgaben in JavaScript</a></li>
<li><a href="../de479498/index.html">Wie aus linearer Zeit Windows in O (n¬≤) wird</a></li>
<li><a href="../de479502/index.html">Wie √ºberlebt man die schwerste Eiszeit der Erdgeschichte?</a></li>
<li><a href="../de479508/index.html">PostgreSQL Antipatterns: sch√§dliche JOINs und ORs</a></li>
<li><a href="../de479510/index.html">PocketBook X Test - ein riesiges 10,3-Zoll-Leseger√§t mit einem E-Ink-Carta-Mobius-Bildschirm und einem Metallgeh√§use</a></li>
<li><a href="../de479512/index.html">MVCC in PostgreSQL-4. Schnappsch√ºsse</a></li>
<li><a href="../de479514/index.html">Datenschutz durch Design und Datenschutz durch Standard (Datenschutz durch Design und Datenschutz durch GDPR)</a></li>
<li><a href="../de479516/index.html">Was ist Entropie in Software und wie verwaltet man sie?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>