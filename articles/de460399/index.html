<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙏🏼 🔓 👷🏼 SVG-Ladeanzeige auf Vue.js. 🧜🏼 👩‍👩‍👧 🖕🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! Ich studiere am Frontend und entwickle parallel dazu im Trainingsprojekt SPA auf Vue.js für das Backend, das Daten vom Suchbot sammelt. Der Bot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SVG-Ladeanzeige auf Vue.js.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460399/"><p>  Hallo!  Ich studiere am Frontend und entwickle parallel dazu im Trainingsprojekt SPA auf Vue.js für das Backend, das Daten vom Suchbot sammelt.  Der Bot generiert 0 bis 500 Einträge, und ich muss: hochladen, nach den angegebenen Kriterien sortieren, in der Tabelle anzeigen. </p><br><p>  Weder das Backend noch der Bot können Daten sortieren, daher muss ich alle Daten herunterladen und auf der Browserseite verarbeiten.  Das Sortieren ist sehr schnell, aber die Download-Geschwindigkeit hängt von der Verbindung ab, und die angegebenen 500 Datensätze können von 10 bis 40 Sekunden geladen werden. </p><br><p>  Beim Laden zeigte ich zunächst einen Spiner, dessen Nachteil darin besteht, dass der Benutzer nicht weiß, wann der Download beendet wird.  In meinem Fall ist die Anzahl der Datensätze, die der Bot gefunden hat, im Voraus bekannt, sodass Sie anzeigen können, wie viele Prozent der Datensätze geladen sind. </p><br><p> Um das Warten auf den Benutzer zu erleichtern, habe ich beschlossen, ihm den Ladevorgang zu zeigen: </p><br><ol><li>  Ziffern - wie viele Prozent der Datensätze sind bereits geladen </li><li>  Zeitplan - Ladezeit jedes Datensatzes </li><li>  Füllung -% Last.  Da das Diagramm beim Laden einen rechteckigen Block ausfüllt, ist klar, welcher Teil des Blocks noch gefüllt werden muss </li></ol><br><p>  Hier ist die Animation des Ergebnisses, das ich angestrebt und erhalten habe: </p><br><img src="https://habrastorage.org/webt/-o/wr/mc/-owrmchonzxft0kpoabdeumz2tm.gif"><br><p>  ... meiner Meinung nach hat es sich als lustig herausgestellt. </p><br><p>  In dem Artikel werde ich Ihnen Schritt für Schritt zeigen, wie Sie zum Ergebnis gelangen.  Ich habe vor dem Dorf keine Funktionsgraphen im Browser gezeichnet, daher brachte mir die Entwicklung des Indikators einfache, aber neue Erkenntnisse über die Verwendung von SVG und Vue. </p><br><a name="habracut"></a><br><h3>  Auswählen einer Canvas- oder SVG-Rendering-Methode </h3><br><p>  Ich habe <em>Canvas</em> in einem einfachen Schlangenspiel auf JS und SVG verwendet. In einem Projekt habe ich es einfach in die Seite mit dem <em>Objekt-</em> Tag eingefügt und festgestellt, dass SVG-Bilder beim Skalieren immer die Schärfe behalten (deshalb war es ein Vektor) und <em>Canvas</em> beobachtet hat Bild verwischen.  Aufgrund dieser Beobachtung habe ich beschlossen, ein Diagramm mit SVG zu zeichnen, da Sie irgendwann beginnen müssen. </p><br><h3>  Arbeitsplan </h3><br><p>  Basierend auf dem ausgewählten Vue-Framework und der ausgewählten Methode zur Bilderzeugung mit SVG habe ich mir den folgenden Arbeitsplan erstellt: </p><br><ol><li>  Suchen und studieren Sie Informationen zum Thema Verwendung von SVG mit Vue </li><li>  Experimente zur Bildung und Veränderung von SVG im Kontext von Vue </li><li>  Prototyp-Ladeanzeige </li><li>  Zuordnung der Ladeanzeige zu einer separaten Vue-Komponente </li><li>  Anwendung der Komponente im SPA </li></ol><br><h3>  Erste Schritte </h3><br><ol><li><div class="spoiler">  <b class="spoiler_title">Erstellen eines Projektrohlings</b> <div class="spoiler_text"><p>  Ich habe <em>vue cli installiert</em> .  Um ein neues Projekt zu <em>erstellen, gebe</em> ich an der Eingabeaufforderung <em>vue create loadprogresser ein</em> , wähle <em>standardmäßig</em> die Projekteinstellungen aus, ein neues vue-Projekt mit dem Namen loadprogresser wird erstellt, und entferne dann das Unnötige daraus: </p><br><div class="scrollable-table"><table><tbody><tr><td align="center">  War </td><td align="center">  Ist geworden </td></tr><tr><td align="center"><img src="https://habrastorage.org/webt/ff/dx/gz/ffdxgzse2s6oqmujajql_cz-qjc.png" width="25%"><br><p>  Standardmäßig Projektstruktur </p><br></td><td align="center"><img src="https://habrastorage.org/webt/ju/7o/xw/ju7oxwnd0bt6ygl47di54eyiccq.png" width="50%"><br><p>  Die Struktur nach der "Reinigung" </p><br></td></tr><tr><td align="center"><img src="https://habrastorage.org/webt/db/vd/cz/dbvdczqbvxc4oi1mswth75ofpo0.png" width="50%"><br><p>  Grüße aus Vue </p><br></td><td align="left"><pre><code class="plaintext hljs">&lt;template&gt; &lt;div&gt; &lt;h1&gt;Progresser&lt;/h1&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default {name: 'app'} &lt;/script&gt;;</code> </pre> <br><p>  Mein Text ist "Progresser" in App.vue </p><br></td></tr></tbody></table></div><br></div></div><br></li><li><h4>  Suchen und studieren Sie Informationen zum Thema SVG in Verbindung mit Vue </h4><br><p>  Tolle Seite mit nützlichen Informationen zu HTML, CSS und SVG <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">css.yoksel.ru</a> Ein gutes Beispiel für SVG finden Sie in der Dokumentation von Vue selbst. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SVG-Diagramm Beispiel</a> und ein solcher <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> .  Basierend auf diesen Materialien wurde die minimale Komponentenvorlage mit SVG geboren, von der ich ausgehe: </p><br><pre> <code class="plaintext hljs">&lt;template&gt; &lt;div class="wrapper"&gt; &lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"&gt; //svg    //   svg- &lt;/svg&gt; &lt;/div&gt; &lt;/template&gt;</code> </pre><br></li><li><h4>  Experimente zur Bildung und Veränderung von SVG im Kontext von Vue </h4><br><h5>  SVG Rechteck Rect </h5><br><p>  rect - ein Rechteck, die einfachste Figur.  Ich erstelle SVG mit den Abmessungen 100x100px und zeichne ein Rechteck mit den Anfangskoordinaten 25:25 und den Größen 50x50px. Die Standardfüllfarbe ist Schwarz (kein Styling). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h5>  SVG-Styling und Hover-Pseudoklasse: </h5><br><p>  Ich werde versuchen, das Rechteck rect in svg zu stylen.  Dazu füge ich die Klasse "sample" zu svg hinzu. Im Stilabschnitt der vue-Datei füge ich die Stile .sample rect (ich färbe das rechteckige Rechteck mit gelb ein) und .sample rect: hover hinzu, die das rect-Element stilisieren, wenn Sie den Mauszeiger darüber halten: </p><br><div class="spoiler">  <b class="spoiler_title">Quellcode</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">25</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">25</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50px"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'app'</span></span> } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt; &lt;style&gt; .sample rect { fill: yellow; stroke: green; stroke-width: 4; transition: all 350ms; } .sample rect:hover { fill: gray; } &lt;/</span></span>style&gt;</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">JSfiddle-Implementierung</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><p>  Fazit: svg passt perfekt in die Template-Vue-Datei und ist mit den vorgeschriebenen Styles gestaltet.  Ein Anfang wurde gemacht! </p><br><h5>  SVG-Pfad als Basis des Indikators </h5><br><p>  In diesem Abschnitt werde ich rect durch path ersetzen, <code>&lt;path :d="D" class="path"/&gt;</code> im d-Attribut des path-Tags. Ich werde die Zeichenfolge D mit den Koordinaten des Pfades von vue übergeben.  Die Verbindung wird über <code>v-bind:d="D"</code> , was abgekürzt wird als <code>:d="D"</code> </p><br><p>  Linie D = „M 0 0 0 50 50 50 50 0 Z“ zeichnet drei Linien mit den Koordinaten 0: 0-&gt; 0: 50-&gt; 50: 50-&gt; 0:50 und schließt die Kontur mit dem Befehl Z und bildet ab 50x50px ein Quadrat Koordinate 0: 0.  Bei Verwendung des Pfadstils erhält die Form eine gelbe Füllfarbe und einen grauen Rand von 1 Pixel. </p><br><div class="spoiler">  <b class="spoiler_title">Gelbe Pfadquelle</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> &lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"D"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"path"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'app'</span></span>, data(){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">D</span></span>:<span class="hljs-string"><span class="hljs-string">"M 0 0 0 50 50 50 50 0 Z"</span></span> } } } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt; &lt;style&gt; .path { fill:yellow; stroke:gray; } &lt;/</span></span>style&gt;</code> </pre><br></div></div><br></li><li><h4>  Prototyp-Ladeanzeige </h4><br><p>  In der Minimalversion habe ich ein einfaches Diagramm erstellt.  Ein SVG-Container mit einer Höhe von 100 Pixel und einer Breite von 400 Pixel wird in die Vorlage eingefügt. Darin wird ein Pfad-Tag platziert, zu dessen Attribut d ich die generierte Pfadzeichenfolge d aus den Vue-Daten hinzufüge, die wiederum aus dem TimePoints-Array gebildet wird, in dem jeweils eines von 400 hinzugefügt wird Breite des Containers) eine Zufallszahl im Bereich von 0 bis 100. Alles ist einfach. Im erstellten Lebenszyklus-Hook wird die Aktualisierungsmethode aufgerufen, bei der neue (zufällige) Punkte über die addTime-Methode zum Diagramm hinzugefügt werden. Anschließend gibt die getSVGTimePoints-Methode eine Zeichenfolge zurück, die an PATH übertragen werden soll setTimeout startet die Aktualisierungsmethode neu </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Mehr zur Stringbildung für PATH </h4><br><p>  Die Zeichenfolge für PATH wird in der Methode getSVGTimePoints aus dem Array timePoints gebildet, das ich mit reduziere.  Als Anfangswert für "Reduzieren" verwende ich "M 0 0" (Beginn bei Koordinate 0: 0).  Bei der Reduzierung werden der Linie neue Paare der <u>relativen</u> Koordinaten dX und dY hinzugefügt.  Der Großbuchstabe "l" ist dafür verantwortlich, dass die Koordinaten relativ sind (das große "L" gibt die absoluten Koordinaten an), nachdem "l" durch Leerzeichen getrennt dX und dann dY platziert wurde.  In diesem Prototyp bewegt sich dY = 1 (Inkrement um 1 Pixel) in Zukunft entlang der X-Achse I mit dem Inkrement dX, das aus der Breite des Containers und der Anzahl der Punkte berechnet wird, die darin platziert werden müssen.  In der letzten Zeile der PATH-Generierung <br> <code>path +=`L ${this.timePoints.length} 0`</code> <br>  Ab dem letzten Punkt beende ich den Bau der Linie zur X-Achse. Wenn Sie die Kontur schließen müssen, können Sie am Ende der Linie „Z“ hinzufügen. Zuerst dachte ich, dass die resultierende Zahl ohne eine geschlossene Kontur nicht gefüllt (gefüllt) werden würde, aber dies stellte sich als falsch heraus. Wenn es nicht geschlossen ist, wird kein Strich gezeichnet. </p><br><pre> <code class="javascript hljs">getSVGTimePoints:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> predY = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> path = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timePoints.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str, item</span></span></span><span class="hljs-function">)=&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dY = item - predY predY = item <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">`l 1 </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${dY}</span></span></span><span class="hljs-string"> `</span></span> },<span class="hljs-string"><span class="hljs-string">'M 0 0 '</span></span>) path +=<span class="hljs-string"><span class="hljs-string">`L </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.timePoints.length}</span></span></span><span class="hljs-string"> 0`</span></span><span class="hljs-comment"><span class="hljs-comment">// Z`     return path },</span></span></code> </pre><br><p>  Ich werde weiterhin Änderungen vornehmen.  Mein Indikator sollte in Breite und Höhe skaliert werden, damit alle übertragenen Punkte in den angegebenen Container passen.  Wenden Sie sich dazu an das DOM und ermitteln Sie die Abmessungen des Containers </p><br><ol><li><h5>  Informationen zu einem DOM-Element abrufen </h5><br><p>  Dem div-Container (in den svg eingefügt ist) füge ich eine Wrapper-Klasse hinzu, um Breite und Höhe durch Stile zu übergeben.  Und damit svg den gesamten Containerraum einnimmt, setzt es seine Höhe und Breite auf 100%.  RECT nimmt wiederum den gesamten Containerraum ein und ist der Hintergrund für PATH </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loadprogresser"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"black"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Um meinen DIV-Container im virtuellen DOM Vue zu finden, füge ich das ref-Attribut hinzu und gebe ihm einen Namen, unter dem ich <code>ref="loadprogresser"</code> suchen <code>ref="loadprogresser"</code> .  Im <code>mounted</code> Lifecycle-Hook rufe ich die Methode getScales () auf, bei der ich mit der Zeichenfolge <code>const {width, height} = this.$refs.loadprogresser.getBoundingClientRect()</code> die Breite und Höhe des DIV-Elements finde, nachdem es im DOM angezeigt wird. </p><br><p>  Weitere einfache Berechnungen des Inkrements entlang der X-Achse, abhängig von der Breite des Containers und der Anzahl der Punkte, die in ihn eingefügt werden sollen.  Die Skala entlang der Y-Achse wird jedes Mal neu berechnet, wenn das Maximum im übertragenen Wert gefunden wird. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></li><li><h5>  transformieren - Ändere das Koordinatensystem </h5><br><p>  In diesem Stadium stelle ich fest, dass das Koordinatensystem so geändert werden muss, dass die 0: 0-Koordinate in der unteren linken Ecke beginnt und die Y-Achse nach oben und nicht nach unten wächst.  Sie können natürlich Berechnungen für jeden Punkt durchführen, aber SVG verfügt über ein Transformationsattribut, mit dem Sie Koordinaten transformieren können. </p><br><p>  In meinem Fall muss ich eine Skala von -1 auf die Y-Koordinaten anwenden (damit die Y-Werte festgelegt werden) und den Ursprung auf die <u>Minus-</u> Containerhöhe verschieben.  Da die Höhe des Containers beliebig sein kann (über Stile angegeben), mussten wir im <code>mounted</code> Hook eine Koordinatentransformationslinie mit dem folgenden Code bilden: <code>this.transform = `scale( 1, -1) translate(0,${-this.wrapHeight})`</code> </p><br><p>  Die auf PATH allein angewendete Transformation funktioniert jedoch nicht. Dazu müssen Sie PATH in eine Gruppe (g-Tag) einschließen, auf die Koordinatentransformationen angewendet werden: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:transform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transform"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"black"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Infolgedessen wurden die Koordinaten korrekt umgekehrt, und die Download-Anzeige kam dem Design näher </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></li><li><h5>  SVG-Text und Textzentrierung </h5><br><p>  Der Text wird benötigt, um% load anzuzeigen.  Die vertikale und horizontale Platzierung von Text in der Mitte in SVG ist recht einfach zu organisieren (im Vergleich zu HTML / CSS). Attribute helfen (ich schreibe sofort die Werte) dominant-baseeline = "central" und text-anchor = "middle". </p><br><p>  Text in SVG wird mit dem entsprechenden Tag angezeigt: </p><br> <code>&lt;text x="50%" y="50%" dominant-baseline="central" text-anchor="middle"&gt;{{TextPrc}}&lt;/text&gt;</code> <br> <p>  Dabei ist TextPrc die Bindung an die entsprechende Variable, berechnet durch ein einfaches Verhältnis der erwarteten Anzahl von Punkten zum übertragenen Betrag <code>this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %`</code>  <code>this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %`</code> . </p><br><p>  Die Koordinaten des Anfangs x = "50%" y = "50%" entsprechen der Mitte des Containers, und die Attribute "Dominante Grundlinie" und "Textanker" sind dafür verantwortlich, dass der Text vertikal und horizontal ausgerichtet wird. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Grundlegende Dinge zum Thema wurden ausgearbeitet, jetzt müssen wir den Indikatorprototyp in einer separaten Komponente auswählen. </p><br></li></ol><br><br></li><li><h4>  Zuordnung der Ladeanzeige zu einer separaten Vue-Komponente </h4><br><p>  Zunächst werde ich die Daten bestimmen, die ich an die Komponente übertragen werde. Dies sind: maxSamples - die Anzahl der Samples bei 100% Breite und Point - die Dateneinheit (Punkt), die in das Array von Punkten eingegeben wird (basierend darauf, dass sie nach der Verarbeitung gebildet werden Zeitplan).  Die vom Elternteil an die Komponente übertragenen Daten platziere ich im Requisitenbereich </p><br><pre> <code class="javascript hljs">props:{ <span class="hljs-attr"><span class="hljs-attr">maxSamples</span></span>: {<span class="hljs-comment"><span class="hljs-comment">//-   100%-  type: Number, default: 400 }, Point:{//  value:0 } }</span></span></code> </pre><br><h5>  Reaktivitätsprobleme </h5><br><p>  Die berechnete Eigenschaft getPath ist dafür verantwortlich, dass der an die Komponente übergebene neue Punkt verarbeitet wird, was von Point abhängt (und wenn dies der Fall ist, wird er neu berechnet, wenn sich Point ändert). </p><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// ... &lt;path :d="getPath"/&gt; ... //  props:{ ... Point:{ value:0 } //  computed:{ getPath(){ this.addValue({value:this.Point.value}) return this.getSVGPoints()//this.d } },</span></span></code> </pre><br><p>  Zuerst habe ich einen Punkt vom Typ Nummer gemacht, was logisch ist, aber dann wurden nicht alle Punkte verarbeitet, sondern nur von den vorherigen unterschieden.  Wenn beispielsweise nur die Nummer 10 vom übergeordneten Punkt auf einen solchen Punkt übertragen wird, wird nur ein Punkt in der Tabelle gezeichnet. Alle nachfolgenden Punkte werden ignoriert, da sie sich nicht von den vorherigen unterscheiden. </p><br><p>  Das Ersetzen des Punkttyps von Number durch das Objekt {value: 0} führte zum gewünschten Ergebnis - die berechnete Eigenschaft getPath () verarbeitet nun jeden übertragenen Punkt über Point.value. Ich übergebe die Werte der Punkte </p><br><div class="spoiler">  <b class="spoiler_title">Progresser.vue-Komponentenquelle</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"loadprogresser"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"wrapper__content"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:transform</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"transform"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"getPath"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dominant-baseline</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"central"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">text-anchor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"middle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{TextPrc}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">props</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">maxSamples</span></span>: {<span class="hljs-comment"><span class="hljs-comment">//-   100%-  type: Number, default: 400 }, Point:{ value:0 } }, data(){ return { Samples:0,//   wrapHeight:100,//      maxY:0,//  Y  (  ) scales:{ w:1,//   (   ) h:1 //   //(   Y   ) }, Points:[],//     (  Point.value) transform:'scale( 1, -1) translate(0,0)', TextPrc: '0%' } }, mounted: function(){ this.getScales() }, methods:{ getScales(){ const {width, height} = this.$refs.loadprogresser.getBoundingClientRect() //.    this.scales.w = width / this.maxSamples //  Y    this.wrapHeight = height this.transform = `scale( 1, -1) translate(0,${-this.wrapHeight}) rotate(0)` }, getVScale(){//    this.scales.h = (this.maxY == 0)? 0 : this.wrapHeight / this.maxY }, //          getYMax({value = 0}){ this.maxY = (value &gt; this.maxY) ? value : this.maxY }, addValue({value = 0}){ if (this.Samples &lt; this.maxSamples) { this.getYMax({value}) this.getVScale() this.Points.push(value) // Int this.Samples ++; this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %` } }, getSVGPoints(){ //    Path let predY = 0 let path = this.Points.reduce((str, item)=&gt;{ let dY = (item - predY) * this.scales.h predY = item return str + `l ${this.scales.w} ${dY} ` },'M 0 0 ') path +=`L ${this.Points.length * this.scales.w} 0 `// Z`     return path }, }, computed:{ getPath(){ this.addValue({value:this.Point.value})//   return this.getSVGPoints()//this.d -  SVG PATH } } } &lt;/script&gt; &lt;style scoped&gt; .wrapper { width: 400px;/*     */ height: 100px;/*  ( )   */ font-size: 4rem; font-weight: 600; border-left: 1px gray solid; border-right: 1px gray solid; overflow: hidden; } .wrapper__content path { opacity: 0.5; fill: lightgreen; stroke: green; stroke-width: 1; } .wrapper__content text { opacity: 0.5; } &lt;/style&gt;</span></span></code> </pre><br></div></div><br><h5>  Aufruf von der übergeordneten Komponente und Übergabe von Parametern </h5><br><p>  Um mit einer Komponente zu arbeiten, müssen Sie sie in die übergeordnete Komponente importieren <br> <code>import Progresser from "./components/Progresser"</code> <br>  und im Abschnitt deklarieren <br> <code>components: {Progresser }</code> </p> <br><p>  In die Vorlage der übergeordneten Komponente wird die Progresser-Indikator-Komponente mit der folgenden Konstruktion eingefügt: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Über die Klasse „Progreser“ werden zunächst die Blockgrößen des Indikators eingestellt.  MaxSamples (maximale Anzahl von Punkten im Diagramm) aus der übergeordneten Variablen SamplesInProgresser werden an die Komponenten-Requisiten übertragen, und der nächste Punkt (in Form eines Objekts) aus der Punktvariablen des übergeordneten Objekts wird an den Requisitenpunkt übertragen.  Der Punkt des Elternteils wird in der Aktualisierungsfunktion berechnet und repräsentiert zunehmende Zufallszahlen.  Ich bekomme dieses Bild: </p><br><img src="https://habrastorage.org/webt/um/rb/y4/umrby4sqxabfzgz_ng1lnk6xgcy.gif"><br><div class="spoiler">  <b class="spoiler_title">App.vue übergeordnete Quelle</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/template&gt; &lt;script&gt; import Progresser from "./</span></span>components/Progresser<span class="hljs-string"><span class="hljs-string">" export default { name: 'app', data(){ return { SamplesInProgresser:400,// -  Point:{value:0},//"</span></span><span class="hljs-string"><span class="hljs-string">" index:0, // -   TimeM:100 //     } }, created: function () { this.update() }, methods:{ update(){ if (this.index &lt; this.SamplesInProgresser) { this.index++; this.Point = {value:(this.TimeM*Math.random() | 0)} this.TimeM *= 1.01 setTimeout(this.update, 0) } } }, components: { Progresser } } &lt;/script&gt; &lt;style&gt; #app { font-family: 'Avenir', Helvetica, Arial, sans-serif; margin-top: 60px; } /*     */ .progresser { width: 300px; height: 80px; } &lt;/style&gt;</span></span></code> </pre><br></div></div><br></li><li><h4>  Anwendung der Komponente im SPA </h4><br><p>  An den Punkt kommen, an dem alles lag.  Daher habe ich asynchrone Vorgänge zum Laden von Datensätzen über bestimmte Identitäten aus der Datenbank.  Die Ausführungszeit einer asynchronen Operation ist nicht im Voraus bekannt.  Ich werde die Ausführungszeit auf triviale Weise mit new Date (). GetTime () vor und nach der Operation messen und die resultierende Zeitdifferenz auf die Komponente übertragen.  Natürlich wird der Indikator in den Block eingebaut, der beim Laden angezeigt wird, und verdeckt die Tabelle, für die die Daten geladen werden. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getCandidatesData(){ ... this.LoadRecords = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ,        ... this.SamplesInProgresser = uris.length //      ... for (let item of uris) {// uris  URL    try { const start = new Date().getTime()//   candidate = await this.$store.dispatch('GET_CANDIDATE', item) const stop = new Date().getTime()//   this.Point = {value:(stop-start)}//   Point ...</span></span></code> </pre><br><p>  In den Daten der übergeordneten Komponente verschreibe ich in Bezug auf die Lastangabe: </p><br><pre> <code class="javascript hljs">data (){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ... <span class="hljs-comment"><span class="hljs-comment">//  LoadRecords:false, SamplesInProgresser:400, Point:{value:0} }</span></span></code> </pre><br><p>  Und in der Vorlage: </p><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wait_loading"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-show</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LoadRecords"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li></ol><br><h4>  Schlussfolgerungen </h4><br><p>  Wie vorhergesagt, nichts kompliziertes.  Bis zu einem gewissen Punkt können Sie SVG als reguläre HTML-Tags mit eigenen Besonderheiten behandeln.  SVG ist ein leistungsstarkes Tool, das ich jetzt häufiger in meiner Arbeit zur Datenvisualisierung verwenden werde </p><br><h4>  Referenzen </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laden Sie den Indikator-Quellcode herunter</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Svg-Pfad Artikel</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460399/">https://habr.com/ru/post/de460399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460383/index.html">Bildschirmübergänge in Legend of Zelda verwenden die undokumentierten Funktionen von NES</a></li>
<li><a href="../de460387/index.html">SELinux Anfängerleitfaden</a></li>
<li><a href="../de460393/index.html">Hintergrund: Was erwartet Sie von Fedora Silverblue?</a></li>
<li><a href="../de460395/index.html">Analytics als Feature: Der Prozess der Arbeit mit Daten in Plesk</a></li>
<li><a href="../de460397/index.html">Schnellstart mit WebComponents</a></li>
<li><a href="../de460403/index.html">Vor- und Nachteile von HugePages</a></li>
<li><a href="../de460405/index.html">Warum brauchst du versteckte Spielmechaniken?</a></li>
<li><a href="../de460409/index.html">Arduino und Keyboards (vollständige Anleitung)</a></li>
<li><a href="../de460411/index.html">Mad Converter GIF'ok zu animierten Aufklebern für Telegramm</a></li>
<li><a href="../de460413/index.html">7 nützliche Websites und Anwendungen zum Lernen von Englisch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>