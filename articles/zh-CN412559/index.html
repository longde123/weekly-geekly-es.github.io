<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍂 💅🏻 🧒🏻 智能合约对区块链初创公司构成安全威胁 🧐 🚂 😨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="根据官方网站 ，以太坊智能合约“完全按照程序执行，没有停机，审查，欺诈或第三方干扰的可能性”。 今天，在研究了智能合约用户在实践中面临的一些问题之后，我将尝试找出所有事实是否真的如此乐观。 


 在文章的最后，我总结了我的想法，并提供了编写安全智能合约的简要指南。 



 备注 


1. 本文...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>智能合约对区块链初创公司构成安全威胁</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/solarsecurity/blog/412559/"><p> 根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方网站</a> ，以太坊智能合约“完全按照程序执行，没有停机，审查，欺诈或第三方干扰的可能性”。 今天，在研究了智能合约用户在实践中面临的一些问题之后，我将尝试找出所有事实是否真的如此乐观。 </p><br><p> 在文章的最后，我总结了我的想法，并提供了编写安全智能合约的简要指南。 </p><br><p><img src="https://habrastorage.org/webt/tm/km/3c/tmkm3czjvvcrgcylejipvz9f4oa.png" alt="图片"></p><a name="habracut"></a><br><h2 id="remarki"> 备注 </h2><br><ol><li> 本文仅关注以太坊智能合约。 社区已默认将智能合约与以太坊智能合约进行标识。 同时，第一个更多的是概念，第二个是实现，可以讨论该实现如何满足该概念的问题（以及原则上智能合约的概念以及其他可能的实现）。 这个主题很复杂，被低估并且很有趣，但这不是本文的主题，因此我将推荐<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">对Nick Szabo</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">作品</a>感兴趣的人。 因此，在更远的地方，我所说的“智能合约”实际上是指“以太坊智能合约”。 </li><li> 本文将仅关注最流行的智能合约Solidity的语言，而对于以太坊用户而言，实际上是目前唯一的语言。 </li></ol><br><h2 id="problemy-bezopasnosti-smart-kontraktov"> 智能合约安全性问题 </h2><br><p> 这将与智能合约的开发者最终面临的问题有关，而不是与平台本身的安全性有关（尽管有一些有关）。 我们通常将这些问题分为以下几种类型： </p><br><ol><li> 智能合约代码中的问题； </li><li> 开发过程中的问题； </li><li> 语言问题； </li><li> 概念上的问题。 </li></ol><br><h3 id="1-problemy-v-kode-smart-kontrakta">  1.智能合约代码中的问题 </h3><br><p> 这里的智能合约代码中的问题，是指通过编辑.sol文件可以解决的问题。 特别是： </p><br><ul><li> 已知的易受攻击的构造（例如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">重新进入</a> ）。 <br>  <u>生命示例</u> ：重新进入，或更广泛地说，是违反了Checks-Effects-Interactions模式-甚至在新合同中仍然发现了广为人知（并且以前<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">被利用过的</a> ）的漏洞。 </li><li>作者的易受攻击的构造（尤其是代码逻辑中的错误）。 <br>  <u>生活示例</u> ：实际上不是MultiSig的MultiSig钱包。 为了签署交易并转移资金，您需要钱包所有者的签名数量等于<code>required</code> 。 同时，为了更改<code>required</code> （例如，一个人，以便进一步自己签署交易），仅所有者之一的签名就足够了： </li></ul><br><p><img src="https://habrastorage.org/webt/aq/_l/1o/aq_l1oidjbyqkeo4km8uciij6ag.png" alt="图片"><br><img src="https://habrastorage.org/webt/v7/lw/bo/v7lwbog3xrhkuzfq-vcgsp6jp88.png" alt="图片"></p><br><ul><li> 糟糕的架构。 <br>  <u>生活示例</u> ：尝试在单个合同中实现令牌，钱包和密钥库。 合同变得过于复杂，代码难以维护，审核，修改。 结果，安全性也受到损害。 </li><li> 低质量代码。 <br>  <u>寿命示例</u> ：具有不同缩进，任意换行符和空格的合同。 该代码很难阅读，这意味着安全性再次受到损害。 尽管事实上已经有短绒<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">棉</a> （ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Solium</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Solhit</a> ）。 </li></ul><br><p><img src="https://habrastorage.org/webt/px/7t/p_/px7tp_clvkugmymx3sfbiglshcw.png" alt="图片"><br><img src="https://habrastorage.org/webt/jh/kc/fx/jhkcfxrd23sw_bfiyfvgb4od3h8.png" alt="图片"></p><br><p> 代码中的问题直接导致攻击和资金损失。 好消息是，可以在审核过程中识别并解决代码问题。 重要的是要了解它们的来源，以便将来避免它们。 因此，我们继续下一段。 </p><br><h3 id="2-problemy-v-processe-razrabotki">  2.开发过程中的问题 </h3><br><p> 代码中的问题主要是由错误构建的开发过程引起的。 看起来，软件开发是一项经过长期研究并拥有公认最佳实践的业务。 然而，智能合约领域的年轻人，不成比例的巨额资金和炒作导致人们事实上出于某种原因而忽视了标准程序，这通常会导致严重的问题。 最典型的是，值得一提： </p><br><ul><li>  TK：大多数以太坊智能合约都是在没有技术任务的情况下编写的。 为此会导致不必要的解释。 </li><li> 时间：平均来说，用于开发的时间很少，大约一个月。 我的实践中有一个极端的例子：客户要求开发人员在ICO前三天写一份智能合约。 </li><li> 开发人员级别：很多人进入该领域，包括完全没有编程背景的人。 </li><li> 了解生态系统：即使有背景，开发人员通常也不会完全沉浸在该主题中，也不了解智能合约的细节。 </li><li> 开发成本：但是，编写智能合约的人很少。 写得好的人更少了。 因此，开发成本过高。 </li></ul><br><h3 id="3-problemy-v-yazyke">  3.语言上的问题 </h3><br><p> 将tar添加到Solidity本身的语言中。 最初，它的创建更多是为了使其可以被大量人员快速掌握，而不是为了方便在其上编写安全的智能合约。 以下是一些会干扰安全性的功能： </p><br><ul><li>  <code>using for</code> ， <code>call</code> / <code>delegate call</code>多重继承-所有这些都不从当前源启动代码，这意味着它降低了可读性，并因此降低了代码安全性。 </li><li>  Checks-Effects-Interactions模式-如果违反CEI的构造不安全，那么为什么不仅仅在语言级别上禁止它们（以及许多其他构造）？ </li><li> 通过调用另一个合约，您可能突然陷入其后备功能，从而产生意想不到的后果。 </li></ul><br><p> 显然，以太坊项目正在开发中，不可能事先考虑所有因素。 但是最后，开发人员被迫记住许多功能，并使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">拐杖</a>使他们的智能合约变得安全。 </p><br><h3 id="4-problemy-v-koncepcii">  4.概念中的问题 </h3><br><p> 但是，最严重的问题甚至更深层次-许多人还不够了解为什么需要智能合约，它们可以做什么，不能做什么以及如何工作。 在最坏的情况下，这导致以下事实：智能合约： </p><br><ol><li><p> 不聪明： </p><br><ul><li> 写得不好-做的是写的，但不是写的。 </li><li> 它与后端和/或前端紧密相连-此代码不再是智能合约，它以通常的方式执行，并且其实现完全由服务器管理员控制。 </li></ul><br></li><li><p> 不是合约： </p><br><ul><li> 它没有记录当事方的义务-例如，ICO出售其代币以太坊，但代币实质上是糖果包装，因为 不要对发布它们的人施加任何限制或义务。 </li><li> 允许单方面更改-事实证明，当事方之一可以在合同签订后更改合同。 <br><br>  <u>生命示例</u> ：合同的所有者可以任意更改代币销售的资本化，比率和持续时间： <br><br><img src="https://habrastorage.org/webt/ed/yg/me/edygmenuif3ox1rks29xna0w_ai.png" alt="图片"></li></ul><br></li><li><p> 不需要： </p><br><ul><li> 添加智能合约并不是因为它在技术上是必要的，而是在于试图弄清楚如何使用智能合约并大肆宣传。 </li><li> 我们试图弄清楚如何将智能合约与现有产品联系在一起。 <br><br><img src="https://habrastorage.org/webt/vz/sp/dk/vzspdktp77hjgk7ntmbbpau5qzm.png" alt="图片"></li></ul><br></li></ol><br><h2 id="smart-kontrakt-kak-ugroza-bezopasnosti-blokcheyn-startapa"> 智能合约对区块链初创公司构成安全威胁 </h2><br><p> 结果如何？ 他们希望它成为一种时尚，安全的区块链，但是我们得到了昂贵的不受支持的代码，这些代码威胁了安全性，根本不需要。 我们希望智能合约“完全按程序执行，不会出现停机，审查，欺诈或第三方干预的可能性”，最后，它们实际上是按编写的方式执行的-仅在存在漏洞的情况下编写。 对我们而言，剩下的就是挥舞笔头。 好吧，或者如果以太坊的创建者由于该漏洞而蒙受了损失，或者<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">做出艰难的决定</a> （从而实际上抹黑了最初的想法本身）。 </p><br><p><img src="https://habrastorage.org/webt/sn/x5/zv/snx5zvymhlnhuavsagciubxbrfc.png" alt="图片"></p><br><h2 id="kak-pisat-bezopasnye-smart-kontrakty"> 如何编写安全的智能合约 </h2><br><p> 实际上，当然，一切还不错。 我只是夸大其词，以引起我对某些重要观点的注意。 总的来说，该领​​域正在发展，人们正在学习，包括安全。 </p><br><p> 如果读者决定写一份智能合约，我建议： </p><br><ul><li> 了解为什么需要智能合约（以及是否需要）； </li><li> 从客户那里接收或写TK； </li><li> 计算时间； </li><li> 使用开发和测试工具（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">松露</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Remix</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SmartCheck</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Solhint</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Solium linter</a> ）； </li><li> 编写测试； </li><li> 进行几次独立的审核和赏金； </li><li> 监视项目其余部分（网站，Twitter等）的安全性。 </li></ul><br><p> 遵循这些简单的建议，您可以避免上面描述的大多数问题（但是，通过硬分叉，还是不能解决）。 </p><br><p> 该文章是与Eugene Marchenko（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">eMarchenko</a> ）共同创建的。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN412559/">https://habr.com/ru/post/zh-CN412559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN412549/index.html">相同类型的方法？ 别写了</a></li>
<li><a href="../zh-CN412551/index.html">通过ADB将文本从剪贴板复制到Android设备</a></li>
<li><a href="../zh-CN412553/index.html">2018年6月IT领域人力资源专业人员的事件摘要</a></li>
<li><a href="../zh-CN412555/index.html">无刷电机的磁性齿轮</a></li>
<li><a href="../zh-CN412557/index.html">如何在没有编程技能的情况下创建自己的机器人并将其连接到Yandex.Alice</a></li>
<li><a href="../zh-CN412561/index.html">使用闪烁的“ rhino”示例对设备固件进行反向工程。 第二部分</a></li>
<li><a href="../zh-CN412565/index.html">关于系统管理员的漫画：所有的生命在我眼前闪过</a></li>
<li><a href="../zh-CN412571/index.html">Kubernetes在生产中的成功案例。 第9部分：CERN和210 K8s机群</a></li>
<li><a href="../zh-CN412573/index.html">Geektimes返回Habr有什么问题</a></li>
<li><a href="../zh-CN412575/index.html">每年，流行音乐变得越来越单调，因为同一个人组成了流行音乐</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>