<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍⚖️ 🙎 📶 Cara mengurangi konsumsi modul wifi hingga sepuluh kali atau lebih 🥪 🎑 🏩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari yang baik untuk semua orang !!! 

 Artikel ini terutama berkaitan dengan modul ESP8266 yang populer (ESP8285). 

 Baru-baru ini, di salah satu fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara mengurangi konsumsi modul wifi hingga sepuluh kali atau lebih</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480316/"> Hari yang baik untuk semua orang !!! <br><br>  Artikel ini terutama berkaitan dengan modul ESP8266 yang populer (ESP8285). <br><br>  Baru-baru ini, di salah satu forum saya ditanya pertanyaan tentang protokol ESP-NOW.  Akibatnya, saya memutuskan untuk berbicara tentang cara mengurangi konsumsi sensor dan aktuator yang bekerja melalui WiFi, termasuk ESP8266, khususnya, Sonoff. <br><a name="habracut"></a><br>  Pertama, esensi masalah yang dipecahkan. <br><br>  Dalam solusi klasik tentang WiFi, Anda harus menggunakan router khusus, atau smartphone atau perangkat dalam mode titik akses. <br><br>  Prosedur untuk menghubungkan dan mengirimkan data tanpa tarian khusus dengan rebana di ESP8266 adalah dari 1 hingga 4 detik.  Dalam hal ini, konsumsi saat ini setidaknya 70 mA. <br><br>  Saat menggunakan daya baterai, seperti sensor suhu, mode tidur nyenyak digunakan.  Perangkat secara berkala bangun, mengirim data, dan tertidur. <br><br>  Berdasarkan pengalaman saya, saya dapat mengatakan bahwa waktu aktivitas ESP8266 dapat dikurangi menjadi 0,1-0,13 detik. <br><br>  Selain itu, bagian penting dari waktu ini adalah waktu operasi bootloader: dari 0,08 detik hingga 0,1 detik, tetapi wifi belum dinyalakan pada saat itu, dan karenanya konsumsi saat ini rata-rata 25 mA. <br><br>  Saya menggunakan interval ini untuk memeriksa pengisian baterai. <br>  Jika tidak ada biaya yang cukup untuk komunikasi, saya mengirim perangkat untuk tidur lagi. <br>  Saya menggunakan waktu ini untuk memeriksa pembacaan sensor dan membandingkannya dengan rentang nilai yang diberikan. <br><br>  Jika di koridor, maka kirim perangkat untuk tidur lagi. <br>  Dengan demikian, pengiriman data yang tidak perlu berkurang secara signifikan. <br><br>  Sebagai aturan, dalam proyek-proyek seperti "rumah pintar", nonsen atau unit bir, stasiun cuaca cuaca, perlu untuk mengukur suhu dan menghidupkan dan mematikan bola lampu relay, pompa, mesin. <br>  Untuk mengontrol perangkat tersebut dan mendapatkan data suhu atau tekanan pada smartphone atau perangkat lain, beberapa byte sudah cukup. <br><cut></cut><br>  Sehubungan dengan ESP8266 di Internet, ada beberapa cara untuk mengurangi waktu aktivitas perangkat dalam mode transfer data melalui WiFi. <br><br>  <b>Opsi 1:</b> Gunakan TCP / IP dan alamat IP tetap. <br>  Yang pertama untuk ESP8266 dibuat oleh pvvx. <br>  Kekurangan: Penggunaan SDK buatan sendiri. <br>  Waktu aktivitas dari 0,54 detik. <br><br>  <b>Opsi 2:</b> Saya adalah orang pertama yang menggunakan metode ini untuk waktu yang lama, tetapi saya tidak menemukannya di internet saat ini. <br>  Menggunakan protokol UDP, memperbaiki parameter koneksi dalam RAM RTC, menonaktifkan DHCP. <br>  Keuntungan: SDK standar tanpa kruk, panjang paket hingga 64 ribu. <br>  Waktu aktivitas dari 0,25 detik. <br><br>  <b>Opsi 3:</b> Protokol ESP-NOW. <br>  Kekurangan: sulitnya pemahaman oleh amatir, kebutuhan untuk menggabungkan dengan protokol wifi untuk bertukar data dengan smartphone. <br>  Keuntungan: SDK standar, tanpa kruk, panjang paket hingga 512 byte. <br>  Waktu aktivitas: dari 0,13 detik (bootloader standar);  0,1 (bootloader khusus) <br><br>  <b>Opsi 4:</b> Solusi CNLohr berdasarkan pvvx SDK buatan sendiri dan penggunaan paket mentah. <br>  Perbedaan dari solusi ESP-NOW adalah bahwa paket yang ditransmisikan lebih kecil, tetapi protokol WiFi digunakan. <br>  Kerugian: sangat sulit untuk dikuasai oleh amatir, tidak dapat diimplementasikan dalam lingkungan Arduino, itu membutuhkan perubahan pada perangkat lunak router. <br>  Waktu aktivitas: seperti pada opsi 3. <br><br>  <b>Opsi 5:</b> Metode universal untuk jaringan pribadi berbasis WiFi. <br>  Tidak ada kruk.  Mudah diimplementasikan pada Arduino, perangkat lunak standar. <br>  Ini dapat digunakan tidak hanya untuk ESP. <br>  Itu tidak memerlukan router. <br>  Kekurangan: panjang paket 4 byte <br>  Waktu aktivitas: seperti pada opsi 3 dan 4. <br><br>  Metode: <br>  Di jaringan lokal, kami menggunakan alamat MAC khusus. <br>  Bita pertama alamat, misalnya, 0x36. <br>  Byte kedua alamat menunjukkan nomor perangkat. <br>  3,4,5,6 byte berisi informasi yang dikirimkan. <br>  Akibatnya, untuk menerima informasi yang dikirimkan, hanya perlu melengkapi koneksi. <br>  Waktu untuk mentransfer data adalah nol, karena kami mendapatkan data pada saat koneksi. <br><br>  Perwujudan metode arduino ini dapat <a href="https://github.com/HarringayMakerSpace/sonoff-adhoc" rel="nofollow">dihapus di sini</a> . <br><br>  Dalam contoh di atas, hanya varian dari metode transfer data ini yang diterapkan. <br><br>  Ini tidak memiliki mode tidur nyenyak.  Oleh karena itu, penghematan energi di dalamnya hanya karena nol waktu untuk transfer informasi.  Pemancar hanya berfungsi ketika terhubung dan arus naik ke 300 mA hanya 2-4 ms. <br><br>  Untuk mendapatkan efek penghematan penuh dengan salah satu opsi, perlu menerapkan mode tidur nyenyak dengan cara standar. <br><br>  Dengan demikian, dalam opsi 3 hingga 5, pengoperasian unit WiFi tidak lebih dari 0,04 detik. <br>  Pada saat itulah konsumsi saat ini bervariasi dari 70 hingga 300 mA. <br>  Sisa waktu, konsumsi ESP8266 saat ini tidak lebih dari 20 mA. <br>  Akibatnya, alih-alih mengonsumsi energi untuk satu sesi 70 mA * s, kami mendapatkan sekitar 3 mA * s. <br>  Mereka yang berharap dapat lebih akurat menghitung penghematan untuk perangkat tertentu. <br><br>  <b>Saya akan menjelaskan lebih detail opsi 2</b> . <br>  Saat keluar dari depp-sleep, ada tiga opsi untuk menghubungkan ke WiFi untuk pengiriman pesan. <br><br>  1) login dan kata sandi - nilai baru. <br>  Waktu koneksi dan transmisi pesan UDP adalah 4 detik. <br><br>  2) login, kata sandi dan IP disimpan di RTC. <br>  Waktu koneksi dan transmisi pesan UDP adalah 1,2 detik. <br><br>  3) login, kata sandi, IP, simpan di RTC dan nonaktifkan dhcp. <br>  Waktu koneksi dan transmisi pesan UDP adalah 0,25 detik. <br><br>  Waktu dihitung dengan memperhitungkan waktu operasi bootloader, <br>  yaitu 0,12 detik dalam boot standar. <br>  Jika kita menulis ulang bootloader, maka waktu dapat dikurangi lagi dengan tambahan 0,04-0,06 detik. <br><br>  Dengan demikian, jika kita menyimpan login, kata sandi dan IP dalam RTC, maka masa pakai baterai meningkat 3 kali lipat daripada tanpa menyimpan.  Metode penghematan ini dikenal di Internet dan digunakan oleh banyak orang. <br><br>  Tetapi jika Anda menonaktifkan DHCP, masa pakai baterai akan meningkat sekitar 13 kali. <br>  Itulah tepatnya yang saya lakukan, tetapi saya belum melihat solusi seperti itu di Internet. <br><br>  Semua sukses menghemat energi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id480316/">https://habr.com/ru/post/id480316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id480296/index.html">Pengembangan reaktif bot Telegram</a></li>
<li><a href="../id480300/index.html">Pada 2011, masalah apakah Nginx milik Igor Sysoev atau Rambler</a></li>
<li><a href="../id480304/index.html">Ketik inferensi dalam jscodeshift dan TypeScript</a></li>
<li><a href="../id480306/index.html">Mengapa mengalahkan pintu yang tertutup?</a></li>
<li><a href="../id480310/index.html">Detektif Habra: rahasia editor berita</a></li>
<li><a href="../id480318/index.html">Pilihan acara gratis mendatang untuk pengembang di Moskow # 3 (16-24 Desember)</a></li>
<li><a href="../id480320/index.html">Sepuluh tahun ONYX di Rusia - bagaimana teknologi, pembaca, dan pasar telah berubah selama ini</a></li>
<li><a href="../id480324/index.html">Implementasi Tipe String di CPython</a></li>
<li><a href="../id480326/index.html">F5 Networks Corporation mengirimkan surat kepada pelanggannya untuk memberi tahu mereka tentang situasi saat ini dengan NGINX</a></li>
<li><a href="../id480328/index.html">Bagaimana cara berteman PyTorch dan C ++. Menggunakan TorchScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>