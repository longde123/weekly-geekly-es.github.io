<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ ğŸ”­ â˜¸ï¸ åœ¨ä¸ä½¿ç”¨Zextrasçš„æƒ…å†µä¸‹é…ç½®å®Œæ•´å’Œå•ç‹¬çš„Zimbra OSEå¤‡ä»½å’Œæ¢å¤ ğŸ…°ï¸ ğŸ£ ğŸ‘£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1.ä»å“ªé‡Œå¼€å§‹ 
 å¤‡ä»½ä»å“ªé‡Œå¼€å§‹ï¼Ÿ è§„åˆ’ã€‚ åœ¨å¤‡ä»½ä»»ä½•ç³»ç»Ÿæ—¶ï¼Œæ‚¨éœ€è¦åˆ¶å®šä¸€ä¸ªå¤‡ä»½è®¡åˆ’ï¼šç¡®åˆ‡åœ°è¯´ï¼Œè¦å­˜å‚¨å¤šå°‘æ—¶é—´ï¼Œè¦å­˜å‚¨å¤šé•¿æ—¶é—´ï¼Œæ˜¯å¦ä¼šæœ‰è¶³å¤Ÿçš„å¯ç”¨ç©ºé—´ï¼Ÿ ä»è¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸­ï¼Œä¸»è¦é—®é¢˜çš„ç­”æ¡ˆå¦‚ä¸‹-å¦‚ä½•å¤‡ä»½ï¼Ÿ 

 å¦‚æœæœ‰å¾ˆå¤šå¯ç”¨ç©ºé—´ï¼Œåˆ™å¯ä»¥å­˜å‚¨æ•´ä¸ªè™šæ‹Ÿæœºã€‚ æŒ‰è®¡åˆ’ä½¿ç”¨ç›¸åŒçš„Veeamè¿›è¡Œå¤‡ä»½ï¼Œè€Œä¸ç”¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨ä¸ä½¿ç”¨Zextrasçš„æƒ…å†µä¸‹é…ç½®å®Œæ•´å’Œå•ç‹¬çš„Zimbra OSEå¤‡ä»½å’Œæ¢å¤</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439728/"><img src="https://habrastorage.org/webt/tl/fg/oj/tlfgoj8_4wwdpcdcj5n8ndx2pu0.png" alt="å›¾ç‰‡"><br><br><h3>  1.ä»å“ªé‡Œå¼€å§‹ </h3><br> å¤‡ä»½ä»å“ªé‡Œå¼€å§‹ï¼Ÿ è§„åˆ’ã€‚ åœ¨å¤‡ä»½ä»»ä½•ç³»ç»Ÿæ—¶ï¼Œæ‚¨éœ€è¦åˆ¶å®šä¸€ä¸ªå¤‡ä»½è®¡åˆ’ï¼šç¡®åˆ‡åœ°è¯´ï¼Œè¦å­˜å‚¨å¤šå°‘æ—¶é—´ï¼Œè¦å­˜å‚¨å¤šé•¿æ—¶é—´ï¼Œæ˜¯å¦ä¼šæœ‰è¶³å¤Ÿçš„å¯ç”¨ç©ºé—´ï¼Ÿ ä»è¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸­ï¼Œä¸»è¦é—®é¢˜çš„ç­”æ¡ˆå¦‚ä¸‹-å¦‚ä½•å¤‡ä»½ï¼Ÿ <br><br> å¦‚æœæœ‰å¾ˆå¤šå¯ç”¨ç©ºé—´ï¼Œåˆ™å¯ä»¥å­˜å‚¨æ•´ä¸ªè™šæ‹Ÿæœºã€‚ æŒ‰è®¡åˆ’ä½¿ç”¨ç›¸åŒçš„Veeamè¿›è¡Œå¤‡ä»½ï¼Œè€Œä¸ç”¨è€ƒè™‘å›°éš¾ã€‚ ä½†æ˜¯å¯¹äºæˆ‘æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§æµªè´¹ï¼Œæˆ‘ä¹ æƒ¯äº†å°½å¯èƒ½ç®€æ´ï¼Œç»æµåœ°å®Œæˆæ‰€æœ‰å·¥ä½œã€‚ å½“ç„¶ï¼Œæˆ‘å·²ç»éƒ¨ç½²äº†Veeamï¼Œä½†æˆ‘åªä¸ºé‚£äº›å¾ˆé•¿æ—¶é—´æ— æ³•ä»å¤‡ä»½ä¸­éƒ¨ç½²æˆ–å­˜åœ¨é—®é¢˜çš„ç³»ç»Ÿåˆ¶ä½œå¤‡ä»½å‰¯æœ¬ã€‚ <br><br> å…³äºè™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·çš„è„šæœ¬ï¼Œæˆ‘å°†ä»…ä¿æŒæœ‰æ„ä¹‰çš„æ²‰é»˜ã€‚ <br><br>  Zimbraæœ‰ä¸€ä¸ªzmmailboxå·¥å…·ã€‚ è€Œä¸”ï¼Œåœ¨ä»”ç»†æ£€æŸ¥äº†å®ƒçš„åŠŸèƒ½ä¹‹åï¼Œæˆ‘æ„è¯†åˆ°è¿™å¯¹æˆ‘æ¥è¯´ç»°ç»°æœ‰ä½™ã€‚ ä»–ç”šè‡³å¯ä»¥åœ¨å®æ—¶ç³»ç»Ÿä¸Šå¤‡ä»½å’Œè¿˜åŸé‚®ç®±ã€‚ æˆ‘å–œæ¬¢å°†å…³é”®é‚®ç®±ä¸æ•´ä¸ªç³»ç»Ÿçš„å¤‡ä»½åˆ†å¼€å¤‡ä»½çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œå¤‡ä»½æ‰€å ç”¨çš„ç©ºé—´å°†å—åˆ°å­˜æ¡£é‚®ç®±å¤§å°ä¹˜ä»¥â€œå¤‡ä»½æ·±åº¦â€å¤©æ•°çš„é™åˆ¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å®¹é‡ä¹˜ä»¥ç›¸åŒå¤©æ•°çš„é™åˆ¶ã€‚ æ­¤å¤–ï¼Œåœ¨Zimbraçš„æƒ…å†µä¸‹ï¼Œä»æ•´ä¸ªç³»ç»Ÿçš„å¤‡ä»½ä¸­æ¢å¤éå¸¸å›°éš¾ã€‚ è®¾ç½®ç³»ç»Ÿåï¼Œç«‹å³ä½¿ç”¨Veeamæˆ–è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼ˆHyper-Vï¼ŒESXIï¼Œè¾“å…¥æ‰€éœ€çš„è™šæ‹Ÿæœºï¼‰å¤åˆ¶è™šæ‹Ÿæœºï¼Œå¹¶å°†å…¶â€œæ”¾åœ¨æ¶å­ä¸Šâ€è¦å®¹æ˜“å¾—å¤šï¼Œè¿™æ ·ï¼Œåœ¨å…³é”®æ—¶åˆ»ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿéƒ¨ç½²å‡ ä¹æ²¡æœ‰é‡é‡çš„VMå¹¶ä¸Šä¼ åœ¨å®ƒçš„ç®±å­å¤‡ä»½ã€‚ æˆ‘è®¤ä¸ºï¼Œè¿™åœ¨æ‰€æœ‰æ–¹é¢éƒ½æ˜¯æœ€ä¾¿å®œçš„æ–¹æ¡ˆã€‚ <br><a name="habracut"></a><br><h3>  2.æºæ•°æ®ï¼š </h3><br>  <i>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿ</i> ï¼šCentOS 7 <br><br><div class="spoiler">  <b class="spoiler_title">å…³äºæ“ä½œç³»ç»Ÿ</b> <div class="spoiler_text"> å®é™…ä¸Šï¼ŒCentOS7ä¸ä»»ä½•å…¶ä»–ç³»ç»Ÿä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå‘æœåŠ¡å™¨å‘é€å‘½ä»¤ä»¥å®‰è£…è½¯ä»¶åŒ…ï¼Œå¹¶ä¸”å¯èƒ½è¿˜æœ‰ä¸€äº›æ–‡ä»¶çš„ä½ç½®ã€‚ è¯¥å·¥ä½œä¸»è¦æ˜¯ä½¿ç”¨Zimbra cmdletè¿›è¡Œçš„ï¼Œå› æ­¤é…ç½®å·®å¼‚å°†æœ€å°ã€‚ </div></div><br>  <i>Zimbraç½‘åŸŸ</i> ï¼šzimbramail.home.local <br>  <i>è®¿é—®å…±äº«æ–‡ä»¶å¤¹çš„ç”¨æˆ·åå’Œå¯†ç </i> ï¼šZimbraBackUp / 123123 <br>  <i>å…±äº«æ–‡ä»¶å¤¹çš„è·¯å¾„</i> ï¼š\\ BackUpServer1 \ ZM \ <br>  <i>å°†çƒå®‰è£…åœ¨Zimbraä¸»æœºä¸Šçš„è·¯å¾„</i> ï¼š/ mnt / ZM / <br><br><h3>  3.è®¾å®š </h3><br> å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ <br><br> æˆ‘ä»¬ä¼šå°†å¤‡ä»½å†™å…¥å…±äº«æ–‡ä»¶å¤¹ä¸­è¿è¡ŒWindowsçš„æœåŠ¡å™¨ã€‚ å¦‚æœæ„¿æ„ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®åˆå¹¶å¤‡ä»½ï¼Œä½†æ˜¯ä¸€åˆ‡éƒ½å·²è®¾ç½®å¥½ï¼Œä»¥ä¾¿å¤§å¤šæ•°å¤‡ä»½éƒ½å†™å…¥BackUpServer1.home.localã€‚ è¿™æ ·ï¼š <br><br>  1ï¼‰æˆ‘ä»¬åœ¨ç”¨æˆ·åŸŸä¸­åˆ›å»ºè®¿é—®æ­¤æœåŠ¡å™¨ä¸Šå…±äº«æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿å¯ä»¥å°†å…¶å®‰è£…åœ¨Zimbramail.home.localæœåŠ¡å™¨ä¸Šã€‚ ç”¨æˆ·åZimbraBackUpï¼Œå¯†ç ï¼Œæ¡ä»¶ä¸º123123ã€‚ <br><br>  2ï¼‰åœ¨BackUpServer1æœåŠ¡å™¨ä¸Šï¼Œåœ¨å­˜å‚¨åº“ä¸­åˆ›å»º\ ZM \ç›®å½•å¹¶å…±äº«å®ƒï¼Œä¸ºZimbraBackUpç”¨æˆ·æä¾›æ›´æ”¹æƒé™ã€‚ çƒçš„è·¯å¾„å°†æ˜¯ï¼š\\ BackUpServer1 \ ZM \ <br><br>  3ï¼‰å°†çƒå®‰è£…åˆ°Zimbramail.home.localæœåŠ¡å™¨ã€‚ ä¸ºäº†è‡ªåŠ¨å®‰è£…è¯¥æ–‡ä»¶å¤¹ï¼Œæ‚¨éœ€è¦é€šè¿‡æ·»åŠ ä»¥ä¸‹è¡Œæ¥ä¿®å¤/ etc / fstabæ–‡ä»¶ï¼š <br><br><pre><code class="bash hljs">//BackUpServer/ZM /mnt/ZM cifs user,uid=500,rw,suid,username=ZimbraBackUp,password=123123 0 0</code> </pre> <br> ä½†æ˜¯é¦–å…ˆï¼Œæ‚¨éœ€è¦æ£€æŸ¥å®‰è£…æ˜¯å¦æœ‰æ•ˆï¼š <br><br><pre> <code class="bash hljs">$ mount -t cifs //BackUpServer/ZM /mnt/ZM -o user=ZimbraBackUp,password=123123</code> </pre> <br> é€šå¸¸ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š <br><br><pre> <code class="bash hljs">mount: wrong fs <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>, bad option, bad superblock on //BackUpServer1/ZM/, missing codepage or helper program, or other error (<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> several filesystems (eg nfs, cifs) you might need a /sbin/mount.&lt;<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>&gt; helper program) In some cases useful info is found <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> syslog - try dmesg | tail or so.</code> </pre> <br> æ‚¨å¯ä»¥é€šè¿‡å®‰è£…cifs-utilsæ¥ä¿®å¤å®ƒï¼š <br><br><pre> <code class="bash hljs">$ yum install cifs-utils</code> </pre> <br> è®¾ç½®åï¼Œå»ºè®®é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚ <br><br>  4ï¼‰åˆ›å»º3ä¸ªè„šæœ¬æ–‡ä»¶ï¼šFullBackUp.sh HandBackUp.sh Restore.sh <br><br> ç¬¬ä¸€ä¸ªæ–‡ä»¶å°†ç”¨äºè‡ªåŠ¨åˆ›å»ºè®¡åˆ’çš„å¤‡ä»½ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ç”¨äºå¤‡ä»½å•ä¸ªé‚®ç®±çš„åŠŸèƒ½ï¼Œæˆ–è€…ç®€å•åœ°æ‰‹åŠ¨å¯åŠ¨â€œå‡è®¾â€ã€‚ ç¬¬ä¸‰ä¸ªè„šæœ¬æ˜¯ä¸€æ¬¡æ¢å¤ä¸€ä¸ªæˆ–æ‰€æœ‰ç›’å­ã€‚ æˆ‘å°è¯•äº†å°½å¯èƒ½å¤šåœ°è¯„è®ºè„šæœ¬å’Œè§„å®šçš„æ—¥å¿—è®°å½•çš„å·¥ä½œã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">FullBackUp.shæ–‡ä»¶çš„å†…å®¹ï¼š</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #   Path="/mnt/ZM/BackUps" #    ArchPath="/mnt/ZM/Archive" #    MPath="/mnt/ZM/Mounthly" #  Zimbra ZDomain="zimbramail.home.local" #  MBoxes="/mnt/ZM/MBoxesList" #  CDate=$(date +%d-%m-%Y) #   MDay=$(date +%d) #   log="/mnt/ZM/BackUpLog.txt" echo -en "BackUp ALL MailBoxes started in $(date +%T)\n" &gt;&gt; $log #       if [ ! -d $Path ]; then #     echo "    ..." mkdir -p $Path if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "BackUp dirctory was created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "BackUp dirctory was NOT created in $(date +%T)\n" &gt;&gt; $log fi else echo "    ,      ..." fi #       if [ ! -d $Path/$CDate ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo #        echo "       ..." mkdir -p $Path/$CDate if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "BackUp CDate dirctory was created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "BackUp CDate dirctory was NOT created in $(date +%T)\n" &gt;&gt; $log fi else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo "    ,     ..." fi #     /opt/zimbra/bin/zmprov -l gaa $ZDomain &gt; $MBoxes #    if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Mail Boxes list created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en "Mail Box list is NOT created! in $(date +%T)\n" &gt;&gt; $log exit fi #       for MailBox in $( cat $MBoxes); do echo "    $MailBox..." /opt/zimbra/bin/zmmailbox -z -m $MailBox getRestUrl "//?fmt=tgz" &gt; $Path/$CDate/$MailBox if [ $? -eq 0 ]; then #        echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Mail Box $MailBox BackUp created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en "Mail Box $MailBox BackUp is NOT created! in $(date +%T)\n" &gt;&gt; $log fi done #     echo "    ..." echo -n &gt; $MBoxes if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "File $MBoxes clear\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "File $MBoxes can NOT be cleared\n" &gt;&gt; $log fi #      #      if [ ! -d $ArchPath ]; then #    echo "   ..." mkdir -p $ArchPath if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive dirctory was created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive dirctory was NOT created in $(date +%T)\n" &gt;&gt; $log fi else echo "   , ..." fi tar -czf $ArchPath/$CDate.tar $Path/$CDate if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive created in $(date +%T)\n" &gt;&gt; $log #         if [ "$MDay" = 1 ]; then #      if [ ! -d $MPath ]; then #     echo "    ..." mkdir -p $MPath if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Long saving dirctory was created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Long saving dirctory was NOT created in $(date +%T)\n" &gt;&gt; $log fi else #  echo "    ,     ..." fi cp $ArchPath/$CDate.tgz $MPath/$CDate if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive is copied in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive is NOT copied in $(date +%T)\n" &gt;&gt; $log fi echo "    ( 1 )..." # ,   ,   find $Path -atime +7 | xargs rm -d if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Old BackUps files was deleted\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Old BackUps files is NOT deleted in $(date +%T)\n" &gt;&gt; $log fi #    ( 2 ) echo "     ( 2 )..." find $ArchPath -atime +61 | xargs rm -f if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Old BackUps archives was deleted\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Old BackUps archives is NOT deleted in $(date +%T)\n" &gt;&gt; $log fi fi else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive is NOT created in $(date +%T)\n" &gt;&gt; $log fi echo "BackUp job finished in $(date +%T)" #  -     echo -en "BackUp job finished in $(date +%T) $(date +%T)\n" &gt;&gt; $log echo -en "_____________________________________________\n" &gt;&gt; $log</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">HandBackUp.shçš„æ–‡ä»¶å†…å®¹ï¼š</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #   Path="/mnt/ZM/BackUps" #    ArchPath="/mnt/ZM/Archive" #  Zimbra ZDomain="zimbramail.home.local" #  MBoxes="/mnt/ZM/MBoxesList" #  CDate=$(date +%d-%m-%Y) #   log="/mnt/ZM/BackUpLog.txt" read -p "    (  ),  ALL      : " A if [[ "$A" = "ALL" || "$A" = "all" ]]; then echo -en "BackUp started in $(date +%T)\n" &gt;&gt; $log #     echo "    ..." /opt/zimbra/bin/zmprov -l gaa $ZDomain &gt; $MBoxes if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Mail Boxes list created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en "Mail Box list is NOT created! in $(date +%T)\n" &gt;&gt; $log exit fi if ! [ -d $Path/$Date ]; then #    mkdir -p $Path/$CDate/ echo -en "BackUp directory created in $(date +%T)\n" &gt;&gt; $log fi #       echo "      " for MailBox in $( cat $MBoxes); do echo "    $MailBox..." /opt/zimbra/bin/zmmailbox -z -m $MailBox getRestUrl "//?fmt=tgz" &gt; $Path/$CDate/$MailBox if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Mail Box $MailBox BackUp created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en "Mail Box $MailBox BackUp is NOT created! in $(date +%T)\n" &gt;&gt; $log fi done else MailBox="$A@$ZDomain" #    echo "   ..." Result=$(/opt/zimbra/bin/zmprov getMailboxInfo $MailBox) if [ $? -eq 0 ]; then #   echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo "  $MailBox ,  ..." echo -en "Required Mail Box $MailBox exist $(date +%T)\n" &gt;&gt; $log #      if ! [ -d $Path/$Date ]; then #    mkdir -p $Path/$CDate/ echo -en "BackUp directory created in $(date +%T)\n" &gt;&gt; $log fi #    $MailBox /opt/zimbra/bin/zmmailbox -z -m $MailBox getRestUrl "//?fmt=tgz" &gt; $Path/$CDate/$MailBox if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Mail Box $MailBox BackUp created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en "Mail Box $MailBox BackUp is NOT created! in $(date +%T)\n" &gt;&gt; $log fi else #    -  echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo "  $MailBox  .   " echo -en "Required Mail Box $MailBox is not exist\n" &gt;&gt; $log exit fi fi read -p "      $MailBox? [N]: " F if [[ "$F" = "Y" || "$F" = "y" ]]; then #      if [ ! -d $ArchPath ]; then #     echo "   ..." mkdir -p $ArchPath if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive dirctory was created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive dirctory was NOT created in $(date +%T)\n" &gt;&gt; $log fi else echo "   , ..." fi #    echo "  ..." if [[ "$A" = "ALL" || "$A" = "all" ]]; then tar -czf $ArchPath/$CDate.tar $Path/$CDate if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive is NOT created in $(date +%T)\n" &gt;&gt; $log fi else tar -czf $ArchPath/$MailBox.tar $Path/$CDate/$MailBox if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en "Archive created in $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Archive is NOT created in $(date +%T)\n" &gt;&gt; $log fi fi else echo "   " echo -en "User decline archive creating\n" &gt;&gt; $log fi #     echo "    ..." echo -n &gt; $MBoxes if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo fi echo "BackUp job finished in $(date +%T) $(date +%T)" #  -     echo -en "BackUp job finished in $(date +%T) $(date +%T)\n" &gt;&gt; $log echo -en "_____________________________________________\n" &gt;&gt; $log</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Restore.shæ–‡ä»¶çš„å†…å®¹ï¼š</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #   Path="/mnt/ZM/BackUps" #  Zimbra ZDomain="zimbramail.home.local" #  MBoxes="/mnt/ZM/MBoxesList" #   log="/mnt/ZM/RestoreLog.txt" read -p "  ,      02-09-2001: " Date if ! [ -d $Path/$Date ]; then echo "     ." echo -en "No BackUp file at $Date $(date +%T)\n" &gt; $log exit fi read -p "    (  ),  ALL        : " A if [[ "$A" = "ALL" || "$A" = "all" ]]; then echo -en "Restore started in $(date +%T)\n" &gt;&gt; $log #     ls "$Path/$Date" &gt; $MBoxes for MailBox in $( cat $MBoxes); do #   echo "   $MailBox" Result=$(/opt/zimbra/bin/zmprov getMailboxInfo $MailBox) if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6) [OK]" echo echo -en "Start restore job for $MailBox $(date +%T)\n" &gt;&gt; $log echo " $MailBox . ..." else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Mail Box $MailBox does not exist, creating Mail Box $MailBox $(date +%T)\n" &gt;&gt; $log echo " $MailBox  .   $MailBox..." #   Result=$(/opt/zimbra/bin/zmprov ca $MailBox 12345678 displayName "$MailBox") if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6) [OK]" echo echo -en "Mail Box $MailBox is created, starting restore $(date +%T)\n" &gt;&gt; $log echo " $MailBox  . ..." else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Can NOT create Mail Box $MailBox ! $(date +%T)\n" &gt;&gt; $log echo " $MailBox   ." fi fi #  Result=$(/opt/zimbra/bin/zmmailbox -z -m $MailBox postRestURL "//?fmt=tgz&amp;resolve=replace" $Path/$Date/$MailBox) if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en " $MailBox   $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en " $MailBox  ! $(date +%T)\n" &gt;&gt; $log fi done else #     MailBox="$A@$ZDomain" if [ -a $Path/$Date/$MailBox ]; then #   echo "   $MailBox..." Result=$(/opt/zimbra/bin/zmprov getMailboxInfo $MailBox) if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6) [OK]" echo echo -en "Start restore job for $MailBox $(date +%T)\n" &gt;&gt; $log echo " $MailBox . ..." else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Mail Box $MailBox does not exist $(date +%T)\n" &gt;&gt; $log echo " $MailBox  ." read -p "            ? [N]: " B if [[ "$B" = "Y" || "$B" = "y" ]]; then echo "   $MailBox..." Result=$(/opt/zimbra/bin/zmprov ca $MailBox 12345678 displayName "$MailBox") #   if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6) [OK]" echo echo -en "Mail Box $MailBox is created, starting restore $(date +%T)\n" &gt;&gt; $log echo " $MailBox  . ..." else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo echo -en "Can NOT create Mail Box $MailBox ! $(date +%T)\n" &gt;&gt; $log echo " $MailBox   .   ..." exit fi else #   ,  .  echo "   .   " exit fi fi #  Result=$(/opt/zimbra/bin/zmmailbox -z -m $MailBox postRestURL "//?fmt=tgz&amp;resolve=replace" $Path/$Date/$MailBox) if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo echo -en " $MailBox   $(date +%T)\n" &gt;&gt; $log else echo -n "$(tput hpa $(tput cols))$(tput cub 6)[FAIL]" echo echo -en " $MailBox  ! $(date +%T)\n" &gt;&gt; $log fi else #     echo "    .   " echo -en "Required BackUp file is not exist\n" &gt;&gt; $log exit fi fi #     echo "    ..." echo -n &gt; $MBoxes if [ $? -eq 0 ]; then echo -n "$(tput hpa $(tput cols))$(tput cub 6)[OK]" echo else echo -n "$(tput hpa $(tput cols))$(tput cub 6) [FAIL]" echo fi echo "BackUp job finished in $(date +%T) $(date +%T)" #  -     echo -en "Restore job complete in $(date +%T)\n" &gt;&gt; $log echo -en "____________________________________\n" &gt;&gt; $log</span></span></code> </pre></div></div><br> æœ‰ä¸€ä¸ªå¾®å¦™ä¹‹å¤„ã€‚ å¦‚æœåœ¨Windowsä¸‹ä¸ºbashåˆ›å»ºå’Œç¼–è¾‘è„šæœ¬æ–‡ä»¶ï¼Œé‚£ä¹ˆå½“æ‚¨å°è¯•è¿è¡Œè„šæœ¬æ—¶ï¼Œå°†å‡ºç°é”™è¯¯ï¼š <b>/ bin / sh ^ Mï¼šé”™è¯¯çš„è§£é‡Šå™¨ï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•</b> ï¼Œå³åœ¨Windowsä¸‹è¿è¡Œçš„ç¼–è¾‘å™¨æ·»åŠ åˆ°è¯¥è¡Œçš„æœ«å°¾æ˜¯å›è½¦ç¬¦â€œ CR \ LFâ€ï¼ŒLinuxä¸Šçš„ç¼–è¾‘å™¨ä¸ä¼šæ˜¾ç¤ºã€‚ ä½†æ˜¯è¿™ä¸ªç¬¦å·åœ¨é‚£é‡Œï¼Œå¹¶æ²¡æœ‰æ¶ˆå¤±ã€‚ ä¸ºäº†æ‘†è„±é”™è¯¯å¹¶åˆ é™¤å¤šä½™çš„å­—ç¬¦ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><pre> <code class="bash hljs">$ cat your-script.sh | tr -d <span class="hljs-string"><span class="hljs-string">'\r'</span></span> &gt; corrected-your-script.sh</code> </pre> <br> å¥½äº†ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨dos2unixå®ç”¨ç¨‹åºï¼Œä½†æ˜¯ä»ç„¶éœ€è¦å®‰è£…å®ƒï¼š <br><br><pre> <code class="bash hljs">$ yum install dos2unix $ dos2unix your-script.sh</code> </pre> <br>  5ï¼‰æˆ‘ä»¬ä½¿è„šæœ¬å¯æ‰§è¡Œï¼š <br><br><pre> <code class="bash hljs">$ chmod 0740 /opt/zimbra/BkUpRestScripts/FullBackUp.sh $ chmod 0740 /opt/zimbra/BkUpRestScripts/HandBackUp.sh $ chmod 0740 /opt/zimbra/BkUpRestScripts/Restore.sh</code> </pre> <br>  6ï¼‰æˆ‘å»ºè®®æ‚¨ç”¨æ‰‹è¿è¡Œè„šæœ¬ï¼Œå¹¶æ£€æŸ¥å®ƒä»¬æ˜¯å¦æœ‰æ•ˆä»¥åŠå¦‚ä½•å·¥ä½œã€‚ <br><br>  7ï¼‰åœ¨CRONä¸­åˆ›å»ºä¸€ä¸ªé‚®ç®±çš„æ¯æ—¥å¤‡ä»½ä»»åŠ¡ï¼š <br><br><pre> <code class="bash hljs">10 0 * * * root /opt/zimbra/ BkUpRestScripts/FullBackUp.sh</code> </pre> <br>  8ï¼‰äº«å— <br><br><h3>  4.è„šæœ¬ç¼–å†™ </h3><br> å¦‚æœè„šæœ¬æœ¬èº«çš„æ³¨é‡Šæ²¡æœ‰å¸®åŠ©ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">1ï¼‰è„šæœ¬FullBaclUp.shï¼š</b> <div class="spoiler_text"> é¦–å…ˆï¼Œç¡®å®šå˜é‡ï¼Œç”±å“ªä¸ªå˜é‡è´Ÿè´£-æ³¨é‡Šæ‰€æœ‰å†…å®¹ã€‚ <br><br> ä»¥ä¸‹æ˜¯æ£€æŸ¥æ˜¯å¦ç¼ºå°‘è¦å¤‡ä»½çš„ç›®å½•ï¼›å¦‚æœä¸å­˜åœ¨è¯¥ç›®å½•ï¼Œåˆ™ä¼šåˆ›å»ºè¯¥ç›®å½•ã€‚ å¯¹äºæ—¥å¿—æ–‡ä»¶å’Œå±å¹•ï¼ˆå¦‚æœæ˜¯æ‰‹åŠ¨å¯åŠ¨ï¼‰ï¼Œå¯ä»¥å¾—å‡ºæœ‰å…³åˆ›å»ºç›®å½•æˆåŠŸä¸å¦çš„ç»“è®ºã€‚ <br><br> ç”¨ä»Šå¤©çš„æ—¥æœŸæ£€æŸ¥ç¼ºå°‘çš„ç›®å½•ã€‚ å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºå®ƒï¼Œå¹¶ç”Ÿæˆå±å¹•è¾“å‡ºå’Œåˆ›å»ºç›®å½•ç»“æœçš„æ—¥å¿—ã€‚ <br><br> å°†æ‰€æœ‰ç°æœ‰çš„Zimbraé‚®ç®±å†™å…¥æ–‡ä»¶ã€‚ é¡ºåºä¿ç•™æ¯ä¸ªæ¡†éœ€è¦å®ƒã€‚ æ˜¾ç¤ºå‘½ä»¤çš„ç»“æœã€‚ <br><br> ä»æ”¶åˆ°çš„åˆ—è¡¨ä¸­ä¸ºæ¯ä¸ªé‚®ç®±åˆ›å»ºå¤‡ä»½ã€‚ å°†æ‰§è¡Œè¾“å‡ºè¾“å‡ºåˆ°å±å¹•å’Œæ—¥å¿—æ–‡ä»¶ã€‚ <br><br> æ¸…é™¤å¸¦æœ‰åˆ—è¡¨æ¡†çš„æ–‡ä»¶ã€‚ ç”±äºæ‰€æœ‰3ä¸ªè„šæœ¬å‡ä¸æ­¤æ–‡ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤å»ºè®®åœ¨æ¯æ¬¡è¿è¡Œåå¯¹å…¶è¿›è¡Œæ¸…ç†ï¼Œä»¥å…å‡ºç°æ„å¤–ã€‚ æ‚¨å¯ä»¥åœ¨è„šæœ¬å¼€å§‹ä¹‹å‰å¯¹å…¶è¿›è¡Œæ¸…ç†ï¼Œä½†æ˜¯å¯¹äºæˆ‘æ¥è¯´ï¼ŒæŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæˆ‘ä¸ç†Ÿæ‚‰åœ¨å·¥ä½œå®Œæˆåä¸å­˜å‚¨ä¸å¿…è¦çš„æ•°æ®ï¼Œè€Œæ˜¯åœ¨è„šæœ¬å·¥ä½œä¹‹å‰å’Œä¹‹åè¿›è¡Œç›¸åŒçš„æ“ä½œä¼šå¯¼è‡´ç²¾ç¥åˆ†è£‚ç—‡ã€‚ <br><br> æ¥ä¸‹æ¥æ˜¯åˆ›å»ºå‹ç¼©å­˜æ¡£çš„å—ã€‚ <br><br> æ£€æŸ¥æ¡£æ¡ˆå­˜å‚¨ç›®å½•çš„ä¸å­˜åœ¨ï¼Œåœ¨ä¸å­˜åœ¨çš„æƒ…å†µä¸‹åˆ›å»ºå®ƒï¼Œå¹¶åœ¨å±å¹•å’Œæ—¥å¿—ä¸­æ˜¾ç¤ºåˆ›å»ºç»“æœã€‚ <br><br> å­˜æ¡£ <br><br> é€‰ä¸­â€œä»Šå¤©ä¸æ˜¯ç¬¬ä¸€å¤©å—ï¼Ÿâ€ æˆ‘å®æ„¿é•¿æ—¶é—´å­˜å‚¨æ‰€æœ‰ç¬¬ä¸€å¤©çš„å¤‡ä»½ï¼Œè¿™è¶³ä»¥è®©æˆ‘å·¥ä½œã€‚ å®ƒå¯ä»¥å­˜å‚¨æ•°å‘¨ï¼Œä½†æ˜¯é€šå¸¸è¿™æ˜¯å¤šä½™çš„ã€‚ ä½†æ˜¯åœ¨æ•´ä¸ªé‚®ä»¶æœåŠ¡å™¨è¿è¡ŒæœŸé—´å­˜å‚¨å¤‡ä»½çš„æ¡ä»¶è®¾ç½®ä¸ºæœ€é«˜ï¼Œå› æ­¤å®ƒä»¬å°†æ°¸è¿œå­˜åœ¨ã€‚ å¦‚æœæ•°å­—æ˜¯ç¬¬ä¸€ä¸ªï¼Œåˆ™å°†ç”Ÿæˆçš„å­˜æ¡£å¤åˆ¶åˆ°å•ç‹¬çš„â€œ Mounthlyâ€ç›®å½•ä¸­ã€‚ è¦å°†å…¶å¤åˆ¶åˆ°è¯¥ç›®å½•ï¼Œæ‚¨éœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯¥ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·åˆ›å»ºè¯¥ç›®å½•ï¼Œè¯¥ç›®å½•åº”æŠ¥å‘Šåˆ°å±å¹•å’Œæ—¥å¿—æ–‡ä»¶ä¸­ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæ¸…ç†å­˜å‚¨-åˆ é™¤æ‰€æœ‰è¶…è¿‡2å‘¨çš„å¤‡ä»½ä»¥åŠè¶…è¿‡61å¤©çš„å­˜æ¡£ã€‚ åˆ é™¤çš„ç»“æœæ˜¾ç¤ºåœ¨å±å¹•å’Œæ—¥å¿—æ–‡ä»¶ä¸­ã€‚ <br><br> ä¹‹åï¼Œè„šæœ¬å°†å®Œæˆæ—¶é—´å†™å…¥æ—¥å¿—æ–‡ä»¶å’Œå±å¹•ï¼Œå¹¶ç»“æŸå…¶å·¥ä½œã€‚ </div></div><br><div class="spoiler">  <b class="spoiler_title">2ï¼‰è„šæœ¬HandBackUp.shï¼š</b> <div class="spoiler_text"> åœ¨å¼€å§‹æ—¶ï¼Œè¿˜å®šä¹‰äº†å˜é‡ï¼Œå¹¶å¯¹éœ€è¦å˜é‡çš„åŸå› è¿›è¡Œäº†è¯„è®ºã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæç¤ºç”¨æˆ·è¾“å…¥éœ€è¦å¤‡ä»½çš„é‚®ç®±çš„åç§°ï¼Œè€Œæ— éœ€æŒ‡å®šZimbraåŸŸã€‚  ï¼ˆå°†å…¶å†™åœ¨é‚€è¯·å‡½ä¸­ï¼‰ï¼Œæˆ–é€šè¿‡å†™ALLæˆ–allæ¥é€‰æ‹©æ‰€æœ‰é‚®ç®±çš„å¤‡ä»½ã€‚ <br><br> å¦‚æœæ‚¨é€‰æ‹©å¤‡ä»½æ‰€æœ‰é‚®ç®±ï¼Œåˆ™è¯¥è„šæœ¬çš„å·¥ä½œåŸç†å‡ ä¹ä¸ä¸Šé¢åˆ—å‡ºçš„ç¬¬ä¸€ä¸ªç›¸åŒï¼Œåªæ˜¯åœ¨åˆ›å»ºæ¯ä¸ªé‚®ç®±çš„å¤‡ä»½åï¼Œå®ƒä¼šè¯¢é—®-æˆ‘æ˜¯å¦éœ€è¦å­˜æ¡£å®ƒä»¬ï¼Ÿ <br><br> å¦‚æœå†™å…¥äº†ç‰¹å®šé‚®ç®±ï¼Œåˆ™åœ¨Zimbraä¸­æ£€æŸ¥å…¶å­˜åœ¨ã€‚ å¦‚æœå­˜åœ¨å…·æœ‰æŒ‡å®šåç§°çš„æ¡†ï¼Œåˆ™è¯¥æ¡†çš„å¤‡ä»½è¿‡ç¨‹å¼€å§‹ï¼Œå¹¶ä¸”ç›¸åº”çš„ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå’Œæ—¥å¿—æ–‡ä»¶ä¸­ã€‚ å¦‚æœæŒ‡å®šçš„æ¡†ä¸å­˜åœ¨ï¼Œåˆ™å°†é€šçŸ¥ç”¨æˆ·æ­¤ä¿¡æ¯ï¼Œè„šæœ¬å°†å®Œæˆå…¶å·¥ä½œã€‚ <br><br> ç›’å­çš„å¤‡ä»½å®Œæˆåï¼Œå°†æç¤ºæ‚¨å­˜æ¡£å‰¯æœ¬ã€‚ å¦‚æœç”¨æˆ·åŒæ„-å¦‚ç¬¬ä¸€ä¸ªè„šæœ¬ä¸­æ‰€ç¤ºï¼Œæ£€æŸ¥æ˜¯å¦ç¼ºå°‘ç”¨äºå­˜å‚¨æ¡£æ¡ˆçš„ç›®å½•ï¼Œå¹¶è¿›ä¸€æ­¥æŸ¥æ‰¾åˆ—è¡¨ã€‚ <br><br> å½’æ¡£å®Œæˆåï¼Œå¸¦æœ‰é‚®ç®±åˆ—è¡¨çš„æ–‡ä»¶å°†è¢«æ¸…é™¤ã€‚ ä»¥é˜²ä¸‡ä¸€ã€‚ <br><br> æœ€åï¼Œæœ‰å…³è„šæœ¬å®Œæˆæ—¶é—´çš„ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå’Œæ—¥å¿—æ–‡ä»¶ä¸­ã€‚ </div></div><br><div class="spoiler">  <b class="spoiler_title">3ï¼‰è„šæœ¬Restore.shï¼š</b> <div class="spoiler_text"> ä¸ä¹‹å‰çš„æ–‡ä»¶ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ª-å¸¦æ³¨é‡Šçš„å˜é‡çš„å®šä¹‰ã€‚ <br><br> æç¤ºç”¨æˆ·é€‰æ‹©è¦è¿˜åŸçš„å¤‡ä»½æ—¥æœŸã€‚ å¦‚æœæŒ‡å®šçš„æ—¥æœŸä¸åœ¨å¤‡ä»½ä¸­ï¼Œåˆ™é€šè¿‡æŠ¥å‘Šæ­¤è„šæœ¬æ¥ç»ˆæ­¢è¯¥è„šæœ¬ã€‚ <br><br> å¦‚æœå­˜åœ¨æŒ‡å®šæ—¥æœŸçš„å¤‡ä»½-æç¤ºç”¨æˆ·è¾“å…¥éœ€è¦æ¢å¤çš„æ¡†çš„åç§°ã€‚ è¦è¿˜åŸæ‰€æœ‰æ¡†ï¼Œæ‚¨éœ€è¦å†™ALLæˆ–ALLã€‚ <br><br> å¦‚æœé€‰æ‹©ALLé€‰é¡¹ï¼Œåˆ™è„šæœ¬å°†åœ¨æ–‡ä»¶çš„å¤‡ä»½æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶é€šçŸ¥åˆ›å»ºç»“æœã€‚ <br><br> æ¥ä¸‹æ¥æ˜¯æ¯ä¸ªç›’å­çš„åˆ†æ­¥æ¢å¤ã€‚ é¦–å…ˆï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ¡†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºè¯¥æ¡†ï¼Œç„¶åå°†å…¶è¿˜åŸã€‚ æœ‰å…³æ¯ä¸ªæ“ä½œçš„ä¿¡æ¯æ˜¾ç¤ºåœ¨æ—¥å¿—æ–‡ä»¶å’Œå±å¹•ä¸Šã€‚ <br><br> å¦‚æœé€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„æ¡†ï¼Œåˆ™å‡ ä¹ç›¸åŒã€‚ æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…·æœ‰æ‰€è¯·æ±‚åç§°çš„æ–‡ä»¶ã€‚ è¾“å‡ºåˆ°å±å¹•å’Œç»“æœæ—¥å¿—æ–‡ä»¶ã€‚ <br><br> æ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç›’å­ã€‚ è¾“å‡ºåˆ°å±å¹•å’Œç»“æœæ—¥å¿—æ–‡ä»¶ã€‚ <br> é‚€è¯·ç”¨æˆ·åŒæ„åœ¨ç³»ç»Ÿä¸­ä¸å­˜åœ¨æ¡†çš„æƒ…å†µä¸‹åˆ›å»ºæ¡†ã€‚ è¾“å‡ºåˆ°å±å¹•å’Œç»“æœæ—¥å¿—æ–‡ä»¶ã€‚ <br><br> å¦‚æœåŒæ„ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ¡†ã€‚ è¾“å‡ºåˆ°å±å¹•å’Œç»“æœæ—¥å¿—æ–‡ä»¶ã€‚ <br> é‚®ç®±æ¢å¤ã€‚ è¾“å‡ºåˆ°å±å¹•å’Œç»“æœæ—¥å¿—æ–‡ä»¶ã€‚ <br><br> æ¸…é™¤å¸¦æœ‰æ¢å¤æ¡†åˆ—è¡¨çš„æ–‡ä»¶ã€‚ <br><br> æœ€åï¼Œæœ‰å…³è„šæœ¬å®Œæˆæ—¶é—´çš„ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå’Œæ—¥å¿—æ–‡ä»¶ä¸­ã€‚ </div></div><br><h3>  5.å…³äºæ¢å¤ </h3><br> å¦‚æœæ‚¨ç¨åŠ ä¿®æ”¹è¿™äº›è„šæœ¬ï¼Œé‚£ä¹ˆå®ƒä»¬éå¸¸é€‚åˆäºåœ¨æœåŠ¡å™¨ä¹‹é—´ç§»åŠ¨é‚®ä»¶ï¼Œåªéœ€åœ¨æ–°ä½ç½®åˆ›å»ºåŒ…å«æ‰€æœ‰å†…å®¹çš„é‚®ç®±å³å¯ã€‚ æ‚¨ä¹Ÿå¯ä»¥ä»å¤´å¼€å§‹è¿˜åŸç³»ç»Ÿï¼Œç”±äºæŸç§åŸå› ï¼Œé‡æ–°å¯åŠ¨ZimbraæœåŠ¡å™¨è¦æ¯”å°è¯•æ¢å¤æ—§æœåŠ¡å™¨å®¹æ˜“ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨å¿…è¦æ—¶å±•å¼€é…ç½®çš„è™šæ‹Ÿæœºçš„æ˜ åƒæ¥ä¿å­˜æ˜ åƒï¼Œå¹¶ç”¨æ‰€æœ‰æ•°æ®å¡«å……è¯¥æ˜ åƒã€‚ ä»ä¸€å°ZimbraæœåŠ¡å™¨ç§»åŠ¨åˆ°å¦ä¸€å°ZimbraæœåŠ¡å™¨çš„ç®—æ³•ç›¸åŒã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¸éœ€è¦åƒZextrasè¿™æ ·çš„ä»˜è´¹å®ç”¨ç¨‹åºã€‚ </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6.ç»“è®º </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šå¸¸ï¼Œæˆ‘ç¼–å†™çš„è„šæœ¬æ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„ã€‚</font><font style="vertical-align: inherit;">æ˜¯çš„ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæ¡ä»¶ï¼Œå› ä¸ºæˆ‘è¯•å›¾é¢„æµ‹ä»–ä»¬å·¥ä½œä¸­å°½å¯èƒ½å¤šçš„é—®é¢˜å’Œé”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä¹Ÿå°è¯•å°½å¯èƒ½æ¸…æ™°åœ°å¯¹è„šæœ¬è¿›è¡Œè¯„è®ºã€‚</font><font style="vertical-align: inherit;">å¼€ç®±å³ç”¨ï¼Œå®ƒä»¬å¾ˆå¯èƒ½ä¸ä¼šå¯¹æ¯ä¸ªäººéƒ½èµ·ä½œç”¨ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸æŸäººæ ¹æœ¬æ²¡æœ‰è¿™ç§å¤‡ä»½æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">ä½†æˆ‘å¸Œæœ›è®¸å¤šäººä¼šå‘ç°å®ƒæœ‰ç”¨ã€‚</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. PSï¼š </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯â€œæˆ‘å¦‚ä½•å®ç°Zimbraâ€ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ã€‚</font><font style="vertical-align: inherit;">ç¬¬ä¸€ä¸ªæ˜¯å…³äºå®ç°ï¼ŒLDAPæˆæƒå’Œä¸ºADç”¨æˆ·è‡ªåŠ¨åˆ›å»ºé‚®ç®±çš„ä¿¡æ¯ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°±åœ¨è¿™é‡Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨Zimbra OSEä¸­æœ‰å…³è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°åŸºäºADçš„é‚®ä»¶åˆ—è¡¨çš„ç¬¬ä¸‰ç¯‡æ–‡ç« åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™é‡Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€Œä¸”æˆ‘è¿˜æƒ³æŒ‡å‡ºï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨bashä¸Šç¼–å†™è„šæœ¬ï¼Œå› æ­¤ï¼Œè„šæœ¬å¦‚æ­¤åºå¤§ä¸”â€œç‰¹åˆ«èªæ˜â€ï¼Œæ­£å¦‚ä»–ä»¬æ‰€è¯´ã€‚</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439728/">https://habr.com/ru/post/zh-CN439728/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439718/index.html">Dockeråœ¨Elixir / Phoenixä¸Šçš„åº”ç”¨ç¨‹åºå¼€å‘</a></li>
<li><a href="../zh-CN439720/index.html">ç¼–ç¨‹ç®€ä»‹ï¼šæ•´ä¸ªå‘¨æœ«ä»å¤´å¼€å§‹çš„ç®€å•3Då°„å‡»æ¸¸æˆï¼Œç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN439722/index.html">SVGæ»¤é•œçš„æ•ˆæœã€‚ ç¬¬2éƒ¨åˆ†ã€‚ç”¨è¯å½¢å­¦æ¦‚è¿°æ–‡æœ¬</a></li>
<li><a href="../zh-CN439724/index.html">2018å¹´AIå’ŒMLè§£å†³æ–¹æ¡ˆæ¦‚è¿°ä»¥åŠ2019å¹´é¢„æµ‹ï¼šç¬¬2éƒ¨åˆ†-å·¥å…·å’Œåº“ï¼ŒAutoMLï¼ŒRLï¼Œäººå·¥æ™ºèƒ½ä¼¦ç†</a></li>
<li><a href="../zh-CN439726/index.html">é”å®šï¼šçœŸå®è¿˜æ˜¯è™šæ„ï¼Ÿ</a></li>
<li><a href="../zh-CN439730/index.html">é€šè¿‡æ ‡å‡†ç­çº§ç»„ç»‡å‡é€Ÿæœº</a></li>
<li><a href="../zh-CN439732/index.html">Lazarus-ä½¿ç”¨TImageFragmentç»„ä»¶çš„ç®€å•åŠ¨ç”»</a></li>
<li><a href="../zh-CN439734/index.html">ä½¿ç”¨MicroK8åœ¨å‡ åˆ†é’Ÿå†…åœ¨æ¡Œé¢ä¸Šéƒ¨ç½²Kubernetes</a></li>
<li><a href="../zh-CN439736/index.html">MikroTikå’ŒKerio Controlä¹‹é—´çš„IPSec VPNè¿æ¥</a></li>
<li><a href="../zh-CN439738/index.html">æœç´¢â€œåšå¾—å¥½â€æŒ‰é’®ã€‚ Zyxelåœ¨ä¸­å°ä¼ä¸šç½‘ç»œä¸­</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>