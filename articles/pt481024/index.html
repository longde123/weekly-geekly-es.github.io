<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìí üëò üêß Por que eu abandonei a API do Google Maps üçë üöó üìã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR Mudan√ßas recentes no modelo de precifica√ß√£o s√£o, para dizer o m√≠nimo, insanas . 

 Quando lancei o NUKEMAP em 2012, o Google Maps tinha interfa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por que eu abandonei a API do Google Maps</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481024/"> <b>TL; DR Mudan√ßas recentes no modelo de precifica√ß√£o s√£o, para dizer o m√≠nimo, <i>insanas</i> .</b> <br><br>  Quando <a href="http://blog.nuclearsecrecy.com/2012/02/03/presenting-nukemap/" rel="nofollow">lancei o NUKEMAP</a> em 2012, o Google Maps tinha <a href="https://cloud.google.com/maps-platform/" rel="nofollow">interfaces de software</a> <i>incr√≠veis</i> .  Absolutamente as melhores APIs para criar mashups cartogr√°ficos em JavaScript, <i>quase de gra√ßa</i> , com uma comunidade ativa de desenvolvedores, que regularmente adicionava novos recursos.  De fato, a impress√£o era que a empresa estava interessada em pessoas que usam seus produtos para criar ferramentas interessantes e √∫teis. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/w4/_w/6e/w4_w6envzhbmw1nfrxyp95deb84.jpeg"></a> <br>  <i><font color="gray">Vers√µes anteriores do NUKEMAP: √† esquerda, a vers√£o original de mar√ßo de 2005, nas capturas de tela do MapQuest (era extremamente limitada e nunca publicada), completamente em PHP.</font></i>  <i><font color="gray">Eu o desenvolvi para uso pessoal e treinamento.</font></i>  <i><font color="gray">√Ä direita, o <a href="http://blog.nuclearsecrecy.com/2012/02/03/presenting-nukemap/" rel="nofollow">NUKEMAP refeito de 2012</a> na API do Google Maps e Javascript.</font></i> <br><br>  Hoje, quase tudo mudou.  A base de c√≥digo da API praticamente parou de adicionar <i>fun√ß√µes realmente √∫teis</i> (muitos recursos interessantes foram exclu√≠dos ou desatualizados silenciosamente; novas fun√ß√µes adicionaram, como regra, incremental ou primitiva).  Este √© realmente um fato not√°vel, pois eles adicionaram muitas coisas interessantes ao seu pr√≥prio site do Google Maps, como o modo 3D.  Mas eles n√£o foram portados para a API. <a name="habracut"></a>  √â por isso que o <a href="https://nuclearsecrecy.com/nukemap3d/" rel="nofollow">NUKEMAP3D est√°</a> realmente morto - o plug-in do Google Earth parou de funcionar e nada foi lan√ßado.  Antecipando obje√ß√µes, direi que o <a href="https://cesium.com/cesiumjs/" rel="nofollow">CesiumJS</a> n√£o substitui o Google Earth - ele n√£o fornece cobertura global de edif√≠cios em 3D para entender o tamanho da nuvem de cogumelos.  Se eles mudarem isso, demorarei um tempo para migrar o c√≥digo, mas n√£o acredito que isso aconte√ßa porque as formas 3D globais dos edif√≠cios ainda s√£o de propriedade do Google.  Se voc√™ deseja visualizar nuvens volumosas de cogumelos no programa independente do Google Earth, tenho (ainda experimental e incompleta) a fun√ß√£o de exportar nuvens de cogumelos para o formato KMZ.  Consulte a p√°gina <a href="https://nuclearsecrecy.com/nukemap3d/" rel="nofollow">NUKEMAP3D</a> para mais informa√ß√µes). <br><br>  Mais importante, por√©m, as mudan√ßas recentes no modelo de precifica√ß√£o s√£o, para dizer o m√≠nimo, <i>insanas</i> .  Eles <i>punem os</i> criadores de aplicativos educacionais √∫teis. <br><br>  Por cinco anos, a NUKEMAP tem um p√∫blico est√°vel de cerca de 15.000 pessoas por dia e cerca de 200.000 por m√™s (√†s vezes ocorre v√°rias centenas de milhares de visualiza√ß√µes de p√°gina por dia quando o site se torna viral novamente por algum motivo).  Embora isso seja bastante para um recurso cient√≠fico, mas em uma escala na Internet, eu o chamaria de "moderadamente popular".  N√£o acho que isso crie pelo menos uma carga percept√≠vel nos servidores do Google (que, por exemplo, servem <i>todo o YouTube</i> ).  E de 2012 a 2016, o Google n√£o cobrou nenhuma taxa por esses sites.  O que foi bastante generoso deles.  A caridade do Google incentivou muitas experi√™ncias.  Caso contr√°rio, o NUKEMAP e muitos outros projetos simplesmente n√£o teriam nascido. <br><br>  Em 2016, eles come√ßaram a cobrar.  N√£o era t√£o ruim - na pior das hip√≥teses, a conta era de cerca de US $ 200 por m√™s.  Tive a sorte de trabalhar em uma institui√ß√£o (Faculdade de Arte e Literatura do Stevens Institute of Technology) que concordou em pagar as contas. <br><br>  Mas em 2018, o Google alterou o modelo de pre√ßos e a fatura excedeu US $ 1800 por m√™s.  S√£o mais de US $ 20.000 por ano.  Isso √© v√°rias vezes mais do que minha taxa de hospedagem (para todos os meus sites). <br><br>  Eu virei para o Google para descobrir o motivo do aumento de pre√ßo.  Sua <a href="https://cloud.google.com/maps-platform/pricing/sheet/" rel="nofollow">nova lista de pre√ßos</a> ... um pouco dif√≠cil de entender, ent√£o o aumento de pre√ßo foi inesperado.  Mas eles t√™m uma <a href="https://mapsplatformtransition.withgoogle.com/calculator" rel="nofollow">calculadora</a> que mostra com precis√£o o qu√£o terr√≠vel √© o esquema de pre√ßos.  √â verdade que n√£o √© f√°cil encontrar, e o acesso requer uma conta do Google.  Mas se voc√™ jogar com a op√ß√£o "carregar cart√µes din√¢micos" (existem outras taxas, mas esse √© o maior item de despesa), voc√™ ver√° imediatamente como o custo aumenta acentuadamente.  Entrei em contato com o Google para obter ajuda no c√°lculo, mas eles simplesmente recusaram e me enviaram para uma organiza√ß√£o parceira de terceiros que representa os interesses do Google ao trabalhar com empresas.  Obrigado, eu passo. <br><br><div style="text-align:center;"> <a href="https://www.google.com/nonprofits/eligibility/" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/81a/bbc/d10/81abbcd104ceacbc1ec8cd9355ab9e0d.jpg"></a> </div><br>  <i><font color="gray">Sujeito a <a href="https://www.google.com/nonprofits/eligibility/" rel="nofollow">condi√ß√µes</a> , o Google para organiza√ß√µes sem fins lucrativos n√£o se aplica a institui√ß√µes de ensino.</font></i> <br><br>  Sei que o Google teoricamente ap√≥ia projetos "socialmente √∫teis", e representantes de uma organiza√ß√£o sem fins lucrativos (como eu) <a href="https://www.google.com/nonprofits/offerings/google-earth-and-maps.html" rel="nofollow">podem solicitar uma concess√£o</a> para cobrir custos se o Google concordar com o valor do projeto.  N√£o sei como eles se sentiriam em rela√ß√£o ao NUKEMAP, mas, de qualquer forma, isso n√£o importa: representantes de institui√ß√µes de ensino (mesmo organiza√ß√µes sem fins lucrativos como o meu) <i><a href="https://www.google.com/nonprofits/eligibility/" rel="nofollow">n√£o</a></i> s√£o <i><a href="https://www.google.com/nonprofits/eligibility/" rel="nofollow">eleg√≠veis</a></i> para subs√≠dios.  Porque  Como o Google deseja obter algum tipo de lucro no mercado educacional, ele o direciona para o site do <a href="https://edu.google.com/" rel="nofollow">Google for Education</a> , que oferece um modelo completamente diferente.  A prop√≥sito, n√£o h√° contato por e-mail no site: voc√™ deve declarar que representa toda a escola (n√£o consigo imaginar) e que est√° interessado em instalar produtos do Google em seu campus (n√£o estou interessado) e apenas se confirmar todas as op√ß√µes acima (como Eu fiz apenas para chegar at√© eles), voc√™ pode finalmente falar um pouco com eles. <br><br>  <i>Literalmente, nada</i> no site indica acesso preferencial √† API do Google Maps, mas √© poss√≠vel solicitar esse acesso √† plataforma em nuvem do Google Cloud, aparentemente para tarefas de aprendizado de m√°quina.  Depois de enviar o aplicativo por e-mail, eles dizem que o empr√©stimo alocado no Google Cloud pode ser usado para pagar pela API do Google Maps. <br><br>  Neste ponto, eu j√° abandonei o Google no meu cora√ß√£o.  Simplesmente n√£o vale a pena.  Deixe-me declarar as raz√µes: <br><br><ul><li>  Eles claramente n√£o se importam com pequenos desenvolvedores.  Isso √© bastante √≥bvio para quem tenta trabalhar com seus produtos.  Ou√ßa, entendo que o licenciamento de grandes corpora√ß√µes √© a principal fonte de lucro.  Mas o Google est√° fingindo que n√£o √© apenas para eles ... simplesmente n√£o cumpre essas promessas. <br></li><li>  Eles n√£o v√™em a diferen√ßa entre universidades e pesquisadores individuais.  Essa √© uma enorme diferen√ßa em termos de escala, objetivos e recursos.  Eu n√£o fa√ßo pol√≠tica universit√°ria no campo da tecnologia da informa√ß√£o, fa√ßo pesquisas. <br></li><li>  Eles s√£o inconstantes.  A quest√£o n√£o √© apenas que eles mudam rapidamente os esquemas de pre√ßos e frequentemente param de oferecer suporte a seus produtos.  O fato √© que eles lan√ßam novos produtos, os promovem, incentivam a comunidade a us√°-los para criar coisas "incr√≠veis" e depois desistem de apoiar a longo prazo.  Projetos muito legais atrofiam e morrem por causa disso.  √Äs vezes, eles s√£o vendidos para outras empresas (por exemplo, o SketchUp), que depois mudam completamente o modelo de neg√≥cios.  Mais uma vez, entendo a abordagem do Google - lan√ßar o maior n√∫mero poss√≠vel de projetos e ver qual deles √© bem-sucedido: revolu√ß√£o e destrui√ß√£o em vez de infraestrutura etc. etc. Conhe√ßo os princ√≠pios do Google, √© muito dif√≠cil for√ßar-se a colocar todos os ovos em sua cesta. <br></li><li>  N√£o quero me preocupar se o Google considera meu trabalho um "bem social", n√£o quero me preocupar com a renova√ß√£o anual da concess√£o, que esta unidade de patroc√≠nio do Google desapare√ßa amanh√£ e assim por diante.  Muita incerteza.  Voc√™ sabe o qu√£o dif√≠cil √© conversar com um funcion√°rio real do Google?  N√£o estou dizendo que isso √© imposs√≠vel: eles me ajudaram a recusar algumas das taxas que assumi, sem entender as tarifas - mas os procedimentos se arrastaram por <i>meses</i> e, enquanto isso, enviavam colecionadores para mim. </li></ul><br>  Mas a coisa mais importante: hoje existem <i>alternativas bastante vi√°veis</i> .  √â por isso que n√£o entendo a mudan√ßa no modelo de pre√ßos, a menos que conscientemente decidam abandonar completamente os pequenos desenvolvedores.  Ap√≥s um pouco de pesquisa, decidi que o <a href="https://www.mapbox.com/" rel="nofollow">MapBox</a> (cujas tarifas s√£o mais semelhantes √†s tarifas anteriores do Google) √© totalmente compat√≠vel com meu or√ßamento e, usando a biblioteca <a href="https://leafletjs.com/" rel="nofollow">Leaflet de</a> c√≥digo aberto, voc√™ pode migrar facilmente para um novo servi√ßo.  Eu tive que trabalhar um pouco, porque o Leaflet fora da caixa n√£o suporta desenhar grandes c√≠rculos, por isso <a href="https://github.com/nuclearsecrecy/Leaflet.greatCircle" rel="nofollow">escrevi um plugin</a> . <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/j4/mn/ng/j4mnngxqgvz0iq4bftgphnxko6u.jpeg"></a> <br>  <i><font color="gray"><a href="https://nuclearsecrecy.com/nukemap/" rel="nofollow">NUKEMAP</a> hoje (vers√£o 2.65; eu rolo regularmente pequenas atualiza√ß√µes), com o c√≥digo base Mapbox GL + Leaflet.</font></i>  <i><font color="gray">Observe que um raio de 1 psi recentemente parece mostrar mais realisticamente qual √°rea ser√° afetada por uma explos√£o nuclear</font></i> <br><br>  Agora, mesmo as tarifas modestas do MapBox podem resultar em uma quantia tang√≠vel para mim, mas elas me concederam extremamente generosamente "empr√©stimos" porque ap√≥iam esse trabalho.  Para descobrir, bastava enviar uma carta e depois falar ao telefone com uma pessoa real.  E essa pessoa real era muito √∫til, era f√°cil entrar em contato com ele e at√© me contatava de vez em quando se o servi√ßo implementasse uma nova fun√ß√£o (por exemplo, Mapbox GL) que pode fazer o site funcionar melhor e mais barato.  Ou seja, em todos os aspectos, √© exatamente o oposto do Google. <br><br>  Assim, NUKEMAP e <a href="https://nuclearsecrecy.com/missilemap/" rel="nofollow">MISSILEMAP</a> mudaram completamente para o MapBox + Leaflet.  A √∫nica fun√ß√£o que n√£o foi f√°cil de transferir foram as ‚Äúconseq√º√™ncias humanit√°rias‚Äù da explos√£o (ela se baseia na biblioteca do Google Places), mas no final tamb√©m vou encontrar uma maneira de integr√°-la. <br><br>  Em um sentido mais amplo, eu, como professor, deveria fazer uma pergunta: os alunos devem recomendar a API do Google Maps se estiverem pensando na id√©ia de algum tipo de site "revolucion√°rio"?  A resposta simples: de maneira alguma.  Se voc√™ se tornar muito popular na plataforma do Google (ou mesmo "moderadamente popular"), dever√° muito dinheiro a eles.  Portanto, excluirei o Google Maps do meu curso de visualiza√ß√£o de dados: agora usaremos o Leaflet.  Pe√ßo desculpas por ter abordado este t√≥pico, mas achei que at√© mesmo os n√£o desenvolvedores podem estar se perguntando como essas tecnologias funcionam "sob o cap√¥" e quais fatores precisam ser considerados ao desenvolver sites. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/zk/gi/tg/zkgitg6r7c8ajgrs6rx6xttselc.jpeg"></a> <br>  <i><font color="gray">Um exemplo simples de como uma ferramenta de c√°lculo de dose de radia√ß√£o pode salvar uma vida.</font></i>  <i><font color="gray">No andar de cima, fica claro que, depois de uma explos√£o de 20 quil√¥metros no centro de Nova York, permanecer no meu escrit√≥rio por 24 horas, levando em considera√ß√£o as condi√ß√µes clim√°ticas no momento da publica√ß√£o, estarei muito, muito morto.</font></i>  <i><font color="gray">Em vez disso, eu rapidamente corro para um boliche no por√£o do Instituto de Tecnologia Stevens (meu abrigo preferido, porque est√° escondido bem no fundo da colina rochosa no topo da qual um edif√≠cio de 13 andares √© constru√≠do) - e nas mesmas 24 horas eu recebo radia√ß√£o que √© apenas um pouco aumentar o risco de c√¢ncer a longo prazo</font></i> <br><br>  E mais uma boa not√≠cia: eu adicionei ao NUKEMAP um recurso que eu desejava implementar h√° muito tempo.  O fato √© que o atual modelo de precipita√ß√£o radioativa ( <a href="https://nuclearsecrecy.com/nukemap/faq/" rel="nofollow">modelo de Miller</a> ) √© um pouco dif√≠cil de entender, fornecendo apenas uma "vaga id√©ia da √°rea de contamina√ß√£o".  Estudei alguns outros modelos, mas ao mesmo tempo queria tornar a vers√£o atual mais compreens√≠vel (cuja vantagem √© que ela √© calculada e visualizada muito rapidamente). <br><br>  Os contornos do modelo de Miller mostram a intensidade da dose (em rad / h) em H + 1 horas.  Assim, o contorno "100 rad / hora" significa: "Esta √°rea ser√° coberta com precipita√ß√£o radioativa, que, ap√≥s uma hora ap√≥s a detona√ß√£o, apresentava uma intensidade de radia√ß√£o de 100 rad / hora, se a precipita√ß√£o realmente chegasse l√° naquele momento".  Portanto, para calcular sua dose de radia√ß√£o, √© necess√°rio calcular o tempo real de chegada das precipita√ß√£o radioativas (vento a favor do vento), qual √© a pot√™ncia da radia√ß√£o no momento da chegada e como ela diminuir√° nas pr√≥ximas horas.  Tamb√©m √© aconselh√°vel conhecer o material da parede entre voc√™ e a precipita√ß√£o radioativa, uma vez que as paredes reduzir√£o ligeiramente a dose absorvida.  Tudo isso √© bastante dif√≠cil de calcular manualmente. <br><br>  Portanto, adicionei a fun√ß√£o "localiza√ß√£o da sonda" para coletar amostras a qualquer dist√¢ncia do local da explos√£o.  Ele calcula o tempo de chegada de precipita√ß√£o radioativa (com base na dist√¢ncia, for√ßa e dire√ß√£o do vento), a intensidade da radia√ß√£o no momento da chegada.  Ent√£o voc√™ pode ver qual ser√° a dose total absorvida em um determinado local, digamos, 24 horas ap√≥s a detona√ß√£o.  Basicamente, a f√≥rmula padr√£o para a taxa de decaimento dos produtos de fiss√£o √© usada aqui.  Permite aplicar o ‚Äúfator de prote√ß√£o‚Äù de acordo com o tipo de edif√≠cio em que voc√™ est√° (o fator de prote√ß√£o √© apenas um divisor: um fator de prote√ß√£o de 10 reduz a dose absorvida em um fator de dez).  Tudo isso ajuda a estudar o efeito de precipita√ß√£o radioativa em uma pessoa e a ver quais abrigos s√£o mais eficazes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481024/">https://habr.com/ru/post/pt481024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481012/index.html">O que aprendi em 10 anos no Stack Overflow</a></li>
<li><a href="../pt481014/index.html">Eu / n√≥s n√£o estamos hospedando Ayhor. Ou como cuspir na cara da ind√∫stria</a></li>
<li><a href="../pt481016/index.html">Experi√™ncia VonmoTrade. Parte 1: Trocas e tecnologia moderna</a></li>
<li><a href="../pt481018/index.html">E, novamente, sobre a prote√ß√£o de infra-estruturas virtuais</a></li>
<li><a href="../pt481020/index.html">Escrevendo um simulador de digita√ß√£o por toque usando JavaScript puro: Parte 2</a></li>
<li><a href="../pt481028/index.html">Guia para organizar uma conex√£o remota com um PLC industrial usando o OpenVPN</a></li>
<li><a href="../pt481030/index.html">Que tipo de cyberdec eu gostaria de fazer por mim mesmo</a></li>
<li><a href="../pt481032/index.html">Por que foi poss√≠vel hackear? Provavelmente porque o atacante</a></li>
<li><a href="../pt481034/index.html">T√∫nel de VPN direto entre computadores por meio de provedores NAT (sem VPS, usando um servidor STUN e Yandex.Disk)</a></li>
<li><a href="../pt481036/index.html">30 Utilit√°rios para ferramentas de desenvolvedor do Firefox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>