<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëâüèø üëéüèø üîó Angular: Erstellen und Ver√∂ffentlichen einer Bibliothek üè∏ ü¶ñ ü§Ø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beginnen Sie von vorne 
 Wenn der Speicher mir recht tut, wurde es ab Version 6 im Winkel m√∂glich, verschiedene Arten von Projekten in einem Arbeitsbe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Angular: Erstellen und Ver√∂ffentlichen einer Bibliothek</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452262/"><h3>  Beginnen Sie von vorne </h3><br>  Wenn der Speicher mir recht tut, wurde es ab Version 6 im Winkel m√∂glich, verschiedene Arten von Projekten in einem Arbeitsbereich zu erstellen: Anwendung und Bibliothek. <br><br>  Bis zu diesem Zeitpunkt verwendeten Personen, die eine Komponentenbibliothek erstellen wollten, h√∂chstwahrscheinlich das ausgezeichnete und n√ºtzliche ng-packagr-Paket, mit dessen Hilfe das Paket in dem f√ºr Angular akzeptierten Format erstellt werden konnte.  Eigentlich habe ich die vorherige Bibliothek mit diesem Tool erstellt.  Jetzt hat das Angular-Team ng-packagr in angle-cli aufgenommen und Schaltpl√§ne zum Erstellen und Erstellen von Bibliotheken hinzugef√ºgt, das Angular.json-Format erweitert und einige weitere Annehmlichkeiten hinzugef√ºgt.  Gehen wir jetzt von ng new zu npm install √ºber - von der Erstellung einer leeren Bibliothek √ºber die Ver√∂ffentlichung bis hin zum Import in ein Drittanbieterprojekt. <br><a name="habracut"></a><br>  Der Arbeitsbereich wird wie gewohnt erstellt <br><br><pre><code class="bash hljs">ng new <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-app</code> </pre> <br>  Arbeitsbereich und Anwendungsprojekt werden erstellt. Schauen Sie sich angle.json an <br><br><pre> <code class="json hljs">{ ... <span class="hljs-attr"><span class="hljs-attr">"projects"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-app"</span></span>: { ... <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"application"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span> ... } ... } ... }</code> </pre><br>  F√ºgen Sie nun das Bibliotheksprojekt hinzu <br><br><pre> <code class="bash hljs">ng generate library <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib --prefix=tl</code> </pre> <br>  Wir werden den Schl√ºssel --prefix hinzuf√ºgen, um anzuzeigen, dass die Komponenten und Anweisungen das Pr√§fix tl verwenden, dh die Komponenten-Tags sehen aus <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tl-component-name</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tl-component-name</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Mal sehen, in angular.json haben wir ein neues Projekt hinzugef√ºgt <br><br><pre> <code class="json hljs">{ ... <span class="hljs-attr"><span class="hljs-attr">"projects"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-app"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"application"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span> ... }, ... <span class="hljs-attr"><span class="hljs-attr">"test-lib"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">"projects/test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"projects/test-lib/src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"library"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"tl"</span></span> } ... } ... }</code> </pre><br>  Die folgende Struktur wurde im Projektverzeichnis angezeigt <br><br><pre> <code class="json hljs">- projects - test-lib ng-package.json package.json - src public-api.ts - lib test-lib.component.ts test-lib.module.ts test-lib.service.ts</code> </pre><br>  In tsconfig.json gibt es au√üerdem einen Zusatz im Abschnitt "Pfade" <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"paths"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"test-lib/*"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib/*"</span></span> ] }</code> </pre><br>  Wenn Sie nun die Anwendung ausf√ºhren, <pre> <code class="bash hljs">ng serve</code> </pre>  Dann sehen wir eine Standardvorlage f√ºr funktionierende Winkelanwendungen <br><br><h4>  Bibliotheksfunktionalit√§t erstellen </h4><br>  Erstellen wir eine Bibliothek mit einem Dienst, einer Direktive und einer Komponente.  Wir werden den Dienst und die Richtlinie in verschiedene Module einteilen.  Wechseln wir in das Verzeichnis projects / test-lib / src / lib und l√∂schen Sie test-lib. *. Ts. L√∂schen Sie auch den Inhalt von projects / test-lib / src / public-api.ts. <br><br>  Wechseln wir zu Projekten / test-lib / src / lib und erstellen Module, Direktiven, Dienste und Komponenten <br><br><pre> <code class="bash hljs">ng g module list ng g module border ng g service list /*  list*/ ng g component list /*  border*/ ng g directive border</code> </pre><br>  F√ºllen Sie die Komponente, den Dienst und die Direktive mit Logik.  Die Komponente zeigt eine Liste der an die Eingabe gesendeten Zeilen an.  Die Anweisung besteht darin, einen roten Rahmen hinzuzuf√ºgen. Der Dienst f√ºgt jede Sekunde den aktuellen Zeitstempel zum Observable hinzu. <br><br>  Service <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*list.service.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Injectable} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Observable, Subject} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs'</span></span>; @Injectable({ <span class="hljs-attr"><span class="hljs-attr">providedIn</span></span>: <span class="hljs-string"><span class="hljs-string">'root'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListService</span></span></span><span class="hljs-class"> </span></span>{ timer: any; private list$: Subject&lt;string&gt; = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Subject&lt;string&gt;(); list: Observable&lt;string&gt; = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list$.asObservable(); <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timer = setInterval(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextItem.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), <span class="hljs-number"><span class="hljs-number">1000</span></span>); } nextItem() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> now = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentTime = now.getTime().toString(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list$.next(currentTime); } }</code> </pre><br>  Komponentenliste und Modul <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*list.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {CommonModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListComponent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./list/list.component'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ ListComponent ], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: [ ListComponent ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ CommonModule ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListModule</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-comment"><span class="hljs-comment">/*list.component.ts*/</span></span> @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'tl-list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;ul&gt; &lt;li *ngFor="let item of list"&gt;{{item}}&lt;/li&gt; &lt;/ul&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./list.component.css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">changeDetection</span></span>: ChangeDetectionStrategy.OnPush }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ @Input() list: string[]; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { } ngOnInit() { } }</code> </pre><br>  Rahmen <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*border.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {CommonModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BorderDirective} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./border.directive'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ BorderDirective ], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: [ BorderDirective ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ CommonModule ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BorderModule</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-comment"><span class="hljs-comment">/*border.directive.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Directive, ElementRef, OnInit} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; @Directive({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'[tlBorder]'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BorderDirective</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ private element$: HTMLElement; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private elementRef$: ElementRef) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element$ = elementRef$.nativeElement; } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element$.style.border = <span class="hljs-string"><span class="hljs-string">'solid 1px red'</span></span>; } }</code> </pre><br>  !  Es ist wichtig.  Beim Generieren von Komponenten und Bibliotheken erstellt cli keinen Export. F√ºgen Sie daher unbedingt die Komponenten und Anweisungen hinzu, die im Exportabschnitt in den Modulen verf√ºgbar sein sollten. <br><br>  Damit in Zukunft Klassen aus der Bibliothek verf√ºgbar sind, werden wir public-api.ts Code hinzuf√ºgen <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list.service'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/border/border.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/border/border.directive'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list/list.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list/list/list.component'</span></span>;</code> </pre><br><h4>  Verbinden einer Bibliothek in einer Testanwendung </h4><br>  Lassen Sie uns das Bibliotheksprojekt zusammenstellen <br><br><pre> <code class="bash hljs">ng build <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib --watch</code> </pre> <br>  Als n√§chstes importieren wir in app.module die Module mit der Komponente und der Direktive und f√ºgen die Logik hinzu <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*app.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BrowserModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/platform-browser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {AppRoutingModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app-routing.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {AppComponent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BorderModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*!!! ,    ,     */</span></span> @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ AppComponent ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ BrowserModule, AppRoutingModule, ListModule, BorderModule ], <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">bootstrap</span></span>: [AppComponent] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br>  Und verwenden Sie die St√ºcke aus unserer Bibliothek in der Anwendung <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Component, OnInit} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListService} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-root'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;tl-list [list]="list"&gt;&lt;/tl-list&gt; &lt;div tlBorder&gt;I am bordered now&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./app.component.styl'</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ list: string[] = []; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private svc$: ListService) { } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.svc$.list.subscribe((<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list = [...this.list, value])); } }</code> </pre><br>  F√ºhren Sie die Anwendung aus und √ºberpr√ºfen Sie sie. Alles funktioniert: <br><br><img src="https://habrastorage.org/webt/co/gb/uj/cogbujfu-f_m91fyv3gbwsyi5gs.png"><br><br><h4>  Montage und Ver√∂ffentlichung </h4><br>  Es bleibt zu sammeln und das Paket zu ver√∂ffentlichen.  Zum Zusammenstellen und Ver√∂ffentlichen ist es praktisch, Skripten in der Anwendung package.json Befehle hinzuzuf√ºgen <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"test-app"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: { ... <span class="hljs-attr"><span class="hljs-attr">"lib:build"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lib:watch"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build test-lib --watch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lib:publish"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run lib:build &amp;&amp; cd dist/test-lib &amp;&amp; npm pack npm publish"</span></span>, ... } }</code> </pre><br>  Die Bibliothek wird jetzt nach der Installation in einem anderen Winkelprojekt zusammengestellt und ver√∂ffentlicht <br><pre> <code class="bash hljs">npm install <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib</code> </pre> <br>  Sie k√∂nnen Komponenten und Anweisungen verwenden. <br><br><h4>  Kleine Notiz </h4><br>  Wir haben eine ganze Familie von npm-Paketen in unserem Unternehmen, daher sollte das Paket in unserem Fall mit dem Namespace als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">company</a> / test-lib ver√∂ffentlicht werden.  Dazu nehmen wir nur wenige √Ñnderungen vor. <br><br>  Benennen Sie das Paket in der package.json-Bibliothek um <br><br><pre> <code class="json hljs">/* projects/test-lib/package.json */ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"@company/test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"peerDependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@angular/common"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@angular/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.0"</span></span> } }</code> </pre><br>  Damit in der Testanwendung auf die Bibliothek √ºber den Namen mit dem Namespace zugegriffen werden kann, werden wir tsconfig ein wenig korrigieren <br><br><pre> <code class="json hljs">/* test-app/tsconfig.json */ *** <span class="hljs-string"><span class="hljs-string">"paths"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@company/test-lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"@company/test-lib/*"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib/*"</span></span> ] } ***</code> </pre><br>  Und in der Testanwendung ersetzen Sie beispielsweise die Importe <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>;</code> </pre><br>  Ersetzen durch <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@company/test-lib'</span></span>;</code> </pre><br>  Dies ist das Ende. <br><br>  <b>PS:</b> Als ich dieses Thema studiert habe, habe ich einmal die folgenden Artikel gelesen <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die eckige Bibliotheksreihe</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erstellen einer npm-f√§higen Komponentenbibliothek mit Angular</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de452262/">https://habr.com/ru/post/de452262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de452246/index.html">Interview mit Vitaly Bragilevsky: ‚ÄûEine Welt, in der jeder in Haskell programmieren wird, ist kaum eine gute Welt.‚Äú</a></li>
<li><a href="../de452248/index.html">Wir pumpen die Entwicklung auf Vue anhand von Mustern: HOC</a></li>
<li><a href="../de452252/index.html">Sicherheit im Google-Stil</a></li>
<li><a href="../de452254/index.html">Tipps und Tricks zur digitalen Forensik: So finden Sie die Gl√ºcksm√ºnze eines Eindringlings</a></li>
<li><a href="../de452258/index.html">Corda - Open Source Blockchain f√ºr Unternehmen</a></li>
<li><a href="../de452264/index.html">Wie wir die Seite f√ºr den Mascot Car Award gemacht haben</a></li>
<li><a href="../de452266/index.html">Serverlose Racks</a></li>
<li><a href="../de452268/index.html">C # WPF analog Window.ShowDialog () oder mit DispatcherFrame umgehen</a></li>
<li><a href="../de452270/index.html">Die Xamarin-API-Dokumentation ist jetzt √∂ffentlich verf√ºgbar</a></li>
<li><a href="../de452272/index.html">M√§dchen unter dem Wasserfall</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>