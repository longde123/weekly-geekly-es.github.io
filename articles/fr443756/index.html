<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèª ‚öïÔ∏è üí≠ Conception de la classe: qu'est-ce qui est bon? ‚õ¥Ô∏è üßï üè†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publi√© par Denis Tsyplakov , architecte de solutions, DataArt 

 Au fil des ans, j'ai constat√© que les programmeurs r√©p√©taient de temps en temps les m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conception de la classe: qu'est-ce qui est bon?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/443756/"><img src="https://habrastorage.org/webt/rg/pn/co/rgpncowcmrekbk3lgzzkg1qcl-4.jpeg"><br><br>  <i>Publi√© par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Denis Tsyplakov</a> , architecte de solutions, DataArt</i> <br><br>  Au fil des ans, j'ai constat√© que les programmeurs r√©p√©taient de temps en temps les m√™mes erreurs.  Malheureusement, les livres sur les aspects th√©oriques du d√©veloppement ne permettent pas de les √©viter: les livres n'ont g√©n√©ralement pas de conseils concrets et pratiques.  Et je devine m√™me pourquoi ... <br><br>  La premi√®re recommandation qui vient √† l'esprit lorsqu'il s'agit, par exemple, de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">journalisation</a> ou de conception de classe est tr√®s simple: "Ne faites pas de conneries."  Mais l'exp√©rience montre que ce n'est certainement pas suffisant.  La conception des classes dans ce cas est un bon exemple - un mal de t√™te √©ternel qui d√©coule du fait que chacun regarde cette question √† sa mani√®re.  Par cons√©quent, j'ai d√©cid√© de rassembler des conseils de base dans un article, apr√®s quoi vous √©viterez un certain nombre de probl√®mes typiques et, surtout, en sauverez vos coll√®gues.  Si certains principes vous semblent banaux (parce qu'ils sont vraiment banaux!) - eh bien, alors ils se sont d√©j√† install√©s dans votre sous-cortex, et votre √©quipe peut √™tre f√©licit√©e. <br><br>  Je ferai une r√©servation, en fait, nous nous concentrerons sur les cours uniquement pour des raisons de simplicit√©.  On peut dire presque la m√™me chose des fonctions ou de tout autre √©l√©ment constitutif de l'application. <a name="habracut"></a><br>  Si l'application fonctionne et ex√©cute la t√¢che, sa conception est bonne.  Ou pas?  D√©pend de la fonction objective de l'application;  ce qui est tout √† fait adapt√© √† une application mobile qui doit √™tre pr√©sent√©e une fois sur le salon peut ne pas convenir √† la plateforme de trading qu'une banque d√©veloppe depuis des ann√©es.  Dans une certaine mesure, le principe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SOLID</a> peut √™tre appel√© la r√©ponse √† cette question, mais il est trop g√©n√©ral - je voudrais des instructions plus sp√©cifiques qui peuvent √™tre mentionn√©es dans une conversation avec des coll√®gues. <br><br><h2>  Application cible </h2><br>  Puisqu'il ne peut y avoir de r√©ponse universelle, je propose de restreindre la port√©e.  Supposons que nous √©crivons une application m√©tier standard qui accepte les demandes via HTTP ou une autre interface, impl√©mente une logique au-dessus d'eux, puis fait une demande au service suivant de la cha√Æne ou stocke les donn√©es re√ßues quelque part.  Pour simplifier, supposons que nous utilisons le framework Spring IoC, car il est assez courant maintenant et les autres frameworks sont assez similaires.  Que dire d'une telle application? <br><br><ul><li>  Le temps que le processeur passe √† traiter une demande est important, mais pas critique - une augmentation de 0,1% du temps ne le sera pas. </li><li>  Il n'y a pas de t√©raoctets de m√©moire √† notre disposition, mais si l'application prend 50 √† 100 Ko suppl√©mentaires, ce ne sera pas un d√©sastre. </li><li> Bien s√ªr, plus l'heure de d√©but est courte, mieux c'est.  Mais il n'y a pas de diff√©rence fondamentale entre 6 sec et 5,9 sec. </li></ul><br><h2>  Crit√®res d'optimisation </h2><br>  Qu'est-ce qui est important pour nous dans ce cas? <br><br>  Le code du projet est susceptible d'√™tre utilis√© par l'entreprise pendant plusieurs, voire plus de dix ans. <br><br>  Le code √† diff√©rents moments sera modifi√© par plusieurs d√©veloppeurs qui ne se connaissent pas. <br>  Il est possible que dans quelques ann√©es, les d√©veloppeurs souhaitent utiliser la nouvelle biblioth√®que LibXYZ ou le framework FrABC. <br><br>  √Ä un moment donn√©, une partie du code ou le projet entier peut √™tre fusionn√© avec la base de code d'un autre projet. <br><br>  Au milieu des gestionnaires, il est g√©n√©ralement admis que ces probl√®mes sont r√©solus √† l'aide de la documentation.  La documentation, bien s√ªr, est bonne et utile, car elle est tellement g√©niale lorsque vous commencez √† travailler sur un projet que vous avez cinq tickets ouverts accroch√©s √† vous, le chef de projet vous demande comment vous avez progress√©, et vous devez lire (et vous rappeler) quelque 150 pages de texte √©crites de loin par de brillants √©crivains.  Bien s√ªr, vous aviez quelques jours, voire quelques semaines, √† consacrer au projet, mais, si vous utilisez une arithm√©tique simple, d'une part 5 000 000 d'octets de code, d'autre part, disons 50 heures de travail.  Il s'av√®re qu'il fallait en moyenne injecter 100 Ko de code par heure.  Et ici, tout d√©pend beaucoup de la qualit√© du code.  S'il est propre: facile √† assembler, bien structur√© et pr√©visible, le versement dans un projet semble √™tre un processus nettement moins douloureux.  Ce n'est pas le dernier r√¥le qui est jou√© par la conception des classes.  Pas le dernier. <br><br><h2>  Ce que nous voulons de la conception des cours </h2><br>  De tout ce qui pr√©c√®de, de nombreuses conclusions int√©ressantes peuvent √™tre tir√©es sur l'architecture g√©n√©rale, la pile technologique, le processus de d√©veloppement, etc. Mais d√®s le d√©but, nous avons d√©cid√© de parler de la conception des classes, voyons quelles choses utiles nous pouvons apprendre de ce qui a √©t√© dit plus t√¥t √† ce sujet. <br><br><ul><li>  J'aimerais qu'un d√©veloppeur qui ne conna√Æt pas bien le code de l'application puisse comprendre ce que fait cette classe en regardant une classe.  Et vice versa - en regardant une exigence fonctionnelle ou non fonctionnelle, je pourrais rapidement deviner o√π se trouve l'application dans les classes qui en sont responsables.  Eh bien, il est souhaitable que la mise en ≈ìuvre des exigences ne soit pas ¬´r√©partie¬ª dans toute l'application, mais concentr√©e dans une classe ou un groupe compact de classes.  Permettez-moi d'expliquer avec un exemple le type d'anti-motif que je veux dire.  Supposons que nous devons v√©rifier que 10 demandes d'un certain type ne peuvent √™tre ex√©cut√©es que par des utilisateurs qui ont plus de 20 points dans leur compte (peu importe ce que cela signifie).  Une mauvaise fa√ßon de mettre en ≈ìuvre une telle exigence consiste √† ins√©rer un ch√®que au d√©but de chaque demande.  Ensuite, la logique sera r√©partie sur 10 m√©thodes, dans diff√©rents contr√¥leurs.  Un bon moyen est de cr√©er un filtre ou WebRequestInterceptor et de tout v√©rifier au m√™me endroit. </li><li>  Je veux que les changements dans une classe n'affectant pas le contrat de classe n'affectent pas, eh bien, ou (soyons r√©alistes!) Au moins n'affectent pas beaucoup les autres classes.  En d'autres termes, je veux r√©sumer la mise en ≈ìuvre d'un contrat de classe. </li><li>  J'aimerais qu'il soit possible, en modifiant le contrat de classe, en parcourant la cha√Æne d'appels et en faisant des usages de recherche, de trouver les classes que ce changement affecte.  Autrement dit, je veux que les classes n'aient pas de d√©pendances indirectes. </li><li>  Si possible, j'aimerais que les processus de traitement des demandes consistant en plusieurs √©tapes √† un seul niveau ne soient pas √©tal√©s par le code de plusieurs classes, mais soient d√©crits au m√™me niveau.  C'est tr√®s bien si le code d√©crivant un tel processus de traitement tient sur un √©cran √† l'int√©rieur d'une m√©thode avec un nom clair.  Par exemple, nous devons rechercher tous les mots sur une ligne, appeler un service tiers pour chaque mot, obtenir une description du mot, appliquer un formatage √† la description et enregistrer les r√©sultats dans la base de donn√©es.  Il s'agit d'une s√©quence d'actions en 4 √©tapes.  Il est tr√®s pratique de comprendre le code et de changer sa logique lorsqu'il existe une m√©thode o√π ces √©tapes se succ√®dent. </li><li>  Je veux vraiment que les m√™mes choses dans le code soient impl√©ment√©es de la m√™me mani√®re.  Par exemple, si nous acc√©dons √† la base de donn√©es imm√©diatement √† partir du contr√¥leur, il est pr√©f√©rable de le faire partout (m√™me si je n'appellerais pas une telle bonne pratique de conception).  Et si nous avons d√©j√† entr√© les niveaux de services et de r√©f√©rentiels, il est pr√©f√©rable de ne pas contacter la base de donn√©es directement depuis le contr√¥leur. </li><li>  J'aimerais que le nombre de classes / interfaces non directement responsables des exigences fonctionnelles et non fonctionnelles ne soit pas tr√®s important.  Travailler avec un projet dans lequel il y a deux interfaces pour chaque classe avec logique, une hi√©rarchie complexe d'h√©ritage de cinq classes, une fabrique de classe et une fabrique de classe abstraite, est assez difficile. </li></ul><br><h2>  Recommandations pratiques </h2><br>  Apr√®s avoir formul√© des souhaits, nous pouvons d√©finir des √©tapes sp√©cifiques qui nous permettront d'atteindre nos objectifs. <br><br><h3>  M√©thodes statiques </h3><br>  En guise d'√©chauffement, je vais commencer par une r√®gle relativement simple.  Vous ne devez pas cr√©er de m√©thodes statiques √† moins qu'elles ne soient n√©cessaires au fonctionnement de l'une des biblioth√®ques utilis√©es (par exemple, vous devez cr√©er un s√©rialiseur pour un type de donn√©es). <br><br>  En principe, il n'y a rien de mal √† utiliser des m√©thodes statiques.  Si le comportement d'une m√©thode d√©pend enti√®rement de ses param√®tres, pourquoi ne pas vraiment la rendre statique.  Mais vous devez prendre en compte le fait que nous utilisons Spring IoC, qui sert √† lier les composants de notre application.  Spring IoC traite des concepts des haricots et de leur port√©e.  Cette approche peut √™tre m√©lang√©e avec des m√©thodes statiques regroup√©es en classes, mais la compr√©hension d'une telle application et m√™me la modification de quelque chose (si, par exemple, vous devez passer un param√®tre global √† une m√©thode ou une classe) peut √™tre tr√®s difficile. <br><br>  Dans le m√™me temps, les m√©thodes statiques par rapport aux bacs IoC donnent un avantage tr√®s insignifiant dans la vitesse d'invocation des m√©thodes.  Et sur cela, peut-√™tre, les avantages s'arr√™tent. <br><br>  Si vous ne cr√©ez pas une fonction m√©tier qui n√©cessite un grand nombre d'appels ultrarapides entre diff√©rentes classes, il est pr√©f√©rable de ne pas utiliser de m√©thodes statiques. <br><br>  Ici, le lecteur peut demander: "Mais qu'en est-il des classes StringUtils et IOUtils?"  En effet, une tradition s'est d√©velopp√©e dans le monde Java - pour mettre des fonctions auxiliaires pour travailler avec des cha√Ænes et des flux d'entr√©e-sortie dans des m√©thodes statiques et les collecter sous l'√©gide des classes SomethingUtils.  Mais cette tradition me semble plut√¥t moussue.  Si vous le suivez, bien s√ªr, on ne s'attend pas √† de grands dommages - tous les programmeurs Java y sont habitu√©s.  Mais cela n'a aucun sens dans une telle action rituelle.  D'une part, pourquoi ne pas rendre le bean StringUtils, d'autre part, si vous ne rendez pas le bean et toutes les m√©thodes auxiliaires statiques, rendons d√©j√† les classes parapluie statiques StockTradingUtils et BlockChainUtils.  Commencer √† mettre de la logique dans des m√©thodes statiques, dessiner une fronti√®re et s'arr√™ter est difficile.  Je vous conseille de ne pas commencer. <br><br>  Enfin, n'oubliez pas que, gr√¢ce √† Java 11, bon nombre des m√©thodes d'assistance qui parcouraient les d√©veloppeurs de projet en projet depuis des d√©cennies, faisaient soit partie de la biblioth√®que standard, soit √©taient fusionn√©es dans des biblioth√®ques, par exemple, dans Google Guava. <br><br><h3>  Contrat de classe atomique et compact </h3><br>  Il existe une r√®gle simple qui s'applique au d√©veloppement de tout syst√®me logiciel.  En regardant n'importe quelle classe, vous devriez pouvoir expliquer rapidement et de mani√®re compacte, sans recourir √† de longues fouilles, ce que fait cette classe.  S'il est impossible d'adapter l'explication dans un paragraphe (ce n'est pas n√©cessaire, cependant, exprim√© dans une phrase), il pourrait √™tre utile de r√©fl√©chir √† cette classe et de la diviser en plusieurs classes atomiques.  Par exemple, la classe "Recherche des fichiers texte sur un disque et compte le nombre de lettres Z dans chacun d'eux" - un bon candidat pour la d√©composition "recherche sur un disque" + "compte le nombre de lettres". <br><br>  En revanche, ne faites pas de classes trop petites, chacune √©tant con√ßue pour une action.  Mais quelle taille devrait alors avoir la classe?  Les r√®gles de base sont les suivantes: <br><br><ul><li>  Id√©alement, lorsque le contrat de classe correspond √† la description de la fonction commerciale (ou de la sous-fonction, selon la fa√ßon dont les exigences sont organis√©es).  Ce n'est pas toujours possible: si une tentative de se conformer √† cette r√®gle conduit √† la cr√©ation d'un code encombrant et non √©vident, il est pr√©f√©rable de diviser la classe en parties plus petites. </li><li>  Une bonne m√©trique pour √©valuer la qualit√© d'un contrat de classe est le rapport de sa complexit√© intrins√®que √† la complexit√© du contrat.  Par exemple, un tr√®s bon (bien que fantastique) contrat de classe peut ressembler √† ceci: "La classe a une m√©thode qui re√ßoit une ligne avec une description du sujet en russe √† l'entr√©e et compose une histoire de qualit√© ou m√™me une histoire sur un sujet donn√© en cons√©quence."  Ici, le contrat est simple et g√©n√©ralement compris.  Son impl√©mentation est extr√™mement complexe, mais la complexit√© est cach√©e √† l'int√©rieur de la classe. </li></ul><br>  Pourquoi cette r√®gle est-elle importante? <br><br><ul><li>  Premi√®rement, la capacit√© de s‚Äôexpliquer clairement ce que fait chacune des classes est toujours utile.  Malheureusement, loin de tous les d√©veloppeurs de projets peuvent le faire.  Vous pouvez souvent entendre quelque chose comme: ¬´Eh bien, c'est un tel wrapper sur la classe Path, que nous avons en quelque sorte cr√©√© et parfois utilis√© √† la place de Path.  Elle a √©galement une m√©thode qui peut doubler tous les chemins d'acc√®s File.separator - nous avons besoin de cette m√©thode lors de l'enregistrement des rapports dans le cloud, et pour une raison quelconque, elle s'est retrouv√©e dans la classe Path. " </li><li>  Le cerveau humain est capable de fonctionner simultan√©ment avec pas plus de cinq √† dix objets.  La plupart des gens n'en ont pas plus de sept.  En cons√©quence, si un d√©veloppeur doit fonctionner avec plus de sept objets pour r√©soudre un probl√®me, il manquera quelque chose ou sera oblig√© de regrouper plusieurs objets sous un "parapluie" logique.  Et si vous devez encore l'emballer, pourquoi ne pas le faire tout de suite, consciemment, et donner √† ce parapluie un nom significatif et un contrat clair. </li></ul><br>  Comment v√©rifier que tout est suffisamment granuleux?  Demandez √† un coll√®gue de vous accorder 5 (cinq) minutes.  Prenez la partie de l'application que vous travaillez actuellement √† cr√©er.  Pour chaque classe, expliquez √† un coll√®gue ce que fait exactement cette classe.  Si vous ne rentrez pas dans 5 minutes, ou si un coll√®gue ne comprend pas pourquoi tel ou tel cours est n√©cessaire, vous devriez peut-√™tre changer quelque chose.  Eh bien, ou ne pas changer et refaire l'exp√©rience, avec un autre coll√®gue. <br><br><h3>  D√©pendances de classe </h3><br>  Supposons que nous devons s√©lectionner des sections de texte li√©es de plus de 100 octets pour un fichier PDF compress√© dans une archive ZIP et les enregistrer dans la base de donn√©es.  Un antipattern populaire dans de tels cas ressemble √† ceci: <br><br><ul><li>  Il existe une classe qui ouvre une archive ZIP, recherche un fichier PDF et le renvoie en tant que InputStream. </li><li>  Cette classe a un lien vers une classe qui recherche dans les paragraphes PDF de texte. </li><li>  La classe qui fonctionne avec PDF, √† son tour, a un lien vers la classe qui stocke les donn√©es dans la base de donn√©es. </li></ul><br>  D'une part, tout semble logique: les donn√©es re√ßues, appel√©es directement la classe suivante de la cha√Æne.  Mais en m√™me temps, les contrats de la classe au sommet de la cha√Æne se m√©langent dans les contrats et les d√©pendances de toutes les classes qui entrent dans la cha√Æne derri√®re elle.  Il est beaucoup plus correct de rendre ces classes atomiques et ind√©pendantes les unes des autres, et de cr√©er une autre classe qui impl√©mente r√©ellement la logique de traitement en connectant ces trois classes entre elles. <br><br>  <b>Comment ne pas le faire:</b> <br><br><img src="https://habrastorage.org/webt/aj/tc/dm/ajtcdmr07qxyy_6wao0mfffczkq.png"><br><br>  Qu'est-ce qui ne va pas ici?  La classe qui fonctionne avec les fichiers ZIP transmet les donn√©es √† la classe qui traite le PDF et qui, √† son tour, transmet les donn√©es √† la classe qui fonctionne avec la base de donn√©es.  Cela signifie que la classe qui fonctionne avec ZIP, par cons√©quent, pour une raison quelconque, d√©pend des classes qui fonctionnent avec la base de donn√©es.  De plus, la logique de traitement est r√©partie sur trois classes, et pour la comprendre, il faut parcourir les trois classes.  Que se passe-t-il si vous avez besoin de paragraphes de texte obtenus √† partir de PDF pour passer √† un service tiers via un appel REST?  Vous devrez changer la classe qui fonctionne avec PDF, et dessiner dedans aussi travailler avec REST. <br><br>  <b>Comment faire:</b> <br><br><img src="https://habrastorage.org/webt/lu/1k/1f/lu1k1fpwvjc8w660lk9ww295p8s.png"><br><br>  Ici, nous avons quatre classes: <br><br><ul><li>  Une classe qui ne fonctionne qu'avec une archive ZIP et renvoie une liste de fichiers PDF (on peut dire - le retour de fichiers est mauvais - ils sont gros et vont casser l'application. Mais dans ce cas, lisons le mot ¬´renvoie¬ª au sens large. Par exemple, il renvoie Stream de InputStream ) </li><li>  La deuxi√®me classe est charg√©e de travailler avec PDF. </li><li>  La troisi√®me classe ne sait rien et ne peut rien faire sauf enregistrer des paragraphes dans la base de donn√©es. </li><li>  Et la quatri√®me classe, qui se compose litt√©ralement de plusieurs lignes de code, contient toute la logique m√©tier qui tient sur un seul √©cran. </li></ul><br>  Je souligne encore une fois qu'en 2019 √† Java il y a au moins deux bons (et un peu moins <br>  bonnes) fa√ßons de ne pas transf√©rer de fichiers et une liste compl√®te de tous les paragraphes en tant qu'objets en m√©moire.  C‚Äôest: <br><br><ol><li>  API Java Stream </li><li>  Rappels  Autrement dit, une classe avec une fonction m√©tier ne transmet pas de donn√©es directement, mais dit ZIP Extractor: voici un rappel pour vous, recherchez les fichiers PDF dans un fichier ZIP, cr√©ez un InputStream pour chaque fichier et appelez le rappel transf√©r√© avec lui. </li></ol><br><h3>  Comportement implicite </h3><br>  Lorsque nous n'essayons pas de r√©soudre un probl√®me compl√®tement nouveau qui n'a √©t√© r√©solu par personne auparavant, mais que nous faisons plut√¥t quelque chose que d'autres d√©veloppeurs ont d√©j√† fait plusieurs centaines (ou centaines de milliers) fois auparavant, tous les membres de l'√©quipe ont des attentes concernant la complexit√© cyclomatique et l'intensit√© des ressources de la solution. .  Par exemple, si nous devons trouver dans un fichier tous les mots commen√ßant par la lettre z, il s'agit d'une lecture s√©quentielle et unique du fichier en blocs √† partir du disque.  Autrement dit, si vous vous concentrez sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://gist.github.com/jboner/2841832 -</a> une telle op√©ration prendra plusieurs microsecondes par 1 Mo, eh bien, peut-√™tre, selon l'environnement de programmation et la charge du syst√®me, plusieurs dizaines, voire une centaine de microsecondes, mais pas une seconde du tout.  Cela prendra plusieurs dizaines de kilo-octets de m√©moire (nous laissons de c√¥t√© la question de ce que nous faisons avec les r√©sultats, c'est le souci d'une autre classe), et le code occupera tr√®s probablement environ un √©cran.  Dans le m√™me temps, nous nous attendons √† ce qu'aucune autre ressource syst√®me ne soit utilis√©e.  Autrement dit, le code ne cr√©e pas de threads, n'√©crit pas de donn√©es sur le disque, n'envoie pas de paquets sur le r√©seau et n'enregistre pas les donn√©es dans la base de donn√©es. <br><br>  C'est l'attente habituelle d'un appel de m√©thode: <br><br><pre><code class="java hljs">zWordFinder.findZWords(inputStream). ...</code> </pre> <br>  Si le code de votre classe ne satisfait pas √† ces exigences pour une raison raisonnable, par exemple, pour classer un mot en z et non z, vous devez appeler la m√©thode REST √† chaque fois (je ne sais pas pourquoi cela pourrait √™tre n√©cessaire, mais imaginons cela) il est n√©cessaire d'√©crire tr√®s attentivement dans le contrat de classe, et c'est tr√®s bien si le nom de la m√©thode indique que la m√©thode est en cours d'ex√©cution quelque part √† consulter. <br><br>  Si vous n'avez aucune raison raisonnable de comportement implicite, r√©√©crivez la classe. <br><br>  Comment comprendre les attentes de la complexit√© et de l'intensit√© des ressources de la m√©thode?  Vous devez recourir √† l'une de ces m√©thodes simples: <br><br><ol><li>  Avec l'exp√©rience, acqu√©rez des horizons assez larges. </li><li>  Demandez √† un coll√®gue - cela peut toujours √™tre fait. </li><li>  Avant de commencer le d√©veloppement, discutez avec les membres de l'√©quipe du plan de mise en ≈ìuvre. </li><li>  Pour vous poser la question: "Mais je n'utilise pas trop de ressources redondantes dans cette m√©thode?"  C'est g√©n√©ralement suffisant. </li></ol><br>  Vous n'avez pas non plus besoin de vous impliquer dans l'optimisation - √©conomiser 100 octets lorsqu'il est utilis√© par la classe 100 000 n'a pas beaucoup de sens pour la plupart des applications. <br><br>  Cette r√®gle ouvre une fen√™tre sur le monde riche de la suring√©nierie, masquant des r√©ponses √† des questions telles que ¬´pourquoi ne pas d√©penser un mois pour √©conomiser 10 octets de m√©moire dans une application qui a besoin de 10 Go pour fonctionner¬ª.  Mais je ne d√©velopperai pas ce sujet ici.  Elle m√©rite un article s√©par√©. <br><br><h3>  Noms de m√©thode implicites </h3><br>  En programmation Java, il existe actuellement plusieurs conventions implicites concernant les noms de classe et leur comportement.  Il n'y en a pas beaucoup, mais il vaut mieux ne pas les casser.  J'essaierai d'√©num√©rer ceux qui me viennent √† l'esprit: <br><br><ul><li>  Constructeur - cr√©e une instance de la classe, peut cr√©er des structures de donn√©es assez ramifi√©es, mais cela ne fonctionne pas avec la base de donn√©es, n'√©crit pas sur le disque, n'envoie pas de donn√©es sur le r√©seau (je dirai que l'enregistreur int√©gr√© peut faire tout cela, mais c'est une autre histoire dans dans tous les cas, cela repose sur la conscience du configurateur de journalisation). </li><li>  Getter - getSomething () - renvoie une sorte de structure m√©moire des profondeurs de l'objet.  Encore une fois, il n'√©crit pas sur le disque, n'effectue pas de calculs complexes, n'envoie pas de donn√©es sur le r√©seau, ne fonctionne pas avec la base de donn√©es (sauf lorsqu'il s'agit d'un champ ORM paresseux, et ce n'est qu'une des raisons pour lesquelles les champs paresseux doivent √™tre utilis√©s avec le plus grand soin) . </li><li>  Setter - setSomething (Quelque chose quelque chose) - d√©finit la valeur de la structure de donn√©es, ne fait pas de calculs complexes, n'envoie pas de donn√©es sur le r√©seau, ne fonctionne pas avec la base de donn√©es.  En r√®gle g√©n√©rale, le setter ne devrait pas impliquer de comportement ni de consommation implicites de ressources informatiques importantes. </li><li>  equals () et hashcode () - rien n'est attendu du tout, sauf pour des calculs et des comparaisons simples en quantit√© lin√©airement d√©pendante de la taille de la structure de donn√©es.  Autrement dit, si nous appelons hashcode pour un objet de trois champs primitifs, il est pr√©vu que N * 3 instructions de calcul simples soient ex√©cut√©es. </li><li>  toSomething () - il est √©galement pr√©vu que cette m√©thode convertisse un type de donn√©es en un autre, et pour la conversion, elle n'a besoin que d'une quantit√© de m√©moire comparable √† la taille des structures et du temps du processeur, qui d√©pend lin√©airement de la taille des structures.  Ici, il convient de noter que la conversion de type ne peut pas toujours √™tre effectu√©e de mani√®re lin√©aire, par exemple, la conversion d'une image pixel au format SVG peut √™tre une action tr√®s simple, mais dans ce cas, il est pr√©f√©rable de nommer la m√©thode diff√©remment.  Par exemple, le nom computeAndConvertToSVG ‚Äã‚Äã() semble quelque peu g√™nant, mais il sugg√®re imm√©diatement que des calculs importants ont lieu √† l'int√©rieur. </li></ul><br>  Je vais vous donner un exemple.  J'ai r√©cemment fait un audit d'application.  Par la logique du travail, je sais que l'application quelque part dans le code s'abonne √† la file d'attente RabbitMQ.  Je marche dans le code - je ne trouve pas cet endroit.  Je cherche directement un attrait pour le lapin, je commence √† grimper, je vais √† la place dans le flux d'affaires o√π l'abonnement a r√©ellement lieu - je commence √† jurer.  A quoi cela ressemble dans le code: <br><br><ol><li>  La m√©thode service.getQueueListener (tickerName) est appel√©e - le r√©sultat renvoy√© est ignor√©.  Cela peut alerter, mais un tel morceau de code o√π les r√©sultats de la m√©thode sont ignor√©s n'est pas le seul dans l'application. </li><li>  A l'int√©rieur, tickerName est v√©rifi√© pour null et une autre m√©thode getQueueListenerByName (tickerName) est appel√©e. </li><li>  √Ä l'int√©rieur, une instance de la classe QueueListener est tir√©e du hachage par le nom du ticker (si ce n'est pas le cas, elle est cr√©√©e) et la m√©thode getSubscription () est appel√©e dessus. </li><li>  Et maintenant, √† l'int√©rieur de la m√©thode getSubscription (), l'abonnement a r√©ellement lieu.  Et cela arrive quelque part au milieu d'une m√©thode de la taille de trois √©crans. </li></ol><br>  Je vais vous dire franchement - sans parcourir toute la cha√Æne et sans lire une douzaine d'√©crans de code attentifs, il √©tait irr√©aliste de deviner o√π est l'abonnement.  Si la m√©thode s'appelait subscribeToQueueByTicker (tickerName), cela me ferait gagner beaucoup de temps. <br><br><h3>  Classes utilitaires </h3><br>  Il existe un merveilleux livre Design Patterns: Elements of Reusable Object-Oriented Software (1994), il est souvent appel√© GOF (Gang of Four, selon le nombre d'auteurs).  L'avantage de ce livre est principalement qu'il a donn√© aux d√©veloppeurs de diff√©rents pays une langue unique pour d√©crire les mod√®les de conception de classe.  Maintenant, au lieu de ¬´la classe est garantie d'exister dans une seule instance et d'avoir un point d'acc√®s statique¬ª, nous pouvons dire ¬´singleton¬ª.  Le m√™me livre a caus√© des dommages visibles aux esprits fragiles.  Ce mal est bien d√©crit par une citation de l'un des forums "Chers coll√®gues, j'ai besoin de cr√©er une boutique en ligne, dites-moi avec quels mod√®les je dois commencer."  En d'autres termes, certains programmeurs ont tendance √† abuser des mod√®les de conception, et partout o√π vous pouvez g√©rer avec une classe, ils en cr√©ent parfois cinq ou six √† la fois - juste au cas o√π, ¬´pour plus de flexibilit√©¬ª. <br><br>  Comment d√©cider si vous avez besoin d'une fabrique de classe abstraite (ou d'un autre mod√®le plus compliqu√© qu'une interface) ou non?  Il y a quelques consid√©rations simples: <br><br><ol><li>  Si vous r√©digez une demande au printemps, 99% du temps n'est pas n√©cessaire.  Spring vous propose des blocs de construction de niveau sup√©rieur, utilisez-les.  Le maximum que vous pouvez trouver utile est une classe abstraite. </li><li>  Si le point 1 ne vous donne toujours pas de r√©ponse claire - n'oubliez pas que chaque mod√®le repr√©sente +1000 points pour la complexit√© de l'application.  Analysez soigneusement si les avantages de l'utilisation du mod√®le l'emportent sur les inconv√©nients.  Passant √† une m√©taphore, rappelez-vous que chaque m√©dicament gu√©rit non seulement, mais nuit aussi l√©g√®rement.  Ne buvez pas toutes les pilules en m√™me temps. </li></ol><br><br>  Un bon exemple de la fa√ßon dont vous n'en avez pas besoin, vous pouvez le voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  Conclusion </h2><br>  Pour r√©sumer, je tiens √† noter que j'ai √©num√©r√© les recommandations les plus √©l√©mentaires.  Je ne les distinguerais m√™me pas sous la forme d'un article - ils sont si √©vidents.  Mais au cours de la derni√®re ann√©e, j'ai rencontr√© trop souvent des demandes dans lesquelles bon nombre de ces recommandations ont √©t√© viol√©es.  √âcrivons un code simple, facile √† lire et √† entretenir. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443756/">https://habr.com/ru/post/fr443756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443744/index.html">Encyclop√©die de l'√©clairage par Naughty Dog</a></li>
<li><a href="../fr443746/index.html">March√© du jeu, tendances et pr√©visions - Excellentes analyses d'App Annie</a></li>
<li><a href="../fr443748/index.html">Pr√©sentation du Tesla Model Y - √† quoi s'attendre et o√π chercher</a></li>
<li><a href="../fr443752/index.html">Kotlin comme l'avenir du d√©veloppement d'applications Android</a></li>
<li><a href="../fr443754/index.html">√Ä propos de la pertinence de Selenium WebDriverWait</a></li>
<li><a href="../fr443758/index.html">Reconnaissance rapide de Doodle Draw: comment se faire des amis R, C ++ et Neural Grids</a></li>
<li><a href="../fr443764/index.html">Ce que le cr√©ateur a fum√©: une arme √† feu inhabituelle</a></li>
<li><a href="../fr443766/index.html">Essayer la programmation de contrat C ++ 20 maintenant</a></li>
<li><a href="../fr443768/index.html">Monolith pour des centaines de versions client: comment nous √©crivons et prenons en charge les tests</a></li>
<li><a href="../fr443770/index.html">Conception pilot√©e par domaine: objets de valeur et noyau d'entit√© dans la pratique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>