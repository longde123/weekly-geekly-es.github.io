<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòé üòú üò≤ Falla √©pica ling√º√≠stica, o C√≥mo meter todo el diccionario del idioma ruso en Power BI ‚úçüèæ üìú üëÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De alguna manera, resolviendo el problema del an√°lisis ling√º√≠stico en Power BI y al mismo tiempo buscando ejemplos para mi art√≠culo anterior , record√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Falla √©pica ling√º√≠stica, o C√≥mo meter todo el diccionario del idioma ruso en Power BI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/429140/"><img src="https://habrastorage.org/webt/ig/jx/ik/igjxikbvwngnl6pdd9voe9ukrvc.jpeg" alt="imagen"><br><br>  De alguna manera, resolviendo el problema del an√°lisis ling√º√≠stico en Power BI y al mismo tiempo buscando ejemplos para mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior</a> , record√© el problema que intent√© resolver en Excel hace varios a√±os: era necesario implementar un diccionario de idioma ruso en el sistema anal√≠tico para el an√°lisis ling√º√≠stico de un gran n√∫mero de consultas en lenguaje natural  Y era deseable utilizar herramientas de oficina est√°ndar.  La gran mayor√≠a de las personas tomar√≠a inmediatamente esta tarea en Excel, y una vez tom√© el mismo camino.  Us√© el corpus abierto del idioma ruso ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://opencorpora.org/</a> ) como diccionario. <br><br>  Pero la decepci√≥n me esperaba: el diccionario constaba de 300 mil formas de palabras, m√°s de 5 millones de entradas, y para Excel es, en principio, una cantidad imposible.  Incluso si inserta "solo" 1 mill√≥n de l√≠neas en √©l, solo una persona muy paciente que nunca tendr√° prisa podr√° realizar manipulaciones con ellos o, Dios no lo permita, c√°lculos.  Pero esta vez decid√≠ establecer una herramienta m√°s adecuada para la tarea: Power BI. <br><a name="habracut"></a><br><h2>  ¬øQu√© es Power BI? </h2><br>  Encuentro este producto en gran medida subestimado por la comunidad profesional.  Power BI es un conjunto de herramientas de an√°lisis empresarial que se cre√≥ para usuarios que poseen Excel en un nivel ligeramente superior al de "dividir la cantidad en columnas".  Si una persona puede escribir f√≥rmulas de complejidad media en Excel, dominar√° Power BI en un par de noches. <br><br>  Este no es un producto √∫nico con alg√∫n tipo de l√≥gica de programaci√≥n interna, sino un sistema de tres componentes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea3/887/958/ea38879580c8b208c77bf0366d74dc60.png" alt="imagen"><br><br><ul><li>  <b>Power Query</b>  Este es un ETL, en el que es necesario escribir consultas usando su propio lenguaje de programaci√≥n completamente funcional: M. Para ser justos, debe tenerse en cuenta que, lo m√°s probable es que un usuario com√∫n no tenga que programar en √©l: la mayor√≠a de las funciones est√°n disponibles directamente a trav√©s del men√∫ o el asistente en la interfaz del componente.  El lenguaje M es completamente diferente del lenguaje de consulta DAX (PowerPivot).  Sin embargo, Microsoft los uni√≥.  Esto tiene sentido desde el punto de vista del desarrollo: ETL est√° dise√±ado para recibir y saturar inicialmente los datos (no r√°pido), y DAX, para los c√°lculos que nos ayudan a visualizar estos datos (r√°pidamente).  Es decir, DAX es para el front end y Power Query para el backend, para el proceso de extracci√≥n y formateo de datos. </li><li>  <b>PowerPivot</b> .  Un m√≥dulo de procesamiento en memoria basado en el motor xVelocity.  Utiliza el lenguaje de consulta DAX, muy similar al lenguaje de f√≥rmulas de Excel. </li><li>  <b>Componente de visualizaci√≥n</b> .  Es muy √∫til para aplicaciones en sistemas en los que necesita visualizar datos: en el sitio web de una empresa o en un portal de soporte t√©cnico (por ejemplo, una nube de solicitudes) o en un recurso corporativo interno.  Existen herramientas que pueden hacer esto sin Power BI, pero muchas de ellas no ayudar√°n cuando el n√∫mero de registros sea de millones y los datos deban agregarse de alguna manera.  Y con otras herramientas de este tipo, Power BI compite debido a su simplicidad y bajo costo de procesamiento en memoria.  Est√° claro que si hablamos de terabytes de datos, se necesitar√° un enfoque diferente.  Y para tales casos, Microsoft ya tiene algo que ofrecer, pero este es un tema para un art√≠culo separado. </li></ul><br>  La curva de aprendizaje en la primera etapa aumenta mucho: si eres bueno en Excel, el 80% de las funciones de Power BI se abrir√°n despu√©s de un breve estudio.  Esta es una herramienta muy poderosa, bastante f√°cil de usar, pero hasta cierto punto.  Para usarlo a plena capacidad, ya necesitar√° experiencia y un conocimiento profundo de los idiomas M y DAX. <br><br><h2>  ¬øPara qu√© sirve Power BI Desktop? </h2><br>  ¬øPara qui√©n puede ser √∫til?  En primer lugar, cualquier usuario de negocios que tenga que procesar y analizar grandes cantidades de datos cuando Excel ya no pueda hacer frente o inflarlo al l√≠mite.  Destaco: Power BI Desktop est√° dise√±ado <b>para una amplia gama de usuarios que resuelven una gama muy diversa de tareas</b> .  Por ejemplo, en mi caso, se trataba de normalizar 5 millones de entradas de texto para la posterior determinaci√≥n de la frecuencia de las palabras clave. <br><br>  Esto es muy necesario cuando se procesan cuestionarios, consultas de motores de b√∫squeda, anuncios, dictados / ensayos, alg√∫n tipo de matrices estad√≠sticas, etc. O para resolver crucigramas ... <br><br>  Otro caso y opci√≥n de implementaci√≥n se considera en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> sobre el "reconocedor" de Dmitry Tumaikin.  Implementado en Excel cl√°sico, pero usando macros ... <br><br>  Otro escenario popular para esta aplicaci√≥n de Power BI es calcular la proporci√≥n de indicadores para el per√≠odo actual y anterior.  Por ejemplo, tenemos datos de ingresos agregados previamente, y debe compararlos por d√≠as con el trimestre, a√±o o per√≠odo similar anterior.  Y quiero / necesito insertar el resultado de la comparaci√≥n en la siguiente columna en forma de valores, no de f√≥rmulas.  Parecer√≠a que para Excel la tarea m√°s simple es escribir una f√≥rmula de comparaci√≥n simple y extenderla sobre todas las celdas de la columna.  Pero no si tienes varios millones de filas en la tabla.  En DAX, esta tarea es a√∫n m√°s f√°cil que en Excel, pero tambi√©n solo con la ayuda de los c√°lculos posteriores. <br><br>  Se pueden dar muchos otros escenarios pr√°cticos para usar Power BI, pero creo que usted ya ha entendido la esencia.  Por supuesto, todas estas tareas no son un problema para un programador que posee, por ejemplo, Python o R, pero tales especialistas son a priori m√°s peque√±os en orden de magnitud que los expertos de Excel.  Excel solo tiene posibilidades limitadas, pero no es as√≠ con Power BI, que utiliza el lenguaje de f√≥rmulas DAX, que es muy similar al lenguaje de f√≥rmulas de Excel, y es capaz de procesar millones y decenas de millones de registros sobre la marcha.  Y luego necesita aumentar la RAM (al menos hasta 100, al menos hasta 300 GB). <br><br><h2>  Ayudamos a las solicitudes de proceso de soporte t√©cnico </h2><br>  Pero volviendo a mi tarea.  Era necesario pensar c√≥mo la l√≠nea cero de soporte t√©cnico evaluar√≠a autom√°ticamente el tema de las solicitudes de los usuarios.  Para empezar, decid√≠ aislar ciertas formas de palabras y determinar los temas m√°s importantes que los usuarios plantean con mayor frecuencia por la frecuencia de su aparici√≥n en los mensajes. <br><br>  El diccionario fuente es un archivo de texto simple que tiene una estructura regular y se ve as√≠: <br><br><img src="https://habrastorage.org/webt/-j/yj/pi/-jyjpiiq6ttx9cwq3-3ckouy2c0.png" alt="imagen"><br><br>  Para fines estad√≠sticos, fue necesario determinar la forma inicial de cada forma de palabra: para sustantivos - un n√∫mero √∫nico del caso nominativo, para verbos - una forma indefinida, etc.  Para los programadores, esta tarea era m√°s simple que simple: para cada palabra en la columna izquierda, encuentre la correspondencia con la forma que sigue inmediatamente al n√∫mero de esta palabra en el diccionario. <br><br>  Eso es solo el usuario comercial promedio que no posee Python, herramientas especializadas y habilidades de desarrollo, no puede resolver este problema sin el uso de BI de autoan√°lisis o herramientas similares f√°ciles de usar.  Adem√°s, si los datos deben procesarse para sus necesidades internas o si no hay informaci√≥n confidencial que requiera protecci√≥n, Power BI en este caso tambi√©n ser√° gratuito *. <br><br><div class="spoiler">  <b class="spoiler_title">Texto oculto</b> <div class="spoiler_text">  *) Esto se refiere a la versi√≥n de Power BI Desktop y la versi√≥n de Power BI Services para uso personal con tarifa gratuita. </div></div><br>  Para analizar los datos, necesitaba en Power Query, en una tabla de 5 millones de registros, agregar una nueva columna, desplazada por una posici√≥n.  Al principio, trat√© de aplicar el enfoque cl√°sico utilizando Power Query, que Marcel Beug, autor de la gu√≠a de referencia en l√≠nea original de Power Query <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">describe</a> en el portal de la comunidad de Power BI (tambi√©n escrito en Power Query).  En el art√≠culo se proponen dos algoritmos diferentes: uno est√° inspirado en las ideas de Matt Elington, un famoso gur√∫ y entrenador de Power BI, y el segundo enfoque es la idea original del propio Marcel, utilizando una funci√≥n adicional.  A pesar de que para aumentar la productividad, almacen√© en cach√© por completo los datos de origen, ambos enfoques requirieron una cantidad de tiempo gigantesca: ya hab√≠an pasado el octavo d√≠a y el proceso no se hab√≠a completado.  El tama√±o del archivo fuente era de 270 MB y el tama√±o actual de los datos procesados ‚Äã‚Äãera cercano a 17 TB.  Estoy seguro de que pocos usuarios de Power BI han visto esos n√∫meros en la ventana para cargar datos desde una fuente de archivo. <br><br><img src="https://habrastorage.org/webt/ox/yq/e_/oxyqe_yrqk_1zhbfscm1rbuvjma.png" alt="imagen"><br><br>  Por qu√© el volumen est√° tan hinchado, no est√° claro;  Incluso el producto cartesiano de todos los registros es mucho menos de 16 Tb.  Aqu√≠, el optimizador interno claramente no estaba a la altura.  Y, por ejemplo, DAX-Studio no permite el seguimiento de consultas de Power Query, solo DAX.  ¬øQuiz√°s alguien compartir√° su experiencia con PQ? <br><br>  Sin esperar a que se completara el primer proceso, decid√≠ en otra m√°quina intentar resolver el problema usando DAX a trav√©s de una consulta autoescrita.  La solicitud se cumpli√≥ ... en unos 180 segundos, y el consumo de memoria aument√≥ ligeramente. <br><br><img src="https://habrastorage.org/webt/nb/aw/e2/nbawe2uffzilci2ttxi6ulhqg24.png" alt="imagen"><br><br>  C√≥digo fuente para una solicitud DAX: <br><br> <code>KeyWord = <br> CALCULATE( <br> TOPN(1; <br> CALCULATETABLE( <br> VALUES(ShiftedList[Word]) <br> ;ALLEXCEPT(ShiftedList;ShiftedList[Word Nr]) <br> ) <br> )//TOPN <br> )//CALCULATE <br> <br></code> <br><br>  Es decir, para cada fila de la nueva columna [Palabra clave], se busca el primer valor de la columna [Palabra], que contiene todas las variantes de formas de palabras que tienen el mismo n√∫mero de forma de palabra b√°sica (columna [Palabra Nr]).  Mientras el formato del archivo fuente permanezca sin cambios, la solicitud debe cumplirse sin errores en todas las versiones posteriores del diccionario. <br><br>  El c√≥digo de consulta en Power Query, que forma la tabla fuente en el formato requerido, se gener√≥ "autom√°ticamente" y se complet√≥ en menos de un minuto: <br><br><img src="https://habrastorage.org/webt/v8/yj/xq/v8yjxq04xubrbgacegv6tiw-q2m.png" alt="imagen"><br><br>  Despu√©s de que se haya formado una columna de palabras clave en la interfaz de PowerPivot en tres minutos, la b√∫squeda de cualquier forma de palabra en la interfaz de Power BI no lleva m√°s de 4 segundos.  Adem√°s, una b√∫squeda de control para los mismos datos en su Notepad ++ x64 favorito podr√≠a tomar 20 segundos o m√°s.  Pero esto no es una piedra en el jard√≠n de la central nuclear: es m√°s dif√≠cil (y m√°s largo) buscar en toda la matriz de datos que seg√∫n los datos ya marcados. <br><br>  Por cierto, la solicitud DAX anterior no naci√≥ la primera vez, y las opciones intermedias consumieron toda la memoria disponible, funcionaron durante mucho tiempo y terminaron con un error de datos o un resultado irrelevante. <br><br><img src="https://habrastorage.org/webt/h0/bm/b_/h0bmb_w7wieehm3olc7lgsfwpnm.png" alt="imagen"><br><br>  Como resultado, el tama√±o del archivo PBIX guardado se hizo un 60% (112 MB) m√°s peque√±o que el diccionario de texto original, pero m√°s de 4 veces el tama√±o del archivo ZIP con el mismo diccionario. <br><br>  Volviendo a la batalla entre Power Query y DAX: la diferencia en la duraci√≥n de la misma operaci√≥n en diferentes componentes sugiere que Power BI no es una palanca contra la cual no hay recepci√≥n.  Tiene su propio car√°cter y caracter√≠sticas de la aplicaci√≥n, que deben tenerse en cuenta en su trabajo.  En realidad, como cualquier herramienta.  Y las recomendaciones de incluso gur√∫s reconocidos deben tratarse con precauci√≥n. <br><br>  Parece que el premio Nobel Richard Smalley sol√≠a decir, parafraseando la primera ley de Clark: "Cuando los expertos dicen que algo es factible, probablemente tengan raz√≥n (simplemente no saben cu√°ndo).  Cuando dicen que esto es imposible, lo m√°s probable es que est√©n equivocados ". <br><br>  Caracter√≠sticas de la m√°quina de prueba: <br>  <i>Procesador: Intel Core i7 4770 @ 3.4 GHz (4 n√∫cleos)</i> <i><br></i>  <i>RAM: 16 GB</i> <i><br></i>  <i>SO: Windows 7 Enterprise SP1 x64</i> <br><br>  El diccionario listo para usar en formato Power BI se puede descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠</a> . <br><br>  Y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> est√° disponible una versi√≥n en l√≠nea modificada del diccionario.  Puedes resolver crucigramas a tu gusto :) <br><br><img src="https://habrastorage.org/webt/6l/zp/-j/6lzp-jafheccraeyj8hi-ktvt8k.png" alt="imagen"><br><br>  ... Por cierto, hace varios a√±os, sin embargo, la tarea se resolvi√≥ en Excel, aunque no al 100%.  Solo para el an√°lisis de los textos, no se utiliz√≥ todo el corpus del idioma ruso, sino el diccionario de frecuencias.  Para la limpieza b√°sica del texto, cualquiera de las 100 principales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">listas de frecuencias</a> disponibles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> para varias decenas de kilobytes es bastante adecuada. <br><br>  <i>Yuri Kolmakov, Experto, Departamento de Sistemas de Consolidaci√≥n y Visualizaci√≥n de Datos, Jet Infosystems ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">McCow</a> )</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es429140/">https://habr.com/ru/post/es429140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es429122/index.html">El futuro cercano de NetApp</a></li>
<li><a href="../es429124/index.html">Organizaci√≥n de videoconferencia at√≠pica en una gran empresa qu√≠mica</a></li>
<li><a href="../es429126/index.html">Visita padre</a></li>
<li><a href="../es429136/index.html">Samsung present√≥ un tel√©fono inteligente con una pantalla que se desvanece</a></li>
<li><a href="../es429138/index.html">Qu√© esconde el PDF</a></li>
<li><a href="../es429144/index.html">Smartphones flexibles y otra informaci√≥n de Android Dev Summit</a></li>
<li><a href="../es429146/index.html">Fuente de alimentaci√≥n conmutada para teletipo de la d√©cada de 1940 (¬°con luminosos tiratrones de mercurio!)</a></li>
<li><a href="../es429148/index.html">C√≥mo los "gerentes efectivos" ahogaron a Flickr</a></li>
<li><a href="../es429150/index.html">Administrar sus m√≥dulos para CMS usando Composer</a></li>
<li><a href="../es429152/index.html">Componente de navegaci√≥n de Android. Cosas simples que tienes que hacer t√∫ mismo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>