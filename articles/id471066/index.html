<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎸 👩🏽‍💼 🌥️ Seperti apa bentuk arsip zip dan apa yang bisa kita lakukan 🎽 👧🏿 👨🏿‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selamat siang, Habr! 

 Selama setengah tahun terakhir, jalan bengkok dari proyek hewan peliharaan saya telah membawa saya ke hutan seperti itu, dari ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seperti apa bentuk arsip zip dan apa yang bisa kita lakukan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471066/"> Selamat siang, Habr! <br><br>  Selama setengah tahun terakhir, jalan bengkok dari proyek hewan peliharaan saya telah membawa saya ke hutan seperti itu, dari tempat itu masih tidak mungkin untuk keluar.  Dan itu semua dimulai tanpa membahayakan - sebuah situs dengan gambar, tetapi rasa perfeksionisme, pengejaran freebie, serta beberapa fitur dari pola pikir saya mengubah ini, seperti yang awalnya direncanakan, sedikit berjalan ke perjalanan yang sangat panjang.  Baiklah, seperti yang biasa dikatakan oleh seorang revolusioner burry: “Belajar, belajar dan belajar lagi”, tetapi saya, mau tak mau, harus mengikuti nasihat ini. <br><br>  Oh, sesuatu yang mengalihkan perhatian kita dari topik utama.  Saya tidak akan membuat Anda bosan dengan pidato yang panjang, tetapi saya akan membahas urusan. <br><a name="habracut"></a><br><h3>  Buat arsip zip </h3><br>  Pada prinsipnya, saya tidak akan menulis ulang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">spesifikasi di</a> sini.  Secara keseluruhan, tidak masuk akal untuk menggambarkan struktur juga, karena semua ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dilakukan sebelum saya</a> . <br><br>  Bagi mereka yang terlalu malas untuk mengikuti tautan, saya hanya akan menjelaskan secara singkat bahwa arsip zip mana pun harus berisi: <br><br><ul><li>  Entri file: <ul><li>  Header file lokal </li><li>  Data yang berguna </li><li>  Deskriptor data (opsional, digunakan ketika kita tidak tahu ukuran file dan hashnya sampai kita membacanya sampai akhir) </li></ul></li><li>  Header File Direktori Tengah (untuk setiap file. Ini seperti daftar isi buku, di mana setiap bagian dan halaman yang dapat ditemukan ditunjukkan) </li><li>  Akhir dari direktori pusat </li></ul><br>  Mengetahui hal ini, kita dapat mencoba menulis arsip sederhana yang hanya akan berisi dua file: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//        (1.txt  2.txt)   : $entries = [ '1.txt' =&gt; 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc id ante ultrices, fermentum nibh eleifend, ullamcorper nunc. Sed dignissim ut odio et imperdiet. Nunc id felis et ligula viverra blandit a sit amet magna. Vestibulum facilisis venenatis enim sed bibendum. Duis maximus felis in suscipit bibendum. Mauris suscipit turpis eleifend nibh commodo imperdiet. Donec tincidunt porta interdum. Aenean interdum condimentum ligula, vitae ornare lorem auctor in. Suspendisse metus ipsum, porttitor et sapien id, fringilla aliquam nibh. Curabitur sem lacus, ultrices quis felis sed, blandit commodo metus. Duis tincidunt vel mauris at accumsan. Integer et ipsum fermentum leo viverra blandit.', '2.txt' =&gt; 'Mauris in purus sit amet ante tempor finibus nec sed justo. Integer ac nibh tempus, mollis sem vel, consequat diam. Pellentesque ut condimentum ex. Praesent finibus volutpat gravida. Vivamus eleifend neque sit amet diam scelerisque lacinia. Nunc imperdiet augue in suscipit lacinia. Curabitur orci diam, iaculis non ligula vitae, porta pellentesque est. Duis dolor erat, placerat a lacus eu, scelerisque egestas massa. Aliquam molestie pulvinar faucibus. Quisque consequat, dolor mattis lacinia pretium, eros eros tempor neque, volutpat consectetur elit elit non diam. In faucibus nulla justo, non dignissim erat maximus consectetur. Sed porttitor turpis nisl, elementum aliquam dui tincidunt nec. Nunc eu enim at nibh molestie porta ut ac erat. Sed tortor sem, mollis eget sodales vel, faucibus in dolor.', ]; //      Lorem.zip,      cwd (      ) $destination = 'Lorem.zip'; $handle = fopen($destination, 'w'); //      ,    ,     ,   "" Central Directory File Header $written = 0; $dictionary = []; foreach ($entries as $filename =&gt; $content) { //         Local File Header,     //        ,      . $fileInfo = [ //     'versionToExtract' =&gt; 10, //   0,        - 'generalPurposeBitFlag' =&gt; 0, //      ,    0 'compressionMethod' =&gt; 0, // -    mtime ,    ,      ? 'modificationTime' =&gt; 28021, //   , ? 'modificationDate' =&gt; 20072, //      .     ,       ,   ? 'crc32' =&gt; hexdec(hash('crc32b', $content)), //     .        . //       :) 'compressedSize' =&gt; $size = strlen($content), 'uncompressedSize' =&gt; $size, //    'filenameLength' =&gt; strlen($filename), //  .    ,   0. 'extraFieldLength' =&gt; 0, ]; //      . $LFH = pack('LSSSSSLLLSSa*', ...array_values([ 'signature' =&gt; 0x04034b50, //  Local File Header ] + $fileInfo + ['filename' =&gt; $filename])); //       ,       Central Directory File Header $dictionary[$filename] = [ 'signature' =&gt; 0x02014b50, //  Central Directory File Header 'versionMadeBy' =&gt; 798, //  .    ,  -  . ] + $fileInfo + [ 'fileCommentLength' =&gt; 0, //    . No comments 'diskNumber' =&gt; 0, //     0,        'internalFileAttributes' =&gt; 0, //    'externalFileAttributes' =&gt; 2176057344, //    'localFileHeaderOffset' =&gt; $written, //      Local File Header 'filename' =&gt; $filename, //  . ]; //      $written += fwrite($handle, $LFH); //    $written += fwrite($handle, $content); } // ,     ,    . //          End of central directory record (EOCD) $EOCD = [ //  EOCD 'signature' =&gt; 0x06054b50, //  .    ,   0 'diskNumber' =&gt; 0, //      -  0 'startDiskNumber' =&gt; 0, //       . 'numberCentralDirectoryRecord' =&gt; $records = count($dictionary), //    .    ,     'totalCentralDirectoryRecord' =&gt; $records, //   Central Directory Record. //      ,      'sizeOfCentralDirectory' =&gt; 0, // ,    Central Directory Records 'centralDirectoryOffset' =&gt; $written, //     'commentLength' =&gt; 0 ]; //     !   foreach ($dictionary as $entryInfo) { $CDFH = pack('LSSSSSSLLLSSSSSLLa*', ...array_values($entryInfo)); $written += fwrite($handle, $CDFH); } // ,   .  ,    $EOCD['sizeOfCentralDirectory'] = $written - $EOCD['centralDirectoryOffset']; //     End of central directory record $EOCD = pack('LSSSSLLS', ...array_values($EOCD)); $written += fwrite($handle, $EOCD); //  . fclose($handle); echo '  : ' . $written . ' ' . PHP_EOL; echo '     `unzip -tq ' . $destination . '`' . PHP_EOL; echo PHP_EOL;</span></span></code> </pre> <br>  Cobalah untuk menjalankan kode primitif ini dan hasilnya akan memberi Anda file Lorem.zip yang akan berisi 1.txt dan 2.txt. <br><br><h3>  Mengapa </h3><br>  Tentu saja, setiap orang yang memadai akan mengatakan bahwa menulis arsip di php adalah pekerjaan yang sia-sia, terutama karena untuk format seperti zip, ada banyak implementasi yang siap pakai untuk setiap selera dan warna.  Dan di php yang sama ada perpustakaan yang sudah jadi.  Saya akan mengatakannya juga :) <br><br>  Tetapi mengapa, mengapa, seluruh artikel ini, mengapa saya menghabiskan waktu menulisnya, dan Anda membacanya? <br>  Dan kemudian, bahwa semuanya tidak begitu sederhana dan mengetahui cara kerja zip, membuka beberapa kemungkinan tambahan bagi kita. <br><br>  Pertama, saya harap, setidaknya sedikit, tetapi ini akan membantu mereka yang ingin memahami struktur zip. <br>  Dan kedua, membuat arsip dengan tangan kita sendiri, kita memiliki kontrol, dan, yang paling penting, akses ke data internalnya. <br><br>  Kami dapat melakukan pra-penghitungan Header File Lokal dan Header Direktori Direktori Utama, dan kemudian atas permintaan membuat arsip zip dengan cepat dengan konten dan urutan file apa pun, cukup mengganti data ini.  Dan tidak ada overhead kecuali untuk I / O. <br><br>  Atau, kita dapat merekam arsip, mengunggahnya, misalnya, ke cloud, yang mendukung pengunduhan terfragmentasi dan, mengetahui offset untuk setiap file, mendapatkan file arsip apa saja, seolah-olah itu tidak ada dalam arsip sama sekali, menambahkan hanya satu judul permintaan.  Dan kemudian semua ini dapat diproksi dan ... <br><br>  Oke, jangan maju dulu.  Jika Anda tertarik dengan topik ini, maka dalam artikel berikut ini saya akan mencoba mempertimbangkan peluang ini dan menunjukkan cara menggunakannya. <br><br><hr><blockquote>  'diskNumber' =&gt; 0, // Saya biasanya menemukan 0 di mana-mana, dan khususnya saya memutuskan untuk tidak menyelidiki </blockquote>  Seperti yang disarankan, jumlah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">volume</a> dalam arsip multi-volume. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471066/">https://habr.com/ru/post/id471066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471048/index.html">React + Mobx: apa gunanya?</a></li>
<li><a href="../id471050/index.html">D Pendanaan Dana Pengembangan Bahasa: Platform Baru dan Hibah Baru ...</a></li>
<li><a href="../id471052/index.html">Bisakah saya kabur? Dipukul oleh pemrograman tipe generik</a></li>
<li><a href="../id471054/index.html">Longrid pada realisme ancaman kuantum untuk cryptocurrency dan masalah "ramalan 2027"</a></li>
<li><a href="../id471062/index.html">Bagaimana cara mengajar Alice untuk mengelola rumah pintar Anda. Laporan Yandex</a></li>
<li><a href="../id471070/index.html">Bahasa server mana yang harus dipilih ... untuk pengembang seluler</a></li>
<li><a href="../id471072/index.html">Berapa Gram di Telegram?</a></li>
<li><a href="../id471074/index.html">Synet - kerangka kerja untuk meluncurkan jaringan saraf pra-terlatih pada CPU</a></li>
<li><a href="../id471076/index.html">Bagaimana Matrix menciptakan warisan antipeluru</a></li>
<li><a href="../id471078/index.html">Chrome akan sepenuhnya memblokir konten campuran</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>