<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👣 👩‍💻 💿 从jQuery迁移到Vue.js 🏺 🉑 👜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文的作者（我们今天将其翻译发表）认为，世界上还有更多的程序员在需要开发简单的Web应用程序时使用jQuery 。 通常，当某个页面需要具备简单的交互功能时会发生这种情况，但是为此使用某种JavaScript框架似乎有点过头了。 毕竟，这些都是千字节的不必要的代码，模板，用于构建项目的工具，用于包装...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>从jQuery迁移到Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/414073/"> 本文的作者（我们今天将其翻译发表）认为，世界上还有更多的程序员在需要开发简单的Web应用程序时使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">jQuery</a> 。 通常，当某个页面需要具备简单的交互功能时会发生这种情况，但是为此使用某种JavaScript框架似乎有点过头了。 毕竟，这些都是千字节的不必要的代码，模板，用于构建项目的工具，用于包装模块的工具……同时，使用CDN资源连接到jQuery页面就像给梨子装壳一样容易。 <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/ar/by/h5/arbyh52jbxw4u2v4d3ogudt1evu.jpeg"></a> <br><br> 本文将讨论如何将使用jQuery创建的项目转换为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vue.js。</a> 该项目将在jQuery上创建，然后使用Vue重新设计。 该材料的作者希望向所有人证明，即使在相对较小的项目中，Vue的使用也不一定意味着此类项目的代码大小会过度增加，并给程序员带来巨大的额外负担。 相反，这与使用jQuery时几乎具有相同的辅助代码大小，从而使您能够提高生产力并提高应用程序质量。 <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">项目概况</font> </h2><br> 我们将基于Sparksuite的开源模板开发一个简单的电子帐户。 <br><br> 通常，此类案例研究使用各种待办事项清单。 我希望背离这种传统将使故事变得新鲜和有趣，同时，我们的任务将非常困难，无法证明使用Vue之类的东西来开发小型项目的好处。 该手册的设计使所有没有特殊困难的人都可以复制并掌握建议的工作方法。 <br><br> 这是我们要使用的帐户模板。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/147/ed9/165/147ed9165a5b64c03ae0c5bbabe761bd.png"></div><br>  <i><font color="#999999">电子发票</font></i> <br><br> 我们将向其中添加交互式功能，使其能够选择产品，数量和单价。 更改值时，将重新计算商品总成本和单据总额。 另外，我们将在此处添加一个按钮，使您可以在帐户中插入新的空行。 <br><br> 我通过将空字符串的HTML代码转换为以下形式来修改模板： <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>$<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>$0.00<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">jQuery项目开发</font> </h2><br> 首先，让我们看一下如何使用jQuery解决问题。 <br><br><pre> <code class="hljs scala">$(<span class="hljs-symbol"><span class="hljs-symbol">'tabl</span></span>e').on(<span class="hljs-symbol"><span class="hljs-symbol">'mouseup</span></span> keyup', <span class="hljs-symbol"><span class="hljs-symbol">'input</span></span>[<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=number</span></span></span><span class="hljs-class">]', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">calculateTotals</span></span></span><span class="hljs-class">)</span></span>;</code> </pre> <br> 我们将事件侦听器连接到表。 当与产品的单位成本或其数量对应的值发生更改时，此侦听器将调用<code>calculateTotals</code>函数： <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateTotals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)  </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subtotals = $(<span class="hljs-string"><span class="hljs-string">'.item'</span></span>).map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">idx, val</span></span></span><span class="hljs-function">)  =&gt;</span></span> calculateSubtotal(val)).get(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> total = subtotals.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, v</span></span></span><span class="hljs-function">)  =&gt;</span></span> a + <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(v), <span class="hljs-number"><span class="hljs-number">0</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.total td:eq(1)'</span></span>).text(formatAsCurrency(total)); }</code> </pre> <br> 该函数获取表中的行并遍历它们，将每一行传递给<code>calculateSubtotal</code>函数并汇总结果。 计算结果属于常数。 结果，凭证的总金额将替换到帐户的相应字段中。 <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateSubtotal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(row)</span></span></span></span> { const <span class="hljs-variable"><span class="hljs-variable">$row</span></span> = <span class="hljs-variable"><span class="hljs-variable">$</span></span>(row); const inputs = <span class="hljs-variable"><span class="hljs-variable">$row</span></span>.find(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); const subtotal = inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].value * inputs[<span class="hljs-number"><span class="hljs-number">2</span></span>].value; <span class="hljs-variable"><span class="hljs-variable">$row</span></span>.find(<span class="hljs-string"><span class="hljs-string">'td:last'</span></span>).text(formatAsCurrency(subtotal)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subtotal; }</code> </pre> <br> 在此代码中，我们引用了该行中存在的所有<code>&lt;input&gt;</code>字段，然后将存储在第二个和第三个字段中的值相乘以获得<code>subtotal</code>值。 然后，将此值插入到该行的最后一个单元格中。 我们使用<code>formatAsCurrency</code>函数格式化该值。 这是她的代码： <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatAsCurrency</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(amount)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> `$<span class="hljs-variable"><span class="hljs-variable">$</span></span>{Number(amount).toFixed(<span class="hljs-number"><span class="hljs-number">2</span></span>)}`; }</code> </pre> <br> 此外，我们使用了一个小的辅助功能，以确保字段的外观与货物和整个文档的数量相同。 即，我们需要在这些字段中的数字前面加上$符号，并且它们是带有两个小数位的十进制数字。 <br><br><pre> <code class="hljs php">$(<span class="hljs-string"><span class="hljs-string">'.btn-add-row'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $lastRow = $(<span class="hljs-string"><span class="hljs-string">'.item:last'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $newRow = $lastRow.<span class="hljs-keyword"><span class="hljs-keyword">clone</span></span>(); $newRow.find(<span class="hljs-string"><span class="hljs-string">'input'</span></span>).val(<span class="hljs-string"><span class="hljs-string">''</span></span>); $newRow.find(<span class="hljs-string"><span class="hljs-string">'td:last'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'$0.00'</span></span>); $newRow.insertAfter($lastRow); $newRow.find(<span class="hljs-string"><span class="hljs-string">'input:first'</span></span>).focus(); });</code> </pre> <br> 最后，我们有一个事件处理程序，用于单击“ <code>Add row</code>按钮，该事件处理程序用于向文档中添加新行。 在这里，我们获取表中包含产品数据的最后一行，并对其进行复制。 同时，我们将标准数据插入此新行的字段中。 此外，我们会照顾用户的便利，将注意力集中在新行的第一个字段上，这将使用户在添加新行后立即可以在其第一个字段中输入数据。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是一个</a>使用jQuery工具实现其交互功能的帐户的工作示例。 <br><br><h2>  <font color="#3AC1EF">基于jQuery的解决方案的缺点</font> </h2><br> 让我们问问自己，上述方法的缺点是什么，或者说，如何改进我们的项目。 <br><br> 您可能听说过Vue和React这样的新库，据说它们允许它们以声明式而不是命令式的方式工作。 如果您看一下上面的jQuery代码，那么很明显，它主要是作为一组描述操作DOM的指令阅读的。 这段代码每一部分的目的，即对它做什么问题的答案，通常很难通过查看其工作方式来弄清楚。 当然，您可以通过将代码分成具有经过深思熟虑选择的名称的函数来使使用的代码片段的意图更清晰。 但是，如果您将这段代码保留一会儿，然后再次返回它，事实证明，为了理解它，您仍然需要付出一些努力。 <br><br> 此代码的另一个问题是应用程序的状态存储在DOM中。 有关用户要订购的产品的信息仅作为用户界面中HTML标记的一部分存在。 如果我们只需要在一个地方输出数据，那么这个问题似乎就不会那么严重了。 但是，一旦有必要在应用程序的多个位置显示此数据，我们就面临着同步数据的任务。 在我们的案例中，如果没有一个可靠的数据源，那么很难在整个应用程序中保持它们的最新状态。 <br><br> 在使用jQuery时，没有什么可以阻止我们将应用程序的状态存储在DOM之外并避免上述问题，Vue之类的库提供了有助于构建具有良好架构的应用程序的功能。 这些库可帮助程序员编写更简洁，更结构化的代码。 <br><br><h2>  <font color="#3AC1EF">Vue上的项目翻译</font> </h2><br> 现在让我们谈谈如何在Vue上重新创建相同的功能。 为了利用Vue的功能，只需将此库连接到常规网页，就像使用jQuery一样。 也就是说，无需使用系统来打包模块或编译器；您无需将应用程序分解为组件并将其代码分解为.vue文件。 <br><br> 我们开始通过替换<code>&lt;script&gt;</code>的内容将项目转换为Vue： <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 下一步是创建Vue的新实例： <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ el: <span class="hljs-string"><span class="hljs-string">'table'</span></span> });</code> </pre> <br> 传递给新Vue实例的构造函数的唯一参数是<code>el</code> 。 这是一个选择器（与jQuery中使用的选择器相同），用于标识我们要通过Vue控制的文档部分。 <br><br> 可以为Vue分配各种大小的任务-从管理整个页面（例如，在单页面应用程序的情况下）到包含在<code>&lt;div&gt;</code>的小片段。 在我们的示例中，Vue将负责处理HTML表。 <br><br><h2>  <font color="#3AC1EF">资料</font> </h2><br> 将文档三行的条件数据添加到Vue实例： <br><br><pre> <code class="hljs powershell">const app = new Vue({ el: <span class="hljs-string"><span class="hljs-string">'table'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>: {   items: [     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Website design'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> },     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Hosting (3 months)'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span> },     { <span class="hljs-type"><span class="hljs-type">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Domain name (1 year)'</span></span>, <span class="hljs-type"><span class="hljs-type">quantity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">price</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> },   ] } });</code> </pre> <br>  <code>data</code>属性是我们存储应用程序状态的位置。 状态不仅包括应用程序应使用的数据，还包括有关用户界面状态的信息（例如，应用程序中由多个选项卡组成的哪个部分当前处于活动状态，或者某个小部件是否已最小化，例如“手风琴”，或展开）。 <br><br>  Vue帮助将应用程序的状态与其表示形式（即与DOM）分开，并帮助将状态集中存储在一个位置，这是可靠数据的单一来源。 <br><br><h2>  <font color="#3AC1EF">模板修改</font> </h2><br> 现在配置模板，使其显示存储在<code>data</code>对象中的<code>data</code> 。 由于我们告诉框架我们要使用Vue实例处理表，因此我们可以在描述该表的HTML代码中使用Vue模板语法，以告诉Vue如何呈现表以及如何使用它工作。 <br><br> 使用<code>v-for</code>属性，我们可以从<code>items</code>数组中推断出每个元素的HTML代码块： <br><br><pre> <code class="hljs javascript">&lt;tr <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"item"</span></span> v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"item in items"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Vue将对传递给<code>v-for</code>的数组（或对象）的每个元素重复此标记。 这使我们可以引用循环中的每个元素。 在这种情况下，此元素由<code>item</code>变量表示。 由于Vue会监视<code>data</code>对象的属性，因此，当<code>items</code>数组的内容更改时，框架将动态更新标记。 我们需要做的就是通过添加或删除元素来修改状态，Vue将自动更新用户界面。 <br><br> 另外，我们需要通过输入产品，单价，数量的描述来添加用户可以填写的输入字段： <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.description"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">$</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.price"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item.quantity"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">$</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.price * item.quantity }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br> 在这里，我们使用<code>v-model</code>属性来配置输入字段和数据模型中的属性之间的双向数据绑定。 这意味着更改输入字段中的数据将导致其更改模型，反之亦然。 <br><br> 在最后一个单元格中，我们使用花括号<code>{{}}</code> ，以显示文本。 您可以在括号中使用任何有效的JavaScript表达式。 在这种情况下，我们将元素的两个属性相乘并输出发生的情况。 再次，Vue监督数据模型；更改任何属性将自动重新计算表达式。 <br><br><h2>  <font color="#3AC1EF">事件与方法</font> </h2><br> 现在，我们已经准备好一个模板来显示<code>items</code>集合，并且面临着如何向表中添加新行的问题。 由于Vue会将<code>items</code>数组中的所有内容输出到页面，因此为了在页面上显示空字符串，只需将<code>items</code>数组中应该存在的任何值传递给Vue对象就足够了。 <br><br> 为了创建可以从模板访问的函数，您需要将此函数作为<code>methods</code>对象的属性传递给Vue实例： <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-comment"><span class="hljs-comment">// ... methods: {   myMethod() {} }, // ... })</span></span></code> </pre> <br>  <code>addRow</code>方法，可以调用<code>addRow</code>方法将新项目添加到<code>items</code>数组： <br><br><pre> <code class="hljs kotlin">methods: { addRow() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.push({ description: <span class="hljs-string"><span class="hljs-string">''</span></span>, quantity: <span class="hljs-number"><span class="hljs-number">1</span></span>, price: <span class="hljs-number"><span class="hljs-number">0</span></span> }); }, },</code> </pre> <br> 请注意，我们创建的任何方法都将自动绑定到Vue实例，这将使我们能够从这些方法访问<code>data</code>对象和其他方法的属性。 <br><br> 现在我们有了一个方法。 单击<code>Add row</code>按钮如何调用它？ 要将事件侦听器添加到模板中的控件，Vue使用<code>v-on:event-name</code>语法。 <br><br><pre> <code class="hljs pgsql">&lt;button <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="btn-add-row" @click="addRow"&gt;<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>&lt;/button&gt;</code> </pre> <br>  Vue还提供了<code>v-on</code> ：构造的快捷方式，它类似于<code>@</code> 。 在上面的代码片段中使用了它。 您可以使用Vue实例中的任何方法作为事件处理程序。 <br><br><h2>  <font color="#3AC1EF">计算属性</font> </h2><br> 现在，我们只需要在发票底部提取文件的总金额即可。 这可以在模板本身中完成。 如前所述，Vue允许您将所有有效的JS表达式都放在大括号中。 但是，最好坚持只在模板中仅存储非常简单的逻辑而不再存储其他任何内容的方法。 如果逻辑与模板分离，则代码将更简洁，更易于测试。 <br><br> 为此，我们可以使用通常的方法，但是我相信在这种情况下，所谓的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">计算属性</a>最适合我们。 使用此类属性类似于上述使用方法的工作。 也就是说，要创建此类属性， <code>computed</code>对象传递给Vue <code>computed</code> ，该<code>computed</code>包含我们要在模板中使用其执行结果的函数： <br><br><pre> <code class="hljs coffeescript">const app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ... computed: {   total() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.reduce(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(acc, item)</span></span></span><span class="hljs-function"> =&gt;</span></span> acc + (item.price * item.quantity), <span class="hljs-number"><span class="hljs-number">0</span></span>);   } } });</code> </pre> <br> 现在可以从模板引用计算的属性： <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"total"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">colspan</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"3"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Total: $</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ total }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br> 您可能已经注意到，模板中的计算属性就像数据一样工作。 在这种情况下，您无需“调用”模板中的任何内容。 使用计算的属性还有另一个优点。  Vue是一个相当智能的系统，它缓存返回的值并仅在更改了所计算的属性的值所依赖的属性时才对它们进行重新计数。 <br><br> 如果我们使用该方法来计算文档的总金额，则每次输出模板时都会执行计算。 但是，由于我们使用计算所得的属性，因此仅在更改表行中的<code>quantity</code>或<code>price</code>值时才重新计算总额。 <br><br><h2>  <font color="#3AC1EF">筛选器</font> </h2><br> 您可能已经注意到，使用Vue创建的项目的实施中存在一个小错误。 它包含以下事实：当单个商品的价格用整数表示时，行中总额的计算值和单据中总额的计算值将显示为整数美元值，不含美分。 我们希望像jQuery示例一样，这些数字始终包含两个小数位。 <br><br> 我们可以利用Vue便利的数据格式化功能，而无需修改负责计算行总价值的代码以及计算文档总金额的代码。 关于过滤器。 <br><br> 如您可能已经了解的那样，为了创建过滤器，只需将具有相应键的对象（在这种情况下为<code>filters</code> ）传递给Vue实例即可： <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-comment"><span class="hljs-comment">// ... filters: {   currency(value) {     return value.toFixed(2);   } } });</span></span></code> </pre> <br> 在这里，我们创建了一个非常简单的名为<code>currency</code>过滤器。 它为传递给它的数值调用<code>toFixed(2)</code>函数，并返回结果。 您可以在模板中使用此过滤器，如下所示： <br><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Total: $</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ total | currency }}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是</a>我们在Vue上的项目<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>完成实施。 <br><br><h2>  <font color="#3AC1EF">总结</font> </h2><br> 如果比较项目的两个版本，一个使用jQuery创建，另一个使用Vue编写，则您会注意到基于Vue的应用程序的以下优点： <br><br><ul><li> 用户界面，逻辑和控制界面的数据之间的清晰分隔。 代码更清晰，测试起来更容易。 </li><li> 接口的说明性描述。 程序员只需要关心如何描述他想在屏幕上看到的内容，而不必关心如何访问DOM才能使应用程序页面具有所需的外观。 </li></ul><br>  Vue和jQuery库的大小几乎相同（以千字节为单位）。 当然，可以通过使用我们自己的库程序集来减小jQuery的大小，但是即使在相对简单的项目中（例如我们的电子账户示例），我相信易于开发和代码易读性也证明应用程序大小略有增加是合理的。 <br><br> 此外，Vue的功能比我们在此描述的功能要广泛得多。 该框架的优势在于它允许您创建模块化的，可重复使用的用户界面组件，从中可以构建复杂的客户端应用程序。 <br><br> 如果您对在Vue上开发Web应用程序感兴趣，请阅读<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此资料</a> 。 此外，如果您正在考虑将项目从纯JS迁移到Vue，这是我们最近<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">发布的</a>有关此主题的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">出版物</a> 。 <br><br>  <b>亲爱的读者们！</b> 您使用jQuery吗？ 而且，如果您使用它，是否打算将该库更改为其他内容，例如Vue？ <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN414073/">https://habr.com/ru/post/zh-CN414073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN414063/index.html">早晨司令</a></li>
<li><a href="../zh-CN414065/index.html">速卖通vs小米Redmi 5最好的中国智能手机“最高一万卢布”</a></li>
<li><a href="../zh-CN414067/index.html">使用Adjust：设置，报告和链接启动移动设备重定向</a></li>
<li><a href="../zh-CN414069/index.html">2018年FIFA世界杯（FIFA 2018）期间的雷射限制</a></li>
<li><a href="../zh-CN414071/index.html">从监视到事件管理。 DevOps莫斯科聚会的报告</a></li>
<li><a href="../zh-CN414079/index.html">工作和内部设备express.js的功能</a></li>
<li><a href="../zh-CN414081/index.html">在node.js上针对Facebook Messenger的聊天机器人开发</a></li>
<li><a href="../zh-CN414083/index.html">夏季mitap Apache Ignite在圣彼得堡</a></li>
<li><a href="../zh-CN414085/index.html">如何为统一生物特征识别系统创建样本以及为什么可能会造成危险</a></li>
<li><a href="../zh-CN414087/index.html">立即实现自动化或企业如何在线开展工作</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>