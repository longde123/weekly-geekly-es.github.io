<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¨ ‚ô®Ô∏è üòÆ Plateforme ARM et courtier MQTT comme base moderne pour les solutions IoT üì° ü•á üå∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le protocole MQTT, pour le moment, a gagn√© en popularit√© et est devenu la norme de facto dans les projets visant √† cr√©er des solutions pour l'Internet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plateforme ARM et courtier MQTT comme base moderne pour les solutions IoT</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/unet/blog/407867/"> Le protocole MQTT, pour le moment, a gagn√© en popularit√© et est devenu la norme de facto dans les projets visant √† cr√©er des solutions pour l'Internet des objets (IoT).  Bien s√ªr, l'Internet des objets est une certaine abstraction ou, plus exactement, le concept de construction de r√©seaux distribu√©s d'appareils ou de machines.  Dans le m√™me temps, les t√¢ches particuli√®res d'interaction des machines Machine-to-Machine (M2M) sont d√©j√† r√©solues efficacement, y compris le niveau de connexion de ces syst√®mes √† Internet, √† la fois pour la cr√©ation de syst√®mes d'automatisation industrielle, par exemple, et pour la construction de syst√®mes de maison intelligente.  De toute √©vidence, les syst√®mes critiques n√©cessitent un arbitre ou un courtier local et des appareils pour trouver une solution √† la situation, quelle que soit la qualit√© de la connexion Internet, ainsi qu'en cas de d√©connexion compl√®te. <br><br>  Dans le m√™me temps, des microprocesseurs √©conerg√©tiques mais non moins productifs bas√©s sur l'architecture ARM se sont r√©v√©l√©s √™tre une plate-forme mat√©rielle pour lancer un tel courtier MQTT.  Cette interconnexion de la plate-forme mat√©rielle, des protocoles de messagerie et de leur impl√©mentation logicielle est devenue le point de d√©part des progr√®s rapides du d√©veloppement de syst√®mes d'automatisation modernes.  Ensuite, nous consid√©rons plus en d√©tail les solutions mat√©rielles et les composants logiciels pour impl√©menter l'un des protocoles de messagerie les plus performants dans les syst√®mes techniques. <br><br><img src="https://habrastorage.org/webt/63/dw/zh/63dwzhuwymxu25gs3vbjmdkkdpq.jpeg"><br>  <font color="gray"><i>Revue ClusterHAT: kit informatique de cluster Raspberry Pi.</i></font>  <font color="gray"><i>Photo: magazine MagPi</i></font> <br><a name="habracut"></a><br>  L'architecture des microprocesseurs ARM (Advanced RISC Machine) est solidement ancr√©e dans nos vies.  Presque tous les smartphones fonctionnent d√©sormais sur la base de cette architecture.  Il convient de noter que le concept d'une machine RISC est assez vague aujourd'hui, car son oppos√©, la plate-forme moderne x86-64, a beaucoup emprunt√© au monde des syst√®mes RISC.  Mais il ne s'agit pas de cela, mais du fait qu'aujourd'hui, il est devenu synonyme ou caract√©ristique d'une plate-forme mobile productive et, en m√™me temps, √©conome en √©nergie, ainsi que la base de divers appareils de bricolage ou de bricolage bon march√©.  Dans ce contexte, bien s√ªr, on ne peut manquer de mentionner les diff√©rentes options du Raspberry Pi, jusqu'√† la d√©cision d'un cluster bas√© sur la carte ClusterHAT, etc.  Linux s'est r√©v√©l√© √™tre le principal syst√®me d'exploitation de cette plate-forme.  Mais ici, comment ne pas rappeler, par exemple, un syst√®me tel que Microsoft Windows 10 IoT Core? <br><br>  C'est bien quand il y a un choix, mais tout n'est pas aussi simple que nous le souhaiterions.  Microsoft Windows 10 IoT Core est un excellent syst√®me d'exploitation, mais il est principalement con√ßu pour d√©velopper et ex√©cuter des programmes, par exemple, √©crits en C # dans Microsoft Visual Studio.  Une telle approche ne peut √™tre qualifi√©e d'universelle.  Par cons√©quent, alors que le choix classique pour la plupart des t√¢ches reste ARM et Linux, ainsi que Android, comment pourrait-il se passer de cela.  Notez que pour le prototypage rapide, en plus des cartes Raspberry Pi, il existe des soci√©t√©s Orange Pi moins ch√®res de Xunlong Software ou, inversement, des ODROID plus chers de Hardkernel, mais en m√™me temps, leur prix est justifi√©.  Tout d√©pend du probl√®me r√©solu.  Et telle a √©t√©, pour le projet en cours, le lancement du serveur / courtier MQTT.  Dans le m√™me temps, il ne faut pas se concentrer sur le fait que le projet est d√©di√© √† la ¬´maison intelligente¬ª ou aux solutions pour la robotique.  Ce n'est pas important, car le protocole MQTT lui-m√™me est une solution tr√®s universelle. <br><br><img src="https://habrastorage.org/webt/jn/ej/1k/jnej1kdojrfgxqgz3q-qv9sl7_w.png"><br>  <font color="gray"><i>CPU-351-13.</i></font>  <font color="gray"><i>SBC i.MX6 robuste √† faible puissance.</i></font>  <font color="gray"><i>Photo: Eurotech</i></font> <br><br>  En parlant d'ARM, il vaut la peine de penser non seulement aux smartphones modernes, √† de nombreuses applications comme routeurs domestiques ou outils de prototypage.  Les processeurs avec une telle architecture peuvent tr√®s bien fonctionner dans des conditions assez difficiles des syst√®mes d'automatisation industrielle.  Par exemple, un ordinateur monocarte CPU-351-13 d'Eurotech.  La carte de cet ordinateur industriel est bas√©e sur le processeur iMX.6 ARM (1,2 GHz) et est un syst√®me efficace avec une consommation √©lectrique r√©duite (environ 4 W pour quatre c≈ìurs), qui est utilis√© dans les applications IoT / M2M, r√©sistant √† un fonctionnement dans la plage de temp√©rature: -40 ¬∞ √† + 85 ¬∞ C  La carte contient une sortie vid√©o, un chargeur de batterie, un modem cellulaire (cellulaire), WiFi, Bluetooth LE et prend en charge la technologie ZigBee.  La carte est √©galement id√©ale pour r√©soudre les probl√®mes de transport, car elle prend en charge le bus CAN, dispose d'un capteur d'acc√©l√©ration (acc√©l√©rom√®tre) int√©gr√© et d'un syst√®me de r√©ception du signal GPS. <br><br>  Outre les solutions industrielles, l'architecture ARM p√©n√®tre le march√© des solutions serveur.  L'exp√©rience de Scaleway, qui d√©ploie et loue non pas des machines virtuelles ordinaires, mais des serveurs physiques bas√©s sur ARMv8, est int√©ressante ici.  Cette solution est int√©ressante pour son efficacit√© √©nerg√©tique, du point de vue d'un fournisseur, et l'absence d'hyperviseur ou d'environnement de virtualisation, en tant que tel, pour l'utilisateur du service.  Ainsi, un excellent environnement pour lancer des conteneurs Docker devient une r√©alit√©.  Il ressemble √† quelque chose comme ClusterHAT √† l'√©chelle industrielle, et les performances sont un excellent choix pour la virtualisation de conteneurs dans le cloud.  En g√©n√©ral, on ne peut que convenir qu'il s'agit d'une solution commerciale audacieuse et innovante dans le sens des services d'h√©bergement, qui existe sur le march√© depuis un certain temps.  Il s'av√®re que si vous n'achetez pas votre Raspberry Pi ou √©quivalent, vous pouvez toujours exp√©rimenter avec un serveur ARM en le louant. <br><br><img src="https://habrastorage.org/webt/jb/tk/9w/jbtk9wnvaov-qbvzgbwq2lxzams.png"><br>  <font color="gray"><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CloudMQTT</a> est une solution parfaite pour la messagerie "Internet des objets"</i></font> <br><br>  En finissant le choix de la plate-forme mat√©rielle et les √©loges de l'architecture ARM, vous pouvez y mettre fin, mais vous ne devez pas oublier que vous pouvez toujours trouver une solution alternative, et cela ne pousse que les amateurs, les geeks, les pirates √©thiques √† de nouvelles recherches et exp√©riences avec des plates-formes mat√©rielles ouvertes.  Nous avons donc une t√¢che bas√©e sur Linux pour installer le courtier MQTT et l'exp√©rimenter un peu. <br><br>  Il √©tait possible de ne pas du tout consid√©rer la plate-forme mat√©rielle, mais de commencer imm√©diatement √† travailler dans le service cloud CloudMQTT.  Mais le probl√®me est consid√©r√© sur la base de la structure √† trois niveaux de l'Internet des objets, o√π au niveau inf√©rieur il y a des capteurs et des syst√®mes de contr√¥le intelligents.  Le milieu est la place du courtier MQTT, et il doit √™tre localis√© localement afin que les probl√®mes d'acc√®s √† Internet puissent √™tre partiellement r√©solus par des √©quipements internes.  Et le niveau sup√©rieur est un cloud avec Node-Red ou AWS IoT, Azure IoT Hub, etc.  Dans un tel concept, il est difficile d'imaginer le meilleur candidat pour un micro-serveur √©conome en √©nergie et √† tr√®s faible co√ªt, quelque chose de diff√©rent d'ARM. <br><br>  Mais c'est ainsi que fonctionne le monde, on ne peut pas dire que tout va bien ou, inversement, tout est mauvais.  Partout a ses propres nuances.  Le fait est que le syst√®me √† trois niveaux consid√©r√© n'est pas tout √† fait l'Internet des objets, mais plut√¥t une sorte de version interm√©diaire du chemin vers un tel concept.  Un IoT sans connexion Internet ne devrait pas exister, c'est-√†-dire  ce n'est pas pour rien que l'on s'attend √† l'apparition de r√©seaux sans fil de cinqui√®me g√©n√©ration, √† l'am√©lioration des communications existantes, etc.  Dans le concept de l'Internet des objets, il n'y a pas de place pour la couche de la couche interm√©diaire, les capteurs et les syst√®mes ex√©cutifs doivent aller directement dans le cloud, o√π ils interagiront. <br><br><img src="https://habrastorage.org/webt/zc/qt/0m/zcqt0miov0jqnmw7me7lfkvxlck.png"><br>  <font color="gray"><i>Une br√®ve mais pratique introduction au protocole MQTT et √† son application √† l'IoT.</i></font>  <font color="gray"><i>Image: laboratoires Zoetrope</i></font> <br><br>  Le protocole MQTT (Message Queuing Telemetry Transport) est un protocole asynchrone pour la transmission de messages t√©l√©m√©triques sur le principe d'un √©diteur / abonn√© utilisant un courtier.  Ce protocole a √©t√© d√©velopp√© par IBM et transf√©r√© dans la cat√©gorie des projets ouverts de l'organisation Eclipse Foundation.  Une caract√©ristique du protocole est sa compacit√©,  la taille de l'en-t√™te du paquet de donn√©es n'est que de quelques octets.  Il s'ex√©cute au-dessus du protocole TCP standard et, pour des raisons de s√©curit√©, implique l'utilisation de m√©canismes d'authentification au niveau du nom d'utilisateur / mot de passe et l'utilisation du cryptage du protocole de transport TLS / SSL.  Actuellement, le protocole MQTT est devenu la norme de facto pour la cr√©ation de solutions IoT. <br><br>  √âtant donn√© que MQTT est con√ßu pour √™tre utilis√© dans un environnement de connexion Internet, qui par d√©finition est consid√©r√© comme non fiable, le protocole pr√©voit trois niveaux d'assurance qualit√© du service de livraison.  QoS 0: au plus une fois - "pas plus d'un".  L'√©diteur publie le message au courtier, puis le courtier le publie √† l'abonn√©.  √Ä ce niveau, le transfert obligatoire des donn√©es √† l'abonn√© n'est pas garanti.  QoS 1: au moins une fois - ¬´au moins un¬ª.  L'abonn√© doit recevoir ce message au moins une fois.  Cependant, les messages peuvent √™tre dupliqu√©s et cela devrait √™tre fourni par l'abonn√© dans la logique de son travail.  QoS 2: Exactement un - "garanti".  Fournit une garantie de livraison supr√™me et aucune duplication des messages. <br><br>  Pour faire √©voluer vos d√©cisions, vous pouvez utiliser la configuration ¬´pont¬ª entre les courtiers et ainsi r√©duire la charge de chaque courtier individuellement.  Le protocole MQTT permet √©galement aux abonn√©s de recevoir des donn√©es sur plusieurs canaux √† la fois.  Pour ce faire, les symboles g√©n√©riques "+" et "#" sont utilis√©s pour marquer soit toutes les entr√©es d'un abonnement particulier, soit uniquement un bloc de message.  Par exemple, s'abonner √† plusieurs capteurs de temp√©rature diff√©rents: ¬´capteurs / + / temp√©rature / +¬ª ou s'abonner imm√©diatement √† tous les canaux: ¬´#¬ª.  Vous pouvez discuter des fonctionnalit√©s du protocole pendant une longue p√©riode, mais il est plus facile d'essayer avec un exemple r√©el.  De nombreuses solutions peuvent √™tre choisies comme courtier, mais l'un des courtiers les plus populaires et les plus l√©gers est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mosquitto</a> . <br><br>  Pour d√©ployer le courtier Mosquitto, nous choisirons une version simple d'un ordinateur √† carte unique, par exemple, l'une des premi√®res versions de la RAM Raspberry Pi mod√®le B 512 Mo.  Ce choix est dict√© litt√©ralement par ce qui √©tait √† port√©e de main.  Bien s√ªr, pour un vrai projet, vous devez √©tudier s√©par√©ment la question de la fiabilit√© et des performances de la carte, et, en plus de choisir les solutions mat√©rielles optimales, vous devez √©galement √©tudier les questions de fiabilit√© du bo√Ætier, de la qualit√© de l'alimentation, de la s√©curit√© du syst√®me dans son ensemble, etc.  Il √©tait encore int√©ressant de prendre la carte Raspberry Pi pour enfin dissiper le mythe des difficult√©s de d√©marrage d'un projet bas√© sur des solutions mat√©rielles ouvertes et le syst√®me d'exploitation Linux.  Bien s√ªr, le d√©veloppeur a besoin de connaissances de base, mais les plates-formes modernes sont devenues extr√™mement conviviales du point de vue de l'interface logicielle et sont en m√™me temps bien document√©es. <br><br><img src="https://habrastorage.org/webt/my/3x/o2/my3xo2nxuh64qimqsegxldwjd3i.png"><br>  <font color="gray"><i>Photo: RAM Raspberry Pi mod√®le B 512 Mo</i></font> <br><br>  En tant que syst√®me d'exploitation, vous pouvez choisir le firmware officiel Raspbian Stretch avec ordinateur de bureau ou Raspbian Stretch Lite.  Ce sont deux syst√®mes d'exploitation identiques bas√©s sur la distribution Debian Stretch bien connue, qu'ils ont modifi√©e pour fonctionner avec le Raspberry Pi.  Les diff√©rences sont uniquement en pr√©sence d'un bureau graphique, ce qui est justifi√© pour d√©marrer la connaissance, mais pour le serveur, bien s√ªr, il n'y a rien pour le shell graphique.  Pour l'installation, nous choisissons toujours l'option avec un bureau graphique et installons tout cela sur une carte SD 8 Go peu co√ªteuse.  En fait, il reste √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">charger l'</a> image du syst√®me d'exploitation et √† utiliser l'utilitaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">multiplateforme</a> tr√®s pratique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Etcher</a> pour transf√©rer l'image sur un disque physique. <br><br><img src="https://habrastorage.org/webt/im/0q/3q/im0q3qnxw4n9zb4ouhqxtpgcr4o.png"><br>  <font color="gray"><i>Capture d'√©cran: Etcher dans Windows 10</i></font> <br><br>  Il reste maintenant √† mettre le lecteur flash dans la carte Raspberry Pi et √† mettre sous tension.  Il y a une fonction ode, si vous avez besoin d'acc√©der √† distance √† la ligne de commande Raspbian Stretch en utilisant le protocole ssh, alors qu'il n'y a pas de clavier physiquement connect√© √† la carte, vous pouvez √©crire un fichier vide avec le nom ssh dans la section de d√©marrage du lecteur flash, ce qui permettra l'acc√®s correspondant.  Apr√®s avoir allum√© le Raspberry Pi, l'acc√®s au syst√®me d'exploitation est autoris√© √† l'utilisateur "pi" avec le mot de passe "raspberry".  L'utilisateur par d√©faut ¬´pi¬ª peut obtenir les privil√®ges root en ex√©cutant la commande sudo.  Puisque tout est pr√©par√© dans Raspbian pour le travail confortable d'un utilisateur non pr√©par√©, la premi√®re commande dans le nouveau syst√®me peut √™tre d'appeler le menu de configuration du syst√®me: <br><br> <code>$ sudo raspi-config</code> <br> <br><img src="https://habrastorage.org/webt/io/qg/-o/ioqg-oztj8cposjn2rr38pkqjj4.png"><br>  <font color="gray"><i>Capture d'√©cran: Connexion √† distance au Raspberry Pi par SSH et ex√©cutez raspi-config</i></font> <br><br>  L'utilitaire raspi-config vous permet de d√©finir un nouveau mot de passe pour l'utilisateur et, par exemple, dans le menu "Options d'interfa√ßage", vous pouvez configurer le comportement des interfaces syst√®me, activer le bureau distant via le protocole VNC, etc.  Toujours dans le menu: ¬´Options de d√©marrage¬ª, vous pouvez d√©finir les param√®tres par d√©faut pour d√©marrer le syst√®me, par exemple, s√©lectionner uniquement le mode de ligne de commande, et dans le sous-menu ¬´R√©solution¬ª du menu ¬´Options avanc√©es¬ª d√©finir la r√©solution souhait√©e de l'√©cran graphique, par exemple, en s√©lectionnant la taille requise ¬´DMT¬ª - pour l'interface num√©rique du moniteur ou ¬´CEA¬ª - entr√©e analogique, etc. <br><br>  Vous pouvez maintenant mettre √† jour les packages syst√®me: <br> <code>$ sudo apt-get update <br> $ sudo apt-get upgrade</code> <br> <br>  Et installez le courtier Mosquitto et le client MQTT, par exemple, pour tester le syst√®me: <br> <code>$ sudo apt-get install mosquitto <br> $ sudo apt-get sudo mosquitto-clients</code> <br> <br>  Vous pouvez maintenant consulter localement le courtier MQTT, auquel vous pouvez vous abonner, par exemple, √† un √©v√©nement: <br> <code>$ mosquitto_sub -h localhost -t "sensor/temperature"</code> <br> <br>  Et publiez quelques valeurs pour la cha√Æne correspondante: <br> <code>$ mosquitto_pub -h localhost -t "sensor/temperature" -m 21.0</code> <br> <br><img src="https://habrastorage.org/webt/f4/nl/tw/f4nltwnai_td1rvgdq8qd9chwae.png"><br>  <font color="gray"><i>Capture d'√©cran: sessions de terminal Raspberry Pi</i></font> <br><br>  Vous pouvez consulter les abonnements et faire des publications √† l'aide du protocole MQTT, ainsi que tester la capacit√© de chargement du courtier dans l'environnement de navigateur Chrome et les syst√®mes d'exploitation: Linux, Mac, Windows gr√¢ce √† l'application multiplateforme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MQTTBox</a> . <br><br>  En effet, le protocole MQTT est devenu si r√©pandu qu'il est tout simplement impossible de ne pas trouver de solution pratique pour vos t√¢ches.  De plus, dans le cadre du projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Eclipse Paho</a> , le d√©veloppement de solutions logicielles ouvertes et de biblioth√®ques, dans presque tous les langages de programmation, se d√©veloppe activement pour mettre en ≈ìuvre le protocole de messagerie MQTT et, ainsi, am√©liorer les solutions pour l'Internet des objets. <br><br>  La cr√©ation de solutions bas√©es sur le courtier MQTT devient d√©j√† une t√¢che triviale.  Il suffit de d√©ployer le syst√®me, de se connecter au cloud, par exemple, en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Node-RED</a> ou une solution sp√©cialis√©e, et cela reste la ¬´petite¬ª chose - pour connecter des capteurs et des actionneurs intelligents.  Pour consid√©rer le niveau inf√©rieur des syst√®mes IoT, un article s√©par√© devrait √™tre √©crit, mais pour cet exemple, il est tout √† fait possible de se passer d'un exemple bas√© sur la norme r√©elle pour l'Internet des objets - les cartes NodeMCU bas√©es sur le SoC ESP8266 d'ESpressif. <br><br><img src="https://habrastorage.org/webt/-g/ny/if/-gnyifglwy_iycntva_-ylxuu1w.png"><br>  <font color="gray"><i>Capture d'√©cran: MQTTBox dans Windows 10</i></font> <br><br>  La carte NodeMCU se concentre initialement sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©veloppement d'eLua</a> .  Vous pouvez utiliser le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">service cloud</a> pour cr√©er le firmware, et la carte de projet elle-m√™me existe en tant que solution mat√©rielle ouverte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NodeMCU DEVKIT V1.0</a> , pour laquelle de nombreux analogues ont d√©j√† √©t√© publi√©s.  En m√™me temps, une bonne documentation du projet doit √™tre not√©e.  Cependant, il est tr√®s subjectif, mais lors du d√©veloppement d'un capteur intelligent avec le protocole MQTT bas√© sur un firmware avec eLua pour NodeMCU DEVKIT, il faut encore faire face √† un certain nombre de difficult√©s avec la mise en ≈ìuvre du protocole MQTT.  Dans le m√™me temps, l'ensemble de l'infrastructure du projet semble en quelque sorte insuffisamment pr√©par√© pour √™tre utilis√© comme environnement pour le d√©veloppement rapide et de haute qualit√© de syst√®mes √† microprocesseurs.  Toutes les bagatelles et les nuances apparaissent toujours, mais encore une fois, cela vaut la peine d'√™tre r√©p√©t√© - c'est une √©valuation tr√®s subjective.  Fait int√©ressant, les lecteurs de blogs ont-ils des exp√©riences r√©ussies avec eLua et MQTT? <br><br>  Le choix de l'environnement de d√©veloppement Arduino IDE pour travailler avec NodeMCU DEVKIT, cependant, comme avec d'autres cartes bas√©es sur ESP8266, est une question compl√®tement diff√©rente.  Tout se fait presque instantan√©ment sur la base de biblioth√®ques pr√™tes √† l'emploi et d'√©chantillons de code.  Pour commencer le d√©veloppement, vous devez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charger l'</a> environnement de d√©veloppement multiplateforme ouvert Arduino IDE depuis le site officiel du projet Arduino.  Ensuite, dans les param√®tres "Fichier" - "Pr√©f√©rences" - "URL du gestionnaire de cartes d'addition:", sp√©cifiez le lien vers le noyau Arduino pour le projet de puce WiFi ESP8266: <a href="">arduino.esp8266.com/stable/package_esp8266com_index.json</a> Ensuite, dans "Outils" - "Gestionnaire de cartes" ¬ªIl reste √† t√©l√©charger et √† installer le support des cartes communautaires ESP8266.  Soit dit en passant, nous ne devons pas oublier que pour travailler avec la carte NodeMCU, vous devrez installer le pilote du convertisseur d'interface CP210x ou, √©galement appel√© pont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UART vers USB</a> . <br><br><img src="https://habrastorage.org/webt/zb/6g/oi/zb6goigiu0jlmmsxjkfgdbgziti.png"><br>  <font color="gray"><i>Photo: Utilisation de la carte NodeMCU</i></font> <br><br>  Pour travailler avec le protocole MQTT, vous pouvez installer la biblioth√®que Arduino PubNub.  Pour ce faire, dans le menu "Sketch" - "Inclure la biblioth√®que" - "G√©rer les biblioth√®ques", s√©lectionnez la biblioth√®que appropri√©e et installez-la.  Vous pouvez vous familiariser avec les capacit√©s de la plate-forme logicielle sur la base d'un exemple de code, par exemple, l'exemple Basic ESP8266 MQTT, o√π le courtier publie le canal ¬´outTopic¬ª et s'abonne √©galement √† ¬´inTopic¬ª, et lorsqu'il s'agit de ¬´inTopic¬ª, la valeur est ¬´1¬ª, puis La carte allume la LED int√©gr√©e.  Tout est simple, rapide et fonctionne imm√©diatement. <br><br><img src="https://habrastorage.org/webt/0z/tp/rk/0ztprkq3tdphos-9edhghtvp_og.png"><br>  <font color="gray"><i>Capture d'√©cran: Arduino IDE avec prise en charge ESP8266</i></font> <br><br>  En conclusion, je voudrais noter que cette publication n'appelle pas √† utiliser exclusivement l'architecture des processeurs ARM pour la construction de syst√®mes IoT, et elle a seulement abord√© les sp√©cificit√©s de l'introduction du courtier MQTT comme lien de connexion pour les solutions d'automatisation.  Mais en m√™me temps, le lecteur peut se faire une opinion qu'aujourd'hui, les solutions pour l'IoT sont le lot des geeks, des exp√©rimentateurs et des fans, par exemple, les cartes Raspberry Pi.  C'est vrai, le progr√®s est bas√© sur cela, mais l'avenir est d√©j√† avec nous. <br><br>  Un exemple est √©vident: la solution commerciale de plate-forme de capteurs sans fil Wzzard pour IoT et Advantech B + B SmartWorx Specter Network Gateway.  Ici, comme dans de nombreuses impl√©mentations dans les cycles de production d'aujourd'hui, l'architecture des capteurs industriels prot√©g√©s contre l'environnement est propos√©e, qui sont combin√©s par un r√©seau sans fil bas√© sur les normes 6LoWPAN et IEEE 802.15.4e.  Pour le traitement des donn√©es au niveau du cloud, une passerelle prenant en charge le protocole MQTT et la transmission de donn√©es via les communications d'un r√©seau 3G sans fil ou Ethernet 10/100 filaire est propos√©e. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hUm1knByFo8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><hr><br><h3>  Ressources et liens connexes: </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Processeurs ARM: caract√©ristiques d'architecture, diff√©rences et perspectives - ITC.ua</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Orange Pi PC - un mini-pc complet pour 15 $ sur Linux - Geek magazine</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ODROID-C1 - examen et comparaison avec RPi - IT quotidien blog, nouvelles, magazine, technologies</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Coup d'≈ìil sur Scaleway - Blog quotidien informatique, actualit√©s, magazine, technologies</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBM d√©place le protocole MQTT dans la cat√©gorie des projets ouverts - OpenNET</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Protocole MQTT - iot.ru</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Protocole MQTT.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnalit√©s, applications, proc√©dures de base - Technologies et communications</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation sur Raspberry Pi.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Acc√®s √† distance - Raspberry Pi Foundation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Configuration initiale du Raspberry Pi - Domoticz</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Premiers pas avec MQTT Mosquitto Broker sur Raspberry Pi, Windows, MacOS et Linux - Projets de bricolage</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les sept meilleurs outils client MQTT - HiveMQ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√©l√©chargement de temp√©rature sur MQTT √† l'aide de NodeMCU et du capteur DHT11 - Les auteurs de ThingsBoard</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tutoriel MQTT pour Raspberry Pi, Arduino et ESP8266 - Baldengineer Blog</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Micrologiciel ESP8266, programmation en Arduino IDE - Geektimes</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wireless Sensor Network Platform ‚Äì Connect2 Systems</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr407867/">https://habr.com/ru/post/fr407867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr407853/index.html">Comment fonctionne la radio FM</a></li>
<li><a href="../fr407857/index.html">Quand vous n'avez pas besoin d'un rythme cardiaque constant - Lifetrak C400</a></li>
<li><a href="../fr407859/index.html">Affaires d'inflation de jetons</a></li>
<li><a href="../fr407863/index.html">Comment j'ai achet√© une banque chinoise et comment j'en ai fait une ¬´personne¬ª</a></li>
<li><a href="../fr407865/index.html">R√©trospective des lunettes et casques de r√©alit√© virtuelle</a></li>
<li><a href="../fr407869/index.html">Intel Optane SSD 900P - Extension Optane</a></li>
<li><a href="../fr407871/index.html">CBS poursuit New Yorker en publiant une capture d'√©cran d'une √©mission de t√©l√©vision des ann√©es 50 en ligne</a></li>
<li><a href="../fr407873/index.html">Tout l'or n'est pas Bitcoin Gold. Les cons√©quences du hard fork d'octobre</a></li>
<li><a href="../fr407875/index.html">Invit√© de Sunny California: MrSpeakers Ether Flow</a></li>
<li><a href="../fr407877/index.html">Inspir√© par p2p: Inspeer change de pr√™t direct</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>