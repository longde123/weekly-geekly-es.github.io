<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤˜ğŸ½ ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘ğŸ» ğŸˆ¸ æŒ‡å—ï¼šèƒ¸è…º+æ˜¥å¤©ã€‚ ç¬¬ä¸‰éƒ¨åˆ† ğŸ˜£ ğŸ• ğŸ›€ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¬¬ä¸€éƒ¨åˆ† 
 ç¬¬äºŒéƒ¨åˆ† 

 7éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯ 
 æˆ‘ä»¬çš„å¤§å¤šæ•°è¡¨å•éƒ½åº”æ˜¾ç¤ºéªŒè¯æ¶ˆæ¯ï¼Œä»¥å‘ŠçŸ¥ç”¨æˆ·ä»–æ‰€çŠ¯çš„é”™è¯¯ã€‚ 

 Thymeleafä¸ºæ­¤æä¾›äº†ä¸€äº›å·¥å…·ï¼š #fieldså¯¹è±¡ä¸­çš„å¤šä¸ªå‡½æ•°ï¼Œ thï¼šé”™è¯¯å’Œthï¼šerrorclasså±æ€§ ã€‚ 

 7.1ç°åœºé”™è¯¯ 
 è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœå­—æ®µåŒ…å«é”™è¯¯ï¼Œå¦‚ä½•ä¸º...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æŒ‡å—ï¼šèƒ¸è…º+æ˜¥å¤©ã€‚ ç¬¬ä¸‰éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437658/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a> <br><br><h2>  7éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯ </h2><br> æˆ‘ä»¬çš„å¤§å¤šæ•°è¡¨å•éƒ½åº”æ˜¾ç¤ºéªŒè¯æ¶ˆæ¯ï¼Œä»¥å‘ŠçŸ¥ç”¨æˆ·ä»–æ‰€çŠ¯çš„é”™è¯¯ã€‚ <br><a name="habracut"></a><br>  <b>Thymeleafä¸ºæ­¤</b>æä¾›äº†ä¸€äº›å·¥å…·ï¼š <b>#fields</b>å¯¹è±¡ä¸­çš„å¤šä¸ªå‡½æ•°ï¼Œ <b>thï¼šé”™è¯¯</b>å’Œ<b>thï¼šerrorclasså±æ€§</b> ã€‚ <br><br><h3>  7.1ç°åœºé”™è¯¯ </h3><br> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœå­—æ®µåŒ…å«é”™è¯¯ï¼Œå¦‚ä½•ä¸ºè¯¥å­—æ®µè®¾ç½®ç‰¹å®šçš„CSSç±»ï¼š <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:field</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{datePlanted}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('datePlanted')}? fieldError"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œå‡½æ•°<b>ï¼ƒfields.hasErrorsï¼ˆ...ï¼‰</b>æ¥æ”¶å­—æ®µè¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼ˆ <b>datePlanted</b> ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¯¥å€¼æŒ‡ç¤ºè¯¥å­—æ®µæ˜¯å¦å­˜åœ¨ä»»ä½•éªŒè¯é”™è¯¯ã€‚ <br><br> æˆ‘ä»¬è¿˜å¯ä»¥è·å–è¯¥å­—æ®µçš„æ‰€æœ‰é”™è¯¯å¹¶é‡å¤å®ƒä»¬ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"err : ${#fields.errors('datePlanted')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${err}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> é™¤äº†è¿­ä»£ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<b>thï¼šerrors</b> ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«æŒ‡å®šé€‰æ‹©å™¨çš„æ‰€æœ‰é”™è¯¯ï¼Œå¹¶ç”¨&lt;br /&gt;åˆ†éš”ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:field</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{datePlanted}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('datePlanted')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{datePlanted}"</span></span></span><span class="hljs-tag">&gt;</span></span>Incorrect date<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> åŸºäºé”™è¯¯çš„CSSæ ·å¼ï¼š <b>thï¼šerrorclass</b> <br><br> ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„ç¤ºä¾‹å¾ˆå¸¸è§ï¼Œå¦‚æœæ­¤å­—æ®µä¸­æœ‰é”™è¯¯ï¼Œåˆ™ä¸ºè¾“å…¥è¡¨å•è®¾ç½®CSSç±»ï¼Œå› æ­¤Thymeleafæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§æ¥å‡†ç¡®æ‰§è¡Œï¼š <b>thï¼šerrorclass</b> ã€‚ <br><br> åº”ç”¨äºè¡¨å•å­—æ®µæ ‡ç­¾ï¼ˆè¾“å…¥ï¼Œé€‰æ‹©ï¼Œæ–‡æœ¬åŒºåŸŸ...ï¼‰ï¼Œå®ƒå°†ä»åŒä¸€æ ‡ç­¾ä¸­çš„ä»»ä½•ç°æœ‰<b>åç§°</b>æˆ–<b>thï¼šå­—æ®µ</b>å±æ€§è¯»å–è¦æ£€æŸ¥çš„å­—æ®µçš„<b>åç§°</b> ï¼Œç„¶åå°†æŒ‡å®šçš„CSSç±»æ·»åŠ åˆ°æ ‡ç­¾ï¼ˆå¦‚æœæœ‰ï¼‰æœ‰ä»»ä½•ç›¸å…³çš„é”™è¯¯ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:field</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{datePlanted}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"small"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errorclass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fieldError"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br> å¦‚æœ<b>datePlantedä¸­</b>æœ‰é”™è¯¯ï¼Œå®ƒå°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"datePlanted"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"datePlanted"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2013-01-01"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"small fieldError"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h3>  7.2æ‰€æœ‰é”™è¯¯ </h3><br> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨è¡¨æ ¼ä¸­æ˜¾ç¤ºæ‰€æœ‰é”™è¯¯æ€ä¹ˆåŠï¼Ÿ æˆ‘ä»¬åªéœ€è¦è¯·æ±‚å…·æœ‰å¸¸é‡' <b>*</b> 'æˆ–' <b>all</b> 'ï¼ˆç­‰æ•ˆï¼‰çš„<b>ï¼ƒfields.hasErrorsï¼ˆ...ï¼‰</b>å’Œ<b>ï¼ƒfields.errorsï¼ˆ...ï¼‰</b>æ–¹æ³•ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('*')}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"err : ${#fields.errors('*')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${err}"</span></span></span><span class="hljs-tag">&gt;</span></span>Input is incorrect<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å¦‚ä»¥ä¸Šç¤ºä¾‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è·å–æ‰€æœ‰é”™è¯¯å¹¶å¯¹å…¶è¿›è¡Œè¿­ä»£... <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"err : ${#fields.errors('*')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${err}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ...å¹¶åˆ›å»ºä¸€ä¸ªå…±äº«åˆ—è¡¨&lt;br /&gt;ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('all')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{all}"</span></span></span><span class="hljs-tag">&gt;</span></span>Incorrect date<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> æœ€åï¼Œè¯·æ³¨æ„ï¼Œ <b>ï¼ƒfields.hasErrorsï¼ˆ'*'ï¼‰</b>ç­‰æ•ˆäº<b>ï¼ƒfields.hasAnyErrorsï¼ˆï¼‰</b> ï¼Œè€Œ<b>ï¼ƒfields.errorsï¼ˆ'*'ï¼‰</b>ç­‰æ•ˆäº<b>ï¼ƒfields.allErrorsï¼ˆï¼‰</b> ã€‚ ä½¿ç”¨æ‚¨å–œæ¬¢çš„è¯­æ³•ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasAnyErrors()}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"err : ${#fields.allErrors()}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${err}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  7.3å…¨å±€é”™è¯¯ </h3><br>  Springè¡¨å•ä¸­å­˜åœ¨ç¬¬ä¸‰ç§é”™è¯¯ç±»å‹ï¼šå…¨å±€é”™è¯¯ã€‚ è¿™äº›é”™è¯¯ä¸è¡¨å•ä¸­çš„ä»»ä½•ç‰¹å®šå­—æ®µå‡ä¸ç›¸å…³ï¼Œä½†ä»ç„¶å­˜åœ¨ã€‚ <br>  Thymeleafæä¾›äº†è®¿é—®è¿™äº›é”™è¯¯çš„<b>å…¨å±€</b>å¸¸é‡ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('global')}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"err : ${#fields.errors('global')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${err}"</span></span></span><span class="hljs-tag">&gt;</span></span>Input is incorrect<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('global')}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{global}"</span></span></span><span class="hljs-tag">&gt;</span></span>Incorrect date<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ...ä»¥åŠç­‰æ•ˆçš„è¾…åŠ©æ–¹æ³•<b>ï¼ƒfields.hasGlobalErrorsï¼ˆï¼‰</b>å’Œ<b>ï¼ƒfields.globalErrorsï¼ˆï¼‰</b> ï¼š <br><br><h3>  7.4åœ¨è¡¨æ ¼ä¹‹å¤–æ˜¾ç¤ºé”™è¯¯ </h3><br> è¡¨å•éªŒè¯é”™è¯¯ä¹Ÿå¯ä»¥ä½¿ç”¨å˜é‡ï¼ˆ <b>$ {......</b> ï¼‰è€Œä¸æ˜¯é€‰æ‹©è¡¨è¾¾å¼ï¼ˆ <b>* {......</b> ï¼‰ï¼‰å’Œæ”¯æŒè¯¥è¡¨å•çš„ç»„ä»¶åç§°çš„å‰ç¼€æ˜¾ç¤ºåœ¨è¡¨å•å¤–éƒ¨ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${myForm}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${myForm.date}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:errors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${myForm.*}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('${myForm}')}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('${myForm.date}')}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${#fields.hasErrors('${myForm.*}')}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:object</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${myForm}"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  7.5ä¸°å¯Œçš„é”™è¯¯å¯¹è±¡ </h3><br>  Thymeleafå¯ä»¥æ¥æ”¶å…·æœ‰å±æ€§<b>fieldName</b> ï¼ˆStringï¼‰ï¼Œ <b>message</b> ï¼ˆStringï¼‰å’Œ<b>global</b> ï¼ˆbooleanï¼‰çš„beanç»„ä»¶å½¢å¼ï¼ˆè€Œä¸æ˜¯ç®€å•å­—ç¬¦ä¸²ï¼‰å½¢å¼é”™è¯¯çš„ä¿¡æ¯ã€‚ <br><br> å¯ä»¥ä½¿ç”¨<b>ï¼ƒfields.detailedErrorsï¼ˆï¼‰</b>å®ç”¨ç¨‹åºæ–¹æ³•è·å¾—è¿™äº›é”™è¯¯ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:each</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"e : ${#fields.detailedErrors()}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${e.global}? globalerr : fielderr"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${e.global}? '*' : ${e.fieldName}"</span></span></span><span class="hljs-tag">&gt;</span></span>The field name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${e.message}"</span></span></span><span class="hljs-tag">&gt;</span></span>The error message<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  8è¿™ä»ç„¶æ˜¯åŸå‹ï¼ </h2><br> æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå·²å‡†å¤‡å°±ç»ªã€‚ ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬åˆ›å»ºçš„.htmlé¡µé¢... <br><br> ä½¿ç”¨Thymeleafå¸¦æ¥çš„æœ€ä»¤äººæ„‰å¿«çš„åæœä¹‹ä¸€æ˜¯ï¼Œåœ¨å°†æ‰€æœ‰è¿™äº›åŠŸèƒ½æ·»åŠ åˆ°HTMLä¹‹åï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥å°†è¯¥HTMLç”¨ä½œåŸå‹ï¼ˆæˆ‘ä»¬è¯´è¿™æ˜¯<i>Natural Template</i> ï¼‰ã€‚ è®©æˆ‘ä»¬ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<b>seedstartermng.html</b>è€Œä¸å¯åŠ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼š <br><br><img src="https://habrastorage.org/webt/bf/cf/yi/bfcfyitvfwhvrbqcaqo7eqebqia.png" alt="å›¾ç‰‡"><br><br> åœ¨è¿™é‡Œï¼ è¿™ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åº”ç”¨ç¨‹åºï¼Œå®ƒä¸æ˜¯çœŸå®çš„æ•°æ®â€¦â€¦ä½†æ˜¯å®ƒæ˜¯ç”±å®Œå…¨æ˜¾ç¤ºçš„HTMLä»£ç ç»„æˆçš„å®Œå…¨æ­£ç¡®çš„åŸå‹ã€‚ <br><br><h2>  9è½¬æ¢æœåŠ¡ </h2><br><h3>  9.1é…ç½® </h3><br> å¦‚å‰æ‰€è¿°ï¼ŒThymeleafå¯ä»¥ä½¿ç”¨åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­æ³¨å†Œçš„è½¬æ¢æœåŠ¡ã€‚ æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé…ç½®ç±»æ‰©å±•äº†æœ¬æœºSpring <b>WebMvcConfigurerAdapterå¸®åŠ©å™¨</b> ï¼Œå°†è‡ªåŠ¨æ³¨å†Œä¸€ä¸ªè½¬æ¢æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ å¿…è¦çš„æ ¼å¼åŒ–å·¥å…·æ¥å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸‹å®ƒçš„å¤–è§‚ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFormatters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> FormatterRegistry registry)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.addFormatters(registry); registry.addFormatter(varietyFormatter()); registry.addFormatter(dateFormatter()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> VarietyFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">varietyFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VarietyFormatter(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> DateFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dateFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateFormatter(); }</code> </pre> <br><h3>  9.2åŒæ‹¬å·è¯­æ³• </h3><br> è½¬æ¢æœåŠ¡å¯ä»¥è½»æ¾åº”ç”¨äºå°†ä»»ä½•å¯¹è±¡è½¬æ¢/æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚ è¿™æ˜¯ä½¿ç”¨åŒæ‹¬å·è¡¨è¾¾å¼è¯­æ³•å®Œæˆçš„ï¼š <br><br><ul><li> å¯¹äºå˜é‡è¡¨è¾¾å¼ï¼š <b>$ {{......}</b> </li><li> è¡¨è¾¾é€‰æ‹©ï¼š <b>* {{......}</b> </li></ul><br> å› æ­¤ï¼Œä¾‹å¦‚ï¼Œç»™å®šæ•´æ•°åˆ°å­—ç¬¦ä¸²è½¬æ¢å™¨ï¼Œå®ƒå°†é€—å·æ·»åŠ ä¸ºåƒä½åˆ†éš”ç¬¦ï¼Œè¿™æ˜¯ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${val}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${{val}}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ...åº”å¯¼è‡´ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>1234567890<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>1,234,567,890<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  9.3è¡¨æ ¼ä½¿ç”¨ </h3><br> å‰é¢æˆ‘ä»¬çœ‹åˆ°ï¼Œæ¯ä¸ª<b>thï¼šå­—æ®µ</b>å±æ€§å°†å§‹ç»ˆåº”ç”¨è½¬æ¢æœåŠ¡ï¼Œå› æ­¤ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:field</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{datePlanted}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  ...å®é™…ä¸Šç›¸å½“äºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:field</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*{{datePlanted}}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br> è¯·æ³¨æ„ï¼Œæ ¹æ®Springçš„è¦æ±‚ï¼Œè¿™æ˜¯å°†è½¬æ¢æœåŠ¡åº”ç”¨äºä½¿ç”¨å•æ‹¬å·è¯­æ³•çš„è¡¨è¾¾å¼çš„å”¯ä¸€æ–¹æ¡ˆã€‚ <br><br><h3>  9.4 #conversionsè½¬æ¢å¯¹è±¡ </h3><br>  #conversionsè½¬æ¢å®ç”¨ç¨‹åºå¯¹è±¡ä½¿æ‚¨å¯ä»¥åœ¨å¿…è¦æ—¶æ‰‹åŠ¨å¯åŠ¨è½¬æ¢æœåŠ¡ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${'Val: ' + #conversions.convert(val,'String')}"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> è¯¥æœåŠ¡å¯¹è±¡çš„è¯­æ³•ä¸ºï¼š <br><br><ul><li>  <b>ï¼ƒconversions.convertï¼ˆObjectï¼ŒClassï¼‰</b> ï¼šå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„ç±» </li><li>  <b>ï¼ƒconversions.convertï¼ˆObjectï¼ŒStringï¼‰</b> ï¼šä¸ä¸Šé¢ç›¸åŒï¼Œä½†ç›®æ ‡ç±»ä¸ºStringï¼ˆè¯·æ³¨æ„ï¼Œå¯ä»¥çœç•¥java.langã€‚åŒ…ï¼‰ </li></ul><br><h2> æ¨¡æ¿æ¨¡æ¿ç‰‡æ®µçš„10ä¸ªæ¸²æŸ“ç‰‡æ®µï¼ˆAJAXç­‰ï¼‰ </h2><br>  Thymeleafæä¾›äº†ä»…ç”±äºæ‰§è¡Œæ¨¡æ¿è€Œå‘ˆç°éƒ¨åˆ†æ¨¡æ¿çš„åŠŸèƒ½ï¼š <i>fragment</i> ã€‚ <br><br> è¿™å¯èƒ½æ˜¯æœ‰ç”¨çš„ç»„ä»¶åŒ–å·¥å…·ã€‚ ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œ<b>AJAX</b>è°ƒç”¨çš„æ§åˆ¶å™¨ä¸Šä½¿ç”¨ï¼Œè¯¥æ§åˆ¶å™¨å¯ä»¥è¿”å›å·²ç»åŠ è½½åˆ°æµè§ˆå™¨ä¸­çš„é¡µé¢å¸ƒå±€çš„ç‰‡æ®µï¼ˆä»¥æ›´æ–°é€‰æ‹©ï¼Œå¯ç”¨/ç¦ç”¨æŒ‰é’®...ï¼‰ã€‚ <br><br> å¯ä»¥ä½¿ç”¨Thymeleafç‰‡æ®µè§„èŒƒï¼ˆå®ç°<b>org.thymeleaf.fragment.IFragmentSpec</b>æ¥å£çš„å¯¹è±¡ï¼‰æ¥å®ç°ç‰‡æ®µåŒ–æ¸²æŸ“ã€‚ <br><br> è¿™äº›å®ç°ä¸­æœ€å¸¸è§çš„æ˜¯<b>org.thymeleaf.standard.fragment.StandardDOMSelectorFragmentSpec</b> ï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨DOMé€‰æ‹©å™¨æŒ‡å®šç‰‡æ®µï¼Œå°±åƒåœ¨<b>thï¼šinclude</b>æˆ–<b>thï¼šreplaceä¸­ä½¿ç”¨çš„é‚£æ ·</b> ã€‚ <br><br><h3>  10.1åœ¨View Beanä¸­å®šä¹‰ç‰‡æ®µ </h3><br> è§†å›¾beanæ˜¯åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­å£°æ˜çš„<b>org.thymeleaf.spring4.view.ThymeleafView</b>ç±»çš„beanï¼ˆå¦‚æœä½¿ç”¨Javaé…ç½®ï¼Œåˆ™ä¸º<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Bean</a></b>æ³¨é‡Šï¼‰ã€‚ å®ƒä»¬å…è®¸æ‚¨æŒ‡å®šç‰‡æ®µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span>(name=<span class="hljs-string"><span class="hljs-string">"content-part"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ThymeleafView </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">someViewBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ThymeleafView view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ThymeleafView(<span class="hljs-string"><span class="hljs-string">"index"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// templateName = 'index' view.setMarkupSelector("content"); return view; }</span></span></code> </pre> <br> ç»™å®šä¸Šè¿°beançš„å®šä¹‰ï¼Œå¦‚æœæˆ‘ä»¬çš„æ§åˆ¶å™¨è¿”å›ä¸€ä¸ª<b>content-part</b> ï¼ˆä¸Šè¿°beançš„åç§°ï¼‰... <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/showContentPart"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showContentPart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"content-part"</span></span>; }</code> </pre> <br>  ... Thymeleafå°†ä»…è¿”å›ç´¢å¼•æ¨¡æ¿çš„<b>å†…å®¹</b>ç‰‡æ®µ-åœ¨åº”ç”¨å‰ç¼€å’Œåç¼€ä¹‹åï¼Œå…¶ä½ç½®å¯èƒ½ä¸<b>/WEB-INF/templates/index.html</b>å¤§è‡´ç›¸åŒã€‚ å› æ­¤ï¼Œç»“æœå°†å®Œå…¨ç­‰åŒäºæŒ‡å®š<b>index :: content</b> ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:fragment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> Only this div will be rendered! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> è¿˜è¦æ³¨æ„ï¼Œç”±äºåŠŸèƒ½å¼ºå¤§çš„Thymeleafå¸ƒå±€é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­é€‰æ‹©æ²¡æœ‰ä»»ä½•<b>thï¼šfragment</b>å±æ€§çš„<b>ç‰‡æ®µ</b> ã€‚ è®©æˆ‘ä»¬ä½¿ç”¨<b>id</b>å±æ€§ï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span>(name=<span class="hljs-string"><span class="hljs-string">"content-part"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ThymeleafView </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">someViewBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ThymeleafView view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ThymeleafView(<span class="hljs-string"><span class="hljs-string">"index"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// templateName = 'index' view.setMarkupSelector("#content"); return view; }</span></span></code> </pre> <br><h3>  10.2åœ¨æ§åˆ¶å™¨çš„è¿”å›å€¼ä¸­å®šä¹‰ç‰‡æ®µ </h3><br> é™¤äº†å£°æ˜<i>è§†å›¾beanä¹‹å¤–</i> ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<i>ç‰‡æ®µè¡¨è¾¾å¼</i>è¯­æ³•ä»æ§åˆ¶å™¨ä¸­å®šä¹‰<i>ç‰‡æ®µ</i> ã€‚ å°±åƒåœ¨<b>thï¼šinsert</b>æˆ–<b>thï¼šreplace</b>å±æ€§ä¸­ä¸€æ ·ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/showContentPart"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showContentPart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"index :: content"</span></span>; }</code> </pre> <br> å½“ç„¶ï¼ŒDOMé€‰æ‹©å™¨çš„å…¨éƒ¨åŠŸèƒ½å†æ¬¡å¯ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åŸºäºæ ‡å‡†HTMLå±æ€§ï¼ˆä¾‹å¦‚<b>id =â€œ contentâ€ï¼‰</b>æ¥é€‰æ‹©ç‰‡æ®µï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/showContentPart"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showContentPart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"index :: #content"</span></span>; }</code> </pre> <br> æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‚æ•°ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/showContentPart"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showContentPart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"index :: #content ('myvalue')"</span></span>; }</code> </pre> <br><h2>  11ç§é«˜çº§é›†æˆåŠŸèƒ½ </h2><br><h3>  11.1ä¸RequestDataValueProcessoré›†æˆ </h3><br>  Thymeleafä¸Spring <b>RequestDataValueProcessor</b>æ¥å£æ— ç¼é›†æˆã€‚ æ­¤æ¥å£ä½¿æ‚¨å¯ä»¥åœ¨å°†é“¾æ¥URLï¼Œè¡¨å•URLå’Œè¡¨å•åŸŸå€¼å†™å…¥æ ‡è®°ç»“æœä¹‹å‰å¯¹å…¶è¿›è¡Œæ‹¦æˆªï¼Œä»¥åŠé€æ˜åœ°æ·»åŠ åŒ…å«å®‰å…¨åŠŸèƒ½çš„éšè—è¡¨å•åŸŸï¼Œä¾‹å¦‚ï¼šé˜²æ­¢CSRFï¼ˆè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼‰ ã€‚ <br><br> å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­è½»æ¾é…ç½®<b>RequestDataValueProcessor</b>çš„å®ç°ã€‚ å®ƒåº”è¯¥å®ç°<b>org.springframework.web.servlet.support.RequestDataValueProcessor</b>æ¥å£ï¼Œå¹¶å°†<b>requestDataValueProcessor</b>ä½œä¸ºbeanåç§°ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> RequestDataValueProcessor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestDataValueProcessor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyRequestDataValueProcessor(); }</code> </pre> <br>  ...ï¼ŒThymeleafå°†æŒ‰ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å®ƒï¼š <br><br><ul><li>  <b>thï¼šhref</b>å’Œ<b>thï¼šsrc</b>åœ¨å‘ˆç°URLä¹‹å‰è°ƒç”¨<b>RequestDataValueProcessor.processUrlï¼ˆ...ï¼‰</b> </li><li>  <b>thï¼šæ“ä½œ</b>åœ¨å‘ˆç°è¡¨å•çš„<b>action</b>å±æ€§ä¹‹å‰è°ƒç”¨<b>RequestDataValueProcessor.processActionï¼ˆ...ï¼‰</b> ï¼Œæ­¤å¤–ï¼Œå®ƒè¿˜ä¼šæ£€æµ‹ä½•æ—¶å°†æ­¤å±æ€§åº”ç”¨äº&lt;form&gt;æ ‡è®°ï¼ˆåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åº”æ˜¯å”¯ä¸€çš„ä½ç½®ï¼‰ï¼Œå¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹è°ƒç”¨<b>RequestDataValueProcessor.getExtraHiddenFieldsï¼ˆ... ï¼‰ï¼Œ</b>å¹¶åœ¨ç»“æŸ&lt;/ form&gt;æ ‡è®°ä¹‹å‰æ·»åŠ è¿”å›çš„éšè—å­—æ®µ </li><li>  <b>thï¼šå€¼</b>è°ƒç”¨<b>RequestDataValueProcessor.processFormFieldValueï¼ˆ...ï¼‰</b>ä»¥ç»˜åˆ¶å…¶å¼•ç”¨çš„å€¼ï¼Œé™¤é<b>thï¼šå­—æ®µ</b>ä½äºåŒä¸€æ ‡è®°ä¸­ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <b>thï¼šå­—æ®µ</b>å°†è´Ÿè´£ï¼‰ </li><li>  <b>thï¼šå­—æ®µ</b>è°ƒç”¨<b>RequestDataValueProcessor.processFormFieldValueï¼ˆ...ï¼‰</b>ä»¥ç»˜åˆ¶å…¶é€‚ç”¨çš„å­—æ®µçš„å€¼ï¼ˆå¦‚æœä¸º&lt;textarea&gt;ï¼Œåˆ™æ ‡è®°çš„ä¸»ä½“ï¼‰ </li></ul><br>  <i>è¯·æ³¨æ„ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾å¼å®ç°<b>RequestDataValueProcessor</b> ã€‚</i>  <i>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨é€æ˜ä½¿ç”¨çš„å®‰å…¨æ€§åº“å°†è‡ªåŠ¨ä½¿ç”¨å®ƒï¼Œä¾‹å¦‚ï¼ŒSpring Securityçš„CSRFã€‚</i> <br><br><h3>  11.1å»ºç«‹åˆ°æ§åˆ¶å™¨çš„URI </h3><br> ä»4.1ç‰ˆå¼€å§‹ï¼Œ <b>Spring</b>æä¾›äº†ç›´æ¥ä»è§†å›¾åˆ›å»ºåˆ°å¸¦æ³¨é‡Šçš„æ§åˆ¶å™¨çš„é“¾æ¥çš„åŠŸèƒ½ï¼Œè€Œæ— éœ€çŸ¥é“è¿™äº›æ§åˆ¶å™¨æ˜ å°„åˆ°çš„URIã€‚ <br><br> åœ¨Thymeleafä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼<b>ï¼ƒmvc.urlï¼ˆ...ï¼‰</b>æ¥å®ç°ï¼Œè¯¥è¡¨è¾¾å¼å…è®¸æ‚¨ä»¥æ§åˆ¶å™¨æ–¹æ³•æ‰€åœ¨çš„æ§åˆ¶å™¨ç±»çš„å¤§å†™å­—æ¯è®¾ç½®æ§åˆ¶å™¨æ–¹æ³•ï¼Œåè·Ÿæ–¹æ³•åç§°ã€‚ è¿™ç­‰æ•ˆäºJSPä¸­çš„è‡ªå®šä¹‰<b>springï¼šmvcUrlxï¼ˆ...ï¼‰</b>å‡½æ•°ã€‚ <br><br> ä¾‹å¦‚ï¼Œç”¨äºï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/data"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Model model)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"template"</span></span> } <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/data"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataParam</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestParam String type)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"template"</span></span> } }</code> </pre> <br> ä»¥ä¸‹ä»£ç å°†åˆ›å»ºæ–¹æ³•å¼•ç”¨ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${(#mvc.url('EC#getData')).build()}"</span></span></span><span class="hljs-tag">&gt;</span></span>Get Data Param<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${(#mvc.url('EC#getDataParam').arg(0,'internal')).build()}"</span></span></span><span class="hljs-tag">&gt;</span></span>Get Data Param<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://docs.spring.io/spring-framework/docs/4.1.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-links-to-controllers-ä»è§‚ç‚¹</a> <br><br><h2>  12 Spring WebFlowé›†æˆ </h2><br>  Thymeleaf + Springé›†æˆè½¯ä»¶åŒ…åŒ…æ‹¬ä¸Spring WebFlowï¼ˆ2.3+ï¼‰çš„é›†æˆã€‚ <br><br>  WebFlowåŒ…å«ä¸€äº›AJAXåŠŸèƒ½ï¼Œç”¨äºåœ¨è§¦å‘æŸäº›äº‹ä»¶ï¼ˆè¿‡æ¸¡ï¼‰æ—¶å‘ˆç°æ˜¾ç¤ºé¡µé¢çš„ç‰‡æ®µï¼Œå¹¶ä¸”Thymeleafèƒ½å¤Ÿè·Ÿè¸ªè¿™äº›AJAXè¯·æ±‚ï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨å¦‚ä¸‹é…ç½®çš„å¦ä¸€ä¸ªViewResolverå®ç°ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thymeleafViewResolver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.thymeleaf.spring4.view.AjaxThymeleafViewResolver"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.thymeleaf.spring4.view.FlowAjaxThymeleafView"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateEngine"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateEngine"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ...ï¼Œç„¶åå¯ä»¥åœ¨<b>WebFlow ViewFactoryCreatorä¸­</b>å°†è¯¥<b>ViewResolver</b>é…ç½®ä¸ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mvcViewFactoryCreator"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.webflow.mvc.builder.MvcViewFactoryCreator"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewResolvers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thymeleafViewResolver"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥åœ¨è§†å›¾çŠ¶æ€ä¸‹å®šä¹‰Thymeleafæ¨¡æ¿ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"detail"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bookingDetail"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view-state</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ <b>bookingDetail</b>æ˜¯ä»¥å¸¸è§„æ–¹å¼æŒ‡å®šçš„Thymeleafæ¨¡æ¿ï¼Œå¯¹äºTemplateEngineä¸­é…ç½®çš„ä»»ä½•æ¨¡æ¿è§£æå™¨éƒ½æ˜¯å¯ä»¥ç†è§£çš„ã€‚ <br><br><h3>  Spring WebFlowä¸­çš„12.2 AJAXä»£ç ç‰‡æ®µ </h3><br>  <i>è¯·æ³¨æ„ï¼Œè¿™ä»…è¯´æ˜äº†å¦‚ä½•åˆ›å»ºç”¨äºSpring WebFlowçš„AJAXç‰‡æ®µã€‚</i>  <i>å¦‚æœæ‚¨ä¸ä½¿ç”¨WebFlowï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªå“åº”AJAXè¯·æ±‚å¹¶è¿”å›HTMLçš„Spring MVCæ§åˆ¶å™¨å°±åƒåˆ›å»ºå…¶ä»–ä»»ä½•è¿”å›æ¨¡æ¿çš„æ§åˆ¶å™¨ä¸€æ ·ç®€å•ï¼Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯æ‚¨å¾ˆå¯èƒ½ä¼šè¿”å›â€œ <b>main</b> â€ä¹‹ç±»çš„ç‰‡æ®µã€‚ <b>:: admin</b> â€ï¼Œä»æ‚¨çš„æ§åˆ¶å™¨æ–¹æ³•å¼€å§‹ã€‚</i> <br><br>  WebFlowå…è®¸æ‚¨ä½¿ç”¨&lt;render&gt;æ ‡ç­¾é€šè¿‡AJAXå®šä¹‰å‘ˆç°ï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"detail"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bookingDetail"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"updateData"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">render</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fragments</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hoteldata"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transition</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view-state</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> è¿™äº›ç‰‡æ®µï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º<b>hoteldata</b> ï¼‰å¯ä»¥æ˜¯ç”¨é€—å·åˆ†éš”çš„ç‰‡æ®µåˆ—è¡¨ï¼Œè¯¥ç‰‡æ®µåœ¨æ ‡è®°ä¸­ä»¥<b>thï¼šfragmentè¡¨ç¤º</b> ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:fragment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hoteldata"</span></span></span><span class="hljs-tag">&gt;</span></span> This is a content to be changed <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å§‹ç»ˆè®°ä½ï¼Œè¿™äº›ä»£ç æ®µå¿…é¡»å…·æœ‰<b>id</b>å±æ€§ï¼Œä»¥ä¾¿æµè§ˆå™¨ä¸­è¿è¡Œçš„Spring JavaScriptåº“å¯ä»¥æ›¿æ¢æ ‡è®°ã€‚ <br><br> æ‚¨è¿˜å¯ä»¥ä½¿ç”¨DOMé€‰æ‹©å™¨æŒ‡å®š&lt;render&gt;æ ‡è®°ï¼š <br><br>  &lt;view-state id =â€œ detailâ€ view =â€œ bookingDetailâ€&gt; <br>  /&gt; <br><br>  &lt;/ view-state&gt; <br><br>  ...è¿™æ„å‘³ç€ä¸éœ€è¦ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span><span class="hljs-tag">&gt;</span></span> This is a content to be changed <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> è‡³äºè§¦å‘<b>updateData</b>è½¬æ¢çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@{/resources/dojo/dojo.js}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@{/resources/spring/Spring.js}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">th:src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@{/resources/spring/Spring-Dojo.js}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"triggerform"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"doUpdate"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_eventId_updateData"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Update now!"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> Spring.addDecoration( </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> Spring.AjaxEventDecoration({formId:</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'triggerform'</span></span></span><span class="actionscript">,elementId:</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'doUpdate'</span></span></span><span class="actionscript">,event:</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'onclick'</span></span></span><span class="actionscript">})); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN437658/">https://habr.com/ru/post/zh-CN437658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN437646/index.html">3Dæ‰“å°æœºçš„æœ‰ç”¨å’Œéæ˜¾è€Œæ˜“è§çš„äº‹ç‰©ï¼š3Dæ‰“å°æœºçš„å°äº‹ç‰©</a></li>
<li><a href="../zh-CN437650/index.html">2æœˆ23æ—¥é€ç»™æå®¢å’Œçƒ­æƒ…äººå£«çš„æœ€ä½³ç¤¼ç‰©</a></li>
<li><a href="../zh-CN437652/index.html">å®£å¸ƒTypeScript 3.3 RC</a></li>
<li><a href="../zh-CN437654/index.html">å»‰ä»·ä¸”è´Ÿæ‹…å¾—èµ·çš„å…‰æ•èšåˆç‰©3Dæ‰“å°æœº</a></li>
<li><a href="../zh-CN437656/index.html">ä¸€å®¶ç“·å™¨åº—é‡Œçš„å¤§è±¡ï¼šå…·æœ‰å¹¿é˜”æ‰“å°é¢†åŸŸçš„3Dæ‰“å°æœº</a></li>
<li><a href="../zh-CN437660/index.html">Visual Studio 2019é¢„è§ˆç‰ˆ2ä¸­çš„ç»ˆèº«é…ç½®æ–‡ä»¶æ›´æ–°</a></li>
<li><a href="../zh-CN437664/index.html">å¤åˆå›æ”¶</a></li>
<li><a href="../zh-CN437666/index.html">å®£å¸ƒFï¼ƒ4.6é¢„è§ˆç‰ˆ</a></li>
<li><a href="../zh-CN437670/index.html">Visual Studio 2019é¢„è§ˆç‰ˆ2ä¸­çš„MSVCåç«¯æ›´æ–°ï¼šæ–°çš„ä¼˜åŒ–ï¼ŒOpenMPå’Œæ„å»ºååé‡æ”¹è¿›</a></li>
<li><a href="../zh-CN437672/index.html">cyberdï¼šä»web3è®¡ç®—çŸ¥è¯†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>