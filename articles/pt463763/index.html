<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏻 🏖️ 👨🏽‍🚀 Simplifique a migração do OpenShift 3 para o OpenShift 4 📸 👍🏽 👩🏽‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Assim, ocorreu o lançamento oficial da plataforma RedSh OpenShift 4. Hoje, mostraremos como mudar para ela com a Plataforma OpenShift Container 3, o m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Simplifique a migração do OpenShift 3 para o OpenShift 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/463763/">  Assim, ocorreu o lançamento oficial da plataforma RedSh OpenShift 4. Hoje, mostraremos como mudar para ela com a Plataforma OpenShift Container 3, o mais rápido e simples possível. <br><br><img src="https://habrastorage.org/webt/lg/gb/ho/lggbhohesmckpub0hxttmx20jnw.png" width="100%"><br><br>  Na estrutura deste artigo, estamos interessados ​​principalmente nos novos clusters do OpenShift 4 que usam os recursos de uma infraestrutura inteligente e imutável (imutável - a mesma para todos os ambientes de implantação) com base no RHEL CoreOS e nas ferramentas de automação.  Abaixo, mostramos como atualizar para o OpenShift 4 sem muitos problemas. <br><a name="habracut"></a><br>  Saiba mais sobre as diferenças entre a nova versão e a antiga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">aqui</a> . <br><br><h3>  Migração de cluster do OpenShift 3 para o OpenShift 4 usando a plataforma certificada Red Hat Appranix </h3><br>  A Appranix e a Red Hat trabalharam arduamente para otimizar a migração de recursos de cluster do OpenShift 3 para o OpenShift 4 usando um serviço especial executado em cima da Appranix Site Reliability Automation for Kubernetes. <br><br>  A solução Appranix (encontrada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Catálogo de contêineres</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Red Hat</a> ) permite criar backups de todos os clusters do OpenShift 3 e restaurá-los para o OpenShift 4 em apenas alguns cliques. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9i/5h/tb/9i5htboul925qibybvlr34nnlhe.png"></div><br><br><h3>  Por que a migração usando o Appranix for OpenShift 4 é boa </h3><br><ul><li>  Início rápido.  Como a solução Appranix é construída com base nos princípios SaaS, não há necessidade de configurar nenhuma infraestrutura e configurar ou usar soluções especializadas separadas para migração. </li><li>  A escalabilidade do Appranix facilita a migração de grandes clusters. </li><li>  O backup automático de configurações complexas de cluster do OpenShift 3 com subsequente transferência para o OpenShift 4 simplifica o próprio processo de migração. </li><li>  A capacidade de testar como os aplicativos da infraestrutura corporativa do OpenShift 3 se comportam na plataforma OpenShift 4 na nuvem da AWS. </li><li>  Migração das configurações de acesso do RBAC junto com os recursos do cluster. </li><li>  Migração seletiva ou completa de todos os projetos para novos clusters do OpenShift 4. </li><li> Opcionalmente - a organização de vários níveis de tolerância a falhas para aplicativos de contêiner com a assinatura apropriada. </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p8/4u/gu/p84ugursz5hvgd2tdjgxy2oqdiu.png"></div><br><br><h3>  Resiliência para aplicativos OpenShift </h3><br>  Após migrar da 3ª para a 4ª versão do OpenShift, o Appranix pode ser usado para fornecer resiliência contínua ao aplicativo, na qual existem três opções.  A resiliência de nível 1 permite restaurar aplicativos sem alterar a região e o provedor de nuvem.  Ele pode ser usado para reverter aplicativos ou recuperar após uma falha local no nível regional, por exemplo, no caso de uma implantação malsucedida de aplicativos ou em uma situação em que você precise criar rapidamente um ambiente de teste na mesma região, mas em um cluster OpenShift separado. <br><br>  <b>O nível 2</b> permite transferir aplicativos para outra região sem alterar o provedor.  Ao mesmo tempo, você pode salvar a infraestrutura de dados primária na região principal, mas executar aplicativos em outro cluster em uma região diferente.  Essa opção é útil quando uma região ou zona da nuvem falha ou você precisa transferir aplicativos para outra região devido a um ataque cibernético.  E, finalmente, o <b>Nível 3</b> permite alterar não apenas a região, mas também o provedor de nuvem. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l0/xq/r6/l0xqr6hmm_nvlme83-d3b6ft2_m.png"></div><br><br>  <b>Como o Appranix SRA funciona</b> <br>  A tolerância a falhas em vários níveis dos aplicativos OpenShift no Appranix é alcançada através da funcionalidade da “máquina do tempo”, que cria automaticamente cópias do ambiente do aplicativo.  Para usar essa funcionalidade e aumentar a segurança do aplicativo, basta adicionar uma linha de código ao pipeline do DevOps. <br>  Os serviços de infraestrutura dos provedores de nuvem também têm problemas, portanto, a capacidade de alternar rapidamente para outro provedor é útil para evitar a dependência de um único provedor de serviços. <br><br>  <b>Conforme mostrado na figura abaixo</b> , os backups do ambiente de aplicativo podem ser criados no Appranix não apenas automaticamente em intervalos especificados, mas também por comando do pipeline de integração contínua e entrega de CI / CD.  Além disso, a "máquina do tempo" fornece: <br><br><ul><li>  Registro incremental semelhante ao GitHub de espaços para nome e ambientes de aplicativos. </li><li>  Reversão de aplicativo simples. </li><li>  Controle de versão das configurações de nuvem e contêiner. </li><li>  Gerenciamento automatizado do ciclo de vida dos dados. </li><li>  Automação do gerenciamento de infraestrutura como código (IaC). </li><li>  Gerenciamento automatizado do estado de IaC. </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xd/7h/g3/xd7hg3diolurvskvlbmee9yvpry.png"></div><br><br>  Com o Appranix, você pode organizar a proteção e a recuperação no nível do aplicativo para cenários inteiros, como engenharia do caos, recuperação de desastres, proteção contra extorsão e continuidade dos negócios.  Não vamos nos aprofundar nisso em detalhes e considerar mais como usar o Appranix para migrar do OpenShift 3 para o OpenShift 4. <br><br><h3>  Como migrar o OpenShift 3 para o OpenShift 4 usando a plataforma de confiabilidade do site Appranix </h3><br>  O processo inclui três etapas: <br><br><ol><li>  Configuramos o OpenShift 3 e o OpenShift 4 para detectar automaticamente todos os componentes a serem migrados. </li><li>  Crie políticas e defina namespaces para migração. </li><li>  Restaure todos os namespaces no OpenShift 4 em um clique. </li></ol><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/zu/zn/wkzuzn5osjn_azedy8xs4l52jcg.png"></div><br><br><h3>  Configurar os clusters do OpenShift 3 e 4 para a descoberta automática </h3><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dw/qm/pr/dwqmprsrwpxji6d_-czjhw481hk.png"></div><br><br>  O Appranix acredita que você já possui os clusters OpenShift 3 e OpenShift 4. Se você ainda não possui clusters OpenShift 4, crie-os usando a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">documentação</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Red Hat na implantação do OpenShift 4</a> .  A configuração dos clusters primário (primário) e de destino (destino) no Appranix é a mesma e envolve apenas algumas etapas. <br><br><h3>  Instale o Appranix Controller Agent para detecção de cluster </h3><br>  Para detectar recursos do cluster, você precisa de um pequeno agente de controlador lateral.  Para implantá-lo, basta copiar e colar o comando curl apropriado, <b>como mostrado abaixo</b> .  Após a instalação do agente no OpenShift 3 e OpenShift 4, o Appranix detectará automaticamente todos os recursos de cluster a serem migrados, incluindo namespaces, implantações, pods, serviços e hosts com outros recursos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sa/1r/mo/sa1rmoun3xmjxed0m9bwvu4_9aw.png"></div><br><br>  Migrando grandes aplicativos distribuídos <br>  Agora, veremos um exemplo de como transferir o aplicativo de microsserviço distribuído do SockShop do OpenShift 3 para o OpenShift 4 sem esforços desnecessários (clique aqui para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">obter</a> uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">descrição detalhada desse aplicativo e de sua arquitetura de microsserviço</a> ).  Como você pode ver na <b>figura abaixo</b> , a arquitetura do SockShop contém muitos componentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5r/yl/tw/5ryltwxb4gxbngdfv-xuyzw3yrg.png"></div><br><br>  O Appranix descobre todos os recursos para os quais é necessário fornecer proteção e migração para o OpenShift 4, incluindo PoDs, implantações, serviços e configurações de cluster. <br><br><h3>  OpenShift 3 com um aplicativo SockShop em execução </h3><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wm/0s/co/wm0sco2xwpbka7gywsnuxsiy0yc.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cu/j4/nv/cuj4nvhk6pv-o-wldjcntibyqco.png"></div><br><br><h3>  Criar políticas de proteção para migração </h3><br>  As políticas podem ser definidas de maneira flexível, dependendo de como a migração deve ser conduzida.  Por exemplo, com base em vários critérios ou backup uma vez por hora. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/uy/vx/qcuyvxfrnonakkuq8adjwvuel8m.png"></div><br><br><h3>  Migrar vários clusters do OpenShift 3 usando Planos de Proteção </h3><br>  Dependendo dos recursos do aplicativo ou espaço para nome, as políticas podem ser aplicadas aos clusters do OpenShift 3 que são processados ​​uma vez por hora, uma vez por semana ou mesmo uma vez por mês. <br><br>  O Appranix permite migrar todos os namespaces de cluster para o OpenShift 4, ou apenas os espaços selecionados. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fl/up/ky/flupkycoryo8ss89whw9vc4ikt8.png"></div><br><br><h3>  Migrar para o OpenShift 4 em um clique </h3><br>  Migração é a restauração de espaços de nomes selecionados no cluster de destino do OpenShift 4. Esta operação é realizada com um clique.  O próprio Appranix faz todo o trabalho de coletar dados sobre a configuração e os recursos do ambiente de origem e, em seguida, restaura-os independentemente na plataforma OpenShift 4. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/27/w6/ia27w6jpd-bviftdl2q7bxlotbs.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o0/_p/wb/o0_pwbi4bwbmllelf8brs6qodqu.png"></div><br><br><h3>  Verificando aplicativos após a migração para o OpenShift 4 </h3><br>  Efetue login no cluster do OpenShift 4, atualize projetos e verifique se todos os aplicativos e espaços para nome estão em ordem.  Repita o procedimento de migração para outros namespaces, criando novos planos de proteção ou alterando os existentes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/t3/7l/btt37li4qhn9vuml6hm_7brshc8.png"></div><br><br><h3>  Iniciar aplicativos migrados no OpenShift 4 </h3><br>  Após migrar aplicativos usando o procedimento de recuperação do Appranix, é importante não esquecer de configurar as rotas - eles devem indicar o OpenShift 4. É possível que, antes de transferir a produção completamente do OpenShift 3, você deseje realizar uma recuperação de teste.  Quando vários aplicativos em execução aparecem no OpenShift 4 em seus respectivos namespaces, torna-se necessário migrar outros aplicativos usando esse processo. <br><br>  Após a migração de todos os namespaces, você pode proteger todos os clusters do OpenShift para recuperação contínua de desastres, proteção contra extorsão, garantia de continuidade dos negócios ou migração subsequente, pois o Appranix Site Reliability Automation é atualizado automaticamente à medida que novas versões do OpenShift são lançadas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w1/cj/js/w1cjjsbaz7zet7vsodrawjy1vrg.png"></div><br><br><h3>  Total </h3><br>  O OpenShift 4 é um grande passo à frente, principalmente devido à nova arquitetura inalterada e ao modelo de plataforma do operador para automatizar configurações complexas de aplicativos e plataformas que operam em ambientes de cluster.  O Appranix oferece aos usuários do OpenShift uma maneira simples e conveniente de atualizar para o OpenShift 4 com sua solução de recuperação de desastre baseada na nuvem, Site Reliability Platform. <br><br>  <b>O Appranix pode ser usado diretamente no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Catálogo de Contêineres</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Red Hat</a> .</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463763/">https://habr.com/ru/post/pt463763/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463751/index.html">iOS 13: o que você precisa e o que absolutamente não precisa fazer ao desenvolver um novo sistema operacional</a></li>
<li><a href="../pt463753/index.html">PVS-Studio visita Apache Hive</a></li>
<li><a href="../pt463755/index.html">A diferença entre "junho", "médio" e "sênior". E o que fazer para subir um nível</a></li>
<li><a href="../pt463759/index.html">PVS-Studio visitando o Apache Hive</a></li>
<li><a href="../pt463761/index.html">Estrutura de microsserviço PHP - Swoft</a></li>
<li><a href="../pt463765/index.html">Slurm DevOps: por que não discutiremos a filosofia do DevOps e o que acontecerá</a></li>
<li><a href="../pt463769/index.html">Mitap Netologii “Carreira em ciência de dados: do iniciante ao médio”</a></li>
<li><a href="../pt463771/index.html">[Peter] Encontrando JUG.ru com Sebastian Dashner - Torne mais alegre a realização de testes corporativos</a></li>
<li><a href="../pt463773/index.html">Como é organizada a proteção das crianças contra as informações - e a história encantadora sobre de onde elas vieram (18+)</a></li>
<li><a href="../pt463775/index.html">Quem usa o protocolo de autenticação SAML 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>