<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎇 ⚪️ 🙇🏽 3D粒子寿命 🔸 🔤 👩🏻‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="嗨！ 我决定与读者分享我在三维空间中粒子系统的小型实验。 我以Habré上有关2D空间中粒子实验的出版物为基础。 





 让我们从指向促使我采取行动的文章的链接开始。 但是还有另一个原因，自从最近我在实验中越来越多地转移到Ubuntu以来，自从免费安装OS以来，很多事情都变得不错了。 有一些缺...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>3D粒子寿命</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454430/"><p> 嗨！ 我决定与读者分享我在三维空间中粒子系统的小型实验。 我以Habré上有关2D空间中粒子实验的出版物为基础。 </p><br><p><img src="https://habrastorage.org/webt/zh/b_/nk/zhb_nkxul24vyztnd7cdg8snpss.gif"></p><a name="habracut"></a><br><p> 让我们从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">指向</a>促使我采取行动的文章的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">链接</a>开始。 但是还有另一个原因，自从最近我在实验中越来越多地转移到Ubuntu以来，自从免费安装OS以来，很多事情都变得不错了。 有一些缺点，我为非标准操作系统安装的驱动程序而苦恼，例如两个视频卡和多个监视器。 </p><br><p> 我以C ++为基础，增加了对CUDA作为计算平台的支持，其中有很多粒子，中央处理器显然无法实时应对此类负载，而<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Ogre3D</a>图形引擎则在公司中提供。 他们制作了粥，我将在2D版本的模拟中使用动画和引述来对Gif叙述进行调味。 </p><br><p>  “首先，我跟随“生命”游戏的脚步：每个粒子都有一个“人口过剩”计数器，该计数器等于到其他粒子的距离的平方的平方和。如果此计数器小于某个极限，即邻居很少，则该粒子被其他粒子吸引，并且如果有很多邻居，它会排斥，如果粒子相交，则它们在任何情况下都会排斥，以免彼此穿过。 </p><br><p> 我们将粒子随机散布在磁场周围，看看会发生什么。” </p><br><p><img src="https://habrastorage.org/webt/g-/q0/vy/g-q0vygmvnjfjbcsc0j3umxlyym.gif"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">进阶影片</a> <br> 现在介绍一下程序中发生的逻辑。 创建具有特定参数的粒子数组。 一些参数负责物理属性：半径，质量，速度等，用于在粒子之间创建键的部分，例如：粒子的类型，与其他粒子的粒子连接数等。 在仿真中，平均而言，我要使用700到3000个粒子，因为我想实时计数，因此，由于计算量增加，较大的值导致图像无法显示。 然后，所有这些东西都转移到视频卡的内存中，在GPU的强并行化模式下，GPU处理三个主要子程序：粒子运动的模拟，粒子碰撞（碰撞）的处理以及粒子之间键的形成和破坏。 </p><br><p>  “我们正在改变游戏规则。我们将不再计算邻居。让粒子根据其类型简单地吸引或排斥。如果所有粒子属于同一类型，则只有两种选择：它们全部排斥或全部吸引。” </p><br><p> 我尝试了几种选择，分别用于吸引力排斥力，与粒子之间距离的线性相关性，与距离成反比等。 取决于二次方的逆相关性，但对作用半径有限制，例如45粒子半径。 </p><br><p><img src="https://habrastorage.org/webt/ht/6o/bf/ht6obffhxom4jfaguqnx2kp1tuo.gif"></p><br><p>  “我们不会改变太多规则。相反，我们将添加一个新功能。现在粒子将在很短的距离内形成键。如果粒子相互连接，它们将不断相互吸引。这种吸引力不会随着距离的增加而减弱。但是，如果距离超过某个阈值，则连接断开。” </p><br><p> 在这里，规则发生了一点变化，引入了键形成的距离，它是键破坏的距离和键中粒子的静止距离，也就是说，粒子不断地试图占据静止位置附近的位置，因此，在离散时间，粒子在零位置附近振荡。 这在所有视频上都可见。 在形成诸如弹性之类的键时，可以应用更复杂的定律，但是现在我已经对其进行了简化，但是我们有“主要汤”而不是固体。 </p><br><p><img src="https://habrastorage.org/webt/wy/q1/go/wyq1gohfiedu4tcioy4pie5do68.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">进阶影片</a> </p><br><p> 或作为图片 </p><br><p><img src="https://habrastorage.org/webt/-e/3n/mf/-e3nmf1pxpvg3scspkxdvakax70.png"></p><br><p> 然后，反复试验过程开始。 首先，在GPU上进行编程需要格外小心，即所谓的“共享数据的读-修改-写竞赛”，这意味着当多个线程同时尝试更改变量时可能会出现问题。 不稳定的产生如下： </p><br><p><img src="https://habrastorage.org/webt/3x/sq/-v/3xsq-vepy_ejq_zunzmomdptzji.gif"></p><br><p> 然后有必要限制进行实验的空间区域，首先想到的是一个立方体。 但是由于该程序第一版的错误，粒子大胆地爬出了它，形成了类似于70年代小说中的空间站的东西。 </p><br><p><img src="https://habrastorage.org/webt/r6/3m/dp/r63mdpkzq2rwvaieczouhm1bn7w.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频的扩展版</a> </p><br><p> 俗话说，如果不是立方体，那就放一个球： </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ypqrbYji0EM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 这里的逻辑是，在离开粒子中心之后，力开始与粒子的运动相反，甚至看起来像重力。 </p><br><pre><code class="cpp hljs">__device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Links[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinksField[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinkTypeSize[<span class="hljs-number"><span class="hljs-number">3</span></span>] = {<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinkTypePP[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}};</code> </pre> <br><p> 他按原样带来了一段代码，它们是三种类型的粒子彼此相互作用的矩阵。 <br>  -第一行是键形成的原理：1有机会与另一个粒子建立连接，0则没有。 <br>  -第二行是粒子排斥的吸引力定律。 实际上，在该实施例中，除了第二种类型的粒子对第三种的吸引之外，所有的彼此排斥。 您当然可以镜像矩阵，但是在这种情况下。 <br> 第三行是按类型划分的常见粒子键的数量。 <br>  -第四是与每种类型的粒子的粒子键数量，例如，第一类型不能与自身形成键。 </p><br><p> 我们以强布朗运动得到粒子： </p><br><p><img src="https://habrastorage.org/webt/j_/iy/vd/j_iyvdxbsntezeqol8l7ivt9r00.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频的扩展版</a> </p><br><p> 我不得不在碰撞中引入能量损失。 </p><br><p><img src="https://habrastorage.org/webt/bg/q-/hf/bgq-hfkwa32xdpwpc1-atcehfci.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频的扩展版</a> </p><br><p> 一切都变得太静态了，我们减小了粒子相互作用的力。 </p><br><p><img src="https://habrastorage.org/webt/uf/uw/dj/ufuwdjlrskkimt5gn_buvzr-iru.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频的扩展版</a> </p><br><p> 如果您观看视频，则可以看到框架的构建方式。 然后它仍然保持静态。 </p><br><p> 我们更改有关矩阵系数的规则。 </p><br><p><img src="https://habrastorage.org/webt/kg/tb/hh/kgtbhhsuv3sdfzlmyz5nrpm3aje.gif"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">视频的扩展版</a> <br> 我们看到了有机分子相似的形成。 甚至有苯环。 </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/NYph8fnI8PM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 另一个视频演示了如果您更改动力学中粒子之间的键的长度会发生什么，从视频的第二分钟开始，这一点特别明显。 </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lQ47AbIBMdU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 但是，我们必须尝试重复2D作者的版本，其引用在本文的正文中。 这种“生活”有一个变体： </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jrNFiYIp8i0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 或这样 </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2IHz97Kv5-o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 可以添加什么？ 首先，该<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">程序的来源</a> 。 其次，在中心上有几篇文章描述了细胞自动机或自由系统（理论上，细胞自动机相当于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">图灵机</a> ），其标题包含“生命”一词，因此，我决定也使用它，有点像传统。 尽管它只是一个万花筒，但简单的规则却会引起复杂的行为，例如儿童玩具中的颗粒和镜子系统。 </p><br><p> 视频中还添加了一个令人着迷的图片，它看起来像是分子，然后是神经网络，但生命还不存在。 作为一种发展选择，需要添加遗传学，但是尚不清楚这些“生物”的适应度函数是什么。 </p><br><p><img src="https://habrastorage.org/webt/9i/mt/d8/9imtd8is7h9hiq0ehvziunrympu.png"></p><br><p> 我希望有人会喜欢它，并且随着作者从2D过渡到3D，它将进一步远离3D。 对我自己而言，最主要的是重复在Ubuntu下使用CUDA和Ogre3D的课程。 </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vBcIUxPkhtA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> 会有想法写出来，也许我们会提出一些有趣的东西：） </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN454430/">https://habr.com/ru/post/zh-CN454430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN454420/index.html">备份，第3部分：概述和测试重复性，重复</a></li>
<li><a href="../zh-CN454422/index.html">关于牛顿第一定律在现代物理学中的曲解</a></li>
<li><a href="../zh-CN454424/index.html">使用Android建筑组件时的5个常见错误</a></li>
<li><a href="../zh-CN454426/index.html">人工智能：人工智能的曙光</a></li>
<li><a href="../zh-CN454428/index.html">苹果在WWDC上介绍了什么以及iOS开发人员对此有何看法</a></li>
<li><a href="../zh-CN454432/index.html">有趣的考古学：放大镜下的样式指南R</a></li>
<li><a href="../zh-CN454434/index.html">PDA（便携式旅行计算机）：电路GPS记录器</a></li>
<li><a href="../zh-CN454436/index.html">小资小资喜悦＃1：loguru</a></li>
<li><a href="../zh-CN454440/index.html">小趣味小游戏＃2：Starlette</a></li>
<li><a href="../zh-CN454442/index.html">如何为您的企业选择代理网络：3个实用技巧</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>