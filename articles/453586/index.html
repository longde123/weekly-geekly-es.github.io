<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèª ü•© üìû IntersectionObserver API y carga diferida de im√°genes ‚úåÔ∏è üê¨ ‚öíÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Usar la carga de im√°genes diferidas para mejorar el rendimiento de los proyectos web es una t√©cnica de optimizaci√≥n popular. La cuesti√≥n es que las im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IntersectionObserver API y carga diferida de im√°genes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/453586/">  Usar la carga de im√°genes diferidas para mejorar el rendimiento de los proyectos web es una t√©cnica de optimizaci√≥n popular.  La cuesti√≥n es que las im√°genes son recursos "pesados" que est√°n llenos de sitios web modernos.  Ya hemos publicado algo sobre esto.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠</a> puede leer acerca de lo que la carga diferida le dio al sitio web de Walmart y aprender a usar IntersectionObserver en los proyectos React.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠ hay</a> un art√≠culo sobre la optimizaci√≥n de sitios est√°ticos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠ hay</a> material reciente sobre la implementaci√≥n de la carga diferida utilizando las herramientas del navegador. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ao/_d/7t/ao_d7twyxzavzolz2ascrhfk1g4.png"></a> <br><br>  Hoy traemos a su atenci√≥n una traducci√≥n de un art√≠culo en el que se describe el uso de la API IntersectionObserver utilizando una p√°gina web simple como ejemplo.  Este material est√° destinado a programadores principiantes. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">¬øQu√© es la carga lenta de im√°genes?</font> </h2><br>  Al analizar el rendimiento de la aplicaci√≥n, dos indicadores se destacan: el tiempo hasta la primera interactividad (Tiempo para interactuar) y el consumo de recursos (Consumo de recursos).  Inevitablemente tendr√°n que enfrentarse a quienes se dedican al desarrollo web.  Adem√°s, pueden surgir problemas con las aplicaciones no solo porque tardan mucho tiempo en prepararse para el trabajo o porque consumen demasiados recursos.  Pero, en cualquier caso, es muy importante encontrar las fuentes de estos problemas lo antes posible y esforzarse por garantizar que los problemas ni siquiera surjan. <br><br>  El uso de tecnolog√≠as de carga de im√°genes diferidas en aplicaciones web minimiza el riesgo de problemas de rendimiento.  Es decir, si analizamos la carga diferida desde el punto de vista de su influencia en el momento de poner la p√°gina en condiciones de trabajo y el consumo de recursos, obtenemos lo siguiente: <br><br><ol><li>  Tiempo para la primera interactividad.  Este es el momento en que la aplicaci√≥n web necesita cargarse y llevar la interfaz a un estado adecuado para que el usuario pueda trabajar con ella.  La carga diferida (adem√°s, estamos hablando no solo de im√°genes) optimiza el tiempo de respuesta de las aplicaciones gracias a la tecnolog√≠a de separar el c√≥digo y cargar solo lo que se necesita para una p√°gina en particular, o lo que se necesita en un momento espec√≠fico en el tiempo. </li><li>  Consumo de recursos.  Los humanos son seres impacientes.  Si un sitio web necesita m√°s de 3 segundos para cargarse, el 70% de los usuarios abandonan ese sitio.  Las aplicaciones web no deber√≠an cargar tanto tiempo.  La carga diferida le permite reducir la cantidad de recursos necesarios para operar las p√°ginas.  Esto, por ejemplo, puede significar que el c√≥digo de un determinado proyecto se divide en fragmentos que se cargan solo en las p√°ginas que los necesitan.  Como resultado, el rendimiento del sitio aumenta y el consumo de recursos del sistema disminuye. </li></ol><br>  Por lo tanto, las tecnolog√≠as de carga lenta aceleran las aplicaciones, reduciendo el tiempo que se descargan y abren.  Esto se logra debido al hecho de que los recursos se cargan solo cuando se necesitan. <br><br>  Aqu√≠ hay un par de ventajas que la carga diferida brinda a los proyectos web: <br><br><ul><li>  Las p√°ginas se cargan m√°s r√°pido y se ponen en funcionamiento. </li><li>  En la carga inicial de p√°ginas, debe transferir y procesar menos datos. </li></ul><br>
<h2>  <font color="#3AC1EF">Im√°genes de carga diferida utilizando IntersectionObserver API</font> </h2><br>  Si piensa en c√≥mo se cargan las p√°ginas web, queda claro que no tiene sentido descargar im√°genes u otros recursos que no son visibles para el usuario.  Cuando se usa carga diferida, las im√°genes que est√°n en el √°rea visible de la p√°gina se cargan primero.  Luego, a medida que el usuario se desplaza por la p√°gina, se cargan otras im√°genes que caen en el √°rea visible de la p√°gina. <br><br>  Considera un ejemplo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b9/e36/782/7b9e367828e6af1dfd070461196dc7c1.png"></div><br>  <i><font color="#999999">P√°gina y su √°rea visible</font></i> <br><br>  Echa un vistazo a la figura anterior.  Aqu√≠ puede ver el navegador y la p√°gina web cargados en √©l.  Las im√°genes <code>#IMG_1</code> y <code>#IMG_2</code> est√°n en el alcance de la p√°gina.  Esto significa que son visibles para el usuario y est√°n dentro de los l√≠mites del √°rea de la ventana del navegador que se muestra en la pantalla. <br><br>  Este orden de trabajo con la p√°gina no puede considerarse ideal cuando, cuando se carga, las im√°genes <code>#IMG_1</code> , <code>#IMG_2</code> , <code>#IMG_3</code> y <code>#IMG_4</code> .  Solo <code>#IMG_1</code> y <code>#IMG_2</code> son visibles para el <code>#IMG_2</code> , y <code>#IMG_3</code> y <code>#IMG_4</code> est√°n ocultos para √©l.  Si carga la primera y la segunda imagen mientras carga la p√°gina, pero no descarga la tercera y cuarta imagen, esto podr√≠a tener un impacto positivo en el rendimiento del sitio.  A saber, estamos hablando de lo siguiente.  Cuando el usuario desplaza la p√°gina para que la tercera imagen sea visible, se carga.  Si el desplazamiento contin√∫a y la cuarta imagen se hace visible, tambi√©n se carga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/783/85b/173/78385b17309c48150e2ce83554e7b857.png"></div><br>  <i><font color="#999999">Desplazarse por una p√°gina y cargar im√°genes</font></i> <br><br>  Ahora que hemos descubierto exactamente c√≥mo queremos trabajar con las im√°genes, nos preguntamos c√≥mo descubrir que cierto elemento de una p√°gina cae en su √°rea visible.  Los navegadores modernos tienen una API que le permite al programador saber cu√°ndo un √°rea determinada de la p√°gina se hace visible.  Se trata de la API IntersectionObserver.  Permite, mediante mecanismos asincr√≥nicos, organizar el monitoreo de elementos y recibir notificaciones en los casos en que un elemento cruza el alcance del documento o cruza el borde de otro elemento. <br><br>  Para configurar la carga diferida de im√°genes, primero debemos preparar un c√≥digo de plantilla para el elemento que se utilizar√° para describir las im√°genes.  Aqu√≠ esta: <br><br><pre> <code class="javascript hljs">&lt;img <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span> src=<span class="hljs-string"><span class="hljs-string">"lazy_img.jpg"</span></span> data-src=<span class="hljs-string"><span class="hljs-string">"real_img.jpg"</span></span> /&gt;</code> </pre> <br>  La clase le permite identificar un elemento como una imagen a la que se aplicar√° la carga diferida.  El atributo <code>src</code> permite mostrar una imagen de marcador de posici√≥n antes de mostrar la imagen real.  <code>data-src</code> almacena la direcci√≥n de la imagen real, que se cargar√° cuando el elemento ingrese al √°rea visible de la p√°gina. <br><br>  Ahora escribamos el c√≥digo que implementa la carga diferida.  Como ya se mencion√≥, utilizaremos la API IntersectionObserver para detectar el momento en que la imagen ingresa al √°rea de visualizaci√≥n de la p√°gina. <br><br>  Primero, cree una instancia de <code>IntersectionObserver</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(...);</code> </pre> <br>  El constructor <code>IntersectionObserver</code> acepta una funci√≥n con dos par√°metros.  Uno de ellos almacena una matriz que consta de elementos que necesitan ser monitoreados, el otro una instancia de <code>IntersectionObserver</code> .  Se ve as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">//...   }) });</span></span></code> </pre> <br>  El c√≥digo de funci√≥n verifica si las im√°genes representadas por las <code>entries</code> matriz de <code>entries</code> cruzan con la ventana gr√°fica.  Si este es el caso, entonces el atributo <code>src</code> de la imagen correspondiente registra lo que estaba en su atributo <code>data-src</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(entry.isIntersecting) {           <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target           lazyImage.src = lazyImage.dataset.src       }   }) });</code> </pre> <br>  Aqu√≠ verificamos, usando la condici√≥n <code>if(entry.isIntersecting) {...}</code> , si el elemento cruza el √°rea de visualizaci√≥n del navegador.  Si es as√≠, guardamos el elemento <code>img</code> en la constante <code>lazyImage</code> .  Luego escribimos en su atributo <code>src</code> lo que estaba en su atributo <code>data-src</code> .  Gracias a esto, la imagen cuya direcci√≥n se almacena en <code>data-src</code> se carga y se muestra.  En el navegador, parece reemplazar la imagen del marcador de posici√≥n, <code>lazy_img.jpg</code> , con una imagen real. <br><br>  Ahora necesitamos usar el m√©todo <code>.observe()</code> de nuestra instancia <code>IntersectionObserver</code> para comenzar a monitorear los elementos que nos interesan: <br><br><pre> <code class="javascript hljs">imageObserver.observe(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>));</code> </pre> <br>  Aqu√≠ seleccionamos todos los elementos <code>img</code> con la clase <code>lzy_img</code> <code>document.querySelectorAll('img.lzy_img')</code> con el comando <code>document.querySelectorAll('img.lzy_img')</code> y los pasamos al m√©todo <code>.observe()</code> .  Habiendo recibido una lista de elementos, comienza el proceso de observarlos. <br><br>  Para probar este ejemplo, comenzamos inicializando el proyecto Node.js: <br><br><pre> <code class="javascript hljs">mkdir lzy_img cd lzy_img npm init -y</code> </pre> <br>  Ahora cree el archivo <code>lzy_img</code> en la carpeta <code>lzy_img</code> : <br><br><pre> <code class="html hljs xml">touch index.html</code> </pre> <br>  Agregue el siguiente c√≥digo: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Puede notar que aqu√≠ se describen 5 im√°genes, en las que se muestra el marcador de posici√≥n <code>lazy_img.jpg</code> al cargar.  El atributo <code>data-src</code> de cada uno de ellos contiene informaci√≥n sobre im√°genes reales.  Aqu√≠ hay una lista de nombres de im√°genes utilizados en el proyecto: <br><br><pre> <code class="plaintext hljs">lazy_img.jpg img_1.jpg img_2.jpg img_3.jpg img_4.jpg img_5.jpg</code> </pre> <br>  Debe crear todas estas im√°genes usted mismo llevando la carpeta del proyecto a la vista que se muestra en la siguiente figura. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb4/44e/3cb/bb444e3cbd0ad4e432901dba7a3b2710.png"></div><br>  <i><font color="#999999">Carpeta de proyectos</font></i> <br><br>  En mi caso, el archivo <code>lazy_img.jpg</code> prepar√≥ con Windows Paint y las im√°genes reales ( <code>img_*.jpg</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jpg</a> ) se tomaron de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pixabay.com</a> . <br><br>  Tenga en cuenta que la devoluci√≥n de llamada utilizada para crear la instancia de <code>IntersectionObserver</code> tiene una llamada <code>console.log()</code> .  Esto nos permitir√° aprender sobre c√≥mo realizar operaciones para cargar diferentes im√°genes. <br><br>  Ahora, para servir <code>index.html</code> , usamos el paquete <code>http-server</code> : <br><br><pre> <code class="javascript hljs">npm i http-server</code> </pre> <br>  Agregue la propiedad de <code>start</code> a la secci√≥n de <code>scripts</code> del archivo <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"http-server ./"</span></span> }</code> </pre> <br>  Despu√©s de eso, ejecute el <code>npm run start</code> en la terminal. <br><br>  Ahora abra el navegador y vaya a la direcci√≥n <code>127.0.0.1:8080</code> .  Nuestra p√°gina <code>index.html</code> al principio se parecer√° a la siguiente figura. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd9/e0e/f53/fd9e0ef534be767b804179f38ed134a3.png"></div><br>  <i><font color="#999999">P√°gina sin im√°genes reales</font></i> <br><br>  Puede notar que donde deber√≠an estar las im√°genes reales, ahora solo se muestran marcadores de posici√≥n.  Aqu√≠ procedemos de la suposici√≥n de que la primera imagen est√° en el √°rea de visualizaci√≥n, por lo que el navegador comienza a descargarla.  Como resultado, la p√°gina ahora se ver√° as√≠. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ef/004/1ee/1ef0041eee5e8713415df640faed6cb8.png"></div><br>  <i><font color="#999999">Navegador subi√≥ la primera imagen</font></i> <br><br>  Otras im√°genes a√∫n no cargadas.  Todav√≠a no han llegado al √°rea de visualizaci√≥n. <br><br>  Si se desplaza por la p√°gina mientras mira la consola, notar√° un problema.  Consiste en el hecho de que al desplazarse por la misma imagen en la ventana de visualizaci√≥n, el navegador intenta descargarla varias veces. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c4/074/83e/3c407483e097cb7c2dd7ce3b82b37027.png"></div><br>  <i><font color="#999999">M√∫ltiples cargas de la misma imagen.</font></i> <br><br>  Esto no es en absoluto lo que necesitamos.  Esto conduce a un desperdicio innecesario de recursos del sistema y degrada el rendimiento del proyecto. <br><br>  Para resolver este problema, necesitamos eliminar el elemento <code>img</code> , cuya imagen real ya est√° cargada, de la lista de elementos que est√° observando nuestra instancia de <code>IntersectionObserver</code> .  Tambi√©n necesitamos eliminar la clase <code>lzy_img</code> de este elemento.  Esto es lo que parece en el c√≥digo de funci√≥n de devoluci√≥n de llamada editado: <br><br><pre> <code class="javascript hljs">&lt;script&gt;   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {           entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry.isIntersecting) {                   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target                   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"lazy loading "</span></span>, lazyImage)                   lazyImage.src = lazyImage.dataset.src                   lazyImage.classList.remove(<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span>);                   imgObserver.unobserve(lazyImage);               }           })       });       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>)       arr.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) =&gt;</span></span> {           imageObserver.observe(v);       })   }) &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Despu√©s de cargar la imagen real del elemento <code>img</code> correspondiente, su clase <code>lzy_img</code> se <code>lzy_img</code> y el elemento se excluye de la lista de elementos que <code>IntersectionObserver</code> est√° observando. <br><br>  Aqu√≠ est√° el c√≥digo de muestra: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                       lazyImage.classList.remove(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lzy_img"</span></span></span><span class="javascript">);                       imgObserver.unobserve(lazyImage);                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  Examinamos el ejemplo m√°s simple de la implementaci√≥n del sistema de carga diferida de im√°genes.  Pero IntersectionObserver le permite crear esquemas de carga bastante complejos y perezosos.  Si est√° interesado en este tema, le recomendamos que consulte las publicaciones mencionadas al comienzo del material y lea la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> . <br><br>  <b>Estimados lectores!</b>  ¬øTiene alg√∫n ejemplo de mejorar el rendimiento del sitio web despu√©s de implementar un sistema de carga de im√°genes diferidas? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453586/">https://habr.com/ru/post/453586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453576/index.html">Frontend Weekly Digest (20-26 de mayo de 2019)</a></li>
<li><a href="../453578/index.html">De los cr√≠ticos a los algoritmos: sellos, corporaciones y cultura musical del siglo XX.</a></li>
<li><a href="../453580/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 366 (20-26 de mayo de 2019)</a></li>
<li><a href="../453582/index.html">Proyectos de Node.js en los que es mejor no usar archivos de bloqueo</a></li>
<li><a href="../453584/index.html">Prep√°rese: Angular 8 est√° cerca</a></li>
<li><a href="../453588/index.html">Opus sobre Su Majestad Clay. Cuarta parte - Siliconas</a></li>
<li><a href="../453590/index.html">Tu propio SaaS personal</a></li>
<li><a href="../453592/index.html">Ganarse la vida y hacer juegos: 11 consejos de Levelord</a></li>
<li><a href="../453594/index.html">Haciendo juegos para ganarse la vida: 11 consejos de Levelord</a></li>
<li><a href="../453596/index.html">Fraudes y EDS: todo es muy malo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>