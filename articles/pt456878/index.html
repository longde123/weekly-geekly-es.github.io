<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖæÔ∏è ‚ùå üöª N√≥s mesmos fazemos um radi√¥metro de cintila√ß√£o. Parte 1, hardware üë©üèæ‚Äçüî¨ ‚õé üêò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em um artigo anterior, mostrei um pouco no meu trabalho um radi√¥metro de cintila√ß√£o caseiro. O dispositivo interessou ao p√∫blico e, em conex√£o com iss...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>N√≥s mesmos fazemos um radi√¥metro de cintila√ß√£o. Parte 1, hardware</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456878/">  Em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior,</a> mostrei um pouco no meu trabalho um radi√¥metro de cintila√ß√£o caseiro.  O dispositivo interessou ao p√∫blico e, em conex√£o com isso, sai este artigo descrevendo o radi√¥metro por dentro. <br><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/qj/h9/-u/qjh9-uoln8w3rzdv26mm2jzrcqu.jpeg"></div><a name="habracut"></a><br><h4>  O que √© e por qu√™ </h4><br>  A grande maioria dos dos√≠metros e radi√¥metros de bolso s√£o instrumentos baseados em um contador Geiger.  Esse tipo de detector tem suas vantagens, entre as quais a simplicidade e o baixo custo, mas tamb√©m uma s√©rie de desvantagens.  Antes de tudo, essa √© uma efici√™ncia muito baixa do registro de raios gama e uma completa falta de informa√ß√µes sobre sua energia.  Um contador Geiger captura apenas um raio gama de v√°rias centenas, enquanto um detector de cintila√ß√£o de baixa energia fornece quase 100% de efici√™ncia.  Como resultado, com um fundo natural com as mesmas dimens√µes dos detectores, quando o contador Geiger fornece apenas 10 a 15 pulsos por minuto, o cintilador fornece o mesmo n√∫mero de pulsos, mas <i>por segundo</i> .  Assim, para se ter pelo menos uma id√©ia da taxa de dose, precisamos gastar pelo menos um minuto em um conjunto de pulsos com um contador Geiger e, com um cintilador, podemos receber informa√ß√µes sobre a situa√ß√£o da radia√ß√£o a cada segundo.  Portanto, o detector de cintila√ß√£o nos d√°, antes de tudo, a velocidade de rea√ß√£o a fontes fracas de radioatividade. <br><br>  Al√©m disso, o detector de cintila√ß√£o tem a propriedade de proporcionalidade.  Quanto maior a energia das part√≠culas, maior a amplitude do pulso na sa√≠da do detector.  Para que √© isso?  Primeiro, √© assim que obtemos informa√ß√µes sobre qual √© a fonte de radia√ß√£o.  Cada is√≥topo radioativo possui sua pr√≥pria energia caracter√≠stica de radia√ß√£o gama (ou um conjunto de energias).  O m√©todo de espectrometria gama √© baseado nisso.  Neste dispositivo, a energia absorvida m√©dia por quantum ser√° exibida na tela (ainda n√£o conclu√≠da). <br>  Em segundo lugar, se simplesmente contarmos impulsos sem levar em conta a energia, obteremos uma coisa desagrad√°vel chamada "um movimento com rigidez".  Suponha que calibramos nosso radi√¥metro de c√©sio-137.  E ent√£o eles estavam em um lugar infectado com amer√≠cio 241.  A energia do quantum de c√©sio-137 √© 667 keV, Am√©rica - 59 keV, ou seja, mais do que uma ordem de magnitude menor.  Portanto, com o mesmo n√∫mero de part√≠culas capturadas pelo detector (e, portanto, com as mesmas leituras do dispositivo), a dose absorvida ser√° maior que uma ordem de magnitude menor.  Ou seja, as medi√ß√µes ser√£o err√¥neas.  E para que o radi√¥metro possa medir a dose corretamente em diferentes energias (isto √©, um <i>dos√≠metro</i> ), a energia de cada quantum registrado deve ser levada em considera√ß√£o. <br><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/4z/xv/fh/4zxvfht8dlj0aaampaiqirumalo.jpeg"></div><br>  Os radi√¥metros-dos√≠metros de cintila√ß√£o port√°teis est√£o no mercado h√° muito tempo.  Mas, na maioria das vezes, esses s√£o dispositivos muito caros para uso profissional.  Conhe√ßo apenas um dispositivo, orientado para uso dom√©stico e amador - este √© o Atom Fast fabricado pela KB Radar.  O restante - dispositivos Polimaster, v√°rias empresas estrangeiras - s√£o muito caros. <br><br>  Neste dispositivo, queria obter o seguinte: <br><br><ul><li>  Trabalho aut√¥nomo sem refer√™ncia a um smartphone ou outro dispositivo com seu pr√≥prio monitor (diferente do Atom Fast); </li><li>  Tente fazer compensa√ß√£o de energia; </li><li>  Registro autom√°tico de medi√ß√µes em m√≠dia remov√≠vel, em perspectiva com refer√™ncia cartogr√°fica; </li><li>  Apar√™ncia cultural, n√£o dando origem caseira a todos os tipos de c√£es de ca√ßa e vigias. </li></ul><br>  Como resultado, o dispositivo descrito foi obtido.  Ainda n√£o est√° conclu√≠do, ainda h√° trabalho suficiente, especialmente com software. <br><br><h4>  Fun√ß√µes principais </h4><br>  O radi√¥metro opera em um dos dois modos: busca e medi√ß√£o.  No modo de pesquisa, as leituras do dispositivo s√£o atualizadas a cada segundo, enquanto, al√©m das leituras em formato digital, elas s√£o exibidas em um gr√°fico.  No modo de busca, nenhuma aten√ß√£o √© dada aos erros; nesse modo, o dispositivo √© principalmente um indicador.  A tela exibe: taxa de dose atual, taxa de contagem em pulsos por segundo (CPS), bem como a taxa de dose m√©dia no √∫ltimo minuto e a dose integral acumulada depois que o dispositivo foi ligado ou ap√≥s uma redefini√ß√£o.  No modo de medi√ß√£o, pelo contr√°rio, o tempo de medi√ß√£o √© definido pelo operador (pressionando o bot√£o ‚ÄúEnter‚Äù para iniciar e finalizar a medi√ß√£o), e o erro calculado √© exibido na tela junto com o valor medido, e um mini-di√°rio dos √∫ltimos √© exibido em seu ‚Äúpor√£o‚Äù. medi√ß√µes.  Al√©m disso, no modo de medi√ß√£o, foi feita a primeira tentativa de levar em considera√ß√£o a energia dos quanta e compensar o ‚Äúgolpe com rigidez‚Äù.  O modo de medi√ß√£o est√° em constru√ß√£o profunda e ainda n√£o est√° na vers√£o de firmware especificada. <br><br>  Independentemente do modo, o segundo segundo ciclo de medi√ß√µes continua, com os resultados sendo salvos na RAM.  Em particular, devido a isso, ao alternar para o modo de pesquisa, o gr√°fico exibe as leituras que ocorreram durante a perman√™ncia do dispositivo no modo de medi√ß√£o, bem como ao entrar no menu, etc.  Independentemente do modo, o alarme para exceder os limites tamb√©m funciona. <br><br>  Existem tr√™s limites no √∫ltimo.  O primeiro e o segundo tradicionais - s√£o definidos atrav√©s do menu a pedido do operador e, quando acionados pelos resultados do segundo segundo ciclo de contagem, um sinal sonoro √© emitido.  Al√©m deles, h√° tamb√©m um limiar adapt√°vel.  √â definido automaticamente em um n√≠vel m√©dio por minuto, com um, dois ou tr√™s sigma (voc√™ pode selecionar nas configura√ß√µes) a partir dele.  Se uma opera√ß√£o nesse limite ocorrer no pr√≥ximo ciclo, o valor do ciclo anterior ser√° obtido no pr√≥ximo ciclo, de modo que, com um aumento lento mas constante da radia√ß√£o, um alarme est√°vel seja alcan√ßado.  Posteriormente, um log de alarmes ser√° implementado, mas at√© agora n√£o √©. <br><br>  Ainda n√£o foi implementado para salvar os resultados da medi√ß√£o em um cart√£o microSD, cujo conector est√° montado na placa do radi√¥metro.  Tamb√©m fornece a conex√£o de um m√≥dulo GPS, cuja utiliza√ß√£o tamb√©m √© uma quest√£o de futuro. <br><br>  Os modos de comuta√ß√£o e altera√ß√£o r√°pida de algumas configura√ß√µes s√£o feitas atrav√©s das "teclas de atalho", o restante das opera√ß√µes - usando o menu.  Entrar no menu, como j√° mencionado, n√£o interrompe o processo de medi√ß√£o. <br><br><h4>  Plano geral do dispositivo </h4><br>  O radi√¥metro √© montado em um estojo Gainta G1389G padr√£o de Chip-and-Dip medindo 122x77x25 mm.  No painel superior, h√° um visor LCD colorido de 3,5 "com resolu√ß√£o de 480x320 pixels. O m√≥dulo HMI Nextion NX4832T035 √© usado como um monitor, que difere dos monitores convencionais por seu pr√≥prio microcontrolador, que cont√©m um programa pronto para exibir elementos da interface, mas precisamos enviar comandos para exibi-los, remov√™-los ou alter√°-los - por exemplo, altere um ou outro d√≠gito, desenhe outro ponto no gr√°fico ou mude a cor de uma ou outra inscri√ß√£o.No visor, h√° um teclado de cinco bot√µes.  Ainda h√° espa√ßo para o receptor GNSS e um detector de cintila√ß√£o est√° localizado na extremidade superior. <br><br><div style="text-align:center;"><img width="80%" src="https://habrastorage.org/webt/qp/9d/wo/qp9dwouqqw837oxu8itor67-2iu.jpeg"></div><br>  <i>Os n√∫meros vermelhos indicam: 1 - m√≥dulo de exibi√ß√£o, 2 - teclado, 3 - detector, 4 - placa anal√≥gica, 6 - placa do sistema.</i> <i><br></i> <br>  O circuito eletr√¥nico do dispositivo (sem contar a tela e o receptor de navega√ß√£o, al√©m do teclado) √© montado em duas placas de circuito impresso.  No primeiro, a parte anal√≥gica do dispositivo √© montada, no segundo - tudo o resto: um microcontrolador com uma cinta, um circuito de pot√™ncia e sua comuta√ß√£o, carregamento de bateria e uma fonte de alta tens√£o para o detector. <br><br><h4>  Detector </h4><br>  Um cristal de cintila√ß√£o ativado por t√°lio de iodeto de c√©sio √© usado como detector no radi√¥metro.  Este cristal tem a propriedade de radioluminesc√™ncia - part√≠culas carregadas e f√≥tons de alta energia (raios X e gama gama) excitam um brilho nele, e a luz √© emitida na forma de um curto, de um microssegundo, flash de luz - cintila√ß√£o.  Esse flash √© muito fraco para ser visto com os olhos ou detectado da maneira usual.  Fotoc√©lulas, fotodiodos e fotorresistores s√£o insens√≠veis demais para isso.  Para avaliar a escala do desastre, citarei as seguintes figuras. <br><br>  Um raio gama com uma energia de 1 MeV, completamente absorvido em um cristal CsI (Tl), gera aproximadamente 40.000 f√≥tons de luz verde.  Vamos tentar capturar essa luz com um fotodiodo.  Suponha que todos eles usem um fotodiodo (na verdade, isso √© irreal e bom se apenas metade deles entrar nele).  E digamos que temos um fotodiodo ideal, com uma sa√≠da qu√¢ntica de 100%.  Isso significa que cada um dos f√≥tons criar√° um par de el√©trons-orif√≠cios na estrutura do fotodiodo.  E no momento temos 40.000 fotoel√©trons.  E esse pulso dura, como sabemos, 1 Œºs.  Ent√£o, em um segundo, teremos 4 √ó 10 <sup>10</sup> fotoel√©trons.  A carga de el√©trons √© de 1,6 ‚àô 10 <sup>-19</sup> C, e a carga de 4 ‚àô 10 <sup>10</sup> fotoel√©trons √© de 6,4 ‚àô 10 <sup>-9</sup> C, ou seja, a for√ßa atual que o flash de cintila√ß√£o causar√° em nosso fotodiodo √© apenas alguns nanoamp!  E se voc√™ se lembrar que nem todos os f√≥tons tamb√©m atingem o fotodiodo, e seu rendimento qu√¢ntico n√£o √© 100% ... E al√©m disso, o megael√©tron-volt √© a energia de radia√ß√£o gama bastante dura, e seria bom ver energias muito mais baixas.  Em geral, os fotodiodos praticamente n√£o s√£o adequados para n√≥s aqui.  Pelo contr√°rio, eles s√£o adequados - mas com grande dificuldade. <br><br>  Normalmente, multiplicadores fotoeletr√¥nicos eram usados ‚Äã‚Äã(e agora s√£o usados) para capturar pulsos fracos de luz.  Neles, cada fotoel√©tron eliminado do fotocatodo se multiplica no sistema d√≠nodo, dando um ganho de milh√µes de vezes, e o pulso atual em seu √¢nodo n√£o √© mais nano, mas miliamperes, e registrar esse pulso n√£o √© mais dif√≠cil.  Mas os PMTs s√£o um cilindro de vidro fr√°gil de tamanho s√≥lido, s√£o kilovolts de pot√™ncia, que al√©m disso exigem alta estabilidade.  Em geral, √© mal representado em um dispositivo de bolso. <br><br>  Felizmente, agora est√£o dispon√≠veis fotodetectores semicondutores que podem competir em sensibilidade com os PMTs.  Quem disse que fotodiodos de avalanches?  Sim, s√£o quase eles.  Somente os diodos de avalanche, embora possuam amplifica√ß√£o interna da fotocorrente devido √† multiplica√ß√£o de portadoras de avalanche, apresentam v√°rios problemas tecnol√≥gicos que n√£o permitem criar uma √°rea sens√≠vel com um di√¢metro de pelo menos alguns mil√≠metros.  Al√©m disso, o diodo cl√°ssico de avalanche possui um coeficiente de amplifica√ß√£o de avalanche sem truques complexos de apenas 10-200, o que √© min√∫sculo em compara√ß√£o com a caracter√≠stica de amplifica√ß√£o de um milh√£o de vezes da PMT.  Todas essas desvantagens do fotodiodo de avalanche s√£o eliminadas no recente surgimento no mercado do Si-PMT ou SiPM.  Eles s√£o essencialmente uma matriz de muitos fotodiodos de avalanches que operam no modo de pr√©-quebra, nos quais um √∫nico f√≥ton √© capaz de provocar o desenvolvimento da quebra de avalanches.  Este modo √© semelhante ao funcionamento do contador Geiger.  Cada uma das c√©lulas tem seu pr√≥prio esquema de apagamento, devido ao qual a avalanche termina imediatamente e a c√©lula se torna novamente pronta para registrar um novo f√≥ton.  Todas as c√©lulas (com seus esquemas de extin√ß√£o) s√£o conectadas paralelamente a um cristal Si-PMT, e os pulsos de corrente que passam por elas s√£o somados, de modo que a corrente m√©dia √© proporcional √† ilumina√ß√£o do cristal.  E √© muito simples usar esse PMT de sil√≠cio - basta aplicar uma polariza√ß√£o reversa a ele - cerca de 28-29 V atrav√©s de um resistor de v√°rios quilo-ohms, dos quais o sinal pode ser obtido.  Nada mais √© necess√°rio - nem uma fonte de energia de kilovolt, nem um divisor para d√≠nodos.  E o Si-PMT em si √© um pequeno quadrado de sil√≠cio medindo 3x3 ou 6x6 mm.  A prop√≥sito, se voc√™ remover o vi√©s reverso dele ou abaix√°-lo para alguns volts, ele funcionar√° como um fotodiodo comum. <br><br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/webt/z6/wb/nu/z6wbnuaixbonzr-lunbvzc7avmg.png"></div><br>  Portanto, nosso detector usa Si-PMTs e um cristal CsI (Tl), entre os quais uma camada de lubrificante √≥ptico √© aplicada para eliminar o espa√ßo de ar entre o cristal e a janela do fotodetector.  E no topo do cristal e o Si-PMT s√£o cobertos com muitas camadas de uma fina pel√≠cula fluoropl√°stica, conhecida como fita FUM.  Este revestimento tem uma reflet√¢ncia difusa muito alta.  O detector √© coberto com fita de alum√≠nio na parte superior, fornecendo prote√ß√£o contra luz e veda√ß√£o externas - o cristal de iodeto de c√©sio √© extremamente facilmente sol√∫vel em √°gua e os menores tra√ßos de umidade que entram no detector o destruiriam.  Felizmente, diferentemente de seu "parente" - iodeto de s√≥dio, o CsI praticamente n√£o tem a propriedade da higroscopicidade - ou seja, n√£o atrai a umidade do ar.  Os cristais de iodeto de s√≥dio devem ser processados ‚Äã‚Äãapenas em um g√°s inerte absolutamente seco e colocados em recipientes com alta veda√ß√£o, como se fosse necess√°rio criar um v√°cuo ultra-alto neles, e no ar comum eles apenas se desfocam diante dos nossos olhos.  E vice-versa, o iodeto de c√©sio na forma de cristais √∫nicos pode ser facilmente tratado no ar (por exemplo, serrado com uma serra comum para metal e lixado com uma pele), evitando apenas vest√≠gios de √°gua l√≠quida e lembrando que o cristal cont√©m t√°lio extremamente t√≥xico.  No entanto, devido √† pequena quantidade, a toxicidade aguda (mas n√£o cr√¥nica) ser√° determinada pelo iodo, n√£o pelo t√°lio. <br><br>  N√£o darei conselhos sobre a fabrica√ß√£o pr√≥pria do detector, uma vez que n√£o lidei com ele (o detector acabado foi gentilmente fornecido pelo desenvolvedor e fabricante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">KBRadar</a> em troca de alguns artefatos valiosos para os engenheiros eletr√¥nicos), apenas darei seus par√¢metros.  S√£o eles: o tamanho do cristal √© 8x8x50 mm, e o Si-PMT MicroFC 30035 da empresa irlandesa SensL (agora √© a divis√£o On Semi) como fotodetector.  Uma variedade de dicas de fabrica√ß√£o pode ser encontrada online.  Com um ligeiro aumento no tamanho, voc√™ pode tirar um cristal CsI (Tl) ou NaI (Tl) padr√£o em uma embalagem ‚Äúnativa‚Äù de tamanhos pequenos (10x40, 18x30 mm, etc.).  No entanto, quanto maior o tamanho da janela de sa√≠da, pior ser√° o fotodetector com um tamanho de 3x3 mm, por isso recomendo que voc√™ use um MicroFC 60035 maior (e muito mais caro) com o di√¢metro da janela de sa√≠da maior. A prop√≥sito, os an√°logos da Broadcom desses fotodetectores n√£o s√£o recomendado usar.  Al√©m da carca√ßa (WLCSP-16), que √© completamente indigesta para solda dom√©stica, eles tamb√©m apresentam um n√≠vel de ru√≠do quase mais alto. <br><blockquote>  Os cristais de CsI (Tl) foram processados ‚Äã‚Äãcomo se segue.  Em todas as amostras, a superf√≠cie lateral foi emaranhada.  A retifica√ß√£o das extremidades foi realizada primeiro em uma lixa fina e depois em um pano de seda.  Para melhor moagem, foi utilizado √≥xido de c√©rio dilu√≠do em √°lcool et√≠lico.  Quando a transpar√™ncia do vidro de retifica√ß√£o foi alcan√ßada.  Se fosse necess√°rio reduzir o cristal a grandes espessuras, era simplesmente serrado com um fio embebido em √°gua.  Em seguida, o processamento foi realizado na mesma sequ√™ncia. <br><br>  (Gorbunov V.I., Kuleshov V.K. Sobre a quest√£o de escolher os tamanhos ideais de cintiladores para defectoscopia de produtos // Izv. Tomsk Polytechnic Institute. 1965. V.138. S.42-48.) <br></blockquote><br><h4>  Parte anal√≥gica </h4><br><img src="https://habrastorage.org/webt/uj/s5/e2/ujs5e2ncmks99c7i1uoxktifnps.png"><br><br>  Seu esquema √© mostrado na figura acima.  Consiste nos seguintes n√≥s principais: <br><br><ul><li>  Circuito de entrada; </li><li>  Comparador; </li><li>  Detector de pico. </li></ul><br>  O detector est√° conectado ao conector de entrada XP1.  O c√°todo Si-PMT - para o pino 3 (HV), o √¢nodo - para o pino 1 (DET) e para o pino 2 (GND) a tela met√°lica do detector est√° conectada - seu inv√≥lucro √© feito de fita adesiva de alum√≠nio. <br><br>  O circuito de entrada consiste na resist√™ncia de carga do detector R2 e na resist√™ncia limitadora de corrente R1, que tentar√° proteger o detector em caso de problemas, como fornecer acidentalmente uma tens√£o de polariza√ß√£o reversa muito alta ou fornecer incorretamente uma tens√£o de polaridade reversa, se o pr√≥prio detector n√£o estiver conectado corretamente.  Juntamente com a capacit√¢ncia de um PMT de sil√≠cio (aproximadamente 900 pF), eles formam pulsos de tens√£o com um tempo de subida de cerca de 1 Œºs e um tempo de queda de cerca de 15 Œºs.  Antes de aplicar √† entrada do comparador, o sinal √© passado atrav√©s de um capacitor de 470 pF, que desacopla o circuito por corrente cont√≠nua e, juntamente com a resist√™ncia de entrada do divisor R3R5R6, reduz o pulso para 2-3 Œºs. <br><br>  Um microcircuito LMV7239 foi usado como um comparador, combinando baixo consumo de energia com velocidade bastante alta (&lt;100 ns) em baixas tens√µes de entrada diferenciais.  O divisor de tens√£o R3R5R6, juntamente com o circuito de integra√ß√£o R4C3, formam uma tens√£o limiar "flutuante", tornando o comparador um pouco insens√≠vel √† corrente escura do detector e altera√ß√µes na corrente de entrada com a temperatura.  A sensibilidade do comparador √© controlada pela sele√ß√£o da resist√™ncia R5 na faixa de v√°rias dezenas de Ohms.  Um pulso retangular de polaridade negativa √© formado na sa√≠da do comparador.  A borda de fuga desse pulso pode tremer levemente devido ao ru√≠do do detector, mas uma tentativa de se livrar desse ressalto introduzindo a histerese levou a uma diminui√ß√£o da sensibilidade e, em geral, a resultados piores.  Esse pulso ativa o detector de pico e √© alimentado na parte digital, onde gera uma interrup√ß√£o do microcontrolador. <br><br>  Um disparo √∫nico no timer integrado DA2 (LMC555CM, de fato - um timer 555 convencional, apenas na vers√£o CMOS) gera um pulso (polaridade positiva) de dura√ß√£o de 10 Œºs na borda principal do pulso na sa√≠da do comparador (especificado pela cadeia de tempo R7C6).  Esse pulso √© invertido usando DD1 (um √∫nico inversor TinyLogic no pacote SOT23-5) e fornecido √† chave DD2, que reduz o capacitor C12 do detector de pico na aus√™ncia de pulsos de entrada.  No momento da chegada do pulso, o curto-circuito √© removido pelos 10 Œºs indicados. <br><br>  O detector de pico √© constru√≠do de acordo com o circuito cl√°ssico n√£o inversor.     ,        .   ,         DA2.1             ,      ,          (        ).   ,          ,   ,        .                        ,   ! -          ,       ,       .        ,           C12. <br><br>            ,       ,          (, ,     ,     ).         C9.  R8    ,     (    ‚Äì    DA2   ).      ,      ,    ,       . <br><br>         ,     .    ,  ‚Äì ,        .       ,        (   )  ,       10 ,      1206,     NP0   . <br>     DA2      ,       ,   ,     R9  R10. <br><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/y7/j_/dl/y7j_dlhv35lhusnptfshpgfeyfg.png"></div><br>                 TRIG  2-4        10   ,      ,   SP.       10     ,           ,   TRIG    ¬´¬ª     ,     (   ) . <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para opera√ß√£o, o circuito requer duas tens√µes de alimenta√ß√£o: 3,3 - 5 V para opera√ß√£o do circuito e tens√£o "alta" de 28-29 V para polarizar o detector. O consumo atual √© de cerca de 2,5 mA. De acordo com o circuito de ‚Äúalta tens√£o‚Äù, o consumo de corrente depende da carga do detector e, nos n√≠veis de radia√ß√£o de fundo, s√£o v√°rios microampes. √â montado em uma placa de circuito impresso com um tamanho de 64x22 mm usando montagem em superf√≠cie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s a montagem, tudo deve funcionar imediatamente, mas ao verificar, √© necess√°rio lembrar que a sa√≠da TRIG √© uma sa√≠da comparadora de alta velocidade e √© capaz de gerar interfer√™ncia poderosa. </font><font style="vertical-align: inherit;">Por causa deles, quando conectado (por exemplo, a um oscilosc√≥pio) com um longo condutor sem blindagem, tudo ficar√° excitado. </font><font style="vertical-align: inherit;">Pelo mesmo motivo, na minha vers√£o desenvolvida do quadro, h√° uma capta√ß√£o desse sinal para o sinal TRIG na forma de um "toque" de alta frequ√™ncia. </font><font style="vertical-align: inherit;">Ao montar o dispositivo acabado, a placa deve ser conectada √† placa do sistema com um pacote de comprimento m√≠nimo no qual as linhas TRIG e SP s√£o blindadas separadamente, por exemplo, usando um pano de n√≠quel adesivo aterrado a um fio comum.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Placa-m√£e </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Os seguintes n√≥s principais est√£o localizados nele: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fontes de alimenta√ß√£o e seu circuito de comuta√ß√£o, incluindo circuito de carregamento de bateria; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O microcontrolador e tudo o que voc√™ precisa para o seu trabalho; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Circuitos auxiliares para teclado, tela, cart√£o SD, etc. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O esquema de energia (pe√ßo desculpas imediatamente por n√£o levar os demais esquemas aos padr√µes e retirados diretamente da Eagle) √© mostrado na figura abaixo. </font></font><br><br><img src="https://habrastorage.org/webt/gi/dx/rg/gidxrgbeospmec3wrlqzq58mfsq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O dispositivo √© alimentado por uma bateria de √≠on-l√≠tio de c√©lula √∫nica conectada ao conector X1. Eu usei uma bateria de pol√≠mero de l√≠tio "Robiton" a 2,3 Ah *, em princ√≠pio, qualquer bateria de smartphones etc. a uma capacidade semelhante. No DA1, um carregador para ele √© constru√≠do, funcionando a partir de uma porta USB. Aqui, sem nenhum recurso, tudo na folha de dados do LTC4054-4.2. A corrente de carga pode ser aumentada de 350 para 700 mA atraindo a menor de acordo com o circuito de sa√≠da do resistor R4 para o fio comum usando a porta MK. Isso √© necess√°rio para n√£o exceder os 500 mA permitidos da porta USB e, ao mesmo tempo, permitir que a bateria carregue mais rapidamente se o dispositivo estiver conectado a um adaptador de rede. Usando o DA2, o MK descobre que a bateria est√° descarregada e desliga o dispositivo, e o divisor R5R6C3 permite medir a tens√£o nele (conectada a uma das entradas anal√≥gicas do MK).A linha DA1 CHRG permite que o MK controle o estado do carregador de acordo com um algoritmo complicado: quando n√£o h√° carga, ele tem zero, uma unidade aparece no processo de carga que √© facilmente atra√≠da a zero e, quando totalmente carregada, deixa de ser atra√≠da e permanece como uma carga de v√°rios quilogramas. No lugar de DA1, al√©m do LTC4054-4.2 original caro, tamb√©m √© aplic√°vel seu clone do ST - STC4054. Eu o aviso contra o uso do LTC4054 chin√™s com o Aliexpress: eles n√£o funcionam de forma alguma ou n√£o funcionam como deveriam, acabando com a bateria e criando uma amea√ßa de explos√£o. Foi por isso que me recusei a usar o TP4056 "popular": o original n√£o √© produzido h√° muito tempo e √© imposs√≠vel obt√™-lo, mas os clones n√£o t√™m uma pr√©-carga, ent√£o a propaga√ß√£o de tens√£o de 4,2 V √© quase um volt, a prote√ß√£o t√©rmica √© desenraizada ... Em geral ,a √∫nica c√≥pia que normalmente funciona deste microcircuito que tenho √© em um pequeno len√ßo para carregar o l√≠tio que comprei uma vez. Mas √© uma pena: ela tem uma indica√ß√£o mais simples dos modos, e a corrente de carga m√°xima √© maior, e o resfriamento atrav√©s do SO-8 com o abd√¥men √© melhor do que atrav√©s dos terminais SOT-23-5.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O circuito VT1VD1R7 desconecta a carga da bateria e alterna para a energia da porta USB quando a tens√£o aparece nela, para n√£o interferir no DA1 para manter adequadamente o modo de carga e detectar seu fim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, v√™m os conversores para obter as tens√µes de alimenta√ß√£o corretas. O microcircuito DA3 aumenta a voltagem da bateria para 5 V, o monitor √© alimentado por eles, o que aumenta o conversor para obter 28 V para o detector e atrav√©s do estabilizador linear - uma placa anal√≥gica. O MK pode pagar todos esses consumidores definindo zero na linha POWER_ON. O visor √© apagado separadamente pelo interruptor DA6.</font></font><br><br>         DA5.     DC-DC  LM2731.           MT3608,          28-29  (,         28 ,    ).         ,       (R12R13)     50-60 ,   C20,     (   !).     R11   FB ( 3 DA5)    (   ).               .          .    ,        . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em vez do DA3, como a pr√°tica demonstrou, voc√™ pode instalar um comutador semelhante ao DA6 com corre√ß√£o da placa (portanto, n√£o √© necess√°rio um estrangulamento e um diodo, al√©m de dois resistores R9 e R10). Isso tornar√° o dispositivo um pouco mais econ√¥mico. Em seguida, o estabilizador DA4 precisa ser instalado n√£o em 3,3 V, mas em 3,0, para que a fonte de alimenta√ß√£o anal√≥gica seja estabilizada em toda a faixa de descarga da bateria. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O conversor DA7 funciona o tempo todo, inclusive quando o dispositivo est√° desligado, fornecendo um MK de 3,3 V. No modo inativo, consome apenas algumas dezenas de ŒºA, de modo que o dispositivo desligado quase n√£o descarrega uma bateria de 2,3 Ah. Infelizmente, o STM32L151 n√£o possui uma entrada separada para alimentar o RTC, motivo pelo qual tive que tomar essa decis√£o (ou teria que complicar a troca).</font></font><br><br><img src="https://habrastorage.org/webt/dn/co/ot/dncootnvdgigasbfknafqpetn58.png"><br><div style="text-align:center;"><img width="60%" src="https://habrastorage.org/webt/lk/59/vz/lk59vz_km8wsoj5l0aaj7odcfri.png"></div><br>  E este √© o restante do circuito da placa do sistema. <br><br>  O cora√ß√£o do sistema √© o MK STM32L151CBT6A (ao contr√°rio do anal√≥gico sem √≠ndice A, ele tem o dobro da mem√≥ria RAM - 32 kB).  Quase todas as 48 descobertas dele estavam envolvidas.  As exce√ß√µes foram PA9 e PA10, elas tamb√©m s√£o RxD e TxD do primeiro USART, caso eu tenha feito almofadas de contato para elas, que s√£o f√°ceis de soldar no futuro.  Entre os recursos, h√° um sistema um pouco complicado para determinar o estado da sa√≠da do CHRG DA1 com a inclus√£o de um suspensor do PB14, quando voc√™ precisa determinar se a bateria est√° carregando ou j√° foi carregada, e o tweeter est√° conectado em fase atrav√©s do inversor DD2.  Meu erro √© mostrado no diagrama: quando o MK √© alternado para o modo STANDBY, a entrada deste inversor fica suspensa no ar, o que leva a um consumo adicional significativo e at√© a gera√ß√£o.  Aqui voc√™ precisa puxar essa entrada para o solo atrav√©s de um resistor de 100 quilos.  Voc√™ deve prestar aten√ß√£o √† qualidade dos ressonadores de quartzo, especialmente o ZQ1.  Com o rel√≥gio de quartzo padr√£o de 12 pF, o rel√≥gio do controlador n√£o funcionar√° normalmente, voc√™ precisar√° procurar um quartzo escasso com capacidade de carga de 7 pF.  Para o ZQ2, o MK √© mais fiel, mas com o primeiro quartzo chin√™s encontrado, aqui voc√™ pode perceber a falta de in√≠cio ou trabalhar com a frequ√™ncia errada.  Infelizmente, a linha STM32Lxx (√© ela) √© muito exigente quanto √† qualidade do quartzo. <br><br>  O teclado √© conectado de maneira bastante padr√£o - as linhas de portas s√£o puxadas pelos resistores externos R17-R21 para a energia e pressionadas no ch√£o com os bot√µes.  Na placa do teclado para suprimir a vibra√ß√£o, as correntes RC s√£o soldadas em paralelo com os bot√µes.  Quando voc√™ pressiona o bot√£o On (Ligar) usando o inversor DD3, √© gerado um sinal de alto n√≠vel, que √© alimentado na entrada WKUP e ativa o MK se estiver no estado STANDBY.  Para impedir a liga√ß√£o acidental de interfer√™ncias, a cadeia R22C23 est√° instalada.  As linhas do teclado s√£o conectadas a linhas de porta consecutivas, o que permite a leitura em um √∫nico comando de leitura de porta. <br>  Um cart√£o microSD est√° conectado no modo SPI devido √† aus√™ncia de um controlador SDIO neste MK.  A porta USB √© conectada da maneira mais simples atrav√©s de dois resistores nas linhas DP e DM.  Os pr√≥prios STM32 MKs s√£o bastante "carvalhos" em termos de est√°tica e n√£o haver√° outras comunica√ß√µes externas (exceto o firmware SWD) para o radi√¥metro, portanto, voc√™ n√£o pode proteger seriamente as portas contra sobretens√µes. <br><br>  O circuito de pot√™ncia do MK √© retirado de uma folha de dados e n√£o possui nenhum recurso.  Ao ajustar o indutor L6, adicionei sequencialmente um resistor de 100 ohm, o que reduziu bastante as flutua√ß√µes de tens√£o no VDDA.  A capacit√¢ncia do C30 pode ser aumentada para 1 ŒºF soldando em paralelo a ele (nos mesmos locais) outro capacitor em 0,01 ŒºF. <br><br>  Quando a energia √© aplicada, a fonte de 3,3 V imediatamente come√ßa a funcionar, gerando energia para o MK.  Outras fontes de energia est√£o desligadas.  Ap√≥s iniciar o MC e inicializar os perif√©ricos, ele eleva a linha POWER_ON (porta PA15), iniciando a fonte de 5 V e fornecendo energia √† parte anal√≥gica e √† fonte de alta tens√£o.  Para ligar a energia da tela, √© necess√°rio elevar a linha DISP_ON (PA8), da mesma forma, para ativar o m√≥dulo de navega√ß√£o por sat√©lite, a linha GPS_EN (PA1) √© elevada, mas, diferentemente da tela, n√£o h√° um interruptor especial para isso, a entrada de controle de energia do pr√≥prio receptor √© usada (deveria).  O visor apaga-se quando o dispositivo est√° operando apenas removendo a energia dele. <br><br>  Os pulsos de contagem (TRIG) do bloco anal√≥gico s√£o enviados para a linha PB0, causando interrup√ß√£o na borda descendente.  Os pulsos que transportam informa√ß√µes sobre a energia das part√≠culas (SP) s√£o alimentados no 21¬∫ canal do ADC.  A dura√ß√£o da ‚Äúprateleira‚Äù desse pulso, durante a qual o n√≠vel permanece inalterado, √© quase 10 Œºs, o que permite fazer v√°rias convers√µes ADC ap√≥s o MC ‚Äúacordar‚Äù e entrar na interrup√ß√£o.  O resistor R34 remove o "toque". <br><br>  A placa-m√£e tem um tamanho de 64x80 mm e foi projetada para instalar a maioria dos resistores e capacitores do tamanho 0603. A maioria dos elementos est√° instalada em um lado, exceto tr√™s capacitores no circuito de fonte de alimenta√ß√£o do MK e dois resistores que formam o divisor de tens√£o da bateria para medi-lo. <br><br><h4>  Dicas de montagem e comissionamento </h4><br>  A placa anal√≥gica come√ßa a funcionar imediatamente se montada sem erros.  Na vers√£o original, n√£o havia elementos R8 e C9 na placa, sem eles o circuito funcionava perfeitamente no gerador, mas a amplitude do pulso na sa√≠da SP era aleat√≥ria e independente da amplitude do pulso na entrada.  A introdu√ß√£o desses elementos corrigiu a situa√ß√£o. <br><br>  Se a parte anal√≥gica do dispositivo estiver excitada, haver√° apenas um problema: proteger a linha TRIG e minimizar o comprimento do cabo de conex√£o.  A conex√£o com o detector tamb√©m deve ser mais curta e protegida. <br><br>  O R5 deve ser selecionado pela passagem confi√°vel de pulsos fornecidos pelo detector com o medicamento americium-241 na aus√™ncia de uma rea√ß√£o do comparador ao ru√≠do escuro do Si-PMT na temperatura m√°xima de opera√ß√£o. <br><br>  A placa anal√≥gica deve ser cuidadosamente lavada e afastada do menor tra√ßo de fluxo, especialmente na √°rea do detector de pico, e deve estar bem seca e depois aquecida a 150 ¬∞ C.  A resist√™ncia de isolamento, mesmo em gigabytes, piorar√° bastante seu trabalho e o tornar√° inst√°vel. <br><br>  Comece a construir a placa do sistema a partir de fontes de energia.  Primeiro, colete uma fonte de 3,3 V e verifique se est√° funcionando.  Ent√£o - uma fonte de 5 V (sem esquecer de conectar temporariamente o POWER_ON ao barramento de + 3,3 V) e depois uma de alta tens√£o.  Antes de lig√°-lo pela primeira vez, defina R13 para a posi√ß√£o superior no diagrama e n√£o solde C20 at√© que a tens√£o esteja ajustada.  Defina a voltagem para 28 V. Na fonte de alta voltagem, verifique se o carregador funciona corretamente monitorando a voltagem da bateria durante o carregamento.  Ap√≥s verificar o desempenho e a voltagem correta em todos os barramentos de energia, voc√™ pode soldar o MK e todos os detalhes relacionados a ele.  Para verificar o MK, √© aconselh√°vel escrever e piscar alguns Blink nele.  N√£o se esque√ßa de piscar e exibir. <br><br>  O processo de calibra√ß√£o ser√° descrito na pr√≥xima edi√ß√£o. <br><br><h4>  * * * </h4><br>  Esta √© apenas a primeira parte do artigo.  O segundo descreve a parte do software e o procedimento de calibra√ß√£o.  Enquanto isso, para quem n√£o pode esperar - <i>folhetos</i> . <br><br>  Arquivos Eagle com diagramas de circuitos e layouts de PCB, bem como a vers√£o est√°vel atual do firmware e da tela MK, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">podem ser baixados do Google Drive neste link.</a>  Somente o modo de pesquisa funciona neste firmware e o modelo atual no lugar do menu.  Ainda n√£o estou pronto para definir um firmware mais funcional. <br><br>  Observe: as designa√ß√µes posicionais no circuito da placa anal√≥gica na figura no artigo e no projeto Eagle n√£o coincidem, tamb√©m n√£o h√° elementos R8 e C9 (de acordo com o diagrama do artigo) que eu instalei com um bisturi em uma placa j√° pronta. <br><br>  A fia√ß√£o das placas √© projetada para a fabrica√ß√£o em f√°brica, para LUT, etc.  ter√° que ser reciclado (d√≥i muitas vias).  Sim, eu tenho algumas placas prontas.  Se algu√©m precisar, escreva em um acordo pessoal. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456878/">https://habr.com/ru/post/pt456878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456866/index.html">Quando eles far√£o "cheburnet" da Internet: vis√£o geral do projeto</a></li>
<li><a href="../pt456868/index.html">Novo Gerenciador de Conex√£o Remota 3CX SBC na V16 Update 2 Beta</a></li>
<li><a href="../pt456870/index.html">Como ganhar dinheiro com a√ß√µes sem especula√ß√£o: 5 empresas com altos dividendos</a></li>
<li><a href="../pt456872/index.html">Triagem de dispositivos eletr√¥nicos na fronteira - uma necessidade ou viola√ß√£o dos direitos humanos?</a></li>
<li><a href="../pt456876/index.html">Certifica√ß√£o ISTQB: Benef√≠cios e Recursos</a></li>
<li><a href="../pt456880/index.html">Por que o Math.Round abre uma janela de impress√£o em um navegador no Try .NET</a></li>
<li><a href="../pt456886/index.html">ASO Checklist: Como n√£o perder nada</a></li>
<li><a href="../pt456888/index.html">Como os sat√©lites se derretem na atmosfera da Terra</a></li>
<li><a href="../pt456890/index.html">Controle remoto IR em stm32</a></li>
<li><a href="../pt456892/index.html">Como procurar vulnerabilidades de aplicativos da Web: comparando oito scanners populares</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>