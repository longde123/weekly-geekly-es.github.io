<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëó üëàüèΩ ü§≥üèæ Por que escrever sua grade de dados de rea√ß√£o em 2019 üí™üèæ üëáüèæ ü§∑üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Estou envolvido no desenvolvimento de um sistema ECM. E em uma curta s√©rie de artigos, quero compartilhar nossa experi√™ncia e a hist√≥ria do ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por que escrever sua grade de dados de rea√ß√£o em 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457504/"><p>  Ol√° Habr!  Estou envolvido no desenvolvimento de um sistema ECM.  E em uma curta s√©rie de artigos, quero compartilhar nossa experi√™ncia e a hist√≥ria do desenvolvimento da minha React Data Grid (daqui em diante simplesmente uma grade), a saber: </p><br><ul><li>  por que abandonamos os componentes acabados </li><li>  que problemas e tarefas encontramos ao desenvolver nossa grade </li><li>  que lucro o desenvolvimento de sua grade oferece </li></ul><br><h3 id="predystoriya">  Antecedentes </h3><br><p>  Nosso sistema possui um aplicativo da web no qual os usu√°rios trabalham com listas de documentos, resultados de pesquisa, diret√≥rios.  Al√©m disso, as listas podem ser pequenas (10 funcion√°rios) ou muito grandes (50.000 contratados).  Para exibir essas listas, desenvolvemos nossa pr√≥pria grade: </p><br><p><img src="https://habrastorage.org/webt/1m/v3/py/1mv3pyhnf7emxc6xs2h8lcv8dis.png" alt="imagem"></p><a name="habracut"></a><br><p>  Quando come√ßamos a desenvolver um aplicativo Web, quer√≠amos encontrar uma biblioteca pronta para exibir uma grade que pode fazer tudo o que precisamos: classificar e agrupar registros, arrastar e soltar colunas, trabalhar com v√°rias sele√ß√µes, filtrar e calcular o total de colunas, em partes Baixe dados do servidor e exiba dezenas de milhares de registros. </p><br><p>  Vou explicar o √∫ltimo requisito "exibir dezenas de milhares de registros".  Em grades, esse requisito √© implementado de v√°rias maneiras: pagina√ß√£o, rolagem infinita, rolagem virtual. </p><br><p>  As abordagens de pagina√ß√£o e rolagem infinita s√£o comuns em sites, voc√™ as usa todos os dias.  Por exemplo, pagina√ß√£o no Google: </p><br><p><img src="https://habrastorage.org/webt/v5/5q/vz/v55qvz8wjlhqmp-jfzievdnjvxe.png" alt="imagem"></p><br><p>  Ou a rolagem infinita no mesmo Google nas imagens, onde a pr√≥xima parte das imagens √© carregada quando voc√™ rola pela primeira parte at√© o final: </p><br><p><img src="https://habrastorage.org/webt/bs/r7/qk/bsr7qkhgokj6ezk3qlagzkkgdaq.png" alt="imagem"></p><br><p>  Mas a rolagem virtual (a seguir denominada rolagem virtual) raramente √© usada na Web, sua principal diferen√ßa em rela√ß√£o √† rolagem infinita √© a capacidade de rolar rapidamente pelas listas muito grandes em qualquer lugar.  Nesse caso, apenas os dados vis√≠veis ao usu√°rio ser√£o baixados e exibidos. </p><br><p><img src="https://habrastorage.org/webt/wf/j8/ct/wfj8ctaao00cbfi1txsytvpqwae.png" alt="imagem"></p><br><p>  Para nosso aplicativo da web, eu queria usar a rolagem virtual.  Concordo que rolar para qualquer lugar na lista de 10.000 entradas √© um caso bastante inventado.  No entanto, a rolagem aleat√≥ria entre 500 e 1.000 registros √© um caso ativo. </p><br><p>  Quando implementam rolagem virtual, geralmente implementam a API do software para gerenciar essa rolagem.  Este √© um recurso muito importante.  A rolagem de software √© usada, por exemplo, para posicionar o registro selecionado no meio da tela ao abrir o diret√≥rio: </p><br><p><img src="https://habrastorage.org/webt/ny/up/na/nyupnajuldvlpnb294u203xvy-w.png" alt="imagem"></p><br><p>  Voltar para os requisitos.  Do que mais precisamos: </p><br><ul><li>  API de gerenciamento de rolagem virtual </li><li>  Personaliza√ß√£o da apar√™ncia da grade (linhas, colunas, menu de contexto) para que a grade n√£o pare√ßa estranha em nosso aplicativo </li><li>  Suporte para as tecnologias que usamos: reagir, redux e flexbox </li><li>  Que a rede funcionou em ie11 </li></ul><br><p>  Em geral, havia muitos requisitos. </p><br><h3 id="popytka-pervaya-2016-god-devextreme-javascript-data-grid">  A primeira tentativa (2016).  Grade de dados JavaScript do DevExtreme </h3><br><p>  N√£o demorando muito para explorar as bibliotecas existentes, deparamos com a DevExtreme JavaScript Data Grid.  Por requisitos funcionais, essa grade cobria todas as nossas necessidades e apresentava uma apar√™ncia muito apresent√°vel.  No entanto, n√£o era adequado para requisitos tecnol√≥gicos (nem reagir, nem redux, nem flexbox).  Naquela √©poca, o DevExtreme n√£o tinha uma grade de rea√ß√£o. </p><br><p>  Bem, n√£o deixe que ele reaja, decidimos, porque a grade √© bonita e funcional, vamos us√°-la.  E eles adicionaram a biblioteca ao seu projeto.  Acabamos adicionando 3 MB de scripts. </p><br><p>  Por algumas semanas, integramos a grade em nosso aplicativo Web e aumentamos a funcionalidade b√°sica: </p><br><ul><li>  Embrulhou uma grade para fazer amizade com reagir e redux </li><li>  Eleva√ß√£o da rolagem virtual e carregamento parcial de dados de nosso servidor da web </li><li>  Classifica√ß√£o e sele√ß√£o implementadas </li></ul><br><p>  No processo de aparafusar a grade, dois problemas s√©rios ficaram claros e v√°rios outros menos s√©rios. </p><br><h3 id="pervaya-sereznaya-problema">  Primeiro problema s√©rio </h3><br><p>  Tornar o DevExtreme JavaScript Data Grid com redux muito dif√≠cil.  Conseguimos controlar as configura√ß√µes da coluna e destacar registros atrav√©s do redux, mas armazenar dados carregados em por√ß√µes no redux e executar opera√ß√µes CRUD neles atrav√©s do redux - isso n√£o √© realista.  Eu tive que fazer uma muleta que, contornando o redux, manipulasse os dados da grade.  A muleta acabou por ser complexa e fr√°gil.  Esta foi a primeira campainha de alarme que a grade n√£o nos convinha, mas continuamos a apert√°-la. </p><br><h3 id="vtoraya-sereznaya-problema">  Segundo problema s√©rio </h3><br><p>  N√£o h√° API de gerenciamento de rolagem virtual.  N√£o foi poss√≠vel recusar o controle de rolagem por software, tivemos que refazer as fontes do DevExtreme e encontrar a API de controle de rolagem interna.  Obviamente, essa API tinha um monte de limita√ß√µes, porque foi projetada para uso interno.  Como resultado, conseguimos fazer com que a API interna funcionasse mais ou menos em nossos casos, mas, novamente, ignorando o redux e novamente um monte de muletas. </p><br><h3 id="menee-sereznye-problemy">  Problemas menos s√©rios </h3><br><p>  Problemas menos s√©rios apareciam o tempo todo, porque a funcionalidade padr√£o da grade de dados JavaScript do DevExtreme n√£o era completamente adequada para n√≥s e tentamos corrigi-lo: </p><br><ol><li>  O alongamento da grade do DevExtreme em altura n√£o funciona.  Eu tive que escrever um hack para ensinar o DevExtreme como fazer isso (talvez n√£o haja problemas com isso nas vers√µes recentes). </li><li>  Quando o foco n√£o est√° na grade, √© imposs√≠vel controlar a sele√ß√£o de linhas atrav√©s do teclado (e precis√°vamos disso).  Eu tive que escrever meu controle de teclado. </li><li>  Ao alterar a composi√ß√£o das colunas e os dados, tivemos o problema de piscar de dados (com a rolagem virtual ativada). </li><li>  O problema de um grande n√∫mero de solicita√ß√µes na primeira exibi√ß√£o da grade.  Foi especialmente not√°vel quando controlamos a rolagem pela API interna. </li><li>  √â dif√≠cil personalizar algumas partes da grade da interface do usu√°rio.  Por exemplo, havia um desejo no topo da linha de grade selecionada de desenhar a√ß√µes de gerenciamento de linha (excluir uma linha, copiar, abrir um cart√£o).  Mas como estragar isso no DevExtreme n√£o estava claro, e mesmo usando o react: <br><img src="https://habrastorage.org/webt/yo/zv/9b/yozv9boc174n-rxmbdsxoham4g8.png" alt="imagem"></li><li>  √â dif√≠cil catomizar a classifica√ß√£o (quer√≠amos classificar por dados que n√£o s√£o exibidos na grade e n√£o s√£o mapeados em colunas). </li><li>  Muletas s√£o necess√°rias para parafusar o componente de rea√ß√£o nas c√©lulas da grade (afinal, a grade n√£o est√° na rea√ß√£o). </li><li>  Nenhuma digita√ß√£o do c√≥digo do DevExtreme (fluxo / texto datilografado). </li><li>  Problema de velocidade com rolagem virtual longa. </li><li>  Problema de velocidade ao esticar / reorganizar as colunas (ap√≥s rolagem virtual prolongada). </li><li>  O tamanho dos scripts de grade √© de 3 Mb. </li></ol><br><p>  Embora a grade de funcionalidade do DevExtreme contivesse tudo o que precis√°vamos, eu queria reescrever quase toda a funcionalidade padr√£o.  Durante seu uso, foram adicionadas centenas de linhas de c√≥digo dif√≠ceis de entender que tentavam resolver os problemas de intera√ß√£o com o redux e o reagir, e era dif√≠cil usar a grade n√£o-reativa em um aplicativo de rea√ß√£o. </p><br><h3 id="otkaz-ot-devextreme-poisk-alternativ">  Recusa de DevExtreme.  Procure alternativas </h3><br><p>  Depois de algum tempo usando o DevExtreme, foi decidido abandon√°-lo.  Jogue fora todos os hacks, c√≥digos complexos e tamb√©m 3 MB de scripts DevExtreme.  E encontre ou escreva uma nova grade. </p><br><p>  Desta vez, estamos mais atentos ao estudo das redes existentes.  Foram estudados a lista de detalhes da tela do MS, a grade virtualizada React, a grade de rea√ß√£o DevExtreme, a grade Telerik e a grade KendoUI. <br>  Os requisitos permaneceram os mesmos, mas eles j√° tomaram forma em uma lista que entendemos. </p><br><p>  Requisitos de tecnologia: </p><br><ul><li>  reagir </li><li>  redux </li><li>  flexbox </li></ul><br><p>  Requisitos funcionais: </p><br><ul><li>  Rolagem virtual (com a capacidade de exibir dezenas de milhares de registros) </li><li>  API de gerenciamento de rolagem </li><li>  Armazenando dados e configura√ß√µes de grade no redux </li><li>  Carregamento em lote de dados de um servidor da web </li><li>  Gerenciamento de colunas (controle de estiramento / reorganiza√ß√£o / visibilidade) </li><li>  Classifica√ß√£o de colunas + filtragem </li><li>  Sele√ß√£o m√∫ltipla </li><li>  Pesquisa semelhante com luz de fundo </li><li>  Rolagem horizontal </li><li>  Teclado </li><li>  Menu de contexto (em uma linha, em uma √°rea vazia, em colunas) </li><li>  Suporte ie11, edge, chrome, ff, safari </li></ul><br><p>  Nesse ponto, a primeira vers√£o do DevExtreme React Grid j√° havia sido exibida, mas a descartamos imediatamente pelos seguintes motivos: </p><br><ul><li>  Rolagem virtual n√£o √© suportada no ie11 </li><li>  A rolagem virtual n√£o funciona em conjunto com o download de dados em lote do servidor (embora pare√ßa haver algumas solu√ß√µes alternativas). </li><li>  E o mais importante, eu n√£o queria entrar no mesmo rake quando queria reescrever metade da funcionalidade padr√£o de uma grade de terceiros. </li></ul><br><p>  A an√°lise das solu√ß√µes existentes mostrou que n√£o existe uma ‚Äúbala de prata‚Äù.  N√£o existe uma grade que cubra todos os nossos requisitos.  Foi decidido escrever nossa pr√≥pria grade, que, em termos de funcionalidade, desenvolveremos na dire√ß√£o que precisamos e seremos amigos das tecnologias necess√°rias para o nosso produto. </p><br><h3 id="razrabotka-svoego-react-data-grid">  Desenvolvendo sua grade de dados do React </h3><br><p>  O desenvolvimento da grade come√ßou com prot√≥tipos, onde eles testaram os t√≥picos mais dif√≠ceis para n√≥s: </p><br><ul><li>  rolagem virtual </li><li>  armazenamento de todos os dados da grade no Redux </li></ul><br><h3 id="virtual-scrolling">  Rolagem virtual </h3><br><p>  O mais dif√≠cil acabou sendo a rolagem virtual.  Na maioria das vezes, √© feito de uma de tr√™s maneiras: </p><br><p>  <strong>1. Virtualiza√ß√£o de p√°gina</strong> <br>  Os dados s√£o desenhados em partes - p√°ginas.  Ao rolar, as p√°ginas vis√≠veis s√£o adicionadas, as invis√≠veis s√£o exclu√≠das.  A p√°gina consiste em 20 a 60 linhas (geralmente o tamanho √© personaliz√°vel).  √â aqui que os produtos foram: DevExtreme JavaScript Data Grid, MS Fabric DetailsList. </p><br><p><img src="https://habrastorage.org/webt/h7/tf/5l/h7tf5lynlgmje6wunlcowkeabqa.png" alt="imagem"></p><br><p>  <strong>2. Virtualiza√ß√£o linha por linha</strong> <br>  Somente linhas vis√≠veis s√£o desenhadas.  Assim que uma linha sai da tela, ela √© exclu√≠da imediatamente.  Os produtos foram assim: Grade ReactVirtualized, Grade React DevExtreme, Grade Telerik. </p><br><p><img src="https://habrastorage.org/webt/9j/zs/bh/9jzsbhqw0_up5gnkt2g7cw3uth0.png" alt="imagem"></p><br><p>  <strong>3. Tela</strong> <br>  Todas as linhas e seu conte√∫do s√£o desenhados usando o Canvas.  Foi isso que o Google Docs fez. </p><br><p><img src="https://habrastorage.org/webt/12/f_/hd/12f_hdydog5ponrdm9filxne_1u.png" alt="imagem"></p><br><p>  Ao desenvolver a grade, criamos prot√≥tipos para as tr√™s op√ß√µes de virtualiza√ß√£o (mesmo para o Canvas).  E eles escolheram a virtualiza√ß√£o p√°gina por p√°gina. </p><br><h3 id="pochemu-otkazalis-ot-drugih-variantov">  Por que abandonar outras op√ß√µes? </h3><br><p>  A virtualiza√ß√£o linha a linha teve problemas com a velocidade de renderiza√ß√£o no prot√≥tipo.  Assim que o conte√∫do das linhas se tornou mais complicado (muito texto, realce, corte, √≠cones, um grande n√∫mero de colunas e em toda parte flexbox), ficou caro adicionar / remover linhas v√°rias vezes por segundo.  Obviamente, os resultados tamb√©m dependem do navegador (fizemos suporte, incluindo ie11, edge): </p><br><p><img src="https://habrastorage.org/webt/fe/4v/xh/fe4vxhw7r5zjwqqezc7rmxubmmm.png" alt="imagem"></p><br><p>  A op√ß√£o Canvas foi muito sedutora na velocidade de renderiza√ß√£o, mas trabalhosa.  Foi proposto desenhar tudo: texto, quebra de texto, corte de texto, destaque, √≠cones, linhas divis√≥rias, destaque, recuo.  Fa√ßa uma rea√ß√£o ao clicar no bot√£o do mouse na tela, real√ßando as linhas quando voc√™ passa o mouse.  Ao mesmo tempo, alguns elementos do Dom (mostrando dicas, "a√ß√µes pop-up" na linha) devem ser aplicados sobre o Canvas.  Ainda era necess√°rio resolver o problema de desfocar texto e √≠cones no Canvas.  Tudo isso √© longo e dif√≠cil de fazer.  Embora tenhamos dominado o prot√≥tipo.  Ao mesmo tempo, qualquer personaliza√ß√£o de linhas e c√©lulas no futuro resultaria em uma grande laboriosa para n√≥s. </p><br><h4 id="plyusy-postranichnoy-virtualizacii">  Os benef√≠cios da pagina√ß√£o </h4><br><p>  A virtualiza√ß√£o de p√°gina por p√°gina selecionada tinha vantagens em compara√ß√£o com linha por linha, que determinou sua escolha: </p><br><ul><li>  Se a p√°gina j√° estiver renderizada, a rolagem dentro da p√°gina √© barata (a √°rvore DOM n√£o muda ao rolar).  A virtualiza√ß√£o linha a linha para qualquer rolagem menor requer altera√ß√£o da √°rvore DOM, e isso √© caro quando a √°rvore DOM √© complexa e o flexbox √© usado em qualquer lugar. </li><li>  Para listas pequenas (&lt;200 entradas), as p√°ginas n√£o podem ser exclu√≠das, basta adicionar.  Mais cedo ou mais tarde, todas as p√°ginas ser√£o constru√≠das e a rolagem ser√° totalmente gratuita (em termos de tempo de renderiza√ß√£o). </li></ul><br><h4 id="vybor-razmera-stranicy">  Sele√ß√£o do tamanho da p√°gina </h4><br><p>  Um problema separado √© a escolha do tamanho da p√°gina.  Eu escrevi acima que o tamanho √© personaliz√°vel e geralmente √© de 20 a 60 linhas.  Uma p√°gina grande √© desenhada por um longo tempo, uma pequena leva a uma exibi√ß√£o frequente de uma "tela branca" ao rolar.  Experimentalmente, um tamanho de p√°gina de 25 linhas foi selecionado.  No entanto, para ie11, o tamanho foi reduzido para 5 linhas.  Parece que a interface no IE √© mais responsiva se voc√™ desenhar muitas p√°ginas pequenas com pequenos atrasos do que uma grande com um grande atraso. </p><br><h4 id="react-i-virtual-scrolling">  Reagir e rolagem virtual </h4><br><p>  A virtualiza√ß√£o de p√°gina teve que ser implementada usando o react.  Para fazer isso, v√°rias tarefas devem ser resolvidas: </p><br><p>  <strong>Tarefa 1. Como adicionar / remover p√°ginas atrav√©s do React ao rolar?</strong> </p><br><p>  Para resolver esse problema, os seguintes conceitos foram introduzidos: </p><br><ul><li>  modelo de p√°gina </li><li>  visualiza√ß√£o de p√°gina </li></ul><br><p>  Um modelo √© uma informa√ß√£o sobre a qual construir uma exibi√ß√£o.  Uma visualiza√ß√£o √© um componente React. </p><br><p><img src="https://habrastorage.org/webt/ud/da/qi/uddaqigdtketfoh6cwk6lnklcpo.png" alt="imagem"></p><br><p>  De fato, a tarefa de virtualiza√ß√£o depois disso se resumiu √† manipula√ß√£o de modelos de p√°gina: armazene uma lista de modelos de p√°gina, adicione e remova modelos ao rolar.  E j√° a partir da lista de modelos atrav√©s do react, crie / reconstrua a exibi√ß√£o: </p><br><p><img src="https://habrastorage.org/webt/4m/sr/g0/4msrg0gy9qwsv9u-8ljjqhzllwa.png" alt="imagem"></p><br><p>  No decorrer da implementa√ß√£o, as regras para trabalhar com modelos de p√°gina foram formadas: </p><br><ul><li>  As p√°ginas devem ser adicionadas uma de cada vez.  Ap√≥s cada adi√ß√£o, reserve um tempo para desenhar.  √â aceit√°vel adicionar 1 p√°gina a cada 300-500ms - essa √© uma situa√ß√£o de rolagem r√°pida.  Se voc√™ adicionar, por exemplo, 5 p√°ginas de uma s√≥ vez, a interface do usu√°rio ficar√° suspensa na constru√ß√£o. </li><li>  As p√°ginas n√£o precisam ser mantidas em dezenas.  Um exemplo de uma situa√ß√£o problem√°tica: 20 p√°ginas s√£o exibidas, o usu√°rio vai para outra lista e todas as 20 p√°ginas devem ser exclu√≠das de uma vez.  A remo√ß√£o de um grande n√∫mero de p√°ginas √© uma opera√ß√£o cara; a limpeza da √°rvore DOM leva 1 segundo.  Para evitar isso, √© melhor manter no m√°ximo 10 p√°ginas por vez. </li><li>  Para qualquer manipula√ß√£o de coluna (reorganiza√ß√£o, adi√ß√£o, exclus√£o, alongamento), √© melhor excluir p√°ginas que n√£o s√£o vis√≠veis para o usu√°rio com anteced√™ncia.  Isso evitar√° a reconstru√ß√£o cara de todas as p√°ginas renderizadas. </li></ul><br><p>  <strong>Tarefa 2. Como exibir a barra de navega√ß√£o?</strong> </p><br><p>  A rolagem virtual pressup√µe a disponibilidade de uma barra de rolagem, que leva em considera√ß√£o o tamanho da lista e permite rolar para qualquer lugar: </p><br><p><img src="https://habrastorage.org/webt/lo/rc/ut/lorcutgz7bcopbjltcnziudkgks.png" alt="imagem"></p><br><p>  Como exibir uma barra de navega√ß√£o?  A solu√ß√£o mais simples √© desenhar uma div invis√≠vel do tamanho necess√°rio, em vez de dados reais.  E j√° no topo desta div, exibimos as p√°ginas vis√≠veis: </p><br><p><img src="https://habrastorage.org/webt/pp/_x/vg/pp_xvgowd1qtrnyigxnszou0xnw.png" alt="imagem"></p><br><p>  <strong>Tarefa 3. Como monitorar o tamanho da viewport?</strong> </p><br><p>  Viewport √© a √°rea de dados vis√≠vel da grade.  Por que ficar de olho no tamanho dela?  Para calcular o n√∫mero de p√°ginas que precisam ser exibidas para o usu√°rio.  Suponha que tenhamos um tamanho de p√°gina pequeno (5 linhas) e uma resolu√ß√£o de tela grande (1920x1080).  Quantas p√°ginas o usu√°rio precisa exibir para fechar a janela de exibi√ß√£o inteira? </p><br><p><img src="https://habrastorage.org/webt/tt/g3/sx/ttg3sxfvvuf320ydcwe6esbukp4.png" alt="imagem"></p><br><p>  Voc√™ pode resolver esse problema se souber a altura da janela de exibi√ß√£o e a altura de uma p√°gina.  Agora vamos complicar a tarefa, suponha que o usu√°rio altere a escala acentuadamente no navegador - define 50%: </p><br><p><img src="https://habrastorage.org/webt/s8/47/mt/s847mtipiappdqe0qqsli_yvj14.png" alt="imagem"></p><br><p>  A situa√ß√£o da escala mostra que n√£o √© suficiente descobrir o tamanho da janela de visualiza√ß√£o uma vez; √© necess√°rio monitorar o tamanho.  E agora vamos complicar completamente a tarefa: os elementos html n√£o t√™m um evento de redimensionamento, no qual voc√™ pode se inscrever e monitorar o tamanho.  Somente o objeto da janela foi redimensionado. </p><br><p>  A primeira coisa que vem √† mente √© usar um timer e pesquisar constantemente a altura do elemento html.  Mas h√° uma solu√ß√£o ainda melhor que vimos na grade de dados do DevExtreme JavaScript: crie um iframe invis√≠vel, estenda-o para o tamanho da grade e assine o evento de redimensionamento do iframe.contentWindow: </p><br><p><img src="https://habrastorage.org/webt/fa/gi/ta/fagitaw870f5ahtworjownk__mk.png" alt="imagem"></p><br><p><img src="https://habrastorage.org/webt/dd/m9/tq/ddm9tqblgsmpwepcc7_gq7g32sm.png" alt="imagem"></p><br><h3 id="rezyume">  Sum√°rio </h3><br><p>  PS: Este n√£o √© o fim.  No pr√≥ximo artigo, mostrarei como fizemos amizade com o redux. </p><br><p>  Para obter uma rolagem virtual completa, muitas outras tarefas precisavam ser resolvidas.  Mas os descritos acima foram os mais interessantes.  Aqui est√£o algumas outras tarefas que tamb√©m aparecem: </p><br><ul><li>  Leve em considera√ß√£o a dire√ß√£o e a velocidade da rolagem ao adicionar / remover p√°ginas. </li><li>  Leve em considera√ß√£o as altera√ß√µes de dados para minimizar os modelos de p√°gina de reconstru√ß√£o.  Por exemplo, excluiu uma linha ou adicionou uma linha, o que fazer com as p√°ginas j√° renderizadas?  Jogue tudo fora ou deixe um pouco?  H√° espa√ßo para otimiza√ß√£o. </li><li>  Ao alterar a sele√ß√£o, reorganize o n√∫mero m√≠nimo de p√°ginas necess√°rio. </li></ul><br><p>  Se voc√™ tiver perguntas sobre a implementa√ß√£o, escreva-as nos coment√°rios. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt457504/">https://habr.com/ru/post/pt457504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt457490/index.html">Aisioshechka de Zuckerberg - brevemente e no caso Libra</a></li>
<li><a href="../pt457494/index.html">"E se eu n√£o sei matem√°tica, sou in√∫til?" - especialistas respondem a perguntas freq√ºentes sobre profiss√µes em ci√™ncia de dados</a></li>
<li><a href="../pt457496/index.html">"Encontre as cinco diferen√ßas." Escalabilidade e diferen√ßa de gera√ß√£o - Novo lote de testes</a></li>
<li><a href="../pt457500/index.html">Como fizemos o piloto autom√°tico para uma esta√ß√£o de servi√ßo</a></li>
<li><a href="../pt457502/index.html">Como o modelo de pontua√ß√£o do RICE aprimora a prioriza√ß√£o de recursos do produto</a></li>
<li><a href="../pt457514/index.html">Nevanger</a></li>
<li><a href="../pt457516/index.html">Escrevendo um modelo de amea√ßa</a></li>
<li><a href="../pt457518/index.html">Cadeia de caixa de plasma como uma solu√ß√£o para o trilema da escalabilidade de blockchain</a></li>
<li><a href="../pt457522/index.html">Levante seu servi√ßo de lista de discuss√£o ou use solu√ß√µes prontas? O que aprendi ao longo de 5 anos no UniSender</a></li>
<li><a href="../pt457524/index.html">C√¢meras de profundidade - revolu√ß√£o silenciosa (quando os rob√¥s ver√£o) Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>