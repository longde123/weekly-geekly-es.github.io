<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛶 🧑🏽‍🤝‍🧑🏻 🏇🏾 ShIoTiny und die umliegende Welt: Anschließen von Sensoren an Binäreingänge, Kontaktsprung und andere Probleme 🤞🏻 😫 👨🏿‍🤝‍👨🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wichtige Punkte oder worum es in diesem Artikel geht 


 Ein weiterer Artikel über ShIoTiny - eine visuell programmierbare Steuerung, die auf dem ESP8...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny und die umliegende Welt: Anschließen von Sensoren an Binäreingänge, Kontaktsprung und andere Probleme</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466231/"><img src="https://habrastorage.org/webt/3n/g5/5y/3ng55yiea33i2ft7gzbcydaenka.jpeg"><br><h4 id="osnovnye-tezisy-ili-o-chem-eta-statya">  Wichtige Punkte oder worum es in diesem Artikel geht </h4><br><p>  Ein weiterer Artikel über <strong>ShIoTiny</strong> - eine visuell programmierbare Steuerung, die auf dem <strong>ESP8266-</strong> Chip basiert.  Der Artikel beschreibt die Funktionen zum Anschließen von Sensoren verschiedener Typen an die <strong>Binäreingänge</strong> des <strong>ShIoTiny-</strong> Controllers.  Darüber hinaus gibt es Antworten auf eine Reihe beliebter Fragen von Lesern früherer Artikel in der Reihe. </p><br><p>  <strong>Vorherige Serienartikel</strong> <strong><br></strong> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ShIoTiny: kleine Automatisierung, das Internet der Dinge oder „sechs Monate vor den Ferien“</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ShIoTiny: Knoten, Links und Ereignisse oder Funktionen von Zeichenprogrammen</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ShIoTiny: Nassraumlüftung (Beispielprojekt)</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projektseite</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Binäre Firmware, Controller-Schaltung und Dokumentation</a> </p><a name="habracut"></a><br><h4 id="vstuplenie-ili-otvety-na-voprosy">  Intro oder Antworten auf Fragen </h4><br><p>  Alle meine Artikel zum Thema <strong>ShIoTiny</strong> , mit Ausnahme des ersten, wurden aus Fragen von Lesern geboren, die riskierten, meine Firmware <strong>auszuprobieren</strong> . </p><br><p>  Tatsache ist, dass ich keine Gelegenheit habe, im Detail und auf einmal zu antworten.  Ein Hobby ist ein Hobby und es ist selten, dass jemand so viel Zeit darauf verwendet wie Arbeit, Hausaufgaben oder Kinder.  Ich kann es auch nicht.  Und die Fragen aus den Briefen können im Wesentlichen auf mehrere reduziert werden.  Daher ist es einfacher, einen Artikel zu schreiben, der mehrere Themen im Detail behandelt, als ein Dutzend Briefe zu schreiben. </p><br><p>  Viele Fragen betreffen das Anschließen von Sensoren verschiedener Typen und das Arbeiten mit ihnen.  Dies ist nicht überraschend: Die Arbeit mit Ausgangsrelais ist recht einfach.  Und was sie einfach nicht an die Eingänge anschließen wollen!  Es gibt viele Möglichkeiten.  Dieser Artikel ist diesem Artikel gewidmet und wird höchstwahrscheinlich dem folgenden Thema gewidmet sein: einem sehr breiten Thema - dem Anschluss von Sensoren. </p><br><p>  Bevor ich jedoch zur Biografie der wundervollen Welt der Sensoren übergehe, werde ich mir erlauben, den Habr als Medium zu verwenden, um die beliebtesten Fragen zu beantworten, die sie mir in Briefen stellen. </p><br><p>  <strong><em>Antworten auf die beliebtesten Fragen der Leser</em></strong> <strong><br></strong> </p><br><p>  Die wahrscheinlich beliebteste Frage lautet: " <strong><em>Warum unterstützen Sie PWM / DS1821 / RTC nicht ... und so weiter?"</em></strong>  ".  Ich antworte.  Denn als ich ShIoTiny entworfen habe, habe ich es nicht gebraucht.  PWM kann einfach nirgendwo auf das <strong>ShIoTiny-</strong> Board gestellt werden.  Es sind keine Beine mehr vorhanden, um <strong>RTC</strong> anzuschließen.  Usw.  Aber wenn sich das Projekt erfolgreich genug entwickelt, werde ich ein anderes Gerät mit der gleichen Programmierideologie, aber mit einem anderen Satz von Peripheriegeräten herstellen.  Natürlich werde ich einige zusätzliche Chips in ShIoTiny unterstützen, da ich beispielsweise erst gestern den Temperatursensor <strong>DS1820 / 22 unterstützt habe</strong> .  Aber du kannst die Unermesslichkeit nicht annehmen und das Unbearbeitete schieben.  Der Controller-Speicher ist wie meine Zeit nicht unbegrenzt. </p><br><p>  Die nächstbeliebteste Frage lautet: „ <strong><em>Planen Sie die Massenproduktion von ShIoTiny?</em></strong>  ".  Ich werde im Detail antworten.  <strong><em>Im Moment habe</em></strong> ich noch ein paar Boards und wenn jemand interessiert ist - schreibe, ich werde senden.  Wenn sie bis dahin bleiben, natürlich.  Serienmäßig (dh 50-100 Stück) habe ich im Moment nicht vor, es zu veröffentlichen.  Es gibt einfach keine solche Nachfrage, und 50 Boards rauszulassen ist für ein Hobby nicht so einfach und wird mich viel kosten.  Es wird viele geben, die eine Bereitschaftsgebühr erhalten möchten - die Situation kann sich ändern.  <em>Wenn also nicht alles, dann hängt vieles von der Meinung und dem Wunsch der Gesellschaft ab.</em> </p><br><p>  Eine andere Frage wurde sehr oft gestellt: „ <strong><em>Woher bekommt man die Quelle?</em></strong>  ".  Ich antworte.  Nirgendwo sonst.  Aus irgendeinem Grund kann ich sie noch nicht veröffentlichen und weiß nicht, ob ich dies in absehbarer Zukunft tun kann. </p><br><p>  Und schließlich Fragen zu <strong>MQTT-</strong> und <strong>UDP-Multicast</strong> .  Ich hoffe, einen separaten Artikel zu diesen Themen zu verfassen, da es viele Funktionen gibt.  Etwas über <strong>MQTT</strong> ist im vorherigen Artikel über das Lüftungssystem, aber alles wird dort allgemein beschrieben.  Und doch - lesen Sie die Anweisungen.  Es gibt viele Antworten, obwohl dies noch ein Entwurf ist. </p><br><p>  Dies schließt mit populären Fragen und befasst sich schließlich mit dem, wofür dieser Artikel geschrieben wurde - der erstaunlichen, schönen, beängstigenden und mysteriösen Welt der Sensoren. </p><br><h4 id="datchik--chto-eto-i-zachem-ono">  Sensor - was ist das und warum? </h4><br><p>  Jede Inschrift in einer unbekannten Sprache ist nur ein komplexes Muster für jemanden, der noch nie Buchstaben oder Hieroglyphen gesehen hat.  Es gibt keine Bilder für Blinde.  Für Gehörlose Musik.  Warum bin ich  Und die Tatsache, dass <em>Information</em> eine bedingte Anzeige eines Objekts oder Phänomens auf einem materiellen Medium ist.  Informationen ohne materielles Medium existieren nicht.  Sowie Informationen existieren nicht ohne jemanden, der sie verstehen kann. </p><br><p>  Wenn wir also möchten, dass unser <strong>ShIoTiny</strong> nicht „blind“, „taub“ und „Analphabet“ ist, müssen wir ihn lehren, Informationen über die Welt um ihn herum „ <em>wahrzunehmen</em> “ und „zu <em>verstehen</em> “ und auf dieser Grundlage bestimmte Entscheidungen zu treffen, um das zu verwalten, was benötigt wird uns Ausrüstung. </p><br><p>  Informationen über die Welt existieren in einer Vielzahl von Darstellungen und auf verschiedenen Materialträgern: Luftschwingungen - Schall und Photonenfluss - Licht;  die Konzentration von Wasserdampf in der Luft und die Temperatur der Erde;  das Vorhandensein oder Fehlen von Masse und ihre Größe.  Usw.  All dies kann uns die für die Entscheidungsfindung notwendigen Informationen liefern. </p><br><p>  Unser Mikrocontroller <strong>ESP8266</strong> - die Basis von <strong>ShIoTiny</strong> - versteht jedoch nur zwei Arten von Informationen - digitale <strong>Binärsignale</strong> von <strong>0 V</strong> bis <strong>3</strong> <strong>V</strong> und analoge Signale im Bereich von <strong>0 V</strong> bis <strong>1 V.</strong> </p><br><p>  Daher benötigen wir „ <strong>Übersetzer</strong> “ von der Sprache eines bestimmten physikalischen Phänomens oder einer bestimmten physikalischen Größe in die Sprache der elektrischen Signale, die für den Mikrocontroller <strong>ESP8266</strong> verständlich sind.  Solche " <strong>Übersetzer</strong> " werden <strong><em>Sensoren genannt</em></strong> . </p><br><p>  Genau genommen ist der <strong><em>Sensor</em></strong> in unserem Fall ein technisches Werkzeug, das Informationen über die Umgebung in elektrische Signale umwandelt, die für die elektronischen Komponenten des <strong>ShIoTiny-</strong> Controllers <strong>verständlich</strong> sind. </p><br><p>  Sensoren sind unterschiedlich.  Es gibt Tausende und Dunkelheit.  Aber wenn Sie anfangen zu verstehen, dann ist nicht alles so beängstigend.  <em>Erstens</em> interessieren uns nur Sensoren, die am Ausgang ein elektrisches Signal erzeugen.  <em>Zweitens beschränken</em> wir uns nur auf gängige Sensortypen.  Und <em>drittens</em> gibt es in der Praxis nicht so viele Arten von Signalen, die von Sensoren erzeugt werden. </p><br><p>  Von Anfang an ist alles klar.  Es ist physikalisch unmöglich, <strong>einen</strong> Sensor direkt an <strong>ShIoTiny anzuschließen</strong> , der Informationen in mechanischer, hydraulischer oder pneumatischer Form liefert. </p><br><p>  Mit "zweitens" ist auch alles klar.  Es ist unwahrscheinlich, dass jemand bestimmte schnelle Partikeldetektoren oder pH-Meter in einem geschmolzenen radioaktiven Lithium an <strong>ShIoTiny anschließt</strong> .  Nun, wenn jemand das tut, denke ich, dass seine Qualifikationen viel höher sind als meine und er diesen Artikel höchstwahrscheinlich nicht brauchen wird.  Aber die Temperatur von Wasser oder Luft, der Druck von Luft oder Wasser, Feuchtigkeit, Licht, Flüssigkeitsstand oder der Zustand der Tür (offen-geschlossen) - all dies kann sehr gut mit dem ShIoTiny-Regler in Haushaltssteuerungssystemen gemessen werden. </p><br><p>  Wir werden uns mit dem "dritten" befassen.  Welche elektrischen Signale werden normalerweise von gängigen Sensortypen ausgegeben?  Drei Haupttypen von Signalen an den Ausgängen der Sensoren können unterschieden werden: </p><br><p>  <strong>Binäre Signale</strong>  Das heißt, Signale, die nur zwei Ebenen haben - logische 0 oder logische 1. Elektrische Parameter sind nicht wichtig - sie können immer in die gewünschten Ebenen umgewandelt werden. </p><br><p>  <strong>Analoge Signale</strong> .  Das heißt, Strom oder Spannung variieren je nach gemessenem Parameter in einem bestimmten Wertebereich. </p><br><p>  <strong>Digitale Signale</strong> .  Hierbei handelt es sich um Sensoren, die über ein bestimmtes Protokoll mit Mikrocontrollern kommunizieren. </p><br><p>  Hier finden Sie möglicherweise alle Optionen, die mit <strong>ShIoTiny</strong> verbunden werden <strong>können</strong> .  Natürlich gibt es auch Sensoren mit einem Frequenzausgang, einem Phasenausgang und Sensoren mit allen Arten von exotischen Ausgangssignalen.  Da es jedoch <strong>unmöglich ist</strong> , sie direkt mit <strong>ShIoTiny</strong> zu verbinden <strong>, werden</strong> wir jetzt nicht darüber sprechen. </p><br><h4 id="binarnye-vhody-shiotiny">  Binäreingänge ShIoTiny </h4><br><p>  Beginnen wir mit dem Einfachsten - mit den <strong>ShIoTiny-Binäreingängen</strong> .  Sie werden durch <strong>Input1</strong> , <strong>Input2</strong> und <strong>Input3 angezeigt</strong> .  Da diese Eingänge absolut identisch sind, betrachten wir den Eingang <strong>Input1</strong> .  Alles, was über diesen Eingang gesagt wird, gilt auch für die beiden anderen <strong>Binäreingänge</strong> - <strong>Eingang2</strong> und <strong>Eingang3</strong> . </p><br><p>  Die binäre <strong>ShIoTiny-</strong> Eingangsschaltung <strong>ist</strong> in der Abbildung dargestellt.  Machen Sie sofort eine Reservierung, die Schaltung mit einem kleinen Fehler - es war notwendig, einen <strong>10K-</strong> Widerstand an einen <strong>1K-</strong> Widerstand anzuschließen.  Dies hat jedoch keinen Einfluss auf den Betrieb des Geräts und ist wunderbar.  Warum gibt es so viele Elemente in einer binären Eingangsschaltung?  Eine solche Frage wurde mir auch gestellt.  Ich werde versuchen, es zu beantworten. </p><br><p><img src="https://habrastorage.org/webt/eo/ff/qh/eoffqhr5eib1g5jwc1wa5mojsyc.gif" alt="Bild"></p><br><p>  Die <strong>Binäreingabe</strong> in <strong>ShIoTiny</strong> funktioniert bei „ <em>trockenen</em> “ und „ <em>nassen</em> “ Kontakten.  Zusätzlich bietet die Schaltung einen Überspannungsschutz ( <strong>dh</strong> wenn beispielsweise 5 Volt anstelle von 3 Volt an <strong>Eingang</strong> 1 gelangen). </p><br><h4 id="zaschita-binarnogo-vhoda">  Binäreingangsschutz </h4><br><p>  <strong>Der Überspannungsschutz</strong> , der an allen <strong>Binäreingängen</strong> von <strong>ShIoTiny durchgeführt wird</strong> , <strong>schützt</strong> den Controller natürlich nicht vor einem Burnout, wenn an seinen Eingang eine Spannung von ~ 220 V angelegt wird.  Aber vom Erreichen der Eingänge <strong>Input1,2,3</strong> <strong>+ 5V</strong> oder sogar <strong>+12V</strong> - dieser Schutz spart vollständig. </p><br><p>  Ein solcher Schutz funktioniert sehr einfach und kann nicht nur mit dem <strong>ESP8266</strong> , sondern auch mit anderen Mikrocontrollern angewendet werden. </p><br><p>  Berücksichtigen Sie zwei <strong>Schutzoptionen</strong> : Wenn <strong>Sie eine</strong> Spannung von <strong>+5 V</strong> und <strong>-5</strong> V an den Neutralleiter ( <strong>Masse</strong> ) des Eingangs <strong>Eingang1 anlegen</strong> . </p><br><p>  Wenn die Spannung am Eingang <strong>Eingang1</strong> normal ist, sind die Schutzdioden <strong>D1</strong> und <strong>D2</strong> geschlossen, da sie in die entgegengesetzte Richtung eingeschaltet sind. </p><br><p>  Sobald die Spannung an <strong>Eingang 1</strong> + 3 <strong>V</strong> überschreitet (z. B. haben wir <strong>Eingang 1</strong> mit <strong>+ 5 V</strong> <strong>kurzgeschlossen</strong> ), öffnet die <strong>D1-</strong> Diode und zieht den Eingang des <strong>GPIO-</strong> Controllers auf <strong>+ 3</strong> V, wodurch verhindert wird, dass die Spannung am <strong>GPIO ESP8266</strong> über <strong>3</strong> V ansteigt.  Tatsächlich ist die Spannung etwas höher als <strong>3</strong> V (3,2 V oder 3,3 V) - dies ist jedoch nicht wichtig.  Der Eingang des Mikrocontrollers brennt nicht und dies ist wichtig. </p><br><p>  Sobald die Spannung am <strong>Eingang 1</strong> negativ wird (z. B. haben wir den Eingang auf <strong>-5</strong> <strong>V</strong> <strong>kurzgeschlossen</strong> ), öffnet die <strong>D2-</strong> Diode und zieht den <strong>Eingang 1</strong> auf <strong>Masse</strong> <strong>0 V</strong> , ohne dass die Spannung am <strong>GPIO ESP8266-</strong> Eingang unter <strong>0 V</strong> fällt.  Tatsächlich ist die Spannung etwas niedriger als <strong>0 V</strong> (-0,2 <strong>V</strong> oder -0,3 <strong>V</strong> ) - aber dies ist wiederum nicht wichtig.  Der Mikrocontroller-Eingang brennt nicht. </p><br><p>  Der Widerstand <strong>1K</strong> ist ein Strombegrenzer, so dass während des Schutzbetriebs kein Kurzschluss auftritt.  Die Ströme durch sie sind klein.  Wenn wir in unserem Beispiel beispielsweise Eingang <strong>1</strong> <strong>+ 5 V</strong> an den Eingang <strong>anlegen, beträgt</strong> der Strom durch den <strong>1K-</strong> Widerstand etwa 2 <strong>mA</strong> .  Bei einer negativen Spannung von <strong>-5 V</strong> am Eingangseingang1 <strong>beträgt der</strong> Strom durch den <strong>1K-</strong> Widerstand ca. <strong>5 mA</strong> . </p><br><p>  Wenn jemand nicht versteht, warum sich die Dioden öffnen und schließen, empfehle ich, das Buch <strong>"Electronics Step by Step" von R. A. Svorenya zu lesen</strong> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Im Internet ist es zum Beispiel hier</a> .  Ich rate besonders Anfängern - die Sprache dieses Buches ist einfach und es gibt viele Beispiele. </p><br><h4 id="kakie-byvayut-kontakty">  Was sind die Kontakte </h4><br><p>  Also, mit dem Schutz aussortiert.  <strong>Kommen</strong> wir zu einem weiteren grundlegenden Thema - dem Verbinden des <strong>ShIoTiny-Binäreingangs mit Binärsensoren</strong> . </p><br><p>  Wie bereits erwähnt, sind binäre Sensoren Sensoren, deren Ausgang zwei Zustände hat - null und eins.  Das ist aber logisch.  Physikalisch gibt es zwei Optionen für die binären Sensorausgänge: " <strong>Trockenkontakt</strong> " und " <strong>Nasskontakt</strong> ".  Überlegen Sie, was es ist und womit es gegessen wird. </p><br><p>  Ein „ <strong>trockener Kontakt</strong> “ ist ein Kontakt, der keine eigene Spannungsquelle hat.  Das heißt, nur zwei beliebige Metallleiter, die miteinander kurzgeschlossen und geöffnet werden können.  Diese Definition umfasst die Masse der Sensoren - Tasten, Schalter, Schwimmersensoren für den Flüssigkeitsstand, Reedschalter (Magnetfeldsensoren) usw.  Bei Stromkreisen werden <strong>normalerweise offene</strong> „ <strong>trockene Kontakte</strong> “ normalerweise wie in der Abbildung gezeigt angezeigt. </p><br><p><img src="https://habrastorage.org/webt/vt/rc/ya/vtrcyaeq7yo2o4hdju-2edxx_7w.png" alt="Bild"></p><br><p>  Normalerweise geöffnet - dies bedeutet offen, wenn kein externer Einfluss vorliegt - die Taste wird nicht gedrückt, der Schalter ist nicht eingeschaltet, der Reed-Schalter hat keinen Magneten in der Nähe ... </p><br><p>  Es gibt auch <strong>normalerweise geschlossene</strong> " <strong>trockene Kontakte</strong> ".  Bei Stromkreisen werden sie normalerweise wie in der Abbildung gezeigt angezeigt. </p><br><p><img src="https://habrastorage.org/webt/ze/mj/lj/zemjljubtoz6y8gldzq6gb5qznq.png" alt="Bild"></p><br><p>  Im Gegensatz zu normalerweise offenen, normalerweise geschlossenen " <strong>trockenen Kontakten</strong> " ohne äußere Einflüsse sind geschlossen. </p><br><p>  Sowohl diese als auch andere " <strong>trockene Kontakte</strong> " können sicher an die Eingänge <strong>Input1,2,3</strong> Controller <strong>ShIoTiny angeschlossen werden</strong> .  Sensoren mit einem <strong>Trockenkontaktausgang</strong> werden wie in der Abbildung gezeigt <strong>an die ShIoTiny-Binäreingänge angeschlossen</strong> . </p><br><p><img src="https://habrastorage.org/webt/8j/fs/8i/8jfs8i8xydqsyuirvrrtihvotly.gif" alt="Bild"></p><br><p>  Wenn der „ <strong>Trockenkontakt</strong> “ von <strong>Eingang 1</strong> geschlossen ist, wird eine Spannung von ungefähr Null Volt an den <strong>Reglereingang</strong> angelegt (genauer gesagt 0,3 Volt aufgrund eines Fehlers in der Schaltung), da der „ <strong>Trockenkontakt</strong> “ den Reglereingang über einen durch <strong>1K-</strong> und <strong>10K-</strong> Widerstände gebildeten Teiler gegen Masse schließt.  In diesem Fall setzt der <em>Knoten</em> <strong>Input1</strong> die Ausgabe des Geräts. </p><br><p>  Wenn umgekehrt der <strong>Trockenkontakt von</strong> <strong>Eingang1</strong> offen ist, werden dem <strong>Reglereingang</strong> ungefähr drei Volt zugeführt, da der <strong>Reglereingang</strong> über einen <strong>10K-</strong> Widerstand auf die Versorgungsspannung gezogen wird.  In diesem Fall setzt der Knoten <strong>Input1</strong> an seinem Ausgang Null. </p><br><p>  All diese detaillierte Beschreibung ist für Neugierige.  In der unteren Zeile haben wir Folgendes: Wenn wir einen Sensor mit einem Ausgang vom Typ „ <strong>Trockenkontakt</strong> “ an <strong>Eingang 1 angeschlossen haben</strong> , ist der Ausgang des Knotens <strong>Eingang1 bei</strong> geöffnetem Kontakt Null, und wenn der Kontakt geschlossen ist, ist der Ausgang desselben Knotens Eins.  Ähnliches gilt für Eingänge und Knoten <strong>Input2</strong> und <strong>Input3</strong> . </p><br><p>  Gehen wir weiter zu <strong>nassen Kontakten</strong> . </p><br><p>  Ein " <strong>nasser Kontakt</strong> " ist ein Kontakt, der in mindestens einer seiner Positionen eine eigene Spannungsquelle hat.  Zum Beispiel der Ausgang einer anderen Steuerung oder Logikschaltung;  Glühbirnen-Stromleitung und so weiter.  Hier gibt es möglicherweise viele Optionen.  Aber fast alle von ihnen ermöglichen direkt oder mit Hilfe mehrerer Details den Abgleich der <strong>Binäreingänge Input1,2,3</strong> mit dem Geräteausgang - „ <strong>Wet Contact</strong> “. </p><br><p>  Beginnen wir mit dem einfachsten - <strong>Anpassen</strong> des Eingangs <strong>Input1</strong> an den Ausgang des Sensors oder Mikroschaltkreistyps " <strong>Open Collector</strong> " oder " <strong>Open Drain</strong> ". </p><br><p>  In <strong><em>unserem Fall</em></strong> ist diese Schaltung sogar völlig analog zum Anschließen eines Sensors mit einem <strong>Trockenkontaktausgang</strong> .  Nur die Rolle des Kontakts übernimmt der Transistor. </p><br><p>  Das Schema einer solchen Verbindung ist in der Abbildung dargestellt.  Das Konzept des Begriffs „ <strong>offener Kollektor</strong> “ oder „ <strong>offener Drain</strong> “ besteht im Wesentlichen darin, dass der <strong>Emitter</strong> (oder die <strong>Source</strong> ) des Ausgangstransistors mit der „ <strong>Masse</strong> “ (häufig direkt im Mikrokreis) und der <strong>Kollektor</strong> (oder <strong>Drain</strong> ) mit dem „Schenkel“ des Mikrokreises und mehr verbunden ist zu nichts. </p><br><p>  Wie dieses Schema funktioniert, ist für einen Anfänger verständlich (kein imaginäres Gas, sondern eine Person!).  Sobald sich der Transistor im Mikrokreis öffnet, schließt er den Eingang <strong>Eingang1</strong> gegen Masse und alles funktioniert analog zu einem „ <strong>trockenen</strong> “ Kontakt. </p><br><img src="https://habrastorage.org/webt/tl/__/nh/tl__nhsp-3hwmb1eztprk1lxo0g.gif"><br><p>  Leider haben nicht alle Mikrochips und Sensoren eine so wunderbare Leistung mit offenem Kollektor oder Drain.  Viele, wenn nicht die meisten Chips und Sensoren haben einen aktiven Ausgang.  Dies bedeutet, dass wenn wir eine logische Einheit am Ausgang haben, der Ausgang auf die Versorgungsspannung „hochgezogen“ wird und wenn der Ausgang eine logische Null ist, der Ausgang auf Masse „hochgezogen“ wird.  Die Ausgabe eines solchen Chips ist in der folgenden Abbildung dargestellt.  Natürlich ist alles vereinfacht. </p><br><img src="https://habrastorage.org/webt/ll/9p/ca/ll9pcawme5kebyua--xi9hscacu.gif"><br><p>  Was sollen wir tun, wenn der Mikrokreis oder Sensor, den wir an <strong>Eingang 1</strong> anschließen <strong>möchten,</strong> einen so aktiven Ausgang hat? </p><br><p>  Hier gibt es zwei Möglichkeiten, die vom Wert der Versorgungsspannung der Mikroschaltung oder des <strong>Vcc-</strong> Sensors abhängen. </p><br><p>  Wenn die Versorgungsspannung des Chips oder des <strong>Vcc-</strong> Sensors mit der des <strong>ESP8266 übereinstimmt</strong> ( <strong>dh</strong> 3 Volt), können Sie diesen Ausgang einfach mit dem Eingang <strong>Input1 verbinden</strong> , der in der vorherigen Abbildung dargestellt ist. </p><br><p>  Was aber, wenn die Stromversorgung des Sensors oder der Mikroschaltung <strong>+ 5V</strong> oder <strong>+ 12V</strong> beträgt?  In unserem Fall können Sie dies ganz einfach tun, indem Sie die Schottky-Diode einschalten, wie in der folgenden Abbildung gezeigt. </p><br><img src="https://habrastorage.org/webt/xo/ig/mh/xoigmhvkz7mjgd4htvm2ygddtq8.gif"><br><p>  Und noch eine Nuance: Alle Schaltkreise mit einem „ <strong>nassen</strong> “ Kontakt geben uns ein <strong>inverses Signal</strong> .  Das heißt, wenn sich die Logikeinheit am Ausgang des Sensors oder der Mikroschaltung befindet, setzt der <strong>Eingang1-</strong> Knoten den Ausgang auf Null.  Umgekehrt.  Dies wird jedoch programmgesteuert korrigiert - setzen Sie einfach den Wechselrichterknoten in die Schaltung ein.  All dies ist in der Abbildung dargestellt. </p><br><p><img src="https://habrastorage.org/webt/va/xh/te/vaxhteujl9fg9mlmom0ex2hijgm.png" alt="Bild"></p><br><p>  Das sind in der Tat alle grundlegenden Dinge, die Sie über den Anschluss von Sensoren an die <strong>Binäreingänge Input1,2,3</strong> wissen <strong>müssen</strong> . </p><br><p>  Natürlich gibt es theoretisch auch andere Möglichkeiten, aber ich habe die einfachsten und gebräuchlichsten Möglichkeiten aufgezeigt, Sensoren mit <strong>Trockenkontaktausgängen</strong> und aktiven Niederspannungsausgängen zu verbinden. </p><br><h4 id="trepet-kontaktov">  Nervenkitzel des Kontakts </h4><br><p>  Kontakte zittern.  Nicht aus Angst vor dem Schöpfer des Geräts, sondern aus der Tatsache, dass sie belastbar sind.  Wenn Sie die Taste drücken, können die Kontakte 5-7 Mal geschlossen werden, bevor sie stabil geschlossen werden.  Das gleiche Phänomen tritt auf, wenn die Tasten losgelassen werden.  Und dieses Phänomen nennt man " <strong>Kontaktsprung</strong> ". </p><br><p>  <strong>Kontaktsprung</strong> ist der Fluch aller mechanischen Kontaktsensoren - Schalter, Knöpfe, Reedschalter und so weiter.  Das unangenehme Geschwätz ist, dass es falsche Klicks oder falsche Freigaben einer Schaltfläche oder eines Kontakts verursacht. </p><br><p>  Es gibt verschiedene Möglichkeiten, mit diesem unangenehmen Phänomen umzugehen.  Die wahrscheinlich älteste Art zu kämpfen ist der <strong>Auslöser</strong> .  Bei dieser Methode wird eine Taste mit einem Schaltkontakt und einem normalen RS-Trigger verwendet, die gemäß dem in der Abbildung gezeigten Schema eingeschaltet werden. </p><br><p><img src="https://habrastorage.org/webt/1s/lm/yo/1slmyoteklx46ct9nfgjt-hevtk.png" alt="Bild"></p><br><p>  Wie funktioniert es  Sehr einfach.  Ein Trigger hat zwei Zustände.  Während die Taste für den Eingang <strong>R des</strong> Triggers geschlossen ist, wird der Ausgang <strong>Q des</strong> Triggers auf Null gesetzt. </p><br><p>  Wir haben den Knopf gedrückt - bis der mittlere Kontakt des Knopfes den Boden berührt - nichts ändert sich, der Ausgang des Triggers ist Null.  Sobald der mittlere Kontakt der Taste den unteren Kontakt derselben Taste berührt und den Eingang des Triggers <strong>S</strong> gegen Masse geschlossen hat, erscheint einer am Ausgang des Triggers.  Und diese Einheit bleibt, während Kontakte "klappern".  Um den Triggerausgang wieder auf Null zu stellen, muss der Triggereingang <strong>R</strong> gegen Masse kurzgeschlossen werden!  Dieses Schema funktioniert genauso, wenn Sie die Schaltfläche loslassen. </p><br><p>  Können wir auf <strong>ShIoTiny</strong> eine solche Schaltung <strong>machen</strong> ?  Ja, kein Problem!  In der Abbildung ist es gezeigt. </p><br><p><img src="https://habrastorage.org/webt/hz/p2/yg/hzp2yg7lx4zo7i6ko8lyok3iikk.png" alt="Bild"></p><br><p>  Aber zwei ihrer drei Eingänge für einen Sensor ausgeben ?!  Außerdem haben nicht alle Sensoren einen Schaltkontakt! </p><br><p>  Nein, wir werden den anderen genialen Theoretiker V.I.  Uljanow! </p><br><p>  Die zweite und heute wahrscheinlich häufigste Art, mit Kontaktsprung umzugehen, ist ein <strong>Softwarefilter</strong> . </p><br><p>  Was steckt hinter diesen klugen Worten?  Und wieder - nichts kompliziertes.  Stellen Sie sich vor, wir werden nicht auf „kurze“ Änderungen im Kontaktstatus reagieren.  Wenn wir zum Beispiel Null von der Taste ablesen, dann platzen wir kurz (sagen wir, die Dauer beträgt weniger als 0,3 Sekunden) <del>  wir werden hämmern </del>  Hör auf zu reagieren.  Und nur wenn wir eine Taste für 0,3 Sekunden haben, wird kontinuierlich eine Einheit ausgegeben - wir werden darauf reagieren.  Das Gleiche gilt, wenn Sie den Status einer Schaltfläche von eins auf null ändern. </p><br><p>  Das heißt, im Wesentlichen werden wir den Übergangsprozess durch Herausfiltern kurzer Impulse bestehen.         .         RS-! </p><br><p>     ?  <strong>ShIoTiny</strong>  -,          . </p><br><p><img src="https://habrastorage.org/webt/-t/tv/hq/-ttvhqvwjzrj1_8f0rzuztiugz4.png" alt="Bild"></p><br><p>  <strong>Delay0/1</strong>      ,     <strong>0.4</strong> . </p><br><p> ,          .   ,   ,      . </p><br><h4 id="zaklyuchenie">  Fazit </h4><br><p>       ,       — ,     ,       . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im nächsten Artikel untersuchen wir den Anschluss von Sensoren mit einem analogen Ausgangssignal an den </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADC-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eingang </font><font style="vertical-align: inherit;">.</font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie immer Vorschläge, Wünsche, Fragen, Tippfehler usw. per E-Mail: shiotiny@yandex.ru </font></font></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466231/">https://habr.com/ru/post/de466231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466215/index.html">Modellorientiertes Design. Erstellung eines zuverlässigen Modells am Beispiel eines Luftfahrtwärmetauschers</a></li>
<li><a href="../de466217/index.html">Generieren von Dokumenten mit ONLYOFFICE DocumentBuilder</a></li>
<li><a href="../de466223/index.html">Saubere Zersetzung</a></li>
<li><a href="../de466227/index.html">Knotenorientierte Programmierung</a></li>
<li><a href="../de466229/index.html">Wie man zehn Schachteln Watte kauft und keinen Fehler macht</a></li>
<li><a href="../de466235/index.html">Munch in einem äquidistanten Scan und Meyerhold, der den Roten Platz zerstörte - Denis Semenov auf VR-Kunst</a></li>
<li><a href="../de466237/index.html">Wie der grüne Junior seinen Hot-Reloader schrieb</a></li>
<li><a href="../de466247/index.html">Introvertiertes Interview</a></li>
<li><a href="../de466249/index.html">Schreiben einer Schlange für Android in Kivy, Python</a></li>
<li><a href="../de466251/index.html">Das Projekt von Soft Launch auf 1 Million US-Dollar Umsatz pro Monat steigern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>