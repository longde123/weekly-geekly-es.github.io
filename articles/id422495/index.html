<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☪️ 🦇 👨🏾‍✈️ Kisah tentang ikon lama. Teka-teki 18 warna. Warna transparan dan terbalik 📺 🧛🏿 😂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa orang sekarang tidak peduli dengan satu atau dua kilobytes tambahan. Tetapi ada orang-orang seperti itu, dan catatan ini ditulis hanya untuk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kisah tentang ikon lama. Teka-teki 18 warna. Warna transparan dan terbalik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422495/"> Beberapa orang sekarang tidak peduli dengan satu atau dua kilobytes tambahan.  Tetapi ada orang-orang seperti itu, dan catatan ini ditulis hanya untuk orang yang sangat <s>aneh</s> .  ) <br><br>  Dalam kasus-kasus terisolasi ketika saya perlu merekam ikon ekspresif (.ico) dari aplikasi dan pada saat yang sama harus menyimpan byte, saya menggunakan hack berikut: Saya merekam gambar dalam mode 16-warna - tapi!  - tidak dalam palet tetap yang biasa, tetapi dalam yang adaptif. <br><br>  Apa yang diberikannya?  Ikon 48x48, transparansi 1-bit, 256 warna = 3774 byte, juga dalam 16 warna = 1662 byte.  Keuntungannya adalah 2 kilobyte, dengan sedikit penurunan kualitas gambar. <br><br><img src="https://habrastorage.org/webt/7r/hi/ph/7rhiphjjh6lvnh-k1qtcfdhzpmm.png"><br><br>  Sebuah contoh  Dari kiri ke kanan: <br><br><ul><li>  256 warna asli </li><li>  palet 16-warna standar tetap (dan di sini saya mengambil palka selama beberapa menit sehingga gambar memiliki setidaknya beberapa penampilan yang layak) </li><li>  palet 16-warna adaptif + menetas (dithering). </li></ul><br>  Bagaimana cara kerjanya?  Anehnya, ikon 16 warna selalu membawa palet.  Yaitu, 99,9% ikon lama membawa tabel warna 64-byte yang persis sama (4 byte per warna).  Dan, ya - ternyata itu bisa diprogram ulang. <br><a name="habracut"></a><br>  Sayangnya, saya tidak terbiasa dengan program ini, yang sepenuhnya dapat bekerja dengan ikon-ikon tersebut.  Oleh karena itu, inilah resep untuk cara membuat "ikon" inferior: ambil IrfanView, unggah gambar ke dalamnya: baik warna 16 yang sudah disiapkan sebelumnya, atau kurangi jumlah warna di dalamnya: menu - gambar - kurangi kedalaman warna ... - 16 warna.  Sekarang: menu - save as ... - pilih format .ico.  Hanya itu semua  Tidak, tidak semua: Irfan View tidak tahu cara bekerja dengan transparansi, tetapi harus dipulihkan secara manual di program lain.  Microangelo Studio dapat memuat dan mengedit ikon tersebut (sayangnya, itu tidak memungkinkan membuat perpustakaan seperti itu dari awal, sama seperti membuat ikon tersebut dari awal).  Kami memuat ikon ke Microangelo dan ... mungkin kami akan segera menerima jendela peringatan tentang "palet yang salah" - apa artinya ini dalam praktiknya akan dijelaskan nanti.  Dengan menggunakan alat "isi" dan "pensil", kami menandai zona transparan;  tuliskan;  selesai! <br><br>  Itulah yang saya lakukan sebelumnya, sekitar sepuluh tahun yang lalu.  Sekarang, setelah dengan hati-hati melihat palet Microangelo, saya punya pertanyaan.  Apa palet aneh ini, 18 warna?  Bagaimana Anda bisa menyimpan 18 warna dalam file?  Jumlahnya tidak bulat, tuan-tuan, programmer tidak melakukan ini;  tidak nyaman bagi mereka.  )) Dapat dilihat bahwa dalam palet ada 16 warna solid dan dua warna layanan: "transparan" dan "terbalik".  "Invers" seperti apa?  - jika warna seperti itu terjadi, itu menampilkan negatif dari apa yang ada di bawahnya;  ini paling sering digunakan dalam kursor;  dan kursor, pada intinya dan dalam struktur file, juga merupakan ikon.  Tapi bagaimana semua warna ini disimpan?  Jika titik gambar biasa dikemas dalam 4 bit (16 warna), maka transparansi hanya dapat disimpan sebagai bitmask terpisah (1 bit untuk setiap titik gambar).  Oke, di mana inversi disimpan?  Topeng lain, atau apa?  Tidak ekonomis, tapi mungkin ... Mari kita hitung. <br><br>  Ikon 48x48, 16 warna, 1 gambar.  Ukuran file adalah 1662 byte.  Apa isinya?  Aku samar-samar membayangkan seluk-beluknya, tetapi mencoba untuk mengetahuinya.  Bagian utama, gambar itu sendiri: 48 * 48/2 = 1152 byte.  Palet: 16 * 4 = 64 byte.  Topeng transparansi adalah 48 * 48/8 = 288 byte.  Header .ico, secara resmi = 6 byte.  Deskripsi frame (1 pc.) Dari dokumentasi = 16 byte.  Total: 1152 + 64 + 288 + 6 + 16 = 1526. Mungkin ada sesuatu yang lain, karena ukuran file sebenarnya lebih besar - tetapi itu tidak masalah;  Hal lain yang penting, sisa dari "inkonsistensi" kecil: 136 byte, dan itu jelas tidak memungkinkan menempatkan bit mask lain berukuran 288 byte.  Jadi ... warna terbalik entah bagaimana tertanam dalam gambar itu sendiri.  Mungkin sekarang Anda bisa menebak sendiri bagaimana mereka melakukannya? <br><br>  Dan mereka melakukannya, rupanya, seperti ini: di Windows asli (tampaknya, dimulai dengan Win 95OSR2 sepenuhnya, dan di Win XP dan yang lebih baru sudah sebagian), dalam ikon dan kursor, secara tegas - tidak ada warna transparan yang nyata.  Jika topeng alpha menunjukkan: titik kursor / ikon saat ini adalah "transparan" - warna di bawah kursor / ikon diambil dan XORed ("eksklusif" atau ""; mungkin hanya ada pengurangan) - perhatian!  - dengan warna titik saat ini diambil dari palet ikon. <br><br>  Apa itu  Jika itu adalah warna pertama (hitam dalam palet tetap), XOR tidak melakukan “apa-apa” dengan latar belakang - warnanya menjadi transparan.  Jika itu adalah warna terakhir (dalam palet tetap - putih) - warnanya berubah sepenuhnya, berubah menjadi negatif.  Ini adalah seluruh rahasia bagaimana "18 warna" disimpan ... Yaitu, sekali lagi: "transparan" = hitam (+) topeng alpha, "terbalik" = putih (+) topeng alpha.  Dan sekarang - mari kita bicara tentang gangguan. <br><br>  Peringatan yang disebutkan di atas oleh Microangelo menyatakan: "Anda tidak memiliki warna putih dan hitam penuh di palet, bekerja dengan transparansi akan salah!"  Memang, palet adaptif kami dapat melakukannya tanpa hitam atau putih.  Lalu bagaimana transparansi akan berjalan?  Oh, persis seperti yang kita harapkan: itu akan mengambil beberapa warna dari palet (misalnya, hijau), "XOR" dengan latar belakang, dan kita akan mendapatkan warna ungu yang indah alih-alih transparansi.  )) Atau contoh lain - hitam tidak sengaja jatuh ke tempat warna terakhir di palet: dan "inversi" berubah menjadi transparansi penuh yang biasa. <br><br><img src="https://habrastorage.org/webt/ri/69/um/ri69um6yqmwzvzwbbtywqwimqpg.png"><br><br>  <i>Contoh: di sebelah kiri adalah palet standar, di sebelah kanan diprogram ulang.</i>  <i>Di sebelah kiri, transparansi (P) dan inversi (I) berjalan sebagaimana mestinya;</i>  <i>di sebelah kanan - jelas tidak.</i> <br><br>  Namun, kita dapat mengamati semua pesona ikon ini hanya di Windows asli.  Sistem operasi modern, seperti Win 10, mengabaikan warna palet, dan bit mask "transparansi" selalu berfungsi seperti transparansi dalam bentuknya yang paling murni: tidak ada XOR, dan juga tidak ada inversi.  Namun, dalam mekanisme tampilan kursor, masih ada kompatibilitas - rangkaian ekonomis lama yang baik bekerja di sana;  "Hangat, lampu", dan ... sedikit orang yang mengerti dan membutuhkan. <br><br><img src="https://habrastorage.org/webt/o_/r9/lo/o_r9lonhiwt4dyhaecuvewmsapw.png"><br><br>  <i>Contoh: tampilan berbeda dari ikon yang sama di Windows XP dan Windows 7.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422495/">https://habr.com/ru/post/id422495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422483/index.html">MIS. Penyisipan dan organ jarak jauh</a></li>
<li><a href="../id422485/index.html">Cara menyimpan uang ketika memulai bisnis di AS: pendaftaran perusahaan, kantor, akuntansi dan promosi</a></li>
<li><a href="../id422487/index.html">Panduan Cepat Variabel CSS (Gunakan Kasus, Sintaks, dan Contoh)</a></li>
<li><a href="../id422491/index.html">Uang memutuskan. “Kami memiliki tiga pengembang, tetapi kami tidak tahu bagaimana cara kerjanya”</a></li>
<li><a href="../id422493/index.html">Kubernetes (k8s) + Helm + GitLab CI / CD. Sebarkan dengan benar</a></li>
<li><a href="../id422497/index.html">ICANN telah menerbitkan panduan terperinci tentang apa yang diharapkan ketika meningkatkan KSK di zona akar</a></li>
<li><a href="../id422499/index.html">Sekali lagi tentang komponen web ...</a></li>
<li><a href="../id422501/index.html">Proses teknologi baru untuk produksi microchip semakin ditunda - mengapa?</a></li>
<li><a href="../id422507/index.html">PHP 7.3. Apa yang baru?</a></li>
<li><a href="../id422509/index.html">Ringkasan buku "Never Eat Alone"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>