<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∂ üë©‚Äçüë©‚Äçüëß‚Äçüëß ü§∏üèæ Aplikasi Arm Mbed OS. Penyetelan yang bagus üë≥üèø üõ∂ ü§úüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setelah menggunakan Arm Mbed OS, dimungkinkan untuk mengedipkan LED , tiba saatnya untuk menguji dan mengkonfigurasi layanan penting lainnya. Berikut ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplikasi Arm Mbed OS. Penyetelan yang bagus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422413/"><p><img src="https://habrastorage.org/webt/db/tg/fq/dbtgfq4owssxgshqlazk5lwycxm.png" alt="LNDC1"></p><br><p>  Setelah menggunakan <strong>Arm Mbed OS,</strong> dimungkinkan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengedipkan LED</a> , tiba saatnya untuk menguji dan mengkonfigurasi layanan penting lainnya.  Berikut ini dijelaskan: </p><br><ul><li>  <strong>Teknologi</strong> Konfigurasi <strong>Mbed</strong> </li><li>  Mengapa sulit untuk beralih ke <strong>C ++</strong> di <strong>RTOS</strong> biasa </li><li>  Bagaimana cara menyimpan memori dalam <strong>RTOS</strong> </li><li>  Bagaimana interupsi diorganisasikan dalam <strong>Mbed OS</strong> </li><li>  Daripada itu nyaman untuk men-debug <strong>OS Mbed</strong> </li><li>  Bagaimana menyingkirkan lapisan tambahan abstraksi <strong>SDK</strong> </li></ul><a name="habracut"></a><br><p>  <em>Kami terus berkenalan dengan teknologi pemrograman mikrokontroler keluarga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MKE18F</a> menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ARM Mbed OS</a></em> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel pertama</a> </li></ul><br><h2 id="tehnologiya-konfigurirovaniya-mbed">  Teknologi Konfigurasi Mbed </h2><br><p>  Komponen penting dari proyek Mbed adalah <strong>konfigurasi otomatis</strong> dan sistem perakitan, baik <strong>online</strong> maupun <strong>offline</strong> , mis.  secara lokal di komputer pengguna.  Diusulkan untuk mengonfigurasi dengan mengedit <strong>file .json</strong> dengan nama khusus.  Kemudian, skrip dalam proyek <strong>Python</strong> mengubah file-file ini menjadi file header, file ruang kerja dari IDE yang dipilih pengguna, file perintah linker, dan file pendukung lainnya. </p><br><p>  Tetapi masalah dari metode yang dijelaskan adalah dalam opacity dari sudut pandang teks sumber, karena sangat sulit bagi kita untuk melacak di mana dan apa perubahan sistem konfigurasi dalam sumber.  Di sisi lain, dalam kasus kami tidak ada motif untuk mendukung kemampuan proyek untuk ditransfer secara otomatis ke berbagai IDE. </p><br><p>  Karena itu, diputuskan untuk meninggalkan pendekatan ini.  Seperti yang dinyatakan dalam artikel sebelumnya, itu hanya dibentuk menjadi proyek online untuk <strong>IDE IAR</strong> , tumpukan file yang tidak terstruktur diperoleh di ruang kerja IDE, kemudian mereka sistematis dan tidak perlu dibuang.  Akibatnya, Anda tidak perlu lagi melakukan konfigurasi melalui file <strong>.json</strong> dan hanya ada tiga tempat khusus di mana parameter yang mempengaruhi konfigurasi <strong>Mbed berada</strong> : </p><br><ul><li>  <strong>Opsi penyusun</strong> IDE </li><li>  <strong>File batcher MKE18F512xxx16_flash.icf</strong> </li><li>  File <strong>tajuk mbed_config.h</strong> </li></ul><br><p>  Dalam file <strong>mbed_config.h</strong> , <strong>Anda</strong> dapat menghitung sekitar 130 definisi, yang pada awalnya sangat menjengkelkan.  Tetapi untungnya, sebagian besar dari mereka berhubungan dengan tumpukan protokol nirkabel yang saat ini tidak digunakan dalam proyek.  Untuk kenyamanan, entri diurutkan sehingga yang sebenarnya ditempatkan di atas.  Awalnya, definisi untuk berbagai modul dalam file <strong>mbed_config.h</strong> terletak secara acak, tetapi setelah mengurutkannya terlihat seperti ini: </p><br><div class="spoiler">  <b class="spoiler_title">Buka</b> <div class="spoiler_text"><pre><code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> __MBED_CONFIG_DATA__ <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __MBED_CONFIG_DATA__ // <span class="hljs-type"><span class="hljs-type">Configuration</span></span> parameters <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_RTOS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_ALL_STATS_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> //<span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">DEVICE_SLEEP</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>       <span class="hljs-type"><span class="hljs-type">SLEEP</span></span>      <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_MAIN_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_DEFAULT_SERIAL_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_ALL_THREADS_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_FILENAME_CAPTURE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_ERROR_HIST_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_FORCE_NON_COPYABLE_ERROR</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_MAX_ERROR_FILENAME_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_POLL_USE_LOWPOWER_TIMER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">3000000</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_BUFFERED_SERIAL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_CONVERT_TTY_NEWLINES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PLATFORM_STDIO_FLUSH_AT_EXIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:platform <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_RXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_DRIVERS_UART_SERIAL_TXBUF_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:drivers <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_EVENTSIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_HIGHPRIO_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_SHARED_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_EVENTS_USE_LOWPOWER_TIMER_TICKER</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:events <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_DEBUG_AT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_RANDOM_MAX_START_DELAY</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_CELLULAR_USE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:cellular <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_FILESYSTEM_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:filesystem <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_RX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_KINETIS_EMAC_TX_RING_LEN</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> // set by library:kinetis-emac <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_ADR_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APP_PORT</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPLICATION_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_APPSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_AUTOMATIC_UPLINK_MESSAGE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_ADDRESS</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DEVICE_EUI</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_DUTY_CYCLE_ON</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_LBT_ON</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NB_TRIALS</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_NWKSKEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>} // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_OVER_THE_AIR_ACTIVATION</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PHY</span></span> <span class="hljs-type"><span class="hljs-type">EU868</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_PUBLIC_NETWORK</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LORA_TX_MAX_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:lora <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ADDR_TIMEOUT_MODE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEBUG_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_DEFAULT_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ENABLE_PPP_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_ETHERNET_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IP_VER_PREF</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV4_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_IPV6_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_MEM_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">36560</span></span> // set by library:lwip[<span class="hljs-type"><span class="hljs-type">Freescale</span></span>] <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_PPP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">768</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SERVER_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_TCPIP_THREAD_STACKSIZE</span></span> <span class="hljs-number"><span class="hljs-number">1200</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_UDP_SOCKET_MAX</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_LWIP_USE_MBED_TRACE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">NET_6LOWPAN_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PANID_FILTER</span></span> <span class="hljs-number"><span class="hljs-number">0xffff</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0xa0</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xa2</span></span>, <span class="hljs-number"><span class="hljs-number">0xa3</span></span>, <span class="hljs-number"><span class="hljs-number">0xa4</span></span>, <span class="hljs-number"><span class="hljs-number">0xa5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0xa7</span></span>, <span class="hljs-number"><span class="hljs-number">0xa8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xab</span></span>, <span class="hljs-number"><span class="hljs-number">0xac</span></span>, <span class="hljs-number"><span class="hljs-number">0xad</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xaf</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_PSK_KEY_ID</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SEC_LEVEL</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_6LOWPAN_ND_SECURITY_MODE</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_HEAP_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">32500</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_MASK</span></span> <span class="hljs-number"><span class="hljs-number">0x7fff800</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_CHANNEL_PAGE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_COMMISSIONING_DATASET_TIMESTAMP</span></span> <span class="hljs-number"><span class="hljs-number">0x10000</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_EXTENDED_PANID</span></span> {<span class="hljs-number"><span class="hljs-number">0xf1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xb2</span></span>,<span class="hljs-number"><span class="hljs-number">0xc4</span></span>, <span class="hljs-number"><span class="hljs-number">0xd5</span></span>, <span class="hljs-number"><span class="hljs-number">0xa1</span></span>, <span class="hljs-number"><span class="hljs-number">0xbd</span></span> } // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_ML_PREFIX</span></span> {<span class="hljs-number"><span class="hljs-number">0xfd</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0d</span></span>, <span class="hljs-number"><span class="hljs-number">0xb8</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_NETWORK_NAME</span></span> <span class="hljs-comment"><span class="hljs-comment">"Thread Network"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PANID</span></span> <span class="hljs-number"><span class="hljs-number">0x0700</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_CONFIG_PSKC</span></span> {<span class="hljs-number"><span class="hljs-number">0xc8</span></span>, <span class="hljs-number"><span class="hljs-number">0xa6</span></span>, <span class="hljs-number"><span class="hljs-number">0x2e</span></span>, <span class="hljs-number"><span class="hljs-number">0xae</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x68</span></span>, <span class="hljs-number"><span class="hljs-number">0xf3</span></span>, <span class="hljs-number"><span class="hljs-number">0x46</span></span>, <span class="hljs-number"><span class="hljs-number">0xa9</span></span>, <span class="hljs-number"><span class="hljs-number">0x9e</span></span>, <span class="hljs-number"><span class="hljs-number">0x57</span></span>, <span class="hljs-number"><span class="hljs-number">0x85</span></span>, <span class="hljs-number"><span class="hljs-number">0x98</span></span>, <span class="hljs-number"><span class="hljs-number">0x9d</span></span>, <span class="hljs-number"><span class="hljs-number">0x1c</span></span>, <span class="hljs-number"><span class="hljs-number">0xd0</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_DEVICE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">MESH_DEVICE_TYPE_THREAD_ROUTER</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_MASTER_KEY</span></span> {<span class="hljs-number"><span class="hljs-number">0x10</span></span>, <span class="hljs-number"><span class="hljs-number">0x11</span></span>, <span class="hljs-number"><span class="hljs-number">0x22</span></span>, <span class="hljs-number"><span class="hljs-number">0x33</span></span>, <span class="hljs-number"><span class="hljs-number">0x44</span></span>, <span class="hljs-number"><span class="hljs-number">0x55</span></span>, <span class="hljs-number"><span class="hljs-number">0x66</span></span>, <span class="hljs-number"><span class="hljs-number">0x77</span></span>, <span class="hljs-number"><span class="hljs-number">0x88</span></span>, <span class="hljs-number"><span class="hljs-number">0x99</span></span>, <span class="hljs-number"><span class="hljs-number">0xaa</span></span>, <span class="hljs-number"><span class="hljs-number">0xbb</span></span>, <span class="hljs-number"><span class="hljs-number">0xcc</span></span>, <span class="hljs-number"><span class="hljs-number">0xdd</span></span>, <span class="hljs-number"><span class="hljs-number">0xee</span></span>, <span class="hljs-number"><span class="hljs-number">0xff</span></span>} // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_PSKD</span></span> <span class="hljs-comment"><span class="hljs-comment">"ABCDEFGH"</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_SECURITY_POLICY</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_THREAD_USE_STATIC_LINK_CONFIG</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_MBED_MESH_API_USE_MALLOC_FOR_HEAP</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:mbed-mesh-api <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_CONFIGURATION</span></span> nanostack_full // set by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_CRITICAL_SECTION_USABLE_FROM_INTERRUPT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_DISPATCH_FROM_APPLICATION</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_THREAD_STACK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">6144</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_EVENT_LOOP_USE_MBED_EVENTS</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NANOSTACK_HAL_NVM_CFSTORE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nanostack-hal <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_MESH_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">THREAD</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_STACK</span></span> <span class="hljs-type"><span class="hljs-type">LWIP</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DEFAULT_WIFI_SECURITY</span></span> <span class="hljs-type"><span class="hljs-type">NONE</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_CACHE_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RESPONSE_WAIT_TIME</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_RETRIES</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_DNS_TOTAL_ATTEMPTS</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_NSAPI_PRESENT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nsapi <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_APN_LOOKUP</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_BUFFER_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_AT_PARSER_TIMEOUT</span></span> <span class="hljs-number"><span class="hljs-number">8000</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_PPP_CELL_IFACE_BAUD_RATE</span></span> <span class="hljs-number"><span class="hljs-number">115200</span></span> // set by library:ppp-cell-iface <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_CONF_TARGET_NETWORK_DEFAULT_INTERFACE_TYPE</span></span> <span class="hljs-type"><span class="hljs-type">ETHERNET</span></span> // set by target:<span class="hljs-type"><span class="hljs-type">K66F</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_BLOCK_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_ENABLE_INFO</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_INTRINSICS</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_LOOKAHEAD</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_PROG_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">MBED_LFS_READ_SIZE</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> // set by library:littlefs <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV4_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NSAPI_PPP_IPV6_AVAILABLE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> // set by library:lwip <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_ENABLED</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> // set by library:nvstore <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NVSTORE_MAX_KEYS</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> // set by library:nvstore // <span class="hljs-type"><span class="hljs-type">Macros</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _RTE_ // defined by library:rtos <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">NS_USE_EXTERNAL_MBED_TLS</span></span> // defined by library:nanostack <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INCLUDE_CONFIG_H</span></span> // defined by library:utest <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span></code> </pre> </div></div><br><h2 id="osobennosti-perehoda-na-c-v-primenenii-k-rtos">  Fitur transisi ke C ++ sebagaimana diterapkan ke RTOS </h2><br><p>  <strong>API</strong> tingkat atas di <strong>Mbed</strong> ditulis dalam <strong>C ++</strong> , jadi bahasa ini harus digunakan dalam kode aplikasi.  Namun ada nuansa yang perlu Anda ketahui. <br>  Menggunakan <strong>C ++</strong> untuk <strong>RTOS</strong> pada sistem embedded kecil masih relatif jarang.  Masalahnya di sini adalah bahwa proyek <strong>RTOS</strong> yang berhasil berusaha menjadi multi-platform, sementara <strong>C ++</strong> menempatkan tuntutan tinggi pada manajemen sumber daya platform dibandingkan dengan <strong>C.</strong>  Alasannya adalah keinginan untuk menyembunyikan dari pengguna rincian manajemen sumber daya tingkat rendah.  Ini terutama tentang sumber daya memori.  Konstruktor, destruktor, utas, pengecualian dengan penghancuran otomatis, templat objek struktur data, dll. Menggunakan operasi tersirat dengan memori dinamis.  Tetapi sumber daya <strong>RAM</strong> dalam sistem kecil sangat terbatas.  RAM adalah sumber daya yang paling langka dalam sistem seperti itu dan terutama di <strong>RTOS</strong> .  Dalam <strong>RTOS,</strong> setiap tugas dialokasikan tumpukan, pengembang tidak dapat memprediksi ukuran persisnya di muka dan karenanya memilih dengan margin.  Dengan demikian, kehadiran <strong>RTOS</strong> dengan selusin tugas segera membutuhkan ukuran <strong>RAM</strong> 10 hingga 30 kB.  Banyak memori diperlukan untuk berbagai parser dan protokol (HTTP, HTML ...) dan sistem file.  Jika layar digunakan, persyaratan untuk <strong>RAM</strong> bebas semakin meningkat. </p><br><p>  Perpustakaan lingkungan pengembangan seperti <strong>IAR</strong> dilengkapi dengan manajer memori dinamis yang baik, tetapi mereka dirancang untuk lingkungan runtime single-threaded.  Agar mereka mulai bekerja di <strong>RTOS,</strong> Anda perlu menulis kode tambahan.  Proses ini disebut <strong>retargeting</strong> . <br>  Dalam <strong>RTOS yang</strong> ditulis dalam <strong>C,</strong> penargetan ulang umumnya tidak dilakukan.  Karena tidak ada operasi implisit dengan memori dinamis di tingkat bahasa, semua operasi dilakukan secara eksplisit dengan memanggil versi <strong>malloc</strong> dan fungsi <strong>bebas</strong> thread-safe mereka sendiri.  Programmer memiliki kontrol penuh atas operasi dengan memori dinamis dan dapat dengan mudah menerapkan semua langkah yang mungkin untuk menyimpannya. </p><br><p>  Dalam kasus <strong>C ++,</strong> jika kita ingin menggunakan semua fitur dari bahasa ini, kita harus melakukan <strong>penargetan ulang</strong> .  Tetapi <strong>penargetan ulang</strong> di setiap lingkungan pengembangan adalah proses yang murni individual.  Ini menyulitkan pengembang <strong>RTOS</strong> . </p><br><p>  Gambar di bawah ini adalah contoh struktur panggilan dengan penargetan ulang.  Fungsi <em>__write</em> , <em>__lseek</em> , <em>__read</em> mungkin tidak diimplementasikan oleh pengguna, tetapi kemudian fungsinya tetap pada kebijaksanaan <strong>IDE</strong> .  Dan tentunya <strong>printf</strong> dan <strong>scanf</strong> tidak akan multithreaded. </p><br><img src="https://habrastorage.org/webt/xq/fa/8e/xqfa8eksi4rb4ytbicaehymj0py.png"><br><p>  <strong>Mbed adalah</strong> salah satu dari sedikit jika bukan satu-satunya <strong>RTOS</strong> yang menyediakan kode sumber dengan penargetan ulang yang sudah dilakukan untuk triad alat pengembangan terkenal: <strong>GCC</strong> , <strong>IAR</strong> , <strong>Keil</strong> <br>  Terlepas dari semua hal di atas, Anda dapat menemukan artikel tentang porting <strong>RTOS</strong> ke <strong>C ++</strong> tanpa melakukan retargeting, misalnya, menyelesaikan masalah dengan hanya mengganti beberapa fungsi standar umum dengan Anda sendiri.  Ini mungkin berhasil, tetapi kemudian programmer harus menyadari berbagai pembatasan implisit dan tidak berdokumen saat menggunakan konstruksi <strong>C ++</strong> di <strong>IAR</strong> (hanya konstruktor statis, periksa semua templat untuk yang <strong>baru</strong> , pengecualian pengecualian, dll.).  Sudah akan sulit untuk memanggil <strong>C ++</strong> .  <strong>Mbed,</strong> sebagai sistem yang mudah digunakan, menghilangkan banyak keterbatasan ini, mendekati <strong>Arduino</strong> dalam kesederhanaan. </p><br><p>  Selain semua versi terbaru IAR, ada kesulitan untuk beralih ke C11 dan C ++ 14, seperti yang dijelaskan di sini - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.iar.com/support/resources/articles/exploring-c11-and-c14/</a> </p><br><h2 id="kak-organizuyutsya-preryvaniya-v-mbed">  Bagaimana interupsi diorganisasikan dalam Mbed </h2><br><p>  Anehnya, tidak mungkin menemukan kelas atau fungsi atau sesuatu yang cocok untuk mengatur layanan interupsi di Mbed API.  Anda hanya dapat menemukan kelas <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">InterruptIn</a></strong> , yang dimaksudkan hanya untuk port eksternal. </p><br><p>  Jawaban atas pertanyaan semacam itu harus dicari dalam <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CMSIS-RTOS</a></strong> , yaitu di <em>Lapisan Akses Periferal Inti CMSIS Cortex-M4</em> .  Makro didefinisikan di sana: </p><br><ul><li>  <strong><em>NVIC_SetVector</em></strong> - mengatur rutinitas layanan interupsi (ISR) untuk vektor yang diberikan </li><li>  <strong><em>NVIC_SetPriority</em></strong> - Menetapkan prioritas untuk vektor interupsi yang ditentukan. </li><li>  <strong><em>NVIC_EnableIRQ</em></strong> - memungkinkan panggilan interupsi pada vektor yang diberikan </li></ul><br><p>  Inilah cara organisasi interupsi dari <strong>pengatur</strong> waktu <strong>SysTick</strong> diinisialisasi: </p><br><pre> <code class="hljs lisp"> NVIC_SetVector(<span class="hljs-name"><span class="hljs-name">mbed_get_m0_tick_irqn</span></span>(), (<span class="hljs-name"><span class="hljs-name">uint32_t</span></span>)SysTick_Handler)<span class="hljs-comment"><span class="hljs-comment">; //   mbed_get_m0_tick_irqn       SysTick. //        SysTick_IRQn    MKE18F16.h //  SysTick_Handler   . NVIC_SetPriority(mbed_get_m0_tick_irqn(), 0xFF); // 0xFF    .      .   NVIC    MKE18F16   16  . ..   4-  . NVIC_EnableIRQ(mbed_get_m0_tick_irqn()); //    .</span></span></code> </pre> <br><p>  Prioritas tugas mbed dan prioritas interupsi tidak boleh dikacaukan. </p><br><p>  Jika prioritas tidak ditetapkan, maka secara default diatur ke maksimum. <br>  Dari penangan interupsi yang ditugaskan dengan cara ini, Anda dapat memanggil layanan <strong>RTOS</strong> apa pun yang tidak menimbulkan harapan.  Yaitu  mengirimkan bendera, semafor, pesan, kotak surat, dll.  Layanan dipanggil, bagaimanapun, bukan dari <strong>ISR</strong> itu sendiri, tetapi dengan memanggil perangkat lunak interupsi dengan mengatur bit <strong>PENDSVSET</strong> dalam <em>Kontrol Interupsi dan State Register</em> ( <strong>ICSR</strong> ) dari <em>blok kontrol Sistem</em> ( <strong>SCB</strong> ) dari kernel <strong>Cortex-M</strong> .  Yaitu  setelah penyelesaian interrupt handler saat ini, jika tidak ada interupsi prioritas lainnya, handler sistem akan dipanggil oleh vektor <strong>PendSV di</strong> mana layanan akan dilakukan. </p><br><h2 id="kak-v-mbed-proishodit-rabota-s-dinamicheskoy-pamyatyu">  Bagaimana cara kerja Mbed dengan memori dinamis? </h2><br><p>  <strong>Memori dinamis,</strong> atau <strong>heap</strong> atau <strong>heap,</strong> adalah komponen yang diperlukan saat pemrograman dalam <strong>C ++</strong> .  Dalam proyek <strong>Mbed</strong> kami di bawah <strong>IAR</strong> , ukuran area memori ini ditentukan dalam file pengaturan <strong>MKE18F512xxx16_flash.icf</strong> linker dengan menulis ke variabel <strong>__size_heap__</strong> .  Kami mengatur ukuran sehingga mengambil semua memori bebas yang tersisa.  Kita tahu <strong>berapa</strong> banyak memori bebas yang tersisa dari file <strong>.map</strong> setelah kompilasi, mis.  ukuran <strong>tumpukan</strong> adalah proses berulang. </p><br><h3 id="vyzov-staticheskih-konstruktorov-obektov-c">  Memanggil konstruktor statis objek C ++ </h3><br><p>  Masalah penting ketika menggunakan <strong>C ++</strong> adalah di mana dan bagaimana konstruktor objek global dipanggil.  Bahkan dalam <strong>RTOS</strong> mengklaim keseriusan, misalnya, <strong>MAX</strong> , ini diabaikan, mis.  dibiarkan kebetulan.  Di sana, desainer terlibat dalam perpustakaan lingkungan pengembangan single-threaded standar dengan mekanisme alokasi memori single-threaded biasa.  Tetapi setelah awal, <strong>RTOS</strong> umum membuat mekanisme mereka sendiri untuk mengelola memori dinamis, dan memori yang ditempati oleh objek global tetap dilupakan.  Ini adalah lubang dalam upaya kami untuk menghemat memori dan mengendalikan segalanya. </p><br><p>  <strong>Mbed</strong> mendekati masalah ini dengan lebih serius.  Di sana untuk setiap lingkungan pengembangan memiliki pendekatan sendiri.  Di <strong>IAR,</strong> ini dilakukan seperti ini: </p><br><ul><li>  aliran inisialisasi dicegat oleh kode pengguna bahkan sebelum desainer memanggil </li><li>  metode memblokir aliran dari <strong>RTOS API</strong> diganti ke perpustakaan standar </li><li>  fungsi standar <strong>baru</strong> , <strong>hapus</strong> , <strong>malloc</strong> , <strong>gratis</strong> ... dialihkan ke panggilan ke <strong>API</strong> memori dinamis <strong>RTOS</strong> . </li></ul><br><p>  <strong>Mbed</strong> menggunakan adaptor perpustakaan <strong>IAR</strong> untuk operasi multi-utas <br>  Anda dapat membaca tentang mengadaptasi IAR untuk multithreading di sini - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://supp.iar.com/FilesPublic/UPDINFO/005691/arm/doc/infocenter/DLIBThreadSupport.html</a> <br>  <strong>Mbed telah</strong> mengadaptasi kedua <em>kunci</em> sistem dan <em>kunci aliran file dari</em> perpustakaan <strong>IAR</strong> .  Mereka diimplementasikan dalam file <em>mbed_boot.c</em> dan menggunakan <em>mutex</em> <strong>OS</strong> . </p><br><p>  Fungsi <strong>__iar_program_start</strong> dijalankan di baris pertama file <strong>startup_MKE18F16.s</strong> menginisialisasi tumpukan OS dan memori dinamis dengan memanggil <em>mbed_set_stack_heap</em> </p><br><h2 id="naznachenie-razmerov-stekov-zadach">  Ukuran tumpukan tugas </h2><br><p>  Memangkas tumpukan tugas hingga minimum adalah opsi paling menarik untuk menghemat <strong>RAM</strong> . <br>  Untuk tugas-tugas yang membutuhkan tumpukan lebih sedikit, teknik yang berbeda digunakan.  Misalnya, fungsi perpustakaan sangat memengaruhi tumpukan untuk menghasilkan dan memformat <strong>printf</strong> , <strong>sprintf</strong> , garis <strong>scanf</strong> , dll.  Mereka memiliki kemampuan untuk mengalokasikan area sementara yang besar untuk penyimpanan data pada stack.  Jika kita menolak untuk menggunakan fungsi-fungsi ini dalam tugas, kita dapat mengurangi tumpukan tugas dengan beberapa ratus byte yang baik. </p><br><p>  OS Mbed saat startup segera membuat tiga tugas dengan nama: <strong>"main_thread"</strong> , <strong>"timer_thread"</strong> , <strong>"idle_thread"</strong> .  Ukuran tumpukan default untuk mereka ditentukan oleh makro di file header <strong>mbed_rtx_conf.h</strong> .  Kami memindahkan deklarasi tumpukan ini ke <strong>file</strong> konfigurasi <strong>mbed_config.h</strong> dan mengurangi ukuran tumpukan.  Sekarang definisi terlihat seperti ini: </p><br><ul><li>  <strong>Tumpukan</strong> tugas <strong>"main_thread"</strong> ditentukan oleh <strong>MBED_CONF_APP_MAIN_STACK_SIZE</strong> makro = 1024 byte </li><li>  <strong>Tumpukan</strong> tugas <strong>timer_thread</strong> ditentukan oleh <strong>MBED_CONF_APP_TIMER_THREAD_STACK_SIZE</strong> makro = 512 byte </li><li>  <strong>Tumpukan</strong> tugas <strong>idle_thread</strong> didefinisikan oleh <strong>MBED_CONF_APP_IDLE_THREAD_STACK_SIZE</strong> makro = 512 byte </li></ul><br><h2 id="sredstva-kontrolya-za-ispolzovaniem-resursov-pamyati-v-mbed">  Kontrol Penggunaan Memori Mbed </h2><br><p>  Memori dinamis serta tumpukan adalah sumber daya yang membutuhkan perhatian terus-menerus.  Untuk melihat berapa banyak memori dinamis yang digunakan dan berapa intensitas permintaan untuk itu, berapa banyak tumpukan yang tersisa untuk setiap tugas dan berapa beban puncak tumpukan di Mbed ada penghitung khusus.  Secara default, mereka dinonaktifkan oleh arahan kompilasi bersyarat, untuk mengaktifkannya, Anda harus mendeklarasikan <strong>MBED_ALL_STATS_ENABLED</strong> .  Ketika definisi tersebut dideklarasikan, Anda perlu menulis prosedur Anda sendiri untuk menampilkan informasi kepada pengguna.  Kami menulis prosedur khusus untuk mengeluarkan statistik ke emulator terminal VT100, yang akan dibahas nanti. </p><br><p>  Selain alat yang disediakan oleh OS, lingkungan pengembangan IAR dalam versi terbaru menambahkan <strong>kenari ditumpuk</strong> fitur baru.  Baca tentang mereka di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Masalah perlindungan tumpukan umum dari overflow dibahas di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h2 id="sredstva-otladki-i-analiza-koda-mbed">  Alat Debugging dan Analisis Kode Mbed </h2><br><p>  Studi yang benar-benar mendalam tentang pekerjaan <strong>Mbed</strong> pada platform baru hanya dimungkinkan menggunakan debugger <strong>JTAG / SWD</strong> . </p><br><img width="300" align="left" src="https://habrastorage.org/webt/64/xh/my/64xhmylaiz-_eejrufyuqmo_2n8.png"><br><p>  <strong>Sumber mbed</strong> penuh dengan makro bertingkat dan instruksi kompilasi bersyarat.  Hanya dengan melihat sumbernya Anda tidak bisa mengatakan fungsi mana yang berfungsi dan mana yang tidak, di mana program berjalan dan di mana tidak.  Satu-satunya jalan keluar adalah menghubungkan debugger dan langkah demi langkah untuk menganalisis jalur eksekusi program.  Sudah pada tahap porting, hampir tidak mungkin dilakukan tanpa langkah demi langkah debugging. </p><br><p>  Saya akan merekomendasikan versi debugger <strong>Segger</strong> dari <strong>J-Link Pro</strong> dan <strong>J-Link Ultra</strong> .  Mereka dibedakan oleh bandwidth tinggi, beberapa kali lebih tinggi dari model murah yang umum.  Untuk sistem debugging dengan waktu nyata yang sulit, ini penting.  Saat melacak acara cepat, debugger seperti itu cenderung untuk meluap dan membutuhkan iterasi debugging yang lebih sedikit.  Selain debugging langkah-demi-langkah, mereka dapat mencatat interupsi, menjaga statistik interupsi, termasuk waktu eksekusi, mendukung teknologi debugging <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><strong>RTT</strong></a> dan <strong>ITM</strong> , menangkap pengecualian perangkat keras dan fungsi lainnya. </p><br><p>  Di bawah ini adalah tampilan jendela debugger IAR saat bekerja melalui adaptor J-Link. </p><br><p><img src="https://habrastorage.org/webt/n2/of/it/n2ofit9jpectc6sncr6c3sl1gzo.png"></p><br><p>  Itu tidak layak untuk disimpan, 90% dari waktu pengembangan dihabiskan untuk debugging.  Meskipun pelacak Segger <strong>J-Trace yang</strong> lebih mahal tidak lagi memberikan keuntungan besar, karena seri <strong>MKE18F</strong> tidak memiliki antarmuka pelacak khusus. </p><br><p>  Alat debugging <strong>kedua</strong> , tentu saja, adalah I / O via <strong>UART</strong> .  Mbed memiliki setidaknya empat teknologi berbeda untuk mengakses saluran data serial melalui <strong>UART</strong> , </p><br><p>  Ini adalah: </p><br><ul><li>  pengalihan melalui kelas <strong>DirectSerial</strong> dari fungsi <strong>C / C ++</strong> I / O standar </li><li>  kelas <strong>RawSerial</strong> </li><li>  <strong>serial</strong> kelas </li><li>  kelas <strong>UARTerial</strong> </li></ul><br><p>  Variasi yang tidak biasa.  Keempatnya dapat digunakan secara bersamaan untuk output ke port yang sama.  Beberapa dari mereka lebih fungsional, ada yang kurang, ada yang didokumentasikan, dan ada yang tidak.  Di masa depan, dalam proyek kami, kami akan menggunakan <strong>RawSerial</strong> , sebagai kelas yang paling <strong>hemat</strong> sumber daya. </p><br><h2 id="skolko-my-teryaem-taymerov-portirovav-mbed">  Berapa banyak penghitung waktu yang kita hilangkan dengan porting Mbed </h2><br><p>  Untuk mengedipkan LED, fungsi <strong>tunggu</strong> dari Mbed OS <strong>API</strong> digunakan.  Artikel terakhir berbicara tentang masalah porting itu.  Tapi ini tidak semua, kecuali Mbed menyimpan penghitung pekerjaannya (bisa dibaca oleh fungsi <strong>mbed_stats_cpu_get</strong> ) dan ada <strong>timer API</strong> .  Layanan ini menggunakan fungsi tingkat rendah dari file <strong>lp_ticker.c</strong> .  Dalam file ini, timer <strong>LPTMR</strong> dari kit perangkat <strong>Kinetis</strong> digunakan untuk mengatur jumlah waktu.  Selama proses porting, file ini diedit agar sesuai dengan metode pencatatan jam kerja yang digunakan dalam mikrokontroler <strong>MKE18F512VLL16</strong> . </p><br><p>  Dengan demikian, <strong>port Mbed</strong> sepenuhnya menangkap dua modul penghitung - <strong>PIT</strong> dan <strong>LPTMR</strong> dan <strong>timer</strong> inti <strong>SysTick</strong> .  Ini harus diingat ketika merencanakan sumber daya untuk tugas yang diterapkan. </p><br><h2 id="osobennosti-nachalnoy-zagruzki-mke18f">  Fitur Bootstrap MKE18F </h2><br><p>  <strong>Rangkaian chip MKE18F</strong> memiliki <strong>ROM</strong> <strong>bawaan</strong> dengan bootloader melalui antarmuka serial: <strong>UART, CAN, SPI, I2C</strong> .  Tetapi direncanakan untuk menggunakan bootloader aman kami di papan kami, sehingga pekerjaan bootloader reguler tidak diinginkan. <br>  Dalam hal ini, chip <strong>Kinetis perlu</strong> memperhatikan isi area <strong>Program Flash</strong> pada <strong>0x040D</strong> .  Ada yang disimpan konstan yang menentukan urutan boot.  Dalam kasus kami, konstanta <strong>0x7B</strong> harus ditulis di <strong>sana</strong> , menunjukkan mulai dari memori <strong>Flash</strong> , dan bukan dari <strong>ROM</strong> dan menonaktifkan fungsi <strong>NMI</strong> pada output eksternal.  Dengan nilai berbeda untuk konstanta ini, program dapat membeku di bootloader bawaan yang secara tidak sengaja dipanggil dari ROM. </p><br><p>  Penting juga untuk diingat bahwa menulis ke memori Flash pengontrol hanya dimungkinkan pada frekuensi inti <strong>120 MHz</strong> dan tidak lebih tinggi, mis.  Dalam mode <strong>HRUN</strong> , perekaman <strong>Flash</strong> tidak dimungkinkan. </p><br><h2 id="aktiviziruem-watchdog">  Aktifkan Watchdog </h2><br><p>  Papan pengontrol kami ditujukan untuk penggunaan industri, yang berarti Anda tidak dapat melakukannya tanpa <strong>Watchdog</strong> . </p><br><p>  Awalnya, makro <strong>DISABLE_WDOG</strong> dalam file <strong>system_MKE18F16.h</strong> diatur untuk menonaktifkan <strong>watchdog</strong> .  Untuk memperbaiki situasi, makro ini dihapus dan inisialisasi <strong>WDOG sendiri</strong> diimplementasikan. </p><br><p>  Inisialisasi <strong>Watchdog</strong> dilakukan dalam fungsi <strong>SystemInit</strong> .  Penghitung <strong>pengawas</strong> diperbarui dalam tugas <strong>IDLE</strong> . </p><br><p>  Pendekatan semacam itu mensyaratkan bahwa tugas dengan prioritas lebih tinggi tidak secara eksklusif menangkap prosesor selama lebih dari <strong>100 ms</strong> .  Tetapi ini dapat dengan mudah terjadi, misalnya, ketika mengeluarkan data yang besar ke terminal.  Oleh karena itu, di mana pun kami memecah prosedur panjang dalam tugas dengan prioritas lebih besar dari <strong>IDLE</strong> menjadi fragmen pendek diselingi dengan jeda menggunakan fungsi <strong>menunggu</strong> . </p><br><h2 id="vopros-drayverov-iz-postavki-sdk">  Masalah driver dari pengiriman SDK </h2><br><p>  Driver <strong>SDK</strong> diawali dengan <strong>fsl yang</strong> terletak di direktori <strong>NXP_MKE18F_drivers</strong> dan merupakan sejenis lapisan abstraksi periferal.  Mereka seharusnya memfasilitasi pemrograman yang sulit untuk mempelajari peripheral, tetapi sayangnya minimal didokumentasikan.  Sebaliknya, dokumentasi mereka terbatas pada komentar di header fungsi.  Ada kebingungan untuk siapa mereka kemudian ditulis, dan bagaimana mereka dapat membebaskan kita dari mempelajari manual di pinggiran mikrokontroler.  Jawaban saya tidak mungkin.  Driver hanya memudahkan transfer program ke mikrokontroler yang berbeda dalam keluarga yang sama.  Tetapi agar dapat menerapkannya secara efektif, Anda perlu menangani dokumentasi periferal dengan sangat baik.  Dengan demikian, driver <strong>SDK</strong> memecahkan masalah yang agak pribadi dari pengembang driver itu sendiri, jauh dari kebutuhan pengguna yang mulai mempelajari <strong>Kinetis</strong> . </p><br><p>  Driver juga dirancang untuk bekerja pada semua chip keluarga yaitu  bersifat universal dan karena itu jenuh dengan makro bersyarat dan memeriksa bahwa untuk setiap chip tertentu tidak membawa fungsi yang berguna. </p><br><p>  Driver masih dapat membantu dalam beberapa cara untuk lebih memahami cara menangani periferal, tetapi setelah memahami driver, Anda dapat dengan aman mengabaikannya. <br>  Dalam hal ini, tidak mengherankan bahwa dalam proyek ini, akses ke periferal yang tidak terpengaruh oleh port Mbed langsung melewati pengemudi. </p><br><p>  Namun, mungkin ada kekhawatiran tentang ketergantungan perangkat tertentu pada ketersediaan driver SDK.  Di sini Anda harus memeriksa kode sumber driver.  Bahaya utama ketergantungan berasal dari pemisahan fungsi driver <strong>DMA</strong> .  Untuk mencegah hal ini, Anda perlu melacak dan melarang layanan Mbed reguler dari menggunakan <strong>DMA</strong> saat bekerja dengan periferal.  Jika <strong>DMA</strong> tetap tidak tersentuh oleh driver <strong>SDK</strong> , maka hampir semua yang tidak berlaku untuk 2 modul timer yang disebutkan ( <strong>PIT</strong> dan <strong>LPTMR</strong> ) dan UART debug dapat dibuang atau diabaikan dari direktori <strong>NXP_MKE18F_drivers</strong> . </p><br><p>  Bahaya yang lebih kecil, tetapi juga signifikan, dapat datang dari memprioritaskan periferal yang terlibat melalui driver SDK.  Misalnya, Anda perlu tahu prioritas apa yang ditetapkan untuk interupsi SysTick, debug UART, dan timer.  Dalam situasi di mana prioritas mereka sama atau lebih besar dari prioritas pinggiran yang digunakan dalam manajemen waktu nyata, ini dapat menyebabkan penurunan kualitas manajemen. </p><br><p>  Ingatlah bahwa port <strong>Mbed</strong> untuk <strong>MKE18F</strong> memulai UART dan penghitung waktu memotong tanpa memprioritaskan, mis.  mereka mendapatkan level maksimum secara default. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422413/">https://habr.com/ru/post/id422413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422401/index.html">Kerangka kerja plugin C ++ lainnya</a></li>
<li><a href="../id422403/index.html">20 September, Moskow - pertemuan untuk para analis</a></li>
<li><a href="../id422407/index.html">Temukan dan urutkan teks terkait</a></li>
<li><a href="../id422409/index.html">Python: metaprogramming dalam produksi. Bagian satu</a></li>
<li><a href="../id422411/index.html">Peran baru dalam perusahaan di era servitisasi</a></li>
<li><a href="../id422415/index.html">Python: metaprogramming dalam produksi. Bagian dua</a></li>
<li><a href="../id422417/index.html">Slavik dan GMT + 3 atau manfaatkan untuk orang</a></li>
<li><a href="../id422419/index.html">Bukan tanpa panik di Go</a></li>
<li><a href="../id422421/index.html">Microsoft akan secara radikal meningkatkan Skype</a></li>
<li><a href="../id422423/index.html">Python dan DataScience: Menjelajahi Kekuatan Perpustakaan Universal Numpy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>