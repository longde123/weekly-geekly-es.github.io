<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🌾 🛠️ 💻 制作简单的RC航空船 😗 😅 🕴🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有时，在Internet上，我会遇到初学者提出的问题，他们想从头开始建造直升机并为其编写固件。我本人就是这样，为了练习创建RC模型，我决定从简单的事情开始。
 
 
 
 他在最小的文章中详细介绍了船的算法，控制面板和组件的选择。
 
 为什么要乘高空船？
 

1. 简单
2. 便宜
3. ;
4...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>制作简单的RC航空船</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390429/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有时，在Internet上，我会遇到初学者提出的问题，他们想从头开始建造直升机并为其编写固件。</font><font style="vertical-align: inherit;">我本人就是这样，为了练习创建RC模型，我决定从简单的事情开始。</font></font><br>
<br>
<img src="https://habrastorage.org/files/7dd/6f2/46e/7dd6f246e98e47b8b5f3eda1ccdd14b0.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他在最小的文章中详细介绍了船的算法，控制面板和组件的选择。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么要乘高空船？</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便宜</font></font></li>
<li>     ;</li>
<li>     ,  -.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
飞行器很棒，但是很难。</font><font style="vertical-align: inherit;">在空中，如果出现问题，您不能只关掉螺丝。</font><font style="vertical-align: inherit;">是的，即使飞机，也需要非常好的推力，更不用说多直升机了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这样的平台</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ea/857/305/2ea8573051be4afcbe6aaf40c94a753d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有更详细的描述）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在大多数情况下，它们只能沿着人造的光滑表面移动，并且它们的控制方式非常不同。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是在水上我们可以在任何地方航行，这将来会给我们提供使用GPS进行自动驾驶的机会。</font><font style="vertical-align: inherit;">带有螺旋桨的经典设计对我来说是很复杂的，因为从外壳上出来的轴出口单元-我无法想象如何密封它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空气推进系统的更多优势：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它可以放在不同的平台上：船，雪橇，一块聚苯乙烯...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它不会卡在底部或藻类上。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设备必须旋转。</font><font style="vertical-align: inherit;">有3个选项：</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一圈螺丝+方向盘</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一螺丝+车削系统</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个固定螺钉。</font><font style="vertical-align: inherit;">改变他们的渴望是最简单的方法。</font><font style="vertical-align: inherit;">他用了。</font></font></li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遥控功能</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作原理</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1个操纵杆+多个开关。</font><font style="vertical-align: inherit;">遥控器的任务是在操纵杆手柄的位置上发送数据并每秒切换几次。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">怎么办</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，您需要一个无线电发射器。最便宜的选择是NRF24L01 +，价格</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为$ 0.85</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其次，您需要一个操纵杆。另外</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1美元</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
几个开关- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 0.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，所有这些都</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以0.13美元的价格</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定在一块PCB上</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
已经算了2.1美元，但仍然需要MK和食物。这里的一切还不是很清楚。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
展望未来，我会说ATmega8或STM8S103F3P6足够了，但是由于我开始了这个项目很长时间，而且经验很少，所以我将它撞到了Arduino Pro Mini控制面板和Arduino Nano船上（到处都是ATmega32P）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在远程仍然需要：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电源转换器0.9-5 V-&gt; 5 V，可为Arduino供电，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价格为0.35美元</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（USB连接器和一块电路板可以断开，以实现紧凑性）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于给无线电模块供电的3.3V稳定器AMS1117-3.3，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每单位</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成本</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">为0.03美元</font></a><font style="vertical-align: inherit;">；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一根手指电池的电池盒</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价格为0.15美元</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
总计加$ 0.53。</font><font style="vertical-align: inherit;">除了控制器，一对电容器和电线外，控制台组件的成本为2.63美元。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RC模型填充</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组成部分</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切都来自引擎。</font><font style="vertical-align: inherit;">您购买的发动机，电子设备都必须安装有这种功率，并且需要底座（船，雪橇）来提供相应的承载能力。</font><font style="vertical-align: inherit;">从意识形态上讲，仅需要以正确的速度旋转螺钉，就需要进行其他所有操作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我在这里买与螺旋桨发动机</font></font><br>
<br>
<img src="https://habrastorage.org/files/02a/811/047/02a8110476e840e68848408e6fcc4872.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每双2.88 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我把L293D当作电动机驱动器-另一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.35美元</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后有一个问题</font></font></b><div class="spoiler_text"> L293D         .                             ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
食物。</font><font style="vertical-align: inherit;">我们将需要多达三个电源电压：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除无线电模块外，所有电子设备的电压为5 V；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无线电模块为3.3 V;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于尽可能多的电动机（最小4.2 V）。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1和2与控制面板中的相同，对于电机，我们将MT3608的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价格</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">$ 0.86</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在最有趣的部分是：陀螺仪。</font><font style="vertical-align: inherit;">MPU-6050模块的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价格为1.53美元</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">希望也使用加速度计，以便当操纵杆移至侧面时，船舶就位。</font><font style="vertical-align: inherit;">但是最后，他放弃了这个想法：略微的俯仰斜率，系统开始认为它正在向前或向后加速。</font><font style="vertical-align: inherit;">事实证明，仅通过操纵杆补偿向前/向后运动，就可以更轻松地将船转到适当的位置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再加上0.4美元即可获得2个AA电池的电池盒，并获得6.4美元的组件，无需控制器和电线。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再说一遍，让我们从引擎出发。</font><font style="vertical-align: inherit;">L293D驱动的两个引擎中的每个引擎可能会</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或可能不会挖</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向前旋转；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回旋；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要扭曲。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使代码更易于阅读，请编写 </font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6功能</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{    <font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motLeftBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightStop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS;<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motRightBackward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  PORTD &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS);<font></font>
  PORTD |= <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们要控制螺钉的旋转速度。</font><font style="vertical-align: inherit;">当然，我们将使用PWM进行此操作。</font><font style="vertical-align: inherit;">我不知道这样的PWM是否可以在硬件中完成...我以编程方式中断了它。</font><font style="vertical-align: inherit;">声明一对全局变量</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int8_t</span></span> motLeft = <span class="hljs-number"><span class="hljs-number">0</span></span>, motRight = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让这些变量的值&lt;0表示您需要向后旋转，值&gt; 0-向前，如果它们为0，则不需要扭曲。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将编写计时器中断处理程序</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">ISR(TIMER2_OVF_vect)<font></font>
{<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motLeft &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motLeftBackward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightForward();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motRight &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
    motRightBackward();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPA_vect)<font></font>
{<font></font>
  motLeftStop();<font></font>
}<font></font>
<font></font>
ISR(TIMER2_COMPB_vect)<font></font>
{<font></font>
  motRightStop();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，要更改螺旋桨的旋转速度，我们需要执行2个操作：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在motLeft / motRight中写入正，负或零值（模块不重要）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在OCR2A / OCR2B中记录“转速”。</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们为此编写更多的功能</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotLeft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motLeft = v;  <font></font>
  OCR2A = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// -127..+127</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRight = v;<font></font>
  OCR2B = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) * <span class="hljs-number"><span class="hljs-number">2</span></span>;<font></font>
}<font></font>
</code></pre><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;
</code></pre><br>
            OCR2x   5 (      ).<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在剩下的是配置MK引脚和计时器</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<font></font>
  DDRD |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_LEFT_MINUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_PLUS) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; MOT_RIGHT_MINUS);
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(1 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1024.   16 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (1 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(0 &lt;&lt; CS20); // set up timer with prescaler = 64.   1 </span></span>
  TCCR2B |= (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS22)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; CS21)|(<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; CS20); <span class="hljs-comment"><span class="hljs-comment">// set up timer with prescaler = 8.  128 </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//TCCR2B |= (0 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(1 &lt;&lt; CS20); // set up timer with prescaler = 1.  16 </span></span>
  TIMSK2 |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; TOIE2)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2A)|(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; OCIE2B); <span class="hljs-comment"><span class="hljs-comment">// enable overflow interrupt</span></span>
  TCCR2A &amp;= ~(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM20 = 0, WGM21 = 0</span></span>
  TCCR2B &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// set WGM22 = 0</span></span>
  setMotLeft(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  setMotRight(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  sei();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您只需调用函数setMotLeft（int8_t v）和setMotRight（int8_t v），即可控制电动机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是我们要控制船不对！</font><font style="vertical-align: inherit;">我们要发出“前进/后退”和“右/左”之类的命令！</font><font style="vertical-align: inherit;">让她找出为此必须扭转的螺旋桨。</font><font style="vertical-align: inherit;">此外，我希望船本身能够补偿风，洋流和弯曲螺旋桨的转向作用！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们从另一边开始。</font><font style="vertical-align: inherit;">从遥控器。</font><font style="vertical-align: inherit;">在最简单的情况下，其操作算法如下：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开电源时，请记住操纵杆的初始位置。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在循环中，读取操纵杆的位置，从中减去零位置，然后将数据发送到船上。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的无线电模块最多支持32个字节的数据包。</font><font style="vertical-align: inherit;">为了不记住位移，我们将使用记录</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlStatus</span></span></span><span class="hljs-class">{</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> x,y;<font></font>
}  controlStatus;<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> packet[MAX_BUFF]; 
    <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(packet, <span class="hljs-number"><span class="hljs-number">0</span></span>, MAX_BUFF);    <font></font>
    controlStatus.x = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">1</span></span>) - x0;<font></font>
    controlStatus.y = (<span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span>)analogRead(<span class="hljs-number"><span class="hljs-number">0</span></span>) - y0;
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(packet, &amp;controlStatus, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    Mirf.send(packet);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(Mirf.isSending()){;};
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在接收方，我们将声明完全相同的记录， </font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将填充它</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Mirf.dataReady()) { 
    <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> data[MAX_BUFF];<font></font>
    Mirf.getData(data);<font></font>
    <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(&amp;controlStatus, data, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(controlStatus));<font></font>
    setMotRot(-controlStatus.x);<font></font>
    setMotForward(controlStatus.y); <font></font>
  }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在函数setMotRot和setMotForward中</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将值写入全局变量motRot和motForward</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotRot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motRot = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMotForward</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(v)&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>) v = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  motForward = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)v;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们继续进行最有趣的事情。</font><font style="vertical-align: inherit;">关于如何转换“以每秒5度的速度向左转并向前移动一点！” </font><font style="vertical-align: inherit;">改为“左引擎后退10％，右引擎前20％！”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于什么是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PID控制器，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经</font><font style="vertical-align: inherit;">有</font><font style="vertical-align: inherit;">很多著作。</font><font style="vertical-align: inherit;">我只使用了两个旋转组件：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比例</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">积分。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于来回移动，监管机构没有使用它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们举个例子：</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> iDeltaRot = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motTick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> rot = getRotAvg(); <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> deltaRot = rot - motRot * rotMaxSpeed / <span class="hljs-number"><span class="hljs-number">512</span></span>;<font></font>
  iDeltaRot += deltaRot;<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult - deltaRot * rotMult - iDeltaRot * iDeltaRotMult, <font></font>
          motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motForward * forwardMult + deltaRot * rotMult + iDeltaRot * iDeltaRotMult;  <font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> motMax = max(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motRight), <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(motLeft));
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(motMax &gt; <span class="hljs-number"><span class="hljs-number">127</span></span>){<font></font>
    motRight = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motRight * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
    motLeft  = (<span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span>)motLeft  * <span class="hljs-number"><span class="hljs-number">127</span></span> / motMax;<font></font>
  }<font></font>
  <font></font>
  setMotRight(motRight);<font></font>
  setMotLeft(motLeft);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
简化了代码，以专注于重要部分；存档将具有完整版本。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们在这里做什么？</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们计算船的实际旋转速度（rot）与所需的实际旋转速度（motRot * rotMaxSpeed）之间的差；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们计算出motRight和motLeft螺钉的期望转速；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果所需的旋转速度超过最大可能的速度，则在保持两者之间的比率的同时降低它们。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们称我们已经熟悉的setMotRight / setMotLeft。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仅此而已！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就是整个船的控制算法！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有困难吗？</font><font style="vertical-align: inherit;">我认为不是。</font><font style="vertical-align: inherit;">但是，尽管如此，在测试和调整过程中出现了很多问题，如果是飞机，则会导致大量坠机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所描述的函数中有4个系数：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forwardMult-对操纵杆前进/后退运动的敏感性；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMaxSpeed-完全向右/向左倾斜操纵杆时所需的旋转速度；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rotMult-比例分量的系数（当前转速与所需转速之间的偏差会影响旋转多少）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iDeltaRotMult-积分分量的系数（当前转角与所需转角的偏差在多大程度上影响旋转）。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些系数是通过实验调整的，船对操纵杆的反应和外部展开的影响将取决于它们。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态指示</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在调试/调试时，“为什么船对操纵杆的反应不是我想要的那样？”系列中会有一些困惑。</font><font style="vertical-align: inherit;">可以通过在PC上显示调试信息来调试某些点，但是，更方便地了解当场发生的事情。</font><font style="vertical-align: inherit;">首先，我考虑了2种选择：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">笔记本电脑;</font></font></li>
<li><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCD诺基亚5110</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/a23/fc5/65d/a23fc565d564418bad9c2ad6a1144f0c.jpg"><br>
</div></div></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
两者的缺点都是可以理解的：笔记本电脑很大且不便于携带，诺基亚5110显示屏不允许您同时显示大量的船况参数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我在他们之间进行了交叉：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nextion增强型NX4827K043-通用4.3英寸HMI触摸显示器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">借助触摸屏，您可以在旅途中快速方便地调整船只参数。</font><font style="vertical-align: inherit;">这是一种计算机，包括：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单片机GD32F103R8T6;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDRAM华邦W9864G6KH-6（8 MB）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">华邦W25Q256FVFG闪存（32 MB，100,000个重写周期，非常好）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGA Altera MAX II EPM570T144C5N。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
组装中的所有内容都看起来像这样（可单击）：</font><font style="vertical-align: inherit;">
此计算机/显示器是一个黑匣子，旨在与人互动。甚至现有的GPIO也经过了改进，可以连接按钮和指示器。他们的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">扩展委员会</font></a><font style="vertical-align: inherit;">对此进行了确认。因此，将内置控制器用作船的遥控器（读取操纵杆，与无线电模块NRF24L01 +交换数据）将失败。要与微控制器进行交互，需要使用UART，仅此而已。</font><font style="vertical-align: inherit;">
关于如何使用此显示器可以完成什么工作，Youtube上写了很多+视频。你看，例如，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">在这里它是</font></a></font><br>
<br>
<a href=""><img src="https://habrastorage.org/files/b78/b67/ad2/b78b67ad2ffd4f00a0e82daae979dad8.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-一切都清楚地显示在那里。</font><font style="vertical-align: inherit;">但是由于此显示器比船上所有其他组件和控制台的总和还贵，因此我将更详细地描述使用它的印象。</font><font style="vertical-align: inherit;">也许这将有助于某人了解此选项是否适合他，或者更适合使用诺基亚5110笔记本电脑/显示器。</font><font style="vertical-align: inherit;">Nextion增强型NX4827K043的优点：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很好用。</font><font style="vertical-align: inherit;">在YouTube上有简单的文档，示例，视频，...在几个小时内，您可以从头开始解决。</font><font style="vertical-align: inherit;">您几乎需要了解有关他的所有内容都在两页上：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki页</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指令集</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发展很快。</font><font style="vertical-align: inherit;">像Visual Studio这样的可视编辑器（只会更简单）。</font><font style="vertical-align: inherit;">我扔了组件，一切正常。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高品质的组件。</font><font style="vertical-align: inherit;">相同的闪存可进行100k重写周期。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试器，可以使用PC模拟显示并通过COM端口与MK通信。</font><font style="vertical-align: inherit;">仅在一切正常后，您才能充分开发设备，调试并购买显示器。</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然他有问题</font></font></b><div class="spoiler_text">            .    . ,         ,         .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电阻式传感器 </font><font style="vertical-align: inherit;">您可以创建相当小的控件，并用指甲或任何手写笔戳一下它们。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
缺点：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价钱 </font><font style="vertical-align: inherit;">对于4.3英寸的显示屏，50美元仍然很多。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现有组件很少，组件设置很少，如何创建自己的组件还不清楚。</font><font style="vertical-align: inherit;">绘制图元（线，矩形，圆等）的功能部分抵消了此功能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">升级后，标准量规组件会闪烁。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有（至少我没有找到）透明度。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电源要求：4.75-7 V，平均电流250 mA。</font><font style="vertical-align: inherit;">电压下降时，显示屏开始闪烁。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅UART。</font><font style="vertical-align: inherit;">可以在SPI和I²C上与他进行通信。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPIO输出仅用于电缆（无梳状2.54 mm），无ADC。</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，显示器给人的印象是非常高质量的产品，使用起来既轻松又愉快。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显示器可以一次执行两项任务：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态指示。</font><font style="vertical-align: inherit;">我主要感兴趣：</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">螺钉的“转速”；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iDeltaRot变量的值是所需的转弯角与所需的转角相差多少；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">船转速</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">船的旋转角度；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从遥控器接收数据包的频率；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">motTick函数的调用频率。</font></font></li>
</ul><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置参数，即上述的forwardMult，rotMaxSpeed，rotMult，iDeltaRotMult。</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
制作2页（可点击进行质量评估）：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适应症：</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/6f7/aaa/571/6f7aaa57152e48a5b92e6555d230d863.JPG"></a><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数设置：</font><font style="vertical-align: inherit;">
从左到右的前4列：forwardMult，rotMult，iDeltaRotMult，rotMaxSpeed。</font></font><br>
 <br>
<a href=""><img src="https://habrastorage.org/files/256/9f6/22d/2569f622dc234426b0dc8d4352a8488e.JPG"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
</li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地板上的视频测试船：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kwHMI4QUjIs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
船在各种iDeltaRotMult（积分系数）下对外部展开效果的反应：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3numZhKZnic" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
演示参数对水的影响：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QuOtIunGEME" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无法在露天拍摄视频。</font><font style="vertical-align: inherit;">您可以相信他的处理方式很好，并且最大速度不是很高。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特点</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">杆9克；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重115克，其中电池重52克；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大加速度为0.77 m / s ^ 2。</font><font style="vertical-align: inherit;">以人类5 km / h的速度，如果没有防水性，船将在1.8 s内加速；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您在遥控器和船上使用Arduino Nano（不带显示器和电池），则组件的成本约为15美元。</font></font></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于那些希望收集无线电控制的东西的人，我建议从带有两个固定螺旋桨的船只开始。</font><font style="vertical-align: inherit;">我认为，这是该领域中最简单的事情。</font></font><br>
<br>
<a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目存档</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
最后，为了有所作为，下面是一个很棒的设备的视频：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_iqqHAWJq_0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN390429/">https://habr.com/ru/post/zh-CN390429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN390419/index.html">将LED矩阵连接到Raspberry Pi</a></li>
<li><a href="../zh-CN390421/index.html">$ 8 DVB棒式收音机-使用GNURadio探索SDR</a></li>
<li><a href="../zh-CN390423/index.html">亚马逊的僵尸启示录条款已添加到亚马逊的网络服务政策中</a></li>
<li><a href="../zh-CN390425/index.html">机器人学会了如何烹饪拉面，改变其颜色和大小</a></li>
<li><a href="../zh-CN390427/index.html">Arduino代码调试（AVR）。第1部分。虚拟调试</a></li>
<li><a href="../zh-CN390431/index.html">爱普生EH-TW5210，EH-TW5300和EH-TW5350家用投影机-更好，更快，更明亮</a></li>
<li><a href="../zh-CN390435/index.html">数学家在“星球大战”的宇宙中建立了联系图</a></li>
<li><a href="../zh-CN390437/index.html">带有声光报警信号的自制电子高度计</a></li>
<li><a href="../zh-CN390439/index.html">范德华接触石墨烯和硒化铌之间的带间Andreev反射镜</a></li>
<li><a href="../zh-CN390441/index.html">Eclipse #include <Arduino.h></a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>