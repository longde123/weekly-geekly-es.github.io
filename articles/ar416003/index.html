<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คต ๐ ๐ ุชูุฏูู ููู HTML: ูุตู ูู ูุชุงุจ ReactPHP ูููุจุชุฏุฆูู ูู Skyeng ๐ค๐ฝ ๐ด ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุงุตู ุณูุฑุฌู ุฌูู ูุทูุฑ ุชุทุจููุงุช ุงูุฌูุงู ูู Skyeng ูุชุงุจุฉ ูุชุจ ุฌูุฏุฉ. ูุฐู ุงููุฑุฉ ุฃุตุฏุฑ ูุชุงุจูุง ุจุงููุบุฉ ุงูุฑูุณูุฉ ูุฌูููุฑ ูุชูู PHP. ุทูุจุช ูู Sergey ูุดุงุฑูุฉ ูุตู ูููุฏ ูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูุฏูู ููู HTML: ูุตู ูู ูุชุงุจ ReactPHP ูููุจุชุฏุฆูู ูู Skyeng</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/416003/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6v/oi/xx/6voixx5vd9au0asabvgmnckfj90.png"></p><br><p style=";text-align:right;direction:rtl">  ููุงุตู ุณูุฑุฌู ุฌูู ูุทูุฑ ุชุทุจููุงุช ุงูุฌูุงู ูู Skyeng ูุชุงุจุฉ ูุชุจ ุฌูุฏุฉ.  ูุฐู ุงููุฑุฉ ุฃุตุฏุฑ ูุชุงุจูุง ุจุงููุบุฉ ุงูุฑูุณูุฉ ูุฌูููุฑ ูุชูู PHP.  ุทูุจุช ูู Sergey ูุดุงุฑูุฉ ูุตู ูููุฏ ูู ุงูุงูุชูุงุก ุงูุฐุงุชู ูู ูุชุงุจู ุ ูุฅุนุทุงุก ูุฑุงุก Habra ุฑูุฒ ุฎุตู.  ููุฌุฏ ุฃุฏูุงู ููุงููุง. </p><a name="habracut"></a><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃููุงู ุ ุฏุนูุง ูุฎุจุฑู ุจูุง ุชููููุง ูู ุงููุตูู ุงูุณุงุจูุฉ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ููุฏ ูุชุจูุง ุฎุงุฏู HTTP ุงูุจุณูุท ูู PHP.  ูุฏููุง ููู <code>index.php</code> ุงูุฑุฆูุณู - ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฐู ูุจุฏุฃ ุงูุฎุงุฏู.  ุฅููู ุฑูุฒ ุงููุณุชูู ุงูุฃุนูู: ูููู ุจุฅูุดุงุก ุญููุฉ ุญุฏุซ ุ ูุชูููู ุณููู ุฎุงุฏู HTTP ูุจุฏุก ุงูุญููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">React</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Server</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Psr</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Message</span></span>\<span class="hljs-title"><span class="hljs-title">ServerRequestInterface</span></span>; $loop = React\EventLoop\Factory::create(); $router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Router(); $router-&gt;load(<span class="hljs-string"><span class="hljs-string">'routes.php'</span></span>); $server = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Server( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ServerRequestInterface $request)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($router)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $router($request); } ); $socket = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> React\Socket\Server(<span class="hljs-number"><span class="hljs-number">8080</span></span>, $loop); $server-&gt;listen($socket); $loop-&gt;run();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌูู ุงูุทูุจุงุช ุ ูุณุชุฎุฏู ุงูุฎุงุฏู ุฌูุงุฒ ุชูุฌูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// src/Router.php use Psr\Http\Message\ServerRequestInterface; use React\Http\Response; class Router { private $routes = []; public function __invoke(ServerRequestInterface $request) { $path = $request-&gt;getUri()-&gt;getPath(); echo "Request for: $path\n"; $handler = $this-&gt;routes[$path] ?? $this-&gt;notFound($path); return $handler($request); } public function load($filename) { $routes = require $filename; foreach ($routes as $path =&gt; $handler) { $this-&gt;add($path, $handler); } } public function add($path, callable $handler) { $this-&gt;routes[$path] = $handler; } private function notFound($path) { return function () use ($path) { return new Response( 404, ['Content-Type' =&gt; 'text/html; charset=UTF-8'], "No request handler found for $path" ); }; } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชุญููู ุงููุณุงุฑุงุช ูู ููู <code>routes.php</code> ุฅูู <code>routes.php</code> .  ุชู ุงูุขู ุงูุฅุนูุงู ุนู ูุณุงุฑูู ููุท ููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">React</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Psr</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Message</span></span>\<span class="hljs-title"><span class="hljs-title">ServerRequestInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'/'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ServerRequestInterface $request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response( <span class="hljs-number"><span class="hljs-number">200</span></span>, [<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text/plain'</span></span>], <span class="hljs-string"><span class="hljs-string">'Main page'</span></span> ); }, <span class="hljs-string"><span class="hljs-string">'/upload'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ServerRequestInterface $request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response( <span class="hljs-number"><span class="hljs-number">200</span></span>, [<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text/plain'</span></span>], <span class="hljs-string"><span class="hljs-string">'Upload page'</span></span> ); }, ];</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญุชู ุงูุขู ุ ูู ุดูุก ุจุณูุท ุ ููุชูุงูู ุชุทุจูููุง ุบูุฑ ุงููุชุฒุงูู ูุน ุนุฏุฉ ูููุงุช. </p></div></div><br><p style=";text-align:right;direction:rtl">  ููุชูู ุฅูู ุฃุดูุงุก ุฃูุซุฑ "ูููุฏุฉ".  ุฅุฌุงุจุงุช ุจุถุน ูููุงุช ูู ูุต ุนุงุฏู ุชุนูููุง ุงุณุชุฎูุงุตู ูู ุงููุตูู ุงูุณุงุจูุฉ ูุง ุชุจุฏู ุฌุฐุงุจุฉ ููุบุงูุฉ.  ูุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุดูุก ุญูููู ุ ูุซู ุตูุญุฉ HTML. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ุฃูู ูุถุน ูุฐุง HTMLุ  ุจุงูุทุจุน ุ ููููู ุชุฑููุฒ ูุญุชููุงุช ุตูุญุฉ ุงูููุจ ูุจุงุดุฑุฉ ุฏุงุฎู ููู ุงููุณุงุฑุงุช ูุจุงุดุฑุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php return [ '/' =&gt; function (ServerRequestInterface $request) { $html = &lt;&lt;&lt;HTML &lt;!DOCTYPE html&gt; &lt;html lang=โenโ&gt; &lt;head&gt; &lt;meta charset=โUTF-8โ&gt; &lt;title&gt;ReactPHP App&lt;/title&gt; &lt;/head&gt; &lt;body&gt; Hello, world &lt;/body&gt; &lt;/html&gt; HTML; return new Response( 200, ['Content-Type' =&gt; 'text/html'], $html ); }, '/upload' =&gt; function (ServerRequestInterface $request) { return new Response( 200, ['Content-Type' =&gt; 'text/plain'], 'Upload page' ); }, ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุง ุชูุนู ุฐูู!  ูุง ููููู ูุฒุฌ ููุทู ุงูุฃุนูุงู (ุงูุชูุฌูู) ูุน ุงูุนุฑุถ ุงูุชูุฏููู (ุตูุญุฉ HTML).  ููุงุฐุงุ  ุชุฎูู ุฃูู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ุดูุก ูุง ูู ุฑูุฒ HTML ุ ุนูู ุณุจูู ุงููุซุงู ุ ููู ุงูุฒุฑ.  ูุฃู ููู ูุฌุจ ุชุบููุฑูุ  ุงูููู ูุน <code>router.php</code> ุ  ุชุจุฏู ุบุฑูุจุฉ ุ ุฃููุณ ูุฐููุ  ูู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงูุชูุฌูู ูุชุบููุฑ ููู ุงูุฒุฑ ... </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุณูุชุฑู ุงููุณุงุฑุงุช ูุญุฏูุง ุ ูุจุงููุณุจุฉ ูุตูุญุงุช HTML ุ ุณููุดุฆ ุฏููููุง ูููุตูุงู.  ูู ุฌุฐุฑ ุงููุดุฑูุน ุ ุฃุถู ุฏููููุง ุฌุฏูุฏูุง ูุณูู ุงูุตูุญุงุช.  ุซู ููุดุฆ ุฏุงุฎูู ููู <code>index.html</code> .  ุณุชููู ูุฐู ุตูุญุชูุง ุงูุฑุฆูุณูุฉ.  ููุง ูุญุชููุงุชู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">&lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>&gt; &lt;title&gt;ReactPHP App&lt;/title&gt; &lt;link rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> href=<span class="hljs-string"><span class="hljs-string">"https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"</span></span> &gt; &lt;/head&gt; &lt;body&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class">="/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">upload</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">method</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">POST</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">justify</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">center</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">group</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">"&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Text</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">textarea</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class">"&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">submit</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">primary</span></span></span><span class="hljs-class">"&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Submit</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">html</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุตูุญุฉ ุจุณูุทุฉ ููุบุงูุฉ ุ ูุชุญุชูู ุนูู ุนูุตุฑ ูุงุญุฏ ููุท - ุงููููุฐุฌ.  ูุญุชูู ุงููููุฐุฌ ุจุฏุงุฎูู ูุฑุจุน ูุต ูุฒุฑ ููุฅุฑุณุงู.  ุฃุถูุช ุฃูุถูุง ุฃููุงุท Bootstrap ูุฌุนู ุตูุญุชูุง ุชุจุฏู ุฃุฌูู. </p><br><h4 id="chtenie-faylov-kak-ne-nado-delat" style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงููููุงุช.  ููู ูุง ุชูุนู </h4><br><p style=";text-align:right;direction:rtl">  ุฅู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ูุถูุญูุง ูู ูุฑุงุกุฉ ูุญุชููุงุช ุงูููู ุฏุงุฎู ูุนุงูุฌ ุงูุทูุจุงุช ูุฅุฑุฌุงุน ูุฐุง ุงููุญุชูู ููุต ุงุณุชุฌุงุจุฉ.  ุดูุก ูู ูุฐุง ุงููุจูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php return [ '/' =&gt; function (ServerRequestInterface $request) { return new Response( 200, ['Content-Type' =&gt; 'text/html'], file_get_contents('pages/index.html') ); }, // ... ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุงูููุงุณุจุฉ ุ ุณุชุนูู.  ููููู ุชุฌุฑุจุชูุง ุจููุณู: ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู ูุฃุนุฏ ุชุญููู ุงูุตูุญุฉ <code>http://127.0.0.1:8080/</code> ูู ูุชุตูุญู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zq/dc/91/zqdc91cvy7a971jkniyw8hpxgzi.png"></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุง ูู ุงูุฎุทุฃ ููุงุ  ูููุงุฐุง ูุง ุชูุนู ุฐููุ  ุจุงุฎุชุตุงุฑ ุ ูุฃูู ุณุชููู ููุงู ูุดุงูู ุฅุฐุง ุจุฏุฃ ูุธุงู ุงููููุงุช ูู ุงูุชุจุงุทุค. </p><br><h4 id="blokiruyuschie-i-neblokiruyuschie-vyzovy" style=";text-align:right;direction:rtl">  ุญุธุฑ ุงูููุงููุงุช ูุนุฏู ุญุธุฑูุง </h4><br><p style=";text-align:right;direction:rtl">  ุฏุนูู ุฃูุถุญ ูู ูุง ุฃุนููู ูู ุฎูุงู "ุญุธุฑ" ุงูููุงููุงุช ุ ููุง ุงูุฐู ูููู ุฃู ูุญุฏุซ ุนูุฏูุง ูุญุชูู ุฃุญุฏ ูุนุงูุฌุงุช ุงูุทูุจ ุนูู ุฑูุฒ ุงูุญุธุฑ.  ูุจู ุฅุนุงุฏุฉ ูุงุฆู ุงูุงุณุชุฌุงุจุฉ ุ ุฃุถู ููุงููุฉ ุฅูู ูุธููุฉ <code>sleep()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php return [ '/' =&gt; function (ServerRequestInterface $request) { sleep(10); return new Response( 200, ['Content-Type' =&gt; 'text/html'], file_get_contents('pages/index.html') ); }, '/upload' =&gt; function (ServerRequestInterface $request) { return new Response( 200, ['Content-Type' =&gt; 'text/plain'], 'Upload page' ); }, ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ุฐูู ุฅูู ุชุฌููุฏ ูุนุงูุฌ ุงูุทูุจ ููุฏุฉ 10 ุซูุงูู ูุจู ุฃู ูุชููู ูู ุฅุฑุฌุงุน ุงุณุชุฌุงุจุฉ ุจูุญุชููุงุช ุตูุญุฉ HTML.  ูุฑุฌู ููุงุญุธุฉ ุฃููุง ูู ูููุณ ูุนุงูุฌ ุงูุนููุงู <code>/upload</code> .  ูู ุฎูุงู ุงุณุชุฏุนุงุก ูุธููุฉ <code>sleep(10)</code> ุ ุฃููู ุจูุญุงูุงุฉ ุชูููุฐ ููุน ูู ุนูููุฉ ุงูุญุธุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุงุฐุง ูุฏููุงุ  ุนูุฏูุง ูุทูุจ ุงููุณุชุนุฑุถ ุงูุตูุญุฉ <code>/</code> ุ ููุชุธุฑ ุงููุนุงูุฌ 10 ุซูุงูู ุซู ูุนูุฏ ุตูุญุฉ HTML.  ุนูุฏูุง ููุชุญ <code>/upload</code> ุงูุนููุงู ุ ูุฌุจ ุฃู ูููู ูุนุงูุฌู ุจุฅุฑุฌุงุน ุงุณุชุฌุงุจุฉ ุนูู ุงูููุฑ ูุน ุงูุณูุณูุฉ "ุตูุญุฉ ุงูุชุญููู". </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ูุฑู ูุง ูุญุฏุซ ูู ุงููุงูุน.  ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูุนูุฏ ุชุดุบูู ุงูุฎุงุฏู.  ุงูุขู ุ ูุฑุฌู ูุชุญ ูุงูุฐุฉ ุฃุฎุฑู ูู ูุชุตูุญู.  ูู ุดุฑูุท ุงูุนููุงู ุ ุฃุฏุฎู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://127.0.0.1:8080/upload</a> ุ ูููู ูุง ุชูุชุญ ูุฐู ุงูุตูุญุฉ ุนูู ุงูููุฑ.  ููุท ุงุชุฑู ูุฐุง ุงูุนููุงู ูู ุดุฑูุท ุงูุนูุงููู ูู ุงูููุช ุงูุญุงูู.  ุซู ุงูุชูู ุฅูู ูุงูุฐุฉ ุงููุชุตูุญ ุงูุฃููู ูุงูุชุญ ุงูุตูุญุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://127.0.0.1:8080/</a> ููู.  ุฃุซูุงุก ุชุญููู ูุฐู ุงูุตูุญุฉ (ุชุฐูุฑ ุฃู ุงูุฃูุฑ ุณูุณุชุบุฑู 10 ุซูุงูู ููููุงู ุจุฐูู) ุ ุงูุชูู ุจุณุฑุนุฉ ุฅูู ุงููุงูุฐุฉ ุงูุซุงููุฉ ูุงุถุบุท ุนูู "Enter" ูุชุญููู ุงูุนููุงู ุงูุฐู ุชู ุชุฑูู ูู ุดุฑูุท ุงูุนูุงููู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://127.0.0.1:8080/upload</a> ) . </p><br><p style=";text-align:right;direction:rtl">  ุนูู ูุงุฐุง ุญุตููุงุ  ูุนู ุ ูุณุชุบุฑู ุงูุนููุงู / ููุง ูู ูุชููุน 10 ุซูุงูู ููุชุญููู.  ูููู ุ ูู ุงููุฏูุด ุ ุฃู ุงูุตูุญุฉ ุงูุซุงููุฉ ุงุณุชุบุฑูุช ููุณ ุงูููุช ููุชุญููู ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูู ูุถูู ุฃู ููุงููุงุช <code>sleep()</code> ุฅูููุง.  ุฃู ููุฑุฉ ููุงุฐุง ุญุฏุซ ูุฐุงุ </p><br><p style=";text-align:right;direction:rtl">  ReactPHP ูุนูู ูู ุฎูุท ูุงุญุฏ.  ูุฏ ูุจุฏู ุฃูู ูู ุชุทุจูู ุบูุฑ ูุชุฒุงูู ุ ูุชู ุชูููุฐ ุงูููุงู ุจุงูุชูุงุฒู ุ ูููู ูุฐุง ููุณ ูุฐูู ูู ุงููุงูุน.  ูุชู ุฅูุดุงุก ููู ุงูุชูุงุฒู ูู ุฎูุงู ุฏูุฑุฉ ูู ุงูุฃุญุฏุงุซ ุงูุชู ุชูุชูู ุจุงุณุชูุฑุงุฑ ุจูู ุงูููุงู ุงููุฎุชููุฉ ูุชุคุฏููุง.  ูููู ูู ููุช ูุนูู ุ ูุชู ุฏุงุฆููุง ุชูููุฐ ูููุฉ ูุงุญุฏุฉ ููุท.  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ุงุณุชุบุฑูุช ุฅุญุฏู ูุฐู ุงูููุงู ููุชูุง ุทูููุงู ุ ูุณุชุญุฌุจ ุญููุฉ ุงูุฃุญุฏุงุซ ุ ุงูุชู ูู ุชุชููู ูู ุชุณุฌูู ุงูุฃุญุฏุงุซ ุงูุฌุฏูุฏุฉ ูุงุณุชุฏุนุงุก ูุนุงูุฌุงุชูุง.  ููุฐุง ูุคุฏู ูู ุงูููุงูุฉ ุฅูู "ุชุฌููุฏ" ุงูุชุทุจูู ุจุฃูููู ุ ุณูููุฏ ุจุจุณุงุทุฉ ุนุฏู ุงูุชุฒุงูู. </p><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ูููู ูุง ุนูุงูุฉ ุฐูู ุจุงูุงุชุตุงู <code>file_get_contents('pages/index.h')</code> ุ  ุงููุดููุฉ ููุง ูู ุฃููุง ูุฏุฎู ุฅูู ูุธุงู ุงููููุงุช ูุจุงุดุฑุฉ.  ุจุงูููุงุฑูุฉ ูุน ุงูุนูููุงุช ุงูุฃุฎุฑู ุ ูุซู ุงูุนูู ูุน ุงูุฐุงูุฑุฉ ุฃู ุงูุญูุณุจุฉ ุ ูููู ุฃู ูููู ุงูุนูู ูุน ูุธุงู ุงููููุงุช ุจุทูุฆูุง ููุบุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุชุจูู ุฃู ุงูููู ูุจูุฑ ุฌุฏูุง ุ ุฃู ุฅุฐุง ูุงู ุงููุฑุต ุจุทูุฆูุง ุ ููุฏ ุชุณุชุบุฑู ูุฑุงุกุฉ ุงูููู ุจุนุถ ุงูููุช ุ ููุชูุฌุฉ ูุฐูู ุ ุญุธุฑ ุญููุฉ ุงูุญุฏุซ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููููุฐุฌ ุงููุชุฒุงูู ุงูููุงุณู ุ ูุง ุชุนุฏ ุงุณุชุฌุงุจุฉ ุงูุทูุจ ูุดููุฉ.  ุฅุฐุง ุทูุจ ุงูุนููู ููููุง ุซููููุง ููุบุงูุฉ ุ ูุณูู ููุชุธุฑ ุญุชู ูุชู ุชูุฒูู ูุฐุง ุงูููู.  ูุง ูุคุซุฑ ูุซู ูุฐุง ุงูุทูุจ ุงูุซููู ุนูู ุงูุนููุงุก ุงูุขุฎุฑูู.  ููู ูู ุญุงูุชูุง ุ ูุญู ูุชุนุงูู ูุน ูููุฐุฌ ุบูุฑ ูุชุฒุงูู ููุฌู ูุญู ุงูุญุฏุซ.  ููุฏ ุฃุทูููุง ุฎุงุฏู HTTP ุงูุฐู ูุฌุจ ุฃู ูุนุงูุฌ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ ุจุงุณุชูุฑุงุฑ.  ุฅุฐุง ุงุณุชุบุฑู ุทูุจ ูุงุญุฏ ุงููุซูุฑ ูู ุงูููุช ูุฅููุงูู ุ ูุณูุคุซุฑ ุฐูู ุนูู ุฌููุน ุนููุงุก ุงูุฎุงุฏู ุงูุขุฎุฑูู. </p><br><p style=";text-align:right;direction:rtl">  ููุงุนุฏุฉ ุ ุชุฐูุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ููููู ุฃุจุฏุง ููุน ุญููุฉ ุงูุญุฏุซ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ููู ููุฑุฃ ุงูููู ุจุนุฏ ุฐูู ุจุดูู ุบูุฑ ูุชุฒุงููุ  ูููุง ูุตู ุฅูู ุงููุงุนุฏุฉ ุงูุซุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุง ูููู ุชุฌูุจ ุนูููุฉ ุงูุญุธุฑ ุ ูุฌุจ ุฃู ุชููู ูุชุดุนุจุฉ ูู ุงูุนูููุฉ ุงููุฑุนูุฉ ูุชุณุชูุฑ ูู ุงูุชูููุฐ ุบูุฑ ุงููุชุฒุงูู ูู ุงูุฎูุท ุงูุฑุฆูุณู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ุจุนุฏ ุฃู ุชุนูููุง ููููุฉ ุนุฏู ุงูููุงู ุจุฐูู ุ ุฏุนูุง ููุงูุด ุงูุญู ุงูุตุญูุญ ุบูุฑ ุงููุญุธูุฑ. </p><br><h4 id="docherniy-process" style=";text-align:right;direction:rtl">  ุนูููุฉ ุงูุทูู </h4><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฅุฌุฑุงุก ุฌููุน ุงูุงุชุตุงูุงุช ุจูุธุงู ุงููููุงุช ูู ุชุทุจูู ุบูุฑ ูุชุฒุงูู ูู ุงูุนูููุงุช ุงููุฑุนูุฉ.  ูุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงููุฑุนูุฉ ูู ุชุทุจูู ReactPHP ุ ูุญุชุงุฌ ุฅูู ุชุซุจูุช ูููู ุขุฎุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุนูููุฉ</a> ุชุงุจุนุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"</a> .  ูุชูุญ ูู ูุฐุง ุงููููู ุงููุตูู ุฅูู ูุธุงุฆู ูุธุงู ุงูุชุดุบูู ูุชุดุบูู ุฃู ุฃูุฑ ูุธุงู ุฏุงุฎู ุงูุนูููุฉ ุงูุชุงุจุนุฉ.  ูุชุซุจูุช ูุฐุง ุงููููู ุ ุงูุชุญ ูุญุทุฉ ุทุฑููุฉ ูู ุฌุฐุฑ ุงููุดุฑูุน ููู ุจุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"> <code>composer require react/child-process</code> </p> <br><h4 id="sovmestimost-s-windows" style=";text-align:right;direction:rtl">  <em>ุงูุชูุงูู ูุน Windows</em> </h4><br><p style=";text-align:right;direction:rtl">  <em>ูู ูุธุงู ุชุดุบูู Windows ุ ูุชู ุญุธุฑ ุณูุงุณู ุนูููุงุช STDIN ู STDOUT ู STDERR ุ ููุง ูุนูู ุฃู ูููู ุงูุนูููุฉ ุงููุฑุนูุฉ ูู ูููู ูุงุฏุฑูุง ุนูู ุงูุนูู ุจุดูู ุตุญูุญ.</em>  <em>ูุฐูู ุ ุชู ุชุตููู ูุฐุง ุงููููู ุจุดูู ุฃุณุงุณู ููุนูู ููุท ุนูู ุฃูุธูุฉ nix.</em>  <em>ุฅุฐุง ุญุงููุช ุฅูุดุงุก ูุงุฆู ูู ูุฆุฉ ุงูุนูููุฉ ุนูู ูุธุงู Windows ุ ูุณูุชู ุทุฑุญ ุงุณุชุซูุงุก.</em>  <em>ููู ุงููููู ูููู ุฃู ูุนูู ุชุญุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธุงู Windows ุงููุฑุนู ููุธุงู Linux (WSL)</a> .</em>  <em>ุฅุฐุง ููุช ุชููู ุงุณุชุฎุฏุงู ูุฐุง ุงููููู ุถูู Windows ุ ูุณุชุญุชุงุฌ ุฅูู ุชุซุจูุช WSL.</em> </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููุง ุชูููุฐ ุฃู ุฃูุฑ shell ุฏุงุฎู ุงูุนูููุฉ ุงูุชุงุจุนุฉ.  ุงูุชุญ ููู <code>routes.php</code> ุ ุซู ุฏุนูุง ูุบูุฑ ูุนุงูุฌ ุงููุณุงุฑ.  ุฃูุดุฆ ูุงุฆููุง ูู ูุฆุฉ <code>React\ChildProcess\Process</code> ุ <code>React\ChildProcess\Process</code> ุ ูุฑุฑ <code>ls</code> ุฅููู ููุญุตูู ุนูู ูุญุชููุงุช ุงูุฏููู ุงูุญุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php use Psr\Http\Message\ServerRequestInterface; use React\ChildProcess\Process; use React\Http\Response; return [ '/' =&gt; function (ServerRequestInterface $request) { $childProcess = new Process('ls'); return new Response( 200, ['Content-Type' =&gt; 'text/html'], file_get_contents('pages/index.html') ); }, // ... ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูุญุชุงุฌ ุฅูู ุจุฏุก ุงูุนูููุฉ ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุทุฑููุฉ <code>start()</code> .  ุงูุตูุฏ ูู ุฃู ุงูุฃุณููุจ <code>start()</code> ูุญุชุงุฌ ุฅูู ูุงุฆู ุญููุฉ ุญุฏุซ.  ูููู ูู ููู <code>routes.php</code> ููุณ ูุฏููุง ูุฐุง ุงููุงุฆู.  ููู ููุฑุฑ ุญููุฉ ุงูุญุฏุซ ูู <code>index.php</code> ุฅูู ุงููุณุงุฑุงุช ูุจุงุดุฑุฉ ุฅูู ูุนุงูุฌ ุงูุทูุจุ  ุงูุญู ููุฐู ุงููุดููุฉ ูู "ุญูู ุงูุชุจุนูุฉ". </p><br><h4 id="inekciya-zavisimostey" style=";text-align:right;direction:rtl">  ุญูู ุงูุชุจุนูุฉ </h4><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ูุญุชุงุฌ ุฃุญุฏ ูุณุงุฑุงุชูุง ุฅูู ุญููุฉ ุญุฏุซ ููุนูู.  ูู ุชุทุจูููุง ุ ูุนุฑู ูููู ูุงุญุฏ ููุท ุนู ูุฌูุฏ ูุณุงุฑุงุช - ูุฆุฉ <code>Router</code> .  ุงุชุถุญ ุฃูู ูู ูุณุคูููุชู ุชูููุฑ ุญููุฉ ุญุฏุซ ููุทุฑู.  ุจูุนูู ุขุฎุฑ ุ ูุญุชุงุฌ ุฌูุงุฒ ุงูุชูุฌูู ุฅูู ุญููุฉ ุญุฏุซ ุ ุฃู ูุนุชูุฏ ุนูู ุญููุฉ ุงูุญุฏุซ.  ููู ูุนุจุฑ ุจูุถูุญ ุนู ูุฐุง ุงูุชุจุนูุฉ ูู ุงูููุฏุ  ููู ุชุฌุนู ูู ุงููุณุชุญูู ุญุชู ุฅูุดุงุก ููุฌู ุจุฏูู ุชูุฑูุฑ ุญููุฉ ุญุฏุซ ุฅูููุ  ุจุงูุทุจุน ุ ูู ุฎูุงู ูููุดุฆ ูุฆุฉ <code>Router</code> .  ุงูุชุญ <code>Router.php</code> ูุฃุถู ุงููููุดุฆ ุฅูู ูุฆุฉ <code>Router</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Psr</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Message</span></span>\<span class="hljs-title"><span class="hljs-title">ServerRequestInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">React</span></span>\<span class="hljs-title"><span class="hljs-title">EventLoop</span></span>\<span class="hljs-title"><span class="hljs-title">LoopInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">React</span></span>\<span class="hljs-title"><span class="hljs-title">Http</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Router</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $routes = []; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> LoopInterface */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $loop; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LoopInterface $loop)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;loop = $loop; } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุงุฎู ุงููููุดุฆ ุ ุงุญูุธ ุญููุฉ ุงูุญุฏุซ ุงูุชู ุชู ุชูุฑูุฑูุง ูู ุงูุฎุงุตูุฉ <code>$loop</code> ุงูุฎุงุตุฉ.  ูุฐุง ูู ุญูู ุงูุชุจุนูุฉ ุนูุฏูุง ูููุฑ ูููุตู ุงูุฃุดูุงุก ุงูุชู ูุญุชุงุฌูุง ููุนูู ูู ุงูุฎุงุฑุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ูุฐุง ุงูููุดุฆ ุงูุฌุฏูุฏ ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุฅูุดุงุก ุฌูุงุฒ ุงูุชูุฌูู.  ุงูุชุญ ููู <code>index.php</code> ููู ุจุชุตุญูุญ ุงูุฎุท ุงูุฐู ููุดุฆ ููู ูุงุฆู ูุฆุฉ <code>Router</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// index.php $loop = React\EventLoop\Factory::create(); $router = new Router($loop); $router-&gt;load('routes.php');</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู.  ุงุฑุฌุน ุฅูู <code>routes.php</code> .  ููุง ุชููุนุช ุจุงููุนู ุ ูููููุง ููุง ุงุณุชุฎุฏุงู ููุณ ุงูููุฑุฉ ูุน <strong>ุญูู ุงูุชุจุนูุฉ</strong> ูุฅุถุงูุฉ ุญููุฉ ุญุฏุซ ููุนููุฉ ุซุงููุฉ ููุนุงูุฌุงุช ุงูุงุณุชุนูุงู ุงูุฎุงุตุฉ ุจูุง.  ูู ุจุชุบููุฑ ุฑุฏ ุงูุงุชุตุงู ุงูุฃูู ูุฅุถุงูุฉ ุงููุณูุทุฉ ุงูุซุงููุฉ: ูุงุฆู ูููู ุจุชุทุจูู <code>LoopInterface</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php use Psr\Http\Message\ServerRequestInterface; use React\EventLoop\LoopInterface; use React\ChildProcess\Process; use React\Http\Response; return [ '/' =&gt; function (ServerRequestInterface $request, LoopInterface $loop) { $childProcess = new Process('ls'); $childProcess-&gt;start($loop); return new Response( 200, ['Content-Type' =&gt; 'text/html'], file_get_contents('pages/index.html') ); }, '/upload' =&gt; function (ServerRequestInterface $request) { return new Response( 200, ['Content-Type' =&gt; 'text/plain'], 'Upload page' ); }, ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุญููุฉ ุงูุญุฏุซ ุฅูู ุทุฑููุฉ <code>start()</code> ููุนูููุฉ ุงููุฑุนูุฉ.  ูุฃูู ูุญุตู ุงููุนุงูุฌ ุนูู ุญููุฉ ุงูุญุฏุซุ  ููู ูุฎุฒูุฉ ุจุงููุนู ุฏุงุฎู ุฌูุงุฒ ุงูุชูุฌูู ูู ุฎุงุตูุฉ <code>$loop</code> ุงูุฎุงุตุฉ.  ูุญุชุงุฌ ููุท ุฅูู ุชูุฑูุฑู ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก ุงููุนุงูุฌ. </p><br><p style=";text-align:right;direction:rtl">  <code>__invoke()</code> ููุชุญ ูุฆุฉ <code>Router</code> <code>__invoke()</code> ุทุฑููุฉ <code>__invoke()</code> ุ ุจุฅุถุงูุฉ ุงููุณูุทุฉ ุงูุซุงููุฉ ุฅูู ุงุณุชุฏุนุงุก ูุนุงูุฌ ุงูุทูุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ServerRequestInterface $request)</span></span></span><span class="hljs-function"> </span></span>{ $path = $request-&gt;getUri()-&gt;getPath(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Request for: $path\n"</span></span>; $handler = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;routes[$path] ?? <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;notFound($path); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $handler($request, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;loop); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุดูุก!  ูู ุงููุญุชูู ุฃู ูููู ูุฐุง <strong>ุญููุฉ ุชุจุนูุฉ</strong> ูุงููุฉ.  ุญุฏุซ ุฑุญูุฉ ูุจูุฑุฉ ุฅูู ุญุฏ ูุง ูุฏูุฑุฉ ุงูุฃุญุฏุงุซ ุ ุฃููุณ ูุฐููุ  ูู ููู <code>index.php</code> ุฅูู ูุฆุฉ <code>Router</code> ุ ุซู ูู ูุฆุฉ <code>Router</code> ุฅูู ููู <code>routes.php</code> ูุจุงุดุฑุฉ ุฏุงุฎู ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ูุชุฃููุฏ ุฃู ุงูุนูููุฉ ุงููุฑุนูุฉ ุณุชููู ุจุณุญุฑูุง ุบูุฑ ุงููุญุธูุฑ ุ ุฏุนูุง ูุณุชุจุฏู <code>ls</code> ุงูุจุณูุท ุจู <code>ping 8.8.8.8</code> ุงูุฃุซูู <code>ping 8.8.8.8</code> .  ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู ูุญุงูู ูุฑุฉ ุฃุฎุฑู ููุชุญ ุตูุญุชูู ูู ูุงูุฐุชูู ูุฎุชููุชูู.  ุฃููุงู ุ <code>http://127.0.0.1:8080/</code> ุ ุซู <code>/upload</code> .  ูุชู ูุชุญ ููุง ุงูุตูุญุชูู ุจุณุฑุนุฉ ุ ุฏูู ุฃู ุชุฃุฎูุฑ ุ ุนูู ุงูุฑุบู ูู ุชูููุฐ ุงูุฃูุฑ <code>ping</code> ูู ุงููุนุงูุฌ ุงูุฃูู ูู ุงูุฎูููุฉ.  ูุฐุง ุ ุจุงูููุงุณุจุฉ ุ ูุนูู ุฃูู ูููููุง ุชูุฑุน ุฃู ุนูููุฉ ููููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูุนุงูุฌุฉ ุงููููุงุช ุงููุจูุฑุฉ) ุ ุฏูู ุญุธุฑ ุงูุชุทุจูู ุงูุฑุฆูุณู. </p><br><h4 id="svyazyvaem-docherniy-process-i-otvet-s-pomoschyu-potokov" style=";text-align:right;direction:rtl">  ุฑุจุท ุงูุนูููุฉ ูุงูุงุณุชุฌุงุจุฉ ุงููุฑุนูุฉ ุจุงุณุชุฎุฏุงู ุงูุฎููุท </h4><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุนูุฏ ุฅูู ุชุทุจูููุง.  ูุฐูู ุ ุฃูุดุฃูุง ุนูููุฉ ูุฑุนูุฉ ุ ุจุฏุฃูุงูุง ุ ูููู ูุชุตูุญูุง ูุง ูุนุฑุถ ูุชุงุฆุฌ ุนูููุฉ ูุชุดุนุจุฉ ุจุฃู ุดูู ูู ุงูุฃุดูุงู.  ุฏุนูุง ูุตูุญู. </p><br><p style=";text-align:right;direction:rtl">  ููู ูููููุง ุงูุชูุงุตู ูุน ุนูููุฉ ุงูุทููุ  ูู ุญุงูุชูุง ุ ูุฏููุง ุฃูุฑ ุชุดุบูู <code>ls</code> ูุนุฑุถ ูุญุชููุงุช ุงูุฏููู ุงูุญุงูู.  ููู ูุญุตู ุนูู ูุฐุง ุงูุงุณุชูุชุงุฌ ุ ุซู ูุฑุณูู ุฅูู ูุต ุงูุฌูุงุจุ  ุงูุฌูุงุจ ุงููุฎุชุตุฑ: ุฎููุท. </p><br><p style=";text-align:right;direction:rtl">  ููุชุญุฏุซ ููููุงู ุนู ุงูุนูููุงุช.  ูุญุชูู ุฃู ุฃูุฑ shell ุชููู ุจุชูููุฐู ุนูู ุซูุงุซุฉ ุชุฏููุงุช ููุจูุงูุงุช: STDIN ู STDOUT ู STDERR.  ุฏูู ุฅูู ุงูุฅุฎุฑุงุฌ ูุงูุฅุฏุฎุงู ุงูููุงุณู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฏูู ุงูุฃุฎุทุงุก.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูููู ุจุชูููุฐ <code>ls</code> ุ ูุชู ุฅุฑุณุงู ูุชูุฌุฉ ูุฐุง ุงูุฃูุฑ ูุจุงุดุฑุฉ ุฅูู STDOUT (ุนูู ุงูุดุงุดุฉ ุงูุทุฑููุฉ).  ูุฐุง ุ ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุงูุญุตูู ุนูู ูุฎุฑุฌุงุช ุงูุนูููุฉ ุ ูุฅู ุงููุตูู ุฅูู ุฏูู ุงูุฅุฎุฑุงุฌ ูุทููุจ.  ุงูุฃูุฑ ุจูุฐู ุงูุจุณุงุทุฉ.  ูู ุฅูุดุงุก ุนูุตุฑ ุงูุงุณุชุฌุงุจุฉ ุ <code>$childProcess-&gt;stdout</code> ุงุณุชุฏุนุงุก <code>file_get_contents()</code> ุจู <code>$childProcess-&gt;stdout</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response( <span class="hljs-number"><span class="hljs-number">200</span></span>, [<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text/plain'</span></span>], $childProcess-&gt;stdout );</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฌููุน ุงูุนูููุงุช ุงููุฑุนูุฉ ููุง ุซูุงุซ ุฎุตุงุฆุต ุชุชุนูู <code>stdio</code> : <code>stdout</code> ู <code>stdin</code> ู <code>stderr</code> .  ูู ุญุงูุชูุง ุ ูุฑูุฏ ุนุฑุถ ูุงุชุฌ ุงูุนูููุฉ ุนูู ุตูุญุฉ ููุจ.  ุจุฏูุงู ูู ุณูุณูุฉ ูู ูููุดุฆ ูุฆุฉ <code>Response</code> ุ ูููู ุจุชูุฑูุฑ ุฏูู ููุณูุทุฉ ุซุงูุซุฉ.  ูุฆุฉ <code>Response</code> ุฐููุฉ ุจูุง ูููู ูุฅุฏุฑุงู ุฃููุง ุชููุช ุงูุฏูู ููุนุงูุฌุชู ููููุง ูุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ูุงูุนุงุฏุฉ ุ ูุนูุฏ ุชุดุบูู ุงูุฎุงุฏู ููุฑู ูุง ูููุง ุจู.  ุฏุนููุง ููุชุญ ุงูุตูุญุฉ <code>http://127.0.0.1:8080/</code> ูู ุงููุชุตูุญ: ูุฌุจ ุฃู ุชุดุงูุฏ ูุงุฆูุฉ ูููุงุช ุงููุฌูุฏ ุงูุฌุฐุฑ ูููุดุฑูุน. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mm/ui/za/mmuizadmcw-fzg1cekm0d1jpz3e.png"></p><br><p style=";text-align:right;direction:rtl">  ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุงุณุชุจุฏุงู <code>ls</code> ุจุดูุก ุฃูุซุฑ ูุงุฆุฏุฉ.  ุจุฏุฃูุง ูุฐุง ุงููุตู ุนู ุทุฑูู ุชูุฏูู ููู <code>pages/index.html</code> ุจุงุณุชุฎุฏุงู ูุธููุฉ <code>file_get_contents()</code> .  ุงูุขู ุ ูููููุง ูุฑุงุกุฉ ูุฐุง ุงูููู ุจุดูู ุบูุฑ ูุชุฒุงูู ุชูุงููุง ุ ุฏูู ุงูููู ูู ุฃูู ุณูุญุธุฑ ุชุทุจูููุง.  ุงุณุชุจุฏู <code>ls</code> <code>cat pages/index.html</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชูู ุนูู ุฏุฑุงูุฉ <code>cat</code> ุ ูุชู ุงุณุชุฎุฏุงูู ูุฑุจุท ุงููููุงุช ูุฅุฎุฑุงุฌูุง.  ูู ูุนุธู ุงูุฃุญูุงู ุ ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฃูุฑ ููุฑุงุกุฉ ููู ูุฅุฎุฑุงุฌ ูุญุชููุงุชู ุฅูู ุงูุฅุฎุฑุงุฌ ุงูููุงุณู.  ููุฑุฃ ุงูุฃูุฑ <code>cat pages/index.html</code> ููู <code>cat pages/index.html</code> ููุทุจุน ูุญุชููุงุชู ุฅูู STDOUT.  ููุญู ุจุงููุนู ูุฑุณู <code>stdout</code> ูููุฆุฉ ุงุณุชุฌุงุจุฉ.  ูููุง ููู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ูู ููู <code>routes.php</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// routes.php use Psr\Http\Message\ServerRequestInterface; use React\EventLoop\LoopInterface; use React\ChildProcess\Process; use React\Http\Response; return [ '/' =&gt; function (ServerRequestInterface $request, LoopInterface $loop) { $childProcess = new Process('cat pages/index.html'); $childProcess-&gt;start($loop); return new Response( 200, ['Content-Type' =&gt; 'text/html'], $childProcess-&gt;stdout ); }, '/upload' =&gt; function (ServerRequestInterface $request) { return new Response( 200, ['Content-Type' =&gt; 'text/plain'], 'Upload page' ); }, ];</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ูุงู ูู ูุฐุง ุงูุฑูุฒ ูุทููุจูุง ููุท ูุงุณุชุจุฏุงู ููุงููุฉ ูุงุญุฏุฉ ุจุฏุงูุฉ <code>file_get_contents()</code> .  ุญูู ุงูุชุจุนูุฉ ุ ุชูุฑูุฑ ูุงุฆู ุญููุฉ ุญุฏุซ ุ ุฅุถุงูุฉ ุงูุนูููุงุช ุงูุชุงุจุนุฉ ูุงูุนูู ูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท.  ูู ูุฐุง ููุฌุฑุฏ ุงุณุชุจุฏุงู ุงุณุชุฏุนุงุก ุฏุงูุฉ ูุงุญุฏุฉ.  ูู ูุงู ูุณุชุญู ุฐููุ  ุงูุฌูุงุจ: ูุนู ุ ูุงู ุงูุฃูุฑ ูุณุชุญู ุฐูู.  ุนูุฏูุง ูููู ูุดูุก ูุง ุฃู ูุญุฌุจ ุญููุฉ ุงูุญุฏุซ ุ ููููู ููุธุงู ุงููููุงุช ุจุงูุชุฃููุฏ ุ ุชุฃูุฏ ูู ุฃูู ุณูุชู ุญุธุฑู ูู ููุงูุฉ ุงููุทุงู ุ ููู ุฃูุซุฑ ุงูุฃููุงุช ุบูุฑ ุงูููุงุณุจุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูุจุฏู ุฅูุดุงุก ุนูููุฉ ูุฑุนูุฉ ูู ูู ูุฑุฉ ูุญุชุงุฌ ูููุง ูููุตูู ุฅูู ูุธุงู ุงููููุงุช ุจูุซุงุจุฉ ุญูู ุฅุถุงูู ุณูุคุซุฑ ุนูู ุณุฑุนุฉ ูุฃุฏุงุก ุชุทุจูููุง.  ูุณูุก ุงูุญุธ ุ ูู PHP ูุง ุชูุฌุฏ ุทุฑููุฉ ุฃุฎุฑู ููุนูู ูุน ูุธุงู ุงููููุงุช ุจุดูู ุบูุฑ ูุชุฒุงูู.  ุชุณุชุฎุฏู ุฌููุน ููุชุจุงุช PHP ุบูุฑ ุงููุชุฒุงููุฉ ุงูุนูููุงุช ุงููุฑุนูุฉ (ุฃู ุงูุงูุชุฏุงุฏุงุช ุงูุชู ุชุฌุฑุฏูุง). </p><br><p style=";text-align:right;direction:rtl">  ูููู ููุฑุงุก Habra ุดุฑุงุก ุงููุชุงุจ ุจุงููุงูู ุจุฎุตู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ูุฐุง ุงูุฑุงุจุท</a> . </p><br><p style=";text-align:right;direction:rtl">  ููุฐูุฑู ุฃููุง ูุจุญุซ ุฏุงุฆููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนู ูุทูุฑูู ุฑุงุฆุนูู</a> !  ุชุนุงู ุ ูุญู ูุณุชูุชุน! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar416003/">https://habr.com/ru/post/ar416003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar415993/index.html">ุนู ุจุนุฏ ุ ุฃูุช ุฏููู ูุง ุชุฑุญู</a></li>
<li><a href="../ar415995/index.html">ุชุทููุฑ CROC ูู ุงูุฏุงุฎู: ุงููุงุณ ูุงูุจุท ูุงููุซูุฑ ูู ุงูุนูู</a></li>
<li><a href="../ar415997/index.html">ุจุฑูุงูุฌ ุชุนูู ุงูุขูุฉ Python</a></li>
<li><a href="../ar415999/index.html">ูุง ูู ููุญุฉ Apple ุงูุฏุฑุงุณูุฉ ูููุงุฐุง ูู ุฃูุซุฑ ูู ูุฌุฑุฏ ุชุฐูุฑุฉ WWDC</a></li>
<li><a href="../ar416001/index.html">ุฑุณุงุฆู ูู ูููุน ูู VK - ุจุณูุทุฉ ููุนุงูุฉ - PHP + CUrl</a></li>
<li><a href="../ar416005/index.html">16 ุฃุฏูุงุช ุชูุงุนู ููุทูุฑู ุงููุงุฌูุฉ</a></li>
<li><a href="../ar416007/index.html">ููุท ูุนูุฏุฉ. ุจุฏุงูุฉ ุฅูุดุงุก "ุงูููุฒู ุงูุฐูู" ุงููุงุณููู. ูุนุชูุฏ ุนูู ุชูููุฉ Linux ู Z-Wave ูุจุฑูุงูุฌ MajorDoMo</a></li>
<li><a href="../ar416009/index.html">ุฌุฑุจ ูุถูุงุช ุงูุฃุฑุงูุจ ุ ููู ูููุฉ ุ ุณุชูุชูุท - ููุชุทูุงุช ูู ุนูู ุงูุตูุฏูุฉ</a></li>
<li><a href="../ar416011/index.html">ููุท BIF: ููุฏ ุฃูุงูู ูุธูู ูุนูู ูุฑูุญ ูุน ุจูุงูุงุช ุงูุฎุงุฏู</a></li>
<li><a href="../ar416013/index.html">ููููุฉ ุงูุจุฏุก ูู ุงูุงุณุชุซูุงุฑ ูุชูููุฑ ุงููุงู: ุฐูุฑ ุฎุจุฑุงุก ุฏุงู ุฌููุฒ ุงูุฃุฎุทุงุก ุงูุฎูุณุฉ ุงูุฑุฆูุณูุฉ ูููุชุฏุงูููู ุงููุจุชุฏุฆูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>