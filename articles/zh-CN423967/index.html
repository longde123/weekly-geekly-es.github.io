<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📺 🕴🏻 😂 关于RTOS的全部真相。 第10条 计划程序：高级功能和上下文保留 💇🏼 🙆🏽 💉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在上一篇文章中，我们研究了RTOS支持的各种类型的计划以及Nucleus SE中的相关功能。 在本文中，我们将介绍Nucleus SE中的其他计划选项以及保存和还原上下文的过程。 

 该系列中的先前文章： 
 第9条。 调度程序：实施 
 第8条 Nucleus SE：内部设计和部署 
 第7条 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>关于RTOS的全部真相。 第10条 计划程序：高级功能和上下文保留</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423967/"><img src="https://habrastorage.org/webt/m-/ag/9y/m-ag9yjhbtfwdjmljyermwi6duu.jpeg"><br><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上一篇文章中，</a>我们研究了RTOS支持的各种类型的计划以及Nucleus SE中的相关功能。 在本文中，我们将介绍Nucleus SE中的其他计划选项以及保存和还原上下文的过程。 <br><a name="habracut"></a><br> 该系列中的先前文章： <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第9条。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">调度程序：实施</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第8条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nucleus SE：内部设计和部署</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第7条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nucleus SE：简介</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第6条。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">其他RTOS服务</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第5条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">任务交互和同步</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第4条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">任务，上下文切换和中断</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">任务与计划</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2条。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RTOS：结构和实时模式</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1条</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RTOS：简介。</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><br></a> <br><h2> 可选功能 </h2><br> 在开发Nucleus SE的过程中，我将最大数量的功能设置为可选，从而节省了内存和/或时间。 <br><br><h3> 挂起任务 </h3><br> 如之前在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“规划器：实施”文章中所述</a> ，Nucleus SE支持各种用于暂停任务的选项，但是此功能是可选的，并且包含在<b>nuse_config.h</b>中的<b>NUSE_SUSPEND_ENABLE</b>符号中。 如果设置为<b>TRUE</b> ，则数据结构定义为<b>NUSE_Task_Status []</b> 。 这种类型的暂停适用于所有任务。 该数组的类型为<b>U8</b> ，其中两个半字节分别使用。 低4位包含任务的状态： <br>  <b>NUSE_READY，NUSE_PURE_SUSPEND</b> ， <b>NUSE_SLEEP_SUSPEND</b> ， <b>NUSE_MAILBOX_SUSPEND</b>等。 如果通过API调用挂起任务（例如<b>NUSE_MAILBOX_SUSPEND</b> ），则高4位包含挂起任务的对象的索引。 当资源可用时将使用此信息，并调用API需要找出哪些挂起的任务需要恢复。 <br><br> 要执行任务挂起，需要使用一对调度程序函数： <b>NUSE_Suspend_Task（）</b>和<b>NUSE_Wake_Task（）</b> 。 <br><br>  <b>NUSE_Suspend_Task（）</b>代码如下： <br><br><img src="https://habrastorage.org/webt/ep/1j/gi/ep1jgiocsfdclopsjghruszeggq.png"><br><br> 该函数保存任务的新状态（全部8位），该状态作为suspend_code参数获得。 启用锁定时（请参见下面的“锁定API调用”），将<b>保存NUSE_SUCCESS</b>返回代码。 接下来， <b>调用NUSE_Reschedule（）</b>将控制权转移到下一个任务。 <br><br>  <b>NUSE_Wake_Task（）</b>代码非常简单： <br><br><img src="https://habrastorage.org/webt/br/of/0p/brof0ptcaza3ovc4ykffacmkphy.png"><br><br> 任务的状态设置为<b>NUSE_READY</b> 。 如果未使用优先级调度程序，则当前任务将继续占用处理器，直到需要释放资源为止。 如果使用优先级调度程序，则<b>NUSE_Reschedule（）</b>会以任务索引作为完成指示，因为任务可能具有更高的优先级并且必须立即执行。 <br><br><h3> 锁定API调用 </h3><br>  Nucleus RTOS支持许多API调用，如果资源不可用，开发人员可以通过它们调用（暂停）任务。 资源再次可用时，任务将恢复。 此机制也已在Nucleus SE中实现，并且适用于许多内核对象：可以将任务锁定在内存部分，事件组，邮箱，队列，通道或信号量中。 但是，与Nucleus SE中的大多数工具一样，它是可选的，并且由<b>nuse_config.h</b>中的<b>NUSE_BLOCKING_ENABLE</b>符号定义。 如果设置为<b>TRUE</b> ，则定义数组<b>NUSE_Task_Blocking_Return []</b> ，其中包含每个任务的返回码； 它可能是<b>NUSE_SUCCESS</b>或代码<b>NUSE_MAILBOX_WAS_RESET</b> ，指示在锁定任务时重置了对象。 启用锁定后，将使用条件编译将相应的代码包含在API函数中。 <br><br><h3> 调度台 </h3><br>  Nucleus RTOS计算自任务创建和上次重置以来已安排了多少次任务。 此功能也在Nucleus SE中实现，但它是可选的，由<b>nuse_config.h</b>中的<b>NUSE_SCHEDULE_COUNT_SUPPORT</b>符号定义。 如果设置为<b>TRUE</b> ， <b>则创建U16</b>类型的<b>NUSE_Task_Schedule_Count []</b>数组，该数组将每个任务的计数器存储在应用程序中。 <br><br><h3> 任务的初始状态 </h3><br> 在Nucleus RTOS中创建任务后，可以选择其状态：就绪或暂停。 在Nucleus SE中，默认情况下，所有任务都可以在启动时准备好。 在<b>nuse_config.h中</b>使用<b>NUSE_INITIAL_TASK_STATE_SUPPORT</b>符号选择的选项允许您选择启动状态。  <b>NUSE_Task_Initial_State []</b>数组在<b>nuse_config.c中</b>定义，并且需要为应用程序中的每个任务初始化<b>NUSE_READY</b>或<b>NUSE_PURE_SUSPEND</b> 。 <br><br><h2> 保存上下文 </h2><br> 第3条“任务和计划”中提出了使用RTC（运行至完成）以外的任何类型的计划程序维护任务上下文的想法。 如前所述，有几种维护上下文的方法。 鉴于Nucleus SE不是为32位处理器设计的，我选择使用表而不是堆栈来维护上下文。 <br><br>  <b>ADDR</b>类型<b>NUSE_Task_Context [] []</b>的二维数组用于保存应用程序中所有任务的上下文。 行是<b>NUSE_TASK_NUMBER</b> （应用程序中的任务数），列是<b>NUSE_REGISTERS</b> （需要保存的寄存器数；取决于处理器，并在<b>nuse_types.h中</b>设置<b>）</b> 。 <br><br> 当然，维护上下文和恢复代码取决于处理器。 这是绑定到特定设备（和开发环境）的唯一Nucleus SE代码。 我将举例说明ColdFire处理器的保存/恢复代码。 尽管由于处理器过时，此选择可能看起来很奇怪，但其汇编程序比大多数现代处理器的汇编程序更易于阅读。 该代码非常简单，可以用作为其他处理器创建上下文切换的基础： <br><br><img src="https://habrastorage.org/webt/kw/gw/ct/kwgwctpm3q_igjvz2qfhmbi0awm.png"><br><br> 当需要上下文切换时，在NUSE_Context_Swap中调用此代码。 使用两个变量： <b>NUSE_Task_Active</b> ，当前任务的索引，必须保留其上下文；  <b>NUSE_Task_Next</b> ，要加载其上下文的任务的索引（请参见“全局数据”部分）。 <br><br> 上下文保存过程如下： <br><br><ul><li> 寄存器<b>A0</b>和<b>D0</b>临时存储在堆栈中； </li><li>  <b>A0</b>配置为指向上下文块数组<b>NUSE_Task_Context [] []</b> ； </li><li>  <b>D0</b>使用<b>NUSE_Task_Active</b>加载并乘以72（ColdFire有18个寄存器，需要72个字节来存储）； </li><li> 然后将<b>D0</b>添加到<b>A0</b> ，它现在指向当前任务的上下文块； </li><li> 然后将寄存器存储在上下文块中； 首先是<b>A0</b>和<b>D0</b> （来自堆栈），然后是<b>D1-D7</b>和<b>A1-A6</b> ，然后是<b>SR</b>和<b>PC</b> （来自堆栈，我们将研究快速启动的上下文切换），最后保存堆栈指针。 </li></ul><br> 上下文加载过程是相反的操作序列： <br><br><ul><li>  <b>A0</b>配置为指向上下文块数组<b>NUSE_Task_Context [] []</b> ； </li><li> 使用<b>NUSE_Task_Active</b>加载<b>D0</b> ，并乘以72。 </li><li> 然后将<b>D0</b>添加到<b>A0</b> ，它现在指向新任务的上下文块（由于应该在保存序列的相反过程中完成上下文加载，因此首先需要堆栈指针）； </li><li> 然后从上下文块中恢复寄存器； 首先，将堆栈指针，然后将<b>PC</b>和<b>SR压入</b>堆栈，然后装入<b>D1-D7</b>和<b>A1-A6</b> ，并在<b>D0</b>和<b>A0</b>的末尾。 </li></ul><br> 实现上下文切换的困难在于，许多处理器都很难访问状态寄存器（对于ColdFire，这是<b>SR</b> ）。 常见的解决方案是中断，即程序中断或条件分支中断，这导致<b>SR</b>与<b>PC</b>一起加载到堆栈上。 这就是Nucleus SE在ColdFire上的工作方式。 宏<b>NUSE_CONTEXT_SWAP（）</b>在<b>nuse_types.h中</b>设置，该宏扩展为： <br>  <b>asm（“陷阱＃0”）；</b> <br><br> 以下是上下文块的初始化代码（ <b>nuse_init.c中的NUSE_Init_Task（）</b> ）： <br><br><img src="https://habrastorage.org/webt/h7/8n/td/h78ntdz05whdi70d0pkfx-ffnok.png"><br><br> 这就是堆栈指针， <b>PC</b>和<b>SR</b>初始化的方式。 前两个具有由用户在<b>nuse_config.c中</b>设置的值。  <b>SR</b>的值在<b>nuse_types.h中</b>定义为<b>NUSE_STATUS_REGISTER</b>字符。 对于ColdFire，此值为<b>0x40002000</b> 。 <br><br><h2> 全球数据 </h2><br>  Nucleus SE调度程序只需要很少的内存来存储数据，但是，当然，它使用与任务相关联的数据结构，下面的文章将对此进行详细讨论。 <br><br><h3>  RAM数据 </h3><br> 调度程序不使用ROM中的数据，而是将2到5个全局变量放置在RAM中（所有变量都在<b>nuse_globals.c</b>中设置），具体取决于所使用的调度程序： <br><br><ul><li>  <b>NUSE_Task_Active</b> - <b>U8</b>类型的变量，包含当前任务的索引； </li><li>  <b>NUSE_Task_State</b> - <b>U8</b>类型的变量，包含一个值，该值指示当前正在执行的代码的状态，该状态可以是任务，中断处理程序或启动代码； 可能的值是： <b>NUSE_TASK_CONTEXT</b> ， <b>NUSE_STARTUP_CONTEXT</b> ， <b>NUSE_NISR_CONTEXT</b>和<b>NUSE_MISR_CONTEXT</b> ； </li><li>  <b>NUSE_Task_Saved_State</b> - <b>U8</b>类型的变量，用于在托管中断中保护<b>NUSE_Task_State</b>的值； </li><li>  <b>NUSE_Task_Next</b> - <b>U8</b>类型的变量，包含下一个任务的索引，应该为除RTC之外的所有调度程序进行调度； </li><li>  <b>NUSE_Time_Slice_Ticks-</b>类型为<b>U16</b>的变量，其中包含时间<b>片</b>的计数器； 仅与TS调度程序一起使用。 </li></ul><br><h3> 调度程序数据足迹 </h3><br>  Nucleus SE调度程序不使用ROM数据。  RAM数据的确切数量取决于所使用的调度程序： <br><br><ul><li> 对于RTC-2个字节（ <b>NUSE_Task_Active</b>和<b>NUSE_Task_State</b> ）； </li><li> 用于RR和优先级-4个字节（ <b>NUSE_Task_Active</b> ， <b>NUSE_Task_State</b> ， <b>NUSE_Task_Saved_State</b>和<b>NUSE_Task_Next</b> ）； </li><li> 对于TS，为6个字节（ <b>NUSE_Task_Active</b> ， <b>NUSE_Task_State</b> ， <b>NUSE_Task_Saved_State</b> ， <b>NUSE_Task_Next</b>和<b>NUSE_Time_Slice_Ticks</b> ）。 </li></ul><br><h2> 实施其他计划机制 </h2><br> 尽管Nucleus SE提供了涵盖大多数情况的4种调度程序供您选择，但开放式体系结构允许您为其他情况实现机会。 <br><br><h3> 与后台任务进行时间分片 </h3><br> 如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3条“任务和调度”中所述，</a>简单的时间片调度程序具有局限性，因为它限制了处理器可以执行任务的最大时间。 一个更复杂的选项是增加对后台任务的支持。 可以在分配给已暂停任务的任何插槽上安排此类任务，并在部分释放插槽时运行。 这种方法使您可以按预定的时间间隔安排任务，并以预计的处理器核心时间百分比完成任务。 <br><br><h3> 优先与循环（RR） </h3><br> 在大多数实时内核中，优先级调度程序在每个优先级级别上支持多个任务，这与Nucleus SE不同，在Nucleus SE中，每个任务都有唯一的级别。 我优先选择后者，因为它大大简化了数据结构，从而简化了调度程序代码。 为了支持更复杂的体系结构，将需要大量的ROM和RAM表。 <br><br>  <b>关于作者：</b> Colin Walls在电子行业工作了30多年，大部分时间用于固件。 他现在是Mentor Embedded（Mentor Graphics的一个部门）的固件工程师。  Colin Walls经常在会议和研讨会上发表演讲，他撰写了许多技术文章并撰写了两本有关固件的书。 居住在英国。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Colin的</a>专业<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">博客</a> ，电子邮件：colin_walls@mentor.com。 <br><br>  <b>关于翻译：</b>尽管尽管在某些地方已经描述了过时的方法，但该系列文章似乎很有趣，作者向训练有素的读者介绍了实时OS的功能。 我本人属于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">俄罗斯RTOS</a>的创建者团队，我们<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">打算免费提供它</a> ，我希望这一周期对新手开发人员有用。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN423967/">https://habr.com/ru/post/zh-CN423967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN423957/index.html">用户空间流量生成</a></li>
<li><a href="../zh-CN423959/index.html">水下箱-机器人用</a></li>
<li><a href="../zh-CN423961/index.html">不要迷失自我：一种诊断痴呆的新方法</a></li>
<li><a href="../zh-CN423963/index.html">开尔文角序</a></li>
<li><a href="../zh-CN423965/index.html">您购买了SIEM并确定SOC就在您的口袋里，对吗？</a></li>
<li><a href="../zh-CN423971/index.html">Skillbox星期五网络研讨会：面向开发人员的开发人员</a></li>
<li><a href="../zh-CN423973/index.html">Mirai僵尸网络创建者现在在FBI方面打击犯罪</a></li>
<li><a href="../zh-CN423977/index.html">在DevOpsConf 2018上与DevOps Deflope会面</a></li>
<li><a href="../zh-CN423979/index.html">英国健康老化生物标志物专家组</a></li>
<li><a href="../zh-CN423981/index.html">DDIA书籍（带猪的书籍）-逐步了解数据库</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>