<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎼 🅱️ 💯 Architecture de la machine d'état Unity pour l'organisation des comportements d'unité 🤕 ↕️ 🕥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La première étape du développement de mon jeu a été le développement du moteur RTS. J'ai l'intention d'écrire une série d'articles sur les problèmes q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Architecture de la machine d'état Unity pour l'organisation des comportements d'unité</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454402/"> La première étape du développement de mon jeu a été le développement du moteur RTS.  J'ai l'intention d'écrire une série d'articles sur les problèmes qui sont survenus et leurs solutions sur ce blog.  Dans cet article, je vais vous expliquer comment j'ai organisé le comportement des unités. <br><br>  En réfléchissant à où commencer ce moteur RTS en général, je suis arrivé à la conclusion qu'il valait la peine de commencer par les détails et de passer de celui-ci à l'abstraction.  La première application qui me vint à l'esprit fut la collecte de ressources, ou plutôt l'extraction du bois. <br><a name="habracut"></a><br>  Habituellement, ce processus dans la plupart des stratégies consiste dans le fait que l'employé, à la réception du décret de couper l'arbre, va à l'arbre, pendant un certain temps agite une pioche près de lui avec une hache, puis va à l'entrepôt et recommence. <br><br>  Autrement dit, le processus ressemble à ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/05c/ddf/4e2/05cddf4e2a5fc658662decf254b4ee32.png" alt="image"><br><br>  Pour que cette image puisse véritablement revendiquer le nom de l'automate, il lui manque les conditions de transition entre les états et l'état initial et final. <br><br>  Ici, tout est simple: la machine est initialisée avec l'état "je vais couper", et la fin du travail se produit lors du changement.  Nous pouvons exprimer les transitions entre les États en utilisant les conditions suivantes: «atteint l'arbre», «coupé un tas de bois de chauffage», «atteint l'entrepôt», «cédé des ressources».  Si la réponse est oui, la machine passe à l'état suivant, si elle est négative, elle reste à l'état actuel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/051/5ed/d90/0515edd90af92dca98379f781a4a85ce.png" alt="image"><br><br>  Dans chacun des états de l'automate, l'action correspondante est invoquée lors de l'itération.  Un ensemble d'actions peut également être effectué lors de la transition entre les états. <br><br>  Par exemple, lors de l'itération dans l'état "Remise", les ressources du sac à dos de l'unité seront transférées vers le magasin de ressources du joueur, et lors du passage de l'état "Going to chop" à l'état "Rouble", l'animation correspondante démarrera. <br><br>  Je note également que la marche elle-même n'est pas une opération «atomique», elle se retrouve dans de nombreux comportements et est elle-même un comportement, et donc le comportement d'extraction d'arbre utilise en fait le comportement de marcher à l'intérieur de lui-même.  Autrement dit, un nouvel automate peut être obtenu en utilisant la composition de plusieurs autres automates finis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66a/f4c/1e5/66af4c1e51968bd7c65a07c3d9958543.png" alt="image"><br><br>  En écrivant les comportements de cette manière, nous obtenons une frontière architecturale entre les détails de la mise en œuvre des comportements et la politique de haut niveau de gestion de ces comportements.  Les implémentations de comportements deviennent essentiellement des plug-ins pour le reste du jeu, c'est-à-dire que leurs modifications n'affecteront pas l'exactitude du travail de la logique de haut niveau. <br><br>  Ces comportements fonctionnent en appelant la méthode d'itération à partir de l'événement Update d'objets de type Unit (cet événement déclenche chaque trame).  Pour communiquer avec le reste du monde, les méthodes IStateMachineListener sont appelées. <br><br>  Ceci est un exemple de construction de machine d'état dans mon jeu.  À la réception d'une équipe de construction, l'unité se rend au point spécifié, puis entre dans l'état de construction directe, transférant les unités de construction dans le bâtiment.  Lorsque le bâtiment a accumulé suffisamment d'unités de construction, la machine de construction se termine et l'unité reçoit un nouveau comportement, le comportement par défaut. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/F-3sYSvgio0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  C’est tout.  Si vous aimez ou n'aimez pas ce format, écrivez-le dans les commentaires! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454402/">https://habr.com/ru/post/fr454402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454388/index.html">ARA: algorithme pour trouver le nombre maximum de points sur une ligne droite</a></li>
<li><a href="../fr454394/index.html">Lecteur MIDI minimaliste en quatre parties</a></li>
<li><a href="../fr454396/index.html">Installer sdl2 sur les principales distributions</a></li>
<li><a href="../fr454398/index.html">Des critiques aux algorithmes: comment la démocratie et la technocratie sont venues dans l'industrie musicale</a></li>
<li><a href="../fr454400/index.html">Rapports quotidiens sur l'état des machines virtuelles avec R et PowerShell</a></li>
<li><a href="../fr454404/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 6. Remplissez les blancs (DHCP, TCP, «handshake», numéros de port communs)</a></li>
<li><a href="../fr454406/index.html">Akihabara: site de nidification des otaku</a></li>
<li><a href="../fr454408/index.html">CortexM3 / M4 (ARM) bande de bits matérielle, architecture du noyau, assembleur, C / C ++ 14 et une goutte de métaprogrammation</a></li>
<li><a href="../fr454410/index.html">Nouveau dans PHP 7.4</a></li>
<li><a href="../fr454414/index.html">SDL 2 Lessons: Lesson 2 - Main Non-Rubber</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>