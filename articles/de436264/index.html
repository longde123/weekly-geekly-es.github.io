<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö≤ ü§¥ ‚ö±Ô∏è Mono-Repositories: bitte nicht (Teil 2) üë®üèø‚Äçüíº üõÖ üöæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 

 Also ein neuer Teil des versprochenen Holivars √ºber Monorepositories. Im ersten Teil diskutierten wir die √úbersetzung eines Artik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mono-Repositories: bitte nicht (Teil 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436264/"> Hallo allerseits! <br><br>  Also ein neuer Teil des versprochenen Holivars √ºber Monorepositories.  Im ersten Teil diskutierten wir die √úbersetzung eines Artikels eines angesehenen Ingenieurs aus Lyft (und zuvor Twitter) √ºber die Nachteile von Mono-Repositories und warum sie fast alle Vorteile dieses Ansatzes ausgleichen.  Pers√∂nlich stimme ich den Argumenten des Originalartikels weitgehend zu.  Um dieser Diskussion ein Ende zu setzen, m√∂chte ich, wie versprochen, noch einige Punkte ansprechen, die meiner Meinung nach noch wichtiger und praktischer sind. <br><a name="habracut"></a><br>  Ich erz√§hle Ihnen ein wenig √ºber mich selbst - ich habe sowohl in kleinen als auch in relativ gro√üen Projekten gearbeitet und in einem Projekt mit mehr als 100 Microservices (und SLA 99,999%) Polyrepositorys verwendet.  Im Moment besch√§ftige ich mich mit der √úbersetzung eines kleinen Mono-Repositorys (eigentlich nicht nur des vorderen js + java-Backends) von maven nach bazel.  Funktionierte nicht bei Google, Facebook, Twitter, d.h.  Ich hatte nicht das Vergn√ºgen, ein ordnungsgem√§√ü konfiguriertes und abgestimmtes Mono-Repository zu verwenden. <br><br>  Was ist ein Monorepository f√ºr den Anfang?  Kommentare zur √úbersetzung des Originalartikels zeigten, dass viele glauben, dass ein Mono-Repository ist, wenn alle 5 Unternehmensentwickler an einem Repository arbeiten und das Frontend und das Backend zusammen darin speichern.  Das ist nat√ºrlich nicht so.  Ein Mono-Repository ist eine M√∂glichkeit, alle Unternehmensprojekte, Bibliotheken, Build-Tools, Plug-Ins f√ºr IDEs, Bereitstellungsskripte und alles andere in einem gro√üen Repository zu speichern.  Details hier finden Sie unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">trunkbaseddevelopment.com</a> . <br><br>  Wie hei√üt der Ansatz, wenn das Unternehmen klein ist und einfach nicht so viele Projekte, Module und Komponenten hat?  Dies ist auch ein Monorepository, nur ein kleines. <br>  Nat√ºrlich hei√üt es im Originalartikel, dass alle beschriebenen Probleme in einem bestimmten Ausma√ü auftreten.  Daher sind diejenigen, die schreiben, dass ihr Mono-Repository mit 1,5 Baggern perfekt funktioniert, mit Sicherheit absolut richtig. <br><br>  Die erste Tatsache, die ich beheben m√∂chte: Ein <b>Monorepository ist ein guter Anfang f√ºr Ihr neues Projekt</b> .  Wenn Sie den gesamten Code auf einen Haufen legen, erhalten Sie zun√§chst nur einen Vorteil, weil  Die Unterst√ºtzung mehrerer Repositorys erh√∂ht sicherlich den Aufwand. <br><br>  Was ist dann das Problem?  Und das Problem beginnt, wie im Originalartikel erw√§hnt, in einem bestimmten Ausma√ü.  Und vor allem sollten Sie den Moment nicht verpassen, in dem eine solche Skala bereits eingetroffen ist. <br><br>  Daher bin ich geneigt zu behaupten, dass die auftretenden Probleme im Wesentlichen nicht die Probleme des Ansatzes "Setzen Sie Ihren gesamten Code auf einen Heap" sind, sondern Probleme einfach gro√üer Quellcode-Repositorys.  Das hei√üt,  Unter der Annahme, dass Sie Polyrepositorys f√ºr verschiedene Dienste / Komponenten verwendet haben und einer dieser Dienste so gro√ü geworden ist (wie gro√ü wir sp√§ter diskutieren werden), werden Sie h√∂chstwahrscheinlich genau dieselben Probleme bekommen, aber auch ohne die Vorteile von Mono-Repositorys (falls vorhanden) , nat√ºrlich gibt es). <br><br>  Wie gro√ü sollte das Repository sein, um als problematisch eingestuft zu werden? <br>  Es gibt definitiv zwei Indikatoren, von denen dies abh√§ngt - die Menge an Code und die Anzahl der Entwickler, die mit diesem Code arbeiten.  Wenn Ihr Projekt Terabyte an Code enth√§lt, aber 1-2 Personen damit arbeiten, werden sie h√∂chstwahrscheinlich fast keine Probleme bemerken (naja, oder zumindest ist es einfacher, nichts zu tun, selbst wenn sie es bemerken :) <br><br>  Wie k√∂nnen Sie feststellen, dass es an der Zeit ist, √ºber eine Verbesserung Ihres Repositorys nachzudenken?  Dies ist nat√ºrlich ein subjektiver Indikator. H√∂chstwahrscheinlich werden sich Ihre Entwickler beschweren, dass etwas nicht zu ihnen passt.  Das Problem ist jedoch, dass es m√∂glicherweise zu sp√§t ist, etwas zu √§ndern.  Ich gebe Ihnen einige pers√∂nliche Zahlen: Wenn das Klonen Ihres Repositorys l√§nger als 10 Minuten dauert, wenn das Erstellen eines Projekts l√§nger als 20 bis 30 Minuten dauert, wenn die Anzahl der Entwickler 50 √ºberschreitet, und so weiter. <br><br><div class="spoiler">  <b class="spoiler_title">Eine interessante Tatsache aus der pers√∂nlichen Praxis:</b> <div class="spoiler_text">  Ich habe in einem Team von ungef√§hr 50 Entwicklern, aufgeteilt in mehrere kleine Teams, an einem ziemlich gro√üen Monolithen gearbeitet.  Die Entwicklung wurde in Feature-Brunchs durchgef√ºhrt, und die Zusammenf√ºhrung erfolgte kurz vor dem Einfrieren der Features.  Einmal verbrachte ich 3 Tage mit dem Zusammenschluss unserer Teamabteilung, nachdem 6 andere Teams vor mir gefroren waren. <br></div></div><br>  Lassen Sie uns nun die Liste der Probleme durchgehen, die in gro√üen Repositories auftreten (einige davon wurden im Originalartikel erw√§hnt, andere nicht). <br><br><h4>  1) Repository-Downloadzeit </h4><br>  Einerseits k√∂nnen wir sagen, dass dies eine einmalige Operation ist, die der Entwickler w√§hrend der Ersteinrichtung seiner Workstation ausf√ºhrt.  Pers√∂nlich habe ich oft Situationen, in denen ich ein Projekt in einen benachbarten Ordner klonen, tiefer darin graben und es dann l√∂schen m√∂chte.  Wenn das Klonen jedoch l√§nger als 10 bis 20 Minuten dauert, ist dies nicht so praktisch. <br><br>  Vergessen Sie jedoch nicht, dass Sie vor dem Erstellen des Projekts auf dem CI-Server das Repository f√ºr jeden Build-Agenten klonen m√ºssen.  Und hier beginnen Sie herauszufinden, wie Sie diese Zeit sparen k√∂nnen, denn wenn jede Baugruppe 10 bis 20 Minuten l√§nger dauert und das Ergebnis der Baugruppe 10 bis 20 Minuten sp√§ter angezeigt wird, ist dies f√ºr niemanden geeignet.  Das Repository wird also in den Images der virtuellen Maschinen angezeigt, von denen aus die Agenten bereitgestellt werden. Zus√§tzliche Komplexit√§t und zus√§tzliche Kosten f√ºr die Unterst√ºtzung dieser L√∂sung treten auf. <br><br><h4>  2) Bauzeit </h4><br>  Dies ist ein ziemlich offensichtlicher Punkt, der schon oft diskutiert wurde.  Wenn Sie viele Quellcodes haben, wird die Montage in jedem Fall eine betr√§chtliche Zeit in Anspruch nehmen.  Eine bekannte Situation ist, wenn Sie nach dem √Ñndern einer Codezeile eine halbe Stunde warten m√ºssen, bis die √Ñnderungen wieder zusammengesetzt und getestet wurden.  Tats√§chlich gibt es nur einen Ausweg: ein Build-System zu verwenden, das auf Caching-Ergebnissen und inkrementellen Builds basiert. <br><br>  Hier gibt es nicht viele Optionen - trotz der Tatsache, dass Caching-Funktionen zum gleichen Gradle hinzugef√ºgt wurden (leider habe ich sie in der Praxis nicht verwendet), bringen sie keinen praktischen Nutzen, da herk√∂mmliche Build-Systeme keine wiederholbaren Ergebnisse erzielen (reproduzierbare Builds).  Das hei√üt,  Aufgrund der Nebenwirkungen des vorherigen Builds muss ohnehin irgendwann die Cache-Bereinigung <code>maven clean build</code> (der Standardansatz f√ºr die <code>maven clean build</code> ).  Daher bleibt nur die M√∂glichkeit, Bazel / Buck / Pants und √§hnliche zu verwenden.  Warum dies nicht sehr gut ist, werden wir etwas sp√§ter besprechen. <br><br><h4>  3) Indizierung der IDE </h4><br>  Mein aktuelles Projekt ist 30 bis 40 Minuten in Intellij IDEA indiziert.  Was ist mit deinem?  Nat√ºrlich k√∂nnen Sie nur einen Teil des Projekts √∂ffnen oder alle unn√∂tigen Module von der Indizierung ausschlie√üen, aber ... Das Problem ist, dass bei jedem Wechsel von einem Zweig zu einem anderen eine Neuindizierung erfolgt.  Deshalb klone ich gerne ein Projekt in ein benachbartes Verzeichnis.  Einige Leute fangen an, den IDE-Cache zwischenzuspeichern :) <br>  &lt;DiCaprio-Bild mit zusammengekniffenen Augen&gt; <br><br><h4>  4) Erstellen Sie Protokolle </h4><br>  Welchen CI-Server verwenden Sie?  Bietet es eine praktische Oberfl√§che zum Anzeigen und Navigieren in mehreren Gigabyte Build-Protokollen?  Leider ist meins nicht :( <br><br><h4>  5) Geschichte der Commits </h4><br>  M√∂chten Sie die Commit-Geschichte sehen?  Ich liebe, besonders in einem Werkzeug mit einer grafischen Oberfl√§che (ich nehme Informationen besser visuell wahr, schimpfe nicht :). <br><div class="spoiler">  <b class="spoiler_title">So sieht der Commit-Verlauf in meinem Repository aus</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/h1/y5/_4/h1y5_4hjo4iyeo6frm57gjwsvgk.png" alt="Bild"><br></div></div><br>  Gef√§llt?  Ist es bequem?  Pers√∂nlich tue ich nicht! <br><br><h4>  6) Gebrochene Tests </h4><br>  Was passiert, wenn jemand fehlerhafte Tests / nicht kompilierten Code im Master ausf√ºhren konnte?  Sie werden sicherlich sagen, dass Ihr CI dies nicht zul√§sst.  Was ist mit den instabilen Tests, die der Autor besteht, und sonst niemand?  Stellen Sie sich nun vor, dass sich dieser Code auf die Maschinen von 300 Entwicklern ausbreitet und keiner von ihnen ein Projekt zusammenstellen kann?  Was tun in einer solchen Situation?  Warten Sie, bis der Autor es bemerkt und korrigiert?  Richtig f√ºr ihn?  √Ñnderungen r√ºckg√§ngig machen?  Im Idealfall lohnt es sich nat√ºrlich, nur guten Code zu schreiben und sofort ohne Fehler zu schreiben.  Dann wird ein solches Problem nicht auftreten. <br>  (F√ºr diejenigen, die die Hinweise im Tank nicht verstanden haben, ist die Diskussion √ºber die negativen Auswirkungen, wenn dies im Repository mit 10 Entwicklern und im Repository mit 300 Entwicklern geschieht, etwas anders.) <br><br><h4>  7) Bot zusammenf√ºhren </h4><br>  Schon mal was davon geh√∂rt?  Wei√üt du warum du es brauchst?  Sie werden lachen, aber dies ist ein weiteres Tool, das es eigentlich nicht geben sollte :) Stellen Sie sich vor, die Erstellungszeit Ihres Projekts betr√§gt 30 Minuten.  Und 100 Entwickler arbeiten an Ihrem Projekt.  Angenommen, jeder von ihnen dr√ºckt 1 Commit pro Tag.  Stellen Sie sich nun ein ehrliches CI vor, mit dem Sie √Ñnderungen am Master erst zusammenf√ºhren k√∂nnen, nachdem sie auf das letzte Commit des Masters angewendet wurden (Rebase). <br><br>  Achtung, die Frage ist: Wie viele Stunden sollte ein so ehrlicher CI-Server an einem Tag haben, um √Ñnderungen von allen Entwicklern zu erdrosseln?  Die richtige Antwort ist 50. Wer richtig geantwortet hat, kann eine Karotte aus einem Regal nehmen.  Oder stellen Sie sich vor, Sie haben gerade Ihr Commit f√ºr das allerletzte Commit an den Master abgeschnitten, die Assembly gestartet und als sie fertig war, hat der Master bereits 20 Commits durchgef√ºhrt.  Wieder von vorne? <br><br>  Merge Bot oder Merge Queue ist also ein Dienst, der den Prozess des erneuten Basierens aller Zusammenf√ºhrungsanforderungen f√ºr einen neuen Master, das Ausf√ºhren von Tests und das Zusammenf√ºhren selbst automatisiert und Commits auch zu Stapeln kombinieren und zusammen testen kann.  Sehr handliche Sache.  Siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">urgify.io</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">k8s test-infra Prow</a> von Google, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bors-ng</a> usw. (Ich verspreche, in Zukunft mehr dar√ºber zu schreiben) <br><br>  Nun zu weniger technischen Problemen: <br><br><h4>  8) Verwenden eines einzelnen Build-Tools </h4><br>  Ehrlich gesagt ist es mir immer noch ein R√§tsel, warum ich das gesamte Mono-Repository mit einem gemeinsamen Build-System zusammenstellen soll.  Warum nicht Javascript mit Garn, Java mit Gradle, Scala mit sbt usw. erstellen?  Wenn jemand die Antwort auf diese Frage kennt (nicht err√§t oder vorschl√§gt, n√§mlich wei√ü), schreibe in die Kommentare. <br><br>  Nat√ºrlich scheint es offensichtlich, dass die Verwendung eines Build-Systems besser ist als mehrere verschiedene.  Aber sie verstehen immer noch, dass jede universelle Sache offensichtlich schlimmer ist als eine spezialisierte, weil  es hat h√∂chstwahrscheinlich nur eine Teilmenge der Funktionen aller spezialisierten.  Schlimmer noch, verschiedene Programmiersprachen k√∂nnen unterschiedliche Paradigmen in Bezug auf Assemblierung, Abh√§ngigkeitsmanagement usw. haben, die sehr schwer in einen gemeinsamen Wrapper zu packen sind.  Ich m√∂chte nicht auf Details eingehen, ich werde ein Beispiel zu bazel geben (siehe Details in einem separaten Artikel) - wir haben 5 unabh√§ngige Implementierungen von Javascript-Assemblierungsregeln f√ºr bazel von 5 verschiedenen Unternehmen auf GitHub gefunden, zusammen mit dem offiziellen von Google.  Es lohnt sich, dar√ºber nachzudenken. <br><br><h4>  9) Allgemeine Ans√§tze </h4><br>  Als Antwort auf den Originalartikel schrieb CTO vom Chef seine Antwort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Monorepo: Bitte tun!</a>  .  In seiner Antwort argumentiert er, dass "die Hauptsache im Monorepo ist, dass es Sie zum Reden bringt und die Fehler sichtbar macht."  Er bedeutet, dass Sie, wenn Sie Ihre API √§ndern m√∂chten, alle Verwendungszwecke finden und Ihre √Ñnderungen mit den Betreuern dieser Codeteile besprechen m√ºssen. <br><br>  Meine Erfahrung ist also genau das Gegenteil.  Es ist klar, dass dies sehr stark von der Ingenieurkultur im Team abh√§ngt, aber ich sehe solide Nachteile in diesem Ansatz.  Stellen Sie sich vor, Sie verwenden einen bestimmten Ansatz, der Ihnen seit einiger Zeit treu dient.  Und so haben Sie sich aus irgendeinem Grund entschieden, ein √§hnliches Problem zu l√∂sen und eine etwas andere Methode zu verwenden, m√∂glicherweise eine modernere.  Wie hoch ist die Wahrscheinlichkeit, dass das Hinzuf√ºgen eines neuen Ansatzes einer √úberpr√ºfung unterzogen wird? <br><br>  In meiner j√ºngsten Vergangenheit erhielt ich mehrmals Kommentare wie ‚ÄûWir haben bereits einen bew√§hrten Pfad, verwenden Sie ihn‚Äú und ‚ÄûWenn Sie einen neuen Ansatz implementieren m√∂chten, aktualisieren Sie den Code an allen 120 Stellen, an denen der alte Ansatz verwendet wird, und erhalten Sie das Update von allen Teams, die daf√ºr verantwortlich sind diese Code-Teile. "  In der Regel endet hier die Begeisterung des ‚ÄûInnovators‚Äú. <br><br>  Und wie viel kostet es Ihrer Meinung nach, einen neuen Dienst in einer neuen Programmiersprache zu schreiben?  Im Repository - √ºberhaupt nicht.  Sie erstellen ein neues Repository, schreiben und verwenden sogar das am besten geeignete Build-System.  Und jetzt das gleiche im Monorepository? <br><br>  Ich verstehe sehr gut, dass "Standardisierung, Wiederverwendung, Code-Sharing", aber das Projekt sollte entwickelt werden.  Meiner subjektiven Meinung nach verhindert ein Monorepository dies eher. <br><br><h4>  10) Open Source </h4><br>  K√ºrzlich wurde ich gefragt: ‚Äû <b>Gibt es Open Source-Tools f√ºr Mono-Repositorys?</b> ‚Äú Ich antwortete: ‚ÄûDas Problem ist, dass Tools f√ºr Mono-Repositorys seltsamerweise im Mono-Repository selbst entwickelt werden.  Daher ist es ziemlich schwierig, sie in Open Source zu integrieren! ‚Äú <br><br>  Schauen Sie sich als Beispiel ein Projekt auf Github mit einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bazel-Plugin f√ºr Intellij IDEA an</a> .  Google entwickelt es in seinem internen Repository und "spritzt" dann Teile davon auf Github mit einem Verlust des Commit-Verlaufs aus, ohne die M√∂glichkeit, eine Pull-Anfrage zu senden, und so weiter.  Ich denke nicht, dass es Open Source ist (hier ist ein Beispiel f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">meine kleine PR</a> , die geschlossen wurde, anstatt zusammengef√ºhrt zu werden, und dann wurden die √Ñnderungen in der n√§chsten Version angezeigt).  √úbrigens wurde diese Tatsache im Originalartikel erw√§hnt, dass Mono-Repositories verhindern, dass sie in Open Source ver√∂ffentlicht werden und eine Community rund um das Projekt schaffen.  Ich denke, viele haben diesem Argument nicht viel Bedeutung beigemessen. <br><br><h4>  Alternativen </h4><br>  Nun, wenn wir dar√ºber sprechen, was zu tun ist, um all diese Probleme zu vermeiden?  Es gibt genau einen Rat: Bem√ºhen Sie sich um ein m√∂glichst kleines Repository. <br>  Aber was hat das Monorepository damit zu tun?  Und obwohl dieser Ansatz Ihnen die M√∂glichkeit nimmt, kleine, leichte und unabh√§ngige Repositories zu haben. <br><br>  Was sind die Nachteile des Polyrepository-Ansatzes?  Ich sehe genau 1: die Unf√§higkeit, den √úberblick dar√ºber zu behalten, wer der Verbraucher Ihrer API ist.  Dies gilt insbesondere f√ºr den Ansatz in Microservices, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚Äûnichts zu teilen‚Äú</a> , bei dem der Code nicht zwischen Microservices herumfummelt.  (Glauben Sie √ºbrigens, dass jemand diesen Ansatz in Mono-Repositorys verwendet?) Leider muss dieses Problem entweder organisatorisch gel√∂st werden oder es sollte versucht werden, Tools zum Durchsuchen von Code zu verwenden, die unabh√§ngige Repositorys unterst√ºtzen (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://sourcegraph.com) /</a> ). <br><br>  Was ist mit Kommentaren wie <b>"Wir haben Polyrepositorys ausprobiert, aber dann mussten wir st√§ndig Funktionen in mehreren Repositorys gleichzeitig implementieren, was l√§stig war und wir haben alles in einem Boiler zusammengef√ºhrt"</b> ?  Die Antwort darauf ist sehr einfach: <b>"Verwechseln Sie die Probleme des Ansatzes nicht mit einer unsachgem√§√üen Zerlegung</b> . <b>"</b>  Niemand behauptet, dass das Repository genau einen Microservice enthalten sollte, und das war's.  Als ich Polyrepositorys verwendete, haben wir eine Familie eng verwandter Mikrodienste perfekt in einem Repository zusammengefasst.  Angesichts der Tatsache, dass es mehr als 100 Dienste gab, gab es jedoch mehr als 20 solcher Repositorys. Das Wichtigste bei der Zerlegung ist, wie diese Dienste bereitgestellt werden. <br><br>  Aber was ist mit dem Argument √ºber die Version?  Mit Mono-Repositorys k√∂nnen Sie schlie√ülich keine Versionen haben und alles von einem Commit aus bereitstellen!  Erstens ist die Versionierung das einfachste aller hier angesprochenen Probleme.  Selbst in einem alten Ding wie Maven gibt es ein Maven-Versions-Plugin, mit dem Sie die Version mit nur einem Klick herunterstufen k√∂nnen.  Und zweitens und vor allem: Verf√ºgt Ihr Unternehmen √ºber mobile Anwendungen?  Wenn ja, dann haben Sie bereits Versionen, und Sie werden davon nichts bekommen! <br><br>  Nun, es gibt immer noch das Hauptargument zur Unterst√ºtzung von Mono-Repositorys - es erm√∂glicht Ihnen, Refactoring in der gesamten Codebasis in einem Commit durchzuf√ºhren!  In der Tat nein.  Wie im urspr√ºnglichen Artikel erw√§hnt, aufgrund der Einschr√§nkungen, die die Bereitstellung auferlegt.  Sie sollten immer bedenken, dass Sie f√ºr eine lange Zeit (die Dauer h√§ngt davon ab, wie Ihr Prozess aufgebaut ist) zwei Versionen desselben Dienstes parallel haben.  Bei meinem letzten Projekt befand sich unser System beispielsweise bei jeder Bereitstellung mehrere Stunden in diesem Zustand.  Dies f√ºhrt dazu, dass es unm√∂glich ist, globale Refactorings durchzuf√ºhren, die die Interaktionsschnittstellen in einem einzigen Commit beeinflussen, selbst in einem Mono-Repository. <br><br><h4>  Anstelle einer Schlussfolgerung: </h4><br>  Also, die angesehenen und wenigen Kollegen, die in Google, Facebook usw. arbeiten.  und kommen Sie hierher, um ihre Mono-Repositories zu verteidigen. Ich m√∂chte sagen: "Keine Sorge, Sie machen alles richtig, genie√üen Sie Ihre Abstimmung, die Hunderttausende oder Millionen menschlicher Stunden verbracht hat.  Sie wurden bereits ausgegeben. Wenn du sie also nicht verwendest, wird es niemand tun. " <br><br>  Und an alle anderen: <b>"Sie sind nicht Google, verwenden Sie keine Mono-Repositories!"</b> <br><br>  <b>P.S.</b>  Wie der angesehene Bobuk im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Radio-T-</a> Podcast bei der Diskussion des Originalartikels feststellte: ‚ÄûEs gibt ~ 20 Unternehmen auf der Welt, die ein einziges Repository verwenden k√∂nnen.  <b>Der Rest sollte es nicht einmal versuchen</b> . ‚Äú </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436264/">https://habr.com/ru/post/de436264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436250/index.html">Blutsauger-Bosse aus dem Zusammenhang geraten oder warum sie immer versagen</a></li>
<li><a href="../de436254/index.html">Ein Bot f√ºr Starcraft in Rust, C oder einer anderen Sprache</a></li>
<li><a href="../de436256/index.html">Einen Job in Deutschland zu bekommen wird einfacher sein</a></li>
<li><a href="../de436260/index.html">Fehler und Fallstricke von Startups bei der Patentierung ihres geistigen Eigentums</a></li>
<li><a href="../de436262/index.html">* Das Ethereum-Update "Konstantinopel" wird aufgrund einer potenziellen Sicherheitsl√ºcke im letzten Moment verschoben</a></li>
<li><a href="../de436266/index.html">Extreme Skalierung in Alibaba JDK</a></li>
<li><a href="../de436268/index.html">Wir sammeln ein komplettes Deck</a></li>
<li><a href="../de436270/index.html">35% der Runet-Zuschauer verwenden √ºberhaupt keinen Computer f√ºr das Internet</a></li>
<li><a href="../de436272/index.html">Visuelle Programmierung f√ºr Sonoff Basic</a></li>
<li><a href="../de436274/index.html">In Russland wird eine mobile Anwendung zur Unfallregistrierung erstellt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>