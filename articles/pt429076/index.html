<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚 👨🏽‍✈️ 🌊 A evolução da pesquisa - como comprar um piano em três cliques 😔 ⛪️ ⛳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anteriormente, no Avito, era possível encontrar o produto certo usando a filtragem de palavras-chave ou a navegação em árvore de categorias. Esse méto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>A evolução da pesquisa - como comprar um piano em três cliques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/429076/"><p>  Anteriormente, no Avito, era possível encontrar o produto certo usando a filtragem de palavras-chave ou a navegação em árvore de categorias.  Esse método, embora parecesse familiar, nem sempre era conveniente - para encontrar um produto ou serviço, era necessário fazer um grande número de cliques.  Mais de um ano atrás, ganhamos relevância, graças à qual a pesquisa se tornou melhor, e agora é mais fácil e conveniente encontrar um produto ou serviço, mesmo na página principal.  Com essa inovação, mercadorias inadequadas e francamente “lixo” deixaram de cair na questão.  E esta é apenas uma das etapas para melhorar sua pesquisa.  Estamos mudando gradualmente a infraestrutura, o que nos permite trabalhar com mais intensidade na qualidade da pesquisa, melhorá-la mais rapidamente e lançar novos recursos que beneficiam vendedores e compradores no Avito. </p><br><p>  No artigo, mostrarei como a pesquisa no Avito mudou: como começamos e agora estamos avançando no sentido de melhorar a vida de nossos usuários e compartilharemos nossas inovações tanto no produto quanto em seu preenchimento - a parte técnica.  Não haverá carne hardcore aqui, mas espero que você goste. </p><br><img src="https://habrastorage.org/webt/19/zx/he/19zxhesvegeiygbo4haapoe4mic.png"><a name="habracut"></a><br><p>  Algumas notas introdutórias: Avito é o serviço de anúncios mais popular da Rússia.  Temos mais de 450 mil anúncios por dia e o número mensal de visitantes únicos chega a 35 milhões, o que faz mais de 140 milhões de pesquisas por dia. </p><br><h1 id="tipichnyy-scenariy-poiska-ranshe">  Cenário de pesquisa típico antes </h1><br><p>  Vejamos um exemplo simples de como uma pesquisa funcionou há mais de um ano.  Suponha que você precise de um piano (bem, por que não?).  Vamos para a página principal, digitamos "piano". </p><br><img src="https://habrastorage.org/webt/yh/jq/di/yhjqdiamdihyfnkermrcwkhwzpq.png"><br><p>  Na extradição, você provavelmente receberá motores, serviços de transporte para piano ou algo semelhante, mas não um instrumento musical. </p><br><img src="https://habrastorage.org/webt/wy/dp/rm/wydprmf6to16xbqxq6mfkpfqlno.png"><br><p>  Isso acontece porque teremos a classificação pela data da veiculação - e esses serviços são colocados com mais frequência. </p><br><img src="https://habrastorage.org/webt/bt/m8/rz/btm8rzqberfol38jrn2uln1ipju.jpeg"><br><p>  Para ver o piano, você precisa especificar a categoria.  Clicamos no cabeçalho "Hobbies e lazer", descemos a árvore de categorias para "Instrumentos musicais" e, em seguida, "Instrumentos para teclado". </p><br><img src="https://habrastorage.org/webt/d1/h2/oq/d1h2oqqqz5gv9snlihpiu51yzau.png"><br><img src="https://habrastorage.org/webt/be/c2/zf/bec2zflrha8wktusuudqo1w3o08.png"><br><p>  E somente depois disso vemos o piano que estávamos procurando. </p><br><img src="https://habrastorage.org/webt/-c/wz/71/-cwz71ifodfnrcda86qj03u__5y.png"><br><p>  Acontece que, para encontrar o anúncio desejado, havia as seguintes opções: </p><br><ul><li>  refinamento da categoria ao pesquisar por palavras-chave, </li><li>  classificação por frescura e preço, </li><li>  filtros </li><li>  pesquise apenas pelo nome. </li></ul><br><h1 id="chto-izmenilos-blagodarya-relevantnosti">  O que mudou devido à relevância </h1><br><p>  Devido à relevância, os anúncios que não se encaixam deixaram de ser incluídos na emissão.  Agora, se você estiver procurando um piano na página principal, provavelmente não verá os serviços de carregadores que o ajudam a transportá-lo, mas verá imediatamente o instrumento musical que deseja.  Ao mesmo tempo, uma nova classificação foi adicionada - "Por padrão".  É formado por dois indicadores: relevância do anúncio para a consulta de texto e atualização. </p><br><img src="https://habrastorage.org/webt/oc/p_/ry/ocp_rycbztfxg1fdvec-3usu0cm.png"><br><p>  No topo, você vê os mais recentes dos relevantes. </p><br><img src="https://habrastorage.org/webt/cg/md/pq/cgmdpq3ogawjuoqf4cr66l17gr0.png"><br><p>  No Avito, por uma taxa adicional, você pode aumentar seu anúncio.  E com a introdução da relevância, as melhorias pagas funcionam com mais eficiência.  Antes de tudo, eles funcionarão se o seu anúncio for relevante para a consulta de texto. </p><br><p>  A introdução da relevância não significa que abandonamos completamente as transições para a árvore de categorias.  Apenas na maioria dos casos, reduzimos o número de cliques no anúncio desejado ao pesquisar na página principal.  Se você ainda precisar de serviços de transporte, embora tenha digitado "piano" na pesquisa, acesse a árvore de categorias e encontrará esses anúncios.  A pesquisa também começou a funcionar com mais eficiência e dentro da categoria, por exemplo, “Itens pessoais” e “Eletrodomésticos”. </p><br><h1 id="kak-nayti-nuzhnyy-tovar-v-tri-klika">  Como encontrar o produto certo em três cliques </h1><br><p>  A pesquisa está se tornando mais conveniente para os usuários, não apenas devido à qualidade dos resultados da pesquisa.  Existem outras maneiras de melhorar isso.  Um deles está encaminhando para a categoria.  Por exemplo, estamos procurando Lamborghini Gayardo (sim, você gosta de tocar piano e quer tocar Lamborghini).  Para entrar na categoria de um carro de um modelo específico, é necessário fazer dois cliques extras.  Com relevância, provavelmente você conseguirá o que deseja. </p><br><img src="https://habrastorage.org/webt/vd/d0/-y/vdd0-ymtzuq15oeaxe_bdikffne.png"><br><p>  Mas há um método adicional que o jogará imediatamente em carros.  A emissão será reduzida, o carro certo será selecionado nos filtros e você realmente receberá carros na emissão. </p><br><img src="https://habrastorage.org/webt/xq/b_/7v/xqb_7v4xa6vmvo4rtt88h8yvttk.png"><br><img src="https://habrastorage.org/webt/vo/lk/yo/volkyo_aktkx5cemgpd9fvy2hp4.png"><br><p>  Outra maneira é expandir as tags.  Por exemplo, quando você digita a palavra "paletó", recebe dicas. </p><br><img src="https://habrastorage.org/webt/mv/7q/si/mv7qsiygsxehsjbl0pkctnhykjo.png"><br><p>  A captura de tela acima mostra as dicas: o tipo de jaqueta - feminina, masculina, para meninas, para meninos.  Se você clicar em "Para meninas", você entrará imediatamente na categoria em que os filtros apropriados serão selecionados.  Um conjunto de tags de expansão adicionais também aparecerá aqui: jaqueta de inverno, couro, nova e assim por diante.  Se você descer manualmente a árvore de categorias até o produto desejado, precisará executar mais ações. </p><br><img src="https://habrastorage.org/webt/4k/hq/vg/4khqvgdpjs1sgxhb_icjrxl__v0.png"><br><h1 id="v-chem-raznica-mezhdu-poiskom-i-filtrami">  Qual é a diferença entre pesquisa e filtros </h1><br><p>  Quando falei no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RIT ++</a> , o público fez uma pergunta: qual é a diferença entre a pesquisa de texto e os filtros?  Tudo é bem simples.  Você também pode encontrar o anúncio desejado sem uma solicitação de texto descendo a árvore de categorias.  Nesse caso, a pesquisa ainda encontrará bens e serviços, não pelo texto fornecido, mas pelo conjunto de parâmetros passados ​​dos filtros correspondentes da categoria selecionada. </p><br><p>  Cada categoria tem seu próprio conjunto de filtros.  Por exemplo, na categoria "Carros" - alguns filtros, na categoria "Coisas pessoais" - outros filtros.  Ou seja, os filtros estão rigidamente vinculados a uma categoria. </p><br><h1 id="razmeschenie-obyavleniya-za-dve-minuty">  Colocação do anúncio em dois minutos </h1><br><p>  Uma inovação importante apareceu para os vendedores que eles sentem ao enviar seu anúncio.  Se o seu anúncio não contiver nenhum "proibido" ou não for uma duplicata - o bom anúncio habitual - você o verá na emissão quase que imediatamente.  Na verdade, esse atraso dura cerca de dois minutos, mas, em casos raros, pode ser estendido até 30 minutos.  Anteriormente, um anúncio sempre aparecia no site somente após meia hora. </p><br><h1 id="avito-pomoschnik">  Avito Assistant </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Avito Helper</a> é uma extensão do Chrome que exibe o preço de um produto similar no Avito em sites de terceiros.  Na extensão, você pode comparar preços em muitas lojas on-line com os preços do Avito ou simplesmente procurar os bens e serviços necessários em nosso serviço, sem ir diretamente ao site ou aplicativo.  Conseguimos implementar o "Assistente", inclusive graças a novas mudanças na infraestrutura. </p><br><img src="https://habrastorage.org/webt/d5/hv/cw/d5hvcwkpl7-npnqilrei9wfcz80.png"><br><h1 id="arhitektura">  Arquitetura </h1><br><h2 id="pilim-monolit">  Serrar um monólito </h2><br><p>  Avito tem um monólito em PHP.  Há um ano, toda a funcionalidade de pesquisa que funciona no Avito estava nesse monólito.  A pesquisa no monólito funcionou com quatro plataformas: Android, iOS, a versão móvel no navegador e na área de trabalho.  Para fornecer a saída, as consultas SQL correspondentes foram geradas no Sphinx dentro desse código, o processamento estava em andamento e a saída foi enviada no formato JSON ou HTML.  Os usuários viram o que estavam procurando. </p><br><img src="https://habrastorage.org/webt/cw/l_/rn/cwl_rnema8zlhzfu4gnrrgrz1jq.jpeg"><br><h2 id="chto-u-nas-seychas">  O que temos agora </h2><br><p>  Se você implementar novos recursos, será muito difícil integrar esse monólito.  Portanto, decidimos desenvolver um serviço de pesquisa, que chamamos de "Pesquisado".  Agora o monólito vai para esse serviço de pesquisa e o serviço vai para o Sphinx. </p><br><img src="https://habrastorage.org/webt/wk/rf/up/wkrfupfza_kexfbo_yiafhq-lz4.jpeg"><br><h2 id="prichiny-sozdaniya-poiskovogo-servisa">  Razões para criar um serviço de pesquisa </h2><br><p>  Ao desenvolver serviços, você sempre precisa entender por que está fazendo isso.  A primeira vantagem óbvia é a remoção da lógica de baixo nível.  No nosso caso, isso está ocultando a cozinha para o processamento de consultas SphinxQL.  Além disso, podemos fornecer mais facilmente a funcionalidade de pesquisa para sistemas de terceiros. </p><br><p>  Execução de consulta assíncrona.  Essa vantagem é bastante óbvia e, dependendo da implementação, um ou outro sucesso pode ser alcançado.  Nosso serviço foi implementado no Golang e havia funcionalidades que podiam ser paralelizadas - três solicitações no Sphinx, que resultaram em bons resultados. </p><br><p>  Implantação rápida.  Identificamos uma funcionalidade separada com menos código, testes extras (o monólito tem muitos testes, não apenas a funcionalidade de pesquisa), e é mais fácil implementá-la.  Mais importante ainda, devido a uma abordagem bem-sucedida da implementação desse serviço, fomos capazes de reduzir coisas interessantes e implementar algoritmos avançados de classificação - para fazer um processamento bastante complicado que não poderíamos fazer em um monólito.  Isso nos fornece uma base muito boa para experimentar a qualidade da pesquisa. </p><br><p>  Como bônus, temos a oportunidade de mudar de Sphinx para Elastic, porque a lógica de baixo nível agora está oculta. </p><br><p>  Este diagrama já mostra o caso em que há um monólito, o serviço "Pesquisado" e o serviço de terceiros "Avito Assistant". </p><br><img src="https://habrastorage.org/webt/ed/3s/ws/ed3swsgnqulgqx9lokpg6l4po8g.jpeg"><br><h2 id="kak-rabotaet-poiskovyy-servis">  Como funciona um serviço de pesquisa? </h2><br><p>  Possui um conjunto de agregadores.  Cada agregador executa uma certa lógica de negócios relacionada ao processamento da emissão.  Ele pode formar esse problema de uma certa maneira. </p><br><p>  A solicitação chega no agendador.  O planejador seleciona o agregador de acordo com os critérios de consulta em termos de seus parâmetros (ou se o agregador desejado for especificado na própria solicitação).  O agregador vai para a Sphinx.  Após receber uma resposta do Sphinx, ele gera uma saída e fornece a resposta ao cliente. </p><br><img src="https://habrastorage.org/webt/f9/56/lj/f956ljoot6y6pas3k94vkb8bo3k.gif"><br><p>  Nesse caso, a solicitação estava fora, não na nuvem em que nosso serviço de pesquisa funciona.  Mas outra opção também é possível: alguns de nossos serviços, dentro da nuvem, por exemplo, o Avito Assistant, se voltam para um serviço de pesquisa.  Essa solicitação já vai para outro agregador - há outra lógica de negócios.  Veja como funciona: </p><br><img src="https://habrastorage.org/webt/vb/gb/yu/vbgbyukk8a5yynkv5kupow23s6y.gif"><br><h2 id="kak-rabotaet-asinhronnoe-vypolnenie-zaprosov-na-agregatore">  Como funciona a execução assíncrona de consulta no agregador </h2><br><p>  O agregador consiste em vários perfis.  Um perfil é, grosso modo, uma entidade na qual você pode obter um anúncio de algum tipo ou de uma maneira específica.  Por exemplo, isso pode ser explicado através de uma analogia: existem anúncios "Premium", "VIP" e regulares no Avito.  O agregador recebe uma solicitação do planejador, enquanto solicitações paralelas são executadas para o conjunto de perfis conhecidos no agregador.  O perfil possui um driver que acessa fisicamente o nível subjacente, neste caso no Sphinx, mas pode ser qualquer outra fonte de dados </p><br><img src="https://habrastorage.org/webt/la/np/ic/lanpiclts0oo-uhfktoxszkxl3g.jpeg"><br><p>  O agregador pode simplesmente fornecer ao planejador os resultados das consultas aos perfis e também pode executar ações mais complexas, por exemplo, misturar esses resultados usando um ou outro algoritmo. </p><br><img src="https://habrastorage.org/webt/zy/_o/ji/zy_ojiffyfpbt4h9vmkcyciqsuy.jpeg"><br><h2 id="hranenie-poiskovogo-indeksa">  Armazenamento de índice de pesquisa </h2><br><p>  Devido ao fato de usarmos o Kubernetes na arquitetura, no RIT ++ me perguntaram sobre o armazenamento do índice de pesquisa - ele é armazenado no Kubernetes?  Não, temos a Sphinx vivendo em máquinas físicas.  No Kubernetes, estamos implantando um serviço de pesquisa que processa a lógica de pesquisa.  A nuvem também contém um índice de pesquisa de amostra para o ambiente de desenvolvimento no qual os testes são executados, mas é indesejável colocar um índice de combate lá, porque os serviços que funcionam no Kubernetes são, antes de tudo, serviços sem estado. </p><br><h2 id="nagruzka-na-poiskovyy-servis">  Carga do serviço de pesquisa </h2><br><p>  Agora, este serviço está em batalha, serve 100% da carga, com algumas exceções.  A carga que ele suporta é de aproximadamente 200 krpm.  Atraso: mediana - até 17 ms, percentil 95 - até 120 ms, percentil 99 - até 320 ms. </p><br><img src="https://habrastorage.org/webt/bt/46/ny/bt46nyowpcuqysikxjcpp2weov8.png"><br><img src="https://habrastorage.org/webt/bn/fj/hx/bnfjhx1hqse5b4lfok8cgv3ez04.png"><br><h2 id="itogo-po-poiskovomu-servisu">  Serviço total de pesquisa </h2><br><p>  O serviço de pesquisa é escrito em Golang, implantado no Kubernetes, o agregador trabalha de forma assíncrona com vários perfis.  O perfil funciona com o driver especificado, o driver acessa a fonte de dados especificada, por exemplo, Sphinx.  O número de solicitações que nosso serviço atende é de até 200 krpm no momento.  Atraso: mediana - até 17 ms, percentil 95 - até 120 ms, percentil 99 - até 320 ms. </p><br><h2 id="vnedrenie-servisa-v-rabochuyu-sistemu">  Implementação do serviço em um sistema de trabalho </h2><br><p>  O problema da dupla funcionalidade é bastante óbvio, temos que suportar duas bases de código que devem executar a mesma tarefa.  Precisamos de um retorno.  Nós o chamamos de “canudos” - lembramos de “canudos leigos”.  Além disso, precisamos de controle de tráfego, é desejável que seja rápido, através de um painel. </p><br><h2 id="kak-rabotaet-solomka">  Como é que o "canudo" </h2><br><p>  A consulta de pesquisa chega ao "Straw", que funciona dentro do monólito e pode fazer uma chamada adicional para uma nova pesquisa ou uma antiga.  Ela faz uma chamada para uma nova pesquisa, ele a realiza e, se for bem-sucedida, obtemos o resultado de uma nova pesquisa. </p><br><img src="https://habrastorage.org/webt/y1/xa/wm/y1xawmqms1bxqtotevfsl7bfatu.gif"><br><p>  Há situações em que alguma consulta ao serviço de pesquisa está falhando: por exemplo, e até que algum tipo de funcionalidade seja implementada dentro do serviço de pesquisa.  Então, necessariamente, prometemos esse pedido - "The Straw" o executará na busca antiga.  A pesquisa antiga do monólito será direcionada para o Sphinx e a resposta será enviada para o cliente.  O cliente não sentirá nada. </p><br><img src="https://habrastorage.org/webt/cr/zu/za/crzuzaufpka6dvpjsjy_m5qq0jc.gif"><br><p>  Um esquema razoavelmente confiável, e é sempre interessante ver o que acontece na prática.  O Departamento de Arquitetura da Avito aprimora constantemente nossa nuvem, ajustando-a, tornando-a mais confiável e produtiva.  Em algum momento, houve problemas que, ao atender um dos nós com uma intensidade suficientemente alta, os erros vieram do monólito (100 erros por segundo). </p><br><img src="https://habrastorage.org/webt/tu/zv/wm/tuzvwmgmpzid5objz-4bmvl157y.png"><br><p>  Ao mesmo tempo, o atraso do serviço aumentou acentuadamente - na imagem abaixo, você pode ver picos. </p><br><img src="https://habrastorage.org/webt/pq/of/z5/pqofz5fynz2bsibynewd3gro2cw.png"><br><p>  O "canudo" resolveu essa situação notavelmente, e os erros HTTP resultantes estavam no mesmo nível - uma unidade de erros para todo o Avito.  Nossos visitantes não perceberam nada. </p><br><img src="https://habrastorage.org/webt/wx/ya/ij/wxyaij2xka5dhghoa74ovncverq.png"><br><h2 id="avtomatizaciya-eksperimentov">  Automação de experimentos </h2><br><p>  Queremos que a pesquisa se desenvolva rapidamente e implantar novos recursos nela foi mais fácil.  Para isso, é necessária infraestrutura adequada.  Configuramos a automação dos testes A / B.  Usando o painel, podemos iniciar novos experimentos, configurá-los com base nas inovações adicionadas e, portanto, executar experimentos sem rolar o monólito. </p><br><p>  No estado inicial, quando nenhuma experiência foi iniciada, todos os visitantes veem a funcionalidade de pesquisa usual. </p><br><img src="https://habrastorage.org/webt/go/rz/qp/gorzqpca1whra33-df1c6ss18yk.jpeg"><br><p>  Em um experimento típico, os usuários são divididos em grupos.  O grupo de controle - com a funcionalidade usual para nossos visitantes.  Existem vários grupos de teste - com inovações.  Quando precisamos criar um novo experimento, no serviço de pesquisa, implementamos uma nova funcionalidade de pesquisa (adicionamos novos agregadores) e, por meio do painel, configuramos o experimento com os grupos necessários, vinculando-os a novos agregadores. </p><br><p>  Ao analisar experimentos, comparamos o comportamento dos visitantes no grupo de controle com os testes e, com base nisso, tiramos conclusões sobre o sucesso do experimento. </p><br><img src="https://habrastorage.org/webt/gd/g5/r2/gdg5r20saoh4inq46d5jggjcxee.gif"><br><p>  Suponha que tenhamos desenvolvido uma nova fórmula de classificação.  O que precisamos fazer para experimentar com ela? </p><br><ol><li>  No serviço de pesquisa, implante o agregador apropriado (seja "Agregador 2"). </li><li>  Crie uma experiência por meio de um painel e conecte um dos grupos dessa experiência a esse agregador. </li><li>  Agora, se uma consulta chegar na pesquisa que se enquadra no grupo de teste, ela será direcionada para o serviço de pesquisa no "Agregador 2". </li></ol><br><p>  Podemos continuar criando novas experiências e associando seus grupos de teste a novos agregadores. </p><br><h1 id="itogo-po-infrastrukture-poiska">  Infraestrutura total de pesquisa </h1><br><p>  Há um cluster de servidores Sphinx 3. Ele contém 13 krps de consultas SphinxQL e possui mais de 45 milhões de anúncios ativos. </p><br><p>  Sphinx 3.0 é estável e agrada com seu desempenho.  A propósito, os binários são de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">domínio público</a> .  Além disso, graças ao Avito, novos recursos são filmados no Sphinx 3, por exemplo, a operação do produto escalar de vetores e os erros encontrados são corrigidos. </p><br><p>  Nós usamos a arquitetura de serviço.  Temos o serviço de busca "Iskalo" e o serviço "Avito Assistant".  Parte da funcionalidade permaneceu no monólito, mas continuamos trabalhando no seu corte. </p><br><h1 id="vyvody">  Conclusões </h1><br><p>  No ano passado, um sistema avançado de desenvolvimento de funcionalidades de pesquisa foi recebido.  Tivemos a oportunidade de realizar experimentos rápidos e flexíveis.  E agora a busca por usuários se tornou mais conveniente, mais rápida e melhor ajuda a resolver seus problemas. </p><br><h1 id="chto-dalshe">  O que vem a seguir </h1><br><p>  Além disso, continuaremos removendo do monólito o que resta: renderização, filtros.  Vamos trabalhar para melhorar a qualidade da pesquisa, continuar a encantar nossos visitantes.  Espero que você também. </p><br><p>  Se você tiver dúvidas sobre o trabalho de nossa pesquisa, gostaríamos de saber mais detalhes técnicos, escreva nos comentários.  Eu responderei com prazer.  A propósito, recentemente, Andrey Drozdov falou no Highload ++ 2018 com um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relatório sobre otimização de vários critérios dos resultados da pesquisa</a> , aqui está sua <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresentação</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429076/">https://habr.com/ru/post/pt429076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429066/index.html">Como a tripulação da aeronave se prepara para a partida</a></li>
<li><a href="../pt429068/index.html">Um post muito corporativo: abertura em Moscou ou por que 10 e 11 de novembro são bons dias para comprar eletrônicos</a></li>
<li><a href="../pt429070/index.html">O Linux não pode ser carregado em novos MacBooks devido ao chip T2</a></li>
<li><a href="../pt429072/index.html">Por que a Kodak morreu e a Fujifilm floresceu: a história de dois cineastas</a></li>
<li><a href="../pt429074/index.html">Boas ações para o Google Money: novo desafio de impacto da IA</a></li>
<li><a href="../pt429078/index.html">Como criar arte processual em menos de 100 linhas de código</a></li>
<li><a href="../pt429082/index.html">Tailândia sem estereótipos</a></li>
<li><a href="../pt429084/index.html">A segunda vida do forno elétrico "Kharkov"</a></li>
<li><a href="../pt429086/index.html">Festa de cerveja alternativa</a></li>
<li><a href="../pt429088/index.html">Executando consultas GraphQL com OdataToEntity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>