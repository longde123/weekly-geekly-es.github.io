<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ† ğŸ‘¯ ğŸ’‡ğŸ¾ Muat pengujian dengan belalang ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ» â—¼ï¸ ğŸ†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pengujian beban tidak begitu diminati dan tersebar luas seperti jenis pengujian lainnya - tidak ada begitu banyak alat yang memungkinkan Anda melakuka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Muat pengujian dengan belalang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/infopulse/blog/430502/">  Pengujian beban tidak begitu diminati dan tersebar luas seperti jenis pengujian lainnya - tidak ada begitu banyak alat yang memungkinkan Anda melakukan pengujian seperti itu, tetapi sederhana dan nyaman umumnya dapat dihitung dengan jari satu tangan. <br><br>  Ketika datang ke pengujian kinerja - pertama-tama, semua orang berpikir tentang JMeter - itu pasti alat paling terkenal dengan jumlah plugin terbesar.  Saya tidak pernah menyukai JMeter karena antarmuka yang tidak jelas dan ambang masuk yang tinggi, segera setelah itu diperlukan untuk menguji aplikasi non-Hello World. <br><br>  Dan sekarang, terinspirasi oleh keberhasilan pengujian di dua proyek berbeda, saya memutuskan untuk berbagi informasi tentang perangkat lunak yang relatif sederhana dan nyaman - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Locust</a> <br><br>  Bagi mereka yang terlalu malas untuk ikut campur, saya merekam video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZYKIyyY1qvY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br><h2>  Apa ini </h2><br>  Alat open source yang memungkinkan Anda menentukan skenario pemuatan dengan kode Python yang mendukung beban terdistribusi dan, seperti yang diklaim penulis, digunakan untuk pengujian stres Battlelog untuk seri game Battlefild (segera menawan) <br><br>  Dari pro: <br><br><ul><li>  dokumentasi sederhana termasuk contoh salin-tempel.  Anda dapat memulai pengujian, bahkan hampir tanpa keterampilan pemrograman. </li><li>  "Di balik tudung" menggunakan perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan</a> (HTTP for people).  Dokumentasinya dapat digunakan sebagai lembar contekan tambahan dan tes debit </li><li>  Dukungan Python - Saya hanya suka bahasa </li><li>  Paragraf sebelumnya memberikan cross-platform untuk menjalankan tes </li><li>  Server web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Flask sendiri</a> untuk menampilkan hasil tes </li></ul><br>  Dari minus: <br><br><ul><li>  No Capture &amp; Replay - semua tangan </li><li>  Hasil paragraf sebelumnya - Anda perlu otak.  Seperti halnya Postman, Anda perlu memahami cara kerja HTTP. </li><li>  Dibutuhkan keterampilan pemrograman minimal </li><li>  Model beban linier - yang segera membuat marah penggemar untuk menghasilkan pengguna "menurut Gauss" </li></ul><br><h2>  Proses pengujian </h2><br>  Setiap pengujian adalah tugas kompleks yang memerlukan perencanaan, persiapan, pemantauan implementasi, dan analisis hasil.  Selama pengujian stres, jika memungkinkan, adalah mungkin dan perlu untuk mengumpulkan semua data yang mungkin yang dapat mempengaruhi hasil: <br><br><ul><li>  Perangkat keras server (CPU, RAM, ROM) </li><li>  Perangkat lunak server (OS, versi server, JAVA, .NET, dll., Basis data dan jumlah data itu sendiri, server dan log aplikasi pengujian) </li><li>  Bandwidth jaringan </li><li>  Kehadiran server proxy, load balancers, dan perlindungan DDOS </li><li>  Memuat data pengujian (jumlah pengguna, waktu respons rata-rata, jumlah permintaan per detik) </li></ul><br>  Contoh-contoh yang diuraikan di bawah ini dapat diklasifikasikan sebagai pengujian beban fungsional kotak hitam.  Bahkan tanpa mengetahui apa pun tentang aplikasi yang sedang diuji dan tanpa akses ke log, kita dapat mengukur kinerjanya. <br><br><h2>  Sebelum Anda mulai </h2><br>  Untuk menguji tes beban dalam praktik, saya menggunakan server web sederhana secara lokal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/typicode/json-server</a> .  Saya akan memberikan hampir semua contoh berikut untuknya.  Saya mengambil data untuk server dari contoh online yang digunakan - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://jsonplaceholder.typicode.com/</a> <br>  Untuk menjalankannya, nodeJS diperlukan. <br><br>  <b>Spoiler yang jelas</b> : seperti halnya pengujian keamanan - lebih baik melakukan eksperimen dengan pengujian stres pada kucing secara lokal, tanpa memuat layanan online sehingga Anda tidak dilarang <br><br>  Untuk memulai, Python juga diperlukan - dalam semua contoh saya akan menggunakan versi 3.6, serta belalang itu sendiri (pada saat penulisan, versi 0.9.0).  Itu dapat diinstal dengan perintah <br><br><pre><code class="bash hljs">python -m pip install locustio</code> </pre> <br>  Detail instalasi dapat ditemukan di dokumentasi resmi. <br><br><h2>  Parsing Contoh </h2><br>  Selanjutnya kita perlu file uji.  Saya mengambil contoh dari dokumentasi, karena sangat sederhana dan mudah: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> locust <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HttpLocust, TaskSet <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l)</span></span></span><span class="hljs-function">:</span></span> l.client.post(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>, {<span class="hljs-string"><span class="hljs-string">"username"</span></span>:<span class="hljs-string"><span class="hljs-string">"ellen_key"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>:<span class="hljs-string"><span class="hljs-string">"education"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l)</span></span></span><span class="hljs-function">:</span></span> l.client.post(<span class="hljs-string"><span class="hljs-string">"/logout"</span></span>, {<span class="hljs-string"><span class="hljs-string">"username"</span></span>:<span class="hljs-string"><span class="hljs-string">"ellen_key"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>:<span class="hljs-string"><span class="hljs-string">"education"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l)</span></span></span><span class="hljs-function">:</span></span> l.client.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">profile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l)</span></span></span><span class="hljs-function">:</span></span> l.client.get(<span class="hljs-string"><span class="hljs-string">"/profile"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserBehavior</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(TaskSet)</span></span></span><span class="hljs-class">:</span></span> tasks = {index: <span class="hljs-number"><span class="hljs-number">2</span></span>, profile: <span class="hljs-number"><span class="hljs-number">1</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> login(self) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> logout(self) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebsiteUser</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(HttpLocust)</span></span></span><span class="hljs-class">:</span></span> task_set = UserBehavior min_wait = <span class="hljs-number"><span class="hljs-number">5000</span></span> max_wait = <span class="hljs-number"><span class="hljs-number">9000</span></span></code> </pre> <br>  Itu saja!  Ini benar-benar cukup untuk memulai tes!  Mari kita lihat contoh sebelum kita mulai. <br><br>  Melewati impor, di bagian paling awal kita melihat 2 fungsi login dan logout yang hampir identik, terdiri dari satu baris.  <b>l.client</b> - objek sesi HTTP yang dengannya kita akan membuat sebuah beban.  Kami menggunakan metode POST, yang hampir identik dengan yang ada di pustaka permintaan.  Hampir - karena dalam contoh ini kita menyampaikan sebagai argumen pertama bukan URL lengkap, tetapi hanya sebagian saja - layanan tertentu. <br><br>  Argumen kedua melewati data - dan saya tidak bisa tidak melihat bahwa sangat nyaman untuk menggunakan kamus Python, yang secara otomatis dikonversi ke json <br><br>  Anda juga dapat mencatat bahwa kami tidak memproses hasil permintaan dengan cara apa pun - jika berhasil, hasilnya (misalnya, cookie) akan disimpan dalam sesi ini.  Jika kesalahan terjadi, itu akan dicatat dan ditambahkan ke statistik tentang beban. <br><br>  Jika kami ingin tahu apakah kami telah menulis permintaan dengan benar, kami selalu dapat memeriksanya sebagai berikut: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> r response=r.post(base_url+<span class="hljs-string"><span class="hljs-string">"/login"</span></span>,{<span class="hljs-string"><span class="hljs-string">"username"</span></span>:<span class="hljs-string"><span class="hljs-string">"ellen_key"</span></span>,<span class="hljs-string"><span class="hljs-string">"password"</span></span>:<span class="hljs-string"><span class="hljs-string">"education"</span></span>}) print(response.status_code)</code> </pre> <br>  Saya hanya menambahkan variabel <b>base_url</b> , yang harus berisi alamat lengkap sumber daya yang sedang diuji. <br><br>  Beberapa fungsi berikutnya adalah kueri, yang akan membuat beban.  Sekali lagi, kita tidak perlu memproses respons server - hasilnya akan langsung menuju statistik. <br><br>  Berikutnya adalah kelas <b>UserBehavior</b> (nama kelasnya bisa apa saja).  Seperti namanya, itu akan menggambarkan perilaku pengguna bola dalam kekosongan aplikasi yang diuji.  Kami meneruskan ke properti <b>tugas</b> kamus metode yang akan dipanggil pengguna dan frekuensi panggilannya.  Sekarang, terlepas dari kenyataan bahwa kita tidak tahu fungsi mana dan dalam urutan mana setiap pengguna akan menelepon - mereka dipilih secara acak, kami menjamin bahwa fungsi <b>indeks</b> akan dipanggil rata-rata 2 kali lebih sering daripada fungsi <b>profil</b> . <br><br>  Selain perilaku, TaskSet kelas induk memungkinkan Anda untuk menentukan 4 fungsi yang dapat dilakukan sebelum dan sesudah pengujian.  Urutan panggilan adalah sebagai berikut: <br><br><ol><li>  <b>setup</b> - disebut 1 kali pada awal <b>UserBehavior (TaskSet)</b> - tidak dalam contoh </li><li>  <b>on_start</b> - dipanggil 1 kali oleh setiap pengguna baru pemuatan saat startup </li><li>  <b>tugas</b> - pelaksanaan tugas itu sendiri </li><li>  <b>on_stop</b> - dipanggil satu kali oleh setiap pengguna saat tes selesai bekerja </li><li>  <b>teardown</b> - disebut 1 kali ketika <b>TaskSet</b> keluar - itu juga tidak ada dalam contoh </li></ol><br>  Perlu disebutkan di sini bahwa ada 2 cara untuk mendeklarasikan perilaku pengguna: yang pertama sudah ditunjukkan dalam contoh di atas - fungsi diumumkan sebelumnya.  Cara kedua adalah mendeklarasikan metode langsung di dalam kelas <b>UserBehavior</b> : <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> locust <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HttpLocust, TaskSet, task <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserBehavior</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(TaskSet)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.post(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>, {<span class="hljs-string"><span class="hljs-string">"username"</span></span>:<span class="hljs-string"><span class="hljs-string">"ellen_key"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>:<span class="hljs-string"><span class="hljs-string">"education"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.post(<span class="hljs-string"><span class="hljs-string">"/logout"</span></span>, {<span class="hljs-string"><span class="hljs-string">"username"</span></span>:<span class="hljs-string"><span class="hljs-string">"ellen_key"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>:<span class="hljs-string"><span class="hljs-string">"education"</span></span>}) @task(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @task(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">profile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.get(<span class="hljs-string"><span class="hljs-string">"/profile"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebsiteUser</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(HttpLocust)</span></span></span><span class="hljs-class">:</span></span> task_set = UserBehavior min_wait = <span class="hljs-number"><span class="hljs-number">5000</span></span> max_wait = <span class="hljs-number"><span class="hljs-number">9000</span></span></code> </pre> <br>  Dalam contoh ini, fungsi pengguna dan frekuensi panggilan mereka diatur menggunakan anotasi <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">tugas</a></b> .  Secara fungsional, tidak ada yang berubah. <br><br>  Kelas terakhir dari contoh ini adalah <b>WebsiteUser</b> (nama kelasnya bisa apa saja).  Di kelas ini, kami mendefinisikan model perilaku pengguna <b>UserBehavior</b> *** +, serta waktu tunggu minimum dan maksimum antara panggilan ke tugas individu oleh setiap pengguna.  Untuk membuatnya lebih jelas, inilah cara memvisualisasikannya: <br><br><img src="https://habrastorage.org/webt/mv/ss/7j/mvss7jfvob_tufawwbx-41w6i8y.png"><br><br><h2>  Memulai </h2><br>  Jalankan server, kinerja yang akan kami uji: <br><br><pre> <code class="bash hljs">json-server --watch sample_server/db.json</code> </pre> <br>  Kami juga memodifikasi file contoh sehingga dapat menguji layanan, menghapus login dan logout, mengatur perilaku pengguna: <br><br><ol><li>  Buka halaman utama 1 kali pada awal pekerjaan </li><li>  Dapatkan daftar semua posting x2 </li><li>  Tulis komentar pada posting pertama x1 </li></ol><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> locust <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HttpLocust, TaskSet, task <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserBehavior</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(TaskSet)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @task(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">posts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.client.get(<span class="hljs-string"><span class="hljs-string">"/posts"</span></span>) @task(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">comment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> data = { <span class="hljs-string"><span class="hljs-string">"postId"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"my comment"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"test@user.habr"</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: <span class="hljs-string"><span class="hljs-string">"Author is cool. Some text. Hello world!"</span></span> } self.client.post(<span class="hljs-string"><span class="hljs-string">"/comments"</span></span>, data) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebsiteUser</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(HttpLocust)</span></span></span><span class="hljs-class">:</span></span> task_set = UserBehavior min_wait = <span class="hljs-number"><span class="hljs-number">1000</span></span> max_wait = <span class="hljs-number"><span class="hljs-number">2000</span></span></code> </pre><br>  Untuk memulai pada prompt perintah, jalankan perintah <br><br><pre> <code class="bash hljs">locust -f my_locust_file.py --host=http://localhost:3000</code> </pre> <br>  di mana host adalah alamat sumber daya yang diuji.  Baginya alamat layanan yang ditunjukkan dalam tes akan ditambahkan. <br><br>  Jika tidak ada kesalahan dalam pengujian, server beban akan mulai dan akan tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 8089 /</a> <br><br><img src="https://habrastorage.org/webt/p9/km/lc/p9kmlc3hqgi3_gupjrvkhduhl2a.png"><br><br>  Seperti yang Anda lihat, server yang akan kami uji ditunjukkan di sini - ke URL inilah alamat layanan dari file uji akan ditambahkan. <br><br>  Juga di sini kita dapat menunjukkan jumlah pengguna untuk memuat dan pertumbuhannya per detik. <br>  Pada tombolnya, kita mulai memuat! <br><br><img src="https://habrastorage.org/webt/di/d8/xt/did8xtea9mlpfzzxwlfq1lcofne.png"><br><br><h2>  Hasil </h2><br>  Setelah waktu tertentu, kami menghentikan tes dan melihat hasil pertama: <br><br><ol><li>  Seperti yang diharapkan, masing-masing dari 10 pengguna yang dibuat di awal pergi ke halaman utama </li><li>  Daftar posting rata-rata dibuka 2 kali lebih sering daripada komentar ditulis </li><li>  Ada waktu respon rata-rata dan rata-rata untuk setiap operasi, jumlah operasi per detik sudah data yang berguna, meskipun sekarang ambil dan bandingkan dengan hasil yang diharapkan dari persyaratan </li></ol><br>  Pada tab kedua, Anda dapat melihat grafik muat secara real time.  Jika server crash pada beban tertentu atau perilakunya berubah, ini akan segera terlihat pada grafik. <br><br><img src="https://habrastorage.org/webt/qm/ym/pd/qmympdj2picpcms6mkdb7eonenu.png"><br><br>  Pada tab ketiga, Anda dapat melihat kesalahan - dalam kasus saya, ini adalah kesalahan klien.  Tetapi jika server mengembalikan kesalahan 4XX atau 5XX, teksnya akan ditulis di sini <br>  Jika kesalahan terjadi pada kode teks Anda, itu akan jatuh ke tab Pengecualian.  Sejauh ini saya memiliki kesalahan paling umum terkait dengan menggunakan perintah print () dalam kode - ini bukan cara terbaik untuk login :) <br><br>  Pada tab terakhir, Anda dapat mengunduh semua hasil tes dalam format csv <br><br>  Apakah hasil ini relevan?  Mari kita cari tahu.  Paling sering, persyaratan kinerja (jika ada dinyatakan sama sekali) terdengar seperti ini: waktu buka halaman rata-rata (respons server) harus kurang dari N detik dengan beban pengguna M.  Tidak benar-benar menentukan apa yang harus dilakukan pengguna.  Dan saya suka belalang untuk ini - ia menciptakan aktivitas sejumlah pengguna tertentu yang secara acak melakukan tindakan yang diharapkan dari pengguna. <br><br>  Jika kita perlu melakukan benchmark - untuk mengukur perilaku sistem pada beban yang berbeda, kita dapat membuat beberapa kelas perilaku dan melakukan beberapa tes pada beban yang berbeda. <br><br>  Sudah cukup untuk memulai.  Jika Anda menyukai artikel ini, saya berencana untuk menulis tentang: <br><br><ul><li>  skenario pengujian kompleks di mana hasil dari satu langkah digunakan sebagai berikut </li><li>  pemrosesan respons server, seperti  mungkin salah bahkan jika HTTP 200 OK telah tiba </li><li>  kesulitan tidak jelas yang dapat ditemui dan bagaimana cara mengatasinya </li><li>  pengujian tanpa menggunakan UI </li><li>  pengujian beban terdistribusi </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id430502/">https://habr.com/ru/post/id430502/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id430492/index.html">Intel Neural Compute Stick. Artificial Mind pada USB Flash Drive - 2</a></li>
<li><a href="../id430494/index.html">Monitor Lalu Lintas InfoWatch. Di ujung bug dan fitur</a></li>
<li><a href="../id430496/index.html">NB-IoT: bagaimana cara kerjanya? Bagian 1</a></li>
<li><a href="../id430498/index.html">Lewati Kontrol Akun Pengguna (UAC) dengan meniru direktori tepercaya</a></li>
<li><a href="../id430500/index.html">Menghindari Kekacauan Basis Pengetahuan Perusahaan: Pengalaman Pertemuan Kami</a></li>
<li><a href="../id430504/index.html">Metode berpikir junior dan rasional</a></li>
<li><a href="../id430506/index.html">Seni gelap kebangkitan: cara memulihkan data dari media yang rusak</a></li>
<li><a href="../id430508/index.html">DevOps: apa itu sebenarnya?</a></li>
<li><a href="../id430510/index.html">Bagaimana cara menulis kode yang semua orang akan mengerti?</a></li>
<li><a href="../id430512/index.html">Bagaimana freelancer hidup: jangan bekerja dengan klien yang tahu segalanya dan biarkan diri Anda menunda-nunda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>