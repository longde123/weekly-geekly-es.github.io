<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¨ üë≤üèæ üîü Comment ai-je √©crit la biblioth√®que C ++ 11 standard ou pourquoi boost est si effrayant. Chapitre 4.1 üòú ü§öüèº ‚õàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R√©sum√© des parties pr√©c√©dentes 
 En raison de restrictions sur la capacit√© √† utiliser les compilateurs C ++ 11 et du manque d'alternativit√©, boost a v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment ai-je √©crit la biblioth√®que C ++ 11 standard ou pourquoi boost est si effrayant. Chapitre 4.1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417547/"><img src="https://habrastorage.org/webt/lr/zq/if/lrzqifvfeajppx2fdvqbxnwf4ce.png" alt="Nous continuons l'aventure." width="300" height="350" align="left"><h3>  R√©sum√© des parties pr√©c√©dentes </h3><br>  En raison de restrictions sur la capacit√© √† utiliser les compilateurs C ++ 11 et du manque d'alternativit√©, boost a voulu √©crire sa propre impl√©mentation de la biblioth√®que C ++ 11 standard en plus de la biblioth√®que C ++ 98 / C ++ 03 fournie avec le compilateur. <br><br>  <b>Static_assert</b> , <b>noexcept</b> , <b>countof</b> ont √©t√© impl√©ment√©s et, apr√®s avoir pris en compte toutes les d√©finitions non standard et les fonctionnalit√©s du compilateur, des informations sont apparues sur la fonctionnalit√© prise en charge par le compilateur actuel.  Sa propre impl√©mentation de <b>nullptr est incluse</b> , qui est s√©lectionn√©e au stade de la compilation. <br><br>  Le temps est venu pour <b>type_traits</b> et tout ce "mod√®le magique sp√©cial". <br><br>  Lien vers GitHub avec le r√©sultat d'aujourd'hui pour les impatients et les non-lecteurs: <br><br><blockquote>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les engagements et les critiques constructives sont les bienvenus</a></b> </blockquote><br>  Plongez-vous dans le monde du C ++ "template magic". <br><a name="habracut"></a><br><h4>  Table des mati√®res </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chapitre 1. Viam supervadet vadens</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chapitre 2. #ifndef __CPP11_SUPPORT__ #define __COMPILER_SPECIFIC_BUILT_IN_AND_MACRO_HELL__ #endif</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chapitre 3. Recherche de l'impl√©mentation nullptr parfaite</a> <br>  <b>Chapitre 4. Magie des mod√®les C ++</b> <br>  .... <b>4.1 On commence petit</b> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">4.2 √Ä propos du nombre d'erreurs miraculeuses que le journal compile pour nous</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">4.3 Pointeurs et tout-tout</a> <br>  .... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">4.4 Quoi d'autre est n√©cessaire pour la biblioth√®que de mod√®les</a> <br>  Chapitre 5 <br>  ... <br><br><h3>  Chapitre 4. Magie des mod√®les C ++ </h3><br>  Apr√®s avoir termin√© avec les mots cl√©s C ++ 11 et tous les "commutateurs" d√©pendants de la d√©finition entre leurs impl√©mentations, j'ai commenc√© √† remplir <b>type_traits</b> .  En v√©rit√©, j'avais d√©j√† quelques classes de mod√®les, similaires aux classes standard, qui avaient d√©j√† travaill√© dans des projets pendant longtemps et il restait donc √† mettre tout cela sous la m√™me forme, ainsi qu'√† ajouter les fonctionnalit√©s manquantes. <br><br><img src="https://habrastorage.org/webt/g_/vn/rg/g_vnrg9in04st7-ysvmivnbablo.png" alt="image" width="300" height="200" align="left">  Honn√™tement, je suis inspir√© par la programmation de mod√®les.  En particulier, la r√©alisation que tout cela est une vari√©t√© d'options: calculs, branchement de code, conditions, v√©rification des erreurs est effectu√©e pendant le processus de compilation et rien ne co√ªte le programme final au moment de l'ex√©cution.  Et comme les mod√®les en C ++ sont essentiellement un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">langage de programmation complet de Turing</a> , je m'attendais √† ce qu'il soit possible d'impl√©menter avec √©l√©gance et relativement facilement la partie de la norme associ√©e √† la programmation sur les mod√®les.  Mais, afin de d√©truire imm√©diatement toutes les illusions, je dirai que toute la th√©orie de l'exhaustivit√© de Turing est divis√©e en impl√©mentations concr√®tes de mod√®les dans les compilateurs.  Et cette partie de l'√©criture de la biblioth√®que, au lieu de solutions √©l√©gantes et de ¬´trucs¬ª de programmation de mod√®les, s'est transform√©e en une lutte acharn√©e avec les compilateurs, alors que chacun s'est ¬´effondr√©¬ª √† sa mani√®re, et c'est bien s'il est entr√© dans une erreur de compilation interne ou m√™me s'est √©cras√© √©troitement avec exceptions non g√©r√©es.  GCC (g ++) s'est montr√© le meilleur de tous, qui ¬´stoppait¬ª sto√Øquement toutes les constructions de mod√®les et ne maudissait (dans le cas) que dans les endroits o√π il y avait un manque de nom de type explicite. <br><br><h4>  4.1 Commencer petit </h4><br>  J'ai commenc√© avec des mod√®les simples pour <i>std :: integrale_constant</i> , <i>std :: bool_constant</i> et des petits mod√®les similaires. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Val</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">integral_constant</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// convenient template for integral constant types static const _Tp value = Val; typedef const _Tp value_type; typedef integral_constant&lt;_Tp, Val&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; typedef integral_constant&lt;bool, true&gt; true_type; typedef integral_constant&lt;bool, false&gt; false_type; template&lt;bool Val&gt; struct bool_constant : public integral_constant&lt;bool, Val&gt; {}; // Primary template. // Define a member typedef @c type to one of two argument types. template&lt;bool _Cond, class _Iftrue, class _Iffalse&gt; struct conditional { typedef _Iftrue type; }; // Partial specialization for false. template&lt;class _Iftrue, class _Iffalse&gt; struct conditional&lt;false, _Iftrue, _Iffalse&gt; { typedef _Iffalse type; };</span></span></code> </pre> <br>  Sur la base du <i>conditionnel,</i> vous pouvez entrer des mod√®les pratiques pour les op√©rations logiques {"et", "ou", "pas"} sur les types (Et toutes ces op√©rations sont consid√©r√©es d√®s la compilation! C'est g√©nial, n'est-ce pas?): <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void_type</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//typedef void void_type; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _or_ : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _or_&lt;_B3, _B4&gt; &gt; &gt;::type { }; template&lt;&gt; struct _or_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _or_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _or_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B1, _B2&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _or_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _B1, _or_&lt;_B2, _B3&gt; &gt;::type { }; template&lt;class _B1 = void_type, class _B2 = void_type, class _B3 = void_type, class _B4 = void_type&gt; struct _and_; template&lt;&gt; struct _and_&lt;void_type, void_type, void_type, void_type&gt;; template&lt;class _B1&gt; struct _and_&lt;_B1, void_type, void_type, void_type&gt; : public _B1 { }; template&lt;class _B1, class _B2&gt; struct _and_&lt;_B1, _B2, void_type, void_type&gt; : public conditional&lt;_B1::value, _B2, _B1&gt;::type { }; template&lt;class _B1, class _B2, class _B3&gt; struct _and_&lt;_B1, _B2, _B3, void_type&gt; : public conditional&lt;_B1::value, _and_&lt;_B2, _B3&gt;, _B1&gt;::type { }; template&lt;class _Pp&gt; struct _not_ { static const bool value = !bool(_Pp::value); typedef const bool value_type; typedef integral_constant&lt;bool, _not_::value == bool(true)&gt; type; operator value_type() const { // return stored value return (value); } value_type operator()() const { // return stored value return (value); } }; }</span></span></code> </pre><br><blockquote>  Trois points m√©ritent ici notre attention: <br><br>  1) Il est important de toujours mettre un espace entre les crochets ('&lt;' et '&gt;') des mod√®les, car avant C ++ 11, il n'y avait aucune clarification dans la norme sur la fa√ßon d'interpr√©ter '&gt;&gt;' et '&lt;&lt;' dans un code comme <i>_ou _ &lt;_ B2, _ou _ &lt;_ B3, _B4 &gt;&gt;</i> , et donc presque tous les compilateurs ont trait√© cela comme un op√©rateur de d√©calage de bit, ce qui conduit √† une erreur de compilation. <br><br>  2) Dans certains compilateurs (Visual Studio 6.0 par exemple), il y avait un bug qui consistait dans le fait qu'il √©tait impossible d'utiliser le type <b>void</b> comme param√®tre de mod√®le.  √Ä ces fins, un type <i>void_type</i> distinct est introduit dans le passage ci-dessus pour remplacer le type <b>void</b> o√π la valeur de param√®tre de mod√®le par d√©faut est requise. <br><br>  3) Les tr√®s anciens compilateurs (Borland C ++ Builder par exemple) avaient un type bool√©en impl√©ment√© de mani√®re <b>tordue</b> , qui dans certaines situations se transformait ¬´soudainement¬ª en <b>int</b> ( <b>vrai</b> -&gt; 1, <b>faux</b> -&gt; 0), ainsi que des types de variables statiques constantes du type <b>bool</b> (et pas seulement eux), s'ils √©taient contenus dans des classes de mod√®les.  En raison de tout ce g√¢chis, par cons√©quent, pour une comparaison compl√®tement inoffensive dans le style de <i>my_template_type :: static_bool_value == <b>false, le</b></i> compilateur pourrait facilement √©mettre un enchantement <i>ne peut pas</i> <i>convertir</i> un <i>`` type non d√©fini '' en int (0)</i> ou quelque chose comme √ßa.  Par cons√©quent, il est n√©cessaire de toujours essayer d'indiquer explicitement le type de valeurs √† comparer, aidant ainsi le compilateur √† d√©terminer les types avec lesquels il traite. </blockquote><br><br>  Ajoutez plus de travail avec <b>les</b> valeurs <b>const</b> et <b>volatiles</b> .  Tout d'abord, le <i>remove_</i> ... trivialement impl√©ment√© o√π nous sp√©cialisons simplement le mod√®le pour certains modificateurs de type - dans le cas o√π le type est livr√© avec un modificateur, le compilateur doit, apr√®s avoir examin√© toutes les sp√©cialisations (rappeler le principe SFINAE du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chapitre pr√©c√©dent</a> ) du mod√®le, s√©lectionner le plus appropri√© (avec indication explicite du modificateur souhait√©) : <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_function</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">remove_const</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// remove top level const qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_const&lt;const _Tp&gt; { // remove top level const qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_const&lt;const volatile _Tp&gt; { // remove top level const qualifier typedef volatile _Tp type; }; // remove_volatile template&lt;class _Tp&gt; struct remove_volatile { // remove top level volatile qualifier typedef _Tp type; }; template&lt;class _Tp&gt; struct remove_volatile&lt;volatile _Tp&gt; { // remove top level volatile qualifier typedef _Tp type; }; // remove_cv template&lt;class _Tp&gt; struct remove_cv { // remove top level const and volatile qualifiers typedef typename remove_const&lt;typename remove_volatile&lt;_Tp&gt;::type&gt;::type type; };</span></span></code> </pre><br>  Et puis nous impl√©mentons des mod√®les <i>add_</i> ... o√π tout est d√©j√† un peu plus compliqu√©: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_const_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_const_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_volatile_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_volatile_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bool</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsFunction</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_cv_helper</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> type; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tp</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">add_cv_helper</span></span></span><span class="hljs-class">&lt;_Tp, true&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> _Tp type; }; } <span class="hljs-comment"><span class="hljs-comment">// add_const template&lt;class _Tp&gt; struct add_const: public detail::_add_const_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_const&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; }; // add_volatile template&lt;class _Tp&gt; struct add_volatile : public detail::_add_volatile_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_volatile&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; }; // add_cv template&lt;class _Tp&gt; struct add_cv : public detail::_add_cv_helper&lt;_Tp, is_function&lt;_Tp&gt;::value&gt; { }; template&lt;class _Tp&gt; struct add_cv&lt;_Tp&amp;&gt; { typedef _Tp &amp; type; };</span></span></code> </pre><br>  Ici, nous traitons soigneusement les types de r√©f√©rence s√©par√©ment afin de ne pas perdre le lien.  De plus, nous n'oublierons pas les types de fonctions qu'il est impossible de rendre <b>volatiles</b> ou <b>const en</b> principe, donc nous les laisserons ¬´tels quels¬ª.  Je peux dire que tout cela semble tr√®s simple, mais c'est exactement le cas lorsque "le diable est dans les d√©tails", ou plut√¥t, "les bogues sont dans les d√©tails de l'impl√©mentation". <br><br>  La fin de la premi√®re partie du quatri√®me chapitre.  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deuxi√®me partie,</a> je parlerai de la fa√ßon dont la programmation des mod√®les est donn√©e au compilateur, et il y aura √©galement plus de magie de mod√®les cool.  Ah, et pourtant - pourquoi est <b>long long</b> pas une <b>constante int√©grale,</b> selon certains compilateurs √† ce jour. <br><br>  Merci de votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr417547/">https://habr.com/ru/post/fr417547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr417537/index.html">"Votre jeu est ennuyeux", ou comment augmenter la r√©tention d√©j√† √©lev√©e du premier jour</a></li>
<li><a href="../fr417539/index.html">Google condamn√© √† une amende record de 5 milliards de dollars pour avoir enfreint les lois antitrust en Europe</a></li>
<li><a href="../fr417541/index.html">Les enregistrements des pourparlers de mission Apollo avec le centre de contr√¥le de vol de la NASA num√©ris√©s</a></li>
<li><a href="../fr417543/index.html">Un √©tudiant universitaire chinois a √©t√© presque expuls√© en raison de la ¬´cote sociale¬ª de son p√®re</a></li>
<li><a href="../fr417545/index.html">La technologie de l'information a sa propre atmosph√®re particuli√®re.</a></li>
<li><a href="../fr417549/index.html">Demandez √† Ethan: Quelle est la taille de l'ensemble de l'univers inobservable dans son ensemble?</a></li>
<li><a href="../fr417551/index.html">CRISPR plaide pour l'√©galit√© d'acc√®s √† l'√©dition de g√®nes</a></li>
<li><a href="../fr417553/index.html">Webinaire ouvert "Pr√©processeurs CSS"</a></li>
<li><a href="../fr417555/index.html">Le s√©minaire Cargo Cult annonc√© √† Moscou: le marketing contre-attaque</a></li>
<li><a href="../fr417557/index.html">Pr√©sentation des machines CNC laser LaserSolid</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>