<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯН╛ ЁЯХб ЁЯЩПЁЯП┐ рдРрд╕рд╛ рдЕрд╕рд╛рдзрд╛рд░рдг рдЬрд╛рдирд╛ ЁЯЦ╝я╕П ЁЯдЮЁЯП╜ ЁЯШз</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЧреЛ 2 рдореЗрдВ рдирдИ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рдбреНрд░рд╛рдлреНрдЯ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рдкреНрд░рдХрд╛рд╢рд┐рдд рд╣реБрдП рд╣реИрдВред рдпрд╣ рдмрд╣реБрдд рд╣реА рдордирднрд╛рд╡рди рд╣реИ рдХрд┐ рднрд╛рд╖рд╛ рдПрдХ рдЬрдЧрд╣ рдирд╣реАрдВ рдЦрдбрд╝реА рд╣реЛрддреА рд╣реИ - рдпрд╣ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддреА ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдРрд╕рд╛ рдЕрд╕рд╛рдзрд╛рд░рдг рдЬрд╛рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425145/"><p>  рдЧреЛ 2 рдореЗрдВ рдирдИ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рдбреНрд░рд╛рдлреНрдЯ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рдкреНрд░рдХрд╛рд╢рд┐рдд рд╣реБрдП рд╣реИрдВред рдпрд╣ рдмрд╣реБрдд рд╣реА рдордирднрд╛рд╡рди рд╣реИ рдХрд┐ рднрд╛рд╖рд╛ рдПрдХ рдЬрдЧрд╣ рдирд╣реАрдВ рдЦрдбрд╝реА рд╣реЛрддреА рд╣реИ - рдпрд╣ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддреА рд╣реИ рдФрд░ рд╣рд░ рд╕рд╛рд▓ рдкреНрд░реЗрдЯрд┐рдпрд░ рдмрдврд╝рддреА рд╣реИред </p><br><p>  рдХреЗрд╡рд▓ рдЕрдм, рдЬрдмрдХрд┐ рдЧреЛ 2 рдХреЗрд╡рд▓ рдХреНрд╖рд┐рддрд┐рдЬ рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ, рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рдмрд╣реБрдд рджрд░реНрджрдирд╛рдХ рдФрд░ рджреБрдЦрдж рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдорд╛рдорд▓реЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╣рд╛рдереЛрдВ рдореЗрдВ рд▓реЗрддреЗ рд╣реИрдВред  рдХреЛрдб рдкреАрдврд╝реА рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛, рдЦрдЧреЛрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛, рдФрд░ рд╣рд╛рде рдХреА рдереЛрдбрд╝реА рд╕реА рднреА рдЧрддрд┐ рдХреЗ рд╕рд╛рде рдкреИрдирд┐рдХ рдХреА рдмрд╛рд░реА, рдкреИрдирд┐рдХ рдХреА рдмрд╛рд░реА ... рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдЕрдкрд╡рд╛рджреЛрдВ рдореЗрдВ! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0u/sd/fx/0usdfxkuqp9qtfe9biignfxdzxo.jpeg"></div><a name="habracut"></a><br><blockquote> рдФрд░ рддреБрд░рдВрдд рдореИрдВ рдПрдХ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рдФрд░ рдмрд┐рд▓реНрдХреБрд▓ рдЧрдВрднреАрд░ рдмрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред <br>  рдпрд╣ рдирд┐рд░реНрдгрдп рдкреНрд░рдХреГрддрд┐ рдореЗрдВ <em>рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ</em> рдордиреЛрд░рдВрдЬрдХ рдФрд░ рд╢реИрдХреНрд╖рдгрд┐рдХ рд╣реИред <br>  рдореЗрд░рд╛ рдорддрд▓рдм рд╕рд┐рд░реНрдл 4 рдордЬрд╝реЗ рд╕реЗ рд╣реИред  рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рд╕рдЪреНрдЪрд╛рдИ рдореЗрдВ рдПрдХ рд╕рдмреВрдд рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИред  рдореИрдВрдиреЗ рдЪреЗрддрд╛рд╡рдиреА рджреА :) </blockquote><br><h2 id="tak-chto-zhe-vyshlo">  рддреЛ рдХреНрдпрд╛ рд╣реБрдЖ </h2><br><p>  рдкрд░рд┐рдгрд╛рдо рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдерд╛</a> ред  рдФрд░ рдХреЛрдб рдЬрдирд░реЗрдЯрд░, рдЬреИрд╕рд╛ рдХрд┐ рд╕рднреА рдЬрд╛рдирддреЗ рд╣реИрдВ, рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдЕрдЪреНрдЫрд╛рдИ рдФрд░ рдЕрдиреБрдЧреНрд░рд╣ рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдЧреЛ рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╡реЗ рдмрд╣реБрдд рд▓реЛрдХрдкреНрд░рд┐рдп рд╣реИрдВред </p><br><p> рд╣рдордиреЗ рдРрд╕реЗ рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдХреЛ рдЧреЛ-рд░реЙ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рд╣реИред  рд╡рд╣ рдорд╛рдирдХ <code>go/ast</code> рдореЙрдбреНрдпреВрд▓ рдХреА рдорджрдж рд╕реЗ рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдХреБрдЫ рдХрд░рддрд╛ рд╣реИ <del>  рдирд╣реАрдВ </del>  рдЪрд╛рд▓рд╛рдХ рд░реВрдкрд╛рдВрддрд░рдг, рдкрд░рд┐рдгрд╛рдо рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЖрдЧреЗ рд▓рд┐рдЦрд╛ рд╣реИ, рдкреНрд░рддреНрдпрдп рдЬреЛрдбрд╝рдХрд░ <code>_jex.go</code> ред  рдкрд░рд┐рдгрд╛рдореА рдлрд╝рд╛рдЗрд▓реЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯреЗ рдХреНрд░рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рд╕рд░рд▓ рддрд░реАрдХреЗ рд╕реЗ, рд╣рдо рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдЧреЛ рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред </p><br><h2 id="polzuem">  рд╣рдо рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </h2><br><p>  рд╣рдо рдЬрдирд░реЗрдЯрд░ рдХреЛ рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рд╣реЗрдбрд░ рдореЗрдВ ( <code>package</code> рд╕реЗ рдкрд╣рд▓реЗ) рд╣рдо рд▓рд┐рдЦрддреЗ рд╣реИрдВ </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//+build jex //go:generate jex</span></span></code> </pre> <br><p>  рдпрджрд┐ рдЖрдк рдЕрдм рдХрдорд╛рдВрдб <code>go generate -tags jex</code> рдЪрд▓рд╛рддреЗ <code>go generate -tags jex</code> , рддреЛ <code>jex</code> рдпреВрдЯрд┐рд▓рд┐рдЯреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХреА рдЬрд╛рдПрдЧреАред  рд╡рд╣ <code>os.Getenv("GOFILE")</code> рд╕реЗ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рд▓реЗрддрд╛ рд╣реИ, рдЗрд╕реЗ рдЦрд╛рддрд╛ рд╣реИ, рдЗрд╕реЗ рдкрдЪрд╛рддрд╛ рд╣реИ рдФрд░ <code>{file}_jex.go</code> рд▓рд┐рдЦрддрд╛ рд╣реИред  рд╣реЗрдбрд░ рдореЗрдВ рдирд╡рдЬрд╛рдд рдлрд╝рд╛рдЗрд▓ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <code>//+build !jex</code> рд╣реИрдбрд░ рдореЗрдВ (рдЯреИрдЧ рдЙрд▓реНрдЯрд╛ рд╣реИ), рдЗрд╕рд▓рд┐рдП <code>go build</code> , рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрдореНрдкрд╛рд░реНрдЯрдореЗрдВрдЯ рдореЗрдВ рдЕрдиреНрдп рдХрдорд╛рдВрдб, рдЬреИрд╕реЗ <code>go test</code> рдпрд╛ <code>go install</code> , рдХреЗрд╡рд▓ <em>рдирдИ</em> , рд╕рд╣реА рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦреЗрдВред  рд▓реЗрдкреЛрдЯрд╛ ... </p><br><p>  рдЕрдм рдбреЙрдЯ-рдЖрдпрд╛рдд <code>github.com/anjensan/jex</code> ред <br>  рд╣рд╛рдБ, рдЬрдмрдХрд┐ рдПрдХ рдмрд┐рдВрджреБ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдпрд╛рдд рдЕрдирд┐рд╡рд╛рд░реНрдп рд╣реИред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕реЗ рдЙрд╕реА рддрд░рд╣ рдЫреЛрдбрд╝рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рд╣реИред </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/anjensan/jex"</span></span></code> </pre> <br><p>  рдорд╣рд╛рди, рдЕрдм рдЖрдк рдХреЛрдб рдореЗрдВ <code>THROW</code> рдХрд╛рд░реНрдпреЛрдВ <code>TRY</code> , <code>THROW</code> , <code>EX</code> рдХреЙрд▓ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рд╕рдм рдХреЗ рд▓рд┐рдП, рдХреЛрдб рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рд░реВрдк рд╕реЗ рдорд╛рдиреНрдп рд╣реИ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рдЕрд╕рдВрд╕рд╛рдзрд┐рдд рд░реВрдк рдореЗрдВ рднреА рд╕рдВрдХрд▓рди рдХрд░рддрд╛ рд╣реИ (рдпрд╣ рд╕рд┐рд░реНрдл рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ), рдЗрд╕рд▓рд┐рдП рдСрдЯреЛ-рдкреВрд░реНрдгрддрд╛ рдЙрдкрд▓рдмреНрдз рд╣реИ рдФрд░ рд▓рд┐рдВрдЯрд░ <em>рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ</em> рдХрд╕рдо <em>рдирд╣реАрдВ</em> рдЦрд╛рддреЗ рд╣реИрдВред  рд╕рдВрдкрд╛рджрдХреЛрдВ рдХреЛ рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рд▓реЗрдЦрди рднреА рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЕрдЧрд░ рдХреЗрд╡рд▓ рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рдерд╛ред </p><br><p>  рдПрдХ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХ рджреЗрдВ </p><br><pre> <code class="go hljs">THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"error name"</span></span>))</code> </pre> <br><p>  рдЕрдкрд╡рд╛рдж рдХреЛ рдкрдХрдбрд╝реЛ </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { <span class="hljs-comment"><span class="hljs-comment">//   } else { fmt.Println(EX()) }</span></span></code> </pre> <br><p>  рдПрдХ рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рди рд╣реБрдб рдХреЗ рддрд╣рдд рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИред  рдФрд░ рдЗрд╕рдореЗрдВ <code>defer</code> ред  рдФрд░ рдЗрд╕рдХрд╛ рдПрдХ рдФрд░ рдХрд╛рд░реНрдп рд╣реИред  рдФрд░ рдЗрд╕реЗ <code>recover</code> ... рдЦреИрд░, рдЕрднреА рднреА <code>return</code> рдФрд░ <code>defer</code> рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рд╕рд╛ рдЬрд╛рджреВ-рдЯреЛрдирд╛ рд╣реИред </p><br><p>  рдФрд░ рд╣рд╛рдБ, рд╡реИрд╕реЗ, рд╡реЗ рд╕рдорд░реНрдерд┐рдд рд╣реИрдВ! </p><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рд╡рд┐рд╢реЗрд╖ рдореИрдХреНрд░реЛ рдЪрд░ <code>ERR</code> ред  рдпрджрд┐ рдЖрдк рдЗрд╕рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдРрд╕реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ рдЬреЛ рдЕрднреА рднреА рдкреБрд░рд╛рдиреЗ рддрд░реАрдХреЗ рд╕реЗ рдПрдХ <code>error</code> рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ </p><br><pre> <code class="go hljs">file, ERR := os.Open(filename)</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рд╡рд╣рд╛рдБ рдЫреЛрдЯреЗ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдмреИрдЧ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рд╣реИрдВ <code>ex</code> рдФрд░ <code>must</code> , рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдБ рдмрд╣реБрдд рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реИред </p><br><h2 id="primery">  рдЙрджрд╛рд╣рд░рдг </h2><br><p>  рдпрд╣рд╛рдБ рд╕рд╣реА, рдореБрд╣рд╛рд╡рд░реЗрджрд╛рд░ рдЧреЛ рдХреЛрдб рдХрд╛ рдЙрджрд╛рд╣рд░рдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CopyFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(src, dst </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { r, err := os.Open(src) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"copy %s %s: %v"</span></span>, src, dst, err) } <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> r.Close() w, err := os.Create(dst) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"copy %s %s: %v"</span></span>, src, dst, err) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> _, err := io.Copy(w, r); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { w.Close() os.Remove(dst) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"copy %s %s: %v"</span></span>, src, dst, err) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err := w.Close(); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { os.Remove(dst) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"copy %s %s: %v"</span></span>, src, dst, err) } }</code> </pre> <br><p>  рдпрд╣ рдХреЛрдб рдЗрддрдирд╛ рдЕрдЪреНрдЫрд╛ рдФрд░ рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИред  рд╡реИрд╕реЗ, рдпрд╣ рдХреЗрд╡рд▓ рдореЗрд░реА рд░рд╛рдп рдирд╣реАрдВ рд╣реИ! <br>  рд▓реЗрдХрд┐рди <code>jex</code> рд╣рдореЗрдВ рдЗрд╕реЗ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧреАред </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CopyFile_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(src, dst </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> ex.Logf(<span class="hljs-string"><span class="hljs-string">"copy %s %s"</span></span>, src, dst) r, ERR := os.Open(src) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> r.Close() w, ERR := os.Create(dst) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { ERR := io.Copy(w, r) ERR := w.Close() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { w.Close() os.Remove(dst) THROW() } }</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпрдХреНрд░рдо </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { hex, err := ioutil.ReadAll(os.Stdin) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatal(err) } data, err := parseHexdump(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(hex)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatal(err) } os.Stdout.Write(data) }</code> </pre> <br><p>  рдХреЗ рд░реВрдк рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { hex, ERR := ioutil.ReadAll(os.Stdin) data, ERR := parseHexdump(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(hex)) os.Stdout.Write(data) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { log.Fatal(EX()) } }</code> </pre> <br><p>  рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╡рд┐рдЪрд╛рд░ рдХреЛ рдмреЗрд╣рддрд░ рдорд╣рд╕реВрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдореВрд▓ рдХреЛрдб </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printSum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { x, err := strconv.Atoi(a) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } y, err := strconv.Atoi(b) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } fmt.Println(<span class="hljs-string"><span class="hljs-string">"result:"</span></span>, x + y) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br><p>  рдХреЗ рд░реВрдк рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printSum_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { x, ERR := strconv.Atoi(a) y, ERR := strconv.Atoi(b) fmt.Println(<span class="hljs-string"><span class="hljs-string">"result:"</span></span>, x + y) }</code> </pre> <br><p>  рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printSum_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { fmt.Println(<span class="hljs-string"><span class="hljs-string">"result:"</span></span>, must.Int_(strconv.Atoi(a)) + must.Int_(strconv.Atoi(b))) }</code> </pre> <br><h2 id="isklyuchenie">  рдЕрдкрд╡рд╛рдж </h2><br><p>  рдиреАрдЪреЗ рдХреА рд░реЗрдЦрд╛ <code>error</code> рдЙрджрд╛рд╣рд░рдг рдкрд░ рдПрдХ рд╕рд░рд▓ рдЖрд╡рд░рдг рд╕рдВрд░рдЪрдирд╛ рд╣реИред </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> exception <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  ,   err error //  ^W , ,    log []interface{} //      ,    suppress []*exception }</span></span></code> </pre> <br><p>  рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ рдпрд╣ рд╣реИ рдХрд┐ рд╕рд╛рдзрд╛рд░рдг рдЖрддрдВрдХ рд╣рдорд▓реЛрдВ рдХреЛ рдЕрдкрд╡рд╛рдж рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, <code>runtime.TypeAssertionError</code> рдЬреИрд╕реА рд╕рднреА рдорд╛рдирдХ рддреНрд░реБрдЯрд┐рдпрд╛рдБ рдХреЛрдИ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реИрдВред  рдпрд╣ рдЧреЛ рдореЗрдВ рд╕реНрд╡реАрдХреГрдд рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдУрдВ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИ - рдЕрдЧрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕, рдирд┐рд▓-рдбреЗрд░реЗрдлреЗрд░реЗрдВрд╕ рд╣реИ, рддреЛ рд╣рдо рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╣рд░реНрд╖ рдФрд░ рдЦреБрд╢реА рд╕реЗ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВред  рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдФрд░ рдЕрдиреБрдорд╛рдирд┐рддред  рд╣рд╛рд▓рд╛рдБрдХрд┐ рдореБрдЭреЗ рдпрдХреАрди рдирд╣реАрдВ рд╣реИ, рд╢рд╛рдпрдж рдпрд╣ рдЗрд╕ рдкрд▓ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдФрд░ рдРрд╕реА рдЧрд▓рддрд┐рдпреЛрдВ рдХреЛ рдкрдХрдбрд╝рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИред  рд╢рд╛рдпрдж рд╡реИрдХрд▓реНрдкрд┐рдХ? </p><br><p>  рдФрд░ рдпрд╣рд╛рдБ рдПрдХ рдЕрдкрд╡рд╛рдж рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"one"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">two_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"two"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">three</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { one_() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { two_() } }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рд╣рдо рд╢рд╛рдВрддрд┐ рд╕реЗ рдЕрдкрд╡рд╛рдж рдХреЛ рд╕рдВрднрд╛рд▓рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдЕрдЪрд╛рдирдХ рдмреИрдо ... рдФрд░ рдЕрдкрд╡рд╛рдж <code>two</code> рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддреЛ, рд╕реНрд░реЛрдд <code>one</code> <code>suppress</code> рд╕реЗ рдЗрд╕реЗ <code>suppress</code> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╕рдВрд▓рдЧреНрди <code>one</code> ред  рдХреБрдЫ рднреА рдирд╣реАрдВ рдЦреЛ рдЬрд╛рдПрдЧрд╛, рд╕рдм рдХреБрдЫ рд▓реЙрдЧ рдореЗрдВ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП, рдмрд╣реБрдд рд▓реЛрдХрдкреНрд░рд┐рдп <code>fmt.Errorf("blabla: %v", err)</code> рдкреИрдЯрд░реНрди <code>fmt.Errorf("blabla: %v", err)</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реАрдзреЗ рд╕рдВрджреЗрд╢ рдкрд╛рда рдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдкреВрд░реА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рдзрдХреЗрд▓рдиреЗ рдХреА рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреЛрдИ рднреА, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдпрд╣рд╛рдВ рдЗрд╕рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдпрджрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><h2 id="kogda-zabyli-otlovit">  рдЬрдм рдкрдХрдбрд╝рдирд╛ рднреВрд▓ рдЧрдпрд╛ </h2><br><p>  рдЖрд╣, рдПрдХ рдФрд░ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБред  рдкрдардиреАрдпрддрд╛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрд╛рдВрдЪ рд╣реИ: рдпрджрд┐ рдХреЛрдИ рдлрд╝рдВрдХреНрд╢рди рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рдЙрд╕рдХрд╛ рдирд╛рдо <code>_</code> рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХ рдЬрд╛рдирдмреВрдЭрдХрд░ рдЯреЗрдврд╝рд╛ рдирд╛рдо рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЛ рдмрддрд╛рдПрдЧрд╛ "рдкреНрд░рд┐рдп рдорд╣реЛрджрдп, рдпрд╣рд╛рдВ рдЖрдкрдХреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдХреГрдкрдпрд╛ рд╕рд╛рд╡рдзрд╛рди рдФрд░ рдореЗрд╣рдирддреА рд░рд╣реЗрдВ!" </p><br><p>  рдПрдХ рдЬрд╛рдБрдЪ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рд╕рд╛рде рд╣реА рдЗрд╕реЗ <code>jex-check</code> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╢рд╛рдпрдж рдЕрдиреНрдп рдмрд┐рд▓реНрдбрд░реЛрдВ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИред </p><br><p>  рдЯрд┐рдкреНрдкрдгреА рдЬрд╛рдБрдЪ <code>//jex:nocheck</code> ред  рдпрд╣, рд╡реИрд╕реЗ, рдПрдХ рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдлреЗрдВрдХрдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИред </p><br><p>  рдмреЗрд╢рдХ, рдпрд╣ рд╕рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд░рд╛рдордмрд╛рдг рдирд╣реАрдВ рд╣реИред  рдЪреЗрдХрд░ рдЗрд╕рд╕реЗ рдЪреВрдХ рдЬрд╛рдПрдЧрд╛ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bad_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"ups"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">worse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { f := bad_ f() }</code> </pre> <br><p>  рджреВрд╕рд░реА рдУрд░, рдпрд╣ рдЧрд▓рдд <code>err declared and not used</code> рд▓рд┐рдП рдорд╛рдирдХ рдЬрд╛рдВрдЪ рд╕реЗ рдмрд╣реБрдд рдЦрд░рд╛рдм <code>err declared and not used</code> , рдЬрд┐рд╕реЗ рджрд░рдХрд┐рдирд╛рд░ рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИред </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">worse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { a, err := foo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } b, err := bar() <span class="hljs-comment"><span class="hljs-comment">//  ,    ok... go vet, ? }</span></span></code> </pre> <br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рдкреНрд░рд╢реНрди рджрд╛рд░реНрд╢рдирд┐рдХ рд╣реИ, рдХреНрдпрд╛ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ рдЬрдм рдЖрдк рддреНрд░реБрдЯрд┐ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рднреВрд▓ рдЧрдП - рдЪреБрдкрдЪрд╛рдк рдЗрд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВ, рдпрд╛ рдПрдХ рдЖрддрдВрдХ рдмрд╛рд╣рд░ рдлреЗрдВрдХ рджреЗрдВ ... рд╡реИрд╕реЗ, рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рд░реНрд╡реЛрддреНрддрдо рдкрд░рд┐рдгрд╛рдо рдХрдВрдкрд╛рдЗрд▓рд░ рдореЗрдВ рдЕрдкрд╡рд╛рдж рд╕рдорд░реНрдерди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрд╕ рд▓реЗрдЦ рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдкрд░реЗ рд╣реИред ред </p><br><p>  рдХреБрдЫ рд▓реЛрдЧ рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдПрдХ рдЕрджреНрднреБрдд рд╕рдорд╛рдзрд╛рди рд╣реИ, рдпрд╣ рдЕрдм рдПрдХ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдм рдЕрдкрд╡рд╛рдж рдХрд╛ рдорддрд▓рдм рдмрд╣реБрдд рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИред  рдЦреИрд░, рд╡рд╣рд╛рдБ, рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдЯреИрдХ рдХреЗ рдирд┐рд╢рд╛рди рдЕрдкрд╡рд╛рджреЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рдирд╣реАрдВ рд╣реИрдВ, рдпрд╛ рдлрд╝рдВрдХреНрд╢рди рдирд╛рдореЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рд▓рд╛рдЗрдирд░ рд╣реИ, рдпрд╛ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди <code>_</code> рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдлреЗрдВрдХрдирд╛ рдирд╣реАрдВ рд╣реИ, рдпрд╛ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдореЗрдВ рдХреЛрдИ рдкреНрд░рддреНрдпрдХреНрд╖ рд╕рдорд░реНрдерди рдирд╣реАрдВ рд╣реИ, рдпрд╛ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрддрдВрдХ рд╣реИ, рдФрд░ рдШрдмрд░рд╛рд╣рдЯ рдПрдХ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣реИрдкреНрдкреАрдпреЛрд▓рд╕ ... рдмреАрдЬрд╛рдгреБ рдмреЗрдХрд╛рд░ рдФрд░ рд╡реНрдпрд░реНрде рдХреЗ рд░реВрдк рдореЗрдВ рдЧрд░реНрдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЙрдиреНрд╣реЗрдВ рд▓реЗрдЦ рдХреЗ рдмреЛрд░реНрдб рдХреЗ рдкреАрдЫреЗ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛, рдФрд░ рдореИрдВ рд╡рд░реНрдгрд┐рдд рд╕рдорд╛рдзрд╛рди рдХреЛ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ "рдЕрдкрд╡рд╛рдж" рдХрд╣реВрдВрдЧрд╛ред </p><br><h2 id="po-povodu-stektreysov">  рдвреЗрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h2><br><p>  рдЕрдХреНрд╕рд░ рдбреЗрд╡рд▓рдкрд░реНрд╕, рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╕реНрдЯрдо <code>error</code> рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдЯреИрдХ рдЯреНрд░реЗрд╕ рдХреЛ рдЪрд┐рдкрдХрд╛рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдХрдИ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреБрд╕реНрддрдХрд╛рд▓рдп рднреА рд╣реИрдВред  рд▓реЗрдХрд┐рди, рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рд╕рд╛рде, рдЧреЛ рдХреА рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдХрд╛рд░рдг рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ - рдЖрддрдВрдХ рдХреЗ рджреМрд░рд╛рди, рдХреЛрдб рдХреЗ рдвреЗрд░ рд╕рдВрджрд░реНрдн рдореЗрдВ <code>defer</code> рдмреНрд▓реЙрдХреЛрдВ <code>defer</code> рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдЖрддрдВрдХ рдХреЛ рдлреЗрдВрдХ рджреЗрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдпрд╣рд╛рдБ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"ups"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { foo_() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { debug.PrintStack() } }</code> </pre> <br><p>  рдПрдХ рдкреВрд░реНрдг-рд╕реНрдЯреИрдХ рдЯреНрд░реЗрд╕ рдЯреНрд░реЗрд╕ рд╣реЛрдЧрд╛, рдереЛрдбрд╝реА рд╕реА рдХреНрд░рд┐рдпрд╛ (рдореИрдВ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдХрд╛рдЯ рджреЗрддрд╛ рд╣реВрдВ) </p><br><pre> <code class="go hljs"> runtime/debug.Stack runtime/debug.PrintStack main.bar.func2 github.com/anjensan/jex/runtime.TryCatch.func1 <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span> main.foo_ main.bar.func1 github.com/anjensan/jex/runtime.TryCatch main.bar main.main</code> </pre> <br><p>  рд╕реНрдЯреИрдХ рдЯреНрд░реЗрд╕ рдХреЛ рдлреЙрд░реНрдореЗрдЯ рдХрд░рдиреЗ / рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ, рд╕рд░реЛрдЧреЗрдЯ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рдЙрдиреНрд╣реЗрдВ рдкрдардиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдЫрд┐рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╕рд╣рд╛рдпрдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреЛрдЯ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрддреА рд╣реИред  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдЪрд╛рд░ рд╣реИ, рдореЗрдВ рд▓рд┐рдЦрд╛ рд╣реИред </p><br><p>  рдпрд╛ рдЖрдк рд╕реНрдЯреИрдХ рдХреЛ рдкрдХрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ <code>ex.Log()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдЕрдкрд╡рд╛рдж рдореЗрдВ рд╕рдВрд▓рдЧреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдлрд┐рд░, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╣реЙрд░рд┐рди рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИ - рд╕реНрдЯреНрд░реЗрдХреНрддреНрд░реЗрд╕ рдЦреЛ рдирд╣реАрдВ рдЬрд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foobar_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { e := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> error, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> <span class="hljs-built_in"><span class="hljs-built_in">close</span></span>(e) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { checkZero_() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { EX().Log(debug.Stack()) <span class="hljs-comment"><span class="hljs-comment">//   e &lt;- EX().Wrap() //     } }() ex.Must_(&lt;-e) //  ,  ,  }</span></span></code> </pre> <br><h2 id="k-sozhaleniyu">  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ </h2><br><p>  рдПрд╣ ... рдмреЗрд╢рдХ, рдРрд╕рд╛ рдХреБрдЫ рдмреЗрд╣рддрд░ рд▓рдЧреЗрдЧрд╛ </p><br><pre> <code class="go hljs"> try { throw io.EOF, <span class="hljs-string"><span class="hljs-string">"some comment"</span></span> } catch e { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"exception: %v"</span></span>, e) }</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рдЕрдлрд╕реЛрд╕, рдЖрд╣, рдЧреЛ рдХреА рд╡рд╛рдХреНрдп рд░рдЪрдирд╛ рдЧреИрд░-рдПрдХреНрд╕реНрдЯреЗрдВрд╕рд┐рдмрд▓ рд╣реИред <br>  [рд╡рд┐рдЪрд╛рд░рдкреВрд░реНрд╡рдХ] рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╢рд╛рдпрдж, рдпрд╣ рдмреЗрд╣рддрд░ рдХреЗ рд▓рд┐рдП рд╣реИ ... </p><br><p>  рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдмрд┐рдЧрд╛рдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред  рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рдЪрд╛рд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдмрдирд╛рдирд╛ рдерд╛ </p><br><pre> <code class="go hljs"> TRY; { THROW(io.EOF, <span class="hljs-string"><span class="hljs-string">"some comment"</span></span>) }; CATCH; { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"exception: %v"</span></span>, EX) }</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рдЗрд╕ рддрд░рд╣ рдХреЗ рдХреЛрдб <code>go fmt</code> рдмрд╛рдж рдЧреВрдВрдЧрд╛ рджрд┐рдЦрддрд╛ рд╣реИред  рдФрд░ рдХрдВрдкрд╛рдЗрд▓рд░ рд╢рдкрде рд▓реЗрддрд╛ рд╣реИ рдЬрдм рд╡рд╣ рджреЛрдиреЛрдВ рд╢рд╛рдЦрд╛рдУрдВ рдореЗрдВ <code>return</code> рд╣реИред  <code>if-TRY</code> рд╕рд╛рде рдРрд╕реА рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдпрд╣ рдЬрд░реВрд░реА рд╣реЛрдЧрд╛ рдХрд┐ <code>ERR</code> рдореИрдХреНрд░реЛ рдХреЛ <code>MUST</code> рдлрдВрдХреНрд╢рди (рд╕рд┐рд░реНрдл рдЗрд╕рд╕реЗ рдмреЗрд╣рддрд░) рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛рдПред  рд▓рд┐рдЦрдиреЗ рдХреЗ рдХреНрд░рдо рдореЗрдВ </p><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MUST(strconv.Atoi(a)) + MUST(strconv.Atoi(b))</code> </pre> <br><p>  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдпрд╣ рдЕрднреА рднреА рд╕рдВрднрд╡ рд╣реИ, рдЬрдм рдПрд╕реНрдЯ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЖрд╡рд░рдг рдлрд╝рдВрдХреНрд╢рди рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкреИрдХреЗрдЬ рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдП рдЧрдП, рдФрд░ рдлрд┐рд░ рд╕рдВрдмрдВрдзрд┐рдд рд╕рд░реЛрдЧреЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдирд╛рдо рдХреЗ рд╕рд╛рде <code>MUST</code> рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд <code>MUST</code> ред  рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рддреБрдЪреНрдЫ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдВрднрд╡ рд╣реИ ... рдХреЗрд╡рд▓ рд╕рдВрдкрд╛рджрдХ / рд╡рд┐рдЪрд╛рд░рдХ рдРрд╕реЗ рдХреЛрдб рдХреЛ рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдПрдВрдЧреЗред  рдЖрдЦрд┐рд░рдХрд╛рд░, рдЧреЛрд╕реНрдЯ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рднреАрддрд░ <code>MUST</code> рд╕реНрдЯрдм рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИред  рдФрд░ рдЗрд╕рд▓рд┐рдП рдХреЛрдИ рд╕реНрд╡рдд: рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИред </p><br><h2 id="pod-kapotom">  рд╣реБрдб рдХреЗ рдиреАрдЪреЗ </h2><br><p>  рд╕рднреА рд╕рдВрд╕рд╛рдзрд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдПрдХ рдирдпрд╛ рдЖрдпрд╛рдд рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> _jex <span class="hljs-string"><span class="hljs-string">"github.com/anjensan/jex/runtime"</span></span></code> </pre> <br><p>  <code>panic(_jex.NewException(...))</code> рдХреЙрд▓ <code>THROW</code> <code>panic(_jex.NewException(...))</code> <code>THROW</code> рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  <code>EX()</code> рд╕реНрдерд╛рдиреАрдп рдЪрд░ рдХреЗ рдирд╛рдо рд╕реЗ рднреА рдмрджрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдкрдХрдбрд╝рд╛ рдЧрдпрд╛ рдЕрдкрд╡рд╛рдж рд╣реЛрддрд╛ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди <code>if TRY() {..} else {..}</code> рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдереЛрдбрд╝рд╛ рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕рднреА <code>return</code> рдФрд░ <code>defer</code> рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╣реЛрддрд╛ рд╣реИред  рддрдм рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЕрдЧрд░ рд╢рд╛рдЦрд╛рдУрдВ рдХреЛ рдЧреБрдордирд╛рдо рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдлрд┐рд░ рдпреЗ рдлрд╝рдВрдХреНрд╢рди <code>_jex.TryCatch(..)</code> рдХреЛ рдкрд╛рд╕ рдХрд░ <code>_jex.TryCatch(..)</code> рдЬрд╛рддреЗ рд╣реИрдВред  рдпрд╣рд╛рдБ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { fmt.Println(<span class="hljs-string"><span class="hljs-string">"before"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a == <span class="hljs-number"><span class="hljs-number">0</span></span> { THROW(errors.New(<span class="hljs-string"><span class="hljs-string">"a == 0"</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> fmt.Printf(<span class="hljs-string"><span class="hljs-string">"a = %d\n"</span></span>, a) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"ok"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fmt.Println(<span class="hljs-string"><span class="hljs-string">"fail"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"hmm"</span></span> }</code> </pre> <br><p>  рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ (рдореИрдВрдиреЗ <code>//line</code> рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛): </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_jex_r0 </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, _jex_r1 </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _jex_ret <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> fmt.Println(<span class="hljs-string"><span class="hljs-string">"before"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _jex_md2502 _jex.MultiDefer <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> _jex_md2502.Run() _jex.TryCatch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> a == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(_jex.NewException(errors.New(<span class="hljs-string"><span class="hljs-string">"a == 0"</span></span>))) } { _f, _p0, _p1 := fmt.Printf, <span class="hljs-string"><span class="hljs-string">"a = %d\n"</span></span>, a _jex_md2502.Defer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { _f(_p0, _p1) }) } _jex_ret, _jex_r0, _jex_r1 = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, a+<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"ok"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_jex_ex _jex.Exception)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> _jex.Suppress(_jex_ex) fmt.Println(<span class="hljs-string"><span class="hljs-string">"fail"</span></span>) }) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> _jex_ret { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"hmm"</span></span> }</code> </pre><br><p>  рдПрдХ рдмрд╣реБрдд, рд╕реБрдВрджрд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдареАрдХ рд╣реИ, рд╕рдм рдирд╣реАрдВ рдФрд░ рд╣рдореЗрд╢рд╛ рдирд╣реАрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк TRY рдХреЗ рдЕрдВрджрд░ <code>defer-recover</code> рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдХреНрдпреЛрдВрдХрд┐ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдЕрддрд┐рд░рд┐рдХреНрдд рд▓реИрдореНрдмреНрдбрд╛ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рдкреЗрдбрд╝ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡рд┐рдХрд▓реНрдк "рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ" рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддреЛ, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, <code>go/printer</code> рдХреЛ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд┐рдВрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП ... рд╡рд╣ рдЬреЛ рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ рдХрд░рддрд╛ рд╣реИ, рд╕рдЪреНрдЪрд╛рдИ рдмрд╣реБрдд, рдмрд╣реБрдд рдХреБрдЯрд┐рд▓ рд╣реИ =) рдореИрдВ рдЙрджрд╛рд╣рд░рдг рдирд╣реАрдВ рджреВрдВрдЧрд╛, рдмрд╕ рдХреБрдЯрд┐рд▓ред  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдРрд╕реА рд╕рдорд╕реНрдпрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдпрджрд┐ рдЖрдк рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рд╕рднреА рдПрд╕реНрдЯреНрд░реЛ-рдиреЛрдбреНрд╕ (рдЕрдм рд╡реЗ рдЦрд╛рд▓реА рд╣реИрдВ) рдХреЗ рд▓рд┐рдП рдкрджреЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЪреАрдЬреЛрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИред </p><br><h2 id="probuem">  рдХреЛрд╢рд┐рд╢ </h2><br><p>  рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рд╕реЗ рдмрд╛рд╣рд░, рдореИрдВрдиреЗ рдПрдХ рдЫреЛрдЯрд╛ <a href="">рдмреЗрдВрдЪрдорд╛рд░реНрдХ</a> рд▓рд┐рдЦрд╛ред </p><br><p>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд▓рдХрдбрд╝реА рдХреЗ qsort рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ рдЬреЛ рд▓реЛрдб рдореЗрдВ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред  рдорд┐рд▓рд╛ - рдПрдХ рдЧрд▓рддреАред  рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рдмрд╕ рдЗрд╕реЗ <code>return err</code> <code>fmt.Errorf</code> рд╕реЗ рдлреЗрдВрдХрддрд╛ рд╣реИ, рджреВрд╕рд░рд╛ <code>fmt.Errorf</code> рдХрд╣рдХрд░ рддреНрд░реБрдЯрд┐ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред  рдФрд░ рдПрдХ рдФрд░ рдЕрдкрд╡рд╛рджреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдЖрдХрд╛рд░реЛрдВ рдХреЗ рд╕реНрд▓рд╛рдЗрд╕реЛрдВ рдХреЛ рдЫрд╛рдВрдЯрддреЗ рд╣реИрдВ, рдпрд╛ рддреЛ рдмрд┐рдирд╛ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдХреЗ (рдмрд┐рдирд╛ рдХрд┐рд╕реА рддреНрд░реБрдЯрд┐ рдХреЗ, рд╕реНрд▓рд╛рдЗрд╕ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реЙрд░реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рдпрд╛ рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде (рд▓рдЧрднрдЧ рдЖрдзреЗ рд░рд╛рд╕реНрддреЗ рд╕реЗ рдЫрдВрдЯрдиреА рд╣реЛрддреА рд╣реИ, рдЗрд╕реЗ рдЯрд╛рдЗрдорд┐рдВрдЧ рджреНрд╡рд╛рд░рд╛ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред </p><br><div class="spoiler">  <b class="spoiler_title">рдкрд░рд┐рдгрд╛рдо</b> <div class="spoiler_text"><pre> <code class="hljs powershell">~ &gt; cat /proc/cpuinfo | grep <span class="hljs-string"><span class="hljs-string">'model name'</span></span> | head <span class="hljs-literal"><span class="hljs-literal">-1</span></span> model name : Intel(R) Core(TM) i7<span class="hljs-literal"><span class="hljs-literal">-6700K</span></span> CPU <span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span> <span class="hljs-number"><span class="hljs-number">4.00</span></span>GHz ~ &gt; go version go version go1.<span class="hljs-number"><span class="hljs-number">11</span></span> linux/amd64 ~ &gt; go test <span class="hljs-literal"><span class="hljs-literal">-bench</span></span>=. github.com/anjensan/jex/demo goos: linux goarch: amd64 pkg: github.com/anjensan/jex/demo BenchmarkNoErrors/_____10/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">10000000</span></span> <span class="hljs-number"><span class="hljs-number">236</span></span> ns/op BenchmarkNoErrors/_____10/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">5000000</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> ns/op BenchmarkNoErrors/_____10/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">5000000</span></span> <span class="hljs-number"><span class="hljs-number">287</span></span> ns/op BenchmarkNoErrors/____100/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500000</span></span> <span class="hljs-number"><span class="hljs-number">3119</span></span> ns/op BenchmarkNoErrors/____100/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500000</span></span> <span class="hljs-number"><span class="hljs-number">3194</span></span> ns/op BenchmarkNoErrors/____100/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500000</span></span> <span class="hljs-number"><span class="hljs-number">3533</span></span> ns/op BenchmarkNoErrors/___1000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">30000</span></span> <span class="hljs-number"><span class="hljs-number">42356</span></span> ns/op BenchmarkNoErrors/___1000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">30000</span></span> <span class="hljs-number"><span class="hljs-number">42204</span></span> ns/op BenchmarkNoErrors/___1000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">30000</span></span> <span class="hljs-number"><span class="hljs-number">44465</span></span> ns/op BenchmarkNoErrors/__10000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">525864</span></span> ns/op BenchmarkNoErrors/__10000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">524781</span></span> ns/op BenchmarkNoErrors/__10000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">561256</span></span> ns/op BenchmarkNoErrors/_100000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">6309181</span></span> ns/op BenchmarkNoErrors/_100000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">6335135</span></span> ns/op BenchmarkNoErrors/_100000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">6687197</span></span> ns/op BenchmarkNoErrors/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">76274341</span></span> ns/op BenchmarkNoErrors/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">77806506</span></span> ns/op BenchmarkNoErrors/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">78019041</span></span> ns/op BenchmarkOneError/_____10/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">2000000</span></span> <span class="hljs-number"><span class="hljs-number">712</span></span> ns/op BenchmarkOneError/_____10/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">5000000</span></span> <span class="hljs-number"><span class="hljs-number">268</span></span> ns/op BenchmarkOneError/_____10/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">2000000</span></span> <span class="hljs-number"><span class="hljs-number">799</span></span> ns/op BenchmarkOneError/____100/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500000</span></span> <span class="hljs-number"><span class="hljs-number">2296</span></span> ns/op BenchmarkOneError/____100/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-number"><span class="hljs-number">1809</span></span> ns/op BenchmarkOneError/____100/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500000</span></span> <span class="hljs-number"><span class="hljs-number">3529</span></span> ns/op BenchmarkOneError/___1000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">100000</span></span> <span class="hljs-number"><span class="hljs-number">21168</span></span> ns/op BenchmarkOneError/___1000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">100000</span></span> <span class="hljs-number"><span class="hljs-number">20747</span></span> ns/op BenchmarkOneError/___1000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">50000</span></span> <span class="hljs-number"><span class="hljs-number">24560</span></span> ns/op BenchmarkOneError/__10000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-number"><span class="hljs-number">242077</span></span> ns/op BenchmarkOneError/__10000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-number"><span class="hljs-number">242376</span></span> ns/op BenchmarkOneError/__10000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-number"><span class="hljs-number">251043</span></span> ns/op BenchmarkOneError/_100000/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">2753692</span></span> ns/op BenchmarkOneError/_100000/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">2824116</span></span> ns/op BenchmarkOneError/_100000/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">2845701</span></span> ns/op BenchmarkOneError/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/exception<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">33452819</span></span> ns/op BenchmarkOneError/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/return_err<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">33374000</span></span> ns/op BenchmarkOneError/<span class="hljs-number"><span class="hljs-number">1000000</span></span>/fmt.errorf<span class="hljs-literal"><span class="hljs-literal">-8</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">33705994</span></span> ns/op PASS ok github.com/anjensan/jex/demo <span class="hljs-number"><span class="hljs-number">64.008</span></span>s</code> </pre> </div></div><br><p>  рдпрджрд┐ рддреНрд░реБрдЯрд┐ рдХреЛ рдлреЗрдВрдХ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдХреЛрдб рд╕реНрдерд┐рд░ рдФрд░ рдкреНрд░рдмрд▓рд┐рдд рдХрдВрдХреНрд░реАрдЯ рд╣реИ), рддреЛ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрдиреЗ рдХреА рдЧрд╛рд░рдВрдЯреА рд▓рдЧрднрдЧ <code>fmt.Errorf</code> рдФрд░ <code>fmt.Errorf</code> <code>return err</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреБрд▓рдиреАрдп рд╣реИред  рдХрднреА-рдХрднреА рдереЛрдбрд╝рд╛ рддреЗрдЬред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рддреНрд░реБрдЯрд┐ рдХреЛ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдЕрдкрд╡рд╛рдж рджреВрд╕рд░реЗ рд╕реНрдерд╛рди рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм "рдЙрдкрдпреЛрдЧреА рдХрд╛рд░реНрдп / рддреНрд░реБрдЯрд┐" рдФрд░ рд╕реНрдЯреИрдХ рдХреА рдЧрд╣рд░рд╛рдИ рдХреЗ рдЕрдиреБрдкрд╛рдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдЫреЛрдЯреЗ рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП, <code>return err</code> рдЧреИрдк рд╕реЗ рдЖрдЧреЗ рдЬрд╛рддрд╛ рд╣реИ, рдордзреНрдпрдо рдФрд░ рдмрдбрд╝реЗ рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП, рдЕрдкрд╡рд╛рдж рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореИрдиреНрдпреБрдЕрд▓ рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИрдВред </p><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдпрджрд┐ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдЕрддреНрдпрдВрдд рджреБрд░реНрд▓рдн рд╣реИрдВ, рддреЛ рдЕрдкрд╡рд╛рдж рднреА рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рдЧрддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред  рдЕрдЧрд░ рд╣рд░ рдХрд┐рд╕реА рдХреЛ рдкрд╕рдВрдж рд╣реИ, рддреЛ рдпрд╣ рдХреБрдЫ рдРрд╕рд╛ рд╣реЛрдЧрд╛ред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдмрд╣реБрдд рдмрд╛рд░ ... рддреЛ рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдЕрдкрд╡рд╛рдж рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рдорд╕реНрдпрд╛ рд╕реЗ рджреВрд░ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИред </p><br><p>  рдПрдХ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВрдиреЗ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ</a> рд╡рд╛рд╕реНрддрд╡рд┐рдХ gosh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд┐рдпрд╛</a> ред </p><br><div class="spoiler">  <b class="spoiler_title">рдореЗрд░реЗ рдЧрд╣рд░реЗ рдЕрдлрд╝рд╕реЛрд╕ рдХреЗ рд▓рд┐рдП, рдЗрд╕рдиреЗ 1-рдЗрди -1 рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛</b> <div class="spoiler_text"><p>  рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ, рдпрд╣ рдирд┐рдХрд▓рд╛ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдкрд░реЗрд╢рд╛рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href=""><code>rpc2XML</code></a> рдлрд╝рдВрдХреНрд╢рди <code>error</code> рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдЧрддрд╛ рд╣реИ ... рд╣рд╛рдВ, рдпрд╣ рдХрднреА рднреА рдЗрд╕реЗ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдПрдХ рдЕрд╕рдорд░реНрдерд┐рдд рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдХреЛ рдХреНрд░рдордмрджреНрдз рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ - рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ, рдмрд╕ рдЦрд╛рд▓реА рдЖрдЙрдЯрдкреБрдЯред  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣реА рдЗрд░рд╛рджрд╛ рдерд╛? .. рдирд╣реАрдВ, рд╡рд┐рд╡реЗрдХ рдЙрд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЫреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рджреНрд╡рд╛рд░рд╛ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ </p><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: THROW(fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"unsupported type %T"</span></span>, value))</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ рд╡рд┐рд╢реЗрд╖ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rpcParams2XML</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rpc </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{})</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> err error buffer := <span class="hljs-string"><span class="hljs-string">"&lt;params&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; reflect.ValueOf(rpc).Elem().NumField(); i++ { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xml <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> buffer += <span class="hljs-string"><span class="hljs-string">"&lt;param&gt;"</span></span> xml, err = rpc2XML(reflect.ValueOf(rpc).Elem().Field(i).Interface()) buffer += xml buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/param&gt;"</span></span> } buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/params&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buffer, err }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рд╣рдо рдорд╛рдкрджрдВрдбреЛрдВ рдХреА рд╕реВрдЪреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВ, рдЙрди рд╕рднреА рдХреЛ рдХреНрд░рдордмрджреНрдз рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди <em>рдХреЗрд╡рд▓</em> рдмрд╛рдж рдХреЗ рд▓рд┐рдП рдПрдХ рддреНрд░реБрдЯрд┐ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред  рд╢реЗрд╖ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдирдЬрд░рдЕрдВрджрд╛рдЬ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдЬреАрдм рд╡реНрдпрд╡рд╣рд╛рд░ рдЖрд╕рд╛рди рдмрдирд╛ рджрд┐рдпрд╛ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rpcParams2XML_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rpc </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{})</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { buffer := <span class="hljs-string"><span class="hljs-string">"&lt;params&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; reflect.ValueOf(rpc).Elem().NumField(); i++ { buffer += <span class="hljs-string"><span class="hljs-string">"&lt;param&gt;"</span></span> buffer += rpc2XML_(reflect.ValueOf(rpc).Elem().Field(i).Interface()) buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/param&gt;"</span></span> } buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/params&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buffer }</code> </pre> <br><p>  рдпрджрд┐ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдХреНрд░рдордмрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ - рдПрдХ рдЧрд▓рддреАред  рдЦреИрд░, рдпрд╣ рдмреЗрд╣рддрд░ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ <a href="">рд╡рд┐рд╢реЗрд╖</a> рддрд░реАрдХреЗ рд╕реЗ рднреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="go hljs">xmlstr, _ = rpcResponse2XML(response)</code> </pre> <br><p>  рдлрд┐рд░ рд╕реЗ, рд╕реНрд░реЛрдд рдХреЛрдб рдХреЗ рд▓рд┐рдП рдпрд╣ рдЗрддрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдореИрдВ рдпрд╣ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ рдХрд┐ рдХреБрдЫ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╕реНрдкрд╖реНрдЯ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд╢реМрдХреАрди рд╣реЛрддреЗ рд╣реИрдВ <code>if err != nil</code> рдорд╛рдзреНрдпрдо рд╕реЗ <code>if err != nil</code> ... рд▓реЗрдХрд┐рди рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕реЗ рдЕрднреА рднреА рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ рдпрд╛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИред </p><br><pre> <code class="go hljs">xmlstr = rpcResponse2XML_(response)</code> </pre> <br><p>  рдФрд░ рдореИрдВрдиреЗ "рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛" рдХреЛ рджреВрд░ рдХрд░рдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛ред  рдпрд╣рд╛рдБ рдореВрд▓ рдХреЛрдб рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DecodeClientResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r io.Reader, reply </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{})</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { rawxml, err := ioutil.ReadAll(r) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FaultSystemError } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> xml2RPC(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(rawxml), reply) }</code> </pre> <br><p>  рдпрд╣рд╛рдБ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DecodeClientResponse_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r io.Reader, reply </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{})</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rawxml []<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { rawxml, ERR = ioutil.ReadAll(r) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { THROW(FaultSystemError) } xml2RPC_(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(rawxml), reply) }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рдореВрд▓ рддреНрд░реБрдЯрд┐ (рдЬреЛ <code>ioutil.ReadAll</code> рд▓реМрдЯреА рд╣реИ) рдЦреЛ рдирд╣реАрдВ рдЬрд╛рдПрдЧреА, рдЗрд╕реЗ <code>suppress</code> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЕрдкрд╡рд╛рдж рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред  рдлрд┐рд░ рд╕реЗ, рдЗрд╕реЗ рдореВрд▓ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рднреНрд░рдорд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП ... </p><br><p>  рдореИрдВ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрддрд╛ рд╣реВрдВ, <code>if err != nil { log.Error(..) }</code> рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХ рдХреЗ рд╕рд╛рдеред  рдПрдХ рдирдХрд╛рд░рд╛рддреНрдордХ рдмрд┐рдВрджреБ рд╣реИ - рдкрд░реАрдХреНрд╖рдг рдмрд╣реБрдд рдкрд╣рд▓реЗ рддреНрд░реБрдЯрд┐ рдкрд░ рдЖрддреЗ рд╣реИрдВ, рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рдирд╣реАрдВ рд░рдЦрддреЗ рд╣реИрдВ "рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдХрдо рд╕реЗ рдХрдо рдХрд┐рд╕реА рднреА рддрд░рд╣"ред  рдорди рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЙрдиреНрд╣реЗрдВ рдЙрдк-рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ ... рдХреНрдпрд╛, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИред  рд▓реЗрдХрд┐рди рд╕рд╣реА рд╕реНрдЯреИрдХреНрд░реЗрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">errorReporter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t testing.TB)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e error)</span></span></span></span> { t.Log(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(debug.Stack())) t.Fatal(e) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestRPC2XMLConverter_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> ex.Catch(errorReporter(t)) <span class="hljs-comment"><span class="hljs-comment">// ... xml := rpcRequest2XML_("Some.Method", req) }</span></span></code> </pre> <br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИред  рдореВрд▓ рдХреЛрдб рдореЗрдВ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fault2XML</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fault Fault)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { buffer := <span class="hljs-string"><span class="hljs-string">"&lt;methodResponse&gt;&lt;fault&gt;"</span></span> xml, _ := rpc2XML(fault) buffer += xml buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/fault&gt;&lt;/methodResponse&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buffer }</code> </pre> <br><p>  рдпрд╣рд╛рдБ <code>rpc2XML</code> рд╕реЗ рддреНрд░реБрдЯрд┐ <code>rpc2XML</code> рдлрд┐рд░ рд╕реЗ рдЪреБрдкрдЪрд╛рдк рдЕрдирджреЗрдЦрд╛ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдРрд╕рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fault2XML</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fault Fault)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { buffer := <span class="hljs-string"><span class="hljs-string">"&lt;methodResponse&gt;&lt;fault&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRY() { buffer += rpc2XML_(fault) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"ERR: %v"</span></span>, EX()) buffer += <span class="hljs-string"><span class="hljs-string">"&lt;nil/&gt;"</span></span> } buffer += <span class="hljs-string"><span class="hljs-string">"&lt;/fault&gt;&lt;/methodResponse&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buffer }</code> </pre> </div></div><br><p>  рдореЗрд░реА рд╡реНрдпрдХреНрддрд┐рдЧрдд рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде "рдЕрд░реНрдз-рд╕рдорд╛рдкреНрдд" рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрдирд╛ рдЖрд╕рд╛рди рд╣реИред <br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдЖрдзрд╛ рдирд┐рд░реНрдорд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ред  рдЕрдкрд╡рд╛рдж рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдлрд╝рдВрдХреНрд╢рди рдпрд╛ рддреЛ рдПрдХ рд╕рдлрд▓ рдкрд░рд┐рдгрд╛рдо рджреЗрддрд╛ рд╣реИ рдпрд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреА рдкрд░рдорд╛рдгреБред  рджреВрд╕рд░реА рдУрд░, рдЕрдкрд╡рд╛рджреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдореВрд▓ рдХрд╛рд░рдг рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдирд╛ рдпрд╛ рдЦреЛрдирд╛ рдЕрдзрд┐рдХ рдХрдард┐рди рд╣реИред  рдЖрдЦрд┐рд░рдХрд╛рд░, рдЖрдкрдХреЛ рдЕрднреА рднреА рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреА рд╣реЛрдЧреАред  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде, рдпрд╣ рдЖрд╕рд╛рдиреА рд╕реЗ рдФрд░ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╣реЛрддрд╛ рд╣реИред </p><br><h2 id="vmesto-zaklyucheniya">  рдПрдХ рдирд┐рд╖реНрдХрд░реНрд╖ рдХреЗ рдмрдЬрд╛рдп </h2><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХреЛ <em>рд▓рд┐рдЦрддреЗ</em> рд╕рдордп, рдХреЛрдИ рднреА рдЧреЛрдлрд░ рдШрд╛рдпрд▓ рдирд╣реАрдВ рд╣реБрдЖ рдерд╛ред </p><br><p>  рдЧреЛрдлрд╝рд░-рд╢рд░рд╛рдмреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://migranov.ru</a> рдХреА рддрд╕реНрд╡реАрд░ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж </p><br><p>  рдореИрдВ "рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ" рдФрд░ "рдЕрд╕рд╛рдорд╛рдиреНрдп рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ" рд╣рдм рдХреЗ рдмреАрдЪ рдЪрдпрди рдирд╣реАрдВ рдХрд░ рд╕рдХрд╛ред <br>  рдПрдХ рдмрд╣реБрдд рд╣реА рдореБрд╢реНрдХрд┐рд▓ рд╡рд┐рдХрд▓реНрдк, рджреЛрдиреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi425145/">https://habr.com/ru/post/hi425145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi425135/index.html">рдХреНрдпреЛрдВ рд╡реАрдУрдЖрдИрдкреА рдХреЛ рдпреВрдПрд╕рдП рдореЗрдВ рдПрдХ рд╕реВрдЪрдирд╛ рд╕реЗрд╡рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдиреНрдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рд╣реИ, рдФрд░ рджреВрд░рд╕рдВрдЪрд╛рд░ рдЙрджреНрдпреЛрдЧ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ</a></li>
<li><a href="../hi425137/index.html">рд╣рдо рдЬрд▓реНрджреА рдФрд░ рдХреБрд╢рд▓рддрд╛ рд╕реЗ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi425139/index.html">рдЖрд░реНрдЯрд┐рдлрд┐рд╢рд┐рдпрд▓ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕ рдХреЗ рд▓реЗрдВрд╕ рдХреЗ рдиреАрдЪреЗ рдкреЙрдк рд╕реНрдЯрд╛рд░</a></li>
<li><a href="../hi425141/index.html">рдмреЛрдмреБрдХ рдХреЗ рд╕рд╛рде "рдлреЗрд╕рд┐рдВрдЧ рдЧреБрдЗрдбреЛ рдЬреЛ рдЖрдк рдЙрд╕реЗ рдмрддрд╛рддреЗ рд╣реИрдВ" рдпрд╛ рдкрд╛рдпрдерди рд╕рдВрднрд╛рд╖рдг</a></li>
<li><a href="../hi425143/index.html">рд╣рд╛рдпрд░ рд╕реНрдХреВрд▓ рдСрдлрд╝ рдЗрдХреЛрдиреЙрдорд┐рдХреНрд╕ рдСрдирд▓рд╛рдЗрди рдкрд╛рдареНрдпрдХреНрд░рдореЛрдВ рдХреЗ рдкрдХреНрд╖ рдореЗрдВ рд╡реНрдпрд╛рдЦреНрдпрд╛рди рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi425149/index.html">рд╕реНрд╡рд░реНрдЧ рдФрд░ рдкреГрдереНрд╡реА рдХреЗ рдмреАрдЪ</a></li>
<li><a href="../hi425151/index.html">рдЕрдкрдиреЗ рдЧреНрд░рд╛рд╣рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдЪреИрдЯ рдкрд░ рдПрд╡реЗрд░реНрд╕рдбреНрд░реЙрдк рдХрд░реЗрдВ</a></li>
<li><a href="../hi425153/index.html">рдЕрдлреЗрдХреНрдЯрд┐рд╡ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдореЗрдВ рддреАрди рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рднрд╛рд╡рдирд╛ рдЧрд▓рддрдлрд╣рдореА</a></li>
<li><a href="../hi425155/index.html">PHP рдореЗрдВ рдкреНрд░рддрд┐рд╡рд░реНрддреА рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдкрд░ рдЖрдХрд░реНрд╖рдХ рдХреНрд░рд┐рдкреНрдЯреЛрдЧреНрд░рд╛рдлреА рдпрд╛ рд╢реЛрдз</a></li>
<li><a href="../hi425157/index.html">CLRium рдкрд░ рдмреИрдардХ .Net рд╕рдореБрджрд╛рдп # 4 + рдСрдирд▓рд╛рдЗрдиред рдЬрд╣рд╛рдВ CoreCLR рдФрд░ C # рдЪрд▓рддреЗ рд╣реИрдВред рд╕рднреА рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>