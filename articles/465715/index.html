<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßô ü§∂üèø üë©üèΩ‚Äçüé§ Balanceo de carga de OpenStack (Parte 2) ü¶É üßóüèø üë©üèΩ‚Äçü§ù‚Äçüë©üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En un art√≠culo anterior, hablamos sobre tratar de usar Watcher y presentamos un informe de prueba. Peri√≥dicamente realizamos tales pruebas para equili...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Balanceo de carga de OpenStack (Parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/465715/">  En un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior,</a> hablamos sobre tratar de usar Watcher y presentamos un informe de prueba.  Peri√≥dicamente realizamos tales pruebas para equilibrar y otras funciones cr√≠ticas de una gran nube corporativa u operadora. <br><br>  La alta complejidad del problema que se est√° resolviendo puede requerir varios art√≠culos para describir nuestro proyecto.  Hoy publicamos el segundo art√≠culo de la serie sobre el equilibrio de m√°quinas virtuales en la nube. <br><br><h3>  Alguna terminolog√≠a </h3><br>  VmWare ha introducido la utilidad DRS (Distributed Resource Scheduler) para equilibrar la carga de su entorno de virtualizaci√≥n. <br><br>  Como escribe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">searchvmware.techtarget.com/definition/VMware-DRS</a> <br>  <i>‚ÄúVMware DRS (Distributed Resource Scheduler) es una utilidad que equilibra la carga inform√°tica con los recursos disponibles en un entorno virtual.</i>  <i>La utilidad es parte de un paquete de virtualizaci√≥n llamado VMware Infrastructure.</i> <i><br><br></i>  <i>Con VMware DRS, los usuarios definen las reglas para distribuir recursos f√≠sicos entre m√°quinas virtuales (VM).</i>  <i>La utilidad se puede configurar para control manual o autom√°tico.</i>  <i>Los grupos de recursos de VMware se pueden agregar, eliminar o reorganizar f√°cilmente.</i>  <i>Si lo desea, los grupos de recursos pueden aislarse entre diferentes unidades de negocios.</i>  <i>Si la carga de trabajo de una o m√°s m√°quinas virtuales cambia dr√°sticamente, VMware DRS redistribuye las m√°quinas virtuales entre servidores f√≠sicos.</i>  <i>Si se reduce la carga de trabajo general, algunos servidores f√≠sicos pueden estar temporalmente fuera de servicio y la carga de trabajo consolidada ".</i> <br><br><h3>  ¬øPor qu√© necesito equilibrio? </h3><br><a name="habracut"></a><br>  En nuestra opini√≥n, DRS es una caracter√≠stica indispensable de la nube, aunque esto no significa que DRS deba usarse en cualquier momento y en cualquier lugar.  Dependiendo del prop√≥sito y las necesidades de la nube, puede haber diferentes requisitos para DRS y m√©todos de equilibrio.  Quiz√°s hay situaciones en las que no es necesario equilibrar en absoluto.  O incluso da√±ino. <br><br>  Para comprender mejor d√≥nde y para qu√© clientes DRS son necesarios, considere sus metas y objetivos.  Las nubes se pueden dividir en p√∫blicas y privadas.  Estas son las principales diferencias entre estas nubes y los objetivos del cliente. <br><br><div class="scrollable-table"><table><tbody><tr><td></td><td>  Nubes privadas / grandes clientes corporativos </td><td>  Nubes p√∫blicas / Peque√±a y mediana empresa, Gente </td></tr><tr><td>  Los principales criterios y objetivos del operador. </td><td>  Brindar un servicio o producto confiable </td><td>  Reducir el costo de los servicios en la lucha en un mercado competitivo. </td></tr><tr><td>  Requerimientos de servicio </td><td>  Fiabilidad en todos los niveles y en todos los elementos del sistema. <br><br>  Rendimiento garantizado <br><br>  Priorizaci√≥n de m√°quinas virtuales en varias categor√≠as. <br><br>  Informaci√≥n y seguridad de datos f√≠sicos <br><br>  SLA y soporte 24/7 </td><td>  M√°xima facilidad de servicio. <br><br>  Servicios relativamente simples <br><br>  La responsabilidad de los datos recae en el cliente <br><br>  No se requiere priorizaci√≥n de VM <br><br>  Seguridad de la informaci√≥n a nivel de servicios est√°ndar, responsabilidad del cliente. <br><br>  Puede haber fallas <br><br>  Sin SLA, calidad no garantizada <br><br>  Soporte por correo <br><br>  El respaldo es opcional </td></tr><tr><td>  Caracter√≠sticas del cliente </td><td>  Una muy amplia gama de aplicaciones. <br><br>  Aplicaciones heredadas heredadas en la empresa. <br><br>  Sofisticadas arquitecturas personalizadas para cada cliente. <br><br>  Reglas de afinidad. <br><br>  El software funciona sin detenerse en modo 7x24. <br><br>  Herramientas de respaldo sobre la marcha. <br><br>  Carga c√≠clica predecible del cliente. </td><td>  Aplicaciones t√≠picas: equilibrio de red, Apache, WEB, VPN, SQL <br><br>  Es posible detener la aplicaci√≥n por un tiempo <br><br>  Se permite la distribuci√≥n arbitraria de m√°quinas virtuales en la nube <br><br>  Copia de seguridad del cliente <br><br>  Predecible para un gran n√∫mero de clientes, una carga promedio estad√≠sticamente. </td></tr><tr><td>  Implicaciones para la arquitectura </td><td>  Geoclustering <br><br>  Almacenamiento centralizado o distribuido <br><br>  SII reservado </td><td>  Almacenamiento local de datos en nodos inform√°ticos </td></tr><tr><td>  Objetivos de equilibrio </td><td>  Distribuci√≥n de carga uniforme <br><br>  M√°xima capacidad de respuesta de la aplicaci√≥n <br><br>  Tiempo m√≠nimo de retraso de balanceo <br><br>  Equilibrio solo cuando sea claramente necesario <br><br>  Conclusi√≥n de un equipo para mantenimiento preventivo. </td><td>  Reducir el costo de los servicios y los costos del operador. <br><br>  Deshabilitar algunos recursos en caso de baja carga <br><br>  Ahorro de energia <br><br>  Costos de personal reducidos </td></tr></tbody></table></div><br><br><h3>  Sacamos las siguientes conclusiones para nosotros mismos: </h3><br>  <b>Para nubes privadas</b> proporcionadas a grandes clientes corporativos, DRS puede aplicarse sujeto a restricciones: <br><br><ul><li>  seguridad de la informaci√≥n y reglas de afinidad contable para el equilibrio; </li><li>  disponibilidad de una cantidad suficiente de recursos en caso de accidente; </li><li>  los datos de la m√°quina virtual residen en un sistema de almacenamiento centralizado o distribuido; </li><li>  diversidad de tiempo de los procedimientos de administraci√≥n, respaldo y equilibrio; </li><li>  balancear solo dentro del conjunto de hosts del cliente; </li><li>  equilibrar solo con un fuerte desequilibrio, la migraci√≥n m√°s eficiente y segura de m√°quinas virtuales (despu√©s de todo, la migraci√≥n puede fallar); </li><li>  equilibrar m√°quinas virtuales relativamente "silenciosas" (la migraci√≥n de m√°quinas virtuales "ruidosas" puede llevar mucho tiempo); </li><li>  equilibrio teniendo en cuenta el "costo": la carga en el sistema de almacenamiento y la red (con arquitecturas personalizadas para grandes clientes); </li><li>  equilibrio teniendo en cuenta el comportamiento individual de cada VM; </li><li>  El equilibrio es deseable despu√©s de las horas (noche, fines de semana, d√≠as festivos). </li></ul><br>  <b>Para las nubes p√∫blicas</b> que brindan servicios a peque√±os clientes, DRS se puede usar con mucha m√°s frecuencia, con caracter√≠sticas avanzadas: <br><br><ul><li>  falta de restricciones de seguridad de la informaci√≥n y reglas de afinidad; </li><li>  equilibrio dentro de la nube; </li><li>  balanceo en cualquier momento razonable; </li><li>  equilibrar cualquier VM; </li><li>  equilibrar m√°quinas virtuales "ruidosas" (para no interferir con el resto); </li><li>  los datos de la m√°quina virtual a menudo se encuentran en unidades locales; </li><li>  que representa el almacenamiento promedio y el rendimiento de la red (la arquitectura de la nube est√° unificada); </li><li>  equilibrio de acuerdo con reglas generalizadas y estad√≠sticas disponibles del comportamiento del centro de datos. </li></ul><br><h2>  Complejidad del problema </h2><br>  La dificultad del equilibrio es que DRS debe trabajar con muchos factores inciertos: <br><br><ul><li>  comportamiento del usuario de cada uno de los sistemas de informaci√≥n del cliente; </li><li>  algoritmos para la operaci√≥n de servidores de sistemas de informaci√≥n; </li><li>  Comportamiento del servidor DBMS </li><li>  carga en recursos inform√°ticos, almacenamiento, red; </li><li>  interacci√≥n del servidor entre ellos en la lucha por los recursos en la nube. </li></ul><br>  La carga de una gran cantidad de servidores de aplicaciones virtuales y bases de datos en los recursos de la nube ocurre con el tiempo, las consecuencias pueden ocurrir y superponerse con efectos impredecibles despu√©s de tiempos impredecibles.  Incluso para controlar procesos relativamente simples (por ejemplo, para controlar un motor, un sistema de calentamiento de agua en el hogar), los sistemas de control autom√°tico necesitan usar complejos algoritmos de retroalimentaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">diferenciales proporcionales integrales</a> . <br><br><img src="https://habrastorage.org/webt/82/5j/7x/825j7x1s3unwoacrnswrm4j9r_m.png"><br><br>  Nuestra tarea es mucho m√°s complicada en muchos √≥rdenes de magnitud, y existe el riesgo de que el sistema no pueda equilibrar la carga a los valores establecidos en un tiempo razonable, incluso si no ocurren influencias externas de los usuarios. <br><br><img src="https://habrastorage.org/webt/4c/b9/a7/4cb9a70sso1h2dz_tlb4gzzuegg.gif"><br><br><h2>  Historia de nuestros desarrollos. </h2><br>  Para resolver este problema, decidimos no comenzar desde cero, sino basarnos en la experiencia existente, y comenzamos a interactuar con especialistas que tienen experiencia en este campo.  Afortunadamente, nuestra comprensi√≥n de los problemas coincidi√≥ por completo. <br><br><h3>  Etapa 1 </h3><br>  Utilizamos un sistema basado en tecnolog√≠a de redes neuronales e intentamos optimizar nuestros recursos sobre la base. <br><br>  El inter√©s de esta etapa era probar la nueva tecnolog√≠a, y su importancia era aplicar un enfoque no est√°ndar para resolver el problema, donde, en igualdad de condiciones, los enfoques est√°ndar pr√°cticamente se han agotado. <br><br>  Comenzamos el sistema, y ‚Äã‚Äãrealmente fuimos balanceando.  La escala de nuestra nube no nos permiti√≥ obtener resultados optimistas anunciados por los desarrolladores, pero estaba claro que el equilibrio estaba funcionando. <br><br>  Adem√°s, ten√≠amos limitaciones bastante serias: <br><br><ul><li>  Para entrenar una red neuronal, las m√°quinas virtuales deben ejecutarse sin cambios significativos durante semanas o meses. </li><li>  El algoritmo est√° dise√±ado para la optimizaci√≥n basada en el an√°lisis de datos "hist√≥ricos" anteriores. </li><li>  Para entrenar una red neuronal, se requiere una cantidad suficientemente grande de datos y recursos inform√°ticos. </li><li>  La optimizaci√≥n y el equilibrio se pueden hacer relativamente raramente, una vez cada pocas horas, lo que claramente no es suficiente. </li></ul><br><h3>  Etapa 2 </h3><br>  Como no est√°bamos contentos con el estado de cosas, decidimos modificar el sistema, y ‚Äã‚Äãpara que esto respondiera la <b>pregunta principal</b> : ¬øpara qui√©n lo estamos haciendo? <br><br>  Primero para clientes corporativos.  Por lo tanto, necesitamos un sistema que funcione de manera eficiente, con esas restricciones corporativas que solo simplifican la implementaci√≥n. <br><br>  <b>La segunda pregunta</b> es ¬øqu√© significa la palabra "operacional"?  Como resultado de un breve debate, decidimos que era posible aprovechar el tiempo de respuesta de 5-10 minutos para que los saltos a corto plazo no introdujeran el sistema en la resonancia. <br><br>  <b>La tercera pregunta</b> es ¬øqu√© tama√±o del n√∫mero equilibrado de servidores elegir? <br>  Este problema se decidi√≥ por s√≠ mismo.  Por lo general, los clientes no hacen que los agregados de servidores sean muy grandes, y esto es consistente con las recomendaciones del art√≠culo para limitar los agregados a 30-40 servidores. <br><br>  Adem√°s, al segmentar el grupo de servidores, simplificamos la tarea del algoritmo de equilibrio. <br><br>  <b>La cuarta pregunta</b> es ¬øcu√°nto nos conviene una red neuronal con su largo proceso de aprendizaje y su raro equilibrio?  Decidimos abandonarlo en favor de algoritmos operativos m√°s simples para obtener el resultado en segundos. <br><br><img src="https://habrastorage.org/webt/-9/vj/wy/-9vjwyj2x4a__iiszz7l9clhopq.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠</a> puede encontrar una descripci√≥n del sistema que utiliza dichos algoritmos y sus deficiencias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">.</a> <br><br>  Implementamos y lanzamos este sistema y recibimos resultados alentadores: ahora analiza regularmente la carga en la nube y ofrece recomendaciones sobre el movimiento de m√°quinas virtuales, que en gran medida son correctas.  Incluso ahora est√° claro que podemos lograr una liberaci√≥n del 10-15% de recursos para nuevas m√°quinas virtuales con una mejora en la calidad de las existentes. <br><br> <a href=""><img src="https://habrastorage.org/webt/ie/ky/wa/iekywainupnidp_73j55hc1dbnw.png"></a> <br><br>  Cuando la RAM o la CPU detectan un desequilibrio, el sistema le da comandos al programador de Tionics para realizar la migraci√≥n en vivo de las m√°quinas virtuales requeridas.  Como se puede ver en el sistema de monitoreo, la m√°quina virtual se movi√≥ de un host (superior) a otro (inferior) y liber√≥ memoria en el host superior (resaltado en c√≠rculos amarillos), ocup√°ndolo, respectivamente, en el host inferior (resaltado en c√≠rculos blancos). <br><br>  Ahora estamos tratando de evaluar con mayor precisi√≥n la efectividad del algoritmo actual y estamos tratando de encontrar posibles errores en √©l. <br><br><h3>  Etapa 3 </h3><br>  Parece que puede calmarse con esto, esperar una efectividad comprobada y cerrar el tema. <br>  Pero las siguientes oportunidades de optimizaci√≥n obvias nos empujan a llevar a cabo una nueva fase. <br><br><ol><li>  Las estad√≠sticas, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> muestran que los sistemas de dos y cuatro procesadores en su rendimiento son significativamente m√°s bajos que los de un solo procesador.  Esto significa que todos los usuarios reciben retornos significativamente m√°s bajos de CPU, RAM, SSD, LAN, FC comprados en sistemas multiprocesador en comparaci√≥n con los de un solo procesador. </li><li>  Los propios planificadores de recursos pueden trabajar con errores graves, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este es uno de los art√≠culos</a> sobre este tema. </li><li>  Las tecnolog√≠as ofrecidas por Intel y AMD para monitorear RAM y cach√© le permiten estudiar el comportamiento de las m√°quinas virtuales y ubicarlas de tal manera que los vecinos ruidosos no interfieran con las m√°quinas virtuales silenciosas. </li><li>  Expandir el conjunto de par√°metros (red, almacenamiento, prioridad de m√°quina virtual, costo de migraci√≥n, su disponibilidad para la migraci√≥n). </li></ol><br><h2>  Total </h2><br>  El resultado de nuestro trabajo para mejorar los algoritmos de equilibrio fue una conclusi√≥n inequ√≠voca de que, debido a los algoritmos modernos, es posible lograr una optimizaci√≥n significativa de los recursos (25-30%) de los centros de datos y mejorar la calidad del servicio al cliente. <br><br>  El algoritmo basado en redes neuronales es, por supuesto, una soluci√≥n interesante que necesita un mayor desarrollo, y debido a las restricciones existentes, no es adecuado para resolver tales problemas en vol√∫menes caracter√≠sticos de nubes privadas.  Al mismo tiempo, en nubes p√∫blicas de tama√±o significativo, el algoritmo mostr√≥ buenos resultados. <br><br>  En los siguientes art√≠culos le informaremos m√°s sobre las capacidades de los procesadores, programadores y el equilibrio de alto nivel. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465715/">https://habr.com/ru/post/465715/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465691/index.html">Usando REST en ENM Ericsson en Python</a></li>
<li><a href="../465703/index.html">C√≥mo obtener ingresos adicionales para la empresa utilizando el intercambio: inversi√≥n en productos estructurales</a></li>
<li><a href="../465709/index.html">JustCode: un navegador de alta velocidad para computadoras y tabletas econ√≥micas en Windows</a></li>
<li><a href="../465711/index.html">C√≥mo GDPR caus√≥ fugas de datos personales</a></li>
<li><a href="../465713/index.html">Qu√© leer al gerente del proyecto: libros sobre gesti√≥n de personal, habilidades sociales y DevOps</a></li>
<li><a href="../465719/index.html">Por qu√© las notificaciones PUSH no se reciben en 3CX VoIP Client para Android</a></li>
<li><a href="../465721/index.html">Sistema aeroespacial totalmente reutilizable a partir de tecnolog√≠as existentes.</a></li>
<li><a href="../465723/index.html">Posit-aritm√©tica: derrotando un punto flotante en su propio campo. Parte 1</a></li>
<li><a href="../465725/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 28. Estudio en profundidad de ACL</a></li>
<li><a href="../465727/index.html">Convi√©rtete en Zuckerberg o programador de infancia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>