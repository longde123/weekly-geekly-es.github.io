<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëâüèø üë®üèø‚Äçüîß üë©‚Äç‚öñÔ∏è Vis√£o computacional como alternativa aos passes de escrit√≥rio üî∑ üë©‚Äçüíº üê¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje vou lhe contar como fizemos um sistema de controle de acesso no escrit√≥rio com base no servi√ßo de reconhecimento facial Vision . Primeiro, um pou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vis√£o computacional como alternativa aos passes de escrit√≥rio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br><br>  Hoje vou lhe contar como fizemos um sistema de controle de acesso no escrit√≥rio com base no servi√ßo de reconhecimento facial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vision</a> .  Primeiro, um pouco de fundo.  Como em qualquer servi√ßo de email, criamos um sistema anti-spam.  Agora, esses sistemas est√£o sendo criados com base no aprendizado de m√°quina. Temos uma equipe poderosa encarregada disso.  E onde h√° aprendizado de m√°quina, h√° vis√£o por computador.  Portanto, o servi√ßo Vision surgiu de maneira bastante natural e natural. <br><br>  Paralelamente, lan√ßamos, h√° alguns anos, o Cloud, um armazenamento confi√°vel de arquivos com distribui√ß√£o geogr√°fica para data centers, que pode ser usado tanto por indiv√≠duos quanto por empresas.  Com o tempo, obtivemos um "Cloud for Business", que n√£o apenas armazena arquivos, mas tamb√©m permite que voc√™ encomende m√°quinas virtuais.  Gradualmente, isso se transformou no MCS - Mail.ru Cloud Solutions, onde o Vision se encaixava organicamente em um dos servi√ßos. <br><a name="habracut"></a><br><h1>  Cloud </h1><br>  Nossas redes neurais s√£o capazes de reconhecer n√£o apenas rostos, mas tamb√©m v√°rios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">objetos, objetos e cenas</a> , incluindo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vistas</a> .  Agora eles podem reconhecer cerca de 10 mil categorias, e a vis√£o de m√°quina √†s vezes funciona melhor que a humana. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br><br>  Esta √© minha filha em 2012, em 2015 e 2018.  Se eu n√£o a conhecia pessoalmente, provavelmente n√£o entendi imediatamente que essa √© a mesma pessoa.  E a rede neural foi capaz de combinar e entender. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br><br>  Aqui a garota se virou e apertou os olhos, e o garoto em geral de bon√© com uma sombra na metade do rosto.  Mas, ao mesmo tempo, a rede neural os reconheceu com precis√£o, apesar das condi√ß√µes t√£o dif√≠ceis.  Naturalmente, a tecnologia que est√° sendo desenvolvida dentro da empresa n√£o p√¥de deixar de encontrar suporte em servi√ßos internos. <br><br><h1>  Nossa intranet </h1><br>  Nossa intranet √© chamada sys.  Este √© um tipo de rede social (temos alguns deles).  Nele, os funcion√°rios enviam fotos de v√°rios eventos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br><br>  Quando v√°rias centenas de fotos s√£o tiradas do evento, √© bastante dif√≠cil encontrar-se l√°.  Portanto, temos vis√£o de m√°quina conectada a esses √°lbuns, que na intranet, em um √∫nico local, mostram as fotografias nas quais eu estou representado.  Aqui o sistema me viu em uma das festas corporativas de ver√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br><br>  A rede neural me reconheceu mesmo no crep√∫sculo de perfil, e h√° muito mais pessoas na foto. <br><br><h1>  Rack de confer√™ncia </h1><br>  Mais tarde, fizemos prateleiras para confer√™ncias.  Escrevi software para o iPad, instalado dentro do rack, mas em geral sou desenvolvedor iOS e n√£o tenho nada a ver com vis√£o computacional, apenas ajudo de maneira amig√°vel. <br><br><img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br><br>  Qual √© a ess√™ncia desse rack?  Durante o evento - uma reuni√£o, confer√™ncia, festa corporativa ou pelo menos um anivers√°rio - voc√™ √© fotografado por um fot√≥grafo.  De tempos em tempos, lan√ßa imagens acumuladas na nuvem.  Voc√™ pode ir ao balc√£o a qualquer momento, tirar uma foto e clicar no bot√£o "Find Me".  E o rack exibir√° imediatamente todas as fotografias nas quais voc√™ foi capturado ou dir√° que nada foi encontrado at√© o momento, se o sistema ainda n√£o conseguiu indexar as fotos, e solicitar√° que voc√™ digite um e-mail.  E ap√≥s o evento, voc√™ receber√° um link no e-mail da pasta na nuvem com todas as fotos em que est√°.  Esse √© um dos aplicativos do servi√ßo Vision. <br><br><h1>  Sistema de acesso </h1><br>  Naturalmente, eu queria usar esses recursos de reconhecimento facial n√£o apenas para procurar minha fisionomia em imagens corporativas, mas tamb√©m para algo mais pr√°tico.  Por exemplo, para um sistema de taxa de transfer√™ncia autom√°tica.  A aplica√ß√£o de um passe em cada entrada do seu andar n√£o √© muito conveniente: muitas vezes voc√™ esquece o passe e, para as meninas com roupas leves no ver√£o, n√£o h√° lugar para consert√°-lo. <br><br>  Portanto, decidimos experimentar.  Temos todas as condi√ß√µes para isso: n√£o precisamos pedir permiss√£o a ningu√©m, um departamento administrativo muito responsivo, que diz com um suspiro: ‚ÄúTudo bem.  Anexe suas c√¢meras.  S√≥ n√£o na porta.  As portas est√£o relacionadas √† seguran√ßa contra inc√™ndio.  N√≥s somos: ‚ÄúBem, ent√£o.  Vamos nos apegar ao lado. "  Tamb√©m temos colegas pacientes, eles sofreram conosco. <br><br><h1>  Arquitetura </h1><br>  √Ä primeira vista, a arquitetura do sistema de acesso parece muito simples: a c√¢mera tira fotos, envia para a Vision e a Vision abre a porta.  Mas quando come√ßamos a pintar com os colegas como realmente fazer isso, obtivemos esse esquema: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br><br>  O bloco √† direita chamamos de ‚Äúc√¢mera‚Äù - este √© o m√≥dulo que fica pendurado na porta.  Consiste em tr√™s partes.  O Raspberry Pi recebe v√≠deo de uma c√¢mera USB, codifica com FFmpeg e envia.  Testamos v√°rias c√¢meras IP com uma faixa de pre√ßo razo√°vel e todos tiveram um atraso not√°vel de cerca de 0,5 s.  E como temos atrasos em outros est√°gios, quando uma pessoa aparece, olha para a c√¢mera e, por alguns segundos, nada acontece, ele j√° quer passar.  Portanto, reduzimos os atrasos sempre que poss√≠vel, e o Raspberry Pi com uma c√¢mera USB acabou sendo mais r√°pido do que muitas c√¢meras IP comerciais.  Tamb√©m conectado ao Raspberry est√° um pequeno Arduino com um LED multicolorido e um squeaker.  O LED padr√£o √© vermelho.  Quando uma pessoa aparece e √© reconhecida, o verde acende. <br><br>  Portanto, o Raspberry Pi transmite o fluxo de v√≠deo, que via Ethernet com fio entra no servidor.  Temos uma sala de servidores em cada andar, na qual existem comutadores, conectando cabos √†s mesas dos funcion√°rios e um sistema de controle de acesso em tempo integral - um sistema de controle e gerenciamento de acesso. <br><br>  Colocamos outro Raspberry Pi na sala do servidor, que recebe o fluxo de v√≠deo em tempo real e o executa no OpenCV.  Por que precisamos do OpenCV?  Precisamos determinar se h√° um rosto na imagem.  Uma rede neural que define uma pessoa em uma fotografia trabalha um pouco mais e √© muito caro alimentar um fluxo de v√≠deo constantemente.  Portanto, atrav√©s do OpenCV, determinamos a presen√ßa de um rosto e, se ele aparecer, enviamos para o Vision.  O servi√ßo responde que n√£o encontrou esse funcion√°rio ou envia o identificador do funcion√°rio no banco de dados de RH.  Com esse identificador de funcion√°rio, vamos para a intranet associada ao ACS e ela nos retorna o identificador de senha.  Al√©m disso, lan√ßamos esse identificador de passagem no Arduino, que o passa para o ACS.  Para um sistema de controle de acesso, isso √© equivalente a uma pessoa que aplica um passe.  Ou seja, n√£o alteramos o ACS de forma alguma, ele ainda registra a entrada e sa√≠da dos funcion√°rios. <br><br>  Como integramos nosso sistema ao ACS?  Em nosso escrit√≥rio, s√£o utilizados dispositivos Bolid C2000-2. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br><br>  Este √© um sistema de controle de acesso dom√©stico.  Provavelmente, voc√™ pode conectar-se a esses dispositivos atrav√©s da 485¬™ interface, mas n√≥s nos conectamos atrav√©s do protocolo Wiegand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br><br>  Conectamos o Arduino, que funciona como um proxy, ao leitor de senha instalado perto da porta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br><br>  A foto mostra a conex√£o de energia e duas linhas de dados do leitor de passagem.  A almofada √© usada para uma conex√£o mais conveniente. <br><br>  O Arduino recebe o n√∫mero do passe do leitor ou do Raspberry Pi via USB e o entrega ao ACS.  O ACS nem sabe de onde √© o n√∫mero do passe. <br><br><h1>  Wiegand </h1><br>  Este √© um protocolo padr√£o para sistemas de controle de acesso, √© suportado pela maioria dos leitores.  O protocolo √© muito simples: duas linhas de dados, uma linha de zeros e uma linha de unidades.  Assim que voc√™ conecta a linha zero ao terra, o leitor entende que o zero √© transmitido, o mesmo com as unidades.  Ou seja, o protocolo n√£o possui hor√°rios padronizados e o n√∫mero de pulos √© f√°cil de ler atrav√©s de uma interrup√ß√£o no Arduino; √© f√°cil represent√°-lo como uma sequ√™ncia de dados.  E como a grava√ß√£o requer algum tipo de tempo, eu me concentrei nesses valores: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br><br>  J√° existe uma biblioteca pronta para o Arduino.  Ela pode ler diferentes formatos Wiegand, mas seus recursos s√£o limitados a isso.  E eu ainda tinha que transmitir.  Portanto, escrevi minha biblioteca, que funciona apenas com o formato Wiegand-26.  26 √© o n√∫mero de bits: 3 bytes do n√∫mero de salto e 2 bits de paridade.  Al√©m disso, em toda a documenta√ß√£o e artigos, est√° escrito que, provavelmente, seu controlador moderno ignorar√° os bits de paridade, por isso sou pregui√ßoso e n√£o os conto, mas sempre envio zero.  O ACS percebe isso normalmente. <br><br>  Tivemos outro problema: se algu√©m apareceu pela primeira vez na frente da c√¢mera e, sem aguardar a opera√ß√£o, aplicou um passe, ocorreu uma situa√ß√£o de corrida: ao mesmo tempo, o n√∫mero do passe veio do leitor e do reconhecimento.  A ACS n√£o conseguiu lidar com isso e n√£o deixou as pessoas entrarem.  Portanto, tive que adicionar um buffer de anel com 4 c√≥digos √† biblioteca.  Independentemente da origem dos c√≥digos, eles s√£o colocados no buffer e, em seguida, com um tempo limite de 0,5 s s√£o transmitidos ao ACS.  Desde ent√£o, os colegas deixaram de reclamar que n√£o s√£o permitidos. <br><br><h1>  Suporte de teste </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br><br>  O primeiro prot√≥tipo foi montado a partir de qualquer coisa horr√≠vel.  Raspberry Pi pendurado em uma caixa em algum rack rid√≠culo, e uma c√¢mera foi colada em cima de uma fita dupla face.  O Arduino est√° pendurado nas mesas laterais.  Em geral, tudo o que amamos √© muito DIY. <br><br>  Certamente, desta forma era imposs√≠vel partir, era necess√°rio organizar lindamente.  Conversamos com v√°rios empreiteiros, eles prometeram pedir amostras na China, mas todos os prazos acordados passaram e ningu√©m nos ofereceu nada. <br><br>  Os produtos personalizados t√™m um problema - todas as solu√ß√µes s√£o altamente especializadas, elas seriam feitas especificamente para n√≥s.  Primeiro, nos tornamos dependentes do fornecedor.  Em segundo lugar, resulta um projeto de circuito exclusivo com uma pequena circula√ß√£o, o que significa que o custo de uma pe√ßa ser√° alto.  Em terceiro lugar, o tempo de produ√ß√£o √© longo o suficiente e, se uma c√≥pia falhar, n√£o poderemos comprar rapidamente uma substitui√ß√£o na loja, teremos que aguardar a pr√≥xima impress√£o e, se fizermos isso imediatamente, as c√≥pias restantes ser√£o espanadas no armaz√©m. <br><br>  Depois que todos os poss√≠veis parceiros nos decepcionaram, fui a um colega da Vision e disse: "Volodya, deixe-me imprimir um estojo na sua impressora 3D para torn√°-la bonita".  Ele suspirou e disse: ‚ÄúVamos l√°.  O que fazer? " <br><br><h1>  Camera V 1 </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br><br>  No Fusion, desenhei um monstro t√£o Frankenstein.  No canto deveria ser um Raspberry Pi com uma entrada para um cabo Ethernet.  Entrada lateral para poder.  O "segundo andar" era uma c√¢mera.  O resultado foi uma estrutura grande, e eu at√© a imprimi com uma camada fina para n√£o gastar muito pl√°stico.  Parecia terr√≠vel, e pendurar era ainda mais embara√ßoso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br><br>  Al√©m disso, um colega me enviou essa refer√™ncia, dizem eles, gostar√≠amos disso.  Respondi que n√£o podia fazer isso, mas decidi projetar outro pr√©dio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br><br>  O novo estojo tinha 11 cm de di√¢metro, menor que o CD.  A coloca√ß√£o do preenchimento tamb√©m √© de duas camadas.  Depois de imprimir a primeira vers√£o, percebi que n√£o faz sentido colocar a c√¢mera USB inteiramente em seu estojo nativo.  Desmontei-o com cuidado e constatou-se que ele possui 4 orif√≠cios de aterrissagem no painel frontal.  Combinei este painel com uma c√¢mera em uma montagem comum com um tweeter e um LED. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br><br>  Primeiro, tentamos gerar um chiado no Raspberry Pi via gpio.  Acabou extremamente mal.  Portanto, decidimos usar essa fun√ß√£o separadamente do Raspberry Pi, conectando um pequeno arduino (na verdade, o Iskra mini), ao qual o squeaker e o LED foram soldados, atrav√©s do TTL diretamente no bloco. <br><br>  Era assim que parecia em batalha: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br>  Penduramos o dispositivo no ch√£o.  Nesta forma, ele viveu o suficiente.  Gritando, lindamente brilhante, abrindo a porta, no entanto, nem sempre.  Os colegas, no entanto, reclamaram que o LED est√° muito brilhante.  Eu tive que enfraquecer 4 vezes. <br><br><h1>  Camera V 2 </h1><br>  Ent√£o eles fizeram esta op√ß√£o: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br><br>  Foi inspirado no design do hub Xiaomi, com um anel luminoso ao redor do per√≠metro.  Parece muito bonito.  O logotipo Vision √© fabricado por pe√ßas individuais impressas em pl√°sticos de cores diferentes.  Aqui est√° o modelo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br><br>  Dessa vez, coloquei o squeaker na parede traseira, montei o LED em um anel transparente ao redor do per√≠metro, impresso a partir de um PLA transparente.  A decora√ß√£o quase imediatamente desmoronou por dentro, porque era originalmente simplesmente inserida no atrito, e eu tive que coloc√°-la na cola. <br><br><h1>  Problemas com a c√¢mera </h1><br>  Tivemos a ideia de replicar essa decis√£o em todo o edif√≠cio.  Mas h√° um problema: quase todos os andares t√™m duas portas e cada um deve ter duas c√¢meras, apenas 96 c√¢meras para apenas uma de nossas torres, e agora a segunda est√° sendo desenvolvida ativamente.  Imprimir tantos casos √© poss√≠vel, mas j√° parece complicado.  Al√©m disso, temos alguns componentes no dispositivo, o que significa muitos pontos de falha.  Se escalarmos a solu√ß√£o para todo o edif√≠cio, manteremos constantemente essas c√¢meras.  Mais uma vez, a complexidade da substitui√ß√£o r√°pida, porque cada c√¢mera √© um dispositivo m√≥vel.  E voc√™ precisa imprimir muitos deles, com uma margem, ou, se algo aconteceu, imediatamente executar, imprimir e coletar um novo.  Percebemos que as solu√ß√µes de bricolage s√£o legais, mas voc√™ precisa de algo mais conveniente na replica√ß√£o.  E surgiu a ideia de transferir tudo para o iPad. <br><br><h3>  IPad </h3><br>  IPad tem v√°rias vantagens.  O primeiro √© a tela.  Os colegas queixaram-se da falta de feedback, s√£o adequados e n√£o entendem se o reconhecimento come√ßou ou n√£o, para esperar ou n√£o. <br><br>  Em segundo lugar, o iOS possui um recurso interno de reconhecimento de rosto.  A fun√ß√£o que o OpenCV executou foi passada para o iPad.  Um quadro √© exibido na tela e a pessoa deve chegar t√£o longe que o rosto se encaixe nesse quadro.  Depois disso, o sistema come√ßa a reconhec√™-lo automaticamente, voc√™ n√£o precisa pressionar nada. <br><br>  Em terceiro lugar, o iPad √© um produto de massa.  Se falhar, definimos outro.  Embora o tablet em si custe cerca de 20 mil rublos, ainda √© mais barato que as c√¢meras personalizadas que os parceiros nos ofereceram.  Al√©m disso, mais r√°pido e mais confi√°vel. <br><br><h1>  Nova arquitetura </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br><br>  O iPad assumiu a maioria dos recursos.  No Raspberry Pi, que fica na sala do servidor, na verdade, existe apenas um host HTTP que aceita uma solicita√ß√£o GET com um ID de passe.  Ele imediatamente procura o c√≥digo no Arduino e ela procura no ACS. <br><br>  Na primeira vers√£o, o Raspberry Pi estava muito carregado, porque o OpenCV estava constantemente trabalhando nele.  N√£o era mais poss√≠vel conectar uma segunda c√¢mera a ela; n√£o haveria poder computacional suficiente.  N√≥s j√° pensamos em colocar um computador honesto l√°, que analisaria 4 threads de duas portas.  Mas n√£o chegou a isso.  Agora, a pesquisa de rostos na imagem √© realizada independentemente em cada iPad.  Na cruz, existem dois Arduino, um para cada porta.  Ambas as placas trabalham com passes de entrada e sa√≠da.  Por que √© importante trabalhar com passes de entrada e sa√≠da?  Primeiro, quando o rosto √© reconhecido e a porta se abre, a luz verde no leitor de cart√µes acende e os colegas entendem que voc√™ pode sair.  Em segundo lugar, o ACS registra entradas e sa√≠das.  Emulando a entrada e a sa√≠da separadamente, n√£o interrompemos o esquema de opera√ß√£o do ACS. <br><br>  Naturalmente, os designers se uniram e criaram uma interface bonita.  √â assim que fica agora em um dos andares do nosso escrit√≥rio: <br><br><img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br><br><h1>  Trabalhe com vis√£o </h1><br>  Apesar do MCS ser um produto comercial, os amadores tamb√©m podem us√°-lo.  O servi√ßo oferece a todos 5 mil transa√ß√µes gratuitas por m√™s, ou seja, 166 por dia.  Portanto, voc√™ pode solicitar suas necessidades dom√©sticas, se voc√™ se encaixar no limite, √© claro.  Como isso pode ser feito? <br><br><pre><code class="python hljs">python examples/python/smarty.py \ -u <span class="hljs-string"><span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize ?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce 99c01a80a4558d8ed93b313737363830"</span></span> \ -p friends1.jpg \ --meta <span class="hljs-string"><span class="hljs-string">'{"space":"1", "create_new":true}'</span></span> \ -v</code> </pre> <br>  Tire uma foto e envie-a para a Vision junto com nosso token de acesso.  Indicamos que estamos trabalhando com o primeiro espa√ßo e configuramos <code>create_new</code> - ent√£o o sistema criar√° um novo identificador para cada pessoa desconhecida.  Aqui est√° o que obtemos em resposta: <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"objects"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"file_0"</span></span>, <span class="hljs-string"><span class="hljs-string">"persons"</span></span>:[ {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person1"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">102</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>,<span class="hljs-number"><span class="hljs-number">134</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99999</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5025</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person2"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">393</span></span>,<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">461</span></span>,<span class="hljs-number"><span class="hljs-number">166</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99987</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.548</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person3"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">458</span></span>,<span class="hljs-number"><span class="hljs-number">48</span></span>,<span class="hljs-number"><span class="hljs-number">535</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99976</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4766</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person4"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">273</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span>,<span class="hljs-number"><span class="hljs-number">352</span></span>,<span class="hljs-number"><span class="hljs-number">147</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99963</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.504</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person5"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">525</span></span>,<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99954</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4849</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person6"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">194</span></span>,<span class="hljs-number"><span class="hljs-number">76</span></span>,<span class="hljs-number"><span class="hljs-number">258</span></span>,<span class="hljs-number"><span class="hljs-number">167</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.9984</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5725</span></span>} ] } ], <span class="hljs-string"><span class="hljs-string">"aliases_changed"</span></span>:false }, <span class="hljs-string"><span class="hljs-string">"htmlencoded"</span></span>:false, <span class="hljs-string"><span class="hljs-string">"last_modified"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Formatei um pouco o JSON.  A resposta cont√©m o identificador da pessoa, as coordenadas do rosto na foto e dois par√¢metros: qu√£o bem o rosto √© reconhecido e quanto essa pessoa corresponde ao padr√£o.  Voc√™ pode enviar uma solicita√ß√£o POST com uma imagem em sua linguagem de programa√ß√£o, obter JSON e analisar a resposta. <br><br>  Se voc√™ tiver uma cruz grande e precisar determinar apenas uma d√∫zia de pessoas, poder√° configur√°-las manualmente.  Em seguida, o sistema fornecer√° identificadores para pessoas familiares e indefinidos para pessoas desconhecidas.  As pessoas tamb√©m podem ser removidas seletivamente, por exemplo, se um funcion√°rio sair. <br><br><h1>  Id√©ias </h1><br>  Em quais projetos voc√™ pode usar o reconhecimento facial?  Se voc√™ deseja implementar um sistema de largura de banda, precisa se preocupar com anti-spoofing.  Por exemplo, adicionando uma c√¢mera infravermelha para determinar se √© uma fotografia ou uma pessoa viva.  Ou colocando duas c√¢meras para determinar a profundidade do objeto, isso pode ser feito usando o OpenCV. <br><br>  Voc√™ pode organizar o reconhecimento de pessoas na entrada.  Se esses s√£o seus vizinhos, tudo est√° em ordem e, se algu√©m for de fora, voc√™ pode enviar um alerta.  Temos um problema em nossa casa, os estrangeiros periodicamente v√™m e deixam muito lixo depois de pousarem no patamar. <br><br>  Se voc√™ criar um ‚Äúespelho inteligente‚Äù, poder√° equip√°-lo com o reconhecimento dos membros da fam√≠lia, para que todos possam mostrar o que √© interessante para ele.  Digamos que o espelho me mostre o hor√°rio das reuni√µes de hoje e, com minha filha, ela me cumprimentar√° alegremente e oferecer√° escovar os dentes, e n√£o rapidamente, como sempre, por dois minutos. <br><br>  Outra id√©ia √© o reconhecimento de uma placa por um port√£o autom√°tico no pa√≠s.  Para n√£o sair ou pressionar o comando, voc√™ pode colocar uma c√¢mera que remover√° seu n√∫mero e o port√£o abrir√° automaticamente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473828/">https://habr.com/ru/post/pt473828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473816/index.html">Recursos do JavaScript moderno dos quais voc√™ talvez n√£o conhe√ßa</a></li>
<li><a href="../pt473818/index.html">Aplicativo no TSD e comunica√ß√£o com 1C: Enterprise 8.3 atrav√©s do servi√ßo HTTP. Parte 4 (scanner OnKeyUp. SC com emula√ß√£o de teclado)</a></li>
<li><a href="../pt473822/index.html">Oferta de emprego em 1 dia: como entrevistamos e demos feedback no mesmo dia</a></li>
<li><a href="../pt473824/index.html">Como construir uma tecnologia comercial para o planejamento de vendas em um √∫nico sistema</a></li>
<li><a href="../pt473826/index.html">Autentica√ß√£o OTP no Apache Web Server</a></li>
<li><a href="../pt473832/index.html">ShIoTiny: Atualiza√ß√µes e notifica√ß√µes</a></li>
<li><a href="../pt473834/index.html">Monitoramento de caixa preta em redes Clos. Relat√≥rio Yandex</a></li>
<li><a href="../pt473838/index.html">DJI Mavic Mini: o quadrocopter dobr√°vel mais leve</a></li>
<li><a href="../pt473840/index.html">Transmitir v√≠deo do dispositivo Android pelo aplicativo UDP para JAVA</a></li>
<li><a href="../pt473842/index.html">Not√≠cias de Aprendizado de m√°quina e intelig√™ncia artificial de outubro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>