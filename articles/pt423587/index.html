<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏾 🏴󠁧󠁢󠁳󠁣󠁴󠁿 ⛹🏼 Construindo cluster InnoDB a partir do mysql 5.7 no centos 7 🥡 🚛 👼🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá pessoal! 

 Depois que uma tarefa apareceu no trabalho - parece haver um cluster de teste innoDB configurado em várias máquinas virtuais com o cen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Construindo cluster InnoDB a partir do mysql 5.7 no centos 7</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423587/">  Olá pessoal! <br><br>  Depois que uma tarefa apareceu no trabalho - parece haver um cluster de teste innoDB configurado em várias máquinas virtuais com o centos 7.5, você precisa estudá-lo e adicionar mais alguns nós.  Você pode quebrar e zombar como quiser.  Parece tentador. <br><a name="habracut"></a><br>  Antes disso, eu não tinha experiência com esse cluster, mas o Google para ajudar. <br>  Com algumas exceções, todos os links nele e no Yandex estavam no dev.mysql.com ou neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo no Habr</a> .  Parece que um cluster de dois nós foi configurado nele. <br><br>  Bem, eu li o artigo, fiquei um pouco surpreso com a complexidade de adicionar nós e a falta de muitos detalhes, mas tudo bem.  Com um pecado, adicionei metade de um novo nó (alguns dos comandos não foram úteis, outros quebraram tudo), depois do qual comecei a experimentar o reinício dos nós, etc. <br><br>  Após várias abordagens e inúmeras mortes de células nervosas, o cluster não aguentou mais.  Um nó não queria ser adicionado sob nenhuma condição, o outro desligou quando tentei acessar o banco de dados, o terceiro fingiu que tudo estava em ordem.  Eu tive que atirar e começar do zero. <br><br>  Ao criar um novo cluster, infelizmente, muitos problemas e inconsistências surgiram.  Talvez o ponto esteja nas versões de software, tentei o mysql 5.7.  Talvez na distribuição.  Como resultado, parei as tentativas impensadas de fazer tudo em um pedaço de papel e comecei a configurá-lo digitando.  E google. <br><br>  Algumas noites agradáveis ​​e noites e o aglomerado se reuniu e até se recusou a desmoronar. <br>  Ao mesmo tempo, o método de sua criação era notavelmente diferente das tentativas anteriores e eu queria compartilhá-lo, porque  Na Internet, não encontrei outras instruções compreensíveis e relevantes relevantes para a configuração do cluster no inndoDB. <br><br>  Portanto, temos três máquinas virtuais idênticas com o Centos 7.5 mínimo 1804 recém-instalado e o selinux e o firewalld desativados: <br><br>  1.1.1.1 <br>  1.1.1.2 <br>  1.1.1.3 <br><br>  Para o trabalho, usei o mysql 5.7, por isso usamos.  Vamos começar com 1.1.1.1: <br><br>  1. Instale o repositório mysql-community: <br><br><pre><code class="hljs powershell">rpm <span class="hljs-literal"><span class="hljs-literal">-i</span></span> https://dev.mysql.com/get/mysql80<span class="hljs-literal"><span class="hljs-literal">-community</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-el7</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span>.noarch.rpm</code> </pre> <br>  Desligue o repositório para 8, ligue-o para 5.7 e verifique - se está tudo bem, então instale o mysql: <br><br><pre> <code class="hljs powershell">yum install yum<span class="hljs-literal"><span class="hljs-literal">-utils</span></span> yum<span class="hljs-literal"><span class="hljs-literal">-config</span></span><span class="hljs-literal"><span class="hljs-literal">-manager</span></span> -<span class="hljs-literal"><span class="hljs-literal">-disable</span></span> mysql80<span class="hljs-literal"><span class="hljs-literal">-community</span></span> yum<span class="hljs-literal"><span class="hljs-literal">-config</span></span><span class="hljs-literal"><span class="hljs-literal">-manager</span></span> -<span class="hljs-literal"><span class="hljs-literal">-enable</span></span> mysql57<span class="hljs-literal"><span class="hljs-literal">-community</span></span> yum repolist yum install mysql<span class="hljs-literal"><span class="hljs-literal">-community</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span> mysql<span class="hljs-literal"><span class="hljs-literal">-shell</span></span></code> </pre> <br>  2. Trazemos o /etc/my.cnf para este formulário: <br><br><pre> <code class="hljs pgsql">[mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock symbolic-links=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span>-error=/var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> pid-file=/var/run/mysqld/mysqld.pid bind-address=<span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> port=<span class="hljs-number"><span class="hljs-number">3301</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Replication</span></span> part server_id=<span class="hljs-number"><span class="hljs-number">1</span></span> gtid_mode=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> enforce_gtid_consistency=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> master_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> relay_log_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> binlog_checksum=<span class="hljs-keyword"><span class="hljs-keyword">NONE</span></span> log_slave_updates=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> log_bin=binlog binlog_format=<span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> plugin-<span class="hljs-keyword"><span class="hljs-keyword">load</span></span> = group_replication.so # <span class="hljs-keyword"><span class="hljs-keyword">Group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replication</span></span> part transaction_write_set_extraction=XXHASH64 loose-group_replication_start_on_boot = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> loose-group_replication_local_address = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">33011</span></span> loose-group_replication_bootstrap_group = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> report_port = <span class="hljs-number"><span class="hljs-number">3301</span></span> report_host = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre><br>  Aqui 3301 é a porta na qual o mysql escutará e 33011 é a porta na qual os nós se comunicam. <br><br>  3. Inicie o mysql e execute a configuração preliminar: <br><br><pre> <code class="hljs pgsql">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> mysqld grep <span class="hljs-string"><span class="hljs-string">'password'</span></span> /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> mysql_secure_installation</code> </pre> <br>  4. Crie um cluster e um usuário separado para gerenciá-lo.  Se você souber com antecedência os endereços IP dos nós, poderá listá-los imediatamente na lista ipwhitel.  Vamos fingir que ainda não sabemos sobre 1.1.1.2.  e 1.1.1.3: <br><br><pre> <code class="hljs perl">mysqlsh &gt; \c <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \c cladmin@1.<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration() &gt; cl=dba.createCluster(<span class="hljs-string"><span class="hljs-string">'TestCluster'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1'</span></span>}) &gt; dba.configureLocalInstance() &gt; cl.status()</code> </pre> <br>  Feito!  O cl.status deve gerar algo como isto: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  Ao alterar o cluster, será necessário executar o comando dba.configureLocalInstance () localmente em todos os nós para salvar as alterações: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">On</span></span> instance <span class="hljs-string"><span class="hljs-string">'1.1.1.1:3301'</span></span> membership change cannot be persisted since MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">5.7</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> support the <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> PERSIST command (MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">8.0</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span> required). Please use the &lt;Dba&gt;.configureLocalInstance command locally <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> persist the changes.</code> </pre> <br>  Porque  adicionaremos mais alguns nós, não fecharemos a conexão com o servidor 1.1.1.1, será útil para nós. <br><br>  Agora vamos tentar adicionar o nó 1.1.1.2 ao cluster.  Para fazer isso, executamos todos os mesmos comandos nele até 3 etapas, inclusive, sem esquecer de alterar server_id, loose-group_replication_local_address e report_host. <br><br>  4. Executamos em 1.1.1.2: <br><br><pre> <code class="hljs pgsql">mysql -p &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> group_replication_allow_local_disjoint_gtids_join=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>;</code> </pre> <br>  Tentei definir essa variável através do mysqlsh, alternando para o modo sql, mas as ações não o afetaram no mysql.  Seguinte: <br><br><pre> <code class="hljs swift">mysqlsh &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> cladmin@<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration()</code> </pre> <br><br>  5. Retorne ao primeiro nó 1.1.1.1.  Se você fechou a conexão, poderá conectar-se rapidamente ao cluster assim: <br><br><pre> <code class="hljs mel">mysqlsh --uri cladmin@1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span> &gt; \sql &gt; STOP GROUP_REPLICATION; &gt; SET GLOBAL group_replication_ip_whitelist=<span class="hljs-string"><span class="hljs-string">"1.1.1.1,1.1.1.2"</span></span>; &gt; START GROUP_REPLICATION; &gt; \js &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.addInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2'</span></span>}) &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.status()</code> </pre><br>  Por alguma razão, ao adicionar um nó sem a opção ipWhitelist, ele não é automaticamente transmitido a ele, portanto, nós o especificamos manualmente. <br>  Se sua lista de permissões estiver configurada inicialmente para todos os nós ou uma sub-rede, os comandos no modo sql poderão ser ignorados. <br><br>  Não esqueça de executar dba.configureLocalInstance () em todos os nós para salvar a configuração. <br><br>  O cluster de seus dois nós acabou: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  Bem, há um cluster de dois nós, mas no "Cluster NÃO é tolerante a nenhuma falha". <br>  Adicione um terceiro, o algoritmo é basicamente o mesmo que adicionar um segundo. <br><br>  Se você precisar alterar novamente a lista de desbloqueio, execute os comandos no nó r / w, porque  em nós de r / o, parece não levar a nada.  Nesse caso, os nós de E / S cairão e precisarão ser reconectados, relatando simultaneamente uma nova lista de permissões. <br>  No nosso caso: <br><br><pre> <code class="hljs pgsql">&gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.rejoinInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2,1.1.1.3'</span></span>})</code> </pre> <br>  Bem, novamente, não se esqueça de executar o dba.configureLocalInstance () em todos os nós para salvar a configuração. <br><br>  Um cluster de três nós se parece com isso: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is ONLINE and can tolerate up to ONE failure."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.3:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.3:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  Se o cluster tiver recolhido o estado de um nó, ele precisará ser iniciado com o parâmetro loose-group_replication_bootstrap_group = ON no /etc/my.cnf <br>  Após a inicialização, o parâmetro precisará ser desativado novamente, caso contrário, esse nó sempre será separado do cluster e manterá seu próprio. <br><br>  A instalação do mysql-router está bem descrita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , então não vejo sentido em duplicar. <br><br>  É isso, espero que alguém ache minha experiência útil. <br><br>  Obrigado pela atenção. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt423587/">https://habr.com/ru/post/pt423587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt423575/index.html">Padrões de projeto em microeletrônica: onde existem realmente 7 nanômetros na tecnologia de 7 nm?</a></li>
<li><a href="../pt423577/index.html">Criando um jogo de lógica para uma plataforma de jogos</a></li>
<li><a href="../pt423579/index.html">Serviços em nuvem para WebGL? Não obrigado</a></li>
<li><a href="../pt423583/index.html">Obtendo acidentes através do NotificationIRP no OSS</a></li>
<li><a href="../pt423585/index.html">Ao vivo: CI / CD no iOS e Android</a></li>
<li><a href="../pt423589/index.html">Como escolhemos o TTS, por exemplo, sons no dicionário</a></li>
<li><a href="../pt423591/index.html">Músicas antigas sobre o principal. Java e solicitações de saída</a></li>
<li><a href="../pt423593/index.html">Google anuncia concurso para ataques a algoritmos de visão de máquina</a></li>
<li><a href="../pt423595/index.html">Anomalia de Frango, Intercâmbio</a></li>
<li><a href="../pt423597/index.html">Como e quais clusters podem ser alocados na base de clientes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>