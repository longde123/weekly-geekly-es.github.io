<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😃 🧞 👩‍❤️‍💋‍👨 Solusi universal untuk UITableViewRowAction dan UIContextualAction 👨‍❤️‍👨 👩🏼‍⚖️ 🙎🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Banyak yang mengalami masalah dalam menerapkan pemetaan tombol yang indah untuk UITableViewCell ketika bergeser ke kiri. Beberapa menggunakan fungsion...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Solusi universal untuk UITableViewRowAction dan UIContextualAction</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/414019/"><img src="https://habrastorage.org/webt/ij/w5/3b/ijw53blhrl4aftmlr8hv6iymiu8.jpeg"><br><br>  Banyak yang mengalami masalah dalam menerapkan pemetaan tombol yang indah untuk UITableViewCell ketika bergeser ke kiri.  Beberapa menggunakan fungsionalitas standar "out of the box", yang lain mengganggu dengan implementasi mereka sendiri, sementara yang lain dikelola dengan karakter Unicode.  Pada artikel ini saya akan memberi tahu Anda cara mencapai kustomisasi maksimum UITableViewRowAction. <br><a name="habracut"></a><br>  Pertama, teori kecil: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UITableViewRowAction</a> adalah kelas yang memungkinkan pengguna untuk melakukan tindakan tertentu dengan sel yang diberikan (seperti "hapus", "ubah", dll.) Saat memindahkan sel ke kiri.  Setiap instance dari kelas ini mewakili satu tindakan untuk dieksekusi dan termasuk teks, gaya, dan penangan klik.  IOS SDK memungkinkan kita untuk menyesuaikan UITableViewRowAction sebagai berikut: <br><br><pre><code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">convenience</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(style: <span class="hljs-type"><span class="hljs-type">UITableViewRowActionStyle</span></span>, title: <span class="hljs-type"><span class="hljs-type">String?</span></span>, handler: @escaping (<span class="hljs-type"><span class="hljs-type">UITableViewRowAction</span></span>, <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Swift</span></span>.<span class="hljs-type"><span class="hljs-type">Void</span></span>)</code> </pre> <br>  Anda juga dapat mengatur backgroundColor. <br><br><h3>  Metode yang ada. </h3><br>  Pertimbangkan contoh implementasi yang ada, atau apa yang saya temukan di Internet. <br>  <strong>Metode nomor 1</strong> .  Gunakan fungsi "di luar kotak".  Ini cukup dengan menggunakan tombol biasa dengan teks dan latar belakang.  Itu terlihat terlalu sederhana dan membosankan: <br><img src="https://habrastorage.org/webt/nw/1a/zu/nw1azubhwsv2ak9tpiaq39jamma.jpeg"><br><br>  <strong>Metode nomor 2</strong> .  Atur backgroundColor menggunakan <em>UIColor (patternImage: UIImage)</em> .  Ini akan mencapai keindahan, tetapi akan menghilangkan fleksibilitas, menambah sejumlah batasan dan kesulitan.  Karena lebar UITableViewRowAction dihitung berdasarkan ukuran teks, Anda perlu menentukan <em>judul</em> sebagai sekumpulan karakter spasi putih dengan lebar tertentu.  Kami tidak akan dapat menggunakan metode ini untuk sel dengan ketinggian dinamis.  Jika sel bertambah tinggi, itu akan terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/ni/k3/fm/nik3fmelwkdx6vzqc0f1k_ipxhm.jpeg"><br><br>  <strong>Metode nomor 3</strong> .  Gunakan karakter Unicode.  Tidak perlu menghitung ukuran teks dengan spasi, dan metode ini cocok untuk sel dengan tinggi dinamis.  Itu terlihat bagus: <br><br><img src="https://habrastorage.org/webt/jy/f7/j8/jyf7j8qnr-dupmrdtiycimemysa.jpeg"><br><br>  Tetapi jika kita ingin membuat teks di bawah ikon, metode ini tidak cocok untuk kita. <br><br>  <strong>Metode nomor 4</strong> .  Gunakan CoreGraphics untuk merender komponen UI.  Idenya adalah menggambar secara manual gambar dengan susunan elemen yang diinginkan (teks dan gambar).  Dalam hal ini, Anda perlu menghitung ukuran dan koordinat untuk lokasi setiap elemen.  Dengan menggunakan metode ini, kita dapat membuat teks dan gambar, mengaturnya sesuai kebutuhan.  Tetapi metode ini sulit diterapkan.  Kami menginginkan sesuatu yang lebih sederhana. <br><br>  <strong>Implementasi lainnya</strong> .  Ada beberapa solusi yang sudah jadi.  Mereka menggunakan implementasi sel mereka sendiri dengan penambahan ScrollView dan logika lainnya.  Misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SwipeCellKit</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MGSwipeTableCell</a> .  Tetapi solusi ini tidak memungkinkan mencapai perilaku iOS standar, mereka hanya mencakup satu sel, tidak seperti UITableViewRowAction, yang dibuat dalam delegasi tabel.  Misalnya, menggunakan salah satu solusi ini, jika Anda membuka tindakan untuk shift kiri untuk beberapa sel, Anda harus menutup tindakan ini secara manual di masing-masingnya, yang sangat merepotkan.  Untuk melakukan ini, Anda harus menambahkan logika Anda sendiri untuk mengontrol tindakan terbuka pada babatan.  Kami ingin membuat solusi sederhana yang tidak memerlukan biaya tambahan, seolah-olah kami menggunakan implementasi standar UITableViewRowAction. <br><br><h3>  Mari kita mulai </h3><br>  Mari kita coba membuat solusi universal yang memungkinkan Anda membuat UITableViewRowAction dengan desain apa pun yang kami butuhkan. <br><br>  Buat kelas turunan kami dari UITableViewRowAction dan tentukan metode pembuatan instance utama: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">RowActionTapHandler</span></span> = (<span class="hljs-type"><span class="hljs-type">RowAction</span></span>, <span class="hljs-type"><span class="hljs-type">IndexPath</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RowAction</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewRowAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rowAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with actionHandler: @escaping RowActionTapHandler)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowAction = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(style: .<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, title: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { action, indexPath <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> action = action <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">RowAction</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } actionHandler(action, indexPath) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowAction } }</code> </pre><br>  Karena UITableViewRowAction tidak memiliki penginisialisasi utama, untuk kenyamanan kita dapat membuat metode statis di mana di dalamnya kita membuat UITableViewRowAction dengan cara standar dan melemparkan actionHandler ke dalamnya untuk menangani klik. <br><br>  Sekarang mari kita coba untuk mencapai penyesuaian universal tombol UITableViewRowAction.  Idenya adalah untuk mendapatkan tampilan tombol dari UIView yang telah selesai (yang dapat dikonfigurasi dalam xib biasa).  Jadi kita dapat membuat tombol apa pun, berdasarkan preferensi individu (font apa pun dari teks, ukuran dan pengaturan elemen, dll.). <br><br>  Kami memiliki dua hal yang dapat kami ubah di UITableViewRowAction: <em>backgroundColor</em> dan <em>title</em> .  Saat ini, satu-satunya cara untuk mengubah tampilan tombol UITableViewRowAction adalah mengubah properti backgroundColor.  Karena itu, tujuan kami adalah untuk mengubah: UIView -&gt; UIImage -&gt; UIColor.  Kita bisa mendapatkan warna menggunakan gambar sebagai berikut: <em>UIColor (patternImage: UIImage)</em> .  Dan kita bisa mendapatkan gambar dari UIView dengan merendernya menggunakan kerangka kerja CoreGraphics standar. <br><br>  Tapi pertama-tama, kita akan memutuskan bagaimana mengatur ukuran tombol: "di luar kotak" tidak ada fungsi ini, dan ukuran dalam UITableViewRowAction dihitung oleh ukuran teks dari bidang judul. <br><br>  Setelah melakukan percobaan (mengukur lebar tombol yang dihitung dan nyata), saya menemukan karakter Unicode kosong yang memiliki lebar bukan nol terkecil: <em>U + 200A</em> <br><br>  Kami akan menggunakannya dan membuat konstanta: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbol = <span class="hljs-string"><span class="hljs-string">"\u{200A}"</span></span> }</code> </pre><br>  Kami akan menulis fungsi untuk mendapatkan serangkaian karakter spasi putih sesuai dengan ukuran yang kita butuhkan: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbolWidth: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flt_max = <span class="hljs-type"><span class="hljs-type">CGFloat</span></span>.greatestFiniteMagnitude <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maxSize = <span class="hljs-type"><span class="hljs-type">CGSize</span></span>(width: flt_max, height: flt_max) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> attributes = [<span class="hljs-type"><span class="hljs-type">NSFontAttributeName</span></span> : <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFont(ofSize: <span class="hljs-type"><span class="hljs-type">UIFont</span></span>.systemFontSize)] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> boundingRect = <span class="hljs-type"><span class="hljs-type">Constants</span></span>.placeholderSymbol.boundingRect(with: maxSize, options: .usesLineFragmentOrigin, attributes: attributes, context: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> boundingRect.width }() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emptyTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size: CGSize)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> usefulWidth = size.width - <span class="hljs-type"><span class="hljs-type">Constants</span></span>.minimalActionWidth usefulWidth = usefulWidth &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : usefulWidth <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> countOfSymbols = <span class="hljs-type"><span class="hljs-type">Int</span></span>(floor(usefulWidth * <span class="hljs-type"><span class="hljs-type">Constants</span></span>.shiftFactor / <span class="hljs-type"><span class="hljs-type">RowAction</span></span>.placeholderSymbolWidth)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">String</span></span>(repeating: <span class="hljs-type"><span class="hljs-type">Constants</span></span>.placeholderSymbol, <span class="hljs-built_in"><span class="hljs-built_in">count</span></span>: countOfSymbols) }</code> </pre><br>  Variabel <em>placeholderSymbolWidth</em> mendapatkan lebar karakter Unicode kami, dan <em>emptyTitle (untuk ukuran: CGSize) -&gt;</em> Fungsi <em>string</em> menghitung jumlah karakter spasi putih yang sesuai dengan ukuran <em>ukuran</em> dan mengembalikan string karakter ini.  Rumus di atas menggunakan konstanta <em>shiftFactor</em> .  Ini adalah koefisien penyimpangan lebar dari nilai nominal.  Faktanya adalah bahwa ketika lebar UITableViewRowAction meningkat, kesalahan kecil meningkat (mis., Lebar sebenarnya dari tombol berbeda dari lebar yang dihitung dengan rumus biasa).  Untuk menghindari ini, kami menggunakan konstanta ini, diturunkan secara eksperimental. <br><br>  Juga UITableViewRowAction memiliki lebar minimum 30 (misalnya, jika Anda mengatur title = "").  Lebar ini adalah minimum yang diperlukan untuk lekukan ke kiri dan kanan judul. <br>  Perbarui konstanta kami: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholderSymbol = <span class="hljs-string"><span class="hljs-string">"\u{200A}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> minimalActionWidth: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shiftFactor: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> = <span class="hljs-number"><span class="hljs-number">1.1</span></span> }</code> </pre><br>  Sekarang mari kita ambil gambar dari UIView.  Kami akan menulis fungsi berikut: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(from view: UIView)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIImage?</span></span> { <span class="hljs-type"><span class="hljs-type">UIGraphicsBeginImageContextWithOptions</span></span>(view.bounds.size, view.isOpaque, <span class="hljs-type"><span class="hljs-type">UIScreen</span></span>.main.scale) <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> context = <span class="hljs-type"><span class="hljs-type">UIGraphicsGetCurrentContext</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">assertionFailure</span></span>(<span class="hljs-string"><span class="hljs-string">"Something wrong with CoreGraphics image context"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } context.setFillColor(<span class="hljs-type"><span class="hljs-type">UIColor</span></span>.white.cgColor) context.fill(<span class="hljs-type"><span class="hljs-type">CGRect</span></span>(origin: .zero, size: view.bounds.size)) view.layer.render(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: context) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> img = <span class="hljs-type"><span class="hljs-type">UIGraphicsGetImageFromCurrentImageContext</span></span>() <span class="hljs-type"><span class="hljs-type">UIGraphicsEndImageContext</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> img }</code> </pre><br>  Fungsi ini mengubah <em>tampilan</em> kita menjadi gambar.  Dalam hal ini, ukuran gambar sesuai dengan ukuran <em>tampilan</em> . <br><br>  Langkah terakhir tetap, di mana kami menerapkan metode untuk mengatur UITableViewRowAction menggunakan UIView: <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupForCell</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with view: UIView)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> img = image(from: view) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.title = emptyTitle(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: img.size) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>(patternImage: img) }</code> </pre><br>  Di sini kita menggunakan fungsi yang ditulis sebelumnya untuk mengkonfigurasi tombol kita dan mengatur <em>backgroundColor</em> menggunakan gambar yang dihasilkan. <br><br>  Itu saja.  Kami mendapat solusi universal untuk UITableViewRowAction dan sekarang kami dapat menyesuaikannya dengan cara apa pun menggunakan UIView. <br><br><img src="https://habrastorage.org/webt/vq/om/jh/vqomjhu5tyowfttayuyddmgqqwu.jpeg"><br><br>  Dimulai dengan iOS 11, Apple telah menambahkan kelas baru untuk aksi gesek untuk sel dalam tabel - UIContextualAction.  Ini memungkinkan Anda untuk segera menentukan gambar yang akan ditampilkan pada tindakan pada gesekan (ini adalah apa yang telah kami lewatkan selama bertahun-tahun menggunakan UITableViewRowAction).  Dia seharusnya membuat hidup kita lebih mudah, tetapi di samping peluang baru, dia menciptakan masalah tambahan.  Kelas ini memberlakukan batasan pada ukuran gambar, tidak memungkinkan penggunaan teks dan gambar pada saat yang sama, dan juga, gambar harus memiliki format khusus (gambar templat).  Oleh karena itu, saya menyelesaikan solusi saya untuk mendukung tindakan gesek di iOS 11. Sekarang untuk membuat UITableViewRowAction atau UIContextualAction, pertama-tama Anda perlu membuat pabrik RowActionFactory, mengkonfigurasinya menggunakan tampilan kami (seperti yang kami lakukan di atas dalam metode <em>setupForCell (dengan tampilan: UIView))</em> dan kembalikan entitas yang kita butuhkan: UITableViewRowAction atau UIContextualAction (menggunakan <em>rowAction ()</em> atau <em>contextualAction (untuk metode indexPath: IndexPath),</em> masing-masing).  Berikut ini adalah contoh penggunaan RowActionFactory: <br><br><pre> <code class="hljs julia"><span class="hljs-meta"><span class="hljs-meta">@available</span></span>(iOS <span class="hljs-number"><span class="hljs-number">11.0</span></span>, *) func tableView(_ tableView: UITableView, trailingSwipeActionsConfigurationForRowAt indexPath: IndexPath) -&gt; UISwipeActionsConfiguration? { var contextualActions: [UIContextualAction] = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> actionType <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rowActionTypes { // actionType -     <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowActionFactory = RowActionFactory { (indexPath) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tableView.setEditing(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rowActionView = &lt;...&gt; //  UIView     rowActionFactory.setupForCell(with: rowActionView) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contextualAction = rowActionFactory.contextualAction(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: indexPath) { contextualActions.append(contextualAction) } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> swipeActionsConfiguration = UISwipeActionsConfiguration(actions: contextualActions) swipeActionsConfiguration.performsFirstActionWithFullSwipe = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> swipeActionsConfiguration }</code> </pre><br>  Solusi selesai dapat ditemukan di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TCSCustomRowActionFactory (github.com)</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414019/">https://habr.com/ru/post/id414019/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413999/index.html">Apa yang terjadi dengan penetapan harga cloud dalam beberapa tahun terakhir</a></li>
<li><a href="../id414001/index.html">Bagaimana bertahan hidup di dunia pembangunan yang terus berubah</a></li>
<li><a href="../id414003/index.html">Kereta berbeda. Sangat</a></li>
<li><a href="../id414009/index.html">8 sumber terbaik terbaik untuk praktik pemrograman pada tahun 2018</a></li>
<li><a href="../id414011/index.html">Saya bisa menjadi Apple, dan Anda juga</a></li>
<li><a href="../id414023/index.html">Tanyakan Ethan: Seberapa cepat kehidupan dapat muncul di alam semesta?</a></li>
<li><a href="../id414025/index.html">Pengusaha melacak komputer, toilet, dan sekarang emosi juga; Apakah bos Anda mengikuti Anda?</a></li>
<li><a href="../id414027/index.html">Bisakah teman saya dianggap teman sejati?</a></li>
<li><a href="../id414029/index.html">Cahaya misterius di sekitar bintang yang baru terbentuk, dan apa pendapat para astronom tentang itu</a></li>
<li><a href="../id414031/index.html">Mengikuti pertemuan "PostgreSQL 11 Fitur Baru"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>