<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôã üë∫ üîÅ Hist√≥ria sobre como criar uma API ‚¨áÔ∏è ü§ûüèΩ ü•Ç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Certa vez, ajudei um amigo que precisava integrar dados sobre moradias gratuitas e ocupadas do sistema de gerenciamento de propriedades no site do cli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hist√≥ria sobre como criar uma API</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/436888/">  Certa vez, ajudei um amigo que precisava integrar dados sobre moradias gratuitas e ocupadas do sistema de gerenciamento de propriedades no site do cliente.  Para minha alegria, este sistema tinha uma API.  Mas, infelizmente, foi muito mal organizado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfc/80d/a9e/dfc80da9e77fe55d40b833fe3f5ff9b6.jpg" alt="imagem"></div><br>  Decidi escrever este artigo n√£o para criticar o sistema que ser√° discutido, mas para falar sobre quais erros foram encontrados durante o desenvolvimento da API e sugerir maneiras de corrigir esses erros. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Vis√£o geral da situa√ß√£o</font> </h2><br>  A organiza√ß√£o em quest√£o usou o sistema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Beds24</a> para gerenciar o espa√ßo de vida.  As informa√ß√µes sobre o que √© gratuito e o que est√° ocupado foram sincronizadas com v√°rios sistemas de reserva de acomoda√ß√µes (como Booking, AirBnB e outros).  A organiza√ß√£o estava envolvida no desenvolvimento do site e queria que a pesquisa exibisse apenas informa√ß√µes sobre as salas dispon√≠veis por um per√≠odo especificado e com capacidade adequada.  Essa tarefa parecia muito simples, pois o Beds24 fornece uma API para integra√ß√£o com outros sistemas.  De fato, os desenvolvedores dessa API cometeram muitos erros no design.  Proponho analisar esses erros, identificar problemas espec√≠ficos e falar sobre como abordar o desenvolvimento da API nas situa√ß√µes em considera√ß√£o. <br><br><h2>  <font color="#3AC1EF">Problema n¬∫ 1: solicitar formato do corpo</font> </h2><br>  Como o cliente est√° interessado apenas em informa√ß√µes sobre, digamos, que um quarto de hotel est√° livre ou ocupado, estamos interessados ‚Äã‚Äãapenas em nos referir ao <code>/getAvailabilities</code> API <code>/getAvailabilities</code> .  E, embora uma chamada para essa API deva levar a dados sobre a disponibilidade de salas, na verdade, essa chamada parece uma solicita√ß√£o POST, pois o autor da API decidiu equip√°-la com a capacidade de aceitar filtros como um corpo JSON da solicita√ß√£o.  Aqui est√° uma lista de poss√≠veis par√¢metros de consulta e exemplos dos valores que eles aceitam: <br><br><pre> <code class="plaintext hljs">{   "checkIn": "20151001",   "lastNight": "20151002",   "checkOut": "20151003",   "roomId": "12345",   "propId": "1234",   "ownerId": "123",   "numAdult": "2",   "numChild": "0",   "offerId": "1",   "voucherCode": "",   "referer": "",   "agent": "",   "ignoreAvail": false,   "propIds": [       1235,       1236   ],   "roomIds": [       12347,       12348,       12349   ] }</code> </pre> <br>  Vamos percorrer esse objeto JSON e falar sobre o que h√° de errado aqui. <br><br><ol><li>  As datas ( <code>checkIn</code> , <code>lastNight</code> e <code>checkOut</code> ) est√£o no formato <code>YYYYMMDD</code> .  N√£o h√° absolutamente nenhuma raz√£o para n√£o usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formato ISO 8601 padr√£o</a> ( <code>YYYY-MM-DD</code> ) ao converter datas em seq√º√™ncias de caracteres, pois esse √© um padr√£o amplamente usado para a apresenta√ß√£o de datas.  √â familiar para muitos desenvolvedores, √© o que muitos analisadores JSON esperam receber na entrada.  Al√©m disso, h√° a sensa√ß√£o de que o campo <code>lastNight</code> √© redundante, pois h√° um campo <code>checkOut</code> , que √© sempre representado por uma data um dia antes da data especificada em <code>lastNight</code> .  Em conex√£o com as defici√™ncias observadas acima, sugiro que, ao projetar essas APIs, se esforce para sempre usar m√©todos padr√£o de apresenta√ß√£o de datas e tente n√£o sobrecarregar os usu√°rios da API com a necessidade de trabalhar com dados redundantes. </li><li>  Todos os campos identificadores, bem como os <code>numChild</code> e <code>numChild</code> , s√£o num√©ricos, mas s√£o representados como seq√º√™ncias de caracteres.  Nesse caso, n√£o h√° motivo aparente para represent√°-los como cadeias. </li><li>  Aqui voc√™ pode observar os seguintes pares de campos: <code>roomId</code> e <code>roomIds</code> , assim como <code>propId</code> e <code>propIds</code> .  A presen√ßa dos <code>propId</code> e <code>propId</code> √© redundante, pois ambos podem ser usados ‚Äã‚Äãpara transmitir identificadores.  Al√©m disso, h√° um problema com os tipos.  Observe que o campo <code>roomId</code> √© um campo de seq√º√™ncia de caracteres e os valores num√©ricos dos identificadores devem ser usados ‚Äã‚Äãna matriz <code>roomIds</code> .  Isso pode causar confus√£o, problemas com a an√°lise e, al√©m disso, sugere que no servidor algumas opera√ß√µes sejam executadas com cadeias e outras com n√∫meros, apesar do fato de que essas cadeias e n√∫meros s√£o usados ‚Äã‚Äãpara representar o mesmo dados. </li></ol><br>  Gostaria de convidar os desenvolvedores de API para tentar n√£o complicar a vida daqueles que ir√£o usar essas APIs, enquanto cometem erros como APIs ao criar APIs.  Ou seja, deve-se buscar a formata√ß√£o padr√£o dos dados, para garantir que eles n√£o sejam redundantes, para garantir que diferentes tipos de dados n√£o sejam usados ‚Äã‚Äãpara representar entidades homog√™neas.  E n√£o vale tudo, indiscriminadamente, para apresentar na forma de linhas. <br><br><h2>  <font color="#3AC1EF">Problema n¬∫ 2: formato do corpo da resposta</font> </h2><br>  Como j√° mencionado, estamos interessados ‚Äã‚Äãapenas no <code>/getAvailabilities</code> API <code>/getAvailabilities</code> .  Vamos ver como √© a resposta desse endpoint e falar sobre quais defici√™ncias foram feitas durante sua forma√ß√£o.  Lembre-se de que, ao acessar a API, estamos interessados ‚Äã‚Äãem uma lista de identificadores de objetos gratuitos por um determinado per√≠odo e que podem acomodar um determinado n√∫mero de pessoas.  Abaixo est√° um exemplo do corpo da solicita√ß√£o para a API e um exemplo do que ela retorna em resposta a essa solicita√ß√£o. <br><br>  Aqui est√° o pedido: <br><br><pre> <code class="plaintext hljs">{   "checkIn": "20190501",   "checkOut": "20190503",   "ownerId": "25748",   "numAdult": "2",   "numChild": "0" }</code> </pre> <br>  Aqui est√° a resposta: <br><br><pre> <code class="plaintext hljs">{   "10328": {       "roomId": "10328",       "propId": "4478",       "roomsavail": "0"   },   "13219": {       "roomId": "13219",       "propId": "5729",       "roomsavail": "0"   },   "14900": {       "roomId": "14900",       "propId": "6779",       "roomsavail": 1   },   "checkIn": "20190501",   "lastNight": "20190502",   "checkOut": "20190503",   "ownerId": 25748,   "numAdult": 2 }</code> </pre> <br>  Fale sobre problemas de resposta. <br><br><ol><li>  No corpo da resposta, as <code>numAdult</code> e <code>numAdult</code> subitamente se tornaram n√∫meros.  E na solicita√ß√£o foi necess√°rio indic√°-los na forma de strings. </li><li>  A lista de objetos imobili√°rios √© apresentada na forma de propriedades de objetos, cujas chaves s√£o identificadores de sala ( <code>roomId</code> ).  Seria l√≥gico esperar que esses dados fossem produzidos como uma matriz.  Para n√≥s, isso significa que, para obter uma lista de salas dispon√≠veis, precisamos <code>roomsavail</code> sobre o objeto inteiro, enquanto verificamos a presen√ßa de certas propriedades dos objetos <code>roomsavail</code> nele, como <code>roomsavail</code> , e n√£o <code>roomsavail</code> aten√ß√£o a algo como <code>checkIn</code> e <code>lastNight</code> .  Seria necess√°rio verificar o valor da propriedade de <code>roomsavail</code> e, se for maior que 0, poder√≠amos concluir que a propriedade correspondente est√° dispon√≠vel para reserva.  Agora vamos dar uma olhada na propriedade <code>roomsavail</code> .  Aqui est√£o as op√ß√µes para apresent√°-lo no corpo da resposta: <code>"roomsavail": "0"</code> e <code>"roomsavail": 1</code> .  Veja o padr√£o?  Se os quartos estiverem ocupados, o valor da propriedade ser√° representado por uma sequ√™ncia.  Se livre - ele se transforma em um n√∫mero.  Isso pode levar a muitos problemas em idiomas estritamente relacionados aos tipos de dados, pois neles a mesma propriedade n√£o deve aceitar valores de tipos diferentes.  Em conex√£o com o exposto acima, eu gostaria de sugerir que os desenvolvedores usem matrizes de objetos JSON para representar determinados conjuntos de dados e n√£o usem constru√ß√µes inconvenientes na forma de pares de valores-chave semelhantes aos que estamos considerando aqui.  Al√©m disso, √© necess√°rio garantir que os campos de objetos homog√™neos n√£o contenham dados de tipos diferentes.  Uma resposta do servidor formatada corretamente pode se parecer com a abaixo.  Observe que, ao apresentar dados neste formul√°rio, as informa√ß√µes da sala n√£o cont√™m dados duplicados. </li></ol><br><pre> <code class="plaintext hljs">{   "properties": [       {           "id": 4478,           "rooms": [               {                   "id": 12328,                   "available": false               }           ]       },       {           "id": 5729,           "rooms": [               {                   "id": 13219,                   "available": false               }           ]       },       {           "id": 6779,           "rooms": [               {                   "id": 14900,                   "available": true               }           ]       }   ],   "checkIn": "2019-05-01",   "lastNight": "2019-05-02",   "checkOut": "2019-05-03",   "ownerId": 25748,   "numAdult": 2 }</code> </pre> <br><h2>  <font color="#3AC1EF">Problema 3: tratamento de erros</font> </h2><br>  √â assim que a manipula√ß√£o de erros √© organizada na API considerada aqui: o sistema envia respostas com um c√≥digo de <code>200</code> para todas as solicita√ß√µes, mesmo que ocorra um erro.  Isso significa que a √∫nica maneira de distinguir uma resposta normal de uma resposta com uma mensagem de erro √© analisar o corpo da resposta e verificar a presen√ßa de campos de <code>error</code> ou <code>errorCode</code> nela.  Apenas os 6 c√≥digos de erro a seguir s√£o fornecidos na API. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03c/627/623/03c627623d8d26449cd6788e747643aa.png"></div><br>  <i><font color="#999999">C√≥digos de erro da API Beds24</font></i> <br><br>  Sugiro que todos que leem isso tentem n√£o retornar uma resposta com o c√≥digo 200 (processamento bem-sucedido da solicita√ß√£o) se algo der errado durante o processamento da solicita√ß√£o.  Voc√™ pode executar esta etapa apenas se for fornecida pela estrutura com base na qual voc√™ est√° desenvolvendo a API.  O retorno de c√≥digos de resposta adequados permite que os clientes da API saibam com anteced√™ncia se precisam analisar o corpo da resposta ou n√£o, e como faz√™-lo (ou seja, analisar uma resposta normal do servidor ou um objeto de erro). <br><br>  No nosso caso, existem duas maneiras de melhorar a API nessa dire√ß√£o: voc√™ pode fornecer um c√≥digo HTTP especial no intervalo de 400 a 499 para cada um dos 6 erros poss√≠veis (√© melhor fazer isso) ou retornar, se ocorrer um erro, o c√≥digo 500, que permitir√° pelo menos, o cliente deve saber antes de analisar o corpo da resposta que cont√©m informa√ß√µes sobre o erro. <br><br><h2>  <font color="#3AC1EF">Problema n√∫mero 4: "instru√ß√µes"</font> </h2><br>  Abaixo est√£o as "instru√ß√µes" para usar a API na documenta√ß√£o do projeto: <br><br>  Leia as seguintes instru√ß√µes ao usar a API. <br><br><ol><li>  As chamadas de API devem ser projetadas para que, durante sua execu√ß√£o, seja necess√°rio enviar e receber uma quantidade m√≠nima de dados. </li><li>  As chamadas de API s√£o realizadas uma de cada vez.  Voc√™ deve esperar at√© a pr√≥xima chamada para a API antes de fazer a pr√≥xima chamada. </li><li>  Se voc√™ precisar fazer v√°rias chamadas para a API, uma pausa de alguns segundos deve ser fornecida entre elas. </li><li>  As chamadas de API n√£o precisam ser feitas com muita frequ√™ncia, mantendo o n√≠vel de chamadas no n√≠vel m√≠nimo necess√°rio para resolver tarefas do cliente. </li><li>  O uso excessivo da API dentro de um per√≠odo de 5 minutos levar√° √† suspens√£o da sua conta sem notifica√ß√µes adicionais. </li><li>  Reservamo-nos o direito de bloquear o acesso ao sistema a clientes que, em nossa opini√£o, usam excessivamente a API.  Isso √© feito a nosso crit√©rio e sem aviso pr√©vio. </li></ol><br>  Embora os pontos 1 e 4 pare√ßam bastante justificados, n√£o posso concordar com os outros pontos desta instru√ß√£o.  Considere-os. <br><br><ol><li>  N√∫mero do item 2.  Se voc√™ estiver desenvolvendo uma API REST, ser√° assumido que ser√° uma API independente do estado.  A independ√™ncia das chamadas de API das chamadas anteriores √© um dos motivos pelos quais a tecnologia REST encontrou ampla aplica√ß√£o em aplicativos em nuvem.  Se um determinado m√≥dulo do sistema n√£o suportar o estado, ele poder√° ser reimplantado facilmente em caso de erro.  Os sistemas baseados nesses m√≥dulos s√£o dimensionados facilmente quando a carga sobre eles muda.  Ao projetar uma API RESTful, voc√™ deve garantir que ela seja uma API independente do estado e que aqueles que a usam n√£o precisem se preocupar com algo como executar apenas uma solicita√ß√£o por vez. </li><li>  N√∫mero do item 3.  Este item parece bastante estranho e amb√≠guo.  N√£o consigo entender o motivo pelo qual este par√°grafo da instru√ß√£o foi escrito, mas sinto que isso nos diz que, no processo de processamento da solicita√ß√£o, o sistema executa determinadas a√ß√µes e, se "distra√≠do" por outra solicita√ß√£o, n√£o enviado a tempo, isso pode interferir em seu trabalho.  Al√©m disso, o fato de o autor do manual dizer "alguns segundos" n√£o permite descobrir a dura√ß√£o exata da pausa que deve ser mantida entre solicita√ß√µes sucessivas. </li><li>  Itens n¬∫ 5 e n¬∫ 6.  Refere-se ao "uso excessivo da API", mas nenhum crit√©rio para "uso excessivo" √© fornecido.  Talvez seja 10 pedidos por segundo?  Ou talvez 1?  Al√©m disso, alguns projetos da web podem ter grandes quantidades de tr√°fego.  Se, sem motivos adequados e sem notifica√ß√£o, eles fecharem o acesso √† API de que precisam, seus administradores provavelmente se recusar√£o a usar essas APIs.  Se voc√™ escrever essas instru√ß√µes, use uma linguagem clara e coloque-se no lugar dos usu√°rios que precisam trabalhar com seu sistema, guiados por suas instru√ß√µes. </li></ol><br><h2>  <font color="#3AC1EF">Problema n√∫mero 5: documenta√ß√£o</font> </h2><br>  √â assim que a documenta√ß√£o da API se parece. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b6/8bf/ae6/5b68bfae633a5c394a5f11d3b8c228ce.png"></div><br>  <i><font color="#999999">Documenta√ß√£o da API Beds24</font></i> <br><br>  O √∫nico problema com esta documenta√ß√£o √© sua apar√™ncia.  Ficaria muito melhor se estivesse bem formatado.  Especialmente para mostrar a poss√≠vel apar√™ncia dessa documenta√ß√£o, eu, usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dillinger</a> , e gastando menos de dois minutos nela, fiz a seguinte vers√£o.  Na minha opini√£o, parece muito melhor do que o acima. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac4/e71/7fe/ac4e717fe2757b3f4af62733a857ff2b.png"></div><br>  <i><font color="#999999">Documenta√ß√£o aprimorada</font></i> <br><br>  Para criar esses materiais, √© recomend√°vel usar ferramentas especiais.  Se estamos falando de documentos simples semelhantes ao descrito acima, algo como um arquivo de remarca√ß√£o regular √© suficiente para o design deles.  Se a documenta√ß√£o for mais complicada, ent√£o, para seu design, √© melhor usar ferramentas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Swagger</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apiary</a> . <br><br>  A prop√≥sito, se voc√™ quiser dar uma olhada na documenta√ß√£o da API do Beds24, d√™ uma olhada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  <font color="#3AC1EF">Problema 6: seguran√ßa</font> </h2><br>  A documenta√ß√£o para todos os pontos de extremidade da API diz o seguinte: <br><br>  <i><font color="#999999">Para usar essas fun√ß√µes, o acesso √† API deve ser permitido.</font></i>  <i><font color="#999999">Isso √© feito no menu CONFIGURA√á√ïES ‚Üí CONTA ‚Üí ACESSO √Ä CONTA.</font></i> <br><br>  No entanto, na realidade, qualquer pessoa pode acessar essa API e, usando algumas chamadas, obter informa√ß√µes sem fornecer credenciais.  Por exemplo, isso tamb√©m se aplica a consultas relacionadas √† disponibilidade de determinadas habita√ß√µes.  Isso √© discutido em outra parte da documenta√ß√£o. <br><br>  <i><font color="#999999">A maioria dos m√©todos JSON requer uma chave de API para acessar uma conta.</font></i>  <i><font color="#999999">A chave de acesso da API pode ser definida usando o menu CONFIGURA√á√ïES ‚Üí CONTA ‚Üí ACESSO √Ä CONTA.</font></i> <br><br>  Al√©m da explica√ß√£o incompreens√≠vel dos problemas de autentica√ß√£o, o usu√°rio deve criar a chave para acessar a API por conta pr√≥pria (isso √© feito, a prop√≥sito, preenchendo manualmente o campo correspondente, alguns meios para criar chaves automaticamente n√£o s√£o fornecidos).  O comprimento da chave deve ter entre 16 e 64 caracteres.  Se voc√™ permitir que os usu√°rios criem suas pr√≥prias chaves para acessar a API, isso pode levar ao aparecimento de chaves muito inseguras que podem ser facilmente capturadas.  Em uma situa√ß√£o semelhante, s√£o poss√≠veis problemas associados ao conte√∫do das chaves, pois voc√™ pode inserir qualquer coisa no campo chave.  Na pior das hip√≥teses, isso pode levar a um ataque ao servi√ßo usando inje√ß√£o de SQL ou algo assim.  Ao projetar uma API, n√£o permita que os usu√°rios criem chaves para acessar a API.  Em vez disso, gere chaves para elas automaticamente.  O usu√°rio n√£o deve poder alterar o conte√∫do dessa chave, mas, se necess√°rio, deve poder gerar uma nova chave, reconhecendo a antiga como inv√°lida. <br><br>  No caso de solicita√ß√µes que requerem autentica√ß√£o, vemos outro problema.  Consiste no fato de que um token de autentica√ß√£o deve ser enviado como parte do corpo da solicita√ß√£o.  Aqui est√° como √© descrito na documenta√ß√£o. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/548/cb9/b45548cb94e4cd4dd64ae53ec5c6dbb8.png"></div><br>  <i><font color="#999999">Exemplo de autentica√ß√£o da API Beds24</font></i> <br><br>  Se o token de autentica√ß√£o for transmitido no corpo da solicita√ß√£o, isso significa que o servidor precisar√° analisar o corpo da solicita√ß√£o antes de alcan√ßar a chave.  Depois disso, ele extrai a chave, executa a autentica√ß√£o e decide - o que deve fazer com a solicita√ß√£o - cumpri-la ou n√£o.  Se a autentica√ß√£o for bem-sucedida, o servidor n√£o estar√° sujeito a carga adicional, pois nesse caso o corpo da solicita√ß√£o ainda precisar√° ser analisado.  Mas, se a solicita√ß√£o falhar na autentica√ß√£o, um tempo valioso do processador ser√° gasto na an√°lise do corpo da solicita√ß√£o por nada.  Seria melhor enviar um token de autentica√ß√£o no cabe√ßalho da solicita√ß√£o, usando algo como um esquema de autentica√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Portador</a> .  Com essa abordagem, o servidor precisar√° analisar o corpo da solicita√ß√£o apenas se a autentica√ß√£o for bem-sucedida.  Outro motivo pelo qual recomendamos o uso de um esquema padr√£o como o Bearer para autentica√ß√£o √© o fato de a maioria dos desenvolvedores estar familiarizada com esses esquemas. <br><br><h2>  <font color="#3AC1EF">Problema n√∫mero 7: desempenho</font> </h2><br>  Esta √© a √∫ltima edi√ß√£o da minha lista, mas n√£o diminui sua import√¢ncia.  O fato √© que leva um pouco mais de um segundo para concluir a solicita√ß√£o para a API em quest√£o.  Em aplica√ß√µes modernas, esses atrasos podem ser inaceit√°veis.  De fato, aqui voc√™ pode aconselhar todos os envolvidos no desenvolvimento da API a n√£o esquecer o desempenho. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  Apesar de todos os problemas que est√°vamos falando aqui, a API em quest√£o nos permitiu resolver os problemas enfrentados pelo projeto.  Mas os desenvolvedores levaram bastante tempo para entender a API e implementar tudo o que precisavam.  Al√©m disso, para resolver problemas simples, eles precisavam escrever um c√≥digo bastante complicado.  Se essa API fosse projetada como deveria, o trabalho seria feito mais rapidamente e a solu√ß√£o pronta para uso seria mais simples. <br><br>  Portanto, gostaria de pedir a todos que projetam a API que pensem em como os usu√°rios de seus servi√ßos trabalhar√£o com ela.  Verifique se a documenta√ß√£o da API descreve completamente seus recursos, para que seja compreens√≠vel e bem projetado.  Controle a nomea√ß√£o de entidades, verifique se os dados que sua API emite ou recebe s√£o claramente estruturados para que seja f√°cil e conveniente trabalhar com eles.  Al√©m disso, n√£o se esque√ßa da seguran√ßa e do tratamento correto dos erros.  Se voc√™ levar em conta tudo o que falamos ao criar a API, n√£o precisar√° escrever algo como as estranhas "instru√ß√µes" que discutimos acima para trabalhar com ela. <br><br>  Como j√° mencionado, este material n√£o se destina a desencorajar os leitores a usar o Beds24 ou qualquer outro sistema com uma API mal projetada.  Meu objetivo era mostrar exemplos de erros e abordagens para sua solu√ß√£o, fazer recomenda√ß√µes, seguindo as quais todos pudessem melhorar a qualidade de seus desenvolvimentos.  Espero que este material atraia a aten√ß√£o dos programadores que o leem para a qualidade das solu√ß√µes que desenvolvem.  Isso significa que haver√° mais boas APIs no mundo. <br><br>  <b>Caros leitores!</b>  Voc√™ encontrou APIs mal projetadas? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436888/">https://habr.com/ru/post/pt436888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436876/index.html">[SAP] SAPUI5 para manequins parte 1: um exerc√≠cio completo passo a passo</a></li>
<li><a href="../pt436878/index.html">O BERT √© um modelo de linguagem de ponta para 104 idiomas. Tutorial para iniciar o BERT localmente e no Google Colab</a></li>
<li><a href="../pt436880/index.html">No√ß√µes b√°sicas de modelo C ++: modelos de fun√ß√£o</a></li>
<li><a href="../pt436884/index.html">N√≥s dominamos async / wait em um exemplo real</a></li>
<li><a href="../pt436886/index.html">Usando Babel e Webpack para configurar um projeto React do zero</a></li>
<li><a href="../pt436890/index.html">Tutorial Reagir Parte 10: Workshop sobre como trabalhar com propriedades e estilo de componentes</a></li>
<li><a href="../pt436892/index.html">Tutorial React Parte 11: Forma√ß√£o din√¢mica de marca√ß√£o e o m√©todo Map Array</a></li>
<li><a href="../pt436894/index.html">Rastejando o apocalipse de TI. Novos servi√ßos em nuvem deixar√£o alguns engenheiros desempregados</a></li>
<li><a href="../pt436896/index.html">docker-pretty-ps - finalmente um docker leg√≠vel ps</a></li>
<li><a href="../pt436900/index.html">FunTech ML-meetup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>