<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐ฝโ๐ซ ๐ ๐จ๐ฟโ๐คโ๐จ๐ผ ุงูุบูุต ุงูุนููู ูู ูุณุงุญุงุช ุฃุณูุงุก Linux ๐งฆ โฌ๏ธ ๐ญ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุดูุฑุงุช ุ ุณููุธุฑ ุจุนูุงูุฉ ูู ุฃุญุฏ ุงูููููุงุช ุงูุฑุฆูุณูุฉ ูู ุงูุญุงููุฉ - ูุณุงุญุงุช ุงูุฃุณูุงุก. ูู ูุฐู ุงูุนูููุฉ ุ ุณูููู ุจุฅูุดุงุก ุงุณุชูุณุงุฎ ุฃุจุณุท docker run...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุบูุต ุงูุนููู ูู ูุณุงุญุงุช ุฃุณูุงุก Linux</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458462/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุดูุฑุงุช ุ ุณููุธุฑ ุจุนูุงูุฉ ูู ุฃุญุฏ ุงูููููุงุช ุงูุฑุฆูุณูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญุงููุฉ</a> - ูุณุงุญุงุช ุงูุฃุณูุงุก.  ูู ูุฐู ุงูุนูููุฉ ุ ุณูููู ุจุฅูุดุงุก ุงุณุชูุณุงุฎ ุฃุจุณุท <code>docker run</code> - ุจุฑูุงูุฌูุง ุงูุฎุงุต ุ ูุงูุฐู ุณูุฃุฎุฐ ุงูุฃูุฑ (ุฅูู ุฌุงูุจ ุงูุญุฌุฌ ุงูุฎุงุตุฉ ุจู ุ ุฅู ูุฌุฏุช) ุนูุฏ ุงูุฅุฏุฎุงู ูุณุน ุงูุญุงููุฉ ูุชูููุฐู ุ ุจูุนุฒู ุนู ุจููุฉ ุงููุธุงู ุ ุนูู ุบุฑุงุฑ ุงูุทุฑููุฉ ุงูุชู ุณุชููุฐ ุจูุง <code>docker run</code> ูุชุดุบูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุตูุฑุฉ</a> . <a name="habracut"></a></p><br><h2 id="chto-takoe-namespace" style=";text-align:right;direction:rtl">  ูุง ูู ูุณุงุญุฉ ุงูุงุณูุ </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุงุญุฉ ุงุณู Linux</a> ูู ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงูููุงุฑุฏ ูู ูุธุงู ุงูุชุดุบูู.  ูููููุง ุงูุชูููุฑ ูู ูุณุงุญุฉ ุงูุงุณู ููุฑุจุน.  ูุญุชูู ูุฐุง ุงููุฑุจุน ุนูู ููุงุฑุฏ ุงููุธุงู ุงูุชู ุชุนุชูุฏ ุนูู ููุน ุงููุฑุจุน (ูุณุงุญุฉ ุงูุงุณู).  ููุฌุฏ ุญุงูููุง ุณุจุนุฉ ุฃููุงุน ูู ูุณุงุญุงุช ุงูุฃุณูุงุก: Cgroups ู IPC ู Network ู Mount ู PID ู User ู UTS. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ ุชุชุถูู ูุณุงุญุฉ ุงุณู ุงูุดุจูุฉ ููุงุฑุฏ ุงููุธุงู ุงููุฑุชุจุทุฉ ุจุงูุดุจูุฉ ุ ูุซู ูุงุฌูุงุช ุงูุดุจูุฉ (ูุซู <code>wlan0</code> ุ <code>eth0</code> ) ุ ูุฌุฏุงูู ุงูุชูุฌูู ุ ููุง ุฅูู ุฐูู ุ ุชุชุถูู ูุณุงุญุฉ ุงุณู Mount ุงููููุงุช ูุงูุฏูุงุฆู ูู ุงููุธุงู ุ ููุญุชูู PID ุนูู ูุนุฑูุงุช ุงูุนูููุฉ ุ ููุง ุฅูู ุฐูู. .  ูุจุงูุชุงูู ุ ูููู ุฃู ูุญุชูู <code>wlan0</code> ูู ูุณุงุญุฉ ุงุณู ุงูุดุจูุฉ <strong>A</strong> ู <strong>B</strong> (ุงููุทุงุจูุงู ููุฑุจุนูู ูู ููุณ ุงูููุน ูู ุงูููุงุณ ูุฏููุง) ุนูู ููุงุฑุฏ ูุฎุชููุฉ - ุฑุจูุง ูุญุชูู <strong>A</strong> ุนูู <code>wlan0</code> ุ ุจูููุง ูุญุชูู <strong>B</strong> ุนูู <code>eth0</code> ููุณุฎุฉ ูููุตูุฉ ูู ุฌุฏูู ุงูุชูุฌูู. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุนุชุจุฑ ูุณุงุญุงุช ุงูุฃุณูุงุก ุจุนุถ ุงูููุฒุงุช ุฃู ุงูููุชุจุงุช ุงูุฅุถุงููุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุซุจูุชูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ูุฏูุฑ ุงูุญุฒูุฉ apt.  ูุชู ุชูููุฑูุง ุจูุงุณุทุฉ kernel Linux ููุณูุง ููู ุจุงููุนู ุถุฑูุฑุฉ ูุชุดุบูู ุฃู ุนูููุฉ ุนูู ุงููุธุงู.  ูู ุฃู ููุทุฉ ุฒูููุฉ ูุญุฏุฏุฉ ุ ุชูุชูู ุฃู ุนูููุฉ <strong>P</strong> ุฅูู ูุซูู ูุงุญุฏ ุชูุงููุง ูู ูุณุงุญุฉ ูู ููุน.  ูุฐูู ุ ุนูุฏูุง ูุญุชุงุฌ ุฅูู ููู "ุชุญุฏูุซ ุฌุฏูู ุงูุชูุฌูู ูู ุงููุธุงู" ุ ูุฅู Linux ูุนุฑุถ ุนููู ูุณุฎุฉ ูู ุฌุฏูู ุชูุฌูู ูุณุงุญุฉ ุงูุงุณู ุงูุฐู ููุชูู ุฅููู ูู ุชูู ุงููุญุธุฉ. </p><br><h2 id="dlya-chego-eto-nuzhno" style=";text-align:right;direction:rtl">  ูุง ูุฐุงุ </h2><br><p style=";text-align:right;direction:rtl">  ุจุงูุชุฃููุฏ ูู ุฃุฌู ูุง ุดูุก ... ุจุงูุทุจุน ุ ููุช ุฃูุฒุญ ููุท.  ูุงุญุฏุฉ ูู ุงูุฎุตุงุฆุต ุงูุฑุงุฆุนุฉ ูููุฑุจุนุงุช ูู ุฃูู ููููู ุฅุถุงูุฉ ูุฅุฒุงูุฉ ุฃุดูุงุก ูู ุงููุฑุจุน ุ ููุฐุง ูู ูุคุซุฑ ุนูู ูุญุชููุงุช ุงูุตูุงุฏูู ุงูุฃุฎุฑู.  ูุฐู ูู ููุณ ุงูููุฑุฉ ูุน ูุณุงุญุงุช ุงูุฃุณูุงุก - ููุฏ ุชุชุนุฑุถ ุนูููุฉ <strong>P</strong> "ููุฌููู" ูุชููุฐ <code>sudo rm โrf /</code> ุ ูููู ูู ุชุชุฃุซุฑ ุนูููุฉ <strong>Q</strong> ุงูุฃุฎุฑู ุงูุชู ุชูุชูู ุฅูู ูุณุงุญุฉ ุฃุฎุฑู ูู ุฃุณูุงุก Mount ุ ูุฃููุง ุชุณุชุฎุฏู ูุณุฎูุง ูููุตูุฉ ูู ูุฐู ุงููููุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃู ุงูููุฑุฏ ุงูููุฌูุฏ ูู ูุณุงุญุฉ ุงูุงุณู ููุณ ุจุงูุถุฑูุฑุฉ ูุณุฎุฉ ูุฑูุฏุฉ.  ูู ุจุนุถ ุงูุญุงูุงุช ุงูุชู ุญุฏุซุช ุนู ูุตุฏ ุฃู ุจุณุจุจ ุฎุฑู ุฃููู ุ ุณุชุญุชูู ูุณุญุชุงู ุฃู ุฃูุซุฑ ุนูู ููุณ ุงููุณุฎุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุณ ุงูููู.  ูุจุงูุชุงูู ุ ูุฅู ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง ุนูู ูุฐุง ุงูููู ูู ูุณุงุญุฉ ุงุณู Mount ูุงุญุฏุฉ ุณุชููู ูู ุงููุงูุน ูุฑุฆูุฉ ูู ุฌููุน ูุณุงุญุงุช ุฃุณูุงุก Mount ุงูุฃุฎุฑู ุ ูุงูุชู ุชุดูุฑ ุฅูููุง ุฃูุถูุง.  ูุฐูู ุ ุณูุชุฎูู ุนู ุชุดุจูู ุงูุฏุฑุฌ ุ ุญูุซ ูุง ูููู ุฃู ูููู ุงูุนูุตุฑ ูู ุตูุฏูููู ูุฎุชูููู ูู ููุณ ุงูููุช. </p><br><h2 id="ogranichenie---eto-zabota" style=";text-align:right;direction:rtl">  ุชูููุฏ ูู ูุตุฏุฑ ููู </h2><br><p style=";text-align:right;direction:rtl">  ูููููุง ุฃู ูุฑู ูุณุงุญุงุช ุงูุฃุณูุงุก ุงูุชู ุชูุชูู ุฅูููุง ุงูุนูููุฉ!  ุนุงุฏุฉู ููุธุงู Linux ุ ุชุธูุฑ ููููุงุช ูู ุงูุฏููู <code>/proc/$pid/ns</code> ููุฐู ุงูุนูููุฉ ูุน ูุนุฑู ุงูุนูููุฉ <code>$pid</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ls -l /proc/$$/ns total 0 lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 cgroup -&gt; cgroup:[4026531835] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 ipc -&gt; ipc:[4026531839] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 mnt -&gt; mnt:[4026531840] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 net -&gt; net:[4026531957] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 pid -&gt; pid:[4026531836] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 user -&gt; user:[4026531837] lrwxrwxrwx 1 iffy iffy 0 May 18 12:53 uts -&gt; uts:[4026531838]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ูุชุญ ูุญุทุฉ ุฃุฎุฑู ุ ูุชูููุฐ ููุณ ุงูุฃูุฑ ููุฐุง ููุจุบู ุฃู ูููุฑ ูู ููุณ ุงููุชูุฌุฉ.  ูุฐุง ูุฃูู ุ ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุฌุจ ุฃู ุชูุชูู ุงูุนูููุฉ ุฅูู ูุณุงุญุฉ ุงุณู ูุนููุฉ (ูุณุงุญุฉ ุงูุงุณู) ูุฅูู ุฃู ูุญุฏุฏ ุจุดูู ูุงุถุญ ุฃู ูููุง ุ ูุถูููุง Linux ุฅูู ูุณุงุญุงุช ุงูุฃุณูุงุก ุจุดูู ุงูุชุฑุงุถู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุดุงุฑู ููููุง ูู ูุฐุง.  ูู ุงููุญุทุฉ ุงูุซุงููุฉ ุ ูููููุง ุฃู ููุนู ุดูุฆูุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ hostname iffy $ sudo unshare -u bash $ ls -l /proc/$$/ns lrwxrwxrwx 1 root root 0 May 18 13:04 cgroup -&gt; cgroup:[4026531835] lrwxrwxrwx 1 root root 0 May 18 13:04 ipc -&gt; ipc:[4026531839] lrwxrwxrwx 1 root root 0 May 18 13:04 mnt -&gt; mnt:[4026531840] lrwxrwxrwx 1 root root 0 May 18 13:04 net -&gt; net:[4026531957] lrwxrwxrwx 1 root root 0 May 18 13:04 pid -&gt; pid:[4026531836] lrwxrwxrwx 1 root root 0 May 18 13:04 user -&gt; user:[4026531837] lrwxrwxrwx 1 root root 0 May 18 13:04 uts -&gt; uts:[4026532474] $ hostname iffy $ hostname coke $ hostname coke</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุฃูุฑ <code>unshare</code> ุจุชุดุบูู ุงูุจุฑูุงูุฌ (ุงุฎุชูุงุฑู) ูู ูุณุงุญุฉ ุงูุงุณู ุงูุฌุฏูุฏุฉ.  ูุฎุจุฑูุง ุงูุนูู <code>-u</code> ุจุชุดุบูู <code>bash</code> ูู ูุณุงุญุฉ ุงูุงุณู UTS ุงูุฌุฏูุฏุฉ.  ูุงุญุธ ุฃู ุนูููุฉ <code>bash</code> ุงูุฌุฏูุฏุฉ ุชุดูุฑ ุฅูู ููู <code>uts</code> ุขุฎุฑ ุ ุจูููุง ุชุธู ุฌููุน ุงูุนูุงุตุฑ ุงูุฃุฎุฑู ููุง ูู. </p><br><blockquote style=";text-align:right;direction:rtl">  <em>ุนุงุฏุฉู ูุง ูุชุทูุจ ุฅูุดุงุก ูุณุงุญุงุช ุฃุณูุงุก ุฌุฏูุฏุฉ ูุตููุงู ูููุณุชุฎุฏู ุงูุฎุงุฑู.</em>  <code>unshare</code> <em>ุ</em> <em>ุณูู ููุชุฑุถ ุฃู ููุง ูู ุงููุดุงุฑูุฉ</em> <em>ุบูุฑ ุงููููุฐุฉ</em> <code>sudo</code> <em>ูุชู ุชูููุฐููุง ุจุงุณุชุฎุฏุงู</em> <code>sudo</code> . </blockquote><p style=";text-align:right;direction:rtl">  ุฃุญุฏ ุนูุงูุจ ูุง ูููุง ุจู ููุชู ูู ุฃูู ูููููุง ุงูุขู ุชุบููุฑ ุงุณู ูุถูู ุงููุธุงู ูู ุนูููุฉ bash ุงูุฌุฏูุฏุฉ ุงูุฎุงุตุฉ ุจูุง ููู ูุคุซุฑ ูุฐุง ุนูู ุฃู ุนูููุฉ ุฃุฎุฑู ูู ุงููุธุงู.  ููููู ุงูุชุญูู ูู ุฐูู ุนู ุทุฑูู ุชุดุบูู <code>hostname</code> ูู ุฃูู ูุญุทุฉ ูุฑุคูุฉ ุฃู ุงุณู ุงููุถูู ูู ูุชุบูุฑ ููุงู. </p><br><h2 id="no-chto-naprimer-takoe-konteyner" style=";text-align:right;direction:rtl">  ูููู ูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุญุงููุฉุ </h2><br><p style=";text-align:right;direction:rtl">  ูุฃูู ุงูุขู ุฃู ูููู ูุฏูู ููุฑุฉ ุนูุง ูููู ุฃู ุชูุนูู ูุณุงุญุฉ ุงูุงุณู.  ููููู ุงูุชุฑุงุถ ุฃู ุงูุญุงููุงุช ูู ุนูููุงุช ุนุงุฏูุฉ ุจุดูู ุฃุณุงุณู ูุน ูุณุงุญุงุช ุฃุณูุงุก ูุฎุชููุฉ ุนู ุงูุนูููุงุช ุงูุฃุฎุฑู ุ ูุณูู ุชููู ุนูู ุญู.  ูู ุงููุงูุน ุ ูุฐู ุญุตุฉ.  ูุง ูุดุชุฑุท ูุฌูุฏ ุญุงููุฉ ุจุฏูู ุญุตุต ูู ูุณุงุญุฉ ุงุณู ูุฑูุฏุฉ ููู ููุน - ูููููุง ูุดุงุฑูุฉ ุจุนุถูุง. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชูุชุจ <code>docker run --net=host redis</code> ุ ูู ูุง ุนููู ูุนูู ูู ุฅุฎุจุงุฑ ุงูุนุงูู ุจุฃู ูุง ููุดุฆ ูุณุงุญุฉ ุงุณู ุดุจูุฉ ุฌุฏูุฏุฉ ูุนูููุฉ redis.  ูููุง ุฑุฃููุง ุ ุณูุถูู Linux ูุฐู ุงูุนูููุฉ ููุดุงุฑู ูู ูุณุงุญุฉ ุงุณู ุงูุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูุซู ุฃู ุนูููุฉ ุนุงุฏูุฉ ุฃุฎุฑู.  ูุจุงูุชุงูู ุ ูู ูุฌูุฉ ูุธุฑ ุงูุดุจูุฉ ุ ูุฅู ุนูููุฉ redis ูู ููุณูุง ุชูุงููุง ูุซู ุฃู ุดุฎุต ุขุฎุฑ.  ูุฐุง ููุณ ูุฌุฑุฏ ุฎูุงุฑ ูุชูููู ุงูุดุจูุฉ ุ ุญูุซ ูุชูุญ ูู <code>docker run</code> ุฅุฌุฑุงุก ูุซู ูุฐู ุงูุชุบููุฑุงุช ููุนุธู ูุณุงุญุงุช ุงูุฃุณูุงุก ุงูููุฌูุฏุฉ.  ูุฐุง ูุทุฑุญ ุงูุณุคุงู ุ ูุง ูู ุงูุญุงููุฉุ  ูู ููุงู ุญุงููุฉ ุชุณุชุฎุฏู ุนูููุฉ ุชุณุชุฎุฏู ูู ูุณุงุญุฉ ุงูุงุณู ุงูุดุงุฆุนุฉ ูุง ุนุฏุง ูุงุญุฏุฉุ  containers \ _ (ใ) _ / ยฏ ูููุฐุฌูุงู ุ ุชุฃุชู ุงูุญุงููุงุช ูุน ููููู <strong>ุงูุนุฒู</strong> ุงูุฐู ูุชู ุชุญูููู ูู ุฎูุงู ูุณุงุญุงุช ุงูุฃุณูุงุก: ูููุง ูู ุนุฏุฏ ูุณุงุญุงุช ุงูุฃุณูุงุก ูุงูููุงุฑุฏ ุงูุชู ุชุดุงุฑููุง ุงูุนูููุฉ ูุน ุงูุขุฎุฑูู ุ ูููุง ูุงูุช ูุนุฒููุฉ ููู ูุง ููู ุญููุง. </p><br><h2 id="izolirovanie" style=";text-align:right;direction:rtl">  ุนุฒู </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฒุก ุงููุชุจูู ูู ูุฐุง ุงูููุดูุฑ ุ ุณูุถุน ุงูุฃุณุงุณ ูุจุฑูุงูุฌูุง ุ ูุงูุฐู <code>isolate</code> ุนููู <code>isolate</code> .  ุชุฃุฎุฐ <code>isolate</code> ุงูุฃูุฑ ููุณูุทุงุช ูุชุจุฏุฃ ุชุดุบููู ูู ุนูููุฉ ุฌุฏูุฏุฉ ุ ูุนุฒููุฉ ุนู ุจููุฉ ุงููุธุงู ููุญุฏูุฏุฉ ุจูุณุงุญุงุช ุงูุฃุณูุงุก ุงูุฎุงุตุฉ ุจูุง.  ูู ุงูููุดูุฑุงุช ุงูุชุงููุฉ ุ ุณููุธุฑ ูู ุฅุถุงูุฉ ุฏุนู ููุณุงุญุงุช ุงูุฃุณูุงุก ุงููุฑุฏูุฉ ูุฃูุฑ ุงูุนูููุฉ ุงูุฐู ูุจุฏุฃ <code>isolate</code> . </p><br><p style=";text-align:right;direction:rtl">  ููููุง ููุชุทุจูู ุ ุณูุฑูุฒ ุนูู ูุณุงุญุงุช ุฃุณูุงุก ุงููุณุชุฎุฏููู ูุงูุดุจูุงุช ููุนุฑู PID ูุงูุดุจูุฉ.  ุณูููู ุงูุจุงูู ุณูู ุงูุชูููุฐ ุจุนุฏ ุงูุงูุชูุงุก (ูู ุงูุญูููุฉ ุ ุณูุถูู ุฏุนู UTS ููุง ูู ุงูุชูููุฐ ุงูุฃููู ููุจุฑูุงูุฌ).  ูุงููุธุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู Cgroups ุ ูู ุฎุงุฑุฌ ูุทุงู ูุฐู ุงูุณูุณูุฉ (ุฏุฑุงุณุฉ cgroups ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ุขุฎุฑ ูู ุงูุญุงููุงุช</a> ุงููุณุชุฎุฏูุฉ ููุชุญูู ูู ููุฏุงุฑ ุงูููุงุฑุฏ ุงูุชู ูููู ุฃู ุชุณุชุฎุฏููุง ุงูุนูููุฉ). </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุตุจุญ ูุณุงุญุงุช ุงูุฃุณูุงุก ุณุฑูุนุฉ ุฌุฏูุง ูููุงู ุงูุนุฏูุฏ ูู ุงูุทุฑู ุงููุฎุชููุฉ ุงูุชู ููููู ุงุณุชุฎุฏุงููุง ุนูุฏ ุงุณุชูุดุงู ูู ูุณุงุญุฉ ุงุณู ุ ููู ูุง ูููููุง ุชุญุฏูุฏูุง ุฌููุนูุง ูุฑุฉ ูุงุญุฏุฉ.  ุณููุงูุด ููุท ุงูุทุฑู ุฐุงุช ุงูุตูุฉ ุจุงูุจุฑูุงูุฌ ุงูุฐู ูููู ุจุชุทููุฑู.  ุณูุจุฏุฃ ูู ููุดูุฑ ุจุจุนุถ ุงูุชุฌุงุฑุจ ูู ูุญุฏุฉ ุงูุชุญูู ุนูู ูุณุงุญุฉ ุงูุงุณู ุงููุนููุฉ ูููู ุงูุฎุทูุงุช ุงููุทููุจุฉ ูุชูููู ูุณุงุญุฉ ุงูุงุณู ูุฐู.  ูุชูุฌุฉ ูุฐูู ุ ุณูููู ูุฏููุง ุจุงููุนู ููุฑุฉ ุนูุง ูุฑูุฏ ุชุญูููู ุ ููู ุซู ุณูุชุจุนู ุงูุชูููุฐ ุงูููุงุจู <code>isolate</code> . </p><br><blockquote style=";text-align:right;direction:rtl">  ูุชุฌูุจ ุงูุชุญููู ุงูุฒุงุฆุฏ ููููุฏ ุนูู ุงููุดุงุฑูุงุช ุ ูู ูุฏุฑุฌ ุฃุดูุงุก ูุซู ุงููุธุงุฆู ุงูุฅุถุงููุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ ูููู ุงูุชูููุฐ.  ููููู ุงูุนุซูุฑ ุนูู ุดูุฑุฉ ุงููุตุฏุฑ ุงููุงููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง ุนูู ุฌูุซุจ</a> . </blockquote><br><h2 id="realizaciya" style=";text-align:right;direction:rtl">  ุชุทุจูู </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ุงูุนุซูุฑ</a> ุนูู ุงูููุฏ ุงููุตุฏุฑู ููุฐุง ุงูููุดูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .  ุณูููู ุชุทุจูููุง ุงููุนุฒูู ุจุฑูุงูุฌูุง ุจุณูุทูุง ููุฑุฃ ุณุทุฑูุง ุจุฃูุฑ ูู stdin ููููู ุจุงุณุชูุณุงุฎ ุนูููุฉ ุฌุฏูุฏุฉ ุชููุฐูุง ุจุงุณุชุฎุฏุงู ุงููุณุงุฆุท ุงููุญุฏุฏุฉ.  ุณูุชู ุชุดุบูู ุงูุนูููุฉ ุงููุณุชูุณุฎุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ ูู ูุณุงุญุฉ ุงูุงุณู ุงูุฎุงุตุฉ ุจู UTS ุจููุณ ุงูุทุฑููุฉ ุงูุชู ูููุง ุจูุง ูุน <code>unshare</code> .  ูู ุงูููุดูุฑุงุช ุงูุชุงููุฉ ุ ุณูุฑู ุฃู ูุณุงุญุงุช ุงูุฃุณูุงุก ูุง ุชุนูู ุจุงูุถุฑูุฑุฉ (ุฃู ุนูู ุงูุฃูู ุชููุฑ ุนุฒูุฉ) ูู ุงููุฑุจุน ูุณูุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุจุนุถ ุงูุชููููุงุช ุจุนุฏ ุฅูุดุงุฆูุง (ูููู ูุจู ุชุดุบูู ุงูุฃูุฑ ูุนูููุง) ุ ุจุญูุซ ูุนูู ุงูุฃูุฑ ุจุงููุนู ุจูุนุฒู. </p><br><p style=";text-align:right;direction:rtl">  ุชุชุทูุจ ุชุฑููุจุฉ ุชูููู ูุณุงุญุฉ ุงูุงุณู ูุฐู ุจุนุถ ุงูุชูุงุนู ุจูู ุนูููุฉ <code>isolate</code> ุงูุฑุฆูุณูุฉ ูุงูุนูููุฉ ุงููุฑุนูุฉ ููุฃูุฑ ุงููุทููุจ ุชุดุบููู.  ูุชูุฌุฉ ูุฐูู ุ ุณูููู ุฌุฒุก ูู ุงูุนูู ุงูุฑุฆูุณู ููุง ูู ุชูููู ููุงุฉ ุงูุงุชุตุงู ุจูู ููุชุง ุงูุนูููุชูู - ูู ุญุงูุชูุง ุ ุณูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฌูู Linux</a> ุจุณุจุจ ุจุณุงุทุชู. </p><br><p style=";text-align:right;direction:rtl">  ูุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุซูุงุซุฉ ุฃุดูุงุก: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ุนูููุฉ <code>isolate</code> ุฃุณุงุณูุฉ ุชููู ุจูุฑุงุกุฉ ุงูุจูุงูุงุช ูู stdin. </li><li style=";text-align:right;direction:rtl">  ุงุณุชูุณุงุฎ ุนูููุฉ ุฌุฏูุฏุฉ ุณุชููู ุจุชุดุบูู ุงูุฃูุฑ ูู ูุณุงุญุฉ ุงุณู UTS ุงูุฌุฏูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ูู ุจุชูููู ุชูุฌูู ุงูุฅุฎุฑุงุฌ ุจุญูุซ ุชุจุฏุฃ ุนูููุฉ ุชูููุฐ ุงูุฃูุฑ ูู ุงูุชุดุบูู ููุท ุจุนุฏ ุชููู ุฅุดุงุฑุฉ ูู ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ ุจุฃู ุชูููู ูุณุงุญุฉ ุงูุงุณู ูุฏ ุงูุชูู. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุฐู ูู ุงูุนูููุฉ ุงูุฃุณุงุณูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **argv)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;params, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(struct params)); parse_args(argc, argv, &amp;params); <span class="hljs-comment"><span class="hljs-comment">//         . if (pipe(params.fd) &lt; 0) die("Failed to create pipe: %m"); //   . int clone_flags = SIGCHLD | CLONE_NEWUTS ; int cmd_pid = clone(cmd_exec, cmd_stack + STACKSIZE, clone_flags, &amp;params); if (cmd_pid &lt; 0) die("Failed to clone: %m\n"); //      . int pipe = params.fd[1]; //      namespace ... //   ,     . if (write(pipe, "OK", 2) != 2) die("Failed to write to pipe: %m"); if (close(pipe)) die("Failed to close pipe: %m"); if (waitpid(cmd_pid, NULL, 0) == -1) die("Failed to wait pid %d: %m\n", cmd_pid); return 0; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุญุธ <code>clone_flags</code> ุงูุชู <code>clone_flags</code> ุฅูู ููุงููุฉ <code>clone</code> ูุฏููุง.  ุชุฑู ูู ูู ุณูู ูุฅูุดุงุก ุนูููุฉ ูู ูุณุงุญุฉ ุงูุงุณู ุงูุฎุงุตุฉ ุจูุงุ  ูู ูุง ูุญุชุงุฌ ุฅูู ุงูููุงู ุจู ูู ุชุนููู ุนูุงูุฉ ูููุน ูุณุงุญุฉ ุงูุงุณู (ุนูุงูุฉ <code>CLONE_NEWUTS</code> ุชุชูุงูู ูุน ูุณุงุญุฉ ุงุณู UTS) ุ ูุณูููู Linux ุจุงูุจุงูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุชููุน ุนูููุฉ ุงูุฃูุฑ ุฅุดุงุฑุฉ ูุจู ุฃู ุชุจุฏุฃ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmd_exec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *arg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   cmd   isolate . if (prctl(PR_SET_PDEATHSIG, SIGKILL)) die("cannot PR_SET_PDEATHSIG for child process: %m\n"); struct params *params = (struct params*) arg; //   ' '   . await_setup(params-&gt;fd[0]); char **argv = params-&gt;argv; char *cmd = argv[0]; printf("===========%s============\n", cmd); if (execvp(cmd, argv) == -1) die("Failed to exec %s: %m\n", cmd); die("ยฏ\\_(ใ)_/ยฏ"); return 1; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูููููุง ูุญุงููุฉ ุชุดุบูู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ./isolate sh ===========sh============ $ ls isolate isolate.c isolate.o Makefile $ hostname iffy $ hostname coke $ hostname coke <span class="hljs-comment"><span class="hljs-comment">#     ,     </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุฏ <code>isolate</code> ุงูุขู ุฃูุซุฑ ูู ูุฌุฑุฏ ุจุฑูุงูุฌ ูููู ุจุจุณุงุทุฉ ุจุชุดููู ุงููุฑูู (ูุฏููุง UTS ูุนูู ูุตุงูุญูุง).  ูู ุงูููุดูุฑ ุงูุชุงูู ุ ุณูุชุฎุฐ ุฎุทูุฉ ุฃุฎุฑู ุนู ุทุฑูู ูุญุต ูุณุงุญุงุช ุฃุณูุงุก ุงููุณุชุฎุฏููู ูุฌุนู <code>isolate</code> ุชูููุฐ ุงูุฃูุฑ ูู ูุณุงุญุฉ ุงุณู ุงููุณุชุฎุฏู ุงูุฎุงุตุฉ ุจู.  ููุงู ุณูุฑู ุฃููุง ูู ุงููุงูุน ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุจุนุถ ุงูุฃุนูุงู ูู ุฃุฌู ุงูุญุตูู ุนูู ูุณุงุญุฉ ุงุณู ูุงุจูุฉ ููุงุณุชุฎุฏุงู ุญูุซ ูููู ุชูููุฐ ุงูุฃูุฑ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458462/">https://habr.com/ru/post/ar458462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458450/index.html">ุฎุตุงุฆุต ุงูุญูุงุณูุจ ุงููููููุฉ</a></li>
<li><a href="../ar458452/index.html">ููููุฉ ุนูู ูุทุจุฎ ููุชุจู ูู ุฎูุงู ููุฌ ุงูุจูุงูุฉ</a></li>
<li><a href="../ar458454/index.html">ุฃูููุณู ุณุงููุงุชูู: ููุงุฐุฌ ุงูุฅูุชุฑูุช ูุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ</a></li>
<li><a href="../ar458458/index.html">ูุงููุฑุงุช ุงูุนูู - ุซูุฑุฉ ุตุงูุชุฉ (ูุชู ุณุชุดุงูุฏ ุงูุฑูุจูุชุงุช) ุงูุฌุฒุก 2</a></li>
<li><a href="../ar458460/index.html">ุฃุฎุจุงุฑ ูู ุฎุฑูุทุฉ ุงูุดุงุฑุน ุงูููุชูุญ ุฑูู 466 (06/18/2019 - 06/26/2019)</a></li>
<li><a href="../ar458464/index.html">ุฑุงุจุท ุฌูุฌุงุจุช 3 ูู ุนูู ุฃุฌูุฒุฉ ุงูููุฏู ุงูููุฒุฑูุฉ</a></li>
<li><a href="../ar458468/index.html">ููู ุชุฏูุฑ ุงุฌุชูุงุนูุง ุฑุงุฆุนูุง ูู Kanbanุ</a></li>
<li><a href="../ar458470/index.html">ุงูุชุฑููุจ ุ ุฃู ูุง ุชุญุชุงุฌ ุฅูู ูุนุฑูุชู ูุชุตุจุญ ููุงู ุงูุณุทุญ. ุงูุฌุฒุก 2. ุฃููุนุฉ ูุงูููุงู</a></li>
<li><a href="../ar458472/index.html">ุชุฌููุน ุชุตููู ุงูููุงุทู ุจุทุฑููุฉ ุงูุฅููุงูุงุช ุงูุญุฑุงุฑูุฉ ุจุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูููุชูุญุฉ</a></li>
<li><a href="../ar458474/index.html">ุฃูุถู ุงูุชูุงุฑูุฑ ูุน HighLoad ++ 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>