<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ…¿ï¸ ğŸš£ğŸ¼ ğŸ–ï¸ æœ±è‰å¨… è„šæœ¬å’Œè§£æå‘½ä»¤è¡Œå‚æ•° ğŸ“‡ ğŸ•ºğŸ¼ ğŸ‘ˆğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ç¼–ç¨‹è¯­è¨€Juliaã€‚ ç”±äºåªéœ€è¦é’ˆå¯¹ä¸€ç§ä¸“æ³¨äºæ•°æ®åˆ†æå’Œå¤„ç†çš„è¯­è¨€ä½¿ç”¨æ‰¹å¤„ç†æ“ä½œæ¨¡å¼ï¼Œå› æ­¤è¯·è€ƒè™‘ä½¿ç”¨Juliaè¯­è¨€å®ç°è„šæœ¬å¹¶å°†å‚æ•°ä»å‘½ä»¤è¡Œä¼ é€’ç»™å®ƒä»¬çš„åŠŸèƒ½ã€‚ å¯¹äºæŸäººæ¥è¯´ï¼Œè¿™ä¸ªä¸»é¢˜ä¼¼ä¹æœ‰äº›é™ˆè¯æ»¥è°ƒï¼Œä½†æ˜¯ï¼Œé‰´äºè¯¥è¯­è¨€çš„æ–°é¢–æ€§ï¼Œæˆ‘å¸Œæœ›ä»¥Juliaå‘ˆç°çš„æœ‰å…³è§£æå‘½ä»¤è¡Œå‚æ•°å’Œåº“çš„æ–¹æ³•çš„ç®€è¦æ¦‚è¿°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æœ±è‰å¨… è„šæœ¬å’Œè§£æå‘½ä»¤è¡Œå‚æ•°</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430942/"><p><img src="https://habrastorage.org/webt/pi/ts/0a/pits0aw00iivzdctpqqr82w5hww.png"><br> æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ç¼–ç¨‹è¯­è¨€Juliaã€‚ ç”±äºåªéœ€è¦é’ˆå¯¹ä¸€ç§ä¸“æ³¨äºæ•°æ®åˆ†æå’Œå¤„ç†çš„è¯­è¨€ä½¿ç”¨æ‰¹å¤„ç†æ“ä½œæ¨¡å¼ï¼Œå› æ­¤è¯·è€ƒè™‘ä½¿ç”¨Juliaè¯­è¨€å®ç°è„šæœ¬å¹¶å°†å‚æ•°ä»å‘½ä»¤è¡Œä¼ é€’ç»™å®ƒä»¬çš„åŠŸèƒ½ã€‚ å¯¹äºæŸäººæ¥è¯´ï¼Œè¿™ä¸ªä¸»é¢˜ä¼¼ä¹æœ‰äº›é™ˆè¯æ»¥è°ƒï¼Œä½†æ˜¯ï¼Œé‰´äºè¯¥è¯­è¨€çš„æ–°é¢–æ€§ï¼Œæˆ‘å¸Œæœ›ä»¥Juliaå‘ˆç°çš„æœ‰å…³è§£æå‘½ä»¤è¡Œå‚æ•°å’Œåº“çš„æ–¹æ³•çš„ç®€è¦æ¦‚è¿°ä»ç„¶æœ‰ç”¨ã€‚ </p><a name="habracut"></a><br><p> é¦–å…ˆï¼Œä»‹ç»ä¸€ä¸‹è„šæœ¬çš„åˆ¶ä½œæ–¹å¼ã€‚ ä»»ä½•è„šæœ¬éƒ½ä»¥ç‰¹æ®Šæ ¼å¼çš„è¡Œå¼€å¤´ï¼Œè¯¥è¡ŒæŒ‡ç¤ºè§£é‡Šå™¨ã€‚ è¯¥è¡Œä»¥ç§°ä¸ºShebangçš„åºåˆ—å¼€å¤´ã€‚ å¯¹äºJuliaï¼Œæ­¤è¡Œæ˜¯ï¼š </p><br><pre><code class="plaintext hljs">#!/usr/bin/env julia</code> </pre> <br><p> å½“ç„¶ï¼Œæ‚¨ä¸èƒ½æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†éšåå¿…é¡»ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œè„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">julia .jl</code> </pre> <br><p> å¦å¤–ï¼Œä»»ä½•è„šæœ¬éƒ½å¿…é¡»ä»¥æ¢è¡Œç¬¦ç»“å°¾ã€‚ è¿™æ˜¯POSIXæ ‡å‡†çš„è¦æ±‚ï¼Œå®ƒæ¥è‡ªäºå°†å­—ç¬¦ä¸²å®šä¹‰ä¸ºä»¥æ¢è¡Œç¬¦ç»“å°¾çš„å­—ç¬¦åºåˆ—çš„å­—ç¬¦ä¸²ã€‚ </p><br><p> ä¸ºäº†ç›´æ¥è¿è¡Œè„šæœ¬ï¼Œå®ƒå¿…é¡»å…·æœ‰<code>executable</code>å±æ€§ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ç»ˆç«¯ä¸­æ·»åŠ è¿™æ ·çš„å±æ€§ï¼š </p><br><pre> <code class="plaintext hljs">chmod +x .jl</code> </pre> <br><p> è¿™äº›è§„åˆ™å¯¹æ‰€æœ‰ç°ä»£æ“ä½œç³»ç»Ÿï¼ˆMS Windowsé™¤å¤–ï¼‰å‡æœ‰æ•ˆã€‚ </p><br><h2 id="massiv-args">  ARGSé˜µåˆ— </h2><br><p> è®©æˆ‘ä»¬ç»§ç»­ç¬¬ä¸€ä¸ªä¼ é€’å‚æ•°çš„é€‰é¡¹ã€‚ åœ¨Juliaè„šæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡æ•°ç»„å¸¸é‡Base.ARGSä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ã€‚ è®©æˆ‘ä»¬å‡†å¤‡æœ€ç®€å•çš„è„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">#!/usr/bin/env julia @show typeof(ARGS) @show ARGS</code> </pre> <br><p> è¯¥è„šæœ¬ä»…å°†ARGSæ•°ç»„çš„ç±»å‹å’Œå†…å®¹æ‰“å°åˆ°æ§åˆ¶å°ã€‚ </p><br><p> é€šå¸¸ï¼Œæ–‡ä»¶åä½œä¸ºå‘½ä»¤è¡Œå‚æ•°ä¼ é€’ã€‚ è¿™æ˜¯å¤„ç†ä½œä¸ºå‚æ•°ä¼ é€’çš„æ–‡ä»¶æ¨¡æ¿çš„ç‰¹æ€§ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨å‘½ä»¤<code>./args.jl *.jl</code>è¿è¡Œæˆ‘ä»¬çš„è„šæœ¬å¹¶è·å–ï¼š </p><br><pre> <code class="plaintext hljs">&gt;./args.jl *.jl typeof(ARGS) = Array{String,1} ARGS = ["argparse.jl", "args.jl", "docopt.jl"]</code> </pre><br><p> ç°åœ¨è®©æˆ‘ä»¬ç¨å¾®æ›´æ”¹ä¸€ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼Œç”¨å¼•å·å°†æ©ç æ‹¬èµ·æ¥ï¼š <br>  <code>./args.jl "*.jl"</code> ã€‚ ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š </p><br><pre> <code class="plaintext hljs">&gt;./args.jl "*.jl" typeof(ARGS) = Array{String,1} ARGS = ["*.jl"]</code> </pre> <br><p> æˆ‘ä»¬çœ‹åˆ°æ˜æ˜¾çš„åŒºåˆ«ã€‚ åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«åŒä¸€ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„åç§°ã€‚ åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œè¿™åªæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‘½ä»¤è¡Œçš„åŒä¸€æ©ç ã€‚ è„šæœ¬å…·æœ‰è¿™ç§ä¸åŒè¡Œä¸ºçš„åŸå› æ˜¯ï¼Œè¿è¡Œè„šæœ¬çš„bashè§£é‡Šå™¨ï¼ˆåŠå…¶é™„è¿‘çš„è§£é‡Šå™¨ï¼‰è¯†åˆ«æ–‡ä»¶åæ¨¡æ¿ã€‚ å¯ä»¥åœ¨æœç´¢å¼•æ“ä¸­æ‰¾åˆ°æ›´å¤šæœ‰å…³â€œ Bashæ¨¡å¼åŒ¹é…â€æˆ–â€œ Bashé€šé…ç¬¦â€çš„ä¿¡æ¯ã€‚ æ‰€æœ‰è¿™äº›ç»Ÿç§°ä¸ºGlobsã€‚ </p><br><p> åœ¨æ¨¡æ¿ä¸­ï¼Œå¯ä»¥å±è”½å¤šä¸ªå­—ç¬¦-*ï¼Œå±è”½ä¸€ä¸ªå­—ç¬¦-ï¼Ÿ..æŒ‰èŒƒå›´æœç´¢ï¼Œç”šè‡³å¯ä»¥æŒ‡å®šå¤æ‚çš„ç»„åˆï¼š </p><br><pre> <code class="plaintext hljs">&gt;./args.jl {args,doc}* typeof(ARGS) = Array{String,1} ARGS = ["args.jl", "docopt.jl"]</code> </pre> <br><p> æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§GNU / Linuxå‘½ä»¤è¡Œå·¥å…·æ‘˜è¦ã€‚ </p><br><p> å¦‚æœç”±äºæŸç§åŸå› ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨bashæä¾›çš„globsæœºåˆ¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Globs.jlåŒ…ä»è„šæœ¬ä¸­é€šè¿‡é®ç½©æŸ¥æ‰¾æ–‡ä»¶ã€‚ <br> ä»¥ä¸‹ä»£ç å°†åœ¨å‚æ•°å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°çš„æ‰€æœ‰å†…å®¹è½¬æ¢ä¸ºå•ä¸ªæ–‡ä»¶åæ•°ç»„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºç”¨æˆ·æ˜¯åœ¨å¼•å·ä¸­æŒ‡å®šæ©ç è¿˜æ˜¯åœ¨æ²¡æœ‰å¼•å·çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯ä»…åˆ—å‡ºç°æœ‰æ–‡ä»¶æˆ–ä¸å­˜åœ¨æ–‡ä»¶çš„åç§°ï¼Œéƒ½ä»…å°†å®é™…æ–‡ä»¶æˆ–ç›®å½•çš„åç§°ä¿ç•™åœ¨ç»“æœ<code>filelist</code>æ•°ç»„ä¸­ã€‚ </p><br><pre> <code class="plaintext hljs">using Glob filelist = unique(collect(Iterators.flatten(map(arg -&gt; glob(arg), ARGS))))</code> </pre> <br><p> å®é™…ä¸Šï¼Œè¿™äº›ç®€å•çš„ç¤ºä¾‹æ¼”ç¤ºäº†ARGSæ•°ç»„çš„ç”¨æ³•ï¼Œç¨‹åºå‘˜åœ¨å…¶ä¸­å®ç°äº†ç”¨äºè§£æå‚æ•°çš„æ‰€æœ‰é€»è¾‘ã€‚ å½“å‚æ•°é›†éå¸¸ç®€å•æ—¶ï¼Œé€šå¸¸ä½¿ç”¨æ­¤æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œæ–‡ä»¶ååˆ—è¡¨ã€‚ æˆ–å¯ä»¥é€šè¿‡ç®€å•çš„å­—ç¬¦ä¸²æ“ä½œå¤„ç†çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªé€‰é¡¹ã€‚ å¯¹ARGSå…ƒç´ çš„è®¿é—®ä¸å¯¹ä»»ä½•å…¶ä»–æ•°ç»„çš„å…ƒç´ çš„è®¿é—®ç›¸åŒã€‚ ä»…è®°ä½Juliaä¸­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸º1ã€‚ </p><br><h2 id="paket-argparsejl"> è½¯ä»¶åŒ…ArgParse.jl </h2><br><p> å®ƒæ˜¯ç”¨äºæè¿°å‘½ä»¤è¡Œçš„å±æ€§å’Œé€‰é¡¹çš„çµæ´»å·¥å…·ï¼Œæ— éœ€å®ç°è§£æé€»è¾‘ã€‚ <br> æˆ‘ä»¬å°†ä½¿ç”¨è½¯ä»¶åŒ…æ–‡æ¡£ä¸­ç»è¿‡ç¨å¾®ä¿®æ”¹çš„ç¤ºä¾‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-http</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//carlobaldassi.github.io/ArgParse.jl/stable/</a> ï¼š </p><br><pre> <code class="plaintext hljs">#!/usr/bin/env julia using ArgParse function parse_commandline() s = ArgParseSettings() @add_arg_table s begin "--opt1" help = "an option with an argument" "--opt2", "-o" help = "another option with an argument" arg_type = Int default = 0 "--flag1" help = "an option without argument, ie a flag" action = :store_true "arg1" help = "a positional argument" required = true end return parse_args(s) end function main() @show parsed_args = parse_commandline() println("Parsed args:") for (arg,val) in parsed_args print(" $arg =&gt; ") show(val) println() end end main()</code> </pre> <br><p> å¦‚æœæˆ‘ä»¬åœ¨ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹è¿è¡Œæ­¤è„šæœ¬ï¼Œåˆ™ä¼šè·å¾—æœ‰å…³å…¶ç»„æˆçš„å‚è€ƒä¿¡æ¯çš„è¾“å‡ºï¼š </p><br><pre> <code class="plaintext hljs">&gt;./argparse.jl required argument arg1 was not provided usage: argparse.jl [--opt1 OPT1] [-o OPT2] [--flag1] arg1</code> </pre> <br><p> æ­¤å¤–ï¼Œåœ¨æ–¹æ‹¬å·ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¯é€‰å‚æ•°ã€‚ æ ‡ä¸º<code>arg1</code>çš„å‚æ•°ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬æ›¿ä»£å®ƒçš„å‚æ•°ï¼‰æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ </p><br><p> å†æ¬¡è¿è¡Œå®ƒï¼Œä½†æ˜¯æŒ‡å®šå¿…éœ€çš„å±æ€§<code>arg1</code> ã€‚ </p><br><pre> <code class="plaintext hljs">&gt;./argparse.jl test parsed_args = parse_commandline() = Dict{String,Any}("flag1"=&gt;false,"arg1"=&gt;"test","opt1"=&gt;nothing,"opt2"=&gt;0) Parsed args: flag1 =&gt; false arg1 =&gt; "test" opt1 =&gt; nothing opt2 =&gt; 0</code> </pre> <br><p> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>parsed_args</code>æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼Œå…¶ä¸­é”®æ˜¯æ ¹æ®<code>parse_commandline</code>å‡½æ•°ä¸­å£°æ˜çš„å±æ€§åç§°ï¼Œå…¶å€¼æ˜¯é»˜è®¤è®¾ç½®æˆ–ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°å€¼ä¼ é€’çš„å€¼ã€‚ è€Œä¸”ï¼Œè¿™äº›å€¼å…·æœ‰åœ¨å£°æ˜æœŸé—´æ˜ç¡®æŒ‡å®šçš„ç±»å‹ã€‚ </p><br><p> ä½¿ç”¨<code>@add_arg_table</code>å®<code>@add_arg_table</code>å‚æ•°ã€‚ å¯ä»¥å£°æ˜é€‰é¡¹ï¼š </p><br><pre> <code class="plaintext hljs"> "--opt2", "-o" help = "another option with an argument" arg_type = Int default = 0</code> </pre> <br><p> æˆ–è®ºç‚¹ </p><br><pre> <code class="plaintext hljs"> "arg1" help = "a positional argument" required = true</code> </pre> <br><p> æ­¤å¤–ï¼Œå¯ä»¥æŒ‡å®šæŒ‡ç¤ºå®Œæ•´å’Œç®€çŸ­æ ¼å¼çš„é€‰é¡¹ï¼ˆåŒæ—¶<code>--opt2</code>å’Œ<code>-o</code> ï¼‰ã€‚ æˆ–è€…ï¼Œä»…ä»¥ä¸€ç§å½¢å¼ã€‚ è¯¥ç±»å‹åœ¨<code>arg_type</code>å­—æ®µä¸­æŒ‡å®šã€‚ å¯ä»¥ä½¿ç”¨<code>default = ...</code>è®¾ç½®é»˜è®¤å€¼ã€‚ æ›¿ä»£é»˜è®¤å€¼çš„æ–¹æ³•æ˜¯éœ€è¦ä¸€ä¸ªå‚æ•°<code>required = true</code> ã€‚ <br> å¯ä»¥å£°æ˜è‡ªåŠ¨æ“ä½œï¼Œä¾‹å¦‚ï¼Œæ ¹æ®å‚æ•°çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥åˆ†é…<code>true</code>æˆ–<code>false</code> ã€‚ è¿™æ˜¯é€šè¿‡<code>action = :store_true</code> </p><br><pre> <code class="plaintext hljs"> "--flag1" help = "an option without argument, ie a flag" action = :store_true</code> </pre> <br><p>  <code>help</code>å­—æ®µåŒ…å«å°†åœ¨å‘½ä»¤è¡Œæç¤ºä¸­æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚ <br> å¦‚æœåœ¨å¯åŠ¨æ—¶æŒ‡å®šæ‰€æœ‰å±æ€§ï¼Œåˆ™å¾—åˆ°ï¼š </p><br><pre> <code class="plaintext hljs">&gt;./argparse.jl --opt1 "2+2" --opt2 "4" somearg --flag parsed_args = parse_commandline() = Dict{String,Any}("flag1"=&gt;true,"arg1"=&gt;"somearg","opt1"=&gt;"2+2","opt2"=&gt;4) Parsed args: flag1 =&gt; true arg1 =&gt; "somearg" opt1 =&gt; "2+2" opt2 =&gt; 4</code> </pre> <br><p> ä¸ºäº†ä»Atom / Juno IDEè¿›è¡Œè°ƒè¯•ï¼Œæ‚¨å¯ä»¥åœ¨è„šæœ¬çš„ç¬¬ä¸€è¡Œä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆè™½ç„¶æœ‰äº›è„ä½†å¯ä»¥ä½¿ç”¨ï¼‰æ¥åˆå§‹åŒ–ARGSæ•°ç»„ã€‚ </p><br><pre> <code class="plaintext hljs">if (Base.source_path() != Base.basename(@__FILE__)) vcat(Base.ARGS, ["--opt1", "2+2", "--opt2", "4", "somearg", "--flag"] ) end</code> </pre> <br><p> å®<code>@__FILE__</code>æ˜¯åœ¨å…¶ä¸­éƒ¨ç½²å®çš„æ–‡ä»¶çš„åç§°ã€‚  REPLçš„åç§°ä¸é€šè¿‡<code>Base.source_path()</code>è·å¾—çš„å½“å‰ç¨‹åºæ–‡ä»¶çš„åç§°ä¸åŒã€‚ æ— æ³•<code>Base.ARGS</code>å…¶ä»–å€¼åˆå§‹åŒ–<code>Base.ARGS</code>æ•°ç»„<code>Base.ARGS</code> ï¼Œä½†æ˜¯åŒæ—¶ï¼Œç”±äºæ•°ç»„æœ¬èº«ä¸æ˜¯å¸¸é‡ï¼Œå› æ­¤å¯ä»¥æ·»åŠ æ–°è¡Œã€‚ æ•°ç»„æ˜¯Juliaçš„åˆ—ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨<code>vcat</code> ï¼ˆå‚ç›´ä¸²è”ï¼‰ã€‚ </p><br><p> ä½†æ˜¯ï¼Œåœ¨Junoç¼–è¾‘å™¨çš„è®¾ç½®ä¸­ï¼Œå¯ä»¥è®¾ç½®ç”¨äºè¿è¡Œè„šæœ¬çš„å‚æ•°ã€‚ ä½†æ˜¯å¯¹äºæ¯ä¸ªè°ƒè¯•è„šæœ¬ï¼Œæ¯æ¬¡éƒ½å¿…é¡»æ›´æ”¹å®ƒä»¬ã€‚ </p><br><h2 id="paket-docoptjl"> è½¯ä»¶åŒ…DocOpt.jl </h2><br><p> æ­¤é€‰é¡¹æ˜¯docoptæ ‡è®°è¯­è¨€æ–¹æ³•çš„å®ç°-http://docopt.org/ã€‚ è¯¥è¯­è¨€çš„ä¸»è¦æ€æƒ³æ˜¯ä»¥å½¢å¼å¯¹é€‰é¡¹å’Œå‚æ•°è¿›è¡Œå£°æ˜å¼æè¿°ï¼Œä¹Ÿå¯ä»¥æ˜¯è„šæœ¬çš„å†…éƒ¨æè¿°ã€‚ ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„æ¨¡æ¿è¯­è¨€ã€‚ </p><br><p> æˆ‘ä»¬å°†ä½¿ç”¨è¯¥åŒ…æ–‡æ¡£ä¸­çš„ç¤ºä¾‹<a href="">https://github.com/docopt/DocOpt.jl</a> </p><br><pre> <code class="plaintext hljs">#!/usr/bin/env julia doc = """Naval Fate. Usage: naval_fate.jl ship new &lt;name&gt;... naval_fate.jl ship &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;] naval_fate.jl ship shoot &lt;x&gt; &lt;y&gt; naval_fate.jl mine (set|remove) &lt;x&gt; &lt;y&gt; [--moored|--drifting] naval_fate.jl -h | --help naval_fate.jl --version Options: -h --help Show this screen. --version Show version. --speed=&lt;kn&gt; Speed in knots [default: 10]. --moored Moored (anchored) mine. --drifting Drifting mine. """ using DocOpt # import docopt function args = docopt(doc, version=v"2.0.0") @show args</code> </pre> <br><p>  <code>doc = ...</code>æ˜¯Julia <code>doc</code>å­—ç¬¦ä¸²çš„åˆ›å»ºï¼Œå…¶ä¸­åŒ…å«docoptçš„æ•´ä¸ªå£°æ˜ã€‚ åœ¨ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œçš„ç»“æœå°†æ˜¯ï¼š </p><br><pre> <code class="plaintext hljs">&gt;./docopt.jl Usage: naval_fate.jl ship new &lt;name&gt;... naval_fate.jl ship &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;] naval_fate.jl ship shoot &lt;x&gt; &lt;y&gt; naval_fate.jl mine (set|remove) &lt;x&gt; &lt;y&gt; [--moored|--drifting] naval_fate.jl -h | --help naval_fate.jl --version</code> </pre><br><p> å¦‚æœä½¿ç”¨æç¤ºå¹¶å°è¯•â€œåˆ›å»ºæ–°èˆ¹â€ï¼Œåˆ™å°†è·å¾—å…³è”<code>args</code>æ•°ç»„çš„æ‰“å°è¾“å‡ºï¼Œè¯¥æ•°ç»„æ˜¯ç”±è§£æå‘½ä»¤è¡Œçš„ç»“æœç”Ÿæˆçš„ </p><br><pre> <code class="plaintext hljs">&gt;./docopt.jl ship new Bystriy args = Dict{String,Any}( "remove"=&gt;false, "--help"=&gt;false, "&lt;name&gt;"=&gt;["Bystriy"], "--drifting"=&gt;false, "mine"=&gt;false, "move"=&gt;false, "--version"=&gt;false, "--moored"=&gt;false, "&lt;x&gt;"=&gt;nothing, "ship"=&gt;true, "new"=&gt;true, "shoot"=&gt;false, "set"=&gt;false, "&lt;y&gt;"=&gt;nothing, "--speed"=&gt;"10")</code> </pre> <br><p>  <code>docopt</code>å‡½æ•°å£°æ˜ä¸ºï¼š </p><br><pre> <code class="plaintext hljs">docopt(doc::AbstractString, argv=ARGS; help=true, version=nothing, options_first=false, exit_on_error=true)</code> </pre> <br><p> é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½åå‚æ•°<code>help</code> ï¼Œ <code>version</code> ï¼Œ <code>exit_on_error</code>æŒ‡å®šå‚æ•°å‘½ä»¤è§£æå™¨çš„è¡Œä¸ºã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯-è‹¥è¦å®Œæˆæ‰§è¡Œï¼Œè¯·åœ¨ç‰ˆæœ¬è¯·æ±‚ä¸­ï¼Œåœ¨<code>-h</code>è¯·æ±‚ä¸­è¿”å›æ­¤å¤„æ›¿æ¢çš„å€¼<code>version=â€¦</code>å‘å‡ºå¸®åŠ©ã€‚  <code>options_first</code>ç”¨äºæŒ‡ç¤ºé€‰é¡¹åº”åœ¨ä½ç½®å‚æ•°ä¹‹å‰ã€‚ </p><br><p> ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹è¿™ç§å£°æ˜æ€§è¯­è¨€ä»¥åŠå‚æ•°è§£æå™¨å¯¹è¾“å…¥å€¼çš„ååº”ã€‚ </p><br><p> å£°æ˜ä»¥ä»»æ„æ–‡æœ¬å¼€å¤´ï¼Œé™¤äº†å‘½ä»¤è¡Œæ–‡æœ¬å¤–ï¼Œè¯¥æ–‡æœ¬å¯ä»¥æ˜¯è„šæœ¬æœ¬èº«æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚ æœåŠ¡è¯â€œç”¨æ³•ï¼šâ€å£°æ˜æ­¤è„šæœ¬çš„ç”¨æ³•æ¨¡å¼ã€‚ </p><br><pre> <code class="plaintext hljs">Usage: naval_fate.jl ship new &lt;name&gt;... naval_fate.jl ship &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;]</code> </pre> <br><p> å‚æ•°ä»¥<code>&lt;name&gt;</code> ï¼Œ <code>&lt;x&gt;</code> ï¼Œ <code>&lt;y&gt;</code>çš„å½¢å¼å£°æ˜ã€‚ è¯·æ³¨æ„ï¼Œåœ¨ä¹‹å‰è·å¾—çš„<code>args</code>å…³è”æ•°ç»„ä¸­ï¼Œè¿™äº›å‚æ•°å……å½“é”®ã€‚ æˆ‘ä»¬ä½¿ç”¨å¯åŠ¨è¡¨å•<code>./docopt.jl ship new Bystriy</code> ï¼Œå› æ­¤è·å¾—äº†ä»¥ä¸‹æ˜¾å¼åˆå§‹åŒ–çš„å€¼ï¼š </p><br><pre> <code class="plaintext hljs"> "&lt;name&gt;"=&gt;["Bystriy"], "ship"=&gt;true, "new"=&gt;true,</code> </pre> <br><p> æ ¹æ®docoptè¯­è¨€ï¼Œå¯é€‰å…ƒç´ åœ¨æ–¹æ‹¬å·ä¸­æŒ‡å®šã€‚ ä¾‹å¦‚<code>[--speed=&lt;kn&gt;]</code> ã€‚ å¼ºåˆ¶æ€§å…ƒç´ åœ¨æ‹¬å·ä¸­æŒ‡å®šï¼Œä½†æœ‰ä¸€å®šæ¡ä»¶ã€‚ ä¾‹å¦‚<code>(set|remove)</code>è®¾ç½®å…¶ä¸­ä¹‹ä¸€çš„è¦æ±‚ã€‚ å¦‚æœæŒ‡å®šçš„å…ƒç´ æ²¡æœ‰æ‹¬å·ï¼Œä¾‹å¦‚<code>naval_fate.jl --version</code> ï¼Œåˆ™è¡¨ç¤ºåœ¨æ­¤ç‰¹å®šçš„è¿è¡Œé€‰é¡¹ä¸­ï¼Œ <code>--version</code> <code>naval_fate.jl --version</code>æ˜¯å¿…éœ€çš„é€‰é¡¹ã€‚ </p><br><p> ä¸‹ä¸€éƒ¨åˆ†æ˜¯é€‰é¡¹æè¿°éƒ¨åˆ†ã€‚ å®ƒä»¥â€œé€‰é¡¹ï¼šâ€ä¸€è¯å¼€å¤´ <br> é€‰é¡¹åœ¨å•ç‹¬çš„è¡Œä¸­å£°æ˜ã€‚ è¡Œå¼€å¤´å·¦ä¾§çš„å¡«å……å¾ˆé‡è¦ã€‚ å¯¹äºæ¯ä¸ªé€‰é¡¹ï¼Œæ‚¨éƒ½å¯ä»¥æŒ‡å®šå®Œæ•´å’Œç®€çŸ­å½¢å¼ã€‚ ä»¥åŠå·¥å…·æç¤ºä¸­æ˜¾ç¤ºçš„é€‰é¡¹è¯´æ˜ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€‰é¡¹<code>-h | --help, --version</code>  <code>-h | --help, --version</code>è‡ªåŠ¨è¯†åˆ«ã€‚ å¯¹å®ƒä»¬çš„å“åº”ç”±<code>docopt</code>å‡½æ•°çš„å‚æ•°ç»™å‡ºã€‚ å€¼å¾—è€ƒè™‘çš„æ˜¯å£°æ˜ï¼š </p><br><pre> <code class="plaintext hljs"> --speed=&lt;kn&gt; Speed in knots [default: 10].</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œå½¢å¼<code>...=&lt;kn&gt;</code>å®šä¹‰æŸä¸ªå€¼çš„å­˜åœ¨ï¼Œ <code>[default: 10]</code>å®šä¹‰é»˜è®¤å€¼ã€‚ æˆ‘ä»¬å†æ¬¡è½¬å‘åœ¨<code>args</code>è·å¾—çš„å€¼ï¼š </p><br><pre> <code class="plaintext hljs">"--speed"=&gt;"10"</code> </pre> <br><p> ä¾‹å¦‚ï¼Œä¸ArgParseåŒ…çš„åŸºæœ¬åŒºåˆ«æ˜¯æœªé”®å…¥å€¼ã€‚ å³ï¼Œ <code>default: 10</code>å€¼è®¾ç½®ä¸ºå­—ç¬¦ä¸²â€œ 10â€ã€‚ <br> è‡³äºå…¶ä»–å‚æ•°ï¼Œç”±äºè§£æå‚æ•°è€Œä»¥<code>args</code>å½¢å¼å‡ºç°ï¼Œå› æ­¤æ‚¨åº”æ³¨æ„å®ƒä»¬çš„å€¼ï¼š </p><br><pre> <code class="plaintext hljs"> "remove"=&gt;false, "--help"=&gt;false, "--drifting"=&gt;false, "mine"=&gt;false, "move"=&gt;false, "--version"=&gt;false, "--moored"=&gt;false, "&lt;x&gt;"=&gt;nothing, "shoot"=&gt;false, "set"=&gt;false, "&lt;y&gt;"=&gt;nothing,</code> </pre> <br><p> ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨docoptå£°æ˜ä¸­ä¸ºæ‰€æœ‰ç”¨ä¾‹ç»å¯¹æŒ‡å®šçš„æ¨¡æ¿çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä½¿ç”¨åŸå§‹åç§°è¿›è¡Œåˆ†æçš„ç»“æœã€‚ å‘½ä»¤è¡Œä¸­ä¸å­˜åœ¨çš„æ‰€æœ‰å¯é€‰å‚æ•°åœ¨æ­¤å¤„å‡ä¸ºfalseã€‚ å¯åŠ¨è¡Œ<code>&lt;y&gt;</code>ä¹Ÿç¼ºå°‘å‚æ•°<code>&lt;x&gt;</code> ï¼Œ <code>&lt;y&gt;</code>å¹¶ä¸”å…¶å€¼æ— ã€‚ è§£ææ¨¡å¼ä¸ä¹‹åŒ¹é…çš„å…¶ä»–å‚æ•°æ¥æ”¶åˆ°çœŸå®å€¼ï¼š </p><br><pre> <code class="plaintext hljs"> "ship"=&gt;true, "new"=&gt;true,</code> </pre> <br><p> è€Œä¸”æˆ‘ä»¬å·²ç»æ”¶åˆ°äº†æ¨¡æ¿ä»¥ä¸‹å…ƒç´ çš„ç‰¹å®šå€¼ï¼š </p><br><pre> <code class="plaintext hljs"> "&lt;name&gt;"=&gt;["Bystriy"], "--speed"=&gt;"10"</code> </pre> <br><p> ç¬¬ä¸€ä¸ªå€¼åœ¨å‘½ä»¤è¡Œä¸Šæ˜¾å¼è®¾ç½®ä¸ºå‚æ•°æ›¿æ¢ï¼Œç¬¬äºŒä¸ªæ˜¯å…·æœ‰é»˜è®¤å€¼çš„é€‰é¡¹ã€‚ <br></p><p> å¦è¯·æ³¨æ„ï¼Œå¯ä»¥è‡ªåŠ¨è®¡ç®—å½“å‰è„šæœ¬çš„åç§°ã€‚ <br> ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ï¼š </p><br><pre> <code class="plaintext hljs">doc = """Naval Fate. Usage: $(Base.basename(@__FILE__)) ship new &lt;name&gt;â€¦ """</code> </pre> <br><p> æ”¾ç½®å‘½ä»¤è¡Œå‚æ•°è§£æå™¨çš„å¦ä¸€é¡¹å»ºè®®æ˜¯å°†å…¶æ”¾ç½®åœ¨æ–‡ä»¶çš„æœ€å¼€å§‹ã€‚ ç›®å‰ï¼ŒJuliaçš„ä¸€ä¸ªä»¤äººä¸å¿«çš„åŠŸèƒ½æ˜¯æ¨¡å—ä¹‹é—´çš„è¿æ¥æ—¶é—´è¾ƒé•¿ã€‚ ä¾‹å¦‚<code>using Plots; using DataFrames</code>  <code>using Plots; using DataFrames</code>å¯ä»¥å‘é€è„šæœ¬ä»¥ç­‰å¾…å‡ ç§’é’Ÿã€‚ å¯¹äºæœåŠ¡å™¨ç«¯çš„å•åŠ è½½è„šæœ¬è€Œè¨€ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œä½†æ˜¯å®ƒå°†ä½¿åªæƒ³æŸ¥çœ‹å‘½ä»¤è¡Œå‚æ•°æç¤ºçš„ç”¨æˆ·æ„Ÿåˆ°çƒ¦æ¼ã€‚ å› æ­¤ï¼Œé¦–å…ˆéœ€è¦å‘å‡ºå¸®åŠ©å¹¶æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°ï¼Œç„¶åæ‰å¼€å§‹ä¸‹è½½å·¥ä½œæ‰€éœ€çš„åº“ã€‚ </p><br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p> æœ¬æ–‡å¹¶ä¸å‡è£…è€ƒè™‘Juliaä¸­è§£æå‚æ•°çš„æ‰€æœ‰æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œè€ƒè™‘çš„é€‰é¡¹å®é™…ä¸Šæ¶µç›–äº†3ç§å¯èƒ½çš„é€‰é¡¹ã€‚ å®Œå…¨æ‰‹åŠ¨åˆ†æ<code>ARGS</code>é˜µåˆ—ã€‚ åœ¨ArgParseä¸­ä¸¥æ ¼å£°æ˜ä½†è‡ªåŠ¨è§£æçš„å‚æ•°ã€‚ è¿˜æœ‰ä¸€ç§å®Œå…¨å£°æ˜æ€§çš„ï¼ˆå°½ç®¡ä¸æ˜¯ä¸¥æ ¼çš„ï¼‰docoptå½¢å¼ã€‚ ç”¨ä¾‹çš„é€‰æ‹©å®Œå…¨å–å†³äºè§£æå‚æ•°çš„å¤æ‚æ€§ã€‚ ä½¿ç”¨docoptçš„é€‰é¡¹ä¼¼ä¹æœ€æ˜“äºä½¿ç”¨ï¼Œå°½ç®¡å®ƒéœ€è¦å¯¹æ¥æ”¶åˆ°çš„å‚æ•°çš„å€¼è¿›è¡Œæ˜¾å¼ç±»å‹è½¬æ¢ã€‚ ä½†æ˜¯ï¼Œå¦‚æœè„šæœ¬ä¸æ¥å—æ–‡ä»¶åä»¥å¤–çš„ä»»ä½•å…¶ä»–å†…å®¹ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½åˆ©ç”¨é€šå¸¸çš„<code>println("Run me with file name")</code>åŠŸèƒ½ä¸ºå…¶æä¾›å¸®åŠ©ï¼Œå¹¶ç›´æ¥ä»<code>ARGS</code>è§£ææ–‡ä»¶åï¼Œå¦‚å›¾æ‰€ç¤ºåœ¨ç¬¬ä¸€éƒ¨åˆ†ã€‚ </p><br><h2 id="ssylki"> å‚è€ƒæ–‡çŒ® </h2><br><ul><li>  <a href="">https://github.com/vtjnash/Glob.jl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://argparsejl.readthedocs.io/en/latest/argparse.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/carlobaldassi/ArgParse.jl/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://docopt.org/</a> </li><li>  <a href="">https://github.com/docopt/DocOpt.jl</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430942/">https://habr.com/ru/post/zh-CN430942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430932/index.html">é»‘å®¢ä»ä¿„ç½—æ–¯ä¸€å®¶é“¶è¡Œå·èµ°äº†è¶…è¿‡2100ä¸‡å¢å¸ƒ</a></li>
<li><a href="../zh-CN430934/index.html">æ˜Ÿå·Dialplanæ‰©å±•æ©ç ç”Ÿæˆå™¨</a></li>
<li><a href="../zh-CN430936/index.html">DEFCON 21. DNSä¼šè®®å¯èƒ½å¯¹æ‚¨çš„å¥åº·æœ‰å®³ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN430938/index.html">æ²¡æœ‰æŠ•èµ„ç»„åˆå’Œç»éªŒçš„æƒ…å†µä¸‹å¦‚ä½•è·å¾—è®¾è®¡çš„ç¬¬ä¸€ç¬”è®¢å•</a></li>
<li><a href="../zh-CN430940/index.html">SDKç»™æ‚¨ï¼ŒSDKç»™æˆ‘ï¼ŒSDKç»™æ‰€æœ‰äººï¼ å¦‚ä½•åˆ¶ä½œSDKä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒ</a></li>
<li><a href="../zh-CN430944/index.html">ç¾å›½å®‡èˆªå±€å·²å†³å®šå‚åŠ è¿·ä½ æœˆçƒè½¦æ¯”èµ›</a></li>
<li><a href="../zh-CN430948/index.html">é€šè®¯éƒ¨æè®®åŠ å¼ºå¯¹ä¸ªäººæ•°æ®çš„æ§åˆ¶</a></li>
<li><a href="../zh-CN430950/index.html">è¿›è¡Œç°ä»£å»ºé€ </a></li>
<li><a href="../zh-CN430952/index.html">ç”µåŠ¨æ±½è½¦å’Œæ··åˆåŠ¨åŠ›æ±½è½¦å°†ä¸å¾—ä¸å‘å‡ºé¢å¤–çš„å£°éŸ³ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·åš</a></li>
<li><a href="../zh-CN430954/index.html">Qtæ— å¤„ä¸åœ¨ï¼šWebAssemblyå’ŒWebGLæµ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>