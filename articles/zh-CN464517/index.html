<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€âš•ï¸ ğŸ‘©ğŸ½â€ğŸ“ ğŸœ æ–°çš„CUBAå¡ ğŸ•‘ ğŸ£ ğŸ©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤„ç†åœ°ç†ç©ºé—´æ•°æ®å’Œåœ°å›¾æ˜¯è®¸å¤šä¸šåŠ¡åº”ç”¨ç¨‹åºä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚ å®ƒå¯ä»¥æ˜¯åŸå¸‚å’ŒåŒºåŸŸä¿¡æ¯ç³»ç»Ÿï¼ŒçŸ³æ²¹å’Œå¤©ç„¶æ°”è¡Œä¸šçš„åº”ç”¨ç¨‹åºï¼Œè¿è¾“åŸºç¡€è®¾æ–½ç®¡ç†ç³»ç»Ÿä»¥åŠäº¤ä»˜æœåŠ¡ç­‰ã€‚ åœ¨æˆ‘ä»¬çš„CUBAå¹³å°ä¸­ï¼Œé™¤äº†å¼€ç®±å³ç”¨æä¾›çš„åŸºæœ¬åŠŸèƒ½ä¹‹å¤–ï¼Œè¦æ„å»ºæ­¤ç±»åº”ç”¨ç¨‹åºï¼Œè¿˜æä¾›äº†ç›¸å½“å¹¿æ³›çš„é™„åŠ ç»„ä»¶å’Œç»„ä»¶ ã€‚ å…¶ä¸­ä¹‹ä¸€æ˜¯Charts and M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ–°çš„CUBAå¡</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/464517/"><p><img src="https://habrastorage.org/getpro/habr/post_images/2b4/8ca/a70/2b48caa7053d14a2edd9cfaecc6b6fb8.png" alt="åœ°å›¾"></p><br><p> å¤„ç†åœ°ç†ç©ºé—´æ•°æ®å’Œåœ°å›¾æ˜¯è®¸å¤šä¸šåŠ¡åº”ç”¨ç¨‹åºä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚ å®ƒå¯ä»¥æ˜¯åŸå¸‚å’ŒåŒºåŸŸä¿¡æ¯ç³»ç»Ÿï¼ŒçŸ³æ²¹å’Œå¤©ç„¶æ°”è¡Œä¸šçš„åº”ç”¨ç¨‹åºï¼Œè¿è¾“åŸºç¡€è®¾æ–½ç®¡ç†ç³»ç»Ÿä»¥åŠäº¤ä»˜æœåŠ¡ç­‰ã€‚ åœ¨æˆ‘ä»¬çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CUBAå¹³å°ä¸­ï¼Œ</a>é™¤äº†å¼€ç®±å³ç”¨æä¾›çš„åŸºæœ¬åŠŸèƒ½ä¹‹å¤–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œ</a>è¦æ„å»ºæ­¤ç±»åº”ç”¨ç¨‹åºï¼Œè¿˜æä¾›äº†ç›¸å½“å¹¿æ³›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„é™„åŠ ç»„ä»¶å’Œç»„ä»¶</a> ã€‚ å…¶ä¸­ä¹‹ä¸€æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Charts and Maps</a> ï¼Œé™¤äº†æ˜¾ç¤ºå›¾è¡¨å¤–ï¼Œè¿˜å¯ä»¥å°†Google Mapsé›†æˆåˆ°åº”ç”¨ç¨‹åºçš„å¯è§†éƒ¨åˆ†ã€‚ å»å¹´ï¼Œè°·æ­Œæ›´æ–°äº†å…¶åœ°å›¾æœåŠ¡çš„ä½¿ç”¨æ¡æ¬¾ï¼Œè¿™å¯¼è‡´æˆæœ¬å¢åŠ ï¼Œå¹¶ä¸”è¿˜å¼•å…¥äº†å¼ºåˆ¶ä½¿ç”¨APIâ€‹â€‹çš„ä»˜æ¬¾èµ„æ–™å¿…é¡»å­˜åœ¨çš„æ¡ä»¶ã€‚ è¿™äº›æƒ…å†µå¯¼è‡´å¤§å¤šæ•°å®¢æˆ·è€ƒè™‘ä½¿ç”¨æ›¿ä»£å¡æä¾›å•†ï¼Œå› æ­¤ç³»ç»Ÿæç¤ºæˆ‘ä»¬å¼€å‘æ–°çš„å¡ç»„ä»¶ã€‚ </p><a name="habracut"></a><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ°ä»‹ç»ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶<strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-CUBA Maps</a></strong> ã€‚  CUBA Mapsä»¥å¯è§†åŒ–è¡¨ç¤ºå’Œç›´è§‚çš„å·¥å…·æ¥è¡¥å……åº”ç”¨ç¨‹åºåŠŸèƒ½ï¼Œä»¥ç¼–è¾‘åœ°ç†ç©ºé—´æ•°æ®ã€‚ è¯¥ç»„ä»¶å¯åŒæ—¶å¤„ç†æ …æ ¼æ•°æ®å’ŒçŸ¢é‡æ•°æ®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸Web Map Serviceåè®®å…¼å®¹çš„åœ°å›¾æä¾›ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨XYZæ ¼å¼çš„å›¾å—ä½œä¸ºæ …æ ¼æ•°æ®ã€‚ ä¸ºäº†å¤„ç†çŸ¢é‡æ•°æ®ï¼Œè¯¥ç»„ä»¶ä½¿ç”¨æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JTSæ‹“æ‰‘å¥—ä»¶ï¼ˆJTSï¼‰</a>åº“çš„å‡ ä½•æ•°æ®ç±»å‹ï¼ˆç‚¹ï¼ŒæŠ˜çº¿ï¼Œå¤šè¾¹å½¢ï¼‰-æœ€æµè¡Œçš„Javaåº“ï¼Œç”¨äºå¤„ç†åœ°ç†ç©ºé—´æ•°æ®ã€‚ è¯¥ç»„ä»¶æä¾›äº†ç”¨äºåˆ›å»ºåŸºäºCUBAçš„å…¨é¢åœ°ç†ä¿¡æ¯ç³»ç»Ÿçš„æ‰€æœ‰å¿…è¦å·¥å…·ã€‚ </p><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºMapsç»„ä»¶æä¾›çš„æ–°åŠŸèƒ½ï¼Œå¹¶å°†å…¶ä¸æˆ‘ä»¬ä»¥å‰çš„mapç»„ä»¶è¿›è¡Œæ¯”è¾ƒã€‚ </p><br><h2 id="struktura-osnovannaya-na-sloyah"> åŸºäºå±‚çš„ç»“æ„ </h2><br><p> è¯¥ç»„ä»¶æ”¯æŒåœ¨ä¸“ä¸šåœ°ç†ä¿¡æ¯ç³»ç»Ÿä¸­å¹¿æ³›ä½¿ç”¨çš„ä¼ ç»Ÿå¤šå±‚ç»“æ„ã€‚ å›¾å±‚ä¸»è¦åˆ†ä¸ºæ …æ ¼å’ŒçŸ¢é‡ã€‚  <em>æ …æ ¼å›¾å±‚</em>ç”±æ …æ ¼å›¾åƒç»„æˆï¼Œè€Œ<em>çŸ¢é‡å›¾å±‚</em>åŒ…å«çŸ¢é‡å‡ ä½•ã€‚ </p><br><p> è¯¥ç»„ä»¶æ”¯æŒä»¥ä¸‹ç±»å‹çš„å±‚ï¼š </p><br><ul><li> åˆ‡ç‰‡<em>å±‚</em>ä»¥XYZæ ¼å¼æ˜¾ç¤ºåˆ‡ç‰‡æœåŠ¡æä¾›çš„åˆ‡ç‰‡ã€‚ </li><li>  <em>Webåœ°å›¾æœåŠ¡ï¼ˆWMSï¼‰å±‚</em>æ˜¾ç¤ºWMSæœåŠ¡æä¾›çš„å›¾åƒã€‚ </li><li>  <em>å‘é‡å±‚</em>åŒ…å«åœ°ç†å¯¹è±¡ï¼ˆå…·æœ‰å‡ ä½•å±æ€§çš„å®ä½“ï¼‰ã€‚ </li></ul><br><p> è¿™äº›å›¾å±‚æ˜¯åœ°å›¾çš„ç»“æ„å…ƒç´ ã€‚ ä¾‹å¦‚ï¼Œä¸‹å±‚å¯ä»¥æ˜¯ç”±å›¾å—ç»„æˆçš„åº•å›¾ï¼Œç¬¬äºŒå±‚å¯ä»¥åŒ…å«æè¿°é¢†åœŸå•ä½ï¼ˆä¾‹å¦‚åŒºåŸŸï¼‰çš„å¤šè¾¹å½¢ï¼Œè€Œä¸Šå±‚å¯ä»¥åŒ…å«åœ°ç†ä½ç½®ï¼ˆå®¢æˆ·ï¼Œå•†åº—ç­‰çš„ä½ç½®ï¼‰ã€‚ å°†è¿™äº›å›¾å±‚å åŠ åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¾—åˆ°æœ€ç»ˆçš„åœ°å›¾ï¼š </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b16/3b2/5f7/b163b25f702af4f76363340b899139b4.png" alt="å±‚æ•°"></p><br><p> é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åˆ›å»ºåŒ…å«ä»»ä½•å†…å®¹çš„ç»“æ„æ¸…æ™°çš„åœ°å›¾ã€‚ </p><br><p> CUBA Mapsæä¾›äº†ä¸€ä¸ªæ–°çš„å¯è§†ç»„ä»¶<code>GeoMap</code> ã€‚ åœ¨ç»„ä»¶çš„XMLæè¿°ç¬¦ä¸­ï¼Œæ‚¨å¯ä»¥è®¾ç½®åœ°å›¾çš„åŸºæœ¬å‚æ•°ä»¥åŠä¸€ç»„æ˜¾ç¤ºçš„å›¾å±‚ã€‚ è¿™ç§é…ç½®çš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"600px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">center</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"37.615, 55.752"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">zoom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selectedLayer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressLayer"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:tile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tiles"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tileProvider</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"maps_OpenStreetMap"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"territoryLayer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"territoryDc"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressLayer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressDc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">editable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> è¿™ç§æ–¹æ³•å¯è®©æ‚¨è·å¾—<strong>å›¾è¡¨å’Œåœ°å›¾</strong>æ‰€ç¼ºä¹çš„æ›´å¤šçµæ´»æ€§ï¼š </p><br><ul><li>  <em>åˆ†å±‚ã€‚</em> è¿™ç§ç»“æ„å…è®¸æ‚¨æ„å»ºå…·æœ‰ä»»ä½•å†…å®¹çš„å¡ï¼Œä¾‹å¦‚ï¼Œç»“åˆå„ç§æœåŠ¡æä¾›çš„å›¾å—ã€‚ </li><li>  <em>å±‚æä¾›äº†å°†åŒç±»å¯¹è±¡èšé›†åœ¨ä¸€èµ·çš„æŠ½è±¡ã€‚</em> åœ¨â€œ <strong>å›¾è¡¨å’Œåœ°å›¾â€</strong>ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰åœ°å›¾å†…å®¹ï¼ˆä¾‹å¦‚ç‚¹ï¼Œå¤šè¾¹å½¢ç­‰ï¼‰éƒ½è¢«è½¬å‚¨åˆ°UIç»„ä»¶çš„å…¬å…±å †ä¸­ã€‚ ä¸ºäº†ä»¥æŸç§æ–¹å¼æ„é€ è¿™äº›å¯¹è±¡ï¼Œé¡¹ç›®å›¢é˜Ÿå¿…é¡»ç¼–å†™å…¶ä»–é€»è¾‘ã€‚ </li><li>  <em>ä¸€ç§æè¿°å±‚çš„å£°æ˜æ–¹æ³•ã€‚</em> å¦‚ä¸Šé¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥åœ¨XMLæè¿°ç¬¦ä¸­å®Œå…¨æŒ‡å®šåœ°å›¾ç»“æ„ï¼ˆå›¾å±‚é›†ï¼‰ã€‚ åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™è¶³ä»¥åœ¨å±å¹•æ§åˆ¶å™¨ä¸­ä¸å®ç°ä»»ä½•å…¶ä»–é€»è¾‘ã€‚ å¦‚æœä¸ä½¿ç”¨å…¶ä»–é€»è¾‘ï¼Œä½¿ç”¨<strong>å›¾è¡¨å’Œåœ°å›¾</strong>å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚ </li></ul><br><p> ä½¿ç”¨å›¾å—å›¾å±‚æˆ–WMSï¼Œå¯ä»¥ä¸ä»»ä½•é¦–é€‰çš„åœ°å›¾æä¾›ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚ æ‚¨ä¸å—é™äºç‰¹å®šæä¾›è€…ï¼Œå°±åƒåœ¨<strong>Chartså’ŒMapsä¸­é‚£æ ·</strong> ã€‚ </p><br><p> çŸ¢é‡å›¾å±‚æå¤§åœ°ç®€åŒ–äº†åœ°ç†å¯¹è±¡åœ¨åœ°å›¾ä¸Šçš„æ˜¾ç¤ºï¼Œäº¤äº’å¼ç¼–è¾‘å’Œç»˜åˆ¶ã€‚ </p><br><p> è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ <code>GeoMap</code>çš„å¯è§†ç»„ä»¶å…·æœ‰ç‰¹æ®Šçš„è¾…åŠ©å±‚<strong>Canvas</strong> ã€‚  Canvasæä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„APIï¼Œç”¨äºåœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºå’Œç»˜åˆ¶å‡ ä½•å›¾å½¢ï¼ˆç‚¹ï¼ŒæŠ˜çº¿ï¼Œå¤šè¾¹å½¢ï¼‰ã€‚ æˆ‘ä»¬å°†åœ¨æœ¬æ–‡åé¢ä»‹ç»ä½¿ç”¨Canvasçš„ç¤ºä¾‹ã€‚ </p><br><h2 id="geo-obekty"> åœ°ç†å¯¹è±¡ </h2><br><p> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä½“ï¼Œå…¶ä¸­åŒ…å«ä¸å‡ ä½•ç›¸å…³çš„å±æ€§ï¼ˆç‚¹ï¼ŒæŠ˜çº¿ï¼Œå¤šè¾¹å½¢ï¼‰ã€‚ æˆ‘ä»¬å°†è¿™ä¸ªå®ä½“ç§°ä¸º<em>geo-object</em> ã€‚ å› æ­¤ï¼Œè¯¥ç»„ä»¶æå¤§åœ°ç®€åŒ–äº†åœ°ç†å¯¹è±¡çš„å·¥ä½œã€‚ </p><br><p> ä¾‹å¦‚ï¼Œè€ƒè™‘åœ°ç†å¯¹è±¡<strong>Address</strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Address</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StandardEntity</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"LOCATION"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Geometry</span></span> <span class="hljs-meta"><span class="hljs-meta">@MetaProperty</span></span>(datatype = <span class="hljs-string"><span class="hljs-string">"GeoPoint"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Convert</span></span>(converter = CubaPointWKTConverter.class) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Point location; ... }</code> </pre> <br><p> å®ƒå…·æœ‰JTSæ‹“æ‰‘å¥—ä»¶ï¼ˆJTSï¼‰åº“ä¸­çš„<code>org.locationtech.jts.geom.Point</code>ç±»å‹çš„<code>location</code>å±æ€§ã€‚ è¯¥ç»„ä»¶æ”¯æŒJTSä¸­çš„ä»¥ä¸‹å‡ ä½•ç±»å‹ï¼š </p><br><ul><li>  <code>org.locationtech.jts.geom.Point</code>æ—¶é—´æ®µã€‚ </li><li>  <code>org.locationtech.jts.geom.LineString</code>æŠ˜çº¿ã€‚ </li><li>  <code>org.locationtech.jts.geom.Polygon</code>å¤šè¾¹å½¢ã€‚ </li></ul><br><p> ç”¨<code>@Geometry</code>æ³¨é‡Šæ ‡è®°<code>location</code>å±æ€§ã€‚ æ­¤æ³¨é‡Šå®£å¸ƒåœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºåœ°ç†å¯¹è±¡æ—¶åº”ä½¿ç”¨æ­¤å±æ€§çš„å€¼ã€‚ è¯¥å±æ€§è¿˜æ ‡æœ‰ä»¥ä¸‹æ³¨é‡Šï¼š </p><br><ul><li>  <code>@MetaProperty</code>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨äºæŒ‡ç¤º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•°æ®ç±»å‹</a>å±æ€§ã€‚  CUBAæ¡†æ¶ä½¿ç”¨<code>Datatype</code>æ¥å£åœ¨å­—ç¬¦ä¸²ä¹‹é—´æ¥å›è½¬æ¢å€¼ã€‚ </li><li>  <code>@Convert</code>ä¸ºæŒä¹…å±æ€§å®šä¹‰JPAè½¬æ¢å™¨ã€‚  JPAè½¬æ¢å™¨åœ¨æ•°æ®åº“å’ŒJavaä»£ç çš„è¡¨ç¤ºå½¢å¼ä¹‹é—´è½¬æ¢å±æ€§å€¼ã€‚ è¯¥ç»„ä»¶æä¾›äº†ä¸€ç»„ç©ºé—´æ•°æ®ç±»å‹å’ŒJPAè½¬æ¢å™¨ã€‚ ç»„ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£ä¸­</a>æä¾›äº†æ›´å¤šä¿¡æ¯ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨è‡ªå·±çš„JPAè½¬æ¢å™¨å®ç°ï¼Œè¿™ä½¿å¾—å¯ä»¥å¤„ç†å„ç§ç©ºé—´æ•°æ®æºï¼ˆä¾‹å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PostGIS</a> ï¼‰ã€‚ </li></ul><br><p> å› æ­¤ï¼Œä¸ºäº†å°†ä¸€ä¸ªå®ä½“å˜æˆä¸€ä¸ªåœ°ç†å¯¹è±¡ï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ªJTSå‡ ä½•ç±»å‹çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨<code>@Geometry</code>å¯¹å…¶è¿›è¡Œ<code>@Geometry</code> ã€‚ è¿˜æœ‰å¦ä¸€ç§é€‰æ‹©-é€šè¿‡æä¾›getter / setteræ–¹æ³•æ¥åˆ›å»ºéæŒä¹…å±æ€§ã€‚ å¦‚æœæ‚¨ä¸æƒ³æ›´æ”¹æ•°æ®æ¨¡å‹å¹¶é‡æ–°ç”ŸæˆDDLè„šæœ¬ï¼Œè¿™å°†å¾ˆæœ‰ç”¨ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œè€ƒè™‘å…·æœ‰å•ç‹¬çš„çº¬åº¦å’Œç»åº¦å±æ€§çš„å®ä½“<strong>åœ°å€</strong> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.haulmont.addon.maps.gis.utils.GeometryUtils; ... <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Address</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StandardEntity</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"LATITUDE"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Double latitude; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"LONGITUDE"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Double longitude; ... <span class="hljs-meta"><span class="hljs-meta">@Geometry</span></span> <span class="hljs-meta"><span class="hljs-meta">@MetaProperty</span></span>(datatype = <span class="hljs-string"><span class="hljs-string">"GeoPoint"</span></span>, related = {<span class="hljs-string"><span class="hljs-string">"latitude"</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Point </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getLatitude() == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getLongitude() == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GeometryUtils.createPoint(getLongitude(), getLatitude()); } <span class="hljs-meta"><span class="hljs-meta">@Geometry</span></span> <span class="hljs-meta"><span class="hljs-meta">@MetaProperty</span></span>(datatype = <span class="hljs-string"><span class="hljs-string">"GeoPoint"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Point point)</span></span></span><span class="hljs-function"> </span></span>{ Point prevValue = getLocation(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (point == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { setLatitude(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); setLongitude(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { setLatitude(point.getY()); setLongitude(point.getX()); } propertyChanged(<span class="hljs-string"><span class="hljs-string">"location"</span></span>, prevValue, point); } ... }</code> </pre> <br><p> å¦‚æœå†³å®šä½¿ç”¨æ­¤æ–¹æ³•ï¼Œè¯·ç¡®ä¿åœ¨setterä¸­è°ƒç”¨<code>propertyChanged</code>æ–¹æ³•ï¼Œå› ä¸ºç»„ä»¶é€šè¿‡æ›´æ–°åœ°å›¾ä¸Šçš„å‡ ä½•æ¥å“åº”æ­¤äº‹ä»¶ã€‚ </p><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åœ°ç†å¯¹è±¡çš„ç±»ï¼Œå¯ä»¥å°†æ­¤ç±»çš„å®ä¾‹æ·»åŠ åˆ°çŸ¢é‡å±‚ã€‚  <em>å‘é‡å±‚</em>æœ¬è´¨ä¸Šæ˜¯æ•°æ®ï¼ˆåœ°ç†å¯¹è±¡ï¼‰å’Œåœ°å›¾ä¹‹é—´çš„è¿æ¥å…ƒç´ ã€‚ è¦å°†åœ°ç†å¯¹è±¡ä¸å›¾å±‚è¿â€‹â€‹æ¥ï¼Œæ‚¨éœ€è¦ä¼ è¾“æ•°æ®å®¹å™¨ï¼Œæˆ–è€…åœ¨å±å¹•é™ˆæ—§ï¼ˆCUBAçš„ç‰ˆæœ¬7ä»¥ä¸‹ï¼‰çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®æºä¼ è¾“åˆ°çŸ¢é‡å±‚ã€‚ è¿™å¯ä»¥åœ¨XMLæè¿°ç¬¦ä¸­å®Œæˆï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressesLayer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressesDc"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> ç»“æœï¼ŒåŒ…å«åœ¨<code>addressesDc</code>å®¹å™¨ä¸­çš„<code>Address</code>ç±»å®ä¾‹å°†æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šã€‚ </p><br><p> è€ƒè™‘ä¸€ä¸‹åŸºæœ¬ä»»åŠ¡ï¼šåˆ›å»ºä¸€ä¸ªç”¨äºç¼–è¾‘å¸¦æœ‰åœ°å›¾çš„åœ°ç†å¯¹è±¡çš„å±å¹•ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­ç¼–è¾‘å¯¹è±¡çš„å‡ ä½•å½¢çŠ¶ã€‚ è¦è§£å†³è¯¥é—®é¢˜ï¼Œæ‚¨éœ€è¦åœ¨ç¼–è¾‘å±å¹•çš„XMLæè¿°ç¬¦ä¸­å£°æ˜GeoMapçš„å¯è§†ç»„ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä¸åŒ…å«å·²ç¼–è¾‘åœ°ç†å¯¹è±¡çš„å®¹å™¨å…³è”çš„çŸ¢é‡å±‚ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"600px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">center</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"37.615, 55.752"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">zoom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selectedLayer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressLayer"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:tile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag">"/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressLayer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addressDc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">editable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:geoMap</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> å¦‚æœå°†çŸ¢é‡å›¾å±‚æ ‡è®°ä¸ºå¯ç¼–è¾‘ï¼Œåˆ™å°†æ¿€æ´»å¯¹åœ°å›¾ä¸Šåœ°ç†å¯¹è±¡çš„äº¤äº’å¼ç¼–è¾‘ã€‚ å¦‚æœå¯¹è±¡çš„å‡ ä½•å½¢çŠ¶ä¸ºç©ºï¼Œåˆ™åœ°å›¾å°†è‡ªåŠ¨åˆ‡æ¢åˆ°ç»˜å›¾æ¨¡å¼ã€‚ å¦‚æ‚¨æ‰€è§ï¼Œè¦è§£å†³æ­¤é—®é¢˜ï¼Œåœ¨åœ°å›¾ä¸Šå£°æ˜ä¸€ä¸ªçŸ¢é‡å±‚å¹¶å°†å…¶ä¼ é€’ç»™æ•°æ®å®¹å™¨/æ•°æ®æºå°±è¶³å¤Ÿäº†ã€‚ </p><br><p> ä»…æ­¤è€Œå·²ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨â€œ <strong>å›¾è¡¨â€å’Œâ€œåœ°å›¾â€</strong>è§£å†³ç›¸åŒçš„é—®é¢˜ï¼Œåˆ™å¿…é¡»åœ¨å±å¹•æ§åˆ¶å™¨ä¸­ç¼–å†™å¤§é‡ä»£ç æ‰èƒ½æä¾›ç±»ä¼¼çš„åŠŸèƒ½ã€‚ ä½¿ç”¨<strong>Maps</strong>çš„æ–°ç»„ä»¶<strong>ï¼Œ</strong>è§£å†³è¿™äº›é—®é¢˜å˜å¾—æ›´åŠ ç®€å•ã€‚ </p><br><h2 id="canvas"> å¸†å¸ƒ </h2><br><p> æœ‰æ—¶æ‚¨éœ€è¦ä¸ä½¿ç”¨å®ä½“ã€‚ ç›¸åï¼Œæ‚¨æƒ³è¦ä¸€ä¸ªç®€å•çš„APIåœ¨åœ°å›¾ä¸Šæ·»åŠ å’Œç»˜åˆ¶å‡ ä½•å›¾å½¢ï¼Œå°±åƒåœ¨<strong>Chartså’ŒMapsä¸­ä¸€æ ·</strong> ã€‚ ä¸ºæ­¤ï¼Œ <code>GeoMap</code>è§†è§‰ç»„ä»¶å…·æœ‰ç‰¹æ®Šçš„å›¾å±‚<em>-Canvas</em> ã€‚ è¿™æ˜¯ä¸€ä¸ªè¾…åŠ©å±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½äºåœ°å›¾ä¸Šï¼Œå¹¶æä¾›ç”¨äºåœ¨åœ°å›¾ä¸Šæ·»åŠ å’Œç»˜åˆ¶å‡ ä½•å›¾å½¢çš„ç®€å•APIã€‚ æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨<code>map.getCanvas()</code>æ–¹æ³•<code>map.getCanvas()</code>åœ°å›¾ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€äº›ç®€å•çš„ä»»åŠ¡ï¼Œå¦‚ä½•åœ¨â€œ <strong>å›¾è¡¨â€å’Œâ€œåœ°å›¾â€</strong>ä¸­è§£å†³å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Canvasæ¥å®Œæˆè¿™äº›ä»»åŠ¡ã€‚ </p><br><h3 id="otobrazhenie-geometriy-na-karte"> åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºå‡ ä½• </h3><br><p> åœ¨â€œ <strong>å›¾è¡¨å’Œåœ°å›¾â€ä¸­ï¼Œ</strong>ä½¿ç”¨åœ°å›¾çš„å¯è§†ç»„ä»¶åˆ›å»ºå‡ ä½•å¯¹è±¡ï¼Œå¹¶ç”¨ä½œå·¥å‚ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°åœ°å›¾ä¸­ï¼š </p><br><pre> <code class="java hljs">Marker marker = map.createMarker(); GeoPoint position = map.createGeoPoint(lat, lon); marker.setPosition(position); map.addMarker(marker);</code> </pre> <br><p> æ–°çš„<strong>Maps</strong>ç»„ä»¶å¯ç›´æ¥ä¸JTSåº“ä¸­çš„ç±»ä¸€èµ·ä½¿ç”¨ï¼š </p><br><pre> <code class="java hljs">CanvasLayer canvasLayer = map.getCanvas(); Point point = address.getLocation(); canvasLayer.addPoint(point);</code> </pre> <br><h3 id="redaktirovanie-geometriy"> å‡ ä½•ç¼–è¾‘ </h3><br><p> åœ¨â€œ <strong>å›¾è¡¨å’Œåœ°å›¾â€ä¸­ï¼Œ</strong>å¯ä»¥å°†å‡ ä½•æŒ‡å®šä¸ºå¯ç¼–è¾‘çš„ã€‚ å½“é€šè¿‡UIæ›´æ”¹æ­¤ç±»å‡ ä½•æ—¶ï¼Œç›¸åº”çš„äº‹ä»¶ç§°ä¸ºï¼š </p><br><pre> <code class="java hljs">Marker marker = map.createMarker(); GeoPoint position = map.createGeoPoint(lat, lon); marker.setPosition(position); marker.setDraggable(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); map.addMarker(marker); map.addMarkerDragListener(event -&gt; { <span class="hljs-comment"><span class="hljs-comment">// do something });</span></span></code> </pre> <br><p> åœ¨<strong>Maps</strong>ç»„ä»¶ä¸­ï¼Œå°†JTSå‡ ä½•ä½“æ·»åŠ åˆ°Canvasæ—¶ï¼Œç›¸åº”çš„æ–¹æ³•å°†è¿”å›ä¸€ä¸ªç‰¹æ®Šå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯è¯¥å‡ ä½•ä½“åœ¨åœ°å›¾ä¸Šçš„è¡¨ç¤ºå½¢å¼ï¼š <code>CanvasLayer.Point</code> ï¼Œ <code>CanvasLayer.Polyline</code>æˆ–<code>CanvasLayer.Polygon</code> ã€‚ è¯¥å¯¹è±¡å…·æœ‰ç”¨äºè®¾ç½®å„ç§å‡ ä½•å‚æ•°çš„æµç•…æ¥å£ï¼Œä¹Ÿå¯ä»¥ç”¨äºè®¢é˜…ä¸å‡ ä½•ç›¸å…³çš„äº‹ä»¶ï¼Œæˆ–ä»â€œç”»å¸ƒâ€ä¸­åˆ é™¤å‡ ä½•ã€‚ </p><br><pre> <code class="java hljs">CanvasLayer canvasLayer = map.getCanvas(); CanvasLayer.Point location = canvasLayer.addPoint(address.getLocation()); location.setEditable(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) .setPopupContent(address.getName()) .addModifiedListener(modifiedEvent -&gt; address.setLocation(modifiedEvent.getGeometry()));</code> </pre> <br><h3 id="risovanie-geometriy"> å‡ ä½•å›¾ </h3><br><p> åœ¨æ—§çš„é™„åŠ <strong>å›¾è¡¨å’Œåœ°å›¾ä¸­ï¼Œ</strong>æœ‰ä¸€ä¸ªè¾…åŠ©ç»„ä»¶<code>DrawingOptions</code> ã€‚ å®ƒç”¨äºæ¿€æ´»åœ¨åœ°å›¾ä¸Šç»˜åˆ¶çš„åŠŸèƒ½ã€‚ ç»˜åˆ¶å‡ ä½•å›¾å½¢åï¼Œå¼•å‘ç›¸åº”çš„äº‹ä»¶ï¼š </p><br><pre> <code class="java hljs">DrawingOptions options = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DrawingOptions(); PolygonOptions polygonOptions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PolygonOptions(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">"#993366"</span></span>, <span class="hljs-number"><span class="hljs-number">0.6</span></span>); ControlOptions controlOptions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ControlOptions( Position.TOP_CENTER, Arrays.asList(OverlayType.POLYGON)); options.setEnableDrawingControl(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); options.setPolygonOptions(polygonOptions); options.setDrawingControlOptions(controlOptions); options.setInitialDrawingMode(OverlayType.POLYGON); map.setDrawingOptions(options); map.addPolygonCompleteListener(event -&gt; { <span class="hljs-comment"><span class="hljs-comment">//do something });</span></span></code> </pre> <br><p> åœ°å›¾ç»„ä»¶ä½¿æ“ä½œå˜å¾—æ›´åŠ å®¹æ˜“ã€‚ æ–°çš„â€œ <strong>åœ°å›¾</strong>ç”»å¸ƒâ€åŒ…å«ä¸€ç»„ç”¨äºç»˜åˆ¶å‡ ä½•å›¾å½¢çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œè¦ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œè¯·ä½¿ç”¨<code>canvas.drawPolygon()</code>æ–¹æ³•ã€‚ è°ƒç”¨æ­¤æ–¹æ³•åï¼Œåœ°å›¾å°†åˆ‡æ¢åˆ°å¤šè¾¹å½¢ç»˜åˆ¶æ¨¡å¼ã€‚ è¯¥æ–¹æ³•æ¥å—<code>Consumer&lt;CanvasLayer.Polygon&gt;</code>å‡½æ•°ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å¯¹ç»˜åˆ¶çš„å¤šè¾¹å½¢æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ </p><br><pre> <code class="java hljs">canvasLayer.drawPolygon(polygon -&gt; { territory.setPolygon(polygon.getGeometry()); });</code> </pre> <br><h2 id="instrumenty-dlya-geo-analiza"> åœ°ç†åˆ†æå·¥å…· </h2><br><h3 id="klasterizaciya"> èšç±» </h3><br><p> æ–°çš„Mapsç»„ä»¶ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªæœ‰ç”¨å·¥å…·æ˜¯ç‚¹èšç±»ã€‚ å¦‚æœå›¾å±‚ç”±å¤§é‡ç‚¹ç»„æˆï¼Œåˆ™å¯ä»¥å¯ç”¨èšç±»ï¼Œå°†é™„è¿‘çš„ç‚¹åˆ†ç»„ä¸ºèšç±»ï¼Œä»¥ä½¿åœ°å›¾çœ‹èµ·æ¥æ›´æ•´æ´ï¼Œæ›´æ˜“äºæ„ŸçŸ¥ï¼š </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e6c/166/4d7/e6c1664d7e9092880dfcf13cc4dca58c.jpg" alt="é›†ç¾¤"></p><br><p> é€šè¿‡åœ¨XMLæè¿°ç¬¦çš„<code>vector</code>æ ‡ç­¾å†…æ·»åŠ <code>cluster</code>æ ‡ç­¾æ¥å¯ç”¨<code>cluster</code> ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"locations"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"locationsDc"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:cluster</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p> æ‚¨è¿˜å¯ä»¥åŸºäºç‚¹æƒé‡å¯ç”¨èšç±»ã€‚ ç‚¹çš„æƒé‡æ˜¯<code>weightProperty</code>å‚æ•°ä¸­æŒ‡å®šçš„å±æ€§çš„å€¼ã€‚ </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"orders"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dataContainer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ordersDc"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:cluster</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">weightProperty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amount"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maps:vector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3 id="teplovye-karty"> çƒ­å›¾ </h3><br><p> çƒ­å›¾æ˜¯è·¨å¤šä¸ªåœ°ç†ä½ç½®çš„æ•°æ®å¯†åº¦çš„ç›´è§‚è¡¨ç¤ºã€‚  <code>addHeatMap(Map&lt;Point, Double&gt; intensityMap)</code>çš„å¯è§†åŒ–ç»„ä»¶åŒ…å«ä¸€ç§æ·»åŠ çƒ­å›¾çš„æ–¹æ³•ï¼š <code>addHeatMap(Map&lt;Point, Double&gt; intensityMap)</code> ã€‚ </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/722/10b/289/72210b289dd04fcf41cc4ebec062c2d5.jpg" alt="çƒ­å›¾"></p><br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p> åœ°ç†ç©ºé—´æ•°æ®çš„å¤„ç†ï¼Œåˆ†æå’Œå¯è§†åŒ–æ˜¯è®¸å¤šä¸šåŠ¡åº”ç”¨ç¨‹åºçš„åŸºæœ¬è¦ç´ ã€‚  <strong>CUBA Maps</strong>ç»„ä»¶å°†ä¸ºæ‚¨çš„CUBAåº”ç”¨ç¨‹åºæä¾›å®ç°æ­¤åŠŸèƒ½æ‰€éœ€çš„æ‰€æœ‰å¿…è¦å·¥å…·ã€‚ </p><br><p> åŸºäºå›¾å±‚çš„ç»“æ„æœ‰åŠ©äºæ„å»ºå…·æœ‰ä»»ä½•å†…å®¹çš„åœ°å›¾ã€‚ ä½¿ç”¨tile / WMSå›¾å±‚ï¼Œæ‚¨å¯ä»¥å°†æ‰€éœ€çš„ä»»ä½•æä¾›ç¨‹åºç”¨ä½œåŸºç¡€å¡ã€‚ å‘é‡å›¾å±‚å¯è®©æ‚¨æœ‰æ•ˆåœ°å¤„ç†åŒç±»çš„åœ°ç†å¯¹è±¡é›†ã€‚  Canvasæä¾›äº†ä¸€ä¸ªç®€å•çš„APIï¼Œç”¨äºåœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºå’Œç»˜åˆ¶å‡ ä½•å›¾å½¢ã€‚ </p><br><p> è¯¥ç»„ä»¶å¯ä¸JTSåº“ä¸­çš„ç©ºé—´ç±»å‹é…åˆä½¿ç”¨ï¼Œä»è€Œä½¿å…¶ä¸è®¸å¤šå…¶ä»–æ¡†æ¶ï¼ˆä¾‹å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GeoTools</a> ï¼‰å…¼å®¹ï¼Œä»¥è§£å†³ä¸åœ°ç†æ•°æ®å¤„ç†å’Œåˆ†ææœ‰å…³çš„å„ç§ä»»åŠ¡ã€‚ </p><br><p> æˆ‘ä»¬å¸Œæœ›æ‚¨å–œæ¬¢è¯¥ç»„ä»¶ã€‚ ç­‰å¾…æ‚¨çš„åé¦ˆï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN464517/">https://habr.com/ru/post/zh-CN464517/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN464503/index.html">ä¸aircrack-ngåŒ¹é…çš„Wi-Fiå¯†ç </a></li>
<li><a href="../zh-CN464509/index.html">ã€Šå¸Œè…Šè¯­æ·±åº¦å­¦ä¹ ã€‹ä¸€ä¹¦</a></li>
<li><a href="../zh-CN464511/index.html">å¦‚ä½•åœ¨Grafanaä¸­ä»¥å›¾è¡¨çš„å½¢å¼æ”¶é›†ç”¨æˆ·ç¾¤ç»„[+å¸¦æœ‰ç¤ºä¾‹çš„dockerå›¾åƒ]</a></li>
<li><a href="../zh-CN464513/index.html">Duffleï¼šXD Designçš„å˜å½¢é‡‘åˆš</a></li>
<li><a href="../zh-CN464515/index.html">å¦‚ä½•åˆ¶ä½œç”µå­é‚®ä»¶è€Œä¸æ˜¯ä¸€å›¢ç³Ÿï¼šå®ç”¨æŠ€å·§</a></li>
<li><a href="../zh-CN464523/index.html">ITä¸šåŠ¡çš„æ”¯ä»˜ç³»ç»Ÿï¼ˆPSPï¼‰ï¼šæˆ‘ä»¬å‘æŒ¥é‡è¦ä½œç”¨</a></li>
<li><a href="../zh-CN464525/index.html">æ‚¨è‡ªå·±çš„JSONè½¬æ¢å™¨æˆ–æœ‰å…³ExpressionTreesçš„æ›´å¤šå†…å®¹</a></li>
<li><a href="../zh-CN464529/index.html">å¯¹äºç«äº‰å¯¹æ‰‹çš„åå­—è¿›è¡Œçš„ä¸Šä¸‹æ–‡å¹¿å‘Šï¼Œç°åœ¨å¯ä»¥è¢«ç½šæ¬¾500,000å¢å¸ƒã€‚</a></li>
<li><a href="../zh-CN464535/index.html">KickScooter T60ç”µåŠ¨æ»‘æ¿è½¦çš„è®¾å¤‡å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯</a></li>
<li><a href="../zh-CN464537/index.html">Arduino DIYæ¶é­”è½®æ’­</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>