<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ®Ô∏è üëâüèø üòÇ Backup pronto: destruindo mitos do feriado ‚ùå üêß üë®üèæ‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O backup n√£o √© uma tecnologia da moda que √© gritada por todos os ferros. S√≥ precisa estar em qualquer empresa s√©ria, s√≥ isso. V√°rios milhares de servi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Backup pronto: destruindo mitos do feriado</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/psb/blog/446054/"><img src="https://habrastorage.org/webt/jj/2-/kj/jj2-kjibauvtmhuwadefby7xbfk.jpeg"><br><br>  O backup n√£o √© uma tecnologia da moda que √© gritada por todos os ferros.  S√≥ precisa estar em qualquer empresa s√©ria, s√≥ isso.  V√°rios milhares de servidores s√£o armazenados em backup em nosso banco - este √© um trabalho complicado e interessante, sobre algumas de suas sutilezas, bem como sobre conceitos err√¥neos t√≠picos sobre backups que eu apenas quero contar. <br><a name="habracut"></a><br>  Eu tenho lidado com esse t√≥pico h√° quase 20 anos, dos quais nos √∫ltimos 2 anos - no Promsvyazbank.  No come√ßo da pr√°tica, fiz backup quase manualmente, com scripts que simplesmente copiavam os arquivos.  Em seguida, apareceram ferramentas convenientes no Windows: utilit√°rio Robocopy para preparar arquivos e NT Backup para copiar.  E chegou a hora de um software especializado, principalmente o Veritas Backup Exec, que agora √© chamado de Symantec Backup Exec.  Por isso, conhe√ßo os backups h√° muito tempo. <br><br>  Simplificando, fazer backup √© salvar uma c√≥pia dos dados (m√°quinas virtuais, aplicativos, bancos de dados e arquivos), apenas com certa regularidade.  Qualquer caso geralmente se manifesta na forma de uma falha de hardware ou l√≥gica e leva √† perda de dados.  A tarefa do sistema de backup √© reduzir as perdas resultantes da perda de informa√ß√µes.  Uma falha de hardware √©, por exemplo, uma falha no servidor ou no armazenamento em que o banco de dados est√° localizado.  L√≥gico - √© a perda ou altera√ß√£o de uma parte dos dados, inclusive devido ao fator humano: excluiu inadvertidamente uma tabela, arquivo, lan√ßou um script para executar uma curva.  Tamb√©m existem requisitos do regulador para armazenar um determinado tipo de informa√ß√£o por um longo per√≠odo, por exemplo, at√© v√°rios anos. <br><br><img src="https://habrastorage.org/webt/ju/ze/yn/juzeyn9qj0stijccsb-shw1jwem.jpeg"><br><br>  O apelo mais t√≠pico para backups √© a restaura√ß√£o de uma c√≥pia salva dos bancos de dados para a implanta√ß√£o de v√°rios sistemas de teste, clones para desenvolvedores. <br><br>  Existem v√°rios mitos t√≠picos sobre backups que j√° √© hora de dissipar.  Aqui est√£o os mais famosos deles. <br><br><h3>  Mito 1. O backup tem sido apenas uma pequena fun√ß√£o nos sistemas de seguran√ßa ou armazenamento. </h3><br>  Os sistemas de backup ainda s√£o uma classe separada de solu√ß√µes e muito independentes.  Neg√≥cios muito importantes confiados a eles.  Na verdade, eles s√£o a √∫ltima linha de defesa quando se trata de seguran√ßa de dados.  Portanto, o backup funciona em seu pr√≥prio ritmo, em sua pr√≥pria agenda.  Um relat√≥rio di√°rio √© gerado nos servidores; existem eventos que atuam como gatilhos para o sistema de monitoramento. <br><br><img src="https://habrastorage.org/webt/vz/gw/bq/vzgwbq8w4quthyjdlut440yhxmo.png"><br><br>  Al√©m disso, o modelo de acesso ao sistema de backup permite delegar parte da autoridade aos administradores dos sistemas de destino para gerenciar backups. <br><br><h3>  Mito 2. Quando h√° RAID, o backup n√£o √© mais necess√°rio. </h3><br><img src="https://habrastorage.org/webt/rb/eg/po/rbegpocgmcagpiqkh12qkmxfzf0.jpeg"><br><br>  Sem d√∫vida, matrizes RAID e replica√ß√£o de dados s√£o uma boa maneira de proteger os sistemas de informa√ß√µes contra falhas de hardware e, se houver um servidor em espera, voc√™ poder√° alternar rapidamente para ele em caso de falha da m√°quina principal. <br><br>  Dos erros l√≥gicos cometidos pelos usu√°rios do sistema, a redund√¢ncia e a replica√ß√£o n√£o s√£o salvas.  Aqui est√° um servidor em espera com uma grava√ß√£o atrasada - sim, ele pode ajudar se um erro for detectado antes de ser sincronizado.  E se o momento for perdido?  Somente o backup feito no prazo ajudar√° aqui.  Se voc√™ souber que os dados foram alterados ontem, poder√° restaurar o sistema antes de ontem e extrair os dados necess√°rios.  Dado que os erros l√≥gicos s√£o os mais comuns, o bom e antigo backup permanece uma ferramenta comprovada e necess√°ria. <br><br><h3>  Mito 3. O backup √© realizado uma vez por m√™s. </h3><br>  A frequ√™ncia do backup √© um par√¢metro configur√°vel, principalmente dependendo dos requisitos do sistema de backup.  √â bem poss√≠vel encontrar dados que quase nunca mudam e n√£o s√£o particularmente importantes, a perda deles n√£o ser√° cr√≠tica para a empresa. <br>  Na verdade, eles podem ser copiados uma vez por m√™s ou at√© menos.  Por√©m, dados mais cr√≠ticos s√£o armazenados com mais frequ√™ncia, dependendo do indicador RPO (Objetivo do ponto de recupera√ß√£o), que define a perda de dados aceit√°vel.  Pode ser uma vez por semana, uma vez por dia ou at√© v√°rias vezes por hora.  Temos esses logs de transa√ß√µes do DBMS. <br><br><img src="https://habrastorage.org/webt/7q/nq/g6/7qnqg6vvg7d_facrc0bqzgk4yg0.png"><br><br>  Ao introduzir sistemas em opera√ß√£o comercial, a documenta√ß√£o de backup √© necessariamente aprovada, o que reflete os principais pontos, o cronograma de atualiza√ß√£o, o procedimento para restaurar o sistema, o procedimento para armazenar backups e similares. <br><br><h3>  Mito 4. O volume de c√≥pias est√° em constante crescimento e ocupa todo o espa√ßo alocado completamente </h3><br>  Os backups t√™m uma vida √∫til limitada.  N√£o faz sentido, por exemplo, armazenar todos os 365 backups di√°rios durante o ano.  Como regra, √© permitido manter c√≥pias di√°rias por 2 semanas, ap√≥s as quais s√£o substitu√≠das por novas, e a vers√£o que foi feita primeiro no m√™s permanece para armazenamento a longo prazo.  Por sua vez, tamb√©m √© armazenado por um certo tempo - cada c√≥pia tem uma vida √∫til. <br><br><img src="https://habrastorage.org/webt/rx/1w/qx/rx1wqxrhi3smk0dwoa7o5eublfy.jpeg"><br><br>  H√° prote√ß√£o contra perda de dados.  A regra se aplica: antes que o backup seja exclu√≠do, √© necess√°rio formar o seguinte.  Portanto, os dados n√£o ser√£o exclu√≠dos se o backup falhar, por exemplo, devido √† indisponibilidade do servidor.  N√£o apenas o per√≠odo de tempo √© respeitado, mas tamb√©m o n√∫mero de c√≥pias no conjunto √© controlado.  Se o sistema disser que deve haver dois backups completos, sempre haver√° dois, e o antigo ser√° exclu√≠do somente quando um novo terceiro for gravado com √™xito.  Portanto, o aumento no volume ocupado pelo arquivo de backup est√° associado apenas ao aumento no n√∫mero de dados protegidos e n√£o depende do tempo. <br><br><h3>  Mito 5. Backup iniciado - tudo travou </h3><br>  √â melhor dizer o seguinte: se tudo travar, as m√£os do administrador n√£o crescer√£o a partir da√≠.  Em geral, o desempenho do backup depende de muitos fatores.  Por exemplo, a partir da velocidade do pr√≥prio sistema de backup: com que rapidez existem armazenamentos de disco, bibliotecas de fitas.  Com a velocidade dos servidores do sistema de backup: eles conseguem processar dados, executar compacta√ß√£o e desduplica√ß√£o.  Bem como a velocidade das linhas de comunica√ß√£o entre o cliente e o servidor. <br><br>  Um backup pode entrar em um ou v√°rios encadeamentos, dependendo se o sistema redundante suporta multithreading.  Por exemplo, o Oracle DBMS permite que voc√™ forne√ßa v√°rios encadeamentos, de acordo com o n√∫mero de processadores dispon√≠veis, at√© que a velocidade de transmiss√£o esteja contra a limita√ß√£o da largura de banda da rede. <br><br>  Se voc√™ tentar fazer backup com um grande n√∫mero de threads, ou seja, uma chance de sobrecarregar um sistema em funcionamento, ele realmente come√ßar√° a ficar mais lento.  Portanto, o n√∫mero ideal de threads √© selecionado para fornecer desempenho suficiente.  Se mesmo a menor redu√ß√£o no desempenho for cr√≠tica, existe uma √≥tima op√ß√£o quando o backup √© realizado n√£o no servidor de batalha, mas no modo de espera por clone na terminologia do banco de dados.  Este processo n√£o carrega o sistema de produ√ß√£o principal.  Os dados podem ser obtidos atrav√©s de um n√∫mero maior de threads, pois o servidor n√£o √© usado para manuten√ß√£o. <br><br>  Em grandes organiza√ß√µes, uma rede separada √© criada para o sistema de backup, para que o backup n√£o afete as vendas.  Al√©m disso, o tr√°fego pode n√£o ser transmitido pela rede, mas pela SAN. <br><img src="https://habrastorage.org/webt/q3/mz/z_/q3mzz_hn9ubpwzitr7nusd_iyek.jpeg"><br>  Tentamos distribuir a carga tamb√©m ao longo do tempo.  Os backups geralmente ficam fora do hor√°rio de funcionamento: √† noite, nos fins de semana.  Al√©m disso, eles n√£o iniciam tudo ao mesmo tempo.  Os backups de m√°quinas virtuais s√£o um caso especial.  O processo praticamente n√£o afeta o desempenho da pr√≥pria m√°quina; portanto, o backup pode ser manchado durante o dia e n√£o adiar tudo durante a noite.  Existem muitas sutilezas, considerando tudo, o backup n√£o afetar√° o desempenho do sistema. <br><br><h3>  Mito 6. Lan√ßado um sistema de backup - aqui est√° a toler√¢ncia a falhas. </h3><br>  Nunca se esque√ßa que um sistema de backup √© a √∫ltima linha de defesa, o que significa que devem existir outros cinco sistemas √† sua frente que garantam a continuidade, alta disponibilidade e toler√¢ncia a desastres da infraestrutura de TI e sistemas de informa√ß√£o da empresa. <br><br>  N√£o vale a pena esperar que o backup restaure todos os dados e aumente rapidamente o servi√ßo desativado.  A perda de dados desde o momento do backup at√© o momento da falha √© garantida, e os dados no novo servidor podem ser carregados por v√°rias horas (ou dias, por sorte).  Portanto, faz sentido criar sistemas tolerantes a falhas completos sem mudar tudo para o backup. <br><br><h3>  Mito 7. Configurei um backup uma vez, verifiquei se ele funciona.  Resta apenas olhar para os logs </h3><br>  Este √© um dos mitos mais prejudiciais, dos quais voc√™ s√≥ percebe falso durante o incidente.  Logs sobre backups bem-sucedidos n√£o garantem que tudo correu como deveria.  √â importante verificar antecipadamente a c√≥pia armazenada quanto √† capacidade de implanta√ß√£o.  Ou seja, inicie o processo de recupera√ß√£o em um ambiente de teste e observe o resultado. <br><br><h3>  E um pouco sobre o trabalho do administrador do sistema </h3><br>  No modo manual, ningu√©m copia dados h√° muito tempo.  O IBS moderno pode fazer backup de quase tudo, voc√™ s√≥ precisa configur√°-lo corretamente.  Se um novo servidor foi adicionado, registre pol√≠ticas: selecione o conte√∫do que ser√° copiado, especifique op√ß√µes de armazenamento e aplique a programa√ß√£o. <br><br><img src="https://habrastorage.org/webt/h9/ad/bs/h9adbsv27ou7fri6lntvdmxtbfq.jpeg"><br><br>  Ao mesmo tempo, ainda h√° muito trabalho devido √† extensa frota de servidores, incluindo bancos de dados, sistemas de correio, clusters de m√°quinas virtuais e recursos de arquivos no Windows e Linux / Unix.  Os funcion√°rios que suportam o sistema de backup n√£o est√£o ociosos. <br><blockquote>  Em homenagem ao feriado, gostaria de desejar a todos os administradores nervos fortes, clareza de movimentos e espa√ßo infinito para armazenar backups! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446054/">https://habr.com/ru/post/pt446054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446042/index.html">DJI Mavic 2 Pro ap√≥s seis meses de uso</a></li>
<li><a href="../pt446046/index.html">A expans√£o do universo √© a maior fal√°cia da hist√≥ria da ci√™ncia</a></li>
<li><a href="../pt446048/index.html">A uni√£o do Arduino e o processador cl√°ssico</a></li>
<li><a href="../pt446050/index.html">Flutter. Chaves! Para que eles servem?</a></li>
<li><a href="../pt446052/index.html">Criando a voz e o tom do seu produto</a></li>
<li><a href="../pt446056/index.html">Uma maneira simples de conversar com seu site</a></li>
<li><a href="../pt446058/index.html">Como criar SDN - Oito ferramentas de c√≥digo aberto</a></li>
<li><a href="../pt446060/index.html">S√≠ntese de altos sonhos moleculares</a></li>
<li><a href="../pt446062/index.html">Quo vadis. Proibi√ß√µes ao desenvolvedor no Google Play</a></li>
<li><a href="../pt446064/index.html">Especialista: atualiza√ß√£o de software n√£o vai ajudar o casamento no planador da Boeing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>