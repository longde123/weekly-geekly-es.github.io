<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüåæ ‚úçüèæ ü§∫ EDA desde un √°ngulo diferente ‚óæÔ∏è üßëüèø‚Äçü§ù‚Äçüßëüèø üîõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hablaremos de alimentos, sino de an√°lisis de datos exploratorios (EDA ), que es un preludio obligatorio para cualquier LD duro. 

 Seamos honestos,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>EDA desde un √°ngulo diferente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480532/"><img src="https://habrastorage.org/webt/zr/g9/ed/zrg9ed_nsynok9a9aa2st6s0vjo.jpeg" alt="imagen"><br><br>  No hablaremos de alimentos, sino de <a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">an√°lisis de datos exploratorios (EDA</a> ), que es un preludio obligatorio para cualquier LD duro. <br><br>  Seamos honestos, el proceso es bastante aburrido, y para obtener al menos algunas ideas significativas sobre nuestros datos, debe dedicar el tiempo suficiente activamente a su biblioteca de visualizaci√≥n favorita. <br><br>  Ahora imagine que somos bastante vagos (pero curiosos) y seguiremos este postulado a lo largo de este art√≠culo. <br><a name="habracut"></a><br>  En base a esto, nos hacemos la siguiente pregunta: ¬øexiste una herramienta dif√≠cil en la naturaleza que simplemente le permita presionar CTRL + ENTRAR en su IDE favorito y mostrar en una sola pantalla (sin desplazarse hacia abajo e innumerables facetas microsc√≥picas) una imagen completa con informaci√≥n √∫til sobre nuestro conjunto de datos? <br><br>  Al mismo tiempo, tenemos en cuenta un pensamiento diferente: si existe un instrumento de este tipo, no reemplazar√° el cl√°sico EDA, pero ser√° de gran ayuda para nosotros en aquellos casos en que no tenga que pasar horas en la visualizaci√≥n para enfatizar r√°pidamente los patrones principales en nuestros datos. <br><br>  La estructura de este art√≠culo: <br><br><ol><li>  <a href="https://habr.com/ru/post/480532/">Peque√±o preprocesamiento</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Visualizaci√≥n de predictores</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Discretizaci√≥n de variables.</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Correlaci√≥nfunnel</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Correlaciones cruzadas clasificadas</a> </li><li>  <a href="https://habr.com/ru/post/480532/">easyalluvial</a> </li></ol><br>  Terminamos con la introducci√≥n y tomamos como base un ejemplo pr√°ctico. <br><br><div class="spoiler">  <b class="spoiler_title">Enfoque de ejemplo</b> <div class="spoiler_text">  <sub><i>Inicialmente, quer√≠a tomar una matriz de datos oscura, pero al final me di cuenta de que, por ejemplo, esto no ser√≠a muy bueno: los patrones encontrados pueden parecer poco obvios y, por lo tanto, controvertidos, pero nuestro objetivo es preparar la matriz con algoritmos que no tienen informaci√≥n a priori y nos mostrar√°n qu√© ya lo sabemos, lo que confirma nuestra viabilidad.</i></sub> <sub><br></sub> <br></div></div><br>  El Titanic me pareci√≥ el m√°s conveniente como ejemplo, su tama√±o no es demasiado peque√±o como el de Iris, tiene variables no informativas, est√° bien estudiado y tiene predictores claros y, lo que es m√°s importante, una base hist√≥rica. <br><br>  Adem√°s, encontr√© un art√≠culo sobre Habr√© donde el autor realiz√≥ un EDA bastante meticuloso de este conjunto de datos y, en base a las im√°genes, demostr√© los hallazgos.  Este ser√° un tipo de nuestra l√≠nea de base. <br><br>  Enlace al art√≠culo con un gran nombre para nuestro "Baseline_EDA": <br>  <a href="https://habr.com/ru/company/mlclass/blog/270973/">Titanic en Kaggle: no leer√°s esta publicaci√≥n hasta el final</a> . <br><br>  Para no molestarnos con la descarga / lectura de csv de la red, capturamos inmediatamente el conjunto de datos original de CRAN <br><br><pre><code class="plaintext hljs">install.packages("titanic") data("titanic_train",package="titanic")</code> </pre> <br><h1><a name="preprocess"></a>  Breve preprocesamiento </h1><br>  Este ejemplo est√° tan marcado en la red mediante el preprocesamiento hacia arriba y hacia abajo que no voy a engullir particularmente este tema, estoy haciendo cosas b√°sicas: extraigo el nombre del gonoratora (t√≠tulo) como un predictor importante y lo uso para llenar los vac√≠os de edad. <br><br><pre> <code class="plaintext hljs">library(tidyverse) titanic_train %&gt;% str d &lt;- titanic_train %&gt;% as_tibble %&gt;% mutate(title=str_extract(Name,"\\w+\\.") %&gt;% str_replace(fixed("."),"")) %&gt;% mutate(title=case_when(title %in% c('Mlle','Ms')~'Miss', #   title=='Mme'~ 'Mrs', title %in% c('Capt','Don','Major','Sir','Jonkheer', 'Col')~'Sir', title %in% c('Dona', 'Lady', 'Countess')~'Lady', TRUE~title)) %&gt;% mutate(title=as_factor(title), Survived=factor(Survived,levels = c(0,1),labels=c("no","yes")), Sex=as_factor(Sex), Pclass=factor(Pclass,ordered = T)) %&gt;% group_by(title) %&gt;% #  -      mutate(Age=replace_na(Age,replace = median(Age,na.rm = T))) %&gt;% ungroup #             table(d$title,d$Sex)</code> </pre><br><div class="scrollable-table"><table><tbody><tr><th>  titulo </th><th>  hombre </th><th>  hembra </th></tr><tr><td>  Se√±or </td><td>  517 </td><td>  0 0 </td></tr><tr><td>  La se√±ora </td><td>  0 0 </td><td>  126 </td></tr><tr><td>  Se√±orita </td><td>  0 0 </td><td>  185 </td></tr><tr><td>  Maestro </td><td>  40 </td><td>  0 0 </td></tr><tr><td>  Se√±or </td><td>  8 </td><td>  0 0 </td></tr><tr><td>  Rev </td><td>  6 6 </td><td>  0 0 </td></tr><tr><td>  Dr </td><td>  6 6 </td><td>  1 </td></tr><tr><td>  Se√±ora </td><td>  0 0 </td><td>  2 </td></tr></tbody></table></div><br><h1><a name="lessinform"></a>  No todos los yogures son igualmente saludables ... </h1><br>  Por lo general, al comienzo del an√°lisis, pongo a un lado las variables no informativas (dejo de lado y no elimino permanentemente, porque cuando obtengo el m√°ximo del modelo, la ingenier√≠a para algunas de las variables pendientes da un cierto porcentaje de la ganancia de calidad del modelo). <br><br>  Las m√©tricas para evaluar la "utilidad" de una variable son freqRatio (la relaci√≥n de las frecuencias del valor m√°s popular en relaci√≥n con el segundo valor en frecuencia) y percentUnique (potencia o cardinalidad: la proporci√≥n de un n√∫mero √∫nico de valores del n√∫mero total de valores) <br>  La ayuda detallada se puede ver en el paquete caret <br> <code>?caret::nearZeroVar</code> <br> <br><pre> <code class="plaintext hljs">(feat.scan &lt;- caret::nearZeroVar(x = d,saveMetrics = T) %&gt;% rownames_to_column("featName") %&gt;% as_tibble)</code> </pre> <br><img src="https://habrastorage.org/webt/8q/hs/ji/8qhsji8_xsdpbtizf6bqvghdk3a.jpeg" alt="imagen"><br><br>  Es m√°s conveniente para m√≠ monitorear variables en un plano bidimensional (registrando ambos ejes para que los puntos no se sobreploten en una pila peque√±a debido a puntos at√≠picos). <br>  Nunca me pregunt√© si este paso es EDA, pero mientras escrib√≠a este art√≠culo pens√©: ahora estamos realizando un an√°lisis exploratorio de alguna utilidad de los predictores, su evaluaci√≥n visual, entonces, ¬øpor qu√© no es EDA? <br><br><pre> <code class="plaintext hljs"># install.packages("ggrepel") library(ggrepel) ggplot(feat.scan,aes(x=percentUnique,y=freqRatio,label=featName,col=featName))+ geom_point(size=2)+ geom_text_repel(data = feat.scan,size=5)+scale_x_log10()+scale_y_log10()+theme_bw()</code> </pre><br><img src="https://habrastorage.org/webt/7v/fc/ec/7vfcecjnvcaog5hh93sbziy8ouc.jpeg" alt="imagen"><br><br>  Consideramos que los predictores at√≠picos no son informativos, ya sea en t√©rminos de potencia (eje X) o relaci√≥n de frecuencia (eje Y) y, en consecuencia, reservamos: <br>  Id. De pasajero  Nombre;  Boleto  Caba√±a <br><br><pre> <code class="plaintext hljs">useless.feature &lt;- c("PassengerId","Name","Ticket","Cabin") d &lt;- d %&gt;% select_at(vars(-useless.feature))</code> </pre><br><h1><a name="discret"></a>  Este universo es discreto </h1><br>  Para comprender c√≥mo las bibliotecas enumeradas a continuaci√≥n preparan los datos, en esta secci√≥n mostramos con peque√±os ejemplos lo que sucede en estas bibliotecas en la etapa de preparaci√≥n de datos. <br><br>  En el primer paso, es necesario llevar todos los datos a un solo tipo; a menudo, los datos en un conjunto pueden ser categ√≥ricos y num√©ricos, adem√°s, los n√∫meros pueden tener valores at√≠picos y los datos categ√≥ricos pueden ser categor√≠as raras. <br><br>  Para convertir variables continuas en categ√≥ricas, podemos descomponer nuestros n√∫meros en contenedores con un cierto per√≠odo de muestreo. <br><br>  El ejemplo m√°s simple de descomposici√≥n en 5 bin: <br><br><pre> <code class="plaintext hljs">iris %&gt;% as_tibble %&gt;% mutate_if(is.numeric,.funs = ggplot2::cut_number,n=5)</code> </pre><br><img src="https://habrastorage.org/webt/mz/bf/wb/mzbfwb5-xy8iddrjy7gvh_4mfvk.jpeg" alt="imagen"><br><br>  Para obtener la fuerza y ‚Äã‚Äãla directividad de las relaciones de elementos individuales entre los predictores, se utiliza un segundo truco: <a href="https://hackernoon.com/what-is-one-hot-encoding-why-and-when-do-you-have-to-use-it-e3c6186d008f">una codificaci√≥n activa</a> <br><br><pre> <code class="plaintext hljs">library(recipes) iris %&gt;% as_tibble %&gt;% mutate_if(is.numeric,cut_number,n=5) %&gt;% recipe(x = .) %&gt;% step_dummy(all_nominal(),one_hot = T) %&gt;% prep %&gt;% juice %&gt;% glimpse</code> </pre><br>  En lugar de 5 predictores, ahora tenemos 23 de ellos, pero binarios: <br><br><img src="https://habrastorage.org/webt/tv/qw/c4/tvqwc4gibltq3lghux0zhjgzwhc.jpeg" alt="imagen"><br><br>  En general, los trucos de conversi√≥n terminan all√≠, pero el trabajo de 2 de 3 bibliotecas para nuestro EDA "no cl√°sico" comienza con estas etapas. <br><br>  A continuaci√≥n, presento la funcionalidad de 3 bibliotecas de visualizaci√≥n: <br><br><ol><li>  <b>Correlationfunnel</b> : muestra el efecto de los valores predictores individuales en un objetivo (es decir, puede denominarse aprendizaje supervisado EDA) </li><li>  <b>Lares</b> : muestra el efecto de los valores de predictores individuales sobre otros valores individuales de otros predictores (es decir, puede denominarse aprendizaje no supervisado EDA) </li><li>  <b>easyalluvial</b> : muestra la relaci√≥n acumulativa de los valores agrupados de los principales predictores de "X" por objetivo (es decir, puede denominarse aprendizaje supervisado EDA) </li></ol><br>  Es evidente que su funcionalidad es diferente, por lo tanto, al demostrar estas bibliotecas, citar√© las conclusiones del autor del <a href="https://habr.com/ru/company/mlclass/blog/270973/">art√≠culo de</a> nuestro "Baseline_EDA" dependiendo de la funcionalidad descrita anteriormente de este paquete.  (Por ejemplo, si el autor muestra la dependencia de la edad en la supervivencia, entonces insertar√© dicha cita en el Correlationfunnel, si la edad est√° en la clase, luego en Lares, etc.) <br><br>  La primera biblioteca est√° en el escenario. <br><br><h1><a name="corfun"></a>  correlationfunnel </h1><br>  <a href="https://business-science.github.io/correlationfunnel/">correlationfunnel es acelerar el an√°lisis de datos exploratorios (EDA)</a> <br><img src="https://habrastorage.org/webt/j3/9t/zb/j39tzbul1cekgctjk7znwkdszhu.jpeg" alt="imagen"><br><br>  La metodolog√≠a est√° bien descrita en la <a href="https://cran.r-project.org/web/packages/correlationfunnel/vignettes/key_considerations.html">vi√±eta de</a> la biblioteca; dar√© un fragmento de c√°lculo de la correlaci√≥n por valores binarios <br><br><img src="https://habrastorage.org/webt/hd/7d/li/hd7dliqgmjdcsufitigzylb7hvy.jpeg" alt="imagen"><br><br>  La biblioteca asume la presencia de un objetivo (variable dependiente) en nuestros datos e inmediatamente en una imagen muestra la fuerza y ‚Äã‚Äãla direcci√≥n de la relaci√≥n y tambi√©n se clasifica en orden descendente de esta fuerza formando un embudo visual (de hecho, de aqu√≠ proviene el nombre). <br><br>  Las funciones de binarizaci√≥n integradas en la biblioteca le permiten reducir categor√≠as peque√±as a Otros. <br><br>  Como la biblioteca no funciona con variables enteras, las convertiremos a num√©ricas y volveremos a nuestro Titanic. <br><br><pre> <code class="plaintext hljs">#install.packages("correlationfunnel") library(correlationfunnel) d &lt;- d %&gt;% mutate_if(is.integer,as.numeric) d %&gt;% binarize(n_bins = 5,thresh_infreq = .02,one_hot = T) %&gt;% #    correlate(target = Survived__yes) %&gt;% plot_correlation_funnel() # "interactive = T" - plotly!</code> </pre><br><img src="https://habrastorage.org/webt/-t/wj/l-/-twjl-woesnakv9rnym9ndugn5i.jpeg" alt="imagen"><br><br>  En el eje X, tenemos la fuerza y ‚Äã‚Äãla direcci√≥n de correlaci√≥n, en el eje Y, nuestros predictores se clasifican en orden descendente.  El primero siempre refleja el objetivo como  √©l tiene la correlaci√≥n m√°s fuerte consigo mismo (-1; 1). <br><br>  Veamos c√≥mo las conclusiones de este gr√°fico se superponen con las conclusiones del autor de nuestro "Baseline_EDA". <br><blockquote>  El siguiente gr√°fico confirma la teor√≠a de que cuanto mayor sea la clase de cabina de pasajeros, mayores ser√°n las posibilidades de supervivencia.  (Por "arriba", me refiero al orden inverso, porque la primera clase es m√°s alta que la segunda y, especialmente, la tercera). </blockquote>  El embudo muestra que la clase es el tercer predictor en t√©rminos de fuerza de correlaci√≥n, y de hecho, en la tercera clase, la correlaci√≥n inversa, en la primera, es muy positiva. <br><blockquote>  Compare las posibilidades de supervivencia para hombres y mujeres.  Los datos confirman la teor√≠a expresada anteriormente. <br><br>  (En general, ya podemos decir que los principales factores del modelo ser√°n el g√©nero del pasajero) </blockquote><br>  El embudo muestra que el sexo del pasajero es el segundo seg√∫n el grado de correlaci√≥n, el g√©nero femenino se correlaciona con la supervivencia, el g√©nero masculino se correlaciona con la muerte. <br><blockquote>  Tambi√©n puede probar la hip√≥tesis de que los m√°s j√≥venes sobreviven, porque  se mueven m√°s r√°pido, nadan mejor, etc. <br><br>  Como puede ver, una dependencia expl√≠cita no es visible aqu√≠. </blockquote><br>  El embudo realmente habla del significado d√©bil de este predictor (recuerdo que el gonorante / t√≠tulo contiene la edad, por lo que la edad no es tan significativa), pero incluso aqu√≠ el embudo muestra que hay m√°s posibilidades de sobrevivir en las categor√≠as "menos infinito - 20 a√±os" (es decir, ni√±os ) y 30-38 (personas ricas, posiblemente 1 clase). <br><blockquote>  Presentemos un indicador como Porcentaje de supervivencia y analicemos su dependencia de los grupos que resultaron en la etapa anterior. </blockquote><br>  (el grupo del autor significa el t√≠tulo). <br><br>  Funnel confirma completamente los hallazgos del autor. <br><blockquote>  Ahora veamos la informaci√≥n que se puede obtener del n√∫mero de parientes en el barco. <br><br>  Es muy probable que la ausencia de parientes, as√≠ como un gran n√∫mero, afecte negativamente la supervivencia. </blockquote><br>  SibSP en el embudo dice claramente lo mismo. <br><br>  Y, por supuesto, adem√°s de las conclusiones del autor, aqu√≠ puede ver otros patrones, dejar√© el placer de la contemplaci√≥n al lector. <br><br><h1><a name="lrs"></a>  Lares </h1><br>  <a href="https://datascienceplus.com/find-insights-with-ranked-cross-correlations/">Encuentre ideas con correlaciones cruzadas clasificadas</a> <br><br><img src="https://habrastorage.org/webt/sd/yh/6g/sdyh6ghnnhtnjid9ay2k5s3d9we.png" alt="imagen"><br><br>  El autor de esta biblioteca fue a√∫n m√°s lejos: muestra las dependencias no solo del objetivo, sino tambi√©n de todo. <br><br><blockquote>  Las correlaciones cruzadas clasificadas <u>no solo explican las relaciones de una caracter√≠stica de destino espec√≠fica con el resto, sino tambi√©n la relaci√≥n de todos los valores en sus datos</u> en un formato tabular f√°cil de usar y comprender. <br><br>  Convierte autom√°ticamente las columnas categ√≥ricas en num√©ricas con una codificaci√≥n activa (1s y 0s) y otras agrupaciones inteligentes como etiquetas de "otros" para valores no muy frecuentes y nuevas caracter√≠sticas desactualizadas. </blockquote><br><br>  Usando el enlace de arriba, puede ver un ejemplo en el que el autor alimenta el conjunto de datos de Star Wars a su paquete y demuestra las dependencias encontradas, me he quedado en su p√°gina, muy bien. <br><br>  Probemos con nuestro ejemplo. <br><br><pre> <code class="plaintext hljs"># ,     : # devtools::install_github("laresbernardo/lares") library(lares) corr_cross(df = d,top = 30)</code> </pre><br><img src="https://habrastorage.org/webt/wd/mu/pv/wdmupvkf00yjchynm1mmsj_nxog.jpeg" alt="imagen"><br><br>  Adem√°s de la intersecci√≥n con las conclusiones basadas en citas, en Correlationfunnell presentamos algunas citas que podemos ver aqu√≠ independientemente del objetivo: <br><blockquote>  Tambi√©n se pueden encontrar otros patrones.  Existe una correlaci√≥n negativa entre la edad y la clase, que probablemente se deba a que los pasajeros mayores pueden pagar una cabina m√°s cara con mayor frecuencia. </blockquote><br>  En la cita anterior, el autor saca esa conclusi√≥n sobre el an√°lisis de correlaci√≥n de 2 campos en total, pero en vista de One-Hot-Encoding, esto es evidente a partir de la fuerte correlaci√≥n positiva entre Age + P_Class_1. <br><blockquote>  Adem√°s, el precio del boleto y la clase est√°n estrechamente relacionados (alto coeficiente de correlaci√≥n), lo cual es bastante esperado. </blockquote><br>  Tercera l√≠nea arriba: Tarifa + P_Class_1 <br><br>  Adem√°s de cruzarse con las conclusiones del autor, aqu√≠ se pueden enfatizar cosas mucho m√°s interesantes, tambi√©n dejar√© el placer de la contemplaci√≥n para el lector. <br><br>  Adem√°s de la selecci√≥n opcional de las X ideas m√°s poderosas, tambi√©n puede reflejar la imagen completa y el lugar de estos puntos significativos en la masa total <br><br><pre> <code class="plaintext hljs">corr_cross(df = d,type=2)</code> </pre><br><img src="https://habrastorage.org/webt/us/pa/ud/uspaudtooaflobmfge5tgdi6h6q.jpeg" alt="imagen"><br><br><h1><a name="alluv"></a>  easyalluvial </h1><br>  <a href="https://www.datisticsblog.com/2018/10/intro_easyalluvial/">Exploraci√≥n de datos con parcelas aluviales</a> <br><br><img src="https://habrastorage.org/webt/gm/xg/fp/gmxgfpjhfzpqgqiulecylpd6fge.gif" alt="imagen"><br><br>  Aqu√≠, como en los 2 paquetes anteriores, el autor realiza la binarizaci√≥n de variables num√©ricas al principio, pero luego sus caminos con esas bibliotecas divergen: en lugar de {One-HotEncoding + correlation}, la biblioteca presenta la X superior de los predictores m√°s interesantes (el usuario decide cu√°les transferir) ) por valores, formando flujos cuyo color depende del objetivo, y el ancho de la secuencia en el n√∫mero de observaciones en esta secuencia. <br><br>  Las variables num√©ricas se descomponen en categor√≠as HH (Alto Alto), MH (Medio Alto), M (Medio), ML (Medio Bajo), LL (Bajo Bajo) <br><br>  Primero, tomemos los predictores m√°s significativos basados ‚Äã‚Äãen el gr√°fico del correlationfunnel: <br><br><pre> <code class="plaintext hljs">cor.feat &lt;- c("title","Sex","Pclass","Fare")</code> </pre><br>  A continuaci√≥n, hacemos un horario. <br><br><pre> <code class="plaintext hljs"># install.packages("easyalluvial") library(easyalluvial) al &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") add_marginal_histograms(p = al,data_input = d,keep_labels = F)</code> </pre><br><img src="https://habrastorage.org/webt/p5/rd/xd/p5rdxduvi-21s-xhwhvzxh5og88.jpeg" alt="imagen"><br><br>  Para las citas del autor, volvemos a dibujar el gr√°fico usando los predictores apropiados <br><br><pre> <code class="plaintext hljs">cor.feat &lt;- c("Sex","Pclass","Age") al &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") add_marginal_histograms(p = al,data_input = d,keep_labels = F)</code> </pre><br><img src="https://habrastorage.org/webt/yz/pb/o-/yzpbo-6q9x0relwi6ewtpyqwlke.jpeg" alt="imagen"><br><br><blockquote>  Por ejemplo, el siguiente gr√°fico muestra claramente que los principales grupos de sobrevivientes son mujeres de primer y segundo grado de todas las edades. </blockquote><br>  El gr√°fico tambi√©n muestra que las mujeres sobrevivientes de grado 3 tampoco son un grupo peque√±o <br><br><blockquote>  Y entre los hombres, todos los ni√±os menores de 15 a√±os sobrevivieron, excepto la tercera clase de servicio y una peque√±a proporci√≥n de hombres mayores y principalmente de la primera clase. </blockquote><br>  Lo anterior se confirma, pero nuevamente vemos los flujos de hombres sobrevivientes de clase 3 en la categor√≠a de edad LL, ML. <br><br>  Todo lo anterior era sobre el paquete "easyalluvial", pero el autor escribi√≥ un segundo paquete "parcats" que en la parte superior de la gr√°fica hace que el gr√°fico anterior sea interactivo (como en el t√≠tulo de esta secci√≥n). <br>  Esto hace posible no solo ver el contexto de la informaci√≥n sobre herramientas, sino tambi√©n reorientar los flujos para una mejor percepci√≥n visual.  (desafortunadamente, mientras que la biblioteca no est√° muy optimizada y se ralentiza en Titanic) <br><br><pre> <code class="plaintext hljs"># install.packages("parcats") library(parcats) cor.feat &lt;- c("title","Sex","Pclass","Fare") a &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") parcats(p = a,marginal_histograms = T,data_input = d)</code> </pre><br><img src="https://habrastorage.org/webt/bt/bc/c4/btbcc4rkdkc6b6jwh9it_mk1y0a.jpeg" alt="imagen"><br><br><h2>  Bono </h2><br>  La biblioteca easyalluvial, adem√°s del an√°lisis exploratorio de datos, tambi√©n se puede utilizar como un int√©rprete para los modelos de caja negra (modelos que analizan los par√°metros de los cuales no se pueden entender, por qu√© l√≥gica el modelo da una respuesta basada en ciertos predictores). <br><br>  Enlace al art√≠culo del autor: <a href="https://www.datisticsblog.com/2019/04/visualising-model-response-with-easyalluvial/">Visualice la respuesta del modelo con gr√°ficos aluviales</a> <br>  Y la peculiaridad es que de todas las bibliotecas que vi, el m√°ximo en un gr√°fico explica la respuesta del cuadro negro en un sistema de coordenadas de no m√°s de 2 dimensiones (una para cada predictor), el color explica la respuesta. <br><br>  La biblioteca easyalluvial le permite hacer esto en m√°s de 2 predictores al mismo tiempo (por supuesto, es mejor no dejarse llevar). <br><br>  Por ejemplo, entrenemos un bosque aleatorio en nuestra matriz de datos y reflejemos la explicaci√≥n de un bosque aleatorio utilizando 3 predictores. <br><br><pre> <code class="plaintext hljs">library(ranger) m &lt;- ranger(formula = Survived~.,data = d,mtry = 6,min.node.size = 5, num.trees = 600, importance = "permutation") library(easyalluvial) (imp &lt;- importance(m) %&gt;% as.data.frame %&gt;% easyalluvial::tidy_imp(imp = .,df=d)) #      #  N-     (   .  !)   dspace &lt;- get_data_space(df = d,imp,degree = 3) #     pred = predict(m, data = dspace) alluvial_model_response(pred$predictions, dspace, imp, degree = 3)</code> </pre><br>  Adem√°s, el autor tiene un conector para los modelos CARET (no s√© cu√°n relevante esto ahora est√° considerando tidymodels) <br><br><pre> <code class="plaintext hljs">library(caret) trc &lt;- trainControl(method = "none") m &lt;- train(Survived~.,data = d,method="rf",trControl=trc,importance=T) alluvial_model_response_caret(train = m,degree = 4,bins=5,stratum_label_size = 2.8)</code> </pre><br><img src="https://habrastorage.org/webt/qq/qf/iv/qqqfivwgoucmfoikmwhp9mdwelw.jpeg" alt="imagen"><br><br><h1>  Conclusi√≥n </h1><br>  Una vez m√°s, repito que no solicito el reemplazo del cl√°sico EDA, pero estoy de acuerdo en que es bueno cuando hay una alternativa que ahorra mucho tiempo, especialmente teniendo en cuenta que las personas son lo suficientemente flojas, y esto, como saben, es el motor del progreso :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/480532/">https://habr.com/ru/post/480532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480514/index.html">Historial del sistema de nombres de dominio: los primeros servidores DNS</a></li>
<li><a href="../480518/index.html">Tutor de programaci√≥n: por qu√© debes convertirte en uno y c√≥mo hacerlo</a></li>
<li><a href="../480520/index.html">Programaci√≥n funcional desde el punto de vista de EcmaScript. La recursi√≥n y sus tipos</a></li>
<li><a href="../480526/index.html">Los procesadores Intel escupen una clave privada, si juegas con voltaje</a></li>
<li><a href="../480530/index.html">IoT no es un juguete para ni√±os. C√≥mo los ataques de hackers en Internet de las cosas asustan no solo a las grandes corporaciones, sino tambi√©n a las familias comunes</a></li>
<li><a href="../480534/index.html">16 consejos de desarrollo para Android en Kotlin. Parte 2</a></li>
<li><a href="../480540/index.html">Lanzamiento de Umbraco 8.4: CMS es a√∫n m√°s conveniente</a></li>
<li><a href="../480542/index.html">Conciencia de seguridad para adultos: c√≥mo cerrar una vulnerabilidad de phishing</a></li>
<li><a href="../480544/index.html">5 secretos ocultos en Java</a></li>
<li><a href="../480550/index.html">Hola mundo de Bytecode para JVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>