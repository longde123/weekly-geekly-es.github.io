<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèª ü•ß üëû Temporizadores JavaScript: tudo o que voc√™ precisa saber üè© ‚ÜïÔ∏è üö≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° colegas. Era uma vez um artigo sobre Habr√©, de autoria de John Rezig sobre esse assunto. 10 anos se passaram, e o t√≥pico ainda requer esclarecimen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Temporizadores JavaScript: tudo o que voc√™ precisa saber</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/426709/">  Ol√° colegas.  Era uma vez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um artigo</a> sobre Habr√©, de autoria de John Rezig sobre esse assunto.  10 anos se passaram, e o t√≥pico ainda requer esclarecimentos.  Portanto, oferecemos aos interessados ‚Äã‚Äãa leitura do artigo de Samer Buna, que fornece n√£o apenas uma vis√£o geral te√≥rica dos timers em JavaScript (no contexto do Node.js), mas tamb√©m tarefas sobre eles. <br><br><img src="https://habrastorage.org/webt/zs/0c/vx/zs0cvxfhr8yi-cnds0y27thmg0u.png"><br><a name="habracut"></a><br><br>  Algumas semanas atr√°s, eu twitei a seguinte pergunta em uma √∫nica entrevista: <br><br><blockquote>  ‚ÄúOnde est√° o c√≥digo fonte das fun√ß√µes setTimeout e setInterval?  Onde voc√™ procuraria por ele?  Voc√™ n√£o pode pesquisar no Google :) " <br></blockquote><br>  *** Responda por si mesmo e continue lendo *** <br><br><hr><br>  Cerca de metade das respostas a este tweet estavam incorretas.  N√£o, o caso N√ÉO est√° relacionado √† V8 (ou outras VMs) !!!  Fun√ß√µes como <code>setTimeout</code> e <code>setInterval</code> , orgulhosamente chamadas de "JavaScript Timers", n√£o fazem parte de nenhuma especifica√ß√£o ECMAScript ou implementa√ß√£o de mecanismo JavaScript.  As fun√ß√µes de timer s√£o implementadas no n√≠vel do navegador, portanto, sua implementa√ß√£o difere em diferentes navegadores.  Os cron√¥metros tamb√©m s√£o implementados nativamente no pr√≥prio tempo de execu√ß√£o do Node.js. <br><br>  Nos navegadores, as principais fun√ß√µes do timer referem-se √† interface do <code>Window</code> , que tamb√©m est√° associada a outras fun√ß√µes e objetos.  Essa interface fornece acesso global a todos os seus elementos no escopo principal do JavaScript.  √â por isso que a fun√ß√£o <code>setTimeout</code> pode ser executada diretamente no console do navegador. <br><br>  No N√≥, os temporizadores fazem parte do objeto <code>global</code> , projetado como a interface do navegador do <code>Window</code> .  O c√≥digo fonte dos temporizadores no N√≥ √© mostrado <a href="">aqui</a> . <br><br>  Pode parecer para algu√©m que essa √© apenas uma pergunta ruim da entrevista - de que serve saber isso ?!  Eu, como desenvolvedor JavaScript, penso assim: pressup√µe-se que voc√™ deva saber disso, pois o oposto pode indicar que voc√™ n√£o entende bem como a V8 (e outras m√°quinas virtuais) interage com navegadores e N√≥. <br><br>  Vamos dar uma olhada em alguns exemplos e resolver algumas tarefas do timer, vamos? <br><br>  <i>Voc√™ pode usar o comando node para executar os exemplos neste artigo.</i>  <i>A maioria dos exemplos discutidos aqui √© apresentada no meu curso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Introdu√ß√£o ao Node.js</a> no Pluralsight.</i> <br><br>  <b>Execu√ß√£o de fun√ß√£o adiada</b> <br><br>  Timers s√£o fun√ß√µes de ordem superior com as quais voc√™ pode atrasar ou repetir a execu√ß√£o de outras fun√ß√µes (o timer recebe uma fun√ß√£o como o primeiro argumento). <br><br>  Aqui est√° um exemplo de execu√ß√£o adiada: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example1.js setTimeout( () =&gt; { console.log('Hello after 4 seconds'); }, 4 * 1000 );</span></span></code> </pre> <br>  Neste exemplo, usando <code>setTimeout</code> a mensagem de sauda√ß√£o √© adiada por 4 segundos.  O segundo argumento para <code>setTimeout</code> √© o atraso (em ms).  Multiplico 4 por 1000 para obter 4 segundos. <br><br>  O primeiro argumento para <code>setTimeout</code> √© uma fun√ß√£o cuja execu√ß√£o ser√° atrasada. <br>  Se voc√™ executar o arquivo <code>example1.js</code> com o comando node, o Node far√° uma pausa por 4 segundos e exibir√° uma mensagem de boas-vindas (seguida por uma sa√≠da). <br><br>  Observe: o primeiro argumento para <code>setTimeout</code> √© apenas uma <b>refer√™ncia de fun√ß√£o</b> .  N√£o deve ser uma fun√ß√£o <code>example1.js</code> - como <code>example1.js</code> .  Aqui est√° o mesmo exemplo sem usar a fun√ß√£o interna: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> func = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello after 4 seconds'</span></span>); }; setTimeout(func, <span class="hljs-number"><span class="hljs-number">4</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br>  <b>Passando argumentos</b> <br><br>  Se a fun√ß√£o para a qual <code>setTimeout</code> √© usado para atrasar aceitar algum argumento, voc√™ poder√° usar os argumentos restantes da pr√≥pria fun√ß√£o <code>setTimeout</code> (depois daqueles 2 que j√° aprendemos) para transferir os valores dos argumentos para a fun√ß√£o adiada. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : func(arg1, arg2, arg3, ...) //  : setTimeout(func, delay, arg1, arg2, arg3, ...)</span></span></code> </pre> <br>  Aqui est√° um exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example2.js const rocks = who =&gt; { console.log(who + ' rocks'); }; setTimeout(rocks, 2 * 1000, 'Node.js');</span></span></code> </pre> <br>  A fun√ß√£o de <code>rocks</code> acima, atrasada por 2 segundos, pega o argumento <code>who</code> e a chamada <code>setTimeout</code> passa a ele o valor "Node.js" como um argumento <code>who</code> . <br><br>  Ao executar o <code>example2.js</code> com o comando <code>node</code> , a frase ‚ÄúNode.js rocks‚Äù ser√° exibida ap√≥s 2 segundos. <br><br>  <b>Tarefa de Timers # 1</b> <br><br>  Portanto, com base no material j√° estudado sobre o <code>setTimeout</code> , exibiremos as 2 mensagens a seguir ap√≥s os atrasos correspondentes. <br><br><ul><li>  A mensagem "Ol√° ap√≥s 4 segundos" √© exibida ap√≥s 4 segundos. </li><li>  A mensagem "Ol√° ap√≥s 8 segundos" √© exibida ap√≥s 8 segundos. </li></ul><br>  <i>Limita√ß√£o</i> <br><br>  Na sua solu√ß√£o, voc√™ pode definir apenas uma fun√ß√£o que contenha fun√ß√µes internas.  Isso significa que muitas chamadas <code>setTimeout</code> ter√£o que usar a mesma fun√ß√£o. <br><br>  <i>Solu√ß√£o</i> <br><br>  Aqui est√° como eu resolveria esse problema: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// solution1.js const theOneFunc = delay =&gt; { console.log('Hello after ' + delay + ' seconds'); }; setTimeout(theOneFunc, 4 * 1000, 4); setTimeout(theOneFunc, 8 * 1000, 8);</span></span></code> </pre> <br>  Para mim, <code>theOneFunc</code> recebe o argumento de <code>delay</code> e usa o valor desse argumento de <code>delay</code> na mensagem exibida na tela.  Assim, a fun√ß√£o pode exibir mensagens diferentes, dependendo do valor do atraso que iremos informar. <br><br>  Em seguida, usei o <code>theOneFunc</code> em duas chamadas <code>setTimeout</code> , com a primeira sendo acionada ap√≥s 4 segundos e a segunda ap√≥s 8 segundos.  Essas duas chamadas <code>setTimeout</code> tamb√©m recebem um terceiro argumento, representando o argumento de <code>delay</code> para o <code>theOneFunc</code> . <br><br>  Ap√≥s a execu√ß√£o do arquivo <code>solution1.js</code> com o comando node, exibiremos os requisitos da tarefa e a primeira mensagem aparecer√° ap√≥s 4 segundos e a segunda ap√≥s 8 segundos. <br><br>  <b>Repita a fun√ß√£o</b> <br><br>  Mas e se eu pedisse para voc√™ exibir uma mensagem a cada 4 segundos, por um tempo ilimitado? <br>  Obviamente, voc√™ pode <code>setTimeout</code> em um loop, mas a API do timer tamb√©m oferece a fun√ß√£o <code>setInterval</code> , com a qual voc√™ pode programar a execu√ß√£o "eterna" de qualquer opera√ß√£o. <br><br>  Aqui est√° um exemplo de <code>setInterval</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example3.js setInterval( () =&gt; console.log('Hello every 3 seconds'), 3000 );</span></span></code> </pre> <br>  Este c√≥digo exibir√° uma mensagem a cada 3 segundos.  Se voc√™ executar o <code>example3.js</code> com o comando <code>node</code> , o Node emitir√° esse comando at√© voc√™ for√ßar o t√©rmino do processo (CTRL + C). <br><br>  <b>Cancelar temporizadores</b> <br><br>  Como uma a√ß√£o √© atribu√≠da quando a fun√ß√£o de timer √© chamada, essa a√ß√£o tamb√©m pode ser desfeita antes de ser executada. <br><br>  A chamada <code>setTimeout</code> retorna um ID do timer e voc√™ pode us√°-lo ao chamar <code>clearTimeout</code> para cancelar o timer.  Aqui est√° um exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example4.js const timerId = setTimeout( () =&gt; console.log('You will not see this one!'), 0 ); clearTimeout(timerId);</span></span></code> </pre> <br>  Esse timer simples deve disparar ap√≥s 0 ms (ou seja, imediatamente), mas isso n√£o acontecer√°, pois capturamos o valor de <code>timerId</code> e cancelamos imediatamente esse timer chamando <code>clearTimeout</code> . <br><br>  Ao executar o <code>example4.js</code> com o comando <code>node</code> , o Node n√£o imprime nada - o processo simplesmente termina imediatamente. <br><br>  A prop√≥sito, o Node.js tamb√©m fornece outra maneira de <code>setTimeout</code> com um valor de 0 ms.  H√° outra fun√ß√£o na API do timer do <code>setImmediate</code> chamada <code>setImmediate</code> , e basicamente faz a mesma coisa que <code>setTimeout</code> com um valor de 0 ms, mas nesse caso voc√™ pode omitir o atraso: <br><br><pre> <code class="javascript hljs">setImmediate( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am equivalent to setTimeout with 0 ms'</span></span>), );</code> </pre><br>  A fun√ß√£o <code>setImmediate</code> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suportada em todos os navegadores</a> .  N√£o o use no c√≥digo do cliente. <br><br>  Juntamente com <code>clearTimeout</code> h√° uma fun√ß√£o <code>clearInterval</code> que faz o mesmo, mas com chamadas <code>setInerval</code> , e tamb√©m h√° uma chamada <code>clearImmediate</code> . <br><br>  <b>Atraso no temporizador - algo que n√£o √© garantido</b> <br><br>  Voc√™ notou que no exemplo anterior, ao executar uma opera√ß√£o com <code>setTimeout</code> ap√≥s 0 ms, essa opera√ß√£o n√£o ocorre imediatamente (ap√≥s <code>setTimeout</code> ), mas somente ap√≥s todo o c√≥digo de script ter sido completamente executado (incluindo a chamada <code>clearTimeout</code> )? <br><br>  Deixe-me esclarecer este ponto com um exemplo.  Aqui est√° uma chamada <code>setTimeout</code> simples que deve funcionar em meio segundo - mas isso n√£o acontece: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example5.js setTimeout( () =&gt; console.log('Hello after 0.5 seconds. MAYBE!'), 500, ); for (let i = 0; i &lt; 1e10; i++) { //    }</span></span></code> </pre><br>  Imediatamente ap√≥s definir o cron√¥metro neste exemplo, bloqueamos de forma s√≠ncrona o ambiente de tempo de execu√ß√£o com um loop <code>for</code> grande.  O valor de <code>1e10</code> √© 1 com 10 zeros, portanto, o ciclo dura 10 bilh√µes de ciclos de processador (em princ√≠pio, isso simula um processador sobrecarregado).  O n√≥ n√£o pode fazer nada at√© que esse loop seja conclu√≠do. <br><br>  Obviamente, na pr√°tica, isso √© muito ruim, mas este exemplo ajuda a entender que o atraso <code>setTimeout</code> n√£o √© garantido, mas o <b>valor m√≠nimo</b> .  Um valor de 500 ms significa que o atraso durar√° pelo menos 500 ms.  De fato, o script levar√° muito mais tempo para exibir a linha de boas-vindas na tela.  Primeiro, ele ter√° que esperar at√© que o ciclo de bloqueio seja conclu√≠do. <br><br>  <b>Problema # 2 dos temporizadores</b> <br><br>  Escreva um script que exibir√° a mensagem "Hello World" uma vez por segundo, mas apenas 5 vezes.  Ap√≥s 5 itera√ß√µes, o script deve exibir uma mensagem "Conclu√≠do", ap√≥s o qual o processo do N√≥ ser√° conclu√≠do. <br><br>  <i>Limita√ß√£o</i> : ao resolver esse problema, voc√™ n√£o pode chamar <code>setTimeout</code> . <br><br>  <i>Dica</i> : precisa de um contador. <br><br>  <i>Solu√ß√£o</i> <br><br>  Aqui est√° como eu resolveria esse problema: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> intervalId = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World'</span></span>); counter += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (counter === <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Done'</span></span>); clearInterval(intervalId); } }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br>  Defino 0 como o valor inicial do <code>counter</code> e, em seguida, chamo <code>setInterval</code> , que leva seu ID. <br><br>  Uma fun√ß√£o adiada exibir√° uma mensagem e cada vez aumentar√° o contador em um.  Dentro da fun√ß√£o adiada, temos uma instru√ß√£o if, que verificar√° se 5 itera√ß√µes j√° foram aprovadas.  Ap√≥s 5 itera√ß√µes, o programa exibe "Conclu√≠do" e limpa o valor do intervalo usando a constante <code>intervalId</code> capturada.  O atraso do intervalo √© de 1000 ms. <br><br>  <b>Quem chama exatamente fun√ß√µes adiadas?</b> <br><br>  Ao usar o JavaScript, <code>this</code> dentro de uma fun√ß√£o regular, como esta, por exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whoCalledMe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Caller is'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br>  o valor na <code>this</code> corresponder√° ao <b>chamador</b> .  Se voc√™ definir a fun√ß√£o acima dentro do N√≥ REPL, o objeto <code>global</code> chamar√°.  Se voc√™ definir uma fun√ß√£o no console do navegador, o objeto da <code>window</code> chamar√°. <br><br>  Vamos definir uma fun√ß√£o como propriedade de um objeto para torn√°-lo um pouco mais claro: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">'42'</span></span>, whoCalledMe() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Caller is'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }; <span class="hljs-comment"><span class="hljs-comment">//     : obj.whoCallMe</span></span></code> </pre> <br>  Agora, quando usaremos o link diretamente ao trabalhar com a fun√ß√£o <code>obj.whoCallMe</code> , o objeto <code>obj</code> (identificado por seu <code>id</code> ) atuar√° como o chamador: <br><br><img src="https://habrastorage.org/webt/-p/ws/xl/-pwsxloqfbioi6rnk02prkje_wg.png"><br><br>  Agora a pergunta √©: quem ser√° o chamador se voc√™ passar o link para <code>obj.whoCallMe</code> para <code>setTimetout</code> ? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       ?? setTimeout(obj.whoCalledMe, 0);</span></span></code> </pre> <br>  <b>Quem √© o respons√°vel pela chamada neste caso?</b> <br><br>  A resposta ser√° diferente dependendo de onde a fun√ß√£o de timer √© executada.  Nesse caso, a depend√™ncia de quem √© o chamador √© simplesmente inaceit√°vel.  Voc√™ perder√° o controle sobre o chamador, pois depender√° da implementa√ß√£o do timer que, neste caso, chama sua fun√ß√£o.  Se voc√™ testar esse c√≥digo em um n√≥ REPL, o objeto <code>Timeout</code> ser√° o chamador: <br><br><img src="https://habrastorage.org/webt/hx/bb/t5/hxbbt5rhcmm4l6e2hns0ph8icho.png"><br><br>  Observe: isso √© importante apenas quando o JavaScript <code>this</code> usado dentro de fun√ß√µes regulares.  Ao usar as fun√ß√µes de seta, o chamador n√£o deve incomod√°-lo. <br><br>  <b>Problema # 3 dos temporizadores</b> <br><br>  Escreva um script que produza continuamente uma mensagem "Hello World" com atrasos variados.  Comece com um atraso de um segundo e aumente-o em um segundo a cada itera√ß√£o.  Na segunda itera√ß√£o, o atraso ser√° de 2 segundos.  No terceiro - tr√™s, e assim por diante. <br><br>  Inclua um atraso na mensagem exibida.  Voc√™ deve obter algo como isto: <br><br> <code>Hello World. 1 <br> Hello World. 2 <br> Hello World. 3 <br> ...</code> <br> <br>  <i>Limita√ß√µes</i> : as vari√°veis ‚Äã‚Äãpodem ser definidas apenas usando const.  Usar let ou var n√£o √©. <br><br>  <i>Solu√ß√£o</i> <br><br>  Como a dura√ß√£o do atraso nesta tarefa √© uma vari√°vel, n√£o √© poss√≠vel usar <code>setInterval</code> aqui, mas voc√™ pode configurar manualmente a execu√ß√£o do intervalo usando <code>setTimeout</code> dentro de uma chamada recursiva.  A primeira fun√ß√£o executada com <code>setTimeout</code> criar√° o pr√≥ximo timer, e assim por diante. <br><br>  Al√©m disso, como voc√™ n√£o pode usar <code>let</code> / <code>var</code> , n√£o podemos ter um contador para aumentar o atraso de cada chamada recursiva;  em vez disso, voc√™ pode usar os argumentos de uma fun√ß√£o recursiva para executar um incremento durante uma chamada recursiva. <br><br>  Veja como resolver esse problema: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> greeting = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">delay</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World. '</span></span> + delay); greeting(delay + <span class="hljs-number"><span class="hljs-number">1</span></span>); }, delay * <span class="hljs-number"><span class="hljs-number">1000</span></span>); greeting(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  <b>Tarefa de temporizadores # 4</b> <br><br>  Escreva um script que exibir√° a mensagem ‚ÄúHello World‚Äù com a mesma estrutura de atraso da tarefa n¬∫ 3, mas desta vez em grupos de 5 mensagens, e o grupo ter√° um intervalo de atraso principal.  Para o primeiro grupo de 5 mensagens, selecionamos o atraso inicial de 100 ms, para o pr√≥ximo - 200 ms, para o terceiro - 300 ms e assim por diante. <br><br>  Aqui est√° como esse script deve funcionar: <br><br><ul><li>  Com 100 ms, o script exibe "Hello World" pela primeira vez e o faz 5 vezes com um intervalo aumentando em 100 ms.  A primeira mensagem aparecer√° ap√≥s 100 ms, a segunda ap√≥s 200 ms, etc. </li><li>  Ap√≥s as 5 primeiras mensagens, o script deve aumentar o atraso principal em 200 ms.  Assim, a 6¬™ mensagem ser√° exibida ap√≥s 500 ms + 200 ms (700 ms), 7 a 900 ms, 8¬™ mensagem - ap√≥s 1100 ms e assim por diante. </li><li>  Ap√≥s 10 mensagens, o script deve aumentar o intervalo de atraso principal em 300 ms.  A 11¬™ mensagem deve ser exibida ap√≥s 500 ms + 1000 ms + 300 ms (18000 ms).  A 12¬™ mensagem deve ser exibida ap√≥s 2100 ms, etc. </li></ul><br>  De acordo com esse princ√≠pio, o programa deve funcionar indefinidamente. <br><br>  Inclua um atraso na mensagem exibida.  Voc√™ deve obter algo parecido com isto (sem coment√°rios): <br><br> <code>Hello World. 100 //  100  <br> Hello World. 100 //  200  <br> Hello World. 100 //  300  <br> Hello World. 100 //  400  <br> Hello World. 100 //  500  <br> Hello World. 200 //  700  <br> Hello World. 200 //  900  <br> Hello World. 200 //  1100  <br> ...</code> <br> <br>  <i>Limita√ß√µes</i> : voc√™ pode usar apenas chamadas para <code>setInterval</code> (e n√£o <code>setTimeout</code> ) e apenas ONE <code>if</code> . <br><br>  <i>Solu√ß√£o</i> <br><br>  Como s√≥ podemos trabalhar com chamadas <code>setInterval</code> , aqui precisamos usar recurs√£o e tamb√©m aumentar o atraso da pr√≥xima chamada <code>setInterval</code> .  Al√©m disso, precisamos da <code>if</code> para fazer isso acontecer somente ap√≥s 5 chamadas para essa fun√ß√£o recursiva. <br><br>  Aqui est√° uma solu√ß√£o poss√≠vel: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lastIntervalId, counter = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> greeting = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">delay</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (counter === <span class="hljs-number"><span class="hljs-number">5</span></span>) { clearInterval(lastIntervalId); lastIntervalId = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World. '</span></span>, delay); greeting(delay + <span class="hljs-number"><span class="hljs-number">100</span></span>); }, delay); counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; } counter += <span class="hljs-number"><span class="hljs-number">1</span></span>; }; greeting(<span class="hljs-number"><span class="hljs-number">100</span></span>);</code> </pre> <br>  Obrigado a todos que leram. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt426709/">https://habr.com/ru/post/pt426709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt426699/index.html">Teste de Python com pytest. Simples, r√°pido, eficiente e escal√°vel. Pref√°cio e Introdu√ß√£o</a></li>
<li><a href="../pt426701/index.html">Flutter - uma nova vis√£o do desenvolvimento de plataforma cruzada</a></li>
<li><a href="../pt426703/index.html">O que foi interessante no DataVizDay em Minsk</a></li>
<li><a href="../pt426705/index.html">Desenvolvimento e teste inteligentes de contratos do Hyperledger Fabric</a></li>
<li><a href="../pt426707/index.html">Sistema de aprova√ß√£o. Como inventamos a bicicleta</a></li>
<li><a href="../pt426713/index.html">Intel Xeon W-3175X: 28 n√∫cleos para o lar</a></li>
<li><a href="../pt426717/index.html">A ilus√£o da decep√ß√£o: uma ilus√£o de √≥tica visual baseada na previs√£o retroativa</a></li>
<li><a href="../pt426719/index.html">Hackathon sobre Ci√™ncia de Dados no SIBUR: como foi</a></li>
<li><a href="../pt426721/index.html">Evitar falhas durante o desenvolvimento do produto: 10 dicas do novato</a></li>
<li><a href="../pt426723/index.html">Microsoft e parceiros esperam criar uma c√°psula do tempo na lua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>