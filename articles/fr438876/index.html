<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèΩ üë¶üèª ‚õπÔ∏è Comment raccourcir le time-to-market: une histoire sur l'automatisation des tests dans M. Video ü•ü üôÜ üßëüèø‚Äçü§ù‚Äçüßëüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un d√©veloppement logiciel rapide et efficace est aujourd'hui impensable sans workflows bien rod√©s: chaque composant est transf√©r√© √† l'assemblage au mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment raccourcir le time-to-market: une histoire sur l'automatisation des tests dans M. Video</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/438876/"><img src="https://habrastorage.org/webt/_j/ic/xf/_jicxfsznd5gj_myys45mbsfo1m.jpeg"><br><br>  Un d√©veloppement logiciel rapide et efficace est aujourd'hui impensable sans workflows bien rod√©s: chaque composant est transf√©r√© √† l'assemblage au moment de l'installation, le produit ne reste pas inactif.  Il y a deux ans, avec M.Video, nous avons commenc√© √† introduire une telle approche dans le processus de d√©veloppement chez le d√©taillant et aujourd'hui nous continuons √† la d√©velopper.  Quels sont les sous-totaux?  Le r√©sultat a √©t√© payant: gr√¢ce aux changements mis en ≈ìuvre, il a √©t√© possible d'acc√©l√©rer la publication des versions de 20 √† 30%.  Vous voulez des d√©tails?  Bienvenue dans nos coulisses. <br><a name="habracut"></a><br><h1>  De Scrum √† Kanban </h1><br>  Tout d'abord, un changement de m√©thodologie a √©t√© mis en place - la transition de Scrum, c'est-√†-dire le mod√®le de sprint, √† Kanban.  Auparavant, le processus de d√©veloppement ressemblait √† ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/18e/026/79b/18e02679b40e161ec7e355281abe704e.png"><br><br>  Il y a une branche de d√©veloppement, il y a des sprints pour cinq √©quipes.  Ils codent dans leurs propres branches de d√©veloppement, les sprints se terminent le m√™me jour et toutes les √©quipes combinent les r√©sultats de leur travail avec la branche principale le m√™me jour.  Apr√®s cela, des tests de r√©gression sont ex√©cut√©s pendant cinq jours, puis la branche est donn√©e √† l'environnement pilote et ensuite √† l'environnement productif.  Mais, avant de commencer les tests de r√©gression, il a fallu 2-3 jours pour stabiliser la branche principale, supprimant les conflits apr√®s la fusion avec les branches de commande. <br><br>  Quel est l'avantage de Kanban?  Les √©quipes n'attendent pas la fin du sprint, mais combinent leurs modifications locales avec la branche principale √† la fin de la t√¢che, v√©rifiant √† chaque fois les conflits de collision.  Le jour fix√©, toutes les associations avec le ma√Ætre sont bloqu√©es et les tests de r√©gression sont lanc√©s. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc8/193/103/dc8193103b886d42f3411bc622af08f2.png"><br><br>  En cons√©quence, nous avons r√©ussi √† nous d√©barrasser des d√©calages constants des termes vers la droite, des r√©gressions <br>  pas retard√©, la lib√©ration du candidat est exp√©di√©e √† temps. <br><br><h1>  Automatisation omnipr√©sente </h1><br>  Bien s√ªr, il ne suffisait pas de changer la m√©thodologie.  La deuxi√®me √©tape, nous, avec le d√©taillant, les tests automatis√©s.  Au total, environ 900 sc√©narios sont test√©s, r√©partis en groupes par priorit√©. <br><br>  Environ 100 sc√©narios sont les soi-disant bloqueurs.  Ils devraient travailler sur le site - la boutique en ligne M.Video - m√™me pendant une guerre atomique.  Si l'un des bloqueurs ne fonctionne pas, il y a de gros probl√®mes sur le site.  Par exemple, les bloqueurs incluent un m√©canisme pour acheter des marchandises, appliquer des remises, des autorisations, enregistrer des utilisateurs, passer une commande de cr√©dit, etc. <br><br>  Environ 300 sc√©narios suppl√©mentaires sont essentiels.  Ceux-ci incluent, par exemple, la possibilit√© de s√©lectionner des produits √† l'aide de filtres.  Si cette fonctionnalit√© se casse, il est peu probable que les utilisateurs ach√®tent des marchandises, m√™me si les m√©canismes d'achat et de recherche directe dans le catalogue fonctionnent. <br><br>  D'autres sc√©narios sont majeurs et mineurs.  S'ils ne fonctionnent pas, les gens acquerront une exp√©rience n√©gative en utilisant le site.  Cela comprend de nombreux probl√®mes d'importance et de visibilit√© variables pour l'utilisateur.  Par exemple, la mise en page (majeure) est all√©e, la description du stock (mineur) n'est pas affich√©e, l'auto-suggestion de mots de passe dans le compte personnel (mineur) ne fonctionne pas, la r√©cup√©ration (majeure) ne fonctionne pas. <br><br>  Avec M.Video, nous avons automatis√© le test des bloqueurs √† 95%, des sc√©narios restants - √† environ 50%.  Pourquoi la moiti√© n'est-elle pas automatis√©e?  Il y a plusieurs raisons et diff√©rentes.  Il existe a priori des sc√©narios qui ne se pr√™tent pas √† l'automatisation.  Il existe des cas d'int√©gration complexes, dont la pr√©paration n√©cessite un travail manuel, par exemple, appeler la banque et annuler une demande de pr√™t, contacter le service commercial et annuler des commandes dans un environnement productif. <br>  L'automatisation des tests de r√©gression a r√©duit leur dur√©e.  Mais nous sommes all√©s plus loin et avons automatis√© les tests de fum√©e pour les bloqueurs apr√®s chaque fusion des branches de commande avec la branche principale. <br><br>  Apr√®s avoir automatis√© les tests, nous avons finalement √©limin√© les retards apr√®s avoir termin√© les associations avec la branche ma√Ætre. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec0/408/c73/ec0408c73cbb5504369774a2af3f1b08.png"><br><br><h1>  Cornichon √† la rescousse </h1><br>  Pour consolider le succ√®s, notre √©quipe a retravaill√© les tests eux-m√™mes.  Auparavant, il s'agissait de tableaux: action ‚Üí r√©sultat attendu ‚Üí r√©sultat r√©el.  Par exemple, je me suis connect√© au site avec un tel nom d'utilisateur et mot de passe;  r√©sultat attendu: tout est en ordre;  le r√©sultat r√©el est √©galement correct, je vais sur d'autres pages.  Ces sc√©narios √©taient lourds. <br><br>  Nous les avons traduits en notation Gherkin et automatis√© certaines √©tapes.  Prenons la m√™me autorisation sur le site, le script est maintenant formul√© comme suit: "en <i>tant qu'utilisateur du site, je me suis connect√© avec les donn√©es d'autorisation, et la proc√©dure a r√©ussi</i> ."  De plus, ¬´l' <i>utilisateur du site</i> ¬ª et ¬´ <i>connect√© avec les donn√©es d'autorisation</i> ¬ª sont r√©pertori√©s dans des tableaux s√©par√©s.  Nous pouvons d√©sormais ex√©cuter rapidement des cas de test, quelles que soient les donn√©es. <br><br>  Quelle est la valeur de cette √©tape?  Disons qu'un testeur est engag√© dans le test d'un projet.  Il ne se soucie pas de la fa√ßon dont il √©crit les tests, il peut faire des v√©rifications m√™me sous la forme d'une liste de contr√¥le: "l'autorisation est v√©rifi√©e, l'inscription est v√©rifi√©e, l'achat est v√©rifi√© par carte, l'achat par Yandex. L'argent est v√©rifi√© - je suis beau".  Une nouvelle personne vient et demande: vous √™tes-vous connect√© par e-mail ou via Facebook?  En cons√©quence, la liste de contr√¥le se transforme en script. <br><br>  Cinq √©quipes travaillent dans le projet, et chaque √©quipe a au moins deux testeurs.  Auparavant, chacun d'eux a √©crit des tests √† sa guise, et en cons√©quence, les tests ne pouvaient √™tre pris en charge que par leurs auteurs.  Avec l'automatisation, tout √©tait ennuyeux: soit vous devez recruter des ing√©nieurs d'automatisation s√©par√©s qui traduisent l'ensemble du zoo de tests dans un langage de script, soit oublier l'automatisation en tant que ph√©nom√®ne.  Gherkin a aid√© √† tout changer: √† l'aide de ce langage de script, nous avons cr√©√© des ¬´cubes¬ª - autorisation, panier, paiement, etc. - √† partir desquels les testeurs collectent d√©sormais divers scripts.  Lorsque vous devez cr√©er un nouveau script, une personne ne l'√©crit pas √† partir de z√©ro, mais tire simplement les blocs n√©cessaires sous la forme d'autotests.  Les notations Gherkin ont form√© tous les testeurs fonctionnels et peuvent d√©sormais interagir ind√©pendamment avec l'automatisation, prendre en charge les scripts et analyser les r√©sultats. <br><br>  Nous ne nous sommes pas arr√™t√©s l√†. <br><br><h1>  Blocs fonctionnels </h1><br>  Disons que la version 1 est la fonctionnalit√© qui existe d√©j√† sur le site.  Dans la version 2, nous voulions apporter des modifications aux sc√©narios utilisateur et m√©tier, et en cons√©quence, une partie des tests a cess√© de fonctionner car la fonctionnalit√© a chang√©. <br><br>  Nous avons structur√© le syst√®me de stockage de test: nous l'avons divis√© en blocs fonctionnels, par exemple, ¬´compte personnel¬ª, ¬´achat¬ª, etc. D√©sormais, lorsqu'un nouveau script utilisateur est introduit, les blocs fonctionnels n√©cessaires sont d√©j√† marqu√©s de graduations. <br><br>  Gr√¢ce √† cela, apr√®s avoir combin√© avec la branche master, les d√©veloppeurs peuvent v√©rifier non seulement le travail des bloqueurs, mais √©galement les scripts li√©s au domaine concern√© par les modifications apport√©es. <br><br>  La deuxi√®me cons√©quence est qu'il est devenu beaucoup plus facile de maintenir les tests eux-m√™mes.  Par exemple, si quelque chose a chang√© dans votre compte personnel, en passant une commande et une livraison, nous n'avons pas besoin de secouer l'ensemble du mod√®le de r√©gression, car les blocs fonctionnels qui sont modifi√©s sont imm√©diatement visibles.  Autrement dit, la mise √† jour de la suite de tests est devenue plus rapide, et donc moins ch√®re. <br><br><h1>  Le probl√®me avec les stands </h1><br>  Personne n'avait l'habitude de tester les performances des stands avant les tests d'acceptation.  Par exemple, ils nous donnent un banc de test, nous y ex√©cutons des tests de r√©gression pendant plusieurs heures.  Ils tombent, comprennent, r√©parent, ex√©cutent √† nouveau des tests.  Autrement dit, nous perdons du temps sur le d√©bogage et les ex√©cutions r√©p√©t√©es. <br><br>  Le probl√®me a √©t√© r√©solu simplement: ils ont √©crit un total de 15 tests API qui v√©rifient la configuration des stands, qui ne sont en aucun cas li√©s √† la fonctionnalit√©.  Les tests sont ind√©pendants de la version de construction; ils v√©rifient uniquement tous les points d'int√©gration critiques pour la transmission de scripts. <br><br>  Cela a permis de gagner beaucoup de temps.  En effet, avant l'automatisation, nous avions 14 testeurs, les contr√¥les √©taient lourds et longs, il y avait des scripts pour presque toute la journ√©e de travail, compos√©e de 150 √©tapes.  Et ici, vous testez, et quelque part √† la 30‚Äì40‚Äì110√®me √©tape, vous vous rendez compte que le support ne fonctionne pas.  Nous multiplions le temps de travail perdu par 14 personnes et sommes horrifi√©s.  Et apr√®s l'introduction de l'automatisation et des tests des stands, nous avons r√©ussi √† r√©duire de moiti√© le nombre de testeurs et √† nous d√©barrasser des temps d'arr√™t, ce qui a apport√© beaucoup de joie au chef comptable. <br><br><h1>  Cerises sur le g√¢teau </h1><br>  La premi√®re cerise est bugflow.  Formellement, c'est le cycle de vie de tout bug, mais en fait de toute entit√©.  Par exemple, nous op√©rons sur ce concept √† Jira.  Un statut suppl√©mentaire nous a permis d'acc√©l√©rer les versions. <br><br>  En g√©n√©ral, le processus ressemble √† ceci: ils ont trouv√© un incident, l'ont mis au travail, l'ont termin√©, l'ont remis aux tests, l'ont test√© et l'ont ferm√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ac/c63/b11/3acc63b11da74d987bb957fa41cae988.png"><br><br>  Nous comprenons que le d√©faut a disparu, le probl√®me a √©t√© r√©solu.  Et ils ont ajout√© un autre statut: ¬´pour les tests de r√©gression¬ª.  Cela signifie qu'apr√®s l'analyse, des sc√©narios qui d√©tectent des bogues critiques sont ajout√©s √† l'ensemble de r√©gression de 900 sc√©narios.  S'ils n'√©taient pas l√†, ou s'ils avaient des d√©tails insuffisants, alors nous avons un retour instantan√© sur l'√©tat du productif ou du pilote. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2b4/fd6/62a/2b4fd662adee0e55446ae1ce31569dce.png"><br><br>  Autrement dit, nous comprenons qu'il y a un probl√®me et, pour une raison quelconque, nous ne l'avons pas pris en compte.  Et maintenant, l'ajout d'un script de v√©rification des bogues fait gagner beaucoup de temps. <br><br>  Nous avons √©galement introduit une r√©trospective au niveau des tests.  Cela ressemble √† ceci: ils ont compil√© une tablette ¬´num√©ro de version, nombre de bogues, nombre de bloqueurs et autres scripts, et nombre de r√©solutions¬ª.  Dans le m√™me temps, nous avons estim√© le nombre de r√©solutions invalides.  Par exemple, si vous obtenez 15 bogues invalides sur 40 bogues, alors c'est un tr√®s mauvais indicateur, les testeurs perdent non seulement leur temps, mais aussi le temps des d√©veloppeurs qui travaillent sur ces bogues.  Les gars ont commenc√© √† r√©fl√©chir, √† g√©rer cela, √† introduire la proc√©dure de r√©vision des bogues par des testeurs plus exp√©riment√©s avant de les envoyer au d√©veloppement.  Et ils l'ont tr√®s bien fait. <br><br>  Ainsi, il y a une r√©flexion constante et un travail pour am√©liorer la qualit√©.  Tous les bogues du produit sont analys√©s: un test est cr√©√© pour chaque bogue, qui est imm√©diatement inclus dans l'ensemble de r√©gression.  Si possible, ce test est automatis√© et s'ex√©cute r√©guli√®rement. <br><br><h1>  R√©sultats </h1><br>  Initialement, il √©tait pr√©vu d'augmenter la fr√©quence des versions et de r√©duire le nombre d'erreurs, mais le r√©sultat a quelque peu d√©pass√© les attentes.  Un processus d'automatisation raisonnablement construit a permis d'augmenter le nombre de tests automatis√©s en peu de temps, et l'analyse des bogues manqu√©s a permis √† l'√©quipe de d√©veloppement et de test de hi√©rarchiser de mani√®re optimale les scripts et de se concentrer sur les plus importants. <br><br>  R√©sultats d'automatisation: <br><br><ul><li>  jusqu'√† 4 jours (au lieu des 10 pr√©c√©dents) ont r√©duit la dur√©e des tests de r√©gression; </li><li>  l'√©quipe de tests manuels a diminu√© de 50%; </li><li>  de 30 √† 35 jours, la dur√©e de mise sur le march√© a √©t√© r√©duite - √† partir du moment o√π une fonctionnalit√© est entr√©e dans l'arri√©r√© de l'√©quipe jusqu'√† ce qu'elle entre dans le pilote. </li></ul><br>  <i>√âquipe d'automatisation des tests, Jet Infosystems</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438876/">https://habr.com/ru/post/fr438876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438864/index.html">Gel des fonctionnalit√©s C ++ 20. Coroutines, modules et plus</a></li>
<li><a href="../fr438866/index.html">G√©n√©rateurs contre syntaxe Java</a></li>
<li><a href="../fr438868/index.html">Semaine de la s√©curit√© 06: en direct sur FaceTime</a></li>
<li><a href="../fr438870/index.html">Lombok rend la grandeur de Java</a></li>
<li><a href="../fr438874/index.html">Commencer une amiti√© avec VkNet</a></li>
<li><a href="../fr438878/index.html">L'apparition du film en torrents apr√®s la premi√®re augmente le box-office de 3%</a></li>
<li><a href="../fr438880/index.html">Quand utiliser var, let et const en Javascript [traduction de l'article de Tyler McGinnis]</a></li>
<li><a href="../fr438882/index.html">La probabilit√© de gagner un match avec une probabilit√© connue de gagner un point</a></li>
<li><a href="../fr438884/index.html">Histoire vraie d'une agence de publicit√© de l'outback: hauts, bas et impl√©mentation CRM</a></li>
<li><a href="../fr438886/index.html">Morty, nous sommes √† UltraHD! Comment regarder n'importe quel film en 4K, en le compl√©tant via un r√©seau neuronal peu connu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>