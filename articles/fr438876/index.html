<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏽 👦🏻 ⛹️ Comment raccourcir le time-to-market: une histoire sur l'automatisation des tests dans M. Video 🥟 🙆 🧑🏿‍🤝‍🧑🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un développement logiciel rapide et efficace est aujourd'hui impensable sans workflows bien rodés: chaque composant est transféré à l'assemblage au mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment raccourcir le time-to-market: une histoire sur l'automatisation des tests dans M. Video</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/438876/"><img src="https://habrastorage.org/webt/_j/ic/xf/_jicxfsznd5gj_myys45mbsfo1m.jpeg"><br><br>  Un développement logiciel rapide et efficace est aujourd'hui impensable sans workflows bien rodés: chaque composant est transféré à l'assemblage au moment de l'installation, le produit ne reste pas inactif.  Il y a deux ans, avec M.Video, nous avons commencé à introduire une telle approche dans le processus de développement chez le détaillant et aujourd'hui nous continuons à la développer.  Quels sont les sous-totaux?  Le résultat a été payant: grâce aux changements mis en œuvre, il a été possible d'accélérer la publication des versions de 20 à 30%.  Vous voulez des détails?  Bienvenue dans nos coulisses. <br><a name="habracut"></a><br><h1>  De Scrum à Kanban </h1><br>  Tout d'abord, un changement de méthodologie a été mis en place - la transition de Scrum, c'est-à-dire le modèle de sprint, à Kanban.  Auparavant, le processus de développement ressemblait à ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/18e/026/79b/18e02679b40e161ec7e355281abe704e.png"><br><br>  Il y a une branche de développement, il y a des sprints pour cinq équipes.  Ils codent dans leurs propres branches de développement, les sprints se terminent le même jour et toutes les équipes combinent les résultats de leur travail avec la branche principale le même jour.  Après cela, des tests de régression sont exécutés pendant cinq jours, puis la branche est donnée à l'environnement pilote et ensuite à l'environnement productif.  Mais, avant de commencer les tests de régression, il a fallu 2-3 jours pour stabiliser la branche principale, supprimant les conflits après la fusion avec les branches de commande. <br><br>  Quel est l'avantage de Kanban?  Les équipes n'attendent pas la fin du sprint, mais combinent leurs modifications locales avec la branche principale à la fin de la tâche, vérifiant à chaque fois les conflits de collision.  Le jour fixé, toutes les associations avec le maître sont bloquées et les tests de régression sont lancés. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc8/193/103/dc8193103b886d42f3411bc622af08f2.png"><br><br>  En conséquence, nous avons réussi à nous débarrasser des décalages constants des termes vers la droite, des régressions <br>  pas retardé, la libération du candidat est expédiée à temps. <br><br><h1>  Automatisation omniprésente </h1><br>  Bien sûr, il ne suffisait pas de changer la méthodologie.  La deuxième étape, nous, avec le détaillant, les tests automatisés.  Au total, environ 900 scénarios sont testés, répartis en groupes par priorité. <br><br>  Environ 100 scénarios sont les soi-disant bloqueurs.  Ils devraient travailler sur le site - la boutique en ligne M.Video - même pendant une guerre atomique.  Si l'un des bloqueurs ne fonctionne pas, il y a de gros problèmes sur le site.  Par exemple, les bloqueurs incluent un mécanisme pour acheter des marchandises, appliquer des remises, des autorisations, enregistrer des utilisateurs, passer une commande de crédit, etc. <br><br>  Environ 300 scénarios supplémentaires sont essentiels.  Ceux-ci incluent, par exemple, la possibilité de sélectionner des produits à l'aide de filtres.  Si cette fonctionnalité se casse, il est peu probable que les utilisateurs achètent des marchandises, même si les mécanismes d'achat et de recherche directe dans le catalogue fonctionnent. <br><br>  D'autres scénarios sont majeurs et mineurs.  S'ils ne fonctionnent pas, les gens acquerront une expérience négative en utilisant le site.  Cela comprend de nombreux problèmes d'importance et de visibilité variables pour l'utilisateur.  Par exemple, la mise en page (majeure) est allée, la description du stock (mineur) n'est pas affichée, l'auto-suggestion de mots de passe dans le compte personnel (mineur) ne fonctionne pas, la récupération (majeure) ne fonctionne pas. <br><br>  Avec M.Video, nous avons automatisé le test des bloqueurs à 95%, des scénarios restants - à environ 50%.  Pourquoi la moitié n'est-elle pas automatisée?  Il y a plusieurs raisons et différentes.  Il existe a priori des scénarios qui ne se prêtent pas à l'automatisation.  Il existe des cas d'intégration complexes, dont la préparation nécessite un travail manuel, par exemple, appeler la banque et annuler une demande de prêt, contacter le service commercial et annuler des commandes dans un environnement productif. <br>  L'automatisation des tests de régression a réduit leur durée.  Mais nous sommes allés plus loin et avons automatisé les tests de fumée pour les bloqueurs après chaque fusion des branches de commande avec la branche principale. <br><br>  Après avoir automatisé les tests, nous avons finalement éliminé les retards après avoir terminé les associations avec la branche maître. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec0/408/c73/ec0408c73cbb5504369774a2af3f1b08.png"><br><br><h1>  Cornichon à la rescousse </h1><br>  Pour consolider le succès, notre équipe a retravaillé les tests eux-mêmes.  Auparavant, il s'agissait de tableaux: action → résultat attendu → résultat réel.  Par exemple, je me suis connecté au site avec un tel nom d'utilisateur et mot de passe;  résultat attendu: tout est en ordre;  le résultat réel est également correct, je vais sur d'autres pages.  Ces scénarios étaient lourds. <br><br>  Nous les avons traduits en notation Gherkin et automatisé certaines étapes.  Prenons la même autorisation sur le site, le script est maintenant formulé comme suit: "en <i>tant qu'utilisateur du site, je me suis connecté avec les données d'autorisation, et la procédure a réussi</i> ."  De plus, «l' <i>utilisateur du site</i> » et « <i>connecté avec les données d'autorisation</i> » sont répertoriés dans des tableaux séparés.  Nous pouvons désormais exécuter rapidement des cas de test, quelles que soient les données. <br><br>  Quelle est la valeur de cette étape?  Disons qu'un testeur est engagé dans le test d'un projet.  Il ne se soucie pas de la façon dont il écrit les tests, il peut faire des vérifications même sous la forme d'une liste de contrôle: "l'autorisation est vérifiée, l'inscription est vérifiée, l'achat est vérifié par carte, l'achat par Yandex. L'argent est vérifié - je suis beau".  Une nouvelle personne vient et demande: vous êtes-vous connecté par e-mail ou via Facebook?  En conséquence, la liste de contrôle se transforme en script. <br><br>  Cinq équipes travaillent dans le projet, et chaque équipe a au moins deux testeurs.  Auparavant, chacun d'eux a écrit des tests à sa guise, et en conséquence, les tests ne pouvaient être pris en charge que par leurs auteurs.  Avec l'automatisation, tout était ennuyeux: soit vous devez recruter des ingénieurs d'automatisation séparés qui traduisent l'ensemble du zoo de tests dans un langage de script, soit oublier l'automatisation en tant que phénomène.  Gherkin a aidé à tout changer: à l'aide de ce langage de script, nous avons créé des «cubes» - autorisation, panier, paiement, etc. - à partir desquels les testeurs collectent désormais divers scripts.  Lorsque vous devez créer un nouveau script, une personne ne l'écrit pas à partir de zéro, mais tire simplement les blocs nécessaires sous la forme d'autotests.  Les notations Gherkin ont formé tous les testeurs fonctionnels et peuvent désormais interagir indépendamment avec l'automatisation, prendre en charge les scripts et analyser les résultats. <br><br>  Nous ne nous sommes pas arrêtés là. <br><br><h1>  Blocs fonctionnels </h1><br>  Disons que la version 1 est la fonctionnalité qui existe déjà sur le site.  Dans la version 2, nous voulions apporter des modifications aux scénarios utilisateur et métier, et en conséquence, une partie des tests a cessé de fonctionner car la fonctionnalité a changé. <br><br>  Nous avons structuré le système de stockage de test: nous l'avons divisé en blocs fonctionnels, par exemple, «compte personnel», «achat», etc. Désormais, lorsqu'un nouveau script utilisateur est introduit, les blocs fonctionnels nécessaires sont déjà marqués de graduations. <br><br>  Grâce à cela, après avoir combiné avec la branche master, les développeurs peuvent vérifier non seulement le travail des bloqueurs, mais également les scripts liés au domaine concerné par les modifications apportées. <br><br>  La deuxième conséquence est qu'il est devenu beaucoup plus facile de maintenir les tests eux-mêmes.  Par exemple, si quelque chose a changé dans votre compte personnel, en passant une commande et une livraison, nous n'avons pas besoin de secouer l'ensemble du modèle de régression, car les blocs fonctionnels qui sont modifiés sont immédiatement visibles.  Autrement dit, la mise à jour de la suite de tests est devenue plus rapide, et donc moins chère. <br><br><h1>  Le problème avec les stands </h1><br>  Personne n'avait l'habitude de tester les performances des stands avant les tests d'acceptation.  Par exemple, ils nous donnent un banc de test, nous y exécutons des tests de régression pendant plusieurs heures.  Ils tombent, comprennent, réparent, exécutent à nouveau des tests.  Autrement dit, nous perdons du temps sur le débogage et les exécutions répétées. <br><br>  Le problème a été résolu simplement: ils ont écrit un total de 15 tests API qui vérifient la configuration des stands, qui ne sont en aucun cas liés à la fonctionnalité.  Les tests sont indépendants de la version de construction; ils vérifient uniquement tous les points d'intégration critiques pour la transmission de scripts. <br><br>  Cela a permis de gagner beaucoup de temps.  En effet, avant l'automatisation, nous avions 14 testeurs, les contrôles étaient lourds et longs, il y avait des scripts pour presque toute la journée de travail, composée de 150 étapes.  Et ici, vous testez, et quelque part à la 30–40–110ème étape, vous vous rendez compte que le support ne fonctionne pas.  Nous multiplions le temps de travail perdu par 14 personnes et sommes horrifiés.  Et après l'introduction de l'automatisation et des tests des stands, nous avons réussi à réduire de moitié le nombre de testeurs et à nous débarrasser des temps d'arrêt, ce qui a apporté beaucoup de joie au chef comptable. <br><br><h1>  Cerises sur le gâteau </h1><br>  La première cerise est bugflow.  Formellement, c'est le cycle de vie de tout bug, mais en fait de toute entité.  Par exemple, nous opérons sur ce concept à Jira.  Un statut supplémentaire nous a permis d'accélérer les versions. <br><br>  En général, le processus ressemble à ceci: ils ont trouvé un incident, l'ont mis au travail, l'ont terminé, l'ont remis aux tests, l'ont testé et l'ont fermé. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ac/c63/b11/3acc63b11da74d987bb957fa41cae988.png"><br><br>  Nous comprenons que le défaut a disparu, le problème a été résolu.  Et ils ont ajouté un autre statut: «pour les tests de régression».  Cela signifie qu'après l'analyse, des scénarios qui détectent des bogues critiques sont ajoutés à l'ensemble de régression de 900 scénarios.  S'ils n'étaient pas là, ou s'ils avaient des détails insuffisants, alors nous avons un retour instantané sur l'état du productif ou du pilote. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2b4/fd6/62a/2b4fd662adee0e55446ae1ce31569dce.png"><br><br>  Autrement dit, nous comprenons qu'il y a un problème et, pour une raison quelconque, nous ne l'avons pas pris en compte.  Et maintenant, l'ajout d'un script de vérification des bogues fait gagner beaucoup de temps. <br><br>  Nous avons également introduit une rétrospective au niveau des tests.  Cela ressemble à ceci: ils ont compilé une tablette «numéro de version, nombre de bogues, nombre de bloqueurs et autres scripts, et nombre de résolutions».  Dans le même temps, nous avons estimé le nombre de résolutions invalides.  Par exemple, si vous obtenez 15 bogues invalides sur 40 bogues, alors c'est un très mauvais indicateur, les testeurs perdent non seulement leur temps, mais aussi le temps des développeurs qui travaillent sur ces bogues.  Les gars ont commencé à réfléchir, à gérer cela, à introduire la procédure de révision des bogues par des testeurs plus expérimentés avant de les envoyer au développement.  Et ils l'ont très bien fait. <br><br>  Ainsi, il y a une réflexion constante et un travail pour améliorer la qualité.  Tous les bogues du produit sont analysés: un test est créé pour chaque bogue, qui est immédiatement inclus dans l'ensemble de régression.  Si possible, ce test est automatisé et s'exécute régulièrement. <br><br><h1>  Résultats </h1><br>  Initialement, il était prévu d'augmenter la fréquence des versions et de réduire le nombre d'erreurs, mais le résultat a quelque peu dépassé les attentes.  Un processus d'automatisation raisonnablement construit a permis d'augmenter le nombre de tests automatisés en peu de temps, et l'analyse des bogues manqués a permis à l'équipe de développement et de test de hiérarchiser de manière optimale les scripts et de se concentrer sur les plus importants. <br><br>  Résultats d'automatisation: <br><br><ul><li>  jusqu'à 4 jours (au lieu des 10 précédents) ont réduit la durée des tests de régression; </li><li>  l'équipe de tests manuels a diminué de 50%; </li><li>  de 30 à 35 jours, la durée de mise sur le marché a été réduite - à partir du moment où une fonctionnalité est entrée dans l'arriéré de l'équipe jusqu'à ce qu'elle entre dans le pilote. </li></ul><br>  <i>Équipe d'automatisation des tests, Jet Infosystems</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438876/">https://habr.com/ru/post/fr438876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438864/index.html">Gel des fonctionnalités C ++ 20. Coroutines, modules et plus</a></li>
<li><a href="../fr438866/index.html">Générateurs contre syntaxe Java</a></li>
<li><a href="../fr438868/index.html">Semaine de la sécurité 06: en direct sur FaceTime</a></li>
<li><a href="../fr438870/index.html">Lombok rend la grandeur de Java</a></li>
<li><a href="../fr438874/index.html">Commencer une amitié avec VkNet</a></li>
<li><a href="../fr438878/index.html">L'apparition du film en torrents après la première augmente le box-office de 3%</a></li>
<li><a href="../fr438880/index.html">Quand utiliser var, let et const en Javascript [traduction de l'article de Tyler McGinnis]</a></li>
<li><a href="../fr438882/index.html">La probabilité de gagner un match avec une probabilité connue de gagner un point</a></li>
<li><a href="../fr438884/index.html">Histoire vraie d'une agence de publicité de l'outback: hauts, bas et implémentation CRM</a></li>
<li><a href="../fr438886/index.html">Morty, nous sommes à UltraHD! Comment regarder n'importe quel film en 4K, en le complétant via un réseau neuronal peu connu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>