<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧢 🔝 ♏️ Simulacros, trozos y espías en el marco de Spock 😔 🔢 ◻️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Spock proporciona 3 herramientas poderosas (pero diferentes en esencia) que simplifican las pruebas de escritura: Mock, Stub y Spy. 



 Muy a menudo,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Simulacros, trozos y espías en el marco de Spock</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/435488/"><p>  Spock proporciona 3 herramientas poderosas (pero diferentes en esencia) que simplifican las pruebas de escritura: Mock, Stub y Spy. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mp/b1/16/mpb116loygy7rcfeicuihzm8oym.jpeg"></div><br><p>  Muy a menudo, el código que necesita ser probado necesita interactuar con módulos externos llamados dependencias (el artículo original usa el término colaboradores, que no es muy común en el entorno en ruso). </p><br><p>  Las pruebas unitarias se diseñan con mayor frecuencia para probar una sola clase aislada utilizando varias variantes de mok: Mock, Stub y Spy.  Por lo tanto, las pruebas serán más confiables y menos propensas a romperse a medida que evoluciona el código de dependencia. </p><br><p>  Tales pruebas aisladas son menos propensas a problemas al cambiar los detalles internos de la implementación de dependencia. </p><br><p>  <em>De un traductor:</em> cada vez que uso Spock Framework para escribir pruebas, siento que puedo cometer un error al elegir una forma de reemplazar las dependencias.  Este artículo tiene la hoja de trucos más corta posible para elegir un mecanismo para crear mokas. </p><a name="habracut"></a><br><h2 id="tldr">  TL; DR </h2><br><h3 id="mocks">  Simulacros </h3><br><p>  Use Mock para: </p><br><ul><li>  verificaciones de contratos entre código de prueba y dependencias </li><li>  comprobar que los métodos de dependencia se llaman la cantidad correcta de veces </li><li>  validación de parámetros con los que se llama el código de dependencia </li></ul><br><h3 id="stubs">  Trozos </h3><br><p>  Use Stub para: </p><br><ul><li>  proporcionar resultados de llamadas predefinidos </li><li>  realizar acciones predefinidas esperadas de dependencias, como lanzar excepciones </li></ul><br><h3 id="spies">  Espías </h3><br><p>  Miedo espías.  Como dice la documentación de Spock: </p><br><blockquote>  Piénselo dos veces antes de usar este mecanismo.  Quizás debería rediseñar su solución y reorganizar su código. </blockquote><p>  Pero sucede que hay situaciones en las que tenemos que trabajar con código heredado.  El código heredado puede ser difícil o incluso imposible de probar con mobs y trozos.  En este caso, solo hay una solución: usar Spy. </p><br><p>  Es mejor tener el código heredado cubierto con pruebas usando Spy que no tener pruebas heredadas. </p><br><p>  Usa Spy para: </p><br><ul><li>  prueba de código heredado que no puede ser probado por otros métodos </li><li>  comprobar que los métodos de dependencia se llaman la cantidad correcta de veces </li><li>  validación de parámetros pasados </li><li>  proporcionando una respuesta de dependencia predefinida </li><li>  realizar acciones predefinidas en respuesta a llamadas a métodos de dependencia </li></ul><br><h2 id="mocks-1">  Simulacros </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zi/3q/vj/zi3qvjii7ug7tkq4bczo5f-jo7u.jpeg"></div><br><p> Todo el poder de moxas se manifiesta cuando la tarea de una prueba unitaria es verificar el contrato entre el código probado y las dependencias.  Veamos el siguiente ejemplo, donde tenemos un controlador <code>FooController</code> que usa <code>FooService</code> como una dependencia, y pruebe esta funcionalidad con mobs. </p><br><p> <code>FooController.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">FooService fooService def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ render fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) } }</code> </pre> <br><p> <code>FooService.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-string"><span class="hljs-string">"Hi ${name}, FooService did something"</span></span> } }</code> </pre> <br><p>  En este escenario, queremos escribir una prueba que pruebe: </p><br><ul><li>  contrato entre <code>FooController</code> y <code>FooService</code> </li><li>  <code>FooService.doSomething(name)</code> se llama la cantidad correcta de veces </li><li>  <code>FooService.doSomething(name)</code> con el parámetro correcto </li></ul><br><p>  Echa un vistazo a la prueba: </p><br><p> <code>MockSpec.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> grails.testing.web.controllers.ControllerUnitTest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> spock.lang.Specification <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MockSpec</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Specification</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerUnitTest</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> <span class="hljs-string"><span class="hljs-string">"Mock FooService"</span></span>() { given: <span class="hljs-string"><span class="hljs-string">"  "</span></span> def fooService = Mock(FooService) and: <span class="hljs-string"><span class="hljs-string">"    "</span></span> controller.fooService = fooService when: <span class="hljs-string"><span class="hljs-string">"  "</span></span> controller.doSomething() then: <span class="hljs-string"><span class="hljs-string">"         "</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> * fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) and: <span class="hljs-string"><span class="hljs-string">"  ''    - 'null'"</span></span> response.text == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>.toString() } }</code> </pre> <br><p>  La prueba anterior crea una simulación de servicio: </p><br><pre> <code class="java hljs">def fooService = Mock(FooService)</code> </pre> <br><p>  La prueba también comprueba que <code>FooService.doSomething(name)</code> se llama una vez, y el parámetro que se le pasa coincide con la cadena <code>"Sally"</code> . </p><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> * fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>)</code> </pre> <br><p>  El código anterior resuelve 4 problemas importantes: </p><br><ul><li>  crea simulacro para <code>FooService</code> </li><li>  verifica que <code>FooService.doSomething(String name)</code> se llame exactamente una vez con el parámetro <code>String</code> y el valor <code>"Sally"</code> </li><li>  aísla el código de prueba, reemplazando la implementación de dependencia </li></ul><br><h2 id="stubs-1">  Trozos </h2><br><p>  ¿El código probado utiliza dependencias?  ¿El propósito de las pruebas es asegurar que el código bajo prueba funcione correctamente cuando interactúa con las dependencias?  ¿Son los resultados de las llamadas a los métodos de dependencia valores de entrada para el código bajo prueba? </p><br><p>  Si el comportamiento del código probado cambia según el comportamiento de las dependencias, entonces debe usar stubs (Stub). </p><br><p>  Veamos el siguiente ejemplo con <code>FooController</code> y <code>FooService</code> y pruebe la funcionalidad del controlador usando stubs. </p><br><p> <code>FooController.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">FooService fooService def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ render fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) } }</code> </pre> <br><p> <code>FooService.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-string"><span class="hljs-string">"Hi ${name}, FooService did something"</span></span> } }</code> </pre> <br><p>  Código de prueba: </p><br><p> <code>StubSpec.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> grails.testing.web.controllers.ControllerUnitTest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> spock.lang.Specification <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StubSpec</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Specification</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerUnitTest</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> <span class="hljs-string"><span class="hljs-string">"Stub FooService"</span></span>() { given: <span class="hljs-string"><span class="hljs-string">"  "</span></span> def fooService = Stub(FooService) { doSomething(_) &gt;&gt; <span class="hljs-string"><span class="hljs-string">"Stub did something"</span></span> } and: <span class="hljs-string"><span class="hljs-string">"    "</span></span> controller.fooService = fooService when: <span class="hljs-string"><span class="hljs-string">"  "</span></span> controller.doSomething() then: <span class="hljs-string"><span class="hljs-string">"   "</span></span> <span class="hljs-comment"><span class="hljs-comment">// 1 * fooService.doSomething() //        response.text == "Stub did something" } }</span></span></code> </pre> <br><p>  Puede crear un trozo como este: </p><br><pre> <code class="java hljs">def fooService = Stub(FooService) { doSomething(_) &gt;&gt; <span class="hljs-string"><span class="hljs-string">"Stub did something"</span></span> }</code> </pre> <br><p>  El código anterior resuelve 4 problemas importantes: </p><br><ul><li>  crea un trozo de <code>FooService</code> </li><li>  se asegura de que <code>FooService.doSomething(String name)</code> devolverá la cadena <code>"Stub did something"</code> independientemente del parámetro pasado (por lo que utilizamos el carácter <code>_</code> ) </li><li>  aísla el código probado, reemplazando la implementación de dependencia con un trozo </li></ul><br><h2 id="spies-1">  Espías </h2><br><p>  Por favor no lea esta sección. </p><br><p>  No mires </p><br><p>  Salta al siguiente. </p><br><p>  ¿Todavía leyendo?  Bueno entonces, está bien, tratemos con Spy. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b9/sj/lk/b9sjlk13izmu8rbtb4yv4zncwvm.jpeg"></div><br><p>  No uses Spy.  Como dice la documentación de Spock: </p><br><blockquote>  Piénselo dos veces antes de usar este mecanismo.  Quizás debería rediseñar su solución y reorganizar su código. </blockquote><p>  En este caso, hay situaciones en las que tenemos que trabajar con código heredado.  El código heredado no se puede probar con mobs o stubs.  En este caso, el espía sigue siendo la única opción viable. </p><br><p>  Los espías son diferentes de los mokas o trozos porque no funcionan como trozos. </p><br><p>  Cuando una dependencia se reemplaza con un mok o stub, se crea un objeto de prueba y no se ejecuta el código fuente real de la dependencia. </p><br><p>  El espía, por otro lado, ejecutará el código fuente principal de la dependencia para la cual se creó el espía, pero el espía le permitirá cambiar lo que devuelve el espía y verificar las llamadas a los métodos, al igual que los mokas y los trozos.  (De ahí el nombre Spy). </p><br><p>  Veamos el siguiente ejemplo de <code>FooController</code> , que usa <code>FooService</code> , y luego pruebe la funcionalidad con un espía. </p><br><p> <code>FooController.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">FooService fooService def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ render fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) } }</code> </pre> <br><p> <code>FooService.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.transform.CompileStatic <span class="hljs-meta"><span class="hljs-meta">@CompileStatic</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-string"><span class="hljs-string">"Hi ${name}, FooService did something"</span></span> } }</code> </pre> <br><p>  Código de prueba: </p><br><p> <code>SpySpec.groovy</code> </p> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mycompany.myapp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> grails.testing.web.controllers.ControllerUnitTest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> spock.lang.Specification <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SpySpec</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Specification</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControllerUnitTest</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooController</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> <span class="hljs-string"><span class="hljs-string">"Spy FooService"</span></span>() { given: <span class="hljs-string"><span class="hljs-string">" -"</span></span> def fooService = Spy(FooService) and: <span class="hljs-string"><span class="hljs-string">"   "</span></span> controller.fooService = fooService when: <span class="hljs-string"><span class="hljs-string">"  "</span></span> controller.doSomething() then: <span class="hljs-string"><span class="hljs-string">"     "</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> * fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) &gt;&gt; <span class="hljs-string"><span class="hljs-string">"A Spy can modify implementation"</span></span> and: <span class="hljs-string"><span class="hljs-string">'     '</span></span> response.text == <span class="hljs-string"><span class="hljs-string">"A Spy can modify implementation"</span></span> } }</code> </pre> <br><p>  Crear una instancia de espía es bastante simple: </p><br><pre> <code class="java hljs">def fooService = Spy(FooService)</code> </pre> <br><p>  En el código anterior, el espía nos permite verificar la llamada a <code>FooService.doSomething(name)</code> , la cantidad de llamadas y los valores de los parámetros.  Además, el espía cambia la implementación del método para devolver un valor diferente. </p><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> * fooService.doSomething(<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>) &gt;&gt; <span class="hljs-string"><span class="hljs-string">"A Spy can modify implementation"</span></span></code> </pre> <br><p>  El código anterior resuelve 4 problemas importantes: </p><br><ul><li>  crea una instancia de espía para <code>FooService</code> </li><li>  comprueba la interacción de dependencia </li><li>  comprueba cómo funciona la aplicación de acuerdo con ciertos resultados de llamadas al método de dependencia </li><li>  aísla el código probado, reemplazando la implementación de dependencia con un trozo </li></ul><br><h2 id="faq">  FAQ </h2><br><p>  <strong>¿Qué opción usar: Mock, Stub o Spy?</strong> </p><br><p>  Esta es una pregunta que enfrentan muchos desarrolladores.  Estas preguntas frecuentes pueden ayudar si no está seguro de qué enfoque usar. </p><br><p>  <strong>P:</strong> ¿El propósito de probar la verificación del contrato entre el código probado y las dependencias? </p><br><p>  <strong>A:</strong> Si respondió Sí, use Mock </p><br><p>  <strong>P:</strong> ¿El propósito de las pruebas es asegurarse de que el código que se prueba funciona correctamente cuando interactúa con las dependencias? </p><br><p>  <strong>R:</strong> Si respondió Sí, use Stub </p><br><p>  <strong>P:</strong> ¿Los resultados de llamar a los métodos de dependencia introducen valores para el código bajo prueba? </p><br><p>  <strong>R:</strong> Si respondió Sí, use Stub </p><br><p>  <strong>P:</strong> ¿Trabaja con código heredado, que es muy difícil de probar y no le quedan opciones? </p><br><p>  <strong>A:</strong> Intenta usar Spy </p><br><h2 id="kod-primerov">  Ejemplo de código </h2><br><p>  Puede encontrar el código para todos los ejemplos en este artículo en: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/ddelponte/mock-stub-spy</a> </p><br><h2 id="poleznye-ssylki">  Enlaces utiles </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://spockframework.org/spock/docs/1.1/all_in_one.html#_interaction_based_testing</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://martinfowler.com/bliki/UnitTest.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://martinfowler.com/articles/mocksArentStubs.html</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es435488/">https://habr.com/ru/post/es435488/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es435470/index.html">Tutorial de React, Parte 8: Trabajo continuo en una aplicación TODO, Introducción de propiedades de componentes</a></li>
<li><a href="../es435476/index.html">Mkcert: certificados HTTPS válidos para localhost</a></li>
<li><a href="../es435480/index.html">Microsoft y Kroger le darán a Amazon una pelea en el campo ... el comercio de alimentos</a></li>
<li><a href="../es435482/index.html">Zircon destacado: vDSO (objeto virtual dinámico compartido)</a></li>
<li><a href="../es435484/index.html">Fuzzing style 1989</a></li>
<li><a href="../es435490/index.html">Cambios de impuestos de Google en 2019</a></li>
<li><a href="../es435494/index.html">Servidor cliente sin interrupciones</a></li>
<li><a href="../es435496/index.html">Tesla demandó por un accidente en el que murieron el conductor y el pasajero del Modelo S</a></li>
<li><a href="../es435498/index.html">vCloud Director Extender: migración</a></li>
<li><a href="../es435500/index.html">Guantes biométricos en automovilismo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>