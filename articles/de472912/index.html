<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¿ï¸ ğŸ› ğŸ‘ˆğŸ¾ ClickHouse-Datenbank fÃ¼r Menschen oder Alien-Technologie ğŸ‘± ğŸŒ âœŠğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alexey Lizunov, Leiter des Kompetenzzentrums fÃ¼r Remote-Service-KanÃ¤le der Direktion fÃ¼r Informationstechnologien des ICD 



 Als Alternative zum ELK...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ClickHouse-Datenbank fÃ¼r Menschen oder Alien-Technologie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mkb/blog/472912/"> <b>Alexey Lizunov, Leiter des Kompetenzzentrums fÃ¼r Remote-Service-KanÃ¤le der Direktion fÃ¼r Informationstechnologien des ICD</b> <br><br><img src="https://habrastorage.org/webt/bs/gu/k0/bsguk03an99lspkpmtkoks2bkvg.png"><br><br>  Als Alternative zum ELK-Stack (ElasticSearch, Logstash, Kibana) untersuchen wir die Verwendung der ClickHouse-Datenbank als Data Warehouse fÃ¼r Protokolle. <br><br>  In diesem Artikel mÃ¶chten wir Ã¼ber unsere Erfahrungen mit der ClickHouse-Datenbank und Ã¼ber vorlÃ¤ufige Ergebnisse des Pilotbetriebs sprechen.  Es sollte sofort angemerkt werden, dass die Ergebnisse beeindruckend waren. <br><br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/uy/mc/ip/uymcipeis_jm2piqsaqdjmu9_l8.jpeg"><br><br>  Als nÃ¤chstes werden wir detaillierter beschreiben, wie unser System konfiguriert ist und aus welchen Komponenten es besteht.  Aber jetzt mÃ¶chte ich ein wenig Ã¼ber diese Datenbank als Ganzes sprechen und warum Sie darauf achten sollten.  Die ClickHouse-Datenbank ist eine leistungsstarke analytische Spaltendatenbank von Yandex.  Es wird in Yandex-Diensten verwendet und ist zunÃ¤chst das Haupt-Data-Warehouse fÃ¼r Yandex.Metrica.  Das Open-Source-System ist kostenlos.  Aus Sicht des Entwicklers war ich immer daran interessiert, wie sie es implementiert haben, weil es fantastisch groÃŸe Datenmengen gibt.  Und die metrische BenutzeroberflÃ¤che selbst ist sehr flexibel und schnell.  Bei der ersten Bekanntschaft mit dieser Datenbank der Eindruck: â€Nun, endlich!  Gemacht "fÃ¼r Menschen"!  Beginnend mit dem Installationsprozess und endend mit dem Senden von Anforderungen. " <br><br>  Diese Datenbank hat eine sehr niedrige Eintragsschwelle.  Selbst ein durchschnittlicher erfahrener Entwickler kann diese Datenbank in wenigen Minuten installieren und verwenden.  Alles funktioniert klar.  Selbst Linux-Neulinge kÃ¶nnen die Installation schnell durchfÃ¼hren und einfache VorgÃ¤nge ausfÃ¼hren.  FrÃ¼her, als das Wort Big Data, Hadoop, Google BigTable, HDFS, der Ã¼bliche Entwickler die Idee hatte, dass es sich um Terabyte, Petabyte handelte, dass einige Ãœbermenschen an den Einstellungen und der Entwicklung fÃ¼r diese Systeme beteiligt waren, kamen wir mit dem Aufkommen der ClickHouse-Datenbank Ein einfaches, verstÃ¤ndliches Werkzeug, mit dem Sie den bisher unerreichbaren Aufgabenbereich lÃ¶sen kÃ¶nnen.  Nur ein ziemlich durchschnittliches Auto und fÃ¼nf Minuten zu installieren.  Das heiÃŸt, wir haben eine Datenbank wie zum Beispiel MySql, aber nur zum Speichern von Milliarden von DatensÃ¤tzen!  Eine Art SQL-Supervisor.  Es ist, als wÃ¼rden Menschen Waffen von AuÃŸerirdischen gegeben. <br><br><h4>  Ãœber unser Protokollsammelsystem </h4><br>  Zum Sammeln von Informationen werden IIS-Protokolldateien von Webanwendungen eines Standardformats verwendet (wir analysieren auch Anwendungsprotokolle, aber das Hauptziel in der Phase des Pilotbetriebs mit uns ist das Sammeln von IIS-Protokollen). <br><br>  Aus verschiedenen GrÃ¼nden konnten wir den ELK-Stack nicht vollstÃ¤ndig aufgeben und verwenden weiterhin die Komponenten LogStash und Filebeat, die sich bewÃ¤hrt haben und recht zuverlÃ¤ssig und vorhersehbar funktionieren. <br><br>  Das allgemeine Protokollierungsschema ist in der folgenden Abbildung dargestellt: <br><br><img src="https://habrastorage.org/webt/ah/kr/qg/ahkrqgjij-tfce_455jhjikjfg8.jpeg"><br><br>  Eine Funktion zum Schreiben von Daten in die ClickHouse-Datenbank ist das seltene (einmal pro Sekunde) EinfÃ¼gen von DatensÃ¤tzen in groÃŸen Stapeln.  Dies ist anscheinend der â€problematischsteâ€œ Teil, auf den Sie stoÃŸen, wenn Sie zum ersten Mal mit der ClickHouse-Datenbank arbeiten: Das Schema ist etwas kompliziert. <br>  Das LogStash-Plugin hat hier sehr geholfen, da es Daten direkt in ClickHouse einfÃ¼gt.  Diese Komponente wird auf demselben Server wie die Datenbank selbst bereitgestellt.  Im Allgemeinen wird daher nicht empfohlen, dies zu tun, sondern aus praktischer Sicht, um keine separaten Server zu erstellen, wÃ¤hrend diese auf demselben Server bereitgestellt werden.  Wir haben keine Fehler oder Ressourcenkonflikte mit der Datenbank festgestellt.  ZusÃ¤tzlich sollte beachtet werden, dass das Plugin im Fehlerfall einen Retray-Mechanismus hat.  Und im Fehlerfall schreibt das Plugin ein Datenpaket auf die Festplatte, das nicht eingefÃ¼gt werden konnte (das Dateiformat ist praktisch: Nach der Bearbeitung kÃ¶nnen Sie das korrigierte Paket einfach mit dem Clickhouse-Client einfÃ¼gen). <br><br>  Die vollstÃ¤ndige Liste der im Schema verwendeten Software ist in der Tabelle dargestellt: <br><br><div class="spoiler">  <b class="spoiler_title">Liste der verwendeten Software</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  <b>Titel</b> <br></td><td>  <b>Beschreibung</b> <br></td><td>  <b>Verteilungslink</b> <br></td></tr><tr><td><p>  Nginx </p><br></td><td><p>  Reverse-Proxy, um den Portzugriff und die Autorisierung einzuschrÃ¤nken </p><br><br><p>  Wird derzeit nicht in der Schaltung verwendet. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://nginx.org/en/download.html</a> </p><br></td><td><p>  <a href="">https://nginx.org/download/nginx-1.16.0.tar.gz</a> </p><br></td></tr><tr><td><p>  Filebeat </p><br></td><td><p>  Dateiprotokolle Ã¼bertragen. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.elastic.co/downloads/beats/filebeat</a> (Distribution fÃ¼r Windows 64bit). </p><br></td><td><p>  <a href="">https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.3.0-windows-x86_64.zip</a> </p><br></td></tr><tr><td><p>  Logstash </p><br></td><td><p>  Protokollsammler. </p><br><br><p>  Wird zum Sammeln von Protokollen aus FileBeat sowie zum Sammeln von Protokollen aus der RabbitMQ-Warteschlange (fÃ¼r Server in der DMZ) verwendet. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.elastic.co/products/logstash</a> </p><br></td><td><p>  <a href="">https://artifacts.elastic.co/downloads/logstash/logstash-7.0.1.rpm</a> </p><br></td></tr><tr><td><p>  Logstash-Ausgabe-Clickhouse </p><br></td><td><p>  Loagstash-Plugin zum stapelweisen Ãœbertragen von Protokollen in die ClickHouse-Datenbank </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/mikechris/logstash-output-clickhouse</a> </p><br></td><td><p>  / usr / share / logstash / bin / logstash-plugin installiere logstash-output-clickhouse </p><br><p>  / usr / share / logstash / bin / logstash-plugin installiere logstash-filter-prune </p><br><p>  / usr / share / logstash / bin / logstash-plugin installiere logstash-filter-multiline </p><br></td></tr><tr><td><p>  Clickhouse </p><br></td><td><p>  Protokoll-Repository <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://clickhouse.yandex/docs/ru/</a> </p><br></td><td><p>  <a href="">https://packagecloud.io/Altinity/clickhouse/packages/el/7/clickhouse-server-19.5.3.8-1.el7.x86_64.rpm</a> </p><br><p>  <a href="">https://packagecloud.io/Altinity/clickhouse/packages/el/7/clickhouse-client-19.5.3.8-1.el7.x86_64.rpm</a> </p><br><p>  Hinweis  Seit August 2018 werden die â€normalenâ€œ RPM-Baugruppen fÃ¼r RHEL im Yandex-Repository angezeigt, sodass Sie versuchen kÃ¶nnen, sie zu verwenden.  Zum Zeitpunkt der Installation haben wir von Altinity kompilierte Pakete verwendet. </p><br></td></tr><tr><td><p>  Grafana </p><br></td><td><p>  Protokollvisualisierung.  Konfigurieren Sie Dashboards </p><br><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://grafana.com/</a> </p><br></td><td><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://grafana.com/grafana/download</a> </p><br><br><p>  Redhat &amp; Centos (64 Bit) - Neueste Version </p><br></td></tr><tr><td><p>  ClickHouse-Datenquelle fÃ¼r Grafana 4.6+ </p><br></td><td><p>  Grafana-Plugin mit ClickHouse-Datenquelle </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://grafana.com/plugins/vertamedia-clickhouse-datasource</a> </p><br></td><td><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://grafana.com/api/plugins/vertamedia-clickhouse-datasource/versions/1.8.1/download</a> </p><br></td></tr><tr><td><p>  Logstash </p><br></td><td><p>  Protokollieren Sie den Router von FileBeat in der RabbitMQ-Warteschlange. </p><br><p>  Hinweis  Leider hat FileBeat keine Ausgabe direkt in RabbitMQ, so dass ein Zwischenlink in Form von Logstash erforderlich ist </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.elastic.co/products/logstash</a> </p><br></td><td><p>  <a href="">https://artifacts.elastic.co/downloads/logstash/logstash-7.0.1.rpm</a> </p><br></td></tr><tr><td><p>  Rabbitmq </p><br></td><td><p>  Nachrichtenwarteschlange  Dies ist ein Protokolleintragspuffer in der DMZ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.rabbitmq.com/download.html</a> </p><br></td><td><p>  <a href="">https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.7.14/rabbitmq-server-3.7.14-1.el7.noarch.rpm</a> </p><br></td></tr><tr><td><p>  Erlang Runtime (Erforderlich fÃ¼r RabbitMQ) </p><br></td><td><p>  Erlang Laufzeit.  Erforderlich, damit RabbitMQ funktioniert </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://www.erlang.org/download.html</a> </p><br></td><td><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.rabbitmq.com/install-rpm.html#install-erlang</a> <a href="">http://www.erlang.org/downloads/21.3</a> </p><br></td></tr></tbody></table></div><br></div></div><br>  Die Serverkonfiguration mit der ClickHouse-Datenbank ist in der folgenden Tabelle dargestellt: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>Titel</b> <br></td><td>  <b>Wert</b> <br></td><td>  <b>Hinweis</b> <br></td></tr><tr><td><p>  Konfiguration </p><br></td><td><p>  Festplatte: 40 GB <br>  RAM: 8 GB <br>  Prozessor: Core 2 2 GHz </p><br></td><td><p>  Beachten Sie die Tipps zum Betrieb der ClickHouse-Datenbank ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://clickhouse.yandex/docs/ru/operations/tips/</a> ). </p><br></td></tr><tr><td><p>  Systemweite Software </p><br></td><td><p>  Betriebssystem: Red Hat Enterprise Linux Server (Maipo) </p><br><p>  JRE (Java 8) </p><br></td><td><p></p><br></td></tr></tbody></table></div><br>  Wie Sie sehen kÃ¶nnen, ist dies eine normale Workstation. <br><br>  Die Tabelle zum Speichern von Protokollen ist wie folgt aufgebaut: <br><br><div class="spoiler">  <b class="spoiler_title">log_web.sql</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> log_web ( logdate <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, logdatetime DateTime CODEC(Delta, LZ4HC), fld_log_file_name LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), fld_server_name LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), fld_app_name LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), fld_app_module LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), fld_website_name LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), serverIP LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), method LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), uriStem <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, uriQuery <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, port UInt32, username LowCardinality( <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ), clientIP <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, clientRealIP <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, userAgent <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, referer <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, response <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, subresponse <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, win32response <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, timetaken UInt64 , uriQuery__utm_medium <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__utm_source <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__utm_campaign <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__utm_term <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__utm_content <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__yclid <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> , uriQuery__region <span class="hljs-keyword"><span class="hljs-keyword">String</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">Engine</span></span> = MergeTree() <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> toYYYYMM(logdate) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> (fld_app_name, fld_app_module, logdatetime) <span class="hljs-keyword"><span class="hljs-keyword">SETTINGS</span></span> index_granularity = <span class="hljs-number"><span class="hljs-number">8192</span></span>;</code> </pre> <br></div></div><br>  Wir verwenden Standardwerte fÃ¼r die Partitionierung (nach Monaten) und die GranularitÃ¤t des Index.  Alle Felder entsprechen praktisch IIS-ProtokolleintrÃ¤gen zum Registrieren von http-Anforderungen.  Separate separate Felder zum Speichern von utm-Tags (sie werden beim EinfÃ¼gen in die Tabelle aus dem Feld fÃ¼r die Abfragezeichenfolge analysiert). <br><br>  AuÃŸerdem werden in der Tabelle mehrere Systemfelder zum Speichern von Informationen zu Systemen, Komponenten und Servern hinzugefÃ¼gt.  In der folgenden Tabelle finden Sie eine Beschreibung dieser Felder.  In einer Tabelle speichern wir Protokolle fÃ¼r mehrere Systeme. <br><br><div class="scrollable-table"><table><tbody><tr><td>  <b>Titel</b> <br></td><td>  <b>Beschreibung</b> <br></td><td>  <b>Beispiel</b> <br></td></tr><tr><td><p>  fld_app_name </p><br></td><td><p>  Anwendungs- / Systemname <br>  GÃ¼ltige Werte: </p><br><ul><li>  site1.domain.com Externe Site 1 </li><li>  site2.domain.com Externe Site 2 </li><li>  internal-site1.domain.local Interne Site 1 </li></ul><br></td><td>  site1.domain.com <br></td></tr><tr><td><p>  fld_app_module </p><br></td><td><p>  Systemmodul <br>  GÃ¼ltige Werte: </p><br><ul><li>  Web - Website </li><li>  svc - Website-Service </li><li>  intgr - Web Integration Service </li><li>  bo - Admin (BackOffice) </li></ul><br></td><td><p>  Web </p><br></td></tr><tr><td><p>  fld_website_name </p><br></td><td><p>  Name der Website in IIS </p><br><p>  Auf einem Server kÃ¶nnen mehrere Systeme oder sogar mehrere Instanzen eines Systemmoduls bereitgestellt werden </p><br></td><td><p>  Web-Main </p><br></td></tr><tr><td><p>  fld_server_name </p><br></td><td><p>  Servername </p><br></td><td><p>  web1.domain.com </p><br></td></tr><tr><td><p>  fld_log_file_name </p><br></td><td><p>  Der Pfad zur Protokolldatei auf dem Server </p><br></td><td>  C: \ inetpub \ logs \ LogFiles <br>  \ W3SVC1 \ u_ex190711.log <br></td></tr></tbody></table></div><br>  Auf diese Weise kÃ¶nnen Sie Grafiken in Grafana effektiv erstellen.  Zeigen Sie beispielsweise Anforderungen vom Frontend eines bestimmten Systems an.  Dies Ã¤hnelt dem Site-ZÃ¤hler in Yandex.Metrica. <br><br>  Hier finden Sie einige Statistiken zur Nutzung der Datenbank fÃ¼r zwei Monate. <br><br><div class="spoiler">  <b class="spoiler_title">Anzahl der DatensÃ¤tze nach System und Komponente</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> fld_app_name, fld_app_module, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(fld_app_name) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> rows_count <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> log_web <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> fld_app_name, fld_app_module <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> TOTALS <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> fld_app_name <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span>, rows_count <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> â”Œâ”€fld_app_nameâ”€â”€â”€â”€â”€â”¬â”€fld_app_moduleâ”€â”¬â”€rows_countâ”€â” â”‚ site1.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">131441</span></span> â”‚ â”‚ site2.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">1751081</span></span> â”‚ â”‚ site3.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">106887543</span></span> â”‚ â”‚ site3.domain.ru â”‚ svc â”‚ <span class="hljs-number"><span class="hljs-number">44908603</span></span> â”‚ â”‚ site3.domain.ru â”‚ intgr â”‚ <span class="hljs-number"><span class="hljs-number">9813911</span></span> â”‚ â”‚ site4.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">772095</span></span> â”‚ â”‚ site5.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">17037221</span></span> â”‚ â”‚ site5.domain.ru â”‚ intgr â”‚ <span class="hljs-number"><span class="hljs-number">838559</span></span> â”‚ â”‚ site5.domain.ru â”‚ bo â”‚ <span class="hljs-number"><span class="hljs-number">7404</span></span> â”‚ â”‚ site6.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">595877</span></span> â”‚ â”‚ site7.domain.ru â”‚ web â”‚ <span class="hljs-number"><span class="hljs-number">27778858</span></span> â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Totals: â”Œâ”€fld_app_nameâ”€â”¬â”€fld_app_moduleâ”€â”¬â”€rows_countâ”€â” â”‚ â”‚ â”‚ <span class="hljs-number"><span class="hljs-number">210522593</span></span> â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> set. Elapsed: <span class="hljs-number"><span class="hljs-number">4.874</span></span> sec. Processed <span class="hljs-number"><span class="hljs-number">210.52</span></span> million <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>, <span class="hljs-number"><span class="hljs-number">421.67</span></span> MB (<span class="hljs-number"><span class="hljs-number">43.19</span></span> million <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>/s., <span class="hljs-number"><span class="hljs-number">86.51</span></span> MB/s.)</code> </pre> <br></div></div><div class="spoiler">  <b class="spoiler_title">Die Datenmenge auf der Festplatte</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> formatReadableSize(<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(data_uncompressed_bytes)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> uncompressed, formatReadableSize(<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(data_compressed_bytes)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> compressed, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> total_rows <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> system.parts <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> = <span class="hljs-string"><span class="hljs-string">'log_web'</span></span> â”Œâ”€uncompressedâ”€â”¬â”€compressedâ”€â”¬â”€total_rowsâ”€â” â”‚ <span class="hljs-number"><span class="hljs-number">54.50</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">4.86</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">211427094</span></span> â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> set. Elapsed: <span class="hljs-number"><span class="hljs-number">0.035</span></span> sec.</code> </pre> <br></div></div><div class="spoiler">  <b class="spoiler_title">Der Grad der Datenkomprimierung in Spalten</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, formatReadableSize(data_uncompressed_bytes) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> uncompressed, formatReadableSize(data_compressed_bytes) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> compressed, data_uncompressed_bytes / data_compressed_bytes <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> compress_ratio <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> system.columns <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> = <span class="hljs-string"><span class="hljs-string">'log_web'</span></span> â”Œâ”€<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€uncompressedâ”€â”¬â”€compressedâ”€â”¬â”€â”€â”€â”€â”€compress_ratioâ”€â” â”‚ logdate â”‚ <span class="hljs-number"><span class="hljs-number">401.53</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">1.80</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">223.16665968777315</span></span> â”‚ â”‚ logdatetime â”‚ <span class="hljs-number"><span class="hljs-number">803.06</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">35.91</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">22.363966401202305</span></span> â”‚ â”‚ fld_log_file_name â”‚ <span class="hljs-number"><span class="hljs-number">220.66</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">2.60</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">84.99905736932571</span></span> â”‚ â”‚ fld_server_name â”‚ <span class="hljs-number"><span class="hljs-number">201.54</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">50.63</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">3.980924816977078</span></span> â”‚ â”‚ fld_app_name â”‚ <span class="hljs-number"><span class="hljs-number">201.17</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">969.17</span></span> KiB â”‚ <span class="hljs-number"><span class="hljs-number">212.55518183686877</span></span> â”‚ â”‚ fld_app_module â”‚ <span class="hljs-number"><span class="hljs-number">201.17</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">968.60</span></span> KiB â”‚ <span class="hljs-number"><span class="hljs-number">212.67805817411906</span></span> â”‚ â”‚ fld_website_name â”‚ <span class="hljs-number"><span class="hljs-number">201.54</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">1.24</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">162.7204926761546</span></span> â”‚ â”‚ serverIP â”‚ <span class="hljs-number"><span class="hljs-number">201.54</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">50.25</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">4.010824061219731</span></span> â”‚ â”‚ method â”‚ <span class="hljs-number"><span class="hljs-number">201.53</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">43.64</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">4.617721053304486</span></span> â”‚ â”‚ uriStem â”‚ <span class="hljs-number"><span class="hljs-number">5.13</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">832.51</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">6.311522291936919</span></span> â”‚ â”‚ uriQuery â”‚ <span class="hljs-number"><span class="hljs-number">2.58</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">501.06</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">5.269731450124478</span></span> â”‚ â”‚ port â”‚ <span class="hljs-number"><span class="hljs-number">803.06</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">3.98</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">201.91673864241824</span></span> â”‚ â”‚ username â”‚ <span class="hljs-number"><span class="hljs-number">318.08</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">26.93</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">11.812513794583598</span></span> â”‚ â”‚ clientIP â”‚ <span class="hljs-number"><span class="hljs-number">2.35</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">82.59</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">29.132328640073343</span></span> â”‚ â”‚ clientRealIP â”‚ <span class="hljs-number"><span class="hljs-number">2.49</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">465.05</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">5.478382297052563</span></span> â”‚ â”‚ userAgent â”‚ <span class="hljs-number"><span class="hljs-number">18.34</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">764.08</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">24.57905114484208</span></span> â”‚ â”‚ referer â”‚ <span class="hljs-number"><span class="hljs-number">14.71</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">1.37</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">10.736792723669906</span></span> â”‚ â”‚ response â”‚ <span class="hljs-number"><span class="hljs-number">803.06</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">83.81</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">9.582334090987247</span></span> â”‚ â”‚ subresponse â”‚ <span class="hljs-number"><span class="hljs-number">399.87</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">1.83</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">218.4831068635027</span></span> â”‚ â”‚ win32response â”‚ <span class="hljs-number"><span class="hljs-number">407.86</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">7.41</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">55.050315514606815</span></span> â”‚ â”‚ timetaken â”‚ <span class="hljs-number"><span class="hljs-number">1.57</span></span> GiB â”‚ <span class="hljs-number"><span class="hljs-number">402.06</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">3.9947395692010637</span></span> â”‚ â”‚ uriQuery__utm_medium â”‚ <span class="hljs-number"><span class="hljs-number">208.17</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">12.29</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">16.936148912472955</span></span> â”‚ â”‚ uriQuery__utm_source â”‚ <span class="hljs-number"><span class="hljs-number">215.18</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">13.00</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">16.548367623199912</span></span> â”‚ â”‚ uriQuery__utm_campaign â”‚ <span class="hljs-number"><span class="hljs-number">381.46</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">37.94</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">10.055156353418509</span></span> â”‚ â”‚ uriQuery__utm_term â”‚ <span class="hljs-number"><span class="hljs-number">231.82</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">10.78</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">21.502540454070672</span></span> â”‚ â”‚ uriQuery__utm_content â”‚ <span class="hljs-number"><span class="hljs-number">441.34</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">87.60</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">5.038260760449327</span></span> â”‚ â”‚ uriQuery__yclid â”‚ <span class="hljs-number"><span class="hljs-number">216.88</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">16.58</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">13.07721335008116</span></span> â”‚ â”‚ uriQuery__region â”‚ <span class="hljs-number"><span class="hljs-number">204.35</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">9.49</span></span> MiB â”‚ <span class="hljs-number"><span class="hljs-number">21.52661903446796</span></span> â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> set. Elapsed: <span class="hljs-number"><span class="hljs-number">0.005</span></span> sec.</code> </pre> <br></div></div><br><h4>  Beschreibung der verwendeten Komponenten <br><br>  FileBeat.  Datei ProtokollÃ¼bertragung </h4><br>  Diese Komponente Ã¼berwacht Ã„nderungen in den Protokolldateien auf der Festplatte und Ã¼bertrÃ¤gt Informationen an LogStash.  Es wird auf allen Servern installiert, auf denen Protokolldateien geschrieben werden (normalerweise IIS).  Es funktioniert im Endmodus (d. H. ÃœbertrÃ¤gt nur hinzugefÃ¼gte DatensÃ¤tze in eine Datei).  Sie kÃ¶nnen jedoch separat die gesamte DateiÃ¼bertragung konfigurieren.  Dies ist nÃ¼tzlich, wenn Sie Daten aus frÃ¼heren Monaten herunterladen mÃ¼ssen.  Legen Sie einfach die Protokolldatei in einen Ordner und er wird sie vollstÃ¤ndig lesen. <br><br>  Wenn der Dienst beendet wird, werden die Daten nicht mehr weiter in den Speicher Ã¼bertragen. <br><br>  Eine Beispielkonfiguration lautet wie folgt: <br><br><div class="spoiler">  <b class="spoiler_title">filebeat.yml</b> <div class="spoiler_text"><pre> <code class="sql hljs">filebeat.inputs: - type: log enabled: true paths: - C:/inetpub/logs/LogFiles/W3SVC1<span class="hljs-comment"><span class="hljs-comment">/*.log exclude_files: ['.gz$','.zip$'] tail_files: true ignore_older: 24h fields: fld_server_name: "site1.domain.ru" fld_app_name: "site1.domain.ru" fld_app_module: "web" fld_website_name: "web-main" - type: log enabled: true paths: - C:/inetpub/logs/LogFiles/__Import/access_log-* exclude_files: ['.gz$','.zip$'] tail_files: false fields: fld_server_name: "site2.domain.ru" fld_app_name: "site2.domain.ru" fld_app_module: "web" fld_website_name: "web-main" fld_logformat: "logformat__apache" filebeat.config.modules: path: ${path.config}/modules.d/*.yml reload.enabled: false reload.period: 2s output.logstash: hosts: ["log.domain.com:5044"] ssl.enabled: true ssl.certificate_authorities: ["C:/filebeat/certs/ca.pem", "C:/filebeat/certs/ca-issuing.pem"] ssl.certificate: "C:/filebeat/certs/site1.domain.ru.cer" ssl.key: "C:/filebeat/certs/site1.domain.ru.key" #================================ Processors ===================================== processors: - add_host_metadata: ~ - add_cloud_metadata: ~</span></span></code> </pre> <br></div></div><br><h4>  LogStash  Protokollsammler </h4><br>  Diese Komponente dient zum Empfangen von ProtokolleintrÃ¤gen von FileBeat (oder Ã¼ber die RabbitMQ-Warteschlange), zum Parsen und EinfÃ¼gen von Bundles in die ClickHouse-Datenbank. <br><br>  Zum EinfÃ¼gen in ClickHouse wird das Plugin Logstash-output-clickhouse verwendet.  Das Logstash-Plugin verfÃ¼gt Ã¼ber einen Mechanismus zum Abrufen von Anforderungen. Bei einem regelmÃ¤ÃŸigen Herunterfahren ist es jedoch besser, den Dienst selbst zu stoppen.  Wenn Sie anhalten, sammeln sich Nachrichten in der RabbitMQ-Warteschlange an. Wenn Sie also lÃ¤ngere Zeit anhalten, ist es besser, Filebeats auf Servern zu stoppen.  In einem Schema, in dem RabbitMQ nicht verwendet wird (im lokalen Netzwerk sendet Filebeat Protokolle direkt an Logstash), funktionieren Filebeats recht akzeptabel und sicher, sodass fÃ¼r sie die UnzugÃ¤nglichkeit der Ausgabe keine Konsequenzen hat. <br><br>  Eine Beispielkonfiguration lautet wie folgt: <br><br><div class="spoiler">  <b class="spoiler_title">log_web__filebeat_clickhouse.conf</b> <div class="spoiler_text"><pre> <code class="sql hljs">input { beats { port =&gt; 5044 type =&gt; 'iis' ssl =&gt; true ssl_certificate_authorities =&gt; ["/etc/logstash/certs/ca.cer", "/etc/logstash/certs/ca-issuing.cer"] ssl_certificate =&gt; "/etc/logstash/certs/server.cer" ssl_key =&gt; "/etc/logstash/certs/server-pkcs8.key" ssl_verify_mode =&gt; "peer" add_field =&gt; { "fld_server_name" =&gt; "%{[fields][fld_server_name]}" "fld_app_name" =&gt; "%{[fields][fld_app_name]}" "fld_app_module" =&gt; "%{[fields][fld_app_module]}" "fld_website_name" =&gt; "%{[fields][fld_website_name]}" "fld_log_file_name" =&gt; "%{source}" "fld_logformat" =&gt; "%{[fields][fld_logformat]}" } } rabbitmq { host =&gt; "queue.domain.com" port =&gt; 5671 user =&gt; "q-reader" password =&gt; "password" queue =&gt; "web_log" heartbeat =&gt; 30 durable =&gt; true ssl =&gt; true <span class="hljs-comment"><span class="hljs-comment">#ssl_certificate_path =&gt; "/etc/logstash/certs/server.p12" #ssl_certificate_password =&gt; "password" add_field =&gt; { "fld_server_name" =&gt; "%{[fields][fld_server_name]}" "fld_app_name" =&gt; "%{[fields][fld_app_name]}" "fld_app_module" =&gt; "%{[fields][fld_app_module]}" "fld_website_name" =&gt; "%{[fields][fld_website_name]}" "fld_log_file_name" =&gt; "%{source}" "fld_logformat" =&gt; "%{[fields][fld_logformat]}" } } } filter { if [message] =~ "^#" { drop {} } if [fld_logformat] == "logformat__iis_with_xrealip" { grok { match =&gt; ["message", "%{TIMESTAMP_ISO8601:log_timestamp} %{IP:serverIP} %{WORD:method} %{NOTSPACE:uriStem} %{NOTSPACE:uriQuery} %{NUMBER:port} %{NOTSPACE:username} %{IPORHOST:clientIP} %{NOTSPACE:userAgent} %{NOTSPACE:referer} %{NUMBER:response} %{NUMBER:subresponse} %{NUMBER:win32response} %{NUMBER:timetaken} %{NOTSPACE:xrealIP} %{NOTSPACE:xforwarderfor}"] } } else { grok { match =&gt; ["message", "%{TIMESTAMP_ISO8601:log_timestamp} %{IP:serverIP} %{WORD:method} %{NOTSPACE:uriStem} %{NOTSPACE:uriQuery} %{NUMBER:port} %{NOTSPACE:username} %{IPORHOST:clientIP} %{NOTSPACE:userAgent} %{NOTSPACE:referer} %{NUMBER:response} %{NUMBER:subresponse} %{NUMBER:win32response} %{NUMBER:timetaken}"] } } date { match =&gt; [ "log_timestamp", "YYYY-MM-dd HH:mm:ss" ] timezone =&gt; "Etc/UTC" remove_field =&gt; [ "log_timestamp", "@timestamp" ] target =&gt; [ "log_timestamp2" ] } ruby { code =&gt; "tstamp = event.get('log_timestamp2').to_i event.set('logdatetime', Time.at(tstamp).strftime('%Y-%m-%d %H:%M:%S')) event.set('logdate', Time.at(tstamp).strftime('%Y-%m-%d'))" } if [bytesSent] { ruby { code =&gt; "event['kilobytesSent'] = event['bytesSent'].to_i / 1024.0" } } if [bytesReceived] { ruby { code =&gt; "event['kilobytesReceived'] = event['bytesReceived'].to_i / 1024.0" } } ruby { code =&gt; "event.set('clientRealIP', event.get('clientIP'))" } if [xrealIP] { ruby { code =&gt; "event.set('clientRealIP', event.get('xrealIP'))" } } if [xforwarderfor] { ruby { code =&gt; "event.set('clientRealIP', event.get('xforwarderfor'))" } } mutate { convert =&gt; ["bytesSent", "integer"] convert =&gt; ["bytesReceived", "integer"] convert =&gt; ["timetaken", "integer"] convert =&gt; ["port", "integer"] add_field =&gt; { "clientHostname" =&gt; "%{clientIP}" } } useragent { source=&gt; "useragent" prefix=&gt; "browser" } kv { source =&gt; "uriQuery" prefix =&gt; "uriQuery__" allow_duplicate_values =&gt; false field_split =&gt; "&amp;" include_keys =&gt; [ "utm_medium", "utm_source", "utm_campaign", "utm_term", "utm_content", "yclid", "region" ] } mutate { join =&gt; { "uriQuery__utm_source" =&gt; "," } join =&gt; { "uriQuery__utm_medium" =&gt; "," } join =&gt; { "uriQuery__utm_campaign" =&gt; "," } join =&gt; { "uriQuery__utm_term" =&gt; "," } join =&gt; { "uriQuery__utm_content" =&gt; "," } join =&gt; { "uriQuery__yclid" =&gt; "," } join =&gt; { "uriQuery__region" =&gt; "," } } } output { #stdout {codec =&gt; rubydebug} clickhouse { headers =&gt; ["Authorization", "Basic abcdsfks..."] http_hosts =&gt; ["http://127.0.0.1:8123"] save_dir =&gt; "/etc/logstash/tmp" table =&gt; "log_web" request_tolerance =&gt; 1 flush_size =&gt; 10000 idle_flush_time =&gt; 1 mutations =&gt; { "fld_log_file_name" =&gt; "fld_log_file_name" "fld_server_name" =&gt; "fld_server_name" "fld_app_name" =&gt; "fld_app_name" "fld_app_module" =&gt; "fld_app_module" "fld_website_name" =&gt; "fld_website_name" "logdatetime" =&gt; "logdatetime" "logdate" =&gt; "logdate" "serverIP" =&gt; "serverIP" "method" =&gt; "method" "uriStem" =&gt; "uriStem" "uriQuery" =&gt; "uriQuery" "port" =&gt; "port" "username" =&gt; "username" "clientIP" =&gt; "clientIP" "clientRealIP" =&gt; "clientRealIP" "userAgent" =&gt; "userAgent" "referer" =&gt; "referer" "response" =&gt; "response" "subresponse" =&gt; "subresponse" "win32response" =&gt; "win32response" "timetaken" =&gt; "timetaken" "uriQuery__utm_medium" =&gt; "uriQuery__utm_medium" "uriQuery__utm_source" =&gt; "uriQuery__utm_source" "uriQuery__utm_campaign" =&gt; "uriQuery__utm_campaign" "uriQuery__utm_term" =&gt; "uriQuery__utm_term" "uriQuery__utm_content" =&gt; "uriQuery__utm_content" "uriQuery__yclid" =&gt; "uriQuery__yclid" "uriQuery__region" =&gt; "uriQuery__region" } } }</span></span></code> </pre> <br></div></div><div class="spoiler">  <b class="spoiler_title">pipelines.yml</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment"># This file is where you define your pipelines. You can define multiple. # For more information on multiple pipelines, see the documentation: # https://www.elastic.co/guide/en/logstash/current/multiple-pipelines.html - pipeline.id: log_web__filebeat_clickhouse path.config: "/etc/logstash/log_web__filebeat_clickhouse.conf"</span></span></code> </pre> <br></div></div><br><h4>  ClickHouse.  Protokollspeicher </h4><br>  Protokolle fÃ¼r alle Systeme werden in einer Tabelle gespeichert (siehe Anfang des Artikels).  Es dient zum Speichern von Informationen zu Anforderungen: Alle Parameter sind fÃ¼r verschiedene Formate Ã¤hnlich, z. B. IIS-Protokolle, Apache- und Nginx-Protokolle.  FÃ¼r Anwendungsprotokolle, in denen beispielsweise Fehler, Informationsmeldungen und Warnungen aufgezeichnet werden, wird eine separate Tabelle mit der entsprechenden Struktur bereitgestellt (jetzt in der Entwurfsphase). <br><br>  Beim Entwerfen einer Tabelle ist es sehr wichtig, den PrimÃ¤rschlÃ¼ssel zu bestimmen (nach dem die Daten wÃ¤hrend der Speicherung sortiert werden).  Der Grad der Datenkomprimierung und die Abfragegeschwindigkeit hÃ¤ngen davon ab.  In unserem Beispiel ist der SchlÃ¼ssel <br>  ORDER BY (fld_app_name, fld_app_module, logdatetime) <br>  Das heiÃŸt, durch den Namen des Systems, den Namen der Systemkomponente und das Datum des Ereignisses.  Das ursprÃ¼ngliche Datum der Veranstaltung stand an erster Stelle.  Nachdem es an den letzten Ort verschoben wurde, begannen die Abfragen etwa zweimal schneller zu arbeiten.  Zum Ã„ndern des PrimÃ¤rschlÃ¼ssels mÃ¼ssen Sie die Tabelle neu erstellen und die Daten neu laden, damit ClickHouse die Daten auf der Festplatte neu sortiert.  Dies ist eine schwierige Operation, daher ist es ratsam, im Voraus zu Ã¼berlegen, was im SortierschlÃ¼ssel enthalten sein soll. <br><br>  Es sollte auch beachtet werden, dass relativ in neueren Versionen der Datentyp LowCardinality aufgetreten ist.  Bei Verwendung wird die GrÃ¶ÃŸe der komprimierten Daten fÃ¼r Felder mit geringer KardinalitÃ¤t (wenige Optionen) stark reduziert. <br><br>  Jetzt wird Version 19.6 verwendet, und wir planen, die Version auf den neuesten Stand zu bringen.  Dazu gehÃ¶rten beispielsweise wunderbare Funktionen wie Adaptive Granularity, Ãœberspringen von Indizes und der DoubleDelta-Codec. <br><br>  StandardmÃ¤ÃŸig wird die Protokollstufe der Ablaufverfolgung wÃ¤hrend der Konfiguration festgelegt.  Protokolle werden gedreht und archiviert, aber auf ein Gigabyte erweitert.  Wenn dies nicht erforderlich ist, kÃ¶nnen Sie die Warnstufe festlegen. Die GrÃ¶ÃŸe des Protokolls nimmt dann stark ab.  Die Protokollierungseinstellungen werden in der Datei config.xml festgelegt: <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- Possible levels: https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Logger. h#L105 --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">level</span></span></span><span class="hljs-tag">&gt;</span></span>warning<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">level</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Einige nÃ¼tzliche Befehle</b> <div class="spoiler_text"><pre> <code class="sql hljs">      Debian,     Linux      Altinity.           : https://www.altinity.com/blog/2017/12/18/logstash-<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-clickhouse sudo yum <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> clickhouse-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> sudo yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> clickhouse-server.noarch <span class="hljs-number"><span class="hljs-number">1.</span></span>   sudo systemctl <span class="hljs-keyword"><span class="hljs-keyword">status</span></span> clickhouse-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> <span class="hljs-number"><span class="hljs-number">2.</span></span>   sudo systemctl <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> clickhouse-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> <span class="hljs-number"><span class="hljs-number">3.</span></span>   sudo systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> clickhouse-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>        (   <span class="hljs-string"><span class="hljs-string">";"</span></span>) clickhouse-<span class="hljs-keyword"><span class="hljs-keyword">client</span></span> <span class="hljs-comment"><span class="hljs-comment">--multiline clickhouse-client --multiline --host 127.0.0.1 --password pa55w0rd clickhouse-client --multiline --host 127.0.0.1 --port 9440 --secure --user default --password pa55w0rd                /tmp/log_web_failed.json            : clickhouse-client --host 127.0.0.1 --password password --query="INSERT INTO log_web FORMAT JSONEachRow" &lt; /tmp/log_web_failed__fixed.json sudo mv /etc/logstash/tmp/log_web_failed.json /etc/logstash/tmp/log_web_failed__fixed.json sudo chown user_dev /etc/logstash/tmp/log_web_failed__fixed.json sudo clickhouse-client --host 127.0.0.1 --password password --query="INSERT INTO log_web FORMAT JSONEachRow" &lt; /etc/logstash/tmp/log_web_failed__fixed.json sudo mv /etc/logstash/tmp/log_web_failed__fixed.json /etc/logstash/tmp/log_web_failed__fixed_.json     quit; ##  TLS https://www.altinity.com/blog/2019/3/5/clickhouse-networking-part-2 openssl s_client -connect log.domain.com:9440 &lt; /dev/null</span></span></code> </pre> <br></div></div><br><h4>  LogStash  FileBeat-Protokollrouter zur RabbitMQ-Warteschlange </h4><br>  Diese Komponente wird verwendet, um von FileBeat kommende Protokolle an die RabbitMQ-Warteschlange weiterzuleiten.  Es gibt zwei Punkte: <br><br><ol><li>  Leider verfÃ¼gt FileBeat nicht Ã¼ber ein Ausgabe-Plugin zum direkten Schreiben in RabbitMQ.  Und eine solche FunktionalitÃ¤t ist nach dem ish auf ihrem Github nicht fÃ¼r die Implementierung geplant.  Es gibt ein Plugin fÃ¼r Kafka, aber aus irgendeinem Grund kÃ¶nnen wir es zu Hause nicht verwenden. </li><li>  Es gibt Anforderungen fÃ¼r das Sammeln von Protokollen in der DMZ.  Basierend darauf mÃ¼ssen die Protokolle zuerst zur Warteschlange hinzugefÃ¼gt werden, und dann liest LogStash von auÃŸen die EintrÃ¤ge aus der Warteschlange. </li></ol><br>  Daher mÃ¼ssen Sie genau fÃ¼r den Fall des Serverstandorts in der DMZ ein derart etwas kompliziertes Schema verwenden.  Eine Beispielkonfiguration lautet wie folgt: <br><br><div class="spoiler">  <b class="spoiler_title">iis_w3c_logs__filebeat_rabbitmq.conf</b> <div class="spoiler_text"><pre> <code class="sql hljs">input { beats { port =&gt; 5044 type =&gt; 'iis' ssl =&gt; true ssl_certificate_authorities =&gt; ["/etc/pki/tls/certs/app/ca.pem", "/etc/pki/tls/certs/app/ca-issuing.pem"] ssl_certificate =&gt; "/etc/pki/tls/certs/app/queue.domain.com.cer" ssl_key =&gt; "/etc/pki/tls/certs/app/queue.domain.com-pkcs8.key" ssl_verify_mode =&gt; "peer" } } output { <span class="hljs-comment"><span class="hljs-comment">#stdout {codec =&gt; rubydebug} rabbitmq { host =&gt; "127.0.0.1" port =&gt; 5672 exchange =&gt; "monitor.direct" exchange_type =&gt; "direct" key =&gt; "%{[fields][fld_app_name]}" user =&gt; "q-writer" password =&gt; "password" ssl =&gt; false } }</span></span></code> </pre> <br></div></div><br><h4>  RabbitMQ.  Nachrichtenwarteschlange </h4><br>  Diese Komponente wird verwendet, um ProtokolleintrÃ¤ge in der DMZ zu puffern.  Die Aufnahme erfolgt Ã¼ber eine Reihe von Filebeat â†’ LogStash.  Das Lesen erfolgt von auÃŸerhalb der DMZ Ã¼ber LogStash.  Beim Betrieb Ã¼ber RabboitMQ werden ungefÃ¤hr 4.000 Nachrichten pro Sekunde verarbeitet. <br><br>  Das Nachrichtenrouting wird gemÃ¤ÃŸ dem Namen des Systems konfiguriert, d. H. Basierend auf FileBeat-Konfigurationsdaten.  Alle Nachrichten fallen in eine Warteschlange.  Wenn der Warteschlangendienst aus irgendeinem Grund gestoppt wird, fÃ¼hrt dies nicht zum Verlust von Nachrichten: FileBeats empfÃ¤ngt Verbindungsfehler und setzt das temporÃ¤re Senden aus.  Und LogStash, das aus der Warteschlange liest, empfÃ¤ngt auch Netzwerkfehler und wartet, bis die Verbindung wieder aufgenommen wird.  Die Daten werden in diesem Fall natÃ¼rlich nicht mehr in die Datenbank geschrieben. <br><br>  Die folgenden Anweisungen werden zum Erstellen und Konfigurieren von Warteschlangen verwendet: <br><br><pre> <code class="sql hljs">sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin <span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exchange</span></span> <span class="hljs-comment"><span class="hljs-comment">--vhost=/ name=monitor.direct type=direct sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin declare queue --vhost=/ name=web_log durable=true sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin --vhost="/" declare binding source="monitor.direct" destination_type="queue" destination="web_log" routing_key="site1.domain.ru" sudo /usr/local/bin/rabbitmqadmin/rabbitmqadmin --vhost="/" declare binding source="monitor.direct" destination_type="queue" destination="web_log" routing_key="site2.domain.ru"</span></span></code> </pre> <br><h4>  Grafana  Dashboards </h4><br>  Diese Komponente wird zur Visualisierung von Ãœberwachungsdaten verwendet.  In diesem Fall mÃ¼ssen Sie die ClickHouse-Datenquelle fÃ¼r das Grafana 4.6+ Plugin installieren.  Wir mussten es ein wenig optimieren, um die Effizienz der Verarbeitung von SQL-Filtern in einem Dashboard zu erhÃ¶hen. <br><br>  Zum Beispiel verwenden wir Variablen, und wenn sie nicht im Filterfeld festgelegt sind, mÃ¶chten wir, dass keine Bedingung in der WHERE-Form generiert wird (uriStem = `` AND uriStem! = '').  In diesem Fall liest ClickHouse die uriStem-Spalte.  Im Allgemeinen haben wir verschiedene Optionen ausprobiert und schlieÃŸlich das Plugin (Makro $ valueIfEmpty) so korrigiert, dass bei einem leeren Wert 1 zurÃ¼ckgegeben wird, ohne die Spalte selbst zu erwÃ¤hnen. <br><br>  Und jetzt kÃ¶nnen Sie diese Abfrage fÃ¼r das Diagramm verwenden <br><br><pre> <code class="sql hljs">$columns(response, count(*) c) from $table where $adhoc and $valueIfEmpty($fld_app_name, 1, fld_app_name = '$fld_app_name') and $valueIfEmpty($fld_app_module, 1, fld_app_module = '$fld_app_module') and $valueIfEmpty($fld_server_name, 1, fld_server_name = '$fld_server_name') and $valueIfEmpty($uriStem, 1, uriStem like '%$uriStem%') and $valueIfEmpty($clientRealIP, 1, clientRealIP = '$clientRealIP')</code> </pre> <br>  Dies wird in eine solche SQL konvertiert (beachten Sie, dass leere uriStem-Felder in nur 1 konvertiert wurden). <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> t, groupArray((response, c)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> groupArr <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> (intDiv(toUInt32(logdatetime), <span class="hljs-number"><span class="hljs-number">60</span></span>) * <span class="hljs-number"><span class="hljs-number">60</span></span>) * <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> t, response, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> default.log_web <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (logdate &gt;= toDate(<span class="hljs-number"><span class="hljs-number">1565061982</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (logdatetime &gt;= toDateTime(<span class="hljs-number"><span class="hljs-number">1565061982</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (fld_app_name = <span class="hljs-string"><span class="hljs-string">'site1.domain.ru'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (fld_app_module = <span class="hljs-string"><span class="hljs-string">'web'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> t, response <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span>, response <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span></code> </pre> <br><h4>  Fazit </h4><br>  Das Erscheinen der ClickHouse-Datenbank ist zu einem Meilenstein auf dem Markt geworden.  Es war kaum vorstellbar, dass wir sofort kostenlos mit einem leistungsstarken und praktischen Tool fÃ¼r die Arbeit mit Big Data ausgestattet waren.  Mit zunehmenden Anforderungen (z. B. Sharding und Replikation auf mehrere Server) wird das Schema natÃ¼rlich komplexer.  Aber auf den ersten Blick ist die Arbeit mit dieser Datenbank sehr schÃ¶n.  Es ist ersichtlich, dass das Produkt "fÃ¼r Menschen" hergestellt wird. <br><br>  Im Vergleich zu ElasticSearch reduzieren sich die Kosten fÃ¼r das Speichern und Verarbeiten von Protokollen nach vorlÃ¤ufigen SchÃ¤tzungen von fÃ¼nf auf das Zehnfache.  Mit anderen Worten, wenn wir fÃ¼r die aktuelle Datenmenge einen Cluster aus mehreren Computern konfigurieren mÃ¼ssten, benÃ¶tigen wir bei Verwendung von ClickHouse nur einen Computer mit geringem Stromverbrauch.  Ja, ElasticSearch verfÃ¼gt natÃ¼rlich auch Ã¼ber Mechanismen zum Komprimieren von Daten auf der Festplatte und andere Funktionen, die den Ressourcenverbrauch erheblich reduzieren kÃ¶nnen. Im Vergleich zu ClickHouse ist dies jedoch kostspielig. <br><br>  Ohne spezielle Optimierungen funktioniert das Laden von Daten und das Abrufen von Daten aus der Datenbank in den Standardeinstellungen mit erstaunlicher Geschwindigkeit.  Bisher haben wir ein paar Daten (ungefÃ¤hr 200 Millionen DatensÃ¤tze), aber der Server selbst ist schwach.  In Zukunft kÃ¶nnen wir dieses Tool fÃ¼r andere Zwecke verwenden, die nicht mit der Speicherung von Protokollen zusammenhÃ¤ngen.  Zum Beispiel fÃ¼r End-to-End-Analysen im Bereich Sicherheit, maschinelles Lernen. <br><br>  Am Ende ein wenig Ã¼ber die Vor- und Nachteile. <br><br><h4>  Nachteile </h4><br><ol><li>  Herunterladen von DatensÃ¤tzen in groÃŸen Paketen.  Dies ist einerseits eine Funktion, aber Sie mÃ¼ssen immer noch zusÃ¤tzliche Komponenten verwenden, um DatensÃ¤tze zu puffern.  Diese Aufgabe ist nicht immer einfach, aber dennoch lÃ¶sbar.  Und ich mÃ¶chte das Schema vereinfachen. </li><li>  Einige exotische Funktionen oder neue Funktionen werden hÃ¤ufig in neuen Versionen verwendet.  Dies wirft Bedenken auf und verringert den Wunsch nach einem Upgrade auf eine neue Version.  Beispielsweise ist die Kafka-Tabellen-Engine eine sehr nÃ¼tzliche Funktion, mit der Sie Ereignisse aus Kafka direkt lesen kÃ¶nnen, ohne dass Verbraucher implementiert werden mÃ¼ssen.  Gemessen an der Anzahl der Probleme auf dem Github sind wir jedoch immer noch vorsichtig, diesen Motor in der Produktion einzusetzen.  Wenn Sie jedoch keine scharfen Bewegungen zur Seite ausfÃ¼hren und die GrundfunktionalitÃ¤t verwenden, funktioniert dies stabil. </li></ol><br><h4>  Vorteile </h4><br><ol><li>  Es verlangsamt sich nicht. </li><li>  Niedrige Eintrittsschwelle. </li><li>  Open Source </li><li>  Es ist kostenlos. </li><li>  Skaliert gut (Out-of-Box-Sharding / Replikation) </li><li>  Es ist in dem vom Ministerium fÃ¼r Kommunikation empfohlenen Register russischer Software enthalten. </li><li>  Das Vorhandensein offizieller UnterstÃ¼tzung von Yandex. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472912/">https://habr.com/ru/post/de472912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472896/index.html">Hubschrauber von einem Drucker: Zum ersten Mal haben Wissenschaftler einen groÃŸen Koffer eines Hubschraubermotors â€gedrucktâ€œ</a></li>
<li><a href="../de472902/index.html">Windows for IoT: Verbesserte HardwareunterstÃ¼tzung und neue Funktionen fÃ¼r intelligente GerÃ¤te</a></li>
<li><a href="../de472904/index.html">Wie Amazon Stock Work in ein Spiel verwandelte</a></li>
<li><a href="../de472908/index.html">Dagaz: Episoden (Teil 2)</a></li>
<li><a href="../de472910/index.html">Suchen Sie mit einem Smartphone nach Text auf Schildern und Paketen</a></li>
<li><a href="../de472914/index.html">Wolfram Function Repository: Open Access-Plattform fÃ¼r Wolfram-Spracherweiterungen</a></li>
<li><a href="../de472916/index.html">Backend, maschinelles Lernen und Serverless sind die interessantesten auf der Juli-Habr-Konferenz</a></li>
<li><a href="../de472918/index.html">ZX Spectrum in Russland und der GUS: Wie sich das Streben nach Online offline verÃ¤ndert hat</a></li>
<li><a href="../de472922/index.html">Defender-Programmierer stÃ¤rker als Entropie</a></li>
<li><a href="../de472926/index.html">Das Gesetz der Beschleunigung der Rendite (Teil 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>