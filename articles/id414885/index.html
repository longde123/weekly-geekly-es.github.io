<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥀 👨🏻‍🔬 👰 Kami menangani kesalahan dan "penopang" dalam Daftar Badan Hukum Negara Bersatu - register negara dari badan hukum 💳 🗣️ 🗓️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pekan lalu, kami merilis sebuah artikel tentang register register - registrasi negara dengan data dari 10 juta perusahaan. Materi itu berbicara tentan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami menangani kesalahan dan "penopang" dalam Daftar Badan Hukum Negara Bersatu - register negara dari badan hukum</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hflabs/blog/414885/"><img src="https://habrastorage.org/webt/4e/3e/bi/4e3ebi1ytnjuu_-zgo0racfq2yi.jpeg"><br><br>  Pekan lalu, kami merilis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sebuah artikel tentang</a> register register - registrasi negara dengan data dari 10 juta perusahaan.  Materi itu berbicara tentang hal-hal mendasar, jadi yang terbaik adalah memulainya. <br><br>  Di sini kami akan mengungkapkan topik yang kaya dan subur - masalah dari Entitas Hukum Negara Kesatuan yang mencegah pengembang kami bosan. <br><a name="habracut"></a><br><h2>  Struktur Xml rusak secara berkala </h2><br>  Pada 2017, setiap dua hingga tiga bulan, pembaruan membawa xmls dalam format yang salah.  Ada satu set lengkap: tag tidak dikenal, tag terbuka, ketidakcocokan tipe data.  Sebagai contoh, di xsd tipe tanggal ditentukan, tetapi sebenarnya ada string yang tidak bisa dipahami. <br><br>  Ketika ini terjadi, tetap menulis ke dukungan teknis dan menunggu dengan rendah hati.  Tidak ada lagi yang bisa dilakukan.  Tetapi kita harus mengakui bahwa pada 2018 tidak ada masalah, semuanya jelas. <br><br>  Dan dalam pembongkaran lengkap untuk 2015 terletak xml rusak, yang tidak akan pernah diperbaiki.  Layanan Pajak Federal mengatakan mereka tahu tentang hal itu, tetapi tidak bermaksud untuk memperbaikinya: ambil, kata mereka, pembaruan berikut. <br><br><h2>  Pembaruan muncul di folder dari tanggal lama </h2><br>  Situasi: Anda mengunduh buku referensi lengkap pada awal 2018, menerapkan semua pembaruan dan pembaruan yang diunduh setiap hari.  Anda santai dan tenteram, karena Anda tahu: dalam database Anda, data yang paling relevan tentang badan hukum. <br><br>  Tapi Anda masih melewatkan satu fakta: semalam Layanan Pajak Federal tidak hanya merilis pembaruan berikutnya, tetapi juga memasukkan file baru ke folder tiga bulan lalu.  Baiklah, basis Anda sudah ketinggalan zaman. <br><br>  Pembaruan retroaktif datang dalam dua jenis: <br><br><ul><li>  Ubah file yang ada </li><li>  tambahkan yang baru. </li></ul><br>  Untuk menghapus sesuatu, kami tidak melihat. <br><br>  Kami sedang berjuang dengan semua ini di sini.  Direktori lokal kami berisi potongan data saat ini dari server FTS - standar.  Setiap malam kami mengunduh sepenuhnya semua arsip dari server register dan membandingkannya dengan standar. <br><br>  Kami menemukan file-file baru dengan jelas caranya: mereka tidak ada di direktori lokal.  Jika file itu, tetapi tanggal perubahan dalam referensi dan database baru berbeda, bandingkan checksum.  Ketika itu berbeda, ambil xml-ku baru dan terapkan pembaruan. <br><br>  Tapi ada nuansa!  Terkadang informasi yang tidak relevan datang dalam pembaruan surut, maka itu tidak dapat diterapkan.  Sekarang akan ada contoh yang sedikit membingungkan, perhatikan tangan Anda. <br><br>  Misalkan, pada 21 Mei, pembaruan dirilis untuk LLC Romashka.  Itu terletak di folder <i>06/21/2018</i> .  Dan pada 22 Mei, Layanan Pajak Federal meletakkan file di direktori pada <i>20/06/2018</i> , ia juga memiliki sesuatu tentang "Daisy".  Ini adalah sesuatu yang tidak akan kami sentuh.  Meskipun file baru segar, isinya tidak relevan karena pembaruan 21 Mei. <br><br><h2>  Rekaman hilang antara tahun </h2><br>  Tampaknya jika Anda mengambil arsip 01/01 / 2015_FULL dan kemudian memutar semua pembaruan untuk 2015, Anda akan mendapatkan data dari 01/01 / 2016_FULL.  Dan tidak! <br><br>  Situasi biasa dari dunia kita yang tidak sempurna: <br><br><ol><li>  Semua 2016 dalam daftar tidak ada tentang perusahaan.  Baik di arsip lengkap di awal tahun, maupun di pembaruan. </li><li>  Pada <i>01.01.2017_FULL,</i> perusahaan tiba-tiba muncul dan hidup dengan tenang sepanjang tahun. </li><li>  Dan kemudian bam - pada <i>01/01/</i> 20188_FULL tidak ada perusahaan lagi.  Dengan sedikit keberuntungan, dia akan datang kemudian di salah satu pembaruan, tetapi tidak sama sekali fakta. </li></ol><br>  Sekitar 1000 badan hukum hilang dari tahun ke tahun. <br><br><img src="https://habrastorage.org/webt/c-/gm/ta/c-gmtaq4rrwrdaxgmr4zmqsdoum.png"><br>  <sub>LLC yang luar biasa ini hanya menyala sekali dalam Daftar Badan Hukum Negara Bersatu: dalam pembaruan 02.21.2017.</sub>  <sub>Tidak ada perusahaan di tempat lain, tidak dalam satu bongkar penuh</sub> <br><br>  Karena itu, tidak akan berfungsi untuk melakukan pembongkaran lengkap di awal tahun dan menerapkan semua pembaruan hingga hari ini.  Mohon mulai dari tahun 2015, jika tidak pendaftaran Anda tidak akan lengkap. <br><br><h2>  Xsd berubah tiba-tiba </h2><br>  Beberapa kali sejak 2015, Layanan Pajak Federal tiba-tiba berubah xsd.  Sepertinya ini: pembaruan datang, Anda mencoba menguraikannya sesuai dengan format lama, tetapi tidak ada yang berhasil.  Menyegarkan! <br><br>  Untuk beradaptasi dengan xsd baru, secara umum, adalah hal sehari-hari.  Masalahnya adalah tidak ada yang memperingatkan tentang perubahan.  Aerobatik - memposting pengumuman di bagian sewenang-wenang di situs web Layanan Pajak Federal, tetapi biasanya tidak.  Anda akan belajar tentang segalanya berdasarkan fakta. <br><br><h2>  Tidak jelas cara mengidentifikasi afiliasi. </h2><br>  Seperti yang saya katakan di artikel sebelumnya, cabang-cabang di USRLE bukan catatan yang terpisah, mereka adalah atribut badan hukum.  Secara hukum, cabang dan kantor perwakilan tidak dapat berdiri sendiri, itulah sebabnya mereka disimpan dalam catatan perusahaan utama. <br><br>  Tetapi pelanggan kami memiliki kebutuhan mereka sendiri: mereka memberikan layanan kepada cabang-cabang perusahaan lain, menandatangani dokumen bersama dengan mereka, dan memelihara cabang dalam sistem akuntansi mereka sebagai entitas yang terpisah.  Karena itu, kami akan mengubah cabang dan kantor perwakilan dari USRLE menjadi kartu yang terpisah dan mengikat ke master record. <br><br>  Kartu afiliasi yang dibuat perlu diidentifikasi.  Struktur USRLE menyediakan PPC, nama singkatan, nama lengkap, dan bahkan nama dalam bahasa Latin.  Tetapi untuk membuatnya lebih menyenangkan, Layanan Pajak Federal dijamin hanya mengisi alamat.  Cara menunjukkan cabang, bukan untuk menampilkan alamat. <br><br><img src="https://habrastorage.org/webt/mn/wh/1l/mnwh1lvnmjxi5lbnpqs3bf7weh4.png"><br>  <sub>Contoh tipikal: cabang dalam pembongkaran tidak memiliki apa-apa selain alamat</sub> <br><br>  Pertama, kita masih mencari di lapangan dengan nama yang disingkat: tiba-tiba ada sesuatu yang terbaring di sana.  Dalam 50% kasus, bidang ini benar-benar tidak kosong, tetapi meskipun demikian masih terlalu dini untuk bersukacita: nama mungkin sama untuk semua cabang badan hukum.  Sebagai pengidentifikasi, ini tidak lebih berguna daripada bidang kosong. <br><br>  Jika nama cabang kosong atau tidak unik, kami membuatnya sendiri. <br><br>  Sebagai contoh, kami akan mengambil semua LLC yang sama "Camomile".  Ia memiliki tiga cabang dengan nama kosong dan alamat seperti itu: <br><br><ul><li>  Moskow, Turchaninov Lane; </li><li>  Moskow, tanggul Ozerkovskaya; </li><li>  St. Petersburg, Nevsky Prospect. </li></ul><br>  Kami mengambil data perusahaan itu, dan mengubahnya menjadi pengenal nama waras cabang. <br><br><ol><li>  Tambahkan kata "Cabang" atau "Divisi" dalam nama, atribut yang berbeda disediakan untuk mereka dalam Daftar Badan Hukum Negara Bersatu. </li><li>  Sertakan dalam nama nama pendek dari organisasi utama.  Sekarang kami memiliki tiga nama identik "Cabang LLC Romashka." </li><li>  Kami mengambil alamat cabang dan dalam tanda kurung kami menambahkan nama-nama bagian yang berbeda dari alamat. <br><br>  Kami mengaitkan alamat dengan bagian yang unik: untuk dua cabang pertama dari "Aster" ini adalah alamat lengkap, dan untuk yang ketiga - hanya "St. Petersburg".  Jika semua kota berbeda, mereka hanya akan menambahkan kota ke nama cabang. </li></ol><br>  Dalam contoh kami, cabang-cabangnya adalah sebagai berikut: <br><br><ul><li>  "Cabang LLC Romashka (Moskow, Jalur Turchaninov)"; </li><li>  "Cabang LLC Romashka (Moskow, Tanggul Ozerkovskaya)"; </li><li>  "Cabang LLC Romashka (St. Petersburg)." </li></ul><br>  Ya, jika cabang di USRLE memiliki nama, tetapi tidak unik, kami melewatkan dua langkah pertama.  Kami menambahkan bagian alamat ke nama yang tidak unik ini. <br><br>  Kami mengambil alamat untuk nama ke maksimum ke jalan, karena neraka dimulai dengan bagian rumah seperti "dmvld 3, building 5, room  14/51, dari.  145. "  Sulit untuk dibongkar, tetapi sebagai bagian dari nama cabang itu terlihat konyol.  Karena itu, kami menyatukan cabang-cabang yang terletak di jalan yang sama.  Bahkan ada cabang berbeda di gedung yang sama!  Untungnya, ada beberapa. <br><br><h2>  Cukup ambil dan hubungkan register tidak berfungsi </h2><br>  Selain masalah ini, Daftar Badan Hukum Negara Kesatuan penuh dengan kesalahan pada tingkat simbol, alamat, dan hal-hal sepele lainnya.  Misalnya, ketika alih-alih “LLC” Anda bertemu tiga nol di direktori, ini bahkan tidak mengejutkan. <br><br>  Ada juga alamat dengan kesalahan, di mana tanpa itu.  Sebagai contoh, "Leningrad" bukannya "St. Petersburg" adalah kasus yang sangat signifikan.  Opsi yang lebih biasa: alamat organisasi Zheleznodorozhny di Wilayah Moskow diindikasikan sebagai kota, meskipun telah menjadi distrik Balashikha selama beberapa tahun. <br><br>  Faktanya, semuanya benar dalam direktori, karena USRLE menyimpan rincian dari dokumen konstituen organisasi.  Tetapi untuk bekerja dengan database, untuk mencarinya, data harus dibawa ke kenyataan.  Pengguna kami mencari organisasi yang berlokasi di St. Petersburg, dan tidak pernah terdaftar di Leningrad. <br><br>  Oleh karena itu, untuk membuka Daftar Badan Hukum Negara Kesatuan dan untuk memperoleh basis yang sesuai untuk operasi industri adalah tugas lain.  Biarkan saya mengingatkan Anda volume: jika Anda mengambil buku referensi lengkap pada awal 2015 dan semua pembaruan hingga hari ini, Anda mendapatkan 100 juta entri. <br><br>  Untuk mem-parsing USRLE, kami menulis sebuah algoritma: ia menerima semua entri pada input sejak 2015, dan pada output memberikan 10 juta yang relevan.  Mengelola suatu tempat dalam satu jam.  Bagian penting dari proses ini adalah produk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Klien Tunggal</a> kami.  Dia merapikan data: membersihkan alamat, menemukan duplikat, mengoreksi kesalahan ketik. <br><br>  <i>Jika Anda ingin mengurai buku referensi yang kompleks, menyusun data, dan membawanya ke bentuk manusia, datanglah kepada kami untuk bekerja.</i>  <i>Sekarang kami sedang mencari javista, gaji - 195.000-250.000 <nobr>₽</nobr> sebelum dikurangi, detail - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di hh.ru.</a></i>  <i>Dan Anda juga membutuhkan QA: dari 115.000 hingga 150.000 ₽, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perincian tentang jam yang sama</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414885/">https://habr.com/ru/post/id414885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id414875/index.html">Kubernet mengandung integrasi yang menggantikan Docker yang siap diproduksi</a></li>
<li><a href="../id414877/index.html">Lensa yang tidak biasa untuk kamera biasa atau cara berhenti memikirkan fokus</a></li>
<li><a href="../id414879/index.html">Mengapa 2 ekstruder di printer 3D?</a></li>
<li><a href="../id414881/index.html">Sedikit di belakang panggung VK</a></li>
<li><a href="../id414883/index.html">Kenangan terdengar dengan cara baru: BBC memperbarui arsip suara proyek RemArc</a></li>
<li><a href="../id414887/index.html">Membuat hook kucing di Unity. Bagian 1</a></li>
<li><a href="../id414889/index.html">Ketika Lembaga Digital Membutuhkan IaaS</a></li>
<li><a href="../id414891/index.html">Kebiasaan Pengembang</a></li>
<li><a href="../id414893/index.html">Viber, WhatsApp, Telegram - mana yang lebih baik?</a></li>
<li><a href="../id414895/index.html">Dan bagi kami semuanya "tegak" - DBMS Vertica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>