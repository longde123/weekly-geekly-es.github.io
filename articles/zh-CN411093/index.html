<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ ğŸˆ² ğŸ˜• é›†ä¸­å¼æ§åˆ¶é¢æ¿ï¼Œç”¨äºå…‰æºTsPKIO-2Dè½¬å­ ğŸ‘´ ğŸ¤¹ğŸ¿ ğŸ›</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æŠ±æ­‰ï¼Œå¾ˆé•¿æ—¶é—´ä»¥æ¥ï¼Œæˆ‘éƒ½æ²¡æœ‰å¯¹å‘½åä»¥åŠå®¶åº­è‡ªåŠ¨åŒ–å¤–å›´è®¾å¤‡çš„ä¹è¶£ã€‚ å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªä¸œè¥¿-ç¯å…‰çš„é¥æ§å™¨-ä¹‹æ‰€ä»¥å‡ºç°ï¼Œæ˜¯å› ä¸ºæˆ‘æƒ³è¦ä¸€ä¸ªå¸¦æœ‰æ¨æ‰­å¼ç‚¹å‡»ç•Œé¢çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯é€šå¸¸åˆ†æ•£çš„æŒ‰é’®ã€‚ æ•ˆæœè¿˜æ²¡è¾¾åˆ°ï¼šåœ¨å®¶é‡Œï¼Œæˆ‘æ²¡æœ‰æ³¨æ„åˆ°é¥æ§å™¨å¤„äºè¿‘è·ç¦»èŒƒå›´ï¼Œä½†æ˜¯è‡³å°‘æˆ‘å…³é—­äº†æ ¼å¼å¡”ã€‚ 

 ç®€ä»‹TORï¼š 

 1ï¼‰ç®¡ç†å¨æˆ¿ä¸­...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é›†ä¸­å¼æ§åˆ¶é¢æ¿ï¼Œç”¨äºå…‰æºTsPKIO-2Dè½¬å­</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/411093/"><img src="https://habrastorage.org/getpro/geektimes/post_images/72f/6a9/ceb/72f6a9ceb826b19cdb266c3d334da65b.jpg" alt="å›¾ç‰‡"><br><br> æŠ±æ­‰ï¼Œå¾ˆé•¿æ—¶é—´ä»¥æ¥ï¼Œæˆ‘éƒ½æ²¡æœ‰å¯¹å‘½åä»¥åŠå®¶åº­è‡ªåŠ¨åŒ–å¤–å›´è®¾å¤‡çš„ä¹è¶£ã€‚ å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªä¸œè¥¿-ç¯å…‰çš„é¥æ§å™¨-ä¹‹æ‰€ä»¥å‡ºç°ï¼Œæ˜¯å› ä¸ºæˆ‘æƒ³è¦ä¸€ä¸ªå¸¦æœ‰æ¨æ‰­å¼ç‚¹å‡»ç•Œé¢çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯é€šå¸¸åˆ†æ•£çš„æŒ‰é’®ã€‚ æ•ˆæœè¿˜æ²¡è¾¾åˆ°ï¼šåœ¨å®¶é‡Œï¼Œæˆ‘æ²¡æœ‰æ³¨æ„åˆ°é¥æ§å™¨å¤„äºè¿‘è·ç¦»èŒƒå›´ï¼Œä½†æ˜¯è‡³å°‘æˆ‘å…³é—­äº†æ ¼å¼å¡”ã€‚ <br><a name="habracut"></a><br> ç®€ä»‹TORï¼š <br><br>  1ï¼‰ç®¡ç†å¨æˆ¿ä¸­çš„ä¸‰ä¸ªç…§æ˜ç»„ <br>  2ï¼‰ç®¡ç†æˆ¿é—´ä¸­çš„ä¸‰ä¸ªç…§æ˜ç»„ <br>  3ï¼‰åŒæ—¶ç®¡ç†æ‰€æœ‰å…‰æº <br>  4ï¼‰åˆç†çš„ç”µæ± å¯¿å‘½ï¼ˆä»ä¸€å‘¨å¼€å§‹ï¼‰ <br>  5ï¼‰å…¼å®¹Livoloç¼–ç ï¼ŒSC2260ï¼ŒEV1527 <br><br> å› æ­¤ï¼Œå¦‚æœæ‚¨ä¸å–œæ¬¢Arduinoï¼ŒLivoloå¼€å…³å’Œä¸­æ–‡æ”¶éŸ³æœºæ’åº§ï¼Œåˆ™æ— éœ€è¿›ä¸€æ­¥é˜…è¯»ã€‚ å› ä¸ºç¬¬ä¸€ä¸ªæ˜¯è¿œç¨‹çš„åŸºç¡€ï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæ˜¯å¤–å›´è®¾å¤‡ã€‚ <br><br><h2> æ¦‚å¿µå›¾ </h2><br> åœ¨æˆ‘çœ‹æ¥ï¼Œæ§åˆ¶é€»è¾‘å¦‚ä¸‹ï¼š <br><br><ol><li> æŒ‰ä¸‹â€œæ—‹é’®â€å¯åœ¨ç¯å½¢ï¼ˆå¨æˆ¿-æˆ¿é—´-ä¸€åˆ‡ï¼‰ä¹‹é—´åˆ‡æ¢ç…§æ˜ç»„çš„åŒºåŸŸã€‚ </li><li> æ ¹æ®æ—‹è½¬æ–¹å‘æ—‹è½¬æ—‹é’®ï¼Œå¯ä»¥æ‰“å¼€æˆ–å…³é—­æ‰€é€‰ç»„çš„ç…§æ˜ã€‚ </li><li> é€šè¿‡ä¸æ˜¾çœ¼çš„LEDæŒ‡ç¤ºæ˜¾ç¤ºæ“ä½œæ¨¡å¼ï¼ˆé€‰å®šçš„ç»„ï¼‰ã€‚ </li></ol><br> ç”±äºæˆ‘æ˜¯æ ¹æ®æœ€ä¸å±‘ä¸€é¡¾çš„é€‰é¡¹ä½¿ç”¨æ— çº¿ç”µæ§åˆ¶çš„ï¼Œå› æ­¤æ²¡æœ‰å—åˆ°å¹²æ‰°å’Œåé¦ˆçš„ä¿æŠ¤ï¼Œå› æ­¤åŒæ—¶æä¾›äº†ä¸€äº›æŠ€å·§ï¼Œä»¥é˜²é”™è¿‡æ“ä½œã€‚ <br><br> å¦‚æœæ—‹è½¬æ—‹é’®ä¸èƒ½è¾¾åˆ°é¢„æœŸçš„æ•ˆæœï¼Œåˆ™åŒæ—¶æŒ‰ä¸‹å’Œåå‘æ—‹è½¬ç»„åˆé”®å¯ä»¥è·³è¿‡è¯¥å‘½ä»¤ã€‚ ç„¶åå¯ä»¥åƒå¾€å¸¸ä¸€æ ·é‡å¤è¯¥å‘½ä»¤ã€‚ <br><br> ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘é¡ºæ—¶é’ˆæ—‹è½¬æ—‹é’®è€Œä¸»ç¯æ²¡æœ‰ç‚¹äº®ï¼Œåˆ™å¯ä»¥æŒ‰ä¸‹æ—‹é’®ï¼Œé€†æ—¶é’ˆæ—‹è½¬ï¼Œç„¶åæ¾å¼€å¹¶å†æ¬¡é¡ºæ—¶é’ˆæ—‹è½¬ä»¥é‡å¤æ‰“å¼€ã€‚ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/V0ZpCxEb3-U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ä¸ºä»€ä¹ˆè¿™ä¹ˆè¾›è‹¦ï¼Ÿ ç„¶åï¼Œé™¤äº†ç¬¨æ‹™çš„åè®®å¤–ï¼Œæˆ‘è¿˜æ‹¥æœ‰ç¬¨æ‹™çš„å¤–å›´è®¾å¤‡ã€‚ ä¾‹å¦‚ï¼Œå…·æœ‰ç›¸åŒçš„æ‰“å¼€å’Œå…³é—­å‘½ä»¤çš„æ— çº¿ç”µæ§åˆ¶çš„ç¯å…‰å¼€å…³Livoloå’Œæ— çº¿ç”µç»§ç”µå™¨ï¼Œä»¥åŠæ™®é€šçš„æ— çº¿ç”µæ’åº§ï¼Œå…¶ä¸­æ‰“å¼€å’Œå…³é—­çš„å‘½ä»¤æ˜¯åˆ†å¼€çš„ã€‚ <br><br> å›¢é˜Ÿè·³è¿‡æŠ€å·§å¯è®©æ‚¨åˆ›é€ æ€§åœ°å‡»è´¥éåŒ…å®¹æ€§ï¼ˆnon-inclusionï¼‰ï¼Œè€Œä¸ä¼šç ´åä¸€èˆ¬çš„ç…§æ˜æ–¹æ¡ˆã€‚ æ­¤å¤–ï¼Œè·³è¿‡å‘½ä»¤å¯è®©æ‚¨è·³è¿‡ä¸éœ€è¦æ‰“å¼€æˆ–å…³é—­çš„å…‰æºã€‚ <br><br> å¥½å§ï¼Œå½“ç„¶ï¼Œä¸ºäº†äº†è§£é¥æ§å™¨çš„çŠ¶å†µï¼Œå®ƒæœ‰ä¸€ä¸ªå•ç‹¬çš„æŒ‡ç¤ºå™¨ï¼Œåœ¨å‘é€å‘½ä»¤æ—¶ä¼šäº®èµ·ã€‚ <br><br> å¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…æœªè§¦æ‘¸æ§åˆ¶å°ï¼ˆåœ¨ä»£ç ä¸­é…ç½®ï¼‰ï¼Œåˆ™æ§åˆ¶å™¨è¿›å…¥ç¡çœ çŠ¶æ€ã€‚ ä½†æ˜¯ï¼Œä»–æ²¡æœ‰ä¿å­˜æœ€åçš„çŠ¶æ€ï¼Œå¹¶ä¸”å½“ä»–é€šè¿‡æŒ‰ä¸‹ç¬”å”¤é†’æ—¶ï¼Œä»–ä»å¤´å¼€å§‹äº†ç”Ÿæ´»ã€‚ <br><br> è¿™ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æˆ‘å†è¯´ä¸€éï¼Œæˆ‘æœ‰æ²¡æœ‰åé¦ˆçš„å¼€å…³ï¼Œå¹¶ä¸”æ§åˆ¶å°å®é™…ä¸Šæ— æ³•è·å¾—æœ‰å…³æ¯ä¸ªå—æ§å¤–å›´è®¾å¤‡å½“å‰çŠ¶æ€çš„ä¿¡æ¯ã€‚ <br><br> å› æ­¤ï¼Œåœ¨å”¤é†’åç«‹å³è½¬åŠ¨æ—‹é’®å³å¯æ‰“å¼€æˆ–å…³é—­ä»å¤´å¼€å§‹çš„ç¯ã€‚ <br><br><h2> ç¬¬ä¸€ç§æ–¹æ³• </h2><br> æ‚¨å¯èƒ½ä¼šçŒœåˆ°ï¼Œâ€œå¸¦æœ‰æ‰­æ›²çš„ç›’å­â€ç±»å‹çš„è§†è§‰æ¦‚å¿µéœ€è¦ä¸¤ä»¶äº‹ï¼šç›’å­å’Œæ‰­æ›²ã€‚ åœ¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œç›’å­çš„ä½œç”¨æ˜¯ç”±è–„è–„çš„ç§»åŠ¨ç”µæºå‘æŒ¥çš„ï¼Œè–„è–„çš„ç§»åŠ¨ç”µæºå¯ç«‹å³è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šæˆ‘æ—¢æœ‰ä¿æŠ¤å£³åˆæœ‰ç”µæ± å……ç”µæ–¹æ¡ˆï¼Œè¿˜æœ‰è¿æ¥å™¨ã€‚ å½“ç„¶ï¼Œç”µæ± æœ¬èº«å¿…é¡»æ›´æ¢ä¸ºæ›´ç´§å‡‘çš„ç”µæ± ï¼Œå¦åˆ™å¡«å……ç‰©å°†ä¸å†é€‚åˆã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/640/299/4df/6402994df7e71b82835d12f42541f1f0.jpg" alt="å›¾ç‰‡"><br><br> ç»“æœå˜å¾—æ›´åŠ å¤æ‚ã€‚ å½“æˆ‘è¿›è¡Œæœç´¢æ—¶ï¼Œæˆ‘å‘ç°ç”µä½è®¡æ—‹é’®è¶Šæ¼‚äº®ï¼Œå…¶æ—‹é’®è¶Šå¤§ï¼Œå…¶å…‹æˆæœ¬ä¸ä¸€å…‹é»„é‡‘æˆæœ¬è¶Šæ¥è¿‘ã€‚ å› æ­¤ï¼Œæˆ‘è´­ä¹°äº†ä¸€æ”¯ç¬”ï¼Œè¿™ç§ç¬”æå°‘é€‚åˆæˆ‘çš„å®¡ç¾ç‰¹æ€§ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/232/a3e/b60/232a3eb6074d6d8724fdc76d353274cc.jpg" alt="å›¾ç‰‡"><br><br> æ§åˆ¶éƒ¨åˆ†æ˜¯ä½¿ç”¨ATmega328Pè¿›è¡Œå®éªŒçš„ç»“æœï¼Œä»¥åŠç°æœ‰å®¶åº­è‡ªåŠ¨åŒ–ï¼ˆåœ¨ç›¸åŒçš„Arduinoå’ŒåŸå§‹æ— çº¿ç”µåè®®ä¸Šï¼‰è®¾å®šçš„æ•…äº‹æƒ…èŠ‚çš„é€»è¾‘å»¶ç»­ã€‚ <br><br> æˆ‘ä¸æ˜¯å¾ˆæ˜‚è´µåœ°è´­ä¹°äº†ä¸Šè¿°æ§åˆ¶å™¨çš„åˆ†æ•£ä»¶ï¼Œå¹¶æœ‰æ¡ä»¶åœ°åˆ¶ä½œäº†åŸå‹ï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªä»å°æœºç®±åˆ°å¤§å°é˜¶çš„é€‚é…å™¨ï¼‰ç”µè·¯æ¿ï¼Œç›®çš„æ˜¯å°è¯•ä»¥æœ€å°‘ï¼ˆä½†åˆç†ï¼‰çš„å…ƒä»¶æ•°é‡ä»ä¸­åˆ¶é€ å‡ºä½æˆæœ¬çš„Arduinoç‰ˆæœ¬ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/625/ebb/095/625ebb0959641911621741e00fb1b699.jpg" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/be0/e1c/ac4/be0e1cac460246c56f97f0c45e1c8bc7.jpg" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/53d/bc5/9f1/53dbc59f1bb9ec5583f84de546b2df76.jpg" alt="å›¾ç‰‡"><br><br> å®éªŒè¯æ˜æ˜¯æˆåŠŸçš„ï¼Œå¹¶ä¸”åœ¨åä¸‹ç»å…¸çš„Blinkä¹‹åï¼Œä¸ºArduinoç¯å¢ƒé…ç½®çš„æ§åˆ¶å™¨éå¸¸æˆåŠŸåœ°ä½¿LEDé—ªçƒã€‚ å¥½å§ï¼Œç„¶åï¼ŒæŒ‰ç…§â€œå®ŒæˆçŒ«å¤´é¹°â€çš„åŸåˆ™ï¼Œæˆ‘åœ¨æœ€ç»ˆçš„æ¿ä¸Šå¢åŠ äº†ç¼–ç å™¨ï¼ˆå¸¦æŒ‰é’®ï¼‰ï¼Œä¸‰ä¸ªLEDå’Œä¸€ä¸ªå¸¦æœ‰å¹…åº¦è°ƒåˆ¶çš„æ­£å¸¸å‘é€å™¨ï¼Œå…¶è½½æ³¢é¢‘ç‡ä¸º433.92 MHzã€‚ <br><br> ä¸ºäº†å°†æ‰€æœ‰å…ƒç´ éƒ½æ”¾åœ¨ä¸€ä¸ªå°ç›’å­ä¸­ï¼Œæˆ‘ä¸å¾—ä¸æ‰¿å—ä¸€ç‚¹ç—›è‹¦ï¼Œä½†æ˜¯é¥æ§å™¨ä»ç„¶æœ‰æ•ˆã€‚ å°½ç®¡çœ‹èµ·æ¥é—®é¢˜å·²ç»è§£å†³äº†ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³è¦æ›´å¤š-åŸå§‹æ¡ˆä¾‹ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b0b/716/2cc/b0b7162cc2941009ef081f0f76e4a2a8.jpg" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/36b/08b/c76/36b08bc76093a6b66fe3f5e1b3597b1a.jpg" alt="å›¾ç‰‡"><br><br><h2> ç¬¬äºŒç§æ–¹æ³• </h2><br> å®é™…ä¸Šï¼Œå‡ºç°äº†ä¸€ç»„åŒå¿—çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆæŠ±æ€¨ï¼‰è¢«ç²‰ç¢äº†ï¼Œæ‰€ä»¥æˆ‘æ— é™æœŸåœ°æ¨è¿Ÿäº†å®ƒã€‚ ä½†æ˜¯ä»–æ²¡æœ‰æŒ‡å‡ºï¼šå¾ˆå¯æƒœã€‚ <br><br> ä½†æ˜¯å½“3Dæ‰“å°æœºå‡ºç°æ—¶ï¼Œä»–ä¿è¯è‡ªå·±æœ‰ä¸€å¤©ä¼šåˆ¶ä½œç›¸åŒçš„åŸå§‹ç›’å­ï¼Œå¹¶ç”¨é¥æ§å™¨è§£å†³é—®é¢˜ã€‚ <br><br> æˆ‘ä¸çŸ¥é“ç»“æœæ˜¯å¥½æ˜¯å-æˆ‘çœŸçš„ä¸çŸ¥é“å¦‚ä½•è¯„ä¼°æˆ‘çš„äº‹æƒ…ã€‚ ä½†æ˜¯ï¼Œåœ¨3DTodayä¸Šï¼Œè¯¥å›¢é˜Ÿæ¯”åœ¨MySKUä¸Šæ›´çƒ­æƒ…ï¼ˆæˆ‘æ²¡æœ‰æŠ±æ€¨-è¿™ä¸æ˜¯æˆ‘è‡ªå·±çš„ç¤¼ç‰©ï¼‰ï¼Œä»–ä»¬å¯¹è¯¥æ¡ˆä¾‹çš„è¯„ä»·æ¯”æˆ‘é«˜ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5a1/89d/905/5a189d905d402c93afba5e4f4d88c1da.jpg" alt="å›¾ç‰‡"><br><br> ä½†æ˜¯ï¼Œç”±äºæ‹¥æœ‰å®Œå…¨çš„è¡ŒåŠ¨è‡ªç”±ï¼Œæˆ‘æ”¾å¼ƒäº†è„†å¼±çš„ä¸­å›½ç”µæ± ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å°†è€å¼çš„18650ç”¨ä½œç”µæºï¼Œæ­£å¦‚æ‚¨å¯ä»¥è½»æ˜“çœ‹åˆ°çš„é‚£æ ·ï¼Œæ­£æ˜¯å®ƒçš„å°ºå¯¸åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†æ•´ä¸ªå¤–å£³çš„å°ºå¯¸ã€‚ <br><br> æˆ‘å¼€å§‹ä½¿æœºå£³æœ¬èº«æ¨¡å—åŒ–ï¼Œè¯¥æœºå£³ç”±è®¸å¤šéƒ¨åˆ†ç»„æˆï¼Œè¿™ä½¿æˆ‘åªèƒ½é‡å°å•ä¸ªï¼ˆé”™è¯¯æˆ–ä¸æ˜¯éå¸¸ç†æƒ³çš„ï¼‰å…ƒç´ ï¼Œè€Œä¸é‡å°æ•´ä¸ªäº§å“ã€‚ <br><br> è¿˜æœ‰ä¸€ç‚¹æ˜¯ï¼Œæˆ‘çœŸçš„ä¸å–œæ¬¢åšè¿æ¥å™¨çš„åˆ‡å£ï¼Œè¿™æ˜¯æˆ‘åšä¸åˆ°çš„ã€‚ å› æ­¤ï¼Œåœ¨ä¾›åº”é“¾ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼ŒåˆºçŒ¬ä¼Šå¤«ç³ï¼ˆEvelynï¼‰</a>çŸ¥é“äº†å¦ä¸€ä¸ªçªé—¨ï¼šæ— çº¿å……ç”µã€‚ <br><br><img src="https://habrastorage.org/webt/ie/zq/6m/iezq6m_73cckmk6y-bidsohs9ye.jpeg"><br><br> åœ¨æˆ‘çš„zashashnikä¸­ï¼Œåˆšåˆšæ”¾ç½®äº†å¦ä¸€ä¸ªæ¥æ”¶å™¨ï¼Œæˆ‘ç«‹å³å°†å…¶ä»˜è¯¸è¡ŒåŠ¨ã€‚ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/fDLqxxDvQhM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> æœ€åï¼Œæœ€åä¸€æ‹›å¾ˆæ˜æ˜¾ï¼Œä½†ä»ç„¶å¦‚æ­¤ï¼šä¸ºäº†ä½¿é¥æ§å™¨ä¸ä¼šåœ¨æ¡Œå­ä¸Šçˆ¬è¡Œï¼Œæˆ‘å°†ä¸€å—é˜²æ»‘æ±½è½¦é˜²æ»‘å«ç²˜åœ¨äº†åº•éƒ¨ã€‚ æœ€åï¼Œå°½ç®¡å°†å…¶é‡æ–°å¸ƒç½®åˆ°å¦ä¸€ä¸ªåœ°æ–¹ä¹Ÿä¸æ˜¯é—®é¢˜ï¼Œä½†å®ƒç»å¯¹æ˜¯ä¸€ä¸ªæ•´ä½“ã€‚ <br><br><h2> é‡å¤ä»€ä¹ˆ </h2><br><h3> é“ç‰‡ </h3><br>  1ï¼‰ATmega328Pæ§åˆ¶å™¨-1ä¸ª  ï¼ˆåœ¨æˆ‘çš„TQFPè½¯ä»¶åŒ…ä¸­ï¼Œä½†ä»»ä½•äººéƒ½å¯ä»¥ï¼‰ <br>  2ï¼‰10 kOhmç”µé˜»å™¨-5ä¸ª  ï¼ˆ4ä¸ªæŠ‘åˆ¶ç¼–ç å™¨åå¼¹ï¼Œ1ä¸ªæŠ‘åˆ¶æ§åˆ¶å™¨ï¼‰ <br>  3ï¼‰100æ¬§å§†ç”µé˜»-3ä¸ª <br>  4ï¼‰é™¶ç“·ç”µå®¹å™¨0.1å¾®æ³•æ‹‰-4ä¸ª  ï¼ˆå¯¹æ§åˆ¶å™¨å’Œç¼–ç å™¨å¼¹è·³çš„æŠ‘åˆ¶ï¼‰ <br>  5ï¼‰æ¨å¼ç¼–ç å™¨ï¼ˆvalcoderï¼‰-1ä¸ª  ï¼ˆæˆ‘æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PEC12-4220F-S0024</a> ï¼‰ <br>  6ï¼‰LED-3ä¸ª  ï¼ˆç›´å¾„3æ¯«ç±³ï¼‰ <br>  7ï¼‰é”‚ç”µæ± å……ç”µæ¿-1ä¸ª  ï¼ˆç†è®ºä¸Šï¼Œä»å‡ºç°çš„ç§»åŠ¨ç”µæºä¸­ï¼Œä»»ä½•åœ¨è´Ÿè½½ä¸‹è‡ªåŠ¨å¼€å¯çš„äººéƒ½å¯ä»¥ä½¿ç”¨ï¼‰ <br>  8ï¼‰Qiæ— çº¿å……ç”µæ¥æ”¶å™¨-1ä¸ª <br>  9ï¼‰å…·æœ‰433 MHzå¹…åº¦è°ƒåˆ¶çš„å‘å°„æœº-1 pcã€‚  ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åƒè¿™æ ·</a> ï¼‰ <br>  10ï¼‰ä¸€äº›ç»ç’ƒçº¤ç»´ç¼–ç å™¨æ¿ <br>  11ï¼‰3Dæ‰“å°æœº <br>  12ï¼‰åˆé€‚çš„å¡‘æ–™ï¼ˆæˆ‘å°æœ‰PLAï¼‰ <br>  13ï¼‰M4x30èºé’‰-4ä¸ª <br><br> é€šå¸¸ï¼Œå¯ä»¥å‡å°‘ç»„ä»¶çš„æ•°é‡ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªéå¸¸å°çš„ç‰ˆæœ¬ä¸­ï¼Œè¯¥æ§åˆ¶å™¨æ ¹æœ¬ä¸éœ€è¦æ†ç»‘ï¼Œå°½ç®¡æˆ‘å†³å®šå¬ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Nick Gammonçš„å»ºè®®ï¼Œ</a>å¹¶ä¸”æ²¡æœ‰å¤šä½™çš„ç”µå®¹å™¨å’Œç”µé˜»å™¨ã€‚ <br><br> ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæ‚¨ä¸å¿…ä¸ºç¡¬ä»¶æŠ‘åˆ¶æ¥è§¦åå¼¹è€Œçƒ¦æ¼ï¼Œè€Œå¯ä»¥å°è¯•ä½¿ç”¨è½¯ä»¶ã€‚ ç„¶åï¼Œæ‚¨å¯ä»¥äº¤å‰å¦å¤–å››ä¸ªç”µé˜»å’Œä¸€å¯¹ç”µå®¹å™¨ã€‚ <br><br> å¦å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç°æˆçš„Arduinoå¼€å‘æ¿ï¼Œä¾‹å¦‚Pro Miniï¼Œä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä¸èƒ½ä¿è¯èƒ½è€—ä½ï¼Œæ‚¨å¿…é¡»è‡ªå·±åŠ¨æ‰‹ã€‚ åŒæ—¶ï¼Œè¿™ç§æƒ…å†µå¿…é¡»çº æ­£ã€‚ <br><br> æ–¹æ¡ˆï¼š <br><br><img src="https://habrastorage.org/webt/wo/xv/hh/woxvhhfaucpc3emhiyipfk56m1s.png"><br><br> ä½œä¸ºå‚è€ƒï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Hobby Electronics</a>çš„TQFP-32å°è£…ä¸­çš„ATmega328på¼•è„šæ’åˆ—ï¼š <br><br><img src="https://habrastorage.org/webt/1y/ea/sp/1yeasp0veriyrgvhrafu_inlwlm.jpeg"><br><br> å¯¹äºæˆ‘çš„ç¼–ç å™¨ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªå°æ¿ï¼š <br><br><img src="https://habrastorage.org/webt/i2/jg/d7/i2jgd7p7jlv1kyhbyjhoayd3d4k.jpeg"><br><br><img src="https://habrastorage.org/webt/ke/cr/yt/kecrytksno5yhwsjjdpcbwgc9-c.jpeg"><br><br><img src="https://habrastorage.org/webt/6y/vb/8j/6yvb8jl1h6zvpm-z-atgntumnsw.jpeg"><br><br> å¦‚æœæ•ˆæœè‰¯å¥½ï¼Œåˆ™å¿…é¡»åœ¨å®‰è£…ç¼–ç å™¨æ—¶è¿›è¡Œé’»å­”ï¼Œæˆ–è€…å°†å…¶â€œå‘ä¸‹â€å›ºå®šåœ¨æ¿ä¸Šï¼ˆæ³¨æ„éš”ç¦»ï¼Œä»¥ç¡®ä¿æ²¡æœ‰çŸ­è·¯ï¼‰ï¼Œä»¥ä¾¿ç¼–ç å™¨aï¼‰æˆ–å¤šæˆ–å°‘å‡åŒ€åœ°å®‰è£…å¹¶ä¸”bï¼‰ä¸ä¼šæ‘†åŠ¨ã€‚ ä»å†å²ä¸Šçœ‹ï¼Œæˆ‘æœ‰ç¬¬äºŒç§é€‰æ‹©ã€‚ <br><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡è¦çš„æ˜¯å¸¦æœ‰é›¶ä»¶çš„æ¿çš„é«˜åº¦ï¼ˆä¸åŒ…æ‹¬ç¼–ç å™¨ï¼‰ä¸å¾—è¶…è¿‡ï¼ˆæˆ–ä¸è¶…è¿‡ï¼‰5æ¯«ç±³ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¦‚æœArduinoå¼€å‘æ¿è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œé‚£ä¹ˆä¸ºäº†ä½¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæ‚¨éœ€è¦é¦–å…ˆå°†Arduinoå¼•å¯¼åŠ è½½ç¨‹åºå†™å…¥ATmega328Pæ§åˆ¶å™¨ã€‚</b> <div class="spoiler_text"> ä¸ºæ­¤ï¼Œé¦–å…ˆï¼Œå°†æ§åˆ¶å™¨æè¿°æ·»åŠ åˆ°Arduinoç¯å¢ƒã€‚ ä¸ºæ­¤ï¼Œè¯·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®¿é—®Arduinoå®˜æ–¹ç½‘ç«™</a>å¹¶ä¸‹è½½é€‚åˆæ‚¨çš„ç¯å¢ƒç‰ˆæœ¬çš„æè¿°æ¡£æ¡ˆï¼ˆ <a href="">å¯¹äº1.6</a> ï¼Œ <a href="">å¯¹äº1.5</a> ï¼Œ <a href="">å¯¹äº1.0</a> ï¼‰ã€‚ <br><br> å­˜æ¡£çš„å†…å®¹åº”æå–åˆ°Arduinoç¯å¢ƒæ–‡ä»¶å¤¹çš„hardwareæ–‡ä»¶å¤¹ä¸­ã€‚ å°†æ¥ï¼Œæˆ‘å°†æè¿°ä»åœ¨ä½¿ç”¨çš„1.0.3ç¯å¢ƒç¤ºä¾‹æ‰€å‘ç”Ÿçš„æƒ…å†µã€‚ <br><br> å¤åˆ¶æè¿°åï¼Œæ‚¨åº”è¯¥å¯åŠ¨Arduinoå¹¶å°†ç¼–ç¨‹å™¨è‰å›¾åŠ è½½åˆ°Arduinoä¸­ï¼Œå®ƒå°†ç”¨ä½œè¯¥ç¼–ç¨‹å™¨æœ¬èº«ã€‚ è‰å›¾ä½äºæ–‡ä»¶-ç¤ºä¾‹-ArduinoISPèœå•ä¸­ã€‚ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/037/517/98f/03751798f648adb8fea47a284a912667.jpg" alt="å›¾ç‰‡"><br><br> å½“ç„¶ï¼Œæ‚¨åº”è¯¥é€‰æ‹©æ¿å­å’Œç«¯å£ã€‚ æˆ‘é€‰æ‹©å…†ä¸°ï¼Œå› ä¸ºæˆ‘æœ‰ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7e7/483/4bd/7e74834bdd786979f926f4b65e2e344f.jpg" alt="å›¾ç‰‡"><br><br> åŠ è½½ç¼–ç¨‹å™¨è‰å›¾åï¼Œéœ€è¦åˆ‡æ¢åˆ°ç›®æ ‡æ¿ã€‚ å³ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­-é¢‘ç‡ä¸º8 MHzçš„ATmega328å’Œä¸€ä¸ªå†…éƒ¨ä¸»æŒ¯è¡å™¨ã€‚ å¦‚æœæ­£ç¡®å¤åˆ¶äº†ä¸Šè¿°æè¿°ï¼Œå®ƒå°†åœ¨ä¸»æ¿åˆ—è¡¨ä¸­ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b89/e98/7b2/b89e987b2243a79cc1d36e95d5a7ebab.jpg" alt="å›¾ç‰‡"><br><br> ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†ç¼–ç¨‹å™¨æ¿çš„MISOï¼ŒMOSIå’ŒSCKçº¿ä»¥åŠå°†æ¥çš„Arduinoä¸æ¿è¿æ¥ï¼Œè¿˜éœ€è¦è¿æ¥RESETï¼ŒGNDå’ŒVCCã€‚ æœ€åï¼Œç”µæºæ˜¯æœ€å¥½çš„ã€‚ <br><br> æ ¹æ®ä¸Šé¢çš„ä¿¡æ¯å›¾å’ŒArduino Megaçš„æè¿°ï¼Œå‡ºç°äº†ä»¥ä¸‹å›¾ç‰‡ï¼š <br><br>  SPI-Arduino Mega-ATmega328p <br><br>  MISO-50-16 <br>  MOSI-51-15 <br>  SCK-52-17 <br>  SSï¼ˆé‡ç½®ï¼‰-53-29 <br><br> æ ¹æ®æ‚¨çš„å£å‘³è¿›è¡Œç‰©ç†è¿æ¥ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ç§ä¸“é—¨çš„é‡è›®æ–¹æ³•-å°†æ™®é€šé¢åŒ…æ¿ç”µçº¿ç›´æ¥æ’å…¥æ¿å­”ä¸­ï¼Œè€Œæ— éœ€ç„Šæ¥å’Œç»ç¼˜ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c14/df6/d5f/c14df6d5f4cdda937de81eb2fa555ee0.jpg" alt="å›¾ç‰‡"><br><br> å¦‚æœä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œè¯·è®°ä¸‹å¼•å¯¼åŠ è½½ç¨‹åºã€‚ é¦–å…ˆï¼Œè¯·ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„ç¨‹åºå‘˜ï¼ˆæœåŠ¡-ç¨‹åºå‘˜-Arduinoä½œä¸ºISPï¼‰ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e0c/dc4/a0c/e0cdc4a0c8914fbed3f5328c676f0210.jpg" alt="å›¾ç‰‡"><br><br> ç„¶åæˆ‘ä»¬æ‰§è¡ŒService-Record bootloaderï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/568/21e/12f/56821e12f02cd705995d40429b15eec6.jpg" alt="å›¾ç‰‡"><br></div></div><br> ä¹‹åï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæç®€çš„Arduinoæ¿ï¼Œå¯ä»¥å°†USB-Serialé€‚é…å™¨æˆ–å¸¦æœ‰è¯¥é€‚é…å™¨çš„å®Œæ•´Arduinoæ¿åŠ è½½åˆ°å…¶ä¸­ï¼Œä»¥åŠ è½½è‰å›¾ã€‚ åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦äº¤å‰è¿æ¥RXå’ŒTXï¼Œå¹¶ä¸”ä¸è¦å¿˜è®°è¿æ¥å…¬å…±åœ°çº¿ã€‚ åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œè¿˜å¿…é¡»å°†ç”¨ä½œé€‚é…å™¨çš„RESET Arduinoæ¥åœ°ã€‚ <br><br> å¦‚æœåƒæˆ‘ä¸€æ ·ï¼Œå¦‚æœæ‚¨æ²¡æœ‰åœ¨ä¸‹è½½è‰å›¾ä¹‹å‰è‡ªåŠ¨é‡ç½®æ§åˆ¶å™¨çš„ç”µè·¯ï¼Œåˆ™æœ‰ä¸¤ç§é€‰æ‹©ï¼šè¦ä¹ˆæ‹‰å…¶é‡ç½®ï¼Œè¦ä¹ˆåœ¨Arduinoç¯å¢ƒè¡¨æ˜ä¸‹è½½å·²å¼€å§‹æ—¶ç®€å•åœ°æ‰“å¼€å…¶ç”µæºã€‚ <br><br><h3> æˆ¿å±‹ </h3><br> æ­£å¦‚æˆ‘æ‰€è¯´ï¼Œè¿™ç§æƒ…å†µæ˜¯æ¨¡å—åŒ–çš„ã€‚ è¿™æ„å‘³ç€ï¼Œåœ¨çœ¼ç›çœ‹ä¸åˆ°çš„å†…éƒ¨ï¼Œå¯ä»¥æ”¾å…¥é™ˆæ—§ä¸”ä¸å†åˆé€‚çš„å¡‘æ–™ã€‚ æ‚¨å¯ä»¥åœ¨ä¸Šé¢æ”¾ç½®ç”µå­äº§å“ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/030/0a3/251/0300a325144382295c6e3b8d54971e23.jpg" alt="å›¾ç‰‡"><br><br> æˆ‘æè¯·æ³¨æ„ä»¥ä¸‹äº‹å®ï¼šè¯¥æ¡ˆä¾‹æ˜¯ç‰¹å®šçš„ï¼Œæ—¨åœ¨é€‚åˆæˆ‘çš„å¡«å……ç‰ˆæœ¬ã€‚ <br><br> æˆ‘å»ºè®®ä½¿è½¬å­é€æ˜ï¼Œä»¥ä½¿å…¶æ•£å°„æŒ‡ç¤ºå™¨çš„å…‰çº¿ã€‚ ä¸ºäº†å¢åŠ é‡é‡ï¼Œå¯ä»¥åœ¨è½¬å­å†…éƒ¨æ’å…¥ä¸€ä¸ªM16èºæ¯ï¼š <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/9a0/8ef/68e/9a08ef68e2a079da4af3ed1eb148e961.jpg" alt="å›¾ç‰‡"><br><br> ä»ç„¶éœ€è¦ä¸€ä»¶è¿åŠ¨è¡«å’Œä¸€ä»¶å¤–è¡£ã€‚ ç›–å­å¯ä»¥ç®€å•åœ°å‘å†…æ’å…¥ï¼Œå¹¶ä¿æŒæ‘©æ“¦ã€‚ è€Œä¸”ï¼Œå½“ç„¶ï¼Œç¦»ä¸å¼€å¤–å£³çš„ä¸Šéƒ¨å’Œä¸‹éƒ¨ã€‚ <br><br> æˆ‘æ‰“å°äº†å¡«å……ä¸º10ï¼…çš„è½¬å­ï¼Œå…¶ä½™å…ƒç´ å¡«å……ä¸º5ï¼…ã€‚ å¡‘æ–™-PLAã€‚ åœ¨æˆ‘çš„æ‰“å°æœºä¸Šï¼Œå–·å˜´çš„è®¾ç½®æ¸©åº¦åœ¨å‰ä¸‰å±‚ä¸­ä¸º200â„ƒï¼Œåœ¨ä¸‹ä¸€å±‚ä¸­ä¸º185â„ƒã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä¸èƒ½è¯´å–·å˜´çš„çœŸå®æ¸©åº¦æ˜¯å¤šå°‘ã€‚ æ¡Œå­å¾ˆå†·ã€‚ <br><br> ç»„è£…å¾ˆç®€å•ã€‚ <br><br><img src="https://habrastorage.org/webt/ka/cq/2-/kacq2-crn1cictkqxhpb0sok15u.jpeg"><br><br> æ¿æ”¾ç½®åœ¨è€ç”¨ç®±çš„å‡¹æ§½ä¸­ï¼ŒLEDæ”¾ç½®åœ¨è€ç”¨ç®±ä¸‹éƒ¨çš„å‡¹æ§½ä¸­ã€‚ å‘å°„å™¨çš„å¤©çº¿æ”¾å€’ï¼Œæ— çº¿å……ç”µæ¥æ”¶å™¨ä»¥ç›¸åŒçš„æ–¹å¼æ”¾å€’-ä½¿å…¶æ›´æ¥è¿‘ç›¸åŒçš„ç”µè·ã€‚ <br><br><img src="https://habrastorage.org/webt/d9/zu/ex/d9zuextrjywuvjbj4ve68-c2rgg.png"><br><br> å¡«å……ç‰©ç”±ä¸­é—´æ¿å›ºå®šï¼Œä¸­é—´æ¿çš„æ§½ä¸­ç©¿è¿‡ç¼–ç å™¨çº¿æŸã€‚ <br><br> ç¼–ç å™¨å›ºå®šåœ¨ä¸Šæ¿ä¸Šï¼Œå¹¶å…¨éƒ¨ç”¨M4x30èºé’‰æ‹§ç´§ï¼Œèºé’‰æœ¬èº«ç”¨å¡‘æ–™åˆ‡å‰²ã€‚ <br><br> ç°åœ¨ï¼Œå¯ä»¥å°†è€ç”¨çš„å¤–å£³å°è£…åœ¨å¤–å£³çš„ä¸¤åŠä¸­ã€‚ è½¬å­æ”¾åœ¨ç¼–ç å™¨è½´ä¸Šï¼Œè¡¬è¡«åœ¨è½¬å­ä¸Šã€‚ å¯é€‰åœ°ï¼Œå°†é˜²æ»‘å«ç²˜åœ¨è½¦èº«åº•éƒ¨ã€‚ å¦ä¸€ç§é€‰æ‹©æ˜¯è£…é¥°æ€§æ’å…¥ç‰©ï¼Œå°†æ¥ç¼éšè—åœ¨èº«ä½“çš„ä¸¤åŠä¹‹é—´ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"> åœ¨ä»£ç ä¸­ï¼Œæ‚¨éœ€è¦æŒ‡å®šå‘½ä»¤æ¥æ‰“å¼€å’Œå…³é—­å¤–å›´è®¾å¤‡ã€‚ å¯é€‰-æ›´æ”¹è‡ªåŠ¨å…³æœºè¶…æ—¶æ—¶é—´ã€‚ <br><br> è¿™äº›éƒ½ä½äºå˜é‡éƒ¨åˆ†ã€‚ <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  : http://donalmorrissey.blogspot.ru/2010/04/sleeping-arduino-part-5-wake-up-via.html //  Livolo: http://forum.arduino.cc/index.php?action=dlattach;topic=153525.0;attach=108106 #include &lt;avr/sleep.h&gt; #include &lt;avr/power.h&gt; #include &lt;livolo.h&gt; #define adc_disable() (ADCSRA &amp;= ~(1&lt;&lt;ADEN)) // disable ADC (before power-off) #define adc_enable() (ADCSRA |= (1&lt;&lt;ADEN)) // re-enable ADC #define txPin 7 //   Livolo livolo(txPin); #define PULSESHORT 450 #define PULSELONG 1350 #define PULSESYNC 13950 #define encA 5 #define encB 6 //   #define buttonPin 2 //   () #define roomLed 10 //    #define kitchenLed 9 //    #define switchLed 3 //     #define switchLedTimeOut 150 //      #define switchTreshold 4 //      #define offDelay 15000 //   #define rLev 3 //     #define kLev 3 //     #define glev 2 //     #define txPowerPin 8 //    #define kitchenBackLightOn1 12 #define kitchenBackLightOn2 34 #define kitchenMainLightOn 56 #define roomBackLightOn 12 #define roomMainLightOn1 34 #define roomMainLightOn2 56 #define mainLightOn 12 #define kitchenBackLightOff1 12 #define kitchenBackLightOff2 34 #define kitchenMainLightOff 56 #define roomBackLightOff 12 #define roomMainLighOtff1 34 #define roomMainLightOff2 56 #define mainLightOff 12 #define LivoloID 8500 volatile byte rotorMode = 0; //   byte currentMode = 0; //    int curEncA, prevEncA, curButton, prevButton; //   ,  byte encCountPlus = 0; //   byte encCountMinus = 0; //   unsigned long offTimeOut = 0; //    unsigned long modeTimeOut = 0; //        unsigned long switchLedTime = 0; //      unsigned long modeTime = 0; //   unsigned int modeTreshold = 500; //     (  ) unsigned int bounceTreshold = 200; //     byte rLevState = 0; byte kLevState = 0; byte gLevState = 0; //   k - , r - , h - , b -  boolean kBackState = false; boolean kBackState1 = false; boolean kMainState = false; boolean rBackState = false; boolean rMainState = false; boolean rMainState1 = false; boolean hMainState = false; boolean bMainState = false; boolean afterSleep = false; //      boolean modeTimeOutStart = false; boolean switchLedOn = false; boolean allOn = false; //  " "    boolean allOff = false; //  " "    static void ookPulse(int on, int off) { digitalWrite(txPin, HIGH); delayMicroseconds(on); digitalWrite(txPin, LOW); delayMicroseconds(off); } static void rcSend(long remoteCode) { for (byte reSend = 0; reSend &lt; 8; reSend++) { for(byte repeat=0; repeat&lt;4; repeat++){ for (byte i = 24; i&gt;0; i--) { // transmit remoteID byte txPulse=bitRead(remoteCode, i-1); // read bits from remote ID // Serial.print(txPulse); switch (txPulse) { case 0: // 00 ookPulse(PULSESHORT,PULSELONG); //ookPulse(PULSESHORT,PULSELONG); break; case 1: // 11 ookPulse(PULSELONG,PULSESHORT); //ookPulse(PULSELONG,PULSESHORT); break; } // switch } // for loop ookPulse(PULSESHORT,PULSESYNC); // S(ync) // Serial.println(); } // repeat } delay(150); } void switchLedToggle() { digitalWrite(switchLed, HIGH); switchLedTime = millis(); switchLedOn = true; } void lightsUp(boolean lightsUpMode) { //       ""     //   "" -   if (afterSleep == true) { if (lightsUpMode == false) { gLevState = 1; rLevState = 3; kLevState = 3; } else {gLevState = 0; rLevState = 0; kLevState = 0; } afterSleep = false; //   " " } //   if (rotorMode == 2) { if (lightsUpMode == false){ if (allOff == false) { switchLedToggle(); if (digitalRead(buttonPin) == HIGH) { //   gLevState = 0; rLevState = 0; kLevState = 0; rcSend(kitchenBackLightOff1); rcSend(kitchenBackLightOff2); rcSend(roomBackLightOff); livolo.sendButton(LivoloID, mainLightOff); } allOff = true; allOn = false; } } if (lightsUpMode == true){ //  ,    if (allOn == false) { switchLedToggle(); if (digitalRead(buttonPin) == HIGH) { gLevState = 1; rLevState = 3; kLevState = 3; rcSend(kitchenBackLightOn1); rcSend(kitchenBackLightOn2); rcSend(roomBackLightOn); livolo.sendButton(LivoloID, mainLightOff); //    Livolo livolo.sendButton(LivoloID, kitchenMainLightOn); //#1   livolo.sendButton(LivoloID, roomMainLightOn1); // #2 livolo.sendButton(LivoloID, roomMainLightOn2); // #3 livolo.sendButton(LivoloID, mainLightOn); // #6 } allOn = true; allOff = false; } } } //  if (rotorMode == 1) { if (lightsUpMode == false &amp;&amp; kLevState &gt; 0) { switchLedToggle(); if (digitalRead(buttonPin) == HIGH) { if (kLevState == 3) { //   livolo.sendButton(LivoloID, kitchenMainLightOff); // #3 } if (kLevState == 2) { //   2 livolo.sendButton(LivoloID, kitchenBackLightOff2); // #6 } if (kLevState == 1) { //   1 rcSend(kitchenBackLightOff1); } } if (kLevState!=0) { kLevState--;} // Serial.println(kLevState); } if (lightsUpMode == true &amp;&amp; kLevState &lt; 3) { switchLedToggle(); kLevState++; if (digitalRead(buttonPin) == HIGH) { if (kLevState &gt; 3) {kLevState = 3;} // Serial.println(kLevState); if (kLevState == 1) { //   1 rcSend(kitchenBackLightOn1); } if (kLevState == 2) { //   2 livolo.sendButton(LivoloID, kitchenBackLightOn2); // #6 } if (kLevState == 3) { //   livolo.sendButton(LivoloID, kitchenMainLightOn); // #3 } } } } //  if (rotorMode == 0) { if (lightsUpMode == false &amp;&amp; rLevState &gt; 0) { switchLedToggle(); if (digitalRead(buttonPin) == HIGH) { if (rLevState == 3) { //  1 livolo.sendButton(LivoloID, roomMainLighOtff1); //#1 } if (rLevState == 2) { //   livolo.sendButton(LivoloID, roomMainLightOff2); // #2 } if (rLevState == 1) { //   rcSend(roomBackLightOff); } } if (rLevState != 0) { rLevState--; } } if (lightsUpMode == true &amp;&amp; rLevState &lt; 3) { switchLedToggle(); rLevState++; if (digitalRead(buttonPin) == HIGH) { if (rLevState == 1) { //   rcSend(roomBackLightOn); } if (rLevState == 2) { //   livolo.sendButton(LivoloID, roomMainLightOn1); //#1 } if (rLevState == 3) { //   1 livolo.sendButton(LivoloID, roomMainLightOn2); // #2 } } } } } void wakeUp() { detachInterrupt(0); } void setMode() { if (rotorMode &gt;= 2 ) { rotorMode = 0; } else { rotorMode++; } offTimeOut = millis(); } void ledBlink() { for (byte iLed = 0; iLed&lt;3; iLed++) { digitalWrite(kitchenLed, HIGH); digitalWrite(roomLed, HIGH); delay(100); digitalWrite(kitchenLed, LOW); digitalWrite(roomLed, LOW); delay(100); } } void setLed() { if (rotorMode == 0) { //  digitalWrite(roomLed, HIGH); digitalWrite(kitchenLed, LOW); } if (rotorMode == 1) { //  digitalWrite(roomLed, LOW); digitalWrite(kitchenLed, HIGH); } if (rotorMode == 2) { //    digitalWrite(roomLed, HIGH); digitalWrite(kitchenLed, HIGH); } } void enterSleep() { // ledBlink(); afterSleep = true; digitalWrite(txPin, LOW); digitalWrite(txPowerPin, LOW); digitalWrite(roomLed, LOW); digitalWrite(kitchenLed, LOW); digitalWrite(switchLed, LOW); pinMode(txPin, INPUT); pinMode(txPowerPin, INPUT); pinMode(roomLed, INPUT); pinMode(kitchenLed, INPUT); pinMode(switchLed, INPUT); attachInterrupt(0, wakeUp, LOW); adc_disable(); set_sleep_mode(SLEEP_MODE_PWR_DOWN); sleep_enable(); sleep_mode(); sleep_disable(); power_all_enable(); pinMode(txPin, OUTPUT); pinMode(txPowerPin, OUTPUT); pinMode(roomLed, OUTPUT); pinMode(kitchenLed, OUTPUT); pinMode(switchLed, OUTPUT); digitalWrite(txPin, LOW); digitalWrite(txPowerPin, HIGH); // ledBlink(); setLed(); offTimeOut = millis(); allOn = false; allOff = false; } void setup() { // Serial.begin(115200); pinMode(txPin, OUTPUT); pinMode(txPowerPin, OUTPUT); pinMode(roomLed, OUTPUT); pinMode(kitchenLed, OUTPUT); pinMode(switchLed, OUTPUT); digitalWrite(txPin, LOW); digitalWrite(txPowerPin, HIGH); digitalWrite(roomLed, LOW); digitalWrite(kitchenLed, LOW); digitalWrite(switchLed, LOW); // pinMode(buttonPin, INPUT_PULLUP); pinMode(buttonPin, INPUT); pinMode(encA, INPUT); pinMode(encB, INPUT); prevEncA = digitalRead(encA); offTimeOut = millis(); rotorMode = 0; setLed(); prevButton = digitalRead(buttonPin); } void loop() { if ((millis() - offTimeOut) &gt; offDelay) { enterSleep(); } else { //     if (switchLedOn == true) { if ((millis() - switchLedTime) &gt; switchLedTimeOut) { digitalWrite(switchLed, LOW); switchLedOn = false; } } //       if (digitalRead(buttonPin) == LOW) { offTimeOut = millis(); } //   curButton = digitalRead(buttonPin); if ((prevButton == HIGH) &amp;&amp; (curButton == LOW)) { if (modeTimeOutStart == false) { modeTimeOut = millis(); modeTimeOutStart = true; } } else { if (modeTimeOutStart == true) { modeTime = millis() - modeTimeOut; if ((modeTime &lt; modeTreshold) &amp;&amp; (modeTime &gt; bounceTreshold)) { setMode(); modeTimeOutStart = false; prevButton = digitalRead(buttonPin); } else { modeTimeOutStart = false; prevButton = digitalRead(buttonPin); } } } //    if (currentMode != rotorMode) { //       ,     currentMode = rotorMode; //     setLed(); } //   curEncA = digitalRead(encA); if ((prevEncA == LOW) &amp;&amp; (curEncA == HIGH)) { offTimeOut = millis(); if (digitalRead(encB) == LOW) { encCountMinus++; encCountPlus = 0; // Serial.println("Encoder Minus"); if (encCountMinus &gt; switchTreshold) { encCountMinus = 0; lightsUp(false); } } else { encCountPlus++; encCountMinus = 0; // Serial.println("Encoder Plus"); if (encCountPlus &gt; switchTreshold) { encCountPlus = 0; lightsUp(true); } } } prevEncA = curEncA; } }</span></span></code> </pre> <br></div></div><br> æ¡ˆä¾‹æ¨¡å‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‚è€ƒ</a> ã€‚ <br><br> ä»…æ­¤è€Œå·²ã€‚ <br><br>  PSï¼šæˆ‘å°½åŠ›ä¸å¿˜è®°ä»»ä½•äº‹æƒ…ï¼Œä½†æˆ‘å¯ä»¥ã€‚ å¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘æ·±è¡¨æ­‰æ„ï¼Œå¹¶å°†å°½æˆ‘æ‰€èƒ½æ­£ç¡®å›ç­”ä¸»è¦é—®é¢˜å¹¶çº æ­£é”™è¯¯ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN411093/">https://habr.com/ru/post/zh-CN411093/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN411083/index.html">æ—¥è½â€œäººç±»ä¹‹æ˜Ÿâ€</a></li>
<li><a href="../zh-CN411085/index.html">Pi-Sonos v3.0ï¼šæ­£åœ¨å¤„ç†é”™è¯¯æˆ–å…¨æ–°é¡¹ç›®ï¼Ÿ</a></li>
<li><a href="../zh-CN411087/index.html">æ˜¾å¡çš„ä¸ä¹…çš„å°†æ¥</a></li>
<li><a href="../zh-CN411089/index.html">å¦‚ä½•è¯†åˆ«åœ¨è½¨å«æ˜Ÿ</a></li>
<li><a href="../zh-CN411091/index.html">æ•°æ®ä¸­å¿ƒæŠ€æœ¯ï¼šQFXäº¤æ¢æœºçš„ä¸€èˆ¬ä¿¡æ¯</a></li>
<li><a href="../zh-CN411095/index.html">å¼€æ™®å‹’æœ›è¿œé•œçš„ç‡ƒæ–™ç”¨å®Œäº†ã€‚ å†³èµ›å¿«åˆ°äº†</a></li>
<li><a href="../zh-CN411097/index.html">ç‹¬ç«‹ç§»åŠ¨é€šè®¯ç¨‹åº</a></li>
<li><a href="../zh-CN411099/index.html">å½“ç”¨ç™½è‰²LEDç…§æ˜æ¤ç‰©æ—¶ï¼Œå¾ˆå®¹æ˜“è¯„ä¼°PPFDï¼š1000 lux = 15Î¼mol/ s / m2</a></li>
<li><a href="../zh-CN411101/index.html">çº½çº¦å½“å±€å…è®¸å¢åŠ çŸ¿å·¥çš„ç”µè´¹</a></li>
<li><a href="../zh-CN411105/index.html">å¿«é€’æ— äººæœºçš„æ€§èƒ½å–å†³äºæ‚¨çš„ä½æ‰€</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>