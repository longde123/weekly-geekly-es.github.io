<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßòüèΩ ü§∑üèΩ ‚õπüèæ C√≥mo AWS elabora sus servicios resistentes. Escalado de servidor y base de datos ‚úãüèº üßú üàÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las nubes son como una caja m√°gica: preguntas lo que necesitas y los recursos simplemente aparecen de la nada. M√°quinas virtuales, bases de datos, una...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo AWS elabora sus servicios resistentes. Escalado de servidor y base de datos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/471686/"> Las nubes son como una caja m√°gica: preguntas lo que necesitas y los recursos simplemente aparecen de la nada.  M√°quinas virtuales, bases de datos, una red: todo esto solo le pertenece a usted.  Hay otros inquilinos de la nube, pero en su universo usted es el √∫nico gobernante.  Est√° seguro de que siempre recibir√° los recursos necesarios, no tiene en cuenta a nadie y determina independientemente cu√°l ser√° la red.  ¬øC√≥mo es esta magia que hace que la nube asigne recursos el√°sticamente y a√≠sle completamente a los inquilinos unos de otros? <br><br><img src="https://habrastorage.org/webt/95/t7/1o/95t71ogmxhqysjnhwbqd_nbj4tk.jpeg"><br><br>  AWS Cloud es un sistema mega sofisticado que ha evolucionado desde 2006.  Parte de este desarrollo fue encontrado por <strong>Vasily Pantyukhin</strong> , arquitecto de Amazon Web Services.  Como arquitecto, ve desde adentro no solo el resultado final, sino tambi√©n los desaf√≠os que supera AWS.  Cuanto m√°s comprensi√≥n del sistema, m√°s confianza.  Por lo tanto, Vasily compartir√° los secretos de los servicios en la nube de AWS.  Debajo del corte se encuentra el dispositivo para servidores f√≠sicos de AWS, escalabilidad flexible de la base de datos, base de datos personalizada de Amazon y m√©todos para aumentar el rendimiento de las m√°quinas virtuales y reducir su precio.  El conocimiento de los enfoques arquitect√≥nicos de Amazon lo ayudar√° a hacer un mejor uso de los servicios de AWS y puede proporcionar nuevas ideas para crear sus propias soluciones. <br><a name="habracut"></a><br>  <i>Acerca del orador: Vasily Pantyukhin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Hen</a> ) comenz√≥ como un administrador de Unix en empresas ru, pas√≥ 6 a√±os trabajando en gl√°ndulas Sun Microsystem grandes, y durante 11 a√±os predic√≥ la centralizaci√≥n de datos del mundo en EMC.</i>  <i>Evolucion√≥ naturalmente a nubes privadas, y en 2017 se convirti√≥ en nubes p√∫blicas.</i>  <i>Ahora con consejos t√©cnicos, ayuda a vivir y desarrollarse en la nube de AWS.</i> <i><br><br></i>  <i>Descargo de responsabilidad: todo lo que se muestra a continuaci√≥n es la opini√≥n personal de Vasily, y puede no coincidir con la posici√≥n de los servicios web de Amazon.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Un video del</a> informe en base al cual se cre√≥ el art√≠culo est√° disponible en nuestro canal de YouTube.</i> <br><br><h2>  ¬øPor qu√© estoy hablando de un dispositivo Amazon? </h2><br>  Mi primer autom√≥vil fue con una "manija", en una caja de cambios manual.  Fue genial por la sensaci√≥n de que pod√≠a controlar la m√°quina y controlarla por completo.  Tambi√©n me gust√≥ que al menos entiendo el principio de su trabajo.  Naturalmente, imagin√© el dispositivo de caja de manera bastante primitiva, m√°s o menos como una caja de cambios en una bicicleta. <br><br><img src="https://habrastorage.org/webt/t-/zx/uz/t-zxuzgpa2gj26bmpgbe1gj_zd0.jpeg"><br><br>  Todo fue maravilloso, excepto por una cosa: pararse en atascos.  Parece que est√°s sentado y sin hacer nada, pero constantemente cambias de marcha, presionas el embrague, el acelerador, el freno, realmente te cansas.  El problema de los atascos se resolvi√≥ parcialmente cuando apareci√≥ una m√°quina en la m√°quina de la familia.  Al volante hab√≠a tiempo para pensar en algo, escuchar un audiolibro. <br><br>  Un misterio apareci√≥ en mi vida, porque generalmente dej√© de entender c√≥mo funciona mi autom√≥vil.  Un autom√≥vil moderno es un dispositivo complejo.  El autom√≥vil se adapta simult√°neamente a docenas de par√°metros diferentes: presionar el acelerador, frenar, estilo de conducci√≥n, calidad de la carretera.  Ya no entiendo c√≥mo funciona esto. <br><br>  Cuando comenc√© a hacer Amazon Cloud, eso tambi√©n fue un misterio para m√≠.  Solo este secreto es un orden de magnitud mayor, porque hay un conductor en el autom√≥vil y hay millones en AWS.  Todos los usuarios dirigen simult√°neamente, presionan el acelerador y frenan.  Es sorprendente que vayan a donde quieran, ¬°para m√≠ es un milagro!  El sistema se adapta, escala y ajusta de manera flexible a cada usuario de manera autom√°tica, de modo que le parece que est√° solo en este universo. <br><br>  La magia se disip√≥ un poco cuando m√°s tarde llegu√© a trabajar como arquitecto en Amazon.  Vi a qu√© problemas nos enfrentamos, c√≥mo los resolvemos, c√≥mo desarrollamos los servicios.  Con un aumento en la comprensi√≥n del sistema, hay m√°s confianza en el servicio.  As√≠ que quiero compartir una imagen de lo que est√° bajo el cap√≥ de la nube de AWS. <br><br><h2>  ¬øDe qu√© hablaremos? </h2><br>  Eleg√≠ un enfoque diversificado: seleccion√© 4 servicios interesantes de los que vale la pena hablar. <br><br>  <strong>Optimizaci√≥n del servidor</strong> .  Nubes ef√≠meras con una realizaci√≥n f√≠sica: centros de datos f√≠sicos, donde hay servidores f√≠sicos que emiten zumbidos, se calientan y parpadean las bombillas. <br><br>  <strong>Las funciones sin servidor</strong> (Lambda) son probablemente el servicio m√°s escalable en la nube. <br><br>  <strong>Escalado de bases de datos</strong> .  Hablar√© sobre c√≥mo construimos nuestras propias bases de datos escalables. <br><br>  <strong>Escalado de red</strong> .  La √∫ltima parte en la que abrir√© el dispositivo de nuestra red.  Esto es algo maravilloso: cada usuario de la nube cree que est√° solo en la nube y no ve a otros inquilinos en absoluto. <br><br><blockquote>  <i>Nota</i>  <i>Este art√≠culo se centrar√° en la optimizaci√≥n del servidor y el escalado de la base de datos.</i>  <i>El escalado de la red se discutir√° en el pr√≥ximo art√≠culo.</i>  <i>¬øD√≥nde est√°n las funciones sin servidor?</i>  <i>Una transcripci√≥n separada sali√≥ sobre ellos: ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mal, s√≠, audaz.</a></i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Anboxing de microvirtuales Firecracker</a> ".</i>  <i>Habla sobre varias formas diferentes de escalado, y la soluci√≥n Firecracker se analiza en detalle: una simbiosis de las mejores cualidades de una m√°quina virtual y contenedores.</i> </blockquote><br><h2>  Servidores </h2><br>  La nube es ef√≠mera.  Pero esta ef√≠mera todav√≠a tiene una encarnaci√≥n f√≠sica: servidores.  Inicialmente, su arquitectura era cl√°sica.  Chipset x86 est√°ndar, tarjetas de red, Linux, hipervisor Xen, que ejecuta m√°quinas virtuales. <br><br><img src="https://habrastorage.org/webt/hb/vt/ez/hbvtezxs1wc_ilzrlcorvx9qy4m.jpeg"><br><br>  En 2012, dicha arquitectura hizo bien su trabajo.  Xen es un gran hipervisor, pero con un gran defecto.  Tiene una <strong>sobrecarga</strong> bastante <strong>alta para emular dispositivos</strong> .  Con el advenimiento de nuevas tarjetas de red o SSD m√°s r√°pidas, estos gastos generales se vuelven demasiado altos.  ¬øC√≥mo lidiar con este problema?  Decidimos trabajar en dos frentes a la vez, para <strong>optimizar tanto el hardware como el hipervisor</strong> .  La tarea es muy seria. <br><br><h3>  Optimizaci√≥n de hierro e hipervisor. </h3><br>  Hacer todo de una vez y bien no funcionar√°.  Lo que es "bueno" fue inicialmente incomprensible. <br><blockquote>  Decidimos aplicar un enfoque evolutivo: cambiamos un elemento importante de la arquitectura y lo lanzamos a la producci√≥n. </blockquote>  Pisamos todos los rastrillos, escuchamos quejas y sugerencias.  Luego cambiamos otro componente.  Por lo tanto, en peque√±os incrementos, cambiamos radicalmente toda la arquitectura en funci√≥n de los comentarios y el soporte del usuario. <br><br>  La transformaci√≥n comenz√≥ en 2013 con lo m√°s dif√≠cil: la red.  En casos <strong>C3</strong> , se agreg√≥ una tarjeta especial Acelerador de red a la tarjeta de red est√°ndar.  Estaba conectado con un cable de bucle literalmente corto en el panel frontal.  Feo, pero no visible en la nube.  Pero la interacci√≥n directa con el hardware mejor√≥ considerablemente el jitter y el ancho de banda de la red. <br><br>  Luego decidimos centrarnos en mejorar el acceso al almacenamiento en bloque de EBS: Elastic Block Storage.  Esta es una combinaci√≥n de red y almacenamiento.  La dificultad es que si las tarjetas de Network Accelerator existieran en el mercado, no habr√≠a forma de comprar hardware de Storage Accelerator.  Por lo tanto, recurrimos a la startup <strong>Annapurna Labs</strong> , que desarroll√≥ chips ASIC especiales para nosotros.  Le permitieron conectar vol√∫menes EBS remotos como dispositivos NVMe. <br><br>  En casos de <strong>C4</strong> , resolvimos dos problemas.  Primero, implementamos las bases para el futuro con tecnolog√≠a NVMe prometedora, pero nueva en ese momento.  El segundo: descarg√≥ significativamente el procesador central al transferir el procesamiento de solicitudes a EBS a una nueva tarjeta.  Result√≥ bien, as√≠ que ahora Annapurna Labs es parte de Amazon. <br><br>  Para noviembre de 2017, nos dimos cuenta de que era hora de cambiar el hipervisor en s√≠. <br><blockquote>  El nuevo hipervisor se desarroll√≥ sobre la base de m√≥dulos de kernel KVM modificados. </blockquote>  Permiti√≥ reducir fundamentalmente los costos generales de emular dispositivos y trabajar directamente con los nuevos ASIC.  <strong>Las</strong> instancias <strong>C5</strong> fueron las primeras m√°quinas virtuales bajo las cuales se est√° ejecutando un nuevo hipervisor.  Lo llamamos <strong>Nitro</strong> . <br><br><img src="https://habrastorage.org/webt/g6/x2/ri/g6x2rizybxczhu-ikt1pfulnpb0.jpeg">  <em>La evoluci√≥n de las instancias en la l√≠nea de tiempo.</em> <br><br>  Todos los nuevos tipos de m√°quinas virtuales que aparecieron desde noviembre de 2017 funcionan en este hipervisor.  <strong>Las instancias de Iron Bare Metal no tienen un hipervisor</strong> , pero tambi√©n se llaman Nitro, ya que usan tarjetas Nitro especializadas. <br><br>  En los pr√≥ximos dos a√±os, el n√∫mero de tipos de instancias Nitro super√≥ un par de docenas: A1, C5, M5, T3 y otros. <br><br><img src="https://habrastorage.org/webt/vw/zf/as/vwzfasdjwxuuykoylco9bnmgqki.jpeg"><br>  <em>Tipos de instancias.</em> <br><br><h3>  Como funcionan los autos nitro modernos </h3><br>  Tienen tres componentes principales: un hipervisor Nitro (discutido anteriormente), un chip de seguridad y tarjetas Nitro. <br><br>  <strong>El chip de seguridad est√°</strong> integrado directamente en la placa base.  Controla muchas funciones importantes, por ejemplo, controlar la carga del sistema operativo host. <br><br>  <strong>Tarjetas Nitro</strong> : hay cuatro tipos de ellas.  Todos est√°n desarrollados por Annapurna Labs y se basan en ASIC comunes.  Parte de su firmware tambi√©n es com√∫n. <br><br><img src="https://habrastorage.org/webt/fy/pf/pj/fypfpj1r-mpklkd-8ltiz-frjnc.jpeg"><br>  <em>Cuatro tipos de tarjetas nitro.</em> <br><br>  Una de las tarjetas est√° dise√±ada para funcionar con <strong>una red</strong> <strong>VPC</strong> .  Es ella quien es visible en <strong>las m√°quinas virtuales</strong> como una tarjeta de red <strong>ENA: Elastic Network Adapter</strong> .  Tambi√©n encapsula el tr√°fico cuando se transmite a trav√©s de la red f√≠sica (hablaremos de esto en la segunda parte del art√≠culo), controla el firewall de los Grupos de Seguridad, es responsable del enrutamiento y otras cosas de la red. <br><br>  Las tarjetas separadas funcionan con el almacenamiento en bloque de <strong>EBS</strong> y los discos integrados en el servidor.  Se presentan a las m√°quinas virtuales invitadas como <strong>adaptadores NVMe</strong> .  Tambi√©n son responsables del cifrado de datos y la supervisi√≥n del disco. <br><br>  El sistema de tarjetas Nitro, un hipervisor y un chip de seguridad est√°n integrados en una <strong>red definida por software</strong> o SDN.  La <strong>tarjeta de</strong> control es responsable de administrar esta red (Plano de control). <br><br>  Por supuesto, continuamos desarrollando nuevos ASIC.  Por ejemplo, a fines de 2018, lanzaron el chip Inferentia, que permite un trabajo m√°s eficiente con tareas de aprendizaje autom√°tico. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i7/1w/7p/i71w7p7mu3pbl3ozaoczqmxirku.jpeg" width="500"></div><br>  <em>Chip de procesador de aprendizaje autom√°tico Inferentia.</em> <br><br><h2>  Base de datos escalable </h2><br>  La base de datos tradicional tiene una estructura en capas.  Si se simplifica enormemente, se distinguen los siguientes niveles. <br><br><ul><li>  <strong>SQL</strong> : los despachadores de clientes y consultas trabajan en ello. </li><li>  Asegurar <strong>transacciones</strong> : todo est√° claro aqu√≠, ACID y todo eso. </li><li>  <strong>Almacenamiento en cach√©</strong> proporcionado por agrupaciones de almacenamiento intermedio. </li><li>  <strong>Registro</strong> : proporciona trabajo con redo-logs.  En MySQL se llaman Bin Logs, en PosgreSQL se llaman Write Ahead Logs (WAL). </li><li>  <strong>Almacenamiento</strong> : escriba directamente en el disco. </li></ul><br><img src="https://habrastorage.org/webt/5x/xv/ay/5xxvay0jy9xyewxzi1py1q9rhei.jpeg"><br>  <em>Estructura de base de datos en capas.</em> <br><br>  Hay diferentes formas de escalar bases de datos: fragmentaci√≥n, arquitectura Shared Nothing, unidades compartidas. <br><br><img src="https://habrastorage.org/webt/ao/pq/sf/aopqsfjiytwkbunwwni-wia5mzu.jpeg"><br><br>  Sin embargo, todos estos m√©todos conservan la misma estructura de base de datos monol√≠tica.  Esto limita significativamente la escala.  Para resolver este problema, desarrollamos nuestra propia base de datos: <strong>Amazon Aurora</strong> .  Es compatible con MySQL y PostgreSQL. <br><br><h3>  Aurora amaz√≥nica </h3><br>  La idea arquitect√≥nica principal es dividir los niveles de almacenamiento y registro de la base de datos principal. <br><br>  Mirando hacia el futuro, dir√© que tambi√©n hicimos que el nivel de cach√© sea independiente.  La arquitectura deja de ser un monolito, y obtenemos grados adicionales de libertad al escalar bloques individuales. <br><br><img src="https://habrastorage.org/webt/31/a1/4_/31a14_4d4o0pvrk_23aj-obbiew.jpeg"><br>  <em>Los niveles de registro y almacenamiento est√°n separados de la base de datos.</em> <br><br>  Un DBMS tradicional escribe datos en el sistema de almacenamiento en forma de bloques.  En Amazon Aurora, creamos un repositorio "inteligente" que puede hablar el idioma de <strong>redo-logs</strong> .  En el interior, el repositorio convierte los registros en bloques de datos, supervisa su integridad y realiza copias de seguridad autom√°ticamente. <br><br>  Este enfoque le permite implementar cosas tan interesantes como la <strong>clonaci√≥n</strong> .  Funciona fundamentalmente m√°s r√°pido y m√°s econ√≥mico debido al hecho de que no requiere la creaci√≥n de una copia completa de todos los datos. <br><br>  El nivel de almacenamiento se implementa como un sistema distribuido.  Consiste en una gran cantidad de servidores f√≠sicos.  Cada redo-log es procesado y almacenado simult√°neamente por <strong>seis nodos</strong> .  Esto proporciona protecci√≥n de datos y equilibrio de carga. <br><br><img src="https://habrastorage.org/webt/uv/up/rg/uvuprghc30bpo190-fjgb3w5pm8.jpeg"><br><br>  La escala de lectura se puede lograr utilizando r√©plicas apropiadas.  El almacenamiento distribuido elimina la necesidad de sincronizaci√≥n entre la instancia de base de datos principal a trav√©s de la cual escribimos datos y otras r√©plicas.  Se garantiza que los datos actuales estar√°n disponibles para todas las r√©plicas. <br><br>  El √∫nico problema es el almacenamiento en cach√© de datos antiguos en las r√©plicas de lectura.  Pero este problema se resuelve <strong>transfiriendo todos los registros de rehacer</strong> a las r√©plicas en la red interna.  Si el registro est√° en la memoria cach√©, se marca como no v√°lido y se sobrescribe.  Si no est√° en el cach√©, simplemente se descarta. <br><br><img src="https://habrastorage.org/webt/8q/lt/hc/8qlthc7bqmxhqhja_ou4u3udjk4.jpeg"><br><br>  Descubrimos el almacenamiento. <br><br><h3>  C√≥mo escalar niveles de DBMS </h3><br>  Aqu√≠ la escala horizontal es mucho m√°s dif√≠cil de hacer.  Por lo tanto, vamos al camino trillado del <strong>escalamiento vertical cl√°sico</strong> . <br><br>  Supongamos que tenemos una aplicaci√≥n que se comunica con un DBMS a trav√©s de un nodo maestro. <br><br>  Con la escala vertical, seleccionamos un nuevo nodo que tendr√° m√°s procesadores y memoria. <br><br><img src="https://habrastorage.org/webt/ai/mn/if/aimnifftppplcs1mfg3n-zldlrk.jpeg"><br><br>  A continuaci√≥n, cambie la aplicaci√≥n del nodo maestro anterior al nuevo.  Hay problemas <br><br><ul><li>  Esto requerir√° un tiempo de inactividad notable de la aplicaci√≥n. </li><li>  El nuevo nodo maestro tendr√° un cach√© fr√≠o.  El rendimiento de la base de datos ser√° m√°ximo solo despu√©s de que la cach√© se haya calentado. </li></ul><br><img src="https://habrastorage.org/webt/k0/i-/jy/k0i-jy69brtsvclx0trwgjfuw0y.jpeg"><br><br>  ¬øC√≥mo mejorar la situaci√≥n?  Ponga un proxy entre la aplicaci√≥n y el nodo maestro. <br><br><img src="https://habrastorage.org/webt/ag/bk/c9/agbkc94ple_fti2xvyjinrb7mxu.jpeg"><br><br>  ¬øQu√© nos dar√°?  Ahora todas las aplicaciones no necesitan ser redirigidas manualmente a un nuevo nodo.  El cambio se puede hacer bajo un proxy y al mismo tiempo fundamentalmente m√°s r√°pido. <br><br>  El problema parece estar resuelto.  Pero no, todav√≠a sufrimos la necesidad de calentar el cach√©.  Adem√°s, ha aparecido un nuevo problema: ahora el proxy es un posible punto de falla. <br><br><h3>  Soluci√≥n final con Amazon Aurora Serverless </h3><br>  ¬øC√≥mo resolvimos estos problemas? <br><br>  <strong>Dej√≥ un proxy</strong> .  Esta no es una instancia separada, sino toda una flota distribuida de servidores proxy a trav√©s de los cuales las aplicaciones se conectan a la base de datos.  En caso de falla, cualquiera de los nodos puede ser reemplazado casi instant√°neamente. <br><br>  <strong>Agregamos un grupo de nodos c√°lidos de varios tama√±os</strong> .  Por lo tanto, si es necesario asignar un nuevo nodo de un tama√±o mayor o menor, est√° disponible de inmediato.  No es necesario esperar a que se cargue. <br><br>  <strong>Todo el proceso de escalado est√° controlado por un sistema de monitoreo especial.</strong>  La supervisi√≥n supervisa constantemente el estado del nodo maestro actual.  Si detecta, por ejemplo, que la carga del procesador ha alcanzado un valor cr√≠tico, notifica al grupo de instancias calientes de la necesidad de asignar un nuevo nodo. <br><br><img src="https://habrastorage.org/webt/2r/ja/oq/2rjaoqe-tgjjv_nxbodwlibzkzc.jpeg"><br>  <em>Proxies distribuidos, instancias c√°lidas y monitoreo.</em> <br><br>  Un nodo de potencia requerida est√° disponible.  Las agrupaciones de almacenamientos intermedios se copian y el sistema comienza a esperar un momento seguro para cambiar. <br><br><img src="https://habrastorage.org/webt/hw/t4/nr/hwt4nruv3h9bdyyte_awfycnp1g.jpeg"><br><br>  Por lo general, el momento de cambiar llega lo suficientemente r√°pido.  Luego se suspende la comunicaci√≥n entre el proxy y el antiguo nodo maestro, todas las sesiones cambian al nuevo nodo. <br><br><img src="https://habrastorage.org/webt/pz/4f/cj/pz4fcjzipu0pep5pwwex6mb5kas.jpeg"><br><br>  Se reanuda el trabajo con la base de datos. <br><br><img src="https://habrastorage.org/webt/sv/dl/kf/svdlkfp7ve6gzlomvdxulhmyjsy.jpeg"><br><br>  El gr√°fico muestra que la suspensi√≥n es realmente muy corta.  En el gr√°fico azul, la carga y en los escalones rojos, los momentos de escala.  Las ca√≠das a corto plazo en el cuadro azul son precisamente ese breve retraso. <br><br><img src="https://habrastorage.org/webt/te/3p/4x/te3p4xzclr_3liuv-7gk2ocskey.jpeg"><br><br>  Por cierto, Amazon Aurora le permite guardar y apagar completamente la base de datos cuando no est√° en uso, por ejemplo, el fin de semana.  Despu√©s de detener la carga, la base de datos disminuye gradualmente su potencia y se apaga por un tiempo.  Cuando la carga regrese, volver√° a subir suavemente. <br><br><blockquote>  En la siguiente parte de la charla del dispositivo Amazon, hablaremos sobre el escalado de la red.  Suscr√≠base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">al bolet√≠n</a> y est√© atento para no perderse el art√≠culo. <br><br>  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HighLoad ++,</a> Vasily Pantyukhin dar√° una presentaci√≥n: ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Houston, tenemos un problema.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dise√±o de sistemas con fallas, patrones de desarrollo de servicios internos en la nube de Amazon</a> ".  Lo que los desarrolladores de dise√±o de Amazon usan patrones de dise√±o de sistema distribuido, cu√°les son las razones de las fallas del servicio, qu√© es la arquitectura basada en Celdas, Trabajo constante, Fragmentaci√≥n aleatoria, ser√° interesante.  Menos de un mes antes de la conferencia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reserve sus entradas</a> .  24 de octubre, el aumento de precio final. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/471686/">https://habr.com/ru/post/471686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../471668/index.html">An√°lisis t√©cnico del exploit checkm8</a></li>
<li><a href="../471670/index.html">Tratando Jetpack Compose en la batalla?</a></li>
<li><a href="../471676/index.html">Estafadores telef√≥nicos. La segunda acci√≥n, en la que me descompongo y corro al cajero autom√°tico m√°s cercano</a></li>
<li><a href="../471678/index.html">Tenga servicios a pedido</a></li>
<li><a href="../471684/index.html">¬øPor qu√© necesita crear m√≥dulos para nginx?</a></li>
<li><a href="../471688/index.html">C√≥mo AWS elabora sus servicios resistentes. Escala de red</a></li>
<li><a href="../471700/index.html">C√≥mo eleg√≠ una pila tecnol√≥gica con una base para el futuro</a></li>
<li><a href="../471702/index.html">Aplicaciones web mejoradas cibern√©ticamente</a></li>
<li><a href="../471704/index.html">El libro "Las mitocondrias ego√≠stas. C√≥mo mantener la salud y mover la vejez "</a></li>
<li><a href="../471706/index.html">9 problemas de red t√≠picos que se pueden detectar usando el an√°lisis de NetFlow (usando Flowmon como ejemplo)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>