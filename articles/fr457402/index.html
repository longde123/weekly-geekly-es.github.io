<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öñÔ∏è üë®üèº‚Äçüíª üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ Comment organiser le d√©veloppement et le support d'un blog sur WordPress au 2T19 et ne pas le corriger üôá üë©‚Äçüë©‚Äçüëß‚Äçüë¶ üßóüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pensez √† l'avance √† la mise √† l'√©chelle, tirez le meilleur parti des solutions Wordpress standard, cr√©ez un th√®me WP de vos propres mains, prenez soin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment organiser le d√©veloppement et le support d'un blog sur WordPress au 2T19 et ne pas le corriger</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/promopult/blog/457402/"><p>  Pensez √† l'avance √† la mise √† l'√©chelle, tirez le meilleur parti des solutions Wordpress standard, cr√©ez un th√®me WP de vos propres mains, prenez soin de la commodit√© d'un concepteur de mise en page, concentrez-vous sur la mobilit√© - et mettez √† jour le blog de l'entreprise pour que les lecteurs, les √©diteurs et les dirigeants l'adorent.  Nous l'avons fait. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/31/ab/3s/31ab3sbtd1tyy1cfaneyga9do8s.png" alt="Blog PromoPult"></div><br><br><p>  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog de Promopult a</a> 9 ans.  Pendant ce temps, il a travers√© plusieurs transformations.  <strong>Sergey Glazov</strong> , le technologue de notre blog et d'autres choses importantes dans le syst√®me Promopult, parle de ce dernier. </p><a name="habracut"></a><br><p>  Ce n'est plus discut√©, car c'est devenu la norme: un standard simple et rapide pour le blog d'une entreprise, une personne, un personnel, oui, peu importe, WordPress.  Vous pouvez discuter, mais le fait demeure. </p><br><p>  Je veux parler de ce que je suis venu en termes d'organisation du code, en travaillant avec le blog WordPress et son support.  Cette histoire concerne le processus, car l'√©tat actuel est le dernier point de ce processus et il semble que l'√©tat actuel soit le plus r√©ussi par rapport √† toutes les it√©rations pass√©es dans les approches de l'organisation. </p><br><div class="spoiler">  <b class="spoiler_title">Contenu de l'article</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que s'est-il pass√© √† (mon) d√©but - en 2016</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Premi√®res t√¢ches: mobilisation et conception</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comme nous l'avons fait avec le travail sur le code</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ce que je voulais obtenir, comme on dit, "dans un monde id√©al"</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Refonte, premi√®re approche</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Deuxi√®me approche: une nouvelle version de la structure</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blog PromoPult: Comment √ßa marche</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liste de contr√¥le avant publication</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Param√®tres des articles de blog</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">De jolies petites choses</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">A propos d'une technique int√©ressante</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quels plugins nous utilisons</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conseils de conclusion pour ceux qui travaillent sur le blog de l'entreprise</a> <br></div></div><br><a name="id1"></a><h2>  Que s'est-il pass√© √† (mon) d√©but - en 2016 </h2><br><p>  Il est rare qu'un d√©veloppeur cr√©e et r√©fl√©chisse √† tout.  Le plus souvent, il s'av√®re que d√©j√† (le <em>plus souvent m√™me depuis longtemps, avec une histoire distincte</em> ) il y a un projet qui doit √™tre soutenu.  Refonte, modifications, √©normes savoirs traditionnels et exigences.  Et dans les conditions de tout existant, il est n√©cessaire de naviguer rapidement et de r√©soudre les probl√®mes. </p><br><p>  J'ai accept√© le blog en 2016, alors qu'il avait d√©j√† une longue histoire et que tout n'est pas aussi beau que je le voulais. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/8m/ao/hl8maolspww0uzcsvc2nrzc4_x8.png" alt="Voil√† √† quoi ressemblait le blog de SeoPult d√©but 2016."></div><br><br><ol><li>  Conception de blog ancienne avec une histoire de neuf ans. </li><li>  L'absence d'une version mobile / tablette sous quelque forme que ce soit. </li><li>  Plus de 600 messages. </li><li>  Probl√®mes structurels avec le contenu et son organisation: plus de 20 cat√©gories et plus de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">neuf centaines de balises</a> (maintenant plus, mais nous avons d√©j√† arr√™t√©). </li><li>  Les plans ont d√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chang√© de marque</a> et se d√©placent vers un nouveau domaine.  Cela vaut √©galement pour le blog. </li><li>  Une longue cha√Æne d'actions lorsque vous travaillez avec du code. </li><li>  Fonctionne sans contr√¥le de version (.git). </li></ol><br><a name="id2"></a><h2>  Premi√®res t√¢ches: mobilisation et conception </h2><br><p>  L'objectif principal √©tait d'ajouter de l'adaptabilit√© au th√®me existant du blog: pour permettre aux utilisateurs mobiles de lire les articles et d'utiliser le site de mani√®re ad√©quate - ils parlaient et √©crivaient <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de</a> plus en plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Mobile First</a> , et les statistiques montraient qu'ils lisaient le blog √† partir du mobile. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/er/oc/q3/erocq3hilkqxx99etqmtjmouzvy.png" alt="Statistiques dans Yandex.Metrica"></div><br><br><p>  Parall√®lement √† ces travaux, un nouveau design a √©t√© dessin√©. </p><br><p>  En tant que d√©veloppeur, j'ai travaill√© en tandem avec le concepteur, sans cha√Æne de m√©diateurs inutile dans la discussion, donc le processus de communication a √©t√© plus rapide et plus anim√©.  Le fait √©vident, bien s√ªr, mais pour une raison quelconque, il est n√©glig√© dans de nombreux processus.  Et il s'av√®re que le designer fait quelque chose de tr√®s √©loign√© de la r√©alit√©.  Parlez avec votre bouche et discutez de tous les points.  Chaque participant au processus souhaite faire du bien et du cool.  Mais tout le monde ne comprend pas que le processus est une cha√Æne connect√©e, et si un artiste individuel manque ou ne fait rien sur son site de travail, ce sera difficile pour les prochaines personnes dans le processus. </p><br><p>  Au cours des travaux sur la version mobile, j'ai vu les inconv√©nients et les faiblesses de l'organisation du processus de d√©veloppement.  Je voulais acc√©l√©rer et simplifier tout. </p><br><a name="id3"></a><h3>  Comme nous l'avons fait avec le travail sur le code sur le blog </h3><br><p>  Il y avait une version DEV du blog avec une base de donn√©es de test s√©par√©e.  Le travail avec les fichiers a eu lieu sur un serveur distant, les tests ont eu lieu √† une adresse distincte, inaccessible au monde ext√©rieur.  Apr√®s le travail, les tests et la naissance d'une certaine unit√© de sens - elle a √©t√© d√©ploy√©e sur le blog de la bataille via un appel √† l'administrateur.  Ce qu'il a fait √©tait une magie distincte. </p><br><p>  Pour un blog o√π quelque chose change une fois par an, un excellent processus.  Mais avec la nouvelle √©dition et ses besoins, un tel processus serait tr√®s p√©nible. </p><br><a name="id4"></a><h3>  Ce que je voulais obtenir, comme on dit, "dans un monde id√©al" </h3><br><p> Tout le code r√©side.  r√©f√©rentiels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">git</a> .  La version combat du blog est le <code>master</code> ce r√©f√©rentiel.  Tout travail avec le code s'effectue via des <code>dev</code> vers une branche de d√©veloppement ou d'autres branches associ√©es √† de grandes t√¢ches individuelles. </p><br><p>  Une fois la t√¢che termin√©e, une demande d'extraction (PR) et / ou une demande de fusion (MR) est cr√©√©e avec un ensemble de modifications.  La signification dans MR et PR est la m√™me, mais dans des services diff√©rents - un nom diff√©rent.  Nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitLab</a> , donc Merge Request. </p><br><p>  Lors de la cr√©ation de MR, une adresse temporaire de la forme <code>-git--test.dev.blog.promopult.ru</code> disponible, accessible uniquement par IP pour une v√©rification en direct sur l'environnement de test. </p><br><p>  Le code dans le MR cr√©√© est revu et v√©rifi√© automatiquement (linter code, dont je v√©rifie la syntaxe selon des r√®gles pr√©d√©finies) et en mode manuel (la puissance verticale dans l'√©quipe, le timlid le regarde attentivement avec son ≈ìil attentif convexe naval).  Apr√®s avoir pass√© l'examen - √† partir de l'interface du navigateur du r√©f√©rentiel .git, le bouton "Fusionner" est enfonc√© et toutes les modifications apparaissent sur l'air du blog de combat apr√®s une br√®ve p√©riode de temps √©vidente. </p><br><a name="id5"></a><h2>  Refonte, premi√®re approche </h2><br><p>  Plan de travail de refonte du blog: </p><br><ol><li>  Mise en page d'un prototype statique pour les mises en page de conception de toutes les pages; </li><li>  Transformer ("√©tirer") la mise en page en th√®me WordPress. </li></ol><br><p>  Disposition - une √©tape distincte du travail.  Pour un travail pratique avec les styles (CSS), le balisage et JS, le projet a utilis√© un ensemble de plugins et de modules, qui est assembl√© via les t√¢ches Gulp d√©crites dans le g√©n√©rateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SPT</a> (Start Project Template). </p><br><p>  Les mots cl√©s utilis√©s dans le collecteur du sujet de blog statique sont: HTML, CSS, JS, Babel, Gulp, PostCSS, SCSS, Nunjucks. </p><br><p>  Une fois la mise en page termin√©e, la structure √©tait la suivante ( <em>seuls les r√©pertoires de premier niveau sont indiqu√©s</em> ): </p><br><blockquote><pre>  ‚îú‚îÄ‚îÄ design # Design, mises en page et tout
 ‚îú‚îÄ‚îÄ app / # Sources de projet: modules s√©par√©s
 ‚îú‚îÄ‚îÄ dist / # La version assembl√©e du projet (fichiers html) et toutes les statiques
 ‚îú‚îÄ‚îÄ gulpfile.js / # Config Gulp.js
 ‚îî‚îÄ‚îÄ package.json # Fichier de configuration du collecteur: packages, scripts </pre></blockquote><br><p>  Chaque √©l√©ment s√©mantique visuel individuel sur la page, par exemple, une carte postale ( <code>/components/article_card/</code> ), √©tait un dossier dans lequel il se trouvait: </p><br><p>  - fichier de balisage ( <code>article_card.html</code> ), </p><br><p>  - fichier de styles ( <code>article_card.scss</code> ), </p><br><p>  - Fichier JS ( <code>article_card.js</code> ). </p><br><p>  Et chaque page a √©t√© assembl√©e √† partir de ces blocs de composants s√©par√©s.  Les blocs sont pratiques √† manipuler et les modifications n'affectent pas les √©l√©ments voisins. </p><br><p>  √Ä la sortie, le collecteur a cr√©√© le dossier <code>dist</code> , qui contenait des fichiers html pr√™ts √† l'emploi de pages √† visualiser dans le navigateur au stade de l'√©dition et de la coordination, ainsi qu'un fichier de style, tous les th√®mes et deux fichiers JS: un fichier ( <code>app.js</code> ) d√©crivait la logique et le comportement site, le second ( <code>vendor.js</code> ) contenait toutes les biblioth√®ques utilis√©es pour le site (jQuery, fotorama, magnific-popup et autres). </p><br><p>  Ensuite, vous devez transformer tout cela en un th√®me WordPress et r√©fl√©chir √† la structure du fichier.  Afin que vous puissiez facilement travailler avec une mise en page statique, et √† c√¥t√© de lui, un th√®me WP. </p><br><p>  Liste des mises en page pr√©par√©es par le concepteur.  Ils sont identiques aux fichiers de th√®me du blog WordPress: </p><br><ul><li>  Page d'accueil (fichier <code>home.php</code> ). </li><li>  <code>single.php</code> / page de publication ( <code>single.php</code> ). </li><li>  Vue d'une seule page de texte ( <code>page.php</code> ). </li><li>  La page d'abonnement √† la newsletter ( <code>subscribe.php</code> ). </li><li>  Erreur 404 ( <code>404.php</code> ). </li><li>  Page de balise s√©par√©e ( <code>tag.php</code> ). </li><li>  Page de cat√©gorie distincte ( <code>category.php</code> ). </li><li>  Recherche et r√©sultats de recherche ( <code>search.php</code> ). </li></ul><br><p>  Un flux de travail avec cette approche et la s√©paration de la version statique et de la version WordPress du th√®me est le suivant: si vous devez corriger quelque chose dans la partie visuelle - les modifications sont apport√©es dans la version statique et apr√®s le test sont transf√©r√©es vers le th√®me.  Si des modifications sont n√©cessaires dans une partie non visuelle, seuls les fichiers de th√®me WP sont modifi√©s. </p><br><p>  Le dossier du th√®me du blog est <code>bsp</code> .  Il est situ√© le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">long du chemin d'acc√®s dans le dossier avec les sujets du</a> blog lui-m√™me: </p><br><blockquote><pre>  ‚îú‚îÄ‚îÄ wp-content / # Fichiers de site WordPress personnalis√©s
 ‚îÇ ‚îú‚îÄ‚îÄ th√®mes / # Th√®mes du site
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ app / # Sources d'un th√®me statique
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ gulpfile.js / # T√¢ches Gulp pour l'assemblage
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ dist / # Cr√©er un sujet statique
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ actifs / # Ressources: JS, CSS et graphiques 
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Th√®me du blog bsp / # WP-PromoPult
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ actifs / # Ressources: JS, CSS et graphiques, copie depuis `/ dist /`
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ home.php # La page principale du blog et d'autres fichiers √† la racine du sujet </pre></blockquote><br><p>  La place du th√®me wordpress est √©vidente et pr√©d√©termin√©e par la structure des fichiers de WordPress lui-m√™me. </p><br><blockquote><p>  Il n'y a pas d'autres sujets dans le r√©pertoire des th√®mes - tout le standard a √©t√© supprim√©.  Il existe un mythe sur l'augmentation de la productivit√© de cette mani√®re, mais nous ne l'avons pas remarqu√©.  Cela se fait plus pour l'ordre dans le code.  Pas besoin de stocker ce qui n'est pas utilis√© et ne sera certainement pas utilis√©. </p></blockquote><br><p>  Tous les plugins WP utilis√©s sont √©galement en .git.  Sur notre site, ce sont les plans de site XML XML, RSS pour Yandex Turbo, RusToLat et WP-PostViews. </p><br><p>  Le prototype statique et compil√© des pages de blog et des fichiers source a √©t√© d√©plac√© vers le r√©pertoire des th√®mes du blog: afin d'interagir de mani√®re pratique avec la partie logique du mod√®le et avec tout ce qui est responsable de l'apparence et du comportement des √©l√©ments sur la page. </p><br><p>  Une version statique de l'assembly du projet - avec la source et toutes les d√©pendances lors de la premi√®re tentative d'organisation de la structure - a √©t√© plac√©e dans le r√©pertoire des th√®mes. </p><br><p>  Autrement dit, √† c√¥t√© du th√®me <code>bsp</code> principal, le r√©pertoire <code>/app</code> √©t√© ajout√©, dans lequel se trouvent le code source de la disposition du th√®me et le gulp-collector.  Mais dans cette version, il y a eu un moment difficile: les fichiers statiques ont √©t√© g√©n√©r√©s dans un r√©pertoire s√©par√©, et pour que les modifications soient dans le th√®me WP, il √©tait n√©cessaire de copier les fichiers de style statique et les scripts dans le dossier d' <code>assets</code> √† l'int√©rieur du th√®me. </p><br><a name="id6"></a><h2>  Deuxi√®me approche: une nouvelle version de la structure </h2><br><br><p>  Au cours des premi√®res semaines, cela a √©t√© d√©cid√© par un simple script de console qui copiait les fichiers collect√©s d'un th√®me statique vers un th√®me WP.  Une action excessive entra√Æne des erreurs.  Par cons√©quent, l'option consistait uniquement √† corriger la structure. </p><br><p>  Nous avons trois r√©pertoires importants (depuis la racine): </p><br><ol><li>  Th√®me WP: <code>/wp-content/themes/bsp</code> </li><li>  Sources d'un th√®me statique: <code>/app</code> </li><li>  Sujet statique collect√©: <code>/dist</code> </li></ol><br><p>  Et √† l'int√©rieur, il y a des <code>assets</code> avec des fichiers de styles, des graphiques et JS </p><br><p>  Vous devez tout organiser pour que les fichiers de styles et de scripts statiques soient collect√©s dans le dossier souhait√© ( <code>/wp-content/themes/bsp/assets</code> ). </p><br><p>  La nouvelle version de la structure √©tait la suivante: </p><br><blockquote><pre>  ‚îú‚îÄ‚îÄ gulpfile.js / # T√¢ches Gulp pour l'assemblage
 ‚îú‚îÄ‚îÄ wp-content / # Fichiers de site WordPress personnalis√©s
 ‚îÇ ‚îú‚îÄ‚îÄ plugins / # WP-plugins
 ‚îÇ ‚îú‚îÄ‚îÄ th√®mes / # Th√®mes du site
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bsp / # PromoPult Rubrique du blog
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ app / # Sources d'un sujet statique
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ actifs / # Ressources: JS, CSS et graphiques (g√©n√©ration automatique)
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ home.php # La page principale du blog et d'autres fichiers √† la racine du sujet
 ‚îú‚îÄ‚îÄ fichiers wp-admin / # WP pour le panneau d'administration
 ‚îú‚îÄ‚îÄ wp-includes / # WP-files du syst√®me </pre></blockquote><br><p>  √Ä la racine de l'ensemble du projet se trouvent des t√¢ches de gulp - et sont ex√©cut√©es √† partir de la racine.  La configuration de gulp-task d√©crit la structure selon laquelle les fichiers statiques sont collect√©s du r√©pertoire <code>wp-content/themes/bsp/app</code> vers <code>wp-content/themes/bsp/assets</code> sans aucune action suppl√©mentaire telle que la copie, etc. </p><br><p>  Les fichiers de th√®me WP restent inchang√©s et le travail se d√©roule selon l'ancien sc√©nario: modifications en statique ‚Üí transfert vers les fichiers WP.  Les statiques CSS et JS sont g√©n√©r√©es imm√©diatement dans le dossier du th√®me et tout fonctionne. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ol/o8/ng/olo8ng_m6qpok93yhphs56hnesm.png" alt="Exemple MR pour le blog PromoPult"></div><br><br><p>  Tout cela concernait le processus de travail.  Maintenant, comment le blog est organis√©. </p><br><a name="id7"></a><h2>  Blog PromoPult: Comment √ßa marche </h2><br><p>  La principale force du blog est l'√©quipe.  √âditeur, auteurs, concepteurs de mise en page. </p><br><p>  La grande t√¢che consiste √† rendre le travail avec le contenu du blog pratique dans la zone d'administration.  Et compte tenu du fait que le th√®me de notre blog a √©t√© cr√©√© sp√©cifiquement pour les t√¢ches de contenu et les demandes √©ditoriales, le panneau d'administration a √©t√© modifi√© en cons√©quence. </p><br><a name="id8"></a><h3>  Liste de contr√¥le avant publication </h3><br><p>  Tout travail est important √† contr√¥ler.  La mise en page de l'article est un processus standardis√© et formalis√©, qui peut √™tre facilement pr√©sent√© sous la forme d'une liste de contr√¥le. </p><br><p>  Les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gars ont</a> vu l'id√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'EmailSoldiers</a> .  Nous avons d√©cid√© de l'appliquer √† la maison. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/so/vz/dgsovzoervieowv432hrwobhdsy.png" alt="Liste de v√©rification des articles de blog PromoPult"></div><br><br><p>  Si aucun √©l√©ment n'est coch√©, le syst√®me vous avertira avant la publication. </p><br><p>  En cliquant sur les liens, les liens soulign√©s dans l'√©l√©ment de liste - s√©lectionnez un √©l√©ment sp√©cifique. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9t/-e/qp/9t-eqpm2rmrrih17jfmkcdb8bfi.png" alt="Param√®tres de publication suppl√©mentaires dans le panneau d'administration"></div><br><br><p>  La liste de contr√¥le est compil√©e dans le m√™me ordre que les param√®tres de publication suppl√©mentaires dans le panneau d'administration. </p><br><a name="id9"></a><h3>  Param√®tres des articles de blog </h3><br><p>  √âtroitement li√© √† la liste de contr√¥le des publications d√©crite ci-dessus. </p><br><p>  Lors du d√©veloppement du sujet, j'ai essay√© de ne pas utiliser de plugins, mais de faire une solution simple et facile pour les t√¢ches du sujet.  Faits saillants: </p><br><ul><li>  Descriptions des balises META SEO. </li><li>  Descriptions des balises OpenGraph qui utilisent les r√©seaux sociaux pour partager du mat√©riel et former de jolies fiches d'articles. </li><li>  Travail pratique avec des images de couverture pour les messages.  Une image est requise - elle est ajout√©e √† la carte postale dans la vignette de publication, qui est affich√©e sur la page principale et sur la page d'en-t√™te ou de balise. </li><li>  Param√®tres de th√®me suppl√©mentaires: une publication peut √™tre avec ou sans couverture, il y a un court texte d'annonce que nous affichons dans l'en-t√™te avec une couverture, et il est √©galement utilis√© dans la description de l'article dans la liste de diffusion Digest. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7_/j4/zu/7_j4zuiopxxg4qahpvu9_j3watk.png" alt="√âcran avec la section des param√®tres de publication de blog PromoPult"></div><br><br><p>  La section des param√®tres de publication est impl√©ment√©e via des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©ta-bo√Ætes et des champs personnalis√©s</a> dans WordPress. </p><br><p>  Gr√¢ce √† la m√©ta-bo√Æte, la liste de contr√¥le de publication a √©galement √©t√© ajout√©e. </p><br><p>  Dans les mod√®les, travailler avec des champs est simple: si le champ n'est pas vide et rempli, nous obtenons la valeur et la montrons.  Par exemple, voici comment la r√©action de blocage au message est affich√©e: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (get_post_meta($post-&gt;ID, <span class="hljs-string"><span class="hljs-string">'postreaction'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)) { <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">article_reaction</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">reaction</span></span></span><span class="hljs-class">"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">echo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get_post_meta</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">post</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ID</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">postreaction</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class">); ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;&lt;!-- /.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">article_reaction</span></span></span><span class="hljs-class"> --&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> } ?&gt;</span></span></code> </pre> <br><p>  Un exemple de sortie de r√©action sur une carte postale: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/lv/qq/wglvqqicz681nx0m0yrgv8lzbhy.png" alt="Conclusion de la r√©action sur une carte postale"></div><br><a name="id10"></a><h3>  De jolies petites choses </h3><br><p>  Il y a de belles petites choses que peut-√™tre personne ne voit.  Mais si quelqu'un a remarqu√© - bien. </p><br><p>  Par exemple, les <strong>dates de publication d'un</strong> poste sur cartes et dans un poste s√©par√© dans notre alphabet cyrillique et savoir s'incliner.  Pour une raison quelconque, ce n'est pas dans la bo√Æte WordPress.  Si la date de publication est dans l'ann√©e en cours, l'ann√©e ne s'affiche pas avec nous, si l'ann√©e diff√®re de l'ann√©e en cours, la date est affich√©e avec l'ann√©e de publication. </p><br><p>  <strong>Compteur de commentaires.</strong>  Ils ont longtemps soutenu que ¬´0 commentaire¬ª ou ¬´aucun commentaire¬ª est tr√®s d√©routant.  La solution est tr√®s simple: ne pas afficher du tout le compteur de commentaires s'il y a moins d'un commentaire. </p><br><p>  En g√©n√©ral, nous travaillons s√©par√©ment sur un syst√®me de commentaires et aimerions en parler dans un grand post s√©par√©.  Nous cr√©ons un syst√®me de commentaires simple et pratique avec une simple autorisation via les r√©seaux sociaux. </p><br><p>  <strong>Propres go√ªts:</strong> commenter ou partager des liens dans les r√©seaux sociaux est une longue affaire par le taux de consommation de contenu, mais cliquez sur ¬´J'aime¬ª et dites clairement que l'article est cool - simple et rapide.  Nous avons fait nos go√ªts simples et mis le compteur sur la carte postale.  Et les go√ªts arrivent assez rapidement.  Et comme ils sont en bas de l'article, c'est aussi un signal que le texte a √©t√© lu. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2n/cn/mr/2ncnmrkkdwdlru1tsmetmuqvura.png" alt="Bouton J'aime sur le blog PromoPult"></div><br><br><p>  Ils ont cr√©√© un <strong>th√®me sombre</strong> pour leur blog - maintenant c'est √† la mode.  Compte tenu de la structure modulaire (en fait, le site est un ensemble de blocs qui sont en quelque sorte combin√©s entre eux) et de l'organisation des styles, cela s'est av√©r√© assez rapide. </p><br><a name="id11"></a><h3>  A propos d'une technique int√©ressante </h3><br><p>  Il y a une <strong>minification du code de</strong> balisage, CSS et JS dans le sujet.  CSS et JS sont compress√©s via des t√¢ches de gulp dans le collecteur de statiques, mais la minification du balisage se fait via le hook WordPress <code>WP_HTML_Compression</code> . </p><br><p>  Et dans les commentaires dans le balisage, nous avons ajout√© un code promotionnel pour ceux qui sont int√©ress√©s par la fa√ßon dont le site est organis√© de l'int√©rieur et qui vont d'abord regarder le code source: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ro/o_/s2/roo_s2bjblolfsrief4wedscr2y.png" alt="Code source du blog PromoPult"></div><br><br><p>  <strong>Mise en cache CSS et JS.</strong>  Pour mettre en cache les styles et les fichiers de script, mais toujours pertinents, si nous refaisons quelque chose, nous utilisons filemtime ().  Beaucoup dans ce cas utilisent <code>?&lt;?php echo time(); ?&gt;</code>  <code>?&lt;?php echo time(); ?&gt;</code> .  Mais cette option t√©l√©charge le fichier et fait une demande √† chaque appel. </p><br><p>  Mieux vaut utiliser une telle astuce: </p><br><pre> <code class="php hljs">&lt;link rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text/css"</span></span> href=<span class="hljs-string"><span class="hljs-string">"&lt;?php echo get_template_directory_uri(); ?&gt;/assets/styles/style.css?t=&lt;?php echo filemtime(get_theme_file_path().'/assets/styles/style.css'); ?&gt;"</span></span> /&gt;</code> </pre> <br><p>  Dans ce cas, les fichiers seront t√©l√©charg√©s s'ils ont √©t√© modifi√©s et la date de modification du fichier sera ajout√©e au param√®tre de demande. </p><br><a name="id12"></a><h2>  Quels plugins nous utilisons </h2><br><p>  Malgr√© la possibilit√© et le d√©sir dans certains cas de s'en sortir avec votre d√©cision, nous utilisons toujours des plugins.  Notre liste est la suivante: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Sitemaps XML</a> - pour g√©n√©rer un plan du site XML pour les robots; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RSS pour Yandex Turbo</a> - pages turbo pour Yandex; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RusToLat</a> - translitt√©ration de l'URL des caract√®res russes en anglais; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WP-PostViews</a> - compte les vues des mat√©riaux; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âditeur classique</a> - inclut l'√©diteur WordPress classique au lieu du nouveau bloc Gutenberg; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La limitation des tentatives d'autorisation</a> est pour des raisons de s√©curit√©: avec plusieurs tentatives de connexion erron√©es, nous en interdisons une entrante pour une p√©riode de temps personnalis√©e; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AMP</a> - Pages AMP pour Google. </li></ul><br><a name="id13"></a><h2>  Conseils de conclusion pour ceux qui travaillent sur le blog d'une entreprise </h2><br><ul><li>  Je vous conseille au d√©but des travaux sur le projet de penser imm√©diatement √† la mise √† l'√©chelle. </li><li>  Assurez-vous d'utiliser <code>.git</code> dans votre travail.  Pour 2019, bien s√ªr, des conseils √©tranges, mais ces conseils peuvent sauver quelqu'un des cheveux gris et r√©primander en cas de probl√®me. </li><li>  Il est pr√©f√©rable de diviser le d√©veloppement et de travailler sur un th√®me WordPress en deux √©tapes: d'abord, cr√©er quelque chose de statique, et d√©j√† fait ¬´tirer¬ª quelque chose comme un th√®me WordPress. </li><li>  S'il y a une opportunit√© - temps, √©quipe et compr√©hension des raisons pour lesquelles vous avez besoin de tout cela - faites-le vous-m√™me, sans utiliser d'options pr√™tes √† l'emploi.  Gagner dans l'ordre et comprendre comment tout fonctionne.  Vous ne produirez pas de b√©quilles. </li><li>  Utilisez des crochets et des fonctionnalit√©s WordPress standard si votre blog est construit dessus.  La personnalisation et la cr√©ation d'une solution pratique sont rapides et faciles. </li><li>  Rendez-le pratique pour l'utilisateur et les √©diteurs. </li><li>  N'oubliez pas les r√©seaux sociaux et la micro-mise en page. </li><li>  N'oubliez pas les versions mobiles. </li><li>  N'oubliez pas les mises √† jour r√©guli√®res des plugins et des syst√®mes. </li><li>  S√©lectionnez uniquement des plugins √©prouv√©s. </li></ul><br><p>  Le travail sur le blog continue - restez avec nous. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457402/">https://habr.com/ru/post/fr457402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457390/index.html">Madagascar - √Æle des contrastes</a></li>
<li><a href="../fr457392/index.html">√âconomies sur le d√©veloppement multiplateforme mobile: √©tude de cas Skyeng</a></li>
<li><a href="../fr457396/index.html">D√©verrouillage automatique du conteneur racine LUKS apr√®s un d√©marrage √† chaud</a></li>
<li><a href="../fr457398/index.html">Mais je fais des conneries? Pourquoi les d√©veloppeurs se tournent vers gemba</a></li>
<li><a href="../fr457400/index.html">Le nombre de victimes de catastrophes nucl√©aires comme Tchernobyl est consid√©rablement exag√©r√© pour le drame</a></li>
<li><a href="../fr457404/index.html">Nouvelles du monde OpenStreetMap n ¬∞ 465 (06/11/2019 - 06/16/2019)</a></li>
<li><a href="../fr457406/index.html">Combien gagnent les dipl√¥m√©s de diverses universit√©s russes</a></li>
<li><a href="../fr457408/index.html">Bienvenue √† DINS Java EVENING le 26 juin</a></li>
<li><a href="../fr457410/index.html">Fondation Acronis: des √©coles sont d√©j√† construites dans 8 pays. Es-tu avec nous</a></li>
<li><a href="../fr457412/index.html">Banni√®res de cookies: comment v√©rifier rapidement la conformit√© au RGPD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>