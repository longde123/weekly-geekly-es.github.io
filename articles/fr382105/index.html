<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💳 🐳 👩‍🍳 L'IoT pour un sou: un guide pratique. Partie 1, matériel 👨🏿‍🚀 🥪 👨‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut les Geektimes! 
 
 Nous présentons une série d'articles dans lesquels nous examinerons comment mettre en œuvre un dispositif IoT peu coûteux ave...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'IoT pour un sou: un guide pratique. Partie 1, matériel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/382105/"><div style="text-align:center;"><img src="https://habrastorage.org/files/39f/d3c/c48/39fd3cc482a34653b31964014de42c79.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salut les Geektimes! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous présentons une série d'articles dans lesquels nous examinerons comment mettre en œuvre un dispositif IoT peu coûteux avec un énorme potentiel à partir d'un nuage à partir de zéro et sans soudure. Comme base, nous prenons la puce "propre" ESP8266, dont nous avons récemment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parlé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous utilisons le dernier firmware DeviceHive et écrivons une application Web simple pour accéder au serveur cloud. Nous allons connecter un simple appareil à la puce électronique, qui peut être contrôlé en quelques clics dans le navigateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le premier article de la série, à partir duquel nous apprenons de quel type d'équipement nous avons besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus récemment, la première version de la première version du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firmware DeviceHive pour ESP8266 a eu lieu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le but de nos articles est d'aider tous ceux qui souhaitent implémenter leur propre solution IoT en utilisant DeviceHive de manière aussi économique, rapide et sans difficultés inutiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'avons besoin que de cinq choses:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte avec ESP8266 soudé;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB -&gt; adaptateur UART;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source de courant;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fils</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'appareil lui-même, que nous voulons faire des amis avec le cloud.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le coût total des quatre premiers points ne dépasse pas 5 $. Quel appareil choisir pour les expériences - décidez par vous-même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons chaque élément plus en détail.</font></font><br>
<a name="habracut"></a><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseil avec ESP8266</font></font></b></h5><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/ec5/ada/f8b/ec5adaf8be9345a6a2219de0d29a174d.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des modules disponibles sur le marché avec ESP8266 ne sont qu'une carte sur laquelle se trouve l'ESP8266 lui-même, une mémoire flash SPI 25Q40 512 Ko (ESP n'a que 64 kilo-octets de mémoire pour le chargeur de démarrage à bord) et un petit nombre d'éléments discrets. Les différences s'avèrent souvent exclusivement visuelles, bien qu'il existe également des modules spécialisés avec alimentation par batterie et diverses modifications. Ils sont plus chers, mais le sens reste inchangé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Séparément, on note le module ESP-201 (en haut sur la photo). Il est intéressant, tout d'abord, car il ne nécessite pas de soudure, et le nombre maximum de broches ESP8266 est connecté à un connecteur externe, ce qui peut être très utile dans les expériences. Plus loin pour la démonstration, nous utiliserons ce module, cependant, vous pouvez prendre n'importe quels analogues. Les différences ne concerneront que le câblage des conclusions.</font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptateur USB -&gt; UART</font></font></b></h5><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/d70/f83/7de/d70f837de45d4e0a94d0113ce8263da9.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la reprogrammation, l'ESP8266 utilise l'interface UART. </font><font style="vertical-align: inherit;">Il s'agit d'un port série ordinaire avec un niveau logique de 3,3 volts, c'est-à-dire un simple port COM avec un niveau électrique différent. </font><font style="vertical-align: inherit;">De tels adaptateurs sont cachés dans de nombreux appareils, c'est sûr que vous les avez utilisés plus d'une fois, sans même le savoir. </font><font style="vertical-align: inherit;">Dans le passé, de tels adaptateurs étaient utilisés, par exemple, dans les câbles téléphoniques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les adaptateurs sur CP2102, PL2303, CH431, FT232 et certains autres sont les plus courants. </font><font style="vertical-align: inherit;">L'un des éléments suivants nous conviendra. </font><font style="vertical-align: inherit;">Avec ce dernier, cependant, cela vaut la peine d'être </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prudent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les moindres problèmes avec les pilotes pour Windows et OS X se trouvent sur le CP2102. </font><font style="vertical-align: inherit;">Les utilisateurs de Linux n'ont pas à s'inquiéter du tout - toutes les puces sont prises en charge nativement par le noyau.</font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source de courant</font></font></b></h5><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/d34/005/632/d3400563271249a4903b33713c720d93.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ESP8266 a besoin d'une alimentation avec une tension de sortie de 3 à 3,6 volts. </font><font style="vertical-align: inherit;">Il peut s'agir d'une carte réseau 3,3 volts ou d'une source descendante. </font><font style="vertical-align: inherit;">En période d'inclusion et d'utilisation active, l'ESP8266 peut consommer jusqu'à 300 milliampères en impulsions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certains adaptateurs USB -&gt; UART ont une sortie de 3,3 volts du stabilisateur interne. </font><font style="vertical-align: inherit;">Le courant sortant est extrêmement faible, donc une source d'alimentation supplémentaire est une nécessité nécessaire. </font><font style="vertical-align: inherit;">Lorsqu'il est alimenté par USB, une source sur la puce AMS1117-3.3 peut être une bonne solution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la démonstration, nous utilisons la source montrée sur la photo, car elle est équipée de nombreux terminaux pour les connexions.</font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fils</font></font></b></h5><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/553/1db/4ef/5531db4efcdc470d8844ead9287ce319.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez simplement prendre et souder les cartes, mais pour seulement un dollar, vous pouvez acheter une boucle de câble avec des connecteurs soudés pour connecter les modules. </font><font style="vertical-align: inherit;">Dans nos modules, il n'y a que des fils de type «mâle», nous avons donc besoin de fils avec des connecteurs femelles. </font><font style="vertical-align: inherit;">Ces boucles peuvent être facilement divisées à la main en boucles avec moins de fils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le prototypage - juste un rêve!</font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'appareil que nous voulons connecter</font></font></b></h5><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a déjà de la place pour l'imagination. Les appareils pouvant être connectés au cloud sont mis à la terre. Cependant, il convient d'envisager la possibilité d'une connexion électrique. À n'importe quelle broche du microcircuit, il est impossible d'appliquer une tension dépassant celle à partir de laquelle le microcircuit lui-même est alimenté. Le courant de charge maximal autorisé par broche GPIO est de 12 milliampères. Il semble que les indicateurs soient plutôt modestes, mais en fait ce sont des caractéristiques standard pour le microcontrôleur. Pour vous connecter avec des charges lourdes, vous pouvez utiliser des MOSFET de puissance, des thyristors, des relais statiques et d'autres solutions de circuits, dont la prise en compte dépasse le cadre de cet article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous considérerons le relais mécanique le plus simple. Sur la plupart des parquets, vous pouvez trouver des modules prêts à l'emploi avec des relais soudés.</font></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/e2d/a3a/e1c/e2da3ae1ce0b47a5a74c1180a3e151b8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce qu'un module? Il s'agit d'un relais ordinaire avec un préamplificateur soudé sur un optocoupleur ou un transistor. Un relais est un groupe de contacts qui se ferment et s'ouvrent mécaniquement à l'aide d'un électroaimant situé à l'intérieur. En d'autres termes, les contacts sont capables de couper ou de connecter le circuit électrique lorsqu'une petite tension est appliquée à l'électro-aimant de l'extérieur. Sur l'enroulement de l'électro-aimant, le courant est généralement obtenu dans la région de 10 à 50 milliampères, il est donc impossible de le connecter directement au microcontrôleur. Surtout pour cela, un petit préamplificateur pour le relais est soudé au module, qui peut être directement connecté au microcontrôleur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une colonne avec des borniers est affichée à gauche, à laquelle une charge sérieuse peut déjà être connectée. Le relais montré sur la photo peut supporter 250 volts et 10 ampères.</font></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/e07/c1f/bed/e07c1fbedd154a5890a0b8fe53d3509e.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la gauche de la photo, vous pouvez voir le bornier. Ces trois sorties sont un groupe commun de contacts: un normalement fermé, un normalement ouvert et un commun. Lorsqu'une unité logique apparaît à l'entrée du module, le relais transfère la sortie commune à un autre contact. De cette façon, vous pouvez basculer, ouvrir ou connecter n'importe quoi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour démontrer le fonctionnement du firmware, nous utilisons le module laser suivant:</font></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/c69/af6/9ba/c69af69bab18424a921e75c41edc431c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module nécessite une tension de 5 volts et consomme environ 90 milliampères. </font><font style="vertical-align: inherit;">Pour le connecter, nous avons besoin d'un relais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'oubliez pas: au lieu de ce module, nous pouvons utiliser n'importe quel autre appareil, que ce soit une ampoule dans votre chambre ou un puissant projecteur (qui en soi n'est qu'une énorme lampe de poche consommant des kilowatts d'électricité). </font><font style="vertical-align: inherit;">Il suffit de prendre en compte la puissance de l'appareil lors du choix d'un relais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Divers capteurs et capteurs peuvent également être connectés à l'ESP8266, car ses sorties (comme les autres microcontrôleurs) peuvent fonctionner à la fois en entrée et en sortie. </font><font style="vertical-align: inherit;">De plus, l'ESP8266 possède une entrée analogique qui peut être utilisée pour transférer les signaux analogiques réels. </font><font style="vertical-align: inherit;">Mais cela, peut-être, nous consacrerons un article séparé. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'article suivant, nous dirons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment obtenir et configurer le serveur DeviceHive; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comment flasher et configurer ESP8266 avec le firmware de DeviceHive.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il n'y a rien de compliqué ici. </font><font style="vertical-align: inherit;">Une lecture sophistiquée peut déjà prendre notre micrologiciel et essayer de l'exécuter vous-même. </font><font style="vertical-align: inherit;">Le code source et l'image compilée peuvent être trouvés </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jusqu'à présent, seule une première version publique est disponible, dont les travaux sont en cours. </font><font style="vertical-align: inherit;">Mais vous pouvez construire des appareils de bricolage maintenant! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publié par Nikolai Khabarov, développeur principal embarqué</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr382105/">https://habr.com/ru/post/fr382105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr382095/index.html">Présentation du scanner 3D russe RangeVision Advanced</a></li>
<li><a href="../fr382097/index.html">Phare et interrupteur de lampe pour une voiture avec surveillance de la batterie et thermomètres</a></li>
<li><a href="../fr382099/index.html">Gogo-S: casque sans fil étanche pour les athlètes</a></li>
<li><a href="../fr382101/index.html">Comment dire à ma maman s'il va pleuvoir dans le pays?</a></li>
<li><a href="../fr382103/index.html">Une étrange brume est visible au-dessus des points lumineux de Cérès</a></li>
<li><a href="../fr382107/index.html">Google Maps affichera désormais tous les lieux où vous vous trouviez</a></li>
<li><a href="../fr382109/index.html">Intel IoT Roadshow ou réalité virtuelle dans le monde réel</a></li>
<li><a href="../fr382111/index.html">Le vainqueur du Championnat de France de Scrabble ne parle pas français</a></li>
<li><a href="../fr382113/index.html">Visitant REG.RU: Emmett Brown et Marty McFly</a></li>
<li><a href="../fr382115/index.html">Chrysler rappelle environ 1,4 million de voitures</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>