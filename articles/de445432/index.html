<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁‍🗨 🚵🏻 🙏🏿 Unity Package Manager 😴 👩🏼‍⚕️ 🤧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity ist eine Plattform, die es schon lange gibt und die sich ständig weiterentwickelt. Wenn Sie jedoch mit mehreren Projekten gleichzeitig arbeiten,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity Package Manager</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/445432/">  Unity ist eine Plattform, die es schon lange gibt und die sich ständig weiterentwickelt.  Wenn Sie jedoch mit mehreren Projekten gleichzeitig arbeiten, können Sie immer noch Schwierigkeiten haben, gemeinsame Quellen (.cs), Bibliotheken (.dll) und andere Assets (Bilder, Sounds, Modelle, Fertighäuser) zu verwenden.  In diesem Artikel werden wir über unsere Erfahrungen mit einer nativen Lösung für ein solches Problem für Unity sprechen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dh/oi/ua/dhoiua7oixnvqg4vuinca6sylua.jpeg"></div><a name="habracut"></a><br><h3>  Methoden zur Verteilung gemeinsamer Ressourcen </h3><br>  Es gibt mehr als eine Möglichkeit, gemeinsam genutzte Ressourcen für verschiedene Projekte zu verwenden, aber jeder Ansatz hat seine Vor- und Nachteile. <br><br>  <b>1. Vervielfältigung - "Hände" duplizieren Ressourcen zwischen Projekten.</b> <br><br>  Vorteile: <br><br><ul><li>  Geeignet für alle Arten von Ressourcen. </li><li>  Keine Abhängigkeitsprobleme. </li><li>  Kein Problem mit Asset-GUIDs. </li></ul><br>  Nachteile: <br><br><ul><li>  Gigantische Repositories. </li><li>  Keine Versionierung möglich. </li><li>  Die Schwierigkeit, Änderungen an gemeinsam genutzten Ressourcen zu verfolgen. </li><li>  Schwierigkeiten beim Aktualisieren freigegebener Ressourcen. </li></ul><br>  <b>2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Git-Submodule</a> - Verteilung gemeinsam genutzter Ressourcen über externe Submodule.</b> <br><br>  Vorteile: <br><br><ul><li>  Sie können mit Quellcodes arbeiten. </li><li>  Vermögenswerte können verteilt werden. </li><li>  Keine Abhängigkeitsprobleme. </li></ul><br>  Nachteile: <br><br><ul><li>  Git-Kenntnisse erforderlich. </li><li>  Git ist nicht sehr freundlich mit Binärdateien - Sie müssen LFS verbinden. </li><li>  Zugriffskontrolle für Repositorys. </li><li>  Schwierigkeiten beim Up- und Downgrade. </li><li>  Kollisionen von GUIDs sind möglich und es gibt kein eindeutiges Verhalten von Unity, um sie zu lösen. </li></ul><br>  <b>3. NuGet - Verteilung von gemeinsam genutzten Bibliotheken über NuGet-Pakete.</b> <br><br>  Vorteile: <br><br><ul><li>  Bequeme Arbeit mit Projekten, die nicht von Unity abhängig sind. </li><li>  Bequeme Versionierung und Auflösung von Abhängigkeiten. </li></ul><br>  Nachteile: <br><ul><li>  Unity kann nicht sofort mit NuGet-Paketen arbeiten (auf GitHub finden Sie NuGet Package Manager für Unity, mit dem dies behoben wird, aber es gibt einige Nuancen). </li><li>  Schwierigkeiten bei der Verteilung anderer Arten von Vermögenswerten. </li></ul><br>  <b>4. Unity Package Manager - Verteilung gemeinsam genutzter Ressourcen über eine native Lösung für Unity.</b> <br><br>  Vorteile: <br><br><ul><li>  Native Schnittstelle für die Arbeit mit Paketen. </li><li>  Schutz vor dem Überschreiben von .meta-Dateien in Paketen bei GUID-Konflikten. </li><li>  Möglichkeit der Versionierung. </li><li>  Die Fähigkeit, alle Arten von Ressourcen für Unity zu verteilen. </li></ul><br>  Nachteile: <br><br><ul><li>  GUID-Konflikte können weiterhin auftreten. </li><li>  Es ist keine Dokumentation zu implementieren. </li></ul><br>  Das letztere Verfahren hat mehr Vor- als Nachteile.  Aufgrund der fehlenden Dokumentation ist es derzeit jedoch nicht sehr beliebt, weshalb wir uns ausführlich damit befassen werden. <br><br><h3>  Unity Package Manager </h3><br>  Unity Package Manager (im Folgenden: UPM) ist ein Paketverwaltungstool.  Es wurde in Unity 2018.1 hinzugefügt und nur für Pakete verwendet, die von Unity Technologies entwickelt wurden.  Ab Version 2018.3 konnten jedoch benutzerdefinierte Pakete hinzugefügt werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9t/zl/_n/9tzl_nq847ma7etdkyzl_qrq0cs.jpeg"></div><br>  <i>Unity Package Manager-Schnittstelle</i> <br><br>  Pakete fallen nicht in die Projektquellen (Assets-Verzeichnis).  Sie befinden sich in einem separaten Verzeichnis <code>%projectFolder%/Library/PackageCache</code> und wirken sich in keiner Weise auf das Projekt aus. Ihre einzige Erwähnung in den Quellen erfolgt in der Datei <code>packages/manifest.json</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/f4/b-/wef4b-0oo4h1r5n4vlx4wd-yc_q.jpeg"></div><br>  <i>Pakete im Projektdateisystem</i> <br><br><h4>  Paketquellen </h4><br>  UPM kann mehrere Paketquellen verwenden: <br><br>  <b>1. Das Dateisystem.</b> <br><br>  Vorteile: <br><br><ul><li>  Geschwindigkeit der Implementierung. </li><li>  Keine Tools von Drittanbietern erforderlich. </li></ul><br>  Nachteile: <br><br><ul><li>  Die Komplexität der Versionierung. </li><li>  Die Dateifreigabe ist für alle erforderlich, die mit dem Projekt arbeiten. </li></ul><br>  <b>2. Git-Repository.</b> <br><br>  Vorteile: <br><br><ul><li>  Es wird nur ein Git-Repository benötigt. </li></ul><br>  Nachteile: <br><br><ul><li>  Sie können nicht über das UPM-Fenster zwischen Versionen wechseln. </li><li>  Es funktioniert nicht mit allen Git-Repositorys. </li></ul><br>  <b>3. npm Repository.</b> <br><br>  Vorteile: <br><br><ul><li>  Unterstützt die UPM-Funktionalität vollständig und wird zum Verteilen offizieller Unity-Pakete verwendet. </li></ul><br>  Nachteile: <br><br><ul><li>  Derzeit werden alle Zeichenfolgenversionen von Paketen mit Ausnahme von "-preview" ignoriert. </li></ul><br>  Nachfolgend sehen wir uns die Implementierung von UPM + npm an.  Dieses Bundle ist praktisch, da Sie mit jeder Art von Ressourcen arbeiten und Paketversionen verwalten können und außerdem die native UPM-Schnittstelle vollständig unterstützen. <br><br>  Sie können <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verdaccio</a> als npm-Repository verwenden.  Es gibt eine detaillierte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> dafür, und es sind nur ein paar Befehle erforderlich, um es zu starten. <br><br><h4>  Umgebungseinstellung </h4><br>  Zuerst müssen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">node.js</a> installieren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a> <br><br><h4>  Paketerstellung </h4><br>  Um ein Paket zu erstellen, müssen Sie die Datei <code>package.json</code> , die es beschreibt, in dem Verzeichnis mit dem Inhalt dieses Pakets <code>package.json</code> .  Sie müssen Folgendes tun: <br><br><ol><li>  Gehen Sie zu dem Projektverzeichnis, in dem wir ein Paket erstellen möchten. </li><li>  Führen Sie den Befehl <code>npm init</code> und geben Sie im Dialogfeld die erforderlichen Werte ein.  <code>com.plarium.somepackage</code> Sie als Namen den Namen im Format der Reverse-Domain an, z. B. <code>com.plarium.somepackage</code> . </li><li>  Um den Paketnamen bequem anzuzeigen, fügen Sie die Eigenschaft <code>package.json</code> zu <code>package.json</code> und <code>package.json</code> sie aus. </li><li>  Da npm js-orientiert ist, enthält die Datei Eigenschaften, die wir nicht benötigen, und <code>scripts</code> , die Unity nicht verwendet.  Es ist besser, sie zu entfernen, um die Paketbeschreibung nicht zu überladen.  Die Datei sollte ungefähr so ​​aussehen: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"com.plarium.somepackage"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"displayName"</span></span>: <span class="hljs-string"><span class="hljs-string">"Some Package"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Some Package Description"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"keywords"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Unity"</span></span>, <span class="hljs-string"><span class="hljs-string">"UPM"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTHOR"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"UNLICENSED"</span></span> }</code> </pre> <br></li><li>  Öffnen Sie Unity und generieren Sie eine .meta-Datei für package.json (Unity sieht keine Assets ohne .meta-Dateien, Pakete für Unity werden nur zum Lesen geöffnet). </li></ol><br><h4>  Paketversand </h4><br>  Um ein Paket zu senden, müssen Sie den folgenden Befehl ausführen: <code>npm publish --registry *   *</code> . <br><br><h4>  Installieren und Aktualisieren von Paketen über Unity Package Manager </h4><br>  Um einem Unity-Projekt ein Paket hinzuzufügen, benötigen Sie: <br><br><ol><li>  Fügen Sie der Datei <code>manifest.json</code> Paketquelleninformationen hinzu.  <code>scopedRegistries</code> Eigenschaft <code>scopedRegistries</code> und geben Sie die Bereiche und die Quelladresse an, nach denen nach bestimmten Bereichen gesucht werden soll. <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scopedRegistries"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Main"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scopes"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"com.plarium"</span></span> ] } ]</code> </pre></li><li>  Gehen Sie zu Unity und öffnen Sie das Paketmanager-Fenster (die Arbeit mit benutzerdefinierten Paketen unterscheidet sich nicht von der Arbeit mit integrierten Paketen). </li><li>  Wählen Sie Alle Pakete. </li><li>  Suchen Sie das gewünschte Paket und fügen Sie es hinzu. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/hs/w7/zhhsw7qjnfod3dx7b5p1fh0if3y.jpeg"></div><br><h4>  Arbeiten Sie mit Quellen und debuggen Sie </h4><br>  Damit die Quellen eine Verbindung zum Projekt herstellen können, müssen Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Assembly-Definition</a> für das Paket erstellen. <br><br>  Die Verwendung von Paketen schränkt die Debugging-Funktionen nicht ein.  Wenn Sie jedoch mit Paketen in Unity arbeiten, können Sie nicht zur IDE wechseln, indem Sie auf einen Fehler in der Konsole klicken, wenn der Fehler im Paket aufgetreten ist.  Dies liegt an der Tatsache, dass Unity Skripte nicht als separate Dateien ansieht, da sie bei Verwendung der Assembly-Definition in einer Bibliothek gesammelt und mit dem Projekt verbunden werden.  Wenn Sie mit Quellcodes aus einem Projekt arbeiten, können Sie per Klick zur IDE wechseln. <br><br>  Das Skript im Projekt mit dem verbundenen Paket: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cb/g-/0t/cbg-0tgicnsv1h7j8vqdwq4mack.jpeg"></div><br>  Skript aus dem Paket mit einem funktionierenden Haltepunkt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tp/dz/s0/tpdzs0bpqtw3nhwjhqf4c1aqoyq.jpeg"></div><br><h4>  Dringende Patch-Korrekturen </h4><br>  Dem Projekt hinzugefügte Unity-Pakete sind schreibgeschützt, können jedoch im Paket-Cache bearbeitet werden.  Dazu müssen Sie: <br><br><ol><li>  Wechseln Sie zu dem Paket im Paket-Cache. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/63/hy/kq/63hykqpzx_6epumfkfvph3f7w1w.jpeg"></div><br></li><li>  Nehmen Sie die erforderlichen Änderungen vor. </li><li>  Aktualisieren Sie die Version in der Datei <code>package.json</code> . </li><li>  Senden <code>npm publish --registry *   *</code> . </li><li>  Aktualisieren Sie die Paketversion über die UPM-Schnittstelle auf die korrigierte. </li></ol><br><h4>  Paketimportkonflikte </h4><br>  Beim Importieren von Paketen können die folgenden GUID-Konflikte auftreten: <br><br><ol><li>  Paket - Paket.  Wenn beim Importieren eines Pakets festgestellt wird, dass bereits hinzugefügte Pakete Assets mit derselben GUID enthalten, werden Assets mit übereinstimmenden GUIDs aus dem importierten Paket nicht zum Projekt hinzugefügt. </li><li>  Ein Paket ist ein Projekt.  Wenn sich beim Importieren eines Pakets herausstellt, dass das Projekt Assets mit übereinstimmenden GUIDs enthält, werden die Assets aus dem Paket nicht zum Projekt hinzugefügt.  Von ihnen abhängige Assets werden jedoch Assets aus dem Projekt verwenden. </li></ol><br><h4>  Übertragen von Assets aus einem Projekt in ein Paket </h4><br>  Wenn Sie Assets von einem Projekt in ein Paket mit geöffneter Unity übertragen, bleibt die Funktionalität erhalten, und Verknüpfungen in abhängigen Assets verwenden Assets aus dem Paket. <br><br>  <b>Wichtig</b> : Wenn Sie ein Asset aus einem Projekt in ein Paket kopieren, tritt der Konflikt "Paket - Projekt" auf, wie im obigen Abschnitt beschrieben. <br><br><h4>  Mögliche Konfliktlösungen </h4><br><ol><li>  Neuzuweisung von GUIDs nach ihren eigenen Algorithmen beim Importieren aller Assets, um Kollisionen zu vermeiden. </li><li>  Hinzufügen aller Assets zu einem Projekt mit anschließender Aufteilung in Pakete. </li><li>  Erstellung einer Datenbank mit GUIDs aller Assets und Validierung beim Senden von Paketen. </li></ol><br><h3>  Fazit </h3><br>  UPM ist eine neue Lösung für die Verteilung gemeinsam genutzter Ressourcen an Unity, die eine sinnvolle Alternative zu vorhandenen Methoden darstellen kann.  Die im Artikel beschriebenen Empfehlungen ergaben sich aus realen Fällen.  Wir hoffen, Sie finden sie nützlich. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445432/">https://habr.com/ru/post/de445432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445420/index.html">Es gibt 17 Milliarden Computer in der Hirnrinde</a></li>
<li><a href="../de445422/index.html">Welche Programmiersprachen sind am wenigsten sicher?</a></li>
<li><a href="../de445424/index.html">Erfahrung in der Entwicklung des Refund Tool-Dienstes mit einer asynchronen API auf Kafka</a></li>
<li><a href="../de445426/index.html">Optimierung für die PostgreSQL-Serving-Rails-Anwendung</a></li>
<li><a href="../de445428/index.html">Hochwertiges WLAN - die Basis moderner Gastfreundschaft und der Motor des Geschäfts</a></li>
<li><a href="../de445434/index.html">Bester schlechtester Job der Welt: Auf der Suche nach einem Habraautor</a></li>
<li><a href="../de445436/index.html">Umschulung in DevOps - worauf Sie sich vorbereiten müssen</a></li>
<li><a href="../de445438/index.html">Bekanntschaft mit darauf basierenden Lit-Element- und Web-Komponenten</a></li>
<li><a href="../de445440/index.html">Codeüberprüfung: schlechte Tipps für Mitwirkende und Prüfer</a></li>
<li><a href="../de445444/index.html">Hochleistungs-Solarmodul-Update von REC und Trina (Solar)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>