<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèø üëà üßìüèø Sysadmin EDC-Ger√§t: Linux in der Tasche üëÇüèø ü§üüèº ü§∞üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vielleicht hatte jeder Administrator einen Fall, in dem pl√∂tzlich etwas kaputt geht und Sie irgendwo unterwegs sind: Sie fahren mit dem Auto, nehmen e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sysadmin EDC-Ger√§t: Linux in der Tasche</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409945/"> Vielleicht hatte jeder Administrator einen Fall, in dem pl√∂tzlich etwas kaputt geht und Sie irgendwo unterwegs sind: Sie fahren mit dem Auto, nehmen einen Zug oder sitzen banal irgendwo auf einer Parkbank und brechen los und eilen irgendwohin Wunsch ist nicht das geringste.  Und Sie m√ºssen es beheben.  Oder bewerten Sie mindestens die Gr√∂√üe des angekommenen wei√üen Pelztiers. <br><br>  Es ist klar, dass Sie mit einem Smartphone oder Tablet arbeiten k√∂nnen, insbesondere wenn Sie nur √ºber ssh gehen m√ºssen.  Aber in solchen F√§llen, wie f√ºr mich, einen Touchscreen zu benutzen, ist Schmerz und Leid. <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/-j/nd/hd-jndx6jjchvd9ggnpyj-ynvhw.jpeg"></div><br>  Sie k√∂nnen eine externe Tastatur, einen Halter oder einen St√§nder f√ºr das Tablet kaufen, aber ich denke, es ist einfacher, einen vollst√§ndigen Laptop bei sich zu haben.  Die Pl√§tze werden ungef√§hr gleich sein. <br><a name="habracut"></a><br><h2>  Einige Erinnerungen und √úberlegungen </h2><br>  Zu faul zum Lesen, k√∂nnen Sie sofort zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">praktischen Teil √ºbergehen.</a> <br><br>  Zu einer Zeit, als es noch keine Androiden und iPhones gab, benutzte ich f√ºr solche Dinge das ‚ÄûInternet-Tablet‚Äú Nokia N810.  Das Mobilteil hat Abmessungen mit einem modernen Smartphone, verf√ºgt √ºber eine QWERTY-Tastatur und sogar mit vollem Linux an Bord.  Ssh, vnc, rdesktop - ja nein frage!  Au√üerdem habe ich CAS Maxima aktiv verwendet, wenn ich schnell etwas berechnen und das Ergebnis anzeigen musste. <br><br><br> <a href=""><img src="https://habrastorage.org/webt/bd/e7/kx/bde7kxemqv5fuchk9o5aujaokte.jpeg"></a> <br> <a href=""><img src="https://habrastorage.org/webt/so/ya/xr/soyaxrvavdiymhza5xjuv0mhy7q.png"></a> <br><br>  Aber die Zeit verging, Android-Smartphones tauchten auf.  Hier ist es, dachte ich: Fast vollwertiges Linux, gleichzeitig ist es nicht n√∂tig, ein anderes Ger√§t mitzunehmen, um das Internet zu verbreiten.  Ich fing an, das Ger√§t mit QWERTY zu betrachten, das mich durch das gute alte n810 ersetzen w√ºrde, das zu diesem Zeitpunkt ziemlich m√ºde war (Bildschirmkabel, zweimal ausgetauschte Batterie, Tastatur, kaputtes Geh√§use).  Die Wahl fiel auf Motorola Milestone. <br><br>  Hier ist es zum Teil neben meinem guten alten Palm V und N810: <br><br> <a href=""><img src="https://habrastorage.org/webt/hh/vf/bm/hhvfbmnvsxhy_2srw11rhwt8r5g.jpeg"></a> <br><br>  Ich muss sagen, dass das Produkt kein Vertrauen rechtfertigte.  Die Tastatur war eine v√∂llige Entt√§uschung.  Nicht einmal wegen des Layouts, sondern wegen der extrem schlechten Verarbeitung: Nach sechs Monaten Gebrauch begann es sich zu peelen und abzuh√§ngen. <br><br>  Der verschl√ºsselte Bootloader f√ºgte dem Sarg seine N√§gel hinzu: Die Unf√§higkeit, den benutzerdefinierten Kern mit allen Konsequenzen zu verwenden, f√ºhrte dazu, dass die Debian-Chroot die Batterie aufgrund der Besonderheiten des Netzteils wie an sich a√ü, aber das Produkt l√∂ste irgendwie die ihm zugewiesenen Aufgaben. <br><br>  Zumindest wurde es nach Ablauf der vom Hersteller festgelegten geplanten Veralterungsperiode weiter verwendet, als mehrere neuere Modelle ver√∂ffentlicht wurden (unterschiedlich, m√∂glicherweise mit einem leicht ge√§nderten Layout und viel RAM), und es war wild fehlerhaft und langsam. <br><br>  Okay, da das SSH-Terminal ausf√§llt und das Smartphone (nat√ºrlich verschlingt es eine bestimmte Menge Ihrer Nervenzellen).  Es gibt jedoch F√§lle, in denen Sie sich mit einem Konsolenkabel an einem St√ºck Eisen festhalten oder tcpdump mit einem nicht reagierenden IP-Ger√§t entfernen m√ºssen, damit Sie etwas damit tun k√∂nnen. <br><br>  Es ist einfach bezaubernd, wenn eine Person aufgrund des Vorhandenseins eines COM-Anschlusses an der Dockingstation einen kr√§ftigen 17-Zoll-HP-Narren mit einem Dock und einem 1,5-Kilogramm-Netzteil schleppt und dann mit all diesen Dingen an der Trittleiter vor der Theke h√§ngt. <br><br>  Vor kurzem habe ich das 12 "ThinkPad x220 mit usb2com-Adapter verwendet. Aber immer mehr begann ich, den Laptop zu Hause zu lassen, bis eines Tages (wieder)" $ username, alles kaputt! "Und ich nur ein Android-Smartphone dabei hatte. <br><br><h2>  Hier ist es, der Fisch meiner Tr√§ume (in der Tat nein) </h2><br>  Und als ich einmal auf ein Produkt namens GPD Pocket stie√ü.  Ein vollwertiger Laptop im Formfaktor eines Re-Smartphones oder eines untergro√üen Tablets.  7 ", QWERTY-Tastatur, ein anst√§ndiger Spielraum f√ºr Autonomie - √§hm, Sie m√ºssen es nehmen. Ich habe bestellt, erhalten, ausgepackt. <br><br>  Zum Vergleich mit x220 und n810: <br><br> <a href=""><img src="https://habrastorage.org/webt/jg/kj/hq/jgkjhqw3ulrb3i956decqaladlk.jpeg"></a> <br><br>  Ich werde die Eigenschaften derer, die es brauchen, nicht beschreiben - sie werden es im Internet finden, zumal es k√ºrzlich eine interessante Bewertung von girbest hier gab.  Geben Sie einfach den Auspuff lshw und lspci: <br><br>  lshw: <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre><code class="plaintext hljs">:   : Default string (Default string) : Default string : Default string  ‚Ññ: Default string : 64 bits : smbios-3.0 dmi-3.0 vsyscall32 : boot=normal chassis=desktop family=Default string sku=Default string uuid=00020003-0004-0005-0006-000700080009 *-core :   : Default string : AMI Corporation  ID: 0 : Default string  ‚Ññ: Default string : Default string *-firmware : BIOS : American Megatrends Inc.  ID: 0 : 5.11 date: 08/07/2017 : 64KiB capacity: 4032KiB : pci upgrade shadowing cdboot bootselect socketedrom edd int13floppy1200 int13floppy720 int13floppy2880 int5printscreen int14serial int17printer acpi usb biosbootspecification uefi *-memory :    ID: 28 :      : 8GiB *-bank:0 : DIMM DDR3 1066 MHz (0,9 ns) : 00000000 : Hynix Semiconductor  ID: 0  ‚Ññ: 00000000 : A1_DIMM0 : 4GiB : 8 bits : 1066MHz (0.9ns) *-bank:1 : DIMM DDR3 1066 MHz (0,9 ns) : 00000000 : Hynix Semiconductor  ID: 1  ‚Ññ: 00000000 : A1_DIMM1 : 4GiB : 8 bits : 1066MHz (0.9ns) *-cache:0 : L1   ID: 32 : CPU Internal L1 : 224KiB capacity: 224KiB : internal write-back : level=1 *-cache:1 : L2   ID: 33 : CPU Internal L2 : 2MiB capacity: 2MiB : internal write-back unified : level=2 *-cpu :  : Intel(R) Atom(TM) x7-Z8750 CPU @ 1.60GHz : Intel Corp.  ID: 34   : cpu@0 : Intel(R) Atom(TM) x7-Z8750 CPU @ 1.60GHz : SOCKET 0 : 889MHz capacity: 2560MHz : 64 bits : 80MHz : x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp constant_tsc arch_perfmon pebs bts rep_good nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf tsc_known_freq pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes rdrand lahf_lm 3dnowprefetch epb pti tpr_shadow vnmi flexpriority ept vpid tsc_adjust smep erms dtherm ida arat cpufreq : cores=4 enabledcores=4 threads=4 *-pci : Host bridge : Intel Corporation : Intel Corporation  ID: 100   : pci@0000:00:00.0 : 34 : 32 bits : 33MHz : driver=iosf_mbi_pci : IRQ:0 *-display : VGA compatible controller : Intel Corporation : Intel Corporation  ID: 2   : pci@0000:00:02.0 : 34 : 64 bits : 33MHz : pm msi vga_controller bus_master cap_list rom : driver=i915 latency=0 : IRQ:123 :a0000000-a0ffffff :80000000-9fffffff ioport:f000(=64) :c0000-dffff *-generic:0 : Signal processing controller : Intel Corporation : Intel Corporation  ID: b   : pci@0000:00:0b.0 : 34 : 64 bits : 33MHz : msi pm cap_list : driver=proc_thermal latency=0 : IRQ:129 :a1a3b000-a1a3bfff *-usb : USB controller : Intel Corporation : Intel Corporation  ID: 14   : pci@0000:00:14.0 : 34 : 64 bits : 33MHz : pm msi xhci bus_master cap_list : driver=xhci_hcd latency=0 : IRQ:121 :a1a00000-a1a0ffff *-usbhost:0 : xHCI Host Controller : Linux 4.15.0-rc7-stockmind-gpdpocket xhci-hcd  ID: 0   : usb@1  : usb1 : 4.15 : usb-2.00 : driver=hub slots=7 speed=480Mbit/s *-usb:0 :  : Gaming Keyboard : SINO WEALTH  ID: 2   : usb@1:2 : 1.00 : usb-1.10 : driver=usbhid maxpower=100mA speed=1Mbit/s *-usb:1 :  USB- : BCM2045A0 : Broadcom Corp  ID: 3   : usb@1:3 : 1.12  ‚Ññ: B0F1ECED56A9 : usb-2.00 : driver=btusb maxpower=100mA speed=12Mbit/s *-usbhost:1 : xHCI Host Controller : Linux 4.15.0-rc7-stockmind-gpdpocket xhci-hcd  ID: 1   : usb@2  : usb2 : 4.15 : usb-3.00 : driver=hub slots=6 speed=5000Mbit/s *-generic:1 : Encryption controller : Intel Corporation : Intel Corporation  ID: 1a   : pci@0000:00:1a.0 : 34 : 32 bits : 33MHz : pm msi bus_master cap_list : driver=mei_txe latency=0 : IRQ:130 :a1900000-a19fffff :a1800000-a18fffff *-pci : PCI bridge : Intel Corporation : Intel Corporation  ID: 1c   : pci@0000:00:1c.0 : 34 : 32 bits : 33MHz : pci pciexpress msi pm normal_decode bus_master cap_list : driver=pcieport : IRQ:117 :a1000000-a14fffff *-network :   : BCM4356 802.11ac Wireless Network Adapter : Broadcom Corporation  ID: 0   : pci@0000:01:00.0  : wlp1s0 : 02  ‚Ññ: b0:f1:ec:ed:56:a8 : 64 bits : 33MHz : pm msi pciexpress bus_master cap_list ethernet physical wireless : broadcast=yes driver=brcmfmac driverversion=7.35.180.119 firmware=01-1a5c4016 ip=192.168.1.142 latency=0 multicast=yes wireless=IEEE 802.11 : IRQ:125 :a1400000-a1407fff :a1000000-a13fffff *-isa : ISA bridge : Intel Corporation : Intel Corporation  ID: 1f   : pci@0000:00:1f.0 : 34 : 32 bits : 33MHz : isa bus_master cap_list : driver=lpc_ich latency=0 : IRQ:0</code> </pre> </div></div><br>  lspci: <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">00:00.0 Host bridge: Intel Corporation Device 2280 (rev 34) 00:02.0 VGA compatible controller: Intel Corporation Device 22b0 (rev 34) 00:0b.0 Signal processing controller: Intel Corporation Device 22dc (rev 34) 00:14.0 USB controller: Intel Corporation Device 22b5 (rev 34) 00:1a.0 Encryption controller: Intel Corporation Device 2298 (rev 34) 00:1c.0 PCI bridge: Intel Corporation Device 22c8 (rev 34) 00:1f.0 ISA bridge: Intel Corporation Device 229c (rev 34) 01:00.0 Network controller: Broadcom Corporation BCM4356 802.11ac Wireless Network Adapter (rev 02)</code> </pre></div></div><br>  Die Verarbeitungsqualit√§t ist gut, sie spielt nichts, sie knarrt nicht, sie verbiegt sich nicht.  Das Geh√§use ist aus Aluminium und im Allgemeinen vermittelt das Ger√§t den Eindruck einer Art monolithischen Block.  Das ist ein Plus. <br><br>  Aber es gibt auch genug Minuspunkte.  Gl√§nzender Bildschirm.  Nein, es ist nicht nur gl√§nzend - es ist buchst√§blich ein Spiegel.  Das hei√üt, Sie werden Ihre Reflexion unter Bedingungen einer Beleuchtung ungleich Null beobachten.  Das Kit enthielt eine Schutzfolie, die das Problem jedoch nicht l√∂ste. <br><br>  Die zweite ist die Tastatur.  Die Tatsache, dass sie ist, ist wunderbar. <br><br> <a href=""><img src="https://habrastorage.org/webt/zx/ac/cf/zxaccfpxwmrrsoxazzhah3yffk0.jpeg"></a> <br><br>  Aber wie es umgesetzt wird, ist Scham und Entsetzen.  Der Versuch, unter das Macbook zu hacken, mit diesen gro√üen L√ºcken zwischen den Tasten - nun, warum?  Schlie√ülich scheint die Zielgruppe keine glamour√∂sen K√§tzchen zu sein - sie nehmen nur das n√§chste iPad oder Macbook.  Haben Sie diese ungl√ºcklichen L√ºcken nicht, die Gr√∂√üe der Schl√ºssel k√∂nnte gr√∂√üer gemacht werden. <br><br>  Die Fn-Taste hat eine sehr magere Ebene: Dies sind 2 Tasten zum Einstellen der Helligkeit, F1-F12 und Einf√ºgen.  Warum brauchen wir die oberste Reihe?  Es k√∂nnte als separate Schicht implementiert werden. <br><br>  Vim-Benutzer sind besonders schmerzhaft und leiden unter einem Doppelpunkt in der unteren Reihe neben Strg. <br><br>  Okay, alles ist schlecht, wir werden es behandeln, da es einige M√∂glichkeiten gibt (mehr dazu weiter unten). <br><br>  Oh ja, hier gibt es einen Trackpoint.  Was f√ºr mich als erfahrener ThinkPad-Benutzer meine Seele w√§rmt.  Nur eines aber: Der Trackpoint befindet sich an der falschen Stelle und um ihn zu benutzen, m√ºssen Sie Ihren Daumen beugen.  Das ist leider unheilbar.  Aber f√ºr ein paar zus√§tzliche rote Kappen im Kit nat√ºrlich danke. <br><br>  Trackpoint f√ºr gesunde Personen: <br><img src="https://habrastorage.org/webt/hl/qp/9_/hlqp9_0jr_ergvl5hklnu3js1l4.jpeg"><br><br>  Raucher Trackpoint: <br><img src="https://habrastorage.org/webt/vm/be/dm/vmbedms-h1ze_4cnu9_vpecgtri.jpeg"><br><br><h2>  Installieren und konfigurieren Sie Linux auf GPD Pocket </h2><br>  Es ist klar, dass die "Fenster" und insbesondere die "Fenster 10" nicht das sind, was ich auf diesem Ger√§t brauche, sondern einfach kontraindiziert sind. <br><br>  Aufgrund der Funktionen des Ger√§ts, wie z. B. der Ausrichtung des Bildschirms (zur Seite gedreht), ist es unm√∂glich, Ihren Lieblings-Debian einfach aufzunehmen und zu installieren, ohne mit einem Tamburin zu tanzen. <br><br> <a href=""><img src="https://habrastorage.org/webt/j_/xy/ai/j_xyai5nsa-njzt67cjgkq4joq4.jpeg"></a> <br><br>  Grunds√§tzlich hat die offizielle Website das offizielle Image von Ubuntu LTS 16.04 (was mir eine gute Alternative zu stabilem Debian erscheint), aber nach dem Lesen der Diskussionen im Internet wurde beschlossen, das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GPD Pocket Ubuntu Respin-Projekt zu verwenden</a> <br><br>  Ich betone im Allgemeinen die offensichtliche Sache, dass nur ein auf Ubuntu erstelltes Image f√ºr die Verwendung geeignet ist und das Einspeisen eines Skripts, beispielsweise Debian, nicht funktioniert: <br><br><pre> <code class="plaintext hljs">$./build.sh debian-9.3.0-amd64-netinst.iso Display setting: Xorg-Standard Looking for kernel image... Extracting kernel files... Archive: gpdpocket-20180115-kernel-files.zip inflating: linux-headers-4.15.0-rc7-stockmind-gpdpocket_4.15.0-rc7-stockmind-gpdpocket-1_amd64.deb inflating: linux-image-4.15.0-rc7-stockmind-gpdpocket_4.15.0-rc7-stockmind-gpdpocket-1_amd64.deb inflating: linux-libc-dev_4.15.0-rc7-stockmind-gpdpocket-1_amd64.deb ./isorespin.sh: 'debian-9.3.0-amd64-netinst.iso' must be an Ubuntu (or Ubuntu flavour), Linux Mint, neon, elementary, BackBox or Peppermint desktop ISO.</code> </pre><br>  Am Ausgang erhalten wir die Datei linuxium-xubuntu-16.04-desktop-amd64.iso, die wir auf das USB-Flash-Laufwerk schreiben: <br><br><pre> <code class="plaintext hljs">#dd if=linuxium-xubuntu-16.04-desktop-amd64.iso of=/dev/sdX</code> </pre> <br>  Wir booten davon, indem wir das Startger√§t einstellen und beim Booten mit der Schaltfl√§che L√∂schen zu den UEFI-Einstellungen wechseln. <br><br>  Das Installationsverfahren ist trivial, ich sehe keinen Sinn in der Streuung.  Ich stelle nur fest, dass es besser ist, es im Live-Modus zu produzieren, damit der Bildschirm nicht zur Seite gedreht wird. <br><br>  Ich verwende die vollst√§ndige Festplattenverschl√ºsselung, falls das Ger√§t pl√∂tzlich verloren geht oder gestohlen wird.  Zumindest bleiben alle Ihre SSH-Schl√ºssel (ja, ich wei√ü √ºber Passwortschutz und SSH-Agent Bescheid) und Anmeldungen bei Internetressourcen erhalten.  Deshalb habe ich LVM zus√§tzlich zu LUKS angelegt, was ich Ihnen auch w√ºnsche. <br><br><h2>  Korrigieren Sie die Curvuline </h2><br><h3>  Schlaf und Winterschlaf </h3><br>  Es w√§re sch√∂n, einen Laptop in eine Tasche werfen zu k√∂nnen und ihn zu vergessen, bis er gebraucht wird.  Zum Gl√ºck erlauben Gr√∂√üe und Gewicht.  Es w√§re sch√∂n, die erforderlichen Anwendungen nicht jedes Mal manuell zu starten, sondern einfach an der Stelle weiterzuarbeiten, an der Sie aufgeh√∂rt haben. <br><br>  Der Schlafmodus scheint sofort zu funktionieren.  Es wird auf regul√§re Weise implementiert, dh durch systemctl suspend.  Empirisch wurde jedoch festgestellt, dass der Stromverbrauch in diesem Modus dem Leerlaufverbrauch nicht viel unterlegen ist.  Anscheinend l√∂scht das Ger√§t einfach den Bildschirm, die Netzwerkschnittstellen und schaltet den K√ºhler aus.  Infolgedessen landet die Batterie in null Tagen f√ºr zwei. <br><br>  Brauchen Sie Winterschlaf.  Der regul√§re Systemctl-Ruhezustand erwies sich als nicht funktionsf√§hig: Der Status wird in einen Swap verschoben, kann jedoch beim Booten nicht wiederhergestellt werden. <br><br>  Ich erinnerte mich, dass es ein solches Projekt gibt - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Userspace Software Suspend</a> und seine Pakete befinden sich im Repository. <br><br><pre> <code class="plaintext hljs">#apt install hibernate</code> </pre> <br>  Wir pr√ºfen: <br><br><pre> <code class="plaintext hljs">#hibernate-disk</code> </pre> <br>  Voila, es funktioniert!  Das System wurde entleert und heruntergefahren.  Nach Eingabe des Passwortes LUKS, wiederhergestellt.  Aber der Ton und das WLAN waren verdeckt, die Helligkeit der Hintergrundbeleuchtung des Bildschirms wurde auf das Maximum zur√ºckgesetzt.  Wir werden es beenden. <br><br><h3>  Installieren Sie die erforderlichen </h3><br>  Bevor Sie mit der Konfiguration von ACPI fortfahren k√∂nnen, m√ºssen Sie mehrere Dienstprogramme installieren. <br><br>  F√ºr die Einstellung der Helligkeit des Bildschirms ist also die Hintergrundbeleuchtung verantwortlich. <br><br><pre> <code class="plaintext hljs">#apt install xbacklight</code> </pre> <br>  Der Laptop ist keine Festplatte, sondern ein Flash-Laufwerk, daher m√∂chte ich ihn nicht mit einem Tausch t√∂ten.  Es gibt so etwas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ZRam</a> , hier werden wir es verwenden.  Jetzt ist alles einfach, Sie m√ºssen keine Bl√§tter in rc.local verschreiben und m√ºssen nur Folgendes tun: <br><br><pre> <code class="plaintext hljs">#apt install zram-config #sudo systemctl enable zram-config.service</code> </pre><br>  Das Skript selbst berechnet die erforderliche Speichermenge und erstellt einen Swapon. <br><br>  Wie in den Kommentaren richtig vermerkt, verschlingt die Flash-Ressource nicht nur den Swap, sondern auch die Protokollierung.  Daher werden / tmp und / var / log auf tmpfs in ram abgelegt.  F√ºgen Sie dazu / etc / fstab zwei Zeilen hinzu: <br><br><pre> <code class="plaintext hljs">tmpfs /tmp tmpfs nodev,nosuid,size=256M 0 0 tmpfs /var/log tmpfs nodev,nosuid,size=512M 0 0</code> </pre><br><br><h3>  Wir beenden acpi </h3><br>  Deaktivieren Sie zun√§chst die systemg'shnyh-Handler.  Da es alles auf eigene Faust macht, sind sie aber unwirksam.  Motto - wir machen alles, aber wir machen es schlecht.  Zum Beispiel hat es nicht gelernt, wie man den Anschluss eines Netzteils oder von Kopfh√∂rern, Tastenanschl√§gen oder dergleichen handhabt. <br><br><div class="spoiler">  <b class="spoiler_title">Er hat S√§ure gegessen und ist immer noch hungrig!</b>  <b class="spoiler_title">(4 MB)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3g/yu/fa/3gyufa5pfygiidcnl4zw2xxmcxi.gif"></div></div><br>  /etc/systemd/logind.conf <br><br><pre> <code class="plaintext hljs">HandlePowerKey=ignore HandleLidSwitch=ignore</code> </pre><br><pre> <code class="plaintext hljs">#systemctl restart systemd-logind.service</code> </pre> <br>  Der acpid-Daemon ist f√ºr die Verarbeitung von acpi-Ereignissen verantwortlich, deren Konfigurationsdateien pl√∂tzlich in / etc / acpi gespeichert werden. <br><br>  Wir senden den Laptop in den Ruhezustand, indem wir den Netzschalter dr√ºcken.  Bearbeiten Sie dazu die folgenden Dateien (falls nicht, m√ºssen Sie sie erstellen): <br><br>  / etc / acpi / events / powerbtn <br><br><pre> <code class="plaintext hljs">event=button[ /]power action=/etc/acpi/hibernate.sh</code> </pre><br>  /etc/acpi/hibernate.sh (mit Kommentaren) <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#!/bin/bash #    ,        LUKS mv /home/user/bin/lock /home/user/bin/nolock # - killall -9 pulseaudio # zram   swap systemctl stop zram-config.service swapon /dev/xubuntu-vg/swap_1 #    DISPLAY=:0.0 su user -c "xbacklight &gt;/tmp/xbl" #    umount -alt nfs4 umount -alt cifs # wpa_supplicant /sbin/wpa_cli suspend hibernate-disk sleep 2 #   DISPLAY=:0.0 su user -c "xbacklight -set `cat /tmp/xbl`" # wpa_supplicant /sbin/wpa_cli resume #  alsa,    . -     /sbin/alsa force-reload #     .  ,      DAC1,            amixer -c 1 set 'DAC1' 90% #    ,        killall i3lock #    mv /home/user/bin/nolock /home/user/bin/lock # zram systemctl start zram-config.service #    swapoff /dev/xubuntu-vg/swap_1</code> </pre></div></div><br>  Der automatische Ruhezustand bei geringer Ladung ist nicht einfach zu implementieren, aber sehr einfach: <br><br><pre> <code class="plaintext hljs">#apt install acpi</code> </pre> <br>  /etc/acpi/ifbatlowgotosleep.sh <br><br><pre> <code class="plaintext hljs">#!/bin/bash level=`/usr/bin/acpi -b|sed '/unava/d'|awk -F\ '{ print $4 }'|sed -e 's/,//' -e's/%//'` if [ "$level" -lt "10" ] then /etc/acpi/hibernate.sh fi</code> </pre><br>  Das Skript √ºberpr√ºft den Ladezustand.  Bei weniger als 10% wird das oben beschriebene Skript f√ºr den Ruhezustand ausgef√ºhrt. <br><br>  Die periodische Ausf√ºhrung wird √ºber crontab eingestellt: <br><br><pre> <code class="plaintext hljs">$sudo crontab -e */3 * * * * /etc/acpi/ifbatlowgotosleep.sh 2&gt;/dev/null</code> </pre><br>  In meinem Fall wird der Akku alle 3 Minuten abgefragt. <br><br>  Der oben erw√§hnte Schlafmodus (systemctl suspend) ist ziemlich nutzlos.  Daher sehe ich keinen Grund, es beim Schlie√üen des Deckels zu aktivieren.  Dar√ºber hinaus besteht m√∂glicherweise der Wunsch, Musik von einem geschlossenen Laptop in Ihrer Tasche zu h√∂ren (nicht umsonst handelt es sich um eine ‚ÄûTasche‚Äú). <br><br>  Deshalb schalten wir den Bildschirm beim Schlie√üen einfach aus und beim √ñffnen wieder ein. <br><br>  L√∂schen Sie / etc / acpi / lidbtn. <br><br>  Wir erstellen und bearbeiten: <br><br>  / etc / acpi / events / lidclose: <br><br><pre> <code class="plaintext hljs">event=button/lid LID close action=/etc/acpi/lidclose.sh</code> </pre><br>  / etc / acpi / events / lidopen: <br><br><pre> <code class="plaintext hljs">event=button/lid LID open action=/etc/acpi/lidopen.sh</code> </pre><br>  /etc/acpi/lidopen.sh <br><br><pre> <code class="plaintext hljs">DISPLAY=:0.0 su user -c "xrandr --output DSI1 --off"</code> </pre> <br>  /etc/acpi/lidclose.sh <br><br><pre> <code class="plaintext hljs">DISPLAY=:0.0 su user -c "xrandr --output DSI1 --auto --rotate right --dpi 200"</code> </pre> <br>  Stellen Sie den DPI-Wert nach Ihren W√ºnschen ein, und Benutzer ist der unkomplizierte Name meines Kontos (√§ndern Sie ihn in Ihren). <br><br><h3>  Konfigurieren der Ton- und Helligkeitssteuertasten </h3><br>  Wir tun dies durch dieselben acpi-Ereignisse. <br><br>  / etc / acpi / events / voldown <br><br><pre> <code class="plaintext hljs">event=button[ /]volumedown action=/etc/acpi/volume-down.sh</code> </pre><br>  / etc / acpi / events / volup <br><br><pre> <code class="plaintext hljs">event=button[ /]volumeup action=/etc/acpi/volume-up.sh</code> </pre><br>  / etc / acpi / events / mute <br><br><pre> <code class="plaintext hljs">event=button[ /]mute action=/etc/acpi/volume-toggle.sh</code> </pre><br>  Skripte: <br><br>  /etc/acpi/volume-toggle.sh <br><br><pre> <code class="plaintext hljs">amixer -c 1 set 'Speaker Channel' toggle amixer -c 1 set 'Headphone Channel' toggle</code> </pre><br>  /etc/acpi/volume-up.sh <br><br><pre> <code class="plaintext hljs">amixer -c 1 set 'Headphone' 5%+ amixer -c 1 set 'Speaker' 5%+</code> </pre><br>  /etc/acpi/volume-down.sh <br><br><pre> <code class="plaintext hljs">amixer -c 1 set 'Headphone' 5%- amixer -c 1 set 'Speaker' 5%-</code> </pre><br>  √Ñhnliches gilt f√ºr die Helligkeit: <br>  / etc / acpi / events / bdown <br><br><pre> <code class="plaintext hljs">event=button[ /]brightnessdown action=/etc/acpi/bdown.sh</code> </pre><br>  / etc / acpi / events / bup <br><br><pre> <code class="plaintext hljs">event=button[ /]brightnessup action=/etc/acpi/bup.sh</code> </pre><br>  /etc/acpi/bup.sh <br><br><pre> <code class="plaintext hljs">DISPLAY=:0.0 su user -c "xbacklight -inc 5%"</code> </pre><br>  /etc/acpi/bdown.sh <br><br><pre> <code class="plaintext hljs">DISPLAY=:0.0 su user -c "xbacklight -dec 5%"</code> </pre><br>  Ich m√∂chte Sie daran erinnern, dass Benutzer der Name meines Kontos ist.  Geben Sie Ihre ein. <br><br><h3>  Kopfh√∂rer </h3><br>  Schei√üe ^ W Ein eigenartiger Realtek ALC5645-Chip kann die Lautsprecher nicht unabh√§ngig ausschalten, wenn Kopfh√∂rer angeschlossen sind.  Sie m√ºssen dem System beibringen, wie es selbst gemacht wird. <br><br>  Es gibt ein solches Skript in respin: <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#!/bin/bash set -e -u if [ "$1" = "jack/headphone" -a "$2" = "HEADPHONE" ]; then case "$3" in plug) sink="[Out] Headphones" ;; *) sink="[Out] Speaker" ;; esac for userdir in /run/user/*; do uid="$(basename $userdir)" user="$(id -un $uid)" if [ -f "$userdir/pulse/pid" ]; then su "$user" -c "pacmd set-sink-port alsa_output.platform-cht-bsw-rt5645.HiFi__hw_chtrt5645__sink $sink" fi done fi</code> </pre></div></div><br>  Aber es funktioniert nicht.  Versucht, einen Wechsel √ºber die Synchronisierungssteuerung des Audios durchzuf√ºhren, schl√§gt jedoch fehl.  Weil: <br><br><pre> <code class="plaintext hljs">$sudo su #su user -c "pacmd set-sink-port alsa_output.platform-cht-bsw-rt5645.HiFi__hw_chtrt5645__sink '[Out] Speaker'"    PulseAudio,        .</code> </pre><br>  Die L√∂sung ist einfach: Wenn der Audioprozess vom Client noch nicht aufgerufen wurde, gibt es nichts, mit dem Sie sich an pacmd wenden k√∂nnen.  Sie k√∂nnen nat√ºrlich die Startlinie dieser zu rc.local, xinitrc hinzuf√ºgen oder sogar eine separate Systemeinheit schreiben, aber ich dachte, es w√§re besser, meine eigene Kr√ºcke zu planen, als andere zu reparieren.  Und ich habe mein eigenes Drehbuch geschrieben, viel weniger monstr√∂s und raffiniert, denke ich. <br><br>  /etc/acpi/headphone-jack.sh <br><br><pre> <code class="plaintext hljs">#!/bin/bash set -e -u if [ "$3" = "plug" ]; then amixer -c 1 set 'Speaker Channel' mute &gt;/dev/null amixer -c 1 set 'Headphone Channel' unmute &gt;/dev/null else amixer -c 1 set 'Speaker Channel' unmute &gt;/dev/null amixer -c 1 set 'Headphone Channel' mute &gt;/dev/null fi</code> </pre><br><h3>  Wir behandeln das Layout und andere kleine Dinge </h3><br>  Wie bereits erw√§hnt, macht mich das Layout w√ºtend.  Die Schaltfl√§che "L√∂schen" befindet sich dort, wo Backslash und Balken sein sollten, der Doppelpunkt in der unteren Reihe. Es ist nicht klar, warum sich das Escape-Men√º und die Registerkarte auf normalen Tastaturen befinden. <br><br>  Ich werde nicht im Detail malen, mit Analyse werde ich nur meine ~ / .xmodmaprc bringen und beschreiben, wie es gemacht wird. <br><br>  Um loszulegen, m√ºssen wir den Schl√ºsselcode abfangen.  Dies geschieht mit dem Programm xev (#apt install xev, yes).  F√ºhren Sie aus, dr√ºcken Sie die gew√ºnschte Taste und erhalten Sie eine Ausgabe wie: <br><br><pre> <code class="plaintext hljs">KeyPress event, serial 33, synthetic NO, window 0x3200001, root 0x2c0, subw 0x0, time 187713326, (979,493), root:(982,1078), state 0x0, keycode 119 (keysym 0xffff, Delete), same_screen YES, XLookupString gives 1 bytes: (7f) "" XmbLookupString gives 1 bytes: (7f) "" XFilterEvent returns: False</code> </pre><br>  Wir brauchen den Wert "keycode 119". <br><br>  √ñffnen Sie als n√§chstes ~ / .xmodmaprc und schreiben Sie dort <br><br><pre> <code class="plaintext hljs">keycode 119 = backslash bar backslash bar</code> </pre> <br>  Und wir f√ºhren die Ausf√ºhrung von "xmodmap ~ / .xmodmaprc" in Ihr xinitrc ein oder wie auch immer es hei√üt, wenn Sie Ihr Lieblings-DE oder WM starten. <br><br>  Mein ~ / .xmodmaprc: <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">pointer = 1 2 3 4 5 remove Lock = Caps_Lock remove Control = Control_L keycode 0x42 = Control_L keycode 135 = Alt_R keycode 0x25 = Super_R keycode 133 = Super_R add Control = Control_L keycode 113 = Left keycode 111 = Up keycode 114 = Right keycode 116 = Down keycode 110 = Home keycode 115 = End keycode 108 = ISO_Next_Group keycode 136 = ISO_First_Group keycode 49 = asciitilde grave asciitilde grave keycode 119 = backslash bar backslash bar keycode 51 = Delete keycode 48 = colon semicolon Cyrillic_zhe Cyrillic_ZHE keycode 47 = apostrophe quotedbl Cyrillic_e Cyrillic_E keycode 130 = XF86Explorer keycode 121 = XF86AudioMute keycode 198 = XF86AudioMicMute keycode 122 = XF86AudioLowerVolume keycode 123 = XF86AudioRaiseVolume keycode 37 = Tab clear mod5 add mod5 = XF86Explorer keycode 166 = Prior keycode 167 = Next</code> </pre></div></div><br>  Es verwendet f√ºr die meisten Benutzer so zweifelhafte Dinge wie das √úbertragen von Strg auf Feststelltaste, Tab auf Strg_l, Alt_Gr auf Men√º und Umschalten des Layouts auf die alte Altgr-Position. <br><br>  Ich benutze auch xcape, um das Dr√ºcken von Escape mit einem einzigen Klick auf ctrl_l zu emulieren.  So genannt: <br><br><pre> <code class="plaintext hljs"> xcape -t 1000 -e "Control_L=Escape"</code> </pre> <br>  Da ich dunkle Themen bevorzuge, die bei schlechten Lichtverh√§ltnissen bequemer sind (ich bin der Meinung, Meerrettich w√ºrde argumentieren), aber oft bei hellem Tageslicht arbeiten m√ºssen, gibt es einen kleinen Trick: Die Farben des Bildes k√∂nnen invertiert werden.  Dazu ben√∂tigen Sie das Programm xcalib: <br><br><pre> <code class="plaintext hljs">#apt install xcalib</code> </pre> <br>  Invertieren: <br><br><pre> <code class="plaintext hljs">$xcalib -i -a</code> </pre> <br>  Sie k√∂nnen mit dem Fenstermanager an jeden praktischen Hotkey binden.  Ich h√§nge an Super_L + Backspace. <br><br><h2>  Zusammenfassung </h2><br>  Die Eindr√ºcke des Ger√§ts sind eher positiv als negativ.  Ich bereue das ausgegebene Geld nicht.  Das Ger√§t nimmt nicht viel Platz in der Tasche ein, passt in die Tasche einer Cargohose und einer rauchartigen Jacke. <br><br> <a href=""><img src="https://habrastorage.org/webt/xz/u5/a2/xzu5a2lnxboqgbrkw8chzh3zlzu.jpeg"></a> <br><br>  Es funktioniert f√ºr eine lange Zeit von der Batterie, f√ºr den Test habe ich dreieinhalb Stunden Filme mit eingeschaltetem WLAN gescrollt, irgendwo um die H√§lfte entladen.  L√§dt von einem Paverbank mit USB-A √ºber einen Netzadapter auf. <br><br>  Alle angetroffenen weichen Curvuline wurden erfolgreich behandelt. <br><br>  Es ist bedauerlich, dass es keinen rj45-Port gibt, aber ich hoffe, dass dies durch den bestellten Adapter mit USB gel√∂st wird.  Der Mangel an Mobilkommunikation und Kameras, jetzt unter Bedingungen der totalen √úberwachung, halte ich eher f√ºr ein Plus. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de409945/">https://habr.com/ru/post/de409945/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de409933/index.html">HiSilicon Kirin 970 Android SoC Review - Leistung und Effizienz</a></li>
<li><a href="../de409935/index.html">Die Geschichte "Das Leben ist hoch"</a></li>
<li><a href="../de409937/index.html">Triumph und Alltag. So installieren Sie einen Turm auf einem Wolkenkratzer Lakhta Center. Teil 1</a></li>
<li><a href="../de409939/index.html">Wie Bezos ein unerwartetes Problem bei der Werbung f√ºr seine intelligente Kolumne l√∂ste</a></li>
<li><a href="../de409943/index.html">Warum es f√ºr Schulen wichtig ist, mehr Zeit f√ºr das Studium der diskreten Mathematik aufzuwenden</a></li>
<li><a href="../de409947/index.html">Superfluides Universum: Dunkle Materie als Bose-Einstein-Kondensat</a></li>
<li><a href="../de409949/index.html">Hei√üer Urknall und Inflation</a></li>
<li><a href="../de409951/index.html">LED-Panel mit WIFI Sonoff BN-SZ01</a></li>
<li><a href="../de409953/index.html">Herzinfarkt und Sepsis in 10 Minuten</a></li>
<li><a href="../de409955/index.html">Tesla vereint 50.000 arme H√§user in S√ºdaustralien mit einem virtuellen 250-MW-Kraftwerk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>