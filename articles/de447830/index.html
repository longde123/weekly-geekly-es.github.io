<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÜüèΩ ‚úçüèæ üö¥üèæ Der Code ist lebendig und tot. Teil drei. Code als Text üõ∂ üë£ ü§°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sie m√ºssen den Code lesen, um das Programm zu begleiten. Je einfacher es ist, desto mehr sieht es aus wie eine nat√ºrliche Sprache - dann werden Sie sc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Der Code ist lebendig und tot. Teil drei. Code als Text</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447830/"><p>  Sie m√ºssen den Code lesen, um das Programm zu begleiten. Je einfacher es ist, desto mehr sieht es aus wie eine nat√ºrliche Sprache - dann werden Sie schneller darauf zugreifen und sich auf die Hauptsache konzentrieren. </p><br><p> In den letzten beiden Artikeln habe ich gezeigt, dass sorgf√§ltig ausgew√§hlte W√∂rter helfen, das Wesentliche des Geschriebenen besser zu verstehen, aber <em>nur</em> dar√ºber nachzudenken, reicht nicht aus, da jedes Wort in zwei Formen existiert: als f√ºr sich und als Teil eines Satzes.  Das Wiederholen von <code>CurrentThread</code> wird erst wiederholt, wenn wir es im Kontext von <code>Thread.CurrentThread</code> <em>gelesen</em> <code>Thread.CurrentThread</code> . </p><br><p>  Anhand von Noten und einfachen Melodien werden wir nun sehen, was Musik ist. </p><a name="habracut"></a><br><h2 id="oglavlenie-cikla">  Inhaltsverzeichnis durchlaufen </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Objekte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aktionen und Eigenschaften</a> </li><li>  Code als Text </li></ol><br><h2 id="kod-kak-tekst">  Code als Text </h2><br><p>  Die meisten <em>flie√üenden</em> Schnittstellen sind eher auf externe als auf interne Schnittstellen ausgelegt, sodass sie so einfach zu lesen sind.  Nat√ºrlich nicht umsonst: Der Inhalt wird gewisserma√üen schw√§cher.  <code>FluentAssertions</code> wir also an, <code>FluentAssertions</code> k√∂nnen im <code>FluentAssertions</code> Paket <code>FluentAssertions</code> schreiben: <code>(2 + 2).Should().Be(4, because: "2 + 2 is 4!")</code> Und im Verh√§ltnis zum Lesen, <code>because</code> elegant aussieht, aber innerhalb des <code>Be()</code> vielmehr der Parameter <code>error</code> oder <code>errorMessage</code> . </p><br><p>  Meiner Meinung nach sind solche Ausnahmen nicht von Bedeutung.  Wenn wir uns einig sind, dass der Code ein Text ist, h√∂ren seine Komponenten auf, zu sich selbst zu geh√∂ren: Sie sind jetzt Teil einer Art universellem <em>"√Ñther"</em> . </p><br><p>  Ich werde anhand von Beispielen zeigen, wie solche √úberlegungen zu Erfahrungen werden. </p><br><h3 id="interlocked"> <code>Interlocked</code> </h3> <br><p>  Ich m√∂chte Sie an den Fall <code>Interlocked</code> erinnern, den wir von <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> in <code>Atomically.Change(ref x, from: oldX, to: newX)</code> mit eindeutigen Namen von Methoden und Parametern <code>Atomically.Change(ref x, from: oldX, to: newX)</code> . </p><br><h3 id="exceptwith"> <code>ExceptWith</code> </h3> <br><p>  Typ <code>ISet&lt;&gt;</code> hat eine Methode namens <code>ExceptWith</code> .  Wenn Sie sich einen Anruf wie <code>items.ExceptWith(other)</code> , werden Sie nicht sofort erkennen, was passiert.  Aber Sie m√ºssen nur schreiben: <code>items.Exclude(other)</code> , da alles <code>items.Exclude(other)</code> . </p><br><h3 id="getvalueordefault"> <code>GetValueOrDefault</code> </h3> <br><p>  Wenn Sie mit <code>Nullable&lt;T&gt;</code> <code>x.Value</code> Aufruf von <code>x.Value</code> eine Ausnahme aus, wenn <code>x</code> <code>null</code> .  Wenn Sie weiterhin <code>Value</code> <code>x.GetValueOrDefault</code> m√ºssen, verwenden Sie <code>x.GetValueOrDefault</code> : <code>x.GetValueOrDefault</code> ist entweder <code>Value</code> oder der Standardwert.  Sperrig. </p><br><p>  Der Ausdruck <em>"oder x oder der Standardwert"</em> entspricht dem kurzen und eleganten <code>x.OrDefault</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? x = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = x.GetValueOrDefault(); <span class="hljs-comment"><span class="hljs-comment">// ,  .  . var b = x.OrDefault(); //  ‚Äî  ,   . var c = x.Or(10); //     .</span></span></code> </pre> <br><p>  Bei <code>OrDefault</code> und <code>Or</code> ist eines zu beachten: bei der Arbeit mit einem Bediener <code>.?</code>  Sie k√∂nnen nicht so etwas wie <code>x?.IsEnabled.Or(false)</code> schreiben, <code>x?.IsEnabled.Or(false)</code> nur <code>(x?.IsEnabled).Or(false)</code> (mit anderen Worten, der Operator <code>.?</code> bricht die <em>gesamte</em> rechte Seite ab, wenn <code>null</code> links ist). </p><br><p>  Die Vorlage kann angewendet werden, wenn mit <code>IEnumerable&lt;T&gt;</code> : </p><br><pre> <code class="cs hljs">IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; numbers = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">// . var x = numbers ?? Enumerable.Empty&lt;int&gt;(); //   . var x = numbers.OrEmpty();</span></span></code> </pre> <br><h3 id="mathmin-i-mathmax">  <code>Math.Min</code> und <code>Math.Max</code> </h3><br><p>  Eine Idee mit <code>Or</code> kann zu numerischen Typen entwickelt werden.  Angenommen, Sie m√∂chten die maximale Anzahl von <code>a</code> und <code>b</code> .  Dann schreiben wir: <code>Math.Max(a, b)</code> oder <code>a &gt; b ? a : b</code>  <code>a &gt; b ? a : b</code> .  Beide Optionen kommen mir recht bekannt vor, sehen aber dennoch nicht wie eine nat√ºrliche Sprache aus. </p><br><p>  Sie k√∂nnen es ersetzen durch: <code>a.Or(b).IfLess()</code> - <em>nehmen Sie</em> <code>a</code> <em>oder</em> <code>b</code> <em>wenn</em> <code>a</code> <em>kleiner ist</em> .  Geeignet f√ºr solche Situationen: </p><br><pre> <code class="cs hljs">Creature creature = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> damage = ...; <span class="hljs-comment"><span class="hljs-comment">//   . creature.Health = Math.Max(creature.Health - damage, 0); // Fluent. creature.Health = (creature.Health - damage).Or(0).IfGreater(); //   : creature.Health = (creature.Health - damage).ButNotLess(than: 0);</span></span></code> </pre> <br><h3 id="stringjoin"> <code>string.Join</code> </h3> <br><p>  Manchmal m√ºssen Sie eine Sequenz zu einer Zeichenfolge zusammenf√ºgen und die Elemente durch ein Leerzeichen oder Komma trennen.  Verwenden <code>string.Join</code> beispielsweise <code>string.Join</code> wie <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code> : <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code> <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code>  . </p><br><p>  Ein einfaches <em>"Komma-Nummer teilen"</em> kann pl√∂tzlich zu <em>"Komma an jede Zahl aus der Liste anh√§ngen" werden</em> - dies ist sicherlich kein Code als Text. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> [] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> }; <span class="hljs-comment"><span class="hljs-comment">// ""    ‚Äî  . var x = string.Join(", ", numbers); //    ‚Äî ! var x = numbers.Separated(with: ", ");</span></span></code> </pre> <br><h3 id="regex"> <code>Regex</code> </h3> <br><p>  <code>string.Join</code> ist jedoch ziemlich harmlos im Vergleich dazu, wie <code>Regex</code> manchmal falsch und f√ºr andere Zwecke verwendet wird.  Wo Sie mit einfachem, lesbarem Text auskommen k√∂nnen, wird aus irgendeinem Grund ein √ºberkomplizierter Eintrag bevorzugt. </p><br><p>  Beginnen wir mit einer einfachen Bestimmung, dass eine Zeichenfolge eine Reihe von Zahlen darstellt: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">// ,  . var x = Regex.IsMatch(id, "^[0-9]*$"); // . var x = id.All(x =&gt; x.IsDigit()); // ! var x = id.IsNumer();</span></span></code> </pre> <br><p>  Ein anderer Fall besteht darin, herauszufinden, ob die Zeichenfolge mindestens ein Zeichen aus der Sequenz enth√§lt: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = Regex.IsMatch(text, @"["&lt;&gt;[]'"); //   . ( .) var x = text.ContainsAnyOf('"', '&lt;', '&gt;', '[', ']', '\''); //  . var x = text.ContainsAny(charOf: @"["&lt;&gt;[]'");</span></span></code> </pre> <br><p>  Je komplizierter die Aufgabe, desto schwieriger ist das L√∂sungsmuster: Um einen Datensatz vom <code>"HelloWorld"</code> in ein paar W√∂rter <code>"Hello World"</code> aufzuteilen, wollte jemand anstelle eines einfachen Algorithmus ein Monster: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   -   . var x = Regex.Replace(text, "([az](?=[AZ])|[AZ](?=[AZ][az]))", "$1 "); //  . var x = text.PascalCaseWords().Separated(with: " "); //   . var x = text.AsWords(eachStartsWith: x =&gt; x.IsUpper()).Separated(with: " ");</span></span></code> </pre> <br><p>  Zweifellos sind regul√§re Ausdr√ºcke effektiv und universell, aber ich m√∂chte verstehen, was auf den ersten Blick geschieht. </p><br><h3 id="substring-i-remove">  <code>Substring</code> und <code>Remove</code> </h3><br><p>  Es kommt vor, dass Sie einen Teil von Anfang oder Ende aus der Zeile entfernen m√ºssen, z. B. aus dem <code>path</code> - der Erweiterung <code>.txt</code> , falls vorhanden. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = ...; <span class="hljs-comment"><span class="hljs-comment">//    . var x = path.EndsWith(".txt") ? path.Remove(path.Length - "txt".Length) : path; //   . var x = path.Without(".exe").AtEnd;</span></span></code> </pre> <br><p>  Wieder waren die <em>Aktion</em> und der <em>Algorithmus</em> weg und eine einfache <em>Zeile wurde am Ende ohne die Erweiterung .exe belassen</em> . </p><br><p>  Da die <code>Without</code> Methode einen bestimmten <code>WithoutExpression</code> , bitten sie um einen anderen: <code>path.Without("_").AtStart</code> und <code>path.Without("Something").Anywhere</code> .  Es ist auch interessant, dass ein anderer Ausdruck mit demselben Wort erstellt werden kann: <code>name.Without(charAt: 1)</code> - l√∂scht das Zeichen bei Index 1 und gibt eine neue Zeile zur√ºck (n√ºtzlich bei der Berechnung von Permutationen).  Und auch lesbar! </p><br><h3 id="typegetmethods"> <code>Type.GetMethods</code> </h3> <br><p>  Verwenden Sie: </p><br><pre> <code class="cs hljs">Type type = ...; <span class="hljs-comment"><span class="hljs-comment">//   `Get` ,   `|`.     . var x = type.GetMethods(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); // ,  . `Or`   , . var x = type.Methods(_ =&gt; _.Instance.Public.Or.NonPublic);</span></span></code> </pre> <br><p>  (Gleiches gilt f√ºr <code>GetFields</code> und <code>GetProperties</code> .) </p><br><h3 id="directorycopy"> <code>Directory.Copy</code> </h3> <br><p>  Alle Vorg√§nge mit Ordnern und Dateien werden h√§ufig auf <code>DirectoryUtils</code> , <code>FileSystemHelper</code> verallgemeinert.  Sie implementieren die Umgehung, Bereinigung, das Kopieren usw. des Dateisystems.  Aber hier k√∂nnen Sie sich etwas Besseres einfallen lassen! </p><br><p>  Wir zeigen den Text <em>"Alle Dateien von 'D: \ Source' nach 'D: \ Target' kopieren"</em> in den Code <code>"D:\\Source".AsDirectory().Copy().Files.To("D:\\Target")</code>  <code>AsDirectory()</code> - gibt <code>DirectoryInfo</code> aus der <code>string</code> und <code>Copy()</code> - erstellt eine Instanz von <code>CopyExpression</code> , die eine eindeutige API zum <code>CopyExpression</code> von <code>CopyExpression</code> beschreibt (Sie k√∂nnen beispielsweise <code>Copy().Files.Files</code> nicht aufrufen).  Dann √∂ffnet sich die M√∂glichkeit, nicht alle Dateien zu kopieren, sondern einige: <code>Copy().Files.Where(x =&gt; x.IsNotEmpty)</code> . </p><br><h3 id="getorderbyid"> <code>GetOrderById</code> </h3> <br><p>  Im zweiten Artikel habe ich geschrieben, dass <code>IUsersRepository.GetUser(int id)</code> redundant ist und besser <code>IUsersRepository.User(int id)</code> .  Dementsprechend haben wir in einem √§hnlichen <code>IOrdersRepository</code> nicht <code>GetOrderById(int id)</code> , sondern <code>Order(int id)</code> .  In einem anderen Beispiel wurde jedoch vorgeschlagen, die Variable eines solchen Repositorys nicht <code>_ordersRepository</code> , sondern einfach <code>_orders</code> . </p><br><p>  Beide √Ñnderungen sind f√ºr sich genommen gut, summieren sich jedoch im <code>_orders.Order(id)</code> nicht: Der Aufruf von <code>_orders.Order(id)</code> sieht ausf√ºhrlich aus.  Es w√§re m√∂glich, <code>_orders.Get(id)</code> , aber die Bestellungen <code>_orders.Get(id)</code> fehl. Wir m√∂chten nur <em>diejenige</em> angeben, die <em>eine solche Kennung hat</em> .  <em>Einer, der</em> <code>One</code> , also: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrderById(id); //      : var x = orders.Order(id); //     ,    . var x = orders.One(id); //    : var x = orders.One(with: id);</span></span></code> </pre> <br><h3 id="getorders"> <code>GetOrders</code> </h3> <br><p>  In Objekten wie <code>IOrdersRepository</code> werden h√§ufig andere Methoden gefunden: <code>AddOrder</code> , <code>RemoveOrder</code> , <code>GetOrders</code> .  Die ersten beiden Wiederholungen <code>_orders.Add(order)</code> und <code>Add</code> and <code>Remove</code> werden erhalten (mit den entsprechenden Eintr√§gen <code>_orders.Add(order)</code> und <code>_orders.Remove(order)</code> ).  Mit <code>GetOrders</code> schwieriger, <code>Orders</code> wenig umzubenennen.  Mal sehen: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrders(); //  `Get`,  . var x = orders.Orders(); // ! var x = orders.All();</span></span></code> </pre> <br><p>  Es sollte beachtet werden, dass mit dem alten <code>_ordersRepository</code> Wiederholungen in <code>GetOrders</code> oder <code>GetOrderById</code> Aufrufen nicht so auff√§llig sind, da wir mit dem Repository arbeiten! </p><br><p>  Namen wie <code>One</code> , <code>All</code> eignen sich f√ºr viele Schnittstellen, die viele darstellen.  Angenommen, in der bekannten Implementierung der GitHub-API - <code>octokit</code> - sieht das <code>gitHub.Repository.GetAllForUser("John")</code> aller Benutzerrepositorys wie <code>gitHub.Repository.GetAllForUser("John")</code> , obwohl dies logischer ist - <code>gitHub.Users.One("John").Repositories.All</code> .  In diesem Fall ist das <code>gitHub.Repository.Get("John", "Repo")</code> <em>eines</em> Repositorys <code>gitHub.Repository.Get("John", "Repo")</code> anstelle des offensichtlichen <code>gitHub.Users.One("John").Repositories.One("Repo")</code> .  Der zweite Fall sieht l√§nger aus, ist jedoch intern konsistent und spiegelt die Plattform wider.  Dar√ºber hinaus kann es mithilfe von Erweiterungsmethoden zu <code>gitHub.User("John").Repository("Repo")</code> gek√ºrzt werden. </p><br><h3 id="dictionarytrygetvalue"> <code>Dictionary.TryGetValue</code> </h3> <br><p>  Das Abrufen von Werten aus dem W√∂rterbuch ist in mehrere Szenarien unterteilt, die sich nur darin unterscheiden, <em>was</em> zu tun ist, wenn der Schl√ºssel nicht gefunden wird: </p><br><ul><li>  einen Fehler ausl√∂sen ( <code>dictionary[key]</code> ); </li><li>  den Standardwert zur√ºckgeben (nicht implementiert, aber h√§ufig <code>GetValueOrDefault</code> oder <code>TryGetValue</code> schreiben); </li><li>  etwas anderes zur√ºckgeben (nicht implementiert, aber ich w√ºrde <code>GetValueOrOther</code> erwarten); </li><li>  Schreiben Sie den angegebenen Wert in das W√∂rterbuch und geben Sie ihn zur√ºck (nicht implementiert, aber <code>GetOrAdd</code> wird gefunden). </li></ul><br><p>  Die Ausdr√ºcke konvergieren an dem Punkt " <em>Nimm ein X oder Y, wenn X nicht ist</em> ."  Wie im Fall von <code>_ordersRepository</code> rufen wir au√üerdem die W√∂rterbuchvariable nicht <code>itemsDictionary</code> , sondern <code>items</code> . </p><br><p>  Dann ist f√ºr den Teil <em>"Nimm etwas X"</em> ein Aufruf der Formularelemente. <code>items.One(withKey: X)</code> ideal und gibt eine Struktur mit vier <em>Endungen zur√ºck</em> : </p><br><pre> <code class="cs hljs">Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Item&gt; items = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//  ,   : var x = items.GetValueOrDefault(id); var x = items[id]; var x = items.GetOrAdd(id, () =&gt; new Item()); //    : var x = items.One(with: id).OrDefault(); var x = items.One(with: id).Or(Item.Empty); var x = items.One(with: id).OrThrow(withMessage: $"Couldn't find item with '{id}' id."); var x = items.One(with: id).OrNew(() =&gt; new Item());</span></span></code> </pre> <br><h3 id="assemblygettypes"> <code>Assembly.GetTypes</code> </h3> <br><p>  Schauen wir uns an, wie alle vorhandenen Instanzen vom Typ <code>T</code> in der Assembly erstellt werden: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// . var x = Assembly .GetAssembly(typeof(T)) .GetTypes() .Where(...) .Select(Activator.CreateInstance); // "" . var x = TypesHelper.GetAllInstancesOf&lt;T&gt;(); // . var x = Instances.Of&lt;T&gt;();</span></span></code> </pre> <br><p>  Daher ist der Name einer statischen Klasse manchmal der <em>Anfang eines</em> Ausdrucks. </p><br><p>  √Ñhnliches findet sich in NUnit: <code>Assert.That(2 + 2, Is.EqualTo(4))</code> - <code>Is</code> und wurde nicht als autarker Typ konzipiert. </p><br><h3 id="argumentthrowifnull"> <code>Argument.ThrowIfNull</code> </h3> <br><p>  Schauen wir uns nun die Voraussetzungspr√ºfung an: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  . Argument.ThrowIfNull(x); Guard.CheckAgainstNull(x); // . x.Should().BeNotNull(); // ,  ...  ? Ensure(that: x).NotNull();</span></span></code> </pre> <br><p>  <code>Ensure.NotNull(argument)</code> - nett, aber nicht ganz englisch.  Eine andere Sache ist das oben geschriebene <code>Ensure(that: x).NotNull()</code> .  Wenn es nur k√∂nnte ... </p><br><p>  √úbrigens k√∂nnen Sie!  Wir schreiben <code>Contract.Ensure(that: argument).IsNotNull()</code> und importieren den <code>Contract</code> <code>using static</code> .  So werden alle Arten von <code>Ensure(that: type).Implements&lt;T&gt;()</code> , <code>Ensure(that: number).InRange(from: 5, to: 10)</code> usw. <code>Ensure(that: number).InRange(from: 5, to: 10)</code> . </p><br><p>  Die Idee des statischen Imports √∂ffnet viele T√ºren.  Ein sch√∂nes Beispiel f√ºr: anstelle von <code>items.Remove(x)</code> <code>Remove(x, from: items)</code> <code>items.Remove(x)</code> Schreiben <code>Remove(x, from: items)</code> .  Aber merkw√ºrdig ist die Reduzierung von <code>enum</code> und Eigenschaften, die Funktionen zur√ºckgeben. </p><br><pre> <code class="cs hljs">IItems items = ...; <span class="hljs-comment"><span class="hljs-comment">// . var x = items.All(where: x =&gt; x.IsWeapon); //  . // `ItemsThatAre.Weapons`  `Predicate&lt;bool&gt;`. var x = items.All(ItemsThatAre.Weapons); // `using static`  !  . var x = items.All(Weapons);</span></span></code> </pre> <br><h3 id="ekzoticheskiy-find">  Exotischer <code>Find</code> </h3><br><p>  In C # 7.1 und h√∂her k√∂nnen Sie nicht <code>Find(1, @in: items)</code> schreiben, sondern <code>Find(1, in items)</code> , wobei <code>Find</code> als <code>Find&lt;T&gt;(T item, in IEnumerable&lt;T&gt; items)</code> .  Dieses Beispiel ist unpraktisch, zeigt aber, dass alle Mittel im Kampf um Lesbarkeit gut sind. </p><br><h2 id="itogo">  Insgesamt </h2><br><p>  In diesem Teil habe ich verschiedene M√∂glichkeiten untersucht, um mit der Lesbarkeit von Code zu arbeiten.  Alle von ihnen k√∂nnen verallgemeinert werden auf: </p><br><ul><li>  <strong>Der benannte Parameter als Teil des Ausdrucks</strong> lautet <code>Should().Be(4, because: "")</code> , <code>Atomically.Change(ref x, from: oldX, to: newX)</code> . </li><li>  <strong>Ein einfacher Name anstelle von technischen Details</strong> lautet <code>Separated(with: ", ")</code> , <code>Exclude</code> . </li><li>  <strong>Die Methode als Teil der Variablen</strong> lautet <code>x.OrDefault()</code> , <code>x.Or(b).IfLess()</code> , <code>orders.One(with: id)</code> , <code>orders.All</code> . </li><li>  <strong>Die Methode als Teil des Ausdrucks</strong> lautet <code>path.Without(".exe").AtEnd</code> . </li><li>  <strong>Der Typ als Teil des Ausdrucks</strong> ist <code>Instances.Of</code> , <code>Is.EqualTo</code> . </li><li>  <strong>Die Methode als Teil des Ausdrucks (unter <code>using static</code> )</strong> lautet <code>Ensure(that: x)</code> , <code>items.All(Weapons)</code> . </li></ul><br><p>  So werden das √Ñu√üere und das Kontemplierte in den Vordergrund ger√ºckt.  Zuerst wird es gedacht, und dann werden seine spezifischen Inkarnationen gedacht, nicht so bedeutend, solange der Code als Text gelesen wird.  Daraus folgt, dass der Richter weniger der Geschmack als die <em>Sprache ist</em> - er bestimmt den Unterschied zwischen <code>item.GetValueOrDefault</code> und <code>item.OrDefault</code> . </p><br><h2 id="epilog">  Nachwort </h2><br><p>  Was ist besser, klar, aber nicht funktionierend oder funktionierend, aber unverst√§ndlich?  Ein schneewei√ües Schloss ohne M√∂bel und Zimmer oder ein Schuppen mit Sofas im Stil Ludwigs XIV.?  Eine Luxusyacht ohne Motor oder St√∂hnen mit einem Quantencomputer, den niemand benutzen kann? </p><br><p>  Polare Antworten passen nicht, sondern <em>"irgendwo in der Mitte"</em> . </p><br><p>  Meiner Meinung nach sind beide Konzepte untrennbar miteinander verbunden: Wenn wir sorgf√§ltig ein Cover f√ºr ein Buch ausw√§hlen, betrachten wir zweifelsohne Fehler im Text und umgekehrt.  Ich m√∂chte nicht, dass die <em>Beatles</em> Musik von geringer Qualit√§t spielen, aber sie <em>sollten</em> auch <em>MusicHelper</em> hei√üen. </p><br><p>  Eine andere Sache ist, dass die Arbeit an einem Wort als Teil des Entwicklungsprozesses eine untersch√§tzte, ungew√∂hnliche Sache ist und daher immer noch ein extremes Urteilsverm√∂gen erforderlich ist.  Dieser Zyklus ist das Extrem von Form und Bild. </p><br><p>  Vielen Dank f√ºr Ihre Aufmerksamkeit! </p><br><h2 id="ssylki">  Referenzen </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>Pocket.Common</code></a> , die weitere Beispiele sehen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>Pocket.Common</code></a> , finden Sie auf meinem GitHub, beispielsweise in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>Pocket.Common</code></a> Bibliothek.  <em>(nicht f√ºr den weltweiten und universellen Gebrauch)</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447830/">https://habr.com/ru/post/de447830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447818/index.html">AgileDays 2019</a></li>
<li><a href="../de447820/index.html">Importieren Sie 3D-Modelle in Unity und Fallstricke</a></li>
<li><a href="../de447822/index.html">Fast gefeuert. Wie ich die Yandex Analytics-Abteilung aufgebaut habe</a></li>
<li><a href="../de447826/index.html">Der Personalvermittler muss verkaufen k√∂nnen</a></li>
<li><a href="../de447828/index.html">Wie wir IT f√ºr Menschen in Rostelecom machen</a></li>
<li><a href="../de447832/index.html">Vor nicht allzu langer Zeit</a></li>
<li><a href="../de447834/index.html">Zerst√∂re in 9 Sekunden. Wie ein unbekannter Algorithmus IPO BATS zerst√∂rte</a></li>
<li><a href="../de447836/index.html">Probefahrt nanoCAD SPDS Metalwork 1.2. Teil 1</a></li>
<li><a href="../de447838/index.html">Wie IoT-Technologien die Welt in den n√§chsten 10 Jahren ver√§ndern werden</a></li>
<li><a href="../de447842/index.html">Microbiota. Was ist dieses Organ und warum brauchen wir es?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>