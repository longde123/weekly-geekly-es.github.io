<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèº üåù üë®üèº‚Äçüîß Desenvolvimento de uma fonte de alimenta√ß√£o de backup de baixa pot√™ncia com uma sa√≠da senoidal. Parte 3. Trabalhar com erros ‚ÅâÔ∏è ü§òüèº üí™üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pref√°cio
 A s√©rie de artigos ‚Äú Desenvolvimento de uma fonte de alimenta√ß√£o de backup de baixa pot√™ncia com uma sa√≠da senoidal ‚Äù descreve o processo de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de uma fonte de alimenta√ß√£o de backup de baixa pot√™ncia com uma sa√≠da senoidal. Parte 3. Trabalhar com erros</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390609/"><h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pref√°cio</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A s√©rie de artigos ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvimento de uma fonte de alimenta√ß√£o de backup de baixa pot√™ncia com uma sa√≠da senoidal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù descreve o processo de projeto e cria√ß√£o de um RIP para uma bomba de circula√ß√£o de um sistema de aquecimento. Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">segunda parte da</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hist√≥ria, o autor prop√¥s √† </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunidade mundial</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desenvolvedores mais experientes e prejudica o circuito el√©trico do dispositivo que est√° sendo desenvolvido. Como se costuma dizer, uma mente n√£o √© ruim, mas a mente coletiva de Habra - residentes do recurso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geektimes.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e usu√°rios da comunidade </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">easyelectronics.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muito melhor </font><font style="vertical-align: inherit;">Ap√≥s discuss√µes detalhadas das solu√ß√µes de circuitos propostas, foi realizado um trabalho sobre os bugs. </font><font style="vertical-align: inherit;">O circuito passou por v√°rias mudan√ßas cr√≠ticas e n√£o muito. </font><font style="vertical-align: inherit;">Neste artigo, tentarei argumentar por mudan√ßas no esquema com os c√°lculos necess√°rios, etc.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digress√£o l√≠rica</font></font></b><div class="spoiler_text">    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">easyelectronics.ru</a>.    ,        ,           .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßaremos a entender os esquemas iniciais. </font><font style="vertical-align: inherit;">No processo de an√°lise, al√©m de levar em considera√ß√£o os coment√°rios dos usu√°rios, levaremos o circuito √† </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfei√ß√£o de uma</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers√£o vi√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, ser√£o apresentados os n√≥s individuais do circuito que sofreram altera√ß√µes e, no final, um circuito el√©trico generalizado projetado no CAD Dip Trace.</font></font><br>
<a name="habracut"></a><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema de energia</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fonte de alimenta√ß√£o baseada em estabilizadores LDO a 1% n√£o mudou. Embora muitos tenham se manifestado, por substituir o LDO em 5 volts pelo LM7805 usual, argumentando que o gabinete LMK pode dissipar muita energia. Afinal, o consumo no barramento de 5 volts ser√° de cerca de 250 - 300 mA, o que em termos de pot√™ncia de dissipa√ß√£o: P = (Uin-Uout) * I = (12-5) * 0,3 = 2,1 W. O que para o caso SOT - 223, √© simplesmente muito alto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O consumo de corrente principal no barramento de for√ßa de 5 volts ser√° selecionado pelo visor LCD. A luz de fundo do LCD n√£o ser√° constante, basicamente ser√° desligada, de modo que o consumo atual neste barramento ser√° metade do mesmo. Ou seja, precisamos dissipar 1W. Para fazer isso, selecione um pol√≠gono decente na placa de circuito impresso, conforme solicitado nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que n√£o haja problemas com isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No barramento de 3,3 volts, o LDO com o pol√≠gono na placa deve funcionar sem problemas ou superaquecimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , foi expressa uma opini√£o sobre a capacit√¢ncia de sa√≠da para esses tipos de LDO NCP1117STxx, de que eles podem ser cr√≠ticos para a opera√ß√£o est√°vel do estabilizador. </font><font style="vertical-align: inherit;">Vejamos a folha de dados: </font></font><br>
<img src="https://habrastorage.org/files/0c7/dfa/2ad/0c7dfa2ad9ec46f081943554a2dea6d6.JPG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelo que entendi neste diagrama, quase qualquer capacitor com capacidade de 47 microfarads e superior levar√° o LDO para um modo operacional est√°vel e n√£o √© muito importante qual EMP ele possui. </font><font style="vertical-align: inherit;">Correto se eu estiver errado. </font><font style="vertical-align: inherit;">Terminamos as refei√ß√µes, continuamos.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diodo Schottky</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre-se do esquema original. </font></font><br>
<br>
<img src="https://habrastorage.org/files/420/218/8de/4202188de2de48319565da8b2a76b2ba.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diodo desconecta a bateria do barramento de for√ßa da ponte. Conforme observado corretamente neste </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , muita energia ser√° alocada no modo de opera√ß√£o da bateria. 10 Um diodo Schottky tem uma queda direta no diodo de 0,8 volts. Com uma corrente de 5 A, 4 W ser√£o dissipados nela. Demais. Al√©m disso, n√£o quero perder 0,8 Volts. Ent√£o siga o conselho e coloque o mosfet do canal P. O IRF9310 possui uma resist√™ncia de canal aberto de 0,0046 ohms. Isso significa que a pot√™ncia de dissipa√ß√£o ser√° P = I * I * R = 5 * 5 * 0,0046 = 0,115 W. Um pedido e meio a menos. A queda de tens√£o no transistor ser√° U = I * R = 5 * 0,0046 = 23 mV. Geralmente n√£o √© percept√≠vel. Total de obter esse esquema.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e81/fe8/334/e81fe83345334c659cd9d0f14addfca2.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O MK gerenciar√° esse mosfet. </font><font style="vertical-align: inherit;">Ao trabalhar com a bateria, abra, ao carregar a bateria da rede, feche. </font><font style="vertical-align: inherit;">Tudo √© l√≥gico. </font><font style="vertical-align: inherit;">Al√©m disso, √© compar√°vel em valor ao diodo Schottky, de modo que o custo do dispositivo neste componente n√£o √© esperado.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformador</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um erro cr√≠tico foi arrastado para este n√≥. Considere a op√ß√£o original. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ca7/f7d/c1f/ca7f7dc1f8aa453c9910d40c0f766bf7.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com a bateria, quando a ponte funciona com um transformador, quando a corrente flui do in√≠cio do enrolamento para a sua deriva√ß√£o, um CEM de polaridade negativa em rela√ß√£o ao terra do circuito ocorre no final do enrolamento. Al√©m disso, este EMF flui atrav√©s do diodo para o terra do dispositivo, criando assim um curto-circuito. Com uma tens√£o EMF de 3-4 volts, a corrente de curto-circuito ser√° da ordem de v√°rias dezenas de amperes, o que √© ruim para o diodo, o enrolamento e todo o dispositivo como um todo. Ou seja, com um curto-circuito na torneira no enrolamento de baixa tens√£o, n√£o ser√° poss√≠vel obter a amplitude necess√°ria para a bomba funcionar. Nesse caso, a prote√ß√£o atual tamb√©m ser√° in√∫til. Em uma palavra, o dispositivo n√£o funcionar√°, mas tamb√©m queimar√° o ch√£o do circuito. Essa situa√ß√£o foi vista claramente em v√°rios coment√°rios. Por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Existem v√°rias maneiras de sair.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enrolando um enrolamento independente completo para carregar a bateria,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deixe esse fio enrolado no ar enquanto estiver usando a bateria,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez algo mais possa surgir.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu decidi pela segunda op√ß√£o. </font><font style="vertical-align: inherit;">Durante a opera√ß√£o com a bateria, o rel√© interrompe essa sa√≠da do enrolamento da ponte de carregamento do retificador de diodo e durante a conex√£o de carga, proporcionando, assim, um aumento da tens√£o de carga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, para o circuito de medi√ß√£o, para feedback. Ela tamb√©m n√£o funcionar√° em tal inclus√£o. Como a tens√£o da ponte de diodos sofre suaviza√ß√£o em capacitores grandes, durante a opera√ß√£o da bateria na sa√≠da do divisor resistivo, ser√° definida uma tens√£o constante que praticamente n√£o reage √†s mudan√ßas de tens√£o no enrolamento. Portanto, a regula√ß√£o PID da tens√£o de sa√≠da por este sinal n√£o fornece. Para resolver, proponho encerrar um enrolamento de medi√ß√£o independente adicional. Com uma sa√≠da de volts 5-6. Endireite com uma ponte de diodos, alise com uma pequena capacidade com uma constante de tempo de 5-7 ms e direcione esse sinal ao ADC MK para obter feedback. Felizmente, a energia retirada desse enrolamento ser√° escassa. Portanto, a efici√™ncia geral do transformador n√£o sofrer√° praticamente, e o consumo com a bateria n√£o aumentar√° muito,a 10-15 mA. Um fio para esse enrolamento precisar√° de um fio fino, e a velocidade fornecer√° de 1 a 1,5 per√≠odos para controle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema final deste n√≥ acabou como tal. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b4d/771/c69/b4d771c69b7946bf801409b43f58f0df.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema de detec√ß√£o de rede permaneceu inalterado. </font><font style="vertical-align: inherit;">A √∫nica coisa a acrescentar √© o software anti-rejei√ß√£o das leituras do detector.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prote√ß√£o de sobrecorrente de deriva√ß√£o</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema em si n√£o mudou. </font><font style="vertical-align: inherit;">O sinal da deriva√ß√£o √© amplificado no amplificador operacional e, em seguida, √© ligado ao comparador. </font><font style="vertical-align: inherit;">A sa√≠da do comparador, quando acionada, torna-se trava atrav√©s do diodo. </font><font style="vertical-align: inherit;">O pr√≥prio sinal entra no MK e tamb√©m √© projetado para desconectar TODOS os transistores de ponte. </font><font style="vertical-align: inherit;">Tudo ficaria bem, mas o circuito de redefini√ß√£o do comparador trabalhado n√£o implementa prote√ß√£o de corrente no momento de pressionar o bot√£o RESET, como foi observado corretamente neste </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coment√°rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu vejo uma solu√ß√£o para este problema como tal. </font><font style="vertical-align: inherit;">Bot√£o "RESET" para fazer no MK. </font><font style="vertical-align: inherit;">O algoritmo no MK grava o pressionar e pressionar o bot√£o. </font><font style="vertical-align: inherit;">Em seguida, atrav√©s do transistor, redefina a prote√ß√£o. </font><font style="vertical-align: inherit;">E somente ap√≥s a chegada de um sinal ao MK de que a prote√ß√£o n√£o est√° ativa, comece a gerar PWM para a ponte. </font><font style="vertical-align: inherit;">Portanto, se a causa da sobrecarga n√£o tiver sido eliminada, a prote√ß√£o atual funcionar√° novamente e n√£o importa se o usu√°rio pressiona o bot√£o ou n√£o. </font><font style="vertical-align: inherit;">A prop√≥sito, com o toque de um bot√£o, enquanto o dispositivo estiver em opera√ß√£o, ligaremos a luz de fundo do LCD por alguns segundos. </font><font style="vertical-align: inherit;">O circuito total ficou assim.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ecd/00c/ccb/ecd00cccb910477899e4973eba55eb81.jpg"><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de rel√©</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O circuito usa 3 rel√©s para 12 volts. Dois deles t√™m uma bobina de alta resist√™ncia e contatos bastante fracos, 1 A por grupo. Para comuta√ß√£o de alta tens√£o, 220 volts √© suficiente com uma margem, porque a carga √© de 60 W na bomba e 20-60 W durante a carga da bateria. Ou seja, nos encaixamos no ch√£o amp√®res. Mas o rel√© no n√∫mero 3 j√° comuta 5 amp√©res de corrente de carga, por um tempo decente. Assim, o rel√© tendo contatos para essa corrente, a resist√™ncia da bobina j√° tem 400 Ohms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Controlaremos o rel√© atrav√©s de transistores NPN com MK. Os rel√©s ser√£o energizados apenas durante a opera√ß√£o do RIP na carga da bateria. Portanto, o tempo de opera√ß√£o do rel√© ser√° calculado v√°rias horas por semana, ou at√© menos. Por√©m, mesmo esse fato tende a reduzir ao m√≠nimo o consumo dessa corrente enquanto as bobinas do rel√© est√£o abaixo da corrente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escreveu bem como isso pode ser alcan√ßado sem recorrer a esquemas muito complicados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A imagem mostra uma unidade de controle de bobina de rel√© separada. </font></font><br>
<br>
<img src="https://habrastorage.org/files/28f/6d0/05c/28f6d005c5fb4cefa130d76e166a3d6f.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos os resistores e capacitores para esse rel√©. Tipo de rel√©: HJR4102-L-12VDC-SZ e SRD-12VDC-SL-C.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos o consumo atual do rel√© em opera√ß√£o normal. I = Upit / Rcat = 12/720 = 0,0167 A = 16,7 mA. Essa corrente ser√° consumida pela bobina. Para manter a armadura em um estado atra√≠do, o valor atual pode ser reduzido em um ter√ßo. Ou seja, I = 16,7 * (2/3) = 11 mA. Arredonde esse valor para 10 mA. Agora a resist√™ncia total deve ser. R = U / I = 12/10 * 10-3 = 1200 Ohms. Destes, 720 Ohms √© a resist√™ncia da bobina, e a resist√™ncia adicional Rr = 1200-720 = 480 Ohms sai. Escolha da linha padr√£o para o lado inferior. 470 Ohm, usaremos o tamanho padr√£o do resistor SMD 1206. A pot√™ncia dissipada desse tamanho padr√£o √© de 0,25 W. Agora calculamos a pot√™ncia que realmente se destacar√° nesse resistor. P = I * I * R = 10 * 10-3 * 10 * 10-3 * 470 = 47000 * 10-6 = 0,047 W. Portanto, o resistor nem esquenta.Por analogia, o valor do resistor para uma bobina de 400 ohm √© 200 Ohms. Vamos tirar um pouco menos da s√©rie padr√£o - 180 Ohms. A corrente de reten√ß√£o ser√° de 20 mA. A pot√™ncia dissipada desse resistor √© obtida P = 0,072 watts. Tamb√©m n√£o excede o declarado para este tamanho padr√£o de 0,25 watts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos a capacit√¢ncia dos capacitores para garantir a atual "paralisa√ß√£o" da armadura. </font><font style="vertical-align: inherit;">Vamos definir o tempo de "falha" da armadura e a inclus√£o do rel√© em 20 ms. </font><font style="vertical-align: inherit;">A corrente que flui atrav√©s da bobina neste momento deve ser de 30 mA para uma bobina "refor√ßada". </font><font style="vertical-align: inherit;">Portanto, C = t * I / U = 20 * 10-3 * 30 * 10-3 / 12 = 50 * 10-6  = 50 ŒºF. </font><font style="vertical-align: inherit;">Dobramos a capacidade, para maior seguran√ßa, ou seja, </font><font style="vertical-align: inherit;">obtenha 100 uF. </font><font style="vertical-align: inherit;">Para bobinas mais fracas, metade dessa capacidade √© suficiente.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gera√ß√£o de pulsos para ponte H</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na segunda parte da hist√≥ria, decidi que usaria uma sa√≠da PWM com MK e duas sa√≠das trocando os ombros da ponte. </font><font style="vertical-align: inherit;">Colete tudo isso na l√≥gica e envie os sinais resultantes para os principais drivers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Link para o esquema dessa abordagem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos coment√°rios, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mostrou claramente a falha dessa abordagem, porque o MK selecionado permite gerar PWM, conforme necess√°rio, para cada chave pessoal, sem problemas especiais de software.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digress√£o l√≠rica</font></font></b><div class="spoiler_text">      ,   STM32.    32     Cortex-M3, 4   4 .  , ,    ¬´¬ª  . ,   ,        .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>.    ,    ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, o circuito de forma√ß√£o de pulsos foi simplificado. </font><font style="vertical-align: inherit;">Nenhum chip l√≥gico. </font><font style="vertical-align: inherit;">Todos os quatro canais PWM diretamente do MK v√£o para os drivers. </font><font style="vertical-align: inherit;">A entrada do comparador de prote√ß√£o de corrente entra no MK, na perna, que hardware desliga o PWM em todas as sa√≠das. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo final ser√° mais ou menos assim. </font><font style="vertical-align: inherit;">Um PWM senoidal √© gerado no MC na sa√≠da de CH1 e CH1N. </font><font style="vertical-align: inherit;">Ou seja, para o acostamento da ponte, obtemos PWM nas duas chaves, at√© o fim do prazo. </font><font style="vertical-align: inherit;">Esta √© a primeira meia-onda, neste momento √© zero no CH2 e uma no CH2N, ou seja, a tecla inferior do segundo ombro est√° aberta. </font><font style="vertical-align: inherit;">A pr√≥xima meia-onda ser√° exatamente o oposto. </font><font style="vertical-align: inherit;">CH2 e CH2N atrav√©s do tempo morto, geram um PWM sinusoidal e um chega ao CH1N. </font><font style="vertical-align: inherit;">E assim por diante no ciclo, mais precisamente no DMA para o "infinito". </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vou publicar todas as solu√ß√µes de software no pr√≥ximo artigo, com c√≥digos-fonte e explica√ß√µes.</font></font></b><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumir</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s todas as altera√ß√µes nos circuitos, a </font><font style="vertical-align: inherit;">vers√£o </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">final</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> corrigida √© apresentada na forma de desenhos, bem como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CAD Dip Trace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os esquemas, bem como as especifica√ß√µes dos componentes, s√£o apresentados abaixo. </font><font style="vertical-align: inherit;">Especifica√ß√£o sob o spoiler. </font><i><font style="vertical-align: inherit;">N√∫mero da folha 1. </font></i><i><font style="vertical-align: inherit;">A imagem √© clic√°vel na </font></i><i><font style="vertical-align: inherit;">folha n¬∫ 2. </font></i><i><font style="vertical-align: inherit;">Imagem clic√°vel</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/56c/ba6/67f/56cba667fef9466497e845dc73af7d36.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/e5f/874/3e9/e5f8743e95a4480f8e8edffbd346d0c8.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especifica√ß√£o</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/24c/3c6/a22/24c3c6a22dac4bb4a56fa62e24324d9c.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/f45/6de/d21/f456ded21b2c4848a337adea98a9291b.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/277/1fe/e97/2771fee97880438ebb17a1cd729e1d37.jpg"><br>
<i>  ( )</i><br>
</div></div><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de todas as atualiza√ß√µes, as mudan√ßas se estabeleceram nesse esquema. Agora, de acordo com a especifica√ß√£o, farei um pedido para componentes de r√°dio que n√£o tenho dispon√≠veis. E, como se v√™, n√£o tenho nada, exceto resistores de centavo, capacitores, NPN - transistores e blocos de terminais. Ent√£o surgiu a tarefa de comprar componentes de r√°dio. Felizmente, para a fabrica√ß√£o de placas de circuito impresso pelo m√©todo LUT, existem todos os consum√≠veis necess√°rios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pedido principal ser√° feito na loja online </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chip-nn.ru/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas o transformador, capacitores de filme de grande capacidade ter√° que ser comprado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chipdip.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algo em um s√≥ lugar, n√£o p√¥de ser encontrado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que a declara√ß√£o de compras se parece no momento.</font></font><br>
<br>
<img src="https://habrastorage.org/files/d4f/f84/734/d4ff847344c54618bd098230bd055b21.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A quantia j√° est√° ficando decente. </font><font style="vertical-align: inherit;">Para isso devem ser adicionadas pequenas coisas, 100 rublos, taxa - 100. tela de LCD, que eu tenho estado por aqui </font><font style="vertical-align: inherit;">Na taxa de hoje, custa cerca de 500 rublos. </font><font style="vertical-align: inherit;">Al√©m disso, qualquer um por todo esse bem. </font><font style="vertical-align: inherit;">Assim, √† custa de um radioamador, chegaremos mais perto da quantidade de 3.500 rublos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como os fins de semana e feriados est√£o pr√≥ximos, farei o pedido imediatamente ap√≥s o feriado de homens de verdade.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ep√≠logo</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero agradecer a todos que participaram da discuss√£o e do "debate de ideias" ao considerar o circuito deste dispositivo. </font><font style="vertical-align: inherit;">Um ser humano especial </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AGRADECE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √†queles que descobriram coment√°rios cr√≠ticos no esquema e tamb√©m prop√¥s solu√ß√µes mais corretas e simples para alguns n√≥s. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font><br>
</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links para todas as partes do ciclo:</font></font><br>
<br>
<b><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  1.  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  2.    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  3.   </a></li>
</ol></b></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt390609/">https://habr.com/ru/post/pt390609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt390597/index.html">Compota de frutas de caf√© estufado. Conhe√ßa Cascara - o melhor amigo do ciclista</a></li>
<li><a href="../pt390599/index.html">O primeiro AVM sovi√©tico</a></li>
<li><a href="../pt390601/index.html">Clicamos no rel√© corretamente: alternando cargas poderosas</a></li>
<li><a href="../pt390605/index.html">O paciente foi submetido a uma cirurgia no c√©rebro, mergulhando no mundo da RV</a></li>
<li><a href="../pt390607/index.html">Hist√≥ria de como o Arduino MT8060 c fez amigos</a></li>
<li><a href="../pt390611/index.html">O plug-in Torrents Time, que permite assistir filmes diretamente no Thepiratebay e em outros rastreadores, √© inseguro</a></li>
<li><a href="../pt390615/index.html">Mercado Global de Com√©rcio Eletr√¥nico: Crescimento Garantido</a></li>
<li><a href="../pt390617/index.html">A Caterpillar apresentou um smartphone com um termovisor</a></li>
<li><a href="../pt390619/index.html">Por que impress√£o 3D? Arquitetura</a></li>
<li><a href="../pt390621/index.html">Cadeira de escrit√≥rio Nissan para Lazy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>