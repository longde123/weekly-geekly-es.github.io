<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏼 🌝 👨🏼‍🔧 Desenvolvimento de uma fonte de alimentação de backup de baixa potência com uma saída senoidal. Parte 3. Trabalhar com erros ⁉️ 🤘🏼 💪🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prefácio
 A série de artigos “ Desenvolvimento de uma fonte de alimentação de backup de baixa potência com uma saída senoidal ” descreve o processo de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de uma fonte de alimentação de backup de baixa potência com uma saída senoidal. Parte 3. Trabalhar com erros</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390609/"><h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefácio</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A série de artigos “ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvimento de uma fonte de alimentação de backup de baixa potência com uma saída senoidal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ” descreve o processo de projeto e criação de um RIP para uma bomba de circulação de um sistema de aquecimento. Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">segunda parte da</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> história, o autor propôs à </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunidade mundial</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desenvolvedores mais experientes e prejudica o circuito elétrico do dispositivo que está sendo desenvolvido. Como se costuma dizer, uma mente não é ruim, mas a mente coletiva de Habra - residentes do recurso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geektimes.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e usuários da comunidade </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">easyelectronics.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muito melhor </font><font style="vertical-align: inherit;">Após discussões detalhadas das soluções de circuitos propostas, foi realizado um trabalho sobre os bugs. </font><font style="vertical-align: inherit;">O circuito passou por várias mudanças críticas e não muito. </font><font style="vertical-align: inherit;">Neste artigo, tentarei argumentar por mudanças no esquema com os cálculos necessários, etc.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digressão lírica</font></font></b><div class="spoiler_text">    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">easyelectronics.ru</a>.    ,        ,           .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Começaremos a entender os esquemas iniciais. </font><font style="vertical-align: inherit;">No processo de análise, além de levar em consideração os comentários dos usuários, levaremos o circuito à </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfeição de uma</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> versão viável. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, serão apresentados os nós individuais do circuito que sofreram alterações e, no final, um circuito elétrico generalizado projetado no CAD Dip Trace.</font></font><br>
<a name="habracut"></a><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema de energia</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fonte de alimentação baseada em estabilizadores LDO a 1% não mudou. Embora muitos tenham se manifestado, por substituir o LDO em 5 volts pelo LM7805 usual, argumentando que o gabinete LMK pode dissipar muita energia. Afinal, o consumo no barramento de 5 volts será de cerca de 250 - 300 mA, o que em termos de potência de dissipação: P = (Uin-Uout) * I = (12-5) * 0,3 = 2,1 W. O que para o caso SOT - 223, é simplesmente muito alto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O consumo de corrente principal no barramento de força de 5 volts será selecionado pelo visor LCD. A luz de fundo do LCD não será constante, basicamente será desligada, de modo que o consumo atual neste barramento será metade do mesmo. Ou seja, precisamos dissipar 1W. Para fazer isso, selecione um polígono decente na placa de circuito impresso, conforme solicitado nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentários</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que não haja problemas com isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No barramento de 3,3 volts, o LDO com o polígono na placa deve funcionar sem problemas ou superaquecimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentário</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , foi expressa uma opinião sobre a capacitância de saída para esses tipos de LDO NCP1117STxx, de que eles podem ser críticos para a operação estável do estabilizador. </font><font style="vertical-align: inherit;">Vejamos a folha de dados: </font></font><br>
<img src="https://habrastorage.org/files/0c7/dfa/2ad/0c7dfa2ad9ec46f081943554a2dea6d6.JPG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelo que entendi neste diagrama, quase qualquer capacitor com capacidade de 47 microfarads e superior levará o LDO para um modo operacional estável e não é muito importante qual EMP ele possui. </font><font style="vertical-align: inherit;">Correto se eu estiver errado. </font><font style="vertical-align: inherit;">Terminamos as refeições, continuamos.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diodo Schottky</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre-se do esquema original. </font></font><br>
<br>
<img src="https://habrastorage.org/files/420/218/8de/4202188de2de48319565da8b2a76b2ba.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diodo desconecta a bateria do barramento de força da ponte. Conforme observado corretamente neste </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentário</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , muita energia será alocada no modo de operação da bateria. 10 Um diodo Schottky tem uma queda direta no diodo de 0,8 volts. Com uma corrente de 5 A, 4 W serão dissipados nela. Demais. Além disso, não quero perder 0,8 Volts. Então siga o conselho e coloque o mosfet do canal P. O IRF9310 possui uma resistência de canal aberto de 0,0046 ohms. Isso significa que a potência de dissipação será P = I * I * R = 5 * 5 * 0,0046 = 0,115 W. Um pedido e meio a menos. A queda de tensão no transistor será U = I * R = 5 * 0,0046 = 23 mV. Geralmente não é perceptível. Total de obter esse esquema.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e81/fe8/334/e81fe83345334c659cd9d0f14addfca2.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O MK gerenciará esse mosfet. </font><font style="vertical-align: inherit;">Ao trabalhar com a bateria, abra, ao carregar a bateria da rede, feche. </font><font style="vertical-align: inherit;">Tudo é lógico. </font><font style="vertical-align: inherit;">Além disso, é comparável em valor ao diodo Schottky, de modo que o custo do dispositivo neste componente não é esperado.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformador</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um erro crítico foi arrastado para este nó. Considere a opção original. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ca7/f7d/c1f/ca7f7dc1f8aa453c9910d40c0f766bf7.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com a bateria, quando a ponte funciona com um transformador, quando a corrente flui do início do enrolamento para a sua derivação, um CEM de polaridade negativa em relação ao terra do circuito ocorre no final do enrolamento. Além disso, este EMF flui através do diodo para o terra do dispositivo, criando assim um curto-circuito. Com uma tensão EMF de 3-4 volts, a corrente de curto-circuito será da ordem de várias dezenas de amperes, o que é ruim para o diodo, o enrolamento e todo o dispositivo como um todo. Ou seja, com um curto-circuito na torneira no enrolamento de baixa tensão, não será possível obter a amplitude necessária para a bomba funcionar. Nesse caso, a proteção atual também será inútil. Em uma palavra, o dispositivo não funcionará, mas também queimará o chão do circuito. Essa situação foi vista claramente em vários comentários. Por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Existem várias maneiras de sair.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enrolando um enrolamento independente completo para carregar a bateria,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deixe esse fio enrolado no ar enquanto estiver usando a bateria,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez algo mais possa surgir.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu decidi pela segunda opção. </font><font style="vertical-align: inherit;">Durante a operação com a bateria, o relé interrompe essa saída do enrolamento da ponte de carregamento do retificador de diodo e durante a conexão de carga, proporcionando, assim, um aumento da tensão de carga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, para o circuito de medição, para feedback. Ela também não funcionará em tal inclusão. Como a tensão da ponte de diodos sofre suavização em capacitores grandes, durante a operação da bateria na saída do divisor resistivo, será definida uma tensão constante que praticamente não reage às mudanças de tensão no enrolamento. Portanto, a regulação PID da tensão de saída por este sinal não fornece. Para resolver, proponho encerrar um enrolamento de medição independente adicional. Com uma saída de volts 5-6. Endireite com uma ponte de diodos, alise com uma pequena capacidade com uma constante de tempo de 5-7 ms e direcione esse sinal ao ADC MK para obter feedback. Felizmente, a energia retirada desse enrolamento será escassa. Portanto, a eficiência geral do transformador não sofrerá praticamente, e o consumo com a bateria não aumentará muito,a 10-15 mA. Um fio para esse enrolamento precisará de um fio fino, e a velocidade fornecerá de 1 a 1,5 períodos para controle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema final deste nó acabou como tal. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b4d/771/c69/b4d771c69b7946bf801409b43f58f0df.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema de detecção de rede permaneceu inalterado. </font><font style="vertical-align: inherit;">A única coisa a acrescentar é o software anti-rejeição das leituras do detector.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proteção de sobrecorrente de derivação</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema em si não mudou. </font><font style="vertical-align: inherit;">O sinal da derivação é amplificado no amplificador operacional e, em seguida, é ligado ao comparador. </font><font style="vertical-align: inherit;">A saída do comparador, quando acionada, torna-se trava através do diodo. </font><font style="vertical-align: inherit;">O próprio sinal entra no MK e também é projetado para desconectar TODOS os transistores de ponte. </font><font style="vertical-align: inherit;">Tudo ficaria bem, mas o circuito de redefinição do comparador trabalhado não implementa proteção de corrente no momento de pressionar o botão RESET, como foi observado corretamente neste </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentário</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu vejo uma solução para este problema como tal. </font><font style="vertical-align: inherit;">Botão "RESET" para fazer no MK. </font><font style="vertical-align: inherit;">O algoritmo no MK grava o pressionar e pressionar o botão. </font><font style="vertical-align: inherit;">Em seguida, através do transistor, redefina a proteção. </font><font style="vertical-align: inherit;">E somente após a chegada de um sinal ao MK de que a proteção não está ativa, comece a gerar PWM para a ponte. </font><font style="vertical-align: inherit;">Portanto, se a causa da sobrecarga não tiver sido eliminada, a proteção atual funcionará novamente e não importa se o usuário pressiona o botão ou não. </font><font style="vertical-align: inherit;">A propósito, com o toque de um botão, enquanto o dispositivo estiver em operação, ligaremos a luz de fundo do LCD por alguns segundos. </font><font style="vertical-align: inherit;">O circuito total ficou assim.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ecd/00c/ccb/ecd00cccb910477899e4973eba55eb81.jpg"><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de relé</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O circuito usa 3 relés para 12 volts. Dois deles têm uma bobina de alta resistência e contatos bastante fracos, 1 A por grupo. Para comutação de alta tensão, 220 volts é suficiente com uma margem, porque a carga é de 60 W na bomba e 20-60 W durante a carga da bateria. Ou seja, nos encaixamos no chão ampères. Mas o relé no número 3 já comuta 5 ampéres de corrente de carga, por um tempo decente. Assim, o relé tendo contatos para essa corrente, a resistência da bobina já tem 400 Ohms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Controlaremos o relé através de transistores NPN com MK. Os relés serão energizados apenas durante a operação do RIP na carga da bateria. Portanto, o tempo de operação do relé será calculado várias horas por semana, ou até menos. Porém, mesmo esse fato tende a reduzir ao mínimo o consumo dessa corrente enquanto as bobinas do relé estão abaixo da corrente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escreveu bem como isso pode ser alcançado sem recorrer a esquemas muito complicados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A imagem mostra uma unidade de controle de bobina de relé separada. </font></font><br>
<br>
<img src="https://habrastorage.org/files/28f/6d0/05c/28f6d005c5fb4cefa130d76e166a3d6f.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos os resistores e capacitores para esse relé. Tipo de relé: HJR4102-L-12VDC-SZ e SRD-12VDC-SL-C.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos o consumo atual do relé em operação normal. I = Upit / Rcat = 12/720 = 0,0167 A = 16,7 mA. Essa corrente será consumida pela bobina. Para manter a armadura em um estado atraído, o valor atual pode ser reduzido em um terço. Ou seja, I = 16,7 * (2/3) = 11 mA. Arredonde esse valor para 10 mA. Agora a resistência total deve ser. R = U / I = 12/10 * 10-3 = 1200 Ohms. Destes, 720 Ohms é a resistência da bobina, e a resistência adicional Rr = 1200-720 = 480 Ohms sai. Escolha da linha padrão para o lado inferior. 470 Ohm, usaremos o tamanho padrão do resistor SMD 1206. A potência dissipada desse tamanho padrão é de 0,25 W. Agora calculamos a potência que realmente se destacará nesse resistor. P = I * I * R = 10 * 10-3 * 10 * 10-3 * 470 = 47000 * 10-6 = 0,047 W. Portanto, o resistor nem esquenta.Por analogia, o valor do resistor para uma bobina de 400 ohm é 200 Ohms. Vamos tirar um pouco menos da série padrão - 180 Ohms. A corrente de retenção será de 20 mA. A potência dissipada desse resistor é obtida P = 0,072 watts. Também não excede o declarado para este tamanho padrão de 0,25 watts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calculamos a capacitância dos capacitores para garantir a atual "paralisação" da armadura. </font><font style="vertical-align: inherit;">Vamos definir o tempo de "falha" da armadura e a inclusão do relé em 20 ms. </font><font style="vertical-align: inherit;">A corrente que flui através da bobina neste momento deve ser de 30 mA para uma bobina "reforçada". </font><font style="vertical-align: inherit;">Portanto, C = t * I / U = 20 * 10-3 * 30 * 10-3 / 12 = 50 * 10-6  = 50 μF. </font><font style="vertical-align: inherit;">Dobramos a capacidade, para maior segurança, ou seja, </font><font style="vertical-align: inherit;">obtenha 100 uF. </font><font style="vertical-align: inherit;">Para bobinas mais fracas, metade dessa capacidade é suficiente.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geração de pulsos para ponte H</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na segunda parte da história, decidi que usaria uma saída PWM com MK e duas saídas trocando os ombros da ponte. </font><font style="vertical-align: inherit;">Colete tudo isso na lógica e envie os sinais resultantes para os principais drivers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Link para o esquema dessa abordagem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos comentários, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mostrou claramente a falha dessa abordagem, porque o MK selecionado permite gerar PWM, conforme necessário, para cada chave pessoal, sem problemas especiais de software.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digressão lírica</font></font></b><div class="spoiler_text">      ,   STM32.    32     Cortex-M3, 4   4 .  , ,    «»  . ,   ,        .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>.    ,    ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, o circuito de formação de pulsos foi simplificado. </font><font style="vertical-align: inherit;">Nenhum chip lógico. </font><font style="vertical-align: inherit;">Todos os quatro canais PWM diretamente do MK vão para os drivers. </font><font style="vertical-align: inherit;">A entrada do comparador de proteção de corrente entra no MK, na perna, que hardware desliga o PWM em todas as saídas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo final será mais ou menos assim. </font><font style="vertical-align: inherit;">Um PWM senoidal é gerado no MC na saída de CH1 e CH1N. </font><font style="vertical-align: inherit;">Ou seja, para o acostamento da ponte, obtemos PWM nas duas chaves, até o fim do prazo. </font><font style="vertical-align: inherit;">Esta é a primeira meia-onda, neste momento é zero no CH2 e uma no CH2N, ou seja, a tecla inferior do segundo ombro está aberta. </font><font style="vertical-align: inherit;">A próxima meia-onda será exatamente o oposto. </font><font style="vertical-align: inherit;">CH2 e CH2N através do tempo morto, geram um PWM sinusoidal e um chega ao CH1N. </font><font style="vertical-align: inherit;">E assim por diante no ciclo, mais precisamente no DMA para o "infinito". </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vou publicar todas as soluções de software no próximo artigo, com códigos-fonte e explicações.</font></font></b><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumir</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Após todas as alterações nos circuitos, a </font><font style="vertical-align: inherit;">versão </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">final</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> corrigida é apresentada na forma de desenhos, bem como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CAD Dip Trace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os esquemas, bem como as especificações dos componentes, são apresentados abaixo. </font><font style="vertical-align: inherit;">Especificação sob o spoiler. </font><i><font style="vertical-align: inherit;">Número da folha 1. </font></i><i><font style="vertical-align: inherit;">A imagem é clicável na </font></i><i><font style="vertical-align: inherit;">folha nº 2. </font></i><i><font style="vertical-align: inherit;">Imagem clicável</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/56c/ba6/67f/56cba667fef9466497e845dc73af7d36.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/e5f/874/3e9/e5f8743e95a4480f8e8edffbd346d0c8.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especificação</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/24c/3c6/a22/24c3c6a22dac4bb4a56fa62e24324d9c.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/f45/6de/d21/f456ded21b2c4848a337adea98a9291b.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/277/1fe/e97/2771fee97880438ebb17a1cd729e1d37.jpg"><br>
<i>  ( )</i><br>
</div></div><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de todas as atualizações, as mudanças se estabeleceram nesse esquema. Agora, de acordo com a especificação, farei um pedido para componentes de rádio que não tenho disponíveis. E, como se vê, não tenho nada, exceto resistores de centavo, capacitores, NPN - transistores e blocos de terminais. Então surgiu a tarefa de comprar componentes de rádio. Felizmente, para a fabricação de placas de circuito impresso pelo método LUT, existem todos os consumíveis necessários. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pedido principal será feito na loja online </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chip-nn.ru/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas o transformador, capacitores de filme de grande capacidade terá que ser comprado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chipdip.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algo em um só lugar, não pôde ser encontrado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É assim que a declaração de compras se parece no momento.</font></font><br>
<br>
<img src="https://habrastorage.org/files/d4f/f84/734/d4ff847344c54618bd098230bd055b21.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A quantia já está ficando decente. </font><font style="vertical-align: inherit;">Para isso devem ser adicionadas pequenas coisas, 100 rublos, taxa - 100. tela de LCD, que eu tenho estado por aqui </font><font style="vertical-align: inherit;">Na taxa de hoje, custa cerca de 500 rublos. </font><font style="vertical-align: inherit;">Além disso, qualquer um por todo esse bem. </font><font style="vertical-align: inherit;">Assim, à custa de um radioamador, chegaremos mais perto da quantidade de 3.500 rublos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como os fins de semana e feriados estão próximos, farei o pedido imediatamente após o feriado de homens de verdade.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epílogo</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero agradecer a todos que participaram da discussão e do "debate de ideias" ao considerar o circuito deste dispositivo. </font><font style="vertical-align: inherit;">Um ser humano especial </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AGRADECE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> àqueles que descobriram comentários críticos no esquema e também propôs soluções mais corretas e simples para alguns nós. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font><br>
</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links para todas as partes do ciclo:</font></font><br>
<br>
<b><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  1.  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  2.    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .  3.   </a></li>
</ol></b></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt390609/">https://habr.com/ru/post/pt390609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt390597/index.html">Compota de frutas de café estufado. Conheça Cascara - o melhor amigo do ciclista</a></li>
<li><a href="../pt390599/index.html">O primeiro AVM soviético</a></li>
<li><a href="../pt390601/index.html">Clicamos no relé corretamente: alternando cargas poderosas</a></li>
<li><a href="../pt390605/index.html">O paciente foi submetido a uma cirurgia no cérebro, mergulhando no mundo da RV</a></li>
<li><a href="../pt390607/index.html">História de como o Arduino MT8060 c fez amigos</a></li>
<li><a href="../pt390611/index.html">O plug-in Torrents Time, que permite assistir filmes diretamente no Thepiratebay e em outros rastreadores, é inseguro</a></li>
<li><a href="../pt390615/index.html">Mercado Global de Comércio Eletrônico: Crescimento Garantido</a></li>
<li><a href="../pt390617/index.html">A Caterpillar apresentou um smartphone com um termovisor</a></li>
<li><a href="../pt390619/index.html">Por que impressão 3D? Arquitetura</a></li>
<li><a href="../pt390621/index.html">Cadeira de escritório Nissan para Lazy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>