<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏍️ 👨🏽‍🍳 🍭 我们如何恢复城际巴士时间表 👩🏻‍🌾 😬 🌥️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="与所有正常市场一样，公交车票已经在线出售了几年。 不必在汽车站的收银台排队等候接收收据。 在俄罗斯，可以在线购买多达60％的路线（在更好的日子，考虑到灰色航班的估算有些模糊）。 包括我们，图图。 

 我们想要的第一件事就是也要在线获取日程表，然后单击几下就可以买票。 我们习惯于解决此类问题，并且以...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们如何恢复城际巴士时间表</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tuturu/blog/411629/"><img src="https://habrastorage.org/webt/zq/0q/cb/zq0qcbx7jnixdqezvc2pwx3doqs.jpeg"><br><br> 与所有正常市场一样，公交车票已经在线出售了几年。 不必在汽车站的收银台排队等候接收收据。 在俄罗斯，可以在线购买多达60％的路线（在更好的日子，考虑到灰色航班的估算有些模糊）。 包括我们，图图。 <br><br> 我们想要的第一件事就是也要在线获取日程表，然后单击几下就可以买票。 我们习惯于解决此类问题，并且以某种方式在铁路运输中吃掉了狗。 公交车乍一看看上去并不复杂。 这只是业务—与公交车站自动化系统进行谈判，通过API卸载航班并进行一些梳理。 <br><br>  <b>他们说，工作简单。</b> 他们说，这是一个为期几天的项目。 <br><br> 我们的误解： <br><br>  1.该国所有公交车站都是自动化的。 <br>  2.好的，大多数都是自动化的。 <br>  3.不在笔记本电脑上进行记帐。 <br>  4.好的，但是总有一些方法可以远程了解时间表。 <br>  5.自动化的那些平均显示相同的路径。 <br>  6.好的，至少那些由同一系统自动执行的过程同样显示相同的路线。 <br>  7.好的，没有自动化，至少有时间表。 <br>  8.好吧，必须有一个时间表，因为没有时间表，只有非法交易！ <br>  9.非法流量还不够。 <br>  10.好的，市场份额不到10％。 <br>  11.可以在那儿买票，然后回来。 <br>  12.没有单向路线。 <br>  13.好吧，至少公共汽车要回来了！ 很久以前... <br>  14.一年内不能离开300辆公共汽车去另一个城市，并且不能返回。 <br>  15.站点具有不同的唯一名称。 <br>  16.名为“转弯”或“加油”的停止不会有问题。 <a name="habracut"></a><br>  17.该区域内的站点名称不同。 <br>  18.名称为“ Route”的站点不会有任何问题。 <br>  19.城市内的车站名称不同。 <br>  20.一个站点只能有一个名字。 <br>  21.好的，不超过五个别名。 <br>  22.这些别名也很独特。 <br>  23.无论如何，正式文件中的停靠站都有坐标。 <br>  24.好的，停靠站至少标有城市/地区。 <br>  25.如果有时间表安排停车，那就知道巴士的来历和去向。 <br>  26.好的，总能从文档中找到。 <br>  27.该死，至少有一个特定站点的时间表！ <br>  28.路线城市A-城市B从中心到中心。 <br>  29.好吧，至少他通往B市。 <br>  30.好吧，至少有一次他导致了B市。 <br>  31.公交车无法在路线中途消失。 <br>  32.在某一特定时间的一次航班=一辆公共汽车。 <br>  33.公共汽车的行驶速度不能超过每小时120公里。 <br>  34.市中心是一个可以理解的地方。 <br>  35.好的，这至少是主要的公交车站。 <br>  36.好的，这至少是某种公交车站。 <br>  37.好的，至少在这个城市。 <br>  38.时间表不一定是一个时间表，但是车站系统对特定航班的反应是不同的。 <br>  39.如果您可以在那买票，那么在抵达时可以买回程票。 <br>  40.往返票的费用相同。 <br>  41.好吧，它们的价格不能相差一半。 <br><br> 这是主要的。 每天我们都会在列表中添加一些新的小东西。 现在让我们再谈一点。 首先-关于基础知识，官方航班。 <br><br><h3> 什么是灰色飞行？ </h3><br> 铁路上有不同的火车，不同的承运人和火车彼此之间非常积极地竞争。 但是，当您购买车票时，最终会在一个窗口中购买票，因为基础设施取决于俄罗斯铁路公司。 他们的栏杆是他们的标准，他们将无法塌陷。 <br><br> 航空业中的承运人数量已经增加了一个数量级，但是却有大型节点-机场，通用标准和单个信息系统（更确切地说是多个），其中每个节点都有基本的唯一标识符。 <br><br> 信息化已经很久了，但是就IT而言，市场类似于鸭嘴兽。 这是一千个公交车站和一万个运输公司。 是的，有像Mostransavto这样的大型集群，但也有带有一条生锈总线的IP。 甚至乡村的小型汽车站也有自己的标准。 <br><br> 最有趣的是：如果在铁路和空中没有非法运输，那么公共汽车市场在很大程度上仍然是“灰色”的。 我说的是“在公共汽车站附近的车站停下来”以接载更多的乘客，例如谈论同伴旅行的小巴。 <br><br> 如果火车的售票员从车站接载乘客以获取现金并将其放在车厢中，那么这当然是灰色的交通工具。 但是飞行本身并不是“灰色”。 在公共汽车运输中，路线和时间表很重要。 如果您乘坐公交车并在其中乘坐乘客，那么这要么是一次定做的一次航班（包机，比如提前确定乘客清单的包机），要么是非商业性运输（公交车去购物中心或公交车去办公室）从地铁）。 <br><br> 在瞪羚（Gazelle）遇到了朋友，开车去了小屋-您无权出售门票。 或向法人实体支付约20万卢布的罚款。 <br><br>  “灰色”航班要么看上去像是已订购的东西，但是却没有（非法售票），或者仅仅是无证旅客旅行，从逻辑上讲应该是免费的，但实际上，驾驶员是在为钱收钱票证，不发行任何证明文件。 <br><br> 而且，尽管最近这种情况较少，但也可以使用公交车站的基础设施进行“灰色”飞行。 这是当乘客合法降落，但下船是在非法停车点时。 <br><br> 如果在灰色飞行中发生了什么事，这就是您的问题。 对于官员来说，这是一个承运人的问题。 应该注意的是，灰色运载工具的运行和休闲时间表是不受管制的。 另外，“灰色”驾驶员不会接受旅行前的医疗检查。 <br><br><h3> 什么是“在线购票”？ </h3><br> 当俄罗斯大胆地进入数字时代时，市场的无形之手表明有必要在线出售门票。 从根本上说，对于公交车站来说，这更有利可图。 <br><br> 但是，由于市场是分散的，通常，以下实体在起作用-聚合器。 有几种主要的票务系统，还有数十种较小的票务系统。 公交车站可以获取自己的信息系统，并尝试以某种方式更改大型站点的数据。 <br><br> 俄罗斯的三大自动化厂商是E-traffic，KVC和Avibus。 它们使公交车站自动化，并允许您在公交车站或承运商不介意的情况下打开聚合器的API。 通过他们的系统，您可以获取汽车站或承运人的门票。 例如，“大国巴士”使我们可以直接访问他们的路线-这就是最大的参与者直接建立工作的方式。 但是对于那些在80年代购买了公共汽车并出行的企业家来说，这种方式是行不通的。 或者，有些运营商在没有Internet的情况下可以正常运行40年，根本不理解为什么需要它。 试图将所有这些都收集到一个协会中（让我提醒您，成千上万的法人实体和个体企业家），他们都友好而真诚地想知道为什么这样做是必要的。 <br><br> 我们通过集合器专门与小型承运人合作，该集合器在出发巴士站的层面上收集其航班。 <br><br> 市场上的下一个主要障碍是打印机票的要求（更确切地说，是路线收据）。 您只要手里拿着护照，就可以通过电子注册上车。 登机前，您会在机场到处打印机票。 但是在公共汽车上-寻找打印机，公共汽车站并不总是提供此类服务。 幸运的是，这里的纸张必须像在铁路上一样被击败。 随着时间的流逝。 <br><br><h3> 现在流着眼泪 </h3><br> 自动化系统，甚至最大的自动化系统，都可以在本地运行。 也就是说，他们使城市（至多是该地区）自动化。 然后，如果可能，请转到附近的。 <br> 因此，所有系统都使用非常简单（或完全不使用）的地理数据结构。 停靠点可能没有这样的参数，因为坐标通常也不存在区域/区域/区域。 <br><br> 这意味着，例如，您将来自两个系统的数据混合在一起，以便可以在区域间路线上购买往返票，则需要将所有数据停靠在一种表格上。 <br><br> 结果，我们必须编写具有正确结构和数据集的自己的地理数据库。 作为基础，他们采用了OpenStreetMap。 <br><br> 来自可集成系统的地理对象已经与来自主数据库的地理对象进行了比较，并尝试附加到它们。 在集成系统中，有很多站点，例如“ Track”，“ Turn”等，它们实际上是路线的一部分。 诸如Aleksandrovka，Mikhaylovka等之类的名字总是令人惊讶，因为在俄罗斯有数十甚至数百个这样的村庄。 <br><br> 但是我们是数学家！ 解决方案：调整引擎，这将建立一个假设，即公交车将有时间在路线的已知（附加）点之间到达-哪个Mikhailovka？ 事实可能并非如此。 顺便说一句，这意味着要么不明原因就被隐藏在那里，要么是20年前的米哈伊洛夫卡（Mikhailovka）或其他。 您需要打电话问当地人。 <br><br> 更有趣。 并非所有系统都在站点上发送数据，并且乘客可能不知道其到达的位置或公共汽车的离开位置。 在不同的系统中，相同的停靠点被不同地调用。 有时，点被标记为实质点，这很重要，例如，如果乘客购买了前往城市的门票，而公交车在城市郊区的高速公路上停下来并继续行驶。 从信息系统的角度来看，一个城市可以是一个对象，而乘客则可以步行10公里。 <br><br> 非常困难，我们已经收到并继续收到必要的数据。 在同一阶段，在没有自动化的城市，我们要求人们提供帮助-从汽车站发送纸片照片。 后来，这些纸张发挥了非常重要的作用：我们使用它们检查了假设的准确性，例如，关于公共汽车的反向运动。 <br><br> 是的 反向运动通常是恢复路线的任务。 因为A-B是一个区域的一条路线，而B-A是另一区域的另一条路线。 它们可以位于不同的信息系统中。 他们的票在不同的车站出售。 票房不知道时间表，但司机知道。 <br><br> 假设是，基于有时公交车有时会返回家中并且其在路线上的数量受到限制的想法，可以数学地预测公交车沿路线的运动。 总的来说，这是正确的。 通常，由于在某些情况下公交车开往另一个城市，然后消失了几周（显然是在其他路线上），然后突然发现自己在出发城市。 这只是时间表，有助于赶上此类案件。 <br><br> 仍然需要胶水飞行。 因为在不同的系统中，也可以以不同的方式考虑相同的飞行。 甚至在稍有不同的时间离开。 因此，例如，四个航班可以在20:00进入时间表。 我们必须编写类似感知哈希的机制-根据4-5个参数比较来自不同系统的航班。 需要类似的方案将A-B-C航班相耦合-有时这是一次实际飞行，但在信息系统中是两次。 <br><br><h3> 时间表变更 </h3><br> 与我们最喜欢的电动火车相比，该火车的所有东西都可以自动执行一百次，而且还经常更改，而公交车的更改频率则要低得多。 因此，您需要就新的路线图和旅行时间达成一致。 更新时间表的过程非常简单，搜索缓存也不是很复杂-至少可以预热。 <br><br><h3> 发生什么事了 </h3><br><img src="https://habrastorage.org/webt/sp/iz/o2/spizo2_fx6ftwn4sbamfkut4dig.png"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公共汽车时刻表顿河畔罗斯托夫—莫斯科</a></i> <br><br> 现在，我们有机会向用户展示航班信息，并能够在穿越俄罗斯的40％至50％的公交旅程中购买公交车票。 在50-60％的用户中没有找到有关可用航班的任何信息（尽管他们实际上已经出发，并被告知他们已经出发）。 因此，我们决定走上至少关闭基本信息需求之路，同时扩大购买门票的种类。 <br><br> 我们可以以与通常的车辆流量差异相同的错误程度恢复路线。 <br><br> 嗯，就像火车和飞机一样，我们正在获得所有航班的大量评论数据库。 这使您可以非常清楚地了解每条路线，公共汽车的功能以及乘客可以期待的惊喜。 <br><br> 这里还有更多关于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公共汽车在俄罗斯的总体运行方式的信息。</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN411629/">https://habr.com/ru/post/zh-CN411629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN411613/index.html">泰坦之战：比较PocketBook 740和Amazon Kindle Oasis 2017的旗舰阅读器</a></li>
<li><a href="../zh-CN411617/index.html">丰田普锐斯（Restayl）媒体系统</a></li>
<li><a href="../zh-CN411621/index.html">SpaceX将在洛杉矶建造Big Fucking Rocket</a></li>
<li><a href="../zh-CN411623/index.html">科学家创造了一种分解塑料的酶</a></li>
<li><a href="../zh-CN411625/index.html">ESP-01S上的Radio-86RK</a></li>
<li><a href="../zh-CN411631/index.html">由于Durov计划推出自己的加密货币，俄罗斯的电报可能会被封锁</a></li>
<li><a href="../zh-CN411633/index.html">妈妈的怀孕，分娩和眼睛健康</a></li>
<li><a href="../zh-CN411635/index.html">Microsoft已打开文件管理器的源代码</a></li>
<li><a href="../zh-CN411637/index.html">数十亿年前，行星的细菌在太阳系中被摧毁。</a></li>
<li><a href="../zh-CN411639/index.html">科学家们开发了用于生产卷状石墨烯的技术</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>