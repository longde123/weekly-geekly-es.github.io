<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüíª üéÖüèæ üëÇüèº Ranger la playlist torrent-TV (Super Wash) üñïüèΩ üë©üèø‚Äçüöí üôÜüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD Le service Torrent-TV, qui √©tait la principale source de contenu, est mort, donc l'article est vide de sens pratique. 

 Les flux du service Torre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ranger la playlist torrent-TV (Super Wash)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438842/"> <b>UPD</b>  <b>Le service Torrent-TV, qui √©tait la principale source de contenu, est mort, donc l'article est vide de sens pratique.</b> <br><br>  Les flux du service Torrent-TV ill√©gal (Super Wash) sont des flux tr√®s majoritairement originaux d'op√©rateurs ou d'un satellite sans serrage.  Ce sont principalement des flux vid√©o entrelac√©s.  Torrent TV offre la meilleure qualit√© possible, mais une faible stabilit√©.  Aujourd'hui, il y a des cha√Ænes, demain non.  Aujourd'hui, certaines cha√Ænes fonctionnent bien, demain c'est mauvais.  Ce service n'est pas adapt√© √† une utilisation continue sans probl√®me - pour laquelle ils ont pay√©, c'est-√†-dire  n'a pas pay√©, puis ils ont re√ßu.  Mais c'est g√©nial lorsque vous avez besoin de regarder quelque chose de haute qualit√© (si la cha√Æne fonctionne de mani√®re stable √† ce moment-l√†).  Un autre probl√®me est la formation d'une liste de lecture personnelle pratique.  Cela sera discut√© dans une note. <br><br><img src="https://habrastorage.org/webt/-q/pn/q4/-qpnq4tysuha1lgfmqtcv7uu3ha.png"><br><a name="habracut"></a><br>  La liste de lecture torrent-TV de base (Super Wash) contient plus de 1200 cha√Ænes.  Toutes sortes de r√©gions, diff√©rents pays, doublons de SD et HD, diff√©rents canaux √† ordures, etc. 200-300 cha√Ænes appartiennent aux t√©l√©spectateurs russes.  Cependant, tout le monde n'est pas √† l'aise avec le groupe de canaux adopt√©.  Il semblerait que vous pouvez prendre une liste de lecture de Torrent TV, l'arranger selon les besoins de l'√¢me du perfectionniste.  Le probl√®me est que les liens AceStream vers les cha√Ænes changent p√©riodiquement et la liste de lecture pr√©par√©e deviendra inutile.  C'est-√†-dire  Vous avez besoin de la g√©n√©ration automatique d'une nouvelle liste de lecture mise √† jour sous une forme qui vous convient.  C'est ce que nous ferons. <br><br>  <b>Vous aurez besoin de:</b> <br><br><ul><li>  Exp√©rience dans la configuration de programmes pour regarder Torrent TV (¬´Super Wash¬ª) et savoir ce que c'est. </li><li>  Routeur avec prise en charge Entware (si n√©cessaire, et certaines comp√©tences, vous pouvez facilement adapter les instructions pour OpenWrt ou Entware sur les bo√Ætes elles-m√™mes). </li></ul><br>  <b>La note ne traite pas des probl√®mes:</b> <br><br><ul><li>  Choisir et configurer un gestionnaire IPTV. </li><li>  Param√®tres syst√®me dans leur ensemble pour regarder Torrent TV. </li><li>  Caract√©ristiques des bo√Ætiers Android sp√©cifiques pour travailler avec la vid√©o entrelac√©e en g√©n√©ral et Torrent TV en particulier. </li></ul><br>  Nous utiliserons le programme sur le routeur qui, √† la demande du lien, t√©l√©chargera la playlist Torrent-TV actuelle, en formera une nouvelle playlist et lui donnera: <br><br><ul><li>  Votre propre liste de cha√Ænes bas√©e sur la liste pr√©par√©e des cha√Ænes pr√©f√©r√©es. </li><li>  Vous pouvez exclure automatiquement les canaux SD s'il existe une correspondance HD pour eux. </li><li>  Triez les groupes et leurs noms selon votre d√©sir. </li><li>  Affichage du nom de la cha√Æne comme vous le souhaitez. </li><li>  Triez les cha√Ænes dans un groupe par HD / SD (principale) et par nom. </li><li>  Liens int√©gr√©s aux sources EPG. </li><li>  La source des logos (ainsi que les logos eux-m√™mes) et la conformit√© EPG pour les cha√Ænes de votre choix. </li></ul><br><h2>  Comment tout fonctionnera-t-il apr√®s le r√©glage? </h2><br>  Ajoutez un lien vers la liste de lecture <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://192.168.0.1:81/playlist.cgi</a> (remplacez 192.168.0.1 par l'adresse interne de votre routeur) dans votre gestionnaire IPTV.  C'est fait. <br><br><img src="https://habrastorage.org/webt/cm/on/1u/cmon1uarl1wclz_9v5zxk2f-p34.png"><br><br>  Le principe de fonctionnement est tr√®s simple.  Le script playlist.cgi sur le routeur lance le programme ttv.py, qui, bas√© sur la liste de lecture torrent-TV actuelle (charg√©e au moment de l'acc√®s) et la liste donn√©e des cha√Ænes pr√©f√©r√©es, g√©n√®re une nouvelle liste de lecture et la donne ensuite. <br><br><h2>  Installation du logiciel n√©cessaire sur le routeur </h2><br>  Connectez-vous via SSH au routeur.  Sous Windows, vous pouvez utiliser le client <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PuTTY</a> pour connecter la connexion. <br><br>  Installez le logiciel n√©cessaire: <br><br><pre><code class="bash hljs">opkg update opkg install wget ca-certificates mc python3 lighttpd-mod-cgi</code> </pre> <br>  <b>wget</b> est un programme de t√©l√©chargement de fichiers.  Il sera n√©cessaire uniquement pour la configuration initiale. <br><br>  <b>ca-certificats</b> - certificats pour wget. <br><br>  <b>mc</b> - Gestionnaire de fichiers Midnight Commander.  Il n'est n√©cessaire qu'en raison de l'√©diteur mcedit pratique.  Si vous avez l'habitude d'utiliser un autre √©diteur de texte, alors mc ne peut pas √™tre install√©. <br><br>  <b>python3</b> est un interpr√©teur Python. <br><br>  <b>lighttpd-mod-cgi</b> - serveur web lighttpd. <br><br><h2>  T√©l√©charger les fichiers principaux </h2><br><pre> <code class="bash hljs">mkdir -p /opt/etc/ttv wget --no-check-certificate -O /opt/etc/ttv/ttv.py https://raw.githubusercontent.com/Kyrie1965/ttv/master/ttv.py wget --no-check-certificate -O /opt/share/www/playlist.cgi https://raw.githubusercontent.com/Kyrie1965/ttv/master/playlist.cgi chmod +x /opt/share/www/playlist.cgi</code> </pre> <br>  Je parlerai de leur rendez-vous plus tard, mais pour l'instant je vais simplement montrer le contenu.  Je ne trouve rien √† redire avec le code Python, jusqu'√† ce moment je n'ai jamais rien √©crit en Python. <br><br><div class="spoiler">  <b class="spoiler_title">Contenu /opt/etc/ttv/ttv.py</b> <div class="spoiler_text"><pre> <code class="python hljs">PLAYLIST_LOAD_URL = <span class="hljs-string"><span class="hljs-string">"http://91.92.66.82/trash/ttv-list/as.all.tag.player.m3u"</span></span> TEMPLATE_SAVE_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/template.txt"</span></span> FAVORITES_LOAD_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/favorites.txt"</span></span> PLAYLIST_SAVE_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/playlist.m3u"</span></span> LOGOS_URL = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-comment"><span class="hljs-comment">#LOGOS_URL = "https://raw.githubusercontent.com/Kyrie1965/ttv/master/logos/{}" #LOGOS_URL = "{}" STREAM_URL = "http://127.0.0.1:6878/ace/getstream?id={}&amp;.mp4" #STREAM_URL = "acestream://{}" EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz" #EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz,http://programtv.ru/xmltv.xml.gz,http://api.torrent-tv.ru/ttv.xmltv.xml.gz" import re import urllib.request import os from operator import itemgetter as i from functools import cmp_to_key from urllib.parse import urlencode import gzip def cmp(a, b): return (a &gt; b) - (a &lt; b) def multikeysort(items, columns): comparers = [ ((i(col[1:].strip()), -1) if col.startswith('-') else (i(col.strip()), 1)) for col in columns ] def comparer(left, right): comparer_iter = ( cmp(fn(left), fn(right)) * mult for fn, mult in comparers ) return next((result for result in comparer_iter if result), 0) return sorted(items, key=cmp_to_key(comparer)) def loadChannels(content): lines = content.splitlines() returnChannels = {} pattern = re.compile("group-title=\"(.*?)\"") pattern2 = re.compile("tvg-logo=\"(.*?)\"") channelName = "" channelGroup = "" channelLogoLink = "" channelStreamID = "" waitURI = False for line in lines: if line.startswith("acestream"): if waitURI: channelStreamID = line[12:] HD = False if ("HD" in channelName) or ("UHD" in channelName) or ("4K" in channelName): HD = True tmpDict = {"name": channelName, "group": channelGroup, "stream": channelStreamID, "hd": HD, "logolink": channelLogoLink} returnChannels[channelName.upper()] = tmpDict waitURI = False elif line.startswith("#EXTINF"): index = line.rfind("\",") if (index == -1): continue channelName = line[index+2:] match = pattern.search(line) if match: channelGroup = match.group(1) else: channelGroup = "" match = pattern2.search(line) if match: channelLogoLink = match.group(1) else: channelLogoLink = "" waitURI = True return returnChannels def saveTemplate(content, channels, path): lines = content.splitlines() pattern = re.compile("group-title=\"(.*?)\"") waitURI = False channelName = "" channelReplace = "" channelNewName = "" channelEPG = "" channelGroup = "" channelStreamID = "" groupDict = {} currentGroup = 1 template="" for line in lines: if line.startswith("acestream"): if waitURI: channelStreamID = line[12:] template += channelName template += "/" template += channelReplace template += "/" template += channelNewName template += "/" template += channelEPG template += "/" template += channelName + ".png" template += "/" template += channelGroup template += "\n" waitURI = False elif line.startswith("#EXTINF"): x = line.split("\",") if (len(x) != 2): continue channelName = x[1] channelNewName = x[1] channelEPG = x[1] if (channels.get(channelName.upper() + " HD") != None): channelReplace = channelName + " HD" else: channelReplace = "-" match = pattern.search(x[0]) if match: channelGroup = match.group(1) if (groupDict.get(channelGroup)): channelGroup = groupDict.get(channelGroup) else: newGroupName = "{:02d}_{}".format(currentGroup, channelGroup) currentGroup += 1 groupDict[channelGroup] = newGroupName channelGroup = newGroupName else: channelGroup = "00_Unsigned" waitURI = True file = open(path,'w', encoding='utf-8') file.write(template) file.close() return def loadFavorites(content): returnChannels = {} lines = content.splitlines() for line in lines: parts = line.split('/') if len(parts) == 6: tmpDict = {"name": parts[0], "replace": parts[1], "newName": parts[2], "EPG": parts[3], "logo": parts[4], "group": parts[5]} returnChannels[parts[0].upper()] = tmpDict elif len(parts) == 5: #    tmpDict = {"name": parts[0], "replace": parts[1], "newName": parts[2], "EPG": parts[3], "group": parts[4], "logo": parts[0] + ".png"} returnChannels[parts[0].upper()] = tmpDict return returnChannels def savePlaylist(channels, favorites, path): returnChannels = [] currentChannels = set() for key, chDict in favorites.items(): if chDict["replace"] != "-": if favorites.get(chDict["replace"].upper()) != None and channels.get(chDict["replace"].upper()) != None: currentChannels.add(chDict["replace"]) elif channels.get(chDict["name"].upper()) != None: currentChannels.add(chDict["name"]) elif channels.get(chDict["name"].upper()) != None: currentChannels.add(chDict["name"]) for ch in currentChannels: chFromFavorites = favorites.get(ch.upper()) chFromChannels = channels.get(ch.upper()) tmpDict = {"name": chFromFavorites.get("newName"), "oldName": chFromFavorites.get("name"), "EPG": chFromFavorites.get("EPG"), "group": chFromFavorites.get("group"), "logof": chFromFavorites.get("logo"), "logoc": chFromChannels.get("logolink"), "stream": chFromChannels.get("stream"), "hd": chFromChannels.get("hd")} returnChannels.append(tmpDict) result = multikeysort(returnChannels, ['group', '-hd', 'name']) template="" template += "#EXTM3U url-tvg=" template += "\"" template += EPG_LINKS template += "\"" template += "\n" for n in result: group = n.get("group") if group.find("_", 2, 3) != -1: group = group[3:] if len(LOGOS_URL) &gt; 0: template += "#EXTINF:-1 tvg-name=\"{}\" tvg-logo=\"{}\" group-title=\"{}\",{}".format(n.get("EPG"), LOGOS_URL.format(urllib.parse.quote(n.get("logof"))), group, n.get("name")) else: template += "#EXTINF:-1 tvg-name=\"{}\" tvg-logo=\"{}\" group-title=\"{}\",{}".format(n.get("EPG"), n.get("logoc"), group, n.get("name")) template += "\n" template += STREAM_URL.format(n.get("stream")) template += "\n" file = open(path,'w', encoding='utf-8') file.write(template) file.close() return result #response = urllib.request.urlopen(PLAYLIST_LOAD_URL) #content = response.read().decode("utf-8") #channels = loadChannels(content) content = "" request = urllib.request.Request(PLAYLIST_LOAD_URL) request.add_header('Accept-encoding', 'gzip') response = urllib.request.urlopen(request) if response.info().get('Content-Encoding') == 'gzip': gzipFile = gzip.GzipFile(fileobj=response) content = gzipFile.read().decode("utf-8") else: content = response.read().decode("utf-8") channels = loadChannels(content) if channels == None or (len(channels.keys()) == 0): exit() saveTemplate(content, channels, TEMPLATE_SAVE_PATH) exists = os.path.isfile(FAVORITES_LOAD_PATH) if exists: file = open(FAVORITES_LOAD_PATH,'r', encoding='utf-8') content = file.read() favorites = loadFavorites(content) savePlaylist(channels, favorites, PLAYLIST_SAVE_PATH)</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Contenu /opt/share/www/playlist.cgi</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh PATH=/opt/sbin:/opt/bin:/opt/usr/sbin:/opt/usr/bin:/usr/sbin:/usr/bin:/sbin:/bin python3 /opt/etc/ttv/ttv.py echo "Content-Type: text/plain; charset=UTF-8" echo "" echo "$(cat /opt/etc/ttv/playlist.m3u)"</span></span></code> </pre> <br></div></div><br><h2>  Configuration et d√©marrage du serveur Web </h2><br>  Ouvrez le fichier <b>/opt/etc/lighttpd/lighttpd.conf</b> : <br><br><pre> <code class="bash hljs">mcedit /opt/etc/lighttpd/lighttpd.conf</code> </pre> <br>  Pour coller √† partir du tampon, utilisez Shift + Insert, enregistrez - F2, quittez - F10. <br><br>  Remplacez la ligne <b># server.port = 80</b> par: <br><br><pre> <code class="bash hljs">server.port = 81</code> </pre> <br>  Ouvrez le fichier <b>/opt/etc/lighttpd/conf.d/30-cgi.conf</b> : <br><br><pre> <code class="bash hljs">mcedit /opt/etc/lighttpd/conf.d/30-cgi.conf</code> </pre> <br>  Remplacez <b>".cgi" =&gt; "/ opt / bin / perl"</b> par: <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">".cgi"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/bin/sh"</span></span></code> </pre> <br>  Lancez le serveur Web: <br><br><pre> <code class="bash hljs">/opt/etc/init.d/S80lighttpd start</code> </pre> <br><h2>  Cr√©er une liste de cha√Ænes favorites </h2><br>  Ex√©cutez le programme <b>ttv.py</b> : <br><br><pre> <code class="bash hljs">python3 /opt/etc/ttv/ttv.py</code> </pre> <br>  Un fichier <b>mod√®le template.txt</b> sera cr√©√© dans le dossier <b>/ opt / etc / ttv</b> .  Il s'agit d'un simple fichier texte.  Il sera toujours pertinent, c'est-√†-dire  lorsque le programme d√©marre, il est remplac√© par les donn√©es actuelles. <br><br>  Chaque ligne de ce fichier correspond √† une cha√Æne Torrent-TV et a la forme: <br>  <b>CHANNEL_NAME / CHANGE_CHANNEL / YOUR_CHANNEL_NAME / YOUR_CHANNEL_NAME__EPG / YOUR_LOGO / YOUR GROUP</b> <br><br>  Par exemple: <br><br>  Amedia Premium / Amedia Premium HD / Amedia Premium / Amedia Premium / Amedia Premium.png / 11_Movies <br>  Amedia Premium HD / - / Amedia Premium HD / Amedia Premium HD / Amedia Premium HD.png / 11_Movies <br><br>  Enregistrez ce fichier sur votre ordinateur pour le modifier facilement (par exemple, en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WinSCP</a> ).  Renommez-le en favorites.txt. <br><br>  Modifiez le fichier en ne laissant que les canaux dont vous avez besoin. <br><br>  <b>CHANNEL_NAME</b> - Le nom de la cha√Æne dans la playlist d'origine. <br><br>  <b>CHANGE_CHANNEL</b> - le nom de la cha√Æne dans la playlist d'origine √† remplacer.  Mettez un ¬´-¬ª si un remplacement n'est pas n√©cessaire.  Par d√©faut, les remplacements sont automatiquement substitu√©s dans le mod√®le si la cha√Æne a une option HD.  Par exemple, dans la liste de lecture d'origine, il y a Amedia Premium et Amedia Premium HD.  Seul Amedia Premium HD sera dans la playlist finale. <br><br>  <b>YOUR_CHANNEL_NAME</b> est le nom d'affichage dans le gestionnaire IPTV.  Il peut s'agir de n'importe quoi et n'affecte que le nom affich√© dans le gestionnaire IPTV.  Par exemple, la cha√Æne d'origine s'appelle ¬´Paramount Comedy HD (Russie)¬ª et vous la renommez ¬´Paramount Comedy HD¬ª. <br><br>  <b>YOUR_CHANNEL_B__EPG_NAME</b> - cela est n√©cessaire pour une conformit√© totale dans la source EPG s√©lectionn√©e.  Par exemple, la cha√Æne d'origine s'appelle ¬´Match TV HD¬ª.  Et dans l'EPG, cette cha√Æne s'appelle ¬´Match!¬ª.  Modifiez ce param√®tre en "Match!"  et obtenez une conformit√© totale pour votre source EPG.  Ainsi, pour tous les canaux, vous pouvez rapprocher la conformit√© EPG de 100%. <br><br>  <b>YOUR_LOGO</b> - le nom du fichier de logo.  Par d√©faut, ttv.py prend les liens de logo de la liste de lecture d'origine, c'est-√†-dire  YOUR_LOGO sera ignor√©.  Pour l'utiliser, vous devez modifier le param√®tre LOGOS_URL dans ttv.py (vous en apprendrez plus √† ce sujet plus tard). <br><br>  <b>YOUR_GROUP</b> - le nom du groupe de canaux.  Vous pouvez utiliser un index, un nombre √† deux chiffres, avant le nom du groupe.  Cet index d√©termine l'ordre des groupes dans la liste de lecture finale (du plus petit au plus grand).  Apr√®s le tri, l'index sera automatiquement supprim√© du nom du groupe. <br><br><div class="spoiler">  <b class="spoiler_title">Voici un exemple de fichier favorites.txt modifi√©</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Amedia Premium/Amedia Premium HD/Amedia Premium/Amedia Premium/Amedia Premium.png/11_   Amedia Premium HD/-/Amedia Premium HD/Amedia Premium HD/Amedia Premium HD.png/11_   / HD///.png/12_  HD/-/ HD/ HD/ HD.png/12_ Viasat History/Viasat History HD/Viasat History/Viasat History/Viasat History.png/01_ Viasat History HD/-/Viasat History HD/Viasat History/Viasat History.png/01_ Discovery Channel/Discovery Channel HD/Discovery Channel/Discovery Channel/Discovery Channel.png/01_ Discovery Channel HD/-/Discovery Channel HD/Discovery Channel HD/Discovery Channel HD.png/01_ Discovery Science/Discovery Science HD/Discovery Science/Discovery Science/Discovery Science.png/01_ Discovery Science HD/-/Discovery Science HD/Discovery Science HD/Discovery Science HD.png/01_ Amedia Hit/Amedia Hit HD/Amedia Hit/Amedia Hit/Amedia Hit.png/11_   Amedia Hit HD/-/Amedia Hit HD/Amedia Hit HD/Amedia Hit HD.png/11_    /  HD/!/!/ .png/03_   HD/-/! HD/!/  HD.png/03_ Eurosport 1/Eurosport 1 HD/Eurosport 1/Eurosport 1/Eurosport 1.png/03_ Eurosport 1 HD/-/Eurosport 1 HD/Eurosport 1 HD/Eurosport 1 HD.png/03_ Paramount Comedy HD ()/-/Paramount Comedy HD/Paramount Comedy HD ()/Paramount Comedy HD ().png/11_   !  1/!  1 HD/!  1/!  1/!  1.png/03_ !  1 HD/-/!  1 HD/!  1 HD/!  1 HD.png/03_  1/ HD/ 1/ 1/ 1.png/13_-  HD/-/ HD/ HD/ HD.png/13_-</code> </pre> <br></div></div><br>  Copiez le fichier <b>favorites.txt</b> pr√©par√© dans <b>le</b> dossier <b>/ opt / etc / ttv</b> du routeur. <br><br>  Tout est pr√™t.  Vous pouvez r√©cup√©rer la liste de lecture sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://192.168.0.1:81/playlist.cgi</a> (remplacez 192.168.0.1 par l'adresse interne de votre routeur).  Sp√©cifiez simplement le lien dans le gestionnaire IPTV et vous aurez toujours votre liste de lecture actuelle.  Le script playlist.cgi lance le programme ttv.py, qui, sur la base de la liste de lecture torrent-TV actuelle (charg√©e au moment de l'appel) et de favorites.txt, g√©n√®re une nouvelle liste de lecture, puis donne cette nouvelle liste de lecture. <br><br>  En sortie, si toutes les cha√Ænes sont pr√©sentes dans la playlist actuelle (sinon, les cha√Ænes manquantes seront ignor√©es), vous obtiendrez une playlist aussi soign√©e: <br><br><div class="spoiler">  <b class="spoiler_title">Playlist</b> <div class="spoiler_text"> <code>#EXTM3U url-tvg="https://teleguide.info/download/new3/xmltv.xml.gz" <br> #EXTINF:-1 tvg-name="Discovery Channel HD" tvg-logo="http://1ttv.org/uploads/SmWnYlOvkJn8GzttT2UY0vmo8PYfMg.png" group-title="",Discovery Channel HD <br> http://127.0.0.1:6878/ace/getstream?id=b6e518df35bdffc7ea8fdd05025cec851941a102&amp;.mp4 <br> #EXTINF:-1 tvg-name="Discovery Science HD" tvg-logo="http://1ttv.org/uploads/Yjj1p6idV0HGD56Wz7JX5IeKfD44vz.png" group-title="",Discovery Science HD <br> http://127.0.0.1:6878/ace/getstream?id=03fb28986da9168dd56ec6891253bcc496c13eb5&amp;.mp4 <br> #EXTINF:-1 tvg-name="Viasat History" tvg-logo="http://1ttv.org/uploads/MWGbB8wJp5Gm4vbPHl0ktohDDjMKdr.png" group-title="",Viasat History <br> http://127.0.0.1:6878/ace/getstream?id=c6d943e1aac03c179b3af9e99d97ac6779c947c7&amp;.mp4 <br> #EXTINF:-1 tvg-name="Eurosport 1 HD" tvg-logo="http://1ttv.org/uploads/DpFTzUEA3y67Z6ObTPF4xH0XLNRAZm.png" group-title="",Eurosport 1 HD <br> http://127.0.0.1:6878/ace/getstream?id=70bd87520c622ba7dd6e41aface77d5b2f437f87&amp;.mp4 <br> #EXTINF:-1 tvg-name="!" tvg-logo="http://1ttv.org/uploads/MXyy9Uud7oDuH8JqVisjsD0csgAHnQ.png" group-title="",! HD <br> http://127.0.0.1:6878/ace/getstream?id=9af7ac309216464e67092deb23d312a20c483674&amp;.mp4 <br> #EXTINF:-1 tvg-name="!  1 HD" tvg-logo="http://1ttv.org/uploads/9PM8M6cN21wQ3M5isVZgjNepzUI4Ry.png" group-title="",!  1 HD <br> http://127.0.0.1:6878/ace/getstream?id=b8a1e8458419b63ad1c3fa7bd79431d9625c322d&amp;.mp4 <br> #EXTINF:-1 tvg-name="Amedia Hit HD" tvg-logo="http://1ttv.org/uploads/HdnTfcZCgP7Odm1cOKNq9j4yJDRiFP.png" group-title="  ",Amedia Hit HD <br> http://127.0.0.1:6878/ace/getstream?id=ed6d00e9b6c50c95902b33c841302dd709b214da&amp;.mp4 <br> #EXTINF:-1 tvg-name="Amedia Premium HD" tvg-logo="http://1ttv.org/uploads/ornzQpk6WCW6xk0lyBhlwqH8u2QyU7.png" group-title="  ",Amedia Premium HD <br> http://127.0.0.1:6878/ace/getstream?id=c38a7580985fa85fa6e0a82c6fd7403e8e5c2b50&amp;.mp4 <br> #EXTINF:-1 tvg-name="Paramount Comedy HD ()" tvg-logo="http://1ttv.org/uploads/VowjbL265DoceAryIEtqNuPv3NDhFK.png" group-title="  ",Paramount Comedy HD <br> http://127.0.0.1:6878/ace/getstream?id=a9023adab9228b8aa7f1b508b553140b69cecd80&amp;.mp4 <br> #EXTINF:-1 tvg-name=" HD" tvg-logo="http://1ttv.org/uploads/m6ODa3HXr9QNAbSThJNvWeOIEYGp7q.png" group-title="", HD <br> http://127.0.0.1:6878/ace/getstream?id=4318416741f8d35f2de38e7100b89831e0ef0617&amp;.mp4 <br> #EXTINF:-1 tvg-name=" HD" tvg-logo="http://1ttv.org/uploads/ghvqmVpPWqn9x6POAm9UJBvXFzTrqN.png" group-title="-", HD <br> http://127.0.0.1:6878/ace/getstream?id=39b9b54a5031846e4936735ec62d157d5eca56e0&amp;.mp4 <br></code> <br></div></div><br><pre> <code class="bash hljs">: Discovery Channel HD Discovery Science HD Viasat History : Eurosport 1 HD ! HD !  1 HD   : Amedia Hit HD Amedia Premium HD Paramount Comedy HD :  HD -:  HD</code> </pre> <br>  Si n√©cessaire, vous pouvez modifier certains param√®tres dans le programme ttv.py: <br><br><pre> <code class="bash hljs">mcedit /opt/etc/ttv/ttv.py</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Options disponibles pour le changement</b> <div class="spoiler_text"> <code>PLAYLIST_LOAD_URL = "http://91.92.66.82/trash/ttv-list/as.all.tag.player.m3u" <br> TEMPLATE_SAVE_PATH = "/opt/etc/ttv/template.txt" <br> FAVORITES_LOAD_PATH = "/opt/etc/ttv/favorites.txt" <br> PLAYLIST_SAVE_PATH = "/opt/etc/ttv/playlist.m3u" <br> LOGOS_URL = "" <br> #LOGOS_URL = "https://raw.githubusercontent.com/Kyrie1965/ttv/master/logos/{}" <br> #LOGOS_URL = "{}" <br> STREAM_URL = "http://127.0.0.1:6878/ace/getstream?id={}&amp;.mp4" <br> #STREAM_URL = "acestream://{}" <br> EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz" <br> #EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz,http://programtv.ru/xmltv.xml.gz,http://api.torrent-tv.ru/ttv.xmltv.xml.gz"</code> <br> </div></div><br>  <b>PLAYLIST_LOAD_URL</b> - lien pour t√©l√©charger la liste de lecture torrent-TV actuelle. <br>  <b>TEMPLATE_SAVE_PATH</b> - chemin pour enregistrer le mod√®le. <br>  <b>FAVORITES_LOAD_PATH</b> - chemin pour charger la liste des cha√Ænes favorites. <br>  <b>PLAYLIST_SAVE_PATH</b> - chemin pour enregistrer une nouvelle liste de lecture. <br>  <b>LOGOS_URL</b> - lien avec les logos des cha√Ænes.  Vous pouvez utiliser la cha√Æne vide ("") pour prendre des liens de la liste de lecture d'origine, tandis que les logos de favorites.txt seront ignor√©s. <br>  <b>STREAM_URL</b> - vue du lien de flux dans la playlist finale.  Cela peut √™tre un lien direct vers Ace Stream ou un lien vers Ace Stream Proxy.  Cela d√©pend du gestionnaire IPTV que vous utilisez. <br>  <b>EPG_LINKS</b> - Une liste de liens EPG.  Tous les gestionnaires IPTV sont diff√©rents.  Il y a ceux qui ne savent pas comment prendre le lien vers l'EPG depuis la playlist.  Il y a ceux qui ne prennent en charge qu'une seule source EPG d'une liste de lecture.  Il y a ceux qui ne savent pas combiner l'EPG de diff√©rentes sources. <br><br>  Vous ne serez int√©ress√© que par STREAM_URL, LOGOS_URL, EPG_LINKS, car  l'apparence de la playlist finale d√©pend d'eux.  Pour eux, des exemples alternatifs sont donn√©s dans le fichier. <br><br><h2>  Conclusion </h2><br>  En cons√©quence, vous obtenez la liste de lecture Torrent TV r√©elle (Super Wash) avec votre propre liste de cha√Ænes, avec vos propres noms de cha√Æne, avec vos propres groupes et leur tri arbitraire, vos propres logos, avec votre propre mappage EPG, avec la possibilit√© d'exclure les doublons HD / SD, avec le tri cha√Ænes au sein des groupes par HD / SD et nom.  Vous n'avez qu'√† tout configurer une fois et cr√©ez un fichier de vos cha√Ænes pr√©f√©r√©es.  Et puis tous les appareils de votre r√©seau domestique recevront la liste de lecture souhait√©e via le lien, faisant tout "tout est beau" sans aucun r√©glage suppl√©mentaire. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/bndudCB3Nps" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  UPD  19/02/2019: <br><br><ul><li>  Ajout de la prise en charge de gzip lors du chargement de la liste de lecture d'origine ("superwash" donne d√©sormais ttv.all.tag.player.m3u uniquement dans gzip).  Votre playlist cr√©√©e sera donn√©e, comme pr√©c√©demment, en texte / clair. </li><li>  Ajout de la possibilit√© de prendre des liens vers des logos de la liste de lecture d'origine. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438842/">https://habr.com/ru/post/fr438842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438832/index.html">Comment ne pas rater le budget pour la production en s√©rie de cas: 20 exemples tir√©s de la pratique du Bureau of Engineering Design</a></li>
<li><a href="../fr438834/index.html">Le designer a-t-il une nouvelle id√©e? Quoi de plus simple</a></li>
<li><a href="../fr438836/index.html">Surveillance de la temp√©rature du serveur √† faire soi-m√™me</a></li>
<li><a href="../fr438838/index.html">√âv√©nements num√©riques √† Moscou du 4 au 10 f√©vrier</a></li>
<li><a href="../fr438840/index.html">Fiert√© et passion, l'histoire de transformer un r√™ve en projet spatial</a></li>
<li><a href="../fr438850/index.html">Moscou JS 44 - annonce</a></li>
<li><a href="../fr438852/index.html">Nouvelles passerelles GSM d'OpenVox</a></li>
<li><a href="../fr438854/index.html">Explication de la nature physique du ph√©nom√®ne de "Lift Force" sans utiliser l'√©quation de Bernoulli</a></li>
<li><a href="../fr438856/index.html">Sag de la vie</a></li>
<li><a href="../fr438858/index.html">Comment utiliser la segmentation, le ciblage et le positionnement (STP) dans l'√©laboration d'une strat√©gie marketing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>