<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∫ üì´ üàµ 5. Fortinet Getting Started v6.0. NAT üõ¢Ô∏è ‚ôéÔ∏è üîà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saludos! Bienvenido a la quinta lecci√≥n de Fortinet Getting Started . En la √∫ltima lecci√≥n, descubrimos c√≥mo funcionan las pol√≠ticas de seguridad. Aho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>5. Fortinet Getting Started v6.0. NAT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/484072/"><img src="https://habrastorage.org/webt/zp/hu/i4/zphui4qn8xzxkrnibtvd4j44noq.png"><br><br>  Saludos!  Bienvenido a la quinta lecci√≥n de <a href="https://fortiservice.com/news/fortinet-getting-started-vvedenie/">Fortinet Getting Started</a> .  En la <a href="https://habr.com/ru/company/tssolution/blog/481882/">√∫ltima lecci√≥n,</a> descubrimos c√≥mo funcionan las pol√≠ticas de seguridad.  Ahora es el momento de liberar usuarios locales en Internet.  Para hacer esto, en esta lecci√≥n veremos c√≥mo funciona el mecanismo NAT. <br>  Adem√°s de liberar a los usuarios a Internet, tambi√©n consideraremos el m√©todo de publicaci√≥n de servicios internos.  Debajo del gato, se presenta una breve teor√≠a del video, as√≠ como la propia lecci√≥n en video. <a name="habracut"></a><br>  La traducci√≥n de direcciones de red (NAT) es un mecanismo para traducir direcciones IP de paquetes de red.  En t√©rminos de Fortinet NAT, se divide en dos tipos: NAT de origen y NAT de destino. <br><br>  Los nombres hablan por s√≠ mismos: cuando se usa Source NAT, la direcci√≥n de la fuente cambia, cuando se usa Destination NAT, la direcci√≥n de destino. <br><br>  Adem√°s de esto, tambi√©n hay varias opciones de configuraci√≥n de NAT: Firewall Policy NAT y Central NAT. <br><br><img src="https://habrastorage.org/webt/wd/xo/bg/wdxobgt4wt5bshbcblbnwjo_pd8.png"><br><br>  Cuando se utiliza la primera opci√≥n, el NAT de origen y destino debe configurarse para cada pol√≠tica de seguridad.  En este caso, Source NAT utiliza la direcci√≥n IP de la interfaz saliente o el conjunto de IP preconfigurado.  El NAT de destino utiliza un objeto preconfigurado (llamado VIP - IP virtual) como la direcci√≥n de destino. <br><br>  Cuando se usa NAT central, la configuraci√≥n de NAT de origen y destino se realiza inmediatamente para todo el dispositivo (o dominio virtual).  En este caso, la configuraci√≥n de NAT se aplica a todas las pol√≠ticas, seg√∫n las reglas de NAT de origen y NAT de destino. <br><br>  Las reglas de NAT de origen se configuran en la pol√≠tica central de NAT de origen.  El NAT de destino se configura desde el men√∫ DNAT utilizando direcciones IP. <br><br>  En esta lecci√≥n, solo consideraremos la NAT de la pol√≠tica de firewall: como muestra la pr√°ctica, esta opci√≥n de configuraci√≥n es mucho m√°s com√∫n que la NAT central. <br><br>  Como ya dije, al configurar NAT de la fuente de pol√≠tica de firewall, hay dos opciones de configuraci√≥n: reemplazar la direcci√≥n IP con la direcci√≥n de la interfaz saliente, o con la direcci√≥n IP del grupo preconfigurado de direcciones IP.  Se parece a la imagen de abajo.  A continuaci√≥n, hablar√© brevemente sobre posibles grupos, pero en la pr√°ctica, solo consideraremos la opci√≥n con la direcci√≥n de la interfaz saliente; en nuestro dise√±o, no necesitamos grupos de direcciones IP. <br><br><img src="https://habrastorage.org/webt/wc/yf/_w/wcyf_w3n-tloy66twrczoj7mlle.png"><br><br>  El grupo de IP define una o m√°s direcciones IP que se utilizar√°n como la direcci√≥n de origen durante la sesi√≥n.  Estas direcciones IP se utilizar√°n en lugar de la direcci√≥n IP de la interfaz FortiGate saliente. <br><br>  Hay 4 tipos de grupos de IP que se pueden configurar en FortiGate: <br><br><ul><li>  Sobrecarga </li><li>  Uno a uno </li><li>  Rango de puerto fijo </li><li>  Asignaci√≥n de bloque de puerto </li></ul><br>  La sobrecarga es el grupo principal de IP.  En √©l, las direcciones IP se convierten seg√∫n el esquema muchos a uno o muchos a varios.  Tambi√©n se usa la traducci√≥n de puertos.  Considere el circuito que se muestra en la figura a continuaci√≥n.  Tenemos un paquete con ciertos campos Origen y Destino.  Si corresponde a una pol√≠tica de firewall que permite el acceso de este paquete a una red externa, se aplicar√° la regla NAT.  Como resultado, en este paquete, el campo Origen se reemplaza con una de las direcciones IP especificadas en el grupo de IP. <br><br><img src="https://habrastorage.org/webt/8z/i1/af/8zi1afghepy-mwhlpbyar_hqcqy.png"><br><br>  Un grupo de tipo One to One tambi√©n define muchas direcciones IP externas.  Cuando un paquete cae dentro de una pol√≠tica de firewall con la regla NAT habilitada, la direcci√≥n IP en el campo Fuente cambia a una de las direcciones que pertenecen a este grupo.  El reemplazo se realiza de acuerdo con la regla: "primer ingreso, primer servicio".  Para hacerlo m√°s claro, considere un ejemplo. <br><br>  Una computadora de la red local con la direcci√≥n IP 192.168.1.25 env√≠a el paquete a la red externa.  Cae bajo la regla NAT, y el campo Fuente cambia a la primera direcci√≥n IP del grupo, en nuestro caso es 83.235.123.5.  Vale la pena se√±alar que cuando se usa este grupo de IP, no se usa la traducci√≥n de puertos.  Si despu√©s de eso, una computadora de la misma red de √°rea local con una direcci√≥n, digamos 192.168.1.35, env√≠a un paquete a una red externa y tambi√©n cae bajo esta regla NAT, la direcci√≥n IP en el campo Fuente de este paquete cambiar√° a 83.235.123.6.  Si no hay m√°s direcciones en el grupo, se rechazar√°n las conexiones posteriores.  Es decir, en este caso, bajo nuestra regla NAT, 4 computadoras pueden caer simult√°neamente. <br><br><img src="https://habrastorage.org/webt/ay/s2/6k/ays26khdzqemcgga0ouwn-7ejxg.png"><br><br>  FIxed Port Range conecta rangos internos y externos de direcciones IP.  La traducci√≥n del puerto tambi√©n est√° deshabilitada.  Esto le permite corregir el comienzo o el final del grupo de direcciones IP internas con el principio o el final del grupo de direcciones IP externas.  En el siguiente ejemplo, el grupo de direcciones internas 192.168.1.25 - 192.168.1.28 se asigna al grupo de direcciones externas 83.235.123.5 - 83.235.125.8. <br><br><img src="https://habrastorage.org/webt/3h/hn/l8/3hhnl8bdcl7wmalr2dqj_dz1gl4.png"><br><br>  Asignaci√≥n de bloque de puerto: este grupo de IP se utiliza para asignar un bloque de puertos a los usuarios del grupo de IP.  Adem√°s del grupo de IP en s√≠, tambi√©n deben indicarse aqu√≠ dos par√°metros: el tama√±o del bloque y el n√∫mero de bloques asignados para cada usuario. <br><br><img src="https://habrastorage.org/webt/js/jm/dg/jsjmdg6atbpwe_tgv9bqswkshxo.png"><br><br>  Ahora considere la tecnolog√≠a de Destination NAT.  Se basa en direcciones IP virtuales (VIP).  Para los paquetes que caen bajo las reglas NAT de destino, la direcci√≥n IP en el campo Destino cambia: por lo general, la direcci√≥n de Internet p√∫blica se cambia a la direcci√≥n del servidor privado.  Las direcciones IP virtuales se utilizan en las pol√≠ticas de firewall como el campo Destino. <br><br>  El tipo est√°ndar de direcci√≥n IP virtual es NAT est√°tica.  Esta correspondencia de direcciones externas e internas es uno a uno. <br><br>  En lugar de NAT est√°tica, las direcciones virtuales pueden limitarse a reenviar puertos espec√≠ficos.  Por ejemplo, asocie las conexiones a una direcci√≥n externa en el puerto 8080 con una conexi√≥n a una direcci√≥n IP interna en el puerto 80. <br><br>  En el siguiente ejemplo, la computadora con la direcci√≥n 172.17.10.25 est√° intentando acceder a la direcci√≥n 83.235.123.20 en el puerto 80.  Esta conexi√≥n est√° sujeta a la regla DNAT, por lo que la direcci√≥n IP de destino cambia a 10.10.10.10. <br><br><img src="https://habrastorage.org/webt/ps/fa/17/psfa17kfl1nfpqa5qbbkw_a3sow.png"><br><br>  El video discute la teor√≠a y proporciona ejemplos pr√°cticos de configuraci√≥n de NAT de origen y destino. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/oQrHyhPpIHo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  En la pr√≥xima lecci√≥n, pasaremos a garantizar la seguridad del usuario en Internet.  Espec√≠ficamente, en la pr√≥xima lecci√≥n consideraremos la funcionalidad del filtrado web y el control de aplicaciones.  Para no perderse, est√© atento a las actualizaciones en los siguientes canales: <br><br>  <a href="https://www.youtube.com/channel/UCKOESE8nBWQPuQmi994_YMA">Youtube</a> <br>  <a href="https://vk.com/fortiservice">Grupo VKontakte</a> <br>  <a href="https://zen.yandex.ru/id/5c7d2162fa818600ae386a52">Yandex Zen</a> <br>  <a href="https://fortiservice.com/">Nuestro sitio</a> <br>  <a href="https://www.t.me/tssolution">Canal de telegrama</a> </div></div><p>Source: <a href="https://habr.com/ru/post/484072/">https://habr.com/ru/post/484072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484062/index.html">Aprendiendo ingl√©s por MEMASICS</a></li>
<li><a href="../484064/index.html">¬øC√≥mo preparar un juego para la localizaci√≥n? 10 reglas b√°sicas</a></li>
<li><a href="../484066/index.html">Dinero vs equipo. No son los aspectos m√°s obvios de la relaci√≥n de empresarios, fundadores e inversores.</a></li>
<li><a href="../484068/index.html">gRPC como protocolo de comunicaci√≥n entre servicios. Informe Yandex</a></li>
<li><a href="../484070/index.html">C√≥mo escribimos un sistema antifraude en cuatro manos y tres cabezas</a></li>
<li><a href="../484076/index.html">D√≥nde almacenar la criptomoneda: impuestos de las criptomonedas en diferentes pa√≠ses</a></li>
<li><a href="../484084/index.html">1C-Bitrix y un intento de presentarlo</a></li>
<li><a href="../484088/index.html">Desfile de contrase√±as (an√°lisis de ~ 5 mil millones de contrase√±as de fugas)</a></li>
<li><a href="../484090/index.html">Nueva infraestructura de TI para el centro de datos de correos de Rusia</a></li>
<li><a href="../484092/index.html">Algo pr√≠ncipes y nobles vestidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>