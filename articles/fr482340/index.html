<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛🏿 👨🏻‍⚕️ 💪 De Junior'a à Middle'a: Parser 📉 🙋🏽 🌩️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Khabrovchans! Pendant longtemps, il y avait un désir d'écrire un article, mais n'a pas osé. 
 Ma série de postes décrira mon cheminement de J...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>De Junior'a à Middle'a: Parser</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482340/"> Bonjour, Khabrovchans!  Pendant longtemps, il y avait un désir d'écrire un article, mais n'a pas osé. <br>  Ma série de postes décrira mon cheminement de Junior à Middle, puis peut-être même à Senior.  Nous programmerons en Python. <br><br>  La documentation PS pour certaines bibliothèques peu connues sera jointe à la fin. <br><br>  En bref sur moi-même: Python a commencé à étudier il y a deux ans, il n'y a eu aucune avancée particulière. <br>  Les bases elles-mêmes sont devenues déçues, puisque je leur ai enseigné pendant un an et demi.  Maintenant j'étudie la langue en profondeur, je comprends sa structure et comment tout se passe.  Dans les articles suivants, je téléchargerai le code, j'utilise toutes les nouvelles et nouvelles bibliothèques, et comme vous le savez, python en a beaucoup :) <br><br>  Par où commencer?  Il y a quelques mois, j'ai écrit mon premier analyseur.  Il s'est avéré que l'écriture d'analyseurs est assez simple et vous pouvez même gagner de l'argent avec eux.  Jusqu'à présent, je vais vous montrer quelques exemples utilisant la pile de <b>requêtes bs4 +</b> .  Nous analyserons notre bien-aimé <a href="https://habr.com/ru/all/">Habr</a> . <br><a name="habracut"></a><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      from bs4 import BeautifulSoup as bs import requests from fake_useragent import UserAgent</span></span></code> </pre> <br>  Je ne sais pas si tout le monde connaît la bibliothèque <i>fake_useragent</i> .  Il est assez pratique pour l'analyse, il crée un faux agent utilisateur. <br><br><pre> <code class="python hljs">ua = UserAgent() headers = {<span class="hljs-string"><span class="hljs-string">'accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'*/*'</span></span>, <span class="hljs-string"><span class="hljs-string">'user-agent'</span></span>: ua.firefox}</code> </pre> <br>  Ceci est le prochain petit bloc de notre code.  Dans la première ligne, nous avons créé la variable ua, qui utilise les méthodes de la classe UserAgent.  Dans la deuxième ligne, nous avons créé un dictionnaire qui nous aidera à analyser à l'avenir. <br><br>  Créez maintenant la fonction elle-même pour l'analyse. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">without_post</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(url, headers)</span></span></span><span class="hljs-function">:</span></span> response = requests.get(url, headers=headers) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span>: soup = bs(response.text, <span class="hljs-string"><span class="hljs-string">'html.parser'</span></span>) links = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> soup.find_all(<span class="hljs-string"><span class="hljs-string">'a'</span></span>, {<span class="hljs-string"><span class="hljs-string">'class'</span></span>: <span class="hljs-string"><span class="hljs-string">'post__title_link'</span></span>}): links.update({i.text: i.get(<span class="hljs-string"><span class="hljs-string">'href'</span></span>)}) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> links <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: print(<span class="hljs-string"><span class="hljs-string">"Connection Error"</span></span>)</code> </pre><br>  Cette fonction analysera le lien, ce qui nous indique la présence d'une balise avec la classe "post__title_link". <br><br>  La façon la plus simple d'enregistrer des données est de les enregistrer dans un fichier.  Alors faisons-le. <br><br><pre> <code class="python hljs">url = <span class="hljs-string"><span class="hljs-string">"https://habr.com/ru/all/"</span></span> links = without_post(url, headers) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'parsed.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_obj: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name, href <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> links.items(): f_obj.write(name + <span class="hljs-string"><span class="hljs-string">':\n'</span></span> + href + <span class="hljs-string"><span class="hljs-string">'\n\n'</span></span>)</code> </pre><br>  À la fin, nous obtenons un fichier qui contient les noms et les liens des messages que nous avons collectés à partir de la première page. <br><br>  Code source (complet), uniquement sans commentaire: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bs4 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BeautifulSoup <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> bs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> fake_useragent <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserAgent <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests ua = UserAgent() headers = {<span class="hljs-string"><span class="hljs-string">'accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'*/*'</span></span>, <span class="hljs-string"><span class="hljs-string">'user-agent'</span></span>: ua.firefox} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">without_post</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(url, headers)</span></span></span><span class="hljs-function">:</span></span> response = requests.get(url, headers=headers) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span>: soup = bs(response.text, <span class="hljs-string"><span class="hljs-string">'html.parser'</span></span>) links = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> soup.find_all(<span class="hljs-string"><span class="hljs-string">'a'</span></span>, {<span class="hljs-string"><span class="hljs-string">'class'</span></span>: <span class="hljs-string"><span class="hljs-string">'post__title_link'</span></span>}): links.update({i.text: i.get(<span class="hljs-string"><span class="hljs-string">'href'</span></span>)}) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> links <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: print(<span class="hljs-string"><span class="hljs-string">"Connection Error"</span></span>) url = <span class="hljs-string"><span class="hljs-string">"https://habr.com/ru/all/"</span></span> links = without_post(url, headers) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'parsed.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_obj: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name, href <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> links.items(): f_obj.write(name + <span class="hljs-string"><span class="hljs-string">':\n'</span></span> + href + <span class="hljs-string"><span class="hljs-string">'\n\n'</span></span>)</code> </pre> <br>  Bon résultat!  À l'exception des sauts de ligne et des commentaires, nous avons rencontré exactement 20 lignes.  Pour commencer, plutôt bien :) <br><br>  Comme promis, des liens vers la documentation des bibliothèques utilisées: <br><br>  Demandes: <a href="https://requests.readthedocs.io/en/master/" rel="nofollow">* presser *</a> <br>  bs4: <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="nofollow">* presser *</a> <br>  fake_useragent: <a href="https://pypi.org/project/fake-useragent/" rel="nofollow">* squeeze *</a> <br><br>  Merci à tous pour votre attention!  A très bientôt! <br><br>  <b>PS</b> S'il y a des commentaires, l'article suivant ne tardera pas à venir </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482340/">https://habr.com/ru/post/fr482340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482328/index.html">V&V pas pour vendetta</a></li>
<li><a href="../fr482330/index.html">Liste des gemmes de base pour le profilage de l'application Ruby on Rails</a></li>
<li><a href="../fr482332/index.html">Comment un passionné a créé un réseau Wi-Fi sous DOS</a></li>
<li><a href="../fr482336/index.html">Les commerçants ont accès aux conférences de presse de la Banque centrale d'Angleterre avant leur diffusion publique</a></li>
<li><a href="../fr482338/index.html">Visual Studio pour Mac: contrôlez votre IDE avec des clés</a></li>
<li><a href="../fr482344/index.html">Préparez-vous à l'introduction d'un classement social en Russie</a></li>
<li><a href="../fr482346/index.html">ASP.NET MVC - travailler avec MySQL via ADO.NET</a></li>
<li><a href="../fr482352/index.html">Comme j'ai jeté presque 150k dans le vent ou l'histoire de l'installation de la ventilation forcée dans l'appartement</a></li>
<li><a href="../fr482354/index.html">ConfigureAwait: Foire aux questions</a></li>
<li><a href="../fr482356/index.html">Utilisation de Windows Server sans explorateur du point de vue d'un utilisateur Windows classique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>