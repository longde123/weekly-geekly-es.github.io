<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìõ üßúüèΩ üêú Plataformas de teste m√≥vel na nuvem ü§úüèª üïØÔ∏è üôè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="E agora chegou o momento em que nossas necessidades de teste ficaram lotadas na √°rea de trabalho do testador. A alma pediu para as nuvens. Na verdade ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plataformas de teste m√≥vel na nuvem</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464433/"><p>  E agora chegou o momento em que nossas necessidades de teste ficaram lotadas na √°rea de trabalho do testador.  A alma pediu para as nuvens.  Na verdade n√£o.  Na verdade n√£o. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/7s/ww/2o7swwlml3ipcdpgc8qzmkyfdja.jpeg"></div><a name="habracut"></a><br><h1>  Nossas metas e objetivos </h1><br><p>  <i>(leitor apressado, voc√™ pode terminar na pr√≥xima se√ß√£o)</i> </p><br><p>  Estamos desenvolvendo um aplicativo financeiro para o mercado externo, dispon√≠vel em diferentes formatos: para navegadores de desktop (site e extens√£o do Google Chrome), para navegadores m√≥veis, bem como um aplicativo h√≠brido para telefones.  Devido √†s especificidades do aplicativo, prestamos aten√ß√£o especial ao teste do aplicativo em v√°rias configura√ß√µes e dispositivos.  Para n√≥s, a opera√ß√£o est√°vel e segura do aplicativo √© importante nos navegadores de desktop de nossos clientes e em qualquer dispositivo. </p><br><p>  O motivo para encontrarmos um conjunto de dispositivos baseados em nuvem para testes foi uma altera√ß√£o no formato do trabalho do escrit√≥rio para completamente remoto e distribu√≠do (entre cidades e pa√≠ses).  Ou seja, se antes para o teste poder√≠amos montar diferentes dispositivos em um monte (literalmente) e testar manualmente o pr√≥ximo assembly em uma tabela ao mesmo tempo, agora ficou imposs√≠vel fazer isso.  Al√©m disso, com o crescimento da funcionalidade, para reduzir o trabalho manual, automatizamos os conjuntos de regress√£o de testes importantes, o que significa que ap√≥s a montagem precisamos poder chamar testes na configura√ß√£o e no dispositivo desejados, e √© melhor fazer isso assim que a montagem passar para a prepara√ß√£o. </p><br><p>  Nesse caso, a solu√ß√£o mais simples e √≥bvia √© usar emuladores para Android e simuladores para dispositivos iOS em nosso pipeline de DevOps.  No entanto, que √© relativamente f√°cil de implementar no computador de trabalho do desenvolvedor, torna-se uma tarefa dif√≠cil e cara de usar na nuvem.  Para que o mesmo emulador Android funcione rapidamente, √© necess√°rio um servidor x86 com suporte a HAXVM e, para um simulador iOS, apenas um dispositivo MacOS com xcode √© necess√°rio.  Infelizmente, mesmo tendo resolvido esse problema, a quest√£o permanece com a diferen√ßa entre o comportamento do software em emuladores e dispositivos reais.  Por exemplo, a cada segundo lan√ßamento, detectamos bugs estranhos em dispositivos Samsung que n√£o podem ser reproduzidos em emuladores.  Bem, e, √© claro, raro "chin√™s" ex√≥tico "deleite-se" com bugs √∫nicos e que eu tamb√©m gostaria de pegar no est√°gio de desenvolvimento. </p><br><p>  Como resultado, entendemos a necessidade de usar um farm de dispositivos m√≥veis na nuvem, no qual poder√≠amos executar rapidamente nossos testes e, se necess√°rio, depurar manualmente.  E ao qual toda a nossa equipe teria acesso de qualquer lugar do mundo (adoramos trabalhar mesmo quando viajamos). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/mv/-3/tkmv-3efjgaskkz1tbveeo0rh-4.jpeg"></div><br><p>  Nossos testes s√£o escritos em Python 3.7 (isso ser√° importante mais tarde), como a pilha que usamos tox + pytest + Selenium + Appium, bem, um pequeno conjunto de bibliotecas python √∫teis.  Definitivamente, testaremos m√°quinas no Windows e MacOS com os navegadores Edge, Firefox, Chrome, Safari e dispositivos Android e iOS com navegadores e um aplicativo.  N√£o temos muitos testes para cada dispositivo (menos de mil), mas ao testar em um √∫nico encadeamento nos dispositivos, um conjunto completo leva algumas horas.  Portanto, o crit√©rio para escolher um servi√ßo para n√≥s ser√°: </p><br><ul><li>  Teste de API (Selenium / Appium) </li><li>  IOS, dispositivos Android </li><li>  Suporte ao teste de navegador m√≥vel </li><li>  Suporte para download e teste de aplicativos </li><li>  Dispositivo de refer√™ncia (GooglePixel (Android 9) e iPhone X (iOS 12+)) </li><li>  Depura√ß√£o manual </li><li>  Registro (mais capturas de tela, grava√ß√£o de uma execu√ß√£o de v√≠deo) </li><li>  Disponibilidade e parque de dispositivos </li><li>  Prazo m√©dio de execu√ß√£o do teste </li><li>  Pre√ßo </li></ul><br><p>  Desej√°vel, mas n√£o necess√°rio: </p><br><ul><li>  Suporte a python no n√≠vel de servi√ßo (o que isso significa) </li><li>  Suporte para dispositivos de mesa \ navegadores </li></ul><br><h1>  Resultados de pesquisa de mercado </h1><br><p>  Durante uma semana, naveguei na Internet e tentei uma d√∫zia de servi√ßos diferentes.  A maioria deles oferece tempo livre para oportunidades de teste.  Os resultados da minha pesquisa, mais conclus√µes s√£o subjetivas.  Sua opini√£o e resultados podem diferir dos meus. </p><br><p>  Em Habr√©, encontrei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um artigo para 2017</a> dedicado ao mesmo t√≥pico, mas desde ent√£o surgiram novos servi√ßos, e nossa tarefa √© um pouco mais rigorosa.  Por exemplo, servi√ßos ‚Äúsaborosos‚Äù como o Samsung Remote Test Lab, o Firebase Test Lab, o Xamarin Test Cloud, infelizmente, n√£o nos agradam. </p><br><h2>  Fora do jogo </h2><br><h3>  Laborat√≥rio de teste remoto da Samsung </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/jg/ky/hdjgkycr6wiajxi8ucwp6spgasa.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  O servi√ßo oferece gratuitamente uma oportunidade de tentar trabalhar com v√°rios dispositivos Samsung, incluindo os mais novos, incluindo TVs ou rel√≥gios inteligentes no Tizen (a limita√ß√£o √© no m√°ximo 10 horas por dia, por dia, o servi√ßo concede 10 cr√©ditos de gra√ßa, o que equivale a 2,5 horas por dia , a sess√£o m√≠nima √© de meia hora (2 cr√©ditos)).  Isso √© muito bom para depurar e encontrar as causas principais dos erros em determinados dispositivos, o servi√ßo ainda fornece acesso √† depura√ß√£o remota (ponte de depura√ß√£o remota, acesso ao console e aos logs do sistema), mas, infelizmente, o servi√ßo n√£o fornece acesso de API aos dispositivos.  A √∫nica maneira de "automatizar" √© registrar as a√ß√µes do usu√°rio e reproduzi-las na sua ferramenta de automa√ß√£o local. </p><br><h3>  Laborat√≥rio de teste do Firebase </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/4r/t0/ix4rt0ohclapstllgnbyl5726qm.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Um servi√ßo do Google permite que voc√™ teste seu aplicativo em dispositivos com Android e iOS de gra√ßa (n√£o muito).  Mas h√° uma ressalva - o servi√ßo requer o uso de ferramentas de automa√ß√£o nativas (UIAtomator2 e Espresso para Android e XCTest para iOS) ou usando aranhas autom√°ticas (rastreador) para Android - Robo Test e Game Loop Test.  Ou seja, usar UIAutomator e Selenium, infelizmente, n√£o funcionar√°.  Quanto gr√°tis - o pacote gratuito √© limitado a 10 testes em emuladores e cinco em dispositivos reais por dia.  Se precisar de mais, a cada hora adicional voc√™ ter√° que pagar outros US $ 1 e US $ 5, respectivamente.  Em geral, para nossas tarefas, seria uma boa op√ß√£o se escrev√™ssemos testes do zero, mas n√£o tenho vontade de refazer v√°rias centenas de testes - √© simplesmente caro.  E acontece que ter√≠amos que divergir bastante nos testes entre as vers√µes desktop e m√≥vel, o que complicaria bastante o suporte. </p><br><h3>  Visual studio app center </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/_o/pr/3g_oprmudubtaulwkgqjahqot74.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Antiga nuvem de teste do Xamarin.  Este servi√ßo finalmente suporta o Appium e permite testes em milhares de dispositivos diferentes.  Mas, como no caso de outros produtos da Microsoft, ele est√° firmemente pregado na pilha nativa, o que significa que, para usar esse servi√ßo, voc√™ precisar√° da presen√ßa do VisualStudio e do requisito para escrever o projeto e testar exclusivamente em Java.  Mas se de repente voc√™ tiver uma pilha Java (com o MS VS), o pre√ßo √© de US $ 99 por slot de dispositivo por m√™s, o que √© relativamente liberal. </p><br><h2>  Servi√ßos para escolher </h2><br><h3>  AWS Device Farm </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/pb/r9/znpbr9hu4dkgiqjcwoudrviaid8.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Talvez o farm mais poderoso para teste em dispositivos virtuais e reais atualmente (mais de 2500 dispositivos).  Para n√≥s, esse era um servi√ßo priorit√°rio, pois nossos servi√ßos s√£o implantados apenas na nuvem da AWS, al√©m disso, os pre√ßos por minuto do dispositivo a partir de 17 centavos.  A AWS permite que voc√™ trabalhe com estruturas nativas, bem como com Appium, Calabash e outras estruturas de teste automatizadas.  Al√©m do teste automatizado, o servi√ßo oferece a capacidade de depurar manualmente.  Bem, 1000 minutos "para tentar" √© muito tentador.  No entanto, o diabo, como sempre, est√° nos detalhes.  Em termos de teste, a AWS possui v√°rios recursos. </p><br><p>  Como j√° mencionei, usamos o Python 3.7, no entanto, o AWS Device Farm ainda funciona com o Python 2.7.6 (consulte o manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ).  E fora da caixa n√£o sabe nada sobre tox.  Para n√≥s, isso significa a aus√™ncia de v√°rios recursos e a necessidade de processar parte dos testes para garantir compatibilidade com vers√µes anteriores e criar um ambiente que contorneia o tox.  Al√©m disso, um mecanismo bastante estranho para baixar um pacote de teste (arquivo morto) tamb√©m implica baixar o aplicativo para teste.  No nosso caso, se testarmos nosso servi√ßo atrav√©s de um navegador m√≥vel, o download do aplicativo √© uma etapa extra.  No entanto, voc√™ pode substituir o aplicativo por um "stub" e criar um venv com Python 3.7 no ambiente Python 2.7 e, em seguida, criar um ambiente com tox nele, o que ... </p><br><div style="text-align:center;"><img src="https://i.gifer.com/embedded/download/S5u.gif"></div><br><p>  A Amazon n√£o seria a Amazon se tudo dependesse de vers√µes antigas.  Como alternativa (e nenhum servi√ßo ter√° essa oportunidade abaixo), a AWS sugere o uso do AWS Device Farm por meio da CLI da AWS (interface da linha de comando) (consulte o manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ).  Ou seja, podemos conectar o dispositivo da nuvem como um dispositivo real ao nosso computador no modo de depura√ß√£o remota, no entanto, substitu√≠mos anteriormente o adb pelo corrigido (n√£o h√° bin√°rio para linux na lista de bin√°rios, mas tenho certeza que ele existe na natureza).  Ou seja, configurando a CLI da AWS, para testar, precisaremos executar apenas alguns comandos (porque n√£o usaremos a GUI como um aplicativo AWS Device Farm). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ln/tv/kalntvkkefpkcemawikixglisfq.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Exemplo de c√≥digo</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 <span class="hljs-comment"><span class="hljs-comment">#  AWS SDK https://pypi.org/project/boto3/ aws_client = boto3.client('devicefarm') response = aws_client.list_devices() #     device_arn = '' for phone in response["devices"]: if phone['name'] == "Google Pixel XL": #      (  ) device_arn = phone['arn'] #   Amazon Resource Name break project_arn = aws_client.list_projects()['projects'][0]['arn'] #        #      ,    SSH    response = aws_client.create_remote_access_session(projectArn=project_arn, deviceArn=device_arn, remoteDebugEnabled=True, ssh-public-key=SSH_KEY) #     adb devices     uuid Google Pixel XL  AWS Device Farm,   iOS #     ... RUN_TESTS() ... #    ( )    aws_client.stop-remote-access-session(arn=response['remoteAccessSession']['arn']) aws_client.delete_remote_access_session(arn=response['remoteAccessSession']['arn'])</span></span></code> </pre> </div></div><br><p>  Se quisermos testar o aplicativo, ele tamb√©m pode ser baixado pelo AWS SDK. </p><br><p>  Mas n√£o contei uma nuance chave aqui.  Trope√ßamos no diabo novamente em detalhes.  O fato √© que a op√ß√£o de depura√ß√£o remota estar√° dispon√≠vel apenas se usarmos o plano de dispositivos privados para a AWS.  Em primeiro lugar, esse recurso est√° dispon√≠vel somente mediante solicita√ß√£o (voc√™ precisa escrever uma carta para a Amazon); em segundo lugar, a op√ß√£o est√° dispon√≠vel para a regi√£o us-west-2; em terceiro lugar, de fato, essa op√ß√£o retorna ao cen√°rio em que temos um servidor para teste com um conjunto (ou pelo menos um) de dispositivos conectados a ele.  As vantagens s√£o √≥bvias - podemos usar este dispositivo exclusivamente, o que √© obviamente mais seguro e mais r√°pido; por outro lado, perdemos a principal vantagem - a escolha e a variedade de dispositivos. </p><br><p>  Gostei do servi√ßo como um todo, mas para a nossa equipe, infelizmente, existem muitos "buts" nele. </p><br><h3>  Bitbar </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5a/gg/lp/5agglpijttxv29qnnlrgr12ksgu.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Esse farm m√≥vel baseado em nuvem √© o primeiro a cair nos mecanismos de pesquisa.  E n√£o em v√£o.  No futuro, direi que este servi√ßo tem a melhor escolha de dispositivos (apenas dispositivos reais) e o melhor desempenho em termos de um teste em compara√ß√£o com outros.  O Bitbar oferece servi√ßos para testes manuais e automatizados remotos (usando Appium e outras estruturas), e tamb√©m, se desejado, permite que voc√™ use algo semelhante ao rastreador do Firebase Test Lab (Teste do rob√¥) - AI TestBot.  A principal vantagem do BitBar √© um n√∫mero ilimitado de threads de teste (ou seja, voc√™ pode testar imediatamente seu aplicativo em centenas de dispositivos) selecionando antecipadamente o pool de dispositivos necess√°rio.  Se o dispositivo estiver ocupado, outro ser√° selecionado da mesma forma ou a sess√£o ser√° colocada na fila.  No final da execu√ß√£o do teste, um log √© gerado, um registro de teste, os resultados s√£o salvos e a notifica√ß√£o √© enviada para o correio.  Embora existam oportunidades para configurar a intera√ß√£o com diferentes ferramentas de CI / CD.  O servi√ßo tamb√©m oferece a capacidade de testar os navegadores da √°rea de trabalho em diferentes resolu√ß√µes e, se desejado, criar, como na AWS, seus dispositivos privados.  √â verdade que voc√™ precisa pagar por todos esses chips - cada minuto de teste custar√° US $ 0,29. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oq/te/_v/oqte_v0jovfktqprbfpjzyt6kbw.jpeg"></div><br><p>  O processo de configura√ß√£o √© simples, como a intera√ß√£o de dois dedos com o asfalto: </p><br><div class="spoiler">  <b class="spoiler_title">Exemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://appium.bitbar.com/wd/hub'</span></span> desired_capabilities = { <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Motorola Google Nexus 6'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceId'</span></span>: <span class="hljs-string"><span class="hljs-string">'FA7AN1A00253'</span></span>, <span class="hljs-string"><span class="hljs-string">'newCommandTimeout'</span></span>: <span class="hljs-number"><span class="hljs-number">12000</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-comment"><span class="hljs-comment">#     Chrome,    app 'bitbar_apiKey': 'BITBAR_API_KEY', 'bitbar_project': 'Software Testing', 'bitbar_testrun': 'Test run #N', 'bitbar_device': 'Motorola Google Nexus 6', 'bitbar_app': '23425235' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """</span></span></code> </pre></div></div><br><h3>  Kobiton </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/jx/7z/pmjx7zlxb9om476zsp_qd24tqb0.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Outro servi√ßo que fornece servi√ßos de teste em dispositivos reais.  A escolha de dispositivos √© mais modesta que o Bitbar (350+), a disponibilidade de dispositivos tamb√©m √© menor.  Em geral, √© muito semelhante em sua funcionalidade b√°sica ao BitBar, pois permite testes manuais e autom√°ticos (usando Appium - aqui sem escolher estruturas).  N√£o h√° como testar em navegadores de desktop.  O servi√ßo tamb√©m permite organizar testes com um n√∫mero ilimitado de sess√µes e dispositivos, mas voc√™ n√£o pode criar um pool de dispositivos aqui.  O pre√ßo do servi√ßo √© muito liberal - de US $ 0,10 por minuto adicional de teste, mas durante o per√≠odo de teste notei alguma instabilidade do servi√ßo - a Internet geralmente caiu nos dispositivos, uma vez que o dispositivo travou.  Al√©m disso, se o dispositivo estiver ocupado ou reservado, todos os seus testes em execu√ß√£o falhar√£o.  Ou seja, ao contr√°rio do Bitbar, n√£o h√° filas de sess√µes.  √â verdade que pode ser organizado a baixo custo.  Kobiton tem sua pr√≥pria API pequena. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0b/8n/p9/0b8np9ceky_s0e2schcgitmgi4w.jpeg"></div><br><p>  A configura√ß√£o tamb√©m √© muito simples, ao contr√°rio do bitbar, quase o Appium original. </p><br><div class="spoiler">  <b class="spoiler_title">Exemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> <span class="hljs-comment"><span class="hljs-comment">#  base64EncodedBasicAuth = base64.b64encode(bytes(f'{USERNAME}:{API_KEY}', 'utf-8')) headers = { 'Authorization': f'Basic {base64EncodedBasicAuth}' } reply = requests.get(f'https://api.kobiton.com/v1/apps', params={ }, headers = headers) #     deviceId headers = { 'Authorization': base64EncodedBasicAuth, 'Accept': 'application/json' } reply = requests.get(f'https://api.kobiton.com/v1/devices/{deviceId}/status', params={ }, headers = headers) #   ,      while (reply['isOnline'] == False or reply['isBooked'] == True): sleep(60) #   com_executor = f'https://{USERNAME}:{API_KEY}@api.kobiton.com/wd/hub' desired_capabilities = { 'browserName': 'Chrome', # The generated session will be visible to you only. 'sessionName': 'Automation test session', 'sessionDescription': '', 'deviceOrientation': 'portrait', 'captureScreenshots': True, 'deviceGroup': 'KOBITON', # For deviceName, platformVersion Kobiton supports wildcard # character *, with 3 formats: *text, text* and *text* # If there is no *, Kobiton will match the exact text provided 'deviceName': 'Pixel 2', 'platformName': 'Android', 'platformVersion': '9' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """ #   RUN_TESTS() """ ... """ #       ,     (   ) headers = { 'Authorization': {base64EncodedBasicAuth} } requests.delete(f'https://api.kobiton.com/v1/sessions/{sessionId}/terminate', params={ }) """ ... """</span></span></code> </pre></div></div><br><h3>  Navega√ß√£o </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/zt/ed/ugztedawkg6ed9okmi1htaactgc.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Bom e velho BrowserStack.  Muitas coisas foram escritas sobre ele e muitos que a usam.  Sim, permite testar n√£o apenas em navegadores diferentes, mas tamb√©m em dispositivos diferentes.  Tanto no modo manual quanto no Selenium / Appium.  Dependendo das suas necessidades - em navegadores m√≥veis ou no aplicativo.  Em termos de recursos, tudo √© igual aos dois servi√ßos no topo, mas, diferentemente deles, j√° existem restri√ß√µes no n√∫mero de sess√µes simult√¢neas.  √â verdade que, pelo contr√°rio, pague US $ 199 por m√™s e teste por tempo ilimitado.  Existem plugins para Jenkins, Travis CI, TeamCity, sua rica API, excelentes logs e uma grande variedade de dispositivos e navegadores de desktop em diferentes configura√ß√µes.  √â verdade que, dependendo do que voc√™ est√° testando, as configura√ß√µes variam - para testar navegadores (mesmo os m√≥veis), um hub Selenium √© usado e, para aplicativos - um hub Appium.  Al√©m disso, para testar o aplicativo, voc√™ ter√° que pagar separadamente.  Ou seja, para testar navegadores e aplicativos m√≥veis, voc√™ precisa pagar US $ 199 e outros US $ 159 (o pre√ßo de um dispositivo para teste ao mesmo tempo). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/xv/zz/xixvzzad9ae94ktoao0yzkodra8.png"></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de exemplo para aplica√ß√£o</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://USERNAME:API_KEY@hub-cloud.browserstack.com/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'app'</span></span>: app_name, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de amostra para um navegador m√≥vel</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> selenium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'http://USERNAME:API_KEY@hub.browserstack.com:80/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Experimental </h3><br><img src="https://habrastorage.org/webt/do/7d/uv/do7duvaiufyiok6muyz_zuerya4.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Outro servi√ßo que oferece a capacidade de testar manual e automaticamente dispositivos m√≥veis e navegadores de desktop usando Appium, Selenium e outras estruturas.  Como no caso do BrowserStack, o n√∫mero de sess√µes simult√¢neas √© limitado, mas os pre√ßos s√£o um pouco diferentes - para testar aplicativos m√≥veis, o servi√ßo pede US $ 199 por m√™s e para testes em v√°rios navegadores apenas US $ 39 (para uma sess√£o simult√¢nea).  Al√©m disso, como o Bitbar na AWS, voc√™ pode criar seu pr√≥prio laborat√≥rio privado com dispositivos que, no entanto, podem ser misturados a uma nuvem p√∫blica de milhares de dispositivos, emuladores e navegadores de diferentes vers√µes e plataformas (MacOS, Windows), se desejar.  Entre os recursos interessantes - a disponibilidade de extens√µes para IntelliJ e Eclipse, sua pr√≥pria ferramenta Appium Studio, que permite usar a funcionalidade avan√ßada de dispositivos como interagir com FaceID, controle de voz, leitura de c√≥digo de barras, definir qualidade de comunica√ß√£o, localiza√ß√£o geogr√°fica e muito mais.  Das desvantagens, posso citar um conjunto estranho de dispositivos para o per√≠odo de teste, tarifa draconiana para o per√≠odo de teste e o requisito de usar o correio corporativo (o gmail n√£o funcionar√°). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/z3/wy/fiz3wy8hud0aa5zd28-86zluljg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Exemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://Uhttps://cloud.seetest.io/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">"deviceName"</span></span>: <span class="hljs-string"><span class="hljs-string">"iPhone X"</span></span>, <span class="hljs-string"><span class="hljs-string">"accessKey"</span></span>: API_KEY, <span class="hljs-string"><span class="hljs-string">"platformName"</span></span>: <span class="hljs-string"><span class="hljs-string">"ios"</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceQuery"</span></span>: <span class="hljs-string"><span class="hljs-string">"'@os='ios' and @version='12.1.3' and @category='PHONE'"</span></span>, } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Saucelabs </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/vz/sy/jovzsyon88bmkdxcknin36wro8k.jpeg"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  Um dos servi√ßos de teste em nuvem mais antigos.  Quase 400 dispositivos reais diferentes, uma ampla sele√ß√£o de simuladores e emuladores, incluindo emuladores at√≠picos de dispositivos Samsung, existem navegadores de desktop para v√°rios sistemas operacionais, incluindo Linux.  Automa√ß√£o em Appium / Selenium e frameworks nativos.  A principal vantagem do servi√ßo √© a presen√ßa de uma extensa cole√ß√£o de configura√ß√µes, incluindo sistemas operacionais antigos, navegadores e dispositivos.  O SauceLabs tamb√©m tem um limite no n√∫mero de sess√µes simult√¢neas, mas aqui a op√ß√£o mais barata inclui n√£o uma, mas duas sess√µes simult√¢neas.  O que √© incomum: os planos de tarifas em dispositivos reais e emuladores s√£o diferentes.  Portanto, as op√ß√µes mais baratas, que incluem duas sess√µes com 2000 minutos de teste por m√™s em emuladores, custar√£o US $ 149 e, em dispositivos reais, j√° com US $ 349.  Existe integra√ß√£o com o CI / CD, Slack. Infelizmente, n√£o pude experimentar o SauceLabs ao vivo, porque, infelizmente, o registro falha, possivelmente devido √† regi√£o, mas n√£o tenho certeza. </p><br><h3>  Perfecto </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/bj/h2/plbjh2r1jax9nmtdxkq08sxzfvs.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> </p><br><p>  O mais recente provedor de testes na nuvem √© mais semelhante visualmente ao Experitest, mas sem funcionalidade avan√ßada.  Existe uma linguagem de script simples.  √â muito estranho, mas no servi√ßo para tarifas n√£o corporativas (corporativas) n√£o h√° proposta para teste em navegadores de desktop, tamb√©m √© imposs√≠vel monitorar a execu√ß√£o de testes em tempo real (apenas se n√£o for manual).  Cerca de cem dispositivos diferentes est√£o dispon√≠veis para teste.  H√° integra√ß√£o com o Jenkins e, curiosamente, com ferramentas de gerenciamento de teste como HP ALM, IBM Rational, TFS.  Planos tarif√°rios muito estranhos tamb√©m est√£o dispon√≠veis, como 5 horas de teste por m√™s (em minutos, at√© US $ 0,33 (este √© o servi√ßo mais caro)), embora com a capacidade de comprar um pacote com horas adicionais, mas, novamente, √© estranho que n√£o haja por minuto ou pelo menos por hora, ap√≥s o fato.  Quanto √† facilidade de uso, durante o per√≠odo de teste, apenas testes manuais est√£o dispon√≠veis, al√©m de um laborat√≥rio comum, para que todos os lan√ßamentos de diferentes usu√°rios caiam em uma pilha.  Portanto, √© imposs√≠vel julgar exatamente a conveni√™ncia e a velocidade do servi√ßo.  Percebe-se que o servi√ßo est√° focado principalmente em grandes clientes corporativos, enquanto, pelo menos de acordo com as informa√ß√µes dispon√≠veis, os recursos desse provedor s√£o os mais modestos de todos os que testei. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/l_/so/4xl_so-pdliodrvlt7huphfnybe.jpeg"></div><br><br><h2>  Resumo Resultados </h2><br><p>  Por todos os crit√©rios de sele√ß√£o, os servi√ßos s√£o muito semelhantes, a diferen√ßa entre os servi√ßos em seu desempenho e pre√ßo (se n√£o houver recursos, por exemplo, como no caso da AWS).  Portanto, resumiremos os dados da pesquisa em uma tabela, veremos a velocidade dos servi√ßos (levando em considera√ß√£o a conex√£o via VPN dos EUA), bem como o pre√ßo, por conveni√™ncia, comparando o tempo m√©dio mensal de testes em dispositivos (5 lan√ßamentos por m√™s, 2 horas de testes em dispositivos Android e iOS) = 20 horas).  Como valores de refer√™ncia, uso dados do meu computador local com um emulador, conectando-o novamente para a pureza do experimento por meio de uma VPN nos EUA). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/1k/ym/m91kymmminidgp5q_ivtq110dqs.png"></div><br><h1>  Conclus√µes </h1><br><p>  Foi muito interessante para mim pesquisar e escolher o servi√ßo certo para nossa equipe.  Em geral, existem solu√ß√µes para todos os gostos e tarefas, e os servi√ßos acabaram sendo muito semelhantes em termos de caracter√≠sticas e implementa√ß√£o.  Como resultado, dependendo das suas tarefas, eu recomendaria a seguinte op√ß√£o: </p><br><p>  <b>Op√ß√£o A</b> : Se a velocidade da verifica√ß√£o √© importante para voc√™ e voc√™ precisa verificar dezenas de dispositivos diferentes ao mesmo tempo, sua escolha √© <b>Bitbar</b> . </p><br><p>  <b>Op√ß√£o B</b> : Se voc√™ tem prioridade nos resultados dos dispositivos de refer√™ncia e o teste de configura√ß√£o √© secund√°rio (mas necess√°rio) - sua escolha √© <b>BrowserStack</b> .  Este √© apenas o nosso caso, uma vez que estatisticamente - 90% de todos os erros s√£o erros de plataformas e dispositivos de refer√™ncia (na maioria das vezes, os bugs s√£o comuns a todas as plataformas de refer√™ncia ao mesmo tempo).  Os 8% restantes s√£o erros do MS IE, com a recusa de suporte do IE - 2% de erros do MS Edge e 0,5% de erros em configura√ß√µes espec√≠ficas. </p><br><p>  <b>Op√ß√£o B</b> : Se voc√™ estiver interessado em verificar condi√ß√µes especiais, como comunica√ß√µes de baixa qualidade, geolocaliza√ß√£o ou Touch / FaceID, sua escolha √© <b>Experitest</b> . </p><br><p>  Mas, a longo prazo, se sua empresa ocupa um escrit√≥rio grande, seu trabalho √© em per√≠odo integral; em geral, organizando seus pr√≥prios laborat√≥rios, mesmo minitabelos com um servidor para emuladores com 2-3 dispositivos conectados, custar√° menos e mais conveniente do que usar servi√ßos especializados. servi√ßos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464433/">https://habr.com/ru/post/pt464433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464415/index.html">Novo servi√ßo de dica para pesquisar hh.ru</a></li>
<li><a href="../pt464417/index.html">10 estruturas PHP populares em 2019</a></li>
<li><a href="../pt464421/index.html">Radio Viber - todas as esta√ß√µes de r√°dio do messenger online</a></li>
<li><a href="../pt464423/index.html">Como gerenciar o tempo? Resposta do freelancer</a></li>
<li><a href="../pt464429/index.html">Os 10 erros mais comuns ao trabalhar com a plataforma Spring. Parte 1</a></li>
<li><a href="../pt464435/index.html">Como n√£o se afogar em um mar de tecnologia e abordagens: a experi√™ncia de 50 especialistas</a></li>
<li><a href="../pt464437/index.html">Como a equipe de desenvolvimento pode ganhar mais criando sites de tr√°fego [Guia de Implementa√ß√£o]</a></li>
<li><a href="../pt464443/index.html">Natas Web. Passagem da plataforma CTF destinada a explorar vulnerabilidades da Web. Parte 2</a></li>
<li><a href="../pt464445/index.html">Por que √© realmente imposs√≠vel ser vegetariano</a></li>
<li><a href="../pt464447/index.html">Count Scoring de la Fer ou um estudo sobre credit scoring como parte da amplia√ß√£o de seus horizontes. Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>