<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåπ ‚õé üë≤üèª √úberwachung + Stresstest = Prognose und keine Fehler üïí üë≤üèª üëâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die IT-Abteilung von VTB musste sich mehrmals mit Notfallsituationen in den Systemen befassen, wenn die Belastung um ein Vielfaches zunahm. Daher wurd...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√úberwachung + Stresstest = Prognose und keine Fehler</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/472062/">  Die IT-Abteilung von VTB musste sich mehrmals mit Notfallsituationen in den Systemen befassen, wenn die Belastung um ein Vielfaches zunahm.  Daher wurde es notwendig, ein Modell zu entwickeln und zu testen, das die Spitzenlast kritischer Systeme vorhersagt.  Zu diesem Zweck haben die IT-Spezialisten der Bank eine √úberwachung eingerichtet, die Daten analysiert und gelernt, wie Prognosen automatisiert werden k√∂nnen.  Welche Tools zur Vorhersage der Belastung beigetragen haben und ob es m√∂glich war, die Arbeit mit ihrer Hilfe zu optimieren, werden wir in einem kurzen Artikel erl√§utern. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b84/d49/7f4/b84d497f418f150e1cadeefa985dee7c.jpg"><br><a name="habracut"></a><br>  Probleme mit hoch belasteten Diensten treten in fast allen Sektoren auf, sind jedoch f√ºr den Finanzsektor von entscheidender Bedeutung.  Zur Stunde X m√ºssen alle Kampfeinheiten bereit sein, und daher war es notwendig, im Voraus zu wissen, was passieren k√∂nnte, und sogar den Tag zu bestimmen, an dem die Last springen w√ºrde und welche Systeme darauf treffen w√ºrden.  Ausf√§lle m√ºssen bek√§mpft und verhindert werden, sodass die Notwendigkeit der Implementierung eines Predictive Analytics-Systems noch nicht einmal er√∂rtert wurde.  Es war notwendig, Systeme basierend auf √úberwachungsdaten zu aktualisieren. <br><br><h2>  Analytik am Knie </h2><br>  Ein Lohn- und Gehaltsabrechnungsprojekt ist eines der sensibelsten im Fehlerfall.  F√ºr Prognosen ist dies am verst√§ndlichsten, daher haben wir uns entschlossen, damit zu beginnen.  Aufgrund der hohen Konnektivit√§t zu Spitzenlastzeiten k√∂nnen bei anderen Subsystemen, einschlie√ülich Remote Banking Services (RBS), Probleme auftreten.  Zum Beispiel begannen Kunden, die sich √ºber SMS √ºber den Erhalt von Geld freuten, diese aktiv zu nutzen.  Die Last k√∂nnte mehr als eine Gr√∂√üenordnung springen. <br><br>  Das erste Prognosemodell wurde manuell erstellt.  Wir haben das Entladen f√ºr das letzte Jahr genommen und berechnet, an welchen Tagen maximale Spitzen erwartet werden: zum Beispiel am 1., 15. und 25. sowie an den letzten Tagen des Monats.  Dieses Modell erforderte ernsthafte Arbeit und lieferte keine genaue Prognose.  Trotzdem identifizierte sie Engp√§sse, bei denen Hardware hinzugef√ºgt werden musste, und erm√∂glichte es, den Prozess des Geldtransfers durch Vereinbarung mit Ankerkunden zu optimieren: Um keine Geh√§lter auf einen Schlag zu erhalten, wurden Transaktionen aus verschiedenen Regionen rechtzeitig verteilt.  Jetzt verarbeiten wir sie in Teilen, die die IT-Infrastruktur der Bank unbedingt kauen kann. <br><br>  Nachdem wir das erste positive Ergebnis erhalten hatten, wechselten wir zur Prognoseautomation. Ein Dutzend weitere kritische Abschnitte warteten darauf, dass wir an die Reihe kamen. <br><br><h2>  Integrierter Ansatz </h2><br>  Auf der VTB wurde das MicroFocus-√úberwachungssystem eingef√ºhrt.  Von dort nahmen wir Prognosedatenerfassung, ein Speichersystem und ein Berichtssystem.  Tats√§chlich gab es bereits eine √úberwachung, es mussten nur noch Metriken und ein Vorhersagemodul hinzugef√ºgt und neue Berichte erstellt werden.  Diese Entscheidung wird von einem externen Auftragnehmer, Technoserv, unterst√ºtzt. Die Hauptarbeiten an dem Projekt wurden von seinen Spezialisten durchgef√ºhrt, aber wir haben das Modell selbst gebaut.  Das Prognosesystem basiert auf Prophet - dieses Open-Source-Produkt wurde auf Facebook entwickelt.  Es ist einfach zu bedienen und einfach in unsere umfassenden √úberwachungs- und Vertica-Tools zu integrieren.  Grob gesagt analysiert das System den Lastplan und extrapoliert ihn basierend auf der Fourier-Reihe.  Es ist auch m√∂glich, bestimmte Koeffizienten pro Tag aus unserem Modell hinzuzuf√ºgen.  Metriken werden ohne menschliches Eingreifen erstellt. Einmal pro Woche wird die Prognose automatisch neu berechnet und neue Berichte werden an die Empf√§nger gesendet. <br><br>  Dieser Ansatz zeigt die Hauptzyklen auf, z. B. j√§hrlich, monatlich, viertelj√§hrlich und w√∂chentlich.  Zahlungen von Geh√§ltern und Vorsch√ºssen, Urlaubszeiten, Feiertagen und Verk√§ufen - all dies wirkt sich auf die Anzahl der Anrufe bei den Systemen aus.  Es stellte sich zum Beispiel heraus, dass sich einige Zyklen √ºberlappen und der Central Federal District die Hauptlast (75%) f√ºr die Systeme bereitstellt.  Juristische Personen und Einzelpersonen verhalten sich unterschiedlich.  Wenn die Arbeitsbelastung der ‚ÄûPhysiker‚Äú relativ gleichm√§√üig auf die Wochentage verteilt ist (dies sind viele kleine Transaktionen), haben Unternehmen 99,9% ihrer Zeit, w√§hrend Transaktionen kurz sein oder innerhalb von Minuten oder sogar Stunden verarbeitet werden k√∂nnen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70e/6ef/010/70e6ef0108827fad2870f63aa380e575.jpg"><br><br>  Basierend auf den erhaltenen Daten werden langfristige Trends bestimmt.  Das neue System hat gezeigt, dass die Menschen massiv zum RB aufbrechen.  Dies ist allen bekannt, aber wir haben eine solche Gr√∂√üenordnung nicht erwartet und zun√§chst nicht daran geglaubt: Die Anzahl der Anrufe bei den Bankb√ºros nimmt extrem schnell ab, und die Anzahl der Ferntransaktionen w√§chst um genau den gleichen Betrag.  Dementsprechend w√§chst auch die Belastung des Systems und wird weiter zunehmen.  Jetzt prognostizieren wir die Belastung bis Februar 2020.  Normale Tage k√∂nnen mit einem Fehler von 3% und Spitzentage mit einem Fehler von 10% vorhergesagt werden.  Das ist ein gutes Ergebnis. <br><br><h2>  Fallstricke </h2><br>  Wie immer gab es einige Schwierigkeiten.  Der Extrapolationsmechanismus unter Verwendung von Fourier-Reihen geht schlecht durch Null - wir wissen, dass juristische Personen am Wochenende nur wenige Transaktionen generieren, aber das Vorhersagemodul erzeugt Werte, die weit von Null entfernt sind.  Es war m√∂glich, sie mit Gewalt zu korrigieren, aber Kr√ºcken sind nicht unsere Methode.  Dar√ºber hinaus musste das Problem der schmerzlosen Datenerfassung aus Quellsystemen gel√∂st werden.  Die regelm√§√üige Erfassung von Informationen erfordert umfangreiche Computerressourcen. Daher haben wir mithilfe der Replikation schnelle Caches erstellt und erhalten bereits Gesch√§ftsdaten von Replikaten.  Das Fehlen einer zus√§tzlichen Belastung der Mastersysteme in solchen F√§llen ist eine Sperranforderung. <br><br><h2>  Neue Herausforderungen </h2><br>  Die Stirnaufgabe zur Vorhersage von Spitzenwerten wurde gel√∂st: Seit Mai dieses Jahres gab es keine Bankausf√§lle im Zusammenhang mit √úberlastung, und das neue Prognosesystem spielte dabei eine wichtige Rolle.  Ja, es hat nicht gereicht, und jetzt will die Bank verstehen, wie gef√§hrlich Spitzen f√ºr sie sind.  Wir ben√∂tigen Prognosen, die Metriken aus Lasttests verwenden, und f√ºr etwa 30% der kritischen Systeme funktioniert dies bereits. Der Rest ist dabei, Prognosen zu erhalten.  In der n√§chsten Phase werden wir die Belastung der Systeme nicht bei Gesch√§ftstransaktionen vorhersagen, sondern in Bezug auf die IT-Infrastruktur, dh wir werden eine Ebene tiefer gehen.  Dar√ºber hinaus m√ºssen wir die Erfassung von Metriken vollst√§ndig automatisieren und darauf basierende Prognosen erstellen, um nicht entladen zu m√ºssen.  Daran ist nichts Au√üergew√∂hnliches - wir √ºberwachen und testen nur nach den besten Praktiken der Welt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472062/">https://habr.com/ru/post/de472062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472044/index.html">√úbersicht √ºber ISPmanager - Hosting- und Site-Control-Panels</a></li>
<li><a href="../de472046/index.html">Konferenzen: der Anfang des Weges</a></li>
<li><a href="../de472052/index.html">Datenorientiertes Design (oder warum Sie sich mit OOP wahrscheinlich in den Fu√ü schie√üen)</a></li>
<li><a href="../de472054/index.html">Organisatoren und Lehrassistenten zu CS Center Online-Programmen</a></li>
<li><a href="../de472060/index.html">Die deutsche Polizei st√ºrmte einen Milit√§rbunker, in dem sich das neu deklarierte Rechenzentrum befand</a></li>
<li><a href="../de472064/index.html">Ansible + Auto Git Pull im Cluster der virtuellen Maschine in der Cloud</a></li>
<li><a href="../de472068/index.html">Verwenden der NVME-SSD als Systemlaufwerk auf Computern mit altem BIOS und Linux-Betriebssystem</a></li>
<li><a href="../de472072/index.html">PG12: Ein Dutzend Patches von Postgres Professional</a></li>
<li><a href="../de472076/index.html">Das Buch "Java f√ºr alle"</a></li>
<li><a href="../de472078/index.html">Offene Bankrisiken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>