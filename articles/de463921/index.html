<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛷 🙆🏽 👨‍✈️ (Nicht sehr) versteckte Kosten der gemeinsamen Codebasis von iOS und Android 👩🏽‍✈️ ⛈️ 👩🏾‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bis vor kurzem hatte Dropbox eine technische Strategie zur Verwendung von allgemeinem C ++ - Code für mobile iOS- und Android-Anwendungen. Die Idee is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>(Nicht sehr) versteckte Kosten der gemeinsamen Codebasis von iOS und Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463921/"> Bis vor kurzem hatte Dropbox eine technische Strategie zur Verwendung von allgemeinem C ++ - Code für mobile iOS- und Android-Anwendungen.  Die Idee ist klar: Schreiben Sie Code einmal in C ++, anstatt ihn separat in Java und Objective C zu duplizieren. Wir haben diese Strategie bereits 2013 übernommen, als die Gruppe der Ingenieure für mobile Entwicklung relativ klein war und das Produkt schnell entwickeln musste.  Mit einer solchen Lösung konnte die Kraft eines kleinen Teams sowohl auf Android als auch auf iOS eine große Menge Code erzeugen. <br><br>  Jetzt haben wir diese Strategie zugunsten der Muttersprachen jeder Plattform (hauptsächlich Swift und Kotlin, die zu Beginn nicht existierten) vollständig aufgegeben.  Die Lösung beinhaltet die (nicht so) versteckten Kosten für die gemeinsame Nutzung von Code. <br><br>  Alle Probleme ergeben sich aus der <b>Hauptsache</b> : Der <b>Overhead war mehr als nur das zweimalige Schreiben des Codes</b> . <br><a name="habracut"></a><br>  Bevor ich die verschiedenen Arten von Overhead analysiere, möchte ich klarstellen, dass wir nie an den Punkt gekommen sind, an dem sich der größte Teil der Codebasis in C ++ befand.  Die Kosten haben uns tatsächlich daran gehindert, uns in diese Richtung zu bewegen. <br><br>  Es ist auch erwähnenswert, dass viel größere Unternehmen wie Google und Facebook seit mehreren Jahren skalierbare Code-Sharing-Lösungen entwickeln.  Solche Lösungen sind nicht sehr verbreitet.  Obwohl Systeme von Drittanbietern wie React Native oder Flutter einen Teil des Overheads vermeiden, bleiben einige Kosten bestehen (zumindest bis eine dieser Technologien populär und ausgereift genug wird).  Zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lehnte Airbnb die Verwendung von React Native</a> aus den gleichen Gründen ab, die in diesem Artikel beschrieben werden. <br><br>  Alle Kosten können in vier Hauptkategorien eingeteilt werden. <br><br><h3>  Overhead von benutzerdefinierten Frameworks und Bibliotheken </h3><br>  Der einfachste Weg, die Kosten für die Erstellung von Frameworks und Bibliotheken vorherzusagen.  Sie sind grob in zwei Unterkategorien unterteilt: <br><br><ul><li>  Frameworks, mit denen Sie mit der Hostumgebung interagieren können, um eine vollwertige mobile Anwendung zu erstellen.  Zum Beispiel: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Djinni</a> , ein Tool zum Erstellen von mehrsprachigen Deklarationen von Verbindungstypen und Schnittstellen <br></li><li>  Ein Framework zum Ausführen von Aufgaben im Hintergrund vor dem Hauptthread (trivial in den Muttersprachen der Plattform) </li></ul><br></li><li>  Bibliotheken als Ersatz für Sprachstandards oder Open Source-Lösungen, die in Muttersprachen verwendet werden können, zum Beispiel: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">json11</a> für die ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">De-</a> ) Serialisierung von JSON <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nn</a> Nicht-Null-Zeiger für C ++ </li></ul></li></ul><br>  Nichts davon ist erforderlich, wenn Sie in den Muttersprachen der Plattform bleiben.  Und unsere Teilnahme an Open Source-Projekten in Muttersprachen wäre für Entwickler wahrscheinlich vorteilhafter.  In der C ++ - Community war (und ist es?) Die Open Source-Kultur nicht so entwickelt wie in der Community für mobile Entwickler, zumal die <b>mobile</b> C ++ - Community praktisch nicht existiert. <br><br>  Bitte beachten Sie, dass dieser Overhead für C ++ besonders hoch ist (im Gegensatz zu anderen möglichen nicht-muttersprachlichen Sprachen wie Python oder C #), da es keine voll funktionsfähige Standardbibliothek gibt.  Da jedoch nur C / C ++ einen Compiler hat, der sowohl von Google als auch von Apple unterstützt wird, verursacht der Wechsel zu einer anderen Sprache eine Reihe anderer Probleme. <br><br><h3>  Übergroße benutzerdefinierte Entwicklungsumgebung </h3><br>  Im mobilen Ökosystem gibt es viele Tools zur Verbesserung der Entwicklungseffizienz.  Mobile IDEs sind sehr funktional und Google und Apple haben viele Ressourcen investiert, um sie ideal für ihre Plattformen zu machen.  Wenn wir uns von den Standardeinstellungen entfernen, geben wir einige Vorteile auf.  Erstens übertrifft das Debuggen in der Muttersprache normalerweise das C ++ - Debugging in der IDE standardmäßig. <br><br>  Ich erinnere mich besonders an einen Fehler, der zu einer Blockierung der Hintergrund-Streaming-Struktur führte und zu versehentlichen Abstürzen der Anwendung führte.  Solche Fehler sind selbst mit einem einfachen Standardstapel schwer zu verfolgen.  Da das Problem das Debuggen von Multithread-Code zwischen C ++ und Java beinhaltete, dauerte die Verfolgung Wochen! <br><br>  Zusätzlich zum Verlust der Standardtools musste ich Zeit in die Erstellung eigener Tools investieren, um gängigen C ++ - Code zu unterstützen.  Am wichtigsten war, dass ein benutzerdefiniertes Build-System erforderlich war, um Bibliotheken zu erstellen, die C ++ - Code sowie Java- und Objective-C-Shells enthielten.  Es sollte Ziele generieren, die sowohl Xcodebuild als auch Gradle verstehen.  Das Erstellen eines solchen Systems hat uns viele Ressourcen gekostet, da es ständig aktualisiert werden musste, um Änderungen in den beiden Build-Systemen zu unterstützen. <br><br><h3>  Plattformüberschreibung für Plattformunterschiede </h3><br>  Obwohl iOS und Android „mobile Anwendungen“ sind, die normalerweise dieselben Funktionen bieten, gibt es einige Unterschiede bei den Plattformen selbst, die sich auf die Implementierung auswirken.  Zum Beispiel, wie eine Anwendung Hintergrundaufgaben ausführt.  Sogar ähnliche Dinge können sich im Laufe der Zeit stark unterscheiden (z. B. Interaktion mit der Kamera). <br><br>  Daher können Sie Code nicht nur einmal schreiben und auf einer anderen Plattform ausführen.  Sie müssen viel Zeit für die Integration und Codierung einer bestimmten Plattform aufwenden, und manchmal endet dieser Code direkt auf C ++ - Ebene! <br><br>  <b>Theoretische Einsparungen durch das nur einmalige Schreiben von Code entsprechen nicht der Realität, was die Effektivität dieses Ansatzes sofort erheblich verringert.</b> <br><br><h3>  Gemeinkosten für die Einstellung, Schulung und Bindung von Entwicklern </h3><br>  Last but not least sind die Kosten für die Schulung und / oder Einstellung von Entwicklern für die Arbeit mit unserem sehr eigenartigen Stack.  Als Dropbox diese mobile Strategie einsetzte, hatten wir eine Kerngruppe erfahrener C ++ - Entwickler.  Diese Gruppe startete das C ++ - Projekt und schulte andere mobile Entwickler. <br><br>  Im Laufe der Zeit gingen diese Entwickler zu anderen Teams und anderen Unternehmen.  Der Rest hatte nicht genug Erfahrung, um die Lücke in der technischen Führung zu schließen, und es wurde zunehmend schwieriger, erfahrene Ingenieure mit der entsprechenden C ++ - Erfahrung zu finden, die an der Entwicklung für mobile Geräte interessiert sind. <br><br>  Infolgedessen waren wir mit einem echten Mangel an kritischem Wissen zur Aufrechterhaltung der C ++ - Codebasis konfrontiert.  Es blieben nur zwei Optionen übrig, die jeweils erhebliche Anstrengungen erforderten: <br><br><ol><li>  Finden und stellen Sie Kandidaten mit ganz bestimmten Fähigkeiten ein (wir haben es ein Jahr lang erfolglos versucht). <br></li><li>  Trainieren Sie Ihre eigenen mobilen (oder C ++) Entwickler, was ohne Senioren mit den richtigen Fähigkeiten für den Abschluss des Trainings fast unmöglich ist.  Selbst wenn sich die Hauptgruppe noch nicht aufgelöst hatte, waren mobile Entwickler normalerweise nicht an C ++ interessiert, daher war es auch ein großes Problem, Leute zum Lernen zu finden. </li></ol><br>  Zusätzlich zur Einstellung verursachte die Veröffentlichung eines eigenen Technologie-Stacks ein Problem bei der Aufbewahrung - mobile Entwickler wollten einfach nicht an einem C ++ - Projekt arbeiten.  Dies führte dazu, dass viele talentierte Ingenieure das Projekt verließen, anstatt weiterhin unter einem schlecht gewarteten benutzerdefinierten Stapel zu leiden.  Im Allgemeinen ist die Community der mobilen Entwickler sehr dynamisch - neue Technologien und Modelle erscheinen häufig und werden schnell implementiert.  Top-Ingenieure lieben es, ihre Fähigkeiten auf dem neuesten Stand zu halten. <br><br>  Ein ausgereiftes Produkt mit einem Standardstapel ist nicht einfach auf dem neuesten Stand zu halten.  Sie opfern Neuheit für Stabilität.  Dieses Problem nimmt erheblich zu, wenn Sie sich in einem benutzerdefinierten Stapel außerhalb des breiteren mobilen Ökosystems einschließen. <br><br><h1>  Fazit </h1><br>  Einmal schien das einmalige Schreiben von Code für verschiedene Plattformen sehr viel zu sein, aber die damit verbundenen Kosten überwogen die Vorteile (die auf jeden Fall geringer waren als erwartet).  Am Ende verwenden wir keine gemeinsame Codebasis mehr über C ++ (oder eine andere nicht standardmäßige Methode), sondern schreiben Code in unseren Muttersprachen für jede Plattform. <br><br>  Darüber hinaus möchten wir, dass sich unsere Ingenieure wohl fühlen und einen Beitrag zur Gemeinschaft leisten können.  Aus diesem Grund haben wir uns entschlossen, unsere Praxis an die Industriestandards anzupassen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463921/">https://habr.com/ru/post/de463921/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463907/index.html">Erstellen einer Haftnotizanwendung mit 8base, GraphQL und React</a></li>
<li><a href="../de463913/index.html">Und wie suchen Personalagenturen wirklich nach Programmierern?</a></li>
<li><a href="../de463915/index.html">Was ist ein CDN und wie funktioniert es?</a></li>
<li><a href="../de463917/index.html">20 Dinge, die ich gerne wissen würde, bevor ich Webentwickler werde</a></li>
<li><a href="../de463919/index.html">Großer philosophischer Gedanke: Top 10 DotNext 2019 Piter Talks</a></li>
<li><a href="../de463923/index.html">.container wird nicht mehr benötigt</a></li>
<li><a href="../de463925/index.html">Vivaldi: Wie zählen wir die Anzahl der Benutzer?</a></li>
<li><a href="../de463927/index.html">Umgehung von Sicherheit und Zensur: 5 VPN und Proxys für Google Chrome</a></li>
<li><a href="../de463929/index.html">Erkundung der Tiefen von Typanmerkungen in Python. Teil 1</a></li>
<li><a href="../de463931/index.html">Erkundung der Tiefen von Typanmerkungen in Python. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>