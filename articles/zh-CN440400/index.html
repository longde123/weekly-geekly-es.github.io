<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¸ ğŸ—¾ ğŸ”¸ Apache Kafka + Spring Bootï¼šæ‚¨å¥½ï¼Œå¾®æœåŠ¡ ğŸ§œğŸ¿ ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸ’€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨Linuxä¸‹ä½¿ç”¨Apache Kafkaåœ¨Spring Boot 2ä¸Šç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä»å®‰è£…JREåˆ°å·¥ä½œçš„å¾®æœåŠ¡åº”ç”¨ç¨‹åºã€‚ 

 çœ‹åˆ°è¯¥æ–‡ç« çš„å‰ç«¯å¼€å‘éƒ¨é—¨çš„åŒäº‹æŠ±æ€¨è¯´ï¼Œæˆ‘æ²¡æœ‰è§£é‡ŠApache Kafkaå’ŒSpring Bootæ˜¯ä»€ä¹ˆã€‚ æˆ‘ç›¸ä¿¡ä»»ä½•éœ€è¦ä½¿ç”¨ä¸Šè¿°æŠ€æœ¯æ¥ç»„è£…å®Œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apache Kafka + Spring Bootï¼šæ‚¨å¥½ï¼Œå¾®æœåŠ¡</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440400/">å“ˆHaï¼ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨Linuxä¸‹ä½¿ç”¨Apache Kafkaåœ¨Spring Boot 2ä¸Šç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä»å®‰è£…JREåˆ°å·¥ä½œçš„å¾®æœåŠ¡åº”ç”¨ç¨‹åºã€‚ <br><br> çœ‹åˆ°è¯¥æ–‡ç« çš„å‰ç«¯å¼€å‘éƒ¨é—¨çš„åŒäº‹æŠ±æ€¨è¯´ï¼Œæˆ‘æ²¡æœ‰è§£é‡ŠApache Kafkaå’ŒSpring Bootæ˜¯ä»€ä¹ˆã€‚ æˆ‘ç›¸ä¿¡ä»»ä½•éœ€è¦ä½¿ç”¨ä¸Šè¿°æŠ€æœ¯æ¥ç»„è£…å®Œæˆé¡¹ç›®çš„äººéƒ½çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒã€‚ å¦‚æœå¯¹è¯»è€…è€Œè¨€ï¼Œé—®é¢˜å¹¶ä¸é—²ç€ï¼Œé‚£ä¹ˆè¿™æ˜¯æœ‰å…³Habrçš„ä¼˜ç§€æ–‡ç« ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Apache Kafka</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Spring Bootæ˜¯ä»€ä¹ˆ</a> ã€‚ <br><br> æˆ‘ä»¬æ— éœ€å¯¹Kafkaï¼ŒSpring Bootå’ŒLinuxæ˜¯ä»€ä¹ˆè¿›è¡Œå†—é•¿çš„è§£é‡Šï¼Œè€Œæ˜¯åœ¨Linuxæœºå™¨ä¸Šä»å¤´å¼€å§‹è¿è¡ŒKafkaæœåŠ¡å™¨ï¼Œç¼–å†™ä¸¤ä¸ªå¾®æœåŠ¡ï¼Œå¹¶ä½¿å…¶ä¸­ä¸€ä¸ªå‘å…¶ä»–äººå‘é€æ¶ˆæ¯-é€šå¸¸ï¼Œé…ç½®å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„ã€‚ <br><br><img src="https://habrastorage.org/webt/5d/p3/ab/5dp3abjx-c62zmfmmtp5tjvbjci.jpeg"><br><br> è¯¥èŒä½å°†åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ã€‚ åœ¨ç¬¬ä¸€ä¸ªä¸­ï¼Œæˆ‘ä»¬åœ¨Linuxæœºå™¨ä¸Šé…ç½®å¹¶è¿è¡ŒApache Kafkaï¼Œç¬¬äºŒä¸ªä¸­ï¼Œæˆ‘ä»¬ç”¨Javaç¼–å†™äº†ä¸¤ä¸ªå¾®æœåŠ¡ã€‚ <br><a name="habracut"></a><br> åœ¨æˆ‘ä»¥ç¨‹åºå‘˜çš„èŒä¸šç”Ÿæ¶¯å¼€å§‹çš„åˆ›ä¸šå…¬å¸ä¸­ï¼ŒKafkaä¸Šæœ‰å¾®æœåŠ¡ï¼Œæˆ‘çš„ä¸€ä¸ªå¾®æœåŠ¡ä¹Ÿé€šè¿‡Kafkaä¸å…¶ä»–äººä¸€èµ·å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“æœåŠ¡å™¨æœ¬èº«æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ— è®ºæ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºç¼–å†™çš„è¿˜æ˜¯å·²ç»å®Œå…¨è£…ç®±çš„äº§å“ã€‚ å½“æˆ‘å‘ç°Kafkaä»ç„¶æ˜¯ç›’è£…äº§å“æ—¶ï¼Œæˆ‘æ„Ÿåˆ°æƒŠè®¶å’Œå¤±æœ›ï¼Œæˆ‘çš„ä»»åŠ¡ä¸ä»…æ˜¯ç”¨Javaç¼–å†™å®¢æˆ·ç«¯ï¼ˆæˆ‘å–œæ¬¢è¿™æ ·åšï¼‰ï¼Œè¿˜å°†å®Œæˆçš„åº”ç”¨ç¨‹åºéƒ¨ç½²å’Œé…ç½®ä¸ºdevOpsï¼ˆæˆ‘è®¨åŒåšï¼‰ã€‚ ä½†æ˜¯ï¼Œå³ä½¿æˆ‘å¯ä»¥åœ¨ä¸åˆ°ä¸€å¤©çš„æ—¶é—´å†…å°†å…¶åœ¨Kafkaè™šæ‹ŸæœåŠ¡å™¨ä¸Šæå‡ºï¼Œä¹Ÿç¡®å®éå¸¸ç®€å•ã€‚ è¿™æ ·å•Š <br><br> æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†å…·æœ‰ä»¥ä¸‹äº¤äº’ç»“æ„ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wy/id/y5/wyidy5ttuw6eam5buszy6rb8z0m.jpeg"></div><br> ä¸å¾€å¸¸ä¸€æ ·ï¼Œåœ¨æ–‡ç« æœ«å°¾ï¼Œå°†æœ‰æŒ‡å‘å¸¦æœ‰å·¥ä½œä»£ç çš„gitçš„é“¾æ¥ã€‚ <br><br><h1> åœ¨è™šæ‹Ÿæœºä¸Šéƒ¨ç½²Apache Kafka + Zookeeper </h1><br> æˆ‘è¯•å›¾åœ¨æœ¬åœ°Linuxï¼Œç½‚ç²Ÿå’Œè¿œç¨‹Linuxä¸Šæé«˜Kafkaã€‚ åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼ˆLinuxï¼‰ï¼Œæˆ‘å¾ˆå¿«å°±æˆåŠŸäº†ã€‚ å¯¹äºç½‚ç²Ÿï¼Œä»€ä¹ˆä¹Ÿæ²¡å‘ç”Ÿã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨Linuxä¸Šå®‰è£…Kafkaã€‚ æˆ‘é€‰æ‹©äº†Ubuntu 18.04ã€‚ <br><br> ä¸ºäº†è®©Kafkaå·¥ä½œï¼Œå¥¹éœ€è¦ä¸€ä¸ªZookeeperã€‚ ä¸ºæ­¤ï¼Œå¿…é¡»åœ¨å¯åŠ¨Kafkaä¹‹å‰ä¸‹è½½å¹¶è¿è¡Œå®ƒã€‚ <br><br> è¿™æ ·å•Š <br><br><h4>  0.å®‰è£…JRE </h4><br> è¿™æ˜¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®Œæˆçš„ï¼š <br><br><pre><code class="bash hljs">sudo apt-get update sudo apt-get install default-jre</code> </pre> <br> å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è¾“å…¥å‘½ä»¤ <br><br><pre> <code class="bash hljs">java -version</code> </pre> <br> å¹¶ç¡®ä¿å·²å®‰è£…Javaã€‚ <br><br><h4>  1.ä¸‹è½½Zookeeper </h4><br> æˆ‘ä¸å–œæ¬¢Linuxä¸Šçš„é­”æœ¯å›¢é˜Ÿï¼Œå°¤å…¶æ˜¯å½“ä»–ä»¬åªç»™å‡ºä¸€äº›å‘½ä»¤å¹¶ä¸”ä¸æ¸…æ¥šä»–ä»¬åœ¨åšä»€ä¹ˆæ—¶ã€‚ å› æ­¤ï¼Œæˆ‘å°†æè¿°æ¯ä¸ªåŠ¨ä½œ-å®ƒçš„ç¡®åˆ‡ä½œç”¨ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½Zookeeperå¹¶å°†å…¶è§£å‹ç¼©åˆ°ä¸€ä¸ªæ–¹ä¾¿çš„æ–‡ä»¶å¤¹ä¸­ã€‚ å»ºè®®å°†æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½å­˜å‚¨åœ¨/ optæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒå°†æ˜¯/ opt / zookeeperã€‚ <br><br> æˆ‘ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚ å¦‚æœæ‚¨è®¤ä¸ºå…¶ä»–Linuxå‘½ä»¤å¯ä»¥ä½¿æ‚¨æ›´æ­£ç¡®åœ°æ‰§è¡Œæ­¤æ“ä½œï¼Œè¯·ä½¿ç”¨å®ƒä»¬ã€‚ æˆ‘æ˜¯å¼€å‘äººå‘˜ï¼Œè€Œä¸æ˜¯å¼€å‘äººå‘˜ï¼Œå¹¶ä¸”æˆ‘ä¸â€œå±±ç¾Šæœ¬èº«â€çº§åˆ«çš„æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚ å› æ­¤ï¼Œä¸‹è½½åº”ç”¨ç¨‹åºï¼š <br><br><pre> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://apache-mirror.rbc.ru/pub/apache/zookeeper/zookeeper-3.4.12/zookeeper-3.4.12.tar.gz"</span></span></code> </pre> <br> è¯¥åº”ç”¨ç¨‹åºè¢«ä¸‹è½½åˆ°æ‚¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘åˆ›å»ºäº†æ–‡ä»¶å¤¹/ home / xpendence / downloadsï¼Œä»¥ä¸‹è½½æˆ‘éœ€è¦çš„æ‰€æœ‰åº”ç”¨ç¨‹åºã€‚ <br><br><h4>  2.è§£å‹Zookeeper </h4><br> æˆ‘ä½¿ç”¨äº†å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/zookeeper-3.4.12.tar.gz</code> </pre> <br> æ­¤å‘½ä»¤å°†å½’æ¡£æ–‡ä»¶è§£å‹ç¼©åˆ°æ‚¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­ã€‚ ç„¶åï¼Œæ‚¨å¯èƒ½éœ€è¦å°†åº”ç”¨ç¨‹åºè½¬ç§»åˆ°/ opt / zookeeperã€‚ æ‚¨å¯ä»¥ç«‹å³è¿›å…¥å®ƒï¼Œå¹¶ä»é‚£é‡Œå·²ç»è§£å‹ç¼©äº†å­˜æ¡£ã€‚ <br><br><h4>  3.ç¼–è¾‘è®¾å®š </h4><br> åœ¨æ–‡ä»¶å¤¹/ zookeeper / conf /ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶zoo-sample.cfgï¼Œæˆ‘å»ºè®®å°†å…¶é‡å‘½åä¸ºzoo.confï¼ŒJVMå°†åœ¨å¯åŠ¨æ—¶æŸ¥æ‰¾è¯¥æ–‡ä»¶ã€‚ æœ€ååº”åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š <br><br><pre> <code class="bash hljs">tickTime=2000 dataDir=/var/zookeeper clientPort=2181</code> </pre> <br> å¦å¤–ï¼Œåˆ›å»º/ var / zookeeperç›®å½•ã€‚ <br><br><h4>  4.å¯åŠ¨Zookeeper </h4><br> è½¬åˆ°/ opt / zookeeperæ–‡ä»¶å¤¹ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼š <br><br><pre> <code class="bash hljs">bin/zkServer.sh start</code> </pre> <br> åº”è¯¥å‡ºç°â€œå¼€å§‹â€ã€‚ <br><br> ä¹‹åï¼Œæˆ‘å»ºè®®æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚ æˆ‘ä»¬å†™ï¼š <br><br><pre> <code class="bash hljs">telnet localhost 2181</code> </pre> <br> åº”æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œè¯´æ˜è¿æ¥æˆåŠŸã€‚ å¦‚æœæœåŠ¡å™¨æ€§èƒ½è¾ƒå¼±ï¼Œä½†æœªå‡ºç°è¯¥æ¶ˆæ¯ï¼Œè¯·é‡è¯•-å³ä½¿å‡ºç°STARTEDï¼Œåº”ç”¨ç¨‹åºä¹Ÿå°†åœ¨æ›´æ™šçš„æ—¶å€™å¼€å§‹ç›‘å¬è¯¥ç«¯å£ã€‚ å½“æˆ‘åœ¨ä¸€å°å¼±å°çš„æœåŠ¡å™¨ä¸Šå°è¯•æ‰€æœ‰è¿™äº›æ“ä½œæ—¶ï¼Œå®ƒæ¯æ¬¡éƒ½å‘ç”Ÿåœ¨æˆ‘èº«ä¸Šã€‚ å¦‚æœä¸€åˆ‡éƒ½å·²è¿æ¥ï¼Œè¯·è¾“å…¥å‘½ä»¤ <br><br><pre> <code class="bash hljs">ruok</code> </pre> <br> è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼šâ€œä½ è¿˜å¥½å—ï¼Ÿâ€ æœåŠ¡å™¨åº”å“åº”ï¼š <br><br><pre> <code class="bash hljs">imok ( !)</code> </pre> <br> å¹¶æ–­å¼€è¿æ¥ã€‚ å› æ­¤ï¼Œä¸€åˆ‡éƒ½æŒ‰è®¡åˆ’è¿›è¡Œã€‚ æˆ‘ä»¬ç»§ç»­å¯åŠ¨Apache Kafkaã€‚ <br><br><h4>  5.åœ¨Kafkaä¸‹åˆ›å»ºä¸€ä¸ªç”¨æˆ· </h4><br> è¦ä½¿ç”¨Kafkaï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ã€‚ <br><br><pre> <code class="bash hljs">sudo adduser --system --no-create-home --disabled-password --disabled-login kafka</code> </pre> <br><h4>  6.ä¸‹è½½Apache Kafka </h4><br> æœ‰ä¸¤ç§åˆ†å¸ƒ-äºŒè¿›åˆ¶å’Œæºã€‚ æˆ‘ä»¬éœ€è¦ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ åœ¨å¤–è§‚ä¸Šï¼Œå¸¦æœ‰äºŒè¿›åˆ¶æ–‡ä»¶çš„å½’æ¡£æ–‡ä»¶å¤§å°ä¸åŒã€‚ äºŒè¿›åˆ¶æ–‡ä»¶é‡59 MBï¼Œé‡6.5 MBã€‚ <br><br> ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥å°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½åˆ°è¯¥ç›®å½•ä¸­ï¼š <br><br><pre> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://mirror.linux-ia64.org/apache/kafka/2.1.0/kafka_2.11-2.1.0.tgz"</span></span></code> </pre> <br><h4>  7.è§£å‹Apache Kafka </h4><br> è§£å‹è¿‡ç¨‹ä¸Zookeeperçš„ç›¸åŒã€‚ æˆ‘ä»¬è¿˜å°†å‹ç¼©æ–‡ä»¶è§£å‹ç¼©åˆ°/ optç›®å½•ä¸­ï¼Œå¹¶å°†å…¶é‡å‘½åä¸ºkafkaï¼Œä»¥ä¾¿/ binæ–‡ä»¶å¤¹çš„è·¯å¾„ä¸º/ opt / kafka / bin <br><br><pre> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/kafka_2.11-2.1.0.tgz</code> </pre> <br><h4>  8.ç¼–è¾‘è®¾å®š </h4><br> è®¾ç½®åœ¨/opt/kafka/config/server.propertiesä¸­ã€‚ æ·»åŠ ä¸€è¡Œï¼š <br><br><pre> <code class="bash hljs">delete.topic.enable = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br> æ­¤è®¾ç½®ä¼¼ä¹æ˜¯å¯é€‰çš„ï¼Œæ²¡æœ‰å®ƒå°±å¯ä»¥å·¥ä½œã€‚ æ­¤è®¾ç½®ä½¿æ‚¨å¯ä»¥åˆ é™¤ä¸»é¢˜ã€‚ å¦åˆ™ï¼Œæ‚¨æ ¹æœ¬æ— æ³•é€šè¿‡å‘½ä»¤è¡Œåˆ é™¤ä¸»é¢˜ã€‚ <br><br><h4>  9.æˆ‘ä»¬æˆäºˆè®¿é—®ç”¨æˆ·kafkaç›®å½•Kafkaçš„æƒé™ </h4><br><pre> <code class="bash hljs">chown -R kafka:nogroup /opt/kafka chown -R kafka:nogroup /var/lib/kafka</code> </pre> <br><h4>  10.æœŸå¾…å·²ä¹…çš„Apache Kafkaå‘å¸ƒ </h4><br> æˆ‘ä»¬è¾“å…¥å‘½ä»¤ï¼Œç„¶åå¯åŠ¨Kafkaï¼š <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/server.properties</code> </pre> <br> å¦‚æœå¸¸è§„æ“ä½œï¼ˆKafkaç”¨Javaå’ŒScalaç¼–å†™ï¼‰æ²¡æœ‰æº¢å‡ºåˆ°æ—¥å¿—ä¸­ï¼Œé‚£ä¹ˆä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨å¯ä»¥æµ‹è¯•æˆ‘ä»¬çš„æœåŠ¡ã€‚ <br><br><h4>  10.1ã€‚ æœåŠ¡å™¨é—®é¢˜å¼± </h4><br> ä¸ºäº†åœ¨Apache Kafkaä¸Šè¿›è¡Œå®éªŒï¼Œæˆ‘é€‰æ‹©äº†ä¸€ä¸ªæ€§èƒ½è¾ƒå¼±çš„æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å…·æœ‰ä¸€ä¸ªå†…æ ¸å’Œ512 MB RAMï¼ˆä»…éœ€99å¢å¸ƒï¼‰ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯å‡ ä¸ªé—®é¢˜ã€‚ <br><br> å†…å­˜ä¸è¶³ã€‚ å½“ç„¶ï¼Œæ‚¨æ— æ³•ä½¿ç”¨512 MBè¶…é¢‘ï¼Œå¹¶ä¸”ç”±äºå†…å­˜ä¸è¶³ï¼ŒæœåŠ¡å™¨æ— æ³•éƒ¨ç½²Kafkaã€‚ äº‹å®æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒKafkaå ç”¨1 GBçš„å†…å­˜ã€‚ éš¾æ€ªä»–å¤±è¸ªäº†:) <br><br> æˆ‘ä»¬è½¬åˆ°kafka-server-start.shï¼Œzookeeper-server-start.shã€‚ å·²ç»æœ‰ä¸€æ¡è°ƒèŠ‚å†…å­˜çš„è¡Œï¼š <br><br><pre> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx1G -Xms1G"</span></span></code> </pre> <br> æ›´æ”¹ä¸ºï¼š <br><br><pre> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx256M -Xms128M"</span></span></code> </pre> <br> è¿™å°†é™ä½Kafkaçš„èƒƒå£ï¼Œå¹¶å…è®¸æ‚¨å¯åŠ¨æœåŠ¡å™¨ã€‚ <br><br> è®¡ç®—æœºæ€§èƒ½ä½ä¸‹çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´è¿æ¥åˆ°Zookeeperã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯6ç§’ã€‚ å¦‚æœé“å¾ˆå¼±ï¼Œé‚£å½“ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚ åœ¨server.propertiesä¸­ï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸zukipperçš„è¿æ¥æ—¶é—´ï¼š <br><br><pre> <code class="bash hljs">zookeeper.connection.timeout.ms=30000</code> </pre> <br> æˆ‘å®šäº†åŠåˆ†é’Ÿã€‚ <br><br><h4>  11.æµ‹è¯•KafkaæœåŠ¡å™¨ </h4><br> ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œå…¶ä¸­ä¸€ä¸ªå°†å¯åŠ¨ç”Ÿäº§è€…ï¼Œè€Œå¦ä¸€ä¸ªå°†å¯åŠ¨æ¶ˆè´¹è€…ã€‚ <br> åœ¨ç¬¬ä¸€ä¸ªæ§åˆ¶å°ä¸­ï¼Œè¾“å…¥ä¸€è¡Œï¼š <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /opt/kafka/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br> åº”æ˜¾ç¤ºæ­¤å›¾æ ‡ï¼Œè¡¨æ˜ç”Ÿäº§è€…å·²å‡†å¤‡å¥½å‘é€åƒåœ¾é‚®ä»¶ï¼š <br><br><pre> <code class="bash hljs">&gt;</code> </pre> <br> åœ¨ç¬¬äºŒä¸ªæ§åˆ¶å°ä¸­ï¼Œè¾“å…¥å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">/opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> --from-beginning</code> </pre> <br> ç°åœ¨ï¼Œåœ¨ç”Ÿäº§è€…æ§åˆ¶å°ä¸­é”®å…¥å†…å®¹ï¼Œå½“æ‚¨æŒ‰Enteré”®æ—¶ï¼Œå®ƒå°†å‡ºç°åœ¨æ¶ˆè´¹è€…æ§åˆ¶å°ä¸­ã€‚ <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/k7/uu/kf/k7uukff1u2kyygrgetrnvjnqmmg.png"></a> <br><br> å¦‚æœæ‚¨åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„ç”»é¢ä¸æˆ‘å¤§è‡´ç›¸åŒ-æ­å–œï¼Œæœ€ç³Ÿç³•çš„æ—¶åˆ»å·²ç»è¿‡å»ï¼ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n7/rg/lz/n7rglz4s3wvbqzg_chzjjooiazw.jpeg"></div><br> ç°åœ¨æˆ‘ä»¬åªéœ€è¦åœ¨Spring Bootä¸Šç¼–å†™å‡ ä¸ªå®¢æˆ·ç«¯å³å¯é€šè¿‡Apache Kafkaç›¸äº’é€šä¿¡ã€‚ <br><br><h1> åœ¨Spring Bootä¸Šç¼–å†™åº”ç”¨ç¨‹åº </h1><br> æˆ‘ä»¬å°†ç¼–å†™ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒä»¬å°†é€šè¿‡Apache Kafkaäº¤æ¢æ¶ˆæ¯ã€‚ ç¬¬ä¸€æ¡æ¶ˆæ¯ç§°ä¸ºkafka-serverï¼Œå°†åŒ…å«ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚ ç¬¬äºŒä¸ªç§°ä¸ºkafka-testerï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ä½¿æˆ‘ä»¬æ‹¥æœ‰å¾®æœåŠ¡æ¶æ„ã€‚ <br><br><h3> å¡å¤«å¡æœåŠ¡å™¨ </h3><br> å¯¹äºé€šè¿‡Spring Initializråˆ›å»ºçš„é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦Kafkaæ¨¡å—ã€‚ æˆ‘æ·»åŠ äº†Lombokå’ŒWebï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªå£å‘³é—®é¢˜ã€‚ <br><br>  Kafkaå®¢æˆ·ç«¯ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ-ç”Ÿäº§è€…ï¼ˆä»–å°†æ¶ˆæ¯å‘é€åˆ°KafkaæœåŠ¡å™¨ï¼‰å’Œæ¶ˆè´¹è€…ï¼ˆä»–å¬ç€KafkaæœåŠ¡å™¨å¹¶ä»é‚£é‡Œæ¥æ”¶æœ‰å…³ä»–æ‰€è®¢é˜…ä¸»é¢˜çš„æ–°æ¶ˆæ¯ï¼‰ã€‚ æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯ç¼–å†™ä¸¤ä¸ªç»„ä»¶å¹¶ä½¿å®ƒä»¬å·¥ä½œã€‚ <br><br> æ¶ˆè´¹è€…ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaConsumerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.group.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaGroupId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); } }</code> </pre> <br> æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥è‡ªkafka.propertiesçš„é™æ€æ•°æ®åˆå§‹åŒ–çš„2ä¸ªå­—æ®µã€‚ <br><br><pre> <code class="java hljs">kafka.server=localhost:<span class="hljs-number"><span class="hljs-number">9092</span></span> kafka.group.id=server.broadcast</code> </pre> <br>  kafka.serveræ˜¯æœåŠ¡å™¨æŒ‚èµ·çš„åœ°å€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºæœ¬åœ°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒKafkaä¾¦å¬ç«¯å£9092ã€‚ <br><br>  kafka.group.idæ˜¯ä¸€ç»„ä½¿ç”¨è€…ï¼Œåœ¨å…¶ä¸­ä¼ é€æ¶ˆæ¯çš„ä¸€ä¸ªå®ä¾‹ã€‚ ä¾‹å¦‚ï¼Œæ‚¨åœ¨ä¸€ä¸ªå°ç»„ä¸­æœ‰ä¸‰ä¸ªå¿«é€’å‘˜ï¼Œä»–ä»¬éƒ½å¬åŒä¸€ä¸ªè¯é¢˜ã€‚ æœåŠ¡å™¨ä¸Šå‡ºç°å¸¦æœ‰è¯¥ä¸»é¢˜çš„æ–°æ¶ˆæ¯åï¼Œè¯¥æ¶ˆæ¯å°±ä¼šç«‹å³ä¼ é€’ç»™ç»„ä¸­çš„æŸäººã€‚ å…¶ä½™ä¸¤ä¸ªä½¿ç”¨è€…æ²¡æœ‰æ”¶åˆ°è¯¥æ¶ˆæ¯ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºæ¶ˆè´¹è€…åˆ›å»ºå·¥å‚-ConsumerFactoryã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); }</code> </pre> <br> é€šè¿‡æˆ‘ä»¬æ‰€éœ€çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ƒå°†åœ¨å°†æ¥æˆä¸ºæ¶ˆè´¹è€…çš„æ ‡å‡†å·¥å‚ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; }</code> </pre> <br>  ConsumerConfigsåªæ˜¯Mapé…ç½®ã€‚ æˆ‘ä»¬æä¾›æœåŠ¡å™¨åœ°å€ï¼Œç»„å’Œååºåˆ—åŒ–å™¨ã€‚ <br><br> æ­¤å¤–ï¼Œå¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹ä¹‹ä¸€ã€‚ æ¶ˆè´¹è€…å¯ä»¥æ¥æ”¶å•ä¸ªå¯¹è±¡å’Œé›†åˆï¼Œä¾‹å¦‚StarshipDtoå’ŒListã€‚ è€Œä¸”ï¼Œå¦‚æœå°†StarshipDtoä½œä¸ºJSONè·å–ï¼Œåˆ™å°†Listå¤§è‡´ä½œä¸ºJSONæ•°ç»„è·å–ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è‡³å°‘æœ‰ä¸¤ä¸ªæ¶ˆæ¯å·¥å‚-ç”¨äºå•ä¸ªæ¶ˆæ¯å’Œç”¨äºæ•°ç»„ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; }</code> </pre> <br> æˆ‘ä»¬å®ä¾‹åŒ–ConcurrentKafkaListenerContainerFactoryï¼Œåˆ†åˆ«é”®å…¥Longï¼ˆæ¶ˆæ¯é”®ï¼‰å’ŒAbstractDtoï¼ˆæŠ½è±¡æ¶ˆæ¯å€¼ï¼‰ï¼Œå¹¶ä½¿ç”¨å±æ€§åˆå§‹åŒ–å…¶å­—æ®µã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ç”¨æˆ‘ä»¬çš„æ ‡å‡†å·¥å‚ï¼ˆå·²ç»åŒ…å«Mapé…ç½®ï¼‰åˆå§‹åŒ–å·¥å‚ï¼Œç„¶åæ ‡è®°ä¸ºæˆ‘ä»¬ä¸ä¾¦å¬æ•°æ®åŒ…ï¼ˆç›¸åŒçš„æ•°ç»„ï¼‰ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªç®€å•çš„JSONè½¬æ¢å™¨ä½œä¸ºè½¬æ¢å™¨ã€‚ <br><br> å½“æˆ‘ä»¬ä¸ºåŒ…/æ•°ç»„ï¼ˆæ‰¹å¤„ç†ï¼‰åˆ›å»ºå·¥å‚æ—¶ï¼Œä¸»è¦åŒºåˆ«ï¼ˆé™¤äº†æ ‡è®°ä¸ºç›‘å¬åŒ…çš„äº‹å®ï¼‰æ˜¯ï¼Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªç‰¹æ®Šçš„åŒ…è½¬æ¢å™¨ä½œä¸ºè½¬æ¢å™¨ï¼Œå®ƒå°†è½¬æ¢åŒ…å«ä»¥ä¸‹å†…å®¹çš„åŒ…ä»JSONå­—ç¬¦ä¸²ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); }</code> </pre> <br> è¿˜æœ‰ä¸€ä»¶äº‹ã€‚ åˆå§‹åŒ–Spring Beanæ—¶ï¼Œåç§°kafkaListenerContainerFactoryä¸‹çš„binå¯èƒ½ä¸ä¼šè¢«è®¡æ•°ï¼Œå¹¶ä¸”è¯¥åº”ç”¨ç¨‹åºå°†è¢«ç ´åã€‚ å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨æ›´ä¼˜é›…çš„é€‰é¡¹æ¥è§£å†³é—®é¢˜ï¼Œåœ¨æ³¨é‡Šä¸­å†™ä¸‹å®ƒä»¬ï¼Œå› ä¸ºç°åœ¨æˆ‘åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ªå¸è½½äº†å…·æœ‰ç›¸åŒåç§°åŠŸèƒ½çš„åƒåœ¾ç®±ï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); }</code> </pre> <br> æ¶ˆè´¹è€…æˆç«‹ã€‚ æˆ‘ä»¬ä¼ é€’ç»™ç”Ÿäº§è€…ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaProducerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.producer.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaProducerId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, LongSerializer.class); props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class); props.put(ProducerConfig.CLIENT_ID_CONFIG, kafkaProducerId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProducerFactory&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerStarshipFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaProducerFactory&lt;&gt;(producerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> KafkaTemplate&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kafkaTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ KafkaTemplate&lt;Long, StarshipDto&gt; template = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KafkaTemplate&lt;&gt;(producerStarshipFactory()); template.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> template; } }</code> </pre> <br> åœ¨é™æ€å˜é‡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦kafkaæœåŠ¡å™¨çš„åœ°å€å’Œç”Ÿäº§è€…IDã€‚ ä»–å¯ä»¥æ˜¯ä»»ä½•äººã€‚ <br><br> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œåœ¨é…ç½®ä¸­ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ å‡ ä¹ä¸€æ ·ã€‚ ä½†æ˜¯å°±å·¥å‚è€Œè¨€ï¼Œæœ‰å¾ˆå¤§çš„ä¸åŒã€‚ æˆ‘ä»¬å¿…é¡»ä¸ºå°†è¦å‘é€åˆ°å…¶å¯¹è±¡çš„æ¯ä¸ªç±»æ³¨å†Œä¸€ä¸ªæ¨¡æ¿ï¼Œå¹¶ä¸ºå…¶æ³¨å†Œä¸€ä¸ªå·¥å‚ã€‚ æˆ‘ä»¬æœ‰ä¸€å¯¹è¿™æ ·çš„å¯¹ï¼Œä½†å¯ä»¥æœ‰æ•°åå¯¹ã€‚ <br><br> åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬æ ‡è®°ä¸ºå°†åºåˆ—åŒ–JSONä¸­çš„å¯¹è±¡ï¼Œè¿™ä¹Ÿè®¸å°±è¶³å¤Ÿäº†ã€‚ <br><br> æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å’Œä¸€ä¸ªç”Ÿäº§è€…ï¼Œå®ƒä»ç„¶éœ€è¦ç¼–å†™ä¸€é¡¹æœåŠ¡æ¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ObjectMapper objectMapper; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate, ObjectMapper objectMapper)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.kafkaStarshipTemplate = kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.objectMapper = objectMapper; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeValueAsString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> objectMapper.writeValueAsString(dto); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsonProcessingException e) { e.printStackTrace(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"Writing value to JSON failed: "</span></span> + dto.toString()); } } }</code> </pre> <br> æˆ‘ä»¬çš„æœåŠ¡åªæœ‰ä¸¤ç§æ–¹æ³•ï¼Œå®ƒä»¬è¶³ä»¥è®©æˆ‘ä»¬è§£é‡Šå®¢æˆ·çš„å·¥ä½œã€‚ æˆ‘ä»¬è‡ªåŠ¨è¿æ¥æ‰€éœ€çš„æ¨¡å¼ï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate;</code> </pre> <br> ç”Ÿäº§è€…æ–¹æ³•ï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); }</code> </pre> <br> å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯æ‰€éœ€è¦åšçš„åªæ˜¯åœ¨æ¨¡æ¿ä¸Šè°ƒç”¨sendæ–¹æ³•ï¼Œç„¶ååœ¨å…¶ä¸­ä¼ è¾“ä¸»é¢˜ï¼ˆä¸»é¢˜ï¼‰å’Œæˆ‘ä»¬çš„å¯¹è±¡ã€‚ è¯¥å¯¹è±¡å°†ä»¥JSONåºåˆ—åŒ–ï¼Œå¹¶å°†åœ¨æŒ‡å®šä¸»é¢˜ä¸‹è·³è½¬åˆ°æœåŠ¡å™¨ã€‚ <br><br> ä¾¦å¬æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); }</code> </pre> <br> æˆ‘ä»¬ç”¨@KafkaListeneræ‰¹æ³¨æ ‡è®°è¯¥æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ³¨æ˜æˆ‘ä»¬å–œæ¬¢çš„ä»»ä½•IDï¼Œå·²æ”¶å¬çš„ä¸»é¢˜ä»¥åŠå°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯è½¬æ¢ä¸ºæ‰€éœ€å†…å®¹çš„å·¥å‚ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªsingleFactoryã€‚ å¯¹äºåˆ—è¡¨&lt;ï¼Ÿ&gt;ï¼ŒæŒ‡å®šbatchFactoryã€‚ ç»“æœï¼Œæˆ‘ä»¬ä½¿ç”¨sendæ–¹æ³•å°†å¯¹è±¡å‘é€åˆ°kafkaæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨æ¶ˆè€—æ–¹æ³•å°†å…¶è·å–ã€‚ <br><br> æ‚¨å¯ä»¥åœ¨5åˆ†é’Ÿå†…ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œä»¥æ¼”ç¤ºKafkaçš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬ä¼šèµ°å¾—æ›´è¿œ-èŠ±10åˆ†é’Ÿç¼–å†™å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºå°†å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Œè¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºå°†ä¾¦å¬çš„æ¶ˆæ¯ã€‚ <br><br><h2> å¡å¤«å¡æµ‹è¯•ä»ª </h2><br> å…·æœ‰ç¼–å†™ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾ç¼–å†™ç¬¬äºŒä¸ªåº”ç”¨ç¨‹åºï¼Œå°¤å…¶æ˜¯å¦‚æœæˆ‘ä»¬å¤åˆ¶ç²˜è´´å’ŒdtoåŒ…ï¼Œä»…æ³¨å†Œç”Ÿäº§è€…ï¼ˆæˆ‘ä»¬å°†ä»…å‘é€æ¶ˆæ¯ï¼‰å¹¶å°†å”¯ä¸€çš„sendæ–¹æ³•æ·»åŠ åˆ°æœåŠ¡ä¸­ã€‚ ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ï¼Œæ‚¨å¯ä»¥è½»æ¾ä¸‹è½½é¡¹ç›®ä»£ç ï¼Œå¹¶ç¡®ä¿å…¶ä¸­æ²¡æœ‰å¤æ‚çš„ä»£ç ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(initialDelay = <span class="hljs-number"><span class="hljs-number">10000</span></span>, fixedDelay = <span class="hljs-number"><span class="hljs-number">5000</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">produce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ StarshipDto dto = createDto(); log.info(<span class="hljs-string"><span class="hljs-string">"&lt;= sending {}"</span></span>, writeValueAsString(dto)); kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> StarshipDto </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StarshipDto(<span class="hljs-string"><span class="hljs-string">"Starship "</span></span> + (LocalTime.now().toNanoOfDay() / <span class="hljs-number"><span class="hljs-number">1000000</span></span>)); }</code> </pre> <br> åœ¨æœ€åˆçš„10ç§’åï¼Œkafka-testerå¼€å§‹æ¯5ç§’å°†å¸¦æœ‰æ˜Ÿèˆ°åç§°çš„æ¶ˆæ¯å‘é€åˆ°KafkaæœåŠ¡å™¨ï¼ˆå›¾ç‰‡æ˜¯å¯å•å‡»çš„ï¼‰ã€‚ <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/oo/ri/gk/oorigkqltxuntytvhzbarlninhk.png"></a> <br><br> åœ¨é‚£é‡Œï¼Œkafka-serverä¼šæ”¶å¬å’Œæ¥æ”¶å®ƒä»¬ï¼ˆå›¾ç‰‡ä¹Ÿå¯å•å‡»ï¼‰ã€‚ <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/cs/w-/vc/csw-vcgajjpjymkdxcwibqllnoi.png"></a> <br><br> æˆ‘å¸Œæœ›é‚£äº›æ¢¦æƒ³å¼€å§‹åœ¨Kafkaç¼–å†™å¾®æœåŠ¡çš„äººèƒ½å¤Ÿåƒæˆ‘ä¸€æ ·è½»æ¾åœ°æˆåŠŸã€‚ è¿™æ˜¯é¡¹ç›®çš„é“¾æ¥ï¼š <br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">kafkaæœåŠ¡å™¨</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">å¡å¤«å¡æµ‹è¯•ä»ª</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN440400/">https://habr.com/ru/post/zh-CN440400/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN440388/index.html">æ—¶é—´é—´éš”ï¼šå³å°†åˆ°æ¥çš„C ++æ¼”å˜</a></li>
<li><a href="../zh-CN440390/index.html">åµŒå…¥å¼ç³»ç»Ÿçš„å¤šæ ·åŒ–ä¸–ç•Œä»¥åŠEmboxåœ¨å…¶ä¸­çš„åœ°ä½</a></li>
<li><a href="../zh-CN440392/index.html">æ‚¨ç½‘ç«™ä¸Šçš„WebRTC-æ²¡æœ‰é”™è¯¯ï¼Œä¹Ÿæ²¡æœ‰é¢„ç®—</a></li>
<li><a href="../zh-CN440394/index.html">PostgreSQLæƒé™æå‡-CVE-2018-10915è§£æ</a></li>
<li><a href="../zh-CN440398/index.html">å‚åŠ 2018å¹´ä¿„ç½—æ–¯AIæ¯çš„å†å²ï¼ˆå’Œèƒœåˆ©ï¼‰-CodeBall</a></li>
<li><a href="../zh-CN440402/index.html">SearchFaceå¼€å‘äººå‘˜æœ‰å…³ç®—æ³•åŠŸèƒ½çš„ä¿¡æ¯</a></li>
<li><a href="../zh-CN440404/index.html">â€œä¿¡æ¯æ¶æ„â€ï¼šOZONä¸­çš„mitap</a></li>
<li><a href="../zh-CN440410/index.html">åœ¨åœ°å›¾ä¸Šé€‰æ‹©ï¼Œç¼“å­˜å’Œæ˜¾ç¤ºç…§ç‰‡</a></li>
<li><a href="../zh-CN440412/index.html">Zimbraåä½œå¥—ä»¶å’ŒMS Exchangeåœ¨åŒä¸€åŸŸä¸Š</a></li>
<li><a href="../zh-CN440414/index.html">å…³äºçŸ­ç»’æ£‰ï¼Œä»£ç è´¨é‡ï¼Œä¸€èˆ¬è´¨é‡å’Œè´¨é‡ç®¡ç†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>