<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Versi贸n PVS-Studio 6.26   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Por lo general, no escribimos notas sobre el lanzamiento de la nueva versi贸n del analizador PVS-Studio. Sin embargo, la nueva versi贸n incluye muchos c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Versi贸n PVS-Studio 6.26</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/426905/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2b/55b/397/c2b55b397a33727e8c77fef4f5911fae.png" alt="PVS-Studio 6.26"></div><br>  Por lo general, no escribimos notas sobre el lanzamiento de la nueva versi贸n del analizador PVS-Studio.  Sin embargo, la nueva versi贸n incluye muchos cambios interesantes con respecto al an谩lisis del c贸digo C y C ++, que nos gustar铆a contarles a nuestros usuarios. <br><a name="habracut"></a><br><h2>  Java pr贸ximamente </h2><br>  Para ser sincero, las 煤ltimas y m谩s interesantes innovaciones en PVS-Studio todav铆a est谩n ocultas.  Me refiero a soporte en el analizador de lenguaje Java.  Todav铆a no existe una versi贸n beta p煤blica de PVS-Studio para Java, pero estar谩 disponible muy pronto.  Si desea participar en sus pruebas, puede escribirnos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soporte</a> (elija: Quiero un analizador para Java). <br><br><h2>  Nuevos diagn贸sticos para C y C ++ </h2><br>  En la nueva versi贸n, nos dejamos llevar un poco e inmediatamente agregamos 15 diagn贸sticos de uso general para C y C ++ (V1021-V1035).  En una versi贸n menor, tantos diagn贸sticos nunca se han agregado a la vez.  Se pueden encontrar m谩s detalles sobre cada uno de los diagn贸sticos en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci贸n</a> .  En mi opini贸n, los m谩s interesantes entre los nuevos diagn贸sticos son: <br><br><ul><li>  V1026.  La variable se incrementa en el bucle.  Se producir谩 un comportamiento indefinido en caso de desbordamiento de entero con signo. </li><li>  V1033.  La variable se declara como autom谩tica en C. Su tipo predeterminado es int. </li></ul><br>  Diagn贸stico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V1026</a> creado en base a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">discusi贸n</a> en el foro linux.org.ru.  El programador se quej贸 de una falla en el compilador GCC 8, pero, como result贸 m谩s tarde, la falla fue el c贸digo incorrecto, lo que condujo a un comportamiento indefinido.  Miremos este caso. <br><br>  <b>Nota</b>  En la discusi贸n original, la variable <i>s</i> es de tipo <i>const char * s</i> .  Adem谩s, en la plataforma de destino, el tipo <i>char</i> no est谩 firmado.  Por lo tanto, para mayor claridad, escrib铆 inmediatamente en el ejemplo que el tipo del puntero es <i>constante unsigned char *</i> . <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(*s) { r += ((r * <span class="hljs-number"><span class="hljs-number">20891</span></span> + *s *<span class="hljs-number"><span class="hljs-number">200</span></span>) | *s ^ <span class="hljs-number"><span class="hljs-number">4</span></span> | *s ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) ^ (r &gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>); s++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r &amp; <span class="hljs-number"><span class="hljs-number">0x7fffffff</span></span>; }</code> </pre> <br>  El compilador no genera c贸digo para el operador AND a nivel de bit (&amp;).  Debido a esto, la funci贸n devuelve valores negativos, aunque esto no deber铆a suceder con la intenci贸n del programador. <br><br>  El desarrollador cree que esto es una falla en el compilador.  Pero el programador que escribi贸 dicho c贸digo est谩 realmente equivocado.  La funci贸n no funciona correctamente debido al hecho de que se produce un comportamiento indefinido en ella. <br><br>  El compilador ve que se considera una cierta cantidad en la variable <i>r</i> .  El desbordamiento de la variable <i>r</i> no deber铆a ocurrir.  De lo contrario, este es un comportamiento indefinido que el compilador no debe considerar y tener en cuenta.  Entonces, el compilador cree que dado que el valor en la variable <i>r</i> despu茅s del final del ciclo no puede ser negativo, la operaci贸n <i>r &amp; 0x7fffffff</i> para restablecer el bit de signo es superflua y el compilador simplemente devuelve el valor de la variable <i>r</i> de la funci贸n. <br><br>  Diagnostics V1026 est谩 dise帽ado para detectar tales errores.  Para arreglar el c贸digo, es suficiente leer el hash usando una variable sin signo.  Versi贸n corregida del c贸digo: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> r = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(*s) { r += ((r * <span class="hljs-number"><span class="hljs-number">20891</span></span> + *s *<span class="hljs-number"><span class="hljs-number">200</span></span>) | *s ^ <span class="hljs-number"><span class="hljs-number">4</span></span> | *s ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) ^ (r &gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>); s++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(r &amp; <span class="hljs-number"><span class="hljs-number">0x7fffffff</span></span>); }</code> </pre> <br>  Ahora veamos otro diagn贸stico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V1033</a> .  Es interesante porque la causa de posibles errores fue la nueva palabra clave <i>autom谩tica</i> , que apareci贸 en C ++ 11.  Y no es la innovaci贸n del lenguaje C ++ 11 en s铆 mismo lo que es culpable, sino los matices del plan psicol贸gico :).  Te lo explicar茅 ahora.  Echa un vistazo a este c贸digo: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> d = <span class="hljs-number"><span class="hljs-number">3.14f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> sum = d + i;</code> </pre> <br>  驴Lo ves como un error?  Piensa en eso.  Aqu铆 hay una imagen para que no lea m谩s el texto de inmediato. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/606/b62/4c1/606b624c14976dfe4c257829a44bd520.png" alt="Hora de pensar"></div><br>  驴Adivina qu茅 podr铆a estar mal?  Si no, aqu铆 hay informaci贸n m谩s interesante.  La variable <i>suma</i> ser谩 4, no 4.14.  Por qu茅 <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/162/4e2/f84/1624e2f84f05fb9c6d281e961fba88ca.png" alt="Xs"></div><br>  隆Ahora el lector dir谩 que fue un enigma deshonesto!  Lo que pasa es que esto no es C ++, sino C. <br><br>  Sucede que un proyecto usa C ++ y el viejo C. El programador se acostumbra a usar <i>auto</i> en C ++ y accidentalmente puede usar esta palabra en C. Pero significa algo m谩s all铆: <br><br>  <b><i>auto</i></b> <br><br>  <i>Define una variable local como teniendo una vida local.</i>  <i>La palabra clave auto utiliza la siguiente sintaxis:</i> <br><br><pre> <code class="cpp hljs">[<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>] data-definition;</code> </pre> <br>  <i>Como el tiempo de vida local es el predeterminado para las variables locales, la palabra clave auto se usa extremadamente raramente.</i> <br><br>  Resulta que la <i>suma</i> variable es de tipo <i>int</i> , y es por eso que su valor ser谩 4. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbf/089/35b/dbf08935b7bc60388f7813d41f944ea8.png" alt="Unicornio se esta riendo"></div><br>  Aunque el error puede parecer ex贸tico, de hecho, en un proyecto que usa una mezcla de archivos C y C ++, es muy f谩cil de hacer.  En consecuencia, al analizar archivos C, PVS-Studio advierte sobre tales construcciones sospechosas. <br><br><h2>  Otras innovaciones </h2><br>  Se agreg贸 la capacidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de verificar proyectos</a> para el sistema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compilaci贸n Waf</a> . <br><br>  Continuamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desarrollando el</a> analizador hacia sistemas embebidos.  Esta versi贸n agrega soporte de verificaci贸n de proyectos para GNU Arm Embedded Toolchain, compilador Arm Embedded GCC. <br><br>  Al analizar proyectos para el compilador de Visual C ++ (cl.exe, proyectos vcxproj para Visual Studio / Standalone), el informe del analizador ahora almacena el registro en las rutas a los archivos verificados.  El refinamiento lateral parece m谩s f谩cil de lo que realmente es.  Al preprocesar archivos, el compilador cl.exe estropea el caso en los nombres de archivo.  Y tiene que restaurarlos nuevamente al analizador. <br><br>  Se agreg贸 la capacidad de usar archivos pvsconfig de CLMonitor / Standalone en Windows. <br><br>  Se ha agregado un modo de an谩lisis incremental para el m贸dulo pvs-studio-analzyer / CMake.  El m贸dulo PVS-Studio CMake ahora se puede usar en Windows para proyectos que usan el compilador Visual C ++ (cl.exe). <br><br>  Se agreg贸 soporte para an谩lisis incremental para proyectos de .NET Core / .NET Standard Visual Studio. <br><br><h2>  Enlaces de sitio </h2><br><ol><li>  PVS-Studio.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Historial de versiones</a> </li><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El comportamiento indefinido est谩 m谩s cerca de lo que piensas</a> . </li><li>  Will Dietz, Peng Li, John Regehr y Vikram Adve.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Comprender el desbordamiento de enteros en C / C ++</a> . </li><li>  Egor Bredikhin.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo de un nuevo analizador est谩tico: PVS-Studio Java</a> . </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426905/">https://habr.com/ru/post/es426905/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426891/index.html">SAP Process Mining o c贸mo entender sus procesos de negocio</a></li>
<li><a href="../es426893/index.html">C贸mo iniciar una aplicaci贸n de iOS a trav茅s de React Native</a></li>
<li><a href="../es426899/index.html">Video Science Meetup Video</a></li>
<li><a href="../es426901/index.html">La c谩mara m谩s r谩pida del mundo dispara 10 billones de fotogramas por segundo</a></li>
<li><a href="../es426903/index.html">La ciudad de Chengdu quiere poner en 贸rbita un reflector de sat茅lite para iluminar las calles con una mancha de luz solar de 10 a 80 km</a></li>
<li><a href="../es426907/index.html">Problemas comunes de seguridad de la red corporativa que se pueden detectar con Check Point Security CheckUP</a></li>
<li><a href="../es426911/index.html">GreyEnergy: el sucesor de BlackEnergy ataca a las empresas del sector energ茅tico</a></li>
<li><a href="../es426913/index.html">C贸mo hacer entrevistas entre informes y un peque帽o informe sobre DevOops</a></li>
<li><a href="../es426915/index.html">NASA Hackathon: desaf铆o de aplicaciones espaciales</a></li>
<li><a href="../es426917/index.html">Plataforma inteligente y segura de Cisco para negocios en la era digital</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>