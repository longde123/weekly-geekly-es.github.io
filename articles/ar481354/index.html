<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๐ผ ๐ TelegramBot. ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ. ุงูุฐุจุงุจ ุจุดูู ูููุตู ุ ุดุฑุญุงุช ุจุดูู ูููุตู. (ุงูุฌุฒุก 2) ๐จ๐ฟโ๐จ ๐ ๐ฉ๐ผโ๐ง</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุงุตู ุชุทููุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ููุฑูุจูุช ูู ุงูุจุฑููุงุช. ูู ุงูุฃุฌุฒุงุก ุงูุณุงุจูุฉ ุ ูุงูุดูุง ุงูููุทุฉ ุงูุชู ููุงุฏูุง ุฃูู ูุฌุจ ุชูุณูู ุนูู ุงูุฑูุจูุช ูู ุชููู ุงูุฑุณุงุฆู ูุงููุนุงูุฌุฉ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TelegramBot. ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ. ุงูุฐุจุงุจ ุจุดูู ูููุตู ุ ุดุฑุญุงุช ุจุดูู ูููุตู. (ุงูุฌุฒุก 2)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481354/" style=";text-align:right;direction:rtl"> ููุงุตู ุชุทููุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ููุฑูุจูุช ูู ุงูุจุฑููุงุช.  ูู ุงูุฃุฌุฒุงุก ุงูุณุงุจูุฉ ุ ูุงูุดูุง ุงูููุทุฉ ุงูุชู ููุงุฏูุง ุฃูู ูุฌุจ ุชูุณูู ุนูู ุงูุฑูุจูุช ูู ุชููู ุงูุฑุณุงุฆู ูุงููุนุงูุฌุฉ ูุงูุฅุฑุณุงู.  ุฏุนููุง ูุญุงูู ุงุณุชุฎุฏุงู ุฃุฏูุงุช Java Core ุงูุฃุณุงุณูุฉ ูุฌุนู ุฑูุจูุชูุง ูุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุบูุฑ ูุชุฒุงูู.  ุณูุฃุชู ุจูููุฉ ุชุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ูููุนุงูุฌุฉ.  ุฏุนููุง ูุฑู ููู ุชุนูู ุงูุฃูุงูุฑ ูู ุงูุจุฑู ูููู ุชุญุชุงุฌ ุฅูู ูุนุงูุฌุชูุง. <br><br>  ูุฐุง ูู ุงุณุชูุฑุงุฑ ููุฌุฒุก ุงูุฃูู ูู ุงูููุงูุฉ ุญูู ุจุฑุงูุฌ ุฑูุจูุช ุงูุจุฑูุฌุฉ ููุจุฑููุงุช ูู Java <br>  <a href="https://habr.com/ru/post/476306/">ุชุนูููุงุช TelegramBot ูุฅูุดุงุก ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ููุฑูุจูุช.</a>  <a href="https://habr.com/ru/post/476306/">(ุงูุฌุฒุก ุงูุฃูู)</a> <br>  ููู ูููู ุงูุฃูุฑ ุฃูุซุฑ ุ ูุฃูุช ูุฑุญุจ ุจู ... <br><a name="habracut"></a><br>  ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃูู ูู ูุฐุง ุงูุฌุฒุก ุชูุช ุฅุถุงูุฉ ุงููุซูุฑ ูู ูู ุดูุก ูู ููุช ูุงุญุฏ ูุจูุฏูุก ุณูููู ุจุชุญููู ุฌููุน ุงููุธุงุฆู ุงูุชู ุณูุญุช ููุจูุช ูุชููู ูุงุฏุฑุฉ ุนูู ุชุนุฏุฏ ุงูุนูููุงุช ูุงูุณุจุจ ูู ุงูุญุงุฌุฉ ุฅูููุง ุนูู ุงูุฅุทูุงู. <br><br>  ูุงูุนุงุฏุฉ ูู ุงูุฑุฆูุณู: <br>  ููููู ุงูุนุซูุฑ ุนูู ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฌุงูุฒุฉ ููุฐู ุงูููุงูุฉ ูู ูุฑุน <a href="https://github.com/dp-ua/TelegramBotBase/tree/Part2-Handlers" rel="nofollow">Part2-Handlers</a> ูู ูุณุชูุฏุน git. <br>  ุชุนูู ุงูุดูุฑุฉ ุจุดูู ูุงูู ุ ููู ูุงููุฉ ูุฅูุงูุฉ ูุชุบููุฑ ุงูุจูุงูุงุช ููุญุตูู ุนูู ุฅุฐู ููุจูุช (ุงูุงุณู ูุงูุฑูุฒ) ูุชุดุบูู ุงูุทุฑููุฉ ุงูุฑุฆูุณูุฉ ูู ูุฆุฉ App.class. <br><br>  <i>ูุฑุฌู ููุงุญุธุฉ ุฃู ูุฐู ุงููุฆุฉ ุชุฑุณู ุฅุฎุทุงุฑูุง ุฅูู ูุณุคูู ุงูุจูุช ุนูุฏูุง ูุจุฏุฃ ุงูุจูุช ุจุจุฏุก ุงูุจูุช.</i>  <i>ูุนุฑู ุงููุณุคูู bot ูุญุฏุฏ ุฃูุถูุง ูู ูุฆุฉ App.class ูุฅุฐุง ูู ุชูู ุจุชุบููุฑู ุ ูุณูุญุงูู ุงูุฑูุจูุช ุงูุฎุงุต ุจู ุฅุฑุณุงู ุฑุณุงุฆู ุฅูู :)</i> <br><br>  ุนูุงูุฉ ุนูู ุงูููุงุท ุงูุชู ุณูููู ุจุชุญููููุง ุชูู ุงูุชุบููุฑุงุช ุงูุชู ุธูุฑุช ุจุนุฏ ุฅุตุฏุงุฑ ุงูุฌุฒุก ุงูุฃูู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ุงูุฃูุงูุฑ </h3><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฏุนูุง ูุชุนุงูู ูุน ูุฐุง ุงูููููู ุญูู ูุง ูู ูุฑูู ุจุดูู ุนุงู ูู ูุธุงู ููุชูุงุตู ูุน ุงูุฑูุจูุช ุจุฑููุฉ.  ุงุนุชูุงุฏูุง ุนูู ุฅุนุฏุงุฏุงุช ุจุฑูุงูุฌ ุงูุฑูุจูุช ุ ูููู ุฃู ูุฑู ุฃู ุฑุณุงุฆู ุจุฃู ุชูุณูู ุฃู ุฃูุงูุฑ ูุตููุฉ ุฎุตูุตูุง ููุท.  ูุง ูู ุงููุฑู ู <br>  ุญูุซ ููููู ุชูุจูุฉ ุฎูุงุฑุงุช ุงูุฑุณุงุฆู ูุฐู. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ูุต ุนุงุฏู ุ ุฑุณุงุฆู ุนุงุฏูุฉ.</b> <br>  ูู ูุฐุง ุงููููุฐุฌ ุ ูุชููู ุงูุฑูุจูุช ุฑุณุงุฆู ุนูุฏูุง ููุชุจูู ูู ูู PM.  ููุน ุฐูู ุ ุฅุฐุง <a href="https://core.telegram.org/bots" rel="nofollow">ุชู</a> ุฅููุงู ุชุดุบูู <a href="https://core.telegram.org/bots" rel="nofollow">ูุถุน ุงูุฎุตูุตูุฉ ูู ุงููุฌููุนุงุช ูู</a> ุฅุนุฏุงุฏุงุช ุงูุฑูุจูุช ุ ูุจุฏุฃ ุงูุฑูุจูุช ูู ุฑุคูุฉ ุฌููุน ุงูุฑุณุงุฆู ุจุงููุงูู.  ุฅุฐุง ุชู ุชูููู ูุฐุง ุงูุฅุนุฏุงุฏ ุ ุนูุฏ ุฅุถุงูุชู ุฅูู ุงููุฌููุนุฉ ุ ูุฅู ุงูุฑูุจูุช ูุง ูุฑู ุณูู ุงูุฃูุงูุฑ ุงูููุฌูุฉ ุฅููู.  ููู ุชุจุฏู - ุงูุธุฑ ุงูููุฑุฉ ุงูุซุงููุฉ </li><li style=";text-align:right;direction:rtl">  <b>ูุฑู ูุตููุฉ ุฎุตูุตุง</b> <br>  ุชุจุฏุฃ ูุฐู ุงูุฃูุงูุฑ ุฏุงุฆููุง ุจุดุฑุทุฉ ูุงุฆูุฉ: <b>/</b> <br>  ุจุนุฏ ุฐูู ูุฃุชู ุงููุฑูู ููุณู.  ูุฌุจ ุฃู ูููู ูุต ุงูุฃูุฑ ุจุฏูู ูุณุงูุงุช.  ูุซุงู: <br>  <b>/ ุงุจุฏุฃ</b> <br>  ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุฃูุฑ ุ ูุจุฏุฃ ุฃู ูุณุชุฎุฏู ุฏุงุฆููุง ูู ุงูุชูุงุตู ูุน ุจุฑูุงูุฌ ุงูุฑูุจูุช ุงูุฎุงุต ุจู.  ูุฐูู ุ ููููุง ูููุงุนุฏ ุงูุดูู ุงูุฌูุฏ ุ ูุฌุจ ุชุญุฏูุฏ ุงูุงุณุชุฌุงุจุฉ ููุฐุง ุงูุฃูุฑ. <br><img src="https://habrastorage.org/webt/ol/pi/ud/olpiudptbqgig5zhoqzpnpjquyq.png"><br>  ุฌููุน ุงูุฃูุงูุฑ ุงูุชู ูุนุฑููุง bot ุงูุฎุงุต ุจู ููู ุชุนูู ุ ูููุตุญ ุจุฅุถุงูุชูุง ุฅูู ูุงุฆูุฉ ุงูููุงุฑุงุช ูู ุฅุนุฏุงุฏุงุช bot ุงูุฎุงุตุฉ ุจู.  ูุชู ูู ุฐูู ูู ุจุฑููุฉ ูุนBotFather. <br><br>  <b>ุนู ุทุฑูู</b> ุงุณุชุฏุนุงุก <b>ุงูุฃูุฑ / myBots ุ</b> ุญุฏุฏ <b>ุงูุฑูุจูุช</b> ุงูุฎุงุต ุจู ุซู ุงูุฒุฑ "ุชุญุฑูุฑ ุจูุช" <br>  ุณุชุชููู ูุงูุฐุฉ ุชุธูุฑ ูููุง ุฌููุน ูุนููุงุช bot ุ ูุจุนุฏ ุฐูู ููููู ุชููุฆุฉ ูุงุฌูุชู ุจุงููุงูู ูุงูุฅุดุงุฑุฉ ุฅูู ุงูุฃูุงูุฑ ุงูุชู ูููู ุฃู ูุนูู ูุนูุง ุงูุฑูุจูุช. <br><br><img src="https://habrastorage.org/webt/u6/7o/cl/u67oclalxrv7v3v83h1wzp91gr4.png"><br><br>  ุชู ุถุจุทูุง ุจูุฐุง ุงูุชูุณูู: <br><br><img src="https://habrastorage.org/webt/-a/4x/i-/-a4xi-kqpuxjoielhmog7oh1tom.png"><br><br>  ูุจุนุฏ ุฐูู ุ ุนูุฏูุง ุชุจุฏุฃ ูู ุฅุฏุฎุงู ุฃูุฑ ุฅูู ุจุฑูุงูุฌ ุงูุฑูุจูุช ุงูุฎุงุต ุจู ุ ุณุชุธูุฑ ูู ุงููุณุงุนุฏุฉ ูู ูุงุฆูุฉ ุงูุฃูุงูุฑ ุงููุฏุฑุฌุฉ: <br><br><img src="https://habrastorage.org/webt/hn/yi/wa/hnyiwabkhmbrc7zn0rbuzkfvook.png"><br><br>  ูููุงู ูุงุฑู ุจุณูุท ุขุฎุฑ.  ูุฏ ุชุญุชูู ุงููุฌููุนุฉ ุนูู ุงูุนุฏูุฏ ูู ุจุฑุงูุฌ ุงูุฑูุจูุช ุ ูุฅุฐุง ูุงูุช ูุฏููุง ุฃูุงูุฑ ูุดุชุฑูุฉ (ูุณุชููู ุงูุฃูุงูุฑ ุงูุนุงูุฉ ุฅูุฒุงููุฉ ุ ูุชู ุชูููุฐ ููุณ ุงูุจุฏุงูุฉ ูุงููุณุงุนุฏุฉ ูู ูุนุธู ุจุฑุงูุฌ ุงูุฑูุจูุช) ุ ุซู ุณุชุชู ุฅุถุงูุฉ ุฌุฒุก ุฅูู ุงูุฃูุฑ ููุณู ุ ูุฅุฎุจุงุฑ ุฃู ุฑูุจูุช ููุชูู ุฅููู ูุฐุง ุงูุฃูุฑ.  ูุณูุธูุฑ ุงูุฃูุฑ ุชูุงููุง ูุซู ูุฐุง: <br>  <b>/ start @ test_habr_bot</b> <br></li></ol><br>  ูุงูุขู ุ ููุน ูุนุฑูุฉ ูู ูุฐู ุงููุฑูู ุงูุฏูููุฉ ุ ููููุดุฆ ูุนู ุฎูุงุฑ ุงููุนุงูุฌุฉ ูุฐุง ุงูุฐู ูุฌุจ ุฃู ูููู ุงูุฃูุงูุฑ ุงูุชู ุชุจุฏุฃ ุจุดุฑุทุฉ ูุงุฆูุฉ ููุนุฑูุฉ ููููุฉ ุงูุชูููุฒ ุจูู ูุง ุฅุฐุง ูุงู ุงูุฃูุฑ ููุฌููุง ุจุงูุชุญุฏูุฏ ุฅูู ุฑูุจูุชู ุฃู ุฅูู ุฃุฎุฑู. <br><br>  ูู ุจุฅูุดุงุก ุญุฒูุฉ ุชุญุชูู ุนูู ุงููุฆุงุช ุงููุณุคููุฉ ุนู ูุนุงูุฌุฉ ุงูุฃูุงูุฑ. <br>  <a href="https://github.com/dp-ua/TelegramBotBase/tree/Part2-Handlers/src/main/java/com/example/telegrambot/command" rel="nofollow">ุงูุญุฒูุฉ com.example.telegrambot.command</a> <br><br>  ูู ูุฆุฉ ุงูุฃูุงูุฑ ุ ูุณุฑุฏ ุฌููุน ุงูุฃูุงูุฑ ุงูุชู ูุฌุจ ุฃู ูููููุง ุงูุฑูุจูุช. <br><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Command { NONE, NOTFORME, NOTIFY, START, HELP, ID }</code> </pre> <br>  ููุง ุฑุฃูุช ุณุงุจููุง ุ ุฃุดุฑุช ููBotFather ุฅูู ุฃู ุงูุฑูุจูุช ุงูุฐู ูุฌุจ ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ูููู ูู 4 ูุฑู.  ูุณุชููู ูุฐู ุงูุจุฏุงูุฉ ุงูููุงุณูุฉ ูุงููุณุงุนุฏุฉ.  ูุถูู ูุงุญุฏ ูุนุฑู ูุงุญุฏ ูููุฏ.  ูุฃุจูุบ ูุงุญุฏูุง ุขุฎุฑ ุ ูุงูุฐู ุณุฃุชุญุฏุซ ุนูู ูุงุญููุง ุจุนุฏ ูููู.  ููุฑููุงู ูุง ุดูุก ู NOTFORME ุ ูุงูุฐู ุณูุฎุจุฑูุง ุฃู ุงูุฑุณุงูุฉ ุงููุตูุฉ ุฅูุง ููุณุช ุฃูุฑุงู ุนูู ุงูุฅุทูุงู ุ ุฃู ุฃู ูุฐุง ุงูุฃูุฑ ููุณ ุจุงููุณุจุฉ ูุจูุชูุง. <br><br>  <a href="" rel="nofollow">ุฅุถุงูุฉ</a> ูุฆุฉ ุฃุฎุฑู ูุณุงุนุฏ <a href="" rel="nofollow">ParsedCommand</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.AllArgsConstructor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.Getter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.NoArgsConstructor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.Setter; <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParsedCommand</span></span></span><span class="hljs-class"> </span></span>{ Command command = Command.NONE; String text=<span class="hljs-string"><span class="hljs-string">""</span></span>; }</code> </pre> <br>  ุงูุบุฑุถ ุงูุฑุฆูุณู ููู ูู ุชุฎุฒูู ูุชูุฌุฉ ุชุญููู ุงููุต ูู ูุงุฆูุงุช ูุฐู ุงููุฆุฉ.  ุณูู ูุญุชูู ููุท ุนูู ุงููุฑูู ููุณู ููู ุงููุต ุงูุฐู ูุฃุชู ุจุนุฏ ุงููุฑูู. <br><br>  ูุณููุชุจ ูุตููุง ูููุตูุงู ุณูููู ุจุชุญููู ุงููุฑู ุฅูููุง.  ูุฆุฉ <a href="" rel="nofollow">ุงููุญูู</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javafx.util.Pair; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(Parser.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String PREFIX_FOR_COMMAND = <span class="hljs-string"><span class="hljs-string">"/"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String DELIMITER_COMMAND_BOTNAME = <span class="hljs-string"><span class="hljs-string">"@"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String botName; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String botName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.botName = botName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ParsedCommand </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParsedCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span><span class="hljs-function"> </span></span>{ String trimText = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) trimText = text.trim(); ParsedCommand result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ParsedCommand(Command.NONE, trimText); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">""</span></span>.equals(trimText)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; Pair&lt;String, String&gt; commandAndText = getDelimitedCommandFromText(trimText); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCommand(commandAndText.getKey())) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCommandForMe(commandAndText.getKey())) { String commandForParse = cutCommandFromFullText(commandAndText.getKey()); Command commandFromText = getCommandFromText(commandForParse); result.setText(commandAndText.getValue()); result.setCommand(commandFromText); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { result.setCommand(Command.NOTFORME); result.setText(commandAndText.getValue()); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cutCommandFromFullText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> text.contains(DELIMITER_COMMAND_BOTNAME) ? text.substring(<span class="hljs-number"><span class="hljs-number">1</span></span>, text.indexOf(DELIMITER_COMMAND_BOTNAME)) : text.substring(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Command </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCommandFromText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span><span class="hljs-function"> </span></span>{ String upperCaseText = text.toUpperCase().trim(); Command command = Command.NONE; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { command = Command.valueOf(upperCaseText); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IllegalArgumentException e) { log.debug(<span class="hljs-string"><span class="hljs-string">"Can't parse command: "</span></span> + text); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> command; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Pair&lt;String, String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDelimitedCommandFromText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String trimText)</span></span></span><span class="hljs-function"> </span></span>{ Pair&lt;String, String&gt; commandText; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trimText.contains(<span class="hljs-string"><span class="hljs-string">" "</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indexOfSpace = trimText.indexOf(<span class="hljs-string"><span class="hljs-string">" "</span></span>); commandText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pair&lt;&gt;(trimText.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, indexOfSpace), trimText.substring(indexOfSpace + <span class="hljs-number"><span class="hljs-number">1</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> commandText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Pair&lt;&gt;(trimText, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commandText; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isCommandForMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String command)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command.contains(DELIMITER_COMMAND_BOTNAME)) { String botNameForEqual = command.substring(command.indexOf(DELIMITER_COMMAND_BOTNAME) + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> botName.equals(botNameForEqual); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> text.startsWith(PREFIX_FOR_COMMAND); } }</code> </pre> <br>  ุจุงุฎุชุตุงุฑ.  ุนูุฏ ุชููุฆุฉ ุงููุญูู ุงููุบูู ุ ูุฌุจ ุฃู ููุฑุฑ ุงุณู ุฑูุจูุชูุง ูู ุงูููุดุฆ ุญุชู ูุชููู ุงููุญูู ุงููุบูู ูู ุงูุชูููุฒ ุจูู ุฃูุงูุฑู ูุจูู ุงูุบุฑุจุงุก. <br><br>  ุญุณููุง ุ ูุญู ูุณูู ุงูุทุฑููุฉ ุงูุนุงูุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ParsedCommand </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getParsedCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span></span></code> </pre> <br>  ุงูุฐู ูููู ุจุชูุฑูุฑ ูุต ุงูุฑุณุงูุฉ ุฅููู ูู ุงููุณูุทุงุช ุ ููุฌุจ ุนููู ุฅุนุงุฏุฉ ุฃูุฑ ุฅูููุง ููุต ุงูุฑุณุงูุฉ ุงูุฐู ูุฃุชู ุจุนุฏ ุงูุฃูุฑ. <br><br>  ููููู ุฃู ุชุฑู ููู ูุนูู ุงููุญูู ุงููุบูู ูู <a href="" rel="nofollow">ูุตู ุงูุงุฎุชุจุงุฑ</a> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฐุจุงุจ ุจุดูู ูููุตู ุ ุดุฑุญุงุช ุจุดูู ูููุตู </h3><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุนููู ุงูุฑูุจูุช ูุฏููุง ูุชููู ุงูุฑุณุงุฆู ุจุดูู ูููุตู ููุนุงูุฌุฉ ูุฅุฑุณุงู ุงูุฑุฏูุฏ.  ุจุนุฏ ุณูุณูุฉ ูู ุงูุชุฌุฑุจุฉ ูุงูุฎุทุฃ ุ ุฌุฆุช ุฅูู ูุฐุง ุงูููุทู ููุชุทุจูู. <br>  ุณุชุนูู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ <a href="" rel="nofollow">Bot</a> ูู ุงูุฎูุท ุงูุฑุฆูุณู ููุชุทุจูู ูุณุชููู ูุดุบููุฉ ููุท ุจุญูููุฉ ุฃู ุฌููุน ุงูุฑุณุงุฆู ุงููุณุชููุฉ ุณูุชู ูุถุนูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฎุงุตุฉ ูุณุชููู ุฃูุถูุง ุญุงููุฉ ููุฑุณุงุฆู ุงูุชู ูุฎุทุท ูุฅุฑุณุงููุง ุฅูู ุงููุณุชุฎุฏู ุฑุฏูุง ุนูู ุฐูู. <br><br>  ุงูุชุบููุฑุงุช ูู ูุฐุง ุงููุตู ุจุณูุทุฉ ููุบุงูุฉ.  ุฃุถููุง ูุงุฆูุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Queue&lt;Object&gt; sendQueue = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentLinkedQueue&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Queue&lt;Object&gt; receiveQueue = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentLinkedQueue&lt;&gt;();</code> </pre><br>  ูุฅุนุงุฏุฉ ูุชุงุจุฉ ุฑูุฒ ุงููุธููุฉ <b>ุงูุนุงูุฉ ุจุดูู ุฎุงุทุฆ onUpdateReceived (ุชุญุฏูุซ ุงูุชุญุฏูุซ)</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUpdateReceived</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ log.debug(<span class="hljs-string"><span class="hljs-string">"Receive new Update. updateID: "</span></span> + update.getUpdateId()); receiveQueue.add(update); }</code> </pre> <br>  ููุงุฐุง ูุฐุง  ูุฑุฉ ุฃุฎุฑู ุญุงููุช ุฎูุงุฑุงุช ูุฎุชููุฉ.  ูุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู multithreading ุชุนูู ูุน ุงูุจูุงูุงุช ุงููุดุชุฑูุฉ.  ูุงูุฃูู ูู ุฐูู ููู ุฃููู ุฃุญุจุจุช ููู ูุนุงูุฌ ุชูููุฐ ุทูุงุจูุฑ ูุชุนุฏุฏุฉ ุงูุฎููุท <b>ConcurrentLinkedQueue &lt;&gt; ()</b> ูุฐุง. <br>  ูููุง ุชุฑู ุ ูู ููุชุง ุงูุทุงุจูุฑุชูู ุ ุณูุฎุฒู ุฃููุงุน ุจูุงูุงุช ุงููุงุฆูุงุช.  ูุฐุง ูู ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ ุฃุฎุฑู ูููุณุชูุจู.  ูุจุงูุชุงูู ุ ูุญู ูุณูุง ููุชุตููู ุจุฃููุงุน ุงูุฑุณุงุฆู ุงููุณุชููุฉ.  ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงููุงุฑุฏุฉ ุ ูููููุง ุฅุถุงูุฉ ููุณ ููุท ูุงุฆูุงุช ูู ููุน ุงูุชุญุฏูุซ ุ ูููู ุฃูุถูุง ุจุนุถ ุงููุงุฆูุงุช ุงูุฃุฎุฑู ุงูุชู ูุญุชุงุฌูุง. <br><br>  ููุณ ุงูุดูุก ูุน ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุฅุฑุณุงู.  ูุธุฑูุง ูุฃูู ูููููุง ุฅุฑุณุงู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฑุณุงุฆู ูููุณ ููุง ุฃุตู ูุดุชุฑู - ูุณุชุฎุฏู ุฃูุถูุง ููุน ุจูุงูุงุช ุดุงุฆุน - ูุงุฆู. <br>  ุฅุฐุง ููุช ุจุชุดุบูู ุจุฑูุงูุฌ ุงูุฑูุจูุช ูู ูุฐุง ุงููููุฐุฌ ุ ูุณุชุนูู ุ ูููู ูู ุชูุนู ุฃู ุดูุก.  ุณูููู ุจุชุณุฌูู ุฌููุน ุงูุฑุณุงุฆู ุงููุณุชููุฉ ูู ุงูุณุฌู ููุถุนูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br>  ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ููุน ูู <b>ุณูุงุณู</b> ุงูุฑุณุงุฆู ุงูุชู ุชูุชู ุจุฃุฎุฐ ุงูุฑุณุงุฆู ุงููุณุชููุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุชูููุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ุนูููุง ููุถุน ูุชุงุฆุฌ ุนูููุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ <b>sendQueue</b> . <br><br>  ูููู ุจุฅูุดุงุก ุญุฒูุฉ ูููุตูุฉ: <a href="https://github.com/dp-ua/TelegramBotBase/tree/Part2-Handlers/src/main/java/com/example/telegrambot/service" rel="nofollow">ุฎุฏูุฉ</a> ููููุง ุณูููู ูุฏููุง ูุฆุชุงู ููุท: <br><br>  <b>MessageReciever</b> - ุชููู ุฑุณุงูุฉ ูุนุงูุฌ <br>  <b>MessageSender</b> ูู ูุนุงูุฌ ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู ูุฅุฑุณุงููุง ุฅูู ุงููุณุชุฎุฏู. <br><br>  ุณูู ูุนุชุจุฑ ุนูููู ุฃูู ููููุงู ุ ูููู ูู ุงูููุช ุงูุญุงูู ุ ุณูุตู ุงุณุชุฎุฏุงููู ูู ุชุทุจูููุง ูุฆุฉ ุงูุงูุทูุงู <br><br>  ุจุนุฏ ุงุชุตุงู bot ุงูุฎุงุต ุจูุง ุ ูุจุฏุฃ ูุนุงูุฌุงุชูุง ูู ุฎููุท ูููุตูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">MessageReciever messageReciever = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageReciever(test_habr_bot); MessageSender messageSender = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MessageSender(test_habr_bot); test_habr_bot.botConnect(); Thread receiver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(messageReciever); receiver.setDaemon(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); receiver.setName(<span class="hljs-string"><span class="hljs-string">"MsgReciever"</span></span>); receiver.setPriority(PRIORITY_FOR_RECEIVER); receiver.start(); Thread sender = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(messageSender); sender.setDaemon(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); sender.setName(<span class="hljs-string"><span class="hljs-string">"MsgSender"</span></span>); sender.setPriority(PRIORITY_FOR_SENDER); sender.start();</code> </pre><br>  ููู ูู ุงูููุงุถูุน ุ ูุญุฏุฏ ูุถุน ุงูุฎูู.  ูุนุฏ ุฐูู ุถุฑูุฑููุง ุญุชู ุชุนูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุทุงููุง ูุงู ูุคุดุฑ ุงูุชุฑุงุจุท ุงูุฑุฆูุณู ููุฏ ุงูุชุดุบูู ูุฅููุงุก ุนูููุง ุจูุฌุฑุฏ ุชููููุง ุนู ุงูุนูู. <br><br>  ูุง ููุฏ ุงูุชุนุงูู ูุน ูุนุงูุฌ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุฃููุงู - ุฏุนูุง ููุธุฑ ุฅูู ุชุดุบูู ูุฆุฉ <a href="" rel="nofollow">MessageSender</a> . <br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุง ูููู ุฃู ููุนูู ููุง ููุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฐุง ูู ูุฑุงุซุฉ ูุงุฌูุฉ multithreading: <br>  <b>ุชููุฐ runnable</b> <br>  ูุชูููุฐ ูุธููุฉ <b>ุงููุฏู</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre> <br>  ูุญู ููุง ูุจุฏุฃ ุงูุญููุฉ ุงููุงููุงุฆูุฉ ุ ุงูุชู ูุดุบููุฉ ููุท ุจุญูููุฉ ุฃููุง ุชุชุญูู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฅุฑุณุงู ูุชุฏุนู ุฃูุฑ ุงูุฅุฑุณุงู <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object object)</span></span></span></span></code> </pre> <br>  ุฅุฐุง ุธูุฑ ุดูุก ูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br></li><li style=";text-align:right;direction:rtl">  ูู ูููุดุฆ ุงููุตู ุ ูููู ุจุชูุฑูุฑ ูุงุฆู ูุฆุฉ ุจูุช ุ ูุฃู  ููู ุณูู ูุฃุฎุฐ ุฃุดูุงุก ูุฅุฑุณุงู ุงูุฑุณุงุฆู ููุนูุง ุณูุฑุณู ููู. </li><li style=";text-align:right;direction:rtl">  ุชุญุฏุฏ ุทุฑููุฉ ุงูุฅุฑุณุงู ููุน ุงูุฑุณุงูุฉ ุงููุฑุงุฏ ุฅุฑุณุงููุง ูุชุทุจู ุงูุฃูุฑ ุงูููุงุณุจ ุนูููุง. </li></ul><br>  ุญุณููุง ุ ุฏุนูุง ุงูุขู <a href="" rel="nofollow">ููุธุฑ ุฅูู</a> ุนูู ูุฆุฉ <a href="" rel="nofollow">MessageReciever</a> <br><br>  ูุฌุจ ุฃู ูููู ุ ูุซู MessageSender ุ ูุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ูู ุงููููุดุฆ ูุชููู ูุงุฆููุง ูู ุงููุฆุฉ Bot ุ ุญูุซ ุณูุชููู ุงูุฑุณุงุฆู ุงููุณุชููุฉ ูู ุญููุฉ ูุง ููุงุฆูุฉ ุ ููุนุงูุฌูุง ููุถุนู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฅุฑุณุงู ูุชุงุฆุฌ ุนููู. <br><br>  ููุง ูุณุชุฎุฏู ูุญูู ุงูุฃูุฑ ุงูุฐู ุชู ุฅูุดุงุคู ูุณุจููุง.  ุซู ูุถูู ุงููุฏุฑุฉ ุนูู ุงุณุชุฎุฏุงู ุฃููุงุน ูุฎุชููุฉ ูู ุงููุนุงูุฌุงุช ููุฑููุง ูุจุนุถูู ุณูููู ุจุนูู ุฎููุท ูุชุนุฏุฏุฉ. <br><br>  ุฏูุฑุฉ ุงูุนูู ุจุณูุทุฉ ุฌุฏุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"[STARTED] MsgReciever. Bot class: "</span></span> + bot); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object object = bot.receiveQueue.poll(); object != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; object = bot.receiveQueue.poll()) { log.debug(<span class="hljs-string"><span class="hljs-string">"New object for analyze in queue "</span></span> + object.toString()); analyze(object); } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(WAIT_FOR_NEW_MESSAGE_DELAY); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException e) { log.error(<span class="hljs-string"><span class="hljs-string">"Catch interrupt. Exit"</span></span>, e); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } }</code> </pre> <br>  ุชุญูู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ุฅุฐุง ูุงู ููุงู ุดูุก ูุง ุ ููู ุจุชุดุบูู ุงููุญูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">analyze</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object object)</span></span></span></span></code> </pre> <br>  ุฅุฐุง ูู ููู ููุงู ุดูุก ุ ูุญู ูู ุงูุชุธุงุฑ. <br><br>  ูุชุญูู ุงููุญูู ูู ููุน ุงููุงุฆู.  ุฅุฐุง ูุงู ูุนุฑู ููููุฉ ุงูุนูู ูุนู ุ ูุจุฏุฃ ุงููุญูู ุงูุชุงูู.  ุฅุฐุง ููุช ูุง ุชุณุชุทูุน - ููุณู :) <br><br>  ููุงุฐุง ูุฐุง  ูุฑุฉ ุฃุฎุฑู ุ ูุฐู ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ ูููุณุชูุจู ูุขูู ุฃู ุฃูุดู ุนููุง ูู ุงูุฃุฌุฒุงุก ุงูุชุงููุฉ ูู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช.  ุณูุณูุญ ููุง ูุฐุง ุงูุชุทุจูู ุจุชุดููู ููุงููุง ุงูุฎุงุตุฉ ุจุงูุจูุช ุ ูุฅูุดุงุก ููุงุฆู ุจุฑูุฏูุฉ ุ ูููุงู ููููุฉ.  ููุฐุง ุงูุบุฑุถ ุ ูุฌุจ ุฃู ูููู ุฌูุงุฒ ุงูุงุณุชูุจุงู ูุงุฏุฑูุง ุนูู ูุนุงูุฌุฉ ููุณ ููุท ูุงุฆูุงุช ูู ุงูููุน Update ุ ูููู ุฃูุถูุง ุดูุก ุฎุงุต ุจูุง.  ูููู ุงููุฒูุฏ ุนู ุฐูู ูู ููุช ูุงุญู :) <br><br>  ุฏุนููุง ููุธุฑ ูู ูุญูู ูููุน ุงูุชุญุฏูุซ ุจูุฒูุฏ ูู ุงูุชูุงุตูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">analyzeForUpdateType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Update update)</span></span></span><span class="hljs-function"> </span></span>{ Long chatId = update.getMessage().getChatId(); String inputText = update.getMessage().getText(); ParsedCommand parsedCommand = parser.getParsedCommand(inputText); AbstractHandler handlerForCommand = getHandlerForCommand(parsedCommand.getCommand()); String operationResult = handlerForCommand.operate(chatId.toString(), parsedCommand, update); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-string"><span class="hljs-string">""</span></span>.equals(operationResult)) { SendMessage message = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SendMessage(); message.setChatId(chatId); message.setText(operationResult); bot.sendQueue.add(message); } }</code> </pre> <br>  ูุญุฏุฏ ูุนุฑู ุงูุฏุฑุฏุดุฉ.  ุงูุญุตูู ุนูู ูุต ุงูุฑุณุงูุฉ.  ุจุงุณุชุฎุฏุงู ุงููุญูู ุงููุบูู ุ ูุฅูู ูุญุฏุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุฃูุฑ ููุญุฏุฏ ุงููุนุงูุฌ ุงูุฐู ูุฌุจ ูุนุงูุฌุฉ ูุฐุง ุงูุฃูุฑ.  ูุจุฏุฃ ูู ูุนุงูุฌุฉ ุงูุฃูุฑ ุ ูุฅุฐุง ูุงูุช ูุนุงูุฌุฉ ุงูุฃูุฑ ุชูุฑุฌุน ุจุนุถ ุงููุตูุต ุบูุฑ ุงููุงุฑุบุฉ - ููู ุชูุดูู ุฑุณุงูุฉ ูุฅุฑุณุงููุง ุฅูู ุงููุณุชุฎุฏู ูุชุถุนูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br>  ุซู ูุฌุจ ุฃู ูููู ูุฏูู ุณุคุงู: "ุฃู ููุน ูู ูุนุงูุฌุ".  ูู ููู ููุงู ุญุฏูุซ ุนูู ูู ูุจู ุ ููู ูุฑุฏ ุฐูุฑู ูู ุงูููุฏ.  ูู ุงูุญู.  ุงูุขู ุณูู ูููู ุจุชุญููู ูุฐู ุงููุธููุฉ. <br><br>  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ุญุฒูุฉ ูููุตูุฉ ุ ูุงูุชู ุณุชููู ุจุชุฎุฒูู ุฌููุน ูุนุงูุฌุงุชูุง.  ูุณูููุง <a href="https://github.com/dp-ua/TelegramBotBase/tree/Part2-Handlers/src/main/java/com/example/telegrambot/handler" rel="nofollow">ูุนุงูุฌ</a> <br>  ุฏุนููุง ุฅูุดุงุก ูุฆุฉ ูุฌุฑุฏุฉ <a href="" rel="nofollow">AbstractHandler</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.bot.Bot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.command.ParsedCommand; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.objects.Update; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractHandler</span></span></span><span class="hljs-class"> </span></span>{ Bot bot; AbstractHandler(Bot bot) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bot = bot; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String chatId, ParsedCommand parsedCommand, Update update)</span></span></span></span>; }</code> </pre> <br>  ุณูููู ูุฏูู ูููุดุฆ ุฃุณุงุณู ููุฑ ููู ูุน ูุงุฆู Bot ุงูุฐู ุณูุญุชุงุฌ ุฅูู ุงูุชูุงุนู ูุนู.  ูุชู ุงูุฅุนูุงู ุนู ูุธููุฉ ูุฌุฑุฏุฉ <b>ููุนูู</b> ุ ูุงูุชู ุณูุชุนูู ุนูููุง ุชุณุฌูููุง ูู ูุฑุซุฉ ูุฆุชูุง. <br><br>  ูุณูููุฐ ุนูู ุงูููุฑ ุฃุจุณุท ูุนุงูุฌ ูู ููุนู ุฃู ุดูุก ูุณูุณุชุฎุฏูู ุนูุฏูุง ูุง ูุณุชุทูุน ุฃู ูููู ููุน ุงูุฃูุฑ ุงูุฐู ุชููููุงู ูููุณ ููุงู ุงุณุชุฌุงุจุฉ ูุทููุจุฉ ูู ุงูุฑูุจูุช. <br><br>  <a href="" rel="nofollow">DefaultHandler.java</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.bot.Bot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.command.ParsedCommand; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.objects.Update; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(DefaultHandler.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DefaultHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bot bot)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(bot); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String chatId, ParsedCommand parsedCommand, Update update)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre> <br>  ููู ุณูุทุจููุง ูุฃูู ูุญุตู ุนูู ูุชุงุฆุฌ ุนูููุง - ุณูุญูู ูุงุญููุง. <br><br>  ุงูุชุงูู ูู ุงูุฎุท ูู <a href="" rel="nofollow">SystemHandler</a> <br>  ุณูุชุนุงูู ูุน ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ ุ ูุซู start ุ help ุ ูุณูู ูุทูุจ ููู ุฃูุถูุง ุชูููุฐ ุฃูุฑ id <br><br>  ุฃุณุงุณ ุฐูู ูุดุจู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.bot.Bot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.command.Command; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.command.ParsedCommand; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.methods.send.SendMessage; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.objects.Update; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SystemHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(SystemHandler.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String END_LINE = <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SystemHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bot bot)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(bot); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String chatId, ParsedCommand parsedCommand, Update update)</span></span></span><span class="hljs-function"> </span></span>{ Command command = parsedCommand.getCommand(); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (command) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> START: bot.sendQueue.add(getMessageStart(chatId)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> HELP: bot.sendQueue.add(getMessageHelp(chatId)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ID: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Your telegramID: "</span></span> + update.getMessage().getFrom().getId(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>; }</code> </pre> <br>  ููููู ุฃู ุชุฑู ููู ุชุชุดูู ุงูุงุณุชุฌุงุจุฉ ูุฃูุฑ start and help ูู ุงูููุฏ :) <br>  ูููู ุจุชูููู ุฑุณุงุฆู ูุตูุฉ ููุถุนูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ููุฅุฑุณุงู.  ูู ูุฐุง ุ ูุชููู ุนูู ุงููุนุงูุฌ.  ูู ูููู ุณูู ุชุฑุณู ูุฐู ุงูุฑุณุงุฆู - ููุงู ุงูู ูุง ููุชู ุนูู ุงูุฅุทูุงู. <br>  ูุชุฐูุฑ ุฃููู ุฐูุฑุช ููููุงู ุฃุนูุงู ุฃูู ูุชูุฌุฉ ูููุนุงูุฌ ุ ูุฅูู ูุนุฑุถ ุจุนุถ ุงูุจูุงูุงุช ุงููุตูุฉ.  ูุฅุฐุง ูุงู ูุฐุง ุงูุฎุท ุบูุฑ ูุงุฑุบ ุ ููุฌุจ ุฃู ูุฑุณู ูุฐุง ุงููุต ุฅูู ุงููุณุชุฎุฏู.  ูุฐู ุจุงูุถุจุท ูู ุงููุธููุฉ ุงูุชู ุงุณุชุฎุฏููุงูุง ุนูุฏ ุงูุนูู ุนูู ุงูุฃูุฑ ID: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ID: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Your telegramID: "</span></span> + update.getMessage().getFrom().getId();</code> </pre> <br>  ุณูููู ุงููุนุงูุฌ ุจุฅุฑุฌุงุน ุงููุต ุจูุนุฑู ุงููุณุชุฎุฏู ุฅูู ุงูุดุฎุต ุงูุฐู ูุงู ุจุงูุงุชุตุงู ุจู ูููุงู ุจุงููุนู ุณูุชู ุฅูุดุงุก ุฑุณุงูุฉ ููุฅุฑุณุงู ุ ูุงูุชู ุณุชูุชูู ุจุนุฏ ุฐูู ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br>  ููู ุจุฏุงูุฉ ุงูููุงู ุ ุฐูุฑุช ุฃููุง ูููุฐ ูุฐุง ุงูุฎูุงุฑ ููุนุงูุฌุฉ ุฑุณุงูุฉ ูู ูุณุชุฎุฏู ูุญุชุงุฌ ุฅูู ููุช ููุนูู.  ูุจุญูุซ ูุง ุชุชุฏุงุฎู ูุน ูุนุงูุฌุงุชูุง ุ ุณูููู ุจุชุฎุตูุตูุง ูู ุฌุฏูู ูููุตู ููุฏุน ูุดุงุทูุง ุงูุชุฌุงุฑู ุจุฏูู ุชุดุชูุช ุงูุจุงูู. <br>  ุนูู ูุฐุง ุงููุญู ููุถูุน "ุงููุฒู ุงูุซููู" ุ ุฎุทุฑุช ูู ุฃูุฑ ุงูุฅุฎุทุงุฑ.  ูุจุฏุฃ ุนูููุง ูู ูุฐุง. <br><br>  ุนู ุทุฑูู ุฅุฑุณุงู bot ุฃูุฑ ูู ุงููููุฐุฌ: <br>  <b>/ ุฅุฎุทุงุฑ 300</b> <br><br>  ูุฌุจ ุฃู ูุนููู ุงูุฑูุจูุช ุจุฃู ุงููุฑูู ูุฏ ููู ูุจุนุฏ 300 ุซุงููุฉ ุณูู ูุฑุณู ูู ุจุนุถ ุงูุฅุดุนุงุฑุงุช ุจุฃู 300 ุซุงููุฉ ูุฏ ูุฑุช.  ูุฏ ูููู ููุฐุง ุงููุฑูู ุญุชู ุงุณุชุฎุฏุงู ุนููู :) <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุชุถุน ุงููุงุฑ ุนูู ุงูุฒูุงุจูุฉ ูุชุญุชุงุฌ ุฅูู ุฅุฒุงูุชูุง ุจุนุฏ 5 ุฏูุงุฆู.  ุณูููู ุงูุฑูุจูุช ุจุฐูู ุจุดูู ูุซุงูู ูุณูุฑุณู ุฅุฎุทุงุฑูุง ุฅููู ูู ุงูุฏุฑุฏุดุฉ ุจุฃู ุงูููุช ูุฏ ุงูุชูู. <br><br>  ุฃู ุฎุฐ ูููุฉ ุฃูุซุฑ ุฌุฏูุฉ.  ุชุฐูุจ ุฅูู ุงุฌุชูุงุน ููู ูุฃูุช ุชุนูู ุฃูู ุนูุฏ ุงูุชูุงุตู ูุน ุดุฎุต ูุง ุ ุณุชุญุชุงุฌ ุฅูู ููุงุทุนุฉ ุงููุญุงุฏุซุฉ.  ููุฐุง ุ ูุทูุจูู ุนุงุฏุฉ ูู ุงูุฃุตุฏูุงุก ุฅูุง ุงูุงุชุตุงู ุฃู ูุชุงุจุฉ ุฑุณุงูุฉ ุ ูุงูุชู ุณุชููู ุฏุงูุนูุง ูุนุฏู ุตุฑู ุงูุงูุชุจุงู ุนู ุงููุญุงุฏุซุฉ ููุชุฑุฉ ุทูููุฉ ูุงุชุฎุงุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช.  ูููู ููุงุฐุง ุชุฒุนุฌ ุงูุฃุตุฏูุงุก ุนูุฏูุง ูููู ูุฏูู ุฑูุจูุชุ  ุจุนุฏ ุฃู ุชุทูุจ ููู ูููุฉ ูุณุจููุง ูุน ุงูุฅุดุงุฑุฉ ุฅูู ุงูููุช ุ ุณุชุชููู ุงูุฅุดุนุงุฑ ุงููุงุฒู ูู ุงูุจุฑููุงุช.  ูููู ูุฐุง ูู ูู ูููุงุช.  ุชู ุงุฎุชุฑุงุน ุงููููุฉ ููุฐุง ุงูุฃูุฑ ููุท ูุชูุถูุญ ููููุฉ ุชุฎุตูุต ุดูุก ูููู ุฃู ูุณุชุบุฑู ุนููู ูุชุฑุฉ ุทูููุฉ ุฌุฏูุง ูู ุฏูู ูููุตู. <br><br>  ูุฐูู ุ <a href="" rel="nofollow">NotifyHandler</a> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.ability.Notify; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.bot.Bot; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.example.telegrambot.command.ParsedCommand; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.log4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.telegram.telegrambots.api.objects.Update; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotifyHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = Logger.getLogger(NotifyHandler.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MILLISEC_IN_SEC = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String WRONG_INPUT_MESSAGE = <span class="hljs-string"><span class="hljs-string">"Wrong input. Time must be specified as an integer greater than 0"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NotifyHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bot bot)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(bot); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String chatId, ParsedCommand parsedCommand, Update update)</span></span></span><span class="hljs-function"> </span></span>{ String text = parsedCommand.getText(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">""</span></span>.equals(text)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"You must specify the delay time. Like this:\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"/notify 30"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> timeInSec; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { timeInSec = Long.parseLong(text.trim()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NumberFormatException e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WRONG_INPUT_MESSAGE; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timeInSec &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Thread thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Notify(bot, chatId, timeInSec * MILLISEC_IN_SEC)); thread.start(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WRONG_INPUT_MESSAGE; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre> <br>  ูุชุญูู ููุง ุฅุฐุง ูุงู ูุฏ ุชู ุฅุนุทุงุก ููุช ุงูุชุฃุฎูุฑ ููุง ูู ุงููุต.  ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅููุง ููุณู.  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูุจุฏุฃ ุณูุณูุฉ ุฌุฏูุฏุฉ ุ ุญูุซ ูููู ุจุชูุฑูุฑ ุงูููุฏูุฉ ูู ุชุนูููุงุชูุง.  ุณุชุชู ูุนุงูุฌุฉ ูุฐู ุงููููุฉ ุจูุงุณุทุฉ ูุตู <a href="" rel="nofollow">ุฅุนูุงู</a> ูููุตู. <br>  ูุธููุฉ ุจุณูุทุฉ ููุบุงูุฉ.  ููุงู ุนุฏุฏ ุงูุซูุงูู ุงููุดุงุฑ ุฅููู.  ูููู ูู ุนูููุฉ ูููู ุ ูุณุชุทูุน ุงูุฑูุจูุช ุงูุฎุงุต ุจู ุงุณุชูุงู ุฃู ุฑุณุงุฆู ุฃุฎุฑู ูุงูุชูุงุตู ูุนู ูุฅุทูุงู ุฅุนูุงูุงุช ุฅุถุงููุฉ.  ููู ูุฐุง ูุนูู ุจุดูู ูููุตู ุนู ุจุนุถูุง ุงูุจุนุถ. <br><br>  ููุฅููุงู ูุฐู ุงููุฌููุนุฉ ุจุฑูุชูุง ููุทููุงู ูุน ูุนุงูุฌุงุช ุงูุงุชุตุงู ุ ุฏุนูุง ูุนูุฏ ุฅูู ุตู <a href="" rel="nofollow">MessageReciever ุงูุฎุงุต</a> ุจูุง ููุฑู ููู ูููู ุงููุนุงูุฌ ุงูุฐู ูุญุชุงุฌ ุฅููู ูููู <a href="" rel="nofollow">ูุฏูุฑูู</a> . <br>  ูุชู ุฅุฑุฌุงุน ุงููุนุงูุฌ ุงูุถุฑูุฑู ุฅูููุง ุจูุงุณุทุฉ ุงูุฃูุฑ <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> AbstractHandler </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHandlerForCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Command command)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { log.warn(<span class="hljs-string"><span class="hljs-string">"Null command accepted. This is not good scenario."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultHandler(bot); } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (command) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> START: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> HELP: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ID: SystemHandler systemHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemHandler(bot); log.info(<span class="hljs-string"><span class="hljs-string">"Handler for command["</span></span> + command.toString() + <span class="hljs-string"><span class="hljs-string">"] is: "</span></span> + systemHandler); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> systemHandler; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> NOTIFY: NotifyHandler notifyHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotifyHandler(bot); log.info(<span class="hljs-string"><span class="hljs-string">"Handler for command["</span></span> + command.toString() + <span class="hljs-string"><span class="hljs-string">"] is: "</span></span> + notifyHandler); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> notifyHandler; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: log.info(<span class="hljs-string"><span class="hljs-string">"Handler for command["</span></span> + command.toString() + <span class="hljs-string"><span class="hljs-string">"] not Set. Return DefaultHandler"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultHandler(bot); } }</code> </pre> <br>  ุงูุขู ุ ุฅุฐุง ููุช ุชุฑูุฏ ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃูุงูุฑ ุ ูุณุชุญุชุงุฌ ุฅูู ุงูููุงู ุจูุง ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ูุฆุฉ ุงูุฃูุงูุฑ ุ ุฃุถู ุฌููุฉ ุงูุฃูุฑ. </li><li style=";text-align:right;direction:rtl">  ูู <a href="" rel="nofollow">ุฌูุงุฒ ุงูุงุณุชูุจุงู ุ</a> ูู ูุธููุฉ <b>getHandlerForCommand ุ</b> ุญุฏุฏ ูู ุณูููู ุงููุณุคูู ุนู ูุนุงูุฌุฉ ูุฐุง ุงูุฃูุฑ. </li><li style=";text-align:right;direction:rtl">  ูุจุงููุนู ูุชุงุจุฉ ูุฐุง ุงููุนุงูุฌ. </li></ol><br>  ุณุฃููู ููุฏููุง ุฃูู ูููู ุชุจุณูุท ุนูููุฉ ุฅุถุงูุฉ ูุฑู ุฌุฏูุฏุฉ.  ูููู ุชุณุฌูู ุงููุนุงูุฌุงุช ุงููุณุคููุฉ ุนูู ุงูููุฑ ูู ุงููุตู ูุน ูุงุฆูุฉ ุจุงูุฃูุงูุฑ.  ููู ุฃุฎุดู ุฃู ุงูููุฏ ููุณ ูู ุงูุณูู ูููู.  ุงููุต ุทููู ุฌุฏุง  ููููู ูุง ุฃุณุชุทูุน ุถุฑุจู ุฅูู ูุทุน.  ูุชู ูุตู ุซูุงุซ ูุธุงุฆู ุจูุช ุฃุณุงุณูุฉ ููุง ุ ูุงูุชู ุชุนูู ูุนูุง ููุท ูููุณ ูู ุงูุตูุงุจ ุงูุชุญุฏุซ ุนููุง ุจุดูู ูุฑุฏู. <br><br>  ูุง ุงูุฐู ุณูุชุญุฏุซ ุนูู ูู ุงูุฃุฌุฒุงุก ุงูุชุงููุฉุ <br><br>  ูุญู ุจุญุงุฌุฉ ุฅูู ููู ููููุฉ ุชุดููู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฑุณุงุฆู.  ููููุฉ ุงูุนูู ูุน ููุญุฉ ุงูููุงุชูุญ ูุงูุฃุฒุฑุงุฑ.  ููููุฉ ุชุนุฏูู ูุดุงุฑูุงุชู ุงููุฏููุฉ.  ููููุฉ ุงูุนูู ูุน ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช.  ููููุฉ ุฅุนุทุงุก ุงูููุงู ููุจูุช ูุฃุฏุงุก ุจุนุถ ุงูุฅุฌุฑุงุกุงุช.  ููููุฉ ุฅูุดุงุก ุฑุณุงูุฉ ุชูุงุนููุฉ ูุน ุงูุฑูุจูุช ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ุฌููุน ุงูุฃุฌุฒุงุก ุงูุฃุฎุฑู ูุชุฑูู ูู ููุดุงุทู. <br>  ูู ุงูุชุนูููุงุช ุ ุฃุชุทูุน ุฅูู ุชุนูููุงุชู ูุชูุฌููุงุชู ุ ูุงูุชู ุณููุธุฑ ุฅูููุง ูุฃููููุฉ. <br><br>  ูุง ุชุชุฑุฏุฏ ูู ุทุฑุญ ุงูุฃุณุฆูุฉ.  ุฅุฐุง ูู ุชุชู ุงูุฅุดุงุฑุฉ ุฅูู ุดูุก ูุง ูู ุงูููุงูุฉ ุฃู ูู ูุฑุญูุฉ ูุง ุ ูููุณ ูู ุงููุงุถุญ - ุงูุชุจ ูู ุนู ุฐูู.  ุณุฃููู ุจุงูุชุฃููุฏ ุจุชุตุญูุญ ุฃู ุชุนุฏูู ุฃู ุชูุถูุญ ุงููุถุงูุง ุงููุซูุฑุฉ ููุฌุฏู. <br><br>  ุจุฑูุงูุฌ ูู ุงูุณุฑูุฑ ููุฏ ุชุฃุชูู ุงูููุฉ ูุงูุฑูุฒ ุงูุฌููู ูุนู :) <br><br>  py.sy. <br><br>  ูุนูู ุงูุฑูุจูุช ุงูููุชูุจ ูู ูุฐุง ุงูุฌุฒุก ูู ุงูููุงูุฉ.  ููููู ุนุฐุงุจู ููุง: <a href="http://t.me/test_habr_bot" rel="nofollow">@ test_habr_bot</a> <br>  ููููู ุฃูุถูุง ุนุฐุงุจ <a href="http://t.me/EventCheckPlanner_Bot" rel="nofollow">ูุฎุทุทู</a> : <a href="http://t.me/EventCheckPlanner_Bot" rel="nofollow">EventCheckPlanner_Bot</a> <br>  <a href="http://t.me/FilmFanAmateurBot" rel="nofollow">ููุฑูุญุฉ ูููู Cheeky</a> : <a href="http://t.me/FilmFanAmateurBot" rel="nofollow">FilmFanAmateurBot</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar481354/">https://habr.com/ru/post/ar481354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar481344/index.html">ุฎุทุท ูุฑูู ููุตุฉ IntelliJ ูุนุงู 2020</a></li>
<li><a href="../ar481346/index.html">5 ุชุบููุฑุงุช ุฑุฆูุณูุฉ ูู ุตูุงุนุฉ ุงูุณูุงุฑุงุช</a></li>
<li><a href="../ar481348/index.html">ุฏููู ูุดุท Pentest. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar481350/index.html">ุงูุฐู ูุนูู ูู ูุงุนุฏุฉ ุจููุณุชุณู</a></li>
<li><a href="../ar481352/index.html">DBA: ูุณุญ ุณุฌูุงุช ุงููุณุฎ ูู ุฌุฏูู ุจุฏูู PK</a></li>
<li><a href="../ar481356/index.html">ุดูุฑุง ุ 2019</a></li>
<li><a href="../ar481358/index.html">C ++ ุฑูุณูุง: ููู ูุงู ุงูุญุงู</a></li>
<li><a href="../ar481360/index.html">ูุชุงุฆุฌ ุงูุฃุณุจูุน: ูุงูู Rambler ู Twitch ุนูู ุฅุฏุฎุงู ุงูุนูุงูุฉ ุงูุฅููุชุฑูููุฉ ูู ุงูุงุชุญุงุฏ ุงูุฑูุณู ุ ูุณูููู Facebook ุจุฅูุดุงุก ูุธุงู ุงูุชุดุบูู ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar481362/index.html">ุดูุงุฏุฉ SSL ูุชุทุจูู Docker ุนูู ุงูููุจ</a></li>
<li><a href="../ar481364/index.html">ุงูููุฒู ุงูุญุณุงุณ ูู ุงุณุชุจุฏุงู ุงูููุงุฒู ุงูุฐููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>