<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСжЁЯП╗ ЁЯЪй ЁЯРп LTSP рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Kubernetes рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ-рддреИрдпрд╛рд░ рд╕рд░реНрд╡рд░ рдлрд╝рд╛рд░реНрдо рдмрдирд╛рдПрдВ ЁЯЦКя╕П ЁЯСиЁЯП╝тАНЁЯПн ЁЯСКЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ рдПрдХ рд╢рд╛рдВрдд рддрдХрдиреАрдХ рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдореИрдВ рдЗрд╕реЗ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред рдпрд╣ рдмрдбрд╝реЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LTSP рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Kubernetes рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ-рддреИрдпрд╛рд░ рд╕рд░реНрд╡рд░ рдлрд╝рд╛рд░реНрдо рдмрдирд╛рдПрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423785/"><p><img src="https://habrastorage.org/getpro/habr/post_images/8bb/8a3/0c9/8bb8a30c990d198d478d1062f444b7a7.svg"></p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ рдПрдХ рд╢рд╛рдВрдд рддрдХрдиреАрдХ рджрд┐рдЦрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдореИрдВ рдЗрд╕реЗ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред  рдпрд╣ рдмрдбрд╝реЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЕрдм рд╕реЗ, рдЖрдкрдХреЛ рдУрдПрд╕ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рдкреИрдХреЗрдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред  рдХреНрдпреЛрдВ?  рдЖрдк рдпрд╣ рд╕рдм рдбреЙрдХрдлрд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ! </p><br><p> рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рд╕реИрдХрдбрд╝реЛрдВ рдирдП рд╕рд░реНрд╡рд░ рдЦрд░реАрдж рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рдХрд╛рдо рдХреЗ рдорд╛рд╣реМрд▓ рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд▓рдЧрднрдЧ рддреБрд░рдВрдд рдЙрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд╣реИ! </p><br><p>  Intrigued?  рдЕрдм рдХреНрд░рдо рдореЗрдВ рд╕рдм рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред </p><a name="habracut"></a><br><h1 id="rezyume">  рд╕рд╛рд░рд╛рдВрд╢ </h1><br><p>  рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╕рд░реНрдХрд┐рдЯ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╕рднреА рдиреЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП рд╣рдо рдУрдПрд╕, рдбреЙрдХрд░, рдХреНрдпреВрдмрд▓реЗрдЯ рдФрд░ рдЕрдиреНрдп рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдПрдХрд▓ рдЫрд╡рд┐ рддреИрдпрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред <br>  рдХрд░реНрдиреЗрд▓ рдХреЗ рд╕рд╛рде рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдЗрдореЗрдЬ рд╕реНрд╡рддрдГ рд╣реА рдбреЙрдХрдлреЗрд░рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ CI рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br>  рдПрдВрдб рдиреЛрдбреНрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдЗрд╕ рдЫрд╡рд┐ рд╕реЗ рдУрдПрд╕ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХреЛ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВред </p><br><p> рдиреЛрдбреНрд╕ рдУрд╡рд░рд▓реЗрдлреНрд╕ рдХреЛ рд░реВрдЯ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд░рд┐рдмреВрдЯ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдХреЛрдИ рднреА рдмрджрд▓рд╛рд╡ рдЦреЛ рдЬрд╛рдПрдЧрд╛ (рд╕рд╛рде рд╣реА рдбреЙрдХ рдХрдВрдЯреЗрдирд░ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ)ред <br>  рдПрдХ рдореБрдЦреНрдп рд╡рд┐рдиреНрдпрд╛рд╕ рд╣реИ, рдЗрд╕рдореЗрдВ рдЖрдк рдЖрд░реЛрд╣ рдмрд┐рдВрджреБрдУрдВ рдФрд░ рдХреБрдЫ рдЖрджреЗрд╢реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдиреЛрдб рд▓реЛрдб рд╣реЛрдиреЗ рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ ssh рдХреБрдВрдЬреА рдФрд░ <code>kubeadm join</code> рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдорд╛рдВрдб) </p><br><h2 id="process-podgotovki-obraza">  рдЫрд╡рд┐ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ </h2><br><p>  рд╣рдо LTSP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╣рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдмреВрдЯ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рдм рдХреБрдЫ рджреЗрддрд╛ рд╣реИред <br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, LTSP рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдПрдХ рдмрдВрдбрд▓ рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рдЬреАрд╡рди рдХреЛ рдмрд╣реБрдд рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рдЗрдирдЯреНрд░рд╛рдорд╛рдлрд╝реНрд╕ рдореЙрдбреНрдпреВрд▓, рдХрдИ рд╣реЗрд▓реНрдкрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдгрд╛рд▓реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЗрдирд┐рдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣реА рд▓реЛрдбрд┐рдВрдЧ рдХреЗ рд╢реБрд░реБрдЖрддреА рдЪрд░рдг рдореЗрдВ рд╕рд┐рд╕реНрдЯрдо рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИред </p><br><p>  <strong>рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЫрд╡рд┐ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рджрд┐рдЦрддреА рд╣реИ:</strong> </p><br><ul><li>  рдЖрдзрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдЪреЗрд░реЛрдЯ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рддреИрдирд╛рдд рдХрд░реЗрдВред </li><li>  рд╣рдо рдЖрд╡рд╢реНрдпрдХ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рддреЗ рд╣реИрдВ, рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </li><li>  <code>ltsp-build-image</code> рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ </li></ul><br><p>  рдЗрд╕рдХреЗ рдареАрдХ рдмрд╛рдж рдЖрдкрдХреЛ рдЗрд╕ рдЪреБрд░реЛрдЯ рд╕реЗ рдПрдХ рд╕рдВрдкреАрдбрд╝рд┐рдд рдЫрд╡рд┐ рдорд┐рд▓ рдЬрд╛рдПрдЧреА, рдЬрд┐рд╕рдореЗрдВ рд╕рднреА рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдЕрдВрджрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реИрдВред <br>  рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдмреВрдЯ рд╕рдордп рдкрд░ рдЗрд╕ рдЫрд╡рд┐ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдЧрд╛ рдФрд░ рдЗрд╕реЗ рд░реВрдЯрдлрд╝реНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред <br>  рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдиреЛрдб рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ, рдирдИ рдЫрд╡рд┐ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЬрд╛рдПрдЧреА рдФрд░ рд░реВрдЯрдлрд╝ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдПрдЧреАред </p><br><h2 id="servernye-komponenty">  рд╕рд░реНрд╡рд░ рдШрдЯрдХ </h2><br><p>  <strong>рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ LTSP рдХреЗ рд╕рд░реНрд╡рд░ рднрд╛рдЧ рдореЗрдВ рдХреЗрд╡рд▓ рджреЛ рдШрдЯрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:</strong> </p><br><ul><li>  <strong>TFTP рд╕рд░реНрд╡рд░</strong> - TFTP рдПрдХ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рд╣реИ, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реНрдиреЗрд▓, рдЗрдирдЯреНрд░рд╛рдореНрд░рд╛рдореНрд╕ рдФрд░ рдореБрдЦреНрдп рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - lts.confред </li><li>  <strong>NBD рд╕рд░реНрд╡рд░</strong> - NBD рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд▓рд╛рдЗрдВрдЯреНрд╕ рдХреЛ рдПрдХ рдХрдВрдкреНрд░реЗрд╕реНрдб рд░реВрдЯрдлреИрд╕ рдЗрдореЗрдЬ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рд╕рдмрд╕реЗ рддреЗрдЬрд╝ рд╡рд┐рдзрд┐ рд╣реИ, рд▓реЗрдХрд┐рди рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реИ, рддреЛ рдЗрд╕реЗ NFS рдпрд╛ AoE рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br><p>  рдЖрдкрдХреЛ рдпрд╣ рднреА рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><ul><li>  <strong>рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░</strong> - рдпрд╣ рдЖрдИрдкреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ рдХрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдХрд░реЗрдЧрд╛ рдЬреЛ рд╣рдорд╛рд░реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рддрд╛рдХрд┐ рд╡реЗ рд╣рдорд╛рд░реЗ LTSP рд╕рд░реНрд╡рд░ рд╕реЗ рдмреВрдЯ рдХрд░ рд╕рдХреЗрдВред </li></ul><br><h2 id="process-zagruzki-nody">  рдиреЛрдб рд▓реЛрдбрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ </h2><br><p>  <strong>рдиреЛрдб рд▓реЛрдбрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд┐рд╡рд░рдг</strong> </p><br><ul><li>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдиреЛрдб рдбреАрдПрдЪрд╕реАрдкреА рдЖрдИрдкреА рдкрддреЗ рдФрд░ <code>next-server</code> , <code>filename</code> рд▓рд┐рдП рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдЧрд╛ред </li><li>  рдлрд┐рд░ рдиреЛрдб рд╕реЗрдЯрд┐рдВрдЧ рд▓рд╛рдЧреВ рдХрд░реЗрдЧрд╛ рдФрд░ рдмреВрдЯрд▓реЛрдбрд░ (pxelinux рдпрд╛ рдЧреНрд░рдм) рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдЧрд╛ </li><li>  рдмреВрдЯрд▓реЛрдбрд░ рдХрд░реНрдиреЗрд▓ рдФрд░ рдЗрдирдЯреНрд░рд╛рдореНрд░рд╛рдореНрд╕ рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рд▓реЛрдб рдХрд░реЗрдЧрд╛ред </li><li>  рдлрд┐рд░ рдпрд╣ рдХрд░реНрдиреЗрд▓ рдФрд░ рдЗрдирдЯреНрд░рд╛рдореНрд░рд╛рдореНрд╕ рдХреЛ рдХрд░реНрдиреЗрд▓ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рд▓реЛрдб рдХрд░реЗрдЧрд╛ред </li><li>  рдмреВрдЯ рд╕рдордп рдкрд░, initramfs рдореЙрдбреНрдпреВрд▓ cmdline рд╕реЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛ рдФрд░ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░реЗрдЧрд╛, рдЬреИрд╕реЗ рдХрд┐ рдПрдХ nbd рдбрд┐рд╡рд╛рдЗрд╕ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛, рдУрд╡рд░рд▓реЗ рд░реВрдЯрдлрд╝реНрд╕ рддреИрдпрд╛рд░ рдХрд░рдирд╛, рдЖрджрд┐ред </li><li>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╕рд╛рдорд╛рдиреНрдп init рдХреЗ рдмрдЬрд╛рдп, рдПрдХ рд╡рд┐рд╢реЗрд╖ ltsp-init рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  Ltsp-init рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореБрдЦреНрдп рдЗрдирд┐рдЯ рдХрд╣реЗ рдЬрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рддреИрдпрд╛рд░ рдХрд░ рджреЗрдЧрд╛ред  рдореВрд▓ рд░реВрдк рд╕реЗ, lts.conf (рдореБрдЦреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓) рдХреЗ рд╡рд┐рдХрд▓реНрдк рдпрд╣рд╛рдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ: рдпрд╣ fstab рдФрд░ rllocal, рдЖрджрд┐ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдЕрдкрдбреЗрдЯ рдХрд░ рд░рд╣рд╛ рд╣реИред </li><li>  рдлрд┐рд░ рдореБрдЦреНрдп рдЗрдирд┐рдЯ (рд╕рд┐рд╕реНрдЯрдордб) рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓ рд╣реЛрдЧрд╛, рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рд▓реЛрдб рдХрд░реЗрдЧрд╛, fstab рд╕реЗ рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░реЗрдЧрд╛, рд▓рдХреНрд╖реНрдп рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░реЗрдЧрд╛, рдФрд░ rc.local рд╕реЗ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдЧрд╛ред </li><li>  рдирддреАрдЬрддрди, рд╣рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рд▓реЛрдб рдХреА рдЧрдИ рдкреНрд░рдгрд╛рд▓реА рдорд┐рд▓рддреА рд╣реИ, рдЬреЛ рдЖрдЧреЗ рдХреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред </li></ul><br><h1 id="podgotovka-servera">  рд╕рд░реНрд╡рд░ рдХреА рддреИрдпрд╛рд░реА </h1><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдХрд╣рд╛, рдореИрдВ рдбреЙрдХрдлрд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдХреНрд╡реИрд╢ рдЗрдореЗрдЬ рдХреЗ рд╕рд╛рде LTSP рд╕рд░реНрд╡рд░ рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реВрдВред  рдпрд╣ рд╡рд┐рдзрд┐ рдЦрд░рд╛рдм рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рднреА рдЪрд░рдгреЛрдВ рдХреЛ рдЖрдкрдХреЗ рдЧрд┐рдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЖрдк рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, CI рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡рд╣реА рд╕рдм рдЬреЛ рдЖрдк рд╕рд╛рдорд╛рдиреНрдп рдбреЙрдХрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреА рддреИрдпрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br><p>  рджреВрд╕рд░реА рдУрд░, рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕рднреА рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ рдПрд▓рдЯреАрдПрд╕рдкреА рд╕рд░реНрд╡рд░ рдХреЛ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдФрд░ рдмреБрдирд┐рдпрд╛рджреА рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br>  рд▓реЗрдЦ рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рдХрдорд╛рдВрдб рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдПрдВ рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ рдбреЙрдХрдлрд╛рдЗрд▓ рдХреЗ рдмрд┐рдирд╛ LTSP рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><h2 id="spisok-ispolzovannyh-patchey">  рдкреНрд░рдпреБрдХреНрдд рдкреИрдЪ рдХреА рд╕реВрдЪреА </h2><br><p>  рдлрд┐рд▓рд╣рд╛рд▓, LTSP рдореЗрдВ рдХреБрдЫ рдЦрд╛рдорд┐рдпрд╛рдВ рд╣реИрдВ, рдФрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓реЗрдЦрдХ рд╕реБрдзрд╛рд░реЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЗрдЪреНрдЫреБрдХ рдирд╣реАрдВ рд╣реИрдВред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, LTSP рдЖрд╕рд╛рдиреА рд╕реЗ рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд▓рд┐рдП рдХреБрдЫ рдкреИрдЪ рддреИрдпрд╛рд░ рдХрд┐рдП, рдореИрдВ рдЙрдиреНрд╣реЗрдВ рдпрд╣рд╛рдВ рджреВрдВрдЧрд╛ред <br>  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рджрд┐рди рдореИрдВ рдХрд╛рдВрдЯреЗ рдореЗрдВ рдкрд░рд┐рдкрдХреНрд╡ рд╣реЛ рдЬрд╛рдКрдВ рдпрджрд┐ рд╕рдореБрджрд╛рдп рдореЗрд░реЗ рдирд┐рд░реНрдгрдп рдХреЛ рдЧрд░реНрдордЬреЛрд╢реА рд╕реЗ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗред </p><br><ul><li>  <a href="">рд╕реБрд╡рд┐рдзрд╛ grub.diff</a> <br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдПрд▓рдЯреАрдПрд╕рдкреА рдИрдПрдлрдЖрдИ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдПрдХ рдкреИрдЪ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬреЛ GRFI2 рдХреЛ EFI рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рддрд╛ рд╣реИред </li><li>  <a href="">feature_preinit.diff</a> <br>  рдпрд╣ рдкреИрдЪ LRE.conf рдореЗрдВ PREINIT рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рдореБрдЦреНрдп рдЗрдирд┐рдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдордирдорд╛рдиреА рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рд╕рд┐рд╕реНрдЯрдордб рдЗрдХрд╛рдЗрдпреЛрдВ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╣реИ рдХрд┐ рдмреВрдЯ рд╡рд╛рддрд╛рд╡рд░рдг рд╕реЗ рд╕рднреА рдЪрд░ рд╕рд╣реЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмреБрд▓рд╛рдП рдЧрдП рдЕрдкрдиреЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  <a href="">feature_initramfs_params_from_lts_conf.diff</a> <br>  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЕрдХреНрд╖рдо NBD_TO_RAM рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рд╣рд▓ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕ рдкреИрдЪ рдХреЗ рдмрд╛рдж рдЖрдк рдЗрд╕реЗ lro.conf рдореЗрдВ рдереНрд░реЛрдЯ рдХреЗ рдЕрдВрджрд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  (tftp рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдПрдХ рдирд╣реАрдВ) </li><li>  <a href="">nbd-server-wrapper.sh</a> <br>  рдпрд╣ рдПрдХ рдкреИрдЪ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд┐рд░реНрдл рдПрдХ рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ, рдпрд╣ рдЖрдкрдХреЛ nbd-server рдХреЛ рдЕрдЧреНрд░рднреВрдорд┐ рдореЗрдВ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЕрдЧрд░ рдЖрдкрдХреЛ Docker рдХрдВрдЯреЗрдирд░ рдХреЗ рдЕрдВрджрд░ nbd-server рдЪрд▓рд╛рдирд╛ рд╣реИ рддреЛ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </li></ul><br><h2 id="dockerfile-stages">  Dockerfile рдЪрд░рдгреЛрдВ </h2><br><p>  рд╣рдо рдЕрдкрдиреЗ рдбреЙрдХрдЯрд░ рдЫрд╡рд┐ рдХреЗ рдХреЗрд╡рд▓ рдЖрд╡рд╢реНрдпрдХ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдбреЙрдХрд░реАрдлрд╛рдЗрд▓ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдордВрдЪ рдирд┐рд░реНрдорд╛рдг рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рд╢реЗрд╖ рдЕрдкреНрд░рдпреБрдХреНрдд рднрд╛рдЧреЛрдВ рдХреЛ рдЕрдВрддрд┐рдо рдЫрд╡рд┐ рд╕реЗ рдмрд╛рд╣рд░ рд░рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><pre> <code class="hljs ruby">ltsp-base (    ltsp ) <span class="hljs-params"><span class="hljs-params">| |</span></span>---basesystem <span class="hljs-params"><span class="hljs-params">| ( chroot-     ) |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|---builder |</span></span> <span class="hljs-params"><span class="hljs-params">| (    ,  ) |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-string"><span class="hljs-string">'---ltsp-image | (  , docker, kubelet   squashed ) | '</span></span>---final-stage ( squashed ,   initramfs   stage)</code> </pre> <br><h3 id="stage-1-ltsp-base">  рд╕реНрдЯреЗрдЬ 1: ltsp- рдмреЗрд╕ </h3><br><p>  рдареАрдХ рд╣реИ, рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдпрд╣ рд╣рдорд╛рд░реЗ рдбреЙрдХрд░реАрдлрд╛рдЗрд▓ рдХрд╛ рдкрд╣рд▓рд╛ рднрд╛рдЧ рд╣реИ: </p><br><pre> <code class="bash hljs">FROM ubuntu:16.04 as ltsp-base ADD nbd-server-wrapper.sh /bin/ ADD /patches/feature-grub.diff /patches/feature-grub.diff RUN apt-get -y update \ &amp;&amp; apt-get -y install \ ltsp-server \ tftpd-hpa \ nbd-server \ grub-common \ grub-pc-bin \ grub-efi-amd64-bin \ curl \ patch \ &amp;&amp; sed -i <span class="hljs-string"><span class="hljs-string">'s|in_target mount|in_target_nofail mount|'</span></span> \ /usr/share/debootstrap/<span class="hljs-built_in"><span class="hljs-built_in">functions</span></span> \ <span class="hljs-comment"><span class="hljs-comment">#   EFI   Grub (#1745251) &amp;&amp; patch -p2 -d /usr/sbin &lt; /patches/feature-grub.diff \ &amp;&amp; rm -rf /var/lib/apt/lists \ &amp;&amp; apt-get clean</span></span></code> </pre> <br><p>  рдлрд┐рд▓рд╣рд╛рд▓, рд╣рдорд╛рд░реА рдбреЙрдХрдЯрд░ рдЫрд╡рд┐ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рдореНрди рд╕реНрдерд╛рдкрд┐рдд рд╣реИ: </p><br><ul><li>  NBD рд╕рд░реНрд╡рд░ </li><li>  TFTP рд╕рд░реНрд╡рд░ </li><li>  рдЧреНрд░рдм рдмреВрдЯрд▓реЛрдбрд░ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде LTSP рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ (EFI рдХреЗ рд▓рд┐рдП) </li></ul><br><h3 id="stage-2-basesystem">  рд╕реНрдЯреЗрдЬ 2: рдмреЗрд╕рд╕рд┐рд╕реНрдЯрдо </h3><br><p>  рдЗрд╕ рд╕реНрддрд░ рдкрд░, рд╣рдо рдЖрдзрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╕рд╛рде рдЪреЗрд░реЛрдЯ рд╡рд╛рддрд╛рд╡рд░рдг рддреИрдпрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХреЗ рд╕рд╛рде рдореБрдЦреНрдп рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗред <br>  рд╣рдо рдЗрдореЗрдЬ рдХреЛ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <strong>ltsp-build-client рдХреЗ</strong> рдмрдЬрд╛рдп рд╕рд╛рдорд╛рдиреНрдп <strong>debootstrap рдХрд╛</strong> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ <strong>ltsp-build-client</strong> GUI рдФрд░ рдХреБрдЫ рдЕрдиреНрдп рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЪреАрдЬреЗрдВ рд╕реНрдерд╛рдкрд┐рдд <strong>рдХрд░реЗрдЧрд╛</strong> рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рд░реНрд╡рд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред </p><br><pre> <code class="bash hljs">FROM ltsp-base as basesystem ARG DEBIAN_FRONTEND=noninteractive <span class="hljs-comment"><span class="hljs-comment">#    RUN mkdir -p /opt/ltsp/amd64/proc/self/fd \ &amp;&amp; touch /opt/ltsp/amd64/proc/self/fd/3 \ &amp;&amp; debootstrap --arch amd64 xenial /opt/ltsp/amd64 \ &amp;&amp; rm -rf /opt/ltsp/amd64/proc/* #   RUN echo "\ deb http://archive.ubuntu.com/ubuntu xenial main restricted universe multiverse\n\ deb http://archive.ubuntu.com/ubuntu xenial-updates main restricted universe multiverse\n\ deb http://archive.ubuntu.com/ubuntu xenial-security main restricted universe multiverse" \ &gt; /opt/ltsp/amd64/etc/apt/sources.list \ &amp;&amp; ltsp-chroot apt-get -y update \ &amp;&amp; ltsp-chroot apt-get -y upgrade #   LTSP RUN ltsp-chroot apt-get -y install ltsp-client-core #   initramfs # 1:    /etc/lts.conf    (#1680490) # 2:   PREINIT   lts.conf ADD /patches /patches RUN patch -p4 -d /opt/ltsp/amd64/usr/share &lt; /patches/feature_initramfs_params_from_lts_conf.diff \ &amp;&amp; patch -p3 -d /opt/ltsp/amd64/usr/share &lt; /patches/feature_preinit.diff #  LTSP_NBD_TO_RAM    ,     ram: RUN echo "[Default]\nLTSP_NBD_TO_RAM = true" \ &gt; /opt/ltsp/amd64/etc/lts.conf #   RUN echo 'APT::Install-Recommends "0";\nAPT::Install-Suggests "0";' \ &gt;&gt; /opt/ltsp/amd64/etc/apt/apt.conf.d/01norecommend \ &amp;&amp; ltsp-chroot apt-get -y install \ software-properties-common \ apt-transport-https \ ca-certificates \ ssh \ bridge-utils \ pv \ jq \ vlan \ bash-completion \ screen \ vim \ mc \ lm-sensors \ htop \ jnettop \ rsync \ curl \ wget \ tcpdump \ arping \ apparmor-utils \ nfs-common \ telnet \ sysstat \ ipvsadm \ ipset \ make #   RUN ltsp-chroot apt-get -y install linux-generic-hwe-16.04</span></span></code> </pre> <br><p>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ рд╕рдВрдХреБрд▓, рдЬреИрд╕реЗ рдХрд┐ lvm2, рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдЕрдиреБрднрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд╡реЗ рдПрдХ unprivileged рдЪреБрд░реЛрдЯ рдореЗрдВ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдирд╣реАрдВ рд╣реИрдВред  рдЙрдирдХреА рдкреЛрд╕реНрдЯ-рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдЖрджреЗрд╢реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреА рд╣реИрдВ рдЬреЛ рд╡рд┐рдлрд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреВрд░реЗ рдкреИрдХреЗрдЬ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╕рдорд╛рдзрд╛рди: </p><br><ul><li>  рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рдЖрдк рдХрд░реНрдиреЗрд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЙрдиреНрд╣реЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, lvm2) </li><li>  рд▓реЗрдХрд┐рди рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмрд┐рдирд╛ рдкреЛрд╕реНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд░реНрдХрдЕрд░рд╛рдЙрдВрдб</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </li></ul><br><h3 id="stage-3-builder">  рд╕реНрдЯреЗрдЬ 3: рдмрд┐рд▓реНрдбрд░ </h3><br><p>  рдЗрд╕ рд╕реНрддрд░ рдкрд░, рд╣рдо рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдФрд░ рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рдПрдХрддреНрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рдЪрд░рдг рдореЗрдВ, рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдореЛрдб рдореЗрдВ рдРрд╕рд╛ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред <br>  рдЗрд╕ рдЪрд░рдг рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВ рдпрджрд┐ рдЖрдкрдХреЛ рдХрд▓рд╛рдХрд╛рд░реЛрдВ рд╕реЗ рдХреБрдЫ рднреА рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдореИрдВ MLNX_EN рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреВрдВрдЧрд╛: </p><br><pre> <code class="bash hljs">FROM basesystem as builder <span class="hljs-comment"><span class="hljs-comment">#  cpuinfo (   ) RUN cp /proc/cpuinfo /opt/ltsp/amd64/proc/cpuinfo #    Mellanox driver RUN ltsp-chroot sh -cx \ ' VERSION=4.3-1.0.1.0-ubuntu16.04-x86_64 \ &amp;&amp; curl -L http://www.mellanox.com/downloads/ofed/MLNX_EN-${VERSION%%-ubuntu*}/mlnx-en-${VERSION}.tgz \ | tar xzf - \ &amp;&amp; export \ DRIVER_DIR="$(ls -1 | grep "MLNX_OFED_LINUX-\|mlnx-en-")" \ KERNEL="$(ls -1t /lib/modules/ | head -n1)" \ &amp;&amp; cd "$DRIVER_DIR" \ &amp;&amp; ./*install --kernel "$KERNEL" --without-dkms --add-kernel-support \ &amp;&amp; cd - \ &amp;&amp; rm -rf "$DRIVER_DIR" /tmp/mlnx-en* /tmp/ofed*' #    RUN ltsp-chroot sh -c \ ' export KERNEL="$(ls -1t /usr/src/ | grep -m1 "^linux-headers" | sed "s/^linux-headers-//g")" \ &amp;&amp; tar cpzf /modules.tar.gz /lib/modules/${KERNEL}/updates'</span></span></code> </pre><br><h3 id="stage-4-ltsp-image">  рдЪрд░рдг 4: ltsp- рдЫрд╡рд┐ </h3><br><p>  рдЗрд╕ рдЪрд░рдг рдореЗрдВ рд╣рдо рд╡рд╣реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ рд╣рдордиреЗ рдкрд┐рдЫрд▓реЗ рдЪрд░рдг рдореЗрдВ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рд╣реИ: </p><br><pre> <code class="bash hljs">FROM basesystem as ltsp-image <span class="hljs-comment"><span class="hljs-comment">#    COPY --from=builder /opt/ltsp/amd64/modules.tar.gz /opt/ltsp/amd64/modules.tar.gz #    RUN ltsp-chroot sh -c \ ' export KERNEL="$(ls -1t /usr/src/ | grep -m1 "^linux-headers" | sed "s/^linux-headers-//g")" \ &amp;&amp; tar xpzf /modules.tar.gz \ &amp;&amp; depmod -a "${KERNEL}" \ &amp;&amp; rm -f /modules.tar.gz'</span></span></code> </pre> <br><p>  рдЕрдм рд╣рдо рдЕрдкрдиреА LTSP рдЫрд╡рд┐ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдмрджрд▓рд╛рд╡ рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  docker RUN ltsp-chroot sh -c \ ' curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add - \ &amp;&amp; echo "deb https://download.docker.com/linux/ubuntu xenial stable" \ &gt; /etc/apt/sources.list.d/docker.list \ &amp;&amp; apt-get -y update \ &amp;&amp; apt-get -y install \ docker-ce=$(apt-cache madison docker-ce | grep 18.06 | head -1 | awk "{print $ 3}")' #    docker RUN DOCKER_OPTS="$(echo \ --storage-driver=overlay2 \ --iptables=false \ --ip-masq=false \ --log-driver=json-file \ --log-opt=max-size=10m \ --log-opt=max-file=5 \ )" \ &amp;&amp; sed "/^ExecStart=/ s|$| $DOCKER_OPTS|g" \ /opt/ltsp/amd64/lib/systemd/system/docker.service \ &gt; /opt/ltsp/amd64/etc/systemd/system/docker.service #  kubeadm, kubelet  kubectl RUN ltsp-chroot sh -c \ ' curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \ &amp;&amp; echo "deb http://apt.kubernetes.io/ kubernetes-xenial main" \ &gt; /etc/apt/sources.list.d/kubernetes.list \ &amp;&amp; apt-get -y update \ &amp;&amp; apt-get -y install kubelet kubeadm kubectl cri-tools' #    RUN rm -f /opt/ltsp/amd64/etc/apt/apt.conf.d/20auto-upgrades #   apparmor RUN ltsp-chroot find /etc/apparmor.d \ -maxdepth 1 \ -type f \ -name "sbin.*" \ -o -name "usr.*" \ -exec ln -sf "{}" /etc/apparmor.d/disable/ \; #    (cmdline) RUN KERNEL_OPTIONS="$(echo \ init=/sbin/init-ltsp \ forcepae \ console=tty1 \ console=ttyS0,9600n8 \ nvme_core.default_ps_max_latency_us=0 \ )" \ &amp;&amp; sed -i "/^CMDLINE_LINUX_DEFAULT=/ s|=.*|=\"${KERNEL_OPTIONS}\"|" \ "/opt/ltsp/amd64/etc/ltsp/update-kernels.conf"</span></span></code> </pre> <br><p>  рдЕрдм рд╣рдорд╛рд░реЗ рдкреИрд░реЛрдб рд╕реЗ рдПрдХ рд╕реНрдХреНрд╡рд╛рдб рдЫрд╡рд┐ рдмрдирд╛рдПрдВ: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   RUN rm -rf /opt/ltsp/amd64/var/lib/apt/lists \ &amp;&amp; ltsp-chroot apt-get clean #  squashed  RUN ltsp-update-image</span></span></code> </pre> <br><h3 id="stage-5-final-stage">  рд╕реНрдЯреЗрдЬ 5: рдЕрдВрддрд┐рдо рдЪрд░рдг </h3><br><p>  рдЕрдВрддрд┐рдо рдЪрд░рдг рдореЗрдВ, рд╣рдо рдХреЗрд╡рд▓ рдЕрдкрдиреА рд╕реНрдХреНрд╡реИрд╢ рдЫрд╡рд┐ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХреЛ рдЗрдирдЯреНрд░реНрд░рд╛рдордлреНрд╕ рдХреЗ рд╕рд╛рде рд╕рд╣реЗрдЬрддреЗ рд╣реИрдВ </p><br><pre> <code class="bash hljs">FROM ltsp-base COPY --from=ltsp-image /opt/ltsp/images /opt/ltsp/images COPY --from=ltsp-image /etc/nbd-server/conf.d /etc/nbd-server/conf.d COPY --from=ltsp-image /var/lib/tftpboot /var/lib/tftpboot</code> </pre> <br><p>  рдареАрдХ рд╣реИ, рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдбреЙрдХрдЯрд░ рдЫрд╡рд┐ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: </p><br><ul><li>  TFTP рд╕рд░реНрд╡рд░ </li><li>  NBD рд╕рд░реНрд╡рд░ </li><li>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рд╣реБрдЖ рдмреВрдЯрд▓реЛрдбрд░ </li><li>  initramfs рдХреЗ рд╕рд╛рде рдХрд░реНрдиреЗрд▓ </li><li>  рдЯреВрдЯреА рд╣реБрдИ рдЬрдбрд╝реЗрдВ рдЫрд╡рд┐ </li></ul><br><h1 id="ispolzovanie">  рдХреЗ рдЙрдкрдпреЛрдЧ </h1><br><p>  рдареАрдХ рд╣реИ, рдЕрдм рдЬрдм рдПрд▓рдЯреАрдПрд╕рдкреА рд╕рд░реНрд╡рд░, рдХрд░реНрдиреЗрд▓, рдЗрдирдЯреНрд░рд╛рдореНрд░рд╛рдореНрд╕ рдФрд░ рд╕реНрдХреНрд╡реИрд╢ рд░реВрдЯрдлреБрдЯ рдХреЗ рд╕рд╛рде рд╣рдорд╛рд░реА рдбреЙрдХрд░ рдЫрд╡рд┐ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рддреИрдпрд╛рд░ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕рдХреЗ рд╕рд╛рде рддреИрдирд╛рддреА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╣рдо рдЗрд╕реЗ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рдореБрджреНрджрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рд╣рд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдо рдЕрдкрдиреА рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдХреБрдмреЗрд░рдиреЗрдЯ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдмреВрдЯ рд╕рдордп рдкрд░ рдиреЛрдбреНрд╕ рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕рдЯрд░реНрдирд▓рд┐рдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдмреЗрд░рдиреЗрдЯ рд╣рдореЗрд╢рд╛ рдПрдирдПрдЯреАрдЖрдИрдкреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдореИрдВ рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рдЬрд╛рдирддрд╛ рд╣реВрдВ: <code>hostNetwork: true</code> рдЙрдкрдпреЛрдЧ <code>hostNetwork: true</code> рдпрд╛ <code>hostNetwork: true</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк рд╣рдореЗрдВ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рднреА рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛,  рд╡рд┐рдлрд▓рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдИрдкреА рдкрддрд╛ рдХрдВрдЯреЗрдирд░ рдХреЗ рд╕рд╛рде рджреВрд╕рд░реЗ рдиреЛрдб рдореЗрдВ рдЪрд▓рд╛ рдЬрд╛рдПрдЧрд╛ред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ рдкрд┐рдкрд╡рд░реНрдХ рдПрдХ рджреЗрд╢реА рдФрд░ рдХрдо рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред <br>  рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдФрд░ рдЙрдкрдпреБрдХреНрдд рд╕рдорд╛рдзрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдХреГрдкрдпрд╛ рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдПрдВред </p><br><p>  рдпрд╣рд╛рдБ hostNetwork рдХреЗ рд╕рд╛рде рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░рд┐рдирд┐рдпреЛрдЬрди рд╣реИ: </p><br><pre> <code class="hljs pgsql">apiVersion: extensions/v1beta1 kind: Deployment metadata: <span class="hljs-type"><span class="hljs-type">name</span></span>: ltsp-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> labels: app: ltsp-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> spec: selector: matchLabels: <span class="hljs-type"><span class="hljs-type">name</span></span>: ltsp-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: metadata: labels: <span class="hljs-type"><span class="hljs-type">name</span></span>: ltsp-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> spec: hostNetwork: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> containers: - <span class="hljs-type"><span class="hljs-type">name</span></span>: tftpd image: registry.example.org/example/ltsp:latest command: [ "/usr/sbin/in.tftpd", "-L", "-u", "tftp", "-a", ":69", "-s", "/var/lib/tftpboot" ] lifecycle: postStart: exec: command: ["/bin/sh", "-c", "cd /var/lib/tftpboot/ltsp/amd64; ln -sf config/lts.conf ." ] volumeMounts: - <span class="hljs-type"><span class="hljs-type">name</span></span>: config mountPath: "/var/lib/tftpboot/ltsp/amd64/config" - <span class="hljs-type"><span class="hljs-type">name</span></span>: nbd-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> image: registry.example.org/example/ltsp:latest command: [ "/bin/nbd-server-wrapper.sh" ] volumes: - <span class="hljs-type"><span class="hljs-type">name</span></span>: config configMap: <span class="hljs-type"><span class="hljs-type">name</span></span>: ltsp-config</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдиреЗ рджреЗрдЦрд╛ рд╣реЛрдЧрд╛, <strong>lts.conf</strong> рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде <strong>рдХреЙрдиреНрдлрд╝рд┐рдЧрд░</strong> рдХрд░рдирд╛ рднреА рдпрд╣рд╛рдБ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдЕрдкрдиреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рджреВрдВрдЧрд╛: </p><br><pre> <code class="hljs 1c">apiVersion: v1 kind: ConfigMap metadata: name: ltsp-config data: lts.conf: <span class="hljs-string"><span class="hljs-string">| [default] KEEP_SYSTEM_SERVICES = "</span></span>ssh ureadahead dbus-org.freedesktop.login1 systemd-logind polkitd cgmanager ufw rpcbind nfs-kernel-server<span class="hljs-string"><span class="hljs-string">" PREINIT_00_TIME = "</span></span>ln -sf /usr/share/zoneinfo/Europe/Prague /etc/localtime<span class="hljs-string"><span class="hljs-string">" PREINIT_01_FIX_HOSTNAME = "</span></span>sed -i '/^127.0.0.2/d' /etc/hosts<span class="hljs-string"><span class="hljs-string">" PREINIT_02_DOCKER_OPTIONS = "</span></span>sed -i 's|^ExecStart=.*|ExecStart=/usr/bin/dockerd -H fd:// --storage-driver overlay2 --iptables=false --ip-masq=false --log-driver=json-file --log-opt=max-size=10m --log-opt=max-file=5|' /etc/systemd/system/docker.service<span class="hljs-string"><span class="hljs-string">" FSTAB_01_SSH = "</span></span>/dev/data/ssh /etc/ssh ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" FSTAB_02_JOURNALD = "</span></span>/dev/data/journal /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/journal ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" FSTAB_03_DOCKER = "</span></span>/dev/data/docker /var/lib/docker ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" # Each command will stop script execution when fail RCFILE_01_SSH_SERVER = "</span></span>cp /rofs/etc/ssh/*_config /etc/ssh; ssh-keygen -A<span class="hljs-string"><span class="hljs-string">" RCFILE_02_SSH_CLIENT = "</span></span>mkdir -p /root/.ssh/; echo 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDBSLYRaORL2znr1V4a3rjDn3HDHn2CsvUNK1nv8+CctoICtJOPXl6zQycI9KXNhANfJpc6iQG1ZPZUR74IiNhNIKvOpnNRPyLZ5opm01MVIDIZgi9g0DUks1g5gLV5LKzED8xYKMBmAfXMxh/nsP9KEvxGvTJB3OD+/bBxpliTl5xY3Eu41+VmZqVOz3Yl98+X8cZTgqx2dmsHUk7VKN9OZuCjIZL9MtJCZyOSRbjuo4HFEssotR1mvANyz+BUXkjqv2pEa0I2vGQPk1VDul5TpzGaN3nOfu83URZLJgCrX+8whS1fzMepUYrbEuIWq95esjn0gR6G4J7qlxyguAb9 admin@kubernetes' &gt;&gt; /root/.ssh/authorized_keys<span class="hljs-string"><span class="hljs-string">" RCFILE_03_KERNEL_DEBUG = "</span></span>sysctl -w kernel.unknown_nmi_panic=<span class="hljs-number"><span class="hljs-number">1</span></span> kernel.softlockup_panic=<span class="hljs-number"><span class="hljs-number">1</span></span>; modprobe netconsole netconsole=@/vmbr0,@<span class="hljs-number"><span class="hljs-number">10.9</span></span>.<span class="hljs-number"><span class="hljs-number">0.15</span></span>/<span class="hljs-string"><span class="hljs-string">" RCFILE_04_SYSCTL = "</span></span>sysctl -w fs.file-max=<span class="hljs-number"><span class="hljs-number">20000000</span></span> fs.nr_open=<span class="hljs-number"><span class="hljs-number">20000000</span></span> net.ipv4.neigh.default.gc_thresh1=<span class="hljs-number"><span class="hljs-number">80000</span></span> net.ipv4.neigh.default.gc_thresh2=<span class="hljs-number"><span class="hljs-number">90000</span></span> net.ipv4.neigh.default.gc_thresh3=<span class="hljs-number"><span class="hljs-number">100000</span></span><span class="hljs-string"><span class="hljs-string">" RCFILE_05_FORWARD = "</span></span>echo <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; /proc/sys/net/ipv4/ip_forward<span class="hljs-string"><span class="hljs-string">" RCFILE_06_MODULES = "</span></span>modprobe br_netfilter<span class="hljs-string"><span class="hljs-string">" RCFILE_07_JOIN_K8S = "</span></span>kubeadm join --token <span class="hljs-number"><span class="hljs-number">2</span></span>a4576.<span class="hljs-number"><span class="hljs-number">504356</span></span>e45fa3d365 <span class="hljs-number"><span class="hljs-number">10.9</span></span>.<span class="hljs-number"><span class="hljs-number">0.20</span></span>:<span class="hljs-number"><span class="hljs-number">6443</span></span> --discovery-token-ca-cert-hash sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855<span class="hljs-string"><span class="hljs-string">"</span></span></code> 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDBSLYRaORL2znr1V4a3rjDn3HDHn2CsvUNK1nv8 + CctoICtJOPXl6zQycI9KXNhANfJpc6iQG1ZPZUR74IiNhNIKvOpnNRPyLZ5opm01MVIDIZgi9g0DUks1g5gLV5LKzED8xYKMBmAfXMxh / nsP9KEvxGvTJB3OD + / bBxpliTl5xY3Eu41 + VmZqVOz3Yl98 + X8cZTgqx2dmsHUk7VKN9OZuCjIZL9MtJCZyOSRbjuo4HFEssotR1mvANyz + BUXkjqv2pEa0I2vGQPk1VDul5TpzGaN3nOfu83URZLJgCrX + 8whS1fzMepUYrbEuIWq95esjn0gR6G4J7qlxyguAb9 рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ @ Kubernetes' &gt;&gt; /root/.ssh/authorized_keys" <code class="hljs 1c">apiVersion: v1 kind: ConfigMap metadata: name: ltsp-config data: lts.conf: <span class="hljs-string"><span class="hljs-string">| [default] KEEP_SYSTEM_SERVICES = "</span></span>ssh ureadahead dbus-org.freedesktop.login1 systemd-logind polkitd cgmanager ufw rpcbind nfs-kernel-server<span class="hljs-string"><span class="hljs-string">" PREINIT_00_TIME = "</span></span>ln -sf /usr/share/zoneinfo/Europe/Prague /etc/localtime<span class="hljs-string"><span class="hljs-string">" PREINIT_01_FIX_HOSTNAME = "</span></span>sed -i '/^127.0.0.2/d' /etc/hosts<span class="hljs-string"><span class="hljs-string">" PREINIT_02_DOCKER_OPTIONS = "</span></span>sed -i 's|^ExecStart=.*|ExecStart=/usr/bin/dockerd -H fd:// --storage-driver overlay2 --iptables=false --ip-masq=false --log-driver=json-file --log-opt=max-size=10m --log-opt=max-file=5|' /etc/systemd/system/docker.service<span class="hljs-string"><span class="hljs-string">" FSTAB_01_SSH = "</span></span>/dev/data/ssh /etc/ssh ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" FSTAB_02_JOURNALD = "</span></span>/dev/data/journal /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/journal ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" FSTAB_03_DOCKER = "</span></span>/dev/data/docker /var/lib/docker ext4 nofail,noatime,nodiratime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-string"><span class="hljs-string">" # Each command will stop script execution when fail RCFILE_01_SSH_SERVER = "</span></span>cp /rofs/etc/ssh/*_config /etc/ssh; ssh-keygen -A<span class="hljs-string"><span class="hljs-string">" RCFILE_02_SSH_CLIENT = "</span></span>mkdir -p /root/.ssh/; echo 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDBSLYRaORL2znr1V4a3rjDn3HDHn2CsvUNK1nv8+CctoICtJOPXl6zQycI9KXNhANfJpc6iQG1ZPZUR74IiNhNIKvOpnNRPyLZ5opm01MVIDIZgi9g0DUks1g5gLV5LKzED8xYKMBmAfXMxh/nsP9KEvxGvTJB3OD+/bBxpliTl5xY3Eu41+VmZqVOz3Yl98+X8cZTgqx2dmsHUk7VKN9OZuCjIZL9MtJCZyOSRbjuo4HFEssotR1mvANyz+BUXkjqv2pEa0I2vGQPk1VDul5TpzGaN3nOfu83URZLJgCrX+8whS1fzMepUYrbEuIWq95esjn0gR6G4J7qlxyguAb9 admin@kubernetes' &gt;&gt; /root/.ssh/authorized_keys<span class="hljs-string"><span class="hljs-string">" RCFILE_03_KERNEL_DEBUG = "</span></span>sysctl -w kernel.unknown_nmi_panic=<span class="hljs-number"><span class="hljs-number">1</span></span> kernel.softlockup_panic=<span class="hljs-number"><span class="hljs-number">1</span></span>; modprobe netconsole netconsole=@/vmbr0,@<span class="hljs-number"><span class="hljs-number">10.9</span></span>.<span class="hljs-number"><span class="hljs-number">0.15</span></span>/<span class="hljs-string"><span class="hljs-string">" RCFILE_04_SYSCTL = "</span></span>sysctl -w fs.file-max=<span class="hljs-number"><span class="hljs-number">20000000</span></span> fs.nr_open=<span class="hljs-number"><span class="hljs-number">20000000</span></span> net.ipv4.neigh.default.gc_thresh1=<span class="hljs-number"><span class="hljs-number">80000</span></span> net.ipv4.neigh.default.gc_thresh2=<span class="hljs-number"><span class="hljs-number">90000</span></span> net.ipv4.neigh.default.gc_thresh3=<span class="hljs-number"><span class="hljs-number">100000</span></span><span class="hljs-string"><span class="hljs-string">" RCFILE_05_FORWARD = "</span></span>echo <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; /proc/sys/net/ipv4/ip_forward<span class="hljs-string"><span class="hljs-string">" RCFILE_06_MODULES = "</span></span>modprobe br_netfilter<span class="hljs-string"><span class="hljs-string">" RCFILE_07_JOIN_K8S = "</span></span>kubeadm join --token <span class="hljs-number"><span class="hljs-number">2</span></span>a4576.<span class="hljs-number"><span class="hljs-number">504356</span></span>e45fa3d365 <span class="hljs-number"><span class="hljs-number">10.9</span></span>.<span class="hljs-number"><span class="hljs-number">0.20</span></span>:<span class="hljs-number"><span class="hljs-number">6443</span></span> --discovery-token-ca-cert-hash sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855<span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br><ul><li>  <strong>KEEP_SYSTEM_SERVICES</strong> - рдмреВрдЯ рдХреЗ рджреМрд░рд╛рди LTSP рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреБрдЫ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИ, рдЗрд╕ рдЪрд░ рдХреЛ рдпрд╣рд╛рдБ рд╕реВрдЪреАрдмрджреНрдз рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред </li><li>  <b>PREINIT_ *</b> - рдпрд╣рд╛рдВ рд╕реВрдЪреАрдмрджреНрдз рдХрдорд╛рдВрдб <b>рд╕рд┐рд╕реНрдЯрдо</b> рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХреА рдЬрд╛рдПрдЧреА (рдпрд╣ рдлреАрдЪрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">feature_preinit.dk</a> рдкреИрдЪ рджреНрд╡рд╛рд░рд╛ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛) </li><li>  <b>FSTAB_ *</b> - рдпрд╣рд╛рдВ рд╕реВрдЪреАрдмрджреНрдз рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ <code>/etc/fstab</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред <br>  рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдореИрдВ <code>nofail</code> рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдпрд╣ рдирд┐рдореНрди рд╡реНрдпрд╡рд╣рд╛рд░ рджреЗрддрд╛ рд╣реИ, рдХрд┐ рдпрджрд┐ рдЕрдиреБрднрд╛рдЧ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рддреЛ рдбрд╛рдЙрдирд▓реЛрдб рдмрд┐рдирд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рдЬрд╛рд░реА рд╣реИред </li><li>  <b>RCFILE_ *</b> - рдЗрди рдХрдорд╛рдВрдбреЛрдВ рдХреЛ <code>rc.local</code> рдлрд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕реЗ <b>рд╕рд┐рд╕реНрдЯрдордб</b> рджреНрд╡рд╛рд░рд╛ рдмреВрдЯ рд╕рдордп рдкрд░ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br>  рдпрд╣рд╛рдВ рдореИрдВ рдЖрд╡рд╢реНрдпрдХ рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рд▓реЛрдб рдХрд░рддрд╛ рд╣реВрдВ, рдХреБрдЫ sysctl рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЪрд▓рд╛рддрд╛ <code>kubeadm join</code> , рдФрд░ рдлрд┐рд░ <code>kubeadm join</code> рдХрдорд╛рдВрдб <code>kubeadm join</code> , рдЬреЛ рдиреЛрдб рдХреЛ kubernetes рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред </li></ul><br><p>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">lts.conf рдореИрдиреБрдЕрд▓ рдкреЗрдЬ</a> рд╕реЗ рд╕рднреА рдЪрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЕрдм рдЖрдк рдЕрдкрдиреЗ рдбреАрдПрдЪрд╕реАрдкреА рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ, <code>next-server</code> рдФрд░ <code>filename</code> рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЬреЛ рдХреБрдЫ рднреА рдЪрд╛рд╣рд┐рдП рд╡рд╣ рд╣реИред </p><br><p>  рдореИрдВ ISC-DHCP рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдореИрдВ <code>dhcpd.conf</code> рдЙрджрд╛рд╣рд░рдг рджреВрдВрдЧрд╛: </p><br><pre> <code class="hljs pgsql">shared-network ltsp-netowrk { subnet <span class="hljs-number"><span class="hljs-number">10.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> netmask <span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> { authoritative; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>-lease-<span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; max-lease-<span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> <span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span> "example.org"; <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> <span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>-servers <span class="hljs-number"><span class="hljs-number">10.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> routers <span class="hljs-number"><span class="hljs-number">10.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>; next-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> ltsp<span class="hljs-number"><span class="hljs-number">-1</span></span>; # <span class="hljs-keyword"><span class="hljs-keyword">write</span></span> ltsp-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span> hostname here <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> architecture = <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span> { filename "/ltsp/amd64/grub/x86_64-efi/core.efi"; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { filename "/ltsp/amd64/grub/i386-pc/core.0"; } <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">10.9</span></span><span class="hljs-number"><span class="hljs-number">.200</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-number"><span class="hljs-number">10.9</span></span><span class="hljs-number"><span class="hljs-number">.250</span></span><span class="hljs-number"><span class="hljs-number">.254</span></span>; }</code> </pre> <br><p>  рдЖрдк рдЗрд╕рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП, рдореЗрд░реЗ рдкрд╛рд╕ рдХрдИ рдПрд▓рдЯреАрдПрд╕рдкреА-рд╕рд░реНрд╡рд░ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб рдХреЗ рд▓рд┐рдП рдореИрдВ рдПрдХ рдЕрд▓рдЧ рд╕реНрдерд┐рд░ рдЖрдИрдкреА-рдкрддрд╛ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реВрдВ, рдЬреЛ рдХрд┐ рдРрдиреНрд╕рд┐рдмрд▓-рдкреНрд▓реЗрдмреБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ рдиреЛрдб рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рдЕрдЧрд░ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдЖрдкрдХреЛ рдЙрд╕ рдкрд░ рдПрдХ рд▓реЛрдбреЗрдб рд╕рд┐рд╕реНрдЯрдо рдорд┐рд▓реЗрдЧрд╛ред  рдиреЛрдб рдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯ рд╕рдореВрд╣ рдореЗрдВ рднреА рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЕрдм рдЖрдк рд╕реНрд╡рдпрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ рдХреБрдЫ рдФрд░ рдЪрд╛рд╣рд┐рдП, рддреЛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ LTSP рдмрд╣реБрдд рдЖрд╕рд╛рдиреА рд╕реЗ рдЖрдкрдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд╕реНрд░реЛрдд рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВ, рд╡рд╣рд╛рдВ рдЖрдк рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЙрддреНрддрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╣рдорд╛рд░реЗ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдЪреИрдирд▓ рд╕реЗ рдЬреБрдбрд╝реЗрдВ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">@ltsp_ru</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi423785/">https://habr.com/ru/post/hi423785/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi423775/index.html">рдореБрдЭреЗ рд▓реЛрд╣реЗ рдХрд╛ рдПрдХ рд╕реБрдВрджрд░ рдЯреБрдХрдбрд╝рд╛ рдЪрд╛рд╣рд┐рдП рдерд╛ред рдпрд╣ рдирд┐рдХрд▓рд╛</a></li>
<li><a href="../hi423777/index.html">рдХреАрд╕реНрдЯреЛрди рдкреНрд░реЛрдЬреЗрдХреНрдЯ: рд░рдирд┐рдВрдЧ рдЖрд░рдЖрдИрдПрд╕рд╕реА-рд╡реА-рдЖрдзрд╛рд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкрд░реНрдпрд╛рд╡рд░рдг</a></li>
<li><a href="../hi423779/index.html">рдХреНрд▓рд╛рдЙрдб-рдЯреВ-рдХреНрд▓рд╛рдЙрдб рдмреИрдХрдЕрдк: рдпрд╣ рдХреНрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ</a></li>
<li><a href="../hi423781/index.html">IoT рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдиреЛрдЯреНрд╕ред рдорд╛рдорд▓рд╛: рд╣рдо рдЪреЗрд▓реНрдпрд╛рдмрд┐рдВрд╕реНрдХ рдореЗрдВ рдПрдХ рдлреНрдпреВрд▓ рдбрд┐рд╕реНрдкреЗрдВрд╕рд░ рдХреЗ рд▓рд┐рдП рд▓реЛрд░рд╛ рдиреЗрдЯрд╡рд░реНрдХ рдмрдирд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi423783/index.html">рд╕реНрдкреНрд▓рдВрдХ: рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдЕрдЧрд▓реЗ рд╕реНрддрд░ рдкрд░</a></li>
<li><a href="../hi423787/index.html">рдЯреЗрд╕реНрдЯ рд▓реИрдмреНрд╕ 2018. рдкрд░реАрдХреНрд╖рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдСрдирд▓рд╛рдЗрди рдорд╛рдЗрдЯреИрдкред 28 рд╕рд┐рддрдВрдмрд░ - 29</a></li>
<li><a href="../hi423791/index.html">рд╣рдо рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдФрд░ рд▓реЗрдЖрдЙрдЯ рдХреЗ рдмрд┐рдирд╛ рдПрдХ 3 рдбреА рд╡рд┐рдиреНрдпрд╛рд╕рдХрд░реНрддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВред рднрд╛рдЧ рджреЛ</a></li>
<li><a href="../hi423793/index.html">"рд╣рдордиреЗ рдпрд╣ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛, рд▓рд╛рдирдд рд╣реИ, рд╕рдордп рдкрд░!" - рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╕реЗ 10 рдкреНрд░рд╢реНрди, рдЕрдВрдХ 5</a></li>
<li><a href="../hi423797/index.html">Saucy рдмрд░реНрдб рд╕рдВрд░рдЪрдирд╛рдПрдВ: рд╡рд┐рдХрд╛рд╕ рдкреНрд░рд╡рд╛рд╣</a></li>
<li><a href="../hi423799/index.html">рдирд┐рд╡реЗрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рдмреНрд░реАрдлрд┐рдВрдЧред рдЗрдВрдЯреНрд░рд╛рдиреЗрдЯ рддреИрдирд╛рддреА рд╕рд╣реА рдврдВрдЧ рд╕реЗ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>