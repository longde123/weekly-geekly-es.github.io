<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๏ธ ๐ฉโโ๏ธ io_submit: ุจุฏูู ูู epoll ูู ุชุณูุน ุจู ูู ูุจู ๐ ๐ณ๏ธโ๐ ๐ดโโ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุชู ุฌุฐุจ ุงูุชุจุงู ุงููุคูู ุฅูู ููุงู ุนูู LWN ุญูู ูุงุฌูุฉ kernel ุฌุฏูุฏุฉ ููุงุณุชุทูุงุน. ููุงูุด ุขููุฉ ุงูุงูุชุฑุงุน ุงูุฌุฏูุฏุฉ ูู Linux AIO API (ูุงุฌูุฉ ููุนุงูุฌ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>io_submit: ุจุฏูู ูู epoll ูู ุชุณูุน ุจู ูู ูุจู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/439972/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sq/pn/nd/sqpnnd88db_ax0ark-6wxrqkobc.jpeg"><br><br>  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุชู ุฌุฐุจ ุงูุชุจุงู ุงููุคูู ุฅูู ููุงู ุนูู LWN ุญูู ูุงุฌูุฉ kernel ุฌุฏูุฏุฉ ููุงุณุชุทูุงุน.  ููุงูุด ุขููุฉ ุงูุงูุชุฑุงุน ุงูุฌุฏูุฏุฉ ูู Linux AIO API (ูุงุฌูุฉ ููุนุงูุฌุฉ ุงููููุงุช ุบูุฑ ุงููุชุฒุงููุฉ) ุ ูุงูุชู ุชูุช ุฅุถุงูุชูุง ุฅูู ุฅุตุฏุงุฑ kernel 4.18.  ุงูููุฑุฉ ูุซูุฑุฉ ููุบุงูุฉ: ููุชุฑุญ ูุคูู ุงูุชุตุญูุญ ุงุณุชุฎุฏุงู Linux AIO API ููุนูู ูุน ุงูุดุจูุฉ. <br><br>  ููู ุงูุชุธุฑ ูุญุธุฉ!  ุจุนุฏ ูู ุดูุก ุ ุชู ุฅูุดุงุก Linux AIO ููุนูู ูุน I / O ุบูุฑ ุงููุชุฒุงูู ูู ูุฑุต ูุขุฎุฑ!  ุงููููุงุช ุงูููุฌูุฏุฉ ุนูู ุงููุฑุต ููุณุช ูู ููุณ ุงุชุตุงูุงุช ุงูุดุจูุฉ.  ูู ูู ุงููููู ุงุณุชุฎุฏุงู Linux AIO API ููุดุจูุงุชุ <br><br>  ุงุชุถุญ ุ ูุนู ุ ูุฐุง ูููู!  ุชุดุฑุญ ูุฐู ุงูููุงูุฉ ููููุฉ ุงุณุชุฎุฏุงู ููุงุท ุงูููุฉ ูู Linux AIO API ูุฅูุดุงุก ุฎูุงุฏู ุดุจูุฉ ุฃุณุฑุน ูุฃูุถู. <br><br>  ููู ููุจุฏุฃ ุจุดุฑุญ ูุงููุฉ Linux AIO. <br><a name="habracut"></a><br><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ ููุธุงู Linux AIO </h1><br>  ูููุฑ Linux AIO ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุบูุฑ ุงููุชุฒุงูู ูู ูุฑุต ุฅูู ูุฑุต ูุจุฑูุงูุฌ ุงููุณุชุฎุฏู. <br><br>  ุชุงุฑูุฎูุง ุ ุนูู ููููุณ ุ ุชู ุญุธุฑ ุฌููุน ุนูููุงุช ุงููุฑุต.  ุฅุฐุง ุงุชุตูุช ุจู <code>open()</code> ุฃู <code>read()</code> ุฃู <code>write()</code> ุฃู <code>fsync()</code> ุ ูุณูุชููู ุงูุฏูู ุญุชู ุชุธูุฑ ุงูุจูุงูุงุช <code>fsync()</code> ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุฑุต.  ูุฐุง ุนุงุฏุฉ ูุง ููุซู ูุดููุฉ.  ุฅุฐุง ูู ููู ูุฏูู ุงูุนุฏูุฏ ูู ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุงูุฐุงูุฑุฉ ุงููุงููุฉ ุ ูุณุชููู ููุงููุงุช ุงููุธุงู ุจุงูุชุฏุฑูุฌ ูู ููุก ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุณูุนูู ูู ุดูุก ุจุณุฑุนุฉ ูุงููุฉ. <br><br>  ูุชูุงูุต ุฃุฏุงุก ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุนูุฏูุง ูููู ุนุฏุฏูู ูุจูุฑูุง ุจุฏุฑุฌุฉ ูุงููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุญุงูุงุช ููุงุนุฏ ุงูุจูุงูุงุช ูุงููููุงุก.  ุจุงููุณุจุฉ ุฅูู ูุฐู ุงูุชุทุจููุงุช ุ ูู ุบูุฑ ุงูููุจูู ุฅููุงู ุงูุนูููุฉ ุจุงููุงูู ูู ุฃุฌู ุงูุชุธุงุฑ ููุงููุฉ ูุธุงู <code>read()</code> ูุงุญุฏุฉ. <br><br>  ูุญู ูุฐู ุงููุดููุฉ ุ ูููู ููุชุทุจููุงุช ุงุณุชุฎุฏุงู ุซูุงุซ ุทุฑู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ุชุฌูุนุงุช ูุคุดุฑุงุช ุงูุชุฑุงุจุท ููุธุงุฆู ุญุธุฑ ุงูููุงููุงุช ูู ูุคุดุฑุงุช ุชุฑุงุจุท ูููุตูุฉ.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุนูู ุจูุง POSIX AIO ูู glibc (ูุง ุชุฎูุท ุจููู ูุจูู Linux AIO).  ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู IBM</a> .  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุญูููุง ุจูุง ุงููุดููุฉ ูู Cloudflare: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชุฎุฏู ุชุฌูุน</a> ูุคุดุฑุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฑุงุจุท</a> ููุงุชุตุงู <code>read()</code> ู <code>open()</code> . <br></li><li style=";text-align:right;direction:rtl">  ูู <code>posix_fadvise(2)</code> ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู ุงููุฑุต ุจุงุณุชุฎุฏุงู <code>posix_fadvise(2)</code> ููุชููู ุงูุฃูุถู. <br></li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู Linux AIO ุจุงูุงูุชุฑุงู ูุน ูุธุงู ุงููููุงุช XFS ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุญ ุงููููุงุช ูุน ุนูุงูุฉ O_DIRECT</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุฌูุจ ุงููุดุงูู ุบูุฑ ุงูููุซูุฉ</a> . <br></li></ol><br>  ููุน ุฐูู ุ ูุฅู ุฃูุง ูู ูุฐู ุงูุฃุณุงููุจ ูุซุงููุฉ.  ุญุชู Linux AIO ุ ุนูุฏ ุงุณุชุฎุฏุงูู ุจุฏูู ุชูููุฑ ุ ูููู ุญุธุฑู ูู ุงุณุชุฏุนุงุก <code>io_submit()</code> .  ุชู ุฐูุฑ ุฐูู ูุคุฎุฑูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู</a> ุขุฎุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญูู LWN</a> : <br><blockquote style=";text-align:right;direction:rtl">  "ุชุญุชูู ูุงุฌูุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุบูุฑ ุงููุชุฒุงููุฉ ููุธุงู Linux ุนูู ุงููุซูุฑ ูู ุงูููุงุฏ ูุนุฏุฏ ูููู ูู ุงููุคูุฏูู ุ ููู ูุนุธู ุงููุงุณ ูุชููุนูู ุนูู ุงูุฃูู ุนุฏู ุงูุชุฒุงูู ููู.  ูู ุงููุงูุน ุ ูููู ุญุธุฑ ุนูููุฉ AIO ูู ุงูููุงุฉ ูุนุฏุฏ ูู ุงูุฃุณุจุงุจ ูู ุงูููุงูู ุงูุชู ูุง ูุณุชุทูุน ูููุง ูุคุดุฑ ุชุฑุงุจุท ุงูุงุชุตุงู ุชุญููููุง. " </blockquote>  ุงูุขู ููุฏ ุฃุตุจุญูุง ูุนุฑู ููุงุท ุงูุถุนู ูู Linux AIO API ุ ุฏุนูุง ููุธุฑ ุฅูู ููุงุท ููุชูุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุจุณูุท ูุณุชุฎุฏู Linux AIO </h2><br>  ูู ุฃุฌู ุงุณุชุฎุฏุงู Linux AIO ุ ุนููู ุฃููุงู <a href="">ุชุญุฏูุฏ ููุงููุงุช ุงููุธุงู ุงูุฎูุณุฉ ุงูุถุฑูุฑูุฉ</a> ุจููุณู - glibc ูุง ุชููุฑ ููู. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุงูุงุชุตุงู ุจู <code>io_setup()</code> ูุชููุฆุฉ ุจููุฉ <code>aio_context</code> .  ุณูุนูุฏ kernel ุจูุคุดุฑ ุบูุฑ ุดูุงู ุฅูู ุงููููู. <br></li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ููููู ุงุณุชุฏุนุงุก <code>io_submit()</code> ูุฅุถุงูุฉ ูุชุฌู "ูุชู ุงูุชุญูู ูู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ" ุฅูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงููุนุงูุฌุฉ ูู ุดูู ุจููุฉ iocb ูููููุฉ. <br></li><li style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฃุฎูุฑูุง ุ ูููููุง ุงุณุชุฏุนุงุก <code>io_getevents()</code> ูุงูุงูุชุธุงุฑ ููุญุตูู ุนูู ุฅุฌุงุจุฉ ููู ูู ุดูู ูุชุฌู ูููุงูู <code>io_event</code> ุงููููููุฉ - ูุชุงุฆุฌ ูู ูู ูุชู iocb. <br></li></ol><br>  ููุงู ุซูุงููุฉ ุฃูุงูุฑ ููููู ุงุณุชุฎุฏุงููุง ูู iocb.  ุฃูุฑูู ูููุฑุงุกุฉ ุ ูููุง ูููุชุงุจุฉ ุ ูุฎูุงุฑุงู fsync ุ ูุฃูุฑ POLL ุ ุงูุฐู ุชูุช ุฅุถุงูุชู ูู ุงูุฅุตุฏุงุฑ kernel 4.18 (ุงูุฃูุฑ ุงูุซุงูู ูู NOOP): <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">IOCB_CMD_PREAD = 0, IOCB_CMD_PWRITE = 1, IOCB_CMD_FSYNC = 2, IOCB_CMD_FDSYNC = 3, IOCB_CMD_POLL = 5,   /* from 4.18 */ IOCB_CMD_NOOP = 6, IOCB_CMD_PREADV = 7, IOCB_CMD_PWRITEV = 8,</code> </pre> <br>  <a href=""><code> iocb</code></a> ุ ุงูุชู ูุชู ุชูุฑูุฑูุง ุฅูู ูุธููุฉ <code>io_submit</code> ุ ูุจูุฑุฉ ุฌุฏูุง ููุตููุฉ ููุนูู ูุน ุงููุฑุต.  ุฅููู ูุณุฎุชู ุงููุจุณุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct iocb { __u64 data;           /* user data */ ... __u16 aio_lio_opcode; /* see IOCB_CMD_ above */ ... __u32 aio_fildes;     /* file descriptor */ __u64 aio_buf;        /* pointer to buffer */ __u64 aio_nbytes;     /* buffer size */ ... }</code> </pre> <br>  ุจููุฉ <code>io_event</code> ุงููุงููุฉ ุงูุชู ุชุฑุฌุน <code>io_getevents</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct io_event { __u64  data; /* user data */ __u64  obj; /* pointer to request iocb */ __s64  res; /* result code for this event */ __s64  res2; /* secondary result */ };</code> </pre><br>  <b>ูุซุงู</b>  ุจุฑูุงูุฌ ุจุณูุท ูููู ุจูุฑุงุกุฉ ุงูููู / etc / passwd ุจุงุณุชุฎุฏุงู Linux AIO API: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">fd = open("/etc/passwd", O_RDONLY); aio_context_t ctx = 0; r = io_setup(128, &amp;ctx); char buf[4096]; struct iocb cb = {.aio_fildes = fd,                 .aio_lio_opcode = IOCB_CMD_PREAD,                 .aio_buf = (uint64_t)buf,                 .aio_nbytes = sizeof(buf)}; struct iocb *list_of_iocb[1] = {&amp;cb}; r = io_submit(ctx, 1, list_of_iocb); struct io_event events[1] = {{0}}; r = io_getevents(ctx, 1, 1, events, NULL); bytes_read = events[0].res; printf("read %lld bytes from /etc/passwd\n", bytes_read);</code> </pre> <br>  ุงููุตุงุฏุฑ ุงููุงููุฉ ูุชููุฑุฉ ุ ุจุงูุทุจุน ุ <a href="">ุนูู ุฌูุซุจ</a> .  ููุง ูู ุงูุฅุฎุฑุงุฌ ุงูุถูู ููุฐุง ุงูุจุฑูุงูุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">openat(AT_FDCWD, "/etc/passwd", O_RDONLY) io_setup(128, [0x7f4fd60ea000]) io_submit(0x7f4fd60ea000, 1, [{aio_lio_opcode=IOCB_CMD_PREAD, aio_fildes=3, aio_buf=0x7ffc5ff703d0, aio_nbytes=4096, aio_offset=0}]) io_getevents(0x7f4fd60ea000, 1, 1, [{data=0, obj=0x7ffc5ff70390, res=2494, res2=0}], NULL)</code> </pre> <br>  ูู ุดูุก ุณุงุฑ ุนูู ูุง ูุฑุงู ุ ูููู ุงููุฑุงุกุฉ ูู ุงููุฑุต ูู ุชูู ูุชุฒุงููุฉ: ุชู ุญุธุฑ ุงุณุชุฏุนุงุก io_submit ูููุฐุช ูู ุงูุนูู ุ <code>io_getevents</code> ุชูููุฐ ูุธููุฉ <code>io_getevents</code> ุนูู ุงูููุฑ.  ูุฏ ูุญุงูู ุฃู ููุฑุฃ ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ูููู ูุฐุง ูุชุทูุจ ุนูุงูุฉ O_DIRECT ุ ูุงูุชู ุชุชุฌุงูุฒ ุนูููุงุช ุงููุฑุต ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. <br><br>  ุฏุนููุง ุชูุถูุญ ููููุฉ ุชุฃููู <code>io_submit</code> ุนูู ุงููููุงุช ุงูุนุงุฏูุฉ.  ูููุง ููู ูุซุงู ูุดุงุจู ููุธูุฑ ุฅุฎุฑุงุฌ ุงูุดุฑุงุฆุท ูุชูุฌุฉ ูุฑุงุกุฉ ูุชูุฉ 1 ุฌูุฌุงุจุงูุช ูู <code>/dev/zero</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">io_submit(0x7fe1e800a000, 1, [{aio_lio_opcode=IOCB_CMD_PREAD, aio_fildes=3, aio_buf=0x7fe1a79f4000, aio_nbytes=1073741824, aio_offset=0}]) \   = 1 &lt;0.738380&gt; io_getevents(0x7fe1e800a000, 1, 1, [{data=0, obj=0x7fffb9588910, res=1073741824, res2=0}], NULL) \   = 1 &lt;0.000015&gt;</code> </pre> <br>  ุฃูููุช ุงูููุงุฉ 738 ูููู ุซุงููุฉ ุนูู ููุงููุฉ <code>io_submit</code> ู 15 ns ููุท ุนูู <code>io_getevents</code> .  ูุชุตุฑู ุจุดูู ูุดุงุจู ูุน ุงุชุตุงูุงุช ุงูุดุจูุฉ - ูุชู ุชูููุฐ ูู ุงูุนูู ุจูุงุณุทุฉ <code>io_submit</code> . <br><br><img src="https://habrastorage.org/webt/e6/kw/kf/e6kwkfffjb-qvsfqgfdyl2ibmaq.jpeg"><br>  <a href="">Photo</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Helix84</a> CC / BY-SA / 3.0 <br><br><h2 style=";text-align:right;direction:rtl">  ููููุณ AIO ูุงูุดุจูุฉ </h2><br>  ูููู ุชุทุจูู <code>io_submit</code> ูุชุญูุธูุง ุชูุงููุง: ุฅุฐุง ูู ูุชู ูุชุญ ูุงุตู ุงูููู ุงูุฐู ุชู ุชูุฑูุฑู ุจุนูุงูุฉ O_DIRECT ุ ูุณุชููู ุงูุฏุงูุฉ ุจุจุณุงุทุฉ ุจุญุธุฑ ุงูุฅุฌุฑุงุก ุงููุญุฏุฏ ูุชูููุฐู.  ูู ุญุงูุฉ ุงุชุตุงูุงุช ุงูุดุจูุฉ ุ ูุฐุง ูุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุธุฑ ุงูุงุชุตุงูุงุช ุ ุณููุชุธุฑ IOCV_CMD_PREAD ุญุฒูุฉ ุงุณุชุฌุงุจุฉ ุ <br></li><li style=";text-align:right;direction:rtl">  ููุงุชุตุงูุงุช ุบูุฑ ุงููุญุธูุฑุฉ ุ ุณูุนูุฏ IOCB_CMD_PREAD ุงูููุฏ -11 (EAGAIN). <br></li></ul><br>  ูุชู ุงุณุชุฎุฏุงู ููุณ ุงูุฏูุงูุงุช ุฃูุถูุง ูู ุงุณุชุฏุนุงุก ูุธุงู <code>read()</code> ุงูุนุงุฏู ุ ูุฐูู ูููููุง ุงูููู ุฃู io_submit ุนูุฏ ุงูุนูู ูุน ุงุชุตุงูุงุช ุงูุดุจูุฉ ููุณุช ุฃูุซุฑ ุฐูุงุกู ูู ููุงููุงุช <code>read() / write()</code> ุงููุฏููุฉ ุงูุฌูุฏุฉ. <br><br>  ูู ุงูููู ููุงุญุธุฉ ุฃู ุทูุจุงุช <code>iocb</code> ุชูููุฐูุง ุจูุงุณุทุฉ ุงูููุงุฉ ุจุงูุชุณูุณู. <br><br>  ุนูู ุงูุฑุบู ูู ุฃู Linux AIO ูู ูุณุงุนุฏูุง ูู ุนูููุงุช ุบูุฑ ูุชุฒุงููุฉ ุ ุฅูุง ุฃูู ูููู ุงุณุชุฎุฏุงูู ูุฏูุฌ ููุงููุงุช ุงููุธุงู ูู ูุฌููุนุงุช. <br><br>  ุฅุฐุง ูุงู ุฎุงุฏู ุงูููุจ ูุญุชุงุฌ ุฅูู ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุจูุงูุงุช ูู ูุฆุงุช ุงุชุตุงูุงุช ุงูุดุจูุฉ ุ ูุฅู ุงุณุชุฎุฏุงู <code>io_submit</code> ูุฏ ูููู ููุฑุฉ ุฑุงุฆุนุฉ ุ ูุฃูู ูุชุฌูุจ ูุฆุงุช ุงูููุงููุงุช ูุฅุฑุณุงููุง.  ุณูุคุฏู ุฐูู ุฅูู ุชุญุณูู ุงูุฃุฏุงุก - ูุง ูุนุฏ ุงูุชุจุฏูู ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู ุฅูู ุงูููุงุฉ ูุงูุนูุณ ุตุญูุญูุง ุ ุฎุงุตุฉ ุจุนุฏ ุชุทุจูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฏุงุจูุฑ ููุงูุญุฉ Specter ู Meltdown</a> . <br><br><table style=";text-align:right;direction:rtl"><tbody><tr><td></td><td align="center">  <b>ูุงุญุฏ ุงูุนุงุฒูุฉ</b> <br></td><td align="center">  <b>ูุฎุงุฒู ูุชุนุฏุฏุฉ</b> <br></td></tr><tr><td>  ูุงุตู ููู ูุงุญุฏ <br></td><td>  ูุฑุงุกุฉ () <br></td><td>  readv () <br></td></tr><tr><td>  ูุงุตูุงุช ุงููููุงุช ุงููุชุนุฏุฏุฉ <br></td><td>  io_submit + IOCB_CMD_PREAD <br></td><td>  io_submit + IOCB_CMD_PREADV <br></td></tr></tbody></table><br>  ูุชูุถูุญ ุชุฌููุน ููุงููุงุช ุงููุธุงู ูู ุญุฒู ุจุงุณุชุฎุฏุงู <code>io_submit</code> ุฏุนูุง ููุชุจ ุจุฑูุงูุฌูุง ุตุบูุฑูุง ูุฑุณู ุจูุงูุงุช ูู ุงุชุตุงู TCP ุฅูู ุขุฎุฑ.  ูู ุฃุจุณุท ุฃุดูุงูู (ุจุฏูู Linux AIO) ุ ูุจุฏู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">while True: d = sd1.read(4096) sd2.write(d)</code> </pre> <br>  ูููููุง ุงูุชุนุจูุฑ ุนู ููุณ ุงููุธููุฉ ูู ุฎูุงู Linux AIO.  ุณูููู ุงูุฑูุฒ ูู ูุฐู ุงูุญุงูุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct iocb cb[2] = {{.aio_fildes = sd2,                     .aio_lio_opcode = IOCB_CMD_PWRITE,                     .aio_buf = (uint64_t)&amp;buf[0],                     .aio_nbytes = 0},                    {.aio_fildes = sd1,                    .aio_lio_opcode = IOCB_CMD_PREAD,                    .aio_buf = (uint64_t)&amp;buf[0],                    .aio_nbytes = BUF_SZ}}; struct iocb *list_of_iocb[2] = {&amp;cb[0], &amp;cb[1]}; while(1) { r = io_submit(ctx, 2, list_of_iocb); struct io_event events[2] = {}; r = io_getevents(ctx, 2, 2, events, NULL); cb[0].aio_nbytes = events[1].res; }</code> </pre> <br>  ูุถูู ูุฐุง ุงูุฑูุฒ ูุธููุชูู ุฅูู <code>io_submit</code> : ุฃููุงู ุทูุจ ูุชุงุจุฉ ุฅูู <code>sd2</code> ุ ุซู ุทูุจ ูุฑุงุกุฉ ูู sd1.  ุจุนุฏ ุงููุฑุงุกุฉ ุ ุชููู ุงูุดูุฑุฉ ุจุชุตุญูุญ ุญุฌู ูุฎุฒู ุงููุชุงุจุฉ ุงููุคูุช ูุชูุฑุงุฑ ุงูุญููุฉ ูู ุงูุจุฏุงูุฉ.  ููุงู ุฎุฏุนุฉ ูุงุญุฏุฉ: ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู ุชุญุฏุซ ูููุง ุงููุชุงุจุฉ ูุน ูุฌูุฏ ูุฎุฒู ูุคูุช ุจุงูุญุฌู 0. ูุนุฏ ุฐูู ุถุฑูุฑููุง ูุฃู ูุฏููุง ุงููุฏุฑุฉ ุนูู ุงูุฌูุน ุจูู ูุชุงุจุฉ + ูุฑุงุกุฉ ูู ููุงููุฉ <code>io_submit</code> ูุงุญุฏุฉ (ูููู ููุณ ูููุฑุงุกุฉ + ุงููุชุงุจุฉ). <br><br>  ูู ูุฐุง ุงูุฑูุฒ ุฃุณุฑุน ูู <code>read()</code> ุงูุนุงุฏูุฉ <code>read()</code> / <code>write()</code> ุ  ููุณ ุจุนุฏ.  ููุง ุงูุฅุตุฏุงุฑูู ูุณุชุฎุฏูุงู ููุงููุงุช ุงููุธุงู: ูุฑุงุกุฉ + ูุชุงุจุฉ ู io_submit + io_getevents.  ูููู ุ ูุญุณู ุงูุญุธ ุ ูููู ุชุญุณูู ุงูุฑูุฒ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชุฎูุต ูู io_getevents </h2><br>  ูู ููุช ุงูุชุดุบูู <code>io_setup()</code> ูุฎุตุต kernel ุนุฏุฉ ุตูุญุงุช ูู ุงูุฐุงูุฑุฉ ููุฐู ุงูุนูููุฉ.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุชุจุฏู ุจูุง ูุชูุฉ ุงูุฐุงูุฑุฉ / ุฎุฑุงุฆุท proc //: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">marek:~$ cat /proc/`pidof -s aio_passwd`/maps ... 7f7db8f60000-7f7db8f63000 rw-s 00000000 00:12 2314562     /[aio] (deleted) ...</code> </pre> <br>  ุชู ุชุฎุตูุต ูุชูุฉ ุงูุฐุงูุฑุฉ [aio] (12 ูููู ุจุงูุช ูู ูุฐู ุงูุญุงูุฉ) <code>io_setup</code> .  ูุชู ุงุณุชุฎุฏุงูู ูููุฎุฒู ุงููุคูุช ุงูุฏุงุฆุฑู ุญูุซ ูุชู ุชุฎุฒูู ุงูุฃุญุฏุงุซ.  ูู ูุนุธู ุงูุญุงูุงุช ุ ูุง ููุฌุฏ ุณุจุจ ููุงุชุตุงู ุจู <code>io_getevents</code> - ูููู ุงูุญุตูู ุนูู ุจูุงูุงุช ุฅููุงู ุงูุญุฏุซ ูู ุงููุฎุฒู ุงููุคูุช ุงูุญููู ุฏูู ุงูุญุงุฌุฉ ุฅูู ุงูุชุจุฏูู ุฅูู ูุถุน kernel.  ููุง ูู ุงูุฅุตุฏุงุฑ ุงูุตุญูุญ ูู ุงูููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">int io_getevents(aio_context_t ctx, long min_nr, long max_nr,                struct io_event *events, struct timespec *timeout) {   int i = 0;   struct aio_ring *ring = (struct aio_ring*)ctx;   if (ring == NULL || ring-&gt;magic != AIO_RING_MAGIC) {       goto do_syscall;   }   while (i &lt; max_nr) {       unsigned head = ring-&gt;head;       if (head == ring-&gt;tail) {           /* There are no more completions */           break;       } else {           /* There is another completion to reap */           events[i] = ring-&gt;events[head];           read_barrier();           ring-&gt;head = (head + 1) % ring-&gt;nr;           i++;       }   }   if (i == 0 &amp;&amp; timeout != NULL &amp;&amp; timeout-&gt;tv_sec == 0 &amp;&amp; timeout-&gt;tv_nsec == 0) {       /* Requested non blocking operation. */       return 0;   }   if (i &amp;&amp; i &gt;= min_nr) {       return i;   } do_syscall:   return syscall(__NR_io_getevents, ctx, min_nr-i, max_nr-i, &amp;events[i], timeout); }</code> </pre> <br>  ุงููุณุฎุฉ ุงููุงููุฉ ูู ุงูููุฏ ูุชุงุญุฉ <a href="">ุนูู ุฌูุซุจ</a> .  ุชู ุชูุซูู ูุงุฌูุฉ ูุฐุง ุงููุฎุฒู ุงููุคูุช ุงูุญููู ุจุดูู ุณูุฆ ุ ูุงู ุงููุคูู ุจุชูููู ุงูููุฏ ูู ูุดุฑูุน <a href="">axboe / fio</a> . <br><br>  ุจุนุฏ ูุฐุง ุงูุชุบููุฑ ุ ูุชุทูุจ ุฅุตุฏุงุฑูุง ูู ุงูููุฏ ุงูุฐู ูุณุชุฎุฏู Linux AIO ููุงููุฉ ูุธุงู ูุงุญุฏ ููุท ูู ุญููุฉ ุ ููุง ูุฌุนูู ุฃุณุฑุน ููููุงู ูู ุงูููุฏ ุงูุฃุตูู ุจุงุณุชุฎุฏุงู read + write. <br><br><img src="https://habrastorage.org/webt/xq/er/7t/xqer7tve9zpg23gh2zfjjl_bb-i.jpeg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุตูุฑ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุทุงุฑ ุตูุฑ</a> CC / BY-SA / 2.0 <br><br><h2 style=";text-align:right;direction:rtl">  Epoll ุงูุจุฏูู </h2><br>  ูุน ุฅุถุงูุฉ IOCB_CMD_POLL ุฅูู ุฅุตุฏุงุฑ kernel 4.18 ุ ุฃุตุจุญ ูู ุงููููู ุงุณุชุฎุฏุงู <code>io_submit</code> ูุจุฏูู ูู select / poll / epoll.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชููุน ูุฐุง ุงูุฑูุฒ ุจูุงูุงุช ูู ุงุชุตุงู ุงูุดุจูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">struct iocb cb = {.aio_fildes = sd,                 .aio_lio_opcode = IOCB_CMD_POLL,                 .aio_buf = POLLIN}; struct iocb *list_of_iocb[1] = {&amp;cb}; r = io_submit(ctx, 1, list_of_iocb); r = io_getevents(ctx, 1, 1, events, NULL);</code> </pre><br>  <a href="">ููุฏ ูุงูู</a> .  ููุง ูู ูุงุชุฌ ุงูุถูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">io_submit(0x7fe44bddd000, 1, [{aio_lio_opcode=IOCB_CMD_POLL, aio_fildes=3}]) \   = 1 &lt;0.000015&gt; io_getevents(0x7fe44bddd000, 1, 1, [{data=0, obj=0x7ffef65c11a8, res=1, res2=0}], NULL) \   = 1 &lt;1.000377&gt;</code> </pre> <br>  ููุง ุชุฑูู ุ ูุฌุญุช ูุฐู ุงููุฑุฉ ูู ุนุฏู ุงูุชุฒุงูู: ุชู ุชูููุฐ io_submit ุนูู ุงูููุฑ ุ <code>io_getevents</code> ููุฏุฉ ุซุงููุฉ ูุงุญุฏุฉ ุ ูู ุงูุชุธุงุฑ ุงูุจูุงูุงุช.  ูููู ุงุณุชุฎุฏุงู ูุฐุง ุจุฏูุงู ูู ุงุณุชุฏุนุงุก ุงููุธุงู <code>epoll_wait()</code> . <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูุชุทูุจ ุงูุนูู ูุน <code>epoll</code> ุนุงุฏุฉู ุงุณุชุฎุฏุงู ููุงููุงุช ุงููุธุงู epoll_ctl.  ููุญุงูู ูุทูุฑู ุงูุชุทุจููุงุช ุชุฌูุจ ุงูููุงููุงุช ุงููุชูุฑุฑุฉ ููุฐู ุงููุธููุฉ - ูููู ุงูุฃุณุจุงุจ ุ ูุง ุนููู ุณูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุงุกุฉ</a> ุฅุดุงุฑุงุช EPOLLONESHOT ู EPOLLET <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงูุฏููู</a> .  ุจุงุณุชุฎุฏุงู io_submit ููุงุณุชุนูุงู ุนู ุงูุงุชุตุงูุงุช ุ ููููู ุชุฌูุจ ูุฐู ุงูุตุนูุจุงุช ูููุงููุงุช ุงููุธุงู ุงูุฅุถุงููุฉ.  ููุท ุฃุถู ุงูุงุชุตุงูุงุช ุฅูู ูุชุฌู iocb ุ ุงุชุตู ุจู io_submit ูุฑุฉ ูุงุญุฏุฉ ูุงูุชุธุฑ ุงูุชูููุฐ.  ูู ุดูุก ุจุณูุท ุฌุฏุง. <br><br><h2 style=";text-align:right;direction:rtl">  ููุฎุต </h2><br>  ูู ูุฐุง ุงูููุดูุฑ ุ ูููุง ุจุชุบุทูุฉ Linux AIO API.  ุชู ุชุตููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฐู ูู ุงูุฃุตู ููุนูู ูุน ุงููุฑุต ุ ูููููุง ุชุนูู ุฃูุถูุง ูุน ุงุชุตุงูุงุช ุงูุดุจูุฉ.  ููุน ุฐูู ุ ุจุฎูุงู ุงูููุงููุงุช ุงูุนุงุฏูุฉ () + write () ุ ูุฅู ุงุณุชุฎุฏุงู io_submit ูุณูุญ ูู ุจุชุฌููุน ููุงููุงุช ุงููุธุงู ูุจุงูุชุงูู ุฒูุงุฏุฉ ุงูุฃุฏุงุก. <br><br>  ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ kernel 4.18 ุ ูููู ุงุณุชุฎุฏุงู <code>io_submit  io_getevents</code> ูู ุญุงูุฉ ุงุชุตุงูุงุช ุงูุดุจูุฉ ูุฃุญุฏุงุซ ุงููููุฐุฌ POLLIN ู POLLOUT.  ูุฐุง ุจุฏูู ู <code>epoll()</code> . <br><br>  ุฃุณุชุทูุน ุฃู ุฃุชุฎูู ุฎุฏูุฉ ุดุจูุฉ ุชุณุชุฎุฏู ููุท <code>io_submit  io_getevents</code> ุจุฏูุงู ูู ุงููุฌููุนุฉ ุงูููุงุณูุฉ ูู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ู epoll_ctl ู epoll_wait.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุฃู ุชุนุทู ููุฒุฉ ุชุฌููุน ูุธุงู ุงูููุงููุงุช ูู <code>io_submit</code> ููุฒุฉ ูุจูุฑุฉ ุ ุณูููู ูุซู ูุฐุง ุงูุฎุงุฏู ุฃุณุฑุน ุจูุซูุฑ. <br><br>  ูุณูุก ุงูุญุธ ุ ุญุชู ุจุนุฏ ุงูุชุญุณููุงุช ุงูุฃุฎูุฑุฉ ุงูุชู ุทุฑุฃุช ุนูู Linux AIO API ุ ุชุณุชูุฑ ุงูููุงูุดุงุช ุญูู ูุงุฆุฏุชูุง.  ูู ุงููุนุฑูู ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุณ ููุฑูู</a> : <br><br><blockquote style=";text-align:right;direction:rtl">  "ุชุนุฏ AIO ูุซุงููุง ูุธูุนูุง ุนูู ุงูุชุตููู ุงููุฑุชูุน ููุฑูุจุฉ ุ ุญูุซ ูููู ุงูุนุฐุฑ ุงูุฑุฆูุณู ูู ุฐูู:" ููุฏ ุชูุตู ูุฐุง ุฅูู ุฃุดุฎุงุต ุขุฎุฑูู ุฃูู ูููุจุฉ ุ ูุฐูู ูุชุนูู ุนูููุง ุงูุงูุชุซุงู ููุชูุงูู ุญุชู ูุชููู ูุทูุฑู ููุงุนุฏ ุงูุจูุงูุงุช (ุงูุฐูู ูุงุฏุฑุงู ูุง ูุชุฐูููู ุฐูู) ูู ุงุณุชุฎุฏุงูู. "  ููู AIO ูุงู ุฏุงุฆููุง ุดุฏูุฏ ุงูููู. " </blockquote><br>  ุจุฐูุช ุนุฏุฉ ูุญุงููุงุช ูุฅูุดุงุก ูุงุฌูุฉ ุฃูุถู ูุชุฌููุน ุงูููุงููุงุช ูุนุฏู ุงูุชุฒุงูู ุ ููููุง ูุงูุช ุชูุชูุฑ ุฅูู ุฑุคูุฉ ูุดุชุฑูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชุณูุญ <a href="">ุงูุฅุถุงูุฉ</a> ุงูุญุฏูุซุฉ <a href="">ูู sendto (MSG_ZEROCOPY)</a> ุจููู ุจูุงูุงุช ุบูุฑ ูุชุฒุงูู ุญููุง ุ ููููุง ูุง ุชูุต ุนูู ุงูุชุฌููุน.  ูููุฑ <code>io_submit</code> ููุชุฌููุน ุ ูููู ููุณ ุงูุชุฒุงูู.  ูุงูุฃุณูุฃ ูู ุฐูู - ููุงู ุญุงูููุง ุซูุงุซ ุทุฑู ูุชูุฏูู ุฃุญุฏุงุซ ุบูุฑ ูุชุฒุงููุฉ ุนูู Linux: ุงูุฅุดุงุฑุงุช ู <code>io_getevents</code> ู MSG_ERRQUEUE. <br><br>  ุนูู ุฃู ุญุงู ุ ูู ุงูุฑุงุฆุน ุฃู ุชููู ููุงู ุทุฑู ุฌุฏูุฏุฉ ูุชุณุฑูุน ุนูู ุฎุฏูุงุช ุงูุดุจูุฉ. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439972/">https://habr.com/ru/post/ar439972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439962/index.html">ูุญู ูุนูู ูุน ููุชุจ ุฎุฏูุฉ Atlassian ุ ูุญุตู ุนูู ุฃูุตู ุงุณุชูุงุฏุฉ ูู ุงููููู ุงูุฅุถุงูู Riada Insight - ุชูุฑูุฑ ูู ุงุฌุชูุงุน ูุฌููุนุฉ ูุณุชุฎุฏูู Atlassian</a></li>
<li><a href="../ar439964/index.html">Runc CVE-2019-5736 ุงูุซุบุฑุฉ ุงูุฃูููุฉ ูู ูุถูู</a></li>
<li><a href="../ar439966/index.html">ูุญูู ุจุณูุท ููุนูููุงุช ุงูุญุณุงุจูุฉ</a></li>
<li><a href="../ar439968/index.html">ูุณุงุญุฉ ุงูุฌูู ููุฑุตุฉ ุงููุฑุต</a></li>
<li><a href="../ar439970/index.html">ุชูุฑูุฑ ุนู ุงููุดุงูู ูุฅููุงููุฉ ุงููุตูู ุฅูู ุงูุฅูุชุฑูุช ูู 2018-2019</a></li>
<li><a href="../ar439974/index.html">ุงูุชุญูู ุฑุดููุฉ ุงูุดุฎุตูุฉ: ุฑุญูุฉ ูุฑูุฉ ุฅูู ุงูุฅูุชุงุฌูุฉ</a></li>
<li><a href="../ar439976/index.html">ูู ุณุชููู Node.js ุฏุงุฆููุง ุฃุจุทุฃ ูู Golangุ</a></li>
<li><a href="../ar439978/index.html">ุนุงูู ุฅุฑุณุงุก ุงูุชุนูู ุ ุงูุฌุฒุก 2: ุงูุดุฑูุท ูุงูููุงููู</a></li>
<li><a href="../ar439980/index.html">ุชุนูู ุนุงูู ุงููููุงุก ุ ุงูุฌุฒุก 3: ูููุงุช Dockerfile</a></li>
<li><a href="../ar439982/index.html">ุฑุฏ ูุนู ุชุนูููู ุ ุงูุฌุฒุก 16: ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ ูู ุงูุนูู ุนูู ุชุทุจูู TODO ุ ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>