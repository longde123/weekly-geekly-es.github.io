<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìø üêøÔ∏è üõµ EDA de um √¢ngulo diferente üßëüèø‚Äçü§ù‚Äçüßëüèº üö¥üèº üè§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="N√£o falaremos sobre comida, mas sobre an√°lise explorat√≥ria de dados (EDA ), que √© um prel√∫dio para qualquer ML severa. 

 Sejamos honestos, o processo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>EDA de um √¢ngulo diferente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480532/"><img src="https://habrastorage.org/webt/zr/g9/ed/zrg9ed_nsynok9a9aa2st6s0vjo.jpeg" alt="imagem"><br><br>  N√£o falaremos sobre comida, mas sobre <a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">an√°lise explorat√≥ria de dados (EDA</a> ), que √© um prel√∫dio para qualquer ML severa. <br><br>  Sejamos honestos, o processo √© bastante chato e, para obter pelo menos algumas informa√ß√µes significativas sobre nossos dados, voc√™ precisa gastar tempo suficiente ativamente usando sua biblioteca de visualiza√ß√£o favorita. <br><br>  Agora imagine que somos bastante pregui√ßosos (mas curiosos) e seguiremos este postulado ao longo deste artigo. <br><a name="habracut"></a><br>  Com base nisso, nos perguntamos a seguinte pergunta: existe uma ferramenta t√£o complicada na natureza que permitiria pressionar CTRL + ENTER no seu IDE favorito e exibir em uma √∫nica tela (sem rolar para baixo e in√∫meras facetas microsc√≥picas) uma imagem completa com informa√ß√µes √∫teis sobre nosso conjunto de dados? <br><br>  Ao mesmo tempo, lembramos de um pensamento diferente - se esse instrumento existir, ele n√£o substituir√° o EDA cl√°ssico, mas ser√° uma grande ajuda para n√≥s nesses casos em que voc√™ n√£o precisar√° gastar horas em visualiza√ß√£o para enfatizar rapidamente os principais padr√µes em nossos dados. <br><br>  A estrutura deste artigo: <br><br><ol><li>  <a href="https://habr.com/ru/post/480532/">Pr√©-processamento pequeno</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Visualiza√ß√£o do preditor</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Discretiza√ß√£o de vari√°veis</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Correlationfunnel</a> </li><li>  <a href="https://habr.com/ru/post/480532/">Correla√ß√µes cruzadas classificadas</a> </li><li>  <a href="https://habr.com/ru/post/480532/">easyalluvial</a> </li></ol><br>  Terminamos com o introdut√≥rio e tomamos como base um exemplo pr√°tico. <br><br><div class="spoiler">  <b class="spoiler_title">Abordagem de exemplo</b> <div class="spoiler_text">  <sub><i>Inicialmente, eu queria pegar uma matriz de dados obscura, mas no final percebi que, por exemplo, isso n√£o seria muito bom - os padr√µes encontrados podem parecer n√£o √≥bvios e, portanto, controversos, mas nosso objetivo √© preparar a matriz com algoritmos que n√£o possuem informa√ß√µes a priori e nos mostrar√£o o que j√° sabemos, confirmando nossa viabilidade.</i></sub> <sub><br></sub> <br></div></div><br>  O Titanic me pareceu o mais conveniente como exemplo, seu tamanho n√£o √© muito pequeno como o Iris, possui vari√°veis ‚Äã‚Äãn√£o informativas, √© bem estudado e possui preditores claros e, principalmente, uma base hist√≥rica. <br><br>  Al√©m disso, encontrei um artigo sobre Habr√© em que o autor conduziu uma EDA bastante meticulosa desse conjunto de dados e, com base nas imagens, demonstrei as descobertas.  Este ser√° um tipo de nossa linha de base. <br><br>  Link para o artigo com um grande nome para nossa "Linha de base_EDA": <br>  <a href="https://habr.com/ru/company/mlclass/blog/270973/">Titanic no Kaggle: Voc√™ n√£o vai ler este post at√© o fim</a> . <br><br>  Para n√£o se preocupar com o download / leitura de csv da rede, capturamos imediatamente o conjunto de dados original do CRAN <br><br><pre><code class="plaintext hljs">install.packages("titanic") data("titanic_train",package="titanic")</code> </pre> <br><h1><a name="preprocess"></a>  Breve pr√©-processamento </h1><br>  Este exemplo √© t√£o circulado na rede ao pr√©-processar para cima e para baixo que n√£o vou particularmente abordar este t√≥pico, estou fazendo coisas b√°sicas: extraio o nome da gonoratora (t√≠tulo) como um importante preditor e o uso para preencher as diferen√ßas de idade. <br><br><pre> <code class="plaintext hljs">library(tidyverse) titanic_train %&gt;% str d &lt;- titanic_train %&gt;% as_tibble %&gt;% mutate(title=str_extract(Name,"\\w+\\.") %&gt;% str_replace(fixed("."),"")) %&gt;% mutate(title=case_when(title %in% c('Mlle','Ms')~'Miss', #   title=='Mme'~ 'Mrs', title %in% c('Capt','Don','Major','Sir','Jonkheer', 'Col')~'Sir', title %in% c('Dona', 'Lady', 'Countess')~'Lady', TRUE~title)) %&gt;% mutate(title=as_factor(title), Survived=factor(Survived,levels = c(0,1),labels=c("no","yes")), Sex=as_factor(Sex), Pclass=factor(Pclass,ordered = T)) %&gt;% group_by(title) %&gt;% #  -      mutate(Age=replace_na(Age,replace = median(Age,na.rm = T))) %&gt;% ungroup #             table(d$title,d$Sex)</code> </pre><br><div class="scrollable-table"><table><tbody><tr><th>  t√≠tulo </th><th>  macho </th><th>  f√™mea </th></tr><tr><td>  Senhor </td><td>  517 </td><td>  0 0 </td></tr><tr><td>  Senhora </td><td>  0 0 </td><td>  126 </td></tr><tr><td>  Senhorita </td><td>  0 0 </td><td>  185 </td></tr><tr><td>  Mestre </td><td>  40. </td><td>  0 0 </td></tr><tr><td>  Senhor </td><td>  8 </td><td>  0 0 </td></tr><tr><td>  Rev </td><td>  6 </td><td>  0 0 </td></tr><tr><td>  Dr </td><td>  6 </td><td>  1 </td></tr><tr><td>  Senhora </td><td>  0 0 </td><td>  2 </td></tr></tbody></table></div><br><h1><a name="lessinform"></a>  Nem todos os iogurtes s√£o igualmente saud√°veis ‚Äã‚Äã... </h1><br>  Normalmente, no in√≠cio da an√°lise, deixo de lado as vari√°veis ‚Äã‚Äãn√£o informativas (deixo de lado e n√£o as excluo permanentemente, porque quando eu tiro o m√°ximo proveito do modelo, a engenharia de algumas das vari√°veis ‚Äã‚Äãpendentes fornece uma certa porcentagem do ganho de qualidade do modelo). <br><br>  As m√©tricas para avaliar a "utilidade" de uma vari√°vel s√£o freqRatio (a propor√ß√£o das frequ√™ncias do valor mais popular em rela√ß√£o ao segundo valor em frequ√™ncia) e percentUnique (pot√™ncia ou cardinalidade - a propor√ß√£o de um n√∫mero √∫nico de valores do n√∫mero total de valores) <br>  Ajuda detalhada pode ser vista no pacote de intercala√ß√£o <br> <code>?caret::nearZeroVar</code> <br> <br><pre> <code class="plaintext hljs">(feat.scan &lt;- caret::nearZeroVar(x = d,saveMetrics = T) %&gt;% rownames_to_column("featName") %&gt;% as_tibble)</code> </pre> <br><img src="https://habrastorage.org/webt/8q/hs/ji/8qhsji8_xsdpbtizf6bqvghdk3a.jpeg" alt="imagem"><br><br>  √â mais conveniente para mim monitorar vari√°veis ‚Äã‚Äãem um plano bidimensional (registrando os dois eixos para que os pontos n√£o sejam colocados em excesso em uma pequena pilha devido a pontos extremos). <br>  Eu nunca me perguntei se essa etapa √© a EDA, mas enquanto escrevia este artigo, pensei: agora estamos realizando uma an√°lise explorat√≥ria de uma certa utilidade dos preditores, a avalia√ß√£o visual deles; <br><br><pre> <code class="plaintext hljs"># install.packages("ggrepel") library(ggrepel) ggplot(feat.scan,aes(x=percentUnique,y=freqRatio,label=featName,col=featName))+ geom_point(size=2)+ geom_text_repel(data = feat.scan,size=5)+scale_x_log10()+scale_y_log10()+theme_bw()</code> </pre><br><img src="https://habrastorage.org/webt/7v/fc/ec/7vfcecjnvcaog5hh93sbziy8ouc.jpeg" alt="imagem"><br><br>  Consideramos preditores extremos como n√£o informativos, tanto em termos de pot√™ncia (eixo X) ou raz√£o de frequ√™ncia (eixo Y) e, portanto, deixamos de lado: <br>  PassengerId  Nome;  Ticket  Cabine <br><br><pre> <code class="plaintext hljs">useless.feature &lt;- c("PassengerId","Name","Ticket","Cabin") d &lt;- d %&gt;% select_at(vars(-useless.feature))</code> </pre><br><h1><a name="discret"></a>  Este universo √© discreto </h1><br>  Para entender como as bibliotecas listadas abaixo preparam os dados - nesta se√ß√£o, mostramos com pequenos exemplos o que acontece nessas bibliotecas no est√°gio de prepara√ß√£o dos dados. <br><br>  Na primeira etapa, √© necess√°rio trazer todos os dados para um √∫nico tipo - geralmente os dados em um conjunto podem ser categ√≥ricos e num√©ricos; al√©m disso, os n√∫meros podem ter discrep√¢ncias e os dados categ√≥ricos podem ser categorias raras. <br><br>  Para converter vari√°veis ‚Äã‚Äãcont√≠nuas em categ√≥ricas, podemos decompor nossos n√∫meros em compartimentos com um determinado per√≠odo de amostragem. <br><br>  O exemplo mais simples de decomposi√ß√£o em 5 bin: <br><br><pre> <code class="plaintext hljs">iris %&gt;% as_tibble %&gt;% mutate_if(is.numeric,.funs = ggplot2::cut_number,n=5)</code> </pre><br><img src="https://habrastorage.org/webt/mz/bf/wb/mzbfwb5-xy8iddrjy7gvh_4mfvk.jpeg" alt="imagem"><br><br>  Para obter a for√ßa e a diretividade das rela√ß√µes dos elementos individuais entre os preditores, um segundo truque √© usado - <a href="https://hackernoon.com/what-is-one-hot-encoding-why-and-when-do-you-have-to-use-it-e3c6186d008f">uma codifica√ß√£o quente</a> <br><br><pre> <code class="plaintext hljs">library(recipes) iris %&gt;% as_tibble %&gt;% mutate_if(is.numeric,cut_number,n=5) %&gt;% recipe(x = .) %&gt;% step_dummy(all_nominal(),one_hot = T) %&gt;% prep %&gt;% juice %&gt;% glimpse</code> </pre><br>  Em vez de cinco preditores, agora temos 23 deles, mas bin√°rios: <br><br><img src="https://habrastorage.org/webt/tv/qw/c4/tvqwc4gibltq3lghux0zhjgzwhc.jpeg" alt="imagem"><br><br>  Em geral, os truques de convers√£o terminam a√≠, mas o trabalho de 2 de 3 bibliotecas para nossa EDA "n√£o cl√°ssica" come√ßa com esses est√°gios. <br><br>  Em seguida, apresento a funcionalidade de tr√™s bibliotecas de visualiza√ß√£o: <br><br><ol><li>  <b>Correlationfunnel</b> - mostra o efeito de valores preditores individuais em um destino (ou seja, voc√™ pode cham√°-lo de aprendizado supervisionado pela EDA) </li><li>  <b>Lares</b> - mostra o efeito de valores preditores individuais em outros valores individuais de outros preditores (ou seja, voc√™ pode cham√°-lo de aprendizado n√£o supervisionado da EDA) </li><li>  <b>easyalluvial</b> - mostra a rela√ß√£o cumulativa dos valores agrupados dos principais preditores de "X" por destino (ou seja, voc√™ pode cham√°-lo de aprendizado supervisionado pela EDA) </li></ol><br>  √â evidente que sua funcionalidade √© diferente, portanto, demonstrando essas bibliotecas, citarei as conclus√µes do autor no <a href="https://habr.com/ru/company/mlclass/blog/270973/">artigo de</a> nossa "Linha de base_EDA", dependendo da funcionalidade descrita acima deste pacote.  (Por exemplo, se o autor mostrar a depend√™ncia da idade em rela√ß√£o √† sobreviv√™ncia, inserirei essa cita√ß√£o no funil de Correla√ß√£o, se a idade estiver na classe, em Lares etc.) <br><br>  A primeira biblioteca est√° no palco. <br><br><h1><a name="corfun"></a>  correla√ß√£o </h1><br>  <a href="https://business-science.github.io/correlationfunnel/">correlacionar funil √© acelerar a An√°lise Explorat√≥ria de Dados (EDA)</a> <br><img src="https://habrastorage.org/webt/j3/9t/zb/j39tzbul1cekgctjk7znwkdszhu.jpeg" alt="imagem"><br><br>  A metodologia est√° bem descrita na <a href="https://cran.r-project.org/web/packages/correlationfunnel/vignettes/key_considerations.html">vinheta</a> da biblioteca; darei um fragmento de c√°lculo da correla√ß√£o por valores bin√°rios <br><br><img src="https://habrastorage.org/webt/hd/7d/li/hd7dliqgmjdcsufitigzylb7hvy.jpeg" alt="imagem"><br><br>  A biblioteca assume a presen√ßa de um alvo (vari√°vel dependente) em nossos dados e imediatamente em uma imagem mostra a for√ßa e a dire√ß√£o do relacionamento e tamb√©m classifica em ordem decrescente essa for√ßa formando um funil visual (na verdade, √© da√≠ que o nome vem). <br><br>  As fun√ß√µes de binariza√ß√£o incorporadas √† biblioteca permitem reduzir pequenas categorias em Outros. <br><br>  Como a biblioteca n√£o funciona com vari√°veis ‚Äã‚Äãinteiras, as converteremos em num√©rico e retornaremos ao nosso Titanic. <br><br><pre> <code class="plaintext hljs">#install.packages("correlationfunnel") library(correlationfunnel) d &lt;- d %&gt;% mutate_if(is.integer,as.numeric) d %&gt;% binarize(n_bins = 5,thresh_infreq = .02,one_hot = T) %&gt;% #    correlate(target = Survived__yes) %&gt;% plot_correlation_funnel() # "interactive = T" - plotly!</code> </pre><br><img src="https://habrastorage.org/webt/-t/wj/l-/-twjl-woesnakv9rnym9ndugn5i.jpeg" alt="imagem"><br><br>  No eixo X, temos a for√ßa e a dire√ß√£o da correla√ß√£o; no eixo Y, nossos preditores s√£o classificados em ordem decrescente.  O primeiro sempre reflete o alvo como  ele tem a correla√ß√£o mais forte consigo mesmo (-1; 1). <br><br>  Vamos verificar como as conclus√µes deste gr√°fico se sobrep√µem √†s conclus√µes do autor da nossa "Linha de base_EDA". <br><blockquote>  O gr√°fico a seguir confirma a teoria de que quanto maior a classe da cabine de passageiros, maior a chance de sobreviv√™ncia.  (Por "acima" ", quero dizer a ordem inversa, porque a primeira classe √© maior que a segunda e, principalmente, a terceira.) </blockquote>  O funil mostra que a classe √© o terceiro preditor em termos de for√ßa de correla√ß√£o e, de fato, na 3¬™ classe, a correla√ß√£o inversa, na 1¬™, √© fortemente positiva. <br><blockquote>  Compare as chances de sobreviv√™ncia de homens e mulheres.  Os dados confirmam a teoria expressa anteriormente. <br><br>  (Em geral, j√° podemos dizer que os principais fatores do modelo ser√£o o sexo do passageiro) </blockquote><br>  O funil mostra que o sexo do passageiro √© o 2¬∫ de acordo com o grau de correla√ß√£o, o sexo feminino √© correlacionado com a sobreviv√™ncia, o sexo masculino √© correlacionado com a morte. <br><blockquote>  Voc√™ tamb√©m pode testar a hip√≥tese de que os mais jovens sobrevivem, porque  eles se movem mais r√°pido, nadam melhor etc. <br><br>  Como voc√™ pode ver, uma depend√™ncia expl√≠cita n√£o √© vis√≠vel aqui. </blockquote><br>  O funil realmente fala da fraca signific√¢ncia desse preditor (lembro que o gonorante / t√≠tulo cont√©m idade, raz√£o pela qual a idade n√£o √© t√£o significativa), mas mesmo aqui o funil mostra que h√° mais chances de sobreviver nas categorias "menos infinito - 20 anos" (ou seja, crian√ßas ) e 30-38 (pessoas ricas, possivelmente 1 classe). <br><blockquote>  Vamos introduzir um indicador como o Percentual de Sobreviv√™ncia e examinar sua depend√™ncia dos grupos que surgiram no est√°gio anterior </blockquote><br>  (o grupo do autor significa o t√≠tulo). <br><br>  O funil confirma totalmente as descobertas do autor <br><blockquote>  Agora, vejamos as informa√ß√µes que podem ser obtidas com o n√∫mero de parentes no navio. <br><br>  √â muito prov√°vel que a aus√™ncia de parentes, assim como um grande n√∫mero, afete negativamente a sobreviv√™ncia. </blockquote><br>  O SibSP no funil diz claramente a mesma coisa. <br><br>  E, claro, al√©m das conclus√µes do autor, aqui voc√™ pode ver outros padr√µes, deixarei o prazer da contempla√ß√£o para o leitor <br><br><h1><a name="lrs"></a>  Lares </h1><br>  <a href="https://datascienceplus.com/find-insights-with-ranked-cross-correlations/">Encontre insights com correla√ß√µes cruzadas classificadas</a> <br><br><img src="https://habrastorage.org/webt/sd/yh/6g/sdyh6ghnnhtnjid9ay2k5s3d9we.png" alt="imagem"><br><br>  O autor desta biblioteca foi ainda mais longe - ele mostra as depend√™ncias n√£o apenas do destino, mas tamb√©m de tudo. <br><br><blockquote>  As correla√ß√µes cruzadas classificadas <u>n√£o apenas explicam os relacionamentos de um recurso de destino espec√≠fico com o restante, mas o relacionamento de todos os valores em seus dados</u> em um formato tabular f√°cil de usar e entender. <br><br>  Ele converte automaticamente colunas categ√≥ricas em num√©ricas com uma codifica√ß√£o ativa (1s e 0s) e outros agrupamentos inteligentes, como r√≥tulos de "outros", para valores n√£o muito frequentes e novos recursos desatualizados. </blockquote><br><br>  Usando o link acima, voc√™ pode ver um exemplo em que o autor alimenta o conjunto de dados de Star Wars em seu pacote e demonstra as depend√™ncias encontradas. Fiquei preso na p√°gina dele, muito bem. <br><br>  Vamos tentar o nosso exemplo. <br><br><pre> <code class="plaintext hljs"># ,     : # devtools::install_github("laresbernardo/lares") library(lares) corr_cross(df = d,top = 30)</code> </pre><br><img src="https://habrastorage.org/webt/wd/mu/pv/wdmupvkf00yjchynm1mmsj_nxog.jpeg" alt="imagem"><br><br>  Al√©m da interse√ß√£o com as conclus√µes baseadas em aspas, em Correlationfunnell, apresentamos algumas cita√ß√µes que podemos ver aqui, independentemente do destino: <br><blockquote>  Outros padr√µes tamb√©m podem ser encontrados.  Existe uma correla√ß√£o negativa entre idade e classe, o que provavelmente se deve a passageiros mais velhos, que poderiam pagar com mais frequ√™ncia por uma cabine mais cara. </blockquote><br>  Na cita√ß√£o acima, o autor tira essa conclus√£o sobre a an√°lise de correla√ß√£o de 2 campos agregados, mas com a codifica√ß√£o de um a quente, isso √© evidente a partir da forte correla√ß√£o positiva entre Idade + P_Classe_1. <br><blockquote>  Al√©m disso, o pre√ßo do bilhete e a classe est√£o intimamente relacionados (alto coeficiente de correla√ß√£o), o que √© bastante esperado. </blockquote><br>  Terceira linha acima: Tarifa + P_Class_1 <br><br>  Al√©m de cruzar com as conclus√µes do autor, aqui podemos enfatizar coisas muito mais interessantes, deixarei tamb√©m o prazer da contempla√ß√£o para o leitor. <br><br>  Al√©m da sele√ß√£o opcional dos principais insights X mais poderosos, voc√™ tamb√©m pode refletir toda a imagem e o local desses pontos significativos na massa total <br><br><pre> <code class="plaintext hljs">corr_cross(df = d,type=2)</code> </pre><br><img src="https://habrastorage.org/webt/us/pa/ud/uspaudtooaflobmfge5tgdi6h6q.jpeg" alt="imagem"><br><br><h1><a name="alluv"></a>  easyalluvial </h1><br>  <a href="https://www.datisticsblog.com/2018/10/intro_easyalluvial/">Explora√ß√£o de dados com parcelas aluviais</a> <br><br><img src="https://habrastorage.org/webt/gm/xg/fp/gmxgfpjhfzpqgqiulecylpd6fge.gif" alt="imagem"><br><br>  Aqui, como nos 2 pacotes anteriores, o autor realiza a binariza√ß√£o de vari√°veis ‚Äã‚Äãnum√©ricas no in√≠cio, mas seus caminhos com essas bibliotecas divergem: em vez de {One-HotEncoding + correlation}, a biblioteca apresenta o X principal dos preditores mais interessantes (o usu√°rio decide quais transferir) ) por valores, formando fluxos cuja cor depende do destino e a largura do fluxo no n√∫mero de observa√ß√µes nesse fluxo. <br><br>  As vari√°veis ‚Äã‚Äãnum√©ricas s√£o decompostas em categorias HH (Alta Alta), MH (M√©dia Alta), M (M√©dia), ML (M√©dia Baixa), LL (Baixa Baixa) <br><br>  Primeiro, vamos pegar os preditores mais significativos com base no gr√°fico do correlacionado funil: <br><br><pre> <code class="plaintext hljs">cor.feat &lt;- c("title","Sex","Pclass","Fare")</code> </pre><br>  Em seguida, fazemos um cronograma <br><br><pre> <code class="plaintext hljs"># install.packages("easyalluvial") library(easyalluvial) al &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") add_marginal_histograms(p = al,data_input = d,keep_labels = F)</code> </pre><br><img src="https://habrastorage.org/webt/p5/rd/xd/p5rdxduvi-21s-xhwhvzxh5og88.jpeg" alt="imagem"><br><br>  Para as cita√ß√µes do autor, redesenhamos o gr√°fico usando os preditores apropriados. <br><br><pre> <code class="plaintext hljs">cor.feat &lt;- c("Sex","Pclass","Age") al &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") add_marginal_histograms(p = al,data_input = d,keep_labels = F)</code> </pre><br><img src="https://habrastorage.org/webt/yz/pb/o-/yzpbo-6q9x0relwi6ewtpyqwlke.jpeg" alt="imagem"><br><br><blockquote>  Por exemplo, o gr√°fico a seguir mostra claramente que os principais grupos de sobreviventes s√£o mulheres do primeiro e do segundo ano de todas as idades. </blockquote><br>  O gr√°fico tamb√©m mostra que as mulheres sobreviventes do terceiro ano tamb√©m n√£o s√£o um grupo pequeno <br><br><blockquote>  E entre os homens, todos os meninos com menos de 15 anos sobreviveram, exceto a terceira classe de servi√ßo e uma pequena propor√ß√£o de homens mais velhos e principalmente da primeira classe. </blockquote><br>  O mencionado √© confirmado, mas novamente vemos os fluxos de homens sobreviventes da classe 3 na categoria de idade LL, ML. <br><br>  Tudo acima foi sobre o pacote ‚Äúeasyalluvial‚Äù, mas o autor escreveu um segundo pacote ‚Äúparcats‚Äù que, no topo da plotagem, torna o gr√°fico acima interativo (como no t√≠tulo desta se√ß√£o). <br>  Isso possibilita n√£o apenas ver o contexto da dica de ferramenta, mas tamb√©m reorientar os fluxos para uma melhor percep√ß√£o visual.  (infelizmente, enquanto a biblioteca n√£o √© muito otimizada e fica mais lenta no titanic) <br><br><pre> <code class="plaintext hljs"># install.packages("parcats") library(parcats) cor.feat &lt;- c("title","Sex","Pclass","Fare") a &lt;- d %&gt;% select(Survived,cor.feat) %&gt;% alluvial_wide(fill_by = "first_variable") parcats(p = a,marginal_histograms = T,data_input = d)</code> </pre><br><img src="https://habrastorage.org/webt/bt/bc/c4/btbcc4rkdkc6b6jwh9it_mk1y0a.jpeg" alt="imagem"><br><br><h2>  B√¥nus </h2><br>  A biblioteca easyalluvial, al√©m da an√°lise explorat√≥ria de dados, tamb√©m pode ser usada como int√©rprete para modelos de caixa preta (modelos que analisam par√¢metros que n√£o podem ser entendidos - por qual l√≥gica o modelo fornece uma resposta com base em determinados preditores). <br><br>  Link para o artigo do autor: <a href="https://www.datisticsblog.com/2019/04/visualising-model-response-with-easyalluvial/">Visualize a resposta do modelo com gr√°ficos aluviais</a> <br>  E a peculiaridade √© que, de todas as bibliotecas que eu vi, o m√°ximo em um gr√°fico explicou a resposta da caixa preta em n√£o mais do que o sistema de coordenadas bidimensionais (uma para cada preditor), a cor explicou a resposta. <br><br>  A biblioteca easyalluvial permite fazer isso por mais de 2 preditores ao mesmo tempo (√© melhor n√£o se deixar levar, √© claro). <br><br>  Por exemplo, vamos treinar uma floresta aleat√≥ria em nossa matriz de dados e refletir a explica√ß√£o de uma floresta aleat√≥ria usando tr√™s preditores. <br><br><pre> <code class="plaintext hljs">library(ranger) m &lt;- ranger(formula = Survived~.,data = d,mtry = 6,min.node.size = 5, num.trees = 600, importance = "permutation") library(easyalluvial) (imp &lt;- importance(m) %&gt;% as.data.frame %&gt;% easyalluvial::tidy_imp(imp = .,df=d)) #      #  N-     (   .  !)   dspace &lt;- get_data_space(df = d,imp,degree = 3) #     pred = predict(m, data = dspace) alluvial_model_response(pred$predictions, dspace, imp, degree = 3)</code> </pre><br>  Al√©m disso, o autor possui um conector para os modelos CARET (n√£o sei o qu√£o relevante isso est√° considerando agora nos modelos de organiza√ß√£o) <br><br><pre> <code class="plaintext hljs">library(caret) trc &lt;- trainControl(method = "none") m &lt;- train(Survived~.,data = d,method="rf",trControl=trc,importance=T) alluvial_model_response_caret(train = m,degree = 4,bins=5,stratum_label_size = 2.8)</code> </pre><br><img src="https://habrastorage.org/webt/qq/qf/iv/qqqfivwgoucmfoikmwhp9mdwelw.jpeg" alt="imagem"><br><br><h1>  Conclus√£o </h1><br>  Repito mais uma vez que n√£o pe√ßo a substitui√ß√£o do EDA cl√°ssico, mas concordo que √© bom quando existe uma alternativa que economiza muito tempo, especialmente considerando que as pessoas s√£o naturalmente pregui√ßosas o suficiente, e esse, como voc√™ sabe, √© o motor do progresso :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480532/">https://habr.com/ru/post/pt480532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480514/index.html">Hist√≥rico do sistema de nomes de dom√≠nio: os primeiros servidores DNS</a></li>
<li><a href="../pt480518/index.html">Tutor de programa√ß√£o: por que voc√™ deve se tornar um e como faz√™-lo</a></li>
<li><a href="../pt480526/index.html">Os processadores Intel cuspir uma chave privada, se voc√™ jogar com tens√£o</a></li>
<li><a href="../pt480528/index.html">Por que o Facebook permitir√° que voc√™ transfira dados do usu√°rio para outros servi√ßos</a></li>
<li><a href="../pt480530/index.html">A Internet das coisas n√£o √© um brinquedo para crian√ßas. Como os ataques de hackers na Internet assustam n√£o apenas as grandes empresas, mas tamb√©m as fam√≠lias comuns</a></li>
<li><a href="../pt480538/index.html">O que √© melhor para jogos: Intel Optane ou SSD?</a></li>
<li><a href="../pt480540/index.html">Vers√£o Umbraco 8.4: o CMS √© ainda mais conveniente</a></li>
<li><a href="../pt480550/index.html">Ol√° Mundo da Bytecode para JVM</a></li>
<li><a href="../pt480552/index.html">Firefox luta pelo futuro da web</a></li>
<li><a href="../pt480554/index.html">O futuro da computa√ß√£o em nuvem da Sun que nunca veio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>