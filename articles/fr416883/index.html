<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏽 🐛 🖕🏾 Comment j'ai écrit mon Postcrossing 🛀🏿 🙎🏿 🦋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous allez au Postcrossing , vous réalisez combien de personnes peuvent devenir folles pour une idée simple. C'est la simplicité captivante de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'ai écrit mon Postcrossing</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416883/">  Lorsque vous allez au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Postcrossing</a> , vous réalisez combien de personnes peuvent devenir folles pour une idée simple.  C'est la simplicité captivante de l'idée qui est devenue le principal facteur pour lequel j'ai repris la mise en œuvre d'un croisement spécifique avec mes <s>dames et des</s> objets d'échange de <s>préférence</s> et de fonctionnalités supplémentaires. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2e/ck/hj/2eckhjbpy_-wctvc5nmezuj-mue.jpeg"></div><a name="habracut"></a><br><h2>  Idée </h2><br>  C'était en janvier 2017.  Une fois, dans une conversation avec moi, une personne a mentionné qu'elle aimerait réaliser l'idée d'échanger des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">babioles</a> (les soi-disant «bracelets d'amitié») selon le principe du Postcrossing: l'utilisateur visite le site, appuie sur le bouton et reçoit l'adresse à laquelle il doit envoyer la babiole , après quoi il commence lui-même à recevoir des babioles d'autres utilisateurs en réponse (et ainsi de suite dans un cercle).  Il est souhaitable que l'échange soit possible entre différents pays. <br><br>  Ensuite, j'avais déjà environ 5 ans d'expérience dans le développement d'applications Web en Java et un peu en PHP.  Quand ils ont décrit les fonctionnalités nécessaires pour que le crossover souhaité fonctionne, j'ai pensé à utiliser mes anciens travaux en PHP et à faire un projet en environ deux semaines, ou le maximum en un mois.  Mais, comme cela arrive souvent, mes estimations étaient trop optimistes.  Déjà lors de la relecture du code source de mon moteur de template en PHP, j'avais <s>peur de ce</s> que <s>j'écrivais</s> , je me suis rendu compte que ces vieux métiers universitaires nécessitent <s>l'envoi immédiat d'au</s> moins une bonne optimisation. <br><br>  Plus je me suis plongé dans mes anciennes sources PHP, plus je me suis rendu compte qu'avec mon niveau de connaissance de ce langage et de l'état des sources, même ce petit projet me ferait mal.  Par conséquent, j'ai quand même décidé d'utiliser le Spring Framework, qui est devenu pour moi une mousse chaude et douce au fil des années de travail avec le Web Java.  Je ne voulais pas faire cela au départ à cause de l'échelle apparemment petite du plan.  Bien sûr, j'avais tort, donc la décision d'utiliser le langage Java familier a transformé une douleur potentielle en un plaisir ultérieur. <br><br><h2>  La conception </h2><br>  Comme l'idée n'était pas la mienne, au cours du processus de conception, j'ai souvent beaucoup secoué l'auteur de l'idée pour m'assurer que ma vision du projet correspond à l'idée de l'auteur.  Au cours de longues discussions, j'ai été inspiré par le projet et j'ai déjà commencé à introduire divers petits pains pratiques et utiles pour les utilisateurs et les administrateurs.  Le design a fait l'objet d'une attention particulière: nous avons discuté de chaque détail de la fonctionnalité, dessiné les dispositions de presque toutes les pages, conservé la documentation décrivant la logique de l'application et la fonctionnalité utilisateur. <br><br>  Les mises en page et la documentation évoluent constamment, regorgent de détails et de nouvelles fonctionnalités.  Par la suite, les dispositions sont devenues l'une de ces choses qui ont montré à quel point j'avais tort d'évaluer la complexité du projet. <br><br><img src="https://habrastorage.org/webt/cm/vq/vu/cmvqvur4wrmcry-mnkznfvr3_oi.png"><br>  <i>Exemple d'évolution de la mise en page de l'éditeur de leçon</i> <br><br>  Bien sûr, je suis moi-même responsable de la complication ultérieure de la fonctionnalité, augmentant ainsi le temps de développement.  Cependant, je ne voulais pas qu'un autre <s>govnosite</s> apparaisse sur Internet <s>, dont il existe des milliers de</s> sites <s>de</s> mauvaise qualité;  Je voulais rendre le site agréable pour les utilisateurs tant en termes de facilité d'utilisation que visuellement.  De plus, le perfectionnisme en moi ne me permettait tout simplement pas d'utiliser la méthode «herak-herak - et en production».  Par conséquent, nous avons même élaboré des mises en page avec minutie (et vous verrez que c'était loin d'être la limite de la confusion lors de l'élaboration des détails). <br><br><img src="https://habrastorage.org/webt/pd/hc/mk/pdhcmkrs13ql3xwdqr1sh6gckku.png"><br>  <i>Présentation de la page des paramètres du profil utilisateur</i> <br><br>  Ayant atteint la fonctionnalité optionnelle, que je prévoyais ensuite d'utiliser seule, j'ai commencé à dessiner à la main des maquettes sur une tablette graphique. <br><br><img src="https://habrastorage.org/webt/yu/7z/5v/yu7z5vugrm1d8umaxrqetpoylbw.png"><br>  <i>La disposition de la page "Utilisateurs" dans le panneau d'administration</i> <br><br>  Au cours du processus de conception, nous avons essayé de réfléchir au système afin qu'après le lancement, notre implication supplémentaire dans la vie du site soit minime;  nous ne voulions vraiment pas modérer le contenu publié sur le site par les utilisateurs, et encore plus embaucher des modérateurs.  Nous voulions que la communauté décide quelle leçon publier, quelle babiole à garder hors du public, quel utilisateur interdire pour un profil ou des commentaires obscènes.  Bien sûr, il n'a pas été possible de se débarrasser complètement de cela, mais à la fin, nous avons au moins réussi à nous décharger de la routine potentielle. <br><br>  À la fin de la phase de conception, j'ai réalisé que nous écrivions du travail depuis au moins six mois.  De plus, en plus de la possibilité même d'échanger des boules, nous avons décidé d'ajouter la possibilité d'écrire des articles sur le tissage des boules (et plus tard sur les travaux d'aiguille en général) et de vérifier ces articles par la communauté elle-même (plus tard, cette fonctionnalité s'est avérée encore plus difficile et longue à mettre en œuvre que le système d'échange) .  Mais en général, j'ai aimé comment cela fonctionnait "sur papier" et j'ai regardé les maquettes, alors j'ai commencé la mise en œuvre et j'ai décidé de la terminer. <br><br>  Ainsi, selon notre idée, l'application devrait avoir les <b>fonctionnalités de base suivantes</b> : <br><br>  - inscription sur le site et configuration du compte; <br>  - Organisation de l'échange de boules avec des gens du monde entier; <br>  - rédaction de cours, vérification et approbation de leur communauté de site; <br>  - pages avec une leçon spécifique et une babiole; <br>  - des pages avec une liste de leçons et de babioles; <br>  - Commenter les leçons et les babioles; <br>  - système de notification des événements; <br>  - système de plaintes, interdictions et quotas; <br>  - discuter entre utilisateurs; <br>  - statistiques du site; <br>  - administrateur. <br><br>  En outre, le site devrait initialement être destiné à un <b>public international</b> : l'échange peut être effectué partout dans le monde, les leçons peuvent être écrites dans n'importe quelle langue et le site peut être localisé dans n'importe quelle langue (bien sûr, s'il y a des traducteurs qui veulent le faire; plus tard, je a même écrit une petite application avec laquelle vous pouvez facilement traduire le site dans une langue de support). <br><br>  Il a été décidé de créer un site Internet avec <b>des investissements financiers minimes</b> : pas d'achats ou d'abonnements à des services tiers, pas d'investissement dans la publicité, l'embauche de traducteurs et le paiement d'un certificat SSL.  Tout ce que nous nous sommes permis de dépenser était un <b>nom de domaine</b> et un <b>VDS</b> .  Et un peu de fil de soie, mais plus sur cela plus tard. <br><br>  Anticipant le plaisir futur de développer le projet, je suis passé directement à la phase de mise en œuvre.  Et j'ai décidé de travailler à plein temps (oui, cela arrive aussi avec des projets non commerciaux). <br><br><h2>  Implémentation </h2><br>  Dans mon équipe de deux personnes, j'étais le seul programmeur, donc la majeure partie du récit de l'implémentation sera en mon nom. <br><br>  La première chose que j'ai faite a été de dessiner un modèle de base de données.  Après les premières itérations, j'ai eu environ 30 tables.  Dans la version finale, il y en avait déjà 43. En tant qu'ORM, j'ai choisi Hibernate, car j'ai eu une petite mais assez agréable expérience de travail avec.  J'ai choisi MySQL comme base. <br><br><img src="https://habrastorage.org/webt/4v/t_/7-/4vt_7-ogc25fhefkcqgvzbzzc8q.png"><br>  <i>Modèle de base de données, vue de loin</i> <br><br>  Au tout début, j'ai pensé à la façon dont je remplirais la base de données avec des données brutes.  Et ces données étaient nombreuses: langues, pays, contenu statique, catégories de leçons et bien plus encore.  Je ne voulais pas stocker, et plus encore, prendre en charge les données au format SQL, j'ai donc décidé d'écrire mon système pour importer et exporter des données au format CSV.  Et à l'avenir, je ne l'ai pas regretté, car ces systèmes ont accéléré le processus de développement à plusieurs reprises et ont facilité le travail avec les données de production.  J'ai appelé le <b>système Inida</b> (de «Initial Data», bien que ce nom ne soit plus très approprié). <br><br><div class="spoiler">  <b class="spoiler_title">En savoir plus sur Inida</b> <div class="spoiler_text">  Voici un exemple de données inida: <br><br><pre><code class="hljs pgsql">i Country;isocode;<span class="hljs-type"><span class="hljs-type">name</span></span> ;<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>;Belarus ;gb;United Kingdom ;ru;Russia</code> </pre> <br>  La première ligne ici est l'en-tête décrivant l'opération (i - insérer), le type de données (nom de l'entité dans la base de données) et les champs.  Les lignes commençant par un point-virgule sont les données elles-mêmes.  Si le texte ci-dessus (données Inida) est envoyé à l'importateur Inida, alors trois entrées seront ajoutées à la base de données (dans cet exemple, trois pays).  Les données Inida peuvent avoir plusieurs en-têtes, ce qui vous permet de travailler avec plusieurs entités de base de données à la fois. <br><br>  Inida prend en charge les opérations d'enregistrement suivantes: <br><br>  <b>i - insérer</b> : ajouter un nouvel enregistrement; <br>  <b>u - update</b> : met à jour un enregistrement existant (par clés, qui sont les valeurs des champs marqués d'un signe "+"); <br>  <b>m - merge</b> : en substance, il s'agit de insert + update (s'il n'y a pas d'enregistrement avec les valeurs de clé spécifiées, il est créé; sinon, l'enregistrement est mis à jour); <br>  <b>d - supprimer</b> : supprime les données des clés spécifiées. <br><br>  Inida possède également les fonctionnalités suivantes: <br><br><ul><li>  <b>conversion des valeurs de champ par</b> des transformateurs personnalisés (par exemple, conversion de dates d'un format à un autre, décoration de données, désinfection, etc.); </li><li>  <b>enregistrer des alias</b> pour utiliser ces enregistrements dans les données Inida suivantes; </li><li>  <b>mode batch</b> : mettre à jour, fusionner ou supprimer des enregistrements qui ne satisfont qu'une partie de la clé (en mode normal, lorsque vous essayez de mettre à jour plusieurs enregistrements qui satisfont la même clé à la fois, une exception est levée); </li><li>  <b>substitutions</b> (vous pouvez également <b>imbriquer</b> ): une sorte d'analogue définir en C ++ (utile quand une longue phrase est utilisée plus d'une fois); </li><li>  <b>valeurs par défaut</b> (pratique lorsque vous devez dupliquer la même valeur d'un champ pour un grand nombre d'enregistrements); </li><li>  <b>prise en charge des valeurs de liste</b> (si la valeur de champ est une collection de listes); </li><li>  <b>prise en charge des champs d'objet</b> (un niveau d'imbrication). </li></ul><br>  Et aussi quelques autres fonctionnalités moins importantes, mais aussi utiles. <br><br>  Inida peut également exporter des données.  Cela se fait en écrivant le même en-tête utilisé lors de l'importation, uniquement sans spécifier l'opération: <br><br><pre> <code class="hljs pgsql">Country;isocode;<span class="hljs-type"><span class="hljs-type">name</span></span></code> </pre><br>  Dans l'exemple ci-dessus, l'exportateur déchargera tous les pays au format inida.  Le volume de déchargement peut être limité en spécifiant les valeurs clés que les enregistrements téléchargés satisferont: <br><br><pre> <code class="hljs pgsql">Country;isocode=ru;<span class="hljs-type"><span class="hljs-type">name</span></span></code> </pre><br></div></div><br>  L'une des fonctionnalités du site est l'affichage de la ville de l'utilisateur sur la carte dans le profil.  Comme je voulais que notre site soit aussi autosuffisant que possible en termes de dépendance vis-à-vis des services externes, je me suis plutôt embrouillé pour cette petite fonctionnalité, passant beaucoup de temps à rechercher des solutions et à développer des applications supplémentaires. <br><br><div class="spoiler">  <b class="spoiler_title">Recherche d'implémentation de fonctionnalités avec des cartes</b> <div class="spoiler_text">  Premièrement, il fallait prendre les cartes elles-mêmes quelque part, ou plutôt les tuiles de la carte de la Terre de différents niveaux de détail (pour que la carte puisse être rapprochée).  Les recherches m'ont conduit au service de cartographie ESRI, qui avait les tuiles dont j'avais besoin dans le domaine public.  Mais le problème était qu'ils n'avaient pas de liens vers les archives de tuiles (ou je ne pouvais tout simplement pas les trouver).  Mais chaque tuile pourrait être téléchargée par une URL d'un certain format.  J'ai rapidement écrit une application qui a déchargé les tuiles pour le nombre requis de niveaux de détail et les a disposées dans les dossiers appropriés.  Je n'avais que 8 niveaux (0-7) avec une capacité totale d'environ 138 Mo. <br><br>  Deuxièmement, il fallait en quelque sorte afficher les cartes téléchargées.  Heureusement, ce problème a été résolu tout simplement: j'ai trouvé le plugin JavaScript <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Leaflet</a> qui a fait un excellent travail d'affichage des tuiles de carte à une URL donnée. <br><br>  Troisièmement, enfin, quelque part, il était nécessaire d'obtenir des géolocalisations (coordonnées et noms des établissements) et de préférence dans différentes langues.  Cette partie de la tâche a été la plus volumineuse et la plus difficile, car je n'ai pas immédiatement réussi à trouver une liste plus ou moins exhaustive de colonies pour différents pays.  En conséquence, j'ai toujours trouvé une telle liste, mais le nom qu'elle contenait dans une seule langue;  Je voulais que chaque pays offre la possibilité de rechercher des colonies dans les langues officielles de ce pays (par exemple, en russe et biélorusse pour la Biélorussie), ainsi que de facto international (malheureusement, c'est l'anglais) et l'espéranto (simplement parce que J'aime vraiment l'idée de cette langue). <br><br>  En conséquence, une autre sous-tâche est apparue: trouver et préparer des listes de langues officielles pour chaque pays.  Heureusement, quelqu'un a déjà collecté ces informations avant moi, alors je n'ai eu qu'à les transmettre au programme, que je décrirai dans quelques paragraphes ci-dessous. <br><br>  La source des noms de communauté localisés est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nominatim</a> .  Comme nous ne pouvions pas obtenir de noms localisés à partir d'un seul lien, j'ai dû le faire en deux passes: <br><br><ul><li>  demander des informations sur le règlement en utilisant son nom (dans une langue accessible) et son pays;  cette information est venue au format JSON; </li><li>  en utilisant la valeur du champ "place_id" du JSON reçu, demander une page avec des informations sur le village et ses noms dans différentes langues (sous la forme d'une page Web ordinaire). </li></ul><br>  Étant donné que, loin de toutes les demandes HTTP, les réponses ont été reçues avec succès (pour diverses raisons, parmi lesquelles une «connexion Internet a été perdue»), il était également nécessaire de consigner les tentatives infructueuses de localisation des colonies afin de réessayer la prochaine itération.  Une autre difficulté était que Nominatim était officiellement interdit d'utiliser trop souvent, donc <s>pour ne pas être interdit,</s> j'ai dû introduire un délai entre les demandes, limitant ainsi leur nombre en une seconde au maximum autorisé. <br><br>  En conséquence, en tenant compte de tout ce qui précède, j'ai écrit un programme qui traite de la localisation des colonies dans les langues officielles du pays auquel appartient la colonie localisée (ainsi qu'en anglais et en espéranto, comme je l'ai mentionné ci-dessus).  Il a été possible de localiser en 4 itérations, et le programme a fonctionné pendant des jours pendant environ 1,5 mois sur un netbook dédié à cette tâche. <br></div></div><br>  La tâche suivante, inventée par moi-même, était la préparation des icônes de drapeau.  Les problèmes concernaient les drapeaux pour les pays ainsi que pour les langues.  Même après avoir téléchargé une grande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive</a> librement distribuée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de</a> bonnes icônes dans des résolutions pour tous les goûts.  J'ai dû parcourir Wikipédia et prendre Photoshop. <br><br><div class="spoiler">  <b class="spoiler_title">Quête d'icônes pour drapeaux</b> <div class="spoiler_text">  Le premier problème, comme certains auraient pu le deviner, était le manque banal de drapeaux pour certains pays.  Le fait est que j'ai essayé de conserver tous les codes de pays officiellement attribués à partir de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">norme ISO 3166-1 alpha-2</a> .  J'ai trouvé les drapeaux des pays dont j'avais besoin principalement sur Wikipédia, puis je les ai préparés dans Photoshop dans la résolution dont j'avais besoin et avec l'effet de volume.  Il me manquait une douzaine de drapeaux, j'ai donc résolu cette partie de la tâche assez rapidement. <br><br>  La situation des cases à cocher pour les langues s'est avérée plus compliquée.  Le fait est que sur de nombreux sites, il a été dit qu'il n'est pas très rationnel d'utiliser le drapeau pour la langue car cela signifie souvent de lier la langue à un pays spécifique.  Par exemple, quel drapeau devrait être pour l'anglais: américain, britannique ou australien?  Ou peut-être la Nouvelle-Zélande?  Et pour l'espagnol: mexicain ou espagnol?  Les arguments pour éviter l'utilisation de drapeaux pour les langues étaient convaincants pour moi, mais je voulais vraiment une représentativité visuelle, j'ai donc décidé de les utiliser sur notre site (quoique un peu "à travers moi"). <br><br>  La principale difficulté était que je n'avais que des drapeaux pour les pays.  Pour les langues, je ne pouvais pas les utiliser simplement parce que les codes ISO des pays et les codes ISO des langues qui leur correspondent (dans des cas particuliers) différaient généralement (par exemple: BE - biélorusse, BY - biélorussie; UK - ukrainien, UA - Ukraine).  En me rappelant que j'ai déjà des listes de langues par pays, j'ai décidé d'écrire un petit programme qui basé sur ces données compilera des listes de pays par langue (c'est-à-dire qu'il produira une cartographie inverse). <br><br>  Une fois le programme rédigé et les listes de langues dont j'avais besoin, j'ai commencé à préparer des images avec des drapeaux pour les langues (j'ai simplement renommé les drapeaux pour les pays).  Comme dans le cas des pays, dans le cas des langues, j'ai essayé de prendre en charge l'ensemble de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ISO-639-1</a> .  Oui, il n'y avait pas assez de drapeaux pour les langues, mais cette fois il y avait plusieurs fois plus de pénuries.  Pendant longtemps, j'ai compris quelle langue est utilisée dans quelle région, mais en conséquence, un drapeau correspondant (ou pas, je ne sais pas; au moins personne ne s'est plaint) a été préparé pour chacun d'eux. <br></div></div><br>  L'une des parties de la fonctionnalité du site, qui assure sa régulation par la communauté elle-même, est devenue un système de plaintes et d'interdictions.  Les utilisateurs peuvent se plaindre des informations de profil (nom, avatar, informations utilisateur), des commentaires, des conseils, une adresse postale et des images téléchargées.  Lors de la collecte d'un nombre suffisant de réclamations, la fonctionnalité correspondante est bloquée pour l'utilisateur sollicité.  Le premier verrou est retiré après une semaine et la durée de chaque verrou suivant est doublée.  Certains verrous (par exemple, le nom d'utilisateur) sont perpétuels;  c'est l'un de ces cas où l'attention des administrateurs est toujours nécessaire. <br><br>  Même pendant le processus de conception, j'ai réalisé que des bots pouvaient être installés sur le site.  Bien sûr, un tel scénario est peu probable étant donné la faible popularité du site et de son public cible, mais le désir de tout faire «de bonne foi» a prévalu.  Pour éviter le spam potentiel, j'ai introduit un système de quotas pour les actions des utilisateurs, d'une manière ou d'une autre liée à la génération de contenu sur le site: commenter, rédiger des messages de chat, rédiger des leçons, demander des adresses, enregistrer des comptes (à la fois à partir d'une adresse IP et d'un total par jour ) et quelques autres. <br><br>  Une tâche intéressante a été la mise en œuvre de l'une des fonctionnalités d'administration, à savoir la recherche d'adresses similaires.  J'ai repéré l'approche dans l'un des articles sur Habré (malheureusement, je n'ai pas pu trouver cet article, je vais donc décrire brièvement l'essence de l'approche ci-dessous).  Honnêtement, je ne suis pas très satisfait du résultat de la mise en œuvre de ces fonctionnalités en raison du nombre relativement élevé de faux positifs. <br><br><div class="spoiler">  <b class="spoiler_title">Fonctionnement de la vérification d'adresse similaire</b> <div class="spoiler_text">  Tout d'abord, une base de données de signature de signature de courrier est formée.  Dans ce cas, une signature est une liste de caractères et le nombre d'occurrences de chaque caractère.  C'est fait comme ceci: <br><br>  0) prendre l'adresse postale sous forme de texte; <br><br>  1) nous supprimons les informations inutiles de l'adresse (espaces, signes de ponctuation) et traduisons tous les caractères dans le même cas; <br><br>  2) calculer la signature du texte restant. <br><br>  De plus, lorsqu'un nouvel utilisateur est enregistré ou lorsqu'un utilisateur existant change l'une de ses adresses (régulière ou translittérée), cette nouvelle adresse (ou mise à jour) est soumise à la procédure ci-dessus, après quoi la différence de signature est calculée (la somme des différences entre les nombres des lettres correspondantes).  Si la différence est inférieure à un seuil spécifié, les adresses sont considérées comme similaires. <br></div></div><br>  Alors que je travaillais dur sur le côté serveur de l'application, mon co-auteur ne s'est pas assis les bras croisés, mais a travaillé sur le balisage du site à l'aide de la bibliothèque Bootstrap, car il voulait vraiment que le site soit pratique à utiliser également sur les appareils mobiles. <br>  Les mises en page que nous avons préparées ici sont très utiles. <br><br><h2>  La conception </h2><br>  Je n'aime pas quand le balisage flotte, le site semble mauvais et les scripts ne fonctionnent correctement que lorsque les actions attendues de l'utilisateur sont effectuées.  Même pendant le développement.  Par conséquent, j'ai toujours essayé de maintenir l'exactitude de l'apparence du site, de sorte que j'étais heureux de travailler avec lui, de voir de nouvelles fonctionnalités dans ce design, de créer de nouvelles pages pour celui-ci.  Je me suis permis de passer du temps à lécher des bagatelles, même en sachant qu’elles ne passeraient toujours pas à la version finale.  Tout simplement parce que le site attendait une refonte totale. <br><br> <a href=""><img src="https://habrastorage.org/webt/0g/o7/re/0go7re127_wyil0apc18jyzujew.png"></a> <br>  <i>Voici à quoi ressemblait le site avant le début de la refonte</i> <br><br>  En réfléchissant à l'apparence de la version finale du site, j'ai pris en compte les facteurs suivants et mes propres souhaits: <br><br><ol><li>  la conception doit correspondre au thème du site (babioles, travaux d'aiguille); </li><li>  la conception doit créer une atmosphère de tube chaude; </li><li>  La conception doit rendre le site compréhensible et facile à utiliser. </li></ol><br>  Je n'ai même pas pensé au choix de l'approche de la conception du site, car c'était sans ambiguïté pour moi: le skeuomorphisme.  Les éléments ci-dessus m'ont convaincu encore plus de l'exactitude de mon choix.  J'ai parfaitement compris à quel point cette approche était laborieuse, mais j'étais prête à y consacrer du temps, car je voulais un résultat agréable pour les yeux.  De plus, des années d'expérience dans Photoshop ont rendu ce processus plus facile et moins stressant. <br><br><div class="spoiler">  <b class="spoiler_title">Pourquoi je déteste le design moderne</b> <div class="spoiler_text">  La décision d'utiliser un design skeuomorphique a également été prise en raison de mon aversion pour le design plat moderne.  Pour moi personnellement, un design skeuomorphique est une référence en termes de clarté visuelle et de représentativité.  La conception des instruments de <a href="">Guitar Rig 5</a> , de nombreux plug-ins pour <a href="">FL Studio</a> et <a href="">Kontakt</a> , l'apparition de l'interface utilisateur dans le jeu <a href="">Hearthstone</a> - tout cela me plaît follement et rend la communication avec l'application ou le jeu très agréable.  Une telle conception ne laisse aucune question sur l'emplacement de l'élément d'interface et sur la façon de l'utiliser. <br><br>  Les tendances actuelles ont rendu les applications et les sites complètement identiques et sans visage.  Si les concepteurs de sites Web précédents tentaient de donner au site une individualité, maintenant un site sur deux semble trop stéréotypé: <br><br><ul><li>  grande image ou même vidéo comme arrière-plan; </li><li>  slogan abstrait écrit en gros caractères; </li><li>  en-têtes fixes trop larges; </li><li>  un énorme pied de page plein écran (et parfois plus); </li><li>  texte écrit en fines polices, et même gris sur fond blanc; </li><li>  des retraits de la taille d'un cheval sur la page; </li><li>  couleurs criardes et totalement incompatibles; </li><li>  page dans le style de "faites défiler vers le bas et ne comprenez pas quelle est la signification des services annoncés ici." </li></ul><br>  Et, bien sûr, <s>les êtres chers de tous</s> <br><br><ul><li>  une fenêtre contextuelle contenant des informations sur les cookies; </li><li>  fenêtre contextuelle contenant des informations sur les modifications du contrat d'utilisation; </li><li>  une fenêtre pop-up demandant à s'abonner (et une autre pop-up similaire dans le navigateur lui-même); </li><li>  des blocs entiers de publicité jaune tous les deux paragraphes de texte. </li></ul><br>  Les sites modernes regorgent de trucs sales, faisant apparaître du contenu inutile et intrusif directement sur le visage de l'utilisateur.  De plus, tout cela est cadré si dégoûtant qu'il est parfois difficile de trouver la section souhaitée.  Lorsque j'accède à de tels sites, les <s>doigts appuient instinctivement sur Ctrl + W, je</s> veux immédiatement m'enfuir et ne plus jamais revenir. <br><br>  Un autre exemple frappant pour moi est la conception de Microsoft Office, qui est passée de volumineux (dans la version 2010) à plat (dans la version 2013).  De nombreux éléments ont commencé à se ressembler (par exemple, les champs de saisie et les boutons), ce qui a considérablement entravé leur perception visuelle, car le cerveau doit désormais travailler plus dur pour comprendre où se trouve l'élément.  Dans le cas de la conception volumétrique, les éléments étaient faciles à distinguer, ce qui a permis de se concentrer sur le travail plutôt que de trouver le bon élément d'interface utilisateur parmi des dizaines des mêmes éléments. <br></div></div><br>  Je ne voulais vraiment pas que le projet que nous développions ressemble à la grande majorité des sites modernes et provoque du dégoût à la fois lors du premier appel et lors de son utilisation.  Au lieu de blocs abstraits plats et sans limites, j'ai utilisé l'image d'un véritable bureau d'une personne engagée dans la couture.  Pour que la conception du site ressemble à un morceau du monde réel, j'ai passé beaucoup de temps à chercher des images appropriées. <br><br>  De plus, beaucoup de photos ont été photographiées ou scannées par nos soins, puis traitées dans Photoshop. <br><br><img src="https://habrastorage.org/webt/wn/bh/iu/wnbhiunylij8_eckqsvx-fruth4.png"><br>  <i>Kumihimo et perles</i> <br><br>  Voici quelques exemples d'objets du monde réel qui ont été utilisés dans la conception: <br><br><ul><li>  un ruban cadeau qui traînait autour de moi faisait office de broyeur; </li><li>  le menu est une feuille arrachée à mon cahier (qui était à l'origine dans la boîte); </li><li>  l'en-tête devant le contenu de la page est un élément de la couverture pour lire des livres électroniques; </li><li>  une fenêtre pop-up et un patch dans le pied de page - un élément d'un sac à dos en jean; </li><li>  bouton contextuel - bouton avec short; </li><li>  logo sur la page principale - dessin à main levée; </li><li>  toutes les boules et de nombreuses perles visibles devant le pied de page et sur la page de droite provenaient également du monde réel (certaines boules ont été tissées pendant le développement du projet). </li></ul><br> <a href=""><img src="https://habrastorage.org/webt/br/mf/k3/brmfk3eu_qhny0uui8den2ssoqy.png"></a> <br>  <i>Page d'accueil</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/eo/a6/o9/eoa6o9brxvf6qa__nwjeff3f4wm.png"></a> <br>  <i>Pied de page</i> <br><br><div class="spoiler">  <b class="spoiler_title">Plus de captures d'écran</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/bf/cb/e9/bfcbe9l6fthrh48xaz0ibdzev7u.png"></a> <br>  <i>Page de profil utilisateur</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/3v/_e/tu3v_eiwloqbczj8eocx--p-rsg.png"></a> <br>  <i>Page Liste des leçons</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/xd/rx/_e/xdrx_ecfuq1-pst1sa9biy2tm84.png"></a> <br>  <i>Popup de langue</i> <br></div></div><br>  L'une des tâches les plus chronophages consistait à préparer des images à utiliser avec l'attribut CSS border-image.  Toute la difficulté résidait dans le fait que certaines parties de l'image devaient être homogènes lorsqu'elles étaient répétées.  C'est comme dessiner des textures répétitives (sans couture), juste plus difficile.  La plupart du temps était consacré à l'image utilisée dans la conception des fenêtres contextuelles (et au patch dans le pied de page), car la taille des éléments sur lesquels cette image était «étirée» pouvait changer librement à la fois verticalement et horizontalement. <br><br>  Probablement, avec le design, nous nous sommes plus confondus qu'avec autre chose.  De plus, ils sont devenus tellement confus que de nombreux éléments environnementaux (par exemple, des perles et des perles) et certaines icônes ont été modélisés et rendus dans Blender (quelque chose a même été texturé dans Substance Painter).  Oui, par souci d'icônes d'environ 32x32 pixels, nous sommes tellement confus. <br><br><img src="https://habrastorage.org/webt/0a/yy/vx/0ayyvx7tnxs7rvzrmob49awnagm.png"><br>  <i>Rendu des résultats</i> <br><br><div class="spoiler">  <b class="spoiler_title">Comment les éléments de conception ont été créés</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/fb/ec/ur/fbecurxuyl0jpoowokksavsdrvc.png"></a> <br>  <i>Perles à modeler (utilisées comme élément de l'environnement)</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/ar/pc/wb/arpcwb9mdixdsjowsl5qa1jrrns.png"></a> <br>  <i>Perles à modeler (utilisées comme élément de l'environnement)</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/bz/ue/gr/bzuegrs_let7cfjmv4o2npkocvk.png"></a> <br>  <i>Modélisation des boutons (utilisée comme élément d'environnement)</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/-c/80/oc/-c80ock_be0jsxpo9nh6irbj6ww.png"></a> <br>  <i>Modélisation des clés (utilisée comme icône «Administrateur»)</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/fr/na/0r/frna0rzj2aj85il6imej75bdq2g.png"></a> <br>  <i>Modélisation au crayon (utilisée comme icône «Modifier la leçon» sur le bouton)</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/u0/y8/hh/u0y8hhij3j5hfxf7ucxi-_3baok.png"></a> <br>  <i>Texturer des perles dans Substance Painter</i> <br></div></div><br>       ,      .      ,         .   JIRA  ,       ,      .          ,             .    ,         .       ,             ,       . <br><br> <a href=""><img src="https://habrastorage.org/webt/fn/z9/ha/fnz9hanjompdqz-yo_nizyohmmm.jpeg"></a> <br> <i>        267 -</i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une fois le travail sur le nouveau design (skeuomorphique) terminé, et nous avons terminé son intégration dans la mise en page sur Bootstrap préparée par mon co-auteur, j'ai commencé à intégrer le nouveau design. </font><font style="vertical-align: inherit;">Je pensais que ce serait la chose la plus désagréable que je fasse dans le cadre de ce projet. </font><font style="vertical-align: inherit;">En fait, ce n'était qu'un travail de développement de routine, et l'enfer lui-même m'attendait toujours.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Déploiement </font></font></h2><br> ,     ,      — ,   — ,       ,       .     ,      ,  -      <s>  </s>    .         —  ,      . <br><br>       «fenker» («»),       .        ,      ,     -.    : Fenkexchange, Friendship Pigeon, Flossy Hearts, Silky Hearts,….       ,   .          ( )      (:     -).    - — FriendBird. <br><br>          VDS,   Debian Linux  VirtualBox,      .     Linux    ( )     ,   ,   « »,       Windows (  -       2D  3D );         - Apache  Linux    .  ,    Linux     -  ,   ,        .        ,       . <br><br><div class="spoiler"> <b class="spoiler_title">        Linux</b> <div class="spoiler_text">    ,  ,    —   .  ,       ,  ,   .      ,       -,        ,    ,  , .  — ,   ,      -    -  Linux.           ,   Windows     ,   .         ,      . <br><br>        :           MariaDB.     URL'         .  MariaDB    ,      MySQL  Oracle,   .     ,       MySQL  Oracle. <br><br>          .       ,        .         -      ,    ,      .  ,           ,  -. <br><br>       SSL-.    ,     ,     ,   .    (    Let's Encrypt)       .      ,     ,     Tomcat'.       ,    ,   ,      .    ,        ,   -  (    fullchain- (   private key)   pkcs12,       JKS (Java Key Store),    Tomcat').  ,        ,    ,         . <br><br> ,       «» —     ,          .  ,    ,      « »,    ,      . <br></div></div><br> <s>  </s>       -  Linux     ,    VDS,     -   ,   .    ,        ,       .       ,  ,     -    .    -    ,        .        ,    ,       . <br><br><h2>  </h2><br>  25  2018    ,          ,     .   ,        -.      . <br><br>      -  ,           ,     ,    .      —      .           ; ,     .     ,         ,        . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et les utilisateurs n'ont pas écrit de leçons. </font><font style="vertical-align: inherit;">Par conséquent, afin de les exciter, le co-auteur a été le premier à publier la leçon, après quoi d'autres utilisateurs ont commencé à publier le leur. </font><font style="vertical-align: inherit;">Surtout à cet égard, les gars d'Ukraine se sont démarqués, qui ont volontiers écrit des cours et les ont traduits en ukrainien, pour lesquels un merci spécial à eux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier mois du site ressemblait à ceci:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 131 utilisateurs enregistrés; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 14 babioles reçues; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 15 leçons écrites (y compris la traduction des leçons dans d'autres langues). </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien sûr, pendant la production, il y avait des problèmes que j'ai essayé de résoudre rapidement, en mettant constamment à jour le site. Mais au fil du temps, l'application est devenue stable, après quoi j'ai commencé à ne traiter que la sauvegarde des données. Au total, lors de l'exploitation du site (du 25/01/2018 au 03/07/2018 et incluant la phase de test), 29 mises à jour ont été effectuées. Il y a eu quelques mises à jour critiques lorsque j'ai corrigé des bugs la nuit et appliqué la mise à jour le matin.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les utilisateurs n'ont pas aimé tout d'un coup, mais quelque chose manquait complètement. Déjà pendant la production, une page a été ajoutée avec une liste d'utilisateurs, une page avec un formulaire de rétroaction et la possibilité d'échanger des babioles uniquement dans leur propre pays. Après que le site a été rendu public, le co-auteur du projet s'est engagé dans sa promotion sur les réseaux sociaux et dans la collecte de commentaires et de suggestions. Nous avons essayé d'écouter la communauté rassemblée sur le site, grâce à laquelle certaines erreurs ont été corrigées et des modifications ont été apportées aux fonctionnalités du site. Merci beaucoup pour ça.</font></font><br><br> ,         .       ,        ,     (     , ,    ). ,   ,           ,            .  ,    ,   ,      (,          ,   ,          ). ,       -              . <br><br><h2>  </h2><br>           5   1.5 ,       : <br><img src="https://habrastorage.org/webt/9b/xa/3a/9bxa3ancjlutsvund78g-j25urc.png"><br> <i>  2018.07.05</i> <br><br>    , ,   ;       ,         ,    . ,   ,     ,       . <br><br><img src="https://habrastorage.org/webt/og/ru/9a/ogru9aosi-xeraaaqollajhnhro.png"><br> <i>   </i> <br><br>   ,           , ,    ,         .   ,      -   (        );       (  )        ( , VDS      ). ,      ,        ,        . <br><br>               (,  CDN   ),   ,    .        ,            ,       .        ,     - ,      ,         ;              . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416883/">https://habr.com/ru/post/fr416883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416867/index.html">Les chercheurs ont créé un dispositif pour les attaques locales contre les systèmes SCADA</a></li>
<li><a href="../fr416871/index.html">J'en ai assez d'accepter les paiements via WebView. Que dois-je faire?</a></li>
<li><a href="../fr416877/index.html">Gestion de l'infrastructure d'impression</a></li>
<li><a href="../fr416879/index.html">Bureau Agile: où héberger des milliers de développeurs?</a></li>
<li><a href="../fr416881/index.html">Introduction aux contrats intelligents. Leurs limites potentielles et réelles</a></li>
<li><a href="../fr416885/index.html">Le service de remise en forme a de nouveau «rendu toutes les apparences» des gouvernements, des services militaires et spéciaux</a></li>
<li><a href="../fr416887/index.html">Comment écrire des commentaires sur les commits</a></li>
<li><a href="../fr416889/index.html">Tout ce que vous devez savoir sur l'IA en quelques minutes</a></li>
<li><a href="../fr416891/index.html">Aux États-Unis, ils étaient toujours autorisés à distribuer des modèles 3D et des dessins numériques pour les armes de bricolage.</a></li>
<li><a href="../fr416893/index.html">Vaadin Flow - un étrange cerf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>