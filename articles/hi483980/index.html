<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЖТ ЁЯХТ ЁЯдЫЁЯП┐ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдЖрдИрдЯреА рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдгред рднрд╛рдЧ 1 - oVirt 4.3 рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреА рддреИрдпрд╛рд░реА ЁЯСиЁЯП╛тАНЁЯОУ ЁЯСйЁЯП╗тАНЁЯТ╗ ЁЯНж</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд╛рдардХреЛрдВ рдХреЛ рдПрдХ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреЗ рднреАрддрд░ рдПрдХ рдЫреЛрдЯреЗ рдЙрджреНрдпрдо рдХреЗ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдордВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдо...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдЖрдИрдЯреА рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдгред рднрд╛рдЧ 1 - oVirt 4.3 рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреА рддреИрдпрд╛рд░реА</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lenvendo/blog/483980/"><p>  рдкрд╛рдардХреЛрдВ рдХреЛ рдПрдХ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреЗ рднреАрддрд░ рдПрдХ рдЫреЛрдЯреЗ рдЙрджреНрдпрдо рдХреЗ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдордВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд▓реЗрдЦреЛрдВ рдХреА рдПрдХ рдЫреЛрдЯреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЬрд╛рдВрдЪ рдХреА рдЬрд╛рдПрдЧреАред </p><a name="habracut"></a><br><h2 id="vvodnaya-chast">  рдкреНрд░рд╛рдердорд┐рдХ рдЕрдерд╡рд╛ рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рд▓рдХреНрд╖рдг </h2><br><p>  <strong>рдбреАрдкреАрд╕реА</strong> (рдбрд╛рдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╕реЗрдВрдЯрд░) рдХреЗ рддрд╣рдд рд╕рдордЭрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><ul><li>  рдЙрджреНрдпрдо рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЕрдкрдиреЗ "рд╕рд░реНрд╡рд░ рд░реВрдо" рдореЗрдВ рдЦреБрдж рдХрд╛ рд░реИрдХ рдЬреЛ рдмрд┐рдЬрд▓реА рдФрд░ рд╢реАрддрд▓рди рдЙрдкрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рджреЛ рд╕реНрд╡рддрдВрддреНрд░ рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ; </li><li>  рдЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рд╕реНрдерд┐рдд рдЕрдкрдиреЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдХрд┐рд░рд╛рдП рдкрд░ рд░реИрдХ - рддрдерд╛рдХрдерд┐рдд  рдХреЛрд▓рд╛рдЬрд╝реЗрд╢рди, рдЬреЛ рдЯрд┐рдпрд░ III рдпрд╛ IV рдорд╛рдирдХ рдХрд╛ рдЕрдиреБрдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬреЛ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдмрд┐рдЬрд▓реА рдЖрдкреВрд░реНрддрд┐, рд╢реАрддрд▓рди рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрддрд╛ рд╣реИ рдФрд░ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ; </li><li>  рдЯреАрдпрд░ III рдпрд╛ IV рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрдЯреНрдЯреЗ рдкрд░ рдЙрдкрдХрд░рдгред </li></ul><br><p>  рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕рд╛ рдЖрд╡рд╛рд╕ рд╡рд┐рдХрд▓реНрдк - рдкреНрд░рддреНрдпреЗрдХ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕рдм рдХреБрдЫ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╣реИ, рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдХрдИ рдореБрдЦреНрдп рдХрд╛рд░рдХреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ: </p><br><ul><li>  рдЙрджреНрдпрдо рдХрд╛ рдЕрдкрдирд╛ рдЖрдИрдЯреА рдврд╛рдВрдЪрд╛ рдХреНрдпреЛрдВ рд╣реЛрддрд╛ рд╣реИ; </li><li>  рдЖрдИрдЯреА рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ (рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА, рдореИрдиреЗрдЬрдмрд┐рд▓рд┐рдЯреА, рдЖрджрд┐) рд╕реЗ рдЙрджреНрдпрдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ; </li><li>  рдЖрдИрдЯреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдирд┐рд╡реЗрд╢ рдХреА рд░рд╛рд╢рд┐, рд╕рд╛рде рд╣реА рдпрд╣ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рд▓рд╛рдЧрдд рд╣реИ - рдкреВрдВрдЬреА (рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдЖрдкрдХреЗ рдЙрдкрдХрд░рдг рдЦрд░реАрджрдирд╛), рдпрд╛ рд╕рдВрдЪрд╛рд▓рди (рдЙрдкрдХрд░рдг рдЖрдорддреМрд░ рдкрд░ рдХрд┐рд░рд╛рдП рдкрд░ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ); </li><li>  рдЙрджреНрдпрдо рдХрд╛ рдирд┐рдпреЛрдЬрди рдХреНрд╖рд┐рддрд┐рдЬред </li></ul><br><p>  рдЙрди рдХрд╛рд░рдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рдХреБрдЫ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдЕрдкрдиреЗ рдЖрдИрдЯреА рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рдмрдирд╛рдиреЗ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрджреНрдпрдо рдХреЗ рдирд┐рд░реНрдгрдп рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдпрд╣ рджрд┐рдЦрд╛рдирд╛ рд╣реИ рдХрд┐ рдпрд╣ рдмрд╣реБрдд рд╣реА рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдБрдЪрд╛ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП, рддрд╛рдХрд┐ рдпрд╣ рджреЛрдиреЛрдВ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рд╣реЛ рдФрд░ рдкреИрд╕реЗ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрднрд╡ рд╣реЛ рд╕рдХреЗ - рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рд▓рд╛рдЧрдд рдХреЛ рдХрдо рдХрд░реЗрдВ, рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЙрдирд╕реЗ рдмрдЪреЗрдВред </p><br><p>  рдЬрдм рддрдХ рд▓рдВрдмреЗ рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, рдпрд╣ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкрд░ рдмрдЪрдд рдХрд░рдиреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рджреЛ рдмрд╛рд░ рднреБрдЧрддрд╛рди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рд╕реЗ рднреА рдЕрдзрд┐рдХред  рд▓реЗрдХрд┐рди рдлрд┐рд░ рд╕реЗ - рдЕрдЪреНрдЫрд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░, рдпрд╣ рд╕рд┐рд░реНрдл рдПрдХ рд╕рд┐рдлрд╛рд░рд┐рд╢ рд╣реИ, рдФрд░ рдЖрдЦрд┐рд░рдХрд╛рд░ рдХреНрдпрд╛ рдЦрд░реАрджрдирд╛ рд╣реИ рдФрд░ рдХрд┐рддрдирд╛ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрджреНрдпрдо рдХреА рдХреНрд╖рдорддрд╛рдУрдВ, рдФрд░ рдЗрд╕рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ "рд▓рд╛рд▓рдЪ" рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, "рд▓рд╛рд▓рдЪ" рд╢рдмреНрдж рдХреЛ рд╢рдмреНрдж рдХреЗ рдЕрдЪреНрдЫреЗ рдЕрд░реНрде рдореЗрдВ рд╕рдордЭрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рдг рдореЗрдВ рд▓реЛрд╣реЗ рдореЗрдВ рдирд┐рд╡реЗрд╢ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИ, рддрд╛рдХрд┐ рдмрд╛рдж рдореЗрдВ рдЗрд╕рдХреЗ рдЖрдЧреЗ рдХреЗ рд╕рдорд░реНрдерди рдФрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдореЗрдВ рдХреЛрдИ рдЧрдВрднреАрд░ рд╕рдорд╕реНрдпрд╛ рди рд╣реЛ, рдХреНрдпреЛрдВрдХрд┐ рд╢реБрд░реВ рдореЗрдВ рдЧрд▓рдд рдирд┐рдпреЛрдЬрди рдФрд░ рдЕрддреНрдпрдзрд┐рдХ рдмрдЪрдд рд╕реЗ рднрд╡рд┐рд╖реНрдп рдмрди рд╕рдХрддрд╛ рд╣реИред рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдорд╣рдВрдЧрд╛ рд╣реИред </p><br><p>  рддреЛ, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдбреЗрдЯрд╛: </p><br><ul><li>  рдПрдХ рдЙрджреНрдпрдо рд╣реИ рдЬрд┐рд╕рдиреЗ рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рд╡реЗрдм рдкреЛрд░реНрдЯрд▓ рдмрдирд╛рдиреЗ рдФрд░ рдЕрдкрдиреА рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдбрд╛рд▓рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рд╣реИ; </li><li>  рдХрдВрдкрдиреА рдиреЗ рдЕрдкрдиреЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдПрдХ рдЕрдЪреНрдЫреЗ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд░реИрдХ рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдЬреЛ рдЯрд┐рдпрд░ III рдорд╛рдирдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкреНрд░рдорд╛рдгрд┐рдд рд╣реИ; </li><li>  рдХрдВрдкрдиреА рдиреЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкрд░ рдЬреНрдпрд╛рджрд╛ рдмрдЪрдд рдирд╣реАрдВ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдФрд░ рдЗрд╕рд▓рд┐рдП рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдЧрд╛рд░рдВрдЯреА рдФрд░ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрдкрдХрд░рдг рдЦрд░реАрджреЗ: </li></ul><br><div class="spoiler">  <b class="spoiler_title">рдЙрдкрдХрд░рдг рд╕реВрдЪреА</b> <div class="spoiler_text"><blockquote><ul><li>  рджреЛ рднреМрддрд┐рдХ рдбреЗрд▓ PowerEdge R640 рд╕рд░реНрд╡рд░ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИрдВ: </li><li>  <em>рджреЛ рдЗрдВрдЯреЗрд▓ Xeon рдЧреЛрд▓реНрдб 5120 рдкреНрд░реЛрд╕реЗрд╕рд░</em> </li><li>  <em>512 рдЬреАрдмреА рд░реИрдо</em> </li><li>  <em>рдУрдПрд╕ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП RAID 1 рдореЗрдВ рджреЛ рдПрд╕рдПрдПрд╕ рдбрд┐рд╕реНрдХ</em> </li><li>  <em>рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд 4-рдкреЛрд░реНрдЯ 1 рдЬреА рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб</em> </li><li>  <em>рджреЛ 2-рдкреЛрд░реНрдЯ 10G рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб</em> </li><li>  <em>рдПрдХ 2-рдкреЛрд░реНрдЯ рдПрдлрд╕реА рдПрдЪрдмреАрдП 16 рдЬреАред</em> </li><li>  2-рдирд┐рдпрдВрддреНрд░рдХ рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓реА рдбреЗрд▓ рдПрдордбреА 3820 рдПрдл, рдбреЗрд▓ 16 рдЬреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдбреЗрд▓ рдореЗрдЬрдмрд╛рдиреЛрдВ рд╕реЗ рдЬреБрдбрд╝рд╛; </li><li> рджреВрд╕рд░реЗ рд╕реНрддрд░ рдХреЗ рджреЛ рд╕реНрд╡рд┐рдЪ - рд╕рд┐рд╕реНрдХреЛ WS-C2960RX-48FPS-L рд╕реНрдЯреИрдХреНрдб; </li><li>  рджреЛ рдкрд░рдд 3 рд╕реНрд╡рд┐рдЪ - рд╕рд┐рд╕реНрдХреЛ WS-C3850-24T-E, рдЦрдбрд╝реА; </li><li>  рд░реИрдХ, рдпреВрдкреАрдПрд╕, рдкреАрдбреАрдпреВ, рдХрдВрд╕реЛрд▓ рд╕рд░реНрд╡рд░ - рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдПред </li></ul><br></blockquote></div></div><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдореМрдЬреВрджрд╛ рдЙрдкрдХрд░рдгреЛрдВ рдореЗрдВ рдХреНрд╖реИрддрд┐рдЬ рдФрд░ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреА рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рд╣реИрдВ, рдЕрдЧрд░ рдХрдВрдкрдиреА рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдПрдХ рд╕рдорд╛рди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреА рдЕрдиреНрдп рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдХрд░ рд╕рдХрддреА рд╣реИ, рдФрд░ рдПрдХ рд▓рд╛рдн рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░рддреА рд╣реИ рдЬрд┐рд╕реЗ рдЖрдЧреЗ рдХреА рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдФрд░ рд▓рд╛рдн рд╡реГрджреНрдзрд┐ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░ рдореЗрдВ рдирд┐рд╡реЗрд╢ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЙрджреНрдпрдо рд╣рдорд╛рд░реЗ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддрд╛ рд╣реИ рддреЛ рд╣рдо рдХреНрдпрд╛ рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><ul><li>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 2960X рд╕реНрд╡рд┐рдЪ рдкрд░ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрдбрд╝рд╛ рд░рд┐рдЬрд░реНрд╡ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЖрдк рдЕрдзрд┐рдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕рд░реНрд╡рд░ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ; </li><li>  рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рд░реНрд╡рд░ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛ FC рд╕реНрд╡рд┐рдЪ рдЦрд░реАрджреЗрдВ; </li><li>  рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рд╕рд░реНрд╡рд░ рдХреЛ рдЕрдкрдЧреНрд░реЗрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рдореЗрдореЛрд░реА рдЬреЛрдбрд╝реЗрдВ, рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛ рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдмрджрд▓реЗрдВ, рдореМрдЬреВрджрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдПрдбреЗрдкреНрдЯрд░ рдХреЛ 10G рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ; </li><li>  рдЖрдк рдЖрд╡рд╢реНрдпрдХ рдбрд┐рд╕реНрдХ рдХреЗ рд╕рд╛рде рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдбрд┐рд╕реНрдХ рдЕрд▓рдорд╛рд░рд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ - рдирд┐рдпреЛрдЬрд┐рдд рднрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрд╕рдПрдПрд╕, рдПрд╕рдПрдЯреАрдП рдпрд╛ рдПрд╕рдПрд╕рдбреА; </li><li>  FC рд╕реНрд╡рд┐рдЪ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдФрд░ рднреА рдЕрдзрд┐рдХ рдбрд┐рд╕реНрдХ рдХреНрд╖рдорддрд╛ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рд╕рд┐рд╕реНрдЯрдо рдЦрд░реАрдж рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрджрд┐ рдЖрдк рдЗрд╕рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░рд┐рдореЛрдЯ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╡рд┐рдХрд▓реНрдк рдЦрд░реАрджрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдбреЗрдЯрд╛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рд╕реНрдЯреЛрд░реЗрдЬ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреЗ рдмреАрдЪ рджреЛрдиреЛрдВ рдХреЗ рдмреАрдЪ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд▓реЗрдХрд┐рди рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░реЗ рд╣реИ рд▓реЗрдЦ рдХрд╛ рджрд╛рдпрд░рд╛); </li><li>  рддреАрд╕рд░реЗ рд╕реНрддрд░ рдХреЗ рд╕реНрд╡рд┐рдЪ рднреА рд╣реИрдВ - рд╕рд┐рд╕реНрдХреЛ 3850, рдЬрд┐рд╕реЗ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ рдЙрдЪреНрдЪ рдЧрддрд┐ рд╡рд╛рд▓реЗ рдорд╛рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдХреЛрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдмрд╣реБрдд рдорджрдж рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЖрдВрддрд░рд┐рдХ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рдмрдврд╝рддрд╛ рд╣реИред  3850 рдореЗрдВ 10G рдкреЛрд░реНрдЯ рднреА рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдг рдХреЛ 10G рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рддреЗ рд╕рдордп рдмрд╛рдж рдореЗрдВ рд╕рдХреНрд░рд┐рдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br><p>  рдЪреВрдВрдХрд┐ рдЕрдм рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдХреЗ рдмрд┐рдирд╛ рдХрд╣реАрдВ рдирд╣реАрдВ рд╣реИ, рддреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╣рдо рдкреНрд░рд╡реГрддреНрддрд┐ рдореЗрдВ рд╣реЛрдВрдЧреЗ, рдпрд╣ рд╕рдм рдЕрдзрд┐рдХ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рддрддреНрд╡реЛрдВ (рд╡реЗрдм тАЛтАЛрд╕рд░реНрд╡рд░, рдбреЗрдЯрд╛рдмреЗрд╕, рдЖрджрд┐) рдХреЗ рд▓рд┐рдП рдорд╣рдВрдЧреЗ рд╕рд░реНрд╡рд░ рдЦрд░реАрджрдиреЗ рдХреА рд▓рд╛рдЧрдд рдХреЛ рдХрдо рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╢рд╛рдирджрд╛рд░ рддрд░реАрдХрд╛ рд╣реИ, рдЬреЛ рд╣рдореЗрд╢рд╛ рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдХрдо рд▓реЛрдб рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╡рд╣реА рд╣реИ рдЬреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд▓реЙрдиреНрдЪ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╣реЛрдЧрд╛ред </p><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдХреЗ рдХрдИ рдЕрдиреНрдп рдлрд╛рдпрджреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕рд░реНрд╡рд░ рдХреА рд╡рд┐рдлрд▓рддрд╛ рд╕реЗ рд╡реАрдПрдо рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛, рдЙрдирдХреЗ рд░рдЦрд░рдЦрд╛рд╡ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рд▓рд╛рдЗрд╡ рдкреНрд░рд╡рд╛рд╕, рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдореИрдиреБрдЕрд▓ рдпрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд▓реЛрдб рд╕рдВрддреБрд▓рди рдЖрджрд┐ред </p><br><p>  рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬрд╝ рджреНрд╡рд╛рд░рд╛ рдЕрдзрд┐рдЧреГрд╣реАрдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП, рдЕрддреНрдпрдзрд┐рдХ рд╕реБрд▓рдн VMware vSphere рдХреНрд▓рд╕реНрдЯрд░ рдХреА рддреИрдирд╛рддреА рд╕реНрд╡рдпрдВ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ VMware рдХреЗ рдХрд┐рд╕реА рднреА рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЛ рдЙрд╕рдХреЗ рдШреЛрдбрд╝реЗ рдХреА рдХреАрдордд рдХреЗ рдЯреИрдЧ рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рдо рдмрд┐рд▓реНрдХреБрд▓ рдореБрдлреНрдд рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдкреНрд░рдмрдВрдзрди рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ - <a href="https://ru.wikipedia.org/wiki/OVirt"><strong>oVirt</strong></a> , рдЬрд┐рд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдкреНрд░рд╕рд┐рджреНрдз рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рдЙрддреНрдкрд╛рдж - <a href="https://ru.bmstu.wiki/RHEV_(Red_Hat_Enterprise_Virtualization)"><strong>RHEV</strong></a> ред </p><br><p>  <strong>OVirt</strong> рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рднреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рддрддреНрд╡реЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рдорд┐рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рдЕрддреНрдпрдзрд┐рдХ рд╕реБрд▓рдн рдЖрднрд╛рд╕реА рдорд╢реАрдиреЛрдВ рдХреЗ рд╕рд╛рде рдЖрд╕рд╛рдиреА рд╕реЗ рдХрд╛рдо рдХрд░ рд╕рдХреЗрдВ - рдпреЗ рдбреЗрдЯрд╛рдмреЗрд╕, рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди, рдкреНрд░реЙрдХреНрд╕реА, рдмреИрд▓реЗрдиреНрд╕рд░, рд▓реЙрдЧ рдФрд░ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдЖрджрд┐ рд╣реИрдВред nред, рдЕрд░реНрдерд╛рдд, рд╣рдорд╛рд░реЗ рдЙрджреНрдпрдо рдХрд╛ рд╡реЗрдм рдкреЛрд░реНрдЯрд▓ рдХреНрдпрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдкрд░рд┐рдЪрдп рдХреЛ рд╕рд╛рд░рд╛рдВрд╢рд┐рдд рдХрд░рддреЗ рд╣реБрдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓реЗрдЦ рд╣рдореЗрдВ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ рдЙрджреНрдпрдо рдХреЗ рд╕рдВрдкреВрд░реНрдг рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдФрд░ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рдХреИрд╕реЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рдП: </p><br><div class="spoiler">  <b class="spoiler_title">рд▓реЗрдЦреЛрдВ рдХреА рд╕реВрдЪреА</b> <div class="spoiler_text"><ul><li>  <strong>рднрд╛рдЧ 1.</strong> рдУрд╡рд┐рд░реНрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░реА 4.3ред </li><li>  <strong>рднрд╛рдЧ 2.</strong> рдУрд╡рд░реНрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ 4.3ред </li><li>  <strong>рднрд╛рдЧ 3.</strong> рд╡реАрдЖрдИрдУрдПрд╕ рд╡рд░реНрдЪреБрдЕрд▓ рд░рд╛рдЙрдЯрд░ рдкрд░ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рд╕рдВрдЧрдардиред </li><li>  <strong>рднрд╛рдЧ 4.</strong> рд╕рд┐рд╕реНрдХреЛ 3850 рд╕реНрдЯреИрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛, рдЗрдВрдЯреНрд░рд╛рдиреЗрдЯ рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рдЖрдпреЛрдЬрди рдХрд░рдирд╛ред </li></ul></div></div><br><h2 id="chast-1-podgotovka-k-razvyortyvaniyu-klastera-ovirt-43">  рднрд╛рдЧ 1. oVirt 4.3 рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреА рддреИрдпрд╛рд░реА </h2><br><h3 id="bazovaya-nastroyka-hostov">  рдореВрд▓ рд╣реЛрд╕реНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди </h3><br><p>  рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рдХрджрдо рд╣реИред  рдУрдПрд╕ рдХреЛ рдареАрдХ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдкрд░ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд▓реЗрдЦ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рджреЗрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред </p><br><p>  рддреЛ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рджреЛ рдбреЗрд▓ рдкреЙрд╡рд░рдбреЗрдЬ R640 рд╣реЛрд╕реНрдЯ рд╣реИрдВ, рдЬрд┐рди рдкрд░ рдЖрдкрдХреЛ рдУрдПрд╕ 4.3 рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдкреВрд░реНрд╡-рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдЪреВрдВрдХрд┐ рд╣рдо рдирд┐: рд╢реБрд▓реНрдХ рдЧреИрд░-рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, <strong>рд╕реЗрдВрдЯреЛрд╕ 7.7 рдХреЛ</strong> рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреА рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП рдЪреБрдирд╛ <strong>рдЧрдпрд╛ рдерд╛</strong> , рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЕрдиреНрдп рдУрдПрд╕ рдХреЛ рднреА рд╣реЛрд╕реНрдЯ рдкрд░ oVirt рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><ul><li>  RHEL рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╡рд┐рд╢реЗрд╖ рдирд┐рд░реНрдорд╛рдг, рддрдерд╛рдХрдерд┐рдд  <a href="https://www.ovirt.org/documentation/admin-guide/chap-Hosts.html"><strong>oVirt рдиреЛрдб</strong></a> ; </li><li>  рдУрдПрд╕ рдУрд░реЗрдХрд▓ рд▓рд┐рдирдХреНрд╕, 2019 рдХреА рдЧрд░реНрдорд┐рдпреЛрдВ рдореЗрдВ, рдЗрд╕ рдкрд░ рдУрд╡рд░реНрдЯ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди <a href="https://blogs.oracle.com/virtualization/announcing-oracle-linux-virtualization-manager">рдХреА рдШреЛрд╖рдгрд╛ рдХреА рдЧрдИ рдереА</a> ред </li></ul><br><p>  OS рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд┐рдд рд╣реИ: </p><br><ul><li>  рджреЛрдиреЛрдВ рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ iDRAC рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </li><li>  рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП BIOS рдФрд░ iDRAC рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ; </li><li>  рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╕рд░реНрд╡рд░ рдХреЛ рдкреНрд░рджрд░реНрд╢рди рдореЛрдб рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╡рд╛рдВрдЫрдиреАрдп рд╣реИ; </li><li>  рд╕рд░реНрд╡рд░ рдкрд░ рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ (RAID1 рдЕрдиреБрд╢рдВрд╕рд┐рдд) рд╕реЗ RAID рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред </li></ul><br><p>  рдлрд┐рд░ рд╣рдо iDRAC рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣рд▓реЗ рдмрдирд╛рдИ рдЧрдИ рдбрд┐рд╕реНрдХ рдкрд░ рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ - рд╕реНрдерд╛рдкрдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ, рдЗрд╕рдореЗрдВ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖рдг рдирд╣реАрдВ рд╣реИрдВред  рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдХрдВрд╕реЛрд▓ рддрдХ рдкрд╣реБрдВрдЪ рднреА iDRAC рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореЙрдирд┐рдЯрд░, рдХреАрдмреЛрд░реНрдб рдФрд░ рдорд╛рдЙрд╕ рдХреЛ рд╕реАрдзреЗ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдФрд░ рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ рд╕реЗ рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЖрдкрдХреЛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд░реЛрдХ рд░рд╣рд╛ рд╣реИред </p><br><p>  OS рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЗрд╕рдХреА рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд░реЗрдВ: </p><br><pre><code class="plaintext hljs">systemctl enable network.service systemctl start network.service systemctl status network.service</code> </pre> <br><pre> <code class="plaintext hljs">systemctl stop NetworkManager systemctl disable NetworkManager systemctl status NetworkManager</code> </pre> <br><pre> <code class="plaintext hljs">yum install -y ntp systemctl enable ntpd.service systemctl start ntpd.service</code> </pre> <br><pre> <code class="plaintext hljs">cat /etc/sysconfig/selinux SELINUX=disabled SELINUXTYPE=targeted</code> </pre> <br><pre> <code class="plaintext hljs">cat /etc/security/limits.conf * soft nofile 65536 * hard nofile 65536</code> </pre> <br><pre> <code class="plaintext hljs">cat /etc/sysctl.conf vm.max_map_count = 262144 vm.swappiness = 1</code> </pre> <br><p>  <u>рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛ рдореВрд▓ рд╕реЗрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</u> </p><br><p>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдУрдПрд╕ рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рдХрд┐рд╕реА рднреА рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдВ, рдУрдПрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХреЗрдВ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХреЗрдВред  рдпрд╣ рдУрдПрд╕ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рджреМрд░рд╛рди рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рджреЛрдиреЛрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">yum -y install epel-release yum update yum -y install bind-utils yum-utils net-tools git htop iotop nmon pciutils sysfsutils sysstat mc nc rsync wget traceroute gzip unzip telnet</code> </pre> <br><p>  рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдФрд░ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдХрд╛ рд╡рд┐рд╖рдп рд╣реИ, рдФрд░ рдпрд╣ рд╕реЗрдЯ рдХреЗрд╡рд▓ рдПрдХ рд╕рд┐рдлрд╛рд░рд┐рд╢ рд╣реИред </p><br><p>  рдЪреВрдВрдХрд┐ рд╣рдорд╛рд░рд╛ рдореЗрдЬрдмрд╛рди рдПрдХ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдХреА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рдПрдЧрд╛, рд╣рдо рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░рджрд░реНрд╢рди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="plaintext hljs">systemctl enable tuned systemctl start tuned systemctl status tuned</code> </pre> <br><pre> <code class="plaintext hljs">tuned-adm profile tuned-adm profile virtual-host</code> </pre> <br><p>  рдЖрдк рдпрд╣рд╛рдВ рдкреНрд░рджрд░реНрд╢рди рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ: " <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_tuning_and_optimization_guide/chap-virtualization_tuning_optimization_guide-tuned">рдЕрдзреНрдпрд╛рдп 4. рдЯреНрдпреВрдиреНрдб рдФрд░ рдЯреНрдпреВрдиреНрдб-рдПрдб</a> "ред </p><br><p>  рдУрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрдЧрд▓реЗ рднрд╛рдЧ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ - рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛, рдФрд░ рд╕рд┐рд╕реНрдХреЛ 2960X рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХред </p><br><h3 id="nastroyka-steka-kommutatorov-cisco-2960x">  рд╕рд┐рд╕реНрдХреЛ 2960X рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h3><br><p>  рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд VLANs рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧреА - рдпрд╛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдЕрд▓рдЧ рдбреЛрдореЗрди рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░реЗрдЧреА: </p><br><p>  <strong>рд╡реАрдПрд▓рдПрдПрди 10</strong> - рдЗрдВрдЯрд░рдиреЗрдЯ <br>  <strong>VLAN 17</strong> - рдкреНрд░рдмрдВрдзрди (iDRAC, рднрдВрдбрд╛рд░рдг, рд╕реНрд╡рд┐рдЪ рдкреНрд░рдмрдВрдзрди) <br>  <strong>рд╡реАрдПрд▓рдПрдПрди 32</strong> - рд╡реАрдПрдо рдЙрддреНрдкрд╛рджрди рдиреЗрдЯрд╡рд░реНрдХ <br>  <strong>рд╡реАрдПрд▓рдПрдПрди 33</strong> - рдЗрдВрдЯрд░рдХрдиреЗрдХреНрд╢рди рдиреЗрдЯрд╡рд░реНрдХ (рдмрд╛рд╣рд░реА рдареЗрдХреЗрджрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП) <br>  <strong>рд╡реАрдПрд▓рдПрдПрди 34</strong> - рд╡реАрдПрдо рдкрд░реАрдХреНрд╖рдг рдиреЗрдЯрд╡рд░реНрдХ <br>  <strong>рд╡реАрдПрд▓рдПрдПрди 35</strong> - рд╡реАрдПрдо рдбреЗрд╡рд▓рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ <br>  <strong>рд╡реАрдПрд▓рдПрдПрди 40</strong> - рдирд┐рдЧрд░рд╛рдиреА рдиреЗрдЯрд╡рд░реНрдХ </p><br><p>  рдХрд╛рдо рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо L2 рд╕реНрддрд░ рдкрд░ рдПрдХ рдЖрд░реЗрдЦ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рдЕрдВрдд рдореЗрдВ рдЖрдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><p><img src="https://habrastorage.org/webt/in/ak/8a/inak8aoyty8yujo2zagwdehdytg.jpeg"></p><br><p>  OVirt рд╣реЛрд╕реНрдЯ рдФрд░ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЗ рдмреАрдЪ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рд▓рд┐рдП, рд╕рд╛рде рд╣реА рд╕рд╛рде рд╣рдорд╛рд░реЗ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рдореИрдиреЗрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рд┐рд╕реНрдХреЛ 2960X рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдбреЗрд▓ рд╣реЛрд╕реНрдЯ рдореЗрдВ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд 4-рдкреЛрд░реНрдЯ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП, рдПрдХ рддрд╛рд░реНрдХрд┐рдХ-рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ LACP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ (802.3ad) рдореЗрдВ рднреМрддрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдкреЛрд░реНрдЯ рдХреЗ рд╕рдореВрд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдПрдХ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд┐рд╕реНрдХреЛ 2960X рдХреЗ рд▓рд┐рдП рдЙрдирдХреЗ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ: </p><br><ul><li>  рд╣реЛрд╕реНрдЯ рдкрд░ рдкрд╣рд▓реЗ рджреЛ рдкреЛрд░реНрдЯреНрд╕ рдХреЛ рдмреЙрдиреНрдбрд┐рдВрдЧ рдореЛрдб рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ 2960X рд╕реНрд╡рд┐рдЪ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ - рдЗрд╕ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкрд░, рд╣реЛрд╕реНрдЯ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ <strong><em>рдкреБрд▓</em></strong> , рдирд┐рдЧрд░рд╛рдиреА, тАЛтАЛрдЕрдиреНрдп рд╣реЛрд╕реНрдЯреНрд╕ рдХреЗ рд╕рд╛рде OVirt рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд╛рдЗрд╡ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рднреА рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛; </li><li>  рдореЗрдЬрдмрд╛рди рдкрд░ рджреВрд╕рд░реЗ рджреЛ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЛ рднреА рдмреЙрдиреНрдбрд┐рдВрдЧ рдореЛрдб рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ 2960X рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ - рдУрд╡рд┐рд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдЗрд╕ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкрд░, рдмрд╛рдж рдореЗрдВ рдкреБрд▓реЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рдЗрд╕реА рд╡реАрдПрд▓рдПрдПрди рдореЗрдВ) рдЬрд┐рд╕рд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЗрдВ рдЬреБрдбрд╝реА рд╣реЛрдВрдЧреАред </li><li>  рджреЛрдиреЛрдВ рдиреЗрдЯрд╡рд░реНрдХ рдкреЛрд░реНрдЯреНрд╕, рдПрдХ рд╣реА рд▓реЙрдЬрд┐рдХрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рднреАрддрд░, рд╕рдХреНрд░рд┐рдп рд╣реЛрдВрдЧреЗ, рдЕрд░реНрдерд╛рдд  рд╕рдВрддреБрд▓рди рдореЛрдб рдореЗрдВ рдЙрди рдкрд░ рдпрд╛рддрд╛рдпрд╛рдд рдПрдХ рд╕рд╛рде рдкреНрд░реЗрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li><li>  IP рдиреЛрдб рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдмрд┐рд▓реНрдХреБрд▓ SAME рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред </li></ul><br><p>  <u><strong>2960X</strong> рд╕реНрд╡рд┐рдЪ <strong>рд╕реНрдЯреИрдХ</strong> рдФрд░ рдЙрд╕рдХреЗ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХрд╛ рдореВрд▓ рд╡рд┐рдиреНрдпрд╛рд╕</u> </p><br><p>  рдкрд╣рд▓реЗ, рд╣рдорд╛рд░реЗ рд╕реНрд╡рд┐рдЪ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП: </p><br><ul><li>  рдПрдХ рд░реИрдХ рдореЗрдВ рдШреБрдбрд╝рд╕рд╡рд╛рд░; </li><li>  рд╡рд╛рдВрдЫрд┐рдд рд▓рдВрдмрд╛рдИ рдХреЗ рджреЛ рд╡рд┐рд╢реЗрд╖ рдХреЗрдмрд▓реЛрдВ рджреНрд╡рд╛рд░рд╛ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреИрдм-рдПрд╕рдЯреАрдХреЗ-рдИ -1 рдПрдо; </li><li>  рдмрд┐рдЬрд▓реА рдХреА рдЖрдкреВрд░реНрддрд┐ рд╕реЗ рдЬреБрдбрд╝рд╛; </li><li>  рдХрдВрд╕реЛрд▓ рдкреЛрд░реНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЗ рдХрд╛рд░реНрдп рдХреЗрдВрджреНрд░ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рдЙрдирдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдПред </li></ul><br><p>  рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдирд┐рд░реНрдорд╛рддрд╛ рдХреЗ <a href="https://www.cisco.com/c/en/us/support/switches/catalyst-2960-x-series-switches/products-installation-guides-list.html">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдкреГрд╖реНрда</a> рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред </p><br><p>  рдЙрдкрд░реЛрдХреНрдд рдЪрд░рдгреЛрдВ рдХреЛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╕реНрд╡рд┐рдЪ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред <br>  рдкреНрд░рддреНрдпреЗрдХ рдЯреАрдо рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ, рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдврд╛рдВрдЪреЗ рдХреЗ рднреАрддрд░ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП; рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред <br>  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдХреЛ рдпрдерд╛рд╕рдВрднрд╡ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдФрд░ рдореЗрдЬрдмрд╛рдиреЛрдВ рдФрд░ рднрдВрдбрд╛рд░рдг рдкреНрд░рдмрдВрдзрди рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рдЗрд╕рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рд╣реИред </p><br><p>  1) рдорд╛рд╕реНрдЯрд░ рд╕реНрд╡рд┐рдЪ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ, рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдореЛрдб рдореЗрдВ рдЬрд╛рдПрдВ, рдлрд┐рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЛрдб рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ рдореВрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдмрдирд╛рдПрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдмреБрдирд┐рдпрд╛рджреА рд╕реНрд╡рд┐рдЪ рд╡рд┐рдиреНрдпрд╛рд╕:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> enable configure terminal hostname 2960X no service pad service timestamps debug datetime msec service timestamps log datetime localtime show-timezone msec no service password-encryption service sequence-numbers switch 1 priority 15 switch 2 priority 14 stack-mac persistent timer 0 clock timezone MSK 3 vtp mode transparent ip subnet-zero vlan 17 name Management vlan 32 name PROD vlan 33 name Interconnect vlan 34 name Test vlan 35 name Dev vlan 40 name Monitoring spanning-tree mode rapid-pvst spanning-tree etherchannel guard misconfig spanning-tree portfast bpduguard default spanning-tree extend system-id spanning-tree vlan 1-40 root primary spanning-tree loopguard default vlan internal allocation policy ascending port-channel load-balance src-dst-ip errdisable recovery cause loopback errdisable recovery cause bpduguard errdisable recovery interval 60 line con 0 session-timeout 60 exec-timeout 60 0 logging synchronous line vty 5 15 session-timeout 60 exec-timeout 60 0 logging synchronous ip http server ip http secure-server no vstack interface Vlan1 no ip address shutdown exit</code> </pre></div></div><br><p>  рд╣рдо <strong>wr рдореЗрдо</strong> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд┐рдЧ рдХреЛ рд╕реЗрд╡ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдорд╛рд╕реНрдЯрд░ рд╕реНрд╡рд┐рдЪ 1 рдкрд░ <strong>рд░реАрд▓реЛрдб</strong> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдХреЛ <strong>рдлрд┐рд░</strong> рд╕реЗ <strong>рд▓реЛрдб</strong> рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  2) рд╕реНрдЯреЛрд░реЗрдЬ рдФрд░ iDRAC рд╕рд░реНрд╡рд░ рдХреЗ рдкреНрд░рдмрдВрдзрди рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП VLAN 17 рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдореЛрдб рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдкреЛрд░реНрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдкреНрд░рдмрдВрдзрди рдкреЛрд░реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">interface GigabitEthernet1/0/5 description iDRAC - host1 switchport access vlan 17 switchport mode access spanning-tree portfast edge interface GigabitEthernet1/0/6 description Storage1 - Cntr0/Eth0 switchport access vlan 17 switchport mode access spanning-tree portfast edge interface GigabitEthernet2/0/5 description iDRAC - host2 switchport access vlan 17 switchport mode access spanning-tree portfast edge interface GigabitEthernet2/0/6 description Storage1 тАУ Cntr1/Eth0 switchport access vlan 17 switchport mode access spanning-tree portfast edge exit</code> </pre> </div></div><br><p>  3) рд╕реНрдЯреИрдХ рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдпрд╣ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдЯреИрдХ рдХреЗ рдХрд╛рдордХрд╛рдЬ рдХреА рдЬрд╛рдБрдЪ:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">2960X#show switch stack-ring speed Stack Ring Speed : 20G Stack Ring Configuration: Full Stack Ring Protocol : FlexStack 2960X#show switch stack-ports Switch # Port 1 Port 2 -------- ------ ------ 1 Ok Ok 2 Ok Ok 2960X#show switch neighbors Switch # Port 1 Port 2 -------- ------ ------ 1 2 2 2 1 1 2960X#show switch detail Switch/Stack Mac Address : 0cd0.f8e4. Mac persistency wait time: Indefinite H/W Current Switch# Role Mac Address Priority Version State ---------------------------------------------------------- *1 Master 0cd0.f8e4. 15 4 Ready 2 Member 0029.c251. 14 4 Ready Stack Port Status Neighbors Switch# Port 1 Port 2 Port 1 Port 2 -------------------------------------------------------- 1 Ok Ok 2 2 2 Ok Ok 1 1</code> </pre> </div></div><br><p>  4) 2960X рд╕реНрдЯреИрдХ рдореЗрдВ SSH рдПрдХреНрд╕реЗрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </p><br><p>  SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреВрд░рд╕реНрде рд╕реНрдЯреИрдХ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП, рд╣рдо SVI (рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕реНрд╡рд┐рдЪ) <strong>VLAN17</strong> рдкрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП IP 172.20.1.10 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдкреНрд░рдмрдВрдзрди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рд┐рдЪ рдкрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕рдорд░реНрдкрд┐рдд рдмрдВрджрд░рдЧрд╛рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЙрдЪрд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдФрд░ рдЕрд╡рд╕рд░ рдХрд╛ рдорд╛рдорд▓рд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдкрд░ SSH рдкрд╣реБрдВрдЪ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">ip default-gateway 172.20.1.2 interface vlan 17 ip address 172.20.1.10 255.255.255.0 hostname 2960X ip domain-name hw.home-lab.ru no ip domain-lookup clock set 12:47:04 06 Dec 2019 crypto key generate rsa ip ssh version 2 ip ssh time-out 90 line vty 0 4 session-timeout 60 exec-timeout 60 0 privilege level 15 logging synchronous transport input ssh line vty 5 15 session-timeout 60 exec-timeout 60 0 privilege level 15 logging synchronous transport input ssh aaa new-model aaa authentication login default local username cisco privilege 15 secret my_ssh_password</code> </pre> </div></div><br><p>  рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдореЛрдб рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рд╕рд╡рд░реНрдб рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">enable secret *myenablepassword* service password-encryption</code> </pre> <br><p>  NTP рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">ntp server 85.21.78.8 prefer ntp server 89.221.207.113 ntp server 185.22.60.71 ntp server 192.36.143.130 ntp server 185.209.85.222 show ntp status show ntp associations show clock detail</code> </pre> <br><p>  5) рдПрдерд░рдЪреИрдирд▓ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдФрд░ рдореЗрдЬрдмрд╛рдиреЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рднреМрддрд┐рдХ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдЖрд╕рд╛рдиреА рдХреЗ рд▓рд┐рдП, рд╕рднреА рдЙрдкрд▓рдмреНрдз рд╡реАрдПрд▓рдПрдПрди рдХреЛ рд╕рднреА рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рдПрдЧреА, рд▓реЗрдХрд┐рди рдЖрдорддреМрд░ рдкрд░ рдХреЗрд╡рд▓ рд╡рд╣реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП: </p><br><div class="spoiler">  <b class="spoiler_title">рдПрдерд░рдЪрдиреЗрд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">interface Port-channel1 description EtherChannel with Host1-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk spanning-tree portfast edge trunk interface Port-channel2 description EtherChannel with Host2-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk spanning-tree portfast edge trunk interface Port-channel3 description EtherChannel with Host1-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk spanning-tree portfast edge trunk interface Port-channel4 description EtherChannel with Host2-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk spanning-tree portfast edge trunk interface GigabitEthernet1/0/1 description Host1-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 1 mode active interface GigabitEthernet1/0/2 description Host2-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 2 mode active interface GigabitEthernet1/0/3 description Host1-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 3 mode active interface GigabitEthernet1/0/4 description Host2-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 4 mode active interface GigabitEthernet2/0/1 description Host1-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 1 mode active interface GigabitEthernet2/0/2 description Host2-management switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 2 mode active interface GigabitEthernet2/0/3 description Host1-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 3 mode active interface GigabitEthernet2/0/4 description Host2-VM switchport trunk allowed vlan 10,17,30-40 switchport mode trunk channel-protocol lacp channel-group 4 mode active</code> </pre> </div></div><br><p>  <u><strong>Host1</strong> рдФрд░ <strong>Host2</strong> рдкрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</u> </p><br><p>  рд╣рдо рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рд╕рдВрдмрдВрдз рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдореЙрдбреНрдпреВрд▓ рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рдкреБрд▓реЛрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдореЙрдбреНрдпреВрд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">modinfo bonding modinfo 8021q yum install bridge-utils</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рдореЗрдЬрдмрд╛рди рдФрд░ рдЗрд╕рдХреЗ рднреМрддрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд┐рдП BOND1 рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cat /etc/sysconfig/network-scripts/ifcfg-bond1 #DESCRIPTION - management DEVICE=bond1 NAME=bond1 TYPE=Bond IPV6INIT=no ONBOOT=yes USERCTL=no NM_CONTROLLED=no BOOTPROTO=none BONDING_OPTS='mode=4 lacp_rate=1 xmit_hash_policy=2' cat /etc/sysconfig/network-scripts/ifcfg-em2 #DESCRIPTION - management DEVICE=em2 TYPE=Ethernet BOOTPROTO=none ONBOOT=yes MASTER=bond1 SLAVE=yes USERCTL=no NM_CONTROLLED=no cat /etc/sysconfig/network-scripts/ifcfg-em3 #DESCRIPTION - management DEVICE=em3 TYPE=Ethernet BOOTPROTO=none ONBOOT=yes MASTER=bond1 SLAVE=yes USERCTL=no NM_CONTROLLED=no</code> </pre> </div></div><br><p>  <strong>2960X</strong> рд╕реНрдЯреИрдХ рдФрд░ рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред </p><br><ul><li>  рдореЗрдЬрдмрд╛рди рдкрд░: </li></ul><br><pre> <code class="plaintext hljs">systemctl restart network cat /proc/net/bonding/bond1 Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011) Bonding Mode: IEEE 802.3ad Dynamic link aggregation Transmit Hash Policy: layer2+3 (2) MII Status: up MII Polling Interval (ms): 100 Up Delay (ms): 0 Down Delay (ms): 0 ... 802.3ad info LACP rate: fast Min links: 0 Aggregator selection policy (ad_select): stable System priority: 65535 ... Slave Interface: em2 MII Status: up Speed: 1000 Mbps Duplex: full ... Slave Interface: em3 MII Status: up Speed: 1000 Mbps Duplex: full</code> </pre> <br><ul><li>  <strong>2960X</strong> рд╕реНрд╡рд┐рдЪ <strong>рд╕реНрдЯреИрдХ рдкрд░</strong> : </li></ul><br><pre> <code class="plaintext hljs">2960X#show lacp internal Flags: S - Device is requesting Slow LACPDUs F - Device is requesting Fast LACPDUs A - Device is in Active mode P - Device is in Passive mode Channel group 1 LACP port Admin Oper Port Port Port Flags State Priority Key Key Number State Gi1/0/1 SA bndl 32768 0x1 0x1 0x102 0x3D Gi2/0/1 SA bndl 32768 0x1 0x1 0x202 0x3D 2960X#sh etherchannel summary Flags: D - down P - bundled in port-channel I - stand-alone s - suspended H - Hot-standby (LACP only) R - Layer3 S - Layer2 U - in use N - not in use, no aggregation f - failed to allocate aggregator M - not in use, minimum links not met m - not in use, port not aggregated due to minimum links not met u - unsuitable for bundling w - waiting to be aggregated d - default port A - formed by Auto LAG Number of channel-groups in use: 11 Number of aggregators: 11 Group Port-channel Protocol Ports ------+-------------+-----------+----------------------------------------------- 1 Po1(SU) LACP Gi1/0/1(P) Gi2/0/1(P)</code> </pre> <br><p>  <strong>Host1</strong> рдФрд░ <strong>Host2</strong> рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди </p><br><div class="spoiler">  <b class="spoiler_title">рд╣реЛрд╕реНрдЯ рдкрд░ рдкреНрд░рдмрдВрдзрди рдФрд░ рдЙрд╕рдХреЗ рднреМрддрд┐рдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд▓рд┐рдП BOND1 рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cat /etc/sysconfig/network-scripts/ifcfg-bond0 #DESCRIPTION - management DEVICE=bond0 NAME=bond0 TYPE=Bond BONDING_MASTER=yes IPV6INIT=no ONBOOT=yes USERCTL=no NM_CONTROLLED=no BOOTPROTO=none BONDING_OPTS='mode=4 lacp_rate=1 xmit_hash_policy=2' cat /etc/sysconfig/network-scripts/ifcfg-em0 #DESCRIPTION - management DEVICE=em0 TYPE=Ethernet BOOTPROTO=none ONBOOT=yes MASTER=bond0 SLAVE=yes USERCTL=no NM_CONTROLLED=no cat /etc/sysconfig/network-scripts/ifcfg-em1 #DESCRIPTION - management DEVICE=em1 TYPE=Ethernet BOOTPROTO=none ONBOOT=yes MASTER=bond0 SLAVE=yes USERCTL=no NM_CONTROLLED=no</code> </pre> </div></div><br><p>  <strong>2960X</strong> рд╕реНрдЯреИрдХ рдФрд░ рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">systemctl restart network cat /proc/net/bonding/bond1 2960X#show lacp internal 2960X#sh etherchannel summary</code> </pre> <br><p>  рд╣рдо <strong>рд╡реАрдПрд▓рдПрдПрди 17</strong> рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд╣реЛрд╕реНрдЯ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реЗ рддрд╛рд░реНрдХрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ BOND1 рдкрд░ рдмрд╛рдБрдзрддреЗ рд╣реИрдВ: </p><br><div class="spoiler">  <b class="spoiler_title">рд╣реЛрд╕реНрдЯ 1 рдкрд░ VLAN17 рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cat /etc/sysconfig/network-scripts/ifcfg-bond1.17 DEVICE=bond1.17 NAME=bond1-vlan17 BOOTPROTO=none ONBOOT=yes USERCTL=no NM_CONTROLLED=no VLAN=yes MTU=1500 IPV4_FAILURE_FATAL=yes IPV6INIT=no IPADDR=172.20.1.163 NETMASK=255.255.255.0 GATEWAY=172.20.1.2 DEFROUTE=yes DNS1=172.20.1.8 DNS2=172.20.1.9 ZONE=public</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">рд╣реЛрд╕реНрдЯ 2 рдкрд░ VLAN17 рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cat /etc/sysconfig/network-scripts/ifcfg-bond1.17 DEVICE=bond1.17 NAME=bond1-vlan17 BOOTPROTO=none ONBOOT=yes USERCTL=no NM_CONTROLLED=no VLAN=yes MTU=1500 IPV4_FAILURE_FATAL=yes IPV6INIT=no IPADDR=172.20.1.164 NETMASK=255.255.255.0 GATEWAY=172.20.1.2 DEFROUTE=yes DNS1=172.20.1.8 DNS2=172.20.1.9 ZONE=public</code> </pre> </div></div><br><p>  рд╣рдо рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдЕрдкрдиреА рджреГрд╢реНрдпрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдпрд╣ рд╕рд┐рд╕реНрдХреЛ 2960X рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рдХреЗ рд╕реЗрдЯрдЕрдк рдХреЛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЕрдЧрд░ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрд▓ 2 рд╕реНрддрд░ рдкрд░ рд╕рднреА рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рддрддреНрд╡реЛрдВ рдХрд╛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рд╣реИред </p><br><h3 id="nastroyka-shd-dell-md3820f">  рдбреЗрд▓ MD3820f рд╕рдВрдЧреНрд░рд╣рдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h3><br><p>  рд╕реНрдЯреЛрд░реЗрдЬ рд╕рд┐рд╕реНрдЯрдо рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдкрд░ рдХрд╛рдо рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рдмрдВрдзрди рдЗрдВрдЯрд░рдлреЗрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рд┐рд╕реНрдХреЛ <strong>2960X</strong> рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд╕рд╛рде рд╣реА рдПрдлрд╕реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ <strong>рд╣реЛрд╕реНрдЯ</strong> <strong>1</strong> рдФрд░ <strong>рд╣реЛрд╕реНрдЯ 2 рд╣реЛрд╕реНрдЯ рднреА</strong> ред </p><br><p>  рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рд╕реНрд╡рд┐рдЪ рд╕реНрдЯреИрдХ рд╕реЗ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдП рдЗрд╕рдХреА рд╕рд╛рдорд╛рдиреНрдп рдпреЛрдЬрдирд╛ рдкрд┐рдЫрд▓реЗ рдЕрдзреНрдпрд╛рдп рдореЗрдВ рджреА рдЧрдИ рдереАред </p><br><p>  рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЛ рдПрдлрд╕реА рдкрд░ рднрдВрдбрд╛рд░рдг рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрдиреА рдЪрд╛рд╣рд┐рдП: </p><br><p><img src="https://habrastorage.org/webt/el/k8/5a/elk85aqc6ilmxeiowmh6acrkwri.jpeg"></p><br><p>  рдХрдиреЗрдХреНрд╢рди рдХреЗ рджреМрд░рд╛рди, рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓реА рдкрд░ рдПрдлрд╕реА рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рдПрдлрд╕реА рдПрдЪрдмреАрдП рд╣реЛрд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдбрдмреНрд▓реНрдпреВрдбрдмреНрд▓реНрдпреВрдкреАрдПрди рдкрддреЗ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдпрд╣ рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓реА рдкрд░ рдореЗрдЬрдмрд╛рди рдХреЗ LUNs рдХреЗ рдмрдВрдзрди рдХреЗ рдмрд╛рдж рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ред </p><br><p>  рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЗ рдХрд╛рд░реНрдп рдХреЗрдВрджреНрд░ рдкрд░, рдбреЗрд▓ рдПрдордбреА 3820 рдПрдл рд╕реНрдЯреЛрд░реЗрдЬ рдореИрдиреЗрдЬрдореЗрдВрдЯ рдпреВрдЯрд┐рд▓рд┐рдЯреА рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ - рдкрд╛рд╡рд░ рд╡реЙрд▓реНрдЯ <strong>рдореЙрдбреНрдпреВрд▓рд░ рдбрд┐рд╕реНрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдореИрдиреЗрдЬрд░</strong> ( <strong>рдПрдордбреАрдПрд╕рдПрдо</strong> )ред <br>  рд╣рдо рдЗрд╕реЗ рдЕрдкрдиреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЖрдИрдкреА рдкрддреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЯреАрд╕реАрдкреА / рдЖрдИрдкреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <strong>рд╡реАрдПрд▓рдПрдПрди 17</strong> рд╕реЗ рд╣рдорд╛рд░реЗ рдкрддреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ: </p><br><p>  <strong>рд╕рдВрдЧреНрд░рд╣рдг 1</strong> : </p><br><pre> <code class="plaintext hljs">ControllerA IP - 172.20.1.13, MASK - 255.255.255.0, Gateway - 172.20.1.2 ControllerB IP - 172.20.1.14, MASK - 255.255.255.0, Gateway - 172.20.1.2</code> </pre> <br><p>  рдкрддреЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╕реНрдЯреЛрд░реЗрдЬ рдореИрдиреЗрдЬрдореЗрдВрдЯ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗрдЯ рдХрд░реЗрдВ, рд╕рдордп рд╕реЗрдЯ рдХрд░реЗрдВ, рдХрдВрдЯреНрд░реЛрд▓рд░ рдФрд░ рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рдЖрджрд┐ред <br>  рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <a href="https://www.dell.com/support/manuals/ru/ru/rubsdc/powervault-md3820f/mdseriesagpub/introduction%3Fguid%3Dguid-51208376-0df9-48a8-be66-63c1b06512ae%26lang%3Den-us">рдпрд╣</a> рднрдВрдбрд╛рд░рдг <a href="https://www.dell.com/support/manuals/ru/ru/rubsdc/powervault-md3820f/mdseriesagpub/introduction%3Fguid%3Dguid-51208376-0df9-48a8-be66-63c1b06512ae%26lang%3Den-us">рдкреНрд░рд╢рд╛рд╕рди рдЧрд╛рдЗрдб</a> рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИред </p><br><p>  рдЙрдкрд░реЛрдХреНрдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: </p><br><ol><li>  <strong>рд╣реЛрд╕реНрдЯ</strong> FC <strong>рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛</strong> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред </li><li>  рдПрдХ рдореЗрдЬрдмрд╛рди рд╕рдореВрд╣ - рдореЗрдЬрдмрд╛рди рд╕рдореВрд╣ рдмрдирд╛рдПрдБ рдФрд░ рдЗрд╕рдореЗрдВ рд╣рдорд╛рд░реЗ рджреЛ рдбреЗрд▓ рд╣реЛрд╕реНрдЯ рдЬреЛрдбрд╝реЗрдВред </li><li>  рдЗрд╕рдореЗрдВ рдПрдХ рдбрд┐рд╕реНрдХ рдЧреНрд░реБрдк рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ (рдпрд╛ LUN) рдмрдирд╛рдПрдВ, рдЬрд┐рд╕реЗ рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд╕рд╛рдордиреЗ рдкреЗрд╢ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ (рдпрд╛ LUN) рдХреА рдкреНрд░рд╕реНрддреБрддрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред </li></ol><br><p>  рд╣реЛрд╕реНрдЯ рдПрдлрд╕реА рдкреЛрд░реНрдЯреНрд╕ рдХреЗ рдирдП рд╣реЛрд╕реНрдЯ рдФрд░ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдЖрдЗрдбреЗрдВрдЯрд┐рдлрд╝рд╛рдпрд░ рдХреЛ рдореЗрдиреВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - <strong>рд╣реЛрд╕реНрдЯ рдореИрдкрд┐рдВрдЧ</strong> -&gt; <strong>рдкрд░рд┐рднрд╛рд╖рд┐рдд</strong> -&gt; <strong>рд╣реЛрд╕реНрдЯ ...</strong> <br>  рдПрдлрд╕реА рдПрдЪрдмреАрдП рдореЗрдЬрдмрд╛рди рдХреЗ рдбрдмреНрд▓реНрдпреВрдбрдмреНрд▓реНрдпреВрдкреАрдПрди рдкрддреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ iDRAC рд╕рд░реНрд╡рд░ рдореЗрдВ рдкрд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдирддреАрдЬрддрди, рд╣рдореЗрдВ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдорд┐рд▓рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><p><img src="https://habrastorage.org/webt/p_/uk/u4/p_uku4o-ewgqpyi0xudxqjesfjc.png"></p><br><p>  рдПрдХ рдирдпрд╛ рд╣реЛрд╕реНрдЯ рд╕рдореВрд╣ рдЬреЛрдбрд╝рдирд╛ рдФрд░ рдЗрд╕реЗ рд╣реЛрд╕реНрдЯ рдХрд░рдирд╛ рдореЗрдиреВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - <strong>рд╣реЛрд╕реНрдЯ рдореИрдкрд┐рдВрдЧ</strong> -&gt; <strong>рдкрд░рд┐рднрд╛рд╖рд┐рдд</strong> -&gt; <strong>рдореЗрдЬрдмрд╛рди рд╕рдореВрд╣ ...</strong> <br>  рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП, рдУрдПрд╕ - <strong><em>рд▓рд┐рдирдХреНрд╕ (рдбреАрдПрдо-рдПрдордкреА)</em></strong> рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред </p><br><p>  рд╣реЛрд╕реНрдЯ рдЧреНрд░реБрдк рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, <strong>рд╕реНрдЯреЛрд░реЗрдЬ рдПрдВрдб рдХреЙрдкреА рд╕рд░реНрд╡рд┐рд╕реЗрдЬ</strong> рдЯреИрдм рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдбрд┐рд╕реНрдХ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдПрдХ рдбрд┐рд╕реНрдХ рд╕рдореВрд╣ - <strong>рдбрд┐рд╕реНрдХ рд╕рдореВрд╣</strong> рдмрдирд╛рдПрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, RAID10, рдФрд░ рдЗрд╕рдореЗрдВ рд╕рд╣реА рдЖрдХрд╛рд░ рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ: </p><br><p><img src="https://habrastorage.org/webt/ue/g2/kn/ueg2kn0m3usv1kb4tygvx2vajz0.png"></p><br><p>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рдЕрдВрддрд┐рдо рдЪрд░рдг рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрднрд╛рд╕реА рдбрд┐рд╕реНрдХ (рдпрд╛ LUN) рдХреА рдкреНрд░рд╕реНрддреБрддрд┐ рд╣реИред <br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореЗрдиреВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ - <strong>рд╣реЛрд╕реНрдЯ рдореИрдкрд┐рдВрдЧ</strong> -&gt; <strong>рд▓реВрди рдореИрдкрд┐рдВрдЧ</strong> -&gt; <strong>рдЬреЛрдбрд╝реЗрдВ ...</strong> рд╣рдо рдореЗрдЬрдмрд╛рди рдХреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдХреЗ рдмрдВрдзрди рдмрдирд╛рддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдирдВрдмрд░ рдЕрд╕рд╛рдЗрди рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рд╕рдм рдХреБрдЫ рдЗрд╕ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдХреА рддрд░рд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><p><img src="https://habrastorage.org/webt/db/a-/xq/dba-xqbacgrjxrutupvhvmua7ro.png"></p><br><p>  рд╣рдо рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЕрдЧрд░ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЛ рдЕрдкрдиреЗ рдПрдлрд╕реА рдПрдЪрдмреАрдП рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд╕реНрддреБрдд LUN рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдореИрдк рдХрд┐рдП рдЧрдП рдбреНрд░рд╛рдЗрд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">ls -la /sys/class/scsi_host/ echo "- - -" &gt; /sys/class/scsi_host/host[0-9]/scan</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдХреМрди рд╕реЗ рдЙрдкрдХрд░рдг рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cat /proc/scsi/scsi Attached devices: Host: scsi0 Channel: 02 Id: 00 Lun: 00 Vendor: DELL Model: PERC H330 Mini Rev: 4.29 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi15 Channel: 00 Id: 00 Lun: 00 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi15 Channel: 00 Id: 00 Lun: 01 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi15 Channel: 00 Id: 00 Lun: 04 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi15 Channel: 00 Id: 00 Lun: 11 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi15 Channel: 00 Id: 00 Lun: 31 Vendor: DELL Model: Universal Xport Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi18 Channel: 00 Id: 00 Lun: 00 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi18 Channel: 00 Id: 00 Lun: 01 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi18 Channel: 00 Id: 00 Lun: 04 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi18 Channel: 00 Id: 00 Lun: 11 Vendor: DELL Model: MD38xxf Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 Host: scsi18 Channel: 00 Id: 00 Lun: 31 Vendor: DELL Model: Universal Xport Rev: 0825 Type: Direct-Access ANSI SCSI revision: 05 lsscsi [0:2:0:0] disk DELL PERC H330 Mini 4.29 /dev/sda [15:0:0:0] disk DELL MD38xxf 0825 - [15:0:0:1] disk DELL MD38xxf 0825 /dev/sdb [15:0:0:4] disk DELL MD38xxf 0825 /dev/sdc [15:0:0:11] disk DELL MD38xxf 0825 /dev/sdd [15:0:0:31] disk DELL Universal Xport 0825 - [18:0:0:0] disk DELL MD38xxf 0825 - [18:0:0:1] disk DELL MD38xxf 0825 /dev/sdi [18:0:0:4] disk DELL MD38xxf 0825 /dev/sdj [18:0:0:11] disk DELL MD38xxf 0825 /dev/sdk [18:0:0:31] disk DELL Universal Xport 0825 -</code> </pre> </div></div><br><p>  рдЖрдк рдореЗрдЬрдмрд╛рдиреЛрдВ рдкрд░ <strong>рдорд▓реНрдЯреАрдкрд╛рде</strong> рдХреЛ рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЬрдм рдУрд╡реАрд░реНрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╡рд╣ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдкрд╣рд▓реЗ рд╕реЗ рдЕрдкрдиреЗ рд▓рд┐рдП рд╕рд╛рдВрд╕рдж рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред </p><br><p>  <u>DM Multipath рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</u> </p><br><pre> <code class="plaintext hljs">yum install device-mapper-multipath mpathconf --enable --user_friendly_names y cat /etc/multipath.conf | egrep -v "^\s*(#|$)" defaults { user_friendly_names yes find_multipaths yes } blacklist { wwid 26353900f02796769 devnode "^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*" devnode "^hd[az]" }</code> </pre> <br><p>  рдСрдЯреЛ рд╕реНрдЯрд╛рд░реНрдЯ рдореЗрдВ MP рд╕реЗрд╡рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдЪрд▓рд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">systemctl enable multipathd &amp;&amp; systemctl restart multipathd</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рдПрдордкреА рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рд▓реЛрдб рдХрд┐рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЬрд╛рдБрдЪ:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">lsmod | grep dm_multipath dm_multipath 27792 6 dm_service_time dm_mod 124407 139 dm_multipath,dm_log,dm_mirror modinfo dm_multipath filename: /lib/modules/3.10.0-957.12.2.el7.x86_64/kernel/drivers/md/dm-multipath.ko.xz license: GPL author: Sistina Software &lt;dm-devel@redhat.com&gt; description: device-mapper multipath target retpoline: Y rhelversion: 7.6 srcversion: 985A03DCAF053D4910E53EE depends: dm-mod intree: Y vermagic: 3.10.0-957.12.2.el7.x86_64 SMP mod_unload modversions signer: CentOS Linux kernel signing key sig_key: A3:2D:39:46:F2:D3:58:EA:52:30:1F:63:37:8A:37:A5:54:03:00:45 sig_hashalgo: sha256</code> </pre> </div></div><br><p>  рдореМрдЬреВрджрд╛ рдмрд╣реБрдкрде рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рджреЗрдЦреЗрдВ: </p><br><pre> <code class="plaintext hljs">mpathconf multipath is enabled find_multipaths is disabled user_friendly_names is disabled dm_multipath module is loaded multipathd is running</code> </pre> <br><p>  рднрдВрдбрд╛рд░рдг рдореЗрдВ рдПрдХ рдирдпрд╛ LUN рдЬреЛрдбрд╝рдиреЗ рдФрд░ рдЗрд╕реЗ рд╣реЛрд╕реНрдЯ рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЗрд╕реЗ HBA рд╣реЛрд╕реНрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдХреИрди рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><pre> <code class="plaintext hljs">systemctl reload multipathd multipath -v2</code> </pre> <br><p>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рд╣рдо рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рд╕рднреА LUN рдХреЛ рдореЗрдЬрдмрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рднрдВрдбрд╛рд░рдг рдкрд░ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдХреНрдпрд╛ рд╕рднреА рдХреЗ рдкрд╛рд╕ рджреЛ рд░рд╛рд╕реНрддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдПрдордкреА рдСрдкрд░реЗрд╢рди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">multipath -ll 3600a098000e4b4b3000003175cec1840 dm-2 DELL ,MD38xxf size=2.0T features='3 queue_if_no_path pg_init_retries 50' hwhandler='1 rdac' wp=rw |-+- policy='service-time 0' prio=14 status=active | `- 15:0:0:1 sdb 8:16 active ready running `-+- policy='service-time 0' prio=9 status=enabled `- 18:0:0:1 sdi 8:128 active ready running 3600a098000e4b48f000002ab5cec1921 dm-6 DELL ,MD38xxf size=10T features='3 queue_if_no_path pg_init_retries 50' hwhandler='1 rdac' wp=rw |-+- policy='service-time 0' prio=14 status=active | `- 18:0:0:11 sdk 8:160 active ready running `-+- policy='service-time 0' prio=9 status=enabled `- 15:0:0:11 sdd 8:48 active ready running 3600a098000e4b4b3000003c95d171065 dm-3 DELL ,MD38xxf size=150G features='3 queue_if_no_path pg_init_retries 50' hwhandler='1 rdac' wp=rw |-+- policy='service-time 0' prio=14 status=active | `- 15:0:0:4 sdc 8:32 active ready running `-+- policy='service-time 0' prio=9 status=enabled `- 18:0:0:4 sdj 8:144 active ready running</code> </pre> </div></div><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рднрдВрдбрд╛рд░рдг рдкреНрд░рдгрд╛рд▓реА рдкрд░ рд╕рднреА рддреАрди рдЖрднрд╛рд╕реА рдбрд┐рд╕реНрдХ рджреЛ рддрд░реАрдХреЛрдВ рд╕реЗ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╕рднреА рддреИрдпрд╛рд░реА рдХрд╛ рдХрд╛рдо рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╣рдо рдореБрдЦреНрдп рднрд╛рдЧ рдкрд░ рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ - рдУрд╡рд░реНрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдХреА рд╕реНрдерд╛рдкрдирд╛, рдЬрд┐рд╕ рдкрд░ рдЕрдЧрд▓реЗ рд▓реЗрдЦ рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреАред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi483980/">https://habr.com/ru/post/hi483980/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi483964/index.html">JSON рдпрд╛ рдЖрдкрдХреЗ рдкрд╣рд▓реЗ API рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ рдбрд░реЛ рдордд</a></li>
<li><a href="../hi483972/index.html">рдЕрдкрдиреЗ рд╡реНрдпрд╡рд╕рд╛рдп рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП Quora рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi483974/index.html">ISCSI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд┐рдл - рдпрд╛ рдЭреВрд▓рд╛ рдореЗрдВ рдЦрдбрд╝реЗ рд╣реЛрдХрд░ рд╕реНрдХреАрдЗрдВрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../hi483976/index.html">2020 рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рдЦрддрд░реЗ: рдЫреБрдЯреНрдЯрд┐рдпреЛрдВ рдХреЗ рдмрд╛рдж рд╣рдореЗрдВ рдХреНрдпрд╛ рдЗрдВрддрдЬрд╛рд░ рд╣реИ</a></li>
<li><a href="../hi483978/index.html">2020 рдореЗрдВ рдЖрдзреБрдирд┐рдХ рд╡реЗрдм рдРрдк рд╡рд┐рдХрд╛рд╕ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд╕рдордЭрдирд╛</a></li>
<li><a href="../hi483986/index.html">Emotiv рдЗрдирд╕рд╛рдЗрдЯ рдХреЗ рд╕рд╛рде рд░реЛрдмреЛрдЯ рд╡рд┐рдЪрд╛рд░ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi483988/index.html">рдорд╛рдЗрдХреНрд░реЛрд╕реНрдкрд╛, рдпрд╛ рдПрдХ рд╡рд░реНрдЧ рдкрд╣рд┐рдпрд╛ рдХрд╛ рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi483992/index.html">рдХреБрдЫ рдЧреНрд░рд╣ рдЕрдкрдиреЗ рдЖрдХрд╛рд╢ рдХреЛ рдХреНрдпреЛрдВ рдЦрд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi483994/index.html">рдПрдХ рдиреМрдХрд╛ рдкрд░ рдЖрдИрдЯреА рд╕реНрдерд╛рдирд╛рдВрддрд░рдгред рд╕реНрд╡реАрдбрди рд╕реЗ рд╕реНрдкреЗрди рддрдХ</a></li>
<li><a href="../hi484004/index.html">@Pythonetc рджрд┐рд╕рдВрдмрд░ 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>