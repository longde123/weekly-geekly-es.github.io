<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游냅 游뎴 九뉦잺 Resolvemos un problema l칩gico para estudiantes en SQL 游뱜游낕 游볘 游땟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todo comenz칩 con la siguiente pantalla en el grupo de Whatsap con el siguiente contenido (el original no est치 en ruso, pero no importa): 

 La suma de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Resolvemos un problema l칩gico para estudiantes en SQL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423871/">  Todo comenz칩 con la siguiente pantalla en el grupo de Whatsap con el siguiente contenido (el original no est치 en ruso, pero no importa): <br><br>  <i><b>La suma de las edades de Sasha, Petit y Viti tiene 67 a침os.</b></i>  <i><b>Cuando Victor ten칤a la edad de Sasha, quedaban 3 a침os m치s antes del nacimiento de Petit.</b></i>  <i><b>쮺u치l es la suma de las edades de Sasha y Petit?</b></i> <br><br>  Est치 claro que la tarea es para escolares, pero despu칠s de largas horas de resoluci칩n de problemas SQL-EX (por cierto, gracias a ellos por tareas interesantes y de alta calidad) lo primero que viene a la mente es: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> r2 + r3 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rownum</span></span> r1 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> tab) r1 <span class="hljs-keyword"><span class="hljs-keyword">CROSS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rownum</span></span> r2 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> tab) r2 <span class="hljs-keyword"><span class="hljs-keyword">CROSS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rownum</span></span> r3 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> tab) r3 <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> r1 + r2 + r3 = <span class="hljs-number"><span class="hljs-number">67</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> r1 - r2 = r3 + <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br>  Donde <i>tab</i> es cualquier tableta con aproximadamente 100 l칤neas Soluci칩n: 32, a lo que el colega del grupo respondi칩: "쯏 cu치ntas individualmente?"  Eliminamos DISTINCT y cambiamos "+" a "," ... resulta que 31 pares de opciones ... no es una respuesta exacta.  Por alguna raz칩n, quer칤a responder con seguridad, y tener al menos alguna evidencia a mano. <br><br>  Entonces  Tomamos todos los clientes disponibles en la base de datos a la mano con los nombres de la tarea y sus cumplea침os: <br><a name="habracut"></a><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">upper</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(birthdate, <span class="hljs-string"><span class="hljs-string">'RRRRMMDD'</span></span>) dob <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> clients <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">upper</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>))</code> </pre> <br>  <i>En el original, los nombres son diferentes, est치 claro que la base de datos contiene nombres de acuerdo con el pasaporte.</i> <br>  Nos conectamos tres veces y agregamos las condiciones de que la suma de las edades de Sasha y Petya es 32 cuando Vita tiene 35 a침os: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> v.dob vitya, <span class="hljs-comment"><span class="hljs-comment">--   ,    s.dob sasha, p.dob petya, add_months(v.dob, 35 * 12) data_zadachi --    ) FROM tv CROSS JOIN ts CROSS JOIN tp WHERE v.name = '' AND s.name = '' AND p.name = '' AND trunc((add_months(v.dob, 35 * 12) - s.dob) / 365.24) + trunc((add_months(v.dob, 35 * 12) - p.dob) / 365.24) = 32</span></span></code> </pre> <br>  pero no pens칠 en calcular el n칰mero de clientes por adelantado, y result칩 ser muy vano.  Por supuesto, hab칤a muchos de ellos, y multiplic치ndolos uno por el otro, a pesar de alguna condici칩n, uno podr칤a esperar el resultado para siempre.  De alguna manera, necesita reducir el n칰mero de l칤neas, digamos que dejamos solo los mismos nombres.  Despu칠s de agregar las condiciones, el n칰mero de opciones posibles result칩 ser de aproximadamente medio mill칩n.  Adem치s, se agregaron condiciones de que la edad no puede ser negativa, y hubo cierta confusi칩n con las fechas de nacimiento el mismo d칤a, por lo que correg칤 un poco la precisi칩n.  Pero a칰n as칤 hubo muchos resultados. <br><br>  Ya no estaba suscrito en el grupo que estaba tratando de probar algo, pero no sali칩 nada.  Uno de los colegas sugiri칩 buscar solo clientes con un patron칤mico raro.  Esto ya no se ajustaba a las condiciones del problema, pero arroj칩 el siguiente pensamiento. <br><br>  쯇or qu칠 los personajes de la tarea no son hermanos?  Es decir  No es el hecho de que sean los hermanos, no podemos verificar esto, pero los hom칩nimos con el mismo patron칤mico, esto es f치cil.  Quiz치s no haya ninguno en la base de datos, fue un poco aterrador, pero despu칠s de agregar la condici칩n, la solicitud a칰n emiti칩 13,000 opciones posibles. <br><br>  Al darme cuenta de que estaba perdiendo el tiempo en todo tipo de tonter칤as in칰tiles, antes de dejar todo, decid칤 verificar mis apellidos y mi patron칤mico.  Y aqu칤 est치, con los apellidos no hay problemas, pero en lugar de un segundo nombre en las p치ginas interminables de la muestra, aparecen guiones.  Es decir  la solicitud b치sicamente dej칩 solo a aquellos clientes cuyos segundos nombres no se conoc칤an.  Simplemente agregando la 칰ltima condici칩n, obtuve solo 3 entradas.  Esta pantalla con las palabras "es poco probable que la tarea se formule en los a침os 50, y si abandonas solo 2001, entonces los Hermanos ten칤an 35, 3, 29" <br><br>  Por supuesto, todo esto es muy arbitrario, y por el bien de una broma, no es necesario tomar todo en serio.  Divirti칠ndonos como podemos, somos programadores ... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423871/">https://habr.com/ru/post/es423871/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423861/index.html">Linternas solares: necesitamos m치s luz</a></li>
<li><a href="../es423863/index.html">Confrontaci칩n en PHDays 8 - Vista SOC</a></li>
<li><a href="../es423865/index.html">Roskomnadzor inform칩 p칰blicamente</a></li>
<li><a href="../es423867/index.html">Fundador del estudio de impresi칩n 3D: sobre su trabajo</a></li>
<li><a href="../es423869/index.html">El futuro de los trabajos. Lo principal del informe del Foro Econ칩mico Mundial</a></li>
<li><a href="../es423873/index.html">Descripci칩n general de la impresora 3D PICASO 3D Designer X</a></li>
<li><a href="../es423875/index.html">Almacenamiento de una gran cantidad de archivos.</a></li>
<li><a href="../es423877/index.html">29-31 de octubre: creaci칩n de un cl칰ster de Kubernetes listo para la producci칩n</a></li>
<li><a href="../es423879/index.html">쮼s f치cil agregar nuevas funciones al marco anterior? Harina de elecci칩n sobre el ejemplo del desarrollo de SObjectizer</a></li>
<li><a href="../es423881/index.html">쮺u치les fueron los soldadores para la 칩ptica (segunda parte)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>