<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜñÔ∏è üó°Ô∏è ‚è™ Estamos buscando errores en el c√≥digo PHP sin analizadores est√°ticos üõï üç¢ üßëüèº‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi parte favorita en el an√°lisis de c√≥digo est√°tico es presentar hip√≥tesis sobre posibles errores en el c√≥digo y luego verificarlas. 


 Ejemplo de hi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos buscando errores en el c√≥digo PHP sin analizadores est√°ticos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464893/"><p>  Mi parte favorita en el an√°lisis de c√≥digo est√°tico es presentar hip√≥tesis sobre posibles errores en el c√≥digo y luego verificarlas. </p><br><p>  Ejemplo de hip√≥tesis: </p><br><pre><code class="plaintext hljs"> strpos      .</code> </pre> <br><p>  Pero existe la posibilidad de que incluso en unos pocos millones de l√≠neas de c√≥digo, dicho diagn√≥stico no se "dispare", por lo que no querr√° pasar mucho tiempo en hip√≥tesis fallidas. </p><br><p>  Hoy mostrar√© c√≥mo realizar el an√°lisis est√°tico m√°s simple usando la utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">phpgrep</a> sin escribir c√≥digo. </p><br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/webt/ct/6n/nt/ct6nntwmvdgniqe2e625qogapj0.png"></td><td><hr><p>  Debajo del corte: </p><br><ul><li>  B√∫squeda y an√°lisis de errores en proyectos de c√≥digo abierto. </li><li>  Inicio r√°pido por phpgrep. </li><li>  El principio de b√∫squeda sint√°ctica. </li></ul><br><br><hr></td></tr></tbody></table></div><a name="habracut"></a><br><h1 id="predposylki">  Antecedentes </h1><br><p>  Desde hace varios meses, he estado apoyando el linter NoVerify PHP (lea sobre esto en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NoVerify: Linter for PHP del equipo VKontakte</a> ). </p><br><p>  De vez en cuando, las ideas para nuevos diagn√≥sticos aparecen en el equipo.  Puede haber muchas ideas, pero quiero verificar todo, especialmente si la verificaci√≥n propuesta tiene como objetivo identificar defectos cr√≠ticos. </p><br><p>  Anteriormente, estaba desarrollando activamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Go-Critical</a> y la situaci√≥n era similar, con la √∫nica diferencia de que las fuentes se analizaron en Go y no en PHP.  Cuando me enter√© de la utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gogrep</a> , mi mundo dio un vuelco.  Como su nombre lo indica, esta utilidad tiene algo en com√∫n con grep, solo que la b√∫squeda no se realiza mediante expresiones regulares, sino mediante patrones de sintaxis (explicar√© m√°s adelante qu√© significa esto). </p><br><p>  No quer√≠a vivir sin grep inteligente, as√≠ que una noche decid√≠ sentarme y escribir <code>phpgrep</code> . </p><br><h1 id="analiziruemyy-korpus">  Caso analizado </h1><br><p>  Para ser divertido, nos sumergimos de inmediato en la aplicaci√≥n.  Analizaremos un peque√±o conjunto de proyectos PHP bastante conocidos y grandes disponibles en GitHub. </p><br><p>  Nuestro kit incluye los siguientes proyectos: </p><br><div class="scrollable-table"><table><tbody><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wordpress</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikia</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Drupal</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">yii2</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CodeIgniter</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compositor</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Phalcon</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Joomla!</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Laravel</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">moodle</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">N√∫cleo ownCloud</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Phabricator</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Phpunit</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Symfony</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">woocommerce</a> </td></tr></tbody></table></div><br><p>  Para las personas que est√°n tramando lo que estamos tramando, este es un conjunto muy apetitoso. </p><br><p>  ¬°Entonces vamos! </p><br><h1 id="ispolzovanie-prisvaivaniya-v-kachestve-vyrazheniya">  Usar la asignaci√≥n como una expresi√≥n </h1><br><p>  Si la asignaci√≥n se usa como una expresi√≥n, adem√°s: </p><br><ul><li>  el contexto espera el resultado de una operaci√≥n l√≥gica (condici√≥n l√≥gica) y </li><li>  el lado derecho de la expresi√≥n no tiene efectos secundarios y es constante, </li></ul><br><p>  Es muy probable que sea un error en el c√≥digo. </p><br><p>  Para empezar, tomemos las siguientes construcciones para el "contexto l√≥gico": </p><br><ol><li>  Expresi√≥n dentro de " <code>if ($cond)</code> ". </li><li>  La condici√≥n del operador ternario es: " <code>$cond ? $x : $y</code> ". </li><li>  Condiciones de continuaci√≥n para los bucles " <code>while ($cond)</code> " y " <code>for ($init; $cond; $post)</code> ". </li></ol><br><p>  En el lado derecho de la tarea, esperamos constantes o literales. </p><br><div class="spoiler">  <b class="spoiler_title">¬øPor qu√© necesitamos tales restricciones?</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  Ambas restricciones son necesarias para reducir el n√∫mero de falsos positivos. <br><br>  Si buscamos asignaciones exclusivamente dentro de las condiciones, entonces la probabilidad de que haya un error tipogr√°fico y en lugar de "=" est√© impl√≠cito en "==" es mayor. <br><br>  Pero incluso en este caso, persisten situaciones controvertidas en las que la asignaci√≥n tiene sentido debido a los efectos secundarios que pueden ocurrir dentro de una funci√≥n.  Para no tratar con ellos, elegiremos solo los valores asignados m√°s simples. <br></td></tr></tbody></table></div></div></div><br><p>  Comencemos con (1): </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      # |      (  ) # | | # | | phpgrep . 'if ($_ = []) $_' # 1 # | # | #    #  3    . phpgrep . 'if ($_ = ${"const"}) $_' # 2 phpgrep . 'if ($_ = ${"str"}) $_' # 3 phpgrep . 'if ($_ = ${"num"}) $_' # 4</span></span></code> </pre> <br><p>  Aqu√≠ vemos 4 patrones, la √∫nica diferencia entre los cuales es la expresi√≥n asignada (RHS).  Comencemos con el primero. </p><br><p>  La plantilla " <code>if ($_ = []) $_</code> " captura el <code>if</code> , para el que a cualquier expresi√≥n se le asigna una matriz vac√≠a.  <code>$_</code> coincide con cualquier expresi√≥n o declaraci√≥n. </p><br><pre> <code class="plaintext hljs">    (RHS) | if ($_ = []) $_ | | |   if',   ,  {}    LHS  </code> </pre> <br><p>  Los siguientes ejemplos usan grupos <strong>const</strong> , <strong>str</strong> y <strong>num</strong> m√°s complejos.  A diferencia de <code>$_</code> describen restricciones en operaciones compatibles. </p><br><ul><li>  <code>const</code> es una constante con nombre o constante de clase. </li><li>  <code>str</code> es un literal de cadena de cualquier tipo. </li><li>  <code>num</code> es un literal num√©rico de cualquier tipo. </li></ul><br><p>  Estos patrones son suficientes para lograr varias operaciones en el caso. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">moodle / blocks / rss_client / viewfeed.php # L37</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($courseid = SITEID) { $courseid = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  El segundo desencadenante en moodle fue la dependencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ADOdb</a> .  En la biblioteca aguas arriba, el problema a√∫n est√° presente. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ADOdb / drivers / adodb-odbtp.inc.php # L741</a> : </p><br><p><img src="https://habrastorage.org/webt/uo/mv/wj/uomvwjrpztuhmrkm4lolol9sbvg.png"></p><br><p>  Hay mucho en este fragmento, pero para nosotros solo la primera l√≠nea es relevante.  En lugar de comparar el campo <code>databaseType</code> , realizamos la asignaci√≥n y siempre vamos dentro de la condici√≥n. </p><br><p>  Otro lugar interesante donde queremos realizar acciones solo para registros "correctos", pero en su lugar, ¬°siempre ejecutarlos y, adem√°s, marcar cualquier registro como correcto! </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">moodle / question / format / blackboard_six / formatqti.php # L598</a> : </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// For BB Fill in the Blank, only interested in correct answers. if ($response-&gt;feedback = 'correct') { // ... }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Lista extendida de plantillas para esta verificaci√≥n</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  'para ($ _; $ _ = []; $ _) $ _'
 phpgrep.  'for ($ _; $ _ = $ {"const"}; $ _) $ _'
 phpgrep.  'for ($ _; $ _ = $ {"num"}; $ _) $ _'
 phpgrep.  'for ($ _; $ _ = $ {"str"}; $ _) $ _'
 phpgrep.  'while ($ _ = []) $ _'
 phpgrep.  'while ($ _ = $ {"const"}) $ _'
 phpgrep.  'while ($ _ = $ {"num"}) $ _'
 phpgrep.  'while ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = []) $ _'
 phpgrep.  'if ($ _ = $ {"const"}) $ _'
 phpgrep.  'if ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = $ {"num"}) $ _'
 phpgrep.  '$ _ = []?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"const"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"str"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"num"}?  $ _: $ _ '
 phpgrep.  '($ _ = []) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"const"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"str"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"num"}) &amp;&amp; $ _'
 phpgrep.  '$ _ &amp;&amp; $ _ = []'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"const"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"str"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"num"}'
 phpgrep.  '($ _ = []) ||  $ _ '
 phpgrep.  '($ _ = $ {"const"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"str"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"num"}) ||  $ _ '
 phpgrep.  '$ _ ||  $ _ = [] '
 phpgrep.  '$ _ ||  $ _ = $ {"const"} '
 phpgrep.  '$ _ ||  $ _ = $ {"str"} '
 phpgrep.  '$ _ ||  $ _ = $ {"num"} ' </pre></td></tr></tbody></table></div></div></div><br><p>  Repitamos lo que aprendimos: </p><br><ul><li>  Las plantillas se parecen al c√≥digo php que encuentran. </li><li>  <code>$_</code> representa cualquier cosa.  Puedes comparar con <code>.</code>  en expresiones regulares </li><li>  <code>${"&lt;class&gt;"}</code> funciona como <code>$_</code> con una restricci√≥n de tipo de elemento AST. </li></ul><br><p>  Tambi√©n vale la pena enfatizar que todo, excepto las variables, est√° mapeado literalmente.  Esto significa que el patr√≥n " <code>array(1, 2 + 3)</code> " ser√° satisfecho solo por el c√≥digo id√©ntico en la estructura sint√°ctica (los espacios no afectan).  Por otro lado, el patr√≥n " <code>array($_, $_)</code> " satisface cualquier literal de matriz de dos elementos. </p><br><h1 id="sravnenie-vyrazheniya-s-samim-soboy">  Comparar una expresi√≥n contigo mismo </h1><br><p>  La necesidad de comparar algo con uno mismo es muy rara.  Puede ser una verificaci√≥n de <code>NaN</code> , pero al menos la mitad del tiempo es un error de copiar / pegar. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikia / app / extensiones / SemanticDrilldown / incluye / SD_FilterValue.php # L103</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( $fv1-&gt;month == $fv1-&gt;month ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p>  A la derecha deber√≠a estar " <code>$fv2-&gt;month</code> ". </p><br><p>  Para expresar partes duplicadas en una plantilla, utilizamos variables con nombres distintos de " <code>_</code> ".  El mecanismo de repetici√≥n en un patr√≥n es similar a los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">v√≠nculos</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">retroceso</a> en las expresiones regulares. </p><br><p>  El patr√≥n " <code>$x == $x</code> " ser√° justo lo que encuentra el ejemplo anterior.  En lugar de " <code>x</code> ", se puede usar cualquier nombre.  Solo es importante que los nombres sean id√©nticos.  No se requiere que las variables de plantilla que tienen nombres distinguidos tengan el mismo contenido al capturar. </p><br><p>  El siguiente ejemplo se encontr√≥ usando " <code>$x &lt;= $x</code> ". </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Drupal / core / modules / views / tests / src / Unit / ViewsDataTest.php # L166</a> : </p><br><pre> <code class="php hljs">$prev = $base_tables[$base_tables_keys[$i - <span class="hljs-number"><span class="hljs-number">1</span></span>]]; $current = $base_tables[$base_tables_keys[$i]]; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTrue( $prev[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &lt;= $current[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &amp;&amp; $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] &lt;= $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>], <span class="hljs-comment"><span class="hljs-comment">// &lt;--------------  'The tables are sorted as expected.');</span></span></code> </pre> <br><h1 id="dubliruyuschiesya-podvyrazheniya">  Subexpresiones duplicadas </h1><br><p>  Ahora que conocemos las posibilidades de subexpresiones repetidas, podemos componer muchos patrones interesantes. </p><br><p>  Uno de mis favoritos es " <code>$_ ? $x : $x</code> ". <br>  Este es un operador ternario con ramas verdaderas / falsas id√©nticas. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">joomla-cms / bibliotecas / src / User / UserHelper.php # L522</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted;</code> </pre> <br><p>  Ambas ramas est√°n duplicadas, lo que sugiere un problema potencial en el c√≥digo.  Si miramos el c√≥digo, podemos entender lo que deber√≠a haber sido en su lugar.  En aras de la legibilidad, cort√© parte del c√≥digo y reduje el nombre de la variable <code>$encrypted</code> a <code>$enc</code> . </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'crypt-blowfish'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt ? <span class="hljs-string"><span class="hljs-string">'{crypt}'</span></span> : <span class="hljs-string"><span class="hljs-string">''</span></span>) . crypt($plaintext, $salt); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'md5-base64'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'ssha'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SSHA}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'smd5'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SMD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'sha256'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc;</code> </pre> <br><p>  Apuesto a que el c√≥digo necesita el siguiente parche: </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">- ($show_encrypt) ? '{SHA256}' . $encrypted : '{SHA256}' . $encrypted; + ($show_encrypt) ? '{SHA256}' . $encrypted : $encrypted;</span></span></code> </pre> <br><h1 id="opasnye-prioritety-operaciy-v-php">  Prioridades de operaci√≥n peligrosas en PHP </h1><br><p>  Una buena precauci√≥n en PHP es el uso de corchetes de agrupaci√≥n donde sea importante tener el orden correcto de los c√°lculos. </p><br><p>  En muchos lenguajes de programaci√≥n, la expresi√≥n " <code>x &amp; mask != 0</code> " tiene un significado intuitivo.  Si la <code>mask</code> describe un bit, entonces este c√≥digo verifica que en <code>x</code> este bit no sea igual a cero.  Desafortunadamente, para PHP, esta expresi√≥n se calcular√° as√≠: " <code>x &amp; (mask != 0)</code> ", que casi siempre no es lo que necesita. </p><br><p>  WordPress, Joomla y moodle usan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie</a> . </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie / library / SimplePie / Locator.php # L254</a> <br>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie / library / SimplePie / Locator.php # L384</a> <br>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie / library / SimplePie / Locator.php # L412</a> <br>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie / library / SimplePie / Sanitize.php # L349</a> <br>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SimplePie / library / SimplePie.php # L1634</a> </p><br><pre> <code class="php hljs">$feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  <code>SIMPLEPIE_FILE_SOURCE_REMOTE</code> define como <code>1</code> , por lo que la expresi√≥n ser√° equivalente a: </p><br><pre> <code class="plaintext hljs">$feed-&gt;method &amp; (1 === 0) // =&gt; $feed-&gt;method &amp; false</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Plantillas de b√∫squeda de muestra</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  '$ x &amp; $ mask == $ y'
 phpgrep.  '$ x &amp; $ mask === $ y'
 phpgrep.  '$ x &amp; $ mask! == $ y'
 phpgrep.  '$ x &amp; $ mask! = $ y'
 phpgrep.  '$ x |  $ m√°scara == $ y '
 phpgrep.  '$ x |  $ m√°scara === $ y '
 phpgrep.  '$ x |  $ mask! == $ y '
 phpgrep.  '$ x |  $ m√°scara! = $ y ' </pre></td></tr></tbody></table></div></div></div><br><p>  Continuando con el tema de las prioridades de operaci√≥n inesperadas, puede leer sobre el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">operador ternario en PHP</a> .  En habr, incluso el art√≠culo estaba dedicado a √©l: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El orden de ejecuci√≥n del operador ternario</a> . </p><br><p>  ¬øEs posible encontrar esos lugares con <code>phpgrep</code> ?  La respuesta es <strong>si</strong> ! </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ == $_ ? $_ : $_ ? $_ : $_'</span></span> phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ != $_ ? $_ : $_ ? $_ : $_'</span></span></code> </pre> <br><h1 id="prelesti-proverki-url-s-pomoschyu-regulyarnyh-vyrazheniy">  Los beneficios de la validaci√≥n de expresiones regulares </h1><br><p>  ‚éÜ <a href="">Wikia / app / maintenance / wikia / updateCentralInterwiki.inc # L95</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( preg_match( <span class="hljs-string"><span class="hljs-string">'/(wowwiki.com|wikia.com|falloutvault.com)/'</span></span>, $url ) ) { $local = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $local = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Tal como lo concibi√≥ el autor del c√≥digo, verificamos que la URL coincida con una de las 3 opciones.  Lo siento, s√≠mbolo <code>.</code>  no blindado, lo que conducir√° al hecho de que en lugar de <code>falloutvault.com</code> podemos obtener <code>falloutvaultxcom</code> en cualquier dominio y pasar la prueba. </p><br><p><img src="https://habrastorage.org/webt/n7/sj/pc/n7sjpcnsabhg5ggan7tiscxy0q4.png"></p><br><p>  Este no es un error espec√≠fico de PHP.  En cualquier aplicaci√≥n donde la validaci√≥n se realiza a trav√©s de expresiones regulares y un meta car√°cter es parte de la cadena que se est√° verificando, existe el riesgo de olvidar el escape donde se necesita y obtener una vulnerabilidad. </p><br><p>  Puede encontrar dichos lugares ejecutando <code>phpgrep</code> : </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'preg_match(${"pat:str"}, ${"*"})'</span></span> <span class="hljs-string"><span class="hljs-string">'pat~[^\\]\.(com|ru|net|org)\b'</span></span></code> </pre> <br><p>  Introducimos el subpattern <code>pat</code> nombrado, que captura cualquier cadena literal, y luego le aplicamos un filtro de la expresi√≥n regular. </p><br><p>  Los filtros se pueden aplicar a cualquier variable de plantilla.  Adem√°s de las expresiones regulares, tambi√©n hay operadores estructurales <code>=</code> y <code>!=</code> .  Se puede encontrar una lista completa en la <a href="">documentaci√≥n</a> . </p><br><p>  <code>${"*"}</code> captura un n√∫mero arbitrario de cualquier argumento, por lo que no tenemos que preocuparnos por los par√°metros opcionales de la funci√≥n <code>preg_match</code> . </p><br><h1 id="dublikaty-klyuchey-v-literale-massiva">  Duplicar claves en matriz literal </h1><br><p>  En PHP, no recibir√° ninguna advertencia si ejecuta este c√≥digo: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> var_dump([<span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// : array(1) {["a"]=&gt; int(2)}</span></span></code> </pre> <br><p>  Podemos encontrar tales matrices usando <code>phpgrep</code> : </p><br><pre> <code class="plaintext hljs">[${"*"}, $k =&gt; $_, ${"*"}, $k =&gt; $_, ${"*"}]</code> </pre> <br><p>  Este patr√≥n se puede descifrar de la siguiente manera: "un literal de matriz en el que hay al menos dos claves id√©nticas en una posici√≥n arbitraria".  Las expresiones <code>${"*"}</code> nos ayudan a describir una "posici√≥n arbitraria", permitiendo elementos 0-N antes, entre y despu√©s de las claves que nos interesan. </p><br><p>  ‚éÜ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikia / app / extensiones / wikia / WikiaMiniUpload / WikiaMiniUpload_body.php # L23</a> : </p><br><pre> <code class="php hljs">$script_a = [ <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-comment"><span class="hljs-comment">// ... ];</span></span></code> </pre> <br><p>  En este caso, esto no es un gran error, pero s√© de casos en los que la duplicaci√≥n de claves en matrices grandes (m√°s de 100 elementos) conlleva al menos un comportamiento inesperado en el que una de las claves se superpone al valor de la otra. </p><br><hr><br><p>  Esto concluye nuestra breve excursi√≥n con ejemplos.  Si desea m√°s, al final del art√≠culo describe c√≥mo obtener todos los resultados. </p><br><h1 id="chto-zhe-takoe-phpgrep">  ¬øQu√© es phpgrep? </h1><br><p>  La mayor√≠a de los editores e IDE utilizan la b√∫squeda de texto sin formato para buscar el c√≥digo (si no se trata de buscar un car√°cter especial, como una clase o variable), en otras palabras, algo as√≠ como grep. </p><br><p>  Ingresa " <code>$x</code> ", busca " <code>$x</code> ".  Las expresiones regulares pueden estar disponibles para usted, entonces puede intentar analizar el c√≥digo PHP con los habituales.  A veces incluso funciona si est√° buscando algo bastante espec√≠fico y simple, por ejemplo, "cualquier variable con alg√∫n sufijo".  Pero si esta variable con un sufijo debe ser parte de otra expresi√≥n compuesta, surgen dificultades. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">phpgrep</a> es una herramienta para la b√∫squeda conveniente de c√≥digo PHP, que le permite buscar no usando regulares orientados a texto, sino usando plantillas compatibles con la sintaxis. </p><br><p>  La sintaxis significa que el idioma de la plantilla refleja el idioma de destino y no opera en caracteres individuales, como lo hacen las expresiones regulares.  Tampoco hacemos ninguna diferencia antes de formatear el c√≥digo, solo su estructura es importante. </p><br><div class="spoiler">  <b class="spoiler_title">Contenido opcional: inicio r√°pido</b> <div class="spoiler_text"><h1 id="quick-start">  Inicio r√°pido </h1><br><h3 id="ustanovka">  Instalaci√≥n </h3><br><p>  Hay <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">versiones de lanzamiento</a> listas para amd64 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para Linux y Windows</a> , pero si tiene instalado Go, entonces un comando es suficiente para obtener un nuevo binario para su plataforma: </p><br><pre> <code class="bash hljs">go get -v github.com/quasilyte/phpgrep/cmd/phpgrep</code> </pre> <br><p>  Si <code>$GOPATH/bin</code> est√° en el sistema <code>$PATH</code> , entonces el comando <code>phpgrep</code> estar√° disponible de inmediato.  Para verificar esto, intente ejecutar el comando con el par√°metro <code>-help</code> : </p><br><pre> <code class="bash hljs">phpgrep -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><p>  Si no sucede nada, busque d√≥nde Go instal√≥ el binario y agr√©guelo a la <code>$PATH</code> entorno <code>$PATH</code> . </p><br><p>  Una forma antigua y confiable de ver <code>$GOPATH</code> , incluso si no se establece expl√≠citamente: </p><br><pre> <code class="bash hljs">go env GOPATH</code> </pre> <br><h3 id="ispolzovanie">  Uso </h3><br><p>  Cree un archivo de prueba <code>hello.php</code> : </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...$xs)</span></span></span><span class="hljs-function"> </span></span>{} f(<span class="hljs-number"><span class="hljs-number">10</span></span>); f(<span class="hljs-number"><span class="hljs-number">20</span></span>); f(<span class="hljs-number"><span class="hljs-number">30</span></span>); f($x); f();</code> </pre> <br><p>  Ejecute <code>phpgrep</code> en √©l: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># phpgrep hello.php 'f(${"x:int"})' 'x!=20' hello.php:3: f(10) hello.php:5: f(30)</span></span></code> </pre> <br><p>  Encontramos todas las llamadas a la funci√≥n <code>f</code> con un argumento, un n√∫mero cuyo valor no es igual a 20. </p></div></div><br><h1 id="kak-rabotaet-phpgrep">  C√≥mo funciona phpgrep </h1><br><p>  Para analizar PHP, se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">utiliza la</a> biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/z7zmey/php-parser</a> .  Es lo suficientemente bueno, pero algunas de las limitaciones de <code>phpgrep</code> derivan de las caracter√≠sticas del analizador utilizado.  Especialmente surgen muchas dificultades cuando se trata de trabajar normalmente con par√©ntesis. </p><br><p>  El principio de <code>phpgrep</code> es simple: </p><br><ul><li>  AST se crea a partir de la plantilla de entrada, los filtros se desmontan; </li><li>  para cada archivo de entrada, se construye un √°rbol AST completo; </li><li>  vamos alrededor del AST de cada archivo, tratando de encontrar sub√°rboles que coincidan con el patr√≥n; </li><li>  para cada resultado se aplica una lista de filtros; </li><li>  Todos los resultados que han pasado los filtros se imprimen en la pantalla. </li></ul><br><p>  Lo m√°s interesante es c√≥mo coinciden exactamente los dos nodos AST para la igualdad.  A veces trivial: uno a uno, y los metanodos pueden capturar m√°s de un elemento.  Ejemplos de metanodos son <code>${"*"}</code> y <code>${"str"}</code> . </p><br><h1 id="zaklyuchenie">  Conclusi√≥n </h1><br><p>  Ser√≠a deshonesto hablar sobre <code>phpgrep</code> sin mencionar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">b√∫squeda estructural y el reemplazo</a> (SSR) de PhpStorm.  Resuelven problemas similares, y el SSR tiene sus ventajas, por ejemplo, la integraci√≥n en el IDE, y <code>phpgrep</code> jacta de que es un programa independiente, que es mucho m√°s f√°cil de poner, por ejemplo, en CI. </p><br><p>  Entre otras cosas, <code>phpgrep</code> tambi√©n es una biblioteca que puede usar en sus programas para hacer coincidir el c√≥digo PHP.  Esto es especialmente √∫til para la generaci√≥n de linter y c√≥digo. </p><br><p>  Estar√© encantado si esta herramienta es √∫til para usted.  Si este art√≠culo solo te motiva a mirar en la direcci√≥n de la SSR antes mencionada, tambi√©n es bueno. </p><br><img src="https://habrastorage.org/webt/o_/9a/cz/o_9aczasnsf3wssmuunol5lyjfe.png"><br><br><h1 id="dopolnitelnye-materialy">  Materiales adicionales </h1><br><p>  La lista completa de patrones que se utiliz√≥ para el an√°lisis se puede encontrar en el archivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">patterns.txt</a> .  Junto a este archivo, puede encontrar el script <code>phpgrep-lint.sh</code> , que simplifica el lanzamiento de <code>phpgrep</code> con una lista de plantillas. </p><br><p>  El art√≠culo no proporciona una lista completa de respuestas, pero puede reproducir el experimento clonando todos los repositorios nombrados y ejecutando <code>phpgrep-lint.sh</code> en ellos. </p><br><p>  Puede inspirarse en plantillas de prueba, por ejemplo, en art√≠culos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudio de PVS</a> .  Realmente me gust√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Expresiones l√≥gicas: Errores cometidos por profesionales</a> , que se transforma en algo como esto: </p><br><pre> <code class="plaintext hljs">#  "x != y || x != z": phpgrep . '$x != $a || $x != $b' phpgrep . '$x !== $a || $x != $b' phpgrep . '$x != $a || $x !== $b' phpgrep . '$x !== $a || $x !== $b'</code> </pre> <br><p>  Tambi√©n te puede interesar la presentaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">phpgrep: b√∫squeda de c√≥digo compatible con la sintaxis</a> . </p><br><blockquote>  El art√≠culo utiliza im√°genes de gophers que se crearon a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gopherkon</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464893/">https://habr.com/ru/post/464893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464877/index.html">Noticias del mundo de OpenStreetMap No. 473 (06/08/2019 - 12/08/2019)</a></li>
<li><a href="../464881/index.html">Personalizaci√≥n de la composici√≥n de las pruebas JUnit5 con application.properties</a></li>
<li><a href="../464883/index.html">Hacia d√≥nde se dirige la red</a></li>
<li><a href="../464887/index.html">Algunos errores comunes en Vue.js (Vuex)</a></li>
<li><a href="../464889/index.html">Regreso al futuro de los tel√©fonos m√≥viles</a></li>
<li><a href="../464895/index.html">¬øPor qu√© Israel es el motor para el desarrollo de la tecnolog√≠a automotriz?</a></li>
<li><a href="../464897/index.html">¬øConstruyendo XPath? XPath algor√≠tmico? Nada m√°s que XPath</a></li>
<li><a href="../464899/index.html">El colapso de una ciudad de Texas que perdi√≥ dinero de una granja de bitcoins</a></li>
<li><a href="../464901/index.html">Desarrollo de Helpdesk</a></li>
<li><a href="../464909/index.html">"Nos est√°n mirando": lo que puede suceder en una minivan discreta justo debajo de su ventana</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>