<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÄÔ∏è üèÇüèΩ üíÉüèª Slurm DevOps: do Git ao SRE com todas as paradas ü•å üò≤ üè§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De 4 a 6 de setembro, em S√£o Petersburgo, na sala de confer√™ncias Selectel , ser√° realizado um DevOps Slurm de tr√™s dias. 





 Criamos o programa co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Slurm DevOps: do Git ao SRE com todas as paradas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/462879/"><p>  De 4 a 6 de setembro, em S√£o Petersburgo, na sala de confer√™ncias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Selectel</a> , ser√° realizado um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOps Slurm de</a> tr√™s dias. </p><br><p><img src="https://habrastorage.org/webt/ms/gc/ei/msgcei-qr0axhrbkyegsc1nvc0m.jpeg"></p><br><p>  Criamos o programa com base na id√©ia de que todos podem ler trabalhos te√≥ricos no DevOps, bem como manuais de ferramentas, independentemente.  Somente a experi√™ncia e a pr√°tica s√£o interessantes: uma explica√ß√£o de como faz√™-lo √© necess√°ria e n√£o necess√°ria, e uma hist√≥ria sobre como o fazemos. </p><br><p>  Cada empresa, cada administrador ou desenvolvedor tem seu pr√≥prio n√≠vel de DevOps.  Alguns usam mal o Git, outros implementam o SRE.  O curso √© organizado para que todos encontrem algo relevante que possa ser implementado aqui e agora. </p><br><p>  Come√ßamos com o Git, depois analisamos o desenvolvimento de aplicativos, a intera√ß√£o de c√≥digo e infraestrutura, constru√≠mos o CI / CD, descrevemos a infraestrutura como c√≥digo (IaC), testamos a solu√ß√£o resultante, configuramos o monitoramento, coletamos e estudamos logs e, finalmente, chegamos ao SRE: gere confiabilidade em uma hist√≥ria mensur√°vel e gerenci√°vel. </p><a name="habracut"></a><br><h2 id="git">  Git </h2><br><p>  Agora Geet n√£o √© usado apenas por quem comprou o primeiro laptop ontem.  Essa √© uma ferramenta trivial e onipresente, e, no entanto, frequentemente encontramos seu uso indevido: do envio for√ßado ao mestre e terminando com a c√≥pia de arquivos do Gita para o servidor via Ctrl-C, Ctrl-V. </p><br><p>  N√≥s lhe dizemos como fazer isso n√£o √© necess√°rio, como fazer, como fazer em Southbridge. <br>  Passamos a pr√°tica: o b√°sico do Gita, trabalho em equipe. </p><br><p>  <strong>T√≥pico # 1: No√ß√µes b√°sicas do Git</strong> </p><br><ul><li>  Comandos b√°sicos git init, commit, add, diff, log, status, pull, push </li><li>  Fluxo Git, ramifica√ß√µes e tags, estrat√©gias de mesclagem </li><li>  Trabalhar com v√°rios reposit√≥rios remotos </li></ul><br><p>  <strong>T√≥pico # 2: Trabalho em equipe com Git</strong> </p><br><ul><li>  Fluxo Github </li><li>  Forquilha, remota, solicita√ß√£o de tra√ß√£o </li><li>  Conflitos, lan√ßamentos, mais uma vez sobre o Gitflow e outros fluxos em rela√ß√£o √†s equipes </li></ul><br><p>  O material √© organizado para que administradores e desenvolvedores possam implementar imediatamente todas as pr√°ticas no trabalho. </p><br><p>  Do ponto de vista do DevOps, o trabalho adequado com o Git organiza e automatiza os processos de desenvolvimento e administra√ß√£o, elimina v√°rios problemas recorrentes e melhora a produtividade do trabalho. </p><br><h2 id="devops-razrabotchika">  Desenvolvedor DevOps </h2><br><p>  Observamos o DevOps atrav√©s dos olhos do desenvolvedor: lan√ßamos o ambiente local, escrevemos um aplicativo, configuramos seu monitoramento e registro, testamos localmente, organizamos o armazenamento de vari√°veis ‚Äã‚Äã/ segredos e descoberta de servi√ßos e observamos o rastreamento (opentracing). </p><br><p>  <strong>Tema ‚Ññ3: Trabalhando com o aplicativo do ponto de vista do desenvolvimento</strong> </p><br><ul><li>  Configurando seu ambiente local: pr√°ticas recomendadas </li><li>  Escrevemos um microsservi√ßo em Python (incluindo testes) </li><li>  Usando docker-compose no desenvolvimento </li></ul><br><p>  <strong>Tema 4: Interoperabilidade de c√≥digo e infraestrutura</strong> </p><br><ul><li>  Pr√°tica de configura√ß√£o </li></ul><br><p>  Como resultado, os desenvolvedores ver√£o como o c√≥digo deve enviar logs, como test√°-lo e como ser√° depurado no futuro.  Os administradores entender√£o as necessidades dos desenvolvedores: que erros acontecem no c√≥digo, como organizar testes para desenvolvedores, como testar o projeto voc√™ mesmo. </p><br><p>  Nesta fase, a principal tarefa do DevOps est√° resolvida: compreens√£o e colabora√ß√£o m√∫tuas entre virgens e ops s√£o constru√≠das.  Esta √© uma etapa fundamental na transi√ß√£o da implementa√ß√£o de tarefas para o envolvimento respons√°vel. </p><br><p>  Como resultado, a velocidade e a qualidade do trabalho est√£o aumentando. </p><br><h2 id="cicd">  CI / CD </h2><br><p>  A automa√ß√£o moderna envolve CI / CD.  Come√ßaremos analisando a automa√ß√£o manual: makefiles, githukes, scripts.  Analisaremos quando essas ferramentas ainda s√£o relevantes e quando n√£o devem ser usadas. </p><br><p>  Vamos examinar as melhores pr√°ticas do IC moderno usando o exemplo do Gitlab. </p><br><p>  <strong>T√≥pico # 5: Introdu√ß√£o √† automa√ß√£o de CI / CD</strong> </p><br><ul><li>  Introdu√ß√£o √† automa√ß√£o </li><li>  Ferramentas (bash, make, gradle) </li><li> Usando git-hooks para automatizar processos </li><li>  Linhas de montagem de transportadores de f√°brica e suas aplica√ß√µes em TI </li><li>  Um exemplo de constru√ß√£o de um pipeline "comum" </li><li>  Software moderno de CI / CD: Drone CI, BitBucket Pipelines, Travis, etc. </li></ul><br><p>  <strong>T√≥pico # 6: CI / CD: Trabalhando com Gitlab</strong> </p><br><ul><li>  Gitlab CI - Geral </li><li>  Gitlab Runner, seus tipos e aplica√ß√£o </li><li>  IC do Gitlab, recursos de personaliza√ß√£o, pr√°ticas recomendadas </li><li>  Est√°gios de IC do Gitlab </li><li>  Vari√°veis ‚Äã‚Äãde IC do Gitlab </li><li>  Montagem, teste, implanta√ß√£o </li><li>  Restri√ß√µes de controle e execu√ß√£o: somente quando </li><li>  Trabalhar com Artefatos </li><li>  Modelos dentro de .gitlab-ci.yml, reutilizando a√ß√µes em diferentes partes do pipeline </li><li>  Incluir - se√ß√µes </li><li>  Gerenciamento centralizado do gitlab-ci.yml (um arquivo e envio autom√°tico para outros reposit√≥rios) </li></ul><br><p>  A colabora√ß√£o de administradores e desenvolvedores vai para um novo n√≠vel: o administrador grava o modelo de IC e os desenvolvedores o corrigem criando seu IC independentemente do administrador. </p><br><p>  A depend√™ncia dos desenvolvedores em rela√ß√£o aos administradores √© reduzida, a quantidade de trabalho manual √© reduzida, o problema da "√∫nica pessoa que sabe trabalhar com o arquivo de maquiagem" √© eliminado.  As implementa√ß√µes ocorrem de maneira confi√°vel e r√°pida. </p><br><h2 id="iac">  IaC </h2><br><p>  O assunto Infraestrutura como c√≥digo no exemplo da Terraform informar√° o administrador da nuvem Selectel Alexei Stepanenko.  Ele mostrar√° como implantar e dimensionar servidores de forma r√°pida e autom√°tica, como compactar imagens automaticamente, como usar modelos de configura√ß√£o para receber imediatamente m√°quinas personalizadas. </p><br><p>  A pessoa que criou milhares de solu√ß√µes de IaC lhe dir√° como faz√™-lo corretamente e como faz√™-lo. </p><br><p>  A solu√ß√£o Minimal Edit Selectel Cloud √© adequada para nuvens do Google e Amazon. </p><br><p>  Um funcion√°rio da Southbridge Nikolay Mesropyan mostrar√° como implantar um aplicativo em funcionamento sem tempo de inatividade e testar√° sua funcionalidade. </p><br><p>  Se voc√™ editar a infraestrutura manualmente (configurar servidores, instalar bibliotecas, pacotes, conforme necess√°rio), ao tentar criar uma c√≥pia do ambiente, ser√° necess√°rio lembrar e reproduzir todas as suas a√ß√µes.  Essa tarefa leva facilmente de 3 a 5 dias.  Trabalhar com a infraestrutura como um c√≥digo garante que voc√™ tenha uma descri√ß√£o atualizada do ambiente que pode ser implantado em minutos. </p><br><p>  Nikolay lhe dir√° como escrever playbooks, quais erros acontecem, por que √†s vezes os playbooks funcionam devagar ou n√£o como o esperado.  Essa √© a experi√™ncia de muitos anos de uso do IaC em Southbridge. </p><br><p>  <strong>T√≥pico # 7: Infraestrutura como c√≥digo</strong> </p><br><ul><li>  IaC: uma abordagem da infraestrutura como um c√≥digo </li><li>  Provedores de nuvem como provedores de infraestrutura </li><li>  Ferramentas de inicializa√ß√£o do sistema, montagem de imagens (empacotador) </li><li>  IaC no exemplo do Terraform </li><li>  Armazenamento de configura√ß√£o, colabora√ß√£o, automa√ß√£o de aplicativos </li><li>  Pratique a cria√ß√£o de playbooks ans√≠veis </li><li>  Idempot√™ncia, declaratividade </li><li>  IaC Ansible </li><li>  Banco de dados como um failover de c√≥digo / PostgreSQL </li></ul><br><p>  A infraestrutura se torna declarativa e idempotente. <br>  O administrador aprende a gerenciar uma infraestrutura complexa: crie rapidamente novos ambientes, mantenha a unidade de todos os ambientes, veja o hist√≥rico de mudan√ßas, o que √© cr√≠tico quando v√°rias equipes trabalham em um projeto. <br>  O desenvolvedor pode estudar a infraestrutura, implantar independentemente seu ambiente. </p><br><p>  B√¥nus de se√ß√£o - cria√ß√£o e configura√ß√£o de um cluster de banco de dados PostgreSQL tolerante a falhas.  Forneceremos um manual pronto que usamos em Southbridge, voc√™ implantar√° um cluster no estande de treinamento e poder√° usar esta solu√ß√£o em sua empresa. </p><br><h2 id="testirovanie-infrastruktury-i-monitoring">  Teste e monitoramento de infraestrutura </h2><br><p>  A automa√ß√£o permite lan√ßar o erro imediatamente para mil servidores.  Cada altera√ß√£o requer teste.  Por outro lado, o teste manual leva tanto tempo que nega os benef√≠cios da automa√ß√£o. </p><br><p>  Vamos mostrar na pr√°tica como escrever testes de fun√ß√£o.  Como resultado, voc√™ pode escrever testes para sua empresa.  Voc√™ n√£o precisa mais se lembrar das configura√ß√µes feitas, descrev√™-las nos testes e verificar automaticamente se todas as decis√µes e muletas anteriores est√£o em vigor. </p><br><p>  Em seguida, aprenderemos como adicionar automaticamente todos os novos servidores ao monitoramento.  Considere monitorar separadamente a infraestrutura e os aplicativos.  Mostramos m√°s e boas pr√°ticas. </p><br><p>  <strong>T√≥pico 8: Testando a infraestrutura</strong> </p><br><ul><li>  Teste e integra√ß√£o cont√≠nua com Molecule e Gitlab CI </li><li>  Aplica√ß√£o Vagrant </li></ul><br><p>  <strong>T√≥pico 9: Monitorando a infraestrutura com o Prometheus</strong> </p><br><ul><li>  Por que o monitoramento √© necess√°rio </li><li>  Tipos de monitoramento </li><li>  Notifica√ß√µes no sistema de monitoramento </li><li>  Como construir um sistema de monitoramento saud√°vel </li><li>  Avisos leg√≠veis por humanos, para todos </li><li>  Exame de sa√∫de: o que procurar </li><li>  Automa√ß√£o baseada em dados de monitoramento </li></ul><br><p>  Monitoramento inadequado √© a falta de monitoramento.  N√£o importa para as empresas que a p√°gina principal de uma loja on-line esteja dispon√≠vel se a forma de pagamento apresentar um erro. </p><br><p>  Desenvolvedores e administradores est√£o igualmente envolvidos na configura√ß√£o do monitoramento e solu√ß√£o de problemas.  Al√©m disso, tradicionalmente, as tarefas de monitoramento recaem sobre os administradores.  Nosso curso mostrar√° aos desenvolvedores qual o papel que eles desempenham na cria√ß√£o de um monitoramento eficaz.  Os administradores receber√£o as melhores pr√°ticas da Southbridge.  Como resultado, o n√∫mero de perdas causadas por falhas e freios do site ou aplicativo diminuir√° rapidamente. </p><br><p>  B√¥nus de se√ß√£o: automa√ß√£o baseada em monitoramento.  Por exemplo, o monitoramento relata que uma carga chegou ao site e o dimensionamento dos servidores da Web √© iniciado automaticamente. </p><br><h2 id="logirovanie">  Registo </h2><br><p>  O principal erro ao trabalhar com logs √© que administradores e desenvolvedores os assistem diretamente nos servidores.  Se voc√™ tiver mais de um servidor, isso √© muito tempo.  Isso n√£o √© secular: o desenvolvedor entra no servidor onde n√£o deveria estar. </p><br><p>  O DevOps requer coleta, processamento e an√°lise centralizados de logs. </p><br><p>  <strong>T√≥pico # 10: Log de aplicativo com ELK</strong> </p><br><ul><li>  As principais aplica√ß√µes e recursos do elastic (pesquisa, armazenamento, recursos de dimensionamento, flexibilidade de configura√ß√£o) </li><li>  Vis√£o geral do kibana (principais recursos, idioma da consulta, gerenciamento de painel, gr√°ficos) </li><li>  Vis√£o geral dos produtos el√°sticos e sua aplica√ß√£o </li><li>  Coletando m√©tricas no APM (rastreamento de aplicativo) </li><li>  Extras: Revis√£o de novos produtos - SIEM </li></ul><br><p>  A implementa√ß√£o dessa abordagem tornar√° os logs uma ferramenta simples e compreens√≠vel para an√°lise, configura√ß√£o e ajuste de aplicativos e infraestrutura. </p><br><h2 id="sre">  SRE </h2><br><p>  E chegamos ao t√≥pico que Southbridge est√° apenas olhando e para o qual outros palestrantes querem permanecer no √∫ltimo dia de Slurm.  √â com satisfa√ß√£o que Ivan Kruglov, da Booking.com, concordou em l√™-lo. </p><br><p>  Um projeto vive no mundo real, onde a confiabilidade nunca √© absoluta e todas as solu√ß√µes custam dinheiro. </p><br><p>  O que √© um SLA para um projeto complexo?  Digamos como avaliar se o site est√° dispon√≠vel, mas as imagens s√£o carregadas com um atraso.  Quais s√£o as m√©tricas do SLA, onde fotograf√°-las, como fotograf√°-las? </p><br><p>  Como instalar o SLA?  Como resistir a eles? </p><br><p>  <strong>Tema # 11: SRE</strong> <br>  Defini√ß√£o de SLA, SLO, Erro de Or√ßamento e outros termos assustadores do mundo da SRE <br>  SRE: Monitoramento Pr√°tico SLI e SLO <br>  SRE: Pr√°tica de or√ßamento de erro <br>  SRE: Gerenciamento de interrup√ß√£o e carga operacional (passagem, malha de servi√ßo, brackers de circuito) <br>  Os neg√≥cios querem SRE.  Pelo menos no n√≠vel mais simples: pegue um servidor de backup ou fa√ßa backup do backup?  Um banco de dados ou cluster?  A prote√ß√£o contra DDoS √© proativa ou somente no momento do ataque? </p><br><p>  Os diretores n√£o est√£o satisfeitos com a hist√≥ria de que o "site est√° funcionando" quando um cliente liga para ele e informa que o formul√°rio de pedido n√£o abre. </p><br><p>  Portanto, √© importante para um engenheiro do DevOps entender pelo menos superficialmente o SRE para conversar adequadamente com a empresa sobre suas necessidades. </p><br><h2 id="itog">  Sum√°rio </h2><br><p>  Durante o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Slurm DevOps,</a> administradores e desenvolvedores aprender√£o: <br>  - trabalhe corretamente com o Git; <br>  - organizar o desenvolvimento local; <br>  - configurar (administradores) e usar CI / CD (desenvolvedores); <br>  - trabalhar com infraestrutura como um c√≥digo; <br>  - testar a infraestrutura; <br>  - monitorar infraestrutura e aplica√ß√£o; <br>  - configurar o log; <br>  - entenda e idealmente - use SRE. </p><br><p>  Para leitores atentos - com o c√≥digo promocional habrapost, um desconto de 15%. </p><br><p>  Para todos os pontos, estamos preparando pr√°ticas e ferramentas.  Assim, cada participante ao retornar de Slurm poder√° levar sua empresa ao pr√≥ximo n√≠vel de DevOps. </p><br><p>  Para os neg√≥cios, isso significa administra√ß√£o e desenvolvimento mais baratos, tempo de inatividade reduzido, maior confiabilidade, entrega mais r√°pida de recursos e elimina√ß√£o de bugs. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462879/">https://habr.com/ru/post/pt462879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462863/index.html">21 de agosto transmitiu o Zabbix Moscow Meetup # 5</a></li>
<li><a href="../pt462867/index.html">Escolhendo um esquema de cores para seu aplicativo: como simplificar?</a></li>
<li><a href="../pt462869/index.html">Sistema Agilean de Gerenciamento de Projetos</a></li>
<li><a href="../pt462875/index.html">Como reduzir custos e fornecer suporte de TI ideal para o modelo de neg√≥cios. Estamos procurando o "caminho do meio da salva√ß√£o"</a></li>
<li><a href="../pt462877/index.html">Bloqueios no PostgreSQL: 1. Bloqueios de relacionamento</a></li>
<li><a href="../pt462881/index.html">Por que √© t√£o dif√≠cil escolher qual filme assistir (e o que poderia ser feito)</a></li>
<li><a href="../pt462883/index.html">Projetando uma loja on-line para SEO: (teoria + lista de verifica√ß√£o)</a></li>
<li><a href="../pt462885/index.html">Rede IPoE tolerante a falhas em m√£os</a></li>
<li><a href="../pt462887/index.html">A experi√™ncia de personalizar uma loja online usando o exemplo de uma recomenda√ß√£o din√¢mica</a></li>
<li><a href="../pt462889/index.html">Hist√≥ria da continua√ß√£o: Compilador de Pascal para Windows a partir do zero</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>