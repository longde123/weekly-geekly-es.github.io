<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯМ╕ ЁЯМЗ тЫ╣ЁЯП┐ рдореЙрдХрд┐рдЯреЛ рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рдкрдХрд╛рдиреЗ рдХреЗ рд▓рд┐рдП тШГя╕П ЁЯТЗ ЁЯЧ┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд▓реЗрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ 


 рдпрд╣рд╛рдБ рдореЙрдХрд┐рдЯреЛ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЧрд╛рдЗрдб рд╣реИред рдЗрд╕рдореЗрдВ, рдПрдХ рддрд░рдл, рдореИрдВрдиреЗ рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рддрд╛рдХрд┐ рдЗрд╕рдХреЗ рд╕рд╛рде рдЕрдкрд░рд┐рдЪрд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдореЙрдХрд┐рдЯреЛ рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рдкрдХрд╛рдиреЗ рдХреЗ рд▓рд┐рдП</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444982/"><h2 id="o-state">  рд▓реЗрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h2><br><p>  рдпрд╣рд╛рдБ рдореЙрдХрд┐рдЯреЛ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЧрд╛рдЗрдб рд╣реИред  рдЗрд╕рдореЗрдВ, рдПрдХ рддрд░рдл, рдореИрдВрдиреЗ рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рддрд╛рдХрд┐ рдЗрд╕рдХреЗ рд╕рд╛рде рдЕрдкрд░рд┐рдЪрд┐рдд рдПрдХ рдкрд╛рдардХ рдХреЛ рддреБрд░рдВрдд рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рдорд┐рд▓реЗ, рдФрд░ рди рдХреЗрд╡рд▓ рдЗрд╕рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдЪрд╛рд░ред  рджреВрд╕рд░реА рдУрд░, рдореИрдВ рдЗрд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рдФрд░ рд╕рдВрд░рдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ рддрд╛рдХрд┐ рдореИрдВ рдЬрд▓реНрджреА рд╕реЗ рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрдврд╝ рд╕рдХреВрдВ рдФрд░ рдЬрд▓реНрджреА рд╕реЗ рдЗрд╕рдореЗрдВ рдХреБрдЫ рдкрд╛ рд╕рдХреВрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рднреВрд▓ рдЧрдпрд╛ред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рд▓реЗрдЦ, рдЬреЛ рдореЗрд░реЗ рд▓рд┐рдП рд╕реНрд╡рдпрдВ рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛, рдЬрдм рдореИрдВ рд╕рд┐рд░реНрдл рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдЖрдпрд╛ рдерд╛ рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рдирд╣реАрдВ рд╕рдордЭ рдкрд╛рдпрд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЕрдм рдореЗрд░реЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ - рдХрднреА-рдХрднреА рдореИрдВ рдЗрд╕рдореЗрдВ рд╕реЗ рдХреБрдЫ рдХреЛ рднреВрд▓ рдЬрд╛рддрд╛ рд╣реВрдВ, рдФрд░ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ рдпрд╛ рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рдХреЗ рд▓реЗрдЦреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдпрд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЪрд▓реЛ, рд╕рд┐рдиреЙрдкреНрд╕рд┐рд╕ рдХрд╣реЗрдВред  рдЙрд╕реА рд╕рдордп, рдореИрдВрдиреЗ рдкрд╛рда рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рдХрд┐ рдпрд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЦрд░реЛрдВрдЪ рд╕реЗ рдореЙрдХрд┐рдЯреЛ рдХреА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдерд╛, рдФрд░ рдХреБрдЫ рдЬрдЧрд╣реЛрдВ рдкрд░ рдореИрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕реНрдкрд╖реНрдЯ рдЪреАрдЬреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддрд╛ рд╣реВрдВ - рдЬрд┐рдирдореЗрдВ рд╕реЗ рд╕рднреА рд╢реБрд░реВ рд╕реЗ рд╣реА рдореЗрд░реЗ рд▓рд┐рдП рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рдереЗред </p><a name="habracut"></a><br><h2 id="soderzhanie">  рд╕рд╛рдордЧреНрд░реА: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЙрдХрд┐рдЯреЛ: рдпрд╣ рдХреНрдпрд╛ рд╣реИ рдФрд░ рдХреНрдпреЛрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░реНрдпрд╛рд╡рд░рдг, рд╕рдВрд╕реНрдХрд░рдг рдФрд░ рдкреНрд░рд╛рдпреЛрдЧрд┐рдХ рдЬрд╛рдирд╡рд░</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдордЬрд╛рдХ рдФрд░ рдЬрд╛рд╕реВрд╕реА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реНрдпрд╡рд╣рд╛рд░ рдкреНрд░рдмрдВрдзрди</a> <br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЙрд▓ рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗрдЯ рдХрд░рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЙрд▓ рд░рд┐рдЬрд▓реНрдЯ рд╕реЗрдЯ рдХрд░рдирд╛</a> </li></ol></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреНрд░реИрдХрд┐рдВрдЧ рд╡рд┐рдзрд┐ рдХреЙрд▓</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖реЗрддреНрд░ рдореВрд▓реНрдпреЛрдВ рдФрд░ рдореЙрдХрд┐рдЯреЛ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдФрд░ рдореЙрдХрд┐рдЯреЛ рд╕рддреНрд░ рдХреЗ рд▓рд┐рдП рд░реЛрд▓рдмреИрдХ рд╡реНрдпрд╡рд╣рд╛рд░</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдФрд░ рдХреНрдпрд╛?</a> </li></ol><br><h2 id="mockito-chto-eto-takoe-i-zachem-nuzhno">  рдореЙрдХрд┐рдЯреЛ: рдпрд╣ рдХреНрдпрд╛ рд╣реИ рдФрд░ рдХреНрдпреЛрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ </h2><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдореЙрдХрд┐рдЯреЛ рдПрдХ рд╕реНрдЯрдм рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рдЬрдм рдкрд░реАрдХреНрд╖рдг рдХреЛрдб (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг, рд▓реЗрдХрд┐рди рди рдХреЗрд╡рд▓), рдкрд░реАрдХреНрд╖рдг рдХреЗ рддрд╣рдд рддрддреНрд╡ рдХреЛ рдЕрдХреНрд╕рд░ рдЙрди рд╡рд░реНрдЧреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреЛ рдЗрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдХреНрд╕рд░ рдЙрдиреНрд╣реЗрдВ рдкреВрд░реА рддрд░рд╣ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ - рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЙрдиреНрд╣реЗрдВ рдХрдбрд╝рд╛рдИ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рддрд░реАрдХреЗ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддрд╛рдХрд┐ рдЙрдирдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рд╕рд░рд▓ рдФрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдиреЗ рдпреЛрдЧреНрдп рд╣реЛред  рдЙрдиреНрд╣реЗрдВ рд╕реНрдЯрдмреНрд╕ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рд╡реИрдХрд▓реНрдкрд┐рдХ рдкрд░реАрдХреНрд╖рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрд╡рд╢реНрдпрдХ рд╡рд░реНрдЧреЛрдВ рдХреЛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рдкреБрдирд░реНрдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреЗ рд╕рд╛рде рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реА рддрд░рд╣, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм рдХрд╛рдлреА рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ, рдмреЗрдорд╛рдиреА рдФрд░ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рднрд░рд╛ рд╣реИред  рд╕рднреА рдЗрдВрджреНрд░рд┐рдпреЛрдВ рдореЗрдВ рдПрдХ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕рдорд╛рдзрд╛рди рд╕реНрдЯрдмреНрд╕ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдкрд░реЗрдЦрд╛ рд╣реИред  рдЙрди рдореЗрдВ рд╕реЗ рдПрдХ (рдФрд░ рд╢рд╛рдпрдж рдЬрд╛рд╡рд╛ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдкреНрд░рд╕рд┐рджреНрдз) рдореЙрдХрд┐рдЯреЛ рд╣реИред </p><br><p> рдореЙрдХрд┐рдЯреЛ рдЖрдкрдХреЛ рдХрд┐рд╕реА рднреА рд╡рд░реНрдЧ рдХреЗ рддрдерд╛рдХрдерд┐рдд рдирдХрд▓реА (рд╡рд╛рдВрдЫрд┐рдд рд╕реНрдЯрдм рдХреЗ рд▓рд┐рдП рдЖрдзрд╛рд░ рдЬреИрд╕рд╛ рдХреБрдЫ) рдХреЛрдб рдХреА рдПрдХ рдкрдВрдХреНрддрд┐ рдХреЗ рд╕рд╛рде рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдореЙрдХ рдХреЗ рд▓рд┐рдП, рдирд┐рд░реНрдорд╛рдг рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ (рд╕рднреА рд╡рд┐рдзрд┐рдпрд╛рдВ рдкрд╣рд▓реЗ рдЬреНрдЮрд╛рдд рдореВрд▓реНрдпреЛрдВ рдХреЛ рд▓реМрдЯрд╛рддреА рд╣реИрдВ - рдЖрдорддреМрд░ рдкрд░ рдпрд╣ <code>null</code> рдпрд╛ <code>0</code> )ред  рдЖрдк рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдЕрдкрдиреЗ рдЗрдЪреНрдЫрд┐рдд рддрд░реАрдХреЗ рд╕реЗ рдкреБрдирд░реНрдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╕рд╣реА рдбрд┐рдЧреНрд░реА рдХреЗ рд╕рд╛рде рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рдирддреАрдЬрддрди, рдирдХрд▓реА рдЖрд╡рд╢реНрдпрдХ рдЧреБрдгреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдареВрдВрда рдмрди рдЬрд╛рддрд╛ рд╣реИред  рдиреАрдЪреЗ рдореИрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЪрд░реНрдЪрд╛ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред </p><br><p>  рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЙрди рд╡рд░реНрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдирдХрд▓реА рднреА рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдирдпрд╛ рдЙрджрд╛рд╣рд░рдг рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдирд┐рдЬреА рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдЬреИрд╕реЗ рд╕рд┐рдВрдЧрд▓рдЯрди рдФрд░ рдпреВрдЯрд┐рд▓рд┐рдЯреА рдХрдХреНрд╖рд╛рдПрдВ, рдФрд░ рдлреНрд░реЗрдорд╡рд░реНрдХ, рдФрд░ рдПрдирдо рдХреЗ рдиреНрдпреВрдирддрдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдХрдХреНрд╖рд╛рдПрдВред </p><br><h2 id="okruzhenie-versii-i-podopytnoe-zhivotnoe">  рдкрд░реНрдпрд╛рд╡рд░рдг, рд╕рдВрд╕реНрдХрд░рдг рдФрд░ рдкреНрд░рдпреЛрдЧрд╛рддреНрдордХ рдЬрд╛рдирд╡рд░ </h2><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХреЛ рд▓рд┐рдЦрддреЗ рд╕рдордп, рдореИрдВрдиреЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛: </p><br><ul><li>  рдореЙрдХрд┐рдЯреЛ: 'org.mockito: рдореЙрдХрд┐рдЯреЛ-рдХреЛрд░: 2.24.0' (рд▓реЗрдЦрди рдХреЗ рд╕рдордп рдирд╡реАрдирддрдо рд╕реНрдерд┐рд░ рд╕рдВрд╕реНрдХрд░рдг) </li><li>  TestNG: 'org.testng: testng: 6.14.3' рдПрдХ рдкрд░реАрдХреНрд╖рдг рдврд╛рдВрдЪреЗ рдХреЗ рд░реВрдк рдореЗрдВ </li><li>  AssertJ: 'org.assertj: assertj-core: 3.11.1' рдПрдХ рд╕рддреНрдпрд╛рдкрди рдЙрдкрдХрд░рдг рдХреЗ рд░реВрдк рдореЗрдВ </li><li>  рд▓реЛрдореНрдмреЛрдХ: 'org.projectlombok: lombok: 1.18.6' (рд╕рд┐рд░реНрдл рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП) </li><li>  рдЬрд╛рд╡рд╛ 8 </li></ul><br><p>  рдореЗрд░реЗ рдЕрдорд╛рдирд╡реАрдп рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдПрдХ рд╕реЗрд╡рд╛ рдХрд╛ рдпрд╣ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд▓рд┐рдЦрд╛ рд╣реИ рдЬреЛ рдХреБрдЫ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; dataToSave)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String id, Supplier&lt;String&gt; calculateIfAbsent)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataListByIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; idList)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataByRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataSearchRequest request)</span></span></span></span>; }</code> </pre> <br><p>  рдФрд░ рдпрд╣ (рдпрд╣ рдЖрджреЗрд╢ рдХреЗ рд▓рд┐рдП рд╣реЛрдиреЗ рджреЗрдВ) рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рдЕрдВрддрд┐рдо рдореЗрдВ рджрд┐рдП рдЧрдП рдЕрдиреБрд░реЛрдз рд╡рд░реНрдЧ рдХрд╛ рдХреЛрдбред </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataSearchRequest</span></span></span><span class="hljs-class"> </span></span>{ String id; Date updatedBefore; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length; }</code> </pre> <br><p>  рдЖрдИрдбреА рджреНрд╡рд╛рд░рд╛ рдбреЗрдЯрд╛ рдЗрдХрд╛рдЗрдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХреА рдЬрд╛рддреА рд╣реИ рдФрд░ рдХреБрдЫ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реЛрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╕реАрдзреЗ рдЙрд╕ рд░реВрдк рдореЗрдВ рдЬрд┐рд╕рдореЗрдВ рд╡реЗ рд╕реЗрд╡рд╛ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рд╡реЗ рддрд╛рд░ рд╣реЛрддреЗ рд╣реИрдВ, рди рдХрд┐ рдХреБрдЫ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╡рд╕реНрддреБрдПрдВред  рдореБрдЭреЗ рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдпрд╛рдж рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЙрджрд╛рд╣рд░рдг рд╕рд░рд▓ рдФрд░ рд╕реНрдкрд╖реНрдЯ рд╣реИрдВред </p><br><p>  рдореИрдВ рддреБрд░рдВрдд рдзреНрдпрд╛рди рджреВрдВрдЧрд╛: рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ, рдореИрдВ рд╕реАрдзреЗ рддреМрд░ рдкрд░ рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдирдХрд▓реА рд╡рд╕реНрддреБрдУрдВ рдХреА рдУрд╡рд░рд░рд╛рдЗрдб рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХрд╣рддрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рд╛рде рд╡рд┐рдЪрд╛рд░ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рд╣реИ!  рдЗрд╕ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ, рдореИрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рд▓рдЧрд╛рддрд╛рд░ рдХрд░реВрдВрдЧрд╛: </p><br><ul><li>  рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдореЗрд░реА рд╕реЗрд╡рд╛ рдХрд╛ рдордЬрд╛рдХ рдЙрдбрд╝рд╛рдпрд╛; </li><li>  рдЗрд╕реЗ (рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ) рдПрдХ рдЕрдиреНрдп рд╡рд░реНрдЧ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ (рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЗрд╕рдореЗрдВ <code>DataService</code> рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рд╣реИ), рдЬрд┐рд╕реЗ рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХрд░реВрдВрдЧрд╛; </li><li>  рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП рдЧрдП рд╡рд░реНрдЧ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╕рдХреНрд╖рдо рдХрд┐рдпрд╛ рдФрд░ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛; </li><li>  рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдореИрдВ рдЕрдкрдиреЗ рдореЙрдХ рдХреА рд╡рд┐рдзрд┐ (рдУрдВ) рдХреЛ рдХреЙрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЖрджреЗрд╢ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реВрдВрдЧрд╛, рдЬрд┐рд╕реЗ рдкрд┐рдЫрд▓реА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП рдЧрдП рд╡рд░реНрдЧ рджреНрд╡рд╛рд░рд╛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдерд╛ред </li></ul><br><h2 id="mock-i-spy">  рдордЬрд╛рдХ рдФрд░ рдЬрд╛рд╕реВрд╕реА </h2><br><p>  рдореЙрдХрд┐рдЯреЛ рдХрд╛ рдХреЗрдВрджреНрд░реАрдп рд╡рд░реНрдЧ, рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, <code>BDDMockito</code> рдирд╛рдордХ рдПрдХ рд╡рд░реНрдЧ рд╣реИ ( <code>BDDMockito</code> рд╡рд░реНрдЧ рднреА рд╣реИ рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреАрдбреАрдбреА</a> рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдЙрдкрдпреБрдХреНрдд рд░реВрдк рдореЗрдВ рд╕рдорд╛рди рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдореИрдВ рдЙрд╕ рдкрд░ рдзреНрдпрд╛рди рдирд╣реАрдВ рджреВрдВрдЧрд╛) ред  рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдЗрд╕рдХреЗ рд╕реНрдереИрддрд┐рдХ рддрд░реАрдХреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИред </p><br><p>  <code>DataService</code> рд╡рд░реНрдЧ рдХрд╛ рдордЬрд╝рд╛рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдореБрдЭреЗ рдмрд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗ: </p><br><pre> <code class="java hljs">DataService dataServiceMock = Mockito.mock(DataService.class);</code> </pre> <br><p>  рд╣реЛ рдЧрдпрд╛ - рдореБрдЭреЗ рдЙрд╕ рд╡рд░реНрдЧ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдорд┐рд▓рд╛ рдЬрд┐рд╕рдХреА рдореБрдЭреЗ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдХрд┐рд╕реА рднреА рд╡рд┐рдзрд┐ рдпрд╛ рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬрд┐рд╕реЗ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрд╕ рд╡рд░реНрдЧ рдХрд╛ рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛ рдЬрд┐рд╕реЗ рдореИрдВ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ)ред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдПрдХ рд╡реНрдпрд╕рдиреА рдЬрд╛рдВрдЪ рдмрд╛рдж рдореЗрдВ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЗрд╕реЗ рдкрд╛рд╕ рдХрд░реЗрдЧрд╛: рди рдХреЗрд╡рд▓ <code>dataServiceMock.getClass()</code> <code>true</code> рд▓реМрдЯреЗрдЧреА, рдмрд▓реНрдХрд┐ <code>dataServiceMock.getClass()</code> рднреА <code>dataServiceMock.getClass()</code> - рдЕрд░реНрдерд╛рддреН <code>dataServiceMock.getClass()</code> ред  рдХреБрдЫ рдФрдкрдЪрд╛рд░рд┐рдХ рддрд░реАрдХреЗ рд╕реЗ, рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕реЗ рдПрдХ рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рд░реВрдк рд╕реЗ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдореБрд╢реНрдХрд┐рд▓ рдХрд╛рдо рд╣реИ, рдЬреЛ рдХрд┐ рддрд╛рд░реНрдХрд┐рдХ рд╣реИ: рдЖрдЦрд┐рд░рдХрд╛рд░, рдкрд╣рд▓реЗ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рд╕рд┐рд░реНрдл рджреВрд╕рд░реЗ рд╕реЗ рдЕрдкреНрд░рднреЗрджреНрдп рд╣реЛрдирд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореЙрдХрд┐рдЯреЛ рдХреЗ рдкрд╛рд╕ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ - <code>Mockito.mockingDetails</code> рд╡рд┐рдзрд┐ред  рдЗрд╕реЗ рдПрдХ рдордирдорд╛рдирд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд╛рд╕ рдХрд░рдХреЗ, рдореБрдЭреЗ <code>MockingDetails</code> рдХреНрд▓рд╛рд╕ рдХрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдорд┐рд▓рддрд╛ рд╣реИред  рдЗрд╕рдореЗрдВ рдЗрд╕ рдмрд╛рдд рдХреА рдЬрд╛рдирдХрд╛рд░реА рд╣реИ рдХрд┐ рдпрд╣ рд╡рд╕реНрддреБ рдореЙрдХрд┐рдЯреЛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдХреНрдпрд╛ рджрд░реНрд╢рд╛рддреА рд╣реИ: рдЪрд╛рд╣реЗ рд╡рд╣ рдирдХрд▓реА рд╣реЛ, рдЬрд╛рд╕реВрд╕реА рд╣реЛ (рдиреАрдЪреЗ рджреЗрдЦреЗрдВ), рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛, рдпрд╣ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдФрд░ рдЗрд╕реА рддрд░рд╣ред </p><br><p>  рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рд╕реНрдерд┐рддрд┐ рд╡рд╣ рд╕реНрдерд┐рддрд┐ рд╣реИ рдЬрдм рдореИрдВ рдЕрдВрддрд┐рдо рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдХрд▓реА рдмрдирд╛рдиреЗ рдпрд╛ рдПрдирдо рдХреЗ рдПрдХ рдирдХрд▓реА рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдпрд╛ рдЕрдВрддрд┐рдо рд╡рд┐рдзрд┐ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реВрдВред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореЙрдХрд┐рдЯреЛ рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд╕рд╛рде, рдХреЛрдб рдКрдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдареАрдХ рдЗрд╕реА рдкрд░рд┐рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╣рд╡рд╛рд▓рд╛ рджреЗрддреЗ рд╣реБрдПред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдмрдирд╛рдПрдБ (рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдЯреНрд░реА рдХреЗ рдорд╛рдирдХ рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде) рдлрд╝рд╛рдЗрд▓ <code>test/resources/mockito-extensions/org.mockito.plugins.MockMaker</code> рдФрд░ рдЗрд╕рдореЗрдВ рд▓рд╛рдЗрди рдбрд╛рд▓реЗрдВ: </p><br><pre> <code class="plaintext hljs">mock-maker-inline</code> </pre> <br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдк рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рдЕрдВрддрд┐рдо рдХрдХреНрд╖рд╛рдУрдВ рдФрд░ рдПрдирдо рдХреА рдирдХрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА рд╕рд╛рде рдЕрдВрддрд┐рдо рддрд░реАрдХреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдореБрдЭреЗ рдЬреЛ рдПрдХреНрд╢рди рдорд┐рд▓рд╛ рд╡рд╣ рдЬрд┐рддрдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЙрддрдирд╛ рдирд┐рд░рд╛рдзрд╛рд░ рд╣реИ: рдХрд┐рд╕реА рднреА рддрд░реАрдХреЗ рдХрд╛ рдХрд┐рд╕реА рднреА рдЪреАрдЬ рдкрд░ рдХреЛрдИ рдкреНрд░рднрд╛рд╡ рдирд╣реАрдВ рдкрдбрд╝реЗрдЧрд╛, рдФрд░ рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдореВрд▓реНрдп рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП <code>null</code> рд╣реЛрдЧрд╛ рдФрд░ рдЖрджрд┐рдо рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП <code>0</code> ред  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ: рдпрджрд┐ рд╡рд┐рдзрд┐ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рд▓реМрдЯрд╛рддреА рд╣реИ, рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдореЙрдХ <code>null</code> рдирд╣реАрдВ рд▓реМрдЯреЗрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рдВрдЧреНрд░рд╣ рдЦрд╛рд▓реА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>List</code> рдпрд╣ рдПрдХ рдЦрд╛рд▓реА <code>LinkedList</code> рднрд▓реЗ рд╣реА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд┐рдзрд┐ рд╡рд╛рдкрд╕ рдЖ рдЧрдИ рд╣реЛред  рд▓реЗрдХрд┐рди рд╕рд░рдгрд┐рдпреЛрдВ, рдЖрджрд┐рдо рдпрд╛ рд╡рд╕реНрддреБ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ <code>null</code> рд╣реЛ рдЬрд╛рддрд╛ рд╣реВрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ (рдФрд░ рди рдХреЗрд╡рд▓ рдпрд╣) <code>MockSettings</code> рд╡рд░реНрдЧ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╢рд╛рдпрдж рд╣реА рдХрднреА рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p>  рдПрдХ рддрд░реАрдХрд╛ рдпрд╛ рджреВрд╕рд░рд╛, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдореБрдЭреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рдФрд░ рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдореИрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдХреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдореИрдВ рд╕реНрдЯрдм рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд░реНрдЧ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдЗрд╕рдХреЗ рддрд░реАрдХреЛрдВ рдХреЗ рдХреЗрд╡рд▓ рднрд╛рдЧ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛?  рдпрджрд┐ рд╣рдо рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдРрд╕реА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрдорддреМрд░ рдкрд░ (рд▓реЗрдХрд┐рди рд╣рдореЗрд╢рд╛ рдирд╣реАрдВ) рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рд╕рд╛рде рдареАрдХ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд┐рдд рдирд╣реАрдВ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдРрд╕реА рд╕реНрдерд┐рддрд┐рдпрд╛рдБ рд╣реИрдВ рдЬрдм рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЗрд╕реЗ рдЯрд╛рд▓рд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП, рдореЙрдХрд┐рдЯреЛ рдореЗрдВ рддрдерд╛рдХрдерд┐рдд рдЬрд╛рд╕реВрд╕ рд╣реИрдВ, "рдЬрд╛рд╕реВрд╕ред"  рдореМрдХреНрд╕ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЙрдиреНрд╣реЗрдВ рд╡рд░реНрдЧ рдФрд░ рддреИрдпрд╛рд░ рд╡рд╕реНрддреБ рджреЛрдиреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs">DataService dataServiceSpy = Mockito.spy(DataService.class); <span class="hljs-comment"><span class="hljs-comment">// or DataService dataService = new DataService(); dataServiceSpy = Mockito.spy(dataService);</span></span></code> </pre> <br><p>  рдПрдХ рд╡рд░реНрдЧ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЬрд╛рд╕реВрд╕реА рдХрд░рддреЗ рд╕рдордп, рдпрджрд┐ рдЗрд╕рдХрд╛ рдкреНрд░рдХрд╛рд░ рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ, рддреЛ рдПрдХ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдирдХрд▓реА рд╡рд╕реНрддреБ рдмрдирд╛рдИ рдЬрд╛рдПрдЧреА, рдФрд░ рдпрджрд┐ рдкреНрд░рдХрд╛рд░ рдПрдХ рд╡рд░реНрдЧ рд╣реИ, рддреЛ рдореЙрдХрд┐рдЯреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ (рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд┐рдирд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛ред  рдФрд░ рдХреЗрд╡рд▓ рдЕрдЧрд░ рдРрд╕рд╛ рдХреЛрдИ рдирд┐рд░реНрдорд╛рддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдПрдХ рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрдЧреА рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред </p><br><p>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЬрд╛рд╕реВрд╕реА рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдПрдХ рдирд┐рдпрдорд┐рдд рд╡рд░реНрдЧ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд╕рдорд╛рди рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡реЗ рдореБрдЭреЗ рдирдХрд▓реА рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕рдорд╛рди рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рджреЗрддреЗ рд╣реИрдВ: рд╡реЗ рдореБрдЭреЗ рдЕрдкрдиреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рдЙрдирдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ (рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрдиреБрднрд╛рдЧ рджреЗрдЦреЗрдВ)ред  рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ: рдЬрд╛рд╕реВрд╕реА рдЙрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдПрдХ рдЖрд╡рд░рдг рдирд╣реАрдВ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдЗрд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛!  рдЗрд╕рд▓рд┐рдП, рдЬрд╛рд╕реВрд╕ рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рд╕реЗ рдореВрд▓ рдЙрджрд╛рд╣рд░рдг рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><h2 id="upravlenie-povedeniem">  рд╡реНрдпрд╡рд╣рд╛рд░ рдкреНрд░рдмрдВрдзрди </h2><br><p>  рддреЛ, рдХреИрд╕реЗ рдореИрдВ рдХреНрдпрд╛ рдЬрд░реВрд░рдд рд╣реИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирдХрд▓реА рдпрд╛ рдЬрд╛рд╕реВрд╕реА рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдПред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рд╣рдореЗрд╢рд╛ рд╣рд░ рдЬрдЧрд╣ рдмрд╕ "рдирдХрд▓реА" рд▓рд┐рдЦреВрдВрдЧрд╛ - рдЗрд╕рдХрд╛ рдорддрд▓рдм "рдирдХрд▓реА рдпрд╛ рдЬрд╛рд╕реВрд╕" рд╣реЛрдЧрд╛, рдЬрдм рддрдХ рдХрд┐ рдЕрдиреНрдпрдерд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рди рдХрд╣рд╛ рдЬрд╛рдПред </p><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдПрдХ рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд▓рд┐рдП рдЖрддрд╛ рд╣реИ: рдЬрдм рдПрдХ рдореЙрдХ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛрддрд╛ рдерд╛ (рдЕрд░реНрдерд╛рдд, рдЗрд╕ рддрд░рд╣ рдХреЗ рдФрд░ рдЗрд╕ рддрд░рд╣ рдХреЗ рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕ рддрд░рд╣ рдХреА рд╡рд┐рдзрд┐ рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛), рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдФрд░ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рдореЙрдХрд┐рдЯреЛ рд╡рд░реНрдЧ рдХреЗ рднреАрддрд░ рджреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИрдВ - рдореБрдЦреНрдп рдПрдХ, рдЬрд╣рд╛рдБ рд╕рдВрднрд╡ рд╣реЛ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдбреЗрд╡рд▓рдкрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд╢рдВрд╕рд┐рдд, рдФрд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рдПрдХ, рдЬрд╣рд╛рдБ рдореБрдЦреНрдп рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ, рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдореБрдЦреНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди <code>Mockito.when</code> рдкрджреНрдзрддрд┐ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рдпрд╣ рд╡рд┐рдзрд┐ "рдкреИрд░рд╛рдореАрдЯрд░" рдХреЗ рд░реВрдк рдореЗрдВ рдореЙрдХ-рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдкреБрдирд░реНрдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░рддреА рд╣реИ (рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рдХреНрд░рд┐рдпрд╛ рдирд┐рд╢реНрдЪрд┐рдд рд╣реИ) рдФрд░ рдкреНрд░рдХрд╛рд░ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдХреЛ <code>OngoingStubbing</code> , рдЬреЛ <code>OngoingStubbing</code> рдХреЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ <code>Mockito.then...</code> рдкрд░рд┐рд╡рд╛рд░ (рдпрд╣ рдЗрд╕ рдкреНрд░рднрд╛рд╡ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреИрд╕реЗ рд╕реЗрдЯ рд╣реЛрддреА рд╣реИ)ред  рд╕рднреА рдПрдХ рд╕рд╛рде, рд╕рдмрд╕реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs">List&lt;String&gt; data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); data.add(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>); Mockito.when(dataService.getAllData()).thenReturn(data);</code> </pre> <br><p>  рдЗрд╕ рдСрдкрд░реЗрд╢рди рдХреЗ рдмрд╛рдж, <code>getAllData()</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ <code>getAllData()</code> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ, рдореБрдЭреЗ рд╕реВрдЪреА рдХреА рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдорд┐рд▓рддрд╛ рд╣реИред </p><br><p>  рдпрд╣рд╛рдВ, рдкрд░рд┐рдЪрд┐рдд "рд╡рд╕реНрддреБ-рдЙрдиреНрдореБрдЦ" рдЕрдВрддрд░реНрдЬреНрдЮрд╛рди рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдЦрд░рд╛рдмреА рджреЗ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд░рд╣рдиреЗ рд▓рд╛рдпрдХ рд╣реИред  рдЬрд╛рд╡рд╛ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдмрд┐рдВрджреБ рд╕реЗ, рдорд╛рди <code>when</code> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдУрд╡рд░рдбреНрдпреВрдЬреНрдб рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдорд╛рдиред  рдореЙрдХ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдПрдХ рдЦрд╛рд▓реА рдорд╛рди рд╣реИ; рдЬрд╛рд╕реВрд╕ рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд╕реНрддреБ рдХреА рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдорд╛рди рд╣реИред  рд▓реЗрдХрд┐рди рдореЙрдХрд┐рдЯреЛ рдХреЗ "рд╣реБрдб рдХреЗ рдиреАрдЪреЗ" рдЬрд╛рджреВ рдЕрднрд┐рдирдп рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, <code>when</code> рд╡рд┐рдзрд┐ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧреА (рдФрд░ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд▓реЙрдиреНрдЪ рд╣реЛрдиреЗ рдкрд░ рджреБрд░реНрдШрдЯрдирд╛ рдирд╣реАрдВ рд╣реЛрдЧреА) рдХреЗрд╡рд▓ рдЕрдЧрд░ рдореЙрдХ-рдСрдмреНрдЬреЗрдХреНрдЯ рд╡рд┐рдзрд┐ рдХреЙрд▓ <code>when</code> рдмрд╛рдж рдХреЛрд╖реНрдардХ рдХреЗ рдЕрдВрджрд░ рд╣реИред </p><br><p>  рдореЙрдХрд┐рдЯреЛ рдореЗрдВ рдПрдХ рдореЙрдХ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╕рдордп рдПрдХ рд╕рдорд╛рди рд╡рд┐рдЪрд╛рд░рдзрд╛рд░рд╛ рдЕрдХреНрд╕рд░ рдХрд╛рдо рдХрд░рддреА рд╣реИ: рдПрдХ рд╡рд┐рдзрд┐ (рдореЙрдХрд┐рдЯреЛ рдХреА рдПрдХ рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдпрд╛ рдХреНрд▓рд╛рд╕) рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ, рдореИрдВ рдЗрд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рджрд┐рдП рдЧрдП рдорд╛рди рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рддрд░рд╣ рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рд╡рд┐рдзрд┐ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдХреЙрд▓ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реВрдВ: рдЗрд╕рдХреА рд╕реАрдорд╛рдПрдБ, рдкрд░рд┐рдгрд╛рдо рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ, рдЗрд╕рдХреА рдЪреБрдиреМрддрд┐рдпреЛрдВ рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдХрд░реЗрдВ рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рдпрд╣ рдереЛрдбрд╝рд╛ рдзреВрдорд┐рд▓ рд▓рдЧрддрд╛ рд╣реИ, рдореИрдВ рдорд╛рдирддрд╛ рд╣реВрдВ рдФрд░ рдкрд╣рд▓реА рдЯрдХреНрдХрд░ рдореЗрдВ рдпрд╣ рдЕрдЬреАрдм рд▓рдЧ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди, рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЬрд▓реНрдж рд╣реА рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рд╕реНрдЯрдмреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рдорд╣рд╕реВрд╕ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рд╣рд╛рд▓рдд рдФрд░ рдХреЙрд▓ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди <code>Mockito.do...</code> рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рддрд░реАрдХреЗ рд╣реИрдВред  рдпреЗ рд╡рд┐рдзрд┐рдпрд╛рдВ рдЖрдкрдХреЛ рдХреЙрд▓ рдХреЗ рдкрд░рд┐рдгрд╛рдо рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдФрд░ <code>Stubber</code> рдХреНрд▓рд╛рд╕ рдХреА рдПрдХ рд╡рд╕реНрддреБ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╢рд░реНрдд рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рддрд░рд╣ рд╕реЗ рдКрдкрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдмрдВрдзрди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs">List&lt;String&gt; data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); data.add(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>); Mockito.doReturn(data).when(dataService).getData()</code> </pre> <br><p>  рдХреНрдпрд╛ рдЕрдВрддрд░ рд╣реИ, рдХреНрдпреЛрдВ <code>Mockito.when</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдмрд╛рдзреНрдпрдХрд╛рд░реА рдмреЗрд╣рддрд░ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЬрдм рдЖрдкрдХреЛ рдЕрднреА рднреА <code>Mockito.do...</code> рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ <code>Mockito.do...</code> ?  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ: рдкрд╣рд▓реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ, рд╡рд┐рдзрд┐ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд╕реЗрдЯ рдХрд░рддреЗ рд╕рдордп (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, <code>getAllData()</code> ), рдЙрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдЬрд┐рд╕реЗ рдЕрднреА рддрдХ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдХреЗрд╡рд▓ рддрднреА, <code>getAllData()</code> рдореЗрдВ, рдПрдХ рдУрд╡рд░рд░рд╛рдЗрдб рд╣реЛрддрд╛ рд╣реИред  рджреВрд╕рд░реЗ рдореЗрдВ, рдЗрд╕ рддрд░рд╣ рдХреА рдХреЙрд▓ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ - <code>Stubber.when</code> рд╡рд┐рдзрд┐ рд╕реАрдзреЗ <code>Stubber.when</code> рдкрд╛рд╕ рдЬрд╛рддреА рд╣реИред <code>Stubber.when</code> рд╡рд┐рдзрд┐ рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рдЗрд╕ рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдПрдХ рд╣реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрд▓рдЧ рдкреНрд░рдХреГрддрд┐ рдХреЛ рдПрдХ рдЕрддрд┐рд╡реНрдпрд╛рдкреНрдд рд╡рд┐рдзрд┐ рдХреЗ рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдЕрдВрддрд░ рд╕рдм рдХреБрдЫ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  <code>Mockito.do...</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ <code>Mockito.do...</code> рд╕рдВрдХрд▓рди рдЪрд░рдг рдкрд░ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдирд┐рдпрдВрддреНрд░рдг рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдореИрдВ рдХрд┐рд╕ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реВрдВрдЧрд╛ рдФрд░ рдХреНрдпрд╛ рдпрд╣ рджрд┐рдП рдЧрдП рд░рд┐рдЯрд░реНрди рдорд╛рди рдХреЗ рд╕рд╛рде рдкреНрд░рдХрд╛рд░ рдореЗрдВ рд╕рдВрдЧрдд рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЖрдорддреМрд░ рдкрд░ <code>Mockito.when</code> рдмреЗрд╣рддрд░ рд╣реИ - рдЗрд╕рдореЗрдВ рдХреЛрдИ рдЧрд▓рддреА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИред  рд▓реЗрдХрд┐рди рдРрд╕реЗ рдорд╛рдорд▓реЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рдореИрдВ рдПрдХ рдУрд╡рд░рд░рд╛рдЗрдб рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рд╕реЗ рдмрдЪрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ - рд╣реМрд╕рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдореЙрдХ рдХреЗ рд▓рд┐рдП, рдЗрд╕ рддрд░рд╣ рдХреА рдХреЙрд▓ рдХрд╛рдлреА рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рд╣реИ рдпрд╛ рдЬрд╛рд╕реВрд╕реА рд╕реЗ рдирд┐рдкрдЯрдирд╛ рд╣реИ, рддреЛ рдпрд╣ рдЕрд╡рд╛рдВрдЫрдиреАрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдПрдХ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХрдиреЗ рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдкреБрдирд░реНрд╡рд┐рддреНрдд рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реЛрдЧреАред ред  рдФрд░ рдпрд╣рд╛рдБ <code>Mockito.do...</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдмрд╛рдзреНрдпрдХрд╛рд░реА <code>Mockito.do...</code> рд▓рд┐рдП рдЖрддрд╛ рд╣реИ <code>Mockito.do...</code> </p><br><p>  рдПрдХ рдФрд░ рд╕реНрдерд┐рддрд┐ рдЬрд╣рд╛рдВ рдЖрдк <code>Mockito.do...</code> рдмрд┐рдирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code>Mockito.do...</code> рд╡рд┐рдзрд┐рдпрд╛рдБ <code>void</code> рд▓реМрдЯрд╛рдиреЗ рд╡рд╛рд▓реА рд╡рд┐рдзрд┐ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░ рд░рд╣реА рд╣реИрдВ: рд▓рдВрдмрд┐рдд <code>Mockito.when</code> рдкреИрд░рд╛рдореАрдЯрд░ рдРрд╕реА рд╡рд┐рдзрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  <code>Mockito.doReturn</code> рдпрд╣рд╛рдБ <code>Mockito.doReturn</code> рд╣реИ, рд▓реЗрдХрд┐рди <code>Mockito.doThrow</code> , <code>Mockito.doAnswer</code> рдФрд░ рд╢рд╛рдпрдж рд╣реА рдХрднреА рдкрд░реНрдпрд╛рдкреНрдд <code>Mockito.doNothing</code> ред </p><br><p>  рдЕрдЧрд▓рд╛, рдореИрдВ рдереЛрдбрд╝рд╛ рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рдЪрд╛рд░ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреЙрд▓ рдХреА рд╕реНрдерд┐рддрд┐ рдФрд░ рдкрд░рд┐рдгрд╛рдо рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВред  рдореИрдВ рдХреЗрд╡рд▓ <code>Mockito.when</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдмрд╛рдзреНрдпрдХрд╛рд░реА рдкрд░ рд╡рд┐рдЪрд╛рд░ <code>Mockito.when</code> - рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрд░реАрдХрд╛ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдореЗрдВ рд▓рдЧрднрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдорд╛рди рд╣реИред </p><br><h3 id="zadanie-usloviy-vyzova">  рдХреЙрд▓ рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗрдЯ рдХрд░рдирд╛ </h3><br><p>  рдКрдкрд░ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдПрдХ рд╡рд┐рдзрд┐ рдХреА рдЪрд┐рдВрддрд╛ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рдХреЙрд▓ рдХреА рд╕реНрдерд┐рддрд┐ рдПрдХ рдмрд╛рдд рд╕рдВрднрд╡ рд╣реИ - рдХреЙрд▓ рдХрд╛ рддрдереНрдпред  рдЬреИрд╕реЗ рд╣реА рдкреИрд░рд╛рдореАрдЯрд░ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ, рд╕реНрдерд┐рддрд┐ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реЛ рдЬрд╛рддреА рд╣реИред  рдХрдо рд╕реЗ рдХрдо, рдПрдХ рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдореИрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдореБрдЭреЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рдмрд╛рдд рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ: рдпрд╣ рдкрддрд╛ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдореИрдВ рд╣рдореЗрд╢рд╛ рджреА рдЧрдИ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдЬрдм рдореИрдВ рдЗрд╕реЗ рдХреБрдЫ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╣рддрд╛ рд╣реВрдВред  <code>DataService</code> рдореЗрдВ рдпрд╣ рд╡рд┐рдзрд┐ рд╣реИ: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataItemById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// some code... }</span></span></code> </pre> <br><p>  рдЕрдЧрд░ рдореБрдЭреЗ рддрд░реНрдХреЛрдВ рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛ рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рд╕реА рднреА рдХреЙрд▓ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдореБрдЭреЗ <code>Mockito.any</code> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataItemById(any())) .thenReturn(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>);</code> </pre> <br><p>  рдпрджрд┐ рдореБрдЭреЗ рддрд░реНрдХ рдХреЗ рдХреЗрд╡рд▓ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдореВрд▓реНрдп рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирдХрд▓реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕ рдореВрд▓реНрдп рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕реАрдзреЗ рдпрд╛ <code>Mockito.eq</code> рдХреЗ рддрд░реАрдХреЛрдВ (рдпрджрд┐ рдпрд╣ рдПрдХ рд╕рдорддреБрд▓реНрдпрддрд╛ рд╣реИ) рдпрд╛ <code>Mockito.same</code> (рдпрджрд┐ рд▓рд┐рдВрдХ рддреБрд▓рдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ) рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataItemById(<span class="hljs-string"><span class="hljs-string">"idValue"</span></span>)) .thenReturn(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// or Mockito.when(dataService.getDataItemById(Mockito.eq("idValue"))) .thenReturn("dataItem");</span></span></code> </pre> <br><p>  рдФрд░ рдЕрдЧрд░ рдореБрдЭреЗ рдХреБрдЫ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрд░реНрдХ рдЪрд╛рд╣рд┐рдП, рддреЛ рдПрдХ рд╣реА <code>Mockito</code> рдХреНрд▓рд╛рд╕ рдХреЗ рдХрдИ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рд░ рддрд░реАрдХреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢реБрд░реБрдЖрдд рдореЗрдВ рдпрд╛ рд╡рд░реНрдгреЛрдВ рдХреЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрдиреБрдХреНрд░рдо рдХреЗ рдЕрдВрдд рдореЗрдВ, рдкреИрдЯрд░реНрди рдорд┐рд▓рд╛рди рдЖрджрд┐ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ)ред  рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдзрд┐ Mockito.argThat рднреА рд╣реИ (рдФрд░ рдЖрджрд┐рдо рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ рдПрдирд╛рд▓реЙрдЧреНрд╕) рдЬреЛ ArgumentMatcher рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреА рд╣реИ: </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataById( Mockito.argThat(arg -&gt; arg == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || arg.length() &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>))) .thenReturn(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>);</code> </pre> <br><p>  <code>ArgumentMatchers</code> рдФрд░ <code>AdditionalMatchers</code> рдХреНрд▓рд╛рд╕реЗрд╕ рдЖрдкрдХреЛ рдЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдХреБрдЫ рдЙрдкрдпреЛрдЧреА рдСрдл-рдж-рд╢реЗрд▓реНрдл рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, extraMatchers.or рдФрд░ extraMatchers.and рдЖрдкрдХреЛ рдЕрдиреНрдп рдорд┐рд▓рд╛рдирдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ (рдзреНрдпрд╛рди рджреЗрдВ: рдЗрди рд╡рд░реНрдЧреЛрдВ рдХреЗ рд╕реНрдерд┐рд░ рддрд░реАрдХреЗ рдореИрдЪрд░реНрд╕ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд░рддреЗ рд╣реИрдВ!) </p><br><p>  рдПрдХ рд╣реА рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП, рдЖрдк рддрд░реНрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдХрдИ рдмрд╛рд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╕рднреА рд╡реНрдпрд╡рд╣рд╛рд░ рдореЙрдбрд▓ рдПрдХ рд╕рд╛рде рдХрд╛рд░реНрдп рдХрд░реЗрдВрдЧреЗред  рдмреЗрд╢рдХ, рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╡реЗ рдкреНрд░рддрд┐рдЪреНрдЫреЗрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдХрд╣рддреЗ рд╣реИрдВ, рдореИрдВ рдПрдХ рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдорд╛рдВрдЧ рдХрд░реВрдВрдЧрд╛ рдЬрдм рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЕрдВрддрд░ рдорд╛рди 5 рд╕реЗ рдХрдо рд╣реЛ рдФрд░ рджреВрд╕рд░рд╛ рдЬрдм рд╕рдорд╛рди рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рд╣реЛред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдмрд╛рдж рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдкреВрд░реНрд╡рддрд╛ рд▓реЗрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЬрдм рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдЬрдЯрд┐рд▓ рдкреИрдЯрд░реНрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рдмрд╕реЗ рдХрдордЬреЛрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ (рд╕реАрдорд╛ рдореЗрдВ - <code>any()</code> рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╣реА рдЕрдзрд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рддрд░реНрдХ рд╡рд╛рд▓реЗ рддрд░реАрдХреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рддрд╛рд░реНрдХрд┐рдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░, рдЕрд░реНрдерд╛рддреН рджрд┐рдП рдЧрдП рдкрд░рд┐рдгрд╛рдо рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рддрд░реНрдХреЛрдВ рдХреЗ рд╕рднреА рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдореБрдЭреЗ рдЙрдиреНрд╣реЗрдВ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдордирдорд╛рдирд╛ рддрд░реАрдХрд╛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рдорд┐рд▓рд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╢рд╛рдпрдж рдпрд╣ рдореМрдЬреВрдж рд╣реИред </p><br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдРрд╕реА рд╡рд┐рдзрд┐ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХреЛрдИ <code>Mockito</code> рдФрд░ рдореВрд▓реНрдпреЛрдВ рдХреЗ рдкреНрд░рддреНрдпрдХреНрд╖ рд╣рд╕реНрддрд╛рдВрддрд░рдг рдХрд╛ <code>Mockito</code> рд╕реНрдереИрддрд┐рдХ <code>Mockito</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рдирд╣реАрдВ рд╕рдХрддрд╛ рд╣реИред  <code>Mockito.eq</code> рдпрд╛ <code>Mockito.same</code> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><h3 id="zadanie-rezultatov-vyzova">  рдХреЙрд▓ рд░рд┐рдЬрд▓реНрдЯ рд╕реЗрдЯ рдХрд░рдирд╛ </h3><br><p>  рдореЙрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдХреЙрд▓ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдореБрдЦреНрдп рд╕рдВрднрд╛рд╡рд┐рдд рдкрд░рд┐рдгрд╛рдо рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрд╛ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдПрдХ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдЗрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдкрд░ рдареАрдХ рд╣реИ рдХрд┐ рдореЙрдХрд┐рдЯреЛ рдЯреВрд▓рдХрд┐рдЯ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рджрд┐рдЦрд╛рдП рдЧрдП рд╕рд░рд▓рддрдо рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреЙрд▓ рдХрд╛ рдЬрд╡рд╛рдм рдПрдХ рдореВрд▓реНрдп рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рд╣реИред  рдореИрдВ рдлрд┐рд░ рд╕реЗ рдЙрд╕рдХрд╛ рдХреЛрдб рджреВрдВрдЧрд╛: </p><br><pre> <code class="java hljs">List&lt;String&gt; data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); data.add(<span class="hljs-string"><span class="hljs-string">"dataItem"</span></span>); Mockito.when(dataService.getAllData()).thenReturn(data);</code> </pre> <br><p>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ: рдЖрдк рдХреЗрд╡рд▓ рдПрдХ рд╡рд╕реНрддреБ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрджрд┐рдо рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЕрд▓рдЧ рддрд░реАрдХреЗ рдирд╣реАрдВ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рд╡рд┐рдзрд┐ рдПрдХ рдЖрджрд┐рдо рдорд╛рди рд▓реМрдЯрд╛рддреА рд╣реИ, рддреЛ рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдВрдпреБрдХреНрдд рд░рд╛рд╖реНрдЯреНрд░ / рдореБрдХреНрдХреЗрдмрд╛рдЬреА рд╣реЛрдЧреАред  рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдпрд╣ рд╣рд╕реНрддрдХреНрд╖реЗрдк рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдХрдВрдкрд╛рдЗрд▓рд░ рдЕрдиреНрдпрдерд╛ рд╕реЛрдЪрддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рдЙрд╕рдХреЗ рд╕рд╛рде рд╕рд╣рдордд рд╣реЛрдирд╛ рд╣реЛрдЧрд╛ ... рдпрд╛ рдЙрд╕рдХреА рдЪреЗрддрд╛рд╡рдирд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд░рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрдирд╛ рдХрдард┐рди рдирд╣реАрдВ рд╣реИ: </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"invalidId"</span></span>)) .thenThrow(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException());</code> </pre> <br><p>  рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рд╣реИ: рдЖрдк рдПрдХ рдЕрдкрд╡рд╛рдж рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╕реАрдзреЗ рдлреЗрдВрдХ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдЖрдк рдХреЗрд╡рд▓ рдПрдХ рдЕрдкрд╡рд╛рдж рд╡рд░реНрдЧ рдХреЗ рд╕рд╛рде рдореЙрдХрд┐рдЯреЛ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП: </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"invalidId"</span></span>)) .thenThrow(IllegalArgumentException.class);</code> </pre> <br><p>  рджреЛрдиреЛрдВ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рдЖрдкрдХреЛ рдЕрдкрд╡рд╛рджреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдФрд░ рдЬрд╛рдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореЙрдХрд┐рдЯреЛ рдЖрдкрдХреЛ рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрдЧрд╛ рдпрджрд┐ рдЕрдкрд╡рд╛рдж рдХрд╛ рдкреНрд░рдХрд╛рд░ рдЙрд╕ рд╡рд┐рдзрд┐ рд╕реЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдореИрдВ рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред </p><br><p>  рдЬрдм рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ (рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд┐рдирд╛ рднреА), рд╕рд╛рде рд╣реА рд╕рд╛рде рдкреНрд░рддреНрдпрдХреНрд╖ рдлрд╝реАрд▓реНрдб рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЖрдЦрд┐рд░рдХрд╛рд░, рдпрд╣ рдореЙрдХрд┐рдЯреЛ рд╣реИ!), рддрд╛рдХрд┐ рдлреЗрдВрдХ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рднреА рдлрд╝реАрд▓реНрдб <code>null</code> ред  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЕрдкрд╡рд╛рдж рдХреА рд╕рд╛рдордЧреНрд░реА рдЖрдкрдХреЗ рд▓рд┐рдП рдорд╛рдпрдиреЗ рд░рдЦрддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреБрдЫ <code>type</code> рдлрд╝реАрд▓реНрдб рдЬрд┐рд╕рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рд╣реИ), рддреЛ рдЖрдкрдХреЛ рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЛ рдЫреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЕрдкрд╡рд╛рдж рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдпреЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╡рд┐рдХрд▓реНрдк рдЙрдкрдпреБрдХреНрдд рд╣реИрдВ рдпрджрд┐, рджрд┐рдП рдЧрдП рд╢рд░реНрддреЛрдВ рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ, рдЖрдкрдХреЛ рд╣рдореЗрд╢рд╛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╡рд╛рдкрд╕реА рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд╣рдореЗрд╢рд╛ рдкрд░рд┐рдгрд╛рдо рдХреЗ рд╕рдорд╛рди рдореВрд▓реНрдп рдпрд╛ рд╣рдореЗрд╢рд╛ рдПрдХ рд╣реА рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрддреЗ рд╣реИрдВ, рдФрд░ рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдпреЗ рдХреНрд╖рдорддрд╛рдПрдВ рдХрд╛рдлреА рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрддреА рд╣реИрдВред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдЕрдзрд┐рдХ рд▓рдЪреАрд▓реЗрдкрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдореЗрд░реА рд╡рд┐рдзрд┐ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рдВрдЧреНрд░рд╣ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреА рд╣реИ, рдФрд░ рдкрд╣рд▓реЗ рдПрдХ рд╕реЗ рдПрдХ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдПрдХ рдФрд░ рд╕рдВрдЧреНрд░рд╣ рд▓реМрдЯрд╛рддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдирдХреЗ рдЖрдИрдбреА рдХреЗ рд╕реЗрдЯ рджреНрд╡рд╛рд░рд╛ рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛), рдФрд░ рдореИрдВ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдЗрдирдкреБрдЯ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕реЗрдЯреЛрдВ рдХреЗ рд╕рд╛рде рдмрд╛рд░-рдмрд╛рд░ рдЗрд╕ рдирдХрд▓реА рд╡рд╕реНрддреБ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред рдбреЗрдЯрд╛, рд╣рд░ рдмрд╛рд░ рдЗрд╕реА рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред  рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕рдорд╛рдзрд╛рди рд╣реИ - <code>Mockito.then</code> ред  рдпрд╣ <code>Answer</code> рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ <code>InvocationOnMock</code> рд╡рд░реНрдЧ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИред  рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рд╕реЗ рдореИрдВ рд╡рд┐рдзрд┐ рдХреЙрд▓ рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ (рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдпрд╛ рдПрдХ рдмрд╛рд░ рдПрдХ рд╕рд░рдгреА рдХреЗ рд░реВрдк рдореЗрдВ рд╕рднреА) рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдФрд░ рдЙрдирдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдореЗрд░реЗ рд╕рдВрдЧреНрд░рд╣ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреЗ рдЕрдиреБрд░реВрдк рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдирд╕реЗ рдПрдХ рдирдпрд╛ рд╕рдВрдЧреНрд░рд╣ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдзреНрдпрд╛рди рджреЗрдВ: рд╡рд╛рдВрдЫрд┐рдд рдкрд░рд┐рдгрд╛рдо рдмрд╕ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдкреИрд░рд╛рдореАрдЯрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдХреБрдЫ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдирд╣реАрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЙрдореНрдореАрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ): </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataByIds(Mockito.any())) .thenAnswer(invocation -&gt; invocation .&lt;List&lt;String&gt;&gt;getArgument(<span class="hljs-number"><span class="hljs-number">0</span></span>).stream() .map(id -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (id) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"dataItemA"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"dataItemB"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } }) .collect(Collectors.toList()));</code> </pre> <br><p>  рд╡реИрдЪрд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ, рдпрд╣ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд┐рдзрд┐ рдХрд╛ рдПрдХ рдореЙрдбрд▓ рд▓рд┐рдЦрдиреЗ рдХреА рддрд░рд╣ рдХреБрдЫ рд╣реИ: рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛, рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд░рдирд╛, рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдХрд░рдирд╛ред          -  ,    - ,      ,     ,    mock-    . </p><br><p>     <code>Answer</code> ,     , тАФ , <code>AnswersWithDelay</code> , <code>ReturnsElementsOf</code>  . . </p><br><p>  :  <code>InvocationOnMock</code>   тАФ       <code>Object[]</code> ,  generic-. </p><br><p>        тАФ <code>thenCallRealMethod</code> .    .     mock-,    spy-.   mock   ,      ,  -   <code>null</code> .  spy   <code>thenCallRealMethod</code>     spy  ;    ,     -      . </p><br><p>        <code>thenAnswer</code> :  <code>InvocationOnMock</code>   <code>callRealMethod()</code> тАФ   ,   ""    -  . </p><br><p>    <code>OngoingStubbing</code>    <code>OngoingStubbing</code> ,  ,   ,     .            ,   .  <code>thenReturn</code>  <code>thenThrow</code>   ,  varargs.       . </p><br><pre> <code class="java hljs">Mockito.when(dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"a"</span></span>)) .thenReturn(<span class="hljs-string"><span class="hljs-string">"valueA1"</span></span>, <span class="hljs-string"><span class="hljs-string">"valueA2"</span></span>) .thenThrow(IllegalArgumentException.class);</code> </pre> <br><p>         <code>"valueA1</code> ,  тАФ <code>"valueA2</code> ( ),   (  )    <code>IllegalArgumentException</code> . </p><br><h2 id="slezhenie-za-vyzovami-metodov">     </h2><br><p>        :          (mock'    ),     .   ,     :   ,          ,       .      <code>verify</code> . </p><br><p>  ,           ,  : </p><br><pre> <code class="java hljs">Mockito.verify(dataService).getDataById(Mockito.any());</code> </pre> <br><p>      ,            <code>getDataById</code> ,  ,           . ,             Mockito,      <code>when</code> ,   ,  ,         mock-. , ,  ,      <code>when</code>  , тАФ      mock',       (. ). </p><br><p>           : </p><br><pre> <code class="plaintext hljs">Mockito.verify(dataService, Mockito.times(1)) .getDataById(Mockito.any());</code> </pre> <br><p>           <code>Mockito.times</code> ;       <code>Mockito.never</code> .    <code>Mockito.atLeast</code> (  <code>Mockito.atLeastOnce</code>   1)  <code>Mockito.atMost</code> ,       ,    <code>Mockito.only</code> , ,         mock-  (. .     ). </p><br><p>  ,         <code>Mockito</code> ,     <code>VerificationAfterDelay</code>  <code>VerificationWithTimeout</code> ,    <code>Mockito.after</code>  <code>Mockito.timeout</code> .  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="plaintext hljs">Mockito.verify(dataService, Mockito.after(1000).times(1)) .getDataById(Mockito.any());</code> </pre> <br><p>    ,    mock   ,      ,              ,       .        .   <code>after</code>  <code>timeout</code>  ,          ,    ,    тАФ   ,     .  ,   <code>timeout</code>         тАФ       .   <code>VerificationWithTimeout</code>   <code>never</code>  <code>atMost</code> :         . </p><br><p>  ,             <code>Mockito.any()</code> .          ,   ,     тАФ    Mockito       ,    ,     . Mock-     ,        ,   , , : </p><br><pre> <code class="java hljs">dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"a"</span></span>); dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"b"</span></span>); Mockito.verify(dataService, Mockito.times(<span class="hljs-number"><span class="hljs-number">2</span></span>)).getDataById(Mockito.any()); Mockito.verify(dataService, Mockito.times(<span class="hljs-number"><span class="hljs-number">1</span></span>)).getDataById(<span class="hljs-string"><span class="hljs-string">"a"</span></span>); Mockito.verify(dataService, Mockito.never()).getDataById(<span class="hljs-string"><span class="hljs-string">"c"</span></span>); dataService.getDataById(<span class="hljs-string"><span class="hljs-string">"c"</span></span>); Mockito.verify(dataService, Mockito.times(<span class="hljs-number"><span class="hljs-number">1</span></span>)).getDataById(<span class="hljs-string"><span class="hljs-string">"c"</span></span>); Mockito.verifyNoMoreInteractions(dataService);</code> </pre> <br><p>      <code>verifyNoMoreInteractions</code> (  <code>verifyZeroInteractions</code> ) тАФ    -  (            <code>verify</code> )    mock- тАФ    .  :   varargs,     ,     ,         <strong> </strong> ! </p><br><p>       ,   ,      ,     .   ,    <code>InOrder</code> : </p><br><pre> <code class="java hljs">InOrder inOrder = Mockito.inOrder(dataService);</code> </pre> <br><p>     varargs;     тАФ    mock-   ,    <code>InOrder</code>                .     <code>verify</code>    ,   <code>Mockito.verify</code> : </p><br><pre> <code class="java hljs">inOrder.verify(dataService, times(<span class="hljs-number"><span class="hljs-number">2</span></span>)).saveData(any()); inOrder.verify(dataService).getData();</code> </pre> <br><p>       ,         <code>saveData</code> , <strong> </strong>  тАФ <code>getData</code> .  ,   <code>InOrder</code>    ,      тАФ     . </p><br><p>       ,   ,       тАФ , .      -      ,    ,      тАФ  ,     ,    .     <code>ArgumentCaptor</code>    <code>capture()</code> .  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="java hljs">DataSearchRequest request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataSearchRequest(<span class="hljs-string"><span class="hljs-string">"idValue"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Date(System.currentTimeMillis()), <span class="hljs-number"><span class="hljs-number">50</span></span>); dataService.getDataByRequest(request); ArgumentCaptor&lt;DataSearchRequest&gt; requestCaptor = ArgumentCaptor.forClass(DataSearchRequest.class); Mockito.verify(dataService, times(<span class="hljs-number"><span class="hljs-number">1</span></span>)).getDataByRequest(requestCaptor.capture()); assertThat(requestCaptor.getAllValues()).hasSize(<span class="hljs-number"><span class="hljs-number">1</span></span>); DataSearchRequest capturedArgument = requestCaptor.getValue(); assertThat(capturedArgument.getId()).isNotNull(); assertThat(capturedArgument.getId()).isEqualTo(<span class="hljs-string"><span class="hljs-string">"idValue"</span></span>); assertThat(capturedArgument.getUpdatedBefore()).isAfterYear(<span class="hljs-number"><span class="hljs-number">1970</span></span>); assertThat(capturedArgument.getLength()).isBetween(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>);</code> </pre> <br><p> <code>ArgumentCaptor</code>       ,      <strong> </strong> ,   <code>ArgumentCaptor</code>  . <code>getValue()</code>    , <code>getAllValues()</code> тАФ     .   ,         ,   . </p><br><h2 id="mock-obekty-kak-znacheniya-poley-i-annotacii-mockito"> Mock-      Mockito </h2><br><p>      ,     mock-   ,      тАФ     <code>@Mock</code>   -       : </p><br><pre> <code class="java hljs">MockitoAnnotations.initMocks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre> <br><p> (  ,       mock',       ) </p><br><p>  spy   <code>@Spy</code> тАФ     <code>@Mock</code> тАж   spy   ,      , ?          ,      тАФ  spy     . </p><br><p>   <code>@Captor</code>    <code>ArgumentCaptor</code> тАФ   , ,    . </p><br><p>   <code>@InjectMocks</code> .       -  Mockito,          .       mock-   ,   .        ,    .  -     ,     <code>null</code> ,   -     .         (      )  dependency injection. </p><br><h2 id="otkat-povedeniya-k-defoltnomu-i-sessii-mockito">       Mockito </h2><br><p>         ,  :   mock (spy, argument captor...),   ,    , .    ,  mock' тАФ    ,    . JUnit           ,      ,    TestNG   тАФ       . , ,   mock'    ,     ,   ,         . .  ,  ,  тАФ  ,          . </p><br><p>   ,             mock-    .  TestNG     <code>@BeforeMethod</code> ( <code>@AfterMethod</code>  ).           mock'   ,        ,           (    JUnit тАФ      <code>@Before</code> ). </p><br><p>   ,     , тАФ   <code>Mockito.reset</code>  <code>Mockito.clearInvocations</code> .   varargs,      mock'.      ,    .     :     (,              )  ,   /   mock'    , тАФ       .     ,    mock'       . .      , ,             . </p><br><p>       (,  ) тАФ     <code>MockitoAnnotations.initMocks(this);</code>  ред    ""  ,   Mockito. </p><br><p>    тАФ     Mockito.    .     mock- ,          ( mock'      ).          ,      <code>MockitoSession</code> ,           .     TestNG: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> DataService dataService; MockitoSession session; <span class="hljs-meta"><span class="hljs-meta">@BeforeMethod</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">beforeMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ session = Mockito.mockitoSession() .initMocks(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .startMocking(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// some code using the dataService field } @AfterMethod public void afterMethod() { session.finishMocking(); }</span></span></code> </pre> <br><p>  ,        тАФ  ,  "" (,     )  ,   . </p><br><h2 id="chto-eschyo">  ? </h2><br><p>      Mockito:  mock  spy-,        .      ,       .  ,  , : </p><br><ul><li>  Mockito   mock-   <code>MockSettings</code> (      тАФ ,   mock'    -  ); </li><li>     mock-,   <code>MockingDetails</code> ; </li><li>   <code>BDDMockito</code>   <code>Mockito</code> ; </li><li>     (    JUnit       Mockito,     ). </li></ul><br><p>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  Mockito</a> .           javadoc'  <code>Mockito</code> . </p><br><p> , ,  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi444982/">https://habr.com/ru/post/hi444982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi444972/index.html">рдЗрдВрдЯреЗрд▓ Gen11 GPU рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдФрд░ рдЗрдВрдЯреЗрд▓ рд╕реЗ рдЕрд╕рддрдд рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХрд╛рд░реНрдб</a></li>
<li><a href="../hi444974/index.html">рдЬрд╛рд╡рд╛ рдореЗрдВ рдХреНрд░рд┐рдкреНрдЯреЛрдЧреНрд░рд╛рдлреАред рдХреНрд▓рд╛рд╕ рдореИрд╕реЗрдЬрдбрд┐рдЬрд╕реНрдЯ</a></li>
<li><a href="../hi444976/index.html">Quester - quests (рдмреАрдЯрд╛) рдмрдирд╛рдиреЗ рдФрд░ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордВрдЪ</a></li>
<li><a href="../hi444978/index.html">рдИрдпреВ рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЛрдВ рдиреЗ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рдпреЛрдВ рдХреЗ рд╡рд┐рдЬреНрдЮрд╛рдкрдиреЛрдВ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Google рдкрд░ 1.7 рдмрд┐рд▓рд┐рдпрди рдбреЙрд▓рд░ рдХрд╛ рдЬреБрд░реНрдорд╛рдирд╛ рд▓рдЧрд╛рдпрд╛</a></li>
<li><a href="../hi444980/index.html">KIB SEARCHINFORM рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдореЗрдВ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рддреНрд░реБрдЯрд┐ рдкрд╛рд░реНрд╕рд┐рдВрдЧ</a></li>
<li><a href="../hi444984/index.html">рдЪреЗрд╣рд░реЗ рдХреА рдкрд╣рдЪрд╛рди рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рддрд╕реНрд╡реАрд░реЗрдВ рдХрд╣рд╛рдБ рд╕реЗ рдЖрддреА рд╣реИрдВ?</a></li>
<li><a href="../hi444986/index.html">IETF ACME рдХреЛ рд╕реНрд╡реАрдХреГрддрд┐ рджреЗрддрд╛ рд╣реИ - рдпрд╣ SSL рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рд╣реИ</a></li>
<li><a href="../hi444992/index.html">рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рддреНрд░реБрдЯрд┐рдпрд╛рдВ: рдЖрдВрдХрдбрд╝реЛрдВ рдореЗрдВ рдЙрдирдХреА рднреВрдорд┐рдХрд╛</a></li>
<li><a href="../hi444994/index.html">рдЖрдзреБрдирд┐рдХ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдбреНрд░рд╛рдЗрд╡ рдФрд░ рдЙрдирдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi444996/index.html">рд░реЗрдбрд┐рд╕ рд╕реНрдЯреНрд░реАрдореНрд╕ рдПрдХ рд╕реНрд╡рдЪреНрдЫ рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд░реВрдк рдореЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>