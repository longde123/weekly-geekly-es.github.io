<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç© ü§∏üèª ü§±üèª El dif√≠cil principio de responsabilidad exclusiva ‚öæÔ∏è ü§∞ üì¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antecedentes 
 En los √∫ltimos a√±os, he participado en una gran cantidad de entrevistas. En cada una de ellas pregunt√© a los solicitantes sobre el prin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El dif√≠cil principio de responsabilidad exclusiva</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449586/"><h1>  Antecedentes </h1><br>  En los √∫ltimos a√±os, he participado en una gran cantidad de entrevistas.  En cada una de ellas pregunt√© a los solicitantes sobre el principio de responsabilidad exclusiva (en adelante, SRP).  Y la mayor√≠a de la gente no sabe nada sobre el principio.  E incluso de aquellos que pod√≠an leer la definici√≥n, casi nadie pod√≠a decir c√≥mo usan este principio en su trabajo.  No pudieron decir c√≥mo SRP afecta el c√≥digo que escriben o la revisi√≥n de c√≥digo de sus colegas.  Algunos de ellos tambi√©n ten√≠an la idea err√≥nea de que SRP, como todo el S√ìLIDO, solo es relevante para la programaci√≥n orientada a objetos.  Adem√°s, a menudo las personas no pod√≠an identificar casos obvios de violaci√≥n de este principio, simplemente porque el c√≥digo fue escrito en el estilo recomendado por el conocido marco. <br>  Redux es un excelente ejemplo de un marco cuya directriz viola SRP. <br><a name="habracut"></a><br><h1>  SRP importa </h1><br>  Quiero comenzar con el valor de este principio, con los beneficios que trae.  Y tambi√©n quiero se√±alar que el principio se aplica no solo a OOP, sino tambi√©n a la programaci√≥n procesal, funcional e incluso declarativa.  HTML, como representante de este √∫ltimo, puede y tambi√©n debe descomponerse, especialmente ahora cuando est√° controlado por marcos de interfaz de usuario como React o Angular.  Adem√°s, el principio se aplica a otras √°reas de ingenier√≠a.  Y no solo en ingenier√≠a, hab√≠a tal expresi√≥n en temas militares: "divide y vencer√°s", que en general es la encarnaci√≥n del mismo principio.  La complejidad mata, div√≠dela en partes y ganar√°s. <br>  Con respecto a otras √°reas de ingenier√≠a, aqu√≠ en el centro, hab√≠a un art√≠culo interesante sobre c√≥mo la aeronave que se estaba desarrollando con motores defectuosos, no cambi√≥ a marcha atr√°s al comando del piloto.  El problema fue que malinterpretaron el estado del chasis.  En lugar de confiar en los sistemas que controlan el chasis, el controlador del motor lee directamente los sensores, interruptores de l√≠mite, etc. ubicados en el chasis.  Tambi√©n se mencion√≥ en el art√≠culo que el motor debe someterse a una larga certificaci√≥n incluso antes de ser puesto en un prototipo de avi√≥n.  Y la violaci√≥n de SRP en este caso condujo claramente al hecho de que al cambiar el dise√±o del chasis, el c√≥digo en el controlador del motor ten√≠a que modificarse y volver a certificarse.  Peor a√∫n, una violaci√≥n de este principio casi vali√≥ la pena el avi√≥n y la vida del piloto.  Afortunadamente, nuestra programaci√≥n diaria no amenaza tales consecuencias, sin embargo, a√∫n no debe descuidar los principios de escribir un buen c√≥digo.  Y aqu√≠ est√° el por qu√©: <br><br><ol><li>  La descomposici√≥n del c√≥digo reduce su complejidad.  Por ejemplo, si resolver un problema requiere que escriba un c√≥digo con una complejidad ciclom√°tica de cuatro, entonces el m√©todo responsable de resolver dos de estos problemas al mismo tiempo requerir√° un c√≥digo con complejidad 16. Si se divide en dos m√©todos, la complejidad total ser√° 8. Por supuesto, esto no siempre es se reduce a la cantidad en contra del trabajo, pero la tendencia ser√° aproximadamente la misma de todos modos. </li><li>  Las pruebas unitarias de c√≥digo descompuesto se simplifican y son m√°s eficientes. </li><li>  El c√≥digo descompuesto crea menos resistencia al cambio.  Al hacer cambios, es menos probable que cometa un error. </li><li>  El c√≥digo se est√° estructurando mejor.  Buscar algo en el c√≥digo dispuesto en archivos y carpetas es mucho m√°s f√°cil que en una gran tela. </li><li>  La separaci√≥n del c√≥digo repetitivo de la l√≥gica empresarial lleva al hecho de que la generaci√≥n de c√≥digo se puede aplicar en un proyecto. </li></ol><br>  Y todos estos signos van juntos, estos son signos del mismo c√≥digo.  No tiene que elegir entre, por ejemplo, c√≥digo bien probado y c√≥digo bien estructurado. <br><br><h1>  Las definiciones existentes no funcionan </h1><br>  Una de las definiciones es: "deber√≠a haber una sola raz√≥n para cambiar el c√≥digo (clase o funci√≥n)".  El problema con esta definici√≥n es que entra en conflicto con el principio Open-Close, el segundo del grupo de principios SOLID.  Su definici√≥n: "el c√≥digo debe estar abierto para la extensi√≥n y cerrado para el cambio".  Una raz√≥n para el cambio versus la prohibici√≥n total del cambio.  Si revelamos con m√°s detalle lo que se quiere decir aqu√≠, resulta que no hay conflicto entre los principios, pero definitivamente hay un conflicto entre las definiciones difusas. <br><br>  La segunda definici√≥n m√°s directa es: "el c√≥digo debe tener una sola responsabilidad".  El problema con esta definici√≥n es que es la naturaleza humana generalizar todo. <br><br>  Por ejemplo, hay una granja que cr√≠a pollos, y en ese momento la granja tiene una sola responsabilidad.  Y entonces se toma la decisi√≥n de criar patos all√≠ tambi√©n.  Instintivamente, llamaremos a esto una granja av√≠cola, en lugar de admitir que ahora hay dos responsabilidades.  Agregue ovejas all√≠, y ahora esta es una granja de mascotas.  Entonces queremos cultivar tomates u hongos all√≠, y encontrar el siguiente nombre a√∫n m√°s generalizado.  Lo mismo se aplica a la "√∫nica raz√≥n" para el cambio.  Esta raz√≥n puede ser tan generalizada como basta la imaginaci√≥n. <br><br>  Otro ejemplo es la clase de administrador de la estaci√≥n espacial.  No hace nada m√°s, solo maneja la estaci√≥n espacial.  ¬øQu√© le parece esta clase con una responsabilidad? <br>  Y, como mencion√© a Redux cuando el solicitante de empleo est√° familiarizado con esta tecnolog√≠a, tambi√©n hago la pregunta: ¬øviola un reductor SRP t√≠pico? <br><br>  El reductor, recuerdo, incluye la declaraci√≥n de cambio, y sucede que crece a decenas o incluso cientos de casos.  Y la responsabilidad exclusiva del reductor es administrar las transiciones de estado de su aplicaci√≥n.  Es decir, literalmente, respondieron algunos solicitantes.  Y ninguna pista podr√≠a mover esta opini√≥n del suelo. <br><br>  En total, si alg√∫n tipo de c√≥digo parece satisfacer el principio SRP, pero al mismo tiempo huele desagradable, sepa por qu√© sucede esto.  Porque la definici√≥n de "c√≥digo debe tener una responsabilidad" simplemente no funciona. <br><br><h1>  Definici√≥n m√°s apropiada </h1><br>  De prueba y error, tuve una mejor definici√≥n: <br>  <b>La responsabilidad del c√≥digo no debe ser demasiado grande</b> <br><br>  S√≠, ahora necesita "medir" la responsabilidad de una clase o funci√≥n.  Y si es demasiado grande, entonces necesita dividir esta gran responsabilidad en varias responsabilidades m√°s peque√±as.  Volviendo al ejemplo de la granja, incluso la responsabilidad de criar pollos puede ser demasiado grande y tiene sentido separar de alguna manera a los pollos de engorde de las gallinas ponedoras, por ejemplo. <br><br>  Pero, ¬øc√≥mo medirlo, c√≥mo determinar que la responsabilidad de este c√≥digo es demasiado grande? <br><br>  Desafortunadamente, no tengo m√©todos matem√°ticamente precisos, solo m√©todos emp√≠ricos.  Y, sobre todo, esto viene con experiencia, los desarrolladores novatos no son capaces de descomponer el c√≥digo, los m√°s avanzados son mejores para poseerlo, aunque no siempre pueden describir por qu√© lo hacen y c√≥mo recae en teor√≠as como SRP. <br><br><ol><li>  Complejidad ciclom√°tica m√©trica.  Desafortunadamente, hay formas de enmascarar esta m√©trica, pero si la recopila, existe la posibilidad de que muestre los lugares m√°s vulnerables en su aplicaci√≥n. </li><li>  El tama√±o de las funciones y clases.  No es necesario leer una funci√≥n de 800 l√≠neas para comprender que algo est√° mal. </li><li>  Muchas importaciones.  Una vez que abr√≠ un archivo en el proyecto de un equipo vecino y vi una pantalla completa de importaciones, presion√© la p√°gina hacia abajo y nuevamente solo hab√≠a importaciones en la pantalla.  Solo despu√©s de la segunda pulsaci√≥n vi el comienzo del c√≥digo.  Puede decir que todos los IDE modernos pueden ocultar las importaciones bajo el "signo m√°s", pero yo digo que un buen c√≥digo no necesita ocultar los "olores".  Adem√°s, necesitaba reutilizar un peque√±o fragmento de c√≥digo y lo elimin√© de este archivo a otro, y una cuarta parte o incluso un tercio de las importaciones se movieron detr√°s de este fragmento.  Este c√≥digo claramente no pertenec√≠a all√≠. </li><li>  Pruebas unitarias.  Si a√∫n tiene dificultades para determinar la cantidad de responsabilidad, obligarse a escribir pruebas.  Si necesita escribir dos docenas de pruebas sobre el prop√≥sito principal de una funci√≥n, sin contar los casos l√≠mite, etc., entonces se necesita descomposici√≥n. </li><li>  Lo mismo se aplica a demasiados pasos preparatorios al comienzo de la prueba y verificaciones al final.  En Internet, por cierto, puede encontrar la declaraci√≥n ut√≥pica de que el llamado  Debe haber solo una afirmaci√≥n en la prueba.  Creo que cualquier idea arbitrariamente buena, elevada a lo absoluto, puede volverse absurdamente poco pr√°ctica. </li><li>  La l√≥gica empresarial no debe depender directamente de herramientas externas.  El controlador Oracle, las rutas Express, es deseable separar todo esto de la l√≥gica empresarial y / u ocultarse detr√°s de las interfaces. </li></ol><br>  Un par de puntos: <br><br>  Por supuesto, como ya mencion√©, la moneda tiene un reverso, y 800 m√©todos en una l√≠nea pueden no ser mejores que un m√©todo en 800 l√≠neas, debe haber un equilibrio en todo. <br><br>  El segundo: no cubro la cuesti√≥n de d√≥nde colocar este o aquel c√≥digo de acuerdo con su responsabilidad.  Por ejemplo, a veces los desarrolladores tambi√©n tienen dificultades para introducir demasiada l√≥gica en la capa DAL. <br><br>  En tercer lugar, no propongo ning√∫n l√≠mite espec√≠fico como "no m√°s de 50 l√≠neas por funci√≥n".  Este enfoque implica solo una direcci√≥n para el desarrollo de desarrolladores, y quiz√°s equipos.  √âl trabaja para m√≠, debe ganar dinero para los dem√°s. <br><br>  Y finalmente, si pasas por TDD, esto solo seguramente te har√° descomponer el c√≥digo mucho antes de que escribas esas 20 pruebas con 20 afirmaciones cada una. <br><br><h1>  Separar la l√≥gica empresarial del c√≥digo repetitivo </h1><br>  Hablando de las reglas del buen c√≥digo, no puedes prescindir de ejemplos.  El primer ejemplo es sobre la separaci√≥n del c√≥digo repetitivo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ae/61f/2a4/4ae61f2a4fba4563cbe17e3cfe6da69a.png"><br><br>  Este ejemplo demuestra c√≥mo se suele escribir el c√≥digo de fondo.  Las personas generalmente escriben l√≥gica inextricablemente con el c√≥digo que indica los par√°metros para el servidor web Express, como URL, m√©todo de solicitud, etc. <br><br>  Marqu√© la l√≥gica de negocios como el marcador verde y el c√≥digo rojo intercalado que interact√∫a con los par√°metros de consulta (rojo). <br><br>  Siempre comparto estas dos responsabilidades de esta manera: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b9/1a2/6a2/4b91a26a2b7d860804f22d72442c9947.png"><br><br>  En este ejemplo, toda interacci√≥n con Express est√° en un archivo separado. <br><br>  A primera vista, puede parecer que el segundo ejemplo no trajo mejoras, hab√≠a 2 archivos en lugar de uno, aparecieron l√≠neas adicionales, que no hab√≠an existido antes: el nombre de la clase y la firma del m√©todo.  ¬øY entonces qu√© da esta separaci√≥n de c√≥digo?  En primer lugar, el "punto de entrada de la aplicaci√≥n" ya no es Express.  Ahora esta es una funci√≥n de mecanograf√≠a regular.  O una funci√≥n de JavaScript, ya sea C #, que escribe WebAPI sobre qu√©. <br><br>  Esto, a su vez, le permite realizar varias acciones que no est√°n disponibles en el primer ejemplo.  Por ejemplo, puede escribir pruebas de comportamiento sin tener que aumentar Express, sin usar solicitudes http dentro de la prueba.  E incluso no hay necesidad de humedecerlo, reemplace el objeto Router con su objeto de "prueba", ahora el c√≥digo de la aplicaci√≥n se puede llamar directamente desde la prueba. <br><br>  Otra caracter√≠stica interesante proporcionada por esta descomposici√≥n es que ahora puede escribir un generador de c√≥digo que analizar√° userApiService y generar√° un c√≥digo que conecta este servicio con Express.  En mis futuras publicaciones, planeo indicar lo siguiente: la generaci√≥n de c√≥digo no ahorrar√° tiempo en el proceso de escribir c√≥digo.  Los costos del generador de c√≥digo no pagar√°n por el hecho de que ahora no es necesario copiar esta plantilla.  La generaci√≥n de c√≥digo dar√° sus frutos por el hecho de que el c√≥digo que produce no necesita soporte, lo que ahorrar√° tiempo y, lo m√°s importante, los nervios de los desarrolladores a largo plazo. <br><br><h1>  Divide y vencer√°s </h1><br>  Este m√©todo de escribir c√≥digo ha existido durante mucho tiempo, no lo invent√© yo mismo.  Acabo de llegar a la conclusi√≥n de que es muy conveniente al escribir l√≥gica de negocios.  Y para esto, se me ocurri√≥ otro ejemplo ficticio, que muestra c√≥mo puedes escribir r√°pida y f√°cilmente un c√≥digo que se descompone inmediatamente y tambi√©n se documenta por medio de m√©todos de nomenclatura. <br><br>  Supongamos que recibe una tarea de un analista de negocios para hacer un m√©todo que env√≠e un informe de empleado a una compa√±√≠a de seguros.  Para hacer esto: <br><br><ol><li>  Los datos deben tomarse de la base de datos. </li><li>  Convertir al formato deseado </li><li>  Enviar el informe resultante </li></ol><br>  Dichos requisitos no siempre se escriben expl√≠citamente, a veces dicha secuencia puede estar impl√≠cita o aclarada a partir de una conversaci√≥n con el analista.  En el proceso de implementaci√≥n del m√©todo, no se apresure a abrir conexiones a la base de datos o la red, en lugar de eso intente traducir este algoritmo simple al c√≥digo "tal cual".  Algo como esto: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> networkService.sendReport(formatted);‚Äã }</code> </pre> <br>  Con este enfoque, resulta ser un c√≥digo bastante simple, f√°cil de leer y probar, aunque creo que este c√≥digo es trivial y no necesita prueba.  Y era la responsabilidad de este m√©todo no enviar un informe, su responsabilidad era dividir esta tarea compleja en tres subtareas. <br><br>  Luego, volvemos a los requisitos y descubrimos que el informe debe consistir en una secci√≥n de salario y una secci√≥n con horas trabajadas. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportData</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> salarySection = prepareSalarySection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workHoursSection = prepareWorkHoursSection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { salarySection, workHoursSection };‚Äã }</code> </pre><br>  Y as√≠ sucesivamente, continuamos dividiendo la tarea hasta la implementaci√≥n de peque√±os m√©todos que est√°n cerca de lo trivial. <br><br><h1>  Interacci√≥n con el principio de abrir y cerrar </h1><br>  Al comienzo del art√≠culo dije que las definiciones de los principios de SRP y Open-Close se contradicen entre s√≠.  El primero dice que debe haber una raz√≥n para el cambio, el segundo dice que el c√≥digo debe estar cerrado para el cambio.  Y los principios en s√≠ mismos, no solo no se contradicen entre s√≠, sino que funcionan en sinergia entre s√≠.  Los 5 principios S√ìLIDOS est√°n dirigidos a un buen objetivo: decirle al desarrollador qu√© c√≥digo es "malo" y c√≥mo cambiarlo para que se vuelva "bueno".  La iron√≠a: acabo de reemplazar 5 responsabilidades con una responsabilidad m√°s. <br>  Entonces, adem√°s del ejemplo anterior con el env√≠o del informe a la compa√±√≠a de seguros, imagine que un analista de negocios se nos acerca y dice que ahora necesitamos agregar una segunda funcionalidad al proyecto.  Se debe imprimir el mismo informe. <br>  Imagine que hay un desarrollador que cree que SRP "no se trata de descomposici√≥n". <br>  En consecuencia, este principio no le indic√≥ la necesidad de descomposici√≥n, y se dio cuenta de la primera tarea completa en una funci√≥n.  Despu√©s de que le lleg√≥ la tarea, combina las dos responsabilidades en una sola, porque  tienen mucho en com√∫n y generaliza su nombre.  Ahora esta responsabilidad se llama "informe de servicio".  La implementaci√≥n de esto se parece a esto: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serveEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId, serveMethod</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* lots of code to read and convert the report */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(serveMethod) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> sendToProvider: <span class="hljs-comment"><span class="hljs-comment">/* implementation of sending */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> print: <span class="hljs-comment"><span class="hljs-comment">/* implementation of printing */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; } }</code> </pre><br>  ¬øRecuerda alg√∫n c√≥digo en su proyecto?  Como dije, ambas definiciones directas de SRP no funcionan.  No transmiten informaci√≥n al desarrollador de que dicho c√≥digo no se puede escribir.  Y qu√© c√≥digo se puede escribir.  Todav√≠a hab√≠a una sola raz√≥n para que el desarrollador cambiara este c√≥digo.  Simplemente volvi√≥ a llamar a la raz√≥n anterior, agreg√≥ el interruptor y est√° tranquilo.  Y aqu√≠ entra en escena el principio del principio Abrir-Cerrar, que dice directamente que era imposible modificar un archivo existente.  Era necesario escribir c√≥digo para que al agregar una nueva funcionalidad fuera necesario agregar un nuevo archivo y no editar uno existente.  Es decir, dicho c√≥digo es malo desde el punto de vista de dos principios a la vez.  Y si el primero no ayud√≥ a verlo, el segundo deber√≠a ayudar. <br><br>  ¬øY c√≥mo el m√©todo divide y vencer√°s resuelve el mismo problema? <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> printService.printReport(formatted);‚Äã }</code> </pre><br>  A√±adir una nueva funci√≥n.  A veces los llamo una "funci√≥n de script" porque no llevan implementaciones, determinan la secuencia de llamar a piezas descompuestas de nuestra responsabilidad.  Obviamente, las dos primeras l√≠neas, las dos primeras responsabilidades descompuestas coinciden con las dos primeras l√≠neas de la funci√≥n implementada previamente.  Al igual que los dos primeros pasos de dos tareas descritas por un analista de negocios coinciden. <br>  Por lo tanto, para agregar una nueva funcionalidad al proyecto, agregamos un nuevo m√©todo de script y un nuevo servicio de impresi√≥n.  Los archivos antiguos no fueron cambiados.  Es decir, este m√©todo de escribir c√≥digo es bueno desde el punto de vista de dos principios.  Y SRP y Open-Close <br><br><h1>  Alternativa </h1><br>  Tambi√©n quer√≠a mencionar una forma alternativa y competitiva de obtener un c√≥digo bien descompuesto que se parece a esto: primero escribimos el c√≥digo "en la frente", luego lo refactorizamos usando varias t√©cnicas, por ejemplo, de acuerdo con el libro "Refactorizaci√≥n" de Fowler.  Estos m√©todos me recordaron el enfoque matem√°tico del juego de ajedrez, donde no entiendes exactamente lo que est√°s haciendo en t√©rminos de estrategia, solo calculas el "peso" de tu posici√≥n y tratas de maximizarlo haciendo movimientos.  No me gust√≥ este enfoque por una peque√±a raz√≥n: nombrar m√©todos y variables ya es dif√≠cil, y cuando no tienen un valor comercial, se vuelve imposible.  Por ejemplo, si estas t√©cnicas sugieren que necesita seleccionar 6 l√≠neas id√©nticas de aqu√≠ y de all√°, y luego resaltarlas, ¬øc√≥mo deber√≠a llamar a este m√©todo?  someSixIdenticalLines ()? <br>  Quiero hacer una reserva, no creo que este m√©todo sea malo, simplemente no pude aprender c√≥mo usarlo. <br><br><h1>  Total </h1><br>  Al seguir el principio, puede encontrar beneficios. <br><br>  La definici√≥n de "debe haber una responsabilidad" no funciona. <br><br>  Hay una mejor definici√≥n y una serie de caracter√≠sticas indirectas, las llamadas  los olores de c√≥digo indican la necesidad de descomponerse. <br><br>  El enfoque de "divide y vencer√°s" te permite escribir inmediatamente un c√≥digo bien estructurado y autodocumentado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449586/">https://habr.com/ru/post/449586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449572/index.html">Sobre licitaciones, compras de licitaci√≥n y la formaci√≥n de una tarea de licitaci√≥n</a></li>
<li><a href="../449574/index.html">Funciones √∫tiles de SpecFlow</a></li>
<li><a href="../449576/index.html">Software para gestionar un brazo robot, detectando autom√°ticamente su configuraci√≥n</a></li>
<li><a href="../449578/index.html">La ilusi√≥n del dise√±o inteligente.</a></li>
<li><a href="../449584/index.html">Switches industriales no administrados Advantech EKI-2000</a></li>
<li><a href="../449588/index.html">¬øCu√°l es la fortaleza y la debilidad del mercado de hosting?</a></li>
<li><a href="../449590/index.html">La capitalizaci√≥n de mercado de Microsoft super√≥ los $ 1 bill√≥n 25/04/2019</a></li>
<li><a href="../449596/index.html">Juego SFML simple</a></li>
<li><a href="../449600/index.html">"Hogar inteligente" con Yandex.Alisa</a></li>
<li><a href="../449602/index.html">Inspirado en la producci√≥n y el baloncesto: c√≥mo Yandex prepara un campeonato de programaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>