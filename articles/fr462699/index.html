<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßòüèΩ üõê ü§±üèº Maillage de service, ¬´Plan de donn√©es¬ª et ¬´Plan de contr√¥le¬ª (Plan de donn√©es de maillage de service par rapport au plan de contr√¥le) üÜî ü§≥üèæ üåô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous pr√©sente la traduction de l'article "Service mesh data plane vs control plane" par Matt Klein . 



 Cette fois, j'ai voulu et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maillage de service, ¬´Plan de donn√©es¬ª et ¬´Plan de contr√¥le¬ª (Plan de donn√©es de maillage de service par rapport au plan de contr√¥le)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462699/">  Bonjour, Habr!  Je vous pr√©sente la traduction de l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Service mesh data plane vs control plane"</a> par <b>Matt Klein</b> . <br><br><img src="https://habrastorage.org/webt/oa/ar/bu/oaarbu82bai5hzqqe0l2f-qeupg.png"><br><br>  Cette fois, j'ai voulu et traduit la description des deux composants du maillage de service, le plan de donn√©es et le plan de contr√¥le.  Cette description m'a sembl√© la plus compr√©hensible et la plus int√©ressante, et surtout menant √† la compr√©hension de "Est-ce m√™me n√©cessaire?" <br><br>  Comme l'id√©e d'un ¬´maillage de service¬ª est devenue de plus en plus populaire au cours des deux derni√®res ann√©es (article original 10 octobre 2017) et que le nombre de participants dans l'espace a augment√©, j'ai constat√© une augmentation proportionnelle de la confusion parmi toute la communaut√© technique concernant la fa√ßon de comparer et opposer diff√©rentes solutions. <br><a name="habracut"></a><br>  La situation est mieux d√©crite dans la s√©rie de tweets suivante que j'ai √©crite en juillet: <br><blockquote>  Confusion avec le maillage de service (maillage de service) n ¬∞ 1: Linkerd ~ = Nginx ~ = Haproxy ~ = Envoy.  Aucun d'eux n'est √©gal √† Istio.  Istio est quelque chose de compl√®tement diff√©rent.  1 / </blockquote><blockquote>  Les premiers ne sont que des avions de donn√©es.  Ils ne font rien.  Ils doivent √™tre r√©gl√©s pour quelque chose de plus.  2 / </blockquote><blockquote>  Istio est un exemple de plan de contr√¥le qui relie des pi√®ces entre elles.  Il s'agit d'un calque diff√©rent.  / fin </blockquote>  Les tweets pr√©c√©dents mentionnaient plusieurs projets diff√©rents (Linkerd, NGINX, HAProxy, Envoy et Istio), mais, plus important encore, pr√©sentaient les concepts g√©n√©raux d'un plan de donn√©es, d'un maillage de service et d'un plan de contr√¥le.  Dans ce billet, je prendrai un peu de recul et dirai ce que j'entends par les termes ¬´plan de donn√©es¬ª et ¬´plan de contr√¥le¬ª √† un niveau tr√®s √©lev√©, puis je dirai comment les termes se rapportent aux projets mentionn√©s dans les tweets. <br><br><h1>  Qu'est-ce qu'un maillage de service (vraiment)? </h1><br><img src="https://habrastorage.org/webt/3q/gw/dd/3qgwdd_ljaphirr4nlb9bdcghmc.png"><br>  <b>Figure 1: Pr√©sentation du maillage de service</b> <br><br>  <b>La figure 1</b> illustre le concept d'un maillage de service au niveau le plus √©l√©mentaire.  Il existe quatre clusters de services (AD).  Chaque instance de service est associ√©e √† un serveur proxy local.  Tout le trafic r√©seau (HTTP, REST, gRPC, Redis, etc.) provenant d'une seule instance d'application est transmis via un serveur proxy local aux clusters de services externes correspondants.  Ainsi, l'instance d'application ne conna√Æt pas le r√©seau dans son ensemble et ne conna√Æt que son proxy local.  En fait, le r√©seau du syst√®me distribu√© √©tait √©loign√© du service. <br><br><h1>  Plan de donn√©es </h1><br>  Dans un maillage de service, un serveur proxy situ√© localement pour l'application effectue les t√¢ches suivantes: <br><br><ul><li>  <b>D√©couverte de service</b>  Quels services / services / applications sont disponibles pour votre application? </li><li>  <b>Contr√¥le de sant√©</b>  Les instances de service retourn√©es par la d√©couverte de service sont-elles op√©rationnelles et pr√™tes √† accepter le trafic r√©seau?  Cela peut inclure des contr√¥les d'int√©grit√© actifs (par exemple, v√©rification de la r√©ponse / healthcheck) et passifs (par exemple, en utilisant 3 erreurs 5xx cons√©cutives comme indication de l'√©tat malsain du service). </li><li>  <b>Acheminement</b>  Apr√®s avoir re√ßu une demande √† "/ foo" du service REST, vers quel cluster de services la demande doit-elle √™tre envoy√©e? </li><li>  <b>√âquilibrage de charge</b>  Une fois qu'un cluster de services a √©t√© s√©lectionn√© pendant le routage, vers quelle instance du service la demande doit-elle √™tre envoy√©e?  Quel d√©lai?  Quels param√®tres de coupure de circuit?  Si la demande √©choue, doit-elle √™tre r√©p√©t√©e? </li><li>  <b>Authentification et autorisation</b>  Pour les demandes entrantes, le service appelant peut-il √™tre cryptographiquement reconnu / autoris√© √† l'aide de mTLS ou d'un autre m√©canisme?  S'il est identifi√© / autoris√©, est-il autoris√© √† appeler l'op√©ration demand√©e (point d'extr√©mit√©) dans le service ou doit-on renvoyer une r√©ponse non authentifi√©e? </li><li>  <b>Observabilit√©</b>  Pour chaque demande, des statistiques d√©taill√©es, des journaux / journaux et des donn√©es de trace distribu√©es doivent √™tre g√©n√©r√©es afin que les op√©rateurs puissent comprendre le flux de trafic distribu√© et les probl√®mes de d√©bogage √† mesure qu'ils surviennent. </li></ul><br>  Pour tous les points pr√©c√©dents du r√©seau de service (maillage de service), le plan de donn√©es est responsable.  En fait, le proxy local au service (side-car) est un plan de donn√©es.  En d'autres termes, le plan de donn√©es est responsable de la diffusion, de la transmission et de la surveillance conditionnelles de chaque paquet de r√©seau envoy√© au service ou envoy√© √† partir de celui-ci. <br><br><h1>  L'avion de contr√¥le </h1><br>  L'abstraction du r√©seau fournie par le proxy local dans le plan de donn√©es est magique (?).  Cependant, comment le proxy conna√Æt-il r√©ellement la route "/ foo" vers le service B?  Comment utiliser les donn√©es de d√©couverte de service remplies de demandes de proxy?  Comment les param√®tres d'√©quilibrage de charge, de temporisation, de coupure de circuit, etc. sont-ils configur√©s?  Comment d√©ployer l'application en utilisant la m√©thode bleu / vert (bleu / vert) ou la m√©thode de transfert progressif du trafic?  Qui configure les param√®tres d'authentification et d'autorisation √† l'√©chelle du syst√®me? <br><br>  Tous les √©l√©ments ci-dessus sont g√©r√©s par le plan de contr√¥le du maillage de service.  <i>Le plan de contr√¥le accepte un ensemble de serveurs proxy isol√©s sans √©tat et les transforme en un syst√®me distribu√©</i> . <br><br>  Je pense que la raison pour laquelle de nombreux technologues trouvent confus les concepts s√©par√©s du plan de donn√©es et du plan de contr√¥le est que, pour la plupart des gens, le plan de donn√©es est familier, tandis que le plan de contr√¥le est √©tranger / incompr√©hensible.  Nous travaillons depuis longtemps avec des routeurs et des commutateurs r√©seau physiques.  Nous comprenons que les packages / demandes doivent aller du point A au point B, et que nous pouvons utiliser du mat√©riel et des logiciels pour cela.  La nouvelle g√©n√©ration de proxys logiciels est tout simplement les versions tendances des outils que nous utilisons depuis longtemps. <br><br><img src="https://habrastorage.org/webt/ty/xa/re/tyxareqql4_ndfv1unsjrh0fx78.png"><br>  <b>Figure 2: Plan de contr√¥le humain</b> <br><br>  Cependant, nous utilisons depuis longtemps le plan de contr√¥le, bien que la plupart des op√©rateurs de r√©seaux n'associent cette partie du syst√®me √† aucun composant technologique.  La raison en est simple: <br>  <b>La plupart des avions de contr√¥le utilis√©s aujourd'hui sont ... nous</b> . <br><br>  <b>La figure 2</b> montre ce que j'appelle le ¬´plan de contr√¥le humain¬ª.  Dans ce type de d√©ploiement, qui est encore tr√®s courant, l'op√©rateur humain, probablement grincheux, cr√©e des configurations statiques - potentiellement √† l'aide de scripts - et les d√©ploie √† l'aide d'une sorte de processus sp√©cial sur tous les proxys.  Ensuite, les proxys commencent √† utiliser cette configuration et commencent √† traiter le plan de donn√©es √† l'aide des param√®tres mis √† jour. <br><br><img src="https://habrastorage.org/webt/nm/tj/dt/nmtjdtcwt4e22o_ow0gjns7sv9c.png"><br>  <b>Figure 3: Plan de contr√¥le de maillage de service avanc√©</b> <br><br>  <b>La figure 3</b> montre le plan de contr√¥le ¬´√©tendu¬ª du maillage de service.  Il se compose des parties suivantes: <br><br><ul><li>  <b>L'Humain</b> : Il y a encore une personne (esp√©rons-le moins en col√®re) qui prend des d√©cisions de haut niveau concernant l'ensemble du syst√®me. </li><li>  <b>Contr√¥le de l'interface utilisateur du plan</b> : une personne interagit avec un certain type d'interface utilisateur pour contr√¥ler le syst√®me.  Il peut s'agir d'un portail Web, d'une application de ligne de commande (CLI) ou d'une autre interface.  √Ä l'aide de l'interface utilisateur, l'op√©rateur a acc√®s √† des param√®tres de configuration globale du syst√®me tels que: <br><ul><li>  Gestion du d√©ploiement, bleu / vert et / ou avec transfert progressif du trafic </li><li>  Param√®tres d'authentification et d'autorisation </li><li>  Sp√©cifications de la table de routage, par exemple, lorsque l'application A demande des informations sur "/ foo", que se passe-t-il </li><li>  Param√®tres d'√©quilibrage de charge, tels que les d√©lais d'attente, les tentatives, les param√®tres de coupure de circuit, etc. </li></ul></li><li>  <b>Planificateur de charge de travail</b> : les services sont lanc√©s dans l'infrastructure via un certain type de syst√®me de planification / orchestration, tel que Kubernetes ou Nomad.  L'ordonnanceur est responsable du chargement du service avec son serveur proxy local. </li><li>  <b>D√©couverte de service</b>  Lorsque le planificateur d√©marre et arr√™te les instances de service, il signale l'√©tat d'int√©grit√© au syst√®me de d√©couverte de service. </li><li>  <b>API de configuration de proxy Sidecar</b> : les proxys locaux extraient dynamiquement l'√©tat de divers composants du syst√®me selon le mod√®le ¬´finalement coh√©rent¬ª sans intervention de l'op√©rateur.  L'ensemble du syst√®me, compos√© de toutes les instances de services en cours d'ex√©cution et des serveurs proxy locaux, converge finalement en un seul √©cosyst√®me.  L'API du plan de donn√©es Envoy est un exemple de la fa√ßon dont cela fonctionne dans la pratique. </li></ul><br>  Essentiellement, l'objectif du plan de contr√¥le est d'√©tablir une politique qui sera finalement adopt√©e par le plan de donn√©es.  Des avions de contr√¥le plus avanc√©s retireront plus de parties de certains syst√®mes de l'op√©rateur et n√©cessiteront moins de contr√¥le manuel, √† condition qu'ils fonctionnent correctement! .. <br><br><h1>  Plan de donn√©es et plan de contr√¥le.  R√©sum√© du plan de donn√©es et du plan de contr√¥le </h1><br><ul><li>  <b>Plan de donn√©es de maillage de service</b> : affecte chaque paquet / demande dans le syst√®me.  Responsable de la d√©couverte des applications / services, des contr√¥les d'int√©grit√©, du routage, de l'√©quilibrage de charge, de l'authentification / autorisation et de l'observabilit√©. </li><li>  <b>Plan de contr√¥le du maillage de service</b> : fournit une politique et une configuration pour tous les plans de donn√©es de travail au sein du r√©seau de service.  Ne touche aucun paquet / demande dans le syst√®me.  Le plan de contr√¥le transforme tous les plans de donn√©es en un syst√®me distribu√©. </li></ul><br><h1>  Paysage actuel du projet </h1><br>  Apr√®s avoir compris l'explication ci-dessus, regardons l'√©tat actuel du projet ¬´service mesh¬ª. <br><br><ul><li>  Avions de <b>donn√©es</b> : Linkerd, NGINX, HAProxy, Envoy, Traefik </li><li>  Avions de <b>contr√¥le</b> : Istio, Nelson, SmartStack </li></ul><br>  Au lieu de proc√©der √† une analyse approfondie de chacune des solutions ci-dessus, je m'attarderai bri√®vement sur certains points qui, √† mon avis, causent actuellement la plus grande confusion dans l'√©cosyst√®me. <br><br>  Au d√©but de 2016, Linkerd a √©t√© l'un des premiers serveurs proxy pour le plan de donn√©es pour le maillage de service et a fait un travail fantastique de sensibilisation et d'attention au mod√®le de conception de maillage de service.  Environ 6 mois apr√®s cela, Envoy a rejoint Linkerd (bien qu'il soit avec Lyft depuis la fin de 2015).  Linkerd et Envoy sont deux des projets les plus souvent mentionn√©s lors des discussions sur les r√©seaux de services. <br><br>  Istio a √©t√© annonc√© en mai 2017.  Les objectifs du projet Istio sont tr√®s similaires au plan de contr√¥le √©tendu illustr√© √† la <b>figure 3</b> .  Envoy for Istio est le serveur proxy par d√©faut.  Ainsi, Istio est le plan de contr√¥le et Envoy est le plan de donn√©es.  En peu de temps, Istio a caus√© beaucoup d'agitation et d'autres avions de donn√©es ont commenc√© √† s'int√©grer en remplacement d'Envoy (Linkerd et NGINX ont tous deux d√©montr√© leur int√©gration avec Istio).  Le fait que vous puissiez utiliser diff√©rents plans de donn√©es dans le m√™me plan de contr√¥le signifie que le plan de contr√¥le et le plan de donn√©es ne sont pas n√©cessairement √©troitement li√©s.  Une API telle que l'API du plan de donn√©es universel Envoy peut former un pont entre deux parties du syst√®me. <br><br>  Nelson et SmartStack aident √† illustrer davantage la s√©paration du plan de contr√¥le et du plan de donn√©es.  Nelson utilise Envoy comme proxy et construit un plan de contr√¥le fiable du maillage de service bas√© sur la pile HashiCorp, c'est-√†-dire  Nomade etc.  SmartStack est peut-√™tre le premier d'une nouvelle vague de r√©seaux de services.  SmartStack forme un plan de contr√¥le autour d'un HAProxy ou NGINX, d√©montrant la possibilit√© de d√©coupler un plan de contr√¥le d'un maillage de service et d'un plan de donn√©es. <br><br>  Une architecture de microservices avec un maillage de service attire plus l'attention (√† droite!), Et de plus en plus de projets et de fournisseurs commencent √† travailler dans cette direction.  Au cours des prochaines ann√©es, nous verrons de nombreuses innovations √† la fois dans le plan de donn√©es et le plan de contr√¥le, ainsi que le m√©lange des divers composants.  √Ä terme, l'architecture de microservice devrait devenir plus transparente et magique (?) Pour l'op√©rateur. <br>  J'esp√®re de moins en moins ennuy√©. <br><br><h1>  Points cl√©s (points cl√©s √† retenir) </h1><br><ul><li>  Un maillage de service (maillage de service) se compose de deux parties diff√©rentes: un plan de donn√©es et un plan de contr√¥le.  Les deux composants sont requis et sans eux, le syst√®me ne fonctionnera pas. </li><li>  Tout le monde conna√Æt le plan de contr√¥le, et maintenant vous pouvez √™tre le plan de contr√¥le! </li><li>  Tous les avions de donn√©es se font concurrence en termes de fonctions, de performances, de configurabilit√© et d'extensibilit√©. </li><li>  Tous les avions de contr√¥le rivalisent de fonction, de configurabilit√©, d'extensibilit√© et de convivialit√©. </li><li>  Un seul plan de contr√¥le peut contenir les abstractions et les API correctes afin que plusieurs plans de donn√©es puissent √™tre utilis√©s. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462699/">https://habr.com/ru/post/fr462699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462689/index.html">DISKOBALL: comp√©titions de lancer de disques durs, 23 ao√ªt, Moscou</a></li>
<li><a href="../fr462691/index.html">Comment migrer d'AD vers LDAP lors de l'utilisation de Zimbra</a></li>
<li><a href="../fr462693/index.html">En route vers des applications durables avec le g√©n√©rateur de site statique PSKOV comme exemple</a></li>
<li><a href="../fr462695/index.html">Mat√©riel en tant que composants Web</a></li>
<li><a href="../fr462697/index.html">uWSGI pour aider les m√©triques. Rapport Yandex</a></li>
<li><a href="../fr462701/index.html">Biblioth√®que de g√©n√©rateur de code assembleur pour microcontr√¥leurs AVR. 2e partie</a></li>
<li><a href="../fr462703/index.html">Le tourniquet ¬´le moins cher¬ª de Russie contr√¥l√© depuis un smartphone</a></li>
<li><a href="../fr462705/index.html">Top 5 des bugs dans mes applications ReactJS</a></li>
<li><a href="../fr462707/index.html">Kubernetes lance les outils de d√©veloppement d'applications</a></li>
<li><a href="../fr462709/index.html">Test de mutation en PHP: une mesure qualitative pour la couverture du code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>