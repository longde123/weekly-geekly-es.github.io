<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛫 👩🏽‍🤝‍👨🏼 🛍️ Inisialisasi malas di Boot Musim Semi 2.2 🤴🏽 🙈 📁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dari seorang penerjemah: karena Kerangka Pegas adalah salah satu kerangka utama tempat kami membangun CUBA , berita tentang fitur Pegas baru tidak ter...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inisialisasi malas di Boot Musim Semi 2.2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/445592/"><p><img src="https://habrastorage.org/webt/k4/wp/kw/k4wpkwqnpuvxqqd3xyidbxkmgvo.png"></p><br><p>  <em>Dari seorang penerjemah: karena Kerangka Pegas adalah salah satu kerangka utama tempat kami membangun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CUBA</a> , berita tentang fitur Pegas baru tidak terlewatkan oleh kami.</em>  <em>Inisialisasi malas adalah salah satu cara untuk mengurangi waktu boot pertama dari aplikasi, yang di zaman kita sekarang ini penggunaan microservices adalah metrik penting.</em>  <em>Bagi mereka yang lebih suka membaca menonton video, ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">presentasi</a> 10 menit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">oleh</a> Josh Long pada topik artikel.</em> </p><br><p>  Rilis pertama yang baru-baru ini diumumkan untuk Spring Boot 2.2 menambahkan dukungan untuk inisialisasi malas.  Pada artikel ini, kita akan melihat fungsionalitas baru dan menjelaskan cara mengaktifkannya. </p><a name="habracut"></a><br><h2 id="chto-eto-znachit---byt-lenivym">  Apa artinya malas? </h2><br><p>  Kerangka Kerja Spring telah mendukung inisialisasi malas sejak kode sumbernya dipindahkan ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">git</a> sebelas tahun yang lalu.  Secara default, ketika konteks aplikasi diperbarui, setiap kacang dibuat kembali dan dependensinya diimplementasikan.  Sebaliknya, jika kacang dikonfigurasi untuk inisialisasi malas, itu tidak akan dibuat dan ketergantungannya tidak akan diletakkan sampai ini diperlukan. </p><br><h2 id="vklyuchenie-lenivoy-inicializacii">  Mengaktifkan inisialisasi malas </h2><br><p> Dalam versi apa pun dari Spring Boot, dimungkinkan untuk mengaktifkan inisialisasi malas, jika Anda tidak keberatan mengotori tangan Anda dengan <code>BeanFactoryPostProcessor</code> .  Spring Boot 2.2 hanya menyederhanakan proses ini dengan memperkenalkan properti baru - <code>spring.main.lazy-initialization</code> (ada juga metode setara di <code>SpringApplication</code> dan <code>SpringApplicationBuilder</code> ).  Ketika properti ini disetel ke <code>true</code> , kacang aplikasi akan dikonfigurasikan untuk menggunakan inisialisasi malas. </p><br><h2 id="preimuschestva-lenivoy-inicializacii">  Manfaat inisialisasi malas </h2><br><p>  Inisialisasi malas dapat secara signifikan mengurangi waktu mulai aplikasi Anda, karena pada tahap ini lebih sedikit kelas yang dimuat dan lebih sedikit tempat sampah dibuat.  Misalnya, aplikasi web kecil yang menggunakan Actuator dan Spring Security biasanya dimulai 2,5 detik.  Dan dengan inisialisasi malas, proses ini membutuhkan waktu 2 detik.  Nilai percepatan yang tepat akan bervariasi dari aplikasi ke aplikasi, tergantung pada struktur grafik dependensi dari bin. </p><br><p>  <em>Catatan Penerjemah: Saya menjalankan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh</a> ini, menulis Spring Boot 2.2 dalam dependensi, dan waktu mulai dengan inisialisasi malas adalah 3 detik, dan tanpanya 4. Saya berpikir bahwa pada aplikasi yang lebih serius, keuntungan signifikan pada waktu mulai karena penggunaan inisialisasi malas kita tidak akan melihat.</em>  <em><u>Pembaruan:</u> atas saran dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">alek_sys</a> menonaktifkan validasi dan pembaruan skema database dan menyalakan inisialisasi JPA malas untuk kedua kasus - ternyata 2,7 dan 3,7 detik sebelum pesan <code>Started WebApplication in...</code></em> </p><br><h2 id="a-chto-tam-naschet-devtools">  Bagaimana dengan DevTools? </h2><br><p>  Spring Boot DevTools memberikan akselerasi pengembangan yang signifikan.  Alih-alih memulai ulang JVM dan aplikasi setiap kali Anda mengubah sesuatu, DevTools melakukan "hot restart" aplikasi di JVM yang sama.  Keuntungan signifikan dari restart seperti itu adalah memberikan JIT kesempatan untuk mengoptimalkan kode yang dijalankan ketika aplikasi dimulai.  Setelah beberapa restart, waktu awal 2,5 detik berkurang hampir 80% menjadi 500 ms.  Dengan inisialisasi malas, segalanya menjadi lebih baik.  Pengaturan properti <code>spring.main.lazy-initialization</code> menunjukkan waktu restart langsung di IDE sama dengan 400 ms. </p><br><h2 id="obratnaya-storona-lenivoy-inicializacii">  Sisi lain inisialisasi malas </h2><br><p>  Seperti yang ditunjukkan di atas, dimasukkannya inisialisasi malas dapat secara serius mengurangi waktu peluncuran aplikasi.  Dan mungkin Anda akan memiliki keinginan yang tak tertahankan untuk menggunakan ini terus-menerus, atau setidaknya Anda akan bertanya-tanya mengapa inisialisasi malas tidak diaktifkan secara default.  Ada beberapa kemungkinan efek negatif yang sebaiknya diklarifikasi segera. </p><br><p>  Fakta bahwa kelas tidak dimuat dan sampah tidak dibuat sampai mereka diperlukan dapat menutupi masalah yang bisa diidentifikasi sebelumnya pada tahap peluncuran aplikasi.  Misalnya, mungkin karena kurangnya kelas yang diperlukan, memori yang berlebihan atau kesalahan yang terkait dengan konfigurasi yang salah. </p><br><p>  Dalam aplikasi web, konfigurasi malas dapat meningkatkan latensi permintaan HTTP yang menyebabkan inisialisasi bin.  Ini biasanya permintaan pertama, tetapi mungkin ada efek tambahan yang tidak diinginkan yang mempengaruhi keseimbangan beban atau penskalaan otomatis. </p><br><h2 id="eta-shtuka-vklyuchena">  Apakah ini termasuk? </h2><br><p>  Jika Anda tidak yakin seberapa tepatnya inisialisasi malas mempengaruhi aplikasi Anda atau jika Anda ingin memeriksa bahwa aspek-aspek lain dari kerangka kerja tersebut cocok untuk Anda dan melakukan apa yang Anda butuhkan, maka akan berguna bagi Anda untuk menggunakan debugger untuk ini.  Dengan menetapkan breakpoint pada konstruktor nampan, Anda dapat melihat pada saat yang tepat saat nampan diinisialisasi.  Misalnya, dalam aplikasi web yang ditulis dalam Spring Boot dan dengan inisialisasi malas diaktifkan, Anda dapat melihat bahwa <code>@Controller</code> ditandai dengan penjelasan <code>@Controller</code> tidak dibuat hingga permintaan pertama untuk <code>DispatcerServlet</code> Spring MVC atau ke <code>DispatchHandler</code> Spring WebFlux. </p><br><h2 id="kogda-vklyuchat-lenivuyu-inicializaciyu">  Kapan mengaktifkan inisialisasi malas? </h2><br><p>  Seperti yang kita lihat di atas, inisialisasi malas menawarkan peningkatan penting selama peluncuran aplikasi, tetapi ada juga kerugian, jadi Anda perlu menggunakan fitur ini dengan sangat hati-hati. </p><br><p>  Satu area di mana inisialisasi malas dapat membayar dividen (dengan hampir tidak ada overhead) adalah proses pengembangan aplikasi.  Saat Anda menulis aplikasi, pengurangan waktu restart yang disediakan oleh inisialisasi malas bersama dengan DevTools dapat menghemat banyak waktu Anda. </p><br><p>  Di mana lagi Anda bisa mendapatkan manfaat menggunakan inisialisasi malas - ini dalam tes integrasi.  Anda mungkin sudah menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tes "slicing"</a> untuk mengurangi waktu eksekusi dengan membatasi jumlah kacang yang diinisialisasi dalam beberapa jenis tes.  Inisialisasi malas memberikan peluang alternatif untuk mencapai hasil yang sama.  Jika Anda berada di posisi yang salah untuk mengubah struktur aplikasi untuk tes "slicing", atau untuk tes spesifik Anda tidak ada "slicing" yang sesuai, maka dimasukkannya inisialisasi malas akan membatasi jumlah nampan untuk yang hanya digunakan dalam tes Anda.  Ini akan mengurangi waktu pelaksanaan pengujian, terutama jika mereka berjalan di lingkungan yang terisolasi selama pengembangan. </p><br><p>  Nyalakan inisialisasi malas pada dorongan terakhir.  Dan, jika Anda memutuskan untuk melakukannya, lakukan dengan hati-hati.  Untuk aplikasi web, pengelola kontainer dapat mengandalkan <code>/health</code> entry point <code>/health</code> , yang biasanya merespon cukup cepat, tetapi ingat bahwa, berpotensi, panggilan pertama mungkin memakan waktu lebih lama dari biasanya.  Anda juga harus mengingat ukuran memori yang dialokasikan untuk JVM sehingga Anda tidak mengalami overflow ketika semua komponen diinisialisasi. <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id445592/">https://habr.com/ru/post/id445592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id445582/index.html">Sistem CRM: perlindungan atau ancaman?</a></li>
<li><a href="../id445584/index.html">OS1: kernel primitif di Rust untuk x86. Bagian 2. VGA, GDT, IDT</a></li>
<li><a href="../id445586/index.html">Akademi Android di Moskow - bicarakan tentang itu dan bagikan materi pelajaran</a></li>
<li><a href="../id445588/index.html">Pemindaian 3D seseorang dalam 30 detik akan ditampilkan di pameran</a></li>
<li><a href="../id445590/index.html">Tata bahasa Inggris. Siapa vs Siapa - bagaimana memahami kata mana yang digunakan</a></li>
<li><a href="../id445594/index.html">Alat untuk membuat situs responsif tanpa akses ke situs</a></li>
<li><a href="../id445596/index.html">Kiat & trik Kubernetes: halaman kesalahan yang dipersonalisasi di NGINX Ingress</a></li>
<li><a href="../id445600/index.html">[Poll dan jahat] Tuan rumah, baik itu salah</a></li>
<li><a href="../id445602/index.html">PHP Rusia 2019: "stadion" -nya untuk bahasa liga pertama</a></li>
<li><a href="../id445608/index.html">Game over: analis melaporkan peningkatan jumlah serangan DDoS pada segmen game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>