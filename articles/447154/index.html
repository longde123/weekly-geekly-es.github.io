<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游댛 游 游뚼 Deuda t칠cnica que conduce a una crisis empresarial. 游눸 游꼸 游꾾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Acumular deudas t칠cnicas puede llevar a su empresa a una crisis. Pero tambi칠n puede convertirse en un poderoso impulsor de cambios masivos de procesos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deuda t칠cnica que conduce a una crisis empresarial.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/447154/">  Acumular deudas t칠cnicas puede llevar a su empresa a una crisis.  Pero tambi칠n puede convertirse en un poderoso impulsor de cambios masivos de procesos y ayudar con la adopci칩n de pr치cticas de ingenier칤a.  Te lo contar칠 en mi propio ejemplo. <br><br><img src="https://habrastorage.org/webt/vo/nt/1m/vont1m1pxmp9xt_l6ifnysa-og0.png"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El equipo de TI de Dodo Pizza</a> creci칩 de 2 desarrolladores que sirven a un pa칤s a 60 personas que atienden a 12 pa칤ses en el transcurso de 7 a침os.  Como Scrum Master y XP Coach, ayud칠 a los equipos a establecer procesos y adoptar pr치cticas de ingenier칤a, pero esta adopci칩n fue demasiado lenta.  Para m칤 fue un desaf칤o hacer que los equipos mantuvieran una alta calidad de c칩digo cuando varios equipos trabajan en un solo producto.  Ca칤mos en la trampa de la preferencia por las caracter칤sticas comerciales sobre la excelencia t칠cnica y acumulamos demasiadas deudas t칠cnicas arquitect칩nicas.  Cuando el marketing lanz칩 una campa침a publicitaria masiva en 2018, no pudimos soportar la carga y ca칤mos.  Fue una pena.  Pero durante la crisis, nos dimos cuenta de que podemos trabajar muchas veces de manera m치s eficiente.  La crisis nos ha empujado hacia cambios revolucionarios en los procesos y la r치pida introducci칩n de las pr치cticas de ingenier칤a m치s conocidas. <br><br><h2>  Antecedentes </h2><br>  Puede pensar que Dodo Pizza es una red de pizzer칤as normal.  Pero en realidad <b>Dodo Pizza es una compa침칤a de TI que vende pizza</b> .  Nuestro negocio se basa en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dodo IS</a> , una plataforma basada en la nube, que gestiona todos los procesos comerciales, comenzando desde la toma del pedido, luego cocinando y terminando hasta la gesti칩n de inventario, la gesti칩n de personas y la toma de decisiones.  En solo 7 a침os hemos crecido de 2 desarrolladores que sirven a una sola pizzer칤a a m치s de 70 desarrolladores que sirven a 470+ pizzer칤as en 12 pa칤ses. <br><br>  Cuando me un칤 a la compa침칤a hace dos a침os, ten칤amos 6 equipos y unos 30 desarrolladores.  La base de c칩digo Dodo IS ten칤a aproximadamente 1 mill칩n de l칤neas de c칩digo.  Ten칤a una arquitectura monol칤tica y muy poca cobertura de pruebas unitarias.  No ten칤amos pruebas de API / UI para entonces.  La calidad del c칩digo del sistema fue decepcionante.  Lo sab칤amos y so침amos con un futuro brillante cuando dividimos el monolito en una docena de servicios y reescribimos las partes m치s horribles del sistema.  Incluso dibujamos el diagrama de "ser arquitectura", pero honestamente no hicimos casi nada hacia el estado futuro.  <b>Mi objetivo principal era ense침ar a los desarrolladores pr치cticas de ingenier칤a y construir un proceso de desarrollo, haciendo que 6 equipos trabajen en un solo producto</b> . <br><br>  A medida que el equipo creci칩, sufrimos la falta de procesos claros y pr치cticas de ingenier칤a m치s.  Nuestros lanzamientos se hicieron m치s grandes y m치s largos porque cada vez m치s desarrolladores contribuyeron al sistema, pero no ten칤amos pruebas de regresi칩n automatizadas y, por lo tanto, perdimos m치s tiempo en la regresi칩n manual con cada lanzamiento.  Sufrimos muchos cambios realizados por 6 equipos en sucursales separadas.  Cuando un equipo fusion칩 sus cambios en una sola rama antes del lanzamiento, a veces sol칤amos perder hasta 4 horas resolviendo conflictos de fusi칩n. <br><br><blockquote><h4>  Mierda pasa </h4><br>  En 2018, Marketing lanz칩 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuestra primera campa침a publicitaria federal en televisi칩n</a> .  Fue un gran evento para nosotros.  Gastamos 100 millones de rublos ($ 1.5 millones) financiando la campa침a, una cantidad bastante significativa para nosotros.  El equipo de TI tambi칠n se prepar칩 para la campa침a.  Automatizamos y simplificamos nuestra implementaci칩n: ahora con un solo bot칩n en TeamCity podr칤amos implementar el monolito en 12 pa칤ses.  Investigamos pruebas de rendimiento y realizamos an치lisis de vulnerabilidad.  Hicimos nuestro mejor esfuerzo pero encontramos problemas inesperados. <br><br>  La campa침a publicitaria fue excelente.  Pasamos de 100 a 300 pedidos / minuto.  Esta fue una buena noticia.  La mala noticia es que Dodo IS no pudo soportar tal carga y muri칩.  Alcanzamos nuestros l칤mites de escala vertical y ya no pod칤amos manejar pedidos.  <b>El sistema se reinicia cada 3 horas.</b>  <b>Cada minuto de tiempo de inactividad nos cuesta millones de dinero, as칤 como la p칠rdida de respeto de los clientes furiosos.</b> </blockquote><br>  Cuando llegu칠 a Dodo hace 2 a침os como Chief Agile Officer, ten칤a un gran deseo de hacer de nuestro peque침o equipo, unas 12 personas, un equipo de ensue침o.  Inmediatamente comenc칠 a introducir pr치cticas de ingenier칤a.  La mayor칤a de los equipos adoptaron programaci칩n de pares, pruebas de unidades y DDD muy pronto.  Pero no todo fue f치cil.  Tuve que superar la resistencia de los desarrolladores, el propietario del producto y el equipo de soporte. <br><br>  A diferencia de las pr치cticas de ingenier칤a, no todos favorec칤an la idea de equipos de caracter칤sticas.  Los desarrolladores estaban acostumbrados a pensar que un equipo centrado en un componente est치 escribiendo un mejor c칩digo.  No estaba claro c칩mo combinar el r치pido desarrollo de las caracter칤sticas comerciales con la refactorizaci칩n masiva de un sistema complejo.  Un flujo continuo de errores tambi칠n requiere atenci칩n constante.  El equipo de soporte estuvo a favor de tener su propio equipo enfocado 칰nicamente en la correcci칩n de errores.  Muchos equipos estaban acostumbrados a trabajar en sucursales separadas y ten칤an miedo de integrarse con frecuencia.  Lanzamos no m치s de una vez por semana, y cada lanzamiento tom칩 bastante tiempo, requiri칩 una gran cantidad de regresi칩n manual y soporte de pruebas de IU.  Trat칠 de arreglarlo, pero los cambios en mi proceso fueron demasiado lentos y fragmentados. <br><br><h2>  La historia de ca칤da y ascenso </h2><br><h4>  Estado inicial: arquitectura monol칤tica </h4><br>  En pos de la velocidad de desarrollo de las caracter칤sticas comerciales, no siempre hemos pensado bien en las soluciones t칠cnicas.  La falta de experiencia tambi칠n nos afect칩.  Al principio, la compa침칤a no pod칤a permitirse contratar a los mejores desarrolladores.  Trabajamos con entusiastas que aceptaron ayudar con la creaci칩n de Dodo IS, creyeron en el fundador de la compa침칤a, Fedor, y trabajaron casi por comida (pizza, por supuesto).  Los desarrolladores que se unieron al equipo luego siguieron la arquitectura establecida, que qued칩 obsoleta.  As칤 que ten칤amos una aplicaci칩n monol칤tica con una sola base de datos, que conten칤a todos los datos de todos los componentes en un solo lugar.  Rastreador, pago, sitio, API para p치ginas de destino: todos los componentes del sistema funcionaron con una sola base de datos, que se convirti칩 en un cuello de botella.  Nuestra arquitectura monol칤tica cre칩 problemas monol칤ticos.  Una sola publicaci칩n en el blog provoc칩 la interrupci칩n del pago de un restaurante. <br><blockquote><h4>  Historia verdadera </h4><br>  Para ilustrar cu치n fr치gil es la arquitectura monol칤tica, dar칠 solo un ejemplo.  <b>Una vez que todos nuestros restaurantes en Rusia dejaron de aceptar pedidos debido a una publicaci칩n de blog.</b>  <b>쮺칩mo puede pasar esto?</b> <br><br>  Un d칤a, nuestro CEO, Fedor, public칩 una publicaci칩n en su blog.  Esta publicaci칩n gan칩 popularidad r치pidamente.  Hay un mostrador en el sitio web del blog de Fedor que muestra una serie de pizzer칤as en nuestra cadena y los ingresos totales de todas las pizzer칤as.  Cada vez que alguien lee el blog de Fedor, el servidor web env칤a una solicitud a la base de datos maestra para calcular los ingresos.  Estas solicitudes sobrecargaron la base de datos y dejaron de atender solicitudes de la caja del restaurante.  Entonces, una publicaci칩n de blog popular interrumpi칩 el trabajo de toda la cadena de restaurantes.  Solucionamos r치pidamente el problema, pero fue una se침al clara (entre muchas otras) de que nuestra arquitectura no puede satisfacer las necesidades comerciales y debe ser redise침ada.  Pero ignoramos estos signos.  Implementamos soluciones r치pidas y f치ciles (como agregar una r칠plica de solo lectura de la base de datos maestra), pero no ten칤amos ninguna hoja de ruta de redise침o t칠cnico. </blockquote><br>  La arquitectura monol칤tica es buena para comenzar porque es simple.  Pero no puede soportar que la alta carga sea un solo punto de falla. <br><br><h4>  Fallas tempranas en 2017 </h4><br>  <b>El 14 de febrero es un d칤a de San Valent칤n</b> .  Todos aman estas vacaciones.  Para que los amantes se feliciten, el 14 de febrero hacemos una pizza especial: pepperoni en forma de coraz칩n.  Recordar칠 el 14 de febrero de 2017 para siempre, porque en este d칤a, cuando todas las pizzer칤as estaban funcionando a plena carga, Dodo IS comenz칩 a caer.  En cada pizzer칤a tenemos de 4 a 5 tabletas para rastrear el orden en el que un fabricante de pizza hace masa, pone ingredientes, hornea o env칤a a la entrega.  El n칰mero de pizzer칤as alcanz칩 m치s de 300, cada tableta actualiz칩 su estado varias veces por minuto.  Todas estas solicitudes crearon una carga tan masiva en la base de datos que el servidor SQL dej칩 de resistir y la base de datos comenz칩 a fallar.  Dodo se establece en el momento m치s inapropiado, durante el pico de las ventas.  Hab칤a una temporada festiva muy ocupada: el 23 de febrero (D칤a del Ej칠rcito y la Armada), el 8 de marzo (D칤a Internacional de la Mujer), el 1 de mayo (D칤a de la Solidaridad Internacional de los Trabajadores) y el 9 de mayo (D칤a de la Victoria en la Segunda Guerra Mundial).  Durante estas vacaciones, esper치bamos un crecimiento de pedidos a칰n mayor. <br><br>  <b>El d칤a en que morir치s</b> .  Conociendo nuestros planes de crecimiento y el l칤mite de la carga que podemos soportar, descubrimos cu치nto tiempo podemos permanecer con vida, es decir, cuando la carga m치xima de hoy se vuelve regular.  La fecha estimada de Armaged칩n se espera en unos seis meses, en agosto o septiembre.  쮺칩mo se siente vivir, sabiendo la fecha de tu muerte? <br><br>  <b>Detener el desarrollo de funciones por un a침o</b> .  Junto con el CEO Fedor, tuvimos que tomar una decisi칩n ardua.  Quiz치s una de las decisiones m치s dif칤ciles en la historia de la empresa.  Detuvimos el desarrollo de caracter칤sticas comerciales.  Pensamos que nos detendr칤amos por 3 meses, pero pronto nos dimos cuenta de que el volumen de la deuda t칠cnica era tan grande que 3 meses no ser칤an suficientes y tenemos que seguir trabajando en problemas t칠cnicos y posponer la cartera de pedidos del negocio.  De hecho, con 6 equipos hemos hecho una sola caracter칤stica comercial durante el pr칩ximo a침o.  El resto del tiempo, los equipos se dedicaron al reembolso de la deuda t칠cnica.  Esta deuda nos cost칩 mucho, m치s de $ 1.5 millones. <br><br><h4>  Algunas mejoras despu칠s de un a침o. </h4><br>  Durante el a침o, tuvimos estos logros notables: <br><ul><li>  Hemos automatizado y acelerado nuestro proceso de implementaci칩n.  Anteriormente, el despliegue era semi-manual.  Nos desplegamos en 10 pa칤ses en aproximadamente 2 horas. </li><li>  Comenz칩 a partir un monolito.  La parte m치s cargada del sistema, el rastreador, se dividi칩 en un servicio separado, con su propia base de datos.  Ahora el rastreador se comunica con el resto del sistema a trav칠s de una cola de eventos. </li><li>  Comenzamos a separar el Cajero de entrega, el segundo componente que crea una gran carga. </li><li>  Reescribi칩 el sistema de autenticaci칩n de usuarios y dispositivos. </li></ul><br>  Nuestro arquitecto gestion칩 el atraso t칠cnico.  Utilizamos los cambios arquitect칩nicos para impulsar el trabajo atrasado.  Cada equipo ten칤a la libertad de hacer lo correcto para crear una arquitectura 칰til.  Para el a침o con los sextos equipos, creamos para el negocio solo una caracter칤stica valiosa.  El resto del tiempo, los equipos trabajaron en deuda t칠cnica.  Parece que podemos estar orgullosos de nosotros mismos.  Pero delante de nosotros hubo una gran decepci칩n. <br><br>  Falla durante la campa침a de marketing federal.  La segunda crisis de confianza. <br><br>  La deuda t칠cnica es f치cil de acumular, pero muy dif칤cil de pagar.  Es poco probable que pueda comprender de antemano cu치nto le costar치. <br><br>  A pesar del hecho de que pasamos todo un a침o luchando contra la deuda t칠cnica, no est치bamos listos para una campa침a de marketing masiva y nos equivocamos frente a nuestro negocio.  Ganas confianza en las gotas, lo pierdes en cubos.  Y tuvimos que ganarlo de nuevo. <br><br>  Perdimos el momento en que era necesario reducir la velocidad del desarrollo de las caracter칤sticas comerciales y abordar la deuda t칠cnica.  Era demasiado tarde cuando nos dimos cuenta.  Nos acostamos bajo carga de nuevo.  El sistema se bloque칩 y reinici칩 cada 3 horas.  Nuestro negocio perdi칩 decenas de millones de rublos. <br><br><img src="https://habrastorage.org/webt/dc/e4/r5/dce4r5zrxw4mk9xhri2qvbora0c.jpeg"><br><br>  Pero gracias a la crisis, vimos que en condiciones extremas podemos trabajar muchas veces de manera m치s eficiente.  Lanzamos 20 veces al d칤a.  Todos trabajaron como un solo equipo, centr치ndose en un solo objetivo.  Durante dos semanas de crisis, hemos hecho lo que tem칤amos comenzar antes porque cre칤amos que tomar칤a meses de trabajo.  El orden asincr칩nico, las pruebas de rendimiento y los registros claros son solo una peque침a parte de lo que hicimos.  Est치bamos ansiosos por seguir trabajando con la misma eficacia, pero sin horas extras y sin estr칠s. <br><br><h2>  Lecciones aprendidas </h2><br>  Despu칠s de la retrospectiva, reestructuramos completamente nuestros procesos.  Tomamos el marco LeSS y lo complementamos con pr치cticas de ingenier칤a.  En los pr칩ximos meses, hicimos un gran avance en la adopci칩n de pr치cticas de ingenier칤a.  Basado en el marco de LeSS, hemos implementado y seguimos utilizando: <br><ul><li>  sola cartera de pedidos; </li><li>  equipos de funciones completamente funcionales y de componentes cruzados; </li><li>  programaci칩n de pares; </li><li>  Probar la programaci칩n de la mafia. </li><li>  Integraci칩n continua genuina, lo que significa m칰ltiples integraciones de c칩digo de 9 equipos en una sola rama; </li><li>  gesti칩n de configuraci칩n simplificada con desarrollo basado en troncales; </li><li>  lanzamientos frecuentes: Despliegue continuo para microservicios, lanzamientos m칰ltiples por d칤a para monolitos; </li><li>  no hay un equipo de control de calidad separado, los expertos en control de calidad forman parte de los equipos de desarrollo. </li></ul><br><h4>  6 pr치cticas que elegimos despu칠s de la crisis </h4><br>  <b>1. El poder del enfoque</b> .  Antes de la crisis, cada equipo trabajaba en su propia cartera de pedidos y se especializaba en su dominio.  En el trabajo atrasado, hubo tareas finamente descompuestas, el equipo seleccion칩 varias tareas para un sprint.  Pero durante la crisis, trabajamos de manera bastante diferente.  Los equipos no ten칤an tareas espec칤ficas, sino que ten칤an un gran objetivo desafiante.  Por ejemplo, una aplicaci칩n m칩vil y una API deben manejar 300 pedidos por minuto, pase lo que pase.  Depende del equipo c칩mo lograr el objetivo.  Los equipos mismos formulan hip칩tesis, las verifican r치pidamente en Producci칩n y las tiran.  Y esto es exactamente lo que quer칤amos seguir haciendo.  Los equipos no quieren ser codificadores tontos, quieren resolver problemas. <br><br>  El poder del enfoque se manifest칩 en la resoluci칩n de problemas complejos.  Por ejemplo, durante la crisis, creamos un conjunto de pruebas de rendimiento a pesar de que no ten칤amos experiencia.  Tambi칠n hicimos la l칩gica de recibir una orden asincr칩nica.  Lo hemos pensado y hablado durante mucho tiempo, y nos pareci칩 que esta es una tarea muy dif칤cil y larga.  Pero result칩 que el equipo es bastante capaz de hacerlo en 2 semanas, si no est치 distra칤do y completamente enfocado en el problema. <br><br>  <b>2. Hackatones regulares</b> .  Nos gustaba trabajar en el modo cuando todos los equipos apuntaban a un objetivo y decidimos a veces organizar tales "hackatones".  No se puede decir que los llevemos a cabo regularmente, pero hubo un par de veces.  Por ejemplo, hubo un hackathon de 500 errores cuando todos los equipos limpiaron los registros y eliminaron las causas de los 500 errores en el sitio y en la API.  El objetivo era mantener limpios los registros.  Cuando los registros est치n limpios, los nuevos errores son claramente visibles, puede configurar f치cilmente los valores de umbral para las alertas.  Es similar a las pruebas unitarias: no pueden ser un poco rojas. <br><br>  Otro ejemplo de un hackathon son los errores.  Sol칤amos tener una gran acumulaci칩n de errores, algunos de los errores hab칤an estado en la cartera durante a침os.  Parec칤a que nunca terminar칤an.  Y cada d칤a hab칤a nuevos.  Tienes que combinar de alguna manera el trabajo en errores y en elementos regulares de la cartera de pedidos. <br><br><div class="spoiler">  <b class="spoiler_title">Introdujimos la pol칤tica #zerobugspolicy en 4 pasos.</b> <div class="spoiler_text"><ol><li>  Limpieza inicial de errores basada en la fecha.  Si el error est치 en la cartera de pedidos durante m치s de 3 meses, simplemente elim칤nelo.  Lo m치s probable es que estuvo all칤 por a침os. </li><li>  Ahora, clasifique los defectos restantes seg칰n c칩mo afectan a los clientes.  Seleccionamos cuidadosamente los errores restantes.  Solo conservamos defectos que dificultan la vida de un gran grupo de usuarios.  Si esto es solo algo que causa inconvenientes, pero puede lidiar con eso, elimine sin piedad.  Entonces redujimos el n칰mero de errores a 25, lo cual es aceptable. </li><li>  Hackathon  Todos los equipos pululan y arreglan todos los errores.  Hicimos esto en unos pocos sprints.  Cada sprint cada equipo tom칩 varios errores y lo arregl칩.  Despu칠s de 2-3 sprints tuvimos una acumulaci칩n de errores clara.  Ahora puede ingresar #zerobugspolicy. </li><li>  #zerobugspolicy.  Cada nuevo error ahora tiene solo dos formas.  칄ter se cae en la cartera de pedidos, o no.  Si entra en el backlog, lo arreglamos primero.  Cualquier error en el backlog tiene mayor prioridad que cualquier otro elemento del backlog.  Pero para entrar en la cartera de pedidos, el error debe ser grave.  O causa un da침o irreparable o afecta a un gran n칰mero de usuarios. </li></ol><br></div></div><br>  <b>3. Equipos de proyectos temporales a equipos de caracter칤sticas estables</b> .  Hubo una historia divertida con los equipos del proyecto.  Durante la crisis, formamos equipos de tigres de personas que estaban mejor capacitadas para la tarea.  Despu칠s de que termin칩 la crisis, los equipos decidieron continuar esta pr치ctica y disolver los equipos.  A pesar de que no me gust칩 esta idea, les dej칠 probar.  En solo 2 semanas (un sprint), en la pr칩xima retrospectiva, los equipos abandonaron esta pr치ctica (esta decisi칩n me hizo extremadamente feliz).  Intentaron y entendieron por qu칠 es mucho m치s c칩modo trabajar en un equipo estable.  Incluso si el equipo carece de algunas habilidades, pueden aprender gradualmente.  Pero el esp칤ritu de equipo, el apoyo y la asistencia mutua se forman durante mucho tiempo, lleva meses.  Los equipos de proyectos a corto plazo est치n constantemente en fase de formaci칩n y tormenta.  Puedes soportarlo durante un par de semanas, pero no puedes trabajar as칤 todo el tiempo.  Es bueno que los equipos hayan intentado y entendido los beneficios de los equipos con caracter칤sticas estables. <br><br>  <b>4. Desh치gase de la regresi칩n manual</b> .  Antes de la crisis, lanzamos una vez por semana, y durante la crisis, docenas de veces al d칤a.  Nos encant칩 nuestra capacidad de liberar a menudo.  Apreciamos lo conveniente que era hacer un peque침o cambio, implementarlo r치pidamente e inmediatamente recibir comentarios de la producci칩n.  Por lo tanto, cambiamos nuestro enfoque hacia los lanzamientos, y esto afect칩 el enfoque hacia la programaci칩n y el dise침o.  Ahora lanzamos continuamente, cada 1-2 d칤as.  Todo en la rama de desarrollo entra en producci칩n.  Incluso si algunas funciones no est치n listas, esta no es raz칩n para no publicar el c칩digo.  Si no queremos mostrar a los usuarios algunas caracter칤sticas que a칰n no est치n listas, las ocultamos con alternancia de funciones.  Este enfoque nos ayud칩 a desarrollarnos en peque침os pasos. <br><br>  Fijamos una meta para deshacernos de las regresiones manuales.  Nos llev칩 1,5 a침os alcanzarlo.  Pero tener un objetivo ambicioso a largo plazo te hace pensar en los pasos que conducen al objetivo. <br><br><div class="spoiler">  <b class="spoiler_title">Lo hicimos en 3 pasos.</b> <div class="spoiler_text"><ol><li>  Automatiza la ruta cr칤tica.  En junio de 2017, formamos el equipo de control de calidad.  La tarea del equipo era automatizar la regresi칩n del funcional m치s cr칤tico de Dodo IS: la toma de pedidos y la producci칩n.  Durante los pr칩ximos 6 meses, un nuevo equipo de control de calidad de 4 personas cubri칩 todo el camino cr칤tico.  Los desarrolladores de equipos de funciones los ayudaron activamente.  Juntos escribimos un lenguaje espec칤fico de dominio (DSL) hermoso y comprensible, que era legible incluso para los clientes.  Paralelamente a las pruebas de extremo a extremo, los desarrolladores cubrieron el c칩digo con pruebas unitarias.  Algunos componentes nuevos fueron redise침ados con TDD.  Despu칠s de eso, disolvimos el equipo de control de calidad.  Los antiguos miembros del equipo de control de calidad se unieron a equipos de funciones para compartir experiencia sobre c칩mo apoyar y mantener las pruebas autom치ticas. </li><li>  Modo de sombra.  Al tener pruebas autom치ticas, durante 5 lanzamientos hicimos regresiones manuales en modo sombra.  Los equipos confiaron solo en el conjunto de pruebas automatizadas, pero cuando el equipo decidi칩 "Estamos listos para lanzar", ejecutamos una regresi칩n manual para verificar si nuestras pruebas autom치ticas fallan.  Rastreamos cu치ntos errores fueron detectados manualmente y no detectados por las pruebas autom치ticas.  Despu칠s de 5 lanzamientos, revisamos los datos y decidimos que podemos confiar en nuestras pruebas autom치ticas.  No se perdieron errores importantes. </li><li>  Eliminar regresiones manuales.  Cuando tuvimos suficientes pruebas para comenzar a confiar en ellas, abandonamos por completo las pruebas manuales.  Cuanto m치s ejecutamos nuestras pruebas, m치s confiamos en ellas.  Pero esto sucedi칩 solo 1.5 a침os despu칠s de que comenzamos a automatizar las pruebas de regresi칩n. </li></ol><br></div></div><br>  <b>5. Prueba de rendimiento es parte de la prueba de regresi칩n</b> .  Durante la crisis, creamos un conjunto de pruebas de rendimiento.  Era un 치rea completamente nueva para nosotros.  Sin embargo, en solo 2 semanas, logramos crear algunas pruebas de rendimiento utilizando las herramientas de Visual Studio.  Estas pruebas nos ayudaron no solo a detectar la degradaci칩n del rendimiento.  Los usamos para agregar carga sint칠tica al servidor de producci칩n para identificar los l칤mites de rendimiento.  Por ejemplo, si la carga de producci칩n org치nica es de 100 pedidos / min y agregamos 50 m치s pedidos / min con la ayuda de nuestras pruebas de rendimiento, podemos ver si los servidores de Producci칩n pueden manejar el aumento de carga.  Tan pronto como notamos excepciones o aumento de la latencia, detenemos la prueba.  Al realizar estos experimentos, descubrimos la carga m치xima que nuestros servidores de producci칩n pueden manejar y cu치l ser치 el punto de acceso. <br><br>  El a침o que viene superamos las pruebas de rendimiento al equipo experimentado de PerformanceLab.  Se reunieron con nuestros desarrolladores y personal de infraestructura, y nos ayudaron a crear un conjunto robusto de pruebas de rendimiento.  Ahora ejecutamos estas pruebas semanalmente y proporcionamos comentarios r치pidos a los equipos de desarrollo si el rendimiento se ve afectado. <br><br>  Algunas de las pr치cticas de ingenier칤a fueron refinadas iterativamente.  Por ejemplo, lanzamientos frecuentes.  Comenzamos con ciclos de lanzamiento semanales, compatibles con pruebas manuales lentas y fr치giles.  Desarrollamos funciones durante una semana y probamos durante otra semana.  Pero fue dif칤cil mantener los cambios realizados por m칰ltiples durante una semana.  Luego probamos lanzamientos de equipos aislados, cuando solo se lanzaron los cambios realizados por un solo equipo.  Pero este proceso fall칩 porque cada equipo tuvo que esperar en la cola durante varias semanas.  Luego, los equipos aprendieron los beneficios de la integraci칩n frecuente y comenzamos a practicar lanzamientos conjuntos de cambios de equipos m칰ltiples.  Los desarrolladores comenzaron a experimentar con la funci칩n de alternancia de funciones y a pasar a funciones sin terminar de producci칩n.  Finalmente, llegamos a Integraci칩n continua y m칰ltiples versiones por d칤a para monolitos e Implementaci칩n continua para microservicios. <br><br><img src="https://habrastorage.org/webt/ce/yd/ay/ceyday2plzigxpfvhdmldzhpav4.jpeg"><br><br>  Otro caso interesante es con nuestro departamento de control de calidad.  Antes no ten칤amos un equipo de control de calidad, sino que ten칤amos probadores manuales.  Al darse cuenta de la necesidad de la automatizaci칩n de pruebas, formamos un equipo de control de calidad, pero desde el primer d칤a este equipo sab칤a que alg칰n d칤a se disolver칤a.  Despu칠s de 6 meses, el equipo automatiz칩 nuestros escenarios comerciales clave y, con la ayuda de los desarrolladores, escribi칩 un lenguaje espec칤fico de dominio (DSL) conveniente para escribir pruebas.  El equipo se separ칩 y los ingenieros de calidad se unieron a los equipos de caracter칤sticas.  Ahora los propios equipos desarrollan y mantienen autotest. <br><br>  Hoy tenemos una 칰nica cartera de pedidos en la que est치n trabajando 9 equipos de caracter칤sticas.  Los equipos de caracter칤sticas son equipos estables, multifuncionales y de componentes cruzados.  La mayor칤a de nuestros equipos son equipos de caracter칤sticas. <br><br>  <b>6. Centrarse en las pr치cticas de ingenier칤a</b> .  Todos nuestros equipos usan programaci칩n en pares.  Considero que la programaci칩n de pares es una de las pr치cticas m치s simples pero poderosas que ayuda a implementar otras pr치cticas de ingenier칤a.  Si no sabe qu칠 pr치ctica de ingenier칤a comenzar, le recomiendo programar la pareja. <br><br><h2>  Resultados </h2><br>  El principal resultado que nos dio la crisis es una sacudida.  Nos despertamos y comenzamos a actuar.  La crisis nos ha ayudado a ver el m치ximo de nuestras oportunidades.  Vimos que podemos trabajar muchas veces de manera m치s eficiente y alcanzar r치pidamente nuestros objetivos.  Pero esto requiere cambiar la forma habitual de trabajar.  Hemos dejado de tener miedo de hacer experimentos audaces.  Como resultado de estos experimentos, durante el a침o pasado hemos mejorado significativamente la calidad y la estabilidad de Dodo IS.  Si durante las vacaciones de primavera en 2018 nuestras pizzer칤as no pudieron funcionar debido a Dodo IS, entonces en 2019, con un crecimiento de 300 a 450 pizzer칤as, Dodo IS funcion칩 a la perfecci칩n.  En silencio, experimentamos el pico de ventas en el A침o Nuevo, durante la segunda Campa침a de Marketing y las vacaciones de primavera.  Por primera vez en mucho tiempo, confiamos en la calidad del sistema y dormimos bien por la noche.  Este es el resultado del uso constante de las pr치cticas de ingenier칤a y el enfoque en la excelencia t칠cnica. <br><br><h4>  Resultados para empresas </h4><br>  Las pr치cticas de ingenier칤a no son necesarias por s칤 mismas si no benefician a su negocio.  Como resultado del enfoque en la excelencia t칠cnica, mejoramos la calidad del c칩digo y desarrollamos caracter칤sticas comerciales con una velocidad predecible.  Los lanzamientos se han convertido en un evento regular para nosotros.  Lanzamos el monolito cada 2 d칤as y servicios m치s peque침os cada pocos minutos.  Esto significa que podemos ofrecer r치pidamente valor comercial a nuestros usuarios y recopilar comentarios m치s r치pido.  Gracias a la flexibilidad de los equipos de caracter칤sticas, obtenemos una alta velocidad de desarrollo. <br><br><blockquote>  Hoy tenemos 480 pizzer칤as en l칤nea, 400 de las cuales est치n en Rusia.  Durante las vacaciones de mayo de este a침o, hubo problemas con el procesamiento de pedidos en nuestras pizzer칤as nuevamente.  Pero esta vez el cuello de botella fue el servicio al cliente en las pizzer칤as.  Dodo IS funcionaba como un reloj, a pesar del creciente n칰mero de pizzer칤as y pedidos. </blockquote><br><h4>  Resultados para los equipos </h4><br>  Hoy utilizamos una amplia gama de pr치cticas de ingenier칤a: <br><ol><li>  Equipos con funciones totalmente funcionales y de componentes cruzados. </li><li>  Programaci칩n en pareja / Programaci칩n de mobs. </li><li>  Integraci칩n continua genuina, lo que significa m칰ltiples integraciones de c칩digo de 9 equipos en una sola rama. </li><li>  Gesti칩n de configuraci칩n simplificada con desarrollo basado en troncales. </li><li>  Objetivo com칰n para m칰ltiples equipos. </li><li>  El experto en la materia est치 en el equipo. </li><li>  No hay un equipo de control de calidad separado, los expertos en control de calidad son parte de los equipos de desarrollo. </li><li>  Reemplazo manual de regresi칩n manual con autotest. </li><li>  Pol칤tica de cero errores. </li><li>  Retraso t칠cnico de la deuda. </li><li>  Detenga la l칤nea como un controlador para la aceleraci칩n de la tuber칤a de implementaci칩n. </li></ol><br>  Ayudan a 9 equipos a trabajar en un c칩digo com칰n y un 칰nico producto que incluye docenas de componentes: un sitio m칩vil y de escritorio, una aplicaci칩n m칩vil en iOS y Android, y un back office gigante con caja registradora, seguimiento, exhibici칩n de restaurantes, cuenta personal , an치lisis y pron칩sticos. <br><br><h4>  Que puede ser mejor </h4><br>  Puede parecer que ya hemos hecho un buen progreso en las pr치cticas de ingenier칤a, pero solo estamos al principio, todav칤a tenemos espacio para crecer.  Por ejemplo, intentamos, pero hasta ahora de manera poco sistem치tica, la programaci칩n de la mafia.  Estudiamos el enfoque de escritura de prueba BDD.  Todav칤a tenemos espacio para crecer en CI, entendemos que la integraci칩n, incluso una vez al d칤a, no es suficiente.  Y cuando crezcamos hasta 30 equipos, ser치 necesario integrarnos m치s a menudo.  Todav칤a estamos en progreso de la transici칩n de TDD a ATDD.  Tenemos que crear un proceso de toma de decisiones arquitect칩nicas sostenible y escalable. <br>  Lo m치s importante es que nos dirigimos hacia el fortalecimiento de la Excelencia T칠cnica. <br><br>  Debido al hecho de que los 9 equipos est치n trabajando en una cartera de pedidos com칰n y en un producto, los equipos tienen un fuerte deseo de cooperar entre s칤.  Aprendieron a tomar decisiones fuertes ellos mismos. <br><br><div class="spoiler">  <b class="spoiler_title">Por ejemplo, las siguientes pr치cticas han sido propuestas e implementadas por los propios equipos.</b> <div class="spoiler_text"><ol><li>  Detenga la l칤nea como un controlador para la aceleraci칩n de la tuber칤a de implementaci칩n (consulte el informe de mi experiencia "Detenga la l칤nea para racionalizar su tuber칤a de implementaci칩n"). </li><li>  Reemplace las pruebas de IU con pruebas de API. </li><li>  Implementaci칩n automatizada con un solo clic. </li><li>  Anfitri칩n de Kubernetes. </li><li>  El equipo de desarrollo se implementa en producci칩n. </li></ol><br></div></div><br><br>  Algunos equipos mostraron su deseo de usar las 12 pr치cticas de XP y me pidieron ayuda como XP Coach y Scrum Master. <br><br><h2>  Lo que aprendimos </h2><br>  Desear칤a no dejar que la crisis suceda.  Como desarrollador, sent칤 la responsabilidad personal de acumular una deuda t칠cnica demasiado grande y no levantar una bandera roja antes: <br><ul><li>  Las pr치cticas de ingenier칤a protegen a las empresas de las crisis. </li><li>  No acumule deuda t칠cnica.  Puede ser demasiado tarde y costar demasiado. </li><li>  Los cambios evolutivos tardan varias veces m치s que los revolucionarios. </li><li>  La crisis no siempre es algo malo.  Utiliza la crisis para revolucionar los procesos. </li><li>  Sin embargo, se requiere una larga preparaci칩n evolutiva de antemano. </li><li>  No implementes ciegamente todas las pr치cticas que te gustan.  Algunas pr치cticas est치n esperando en las alas, y cuando 칠l venga, los equipos las usar치n sin resistencia.  Espera el momento correcto. </li><li>  Refina y adapta las pr치cticas a tu contexto. </li><li>  Con el tiempo, los propios equipos comienzan a tomar decisiones firmes y a implementarlas.  Br칤ndeles un ambiente seguro para probar, fallar y aprender sobre los errores. </li></ul><br><br>  La deuda t칠cnica nos lleva a la crisis.  Pero de la crisis, tanto los desarrolladores como las personas de negocios aprendieron la importancia del enfoque en la excelencia t칠cnica y las pr치cticas de ingenier칤a.  Utilizamos la crisis como un desencadenante para el cambio masivo de organizaci칩n y procesos. <br><hr><br><h4>  <i>Agradecimientos</i> </h4> <i><br></i>  <i>Me gustar칤a dar las gracias a todas las personas que me ayudaron en mi viaje desde la crisis hasta la transformaci칩n de LeSS.</i>  <i>Constantemente siento tu apoyo.</i> <i><br><br></i>  <i>Muchas gracias a nuestro CEO, Fedor Ovchinnikov por la confianza.</i>  <i>Eres el verdadero l칤der de la empresa con una cultura 치gil genuina.</i> <i><br><br></i>  <i>Muchas gracias a Dmitry Pavlov, nuestro Product Owner, mi viejo amigo y co-entrenador.</i> <i><br><br></i>  <i>Gracias Alex Andronov y Andrey Morevsky por apoyarme en mi papel.</i> <i><br><br></i>  <i>Muchas gracias a Dasha Bayanova, nuestro primer Scrum Master a tiempo completo, que me crey칩 y siempre me ayuda y apoya con toda nuestra iniciativa.</i>  <i>Su ayuda es dif칤cil de sobreestimar.</i> <i><br><br></i>  <i>Muchas gracias a Johanna Rothman, quien me ayud칩 a escribir este informe en cualquier condici칩n: estar de vacaciones, recuperarse despu칠s de una enfermedad.</i>  <i>Johanna, fue un placer trabajar contigo.</i>  <i>Su ayuda, consejo, atenci칩n a los detalles y diligencia son muy apreciados.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447154/">https://habr.com/ru/post/447154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447144/index.html">C칩mo organic칠 el almacenamiento de fotos</a></li>
<li><a href="../447146/index.html">Interruptores industriales no administrados EKI</a></li>
<li><a href="../447148/index.html">La aplicaci칩n (des) oficial de Habr - HabrApp 2.0: acceso</a></li>
<li><a href="../447150/index.html">Chat en el sitio y en la emisi칩n de Yandex</a></li>
<li><a href="../447152/index.html">Lanzamiento del kit de herramientas multiplataforma .NET UI AvaloniaUI 0.8</a></li>
<li><a href="../447156/index.html">Wireshark 3.x: an치lisis de c칩digo bajo macOS y revisi칩n de errores</a></li>
<li><a href="../447158/index.html">Wireshark 3.x: an치lisis de c칩digo de macOS y revisi칩n de errores</a></li>
<li><a href="../447160/index.html">Espacio para ni침os. Algunas ideas para el d칤a de la cosmon치utica</a></li>
<li><a href="../447162/index.html">No compre ERP</a></li>
<li><a href="../447164/index.html">쮺칩mo combinar las ventajas de una computadora port치til y una computadora de escritorio? An치lisis de problemas y soluciones (Parte 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>