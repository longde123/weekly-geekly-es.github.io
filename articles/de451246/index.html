<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👨🏿 🕤 💪 Reverse Engineering einer High-End-Lötstation 💠 🚮 🐊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Dies ist die Übersetzung des Originalartikels von Baragol ) 

 Wir hatten eine Reihe von Fotos der Hauptplatine, ein YouTube-Video mit Drain-Spannung...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reverse Engineering einer High-End-Lötstation</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451246/"><img src="https://habrastorage.org/webt/zy/do/hq/zydohqpxzvzoygol3o6ci9wkebw.jpeg"><br><br>  <i>(Dies ist die Übersetzung des Originalartikels von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Baragol</a> )</i> <br><br>  Wir hatten eine Reihe von Fotos der Hauptplatine, ein YouTube-Video mit Drain-Spannungs-Wellenformen von MOSFETs, einen Forumsbeitrag mit einer Aufschlüsselung der Kapazitätswerte von LC-Schaltungskondensatoren sowie eine Reihe von Unboxing-Videos, die das Aufheizen der zeigen Lötspitze.  Das einzige, was mich wirklich beunruhigte, war das Video mit der Messung des Spitzenstromverbrauchs während des Aufheizens.  Es gibt nichts auf der Welt, das hilfloser, verantwortungsloser und verdorbener ist als eine verbrannte Patrone, die für 60 Dollar bei Amazon neu gekauft wurde.  Aber lassen Sie mich von vorne beginnen. <br><a name="habracut"></a><br><h4>  Einführung in das Thema </h4><br>  Um zu verstehen, welche Art von Gerät wir heute entwerfen werden, lassen Sie uns zunächst einen kurzen Überblick über die angebotenen Arten von Lötstationen und deren Unterschiede geben. <br><br>  Wie Sie vielleicht vermutet haben, besitzen chinesische Marken das gesamte Low-End-Preissegment dieser Geräte, die das recht erfolgreiche Design des japanischen Lötkolbens Hakko weitgehend klonen.  Das Funktionsprinzip des Originalmodells und seiner zahlreichen Nachbauten ist sehr einfach: Eine Nichrom- oder Dünnschichtheizung überträgt ihre Wärme auf eine abnehmbare Lötspitze, wobei ihre Temperatur mit einer Thermoelementeinheit oder einem in die Heizung eingebauten Thermistor geregelt wird.  Dies ist eine einfache und billige Lösung, aber ihre Qualität kann bei chinesischen Nachbauten nicht perfekt sein, z. B. eine leicht falsch dimensionierte Heizung, ein etwas billigeres Material der Spitze, was dazu führt, dass die Heizung in Folie eingewickelt werden muss. Wenn Sie einen originalen japanischen Tipp aus dem Ausland bestellen und den Stecker durch einen leistungsstärkeren ersetzen, haben Sie Ihre Platte in kürzester Zeit voll. <br><br>  Irgendwo in der Mitte des Preisspektrums befinden sich die originalen Lötstationen namhafter westlicher Marken.  Die deutsche ERSA, der US Weller, der japanische Hakko - solche Marken.  Ihr Funktionsprinzip ist im Grunde identisch, außer dass Sie nicht wirklich auf Ihre Ressourcen zugreifen müssen, damit sie funktionieren.  Dazu gehören schöne, sofort einsatzbereite Extras wie ein weiches Silikonkabel, das nicht bei der geringsten Berührung des Lötkolbens schmilzt, und ... nun, es gibt eigentlich nicht so viele Extras!  Der Preis?  Entspricht dem Versprechen.  Die Hunderte von Dollars, die für das Zeug ausgegeben werden müssen, können nicht nur einen bescheidenen DIY-Enthusiasten beunruhigen, der seine Abende gerne damit verbringt, seine Hardware zu optimieren, sondern auch ein mittelständisches Unternehmen. <br><br>  Der heutige Artikel handelt jedoch von etwas anderem.  Ich werde Ihnen etwas über das echte High-End-Phänomen in der Welt der Lötstationen erzählen, nämlich die in den USA hergestellten Induktionslötkolben von Metcal (die derzeit unter dieser Marke von OK International hergestellt werden).  Tatsächlich stellen mehrere Unternehmen diese Geräte her, z. B. außer Metcal, ich kann auch Thermaltronics, JBC und sogar Hakko erwähnen, die ein ähnliches Design verkaufen.  Das Betriebsdesign der Induktionsheizung in diesen Geräten ist recht elegant: <br><br> <a href=""><img src="https://habrastorage.org/webt/u_/zy/lj/u_zyljn2jccu9qkjsywbyn1w7ro.jpeg"></a> <br><br>  Wie Sie sehen können, fehlen jegliche Temperatursensoren.  Die Lötspitze besteht aus Kupfer mit einer ferromagnetischen Beschichtung, die bei Einwirkung eines hochfrequenten (13,56 MHz) magnetischen Wechselfeldes erwärmt wird und dann bei einer bestimmten Temperatur, der sogenannten Curie-Temperatur, ihre magnetischen Eigenschaften verliert und stoppt weiter aufheizen.  Wenn Sie den Lötpunkt berühren, verliert der ferromagnetische Gegenstand teilweise seine Wärme und der Induktor beginnt sofort, seine Leistung an die Lötspitze zu übertragen.  Die Patronen haben vier feste Temperaturen, von denen Sie wirklich nur zwei benötigen - zum blei- und bleifreien Löten.  Das ist alles was es ist. <br><br>  OKI / Metcal stellt mehrere Modelle von Induktionslötstationen her, die zu unterschiedlichen Preisen und mit unterschiedlicher Ausgangsleistung erhältlich sind. Die Preisspanne von 1000 US-Dollar lässt jedoch den Wunsch aufkommen, dieses schöne Gerät zu nutzen, egal wie schön es auch sein mag.  Das bringt mich auf die Idee, etwas Geld zu sparen! <br><br><h4>  Problemm </h4><br>  Sagen wir es so: Verwenden Sie nur öffentlich verfügbare Quellen, um das virtuelle Reverse Engineering des Originalgeräts MX-5200 durchzuführen und einen einkanaligen Hochfrequenz-Wellenformoszillator der Consumer-Klasse mit der Ausgangsleistung von zu entwickeln 80 W, wodurch die Funktionalität der ursprünglichen Lötstation so weit wie möglich nachgebildet wird. <br><br>  Wenn Sie online suchen, finden Sie leicht ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schematisches Diagramm</a> der vorherigen Generation der Metcal MX-500-Station, das sorgfältig von der Leiterplatte kopiert wurde.  Die direkte Umsetzung der Entwurfsideen aus diesem Diagramm funktioniert nicht, da die Ausgangsleistung dieses Geräts nur 40 W beträgt und nicht einfach skaliert werden kann.  Dieses alte Diagramm hilft uns jedoch, die Funktionsweise der Schlüsselbaugruppen zu verstehen. <br><br>  Die folgenden Elemente sind im Diagramm zu sehen: <br><br><ol><li>  Ein Hochleistungs-HF-Generator mit drei Ausgangsresonanzkreisen; </li><li>  Ein Impulsabwärtswandler zum Versorgen des Generators (1) mit einer Ausgangsspannung im Bereich von 17 bis 21 V; </li><li>  Eine Rückkopplungsschaltung zum Regulieren der Spannung des Abwärtswandlers (2) in Abhängigkeit von der Spannung an einem der Ausgangsresonanzkreise des Generators (1); </li><li>  Eine Schutzschaltung zum Ausschalten des Generators (1) bei Abschaltung des Induktors; </li><li>  Ein Transformator-Netzteil mit einer Ausgangsspannung von 53V. </li></ol><br>  Lassen Sie uns schnell einige gängige Lösungen für das Schaltungsdesign betrachten.  Beispielsweise kann die Schaltung mit einem Niederfrequenz-Ringkerntransformator betrieben werden.  Moment mal, verwenden wir lieber einen resonanten LLC-Transformator mit einem seltenen Mikrochip HiperLCS von Power Integrations: Ich wollte schon lange damit arbeiten.  Nehmen wir auch einen aktuelleren Abwärtstransformator, um die Ausgangsleistung zu steuern und zu prüfen, ob wir möglicherweise 5 A aus einem SO-8-Paket herausholen können.  Moment mal, kann ein Projekt ohne Arduino, Skizze und LED überleben?  Fügen wir außerdem einen STM32-Chip und ein kleines Display hinzu, um die aktuelle Ausgangsleistung anzuzeigen.  Zur Vereinfachung messen wir die Leistung im Stromkreis des HF-Generators.  Die Effizienz wird in der Software berücksichtigt (oder ignoriert).  Wir werden ein Metallgehäuse der richtigen Größe verwenden, das gleichzeitig als Abschirmung und Kühlkörper dient. <br><br><img src="https://habrastorage.org/webt/gc/u2/w1/gcu2w1dww-mhiyltoow_rpraa8c.jpeg"><br><br>  Für das eigentliche Löten gehe ich zu Amazon und kaufe ein Metcal MX-UK1-Upgrade-Kit, einschließlich eines Arbeitsständers und des Lötkolbens selbst (der nur ein an einem Draht befestigtes Handstück ist) sowie Lötpatronen.  Aufgrund meiner Berufserfahrung fällt es mir leichter, kleine Gegenstände mit einer 30 ° -Huflötkolbenspitze zu handhaben, und um etwas Größeres zu löten, nehme ich etwas Breiteres, Schwereres und Heißeres. Hier ist meine Wahl: ein Metcal SMTC-0167 für Feinlöten und ein Thermaltronics M7K100 für die Arbeit mit größeren Gegenständen.  Übrigens reichen auch billigere Thermaltronics-Tipps. <br><br><img src="https://habrastorage.org/webt/dt/go/ha/dtgohazuklmmwjlzrnkjeqatbrc.jpeg"><br><br>  Während meine Artikel versendet werden, zeichne ich ein Flussdiagramm des Geräts im Projekt. <br><br><img src="https://habrastorage.org/webt/zl/uy/bh/zluybhztltpnmerd00thb0u5smo.png"><br><br>  Es ist wichtig, die Rückkopplung zwischen dem Ausgang des HF-Generators und dem Steuereingang des Abwärtswandlers zu skizzieren.  Die Sache ist, dass nach dem Erhitzen einer Lötspitze auf die Betriebstemperatur der Oszillator weiterhin eine ziemlich hohe Amplitudenspannung (um 100 V) ausgibt und die resultierende Leistung beginnt, sich auf den aktiven Widerstand der Induktorspule zu beziehen, was aufgrund der Hauteffekt ist viel höher als ein gewöhnliches Multimeter registrieren kann.  Infolgedessen wird die winzige Spule glühend heiß und brennt ab.  Um dies zu verhindern, verwenden die Originalstationen eine negative Rückkopplung, die die Versorgungsspannung des Oszillators als Reaktion auf das wachsende Stehwellenverhältnis reduziert, das mit der Änderung der Impedanz des Induktors einhergeht.  Das 40-W-Modell verwendet ein relativ einfaches Verfahren aus dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">US4626767A-</a> Patent, während das 80-W-Modell eine differenziertere Rückkopplung mit einem Stromwandler verwendet.  Schauen wir uns dieses Video an, das Sie im Internet finden: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-55dR4yTJDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Die blaue Linie zeigt die Versorgungsspannung an der Ausgangsstufe des HF-Generators. Wie Sie dem Video entnehmen können, müssen wir sicherstellen, dass sich die Versorgungsspannung um mindestens das Doppelte erhöhen kann (dementsprechend beträgt die Ausgangsleistung proportional zum Spannungsquadrat wachsen, d. h. viermal so hoch wie der Spannungswert).  Da es mir nicht gelungen ist, mit einer einfachen Rückkopplungsschaltung, die ich in LTSpice modelliert habe, die gleiche Regelungsqualität sicherzustellen, habe ich nur die Rückkopplungsschaltung vom Foto der Leiterplatte kopiert. <br><br><h4>  Hochfrequenzgenerator </h4><br>  Beginnen wir mit dem Entwurf des Hochfrequenzmoduls, indem wir zuerst den Ausgangsresonanzkreis erarbeiten.  Schauen Sie sich dieses hochauflösende Foto an: <br><br> <a href=""><img src="https://habrastorage.org/webt/ng/9m/ia/ng9miake_7v8hi53skrpz8ko3lm.jpeg"></a> <br><br>  Sie können drei Spulen sehen, die mit 4, 6 und 7 Windungen von links nach rechts um gelbe Ringkerne gewickelt sind.  Nach dem Amidon-Klassifizierungssystem wird Gelb für Eisenpulverkerne mit einer Permeabilität von 8,5 (Material Nr. 6) verwendet.  Die Größe der Spulen kann berechnet werden, indem zuerst mit einem Lineal der Durchmesser der Spulen auf dem Bildschirm gemessen wird und dieser dann mit dem Maß einer gut erkennbaren Komponente wie dem Ausgangstransistor im TO-247-Gehäuse verglichen wird.  Anscheinend verwendet dieses Design T130-6-Kerne;  Dies ist meiner Meinung nach ein bisschen übertrieben - so große Toroide sind für eine viel höhere Leistung gedacht.  Aber ich habe nicht die Absicht, hier schicke Hosen zu spielen: Ich kann mir die originalen US-Kerne sicherlich nicht leisten, also werde ich stattdessen ihre billigen chinesischen Repliken bei AliExpress bestellen und sehen, ob sie den Job machen können (Spoiler-Alarm: Sie haben es gut gemacht). .  Ihre Induktivitätswerte wurden mit 180, 400 bzw. 540 nH berechnet. <br><br>  In den Resonanzkreisen arbeiten Induktoren neben Kondensatoren.  Wir können ihre Kapazitätswerte nicht aus dem Foto ableiten, können jedoch leicht einen Nachrichtenbeitrag des pünktlichen mikeselectricstuff (des Autors des obigen Videos) finden, der freundlicherweise seine Beobachtungen mitteilte (gelb hervorgehoben): <br><br><img src="https://habrastorage.org/webt/hq/aq/md/hqaqmdiwweyahwjsjwp5ayrhqx0.png"><br><br>  Nach dem Einspeisen dieser Werte in ein Gewürzmodell wird deutlich, dass die Resonanzfrequenzen der Schaltkreise geringfügig von 13,56 MHz weg verschoben sind.  Die Sache ist, je näher die Frequenz an der selbstresonanten liegt, desto weniger Spannung wird benötigt, um den HF-Generator mit Strom zu versorgen, und desto höher ist seine Stromaufnahme.  Das ursprüngliche Design versorgt die Ausgangsstufe mit einem Abwärtswandler mit einer Strombegrenzung von 3A, sodass die Konstrukteure die Ausgangsstufen leicht außer Resonanz setzen, um die Versorgungsspannung zu erhöhen und den Stromverbrauch zu verringern.  Auf der anderen Seite planen wir den Einsatz eines 5A-Chips. Im Resonanzmodus stellte sich jedoch heraus, dass der Strom knapp ist. Daher werden wir die Ausgangsstufen ebenfalls ein wenig aus der Resonanz bringen.  Wir werden die genauen Kapazitätswerte experimentell herausfinden, basierend auf den Projektgrenzen für die maximale Versorgungsspannung des Ausgangsstromkreises (22 V) und den maximalen Stromverbrauch (4A). <br><br>  Beachten Sie, dass innerhalb der Resonanzkreise eine beträchtliche Menge an Energie fließt, die in Form von Wärme an die Umgebung abgegeben werden soll.  Um den Q-Faktor zu erhöhen, verwenden wir für die Spulen einen ziemlich dicken Lackdraht (1,25 mm) und schließen mehrere Kondensatoren parallel an. <br><br>  Die Wahl des richtigen Ausgangstransistors ist eine weitere rätselhafte Frage.  Wenn die Patrone ausgetauscht oder entfernt wird, kann die Überspannung auf 300-350 V ansteigen, aber die Autoren des ursprünglichen Designs haben sich entschieden, sich nicht um einen ausgeklügelten Schutz zu kümmern, und die Ausgangsstufe einfach mit einem ziemlich seltenen, schnellen und teuren HF-Transistor IXFH12N50F von ausgestattet IXYS mit der Drain-Spannungsgrenze von 500V.  Wir können uns solchen Luxus nicht leisten. Nehmen wir also einen Standard-200-V-Feldeffekttransistor STP19NF20, der nur einen halben Dollar kostet, und schließen Sie ihn parallel zu einem 150-V-Überspannungsschutz an.  Perfekt!  Der Entstörer schneidet die Überspannungen der Resonanzkreise leicht ab und verhindert, dass sie zu stark schwingen, während das Schutzmodul den Oszillator innerhalb von etwa 10 ms nach dem Verschwinden der Last anhält. <br><br><img src="https://habrastorage.org/webt/rf/tg/il/rftgil-a5rpht6bup_enjbtq8kk.jpeg"><br><br>  Aufgrund der großen Eingangskapazität und der hohen Frequenz können wir das Gate des Ausgangstransistors nicht direkt mit einem üblichen Gate-Treiber steuern.  Das Foto der Originalplatine zeigt eine kernlose Induktorspule zwischen den beiden Leistungstransistoren.  Dies ist ein häufig verwendeter kleiner Trick: Zusammen mit der Gate-Source-Kapazität erzeugt der Induktor einen Resonanzkreis, der den Energiefluss über den Gate-Kreis aufrechterhält, was zu einem Anstieg des Wirkungsgrads des Vorverstärkers führt.  Gleichzeitig legt dieselbe Schaltung eine implizite Einschränkung für das mögliche Modell des Ausgangstransistors fest: Sein Gate-Widerstandswert muss so niedrig wie möglich sein, um einen vernünftigen Q-Faktor der Schaltung aufrechtzuerhalten.  Lassen Sie uns die Lösung des Herstellers reproduzieren, ohne auf viele Details einzugehen.  Wir wählen den richtigen Induktivitätswert basierend auf dem maximalen Wirkungsgrad des tatsächlichen Stromkreises aus, indem wir die Wicklungen der Spule festziehen / dehnen. <br><br>  Von da an wird das Schaltungsdesign trivialer.  Wir werden den Vorverstärker, der um einen IRF510-Transistor mit niedriger Eingangskapazität herum entwickelt wurde, mit einem Doppeltreiber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MAX17602 ansteuern</a> , da seine Geschwindigkeitseigenschaften gut aussehen.  Ein MAX17600 oder ein MAX17601 würde noch besser funktionieren, und wir könnten ihre Ausgänge parallel schalten, aber ich hatte diese nicht sofort verfügbar, also werden wir mit allem arbeiten, was wir haben. <br><br>  Die richtige Schwingfrequenz wird von einem Kristallresonator eingestellt.  Leider konnte ich keinen 13,56-MHz-Quarz für den aktiven Oszillator finden.  Aber keine Sorge, wir nehmen einen häufiger verwendeten 27,12-MHz-Resonator und halbieren die Frequenz.  Wir werden einen Mikrocontroller oder einen seiner entsprechend programmierten Timer gut gebrauchen.  Ich sollte auch erwähnen, dass eine MCU nur direkt an einen Kristallresonator angeschlossen werden kann, der mit der Grundfrequenz des Kristalls arbeitet.  Die üblicherweise verwendeten russischen 27,120-kHz-Resonatoren im dritten Oberton können nur durch einen schnellen Hack in Form eines zusätzlichen Resonanzkreises verbunden werden. <br><br><h4>  Stromversorgung </h4><br>  Nach einer langen Reihe erfolgloser Experimente mit in China hergestellten Produkten entschied ich mich, die Ausgangsstufe des HF-Oszillators über einen Abwärtswandler mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TPS54560-</a> Chip von TI zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">versorgen</a> .  Um hörbare Schläge zu vermeiden, stellen wir die Frequenz des internen Oszillators auf etwa 450 kHz in einem Abstand vom Arbeitsfrequenzbereich des LLC-Wandlers ein.  Alternativ hätte ich genau das Gegenteil tun können, dh den Abwärtswandler mit dem Oszillator des LLC-Wandlers synchronisieren, aber zu diesem Zeitpunkt wurde ich faul, also ließ ich diese Idee fallen. <br><br>  Der TPS54560-Konverter selbst weist trotz seiner geringen Größe einen signifikanten Ausgangsstrom auf, sodass Sie sich manchmal vorstellen können, dass dies ein beispielloser Fortschritt im Kampf um Energieeffizienz ist ... Die Wahrheit ist jedoch, dass der Chip wirklich richtig abgekühlt werden muss .  Das von Texas Instruments angebotene Demo-Board enthält zwei große Bodenebenen mit einer Dicke von 2 Unzen auf beiden Seiten.  Die Wärmeübertragung über die Schichten wird durch sechs Durchgangslöcher direkt unter dem Chipboden (wo sich ein Wärmeableitungsstift befindet) sichergestellt.  Ein solches Layout macht es etwas schwieriger, ein DIY-Board herzustellen, daher muss ich es natürlich bei einem chinesischen Hersteller bestellen.  Mistkerl! <br><br>  Um den Treiber und den Vorverstärker mit Strom zu versorgen, nehmen wir die ungeregelte 12-V-Spannung von der zweiten Spule des LLC-Wandlers.  Die Stromaufnahme auf dem Rest der Platine ist vernachlässigbar. Um den 5-V-Controller mit Strom zu versorgen und das LCD-Display zu beleuchten, verwenden wir den im Inland hergestellten Linearregler KR142EN5A, während die 3,3-V-Leitung für die MCU durch geregelt wird das winzige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LD2985</a> . <br><br>  Um die Netzspannung auf die erforderlichen 30 V und 12 V zu reduzieren, verwenden wir einen LLC-Wandler, der auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LCS708HG-</a> Chip basiert. <br><br><img src="https://habrastorage.org/webt/65/l8/ed/65l8edk_ucvq50zsc5hf2jbxxp8.jpeg"><br><br>  Ich bin sicher, dass viele Leser mehr über LLC-Konverter erfahren möchten, daher werde ich das Funktionsprinzip ausführlicher erläutern.  Die LLC ist kein Akronym, da diese Buchstaben für „Induktor-Induktor-Kondensator“ stehen und kurz gesagt das elektrische Design für den Anschluss der Primärwicklung eines Transformators implementieren.  Der Punkt ist, dass manchmal ein Teil des von der Primärwicklung erzeugten Flusses nicht mit der Sekundärwicklung verbunden ist, was eine sogenannte Streuinduktivität verursacht - Streuinduktivität, die die akkumulierte Energie nicht auf den Sekundärkreis übertragen kann.  Bei Standard-Sperrwandlern muss diese Energie an Entstörern oder Dämpfungswiderständen abgeführt werden. Daher sind Transformatoren (oder insbesondere Doppelspulendrosseln) normalerweise so ausgelegt, dass die Streuinduktivität so weit wie möglich reduziert wird.  Bei LLCs sieht das jedoch ganz anders aus. <br><br>  In einem Resonanzwandler erzeugt die Streuinduktivität in Kombination mit der Kapazität, die seriell mit der Primärwicklung verbunden ist, einen Tankkreis, der zwei wichtige Probleme löst.  Erstens schaltet es die Ausgangs-Hochspannungstransistoren des Wandlers auf Spannungswerte nahe Null (das sogenannte Zero Voltage Switching, ZVS), wodurch die durch das Schalten verursachten Energieverluste erheblich reduziert werden.  Zweitens fließt die im entkoppelten Induktor akkumulierte Energie zurück in die Schaltung, so dass bei Dämpfern keine Notwendigkeit mehr besteht, da tatsächlich kein Energieverlust auftritt.  In seinem Anwendungshinweis AN-55 bietet Power Integrations einen detaillierten Überblick über die Konstruktion eines Transformators zur Erhöhung seiner Streuinduktivität (dies ist erforderlich, um die richtige Transformatorkennlinie sicherzustellen).  Ich habe zum Beispiel Primär- und Sekundärwindungen in zwei verschiedenen Abschnitten weit auseinander gewickelt: <br><br><img src="https://habrastorage.org/webt/7i/iu/z-/7iiuz-igqg1rhgqisg31neowkm8.jpeg"><br><br>  Im Allgemeinen führt ein derart ausgefallenes Layoutdesign zu einem sehr anständigen Wirkungsgrad, z. B. liefert ein LCS708HG-Chip ohne Kühlkörper trotz seiner Miniaturgröße eine Ausgangsleistung von etwa 200 W!  Dies ist ein wirklich herausragendes Ergebnis, das Sie jedoch nur erreichen können, wenn Sie genau mit der Eigenresonanzfrequenz des Ausgangsstromkreises arbeiten.  Hier liegt der Haken. <br><br>  In diesem Fall wird die Ausgangsspannung durch Ändern der Pulsfrequenz und nicht des Pulsverhältnisses geregelt, und die Regelung erfolgt in einem sehr engen Spannungsbereich - etwa ± 15%.  Außerdem verschiebt sich die Umwandlungsfrequenz in Reaktion auf die Schwankungen der Eingangsspannung von ihrem Nennwert weg von der Resonanz, wodurch den Transistoren im Inneren des Chips der Hartschaltmodus auferlegt wird, wodurch sie stark erwärmt werden.  Tatsächlich muss der Wandler an seinem Eingang eine geregelte Spannung empfangen! <br><br>  Bei werkseitig hergestellten Produkten sind die Wandler an ihrem Eingang mit aktiven Leistungsfaktorkorrekturen (APFCs) ausgestattet, die neben der tatsächlichen Korrektur der Leistung auch eine Ausgangsspannung von etwa 380 bis 390 V aufrechterhalten.  Aber schließlich haben wir es hier mit einem DIY-Design zu tun. Lassen Sie uns also einen kleinen Schluckauf wie die Empfindlichkeit für die Qualität der Netzleistung selig ignorieren.  Basierend auf den Berechnungen und unter Berücksichtigung der Spannungspulsation bei Pufferkapazität liegt die Eingangsspannung im Bereich von ungefähr 230 V ± 10%. Wenn das Stromnetz also innerhalb der Standards arbeitet, wird alles reibungslos funktionieren.  Lassen wir es vorerst dort. <br><br>  Wir werden den Rest des Konverterdesigns aus dem entsprechenden Datenblatt kopieren.  Ich würde mich wahrscheinlich nur auf den Resonanzkondensator konzentrieren - diese scheinbar unkomplizierte Komponente.  Wenn Sie sich jemals gefragt haben, was der Unterschied zwischen Polypropylen-Filmkondensatoren und Polyethylenterephthalat (PET) -Filmkondensatoren ist, ist hier die Antwort: Die ersteren haben einen zehnmal geringeren Verlustfaktor.  Genau deshalb verursachte mein Versuch, das sperrige K78-2 (ein anderes im Inland hergestelltes Produkt) durch ein billigeres und kleineres PET-Modell K73-17 zu ersetzen, ein merkwürdiges Verhalten: Der Kondensator wurde überhitzt und erzeugte verdächtiges Knistern.  Interessant. <br><br>  Die Chips der HiperLCS-Serie benötigen eine dedizierte 12-V-Stromversorgungsleitung.  Um die Mühe des Spielens mit einer zusätzlichen Wicklung, einem Gleichrichter und Anlaufschaltungen zu vermeiden, bleiben wir beim Lehrbuch.  Die erforderliche Spannung erhalten wir von einem separaten winzigen Wandler auf einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LNK304-</a> Chip.  Das Hauptmerkmal ist das transformatorfreie Design, da der einzige Induktor, den wir benötigen, eine billige werkseitig hergestellte Drossel ist.  Der maximale Ausgangsstrom bleibt in einem kleinen Bereich von etwa 100 mA, und die Einfachheit des Designs sowie die Möglichkeit, die Anzahl der Komponenten auf ein Minimum zu beschränken, machen ihn zu einer attraktiven Lösung (während die Anzahl der Wandler pro Quadratzoll Oberfläche beginnt um auf die Nerven zu gehen. Der Gott der Konverter verlangt mehr von ihnen!) <br><br><h4>  Gehirn </h4><br>  Nun, nur noch ein paar Dinge zu tun.  Die Originalstation verfügt über ein LCD, das für den von Ihnen gezahlten Preis eine Ähnlichkeit mit der Ausgangsleistung anzeigt.  Machen wir etwas Ähnliches: Wir nehmen den STM32F030-Controller in seiner Mindestkonfiguration (in einem TSSOP-20-Paket).  Einer der Eingänge des A / D-Wandlers misst die Versorgungsspannung der Ausgangsstufe im HF-Generator, während der andere Eingang den Strom misst.  Um eine Unterbrechung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erdungskreises</a> zu vermeiden, werden wir den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stromerfassungswiderstand</a> an den positiven Draht anschließen und eine Pegelverschiebung mithilfe des speziellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">INA138-</a> Chips <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">implementieren</a> , der in seinen glorreichen Tagen von Burr-Brown entworfen wurde.  Verwenden Sie zum Anzeigen von Informationen eine Text-OLED mit einer 16x2-Auflösung von WinStar.  Das war's auf den Punkt gebracht.  Warten Sie, wir haben einen Prozessor-Pin nicht belegt.  Nun, dann soll eine LED blinken.  Frag mich nicht warum. <br><br>  Die Controller-Firmware wurde mit STM32CubeMX und der kostenlosen Version von IAR Embedded Workbench in C-Sprache geschrieben.  Der Code ist ziemlich trivial.  Beim Ankreuzen des System-Timers liest die Hauptschleife einmal in 300 ms Daten von den beiden Kanälen des A / D-Wandlers, multipliziert sie und sendet sie als Leistungsmessung an das Display.  Am unteren Bildschirmrand wird der Leistungswert in einer Leiste angezeigt, die mit benutzerdefinierten Schriftarten gerendert wird.  Beim Ausschalten der Lötspitze stoppt der vom Ausgang des Lastdetektors kommende Handler des Interrupts den Referenzzeitgeber des HF-Oszillators.  Um ein Einfrieren oder einen Fehler in der MCU zu vermeiden, habe ich Handler für Hardwarefehler und die Watchdog-Timersignale hinzugefügt.  Die Firmware verwendet auch die CSS-Technologie (Clock Security System), die im Falle einer Feuchtigkeit in den Schwingungen des Primärkristallresonators auf den eingebauten RC-Oszillator umschaltet und den Mikrocontroller neu startet.  Die Gesamtgröße der Firmware beträgt 10 KB.  Ich habe den Quellcode der Firmware zusammen mit den anderen Projektdateien auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> hochgeladen, damit die Neugierigsten von Ihnen einen Blick darauf werfen können (aber erwarten Sie dort nichts Außergewöhnliches). <br><br><h4>  Layout </h4><br><div class="spoiler">  <b class="spoiler_title">Das Gerät enthält mehrere maßgeschneiderte Spulen</b> <div class="spoiler_text"><ul><li>  MOSFET-Drain-Drosseln und der Stromwandler wurden auf einem HF-Ferrit-Ringkern von 16 x 8 x 6 mm mit einer Permeabilität von 50 gewickelt. Es ist in Ordnung, 0,6 mm-Lackdraht zu verwenden, Drosseln haben 15 Windungen, Stromwandler - 2 x 14 Windungen; </li><li>  Der kernlose Induktor hat 10 Windungen aus 0,6 mm Draht, die gleichmäßig über eine Länge von 10 mm verteilt sind.  Der Innendurchmesser beträgt 5 mm; </li><li>  Der Haupttransformator basiert auf einem kleinen EFD25-Kern aus N87-Epcos-Material.  Ich habe an jedem Bein einen Abstand von 0,2 mm hinzugefügt, indem ich zwei Schichten Notizpapier eingelegt habe.  Das ergibt insgesamt einen Abstand von 0,4 mm.  Für die Primärwicklung (33 Windungen) und die erste Sekundärwicklung (2x6 Windungen) wird der dreifach isolierte Litzendraht mit einer Größe von 100/46 bzw. 175/46 verwendet (hier ist die erste Zahl die Drahtanzahl und die zweite der AWG-Durchmesser).  Die zweite sekundäre 10-V-Wicklung hat zwei Windungen eines geeigneten flexiblen Litzendrahtes (ich habe einen PTFE-isolierten verwendet). </li></ul></div></div><br>  Die Berechnungen für alle Komponenten des LLC-Wandlers, einschließlich der Induktivitätswerte der Transformatorwicklungen, sind in der dem Projekt beigefügten Layoutdatei enthalten, die Sie mit PI Xls Designer anzeigen können.  Ich habe auch alle Datenblätter für die elektronischen Teile, die ich im Projekt verwendet habe, beigefügt, LTspice-Modelle einiger Teile der Schaltung hochgeladen und natürlich ein paar Fotos. <br><br>  Das Ergebnis des oben beschriebenen Entwurfs ist das folgende elektrische Schaltbild: <br><br> <a href=""><img src="https://habrastorage.org/webt/6a/bn/p0/6abnp0p3g-16iu0umf5eq4eo3zq.png"></a> <br><br>  Das Diagramm und das Leiterplattenlayout wurden mit DipTrace erstellt, wobei die Zeichnungen für den weiteren Versand an die Produktionsstätte in das Gerber-Format konvertiert wurden.  Das PCB-Layout passt genau in das Gerätegehäuse, wobei eine gesamte Schicht mit einer Masseebene bedeckt ist, um zerbrechliche Niedrigstromschaltungen abzuschirmen.  Ein solches Layout erleichtert die Herstellung der Platte zu Hause erheblich, da keine genaue Ausrichtung der Fotovorlagen erforderlich ist: Sie können fast die gesamte Rückseite der Platte mit einer festen Ebene füllen und dann mit einem dicken Bohrer Lochschrägen erstellen um die Stifte, die nicht geerdet werden müssen. <br><br><img src="https://habrastorage.org/webt/py/hr/jg/pyhrjgytrdz7antf8jetd_xzu-4.jpeg"><br><br><img src="https://habrastorage.org/webt/rv/-a/nv/rv-anvkpggckyvycywv2kgr8bja.jpeg"><br><br>  Da einige im Design verwendete HF-Teile viel Funkrauschen abgeben und die Leistungskomponenten leicht überhitzt werden, wähle ich natürlich Aluminium für das Gehäuse.  Ich werde einen ungefähr passenden Fall G0476 aus Gaintas Katalog auswählen.  Wir werden ein Fenster im Fall für die OLED mit einem Drehwerkzeug ausschneiden.  Wir werden dann das Gehäuse zusammen mit der Abschirmung des Lötkabels und der Leiterplattenerdung direkt mit dem Erdungskabel des Stromkabels verbinden. <br><br>  Leider kam mir die Idee, eine kontrastreichere OLED anstelle eines LCD anzuschließen, gut, nachdem ich meinen PCB-Auftrag an die Produktionsstätte gesendet hatte.  Die Eingangs-CMOS-Pegel einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WEH001602AGPP5N00001-</a> OLED von WinStar unterscheiden sich von den Standard-TTL-Pegeln eines LCD-Bildschirms wird hier nicht funktionieren.  Ich musste das Display über ein separates Kabel an eine 3,3-V-Leitung anschließen. <br><br>  Um das Rauschen zu reduzieren, habe ich 390 Ohm Interferenzunterdrückungswiderstände in den Bus eingebaut, der die Leiterplatte und das Display verbindet, und den Mikrocontroller mit einer Kupferfolienabdeckung abgedeckt.  Im Normalbetrieb muss der Programmierstecker mit einer Buchse abgedeckt sein, die die Debug-Pins direkt und den NRST-Pin - über einen Kondensator - erdet. <br><br>  Am Ende erhielt mein Gerät sein endgültiges Aussehen: <br><br><img src="https://habrastorage.org/webt/dp/pj/ay/dppjaykwjjd0xym_k3nxxe5n4g4.jpeg"><br><br>  Hier ist das resultierende Verfahren zum Aufheizen des Lötkolbens: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/odTL6zllHzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Fazit </h4><br>  Lassen Sie uns nun die Ausgaben für dieses kleine Stück Spaß zusammenfassen: <br><br>  Elektronische Komponenten - ungefähr 50 US-Dollar (die teuersten waren der HiperLCS-Chip für 15 US-Dollar und die OLED für 10 US-Dollar); <br>  Leiterplattenherstellung, Kosten pro 10 Stück  - etwas mehr als 40 USD; <br>  Fall - 8 $. <br><br>  Die <b>Gesamtkosten</b> des eigentlichen Hochfrequenznetzteils beliefen sich auf rund 100 US-Dollar.  Ich habe auch für einen Lötkolben mit einem Arbeitsständer (170 USD) und zwei Patronen (100 USD) bezahlt. <br><br>  Ich könnte natürlich die Ausgaben bis zu einem gewissen Grad optimieren, zum Beispiel hat eBay eine breite Palette an gebrauchten Metcal-Teilen. In diesem Fall handelt es sich nur um ein paar zehn Dollar, aber das ist wahrscheinlich eine Frage der persönlichen Präferenz. <br><br><h4>  Errata </h4><br><ol><li>  Das Kristalllastkondensatornetzwerk wurde falsch geroutet und reagiert sehr empfindlich auf HF-Rauschen.  Der richtige Weg ist <a href="">das</a> .  Vielen Dank an Alexander Chulkin für diese wichtige Verbesserung. </li><li>  Die Möglichkeit, das Kabel des Lötkolbens von einer Betriebsstation zu trennen, wird nicht unterstützt, da der Mikrocontroller manchmal neu gestartet werden kann.  Es lohnt sich, die Einführung einer zusätzlichen Abschirmung des HF-Teils in Betracht zu ziehen (ich bin mir jedoch nicht 100% sicher). </li></ol><br><h4>  Schlussfolgerungen </h4><br>  Lassen Sie mich nun das ultimative Ziel, das ich mit diesem Projekt verfolgt habe, mit Ihnen teilen - die Erfahrung, die ich durch die Arbeit mit dem Gerät bekomme.  Es fühlt sich an, als würde man einen sehr starken und glühenden Lötkolben verwenden, während man ein kleines und leichtes Werkzeug in den Händen hält.  Ob es das Geld und die Mühe wert war, ist schwer zu sagen.  Ich werde die Frage offen lassen. <br><br><img src="https://habrastorage.org/webt/gy/uj/vn/gyujvninztoywjpa9ruzoae0dts.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de451246/">https://habr.com/ru/post/de451246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de451226/index.html">Neues Leben alter Spiele: das offenste Quellverzeichnis der Quellports (Java + PHP)</a></li>
<li><a href="../de451230/index.html">Fünf Fehler, die Menschen bei der Vorbereitung auf die US-Arbeitsmigration machen</a></li>
<li><a href="../de451232/index.html">Die Verwendung des kontinuierlichen Finanzierungsmodells beim Crowdfunding</a></li>
<li><a href="../de451240/index.html">Warum ich Go-Schnittstellen mag</a></li>
<li><a href="../de451242/index.html">MMORPG alleine (2d Stalker)</a></li>
<li><a href="../de451248/index.html">Die dunkle Seite der Hackathons</a></li>
<li><a href="../de451252/index.html">Sollten Strings in Python iterierbar sein?</a></li>
<li><a href="../de451254/index.html">Kategorie: Unboxing Eisen IaaS-Anbieter</a></li>
<li><a href="../de451256/index.html">Was ist ein ideales Berichtssystem? Ist es realistisch zu verstehen, was im Unternehmen passiert?</a></li>
<li><a href="../de451258/index.html">Fang mich, wenn du kannst. Brief des Managers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>