<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐳 👩🏽‍✈️ 🕴🏾 Schreiben einer mehrsprachigen Anwendung auf React Native 😤 ⏬ 👩🏻‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Lokalisierung von Produkten ist sehr wichtig für internationale Unternehmen, die neue Länder und Regionen erkunden. Ebenso ist eine Lokalisierung ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben einer mehrsprachigen Anwendung auf React Native</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/459741/"><img src="https://habrastorage.org/getpro/habr/post_images/d65/2b6/19e/d652b619e61aaf2d1216f0f94ab533b2.jpg"><br><br>  Die Lokalisierung von Produkten ist sehr wichtig für internationale Unternehmen, die neue Länder und Regionen erkunden.  Ebenso ist eine Lokalisierung für mobile Anwendungen erforderlich.  Wenn ein Entwickler mit der internationalen Expansion beginnt, ist es wichtig, Benutzern aus einem anderen Land die Möglichkeit zu geben, mit der Benutzeroberfläche in ihrer Muttersprache zu arbeiten.  In diesem Artikel erstellen wir eine React Native-Anwendung mit dem Paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">react-native-localize</a> . <br><a name="habracut"></a><br><blockquote>  <b>Skillbox empfiehlt:</b> Der Online-Schulungskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Profession Java-Entwickler"</a> . <br>  <b>Wir erinnern Sie daran:</b> <i>Für alle Leser von „Habr“ - ein Rabatt von 10.000 Rubel bei der Anmeldung für einen Skillbox-Kurs mit dem Promo-Code „Habr“.</i> </blockquote><br><h3>  Werkzeuge und Fähigkeiten </h3><br>  Um diesen Artikel zu verstehen, benötigen Sie grundlegende React Native-Kenntnisse.  Um sich mit den Einstellungen der Arbeitsmaschine vertraut zu machen, können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die offiziellen Anweisungen verwenden</a> . <br><br>  Wir benötigen diese Versionen von Software-Tools: <br><ul><li>  Knoten v10.15.0 </li><li>  npm 6.4.1 </li><li>  Garn 1.16.0 </li><li>  reaktionsnativ 0,59,9 </li><li>  React-Native-Localize 1.1.3 </li><li>  i18n-js 3.3.0 </li></ul><br><h3>  Erste Schritte </h3><br>  Wir werden eine Anwendung erstellen, die Englisch, Französisch und Arabisch unterstützt.  Erstellen Sie zunächst ein neues Projekt mit react-native-cli.  Dazu müssen Sie im Terminal Folgendes eingeben: <br><br>  <i>$ react-native init multiLanguage</i> <i><br></i>  <i>$ cd multiLanguage</i> <br><br>  <b>Fügen Sie die erforderlichen Bibliotheken hinzu</b> <br><br>  Der erste Schritt besteht darin, react-native-localize zu installieren, indem Sie Folgendes eingeben: <br>  $ yarn add reag-native-localize <br><br>  Wenn während des Installationsvorgangs Probleme auftreten, lesen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Installationshandbuch</a> . <br><br>  Die React-Native-Localize-Bibliothek ermöglicht dem Entwickler den Zugriff auf mehrsprachige Funktionen.  Aber sie braucht eine andere Bibliothek - i18n. <br><br>  Dieser Artikel beschreibt die Verwendung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">I18n.js</a> zur Bereitstellung von JavaScript-Übersetzungen. <br><br>  <i>$ Garn hinzufügen i18n-js</i> <br><br>  Nun, da i18n-js kein Caching oder Memoization bietet, empfehle ich, hierfür lodash.memoize zu verwenden: <br><br>  <i>$ yarn add lodash.memoize</i> <br><br>  <b>Arbeite mit Übersetzungen</b> <br><br>  Damit die Anwendung geschickt mit anderen Sprachen arbeiten kann, müssen Sie zuerst das Übersetzungsverzeichnis in src und dann drei JSON-Dateien für jede der Sprachen erstellen. <br><br>  1. en.json für Englisch; <br><br>  2. fr.json für Französisch; <br><br>  3. ar.json für Arabisch. <br><br>  Diese Dateien enthalten JSON-Objekte mit Schlüsseln und Werten.  Der Schlüssel ist für jede Sprache gleich.  Es wird von der Anwendung verwendet, um Textinformationen anzuzeigen. <br><br>  Der Wert ist der Text, der dem Benutzer angezeigt werden soll. <br><br>  Englische Sprache: <br><br>  <i>{"Hallo": "Hallo Welt!"}</i> <br><br>  Französisch <br><br>  <i>{"Hallo": "Salut le Monde!"}</i> <br><br>  Arabisch <br><br>  <i>{"Hallo": "أهلاً بالعالم"}</i> <br><br>  Andere Sprachen können auf die gleiche Weise hinzugefügt werden. <br><br><h3>  Hauptcode </h3><br>  Zu diesem Zeitpunkt müssen Sie die Datei App.js öffnen und den Import hinzufügen: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> RNLocalize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-native-localize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> i18n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"i18n-js"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> memoize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"lodash.memoize"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Use for caching/memoize for better performance import { I18nManager, SafeAreaView, ScrollView, StyleSheet, Text, View } from "react-native";</span></span></code> </pre> <br>  Danach werden Hilfsfunktionen und Konstanten hinzugefügt, die später nützlich sind. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> translationGetters = { <span class="hljs-comment"><span class="hljs-comment">// lazy requires (metro bundler does not support symlinks) ar: () =&gt; require("./src/translations/ar.json"), en: () =&gt; require("./src/translations/en.json"), fr: () =&gt; require("./src/translations/fr.json") }; const translate = memoize( (key, config) =&gt; i18n.t(key, config), (key, config) =&gt; (config ? key + JSON.stringify(config) : key) ); const setI18nConfig = () =&gt; { // fallback if no available language fits const fallback = { languageTag: "en", isRTL: false }; const { languageTag, isRTL } = RNLocalize.findBestAvailableLanguage(Object.keys(translationGetters)) || fallback; // clear translation cache translate.cache.clear(); // update layout direction I18nManager.forceRTL(isRTL); // set i18n-js config i18n.translations = { [languageTag]: translationGetters[languageTag]() }; i18n.locale = languageTag; };</span></span></code> </pre> <br>  Nun erstellen Sie eine Komponente der App-Klasse: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); setI18nConfig(); <span class="hljs-comment"><span class="hljs-comment">// set initial config } componentDidMount() { RNLocalize.addEventListener("change", this.handleLocalizationChange); } componentWillUnmount() { RNLocalize.removeEventListener("change", this.handleLocalizationChange); } handleLocalizationChange = () =&gt; { setI18nConfig(); this.forceUpdate(); }; render() { return ( &lt;SafeAreaView style={styles.safeArea}&gt; &lt;Text style={styles.value}&gt;{translate("hello")}&lt;/Text&gt; &lt;/SafeAreaView&gt; ); } } const styles = StyleSheet.create({ safeArea: { backgroundColor: "white", flex: 1, alignItems: "center", justifyContent: "center" }, value: { fontSize: 18 } });</span></span></code> </pre> <br>  Das erste Element - setI18nConfig () - legt die Erstkonfiguration fest. <br><br>  Dann müssen Sie den Komponenten-Listener zu componentDidMount () hinzufügen. Dieses Element verfolgt Aktualisierungen und ruft handleLocalizationChange () auf, wenn sie auftreten. <br><br>  Die handleLocalizationChange () -Methode aktiviert setI18nConfig () und forceUpdate ().  Dies ist für Android-Geräte erforderlich, da die Komponente gerendert werden muss, damit die Änderungen spürbar werden. <br><br>  Dann müssen Sie das Abhören aus der componentWillUnmount () -Methode entfernen. <br><br>  Schließlich wird Hallo in render () zurückgegeben, indem translate () verwendet und der Schlüsselparameter hinzugefügt wird.  Nach diesen Aktionen kann die Anwendung "verstehen", welche Sprache benötigt wird, und Meldungen darauf anzeigen. <br><br><h3>  Anwendungsstart </h3><br>  Jetzt ist es an der Zeit zu überprüfen, wie die Übersetzung funktioniert. <br><br>  Führen Sie die Anwendung zunächst in einem Simulator oder Emulator aus und geben Sie ein <br><br>  <i>$ react-native run-ios</i> <i><br></i>  <i>$ React-Native Run-Android</i> <i><br></i> <br>  Es wird ungefähr so ​​aussehen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93c/bdd/af4/93cbddaf4e8c5d7858ee28226eae2a3b.png"><br><br>  Jetzt können Sie versuchen, die Sprache in Französisch zu ändern und dann die Anwendung zu starten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65d/c0b/059/65dc0b0595cbfda55b1c0e9613025a92.png"><br><br>  Wir machen dasselbe mit der arabischen Sprache, es gibt keinen Unterschied. <br><br>  So weit, so gut. <br><br>  Aber was passiert, wenn Sie eine zufällige Sprache auswählen, deren Übersetzung nicht in der Anwendung enthalten ist? <br><br>  Es stellt sich heraus, dass die Aufgabe von findBestLanguage darin besteht, die optimale Übersetzung aller verfügbaren zu liefern.  Infolgedessen wird die Standardsprache angezeigt. <br><br>  Es geht um Telefoneinstellungen.  So können Sie beispielsweise im iOS-Emulator die Reihenfolge der Sprachen anzeigen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c41/949/da6/c41949da6517781477d3d6fb96cab82c.png"><br><br>  Wenn die ausgewählte Sprache nicht bevorzugt wird, gibt findBestAvailableLanguage undefiniert zurück, sodass die Standardsprache angezeigt wird. <br><br><h3>  Bonus </h3><br>  React-native-localize verfügt über eine API, die den Zugriff auf eine große Anzahl von Sprachelementen ermöglicht.  Bevor Sie beginnen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sollten Sie sich mit der Dokumentation vertraut machen</a> . <br><br><h3>  Schlussfolgerungen </h3><br>  Die Anwendung kann problemlos mehrsprachig gestaltet werden.  React-native-localize ist eine großartige Option, mit der Sie den Benutzerkreis der Anwendung erweitern können. <br><br>  Der Quellcode des Projekts <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist hier</a> . <br><br><blockquote>  <b>Skillbox empfiehlt:</b> <br><br><ul><li>  Zweijähriger Praktikumskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Ich bin ein PRO-Webentwickler</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"</a> </li><li>  Online-Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"C # -Entwickler von Grund auf neu</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"</a> </li><li>  Praktischer Jahreskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"PHP-Entwickler von 0 bis PRO"</a> . <br></li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de459741/">https://habr.com/ru/post/de459741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de459728/index.html">Smartphone mit der Brise: ZTE Red Magic 3 Bewertung</a></li>
<li><a href="../de459730/index.html">Portierung von Qt auf STM32</a></li>
<li><a href="../de459732/index.html">So wählen Sie eine Open Source-Lizenz für ein RAD-Framework auf GitHub aus</a></li>
<li><a href="../de459734/index.html">Rauchtest eines Release-Kandidaten mit Autotests in 15 Minuten</a></li>
<li><a href="../de459739/index.html">Warum wird Mozilla "der Hauptschurke des Internets" genannt?</a></li>
<li><a href="../de459743/index.html">Mastermind-Gruppe für Unternehmer statt Konferenzen und Schulungen: meine Erfahrung</a></li>
<li><a href="../de459747/index.html">British Airways wird mit einer Geldstrafe von 230 Millionen US-Dollar belegt, wenn Kundendaten verloren gehen</a></li>
<li><a href="../de459751/index.html">Psychoanalyse der Wirkung eines unterschätzten Spezialisten. Teil 1. Wer und warum</a></li>
<li><a href="../de459757/index.html">Funktionaler Ansatz zur Fehlerbehandlung in Dart</a></li>
<li><a href="../de459761/index.html">Wie man ein Elektrofahrrad pflegt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>