<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔛 📨 👨🏾‍🌾 Open Source Java-Bibliothek mit Stacktrace-Filterung, Silent String-Analyse und Versionsvergleich 🕺🏼 😿 🧙🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Während einiger Zeit in verschiedenen Jobs stellte sich heraus, dass ich mehrere Dienstprogramme benötigte, die zu diesem Zeitpunkt nicht verfügbar wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Open Source Java-Bibliothek mit Stacktrace-Filterung, Silent String-Analyse und Versionsvergleich</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> Während einiger Zeit in verschiedenen Jobs stellte sich heraus, dass ich mehrere Dienstprogramme benötigte, die zu diesem Zeitpunkt nicht verfügbar waren.  Und ich sah, dass ich sie immer und immer wieder brauchte.  Also schrieb ich meine eigene kleine Bibliothek, die ich sehr nützlich fand.  Also habe ich es gerade als Open-Source-Java-Bibliothek veröffentlicht. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Hier ist der Github Link</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc online ist hier verfügbar</a> <br><br>  Diese Bibliothek ist auch in Maven Central verfügbar.  Hier sind die Maven-Artefakte (die Version 1.5.0.8 ist die neueste zum Zeitpunkt des Schreibens dieses Artikels, kann sich aber in Zukunft ändern. Um nach der neuesten Version zu suchen, suchen Sie unter <a href="http://search.maven.org/">http: //search.maven</a> nach dem Artefakt "MgntUtils" <a href="http://search.maven.org/">. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Nachfolgend finden Sie nur eine kurze Erklärung dessen, was sich dort befindet.  Die Bibliothek enthält ein (wie ich hoffe) gut geschriebenes JavaDoc mit einer detaillierten Beschreibung.  Hier ist die Liste der Funktionen: <br><a name="habracut"></a><br><h3>  Stacktrace-Rauschfilter </h3><br>  Nach meiner Erfahrung war diese Funktion die allgemeinste und nützlichste für mich.  Stacktrace ist ein Lebensretter beim Debuggen oder Herausfinden von Fehlern in Ihrer Anwendung.  Wenn Sie jedoch auf der Serverseite mit Protokollen arbeiten, können Sie auf einen riesigen Stacktrace stoßen, der das längste nutzlose Ende verschiedener Frameworks und Application Server-Pakete enthält.  Und irgendwo in diesem Stapel befinden sich mehrere Zeilen einer relevanten Spur und sie können sich in verschiedenen Segmenten befinden, die durch nutzlose Informationen voneinander getrennt sind.  Es wird zum Albtraum, nach relevanten Dingen zu suchen.  Hier ist ein Link, der dasselbe Problem mit Beispielen aus der Praxis beschreibt (nicht für schwache Nerven): <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  In meiner Bibliothek gibt es eine Klasse mit dem Namen <i>TextUtils</i> und der Methode <i>getStacktrace ()</i> mit mehreren überladenen Signaturen.  Es nimmt eine Throwable-Instanz an und ermöglicht das Festlegen eines Paketpräfixes der relevanten Pakete. <br><br>  Das gleiche Dienstprogramm (ab Version 1.5.0.3) verfügt auch über die Methode <i>getStacktrace ()</i> , die die Schnittstelle CharSequence anstelle von Throwable verwendet und somit das Filtern und Verkürzen von Stacktraces ermöglicht, die als Zeichenfolge gespeichert sind, genau wie Stacktraces, die aus Throwable extrahiert wurden.  Im Wesentlichen können Stacktraces also zur Laufzeit oder später "on the fly" aus einer beliebigen Textquelle wie einem Protokoll herausgefiltert werden.  (Nur zur Verdeutlichung: Das Dienstprogramm unterstützt nicht das Parsen und Ändern der gesamten Protokolldatei. Es unterstützt nur das Filtern einer Stapelverfolgung, die als Zeichenfolge übergeben wird. Wenn also Ausnahmen in der Protokolldatei gefiltert werden sollen, müssen Sie die Protokolldatei analysieren und Stacktrace (s) als separate Zeichenfolgen extrahieren und dann mit diesem Dienstprogramm die einzelnen Stacktraces filtern. <br><br>  Hier ist ein Anwendungsbeispiel.  Angenommen, Ihr Buchungskreis befindet sich immer in Paketen, die mit "com.plain" beginnen. * Sie legen also ein solches Präfix fest und tun dies <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  Dadurch werden alle nutzlosen Teile des Traces sehr intelligent herausgefiltert, sodass Sie eine sehr präzise Stapelverfolgung erhalten.  Außerdem fand ich es sehr praktisch, das Präfix voreinzustellen und dann einfach die Komfortmethode zu verwenden <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Es wird dasselbe tun.  Um das Präfix voreinzustellen, verwenden Sie einfach die Methode <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Wenn Sie diesen Wert bei der Konfiguration voreinstellen möchten, können Sie ab der Bibliotheksversion 1.1.0.1 die Umgebungsvariable " <b>MGNT_RELEVANT_PACKAGE</b> " oder die Systemeigenschaft " <b>mgnt.relevant.package</b> " auf den Wert " <i>com.plain</i> " und die Eigenschaft setzen wird auf diesen Wert gesetzt, ohne dass Sie die Methode <i>TextUtils.setRelevantPackage ("com.plain.") aufrufen.</i>  explizit in Ihrem Code.  Beachten Sie, dass der Wert der Systemeigenschaft Vorrang vor der Umgebungsvariablen hat, wenn beide festgelegt werden.  Nur eine Erinnerung daran, dass Sie mit der Eigenschaft "System" Folgendes in Ihre Befehlszeile einfügen können: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  Wenn Sie eine frühere Version als 1.1.0.1 dieser Bibliothek verwenden oder die oben genannte Umgebungsvariable oder Systemeigenschaft nicht verwenden möchten und die Spring-Umgebung verwenden, können Sie das Präfix voreinstellen, indem Sie Ihrer Spring-Konfiguration das folgende Segment hinzufügen: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc erklärt alles im Detail.  Aber hier ist ein kleiner Vorgeschmack: Sie erhalten folgenden Stacktrace: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  statt <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Silent String parst in Integer, Long usw </h3><br>  <i>Dieselbe</i> Klasse <i>TextUtils</i> stellt Methoden bereit, mit denen String unbemerkt (ohne Ausnahme, wenn er jemals geworfen wird) in die Typen Double, Long, Integer, Short und Byte zerlegt werden kann.  Die Methoden heißen <i>parseStringToLong (),</i> <i>parseStringToInteger ()</i> usw.  Sie alle vertreten 4 Argumente: <br><br><ol><li>  Ein String, der analysiert werden soll </li><li>  Eine Implementierung von Number (Double, Long, Integer, Short oder Byte) als Standardwert, wenn ein Analyseproblem aufgetreten ist </li><li>  Ein String, der als Fehlermeldung in das Protokoll geschrieben werden soll, wenn das erste Argument null ist (kann null sein, und dann wird kein Fehler gedruckt) </li><li>  Ein String, der als Fehlermeldung ausgegeben werden soll, wenn eine NumberFormatException aufgetreten ist (kann null sein und dann wird kein Fehler ausgegeben) </li></ol><br><h3>  Zeichenfolge nach Zeitintervall analysieren </h3><br>  In derselben Klasse <i>TextUtils</i> gibt es eine Methode <i>parseStringToTimeInterval (String value)</i> .  Diese Methode analysiert eine Zeichenfolge, von der erwartet wird, dass sie einen bestimmten Zeitintervallwert enthält - einen numerischen Wert mit optionalem Suffix für die Zeiteinheit.  Beispielsweise wird die Zeichenfolge "38s" als 38 Sekunden, "24m" - 24 Minuten "4h" - 4 Stunden, "3d" - 3 Tage und "45" als 45 Millisekunden analysiert.  Unterstützte Suffixe sind " <b>s</b> " für Sekunden, " <b>m</b> " für Minuten, " <b>h</b> " für Stunden und " <b>d</b> " für Tage.  Zeichenfolge ohne Suffix enthält einen Wert in Millisekunden.  Bei Suffixen wird die Groß- und Kleinschreibung nicht berücksichtigt.  Wenn der bereitgestellte String ein nicht unterstütztes Suffix enthält oder einen negativen numerischen Wert oder eine Null enthält oder einen nicht numerischen Wert enthält, wird eine IllegalArgumentException ausgelöst.  Diese Methode gibt die TimeInterval-Klasse zurück - eine Klasse, die ebenfalls in dieser Bibliothek definiert ist.  Im Wesentlichen enthält es zwei Eigenschaften mit relevanten Getters und Setters: long "value" und java.util.concurrent.TimeUnit.  Zusätzlich zu Gettern und <i>Setzern</i> verfügt diese Klasse über Methoden <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Diese Methoden geben einen langen Wert in der angegebenen Zeitskala zurück (genauso wie die entsprechenden Methoden in der Klasse <i>java.util.concurrent.TimeUnit</i> ). <br><br>  Diese Methode kann sehr nützlich sein, um Zeitintervalleigenschaften wie Zeitüberschreitungen oder Wartezeiten aus Konfigurationsdateien zu analysieren.  Es eliminiert unnötige Berechnungen von verschiedenen Zeitskalen bis hin zu Millisekunden.  Bedenken Sie, dass Sie eine <b>methodInvokingInterval-</b> Eigenschaft haben, die Sie für 5 Tage <b>festlegen</b> müssen.  Um den Millisekundenwert festzulegen, müssen Sie berechnen, dass 5 Tage 432000000 Millisekunden sind (offensichtlich keine unmögliche Aufgabe, aber ärgerlich und fehleranfällig), und dann muss jeder andere, der den Wert 432000000 sieht, ihn auf 5 zurückrechnen Tage, die frustrierend sind.  Mit dieser Methode haben Sie jedoch einen Eigenschaftswert, der auf "5d" festgelegt ist und den Code aufruft <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  löst Ihr Konvertierungsproblem.  Dies ist natürlich keine übermäßig komplexe Funktion, kann jedoch die Konfigurationsdateien vereinfachen und klarer gestalten und Frustrationen und "blöde" Fehleinschätzungen in Millisekunden-Bugs vermeiden. <br><br><h3>  Versionen vergleichen </h3><br>  Dieses Dienstprogramm ermöglicht die Konvertierung von String in Version und umgekehrt sowie den korrekten Vergleich von Versionen und Versionsbereichen.  Wenn Sie Versionen vergleichen müssen, vergleichen Sie häufig nur Strings.  Nehmen wir also an, die Version "1.5.3" ist größer als die Version "1.3.1".  Wenn Sie jedoch die Zeichenfolgen "1.4.2" und "1.12.3" vergleichen, ist die Zeichenfolge "1.4.2" fälschlicherweise größer.  Dieses Dienstprogramm behebt also ein solches Problem und führt zusätzlich die VersionRange-Klasse ein und ermöglicht Vorgänge in Versionsbereichen.  (Siehe Methoden <i>compareVersions</i> in der Klasse <i>TextUtils</i> und in der Klasse <i>VersionRange.</i> ) <br><br><h3>  String Unicode Konverter </h3><br>  Die Klasse <i>StringUnicodeEncoderDecoder</i> enthält Methoden, die einen String (in einer beliebigen Sprache) in eine Folge von Unicode-Zeichen konvertieren können und umgekehrt.  Beispielsweise wird eine Zeichenfolge "Hello World" in konvertiert <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  und kann wieder hergestellt werden. <br><br><h3>  Lebenszyklus-Management (Fabriken, die sich selbst instanziieren) </h3><br>  Diese Funktion ist ein Paket mit einer kleinen Infrastruktur, die die Arbeit mit Fabriken vereinfacht und automatisiert, die konkrete Implementierungen einer Schnittstelle bereitstellen.  Das Paket enthält nur 2 Klassen: <i>BaseEntityFactory</i> und <i>BaseEntity</i> .  Kurz gesagt: Wenn Sie eine Factory erstellen, die <i>BaseEntityFactory</i> und einige Interfaces mit all ihren konkreten Implementierungen erweitert, die <i>BaseEntity erweitern,</i> wird jede Ihrer <i>Klasseninstanzen</i> der konkreten Implementierungsklasse automatisch in Ihre Factory eingefügt.  Sie müssen sich keine Gedanken darüber machen, wie und wann Sie Ihre Fabrik bevölkern müssen.  Die Infrastruktur erledigt dies für Sie, wenn der Konstruktor Ihrer konkreten Implementierungsklasse aufgerufen wird.  Sie müssen also nur eine beliebige Anzahl konkreter Implementierungsklassen erstellen und sicherstellen, dass für jeden Konstruktor ein Aufruf erfolgt.  Danach können Sie Ihre Factory verwenden, um eine Ihrer konkreten Implementierungsklassen an einer beliebigen Stelle in Ihrem Code abzurufen.  Dies ist eine kurze Erklärung.  Es gibt ein paar Details, aber nicht so viele.  Eine detaillierte Beschreibung dieses Pakets finden Sie in der Javadoc-API des Pakets <b>com.mgnt.lifecycle.management</b> description.  Der Quellcode enthält auch das Paket com.mgnt.lifecycle.management.example, das gut kommentierte und detaillierte Codebeispiele zur Verwendung dieser Funktion enthält. <br><br>  Für den praktischen Gebrauch fand ich es sehr nützlich für das Spring-Framework.  Denken Sie daran, dass Spring während der Initialisierung alle definierten Beans instanziiert.  Wenn wir also im Spring-Kontext unsere konkreten Implementierungen einfach als Spring Beans deklarieren, instanziiert Spring sie für uns und initialisiert so ihre Factory automatisch.  Dies könnte sehr praktisch sein.  Stellen Sie sich vor, Sie haben ein Bean mit einer Eigenschaft des Typs der benutzerdefinierten Schnittstelle, die mehrere Implementierungen aufweist. Welche tatsächliche Implementierung jedoch erforderlich ist, wird zur Laufzeit ermittelt.  Zu diesem Zeitpunkt können Sie also die Methode <i>getInstance (java.lang.String)</i> Ihrer Factory verwenden, um auf die erforderliche Implementierung zuzugreifen.  Auf diese Weise können Sie nicht ALLE Ihre konkreten Instantiierungen in Ihre Bean einfügen, und Sie müssen Spring <i>Bean Factory nicht verwenden,</i> um auf eine von Spring definierte Bean zuzugreifen, da dies die Nicht-Intrusivität von Spring verletzen würde (dh Sie können Komponenten schreiben, von denen keine Abhängigkeit besteht Frühling).  Wenn Sie zu einem späteren Zeitpunkt konkretere Implementierungen hinzufügen müssen, müssen Sie lediglich Ihre Implementierungsklassen zu Ihrem Code hinzufügen und sie als Spring Beans deklarieren.  Den Rest erledigen der Frühling und diese Infrastruktur! <br><br><h3>  Datei-Utils </h3><br>  Mit diesem Dienstprogramm können Sie eine Datei als Zeichenfolge mit oder ohne Angabe eines Zeichensatzes oder als Byte-Array lesen.  Dieses Dienstprogramm verwendet NIO-Paket und Puffer für eine schnellere Leistung.  Die maximale Dateigröße für dieses Dienstprogramm beträgt 2 GB. <br><br><h3>  Zeit util </h3><br>  Dies ist nur eine einfache Methode, die die gleiche Funktionalität wie Thread.sleep () bietet, jedoch nicht verwendet wird.  Dh es "schluckt" IterruptedException.  Außerdem sind zwei Argumente erforderlich: Zeit bis zum Einschlafen und Maßeinheit.  Also statt <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Sie können einfach schreiben: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Ich fand es süß <br><br>  Das ist es also.  Fühlen Sie sich frei, diese Bibliothek herunterzuladen.  Es wird mit einer MIT-Lizenz geliefert - einer der freizügigsten Lizenzen, die mir bekannt sind.  Der Quellcode, Javadoc und die Binärversion sind über den obigen Link verfügbar.  Der Code wurde von JDK 8 kompiliert, enthält jedoch keine Funktionen von Version 8.  Es sollte auf jeden Fall mit Java 7 funktionieren, ich vermute, es wird mit Java 6 und sogar 5 funktionieren, habe es aber nicht mit diesen Versionen getestet.  Verwenden Sie es nach Belieben, teilen Sie es anderen mit, wenn Sie es mögen, und senden Sie mir eine Nachricht an michael_gantman@yahoo.com, wenn Sie Feedback haben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480268/">https://habr.com/ru/post/de480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480256/index.html">Überschreiben von Java-Dateien</a></li>
<li><a href="../de480258/index.html">Reagiere Native Init gegen Expo</a></li>
<li><a href="../de480262/index.html">Java Digest für den 14. Dezember</a></li>
<li><a href="../de480264/index.html">Rückkehr der Solidarität: IT und Freiberufler müssen sich organisieren</a></li>
<li><a href="../de480266/index.html">Die Geschichte des Cloud-Gaming</a></li>
<li><a href="../de480270/index.html">Der Rückgang der Popularität von PHP: Ist es nicht so einfach?</a></li>
<li><a href="../de480272/index.html">Künstliche Intelligenz und die Komplexität des menschlichen Gehirns</a></li>
<li><a href="../de480274/index.html">Alkoholzähler oder Wie man Buffetempfänge überlebt</a></li>
<li><a href="../de480276/index.html">Game Interview: Einstellungsstrategien. Teil I</a></li>
<li><a href="../de480280/index.html">TurboConf-Sicherheitsstudie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>