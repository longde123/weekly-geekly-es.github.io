<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîõ üì® üë®üèæ‚Äçüåæ Open Source Java-Bibliothek mit Stacktrace-Filterung, Silent String-Analyse und Versionsvergleich üï∫üèº üòø üßôüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="W√§hrend einiger Zeit in verschiedenen Jobs stellte sich heraus, dass ich mehrere Dienstprogramme ben√∂tigte, die zu diesem Zeitpunkt nicht verf√ºgbar wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Open Source Java-Bibliothek mit Stacktrace-Filterung, Silent String-Analyse und Versionsvergleich</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> W√§hrend einiger Zeit in verschiedenen Jobs stellte sich heraus, dass ich mehrere Dienstprogramme ben√∂tigte, die zu diesem Zeitpunkt nicht verf√ºgbar waren.  Und ich sah, dass ich sie immer und immer wieder brauchte.  Also schrieb ich meine eigene kleine Bibliothek, die ich sehr n√ºtzlich fand.  Also habe ich es gerade als Open-Source-Java-Bibliothek ver√∂ffentlicht. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Hier ist der Github Link</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc online ist hier verf√ºgbar</a> <br><br>  Diese Bibliothek ist auch in Maven Central verf√ºgbar.  Hier sind die Maven-Artefakte (die Version 1.5.0.8 ist die neueste zum Zeitpunkt des Schreibens dieses Artikels, kann sich aber in Zukunft √§ndern. Um nach der neuesten Version zu suchen, suchen Sie unter <a href="http://search.maven.org/">http: //search.maven</a> nach dem Artefakt "MgntUtils" <a href="http://search.maven.org/">. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Nachfolgend finden Sie nur eine kurze Erkl√§rung dessen, was sich dort befindet.  Die Bibliothek enth√§lt ein (wie ich hoffe) gut geschriebenes JavaDoc mit einer detaillierten Beschreibung.  Hier ist die Liste der Funktionen: <br><a name="habracut"></a><br><h3>  Stacktrace-Rauschfilter </h3><br>  Nach meiner Erfahrung war diese Funktion die allgemeinste und n√ºtzlichste f√ºr mich.  Stacktrace ist ein Lebensretter beim Debuggen oder Herausfinden von Fehlern in Ihrer Anwendung.  Wenn Sie jedoch auf der Serverseite mit Protokollen arbeiten, k√∂nnen Sie auf einen riesigen Stacktrace sto√üen, der das l√§ngste nutzlose Ende verschiedener Frameworks und Application Server-Pakete enth√§lt.  Und irgendwo in diesem Stapel befinden sich mehrere Zeilen einer relevanten Spur und sie k√∂nnen sich in verschiedenen Segmenten befinden, die durch nutzlose Informationen voneinander getrennt sind.  Es wird zum Albtraum, nach relevanten Dingen zu suchen.  Hier ist ein Link, der dasselbe Problem mit Beispielen aus der Praxis beschreibt (nicht f√ºr schwache Nerven): <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  In meiner Bibliothek gibt es eine Klasse mit dem Namen <i>TextUtils</i> und der Methode <i>getStacktrace ()</i> mit mehreren √ºberladenen Signaturen.  Es nimmt eine Throwable-Instanz an und erm√∂glicht das Festlegen eines Paketpr√§fixes der relevanten Pakete. <br><br>  Das gleiche Dienstprogramm (ab Version 1.5.0.3) verf√ºgt auch √ºber die Methode <i>getStacktrace ()</i> , die die Schnittstelle CharSequence anstelle von Throwable verwendet und somit das Filtern und Verk√ºrzen von Stacktraces erm√∂glicht, die als Zeichenfolge gespeichert sind, genau wie Stacktraces, die aus Throwable extrahiert wurden.  Im Wesentlichen k√∂nnen Stacktraces also zur Laufzeit oder sp√§ter "on the fly" aus einer beliebigen Textquelle wie einem Protokoll herausgefiltert werden.  (Nur zur Verdeutlichung: Das Dienstprogramm unterst√ºtzt nicht das Parsen und √Ñndern der gesamten Protokolldatei. Es unterst√ºtzt nur das Filtern einer Stapelverfolgung, die als Zeichenfolge √ºbergeben wird. Wenn also Ausnahmen in der Protokolldatei gefiltert werden sollen, m√ºssen Sie die Protokolldatei analysieren und Stacktrace (s) als separate Zeichenfolgen extrahieren und dann mit diesem Dienstprogramm die einzelnen Stacktraces filtern. <br><br>  Hier ist ein Anwendungsbeispiel.  Angenommen, Ihr Buchungskreis befindet sich immer in Paketen, die mit "com.plain" beginnen. * Sie legen also ein solches Pr√§fix fest und tun dies <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  Dadurch werden alle nutzlosen Teile des Traces sehr intelligent herausgefiltert, sodass Sie eine sehr pr√§zise Stapelverfolgung erhalten.  Au√üerdem fand ich es sehr praktisch, das Pr√§fix voreinzustellen und dann einfach die Komfortmethode zu verwenden <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Es wird dasselbe tun.  Um das Pr√§fix voreinzustellen, verwenden Sie einfach die Methode <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Wenn Sie diesen Wert bei der Konfiguration voreinstellen m√∂chten, k√∂nnen Sie ab der Bibliotheksversion 1.1.0.1 die Umgebungsvariable " <b>MGNT_RELEVANT_PACKAGE</b> " oder die Systemeigenschaft " <b>mgnt.relevant.package</b> " auf den Wert " <i>com.plain</i> " und die Eigenschaft setzen wird auf diesen Wert gesetzt, ohne dass Sie die Methode <i>TextUtils.setRelevantPackage ("com.plain.") aufrufen.</i>  explizit in Ihrem Code.  Beachten Sie, dass der Wert der Systemeigenschaft Vorrang vor der Umgebungsvariablen hat, wenn beide festgelegt werden.  Nur eine Erinnerung daran, dass Sie mit der Eigenschaft "System" Folgendes in Ihre Befehlszeile einf√ºgen k√∂nnen: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  Wenn Sie eine fr√ºhere Version als 1.1.0.1 dieser Bibliothek verwenden oder die oben genannte Umgebungsvariable oder Systemeigenschaft nicht verwenden m√∂chten und die Spring-Umgebung verwenden, k√∂nnen Sie das Pr√§fix voreinstellen, indem Sie Ihrer Spring-Konfiguration das folgende Segment hinzuf√ºgen: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc erkl√§rt alles im Detail.  Aber hier ist ein kleiner Vorgeschmack: Sie erhalten folgenden Stacktrace: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  statt <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Silent String parst in Integer, Long usw </h3><br>  <i>Dieselbe</i> Klasse <i>TextUtils</i> stellt Methoden bereit, mit denen String unbemerkt (ohne Ausnahme, wenn er jemals geworfen wird) in die Typen Double, Long, Integer, Short und Byte zerlegt werden kann.  Die Methoden hei√üen <i>parseStringToLong (),</i> <i>parseStringToInteger ()</i> usw.  Sie alle vertreten 4 Argumente: <br><br><ol><li>  Ein String, der analysiert werden soll </li><li>  Eine Implementierung von Number (Double, Long, Integer, Short oder Byte) als Standardwert, wenn ein Analyseproblem aufgetreten ist </li><li>  Ein String, der als Fehlermeldung in das Protokoll geschrieben werden soll, wenn das erste Argument null ist (kann null sein, und dann wird kein Fehler gedruckt) </li><li>  Ein String, der als Fehlermeldung ausgegeben werden soll, wenn eine NumberFormatException aufgetreten ist (kann null sein und dann wird kein Fehler ausgegeben) </li></ol><br><h3>  Zeichenfolge nach Zeitintervall analysieren </h3><br>  In derselben Klasse <i>TextUtils</i> gibt es eine Methode <i>parseStringToTimeInterval (String value)</i> .  Diese Methode analysiert eine Zeichenfolge, von der erwartet wird, dass sie einen bestimmten Zeitintervallwert enth√§lt - einen numerischen Wert mit optionalem Suffix f√ºr die Zeiteinheit.  Beispielsweise wird die Zeichenfolge "38s" als 38 Sekunden, "24m" - 24 Minuten "4h" - 4 Stunden, "3d" - 3 Tage und "45" als 45 Millisekunden analysiert.  Unterst√ºtzte Suffixe sind " <b>s</b> " f√ºr Sekunden, " <b>m</b> " f√ºr Minuten, " <b>h</b> " f√ºr Stunden und " <b>d</b> " f√ºr Tage.  Zeichenfolge ohne Suffix enth√§lt einen Wert in Millisekunden.  Bei Suffixen wird die Gro√ü- und Kleinschreibung nicht ber√ºcksichtigt.  Wenn der bereitgestellte String ein nicht unterst√ºtztes Suffix enth√§lt oder einen negativen numerischen Wert oder eine Null enth√§lt oder einen nicht numerischen Wert enth√§lt, wird eine IllegalArgumentException ausgel√∂st.  Diese Methode gibt die TimeInterval-Klasse zur√ºck - eine Klasse, die ebenfalls in dieser Bibliothek definiert ist.  Im Wesentlichen enth√§lt es zwei Eigenschaften mit relevanten Getters und Setters: long "value" und java.util.concurrent.TimeUnit.  Zus√§tzlich zu Gettern und <i>Setzern</i> verf√ºgt diese Klasse √ºber Methoden <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Diese Methoden geben einen langen Wert in der angegebenen Zeitskala zur√ºck (genauso wie die entsprechenden Methoden in der Klasse <i>java.util.concurrent.TimeUnit</i> ). <br><br>  Diese Methode kann sehr n√ºtzlich sein, um Zeitintervalleigenschaften wie Zeit√ºberschreitungen oder Wartezeiten aus Konfigurationsdateien zu analysieren.  Es eliminiert unn√∂tige Berechnungen von verschiedenen Zeitskalen bis hin zu Millisekunden.  Bedenken Sie, dass Sie eine <b>methodInvokingInterval-</b> Eigenschaft haben, die Sie f√ºr 5 Tage <b>festlegen</b> m√ºssen.  Um den Millisekundenwert festzulegen, m√ºssen Sie berechnen, dass 5 Tage 432000000 Millisekunden sind (offensichtlich keine unm√∂gliche Aufgabe, aber √§rgerlich und fehleranf√§llig), und dann muss jeder andere, der den Wert 432000000 sieht, ihn auf 5 zur√ºckrechnen Tage, die frustrierend sind.  Mit dieser Methode haben Sie jedoch einen Eigenschaftswert, der auf "5d" festgelegt ist und den Code aufruft <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  l√∂st Ihr Konvertierungsproblem.  Dies ist nat√ºrlich keine √ºberm√§√üig komplexe Funktion, kann jedoch die Konfigurationsdateien vereinfachen und klarer gestalten und Frustrationen und "bl√∂de" Fehleinsch√§tzungen in Millisekunden-Bugs vermeiden. <br><br><h3>  Versionen vergleichen </h3><br>  Dieses Dienstprogramm erm√∂glicht die Konvertierung von String in Version und umgekehrt sowie den korrekten Vergleich von Versionen und Versionsbereichen.  Wenn Sie Versionen vergleichen m√ºssen, vergleichen Sie h√§ufig nur Strings.  Nehmen wir also an, die Version "1.5.3" ist gr√∂√üer als die Version "1.3.1".  Wenn Sie jedoch die Zeichenfolgen "1.4.2" und "1.12.3" vergleichen, ist die Zeichenfolge "1.4.2" f√§lschlicherweise gr√∂√üer.  Dieses Dienstprogramm behebt also ein solches Problem und f√ºhrt zus√§tzlich die VersionRange-Klasse ein und erm√∂glicht Vorg√§nge in Versionsbereichen.  (Siehe Methoden <i>compareVersions</i> in der Klasse <i>TextUtils</i> und in der Klasse <i>VersionRange.</i> ) <br><br><h3>  String Unicode Konverter </h3><br>  Die Klasse <i>StringUnicodeEncoderDecoder</i> enth√§lt Methoden, die einen String (in einer beliebigen Sprache) in eine Folge von Unicode-Zeichen konvertieren k√∂nnen und umgekehrt.  Beispielsweise wird eine Zeichenfolge "Hello World" in konvertiert <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  und kann wieder hergestellt werden. <br><br><h3>  Lebenszyklus-Management (Fabriken, die sich selbst instanziieren) </h3><br>  Diese Funktion ist ein Paket mit einer kleinen Infrastruktur, die die Arbeit mit Fabriken vereinfacht und automatisiert, die konkrete Implementierungen einer Schnittstelle bereitstellen.  Das Paket enth√§lt nur 2 Klassen: <i>BaseEntityFactory</i> und <i>BaseEntity</i> .  Kurz gesagt: Wenn Sie eine Factory erstellen, die <i>BaseEntityFactory</i> und einige Interfaces mit all ihren konkreten Implementierungen erweitert, die <i>BaseEntity erweitern,</i> wird jede Ihrer <i>Klasseninstanzen</i> der konkreten Implementierungsklasse automatisch in Ihre Factory eingef√ºgt.  Sie m√ºssen sich keine Gedanken dar√ºber machen, wie und wann Sie Ihre Fabrik bev√∂lkern m√ºssen.  Die Infrastruktur erledigt dies f√ºr Sie, wenn der Konstruktor Ihrer konkreten Implementierungsklasse aufgerufen wird.  Sie m√ºssen also nur eine beliebige Anzahl konkreter Implementierungsklassen erstellen und sicherstellen, dass f√ºr jeden Konstruktor ein Aufruf erfolgt.  Danach k√∂nnen Sie Ihre Factory verwenden, um eine Ihrer konkreten Implementierungsklassen an einer beliebigen Stelle in Ihrem Code abzurufen.  Dies ist eine kurze Erkl√§rung.  Es gibt ein paar Details, aber nicht so viele.  Eine detaillierte Beschreibung dieses Pakets finden Sie in der Javadoc-API des Pakets <b>com.mgnt.lifecycle.management</b> description.  Der Quellcode enth√§lt auch das Paket com.mgnt.lifecycle.management.example, das gut kommentierte und detaillierte Codebeispiele zur Verwendung dieser Funktion enth√§lt. <br><br>  F√ºr den praktischen Gebrauch fand ich es sehr n√ºtzlich f√ºr das Spring-Framework.  Denken Sie daran, dass Spring w√§hrend der Initialisierung alle definierten Beans instanziiert.  Wenn wir also im Spring-Kontext unsere konkreten Implementierungen einfach als Spring Beans deklarieren, instanziiert Spring sie f√ºr uns und initialisiert so ihre Factory automatisch.  Dies k√∂nnte sehr praktisch sein.  Stellen Sie sich vor, Sie haben ein Bean mit einer Eigenschaft des Typs der benutzerdefinierten Schnittstelle, die mehrere Implementierungen aufweist. Welche tats√§chliche Implementierung jedoch erforderlich ist, wird zur Laufzeit ermittelt.  Zu diesem Zeitpunkt k√∂nnen Sie also die Methode <i>getInstance (java.lang.String)</i> Ihrer Factory verwenden, um auf die erforderliche Implementierung zuzugreifen.  Auf diese Weise k√∂nnen Sie nicht ALLE Ihre konkreten Instantiierungen in Ihre Bean einf√ºgen, und Sie m√ºssen Spring <i>Bean Factory nicht verwenden,</i> um auf eine von Spring definierte Bean zuzugreifen, da dies die Nicht-Intrusivit√§t von Spring verletzen w√ºrde (dh Sie k√∂nnen Komponenten schreiben, von denen keine Abh√§ngigkeit besteht Fr√ºhling).  Wenn Sie zu einem sp√§teren Zeitpunkt konkretere Implementierungen hinzuf√ºgen m√ºssen, m√ºssen Sie lediglich Ihre Implementierungsklassen zu Ihrem Code hinzuf√ºgen und sie als Spring Beans deklarieren.  Den Rest erledigen der Fr√ºhling und diese Infrastruktur! <br><br><h3>  Datei-Utils </h3><br>  Mit diesem Dienstprogramm k√∂nnen Sie eine Datei als Zeichenfolge mit oder ohne Angabe eines Zeichensatzes oder als Byte-Array lesen.  Dieses Dienstprogramm verwendet NIO-Paket und Puffer f√ºr eine schnellere Leistung.  Die maximale Dateigr√∂√üe f√ºr dieses Dienstprogramm betr√§gt 2 GB. <br><br><h3>  Zeit util </h3><br>  Dies ist nur eine einfache Methode, die die gleiche Funktionalit√§t wie Thread.sleep () bietet, jedoch nicht verwendet wird.  Dh es "schluckt" IterruptedException.  Au√üerdem sind zwei Argumente erforderlich: Zeit bis zum Einschlafen und Ma√üeinheit.  Also statt <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Sie k√∂nnen einfach schreiben: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Ich fand es s√º√ü <br><br>  Das ist es also.  F√ºhlen Sie sich frei, diese Bibliothek herunterzuladen.  Es wird mit einer MIT-Lizenz geliefert - einer der freiz√ºgigsten Lizenzen, die mir bekannt sind.  Der Quellcode, Javadoc und die Bin√§rversion sind √ºber den obigen Link verf√ºgbar.  Der Code wurde von JDK 8 kompiliert, enth√§lt jedoch keine Funktionen von Version 8.  Es sollte auf jeden Fall mit Java 7 funktionieren, ich vermute, es wird mit Java 6 und sogar 5 funktionieren, habe es aber nicht mit diesen Versionen getestet.  Verwenden Sie es nach Belieben, teilen Sie es anderen mit, wenn Sie es m√∂gen, und senden Sie mir eine Nachricht an michael_gantman@yahoo.com, wenn Sie Feedback haben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480268/">https://habr.com/ru/post/de480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480256/index.html">√úberschreiben von Java-Dateien</a></li>
<li><a href="../de480258/index.html">Reagiere Native Init gegen Expo</a></li>
<li><a href="../de480262/index.html">Java Digest f√ºr den 14. Dezember</a></li>
<li><a href="../de480264/index.html">R√ºckkehr der Solidarit√§t: IT und Freiberufler m√ºssen sich organisieren</a></li>
<li><a href="../de480266/index.html">Die Geschichte des Cloud-Gaming</a></li>
<li><a href="../de480270/index.html">Der R√ºckgang der Popularit√§t von PHP: Ist es nicht so einfach?</a></li>
<li><a href="../de480272/index.html">K√ºnstliche Intelligenz und die Komplexit√§t des menschlichen Gehirns</a></li>
<li><a href="../de480274/index.html">Alkoholz√§hler oder Wie man Buffetempf√§nge √ºberlebt</a></li>
<li><a href="../de480276/index.html">Game Interview: Einstellungsstrategien. Teil I</a></li>
<li><a href="../de480280/index.html">TurboConf-Sicherheitsstudie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>