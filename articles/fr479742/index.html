<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÖ ‚úãüèΩ üë®üèº‚Äç‚öñÔ∏è Backyards - un maillage de services automatis√© au-dessus d'une infrastructure multicloud et hybride üßò üçæ üßîüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Testez Backyards sur vos propres clusters: curl https://getbackyards.sh | sh && backyards install -a --run-demo curl https://getbackyards.sh | sh && b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Backyards - un maillage de services automatis√© au-dessus d'une infrastructure multicloud et hybride</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/479742/"><img src="https://habrastorage.org/getpro/habr/post_images/83b/36e/e0b/83b36ee0bc8ba785116ec27befe716bc.png"><br><br><blockquote> Testez Backyards sur vos propres clusters: <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code>  <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code> .  Si vous √™tes int√©ress√©, consultez les <a href="https://banzaicloud.com/blog/backyards-release-1-0/">d√©tails de la derni√®re version</a> . </blockquote><br>  En juin, nous avons <a href="https://banzaicloud.com/blog/istio-the-easy-way/">introduit Backyards</a> , un <b>¬´maillage de service¬ª automatis√©</b> au-dessus de notre <a href="https://github.com/cloud/istio-operator">op√©rateur Istio</a> .  Il simplifie consid√©rablement la gestion du maillage des services dans une infrastructure multicloud et hybride.  Backyards est int√©gr√© √† <b>la plateforme de gestion de conteneurs <a href="https://github.com/banzaicloud/pipeline">Pipeline</a></b> sur Banzai Cloud, mais est √©galement disponible en tant <b>que</b> produit <b>autonome</b> .  Bien s√ªr, l'int√©gration avec Pipeline offre de nombreux avantages sp√©cifiques (comme la <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">gestion d'applications sur plusieurs clouds</a> ), mais Backyards fonctionne sur n'importe quelle installation de Kubernetes. <br><a name="habracut"></a><br>  Dans l' <a href="https://banzaicloud.com/blog/istio-the-easy-way/">annonce Backyards,</a> nous avons discut√© de certaines des principales fonctions: cr√©er un maillage de service en quelques clics, surveiller les applications via une repr√©sentation graphique unique et g√©rer les fonctions Istio √† partir d'une interface utilisateur pratique.  Ensuite, nous avons mentionn√© que la plate-forme est capable de g√©rer les r√©seaux de services multi-clusters Istio dans les d√©ploiements multi-cloud et hybrides. <br><br>  Dans cet article, nous allons examiner de plus pr√®s cette fonctionnalit√© - le <b>maillage de service multi-cluster automatis√©</b> . <br><br><blockquote>  Qu'il s'agisse d'un ou plusieurs clusters, d'un environnement multi-cloud ou hybride, Backyards utilise le m√™me ensemble de fonctionnalit√©s et une interface pratique.  Il est extr√™mement facile de commencer avec un cluster, puis d'√©tendre en quelques clics le maillage de service √† d'autres clusters (multi-cloud ou cloud hybride). </blockquote><br><h1>  La motivation </h1><br>  Les syst√®mes hybrides et multi-cloud p√©n√®trent rapidement dans la vie quotidienne des entreprises.  L'int√©r√™t et la prise de d√©cision ont beaucoup augment√© depuis que Google a introduit <a href="https://cloud.google.com/blog/topics/hybrid-cloud/new-platform-for-managing-applications-in-todays-multi-cloud-world">Anthos</a> en avril de cette ann√©e. <br><br>  Nous avons √©galement remarqu√© une augmentation de cet int√©r√™t dans la plupart des entreprises avec lesquelles nous avons discut√© de ce sujet.  Quelqu'un pr√©f√®re traiter les donn√©es dans ses propres centres de donn√©es, n'acc√©dant aux services cloud qu'aux heures de pointe.  D'autres recherchent constamment les tarifs les plus bas et les meilleures offres des fournisseurs de cloud, n'augmentant la charge de travail que lorsque le prix le permet.  Ils ont tous besoin d'un moyen pratique de se d√©placer entre diff√©rents clouds √† la demande d'un client particulier, en raison de r√©glementations r√©glementaires ou d'exigences commerciales, ainsi que de cr√©er <a href="https://banzaicloud.com/blog/istio-multi-mesh/">plusieurs topologies diff√©rentes</a> au-dessus de cette infrastructure multicloud et hybride. <br><br>  Alors que la demande de solutions hybrides et multi-cluster augmentait, nous avons commenc√© √† penser comment satisfaire les besoins de nos clients. <br><br><blockquote>  Les utilisateurs de pipelines travaillent avec un ou plusieurs nuages.  Cela d√©pend des fonctions sp√©cifiques dont ils ont besoin.  On distingue trois fonctions cl√©s: <br><br><ul><li>  <a href="https://banzaicloud.com/blog/multi-cloud-apps/">Gestion d'applications cloud multiples</a> <br></li><li>  <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">Maillage de services automatis√© bas√© sur Istio au-dessus d'une infrastructure multicloud et hybride</a> <br></li><li>  <a href="https://banzaicloud.com/blog/multi-cloud-fedv2/">D√©ploiement f√©d√©r√© des ressources et des applications via Kubernetes Federation v2</a> </li></ul></blockquote><br><h1>  Contexte </h1><br>  D√®s le d√©but, la plateforme Pipeline a pris en charge la connexion de diff√©rents fournisseurs de cloud √† diff√©rents niveaux (clusters, d√©ploiements et services).  Cela a toujours √©t√© une de nos priorit√©s. <br><br>  Dans le m√™me temps, nous travaillions activement sur Istio.  L' <a href="https://banzaicloud.com/blog/istio-operator/">op√©rateur a d'</a> abord <a href="https://banzaicloud.com/blog/istio-operator/">√©t√©</a> lib√©r√© pour simplifier le d√©ploiement et la gestion d'Istio, puis a <a href="https://banzaicloud.com/tags/federation/">explor√©</a> ses capacit√©s multi-cluster.  En cons√©quence, <b>nous avons cr√©√© Backyards, un produit automatis√© pour les infrastructures multi-cloud et hybrides</b> , int√©gr√© dans Pipeline, avec l'op√©rateur open source Istio. <br><br><h1>  Backyards at Pipeline </h1><br>  <b>Dans Pipeline, vous pouvez installer un maillage de service hybride ou multi-cluster et le g√©rer dans un environnement local ou dans n'importe quelle combinaison des cinq fournisseurs de cloud que nous prenons en charge.</b> <br><br><blockquote>  La fonction de <b>regroupement de clusters</b> (groupe de clusters) vous permet de former des groupes de clusters, √† condition de s√©lectionner un cluster comme principal.  Vous pouvez ensuite les associer √† diverses fonctions, telles que le <code>Multi-cluster Deployment</code> ou le <code>Service Mesh</code> . <br><br>  <code>Multi-cluster Deployment</code> vous permet de d√©ployer l'application simultan√©ment sur plusieurs clusters.  Ici, nous <b>ne</b> nous concentrons <b>pas</b> sur cette fonctionnalit√©, mais elle <b>sera</b> utilis√©e pour d√©ployer facilement l'application sur plusieurs clusters.  En savoir plus √† ce sujet dans <a href="https://banzaicloud.com/blog/multi-cloud-apps/">cet article</a> . <br><br>  Cet article examinera de plus pr√®s la <code>Service Mesh</code> .  Il installe Istio sur le cluster principal et joint automatiquement tous les clusters du groupe √† <a href="https://github.com/banzaicloud/istio-operator">l'</a> aide de <a href="https://github.com/banzaicloud/istio-operator">l'op√©rateur Istio</a> .  Apr√®s cela, vous obtenez une vue intercluster de vos services, et un maillage multicluster du point de vue de la gestion n'est pratiquement pas diff√©rent d'un maillage classique √† cluster unique. </blockquote><br><h1>  Les fonctions </h1><br><h4>  Cr√©ation d'un maillage de service </h4><br>  Commen√ßons par cr√©er un cluster sur AWS √† l'aide de la distribution Kubernetes l√©g√®re et certifi√©e CNCF - <a href="https://github.com/banzaicloud/pke">PKE</a> .  Cr√©ez ensuite un maillage de service Istio sur ce cluster. <br><br><blockquote>  Lors de la cr√©ation d'un maillage de service, un <i>groupe de clusters</i> est √©galement form√© en arri√®re-plan. </blockquote><br>  Apr√®s quelques secondes, la "grille" est install√©e et pr√™te √† l'emploi. <br><br><img src="https://habrastorage.org/webt/y3/in/et/y3inetitm4ngvd4wbcwkzrtpbzw.gif"><br><br><h4>  D√©ploiement d'applications </h4><br>  Nous avons maintenant besoin d'une application de d√©monstration avec des microservices pour montrer les capacit√©s de notre produit.  √Ä des fins de d√©monstration, nous avons cr√©√© un projet <a href="https://github.com/banzaicloud/allspark">AllSpark</a> tr√®s simple et avons √©galement cr√©√© un diagramme Helm avec une configuration pr√©liminaire du d√©ploiement AllSpark, qui simule un syst√®me de r√©servation de billets de cin√©ma.  Tout est fait dans notre <a href="https://banzaicloud.com/blog/chart-repository-service/">service cloud (SaaS) pour les diagrammes de Helm</a> . <br><br>  En utilisant la fonction de <code>Multi-cluster Deployment</code> susmentionn√©e, nous d√©ploierons cette application en acc√©dant √† l'onglet <code>Multi Cluster Deployments</code> dans l'interface utilisateur.  Ajoutez le r√©f√©rentiel <code>https://charts.banzaicloud.io/gh/spotguidetest</code> au Pipeline, puis le diagramme <code>meshdemo</code> et cliquez sur <code>DEPLOY</code> (pour installer tous les composants, assurez-vous que toutes les valeurs sont d√©finies sur <code>true</code> ). <br><br><img src="https://habrastorage.org/webt/xm/el/jy/xmeljy6q3iqbshd48bybu8lqmig.gif"><br><br><blockquote>  Il √©tait possible de choisir un d√©ploiement simple sur un cluster, mais nous avons indiqu√© une option multicluster, qui sera utile plus tard lors de l'utilisation de plusieurs clusters. </blockquote><br><h4>  Pr√©sentation du maillage de service </h4><br>  Si vous revenez √† la liste des mailles de service et cliquez sur le bouton <code>observe</code> , un panneau de contr√¥le appara√Ætra.  Puisqu'il n'y a pas de trafic dans notre application de test, et qu'il n'y a pas de m√©triques dans le syst√®me, ici nous ne verrons pas encore de visualisation.  L'interface a une fonction de <code>test flight</code> qui dirige le trafic vers les points d'extr√©mit√© s√©lectionn√©s.  Si vous cliquez sur le bouton <code>HTTP</code> dans le coin sup√©rieur droit, vous pouvez remplir un formulaire contenant des informations sur le point de terminaison et envoyer du trafic de test √† vos services.  Dans notre exemple, le trafic doit aller au service de premi√®re page sur le port 8080. <br><br>  Apr√®s quelques secondes, un calendrier de vos services appara√Ætra.  Les n≈ìuds sur celui-ci repr√©sentent des services ou des charges de travail, et les fl√®ches repr√©sentent des connexions r√©seau entre diff√©rents services.  Le graphique est bas√© sur les m√©triques Istio qui proviennent de Prom√©th√©e. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a39/7e0/099/a397e00992f49c862bb4fc039328d4cb.png"><br><br><h4>  Cr√©er des clusters suppl√©mentaires </h4><br>  L'extension du maillage de service √† des clusters suppl√©mentaires - m√™me √† partir de plusieurs fournisseurs de cloud diff√©rents - ne prend que quelques clics.  Cr√©ons trois clusters suppl√©mentaires chez trois fournisseurs diff√©rents, c'est plus int√©ressant.  Nous pouvons facilement d√©ployer un autre cluster PKE dans Azure, ainsi que des clusters OKE et GKE. <br><br><img src="https://habrastorage.org/webt/bd/g7/wp/bdg7wpkuagluo5redzodlh3q0ka.gif"><br><br><h4>  Extension de maillage de service </h4><br>  Revenons √† la liste des mailles de service, appuyez sur le bouton <code>RESIZE MESH</code> , puis <code>ADD NEW CLUSTER</code> .  S√©lectionnez les clusters cr√©√©s pr√©c√©demment et appuyez sur le bouton <code>ADD</code> .  C‚Äôest tout. <br><br><img src="https://habrastorage.org/webt/mm/g9/rp/mmg9rp74sdp8hmybk7odulh9yzi.gif"><br><br>  L'expansion peut prendre plusieurs minutes: chaque cluster doit se connecter et atteindre l'√©tat <code>HEALTHY</code> . <br><br><h4>  D√©ploiement d'une application dans plusieurs clusters </h4><br>  Nous avons maintenant un maillage de service sur plusieurs clusters, et la fonction de <code>Multi-cluster Deployment</code> dans Pipeline a √©t√© pr√©c√©demment activ√©e, il est donc facile de d√©ployer nos microservices de d√©monstration sur ces clusters.  Dans ce diagramme Helm particulier, vous pouvez facilement activer et d√©sactiver des composants.  √âtant donn√© que la fonction de <code>Multi-cluster Deployment</code> prend en charge la red√©finition des param√®tres pour chaque cluster, il vous suffit de modifier le d√©ploiement et d'√©tablir quels composants nous voulons ex√©cuter dans quel cluster. <br><br>  Pour le d√©ploiement multi-cluster, nous avons modifi√© les param√®tres de cette fa√ßon: <br><br> <code>PKE  AWS <br> <br> services: true <br> istioresources: true <br> frontpage: true <br> catalog: true <br> bookings: true <br> <br> PKE  Azure <br> <br> services: true <br> moviesv1: true <br> moviesv2: true <br> moviesv3: true <br> <br> OKE <br> <br> services: true <br> payments: true <br> notifications: true <br> <br> GKE <br> <br> services: true <br> analytics: true</code> <br> <br><img src="https://habrastorage.org/webt/hi/zd/1a/hizd1ajvovnzl7nn0cg5dstgtrg.gif"><br><br><h4>  Pr√©sentation du maillage de service sur plusieurs clusters </h4><br>  Encore une fois, s√©lectionnez <code>test flight</code> dans l'interface pour diriger le trafic suppl√©mentaire vers le point de terminaison pr√©c√©demment s√©lectionn√©.  Apr√®s quelques secondes, quelque chose de similaire au graphique ci-dessous appara√Ætra.  Maintenant, notre application est distribu√©e sur <b>quatre</b> clusters chez <b>quatre</b> fournisseurs diff√©rents. <br><br>  <i>Incroyable</i> , non?! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/11a/72c/12a/11a72c12a16805ea697effda2d9d17f9.png"><br><br><h4>  Configuration NRA </h4><br>  Avant de terminer cet article, jetez un ≈ìil au dernier param√®tre: <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">Horizontal Pod Autoscaler</a> .  Sur la page <code>Single-cluster Deployment</code> dans Pipeline, vous pouvez facilement configurer HPA pour n'importe quel d√©ploiement (dans notre cas, <code>analytics-v1</code> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ef/ac0/7ec/1efac07ecb4dc9f722b6b970c8a2647a.png"><br><br>  Lorsque vous installez HPA et envoyez suffisamment de trafic √† vos services pour d√©marrer la mise √† l'√©chelle automatique, vous verrez comment de plus en plus de pods apparaissent dans l'interface correspondant au projet <code>analytics-v1</code> .  Vous verrez √©galement une augmentation du flux de requ√™tes le long des bords du graphique, ce qui se refl√®te dans les nombres et l'√©paisseur des bords. <br><br><img src="https://habrastorage.org/webt/lw/0p/7d/lw0p7dzyj5eq9rtbcaqgc_l53km.gif"><br><br><h1>  R√©sum√© </h1><br><blockquote>  Gr√¢ce √† Backyards at Pipeline, il est facile de configurer un maillage de service hybride ou multi-cluster.  Vous pouvez ensuite d√©ployer, suivre, g√©rer et d√©panner des applications sur plusieurs clusters √† l'aide d'une interface utilisateur pratique. <br><br>  <a href="https://beta.banzaicloud.io/">Essayez-le gratuitement</a> ! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr479742/">https://habr.com/ru/post/fr479742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr479726/index.html">Vladimir aka wowik: ¬´OpenStreetMap a besoin d'id√©es irr√©alisables dans d'autres syst√®mes¬ª</a></li>
<li><a href="../fr479728/index.html">Comment organiser une startup r√©ussie?</a></li>
<li><a href="../fr479732/index.html">Arr√™tez d'√©mettre autre chose comme une fuite de m√©moire</a></li>
<li><a href="../fr479736/index.html">Appareils photo ou lasers</a></li>
<li><a href="../fr479738/index.html">Comme Youtube et Instagram: internationaliser et localiser une application Python</a></li>
<li><a href="../fr479744/index.html">Gestion de la m√©moire Python: un peu sur la fragmentation de la m√©moire</a></li>
<li><a href="../fr479746/index.html">Le logiciel d'entreprise rend vos employ√©s plus cool. En avez-vous besoin?</a></li>
<li><a href="../fr479748/index.html">GoLand 2019.3 avec des performances am√©lior√©es, une prise en charge am√©lior√©e des modules Go et plus</a></li>
<li><a href="../fr479750/index.html">2. Mise en route de Fortinet v 6.0. Architecture de la solution</a></li>
<li><a href="../fr479756/index.html">Donn√©es ouvertes. Roscosmos. Rattrapez l'Am√©rique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>