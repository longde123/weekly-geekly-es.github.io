<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ โ๐ฝ ๐จ๐พโ๐ป ุงุฎุชุจุงุฑุงุช ููุฑูุฒ ูุฑูุฒ ููุงุฎุชุจุงุฑุงุช ๐ฏ๏ธ ๐น โฉ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงููุบุงุช ุงูุฏููุงููููุฉ ุ ูุซู python ู javascript ุ ูู ุงููููู ุงุณุชุจุฏุงู ุงูุทุฑู ูุงููุฆุงุช ูู ุงููุญุฏุงุช ุงูููุทูุฉ ูุจุงุดุฑุฉ ุฃุซูุงุก ุงูุชุดุบูู. ูุฐุง ููุงุณุจ ุฌุฏูุง ููุงุฎุชุจุงุฑุงุช -...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุฎุชุจุงุฑุงุช ููุฑูุฒ ูุฑูุฒ ููุงุฎุชุจุงุฑุงุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452702/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูู ุงููุบุงุช ุงูุฏููุงููููุฉ ุ ูุซู python ู javascript ุ ูู ุงููููู ุงุณุชุจุฏุงู ุงูุทุฑู ูุงููุฆุงุช ูู ุงููุญุฏุงุช ุงูููุทูุฉ ูุจุงุดุฑุฉ ุฃุซูุงุก ุงูุชุดุบูู.  ูุฐุง ููุงุณุจ ุฌุฏูุง ููุงุฎุชุจุงุฑุงุช - ููููู ุจุจุณุงุทุฉ ูุถุน "ุชุตุญูุญุงุช" ุชุณุชุจุนุฏ ุงูููุทู ุงูุซููู ุฃู ุบูุฑ ุงูุถุฑูุฑู ูู ุณูุงู ูุฐุง ุงูุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุงุฐุง ุชูุนู ูู C ++ุ  ุชุฐูุจุ  ุฌุงูุงุ  ูู ูุฐู ุงููุบุงุช ุ ูุง ูููู ุชุนุฏูู ุงูุฑูุฒ ููุงุฎุชุจุงุฑุงุช ุงูุณุฑูุนุฉ ุ ูุฅูุดุงุก ุชุตุญูุญุงุช ูุชุทูุจ ุฃุฏูุงุช ูููุตูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูุฌุจ ุนููู ูุชุงุจุฉ ุงูููุฏ ุนูู ูุฌู ุงูุชุญุฏูุฏ ุญุชู ูุชู ุงุฎุชุจุงุฑู.  ูุฐู ููุณุช ูุฌุฑุฏ ุฑุบุจุฉ ููุณ ูุฑุคูุฉ ุชุบุทูุฉ 100 ูช ูู ูุดุฑูุนู.  ูุฐู ุฎุทูุฉ ูุญู ูุชุงุจุฉ ููุฏ ุงูุฌูุฏุฉ ุงููุฏุนูู. </p><br><p style=";text-align:right;direction:rtl">  ุณุฃุญุงูู ูู ูุฐู ุงูููุงูุฉ ุงูุชุญุฏุซ ุนู ุงูุฃููุงุฑ ุงูุฑุฆูุณูุฉ ูุฑุงุก ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุจูุฉ ููุงุฎุชุจุงุฑ ูุฅุธูุงุฑ ููู ูููู ุงุณุชุฎุฏุงููุง ูุน ูุซุงู ูุจุฑูุงูุฌ ุงูุงูุชูุงู ุงูุจุณูุท. </p><a name="habracut"></a><br><h2 id="beshitrostnaya-programma" style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุบูุฑ ูุนูุฏ </h2><br><p style=";text-align:right;direction:rtl"> ุณููุชุจ ุจุฑูุงูุฌูุง ุจุณูุทูุง ูุชูุฏูู ุทูุจ ุฅูู VK API.  ูุฐุง ุจุฑูุงูุฌ ุจุณูุท ุฅูู ุญุฏ ูุง ูููู ุจุฅูุดุงุก ุทูุจ ุ ููุฌุนูู ุ ูููุฑุฃ ุงูุงุณุชุฌุงุจุฉ ุ ููููู ุจูู ุชุดููุฑ ุงูุงุณุชุฌุงุจุฉ ูู JSON ูู ุจููุฉ ููุนุฑุถ ุงููุชูุฌุฉ ูููุณุชุฎุฏู. </p><br><pre style=";text-align:right;direction:rtl"><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"io/ioutil"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> token = <span class="hljs-string"><span class="hljs-string">"token here"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//     var requestURL = fmt.Sprintf( "https://api.vk.com/method/%s?&amp;access_token=%s&amp;v=5.95", "users.get", token, ) //   resp, err := http.PostForm(requestURL, nil) //   if err != nil { fmt.Println(err) return } //       defer resp.Body.Close() //     body, err := ioutil.ReadAll(resp.Body) //   if err != nil { fmt.Println(err) return } //      var result struct { Response []struct { ID int `json:"id"` FirstName string `json:"first_name"` LastName string `json:"last_name"` } `json:"response"` } //        err = json.Unmarshal(body, &amp;result) //   if err != nil { fmt.Println(err) return } // ,    if len(result.Response) &lt; 1 { fmt.Println("No values in response array") return } //    fmt.Printf( "Your id: %d\nYour full name: %s %s\n", result.Response[0].ID, result.Response[0].FirstName, result.Response[0].LastName, ) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุญุชุฑููู ูู ูุฌุงููุง ุ ูุฑุฑูุง ุฃูู ูุงู ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ูุทูุจูุง.  ุฅูุดุงุก ููู ุงุฎุชุจุงุฑ ... </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"testing"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_Main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { main() }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุชุจุฏู ุฌุฐุงุจุฉ ููุบุงูุฉ.  ูุฐุง ุงูุงุฎุชูุงุฑ ูู ุฅุทูุงู ุจุณูุท ูุชุทุจูู ูุง ูููููุง ุงูุชุฃุซูุฑ ุนููู.  ูุง ูููููุง ุงุณุชุจุนุงุฏ ุงูุนูู ูุน ุงูุดุจูุฉ ุ ูุงูุชุญูู ูู ุฅููุงููุฉ ุงูุชุดุบูู ุจุญุซูุง ุนู ุงูุนุฏูุฏ ูู ุงูุฃุฎุทุงุก ุ ูุญุชู ุงุณุชุจุฏุงู ุงูุฑูุฒ ุงููููุฒ ููุชุญูู ุณูู ููุดู.  ุฏุนูุง ูุญุงูู ูุนุฑูุฉ ููููุฉ ุชุญุณูู ูุฐุง ุงูุจุฑูุงูุฌ. </p><br><h2 id="pattern-vnedrenie-zavisimosti" style=";text-align:right;direction:rtl">  ููุท ุญูู ุงูุชุจุนูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุชูููุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุท "ุญูู ุงูุชุจุนูุฉ"</a> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> VKClient <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Token <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(client VKClient)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requestURL = fmt.Sprintf( <span class="hljs-string"><span class="hljs-string">"https://api.vk.com/method/%s?&amp;access_token=%s&amp;v=5.95"</span></span>, <span class="hljs-string"><span class="hljs-string">"users.get"</span></span>, client.Token, ) <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุฅุถุงูุฉ ูููู ุ ุฃูุดุฃูุง ุชุจุนูุฉ (ููุชุงุญ ุงููุตูู) ููุชุทุจูู ุ ูุงูุชู ูููู ููููุง ูู ูุตุงุฏุฑ ูุฎุชููุฉ ุ ูุงูุชู ุชุชุฌูุจ ุงูููู "ุงูุณูููุฉ" ูุชุจุณุท ุงูุงุฎุชุจุงุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> example <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"testing"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workingToken = <span class="hljs-string"><span class="hljs-string">"workingToken"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo_Successful</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{workingToken} client.ShowUserInfo() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo_EmptyToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{<span class="hljs-string"><span class="hljs-string">""</span></span>} client.ShowUserInfo() }</code> </pre> <br><h2 id="razdelenie-polucheniya-informacii-i-eyo-vyvoda" style=";text-align:right;direction:rtl">  ูุตู ุชููู ุงููุนูููุงุช ููุชุงุฆุฌูุง </h2><br><p style=";text-align:right;direction:rtl">  ุงูุขู ููุท ุดุฎุต ูููู ุฃู ูุฎุทุฆ ุ ูุจุนุฏ ุฐูู ููุท ุฅุฐุง ูุงู ูุนุฑู ูุง ูุฌุจ ุฃู ูููู ุนููู ุงูุงุณุชูุชุงุฌ.  ูุญู ูุฐู ุงููุดููุฉ ุ ูู ุงูุถุฑูุฑู ุนุฏู ุฅุฎุฑุงุฌ ุงููุนูููุงุช ูุจุงุดุฑุฉ ุฅูู ุฏูู ุงูุฅุฎุฑุงุฌ ุ ูููู ูุฅุถุงูุฉ ุทุฑู ูููุตูุฉ ููุญุตูู ุนูู ุงููุนูููุงุช ูุฅุฎุฑุงุฌูุง.  ุณูููู ูุฐุงู ุงูุฌุฒุกุงู ุงููุณุชููุงู ุฃุณูู ููุชุญูู ูุงูุชุญูู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุดุฆ ุทุฑููุฉ <code>GetUserInfo()</code> ุ ูุงูุชู ุณุชูุฑุฌุน ุจููุฉ ุชุญุชูู ุนูู ูุนูููุงุช ุงููุณุชุฎุฏู ูุฎุทุฃูุง (ุฅุฐุง ุญุฏุซ ุฐูู).  ูุธุฑูุง ูุฃู ูุฐู ุงูุทุฑููุฉ ูุง ุชุคุฏู ุฅูู ุฅุฎุฑุงุฌ ุฃู ุดูุก ุ ูุณูุชู ููู ุงูุฃุฎุทุงุก ุงูุชู ุชุญุฏุซ ุจุฏูู ูุฒูุฏ ูู ุงููุฎุฑุฌุงุช ุ ุจุญูุซ ููุชุดู ุงูุฑูุฒ ุงูุฐู ูุญุชุงุฌ ุฅูู ุงูุจูุงูุงุช ุงููููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> UserInfo <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> FirstName <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"first_name"`</span></span> LastName <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"last_name"`</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(client VKClient)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserInfo, error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requestURL = fmt.Sprintf( <span class="hljs-string"><span class="hljs-string">"https://api.vk.com/method/%s?&amp;access_token=%s&amp;v=5.95"</span></span>, <span class="hljs-string"><span class="hljs-string">"users.get"</span></span>, client.Token, ) resp, err := http.PostForm(requestURL, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UserInfo{}, err } <span class="hljs-comment"><span class="hljs-comment">// ... var result struct { Response []UserInfo `json:"response"` } // ... return result.Response[0], nil }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุบููุฑ <code>ShowUserInfo()</code> ุจุญูุซ ูุณุชุฎุฏู <code>GetUserInfo()</code> ููุนุงูุฌ ุงูุฃุฎุทุงุก. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(client VKClient)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { userInfo, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { fmt.Println(err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } fmt.Printf( <span class="hljs-string"><span class="hljs-string">"Your id: %d\nYour full name: %s %s\n"</span></span>, userInfo.ID, userInfo.FirstName, userInfo.LastName, ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูู ุงูุงุฎุชุจุงุฑุงุช ุ ููููู ุงูุชุญูู ูู ุชููู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู ุงูุฎุงุฏู ุ ูุฅุฐุง ูุงู ุงูุฑูุฒ ุบูุฑ ุตุญูุญ ุ ูุณูุชู ุฅุฑุฌุงุน ุฎุทุฃ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_GetUserInfo_Successful</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{workingToken} userInfo, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(err) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> userInfo.ID == <span class="hljs-number"><span class="hljs-number">0</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"ID is empty"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> userInfo.FirstName == <span class="hljs-string"><span class="hljs-string">""</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"FirstName is empty"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> userInfo.LastName == <span class="hljs-string"><span class="hljs-string">""</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"LastName is empty"</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo_EmptyToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{<span class="hljs-string"><span class="hljs-string">""</span></span>} _, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"Expected error but found &lt;nil&gt;"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err.Error() != <span class="hljs-string"><span class="hljs-string">"No values in response array"</span></span> { t.Fatalf(<span class="hljs-string"><span class="hljs-string">`Expected "No values in response array", but found "%s"`</span></span>, err) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุชุญุฏูุซ ุงูุงุฎุชุจุงุฑุงุช ุงูุญุงููุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ ูุทุฑููุฉ <code>ShowUserInfo()</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{workingToken} client.ShowUserInfo() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo_WithError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := VKClient{<span class="hljs-string"><span class="hljs-string">""</span></span>} client.ShowUserInfo() }</code> </pre> <br><h2 id="nastraivaemye-alternativy" style=";text-align:right;direction:rtl">  ุงูุจุฏุงุฆู ุงููุฎุตุตุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุชุดุจู ุงุฎุชุจุงุฑุงุช <code>ShowUserInfo()</code> ูุง ุญุงูููุง ุงูุงุจุชุนุงุฏ ุนูู ูู ุงูุจุฏุงูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุชูุซู ุงูููุทุฉ ุงููุญูุฏุฉ ูู ุงูุทุฑููุฉ ูู ุฅุฎุฑุงุฌ ุงููุนูููุงุช ุฅูู ุฏูู ุงูุฅุฎุฑุงุฌ ุงูููุงุณู.  ูู ูุงุญูุฉ ุ ููููู ูุญุงููุฉ ุฅุนุงุฏุฉ ุชุนุฑูู os.Stdout ูุงูุชุญูู ูู ุงููุฎุฑุฌุงุช ุ ููุจุฏู ุฃูู ุญู ุฒุงุฆุฏ ููุบุงูุฉ ุนูุฏูุง ููููู ุงูุชุตุฑู ุจุดูู ุฃูุซุฑ ุฃูุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุงุณุชุฎุฏุงู <code>fmt.Printf</code> ุ ููููู ุงุณุชุฎุฏุงู <code>fmt.Fprintf</code> ุ ูุงูุฐู ูุณูุญ ูู <code>io.Writer</code> ุฅูู ุฃู <code>io.Writer</code> .  <code>os.Stdout</code> ุจุชูููุฐ ูุฐู ุงููุงุฌูุฉ ุ ูุงูุชู ุชุณูุญ ููุง ุจุงุณุชุจุฏุงู <code>fmt.Printf(text)</code> ุจู <code>fmt.Fprintf(os.Stdout, text)</code> .  ุจุนุฏ ุฐูู ุ ูููููุง ูุถุน <code>os.Stdout</code> ูู ุญูู ูููุตู ุ ูุงูุฐู ูููู ุชุนูููู ุนูู ุงูููู ุงููุทููุจุฉ (ููุงุฎุชุจุงุฑุงุช - ุณูุณูุฉ ุ ููุนูู - ุฏูู ุฅุฎุฑุงุฌ ููุงุณู). </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงููุฏุฑุฉ ุนูู ุชุบููุฑ Writer ูููุงุชุฌ ูุงุฏุฑูุง ูุง ุชุณุชุฎุฏู ุ ุฎุงุตุฉ ููุงุฎุชุจุงุฑุงุช ุ ููู ุงูููุทูู ุชุนููู ูููุฉ ุงูุชุฑุงุถูุฉ.  ูุฐูุจ ุ ููุฐุง ุณูููู ุจุฐูู - ุฌุนู <code>VKClient</code> ููุน <code>VKClient</code> ููุชุตุฏูุฑ ูุฅูุดุงุก ูุธููุฉ ููุดุฆ ูุฐูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> vkClient <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Token <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> OutputWriter io.Writer } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateVKClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(token </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vkClient</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vkClient{ token, os.Stdout, } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุธููุฉ <code>ShowUserInfo()</code> ุ ุงุณุชุจุฏููุง ุงูููุงููุงุช <code>Print</code> ุจู <code>Fprintf</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(client vkClient)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { userInfo, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { fmt.Fprintf(client.OutputWriter, err.Error()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } fmt.Fprintf( client.OutputWriter, <span class="hljs-string"><span class="hljs-string">"Your id: %d\nYour full name: %s %s\n"</span></span>, userInfo.ID, userInfo.FirstName, userInfo.LastName, ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุงูุขู ุฅูู ุชุญุฏูุซ ุงูุงุฎุชุจุงุฑุงุช ุจุญูุซ ุชููู ุจุฅูุดุงุก ุงูุนููู ุจุงุณุชุฎุฏุงู ุงูููุดุฆ ูุชุซุจูุช ูุงุชุจ ุขุฎุฑ ุนูุฏ ุงูุถุฑูุฑุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := CreateVKClient(workingToken) buffer := bytes.NewBufferString(<span class="hljs-string"><span class="hljs-string">""</span></span>) client.OutputWriter = buffer client.ShowUserInfo() result, _ := ioutil.ReadAll(buffer) matched, err := regexp.Match( <span class="hljs-string"><span class="hljs-string">`Your id: \d+\nYour full name: [^\n]+\n`</span></span>, result, ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(err) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !matched { t.Fatalf(<span class="hljs-string"><span class="hljs-string">`Expected match but failed with "%s"`</span></span>, result) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_ShowUserInfo_WithError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := CreateVKClient(<span class="hljs-string"><span class="hljs-string">""</span></span>) buffer := bytes.NewBufferString(<span class="hljs-string"><span class="hljs-string">""</span></span>) client.OutputWriter = buffer client.ShowUserInfo() result, _ := ioutil.ReadAll(buffer) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(result) != <span class="hljs-string"><span class="hljs-string">"No values in response array"</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"Wrong error"</span></span>) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุงุฎุชุจุงุฑ ูุชู ููู ุฅุฎุฑุงุฌ ุดูุก ูุง ุ ูููู ุจุฅูุดุงุก ูุฎุฒู ูุคูุช ููุนุจ ุฏูุฑ ุฏูู ุงูุฅุฎุฑุงุฌ ุงูููุงุณู.  ุจุนุฏ ุชูููุฐ ุงููุธููุฉ ุ ูุชู ุงูุชุญูู ูู ุฃู ุงููุชุงุฆุฌ ุชุชูุงูู ูุน ุชููุนุงุชูุง - ุจุงุณุชุฎุฏุงู ุชุนุจูุฑุงุช ููุชุธูุฉ ุฃู ููุงุฑูุฉ ุจุณูุทุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ุฃุณุชุฎุฏู ุงูุชุนุจูุฑุงุช ุงูุนุงุฏูุฉุ  ููู ุชุนูู ุงูุงุฎุชุจุงุฑุงุช ูุน ุฃู ุฑูุฒ ูููุฒ ุณูุฏูู ููุจุฑูุงูุฌ ุ ุจุบุถ ุงููุธุฑ ุนู ุงุณู ุงููุณุชุฎุฏู ููุนุฑู ุงููุณุชุฎุฏู. </p><br><h2 id="pattern-vnedrenie-zavisimosti---2" style=";text-align:right;direction:rtl">  ููุท ุญูู ุงูุชุจุนูุฉ - 2 </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ูุชูุชุน ุงูุจุฑูุงูุฌ ุจุชุบุทูุฉ ูุฏุฑูุง 86.4 ูช.  ููุงุฐุง ูุง 100 ูชุ  ูุง ูููููุง ุงุณุชูุฒุงุฒ ุงูุฃุฎุทุงุก ูู <code>http.PostForm()</code> ู <code>ioutil.ReadAll()</code> ู <code>json.Unmarshal()</code> ุ ููุง ูุนูู ุฃูู ูุง ูููููุง ุงูุชุญูู ูู ูู " <code>return UserInfo, err</code> ". </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ููุญ ููุณู ูุฒูุฏูุง ูู ุงูุชุญูู ูู ุงููููู ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุงุฌูุฉ ูููู ุจููุฌุจูุง <code>http.Client</code> ุ ูุงูุชู ุณูููู ุชูููุฐูุง ูู vkClient ุ ููุณุชุฎุฏู ูุนูููุงุช ุงูุดุจูุฉ.  ุจุงููุณุจุฉ ููุง ุ ูู ุงููุงุฌูุฉ ุ ููุงู ุทุฑููุฉ ูุงุญุฏุฉ ููุท <code>PostForm</code> - <code>PostForm</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Networker <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { PostForm(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, url.Values) (*http.Response, error) } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> vkClient <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Token <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> OutputWriter io.Writer Networker Networker } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateVKClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(token </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vkClient</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vkClient{ token, os.Stdout, &amp;http.Client{}, } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุงูุฎุทูุฉ ุชูุบู ุงูุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุนูููุงุช ุงูุดุจูุฉ ุจุดูู ุนุงู.  ุงูุขู ูููููุง ุจุจุณุงุทุฉ ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงููุชููุนุฉ ูู ููููุชุงูุชู ุจุงุณุชุฎุฏุงู <code>Networker</code> ููููุฉ.  ุจุงูุทุจุน ุ ูุง ุชุชุฎูุต ูู ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุณุชููู ุจูุญุต ุงูุทูุจุงุช ุนูู ุงูุฎุงุฏู ุ ูููู ููุณุช ููุงู ุญุงุฌุฉ ูุชูุฏูู ุทูุจุงุช ูู ูู ุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุจุฅูุดุงุก ุชุทุจููุงุช ูู <code>Networker</code> ู <code>Reader</code> ุงููุฒููุฉ ุ ุญุชู ูุชููู ูู ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก ูู ูู ุญุงูุฉ - ุนูุฏ ุงูุทูุจ ุ ุนูุฏ ูุฑุงุกุฉ ุงููุต ูุฃุซูุงุก ุฅูุบุงุก ุงูุชุณูุณู.  ุฅุฐุง ููุง ูุฑูุฏ ุฎุทุฃู ุนูุฏ ุงูุงุชุตุงู ุจู PostForm ุ ูุฅููุง ุจุจุณุงุทุฉ ูุนูุฏู ุจูุฐู ุงูุทุฑููุฉ.  ุฅุฐุง ููุง ูุฑูุฏ ุฎุทุฃ <br>  ุนูุฏ ูุฑุงุกุฉ ูุต ุงูุงุณุชุฌุงุจุฉ - ุชุญุชุงุฌ ุฅูู ุฅุฑุฌุงุน <code>Reader</code> ูุฒูู ุ ูุงูุฐู ุณูู ูููู ุฎุทุฃู.  ูุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุงูุฎุทุฃ ูุฅุธูุงุฑ ููุณู ุฃุซูุงุก ุฅูุบุงุก ุงูุชุณูุณู ุ ูุฅููุง ูุฑุฌุน ุงูุฅุฌุงุจุฉ ุจุณูุณูุฉ ูุงุฑุบุฉ ูู ุงููุต.  ุฅุฐุง ููุง ูุง ูุฑูุฏ ุฃู ุฃุฎุทุงุก ุ ููุญู ุจุจุณุงุทุฉ ูุนูุฏ ุงููุต ุจุงููุญุชููุงุช ุงููุญุฏุฏุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> fakeReader <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fakeReader)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, errors.New(<span class="hljs-string"><span class="hljs-string">"Error on read"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> fakeNetworker <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ErrorOnPostForm <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ErrorOnBodyRead <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ErrorOnUnmarchal <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> RawBody <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fn *fakeNetworker)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PostForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, url.Values)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(*http.Response, error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fn.ErrorOnPostForm { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"Error on PostForm"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fn.ErrorOnBodyRead { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;http.Response{Body: ioutil.NopCloser(fakeReader{})}, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fn.ErrorOnUnmarchal { fakeBody := ioutil.NopCloser(bytes.NewBufferString(<span class="hljs-string"><span class="hljs-string">""</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;http.Response{Body: fakeBody}, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } fakeBody := ioutil.NopCloser(bytes.NewBufferString(fn.RawBody)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;http.Response{Body: fakeBody}, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุญุงูุฉ ูุดููุฉ ุ ูุถูู ุงุฎุชุจุงุฑ.  ุณูููููู ุจุฅูุดุงุก <code>Networker</code> ูุฒููุฉ ุจุงูุฅุนุฏุงุฏุงุช ุงููุงุฒูุฉ ุ ูุงูุชู ุจููุฌุจูุง ุณูููู ุจุฑูู ุฎุทุฃ ูู ููุทุฉ ูุนููุฉ.  ุจุนุฏ ุฐูู ุ ูุฏุนู ุฅูู ุงูุชุญูู ูู ุงููุธููุฉ ูุงูุชุฃูุฏ ูู ุญุฏูุซ ุฎุทุฃ ุ ูุชููุนูุง ุญุฏูุซ ูุฐุง ุงูุฎุทุฃ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_GetUserInfo_ErrorOnPostForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := CreateVKClient(workingToken) client.Networker = &amp;fakeNetworker{ErrorOnPostForm: <span class="hljs-literal"><span class="hljs-literal">true</span></span>} _, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"Expected error but none found"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err.Error() != <span class="hljs-string"><span class="hljs-string">"Error on PostForm"</span></span> { t.Fatalf(<span class="hljs-string"><span class="hljs-string">`Expected "Error on PostForm" but got "%s"`</span></span>, err.Error()) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_GetUserInfo_ErrorOnBodyRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := CreateVKClient(workingToken) client.Networker = &amp;fakeNetworker{ErrorOnBodyRead: <span class="hljs-literal"><span class="hljs-literal">true</span></span>} _, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"Expected error but none found"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err.Error() != <span class="hljs-string"><span class="hljs-string">"Error on read"</span></span> { t.Fatalf(<span class="hljs-string"><span class="hljs-string">`Expected "Error on read" but got "%s"`</span></span>, err.Error()) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_GetUserInfo_ErrorOnUnmarchal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { client := CreateVKClient(workingToken) client.Networker = &amp;fakeNetworker{ErrorOnUnmarchal: <span class="hljs-literal"><span class="hljs-literal">true</span></span>} _, err := client.GetUserInfo() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Fatal(<span class="hljs-string"><span class="hljs-string">"Expected error but none found"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expectedError = <span class="hljs-string"><span class="hljs-string">"unexpected end of JSON input"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err.Error() != expectedError { t.Fatalf(<span class="hljs-string"><span class="hljs-string">`Expected "%s" but got "%s"`</span></span>, expectedError, err.Error()) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุญูู <code>RawBody</code> ุ <code>RawBody</code> ุงูุชุฎูุต ูู ุทูุจุงุช ุงูุดุจูุฉ (ูุง <code>RawBody</code> ุณูู ุฅุฑุฌุงุน ูุง ูุชููุน ุฃู ูุชููุงู ูู VKontakte).  ูุฏ ูููู ูุฐุง ุถุฑูุฑููุง ูุชุฌูุจ ุชุฌุงูุฒ ุญุฏูุฏ ุงูุงุณุชุนูุงู ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ุฃู ูุชุณุฑูุน ุงูุงุฎุชุจุงุฑุงุช. </p><br><h2 id="itogi" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูู ุงูุนูููุงุช ูู ุงููุดุฑูุน ุ ุชููููุง ุญุฒูุฉ ูู 91 ุณุทุฑูุง (+170 ุณุทุฑูุง ูู ุงูุงุฎุชุจุงุฑุงุช) ุ ูุงูุชู ุชุฏุนู ุงูุฅุฎุฑุงุฌ ุฅูู ุฃู <code>io.Writer</code> ุ ุชุชูุญ ูู ุงุณุชุฎุฏุงู ุทุฑู ุจุฏููุฉ ููุนูู ูุน ุงูุดุจูุฉ (ุจุงุณุชุฎุฏุงู ุงููุญูู ุฅูู ุงููุงุฌูุฉ ุงูุฎุงุตุฉ ุจูุง) ุ ุญูุซ ุชูุฌุฏ ุทุฑููุฉ ูุซู ูุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ุ ูุงูุญุตูู ุนูููุง.  ุงููุดุฑูุน ูุฏูู ุชุบุทูุฉ 100 ูช.  ุงุฎุชุจุงุฑุงุช ุชุญูู ุจุงููุงูู ูู ูู ุณุทุฑ ูุงุณุชุฌุงุจุฉ ุงูุชุทุจูู ููู ุฎุทุฃ ูููู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฎุทูุฉ ุนูู ุงูุทุฑูู ุฅูู ุชุบุทูุฉ 100 ูช ุฒุงุฏุช ูู ููุทูุฉ ุ ูุณูููุฉ ุงูุตูุงูุฉ ูููุซูููุฉ ุงูุชุทุจูู ุ ูุฐูู ูุง ููุฌุฏ ุดูุก ุฎุงุทุฆ ูุน ุญูููุฉ ุฃู ุงูุงุฎุชุจุงุฑุงุช ุชููู ูููู ุงูุญุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุฃู ุฑูุฒ ูู ุฌูุฏุฉ ูุง ุชุธูุฑ ูู ุงูุฌู.  ุชุธูุฑ ูุงุจููุฉ ุงูุงุฎุชุจุงุฑ ุนูุฏูุง ูุณุชุฎุฏู ุงููุทูุฑ ุฃููุงุทูุง ูุงููุฉ ูู ุงูููุงูู ุงูููุงุณุจุฉ ูููุชุจ ุฑูุฒูุง ูุฎุตุตูุง ููููุฐุฌููุง.  ูุงูุช ุงููููุฉ ุงูุฑุฆูุณูุฉ ูู ุฅุธูุงุฑ ุนูููุฉ ุงูุชูููุฑ ุนูุฏ ุชูููุฐ ุจุฑุงูุฌ ุฅุนุงุฏุฉ ุงูุฅุณูุงู.  ูููู ุฃู ููุชุฏ ุงูุชูููุฑ ุงูููุงุซู ุฅูู ุฃู ุชุทุจูู ูููุชุจุฉ ุ ููุฐูู ุงููุบุงุช ุงูุฃุฎุฑู. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar452702/">https://habr.com/ru/post/ar452702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar452690/index.html">ูุง ูู ุงููุซูุฑ ููุงูุชูุงู ููุบุงูุฉ ุญูู ุงูุณูู ุงูุญุฏูุฏูุฉ ุนุจุฑ ุณูุจูุฑูุงุ</a></li>
<li><a href="../ar452692/index.html">ูุงู ูุคูู ูุดุฑูุน rePalm ุจุฅุนุงุฏุฉ ูุชุงุจุฉ ูุธุงู ุงูุชุดุบูู Palm OS ูู ุงูุจุฏุงูุฉ ููุฎุทุท ูุชุญูููู ุฅูู ููุตุฉ ูุฑุงูุจุฉ ุฐููุฉ</a></li>
<li><a href="../ar452696/index.html">ููููุฉ ุจุฏุก ุงููุฏููุนุงุช ุงูุตุบูุฑุฉ ูู ุงูุชุทุจูู ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar452698/index.html">ุงุซูุงู ูู ูุงุญุฏ: ุงูุจูุงูุงุช ุงูุณูุงุญูุฉ ูุชุฐุงูุฑ ุงูุฃุญุฏุงุซ ุงูุซูุงููุฉ ูุงูุช ูุชุงุญุฉ ููุฌูููุฑ</a></li>
<li><a href="../ar452700/index.html">ุฃุฎุจุงุฑ ูู ุฎุฑูุทุฉ ุงูุดุงุฑุน ุงูููุชูุญ ุฑูู 460 (05/07/2019 - 05/05/2019)</a></li>
<li><a href="../ar452704/index.html">ุชุตุญูุญ ุงูุฃุฎุทุงุก ุจุนุฏ ุงูููุงุฉ ุนูู Cortex-M</a></li>
<li><a href="../ar452706/index.html">ูู ุนุงู 1983 ุ ุฃุตุจุญ ูุฐุง ุงูููุจููุชุฑ ูู Bella Labs ุฃูู ุบุฑุงูุฏ ูุงุณุชุฑ.</a></li>
<li><a href="../ar452712/index.html">ููู ุญุงูููุง ุงูุนูู ูู ูุฑูู ุ ููุงุฐุง ุฌุงุก ููู</a></li>
<li><a href="../ar452714/index.html">ุงูุชุจู # 5: ููุฎุต ุงูููุงูุงุช ุญูู ุงูุชูููุฑ ุงูููุชุฌ ุ ุนูู ุงูููุณ ุงูุณูููู ูุงูุฅูุชุงุฌูุฉ</a></li>
<li><a href="../ar452716/index.html">ูู ุงูุจุญุซ ุนู ููุทุฉ ุงูุฃูุซู ูุชุทุจูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>