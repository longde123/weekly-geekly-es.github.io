<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôåüèΩ üëâüèø ‚öæÔ∏è LAMP no Raspberry Pi 2 - do que ARM CPU + USB √© capaz üíè üßîüèø üë®‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Farei uma reserva imediatamente, o objetivo n√£o √© descobrir os recursos m√°ximos do sistema, mas descobrir o desempenho fundamental dos microcomputador...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LAMP no Raspberry Pi 2 - do que ARM CPU + USB √© capaz</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384209/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Farei uma reserva imediatamente, o objetivo n√£o √© descobrir os recursos m√°ximos do sistema, mas descobrir o desempenho fundamental dos microcomputadores modernos como servidores Web completos e ajudar a avaliar a competitividade em rela√ß√£o √† hospedagem compartilhada. </font><font style="vertical-align: inherit;">Portanto, este artigo n√£o aborda os problemas de otimiza√ß√£o e estuda a carga m√°xima permitida. </font><font style="vertical-align: inherit;">Em vez disso, √© realizada uma experi√™ncia em sites existentes com visitantes reais.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdu√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Provavelmente muitos familiarizados com microcomputadores de fam√≠lias comest√≠veis (framboesa, banana, laranja ...) pensaram em expandir o alcance de seu uso. </font><font style="vertical-align: inherit;">Originalmente projetados para sistemas dom√©sticos inteligentes e rob√≥tica, eles est√£o se tornando cada vez mais r√°pidos, mantendo o tamanho. </font><font style="vertical-align: inherit;">Baixo consumo de energia com maior poder do processador os torna atraentes para uso potencial como servidores da web. </font><font style="vertical-align: inherit;">Vamos escolher um modelo adequado para isso.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que o Raspberry Pi 2 modelo B?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o ponto mais fraco de tais sistemas, do ponto de vista da hospedagem, √© o processador, que tem um desempenho relativo muito baixo (mais sobre isso posteriormente), tentaremos organizar um servidor da Web com uma op√ß√£o de or√ßamento, mas que, no entanto, pode se tornar poderoso o suficiente para Nossa tarefa √© o Raspberry Pi 2 modelo B. Ele possui um processador de 4 n√∫cleos que opera no modo normal sem resfriamento a 900 Mhz e a capacidade de alterar essa frequ√™ncia de 700 para 1200 Mhz. </font><font style="vertical-align: inherit;">N√≥s n√£o aumentaremos a frequ√™ncia do rel√≥gio, apenas observamos que para ‚Äúoverclocking‚Äù voc√™ precisar√° de um radiador e, possivelmente, de um ventilador. </font><font style="vertical-align: inherit;">Como aconteceu que hoje o Raspberry Pi 2 modelo B tem o processador mais produtivo entre os "colegas de classe", n√≥s o selecionamos para teste.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caracter√≠sticas t√©cnicas da plataforma em quest√£o</font></font></h4><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos um processador incomum, a fam√≠lia RISC. Em resumo, podemos dizer que o conjunto de instru√ß√µes para esse processador √© muito menor que o das instru√ß√µes "comuns", mas executa comandos simples muito rapidamente. Mas para executar instru√ß√µes complexas, tais comandos simples precisam de muito. Portanto, o rel√≥gio alterna mais. Portanto, se algu√©m pareceu que 4 n√∫cleos de 900 Mhz cada um √© mais que suficiente para um servidor da Web, fa√ßa uma emenda - o Broadcom BCM2836 Cortex A7 de quatro n√∫cleos para a nossa tarefa n√£o ser√° mais r√°pido que o antigo Pentium 300-400 Mhz. √â verdade que seis vezes supera o modelo single-core anterior no Raspberry Pi e 1,9 vezes √† frente do colega de classe dual core no Banana Pi M2 (que, embora anunciado pela presen√ßa de SATA e Ethernet gigabit, √© muito menos adequado para o servidor da web devido ao seu processador )√â precisamente por causa da lentid√£o do processador central que observamos um baixo consumo recorde de microcomputadores. De acordo com os dados dispon√≠veis, o Raspberry Pi consome de 2 a 3 watts, 4 watts em carga de pico e 1 watts em marcha lenta. Bem, 2-3 watts (5V, 0,4-0,6A), em m√©dia, para todo o sistema, com exce√ß√£o do poder da m√≠dia de armazenamento - √© por isso que vale a pena lutar no campo da hospedagem corporativa ou dom√©stica, que pode torn√°-lo lucrativo em termos econ√¥micos. pontos de vista.o que pode torn√°-lo economicamente vantajoso.o que pode torn√°-lo economicamente vantajoso.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mem√≥ria</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mem√≥ria usada n√£o √© a mais r√°pida, √© DDR2, mas h√° uma quantidade suficiente de mem√≥ria - 1 GB. </font><font style="vertical-align: inherit;">Devo dizer que essa √© uma boa quantia para servidores Web comuns executando o Linux.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface de rede</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma interface de rede de 100 megabytes √© suficiente para transfer√™ncia de dados. </font><font style="vertical-align: inherit;">N√£o precisamos de mais nada - o subsistema de armazenamento de informa√ß√µes e o processador simplesmente n√£o conseguem lidar com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> carga pesada.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazenamento de dados</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chegamos a um ponto muito interessante - o leitor de cart√£o integrado permite que o sistema inicialize apenas a partir dele (a menos que voc√™ redirecione o gerenciador de inicializa√ß√£o ...), e isso em uma situa√ß√£o normal limita a escolha da operadora principal a um cart√£o micro SD. A boa not√≠cia √© que hoje eles j√° podem ter um volume significativo e trabalhar rapidamente. Embora j√° existam defici√™ncias - √© improv√°vel que desejemos manter arquivos, bancos de dados, trocas e logs do site, para evitar opera√ß√£o lenta e redu√ß√£o prematura da vida da transportadora. Para fazer isso, teremos outra m√≠dia no barramento USB. Essa abordagem n√£o apenas aumenta o desempenho do sistema, mas tamb√©m oferece a vantagem da modularidade - √© f√°cil substituir a m√≠dia por outra sobressalente e fazer backups de toda a imagem. A quest√£o √© o que exatamente queremos usar como meio externo - um disco SSD, HDD ou um cart√£o de mem√≥ria r√°pido.Aqui, todo mundo decide por si mesmo, muito depende da natureza dos sites hospedados. Deve-se lembrar que o Raspberry Pi 2 usa o padr√£o USB 2.0, que limita nosso subsistema de arquivos na velocidade de transfer√™ncia de dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo, como dispositivo externo, consideraremos uma op√ß√£o relativamente lenta para a grava√ß√£o - este √© um leitor de cart√£o USB com um cart√£o SD de formato completo Lexar Professional conectado, o que permite gravar dados a uma velocidade de apenas 15 Mb / s com esta conex√£o. Embora (no caso geral), velocidades de m√≠dia acima de 100 megabits para leitura e grava√ß√£o n√£o sejam importantes para n√≥s, uma vez que a comunica√ß√£o com o mundo externo √© limitada por esse n√∫mero. Ao usar subsistemas de disco, pense no consumo de energia deles. O Winchester 2,5 "consome ~ 5 watts e provavelmente exigir√° uma fonte de alimenta√ß√£o separada. Voc√™ tamb√©m deve se lembrar da organiza√ß√£o espec√≠fica de entrada e sa√≠da do Raspberry via USB, obviamente, temos mais um gargalo: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/cfc/376/82b/cfc37682b520fe14a7043a9304b04b3f.png" alt="diagrama de blocos funcional do Raspberry Pi 2 modelo B"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a m√≠dia de teste: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" Interna ": MicoSD 8Gb classe 10</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Externo: SD 32Gb classe 10+ (UHS)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala√ß√£o e composi√ß√£o do LAMP</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema deve ser simples, mas tem funcionalidade completa. </font><font style="vertical-align: inherit;">Portanto, um requisito √© nada mais, mas apenas o Apache se oculta atr√°s do Nginx, pois a mem√≥ria permite.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistema operacional</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Minibian √© instalado na m√≠dia ‚Äúinterna‚Äù a partir da imagem 2015-02-18-wheezy-minibian.img. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© o Debian 7.8, no m√≠nimo, para Raspberry. </font><font style="vertical-align: inherit;">N√≥s fazemos uma reserva, no reposit√≥rio padr√£o eles esperam PHP n√£o superior a 5.5 e Apache n√£o superior a 2.2. </font><font style="vertical-align: inherit;">Essa n√£o √© uma restri√ß√£o irritante, mas para este artigo √© √∫til verificar a possibilidade de usar as vers√µes mais recentes. </font><font style="vertical-align: inherit;">Para instalar o PHP 5.6.xe Apache 2.4.x, que n√£o est√£o inclu√≠dos no reposit√≥rio padr√£o, tive que mudar a fonte da 8¬™ vers√£o do Raspbian, o sistema ap√≥s </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a atualiza√ß√£o do apt-get</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> come√ßou a ter a vers√£o 8.0.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vers√£o 2.4.10 (Raspbian). </font><font style="vertical-align: inherit;">O gzip est√° ativado, todos os m√≥dulos mais usados ‚Äã‚Äãda distribui√ß√£o padr√£o est√£o conectados, incluindo mod_rewrite, mod_cache ..., sem contar os que est√£o ativados por padr√£o.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Php</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.6.12-0 + deb8u1 (cli). </font><font style="vertical-align: inherit;">Executa no Apache como prefork. </font><font style="vertical-align: inherit;">Existem php-curl, php-gd e outras bibliotecas populares.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.5.44-0 + deb8u1 - (Raspbian).</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nginx / 1.6.2. </font><font style="vertical-align: inherit;">O Nginx √© respons√°vel pela est√°tica. </font><font style="vertical-align: inherit;">Compacta√ß√£o Gzip est√° inclu√≠da. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deixe-me lembr√°-lo de que todos os logs s√£o gravados em m√≠dia externa, o banco de dados MySQL est√° l√°, o swap n√£o est√° desativado, mas vazio durante todo o tempo de teste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como utilit√°rios auxiliares, uso PhpMyAdmin, htop, iostat e webmin. </font><font style="vertical-align: inherit;">O Exim4 est√° instalado, mas apenas para enviar mensagens de formul√°rios. </font><font style="vertical-align: inherit;">Como voc√™ pode ver, nosso servidor √© bastante moderno e funcional. </font><font style="vertical-align: inherit;">Vou decepcionar os f√£s do painel de controle VESTA - infelizmente, o fabricante n√£o suporta processadores ARM e n√£o far√° isso em um futuro pr√≥ximo. </font><font style="vertical-align: inherit;">Portanto webmin.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu n√£o iria imediatamente fazer nenhum teste sint√©tico, uma vez que eles s√£o mais prov√°veis ‚Äã‚Äãdo campo de uma teoria muito distante. Na pr√°tica, tudo depende fortemente da natureza dos sites hospedados, da distribui√ß√£o de carga por hora, do canal de comunica√ß√£o, do n√∫mero de visualiza√ß√µes, do tempo dos visitantes do site ... e das configura√ß√µes. Em outras palavras, proponho ver o que realmente acontece nos sites existentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os sites testados n√£o s√£o baseados em nenhum CMS, mas usam a exibi√ß√£o de imagens do banco de dados em p√°ginas din√¢micas (PHP), para que possa haver uma carga bastante intensa no MySQL. Mas n√£o h√° conex√µes AJAX. Como nossa hospedagem ainda n√£o afirma ser profissional, √© considerado suficiente para o teste colocar 16 sites ativos com pouco tr√°fego, dos quais cerca de cinco s√£o cerca de 100 a 200 pessoas por dia, o restante n√£o passa de 50 visitantes para o mesmo Tempo. No total - cerca de 800 a 900 pessoas por dia, o que √© compar√°vel em termos de carga aceit√°vel com hospedagem compartilhada barata. Metade dos visitantes cai √† noite, as principais visitas acontecem de 20 a 22 horas (~ 300 pessoas em duas horas, em m√©dia 4 visualiza√ß√µes = 10 visualiza√ß√µes por minuto a ~ 700 kb cada = 116 kilobytes de tr√°fego por segundo).Designaremos esse hor√°rio como ‚Äúhora do rush‚Äù e, ao mesmo tempo, realizaremos testes. Haver√° apenas dois tipos de testes - avalia√ß√£o de desempenho usando servi√ßos de terceiros e um relat√≥rio dos utilit√°rios htop, iostat, sobre trabalho real.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. O tempo de gera√ß√£o e carregamento pelo usu√°rio das p√°ginas nos "hor√°rios de pico"</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usamos apenas dois par√¢metros principais - tempo de gera√ß√£o e tempo de carregamento da p√°gina, para dois tipos de p√°ginas - ‚Äúpesado‚Äù (pesado para o processador, porque h√° muitas fotos do MySQL, gera√ß√£o longa) e ‚Äúleve‚Äù (p√°gina PHP din√¢mica normal). </font><font style="vertical-align: inherit;">Repetiremos cada teste 10 vezes para reduzir a probabilidade de um resultado aleat√≥rio e tamb√©m usaremos servi√ßos diferentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deixe-me lembr√°-lo sobre a geografia dos servidores de teste e sobre a poss√≠vel carga de trabalho deles. </font><font style="vertical-align: inherit;">Portanto, os resultados absolutos podem variar bastante, isso √© normal. </font><font style="vertical-align: inherit;">Repeti medi√ß√µes com interrup√ß√µes de 5 a 10 minutos para obter diferentes tempos de carregamento dos servi√ßos. </font><font style="vertical-align: inherit;">O canal do Raspberry testado √© a √≥ptica de gigabit, a geografia √© a Sib√©ria, 150 megabits garantidos para Moscou. </font><font style="vertical-align: inherit;">Para verificar a capacidade do servidor de atender a v√°rias conex√µes simult√¢neas, o teste foi iniciado simultaneamente nos seguintes sites de servi√ßo:</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√°gina light (547 kb, sem acesso ao MySQL)</font></font></h5><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PingDom.com, Su√©cia</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempo de carregamento da p√°gina (46 solicita√ß√µes): m√≠nimo - 925 ms, m√°ximo - 1124 ms, m√©dia - 955 ms.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° queixas sobre velocidade.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitespeed.ru</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempo total de carregamento da p√°gina 3.9-4.2, m√©dia 4.0. </font><font style="vertical-align: inherit;">Tempo de gera√ß√£o de p√°ginas de 139 a 157, em m√©dia 145 ms. </font><font style="vertical-align: inherit;">√â por isso que o Google n√£o tem reclama√ß√µes - chegamos aos 200 ms permitidos.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√°gina `Pesada '(843 kb, incluindo 38 fotos de 10 a 15 kb do MySQL)</font></font></h5><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PingDom.com, Su√©cia</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempo de carregamento da p√°gina (85 solicita√ß√µes): m√≠nimo - 946 ms, m√°ximo - 1001 ms, m√©dia - 973 ms.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° queixas sobre velocidade.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitespeed.ru</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempo total de carregamento da p√°gina 5,3-4,2, m√©dia 4,0. </font><font style="vertical-align: inherit;">Tempo de gera√ß√£o de p√°gina de 158 a 169, m√©dia de 162 ms.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Relat√≥rio do utilit√°rio htop</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esperado, o Htop mostrou que o principal consumidor do tempo da CPU s√£o os processos mysql. </font><font style="vertical-align: inherit;">Eles "comeram" 98 minutos a partir do √∫ltimo dia de tempo do processador. </font><font style="vertical-align: inherit;">O que n√£o √© surpreendente - as consultas frequentes e "pesadas" √† base foram inicialmente feitas por n√≥s. </font><font style="vertical-align: inherit;">Se as imagens estivessem no cache nginx, ter√≠amos um ganho de desempenho, mas o teste √© interessante porque modela o aumento de carga no MySQL com uma margem, o que, a prop√≥sito, √© t√≠pico para a maioria dos CMS.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Relat√≥rio do utilit√°rio iostat</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse utilit√°rio mostrou velocidades m√©dias de leitura e grava√ß√£o na m√≠dia: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. </font><font style="vertical-align: inherit;">M√≠dia </font><font style="vertical-align: inherit;">‚Äúinterna‚Äù (sistema) - leitura m√©dia de 0,87 kb / s, grava√ß√£o m√©dia de 15,5 kb / s (provavelmente devido ao cache do nginx, h√° algo a melhorar na configura√ß√£o). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. M√≠dia ‚Äúexterna‚Äù (sites, logs, bancos de dados) - leitura de 2,4 kb / se grava√ß√£o de 3 kb / s (tudo est√° bem aqui, a leitura √© armazenada em cache e os registros s√£o gravados).</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. aloca√ß√£o de CPU</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribui√ß√£o do tempo da CPU por htop, amostragem - exatamente dois dias de trabalho (~ 1600 visitantes √∫nicos atendidos de acordo com as m√©tricas do Yandex): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql 6,8% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
htop 1,8% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nginx 0,75% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apache2 &lt;0,3% </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por quase o resto do tempo, o processador descansou. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, temos uma grande margem para o tempo livre do processador, uma margem para aumentar a frequ√™ncia do processador, uma margem para a velocidade da m√≠dia de grava√ß√£o. </font><font style="vertical-align: inherit;">Existem muitas otimiza√ß√µes dispon√≠veis para configurar os dois programas de servidor (colocando o cache nginx em uma m√≠dia separada, por exemplo) e os pr√≥prios sites. </font><font style="vertical-align: inherit;">Tudo junto - um bom potencial para aumentar a produtividade geral.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso visitante virtual gostou da velocidade do servidor da web no microcomputador, apesar de haver outras visitas simult√¢neas. Assim, apesar dos gargalos (USB e processador), temos uma conclus√£o muito √≥bvia - um servidor Web completo no Raspberry Pi 2 modelo B √© real. Tanto em software quanto em par√¢metros t√©cnicos. Com base na carga de trabalho muito baixa na op√ß√£o considerada, assumirei que ele poder√° atender rapidamente pelo menos alguns milhares de visitantes ao (s) site (s) m√©dio (s) por dia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O multiprocessamento ajuda a lidar com as solicita√ß√µes mais rapidamente, h√° mem√≥ria suficiente para armazenar em cache, a transfer√™ncia de dados via USB √© satisfat√≥ria, para que o servidor do beb√™ possa n√£o apenas economizar energia, mas tamb√©m fazer r√°pida (mais barata!) A substitui√ß√£o de equipamentos com falha. Esse sistema pode pagar por si pr√≥prio quando usado em uma rede corporativa como servidor corporativo (servidor de banco de dados, servidor web, servidor de backup, compartilhamento de arquivos) em compara√ß√£o com outras solu√ß√µes populares. E certamente seja uma alternativa √† hospedagem virtual nas m√£os certas. Por exemplo, em uma fonte de alimenta√ß√£o ininterrupta de or√ßamento, um microcomputador emparelhado com um roteador pode funcionar por horas; portanto, a quest√£o de uma curta (e n√£o t√£o) falta de energia pode ser nivelada em casa,se o site do provedor tamb√©m tiver UPS. E voc√™ tamb√©m pode controlar a eletricidade, dar comandos para v√°rios dispositivos, conectar uma c√¢mera de v√≠deo e v√°rios sensores ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Experimente, experimente, microcomputadores - n√£o √© apenas barato, mas tamb√©m agradavelmente silencioso ...</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt384209/">https://habr.com/ru/post/pt384209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt384197/index.html">Ask Ethan No. 30: Contando Longas Se√ß√µes de Tempo</a></li>
<li><a href="../pt384199/index.html">NASA fica sem plut√¥nio 238</a></li>
<li><a href="../pt384201/index.html">60 minutos amanh√£: hora de subir em um hoverboard</a></li>
<li><a href="../pt384203/index.html">Vapor de charuto. Cigarro eletr√¥nico WoodStick como forma de parar de fumar</a></li>
<li><a href="../pt384207/index.html">Dainese introduziu uma jaqueta de motocicleta com um airbag autom√°tico</a></li>
<li><a href="../pt384211/index.html">Carros el√©tricos Porsche e Audi v√£o competir com Tesla</a></li>
<li><a href="../pt384213/index.html">A lente bi√¥nica torna a vis√£o perfeita</a></li>
<li><a href="../pt384217/index.html">37 viagens, dois dias, 185.000 milhas gratuitas</a></li>
<li><a href="../pt384219/index.html">Rob√¥ ou evolu√ß√£o DIY inclu√≠do</a></li>
<li><a href="../pt384221/index.html">O americano m√©dio gasta mais tempo com aplicativos do que assistindo TV</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>