<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ú üí• üçÉ Aspectos t√©cnicos do bloqueio da Internet na R√∫ssia. Desafios e perspectivas üîπ üåª üéÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos come√ßar imediatamente com uma isen√ß√£o de responsabilidade: n√£o haver√° essencialmente quest√µes pol√≠ticas abaixo. Iremos ignorar as quest√µes admin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aspectos t√©cnicos do bloqueio da Internet na R√∫ssia. Desafios e perspectivas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/431188/">  <em>Vamos come√ßar imediatamente com uma isen√ß√£o de responsabilidade: n√£o haver√° essencialmente quest√µes pol√≠ticas abaixo.</em>  <em>Iremos ignorar as quest√µes administrativas e jur√≠dicas o m√°ximo que pudermos, para n√£o separar completamente a parte t√©cnica dos demais avi√µes.</em> <br><br>  J√° existem bloqueios de Internet na R√∫ssia - esse √© um dado com o qual vivemos e devemos continuar a viver.  E, nesse caso, voc√™ precisa entender como isso funciona tecnicamente, o que o provedor pode ou n√£o fazer.  Philip Culin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">schors</a> ) h√° muito tempo come√ßou a coletar informa√ß√µes sobre esse assunto, participou de trabalhos normativos e participou de v√°rias reuni√µes.  Como resultado, agora apenas Roskomnadzor sabe mais sobre ele na R√∫ssia, mas isso n√£o √© certo.  Sob o corte, um breve resumo do estado atual das coisas. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/sBMgOt3z8IQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Sobre o palestrante:</strong> Philip Kulin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">schors</a> ) diretor geral da Deep Forest LLC, uma pequena hoster russa, envolvida principalmente em hospedagem compartilhada. <br><a name="habracut"></a><br><h2>  Emaranhado de problemas <br></h2><br>  Parece que existem bloqueios e existem.  N√≥s n√£o gostamos deles, mas talvez n√£o haja nada de errado com eles? <br><br><blockquote>  De fato, bloquear √© um emaranhado de problemas. <br></blockquote><br>  <strong>O dano colateral √© o maior problema de bloqueio.</strong>  O exemplo mais impressionante que ilustra isso ocorreu em abril de 2018, quando grandes blocos de endere√ßos IP de servi√ßos em nuvem foram bloqueados, respectivamente, muitos servi√ßos n√£o funcionaram e sofreram grandes danos. <br><br>  <strong>Volatilidade de regulamentos e pr√°ticas</strong> que est√£o mudando o tempo todo.  Um ano atr√°s, essa hist√≥ria teria sido completamente diferente e, dois anos atr√°s, ela provavelmente contradizia a de hoje.  Em um ano, tudo ser√° diferente novamente.  Hoje √© assim, em um m√™s - um pouco errado, e depois de meio ano n√£o √© de todo.  Isso deve ser monitorado, mas tamb√©m √© necess√°rio ter tempo para trabalhar. <br><br>  <strong>√â dif√≠cil diagnosticar bloqueios</strong> .  Se algum recurso entrar no bloqueio exatamente no registro - este √© o caso mais simples.  Nos casos que consideraremos posteriormente, √© bastante dif√≠cil distinguir um bloqueio real dos problemas t√©cnicos.  Um exemplo impressionante - em outubro, o Yandex reduziu o DNS em cinco horas, per√≠odo durante o qual muitos conseguiram decidir que isso era um bloqueio a Roskomnadzor.  √â realmente dif√≠cil determinar exatamente, e essas situa√ß√µes j√° aconteceram, para que as pessoas pensem imediatamente em bloquear. <br><br>  <strong>√â imposs√≠vel prever</strong> quando voc√™ ser√° bloqueado e se eles ser√£o bloqueados.  Voc√™ trabalha em sil√™ncio e seu trabalho de repente terminou. <br><br>  <strong>√â completamente imposs√≠vel calcular os riscos</strong> , porque, talvez, algum widget no site que voc√™ j√° tenha esquecido, ou talvez todo o neg√≥cio, caia sob ataque.  Um bom exemplo de imprevisibilidade de risco √© o caso Bitrix24.  Em mar√ßo, eles rapidamente transferiram seus servi√ßos para a Amazon.  No mesmo m√™s, um documento vazou para a rede, o que, √© verdade, provavelmente era falso, no qual grandes sub-redes da Amaz√¥nia foram registradas.  No entanto, o Bitrix24 de alguma forma reagiu a ele e evitou problemas em abril, quando os servi√ßos da Amazon foram realmente bloqueados. <br><br>  Garanto-lhe que muitos de voc√™s s√£o t√£o azarados!  Tais documentos n√£o v√£o por acaso fluir para suas m√£os.  Quando o seu neg√≥cio terminar, voc√™ aprender√° sobre isso ap√≥s o fato. <br><br>  Em casos simples, sabe-se por que seu site foi bloqueado.  Por exemplo, o f√≥rum postou informa√ß√µes que alguns tribunais reconheceram como proibidas, mas voc√™ n√£o teve tempo para reagir.  Mas a <strong>comunica√ß√£o com o supervisor tem um prazo inaceit√°vel</strong> - por exemplo, um dia.  Na Internet durante esse per√≠odo, voc√™ pode perder um quinto dos neg√≥cios. <br><br>  Tudo isso leva a uma certa <strong>desesperan√ßa</strong> .  √â poss√≠vel argumentar com ironia sobre, por exemplo, o bloqueio de David Homack e Lurk.  Mas √© uma quest√£o completamente diferente quando isso acontece com voc√™, como j√° aconteceu comigo.  O cliente indicou os endere√ßos IP dos meus servidores em um dom√≠nio que eu n√£o gerenciei - estou sentado, e o telefone simplesmente n√£o para.  Os clientes dizem que est√£o saindo, exigindo um reembolso, mas eu n√£o posso fazer nada!  E ningu√©m pode me ajudar com isso.  Este √© realmente um sentimento de total desesperan√ßa. <br><br><h2>  Grupos de risco <br></h2><br>  Bloqueia a preocupa√ß√£o: <br><br><ul><li>  <strong>Propriet√°rios de sites e servi√ßos</strong> , que, inclusive, podem ser bloqueados por engano.  Ou eles podem reconhecer algumas informa√ß√µes como proibidas. </li><li>  <strong>Usu√°rios de servi√ßos de</strong> bloqueio tamb√©m s√£o afetados.  O fato de seu site estar bloqueado est√° principalmente preocupado com voc√™.  Mas h√° pessoas que usaram este site ou servi√ßo. </li><li>  <strong>Hosters e provedores</strong> que est√£o entre dois inc√™ndios.  Porque eles s√£o obrigados a trabalhar e servi√ßos, e a implementa√ß√£o dos requisitos do supervisor, que amea√ßa com multas.  Deixe-me lembr√°-lo de que as multas variam de 50 a 100 mil rublos por protocolo.  Pode haver muitos desses protocolos, por exemplo, por m√™s, e os valores obtidos s√£o muito substanciais. </li></ul><br><h2>  O princ√≠pio de opera√ß√£o de fechaduras <br></h2><br>  Primeiro, discutimos brevemente como ocorre o bloqueio para entender a imagem completa. <br><br><ul><li>  Os √≥rg√£os executivos federais ou o tribunal decidem proibir qualquer informa√ß√£o por algum motivo. </li><li>  As informa√ß√µes s√£o enviadas para Roskomnadzor, que deve fazer uma entrada no registro de sites proibidos. </li><li>  Alguns procedimentos internos continuam (existem muitos deles tamb√©m - toda uma palestra pode ser lida), como resultado do qual Roskomnadzor pode decidir bloquear e adicionar o site ao chamado "upload" - um arquivo t√©cnico enviado aos fornecedores. </li><li>  Os fornecedores deste arquivo executam uma restri√ß√£o. </li><li>  Verifica√ß√£o de fornecedores, que √© autom√°tica h√° dois anos. </li></ul><br><img src="https://habrastorage.org/webt/ec/7u/oy/ec7uoyx013k4hat7f1emkodh0je.png"><br><br>  √â importante entender que o tr√°fego √© filtrado por cada provedor.  Ou seja, n√£o em algum lugar nos roteadores transfronteiri√ßos ou em um filtro de estado, mas cada provedor define um filtro entre a Internet e os assinantes em cada uma de suas sub-redes.  No diagrama acima, o dispositivo de verifica√ß√£o fica ao lado dos assinantes, porque se representa como assinante - isso √© importante. <br><br><h2>  Ferramentas de filtragem <br></h2><br>  Os fornecedores podem comprar tr√°fego filtrado de um provedor superior.  Mas h√° um problema - ao comprar tr√°fego de um provedor superior, o fornecedor-comprador n√£o pode determinar o problema ou o bloqueio t√©cnico.  Ele n√£o possui nenhuma ferramenta, porque j√° recebe tr√°fego reduzido e isso n√£o afeta muito seus neg√≥cios. <br><br>  Ou voc√™ pode usar: <br><br><ul><li>  solu√ß√µes comerciais integradas especiais; </li><li>  solu√ß√µes de c√≥digo aberto de c√≥digo aberto (atualmente existe apenas um desses projetos); </li><li>  sua "fazenda coletiva". </li></ul><br>  N√£o h√° foguetes, e o principal problema n√£o √© escrever um programa. <br><br>  As seguintes op√ß√µes de implementa√ß√£o est√£o dispon√≠veis. <br><img src="https://habrastorage.org/webt/0e/fv/2r/0efv2rq-4k220c9rs8sfajg7vh4.png"><br><br>  Por exemplo, voc√™ tem um pequeno canal de 100 Gbps, coloca o filtro no espa√ßo. <br><img src="https://habrastorage.org/webt/m2/uz/3h/m2uz3hsz3c1tnbtsny8iresopwk.png"><br><br>  Algum tr√°fego espelhado, mas com o espelhamento de tr√°fego, o problema √© que ele funciona como se estivesse √† frente da curva.  Ou seja, o filtro tenta responder mais r√°pido que a resposta normal, respectivamente, se o filtro come√ßar a ficar mais lento, ser√° multado (lembre-se, de 50 a 100 mil rublos). <br><img src="https://habrastorage.org/webt/sh/pu/wd/shpuwd9apxic9-mqokh9igug_-i.png"><br><br>  Roteamento seletivo - quando o tr√°fego para endere√ßos IP, que pode incluir algo do "upload", passa por um filtro separado. <br><br>  Infelizmente, n√£o h√° n√∫meros exatos, mas, a julgar pelos sinais e testes indiretos, agora √© a maneira mais comum de filtrar o tr√°fego. <br><br>  O roteamento seletivo pode ser complementado pelo fato de que <strong>conjuntos de endere√ßos IP para filtragem s√£o agregados para cima.</strong>  Ou seja, n√£o apenas alguns endere√ßos s√£o bloqueados, mas toda a rede / 24 chega imediatamente ao filtro.  Al√©m disso, grandes fornecedores, por exemplo, no MTS, possuem servi√ßos de seguran√ßa especiais que procuram especificamente blocos IP com risco, que tamb√©m se enquadram na filtragem. <br><br>  O roteamento seletivo tamb√©m pode ser combinado com a <strong>filtragem de consultas DNS</strong> .  Esse √© um m√©todo popular usado, por exemplo, pelo Dom.ru. <br><br>  Analisaremos em etapas os problemas que tudo isso traz. <br><br><h2>  Tomar uma decis√£o para bloquear <br></h2><br>  Roskomnadzor toma uma decis√£o - isso causa imediatamente um problema relacionado, por exemplo, √† organiza√ß√£o de um servi√ßo de suporte.  Em alguns casos, ele deve notificar o propriet√°rio do site ou hoster, mas, ao mesmo tempo, o destinat√°rio da notifica√ß√£o n√£o √© exato (√© extra√≠do de dados p√∫blicos e nem todos suportam o endere√ßo atual), as notifica√ß√µes s√£o perdidas, <strong>n√£o h√° informa√ß√µes abertas</strong> . <br><br>  Por causa disso, todos os tipos de coisas ruins acontecem.  O host ou o propriet√°rio do site n√£o pode controlar quais solicita√ß√µes est√£o sendo feitas, n√£o h√° informa√ß√µes abertas.  Por exemplo, o Google possui um banco de dados de sites com v√≠rus em que voc√™ pode se registrar como um sistema aut√¥nomo, confirmar de alguma forma que voc√™ √© um sistema aut√¥nomo e realmente ver por si mesmo quais sites, de acordo com o Google, espalham "malware" em seu sistema aut√¥nomo.  N√£o existe tal coisa com bloqueios - voc√™ confia apenas na notifica√ß√£o que chega at√© voc√™ e pode l√™-la a tempo. <br><br>  Os termos de intera√ß√£o com Roskomnadzor n√£o s√£o respeitados, e geralmente um pouco estranhos, apesar do fato de existirem padr√µes - enviar uma notifica√ß√£o em um dia, responder em um dia, tomar uma decis√£o em um dia.  Quando voc√™ recebe uma notifica√ß√£o e diz que n√£o possui essas informa√ß√µes e pede esclarecimentos, poder√° obter uma resposta em algumas semanas.  Ou talvez eles o bloqueiem e respondam que voc√™ ainda tem as informa√ß√µes.  Eu tive essas situa√ß√µes, mas poucas pessoas processam - eu n√£o conhe√ßo esses casos. <br><br>  Novamente, se uma notifica√ß√£o chegar, voc√™ nem sempre poder√° entender do que se trata.  Na maioria dos casos, Roskomnadzor normalmente descreve o que isso significa.  Mas, mesmo em nossa pr√°tica, houve tr√™s casos de micro-host, quando a descri√ß√£o deixou claro que tipo de informa√ß√£o est√°vamos falando.  Eu nem sabia o que escrever para o cliente - Roskomnadzor emite as atas e os textos da decis√£o apenas em tribunal, embora eles tenham esses documentos. <br><br><h2>  O tempo de aplica√ß√£o do "descarregamento" <br></h2><br>  Ent√£o, a decis√£o foi tomada, o provedor baixou o "upload" e depois fez algo com ele.  Existem duas op√ß√µes para a rapidez: um dia ou imediatamente. <br><br>  √â importante que o dia seja alocado para bloquear o recurso e desbloquear, se de repente for tomada uma decis√£o para desbloque√°-lo.  Para muitos, isso √© feito como atualiza√ß√µes noturnas do switch.  Pela minha experi√™ncia: n√£o recebi a notifica√ß√£o no prazo, o recurso foi bloqueado, o problema foi resolvido, mas voc√™ espera um dia enquanto eles o desbloqueiam.  Mas o neg√≥cio n√£o espera, h√° perdas. <br><br>  Mas agora nas normas muitas vezes a palavra <strong>"imediatamente"</strong> soa <strong>, por acordo verbal, isso √© uma hora</strong> .  Mas hoje existe um acordo verbal e amanh√£ n√£o.  Basicamente, a express√£o "imediatamente" agora se refere a decis√µes do Minist√©rio P√∫blico sobre extremismo. <br><br>  Para entender como tudo √© filtrado, voc√™ precisa saber o que est√° dentro da "descarga".  H√° uma lista de entradas no XML de um dos quatro tipos por tipo de bloqueio e detalhes da solu√ß√£o: <br><br><ol><li>  URL (s) + dom√≠nio + endere√ßo (s) IP; <br></li><li>  Dom√≠nio + endere√ßo (s) IP (s); <br></li><li>  O dom√≠nio com a m√°scara (* .example.com) + endere√ßo IP (a); <br></li><li>  Endere√ßo IP (a) - √© claro, existe um endere√ßo e ele est√° completamente bloqueado. <br></li></ol><br>  Para esclarecer quais s√£o os n√∫meros em quest√£o, abaixo est√£o as estat√≠sticas de 22 de janeiro de 2019. <br><img src="https://habrastorage.org/webt/1o/xn/59/1oxn59rg0lzgm-iewywnlanduja.jpeg"><br><br>  Importante: apenas 139 mil registros e o tipo mais popular de bloqueio √© "por dom√≠nio".  Estes s√£o os protocolos HTTP e HTTPS. <br><br><h2>  Toxicidade "descarregando" <br></h2><br>  Antes de bloquear o recurso, o provedor deve analisar o "descarregamento".  Tamb√©m h√° problemas com isso.  Chamei especificamente a aten√ß√£o para o fato de que ‚Äúdescarregar‚Äù n√£o √© um registro, mas um documento t√©cnico que √© emitido para o provedor para que ele tome decis√µes com base em seus dados.  Mas, apesar disso, o provedor precisa executar um processamento muito grande de ‚Äúdescarregamento‚Äù. <br><br>  Por exemplo, no "upload" h√° <strong>redund√¢ncia</strong> , os registros se sobrep√µem.  Se voc√™ usar um URL, isso n√£o significa que n√£o haver√° bloqueio pelo dom√≠nio contido nesse URL.  Atualmente, n√£o h√° muitos deles, pouco mais de tr√™s mil. <br><br>  O "upload" cont√©m <strong>URLs com fragmentos (#) e sess√µes</strong> .  Isso geralmente √© horr√≠vel, porque voc√™ precisa entender como √© o teste. <br><br>  O provedor deve trazer o "upload" para sua forma normal, porque cont√©m os <strong>URLs e dom√≠nios incorretos.</strong>  Basicamente, apenas barras invertidas agora s√£o encontradas.  Existem lacunas, mas elas s√£o rapidamente removidas e, por alguma raz√£o, por barras invertidas, um "amor" especial.  Bem, com as barras invertidas, eles decidiram a pergunta, mas se houver algum sinal de mais?  Portanto, sempre deve haver monitoramento, sempre algo a fazer. <br><br>  Mais uma vez, chamo a aten√ß√£o para o fato de que o <strong>problema do provedor √© nosso</strong> .  O que o provedor faz?  Uma motiva√ß√£o de 100 mil rublos √© uma boa motiva√ß√£o para garantir que, em caso de qualquer problema, mesmo com qualquer sugest√£o de problema, pique imediatamente e depois descubra. <br><br>  A relev√¢ncia de "descarregar" os endere√ßos IP que n√£o s√£o "bloqueados por endere√ßos IP", mas todo o resto (bloqueio por dom√≠nio, URL, m√°scara) √© algo parecido com isto. <br><img src="https://habrastorage.org/webt/lk/nw/0i/lknw0ihtkgp0cl9x0yh2rjtcrga.jpeg"><br><br>  Literalmente, pouco mais da metade √© relevante, e o restante √© picadinho. <br><br><h2>  Verificando bloqueios <br></h2><br>  Eu vou come√ßar do final. <br><br><blockquote>  Todo o hist√≥rico da implementa√ß√£o de bloqueios na R√∫ssia √© o hist√≥rico de verifica√ß√µes desses bloqueios. <br></blockquote><br>  Eu n√£o sei como no exterior, conosco √© absolutamente exatamente o hist√≥rico das inspe√ß√µes.  Todos os bloqueios n√£o s√£o feitos como est√° escrito, como faz√™-los, mas como eles verificam, porque ningu√©m gosta de pagar multas, especialmente 100 mil. <br><br>  Antes do registro de sites proibidos, havia uma lista de materiais extremistas do Minist√©rio da Justi√ßa (ela existe agora, est√° agora no registro e depois foi separada) e verifica√ß√µes de bloqueios de acusa√ß√µes nesta lista.  Sou um micro-hoster e consegui bloquear esses recursos de mim. <br><br>  Tipos de verifica√ß√£o existentes: <br><br><ul><li>  Inspe√ß√µes de campo (principalmente o Minist√©rio da Administra√ß√£o Interna, o FSB e a promotoria) - s√£o raras, mas existem. </li><li>  AS ‚ÄúInspector‚Äù √© um sistema automatizado favorito que verifica todos os fornecedores. </li></ul><br><img src="https://habrastorage.org/webt/59/ni/o1/59nio1btog0crenlyyzd-ffb65y.png"><br><br>  O "inspetor" fica atr√°s do filtro e finge ser um assinante.  Mas o dispositivo em si n√£o faz nada, recebe tarefas e responde a um determinado centro de controle, ou seja,  √© um shell t√£o remoto dentro da rede do provedor.  Ele age muito como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RIPE Atlas</a> . <br><br>  O centro de controle de um sistema automatizado √© um servi√ßo de alta carga real, porque temos 4 mil operadoras de telecomunica√ß√µes, elas n√£o t√™m uma rede, mas uma caixa deve estar em cada rede.  Ou seja, nem todo provedor, mas <strong>em cada rede de cada provedor</strong> .  Consequentemente, o centro de controle tem alguns problemas. <br><br>  Pergunta: h√° algum problema com o cheque em si?  Claro que existe. <br><br><h2>  Problemas de verifica√ß√£o <br></h2><br>  No SPECTRUM-2017 (um f√≥rum sob os ausp√≠cios da pr√≥pria Roskomnadzor), Veklich A.A., um dos chefes da Empresa Unit√°ria do Estado Federal do Principal Centro de Radiofrequ√™ncia (RFRC)  fez um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rio</a> completo sobre quais s√£o exatamente os problemas t√©cnicos com a inspe√ß√£o do ‚Äúinspetor‚Äù dos fornecedores. <br><br>  Problemas de verifica√ß√£o: <br><br><ul><li>  O "Inspetor" v√™ <strong>isso como um filtro de um provedor ou recurso?</strong>  Talvez tenha sido um de voc√™s que encontrou o banco de dados do "Inspetor" e todos os sites simplesmente fornecem um esbo√ßo que se parece com um esbo√ßo de provedor. </li><li>  <strong>Taxa de bloqueio</strong> - para todos os tipos de bloqueio (para HTTPS, dom√≠nio, endere√ßo IP), o que √© um indicador de que o recurso est√° bloqueado?  Por exemplo, voc√™ precisa verificar as portas pelo endere√ßo IP, isso √© um problema. </li><li>  <strong>Taxa de bloqueio para outros protocolos.</strong> </li><li>  <strong>Como verificar um dom√≠nio por m√°scara</strong> ?  Sob o asterisco, pode haver diferentes endere√ßos IP, diferentes dom√≠nios.  Posso colocar um filtro em toda a banda?  E para verificar isso - seletivamente ou gerar algum hash?  Devo dizer imediatamente que existe uma fechadura assim, mas ningu√©m a verifica. </li></ul><br><h2>  O m√©todo de trabalho do AS ‚ÄúInspector‚Äù <br></h2><br>  De acordo com esses problemas, foi criada a metodologia de trabalho do ‚ÄúExaminador‚Äù. <br><img src="https://habrastorage.org/webt/wh/ob/p4/whobp4kojjtmfwfyulrpff5z7po.png"><br><br>  E sim, seu slide ilustra completamente essa t√©cnica.  Eu n√£o entendo muito bem o qu√£o logicamente voc√™ pode viver com isso.  Para n√≥s, tudo isso se traduz no fato de que os provedores est√£o tentando resolver de alguma forma esse problema e torn√°-lo conveniente para eles mesmos, e nem sempre conveniente para n√≥s. <br><br>  Trabalhando sem uma t√©cnica, muitos provedores ganharam experi√™ncia existencial.  Em geral, toda a t√©cnica de bloqueio √© um caminho emp√≠rico que custa dinheiro, nervos, cai, mesmo agora, quando alguma t√©cnica j√° se acalmou um pouco. <br><br>  H√° uma sala de bate-papo n√£o oficial (que √© not√°vel - no Telegram, onde mais), onde os provedores se comunicam com os funcion√°rios do Centro de Frequ√™ncia de R√°dio.  O mais interessante √© que voc√™ pode obter ajuda real l√°, os funcion√°rios do Centro de Reservas Estaduais ajudam os provedores a resolver seus problemas e contam como o "Inspetor" funciona.  Mas tudo isso n√£o √© oficial, n√£o h√° documentos. <br><br>  Existe uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">norma de</a> Roskomnadzor sobre formas e m√©todos de restri√ß√£o de acesso, que √© registrada no Minist√©rio da Justi√ßa.  Vai especialmente no final, porque tem a menor prioridade.  Os fornecedores n√£o agem conforme escrito no regulamento, mas como o m√©todo de verifica√ß√£o funciona. <br><br><h2>  T√©cnica de trabalho com ‚Äúdescarregamento‚Äù <br></h2><br>  De acordo com o padr√£o e a experi√™ncia adquirida, mostrarei como eles funcionam com o "descarregamento", ou seja, como nossos recursos s√£o bloqueados. <br><br>  <strong>Por URL</strong> : <br><br><ul><li>  Se for um protocolo HTTP normal, filtre por cabe√ßalhos. </li><li>  Se o protocolo criptografado for HTTPS - filtre como um "dom√≠nio" </li></ul><br>  Por que geralmente n√£o est√° claro o URL com o protocolo criptografado, isso √© redund√¢ncia. <br><br>  <strong>Por dom√≠nio:</strong> <br><br><ul><li>  O protocolo HTTP usual √© um filtro pelo cabe√ßalho Host. </li><li>  Protocolo criptografado HTTPS - ou filtro DNS;  ou filtrar pelo cabe√ßalho SNI (ao estabelecer uma conex√£o criptografada, um cabe√ßalho n√£o criptografado com um nome de dom√≠nio dentro √© transmitido);  ou filtre por endere√ßo IP. </li><li>  Recomenda-se que outros protocolos sejam bloqueados pelo endere√ßo IP, mas como o "Inspetor" n√£o verifica isso, algu√©m faz isso, algu√©m n√£o faz. </li></ul><br>  O padr√£o diz que, no segundo caso, os bloqueios "por dom√≠nio" n√£o podem ser bloqueados pelo endere√ßo IP.  Mas o provedor, quando come√ßa a eliminar o filtro de maneira indesejada, inclui imediatamente outro n√≠vel, para n√£o ser multado.  Tal hist√≥ria n√£o √© incomum e naturalmente leva a danos adicionais aos neg√≥cios. <br><br>  Teoricamente, os provedores filtram o <strong>dom√≠nio com a m√°scara,</strong> assim como pelo dom√≠nio sem um asterisco.  Mais uma vez, n√£o h√° verifica√ß√µes, tamb√©m n√£o h√° problemas. <br><br>  <strong>Eles</strong> filtram por <strong>endere√ßo IP e bloco de endere√ßos IP,</strong> como sabem - algumas vezes no roteador de borda. <br><br><h3>  Participantes conscientes </h3><br>  Sabemos que n√£o apenas as pessoas "m√°s" s√£o bloqueadas, mas tamb√©m <strong>os participantes conscientes da Internet</strong> .  Por exemplo, quando uma pessoa n√£o tinha a inten√ß√£o de manter informa√ß√µes proibidas em sua hospedagem, mas n√£o leu a carta ou n√£o recebeu uma notifica√ß√£o. <br><br>  O segundo grupo √© de participantes estrangeiros.  Eles vivem em seu campo jur√≠dico e n√£o violam a lei.  Eles podem rir, por exemplo, de subornos, n√£o v√™em nada de errado nisso.  Por exemplo, os hosters nem sequer t√™m o direito de excluir essas informa√ß√µes, porque as leis n√£o se aplicam a eles.  Eles n√£o s√£o pessoas m√°s, mas os bloqueios tamb√©m os atingem. <br><br><h3>  Problemas de filtragem </h3><br>  Vamos dar uma olhada nos problemas, falar sobre a filtragem de DNS, recomendada pela norma. <br><br>  Primeira pergunta: de <strong>onde vem o DNS</strong> ?  De fato, informa√ß√µes proibidas podem ser postadas, mas o DNS representa o servi√ßo que as pessoas precisam, assim como o DNS, por exemplo, endere√ßos IP.  Ao fingir DNS, nem tudo √© muito bom, e n√£o est√° claro o porqu√™. <br><br>  O segundo ponto √© a implementa√ß√£o da <strong>intercepta√ß√£o</strong> de <strong>DNS</strong> .       (     ‚Äî   ),      . ,        .ru   DNS,    ,       DNS. <br><br>    ,  <strong>   </strong> .        .   ,   . <br><br>      DNS (DNSCrypt, DoT, DoH)       DNS. <br><br>        ,       IP,        HTTP/HTTPS.      ?    , , ,   Telegram   ( ) ‚Äî    ? <strong>    </strong> ! <br><br>     ‚Äî ,    ‚Äî  ,    443:  SNI, SNI  (ESNI)    , , QUIC, DNSCrypt, VPN, MTProto-proxy? <br><br>  , , Google,    SNI,    DNSCrypt  443 .      -.  ,  ,       HTTPS,   .         ,      . <br><br><h2>   <br></h2><br>     , ,  100  .     ,  IP-,     .    ,   ,   ,  . <br><br>    ,  ¬´  !¬ª. ¬´¬ª       ,   ¬´¬ª,    ,  .  ,     .      -  100 ,     . <br><img src="https://habrastorage.org/webt/cv/i7/p2/cvi7p2b4z1mknqwuh1vgsjrju_c.png"><br><br>       ‚Äî  ,     .   IP,  ,    ¬´¬ª IP . ,     IP (   ),   ,   ,    . <br><img src="https://habrastorage.org/webt/nd/vi/0n/ndvi0nvlgvtc-yojul6bslqxn_e.png"><br><br>  :   IP ,   ¬´¬ª   IP,    ,       ,  ¬´¬ª  ‚Äî   . ,         ,      . <br><br>     : <br><br><ul><li> ; </li><li> ; </li><li>  ,     . </li></ul><br>         .  ,      . , LiveJournal    -   - CDN,   /23     IP.   ,   ,    . <br><br><h2> ¬´¬ª  <br></h2><br>  ¬´¬ª,      ,     ¬´¬ª,  , ,     .         ,   ¬´¬ª.  ¬´¬ª    ,     ,      . <br><br>    ¬´¬ª  200 ¬´¬ª ,       .   ,     ,   . ,  ,  . <br><br>    ? <br><img src="https://habrastorage.org/webt/eg/2g/t_/eg2gt_bfkscybjrod2r93_lbggs.png"><br><br>     , , .   MSK-IX,   MSK-IX   ,     .    -      DNS-. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">DNS-</a>   ,  -  ¬´¬ª ,    IP-    ,  ,     IP-  ,   .. - ,       , . <br><br> , ,    ,     .    ,    ,      ¬´¬ª, ,  5  2017     . <br><br>         .    ,     .        DDoS,           . <br><br>  ,  - - ? <br><img src="https://habrastorage.org/webt/ye/63/gq/ye63gqphufbkczl3gtyjuxdgtcm.png"><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">14  2018 </a> :   ,    ¬´¬ª . -  4 ,    400 ,    4 000 IP-.  ,        , -  600     ,  20%  TK    . <br><br>    : <br><img src="https://habrastorage.org/webt/gl/5r/ss/gl5rss-uqew3jaepytl-1z3lg6u.png"><br><br>   ,   IP-    ¬´¬ª. 5     : ¬´     ‚Äî      - ?¬ª     .   ,      IP         (   ),    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> : DIGITAL RESISTANCE. <br><br>      : ¬´ !¬ª,     .   ,     ,   -   .   ,   2   ,  2  ,      - .     ¬´¬ª   ¬´¬ª   4 000,     ,      . ,  ,         ‚Äî   1538. <br><br>  ,         ‚Äî    - ! <br><br> ,    .   ,      -    : - , <strong>   </strong> .   ,     . , ,  DNS- ‚Äî      ,     ,         .    ¬´¬ª ,     . <br><br> ,          -   HTTP  ,      .   Motobratan.ru     ,    .     ,           . <br><br><h2>   <br></h2><br> -      , : <br><br><ul><li>    ¬´¬ª; </li><li>     , ¬´¬ª  ; </li><li>  ; </li><li>   . </li></ul><br> ,  ‚Äî   .    ,  ,    .           ¬´¬ª.    ¬´¬ª,   ,  : ¬´,  ,  !¬ª          ¬´¬ª   ,   -  .         -  . <br><br>  ,     ,      ¬´¬ª,   . <br><br><h2>  <br></h2><br>    ,      , ‚Äî <strong> </strong> .   : <br><br><ul><li>     . </li><li>   ‚Äî      ,  ,    . </li><li>     ‚Äî     ? , Kubernetes   ,           ‚Äî  Continuous Integration! </li></ul><br>   ‚Äî <strong> DPI</strong> ,     ,    .    ,   DPI   . -,   - ,   .  DPI   , ,       DPI,     .  <strong></strong>   .    DPI   ,  ,     . <br><br>    ‚Äî   <strong>  DNS  </strong> ,    . <br><br><ul><li>   ,   DNS     ,     ‚Äî  . </li><li>       ,     .  , ,     . </li><li>   ,    DNS,    ¬´¬ª . </li></ul><br>     : <strong>   Telegram?</strong> <br><br>    ,  : .  Telegram ,     , ,   DPI  <strong>  </strong> . ,     ,     ,       Telegram. <br><br> ,             . <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a>  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Telegram-</a>      @usher2    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">schors</a> <br><br><blockquote>             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HighLoad++</a> 2018.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ‚Äî  ,    . ,     ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Saint HighLoad++</a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt431188/">https://habr.com/ru/post/pt431188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt431176/index.html">Microsservi√ßos, APIs e inova√ß√µes: o poder das APIs</a></li>
<li><a href="../pt431178/index.html">Palavras parasitas em ingl√™s</a></li>
<li><a href="../pt431180/index.html">JS ext no servidor</a></li>
<li><a href="../pt431184/index.html">Redes mesh WIFI multi-hop usando a tecnologia Mesh Connex</a></li>
<li><a href="../pt431186/index.html">Design por tipos: Como tornar estados inv√°lidos inexprim√≠veis em C #</a></li>
<li><a href="../pt431190/index.html">Como avaliar o n√≠vel da empresa de SEO sem concluir um acordo com ela</a></li>
<li><a href="../pt431192/index.html">AWC apresenta Firecracker - micro-virtualiza√ß√£o para Linux</a></li>
<li><a href="../pt431194/index.html">Hardcore tubo quente. Como foi o DotNext 2018 Moscow</a></li>
<li><a href="../pt431196/index.html">Como o Yandex.Taxi prev√™ o tempo de entrega do carro usando o aprendizado de m√°quina</a></li>
<li><a href="../pt431198/index.html">Como o expedidor funciona</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>