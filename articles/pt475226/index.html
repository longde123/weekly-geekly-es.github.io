<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèø üë©üèæ‚Äçüíº üíä Est√°gio na Funda√ß√£o Haxe üßë üëäüèª üîΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apresento a voc√™ a tradu√ß√£o de outro relat√≥rio do HaxeUp Sessions 2019 Linz , acredito que seja um bom complemento para o anterior , porque continua o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Est√°gio na Funda√ß√£o Haxe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475226/"><p>  Apresento a voc√™ a tradu√ß√£o de outro relat√≥rio do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HaxeUp Sessions 2019 Linz</a> , acredito que seja um bom complemento para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anterior</a> , porque  continua o tema das mudan√ßas no Haxe ocorridas em 2019, bem como uma pequena conversa sobre seu futuro. <br>  Um pouco sobre o autor do relat√≥rio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aurel Bili se</a> reuniu com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Haxe</a> , participando de v√°rios atolamentos de jogos, e ele continua a participar deles (por exemplo, aqui est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o jogo do √∫ltimo Ludum Dare 45</a> ). </p><br><p><img src="https://habrastorage.org/webt/ad/lm/cg/adlmcgnsnfq_dtf9i0ouddgb1s4.png" alt="imagem"></p><a name="habracut"></a><br><p>  Atualmente, Aurel est√° concluindo os estudos no Imperial College London, o que implica est√°gios obrigat√≥rios.  O primeiro est√°gio que ele realizou foi em um escrit√≥rio remoto, o caminho para o qual demorou muito tempo.  Portanto, ele esperava que a pr√≥xima pr√°tica fosse poss√≠vel passar remotamente. </p><br><p><img src="https://habrastorage.org/webt/ke/tq/ii/ketqiipd9nlnfto-m0aa9l9juoa.png" alt="imagem"></p><br><p>  Aconteceu que a Funda√ß√£o Haxe por um longo tempo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o conseguiu encontrar um funcion√°rio</a> para o cargo de desenvolvedor do compilador.  Aurel decidiu tentar a sorte e enviou uma carta solicitando trabalho remoto.  Ele teve sorte - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">foi aceito em um est√°gio de seis meses</a> com a oportunidade de trabalhar em Londres. </p><br><p><img src="https://habrastorage.org/webt/r7/ur/rp/r7urrpmlbvyzoqpz4funq_i7isq.png" alt="imagem"></p><br><p>  Ao configurar o dispositivo, foi acordado o conjunto de tarefas nas quais Aurel estava envolvido (embora nem tudo tenha sido realizado). </p><br><p><img src="https://habrastorage.org/webt/nx/sp/ok/nxspokz8gogufn1xujawaocuvfg.png" alt="imagem"></p><br><p>  O que ele fez? </p><br><p>  Primeiramente, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> , que estava em um estado triste: todas as altera√ß√µes na sintaxe, novos recursos da linguagem e compilador foram descritos, se√ß√µes sobre strings, literais e constantes foram complementadas. </p><br><p><img src="https://habrastorage.org/webt/5o/f8/0x/5of80xs7hqjc7br0o8wzdtvylfe.png" alt="imagem"></p><br><p>  Toda a documenta√ß√£o foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">traduzida do LaTeX para o Markdown</a> ! </p><br><p><img src="https://habrastorage.org/webt/8h/8a/zi/8h8aziozlhimxivhbqe6eaen8nm.png" alt="imagem"></p><br><p>  Em segundo lugar, a formata√ß√£o do c√≥digo da biblioteca padr√£o foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reduzida para um √∫nico estilo</a> (j√° que pessoas diferentes com estilos diferentes de design de c√≥digo trabalharam nele por mais de 10 anos).  Assim, no reposit√≥rio do compilador Haxe, Aurel ficou em s√©timo lugar no n√∫mero de linhas de c√≥digo adicionadas :) </p><br><p><img src="https://habrastorage.org/webt/_1/ue/dr/_1uedrmupcaktuprps7tozfstvc.png" alt="imagem"></p><br><p> Em terceiro lugar, Aurel tamb√©m trabalhou na biblioteca e compilador padr√£o: <br>  Por exemplo, o container <code>Map</code> possui um novo m√©todo <code>clear()</code> que remove todos os valores armazenados.  Isso foi feito principalmente para a conveni√™ncia de trabalhar com cont√™ineres criados como vari√°veis <code>final</code> (ou seja, eles n√£o podem receber um novo valor, mas podem ser modificados): </p><br><p><img src="https://habrastorage.org/webt/w4/im/py/w4impyixozfnotxgvysk9lmkg_g.png" alt="imagem"></p><br><p>  Para objetos do tipo <code>Date</code> , m√©todos para trabalhar com datas no formato UTC (hor√°rio universal universal) apareceram.  O trabalho neles mostrou o qu√£o dif√≠cil √© implementar uma √∫nica API que funcione igualmente em todos os 11 idiomas / plataformas suportados pelo Haxe. </p><br><p><img src="https://habrastorage.org/webt/sb/qy/xb/sbqyxbkfhn0u7okjsppcuvf4t8s.png" alt="imagem"></p><br><p>  No compilador antigo, as defini√ß√µes e metatags foram definidas no OCaml, mas agora s√£o descritas no formato JSON, o que deve simplificar a an√°lise por utilit√°rios externos (por exemplo, para gerar automaticamente a documenta√ß√£o): </p><br><p><img src="https://habrastorage.org/webt/ne/r4/eo/ner4eouacu_md7zihgqrz3uiqnm.png" alt="imagem"></p><br><p>  Voc√™ tamb√©m pode perceber que em projetos grandes, o servidor de compila√ß√£o come√ßa a usar muita mem√≥ria. </p><br><p><img src="https://habrastorage.org/webt/xq/q9/r_/xqq9r_cwnt_fzqrszdk5puijd64.png" alt="imagem"></p><br><p>  Para resolver esse problema, Simon Kraevsky e Aurel desenvolveram o formato bin√°rio hxb, usado para serializar o AST digitado.  Agora, o servidor de compila√ß√£o pode carregar o m√≥dulo na mem√≥ria, trabalhar com ele at√© que seja necess√°rio e, em seguida, descarreg√°-lo da mem√≥ria para um arquivo no formato hxb e liberar a mem√≥ria ocupada. </p><br><p><img src="https://habrastorage.org/webt/4e/gm/9w/4egm9wqmkufwq98hkbav5h3sgqo.png" alt="imagem"></p><br><p>  A especifica√ß√£o do formato hxb est√° dispon√≠vel <a href="">em um reposit√≥rio separado</a> e sua implementa√ß√£o atual no compilador (com serializador / desserializador) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fica em uma ramifica√ß√£o Haxe separada</a> .  O trabalho sobre esse recurso ainda n√£o foi conclu√≠do e talvez seja exibido no Haxe 4.1. </p><br><p><img src="https://habrastorage.org/webt/fw/1k/cp/fw1kcp-bt-auctqpfstvjdjr_i0.png" alt="imagem"></p><br><p>  O quarto e principal foco do trabalho de Aurel durante o est√°gio foi a cria√ß√£o de uma nova API de sistema ass√≠ncrono - asys. </p><br><p><img src="https://habrastorage.org/webt/lk/vu/6k/lkvu6kx-jkyhsylbt-axraassom.png" alt="imagem"></p><br><p>  A necessidade de sua cria√ß√£o se deve ao fato de a API existente n√£o fornecer maneiras f√°ceis de executar opera√ß√µes do sistema de forma ass√≠ncrona.  Por exemplo, para trabalhar com arquivos de forma ass√≠ncrona, voc√™ precisar√° criar um encadeamento separado no qual as opera√ß√µes necess√°rias ser√£o executadas e controlar manualmente seu estado.  Al√©m disso, a API atual n√£o possui toda a funcionalidade para trabalhar com soquetes UDP, que est√£o em bibliotecas padr√£o em outros idiomas, n√£o h√° suporte para soquetes IPC. </p><br><p><img src="https://habrastorage.org/webt/b0/ba/3o/b0ba3orzpj8i8ja2e3-p5enhbi8.png" alt="imagem"></p><br><p>  Ao criar e implementar uma nova API, surgem muitas perguntas: </p><br><p>  Como projetar uma API?  Talvez valha a pena tomar um existente como exemplo?  Afinal, n√£o queremos criar tudo do zero, porque  isso levar√° mais tempo e poder√° n√£o ser do gosto do resto da equipe e causar muito debate. </p><br><p>  E, como j√° mencionado, o problema real do Haxe √© a implementa√ß√£o de uma √∫nica API para todas as plataformas suportadas. </p><br><p><img src="https://habrastorage.org/webt/nd/lk/gp/ndlkgpmojw_uhnil6kdnazwn-k8.png" alt="imagem"></p><br><p>  A API Node.js. foi escolhida como uma amostra.  √â bem pensado, suporta as fun√ß√µes necess√°rias do sistema e √© adequado para a cria√ß√£o de aplicativos de servidor. </p><br><p><img src="https://habrastorage.org/webt/va/ih/0y/vaih0yr_x7telwmirbhputnxz7o.png" alt="imagem"></p><br><p>  Mas, ao mesmo tempo, a API do Node.js. √© uma API Javascript sem digita√ß√£o forte.  Por exemplo, fun√ß√µes do m√≥dulo <code>fs</code> para trabalhar com o sistema de arquivos podem assumir como caminhos cadeias de caracteres ou objetos como <code>Buffer</code> e at√© <code>URL</code> .  E isso n√£o √© t√£o bom para Haxe. </p><br><p><img src="https://habrastorage.org/webt/pa/xt/v4/paxtv4f4oiqri_gzpd4jrhyv_y8.png" alt="imagem"></p><br><p>  O Node.js, por sua vez, usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a biblioteca libuv</a> escrita em C. Trabalhar com a API libuv diretamente do Haxe n√£o seria t√£o conveniente: por exemplo, para renomear o arquivo de forma ass√≠ncrona, voc√™ precisaria criar adicionalmente objetos como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>uv_loop_t</code></a> (estrutura para gerenciamento loop de evento no libuv) e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>uv_fs_t</code></a> (estrutura para descrever uma solicita√ß√£o ao sistema de arquivos): </p><br><p><img src="https://habrastorage.org/webt/oe/7w/cs/oe7wcsi9ebwntb7g2hrzab4ognu.png" alt="imagem"></p><br><p>  Como resultado, as APIs Node.js e libuv foram integradas da seguinte maneira (usando o interpretador de macro eval e o m√©todo de <code>rename</code> como exemplo): </p><br><ul><li>  eles pegaram o m√©todo API do Node.js, o converteram no Haxe, tentando padronizar os tipos de argumentos e se livrar dos argumentos redundantes para o Haxe.  Por exemplo, argumentos de caminho (do tipo <code>FilePath</code> ) s√£o abstratos sobre cadeias: </li></ul><br><p><img src="https://habrastorage.org/webt/i-/-c/qb/i--cqbg076qynad4g4dfjhdupe8.png" alt="imagem"></p><br><ul><li>  Em seguida, criei os ligadores OCaml para este m√©todo: </li></ul><br><p><img src="https://habrastorage.org/webt/hh/zl/-9/hhzl-9gd0eqcqb1y3iw6sqghx1w.png" alt="imagem"></p><br><ul><li>  OCaml e C vinculados (usando CFFI - C Foreign Function Interface): </li></ul><br><p><img src="https://habrastorage.org/webt/n4/ia/8c/n4ia8cqs9c4zhhsezhxyu_kdrcs.png" alt="imagem"></p><br><ul><li>  e finalmente escreveu C-binders para chamar fun√ß√µes libuv C do OCaml: </li></ul><br><p><img src="https://habrastorage.org/webt/zx/gw/tn/zxgwtnacpaeyyik19zq6ijif4lo.png" alt="imagem"></p><br><p>  Da mesma forma, isso foi feito para o HashLink e o Neko (por enquanto, a API asys √© implementada apenas para essas tr√™s plataformas).  Como voc√™ pode imaginar, foi preciso muito trabalho. </p><br><p>  Aurel mostrou alguns aplicativos pequenos que demonstram como a API do asys funciona. <br>  O primeiro exemplo √© uma demonstra√ß√£o de leitura ass√≠ncrona do conte√∫do de um arquivo.  At√© o momento, o c√≥digo chama explicitamente m√©todos para inicializar o libuv ( <code>hl.Uv.init()</code> ) e iniciar o ciclo do aplicativo ( <code>hl.Uv.run()</code> ), devido ao fato de que o trabalho na API n√£o foi conclu√≠do (mas no futuro) eles ser√£o adicionados automaticamente): </p><br><p><img src="https://habrastorage.org/webt/4o/sy/fn/4osyfne9qtpdb_mf1ukbwkoat6w.png" alt="imagem"></p><br><p>  O resultado do c√≥digo mostrado: </p><br><p><img src="https://habrastorage.org/webt/qj/_w/xa/qj_wxapicgolrogp5t9dkwg6yeq.png" alt="imagem"></p><br><p>  Vimos que os resultados dos m√©todos chamados <code>AsyncFileSystem.readFile()</code> s√£o exibidos no console ap√≥s o rastreamento de "ap√≥s chamada", que √© chamado no c√≥digo depois de tentar ler o conte√∫do dos arquivos. </p><br><p>  O segundo exemplo √© uma demonstra√ß√£o de opera√ß√£o ass√≠ncrona com endere√ßos DNS e IP. </p><br><p><img src="https://habrastorage.org/webt/o8/fj/98/o8fj98v5f9mi_r18b4om36bye5c.png" alt="imagem"></p><br><p>  Na nova API, ser√° muito mais f√°cil determinar o nome do host, bem como m√©todos auxiliares para trabalhar com endere√ßos IP. </p><br><p><img src="https://habrastorage.org/webt/ad/ok/u4/adoku4ngzznjwcuerfz7tq-wm60.png" alt="imagem"></p><br><p>  O terceiro exemplo √© um servidor de eco TCP simples, que requer apenas tr√™s linhas de c√≥digo para criar: </p><br><p><img src="https://habrastorage.org/webt/43/8c/-p/438c-pfd3o-s58ncrjwkoyvy_lk.png" alt="imagem"></p><br><p>  Um quarto exemplo √© uma demonstra√ß√£o da troca de informa√ß√µes entre processos: <br>  o m√©todo est√°tico <code>makeFrame()</code> neste exemplo cria imagens png separadas: </p><br><p><img src="https://habrastorage.org/webt/n8/-e/qw/n8-eqwrdqpzwha0k3i08hwnsdey.png" alt="imagem"></p><br><p>  e no m√©todo <code>main</code> , iniciamos o processo ffmpeg, para o qual transferiremos os quadros gerados em <code>makeFrame()</code> : </p><br><p><img src="https://habrastorage.org/webt/nq/ih/qn/nqihqnbutuomwmjp5spv7uy456q.png" alt="imagem"></p><br><p>  e a sa√≠da ser√° um arquivo de v√≠deo: </p><br><p><img src="https://habrastorage.org/webt/vl/l1/af/vll1aftw7wbvvptcargllfzmngs.png" alt="imagem"></p><br><p>  E o quinto exemplo √© o fluxo de v√≠deo UDP.  Aqui, como no exemplo anterior, o processo ffmpeg √© iniciado, mas desta vez ele reproduz o v√≠deo e envia seus dados para o fluxo de sa√≠da padr√£o.  Tamb√©m √© criado um soquete UDP que converter√° os dados do processo ffmpeg. </p><br><p><img src="https://habrastorage.org/webt/rb/oz/79/rboz79aci2nd3npqbdn7lguqcuq.png" alt="imagem"></p><br><p>  E finalmente, dividimos os dados recebidos do ffmpeg em "partes" menores e os convertemos para a porta especificada: </p><br><p><img src="https://habrastorage.org/webt/9v/9_/e4/9v9_e4g_qs9ahrtkfwiewlfz0so.png" alt="imagem"></p><br><p>  E, como resultado, obtemos um fluxo de v√≠deo de trabalho: </p><br><p><img src="https://habrastorage.org/webt/q1/xd/e7/q1xde7iq24modwdqgpdwkzp4e4o.png" alt="imagem"></p><br><p>  Resumindo o acima, a nova API asys inclui: </p><br><ul><li>  m√©todos para trabalhar com o sistema de arquivos, incluindo novas fun√ß√µes que n√£o estavam na biblioteca padr√£o (por exemplo, para alterar permiss√µes), bem como vers√µes ass√≠ncronas de todas as fun√ß√µes dispon√≠veis na antiga biblioteca padr√£o </li><li>  suporte para opera√ß√£o ass√≠ncrona com soquetes TCP / UDP / IPC </li><li>  m√©todos para trabalhar com DNS (at√© agora 2 m√©todos: <code>lookup</code> e <code>reverse</code> ) </li><li>  bem como m√©todos para trabalho ass√≠ncrono com processos. </li></ul><br><p><img src="https://habrastorage.org/webt/va/xf/5j/vaxf5j-sza0yvdr0zbb3uoepizw.png" alt="imagem"></p><br><p>  O trabalho na API asys ainda n√£o foi conclu√≠do; no momento, existem alguns problemas com o coletor de lixo ao trabalhar com a biblioteca libuv.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Pull Request</a> com as altera√ß√µes correspondentes ainda n√£o foi incorporado ao ramo principal do Haxe; os coment√°rios sobre ele recebem opini√µes sobre os nomes de novos m√©todos, suas assinaturas e documenta√ß√£o. <br>  Como j√° mencionado, o suporte √† API asys √© implementado apenas para HashLink, Eval e Neko (na forma de tr√™s solicita√ß√µes pull separadas).  Aurel j√° formou um plano sobre como adicionar suporte para a nova API para C ++ e Lua.  A implementa√ß√£o para outras plataformas exigir√° pesquisa adicional. </p><br><p><img src="https://habrastorage.org/webt/xe/vc/bl/xevcblkgoyvhwm2zbzbchdysoks.png" alt="imagem"></p><br><p>  √â poss√≠vel que a API asys esteja dispon√≠vel no Haxe 4.1 (mas apenas em algumas plataformas). </p><br><p>  Aurel tamb√©m falou sobre seu projeto paralelo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a biblioteca ammer</a> (que, no entanto, est√° associada ao seu trabalho na Funda√ß√£o Haxe). </p><br><p><img src="https://habrastorage.org/webt/io/9w/fo/io9wfoogbdtulgmplmgfl0_lnde.png" alt="imagem"></p><br><p>  O objetivo da Ammer √© automatizar a cria√ß√£o de binders para bibliotecas C, para que possam ser usados ‚Äã‚Äãno HashLink e no HXCPP (em outubro de 2018, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lars Duse designou uma taxa</a> para resolver esse problema). </p><br><p>  Por que essa tarefa foi relevante?  O fato √© que, embora o processo de cria√ß√£o de ligantes para o HashLink e o HXCPP seja semelhante, para cada plataforma, voc√™ precisar√° escrever seu pr√≥prio c√≥digo de cola. </p><br><p>  Aurel fez aproximadamente a mesma coisa quando integrou a biblioteca libuv no Haxe - para Eval, Neko e HashLink, ele teve que escrever o mesmo c√≥digo que diferia apenas em detalhes (chamadas de fun√ß√£o, diferen√ßas no trabalho da FFI, etc.): </p><br><p><img src="https://habrastorage.org/webt/b5/mr/h4/b5mrh4kfwydttjk5iz5vhlqxrhw.png" alt="imagem"></p><br><p>  Um trabalho semelhante foi necess√°rio para ser feito no lado Haxe, para que fun√ß√µes nativas pudessem ser chamadas a partir dele: </p><br><p><img src="https://habrastorage.org/webt/sm/oj/5z/smoj5ziapdbfupnznqm5tdzjxsy.png" alt="imagem"></p><br><p>  E a id√©ia do ammer √© pegar a vers√£o Haxe da API, n√£o cheia de informa√ß√µes redundantes, e fazer com que esse c√≥digo funcione de alguma forma para todas as plataformas: </p><br><p><img src="https://habrastorage.org/webt/z7/qw/x3/z7qwx3d5tphczllt6lxxxsyjhuy.png" alt="imagem"></p><br><p>  O que o ammer agora √© necess√°rio para usar bibliotecas externas C: </p><br><ul><li>  crie a especifica√ß√£o Haxe para a biblioteca, que √© essencialmente uma externa √† biblioteca usada </li><li>  escrever c√≥digo do aplicativo </li><li>  compilar o projeto especificando caminhos para arquivos de cabe√ßalho e arquivos da biblioteca C </li><li>  ... </li><li>  lucro </li></ul><br><p><img src="https://habrastorage.org/webt/bq/yg/tj/bqygtjjw4ike8exjibcpjjk_pg8.png" alt="imagem"></p><br><p>  Sob o cap√¥, o ammer faz o seguinte: </p><br><ul><li>  corresponde aos tipos, dependendo da plataforma de destino </li><li>  gera automaticamente o c√≥digo C para chamar fun√ß√µes nativas </li><li>  gera um makefile usado para criar arquivos hdll, ndll </li></ul><br><p><img src="https://habrastorage.org/webt/lt/fa/yy/ltfayydbhqtof2itvy-hwmqo-ha.png" alt="imagem"></p><br><p>  A Ammer atualmente suporta: </p><br><ul><li>  fun√ß√µes simples </li><li>  define'y a partir dos arquivos de cabe√ßalho (no c√≥digo Hax, eles podem ser acessados ‚Äã‚Äãcomo constantes) </li><li>  ponteiros </li></ul><br><p>  Suporte planejado: </p><br><ul><li>  retornos de chamada (eles ainda est√£o em falta) </li><li>  e estruturas (muito necess√°rias para trabalhar com a C-API) </li></ul><br><p><img src="https://habrastorage.org/webt/o3/n1/ul/o3n1ul7h6wyf2kwx1t1k8rfiluc.png" alt="imagem"></p><br><p>  Agora, o ammer trabalha com C ++, HashLink e Eval.  E Aurel tem certeza de que pode adicionar suporte para outras plataformas de sistema. </p><br><p><img src="https://habrastorage.org/webt/12/ea/cq/12eacqp3bshywrwjg5a-9ufbtym.png" alt="imagem"></p><br><p>  Para demonstrar os recursos do ammer, Aurel mostrou um pequeno aplicativo que executa o interpretador Lua: </p><br><p><img src="https://habrastorage.org/webt/5y/m-/t2/5ym-t2a72kbdezhqud58ao4vv8y.png" alt="imagem"></p><br><p>  Os ligantes utilizados s√£o os seguintes: </p><br><p><img src="https://habrastorage.org/webt/ju/8j/to/ju8jtoyqggua_7h4xu6tt-9yy_i.png" alt="imagem"></p><br><p>  Como voc√™ pode ver, alguns m√©todos s√£o comentados, porque  eles usam retornos de chamada, cujo suporte ainda n√£o foi realizado, mas Aurel espera que ele conserte isso em breve. </p><br><p><img src="https://habrastorage.org/webt/04/8d/bu/048dbumtdbyuogq0mvgt_qlt5jc.png" alt="imagem"></p><br><p>  Ent√£o, para que ammer pode ser usado: </p><br><ul><li>  incorporando uma m√°quina virtual Lua </li><li>  criando aplicativos em SDL </li><li>  a automa√ß√£o do trabalho com o libuv √© poss√≠vel (como mostrado anteriormente, agora √© preciso muito c√≥digo escrito √† m√£o para trabalhar com o libuv) </li><li>  e, √© claro, simplificar√° bastante o uso de muitas outras bibliotecas C √∫teis (como OpenAL, Dear-imgui, etc.) </li></ul><br><p><img src="https://habrastorage.org/webt/al/xa/jq/alxajqjpsgyeyttibyyg232jhci.png" alt="imagem"></p><br><p>  Embora o est√°gio de Aurel na Funda√ß√£o Haxe tenha terminado, ele planeja continuar trabalhando com a Haxe, como  sua educa√ß√£o universit√°ria ainda n√£o foi conclu√≠da e ele ainda precisa escrever seu trabalho final.  Aurel j√° sabe no que ser√° dedicado - melhorar o trabalho do coletor de lixo no HashLink.  Bem, ser√° interessante! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475226/">https://habr.com/ru/post/pt475226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475202/index.html">Primeira impress√£o do Xiaomi MIUI 11</a></li>
<li><a href="../pt475206/index.html">Quadrosc√≥pio de acordo com o esquema de Kutter 4 x 0,5 m para pesquisa astron√¥mica em alta velocidade</a></li>
<li><a href="../pt475208/index.html">Mudan√ßa para a Europa: aventura e descobertas</a></li>
<li><a href="../pt475212/index.html">Pesquise dados e objetos no banco de dados MS SQL Server usando o utilit√°rio dbForge Search gratuito</a></li>
<li><a href="../pt475218/index.html">Protocolos criptogr√°ficos: defini√ß√µes, registros, propriedades, classifica√ß√£o, ataques</a></li>
<li><a href="../pt475228/index.html">Garfo de folha de pagamento. Voc√™ √© um programador para mam√£e</a></li>
<li><a href="../pt475236/index.html">Nunca ignore o treinamento de refor√ßo novamente.</a></li>
<li><a href="../pt475238/index.html">Linha do tempo do Blade Runner - novembro de 2019. A previs√£o se tornou realidade?</a></li>
<li><a href="../pt475240/index.html">Usando m√≥dulos rigorosos em projetos Python em larga escala: experi√™ncia no Instagram. Parte 1</a></li>
<li><a href="../pt475242/index.html">Usando m√≥dulos rigorosos em projetos Python em larga escala: experi√™ncia no Instagram. Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>