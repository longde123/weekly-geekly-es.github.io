<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíô üçÑ üêí Mais do que camadas conc√™ntricas üë©üèª‚Äç‚öïÔ∏è ‚óæÔ∏è üè≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo faz parte do Chronicle of Software Architecture , uma s√©rie de artigos sobre arquitetura de software. Neles, escrevo sobre o que aprendi s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mais do que camadas conc√™ntricas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428431/"><img src="https://habrastorage.org/webt/lm/yh/jm/lmyhjmjqhejzhfwqvxvozhtjt3g.jpeg"><br><br>  <i>Este artigo faz parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chronicle of Software Architecture</a> , uma s√©rie de artigos sobre arquitetura de software.</i>  <i>Neles, escrevo sobre o que aprendi sobre arquitetura de software, o que penso e como uso o conhecimento.</i>  <i>O conte√∫do deste artigo pode fazer mais sentido se voc√™ ler os artigos anteriores da s√©rie.</i> <br><br>  Em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior da</a> s√©rie, publiquei um mapa conceitual que mostra os relacionamentos entre os tipos de c√≥digo. <br><br>  Mas sempre me pareceu que nem tudo est√° muito bem refletido l√°, eu simplesmente n√£o sabia como faz√™-lo melhor.  √â sobre um n√∫cleo comum. <br><br>  Al√©m disso, surgiram mais alguns pensamentos que descreverei neste pequeno artigo. <br><a name="habracut"></a><br>  No infogr√°fico do √∫ltimo artigo desta s√©rie, no centro do diagrama, vemos o n√∫cleo comum.  Parece estar localizado dentro da camada de dom√≠nio e acima das se√ß√µes c√¥nicas, que s√£o contextos limitados. <br><br> <a href=""><img src="https://habrastorage.org/webt/mm/07/bx/mm07bx1u2dxlgab0prkzllunvf8.png"></a> <br><br>  Apesar da localiza√ß√£o, n√£o quis dizer que o n√∫cleo comum depende do restante do c√≥digo ou que o n√∫cleo comum √© outra camada dentro do n√≠vel do dom√≠nio. <br><br><h1>  O que √© um n√∫cleo comum ?! </h1><br>  O n√∫cleo comum, conforme definido por Eric Evans, o <i>pai do</i> DDD, √© o c√≥digo que a equipe de desenvolvimento decide dividir entre v√°rios contextos limitados: <br><br><blockquote>  [...] um subconjunto do modelo de dom√≠nio que as duas equipes concordaram em usar juntas.  Obviamente, junto com esse subconjunto do modelo, o n√∫cleo comum inclui um subconjunto da arquitetura de c√≥digo ou banco de dados associada a essa parte do modelo.  Esse material claramente geral tem um status especial e n√£o deve ser alterado sem consultar outra equipe. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúCommon Kernel‚Äù</a> , DDD Wiki de Ward Cunningham </blockquote><br>  Assim, pode ser qualquer tipo de c√≥digo: c√≥digo no n√≠vel do dom√≠nio, c√≥digo no n√≠vel do aplicativo, bibliotecas ... qualquer que seja. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/edc/a8f/2f5/edca8f2f5a6b1ff83123709b2b412e81.jpg"><br><br>  No entanto, no contexto do nosso mapa conceitual, eu o apresento como um subconjunto, como um tipo espec√≠fico de c√≥digo.  No meu mapa conceitual, o n√∫cleo comum cont√©m c√≥digo para os n√≠veis de dom√≠nio e aplicativo, que s√£o compartilhados em contextos limitados, para que a comunica√ß√£o entre contextos restritos seja poss√≠vel. <br><br>  Por exemplo, isso significa que os eventos s√£o disparados em um ou mais contextos restritos e ouvidos em outros contextos restritos.  Juntamente com esses eventos, precisamos compartilhar todos os tipos de dados usados ‚Äã‚Äãpor esses eventos, por exemplo: identificadores de entidade, objetos de valor, enumera√ß√µes etc. Objetos complexos, como entidades, n√£o devem ser usados ‚Äã‚Äãdiretamente pelos eventos, pois podem ser dif√≠ceis. serialize / desserialize de / para a fila, portanto, o c√≥digo gen√©rico n√£o deve ser amplamente distribu√≠do. <br><br>  Obviamente, se tivermos um sistema multil√≠ngue de microsservi√ßos, o n√∫cleo comum dever√° ser descritivo, em JSON, XML, YAML etc., para que todos os microsservi√ßos possam entend√™-lo. <br><br>  Como resultado, esse n√∫cleo comum √© completamente separado do restante da base de c√≥digo, dos componentes.  Isso √© √≥timo, porque os componentes, embora conectados ao n√∫cleo comum, s√£o separados um do outro.  O c√≥digo gen√©rico √© explicitamente identificado e facilmente recuperado em uma biblioteca separada. <br><br>  Tamb√©m √© muito conveniente se decidirmos extrair um dos contextos limitados em um microsservi√ßo, separado do mon√≥lito.  Sabemos com certeza o que √© comum e podemos simplesmente extrair o n√∫cleo comum na biblioteca, que ser√° instalada no mon√≥lito e no microsservi√ßo. <br><br>  Portanto, para resumir, no meu mapa conceitual, o n√∫cleo do aplicativo depende de um kernel comum que cont√©m c√≥digo dos n√≠veis de dom√≠nio e aplicativo compartilhados entre contextos limitados. <br><br><h1>  Quando a linguagem n√£o √© suficiente ... </h1><br>  Portanto, temos o c√≥digo do aplicativo com todas as camadas conc√™ntricas e o n√∫cleo do aplicativo depende do n√∫cleo comum, que est√° sob todo esse c√≥digo. <br><br>  Tamb√©m podemos dizer que todo esse c√≥digo depende da (s) linguagem (s) de programa√ß√£o usada (s), mas √© um fato t√£o √≥bvio que tendemos a ignor√°-lo completamente. <br><br>  No entanto, surge a pergunta: "E se a constru√ß√£o da linguagem n√£o for suficiente?!"  Bem, obviamente, criamos essas constru√ß√µes de linguagem e compensamos as falhas da linguagem.  Mas tenho importantes perguntas de acompanhamento: ‚ÄúComo e onde justificar a exist√™ncia desse c√≥digo?  Como algu√©m pode indicar claramente quando e como us√°-lo? ‚Äù <br><br>  O que eu vi e fiz foi um pacote chamado Utils ou Commons, onde esse c√≥digo est√° localizado.  Mas no final, acabamos despejando todo o c√≥digo l√°, que n√£o sabemos onde colocar!  Todos os tipos de c√≥digo para diferentes prop√≥sitos e facilidade de uso (envoltos em um adaptador usado diretamente ...) s√£o finalmente descartados l√°.  O pacote n√£o tem significado conceitual, coer√™ncia, coer√™ncia, clareza, muitas ambiguidades. <br><br>  Quero abandonar os pacotes Utils e Commons! <br><br>  Todos os pacotes devem ter coes√£o conceitual!  Deve ficar claro quando e como usar o pacote!  Sem ambiguidade! <br><br>  Por exemplo, se um aplicativo interage com a interface da linha de comandos de alguma maneira especial, em vez de colocar 'Acme / Util / SpecialCli' no espa√ßo para nome, voc√™ pode coloc√°-lo em 'Acme / App / Infraestrutura / Cli / SpecialCli'.  Isso indica que este pacote est√° associado √† CLI, faz parte da infraestrutura do aplicativo Acme App.  A afilia√ß√£o com a infraestrutura do aplicativo tamb√©m diz que h√° uma porta no kernel do aplicativo √† qual este pacote corresponde. <br><br>  Como alternativa, se virmos este pacote como algo que n√£o possui na linguagem, podemos coloc√°-lo no espa√ßo de nomes apropriado, por exemplo, 'Acme / PhpExtension / SpecialCli'.  Isso mostra que este pacote deve ser considerado como parte do pr√≥prio idioma e, portanto, seu c√≥digo deve ser usado diretamente na base de c√≥digo como qualquer constru√ß√£o de idioma.  Obviamente, se outra empresa depender desse pacote, pode ser razo√°vel n√£o depender diretamente dele, mas √© mais seguro criar uma porta / adaptador para que eles possam troc√°-lo por outra coisa.  Mas se possuirmos o pacote, podemos consider√°-lo parte do idioma, pois o risco de substitu√≠-lo por outra alternativa n√£o √© t√£o grande.  Compromisso √© sempre a coisa. <br><br>  Outro exemplo do que pode ser considerado como parte da linguagem s√£o os UUIDs exclusivos no PHP.  √â bem poss√≠vel imagin√°-los fora da linguagem, porque toda vez que h√° uma nova vers√£o e √© um pesadelo com suporte ao c√≥digo, esse √© um conceito muito geral, um conceito amplo e suficientemente consistente para fazer parte da linguagem. <br><br>  Ent√£o, por que n√£o criar uma implementa√ß√£o UUID e us√°-la como parte do pr√≥prio PHP, como usamos um objeto DateTime ?!  Enquanto controlamos a implementa√ß√£o, n√£o vejo falhas. <br><br>  E a Linguagem de Consulta da Doutrina (DQL)?  (A doutrina √© a porta do Hibernate no PHP) podemos ver o DQL como se fosse SQL, Elasticsearch QL ou Mongo QL? <br><br><h1>  Conclus√£o </h1><br>  Portanto, no n√≠vel macro, vejo quatro tipos b√°sicos de c√≥digo e acho importante mostr√°-los claramente na organiza√ß√£o da base de c√≥digo, para n√£o acabar com muita sujeira. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c4/861/97e/4c486197ead0a3876b911e49627b8776.png"><br><br>  Para mim, a verdade ineg√°vel √© que a <b>arquitetura sempre existe, a √∫nica quest√£o √© se a controlamos ou n√£o ?!</b> <br><br>  Ent√£o, vamos <b>organizar claramente o c√≥digo de acordo com a arquitetura</b> , no todo ou em parte, em um mapa conceitual - o meu ou outro.  O principal √© organizar o c√≥digo logicamente para que o projeto comunique explicitamente sua arquitetura atrav√©s da estrutura e organiza√ß√£o do c√≥digo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt428431/">https://habr.com/ru/post/pt428431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt428417/index.html">Aprendizado de m√°quina no MatLab / Oitava: exemplos de algoritmos suportados por f√≥rmulas</a></li>
<li><a href="../pt428419/index.html">Arraste e deslize o dedo no RecyclerView. Parte 2: arraste e solte controladores, grades e anima√ß√µes personalizadas</a></li>
<li><a href="../pt428421/index.html">Sistema flex√≠vel para testar e coletar m√©tricas de programas usando o conjunto de testes LLVM como exemplo</a></li>
<li><a href="../pt428423/index.html">Como um acordo de US $ 34 bilh√µes entre a IBM e a Red Hat mudar√° o mercado de TI: especialistas e analistas</a></li>
<li><a href="../pt428429/index.html">GOST R 34.10 assinatura eletr√¥nica de documentos PDF no pacote do escrit√≥rio LibreOffice</a></li>
<li><a href="../pt428433/index.html">Advogados particulares</a></li>
<li><a href="../pt428435/index.html">O que ler em PHP em russo?</a></li>
<li><a href="../pt428437/index.html">Carteira Apple O que √© e como integrar seu cart√£o nele</a></li>
<li><a href="../pt428439/index.html">Sem conjunto</a></li>
<li><a href="../pt428441/index.html">Compra do GitHub conclu√≠da. O que acontecer√° depois?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>