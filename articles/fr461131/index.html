<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶üèΩ üïñ ‚≠êÔ∏è Chariot √† chariots ROS, partie 2. Logiciel ‚§µÔ∏è üë©üèø‚Äçü§ù‚Äçüë©üèº ‚õ∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Messages dans la s√©rie: 
 8. Nous contr√¥lons √† partir du t√©l√©phone-ROS Control, GPS-node 
 7. Localisation du robot: gmapping, AMCL, points de r√©f√©ren...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chariot √† chariots ROS, partie 2. Logiciel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461131/"> Messages dans la s√©rie: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">8. Nous contr√¥lons √† partir du t√©l√©phone-ROS Control, GPS-node</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">7. Localisation du robot: gmapping, AMCL, points de r√©f√©rence sur le plan de la salle</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">6. Odom√©trie avec encodeurs de roue, plan de salle, lidar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">5. Nous travaillons en rviz et gazebo: xacro, nouveaux capteurs.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">4. Cr√©ez une simulation de robot √† l'aide des √©diteurs rviz et gazebo.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3. Acc√©l√©rez, changez la cam√©ra, corrigez la d√©marche</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2. Logiciel</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1. Fer</a> <br><br><h2>  Passer au sourire </h2><br>  Apr√®s avoir r√©cup√©r√© le ¬´burger¬ª selon le sch√©ma du dernier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">post</a> , nous allons passer au contenu du programme. <br><br>  Puisque nous collectons pour un projet d√©j√† termin√©, il est logique de donner les instructions qui y sont indiqu√©es.  Ils sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l√†</a> . <br><br>  Tout est tr√®s pratique et au m√™me endroit, vous pouvez t√©l√©charger une image pr√™te √† l'emploi √† partir de Raspbian Stretch + ROS + OpenCV, l'√©crire sur une carte SD pour la framboise.  (ROS Kinetic, OpenCV 3.4.1. Oui, il y en a un plus r√©cent, mais parfois il vaut mieux prendre et partir que de tout collecter √† la source). <br><a name="habracut"></a><br>  N√©anmoins, malgr√© la commodit√©, j'ai quand m√™me d√ª l√©g√®rement corriger l'image.  Puisqu'il s'est av√©r√© quelques d√©tails inconfortables de l'image originale: <br><br><ul><li>  pas d'interface graphique (interface graphique).  Ce n'est pas critique, en particulier pour ROS, mais pour rouler sur une ligne, vous devez calibrer la cam√©ra sur la framboise elle-m√™me et voir comment elle (la cam√©ra) transmet les couleurs (plus d'informations ci-dessous); </li><li>  L'assemblage OpenCV n'affiche pas l'image √† l'√©cran, m√™me si vous installez l'interface graphique vous-m√™me.  De toute √©vidence, dans le projet rosbots, opencv a √©t√© construit sans cette option. </li><li>  pas de petites b√©quilles (VNC, √©diteur de texte pour notes, mc). </li><li>  Par cons√©quent, OpenCV a √©t√© reconstruit avec la prise en charge de la sortie d'image dans l'interface graphique (compil√©e par openCV 3.4.3), une interface graphique a √©t√© install√©e, de petites b√©quilles. </li></ul><br>  L'image finie est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , et d'autres travaux seront construits sur cette base. <br><br><h2>  Configurer le r√©seau (wi-fi) et ROS-master sur Raspberry Pi </h2>  . <br>  Je recommande fortement aux exp√©riences d'utiliser un routeur s√©par√© avec votre wi-fi.  Vous pouvez simplement cr√©er un point d'acc√®s sur votre t√©l√©phone √† ces fins.  Cela est d√ª au fait que beaucoup de paquets survoleront le wi-fi et, de pr√©f√©rence, ils ne couleront pas dans le trafic g√©n√©ral. <br><br>  Apr√®s avoir t√©l√©charg√© l'image sur la carte SD Raspberry, configurez le r√©seau.  Les param√®tres r√©seau initiaux sont les suivants: <br><br><pre><code class="bash hljs">interface wlan0 static ip_address=192.168.43.174/24 static routers=192.168.43.1 static domain_name_servers=192.168.43.1</code> </pre> <br>  Contenu dans /etc/dhcpcd.conf <br><br>  Par cons√©quent, vous ne pouvez pas connecter les tuyaux √† la framboise pour tout changer, mais cr√©ez simplement un point d'acc√®s avec le nom du pathos boss et le mot de passe 1234554321. L'adresse de la framboise sera 192.168.43.174.  En plus de ssh, vous pouvez √©galement acc√©der √† cette adresse via VNC: login - pi, mot de passe - 123qweasdzxcV. <br><br>  <b>Configurons le ma√Ætre ROS</b> <br><br>  Une petite remarque pour ceux qui n'ont pas rencontr√© de ROS (syst√®me d'exploitation robotique).  Un ma√Ætre ROS est un interm√©diaire par lequel diff√©rents n≈ìuds communiquent dans ros (n≈ìuds, services, etc.) Si le ma√Ætre ros ne fonctionne pas ou s'ex√©cute √† la mauvaise adresse, les n≈ìuds ne se verront pas. <br><br>  Dans notre syst√®me ROS, l'assistant d√©marre automatiquement avec le chargement du syst√®me d'exploitation et tout ce qui nous est demand√© est de sp√©cifier l'adresse IP de l'assistant ROS dans le fichier syst√®me correspondant. <br><br>  Si vous n'avez pas modifi√© les param√®tres r√©seau r√©pertori√©s ci-dessus, vous n'avez rien √† configurer. <br><br>  Sinon, modifiez bashrc: <br><br><pre> <code class="bash hljs">nano ~/.bashrc</code> </pre> <br>  √Ä la toute fin du fichier, corrigez les adresses IP (les deux) pour votre cas: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ROS_MASTER_URI=http://192.168.43.174:11311 <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ROS_HOSTNAME=192.168.43.174</code> </pre><br>  Red√©marrez. <br><br>  Maintenant, lors du d√©marrage du terminal sur le chariot, la sortie sera comme ceci (ou tout ce que vous avez sp√©cifi√© dans les param√®tres): <br><br><pre> <code class="plaintext hljs">For all slaves, "export ROS_MASTER_URI=http://192.168.43.174:11311"</code> </pre> <br>  Cela signifie que le ma√Ætre ROS fonctionne √† l'adresse IP sp√©cifi√©e. <br><br><h2>  Nous contr√¥lons le chariot sur wi-fi </h2><br>  Nous allons v√©rifier d√®s le d√©but que les n≈ìuds fonctionnent pour nous. <br><br>  Dans le terminal: <br><br><pre> <code class="bash hljs">rosnode list</code> </pre> <br>  La sortie sera comme ceci: <br><br>  / rosout <br>  / uno_serial_node <br><br>  Si rien ne sort, v√©rifiez si vous avez enregistr√© ROS-master dans les param√®tres d√©crits ci-dessus, si vous avez connect√© le tuyau USB √† Arduino, red√©marr√©. <br><br>  Apr√®s v√©rification, ex√©cutez le 1er n≈ìud responsable du mouvement: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  * La commande sp√©ciale ros lance le fichier part2_cmr.py du paquet python rosbots_driver <br><br>  Le syst√®me informera que le n≈ìud est en cours d'ex√©cution: <br><br><img src="https://habrastorage.org/webt/fd/pi/bh/fdpibhvndu-d6cxfonymmdcklsu.png"><br><br>  Ici, vous pouvez voir que le rayon des roues et la distance entre elles sont d√©termin√©s.  Vous pouvez corriger ces valeurs, ainsi que d'autres li√©es au mouvement dans le fichier robot.py le long du chemin <br><br><pre> <code class="bash hljs">/home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/examples/coursera_control_of_mobile_robots/part2/full/controller</code> </pre> <br>  puisque part2_cmr.py lui-m√™me n'a pas ces param√®tres.  Ouvrez le deuxi√®me terminal et entrez dans la liste rostopique: <br><br><img src="https://habrastorage.org/webt/5d/1v/4t/5d1v4tmlmyminhgqzkkciavcvq4.png"><br><br>  Ici, vous pouvez voir que le sujet / part2_cmr / cmd_vel est apparu.  Dans cette rubrique, / part2_cmr ¬´√©coute¬ª ce que les autres n≈ìuds lui diront et, en fonction de ce qu'ils disent, contr√¥lera le mouvement.  Ce qui "√©coute" exactement, mais pas "parle" peut √™tre compris √† l'aide de la commande. <br><br><pre> <code class="bash hljs">rostopic info /part2_cmr/cmd_vel</code> </pre> <br><img src="https://habrastorage.org/webt/ts/bp/pj/tsbppjpegozrwhekno2hebxtwte.png"><br><br>  Ici, vous pouvez voir que / part2_cmr abonn√© (abonn√©) au sujet et √©coute. <br><br>  * Vous pouvez ¬´dire¬ª quelque chose sur le sujet vous-m√™me, sans n≈ìuds. <br><br>  Par exemple: <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: 1.0}'</span></span></code> </pre> <br>  tourner en avant avec la roue gauche <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: 0.0}'</span></span></code> </pre> <br>  arr√™ter la roue gauche <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: -1.0}'</span></span></code> </pre> <br>  Tournez dos √† dos avec une roue <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: -0.5}'</span></span></code> </pre> <br>  Faites demi-tour avec la roue gauche plus lentement. <br><br>  La syntaxe est: pub rostopique - d√©sir de parler dans le sujet, -1 - d√©sir ponctuel, / wheel_power_left - sujet o√π nous disons, std_msgs / Float32 - langue (format de message), '{data: -0.5}' - ce que nous disons. <br><br>  Ex√©cutez maintenant celui qui parlera dans le sujet / part2_cmr / cmd_vel.  Ce sera le n≈ìud d'envoi des commandes clavier. <br><br>  Sans fermer le terminal pr√©c√©dent avec un n≈ìud fonctionnel, ex√©cutez-en un autre et entrez: <br><br><pre> <code class="bash hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code> </pre> <br>  * Puisque la publication est par d√©faut dans le sujet / cmd_vel, nous la redirige en utilisant <br>  / cmd_vel: = / part2_cmr / cmd_vel afin que les messages soient vers√©s dans / part2_cmr / cmd_vel. <br><br>  Le n≈ìud de contr√¥le a d√©marr√© et vous pouvez rouler en appuyant sur les touches du clavier: <br><br><img src="https://habrastorage.org/webt/fy/bz/fl/fybzflgbhdqykv-vvxhk72qy_hq.png"><br><br>  S'il est impossible de conduire ou s'il y a un grincement subtil sous les roues, vous devez augmenter la vitesse en cliquant sur ¬´w¬ª dans le terminal avec le n≈ìud en marche.  La m√™me chose (augmentation ou diminution) peut √™tre effectu√©e avec la vitesse de rotation - le bouton ¬´e¬ª.  Il est √©galement important d'√™tre dans un terminal avec un n≈ìud en cours d'ex√©cution si les boutons de commande ne fonctionnent pas si vous passez √† un autre terminal.  Le bouton ¬´k¬ª du terminal de commande est un arr√™t. <br><br>  Dans un terminal s√©par√©, regardez le sujet / part2_cmr / cmd_vel: <br><br><img src="https://habrastorage.org/webt/su/ab/cr/suabcrxmna11bzfmnxqsdzq0rxs.png"><br><br>  Maintenant, dans le sujet / part2_cmr / cmd_vel, il y a √† la fois un locuteur et un auditeur. <br><br><h2>  Surfer sur OpenCV </h2><br>  Avant d'aller quelque part, vous devez vous assurer que le robot voyage avec le contr√¥le du clavier.  Une remarque importante s'impose ici.  Lors du contr√¥le √† partir du clavier dans l'exemple ci-dessus, tourner vers la gauche doit correspondre √† une pression sur la touche j, vers la droite l (latin l), vers l'avant i, vers l'arri√®re, (virgule).  Si dans votre cas, ce n'est pas le cas, il peut y avoir des probl√®mes avec le voyage.  Pour tout ramener √† la normale, il est n√©cessaire de changer les paires de fils venant du conducteur du moteur aux jambes sur arduino dans notre burger 4,5,6,7 arduino: 4,5 √† √©changer avec 6,7 ou 4 et 5,6 et 7 chacune avec un autre selon l'endroit o√π les roues tourneront.  Vous pouvez √©galement le faire par programme en ajustant le code pour arduino le long du chemin - /home/pi/gitspace/rosbots_driver/platformio/rosbots_firmware/examples/motor_driver/src/main.cpp <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#define M_LEFT_PWM 6 #define M_LEFT_FR 7 #define M_RIGHT_PWM 5 #define M_RIGHT_FR 4</span></span></code> </pre><br>  et le recharger sur arduino avec la commande: <br><br><pre> <code class="bash hljs">upload_firmware ~/gitspace/rosbots_driver/platformio/rosbots_firmware/examples/motor_driver</code> </pre> <br>  <b>Travaillons avec des fleurs</b> <br><br>  Notre exp√©rience de jardinage sera de mettre en √©vidence la ligne au sol que le robot parcourra, pour d√©terminer sa couleur.  Par d√©faut, le robot ne le voit pas.  En ligne, vous pouvez utiliser du ruban adh√©sif (jaune) ou du ruban adh√©sif, ou quelque chose d'autre avec une couleur caract√©ristique et assez large.  * Il est peu probable que le ruban adh√©sif transparent fonctionne, car  il sera difficile de distinguer de l'arri√®re-plan. <br><br>  Allons dans le dossier et ex√©cutons le script: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python bgr-to-hsv.py</code> </pre> <br>  * Attention!  Si vous utilisez l'image originale des rosbots, et pas la mienne, ce programme n'est pas l√†. <br><br>  Deux fen√™tres s'ouvriront: <br><br><img src="https://habrastorage.org/webt/_v/qy/lw/_vqylwcxaerfndl2h7fgomt2zcy.png"><br><br>  Voici les gammes de couleurs en HSV.  Qu'est-ce que HSV et pourquoi pas RVB? <br><br>  h1, s1, v1 - inf√©rieur et h2, s2, v2 - respectivement, la plage sup√©rieure. <br><br>  Maintenant, vous devez s√©lectionner une ligne avec du ruban √©lectrique (peut-√™tre pas du ruban adh√©sif mais du ruban adh√©sif) sur le sol en d√©pla√ßant les curseurs dans la fen√™tre.  Seule la ligne de ruban √©lectrique doit rester dans la fen√™tre de r√©sultat: <br><br><img src="https://habrastorage.org/webt/xv/4y/cs/xv4ycskbhskfqq-1pwzgc_-llgc.png"><br><br>  La ligne de ruban √©lectrique est exceptionnellement blanche, tout le reste est noir.  Ce r√©sultat est n√©cessaire. <br>  Enregistrez, rappelez-vous les num√©ros des gammes HSV.  Mon cas est 56.155,40 et 136.255.255.  Les gammes HSV seront diff√©rentes dans diff√©rentes conditions d'√©clairage √† proximit√© de la cam√©ra du robot. <br><br>  Fermez les fen√™tres en entrant ctrl + c dans le terminal et ajoutez les plages HSV au fichier follow_line_step_hsv.py: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver nano follow_line_step_hsv.py</code> </pre> <br>  Dans les lignes: <br><br><pre> <code class="plaintext hljs">lower_yellow = np.array([21,80,160]) upper_yellow = np.array([255,255,255])</code> </pre> <br>  Nous mettons les num√©ros de nos gammes HSV. <br><br>  <b>Il est temps de faire la queue</b> <br><br>  Nous d√©marrons le n≈ìud moteur dans la borne 1: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  Lancez le n≈ìud de la cam√©ra dans le deuxi√®me terminal: <br><br><pre> <code class="bash hljs">sudo modprobe bcm2835-v4l2 roslaunch usb_cam usb_cam-test.launch</code> </pre><br>  Ex√©cutez le n≈ìud opencv dans le troisi√®me terminal: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python follow_line_step_hsv.py</code> </pre><br>  Si tout s'est bien pass√©, le robot suivra la ligne et une fen√™tre suppl√©mentaire appara√Ætra: <br><br><img src="https://habrastorage.org/webt/bk/ug/aj/bkugajoo0itqwwkbn8zckbm2mvy.png"><br><br>  Dans cette fen√™tre, le ruban √©lectrique sera marqu√© d'un cercle rouge. <br><br>  La signification g√©n√©rale du code est de mettre en surbrillance le segment de couleur √† une certaine distance de la cam√©ra, de dessiner un cercle rouge et d'aller √† ce cercle, en essayant de le garder au centre. <br><br><h2>  Enfin, sur l'important - sur les chats et les sourires </h2><br>  Puisque notre objectif est d'aller chez le chat ou chez une personne souriante, nous devrons utiliser quelque chose de plus compliqu√© dans notre code.  Nous aurons √©galement besoin de chats et de personnes souriantes.  La seconde est d√©sormais plus difficile: peu de gens sourient en cette p√©riode difficile et alarmante.  Commen√ßons donc avec les chats. <br><br>  Pour les exp√©riences, des photos de chats au visage conviennent. <br><br>  Ex√©cutez le n≈ìud de la cam√©ra dans le 1er terminal: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python pi_camera_driver.py</code> </pre> <br>  Dans le 2√®me terminal, le n≈ìud moteur: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  Dans le 3√®me terminal du n≈ìud de recherche de chat: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python follow_cat2.py</code> </pre> <br>  Le chariot se d√©placera progressivement vers le chat: <br><br><img src="https://habrastorage.org/webt/xj/yr/fm/xjyrfmqyd4lw2gv_neuscw7aus0.png"><br><br>  Maintenant, vous avez besoin d'un b√©n√©vole qui sait sourire.  Faites le portrait d'une personnalit√© publique peu connue dans un petit pays. <br><br>  Dans le 3√®me terminal du n≈ìud de recherche du chat, vous pouvez fermer - ctrl + c et au lieu de cela commencer √† rechercher un sourire sur le visage d'une personne publique peu connue: <br><br><pre> <code class="bash hljs">python follow_smile.py</code> </pre> <br>  La charrette devra conduire lentement, incr√©dule au sourire d'une personne m√©connue: <br><br><img src="https://habrastorage.org/webt/5z/01/tr/5z01tr6a1npd3gppcqotqn5item.png"><br><br>  Comme beaucoup l'ont peut-√™tre d√©j√† devin√©, les scripts que nous avons ex√©cut√©s utilisent des cascades Haar.  Selon le m√™me principe que pour un trajet le long de la ligne, un carr√© de la zone souhait√©e est mis en √©vidence et le programme essaie de le garder au centre en d√©pla√ßant le robot. <br><br>  Malheureusement, les performances sur la framboise 3b laissent beaucoup √† d√©sirer, malgr√© les param√®tres de la cam√©ra de 320x240 et 15 Fps.  Les retards sont perceptibles avec l'augmentation du temps.  Tous les chats ne peuvent pas le supporter. <br><br>  Comment cela peut-il √™tre am√©lior√©? <br><br>  Essayez de reconstruire un opencv optimis√©, comme le recommande Adrian (https://www.pyimagesearch.com/2017/10/09/optimizing-opencv-on-the-raspberry-pi/)?  Utiliser des ressources PC externes pour le traitement d'images?  Essayez de ne pas compresser les images en jpeg qui volent vers le gestionnaire Haar?  Et un autre gros inconv√©nient - les chats doivent √™tre grands et devant.  Distance de 15 cm sur feuille A4.  En s'√©loignant de la cam√©ra, le chat est d√©j√† m√©connaissable et invuln√©rable.  Mettre un monocle de framboise sur la cam√©ra avec un grossissement 8x? <br><br>  PS: Si vous mettez la main sur des exp√©riences avec l'image qui est donn√©e dans l'article, vous pouvez toujours rouler pour diff√©rentes parties du corps, en lan√ßant en cons√©quence √† la place du n≈ìud de chat: <br><br><pre> <code class="bash hljs">python follow_fullbody.py python follow_upperbody.py python follow_lowerbody.py</code> </pre><br>  visage ou ≈ìil: <br><br><pre> <code class="bash hljs">python follow_face.py python follow_right_eye.py</code> </pre> <br>  Si vous souhaitez savoir comment vous √©loigner en douceur pour que le robot ne renverse pas de th√© et comment ne pas le faire fonctionner avec la framboise, √©crivez. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461131/">https://habr.com/ru/post/fr461131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461113/index.html">Cinq ans d'utilisation de C ++ pour des projets de microcontr√¥leurs en production</a></li>
<li><a href="../fr461121/index.html">Petites exp√©riences multit√¢ches dans un microcontr√¥leur</a></li>
<li><a href="../fr461125/index.html">La t√¢che de cr√©ation de codes num√©riques s√©quentiels pour la num√©rotation des messages dans le code source dans Visual Studio (ex. C #)</a></li>
<li><a href="../fr461127/index.html">Analyse des performances des machines virtuelles dans VMware vSphere. Partie 3: Stockage</a></li>
<li><a href="../fr461129/index.html">√Ä propos de Kote, de sa femme, de ses deux fils, de l'id√©e ... et pas seulement. Histoire avec suite</a></li>
<li><a href="../fr461133/index.html">Test du code SQL Server avec tSQLt</a></li>
<li><a href="../fr461137/index.html">Comment nous avons d√©velopp√© un appareil pour surveiller l'attention des conducteurs. D√©couvrez Yandex.Taxi</a></li>
<li><a href="../fr461141/index.html">Mon premier jour avec Haiku: elle est √©tonnamment bonne</a></li>
<li><a href="../fr461143/index.html">Sur les probl√®mes actuels de conception de jeux et les moyens de les r√©soudre. Vue de dessous</a></li>
<li><a href="../fr461145/index.html">Que doit diriger une √©quipe: r√¥les, responsabilit√©s et comp√©tences</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>