<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùï üõ¢Ô∏è üò§ Mini ai cup 2 oder fast AgarIO - was k√∂nnte man tun, um zu gewinnen? üë©üèø‚ÄçüöÄ üíâ üëèüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Dieses Mal m√∂chte ich dar√ºber schreiben, wie ich es geschafft habe, den Mini AI Cup 2 Wettbewerb zu gewinnen. Wie in meinem letzten ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mini ai cup 2 oder fast AgarIO - was k√∂nnte man tun, um zu gewinnen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420737/">  Hallo allerseits!  Dieses Mal m√∂chte ich dar√ºber schreiben, wie ich es geschafft habe, den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mini AI Cup 2</a> Wettbewerb zu gewinnen.  Wie in meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">letzten Artikel</a> wird es praktisch keine Implementierungsdetails geben.  Diesmal war die Aufgabe weniger umfangreich, aber dennoch gab es viele Nuancen und kleine Dinge, die das Verhalten des Bots beeinflussten.  Selbst nach fast dreiw√∂chiger aktiver Arbeit am Bot gab es daher noch Ideen zur Verbesserung der Strategie. <br><br><img src="https://habrastorage.org/webt/iw/ef/hv/iwefhvnhx6m3ubjpwo_d0cgn3qi.png"><br><br>  Unter dem Schnitt viele Gifs und Verkehr. <br><a name="habracut"></a><br>  <i>Die hartn√§ckigen werden es herausfinden, der Rest wird entsetzt davonlaufen (aus den Kommentaren zu dem <s>kurzen</s> komprimierten Teil).</i> <br><br>  <i>Diejenigen, die zu faul sind, um viel zu lesen, k√∂nnen zum vorletzten Spoiler des Artikels gehen, um eine <s>kurze,</s> kurze Beschreibung des Algorithmus anzuzeigen <s>, und dann k√∂nnen Sie von vorne mit dem Lesen beginnen</s> .</i> <br><br>  Link zur Quelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf dem Github</a> . <br><br><h3>  Werkzeugauswahl </h3><br>  Wie beim letzten Mal habe ich viel Zeit gebraucht, um dar√ºber nachzudenken, wo ich anfangen soll.  Die Wahl fiel unter anderem auf zwei Sprachen: Java, mir vertraut und schon seit Studienzeiten in C ++ ganz vergessen.  Aber da es mir von Anfang an so schien, als ob das Haupthindernis f√ºr das Schreiben eines guten Bots weniger die Entwicklungsgeschwindigkeit als vielmehr die Produktivit√§t der endg√ºltigen L√∂sung w√§re, fiel die Wahl dennoch in C ++. <br><br>  Nach der erfolgreichen Erfahrung, meinen eigenen Visualizer zum Debuggen des Bots in fr√ºheren Wettbewerben zu verwenden, wollte ich auch diesmal nicht auf einen verzichten.  Aber der Visualizer, den ich f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">QW</a> for <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CodeWars</a> f√ºr mich selbst geschrieben habe, sah f√ºr mich nicht nach einer idealen L√∂sung aus, und ich entschied mich f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen</a> Visualizer.  Es wurde ebenfalls unter CodeWars hergestellt, erforderte jedoch keine ernsthafte Verarbeitung f√ºr die Verwendung in diesem Wettbewerb.  Die relative Einfachheit der Verbindung und die Bequemlichkeit, das Rendern an einer beliebigen Stelle im Code aufzurufen, spielten f√ºr ihn eine Rolle. <br><br>  Nach wie vor wollte ich unbedingt jeden Tick im Spiel debuggen - die F√§higkeit, eine Strategie in einem beliebigen Moment des getesteten Spiels auszuf√ºhren.  Da der Plug-in-Visualizer dieses Problem nicht l√∂sen konnte, f√ºgte ich mit Hilfe des # ifdef-Paares (in das ich auch die f√ºr das Rendern verantwortlichen Codeteile eingewickelt habe) jedem Tick das Speichern der Context-Klasse hinzu, die alle erforderlichen Werte der Variablen aus dem vorherigen Tick enthielt.  Im Kern war die L√∂sung √§hnlich wie in Code Wizards, aber diesmal war der Ansatz nicht so spontan.  Nachdem Sie das gesamte Spiel simuliert hatten, wurden Sie aufgefordert, die Nummer des Spielticks einzugeben, der neu gestartet werden muss.  Informationen √ºber den Status von Variablen vor diesem Tick wurden aus dem Array entnommen sowie die von der Eingabestrategie empfangene Zeile, sodass ich die Bewegungen meiner Strategie in beliebiger Reihenfolge spielen konnte. <br><br><h3>  Starten Sie </h3><br>  An dem Tag, an dem die Regeln ge√∂ffnet wurden, kam ich nicht vorbei und schaute am ersten Abend, was uns erwartet.  Er z√∂gerte nicht, sich √ºber das json-Eingabeformat zu emp√∂ren (ja, es ist praktisch, aber einige Teilnehmer lernen bei solchen Wettbewerben neue oder l√§ngst vergessene alte YPs, und es ist nicht besonders angenehm, mit json-Parsing zu beginnen), schaute sich die seltsame Formel der Bewegung an und begann irgendwie, den Rahmen der Zukunft zu bilden Strategien (um den Artikel in Zukunft zu verstehen, ist es n√ºtzlich, die <a href="">Regeln</a> zu lesen).  2 Tage lang schrieb ich eine Reihe von Klassen wie Ejection, Virus, Player und andere, las json, verband eine Einzeldateibibliothek zum Protokollieren ... Und am Abend der Er√∂ffnung einer Sandbox ohne Rating hatte ich bereits eine Strategie in Kraft und wiederholte im Prinzip fast die Grundlinie in C ++, aber deutlich viel gr√∂√üerer Code. <br><br>  Und dann ... fing ich an, Optionen herauszufinden, wie man sie entwickelt.  Gedanken zu dieser Zeit: <br><br><ul><li>  Die Suche nach Weltstaaten kann nicht auf Werte reduziert werden, die Minimax und Modifikationen √ºberw√§ltigen k√∂nnen. </li><li>  Potenzielle Felder sind gut, aber sie beantworten schlecht die Frage, wie die Welt die n√§chsten n Zecken ver√§ndern wird. </li><li>  Genetik und √§hnliche Algorithmen werden funktionieren, aber nur 20 ms werden pro Strich angegeben, und die Berechnungstiefe w√§re auf den ersten Blick w√ºnschenswert, mehr als die Empfindungen mit dem GA verarbeitet werden k√∂nnen.  Ja, und Sie k√∂nnen mit der Auswahl der Mutationsparameter ‚Äûgl√ºcklich bis ans Ende‚Äú spielen. </li></ul><br>  Ich habe mich definitiv f√ºr eines entschieden: Wir m√ºssen eine Simulation der Welt machen.  K√∂nnen ungef√§hre Berechnungen eine kalte und genaue Berechnung ‚Äûschlagen‚Äú?  Solche √úberlegungen veranlassten mich nat√ºrlich, den Code zu untersuchen, der f√ºr die Simulation der Welt auf dem Server verantwortlich sein sollte, da er diesmal zusammen mit den Regeln √∂ffentlich zug√§nglich gemacht wurde.  Schlie√ülich gibt es nichts Besseres als Code, der die Regeln der Welt genau beschreiben sollte? <br><br>  Also dachte ich genau nach, bis ich anfing, den Code zu studieren, der unsere Bots auf dem Server und lokal testen sollte.  In Bezug auf die Verst√§ndlichkeit und Korrektheit des Codes war zun√§chst nicht alles sehr gut, und die Organisatoren begannen zusammen mit den Teilnehmern, ihn aktiv zu verarbeiten.  W√§hrend des Betatests (einige Tage danach) waren die √Ñnderungen in der Spiel-Engine sehr gravierend und viele nahmen erst an dem Moment teil, in dem sich die Test-Engine nicht stabilisiert.  Aber am Ende haben sie meiner Meinung nach auf eine gut funktionierende Engine f√ºr ein Spiel gewartet, das f√ºr das Wettbewerbsformat sehr gut geeignet ist.  Ich begann auch keine ernsthaften Ans√§tze zu implementieren, bis sich der lokale L√§ufer stabilisierte, und in der ersten Woche wurde in meinem Bot nichts Vern√ºnftigeres getan, au√üer dem angeschraubten Visualizer. <br><br>  Am Vorabend des ersten Wochenendes im Telegramm bildeten die Organisatoren eine separate Gruppe, in der davon ausgegangen wurde, dass die Leute in der Lage sein w√ºrden, den Gebietsschema-L√§ufer zu korrigieren und zu verbessern.  Ich habe auch an der Arbeit am Motor der Welt teilgenommen.  Nach Diskussionen in diesem Chat stellte ich als Test zwei Pull-Anfragen an das Gebietsschema des L√§ufers: Anpassen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Essformel</a> (und kleiner √Ñnderungen in der Reihenfolge des Essens) an die Regeln und Zusammenf√ºhren mehrerer Teile zu einem Agaric unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beibehaltung der Tr√§gheit und des Massenschwerpunkts</a> ).  Dann begann ich dar√ºber nachzudenken, wie man eine vern√ºnftige Kollisionsphysik in diesen Code einf√ºgt, weil die Physik, die zu dieser Zeit in der Spielwelt vorhanden war, sehr unlogisch funktionierte.  Da die Kollisionen zwischen den beiden Agarics in den Regeln nicht beschrieben wurden, fragte ich die Organisatoren nach Kriterien, nach denen meine Implementierung einer solchen Logik akzeptabel w√§re.  Die Antwort lautete: Agarics bei einer Kollision sollten ‚Äûweich‚Äú sein (dh sie k√∂nnten ein wenig ineinander laufen), w√§hrend die Logik einer Kollision mit den W√§nden nicht ber√ºhrt werden sollte (dh die W√§nde sollten die Agarics einfach stoppen, aber nicht wegschieben).  Und meine n√§chste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pull-Anfrage</a> war eine ernsthafte √Ñnderung der Physik. <br><br><div class="spoiler">  <b class="spoiler_title">Vor und nach der Ver√§nderung der Physik</b> <div class="spoiler_text">  <i>Eine solche Kollisionsphysik war:</i> <br><img src="https://habrastorage.org/webt/hx/xc/ey/hxxceykf2thwuvqz9eknvhuy9rw.gif" alt="Bild"><br>  <i>Und sie wurde so nach den Updates:</i> <br><img src="https://habrastorage.org/webt/hu/4s/-k/hu4s-kyhokl2-0sotgkuhib2fem.gif" alt="Bild"><br></div></div><br>  Ich m√∂chte auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diese</a> Pull-Anfrage hervorheben, die den verwirrenden Code mit der Statusanalyse und einer gro√üen Anzahl gefundener (und potenzieller) Fehler erheblich zu etwas viel Verst√§ndlicherem reduziert hat. <br><br><h3>  Eine Simulation schreiben </h3><br>  Nachdem ich den Runner-Gebietsschema-Code in eine vern√ºnftige Form gebracht hatte, begann ich allm√§hlich, den Weltsimulationscode vom Runner-Gebietsschema auf meinen Bot zu √ºbertragen.  Zuallererst war es nat√ºrlich ein Code zur Simulation der Bewegung von Agarics und gleichzeitig ein Code zur Berechnung der Physik von Kollisionen.  Es dauerte ein paar Abende, um den neu gestalteten Code vor dem Umschreiben von Fehlern zu bewahren (die Logik√ºbertragung erfolgte √ºberhaupt nicht durch Kopieren des Codes) und ungef√§hre Sch√§tzungen, wie tief die Berechnungen durchgef√ºhrt werden sollten. <br><br>  Die Bewertungsfunktion f√ºr jeden Tick in diesem Moment war +1 f√ºr das Essen, das ich esse, und -1 f√ºr das gegnerische Essen sowie etwas gr√∂√üere Werte f√ºr das Essen der Agarics des anderen.  In den Konstanten f√ºr das Essen anderer Agarics gab es anfangs einen Unterschied zwischen dem Essen meines Gegners, meines Gegners (und nat√ºrlich einer sehr hohen Geldstrafe f√ºr das Essen meiner letzten Agarika durch den Gegner) sowie zwei verschiedenen Gegnern voneinander (nach ein paar Tagen wurde der letzte Koeffizient 0).  Zus√§tzlich zur Gesamtgeschwindigkeit f√ºr alle vorherigen Ticks der Simulation wurde jeder Tick mit 1 + 1e-5 multipliziert, um meinen Bot zu ermutigen, zumindest etwas fr√ºher n√ºtzlichere Aktionen auszuf√ºhren, und am Ende der Simulation wurde die Geschwindigkeit f√ºr den letzten Tick als Bonus hinzugef√ºgt, ebenfalls sehr gering .  Um die Bewegung von Agarics zu simulieren, wurden Punkte am Rand der Karte mit einem Schritt von 15 Grad von den arithmetischen Mittelkoordinaten aller meiner Agarics ausgew√§hlt, und ein Punkt wurde ausgew√§hlt, wenn die Bewegung simuliert wurde, f√ºr die die Sch√§tzfunktion den gr√∂√üten Wert angenommen hat.  Und schon mit einer so scheinbar primitiven Simulation und einer damals einfachen Einsch√§tzung hat sich der Bot ganz sicher in den Top 10 etabliert. <br><br><div class="spoiler">  <b class="spoiler_title">Demonstration von Punkten, der Bewegungsbefehl, zu dem der Algorithmus urspr√ºnglich simuliert hat</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fy/xr/l_/fyxrl_dc2onzsfeij-vmex1qnoc.gif" alt="Bild"><br>  <i>Punkte, deren Bewegungsbefehl w√§hrend verschiedener Simulationen gegeben wurde.</i>  <i>Wenn Sie genau hinschauen, wird der endg√ºltige Befehl manchmal relativ zu den gesuchten Punkten verschoben, dies sind jedoch Konsequenzen zuk√ºnftiger √Ñnderungen.</i> <br></div></div><br>  Am Freitag- und Samstagabend wurde eine Simulation der Verschmelzung von Agarics, eine Simulation der ‚ÄûUntergrabung‚Äú von Viren und das Erraten der TTF des Gegners hinzugef√ºgt.  Der TTF des Gegners war ein ziemlich interessanter berechneter Wert, und es war m√∂glich zu verstehen, zu welchem ‚Äã‚ÄãZeitpunkt der Gegner einen Split machte oder zum Virus gelangte, indem nur der Moment eines unkontrollierten Fluges erfasst wurde, der von einer sehr kleinen Anzahl von Zecken mit einer gro√üen Viskosit√§t bis zum Flug durch die gesamte Karte dauern konnte.  Da Agaric-Kollisionen zu einem leichten √úberschuss ihrer H√∂chstgeschwindigkeit f√ºhren k√∂nnen, habe ich zur Berechnung des TTF des Gegners √ºberpr√ºft, ob seine Geschwindigkeit in zwei Ticks hintereinander wirklich der Geschwindigkeit entspricht, mit der Sie im Freiflug zwei Ticks hintereinander erhalten k√∂nnen (im Freiflug flogen Agarics streng gerade und mit Verlangsamung jeder Zecke genau gleich der Viskosit√§t).  Dadurch wurde die M√∂glichkeit von Fehlalarmen fast vollst√§ndig ausgeschlossen.  Au√üerdem habe ich beim Testen dieser Logik festgestellt, dass eine gr√∂√üere TTF immer einer gr√∂√üeren ID des Agarics entspricht (von der ich sp√§ter √ºberzeugt war, als ich den <a href="">Explosionscode auf den Virus</a> √ºbertrug und <a href="">den Split verarbeitete</a> ), was sich ebenfalls lohnte. <br><br>  Nachdem ich mir die konstanten Teilungen in den Top 3 angesehen hatte (die es ihnen erm√∂glichten, Lebensmittel auf der Karte signifikant zu sammeln), f√ºgte ich dem Bot als Test einen permanenten Teilungsbefehl hinzu, wenn sich im Sichtradius kein Feind befand, und fand meinen Bot am Sonntagmorgen in der zweiten Zeile der Bewertung.  Das Verwalten einer Handvoll kleiner Agarics hat das Ranking erheblich verbessert, aber es war viel einfacher, sie zu verlieren, wenn Sie auf einen Gegner sto√üen.  Und da die Angst, von meinen Agarics gefressen zu werden, sehr bedingt war (die Strafe galt nur f√ºr das Essen in einer Simulation, aber nicht f√ºr die Ann√§herung an einen Gegner, der essen konnte), wurde als erstes eine Strafe f√ºr die Kreuzung mit einem Gegner hinzugef√ºgt, der essen konnte.  Und diese Einsch√§tzung wirkte wie ein Bonus f√ºr die Verfolgung eines Gegners.  Nachdem ich den CPU-Verbrauch mit meiner Strategie √ºberpr√ºft hatte, entschied ich mich, eine weitere Simulationsrunde hinzuzuf√ºgen, wenn die Aufteilung beim ersten H√§kchen erfolgte (diese Logik musste nat√ºrlich auch vom Runner-Gebietsschema auf meinen Code √ºbertragen werden), und dann verlief die Simulation genauso wie zuvor .  Diese Art von Logik war nicht sehr gut geeignet, um auf den Feind zu "schie√üen" (obwohl sie sich manchmal zuf√§llig zu einem sehr geeigneten Zeitpunkt spaltete), aber sie war sehr gut, um schneller Lebensmittel zu sammeln, was das ganze Top zu dieser Zeit tat.  Solche √Ñnderungen erm√∂glichten es uns, die n√§chste Woche in die erste Zeile des Ratings einzutragen, obwohl die Marge nicht signifikant war. <br><br>  Zu dieser Zeit war dies v√∂llig ausreichend, das ‚ÄûR√ºckgrat‚Äú der Strategie wurde ausgearbeitet, die Strategie sah ziemlich primitiv und erweiterbar aus.  Was mir aber wirklich aufgefallen ist, war der CPU-Verbrauch und die allgemeine Codestabilit√§t.  Daher waren haupts√§chlich die Abende des n√§chsten Arbeitsteils der Woche der Verbesserung der Genauigkeit von Simulationen (die der Visualizer sehr geholfen hat), der Stabilisierung des Codes (Valgrind) und einigen Optimierungen der Arbeitsgeschwindigkeit gewidmet. <br><br><h3>  Lass uns weitermachen </h3><br>  Meine n√§chste gesendete Strategie, die ein deutlich besseres Ergebnis zeigte und den Gegnern (zu diesem Zeitpunkt) vorausging, enthielt zwei wesentliche √Ñnderungen: Hinzuf√ºgen eines potenziellen Feldes zum Sammeln von Lebensmitteln und Verdoppeln der Anzahl von Simulationen, wenn sich ein Gegner mit einem unbekannten TTF in der N√§he befindet. <br><br>  Das potenzielle Feld f√ºr das Sammeln von Lebensmitteln in der ersten Version war recht einfach und bestand im Wesentlichen darin, sich an Lebensmittel zu erinnern, die aus der Sichtbarkeitszone verschwunden waren, das Potenzial an den Orten zu verringern, an denen sich der feindliche Bot befand, und in meiner Sichtbarkeitszone auf Null zu setzen (mit anschlie√üender Wiederherstellung alle n Zecken gem√§√ü den Regeln).  Dies schien eine n√ºtzliche Verbesserung zu sein, aber in der Praxis war der Unterschied meiner subjektiven Meinung nach entweder gering oder gar nicht vorhanden.  Beispielsweise √ºbersprang der Bot bei Karten mit hoher Tr√§gheit und Geschwindigkeit h√§ufig das Essen und versuchte dann, dorthin zur√ºckzukehren, w√§hrend er viel Geschwindigkeit verlor.  Wenn er sich jedoch entschied, die Geschwindigkeit beizubehalten und das ausgelassene Essen einfach ignorierte, w√ºrde er deutlich mehr essen. <br><br><div class="spoiler">  <b class="spoiler_title">Potenzielles Feld zum Sammeln von Nahrungsmitteln</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/aw/ae/lg/awaelgpt4zl98lgdjfr1rvk53so.gif" alt="Bild"><br>  <i>Sie k√∂nnen darauf achten, wie alle 40 Ticks das Feld etwas heller wird.</i>  <i>Alle 40 Ticks wird das Feld entsprechend der Art und Weise aktualisiert, wie Lebensmittel auf der Karte hinzugef√ºgt werden, und die Wahrscheinlichkeit, dass Lebensmittel erscheinen, wird gleichm√§√üig √ºber das Feld ‚Äûverschmiert‚Äú.</i>  <i>Wenn wir auf dieser Zecke sehen, dass es Lebensmittel gibt, die wir auf der vorherigen Zecke sehen w√ºrden, wird die Wahrscheinlichkeit des Auftretens dieser Lebensmittel nicht mit dem Rest "verschmiert", sondern durch bestimmte Punkte festgelegt (die Lebensmittel erscheinen alle 40 Zecken streng symmetrisch).</i> <br></div></div><br>  Ein v√∂llig anderer subjektiver Nutzen stellte sich als doppelte Simulation des Feindes mit verschiedenen TTFs heraus - dem minimal und maximal m√∂glichen (falls ich die TTF nicht f√ºr alle sichtbaren Agarics auf der Karte kenne).  Und wenn mein Bot fr√ºher dachte, dass der feindliche Haufen von Agarics ein Ganzes werden und sich langsam bewegen w√ºrde, dann w√§hlte er jetzt das schlimmste der beiden Szenarien und riskierte nicht, dem Feind nahe zu sein, von dem er weniger wei√ü, als er m√∂chte. <br><br>  Nachdem ich einen signifikanten Vorteil erlangt hatte, versuchte ich ihn zu erh√∂hen, indem ich eine Definition des Punktes hinzuf√ºgte, an dem der Gegner seine Agarics anweist, sich zu bewegen, und obwohl dieser Punkt in den meisten F√§llen ziemlich genau berechnet wurde, verbesserte dies allein die Ergebnisse des Bots nicht.  Nach meinen Beobachtungen wurde es noch schlimmer als der Fall, als sich die Agarics des Gegners einfach in die gleiche Richtung und mit der gleichen Geschwindigkeit bewegten, als h√§tte der Gegner nichts getan, sodass diese √Ñnderungen bis zu besseren Zeiten in einem separaten Gitarrenzweig gespeichert wurden. <br><br><div class="spoiler">  <b class="spoiler_title">Die Definition des gegnerischen Teams, die sp√§ter verwendet wurde</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8l/vx/ac/8lvxacnkg_w4byrrkka9znflham.gif" alt="Bild"><br>  <i>Strahlen von den Agarics des Gegners zeigen das mutma√üliche Team, das der Gegner seinen Agarics beim vorherigen Tick gegeben hat.</i>  <i>Die blauen Strahlen sind die genaue Richtung, in die der Agarik beim letzten Tick die Richtung ge√§ndert hat.</i>  <i>Schwarz ist das Ziel.</i>  <i>Die Richtung des Teams konnte nur dann genauer bestimmt werden, wenn sich der Agar vollst√§ndig in der Sichtzone befand (es war m√∂glich, die Auswirkung von Kollisionen auf die √Ñnderung seiner Geschwindigkeit zu berechnen).</i>  <i>Der Schnittpunkt der Strahlen ist das beabsichtigte Team des Gegners.</i>  <i>Gif machte auf Basis des Spiels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aicups.ru/session/200710</a> etwa 3.000 Ticks.</i> <br></div></div><br>  Es gab auch Versuche, die Bewertungsfunktion auf die Bewertung der gewonnenen Masse zu √ºbertragen, Versuche, die Funktion der Bewertung der Gefahr des Gegners zu √§ndern ... Aber auch hier wurden alle derartigen √Ñnderungen der Gef√ºhle noch schlimmer.  Das einzige, was bei der Beurteilung der Gefahr aus der N√§he zum Feind n√ºtzlich war, war eine weitere Leistungsoptimierung sowie die Ausweitung dieser Sch√§tzung auf einen viel gr√∂√üeren Radius als den Schnittradius mit dem Feind (im Wesentlichen die gesamte Karte, jedoch mit einer quadratischen Abnahme, wenn auch leicht vereinfacht). Anwesenheit des Gegners in f√ºnf oder mehr Radien im Bereich von 1/25 der maximalen Gefahr, gefressen zu werden).  Die letzte ungeplante √Ñnderung f√ºhrte auch dazu, dass meine Agariks gro√üe Angst hatten, sich einem wesentlich gr√∂√üeren Feind zu n√§hern, und im Falle ihrer √ºberlegenen Gr√∂√üe eher dazu neigten, sich dem Gegner zu n√§hern.  Es stellte sich also als erfolgreicher und nicht ressourcenintensiver Ersatz f√ºr den f√ºr die Zukunft geplanten Code heraus, der f√ºr die Angst vor einem Angriff eines Gegners durch Spaltung verantwortlich sein sollte (und ein wenig Hilfe bei einem solchen Angriff f√ºr mich sp√§ter). <br><br>  Nach langen und relativ erfolglosen Versuchen, etwas zu verbessern, kehrte ich wieder zur Vorhersage der Bewegungsrichtung des Gegners zur√ºck.  Ich habe beschlossen, es zu versuchen, wenn es nicht nur darum geht, die Dummy-Rivalen zu ersetzen, sondern es mit der minimalen und maximalen TTF-Option zu tun - zweimal simulieren und die beste ausw√§hlen.  Aber daf√ºr k√∂nnte die CPU nicht ausreichen, und in vielen Spielen meines Bots k√∂nnten sie sich aufgrund eines uners√§ttlichen Appetits einfach vom System trennen.  Daher habe ich vor der Implementierung dieser Option eine ungef√§hre Definition der aufgewendeten Zeit hinzugef√ºgt und bei √úberschreitung der Grenzwerte begonnen, die Anzahl der Simulationsbewegungen zu verringern.  Durch Hinzuf√ºgen einer Doppelsimulation des Feindes f√ºr den Fall, dass ich den Ort kenne, an den er sich bewegt, erhielt ich erneut eine ziemlich ernsthafte Erh√∂hung der meisten Spieleinstellungen, mit Ausnahme der ressourcenintensivsten (mit hoher Tr√§gheit / niedriger Geschwindigkeit / niedriger Viskosit√§t), die auf eine starke Abnahme der Tiefe zur√ºckzuf√ºhren ist Simulationen k√∂nnten noch schlimmer werden. <br><br>  Vor dem Start der 25-km-Tick-Spiele wurden zwei weitere n√ºtzliche Verbesserungen vorgenommen: die Strafe f√ºr das Beenden der Simulation weit entfernt von der Kartenmitte sowie das Erinnern an die vorherige Position des Gegners, wenn er die Sichtlinie verlassen hat (sowie das Simulieren seiner Bewegung zu diesem Zeitpunkt).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Implementierung der Strafe f√ºr die Endposition des Bots in der Simulation war ein vorberechnetes statisches Gefahrenfeld mit einer Gefahr von Null in einem Radius, der etwas gr√∂√üer als die H√§lfte der L√§nge des Spielfelds ist und schrittweise erh√∂ht wird, wenn Sie sich vom Spielfeld entfernen. Die Anwendung der Geldstrafe dieses Feldes an den Endpunkten der Simulation erforderte fast keine CPU und verhinderte zus√§tzliche L√§ufe in die Ecken, wodurch der Feind manchmal vor Angriffen bewahrt wurde. Und das Auswendiglernen mit anschlie√üender Simulation von Rivalen erm√∂glichte es uns gr√∂√ütenteils, zwei manchmal manifestierte Probleme zu vermeiden. Das erste Problem wird im folgenden GIF dargestellt. Das zweite Problem war, dass, wenn ein gr√∂√üerer Feind aus dem Sichtfeld verloren ging (zum Beispiel nach der Verschmelzung seiner Teile), es m√∂glich war, sich ‚Äûerfolgreich‚Äú zu vereinigen und zus√§tzlich einen bereits gef√§hrlichen Gegner zu f√ºttern.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel eines Gefahrenfeldes am Ende einer Kurve in einer Ecke und verschwendete Zecken</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/rc/qc/7s/rcqc7st4c0xmmzn038tl7eiuxrm.png"><br> <i>      ,         </i> <br><img src="https://habrastorage.org/webt/r_/qm/zx/r_qmzxmxzysmrityd6sld0yjhlw.gif" alt="Bild"><br> <i>  ,       .      ,      .</i> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au√üerdem wurden den Punkten am Rand der Karte Bewegungssimulationen hinzugef√ºgt: zu jedem Agarik der Rivalen und innerhalb eines Radius der arithmetischen mittleren Koordinate meiner Agariki alle 45 Grad. </font><font style="vertical-align: inherit;">Der Radius wurde auf Durchschnitt von den arithmetischen Mittelkoordinaten meiner Agarics eingestellt.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neue Simulationspunkte</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/1g/tp/s0/1gtps0pna1gmgquavh75h2ta-jc.gif" alt="Bild"><br> <i>        .       ¬´¬ª   ,   .       .</i> <br></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Letzte Vorbereitung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zum Zeitpunkt der Er√∂ffnung der Spiele f√ºr 25.000 Ticks und des Einzugs ins Finale hatte ich einen soliden Vorsprung, aber ich hatte nicht vor, mich zu entspannen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammen mit den neuen 25.000 Spielen kam die Nachricht: Die Spiele im Finale werden ebenfalls 25.000 sein, und das Zeitlimit der Strategie f√ºr Zecken ist etwas l√§nger geworden. </font><font style="vertical-align: inherit;">Nachdem ich die Zeit ausgewertet hatte, die meine Strategie unter den neuen Bedingungen f√ºr das Spiel verbringt, entschied ich mich, eine weitere Version der Simulation hinzuzuf√ºgen: Wir machen alles wie gewohnt, aber w√§hrend der Simulation unterwegs teilen wir uns auf. </font><font style="vertical-align: inherit;">Dies erforderte unter anderem die Verwendung der im vorherigen Schritt gefundenen Simulation, jedoch mit einer Verschiebung von 1 Zug (wenn wir beispielsweise festgestellt haben, dass 7 Ticks vom aktuellen geteilt werden, dann Im n√§chsten Zug wiederholen wir dasselbe, aber wir werden den Split bereits im 6. Zug durchf√ºhren. </font><font style="vertical-align: inherit;">Dies f√ºhrte zu aggressiven Angriffen auf Rivalen, verbrauchte jedoch etwas mehr Strategiezeit.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es h√§tte eine kurze Beschreibung des Algorithmus geben m√ºssen</font></font></b> <div class="spoiler_text"> <i>   </i> <br><br>  : <br><img src="https://habrastorage.org/webt/nr/we/mj/nrwemjif4m5vgis-dy_r6shmc3u.gif"><br><ul><li> f ‚Äî ,            ; </li><li> sim ‚Äî        (  ,  , TTF ,     ); </li><li> finalPositionFoodPotentialField ‚Äî   ,   ,    ; </li><li> finalPositionCornerDanger ‚Äî        .        ,         ; </li><li> n ‚Äî ,         .  10   50 ; </li><li> ateFood ‚Äî         i; </li><li> virusBurst ‚Äî            i; </li><li> opponentAteFood ‚Äî        i; </li><li> meAteOpponent ‚Äî      ; </li><li> opponentAteMe ‚Äî      ; </li><li> mine/opponents ‚Äî     .  Das hei√üt,          ‚Äî      ; </li><li> danger ‚Äî  ,   ,     . </li></ul><br><br><img src="https://habrastorage.org/webt/xu/0b/vq/xu0bvqxveolkicxieftkfrmuv5u.gif"><br><ul><li> moveType ‚Äî    ,        ; </li><li> max/min TTF ‚Äî   ,        TTF   (    TTF ); </li><li> dummy/aim ‚Äî      Dummy         (    ,          ). </li></ul><br><br><img src="https://habrastorage.org/webt/kr/cn/vl/krcnvlbbrj1eyfcai1abuv4o4pi.gif"><br><ul><li> destination ‚Äî ,         ; </li><li> moveTo ‚Äî  ,   n    ‚Äú   ‚Äù   ; </li><li> splitThenMove ‚Äî       split   ; </li><li> delayedSplitThenMove ‚Äî  ,  split    . </li></ul><br><br>             1 .  Das hei√üt,  splitThenMove    moveTo, delayedSplitThenMove      7  6 ,      6  5  ..     ,     ‚Äî               7 .                . <br><br>  destination : <br><ul><li>      15       ( ‚Äî  ).  24      ; </li><li>  ,       (    ); </li><li>         : </li><li> ‚Äú‚Äù     ,       ; </li><li>  8   .             . </li></ul><br>    destination     ,              . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle weiteren Verfeinerungen bezogen sich ausschlie√ülich auf die Effizienz der Simulationen bei fehlendem TL: Optimierung der Reihenfolge des Trennens bestimmter Teile der Logik in Abh√§ngigkeit von der verbrauchten CPU. </font><font style="vertical-align: inherit;">In den meisten Spielen sollte dies nichts √§ndern, aber etwas Richtigeres zu finden, funktionierte dann nicht.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endpunkte im Finale</font></font></b> <div class="spoiler_text"> <i>          .  808       2424 ,     . <s>   .</s></i> <br> <a href=""><img src="https://habrastorage.org/webt/ij/bi/qf/ijbiqfz4pmd8je8ps7qfvird4pi.png"></a> <br></div></div><br><h4>  Anstelle einer Schlussfolgerung </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Allgemeinen erwies sich der Start dieses Wettbewerbs als ziemlich ge√∂lt, aber in den ersten eineinhalb Wochen wurde die Aufgabe mit Hilfe der Teilnehmer in eine ziemlich spielbare Form gebracht. </font><font style="vertical-align: inherit;">Anfangs war die Aufgabe sehr unterschiedlich, und die Wahl des richtigen L√∂sungsansatzes schien keine triviale Aufgabe zu sein. </font><font style="vertical-align: inherit;">Noch interessanter war es, Wege zu finden, um den Algorithmus zu verbessern, ohne die Grenzen des CPU-Verbrauchs zu √ºberschreiten. </font><font style="vertical-align: inherit;">Vielen Dank an die Organisatoren f√ºr den Wettbewerb und f√ºr die Erstellung der weltweiten Quellcodes f√ºr Open Access. </font><font style="vertical-align: inherit;">Letztere haben nat√ºrlich zu Beginn ihre Probleme erheblich versch√§rft, aber den Teilnehmern das Verst√§ndnis des Ger√§ts des Weltsimulators erheblich erleichtert (wenn nicht zu sagen, was dies im Prinzip erm√∂glicht hat). </font><font style="vertical-align: inherit;">Besonderer Dank f√ºr die M√∂glichkeit, einen Preis zu w√§hlen! </font><font style="vertical-align: inherit;">Der Preis war also viel n√ºtzlicher :-) </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum brauche ich ein anderes MacBook?</font></font></s> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420737/">https://habr.com/ru/post/de420737/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420715/index.html">Die harte Wahrheit √ºber die Schwere des Lernens</a></li>
<li><a href="../de420725/index.html">Wie ich AI beigebracht habe, Tetris f√ºr NES zu spielen. Teil 1: Analyse des Spielcodes</a></li>
<li><a href="../de420729/index.html">Offenes Webinar "Naive Bayes Classifier"</a></li>
<li><a href="../de420731/index.html">Zabbix √ºber Steroide: Funktionsweise der einheitlichen √úberwachungsplattform von Sbertech</a></li>
<li><a href="../de420735/index.html">Wir laden Sie zum Finale des Find Yourself in Digital-Marathons im B√ºro der Mail.Ru Group ein</a></li>
<li><a href="../de420739/index.html">Die Box ist noch im Griff: Warum m√ºssen Sie 2018 noch selbst Sprachen lernen?</a></li>
<li><a href="../de420741/index.html">Spickzettel f√ºr Programmierer oder "Wir werden f√ºr Sie googeln"</a></li>
<li><a href="../de420749/index.html">GitLab f√ºr Continuous Delivery-Projekt auf InterSystems Technologies: Container</a></li>
<li><a href="../de420753/index.html">Microservice Frontend - ein moderner Ansatz zur Trennung der Front</a></li>
<li><a href="../de420757/index.html">Programmierwettbewerb: Handel (Ergebnisse)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>