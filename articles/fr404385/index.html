<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßî ü•• üí¨ Station de mesure de la vitesse et de la direction du vent ü•õ üñ±Ô∏è ‚ò™Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une station m√©t√©orologique ordinaire de marque ou maison mesure deux temp√©ratures-humidit√© (dans une pi√®ce et dans la rue), la pression atmosph√©rique ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Station de mesure de la vitesse et de la direction du vent</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/404385/">  Une station m√©t√©orologique ordinaire de marque ou maison mesure deux temp√©ratures-humidit√© (dans une pi√®ce et dans la rue), la pression atmosph√©rique et dispose en outre d'une horloge avec un calendrier.  Cependant, une vraie station m√©t√©orologique a bien plus - un capteur de rayonnement solaire, un pluviom√®tre et tout ce qui, en g√©n√©ral, n'est requis que pour les besoins professionnels, √† une exception pr√®s.  Un instrument de mesure des param√®tres du vent (vitesse et, surtout, direction) est un ajout tr√®s utile pour une maison de campagne.  De plus, les capteurs de vent de marque sont assez chers m√™me sur Ali Baba, et il est logique de chercher des solutions faites maison. <br><a name="habracut"></a><br>  Je dois dire tout de suite que si je savais √† l'avance combien de travail manuel et d'argent d√©pens√© pour les exp√©riences donneraient mon id√©e, je ne commencerais peut-√™tre pas.  Mais la curiosit√© l'emportait, et les lecteurs de cet article ont une chance d'√©viter ces pi√®ges que j'ai d√ª tr√©bucher. <br><br>  Pour <b>mesurer la vitesse du vent</b> (an√©mom√©trie), il existe des centaines de m√©thodes dont les principales sont: <br><br>  - fil chaud, <br>  - m√©canique - avec une h√©lice (plus pr√©cis√©ment une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">h√©lice</a> ) ou une h√©lice √† cupule horizontale ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">an√©mom√®tre √† cupule</a> classique) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.La</a> mesure de la vitesse dans ces cas √©quivaut √† mesurer la vitesse de l'axe sur lequel l'h√©lice ou l'h√©lice est mont√©e. <br>  - ainsi que les ultrasons, combinant des mesures de vitesse et de direction. <br>  Pour <b>mesurer moins la direction des</b> m√©thodes: <br>  - √©chographie mentionn√©e; <br>  - girouette m√©canique avec suppression √©lectronique de l'angle de rotation.  Il existe √©galement de nombreuses fa√ßons de mesurer l'angle de rotation: optique, r√©sistif, magn√©tique, inductif, m√©canique.  Il est possible, en passant, de simplement attacher une boussole √©lectronique √† la girouette - ce sont des m√©thodes fiables et simples (pour les r√©p√©titions √† hauteur de genou) pour transmettre des lectures √† partir d'un axe tournant de mani√®re al√©atoire.  Par cons√©quent, nous choisissons en outre la m√©thode optique traditionnelle. <br><br>  Si vous r√©p√©tez ind√©pendamment l'une de ces m√©thodes, vous devez garder √† l'esprit les exigences de consommation d'√©nergie minimale et d'exposition 24 heures sur 24 (et peut-√™tre toute l'ann√©e?) Au soleil et √† la pluie.  Le capteur de vent ne peut pas √™tre plac√© sous le toit √† l'ombre - au contraire, il doit √™tre aussi √©loign√© que possible de tous les facteurs parasites et ¬´ouvert √† tous les vents¬ª.  Un emplacement id√©al est l'ar√™te du toit de la maison ou, au pire, une grange ou un belv√©d√®re, √©loign√© des autres b√¢timents et des arbres.  De telles exigences n√©cessitent une alimentation autonome et, √©videmment, un canal de donn√©es sans fil.  Ces exigences sont responsables de certains des ¬´cloches et sifflets¬ª de la conception, qui est d√©crite ci-dessous. <br><br><div class="spoiler">  <b class="spoiler_title">√Ä propos de la consommation d'√©nergie minimale</b> <div class="spoiler_text">  Au fait, quelle est la consommation √©lectrique minimale?  Sur la base de piles domestiques ordinaires de type AA, la consommation moyenne du circuit ne devrait id√©alement pas d√©passer 1 √† 2 mA.  Comptez pour vous-m√™me: la capacit√© d'un √©l√©ment alcalin d√©cent de taille AA est d'environ 2,5-3 Ah, c'est-√†-dire qu'un circuit avec la consommation indiqu√©e fonctionnera pendant environ 1500-2500 heures, ou 2-3 mois.  En principe, c'est aussi un peu, mais relativement acceptable - vous ne pouvez rien faire de moins: faire faillite ou utiliser des batteries qui devront √™tre recharg√©es plus souvent que de changer les batteries.  Pour cette raison, lors de l'√©laboration d'un tel sch√©ma, nous sommes oblig√©s d'attraper les miettes: le mode d'√©conomie d'√©nergie obligatoire, les circuits soigneusement pens√©s et la s√©quence d'actions dans le programme.  De plus, nous verrons que dans la conception finale, je ne r√©pondais toujours pas aux exigences n√©cessaires et je devais utiliser la batterie. <br><br></div></div><br>  Une histoire cognitive sur la fa√ßon dont j'ai essay√© de reproduire la m√©thode la plus moderne et la plus avanc√©e - l'√©chographie, et a √©chou√©, je raconterai une autre fois.  Toutes les autres m√©thodes impliquent une mesure s√©par√©e de la vitesse et de la direction, j'ai donc d√ª cl√¥turer deux capteurs.  Ayant √©tudi√© th√©oriquement les an√©mom√®tres √† fil chaud, je me suis rendu compte que nous ne pourrions pas obtenir un √©l√©ment sensible pr√™t √† l'emploi d'un niveau amateur (ils sont disponibles sur le march√© occidental!), Mais pour l'inventer moi-m√™me - pour m'impliquer dans la R&amp;D r√©guli√®re avec la perte de temps et d'argent correspondante.  C'est pourquoi, apr√®s r√©flexion, j'ai d√©cid√© de r√©aliser une conception unifi√©e pour les deux capteurs: un an√©mom√®tre √† godet avec mesure optique de la vitesse de rotation et une girouette avec mesure √©lectronique de l'angle de rotation bas√©e sur un disque de codage (encodeur). <br><br><h2>  Mod√®les de capteurs </h2><br>  L'avantage des capteurs m√©caniques est qu'aucune R&amp;D n'y est requise, le principe est simple et clair, et la qualit√© du r√©sultat ne d√©pend que de la pr√©cision de l'ex√©cution d'une conception m√ªrement r√©fl√©chie. <br><br>  Il semblait donc th√©oriquement, en pratique, que cela entra√Ænait un tas de travaux m√©caniques, dont certains devaient √™tre command√©s sur le c√¥t√©, en raison du manque de machines de tournage et de fraisage √† port√©e de main.  Je dois dire tout de suite que je n'ai jamais regrett√© d'avoir mis√© d√®s le d√©but sur une approche capitaliste et de ne pas avoir commenc√© √† faire des constructions en mat√©riaux improvis√©s. <br><br>  Pour une girouette et un an√©mom√®tre, les pi√®ces suivantes sont n√©cessaires, qui devaient √™tre command√©es aupr√®s d'un tourneur et d'un op√©rateur de fraiseuse (la quantit√© et le mat√©riau sont indiqu√©s imm√©diatement pour les deux capteurs): <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/abe/8c9/b4c/abe8c9b4c68f9b7a5593d81e5f729cf0.png" width="1000" alt="image"><br>  Les axes, notons-le, sont n√©cessairement tourn√©s sur un tour: il est pratiquement impossible de faire un axe avec un point exactement au centre sur un genou.  Et le placement de la pointe exactement le long de l'axe de rotation est ici un facteur d√©terminant de succ√®s.  De plus, l'axe doit √™tre parfaitement droit, aucun √©cart n'est autoris√©. <br><br><h3>  Capteur m√©canique de direction du vent - girouette √©lectronique </h3><br>  La base de la girouette (ainsi que le capteur de vitesse ci-dessous) est un support en U en duralumin D-16, illustr√© sur le dessin en haut √† gauche.  Un morceau de plastique fluor√© est press√© dans l'√©videment inf√©rieur, dans lequel un √©videment √©tag√© est r√©alis√© s√©quentiellement avec des forets de 2 et 3 mm.  Un axe est ins√©r√© dans cette cavit√© avec une extr√©mit√© pointue (pour une girouette - en laiton).  Par le haut, il passe librement √† travers un trou de 8 mm.  Au-dessus de ce trou, des vis M2 fixent au support une pi√®ce rectangulaire du m√™me fluoroplastique de 4 mm d'√©paisseur de mani√®re √† chevaucher le trou.  Un trou est r√©alis√© dans le fluoroplastique exactement le long du diam√®tre de l'axe de 6 mm (situ√© exactement le long de l'axe g√©n√©ral des trous - voir le sch√©ma de montage ci-dessous).  Ftoroplast au-dessus et en dessous joue le r√¥le de paliers lisses. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/f85/413/03a/f8541303a5e102a6255d611e8190686a.png" width="600" alt="image"><br>  L'axe √† la place du frottement contre le photoplastique peut √™tre poli, et la zone de frottement peut √™tre r√©duite en contrant le trou dans le fluoroplastique.  ( <b>Voir √† ce sujet ci-dessous UPD du 13/09/18 et 06/05/19</b> ).  Pour la girouette, cela ne joue pas un r√¥le particulier - une certaine ¬´inhibition¬ª lui est m√™me utile, et pour l'an√©mom√®tre, vous devrez essayer de minimiser le frottement et l'inertie. <br><br>  Parlons maintenant de la suppression de l'angle de rotation.  L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">encodeur Gray</a> classique avec 16 positions dans notre bo√Ætier ressemble √† celui illustr√© dans la figure: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/4ec/2ee/310/4ec2ee310a65fbc1d80e85c834c65963.png" width="500" alt="image"><br>  La taille du disque a √©t√© choisie sur la base d'une isolation optique fiable des paires √©metteur-r√©cepteur les unes des autres.  Avec cette configuration, les fentes de 5 mm de large sont √©galement espac√©es de 5 mm et les paires optiques sont espac√©es exactement de 10 mm.  Les dimensions du support auquel est fix√©e la girouette ont √©t√© calcul√©es pr√©cis√©ment sur la base d'un diam√®tre de disque de 120 mm.  Tout cela, bien s√ªr, peut √™tre r√©duit (surtout si vous choisissez des LED et des photod√©tecteurs du plus petit diam√®tre possible), mais la complexit√© de fabrication de l'encodeur a √©t√© prise en compte: il s'est av√©r√© que les fraiseuses ne prenaient pas un travail aussi d√©licat, il a donc fallu le couper manuellement avec une lime.  Et puis, plus les dimensions sont grandes, plus le r√©sultat est fiable et moins de tracas. <br><br>  Le sch√©ma d'assemblage ci-dessus montre le montage du disque sur l'axe.  Un disque soigneusement centr√© est fix√© avec des vis M2 sur le moyeu caprolon.  Le manchon est plac√© sur l'axe de sorte que le jeu en haut soit minimal (1-2 mm) - de sorte que l'axe en position normale tourne librement, et pendant la r√©volution, la pointe ne tombe pas de la douille en dessous.  Des blocs de photod√©tecteurs et d'√©metteurs sont attach√©s au support en haut et en bas du disque, plus pr√©cis√©ment sur leur conception. <br><br>  L'ensemble de la structure est plac√© dans un bo√Ætier plastique (ABS ou polycarbonate) 150 √ó 150 √ó 90 mm.  Assembl√© (sans couvercle et girouette), le capteur de direction est le suivant: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c34/85b/a61/c3485ba615b14aa3728b9e624c5f3b50.jpg" width="500" alt="image"><br><br>  Notez que la direction s√©lectionn√©e vers le nord est indiqu√©e par une fl√®che, elle devra √™tre observ√©e lors de l'installation du capteur en place. <br><br>  En haut de l'axe, la girouette r√©elle est fix√©e.  Il est r√©alis√© sur la base du m√™me axe en laiton, dans la d√©coupe du c√¥t√© √©mouss√© dont une tige en laiton est soud√©e.  √Ä l'extr√©mit√© pointue, un fil M6 est coup√© √† une certaine longueur, et une charge ronde de contrepoids, moul√©e √† partir de plomb, est fix√©e dessus √† l'aide d'√©crous: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/84c/f58/ebb/84cf58ebbc6312411db92a32a51b46d4.jpg" width="500" alt="image"><br><br>  La charge est con√ßue pour que le centre de gravit√© tombe exactement sur le lieu de fixation (en le d√©pla√ßant le long du fil, vous pouvez obtenir un √©quilibre parfait).  La palette est fix√©e √† l'axe √† l'aide d'une vis en acier inoxydable M3, qui traverse le trou dans l'axe de la palette et est viss√©e dans le filetage coup√© dans l'axe de rotation (la vis de fixation est visible sur la photo ci-dessus).  Pour une orientation pr√©cise, le haut de l'axe de rotation a un √©videment semi-circulaire dans lequel se trouve l'axe de la girouette. <br><br><h3>  Capteur de vitesse du vent bricolage - An√©mom√®tre de coupe bricolage </h3><br>  Comme vous l'avez d√©j√† compris, la base du capteur de vitesse √† des fins d'unification a √©t√© choisie la m√™me que pour la girouette.  Mais les exigences de conception ici sont quelque peu diff√©rentes: afin de r√©duire le seuil de d√©marrage, l'an√©mom√®tre doit √™tre aussi l√©ger que possible.  Par cons√©quent, en particulier, son axe est en duralumin, le disque avec des trous (pour mesurer la vitesse) est de diam√®tre r√©duit: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f79/4eb/e72/f794ebe7245a7132970c1a27c04b5d0a.jpg" width="500" alt="image"><br><br>  Si quatre optocoupleurs sont n√©cessaires pour un codeur Gray √† quatre bits, il n'y en a qu'un pour un capteur de vitesse.  16 trous ont √©t√© for√©s sur la circonf√©rence du disque √† une distance √©gale, donc une r√©volution du disque par seconde √©quivaut √† 16 hertz de la fr√©quence provenant de l'optocoupleur (plus de trous sont possibles, moins sont possibles - la seule question est l'√©chelle de conversion d'√©nergie et d'√©conomie d'√©nergie pour les √©metteurs). <br><br>  Un capteur fait maison se r√©v√©lera encore assez rude (le seuil de d√©marrage n'est pas inf√©rieur √† un demi-m√®tre par seconde), mais il ne peut √™tre r√©duit que si la conception est radicalement modifi√©e: par exemple, au lieu d'un plateau tournant √† tasse, mettez une h√©lice.  Dans une centrifugeuse √† gobelets, la diff√©rence dans les forces de r√©sistance √† l'√©coulement, qui d√©termine le couple, est relativement faible - elle est obtenue uniquement en raison de la forme diff√©rente de la surface rencontrant le flux d'air entrant (par cons√©quent, la forme des gobelets doit √™tre aussi rationalis√©e que possible - id√©alement, c'est un demi-≈ìuf ou une boule).  L'h√©lice a beaucoup plus de couple, elle peut √™tre rendue beaucoup plus petite et, enfin, la fabrication elle-m√™me est plus simple.  Mais l'h√©lice doit √™tre install√©e dans le sens du flux d'air - par exemple, en la pla√ßant √† l' <a href="">extr√©mit√© de la m√™me girouette</a> . <br><br>  La question est: comment transmettre des lectures √† partir d'un capteur tournant au hasard autour d'un axe vertical?  Je ne pouvais pas le r√©soudre, et √† en juger par le fait que les constructions de coupes professionnelles sont toujours r√©pandues, cela n'est en aucun cas d√©cid√© √† partir d'un demi-coup de pied (nous ne prenons pas en compte les an√©mom√®tres manuels - ils sont orient√©s manuellement en fonction du d√©bit d'air). <br><br>  Ma version de l'an√©mom√®tre √† cupule est r√©alis√©e sur la base d'un disque laser.  La vue de dessus et de dessous est montr√©e sur la photo: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/86b/dfe/b7d/86bdfeb7d725ad1cacc76c48c7e99739.jpg" width="400" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/400/944/bf9/400944bf9dc46d666f49949f37fcf845.jpg" width="400" alt="image"><br><br>  Les tasses sont faites de fonds de bouteilles sous l'eau de b√©b√© Agusha.  Le fond est soigneusement coup√©, et tous les trois - √† la m√™me distance, afin qu'ils aient le m√™me poids, se r√©chauffent localement au centre (en aucun cas ne chauffez pas le tout - il se d√©formera de mani√®re irr√©versible!) Et le dos de la poign√©e en bois se plie vers l'ext√©rieur pour la rendre plus rationalis√©e.  Vous r√©p√©terez - faites le plein de plus grandes bouteilles de cinq ou six pi√®ces, vous pourrez probablement en faire trois plus ou moins la m√™me tasse.  Dans les coupelles r√©alis√©es, une d√©coupe est r√©alis√©e sur le c√¥t√© et elles sont fix√©es le long du p√©rim√®tre du disque √† 120 ¬∞ les unes par rapport aux autres √† l'aide de colle-mastic √©tanche.  Le disque est strictement centr√© autour de l'axe (je l'ai fait √† l'aide d'une rondelle m√©tallique embo√Æt√©e) et est mont√© sur le moyeu caprolon avec des vis M2. <br><br><h3>  Conception g√©n√©rale et installation de capteurs </h3><br>  Les deux capteurs, comme d√©j√† mentionn√©, sont plac√©s dans des bo√Ætiers en plastique de 150 √ó 150 √ó 90 mm.  Le choix du mat√©riau du bo√Ætier doit √™tre abord√© avec soin: l'ABS ou le polycarbonate ont une r√©sistance aux intemp√©ries suffisante, mais le polystyr√®ne, le plexiglas et surtout le poly√©thyl√®ne ne conviendront pas ici (et il sera difficile de les peindre pour se prot√©ger du soleil).  S'il n'est pas possible d'acheter une bo√Æte d'entreprise, il est pr√©f√©rable de souder le bo√Ætier √† partir d'une feuille de fibre de verre puis de le peindre pour le prot√©ger de la corrosion et lui donner un aspect esth√©tique. <br><br>  Un trou de 8-10 mm est fait dans le couvercle exactement au point de sortie de l'axe, dans lequel un c√¥ne en plastique d√©coup√© dans une buse √† partir d'un vaporisateur avec un mastic de construction ou de la colle est coll√© avec le m√™me mastic adh√©sif: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a0d/b61/78c/a0db6178c5977c8a8a9081daa31c4753.jpg" width="400" alt="image"><br><br>  Pour centrer le c√¥ne le long de l'axe, utilisez une pince pour fixer un morceau de bois au bas du couvercle, marquez le centre exact sur celui-ci et allez un peu plus loin avec un foret √† plumes de 12 mm, en faisant un √©videment annulaire autour du trou.  Le c√¥ne doit y entrer exactement, apr√®s quoi il peut √™tre enduit de colle.  Il peut en outre √™tre fix√© en position verticale pendant la p√©riode de solidification avec la vis et l'√©crou M6. <br><br>  Le capteur de vitesse lui-m√™me recouvre l'axe avec ce c√¥ne, comme un parapluie, emp√™chant l'eau de p√©n√©trer dans le corps.  Pour une girouette, il est n√©cessaire de placer en plus un manchon sur le c√¥ne, ce qui permettra de combler l'√©cart entre l'axe et le c√¥ne de l'√©coulement direct de l'eau (voir photo de la vue g√©n√©rale des capteurs ci-dessous). <br><br>  Les fils des optocoupleurs sont achemin√©s vers un connecteur s√©par√© de type D-SUB (voir photo du capteur de direction ci-dessus).  La contrepartie avec le c√¢ble est ins√©r√©e √† travers un trou rectangulaire dans la base du bo√Ætier.  Le trou est ensuite recouvert d'un couvercle avec une fente pour le c√¢ble, qui emp√™che le connecteur de tomber.  Les supports en duralumin sont viss√©s √† la base du bo√Ætier pour une fixation en place.  Leur configuration d√©pend de l'emplacement des capteurs. <br><br>  Une fois assembl√©s, les deux capteurs se pr√©sentent comme suit: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ac0/2ee/d02/ac02eed02599b4f62d7a959ecef6a136.jpg" width="500" alt="image"><br><br>  Ici, ils sont montr√©s d√©j√† install√©s en place - sur la cr√™te du gazebo.  Veuillez noter que les √©videments pour les vis de fixation du couvercle sont prot√©g√©s contre l'eau par des bouchons en caoutchouc brut.  Les capteurs sont install√©s strictement horizontalement au niveau, pour lequel j'ai d√ª utiliser des rev√™tements en morceaux de linol√©um. <br><br><h2>  Partie √©lectronique </h2><br>  La station m√©t√©o dans son ensemble se compose de deux modules: une unit√© distante (qui sert √† la fois des capteurs de vent et prend √©galement des lectures √† partir d'un capteur de temp√©rature-humidit√© externe) et le module principal avec des √©crans.  L'unit√© distante est √©quip√©e d'un √©metteur sans fil pour envoyer des donn√©es install√©es √† l'int√©rieur (l'antenne d√©passe du c√¥t√©).  Le module principal re√ßoit les donn√©es de l'unit√© distante (le r√©cepteur, pour la commodit√© de son orientation, est plac√© sur un c√¢ble dans une unit√© s√©par√©e), et prend √©galement des lectures du capteur de temp√©rature-humidit√© interne et affiche tout cela sur les √©crans.  Un composant s√©par√© de l'unit√© principale est une horloge avec un calendrier qui, pour la commodit√© de la configuration g√©n√©rale de la station, est desservie par un contr√¥leur Arduino Mini s√©par√© et poss√®de ses propres √©crans. <br><br><h3>  Module √† distance et circuit de mesure des capteurs de vent </h3><br>  En tant qu'√©metteurs photo, les LED IR AL-107B ont √©t√© s√©lectionn√©es.  Ces LED vintage, bien s√ªr, ne sont pas les meilleures de leur cat√©gorie, mais elles ont un bo√Ætier miniature avec un diam√®tre de 2,4 mm et sont capables de transmettre du courant jusqu'√† 600 mA par impulsion.  Soit dit en passant, lors des tests, il s'est av√©r√© que l'√©chantillon de cette LED vers 1980 (dans le cas rouge) a environ deux fois plus d'efficacit√© (exprim√©e dans la plage de fonctionnement fiable du photod√©tecteur) que les copies modernes achet√©es dans Chip-Dip (elles ont un transparent corps vert jaun√¢tre).  Il est peu probable qu'en 1980 les cristaux soient meilleurs que maintenant, bien que diable ne plaisante pas?  Il est possible, cependant, que la mati√®re soit sous diff√©rents angles de diffusion dans ces deux conceptions. <br><br>  Un courant constant d'environ 20 mA (r√©sistance 150 Ohm avec une alimentation de 5 volts) a √©t√© pass√© √† travers une LED dans le capteur de vitesse, et un courant puls√© (m√©andre avec un rapport cyclique de 2) d'environ 65 mA (les m√™mes 150 Ohms avec une alimentation de 12 volts) a √©t√© pass√© dans le capteur de direction.  Dans ce cas, le courant moyen √† travers une LED du capteur de direction est d'environ 33 mA, sur seulement quatre canaux - environ 130 mA. <br><br>  Comme photod√©tecteurs, des phototransistors L-32P3C dans un bo√Ætier d'un diam√®tre de 3 mm ont √©t√© choisis.  Le signal provient d'un collecteur charg√© sur une r√©sistance de 1,5 ou 2 kOhm √† partir d'une alimentation de 5 V. Ces param√®tres sont s√©lectionn√©s de mani√®re √† ce qu'√† une distance de ~ 20 mm entre le photo-√©metteur et le r√©cepteur, un signal logique pleine grandeur √† des niveaux de 5 volts arrive imm√©diatement √† l'entr√©e sans amplification suppl√©mentaire .  Les courants qui apparaissent ici peuvent vous sembler disproportionnellement importants, en fonction de la consommation minimale d'√©nergie indiqu√©e ci-dessus, mais comme vous le verrez, ils apparaissent dans chaque cycle de mesure pendant un maximum de plusieurs millisecondes afin que la consommation totale reste faible. <br><br>  La base de montage des r√©cepteurs et des √©metteurs √©tait les segments du canal de c√¢ble (visible sur la photo des capteurs ci-dessus), coup√©s de mani√®re √† former des ¬´oreilles¬ª pour le montage sur le support √† la base.  Pour chacun de ces d√©chets, une plaque en plastique a √©t√© coll√©e sur le couvercle de verrouillage de l'int√©rieur, d'une largeur √©gale √† la largeur du canal.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les LED et les phototransistors √©taient fix√©s √† la bonne distance dans les trous perc√©s dans cette plaque de sorte que les fils se trouvaient √† l'int√©rieur du canal, et seuls les renflements √† l'extr√©mit√© des coquilles d√©passaient vers l'ext√©rieur. Les conclusions sont soud√©es conform√©ment au sch√©ma (voir ci-dessous), les conclusions externes sont faites par des morceaux de fil flexible multicolore. Les r√©sistances pour les √©metteurs du capteur de direction sont √©galement situ√©es √† l'int√©rieur du canal, une conclusion g√©n√©rale en est tir√©e. Apr√®s le dessoudage, le couvercle s'enclenche, toutes les fentes sont scell√©es avec de la p√¢te √† modeler et un ruban adh√©sif suppl√©mentaire, qui ferme √©galement le trou sur le c√¥t√© oppos√© aux bornes, et toute la structure est remplie d'√©poxy. Les conclusions externes, comme on peut le voir sur la photo des capteurs, sont affich√©es sur le bornier mont√© √† l'arri√®re du support. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√©ma du circuit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'unit√© de traitement des capteurs de vent ressemble √† ceci: </font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3ed/42e/3b7/3ed42e3b7ef2fee830c17786e991db52.png" width="1000" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos de l'origine de la puissance 12-14 volts, voir ci-dessous. En plus des composants indiqu√©s sur le sch√©ma, l'unit√© distante contient un capteur de temp√©rature-humidit√©, qui n'est pas repr√©sent√© sur le sch√©ma. Le diviseur de tension connect√© √† la borne A0 du contr√¥leur est con√ßu pour contr√¥ler la tension de l'alimentation pour un remplacement rapide. La LED connect√©e √† la borne traditionnelle 13 (borne 19 du bo√Ætier DIP) est super brillante, pour sa lueur normale et non √©blouissante, suffisamment de courant dans une fraction de milliamp√®re est suffisant, ce qui est fourni par une r√©sistance inhabituellement √©lev√©e de 33 kOhm.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le sch√©ma utilise un contr√¥leur Atmega328 ¬´nu¬ª dans un bo√Ætier DIP, programm√© via Uno et mont√© sur un socket. De tels contr√¥leurs avec un chargeur Arduino d√©j√† enregistr√© sont vendus, par exemple, en Chip-Dip (ou vous pouvez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enregistrer le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chargeur </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">vous-m√™me</font></a><font style="vertical-align: inherit;"> ). Un tel contr√¥leur est commod√©ment programm√© dans un environnement familier, mais, d√©pourvu de composants sur la carte, il est, d'une part, plus √©conomique, et d'autre part, il prend moins de place. Un mode d'√©conomie d'√©nergie √† part enti√®re pourrait √™tre obtenu en se d√©barrassant √©galement du chargeur de d√©marrage (et en peignant g√©n√©ralement tout le code dans l'assembleur :), mais ici, il n'est pas tr√®s pertinent et la programmation est inutilement compliqu√©e.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le diagramme, des rectangles gris sont encercl√©s autour de composants li√©s s√©par√©ment aux canaux de vitesse et de direction. Consid√©rez le fonctionnement du circuit dans son ensemble. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fonctionnement du contr√¥leur dans son ensemble est contr√¥l√© par le temporisateur de surveillance WDT, qui est activ√© en mode d'appel d'interruption. WDT sort le contr√¥leur du mode veille √† intervalles d√©finis. Si le temporisateur red√©marre dans l'interruption appel√©e, il ne red√©marre pas de z√©ro, toutes les variables globales restent √† leurs valeurs. Cela vous permet d'accumuler des donn√©es de l'√©veil √† l'√©veil et, √† un moment donn√©, de les traiter - par exemple, de faire la moyenne. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au d√©but du programme, les d√©clarations de biblioth√®ques et de variables globales suivantes ont √©t√© faites (afin de ne pas encombrer le texte des exemples d√©j√† d√©taill√©s, tout ce qui concerne le capteur de temp√©rature-humidit√© a √©t√© publi√© ici):</font></font><br><br><pre><code class="plaintext hljs">#include &lt;VirtualWire.h&gt; #include &lt;avr/wdt.h&gt; #include &lt;avr/sleep.h&gt; . . . . . #define ledPin 13 //  (PB5  19 ATmega) #define IR_Pin 10 //  IRLU (PB2  16 Atmega) #define in_3p 9 //   3 #define in_2p 8 //   2 #define in_1p 7 //   1 #define in_0p 6 //   0 #define IR_PINF 5 //(PD5,11)   -  #define IN_PINF 4 //(PD4,6)    volatile unsigned long ttime = 0; //   float ff[4]; //      char msg[25]; //  byte count=0;// int batt[4]; //   byte wDir[4]; //   byte wind_Gray=0; //   </code> </pre> <br>  Les proc√©dures suivantes sont utilis√©es pour lancer le mode veille et le WDT (r√©veil toutes les 4 s): <br><br><pre> <code class="plaintext hljs">//      void system_sleep() { ADCSRA &amp;= ~(1 &lt;&lt; ADEN); //. cbi(ADCSRA,ADEN);   set_sleep_mode(SLEEP_MODE_PWR_DOWN); //   sleep_mode(); //   sleep_disable(); //      watchdog ADCSRA |= (1 &lt;&lt; ADEN); /. sbi(ADCSRA,ADEN);   } //**************************************************************** // ii: 0=16ms, 1=32ms,2=64ms,3=128ms,4=250ms,5=500ms // 6=1 sec,7=2 sec, 8=4 sec, 9= 8sec void setup_watchdog(int ii) { byte bb; if (ii &gt; 9 ) ii=9; bb=ii &amp; 7; if (ii &gt; 7) bb|= (1&lt;&lt;5); // bb -   bb|= (1&lt;&lt;WDCE); MCUSR &amp;= ~(1&lt;&lt;WDRF); //   WDTCSR |= (1&lt;&lt;WDCE) | (1&lt;&lt;WDE); //      WDTCSR = bb; WDTCSR |= (1&lt;&lt;WDIE); // WDT } //**************************************************************** //     ISR(WDT_vect) { wdt_reset(); }</code> </pre><br>  Le capteur de vitesse donne la fr√©quence d'interruption du canal optique, l'ordre de grandeur est de quelques dizaines de hertz.  La mesure de cette valeur est plus √©conomique et plus rapide apr√®s un certain temps (c'√©tait le sujet de la publication de l'auteur " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Evaluation des m√©thodes de mesure des basses fr√©quences sur l'Arduino</a> ").  Ici, la m√©thode est s√©lectionn√©e via la fonction pulseInLong () modifi√©e, qui ne lie pas la mesure √† des sorties de contr√¥leur sp√©cifiques (le texte de la fonction periodInLong () se trouve dans la publication). <br><br>  Dans la fonction setup (), les directions de sortie sont d√©clar√©es, la biblioth√®que d'√©metteurs 433 MHz et le temporisateur du chien de garde sont initialis√©s (la ligne pour IN_PINF est fondamentalement superflue et ins√©r√©e pour la m√©moire): <br><br><pre> <code class="plaintext hljs">void setup() { pinMode(IR_PINF, OUTPUT); //  pinMode(IN_PINF, INPUT); //     pinMode(13, OUTPUT); // vw_setup(1200); //   VirtualWire vw_set_tx_pin(2); //D2, PD2(4)   VirtualWire // Serial.begin(9600); // Serial-     setup_watchdog(8); //WDT  4 c wdt_reset(); }</code> </pre><br>  Enfin, dans le cycle principal du programme, nous commen√ßons chaque fois que nous nous r√©veillons (toutes les 4 secondes) nous lisons la tension et calculons la fr√©quence du capteur de vitesse du vent: <br><br><pre> <code class="plaintext hljs">void loop() { wdt_reset(); //  digitalWrite(ledPin, HIGH); //    batt[count]=analogRead(0); //      /*===  ==== */ digitalWrite(IR_PINF, HIGH); // -   float f=0; //   ttime=periodInLong(IN_PINF, LOW, 250000); // 0,25  // Serial.println(ttime); //    if (ttime!=0) {//    f = 1000000/float(ttime);} //      digitalWrite(IR_PINF, LOW); // - ff[count]=f; //     . . . . .</code> </pre><br>  Le temps de gravure de la LED IR (consommant, je me souviens, 20 mA) ici, comme vous le voyez, sera maximum en l'absence de rotation du disque du capteur et dans cette condition sera d'environ 0,25 seconde.  La fr√©quence minimale mesur√©e sera donc de 4 Hz (un quart de tour de disque par seconde avec 16 trous).  Comme cela s'est av√©r√© lors de l'√©talonnage du capteur (voir ci-dessous), cela correspond √† environ 0,2 m / s de vitesse du vent. Nous soulignons qu'il s'agit de la plus petite valeur mesurable de la vitesse du vent, mais pas une r√©solution et pas un seuil de d√©marrage (qui s'av√©rera √™tre beaucoup plus √©lev√©).  S'il y a une fr√©quence (c'est-√†-dire lorsque le capteur tourne), le temps de mesure (et, par cons√©quent, le temps de gravure des LED, c'est-√†-dire la consommation de courant) sera proportionnellement r√©duit et la r√©solution augmentera. <br><br>  Les proc√©dures suivantes sont effectu√©es tous les quatre r√©veils (c'est-√†-dire toutes les 16 secondes).  La valeur de la fr√©quence du capteur de vitesse √† partir des quatre valeurs accumul√©es que nous transmettons n'est pas moyenne, mais maximale - comme l'exp√©rience l'a montr√©, il s'agit d'une valeur plus informative.  Pour plus de commodit√© et d'uniformit√©, chacune des valeurs, quel que soit son type, est convertie avant la transmission en un entier positif de 4 d√©cimales.  La variable de comptage est surveill√©e par la variable de comptage: <br><br><pre> <code class="plaintext hljs">// 16        //  4- : if (count==3){ f=0; //  for (byte i=0; i&lt;4; i++) if (f&lt;ff[i]) f=ff[i]; //    int fi=(int(f*10)+1000); //  4 .    int volt=0; //  for (byte i=0; i&lt;4; i++) volt=volt+batt[i]; volt=volt/4+100; //   100  = 3 . volt=volt*10; // 4 .  . . . . .</code> </pre><br>  Vient ensuite la d√©finition de la direction du code Gray.  Ici, pour r√©duire la consommation, au lieu de constamment sur les LED IR, une fr√©quence de 5 kHz est fournie aux quatre canaux simultan√©ment via un transistor √† effet de champ cl√© en utilisant la fonction tone ().  La pr√©sence d'une fr√©quence √† chacune des d√©charges (sorties in_0p - in_3p) est d√©tect√©e √† l'aide d'une m√©thode similaire √† l'anti-rebond lors de la lecture des lectures d'un bouton press√©.  Tout d'abord, dans le cycle, nous attendons de voir s'il y a un niveau √©lev√© sur la sortie, puis v√©rifions-le apr√®s 100 Œºs.  100 Œºs est une demi-p√©riode d'une fr√©quence de 5 kHz, c'est-√†-dire que s'il y a une fr√©quence au moins √† partir de la deuxi√®me fois, nous retomberons √† un niveau √©lev√© (juste au cas o√π, r√©p√©tez quatre fois) et cela signifie qu'elle est d√©finitivement l√†.  Nous r√©p√©tons cette proc√©dure pour chacun des quatre bits de code: <br><br><pre> <code class="plaintext hljs">/* ===== Wind Gray ==== */ //: tone(IR_Pin,5000);// 5    boolean yes = false; byte i=0; while(!yes){ // 3 i++; boolean state1 = (digitalRead(in_3p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_3p)); if (i&gt;4) break; //   } if (yes) wDir[3]=1; else wDir[3]=0; yes = false; i=0; while(!yes){ // 2 i++; boolean state1 = (digitalRead(in_2p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_2p)); if (i&gt;4) break; //   } if (yes) wDir[2]=1; else wDir[2]=0; yes = false; i=0; while(!yes){ // 1 i++; boolean state1 = (digitalRead(in_1p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_1p)); if (i&gt;4) break; //   } if (yes) wDir[1]=1; else wDir[1]=0; yes = false; i=0; while(!yes){ // 0 i++; boolean state1 = (digitalRead(in_0p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_0p)); if (i&gt;4) break; //   } if (yes) wDir[0]=1; else wDir[0]=0; noTone(IR_Pin); //  //     : wind_Gray=wDir[0]+wDir[1]*2+wDir[2]*4+wDir[3]*8; //   .  int wind_G=wind_Gray*10+1000; //  4- .  . . . . .</code> </pre><br>  La dur√©e maximale d'une proc√©dure sera en l'absence de fr√©quence au niveau du r√©cepteur et √©gale √† 4 √ó 100 = 400 microsecondes.  Le temps de gravure maximum de 4 LED de direction sera quand aucun r√©cepteur n'est allum√©, c'est-√†-dire 4 √ó 400 = 1,6 millisecondes.  Par ailleurs, l'algorithme fonctionnera exactement de la m√™me mani√®re, si au lieu d'une fr√©quence dont la p√©riode est un multiple de 100 Œºs, il est simple d'appliquer un niveau √©lev√© constant aux LED.  S'il y a un m√©andre au lieu d'un niveau constant, nous √©conomisons simplement la nourriture de moiti√©.  Nous pouvons encore √©conomiser si nous d√©marrons chaque LED IR via une ligne distincte (respectivement, via une sortie distincte du contr√¥leur avec son propre transistor √† cl√©), mais en m√™me temps le circuit, le c√¢blage et le contr√¥le sont compliqu√©s, et le courant est de 130 mA pendant 2 ms toutes les 16 secondes - √ßa, tu vois, un peu. <br><br>  Enfin, <b>le transfert de donn√©es sans fil</b> .  Pour transf√©rer les donn√©es du site d'installation du capteur vers le tableau de bord de la station m√©t√©o, la m√©thode la plus simple, la moins ch√®re et la plus fiable a √©t√© choisie: <a href="">une paire √©metteur / r√©cepteur √† une fr√©quence de 433 MHz</a> .  Je conviens que la m√©thode n'est pas la plus pratique (en raison du fait que les appareils sont con√ßus pour transmettre des s√©quences de bits, pas des octets entiers, vous devez affiner votre esprit sur la conversion des donn√©es entre les formats n√©cessaires), et je suis s√ªr que beaucoup de gens voudront discuter avec moi en termes de fiabilit√©.  La r√©ponse √† la derni√®re objection est simple: ¬´vous ne savez tout simplement pas comment les cuisiner! <br><br>  Le secret est qu'il reste g√©n√©ralement dans les coulisses de diverses descriptions d'√©changes de donn√©es sur le canal 433 MHz: ces appareils √©tant purement analogiques, l'alimentation du r√©cepteur doit √™tre tr√®s bien nettoy√©e de toute pulsation √©trang√®re.  En aucun cas, vous ne devez alimenter le r√©cepteur √† partir du stabilisateur Arduino 5 volts interne!  L'installation d'un stabilisateur basse puissance s√©par√© pour le r√©cepteur (LM2931, LM2950 ou similaire) directement √† proximit√© de ses bornes, avec les circuits de filtrage corrects √† l'entr√©e et √† la sortie, augmente radicalement la plage de transmission et la fiabilit√©. <br><br>  Dans ce cas, l'√©metteur fonctionnait directement √† partir de la tension de la batterie de 12 V, le r√©cepteur et l'√©metteur √©taient √©quip√©s d'antennes maison standard sous la forme d'un morceau de fil de 17 cm de long (je rappelle que le fil d'antenne ne convient qu'√† un seul c≈ìur, et il est n√©cessaire de placer les antennes dans un espace parall√®le les uns aux autres.) Un paquet d'informations de 24 octets (tenant compte de l'humidit√© et de la temp√©rature) sans aucun probl√®me a √©t√© transmis en toute confiance √† une vitesse de 1200 bits / s en diagonale √† travers une parcelle de jardin de 15 acres (environ 40 √† 50 m√®tres), puis √† travers trois journaux  des murs √† l'int√©rieur de la pi√®ce (dans lesquels, par exemple, un signal cellulaire est re√ßu tr√®s difficilement et pas partout).  Conditions pratiquement inaccessibles pour toute m√©thode standard √† 2,4 GHz (comme Bluetooth, Zig-Bee et m√™me le Wi-Fi amateur), malgr√© le fait que la consommation de l'√©metteur ici est mis√©rable de 8 mA et uniquement au moment de la transmission r√©elle, le reste du temps que l'√©metteur consomme centimes.  L'√©metteur est plac√© structurellement √† l'int√©rieur de l'unit√© distante, l'antenne d√©passe horizontalement du c√¥t√©. <br><br>  Nous combinons toutes les donn√©es dans un seul paquet (dans une station r√©elle, la temp√©rature et l'humidit√© y seront ajout√©es), constitu√©es de parties uniformes de 4 octets et pr√©c√©d√©es de la signature ¬´DAT¬ª, l'envoyons √† l'√©metteur et terminons tous les cycles: <br><br><pre> <code class="plaintext hljs">/*=====Transmitter=====*/ String strMsg="DAT"; // -  strMsg+=volt; //  4  strMsg+=wind_G; // wind 4  strMsg+=fi; //  4  strMsg.toCharArray(msg,16); //    // Serial.println(msg); //  vw_send((uint8_t *)msg, strlen(msg)); //   vw_wait_tx(); //    - ! delay(50); //+      count=0; //  }//end count==3 else count++; digitalWrite(ledPin, LOW); //   system_sleep(); // ‚Äî   } //end loop</code> </pre><br>  La taille du paquet peut √™tre r√©duite si vous refusez l'exigence de pr√©senter chacune des valeurs de diff√©rents types sous la forme d'un code uniforme √† 4 octets (par exemple, pour le code Gray, bien s√ªr, un octet suffit).  Mais pour des raisons d'universalisation, j'ai tout laiss√© tel quel. <br><br>  <b>Caract√©ristiques nutritionnelles et de conception de l'unit√© distante</b> .  La consommation de l'unit√© distante est calcul√©e de cette mani√®re: <br><br>  - 20 mA (√©metteur) + ~ 20 mA (contr√¥leur avec circuits auxiliaires) pendant environ 0,25 s toutes les quatre secondes - une moyenne de 40/16 = 2,5 mA; <br>  - 130 mA (√©metteurs) + ~ 20 mA (contr√¥leur avec circuits auxiliaires) pendant environ 2 ms toutes les 16 secondes - une moyenne de 150/16/50 ‚âà 0,2 mA; <br><br>  Apr√®s avoir calcul√© sur ce calcul la consommation du contr√¥leur lors de la prise de donn√©es du capteur de temp√©rature-humidit√© et lorsque le transmetteur fonctionne, nous pouvons en toute s√©curit√© ramener la consommation moyenne √† 4 mA (√† un pic d'environ 150 mA, attention!).  Les piles (qui, incidemment, n√©cessiteront jusqu'√† 8 pi√®ces pour fournir √† l'√©metteur une tension maximale!) Devront √™tre chang√©es trop souvent, donc l'id√©e √©tait d'alimenter l'unit√© distante √† partir de piles 12 volts pour un tournevis - je n'en avais que deux suppl√©mentaires.  Leur capacit√© est encore inf√©rieure au nombre correspondant de piles AA - seulement 1,3 A ‚Ä¢ heures, mais personne ne prend la peine de les changer √† tout moment, en tenant une seconde charg√©e pr√™te.  Avec la consommation indiqu√©e de 4 mA, la capacit√© de 1300 mA ‚Ä¢ heures suffit pour environ deux semaines, ce qui n'est pas trop g√™nant. <br><br>  Notez que la tension d'une batterie fra√Æchement charg√©e peut aller jusqu'√† 14 volts.  Un stabilisateur d'entr√©e de 12 volts a √©t√© install√© dans ce cas - afin d'√©viter une surtension de l'alimentation de l'√©metteur et de ne pas surcharger le stabilisateur principal de cinq volts. <br><br>  L'unit√© portable dans un bo√Ætier en plastique appropri√© est situ√©e sous le toit, un c√¢ble d'alimentation de la batterie et des connexions aux capteurs de vent y sont connect√©s sur les connecteurs.  La principale difficult√© est que le circuit s'est av√©r√© extr√™mement sensible √† l'humidit√© de l'air: par temps de pluie, apr√®s quelques heures, l'√©metteur commence √† √©chouer, les mesures de fr√©quence montrent un d√©sordre complet et les mesures de tension de la batterie indiquent ¬´m√©t√©o sur Mars¬ª. <br><br>  Par cons√©quent, apr√®s avoir d√©bogu√© les algorithmes et v√©rifi√© toutes les connexions, le bo√Ætier doit √™tre soigneusement scell√©.  Tous les connecteurs √† l'entr√©e du bo√Ætier sont scell√©s avec du mastic, la m√™me chose s'applique √† toutes les t√™tes de vis qui sortent, √† la sortie de l'antenne et au c√¢ble d'alimentation.  Les joints du corps sont enduits de p√¢te √† modeler (en tenant compte du fait qu'ils devront √™tre s√©par√©s), et en outre coll√©s sur le dessus avec des bandes de ruban de plomberie.  Il est agr√©able de renforcer en outre doucement les connecteurs utilis√©s √† l'int√©rieur avec un √©poxy: par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DB-15</a> montr√© sur le sch√©ma du module √† distance n'est pas lui-m√™me √©tanche, et de l'air humide s'√©chappera lentement entre le cadre m√©tallique et la base en plastique. <br><br>  Mais toutes ces mesures en elles-m√™mes ne donneront qu'un effet √† court terme - m√™me s'il n'y a pas d'aspiration d'air froid et humide, alors l'air sec de la pi√®ce se transforme facilement en air humide lorsque la temp√©rature √† l'ext√©rieur du bo√Ætier baisse (rappelez-vous le ph√©nom√®ne appel√© le ¬´point de ros√©e¬ª). <br><br>  Pour √©viter cela, il est n√©cessaire de laisser une cartouche ou un sac avec un dessicant - gel de silice √† l'int√©rieur du bo√Ætier (les sacs avec celui-ci sont parfois plac√©s dans des bo√Ætes avec des chaussures ou dans certains emballages avec des appareils √©lectroniques).  Si le gel de silice d'origine inconnue est stock√© depuis longtemps, il doit √™tre calcin√© avant utilisation dans un four √©lectrique √† 140-150 degr√©s pendant plusieurs heures.  Si le bo√Ætier est correctement scell√©, le dessiccateur devra √™tre remplac√© plus souvent qu'au d√©but de chaque saison estivale. <br><br><h3>  Module principal </h3><br>  Dans le module principal, toutes les valeurs sont accept√©es, d√©chiffr√©es, si n√©cessaire, converties conform√©ment aux √©quations d'√©talonnage et affich√©es. <br><br>  Le r√©cepteur est plac√© √† l'ext√©rieur du module principal de la station et plac√© dans une petite bo√Æte avec des oreilles pour le montage.  L'antenne est sortie √† travers une ouverture dans le couvercle, toutes les ouvertures du bo√Ætier sont scell√©es avec du caoutchouc brut.  Les contacts du r√©cepteur sont connect√©s √† un connecteur domestique tr√®s fiable de type RS-4, c√¥t√© r√©cepteur, il est connect√© via un morceau de c√¢ble AV √† double blindage: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5da/ffc/abe/5daffcabee184faa792d98fffea4abb7.jpg" width="500" alt="image"><br><br>  Un signal est capt√© le long de l'un des noyaux de c√¢ble, et de l'autre, l'alimentation est fournie sous forme de 9 volts bruts √† partir de l'adaptateur d'alimentation du module.  Le stabilisateur type LM-2950-5.0 avec condensateurs de filtrage est install√© dans une bo√Æte avec le r√©cepteur sur une √©charpe s√©par√©e. <br><br>  Des exp√©riences ont √©t√© men√©es pour augmenter la longueur du c√¢ble (juste au cas o√π cela ne fonctionnerait pas soudainement √† travers le mur?), Dans lequel il s'est av√©r√© que rien ne change dans une longueur allant jusqu'√† 6 m√®tres. <br><br>  Il n'y a que quatre √©crans OLED: deux donn√©es m√©t√©orologiques de service jaunes, deux horloges vertes et un calendrier.  Leur placement est montr√© sur la photo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccb/ff2/095/ccbff20958163b5865beb85f9a2bcf0f.jpg" width="500" alt="image"><br><br>  Veuillez noter que dans chaque groupe, l'un des affichages est du texte, le second est graphique, avec des polices cr√©√©es artificiellement sous la forme d'images de glyphes.  Ici, nous ne nous attarderons pas sur la question de l'affichage des informations sur les √©crans afin de ne pas gonfler le texte d√©j√† √©tendu de l'article et des exemples: en raison de la pr√©sence d'images de glyphes qui doivent √™tre affich√©es individuellement (souvent en listant simplement les options en utilisant l'op√©rateur de casse), les programmes de sortie peuvent √™tre tr√®s volumineux.  Pour plus d'informations sur la fa√ßon de g√©rer ces affichages, consultez la publication de l'auteur, ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mode graphique et texte des affichages Winstar</a> ¬ª, qui comprend un exemple d'affichage pour la sortie des donn√©es de vent. <br><br>  <b>Sch√©ma du circuit.</b>  L'horloge et ses affichages sont entretenus par un contr√¥leur Arduino Mini s√©par√© pour faciliter la configuration et nous ne les d√©monterons plus ici.  Le sch√©ma de connexion des composants √† l'Arduino Nano, qui contr√¥le la r√©ception et la sortie des donn√©es m√©t√©orologiques, est le suivant: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c6/0c2/49d/6c60c249dfa514a332194b8c5cc10e95.png" width="1000" alt="image"><br><br>  Ici, contrairement au module distant, la connexion des capteurs m√©t√©orologiques - un barom√®tre et un capteur de temp√©rature-humidit√© interne est repr√©sent√©e.  Faites attention au c√¢blage d'alimentation - les √©crans sont aliment√©s par un stabilisateur 5 V s√©par√© de type LM1085.  Il est naturel d'alimenter les affichages d'horloge √† partir de celui-ci, mais dans ce cas, le contr√¥leur d'horloge doit √©galement √™tre aliment√© par la m√™me tension, et via la sortie 5 V, pas Vin (pour Mini Pro, ce dernier est appel√© RAW).  Si vous alimentez le contr√¥leur de la montre de la m√™me mani√®re que le Nano - 9 volts via la broche RAW, son stabilisateur interne entrera en conflit avec les 5 volts externes et, bien s√ªr, le plus fort gagnera dans ce combat, c'est-√†-dire le LM1085 et la Mini restera compl√®tement sans alimentation.  De plus, pour √©viter toutes sortes de probl√®mes, avant de programmer le Nano et surtout le Mini (c'est-√†-dire avant de connecter le c√¢ble USB), l'adaptateur externe doit √™tre d√©connect√©. <br><br>  Sur le stabilisateur LM1085, lorsque les quatre √©crans sont connect√©s, la puissance sera allou√©e d'environ un watt, il doit donc √™tre install√© sur un petit radiateur √† environ 5-10 cm2 d'un coin en aluminium ou en cuivre. <br><br>  R√©ception et traitement des donn√©es.  Ici, je reproduis et commente uniquement des fragments du programme li√©s aux donn√©es de vent, quelques mots sur d'autres capteurs ci-dessous. <br><br>  Pour recevoir un message sur un canal 433 MHz, la m√©thode standard d√©crite dans de nombreuses sources est applicable.  Nous connectons la biblioth√®que et d√©clarons les variables: <br><br><pre> <code class="plaintext hljs">#include &lt;VirtualWire.h&gt; . . . . . int volt; //      float batt; //  ‚Äî   byte wDir; //    uint16_t t_time = 0; //   char str[5]; //   uint8_t buf[VW_MAX_MESSAGE_LEN]; //    uint8_t buflen = VW_MAX_MESSAGE_LEN; // max    . . . . .</code> </pre><br>  Une particularit√© est li√©e √† la taille du buffer buflen: d√©clarer sa valeur (VW_MAX_MESSAGE_LEN) une fois au d√©but du programme ne suffit pas.  Comme cette variable appara√Æt par r√©f√©rence dans la fonction de r√©ception (voir ci-dessous), la taille de message par d√©faut doit √™tre mise √† jour √† chaque cycle.  Sinon, en raison de la r√©ception de messages corrompus, la valeur buflen sera raccourcie √† chaque fois jusqu'√† ce que vous commenciez √† obtenir toutes sortes de b√™tises au lieu de donn√©es.  Dans les exemples, ces deux variables sont g√©n√©ralement d√©clar√©es localement dans le cycle loop (), car la taille de la m√©moire tampon est mise √† jour automatiquement, et ici nous allons simplement r√©p√©ter l'affectation de la valeur souhait√©e au d√©but de chaque cycle. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dans la proc√©dure de configuration, d√©finissez les param√®tres suivants: </font></font><br><br><pre> <code class="plaintext hljs">void setup() { delay (500); //    pinMode(16,INPUT_PULLUP); //   vw_setup(1200); //   VirtualWire vw_set_rx_pin(17); //A3   VirtualWire . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant de prendre quoi que ce soit, l'intervalle de temps t_time √©coul√© depuis la derni√®re r√©ception est v√©rifi√©. </font><font style="vertical-align: inherit;">S'il a d√©pass√© les limites raisonnables (par exemple, 48 secondes - trois fois le temps de nouvelle tentative des messages de l'unit√© externe), cela est per√ßu comme une perte du capteur et est en quelque sorte affich√© √† l'√©cran:</font></font><br><br><pre> <code class="plaintext hljs">void loop() { vw_rx_start(); //   buflen = VW_MAX_MESSAGE_LEN; //     if ((int(millis()) - t_time) &gt; 48000) // t_time    48  { &lt;   &gt; }//end    if (vw_have_message()) { //  if (vw_get_message(buf, &amp;buflen)) //    { vw_rx_stop(); //    t_time = millis(); // t_time for (byte i=0;i&lt;3;i++) //     str[i]= buf[i]; str[3]='\0'; if((str[0]=='D')&amp;&amp;(str[1]=='A')&amp;&amp;(str[2]=='T')) { //  // : for (byte i=3;i&lt;7;i++) //     str[i-11]= buf[i]; //     volt=atoi(str); //    volt=(volt/10)-100; //   4-  batt=float(volt)/55.5; //       //      for (byte i=7;i&lt;11;i++) //     str[i-15]= buf[i]; //     int w_Dir=atoi(str); //    w_Dir=(w_Dir-1000)/10; //    wDir=lowByte(w_Dir); //  -   &lt;      case&gt; . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coefficient 55,5 - conversion de la valeur du code ADC en une tension r√©elle, sa valeur d√©pend de la tension de r√©f√©rence et des valeurs des r√©sistances du diviseur. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soit dit en passant, le code Gray a une caract√©ristique: l'ordre des bits n'y est pas important, le code enregistre toutes ses propri√©t√©s lors de leur r√©arrangement. Et puisque lors du d√©cryptage, nous consid√©rons toujours chaque cas s√©par√©ment, les bits peuvent √™tre visualis√©s dans n'importe quel ordre et m√™me confus lorsqu'ils sont connect√©s. C‚Äôest une autre affaire si vous voulez trier cette affaire d‚Äôune mani√®re ou d‚Äôune autre - par exemple, cr√©ez un tableau de valeurs de direction ("s", "ssz", "sz", "ssz", "z", etc.), et au lieu de la consid√©ration individuelle chaque option pour extraire les d√©signations par num√©ro dans ce tableau. Il faudrait ensuite convertir le code Gray en un binaire ordonn√©, et l'ordre des bits jouerait un r√¥le important.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Et enfin, nous extrayons la valeur de vitesse et fermons tous les op√©rateurs: </font></font><br><br><pre> <code class="plaintext hljs">. . . . . for (byte i=19;i&lt;23;i++) //     str[i-19]= buf[i]; //     int wFrq=atoi(str); //    wFrq = (wFrq-1000)/10; //   4-  wFrq=10+0.5*wFrq;//      &lt;    &gt; }//end if str=DAT }//end vw_get_message } //end vw_have_message(); . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici 10 + 0,5 * wFrq est l'√©quation de jauge. </font><font style="vertical-align: inherit;">10 dm / s (soit 1,0 m√®tre par seconde) est le seuil de d√©marrage et 0,5 est le coefficient de conversion de la fr√©quence en vitesse (en dm / s). </font><font style="vertical-align: inherit;">Avec une valeur nulle de la fr√©quence d'entr√©e, cette √©quation donne 10 dm / s, il faut donc prendre soin s√©par√©ment pour qu'elle ne soit pas 1 m / s, mais une valeur nulle. </font><font style="vertical-align: inherit;">Vous pouvez calibrer le capteur de vitesse √† l'aide de l'un des an√©mom√®tres portables et des ventilateurs de bureau les moins chers. </font><font style="vertical-align: inherit;">N'essayez pas de d√©terminer exp√©rimentalement le seuil de d√©part - il sera beaucoup plus pr√©cis si deux ou trois points de la valeur directe d'√©talonnage de la vitesse V en fonction de la fr√©quence F sont not√©s: V = V + K √ó F √† diff√©rents d√©bits, puis le seuil de d√©part est d√©termin√© automatiquement comme la valeur de V (ordonn√©e du point intersection de cette ligne avec l‚Äôaxe des vitesses).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant de fermer la boucle principale, vous devez faire encore une chose. Nous avons la tension de la batterie, mais vous n'avez pas besoin de l'afficher tout le temps - prenez simplement de la place. Pour ce faire, nous avons besoin du bouton Kn1 - en cliquant dessus, nous rempla√ßons temporairement (jusqu'√† la prochaine mise √† jour des donn√©es) la ligne de temp√©rature-humidit√© externe avec la valeur de tension:</font></font><br><br><pre> <code class="plaintext hljs">. . . . . if (digitalRead(16)==LOW){ //  &lt;   ,   -&gt; }//  delay(500); }// loop</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'avais un bouton, comme on peut le voir sur le circuit, avec un contact inverseur, mais rien n'emp√™che d'installer celui habituel avec un contact de fermeture, de le connecter √† l'alimentation via une r√©sistance. Vous pouvez √©galement ajouter √† cela le clignotement des symboles sur l'affichage si la tension de la batterie descend en dessous, par exemple, 10 volts, comme signe qu'il est temps de la changer. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En conclusion sur les capteurs m√©t√©orologiques.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En tant que capteur externe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, SHT-75 a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">utilis√©</font></a><font style="vertical-align: inherit;"> - le seul capteur amateur que j'ai trouv√© qui ne n√©cessite pas d'√©talonnage et affiche les valeurs r√©elles de la temp√©rature et de l'humidit√© directement ¬´hors de la bo√Æte¬ª (d'o√π son prix √©lev√©). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une biblioth√®que pour le connecter peut √™tre trouv√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le SHT-75 est con√ßu assez b√™tement: le substrat m√©tallique de la carte conduit tr√®s bien la chaleur, il doit donc √™tre compl√®tement retir√© √† l'ext√©rieur du bo√Ætier. Sinon, la pr√©sence d'un seul contr√¥leur de type ATmega328 avec un r√©gulateur de puissance dans un bo√Ætier ferm√© suffit pour chauffer le capteur √† travers le substrat de quelques degr√©s, m√™me si sa t√™te est sortie. Mon sch√©ma avec des capteurs de vent, avec ses courants de 20 √† 130 mA (m√™me des courants de quelques millisecondes insignifiants) a chauff√© le SHT-75 degr√©s par cinq, il a donc √©t√© sorti et install√© s√©par√©ment sur une plaque en plastique d√©passant lat√©ralement du bo√Ætier.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les donn√©es du SHT-75 sont prises par le m√™me contr√¥leur que les donn√©es des capteurs de vent et envoy√©es du module distant dans un seul paquet via un canal sans fil 433 MHz. Pour la transmission, ils sont √©galement pr√©alablement convertis en un format de cha√Æne de 4 octets. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour mesurer la temp√©rature et l'humidit√© √† l'int√©rieur de la pi√®ce, le banal DHT-22 a √©t√© choisi - puisque la plage y est petite par rapport √† la rue, cela ne fait aucune diff√©rence quel capteur utiliser (sauf, bien s√ªr, le DHT-11, qui ne doit en aucun cas √™tre utilis√© du tout en ce n'est tout simplement pas fonctionnel). La temp√©rature du DHT-22 a √©t√© corrig√©e par des mesures avec un thermom√®tre √† mercure (elles co√Øncidaient compl√®tement avec le SHT-75!), Et l'humidit√© a √©t√© l√©g√®rement corrig√©e par rapport au SHT-75. Les corrections sont entr√©es imm√©diatement avant l'affichage.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soit dit en passant, le DHT-22 doit √©galement √™tre retir√© du bo√Ætier avec des √©crans - sinon il chauffera in√©vitablement et s'allongera. Je le fixe sur un support en plastique au bas du bo√Ætier, √† une distance de dix millim√®tres de celui-ci. Cette circonstance, en passant, comme je le soup√ßonne, est l'une des raisons (sauf pour le manque d'√©talonnage individuel) que toutes les stations m√©t√©orologiques domestiques de marque RST et Oregon mentent sans vergogne dans le t√©moignage, m√™me en ayant une propagation d'eux-m√™mes (un capteur interne avec un externe) de deux √† trois degr√©s et jusqu'√† dix pour cent d'humidit√©. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Barom√®tre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il ne pr√©sente pas de probl√®mes, car presque tous les produits disponibles dans le commerce sont fabriqu√©s sur la m√™me base - la puce micro√©lectrom√©canique BMP180 (MEMS) ou ses modifications. Mon exp√©rience personnelle d'essayer d'utiliser une variante plus rare bas√©e sur LPS331AP a √©t√© n√©gative: il √©tait plus difficile de trouver une biblioth√®que pour elle, et pour couronner le tout, un conflit a √©t√© trouv√© avec d'autres p√©riph√©riques sur le bus I2C. Les lectures du barom√®tre peuvent devoir √™tre ajust√©es sur le site d'installation - tous les 10-12 m√®tres au-dessus du niveau de la mer, r√©duisez la pression de 1 mm Hg. Art. Par cons√©quent, une certaine valeur devra √™tre soustraite (ou ajout√©e) des relev√©s afin que la pression corresponde aux relev√©s de la station m√©t√©orologique officielle de la zone.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'apporte pas tous les programmes des stations m√©t√©orologiques compl√®tement - ils sont plut√¥t volumineux et vous ne pourrez toujours pas r√©p√©ter la construction en t√™te-√†-t√™te. </font><font style="vertical-align: inherit;">Si quoi que ce soit, frappez le PM. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD du 30/06/17. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puissance install√©e √† partir d'un panneau solaire. </font><font style="vertical-align: inherit;">Kit d'ici: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">contr√¥leur de </font></a></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">panneau solaire</font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La batterie</a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous ensemble + livraison √† Moscou en 2,5 tyr. </font><font style="vertical-align: inherit;">Cela fonctionne parfaitement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une technique int√©ressante pour calculer la puissance de la batterie solaire et de la batterie, qui est propos√©e par les consultants de ce site. </font><font style="vertical-align: inherit;">Exemple de calcul de 3 W de consommation √©lectrique (j'en ai beaucoup moins), je cite: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"3W multipli√© par 24h et divis√© par 6 = 12Ah c'est la capacit√© minimale de la batterie </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3W multipli√© par 24h et divis√© par 3h = 24W c'est la puissance minimale de la batterie solaire"</font></font><br>  Pas de commentaire. <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans mon cas, la puissance r√©sultante d'une centrale solaire est dix fois plus √©lev√©e que n√©cessaire dans les pires conditions m√©t√©orologiques. Par cons√©quent, dans le contr√¥leur de capteur, vous ne pouvez pas vous soucier particuli√®rement des √©conomies d'√©nergie et appliquer les fr√©quences n√©cessaires pour prendre des lectures et des moyennes. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD du 13/09/18.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pendant pr√®s de deux saisons d'exploitation, les forces et les faiblesses de la station ont √©t√© r√©v√©l√©es. Faible - tout d'abord, le cycle de mise √† jour des lectures de 16 secondes (√† partir de quatre s√©ries de mesures), comme il √©tait initialement, est trop long. L'installation d'une batterie solaire avec une batterie tampon nous a permis de ne pas penser aux √©conomies d'√©nergie et de jouer avec le temps de cycle. En cons√©quence, le cycle a √©t√© r√©gl√© sur 8 secondes (quatre mesures en deux secondes).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√¢ce aux am√©liorations m√©caniques, un palier de but√©e solide a √©t√© introduit sous la pointe du capteur de vitesse (oui, j'ai √©t√© averti de sa n√©cessit√© √† l'√©poque, mais je n'ai pas compris comment le faire √† l'√©poque). Apr√®s un certain temps, l'axe du capteur a compl√®tement travers√© le support en fluoroplastique et le seuil de d√©part a fortement augment√© (en passant, cela n'a pas affect√© la sensibilit√© de la girouette). Par cons√©quent, le support a √©t√© remplac√© par un palier de but√©e en acier inoxydable, dans lequel un petit √©videment a √©t√© r√©alis√© avec un foret mince. Je pr√©vois que je devrai alors trouver quelque chose d'autre avec un point qui, comme tout l'axe, est en duralumin. Mais je l'ai report√© jusqu'au moment o√π le capteur doit encore √™tre refait: le disque laser, pris comme base de conception, est devenu trouble du soleil pendant deux saisons et a commenc√© √† se fissurer. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD √† partir du 06/05/19.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos de l'alt√©ration du capteur (la m√™me girouette √† gauche). Le capteur de vitesse a d√ª √™tre refait √† la fois en raison de l'axe us√© et du disque laser inutilisable. La base de la conception reste la m√™me, mais le nouveau disque laser est peint avec de la peinture en a√©rosol dor√©e. La solution pour la pointe de l'axe a √©t√© trouv√©e sous la forme suivante. Un √©videment a √©t√© perc√© avec pr√©cision dans l'axe dural exactement au centre, et une garniture du haut du robinet chinois de 3 mm a √©t√© ins√©r√©e sur la deuxi√®me colle. La pointe du robinet est un c√¥ne bien centr√© avec un angle d'environ 70 √† 80 degr√©s, poli en plus avec une peau nulle, puis une p√¢te GOI. Comme base, j'ai utilis√© la t√™te d'une vis M3 en acier inoxydable avec une fente sci√©e, dans laquelle un petit √©videment central est marqu√© avec un foret conventionnel D = 2 mm. Cette vis a √©t√© viss√©e directement dans l'√©videment du fluoroplastique,sci√© avec un axe plus t√¥t que l'alignement a √©t√© fourni.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le bout de l'axe a √©t√© lubrifi√© avec de la graisse graphite pour le prot√©ger de la corrosion (car les propri√©t√©s inoxydables du robinet me sont inconnues). </font><font style="vertical-align: inherit;">Apr√®s un certain broyage, le seuil de d√©part a tellement diminu√© qu'il est devenu impossible de mesurer avec un an√©mom√®tre de marque, dans lequel le seuil est d'environ 0,3-0,5 cm / s. </font><font style="vertical-align: inherit;">Selon des donn√©es indirectes (en construisant une ligne droite en deux points), un seuil de 0,3 m / s a ‚Äã‚Äã√©t√© volontairement adopt√©, bien qu'il soit susceptible d'√™tre l√©g√®rement inf√©rieur. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le principal changement dans les algorithmes de calcul concerne √©galement les capteurs de vent, et j'ai trouv√© utile de mettre cela dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article s√©par√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr404385/">https://habr.com/ru/post/fr404385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr404375/index.html">Nouvelles quantiques d'IBM: lancement de deux puissants processeurs d'un nouveau type</a></li>
<li><a href="../fr404377/index.html">Le monde de l'Internet des objets en Russie: bande T, Element, X-turion, FlipFlic et bien plus</a></li>
<li><a href="../fr404379/index.html">Nous recherchons des intervenants au DIY-mitap du 1er juillet</a></li>
<li><a href="../fr404381/index.html">Vid√©o 3D DIY</a></li>
<li><a href="../fr404383/index.html">Formlabs a pr√©sent√© Fuse 1, Top 3D Shop a trouv√© un gagnant</a></li>
<li><a href="../fr404387/index.html">Il a pris une interview vid√©o du vice-pr√©sident Arduino et a discut√© avec ses √©coliers enseignants FPGA / FPGA et Verilog</a></li>
<li><a href="../fr404389/index.html">Tube Atmotube Atmosphere - Capteur portable de qualit√© de l'air</a></li>
<li><a href="../fr404391/index.html">Imprimante de niveau 80. Epson WorkForce Enterprise</a></li>
<li><a href="../fr404393/index.html">Bobby Compact - une nouvelle g√©n√©ration de sac √† dos ¬´antivol¬ª</a></li>
<li><a href="../fr404395/index.html">Histoires autour du moteur SCUMM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>