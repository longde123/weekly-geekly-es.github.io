<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíê üßù ‚úåüèΩ Desenvolvimento de plugins para Grafana: a hist√≥ria dos cones completos üõ≥Ô∏è üöâ ‚è≠Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! H√° alguns meses, lan√ßamos nosso novo projeto de c√≥digo aberto, o plugin Grafana para monitorar kubernetes, chamado DevOpsProdigy KubeGraf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de plugins para Grafana: a hist√≥ria dos cones completos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/474500/">  Ol√° pessoal!  H√° alguns meses, lan√ßamos nosso novo projeto de c√≥digo aberto, o plugin Grafana para monitorar kubernetes, chamado <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOpsProdigy KubeGraf, em produ√ß√£o</a></b> .  O c√≥digo fonte do plug-in est√° dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio p√∫blico no GitHub</a> .  E neste artigo, queremos compartilhar com voc√™ uma hist√≥ria sobre como criamos o plug-in, quais ferramentas usamos e quais armadilhas encontramos durante o processo de desenvolvimento.  Vamos l√°! <br><a name="habracut"></a><br><h4>  Parte 0 - introdut√≥ria: como chegamos a isso? </h4><br>  A id√©ia de escrever nosso pr√≥prio plugin para o Grafan nasceu por acaso.  Nossa empresa monitora projetos web de v√°rios n√≠veis de complexidade h√° mais de 10 anos.  Durante esse per√≠odo, adquirimos muita experi√™ncia, casos interessantes e experi√™ncia no uso de v√°rios sistemas de monitoramento.  E, em algum momento, nos perguntamos: ‚ÄúExiste uma ferramenta m√°gica para monitorar o Kubernetes, de modo que, como se costuma dizer,‚Äú defina e esque√ßa ‚Äù‚Äù?  E como solu√ß√µes prontas para essa pilha, h√° um grande conjunto de v√°rios tipos de ferramentas: prometheus-operator, conjunto de pain√©is kubernetes-mixin, grafana-kubernetes-app. <br><br>  O plugin grafana-kubernetes-app parecia ser a op√ß√£o mais interessante para n√≥s, mas n√£o √© suportado h√° mais de um ano e, al√©m disso, n√£o sabe como trabalhar com novas vers√µes das m√©tricas de exportador de n√≥ e de estado do kube.  E, em algum momento, decidimos: "Mas n√£o tomamos nossa pr√≥pria decis√£o?" <br><br>  Que ideias decidimos implementar em nosso plugin: <br><br><ul><li>  visualiza√ß√£o do "mapa de aplicativos": apresenta√ß√£o conveniente de aplicativos no cluster, agrupados por namespace, implanta√ß√£o ...; </li><li>  visualiza√ß√£o de conex√µes no formato "implanta√ß√£o - servi√ßo (+ portas)". </li><li>  visualiza√ß√£o da distribui√ß√£o de aplicativos de cluster por acenos de cluster. </li><li>  coletando m√©tricas e informa√ß√µes de v√°rias fontes: Prometheus e k8s api server. </li><li>  monitoramento da parte da infraestrutura (uso de tempo do processador, mem√≥ria, subsistema de disco, rede) e l√≥gica do aplicativo - pods de status de integridade, n√∫mero de r√©plicas dispon√≠veis, informa√ß√µes sobre a passagem de amostras de prontid√£o / prontid√£o. </li></ul><br><h4>  Parte 1: O que √© o Grafana Plugin? </h4><br>  Do ponto de vista t√©cnico, o plug-in do Grafana √© um controlador angular, armazenado no diret√≥rio de dados do Grafana ( <i>/var/grafana/plugins/&lt;your_plugin_name&gt;/dist/module.js</i> ) e pode ser carregado como um m√≥dulo SystemJS.  Tamb√©m neste diret√≥rio deve haver um arquivo plugin.json contendo todas as metainforma√ß√µes sobre o seu plug-in: nome, vers√£o, tipo de plug-in, links para o reposit√≥rio / site / licen√ßa, depend√™ncias e assim por diante. <br><br><img src="https://habrastorage.org/webt/ln/rz/kf/lnrzkf9mc6n6xcyn6iciuvak6cy.png"><br>  <i>module.ts</i> <br><br><img src="https://habrastorage.org/webt/lf/mk/3x/lfmk3xekikfm-p0y-donjv3rvw4.png"><br>  <i>plugin.json</i> <br><br>  Como voc√™ pode ver na captura de tela, especificamos plugin.type = app.  Para plugins para Grafana pode ser de tr√™s tipos: <br><br>  <b>painel</b> : o tipo mais comum de plug-in - √© um painel para visualizar qualquer m√©trica, √© usado para criar v√°rios pain√©is. <br>  <b>fonte de dados</b> : conector de plug-in para qualquer fonte de dados (por exemplo, fonte de dados Prometheus, fonte de dados ClickHouse, fonte de dados ElasticSearch). <br>  <b>app</b> : um plug-in que permite criar seu pr√≥prio aplicativo front-end dentro do Grafana, criar suas pr√≥prias p√°ginas html e acessar manualmente a fonte de dados para visualizar v√°rios dados.  Al√©m disso, plugins de outros tipos (fonte de dados, painel) e v√°rios pain√©is podem ser usados ‚Äã‚Äãcomo depend√™ncias. <br><br><img src="https://habrastorage.org/webt/x_/f-/3x/x_f-3x9bj18pz5zfvmx2yzg-9gg.png"><br>  <i>Um exemplo de depend√™ncias de plug-in com type = app</i> . <br><br>  Como linguagem de programa√ß√£o, voc√™ pode usar JavaScript e TypeScript (optamos por isso).  Voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">encontrar os</a> espa√ßos em branco para plug-ins hello-world de qualquer tipo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> : neste reposit√≥rio, h√° um grande n√∫mero de pacotes iniciais (h√° at√© um exemplo experimental de um plug-in no React) com construtores pr√©-instalados e configurados. <br><br><h4>  Parte 2: preparando seu ambiente local </h4><br>  Para trabalhar no plug-in, precisamos naturalmente de um cluster do kubernetes com todas as ferramentas pr√©-instaladas: prometheus, exportador de n√≥s, m√©tricas do estado do cubo, grafana.  O ambiente deve ser configurado de maneira r√°pida, f√°cil e natural e, para fornecer dados de recarga a quente, o diret√≥rio Grafana deve ser montado diretamente da m√°quina do desenvolvedor. <br><br>  A maneira mais conveniente, em nossa opini√£o, de trabalhar localmente com o kubernetes √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">minikube</a> .  O pr√≥ximo passo √© estabelecer o pacote Prometheus + Grafana usando o operador prometheus.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Este artigo</a> detalha o processo de instala√ß√£o do prometheus-operator no minikube.  Para ativar a persist√™ncia, voc√™ deve configurar o par√¢metro <i>persistence: true</i> no arquivo charts / grafana / values.yaml, adicione seu pr√≥prio PV e PVC e especifique-os no par√¢metro persistence.existingClaim <br><br>  O script final de lan√ßamento do minikube √© assim: <br><br><pre><code class="plaintext hljs">minikube start --kubernetes-version=v1.13.4 --memory=4096 --bootstrapper=kubeadm --extra-config=scheduler.address=0.0.0.0 --extra-config=controller-manager.address=0.0.0.0 minikube mount /home/sergeisporyshev/Projects/Grafana:/var/grafana --gid=472 --uid=472 --9p-version=9p2000.L</code> </pre> <br><h4>  Parte 3: desenvolvimento em si </h4><br>  <b>Modelo de objeto</b> <br><br>  Na prepara√ß√£o para a implementa√ß√£o do plug-in, decidimos descrever todas as entidades b√°sicas do Kubernetes com as quais trabalharemos como classes TypeScript: pod, implanta√ß√£o, daemonset, statefulset, job, cronjob, servi√ßo, n√≥ e namespace.  Cada uma dessas classes herda da classe BaseModel comum, que descreve os m√©todos construtor, destruidor, para atualizar e alternar a visibilidade.  Cada uma das classes descreve relacionamentos aninhados com outras entidades, por exemplo, uma lista de pods para uma entidade do tipo implanta√ß√£o. <br><br><pre> <code class="plaintext hljs">import {Pod} from "./pod"; import {Service} from "./service"; import {BaseModel} from './traits/baseModel'; export class Deployment extends BaseModel{ pods: Array&lt;Pod&gt;; services: Array&lt;Service&gt;; constructor(data: any){ super(data); this.pods = []; this.services = []; } }</code> </pre> <br>  Usando getters e setters, podemos exibir ou definir as m√©tricas de entidades que precisamos de uma maneira conveniente e leg√≠vel.  Por exemplo, a sa√≠da formatada da CPU aloc√°vel concorda: <br><br><pre> <code class="plaintext hljs">get cpuAllocatableFormatted(){ let cpu = this.data.status.allocatable.cpu; if(cpu.indexOf('m') &gt; -1){ cpu = parseInt(cpu)/1000; } return cpu; }</code> </pre> <br>  <b>P√°ginas</b> <br><br>  Uma lista de todas as p√°ginas do nosso plug-in √© descrita inicialmente em pluing.json na se√ß√£o de depend√™ncia: <br><br><img src="https://habrastorage.org/webt/vs/ij/b_/vsijb_avnlpat0ukzzgikcgmh4m.png"><br><br>  No bloco de cada p√°gina, devemos indicar o T√çTULO DA P√ÅGINA (ser√° ent√£o convertido em slug, pelo qual esta p√°gina estar√° dispon√≠vel);  nome do componente respons√°vel pela opera√ß√£o desta p√°gina (a lista de componentes √© exportada para module.ts);  especificando a fun√ß√£o do usu√°rio para quem o acesso a esta p√°gina est√° dispon√≠vel e configura√ß√µes de navega√ß√£o para a barra lateral <br><br>  No componente respons√°vel pela opera√ß√£o da p√°gina, devemos instalar o templateUrl, passando l√° o caminho para o arquivo html com marca√ß√£o.  Dentro do controlador, atrav√©s da inje√ß√£o de depend√™ncia, podemos acessar at√© 2 servi√ßos angulares importantes: <br><br><ul><li>  backendSrv - um servi√ßo que fornece intera√ß√£o com o grafana api-server; </li><li>  datasourceSrv - um servi√ßo que fornece intera√ß√£o local com todas as fontes de dados instaladas no seu Grafana (por exemplo, o m√©todo .getAll () - retorna uma lista de todas as fontes de dados instaladas'ov; .get (&lt;name&gt;) - retorna um objeto de inst√¢ncia de uma fonte de dados espec√≠fica. </li></ul><br><img src="https://habrastorage.org/webt/hd/ss/w8/hdssw8bsserz_p6ffzvuq49xbxs.png"><br><br><img src="https://habrastorage.org/webt/ps/we/ke/pswekesfljdpxjyedl4loxyuu_4.png"><br><br><img src="https://habrastorage.org/webt/aw/hv/ks/awhvksak5uamftrs_kwvbxdo71k.png"><br><br><h4>  Parte 4: fonte de dados </h4><br>  Do ponto de vista do Grafana, a fonte de dados √© exatamente o mesmo plug-in que todos os outros: possui seu pr√≥prio ponto de entrada module.js, existe um arquivo com a meta-informa√ß√£o plugin.json.  Ao desenvolver um plug-in com type = app, podemos interagir com a fonte de dados existente (por exemplo, prometheus-datasource) e tamb√©m com a nossa, que podemos armazenar diretamente no diret√≥rio do plugin (dist / datasource / *) ou definir como uma depend√™ncia.  No nosso caso, a fonte de dados vem com o c√≥digo do plugin.  Tamb√©m √© necess√°rio ter o modelo config.html e o controlador ConfigCtrl que ser√£o usados ‚Äã‚Äãpara a p√°gina de configura√ß√£o da inst√¢ncia da fonte de dados e o controlador da fonte de dados, que implementa a l√≥gica da fonte de dados. <br><br>  No plug-in KubeGraf, do ponto de vista da interface do usu√°rio, a fonte de dados √© uma inst√¢ncia do cluster kubernetes na qual os seguintes recursos s√£o implementados (o c√≥digo-fonte est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">por refer√™ncia</a> ): <br><br><ul><li>  coleta de dados do k8s api-server (obtendo uma lista do namespace'ov, deployment'ov ...) </li><li>  solicita√ß√µes de proxy em fonte de dados prometheus (que √© selecionada nas configura√ß√µes do plug-in para cada cluster espec√≠fico) e formata√ß√£o de respostas para o uso de dados em p√°ginas est√°ticas e pain√©is. </li><li>  atualiza√ß√£o de dados em p√°ginas est√°ticas do plug-in (com a taxa de atualiza√ß√£o definida). </li><li>  Processando Solicita√ß√µes para Gerar uma Lista de Modelos em Grafana-Dashboards (M√©todo .metriFindQuery ()) </li></ul><br><img src="https://habrastorage.org/webt/m0/dp/eg/m0dpeghprcomipkozpjqmwle888.png"><br><br><img src="https://habrastorage.org/webt/kg/il/f5/kgilf58m2_urrtf9ad9cbdqoiby.png"><br><br><img src="https://habrastorage.org/webt/zh/em/xa/zhemxa8z6uu7mf6tflfbzqbuf-m.png"><br><br><ul><li>  teste a conex√£o com o cluster k8s final. </li></ul><br><br><pre> <code class="plaintext hljs">testDatasource(){ let url = '/api/v1/namespaces'; let _url = this.url; if(this.accessViaToken) _url += '/__proxy'; _url += url; return this.backendSrv.datasourceRequest({ url: _url, method: "GET", headers: {"Content-Type": 'application/json'} }) .then(response =&gt; { if (response.status === 200) { return {status: "success", message: "Data source is OK", title: "Success"}; }else{ return {status: "error", message: "Data source is not OK", title: "Error"}; } }, error =&gt; { return {status: "error", message: "Data source is not OK", title: "Error"}; }) }</code> </pre> <br>  Um ponto interessante separado, em nossa opini√£o, √© a implementa√ß√£o do mecanismo de autentica√ß√£o e autoriza√ß√£o para a fonte de dados.  Como regra, pronto para configurar o acesso √† fonte de dados final, podemos usar o componente Grafana interno - datasourceHttpSettings.  Usando esse componente, podemos configurar o acesso √† fonte de dados http, especificando as configura√ß√µes b√°sicas de autentica√ß√£o e autoriza√ß√£o de URL e URL: senha de login ou certificado de cliente / chave de cliente.  Para perceber a capacidade de configurar o acesso usando um token de portador (de fato o padr√£o para k8s), tive que fazer um pouco de "produto qu√≠mico". <br><br>  Para resolver esse problema, voc√™ pode usar o mecanismo ‚ÄúRotas de plug-in‚Äù incorporado da Grafana (mais na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√°gina da documenta√ß√£o oficial</a> ).  Nas configura√ß√µes de nossa fonte de dados, podemos declarar um conjunto de regras de roteamento que ser√£o processadas pelo servidor proxy grafana.  Por exemplo, para cada terminal individual, existe a possibilidade de afixar cabe√ßalhos ou URLs com a capacidade de modelar, dados para os quais podem ser obtidos os campos jsonData e secureJsonData (para armazenar senhas ou tokens no formato criptografado).  Em nosso exemplo, solicita√ß√µes do formul√°rio <i>/ __ proxy / api / v1 / namespaces</i> ser√£o enviadas por proxy para o URL do formul√°rio <br>  &lt;your_k8s_api_url&gt; / api / v1 / namespaces com o cabe√ßalho Authorization: Bearer. <br><br><img src="https://habrastorage.org/webt/ht/xt/nm/htxtnmm0hw6xg0wutfdr11kx1a4.png"><br><br><img src="https://habrastorage.org/webt/mj/z8/ra/mjz8razkuln7puiqzwuplxhfqc4.png"><br><br>  Naturalmente, para trabalhar com o servidor api do k8s, precisamos de um usu√°rio com acesso somente leitura, o manifesto para a cria√ß√£o que voc√™ tamb√©m pode encontrar no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo-fonte do plug-in</a> . <br><br><h4>  Parte 5: libera√ß√£o </h4><br><img src="https://habrastorage.org/webt/wx/hb/bl/wxhbbl4dw6dszbcic1hhe9g5pte.jpeg"><br><br>  Depois de escrever seu pr√≥prio plugin para o Grafana, voc√™ naturalmente desejar√° coloc√°-lo em dom√≠nio p√∫blico.  Grafana √© uma biblioteca de plugins dispon√≠vel em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">grafana.com/grafana/plugins</a> <br><br>  Para que seu plug-in esteja dispon√≠vel na loja oficial, voc√™ precisa fazer PR <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neste reposit√≥rio</a> adicionando o seguinte conte√∫do ao arquivo repo.json: <br><br><img src="https://habrastorage.org/webt/bk/cf/nt/bkcfntnwmmnx8scgebsbtxpgjfk.png"><br><br>  onde version √© a vers√£o do seu plugin, url √© um link para o reposit√≥rio e commit √© um hash do commit, pelo qual uma vers√£o espec√≠fica do plugin estar√° dispon√≠vel. <br><br>  E na sa√≠da, voc√™ ver√° uma imagem maravilhosa do formul√°rio: <br><br><img src="https://habrastorage.org/webt/j3/cb/ul/j3cbulols6yx4buc_ysgd9qffdo.png"><br><br>  Os dados ser√£o coletados automaticamente do arquivo Leiame.md, Changelog.md e plugin.json com a descri√ß√£o do plugin. <br><br><h4>  Parte 6: em vez de conclus√µes </h4><br>  N√£o paramos de desenvolver nosso plugin ap√≥s o lan√ßamento.  E agora estamos trabalhando no monitoramento correto do uso dos recursos dos n√≥s do cluster, na introdu√ß√£o de novos recursos para aumentar o UX, al√©m de obter uma grande quantidade de feedback recebido ap√≥s a instala√ß√£o do plug-in pelos nossos clientes e do ishui no github (se voc√™ deixar seu problema ou solicita√ß√£o de pull, eu Ficarei muito feliz :-)). <br><br>  Esperamos que este artigo o ajude a entender uma ferramenta t√£o boa como o Grafana e, possivelmente, escrever seu pr√≥prio plugin. <br><br>  Obrigado!) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt474500/">https://habr.com/ru/post/pt474500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt474490/index.html">Chegou a hora: vis√£o geral do aspirador nasal Coclean</a></li>
<li><a href="../pt474492/index.html">Reaja ao bate-papo com v√°rios usu√°rios com o back-end do Chatix</a></li>
<li><a href="../pt474494/index.html">Como foi a C√∫pula Zabbix 2019</a></li>
<li><a href="../pt474496/index.html">Bancos de dados no HighLoad ++ 2019</a></li>
<li><a href="../pt474498/index.html">Tutorial JavaFX: Ol√°, mundo</a></li>
<li><a href="../pt474502/index.html">Odnoklassniki analisando no Joker 2019</a></li>
<li><a href="../pt474504/index.html">Backend ortodoxo</a></li>
<li><a href="../pt474508/index.html">Realiza√ß√µes da bioprinting 3D de enxertos de pele</a></li>
<li><a href="../pt474514/index.html">Como sobrevivem os magnatas da minera√ß√£o chinesa de Bitcoin</a></li>
<li><a href="../pt474516/index.html">Aplica√ß√µes de voz: o bilion√©simo mercado que a R√∫ssia n√£o percebe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>