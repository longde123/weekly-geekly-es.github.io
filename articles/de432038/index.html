<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÑ üì© üì∏ Klicken Sie auf Ruhm oder wie Sie einen Roboter und ... andere erregen üç£ üñêüèæ üö§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es war einmal ein belauschtes Gespr√§ch vor einem entfernten, entfernten Gesch√§ft : 


NB: - ?  
 GURU : - ¬´¬ª . .    .   ,  ... 
 


 NB: - , ?  
 GURU...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Klicken Sie auf Ruhm oder wie Sie einen Roboter und ... andere erregen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432038/"><img src="https://habrastorage.org/webt/px/hq/po/pxhqpot6x9sqphxahh2fzhk4pz8.png"><br><br>  Es war einmal ein belauschtes Gespr√§ch <strike>vor einem entfernten, entfernten Gesch√§ft</strike> : <br><blockquote><pre><code class="plaintext hljs">NB: -         ?</code> </pre> <br> <code><b>GURU</b> : -    ¬´¬ª      . . <b> </b>   <b></b> .  <b> </b> ,         <b></b> ...</code> <br> <br><pre> <code class="plaintext hljs">NB: -      ,     ?</code> </pre> <br> <code><b>GURU</b> : -    <strong>google</strong>   <b>yandex</b>  ,    .    <b></b>       .    ,      .</code> <br> <br><pre> <code class="plaintext hljs">NB: -       ?</code> </pre> <br> <code><b>GURU</b> : - ?‚Ä¶   <strong></strong> ...</code> <br> </blockquote>  <b>NB</b> h√∂rte auf zu fragen und bef√ºrchtete offenbar, einen deutlich erfahreneren Gespr√§chspartner zu √§rgern. <br>  <b>GURU verdrehte</b> die Augen, als betonte er die Ersch√∂pfung des Proxy-Themas und schwieg ... <br><a name="habracut"></a><br>  Nat√ºrlich wusste <strong>GURU</strong> , dass eine Suchabfrage (zum Beispiel mit dem Wort: Proxy) <strong>NB</strong> sehr bald dazu bringen w√ºrde, die gew√ºnschte Adresse zu erhalten: Portliste.  Aber nach den ersten Experimenten wird <strong>NB</strong> genauso schnell verstehen: <br><br><ul><li>  Nicht alle Adressen auf seiner Liste funktionieren. </li><li>  Nicht alle Proxies sind gleich gut. </li><li>  Das manuelle ‚ÄûAnkleben‚Äú einer Site durch einen Proxy ist eine Aufgabe, die erheblichen Willen erfordert. </li><li>  Ein "falscher" Proxy schadet der Situation, weil  Die Site kann durch Skripte von Riesen im Wrap vermutet werden. </li></ul><hr><br>  In diesem Artikel werde ich dar√ºber sprechen, wie improvisiert (und vor allem universell) bedeutet <br>  (ohne spezielle propriet√§re Software wie <strong>ZennoPoster</strong> usw. zu verwenden) <br>  Erstellen Sie ein automatisiertes Tool, um eine Liste der ‚Äûwirklich geeigneten‚Äú Proxys zu erhalten und diese zu verwenden, um (automatisierte) Besuche bei den bef√∂rderten Vertretern zu organisieren <br>  Website mit dem <strong>Chrome-Browser</strong> . <br><br>  Wenn Sie den Anweisungen folgen, erhalten Sie ein vorgefertigtes Tool, mit dem Sie: <br><br><ul><li>  Klicken Sie ganz automatisch auf die Zielwebsite, ohne Kompromisse einzugehen. </li><li>  Benutzerverhalten vollst√§ndig emulieren; </li><li>  Organisieren Sie alle Besuche nach einem Zeitplan (Szenario). </li><li>  F√ºhren Sie alle oben genannten Schritte so oft aus, bis Sie vorankommen. </li></ul><br>  Obwohl meine gesamte Arbeit (zusammen mit der Recherche) eine Woche dauerte, ben√∂tigen Sie keine zwei Tage, um ein solches Tool zu erstellen, das √ºber Grundkenntnisse in <strong>Befehlszeile</strong> , <b>PHP</b> und <b>JavaScript verf√ºgt</b> . <br><hr><br>  Bevor Sie jedoch unter das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">folgende Diagramm</a> scrollen, m√∂chte ich einige Worte dar√ºber sagen, warum und f√ºr wen dieses Material vorbereitet ist. <br><br>  Das Material ist n√ºtzlich, wenn Sie verstehen m√∂chten, wie die Konstruktionen (? Oder Konstruktoren?) Angelegt sind, mit denen Sie eine Anwendung relativ schnell, einfach und kostenlos erstellen k√∂nnen, die an Last√§nderungen angepasst werden kann.  Wenn Sie an der M√∂glichkeit interessiert sind, eine Anwendung basierend auf einem Service Bus ( <abbr title="Enterprise Service Bus">ESB</abbr> ) zu erstellen. <br><br>  Der Text ist hilfreich, wenn Sie sich mit der Verwendung von <strong>Docker</strong> f√ºr <b>Instant</b> Building-Systeme vertraut machen m√∂chten.  Oder wenn Sie nur an <strong>Selenium Server</strong> und den Nuancen des Empfangs von Inhalten / Manifestationen von HTTPx-Aktivit√§ten interessiert sind. <br><blockquote>  F√ºr "sofort verwenden" lohnt es sich nicht, all dies nachdenklich zu lesen.  Der Code ist sicher. </blockquote><div class="spoiler">  <b class="spoiler_title">Fahren Sie direkt mit dem Einrichten des fertigen Werkzeugs fort.</b>  <b class="spoiler_title">Die Einrichtung dauert weniger als 20 Minuten.</b> <div class="spoiler_text">  In diesem Handbuch wird davon ausgegangen, dass Ihnen 2 Computer mit installiertem Ubuntu 18.04 zur Verf√ºgung stehen. <br>  Eine f√ºr die Infrastruktur ( <b>Docker</b> ), die andere f√ºr die Prozesssteuerung ( <b>Prozess</b> ). <br><br>  Es wird davon ausgegangen, dass die folgenden Pakete bereits auf <b>Docker</b> installiert sind: <br><blockquote>  <i>Git, Docker, Docker-Compose</i> </blockquote><br>  Es wird davon ausgegangen, dass die folgenden Pakete bereits auf dem <b>Prozess</b> installiert <b>sind</b> : <br><blockquote>  <i>Git, PHP-Common, PHP-Cli, PHP-Curl, PHP-Zip, PHP-Memcached, Komponist</i> </blockquote>  Wenn Sie an dieser Stelle Fragen haben, empfehle ich Ihnen, 15 Minuten lang das gesamte Material zu lesen. <br><br>  <strong>Docker</strong> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    root-. # ,     TCP-: # 11300, 11211, 4444, 5930, 8080, 8081, 8082, 8083 #        # " root-"    git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git cd esb-infrastructure docker-compose up --build -d #      3     #   . #       web-.</span></span></code> </pre><br>  <strong>Prozess</strong> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      . #      process-   , #     -  php- git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/clicker-noserver.git cd clicker-noserver composer update #  .       "XXXXXXXX" mv app/settings.php.dist app/settings.php #   . gnome-terminal \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php curl"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php timezone"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php whoer"' #  . ,     , #  : - log/list.proxy php app/src/Utils/givethejob.php ./log/list.proxy</span></span></code> </pre><br>  Warten Sie und beobachten Sie, was √ºber das Web-Panel passiert (http: // IP-Adresse-Docker-Maschinen: 8080). <br>  Das Ergebnis wird in der gefundenen Warteschlange verf√ºgbar sein. <br></div></div><a name="scheme"></a><br><h2>  Crushing und Planung </h2><br><img src="https://habrastorage.org/webt/6e/1w/nc/6e1wnczv0tchzm_sq9pey6avk2o.png"><br><br>  Das obige Diagramm beschreibt die Abfolge der Prozessschritte, das erwartete Ergebnis f√ºr jeden Schritt und die Ressourcen, die zum Erstellen jedes Teils erforderlich sind (Details: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabe 2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabe 3</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabe 4,5,6</a> ). <br><br>  In meinem Fall passiert alles auf zwei <strong>Ubuntu 18.04-</strong> Rechnern.  Einer von ihnen steuert den Prozess.  Auf der anderen Seite werden mehrere Docker-Container f√ºr die Infrastruktur ausgef√ºhrt. <br><br><blockquote><h4>  Ausreden und Misserfolge </h4><br>  Der gesamte Paketcode besteht aus drei Teilen. <br>  Einer von ihnen geh√∂rt nicht mir (ich stelle fest, dass dies ein ordentlicher und sch√∂ner Code ist).  Die Quelle f√ºr diesen Code ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="packagist.org">packagist.org</a> . <br><br>  Ich selbst habe einen anderen geschrieben, ich habe versucht, ihn verst√§ndlich zu machen und habe ungef√§hr eine Woche diesem Teil des Codes gewidmet. <br><br>  Der Rest ist ein ‚Äûschwieriges historisches Erbe‚Äú.  Dieser Teil des Codes wurde √ºber einen l√§ngeren Zeitraum erstellt.  Einschlie√ülich zu einer Zeit, als ich nicht viel Programmierkenntnisse hatte. <br><br>  Dies ist genau der Grund f√ºr die Position von Repositorys auf meinem <strong>GitLab</strong> und Paketen auf meinem <strong>Satis</strong> .  Um auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Github.com">GitHub.com</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="packagist.org">packagist.org zu ver√∂ffentlichen, muss</a> dieser Code verarbeitet und ausf√ºhrlicher dokumentiert werden. <br><br>  Alle Teile des Codes k√∂nnen unbegrenzt verwendet werden.  Repositories und Pakete sind f√ºr immer verf√ºgbar. <br><br>  Bei der erneuten Ver√∂ffentlichung des Codes bin ich jedoch dankbar, dass ich einen Link zu mir oder zu diesem Artikel ver√∂ffentlicht habe. <br></blockquote><br><h2>  Ein bisschen √ºber Architektur </h2><br>  Der Ansatz, der zum Erstellen unseres Tools verwendet wurde, besteht darin, ein vorgefertigtes Dienstprogramm zum L√∂sen jeder bestimmten Aufgabe zu schreiben (oder zu verwenden).  Dar√ºber hinaus hat jedes Dienstprogramm unabh√§ngig von der zu l√∂senden Aufgabe zwei Eigenschaften, die allen gemeinsam sind: <br><br><ul><li>  Das Dienstprogramm kann unabh√§ngig von den anderen √ºber die Befehlszeile mit Parametern gestartet werden, die die Aufgabe enthalten. </li><li>  Das Dienstprogramm kann das Ergebnis der Ausf√ºhrung an stdout zur√ºckgeben (nachdem es auf eine bestimmte Weise konfiguriert wurde). </li></ul><br>  Mit einer nach diesem Prinzip erstellten L√∂sung k√∂nnen Sie die Anzahl der ausgef√ºhrten Task-Handler (Worker) f√ºr jeden der Prozessschritte √§ndern.  Eine unterschiedliche Anzahl von Mitarbeitern f√ºr jeden Schritt f√ºhrt aufgrund der L√§nge der Verarbeitungsaufgaben der vorherigen Schritte zu einer Ausfallzeit von ‚Äû0‚Äú f√ºr die folgenden Schritte. <br><br>  Die Zeit, die zum Abrufen einer Einheit des Ergebnisses des Prozesses (in unserem Fall eines verifizierten Proxys) aufgewendet wird, h√§ngt von externen Faktoren ab (Anzahl der ungeeigneten Proxys, Antwortzeit einer externen Ressource usw.). <br><br>  Indem wir die Anzahl der Arbeiter f√ºr jeden der Prozessschritte √§ndern, wandeln wir diese Abh√§ngigkeit in eine Abh√§ngigkeit von der Anzahl der laufenden Arbeiter um (d. H. Abh√§ngig von den beteiligten Rechen- und Kanalkapazit√§ten). <br><br>  Um den Betrieb einzelner unabh√§ngiger Teile zu synchronisieren, ist es zweckm√§√üig, den Messaging-Warteschlangenserver als einzelnen Datenbus zu verwenden.  Auf diese Weise k√∂nnen Sie die Ergebnisse der abgeschlossenen Schritte in der Warteschlange sammeln und sie zum richtigen Zeitpunkt als Eingabe an das Dienstprogramm "N√§chster Schritt" weitergeben. <br><br><h3>  Messaging-Warteschlange.  MQ und ESB </h3><br>  Als untere Ebene ( <abbr title="Nachrichtenwarteschlange">MQ</abbr> ) verwenden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Toller √úbersichtsartikel">Beanstalkd</a> .  Klein, leicht, konfigurationsfrei, verf√ºgbar im Deb-Paket und im Docker-Container, ein unauff√§lliger harter Arbeiter.  Die logische Ebene ( <abbr title="Enterprise Service Bus">ESB</abbr> ) implementiert den Code in <strong>PHP</strong> . <br><br>  F√ºr die Implementierung werden zwei Klassen verwendet.  <b>esbTask</b> und <b>nextStepWorker</b> . <br><br>  <b>esbTask</b> <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">esbTask</span></span></span><span class="hljs-class"> //   ,     </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// immutable-; // "" (   ESB-),  payload //    //     "" .... }</span></span></code> </pre><br>  Eine Instanz dieser Klasse dient dazu, <abbr title="Nutzlast">Paylod</abbr> durch die Schritte des Prozesses zu "adressieren".  Das <abbr title="Enterprise Service Bus">ESB-</abbr> Konzept wendet mehrere Prinzipien / Muster an.  Zwei davon sind es wert, getrennt betrachtet zu werden: <br><br><ul><li>  √úber den Pfad (Abfolge von Schritten) des Prozesses, zu jedem Zeitpunkt des Prozesses <br>  niemand wei√ü es au√üer dem zu sendenden Umschlag; <br></li><li>  Jeder Umschlag hat drei m√∂gliche Ergebnisrichtungen: <br><ul><li>  der n√§chste Schritt des Prozesses (normale Fortsetzung); </li><li>  Stoppschritt (Stoppziel - wird im n√§chsten Schritt ausgew√§hlt, wenn es keinen Sinn macht, die Prozess- / Stoppsituation fortzusetzen); <br></li><li>  Fehlerschritt (Notfallbeendigungsziel - wird im Falle eines Arbeitsfehlers im n√§chsten Schritt ausgew√§hlt). <br></li></ul><br></li></ul><div class="spoiler">  <b class="spoiler_title">Das in die Warteschlange gestellte Objekt wird in json dargestellt, hier versteckt ...</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// json- esbTask { //    (   esbTask) "_type":"App\\\\rebean\\\\payloads\\\\ESBtaskQueue", //  "task":"task:queue@XXX.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", //    () "replyto":[ "othertask1:nextqueue1@yyy.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "othertask2:nextqueue2", "othertask3:nextqueue3", ], //    () "onerror":[ "error:errorsstep@zzz.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "error:errorsstep1", "error:errorsstep2", "error:errorsstep3" ], //     () "onstop":[ "stop:stopstep@kkk.XXX.XXX.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">XXX:</span></span></span><span class="hljs-comment">11300", "stop:stopstep1", "stop:stopstep2", "stop:stopstep3" ], //   "payload":{ .... }, //   ... () "till":[ .... ], //     ... () //        // -  (LINUX-TimeStamp) "since":[ 1540073089.8833, ], // -     "points":1, //  .     "groupid":"" }</span></span></code> </pre><br></div></div><br>  <b>nextStepWorker</b> <br><br>  Jede Nachricht, die in der Warteschlange angezeigt wird, wird von dem daf√ºr verantwortlichen Mitarbeiter verarbeitet.  Zu diesem Zweck werden die folgenden Funktionen implementiert: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nextStepWorker</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">workerConstructor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       //     esbTask //    () //    MQ- (beanstalkd) //     (Memcached) //     (MySQL) // : -  (  - ); -    stop-; -      (log, event, mq) .... }</span></span></code> </pre><br>  Arbeiter f√ºr jeden der Prozessschritte werden auf der Basis dieser Klasse implementiert.  Die gesamte Routine zum Verarbeiten, Adressieren und Senden des n√§chsten Schritts auf der Route erledigt die Klasse. <br><br>  Die L√∂sung f√ºr jedes der Probleme lautet: <br><br><ol><li>  Holen Sie sich esbTask und f√ºhren Sie den Worker aus. </li><li>  Implementieren Sie die Logik, indem Sie die Ergebnisse in der Nutzlast speichern. </li><li>  Schlie√üen Sie die Hinrichtung des Arbeiters ab (Notfall oder normal - es spielt keine Rolle). </li></ol><br>  Wenn die Schritte abgeschlossen sind, wird das Ergebnis mit dem entsprechenden Namen in die Warteschlange gestellt und der n√§chste Mitarbeiter beginnt mit der Verarbeitung. <br><a name="subj2"></a><br><h2>  Mach es einmal.  Verf√ºgbarkeit pr√ºfen </h2><br>  In der Tat ist die Schaffung eines Arbeitnehmers zur L√∂sung eines der Probleme die Implementierung einer Methode.  Ein Beispiel (vereinfacht) f√ºr die Implementierung eines Arbeiters, der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Problem 2</a> l√∂st, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lautet</a> wie folgt: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/curlChecker.php .... class curlChecker extends nextStepWorker { const PROXY_INFO = 'https://api.ipfy.me?format=json&amp;geo=true'; const PROXY_TIMEOUT = '40'; const COMMAND = "curl -m %s -Lx http://%s:%s '%s'"; public function logic() { //    .  ..   payload extract($this-&gt;context()); //  defaults    payload  $curltimeout = $curltimeout ?? self::PROXY_TIMEOUT; $curlchecker = $curlchecker ?? self::PROXY_INFO; //     $line = sprintf( static::COMMAND, $curltimeout, $host, $port, $curlchecker ); exec($line, $info); //      // ( ,  stop-) $info = arrays::valid_json(implode('', info)); if (empty($info)) throw new \Exception("Bad proxy: $host:$port!", static::STATUS_STOP); //    payload $this-&gt;enrich(['info']) -&gt;sets(compact('info')); } }</span></span></code> </pre><br>  Ein paar Codezeilen und alles ist erledigt und wird zur n√§chsten Stufe ‚Äûabgeordnet‚Äú. <br><a name="subj3"></a><br><h2>  Zeitzone definieren.  TimeZoneDB und wof√ºr es ist ... </h2><br>  Beim eingehenden Testen eingehender Anforderungen wird die Zeit des Browserfensters mit dem Zeitpunkt abgeglichen, zu dem die IP-Adresse der Anforderungsquelle vorhanden ist. <br><br>  Um den Verdacht der Z√§hler zu vermeiden, m√ºssen wir die lokale Proxy-Zeit kennen. <br><br>  Um die Zeit herauszufinden, nehmen wir den Breiten- und L√§ngengrad aus den Ergebnissen des vorherigen Schrittes des Prozesses und erhalten Daten √ºber die Zeitzone, in der unsere zuk√ºnftige Instanz des Browserfensters arbeiten wird.  Diese Daten werden uns von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="timezonedb.com">Fachleuten auf dem Gebiet der Zeit zur Verf√ºgung gestellt</a> . <br><br>  Ein vereinfachter Mitarbeiter zur L√∂sung dieses Problems ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabe 3</a> ) ist dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen</a> v√∂llig √§hnlich.  Der einzige Unterschied ist die Anforderungs-URL.  Die Vollversion finden Sie in der Datei: <br><blockquote>  // app / src / Process / worker / timeZone.php </blockquote><br><h2>  Ein bisschen √ºber Infrastruktur </h2><br>  Zus√§tzlich zu der beschriebenen <strong>Bohnenstange ben√∂tigt</strong> unser Tool: <br><br><ul><li>  <strong>Memcached</strong> - zum Zwischenspeichern von Aufgaben; </li><li>  <strong>Selenium Server</strong> - Es ist praktisch, den <strong>Selenium Web Driver</strong> in einem separaten Container auszuf√ºhren, und Sie k√∂nnen den Prozess √ºber <strong>VNC</strong> √ºberwachen. </li><li>  Dashboards zur √úberwachung von <strong>Beanstald</strong> , <strong>Memcached</strong> und <strong>VNC</strong> . </li></ul><br>  F√ºr eine schnelle Bereitstellung all dessen ist Docker ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Docker White Papers">Installation unter Ubuntu</a> ) sehr praktisch. <br><br><div class="spoiler">  <b class="spoiler_title">Und der "Orchestrator" f√ºr ihn ist Docker-Compose (Befehle zur Installation) ...</b> <div class="spoiler_text"><pre> <code class="bash hljs">sudo apt-get -y update sudo apt-get -y install docker-compose</code> </pre><br></div></div><br>  Mit diesen Tools k√∂nnen Sie bereits konfigurierte und konfigurierte (von einer fr√ºheren Person) Server / Prozesse in separaten ‚ÄûContainern‚Äú des √ºbergeordneten Betriebssystems ausf√ºhren.  F√ºr Details empfehle ich, auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Guter Docker Artikel">diesen</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Ein weiterer guter Docker-Artikel">diesen</a> Artikel zu verweisen. <br><br>  Also ... <br><br>  Zum Starten der Infrastruktur ben√∂tigen Sie mehrere Befehle in der Konsole: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    docker- #     (   ) #    sudo -s git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git \ panels cd panels docker-compose up --build -d #   .</span></span></code> </pre><br>  Als Ergebnis der erfolgreichen Ausf√ºhrung des Befehls auf dem Computer mit der Adresse XXX.XXX.XXX.XXX, <br>  Sie erhalten die folgenden Dienstleistungen: <br><blockquote>  - XXX.XXX.XXX.XXX:11300 - Beanstalkd <br>  - XXX.XXX.XXX.XXX:11211 - <strong>Memcached</strong> <br>  - XXX.XXX.XXX.XXX-00-00444 - <strong>Selenium Server</strong> <br>  - XXX.XXX.XXX.XXX:5930 - <b>VNC-</b> Server zur Steuerung der Vorg√§nge in <b>Chrome</b> <br>  - XXX.XXX.XXX.XXX:8081 - Webpanel f√ºr die Kommunikation mit <strong>Memcached</strong> (admin: pass) <br>  - XXX.XXX.XXX.XXX:8082 - Webpanel f√ºr die Kommunikation mit <strong>Beanstalkd</strong> <br>  - XXX.XXX.XXX.XXX:8083 - Webpanel f√ºr die Kommunikation mit <strong>VNC</strong> (Passwort: geheim) <br>  - XXX.XXX.XXX.XXX:8080 - Allgemeines Webpanel <br></blockquote><br><div class="spoiler">  <b class="spoiler_title">"Sehen Sie, ob alles vorhanden ist", "In die Konsole zum Container gelangen", "Infrastruktur stoppen" k√∂nnen Befehle im Spoiler sein.</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,    docker-, #    ..../panels/ #    docker-compose ps # Name Command State Ports # ------------------------------------------------------------------------------------------------------------------------ # beanstalkd /usr/bin/beanstalkd Up 0.0.0.0:11300-&gt;11300/tcp # chrome start-cron Up 0.0.0.0:4444-&gt;4444/tcp, 0.0.0.0:5930-&gt;5900/tcp # memcached docker-entrypoint.sh memcached Up 0.0.0.0:11211-&gt;11211/tcp # nginx docker-php-entrypoint /sta ... Up 0.0.0.0:8443-&gt;443/tcp, 0.0.0.0:8080-&gt;80/tcp, # 0.0.0.0:8082-&gt;8082/tcp, 0.0.0.0:8083-&gt;8083/tcp, 9000/tcp # vnc /usr/bin/supervisord -c /e ... Up 0.0.0.0:8081-&gt;8081/tcp #       chrome docker exec -ti chrome /bin/bash #       docker-compose stop &amp;&amp; docker rm $(docker ps -a -q)</span></span></code> </pre></div></div><a name="subjs"></a><br><h2>  Aufgaben 4,5,6 - zu einem Dienstprogramm zusammenfassen </h2><br>  Nachdem Sie sich eingehend mit Aufgaben befasst haben ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abbildung oben</a> ), k√∂nnen Sie leicht sicherstellen, dass nur eine der verbleibenden Aufgaben ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgabe 6</a> ) von einer externen Ressource abh√§ngt.  Wenn wir Aufgaben mit "bedingt garantierten" Laufzeiten ausf√ºhren (unabh√§ngig von unkontrollierten Faktoren), erhalten wir keine zus√§tzlichen Vorteile f√ºr die Geschwindigkeit des gesamten Prozesses.  In dieser Hinsicht wurden diese Aufgaben ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">4,5,6</a> ) zu einem Arbeiter zusammengefasst.  Die Worker-Datei hei√üt: <br><blockquote>  // app / src / Process / worker / whoerChecker.php </blockquote><br><h3>  Nehmen Sie Einstellungen f√ºr Chrome vor.  Plugins </h3><br>  <strong>Chrome ist</strong> flexibel mit Plugins konfiguriert. <br><br>  Ein Plugin f√ºr <strong>Chrome</strong> ist ein Archiv, das eine Datei <i>manifest.json</i> enth√§lt.  Er beschreibt das Plugin.  Das Archiv enth√§lt auch eine Reihe von <b>JavaScript-, HTML-, CSS- und anderen</b> Dateien, die vom Plugin ben√∂tigt werden ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Offizielle Chrome-Dokumente">Details</a> ). <br><br>  In unserem Fall wird eine der <b>JavaScript-</b> Dateien im Kontext des <strong>Chrome-</strong> Arbeitsfensters ausgef√ºhrt und alle erforderlichen Einstellungen werden wirksam. <br><br>  Wir m√ºssen nur die Plugin-Vorlage nehmen und die erforderlichen Daten (Interaktionsprotokoll, Adresse und Port oder Zeitzone) f√ºr den zu testenden Proxyserver an den richtigen Stellen ersetzen. <br><br>  Ein Codeausschnitt, der das Archiv erstellt: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/proxyHelper.php .... class proxyHelper extends sshDocker{ .... // $name -  - // $files - [ ... '   -' =&gt; '', ...] protected function buildPlugin(string $name, array $files) { $this-&gt;last = "$this-&gt;cache/$name"; if (!file_exists("$this-&gt;last")) { $zip = new \ZipArchive(); $zip-&gt;open("$this-&gt;last", \ZipArchive::CREATE | \ZipArchive::OVERWRITE); foreach ($files as $n =&gt; $data) { $zip-&gt;addFromString(basename($n), $data); } $zip-&gt;close(); } $this-&gt;all[] = $this-&gt;last; $this-&gt;all = array_unique($this-&gt;all); return $this; } .... }</span></span></code> </pre><br>  Die Vorlage f√ºr das Proxy-Tuning-Plugin wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Repository des Plugins zur Installation von Proxy in Chrome">im Sparschwein der Arbeitsergebnisse von Menschen gefunden, die ihren Beruf lieben</a> , im Protokollteil ge√§ndert und dem Repository hinzugef√ºgt. <br><br><h3>  Fensterzeit√§nderung </h3><br>  Um die globale Zeit einer laufenden Chrome-Instanz zu √§ndern, m√ºssen wir <i>window.Date</i> durch eine Klasse mit √§hnlicher Funktionalit√§t ersetzen, die jedoch in der richtigen Zeitzone g√ºltig ist. <br><br>  Ich sch√§tze <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Repository des Plugins zum √Ñndern der Fensterzeit in Chrome">die Arbeit von Sampo Juustila sehr</a> .  Das Skript wurde zum automatisierten Testen der <abbr title="Benutzeroberfl√§che">Benutzeroberfl√§che erstellt</abbr> , aber nach einer kleinen Verfeinerung wurde es angewendet. <br><br>  Hier gibt es eine Nuance, auf die ich Ihre Aufmerksamkeit lenken m√∂chte.  Es ist mit dem Kontext der in <i>manifest.json</i> beschriebenen Skripte verkn√ºpft. <br><br>  Das ganze Geheimnis ist, dass der globale Kontext (derjenige, in dem das Hauptskript des Plug-Ins gestartet und die Einstellungen festgelegt werden, z. B. mit dem Netzwerk verbunden) vom Kontext der Registerkarte isoliert ist, in die die Seite geladen wird. <br><br>  Empirisch wurde festgestellt, dass die Auswirkungen auf den Prototyp der Klasse im globalen Kontext nicht zu einer √Ñnderung der Registerkarte f√ºhrten.  Nachdem das Skript auf der bereits geladenen Seite registriert und vor den anderen ausgef√ºhrt wurde, wurde das Problem behoben. <br><br>  Die L√∂sung wird durch das folgende Codefragment dargestellt: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/chromePlugins/timeShift/content.js //     var s = document.createElement('script'); //        s.src = chrome.extension.getURL('timeshift.js'); //      (document.head || document.documentElement).appendChild(s);</span></span></code> </pre><br><h3>  Proxy-Einstellungen </h3><br><div class="spoiler">  <b class="spoiler_title">Das Einrichten eines Proxys in Chrome ist so einfach, dass ich den js-Code in einem Spoiler verstecke</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/chromePlugins/proxy/background.js var config = { mode: "fixed_servers", rules: { singleProxy: { scheme: "%scheme", host: "%proxy_host", port: parseInt(%proxy_port) }, bypassList: ["foobar.com"] } }; chrome.proxy.settings.set({value: config, scope: "regular"}, function () { }); function callbackFn(details) { return { authCredentials: { username: "%username", password: "%password" } }; } chrome.webRequest.onAuthRequired.addListener( callbackFn, {urls: ["&amp;gtall_urls&amp;lt"]}, ['blocking'] );</span></span></code> </pre><br></div></div><br><h3>  Pfad der Chrome-Plugins </h3><br><div class="spoiler">  <b class="spoiler_title">Alle Plugins werden gem√§√ü dem Schema benannt und dem tempor√§ren Ordner des Computers hinzugef√ºgt, der den Prozess steuert.</b> <div class="spoiler_text"><blockquote>  // Namensschema f√ºr Proxy-Plugin: <br>  Proxy- [Adresse] - [Port] - [Protokoll]&gt;. zip <br>  Zeitverschiebung - ["-" | ""] - [shift_in_minutes_from_GMT] .zip </blockquote></div></div><br>  Als N√§chstes m√ºssen wir diese Plugins in einem Docker-Container installieren, der auf dem f√ºr die Infrastruktur verantwortlichen Computer ausgef√ºhrt wird. <br><br>  Wir werden dies mit ssh tun.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dazu habe ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Phpseclib-Paket bei packagist.org"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpseclib getroffen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (noch sp√§ter bereut). </font><font style="vertical-align: inherit;">Fasziniert von dem ungew√∂hnlichen Verhalten der Bibliothek verbrachte ich einen Tag damit, sie zu studieren. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der SSH-Konsolen-Client funktioniert hier besser und schneller, aber die Aufgabe wurde bereits erledigt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die niedrige Ebene (Arbeit mit SFTP und SSH) ist die Basisklasse verantwortlich (siehe unten). </font><font style="vertical-align: inherit;">Durch Ersetzen dieser Klasse wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Phpseclib-Repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpseclib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durch den Konsolenclient ersetzt.</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/sshDocker.php //    (DOCKER_HOST, DOCKER_USER, DOCKER_PASS) //   : app/settings.php //      .... class sshDocker { .... //  .     docker //    .         // : app/techs.php const EXEC_DOCKER = DOCKER_BIN_PATH . "/docker exec -i %s %s"; .... //     sudo    (  ),  DOCKER_USER -  protected function sudo(string $command, string $expect = '.*'){...} //     Docker-,      //       -    self::EXEC_DOCKER protected function execDocker(string $command, string $expect){...} .... }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abgeleitet vom Basis-sshDocker und der bereits bekannten proxyHelper-Klasse werden Plugins nicht nur erstellt, sondern auch in einem tempor√§ren Ordner des Infrastrukturcontainers abgelegt. </font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Chrome/proxyHelper.php .... class proxyHelper extends sshDocker { .... public static function new(string $docker, $plugins) { return (new self($docker, $plugins)) -&gt;setupPlugins(); } .... }</span></span></code> </pre><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Starten Sie Chome mit Einstellungen </font></font></h3><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">Selenium Server</font></b><font style="vertical-align: inherit;"> hilft uns beim </font><font style="vertical-align: inherit;">Start von angepasstem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Selenium Server ist ein Framework, das vom </font><strong><font style="vertical-align: inherit;">FaceBook-</font></strong><font style="vertical-align: inherit;"> Team </font><font style="vertical-align: inherit;">speziell zum Testen von WEB-Schnittstellen erstellt wurde. </font><font style="vertical-align: inherit;">Die Rahmenarbeit erm√∂glicht es dem Entwickler, jede Benutzeraktion in einem Browserfenster (mit </font><b><font style="vertical-align: inherit;">Chrome</font></b><font style="vertical-align: inherit;"> oder </font><b><font style="vertical-align: inherit;">Firefox</font></b><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">programmgesteuert zu emulieren </font><font style="vertical-align: inherit;">. </font><b><font style="vertical-align: inherit;">Selenium Server ist</font></b><font style="vertical-align: inherit;"> f√ºr die Verwendung in vielen Sprachen angepasst und de facto ein Standardwerkzeug zum Schreiben von Testskripten. </font><font style="vertical-align: inherit;">Der beste Weg, um eine neue Version f√ºr ein Projekt zu erhalten:</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><pre> <code class="bash hljs">composer require facebook/webdriver</code> </pre><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die traditionelle Konfiguration der Hauptinstanz des Selenium Server-Objekts (RemoteWebDriver) erschien mir ausf√ºhrlich.</font></font></b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// URL- $url = "https://example.com/books/196/empire-v-povest-o-nastoyashem-sverhcheloveke"; // URL,     (Selenium Server) $server = 'http://' . DOCKER_HOST . '/wd/hub'; //   ,      $options = new ChromeOptions(); $options-&gt;addArguments(array( '--disable-notifications' )); //    - $capabilities = DesiredCapabilities::chrome(); $capabilities-&gt;setCapability(ChromeOptions::CAPABILITY, $options); //        5000     URL $driver = RemoteWebDriver::create($server, $capabilities, 5000); $page = $driver-&gt;get($url);</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Deshalb habe ich das alles leicht reduziert und die Konfiguration f√ºr meine Bed√ºrfnisse optimiert: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/whoerChecker.php .... class whoerChecker extends nextStepWorker { //    : app/settings.php // URL Selenium Server const SELENIUM_SERVER = CHVM; //  - const DOCKER_NAME = DOCKER_NAME; .... public function config() .... //        : // $driver = RemoteWebDriver::create($server, $capabilities, 5000); $chrome = Chrome::driver( static::SELENIUM_SERVER, Chrome::capabilities(static::DOCKER_NAME, $plugins), 5000 ); .... } ....</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Auge klammert sich sofort an $ Plugins. </font><font style="vertical-align: inherit;">$ plugins ist eine Datenstruktur, die f√ºr die Konfiguration von Plugins verantwortlich ist. </font><font style="vertical-align: inherit;">F√ºr jedes Verzeichnis und zum Ersetzen von Platzhaltern in </font><font style="vertical-align: inherit;">den Plugin- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dateien.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Struktur wird in der Datei app / plugs.php beschrieben und ist Teil der globalen Optionen app / settings.php.</font></font></b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/plugs.php const PLUGS = [ 'timeshift' =&gt; [ 'path' =&gt; PROJECTPATH . '/app/chromePlugins/timeShift', 'files' =&gt; ['manifest.json', 'timeshift.js', 'content.js'], 'fields' =&gt; ['%addsminutes' =&gt; 'timeshift'] ], 'proxy' =&gt; [ 'path' =&gt; PROJECTPATH . '/app/chromePlugins/proxy', 'files' =&gt; ['manifest.json', 'background.js'], 'fields' =&gt; [ '%proxy_host' =&gt; 'host', '%proxy_port' =&gt; 'port', '%scheme' =&gt; 'scheme', '%username' =&gt; 'user', '%password' =&gt; 'pass' ] ] ];</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Parsen einer Seite mit </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium WebDriver</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist sehr einfach.</font></font><br><br><pre> <code class="php hljs">.... $url = <span class="hljs-string"><span class="hljs-string">'https://__/_-_'</span></span>; $page = $chrome-&gt;get($url); .... <span class="hljs-comment"><span class="hljs-comment">//   xPath-   $xpath = '/html[1]/body[1]/div[1]/div[1]/div[1]/div[2]/div[1]/div[1]/div[1]/div[1]/strong[1]'; $element = page-&gt;findElement(WebDriverBy::xpath($xpath)); .... //   $text = $element-&gt;getText(); // HTML- $html = $element-&gt;&gt;getAttribute('innerHTML'); ....</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie ich bereits geschrieben habe, werden alle diese Aktionen durch den Nutzen des dritten Schritts ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgabe 4,5,6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">implementiert </font><font style="vertical-align: inherit;">:</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> // app / src / Process / worker / whoerChecker.php </font></font><br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abschlie√üen der Beschreibung der Arbeit mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m√∂chte ich Ihre Aufmerksamkeit auf die Tatsache lenken , </font><font style="vertical-align: inherit;">dass , </font><font style="vertical-align: inherit;">wenn Sie diese Technologie in industriellem Ma√üstab nutzen (1000 - 3000 √ñffnungen Seiten), ungew√∂hnlich , dass </font><font style="vertical-align: inherit;">die Sitzung mit dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> korrekt abgeschlossen ist. Das Fenster ist besitzerlos. Und solche Fenster k√∂nnen sich sehr ansammeln. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wurden verschiedene M√∂glichkeiten zur Bek√§mpfung der "Broschen" in Betracht gezogen. Arbeit "a√ü" 2 Tage. Am effektivsten war </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cron</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die korrekte Installation und Konfiguration im Docker-Container wurde zu einer separaten Aufgabe, die von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renskiy </font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Ein Artikel √ºber die Verwendung von Cron in einem Docker-Container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einem Artikel, der NUR DIESEM </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;">THEMA gewidmet</font></a><font style="vertical-align: inherit;"> war </font><font style="vertical-align: inherit;">, sorgf√§ltig und sehr gr√ºndlich beschrieben wurde </font><font style="vertical-align: inherit;">(was mich √ºberraschte).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die automatische Neuerstellung des urspr√ºnglichen Docker-Images und die Installation mehrerer Skripte zum Schlie√üen von Broschen und zum Bereinigen nicht verwendeter Plugins wird in docker-compose.yml, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Detaillierte Beschreibung der Installation der Clicker- und Docker-Infrastruktur aus dem Repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem Infrastruktur-Repository, beschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Reinigungsh√§ufigkeit wird in der Killcron-Datei desselben Repositorys festgelegt.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WebRTC </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trotz der Tatsache, dass wir bereits die richtige Zeit eingestellt haben und der Datenverkehr unseres Browsers √ºber einen Proxy erfolgt, k√∂nnen wir dennoch erkannt werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neben dem Zeitunterschied (Browser und IP-Adresse) gibt es zwei weitere Quellen f√ºr die Dekanonymisierung von ‚Äûhinter einem Proxy sitzen‚Äú. </font><font style="vertical-align: inherit;">Hierbei handelt es sich um </font><font style="vertical-align: inherit;">im Browser eingebettete </font><font style="vertical-align: inherit;">Flash- und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTC-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Technologien. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in unserem Browser </font><font style="vertical-align: inherit;">deaktiviert, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Grund f√ºr beide Fehlerm√∂glichkeiten ist der gleiche - die allgegenw√§rtigen und flinken </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UDP-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pakete. </font><font style="vertical-align: inherit;">F√ºr </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTC sind</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dies zwei Ports: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3478</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19302</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Exodus von Scouts aus dem Chrome-Container zu stoppen, wird die iptables-Regel auf den Host-Computer mit den Infrastruktur-Containern angewendet:</font></font><br><br><pre> <code class="bash hljs">iptables -t raw -I PREROUTING -p udp -m multiport --dports 3478,19302 -j DROP</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der gleiche ProxyHelper implementiert diese Aufgabe. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Rest der Arbeiter </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die erfolgreiche Erreichung des Ziels - die Implementierung eines ‚ÄûKlicks‚Äú auf die Zielwebsite √ºber einen anonymen Proxy - ben√∂tigen wir einen weiteren Mitarbeiter. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird eine abgeschnittene Version von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoerChecker sein</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ich denke, es alleine zu machen und alles zu verwenden, was geschrieben steht, wird nicht schwierig sein. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ergebnis des gesamten Prozesses eine Warteschlange zur Eingabe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">befindet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , enth√§lt Daten √ºber den ‚ÄûGrad‚Äú jeder Anonymit√§t Proxyserveradresse authentifiziert. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie gegen die Spielmarken ‚Äûspielen‚Äú, sollten Sie sich vor allem an die Anonymit√§t erinnern und sich nicht von Roboterbesuchen mitrei√üen lassen. </font><font style="vertical-align: inherit;">Die Einhaltung des Grundsatzes " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie sich nicht von Klicks </font><i><font style="vertical-align: inherit;">mitrei√üen</font></i><font style="vertical-align: inherit;"> " wird durch die M√∂glichkeit sichergestellt, Aktionen nach einem Zeitplan zu organisieren, der in </font><i><font style="vertical-align: inherit;">esbTask</font></i><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seit dem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Feld </font><font style="vertical-align: inherit;">unseres </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESB-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Umschlags) </font><font style="vertical-align: inherit;">eingebettet ist </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie versuchen, alles sorgf√§ltig zu machen, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√§hnelt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die </font><b><font style="vertical-align: inherit;">Yandex-Metrik</font></b><font style="vertical-align: inherit;"> der </font><b><font style="vertical-align: inherit;">Zielwebsite</font></b><font style="vertical-align: inherit;"> der folgenden Abbildung.</font></font><br><br><img src="https://habrastorage.org/webt/es/wn/kk/eswnkk5esmtcunc6xvpn90ndefw.png"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie man alles zusammensetzt </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Also gegeben: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienstprogramme, die "als Eingabe" (als Befehlszeilenargument) </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esbTask in</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> json-string-Form </font><font style="vertical-align: inherit;">akzeptieren </font><font style="vertical-align: inherit;">und eine Logik ausf√ºhren und die Ergebnisse an </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beanstalkd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> senden k√∂nnen </font><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Message </font><b><font style="vertical-align: inherit;">Queuing</font></b><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), basierend auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beanstalkd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linux-Maschine (Prozessmaschine); </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit diesem "Given" verwende ich normalerweise </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libevent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">All dies, erg√§nzt durch mehrere Tools, erm√∂glicht es Ihnen, die Anzahl (innerhalb bestimmter Grenzen) von Handlerinstanzen f√ºr jede Phase des Prozesses automatisch zu steuern. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angesichts der Gr√∂√üe des Artikels und der Besonderheiten des Themas werde ich dies jedoch gerne in einem separaten Artikel beschreiben. </font><font style="vertical-align: inherit;">Dieser Artikel ist </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Noserver-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Technologie </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Zuk√ºnftiges Zeug ist " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font><blockquote><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Datum der Ver√∂ffentlichung h√§ngt mit Ihrem Interesse zusammen, lieber Leser.</font></font></b> <div class="spoiler_text"><blockquote>      .      , ,‚Ä¶ . ,  ,    ,   ,     ,         . <br><br>   <b>habr</b>   ,     . , ,          . <br><br>        .     ,        " <b>server</b> ",       <b>README.md</b>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="   clicker  docker-  "> </a> . </blockquote></div></div></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noserver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " verarbeitet eine Instanz eine Warteschlange (einen Prozessschritt). </font><font style="vertical-align: inherit;">Dieser Ansatz </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann nur die Geister ver√§rgern, die</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich beim Debuggen von Arbeitern verwende. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abh√§ngig von der Verarbeitungsgeschwindigkeit, die Sie ben√∂tigen, k√∂nnen Sie beliebig viele Kopien ‚Äûmanuell‚Äú starten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kann so aussehen:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/noserver/singleProcess.php //   ,    //   include __DIR__ . '/../../../settings.php'; use App\ESB\pipeNcacheService; use App\arrayNstring\queueDSN; use App\arrayNstring\timeSpent; use App\arrayNstring\progressString; //    $path = __DIR__ . '/../worker'; //   $queues = array_keys(WORKERS); $queue = $argv[1] ?? end($queues); $queue = strtolower($queue); if (!in_array($queue, $queues)) die("php $argv[0] &lt;queue_name&gt;" . PHP_EOL); //  - $progress = new progressString("Listenning... Idle: ", 40, 20); // ,      $stopwatch = timeSpent::start(); //    beanstalkd- list($worker, $task) = WORKERS[$queue]; $procid = ['procid' =&gt; posix_getpid()]; //   beanstalkd  Memcached, //     ( ) $dsn = new queueDSN($task, $queue, ...QUEUE_SERVER); //     ESB- $pnc = new pipeNcacheService($dsn); $pipe = $pnc-&gt;getPipe(); echo "Start listener for queue: $queue." . PHP_EOL; echo "Press Ctrl-C to stop listener." . PHP_EOL; //      //       while (true) { try { $job = $pipe-&gt;watch($queue) -&gt;reserve(1); $now = new DateTime(); $opts = json_encode($pipe-&gt;getPayload($job) + $procid); $pipe-&gt;delete($job); echo PHP_EOL . "Task recived at: " . $now-&gt;format('H:i:s') . " Starting worker: $worker. "; $stopwatch = timeSpent::start(); exec("php $path/$worker $opts", $out); echo "Finished. Time spent: $stopwatch" . PHP_EOL; $stopwatch = timeSpent::start(); } catch (Throwable $exception) { echo $progress($stopwatch('%I:%S', null, $now)); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der seltsame Start des Arbeiters ist auff√§llig ... Trotz der Tatsache, dass jeder der Arbeiter ein PHP-Objekt ist, habe ich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exec (...) verwendet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies wurde durchgef√ºhrt, um Zeit zu sparen, um keine separaten Worker f√ºr " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noserver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">zu erstellen </font><font style="vertical-align: inherit;">oder um den Worker nicht zu √§ndern, um im " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">-Modus zu starten </font><font style="vertical-align: inherit;">.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein paar Worte zur Konfiguration und Bereitstellung </font></font></h2><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurationskonstanten </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Konfigurationsdatei f√ºr Ihre Instanz lautet </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / settings.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es sollte von Ihnen sofort nach dem Klonen des Repositorys erstellt werden. </font><font style="vertical-align: inherit;">Benennen Sie dazu die Datei </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / settings.php.dist um</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Alle Konstanten werden intern beschrieben. </font></font><br><br> <b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / settings.php enth√§lt</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unter anderem Dateien mit anderen Konstanten.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / queues.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enth√§lt die Namen von Warteschlangen und Jobs </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / plugs.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enth√§lt eine Beschreibung der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plugins </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / techs.php</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enth√§lt berechnete Konstanten</font></font><br></blockquote><br><h3>  Dienstprogramme </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Ergebnisse des Prozesses zu verarbeiten und Aufgaben zu platzieren, gibt es mehrere Dienstprogramme. </font><font style="vertical-align: inherit;">Dienstprogramme werden √ºber die Befehlszeile gestartet. </font><font style="vertical-align: inherit;">Mit Argumentbeschreibungen versehen. </font><font style="vertical-align: inherit;">Gefunden: </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / src / Utils</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> backup.php - speichert Warteschlangen in einer Datei</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    clear.php - bereinigt Warteschlangen</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    exporter.php - Exportiert aus einer Datei mit einer gespeicherten Warteschlange </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     Paaradresse: Port</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    givethejob.php - stellt Aufgaben in den Prozess </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     (Quelladresse: Port-Kombinationsfeld).</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     kann einige Adressen von der Liste ausschlie√üen</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    restore.php - Stellt eine gespeicherte Warteschlange wieder her </font></font></pre></blockquote><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Feinabstimmung der Arbeiter </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bei Verwendung schriftlicher Mitarbeiter kann es zweckm√§√üig sein, die folgenden Konfigurationsoptionen zu verwenden: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// app/src/Process/worker/curlChecker.php .... $worker = new curlChecker( [ //    curlChecker::WORKER =&gt; 'curlchecker', //  beanstalkd curlChecker::PIPE_HOSTPORT =&gt; implode(':', QUEUE_SERVER), //  Memcached curlChecker::CACHE_HOSTPORT =&gt; implode(':', MEMCACHED), // ,    . //    -   curlChecker::DB_SCRIPT =&gt; __DIR__ . '/../../../confdb.php', // ,       // (        -) curlChecker::INFO_START =&gt; CURL_START, // ,        // (        -) curlChecker::INFO_END =&gt; CURL_END, //  ,     //    //        curlChecker::INFO_ADDS_END =&gt; ['host', 'port'] ], ['setupworker', 'config', 'logic'] ); ....</span></span></code> </pre><br><a name="deploy"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bereitstellung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Handbuch wird davon ausgegangen, dass Ihnen 2 Computer mit installiertem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu 18.04 zur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verf√ºgung stehen </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine f√ºr die Infrastruktur ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), die andere f√ºr die Prozesssteuerung ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prozess</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    root-. # ,     TCP-: # 11300, 11211, 4444, 5930, 8080, 8081, 8082, 8083 #   . sudo -s apt -y update apt -y install git snap snap install docker apt -y install docker-compose # C       # " root-"    cd ~ git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/esb-infrastructure.git cd esb-infrastructure docker-compose up --build -d #      3     #   . #       web-.</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prozess</font></font></b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      . #   . sudo apt -y update sudo apt -y install git php-common php-cli php-curl php-zip php-memcached composer # C     process-   , #     -  php- cd /var/www git clone \ https://oauth2:YRGzV8Ktx2ztoZg_oZZL@git.ituse.ru/deploy/clicker-noserver.git cd clicker-noserver composer update #  .       "XXXXXXXX" mv app/settings.php.dist app/settings.php #   . gnome-terminal \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php curl"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php timezone"' \ --tab -e 'bash -c "php app/src/Process/noserver/singleProcess.php whoer"' #  . ,     , #  : - log/list.proxy php app/src/Utils/givethejob.php ./log/list.proxy</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warten Sie und beobachten Sie, was √ºber das Web-Panel passiert (http: // IP-Adresse-Docker-Maschinen: 8080). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ergebnis wird zur </font><font style="vertical-align: inherit;">Verf√ºgung stehen in der Warteschlange </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">befindet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Und zum Schluss </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberraschenderweise dauerte das Schreiben und Bearbeiten dieses Artikels l√§nger als das Schreiben des Codes selbst. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meiner Meinung nach k√∂nnte alles umgekehrt sein (und der Zeitunterschied k√∂nnte um ein Vielfaches gr√∂√üer sein), wenn nicht zwei Ideologien: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Message Queue</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enterprise Service Bus</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich w√ºrde mich sehr freuen, wenn Sie den vorgestellten Ansatz zum Schreiben von Anwendungen n√ºtzlich finden, dessen Belastung f√ºr verschiedene Teile in der Entwurfsphase nicht klar ist.</font></font><br><br>  Vielen Dank. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432038/">https://habr.com/ru/post/de432038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432024/index.html">Gradle 5.0 - was ist neu</a></li>
<li><a href="../de432030/index.html">Der Weg zu einem kontaktlosen L√ºgendetektor oder Wie man einen Hackathon mit maximaler Geschwindigkeit organisiert</a></li>
<li><a href="../de432032/index.html">Wir beenden das genagelte Google-Suchfeld</a></li>
<li><a href="../de432034/index.html">Das Buch ‚ÄûElektrizit√§t Schritt f√ºr Schritt‚Äú von Rudolf Svoren</a></li>
<li><a href="../de432036/index.html">Live: Front-End-Infrastruktur</a></li>
<li><a href="../de432040/index.html">Validatoren + Aspekte: Passen Sie die Validierung an</a></li>
<li><a href="../de432042/index.html">Yandex √∂ffnet die Cloud. Architektur der neuen Plattform</a></li>
<li><a href="../de432046/index.html">Grail Telecom Data Cup Wettbewerb. Das hei√üeste zu kommen</a></li>
<li><a href="../de432048/index.html">Warum sollte sich jemand die M√ºhe machen, gefragte Sprachen zu lernen? Eine Fallstudie der F # Community</a></li>
<li><a href="../de432050/index.html">Willkommen beim Waves Blockchain Hackathon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>