<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüè≠ üòª üö© Proof-of-Stake: Einblick ‚ôçÔ∏è üë©üèø‚Äçüíº üé≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt viele philisterhafte Artikel und Diskussionen im Internet, aber nicht gen√ºgend Informationen √ºber die Verdienste. Irgendwann stellte der Autor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Proof-of-Stake: Einblick</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442862/"><p><img src="https://habrastorage.org/webt/yj/8k/rq/yj8krqpp54tlsgp9p1vupdz-ofi.jpeg"></p><br><blockquote>  Es gibt viele philisterhafte Artikel und Diskussionen im Internet, aber nicht gen√ºgend Informationen √ºber die Verdienste.  Irgendwann stellte der Autor fest, dass die Mechanik und viele damit verbundene Sicherheitsnuancen selbst von vielen Kryptow√§hrungsentwicklern nicht vollst√§ndig verstanden werden.  Dies zeigte sich in einem realen Fall der Portierung der PoS-Implementierung f√ºr eine der Kryptow√§hrungen und in der weiteren Ver√∂ffentlichung von Informationen zu den von Experten von Drittanbietern festgestellten Sicherheitsl√ºcken. </blockquote><p>  Dieser Artikel ist n√ºtzlich f√ºr alle Entwickler, die bereits auf PoS-Schwachstellen gesto√üen sind oder noch kommen werden. </p><br><p>  Entsetzt unter dem Schnitt. </p><a name="habracut"></a><br><h2 id="krupica-istorii">  Ein K√∂rnchen Geschichte </h2><br><p> Im Internet wird die Entstehung von Proof-of-Stake (PoS) in Peercoin nach einer Diskussion in einem der Foren im Jahr 2011, seiner sp√§teren Verwendung in Novaoin und seiner weiteren Verbreitung in PIVX und anderen Bitcoin-Gabeln verfolgt.  Eine ziemlich primitive PoS-Logik wurde in das <code>kernel.cpp</code> <code>kernel.h</code> / <code>kernel.cpp</code> , das in Form verschiedener Frankenstein-Module durch die <code>kernel.cpp</code> wandert. </p><br><p>  Der PoS-Algorithmus hat mehrere Entwicklungsstufen durchlaufen, jemand gibt ihnen Versionen.  Jetzt sind PoS-Optionen aus nat√ºrlichen Gr√ºnden geteilt, DPoS ist erschienen.  Eine der fortschrittlichsten L√∂sungen ist das Casper-Protokoll in Ethereum. </p><br><p>  Jede Blockchain erfordert die Generierung von Bl√∂cken und jemand sollte das Recht haben, einen neuen Block zu erstellen.  Wenn der Autor dies in einer Blockchain wie dem Git-Versionskontrollsystem ohne gro√üe Konkurrenz tut, gibt es in Kryptow√§hrungen einen heftigen Kampf um die Belohnung des Blocks im Rahmen von Proof-of-Work (PoW) - das Finden einer solchen Kombination variabler Eingabeparameter durch Auswahl eines entsprechenden Ergebnisses bestimmt durch ein bestimmtes Ziel (Bergbau, Bergbau). </p><br><p>  PoS ersetzt Proof-of-Work (PoW), um Ressourcenverschwendung beim Mining zu vermeiden.  Stattdessen werden alle Eingabeparameter streng mit einem konstanten Merkmal definiert, das auf den vorhandenen Einsparungen der M√ºnzhalter basiert.  Daher ist PoW als Ausgangspunkt f√ºr PoS erforderlich, wenn Sie nicht auf verschiedene Optionen f√ºr die anf√§ngliche hypothekarische Bereicherung der Sch√∂pfer der M√ºnze zur√ºckgreifen. </p><br><h2 id="zachem">  Warum? </h2><br><p>  Das Einsparen von Energie ist f√ºr Entwickler und M√ºnzhalter ungef√§hr so ‚Äã‚Äãwichtig wie die Begrenzung der Treibhausgasemissionen f√ºr Produzenten und Verbraucher.  Die grausame Wahrheit ist anders: </p><br><ol><li>  PoW-basierte Projekte unterliegen sogenannten  ‚Äû51-Prozent-Angriffe‚Äú: Angreifer k√∂nnen gro√üe Kr√§fte einsetzen, eine parallele Kette bilden und diese dann pl√∂tzlich mit einer anderen M√ºnzbewegung ver√∂ffentlichen (dh doppelte Verschwendung). </li><li>  PoW-Bergleute m√ºssen ihre Kosten decken und in den Kapazit√§tsaufbau investieren - dies ist ein direkter Kapitalabfluss aus Projekten. </li><li>  Sparbesitzer m√∂chten ihre Kaufkraft durch Eigenkapitalbeschaffung erhalten, anstatt die nat√ºrliche Inflation zu betrachten. </li></ol><br><p>  <em>An einem lebenden Beispiel: Von November bis Dezember 2018 gab es Angriffsversuche;</em>  <em>dann gab es von Dezember bis Februar Aufsehen als die rentabelste M√ºnze f√ºr den Bergbau auf Grafikkarten;</em>  <em>der Kurs fiel von 2+ auf 0,5 USD;</em>  <em>Nach der Umstellung auf PoS stieg der Zinssatz innerhalb einer Woche auf 1 USD und der Zufluss von Investitionen nahm zu.</em> </p><br><hr><br><h2 id="tehnicheskie-momenty">  Technische Punkte </h2><br><p>  <strong>Achtung: In diesem Abschnitt sprechen wir √ºber den "traditionellen" PoS in der Form wie in Peercoin, PIVX und ihren Gabeln.</strong> </p><br><p>  Sie m√ºssen verstehen, dass es keine Zentralisierung und Ber√ºcksichtigung von ‚ÄûPunkten‚Äú gibt.  In dieser Version funktioniert das gleiche Gl√ºcksprinzip wie in PoW. </p><br><h3 id="1-terminologiya">  1. Terminologie </h3><br><p>  Die Terminologie ist relativ allgemein, aber in verschiedenen Implementierungen sind ihre Nuancen: </p><br><ul><li>  <strong>PoW-Ziel</strong> - Ziel = Basisziel, normalerweise 2 ^ 240 (0x0000ffff ...) geteilt durch die Komplexit√§t des Blocks (erh√∂ht die Anzahl der vorangestellten Nullen). </li><li>  <strong>Blockschwierigkeit</strong> - Die Komplexit√§t des Blocks im Verh√§ltnis zum Basisziel, die anhand der aktuellen Kettenwachstumsrate bestimmt werden kann. </li><li>  <strong>UTXO</strong> - Unspent Transaction Output, ein Paar aus einem Transaktions-Hash und einer Exit-Nummer. </li><li>  <strong>CoinBase</strong> ist eine spezielle Transaktion mit dem Index 0 in dem Block, der die Belohnung enth√§lt. </li><li>  <strong>Stake</strong> oder <strong>CoinStake</strong> ist eine spezielle Transaktion mit Index 1 in einem Block. </li><li>  <strong>Stake Input</strong> - UTXO, das die Anforderungen f√ºr eine Wette nach Gr√∂√üe und Alter erf√ºllt. </li><li>  <strong>Stake Modifier</strong> - ein spezieller deterministisch berechneter Parameter f√ºr jeden <strong>Stake Input</strong> . </li><li>  <strong>Stake Hash</strong> ist ein Hash-Ergebnis, das arithmetisch unter dem <strong>Stake-Ziel liegen sollte</strong> . </li><li>  <strong>Einsatzziel</strong> - das gleiche wie das PoW-Ziel, jedoch proportional um den Betrag des <strong>Einsatzes im</strong> Verh√§ltnis zum Mindestgebot erh√∂ht. </li><li>  <strong>Block Signature</strong> - <strong>Block Signature</strong> . </li><li>  <strong>Gabel</strong> - eine verzweigte Kette. </li><li>  <strong>Split</strong> - Netzwerkfreigabe. </li><li>  <strong>Verwaiste</strong> - verworfene Bl√∂cke aufgrund der Wahl einer anderen Alternative. </li></ul><br><h3 id="2-anatomiya">  2. Anatomie </h3><br><p>  Generierungsprozess: </p><br><ol><li>  Wir finden alle UTXO, die die Anforderungen von Stake Input erf√ºllen </li><li>  Suchen Sie den Einsatzmodifikator. </li><li>  Multiplizieren Sie das PoW-Ziel mit dem Einsatz <br><ul><li>  <em>in Millionstel in der Tat - deshalb entspricht 1 MH PoW-Hashrate experimentell einer M√ºnze.</em> </li></ul></li><li>  Wir <code>Stake Hash = H(Stake Modifier, Stake Block Time, UTXO output index, UTXO txid, Current Block Time)</code> . <br><ul><li>  <em>nur variabler Parameter Aktuelle Sperrzeit</em> </li></ul></li><li>  Wenn <code>Stake Hash &gt;= Stake Target</code> , versuchen Sie, die <code>Current Block Time</code> im akzeptablen Bereich zu finden. <br><ul><li>  <em>Abh√§ngig von der Implementierung m√ºssen Sie die M√∂glichkeit von √úberl√§ufen des Einsatzziels in Betracht ziehen, wenn diese mit der Menge des Einsatzes multipliziert werden.</em> </li></ul></li><li>  Wir setzen Coinbase in tx [0] und CoinStake in tx [1]. <br><ul><li>  <em>Der Beg√ºnstigte von Coinbase ist das gleiche Skript (Adresse) wie Stake Input.</em> </li></ul></li><li>  Wir unterschreiben den Block. </li></ol><br><h4 id="21-vremya-bloka">  2.1.  Blockzeit: </h4><br><p>  Es ist leicht zu erkennen, dass ein Betrug im Laufe der Zeit einige Vorteile bringen kann.  Standardkonsens begrenzt die unteren und oberen Grenzen. </p><br><p>  Die unteren setzen immer die durchschnittliche Zeit der Bl√∂cke √ºber die letzten N Bl√∂cke, normalerweise √ºber 11. Dies ist die Toleranz f√ºr die Ungenauigkeit der Zeit beim Erzeugen von Knoten. </p><br><p>  Die historische Obergrenze wurde f√ºr PoW mit einem Finger zum Himmel um 2 Uhr festgelegt.  Das Erh√∂hen der Intervalle verringert die Komplexit√§t und macht den Zweig weniger attraktiv - daher macht es keinen Sinn.  Aber f√ºr PoS macht es Sinn. </p><br><p>  PIVX und andere begrenzen die zuk√ºnftige Zeit auf maximal 3 Minuten.  Einige legen eine strengere Einschr√§nkung fest, dies f√ºhrt jedoch zu Problemen f√ºr die Benutzer.  Einige PoS-Implementierungen haben beschlossen, die minimalen Zeitintervalle f√ºr die aktuelle Blockierung von einer Sekunde auf 15 bis 16 Sekunden zu √§ndern. </p><br><h4 id="22-stake-modifier">  2.2.  Einsatzmodifikator: </h4><br><p>  Der Stake Modifier wurde konzipiert, um die Vorhersage zu erschweren und die Kette voranzutreiben, aber etwas ist schief gelaufen ... </p><br><p>  Es gibt verschiedene M√∂glichkeiten, dies zu berechnen: Die letzten Bits von Block-Hashes am Ende progressiv festgelegter Zeitintervalle, [nicht sehr] schlecht vorhergesagte Werte aus vorherigen Bl√∂cken usw.  An einigen Stellen sieht es eher nach Verschleierung von Code als nach etwas Vern√ºnftigem aus. </p><br><p>  Das Original ben√∂tigt eine Pause von 64 Intervallen.  Diese L√ºcke wird schrittweise in 64 ungleiche Teile unterteilt.  R√§nder werden auf Minuten gerundet.  An den R√§ndern werden vorhandene Bl√∂cke ausgew√§hlt und ein letztes Bit daraus entnommen.  Es stellt sich also eine 64-Bit-Zahl heraus, √§hnlich wie bei Nonce. </p><br><p>  Das Intervall bei Peercon betr√§gt 20 Minuten, aber die Mitarbeiter von PIVX haben entschieden, dass das auf die Minute gerundete Intervall von 1 Minute das ist, was der Arzt angeordnet hat. </p><br><p>  Im Allgemeinen ist in einigen Implementierungen wie Blackcoin V2 + alles festgelegt und der Einsatzmodifikator wird vom Kopf aus gez√§hlt, w√§hrend in Peercoin V03, PIVX, Blackcoin V1 und anderen vom Einsatz-Eingabeblock.  Letzteres zerst√∂rt die Bedeutung fast vollst√§ndig.  Es besteht die Annahme, dass die Verwirrung auf das banale Problem der Benennung von Variablen, weiterer Metamorphosen und des gedankenlosen Kopierens und Einf√ºgens zur√ºckzuf√ºhren ist.  Und der Autor selbst entdeckte das Problem ziemlich sp√§t, w√§hrend seine ganze Aufmerksamkeit auf den Schutz vor DoS gerichtet war.  Lass dich nicht erwischen! </p><br><h4 id="23-podpis-bloka">  2.3.  Blockieren Sie die Signatur </h4><br><p>  Da der Hash des Blocks nicht mehr als Arbeitsnachweis dient und jeder die signierte CoinStake-Transaktion von einem anderen Block √ºbernehmen kann, m√ºssen Sie √ºberpr√ºfen, ob der Block vom Eigent√ºmer von Stake erstellt wurde.  Daher wird der Header mit demselben privaten Schl√ºssel wie CoinStake signiert. </p><br><h4 id="24-skript-vyhoda-coinbase-i-coinstake">  2.4.  CoinBase- und CoinStake-Exit-Skript </h4><br><p>  Dieselben Exit-Skripte oder das Aufrufen von Brieftaschenadressen sind erforderlich, um die Privatsph√§re zu sch√ºtzen und zu vermeiden, dass einzelne Adressen in einer Brieftasche verkn√ºpft werden. </p><br><h4 id="25-chto-i-kuda">  2.5 Was und wo? </h4><br><p>  Es gibt verschiedene Variationen im Umgang mit Betr√§gen in CoinBase und CoinStake.  Logik und Motivation im Einzelfall: </p><br><ol><li>  Betr√§ge m√ºssen getrennt gehalten werden, um selbst den geringstm√∂glichen Verlust von Benutzermitteln aufgrund von Verarbeitungsfehlern zu vermeiden. </li><li>  CoinBase beh√§lt seine 100 Best√§tigungen bei, aber CoinStake kann sofort ausgegeben werden, was nat√ºrlich das Risiko doppelter Ausgaben birgt. <br><ul><li>  Das Einrasten in die Tiefe der Bl√∂cke widerspricht auch der Altersqualifikation f√ºr die Verwendung als Einsatz. </li></ul></li><li>  CoinBase und CoinStake sollten niemals in den Mempool gelangen, und alle darauf basierenden Transaktionen sollten w√§hrend der Kettenwiederherstellung gel√∂scht werden. </li></ol><br><h3 id="3-polnye-bloki-protiv-zagolovkov">  3. Vervollst√§ndigen Sie die Bl√∂cke gegen die √úberschriften </h3><br><p>  Der Eintritt eines vollwertigen Knotens in das Netzwerk beginnt mit der Synchronisation.  In Bitcoin basiert die Synchronisation haupts√§chlich auf Blockheadern, as  Sie enthalten ausreichende Informationen zur vorl√§ufigen √úberpr√ºfung des Konsenses.  Zun√§chst werden relativ kleine Header herausgezogen und in Chargen von bis zu 2000 Teilen von einem Seitenknoten gepr√ºft.  Wenn die Erstpr√ºfung erfolgreich war, werden alle Bl√∂cke von allen verbundenen Knoten parallel gezogen. </p><br><p>  Der Hochwasserschutz basiert auf der Tatsache, dass der lokale Knoten den bekanntesten Header mit dem vergleicht, was er hat, und die gesamte Header-Kette anfordert.  Beim Herunterladen wird alles durch die geringen Kosten f√ºr Speicherplatz und Computer √ºberpr√ºft.  Das Gewicht der Ketten wird anhand eines Merkmals wie <strong>Kettenarbeit</strong> verglichen, bei dem es sich um die Summe der Komplexit√§t jedes einzelnen Blocks handelt.  Um eine so starke alternative Kette aufzubauen, sind extrem hohe Ressourceninvestitionen erforderlich, was Angriffe vielversprechend macht. </p><br><p>  Mit PoS funktioniert dieser Ansatz nicht, weil  Um die Bl√∂cke zu √ºberpr√ºfen, m√ºssen Sie die vollst√§ndigen vorherigen Bl√∂cke mindestens bis zum Mindestalter des Einsatzes verarbeiten.  Die vom Autor betrachteten Implementierungen wurden nicht pervers, sondern weigerten sich einfach, mit Headern zu arbeiten. </p><br><p>  <strong>Daher</strong> implementierte <strong>der</strong> Autor einen parallelen opportunistischen Download von Bl√∂cken nach den Headern, was die Synchronisationsgeschwindigkeit aufgrund der Verwendung aller Verbindungen erheblich erh√∂ht.  Kleinere Verz√∂gerungen treten nur auf, wenn sich die Peers in verschiedenen Ketten befinden - dann wird die Verbindung nach einer geringf√ºgigen Zeit√ºberschreitung wie im Standardschema unterbrochen.  Als Minus die Tendenz, zum Zeitpunkt der Synchronisation eine falsche Kette zu w√§hlen. </p><br><p>  <em>√úbrigens haben der Standard-Bitcoin-Client und seine Gabeln die Mindeststandardanzahl ausgehender Verbindungen 8 lange genug erfasst, wenn einige von ihnen aus verschiedenen Gr√ºnden fehlschlagen.</em>  <em>Dies wurde durch asynchrone ausgehende Verbindungen behoben.</em> </p><br><h3 id="4-forki-splity-i-orfany">  4. Gabeln, Splits und Waisen </h3><br><p>  Beim Blockbauwettbewerb sind alternative Ketten mit 1-2 Gliedern relativ h√§ufig.  L√§ngere Gabeln in entwickelten Netzwerken treten nat√ºrlich nur bei epischen Konsensfehlern aufgrund eines Programmierfehlers oder einer globalen Internetunterbrechung auf. </p><br><p>  Selbst bei einer Trennung besteht normalerweise keine Gefahr f√ºr die Integrit√§t der Transaktionsverarbeitung  Beim Trennen von Bl√∂cken gehen alle Transaktionen zur√ºck in mempool und sind bereits in anderen Bl√∂cken enthalten.  Mempool ist ein tempor√§res Repository f√ºr Transaktionen, nachdem diese erstellt wurden.  Mempool selbst wird in neueren Versionen auf der Festplatte gespeichert.  Die Belohnung f√ºr den Block wird zerst√∂rt.  Aus diesem Grund wird die Mindestanzahl von Best√§tigungen (Tiefe) f√ºr Auszeichnungen festgelegt. </p><br><p>  Es kommt vor, dass lokale Netzwerksegmente ihre Verbindung zur Au√üenwelt verlieren und weiterhin abbauen, vorausgesetzt, es besteht eine Verbindung zum Hauptnetzwerk.  Solche Zweige stellen aufgrund ihrer nat√ºrlichen Schw√§che normalerweise keine Bedrohung dar. </p><br><p>  Der Hauptangriff von 51% f√ºr PoW wurde bereits oben beschrieben - er ist extrem ressourcenintensiv, aber f√ºr PoS wird er relativ erschwinglich.  Aus diesem Grund wird es technisch m√∂glich, viele Zweige aus verschiedenen Gliedern der Kette herzustellen.  Eine der klassischen L√∂sungen besteht darin, Gabeln unterhalb einer bestimmten Tiefe zu verbieten. </p><br><p>  Das Hauptproblem eines solchen Schutzes ist die Unf√§higkeit von Knoten aus Einsiedlersegmenten, nach einem Neustart unabh√§ngig zur Hauptschaltung zur√ºckzukehren. </p><br><p>  <strong>Daher</strong> wurde ein Ansatz zum Verbot von Gabeln, die √§lter als ein bestimmter Zeitraum sind, nur dann implementiert, wenn die Spitze der Kette noch recht jung ist. </p><br><p>  <em>Bei einem Zielintervall von Bl√∂cken von 1 Minute wurde das Kriterium der alten Gabel nach 1 Stunde gew√§hlt, was ungef√§hr 60% der CoinBase-Best√§tigungen entspricht, und das Kriterium der Jugend der Krone nach 15 Minuten ist dreimal h√∂her als die maximale statistische Verz√∂gerung des Blocks.</em> </p><br><h3 id="5-hesh-bloka-i-splity">  5. Blockieren und teilen Sie den Hash </h3><br><p>  In PoW deckt ein Block-Hash alle Daten vollst√§ndig ab.  Es wird auch verwendet, um das Ziel zu √ºberpr√ºfen.  In PoS ist Stake Hash ein separater Wert, weil  es ist notwendig, die M√∂glichkeit seiner Auswahl auszuschlie√üen.  Dies er√∂ffnet die Hauptbedrohung - die M√∂glichkeit, eine unbegrenzte Anzahl verschiedener Versionen des Blocks auf der Grundlage desselben zusammenfallenden Einsatzes zu erstellen, der leicht √ºberflutet und das Netzwerk oder seine einzelnen Knoten platziert werden kann. </p><br><p>  Naive Verteidigungsans√§tze f√ºhren zu noch schwerwiegenderen Split-Schwachstellen.  Ein solcher Ansatz in verschiedenen Varianten besteht darin, die Verwendung von Stake Input nur einmal zuzulassen.  Ein einfacher Angriff besteht darin, verschiedene Bl√∂cke an verschiedene Knoten zu senden, wodurch sofort ein weicher Split entsteht. </p><br><p>  Noch fataler ist es, dies durch ein DoS-Verbot zu versch√§rfen, das nicht nur die Ketten, sondern auch das Netzwerk selbst in verschiedene Segmente unterteilt. </p><br><p>  Andere Probleme treten auf - die Unf√§higkeit, Stake aus einem abgelegten Block zu verwenden. </p><br><p>  <strong>Daher</strong> wurde die Drosselmethode als sicherste L√∂sung gew√§hlt - der gleiche Einsatz kann nicht mehr als einmal pro Minute verwendet werden.  Die Logik ist einfach: Ein Angriff kann nur im Intervall von 1 Stunde dauern (siehe die alte Gabelung oben), f√ºr die es m√∂glich ist, nicht mehr als 60 Bl√∂cke zu √ºberfluten.  Im besten Fall wird das Netzwerk im n√§chsten Block bereits auf einen einzelnen Stromkreis umgestellt.  Im schlimmsten Fall geschieht dies bei einem kontinuierlichen Angriff in einer Stunde.  Die Wahrscheinlichkeit, dass im schlimmsten Fall mehrere Bl√∂cke hintereinander gefunden werden, schmilzt exponentiell. </p><br><p>  <em>Trotzdem bleiben einige Punkte bestehen, an denen die Knoten bis zum Zeitpunkt der vollst√§ndigen Synchronisierung f√ºr m√§√üige √úberschwemmungen anf√§llig sind</em> . </p><br><h3 id="6-minimalnyy-vozrast">  6. Mindestalter </h3><br><p>  F√ºr einige ist diese Einschr√§nkung verwirrend, aber f√ºr die Netzwerkstabilit√§t √§u√üerst wichtig  Dieser Parameter steht in direktem Zusammenhang mit der maximalen L√§nge des alternativen Netzwerks, die der lokale Knoten ohne ernsthafte technische Verzerrungen √ºberpr√ºfen kann. </p><br><p>  Wie bereits erw√§hnt, muss der lokale Knoten alle Bl√∂cke bis zum Alterslimit verarbeiten, um √ºberpr√ºfen zu k√∂nnen, ob der Stake Input a) einen Platz hat, an dem b) wirklich UTXO ist und nicht ausgegeben wurde. </p><br><p>  √úberpr√ºfen Sie, ob dies nur durch die Funktionalit√§t des sogenannten m√∂glich ist.  CoinView, der den Bewegungszustand von M√ºnzen zum Zeitpunkt eines bestimmten Blocks darstellt - die Spitze der Hauptkette im Verst√§ndnis des lokalen Knotens. </p><br><p>  Die Implementierung eines vollwertigen Tests alternativer Schaltkreise in Zeitintervallen oder sogar auf besondere Weise, die von CoinView gespeichert werden, erscheint nicht vielversprechend, weil  Die Anzahl dieser alternativen Ketten ist unendlich gro√ü. </p><br><p>  Ein zu gro√üer Balken f√ºr die Altersgrenze von UTXO wirkt sich negativ auf Benutzer aus, die einen Teil ihrer M√ºnzen ausgeben oder kombinieren m√∂chten. </p><br><p>  Wenn Sie diesen Rand in der Tiefe der Bl√∂cke angeben, ist eine hypothetische Pattsituation eines vollst√§ndigen Kettenstopps aufgrund der Tatsache, dass kein geeignetes UTXO vorhanden ist, m√∂glich.  Bei Zeiteinheiten tritt zumindest eine gewisse Bewegung auf. </p><br><p>  <strong>Daher</strong> wird in anderen Netzwerken eine ausgeglichene Auswahl von 1 Stunde in absoluten Zeiteinheiten anstelle der Tiefe der Bl√∂cke verwendet. </p><br><h3 id="7-chto-luchshe-n-utxo-po-minimalnoy-summe-ili-odin-utxo-s-n-summoy">  7. Was ist besser als N UTXO f√ºr den Mindestbetrag oder ein UTXO mit N insgesamt? </h3><br><p>  Hier spricht sich die Analogie aus: Es ist besser, eine Waffe mit einer Genauigkeit von 0,9 oder drei Waffen mit einer Genauigkeit von 0,3 zu haben, aber mit Wahrscheinlichkeiten in der Gr√∂√üenordnung von 1/2 ^ 20 scheinen die Ergebnisse solcher Berechnungen ausgeglichen zu sein.  Eine kleine Karte verwirrt die Qualifikationsreife. </p><br><p>  Die derzeitige Annahme, dass viele kleine Transaktionen mehr Bl√∂cke finden, stammt wahrscheinlich aus der Zeit, als das Alter des Einsatzes bei der Bestimmung des Gewichts ebenfalls ber√ºcksichtigt wurde.  Damals machten alte kleine Transaktionen wirklich viel Sinn. </p><br><p>  Im Moment bringen die in gro√üen UTXO gruppierten Gruppen basierend auf praktischen Experimenten und theoretischen Berechnungen mehr Bl√∂cke.  Dar√ºber hinaus erfordert weniger UTXO weniger CPU-Arbeit.  Jemand behauptet das Gegenteil. </p><br><p>  Denken Sie also selbst. </p><br><h3 id="8-zabeganie-blokov-vperyod">  8. Bl√∂cke vorw√§rts laufen lassen </h3><br><p>  PoS-Bergleute √ºbertreffen Blockzeiten nat√ºrlich ein wenig.  Dies wirkt sich negativ auf die Komplexit√§t des Netzwerks aus.  Der Standard-Bitcoin-Code w√§hlt den ersten empfangenen Block unabh√§ngig von der darin angegebenen Zeit aus.  Die meisten PoS-Implementierungen machen dasselbe. </p><br><p>  <strong>Daher wurde die</strong> Logik des PoS-Miners ge√§ndert, um die Auswahl ab der durchschnittlichen Zeit der Bl√∂cke zu starten, wenn die Zeit des aktuellen Blocks vorw√§rts ging.  Gleichzeitig vergleichen die Knoten vor dem Vergleich der Reihenfolge die angegebene Zeit der Bl√∂cke.  Der PoS-Miner sendet den gefundenen Block an das Netzwerk, auch wenn er sieht, dass er eine Verzweigung generiert. </p><br><p>  Auf diese Weise wird das Netzwerk auch vor hypothetischen vorzeitig gesendeten Bl√∂cken gesch√ºtzt, deren Stake-Eingang aufgrund des DoS-Schutzes in den n√§chsten 60 Sekunden nicht mit demselben Stake-Modifikator verwendet werden kann.  Wie eine doppelte Strafe f√ºr Betrug im Laufe der Zeit. </p><br><h3 id="9-nebolshoy-cheklist">  9. Eine kleine Checkliste </h3><br><ol><li>  Stake Input muss vor dem Gabelpunkt UTXO g√ºltig sein: <br><ul><li>  bei der Hauptkette ist der Gabelpunkt die Spitze, </li><li>  im Falle einer alternativen Schaltung - UTXO nach dem Gabelpunkt kann beim Schalten zu Self-DoS f√ºhren, </li><li>  UTXO sollte nicht alleine in mempool sein. </li></ul></li><li>  Akzeptieren Sie CoinStake in mempool nicht, wenn Sie den Hauptstromkreis neu erstellen: <br><ul><li>  das gleiche passiert mit CoinBase, </li><li>  Dies kann die Transaktionskette zerst√∂ren (unwahrscheinlich). </li></ul></li><li>  Akzeptieren Sie keine Gabeln aus alten Bl√∂cken, wenn die Oberseite ziemlich lebendig ist. </li><li>  Die Altersgrenze in absoluten Zeiteinheiten f√ºr den Einsatz von Pf√§hlen ist f√ºr Stabilit√§t und Sicherheit erforderlich. </li><li>  Stake Hash sollte sich nur ab Blockzeit √§ndern. </li><li>  Der Stake-Modifikator sollte nicht an den Stake-Eingabeblock gebunden sein. </li><li>  Das Arbeiten mit Blockheadern erfordert eine spezielle Verarbeitung im Netzwerk und w√§hrend der Neuindizierung. </li><li>  CoinStake werden in der lokalen Brieftasche aufgezeichnet und erfordern einige √Ñnderungen f√ºr die korrekte Anzeige von Orfans. </li><li>  PoS-Miner haben h√∂chstwahrscheinlich genug Pfosten und m√ºssen mit einer Datei finalisiert werden. </li><li>  Re-Index muss verbessert werden, weil  Es funktioniert analog zu Headern - zuerst wird nur der Index der Bl√∂cke geladen und √ºberpr√ºft, und dann wird nur versucht, die Bl√∂cke zu verarbeiten. </li><li>  Wenn der √úbergang zu PoS nicht fest codiert ist, sondern √ºber Spork, m√ºssen Sie ihn beim Booten abfangen, weil  Sporks werden nicht gespeichert. </li><li>  Checkpoints in Dash und Bitcoin sind fast eine T√§uschung und erfordern eine sehr ernsthafte √úberarbeitung. </li><li>  Wenn die Dash-Gabel bis Version 0.13 ist, gibt es Probleme bei der Verarbeitung von Masterknotendaten im einfachen Benutzermodus. <br><ul><li>  Bei h√§ufigem Neustart des Clients wird die Netzwerkansicht verzerrt. </li><li>  Es ist besser, den Cache einfach zu ignorieren, wenn er im grafischen Modus ausgef√ºhrt wird. </li></ul></li><li>  √Ñndern Sie die Auswahl des besten Blocks unter Ber√ºcksichtigung der Blockzeit. </li><li>    Bitcoin          . </li><li>         mempool CoinStake  . </li></ol><br><hr><br><p><img src="https://habrastorage.org/webt/gw/fh/up/gwfhupvzahev6mwinu2-idrfpp8.png"></p><br><h2 id="vnedrenie-v-zhizn">    </h2><br><p>     .   mainnet    PoW       ,    ,      PoS,      . PoS       Ethereum   Casper'. </p><br><p>  GPU        -    ‚Äî ethminer'.           150-200 GH (ethash).  -                PoS  . </p><br><p>       PoS   PIVX 2.x  "   ".  -    PIVX     ,             ,  .         ,     PIVX 2.x    .      Dash         0.12      Bitcoin'. </p><br><p>          ,     PoS      .       ,         ,     . </p><br><h3 id="podgotovitelnye-raboty">   </h3><br><h4 id="dokumentaciya">  Die Dokumentation </h4><br><p>      .           .   whitepaper    -. </p><br><h4 id="pervoe-priblizhenie">   </h4><br><p>        PoS  PIVX       Bitcoin/Dash.     CoinStake          .      PoS    . </p><br><p>      ,      Stake Modifier   Stake Hash  ,       Stake Input   . -      ,  -    PIVX    . </p><br><h4 id="dinamichnye-chekpoynty">   </h4><br><p>          ‚Äî      .    : </p><br><ol><li>            . </li><li>         . </li><li>       ‚Äî ..    ,       . </li><li>      ,  -      ,         . </li></ol><br><p>            .    spork'    ,       . </p><br><p> <em>,        .    spork'     .</em> </p><br><h4 id="perehod-na-pos-ne-dolzhen-byt-zhyostko-zashit">   PoS      </h4><br><p>              ,   -    .        spork,   ,     . </p><br><h4 id="novaya-versiya-protokola">    </h4><br><p>  , ..              .  ,         . </p><br><h4 id="publichnoe-testirovanie">   </h4><br><p>      testnet,       . </p><br><p>  testnet      3   1   mainnet,        . </p><br><h4 id="kalkulyator-dohodnosti">   </h4><br><p>    PoW ,  PoS     - ,            1e6       PoW. </p><br><p>           .   mainnet          Stake Input. </p><br><p>           . </p><br><h3 id="perehod-na-pos-v-zhizni">   PoS   </h3><br><p>     X   spork    PoS . -       ,      . </p><br><p>             .  ,   .        . </p><br><p>     ,      ,     . </p><br><h3 id="lozhka-dyogtya">   </h3><br><p>      Stake Modifier  .        .    PIVX  - ‚Ä¶ ,     ,        Ethereum,    . </p><br><hr><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>    -      ,          .   ,          PoS   ,        .        . </p><br><p> <em>:       -           .</em> </p><br><p> <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  GitHub       </a></em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de442862/">https://habr.com/ru/post/de442862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de442846/index.html">Unsere Raumfahrtindustrie. Ein Blick auf Branchenprobleme aus der Sicht eines normalen Entwicklers</a></li>
<li><a href="../de442852/index.html">Dell 6000 oder Hallo von 2005</a></li>
<li><a href="../de442854/index.html">Wie haben wir das U-Bahn-Schema von Minsk gemacht?</a></li>
<li><a href="../de442856/index.html">Zwei in einem: Wi-Fi programmierbarer Luftqualit√§tsmonitor und Uhr</a></li>
<li><a href="../de442858/index.html">Gibt es in Afrika zu viele Elefanten? Wie friedliches Zusammenleben mit menschlichen Gemeinschaften dabei helfen kann</a></li>
<li><a href="../de442864/index.html">Wie alt ist dein Herr?</a></li>
<li><a href="../de442866/index.html">KI, die aus jahrzehntelangen kulinarischen Experimenten trainiert wurde, kreiert neue Gerichte</a></li>
<li><a href="../de442868/index.html">Ein kurzer Ausflug in die K√ºhlsysteme des Rechenzentrums. Vorteile und Nachteile</a></li>
<li><a href="../de442870/index.html">Das Beste der Welt von Angular f√ºr die Woche - Digest Nr. 2 (26. Januar - 7. M√§rz)</a></li>
<li><a href="../de442872/index.html">Wie ich das Osterei im Android-Schutz gefunden habe und keinen Job bei Google bekommen habe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>