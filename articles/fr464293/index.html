<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë©üèº ü§∑üèº üòâ Les crochets se remplacent-ils dans React Redux? ü¶é üë©‚Äç‚öñÔ∏è üö±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depuis que les hooks sont apparus dans React, il y a eu de nombreuses questions pour savoir s'ils peuvent remplacer Redux. 

 Je crois que les crochet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Les crochets se remplacent-ils dans React Redux?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/464293/">  Depuis que les hooks sont apparus dans React, il y a eu de nombreuses questions pour savoir s'ils peuvent remplacer Redux. <br><br>  Je crois que les crochets et Redux ont peu en commun.  Les crochets ne nous donnent pas de nouvelles opportunit√©s incroyables de travailler avec l'√âtat.  Au lieu de cela, ils √©tendent les API afin de pouvoir faire dans React ce qui √©tait d√©j√† possible.  Cependant, l'API hook a rendu le travail avec les capacit√©s de gestion d'√©tat de React beaucoup plus pratique.  Il s'est av√©r√© qu'il est plus facile d'utiliser les nouvelles fonctionnalit√©s pour travailler avec l'√©tat que les anciennes qui √©taient disponibles dans les composants bas√©s sur les classes.  Maintenant, j'utilise les outils pour travailler avec l'√©tat des composants beaucoup plus souvent qu'auparavant.  Naturellement, je ne fais cela que lorsque cela est appropri√©. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/3l/la/tr/3llatro-chokmu9rdtwtga0l1sc.jpeg"></a> <br><br>  Afin d'expliquer mon attitude envers les hooks React et Redux, je voudrais d'abord parler des situations dans lesquelles Redux est g√©n√©ralement utilis√©. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Qu'est-ce que Redux?</font> </h2><br>  Redux est une biblioth√®que qui impl√©mente un stockage pr√©visible de l'√©tat des applications.  C'est √©galement une architecture qui s'int√®gre parfaitement √† React. <br><br>  Voici les principaux atouts de Redux: <br><br><ul><li>  Repr√©sentation d√©terministe de l'√©tat (en combinaison avec des composants purs, cela permet de former des √©l√©ments visuels d√©terministes). </li><li>  Prise en charge des changements d'√©tat transactionnels. </li><li>  Isolement de la gestion de l'√©tat des m√©canismes d'E / S et des effets secondaires. </li><li>  La pr√©sence d'une source unique de donn√©es fiables pour l'√âtat. </li><li>  Organisation ais√©e de la collaboration avec l'Etat en diff√©rents composants. </li><li>  Outils d'analyse transactionnelle (journalisation automatique des objets d'action). </li><li>  D√©bogage avec la possibilit√© d'enregistrer et de lire le processus d'ex√©cution du programme (Time Travel Debugging, TTD). </li></ul><br>  En d'autres termes, Redux vous permet de bien organiser votre code et de le d√©boguer facilement.  Redux aide √† d√©velopper des applications faciles √† maintenir.  L'utilisation de cette biblioth√®que facilite la recherche des sources de probl√®mes qui surviennent dans les programmes. <br><br><h2>  <font color="#3AC1EF">Que sont les crochets React?</font> </h2><br>  Les crochets React permettent, lorsque vous travaillez avec des composants fonctionnels, d'utiliser un analogue de l'√©tat des composants en fonction des classes et des analogues de leurs m√©thodes de cycle de vie.  Des crochets sont apparus dans React 16.8. <br><br>  Les principales forces des crochets sont les suivantes: <br><br><ul><li>  La possibilit√© d'utiliser l'√©tat et de g√©rer les √©v√©nements du cycle de vie des composants sans utiliser de composants bas√©s sur les classes. </li><li>  Stockage conjoint de la logique associ√©e dans le m√™me emplacement de composant au lieu de diviser une logique similaire entre plusieurs m√©thodes de cycle de vie. </li><li>  M√©canismes de partage ind√©pendants de l'impl√©mentation du composant (similaire au mod√®le de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prop de rendu</a> ). </li></ul><br>  Notez que ces excellentes fonctionnalit√©s ne d√©passent pas, en fait, Redux.  Les hooks React peuvent et doivent √™tre utilis√©s pour effectuer des mises √† jour d'√©tat d√©terministe, mais cela a toujours √©t√© l'une des fonctionnalit√©s de React, et le mod√®le d'√©tat d√©terministe Redux se combine bien avec cette fonctionnalit√©.  C'est ainsi que React parvient √† un d√©terminisme dans la sortie des √©l√©ments visuels, et c'est, sans exag√©ration, l'un des motifs moteurs de la cr√©ation de React. <br><br>  Si vous utilisez des outils tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'API react-redux avec prise en charge</a> des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hooks</a> ou le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hook React useReducer</a> , vous constaterez qu'il n'y a aucune raison de demander quoi choisir - hooks ou Redux.  Vous pouvez utiliser les deux, combiner et combiner ces technologies. <br><br><h2>  <font color="#3AC1EF">Qu'est-ce qui remplace les crochets?</font> </h2><br>  Apr√®s l'av√®nement des API de hook, j'ai cess√© d'utiliser les technologies suivantes: <br><br><ul><li>  Composants bas√©s sur la classe. </li><li>  Mod√®le de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rendu-prop</a> . </li></ul><br><h2>  <font color="#3AC1EF">Qu'est-ce qui ne remplace pas les crochets?</font> </h2><br>  J'utilise encore souvent les technologies suivantes: <br><br><ul><li>  Redux - pour toutes les raisons ci-dessus. </li><li>  Composants d'ordre sup√©rieur - dans le but d'effectuer la composition de composants dans les cas o√π je dois impl√©menter une fonctionnalit√© de bout en bout partag√©e par tout ou partie des composants visuels de l'application.  Ces fonctionnalit√©s incluent les fournisseurs Redux, les syst√®mes de mise en page, les syst√®mes de prise en charge des param√®tres d'application, les outils d'authentification et d'autorisation, les outils d'internationalisation des applications, etc. </li><li>  S√©paration entre les composants du conteneur et les composants qui ont une repr√©sentation visuelle.  Cela vous permet d'am√©liorer la modularit√© et la testabilit√© des applications, il est pr√©f√©rable de s√©parer les effets et la logique pure. </li></ul><br><h2>  <font color="#3AC1EF">Quand utiliser des crochets?</font> </h2><br>  Il n'est pas n√©cessaire de s'efforcer d'utiliser Redux dans chaque application et dans chaque composant.  Si votre projet se compose d'un composant visuel, s'il n'enregistre pas de donn√©es et ne charge pas de donn√©es √† partir de l√†, si des op√©rations d'E / S asynchrones n'y sont pas effectu√©es, je ne peux pas penser √† une raison valable pour compliquer ce projet en utilisant Redux. <br><br>  On peut en dire autant des composants qui pr√©sentent les caract√©ristiques suivantes: <br><br><ul><li>  Ils n'utilisent pas les ressources r√©seau. </li><li>  Ils ne stockent pas de donn√©es dans l'√©tat et ne les chargent pas √† partir de l√†. </li><li>  Ils ne partagent pas l'√©tat avec d'autres composants qui ne sont pas leurs descendants. </li><li>  Ils n'ont pas un certain √©tat propre, utilis√© pour le stockage de donn√©es √† court terme. </li></ul><br>  Vous pouvez avoir de bonnes raisons d'utiliser le mod√®le d'√©tat de composant React standard dans certaines situations.  Dans des situations comme celle-ci, les crochets React vous feront du bon travail.  Par exemple, le formulaire d√©crit ci-dessous utilise l'√©tat local du composant √† l'aide du hook React <code>useState</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TextField, { Input } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material/react-text-field'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> noop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Holder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{  itemPrice = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">175</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  name = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  email = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  id = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  removeHolder = noop,  showRemoveButton = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">, }</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name);  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> setter = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function"> =&gt;</span></span> e =&gt; {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { target } = e;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { value } = target;    set(value);  }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (    &lt;div className="row"&gt;      &lt;div className="holder"&gt;        &lt;div className="holder-name"&gt;          &lt;TextField label="Name"&gt;            &lt;Input value={nameInput} onChange={setter(setName)} required /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        &lt;div className="holder-email"&gt;          &lt;TextField label="Email"&gt;            &lt;Input              value={emailInput}              onChange={setter(setEmail)}              type="email"              required            /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        {showRemoveButton &amp;&amp; (          &lt;button            className="remove-holder"            aria-label="Remove membership"            onClick={e =&gt; {              e.preventDefault();              removeHolder(id);            }}          &gt;            √ó          &lt;/button&gt;        )}      &lt;/div&gt;      &lt;div className="line-item-price"&gt;${itemPrice}&lt;/div&gt;      &lt;style jsx&gt;{cssHere}&lt;/style&gt;    &lt;/div&gt;  ); }; Holder.propTypes = {  name: t.string,  email: t.string,  itemPrice: t.number,  id: t.string,  removeHolder: t.func,  showRemoveButton: t.bool, }; export default Holder;</code> </pre> <br>  Ici, <code>useState</code> utilis√© pour contr√¥ler l'√©tat bri√®vement utilis√© des champs de saisie du <code>name</code> et de l' <code>email</code> - <code>email</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email);</code> </pre> <br>  Vous pouvez remarquer qu'il existe toujours un cr√©ateur de l'action <code>removeHolder</code> entrant dans les propri√©t√©s de Redux.  Comme d√©j√† mentionn√©, la combinaison et la combinaison de technologies est tout √† fait normale. <br><br>  L'utilisation de l'√©tat local d'un composant pour r√©soudre de tels probl√®mes a toujours sembl√© bonne, mais avant React hooks, j'aurais en tout cas voulu enregistrer les donn√©es du composant dans le stockage Redux et obtenir l'√©tat des propri√©t√©s. <br><br>  Auparavant, l'utilisation de l'√©tat d'un composant impliquait l'utilisation de composants bas√©s sur une classe, l'√©criture des donn√©es initiales dans l'√©tat √† l'aide des m√©canismes de d√©claration des propri√©t√©s de classe (ou dans le constructeur de classe), etc.  En cons√©quence, il s'est av√©r√© que pour √©viter d'utiliser Redux, le composant devait √™tre trop compliqu√©.  Redux s'est √©galement prononc√© en faveur de l'existence d'outils pratiques pour g√©rer l'√©tat des formulaires √† l'aide de Redux.  Par cons√©quent, auparavant, je ne me serais pas inqui√©t√© que l'√©tat temporaire du formulaire soit stock√© au m√™me endroit que les donn√©es avec une dur√©e de vie plus longue. <br><br>  Comme j'ai d√©j√† utilis√© Redux dans toutes mes applications plus ou moins complexes, le choix de la technologie pour stocker l'√©tat des composants des composants ne m'a pas beaucoup fait r√©fl√©chir.  Je viens d'utiliser Redux dans presque tous les cas. <br><br>  Dans les conditions modernes, faire un choix est √©galement facile: travailler avec l'√©tat du composant est organis√© √† l'aide des m√©canismes React standard et g√©rer l'√©tat de l'application √† l'aide de Redux. <br><br><h2>  <font color="#3AC1EF">Quand utiliser Redux?</font> </h2><br>  Une autre question courante concernant la gestion des √©tats est: ¬´Dois-je absolument tout mettre dans le r√©f√©rentiel Redux?  Si je ne le fais pas, cela violera-t-il la capacit√© de d√©boguer des applications √† l'aide des m√©canismes TTD? " <br><br>  Il n'est pas n√©cessaire d'h√©berger absolument tout dans le r√©f√©rentiel Redux.  Le fait est que les applications utilisent beaucoup de donn√©es temporaires qui sont trop dispers√©es autour d'elle pour donner des informations qui, √©tant enregistr√©es dans le journal ou utilis√©es pendant le d√©bogage, peuvent fournir au d√©veloppeur une aide importante pour trouver des probl√®mes.  Probablement vous, sauf si vous √©crivez une application d'√©dition en temps r√©el, vous n'avez pas besoin d'√©crire √† l'√©tat chaque mouvement de souris ou chaque frappe de touche.  Lorsque vous mettez quelque chose dans un √©tat Redux, vous ajoutez un niveau d'abstraction suppl√©mentaire √† l'application, ainsi qu'un niveau suppl√©mentaire de complexit√© qui l'accompagne. <br><br>  En d'autres termes, vous pouvez utiliser Redux en toute s√©curit√©, mais il doit y avoir une raison √† cela.  L'utilisation de fonctionnalit√©s Redux dans les composants peut √™tre justifi√©e si les composants diff√®rent par les fonctionnalit√©s suivantes: <br><br><ul><li>  Ils utilisent les E / S.  Par exemple, ils fonctionnent avec un r√©seau ou avec certains appareils. </li><li>  Ils y enregistrent des donn√©es ou en chargent des donn√©es. </li><li>  Ils travaillent avec leur √©tat conjointement avec des composants qui ne sont pas leurs descendants. </li><li>  Ils traitent avec toute logique m√©tier avec laquelle les autres parties de l'application traitent, soit - ils traitent les donn√©es qui sont utilis√©es dans d'autres parties de l'application. </li></ul><br>  Voici un autre exemple tir√© de l'application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TDDDay</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useDispatch, useSelector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { compose } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ramda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../hocs/page.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Purchase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { addHolder, removeHolder, getHolders } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-reducer.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PurchasePage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      // mapStateToProps  mapDispatchToProps  const dispatch = useDispatch();  const holders = useSelector(getHolders); const props = {    //           //    dispatch.    addHolder: compose(      dispatch,      addHolder    ),    removeHolder: compose(      dispatch,      removeHolder    ),    holders,  }; return &lt;Purchase {...props} /&gt;; }; // `page` -    ,    //        . export default page(PurchasePage);</span></span></code> </pre> <br>  Ce document ne traite pas du DOM.  Il s'agit d'un composant de pr√©sentation.  Il est connect√© √† Redux √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'</a> aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'API react-redux avec prise en charge du hook</a> . <br><br>  Redux est utilis√© ici car nous avons besoin des donn√©es que ce formulaire g√®re pour √™tre utilis√©es dans d'autres parties de l'interface utilisateur.  Et une fois l'op√©ration d'achat termin√©e, nous devons enregistrer les informations pertinentes dans la base de donn√©es. <br><br>  Les fragments d'√©tat avec lesquels ce code fonctionne sont utilis√©s par divers composants; ils ne sont pas trait√©s par un seul composant.  Ce ne sont pas des donn√©es qui n'existent que sur une courte p√©riode.  Ces donn√©es peuvent √™tre consid√©r√©es comme permanentes, elles peuvent √™tre utilis√©es sur diff√©rents √©crans de l'application et en plusieurs sessions.  Ce sont tous des sc√©narios dans lesquels les √©tats du composant pour le stockage des donn√©es ne peuvent pas √™tre appliqu√©s.  Certes, cela est toujours possible, mais uniquement si le cr√©ateur de l'application √©crit, sur la base de l'API React, sa propre biblioth√®que de gestion de l'√©tat.  C'est beaucoup plus difficile √† faire que d'utiliser simplement Redux. <br><br>  L'API React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suspense</a> , √† l'avenir, peut √™tre utile lors du stockage de donn√©es dans un √©tat et de leur chargement √† partir de celui-ci.  Nous devons attendre sa sortie et voir s'il peut remplacer les mod√®les de sauvegarde et de chargement des donn√©es Redux.  Redux nous permet de s√©parer clairement les effets secondaires du reste de la logique des composants, alors que nous n'avons pas besoin de travailler avec les services d'E / S d'une mani√®re sp√©ciale.  (La raison pour laquelle je pr√©f√®re la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">redux-saga</a> au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">middleware redux-thunk</a> est l'isolation des effets).  Afin de concurrencer Redux dans ce sc√©nario, l'API React devra fournir une isolation d'effet. <br><br><h2>  <font color="#3AC1EF">Redux est l'architecture</font> </h2><br>  Redux est bien plus (et souvent beaucoup moins) qu'une biblioth√®que de gestion d'√©tat.  Il s'agit √©galement d'un sous-ensemble de l'architecture <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flux</a> , qui d√©finit de mani√®re beaucoup plus stricte la mani√®re dont les changements d'√©tat sont mis en ≈ìuvre.  En savoir plus sur l'architecture Redux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  J'utilise souvent des r√©ducteurs cr√©√©s dans le style Redux dans les cas o√π j'ai besoin de maintenir l'√©tat complexe du composant, mais je n'ai pas besoin d'utiliser la biblioth√®que Redux.  J'utilise √©galement des actions cr√©√©es dans l'esprit de Redux (et m√™me des outils Redux comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autodux</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">redux-saga</a> ) pour envoyer des actions aux applications Node.js.  Cependant, je n'importe m√™me pas Redux dans de telles applications. <br><br>  Le projet Redux a toujours √©t√© plus une architecture et un ensemble d'accords volontaires qu'une biblioth√®que.  En fait, l'impl√©mentation de base de Redux peut √™tre pr√©sent√©e litt√©ralement en quelques dizaines de lignes de code. <br><br>  Cela se r√©v√©lera √™tre une bonne nouvelle pour ceux qui souhaitent utiliser plus souvent l'√©tat local des composants avec des crochets et ne pas tout lier √† Redux. <br><br>  React prend en charge le crochet <code>useReducer</code> , qui peut fonctionner avec les r√©ducteurs de style Redux.  C'est bon pour impl√©menter une logique non triviale de travail avec l'√©tat, pour travailler avec des fragments d'√©tat d√©pendants, etc.  Si vous rencontrez un probl√®me pour lequel l'√©tat temporaire d'un composant individuel convient, vous pouvez utiliser l'architecture Redux pour travailler avec cet √©tat, mais au lieu de la biblioth√®que Redux, vous pouvez utiliser le hook <code>useReducer</code> pour g√©rer l'√©tat. <br><br>  Si plus tard, vous devez √©tablir un stockage permanent des donn√©es que vous ne stockiez que temporairement, alors vous serez pr√™t √† 90% pour un tel changement.  Il vous suffit de connecter le composant au r√©f√©rentiel Redux et d'y ajouter le r√©ducteur correspondant. <br><br><h2>  <font color="#3AC1EF">Q &amp; A</font> </h2><br><h3>  <font color="#3AC1EF"> Le d√©terminisme est-il rompu si Redux ne g√®re pas toutes les donn√©es d'application?</font> </h3><br>  Non, ce n'est pas cass√©.  En fait, l'utilisation de Redux ne rend pas un projet d√©terministe.  Mais les accords le sont.  Si vous voulez que votre √©tat Redux soit d√©terministe, utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des fonctions pures</a> .  La m√™me chose s'applique aux situations dans lesquelles il est n√©cessaire que l'√©tat temporaire des composants locaux soit d√©termin√©. <br><br><h3>  <font color="#3AC1EF">‚ñç La biblioth√®que Redux doit-elle jouer le r√¥le d'une source unique de donn√©es fiables?</font> </h3><br>  Le principe d'une source unique de donn√©es fiables n'indique pas qu'il est n√©cessaire que toutes les donn√©es incluses dans l'√©tat de l'application soient stock√©es en un seul endroit.  La signification de ce principe est que chaque fragment de l'√âtat ne devrait avoir qu'une seule source de donn√©es fiables.  En cons√©quence, nous pouvons avoir de nombreux fragments d'√©tat, chacun ayant sa propre source de donn√©es fiables. <br><br>  Cela signifie que le programmeur peut d√©cider ce qui est transf√©r√© √† Redux et ce qui est transf√©r√© √† l'√©tat des composants.  Les donn√©es d√©terminant l'√©tat peuvent √©galement provenir d'autres sources.  Par exemple, √† partir d'une API de navigateur qui vous permet de travailler avec des informations sur l'adresse de la page que vous consultez. <br><br>  Redux est un excellent outil pour prendre en charge une seule source de donn√©es fiables pour l'√©tat d'une application.  Mais si l'√©tat du composant est localis√© et utilis√© exclusivement au sein de ce composant, alors, par d√©finition, cet √©tat poss√®de d√©j√† une source unique de donn√©es fiables - l'√©tat du composant React. <br><br>  Si vous mettez des donn√©es dans l'√©tat Redux, vous devez toujours lire ces donn√©es dans l'√©tat Redux.  Pour tout ce qui se trouve dans le r√©f√©rentiel Redux, ce r√©f√©rentiel doit √™tre la seule source de donn√©es fiables. <br><br>  Mettre tout dans un √©tat Redux, si n√©cessaire, est parfaitement normal.  Cela affectera peut-√™tre les performances si vous utilisez des fragments d'√©tat qui doivent √™tre mis √† jour fr√©quemment, ou si vous parlez de stocker l'√©tat d'un composant dans lequel des fragments d'√©tat d√©pendants sont largement utilis√©s.  Vous ne devez pas vous soucier des performances tant qu'il n'y a pas de probl√®mes de performances.  Mais si vous √™tes pr√©occup√© par le probl√®me de performances, essayez les deux fa√ßons de travailler avec l'√âtat et √©valuez leur impact sur les performances.  Profilez votre projet et souvenez-vous du mod√®le de performance RAIL. <br><br><h3>  <font color="#3AC1EF">‚ñç Dois-je utiliser la fonction de connexion de react-redux, ou est-il pr√©f√©rable d'utiliser des crochets?</font> </h3><br>  Cela d√©pend de beaucoup.  La fonction de <code>connect</code> cr√©e un composant d'ordre sup√©rieur adapt√© √† une utilisation r√©p√©t√©e et les crochets sont optimis√©s pour l'int√©gration avec un seul composant. <br><br>  Dois-je connecter les m√™mes propri√©t√©s √† diff√©rents composants?  Si oui, utilisez <code>connect</code> .  Sinon, je pr√©f√©rerais choisir des crochets.  Par exemple, imaginez que vous disposez d'un composant charg√© d'autoriser les autorisations pour les actions de l'utilisateur: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RequiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./requires-permission-component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { userHasPermission } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../features/user-profile/user-profile-reducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> curry <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/curry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> requiresPermission = curry(  <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NotPermittedComponent, { permission }, PermittedComponent</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({      NotPermittedComponent,      PermittedComponent,      <span class="hljs-attr"><span class="hljs-attr">isPermitted</span></span>: userHasPermission(state, permission),    });    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connect(mapStateToProps)(RequiresPermission);  }, ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> requiresPermission;</code> </pre> <br>  Maintenant, si un administrateur travaille intensivement avec l'application, dont toutes les actions n√©cessitent une autorisation sp√©ciale, vous pouvez cr√©er un composant d'ordre sup√©rieur qui combine toutes ces autorisations avec toutes les fonctionnalit√©s de bout en bout n√©cessaires: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NextError <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'next/error'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../requires-permission'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withFeatures <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-features'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withAuth <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-auth'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withEnv <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-env'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-loader'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-layout'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose(  withEnv,  withAuth,  withLoader,  withLayout(),  withFeatures,  requiresPermission(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;NextError statusCode={<span class="hljs-number"><span class="hljs-number">404</span></span>} /&gt;, {    <span class="hljs-attr"><span class="hljs-attr">permission</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>,  }), );</code> </pre> <br>  Voici comment l'utiliser: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> adminPage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../HOCs/admin-page'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AdminIndex <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../features/admin-index/admin-index-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> adminPage(AdminIndex);</code> </pre> <br>  L'API de composant d'ordre sup√©rieur est pratique pour cette t√¢che.  Il vous permet de le r√©soudre plus succinctement, en utilisant moins de code qu'en utilisant des hooks.  Mais pour utiliser la fonction <code>connect</code> , vous devez vous rappeler qu'elle prend <code>mapStateToProps</code> comme premier argument et <code>mapStateToProps</code> comme second.  Il ne faut pas oublier que cette fonction peut prendre des fonctions ou des litt√©raux d'objet.  Vous devez savoir en quoi les diff√©rentes utilisations de <code>connect</code> diff√®rent, et qu'il s'agit d'une fonction curry, mais son curry n'est pas effectu√© automatiquement. <br><br>  En d'autres termes, je peux dire que je crois que pendant le d√©veloppement de <code>connect</code> beaucoup de travail a √©t√© fait dans le sens de la concision du code, mais le code r√©sultant n'est ni particuli√®rement lisible, ni particuli√®rement pratique.  Si je n'ai pas besoin de travailler avec plusieurs composants, je pr√©f√©rerai volontiers l'API de <code>connect</code> peu pratique √† une API de <code>connect</code> beaucoup plus pratique, m√™me si cela entra√Ænera une augmentation de la quantit√© de code. <br><br><h3>  <font color="#3AC1EF">‚ñç Si un singleton est consid√©r√© comme un anti-pattern et que Redux est un singleton, cela signifie-t-il que Redux est un anti-pattern?</font> </h3><br>  Non, non.  L'utilisation d'un singleton dans le code fait allusion √† la qualit√© douteuse de ce code, indiquant la pr√©sence d'un √©tat mutable partag√© en lui.  C'est un v√©ritable anti-pattern.  Redux, en revanche, emp√™che la mutation de l'√©tat partag√© par encapsulation (vous ne devez pas modifier l'√©tat de l'application directement, en dehors des r√©ducteurs; Redux r√©sout le probl√®me de changement d'√©tat) et en envoyant des messages (seul l'objet d'√©v√©nement envoy√© peut provoquer un changement d'√©tat). <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Redux remplace-t-il les crochets React?  Les crochets sont excellents, mais ils ne remplacent pas Redux. <br><br>  Nous esp√©rons que ce mat√©riel vous aidera √† choisir un mod√®le de gestion d'√©tat pour vos projets React. <br><br>  <b>Chers lecteurs!</b>  Avez-vous rencontr√© des situations dans lesquelles les crochets React peuvent remplacer Redux? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464293/">https://habr.com/ru/post/fr464293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464283/index.html">Applications pour les livres √©lectroniques sur le syst√®me d'exploitation Android. Partie 3. Dictionnaires et notes</a></li>
<li><a href="../fr464285/index.html">Mettre √† jour automatiquement la photo de profil de Vkontakte</a></li>
<li><a href="../fr464287/index.html">Le passage de la machine de laboratoire pour le pentest "Hackthebox - Friendzone"</a></li>
<li><a href="../fr464289/index.html">Comment √©crire des packages Go</a></li>
<li><a href="../fr464291/index.html">Les 10 langages de programmation les plus influents des 50 derni√®res ann√©es et leurs cr√©ateurs</a></li>
<li><a href="../fr464295/index.html">Exemples d'utilisation de nouvelles fonctionnalit√©s JavaScript</a></li>
<li><a href="../fr464299/index.html">0, 0, 1, 0, 2, 0, 2, 2, 1, 6, 0, 5, 0, 2, 6, 5, 4, 0, 5, 3, 0, 3, 2, 9, 0, 4, 9, 3, 6, 14, 0, 6, 3, 5, 15, 0, 5, 3, 5 ...</a></li>
<li><a href="../fr464303/index.html">Donn√©es de s√©ries chronologiques dans un SGBD relationnel. Extensions TimescaleDB et PipelineDB pour PostgreSQL</a></li>
<li><a href="../fr464305/index.html">Petit, oui. D√©ballage du p√©tard microvirtuel</a></li>
<li><a href="../fr464307/index.html">Test d'int√©gration de microservices sur Scala</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>