<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ปโ๐ฌ ๐ ๐ ุชูููู ุฎุงุฑุฌ ุงูุฐุงูุฑุฉ ุงููุงุชู ุนูู ููููุณ ู PostgreSQL ๐ ๐พ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏ ุฅููุงู ุชุดุบูู ุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุบูุฑ ูุชููุน ุนูู ูุธุงู Linux ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุนุซูุฑ ุนูู ุงูุณุจุจ. ูุฏ ูููู ููุงู ุนุฏุฉ ุฃุณุจุงุจ. ุนูู ุณุจูู ุงููุซุงู ุ SIGSEGV...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููู ุฎุงุฑุฌ ุงูุฐุงูุฑุฉ ุงููุงุชู ุนูู ููููุณ ู PostgreSQL</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/464245/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xn/ip/86/xnip86u-h8mejjpjkpvpaun7emc.png"></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุฅููุงู ุชุดุบูู ุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุบูุฑ ูุชููุน ุนูู ูุธุงู Linux ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุนุซูุฑ ุนูู ุงูุณุจุจ.  ูุฏ ูููู ููุงู ุนุฏุฉ ุฃุณุจุงุจ.  ุนูู ุณุจูู ุงููุซุงู ุ <strong>SIGSEGV</strong> - ุชุนุทู ุจุณุจุจ ุฎุทุฃ ูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ.  ููู ูุฐุง ูุงุฏุฑ.  ูู ุฃูุซุฑ ุงูุฃุญูุงู ุ ุชููุฏ ูุณุงุญุฉ ุงููุฑุต ุฃู ุงูุฐุงูุฑุฉ.  ูู ุญุงูุฉ ููุงุฏ ูุณุงุญุฉ ุงููุฑุต ุ ุชุชูุซู ุฅุญุฏู ุทุฑู ุงูุฎุฑูุฌ ูู ุชุญุฑูุฑ ุงููุณุงุญุฉ ูุฅุนุงุฏุฉ ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><h3 id="out-of-memory-killer" style=";text-align:right;direction:rtl">  ูุงุชู ุฎุงุฑุฌ ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูููุฏ ุงูุฎุงุฏู ุฃู ุงูุนูููุฉ ูู ุงูุฐุงูุฑุฉ ุ ููุฏู Linux ุญููู: ุชุนุทู ุงููุธุงู ุจุฃูููู ุฃู ุฅููุงุก ุงูุนูููุฉ (ุงูุชุทุจูู) ุงูุชู ุชุณุชูุนุจ ุงูุฐุงูุฑุฉ.  ูู ุงูุฃูุถู ุ ุจุงูุทุจุน ุ ุฅููุงู ุงูุนูููุฉ ูุญูุธ ูุธุงู ุงูุชุดุบูู ูู ุงูุฅููุงุก ุบูุฑ ุงูุทุจูุนู.  ุจุงุฎุชุตุงุฑ ุ Out-Of-Memory Killer ูู ุงูุนูููุฉ ุงูุชู ุชููู ุฃุญุฏ ุงูุชุทุจููุงุช ูุฅููุงุฐ ุงูููุงุฉ ูู ุงูุชุนุทู.  ุงูู ูุถุญู ุงูุชุทุจูู ููุญูุงุธ ุนูู ูุธุงู ุงูุชุดุบูู ููุฏ ุงูุชุดุบูู.  ุฏุนููุง ุฃููุงู ููุงูุด ููููุฉ ุนูู OOM ูููููุฉ ุงูุชุญูู ููู ุ ุซู ูุฑู ููู ููุฑุฑ OOM Killer ุงูุชุทุจูู ุงูุฐู ุณูุชู ุฅููุงุฆู. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุงูููุงู ุงูุฑุฆูุณูุฉ ููุธุงู Linux ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ููุนูููุงุช ุนูุฏูุง ูุทูุจูููุง.  ุนุงุฏุฉู ูุง ุชุทูุจ ุงูุนูููุฉ ุฃู ุงูุชุทุจูู ุงูุฐุงูุฑุฉ ูู ูุธุงู ุงูุชุดุบูู ุ ููููู ุฃููุณูู ูุง ูุณุชุฎุฏููููุง ุจุงููุงูู.  ุฅุฐุง ูุงู ูุธุงู ุงูุชุดุบูู ุณูุตุฏุฑ ุฐุงูุฑุฉ ููู ูู ูุทูุจูุง ุ ูููู ูุง ูุนุชุฒู ุงุณุชุฎุฏุงููุง ุ ูุณููุชูู ุงูุฃูุฑ ูุฑูุจูุง ุ ูุณุชูุดู ุงูุฐุงูุฑุฉ.  ูุชุฌูุจ ุฐูู ุ ูุญุชูุธ ูุธุงู ุงูุชุดุบูู ุจุฐุงูุฑุฉ ููุฐู ุงูุนูููุฉ ุ ูููู ูุง ูุตุฏุฑูุง ูุนูููุง.  ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ููุท ุนูุฏูุง ุชููู ุงูุนูููุฉ ุณุชุณุชุฎุฏููุง ุญููุง.  ูุญุฏุซ ุฃู ูุธุงู ุงูุชุดุบูู ูุง ููุชูู ุฐุงูุฑุฉ ูุฌุงููุฉ ุ ููููู ูุนูู ุงูุฐุงูุฑุฉ ููุฐู ุงูุนูููุฉ ุ ูุนูุฏูุง ุชุญุชุงุฌ ุงูุนูููุฉ ุฅูููุง ุ ูุฎุตุตูุง ูุธุงู ุงูุชุดุบูู ุฅู ุฃููู.  ุงูุฌุงูุจ ุงูุณูุจู ูู ุฃูู ูู ุจุนุถ ุงูุฃุญูุงู ูุญุชูุธ ูุธุงู ุงูุชุดุบูู ุจุงูุฐุงูุฑุฉ ุ ูููู ูู ุงูููุช ุงูููุงุณุจ ูุง ุชูุฌุฏ ุฐุงูุฑุฉ ุฎุงููุฉ ุ ููุชุนุทู ุงููุธุงู.  ุชูุนุจ OOM ุฏูุฑูุง ููููุง ูู ูุฐุง ุงูุณููุงุฑูู ูุชููู ุงูุนูููุงุช ูููุน ููุงุฉ ุงูููุน.  ุนูุฏูุง ูุชู ุฅููุงุก ุนูููุฉ PostgreSQL ุจุงูููุฉ ุ ุชุธูุฑ ุฑุณุงูุฉ ูู ุงูุณุฌู: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">Out of Memory: Killed process 12345 (postgres).</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ุงููููู ูู ุงูุฐุงูุฑุฉ ูู ุงููุธุงู ููุงู ูู ุงููุณุชุญูู <code>out_of_memory</code> ุ <code>out_of_memory</code> ุงูุฏุงูุฉ <code>out_of_memory</code> .  ูู ูุฐู ุงููุฑุญูุฉ ุ ูู ูุชุจู ุณูู ุดูุก ูุงุญุฏ - ูุฅููุงู ุนูููุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ.  ูู ูุฌุจ ุนูู OOM-killer ุฅููุงุก ุงูุนูููุฉ ููุฑูุง ุฃู ูููููู ุงูุงูุชุธุงุฑุ  ูู ุงููุงุถุญ ุ ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก out_of_memory ุ ูููู ูุฐุง ุจุณุจุจ ุงูุชุธุงุฑ ุนูููุฉ ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ุฃู ุชุจุฏูู ุงูุตูุญุฉ ุฅูู ุงููุฑุต.  ูุฐูู ุ ูุฌุจ ุนูู ูุงุชู OOM ุฅุฌุฑุงุก ุนูููุงุช ุงููุญุต ุฃููุงู ุ ูุจูุงุกู ุนููู ุ ููุฑุฑ ุฃูู ููุจุบู ุฅููุงู ุงูุนูููุฉ.  ุฅุฐุง ุฃุนุทุช ูู ุนูููุงุช ุงูุชุญูู ุฃุฏูุงู ูุชูุฌุฉ ุฅูุฌุงุจูุฉ ุ ูุณูู ุชููู OOM ุจุฅููุงุก ุงูุนูููุฉ. </p><br><h3 id="vybor-processa" style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ ุงูุนูููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ููุงุฏ ุงูุฐุงูุฑุฉ ุ ูุชู <code>out_of_memory()</code> ุงูุฏุงูุฉ <code>out_of_memory()</code> .  ูุญุชูู ุนูู ุฏุงูุฉ <code>select_bad_process()</code> ุ ูุงูุชู ุชุชููู ุชูุฏูุฑูุง ูู ุฏุงูุฉ <code>badness()</code> .  ุชูุฒูุน ุฃูุซุฑ ุนูููุฉ "ุณูุฆุฉ".  ุชุญุฏุฏ ุงูุฏุงูุฉ <code>badness()</code> ุนูููุฉ ููููุง ูููุงุนุฏ ูุนููุฉ. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุงูููุงุฉ ุฅูู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฐุงูุฑุฉ ูููุณู. </li><li style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฅูู ุชุญุฑูุฑ ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ูุง ุญุงุฌุฉ ูุฅููุงุก ุงูุนูููุงุช ุงูุชู ุชุณุชุฎุฏู ุงููููู ูู ุงูุฐุงูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฅูู ุฅููุงู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุนูููุงุช. </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฑุฒููุงุช ูุนูุฏุฉ ุชุฒูุฏ ูู ูุฑุต ุงูุฅููุงู ูุชูู ุงูุนูููุงุช ุงูุชู ูุฑูุฏ ุงููุณุชุฎุฏู ููุณู ุฅููุงููุง. </li></ol><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฅููุงู ูู ูุฐู ุงููุญูุตุงุช ุ ุชูุญุต OOM ุงูุชูุฏูุฑ ( <code>oom_score</code> ).  ุชููู OOM ุจุชุนููู <code>oom_score</code> ููู ุนูููุฉ ุ ุซู ุชุถุงุนู ูุฐู ุงููููุฉ ุจููุฏุงุฑ ุงูุฐุงูุฑุฉ.  ูู ุงููุฑุฌุญ ุฃู ุชุตุจุญ ุงูุนูููุงุช ุฐุงุช ุงูููู ุงูุฃุนูู ุถุญุงูุง OOM Killer.  ุงูุนูููุงุช ุงููุฑุชุจุทุฉ ุจุงููุณุชุฎุฏู ุงููููุฒ ููุง ุชุตููู ุฃูู ูุฃูู ุนุฑุถุฉ ููุฑุถ ุงูุฅููุงุก. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">postgres=# SELECT pg_backend_pid(); pg_backend_pid ----------------    3813 (1 row)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุฑู ุนูููุฉ Postgres ูู 3813 ุ ูุฐูู ูู ุบูุงู ุขุฎุฑ ุ ููููู ุงูุญุตูู ุนูู ุชูุฏูุฑ ุจุงุณุชุฎุฏุงู ูุฐู <code>oom_score</code> kernel: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vagrant@vagrant:~$ sudo cat /proc/3813/oom_score 2</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุฅููุงู OOM-Killer ุงูุนูููุฉ ุนูู ุงูุฅุทูุงู ุ ูููุงู ูุนููุฉ kernel ุฃุฎุฑู: <code>oom_score_adj</code> .  ุฃุถู ูููุฉ ุณูุจูุฉ ูุจูุฑุฉ ูุชูููู ูุฑุต ุฅุชูุงู ุงูุนูููุฉ ุงูุชู ุชุญุจูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sudo echo -100 &gt; /proc/3813/oom_score_adj</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุนููู ุงููููุฉ <code>oom_score_adj</code> ุ ูู ุจุชุนููู OOMScoreAdjust ูู ูุชูุฉ ุงูุฎุฏูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[Service] OOMScoreAdjust=-1000</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃู ุงุณุชุฎุฏู <code>oomprotect</code> ูู <code>rcctl</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">rcctl set &lt;i&gt;servicename&lt;/i&gt; oomprotect -1000</code> </pre> <br><h3 id="prinuditelnoe-zavershenie-processa" style=";text-align:right;direction:rtl">  ุฅููุงุก ุงูุนูููุฉ ุงููุณุฑู </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชุญุฏูุฏ ุนูููุฉ ุฃู ุฃูุซุฑ ุจุงููุนู ุ ูููู OOM-Killer ุจุงุณุชุฏุนุงุก ูุธููุฉ <code>oom_kill_task()</code> .  ูุฐู ุงููุธููุฉ ุชุฑุณู ุฅุดุงุฑุฉ ุฅููุงุก ููุฐู ุงูุนูููุฉ.  ุฅุฐุง ูู ุชูู ููุงู ุฐุงูุฑุฉ ูุงููุฉ ุ ูุฅู <code>oom_kill()</code> ูุณุชุฏุนู ูุฐู ุงููุธููุฉ ูุฅุฑุณุงู ุฅุดุงุฑุฉ SIGKILL ุฅูู ุงูุนูููุฉ.  ุชุชู ูุชุงุจุฉ ุฑุณุงูุฉ ุฅูู ุณุฌู kernel. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Out of Memory: Killed process [pid] [name].</code> </pre> <br><h3 id="kak-kontrolirovat-oom-killer" style=";text-align:right;direction:rtl">  ููููุฉ ุงูุณูุทุฑุฉ ุนูู OOM- ุงููุงุชู </h3><br><p style=";text-align:right;direction:rtl">  ุนูู ูุธุงู Linux ุ ููููู ุชูููู ุฃู ุชุนุทูู OOM-Killer (ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุฃุฎูุฑ ุบูุฑ ูุณุชุญุณู).  ูุชูููู ูุชุนุทูู ุ ุงุณุชุฎุฏู ุฎูุงุฑ <code>vm.oom-kill</code> .  ูุชูููู OOM-Killer ูู ููุช ุงูุชุดุบูู ุ ูู ุจุชุดุบูู ุงูุฃูุฑ <code>sysctl</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sudo -s sysctl -w vm.oom-kill = 1</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุนุทูู OOM-Killer ุ ุญุฏุฏ ุงููููุฉ 0 ูู ููุณ ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sudo -s sysctl -w vm.oom-kill = 0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุชู ุญูุธ ูุชูุฌุฉ ูุฐุง ุงูุฃูุฑ ุฅูู ุงูุฃุจุฏ ุ ูููู ุญุชู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุฃูู.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุฒูุฏ ูู ุงูุซุจุงุช ุ ูุฃุถู ูุฐุง ุงูุณุทุฑ ุฅูู ููู <code>/etc/sysctl.conf</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">echo vm.oom-kill = 1 &gt;&gt;/etc/sysctl.conf</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุฃุฎุฑู ูุชูููู ูุชุนุทูู ูู ูุชุงุจุฉ ูุชุบูุฑ <code>panic_on_oom</code> .  ูููู ุฏุงุฆููุง ุงูุชุญูู ูู ุงููููุฉ <code>/proc</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cat /proc/sys/vm/panic_on_oom 0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชุนููู ุงููููุฉ ุนูู 0 ุ ูุนูุฏูุง ุชููุฏ ุงูุฐุงูุฑุฉ ุ ููู ูุญุฏุซ ุฐุนุฑ ูู kernel. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ echo 0 &gt; /proc/sys/vm/panic_on_oom</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชุนููู ุงููููุฉ ุนูู 1 ุ ูุนูุฏูุง ุชููุฏ ุงูุฐุงูุฑุฉ ุ ุณูุญุฏุซ ุฐุนุฑ kernel. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">echo 1 &gt; /proc/sys/vm/panic_on_oom</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูููู ุชุดุบูู OOM-Killer ูุฅููุงู ุชุดุบููู ููุท.  ููุฏ ุณุจู ุฃู ูููุง ุฃู Linux ููููู ุญุฌุฒ ุฐุงูุฑุฉ ุฃูุจุฑ ููุนูููุงุช ุฃูุซุฑ ูู ุฐูู ุ ููู ููุณ ุชุฎุตูุตูุง ูู ุงููุงูุน ุ ููุชู ุงูุชุญูู ูู ูุฐุง ุงูุณููู ุจูุงุณุทุฉ ูุนููุฉ kernel Linux.  ุงููุชุบูุฑ <code>vm.overcommit_memory</code> ูุณุคูู ุนู ูุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุชุญุฏูุฏ ุงูููู ุงูุชุงููุฉ ูุฐูู: </p><br><p style=";text-align:right;direction:rtl">  <strong>0:</strong> ุงูููุงุฉ ููุณูุง ุชูุฑุฑ ูุง ุฅุฐุง ููุช ุชุฑูุฏ ุญุฌุฒ ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ.  ูุฐู ูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู ูุนุธู ุฅุตุฏุงุฑุงุช Linux. <br>  <strong>1:</strong> ุณุชุญุชูุธ ุงูููุงุฉ ุฏุงุฆููุง ุจุฐุงูุฑุฉ ุฅุถุงููุฉ.  ูุฐุง ุฃูุฑ ูุญููู ุจุงููุฎุงุทุฑ ุ ูุฃู ุงูุฐุงูุฑุฉ ูููู ุฃู ุชูุชูู ุ ูุฃูู ุนูู ุงูุฃุฑุฌุญ ุ ุณุชุญุชุงุฌ ุงูุนูููุงุช ูู ููู ูุง ุฅูู ูุง ููุชุฑุถ ุฃู ุชููู. <br>  <strong>2:</strong> ูู ูุญุฌุฒ kernel ุฐุงูุฑุฉ ุฃูุซุฑ ูู ุงููุญุฏุฏ ูู ุงููุนููุฉ <code>overcommit_ratio</code> . </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุนููุฉ ุ ููููู ุชุญุฏูุฏ ุงููุณุจุฉ ุงููุฆููุฉ ููุฐุงูุฑุฉ ุงูุชู ูุณูุญ ุจูุง ุงูุชูุฑุงุฑ.  ุฅุฐุง ูู ููู ููุงู ูุณุงุญุฉ ูุฐูู ุ ูุง ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ุณูุชู ุฑูุถ ุงูุญุฌุฒ.  ูุฐุง ูู ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุฃูุงููุง ุงูููุตู ุจู ูู PostgreSQL.  ูุชุฃุซุฑ OOM-Killer ุจุนูุตุฑ ุขุฎุฑ - ููุฒุฉ ุงููุจุงุฏูุฉ ุ ูุงูุชู ูุชู ุงูุชุญูู ูููุง ุจูุงุณุทุฉ ูุชุบูุฑ <code>cat /proc/sys/vm/swappiness</code> .  ุชุฎุจุฑ ูุฐู ุงูููู ุงูููุงุฉ ุนู ููููุฉ ุงูุชุนุงูู ูุน ุงูุชุฑุญูู.  ูููุง ุฒุงุฏุช ุงููููุฉ ุ ูู ุงุญุชูุงู ููุงู OOM ุจุฅููุงุก ุงูุนูููุฉ ุ ูููู ุจุณุจุจ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ูุคุซุฑ ูุฐุง ุณูุจูุง ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุงูุนูุณ ุตุญูุญ - ูููุง ูุงูุช ุงููููุฉ ุฃุตุบุฑ ุ ุฒุงุฏ ุงุญุชูุงู ุชุฏุฎู OOM-Killer ุ ููู ุฃุฏุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃุนูู ุฃูุถูุง.  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู 60 ุ ูููู ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุฃููููุง ููุงุณุจุฉ ูู ุงูุฐุงูุฑุฉ ุ ููู ุงูุฃูุถู ุชุนููู ุงููููุฉ ุนูู 1. </p><br><h3 id="itogi" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูุง ุชุฎู ูู ุงููุงุชู ูู OOM-Killer.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุงููุงุชู ูููุฐ ูุธุงูู.  ุฅูู "ููุชู" ุฃุณูุฃ ุงูุนูููุงุช ููููุฐ ุงููุธุงู ูู ุงูุฅููุงุก ุบูุฑ ุงูุทุจูุนู.  ูุชุฌูุจ ุงูุงุถุทุฑุงุฑ ุฅูู ุงุณุชุฎุฏุงู OOM-Killer ูุฅููุงู PostgreSQL ุ ุงุถุจุท <code>vm.overcommit_memory</code> ุนูู 2. ูุฐุง ูุง ูุถูู ุฃู OOM-Killer ูุง ูุฌุจ ุฃู ุชุชุฏุฎู ุ ููููู ุณูููู ูู ุงุญุชูุงู ุฅููุงุก ุนูููุฉ PostgreSQL ุงููุณุฑูุฉ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464245/">https://habr.com/ru/post/ar464245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464225/index.html">ุฃูุฏุช ุงูุฑุงุญุฉ: ูุง ุชุนูููุงู ูู ุฎูุณ ุณููุงุช ูู ุงุณุชุฎุฏุงู ุงูุฃุฏุงุฉ</a></li>
<li><a href="../ar464227/index.html">ููู ูุนูุดูู ููุนูููู ูู ูุฑุงุณููุฏุงุฑ</a></li>
<li><a href="../ar464233/index.html">Chaos Constructions 2019 ูุงุฏู ...</a></li>
<li><a href="../ar464235/index.html">"Slurm" ูู ุงูุงุฏูุงู ููุบุงูุฉ. ููููุฉ ุชุญููู cabal ุฅูู ูุดุฑูุน ุนุงููู</a></li>
<li><a href="../ar464237/index.html">ุจุงุณูุงู ุชุงูุดููู: ููู ุชู ุชุนููู ุงูุฃุทูุงู ุงูุจุฑูุฌุฉ ูู ุงูุชุณุนูููุงุช ููุง ุงูุฎุทุฃ ูู ุฐูู</a></li>
<li><a href="../ar464249/index.html">ุงูุนูู ุนู ุจุนุฏ ูู ูุถุน ุงูุฏูุงู ุงููุงูู: ูู ุฃูู ุชุจุฏุฃ ุฅุฐุง ูู ุชูู ูุจูุฑ ุงูุณู</a></li>
<li><a href="../ar464253/index.html">ุงูุชููู ุนู ุงุณุชุฎุฏุงู ุงูุชุงุฑูุฎ</a></li>
<li><a href="../ar464255/index.html">NX JAVA meetup # 14: ุจุญุซ ูู ุงูุฃุฏุงุก ุนู ุงูููุชุฌุงุช ุ ูุฅูุฌุงุจูุงุช ูุณูุจูุงุช Spark ูู ุงูุญููู ุงููุงุฆูุฉ ุนูู Cassandra</a></li>
<li><a href="../ar464257/index.html">ููุฎุต UX: ุฅุนุงุฏุฉ ุงูุชุดุบูู</a></li>
<li><a href="../ar464259/index.html">ุงูุฃูุนุงุจ ุงูุณุญุงุจูุฉ: ุชูููู ูุจุงุดุฑ ูุฅููุงููุงุช ุฎุฏูุงุช ุงููุนุจ ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุดุฎุตูุฉ ุงูุถุนููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>