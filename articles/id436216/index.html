<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏻 ⛹️ 👨🏿‍🚀 Repositori Spring JPA di CUBA 👨🏿‍⚖️ 🔟 💆🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Topik artikel agak terfokus, tetapi mungkin bermanfaat bagi mereka yang mengembangkan gudang data mereka sendiri dan berpikir tentang integrasi dengan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Repositori Spring JPA di CUBA</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/436216/"><p><img src="https://habrastorage.org/webt/_8/cc/h0/_8cch0_nvkzgoi2u1vailg4oiio.png"></p><br><p>  <em>Topik artikel agak terfokus, tetapi mungkin bermanfaat bagi mereka yang mengembangkan gudang data mereka sendiri dan berpikir tentang integrasi dengan Kerangka Kerja Pegas.</em> </p><br><h3 id="predposylki">  Latar belakang </h3><br><p>  Pengembang biasanya tidak suka mengubah kebiasaan mereka (seringkali, kerangka kerja juga termasuk dalam daftar kebiasaan).  Ketika saya mulai bekerja dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CUBA</a> , saya tidak perlu belajar terlalu banyak hal baru, sangat mungkin untuk terlibat aktif dalam pekerjaan di proyek ini dengan segera.  Tetapi ada satu hal yang saya harus duduk lebih lama - itu bekerja dengan data. </p><a name="habracut"></a><br><p>  Spring memiliki beberapa perpustakaan yang dapat digunakan untuk bekerja dengan database, salah satu yang paling populer adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">spring-data-jpa</a> , yang dalam banyak kasus memungkinkan Anda untuk tidak menulis SQL atau JPQL.  Anda hanya perlu membuat antarmuka khusus dengan metode yang dinamai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan cara khusus</a> dan Spring akan menghasilkan dan melakukan sisa pekerjaan untuk Anda dalam mengambil data dari database dan membuat instance objek entitas. </p><br><p>  Di bawah ini adalah antarmuka, dengan metode untuk menghitung pelanggan dengan nama belakang yang diberikan. </p><br><pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Long</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span></span>; }</code> </pre> <br><p>  Antarmuka ini dapat digunakan langsung di layanan Spring tanpa membuat implementasi apa pun, yang sangat mempercepat pekerjaan. </p><br><p>  CUBA memiliki API untuk bekerja dengan data, yang mencakup berbagai fungsi seperti entitas yang dimuat sebagian atau sistem keamanan yang rumit dengan kontrol akses ke atribut entitas dan baris dalam tabel database.  Tetapi API ini sedikit berbeda dari yang digunakan pengembang di Spring Data atau JPA / Hibernate. </p><br><p>  Mengapa tidak ada repositori JPA di CUBA dan bisakah saya menambahkannya? </p><br><h3 id="rabota-s-dannymi-v-cuba">  Bekerja dengan data di CUBA </h3><br><p>  Di CUBA, ada tiga kelas utama yang bertanggung jawab untuk bekerja dengan data: DataStore, EntityManager, dan DataManager. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DataStore</a> adalah abstraksi tingkat tinggi untuk penyimpanan data apa pun: basis data, sistem file, atau penyimpanan cloud.  API ini memungkinkan Anda untuk melakukan operasi dasar pada data.  Dalam kebanyakan kasus, pengembang tidak perlu bekerja secara langsung dengan DataStore, kecuali ketika mengembangkan repositori mereka sendiri, atau jika beberapa akses yang sangat khusus ke data dalam repositori diperlukan. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">EntityManager</a> adalah salinan dari EntityManager JPA yang terkenal.  Tidak seperti implementasi standar, ia memiliki metode khusus untuk bekerja dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">representasi CUBA</a> , untuk penghapusan data "lunak" (logis), dan juga untuk bekerja dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kueri di CUBA</a> .  Seperti dalam kasus DataStore, dalam 90% proyek, pengembang biasa tidak akan harus berurusan dengan EntityManager, kecuali jika diperlukan untuk memenuhi beberapa permintaan dengan melewati sistem pembatasan akses data. </p><br><p>  DataManager adalah kelas utama untuk bekerja dengan data dalam CUBA.  Menyediakan API untuk manipulasi data dan mendukung kontrol akses data, termasuk akses ke atribut dan batasan level baris.  DataManager secara implisit memodifikasi semua kueri yang berjalan di CUBA.  Misalnya, itu bisa mengecualikan bidang tabel yang pengguna saat ini tidak memiliki akses ke dari pernyataan <code>select</code> dan menambahkan kondisi untuk mengecualikan baris tabel dari seleksi.  Dan ini membuat hidup lebih mudah bagi pengembang, karena Anda tidak perlu memikirkan cara menulis kueri dengan benar dengan mempertimbangkan hak akses akun, CUBA melakukan ini secara otomatis berdasarkan data dari tabel layanan basis data. </p><br><p>  Di bawah ini adalah diagram interaksi komponen CUBA yang terlibat dalam pengambilan data melalui DataManager. </p><br><p><img src="https://habrastorage.org/webt/vy/e7/e1/vye7e1axlvkzuky3raw6an4ttl0.png"></p><br><p>  Menggunakan DataManager, Anda relatif dapat dengan mudah memuat entitas dan seluruh hierarki entitas menggunakan tampilan CUBA.  Dalam bentuknya yang paling sederhana, kueri terlihat seperti ini: </p><br><pre> <code class="java hljs">dataManager.load(Customer.class).list();</code> </pre> <br><p>  Seperti yang telah disebutkan, DataManager akan memfilter catatan "dihapus secara logis", menghapus atribut terlarang dari permintaan, dan juga membuka dan menutup transaksi secara otomatis. </p><br><p>  Tapi, ketika datang ke pertanyaan yang lebih rumit, Anda harus menulis JPQL di CUBA. </p><br><p>  Misalnya, jika Anda perlu menghitung pelanggan dengan nama belakang yang diberikan, seperti pada contoh dari bagian sebelumnya, maka Anda perlu menulis sesuatu seperti kode ini: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager .loadValue(<span class="hljs-string"><span class="hljs-string">"select count(c) from sample$Customer c where c.lastName = :lastName"</span></span>, Long.class) .parameter(<span class="hljs-string"><span class="hljs-string">"lastName"</span></span>, lastName) .one(); }</code> </pre> <br><p>  atau semacamnya: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span><span class="hljs-function"> </span></span>{ LoadContext&lt;Customer&gt; loadContext = LoadContext.create(Customer.class); loadContext .setQueryString(<span class="hljs-string"><span class="hljs-string">"select c from sample$Customer c where c.lastName = :lastName"</span></span>) .setParameter(<span class="hljs-string"><span class="hljs-string">"lastName"</span></span>, lastName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager.getCount(loadContext); }</code> </pre> <br><p>  Di CUBA API, Anda harus meneruskan ekspresi JPQL sebagai string (Kriteria API belum didukung), ini adalah cara yang dapat dibaca dan dimengerti untuk membuat kueri, tetapi men-debug kueri semacam itu dapat membawa banyak kesenangan.  Selain itu, string JPQL tidak diverifikasi oleh kompiler atau Spring Framework selama inisialisasi wadah, yang mengarah ke kesalahan hanya di Runtime. </p><br><p>  Bandingkan ini dengan Spring JPA: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Long</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span></span>; }</code> </pre> <br><p>  Kode ini tiga kali lebih pendek, dan tidak ada baris.  Selain itu, nama metode <code>countByLastName</code> diperiksa selama inisialisasi wadah Spring.  Jika ada kesalahan ketik dan Anda menulis <code>countByLastNsme</code> , maka aplikasi akan macet dengan kesalahan selama penerapan: </p><br><pre> <code class="plaintext hljs">Caused by: org.springframework.data.mapping.PropertyReferenceException: No property LastNsme found for type Customer!</code> </pre> <br><p>  CUBA dibangun di sekitar Spring Framework, jadi Anda bisa mencolokkan pegas-data-jpa di aplikasi yang ditulis menggunakan CUBA, tetapi ada masalah kecil - kontrol akses.  Implementasi Spring CrudRepository menggunakan EntityManager-nya.  Dengan demikian, semua kueri akan dilakukan melewati DataManager.  Dengan demikian, untuk menggunakan repositori JPA di CUBA, Anda perlu mengganti semua panggilan EntityManager dengan panggilan DataManager dan menambahkan dukungan untuk tampilan CUBA. </p><br><p>  Seseorang mungkin mengatakan bahwa pegas-data-jpa adalah kotak hitam yang tidak terkontrol dan selalu lebih baik untuk menulis JPQL murni atau bahkan SQL.  Ini adalah masalah abadi keseimbangan antara kenyamanan dan tingkat abstraksi.  Semua orang memilih metode yang dia sukai, tetapi untuk memiliki cara tambahan untuk bekerja dengan data di gudang tidak akan ada salahnya.  Dan bagi mereka yang membutuhkan lebih banyak kontrol, Spring <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memiliki cara untuk mendefinisikan permintaan mereka sendiri</a> untuk metode repositori JPA. </p><br><h2 id="realizaciya">  Implementasi </h2><br><p>  Repositori JPA diimplementasikan sebagai modul CUBA menggunakan pustaka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">spring-data-commons</a> .  Kami meninggalkan ide untuk memodifikasi pegas-data-jpa, karena jumlah pekerjaan akan jauh lebih banyak dibandingkan dengan menulis generator kueri kami sendiri.  Terutama karena spring-data-commons melakukan sebagian besar pekerjaan.  Misalnya, mem-parsing nama metode dan mengaitkan nama dengan kelas dan properti sepenuhnya dilakukan di pustaka ini.  Spring-data-commons berisi semua kelas dasar yang diperlukan untuk implementasi repositori-nya sendiri dan tidak membutuhkan banyak upaya untuk mengimplementasikannya.  Sebagai contoh, pustaka ini digunakan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">spring-data-mongodb</a> . </p><br><p>  Hal yang paling sulit adalah mengimplementasikan generasi JPQL secara akurat berdasarkan hirarki objek - hasil parsing nama metode.  Tapi, untungnya, tugas serupa sudah diterapkan di Apache Ignite, jadi kode diambil dari sana dan diadaptasi sedikit untuk menghasilkan JPQL, bukan SQL dan mendukung operator <code>delete</code> . </p><br><p>  Spring-data-commons menggunakan proxy untuk secara dinamis membuat implementasi antarmuka.  Ketika konteks aplikasi CUBA diinisialisasi, semua tautan ke antarmuka digantikan oleh tautan tempat proxy yang diterbitkan dalam konteks.  Ketika metode antarmuka dipanggil, itu dicegat oleh objek proxy yang sesuai.  Kemudian objek ini menghasilkan kueri JPQL dengan nama metode, menggantikan parameter dan mengirimkan kueri dengan parameter ke DataManager untuk dieksekusi.  Diagram berikut menunjukkan proses interaksi yang disederhanakan antara komponen-komponen utama modul. </p><br><p><img src="https://habrastorage.org/webt/zh/cd/1l/zhcd1lasrsrz4vwcedkgtnsiz2m.png"></p><br><h2 id="ispolzovanie-repozitoriev-v-cuba">  Menggunakan Gudang di CUBA </h2><br><p>  Untuk menggunakan repositori di CUBA, Anda hanya perlu menghubungkan modul di file build proyek: </p><br><pre> <code class="plaintext hljs"> appComponent("com.haulmont.addons.cuba.jpa.repositories:cuba-jpa-repositories-global:0.1-SNAPSHOT")</code> </pre> <br><p>  Anda dapat menggunakan konfigurasi XML untuk "mengaktifkan" repositori: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans:beans</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:beans</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/beans"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/context"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:repositories</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.cuba-platform.org/schema/data/jpa"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://www.cuba-platform.org/schema/data/jpa http://www.cuba-platform.org/schema/data/jpa/cuba-repositories.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Annotation-based beans --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context:component-scan</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base-package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.company.sample"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repositories:repositories</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base-package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.company.sample.core.repositories"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans:beans</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dan Anda dapat menggunakan anotasi: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableCubaRepositories</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Configuration here }</span></span></code> </pre> <br><p>  Setelah dukungan repositori diaktifkan, Anda dapat membuatnya dalam bentuk biasa, misalnya: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CubaJpaRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UUID</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;Customer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByNameIsIn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; names)</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@CubaView</span></span>(<span class="hljs-string"><span class="hljs-string">"_minimal"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@JpqlQuery</span></span>(<span class="hljs-string"><span class="hljs-string">"select c from sample$Customer c where c.name like concat(:name, '%')"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;Customer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByNameStartingWith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; }</code> </pre> <br><p>  Untuk setiap metode, Anda dapat menggunakan anotasi: </p><br><ul><li>  <code>@CubaView</code> - untuk mengatur tampilan CUBA agar digunakan dalam DataManager </li><li>  <code>@JpqlQuery</code> - untuk menentukan kueri JPQL yang akan dieksekusi, terlepas dari nama metode. </li></ul><br><p>  Modul ini digunakan dalam modul <code>global</code> kerangka CUBA, oleh karena itu, repositori dapat digunakan baik dalam modul <code>core</code> dan di <code>web</code> .  Satu-satunya hal yang perlu Anda ingat adalah mengaktifkan repositori di file konfigurasi kedua modul. </p><br><p>  Contoh menggunakan repositori di layanan CUBA: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span>(CustomerService.NAME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomerServiceBean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PersonService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CustomerRepository customerRepository; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Date&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCustomersBirthDatesByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> customerRepository.findByNameStartingWith(name) .stream().map(Customer::getBirthDate).collect(Collectors.toList()); } }</code> </pre> <br><h3 id="zaklyuchenie">  Kesimpulan </h3><br><p>  CUBA adalah kerangka kerja yang fleksibel.  Jika Anda ingin menambahkan sesuatu ke dalamnya, maka Anda tidak perlu memperbaiki sendiri kernel atau menunggu versi baru.  Saya harap modul ini membuat pengembangan CUBA lebih efisien dan lebih cepat.  Versi pertama modul tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> , diuji pada CUBA versi 6.10 <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id436216/">https://habr.com/ru/post/id436216/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id436202/index.html">Saya kehilangan kepercayaan dalam pengembangan, terbakar, tetapi alat kultus menyelamatkan saya</a></li>
<li><a href="../id436206/index.html">Bagaimana Menyatukan Seni Tanpa Susah payah dengan Java, JavaScript, dan Grafik atau Kisah di Baliknya Membuat Produk Teater Interaktif</a></li>
<li><a href="../id436208/index.html">Torrents baru tidak lagi muncul di Teluk Pirate</a></li>
<li><a href="../id436210/index.html">Biquaternions</a></li>
<li><a href="../id436212/index.html">Menerima faks gelombang pendek dengan PC Anda dan penerima di luar rak</a></li>
<li><a href="../id436218/index.html">Pemasaran Konten di Media Online Populer: 5 Kesalahan Startup yang Harus Dihindari</a></li>
<li><a href="../id436220/index.html">Cara penilaian bekerja di industri berbagi mobil. Bagian 2. Identifikasi driver yang agresif dalam 5 detik</a></li>
<li><a href="../id436224/index.html">Kami menulis bahasa pemrograman kami, bagian 4: Representasi struktur dan kelas, generasi pengalokasi</a></li>
<li><a href="../id436226/index.html">Panduan dan lembar contekan untuk Wireshark</a></li>
<li><a href="../id436228/index.html">Pengembangan perintah untuk meminta data dari database</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>