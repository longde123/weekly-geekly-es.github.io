<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÅâÔ∏è ‚úÖ üîÑ Travailler avec des tableaux dans bash ü§£ üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© üë∂üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les programmeurs utilisent r√©guli√®rement bash pour r√©soudre de nombreuses t√¢ches li√©es au d√©veloppement de logiciels. Dans le m√™me temps, les tableaux...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Travailler avec des tableaux dans bash</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/413725/">  Les programmeurs utilisent r√©guli√®rement bash pour r√©soudre de nombreuses t√¢ches li√©es au d√©veloppement de logiciels.  Dans le m√™me temps, les tableaux bash sont souvent consid√©r√©s comme l'une des fonctionnalit√©s les plus incompr√©hensibles de ce shell (probablement, les tableaux sont en deuxi√®me position derri√®re les expressions r√©guli√®res √† cet √©gard).  L'auteur du mat√©riel, dont nous publions la traduction aujourd'hui, invite tout le monde dans le monde merveilleux des tableaux bash qui, si vous vous habituez √† leur syntaxe inhabituelle, peut apporter de nombreux avantages. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efa/72d/7c7/efa72d7c779f3915863c44ac528143a2.jpg" alt="image"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Le vrai d√©fi que les tableaux bash sont utiles</font> </h2><br>  √âcrire sur bash est controvers√©.  Le fait est que les articles sur bash se transforment souvent en guides d'utilisation qui sont consacr√©s √† des histoires sur les fonctionnalit√©s syntaxiques des commandes en question.  Cet article est √©crit diff√©remment, nous esp√©rons que vous ne le trouverez pas dans le prochain "manuel d'utilisation". <br><br>  Compte tenu de ce qui pr√©c√®de, imaginez un sc√©nario r√©el pour l'utilisation de tableaux dans bash.  Supposons que vous soyez confront√© √† la t√¢che d'√©valuer et d'optimiser un utilitaire √† partir d'un nouvel ensemble interne d'outils utilis√©s dans votre entreprise.  Dans la premi√®re √©tape de cette √©tude, vous devez le tester avec diff√©rents ensembles de param√®tres.  Le test vise √† √©tudier le comportement d'un nouvel ensemble d'outils lorsqu'ils utilisent un nombre diff√©rent de threads.  Pour simplifier la pr√©sentation, nous supposons que la ¬´bo√Æte √† outils¬ª est une ¬´bo√Æte noire¬ª compil√©e √† partir du code C ++.  Lors de son utilisation, le seul param√®tre que nous pouvons influencer est le nombre de threads r√©serv√©s au traitement des donn√©es.  L'appel du syst√®me sous enqu√™te √† partir de la ligne de commande ressemble √† ceci: <br><br><pre><code class="hljs pgsql">./pipeline <span class="hljs-comment"><span class="hljs-comment">--threads 4</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Les bases</font> </h2><br>  Tout d'abord, nous d√©clarons un tableau contenant les valeurs du param√®tre <code>--threads</code> avec lequel nous voulons tester le syst√®me.  Ce tableau ressemble √† ceci: <br><br><pre> <code class="hljs lisp">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>)</code> </pre> <br>  Dans cet exemple, tous les √©l√©ments sont des nombres, mais en fait, dans les tableaux bash, vous pouvez stocker √† la fois des nombres et des cha√Ænes.  Par exemple, la d√©claration d'un tel tableau est tout √† fait acceptable: <br><br><pre> <code class="hljs lisp">myArray=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"three"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-string"><span class="hljs-string">"five"</span></span>)</code> </pre> <br>  Comme pour les autres variables bash, assurez-vous qu'il n'y a pas d'espace autour du signe <code>=</code> .  Sinon, bash consid√©rera le nom de la variable comme le nom du programme dont il a besoin pour ex√©cuter, et <code>=</code> son premier argument! <br><br>  Maintenant que nous avons initialis√© le tableau, extrayons-en quelques √©l√©ments.  Ici, vous pouvez remarquer, par exemple, que la <code>echo $allThreads</code> ne sortira que le premier √©l√©ment du tableau. <br><br>  Afin de comprendre les raisons de ce comportement, s'√©cartons un peu des tableaux et rappelons comment travailler avec des variables dans bash.  Prenons l'exemple suivant: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=<span class="hljs-string"><span class="hljs-string">"article"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Found 42 </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$type</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  Supposons que vous ayez une variable <code>$type</code> qui contient une cha√Æne qui repr√©sente un nom.  Apr√®s ce mot, ajoutez la lettre <code>s</code> .  Cependant, vous ne pouvez pas simplement ajouter cette lettre √† la fin du nom de la variable, car cela transformera la commande pour acc√©der √† la variable en <code>$types</code> , c'est-√†-dire que nous travaillerons avec une variable compl√®tement diff√©rente.  Dans cette situation, vous pouvez utiliser une construction comme <code>echo "Found 42 "$type"s"</code> .  Mais il est pr√©f√©rable de r√©soudre ce probl√®me en utilisant des accolades: <code>echo "Found 42 ${type}s"</code> , ce qui nous permet de dire √† bash o√π le nom de variable commence et se termine (fait int√©ressant, la m√™me syntaxe est utilis√©e dans JavaScript ES6 pour incorporer des variables dans les expressions dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cha√Ænes de mod√®le</a> ). <br><br>  Revenons maintenant aux tableaux.  Il s'av√®re que bien que les accolades ne soient g√©n√©ralement pas n√©cessaires lorsque vous travaillez avec des variables, elles sont n√©cessaires pour travailler avec des tableaux.  Ils vous permettent de d√©finir des index pour acc√©der aux √©l√©ments du tableau.  Par exemple, une commande de la forme <code>echo ${allThreads[1]}</code> affichera le deuxi√®me √©l√©ment du tableau.  Si vous oubliez les accolades dans la construction ci-dessus, bash percevra <code>[1]</code> comme une cha√Æne et traitera ce qui se passe en cons√©quence. <br><br>  Comme vous pouvez le voir, les tableaux en bash ont une syntaxe √©trange, mais en eux, au moins, la num√©rotation des √©l√©ments commence √† partir de z√©ro.  Cela les rend similaires aux tableaux de nombreux autres langages de programmation. <br><br><h2>  <font color="#3AC1EF">Fa√ßons d'acc√©der aux √©l√©ments du tableau</font> </h2><br>  Dans l'exemple ci-dessus, nous avons utilis√© des indices entiers dans des tableaux qui sont sp√©cifi√©s explicitement.  Consid√©rez maintenant deux autres fa√ßons de travailler avec des tableaux. <br><br>  La premi√®re m√©thode est applicable si nous avons besoin de l'√©l√©ment <code>$i</code> √®me du tableau, o√π <code>$i</code> est une variable contenant l'indice de l'√©l√©ment de tableau souhait√©.  Vous pouvez extraire cet √©l√©ment du tableau √† l'aide d'une construction de la forme <code>echo ${allThreads[$i]}</code> . <br><br>  La deuxi√®me m√©thode vous permet d'afficher tous les √©l√©ments du tableau.  Il consiste √† remplacer l'index num√©rique par le symbole <code>@</code> (il peut √™tre interpr√©t√© comme une commande pointant sur tous les √©l√©ments du tableau).  Cela ressemble √† ceci: <code>echo ${allThreads[@]}</code> . <br><br><h2>  <font color="#3AC1EF">It√©ration sur les √©l√©ments du tableau en boucles</font> </h2><br>  Les principes ci-dessus de travailler avec des √©l√©ments de tableau nous seront utiles pour r√©soudre le probl√®me d'√©num√©ration des √©l√©ments de tableau.  Dans notre cas, cela signifie lancer la commande de <code>pipeline</code> √©tude avec chacune des valeurs, qui symbolise le nombre de threads et est stock√©e dans un tableau.  Cela ressemble √† ceci: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span> done</code> </pre> <br><h2>  <font color="#3AC1EF">√ânum√©ration des indices de tableau dans les boucles</font> </h2><br>  Consid√©rons maintenant une approche l√©g√®rement diff√©rente du tri des tableaux.  Au lieu d'it√©rer sur les √©l√©ments, nous pouvons it√©rer sur les index du tableau: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{!allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-variable"><span class="hljs-variable">$i</span></span>]} done</code> </pre> <br>  Analysons ce qui se passe ici.  Comme nous l'avons d√©j√† vu, une construction de la forme <code>${allThreads[@]}</code> repr√©sente tous les √©l√©ments du tableau.  Lorsque nous ajoutons un point d'exclamation ici, nous transformons cette construction en <code>${!allThreads[@]}</code> , ce qui conduit au fait qu'elle renvoie les index du tableau (de 0 √† 7 dans notre cas). <br><br>  En d'autres termes, la boucle <code>for</code> tous les index du tableau repr√©sent√©s comme la variable <code>$i</code> , et dans le corps de la boucle, les √©l√©ments du tableau, qui servent de valeurs au param√®tre <code>--thread</code> , sont <code>--thread</code> √† l'aide de la construction <code>${allThreads[$i]}</code> . <br><br>  La lecture de ce code est plus difficile que celle de l'exemple pr√©c√©dent.  Par cons√©quent, la question se pose de savoir √† quoi servent toutes ces difficult√©s.  Et nous en avons besoin car dans certaines situations, lors du traitement de tableaux en boucles, vous devez conna√Ætre √† la fois les indices et les valeurs des √©l√©ments.  Par exemple, si vous devez ignorer le premier √©l√©ment d'un tableau, l'it√©ration sur les indices nous √©vitera, par exemple, la n√©cessit√© de cr√©er une variable suppl√©mentaire et de l'incr√©menter en boucle pour travailler avec les √©l√©ments du tableau. <br><br><h2>  <font color="#3AC1EF">Remplissage des matrices</font> </h2><br>  Jusqu'√† pr√©sent, nous avons explor√© le syst√®me en appelant la commande <code>pipeline</code> et en lui passant chacune des valeurs du param√®tre <code>--threads</code> nous int√©ressent.  Supposons maintenant que cette commande donne la dur√©e d'un certain processus en secondes.  Nous aimerions intercepter les donn√©es qui lui sont retourn√©es √† chaque it√©ration et les enregistrer dans un autre tableau.  Cela nous donnera l'occasion de travailler avec les donn√©es stock√©es une fois tous les tests termin√©s. <br><br><h2>  <font color="#3AC1EF">Constructions de syntaxe utiles</font> </h2><br>  Avant de parler de la fa√ßon d'ajouter des donn√©es aux tableaux, regardons quelques constructions de syntaxe utiles.  Pour commencer, nous avons besoin d'un m√©canisme pour obtenir la sortie de donn√©es par les commandes bash.  Afin de capturer la sortie d'une commande, vous devez utiliser la construction suivante: <br><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">output</span></span>=$( ./my_script.sh )</code> </pre> <br>  Apr√®s avoir ex√©cut√© cette commande, ce que <code>myscript.sh</code> <code>$output</code> sera stock√© dans la variable <code>$output</code> . <br><br>  La deuxi√®me construction, qui sera tr√®s utile tr√®s prochainement, nous permet d'attacher de nouvelles donn√©es aux tableaux.  Cela ressemble √† ceci: <br><br><pre> <code class="hljs lisp">myArray+=( <span class="hljs-string"><span class="hljs-string">"newElement1"</span></span> <span class="hljs-string"><span class="hljs-string">"newElement2"</span></span> )</code> </pre> <br><h2>  <font color="#3AC1EF">R√©solution de probl√®mes</font> </h2><br>  Maintenant, si nous rassemblons tout ce que nous venons d'apprendre, nous pouvons cr√©er un script pour tester le syst√®me qui ex√©cute une commande avec chacune des valeurs de param√®tre du tableau et stocke dans l'autre tableau ce que cette commande affiche. <br><br><pre> <code class="hljs powershell">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>) allRuntimes=() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> runtime=<span class="hljs-variable"><span class="hljs-variable">$</span></span>(./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span>) allRuntimes+=( <span class="hljs-variable"><span class="hljs-variable">$runtime</span></span> ) done</code> </pre> <br><h2>  <font color="#3AC1EF">Et ensuite?</font> </h2><br>  Nous venons d'examiner comment utiliser les tableaux bash pour parcourir les param√®tres utilis√©s lors du d√©marrage d'un programme et pour enregistrer les donn√©es que ce programme renvoie.  Cependant, les options d'utilisation des tableaux ne sont pas limit√©es √† ce sc√©nario.  Voici quelques autres exemples. <br><br><h2>  <font color="#3AC1EF">Alertes de probl√®me</font> </h2><br>  Dans ce sc√©nario, nous allons examiner une application qui se d√©compose en modules.  Chacun de ces modules poss√®de son propre fichier journal.  Nous pouvons √©crire un script de t√¢che <code>cron</code> qui, si des probl√®mes sont d√©tect√©s dans le fichier journal correspondant, notifiera par email la personne responsable de chacun des modules: <br><br><pre> <code class="hljs kotlin">#  -    logPaths=(<span class="hljs-string"><span class="hljs-string">"api.log"</span></span> <span class="hljs-string"><span class="hljs-string">"auth.log"</span></span> <span class="hljs-string"><span class="hljs-string">"jenkins.log"</span></span> <span class="hljs-string"><span class="hljs-string">"data.log"</span></span>) logEmails=(<span class="hljs-string"><span class="hljs-string">"jay@email"</span></span> <span class="hljs-string"><span class="hljs-string">"emma@email"</span></span> <span class="hljs-string"><span class="hljs-string">"jon@email"</span></span> <span class="hljs-string"><span class="hljs-string">"sophia@email"</span></span>) #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ${!logPaths[@]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> log=${logPaths[$i]} stakeholder=${logEmails[$i]} numErrors=$( tail -n <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$log</span></span></span><span class="hljs-string">"</span></span> | grep <span class="hljs-string"><span class="hljs-string">"ERROR"</span></span> | wc -l ) #       <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$numErrors</span></span></span><span class="hljs-string">"</span></span> -gt <span class="hljs-number"><span class="hljs-number">5</span></span> ]]; then   emailRecipient=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$stakeholder</span></span></span><span class="hljs-string">"</span></span>   emailSubject=<span class="hljs-string"><span class="hljs-string">"WARNING: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string"> showing unusual levels of errors"</span></span>   emailBody=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${numErrors}</span></span></span><span class="hljs-string"> errors found in log </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string">"</span></span>   echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailBody</span></span></span><span class="hljs-string">"</span></span> | mailx -s <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailSubject</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailRecipient</span></span></span><span class="hljs-string">"</span></span> fi done</code> </pre> <br><h2>  <font color="#3AC1EF">Demandes d'API</font> </h2><br>  Supposons que vous souhaitiez collecter des informations sur les commentaires des utilisateurs sur vos publications sur Medium.  Comme nous n'avons pas d'acc√®s direct √† la base de donn√©es de ce site, nous ne discuterons pas des requ√™tes SQL.  Cependant, vous pouvez utiliser diff√©rentes API pour acc√©der √† ce type de donn√©es. <br><br>  Afin d'√©viter de longues conversations sur l'authentification et les jetons, nous utiliserons, en tant que point de terminaison, le service de test d'API public <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSONPlaceholder</a> .  Apr√®s avoir re√ßu une publication du service et extrait les donn√©es de son code aux adresses e-mail des commentateurs, nous pouvons mettre ces donn√©es dans un tableau: <br><br><pre> <code class="hljs kotlin">endpoint=<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/comments"</span></span> allEmails=() #   <span class="hljs-number"><span class="hljs-number">10</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> postId <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> {<span class="hljs-number"><span class="hljs-number">1</span></span>..<span class="hljs-number"><span class="hljs-number">10</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #    API       response=$(curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${endpoint}</span></span></span><span class="hljs-string">?postId=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${postId}</span></span></span><span class="hljs-string">"</span></span>) #  jq   JSON       allEmails+=( $( jq <span class="hljs-string"><span class="hljs-string">'.[].email'</span></span> &lt;&lt;&lt; <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$response</span></span></span><span class="hljs-string">"</span></span> ) ) done</code> </pre> <br>  Veuillez noter que l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jq</a> est utilis√© ici, ce qui permet d'analyser JSON sur la ligne de commande.  Nous n'entrerons pas dans les d√©tails de l'utilisation de jq si vous √™tes int√©ress√© par cet outil - consultez la documentation correspondante. <br><br><h2>  <font color="#3AC1EF">Bash ou Python?</font> </h2><br>  Tableaux - une fonctionnalit√© utile et elle est disponible non seulement dans bash.  Celui qui √©crit des scripts pour la ligne de commande peut avoir une question logique sur les situations dans lesquelles il vaut la peine d'utiliser bash et dans quel cas, par exemple, Python. <br><br>  √Ä mon avis, la r√©ponse √† cette question r√©side dans combien le programmeur d√©pend d'une technologie particuli√®re.  Disons que si le probl√®me peut √™tre r√©solu directement sur la ligne de commande, rien n'emp√™che l'utilisation de bash.  Cependant, dans le cas o√π, par exemple, le script qui vous int√©resse fait partie d'un projet √©crit en Python, vous pouvez bien utiliser Python. <br><br>  Par exemple, pour r√©soudre le probl√®me consid√©r√© ici, vous pouvez utiliser un script √©crit en Python, cependant, cela reviendra √† √©crire des wrappers pour Python pour bash: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess all_threads = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>] all_runtimes = [] #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> all_threads: cmd = <span class="hljs-string"><span class="hljs-string">'./pipeline --threads {}'</span></span>.format(t) #   subprocess   ,    p = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) output = p.communicate()[<span class="hljs-number"><span class="hljs-number">0</span></span>] all_runtimes.append(output)</code> </pre> <br>  Peut-√™tre que la solution √† ce probl√®me avec bash, sans impliquer d'autres technologies, est plus courte et plus compr√©hensible, et ici vous pouvez compl√®tement vous passer de Python. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Dans ce document, nous avons analys√© de nombreux mod√®les utilis√©s pour travailler avec des tableaux.  Voici un tableau o√π vous trouverez ce que nous avons examin√© et quelque chose de nouveau. <br><table><tbody><tr><td>  Construction de syntaxe </td><td>  La description </td></tr><tr><td> <code>arr=()</code> </td> <td>  Cr√©er un tableau vide </td></tr><tr><td> <code>arr=(1 2 3)</code> </td> <td>  Initialisation du tableau </td></tr><tr><td> <code>${arr[2]}</code> </td> <td>  Obtention du troisi√®me √©l√©ment d'un tableau </td></tr><tr><td> <code>${arr[@]}</code> </td> <td>  Obtention de tous les √©l√©ments du tableau </td></tr><tr><td> <code>${!arr[@]}</code> </td> <td>  Obtention d'indices de tableau </td></tr><tr><td> <code>${#arr[@]}</code> </td> <td>  Calcul de la taille du tableau </td></tr><tr><td> <code>arr[0]=3</code> </td> <td>  √âcraser le premier √©l√©ment d'un tableau </td></tr><tr><td> <code>arr+=(4)</code> </td> <td>  Rejoindre un tableau de valeurs </td></tr><tr><td> <code>str=$(ls)</code> </td> <td>  Enregistrement de la sortie de la <code>ls</code> sous forme de cha√Æne </td></tr><tr><td> <code>arr=( $(ls) )</code> </td> <td>  Enregistrement de la sortie de la <code>ls</code> tant que tableau de noms de fichiers </td></tr><tr><td> <code>${arr[@]:s:n}</code> </td> <td>  Obtention d'√©l√©ments de tableau d'un √©l√©ment avec index <code>s</code> √† un √©l√©ment avec index <code>s+(n-1)</code> <br></td></tr></tbody></table><br>  √Ä premi√®re vue, les tableaux bash peuvent sembler plut√¥t √©tranges, mais les possibilit√©s qu'ils offrent en valent la peine pour faire face √† ces bizarreries.  Nous pensons qu'ayant ma√Ætris√© les tableaux bash, vous les utiliserez assez souvent.  Il est facile d'imaginer d'innombrables sc√©narios dans lesquels ces tableaux peuvent √™tre utiles. <br><br>  <b>Chers lecteurs!</b>  Si vous avez des exemples int√©ressants d'utilisation de tableaux dans des scripts bash, partagez-les. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413725/">https://habr.com/ru/post/fr413725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413715/index.html">Pension de retraite informatique</a></li>
<li><a href="../fr413717/index.html">GraphQL pour les plates-formes InterSystems</a></li>
<li><a href="../fr413719/index.html">C ++ 20 en route! Rencontre √† Rapperswil Yona</a></li>
<li><a href="../fr413721/index.html">Time Checking: Timejacking vs Bitcoin</a></li>
<li><a href="../fr413723/index.html">Saga des services √©lectroniques et de leurs emplacements. Partie 2. Armoire √©lectronique</a></li>
<li><a href="../fr413729/index.html">Comment et pourquoi nous avons √©crit notre ECS</a></li>
<li><a href="../fr413731/index.html">√âtude du march√© du travail BA / SA</a></li>
<li><a href="../fr413733/index.html">Mikrosh, Krista, Apogee, Lviv - les premiers ordinateurs sovi√©tiques √† emporter</a></li>
<li><a href="../fr413739/index.html">Comment nous avons scann√© tout Internet et ce que nous avons appris</a></li>
<li><a href="../fr413741/index.html">Qu'est-ce que c'√©tait et comment: impressions de l'√©quipe WWDC Redmadrobot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>