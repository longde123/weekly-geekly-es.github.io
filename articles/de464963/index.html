<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🤝‍👨🏻 💪🏼 😷 Lokalisieren Sie schnell Microsoft SQL Server-Leistungsprobleme in Quest Foglight 🌸 🔶 🙄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem früheren Artikel über das Überwachungstool Foglight for Databases haben wir über Überwachungsfunktionen auf einer einzigen Schnittstelle gesp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lokalisieren Sie schnell Microsoft SQL Server-Leistungsprobleme in Quest Foglight</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/galssoftware/blog/464963/"><img src="https://habrastorage.org/webt/3n/t3/ou/3nt3ouckicz65xztkx1lntnvdxo.png"><br><br>  In einem früheren Artikel über das Überwachungstool Foglight for Databases haben wir über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Überwachungsfunktionen auf einer einzigen Schnittstelle gesprochen:</a> SQL Server, Oracle, PostgreSQL, MySQL, SAP ASE, DB2, Cassandra und MongoDB.  Heute werden wir Ansätze analysieren, um die Ursachen eines abnormalen Microsoft SQL Server-Betriebs schnell zu identifizieren: <br><br><ul><li>  Suche nach einer Sperrquelle; </li><li>  Vergleich der Datenbankeinstellungen "was-it-come" mit Bezug auf Leistungsmetriken; </li><li>  Suchen Sie nach Änderungen in der Datenbankstruktur, aufgrund derer die Leistung abgenommen hat. </li></ul><br>  Details unter dem Schnitt. <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Foglight for Databases</a> ist ein Tool zur Überwachung der Leistung und Änderungen in gängigen Datenbanken.  Wenn Sie mit diesem Produkt nicht vertraut sind, empfehlen wir Ihnen, den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Artikel zu</a> lesen.  Im Folgenden haben wir Screenshots von der Benutzeroberfläche gegeben, um die Funktionen von Foglight und die einfache Suche nach Problemen in der Datenbank zu demonstrieren. <br><br><h2>  Quellensuche sperren </h2><br>  Sie können in Management Studio nach dem Grund für Sperren suchen.  Eine Workstation mit diesem Dienstprogramm ist jedoch möglicherweise nicht verfügbar, und das Öffnen der Konsole ist nicht immer bequem.  In Quest Foglight können Sie den Grund für den Block mit wenigen Klicks finden.  In der Abbildung unten sehen Sie die Hauptkonsole für die Datenbanküberwachung. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/05f/5a5/0df/05f5a50dfd3b80b8584ba5d103ebbaa8.png" alt="Bild"><br><br>  Ein Dienstadministrator, der bereits eine Benachrichtigung erhalten hat, wechselt in die Ansicht SQL PI (Performance Investigator).  Die Spalte Workload hat ein auffälliges rotes Feld, das einen Wert ungleich Null des Parameters Lock Wait anzeigt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/680/4da/9e8/6804da9e89d4470476c2edf2ba3150ca.png" alt="Bild"><br><br>  Nach dem Klicken auf das Workload-Diagramm wird eine detaillierte Ansicht der Datenbankladequellen geöffnet. In der linken Spalte des Menüs befindet sich ein Menü zur Durchführung einer multivariaten Leistungsanalyse.  Hier, wie im obigen Screenshot, ist zu sehen, dass das Blockieren eine große Auslastung der Ressourcen verursacht.  Im Menü links gibt es eine spezielle Ansicht von gesperrten Objekten, in der ein gesperrtes Objekt erkannt wird. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/703/cea/2d4/703cea2d4f6e07f4bee7e402e40f0c34.png" alt="Bild"><br><br>  Gesperrte Objekte speichert gesperrte Objekte.  Auf der rechten Seite des Bildschirms die Gründe für die Blockierung: Dauer, von welchem ​​Server (oder welcher Workstation), welches Programm, von welchem ​​Benutzer und ausführbarem Objekt, die zur Blockierung geführt haben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab8/18f/1d9/ab818f1d982f046b9d2b50476010449b.png" alt="Bild"><br><br>  Wenn Sie zu einem ausführbaren Objekt wechseln, wird eine neue Ansicht mit der Möglichkeit geöffnet, den Inhalt dieses Objekts anzuzeigen.  Nach dem Klicken auf Stapeltext anzeigen wird der ausgeführte Code geöffnet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5a/2ce/783/c5a2ce783d3ca687838ff4370560fb0f.png" alt="Bild"><br><br>  Die Beschleunigung der Diagnosezeit ist der Schlüssel zum Erfolg des IT-Teams. <br><br><h2>  Ein Vergleich der Einstellungen der Datenbank wurde-ist-geworden </h2><br>  Änderungen, die von Entwicklern oder Datenbankadministratoren vorgenommen werden, können ebenfalls zu dramatischen Verlangsamungen führen.  Aber zum Zeitpunkt des Problems ist es wichtig, was passiert ist, egal wer es getan hat.  Wir werden versuchen, dies herauszufinden.  Öffnen Sie das Kontextmenü der Problemdatenbankinstanz. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/753/709/c87/753709c8713b6ba86ee8ad0f40fa5d70.png" alt="Bild"><br><br>  Wechseln Sie im sich öffnenden Menü zu SQL PI (Performance Investigator), um die Ansicht mit multivariater Analyse zu öffnen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d0/22e/770/7d022e77022981f6cb01eb26572f13d3.png" alt="Bild"><br><br>  Fahren wir mit der Basisansicht fort, um das Verhalten einer Metrik im Vergleich zu ihren üblichen Werten zu bewerten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/107/f6a/b01/107f6ab01025f5bc0c502baa84419e94.png" alt="Bild"><br><br>  Die Grafik zeigt, dass nach 13:40 Uhr ein abnormaler Anstieg des Ressourcenverbrauchs einsetzte. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb4/4c5/708/cb44c57083073ef36d32cef247323306.png" alt="Bild"><br><br>  In dieser Ansicht konfigurieren wir, mit was verglichen werden soll.  Betrachten Sie nun den Vergleich der Metrik mit sich selbst (entlang der Grundlinie), weil  Abnormale Abweichung oben offenbart.  Im Allgemeinen können Sie die Leistung auch mit einer anderen Datenbankinstanz vergleichen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b43/aba/f3c/b43abaf3cdb4c56479fe922af34d7805.png" alt="Bild"><br><br>  Nachdem Sie Objekte zum Vergleich ausgewählt haben, wird die Schaltfläche "Vergleichen" angezeigt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82a/2ad/1c2/82a2ad1c2892e4efdf171dd7b735ba1b.png" alt="Bild"><br><br>  Die durchschnittliche Ansicht zeigt, dass anomale Werte anhand der Metriken beobachtet wurden: Aktive Zeit, Ausführungen und Anmeldungsrate.  Beginnen wir einen neuen Vergleich, um Änderungen zu identifizieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/deb/cbf/ad1debcbf8bed4cafcf86abc7b9bc21f.png" alt="Bild"><br><br>  Vergleichen Sie die Werte der Metriken mit uns selbst, aber vor einem Tag. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b7f/2df/d77/b7f2dfd77074740927818754e762f66c.png" alt="Bild"><br><br>  Nach Auswahl der Einstellungen erscheint die Schaltfläche Vergleichen, auf die Sie klicken müssen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1f/e17/ba0/e1fe17ba0c435d2e9995ea6b54f38595.png" alt="Bild"><br><br>  Es erscheint eine Ansicht, zu der Vergleichsmessungen vorliegen.  Zur Demonstration wählen wir den Menüpunkt Programme.  Der Abschnitt Statistik zeigt bereits eine zweifache Erhöhung des Werts der Ausführungsmetrik. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16c/f85/158/16cf851585a23c48f0c76c4130b35e6d.png" alt="Bild"><br><br>  Links und rechts von der Skala werden im Menübereich Programme Metrikwerte angezeigt.  Hier sehen wir, dass sich die aktive Zeit und die Ausführungen fast verdoppelt haben, und dies ist eine Gelegenheit für eine detaillierte Analyse der Situation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28a/de8/7a7/28ade87a7f6dd7b65442800c2cf12147.png" alt="Bild"><br><br>  Auf die gleiche Weise können Sie eine vergleichende Analyse anderer Metriken durchführen und jede Präsentation in einen PDF-Bericht hochladen. <br><br><h2>  Suchen Sie nach Änderungen in der Datenbankstruktur </h2><br>  Änderungen an Indizes, Ausführungsplänen und anderen Objekten sind möglicherweise nicht dokumentiert.  Der Entwickler oder Administrator der Datenbank nimmt scheinbar geringfügige Änderungen vor, die er möglicherweise nach einer Weile vergisst.  In der Benutzeroberfläche von Foglight for Databases sind Konfigurationsänderungen mit Leistungsänderungen verbunden.  Wechseln Sie zum Identifizieren von Änderungen vom Hauptbildschirm für die Datenbanküberwachung zur Workload-Ansicht. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/083/e39/ff0/083e39ff08e06d407481bca49ec12b7c.png" alt="Bild"><br><br>  Angenommen, wir wissen, dass von einem Client-Computer eine große Last in der Datenbank generiert wird.  Wir zeigen Client-Maschinen in der linken Ansicht. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8aa/e87/293/8aae87293feb66c7174efc6250b881d8.png" alt="Bild"><br><br>  Die Stapel werden nach der Belastung der Datenbank sortiert.  Gehen wir zum ersten Objekt in der Liste und sehen uns die Änderungen an (Änderungsverfolgung) an. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e00/f44/6fb/e00f446fbd8cc4d8ed44432e8af849a9.png" alt="Bild"><br><br>  In der Tabelle sind gemäß der Legende rechts die entsprechenden Änderungen für den ausgewählten Zeitraum markiert.  Die erste Änderung ist das Entfernen des Index, die zweite das Hinzufügen eines neuen Ausführungsplans.  Wie Sie sehen können, hat die Last für andere Wartezeiten nach dem Entfernen des Index stark zugenommen - die violette Zone (die Ausführung von Stapeljobs bezieht sich auch darauf).  Die vierte Änderung ist eine Erhöhung des Parallelitätsgrades, die möglicherweise zu einer Erhöhung der Anzahl der Anforderungen führte (E / A-Wartezeit - blaue Zone).  Berücksichtigen Sie die Auswirkungen des Hinzufügens eines neuen Ausführungsplans. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec9/24b/ac9/ec924bac9168c6b676fad8a2326b6b6f.png" alt="Bild"><br><br>  Nach dem Übergang wurden die Details des neuen Ausführungsplans geöffnet.  Vergleichen Sie nun die aufgetretenen Änderungen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d44/0fb/362/d440fb3629400dba3ade2f8676d1e1c6.png" alt="Bild"><br><br>  Nach dem Übergang wurden die Details des neuen Ausführungsplans geöffnet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/687/134/6c1/6871346c1ee748f9d48e430c1005103d.png" alt="Bild"><br><br>  Der gleiche Ausführungsplan kann in Management Studio direkt über die Quest Foglight-Oberfläche geöffnet werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8c/a6b/77c/c8ca6b77c6567cb7552e8c34a692142f.png" alt="Bild"><br><br>  So sieht es in der Management Studio-Konsole aus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/064/407/95c/06440795cd09a85818735760ad68c2b7.png" alt="Bild"><br><br>  Wenn Sie zur Verlaufsansicht wechseln, können Sie Änderungen an den Metriken im Laufe der Zeit sehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a0e/565/d61/a0e565d619e0e20d3cbcd257e73002ae.png" alt="Bild"><br><br>  In der Verlaufsansicht können Sie die Auswirkungen von Änderungen auf eine bestimmte Metrik bewerten.  Wechseln Sie als Nächstes zur Ansicht Andere. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49e/b0e/d12/49eb0ed1232c3d863ed8f83ec937548e.png" alt="Bild"><br><br>  In dieser Ansicht können Sie sehen, welche Stapel die Datenbanklast beeinflusst haben.  Sie sind bereits in absteigender Reihenfolge sortiert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/089/6f4/aa9/0896f4aa95bc99af4a2e3986bc44ee37.png" alt="Bild"><br><br>  Zusätzlich zur automatischen Verfolgung von Änderungen kann ein Foglight-Benutzer Änderungen manuell hinzufügen. Im Falle einer Leistungsverschlechterung sucht der diensthabende Administrator nicht mehr nach der Ursache für die Verschlechterung des Dienstes. <br><br>  Wenn Ihnen Foglight for Databases gefallen hat und Sie es in Ihren Datenbanken ausprobieren möchten, hinterlassen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Feedback-Formular</a> auf unserer Website eine Anfrage für Distributionen und Testschlüssel.  Stabiler Datenbankbetrieb und schnelle Lokalisierung abnormaler Arbeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464963/">https://habr.com/ru/post/de464963/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464949/index.html">Noch einmal über GCD, den euklidischen Algorithmus und ein wenig über die Geschichte der Algorithmen im Allgemeinen. Natürlich mit Swift-Beispielen</a></li>
<li><a href="../de464951/index.html">Je einfacher die Aufgabe, desto öfter irre ich mich</a></li>
<li><a href="../de464955/index.html">Iron Mike Tyson und das Blockchain-Projekt Fight to Fame</a></li>
<li><a href="../de464959/index.html">Analyse des Satzes der russischen Sprache</a></li>
<li><a href="../de464961/index.html">Erstellen Sie visuelle Komponenten in der Unity-Benutzeroberfläche. Partikelsystem</a></li>
<li><a href="../de464965/index.html">Frontend Weekly Digest (19. - 25. August 2019)</a></li>
<li><a href="../de464967/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 377 (19. - 25. August 2019)</a></li>
<li><a href="../de464969/index.html">CRISPR bietet Ihnen die Möglichkeit, eine Person vor Schmerzen zu bewahren</a></li>
<li><a href="../de464971/index.html">PHP Digest Nr. 163 (12. - 26. August 2019)</a></li>
<li><a href="../de464973/index.html">Schreiben Sie Ihr Lied in 10 Minuten (textgenrnn Python3-Modul)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>