<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ธ๐ป ๐ฟ๏ธ ๐คซ ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูููุช ุงูุชุฑุฌูุฉ ุจุงุณุชุฎุฏุงูImplement ููุซุงู ๐จโโค๏ธโ๐จ ๐๐ผ ๐๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุญุจ ุฌููุนูุง ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู ูุฑุญูุฉ ุงูุชุฌููุน ุ ุจุฏูุงู ูู ุงุณุชุซูุงุกุงุช ููุช ุงูุชุดุบูู. ุฃุณูู ุทุฑููุฉ ูุฅุตูุงุญูุง ูู ุฃู ุงููุชุฑุฌู ููุณู ูุนุฑุถ ูู ุงูุฃูุงูู ุงูุชู ุชุญุชุงุฌ ุฅูู ุฅุตู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูููุช ุงูุชุฑุฌูุฉ ุจุงุณุชุฎุฏุงูImplement ููุซุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414715/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zq/9v/1a/zq9v1afhchg4c2ft1koorkjfcss.png"><br><br>  ูุญุจ ุฌููุนูุง ุงูุชุดุงู ุงูุฃุฎุทุงุก ูู ูุฑุญูุฉ ุงูุชุฌููุน ุ ุจุฏูุงู ูู ุงุณุชุซูุงุกุงุช ููุช ุงูุชุดุบูู.  ุฃุณูู ุทุฑููุฉ ูุฅุตูุงุญูุง ูู ุฃู ุงููุชุฑุฌู ููุณู ูุนุฑุถ ูู ุงูุฃูุงูู ุงูุชู ุชุญุชุงุฌ ุฅูู ุฅุตูุงุญ.  ุนูู ุงูุฑุบู ูู ุฃูู ูุง ูููู ุงูุชุดุงู ูุนุธู ุงููุดููุงุช ุฅูุง ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุจุฑูุงูุฌ ุ ูุฅููุง ูุง ุฒููุง ูุญุงูู ุงูููุงู ุจุฐูู ูู ุฃูุฑุจ ููุช ูููู. <a name="habracut"></a>  ูู ูุชู ุชููุฆุฉ ุงููุฆุงุช ุ ูู ููุดุฆู ุงููุงุฆูุงุช ุ ุนูุฏ ุฃูู ุงุณุชุฏุนุงุก ูุทุฑููุฉ ุ ุฅูุฎ.  ูุฃุญูุงููุง ูููู ูุญุธูุธูู ุ ูุญุชู ูู ูุฑุญูุฉ ุงูุชุฌููุน ุ ูุนุฑู ูุง ูููู ููุชุญูู ูู ุงูุจุฑูุงูุฌ ุจุญุซูุง ุนู ุฃุฎุทุงุก ูุนููุฉ. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุฃุฑูุฏ ูุดุงุฑูุฉ ุชุฌุฑุจุฉ ูุชุงุจุฉ ุฃุญุฏ ูุฐู ุงูุงุฎุชุจุงุฑุงุช.  ุจุชุนุจูุฑ ุฃุฏู ุ ุฅูุดุงุก ุชุนููู ุชูุถูุญู ูููู ุฃู ูููู ุจุงูุฃุฎุทุงุก ุ ููุง ููุนู ุงููุชุฑุฌู.  ุจุงูุญูู ุนูู ุญูููุฉ ุฃูู ูุง ููุฌุฏ ุงููุซูุฑ ูู ุงููุนูููุงุช ุญูู ูุฐุง ุงูููุถูุน ูู RuNet ุ ูุฅู ุงูููุงูู ุงูุณุนูุฏุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ููุณุช ูู ูุซูุฑ ูู ุงูุฃุญูุงู. <br><br>  ุณุฃุตู ุฎูุงุฑุฒููุฉ ุงูุชุญูู ุงูุนุงูุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฌููุน ุงูุฎุทูุงุช ูุงููุฑูู ุงูุฏูููุฉ ุงูุชู ูุถูุช ููุชูุง ูููุง ูุฎูุงูุง ุนุตุจูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุจูุงู ุงููุดููุฉ </h3><br>  ูู ูุฐุง ุงููุณู ุ ุณุฃุนุทู ูุซุงูุงู ูุงุณุชุฎุฏุงู ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู.  ุฅุฐุง ููุช ุชุนุฑู ุจุงููุนู ูุง ุงูุฐู ุชุฑูุฏ ุงูููุงู ุจู ุ ูููููู ุชุฎุทูู ุจุฃูุงู.  ุฃูุง ูุชุฃูุฏ ูู ุฃู ูุฐุง ูู ูุคุซุฑ ุนูู ุงูุชูุงู ุงูุนุฑุถ ุงูุชูุฏููู. <br><br>  ุงูุขู ุณูุชุญุฏุซ ุนู ุชุญุณูู ุฅููุงููุฉ ูุฑุงุกุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฃูุซุฑ ูู ุฅุตูุงุญ ุงูุฃุฎุทุงุก.  ููุซุงู ุ ูููู ูููุฑุก ุฃู ูููู ุ ูู ุงูุญูุงุฉ ุ ุฃู ุจุงูุฃุญุฑู ูู ูุดุฑูุน ููุงูุชู. <br><br>  ุงูุชุฑุถ ุฃู ููุงู ูุฆุฉ UnitManager ุ ููู ูู ุงููุงูุน ูุฌููุนุฉ ูู ุงููุญุฏุงุช.  ูุฏููุง ุทุฑู ูุฅุถุงูุฉ ูุญุฏุฉ ุฃู ุญุฐููุง ุฃู ุงูุญุตูู ุนูููุง ุ ุฅูุฎ.  ุนูุฏ ุฅุถุงูุฉ ูุญุฏุฉ ุฌุฏูุฏุฉ ุ ูุนูููุง ุงููุฏูุฑ ูุนุฑููุง.  ูุชู ุชูููุถ ุชูููุฏ ุงููุนุฑู ููุฆุฉ RotateCounter ุ ูุงูุชู ุชููู ุจุฅุฑุฌุงุน ุฑูู ูู ุงููุทุงู ุงููุญุฏุฏ.  ูููุงู ูุดููุฉ ุตุบูุฑุฉ ุ ูุง ูููู ูู RotateCounter ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงููุนุฑูู ุงููุญุฏุฏ ูุฌุงูููุง.  ููููุง ููุจุฏุฃ ุงูุนูุงุณ ุงูุชุจุนูุฉ ุ ููููู ุฅูุดุงุก ูุงุฌูุฉ ุ ูู ุญุงูุชู ูู RotateCounter.IClient ุ ุงูุชู ุชุญุชูู ุนูู ุทุฑููุฉ ูุงุญุฏุฉ isValueFree () ุ ูุงูุชู ุชุชููู ูุนุฑููุง ูุชุฑุฌุน true ุฅุฐุง ูุงู id ูุฌุงูููุง.  ูุชููู UnitManager ุจุชูููุฐ ูุฐู ุงููุงุฌูุฉ ุ ูุฅูุดุงุก ูุซูู ูู RotateCounter ูุชูุฑูุฑู ุฅูู ููุณู ูุนููู. <br><br>  ูุนูุช ุฐูู ููุท.  ูููู ุ ุจุนุฏ ุฃู ูุชุญุช ูุตุฏุฑ UnitManager ุจุนุฏ ุฃูุงู ููููุฉ ูู ุงููุชุงุจุฉ ุ ุฏุฎูุช ูู ุฐููู ุณูู ุจุนุฏ ุฑุคูุฉ ุทุฑููุฉ isValueFree () ุ ูุงูุชู ูู ุชุชูุงุณุจ ุชูุงููุง ูุน ููุทู UnitManager.  ุณูููู ูู ุงูุฃุณูู ุจูุซูุฑ ุฅุฐุง ูุงู ูู ุงููููู ุชุญุฏูุฏ ุงููุงุฌูุฉ ุงูุชู ุชููุฐ ูุฐู ุงูุทุฑููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู C # ุ ุงูุชู ุฌุฆุช ูููุง ุฅูู Java ุ ูุณุงุนุฏ ุชูููุฐ ูุงุฌูุฉ ุตุฑูุญุฉ ุนูู ุงูุชุนุงูู ูุน ูุฐู ุงููุดููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุฃููุงู ุ ููููู ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ููุท ูุน ุฅุฑุณุงู ุตุฑูุญ ุฅูู ุงููุงุฌูุฉ.  ุซุงูููุง ุ ูุงูุฃูู ูู ุฐูู ูู ูุฐู ุงูุญุงูุฉ ุ ูุดุงุฑ ุฅูู ุงุณู ุงููุงุฌูุฉ (ูุจุฏูู ูุนุฏูู ุงููุตูู) ุจุดูู ุตุฑูุญ ูู ุชูููุน ุงูุทุฑููุฉ ุ ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs">IClient.isValueFree(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { }</code> </pre> <br>  ุฃุญุฏ ุงูุญููู ูู ุฅุถุงูุฉ ุชุนููู ุชูุถูุญู ุจุงุณู ุงููุงุฌูุฉ ุงูุชู ุชููุฐ ูุฐู ุงูุทุฑููุฉ.  ุดูุก ูุซู <code>@Override</code> ุ ููุท ูุน ูุงุฌูุฉ.  ุฃูุงูู ุ ููููู ุงุณุชุฎุฏุงู ูุฆุฉ ุฏุงุฎููุฉ ูุฌูููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชูุงููุง ููุง ูู ุงูุญุงู ูู C # ุ ูุง ูููู ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ููุท ุนูู ุงููุงุฆู ุ ูููููู ุนูู ุงูููุฑ ูุนุฑูุฉ ุงููุงุฌูุฉ ุงูุชู ุชููุฐูุง.  ูููู ุ ุณูุคุฏู ุฐูู ุฅูู ุฒูุงุฏุฉ ููุฏุงุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุจุงูุชุงูู ุ ูููู ูู ุณูููุฉ ุงููุฑุงุกุฉ.  ูุนู ุ ูุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนููู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ูู ุงููุตู - ูู ุจุฅูุดุงุก ูุนูู ุฃู ุญูู ุนุงู (ุจุนุฏ ูู ุดูุก ุ ูุง ููุฌุฏ ุนุจุก ุฒุงุฆุฏ ุนูู ุนุจุงุฑุงุช Cast ูู Java ุฃูุถูุง).  ููุณ ุฎูุงุฑูุง ุณูุฆูุง ุ ูููู ูุง ุฃุญุจู. <br><br>  ูู ุงูุจุฏุงูุฉ ุ ุงุนุชูุฏุช ุฃูู ูู Java ุ ููุง ูู ุงูุญุงู ูู C # ุ ูุฅู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูู ูุฆุงุช ูุงููุฉ ููููู ุชูุฑูุซูุง ูููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ุนููู ุณูู ุฅูุดุงุก ุชุนููู ุชูุถูุญู ูุฑุซ ูู <code>@Override</code> .  ููู ุงูุฃูุฑ ูู ููู ูุฐูู ุ ููุงู ุนููู ุฃู ุฃุบูุต ูู ุนุงูู ุงูุดููุงุช ุงููุฐูู ูุงููุฑุนุจ ูู ูุฑุญูุฉ ุงูุชุฌููุน. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ ุนููุฉ UnitManager</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Unit</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UnitManager</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RotateCounter</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Unit[] units; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> RotateCounter idGenerator; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnitManager</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ units = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Unit[size]; idGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RotateCounter(<span class="hljs-number"><span class="hljs-number">0</span></span>, size, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addUnit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Unit unit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = idGenerator.findFree(); units[id] = unit; } <span class="hljs-meta"><span class="hljs-meta">@Implement</span></span>(RotateCounter.IClient.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValueFree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> units[value] == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeUnit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span><span class="hljs-function"> </span></span>{ units[id] = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RotateCounter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> IClient client; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> next; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minValue; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxValue; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotateCounter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minValue, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxValue, IClient client)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.client = client; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minValue = minValue; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxValue = maxValue; next = minValue; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementAndGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> current = next; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (next &gt;= maxValue) { next = minValue; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> current; } next++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> current; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">range</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> maxValue - minValue + <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findFree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> range = range(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> trysCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++trysCounter &gt; range) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"No free values."</span></span>); } id = incrementAndGet(); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!client.isValueFree(id)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValueFree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span></span>; } }</code> </pre></div></div><br><h3 style=";text-align:right;direction:rtl">  ุฌุฒุก ูู ุงููุธุฑูุฉ </h3><br>  ุณุฃุญุฌุฒ ุนูู ุงูููุฑ ุ ุฌููุน ุงูุทุฑู ุงููุฐููุฑุฉ ุฃุนูุงู ูู ุฃูุซูุฉ ุ ูุฐูู ุ ููุฅูุฌุงุฒ ุ <code>&lt;_&gt;.&lt;_&gt;()</code> ุฅูู ุฃุณูุงุก ุงูุทุฑู ุจุงุณู ุงูููุน ูุจุฏูู ูุนููุงุช: <code>&lt;_&gt;.&lt;_&gt;()</code> . <br><br>  ุชุชุถูู ูุนุงูุฌุฉ ุงูุนูุงุตุฑ ูู ูุฑุญูุฉ ุงูุชุฌููุน ูุฆุงุช ุฎุงุตุฉ ูููุนุงูุฌ.  ูุฐู ูู ุงููุฆุงุช ุงูุชู ุชุฑุซ ูู <code>javax.annotation.processing.AbstractProcessor</code> (ููููู ุจุจุณุงุทุฉ ุชูููุฐ ูุงุฌูุฉ <code>javax.annotation.processing.Processor</code> ).  ููููู ูุฑุงุกุฉ ุงููุฒูุฏ ุนู ุงููุนุงูุฌุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุง</a> .  ุฃูู ุทุฑููุฉ ูู ุงูุนูููุฉ.  ุญูุซ ูููููุง ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุนูุงุตุฑ ุงููุดุฑูุญุฉ ูุฅุฌุฑุงุก ุงููุญูุตุงุช ุงููุงุฒูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment env)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre> <br>  ูู ุงูุจุฏุงูุฉ ุ ุณุงุฐุฌุฉ ุจุตุฏู ุ ุงุนุชูุฏุช ุฃู ุงูุนูู ูุน ุงูุฃููุงุน ูู ูุฑุญูุฉ ุงูุชุฌููุน ูุชู ูู ุญูุซ ุงูุชูููุฑ ุ ูููู ... ูุง.  ูู ุดูุก ูุจูู ุนูู ุนูุงุตุฑ ููุงู. <br><br>  <b>Element</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.element.Element</a> ) - ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ ููุนูู ูุน ูุนุธู ุงูุนูุงุตุฑ ุงููููููุฉ ููุบุฉ.  ูุญุชูู ุงูุนูุตุฑ ุนูู ุฃุญูุงุฏ ุชุญุฏุฏ ุจุฏูุฉ ุฎุตุงุฆุต ุนูุตุฑ ูุนูู (ููุฒูุฏ ูู ุงูุชูุงุตูู ุ ุงูุธุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ds.magic.example.implement; <span class="hljs-comment"><span class="hljs-comment">// PackageElement public class Unit // TypeElement { private int id; // VariableElement public void setId(int id) { // ExecutableElement this.id = id; } }</span></span></code> </pre> <br>  <b>TypeMirror</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.type.TypeMirror</a> ) ูู ุดูุก ูุซู Class &lt;ุ&gt; ูุชู ุฅุฑุฌุงุนู ุจูุงุณุทุฉ ุทุฑููุฉ getClass ().  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ููุงุฑูุชูุง ููุนุฑูุฉ ูุง ุฅุฐุง ูุงูุช ุฃููุงุน ุงูุนูุงุตุฑ ูุชุทุงุจูุฉ.  ููููู ุงูุญุตูู ุนููู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>Element.asType()</code> .  ููุฑุฌุน ูุฐุง ุงูููุน ุฃูุถูุง ุจุนุถ ุนูููุงุช ุงูููุน ุ ูุซู <code>TypeElement.getSuperclass()</code> ุฃู <code>TypeElement.getInterfaces()</code> . <br><br>  <b>ุงูุฃููุงุน</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.util.Types</a> ) - ุฃูุตุญู ุจุฅููุงุก ูุธุฑุฉ ูุงุญุตุฉ ุนูู ูุฐุง ุงููุตู.  ููููู ุงูุนุซูุฑ ุนูู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููุซูุฑุฉ ููุงูุชูุงู ููุงู.  ูู ุฌููุฑูุง ุ ูุฐู ูุฌููุนุฉ ูู ุงูุฃุฏูุงุช ููุนูู ูุน ุงูุฃููุงุน.  ุนูู ุณุจูู ุงููุซุงู ุ ูุณูุญ ูู ุจุงุณุชุนุงุฏุฉ TypeElement ูู TypeMirror. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TypeElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asTypeElement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TypeMirror typeMirror)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (TypeElement)processingEnv.getTypeUtils().asElement(typeMirror); }</code> </pre> <br>  <b>TypeKind</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.type.TypeKind</a> ) - ุชุนุฏุงุฏ ูุชูุญ ูู ุชูุถูุญ ูุนูููุงุช ุงูููุน ุ ูุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุน ุนุจุงุฑุฉ ุนู ูุตูููุฉ (ARRAY) ุ ูููุน ูุฎุตุต (DECLARED) ุ ููุชุบูุฑ ููุน (TYPEVAR) ุ ุฅูุฎ.  ููููู ุงูุญุตูู ุนููู ูู ุฎูุงู <code>TypeMirror.getKind()</code> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ElementKind</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.element.ElementKind</a> ) - ุงูุชุนุฏุงุฏ ุ ูุชูุญ ูู ุชูุถูุญ ุงููุนูููุงุช ุญูู ุงูุนูุตุฑ ุ ูุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ุนุจุงุฑุฉ ุนู ุญุฒูุฉ (PACKAGE) ุ ูุงููุฆุฉ (CLASS) ุ ูุงูุทุฑููุฉ (METHOD) ุ ูุงููุงุฌูุฉ (INTERFACE) ุ ุฅูุฎ. <br><br>  <b>ุงูุงุณู</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">javax.lang.model.element.Name</a> ) - ูููู ุงูุญุตูู ุนูู ูุงุฌูุฉ ููุนูู ูุน ุงุณู ุงูุนูุตุฑ ูู ุฎูุงู <code>Element.getSimpleName()</code> . <br><br>  ุจุดูู ุฃุณุงุณู ุ ูุงูุช ูุฐู ุงูุฃููุงุน ูุงููุฉ ูู ููุชุงุจุฉ ุฎูุงุฑุฒููุฉ ุชุญูู. <br><br>  ุฃุฑูุฏ ุฃู ุฃุดูุฑ ุฅูู ููุฒุฉ ุฃุฎุฑู ูุซูุฑุฉ ููุงูุชูุงู.  ุชูุฌุฏ ุชุทุจููุงุช ูุงุฌูุงุช Element ูู Eclipse ูู ุญุฒู org.eclipse ... ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุนูุงุตุฑ ุงูุชู ุชูุซู ุงูุฃุณุงููุจ ูู ุงูููุน <code>org.eclipse.jdt.internal.compiler.apt.model.ExecutableElementImpl</code> .  ุฃุนุทุงูู ูุฐุง ููุฑุฉ ุฃู ูุฐู ุงููุงุฌูุงุช ูุชู ุชูููุฐูุง ุจูุงุณุทุฉ ูู IDE ุจุดูู ูุณุชูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฎูุงุฑุฒููุฉ ุงูุชุญูู </h3><br>  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ุงูุชุนููู ุงูุชูุถูุญู ููุณู.  ููุฏ ุชู ุจุงููุนู ูุชุงุจุฉ ุงููุซูุฑ ุญูู ูุฐุง ุงูููุถูุน (ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ) ุ ูุฐูู ูู ุฃุชูุงูู ูุฐุง ุจุงูุชูุตูู.  ูุง ูุณุนูู ุฅูุง ุฃู ุฃููู ุฃูู <code>@Target</code> ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ <code>@Target</code> ู <code>@Retention</code> .  ูุดูุฑ ุงูุฃูู ุฅูู ุฃู ุงูุชุนููู ุงูุชูุถูุญู ุงูุฎุงุต ุจูุง ูุง ูููู ุชุทุจููู ุฅูุง ุนูู ุงูุทุฑููุฉ ุ ูุงูุซุงูู ุฃู ุงูุชุนููู ุงูุชูุถูุญู ุณูููู ููุฌูุฏูุง ููุท ูู ุดูุฑุฉ ุงููุตุฏุฑ. <br><br>  ูุฌุจ ุชุญุฏูุฏ ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูููุงุฌูุฉ ุงูุชู ุชููุฐ ุงูุทุฑููุฉ ุงูููุนููููุฉ (ุงูุทุฑููุฉ ุงูุชู ูุชู ุชุทุจูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุนูููุง).  ูููู ุงูููุงู ุจุฐูู ุจุทุฑููุชูู: ุฅูุง ุชุญุฏูุฏ ุงูุงุณู ุงููุงูู ูููุงุฌูุฉ ุจุณูุณูุฉ ุ ุนูู ุณุจูู ุงููุซุงู <code>@Implement("com.ds.IInterface")</code> ุ ุฃู ุชูุฑูุฑ ูุฆุฉ ุงููุงุฌูุฉ ูุจุงุดุฑุฉ: <code>@Implement(IInterface.class)</code> .  ุงูุทุฑููุฉ ุงูุซุงููุฉ ุฃูุถู ุจุดูู ูุงุถุญ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุงููุชุฑุฌู ุจูุฑุงูุจุฉ ุงุณู ุงููุงุฌูุฉ ุงูุตุญูุญ.  ุจุงูููุงุณุจุฉ ุ ุฅุฐุง ููุช ุจุงุณุชุฏุนุงุก <b>ูููุฉ</b> ุงูุนุถู <b>() ุ</b> ูุนูุฏ ุฅุถุงูุฉ ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุฅูู ุงูุทุฑููุฉ ุ ูู ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงุณู ูุฐู ุงููุนููุฉ ุจุดูู ุตุฑูุญ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({ElementType.METHOD}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.SOURCE) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Implement { Class&lt;?&gt; value(); }</code> </pre> <br>  ุซู ูุจุฏุฃ ุงููุฑุญ - ุฅูุดุงุก ุงููุนุงูุฌ.  ูู ุทุฑููุฉ ุงูุนูููุฉ ุ ูุญุตู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุนูุงุตุฑ ุงููุดุฑูุญุฉ.  ุซู ูุญุตู ุนูู ุงูุชุนููู ุงูุชูุถูุญู ููุณู ููุนูุงู - ุงููุงุฌูุฉ ุงููุญุฏุฏุฉ.  ุจุดูู ุนุงู ุ ูุจุฏู ุฅุทุงุฑ ูุฆุฉ ุงููุนุงูุฌ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SupportedAnnotationTypes</span></span>({<span class="hljs-string"><span class="hljs-string">"ds.magic.annotations.compileTime.Implement"</span></span>}) <span class="hljs-meta"><span class="hljs-meta">@SupportedSourceVersion</span></span>(SourceVersion.RELEASE_8) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImplementProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Types typeUtils; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ProcessingEnvironment procEnv)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(procEnv); typeUtils = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.processingEnv.getTypeUtils(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Set&lt;? extends TypeElement&gt; annos, RoundEnvironment env)</span></span></span><span class="hljs-function"> </span></span>{ Set&lt;? extends Element&gt; annotatedElements = env.getElementsAnnotatedWith(Implement.class); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Element annotated : annotatedElements) { Implement annotation = annotatedElement.getAnnotation(Implement.class); TypeMirror interfaceMirror = getValueMirror(annotation); TypeElement interfaceType = asTypeElement(interfaceMirror); <span class="hljs-comment"><span class="hljs-comment">//... } return false; } private TypeElement asTypeElement(TypeMirror typeMirror) { return (TypeElement)typeUtils.asElement(typeMirror); } }</span></span></code> </pre> <br>  ุฃุฑูุฏ ุฃู ุฃุดูุฑ ุฅูู ุฃูู ูุง ููููู ููุท ุงูุญุตูู ุนูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุฐุงุช ุงููููุฉ ูุงูุญุตูู ุนูููุง ุชูุงููุง.  ุนูุฏ ูุญุงููุฉ ุงุณุชุฏุนุงุก <code>annotation.value()</code> ุ ุณูุชู ุทุฑุญ <b>MirroredTypeException</b> ุ ูููู ููููู ุงูุญุตูู ุนูู TypeMirror.  ูุฌุฏุช ุทุฑููุฉ ุงูุบุด ูุฐู ุ ููุฐูู ุงูุงุณุชูุงู ุงูุตุญูุญ ูููููุฉ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TypeMirror </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValueMirror</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Implement annotation)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { annotation.value(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(MirroredTypeException e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e.getTypeMirror(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre> <br>  ูุชููู ุงููุญุต ููุณู ูู ุซูุงุซุฉ ุฃุฌุฒุงุก ุ ุฅุฐุง ูุดู ูุงุญุฏ ูููุง ุนูู ุงูุฃูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงููุชุงุจุนุฉ ุฅูู ุงูุชุนููู ุงูุชูุถูุญู ุงูุชุงูู.  ุจุงูููุงุณุจุฉ ุ ููููู ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message, Element annotatedElement)</span></span></span><span class="hljs-function"> </span></span>{ Messager messager = processingEnv.getMessager(); messager.printMessage(Kind.ERROR, message, annotatedElement); }</code> </pre> <br>  ุงูุฎุทูุฉ ุงูุฃููู ูู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูููููุฉ ูุงุฌูุฉ.  ูู ุดูุก ุจุณูุท ููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (interfaceType.getKind() != ElementKind.INTERFACE) { String name = Implement.class.getSimpleName(); printError(<span class="hljs-string"><span class="hljs-string">"Value of @"</span></span> + name + <span class="hljs-string"><span class="hljs-string">" must be an interface"</span></span>, annotated); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงููุฆุฉ ุงูุชู ุชูุฌุฏ ุจูุง ุงูุทุฑููุฉ ุงููุดุฑูุญุฉ ุชููุฐ ุจุงููุนู ุงููุงุฌูุฉ ุงููุญุฏุฏุฉ.  ูู ุงูุจุฏุงูุฉ ููุช ุจุชูููุฐ ูุฐุง ุงูุงุฎุชุจุงุฑ ุจุญูุงูุฉ ุจูุฏู.  ูููู ุจุนุฏ ุฐูู ุ ูุจุงุณุชุฎุฏุงู ูุตูุญุฉ ุฌูุฏุฉ ุ ูุธุฑุช ุฅูู <b>ุงูุฃููุงุน</b> ููุฌุฏุช ุทุฑููุฉ <code>Types.isSubtype()</code> ููุงู ุ ูุงูุชู ุณุชุชุญูู ูู ุดุฌุฑุฉ ุงูููุฑุงุซ ุจุงููุงูู ูุชุนูุฏ ุตุญูุญุฉ ุฅุฐุง ูุงูุช ุงููุงุฌูุฉ ุงููุญุฏุฏุฉ ููุฌูุฏุฉ.  ุงูุฃูู ูู ุฐูู ุ ูููู ุฃู ุชุนูู ูุน ุงูุฃููุงุน ุงูุนุงูุฉ ุ ุนูู ุนูุณ ุงูุฎูุงุฑ ุงูุฃูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">TypeElement enclosingType = (TypeElement)annotatedElement.getEnclosingElement(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!typeUtils.isSubtype(enclosingType.asType(), interfaceMirror)) { Name className = enclosingType.getSimpleName(); Name interfaceName = interfaceType.getSimpleName(); printError(className + <span class="hljs-string"><span class="hljs-string">" must implemet "</span></span> + interfaceName, annotated); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  ุฃุฎูุฑูุง ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุงููุงุฌูุฉ ุชุญุชูู ุนูู ุทุฑููุฉ ููุง ููุณ ุงูุชูููุน ุงูุฐู ูุญุชูู ุนูู ุชุนููู ุชูุถูุญู.  ุฃูุฏ ุงุณุชุฎุฏุงู ุทุฑููุฉ <code>Types.isSubsignature()</code> ุ ูููู ููุฃุณู ุ ูุง ุชุนูู ุจุดูู ุตุญูุญ ุฅุฐุง ูุงูุช ุงูุทุฑููุฉ ุชุญุชูู ุนูู ูุนููุงุช ูุชุงุจุฉ.  ูุฐูู ูุดูุฑ ุนู ุณูุงุนุฏูุง ูููุชุจ ุฌููุน ุงูุดููุงุช ุจุฃูุฏููุง.  ููุฏููุง ุซูุงุซุฉ ูููู ูุฑุฉ ุฃุฎุฑู.  ุญุณููุง ุ ุจุดูู ุฃูุซุฑ ุฏูุฉ ุ ูุชููู ุชูููุน ุงูุทุฑููุฉ ูู ุซูุงุซุฉ ุฃุฌุฒุงุก: ุงุณู ุงูุทุฑููุฉ ูููุน ุงููููุฉ ุงููุฑุชุฌุนุฉ ููุงุฆูุฉ ุงููุนููุงุช.  ุชุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุฌููุน ุทุฑู ุงููุงุฌูุฉ ูุงูุนุซูุฑ ุนูู ุงูุทุฑููุฉ ุงูุชู ุงุฌุชุงุฒุช ุฌููุน ุนูููุงุช ุงููุญุต ุงูุซูุงุซุฉ.  ุณูููู ูู ุงูุฌูุฏ ุนุฏู ูุณูุงู ุฃู ุงูุทุฑููุฉ ูููู ุฃู ุชููู ููุฑูุซุฉ ูู ูุงุฌูุฉ ุฃุฎุฑู ูุชููู ุจุดูู ูุชูุฑุฑ ุจุฅุฌุฑุงุก ููุณ ุงูุงุฎุชุจุงุฑุงุช ูููุงุฌูุงุช ุงูุฃุณุงุณูุฉ. <br><br>  ูุฌุจ ูุถุน ุงูููุงููุฉ ูู ููุงูุฉ ุงูุญููุฉ ูู ุทุฑููุฉ ุงูุนูููุฉ ุ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!haveMethod(interfaceType, (ExecutableElement)annotatedElement)) { Name name = interfaceType.getSimpleName(); printError(name + <span class="hljs-string"><span class="hljs-string">" don't have \""</span></span> + annotated + <span class="hljs-string"><span class="hljs-string">"\" method"</span></span>, annotated); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  ุชุจุฏู ุทุฑููุฉ haveMethod () ููุณูุง ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">haveMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TypeElement interfaceType, ExecutableElement method)</span></span></span><span class="hljs-function"> </span></span>{ Name methodName = method.getSimpleName(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Element interfaceElement : interfaceType.getEnclosedElements()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (interfaceElement <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ExecutableElement) { ExecutableElement interfaceMethod = (ExecutableElement)interfaceElement; <span class="hljs-comment"><span class="hljs-comment">// Is names match? if (!interfaceMethod.getSimpleName().equals(methodName)) { continue; } // Is return types match (ignore type variable)? TypeMirror returnType = method.getReturnType(); TypeMirror interfaceReturnType = method.getReturnType(); if (!isTypeVariable(interfaceReturnType) &amp;&amp; !returnType.equals(interfaceReturnType)) { continue; } // Is parameters match? if (!isParametersEquals(method.getParameters(), interfaceMethod.getParameters())) { continue; } return true; } } // Recursive search for (TypeMirror baseMirror : interfaceType.getInterfaces()) { TypeElement base = asTypeElement(baseMirror); if (haveMethod(base, method)) { return true; } } return false; } private boolean isParametersEquals(List&lt;? extends VariableElement&gt; methodParameters, List&lt;? extends VariableElement&gt; interfaceParameters) { if (methodParameters.size() != interfaceParameters.size()) { return false; } for (int i = 0; i &lt; methodParameters.size(); i++) { TypeMirror interfaceParameterMirror = interfaceParameters.get(i).asType(); if (isTypeVariable(interfaceParameterMirror)) { continue; } if (!methodParameters.get(i).asType().equals(interfaceParameterMirror)) { return false; } } return true; } private boolean isTypeVariable(TypeMirror type) { return type.getKind() == TypeKind.TYPEVAR; }</span></span></code> </pre> <br>  ุชุฑู ุงููุดููุฉุ  ูุงุ  ููู ููุงู.  ุงูุญูููุฉ ูู ุฃููู ูู ุฃุฌุฏ ุทุฑููุฉ ููุญุตูู ุนูู ูุนููุงุช ุงููุชุงุจุฉ ุงููุนููุฉ ูููุงุฌูุงุช ุงูุนุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏู ูุฆุฉ ุชููุฐ ูุงุฌูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุณูุฏ</a> : <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">MyPredicate implements Predicate&amp;ltString&amp;gt { <span class="hljs-meta"><span class="hljs-meta">@Implement</span></span>(Predicate.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String t)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre> <br>  ุนูุฏ ุชุญููู ุงูุทุฑููุฉ ูู ุงููุตู ุ ูููู ููุน ุงููุนููุฉ ูู <code>String</code> ุ ููู ุงููุงุฌูุฉ ูู <code>T</code> ุ ููู ูุญุงููุงุช ุงูุญุตูู ุนูู <code>String</code> ุจุฏูุงู ูู ุฐูู ูู ุชุคุฏ ุฅูู ุฃู ุดูุก.  ูู ุงูููุงูุฉ ุ ุชูุตูุช ุฅูู ุดูุก ุฃูุถู ูู ูุฌุฑุฏ ุชุฌุงูู ูุนููุงุช ุงููุชุงุจุฉ.  ุณูุชู ุชูุฑูุฑ ุงูุดูู ูุน ุฃู ูุนููุงุช ููุน ูุนููุฉ ุ ุญุชู ุฅุฐุง ูู ุชุชุทุงุจู.  ูุญุณู ุงูุญุธ ุ ุณูููู ุงููุชุฑุฌู ุจุฅููุงุก ุฎุทุฃ ุฅุฐุง ูู ููู ููุทุฑููุฉ ุชุทุจูู ุงูุชุฑุงุถู ููู ูุชู ุชุทุจููู ูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ.  ูููู ูุน ุฐูู ุ ุฅุฐุง ูุงู ุฃู ุดุฎุต ูุนุฑู ููููุฉ ุงูุงูุชูุงู ุญูู ูุฐุง ุ ูุณุฃููู ููุชููุง ุฌุฏูุง ููุชูููุญ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุงุชุตุงู ุจุงููุณูู </h3><br>  ุฃูุง ุดุฎุตูุงู ุฃุญุจ Eclipce ููู ููุงุฑุณุชู ุงุณุชุฎุฏูุชู ููุท.  ูุฐูู ุ ุณุฃุตู ููููุฉ ุชูุตูู ุงููุนุงูุฌ ุจู IDE ูุฐุง.  ููู ูุฑู Eclipse ุงููุนุงูุฌ ุ ุชุญุชุงุฌ ุฅูู ุญุฒูู ูู .JAR ูููุตู ุ ุญูุซ ุณูููู ุงูุชุนููู ุงูุชูุถูุญู ููุณู ุฃูุถูุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุฌูุฏ <b>META-INF / services</b> ูู ุงููุดุฑูุน ูุฅูุดุงุก ููู <b>javax.annotation.processing.Processor ููุงู</b> ูุงูุฅุดุงุฑุฉ ุฅูู ุงูุงุณู ุงููุงูู ููุฆุฉ ุงููุนุงูุฌ: <code>ds.magic.annotations.compileTime.ImplementProcessor</code> ูู ุญุงูุชู.  ููุท ูู ุญุงูุฉ ุ ุณุฃุนุทู ููุทุฉ ุดุงุดุฉ ุ ูููู ุนูุฏูุง ูุง ูุนูู ุดูุก ุจุงููุณุจุฉ ูู ุ ูุฏุช ุฃุฎุทุฆ ูู ุจููุฉ ุงููุดุฑูุน. <br><br><img src="https://habrastorage.org/webt/bp/oo/ev/bpooev7zwn5msgfm6pyyhupedwi.png" alt="ุงูุตูุฑุฉ"><br><br>  ุจุนุฏ ุฐูู ุ ูู ุจุฌูุน .JAR ูุฑุจุทู ุจูุดุฑูุนู ุ ุฃููุงู ูููุชุจุฉ ุนุงุฏูุฉ ุ ุจุญูุซ ุชุธูุฑ ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูู ุงูููุฏ.  ุซู ูููู ุจุชูุตูู ุงููุนุงูุฌ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง ูู</a> ุฃูุซุฑ ุชูุตููุงู).  ููููุงู ุจุฐูู ุ ุงูุชุญ <b>ุฎุตุงุฆุต ุงููุดุฑูุน</b> ูุญุฏุฏ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Java Compiler -&gt; Annotation Processing ูุชุญูู ูู ูุฑุจุน "Enablenotation ูุนุงูุฌุฉ". </li><li style=";text-align:right;direction:rtl">  Java Compiler -&gt; Annotation Processing -&gt; Factory Path ุญุฏุฏ ูุฑุจุน ุงูุงุฎุชูุงุฑ "ุชูููู ุงูุฅุนุฏุงุฏุงุช ุงูุฎุงุตุฉ ุจุงููุดุฑูุน".  ุซู ุงุถุบุท ุงุถุงูุฉ JARs ... ูุญุฏุฏ ููู JAR ุงูุฐู ุชู ุชููููู ูุณุจูุง. </li><li style=";text-align:right;direction:rtl">  ููุงูู ุนูู ุฅุนุงุฏุฉ ุจูุงุก ุงููุดุฑูุน. </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุงูููุฎุต </h3><br>  ูููู ุฑุคูุฉ ุงูุฌููุน ูุนูุง ููู ูุดุฑูุน Eclipse ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitHub</a> .  ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ ุ ูู ููู ููุงู ุณูู ูุฆุชูู ุ ุฅุฐุง ูุงู ูููู ุชุณููุฉ ุงูุชุนููู ุงูุชูุถูุญู ุฐูู: Implement.java ู ImplementProcessor.java.  ุฃุนุชูุฏ ุฃูู ุฎููุช ุจุงููุนู ุบุฑุถูู. <br><br>  ุฑุจูุง ูุจุฏู ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู ุนุฏูู ุงููุงุฆุฏุฉ ุจุงููุณุจุฉ ููุจุนุถ.  ุฑุจูุง ูููู ูุฐูู.  ูููู ุฃูุง ุดุฎุตูุงู ุฃุณุชุฎุฏูู ุจุฏูุงู ูู <code>@Override</code> ุ ุนูุฏูุง ูุง ุชุชูุงุณุจ ุฃุณูุงุก ุงูุทุฑู ูุน ุบุฑุถ ุงููุตู.  ูุญุชู ุงูุขู ุ ููุณุช ูุฏู ุฑุบุจุฉ ูู ุงูุชุฎูุต ูููุง.  ุจุดูู ุนุงู ุ ููุช ุจุนูู ุชุนููู ุชูุถูุญู ูููุณู ุ ููุงู ุงูุบุฑุถ ูู ุงูููุงูุฉ ูู ุฅุธูุงุฑ ุฃุดุนู ุงููุงุฑ ุงูุฐู ููุช ุฃูุงุฌูู.  ุขูู ุฃููู ูุนูุช ุฐูู.  ุดูุฑุง ููู ุนูู ุงูุชูุงููู. <br><br>  ููุงุญุธุฉ.  ุจูุถู ูุณุชุฎุฏูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">ohotNik_alex</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">Comdiv</a> ููุณุงุนุฏุชูู ูู ุฅุตูุงุญ ุงูุฃุฎุทุงุก. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar414715/">https://habr.com/ru/post/ar414715/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar414705/index.html">ุฑูุงุฆุน ุจูุงุก ุงูุณูุงุนุงุช ุงูุนุงูููุฉ: ุฑุงูุจ ูุณุงุฑ ุงูุตูุช ุงููุจุชูุฑ ูู ุงูููุงุด ุฅูู ุงููุนุฏู ูุงูููุงุฏ ุงููุฑูุจุฉ</a></li>
<li><a href="../ar414707/index.html">ุชุญููู Blockchain ุ ุฃู ููุงุฐุง ูุณุฑ ุงูุฎูุงุทุ</a></li>
<li><a href="../ar414709/index.html">ุฃุณูุฏ ุงูุตุญุฑุงุก ูุงูุงุณุชุจุทุงู</a></li>
<li><a href="../ar414711/index.html">ุฌุนู ุชุทุจูู ูุฑุฉ ุงููุฏู ุงูุฅุณุจุงููุฉ La Liga ูุณุชุฎุฏููู ุงููุญุชุงููู ุบูุฑ ุงูุทูุนู</a></li>
<li><a href="../ar414713/index.html">ุฃุณุจูุน ููุงุญุธุงุช ูุฑูุณ</a></li>
<li><a href="../ar414717/index.html">2018 4K TV: ุชูุตูุงุช ูุฃูุถู ุฎูุงุฑ</a></li>
<li><a href="../ar414719/index.html">ุฃุฑุจุน ุนุฌูุงุช ุฌูุฏุฉ ุ ูุงุซูุงู ุฃูุถู</a></li>
<li><a href="../ar414723/index.html">ูุณุงุจูุฉ ุงูุจุฑูุฌุฉ: ุงูุชุฌุงุฑุฉ</a></li>
<li><a href="../ar414725/index.html">ุงูุชุบููุฑ ุงูุฃูุงูู: ููุงุฐุง ุชุบูุจ ุนูู ุชูุงุฑ ูู ุงูุจุฑูุชููุงุช ูู ุฌุฏุงุฑ ุฎุฑุณุงูู ุจุณูู ุฎูุณุฉ ุฃูุชุงุฑ</a></li>
<li><a href="../ar414727/index.html">ุณูุชู ุฅุทูุงู ูุงููู ุงูุนููุฉ ุงููุดูุฑุฉ ูุฑูุจูุง ูู ุฑูุณูุง: ูุง ุงูุฐู ุณูุชุบูุฑ ูููุดุงุฑููู ูู ุงูุณูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>