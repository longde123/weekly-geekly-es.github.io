<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥“ ğŸ‘¸ğŸ¿ ğŸ˜¼ Akselerasi instagram.com. Bagian 3 ğŸ‘©ğŸ¾â€âš•ï¸ ğŸ‘ŒğŸ¾ ğŸ”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari ini kami menerbitkan terjemahan bagian ketiga dari serangkaian bahan akselerasi instagram.com. Di bagian pertama, kami berbicara tentang preloadi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Akselerasi instagram.com. Bagian 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/472336/">  Hari ini kami menerbitkan terjemahan bagian ketiga dari serangkaian bahan akselerasi instagram.com.  Di bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama,</a> kami berbicara tentang preloading data, di bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kedua</a> , tentang pengiriman data ke klien atas inisiatif server.  Ini tentang caching. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/qd/4b/rj/qd4brjd95sxpyklmib8eva8qdg0.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Pekerjaan dimulai dengan cache</font> </h2><br>  Kami sudah mengirimkan data ke aplikasi klien, melakukan ini selama pemuatan halaman sedini mungkin.  Ini berarti bahwa satu-satunya cara tercepat untuk mengirimkan data adalah cara yang tidak menyediakan langkah-langkah yang terlibat dalam meminta informasi dari klien atau mengirimkannya ke klien atas inisiatif server.  Ini dapat dilakukan dengan menggunakan pendekatan ini untuk pembentukan halaman, di mana cache muncul kedepan.  Ini, bagaimanapun, berarti bahwa kita harus, meskipun sangat singkat, menunjukkan informasi yang sudah ketinggalan zaman kepada pengguna.  Dengan menggunakan pendekatan ini, setelah memuat halaman, kami segera menunjukkan kepada pengguna salinan cache dari feed dan ceritanya, dan kemudian, setelah data terbaru tersedia, kami mengganti semua ini dengan data tersebut. <br><br>  Kami menggunakan Redux untuk mengelola status instagram.com.  Akibatnya, keseluruhan rencana implementasi skema di atas terlihat seperti ini.  Kami menyimpan subset dari repositori Redux pada klien, dalam tabel indexedDB, mengisi repositori itu saat pertama kali memuat halaman.  Namun, bekerja dengan indexedDB, mengunduh data dari server, dan interaksi pengguna dengan halaman adalah proses yang tidak sinkron.  Akibatnya, kita dapat mengalami masalah.  Mereka terdiri dari fakta bahwa pengguna bekerja dengan keadaan cache yang lama, dan kita perlu membuat tindakan pengguna berlaku untuk keadaan baru ketika menerimanya dari server. <br><br>  Misalnya, jika kita menggunakan mekanisme standar untuk bekerja dengan cache, kita mungkin menghadapi masalah berikut.  Kami mulai memuat data secara paralel dari cache dan dari jaringan.  Karena data dari cache akan lebih cepat siap dari data jaringan, kami menunjukkannya kepada pengguna.  Pengguna kemudian, misalnya, menyukai posting, tetapi setelah respon server, yang membawa informasi terbaru, tiba di klien, informasi ini menimpa informasi tentang posting yang disukai.  Dalam data segar ini tidak akan ada informasi tentang suka bahwa pengguna telah menetapkan versi cache posting.  Ini tampilannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fd/f4f/af6/8fdf4faf67a6ac65a830f169ffda3eea.png"></div><br>  <i><font color="#999999">Status ras yang terjadi saat pengguna berinteraksi dengan data yang di-cache (tindakan Redux disorot dalam warna hijau, status berwarna abu-abu)</font></i> <br><br>  Untuk mengatasi masalah ini, kami perlu mengubah status cache sesuai dengan tindakan pengguna dan menyimpan informasi tentang tindakan ini, yang akan memungkinkan kami untuk mereproduksi mereka sebagaimana diterapkan pada negara baru yang diterima dari server.  Jika Anda pernah menggunakan Git atau sistem kontrol versi lain, maka tugas ini mungkin terasa familier bagi Anda.  Misalkan keadaan cache yang direkam adalah cabang repositori lokal, dan respons server dengan data terbaru adalah cabang master.  Jika demikian, maka kita dapat mengatakan bahwa kita ingin melakukan operasi relokasi, yaitu, kita ingin mengambil perubahan yang direkam di satu cabang (misalnya, suka, komentar, dan sebagainya) dan menerapkannya ke yang lain. <br><br>  Ide ini membawa kita ke arsitektur sistem berikut: <br><br><ul><li>  Ketika halaman dimuat, kami mengirim permintaan ke server untuk mengunduh data baru (atau menunggu itu dikirim atas inisiatif server). </li><li>  Buat subset menengah (bertahap) dari kondisi Redux. </li><li>  Dalam proses menunggu data dari server, kami menyimpan tindakan yang dikirimkan. </li><li>  Setelah menerima data dari server, kami melakukan tindakan dengan data baru dan memutar tindakan yang tersimpan pada data baru, menerapkannya ke kondisi perantara. </li><li>  Setelah itu, kami melakukan perubahan dan mengganti keadaan saat ini dengan yang sedang. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/071/126/855/0711268557c8b0c303c6ce81fd452dee.png"></div><br>  <i><font color="#999999">Memecahkan masalah yang disebabkan oleh kondisi balapan menggunakan kondisi antara (aksi Redux disorot dalam warna hijau, status berwarna abu-abu)</font></i> <br><br>  Berkat kondisi perantara, kami dapat menggunakan kembali semua reduksi yang ada.  Ini, sebagai tambahan, memungkinkan Anda untuk menyimpan status perantara (yang berisi data terbaru) secara terpisah dari status saat ini.  Dan, karena bekerja dengan kondisi perantara diimplementasikan menggunakan Redux, cukup bagi kami untuk mengirim tindakan untuk menggunakan kondisi ini! <br><br><h2>  <font color="#3AC1EF">API</font> </h2><br>  API negara perantara terdiri dari dua fungsi utama.  Ini adalah <code>stagingAction</code> dan <code>stagingCommit</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stagingAction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">    key: string,    promise: Promise&lt;Action&gt;, </span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsyncAction</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">State</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Action</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stagingCommit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key: string</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsyncAction</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">State</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Action</span></span></span><span class="hljs-function">&gt;</span></span></code> </pre> <br>  Ada beberapa fungsi lain di sana, misalnya, untuk membatalkan perubahan dan untuk menangani kasus perbatasan, tetapi kami tidak akan mempertimbangkannya di sini. <br><br>  Fungsi <code>stagingAction</code> menerima janji untuk menyelesaikan suatu peristiwa yang perlu dikirim ke negara perantara.  Fungsi ini menginisialisasi keadaan perantara dan memantau tindakan yang telah dikirim sejak inisialisasi.  Jika kita membandingkan ini dengan sistem kontrol versi, ternyata kita sedang berhadapan dengan penciptaan cabang lokal.  Tindakan yang sedang berlangsung akan diantrekan dan diterapkan ke negara sementara setelah data baru tiba. <br><br>  Fungsi <code>stagingCommit</code> menggantikan keadaan saat ini dengan yang sedang.  Selain itu, jika diharapkan bahwa beberapa operasi asinkron selesai yang dilakukan pada kondisi peralihan, sistem akan menunggu operasi ini selesai sebelum menggantinya.  Ini mirip dengan operasi relokasi, ketika perubahan lokal (dari cabang yang menyimpan cache) diterapkan di atas cabang master (di atas data baru yang diterima dari server), yang mengarah pada fakta bahwa versi lokal dari negara relevan. <br><br>  Untuk mengaktifkan sistem kerja dengan kondisi peralihan, kami membungkus reducer root dengan kemampuan extender reducer.  Ini memproses tindakan <code>stagingCommit</code> dan menerapkan tindakan yang disimpan sebelumnya ke negara baru.  Untuk memanfaatkan semua ini, kita hanya perlu mengirim tindakan, dan semua yang lain akan dilakukan secara otomatis.  Misalnya, jika kita ingin memuat rekaman baru dan membawa datanya ke kondisi perantara, kita dapat melakukan sesuatu seperti ini: <br><br><pre> <code class="plaintext hljs">function fetchAndStageFeed() {    return stagingAction(        'feed',        (async () =&gt; {            const {data} = await fetchFeedTimeline();            return {                type: FEED_LOADED,                ...data,            };        })(),    ); } //          store.dispatch(fetchAndStageFeed()); //   ,    stagingCommit, //      'feed' //      store.dispatch(stagingCommit('feed'));</code> </pre> <br>  Penggunaan pendekatan rendering untuk feed dan cerita, di mana cache muncul, telah mempercepat output material masing-masing sebesar 2,5% dan 11%.  Ini, sebagai tambahan, berkontribusi pada fakta bahwa, dalam persepsi pengguna, versi web dari sistem semakin mendekati klien Instagram untuk iOS dan Android. <br><br>  <b>Pembaca yang budiman!</b>  Apakah Anda menggunakan pendekatan apa pun untuk mengoptimalkan caching saat mengerjakan proyek Anda? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id472336/">https://habr.com/ru/post/id472336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id472314/index.html">Saya suka orang kardus</a></li>
<li><a href="../id472318/index.html">Pelacakan Terdistribusi di Istio</a></li>
<li><a href="../id472320/index.html">Wawancara dengan Zabbix: 12 jawaban jujur</a></li>
<li><a href="../id472326/index.html">Industri luar angkasa kami ... Dan jika Anda melihat masalah industri dari sudut pandang seorang geek?</a></li>
<li><a href="../id472334/index.html">Hidup dengan kupon atau cara kami mengoptimalkan pekerjaan layanan sosial</a></li>
<li><a href="../id472338/index.html">Siapa pembunuh JavaScript?</a></li>
<li><a href="../id472340/index.html">Apakah GraphQL kehilangan relevansi di era HTTP / 2?</a></li>
<li><a href="../id472344/index.html">Dua "Sahabat," atau Phlogiston Perang Saudara</a></li>
<li><a href="../id472350/index.html">Bagaimana Methodius menjadi Anna: pengalaman mengembangkan dan meluncurkan pengklasifikasi pesan suara. Bagian 1</a></li>
<li><a href="../id472352/index.html">TechnoText, episode II. Kami memberi tahu bagaimana penulis Habr hidup dan mengerjakan artikel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>