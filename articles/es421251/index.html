<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöê üë©üèæ‚Äçü§ù‚Äçüë©üèª üë®‚Äçüåæ Sistema de respaldo üëÜüèº üë®üèø‚Äçü§ù‚Äçüë®üèª üôÖüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo es parte de una serie sobre la construcci√≥n de NAS y est√° escrito para un tipo espec√≠fico de sistema. 


 La copia de seguridad es la se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistema de respaldo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421251/"><p><img src="https://habrastorage.org/webt/in/pk/uh/inpkuhyjnf8c-efshdvkj_edp7m.jpeg"></p><br><p>  Este art√≠culo es parte de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie sobre la construcci√≥n de NAS</a> y est√° escrito para un tipo espec√≠fico de sistema. </p><br><p>  La copia de seguridad es la segunda tarea principal que quer√≠a resolver usando el NAS, despu√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">del sistema de administraci√≥n del repositorio</a> . </p><br><p>  Su decisi√≥n se prolong√≥ ... </p><br><p>  Ya se han escrito muchos art√≠culos e incluso varios libros sobre este tema, y ‚Äã‚Äãmuchas copias se han roto en disputas al respecto. </p><br><p>  A continuaci√≥n hay un intento de descubrir este mont√≥n de material, ponerlo en su cabeza y construir un sistema peque√±o de manera relativamente competente. </p><a name="habracut"></a><br><p>  El sistema de respaldo (SRK) est√° determinado por: </p><br><ul><li>  Pol√≠tica de respaldo.  La pol√≠tica establece las principales metas y objetivos de la copia de seguridad, los requisitos para ella, en funci√≥n de la lista de amenazas para cada sistema de copia de seguridad, y tambi√©n justifica su necesidad. </li><li>  Regulaciones de respaldo basadas en pol√≠ticas.  La regulaci√≥n describe los algoritmos de respaldo y recuperaci√≥n responsables de los respaldos, las condiciones de almacenamiento de los respaldos, etc. </li><li>  Implementaci√≥n instrumental.  En realidad, software y hardware. </li></ul><br><p>  El proceso de copia de seguridad regular se divide en las siguientes partes principales: </p><br><ul><li>  Inicio peri√≥dico de la copia. </li><li>  Comience la recuperaci√≥n bajo demanda. </li><li>  Probar el proceso de copia. </li></ul><br><p>  Puntos de interfaz del sistema con la plataforma NAS: </p><br><ul><li> <code>tank0/apps/backup</code> : almacenamiento de <code>tank0/apps/backup</code> . </li><li>  <code>tank1/apps/backup</code> : almacenamiento de <code>tank1/apps/backup</code> . </li><li>  <code>https://backup.NAS.cloudns.cc</code> : interfaz del sistema basada en la web. </li></ul><br><p>  Los repositorios de respaldo son <strong>sistemas de archivos separados</strong> . <br>  Esto es necesario porque sus opciones pueden ser muy diferentes, tanto de los sistemas de archivos normales como entre ellos. </p><br><p>  Por ejemplo, si es necesario, se puede habilitar la deduplicaci√≥n mediante FS y se puede deshabilitar la compresi√≥n. </p><br><h2 id="principy-rezervnogo-kopirovaniya">  Principios de respaldo </h2><br><p><img src="https://habrastorage.org/webt/t-/pe/i4/t-pei4njc4jilp-l0unqmcpanho.jpeg"></p><br><p>  Vale la pena entender que, aunque describo aqu√≠ un caso especial de respaldo que se adapta a las necesidades de una red peque√±a, los principios, observaciones y patrones son comunes en todas partes. <br>  En casos simples, algunos de ellos pueden ser descuidados, pero es deseable saberlo. </p><br><p>  Estos principios se basan en pol√≠ticas y regulaciones. </p><br><p>  Aqu√≠ hay algunos b√°sicos: </p><br><ul><li>  <strong>3-2-1</strong> .  Realice al menos tres copias de seguridad, en dos formatos de almacenamiento, de las cuales al menos una debe almacenarse en un lugar f√≠sicamente separado.  El principio es deseable de observar.  En mi caso, este principio se implementa parcialmente.  En primer lugar, hay tres m√°quinas diferentes en las que los datos se duplican parcialmente: NAS, trabajo y computadora port√°til.  En segundo lugar, se planea la replicaci√≥n a la nube. </li><li>  <strong>Verifique lo que se ha copiado</strong> .  De lo contrario, puede suceder que en un momento crucial, los datos no se puedan restaurar.  Verifique mejor a trav√©s del proceso de recuperaci√≥n. </li><li>  <strong>Use las herramientas adecuadas para la tarea</strong> .  Es probable que con la copia de una flota de m√°quinas virtuales, un sistema para copiar archivos con un agente en una m√°quina funcione mal.  El software especializado copiar√° m√°s r√°pido y menos costoso en los recursos de la m√°quina.  Es importante que la herramienta sea confiable y simple.  El SII no es algo con lo que generalmente quieras cavar. </li><li>  <strong>Es mejor copiar todo, con la obvia excepci√≥n del exceso</strong> .  O "es mejor adelantar que no terminar".  Ser√° posible descartar el exceso, pero si se utiliza la pol√≠tica inversa, puede ser imposible restaurar un archivo valioso que olvid√≥ especificar expl√≠citamente. </li><li>  <strong>Deber√≠a ser posible seleccionar y restaurar datos r√°pidamente</strong> .  Es recomendable, "un clic", y no esperar una hora.  Formalmente, debe tener un RTO aceptablemente bajo y un RPO suficiente.  Es extremadamente conveniente si el SII le permite restaurar accidentalmente eliminado y elegir entre varias versiones, y no solo la √∫ltima (por ejemplo, si est√° da√±ado, porque los errores l√≥gicos no est√°n excluidos). </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Al final del art√≠culo</a> hay enlaces a fuentes que puede estudiar para familiarizarse m√°s con estos puntos, as√≠ como leer sobre otros. </p><br><h2 id="politika-rezervnogo-kopirovaniya">  Pol√≠tica de respaldo </h2><br><p>  Obviamente, el objetivo de cualquier copia de seguridad es reducir el costo de la destrucci√≥n de datos no planificada en situaciones de emergencia. </p><br><p>  Esto se logra mediante la duplicaci√≥n de datos valiosos de m√°quinas en funcionamiento al almacenamiento de terceros. </p><br><h3 id="zadachi-rezervnogo-kopirovaniya">  Tareas de respaldo </h3><br><p>  Las siguientes tareas se definen con fines de copia de seguridad: </p><br><ul><li>  Resalta los datos del objetivo. </li><li>  Guardar los datos especificados para su posterior recuperaci√≥n. </li><li>  Recuperaci√≥n de datos guardados. </li><li>  Garantizar la estabilidad de los datos almacenados ante cambios y destrucci√≥n. </li><li>  Diferenciaci√≥n de acceso a datos almacenados. </li><li>  Proporcionar control del sistema y proceso de respaldo. </li></ul><br><h3 id="trebovaniya-k-sisteme">  Requisitos del sistema </h3><br><p>  Adem√°s en la lista, se combinan los requisitos funcionales y no funcionales: </p><br><ul><li>  La copia de seguridad debe realizarse: <br><ul><li>  A tiempo </li><li>  Previa solicitud </li><li>  Si te saltas el anterior. </li></ul></li><li>  La copia de seguridad de datos debe proporcionarse al menos 1 vez por d√≠a a una profundidad de 1 mes.  La pr√°ctica de tomar instant√°neas, as√≠ como usar la versi√≥n anterior del sistema en una m√°quina que funciona, muestra que esto es suficiente para m√≠. </li><li>  El tiempo de recuperaci√≥n de datos no debe exceder los 2 minutos por 1 GB (el l√≠mite de ancho de banda de la red es de 81 s. Por 1 GB).  Tomado en cuenta el ancho de banda LAN y la velocidad del disco, como factores limitantes. </li><li>  Todos los canales deben estar encriptados.  Se pueden guardar datos confidenciales, como los datos de autorizaci√≥n en servicios en l√≠nea. </li><li>  Deber√≠a ser posible cifrar las copias de seguridad de los usuarios con una clave secreta en la m√°quina del usuario, sin la posibilidad de descifrarlas en el servidor.  Esto es importante porque los usuarios no est√°n obligados a confiar en el servidor en absoluto. </li><li>  La copia incompleta no deber√≠a llevar mucho tiempo, por ejemplo, m√°s de 30 minutos.  Internet se utiliza para copiar datos de una computadora port√°til. </li><li>  Debe existir la posibilidad de replicar copias en la nube (la capacidad de configurar de manera flexible la replicaci√≥n para un almacenamiento en la nube en particular) con cifrado de copias de seguridad.  Esta es tambi√©n una de las consecuencias del "principio 3-2-1". </li><li>  Debe haber una gesti√≥n centralizada simple con integraci√≥n en la interfaz web. </li><li>  Un m√≠nimo de mejoras y configuraciones complejas en el servidor. </li></ul><br><h3 id="sostav-rezerviruemyh-resursov">  Composici√≥n de recursos reservados </h3><br><p>  En mi caso, es bastante t√≠pico: </p><br><ul><li>  La principal m√°quina de trabajo.  Computadora de escritorio </li><li>  M√°quina de trabajo m√≥vil.  El portatil. </li><li>  Enrutador LAN.  Almacena configuraciones de red, que pueden contener inicios de sesi√≥n y contrase√±as para una conexi√≥n a Internet y algunos servicios. </li><li>  NAS  S√≠, la configuraci√≥n del NAS tambi√©n es redundante.  A pesar de que la mayor√≠a de los FS tienen instant√°neas. </li></ul><br><h3 id="sostav-ugroz">  Composici√≥n de amenazas </h3><br><p>  Aqu√≠ es d√≥nde, qu√© y qu√© debe protegerse y de qu√© manera. </p><br><div class="spoiler">  <b class="spoiler_title">Para hacer esto, compil√© una peque√±a tabla de amenazas.</b> <div class="spoiler_text"><div class="scrollable-table"><table><thead><tr><th>  Recurso </th><th>  Amenaza </th><th>  Soluci√≥n </th></tr></thead><tbody><tr><td>  M√°quina de trabajo principal </td><td>  Corrupci√≥n de datos f√≠sicos </td><td>  Copia de seguridad de datos y configuraciones clave </td></tr><tr><td>  M√°quina de trabajo principal </td><td>  Corrupci√≥n de datos directos parcial e imperceptible </td><td>  Mantener copias de seguridad antiguas durante alg√∫n tiempo </td></tr><tr><td>  M√°quina de trabajo principal </td><td>  P√©rdida de acceso a datos. </td><td>  Almacenamiento de la imagen completa de la m√°quina, o <strong>configuraciones, para un cambio r√°pido en otra m√°quina</strong> , o la duplicaci√≥n de funciones en una PC m√≥vil </td></tr><tr><td>  M√°quina de trabajo principal </td><td>  Acceso f√≠sico no autorizado a los datos. </td><td>  Cifrado de datos y copias de seguridad, transferencia de copias cifradas </td></tr><tr><td>  M√°quina de trabajo principal </td><td>  Acceso no autorizado por violaci√≥n de software </td><td>  Reserva de sumas de verificaci√≥n de software y reconciliaci√≥n peri√≥dica, sistemas de control (a√∫n no implementados) </td></tr><tr><td>  M√°quina de trabajo m√≥vil </td><td>  Perder un auto junto con datos </td><td>  Cifrado de datos, respaldo completo o respaldo de configuraciones y datos clave </td></tr><tr><td>  Enrutador LAN </td><td>  Destrucci√≥n de una configuraci√≥n o dispositivo </td><td>  Redundancia de configuraci√≥n, posible redundancia del dispositivo </td></tr><tr><td>  Enrutador LAN </td><td>  P√©rdida de control debido a pirater√≠a </td><td>  Reserva de configuraci√≥n </td></tr><tr><td>  Enrutador LAN </td><td>  Corrupci√≥n parcial e invisible de datos </td><td>  Almacenamiento de suma de verificaci√≥n de software y conciliaci√≥n peri√≥dica </td></tr><tr><td>  NAS </td><td>  Configuraciones de servicio corruptas </td><td>  Reserva de reserva local </td></tr><tr><td>  NAS </td><td>  Corrupci√≥n de datos f√≠sicos </td><td>  Replicaci√≥n en la nube </td></tr><tr><td>  NAS </td><td>  P√©rdida de acceso al sistema y copias de seguridad. </td><td>  Replicaci√≥n en la nube </td></tr><tr><td>  NAS </td><td>  Acceso no autorizado a datos de terceros. </td><td>  Almacenamiento y replicaci√≥n de datos en forma encriptada, intercambio de datos en forma encriptada </td></tr><tr><td>  NAS </td><td>  Acceso no autorizado de administrador a los datos </td><td>  Cifrado de copias de seguridad en claves locales de m√°quinas redundantes </td></tr></tbody></table></div></div></div><br><p>  Todas las principales amenazas a la computadora m√≥vil repiten las amenazas a la estacionaria. <br>  Las tabletas pr√°cticamente no difieren de las m√≥viles, desde este punto de vista. </p><br><h3 id="dopolnitelnye-usloviya-politiki">  T√©rminos de pol√≠tica adicionales </h3><br><p>  Es recomendable tenerlos en cuenta: </p><br><ul><li>  Se deben realizar pruebas de recuperaci√≥n peri√≥dicas. </li><li>  Los procedimientos de recuperaci√≥n de fallas deben documentarse. </li><li>  Las acciones deben regularse en caso de una falla secundaria: qu√© hacer si, despu√©s de la restauraci√≥n, el sistema no est√° operativo o los datos no se pueden restaurar. </li><li>  Es necesario comprobar si el proceso de recuperaci√≥n depende de un equipo espec√≠fico. <br>  (que puede fallar en el momento de la recuperaci√≥n).  Yo, en mi caso, no comprobar√© esto, limitado a solo una comprobaci√≥n b√°sica del sistema. </li><li>  Si tiene una copia de seguridad completa del sistema, debe realizar una copia de seguridad inmediatamente despu√©s de una actualizaci√≥n sustancial. </li><li>  Si el volumen acumulado de las copias de seguridad incrementales excede el volumen de la copia de seguridad completa, es racional hacer una copia de seguridad completa no programada.  Es decir, la frecuencia de crear copias de seguridad completas deber√≠a aumentarse en este caso. </li></ul><br><p>  No tomo en cuenta el √∫ltimo punto de la pol√≠tica, porque generalmente mi flujo de trabajo no cambia, y es suficiente para monitorear el volumen por un tiempo, solo para la configuraci√≥n inicial. <br>  Emp√≠ricamente, se descubri√≥ que el esquema "mes, semana, d√≠a, hora" est√° bastante bien para m√≠. <br>  Para sistemas m√°s grandes, es posible que deba cambiar la frecuencia de respaldo din√°micamente para cada sistema. </p><br><h2 id="reglament-rezervnogo-kopirovaniya">  Regulaciones de respaldo </h2><br><p>  Despu√©s del desarrollo de una pol√≠tica, es posible proceder directamente con el desarrollo de una regulaci√≥n. <br>  En el caso general, puede haber varias regulaciones: generales, para los administradores de IBS, para los usuarios, para los responsables del almacenamiento, para los administradores de los sistemas de destino, etc. <br>  Pero en el caso de un sistema peque√±o, generalmente es una persona y, por lo tanto, solo hay una regulaci√≥n. </p><br><h3 id="zadachi-reglamenta">  Los objetivos de la normativa. </h3><br><ul><li>  Definici√≥n de procedimientos de respaldo de datos. </li><li>  Definici√≥n de procedimientos de recuperaci√≥n de datos. </li><li>  Definici√≥n de un procedimiento de verificaci√≥n del estado del sistema. </li><li>  Condiciones de almacenamiento de respaldo y requisitos de medios. </li><li>  Agilizaci√≥n del trabajo. </li></ul><br><h3 id="primer-reglamenta">  Ejemplo de regulaci√≥n </h3><br><p>  Bajo el spoiler, puede ver c√≥mo se ven las reglas en una organizaci√≥n grande, utilizando el ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://web.archive.org/web/20160731233007/">de la regulaci√≥n de Rosreestr tomada de fuentes abiertas</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Reglamento de Rosreestr.</b> <div class="spoiler_text"><h1 id="reglament-rezervnogo-kopirovaniya-dannyh-v-territorialnyh-podrazdeleniyah-rosreestra">  REGULACI√ìN DE LA COPIA DE SEGURIDAD DE DATOS EN DEPARTAMENTOS TERRITORIALES DE ROSRESTR </h1><br><h2 id="oglavlenie">  Tabla de contenidos </h2><br><ol><li>  Disposiciones generales </li><li>  Pedido de respaldo. </li><li>  Seguimiento de los resultados. </li><li>  Apoyo regulatorio. </li><li>  Rotaci√≥n de medios de respaldo. </li><li>  Restaurar informaci√≥n de una copia de seguridad. </li><li>  Ap√©ndice 1 </li><li>  Ap√©ndice 2 Lista de personas responsables del respaldo. </li></ol><br><h2 id="1--obschie-polozheniya">  <strong>1</strong> general </h2><br><p>  El presente Reglamento establece los requisitos b√°sicos para la organizaci√≥n de la copia de seguridad (recuperaci√≥n) de programas y datos almacenados en bases de datos en los servidores de la autoridad territorial de Rosreestr, as√≠ como para la copia de seguridad del hardware. </p><br><p>  El presente Reglamento est√° dise√±ado para: </p><br><ul><li>  determinaci√≥n de la categor√≠a de informaci√≥n sujeta a respaldo obligatorio; </li><li>  determinar el procedimiento para realizar una copia de seguridad de los datos para la posterior restauraci√≥n del rendimiento de los sistemas de informaci√≥n en caso de una p√©rdida total o parcial de informaci√≥n causada por fallas o mal funcionamiento del hardware o software, errores del usuario, emergencias (incendios, desastres naturales, etc.); </li><li>  determinar el procedimiento para recuperar informaci√≥n en caso de tal necesidad; </li><li>  racionalizar el trabajo y determinar la responsabilidad de los funcionarios relacionados con el respaldo y la restauraci√≥n de la informaci√≥n. </li></ul><br><p>  Copia de seguridad de la informaci√≥n significa la creaci√≥n de copias completas de las bases de datos de producci√≥n de la Oficina para la recuperaci√≥n r√°pida del sistema de gesti√≥n de la informaci√≥n del Registro Estatal Unificado de Empresas "Justicia" AIS en caso de una emergencia que resulte en da√±os o p√©rdida de datos. </p><br><p>  Todas las bases de datos de producci√≥n de todos los departamentos territoriales de la Oficina est√°n sujetas a respaldo. </p><br><p>  Al medio de almacenamiento de la m√°quina que contiene una copia de respaldo se le asigna un sello de confidencialidad para el sello m√°s alto de informaci√≥n contenida en ellos. </p><br><p>  Las copias de seguridad se almacenan fuera de la sala de servidores, el acceso a las copias de seguridad es limitado.  La lista de personas que tiene acceso a los datos se forma sobre la base de una solicitud escrita del jefe de la unidad de tecnolog√≠a de la informaci√≥n (TI), acordada con el jefe de la unidad de seguridad de la informaci√≥n (IS).  Los derechos de acceso a medios t√©cnicos reservados, matrices y medios de almacenamiento se cambian sobre la base de una aplicaci√≥n del jefe del departamento de TI, acordado con el jefe del departamento de IS.  Los intentos detectados de acceso no autorizado a la informaci√≥n reservada y el hardware, as√≠ como otras violaciones de IS que ocurrieron durante el proceso de respaldo, se informan a la unidad de IS con una nota de servicio durante el d√≠a h√°bil despu√©s de la detecci√≥n del evento especificado. </p><br><h2 id="2-poryadok-rezervnogo-kopirovaniya">  <strong>2</strong> Orden de respaldo </h2><br><p>  La copia de seguridad se realiza por medios regulares de Oracle DBMS.  La copia de seguridad se puede hacer: </p><br><ul><li>  Manualmente: el operador responsable de la copia de seguridad inicia el procedimiento de exportaci√≥n de Oracle (un ejemplo de inicio del procedimiento en el Ap√©ndice 1). </li><li>  Autom√°ticamente: el sistema operativo inicia autom√°ticamente el archivo ejecutable que llama al procedimiento de exportaci√≥n de Oracle de acuerdo con la programaci√≥n. </li></ul><br><p>  La copia de seguridad de la base de datos se realiza al menos 1 vez por d√≠a.  El per√≠odo de almacenamiento de la base de datos de respaldo es de al menos 1 mes. </p><br><p>  La estrategia de respaldo debe garantizar la recuperaci√≥n sincr√≥nica de los datos ubicados en diferentes esquemas de bases de datos.  Por ejemplo, el esquema HED (el repositorio de documentos electr√≥nicos) debe copiarse simult√°neamente con el esquema AIS Justice. </p><br><p>  El material y los medios t√©cnicos del sistema de respaldo deben proporcionar un rendimiento suficiente para guardar informaci√≥n, a tiempo y a intervalos espec√≠ficos.  Las personas responsables de organizar el respaldo diariamente monitorean la disponibilidad de la cantidad de espacio en disco necesaria para el respaldo. </p><br><h2 id="3-kontrol-rezultatov">  <strong>3</strong> Seguimiento de resultados </h2><br><p>  Los resultados de todos los procedimientos de respaldo son monitoreados por los funcionarios responsables indicados en el Ap√©ndice 2, hasta 10 horas el d√≠a h√°bil siguiente a la fecha establecida para realizar estos procedimientos. </p><br><p>  Si se detecta un error, la persona responsable de monitorear los resultados lo informa al servicio de soporte t√©cnico del desarrollador a m√°s tardar 11 horas del d√≠a laborable actual. </p><br><h2 id="4-normativno-pravovoe-obespechenie">  <strong>4</strong> Apoyo reglamentario </h2><br><p>  Para organizar el proceso de copia de seguridad, debe: </p><br><ul><li>  Defina una lista de personas responsables de realizar el proceso de respaldo y monitorear sus resultados (Ap√©ndice 2). </li><li>  Prepare y apruebe un cronograma de respaldo. </li><li>  Preparar y aprobar documentos reglamentarios internos sobre el nombramiento de los responsables de la copia de seguridad de los datos. </li></ul><br><h2 id="5-rotaciya-nositeley-rezervnoy-kopii">  <strong>5</strong> medios de copia de seguridad giratorios </h2><br><p>  El sistema de respaldo debe proporcionar la capacidad de reemplazar (descargar) peri√≥dicamente los medios de respaldo sin p√©rdida de informaci√≥n sobre ellos, y tambi√©n garantizar la restauraci√≥n de la informaci√≥n actual de los sistemas automatizados en caso de falla de cualquiera de los dispositivos de respaldo.  Todos los procedimientos para cargar, descargar medios desde el sistema de respaldo, as√≠ como su transferencia al Servicio de Seguridad y viceversa, los lleva a cabo el administrador de respaldo a pedido y en presencia de un empleado responsable del Servicio de Seguridad del Cliente (de acuerdo con el Ap√©ndice No. 2). </p><br><p>  Como nuevos transportistas, est√° permitido reutilizar aquellos para los cuales el per√≠odo de almacenamiento de la informaci√≥n contenida ha expirado. </p><br><p>  La informaci√≥n confidencial de los medios que ya no se usan en el sistema de respaldo debe borrarse con el software PGP. </p><br><h2 id="6-vosstanovlenie-informacii-iz-rezervnoy-kopii">  <strong>6</strong> Restaurar informaci√≥n desde una copia de seguridad </h2><br><p>  Si es necesario, la restauraci√≥n de los datos de las copias de seguridad es realizada por el empleado responsable del departamento de TI especificado en el Ap√©ndice No. 2. </p><br><p>  La recuperaci√≥n de datos de las copias de seguridad ocurre en el caso de su desaparici√≥n o violaci√≥n debido al acceso no autorizado al sistema, exposici√≥n a virus, errores de software, errores de empleados y fallas de hardware. </p><br><p>  La restauraci√≥n del software del sistema y el software de uso general se realiza desde sus medios de acuerdo con las instrucciones del fabricante. </p><br><p>  La restauraci√≥n del software especializado se realiza desde los medios de distribuci√≥n o sus copias de seguridad de acuerdo con las instrucciones para instalar o restaurar este software. </p><br><p>  La informaci√≥n que no est√° relacionada con el cambio constante de las bases de datos se restaura desde los medios de respaldo.  Esto utiliza la √∫ltima copia de la informaci√≥n. </p><br><p>  En caso de violaci√≥n parcial o desaparici√≥n de los registros de la base de datos, la restauraci√≥n se realiza desde la √∫ltima copia diaria no perturbada.  Toda la informaci√≥n se restaura desde la √∫ltima copia. </p><br><h2 id="7-prilozhenie-1">  <strong>7</strong> Ap√©ndice 1 </h2><br><p>  Un ejemplo de inicio de la utilidad de exportaci√≥n de Oracle desde la l√≠nea de comandos: </p><br><p>  exp userid = JUST_USER / PASSWORD @ SERVER propietario = (JUST_USER, HED_USER) directo = Y consistente = Y estad√≠sticas = NINGUNA compresa = N archivo = C: \ BACKUP.DMP log = C: \ BACKUP.LOG </p><br><p>  donde: </p><br><p>  JUST_USER / PASSWORD @ SERVER <em>-</em> schema_owner_name / password @ server_name; </p><br><p>  propietario = (JUST_USER, HED_USER): lista de esquemas copiados; en este ejemplo, el esquema AIS Justice y el esquema HED se exportan simult√°neamente; </p><br><p>  file = C: \ BACKUP.DMP <em>:</em> ruta y nombre del archivo de exportaci√≥n creado; </p><br><p>  log = C: \ BACKUP.LOG <em>:</em> ruta y nombre del archivo de registro de exportaci√≥n creado. </p><br><h2 id="8-prilozhenie-2-perechen-lic-otvetstvennyh-za-rezervnoe-kopirovanie">  <strong>8</strong> Ap√©ndice 2. Lista de personas responsables del respaldo </h2><br><div class="scrollable-table"><table><thead><tr><th>  <strong>No. p / p</strong> </th><th>  <strong>Papel</strong> </th><th>  <strong>Nombre del oficial responsable</strong> </th></tr></thead><tbody><tr><td>  1 </td><td>  Configuraci√≥n inicial del sistema de respaldo. </td><td></td></tr><tr><td>  2 </td><td>  Realizar cambios significativos en la configuraci√≥n del sistema de respaldo. </td><td></td></tr><tr><td>  3 </td><td>  An√°lisis de registros de respaldo, seguimiento de la necesidad de cambios en la configuraci√≥n de respaldo, asegurando la rotaci√≥n de medios. </td><td></td></tr><tr><td>  4 4 </td><td>  Rotaci√≥n de medios, verificando la correcci√≥n de la copia de seguridad, asegurando que la copia de seguridad se almacene fuera de la oficina en caso de un desastre. </td><td></td></tr></tbody></table></div></div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠</a> encontrar√°s otro ejemplo con una breve descripci√≥n. </p><br><h3 id="procedura-rezervirovaniya">  Procedimiento de reserva </h3><br><p>  Composici√≥n de los datos de respaldo: </p><br><ul><li>  M√°quinas de trabajo: <br><ul><li>  Directorios de usuarios personales ( <code>/home/*</code> ).         . </li><li>   . </li><li>    ,   ( <code>/opt</code> ). </li><li>   ( <code>/etc</code> ). </li><li>    . </li><li>  . </li><li>   . </li><li>   . </li></ul></li><li> : <br><ul><li>  . </li></ul></li><li> NAS: <br><ul><li>    Docker . </li><li>   . </li><li>  . </li><li>    . </li><li>  . </li><li>     Docker . </li><li>   . </li><li>    . </li></ul></li><li>  : <br><ul><li>    . </li></ul></li></ul><br><p>  : </p><br><ul><li>       . </li><li>     ,    . </li><li>          <code>/etc/apt/apt.conf.d</code> ,  ,     . </li><li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> Mikrotik</a> . </li><li> NAS    . </li></ul><br><p>  : </p><br><ul><li>     1      .     . <br>  3 . </li><li>     1     . <br>  . </li><li>     1   . <br>  . </li><li>       . <br>  . </li><li>          . <br>    6 ,      . </li></ul><br><h3 id="procedura-vosstanovleniya">   </h3><br><p><img src="https://habrastorage.org/webt/qu/i3/il/qui3ilw9nczsm17-w7d1dwcalhy.jpeg"></p><br><ul><li>        ,  . </li><li>       ,    . </li></ul><br><p>        : </p><br><ul><li>   live . </li><li>        . </li><li>     ,  . </li></ul><br><p>  ,           Debian   (  Squeeze  2011 ),           Slackware  ReiserFS    . </p><br><p>       : </p><br><ul><li>    ,  . </li><li>       . </li><li>   ,    . </li><li>       . </li></ul><br><p> Mikrotik   ,    RouterOS . </p><br><h3 id="procedura-proverki-rabotosposobnosti">    </h3><br><ul><li>       . <br>   logcheck, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> . </li><li>          . </li></ul><br><p>       ,    . </p><br><h3 id="usloviya-hraneniya-rezervnyh-kopiy-i-trebovaniya-k-nositelyam">         </h3><br><ul><li>      . </li><li>    1        . <br>              . </li><li>  .     . </li><li>    . </li></ul><br><h2 id="resheniya-dlya-rezervnogo-kopirovaniya">     </h2><br><p>     ,       . </p><br><h3 id="trebovaniya-k-po">    </h3><br><p>      : </p><br><ul><li>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Veeam</a>     ,   ,    .     ,    Acronis,    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . </li><li>             . </li><li>          . </li></ul><br><h3 id="vybor-po">   </h3><br><p>          . <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . </p><br><div class="spoiler"> <b class="spoiler_title">  .</b> <div class="spoiler_text"><h3 id="resheniya-na-baze-unix-utilit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Soluciones de utilidad Unix </font></font></h3><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluciones basadas en rsync, tar, rdiff-backup, etc. </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no se consideran debido a la gran cantidad de trabajo que deber√° realizarse y a la falta de la interfaz WEB necesaria.</font></font></p><br><h3 id="bareoshttpswwwbareosorgen"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breos</font></font></a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/kp/pa/7t/kppa7tts84fep2t5rfk52poagx4.png"></a> </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> BareOS (Backup Archiving Recovery Open Sourced) - tenedor de Bacula desde 2010. </font></font></p><br><p>  Pros: </p><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sistema depurado estable. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Admite varios tipos de agentes en diferentes sistemas operativos. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Admite varios tipos de copia de seguridad: incremental, diferencial, completa. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La interfaz WEB est√° muy desarrollada y es funcional. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n flexible </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hay un controlador FUSE que muestra copias de seguridad. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hay un enlace para Python que le permite interactuar con Director. </font></font></li><li>       (, ). </li><li>       . </li><li>     . </li></ul><br><p>  Contras: </p><br><ul><li>    . </li><li>   . </li><li>    . </li><li>   ,    . </li><li>   (500+ ),    ,          . </li></ul><br><h3 id="backuppchttpbackuppcsourceforgenet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BackupPC</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/zi/dv/e4/zidve44-5zrteeqdkiosyigkvwu.png"></a> </p><br><p>    . </p><br><p>   : </p><br><ul><li>    . </li><li>    . </li><li>  Web-. </li><li>    . </li><li> .    ,       . </li><li>   . </li><li>   ,   SMB, rsync. </li><li>      Web-. </li><li>     ,      . </li><li>  ,  ,      . </li><li>   . </li></ul><br><p>  Contras: </p><br><ul><li>   Perl,   CPAN. </li><li>    ,    ,     . <br>        ,   ,   ,     .   ,         SSH   ,   ,    , ..      . </li><li>      (  ,    ). </li></ul><br><h3 id="urbackuphttpswwwurbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">UrBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/u1/lo/ed/u1loed_wq1-njxjlq1f7ths2kso.png"></a> </p><br><p> -     . </p><br><p>   : </p><br><ul><li>  . </li><li>  Web-. </li><li>    . </li><li>      ( .. ). </li><li>   Windows, Linux, MacOS X. </li><li>    :     ,        . </li><li>     . </li><li>     . </li><li>      (,  Outlook,     ). </li><li>   .    ,       . </li><li>   (,   ..)     . </li><li>  . </li><li>    ,     . </li><li>     ,      . </li><li>   . </li><li>      Internet. </li><li>   (,  ) . </li><li>     . </li><li>     (,   USB ). </li><li>  . </li><li>  GUI     . </li></ul><br><p>  Contras: </p><br><ul><li>   Windows,    , . </li><li>      NTFS. </li><li>  LDAP,   ,  ,   AD      . </li></ul><br><h3 id="restichttpsresticnet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Restic</a> </h3><br><p>         . </p><br><p>   : </p><br><ul><li>  . </li><li>      . </li><li> .    ,       . </li><li>   / .   .    . </li><li>       .    . </li><li>   . </li><li>  FUSE ,       host/. </li></ul><br><p>  Contras: </p><br><ul><li> Web- . </li><li>    RAM (~2.7GB  1TB). </li><li>   ACL   . </li><li>     RAM   . </li><li>      (     ). </li><li>       (        ).    . </li><li>       restic. </li></ul><br><h3 id="borgbackuphttpswwwborgbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BorgBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/a_/qp/rh/a_qprhceevkysy_nk_xg20os5x0.jpeg"></a> </p><br><p>     . </p><br><p>   : </p><br><ul><li>   . </li><li>        . </li><li>   (   Python,      C  ). </li><li> . </li><li> : LZ4, zlib, LZMA. </li><li>  FUSE ,   . </li><li>     : Linux, macOS, BSD, etc. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> Web-,   </a> . </li><li>    . </li></ul><br><p>  Contras: </p><br><ul><li> Web-  . </li><li>     Windows (  Linux subsystem  cygwin). </li></ul><br><h3 id="lsyncdhttpsgithubcomaxkibelsyncd"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lsyncd</a> </h3><br><p> ,      rsync. </p><br><p>   : </p><br><ul><li>  inotify  fsevents    .     rsync   . </li><li>     rsync. </li><li>   Lua,     Lua. </li><li>      . </li><li>  . </li></ul><br><p>  Contras: </p><br><ul><li>  .   Web-   . </li></ul><br><h3 id="box-backuphttpswwwboxbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Box Backup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/4e/o-/ta/4eo-taslxisuzzofmwhmmjtjxmk.png"></a> </p><br><p>       . <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> . </p><br><p>   : </p><br><ul><li>                 ,  . </li><li>  ,  TLS,   ,     SSL . </li><li>    ,   "" ,    . </li><li>      . </li><li> ,   :   ,   . </li><li>      ,    . </li><li>  . </li><li>      :     . </li><li>      RAID. </li><li>  *nix-like , Windows native, Windows cygwin. </li><li>   GUI. </li></ul><br><p>  Contras: </p><br><ul><li>     ,    UID.       ,    . </li><li>  Web-. </li></ul></div></div><br><p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">UrBackup</a> . <br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . </p><br><p>           . </p><br><h3 id="nastroyka-servera-urbackup">   UrBackup </h3><br><p>        ,   : </p><br><pre> <code class="plaintext hljs"># zfs create -o com.sun:auto-snapshot=false -p tank0/apps/backup # zfs set compression=on tank0/apps/backup</code> </pre> <br><p>   ,     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  UrBackup  ZFS </a> . </p><br><p>   ,            : </p><br><pre> <code class="plaintext hljs"># zfs set dedup=on tank0/apps/backup</code> </pre> <br><p>     UrBackup  : </p><br><pre> <code class="plaintext hljs"># mkdir /tank0/docker/services/urbackup # cd /tank0/docker/services/urbackup # vim docker-compose.yml # docker-compose up -d</code> </pre> <br><p>   docker-compose  . <br>     Web-      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> . </p><br><div class="spoiler">  <b class="spoiler_title">docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">version: '2' networks: docker0: external: name: docker0 services: urbackup: uroni/urbackup-server image: restart: always expose: - 55414 ports: # - 55413:55413 - 55415:55415 - 35623:35623/udp volumes: - /tank0/apps/backup/urbackup/database:/var/urbackup - /tank0/apps/backup/urbackup/backups:/backups - /tank0/apps/backup/urbackup/log:/var/log - /etc/localtime:/etc/localtime:ro networks: - docker0 environment: - VIRTUAL_HOST=backup.* - VIRTUAL_PORT=55414 - VIRTUAL_PROTO=http - CERT_NAME=NAS.cloudns.cc - TZ=Europe/Moscow</code> </pre> </div></div><br><p>  Docker  <code>uroni/urbackup-server</code>  ,      <code>tristanteu/urbackup-docker</code> . <br>       . </p><br><p> ,      : </p><br><ol><li>  .           UrBackup  LDAP . </li><li>    LDAP.  LDAP  .  "   ".  ,      . </li><li>   . </li><li>       ,  .   .     .  ,       NAS,     . </li><li>  -. </li></ol><br><p>   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/03/xx/3d/03xx3dgvb6xtswdsfejbdakwwkg.png"></a> </p><br><p>  : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/um/0u/1h/um0u1h_i9ikrjhpgt-ppfyjubzs.png" alt="Agregar administrador"></a> </p><br><p> LDAP    ,     :     ,         . </p><br><p>      : </p><br><pre> <code class="bash hljs">ou=users,dc=nas,dc=nas?memberOf,objectClass?sub?(&amp;(memberOf=cn=users_backup,ou=groups,dc=nas,dc=nas)(uid={USERNAME}))</code> </pre> <br><p>   - ,    . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/az/wb/0q/azwb0qxoafmccqrzs1iyrchpi2q.png" alt="Configuraci√≥n LDAP"></a> </p><br><p>     ,      ,       . <br>       ,     : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xi/cx/vn/xicxvnphcifc4z8ocwwrem8hqei.png"></a> </p><br><p>  -: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sp/vk/uc/spvkuc8fxj9-vxldm4k9qmb7c6o.png"></a> </p><br><p>  ,     ,        . </p><br><p> ,  UrBackup: </p><br><ul><li>  TCP 55415 ‚Äî   . </li><li>  TCP 55414 ‚Äî Web-  HTTP. </li><li>  TCP 55413 ‚Äî Web-  FastCGI,        Web-.  Porque    NAS  HTTP/HTTPS,    . </li><li>  TCP 35621 ‚Äî           . </li><li>  UDP 35622 ‚Äî       .        .      . </li><li>  TCP 35623 ‚Äî              . </li><li>  UDP 35623 ‚Äî    . </li></ul><br><p> ,  55415    ,   35621, 35622, 35623         . </p><br><h3 id="ustanovka-agenta">   </h3><br><p>            ,      . </p><br><p>     : </p><br><ul><li>   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>  shell . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  GUI</a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Docker-</a> . </li></ul><br><p>   UrBackup , ..      ,            : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/-k/e3/k4/-ke3k4w2aornwpmehottv2shgxk.png" alt="P√°gina de descarga del agente"></a> </p><br><p>      . </p><br><p>     shell : </p><br><pre> <code class="bash hljs">TF=`mktemp` &amp;&amp; wget <span class="hljs-string"><span class="hljs-string">"https://NAS.system.cloudns.cc/x?a=download_client&amp;lang=ru&amp;clientid=1&amp;authkey=KEY&amp;os=linux"</span></span> -O <span class="hljs-variable"><span class="hljs-variable">$TF</span></span> &amp;&amp; sh <span class="hljs-variable"><span class="hljs-variable">$TF</span></span>; rm <span class="hljs-variable"><span class="hljs-variable">$TF</span></span></code> </pre> <br><p>         : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># urbackupclientctl status { "capability_bits": 65548, "finished_processes": [], "internet_connected": true, "internet_status": "connected", "last_backup_time": 0, "running_processes": [], "servers": [], "time_since_last_lan_connection": 152446032 }</span></span></code> </pre> <br><p>    NAS     ,   : </p><br><ul><li>  : <code>/etc;/home;/var;/root;/tank0/apps;/tank0/docker</code> . </li><li> : <code>/tank0/apps/backup;/tank1/apps/backup;/tank0/apps/cloud/nextcloud/html/data</code> . </li></ul><br><p>       ,   ,  ,    ,  ,     . </p><br><p>  ,     ,  , "  ",  ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/qr/np/ts/qrnptsrut7fv4rumu7rde8fwypm.png"></a> </p><br><p>       : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status ‚óè urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 21:55:53 MSK; 37min ago Main PID: 1694 (urbackupclientb) Tasks: 14 (limit: 4915) Memory: 13.4G CGroup: /system.slice/urbackupclientbackend.service ‚îî‚îÄ1694 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/   .djvu"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/  .doc"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/-.fb2"</span></span></code> </pre> <br><h3 id="problemy">  Los problemas </h3><br><p>  , UrBackup       ,   .     . <br>    ‚Äî    -,    . </p><br><div class="spoiler"> <b class="spoiler_title">    ...</b> <div class="spoiler_text"><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status ‚óè urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 20:36:54 MSK; 9s ago Main PID: 27034 (urbackupclientb) Tasks: 10 (limit: 4915) Memory: 6.1M CGroup: /system.slice/urbackupclientbackend.service ‚îî‚îÄ27034 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 20:36:54 host urbackupclientbackend[27034]: urbackupserver: Server started up successfully!  30 20:36:54 host urbackupclientbackend[27034]: FileSrv: Server started up successfully  30 20:36:54 host urbackupclientbackend[27034]: Started UrBackupClient Backend...  30 20:36:55 host urbackupclientbackend[27034]: Looking for old Sessions... 2 sessions  30 20:36:56 host urbackupclientbackend[27034]: Trying to connect to internet server "NAS.system.cloudns.cc" at port 55415  30 20:36:56 host urbackupclientbackend[27034]: Successfully connected.  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error</span></span></code> </pre> </div></div><br><p>     : </p><br><pre> <code class="bash hljs">ERROR: Internet mode not enabled. Please <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"internet_mode_enabled"</span></span> to <span class="hljs-string"><span class="hljs-string">"true"</span></span>.</code> </pre> <br><p>             . </p><br><p>        : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend stop ~# rm -rf /usr/local/var/urbackup/</span></span></code> </pre> <br><p>      <code>/etc/default/urbackupclient</code> ,     . </p><br><p>          ,     <code>/usr/local/var/urbackup/data/settings.cfg</code> . </p><br><p>   ,    ,     : </p><br><pre> <code class="plaintext hljs">internet_server=NAS.system.cloudns.cc internet_server_port=55415 internet_authkey=44R3MUIdB computername=zenbook internet_mode_enabled=true</code> </pre> <br><p>   ,   ,     -. <br>  ,     ,   ,      . </p><br><h3 id="zapusk-polnogo-rezervnogo-kopirovaniya-posle-obnovleniya">       </h3><br><p>  Debian,    ,       <code>/etc/apt/apt.conf.d/80full-backup</code> : </p><br><pre> <code class="python hljs">DPkg::Post-Invoke {<span class="hljs-string"><span class="hljs-string">"test -x /usr/local/bin/urbackupclientctl &amp;&amp; /usr/local/bin/urbackupclientctl start -f || true"</span></span>; };</code> </pre> <br><h3 id="rezervnaya-kopiya-routera">    </h3><br><p>    NAS,    .  ,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mtbackup</a>  SSH,    NAS. <br>    Python    ,   ,    ,    UrBakup,   . </p><br><h3 id="proverka-vosstanovleniya">   </h3><br><p>   : </p><br><ul><li> . </li><li> . </li></ul><br><p> ,     :         .  ,    . </p><br><p>    ,   : </p><br><ul><li>    . </li><li>    ,   . </li><li>    . </li><li>  ,   ,   . </li><li>    . </li><li>   . </li><li>   ,   . </li></ul><br><p>   ,   - ,     . </p><br><h2 id="oblachnye-servisy-dlya-rezervirovaniya">     </h2><br><p><img src="https://habrastorage.org/webt/ms/no/j4/msnoj4lqhhfm-keodwyhhdoaudm.jpeg"></p><br><p>       . <br>      ,        ,          . <br>       -  ,     ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Storj</a> . </p><br><h2 id="literatura">  </h2><br><p>     ,       ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    debian-russian</a> .   ,  "  rsync?". </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">" "</a> . </li><li> " 3-2-1" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  Veeam</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> . </li><li>  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   Veeam</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://web.archive.org/web/20181201152034/">"    "</a>  ,  ,   . </li><li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">" :     "</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    </a> ,          . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    </a> . </li></ul><br><p> ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">W. Curtis Preston ‚Äî "Backup &amp; Recovery" ‚Äî 2000</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> .. ‚Äî     </a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> . ‚Äî Backup  "" ‚Äî 2014</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Steven Nelson ‚Äî Pro Data Backup and Recovery ‚Äî 2011</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dorian Cougias ‚Äî The Backup Book: Disaster Recovery from Desktop to Data Center, 3 edition ‚Äî 2003</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>      (2017 )  . </li></ul><br><p>      . </p><br><p>       ,          RTO, RPA, RPO. ,    ,         ,      . </p><br><p> -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   NAS</a> , , ,   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421251/">https://habr.com/ru/post/es421251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421241/index.html">El Banco Central solicita el bloqueo previo a la prueba de sitios maliciosos</a></li>
<li><a href="../es421243/index.html">LLTR Parte 2: Algoritmo para determinar la topolog√≠a de la red a partir de estad√≠sticas recopiladas</a></li>
<li><a href="../es421245/index.html">C #: un caso de uso para cualquier tarea</a></li>
<li><a href="../es421247/index.html">C√≥mo convertir gr√°ficos en sonido y por qu√© lo necesita</a></li>
<li><a href="../es421249/index.html">¬øPor qu√© los financieros de Wall Street trabajan demasiado? ¬øSe puede solucionar?</a></li>
<li><a href="../es421253/index.html">¬øPor qu√© necesitamos autos con cola?</a></li>
<li><a href="../es421255/index.html">Elon Musk abandon√≥ los planes para convertir a Tesla en una empresa privada</a></li>
<li><a href="../es421257/index.html">C√≥mo una red internacional de hackers gan√≥ $ 100 millones robando comunicados de prensa</a></li>
<li><a href="../es421259/index.html">Si est√° considerando comenzar a escribir en Go, esto es lo que debe saber</a></li>
<li><a href="../es421261/index.html">El efecto de la acrasia: por qu√© no cumplimos nuestros planes y qu√© hacer al respecto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>