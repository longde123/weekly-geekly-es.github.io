<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟🏻 🤜🏼 👂🏻 الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 3 🧑🏾‍🤝‍🧑🏻 👜 🤵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يستمر هذا المقال في سلسلة من الملاحظات المترجمة حول OpenWhisk التي كتبها Priti Desai . سننظر اليوم في أمثلة لنشر وظائف Zip وتبعيات GitHub ، كما سنشرح ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 3</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/479492/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yk/jd/cb/ykjdcbuozxj70sxwrtxebx0l6u8.png"></p><br><p style=";text-align:right;direction:rtl">  يستمر هذا المقال في سلسلة من الملاحظات المترجمة حول OpenWhisk التي كتبها Priti <a href="https://medium.com/%40pdesai8">Desai</a> .  سننظر اليوم في أمثلة لنشر وظائف Zip وتبعيات GitHub ، كما سنشرح بمزيد من التفصيل تزامن الكائنات بين العميل وخادم OpenWhisk. </p><a name="habracut"></a><br><h2 id="zip-funkcii" style=";text-align:right;direction:rtl">  وظائف الرمز البريدي </h2><br><p style=";text-align:right;direction:rtl"> يدعم OpenWhisk إنشاء وظائف من ملف مصدر واحد ، كما كان [موضح سابقًا] ().  كما يدعم إنشاء وظيفة باستخدام عدة ملفات برمز مصدر ومجموعة من الحزم التي تعتمد عليها الوظيفة.  تسمى حالة الاستخدام هذه للوظائف وظيفة zip.  دعنا نحاول نشر وظيفة zip باستخدام <code>wskdeploy</code> . </p><br><h3 id="shag-pervyy" style=";text-align:right;direction:rtl">  الخطوة الأولى </h3><br><p style=";text-align:right;direction:rtl">  قم بإنشاء ملف بيان: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: zipaction: actions: my-zip-action: function: actions/my-zip-action runtime: nodejs:6 inputs: name: Amy</code> </pre> <br><p style=";text-align:right;direction:rtl">  نعتقد أن <code>my-zip-action</code> لها بنية دليل تحتوي على الكود المصدري للوظيفة: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ls actions/my-zip-action index.js package.json</code> </pre> <br><p style=";text-align:right;direction:rtl">  محتويات ملف <strong>index.js</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function helloworld(params) { var format = require('string-format'); var name = params.name || 'Stranger'; payload = format('Hello, {}!', name) return { message: payload }; } exports.main = helloworld;</code> </pre> <br><p style=";text-align:right;direction:rtl">  محتويات ملف <strong>package.json</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ "name": "my-zip-action", "description": "Node OpenWhisk zip action to demo Whisk Deploy", "license": "Apache-2.0", "version": "1.0.0", "main": "index.js", "dependencies": { "string-format": "0.5.0" } }</code> </pre> <br><h3 id="shag-vtoroy" style=";text-align:right;direction:rtl">  الخطوة الثانية </h3><br><p style=";text-align:right;direction:rtl">  قم بتشغيل npm install لتثبيت صيغة السلسلة: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cd actions/my-action npm install --production</code> </pre> <br><h3 id="shag-tretiy" style=";text-align:right;direction:rtl">  الخطوة الثالثة </h3><br><p style=";text-align:right;direction:rtl">  توسيع وظيفة الرمز البريدي: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./wskdeploy -i -p actions/my-zip-action/ ____ ___ _ _ _ _ _ /\ \ / _ \ _ __ ___ _ __ | | | | |__ (_)___| | __ /\ /__\ \ | | | | '_ \ / _ \ '_ \| | | | '_ \| / __| |/ / / \____ \ / | |_| | |_) | __/ | | | |/\| | | | | \__ \ &lt; \ \ / \/ \___/| .__/ \___|_| |_|__/\__|_| |_|_|___/_|\_\ \___\/ |_| Packages: Name: zipaction bindings: * action: my-zip-action bindings: - name: name value: Amy Do you really want to deploy this? (y/N): y Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl">  لقد نشرنا وظيفة zip <strong>my-zip-action</strong> <code>string-format</code> الوحدة التابعة.  عند تحديد دليل في البيان باستخدام مفتاح <code>function</code> ، يتم إنشاء أرشيف مضغوط من هذا الدليل ، وكذلك وظيفة من هذا الأرشيف ، لذلك لا تحتاج إلى البحث عنه في نظام الملفات.  بعد النشر ، يمكنك العمل مع الوظيفة الجديدة بنفس طريقة العمل مع الوظائف الأخرى. </p><br><h2 id="include-i-exclude-dlya-faylov-v-zip-funkciyah" style=";text-align:right;direction:rtl">  تضمين واستبعاد للملفات في وظائف الرمز البريدي </h2><br><p style=";text-align:right;direction:rtl">  يسمح لك OpenWhisk بإنشاء وظيفة باستخدام أرشيف مضغوط يحتوي على أي عدد من ملفات الوظيفة ، بما في ذلك  كل إدماناتها.  يدعم النشر تحديد <code>function</code> الدليل مع ملفات للوظيفة لكي تعمل.  سيتم إنشاء أرشيف من محتويات الدليل ، حيث سيتم نشر الوظيفة بالفعل. </p><br><h3 id="vklyuchenie-faylov" style=";text-align:right;direction:rtl">  إدراج ملف </h3><br><p style=";text-align:right;direction:rtl">  في السابق ، كان من الممكن تحديد مفتاح <code>include</code> ، والذي يعمل بنفس طريقة <code>import</code> بلغات البرمجة ، والذي سمح ، على سبيل المثال ، بعدة وظائف للإشارة إلى نفس المكتبة برمز: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd actions/ $ ls -1 ./ common/ greeting1/ greeting2/ manifest.yaml $ ls -1 common/ utils.js $ ls -1 greeting1/ index.js package.json $ ls -1 greeting2/ index.js package.json</code> </pre> <br><p style=";text-align:right;direction:rtl">  يمكنك مشاهدة ملف <code>index.js</code> في دليل <code>greeting1</code> ، وكذلك ملف <code>index.js</code> آخر في دليل <code>greeting2</code> ، ويشير كلاهما إلى <code>utils.js</code> الموجود في <code>common/</code> . </p><br><p style=";text-align:right;direction:rtl">  محتويات ملف index.js الموجود في <code>actions/greeting1/</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var common = require('./common/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = common.hello || 'Good Morning'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p style=";text-align:right;direction:rtl">  محتويات ملف index.js الموجود في <code>actions/greeting2/</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var common = require('./common/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = common.hello || 'Good Evening'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p style=";text-align:right;direction:rtl">  داخل مفتاح <code>include</code> يحتوي على قائمة من الملفات أو الدلائل التي يجب تضمينها في الوظيفة.  يجب أن يكون لكل عنصر في هذه القائمة <code>source</code> و / أو <code>destination</code> ، على سبيل المثال: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - [source] - [source, destination]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ملاحظات: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>source</code> يحتوي على المسار النسبي من الدليل الذي يحتوي على <code>manimanifest.yaml</code> .  تعني <code>destination</code> المسار النسبي من دليل الوظائف ، على سبيل المثال ، <code>actions/greeting1</code> <code>actions/greeting2</code> في المثال التالي. </li><li style=";text-align:right;direction:rtl">  إذا لم <code>destination</code> تحديد <code>destination</code> ، فسيتم اعتبار أنها <code>source</code> نفسه. </li></ul><br><p style=";text-align:right;direction:rtl">  محتويات ملف البيان: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: zipactionwithinclude: actions: greeting1: function: actions/greeting1 runtime: nodejs:6 include: - ["actions/common/utils.js", "common/utils.js"] greeting2: function: actions/greeting2 runtime: nodejs:6 include: - ["actions/common/utils.js", "common/utils.js"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>include</code> الأعمال مع مجموعات مختلفة من <code>source</code> <code>destination</code> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>source</code> فقط: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - [actions/common/utils.js]</code> </pre> <br><p style=";text-align:right;direction:rtl">  باستخدام هذا الإدخال ، سيتم نسخ <code>utils.js</code> إلى <code>actions/greeting/actions/common/utils.js</code> ، ويمكن لـ <code>index.js</code> الرجوع إليها مثل هذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var utils = require('./actions/common/utils.js')</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>include</code> مع إعادة تسمية: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/common/utils.js", "./common/myUtils.js"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  باستخدام هذا التعريف ، سيتم وضع <code>utils.js</code> على طول مسار <code>actions/greeting/common/myUtils.js</code> ، وسوف يشير <code>index.js</code> إليه كما يلي: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var utils = require('./common/myUtils.js')</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>include</code> بطريقة أخرى: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/common/utils.js", "./common/utility/utils.js"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  في هذه الحالة ، سيتم نسخ <code>utils.js</code> إلى <code>actions/greeting/common/utility/utils.js</code> ، مع وجود رابط من <code>index.js</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var utils = require('./common/utility/utils.js')</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>include</code> مع الرمز <code>*</code> : </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/common/*.js", "./common/"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  في هذا الإصدار ، <code>utils.js</code> إلى جانب الملفات الأخرى ذات الامتداد <code>.js</code> إلى <code>actions/greeting/common/</code> directory ، وفي <code>index.js</code> سيتم ربط هذه الملفات بالشكل التالي: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var utils = require('./common/utils.js')</code> </pre> <br><h3 id="vklyuchenie-katalogov" style=";text-align:right;direction:rtl">  إدراج الدليل </h3><br><p style=";text-align:right;direction:rtl">  في <code>include</code> يمكنك تحديد دليل سيتم نسخه بشكل متكرر إلى الموقع المحدد قبل أن يتم تضمينه في الأرشيف.  على سبيل المثال ، <code>libs``   ,   </code> index.js <code> </code> greeting3 / `` '': </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ cd actions/ $ ls -1 libs/ greeting3/ manifest.yaml $ ls -1 libs/ lib1/ lib2/ lib3/ $ ls -1 libs/lib1/ utils.js $ ls -1 libs/lib2/ utils.js $ ls -1 libs/lib3/ utils.js $ ls -1 greeting3/ index.js package.json</code> </pre> <br><p style=";text-align:right;direction:rtl">  محتويات index.js في <code>actions/greeting3/</code> الدليل: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var lib1 = require('./libs/lib1/utils.js') var lib2 = require('./libs/lib2/utils.js') var lib3 = require('./libs/lib3/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = lib1.hello || lib2.hello || lib3.hello || 'Hello'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p style=";text-align:right;direction:rtl">  محتويات ملف البيان: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: zipactionwithinclude: actions: greeting3: function: actions/greeting3 runtime: nodejs:6 include: - ["actions/libs/*", "libs/"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  في هذا المثال ، يتم نسخ دليل <code>libs</code> بالكامل بشكل متكرر إلى <code>actions/greeting3/libs/</code> . </p><br><p style=";text-align:right;direction:rtl">  ربط الدلائل بالرمز <code>*</code> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مثال 1: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/libs/*/utils.js", "libs/"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  عند كتابة هذه <code>utils.js</code> سيتم نسخ جميع الدلائل الفرعية التي تحتوي على <code>utils.js</code> من <code>libs</code> .  تبدو الروابط من <code>index.js</code> كما يلي: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var lib1 = require('./libs/lib1/utils.js') var lib2 = require('./libs/lib2/utils.js') var lib3 = require('./libs/lib3/utils.js')</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مثال 2: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/*/*/utils.js"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  باستخدام هذا الإدخال ، سيتم نسخ جميع الأدلة الفرعية التي تطابق القناع وتحتوي على <code>utils.js</code> .  سيكون الوصول من <code>index.js</code> مثل هذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var lib1 = require('./actions/libs/lib1/utils.js') var lib2 = require('./actions/libs/lib2/utils.js') var lib3 = require('./actions/libs/lib3/utils.js')</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مثال 3: </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">include: - ["actions/*/*/utils.js", "actions/"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  يشير هذا المثال صراحة إلى مكان نسخ كل شيء.  سيكون الوصول من <code>index.js</code> هو نفسه كما في المثال السابق. </p><br><h3 id="isklyuchenie" style=";text-align:right;direction:rtl">  استثناء </h3><br><p style=";text-align:right;direction:rtl">  يمكن استخدام كلمة <code>exclude</code> الرئيسية كقائمة من الملفات والدلائل ، ويُسمح باستخدام قناع في شكل حرف <code>*</code> .  مثال للاستخدام: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">exclude: - actions/common/*.js - actions/libs/*/utils.js</code> </pre> <br><p style=";text-align:right;direction:rtl">  مثال شائع للمشاركة <code>include</code> <code>exclude</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: zipactionwithexclude: actions: greeting1: function: actions runtime: nodejs:6 exclude: - actions/* include: - ["actions/common/utils.js", "common/utils.js"] - ["actions/index.js", "index.js"] - ["actions/package.json", "package.json"]</code> </pre> <br><h2 id="funkcii-s-github-zavisimostyami" style=";text-align:right;direction:rtl">  وظائف مع تبعيات جيثب </h2><br><p style=";text-align:right;direction:rtl">  يدعم OpenWhisk التبعيات ، بحيث يمكنك وصف حزم OpenWhisk الأخرى التي يعتمد عليها مشروعنا.  باستخدام هذه التبعيات ، سوف يقوم OpenWhisk بنشر الحزم التابعة تلقائيًا أيضًا.  يمكن اعتبار أي حزمة بها <code>manifest.yaml</code> و \ أو <code>deployment.yaml</code> كحزمة تابعة ، والتي يمكن تحديدها في بيان مشروعنا.  يمكنك وصف مثل هذه التبعية في البيان في قسم <code>dependencies</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: RootProject: dependencies: helloworlds: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: helloworlds/hello-js rule2: trigger: trigger2 action: helloworlds/helloworld-js</code> </pre> <br><p style=";text-align:right;direction:rtl">  في هذا المثال ، <code>helloworlds</code> عبارة عن حزمة خارجية مستضافة على مستودع GitHub على <a href="https://github.com/apache/incubator-openwhisk-test">https://github.com/apache/incubator-openwhisk-test</a> .  سيتم نشر حزمة <code>helloworlds</code> بناءً على ملفاتها للنشر في دليل <code>packages/helloworlds</code> - عند نشر مشروع <code>RootProject</code> بنا.  من الممكن أيضًا تغيير اسم الحزمة التابعة ، على سبيل المثال ، بدلاً من <code>helloworlds</code> بتعيين <code>ChildProject</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: RootProject: dependencies: ChildProject: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: ChildProject/hello-js rule2: trigger: trigger2 action: ChildProject/helloworld-js</code> </pre> <br><p style=";text-align:right;direction:rtl">  يمكنك إضافة تبعيات متعددة إلى حزم متعددة: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">packages: RootProject: dependencies: ChildProject1: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds ChildProject2: location: github.com/apache/incubator-openwhisk-test/packages/hellowhisk sequences: ChildProject1-series: actions: ChildProject1/hello-js, ChildProject1/helloworld-js ChildProject2-series: actions: ChildProject2/greeting, ChildProject2/httpGet triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: ChildProject1-series rule2: trigger: trigger2 action: ChildProject2-series</code> </pre> <br><h2 id="kak-rabotaet-sinhronizaciya-proektov-openwhisk-mezhdu-klientom-i-serverom" style=";text-align:right;direction:rtl">  كيف تزامن مشاريع OpenWhisk بين العميل والخادم </h2><br><p style=";text-align:right;direction:rtl">  للإجابة ، يجب أن تبدأ النشر في وضع <code>managed deployment</code> .  في هذا الوضع ، ينشر OpenWhisk جميع الكائنات من البيان ، كما يرفق أيضًا وصفًا مخفيًا لكل منها ، ما يسمى  <code>managed</code> .  هذا الوصف يشبه هذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">managed: __OW_PROJECT_NAME: MyProjectName __OW_PROJECT_HASH: SHA1("OpenWhisk " + &lt;size_of_manifest_file&gt; + "\0" + &lt;contents_of_manifest_file&gt;) __OW_FILE: Absolute path of manifest file on file system</code> </pre> <br><p style=";text-align:right;direction:rtl">  هنا ، OpenWhisk عبارة عن سلسلة ثابتة ، و "\ 0" هي الحرف NULL.  <em>size_of_manifest_file</em> و <em>content_of_manifest_file</em> يعتمدان على الملف.  يقوم تسلسل نشر المشروع نفسه في وضع <code>managed deployment</code> بحساب <code>__OW_PROJECT_HASH</code> جديد على العميل لكل كائن ومقارنته بكائن <code>__OW_PROJECT_HASH</code> من نفس المشروع على الخادم.  هناك العديد من الخيارات أدناه. </p><br><p style=";text-align:right;direction:rtl">  <strong>الخيار الأول</strong> : إذا <code>__OW_PROJECT_HASH</code> على العميل والخادم ، أي:  إذا لم تكن هناك تغييرات على المشروع من جانب العميل ، فسيظل المشروع على الخادم كما هو ، باستثناء <code>wskdeploy</code> خلال <code>wskdeploy</code> كائنات جديدة من البيان لتلقي أي تغييرات في ملف <code>wskdeploy</code> . </p><br><p style=";text-align:right;direction:rtl">  <strong>الخيار 2</strong> : إذا كان <code>__OW_PROJECT_HASH</code> غير متطابق ، على سبيل المثال  إذا كانت هناك تغييرات على جانب العميل ، <code>wskdeploy</code> بنشر جميع الكائنات من البيان ، ثم يقوم بتحديثها <code>__OW_PROJECT_HASH</code> على الخادم.  <code>wskdeploy</code> أيضًا عن جميع الكائنات: بما في ذلك الدالات والتسلسلات <code>__OW_PROJECT_NAME</code> الشرطية التي لها نفس <code>__OW_PROJECT_NAME</code> ، أي  ينتمي إلى نفس المشروع ولكن له <code>__OW_PROJECT_HASH</code> مختلف ، حيث يمكن إزالته من البيان على العميل.  اسم المشروع في البيان مطلوب لمزامنة المشروع بين العميل والخادم: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">project: name: MyProjectName packages: package1: ....</code> </pre> <br><p style=";text-align:right;direction:rtl">  تظل الكائنات الموجودة في OpenWhisk التي تشكل جزءًا من المشروع ولكنها يتم نشرها باستخدام أدوات أو أدوات التشغيل الآلي الأخرى كما هي دون تغيير عند إزالتها من المشروع.  تعتبر كائنات خارجية وبالتالي لا يتم الكتابة.  يمكنك <code>wskdeploy</code> مثل هذا المشروع باستخدام <code>wskdeploy</code> ، وتوجيهه إلى ملف البيان ، والذي يحتوي فقط على اسم المشروع: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">project: name: MyProjectName</code> </pre> <br><p style=";text-align:right;direction:rtl">  دعونا نلقي نظرة على مشروع نموذج لفهم <code>managed deployment</code> .  في <a href="https://github.com/apache/incubator-openwhisk-wskdeploy/tree/master/tests/src/integration/managed-deployment">هذا المخزون ،</a> يمكنك رؤية المشروع بالعديد من البيانات التي تعرض <code>managed deployment</code> . </p><br><h3 id="shag-pervyy-1" style=";text-align:right;direction:rtl">  الخطوة الأولى </h3><br><p style=";text-align:right;direction:rtl">  نشر <code>MyFirstManagedProject</code> باستخدام وضع <code>managed deployment</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$wskdeploy -m tests/src/integration/managed-deployment/manifest.yaml --managed Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ax/be/_k/axbe_koglnzos01ssevcmmk9g_u.png"><br>  <em>قائمة الكائنات المنشورة على خادم OpenWhisk</em> </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ti/oa/qe/tioaqetzsdjcqc12la0vuesuwqe.png"><br>  <em>وصف العقار</em> </p><br><h3 id="shag-vtoroy-1" style=";text-align:right;direction:rtl">  الخطوة الثانية </h3><br><p style=";text-align:right;direction:rtl">  نقوم بمزامنة العميل والخادم - نحذف ManagedPackage-2: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/00-manifest-minus-second-package.yaml --managed Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/o6/_p/92/o6_p92dnflbyzpvss9b4-4gh_os.png"><br>  <em>قائمة الكائنات بعد الحذف في MyFirstManagedProject</em> </p><br><h3 id="shag-tretiy-1" style=";text-align:right;direction:rtl">  الخطوة الثالثة </h3><br><p style=";text-align:right;direction:rtl">  نقوم بمزامنة العميل والخادم - نحذف التسلسل ManagedSequence-2: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/01-manifest-minus-sequence-2.yaml --managed Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/kc/ek/w6/kcekw6zgqnyymwsfgujvqpchbdo.png"><br>  <em>قائمة الكائنات بعد الحذف</em> </p><br><h3 id="shag-chetvertyy" style=";text-align:right;direction:rtl">  الخطوة الرابعة </h3><br><p style=";text-align:right;direction:rtl">  حذف وظيفة Helloworld-3: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/02-manifest-minus-action-3.yaml --managed Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yp/_k/mm/yp_kmmd9xzftrdtcedme75zqcyg.png"><br>  <em>قائمة الكائنات بعد الحذف</em> </p><br><h3 id="shag-pyatyy" style=";text-align:right;direction:rtl">  الخطوة الخامسة </h3><br><p style=";text-align:right;direction:rtl">  حذف ManagedPackage-1: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/04-manifest-minus-package.yaml --managed Deployment completed successfully.</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fr/i9/hl/fri9hlmidofria2oa5aj_5immg8.png"><br>  <em>كائنات أخرى في MyFirstManagedProject</em> </p><br><h2 id="drugie-stati-cikla" style=";text-align:right;direction:rtl">  مقالات دورة أخرى </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://habr.com/ru/company/southbridge/blog/477336/">الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 1</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/477628/">الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 2</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/479492/">الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 3</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/481000/">الحوسبة بدون خادم على أساس OpenWhisk ، الجزء 4</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar479492/">https://habr.com/ru/post/ar479492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar479478/index.html">جافا المكونات في دون ألم</a></li>
<li><a href="../ar479480/index.html">SARIF SDK وأخطاءه</a></li>
<li><a href="../ar479482/index.html">SARIF SDK وأخطائه</a></li>
<li><a href="../ar479486/index.html">البرمجة غير المتجانسة ومجموعة أدوات oneAPI. محاضرة خبير من إنتل تجيب على أسئلتك</a></li>
<li><a href="../ar479488/index.html">من جهاز كمبيوتر محمول - خادم منزلي مزود بقوة زائدة حتى جهاز توجيه Mikrotik</a></li>
<li><a href="../ar479496/index.html">تحليل مهام WTF في JavaScript</a></li>
<li><a href="../ar479498/index.html">كيف يتحول الوقت الخطي إلى Windows في O (n²)</a></li>
<li><a href="../ar479502/index.html">كيف تنجو من أشد عصر جليدي في تاريخ الأرض؟</a></li>
<li><a href="../ar479504/index.html">بناء عميل RDP رقيقة تستند إلى Raspberry Pi</a></li>
<li><a href="../ar479508/index.html">PostgreSQL Antipatterns: JOINs و ORS الضارة</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>