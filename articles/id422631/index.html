<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🏭 🐲 🏰 Terminal QIWI. Cara memanfaatkan teknologi sederhana secara maksimal 👃🏻 🍤 👍🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada awal 2017, kami, tim pengembangan perangkat lunak untuk Terminal QIWI, mengumpulkan keinginan departemen perusahaan - kami mempelajari tugas glob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Terminal QIWI. Cara memanfaatkan teknologi sederhana secara maksimal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/qiwi/blog/422631/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/e5/yt/wg/e5ytwgymlworvy2udox4piky1pw.png" align="left" width="200"></a>  Pada awal 2017, kami, tim pengembangan perangkat lunak untuk Terminal QIWI, mengumpulkan keinginan departemen perusahaan - kami mempelajari tugas global apa yang ingin diselesaikan oleh rekan kerja kami dengan bantuan kami, sehingga kehidupan menjadi lebih mudah. <br><br>  Saya sangat senang dengan permintaan layanan pelanggan yang bekerja dengan panggilan dan klaim dari pembayar: <br><br>  <i>"Ada masalah: klien melakukan pembayaran di terminal, tetapi dia masih belum bisa memproses - terminal bisa membeku, atau Internet yang bekerja melalui modem gsm terputus.</i>  <i>Dan ternyata klien memiliki cek, tetapi tidak ada pembayaran dalam sistem.</i>  <i>Akan lebih baik dalam kasus seperti itu untuk mempelajari cara mengirim pembayaran ke QIWI.</i> <i><br><br></i>  <i>Ada juga sekelompok klien yang cemas, segera setelah melakukan pembayaran, menghubungi nomor pusat panggilan untuk memastikan bahwa semuanya baik-baik saja dengannya.</i>  <i>Akan bagus untuk memotong tulang untuk panggilan seperti itu. "</i> <br><br>  Jadi kami memiliki tugas yang kompleks: mempelajari cara melakukan pembayaran jika terjadi kegagalan komunikasi dengan terminal dan untuk mengurangi jumlah panggilan masuk dari pelanggan dengan menciptakan alat layanan mandiri untuk memeriksa status pembayaran.  Kasingnya jelas.  Mereka mulai mencari solusi yang nyaman bagi klien dan tanpa risiko keamanan. <br><a name="habracut"></a><br>  Pelanggan, menurut tradisi, menawarkan pilihannya - untuk mencetak pada tanda terima serangkaian karakter yang dapat disampaikan oleh pembayar kepada operator, dan dia, pada gilirannya, untuk memahami apakah ini pembayaran kami atau tidak, menyaring penipuan atau melakukan operasi secara manual. <br><br>  Konsep gagasan itu jelas, tetapi tidak dapat direalisasikan, jadi kami melangkah lebih jauh: kami memutuskan untuk menanamkan data pembayaran dalam kode QR, mencetaknya pada kwitansi, dan menduplikasi Terminal QIWI di layar untuk akurasi.  Dengan memindai kode QR dengan kamera perangkatnya, klien dapat mengetahui status operasi.  Dan dalam kasus non-pembayaran di QIWI, sistem secara otomatis membuatnya.  Dengan demikian, klien tidak hanya mengetahui apakah uang telah tiba, tetapi juga melakukannya secara mandiri, terlepas dari keadaan terminal. <br><br>  Pada pandangan pertama, solusinya jelas: mengambil permintaan yang ada dengan pembayaran, membungkusnya dalam kode QR, menulis halaman web dengan informasi transaksi dan permintaan proxy layanan microservice antara terminal, pemrosesan dan web.  Diasumsikan bahwa proyek akan bekerja pada metode otentikasi terminal yang ada dan menggunakan metode pembayaran yang ada dalam pemrosesan. <br><br>  Idenya datang segera, mengungkapkan potensi kreatif tim.  Kami mulai memancar dan mengeluarkan opsi tambahan hingga menempatkan logo, slogan, dan bahkan beriklan dalam kode QR di samping data pembayaran: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/vy/dl/5pvydljqfmwsttqvkleyotnskfw.png" width="400" height="400" alt="gambar"></div><br>  Sebuah proyek untuk beberapa sprint, tidak lebih.  Itu dia. <br><br><h3>  Frustrasi pertama </h3><br>  Kami mengambil pembayaran yang ada dan membentuk kode QR: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yv/ti/pk/yvtipk6l6qkycshzycbfz8eyfu8.gif" alt="gambar" width="400" height="400"></div><br>  Akibatnya, bahkan iPhone7 terakhir saat itu tidak dapat membacanya.  Pada cek, kode QR, hanya terdiri dari pembayaran dan data tanda tangan, hampir tidak muat di setengah lembar A4.  Baris permintaan pembayaran terlalu panjang.  Ini adalah kesedihan pertama. <br><br>  Itu perlu untuk memecahkan dua masalah utama: <br><br><ul><li>  mengurangi jumlah karakter dalam permintaan pembayaran, mis.  datang dengan solusi di mana kita bisa pergi dari permintaan xml yang ada ke yang lebih kompak; </li><li>  pilih algoritma enkripsi dan panjang kunci yang akan memberikan kekuatan dan keandalan kriptografi yang tinggi dengan ukuran tanda tangan yang lebih kecil. </li></ul><br>  Kriteria untuk menilai jumlah karakter optimal untuk kode QR adalah satu - harus dibaca oleh kamera dari sebagian besar ponsel. <br><br>  Namun, dalam beberapa pertemuan kerja, sebuah solusi ditemukan: <br><br><ul><li>  alih-alih permintaan xml, kami memutuskan untuk menggunakan permintaan-mendapatkan dengan parameter pembayaran dan pemisah di antara mereka; </li><li>  membangun tanda tangan pada kurva eliptik untuk mempersingkat panjangnya. </li></ul><br>  Keuntungan menggunakan permintaan-mendapatkan adalah bahwa kamera ponsel atau program khusus, melihat tautan dalam kode QR, segera membukanya di browser, yang memungkinkan untuk melakukan pembayaran dalam satu tindakan.  Untuk mengurangi ukuran permintaan dapatkan, kami harus mengganti nama parameter dengan pembatas. <br><br>  Sebagai hasil dari serangkaian tindakan, permintaan pembayaran berkurang dari sekitar 1.100 menjadi 200 karakter.  Plus, saya harus menerapkan tingkat koreksi kesalahan terendah dari kode QR - L. <br><br>  Untuk implementasi, diperlukan untuk mengembangkan komponen dalam sistem: <br><br><ul><li>  buat api baru untuk melakukan pembayaran melalui kode QR; </li><li>  memperkenalkan mekanisme baru untuk bekerja dengan kunci kriptografi antara terminal dan pemrosesan; </li><li>  mengimplementasikan layanan mikro di mana fungsi permintaan proxy, memeriksa integritas data yang diterima, serta fungsi memblokir permintaan yang mencurigakan dan mengumpulkan statistik operasi akan menggantung; </li><li>  mengembangkan halaman web untuk menampilkan informasi pembayaran; </li><li>  Kembangkan sistem batasan dan periksa saluran pembayaran baru. </li></ul><br>  Untuk skema kerja yang ada: <br><br><img src="https://habrastorage.org/webt/vh/wi/bf/vhwibfzt6s4hebqumpum7anrkv4.png" alt="gambar"><br><br>  Kami berencana untuk menambahkan alternatif: <br><br><img src="https://habrastorage.org/webt/ze/75/au/ze75auougt6hzcrhryahnftqyca.png" alt="gambar"><br><br>  Dalam perjalanan proyek, tampaknya, kecil, tetapi membutuhkan pemecahan masalah, yang sebenarnya membutuhkan banyak waktu, menunda tanggal peluncuran. <br><br><h3>  Penelitian UX, atau pekerjaan datang dari tempat mereka tidak menunggu </h3><br>  Saya ingin melakukan semua hal seperti yang dilakukan orang, jadi mereka membawa spesialis UX untuk mengimplementasikan proyek untuk menyelesaikan masalah: <br><br><ul><li>  di bagian mana dari layar Terminal QIWI untuk menempatkan kode QR dan bagaimana menjelaskan kegunaannya kepada klien? </li><li>  di mana menempatkan kode QR pada cek dan bagaimana cara mendorong penjelasan serupa? </li><li>  Bagaimana cara membuat tata letak halaman web dengan status pembayaran, sehingga jelas tentang panduan perusahaan? </li></ul><br>  Jelas, untuk pelanggan tingkat lanjut, penjelasan tambahan tentang kode QR tidak diperlukan, mereka hanya perlu menunjukkan hasilnya.  Tapi kami ingin menutupi bagian pelanggan yang kode QR-nya adalah singkatan ajaib atau hanya "kotak hitam".  Merekalah yang memutuskan jalur call center. <br><br>  Untuk membuatnya indah dan dapat dimengerti, wawancara dilakukan di dalam kelompok fokus yang menarik bagi kami dengan hasil yang tidak terduga ... <br><br><h3>  Brevity mirip dengan menabung </h3><br>  Ternyata menakutkan - audiens yang kami butuhkan tidak selalu memahami arti kata "Pindai" dan turunannya.  Oleh karena itu, kata asli “Pindai dan cari tahu statusnya” harus ditinggalkan.  Solusinya adalah kemampuan teknis untuk mengirim foto kode QR melalui email.  Dan itu juga perlu untuk mengatakan ini secara singkat dan jelas, karena pita periksa adalah bahan yang dapat dibuang dari pemilik terminal dan perhatian kita terhadap bisnis orang-orang ini adalah ekonomi.  Akibatnya, cek sekarang terlihat seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1o/dr/yz/1odryzcvlubmpip1uvcd61tuuwi.png" alt="gambar" width="400" height="400"></div><br>  Sedangkan untuk tampilan kode QR pada layar terminal, ia ditempatkan pada halaman terakhir pembayaran - yang terbaru dalam skenario pembayaran.  Ini ditampilkan pada saat cek dicetak dan pada dasarnya merupakan duplikat elektronik dari kode QR yang dicetak. <br><br><h3>  Email ada di mana-mana </h3><br>  Sehubungan dengan munculnya saluran baru untuk memproses kode QR dalam bentuk e-mail, menjadi perlu untuk mengembangkan mekanik dengan fungsi mengenali kode QR yang tertanam dalam surat dan menghasilkan respons dengan status pembayaran. <br><br>  Fungsi mengenali kode QR diambil di microservice.  Pada implementasi awal, tingkat pengakuan sekitar 65% dalam sampel foto yang disajikan.  Kami mencoba bermain dengan perubahan warna dan peningkatan kontras - ini memberi sekitar + 20% pengakuan sukses. <br><br>  Ceri pada kue dalam tugas mengenali foto-foto kode QR adalah pengenalan "kecerdasan alami" untuk kasus-kasus sulit yang tidak dikenal - pembuatan aplikasi dan pemrosesan mereka mulai dilakukan dalam mode manual: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/49/se/5g/49se5gbmtwhcusd4xolxybtfon8.png" alt="gambar" width="400" height="400"></div><br><h3>  Teknis bukan hal sepele </h3><br>  Perkembangan utama pada proyek ini, tentu saja, menyangkut microservice itu sendiri dan perangkat lunak terminal. <br><br>  QIWI secara aktif pindah ke arsitektur microservice agar tidak menyentuh mesin besar.  Microservice memungkinkan Anda untuk dengan cepat melakukan perubahan pada proyek, melakukan tes dan merilis rilis.  Karena itu, dalam beberapa bulan kami menulis sendiri.  Kami bergantung pada itu semua perkembangan baru utama yang hanya bisa dibuat: <br><br><ul><li>  proksi permintaan dengan mem-parsing dan menganalisis permintaan-masuk yang masuk, mengubahnya menjadi xml untuk diproses, </li><li>  fungsi untuk membatasi permintaan masuk dari terminal, </li><li>  Fungsi pengenalan kode QR, </li><li>  pengumpulan statistik untuk analisis lebih lanjut. </li></ul><br>  Selain penerapan mekanisme baru untuk bekerja dengan kunci kriptografi, peningkatan terminal menyentuh penerapan teknologi baru untuk mencetak tanda terima. <br><br>  Fungsionalitas untuk formasi mereka diambil dari inti utama program dalam plugin.  Sekarang kita dapat mengimplementasikan perubahan pada pemeriksaan dengan segera, tanpa menyentuh operabilitas terminal secara keseluruhan.  Tugas mencetak kode QR, yang, pada pandangan pertama, tampaknya cukup sederhana dan turun untuk mencetak gambar pada cek, tidak benar-benar seperti itu. <br><br>  Ini karena jaringan pemilik terminal kami memiliki sekitar 20 model beragam printer, dan kami mencetak sekitar 40 jenis tanda terima.  Ketika mereka mulai implementasi, banyak nuansa yang keluar: baik garis dan lokasi objek dalam templat cek mulai mengambang ketika gambar ditambahkan, kemudian beberapa perintah sensitif terhadap lokasi, dan kemudian baris dipecah menjadi tab. <br><br>  Kami mulai menguji, kami menyadari perlunya kompromi - beberapa model printer harus dikecualikan, karena ketika menguji semua konfigurasi, sejumlah besar case keluar. <br><br>  Untuk pengujian, kami memutuskan untuk memilih 6 model utama, yang mencakup 91% dari jaringan agen.  Dan, tentu saja, pada saat melakukan tes acak di lingkungan pertempuran, ternyata itu pada printer kuno yang mencakup sekitar 5% dari jaringan agen yang masalah dengan tanda terima pencetakan ditemukan.  Model-modelnya sangat tua sehingga bahkan di pasaran mereka tidak bisa lagi dibeli.  Saya harus mencari dengan mitra.  Sekarang proyek ini mencakup 96% dari jaringan.  Sudah sedikit lebih dekat dengan yang ideal :) <br><br><h3>  Bukan cek tunggal </h3><br>  Sejalan dengan penempatan informasi tentang kode QR pada cek dan halaman akhir pembayaran, tugas lain diangkat - membawa halaman ini ke tampilan universal untuk semua proyek terminal: <br><br>  <i>“Dalam hal halaman penyelesaian pembayaran di Terminal QIWI, semuanya sangat kuno: iklan, spanduk dan mengirim tanda terima elektronik.</i>  <i>Dari lima halaman, orang-orang membuat satu, universal untuk semua pembayaran. "</i>  - Pemrogram terkemuka dari tim. <br><br>  Sekarang halaman universal ini digunakan dalam interpretasi yang berbeda, tanpa melanggar aturan membangun naskah, menutup hutang karma dari tim pengembangan. <br><br>  Dengan demikian, masalah sepuluh tahun yang lalu terpecahkan, yang tangan-tangan itu tidak menjangkau setiap saat.  Ada beberapa tugas yang lama dimainkan. <br><br><h3>  "Di mana uangnya, Zin?"  atau apa yang ada di garis bawah </h3><br>  Proyek, yang dirancang untuk beberapa sprint, memakan waktu enam bulan, memengaruhi sumber daya 10 karyawan dan keunggulan agen outsourcing. <br><br>  Sebagai hasilnya, setelah mengimplementasikan proyek pada 85% dari jaringan terminal, kami mengejutkan diri kami dan pelanggan - layanan pelanggan.  Pada hari ketiga kode QR, rekan kerja berpikir bahwa kesalahan sistem telah merayapi mereka - statistik jumlah panggilan ke pusat panggilan dengan pertanyaan "Di mana pembayaran saya?"  sudah turun 20%.  Pelanggan mulai memindai kode QR dan mengirim tanda terima foto melalui email, mencari tahu status dan melakukan pembayaran sendiri.  Dan untuk bulan kedua.  Saya harus mengatakan bahwa pelanggan mulai memahami apa "kotak hitam" itu dan bagaimana itu berguna. <br><br>  Proyek dengan kode QR disukai oleh semua orang yang diberitahu tentang itu - itu adalah sinergi kepentingan: di satu sisi, mereka menyederhanakan kehidupan klien, dan di sisi lain, mereka memecahkan masalah teknis non-standar.  Memeriksa status pembayaran dan melakukannya dalam selembar pemrosesan kertas hanya dengan memindai kode QR untuk QIWI adalah sesuatu yang baru.  Sangat menyenangkan untuk mengambil teknologi yang terkenal dan sederhana untuk membuat proyek yang bermanfaat.  Secara umum, proyek ini tidak hanya memompa keterampilan, tetapi juga meningkatkan komunikasi di dalam tim itu sendiri.  Dan ini hampir merupakan nilai tambah utama dalam karma. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422631/">https://habr.com/ru/post/id422631/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422617/index.html">Seluruh kebenaran tentang RTOS. Artikel # 8. Nucleus SE: Desain dan Penyebaran Internal</a></li>
<li><a href="../id422623/index.html">Bagaimana cara mengamankan C</a></li>
<li><a href="../id422625/index.html">Kami berbicara dengan Troy Miles - programmer "Neuromancer"</a></li>
<li><a href="../id422627/index.html">MongoDB dan riset pasar kerja TI</a></li>
<li><a href="../id422629/index.html">Berhenti memberi makan para penebang! Berikan lebih banyak pengubah! Bidang Final Statis Malas. Sketsa Fitur Draf</a></li>
<li><a href="../id422633/index.html">Bagaimana kami mengotomatiskan pemantauan pekerjaan karyawan dari jaringan pompa bensin federal</a></li>
<li><a href="../id422635/index.html">Anda belum mengucapkan kata "halo", dan kami sudah tahu siapa Anda</a></li>
<li><a href="../id422637/index.html">Hadiah Geek: Perlindungan Auto-Alkash</a></li>
<li><a href="../id422641/index.html">Malam kutub, pemompaan air, dan brankas cerdas: 5 proyek siswa di bidang IoT</a></li>
<li><a href="../id422643/index.html">Perangkat baru dengan IFA 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>