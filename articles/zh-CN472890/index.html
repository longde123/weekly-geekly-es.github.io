<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌧️ 💪🏿 👩🏿‍🎤 适用于开发人员的DeepPavlov：＃1 NLP工具和创建聊天机器人 😾 ⬅️ 🍀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好！ 我们正在打开一系列文章，致力于解决与自然语言处理（或仅仅是NLP）有关的实际问题，并使用由我们的神经系统和深度学习实验室团队开发的开源库DeepPavlov创建交互式代理（聊天机器人）。 MIPT。 该周期的主要目的是使广泛的开发人员熟悉DeepPavlov，并展示如何在不具备机器学习和数...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>适用于开发人员的DeepPavlov：＃1 NLP工具和创建聊天机器人</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mipt/blog/472890/"> 大家好！ 我们正在打开一系列文章，致力于解决与自然语言处理（或仅仅是NLP）有关的实际问题，并使用由我们的神经系统和深度学习实验室团队开发的开源库<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DeepPavlov</a>创建交互式代理（聊天机器人）。 MIPT。 该周期的主要目的是使广泛的开发人员熟悉DeepPavlov，并展示如何在不具备机器学习和数学博士学位的知识的情况下解决应用的NLP问题。 <br><br>  NLP的任务包括确定文本的色调，解析命名实体，确定其他人想要从您的机器人中获得什么：订购比萨饼或获取帮助信息等等。 您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>阅读有关NLP任务和方法的更多信息。 <br><br> 在本文中，我们将告诉您如何使用无需使用任何其他配置或培训即可使用的，经过预先训练的NLP模型来运行REST North。 <br><br> 该周期的所有文章： <br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">针对开发人员的DeepPavlov：＃1 NLP工具和创建聊天机器人</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">针对开发人员的DeepPavlov：＃2的设置和部署</a> <br><br><img src="https://habrastorage.org/webt/cr/nh/bj/crnhbjzkmqxbclecbbifmi61axg.png"><br><a name="habracut"></a><br><h3> 安装DeepPavlov </h3><br> 在下文中，将给出用于Linux的指令。 对于Windows，请参阅我们的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档。</a> <br><br><ul><li> 使用当前受支持的Python版本创建并激活虚拟环境： <br><br><pre><code class="python hljs">virtualelnv env -p python3<span class="hljs-number"><span class="hljs-number">.7</span></span> source env/bin/activate</code> </pre> </li><li> 在虚拟环境中安装DeepPavlov： <br><br><pre> <code class="python hljs">pip install deeppavlov</code> </pre></li></ul><br><h3> 使用DeepPavlov模型运行REST服务器 <br></h3><br> 在我们首次使用DeepPavlov模型启动服务器之前，先讨论一下库体系结构的某些功能将很有用。 <br><br>  DP中的任何模型均包含： <br><br><ul><li>  Python代码； </li><li> 可下载的组件-在特定数据（嵌入，神经网络权重等）上的序列化学习结果； <br></li><li> 配置文件（以下称为config），其中包含有关模型使用的类，下载的组件的URL，Python依赖项等信息。 </li></ul><br> 在接下来的文章中，我们将进一步介绍DeepPavlov的内幕，现在我们只需要知道以下内容： <br><br><ul><li>  DeepPavlov中的任何模型均通过其配置名称来标识。 <br></li><li> 要运行该模型，您需要从DeepPavlov服务器下载其组件。 <br></li><li> 另外，要运行模型，必须安装它使用的Python库。 <br></li></ul><br> 我们将推出的第一个模型将是多语言命名实体识别（NER）。 该模型根据文本词所属的命名实体的类型（专有名称，地理名称，货币名称等）对文本词进行分类。 最新版NER的配置名称： <br><br><pre> <code class="python hljs">ner_ontonotes_bert_mult</code> </pre><br> 我们使用以下模型启动REST服务器： <br><br><ol><li> 在活动虚拟环境中安装在其配置中指定的模型依赖项： <br><br><pre> <code class="python hljs">python -m deeppavlov install ner_ontonotes_bert_mult</code> </pre></li><li> 从DeepPavlov服务器下载序列化的模型组件： <br><br><pre> <code class="python hljs">python -m deeppavlov download ner_ontonotes_bert_mult</code> </pre><br> 序列化的组件将下载到默认情况下位于DeepPavlov主目录中 <pre> <code class="python hljs">~/.deeppavlov</code> </pre> 下载时，将根据服务器上组件的哈希值检查已下载组件的哈希值。 如果匹配，将跳过下载并使用现有文件。 下载组件的大小平均可在0.5到8 Gb之间变化，在某些情况下，解压缩后可达20 Gb。 </li><li> 我们使用以下模型启动REST服务器： <br><br><pre> <code class="python hljs">python -m deeppavlov riseapi ner_ontonotes_bert_mult -p <span class="hljs-number"><span class="hljs-number">5005</span></span></code> </pre></li></ol><br> 作为此命令的结果，将启动在主机的5005端口上具有模型的REST服务器（默认端口为5000）。 <br><br> 初始化模型后，可以在URL http： <b><code>http://127.0.0.1:5005</code></b>找到具有API文档和测试能力的<b><code>http://127.0.0.1:5005</code></b> 。 我们将通过将具有以下JSON内容的终结点发送到http：//127.0.0.1►005/modelPOST请求来测试模型： <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"x"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"        ."</span></span>, <span class="hljs-string"><span class="hljs-string">" -      15 "</span></span> ] }</code> </pre> <br> 作为响应，我们应该获取以下JSON： <br><br><pre> <code class="python hljs">[ [ [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>], [<span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"B-FAC"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"B-FAC"</span></span>, <span class="hljs-string"><span class="hljs-string">"I-FAC"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>] ], [ [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"15"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], [<span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"B-LOC"</span></span>, <span class="hljs-string"><span class="hljs-string">"I-LOC"</span></span>, <span class="hljs-string"><span class="hljs-string">"I-LOC"</span></span>, <span class="hljs-string"><span class="hljs-string">"I-LOC"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"B-MONEY"</span></span>, <span class="hljs-string"><span class="hljs-string">"I-MONEY"</span></span>] ] ]</code> </pre> <br> 对于这些示例，我们将分析REST API DeepPavlov。 <br><br><h3>  API DeepPavlov </h3><br> 每个DeepPavlov模型都有至少一个输入参数。 在REST API中，对参数进行命名，其名称是传入字典的键。 在大多数情况下，参数是需要处理的文本。 您可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DeepPavlov</a>文档的“模型”部分中了解有关模型返回的参数和值的更多信息<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">。</a> <br><br> 在该示例中，两行的列表被传递给参数x，每行都有一个单独的标记。 在DeepPavlov中，所有模型均接受独立处理的值的列表（批次）作为输入。 <br><br> 术语“批处理”是指机器学习领域，是指由算法或神经网络同时处理的独立输入值的包。 与将相同值分别转移到输入中相比，该方法使您可以减少（通常-显着）批处理中一个元素的模型处理时间。 但是，仅在处理完所有元素之后才发出处理结果。 因此，在形成进料批次时，有必要考虑模型的速度及其各个元素所需的处理时间。 <br><br> 如果DeepPavlov模型有多个参数，则每个参数都有其自己的值批，并且在输出时，该模型始终会给出一个答案批。 传出批次的元素是具有相同索引的传入批次的处理元素的结果。 <br><br> 在上面的示例中，模型的结果是将每一行细分为令牌（单词和标点符号），并将令牌相对于其代表的命名实体（组织名称，货币）进行分类。 目前， <b>ner_ontonotes_bert_mult</b>模型能够识别18种类型的命名实体，可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>找到详细描述。 <br><br><h2>  DeepPavlov的其他现成模型 </h2><br> 除DeepPavlov中的NER之外，在撰写本文时，还提供以下现成的模型： <br><br><h3> 文字问答 </h3><br> 文本问题的答案是该文本的一部分。 模型<b>配置</b> ： <b>squad_ru_bert_infer</b> <br><br> 请求示例： <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"context_raw"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"DeepPavlov   ."</span></span>, <span class="hljs-string"><span class="hljs-string">" -      15 ."</span></span> ], <span class="hljs-string"><span class="hljs-string">"question_raw"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"  DeepPavlov?"</span></span>, <span class="hljs-string"><span class="hljs-string">"     ?"</span></span> ] }</code> </pre> <br> 结果： <br><br><pre> <code class="python hljs">[ [<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, <span class="hljs-number"><span class="hljs-number">31042.484375</span></span>], [<span class="hljs-string"><span class="hljs-string">"15 "</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-number"><span class="hljs-number">1049.598876953125</span></span>] ]</code> </pre><br><h3> 侮辱检测 </h3><br> 识别侮辱该文本的对象（在撰写本文时，仅适用于英语）。 模型配置：insults_kaggle_conv_bert <br><br> 请求示例： <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"x"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Money talks, bullshit walks."</span></span>, <span class="hljs-string"><span class="hljs-string">"You are not the brightest one."</span></span> ] }</code> </pre> <br> 结果： <br><br><pre> <code class="python hljs">[ [<span class="hljs-string"><span class="hljs-string">"Not Insult"</span></span>], [<span class="hljs-string"><span class="hljs-string">"Insult"</span></span>] ]</code> </pre> <br><h3> 情绪分析 </h3><br> 文本的调性分类（正，中性，负）。 模型<b>配置</b> ： <b>rusentiment_elmo_twitter_cnn</b> <br><br> 请求示例： <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"x"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"   DeepPavlov."</span></span>, <span class="hljs-string"><span class="hljs-string">"    DeepPavlov."</span></span>, <span class="hljs-string"><span class="hljs-string">"    ."</span></span> ] }</code> </pre> <br> 结果： <br><br><pre> <code class="python hljs">[ [<span class="hljs-string"><span class="hljs-string">"positive"</span></span>], [<span class="hljs-string"><span class="hljs-string">"neutral"</span></span>], [<span class="hljs-string"><span class="hljs-string">"negative"</span></span>] ]</code> </pre> <br><h3> 复述检测 </h3><br> 确定两个不同的文本是否具有相同的含义。 型号<b>配置</b> ： <b>stand_paraphraser_ru</b> <br><br> 要求： <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"text_a"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"   ,  ."</span></span>, <span class="hljs-string"><span class="hljs-string">"      ."</span></span> ], <span class="hljs-string"><span class="hljs-string">"text_b"</span></span>: [ <span class="hljs-string"><span class="hljs-string">" ,     ,   ."</span></span>, <span class="hljs-string"><span class="hljs-string">"       ."</span></span> ] }</code> </pre> <br> 结果： <br><br><pre> <code class="python hljs">[ [<span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>] ]</code> </pre> <br> 随时可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>找到所有现成的DeepPavlov模型的当前列表。 <br><br><h3> 结论 </h3><br> 在本文中，我们介绍了DeepPavlov API和开箱即用提供的库的某些文本处理功能。 应当记住，对于任何NLP任务，在与任务主题域（域）相对应的数据集上训练模型时，将获得最佳结果。 另外，原则上甚至不能在所有场合都训练更多的模型。 <br><br> 在以下文章中，我们将考虑其他库设置，从Docker启动DeepPavlov，然后继续进行教学模型。 并且不要忘记DeepPavlov有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">论坛</a> -提出有关库和模型的问题。 感谢您的关注！ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472890/">https://habr.com/ru/post/zh-CN472890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472872/index.html">如何在不失去文化的前提下将初创企业增加到50名员工</a></li>
<li><a href="../zh-CN472874/index.html">星际飞船的故事：通过水塔通往星星</a></li>
<li><a href="../zh-CN472876/index.html">复杂性瀑布与按需架构</a></li>
<li><a href="../zh-CN472884/index.html">新手开发人员的刻板印象如何在游戏开始时崩溃</a></li>
<li><a href="../zh-CN472886/index.html">如何在开发中实现静态分析器，以使每个人都高兴？</a></li>
<li><a href="../zh-CN472892/index.html">为什么传统的防病毒软件不适用于公共云。 怎么办？</a></li>
<li><a href="../zh-CN472894/index.html">DartUP 2019：11月23日在圣彼得堡举行的Dart和Flutter会议</a></li>
<li><a href="../zh-CN472896/index.html">打印机制造的直升机：科学家首次“印刷”了大型直升机发动机箱</a></li>
<li><a href="../zh-CN472902/index.html">Windows for IoT：增强的硬件支持和新的智能设备功能</a></li>
<li><a href="../zh-CN472904/index.html">亚马逊如何将股票变成游戏</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>