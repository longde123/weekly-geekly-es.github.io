<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🔬 🎁 📰 Vulnérabilités de OWASP Top 10. A1: 2017 - Injections (Part 1) 👎 👩🏻‍⚕️ 🕴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La description des vulnérabilités est une chose, mais essayer de trouver une vulnérabilité et travailler avec elle est une tout autre affaire. C'est à...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vulnérabilités de OWASP Top 10. A1: 2017 - Injections (Part 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/gaz-is/blog/419387/">  La description des vulnérabilités est une chose, mais essayer de trouver une vulnérabilité et travailler avec elle est une tout autre affaire.  C'est à ces fins que sont créées et développées des applications spéciales dans lesquelles les vulnérabilités sont délibérément laissées pour compte.  Si vous saisissez dans le moteur de recherche la requête «Application vulnérable à dessein», vous ne trouverez pas une douzaine de liens. <br><br>  Dans cette série, nous allons commencer à analyser les vulnérabilités du Top 10 OWASP, et j'utiliserai une telle application intentionnellement vulnérable comme terrain d'essai.  Dans mon cas, ce sera OWASP Mutillidae II.  Ce n'est pas la meilleure option, mais les vulnérabilités sont structurées exactement selon les besoins à des fins éducatives. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/88/_v/gy88_v2lyykqa97h4g7wiidkscc.jpeg"></div><a name="habracut"></a><br><br>  <b>Donnez votre main</b> <br><br>  Ainsi, la première vulnérabilité est les injections.  OWASP Mutillidae II présente plusieurs options, et nous commencerons par les plus simples «Données d'extraction SQLi»&gt; «Informations utilisateur (SQL)». <br>  Devant nous se trouve la fenêtre d'authentification habituelle - avec laquelle vous interagissez quotidiennement: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dj/id/ao/djidao0plhyiy3ggkt-n4nynpou.png"></div><br><br>  Nous n'avons pas de nom d'utilisateur ni de mot de passe - rien.  Eh bien, inscrivons-nous sur ce site.  Je vais créer un utilisateur avec le nom en dessous de zéro273 et le mot de passe 123: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/o1/t_/ovo1t_znww9_0eze3drmif02re0.png"></div><br><br>  Super!  Nous avons créé un compte, l'inscription solennelle «1 lignes insérées» indique qu'une ligne a été ajoutée, apparemment dans le tableau, car un grand nombre de comptes sont plus faciles à stocker dans le SGBD. <br><br>  Connectez-vous maintenant avec notre nouveau compte dans le système.  Réussi, super. <br>  Lorsque nous travaillons avec une page Web, nous devons toujours nous rappeler que notre interaction n'est pas limitée au contenu de la page.  Il y a aussi une barre d'adresse, par exemple.  Dans lequel nous pouvons remarquer beaucoup de choses intéressantes: <br><br><pre><code class="hljs pgsql">http://<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/mutillidae/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php?page=<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.php&amp;username=belowzero273&amp;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-number"><span class="hljs-number">123</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>-php-submit-button=<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>+Account+Details</code> </pre> <br><br>  Par exemple, nous voyons que le mot de passe est transmis en texte clair.  C'est mauvais, car le trafic peut être intercepté.  Mais peut-être pas un tel désastre - le trafic sera enveloppé dans TLS. <br>  Essayons de remplacer le mot de passe directement dans la ligne, par exemple, cette pièce: <br><br><pre> <code class="hljs pgsql">username=belowzero273&amp;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-number"><span class="hljs-number">123</span></span></code> </pre> <br><br>  sur <br><br><pre> <code class="hljs pgsql">username=belowzero273&amp;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-number"><span class="hljs-number">12345</span></span></code> </pre> <br><br>  Le mot de passe, bien sûr, est maintenant incorrect, et nous avons reçu l'erreur correspondante: et c'est mauvais.  C'est mauvais, car avec l'aide de THC-Hydra, dont j'ai parlé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , nous pouvons récupérer ce mot de passe en le substituant à cette ligne sans aucune forme.  Mais cela ne peut pas toujours conduire à un résultat positif dans un délai acceptable. <br><br>  Nous n'avons pas beaucoup de temps, alors essayons autre chose.  Ajoutez un signe d'apostrophe à notre mot de passe incorrect: <br><br><pre> <code class="hljs pgsql">username=belowzero273&amp;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-number"><span class="hljs-number">123</span></span></code> </pre> <br><br>  sur <br><br><pre> <code class="hljs pgsql">username=belowzero273&amp;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-number"><span class="hljs-number">12345</span></span><span class="hljs-string"><span class="hljs-string">'</span></span></code> </pre> <br><br>  Nous avons maintenant une erreur complète: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/o2/ys/pmo2yslv9bi7vl2sbtnoacthg70.png"></div><br><br>  Il n'y a rien de mal aux erreurs.  Sinon, comment diagnostiquer un dysfonctionnement si nous ne voyons pas les commentaires de l'application?  Mais ces erreurs ne devraient pas être visibles pour les utilisateurs et les attaquants. <br><br>  Maintenant, nous voyons qu'en fait, lorsque nous cliquons sur le bouton "Envoyer" en arrière-plan, la demande suivante est exécutée: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> accounts <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> username=<span class="hljs-string"><span class="hljs-string">'belowzero273'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-string"><span class="hljs-string">'12345'</span></span></code> </pre> <br><br>  Les apostrophes distinguent les variables de chaîne.  Notre application Web ne filtre pas les données que l'utilisateur entre et, avec notre apostrophe supplémentaire, nous avons violé la demande.  Maintenant que nous savons à quoi ressemble cette requête en arrière-plan, nous devons déterminer comment la modifier pour obtenir les informations dont nous avons besoin dans la base de données. <br><br>  Veuillez noter que la demande contient la fonction et, c'est-à-dire que les deux variables doivent être correctes, car il s'agit d'une combinaison de login et de mot de passe.  Est logique. <br><br>  Jetons un coup d'œil à cette requête: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> accounts <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (username=<span class="hljs-string"><span class="hljs-string">'belowzero273'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-string"><span class="hljs-string">'12345'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-string"><span class="hljs-string">'1</span></span></code> </pre> <br><br>  Nous avons ajouté une condition toujours satisfaite: 1 = 1.  Et la demande sera exécutée dans deux cas: soit nous avons deviné la combinaison du nom d'utilisateur et du mot de passe, soit 1 = 1.  Autrement dit, il sera toujours exécuté. <br><br>  Il s'avère que les éléments suivants peuvent être spécifiés comme mot de passe: <br><br><pre> <code class="sql hljs">' or 1='1</code> </pre> <br><br>  L'apostrophe en fin de ligne n'est plus nécessaire, la logique de l'application web la mettra pour nous.  Boum!  Et nous avons obtenu une sélection de la base de données avec tous les comptes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1p/km/vk/1pkmvkhanj4xew-pmfcwf10d8ey.png"></div><br><br>  Cool, nous avons maintenant les identifiants et les mots de passe de tous ceux qui sont enregistrés dans cette application.  Et pire encore, les mots de passe sont ici en clair. <br><br>  Quel est le problème avec ça?  Et le fait que la plupart des gens utilisent les mêmes noms d'utilisateur et mots de passe pour tous les sites.  Et après s'être enregistré de cette manière sur un site vulnérable, ils peuvent perdre l'accès à tous leurs sites. <br><br>  Vous pouvez également expérimenter cette vulnérabilité, par exemple, rechercher un mot de passe administrateur.  Pour ce faire, remplacez la connexion: <br><br><pre> <code class="sql hljs">admin' or 1='1</code> </pre> <br><br>  Autrement dit, nous recherchons une entrée dans la base de données où le nom d'utilisateur est admin et le mot de passe est any. <br><br><pre> <code class="sql hljs">  !</code> </pre> <br><br>  Les mots de passe ne sont pas toujours stockés en texte clair, mais cela ne signifie pas que l'authentification est effectuée en toute sécurité.  Regardons le deuxième exemple dans OWASP Mutillidae II «Authentification de contournement SQLi»&gt; «Connexion». <br><br>  L'authentification peut être contournée en générant une demande correspondante.  Plus récemment, nous avons créé un compte en dessous de zéro273, et spécifions maintenant comme identifiant: <br><br><pre> <code class="sql hljs">' or ('a' = 'a' and username='belowzero273') <span class="hljs-comment"><span class="hljs-comment">--</span></span></code> </pre> <br><br>  Ici, nous vérifions la condition évidemment correcte - a = a, et la connexion - en dessous de zéro273, et coupons également la partie de la demande à l'aide de "-". <br><br>  Appuyez sur Entrée et connectez-vous avec succès au système malgré le fait que nous n'avons spécifié votre mot de passe nulle part. <br><br>  <b>Si facile</b> <br><br>  Parfois, les clients demandent, est-il vraiment si facile de contourner l'authentification sur notre site?  Habituellement, je réponds à la question par la question: "Êtes-vous sûr que cela ne s'est pas déjà produit?"  Les injections ne sont pas accidentellement dans le haut de la cote OWASP, car ces vulnérabilités, en règle générale, ont des conséquences désastreuses si elles sont mises en œuvre. <br><br>  Dans la pratique, bien sûr, tout est un peu plus compliqué que dans ces exemples.  Mais c'est sur de tels exemples de base que la compréhension des problèmes plus profonds commence à prendre forme.  Nous continuerons la prochaine fois. <br><br>  Lire le blog de l'auteur, vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suivre ce lien</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419387/">https://habr.com/ru/post/fr419387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419375/index.html">Circulation des miARN</a></li>
<li><a href="../fr419379/index.html">Pourquoi Tesla et Deutsche Bank refusent les contrats papier</a></li>
<li><a href="../fr419381/index.html">Comment les gars de Storyline sont revenus de la Silicon Valley à Minsk avec 770 000 $ pour une startup</a></li>
<li><a href="../fr419383/index.html">Nouvelle technique d'attaque WPA2 qui ne nécessite pas de client sur l'AP</a></li>
<li><a href="../fr419385/index.html">Chirurgie cardiaque: comment nous avons réécrit le composant principal d'un système DLP</a></li>
<li><a href="../fr419389/index.html">Moteur de rendu Angular 6 et Ivy</a></li>
<li><a href="../fr419391/index.html">Puissance, argent et open source. Expliquer comment la communauté fonctionne avec Apache Ignite</a></li>
<li><a href="../fr419393/index.html">Créer une passerelle API simple dans ASP.NET Core</a></li>
<li><a href="../fr419395/index.html">Explication des expressions lambda</a></li>
<li><a href="../fr419399/index.html">OpenAI Five bat une équipe de personnes dans un match show Dota 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>