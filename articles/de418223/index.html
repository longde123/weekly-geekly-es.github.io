<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📭 ⏪ 👫 MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 1 👩‍🔬 🍸 👕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418223/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: „Native Client Sandbox“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Heute sprechen wir über ein System namens <b>Native Client</b> , das <b>Google</b> in der realen Welt verwendet.  Es ist eine Sandbox-Technologie zum Ausführen von Code auf verschiedenen Plattformen.  Es wird im <b>Chrome-Browser verwendet</b> , sodass Webanwendungen beliebigen Maschinencode ausführen können.  Dies ist eigentlich ein ziemlich cooles System.  Es zeigt auch Isolationsfunktionen und eine spezielle Sandbox- oder Berechtigungstrennungstechnik, die als <b>Softwarefehlerisolation</b> , <b>Softwarefehlerisolation bezeichnet wird</b> , ohne das Betriebssystem oder die virtuelle Maschine zum Erstellen der Sandbox zu verwenden. <br><br><img src="https://habrastorage.org/webt/pm/pn/i2/pmpni2s7ydakqxa5tzszbpp2pbu.jpeg"><br><br>  Stattdessen verwendet der <b>native Client</b> einen völlig anderen Ansatz, um bestimmte Anweisungen in einer Binärdatei zu überprüfen und festzustellen, ob die Ausführung sicher ist oder nicht.  Bevor wir uns mit den technischen Details des Systems befassen, wollen wir herausfinden, warum diese Leute wirklich Maschinencode ausführen möchten.  Ihr besonderes Interesse gilt der Anwendung dieser Lösung in einem Webbrowser, in dem Sie bereits <b>JavaScript-</b> Code, <b>Flash Player</b> und einige andere Prozesse ausführen können.  Warum sind diese Leute so begeistert von der Möglichkeit, Code auf der <b>x86-</b> Plattform auszuführen?  Immerhin scheint dies ein Rückschritt zu sein. <br><br>  <b>Teilnehmerin:</b> Sie möchten sehr schnelle Berechnungen erhalten. <br><br>  <b>Professor:</b> Ja, das ist ein großer Vorteil des Maschinencodes.  Auch wenn es auf lange Sicht unsicher sein kann, bietet es eine hohe Leistung.  Alles, was Sie in <b>JavaScript</b> nicht tun würden, zum Beispiel ein Programm schreiben und kompilieren, wird wirklich viel schneller funktionieren.  Gibt es noch andere Gründe? <br><br>  <b>Zielgruppe:</b> Vorhandenen Code ausführen? <br><br>  <b>Professor:</b> richtig.  Es ist wichtig, dass nicht alles in <b>JavaScript</b> geschrieben werden kann.  Wenn Sie also eine vorhandene Anwendung oder in der Branchenterminologie „geerbten“ Code haben, den Sie im Internet ausführen möchten, scheint dies eine großartige Lösung zu sein.  Da Sie beispielsweise nur eine vorhandene Bibliothek verwenden können, eine komplexe grafische „Engine“, die sowohl auf die Leistung als auch auf viele andere komplexe Dinge reagiert, die Sie nicht erneut implementieren möchten, ist dies eine gute Lösung. <br>  Wenn Sie nur eine neue Webanwendung programmieren, sollten Sie Ihren eigenen Client verwenden, wenn Sie nicht besonders über Vererbung oder Leistung besorgt sind? <br><br>  <b>Zielgruppe:</b> Dann müssen Sie kein <b>JavaScript verwenden</b> . <br><br>  <b>Professor:</b> Ja, das ist ein guter Grund.  Wenn Sie <b>JavaScript</b> nicht mögen, müssen Sie es nicht verwenden, oder?  Sie können beispielsweise <b>C verwenden</b> , <b>Python-</b> Code ausführen und in <b>Haskell</b> in einer Sprache schreiben, die Sie für geeigneter halten. <br><br>  Dies ist also eine ziemlich überzeugende Liste von Motivationen für die Ausführung Ihres eigenen Codes in einem Browser, und es ist ziemlich schwierig, Rechte für eine solche Aktion zu erhalten.  In nur einer Sekunde werden wir die technischen Details betrachten, und jetzt möchte ich Ihnen eine einfache Schulungsdemo zeigen, die ich von der <b>Native Client-</b> Website erhalten habe. <br><br><img src="https://habrastorage.org/webt/eu/nh/qv/eunhqvmixughsk_piecmnsfwcpy.jpeg"><br><br>  Dies ist recht einfach, da Sie <b>C ++</b> oder ein <b>C-</b> Programm in einem Browser ausführen können.  Sie können sich diese Webseite ansehen, bei der es sich um eine <b>HTML-</b> Datei handelt, die eine Menge <b>JavaScript-</b> Code enthält. <br><br><img src="https://habrastorage.org/webt/no/fp/is/nofpisdyic-0xbo1xfg-ptmbsta.jpeg"><br><br>  Der Grund für das Vorhandensein dieses <b>JavaScript-</b> Codes besteht darin, dass Sie mit Teilen des <b>nativen Clients</b> interagieren können.  In Bezug auf den Betrieb des Browsers bedeutet eine solche Lösung, dass Sie eine Art Webseite haben, die <b>JavaScript-</b> Code enthält.  Diese Lösung arbeitet mit den Berechtigungen der Seiten und ermöglicht es Ihnen, verschiedene Dinge auf der Webseite selbst zu tun, z. B. unter bestimmten Umständen mit dem Netzwerk zu kommunizieren. <br><br>  <b>Mit Native Client</b> können Sie Ihr Modul im Browser ausführen, sodass <b>JavaScript-</b> Code mit ihm interagieren und eine Antwort erhalten kann.  Dies zeigt einen Teil des <b>JavaScript-</b> Codes, den der <b>native Client</b> benötigt, um mit dem spezifischen <b>NaCl-</b> Modul zu interagieren, das wir ausführen möchten. <br><br><img src="https://habrastorage.org/webt/kl/hz/hr/klhzhr6znxavpre0y7ro-bjrgbw.jpeg"><br><br>  Und Sie können Nachrichten an dieses Modul senden.  Wie wird das gemacht?  Sie nehmen das Objekt dieses Moduls in <b>JavaScript</b> , nennen es <b>postMessage</b> und unterstützen somit das Senden dieser Nachricht an das <b>NaCl-</b> Modul.  Wenn das <b>NaCl-</b> Modul antwortet, startet es die Nachrichtenfunktion in <b>JavaScript</b> .  In diesem speziellen Fall wird im Browser nur ein Dialogfeld angezeigt. <br><br><img src="https://habrastorage.org/webt/n1/6f/ct/n16fct-epmcvq47bqh35b7wvc8i.jpeg"><br><br>  Auf der <b>JavaScript-</b> Seite ist dies also eine ziemlich einfache Webseitenoberfläche.  Das einzige, was Sie zusätzlich tun müssen, ist, das <b>NaCl-</b> Modul auf diese Weise zuzuweisen.  Das heißt, Sie fügen <b>hier</b> einfach ein Modul mit einer bestimmten <b>ID ein</b> .  Am interessantesten ist hier der <b>Hallo-</b> Code mit der Erweiterung <b>nmf</b> .  Er sagt nur, dass es eine ausführbare Datei gibt, die Sie herunterladen und in einer <b>NaCl-</b> Umgebung damit arbeiten müssen. <br><br><img src="https://habrastorage.org/webt/14/r_/xn/14r_xn80sp_m3ubrkfftdryomqw.jpeg"><br><br>  Dieser native Code ist wirklich wie jeder andere C ++ - Code, den Sie schreiben können.  Der interessante Teil ist diese <b>HandleMessage-</b> Nachrichtenverarbeitungsfunktion. <br><br><img src="https://habrastorage.org/webt/hr/rn/kn/hrrnkncebsasx-lajbmnlf089xc.jpeg"><br><br>  Dies ist eine <b>C ++ -</b> Klasse. Wenn <b>JavaScript-</b> Code eine Nachricht an <b>Native</b> Code sendet, wird diese Funktion ausgeführt.  Es führt eine <b>if (message = = 'hello')</b> Prüfung durch.  In diesem Fall wird eine Art Antwortzeile erstellt und zurückgesendet.  Das ist ziemlich einfaches Zeug.  Aber für Einzelheiten versuchen wir, es auszuführen und zu sehen, was passiert. <br><br>  Wir können einen kleinen Webserver erstellen und ausführen, der diese Seite und das <b>Native Client-</b> Modul bedient.  Hier kann ich zu dieser <b>URL</b> gehen und hier sehen wir die <b>NaCl-</b> Webseite.  Das Modul erhielt unsere Begrüßungsnachricht von <b>JavaScript</b> , antwortete mit einer Zeichenfolge in <b>JavaScript</b> und der <b>JavaScript-</b> Code löste einen Popup-Dialog mit dieser Antwort aus. <br><br><img src="https://habrastorage.org/webt/rh/hi/xv/rhhixv0gqz8vgls10i0dkus3vgw.jpeg"><br><br>  Also funktioniert es wirklich. <br><br>  Versuchen Sie herauszufinden, ob der <b>native Client</b> abstürzen kann.  Ich hoffe nicht, aber wir können diesen Code und diesen Puffer nehmen und eine Menge Unsinn darin schreiben, zum Beispiel 65536, und sehen, was passiert. <br><br><img src="https://habrastorage.org/webt/hi/gc/iy/higciynre_pzpduwpdkhsw-6hlq.jpeg"><br><br>  Ich hoffe, dies sollte nicht zum Absturz meines Browsers führen, da der <b>native Client</b> versucht, eine Isolation bereitzustellen.  Aber mal sehen, was passiert. <br><br>  Starten Sie den Webserver neu.  Wir sehen, dass der Zugang zum Modul noch erfolgreich ist, unser Browser wurde nicht verletzt.  Das Messaging mit dem Client fand jedoch nicht statt, sodass das Dialogfeld fehlt.  Schauen wir uns die <b>JavaScript-</b> Konsole unten auf der Seite an und sehen wir, dass das <b>Native Client-</b> Modul uns über den Ausfall des <b>NaCl-</b> Moduls informiert. <br><br><img src="https://habrastorage.org/webt/5d/ec/ev/5decevvdddfz81augpqkdi25tni.jpeg"><br><br>  Es ist möglich, dass das von mir eingegebene Argument einen Pufferüberlauf oder den Zugriff auf eine falsche Adresse verursacht hat. In jedem Fall kann das <b>NaCl-</b> Modul jedoch eine versehentliche Speicherbeschädigung so isolieren, dass der Browser nicht beeinträchtigt wird. <br><br>  Dies ist eine kurze Demonstration dieses Systems in der Form, in der Sie es als Endbenutzer oder Entwickler verwenden können.  Schauen wir uns noch ein paar Beispiele an.  Zum Beispiel, wie der <b>native Client</b> funktioniert oder warum wir genau dies und kein alternatives Design benötigen. <br><br>  Wenn Sie also Ihren eigenen Code isolieren möchten, gibt es verschiedene Alternativen, mit denen Sie dies tun können.  Tatsächlich hatten Benutzer Probleme mit der Verwendung von Legacy-Code und anderen Sprachen, bevor der <b>native Client</b> angezeigt wurde.  Sie lösten sie auf verschiedene Weise, die möglicherweise nicht so sicher und bequem waren wie der <b>native Client</b> , aber dieselben Isolationsfunktionen bereitstellten. <br><br>  Was sollten Sie also tun, wenn Sie wirklich Maschinencode in einem Browser ausführen möchten?  Eine Option ist das Vertrauen in den Entwickler.  Möglicherweise besteht eine Variante dieses Ansatzes darin, dass Sie den Benutzer fragen, ob er einen Code in seinem Browser ausführen möchte oder nicht. <br><br>  Jeder versteht ungefähr, was für ein Plan das ist, oder?  Anstelle all dieser <b>Native Client-</b> Kompilierungsstrategie könnte ich beispielsweise einfach ein <b>C-</b> Programm erstellen, es in einem Browser ausführen und er würde mich fragen, ob ich diese Site ausführen möchte oder nicht.  Und wenn ich auf "Ja" klicke und versehentlich im Speicher des Browsers "mähe", stürzt es ab.  Also ist es möglich, richtig?  Dies löst natürlich all diese Probleme, aber was ist daran falsch? <br><br>  Ich denke, das Schlimme ist, dass diese Lösung unsicher ist.  Dies ist eine Möglichkeit, dieses System und viele andere Systeme zu umgehen. <br><br>  <b>Microsoft</b> hatte ein System namens <b>ActiveX</b> , das diesen Plan im Grunde implementierte.  Sie können die Binärdateien an <b>IE</b> , den Browser auf Ihrem Computer, senden. Bis sie mit einem Zertifikat eines bestimmten Entwicklers zurückkehren, das beispielsweise von <b>Microsoft</b> oder einer anderen Person signiert wurde, führt der Browser Ihren Code nicht aus.  Halten Sie dies für einen nützlichen Plan? <br><br>  Teilnehmerin: Dies ist Vertrauenssache! <br><br>  Professor: Ja, das ist es.  Sie müssen wirklich ein wenig darauf vertrauen, dass der Entwickler nur die „Binärdateien“ signiert, die nichts falsch machen.  Aber es ist oft unmöglich herauszufinden, ob dies eine schlechte Sache ist oder nicht, also schreiben sie einfach <b>C-</b> Code und signieren ihn blind, ohne viel Arbeit zu erledigen.  In diesem Fall können in Zukunft möglicherweise bestimmte Probleme auftreten. <br><br>  Ebenso garantiert die Entscheidung, den Benutzer zu fragen, ob er wirklich etwas ausführen möchte, überhaupt keine Sicherheit.  Auch wenn der Benutzer vorsichtig sein möchte, ist nicht klar, wie er sich entscheiden soll.  Angenommen, ich möchte wirklich verstehen, ob ich dieses Programm funktionieren lassen kann?  Mir wurde gesagt, dass alles in Ordnung ist, vielleicht wurde es von seriösen Entwicklern von <b>Google.com</b> oder <b>Microsoft.com erstellt</b> .  Dies ist jedoch die ausführbare Datei <b>foo.exe</b> und ich weiß absolut nicht, was sich darin befindet.  Selbst wenn ich seinen Code zerlege, wird es sehr schwierig sein zu sagen, ob er etwas Schlechtes tun wird oder nicht.  Daher ist es für den Benutzer wirklich schwierig zu entscheiden, ob die Codeausführung für das System sicher ist. <br><br><img src="https://habrastorage.org/webt/yj/sh/fa/yjshfa6jbfjytpoxjzdt2qfgdpw.jpeg"><br><br>  Auf diese Weise kann der <b>native Client</b> als Mechanismus fungieren, mit dem Benutzer sicher sein können, ob sie zu einem Programm Ja oder Nein sagen sollen. <br><br>  In der Praxis sollte meiner Meinung nach letzte Woche eine Option von unserem Gastdozenten Paul Yang vorgeschlagen werden.  Er empfahl, das Plugin " <b>Play Extension</b> " oder "Play the Extension" im <b>Chrome-Browser auszuführen</b> .  Das heißt, es stellt sich heraus, dass Sie vor dem Starten einer Erweiterung, einschließlich des <b>nativen Clients</b> , auf dieses Element klicken müssen.  In gewisser Weise entspricht dies der Frage an den Benutzer.  In diesem Fall ist das System jedoch auch dann sicher, wenn der Benutzer mit „Ja“ antwortet, da der <b>native Client</b> in die Arbeit <b>einbezogen wird</b> .  In diesem Sinne haben wir einen doppelten Sicherheitsmechanismus: Fragen Sie zuerst den Benutzer und starten Sie dann mit einer positiven Antwort den Sandbox-Client, damit der Browser nicht abstürzt. <br><br>  Ein weiterer Ansatz, der angewendet werden sollte, ist die Verwendung der Sandbox, die mithilfe des Betriebssystems oder der Hardware implementiert wird, oder die Isolierung von Prozessen.  Dies haben wir in den letzten beiden Vorlesungen untersucht. <br><br>  Vielleicht würden Sie <b>Unix-</b> Isolationsmechanismen verwenden.  Wenn Sie etwas komplexeres hätten, würden Sie <b>FreeBSD</b> oder <b>Capsicum verwenden</b> .  Es eignet sich hervorragend zum Isolieren eines Codeteils in der Sandbox, da Sie dessen Funktionen einschränken können.  <b>Linux</b> hat einen ähnlichen Mechanismus namens <b>Seccomp</b> , den wir in der letzten Vorlesung kurz behandelt haben. Er ermöglicht es Ihnen auch, solche Dinge zu tun. <br><br>  Daher gibt es bereits einen Mechanismus zum isolierten Schreiben von Code auf Ihrem Computer.  Warum sind diese Leute gegen die Verwendung dieser bestehenden Lösung?  Es scheint, als würden sie aus irgendeinem Grund „das Rad erfinden“.  Also, was ist los? <br><br>  <b>Teilnehmerin:</b> Vielleicht wollen sie Fehler minimieren? <br><br>  <b>Professor:</b> Ja, in gewisser Weise vertrauen sie dem Betriebssystem nicht.  Vielleicht sind sie tatsächlich besorgt über Betriebssystemfehler.  Es ist wahrscheinlich, dass der <b>FreeBSD-</b> Kernel oder der <b>Linux-Kernel</b> ziemlich viel <b>C-</b> Code enthält, den sie nicht wollen oder nicht auf Richtigkeit prüfen können, selbst wenn sie wollten.  In <b>Capsicum</b> oder <b>Seccomp erfolgt die</b> Arbeit auf der Grundlage des Isolationsplans. Es reicht also aus, dass der Kernel nur über einen kleinen, zuverlässigen Code verfügt, sodass die Sandbox die Isolation beibehält und anwendet. <br><br><img src="https://habrastorage.org/webt/wr/iq/ew/wriqewh7dx-iiwc-q2wymixcw1k.jpeg"><br><br>  <b>Zielgruppe:</b> Da Sie viel mehr Möglichkeiten zur Verwendung von Browsern haben, müssen Sie sich mit verschiedenen Betriebssystemen wie iOS und Android auseinandersetzen und auf ... <br><br>  <b>Professor:</b> Ja, eine weitere interessante Überlegung ist, dass normalerweise viele Betriebssysteme Fehler aufweisen.  Darüber hinaus sind verschiedene Betriebssysteme in gewisser Weise nicht miteinander kompatibel.  Dies bedeutet, dass jedes Betriebssystem seinen eigenen Mechanismus hat, wie hier gezeigt: <b>Unix</b> hat <b>Capsicum</b> , <b>Linux</b> hat <b>Seccomp</b> , aber dies sind nur Variationen von <b>Unix</b> .  <b>Mac OS</b> hat <b>Sicherheitsgurt</b> , <b>Windows</b> hat etwas anderes und die Liste geht weiter. <br><br>  Letztendlich verfügt jede Plattform, mit der Sie arbeiten, über einen eigenen Isolationsmechanismus.  Und was sie wirklich nicht allzu sehr stört, ist, dass sie unterschiedlichen Code für <b>Mac</b> , <b>Windows</b> und <b>Linux</b> schreiben müssen.  Dies wirkt sich jedoch mehr darauf aus, wie Sie diese Dinge schreiben, damit sie in der Sandbox funktionieren.  Denn im <b>Native Client</b> schreiben Sie tatsächlich einen Code, der genauso ausgeführt wird wie der "native" Betriebssystemcode, genauso wie <b>Apple-</b> Code, <b>Windows-</b> Code oder <b>Linux</b> -Systemcode ausgeführt werden. <br><br>  Wenn Sie diese Isolationsmechanismen verwenden, unterliegen sie tatsächlich unterschiedlichen Einschränkungen für das in der Sandbox platzierte Programm.  Sie müssen also ein Programm schreiben, das in der <b>Linux-</b> Sandbox ausgeführt wird, ein anderes Programm, das in der <b>Windows-</b> Sandbox ausgeführt wird, und so weiter. <br><br>  Das ist für sie wirklich inakzeptabel.  Sie wollen sich nicht mit solchen Problemen befassen.  Welche anderen Überlegungen haben Sie? <br><br>  <b>Zielgruppe:</b> vermutlich Systemleistung.  Wenn Sie <b>Capsicum verwenden</b> , müssen Sie auf ausreichende Ressourcen achten, um sicherzustellen, dass die Prozesse in der Sandbox funktionieren.  Hier können sie das gleiche Problem haben. <br><br>  <b>Professor:</b> Ja, das stimmt.  Der Isolationsplan für Software-Abstürze ist tatsächlich sehr ressourcenintensiv, was auf Betriebssystemebene zu einem Mangel an Ressourcen zur Unterstützung der Sandbox führen kann.  Es stellt sich heraus, dass sie in ihrem eigenen <b>nativen Client</b> sowohl ihre Sandbox als auch ihre Betriebssystem-Sandbox verwenden, um zusätzliche Sicherheit zu bieten.  Tatsächlich gewinnen sie also nicht an der Leistung ihrer Implementierung, obwohl sie dies wahrscheinlich könnten. <br><br>  <b>Teilnehmerin:</b> Vielleicht wollen sie alles kontrollieren.  Da sie steuern können, was im Browser passiert, aber wenn sie es an den Computer des Clients unter dem Betriebssystem senden, wissen sie nicht, was dort passieren könnte. <br><br>  <b>Professor:</b> Man kann sagen, dass das Betriebssystem möglicherweise Fehler aufweist oder die Sandbox nicht gut genug verwaltet.  Oder die Benutzeroberfläche ist etwas anders, sodass Sie nicht wissen, was das Betriebssystem preisgeben wird. <br><br>  <b>Zielgruppe:</b> Dies verhindert nicht, dass der Code einige schlechte Dinge tut.  Es gibt viele Dinge, die Code tut, zum Beispiel, wenn Sie eine statische Analyse durchführen möchten, aber Code-Schleifen verhindern, dass das Programm funktioniert. <br><br>  <b>Professor:</b> Tatsächlich ist es sehr schwierig festzustellen, ob es einen Prozess mit Endlosschleifen gibt oder nicht, aber im Prinzip können Sie mit diesem Ansatz einige Codeprobleme erkennen.  Ich denke, dass ein wirklich interessantes Beispiel, von dem ich bis zum Lesen ihres Artikels nichts wusste, zeigt, dass diese Leute sich Sorgen über Hardwarefehler machen und nicht nur über Betriebssystemschwachstellen, die vom Code ausgeführt werden können.  Beispielsweise verfügt der Prozessor selbst über einige Anweisungen, die dazu führen können, dass der Computer einfriert oder neu gestartet wird.  Grundsätzlich sollte Ihr Gerät keinen solchen Fehler aufweisen, da das Betriebssystem darauf angewiesen ist, dass die Hardware in jedem Fall dazu beiträgt, den Kernel zu erreichen, um die Folgen eines Benutzerfehlers zu beseitigen. <br><br>  Aber es stellt sich heraus, dass die Prozessoren so komplex sind, dass sie Fehler haben, und diese Leute sagen, dass sie Beweise dafür gefunden haben.  Wenn der Prozessor einige komplexe Anweisungen nicht erwartet hat, wird er gestoppt, anstatt den Systemkern zu verarbeiten.  Das ist schlecht.  Ich denke, das ist nicht katastrophal, wenn ich nur ein paar nützliche Dinge auf meinem Laptop laufen lasse, aber viel schlimmer, wenn der Computer beim Besuch einer Webseite einfriert. <br><br>  Daher wollten sie ein höheres Schutzniveau für die <b>Native Client-</b> Module schaffen als dasjenige, das eine Isolation auf Betriebssystemebene bietet, auch ohne Hardwarefehler.  In Bezug auf Sicherheit verhalten sie sich also wie paranoide, einschließlich des Hardware-Sicherheitsproblems. <br><br>  Lassen Sie uns nun sehen, wie der <b>native Client</b> Prozesse in der Sandbox tatsächlich isoliert.  Daher verfolgt der <b>native Client</b> einen anderen Ansatz, der als "Isolieren von Softwarefehlern" bezeichnet werden kann. <br><br><img src="https://habrastorage.org/webt/rk/a1/gv/rka1gv4vu6qut_1tjda81we9u6w.jpeg"><br><br>  Es ist nicht geplant, sich darauf zu verlassen, dass das Betriebssystem oder die Ausrüstung die Dinge überprüft, während das Programm ausgeführt wird, sondern sich darauf zu verlassen, dass sie die Anweisungen im Voraus überprüfen und entscheiden, dass sie vollständig sicher ausgeführt werden können.  Daher reicht es in der Tat aus, die Binärdatei zu überprüfen, um alle möglichen Anweisungen zu überprüfen und festzustellen, ob sie sicher oder unsicher sind.  Sobald Sie entschieden haben, dass alles sicher ist, können Sie den Prozess einfach starten, da Sie wissen, dass er aus sicheren Dingen besteht und keine Fehler auftreten. <br><br>  Sie sehen sich also fast alle Anweisungen im Binärcode an, der an den Browser gesendet wird, und entscheiden, ob bestimmte Anweisungen sicher sind oder nicht. <br><br>      ?     .      ? ,  ,          . <br><br>     -  <b>ALU</b> ,  ,      .         ,    .       ,   ,        .   ,      ,   ,           . <br><br><img src="https://habrastorage.org/webt/jh/gt/nb/jhgtnbhw2ijz1h3_9t_ypdy-nr4.jpeg"><br><br>     ?  ,   ,     .   ,     ,     ,       .  ,    «»  ,  ?           . <br><br>       , ,     ,    -  ,        .    «»    ,    -   .   ,      «» ,     .        ,   ,        ,      ,       . <br> ,         (      )    .      . ,      <b>if</b>  ,      ,    .   ,  ,   –  . <br><br>  ,     ,         ,       .               .  ,       ,        . ,   ,        ,       ,    «»      . <br><br><img src="https://habrastorage.org/webt/na/m3/8e/nam38efcfifztldcv1vxg6zfhpu.jpeg"><br><br>        .       ,          ,     .   ,      ,         . <br><br>          ,    ,    ,   ,       - ,      .       ,  ,   , , .               <b>Trusted Service Runtime</b> ,     .          .         <b>Google</b> .    ,    <b>NaCl</b>    . <br><br>     ,   , ,  ,  ,    —  ,      —   .        ,        . <br><br> <b>:</b> ,        ,       <b>NaCl</b> ?        ,      ? <br><br> <b>:</b>  ,     ,   ,      <b>NaCl</b> .    ,   <b>malloc</b>  <b>pthread_create</b> ,       <b>Trusted Service Runtime</b> .     -        ,        <b>Unix</b> ,       - . ,     ,        <b>JavaScript</b>   -.        <b>RPC</b>   <b>JavaScript</b> ,         . <br><br><img src="https://habrastorage.org/webt/t9/yv/c3/t9yvc38rfpu-anjcegov4zusgjg.jpeg"><br><br> ,   ,     <b>NaCl</b>  <b>Unix</b> -,    - ,          -. <br><br>        .  ,       <b>Native Client</b> .          –       <b>Native Client</b> ? <br><br>    ,  <b>Native Client</b>    .   ,     ,    .        ,      ,    <b>x86</b>            . ,        ,       «»,     . <br><br>            ,           .  ,         ,     0  256   .  ,    ,      ,    ,         . <br><br>        ?   ,      ? <br><br> <b>:</b>  ,     . <br><br> <b>:</b> ,     . ,        ,        .     ,      ,         ?    ,     ? <br><br> <b>:</b>              . <br><br> <b>:</b> ! <br><br> <b>:</b>  -,       ,    .       . <br><br> <b>:</b> ,     .    ,       .  ,  ,       .  ,           ,       ,  <b>Trusted Service Runtime</b> .       ,        ,         <b>Trusted Service Runtime</b>   ,     .  ,          . <br><br>  ,         ,      <b>NaCl</b>    ,     .              ,       0.  ,          <b>NaCl</b>   .         . <br><br> 28:00  <br><br> : <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 7: « Native Client»,  2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/I0Psvvky-44" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br> ,    .  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder sie Ihren Freunden empfehlen. <b>Habr-Benutzer erhalten 30% Rabatt auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 Monate kostenlos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bei Bezahlung eines neuen Dell R630 für einen Zeitraum von sechs Monaten - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel Deca-Core Xeon E5-2630 v4 / 128 GB DDR4 / 4 x 1 TB Festplatte oder 2 x 240 GB SSD / 1 Gbit / s 10 TB - ab 99,33 USD pro Monat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nur bis Ende August, Bestellung kann </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier sein</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418223/">https://habr.com/ru/post/de418223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418213/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssysteme?“, Teil 1</a></li>
<li><a href="../de418215/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssystemfehler?“, Teil 2</a></li>
<li><a href="../de418217/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 1</a></li>
<li><a href="../de418219/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: Chancen, Teil 2</a></li>
<li><a href="../de418221/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 3</a></li>
<li><a href="../de418225/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Native Client Sandbox Teil 2</a></li>
<li><a href="../de418227/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 3</a></li>
<li><a href="../de418229/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 1</a></li>
<li><a href="../de418233/index.html">BMW Mnemonik zum Finden von Grenzwerten</a></li>
<li><a href="../de418235/index.html">Orchestrierte Saga oder Erstellen von Geschäftstransaktionen in Diensten mit der Datenbank nach Dienstmuster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>