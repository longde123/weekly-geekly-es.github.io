<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèª üíñ üï∫üèø Da maneira mais dif√≠cil, desde uma ideia at√© um sistema de monitoramento industrial comercial üë®‚Äçüç≥ üë®üèª‚Äçüî¨ üåï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, quero compartilhar minha experi√™ncia e falar sobre o caminho que percorremos, desenvolvendo o WebHMI do complexo industrial de software ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Da maneira mais dif√≠cil, desde uma ideia at√© um sistema de monitoramento industrial comercial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402049/">  Neste artigo, quero compartilhar minha experi√™ncia e falar sobre o caminho que percorremos, desenvolvendo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebHMI do</a> complexo industrial de software e hardware para monitorar sistemas de engenharia.  Sob o corte muitas fotos. <br><br><img src="https://habrastorage.org/files/4b6/ae5/6c5/4b6ae56c56d6490a84c99e3617454089.jpg"><br><br>  A hist√≥ria do WebHMI come√ßou na primavera de 2013.  Ent√£o fiquei empolgado com a id√©ia de uma casa inteligente e, no lazer, fiz todos os tipos de brinquedos para acender automaticamente as luzes do vaso sanit√°rio, coletar leituras de hidr√¥metros etc.  Uma vez, meu amigo olhou para o sistema resultante e pensou que poderia ser vendido, e come√ßamos a pensar em como e para quem.  Mas acabou de alguma forma n√£o elegante.  Um pouco mais tarde, ele teve uma ideia diferente - encontrou um nicho vago no mercado de sistemas de automa√ß√£o industrial.  E n√≥s o implementamos. <br><a name="habracut"></a><br><h3>  Pr√≥logo </h3><br>  A situa√ß√£o era tal que as solu√ß√µes existentes no mercado de automa√ß√£o eram adequadas para grandes f√°bricas com or√ßamentos de v√°rios milh√µes de d√≥lares, mas, considerando o volume e o alto custo, eram completamente inaceit√°veis ‚Äã‚Äãpara m√©dias e pequenas empresas.  Solu√ß√µes cl√°ssicas para monitorar processos tecnol√≥gicos, sistemas SCADA, custam muito dinheiro, exigem licen√ßas poderosas de PCs, sistemas operacionais e bancos de dados, exigem muitas e muitas horas de trabalho de um engenheiro qualificado para configurar o software e criar um projeto.  Se voc√™, por exemplo, tem uma pequena estufa, provavelmente n√£o poder√° investir dezenas de milhares de d√≥lares em um sistema de monitoramento de v√°rias dezenas de par√¢metros.  E se essas estufas, digamos, 10 a 20?  E se eles estiverem geograficamente espa√ßados?  O custo de tais sistemas decola imediatamente para o c√©u, mas ao mesmo tempo eles ainda resolvem mal "pequenos" problemas.  E completamente inadequado para sistemas distribu√≠dos. <br><br>  Do outro lado da balan√ßa havia pain√©is IHM.  Eles t√™m um custo relativamente baixo (de algumas centenas de euros) e permitem criar uma interface de opera√ß√£o local para qualquer sistema pequeno.  Como regra - uma instala√ß√£o.  No entanto, esses pain√©is t√™m funcionalidades muito limitadas e n√£o atendem √†s necessidades dos clientes modernos. <br><br>  Estabelecemos nossa vis√£o do nicho entre os grandes sistemas SCADA e os pain√©is IHM.  Come√ßamos a procurar op√ß√µes para o que pode ser usado como plataforma de software e hardware.  Logo ficou √≥bvio que tudo teria que ser feito por n√≥s mesmos, caso contr√°rio n√£o funcionaria para ganhar dinheiro com a solu√ß√£o.  Um PC industrial pronto ou tornar√° a solu√ß√£o muito cara e desinteressante para o cliente ou n√£o ganhar√° dinheiro.  Tamb√©m n√£o havia software finalizado. <br><br><img src="https://habrastorage.org/files/c5a/29e/082/c5a29e082be94f258af66e0e502cf7e6.jpg"><br>  PC industrial que n√£o usamos <br><br>  Olhando para o futuro, direi que conseguimos criar um produto com valor compar√°vel ao painel da IHM, mas com funcionalidade incomparavelmente maior.  De fato, um sistema SCADA completo foi obtido.  Al√©m disso, para o desenvolvimento de projetos baseados nele, nenhum software adicional √© necess√°rio - o desenvolvimento, ou melhor, a configura√ß√£o, √© realizado diretamente no navegador.  Todo o software necess√°rio est√° inclu√≠do e funciona a bordo. <br><br>  O processo de desenvolvimento de qualquer dispositivo, e ainda mais industrial, √© fundamentalmente diferente do desenvolvimento de software.  Aqui, o pre√ßo do erro √© incomparavelmente mais alto.  O ciclo de ‚Äúfazer altera√ß√µes - verificar o resultado‚Äù dura semanas porque  a modifica√ß√£o do painel exige que seja solicitada em produ√ß√£o, montagem e comissionamento.  E este √© um longo tempo de produ√ß√£o, tempo de entrega (da China), dinheiro para log√≠stica, montagem, instala√ß√£o e depura√ß√£o.  Felizmente, por√©m, no in√≠cio de nossa jornada, n√£o sab√≠amos disso.  Caso contr√°rio, n√£o sei se eles decidiriam jogar este jogo ou n√£o. <br><br><h3>  Primeiros passos </h3><br>  N√£o nos comprometemos a desenvolver nosso pr√≥prio PC.  Para isso, n√£o houve experi√™ncia brega, dinheiro ou pessoal adequado.  Al√©m disso, os PCs cl√°ssicos s√£o pouco adequados para a nossa aplica√ß√£o.  Imaginamos nosso dispositivo como uma pequena caixa que pode ser colocada no gabinete de automa√ß√£o em um trilho DIN e alimentada pelos que j√° est√£o dispon√≠veis no gabinete de 24V.  Para fazer isso, decidimos pegar um SOM (System-On-Module) pronto e montar uma ‚Äúplaca-m√£e‚Äù com uma fonte de energia e todos os perif√©ricos necess√°rios.  A tarefa parecia bastante simples e realiz√°vel em poucas semanas, no m√°ximo em meses. <br><br>  Como se viu depois, esses termos eram levemente otimistas.  Montar um prot√≥tipo em uma mesa e obter um dispositivo industrial com funcionamento est√°vel s√£o, como se costuma dizer, duas grandes diferen√ßas.  O primeiro layout de trabalho pode ser montado no joelho de uma semana em duas.  Mas para finalizar esse layout em um produto serial comercial, levamos um ano e meio. <br><br>  Para a primeira vers√£o do software, definimos uma tarefa m√≠nima para n√≥s mesmos - trabalhando com os protocolos Siemens PPI e Modbus ASCII / RTU.  Porque  Eu tinha muita experi√™ncia em desenvolvimento web, a interface era originalmente baseada em tecnologias web.  Posteriormente, isso se tornou um recurso importante do produto. <br><br>  Por que exatamente esses protocolos?  Encontramos um cliente em potencial - um cliente que era bastante leal a n√≥s e estava pronto para testar nosso produto para monitorar sua instala√ß√£o de embalagem.  Em seu parque de equipamentos, havia PLCs das fam√≠lias Siemens S7 200 e Delta DVP.  Agora, √© claro, a lista de protocolos suportados √© muito mais ampla.  Voc√™ pode at√© escrever seus pr√≥prios protocolos em Lua, se necess√°rio.  Mas ent√£o n√≥s n√£o sonhamos com isso. <br><br>  Assim, tendo garantido o suporte de um cliente em potencial, come√ßamos a desenvolver nosso produto.  Acredito que conseguimos o come√ßo certo - resolvemos um problema espec√≠fico (rastreando o n√∫mero de produtos manufaturados) e n√£o inventamos uma solu√ß√£o universal para um problema abstrato.  Caso contr√°rio, estar√≠amos envolvidos em desejos intermin√°veis ‚Äã‚Äãde adicionar "outro" recurso matador muito importante, que n√£o est√° claro se seria √∫til para pelo menos algu√©m na vida real. <br><br>  No futuro, todos os novos "recursos" foram adicionados apenas como necessidade real.  Quando j√° est√° muito quente.  Al√©m disso, se um recurso √© necess√°rio apenas por um cliente espec√≠fico e n√£o pode ser √∫til a outros clientes de forma alguma, n√£o o adicionamos.  Fazemos apenas o que podemos "vender" para outra pessoa. <br><br>  Para depura√ß√£o, foram usadas uma placa de depura√ß√£o do fabricante do SOM e v√°rias placas caseiras com v√°rios subsistemas.  Por isso, depurou o trabalho dos principais sistemas perif√©ricos sem altera√ß√£o constante de toda a placa base.  J√° estava pronto quando todos os componentes estavam prontos e funcionaram conforme necess√°rio. <br><br>  O software foi escrito em paralelo com o desenvolvimento da primeira revis√£o do conselho.  Provavelmente n√£o falarei em detalhes sobre o processo de desenvolvimento de software.  muitos leitores da Giktayms est√£o familiarizados com esse processo.  S√≥ direi que tive que: <br><br><ul><li>  revisar tantas abordagens de desenvolvimento de software </li><li>  repensar C / C ++ e fazer amizade com ele </li><li>  domine a depura√ß√£o dos bugs mais m√≠sticos que ocorrem uma vez por m√™s em momentos aleat√≥rios em sistemas remotos e levam a uma falha no sistema </li><li>  aprender a consumir recursos do sistema de maneira econ√¥mica </li><li>  otimizar tudo o que √© poss√≠vel e ainda mais </li><li>  Aprenda a escrever um software que funcione por meses sem reiniciar </li></ul><br>  Isso se deve principalmente aos recursos muito limitados da CPU SOM de 400 MHz, 64 MB de RAM e 16 MB de mem√≥ria Flash selecionada.  Tornar sites hospedados em um "servidor" como esse - dif√≠cil!  No entanto, temos PHP, um banco de dados, Nginx e muitos outros brindes a bordo.  E embora o sistema possa trabalhar com uma capacidade de resposta incr√≠vel - por exemplo, voc√™ pode desenhar tend√™ncias que s√£o atualizadas 20 vezes por segundo. <br><br>  A primeira vers√£o do software foi, digamos, apenas um teste da ideia.  Verificamos mais que nesta plataforma, em geral, √© poss√≠vel perceber o que estamos buscando.  Ap√≥s 3-4 meses de desenvolvimento, no m√≠nimo, mas o software "ganhou vida".  Agora temos uma interface web onde voc√™ pode criar telas para exibir e visualizar dados do CLP.  Os dados foram lidos em segundo plano e o navegador atualizou constantemente as informa√ß√µes em um computador, tablet ou telefone em tempo real.  A orienta√ß√£o para a Web tornou-se a pedra angular do nosso produto - permite usar quase qualquer sistema operacional e qualquer dispositivo para exibir a interface do operador, do telefone √† Smart TV.  Tamb√©m permite que voc√™ se integre de maneira flex√≠vel √† infraestrutura de rede, trabalhe remotamente via Internet, etc. <br><br>  Nosso primeiro projeto consistiu em duas d√∫zias de registros (vari√°veis ‚Äã‚Äãlidas no PLC).  Em seguida, planejamos que o WebHMI fosse usado apenas para monitorar pequenos sistemas isolados.  Qu√£o humildes e inseguros √©ramos ent√£o!  Agora, nossos clientes t√™m projetos de automa√ß√£o para lojas e complexos esportivos, onde existem dois mil registros cada.  Mas entre o primeiro alfa e a vers√£o atual do software, houve mais de tr√™s anos de desenvolvimento, depura√ß√£o e otimiza√ß√µes meticulosos. <br><br>  Na √©poca em que a primeira vers√£o alfa do software estava pronta, nosso engenheiro de hardware projetou e fabricou a primeira vers√£o da placa de circuito do dispositivo.  Ficamos felizes em finalmente segurar nossa ideia em nossas m√£os pela primeira vez!  Este √© um sentimento indescrit√≠vel.  Est√°vamos cheios de orgulho pelo fato de termos sido n√≥s que fabricamos esse dispositivo.  Ainda era como um patinho feio - assustador.  Mas dele, querida. <br><br><img src="https://habrastorage.org/files/ead/f95/4b5/eadf954b59444060ad24bf0ffad054ea.jpg" width="800"><br>  O primeiro quadro.  Feito em casa.  Agora ela est√° trabalhando em nosso escrit√≥rio. <br><br><h3>  Ap√≥s a montagem - arquivo </h3><br>  N√£o come√ßamos a defender o caso do zero.  √â caro, longo e dif√≠cil.  Decidimos usar um dos gabinetes padr√£o dispon√≠veis no mercado.  A placa foi originalmente projetada para um caso espec√≠fico.  O caso foi escolhido "mais bonito" - italiano.  Oh, como ent√£o nos atormentamos com esta It√°lia!  Mas mais sobre isso mais tarde. <br><br>  O corpo do primeiro "produto", na verdade um prot√≥tipo, foi mo√≠do manualmente com um dremel, trazido com um arquivo.  Acabou, √© claro, n√£o com muita precis√£o.  E a afina√ß√£o dos orif√≠cios para os LEDs ‚Äúflutuava‚Äù, e os orif√≠cios retangulares eram completamente desiguais.  Mas, para entender como vai ficar e, o mais importante, colocar o quadro no caso, acabou. <br><br><img src="https://habrastorage.org/files/f6d/6b3/5df/f6d6b35dfb0c453790407cc1c8d0f3cd.jpg" height="450"><br>  Primeiro edif√≠cio <br><br>  T√≠nhamos medo de que os conectores n√£o chegassem onde necess√°rio, que estrag√°ssemos em algum lugar.  Em geral, houve alguns erros, mas surpreendentemente n√£o houve nada fatal.  Aqui e ali, era necess√°rio mover os conectores 1-2 mm e tudo.  Movemos os conectores, LEDs e aberturas no gabinete para o pr√≥ximo, provavelmente as revis√µes 10-15.  Todo o tempo havia algo para melhorar.  Imediatamente para fazer tudo perfeitamente n√£o deu certo.  O conector Wi-Fi geralmente precisava ser substitu√≠do por um conector n√£o-padr√£o e mais longo.  Porque  algumas antenas n√£o queriam enrolar em fios curtos. <br><br><h3>  Vendas </h3><br>  O que fazer quando o primeiro prot√≥tipo estiver pronto?  Vend√™-lo imediatamente!  Mas como √© f√°cil mostrar ao cliente um dispositivo industrial que interage com outros dispositivos?  Montamos uma mala de demonstra√ß√£o na qual colocamos o conjunto m√≠nimo de cavalheiros - CLP, fonte de alimenta√ß√£o, painel IHM e, claro, WebHMI. <br><br><img src="https://habrastorage.org/files/5d8/21d/b6b/5d821db6b73f4d9dab633472c60c407b.jpg" width="580"><br>  Mala de demonstra√ß√£o <br><br>  Essa mala permitia demonstra√ß√µes "em campo" - nas instala√ß√µes do cliente e, ao mesmo tempo, possu√≠a mobilidade que permitia que ela fosse movida de um lugar para outro, para ligar e desligar rapidamente.  A prop√≥sito, quase inalterado √© usado por n√≥s at√© hoje. <br><br>  Depois de apresentar o prot√≥tipo ao cliente e receber a aprova√ß√£o dele, decidimos fabricar o primeiro lote de 5 a 10 dispositivos.  Qu√£o dif√≠cil e injustificadamente caro em nosso pa√≠s! <br><br><h3>  Ir para a s√©rie </h3><br>  A placa prot√≥tipo foi feita em casa.  Mas a fabrica√ß√£o de 12 placas simples de duas camadas em galvanoplastia custa um pouco de dinheiro naqueles tempos (mais de US $ 100, ao que parece).  Mas a qualidade das pranchas e especialmente a seda me fizeram chorar - quase artesanal.  Ent√£o eles tentaram pedir na f√°brica da Etal.  Tamb√©m ficaram decepcionados. <br><br><img src="https://habrastorage.org/files/03a/a33/0c7/03aa330c70b443d9a005e4c0377618bf.jpg"><br>  √Ä esquerda, est√° o painel de produ√ß√£o da f√°brica Etal.  √Ä direita est√° a China. <br><br>  Muito tempo depois, quando encomendamos as pranchas j√° na China, choramos novamente.  A qualidade foi comparada √† dom√©stica, como o c√©u e a terra!  Seda clara, orif√≠cios exatamente no centro das almofadas, m√°scara de solda densa e uniforme.  A qualidade √© duas ordens de grandeza maior que a produ√ß√£o local a um pre√ßo tr√™s vezes menor ... Ent√£o, quem apoiar√° o produtor dom√©stico depois disso? <br><br><img src="https://habrastorage.org/files/ee7/101/f47/ee7101f47463423f9b8305d928dfa416.jpg"><br>  Placas da China.  Aurix √© o codinome do projeto. <br><br>  Os acess√≥rios foram adquiridos.  As placas s√£o montadas, verificadas.  Mas os pr√©dios estavam com problemas. <br><br>  T√≠nhamos cerca de 5 amostras de caixas √† m√£o, que quer√≠amos fresar no CNC e inscrev√™-las.  Mas desde  temos uma circula√ß√£o pequena e o produto √© muito mais complicado do que o soberano que √© familiar aos anunciantes, era dif√≠cil encontrar quem queria atender nosso pedido.  Quase irrealista.  O case que temos √© de forma complexa, para imprimir nele, voc√™ precisa usar uma impress√£o em bloco.  E √© bom quando h√° uma grande circula√ß√£o porque  o ajuste e o ajuste do processo √© um neg√≥cio complexo e desagrad√°vel.  Temos muitas impress√µes em apenas 5 edif√≠cios.  Ningu√©m queria aceitar um emprego t√£o ingrato porque voc√™ n√£o ganha dinheiro com isso.  Com o CNC, a hist√≥ria √© semelhante. <br><br>  Com a tristeza ao meio, acabou concordando com alguns rapazes e, em poucas semanas, recebemos 4 conjuntos de casos em que havia vagas onde necess√°rio e inscri√ß√µes onde necess√°rio.  Que as inscri√ß√µes fossem de cores terr√≠veis e longe de serem perfeitamente impressas, mas eram. <br><br><img src="https://habrastorage.org/files/570/7f9/9e4/5707f99e457344c58c82831b7cf18126.jpg" width="800"><br>  Os primeiros produtos comerciais no caso. <br><br>  Mas enquanto durou o √©pico dos edif√≠cios, j√° conseguimos vender o primeiro dispositivo!  Urgentemente necess√°rio colocar algo para o cliente no objeto.  N√£o havia edif√≠cios prontos.  Portanto, o primeiro dispositivo comercial tamb√©m foi mo√≠do manualmente na varanda e sem inscri√ß√µes.  O corpo estava dispon√≠vel apenas extravagantemente verde.  Mas tudo isso n√£o era importante.  √â importante que eles nos paguem - isso significa que estamos fazendo o que as pessoas precisam. <br><br><img src="https://habrastorage.org/files/ef0/4a8/b0b/ef04a8b0b6994200b3f515c702978dec.jpg" width="800"><br>  Batizado Batismo <br><br><h3>  Trabalhe em um ambiente industrial </h3><br>  Nesta instala√ß√£o, encontramos pela primeira vez o que √© chamado Industrial - ru√≠do, poeira, captadores.  Organizar uma conex√£o est√°vel atrav√©s do barramento RS-485 "em cima da mesa" n√£o √© um exemplo mais f√°cil do que em um objeto real.  Nossa conex√£o era constantemente incorreta.  Quanto n√≥s atormentamos com este pneu!  Mas, como se viu depois, a falha foi ... uma dica no cabo.  Entre o solo e as linhas de sinal A e B, surgiu uma diferen√ßa de potencial de at√© 40 V, pulsada e aleatoriamente.  E est√° em um cabo de 50 cm de comprimento!  Al√©m disso, a ponta era vis√≠vel apenas no oscilosc√≥pio.  No volt√≠metro, tudo estava dentro dos limites normais.  Tendo eliminado a causa da interfer√™ncia, estabilizamos a conex√£o e obtivemos um sistema em funcionamento.  Conseguimos entregar o trabalho e obter o pr√≥ximo pedido. <br><br>  Quase imediatamente, percebemos que vender o dispositivo por n√≥s mesmos era uma tarefa imposs√≠vel.  Voc√™ precisa conhecer o cliente, ter um relacionamento com ele, entender suas necessidades.  √â muito f√°cil entrar e vender um produto novo e exclusivo.  N√≥s n√£o vamos vender muito.  Muitas pessoas ainda n√£o entendem imediatamente o que √© o WebHMI quando tentamos falar sobre o sistema.  Portanto, decidimos fazer vendas atrav√©s de revendedores integradores - √© assim que o produto ser√° oferecido diretamente pelo integrador.  E ele j√° conhece seus clientes, ele tem um grande banco de dados de contatos, ele n√£o apenas pode vender equipamentos, mas tamb√©m concluir um projeto com base nele.  E o cliente ir√° satisfazer e ele ganhar√°. <br><br>  Portanto, come√ßamos a negociar com potenciais parceiros.  E muito rapidamente fomos capazes de entrar em um projeto interessante.  Em uma planta metal√∫rgica, era necess√°rio um sistema para monitorar os par√¢metros de opera√ß√£o dos fornos nos quais a tens√£o √© removida dos tubos laminados.  Literalmente, assim que os primeiros edif√≠cios ficaram prontos, dois deles foram vendidos neste projeto. <br><br>  Nesse projeto, pegamos um monte de problemas.  E aqueles que n√£o eram suspeitos.  O software teve que ser bastante modificado para otimizar o sistema.  Sentimos o que √© um vazamento de mem√≥ria, o que est√° depurando um sistema em outra cidade.  A plataforma de hardware tamb√©m teve que ser refeita quase do zero!  Inicialmente, assumimos que o WebHMI seria alimentado por uma fonte de alimenta√ß√£o industrial de 24V boa e de alta qualidade.  Portanto, eles n√£o se preocuparam particularmente com a imunidade ao ru√≠do.  Mas nas condi√ß√µes industriais, tudo n√£o funciona, como na vida cotidiana. <br><br>  Um dos WebHMIs vendidos l√° caiu em apenas alguns minutos de opera√ß√£o.  O que n√≥s simplesmente n√£o tentamos, e diferentes PSUs e filtros, e an√©is de ferrite, protegeram e aterraram tudo o que podiam.  Nada ajudou.  Al√©m disso, o segundo WebHMI em outro forno funcionou de forma est√°vel.  Como resultado, refizemos completamente o circuito do WebHMI, adicionando filtros muito potentes da interfer√™ncia de entrada na energia. <br><br><h3>  Segunda gera√ß√£o </h3><br>  Al√©m disso, muitos outros componentes foram substitu√≠dos, muitos outros foram adicionados.  A mem√≥ria n√£o estava na forma de um m√≥dulo USB, mas na forma de um cart√£o SD.  Havia uma bateria de Li-Po para a capacidade de concluir o trabalho corretamente e, se desejado, para poder trabalhar por at√© duas horas independentemente.  Isso permite que voc√™ sobreviva a falta de energia sem desligar e reiniciar.  Voc√™ tamb√©m pode enviar um sinal de socorro aos sistemas de n√≠vel superior.  Eles acrescentaram a capacidade de desligar o conector USB externo para redefinir os modems 3G externos que gostam de travar periodicamente.  Tentamos diferentes hubs, modeladores de barramento RS-485. <br><br>  Houve muitas dificuldades com o √¥nibus RS-485.  Geralmente, eles se devem ao fato de que os integradores realmente n√£o gostam de comprar um cabo especial para o RS-485.  Em vez de um cabo especial caro, eles usam um cabo de par tran√ßado comum, considerando isso um substituto igual.  A confus√£o tamb√©m traz mal-entendidos por parte dos princ√≠pios b√°sicos deste pneu.  O mito √© generalizado de que, para a opera√ß√£o deste barramento, apenas dois fios s√£o suficientes - A e B. Mas n√£o √© assim.  Ao trabalhar em um ambiente industrial, em um longo barramento e quando todos os dispositivos s√£o alimentados por diferentes fontes de alimenta√ß√£o ou mesmo fases, ocorrem diferen√ßas de potencial e um terceiro fio comum √© essencial para equalizar os potenciais.  Al√©m disso, uma tela √© altamente desej√°vel.  Agora usamos um modelador isolado galvanicamente RS-485.  Isso melhora a confiabilidade. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ap√≥s o lan√ßamento da vers√£o atualizada do hardware, substitu√≠mos todos os dispositivos instalados anteriormente por novas vers√µes para nossa pr√≥pria tranq√ºilidade. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Confiabilidade </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WebHMI pode sobreviver a muitos erros de edi√ß√£o com pouco sangue. Mas alguns deles precisam entrar em contato com nosso engenheiro de servi√ßo. O entretenimento favorito dos integradores √© fornecer 230V para RS-485. A prop√≥sito, essas s√£o as √∫nicas raz√µes para entrar em contato para reparos! Se voc√™ n√£o violar nosso equipamento com uma instala√ß√£o inadequada, tudo funcionar√° como um rel√≥gio por muitos anos. </font></font><br><br><img src="https://habrastorage.org/files/797/f86/950/797f86950fed4b489f8848d68660e605.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As consequ√™ncias de conectar 230V ao barramento RS-485. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com os flash drives, tamb√©m tivemos muitos problemas diferentes. √â usado para armazenar imagens e bancos de dados com logs, gr√°ficos e todos os outros dados acumulados. O USB DOM (Disk-On-Module) que usamos inicialmente era raro, de qualidade e velocidade inst√°veis, pequeno volume e disponibilidade imprevis√≠vel. Como resultado, mudamos para cart√µes de mem√≥ria industriais. Com cart√µes de mem√≥ria, havia uma saga separada.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WebHMI agora √© enviado sem cart√£o de mem√≥ria, pois todo mundo precisa de uma quantidade diferente. Cart√µes industriais s√£o significativamente mais caros que cart√µes comerciais. Portanto, deixamos a escolha do cart√£o para o cliente - um plug muito grande no pre√ßo e no volume do cart√£o. 1 GB √© suficiente para algu√©m e d√° 32 GB a algu√©m. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recomendamos que todos usem cart√µes industriais. Mas novos clientes, aparentemente querendo economizar, est√£o tentando usar cart√µes comerciais de uma barraca pr√≥xima. N√£o h√° diferen√ßa para eles - se est√° escrito que este √© um cart√£o SD, deve funcionar.</font></font> Isso √© l√≥gico?  N√£o.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tais cart√µes n√£o duram muito. </font><font style="vertical-align: inherit;">E at√© que o cliente perca seus dados, ele n√£o quer acreditar que nem todos os cart√µes s√£o iguais. </font><font style="vertical-align: inherit;">Os cart√µes comerciais podem "morrer" em apenas algumas semanas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em busca de uma solu√ß√£o, chegamos √† conclus√£o de que, juntamente com o dispositivo, oferecemos para comprar imediatamente um mapa industrial de n√≥s, por assim dizer "de uma fonte". </font><font style="vertical-align: inherit;">Para oferecer um produto em que estamos confiantes, tive que realizar muitas pesquisas. </font><font style="vertical-align: inherit;">Compare muitos cart√µes diferentes de fabricantes diferentes, teste a velocidade de grava√ß√£o, conduza-os em condi√ß√µes industriais por um longo tempo. </font><font style="vertical-align: inherit;">Experimente diferentes fornecedores. </font></font><br><br><img src="https://habrastorage.org/files/1df/50a/cb3/1df50acb30904af0beb5056f015701ea.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transcenda representantes em nosso escrit√≥rio. </font><font style="vertical-align: inherit;">Discutimos seus produtos.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vamos jogar Tetris? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uma nova revis√£o da placa exigia um local para instalar componentes volumosos adicionais. </font></font> Porque<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como n√£o havia mais espa√ßo no caso, tive que pensar em como colocar tudo isso dentro do espa√ßo alocado. N√≥s inventamos um sandu√≠che de tr√™s pratos. Isso permitiu o uso de todo o volume do corpo. Mas isso tamb√©m trouxe problemas adicionais para a log√≠stica e a embalagem.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Era necess√°rio encontrar racks de tamanho raro, para descobrir como transferir muitos sinais entre as placas (as cabe√ßas de cabe√ßote padr√£o de 2,54 mm ocupam muito espa√ßo). Para descobrir como transferir outra tonelada de sinais para o painel frontal, nos quais foram adicionados LEDs adicionais para indicar a presen√ßa da conex√£o √† Internet e VPN e um bot√£o de redefini√ß√£o para as configura√ß√µes de rede. Tudo isso exigiu a busca de v√°rios componentes, seus fornecedores, coordena√ß√£o de layouts, medi√ß√µes de todas as dimens√µes com uma pin√ßa e acess√≥rios no caso, a produ√ß√£o de lotes de teste e retrabalho. As placas se tornaram multicamadas. Esse processo levou muita for√ßa, nervos e tempo. Provavelmente meio ano.</font></font><br><br><img src="https://habrastorage.org/files/623/e1c/654/623e1c6548dc47418ef5b910879bbcc4.jpg" width="800"><br><br><img src="https://habrastorage.org/files/18b/314/c9c/18b314c9c1bc4a959b54083ec4012f01.jpg" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui voc√™ pode ver o n√∫mero da revis√£o interna da placa V05.34L4. √â decodificado simplesmente - a 5¬™ gera√ß√£o do design, a 34¬™ revis√£o. Pense nisso: desenh√°mos, fizemos e testamos 34 modifica√ß√µes nas placas antes de chegarmos a esse est√°gio! Esta √© uma √≥tima maneira. A prop√≥sito, depois disso, houve apenas duas pequenas modifica√ß√µes. </font></font><br><br><img src="https://habrastorage.org/files/41b/43a/53c/41b43a53cdb8491a98168213dae99912.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apar√™ncia do dispositivo</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Externamente, o WebHMI tamb√©m era enobrecido. A cor das inscri√ß√µes ficou cinza, aprendemos a aplicar as inscri√ß√µes. Conseguimos resolver o problema da moagem em nosso pa√≠s em pequenos lotes por dinheiro adequado apenas temporariamente. N√≥s mo√≠mos pe√ßas de 50 caixas e a loja foi fechada. Agora, os casos nos s√£o fresados ‚Äã‚Äãna It√°lia pelo fabricante dos casos. Mas as inscri√ß√µes que aprendemos a fazer n√≥s mesmos. N√≥s compramos uma m√°quina de impress√£o de almofada, dominamos a tecnologia de impress√£o. Acontece muito bem, ainda melhor que os italianos. √â compreens√≠vel - podemos dar ao luxo de lamber o processo de impress√£o em nosso estojo ao ideal. n√≥s temos um produto. Modificamos a impressora, fizemos nossos pr√≥prios ajustes - em geral, ficamos confusos. Mas valeu a pena. Encontre roupas. </font></font><br><br><img src="https://habrastorage.org/files/f41/c0c/f64/f41c0cf643c942b2be0bb5b4c1923abe.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa m√°quina no momento da compra</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em geral, √© muito dif√≠cil trabalhar com italianos. Eles s√£o lentos, pensam bem, cumprem os requisitos com o tempo. Constantemente, em algum lugar, sim, eles v√£o se ferrar. J√° acumulamos uma montanha de pr√©dios defeituosos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, a plataforma de hardware h√° muito tempo √© depurada e est√°vel. √â montado em uma linha de montagem autom√°tica. Por cerca de dois anos, n√£o fazemos mais altera√ß√µes. Mas o software est√° sendo desenvolvido todos os dias. Normalmente, lan√ßamos um novo firmware uma vez por m√™s com altera√ß√µes, melhorias e problemas de corre√ß√£o encontrados.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s o refinamento do ‚Äúferro‚Äù para opera√ß√£o est√°vel nas condi√ß√µes da oficina metal√∫rgica, dormimos em paz. </font><font style="vertical-align: inherit;">Agora, todos os outros aplicativos nos parecem um jardim de inf√¢ncia - o WebHMI sobreviver√° em quase todos os lugares. </font><font style="vertical-align: inherit;">Agora √© usado em v√°rios e inesperados lugares - de empresas de panifica√ß√£o a cervejarias, de plantas metal√∫rgicas a ferrovias e portos, de lojas a complexos esportivos. </font><font style="vertical-align: inherit;">E, √© claro, objetos distribu√≠dos - estufas, caldeiras a g√°s e el√©tricas, esta√ß√µes de bombeamento, esta√ß√µes de troca, sistemas de irriga√ß√£o. </font><font style="vertical-align: inherit;">A √∫nica limita√ß√£o significativa √© a faixa de temperatura de 0 a + 50 ¬∞ C. </font><font style="vertical-align: inherit;">√â limitado pela presen√ßa de uma bateria de Li-Po e seus par√¢metros operacionais.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Embalagem </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uma tarefa interessante foi a cria√ß√£o de embalagens. </font></font> Porque<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como nosso produto n√£o foi fabricado em lotes muito grandes, n√£o quer√≠amos encomendar v√°rios milhares de pacotes de uma s√≥ vez - era dinheiro congelado e um local morto para armazenamento no escrit√≥rio. Portanto, a embalagem foi feita por n√≥s mesmos. Pedimos o corte de espuma em um laser e colamos o alojamento como vendas. Colocamos em caixas de papel√£o adequadas de tamanho padr√£o. A imagem nas caixas √© aplicada a n√≥s pela seda pelo mestre familiar. Acontece lindamente e praticamente. Embora cortar espuma seja uma ocupa√ß√£o desagrad√°vel. Ele sempre se esfor√ßa para acender, fuma, fede. Acontece caro, muito casamento. Mas o resultado final √© incr√≠vel. Parece caro. Encontre-se, afinal, com roupas. E o dispositivo √© protegido de maneira confi√°vel durante o transporte. </font></font><br><br><img src="https://habrastorage.org/files/a60/eee/2cf/a60eee2cf0be4c968228af4f14ae858d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apar√™ncia da embalagem</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, encontramos mais alguns bons revendedores e integradores, e ainda trabalhamos com muitos. N√£o estamos envolvidos em vendas diretas, mas estamos trabalhando no desenvolvimento de uma rede de revendedores. Ajudamos os revendedores, se necess√°rio, a participar de semin√°rios, exposi√ß√µes, a treinar sua equipe para trabalhar com o WebHMI. Desenvolver uma rede de revendedores tamb√©m √© uma tarefa interessante e fascinante. Os revendedores constantemente se esfor√ßam para roubar o cliente um do outro, brigar. E precisamos reconstruir o sistema para que seja interessante que os revendedores trabalhem e os clientes fiquem satisfeitos. </font></font><br><br><img src="https://habrastorage.org/files/fb2/381/677/fb2381677faf4edbb0774319421c3135.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workshop WebHMI</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os semin√°rios fazem muitas perguntas interessantes. Alguns deles levam a melhorias no firmware. Mas h√° coisas engra√ßadas. Lembro-me de um homem que, em algum semin√°rio, estava tentando descobrir de onde ‚Äúlamb√≠amos‚Äù o dispositivo. Ele tentou chegar ao fundo de cada coisinha que nos convence de pl√°gio. Seu argumento mais forte foi que naquela √©poca t√≠nhamos apenas ingl√™s na interface - supostamente porque pegamos alguns softwares estrangeiros e os passamos como nossos. Agora temos v√°rios idiomas de interface, incluindo ingl√™s e russo. E ent√£o ficamos um pouco surpresos com sua press√£o e desconfian√ßa. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como experimento, h√° alguns anos, apresentamos um suporte de demonstra√ß√£o com o WebHMI ao Departamento de Automa√ß√£o da Universidade Nacional de Minera√ß√£o. Ainda n√£o deu muitos frutos, mas n√£o estamos chateados - e se de repente "atirar" mais tarde?</font></font><br><img src="https://habrastorage.org/files/77f/d25/52b/77fd2552b8a440d498bedf1d1248ef96.jpg" height="400"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Suporte da universidade </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ep√≠logo </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em resumo, quero dizer que a maneira de desenvolver um dispositivo industrial √© emocionante, espinhosa e imprevis√≠vel. </font><font style="vertical-align: inherit;">Montar um prot√≥tipo √© uma quest√£o de v√°rias semanas. </font><font style="vertical-align: inherit;">Mas criar um dispositivo complexo comercialmente est√°vel e funcional n√£o √© nem uma quest√£o de um ano. </font><font style="vertical-align: inherit;">Se voc√™ sentir a for√ßa em si mesmo para andar sobre ela - com mais ousadia.</font></font> A estrada ser√° superada por um caminhante<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas seja paciente - nem tudo √© t√£o simples quanto parece √† primeira vista. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resolva problemas reais - √© muito mais f√°cil vender seus produtos. </font><font style="vertical-align: inherit;">Agora, desenvolvemos v√°rios produtos de sat√©lite adicionais que complementam com sucesso o WebHMI e resolvem alguns problemas urgentes ao criar sistemas de monitoramento e despacho. </font><font style="vertical-align: inherit;">Os prot√≥tipos foram vendidos muito rapidamente, mesmo sem inscri√ß√µes e em edif√≠cios tecnol√≥gicos. </font><font style="vertical-align: inherit;">E atr√°s dos primeiros lotes, uma fila pequena, mas, no entanto, de pessoas que desejavam compr√°-los j√° estava alinhada.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt402049/">https://habr.com/ru/post/pt402049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt402039/index.html">Google elimina Chromebooks Pixel</a></li>
<li><a href="../pt402041/index.html">O futuro brilhante da energia solar</a></li>
<li><a href="../pt402043/index.html">Compreendendo o Virtual 7.1 com o HyperX Cloud Revolver S</a></li>
<li><a href="../pt402045/index.html">Sistema de refrigera√ß√£o DIY para roteador CNC</a></li>
<li><a href="../pt402047/index.html">Fresagem de PCB em casa</a></li>
<li><a href="../pt402051/index.html">NASA prop√µe restaurar a atmosfera de Marte com um escudo magn√©tico</a></li>
<li><a href="../pt402053/index.html">Novo da Xiaomi: dois smartphones e ... um processador?</a></li>
<li><a href="../pt402055/index.html">Pequenos reatores como alternativa √†s modernas usinas de reatores</a></li>
<li><a href="../pt402057/index.html">FiiO X3 II: um bom som no seu bolso pode permitir</a></li>
<li><a href="../pt402059/index.html">Robert Sheckley e eu estamos testando uma impressora 3D START modular - parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>