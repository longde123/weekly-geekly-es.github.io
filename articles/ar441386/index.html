<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฒ ๐ ๐ง๐ป Spring Data JPA: ูุง ูู ุฌูุฏ ููุง ูู ุณูุก ๐ธ๐ฝ โ๏ธ ๐ฅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฌุงุก ุงูุงุจู ุงูุฑุถูุน ุฅูู ุฃุจูู 
 ูุณุฃู ุงูุทูู 
 - ูุง ูู ุฌูุฏ 
 ููุง ูู ุณูุก 
 
 ููุงุฏูููุฑ ูุงูุงูููุณูู 


 ูุฐู ุงูููุงูุฉ ุชุฏูุฑ ุญูู Spring Data JPA ุ ูุจุงูุชุญุฏูุฏ ูู ุฃุดุนู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Spring Data JPA: ูุง ูู ุฌูุฏ ููุง ูู ุณูุก</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441386/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <em>ุฌุงุก ุงูุงุจู ุงูุฑุถูุน ุฅูู ุฃุจูู</em> <em><br></em>  <em>ูุณุฃู ุงูุทูู</em> <em><br></em>  <em>- ูุง ูู ุฌูุฏ</em> <em><br></em>  <em>ููุง ูู ุณูุก</em> <em><br></em> <br>  ููุงุฏูููุฑ ูุงูุงูููุณูู </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ุงูููุงูุฉ ุชุฏูุฑ ุญูู Spring Data JPA ุ ูุจุงูุชุญุฏูุฏ ูู ุฃุดุนู ุงููุงุฑ ุชุญุช ุงููุงุก ุงูุชู ูุงุจูุชูุง ูู ุทุฑููู ุ ูุจุงูุทุจุน ุนู ุงูุฃุฏุงุก. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูููู ุชุดุบูู ุงูุฃูุซูุฉ ุงูููุถุญุฉ ูู ุงูููุงูุฉ ูู ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ ุ ููููู ุงููุตูู ุฅูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุงูุฑุฌูุน ุฅูููุง</a> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุฉ ูุฃููุฆู ุงูุฐูู ูู ููุชูููุง ุจุนุฏ ุฅูู ุจุฑูุงูุฌ Spring Boot 2</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูู ุฅุตุฏุงุฑุงุช Spring Data JPA 2. * <code>CrudRepository</code> ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ ููุนูู ูุน ุงููุณุชูุฏุนุงุช ุ ููู <code>CrudRepository</code> ุ ุงูุชู ูุฑุซุช <code>JpaRepository</code> ูููุง ุ <code>JpaRepository</code> .  ูู ุงูุฅุตุฏุงุฑุงุช 1. * ุชุจุฏู ุงูุทุฑู ุงูุฑุฆูุณูุฉ ููุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ID</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findOne</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ID id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterable&lt;ID&gt; ids)</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ID</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">Optional&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ID id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAllById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterable&lt;ID&gt; ids)</span></span></span></span>; }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุฏุนููุง ูุจุฏุฃ. </p><br><h4 id="select-t-from-t-where-tid-in-" style=";text-align:right;direction:rtl">  ุญุฏุฏ t. * ูู t ุญูุซ t.id ูู (...) </h4><br><p style=";text-align:right;direction:rtl">  ุฃุญุฏ ุงูุงุณุชุนูุงูุงุช ุงูุฃูุซุฑ ุดููุนูุง ูู ุงูุงุณุชุนูุงู ุนู ุงููููุฐุฌ "ุชุญุฏูุฏ ุฌููุน ุงูุณุฌูุงุช ุงูุชู ููุน ุงูููุชุงุญ ูู ุงููุฌููุนุฉ ุงููุฑุณูุฉ".  ุฃูุง ูุชุฃูุฏ ุฃู ุฌููุนูู ุชูุฑูุจุงู ูุชุจูุง ุฃู ุฑุฃูุง ุดูุฆูุง ููุฐุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select ba from BankAccount ba where ba.user.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> List&lt;Long&gt; ids)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select ba from BankAccount ba where ba.user.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Set&lt;Long&gt; ids)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุทูุจุงุช ุนูููุฉ ุฃู ููุงุณุจุฉ ุ ููุง ุชูุฌุฏ ูุดููุงุช ูู ุงูุฃุฏุงุก ุฃู ุงูุฃุฏุงุก ุ ููู ููุงู ุนูุจูุง ุตุบูุฑูุง ูุบูุฑ ูุงุถุญ ุชูุงููุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุจู ุฃู ุชูุชุญ ุงูุฎุทูุท ุ ุญุงูู ุฃู ุชููุฑ ุจููุณู.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุงูุนูุจ ูู ุฃู ุงููุงุฌูุฉ ุถููุฉ ุฌุฏูุง ุจุญูุซ ูุง ูููู ููู ุงูููุงุชูุญ.  "ูุงุฐุง ูู ุฐููุ"  - ุฃูุช ุชููู.  "ุญุณููุง ุงููุงุฆูุฉ ุ ุญุณููุง ุ ูุง ุฃุฑู ูุดููุฉ ููุง."  ููุน ุฐูู ุ ุฅุฐุง ูุธุฑูุง ุฅูู ุฃุณุงููุจ ูุงุฌูุฉ ุงูุฌุฐุฑ ุงูุชู ุชุฃุฎุฐ ุงูุนุฏูุฏ ูู ุงูููู ุ ูุฅููุง ูุฑู ูู ูู ููุงู <code>Iterable</code> : </p><br><p style=";text-align:right;direction:rtl">  "ูุงุฐุง ูู ุฐููุ ูุฃุฑูุฏ ูุงุฆูุฉ. ููุงุฐุง ูู ุฃุณูุฃุ" <br>  ูุง ูู ุฃุณูุฃ ูู ุฐูู ุ ููุท ูู ูุณุชุนุฏูุง ูุธููุฑ ููุฏ ูุดุงุจู ุนูู ูุณุชูู ุฃุนูู ูู ุทูุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;Long&gt; userIds)</span></span></span><span class="hljs-function"> </span></span>{ Set&lt;Long&gt; ids = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;(userIds); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> repository.findByUserIds(ids); } <span class="hljs-comment"><span class="hljs-comment">// public List&lt;BankAccount&gt; findByUserIds(Set&lt;Long&gt; userIds) { List&lt;Long&gt; ids = new ArrayList&lt;&gt;(userIds); return repository.findByUserIds(ids); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูุนูู ูุฐุง ุงูููุฏ ุณูู ุนูุณ ุงููุฌููุนุงุช.  ูุฏ ูุญุฏุซ ุฃู ุชููู ุงููุณูุทุฉ ููุฃุณููุจ ูุงุฆูุฉ ุ ูุทุฑููุฉ ุงููุณุชูุฏุน ุชูุจู ุงููุฌููุนุฉ (ุฃู ุงูุนูุณ) ุ ูุนููู ููุท ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุคูุง ูุชูุฑูุฑ ุงูุชุฌููุน.  ุจุงูุทุจุน ุ ูู ุชุตุจุญ ูุฐู ูุดููุฉ ุนูู ุฎูููุฉ ุงูุชูุงููู ุงูุนุงูุฉ ููุทูุจ ููุณู ุ ุฅููุง ุชุชุนูู ุจุงูุฅููุงุกุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูู ุงูููุงุฑุณุงุช ุงูุฌูุฏุฉ ุงุณุชุฎุฏุงู <code>Iterable</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select ba from BankAccount ba where ba.user.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Iterable&lt;Long&gt; ids)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฒุฏ ูุงู  ุฅุฐุง ููุง ูุชุญุฏุซ ุนู ุทุฑููุฉ ูู <code>*RepositoryCustom</code> ุ ููู ุงูููุทูู ุงุณุชุฎุฏุงู <code>Collection</code> ูุชุจุณูุท ุญุณุงุจ ุงูุญุฌู ุฏุงุฎู ุงูุชุทุจูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccountRepositoryCustom</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyMoneyAvailable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;Long&gt; accountIds)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccountRepositoryImpl</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyMoneyAvailable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;Long&gt; accountIds)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ids.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//... } }</span></span></code> </pre> </div></div><br><h4 id="lishniy-kod-nepovtoryayuschiesya-klyuchi" style=";text-align:right;direction:rtl">  ุฑูุฒ ุฅุถุงูู: ููุงุชูุญ ุบูุฑ ููุฑุฑุฉ </h4><br><p style=";text-align:right;direction:rtl">  ุงุณุชูุฑุงุฑูุง ูููุณู ุงูุฃุฎูุฑ ุ ุฃุฑูุฏ ุฃู ุฃุณุชุฑุนู ุงูุงูุชุจุงู ุฅูู ููุฑุฉ ุฎุงุทุฆุฉ ุดุงุฆุนุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select ba from BankAccount ba where ba.user.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Set&lt;Long&gt; ids)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุธุงูุฑ ุฃุฎุฑู ูููุณ ุงูุฎุทุฃ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Set&lt;Long&gt; ids = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;(notUniqueIds); List&lt;BankAccount&gt; accounts = repository.findByUserIds(ids); List&lt;Long&gt; ids = ts.stream().map(T::id).distinct().collect(toList()); List&lt;BankAccount&gt; accounts = repository.findByUserIds(ids); Set&lt;Long&gt; ids = ts.stream().map(T::id).collect(toSet()); List&lt;BankAccount&gt; accounts = repository.findByUserIds(ids);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุฉ ุงูุฃููู ุ ูุง ุดูุก ุบูุฑ ุนุงุฏู ุ ุฃููุณ ูุฐููุ </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุฐ ููุชู ุ ููุฑ ุจููุณู ุ)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุญุฏุฏ ุงุณุชุนูุงูุงุช HQL / JPQL ูููููุฐุฌ <code>select t from t where t.field in ...</code> ุงูููุงูุฉ ุฅูู ุงุณุชุนูุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> b.* <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> BankAccount b <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> b.user_id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (?, ?, ?, ?, ?, โฆ)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุชู ุณุชุนูุฏ ุฏุงุฆููุง ุฅูู ููุณ ุงูุดูุก ุจุบุถ ุงููุธุฑ ุนู ูุฌูุฏ ุงูุชูุฑุงุฑ ูู ุงููุณูุทุฉ.  ูุฐูู ุ ูุถูุงู ุชูุฑุฏ ุงูููุงุชูุญ ููุณุช ุถุฑูุฑูุฉ.  ููุงู ุญุงูุฉ ุฎุงุตุฉ ูุงุญุฏุฉ - Oracle ุ ุญูุซ ูุคุฏู ุงูุถุบุท ุนูู 1000 ููุชุงุญ ูู ุฅูู ุญุฏูุซ ุฎุทุฃ.  ูููู ุฅุฐุง ููุช ุชุญุงูู ุชูููู ุนุฏุฏ ุงูููุงุชูุญ ุนู ุทุฑูู ุงุณุชุจุนุงุฏ ุงูุชูุฑุงุฑ ุ ูุนููู ุงูุชูููุฑ ูู ุณุจุจ ุญุฏูุซูุง.  ุนูู ุงูุฃุฑุฌุญ ุงูุฎุทุฃ ูู ูู ููุงู ูุง ุฃุนูุงู. </p><br><p style=";text-align:right;direction:rtl">  ุญุชู ูู ุฑูุฒ ุฌูุฏ ุงุณุชุฎุฏุงู <code>Iterable</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select ba from BankAccount ba where ba.user.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByUserIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Iterable&lt;Long&gt; ids)</span></span>;</code> </pre> </div></div><br><h4 id="samopis" style=";text-align:right;direction:rtl">  ุณุงููุจุณ </h4><br><p style=";text-align:right;direction:rtl">  ุฃููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ูุฐุง ุงูุฑูุฒ ูุงุนุซุฑ ููุง ุนูู ุซูุงุซุฉ ุนููุจ ูุฎุทุฃ ูุงุญุฏ ูุญุชูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"from User u where u.id in :ids"</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ids"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Iterable&lt;Long&gt; ids)</span></span>;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุนุชูุฏ ุจุนุถ ุฃูุซุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุดูุก ูุชู ุชูููุฐู ุจุงููุนู ูู <code>SimpleJpaRepository::findAllById</code> </li><li style=";text-align:right;direction:rtl">  ุทูุจ ุงูุฎููู ุนูุฏ ุชูุฑูุฑ ูุงุฆูุฉ ูุงุฑุบุฉ (ูู <code>SimpleJpaRepository::findAllById</code> ููุงู ุงูุชุญูู ุงูููุงุจูุฉ) </li><li style=";text-align:right;direction:rtl">  ูุชู ูุญุต ุฌููุน ุงูุงุณุชุนูุงูุงุช ุงูููุถุญุฉ ุจุงุณุชุฎุฏุงู <code>@Query</code> ูู ูุฑุญูุฉ ุฑูุน ุงูุณูุงู ุ ูุงูุชู ุชุณุชุบุฑู ููุชูุง (ุนูู ุนูุณ <code>SimpleJpaRepository::findAllById</code> ) </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุงุณุชุฎุฏุงู Oracle ุ ูุนูุฏูุง ุชููู ูุฌููุนุฉ ุงูููุงุชูุญ ูุงุฑุบุฉ ุ ููุฏ ุญุตููุง ุนูู ุงูุฎุทุฃ <code>ORA-00936: missing expression</code> (ูู ูุญุฏุซ ุฐูู ุนูุฏ ุงุณุชุฎุฏุงู <code>SimpleJpaRepository::findAllById</code> ุ ุฑุงุฌุน ุงูููุทุฉ 2) </li></ul></div></div><br><h4 id="garri-potter-i-sostavnoy-klyuch" style=";text-align:right;direction:rtl">  ูุงุฑู ุจูุชุฑ ูููุชุงุญ ูุฑูุจ </h4><br><p style=";text-align:right;direction:rtl">  ุฃููู ูุธุฑุฉ ุนูู ูุซุงููู ูุงุฎุชุฑ ุงููุซุงู ุงูููุถู ูุฏูู: </p><br><p style=";text-align:right;direction:rtl">  ุนุฏุฏ ูุฑุงุช ุงูุฃุณููุจ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Embeddable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompositeKey</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ Long key1; Long key2; } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompositeKeyEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@EmbeddedId</span></span> CompositeKey key; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุทุฑููุฉ ุฑูู ุงุซููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Embeddable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompositeKey</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ Long key1; Long key2; } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@IdClass</span></span>(value = CompositeKey.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompositeKeyEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long key1; <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long key2; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุฉ ุงูุฃููู ุ ูุง ููุฌุฏ ูุฑู.  ุฌุฑุจ ุงูุขู ุงูุทุฑููุฉ ุงูุฃููู ููู ุจุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุจุณูุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//case for @EmbeddedId @Test public void findAll() { int size = entityWithCompositeKeyRepository.findAllById(compositeKeys).size(); assertEquals(size, 5); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุณุฌู ุงูุงุณุชุนูุงู (ููููู ุงูุงุญุชูุงุธ ุจู ุ ุฃููุณ ูุฐููุ) ุณูุฑู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1 = ? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2 = ? <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> e.key1 = ? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2 = ? <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> e.key1 = ? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2 = ? <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> e.key1 = ? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2 = ? <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> e.key1 = ? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2 = ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุงููุซุงู ุงูุซุงูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//case for @Id @Id @Test public void _findAll() { int size = anotherEntityWithCompositeKeyRepository.findAllById(compositeKeys).size(); assertEquals(size, 5); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุณุฌู ุงูุจุญุซ ูุฎุชูููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1=? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2=? <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1=? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2=? <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1=? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2=? <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1=? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2=? <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> e.key1, e.key2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> CompositeKeyEntity e <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> e.key1=? <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> e.key2=?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุงููุฑู: ูู ุงูุญุงูุฉ ุงูุฃููู ุ ูุญุตู ุฏุงุฆููุง ุนูู ุทูุจ ูุงุญุฏ ุ ูู ุงูุญุงูุฉ ุงูุซุงููุฉ - ุงูุทูุจุงุช. <br>  ูููู ุณุจุจ ูุฐุง ุงูุณููู ูู <code>SimpleJpaRepository::findAllById</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// ... if (entityInfo.hasCompositeId()) { List&lt;T&gt; results = new ArrayList&lt;&gt;(); for (ID id : ids) { findById(id).ifPresent(results::add); } return results; } // ...</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุทุฑููุฉ ุงูุฃูุถู ุจุงููุณุจุฉ ูู ูู ุชุญุฏูุฏูุง ุจูุงุกู ุนูู ูุฏู ุฃูููุฉ ุนุฏุฏ ุงูุทูุจุงุช. </p><br><h4 id="lishniy-crudrepositorysave" style=";text-align:right;direction:rtl">  CrudRepository ุงุถุงููุฉ :: ุญูุธ </h4><br><p style=";text-align:right;direction:rtl">  ุบุงูุจูุง ูุง ููุฌุฏ ูู ุงูููุฏ ูุถุงุฏุงุช ูุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id, BigDecimal rate)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = repo.findById(id).orElseThrow(NPE::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>); account.setRate(rate); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> repo.save(account); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุงุฑุฆ ูู ุญูุฑุฉ: ุฃูู ูู ุงููุถุงุฏุ  ูุจุฏู ูุฐุง ุงูุฑูุฒ ููุทูููุง ุฌุฏูุง: ูุญุตู ุนูู ุงูููุงู - ุงูุชุญุฏูุซ - ุงูุญูุธ.  ูู ุดูุก ูุดุจู ูู ุฃูุถู ุจููุช ุณุงูุช ุจุทุฑุณุจุฑุบ.  ุฃุฌุฑุค ุนูู ุงูููู ุฅู ุงุณุชุฏุนุงุก <code>CrudRepository::save</code> ูุง ูุฒูู ูู ููุง. </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู: ุฃุณููุจ <code>updateRate</code> ูุนุงููุงุช ุ ูุฐูู ุ ูุชู ุชุชุจุน ุฌููุน ุงูุชุบููุฑุงุช ูู ุงูููุงู ุงููุฏุงุฑ ุจูุงุณุทุฉ ุงูุณุจุงุช ูุชุชุญูู ุฅูู ุทูุจ ุนูุฏูุง <code>Session::flush</code> ุชูููุฐ <code>Session::flush</code> ุ ูุงูุฐู ูุญุฏุซ ูู ูุฐุง ุงูุฑูุฒ ุนูุฏูุง ุชูุชูู ูุฐู ุงูุทุฑููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุซุงููุงู ุ <code>CrudRepository::save</code> ูููู ูุธุฑุฉ ุนูู ุทุฑููุฉ <code>CrudRepository::save</code> .  ููุง ุชุนูู ุ ุชุนุชูุฏ ุฌููุน ุงููุณุชูุฏุนุงุช ุนูู <code>SimpleJpaRepository</code> .  ููุง ูู ุชูููุฐ <code>CrudRepository::save</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;S extends T&gt; <span class="hljs-function"><span class="hljs-function">S </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(S entity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entityInformation.isNew(entity)) { em.persist(entity); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> entity; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> em.merge(entity); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุฏูุฉ ูุง ูุชุฐูุฑูุง ุงูุฌููุน: ุงูุณุจุงุช ูุนูู ูู ุฎูุงู ุงูุฃุญุฏุงุซ.  ุจูุนูู ุขุฎุฑ ุ ููุดุฆ ูู ุฅุฌุฑุงุก ูุณุชุฎุฏู ุญุฏุซูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุนุงูุฌุชู ูุน ูุฑุงุนุงุฉ ุงูุฃุญุฏุงุซ ุงูุฃุฎุฑู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุณูุง.  ูู ูุฐู ุงูุญุงูุฉ ุ <code>EntityManager::merge</code> ุงุณุชุฏุนุงุก <code>EntityManager::merge</code> <code>MergeEvent</code> ุ ูุงูุฐู ุชุชู ูุนุงูุฌุชู ุงูุชุฑุงุถููุง ูู <code>DefaultMergeEventListener::onMerge</code> .  ุฃูู ูุญุชูู ุนูู ููุทู ูุชูุฑุน ุฅูู ุญุฏ ูุง ุ ูููู ุจุณูุท ููู ุญุงูุฉ ูู ุญุฌุฉ ุงูููุงู.  ูู ุญุงูุชูุง ุ ูุชู ุงูุญุตูู ุนูู ุงูููุงู ูู ุงููุณุชูุฏุน ุฏุงุฎู ุทุฑููุฉ ุงููุนุงููุฉ ููู ูู ุญุงูุฉ PERSISTENT (ุจูุนูู ุฃูู ูุชุญูู ููู ุฅุทุงุฑ ุงูุนูู ุจุดูู ุฃุณุงุณู): </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">entityIsPersistent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MergeEvent event, Map copyCache)</span></span></span><span class="hljs-function"> </span></span>{ LOG.trace(<span class="hljs-string"><span class="hljs-string">"Ignoring persistent instance"</span></span>); Object entity = event.getEntity(); EventSource source = event.getSession(); EntityPersister persister = source.getEntityPersister(event.getEntityName(), entity); ((MergeContext)copyCache).put(entity, entity, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cascadeOnMerge(source, persister, entity, copyCache); <span class="hljs-comment"><span class="hljs-comment">//&lt;---- this.copyValues(persister, entity, entity, source, copyCache); //&lt;---- event.setResult(entity); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุดูุทุงู ููุฌูุฏ ูู ุงูุชูุงุตูู ุ ุฃู ูู ุงูุฃุณุงููุจ <code>DefaultMergeEventListener::cascadeOnMerge</code> ู <code>DefaultMergeEventListener::copyValues</code> .  ุฏุนูุง ูุณุชูุน ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฎุทุงุจ ุงููุจุงุดุฑ ูููุงุฏ ููุฎุงูุชุดู</a> ุ ุฃุญุฏ ุงููุทูุฑูู ุงูุฑุฆูุณููู ูู ุณุจุงุช: </p><br><blockquote style=";text-align:right;direction:rtl">  ูู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ copyValues โโุ ูุชู ูุณุฎ ุงูุญุงูุฉ ุงููุงุฆูุฉ ูุฑุฉ ุฃุฎุฑู ุ ูุฐูู ูุชู ุฅูุดุงุก ุตููู ุฌุฏูุฏ ุจุดูู ูุชูุฑุฑ ุ ูุจุงูุชุงูู ุฅูุฏุงุฑ ุฏูุฑุงุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุฅุฐุง ูุงู ูุฏู ุงูููุงู ุงุฑุชุจุงุทุงุช ุชุงุจุนุฉ ูุชูุช ุชุชุงุจุน ุนูููุฉ ุงูุฏูุฌ ุฃูุถูุง ูู ููุงู ุฅูู ููุงู ุชุงุจุน ุ ูููู ููุฏุงุฑ ุงูุญูู ุฃูุจุฑ ูุฃู ูู ููุงู ุชุงุจุน ุณูู ููุดุฑ MergeEvent ูุชุณุชูุฑ ุงูุฏูุฑุฉ. </blockquote><p style=";text-align:right;direction:rtl">  ูุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ูุฌุฑู ุงูุนูู ุงูุฐู ูุง ููููู ุงูููุงู ุจู.  ูุชูุฌุฉ ูุฐูู ุ ูููู ุชุจุณูุท ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจูุง ูุน ุชุญุณูู ุฃุฏุงุฆูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id, BigDecimal rate)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = repo.findById(id).orElseThrow(NPE::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>); account.setRate(rate); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> account; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ูู ุบูุฑ ุงููุฑูุญ ุฃู ุชุถุน ุฐูู ูู ุงูุงุนุชุจุงุฑ ุนูุฏ ุชุทููุฑ ููุฏ ุดุฎุต ูุง <code>JpaRepository::save</code> ุ ูุฐูู ููุฏ ุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ูุณุชูู ุงูุฅุทุงุฑ ุงูุณููู ุญุชู ุชููุฏ ุทุฑููุฉ <code>JpaRepository::save</code> ุฎุตุงุฆุตูุง ุงูุถุงุฑุฉ.  ูู ูุฐุง ููููุ </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุนู ุฑุจูุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// @Transactional public &lt;S extends T&gt; S save(S entity) { if (entityInformation.isNew(entity)) { em.persist(entity); return entity; } else { return em.merge(entity); } } // @Transactional public &lt;S extends T&gt; S save(S entity) { if (entityInformation.isNew(entity)) { em.persist(entity); return entity; } else if (!em.contains(entity)) { return em.merge(entity); } return entity; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุฅุฌุฑุงุก ูุฐู ุงูุชุบููุฑุงุช ุจุงููุนู ูู ุฏูุณูุจุฑ 2017: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://jira.spring.io/browse/DATAJPA-931</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/spring-projects/spring-data-jpa/pull/237</a> </p></div></div><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุฅู ุงููุงุฑุฆ ุงููุชุทูุฑ ุฑุจูุง ุดุนุฑ ุจุงููุนู ุจูุฌูุฏ ุดูุก ุฎุงุทุฆ.  ูู ุงููุงูุน ุ ูู ููุณุฑ ูุฐุง ุงูุชุบููุฑ ุฃู ุดูุก ุ ูููู ููุท ูู ุงูุญุงูุฉ ุงูุจุณูุทุฉ ุนูุฏูุง ูุง ุชูุฌุฏ ููุงูุงุช ูุฑุนูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccount</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long id; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> BigDecimal rate = BigDecimal.ZERO; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุงูุขู ุฃู ุตุงุญุจูุง ูุฑุชุจุท ุจุงูุญุณุงุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccount</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long id; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> BigDecimal rate = BigDecimal.ZERO; <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>) User user; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุชุณูุญ ูู ุจูุตู ุงููุณุชุฎุฏู ุนู ุงูุญุณุงุจ ููููู ุฅูู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">changeUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id, User newUser)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = repo.findById(id).orElseThrow(NPE::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>); account.setUser(newUser); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> repo.save(account); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ุณูุญุฏุซ ุงูุงูุ  ุงูุชุญูู ูู <code>em.contains(entity)</code> ุณูุนูุฏ ุฅูู true ุ ููุง ูุนูู <code>em.merge(entity)</code> ูู ูุชู ุงุณุชุฏุนุงุก <code>em.merge(entity)</code> .  ุฅุฐุง ุชู ุฅูุดุงุก ููุชุงุญ ููุงู <code>User</code> ุนูู ุฃุณุงุณ ุงูุชุณูุณู (ูุงุญุฏุฉ ูู ุงูุญุงูุงุช ุงูุฃูุซุฑ ุดููุนูุง) ุ ููู ูุชู ุฅูุดุงุคู ุญุชู ูุชู ุฅููุงู ุงููุนุงููุฉ (ุฃู <code>Session::flush</code> ุงุณุชุฏุนุงุก <code>Session::flush</code> ูุฏูููุง) ุ ุฃู ุณูููู ุงููุณุชุฎุฏู ูู ุญุงูุฉ DETACHED ุ ูุงูููุงู ุงูุฃุตู ( ุญุณุงุจ) - ูู ุงูุญุงูุฉ ุงูุซุงุจุชุฉ.  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูููู ุฃู ูุคุฏู ูุฐุง ุฅูู ูุณุฑ ููุทู ุงูุชุทุจูู ุ ููู ูุง ุญุฏุซ: </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">02/03/2018 DATAJPA-931 ููุงุตู ุฏูุฌ ูุน RepositoryItemWriter</a> </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูุตุฏุฏ ุ ุชู ุฅูุดุงุก ูููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Revert ูุชุญุณููุงุช ููููุงูุงุช ุงูููุฌูุฏุฉ ูู CrudRepository :: save ูุชู</a> ุฅุฌุฑุงุก ุงูุชุบููุฑุงุช: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Revert DATAJPA-931</a> . </p><br><h4 id="slepoy-crudrepositoryfindbyid" style=";text-align:right;direction:rtl">  Blind CrudRepository :: findById </h4><br><p style=";text-align:right;direction:rtl">  ููุงุตู ุงููุธุฑ ูู ูููุฐุฌ ุงูุจูุงูุงุช ููุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long id; <span class="hljs-comment"><span class="hljs-comment">// ... } @Entity public class BankAccount { @Id Long id; @ManyToOne @JoinColumn(name = "user_id") User user; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุชุทุจูู ุนูู ุทุฑููุฉ ุชูุดุฆ ุญุณุงุจูุง ุฌุฏูุฏูุง ูููุณุชุฎุฏู ุงููุญุฏุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newForUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long userId)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BankAccount(); userRepository.findById(userId).ifPresent(account::setUser); <span class="hljs-comment"><span class="hljs-comment">//&lt;---- return accountRepository.save(account); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุน ุงูุฅุตุฏุงุฑ 2. * ูู ููู ุงูุถุฑุจ ุงููุถุงุฏ ุงููุดุงุฑ ุฅููู ุจุงูุณูู ูุฏูุดูุง - ูุธูุฑ ุจุดูู ุฃูุซุฑ ูุถูุญูุง ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃูุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newForUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long userId)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BankAccount(); account.setUser(userRepository.findOne(userId)); <span class="hljs-comment"><span class="hljs-comment">//&lt;---- return accountRepository.save(account); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุฐุง ูู ุชุดุงูุฏ ุงูุนูุจ \ "ุจุงูุนูู \" ุ ููู ุจุฅููุงุก ูุธุฑุฉ ุนูู ุงูุงุณุชูุณุงุฑุงุช:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> u.id, u.name <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> u <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> u.id = ? <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> hibernate_sequence <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> bank_account (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*โฆ*/</span></span> user_id) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*โฆ*/</span></span>)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุทูุจ ุงูุฃูู ูุญุตู ุนูู ุงููุณุชุฎุฏู ุนู ุทุฑูู ุงูููุชุงุญ.  ุจุนุฏ ุฐูู ุ ูุญุตู ุนูู ููุชุงุญ ุญุณุงุจ ุงููููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุฏุฑุงุฌู ูู ุงูุฌุฏูู.  ูุงูุดูุก ุงููุญูุฏ ุงูุฐู ูุฃุฎุฐู ูู ุงููุณุชุฎุฏู ูู ุงูููุชุงุญ ุ ูุงูุฐู ูุฏููุง ุจุงููุนู ููุณูุทุฉ ุฃุณููุจ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุญุชูู <code>BankAccount</code> ุนูู ุญูู "ุงููุณุชุฎุฏู" ููุง ูููููุง ุชุฑูู ูุงุฑุบูุง (ูุฃุดุฎุงุต ูุญุชุฑููู ูุถุน ูููุฏูุง ูู ุงููุฎุทุท).  ุงููุทูุฑูู ุฐูู ุงูุฎุจุฑุฉ ุฑุจูุง ูุฑู ุจุงููุนู ูุณููุฉ <del>  ูุฃูู ุงูุณูู ุ ูุฑููุจ ุงูุฎูู </del>  ุงูุญุตูู ุนูู ูู ูู ุงููุณุชุฎุฏู ูุงูุทูุจ ูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BankAccount </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newForUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long userId)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount account = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BankAccount(); account.setUser(userRepository.getOne(userId)); <span class="hljs-comment"><span class="hljs-comment">//&lt;---- return accountRepository.save(account); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>JpaRepository::getOne</code> ุจุฅุฑุฌุงุน ุบูุงู ุนุจุฑ ุงูููุชุงุญ ุงูุฐู ูู ููุณ ุงูููุน ูุซู "ุงูููุงู" ุงูุญู.  ูุนุทู ูุฐุง ุงูุฑูุฒ ุทูุจูู ููุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> hibernate_sequence <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> bank_account (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*โฆ*/</span></span> user_id) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*โฆ*/</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุญุชูู ุงูููุงู ุงูุฌุงุฑู ุฅูุดุงุคู ุนูู ุงูุนุฏูุฏ ูู ุงูุญููู ุฐุงุช ุงูุนูุงูุฉ ูู ูุงุญุฏ ุฅูู ูุงุญุฏ / ูุงุญุฏ ุฅูู ูุงุญุฏ ุ ูุฅู ูุฐู ุงูุชูููุฉ ุณูู ุชุณุงุนุฏ ูู ุชุณุฑูุน ุงูุงุฏุฎุงุฑ ูุชูููู ุงูุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><h4 id="ispolnenie-hql-zaprosov" style=";text-align:right;direction:rtl">  ุชูููุฐ ุงุณุชูุณุงุฑุงุช HQL </h4><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ููุถูุน ูููุตู ููุซูุฑุฉ ููุงูุชูุงู :).  ูููุฐุฌ ุงููุฌุงู ูู ููุณู ูููุงู ูุซู ูุฐุง ุงูุทูุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select count(ba) "</span></span> + <span class="hljs-string"><span class="hljs-string">" from BankAccount ba "</span></span> + <span class="hljs-string"><span class="hljs-string">" join ba.user user "</span></span> + <span class="hljs-string"><span class="hljs-string">" where user.id = :id"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countUserAccounts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Long id)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู HQL "ุงูููู": </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">select count(ba) from BankAccount ba join ba.user user where user.id = :id</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชูููุฐู ุ ุณูุชู ุฅูุดุงุก ุงุณุชุนูุงู SQL ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(ba.id) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bank_account ba <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> u <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> ba.user_id = u.id <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> u.id = ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุดููุฉ ููุง ููุณุช ูุงุถุญุฉ ุนูู ุงูููุฑ ุญุชู ูู ุฎูุงู ุงูุญูุงุฉ ุงูุญูููุฉ ูุงูููู ุงูุฌูุฏ ููุทูุฑู SQL: ุณูู ูุณุชุจุนุฏ <code>inner join</code> ุจููุชุงุญ ุงููุณุชุฎุฏู ุงูุญุณุงุจุงุช ุงูุชู ุชูุชูุฏ <code>user_id</code> ูู ุงูุชุญุฏูุฏ (ูุจุทุฑููุฉ ุฌูุฏุฉ ุ ูุฌุจ ุญุธุฑ ุฅุฏุฑุงุฌ ุชูู ุนูู ูุณุชูู ุงููุฎุทุท) ุ ููุง ูุนูู ุฃูู ููุณ ูู <code>user_id</code> ุงูุงูุถูุงู ุฅูู ุฌุฏูู <code>user</code> ุนูู ุงูุฅุทูุงู ุจุญุงุฌุฉ ุฅูู.  ูููู ุชุจุณูุท ุงูุทูุจ (ูุชุณุฑูุนู): </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(ba.id) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bank_account ba <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> ba.user_id = ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ูุชุญููู ูุฐุง ุงูุณููู ุจุณูููุฉ ูู c ุจุงุณุชุฎุฏุงู HQL: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select count(ba) "</span></span> + <span class="hljs-string"><span class="hljs-string">" from BankAccount ba "</span></span> + <span class="hljs-string"><span class="hljs-string">" where ba.user.id = :id"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countUserAccounts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Long id)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชููู ูุฐู ุงูุทุฑููุฉ ุจุฅูุดุงุก ุทูุจ "ูุงูุช". </p><br><h4 id="annotaciya-query-protiv-metoda" style=";text-align:right;direction:rtl">  ุงูุงุณุชุนูุงู ููุงุจู ุงูุทุฑููุฉ ุงููุฌุฑุฏุฉ </h4><br><p style=";text-align:right;direction:rtl">  ุชุชูุซู ุฅุญุฏู ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ ูู Spring Data ูู ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ุงุณุชุนูุงู ูู ุงุณู ุงูุทุฑููุฉ ุ ููู ููุงุณุจ ููุบุงูุฉ ุ ุฎุงุตุฉู ูุน ุงููุธููุฉ ุงูุฅุถุงููุฉ ุงูุฐููุฉ ูู IntelliJ IDEA.  ูููู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุงุณุชุนูุงู ุงูููุถุญ ูู ุงููุซุงู ุงูุณุงุจู ุจุณูููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// @Query("select count(ba) " + " from BankAccount ba " + " where ba.user.id = :id") long countUserAccounts(@Param("id") Long id); // long countByUserAccount_Id(Long id);</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃูู ุฃุจุณุท ูุฃูุตุฑ ูุฃูุซุฑ ูุงุจููุฉ ูููุฑุงุกุฉ ุ ูุงูุฃูู ูู ุฐูู - ูุง ุชุญุชุงุฌ ุฅูู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุทูุจ ููุณู.  ูุฑุฃุช ุงุณู ุงูุทุฑููุฉ - ููู ุงููุงุถุญ ุจุงููุนู ูุง ุชุฎุชุงุฑู ูููู.  ููู ุงูุดูุทุงู ููุง ูู ุงูุชูุงุตูู.  ุงูุงุณุชุนูุงู ุงูููุงุฆู ุนู ุงูุทุฑููุฉ ุงูุชู ุชู ูุถุน ุนูุงูุฉ ุนูููุง ูู <code>@Query</code> ุงูุชู ุดุงูุฏูุงูุง ุจุงููุนู.  ูุงุฐุง ุณูุญุฏุซ ูู ุงูุญุงูุฉ ุงูุซุงููุฉุ </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุจุงุจุงู!</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(ba.id) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bank_account ba <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">outer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> // &lt;<span class="hljs-comment"><span class="hljs-comment">--- !!!!!!! user u on ba.user_id = u.id where u.id = ?</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  "ูุงุฐุง ุจุญู ุงูุฌุญูู!"  - ุณูู ูุตูุญ ุงููุทูุฑ.  ุจุนุฏ ูู ุดูุก ุ ููุฏ ุฑุฃููุง ุฐูู ุจุงููุนู <del>  ุนุงุฒู ุงูููุงู </del>  <code>join</code> ููุณุช ููุงู ุญุงุฌุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุงูุณุจุจ ูู prosaic: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JPADATAJPA-729 ูุชู ุฅูุดุงุก JOIN JOIN ุบูุฑ ุงูุถุฑูุฑูุฉ ูุญุณุงุจ ุฌุฏูู ูุงุญุฏ ูุงุญุฏ</a> </li><li style=";text-align:right;direction:rtl"><del>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DATAJPA-1238 ุงูุถู ุฅูู ุงููุณุงุฑ ุบูุฑ ุงูุถุฑูุฑู ุนูุฏูุง ูุงู ูู ุงููููู ุงุณุชุฎุฏุงู ุงูููุงู</a> </del></li></ul><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชูู ูุฏ ููุช ุจุงูุชุฑููุฉ ุฅูู ุงูุฅุตุฏุงุฑุงุช ุงููุตุญุญุฉ ุญุชู ุงูุขู ุ ููุคุฏู ุงูุงูุถูุงู ุฅูู ุงูุฌุฏูู ุฅูู ุฅุจุทุงุก ุงูุทูุจ ููุง ูุงูุขู ุ ููุง ุชููู: ููุงู ุทุฑููุชุงู ูุชุฎููู ุงูุฃูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุฌูุฏุฉ ูุฅุถุงูุฉ <code>optional = false</code> (ุฅุฐุง ุณูุญุช ุงูุฏุงุฆุฑุฉ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccount</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long id; <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, optional = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) User user; }</code> </pre> <br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุทุฑููุฉ ุนูุงุฒ ูู ุฅุถุงูุฉ ุนููุฏ ูู ููุณ ุงูููุน ูููุชุงุญ ููุงู <code>User</code> ูุงุณุชุฎุฏุงูู ูู ุงูุงุณุชุนูุงูุงุช ุจุฏูุงู ูู ุญูู <code>user</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BankAccount</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> Long id; <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>) User user; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, insertable = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, updatable = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) Long userId; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุณูููู ุงูุทูุจ ูู ุงูุทุฑููุฉ ุฃุฌูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countByUserId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id)</span></span></span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุทู </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(ba.id) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bank_account ba <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> ba.user_id = ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ุญูููุงุ </p><br></li></ul><br><h4 id="ogranichenie-vyborki" style=";text-align:right;direction:rtl">  ุญุฏ ุฃุฎุฐ ุงูุนููุงุช </h4><br><p style=";text-align:right;direction:rtl">  ูุฃุบุฑุงุถูุง ุ ูุญุชุงุฌ ุฅูู ุชูููุฏ ุงูุชุญุฏูุฏ (ุนูู ุณุจูู ุงููุซุงู ุ ูุฑูุฏ ุฅุฑุฌุงุน <code>Optional</code> ูู ุทุฑููุฉ <code>*RepositoryCustom</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> ba.* <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bank_account ba <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> ba.rate <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฌุงูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Optional&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findWithHighestRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String query = <span class="hljs-string"><span class="hljs-string">"select b from BankAccount b order by b.rate"</span></span>; BankAccount account = em .createQuery(query, BankAccount.class) .setFirstResult(<span class="hljs-number"><span class="hljs-number">0</span></span>) .setMaxResults(<span class="hljs-number"><span class="hljs-number">1</span></span>) .getSingleResult(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Optional.ofNullable(bankAccount); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฑูุฒ ุงููุญุฏุฏ ุนูู ููุฒุฉ ูุงุญุฏุฉ ุบูุฑ ุณุงุฑุฉ: ูู ุญุงูุฉ ุฅุฑุฌุงุน ุงูุทูุจ ุชุญุฏูุฏูุง ูุงุฑุบูุง ุ ุณูุชู ุทุฑุญ ุงุณุชุซูุงุก </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Caused by: javax.persistence.NoResultException: No entity found for query</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุดุงุฑูุน ุงูุชู ุฑุฃูุชูุง ุ ุชู ุญู ูุฐุง ุจุทุฑููุชูู ุฑุฆูุณูุชูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌุฑูุจ ุงูุงุฎุชูุงูุงุช ูุน ุงูุงุฎุชูุงูุงุช ุจูู ุงูุงุณุชุซูุงุก ุจุดูู ุตุฑูุญ ูุฅุนุงุฏุฉ <code>Optonal.empty()</code> ุฅูู ุฃุณุงููุจ ุฃูุซุฑ ุชูุฏููุง ุ ูุซู ุชูุฑูุฑ lambda ูุน ุทูุจ ุฅูู ุฃุฏุงุฉ ูุณุงุนุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุฌุงูุจ ุงูุฐู ุทุฑู ููู ุงูุชุฎุฒูู ูููููุฉ ุงูุนูุฏุฉ <code>Optional</code> </li></ul><br><p style=";text-align:right;direction:rtl">  ููุงุฏุฑุงู ูุง ุฑุฃูุช ุงูุญู ุงูุตุญูุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Optional&lt;BankAccount&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findWithHighestRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String query = <span class="hljs-string"><span class="hljs-string">"select b from BankAccount b order by b.rate"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> em.unwrap(Session.class) .createQuery(query, BankAccount.class) .setFirstResult(<span class="hljs-number"><span class="hljs-number">0</span></span>) .setMaxResults(<span class="hljs-number"><span class="hljs-number">1</span></span>) .uniqueResultOptional(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุฏ <code>EntityManager</code> ุฌุฒุกูุง ูู ูุนูุงุฑ JPA ุ ุจูููุง ุชูุชูู <code>Session</code> ุฅูู Hibernate ููู IMHO ุฃุฏุงุฉ ุฃูุซุฑ ุชูุฏููุง ุ ูุบุงูุจูุง ูุง ูุชู ูุณูุงููุง. </p><br><h4 id="inogda-vrednoe-uluchshenie" style=";text-align:right;direction:rtl">  [ูู ุจุนุถ ุงูุฃุญูุงู] ุงูุชุญุณู ุงูุถุงุฑ </h4><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุญูู ุตุบูุฑ ูุงุญุฏ ูู ููุงู "ูุซูู" ุ ูุฅููุง ููุนู ุฐูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"select a.available from BankAccount a where a.id = :id"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findIfAvailable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Long id)</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุญ ูู ุงูุทูุจ ุงูุญุตูู ุนูู ุญูู ูุงุญุฏ ูู ุงูููุน <code>boolean</code> ุฏูู ุชุญููู ุงูููุงู ุจุฃูููู (ูุน ุฅุถุงูุฉ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุงููุณุชูู ุงูุฃูู ุ ูุงูุชุญูู ูู ุงูุชุบููุฑุงุช ูู ููุงูุฉ ุงูุฌูุณุฉ ุ ูุงููููุงุช ุงูุฃุฎุฑู).  ูู ุจุนุถ ุงูุฃุญูุงู ุ ูุง ูุคุฏู ูุฐุง ุฅูู ุชุญุณูู ุงูุฃุฏุงุก ูุญุณุจ ุ ุจู ุฅูู ูุนูู ุฃูุถูุง ุนูู ุฅูุดุงุก ุงุณุชุนูุงูุงุช ุบูุฑ ุถุฑูุฑูุฉ ูู ุงูุจุฏุงูุฉ.  ุชุฎูู ุฑูุฒูุง ูููู ุจุจุนุถ ุงูุงุฎุชุจุงุฑุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount acc = repository.findById(id).orElseThow(NPE::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ... return repository.findIfAvailable(id); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏู ูุฐุง ุงูุฑูุฒ ุทูุจูู ุนูู ุงูุฃูู ุ ุฑุบู ุฃูู ูููู ุชุฌูุจ ุงูุซุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long id)</span></span></span><span class="hljs-function"> </span></span>{ BankAccount acc = repository.findById(id).orElseThow(NPE::<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ... return repository.findById(id) //    .map(BankAccount::isAvailable) .orElseThrow(IllegalStateException::new); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุงุณุชูุชุงุฌ ุจุณูุท: ูุง ุชููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณุชูู ุงูุฃูู ุ ูู ุฅุทุงุฑ ูุนุงููุฉ ูุงุญุฏุฉ ุ ูุดูุฑ <code>JpaRepository::findById</code> ุงูุฃูู ููุท ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ <code>JpaRepository::findById</code> ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณุชูู ุงูุฃูู ูู ุฏุงุฆูุง ููุฏ ุงูุชุดุบูู ูุชุฑุชุจุท ุจุฌูุณุฉ ุ ูุงูุชู ุนุงุฏุฉ ูุง ุชููู ูุฑุชุจุทุฉ ุจุงููุนุงููุฉ ุงูุญุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑุงุช ููุนุจ ุจูุง (ูุฑุฏ ุงูุฑุงุจุท ุฅูู ุงููุณุชูุฏุน ูู ุจุฏุงูุฉ ุงูููุงู): </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุถููุฉ: <code>InterfaceNarrowingTest</code> </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ููุญุตูู ุนูู ูุซุงู ุจุงุณุชุฎุฏุงู ููุชุงุญ ูุฑูุจ: <code>EntityWithCompositeKeyRepositoryTest</code> </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ูุงุฆุถ <code>CrudRepository::save</code> : <code>ModifierTest.java</code> </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุฃุนูู <code>CrudRepository::findById</code> : <code>ChildServiceImplTest</code> </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ <code>left join</code> ุบูุฑ ุงูุถุฑูุฑู: <code>BankAccountControlRepositoryTest</code> </li></ul><br><p style=";text-align:right;direction:rtl">  ูููู ุญุณุงุจ ุชูููุฉ ููุงููุฉ ุฅุถุงููุฉ ุฅูู <code>CrudRepository::save</code> ุจุงุณุชุฎุฏุงู <code>RedundantSaveBenchmark</code> .  ูุชู ุฅุทูุงูู ุจุงุณุชุฎุฏุงู ูุฆุฉ <code>BenchmarkRunner</code> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar441386/">https://habr.com/ru/post/ar441386/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar441376/index.html">ุฃุจุนุฏ ูู ุงูููุงุก: ูุง ูููู ููุง ูุง ูููู ุนูุณ ุบุดุงุก ุงูุชูุงุถุญ</a></li>
<li><a href="../ar441378/index.html">ุงูุจุงุญุซูู ูู Google: ููุญูุงูุฉ ุถุฏ Specter ูุชุทูุจ ุชุบููุฑ ูู ุจููุฉ ุงููุนุงูุฌ ุ ูู ุชุณุงุนุฏ ุชุตุญูุญุงุช ุงูุจุฑุงูุฌ</a></li>
<li><a href="../ar441380/index.html">7 ููุงุท ูููู ุงูุชุญููู ุฃู ููููุฉ ุฒูุงุฏุฉ ูุงุจููุฉ ุงูููุฑ ุนูู ุงูุฃุฒุฑุงุฑ</a></li>
<li><a href="../ar441382/index.html">ุทูุฑ ุงูุนููุงุก ุงูุตููููู ูููุฏ ููุฑุถุบุทูุฉ ูุฌูุงุฒ ุชูุธูู ุถุฑุจุงุช ุงูููุจ</a></li>
<li><a href="../ar441384/index.html">ูุนุธู ุงูุทุจุงุนุฉ ูู ูููุฏูุฒ</a></li>
<li><a href="../ar441388/index.html">ุฎุทูุท ุญูุงุฑ ูุญุดู - ุฅููุง ููุทูุฉ ุญุธุฑ ุงูุทูุฑุงู ููุญูุงู</a></li>
<li><a href="../ar441390/index.html">ููุณ ูุฌุฑุฏ ูุงุชู ูุงุจู ููุทู: ูุงูุช Samsung ุจุชุญุฏูุซ ูุฌููุนุฉ ุงูุฃุฌูุฒุฉ ุงููุงุจูุฉ ููุงุฑุชุฏุงุก ุจุงููุงูู</a></li>
<li><a href="../ar441392/index.html">RDRAND ู RDSEED ูุธุงุฆู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชุงุญุฉ ุงูุขู</a></li>
<li><a href="../ar441394/index.html">ุงููู "ุงูุชุทุจููู" ASCII</a></li>
<li><a href="../ar441398/index.html">ูุฑูุฒ ููุชุญ Worldview ุดูุฑุฉ ุงููุตุฏุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>