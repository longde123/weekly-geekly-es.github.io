<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏉 👩🏻‍🍳 🍼 无需编程和焊接即可在新的一年使用彩色地址LED 👩🏾‍🎨 👩🏾‍🤝‍👨🏿 🕴️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="新年快到了，但是由于种种原因，心情有时并不是新年的心情，因此这里的新年照亮了。 我想谈谈我对可寻址LED花环和色带的体验。 我不太可能发现美国，但事实证明它精美而廉价。 



 我将考虑两个选项-分别不使用现有的家庭自动化功能，并与“智能家居”结合使用。 


 可寻址的LED磁带上出现了很多结构...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>无需编程和焊接即可在新的一年使用彩色地址LED</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481566/"><p> 新年快到了，但是由于种种原因，心情有时并不是新年的心情，因此这里的新年照亮了。 我想谈谈我对可寻址LED花环和色带的体验。 我不太可能发现美国，但事实证明它精美而廉价。 </p><br><p><img src="https://habrastorage.org/webt/eu/ks/bo/euksbogl1rav5lvy75cz1xuzkrc.gif"><br> 我将考虑两个选项-分别不使用现有的家庭自动化功能，并与“智能家居”结合使用。 </p><a name="habracut"></a><br><p> 可寻址的LED磁带上出现了很多结构化信息，因此您可以轻松地做出明智的选择。 例如，在购买之前，我仔细观看了<a href="https://youtu.be/tXvtxwK3jRk%3Ft%3D438">DrZzs（英语）</a>和<a href="https://youtu.be/QnvircC22hU%3Ft%3D213">The Hook Up（英语）</a>频道中的相应视频，并对必要的磁带成本做出了结论-因为在我的案例中磁带的工作结果是-彩色突出显示。 </p><br><p> 他选择了中国的两种廉价选择： </p><br><ol><li>  <a href="https://www.aliexpress.com/item/32682015405.html">WS2812B胶带-300个LED</a> -5米。 </li><li>  <a href="https://www.aliexpress.com/item/32444382333.html">WS2811花环-50个LED</a> x 3个-大约10米（3 x 3.3 m） </li></ol><br><p><img src="https://habrastorage.org/webt/0x/gh/8o/0xgh8oibngraaijuiyih_bw-8ni.jpeg"><br>  <em>解决办公室内部的像素</em> </p><br><p> 在这两种情况下，都需要5伏才能为我的磁带供电。 我没有依靠电源，而是安装了现有且价格合理的<a href="https://meanwellpower.ru/istochnik-pitaniya-ac-dc-mean-well-rs-150-5">Mean Well RS-150-5</a>电源设备。 </p><br><p><img src="https://habrastorage.org/webt/hj/eg/v5/hjegv5csxbptdn1x0_4z4t9gxmy.jpeg"><br>  <em>电源装置Mean Well RS-150-5</em> </p><br><p> 管理新年计划的最重要部分是控制器。 我选择了中国制造商Espressif Systems的ESP8266微控制器，也就是说，在我的情况下，我使用了便宜的<a href="https://www.aliexpress.com/item/32529101036.html">LOLIN（WEMOS）D1迷你</a>板。 </p><br><p><img src="https://habrastorage.org/webt/7u/4m/6t/7u4m6thz8kgpqlriu89ezskz-he.jpeg"><br>  <em>LOLIN（WEMOS）D1迷你收缩连接到圣诞树上的缎带</em> </p><br><h2 id="hardware"> 硬体 </h2><br><p> 对于色带和花环，有一个非常广泛的选择-有大量不同的芯片组，您需要查看一下，以便控制器支持您要购买的色带。 <br> 我的任务是使用地址像素磁带作为基于开源平台<a href="https://www.home-assistant.io/">Home Assistant</a>的自动化的一部分。 为此，最实惠的选择是使用ESP8266。 由Tasmota固件的作者汇编的， <a href="https://blakadder.github.io/templates/light.html">具有兼容工厂控制器</a>的<a href="https://blakadder.github.io/templates/light.html">大型数据库</a> （LED控制器部分）。 <br> 在我看来，Tasmota是一个很好的固件，但是对于受控像素和<a href="https://habr.com/ru/post/480690/">步进电机</a>来说，它不是很合适。 </p><br><p><img src="https://habrastorage.org/webt/xv/ah/o-/xvaho-hbz991uoxukkboyrdj_a0.jpeg"><br>  <em>LOLIN（WEMOS）D1 mini连接到花环</em> </p><br><h2 id="software"> 软体类 </h2><br><h3 id="variant-bez-domashney-avtomatizacii"> 没有家庭自动化的选件 </h3><br><p> 如果您想快速入门而无需注册和SMS，则最合理的解决方案是WLED项目的ESP8266固件<a href="https://github.com/Aircoookie/WLED">（WiFi照明效果驱动程序）</a> 。 该固件具有自己的应用程序，可让您轻松控制LED以及地址带和花环的大量预定义效果。 如果需要，WLED还支持许多管理协议，包括<abbr title="消息队列遥测传输">MQTT</abbr> 。 <br> 不需要焊接将磁带连接到WEMOS。 </p><br><p><img src="https://habrastorage.org/webt/y0/u4/1c/y0u41c5hp2qj17vjcwm3adynbc8.png"><br>  <em>WLED接口（WiFi灯光效果驱动程序）</em> </p><br><h3 id="adresnaya-illyuminaciya-v-sostave-umnogo-doma-na-baze-home-assistant"> 目标照明是基于Home Assistant的智能家居的一部分 </h3><br><p> 应当指出的是，WLED最近（于2019年12月）似乎<a href="https://www.home-assistant.io/integrations/wled/">完全集成了Home Assistant</a> 。 <br> 但是，由于我11月从事花环的工作，因此在出现这种集成之前，Home Assistant &lt;-&gt; WLED MQTT连接对我来说似乎很麻烦。 </p><br><p><img src="https://habrastorage.org/webt/84/zs/iz/84zsiziqm9ymyidmesj2rqorn4q.png"><br>  <em>ESPHome控制面板</em> </p><br><p> 对于Home Assistant，有一个本机<a href="https://esphome.io/index.html">ESPHome</a>固件可与不带MQTT的Home Assistant一起使用，并且还<a href="https://esphome.io/components/light/fastled.html">支持地址LED</a> 。 </p><br><div class="spoiler">  <b class="spoiler_title">这是受支持的芯片组的列表。</b> <div class="spoiler_text"><p> 无时钟： <br>  NEOPIXEL <br>  WS2811 <br>  WS2811_400（时钟频率为400kHz的WS2811） <br>  WS2812B <br>  WS2812 <br>  WS2813 <br>  WS2852 <br>  APA104 <br>  APA106 <br>  Gw6205 <br>  GW6205_400（时钟频率为400kHz的GW6205） <br>  LPD1886 <br>  LPD1886_8BIT（具有8位颜色通道值的LPD1886） <br>  PL9823 <br>  SK6812 <br>  SK6822 <br>  TM1803 <br>  TM1804 <br>  TM1809 <br>  TM1829 <br>  UCS1903B <br>  UCS1903 <br>  UCS1904 <br>  UCS2903 </p><br><p>  SPI： <br>  APA102 <br> 点星 <br>  LPD8806 <br>  P9813 <br>  SK9822 <br>  SM16716 <br>  WS2801 <br>  WS2803 </p></div></div><br><p> 由于我使用<a href="https://www.home-assistant.io/hassio/">Hass.io</a>映像，因此我使用了最简单的选项来编译固件<a href="https://github.com/esphome/hassio">-ESPHome Hass.io附加组件</a> 。 </p><br><p><img src="https://habrastorage.org/webt/vq/1_/or/vq1_orjpjkcqkmcs-f71-e0k34a.png"><br>  <em>ESPHome固件编辑器窗口</em> </p><br><p> 产生的固件花环和色带： </p><br><div class="spoiler">  <b class="spoiler_title">ws2811_string.yaml</b> <div class="spoiler_text"><pre><code class="plaintext hljs">substitutions: devicename: ws2811_string upper_devicename: WS2811 string esphome: name: $devicename platform: ESP8266 board: d1_mini wifi: ssid: "XXX" password: "XXX" # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: "WS2811 string Fallback Hotspot" password: "XXX" captive_portal: web_server: port: 80 css_url: http://192.168.15.10:8123/local/webserver-v1.min.css #   -        https://github.com/esphome/issues/issues/648 js_url: http://192.168.15.10:8123/local/webserver-v1.min.js # Enable Home Assistant API api: # Enable OTA Access ota: # Enable verbose logging over serial logger: light: - platform: fastled_clockless chipset: WS2811 pin: D4 num_leds: 150 name: " WS2811" effects: - addressable_rainbow: name: Rainbow Effect With Custom Values speed: 30 width: 150 - addressable_color_wipe: name: Color Wipe Effect With Custom Values colors: - red: 10% green: 10% blue: 100% num_leds: 1 - red: 0% green: 0% blue: 0% num_leds: 1 add_led_interval: 100ms reverse: False - random: name: "My Fast Random Effect" transition_length: 4s update_interval: 5s - strobe: name: Strobe Effect With Custom Values colors: - state: True brightness: 100% red: 100% green: 90% blue: 0% duration: 500ms - state: False duration: 250ms - state: True brightness: 100% red: 0% green: 100% blue: 0% duration: 500ms - addressable_scan: name: Scan Effect With Custom Values move_interval: 60ms - addressable_fireworks: name: Fireworks Effect With Custom Values update_interval: 32ms spark_probability: 10% use_random_color: false fade_out_rate: 120 #     sensor: - platform: uptime id: uptime_sec - platform: wifi_signal name: ${upper_devicename} WiFi Signal id: wifis_signal update_interval: 900s text_sensor: - platform: template name: ${upper_devicename} Uptime lambda: |- int seconds = (id(uptime_sec).state); int days = seconds / (24 * 3600); seconds = seconds % (24 * 3600); int hours = seconds / 3600; seconds = seconds % 3600; int minutes = seconds / 60; seconds = seconds % 60; return { (String(days) +"d " + String(hours) +"h " + String(minutes) +"m "+ String(seconds) +"s").c_str() }; icon: mdi:clock-start update_interval: 113s - platform: template name: ${upper_devicename} Wifi Strength icon: "mdi:wifi" lambda: |- if (id(wifis_signal).state &gt; -50 ) { return {"Excellent"}; } else if (id(wifis_signal).state &gt; -60) { return {"Good"}; } else if (id(wifis_signal).state &gt; -70) { return {"Fair"}; } else if (id(wifis_signal).state &lt; -70) { return {"Weak"}; } else { return {"None"}; } update_interval: 900s - platform: version name: ${upper_devicename} Version - platform: template name: ${upper_devicename} MAC Address lambda: 'return {WiFi.macAddress().c_str()};' icon: mdi:fingerprint update_interval: 1d switch: - platform: restart name: ${upper_devicename} Restart</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">ws2811_strip.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">substitutions: devicename: ws2811_strip upper_devicename: WS2811 strip esphome: name: $devicename platform: ESP8266 board: d1_mini_lite wifi: ssid: "XXX" password: "XXX" # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: "WS2811 strip Fallback Hotspot" password: "XXX" captive_portal: web_server: port: 80 css_url: http://192.168.15.10:8123/local/webserver-v1.min.css #   -        https://github.com/esphome/issues/issues/648 js_url: http://192.168.15.10:8123/local/webserver-v1.min.js # Enable Home Assistant API api: # Enable OTA Access ota: # Enable verbose logging over serial logger: light: - platform: fastled_clockless chipset: WS2811 pin: D4 num_leds: 300 rgb_order: GRB name: " WS2811" effects: - addressable_rainbow: name: Rainbow Effect With Custom Values speed: 30 width: 300 - addressable_color_wipe: name: Color Wipe Effect With Custom Values colors: - red: 10% green: 10% blue: 100% num_leds: 1 - red: 0% green: 0% blue: 0% num_leds: 1 add_led_interval: 100ms reverse: False - random: name: "My Fast Random Effect" transition_length: 4s update_interval: 5s - strobe: name: Strobe Effect With Custom Values colors: - state: True brightness: 100% red: 100% green: 90% blue: 0% duration: 500ms - state: False duration: 250ms - state: True brightness: 100% red: 0% green: 100% blue: 0% duration: 500ms - addressable_scan: name: Scan Effect With Custom Values move_interval: 60ms - addressable_fireworks: name: Fireworks Effect With Custom Values update_interval: 32ms spark_probability: 10% use_random_color: false fade_out_rate: 120 #     sensor: - platform: uptime id: uptime_sec - platform: wifi_signal name: ${upper_devicename} WiFi Signal id: wifis_signal update_interval: 900s text_sensor: - platform: template name: ${upper_devicename} Uptime lambda: |- int seconds = (id(uptime_sec).state); int days = seconds / (24 * 3600); seconds = seconds % (24 * 3600); int hours = seconds / 3600; seconds = seconds % 3600; int minutes = seconds / 60; seconds = seconds % 60; return { (String(days) +"d " + String(hours) +"h " + String(minutes) +"m "+ String(seconds) +"s").c_str() }; icon: mdi:clock-start update_interval: 113s - platform: template name: ${upper_devicename} Wifi Strength icon: "mdi:wifi" lambda: |- if (id(wifis_signal).state &gt; -50 ) { return {"Excellent"}; } else if (id(wifis_signal).state &gt; -60) { return {"Good"}; } else if (id(wifis_signal).state &gt; -70) { return {"Fair"}; } else if (id(wifis_signal).state &lt; -70) { return {"Weak"}; } else { return {"None"}; } update_interval: 900s - platform: version name: ${upper_devicename} Version - platform: template name: ${upper_devicename} MAC Address lambda: 'return {WiFi.macAddress().c_str()};' icon: mdi:fingerprint update_interval: 1d switch: - platform: restart name: ${upper_devicename} Restart</code> </pre> </div></div><br><p> 将生成的设备添加到界面中的Home Assistant之后，您可以查看并设置效果选项。 </p><br><p><img src="https://habrastorage.org/webt/on/56/ah/on56ah882ioqsx4950ppkg-mlec.png"><br>  <em>家庭助理界面</em> </p><br><p> 此外，效果可以用于自动化。 例如，当您打开门30秒钟时，一种效果，10秒，另一种效果，然后关闭以免分散注意力。 但是有一个条件：只有在街道已经很暗的时候才包含。 </p><br><div class="spoiler">  <b class="spoiler_title">automations.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">################################################### # # # WS2811 :    # # # ################################################### - alias: WS2811 string trigger: - platform: state entity_id: binary_sensor.dver from: 'off' to: 'on' condition: - condition: numeric_state entity_id: 'sensor.osveshchennost_u_okna' below: 1500 # action: - service: homeassistant.turn_on data: entity_id: group.new_year #light.girlianda_ws2811 brightness: 255 effect: Rainbow Effect With Custom Values - delay: '00:00:25' - service: homeassistant.turn_on data: entity_id: group.new_year brightness: 255 effect: Color Wipe Effect With Custom Values - delay: '00:00:13' - service: homeassistant.turn_off entity_id: group.new_year - alias: Table lamp ON trigger: - platform: state entity_id: binary_sensor.dver from: 'off' to: 'on' condition: - condition: numeric_state entity_id: 'sensor.osveshchennost_u_okna' below: 90 # action: - service: homeassistant.turn_on entity_id: switch.potolochnaia_lampa - alias: Table lamp OFF trigger: - platform: state entity_id: binary_sensor.dver from: 'on' to: 'off' condition: [] action: - service: homeassistant.turn_off entity_id: switch.potolochnaia_lampa</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/gy/ci/o9/gycio9hm7fhzga6hjjxbn3yb2eg.jpeg"><br>  <em>带有地址LED灯条的圣诞树</em> </p><br><h2 id="itog"> 总结 </h2><br><p> 如您所见，您可以以某种技巧灵活地组织新年灯，并将其安装到现有的“智能家居”系统中，或者在智能手机上使用单独的应用程序而无需家庭自动化地单独使用它。 </p><br><p> 可以在<a href="https://github.com/empenoso/diy-holiday-lighting">GitHub上</a>找到更多详细信息。 </p><br><p> 发表者： <a href="https://www.facebook.com/mikhail.shardin">Mikhail Shardin</a> ， <br>  2019年12月23日 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481566/">https://habr.com/ru/post/zh-CN481566/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481554/index.html">如何通过计算机科学在线理学硕士课程，这可能不适合谁</a></li>
<li><a href="../zh-CN481556/index.html">PostgreSQL任务队列</a></li>
<li><a href="../zh-CN481560/index.html">上周第394期（2019年12月15日至22日）的前端世界摘要</a></li>
<li><a href="../zh-CN481562/index.html">Raspberry Pi 4耐热测试</a></li>
<li><a href="../zh-CN481564/index.html">PHP文摘第170号（2019年12月9日至23日）</a></li>
<li><a href="../zh-CN481568/index.html">12月23日至29日在莫斯科举行的数字活动</a></li>
<li><a href="../zh-CN481570/index.html">今天的17:00，将举行网络研讨会DevOps：工具和编号</a></li>
<li><a href="../zh-CN481572/index.html">我的2020年新的Web技术堆栈</a></li>
<li><a href="../zh-CN481574/index.html">自托管第三方资源：好，坏，恶</a></li>
<li><a href="../zh-CN481576/index.html">前端2019：年度结果</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>