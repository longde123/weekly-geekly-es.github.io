<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧🏼 ⏰ 🙎🏼 دورة حياة ML 🎠 💖 🐱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في تنفيذ ML حقيقي ، يستغرق التعلم بحد ذاته ربع الجهد. الفصول الثلاثة المتبقية هي إعداد البيانات من خلال الألم والبيروقراطية ، وهو نشر معقد في كثير من ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>دورة حياة ML</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/455648/" style=";text-align:right;direction:rtl">  في تنفيذ ML حقيقي ، يستغرق التعلم بحد ذاته ربع الجهد.  الفصول الثلاثة المتبقية هي إعداد البيانات من خلال الألم والبيروقراطية ، وهو نشر معقد في كثير من الأحيان في حلقة مغلقة دون الوصول إلى الإنترنت ، وإعداد البنية التحتية ، والاختبار والمراقبة.  المستندات على مئات الأوراق ، والوضع اليدوي ، وتعارض إصدار النماذج ، والمصدر المفتوح ، والمشاريع القاسية - كل هذا ينتظر عالِم بيانات.  لكنه لا يهتم بمثل هذه القضايا التشغيلية "المملة" ؛ فهو يريد تطوير خوارزمية وتحقيق جودة عالية ورد الجميل ولم يعد يتذكر. <br><br>  ربما ، يتم تنفيذ ML في مكان ما بشكل أسهل وأبسط وأسرع وبزر واحد ، لكننا لم نر مثل هذه الأمثلة.  كل ما سبق هو تجربة Front Tier في fintech والاتصالات.  تحدث سيرغي فينوغرادوف ، وهو خبير في هندسة النظم المحملة للغاية ، في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المستودعات</a> الكبيرة وتحليل البيانات الثقيلة ، عنه في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">HighLoad ++</a> . <br><br><img src="https://habrastorage.org/webt/ss/7n/cm/ss7ncmtdsij0wncwt-uuzxneit8.jpeg"><br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  دورة حياة نموذجية </h2><br>  تتكون دورة الحياة في موضوعنا عادةً من ثلاثة أجزاء.  في البداية <strong>، تأتي المهمة من العمل</strong> .  في الثانية ، يقوم <strong>مهندس بيانات و / أو عالم بيانات بإعداد البيانات</strong> ، وبناء نموذج.  في الجزء الثالث ، تبدأ <strong>الفوضى</strong> .  في آخر اثنين ، تحدث مواقف مثيرة للاهتمام مختلفة. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7GM9ac6ojtw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3 style=";text-align:right;direction:rtl">  جاك لجميع المهن </h3><br>  أول موقف متكرر هو أن عالِم البيانات أو مهندس البيانات يمكنه الوصول إلى المنتجات ، لذلك يقولون له: "لقد فعلت كل هذا ، لقد راهنت عليه. <br><br>  يأخذ الشخص جهاز <strong>Jupyter Notebook</strong> أو مجموعة من دفاتر الملاحظات ، ويعتبرها بشكل حصري بمثابة أداة نشر ، ويبدأ في نسخها بسرور على بعض الخوادم. <br><br>  كل شيء يبدو على ما يرام ، ولكن ليس دائما.  سأخبرك لاحقا لماذا. <br><br><h3 style=";text-align:right;direction:rtl">  استغلال بلا رحمة </h3><br>  القصة الثانية أكثر تعقيدًا ، وعادة ما تحدث في الشركات التي بلغ فيها الاستغلال حالة من الجنون المعتدل.  عالم البيانات يجلب حلها للعمل.  يفتحون الصندوق الأسود ويرون شيئًا فظيعًا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  أجهزة الكمبيوتر المحمولة. </li><li style=";text-align:right;direction:rtl">  المخلل من إصدارات مختلفة. </li><li style=";text-align:right;direction:rtl">  مجموعة من البرامج النصية: من غير الواضح أين ومتى يتم تشغيلها ، وأين يتم حفظ البيانات التي يقومون بإنشائها. </li></ul><br>  في هذا اللغز ، يواجه الاستغلال عدم توافق الإصدار.  على سبيل المثال ، لم يحدد عالم البيانات إصدارًا محددًا من المكتبة ، واستغرقت العملية آخرها.  بعد فترة من الوقت ، يلجأ عالم البيانات إلى: <br><br>  <em>- قمت بتعيين scikit- تعلم للإصدار الخاطئ ، والآن ذهبت جميع المقاييس!</em>  <em>تحتاج إلى العودة إلى الإصدار السابق.</em> <br><br>  هذا يكسر تماما همز ، والاستغلال يعاني. <br><br><h3 style=";text-align:right;direction:rtl">  بيروقراطية </h3><br>  في الشركات ذات الشعارات الخضراء ، عندما يبدأ عالم البيانات في العمل ويجلب النموذج ، يتلقى عادةً مستندًا سعة 800 ورقة ردًا: "اتبع هذه التعليمات ، وإلا فلن يشاهد منتجك أبدًا ضوء النهار". <br><br>  يغادر عالم البيانات المحزن ويلقي كل شيء في منتصف الطريق ثم يستقيل - إنه غير مهتم بالقيام بذلك. <br><br><h3 style=";text-align:right;direction:rtl">  نشر </h3><br>  لنفترض أن عالم البيانات قد مر بجميع الدوائر وفي النهاية تم نشر كل شيء.  لكنه لن يكون قادرًا على فهم أن كل شيء يعمل كما ينبغي.  في تجربتي ، في نفس البنوك المباركة لا توجد مراقبة لمنتجات علم البيانات. <br><br>  من الجيد أن يكتب المتخصص نتائج عمله في قاعدة البيانات.  بعد فترة ، سوف يستقبلهم ويرى ما يحدث في الداخل.  لكن هذا لا يحدث دائما.  عندما يعتقد أحد رجال الأعمال وعالم البيانات ببساطة أن كل شيء يعمل بشكل جيد ورائع ، فإنه يترجم إلى حالات غير ناجحة. <br><br><h3 style=";text-align:right;direction:rtl">  MFI </h3><br>  بطريقة ما قمنا بتطوير محرك تسجيل لمؤسسة تمويل أصغر كبيرة.  لم يسمحوا لهم بالذهاب إلى المنتج ، لكنهم ببساطة أخذوا سلسلة من النماذج منا وقاموا بتثبيتها وتشغيلها.  نتائج اختبار النماذج راض لهم.  لكن بعد 6 أشهر عادوا: <br><br>  <em>- كل شيء سيء.</em>  <em>العمل لا يذهب ، نحن تزداد سوءا والأسوأ.</em>  <em>يبدو أن الموديلات ممتازة ، لكن النتائج تتراجع والاحتيال والتقصير أكثر فأكثر وأقل من المال.</em>  <em>ماذا دفعنا لك؟</em>  <em>هيا بنا</em> <br><br>  علاوة على ذلك ، لا يعطى الوصول إلى النموذج مرة أخرى.  تم تفريغ سجلات لمدة شهر ، علاوة على ذلك ، قبل ستة أشهر.  لقد درسنا عملية التفريغ لمدة شهر آخر وتوصلنا إلى استنتاج مفاده أنه في مرحلة ما قام قسم تكنولوجيا المعلومات في مؤسسة التمويل الأصغر بتغيير بيانات الإدخال ، وبدلاً من المستندات في json ، بدأوا في إرسال المستندات بتنسيق xml.  توقع الطراز json ، ولكنه تلقى xml ، حزينًا واعتقد أنه لا توجد بيانات عند الإدخال. <br><br><blockquote style=";text-align:right;direction:rtl">  إذا لم تكن هناك بيانات ، يكون تقييم ما يحدث مختلفًا.  بدون مراقبة ، لا يمكن اكتشاف ذلك. </blockquote><br><h3 style=";text-align:right;direction:rtl">  نسخة جديدة ، تتالي والاختبارات </h3><br>  غالبًا ما نواجه حقيقة أن النموذج يعمل بشكل جيد ، ولكن لسبب <strong>ما تم</strong> تطوير <strong>نسخة جديدة</strong> .  يحتاج النموذج مرة أخرى إلى إحضارها بطريقة ما ، ومرة ​​أخرى للذهاب عبر جميع دوائر الجحيم.  من الجيد أن تكون إصدارات المكتبة هي نفسها كما في النموذج السابق ، وإذا لم يكن الأمر كذلك ، فسيبدأ النشر من جديد ... <br><br>  في بعض الأحيان ، قبل وضع إصدار جديد في المعركة ، نريد <strong>اختباره</strong> - وضعه على المنتج ، والنظر في نفس تدفق المرور ، والتأكد من أنه جيد.  هذا هو مرة أخرى سلسلة النشر الكامل.  بالإضافة إلى ذلك ، أنشأنا الأنظمة بحيث وفقًا لهذا النموذج ، لا تحدث نتائج حقيقية ، إذا كان الأمر يتعلق بالتسجيل ، ولكن كان هناك فقط مراقبة وتحليل النتائج لمزيد من التحليل. <br><br>  هناك حالات عندما <strong>يتم استخدام سلسلة من النماذج.</strong>  عندما تعتمد نتائج النماذج التالية على النماذج السابقة ، فإنك تحتاج بطريقة ما إلى إقامة تفاعل فيما بينها وفي مكان ما مرة أخرى ، يجب حفظ كل هذا. <br><br><h2 style=";text-align:right;direction:rtl">  كيفية حل مثل هذه المشاكل؟ </h2><br>  غالبًا ما يقوم شخص واحد بحل المشكلات <strong>يدويًا</strong> ، خاصة في الشركات الصغيرة.  إنه يعرف كيف يعمل كل شيء ، ويضع في اعتباره جميع إصدارات النماذج والمكتبات ، ويعرف أين تعمل البرامج النصية ، وأي واجهات المتاجر التي يبنونها.  هذا كل شيء رائع.  جميلة بشكل خاص هي القصص التي يتركها الوضع اليدوي. <br><br>  <strong>قصة الميراث</strong> .  رجل طيب يعمل في بنك صغير واحد.  ما إن ذهب إلى دولة جنوبية ولم يعد.  بعد ذلك ، حصلنا على الميراث: مجموعة من التعليمات البرمجية التي تنشئ واجهات المتاجر التي تعمل عليها النماذج.  الشفرة جميلة ، لكنها تعمل ، لكننا لا نعرف الإصدار الدقيق للنص البرمجي الذي ينشئ واجهة العرض هذه أو تلك.  في المعركة ، توجد جميع نوافذ المتاجر ، ويتم إطلاقها جميعًا.  لقد أمضينا شهرين في محاولة لإيجاد هذا التشابك المعقد وبنيته بطريقة ما. <br><br>  <strong>في مشروع قاسٍ ،</strong> لا يريد الناس أن يزعجوا كل أنواع بيثون والمشتريين ، إلخ. يقولون: <br><br>  <em>- دعنا نشتري IBM SPSS ، التثبيت وكل شيء سيكون رائعا.</em>  <em>مشاكل في الإصدار ، مع مصادر البيانات ، مع النشر هناك حل بطريقة أو بأخرى.</em> <br><br>  هذا النهج له الحق في الوجود ، لكن لا يستطيع الجميع تحمله.  في أي حال ، هذه إبرة مسننة عالية الجودة.  يجلسون عليها ، لكنها لا تعمل من أجل الخروج - الشقوق.  وعادة ما يكلف الكثير. <br><br>  <strong>المصدر المفتوح هو</strong> عكس النهج السابق.  تصفح المطورون الإنترنت ، ووجدوا الكثير من الحلول مفتوحة المصدر التي تحل مهامهم بدرجات متفاوتة.  هذه طريقة رائعة ، ولكن لأنفسنا لم نجد حلولًا تلبي متطلباتنا بنسبة 100٪. <br><br>  لذلك ، اخترنا الخيار الكلاسيكي - <strong>قرارنا</strong> .  العكازات ، والدراجات ، وجميع خاصة بهم ، الأم. <br><br><h2 style=";text-align:right;direction:rtl">  ماذا نريد من قرارنا؟ </h2><br><br>  <strong>لا تكتب كل شيء بنفسك</strong> .  نريد أن نأخذ مكونات ، خاصة مكونات البنية التحتية ، التي أثبتت جدارتها جيدًا ولديها دراية بالعمل في المؤسسات التي نعمل معها.  نكتب فقط بيئة من شأنها عزل عمل عالم البيانات بسهولة عن عمل DevOps. <br><br>  <strong>معالجة البيانات في وضعين: كلاهما في وضع الدُفعات - الدفعي ، والوقت الحقيقي</strong> .  تشمل مهامنا كلا أوضاع التشغيل. <br><br>  <strong>سهولة النشر ، وفي محيط مغلق</strong> .  عند العمل مع البيانات الخاصة الحساسة ، لا يوجد اتصال بالإنترنت.  في هذا الوقت ، يجب أن يصل كل شيء بسرعة وبدقة إلى الإنتاج.  لذلك ، بدأنا نتطلع إلى Gitlab ، خط أنابيب CI / CD بداخله و Docker. <br><br><blockquote style=";text-align:right;direction:rtl">  النموذج ليس غاية في حد ذاته.  نحن لا نحل مشكلة بناء نموذج ، نحن نحل مشكلة العمل. </blockquote><br>  داخل خط الأنابيب ، يجب أن تكون هناك قواعد ومجموعة من النماذج مع دعم <strong>لإصدار جميع</strong> مكونات خطوط الأنابيب. <br><br>  ما المقصود بخط أنابيب؟  في روسيا ، يسري القانون الاتحادي رقم 115 بشأن مكافحة غسل الأموال وتمويل الإرهاب.  فقط جدول محتويات توصيات البنك المركزي يحتل 16 شاشة.  هذه هي القواعد البسيطة التي يمكن للبنك الوفاء بها إذا كان لديه مثل هذه البيانات ، أو لا يمكن إذا لم يكن لديه بيانات. <br><br>  يعد تقييم المقترض أو المعاملة المالية أو العمليات التجارية الأخرى مجموعة من البيانات التي نعالجها.  يجب أن يمر تيار من خلال هذا النوع من القاعدة.  يتم وصف هذه القواعد بطريقة سهلة من قبل المحلل.  إنه ليس عالم بيانات ، لكنه يعرف القانون أو التعليمات الأخرى جيدًا.  يجلس المحلل ويصف بلغة واضحة الشيكات الخاصة بالبيانات. <br><br>  <strong>بناء مجموعات من النماذج</strong> .  غالبًا ما ينشأ موقف عندما يستخدم النموذج التالي لعمله القيم التي تم الحصول عليها في النماذج السابقة. <br><br>  <strong>اختبار الفرضيات بسرعة.</strong>  أكرر الأطروحة السابقة: قام عالم بيانات بعمل نموذج ما ، يدور في المعركة ويعمل بشكل جيد.  لسبب ما ، توصل الاختصاصي إلى حل أفضل ، لكنه لا يريد أن يدمر سير العمل الثابت.  يقوم عالم البيانات بتعليق نموذج جديد على نفس حركة القتال في نظام القتال.  إنها لا تشارك مباشرة في صنع القرار ، لكنها تخدم نفس الحركة ، وتأخذ في الاعتبار بعض الاستنتاجات ويتم تخزين هذه الاستنتاجات في مكان ما. <br><br>  <strong>ميزة سهلة إعادة الاستخدام.</strong>  تحتوي العديد من المهام على نفس النوع من المكونات ، خاصة تلك المتعلقة باستخراج الميزات أو القواعد.  نريد سحب هذه المكونات إلى خطوط أنابيب أخرى. <br><br><h2 style=";text-align:right;direction:rtl">  ماذا قررت أن تفعل؟ </h2><br>  أولا نريد الرصد.  واثنان من نوعه. <br><br><h3 style=";text-align:right;direction:rtl">  مراقبة </h3><br>  <strong>المراقبة الفنية.</strong>  إذا تم نشر أي مكونات لخطوط الأنابيب ، فعليهم أن يروا ما يحدث للمكون: كيف يستهلك الذاكرة ، وحدة المعالجة المركزية ، القرص. <br><br>  <strong>مراقبة الأعمال.</strong>  هذه أداة لعالم البيانات تتيح لك الاستخلاص من الفروق التقنية للتنفيذ.  على مستوى التصميم ، يساعد الإنشاء في تحديد مقاييس النموذج التي يجب أن تكون متوفرة في المراقبة ، على سبيل المثال ، توزيع ميزة أو نتائج خدمة تسجيل النتائج. <br><br>  يعرف عالم البيانات المقاييس ويجب ألا يقلق بشأن كيفية دخولهم إلى نظام المراقبة.  الشيء الوحيد المهم هو أنه حدد هذه المقاييس ومظهر لوحة القيادة التي سيتم عرض المقاييس عليها.  ثم أطلق المتخصص كل شيء على الإنتاج ، ونشر ، وبعد فترة تدفقت المقاييس في المراقبة.  لذلك يمكن لعالم البيانات دون الوصول إلى المنتج معرفة ما يحدث داخل النموذج. <br><br><h3 style=";text-align:right;direction:rtl">  تجريب </h3><br>  اختبار <strong>خط أنابيب لتحقيق الاتساق</strong> .  بالنظر إلى تفاصيل خط الأنابيب ، هذا هو نوع من الرسم البياني للحوسبة.  نريد أن نفهم أننا نطبق رسمًا بيانيًا ، يمكننا تجاوزه وإيجاد طريقة للخروج منه. <br><br>  الرسم البياني يحتوي على مكونات - وحدات.  يجب على جميع الوحدات اجتياز اختبار الوحدة والتكامل.  يجب أن تكون العملية شفافة وسهلة لعالم البيانات. <br><br>  يصف المطور النموذج والاختبارات من تلقاء نفسه أو بمساعدة شخص آخر.  يضع كل شيء في Gitlab ، خط الأنابيب الذي تم تكوينه بواسطة التكامل المستمر يثير ويختبر ويرى النتائج.  إذا كان كل شيء جيدًا - فقد ذهب أبعد من ذلك ، لا - يبدأ من جديد. <br><br>  يركز عالم البيانات على النموذج ولا يعرف ما هو تحت الغطاء.  لهذا ، أعطيت له عدة أشياء. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>واجهة برمجة تطبيقات للتكامل مع جوهر</strong> <strong>النظام نفسه</strong> عبر ناقل البيانات - ناقل الرسالة.  في هذه الحالة ، يحتاج المختص إلى وصف ما يجري وما يخرج من نموذجه ونقطة الدخول والتقاطع مع المكونات المختلفة داخل خط الأنابيب. </li><li style=";text-align:right;direction:rtl">  بعد تدريب النموذج ، يظهر <strong>قطعة أثرية - ملف XGBoost</strong> أو <strong>ملف</strong> <strong>مخلل</strong> .  يمتلك عالم البيانات منفذاً للعمل مع القطع الأثرية - يجب عليه دمج مكونات خطوط الأنابيب في الداخل. </li><li style=";text-align:right;direction:rtl">  واجهة برمجة تطبيقات سهلة وشفافة لعالم البيانات لمراقبة تشغيل مكونات خطوط الأنابيب - المراقبة الفنية والتجارية. </li><li style=";text-align:right;direction:rtl">  <strong>بنية أساسية بسيطة وشفافة</strong> للتكامل مع مصادر البيانات والحفاظ على نتائج العمل. </li></ul><br>  غالبًا ما تعمل النماذج لصالحنا ، وبعد فترة تصل عملية التدقيق التي تريد رفع تاريخ الخدمة بالكامل.  التدقيق يريد التحقق من صحة العمل ، وعدم وجود احتيال من جانبنا.  هناك حاجة إلى أدوات بسيطة حتى يتمكن أي مدقق يعرف SQL من الدخول إلى مستودع خاص ومعرفة كيفية عمل كل شيء ، وما هي القرارات التي اتخذت ولماذا. <br><br>  وضعنا الأساس لقصتين مهمتين بالنسبة لنا. <br><br>  <strong>رحلة العملاء.</strong>  هذه فرصة لاستخدام آليات الحفاظ على تاريخ العميل بالكامل - ما حدث للعميل كجزء من العمليات التجارية التي يتم تنفيذها على هذا النظام. <br><br>  قد يكون لدينا مصادر بيانات خارجية ، على سبيل المثال ، منصات DMP.  من بينهم نحصل على معلومات حول السلوك البشري على الشبكة وفي الأجهزة المحمولة.  هذا قد يكون له تأثير على نموذجه LTV ونماذج التهديف.  إذا تأخر المقترض في السداد ، يمكننا أن نتوقع أن هذه ليست نية خبيثة - فهناك ببساطة مشاكل.  في هذه الحالة ، نطبق طرقًا لينة للتعرض للمقترض.  عندما يتم حل المشكلات ، يقوم العميل بإغلاق القرض.  عندما يأتي في المرة القادمة ، سوف نعرف قصته كلها.  سيحصل عالم البيانات على سجل مرئي من النموذج وإجراء تسجيل في وضع الضوء. <br><br>  <strong>تحديد الحالات الشاذة</strong> .  نحن نواجه باستمرار عالم معقد للغاية.  على سبيل المثال ، يمكن أن تكون النقاط الضعيفة ضمن التقييم المتسارع لمؤسسات التمويل الأصغر مصدراً للاحتيال التلقائي. <br><br>  رحلة العملاء هي مفهوم الوصول السريع والسهل إلى دفق البيانات الذي يمر عبر النموذج.  يسهل النموذج اكتشاف الحالات الشاذة التي تميز الغش في وقت حدوثها الجماعي. <br><br><h2 style=";text-align:right;direction:rtl">  كيف يتم ترتيب كل شيء؟ </h2><br>  وبدون تردد ، اتخذنا تطبيق <strong>كافكا كتصحيح</strong> للرسالة.  هذا هو الحل الجيد الذي يستخدمه العديد من عملائنا ، العملية قادرة على العمل معها. <br><br><img src="https://habrastorage.org/webt/uu/5k/3r/uu5k3rnxw7lu4iulruewhzmif8w.jpeg"><br><br><blockquote style=";text-align:right;direction:rtl">  قد يتم بالفعل استخدام بعض مكونات النظام في الشركة نفسها.  نحن لا نبني النظام مرة أخرى ، ولكننا نعيد استخدام ما لديهم بالفعل. </blockquote><br>  <strong>تخزين البيانات</strong> في هذه الحالة هو وحدة التخزين التي عادة ما يكون لدى العميل بالفعل.  يمكن أن يكون Hadoop ، قواعد البيانات العلائقية وغير العلائقية.  يمكننا العمل أصلاً خارج نطاق اللعبة مع HDFS و Hive و Impala و Greenplum و PostgreSQL.  نعتبر هذه المخازن مصدرًا لنوافذ المتاجر. <br><br>  تصل البيانات إلى المستودع ، وتمر عبر ETL أو ETL للعميل ، إذا كان لديه واحد.  نحن نبني نوافذ المتاجر التي يتم استخدامها داخل النماذج.  يتم استخدام تخزين البيانات في وضع القراءة فقط. <br><br><h3 style=";text-align:right;direction:rtl">  تطوراتنا </h3><br>  <strong>السبورة.</strong>  الاسم مأخوذ من ممارسة غريبة نوعا ما لعلماء الرياضيات من 30-40.  هذا هو مدير خطوط الأنابيب الذين يعيشون في نظام المسؤول.  يحتوي Blackboard على نوع من التخزين الفوقية.  يخزن خطوط الأنابيب نفسها والتكوينات اللازمة لتهيئة جميع المكونات. <br><br>  كل عمل النظام يبدأ بـ Blackboard.  بعض المعجزة ، انتهى خط الأنابيب في Meta Storage ، Blackboard بعد حين يفهم ذلك ، يسحب الإصدار الحالي من خط الأنابيب ، ويهيئه ويرسل إشارة داخل Kafka. <br><br>  هناك <strong>بيئة وقت التشغيل</strong> .  إنه مبني على Dockers ويمكن نسخه على خوادم ، بما في ذلك في السحابة الخاصة بالعميل. <br><br>  خارج الصندوق يأتي <strong>الممثل</strong> الرئيسي <strong>:: التهيئة</strong> - هذا هو المُهيئ.  هذا هو الجني الذي يمكن أن يفعل شيئين فقط: <strong>بناء</strong> <strong>وتدمير المكونات</strong> .  يتلقى أمرًا من Blackboard: "هنا هو خط الأنابيب ، يجب تشغيله على مثل هذه الخوادم ومثل هذه الموارد ومثل هذه الكميات ومثل هذه الكميات - العمل!"  ثم الممثل يبدأ كل شيء. <br><br>  من الناحية الرياضية ، يمثل الفاعل وظيفة تأخذ كائنًا واحدًا أو أكثر كمدخلات ، أو تغير حالة الكائنات باستخدام خوارزمية في الداخل ، أو ينشئ كائنًا جديدًا في الإخراج ، أو يغير حالة كائن موجود. <br><br>  من الناحية الفنية ، الممثل هو برنامج بيثون.  يعمل في حاوية Docker مع بيئته. <br><br>  الممثل لا يعرف عن وجود جهات فاعلة أخرى.  الكيان الوحيد الذي يعرف أنه بالإضافة إلى الفاعل موجود كامل خط أنابيب ككل - وهذا هو السبورة.  يراقب حالة تنفيذ جميع الجهات الفاعلة داخل النظام ويحافظ على الحالة الراهنة ، والتي يتم التعبير عنها في المراقبة كصورة لعملية الأعمال بأكملها ككل. <br><br>  ممثل :: Init يولد العديد من حاويات دوكر.  بالإضافة إلى ذلك ، يمكن للجهات الفاعلة العمل مع تخزين البيانات. <br><br>  يحتوي النظام نفسه على مكون " <strong>تخزين الأحداث"</strong> .  كما تخزين الأحداث نستخدم <strong>ClickHouse</strong> .  مهمتها بسيطة: يتم تخزين جميع المعلومات المتبادلة بين الممثل من خلال كافكا في ClickHouse.  يتم ذلك <strong>لمزيد من التدقيق</strong> .  هذا هو سجل تشغيل خط الأنابيب. <br><br>  يمكن أيضًا تطوير الممثلين <strong>لرحلة العملاء</strong> .  يرون تغييرات في سجل خط الأنابيب ، ويمكنهم على الفور إعادة إنشاء النوافذ اللازمة للنماذج أو المكونات للعمل مع القواعد ، بالفعل داخل خط الأنابيب.  هذه عملية مستمرة لتغيير البيانات. <br><br>  المراقبة مبنية بشكل <strong>أساسي</strong> على <strong>بروميثيوس</strong> .  يحصل الممثل على واجهة برمجة تطبيقات أساسية ، وفي وضع مغلق ، ولكنه شفاف بما يكفي للمطور ، يرسل رسائل مع المقاييس إلى كافكا.  تقوم بروميثيوس بقراءة المقاييس من كافكا وحفظها في مستودعها. <br><br>  للتصور نستخدم <strong>Grafana</strong> . <br><br><h3 style=";text-align:right;direction:rtl">  نقطتين للتكامل </h3><br>  الأول هو نقطة التكامل مع مصادر البيانات التي تمر عبر ETLs إلى مستودع البيانات.  النقطة الثانية للتكامل عندما يتم استخدام خدمة بالفعل من قبل مستهلك البيانات ، على سبيل المثال ، خدمة تسجيل. <br><br>  أخذنا <strong>اباتشي ServiceMix.</strong>  من التجربة ، تكون نقاط التكامل هذه من نفس النوع مع نفس النوع من البروتوكولات: SOAP ، RESTful ، وقوائم الانتظار الأقل تكرارًا.  في كل مرة لا نريد تطوير مُنشئنا أو خدمتنا من أجل إنشاء خدمة SOAP التالية.  لذلك ، نأخذ ServiceMix ، صفه في SDL ، حيث يتم إنشاء نماذج البيانات لهذه الخدمة والأساليب الموجودة فيها.  ثم ندفع من خلال جهاز التوجيه داخل ServiceMix ، ويقوم بإنشاء الخدمة نفسها. <br><br>  من أنفسنا ، أضفنا تحويل صعبة متزامن غير متزامن.  جميع الطلبات التي تعيش داخل النظام غير متزامنة وتذهب عبر Message Bus. <br><br>  معظم خدمات التسجيل متزامنة.  تأتي طلبات ServiceMix عبر REST أو SOAP.  في هذه المرحلة ، يمر عبر بوابتنا ، التي تحتفظ بمعرفة جلسة HTTP.  ثم يرسل رسالة إلى كافكا ، يمر عبر بعض خطوط الأنابيب ، ويتم إنشاء حل. <br><br>  ومع ذلك ، قد لا يزال هناك حل.  على سبيل المثال ، حدث شيء ما ، أو كان هناك جيش تحرير السودان صعب لاتخاذ قرار ، ومراقبو Gateway: "حسنًا ، لقد تلقيت طلبًا ، أوصلني إلى موضوع كافكا آخر ، أو لم يصلني شيء ، لكن تم تشغيل برنامج المهلة."  ثم مرة أخرى ، يذهب تحويل متزامن إلى غير متزامن ، وفي نفس جلسة HTTP ، هناك استجابة للمستهلك نتيجة العمل.  قد يكون هذا خطأ أو توقعات طبيعية. <br><br>  في هذا المكان ، بالمناسبة ، أكلنا كلبًا لا طعم له بفضل المصدر المفتوح الكبير والقوي.  استخدمنا ServiceMix من واحد من أحدث الإصدارات ، و كافكا من الإصدارات السابقة وعملت كل شيء تماما.  لقد كتبنا في هذه البوابة ، بناءً على تلك المكعبات التي كانت موجودة بالفعل في ServiceMix.  عندما خرجت النسخة الجديدة من كافكا ، استحوذنا عليها بسعادة ، لكن اتضح أن دعم الرؤوس الموجودة في الرسالة الموجودة في كافكا قد تغير.  العبارة داخل ServiceMix لم تعد قادرة على العمل معهم.  لفهم هذا ، قضينا الكثير من الوقت.  نتيجة لذلك ، قمنا ببناء بوابتنا ، والتي يمكن أن تعمل مع الإصدارات الجديدة من كافكا.  لقد كتبنا عن المشكلة إلى مطوري ServiceMix وتلقينا الإجابة: "شكرًا لك ، سنساعدك بالتأكيد في الإصدارات القادمة!" <br><br>  لذلك ، نحن مضطرون لمراقبة التحديثات وتغيير شيء بانتظام. <br><br>  <strong>البنية التحتية هي Gitlab.</strong>  نحن نستخدم كل شيء تقريبا فيه. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  مستودع الكود. </li><li style=";text-align:right;direction:rtl">  تواصل التكامل / تواصل خط أنابيب التسليم. </li><li style=";text-align:right;direction:rtl">  سجل للحفاظ على سجل حاويات دوكر. </li></ul><br><h3 style=";text-align:right;direction:rtl">  المكونات </h3><br>  لقد قمنا بتطوير 5 مكونات: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>السبورة</strong> - إدارة دورة حياة خط الأنابيب.  أين وماذا ومع ما المعلمات لتشغيل من خط الأنابيب. </li><li style=";text-align:right;direction:rtl">  يعمل <strong>مستخرج الميزات</strong> ببساطة - نعلم مستخرج الميزات أننا نحصل على مثل هذا النموذج البيانات عند الإدخال ، وحدد الحقول اللازمة من البيانات ، وقم بتعيينها على قيم معينة.  على سبيل المثال ، نحصل على تاريخ ميلاد العميل ، ونحوله إلى عصر ، ونستخدمه كميزة في نموذجنا.  مستخرج الميزات هو المسؤول عن تخصيب البيانات. </li><li style=";text-align:right;direction:rtl">  <strong>المحرك القائم على القاعدة</strong> - التحقق من البيانات وفقا للقواعد.  هذه لغة وصف بسيطة تتيح لشخص مطلع على بناء &lt;code&gt; إذا ، كتل &lt;code /&gt; أخرى لوصف قواعد التدقيق داخل النظام. </li><li style=";text-align:right;direction:rtl">  <strong>محرك التعلم الآلي</strong> - يتيح لك تشغيل المنفذ ، وتهيئة النموذج المدربين وإرساله إلى بيانات الإدخال.  في الإخراج ، يأخذ النموذج البيانات. </li><li style=";text-align:right;direction:rtl">  <strong>محرك القرار</strong> - <strong>محرك</strong> القرار ، والخروج من الرسم البياني.  بوجود سلسلة من النماذج ، على سبيل المثال ، فروع مختلفة من تقييم المقترض ، عليك أن تقرر مسألة المال في مكان ما.  يجب أن تكون مجموعة قواعد الحل بسيطة. ,     LTV- —     ,     ,  . </li></ul><br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>         .  —  ,    .  —      ,      . <br><br>   pipeline    . <br><img src="https://habrastorage.org/webt/o7/vy/dj/o7vydjrruyfittwhwzumh_gc_rq.jpeg"><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   <strong>Feature extractor</strong> :  ,        ,      . </li><li style=";text-align:right;direction:rtl"> <strong> </strong> . ,  -:  , ,       18. </li><li style=";text-align:right;direction:rtl">  <strong> .</strong>    ,    .     ,      ,        pipeline. </li><li style=";text-align:right;direction:rtl">  <strong>Decision engine</strong> .             . </li><li style=";text-align:right;direction:rtl">  <strong></strong> . </li></ul><br>      yaml.         .    ,  ,        .           yaml. <br><br>  pipeline,   ,   : feature extractor, rules, models, decision engine,    .   — <strong>      Docker-</strong> .    Registry,   Docker-. -,   ,    . ,  ,      Docker-       . <br><br><h3 style=";text-align:right;direction:rtl">  خط أنابيب </h3><br>     ,     <strong>Python</strong> —         . Feature extractor, ,   decision engine   Python. <br><br> Pipeline   <strong>yaml.</strong>      meta storage     —   <strong></strong> . <br><br>  Runtime environment   10 ,  Blackboard  ,    pipeline    10 .  ,      : , , IP-    Kafka, , .       . <br><br>     GitLab.      Ansible. ,    .           ,      50 000    Ansible  . <br><br><h2 style=";text-align:right;direction:rtl">   ? </h2><br>  GitLab  pipeline.    GitLab. CI  ,   ,  ,  .   <strong>GitLab Runner</strong> ,    Docker-  ,    pipeline.    —    Registry. <br><br><img src="https://habrastorage.org/webt/gz/dx/hr/gzdxhruymhjm2_wejqybqizdp0i.jpeg"><br><br>  Docker  ,       .   Docker-        .   CI pipeline    pipeline  -  Meta Storage,    Blackboard. <br><br> Blackboard    Meta Storage —   , , ,   -.   Docker-     , , . <br><br> -   Blackboard  Meta Storage      :   ,  Kafka,   .  ,    ,   Docker-    ,     . <br><br>  ,    Docker-,  — pipeline ! <br><br>      DigitalOcean.     AWS  Scaleway,     . <br><br>    ,        .  pipeline         . ,    . <br><br><h3 style=";text-align:right;direction:rtl">    ? </h3><br>   —   .  ,   pipeline,     real-time   . <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> 2 Feature extractor  .     1 , .. json    . </li><li style=";text-align:right;direction:rtl"> 8  — 8  ML engine.      XGBoost. </li><li style=";text-align:right;direction:rtl"> 18     RB engine (115 ).   1000     . </li><li style=";text-align:right;direction:rtl"> 1 decision engine. </li></ul><br>       200   .  2 Feature extractor, 8 , 18   1 decision engine      1,2 . <br><br><h3 style=";text-align:right;direction:rtl">  </h3><br> <strong>Discovery .</strong>  ,   -   .  ,      ,    .    .      Meta Storage. <br><br> <strong>  pipeline</strong> .    ,  <strong>BPM</strong> .        yaml      ,     ,      . <br><br> <strong>    .</strong>       Java, Scala, R.    Python,       ,     .    API   ,   pipeline      . <br><br><h2 style=";text-align:right;direction:rtl">  ما هي النتيجة؟ </h2><br>    —     .    —   .   <strong> </strong> ,      .  ,         .     —     2018 . <br><br>         ,      .    —    ,   ,    . <br><br> <strong>    ,   </strong> .     ,    ,    notebook   ,     . <br><br><blockquote style=";text-align:right;direction:rtl"> , -      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> ,           .  ,     , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">UseData Conf</a> .  ,    ,       ,   16 . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar455648/">https://habr.com/ru/post/ar455648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar455638/index.html">آلان كاي لم يخترع الأشياء</a></li>
<li><a href="../ar455640/index.html">مارفن مينسكي "آلة العاطفة": الفصل 4. "كيف ندرك الوعي"</a></li>
<li><a href="../ar455642/index.html">بنية خدمة قائمة انتظار الرسائل الموزعة في Yandex.Cloud</a></li>
<li><a href="../ar455644/index.html">نحن نستخدم البيانات في الممارسة العملية</a></li>
<li><a href="../ar455646/index.html">أسبوع الأمان 24: مصنع خلفي على هواتف أندرويد الذكية</a></li>
<li><a href="../ar455650/index.html">كيف قمنا بتدريب شبكة عصبية لتصنيف البراغي</a></li>
<li><a href="../ar455652/index.html">التعلم العميق مقابل الحس السليم: تطوير روبوت الدردشة</a></li>
<li><a href="../ar455658/index.html">Intel Core i7-2600K الأسطوري: اختبار Sandy Bridge في عام 2019 (الجزء 3)</a></li>
<li><a href="../ar455662/index.html">عرض ميكانيكي كبير مع آلية كام كما فك</a></li>
<li><a href="../ar455666/index.html">بناء المبيعات الخارجية في شركة خدمات تكنولوجيا المعلومات</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>