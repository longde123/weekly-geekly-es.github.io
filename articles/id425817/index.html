<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœï¸ â˜ğŸ» ğŸ§–ğŸ» Seret & Jatuhkan di aplikasi iOS Anda ğŸš£ğŸ¿ ğŸ‘¨ğŸ¼â€âš•ï¸ ğŸ‘¨ğŸ»â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mekanisme Drag & Drop yang berjalan di iOS 11 dan iOS 12 adalah cara untuk menyalin atau memindahkan data secara asinkronik dalam satu aplikasi dan an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seret & Jatuhkan di aplikasi iOS Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425817/"><img src="https://habrastorage.org/webt/gb/xu/dt/gbxudtvrfs8biaj5tlzkpjjjwe4.png"><br><br>  Mekanisme <code>Drag &amp; Drop</code> yang berjalan di <code>iOS 11</code> dan <code>iOS 12</code> adalah cara untuk menyalin atau memindahkan data secara asinkronik dalam satu aplikasi dan antar aplikasi yang berbeda.  Meskipun teknologi ini berusia sekitar 30 tahun, teknologi ini benar-benar menjadi "terobosan" di <code>iOS</code> karena ketika menyeret sesuatu di <code>iOS</code> , <code>multitouch</code> memungkinkan Anda berinteraksi secara bebas dengan seluruh sistem dan mengumpulkan data untuk diatur ulang dari aplikasi yang berbeda. <br><a name="habracut"></a><br>  <code>iOS</code> memungkinkan untuk menangkap beberapa elemen sekaligus.  Selain itu, mereka tidak harus berada dalam aksesibilitas yang mudah untuk seleksi: Anda dapat mengambil objek pertama, lalu pergi ke aplikasi lain dan mengambil sesuatu yang lain - semua objek akan dikumpulkan dalam "tumpukan" di bawah jari Anda.  Kemudian panggil dok universal di layar, buka aplikasi apa saja di sana dan tangkap objek ketiga, lalu buka layar dengan aplikasi berjalan dan, tanpa melepaskan objek, buang mereka ke salah satu program yang terbuka.  Kebebasan bertindak seperti itu dimungkinkan di <code>iPad</code> , di <code>iPhone</code> , cakupan <code>Drag &amp; Drop</code> di <code>iOS</code> terbatas pada kerangka kerja satu aplikasi. <br><br>  Aplikasi paling populer ( <code>Safary</code> , <code>Chrome</code> , <code>IbisPaint X</code> , <code>Mail</code> , <code>Photos</code> , <code>Files</code> , dll.) Sudah memiliki mekanisme <code>Drag &amp; Drop</code> .  Selain itu, <code>Apple</code> memberi para pengembang <code>API</code> sangat sederhana dan intuitif untuk menyematkan mekanisme <code>Drag &amp; Drop</code> di aplikasi Anda.  Mekanisme <code>Drag &amp; Drop</code> , sama seperti gerakan, bekerja di <b><font color="#0000FF">UIView</font></b> dan menggunakan konsep <b><font color="#0000FF">Interaksi</font></b> , sedikit seperti gerakan, sehingga Anda dapat memikirkan mekanisme <code>Drag &amp; Drop</code> seperti gerakan yang sangat kuat. <br><br>  Itu, serta gerakan, sangat mudah untuk diintegrasikan ke dalam aplikasi Anda.  Terutama jika aplikasi Anda menggunakan tabel <b><font color="#0000FF">UITableView</font></b> atau koleksi <b><font color="#0000FF">UICollectionView</font></b> , karena bagi mereka <code>API Drag &amp; Drop</code> ditingkatkan dan dinaikkan ke tingkat abstraksi yang lebih tinggi dalam arti bahwa <code>Collection View</code> itu sendiri membantu Anda dengan <b><font color="#0000FF">indexPath</font></b> dari elemen koleksi yang ingin Anda seret dan jatuhkan <code>Drag</code> .  Dia tahu di mana jari Anda berada dan mengartikannya sebagai <b><font color="#0000FF">indexPath</font></b> dari elemen koleksi yang Anda "seret" <code>Drag</code> saat ini, atau sebagai <b><font color="#0000FF">indexPath</font></b> dari elemen koleksi di mana Anda "menjatuhkan" <code>Drop</code> sesuatu.  Jadi <code>Collection View</code> menyediakan Anda dengan <b><font color="#0000FF">indexPath</font></b> , tetapi sebaliknya itu benar-benar <code>API Drag &amp; Drop</code> sama seperti <b><font color="#0000FF">UIView</font></b> biasa. <br><br>  Proses <code>Drag &amp; Drop</code> di <code>iOS</code> memiliki 4 fase berbeda: <br><br><h2>  Angkat </h2><br>  <b>Angkat</b> (lifting) - ini adalah saat pengguna melakukan gerakan <b><font color="#FF00FF">tekan lama</font></b> , yang menunjukkan elemen yang akan "seret dan lepas".  Pada saat ini, yang disebut " <code>lift preview</code> " yang sangat ringan dari elemen yang ditunjukkan terbentuk, dan kemudian pengguna mulai menyeret jari-jarinya. <br><br><img src="https://habrastorage.org/webt/t6/sw/tw/t6swtwdee7kasyvqq_od3ipzlxy.png" width="600" height="450"><br><br><h2>  Seret (seret dan lepas) </h2><br>  <b>Seret</b> (seret dan lepas) - ini adalah saat pengguna memindahkan objek di permukaan layar.  Selama fase ini, " <code>lift preview</code> " untuk objek ini dapat dimodifikasi (tanda tambah "+" berwarna hijau atau tanda lainnya muncul) ... <br><br><img src="https://habrastorage.org/webt/07/yo/4x/07yo4x4yua4zelwculog6eng9aw.png" width="600" height="450"><br><br>  ... beberapa interaksi dengan sistem juga diperbolehkan: Anda dapat mengklik pada beberapa objek lain dan menambahkannya ke sesi "seret dan lepas" saat ini: <br><br><img src="https://habrastorage.org/webt/yb/bx/wi/ybbxwiqe6-226ipfjmkzmpymkva.png" width="600" height="450"><br><br><h2>  Jatuhkan </h2><br>  <b>Drop</b> terjadi ketika pengguna mengangkat jari.  Pada saat ini, dua hal dapat terjadi: objek <code>Drag</code> akan dihancurkan, atau objek <code>Drop</code> akan "jatuh" di tujuan. <br><br><img src="https://habrastorage.org/webt/iv/b1/4z/ivb14zogie89jntnkfsxmuubvd0.png" width="600" height="450"><br><br><h2>  Transfer Data </h2><br>  Jika proses Seret " <b>seret</b> dan lepas" tidak dibatalkan dan setel " <b>Drop</b> " terjadi, maka <b>Transfer Data</b> (transfer data) terjadi, saat "titik drop" meminta data dari "sumber", dan transfer data asinkron terjadi. <br><br>  Dalam tutorial ini, kami akan menunjukkan kepada Anda cara <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengintegrasikan</a> mekanisme <code>Drag &amp; Drop</code> ke dalam aplikasi <code>iOS</code> Anda dengan mudah menggunakan aplikasi demo Galeri Gambar, yang diambil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari kursus pekerjaan rumah Stanford CS193P</a> . <br>  Kami akan menganugerahkan <code>Collection View</code> kemampuan untuk mengisi diri kita sendiri dengan gambar-gambar DI LUAR, serta mengatur kembali elemen-elemen DALAM dengan menggunakan mekanisme <code>Drag &amp; Drop</code> .  Selain itu, mekanisme ini akan digunakan untuk membuang elemen yang tidak perlu dari <code>Collection View</code> ke dalam "tong sampah", yang merupakan <b><font color="#0000FF">UIView</font></b> normal dan diwakili oleh tombol pada panel navigasi.  Kami juga dapat berbagi gambar yang dikumpulkan di Galeri kami dengan aplikasi lain menggunakan mekanisme <code>Drag &amp; Drop</code> , misalnya, <code>Notes</code> atau <code>Notes</code> atau <code>Mail</code> atau perpustakaan foto ( <code>Photo</code> ). <br><br>  Tetapi sebelum fokus pada implementasi mekanisme <code>Drag &amp; Drop</code> dalam aplikasi demo "Galeri Gambar", saya akan membahas komponen utamanya secara singkat. <br><br><h1>  Fitur dari aplikasi demo "Galeri Gambar" </h1><br>  Antarmuka pengguna ( <code>UI</code> ) aplikasi Galeri Gambar sangat sederhana.  Ini adalah "cuplikan layar" dari <code>Image Gallery Collection View Controller</code> dimasukkan ke <code>Navigation Controller</code> : <br><br><img src="https://habrastorage.org/webt/rz/gl/o6/rzglo69owhktzl8vcstcosf5rdi.png"><br><br>  Bagian utama dari aplikasi tentu saja adalah <code>Image Gallery Collection View Controller</code> , yang didukung oleh kelas <b><font color="#0000FF">ImageGalleryCollectionViewController</font></b> dengan Model Galeri Gambar sebagai variabel <b><font color="#0000FF">var imageGallery = ImageGallery ()</font></b> : <br><br><img src="https://habrastorage.org/webt/na/f2/1r/naf21rpv6pxjnht1bk02mowhgoi.png"><br><br>  Model diwakili oleh struktur <b><font color="#0000FF">ImageGallery struct</font></b> yang berisi larik gambar <b><font color="#0000FF">gambar</font></b> , di mana setiap gambar dijelaskan oleh struktur <b><font color="#0000FF">ImageModel struct</font></b> yang berisi <code>URL</code> <b><font color="#0000FF">url</font></b> lokasi gambar (kami tidak akan menyimpan gambar itu sendiri) dan rasio aspeknya: <br><br><img src="https://habrastorage.org/webt/bp/0b/6_/bp0b6_kh3bgocgc4zlnjrocmk2q.png"><br><br>  <b><font color="#0000FF">ImageGalleryCollectionViewController</font></b> kami mengimplementasikan protokol <b><font color="#0000FF">DataSource</font></b> : <br><br><img src="https://habrastorage.org/webt/ka/vr/gj/kavrgjqaraoqv4sva-aqhffwvhu.png"><br><br>  Sel khusus dalam koleksi sel berisi gambar <b><font color="#0000FF">imageView: UIImageView!</font></b>  dan indikator aktivitas <b><font color="#0000FF">pemintal: UIActivityIndicatorView!</font></b>  dan didukung oleh <code>subclass</code> kustom <b><font color="#0000FF">ImageCollectionViewCell dari</font></b> kelas <b><font color="#0000FF">UICollectionViewCell</font></b> : <br><br><img src="https://habrastorage.org/webt/cu/hs/1l/cuhs1ljdvbara4u2_ndq3y_sfxw.png"><br><br>  <code>Public API</code> dari kelas <b><font color="#0000FF">ImageCollectionViewCell</font></b> adalah <b><font color="#0000FF">URL</font></b> gambar <b><font color="#0000FF">imageURL</font></b> .  Segera setelah kami menginstalnya, <code>UI</code> kami diperbarui, yaitu, data untuk gambar dipilih secara tidak sinkron pada <b><font color="#0000FF">gambar iniURL</font></b> dan ditampilkan dalam sel.  Ketika data sedang diambil dari jaringan, indikator aktivitas <b><font color="#0000FF">pemintal</font></b> bekerja, menunjukkan bahwa kita sedang dalam proses mengambil data. <br><br>  Saya menggunakan antrian global <b><font color="#0000FF">(qos: .userInitiated)</font></b> dengan argumen kualitas layanan <b><font color="#0000FF">qos</font></b> untuk mendapatkan data pada <code>URL</code> diberikan, yang diatur ke <b><font color="#0000FF">.userInitiated</font></b> , karena saya memilih data berdasarkan permintaan pengguna: <br><br><img src="https://habrastorage.org/webt/0q/aq/2-/0qaq2-uakbn1zou8ilh7pcvysxy.png"><br><br>  Setiap kali Anda menggunakan variabel Anda sendiri di dalam penutupan, dalam kasus kami itu adalah <b><font color="#0000FF">imageView</font></b> dan <b><font color="#0000FF">imageURL</font></b> , kompiler memaksa Anda untuk menempatkan <b><font color="#0000FF">diri</font></b> di depan mereka <b><font color="#0000FF">.</font></b>  sehingga Anda bertanya pada diri sendiri: "Apakah ada" tautan siklik memori "?"  Kami tidak memiliki " <code>memory cycle</code> " eksplisit di sini, karena <b><font color="#0000FF">diri</font></b> sendiri tidak memiliki pointer ke penutupan ini. <br><br>  Namun, dalam kasus multithreading, Anda harus ingat bahwa <b><font color="#0000FF">sel</font></b> - <b><font color="#0000FF">sel</font></b> dalam <code>Collection View</code> dapat digunakan kembali berkat metode <b><font color="#0000FF">dequeueReusableCell</font></b> .  Setiap kali sel (baru atau digunakan kembali) muncul di layar, gambar diunduh dari jaringan secara tidak sinkron (saat ini " <b><font color="#0000FF">pemintal</font></b> " indikator aktivitas <b><font color="#0000FF">pemintalan</font></b> sedang berputar). <br><br>  Segera setelah unduhan selesai dan gambar diterima, <code>UI</code> sel koleksi ini diperbarui.  Tapi kami tidak menunggu gambar dimuat, kami terus menggulung koleksi dan sel koleksi yang kami tandai meninggalkan layar tanpa memperbarui <code>UI</code> kami.  Namun, gambar baru akan muncul di bawah dan sel yang sama yang telah meninggalkan layar akan digunakan kembali, tetapi untuk gambar lain, yang dapat dengan cepat memuat dan memperbarui <code>UI</code> .  Pada saat ini, pemuatan gambar yang dimulai sebelumnya dalam sel ini akan kembali dan layar akan diperbarui, yang akan mengakibatkan hasil yang salah.  Ini karena kami menjalankan berbagai hal yang bekerja dengan jaringan di utas yang berbeda.  Mereka kembali pada waktu yang berbeda. <br><br>  Bagaimana kita dapat memperbaiki situasi? <br>  Dalam kerangka mekanisme <b><font color="#0000FF">GCD</font></b> yang kami gunakan, kami tidak dapat membatalkan unduhan gambar sel yang meninggalkan layar, tetapi kami dapat, ketika data <b><font color="#0000FF">imageData</font></b> kami <b><font color="#0000FF">berasal</font></b> dari jaringan, periksa <b><font color="#0000FF">url</font></b> <code>URL</code> yang menyebabkan pemuatan data ini dan bandingkan dengan yang diinginkan pengguna. sel ini saat ini, mis. <b><font color="#0000FF">imageURL</font></b> .  Jika tidak cocok, maka kami tidak akan memperbarui sel <code>UI</code> dan menunggu data gambar yang kami butuhkan: <br><br><img src="https://habrastorage.org/webt/01/xl/-v/01xl-vqsde3rlqyus1f7tksacja.png"><br><br>  Baris kode <b><font color="#0000FF">url yang</font></b> tampaknya tidak masuk akal ini <b><font color="#0000FF">== self.imageURL</font></b> membuat semuanya berfungsi dengan benar di lingkungan multi-utas yang memerlukan imajinasi non-standar.  Faktanya adalah bahwa beberapa hal dalam pemrograman multi-threaded terjadi dalam urutan yang berbeda dari kode yang ditulis. <br><br>  Jika tidak mungkin untuk memilih data gambar, gambar dihasilkan dengan pesan kesalahan dalam bentuk string "Kesalahan" dan emoji dengan "kerutan".  Hanya ruang kosong di <code>Collection View</code> kami yang dapat sedikit membingungkan pengguna: <br><br><img src="https://habrastorage.org/webt/7m/zh/dt/7mzhdt1eo0tedkkrolp6osiidhu.png"><br><br>  Kami tidak ingin gambar dengan pesan kesalahan mengulangi <b><font color="#0000FF">aspekRasio</font></b> gambar kesalahan ini, karena dalam hal ini teks bersama dengan emoji akan ditarik atau dikompresi.  Kami ingin itu menjadi netral - kotak, yaitu, ia akan memiliki aspek rasio aspek mendekati 1,0. <br><br><img src="https://habrastorage.org/webt/7b/rj/ve/7brjvesx81juxpsgnkevsnvge_u.png"><br><br>  Kami harus memberi tahu <code>Controller</code> kami tentang keinginan ini sehingga ia mengoreksi aspek rasio aspek untuk <b><font color="#0000FF">indexPath yang</font></b> sesuai di Model <b><font color="#0000FF">imageGallery-</font></b> nya.  Ini adalah tugas yang menarik, ada banyak cara untuk menyelesaikannya, dan kami akan memilih yang termudah dari mereka - menggunakan <b><font color="#0000FF">Opsional</font></b> penutupan <b><font color="#0000FF">var closAspectRatio: (() -&gt; Void)?</font></b>  .  Dapat menyamai <b><font color="#0000FF">nol</font></b> dan tidak perlu diinstal jika ini tidak perlu: <br><br><img src="https://habrastorage.org/webt/8v/5q/wy/8v5qwyzl2_-dju1qfotj7i9nem4.png"><br><br>  Saat memanggil closure <b><font color="#0000FF">changeAspectRatio? ()</font></b> Dalam kasus pengambilan data yang salah, saya menggunakan rantai <b><font color="#0000FF">opsional</font></b> .  Sekarang siapa pun yang tertarik pada beberapa jenis pengaturan saat menerima gambar yang salah dapat mengatur penutupan ini untuk sesuatu yang spesifik.  Dan inilah yang kami lakukan di <code>Controller</code> kami dalam metode <b><font color="#0000FF">cellForItemAt</font></b> : <br><br><img src="https://habrastorage.org/webt/uv/ee/mi/uveemimakh506que35eaasanjbi.png"><br><br>  Detail dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Untuk menampilkan gambar dengan <b><font color="#0000FF">aspekRasio yang</font></b> benar, metode <b><font color="#0000FF">sizeForItemAt</font></b> dari delegasi <b><font color="#0000FF">UICollectionViewDelegateFlowLayout</font></b> <b><font color="#0000FF">digunakan</font></b> : <br><br><img src="https://habrastorage.org/webt/ys/v7/nz/ysv7nzh7rus7hnowtqyocbevwai.png"><br><br>  Selain <code>Collection View</code> gambar <code>Collection View</code> , di <code>UI</code> kami <code>UI</code> kami menempatkan <code>Bar Button</code> di panel navigasi dengan gambar <b><font color="#0000FF">GarbageView</font></b> khusus yang berisi "tong sampah" sebagai <b><font color="#0000FF">subview</font></b> : <br><br><img src="https://habrastorage.org/webt/1h/eo/uu/1heouudwoicj6qyjrckscada9ug.png"><br><br>  Pada gambar ini, warna latar belakang untuk <b><font color="#0000FF">GarbageView</font></b> sendiri dan tombol <b><font color="#0000FF">UIButton</font></b> dengan gambar "tempat sampah" (sebenarnya ada latar belakang transparan) secara khusus diubah sehingga Anda melihat bahwa pengguna yang "membuang" gambar Galeri ke "tempat sampah" lebih banyak ruang untuk bermanuver ketika "menjatuhkan" <b>Drop</b> daripada hanya ikon tempat sampah. <br>  Kelas <b><font color="#0000FF">GarbageView memiliki</font></b> dua inisialisasi dan keduanya menggunakan metode <b><font color="#0000FF">setup ()</font></b> : <br><br><img src="https://habrastorage.org/webt/xj/_t/es/xj_tesvqnjlk9yxbxnrvrvc_6w8.png"><br><br>  Dalam metode <b><font color="#0000FF">setup ()</font></b> , saya juga menambahkan <b><font color="#0000FF">myButton</font></b> sebagai <b>subview</b> dengan gambar "tong sampah" yang diambil dari <code>Bar Button</code> standar <code>Bar Button</code> : <br><br><img src="https://habrastorage.org/webt/if/s5/3c/ifs53cvfeaggqwtrlshju1g5qwc.png"><br><br>  Saya menetapkan latar belakang transparan untuk <b><font color="#0000FF">GarbageView</font></b> : <br><br><img src="https://habrastorage.org/webt/g_/9y/af/g_9yafe1tu_pz4vx6_wan3tarv0.png"><br><br>  Ukuran tong sampah dan posisinya akan ditentukan dalam metode <b><font color="#0000FF">layoutSubviews ()</font></b> dari kelas <b><font color="#0000FF">UIView</font></b> , tergantung pada <b><font color="#0000FF">batasan</font></b> <b><font color="#0000FF">UIView yang</font></b> diberikan: <br><br><img src="https://habrastorage.org/webt/zf/ll/jb/zflljbnvhfenkfx0o2ge8iy2q2k.png"><br><br>  Ini adalah versi awal dari aplikasi demo "Galeri Gambar", ini terletak di <b><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a></code></b> di folder <u><code>ImageGallery_beginning</code></u> .  Jika Anda menjalankan versi aplikasi "Galeri Gambar" ini, Anda akan melihat hasil aplikasi yang bekerja pada data uji, yang kemudian akan kami hapus dan akan mengisi "Galeri Gambar" secara eksklusif di luar: <br><br><img src="https://habrastorage.org/webt/w9/jn/y4/w9jny4yxwtmeemq8cqkqhbirvoy.png"><br><br>  Rencana untuk menerapkan mekanisme <code>Drag &amp; Drop</code> di aplikasi kami adalah sebagai berikut: <br><br><ol><li>  pertama, kita akan memberkahi <code>Collection View</code> kita <code>Collection View</code> kemampuan untuk "menyeret" <code>Drag</code> DARI itu gambar <b><font color="#0000FF">UIImage</font></b> baik secara eksternal maupun lokal, </li><li>  maka kami akan mengajarkan koleksi gambar <code>Collection View</code> untuk menerima "seret" <code>Drag</code> eksternal atau lokal dari <b><font color="#0000FF">UIImage</font></b> , </li><li>  kami juga akan mengajarkan <b><font color="#0000FF">GarbageView</font></b> kami dengan tombol tempat sampah untuk menerima gambar <b><font color="#0000FF">UIImage yang</font></b> diseret dari <code>Collection View</code> lokal dan menghapusnya dari <code>Collection View</code> </li></ol><br><br>  Jika Anda pergi ke akhir tutorial ini dan menyelesaikan semua perubahan kode yang diperlukan, Anda akan menerima versi final dari aplikasi demo "Galeri Gambar", di mana mekanisme <code>Drag &amp; Drop</code> telah dilaksanakan.  Itu terletak di <b><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a></code></b> di folder <u><code>ImageGallery_finished</code></u> . <br><br>  Kinerja mekanisme <code>Drag &amp; Drop</code> di <code>Collection View</code> Anda disediakan oleh dua delegasi baru. <br>  Metode <u>delegasi pertama, <b><font color="#0000FF">dragDelegate</font></b> ,</u> dikonfigurasikan untuk menginisialisasi dan mengkustomisasi Drag dan Drop <code>Drags</code> . <br>  Metode delegasi kedua, <b><font color="#0000FF">dropDelegate</font></b> , selesaikan drag dan drop <code>Drags</code> dan, pada dasarnya, memberikan pengaturan <code>Data transfer</code> data dan animasi khusus ketika <code>Drop</code> diatur ulang, serta hal-hal serupa lainnya. <br><br>  Penting untuk dicatat bahwa kedua protokol ini sepenuhnya independen.  Anda dapat menggunakan satu atau protokol lain jika Anda hanya perlu "menyeret" <code>Drag</code> atau hanya "menjatuhkan" <code>Drop</code> , tetapi Anda dapat menggunakan kedua protokol sekaligus dan <code>Drag</code> dan jatuhkan <code>Drag</code> dan "jatuhkan" <code>Drop</code> , yang membuka fungsionalitas tambahan <code>Drag &amp; Drop</code> mekanisme untuk menyusun ulang item di <code>Collection View</code> Anda. <br><br><h1>  Seret dan Jatuhkan Elemen <code>Drag</code> DARI <code>Collection View</code> </h1><br>  Menerapkan protokol <code>Drag</code> sangat sederhana, dan hal pertama yang harus selalu Anda lakukan adalah mengatur diri <b><font color="#0000FF">sendiri</font></b> sebagai delegasi <b><font color="#0000FF">dragDelegate</font></b> : <br><br><img src="https://habrastorage.org/webt/mt/jw/dq/mtjwdqjahnvyzwjd0hz9cra47mg.png"><br><br>  Dan, tentu saja, di bagian paling atas kelas <b><font color="#0000FF">ImageGalleryCollectionViewController,</font></b> Anda harus mengatakan "Ya," kami menerapkan protokol <b><font color="#0000FF">UICollectionViewDragDelegate</font></b> : <br><br><img src="https://habrastorage.org/webt/ie/ue/xv/ieuexvbtxfan-uouzv4cvxpjw20.png"><br><br>  Segera setelah kami melakukan ini, kompiler mulai â€œmengeluhâ€, kami klik pada lingkaran merah dan kami ditanya: â€œApakah Anda ingin menambahkan metode yang diperlukan dari protokol <b><font color="#0000FF">UICollectionViewDragDelegate</font></b> ?â€ <br>  Saya menjawab: "Tentu saja saya mau!"  dan klik tombol <code>Fix</code> : <br><br><img src="https://habrastorage.org/webt/6d/24/it/6d24itltj_buh2uwe3fbgkh8my8.png"><br><br>  Satu-satunya metode yang diperlukan dari protokol <b><font color="#0000FF">UICollectionViewDragDelegate</font></b> adalah metode <b><font color="#0000FF">itemsForBeginning</font></b> , yang akan memberi tahu sistem <code>Drag</code> kita â€œdrag and dropâ€.  Metode <b><font color="#0000FF">itemsForBeginning</font></b> dipanggil ketika pengguna mulai "menyeret" ( <code>Dragging</code> ) sel di dalam <b><font color="#0000FF">sel</font></b> koleksi. <br><br>  Perhatikan bahwa dalam metode ini, <code>Collection View</code> telah menambahkan <b><font color="#0000FF">indexPath</font></b> .  Ini akan memberi tahu kita elemen koleksi mana, <b><font color="#0000FF">indexPath</font></b> mana, yang akan kita â€œdrag and dropâ€.  Ini benar-benar sangat nyaman bagi kami, karena itu adalah aplikasi yang bertanggung jawab untuk menggunakan argumen <b><font color="#0000FF">sesi</font></b> dan <b><font color="#0000FF">indexPath</font></b> untuk <b><font color="#0000FF">mencari</font></b> tahu bagaimana menangani drag dan drop <code>Drag</code> . <br><br>  Jika array <b><font color="#0000FF">[UIDragItems] dari elemen</font></b> " <b><font color="#0000FF">draggable</font></b> " dikembalikan, "drag" dari <code>Drag</code> diinisialisasi, jika array kosong <b><font color="#0000FF">[]</font></b> dikembalikan, "drag" dari <code>Drag</code> diabaikan. <br><br>  Saya akan membuat fungsi <b><font color="#0000FF">dragItems (at: indexPath)</font></b> <b><font color="#0000FF">pribadi</font></b> kecil dengan argumen <b><font color="#0000FF">indexPath</font></b> .  Ia mengembalikan array <b><font color="#0000FF">[UIDragItem] yang</font></b> kita <b><font color="#0000FF">butuhkan</font></b> . <br><br><img src="https://habrastorage.org/webt/_y/iv/86/_yiv869sqaamn_ytg22fg89iez0.png"><br><br>  Seperti apa <b><font color="#0000FF">tampilan UIDragItem</font></b> drag-and-drop? <br>  Dia hanya memiliki satu hal yang sangat PENTING yang disebut <b><font color="#0000FF">itemProvider</font></b> .  <b><font color="#0000FF">itemProvider</font></b> hanyalah sesuatu yang dapat menyediakan data yang akan diseret. <br><br>  Dan Anda berhak bertanya: "Bagaimana dengan" menyeret dan menjatuhkan "elemen <b><font color="#0000FF">UIDragItem</font></b> yang tidak memiliki data?"  Item yang ingin Anda seret mungkin tidak memiliki data, misalnya, karena membuat data ini adalah operasi yang mahal.  Ini mungkin gambar <b><font color="#0000FF">gambar</font></b> atau sesuatu yang memerlukan pengunduhan data dari Internet.  Hebatnya adalah bahwa operasi <code>Drag &amp; Drop</code> benar-benar tidak sinkron.  Saat Anda mulai menyeret dan menjatuhkan <code>Drag</code> , itu benar-benar objek yang sangat ringan ( <code>lift preview</code> ), Anda seret ke mana-mana dan tidak ada yang terjadi selama "seret" ini.  Tapi begitu Anda "menjatuhkan" <code>Drop</code> suatu tempat objek Anda, kemudian, menjadi <b><font color="#0000FF">itemProvider</font></b> , itu benar-benar harus menyediakan objek "diseret" dan "dilempar" dengan data nyata, bahkan jika itu membutuhkan waktu tertentu. <br><br>  Untungnya, ada banyak <b><font color="#0000FF">itemProvider bawaan</font></b> .  Ini adalah kelas yang sudah ada di <code>iOS</code> dan yang merupakan <b><font color="#0000FF">itemPoviders</font></b> , seperti, misalnya, <code>NSString</code> , yang memungkinkan Anda untuk menarik dan melepas teks tanpa font.  Tentu saja, ini adalah gambar <b><font color="#0000FF">UIImage</font></b> .  Anda dapat memilih dan seret dan letakkan <b><font color="#0000FF">seluruh</font></b> gambar <b><font color="#0000FF">UIImages</font></b> .  Kelas <b><font color="#0000FF">NSURL</font></b> , yang benar-benar luar biasa.  Anda dapat pergi ke halaman <code>Web</code> , pilih <code>URL</code> dan â€œjatuhkanâ€ di mana pun Anda inginkan.  Ini bisa berupa tautan ke artikel atau <code>URL</code> untuk gambar, karena akan ada di demo kami.  Ini adalah kelas warna dari <b><font color="#0000FF">UIColor</font></b> , <b><font color="#0000FF">elemen</font></b> peta <b><font color="#0000FF">MKMapItem</font></b> , kontak <b><font color="#0000FF">CNC</font></b> dari buku alamat, Anda dapat memilih dan menyeret banyak hal.  Semuanya adalah <b><font color="#0000FF">itemProviders</font></b> . <br><br>  Kita akan "drag and drop" gambar <b><font color="#0000FF">UIImage</font></b> .  Itu terletak di sel sel <code>Collection View</code> dengan <b><font color="#0000FF">indexPath</font></b> , yang membantu saya memilih sel <b><font color="#0000FF">sel</font></b> , dapatkan <code>Outlet</code> <b><font color="#0000FF">imageView</font></b> dari sana dan dapatkan gambar <b><font color="#0000FF">gambarnya</font></b> . <br><br>  Mari ungkapkan ide ini dengan beberapa baris kode. <br>  Pertama, saya meminta <code>Collection View</code> saya tentang <b><font color="#0000FF">sel</font></b> untuk elemen <b><font color="#0000FF">item</font></b> yang terkait dengan <b><font color="#0000FF">indexPath</font></b> ini. <br><br><img src="https://habrastorage.org/webt/ho/zi/gp/hozigp41-y0-3cfa525umwojyu4.png"><br><br>  Metode <b><font color="#0000FF">cellForItem (at: IndexPath)</font></b> untuk <code>Collection View</code> hanya berfungsi untuk sel yang terlihat, tetapi, tentu saja, itu akan berfungsi dalam kasus kami, karena saya â€œdrag and dropâ€ elemen koleksi <code>Drag</code> di layar dan itu terlihat. <br><br>  Jadi, saya mendapat sel "yang bisa diseret". <br>  Selanjutnya, saya menggunakan operator <b><font color="#0000FF">as?</font></b>  ke sel ini sehingga memiliki JENIS <code>subclass</code> kustom saya.  Dan jika ini berhasil, maka saya mendapatkan <code>Outlet</code> <b><font color="#0000FF">imageView</font></b> , dari mana saya mengambil gambar <b><font color="#0000FF">gambarnya</font></b> .  Saya baru saja "menangkap" gambar <b><font color="#0000FF">gambar</font></b> untuk <b><font color="#0000FF">indexPath</font></b> ini. <br><br>  Sekarang saya memiliki gambar <b><font color="#0000FF">gambar</font></b> , yang harus saya lakukan adalah membuat salah satu <b><font color="#0000FF">UIDragItems</font></b> ini menggunakan gambar <b><font color="#0000FF">gambar yang</font></b> dihasilkan sebagai <b><font color="#0000FF">itemProvider</font></b> , yaitu hal yang menyediakan data kepada kami. <br>  Saya bisa membuat <b><font color="#0000FF">dragItem</font></b> menggunakan konstruktor <b><font color="#0000FF">UIDragItem</font></b> , yang mengambil <b><font color="#0000FF">itemProvider</font></b> sebagai argumen: <br><br><img src="https://habrastorage.org/webt/to/zb/gt/tozbgtxocfrgoaqofvn9jgf9yeo.png"><br><br>  Kemudian kami membuat <b><font color="#0000FF">itemProvider</font></b> untuk gambar <b><font color="#0000FF">gambar</font></b> juga menggunakan konstruktor <b><font color="#0000FF">NSItemProvider</font></b> .  Ada beberapa konstruktor untuk <b><font color="#0000FF">NSItemProvider</font></b> , tetapi di antara mereka ada satu yang sangat bagus - <b><font color="#0000FF">NSItemProvider (objek: NSItemProviderWriting)</font></b> : <br><br><img src="https://habrastorage.org/webt/ey/21/cq/ey21cq0iq5riml7pfrye4gcnmi8.png"><br><br>  Anda cukup memberikan objek <b><font color="#0000FF">objek ke</font></b> konstruktor <b><font color="#0000FF">NSItemProvider</font></b> ini, dan ia tahu cara membuat <b><font color="#0000FF">itemProvider</font></b> darinya.  Sebagai objek seperti itu <b><font color="#0000FF">,</font></b> saya memberikan gambar gambar <b><font color="#0000FF">gambar</font></b> yang saya terima dari sel <b><font color="#0000FF">sel</font></b> dan mendapatkan <b><font color="#0000FF">itemProvider</font></b> untuk <b><font color="#0000FF">UIImage</font></b> . <br>  Dan itu saja.  Kami membuat <b><font color="#0000FF">dragItem</font></b> dan mengembalikannya sebagai array yang memiliki satu elemen. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi sebelum aku kembali </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aku akan melakukan satu hal lagi, yaitu, untuk mengatur variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sama dengan gambar yang dihasilkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/sh/h0/cz/shh0czt4sxjd7ienvsl2slz8yju.png"><br><br>  Apa artinya ini? <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda melakukan "seret dan lepas" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secara lokal, yaitu di dalam aplikasi Anda, maka Anda tidak perlu melewati semua kode ini yang terkait dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , melalui pengambilan data yang tidak sinkron. Anda tidak perlu melakukan ini, Anda hanya perlu mengambil </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan menggunakannya. Ini adalah semacam "korsleting" dengan "drag and drop" lokal </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode yang kami tulis akan berfungsi ketika "menyeret" di </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">luar koleksi kami </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke aplikasi lain, tetapi jika kami "menyeret" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secara lokal, kami dapat menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selanjutnya, saya mengembalikan array dari satu elemen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Omong-omong, jika karena alasan tertentu saya tidak bisa mendapatkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk sel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel ini</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka saya mengembalikan array kosong </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ini berarti bahwa "seret dan lepas" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibatalkan. </font></font><br><br><img src="https://habrastorage.org/webt/4b/uk/o3/4buko3fve2swk7wr7d_oy5sflma.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain objek lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda dapat mengingat konteks lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk kami </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam kasus kami ini akan menjadi koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan hal ini berguna untuk kami setelah itu: </font></font><br><br><img src="https://habrastorage.org/webt/o_/gi/tk/o_gitkbwnnbcevnxwcwm6obckwk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memiliki "drag and drop" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Anda dapat menambahkan item </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ini "drag and drop", hanya melakukan gerakan </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tap</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada mereka. Hasilnya, Anda dapat menarik</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banyak item sekaligus. Dan ini mudah diimplementasikan dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metode</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delegasi lain </font><font style="vertical-align: inherit;">, </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UICollectionViewDragDelegate</font></font></b><font style="vertical-align: inherit;"> , sangat mirip dengan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForeginning</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , metode bernama </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForAddingTo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForAddingTo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terlihat persis sama dengan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForeginning</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan mengembalikan hal yang sama persis, karena itu juga memberi kita </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath tentang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apa yang "direkam" oleh pengguna selama proses "seret </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">lepas" </font><font style="vertical-align: inherit;">, dan saya hanya perlu mendapatkan gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari sel ke yang "direkam" oleh pengguna, dan mengembalikannya. </font></font><br><br><img src="https://habrastorage.org/webt/u-/hc/9d/u-hc9dnk3001qhkra-et6oycphi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kembalikan array kosong </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForAddingTo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengarah pada fakta bahwa gerakan </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tap</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan ditafsirkan dengan cara biasa, yaitu, sebagai pilihan sel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel ini</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan hanya itu yang kita butuhkan untuk drag and drop </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami meluncurkan aplikasi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya memilih gambar "Venice", tahan sebentar dan mulai bergerak ... </font></font><br><br><img src="https://habrastorage.org/webt/p7/ne/9z/p7ne9zdwnirsf2uxjogvflrqwao.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan kita benar-benar dapat menyeret gambar ini ke dalam aplikasi </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seperti yang Anda lihat tanda tambah hijau "+" di sudut kiri atas gambar "draggable". Saya dapat melakukan gerakan </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tap</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada gambar Artika lain dari koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/cg/sj/om/cgsjomxtwxyzqxg-wxvqxz4huqi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan sekarang kita dapat memasukkan dua gambar ke dalam aplikasi </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/bk/xk/ud/bkxkud6ggdorw2d1yayjmatnsf4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena </font></font><code>Photos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mekanisme sudah ada di </font><font style="vertical-align: inherit;">dalam aplikasi</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maka semuanya bekerja dengan baik dan itu keren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, "menyeret" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan "membuang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar Galeri ke aplikasi lain </font><font style="vertical-align: inherit;">berfungsi untuk saya </font><font style="vertical-align: inherit;">, saya tidak perlu berbuat banyak dalam aplikasi saya, kecuali untuk memberikan gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[UIDragItem]</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini adalah salah satu dari banyak fitur hebat mekanisme </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sangat mudah untuk membuatnya bekerja di kedua arah.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setel Ulang </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar Ke Koleksi</font></font><code>Collection View</code> </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita perlu membuat </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagian untuk koleksi saya </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sehingga kita dapat "membuang </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" gambar "yang diseret" di dalam koleksi ini. Gambar "dapat diseret" dapat "datang" dari LUAR, atau langsung DI DALAM koleksi ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk melakukan ini, kita melakukan hal yang sama dilakukan untuk mendelegasikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yaitu membuat diri kita, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mendelegasikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDidLoad</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/5q/wv/mf/5qwvmfjuyh74sfxzwcw7_0gikec.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekali lagi, kita harus mendaki ke puncak kelas kami </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan memverifikasi protokol implementasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/wc/ww/7p/wcww7pgfia3xxwe63teews1e9de.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segera setelah kami menambahkan protokol baru kami, kompiler lagi mulai "mengeluh" bahwa kami tidak mengimplementasikan protokol ini. Kami mengklik tombol </font></font><code>Fix</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan metode yang diperlukan dari protokol ini muncul di depan kami. Dalam hal ini, kami diberitahu bahwa kami harus menerapkan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/ll/9t/k4/ll9tk4goht7nfa-gnifnq8iaoto.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami harus melakukan ini, jika tidak â€œresetâ€ tidak akan terjadi </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sebenarnya, saya akan mengimplementasikan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terakhir, karena ada beberapa </font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metode </font><font style="vertical-align: inherit;">lain yang sangat direkomendasikan </font><font style="vertical-align: inherit;">yang perlu Anda terapkan untuk </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagian itu. Ini adalah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropSessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/jd/ce/ve/jdcevehobhr1k7wwvc1iaem-w80.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita menerapkan dua metode ini, maka kita bisa mendapatkan tanda tambah hijau kecil "+" ketika kita menyeret gambar dari LUAR ke koleksi kami </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan di samping itu, mereka tidak akan mencoba untuk membuang apa yang tidak kita mengerti. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita menerapkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kita memiliki versi Anda dari metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dimaksudkan untuk pengumpulan </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi metode ini </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terlihat persis sama dengan metode serupa untuk </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> biasa </font><font style="vertical-align: inherit;">, tidak ada </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath di sana</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami hanya perlu mengembalikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan itu berarti bahwa saya menerima "reset" objek dari cl ini PAS dalam koleksi saya </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><img src="https://habrastorage.org/webt/0j/tz/ze/0jtzzen649jj7z58-3tiq_ehrvs.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi ini tidak cukup untuk "membuang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar ke koleksi saya </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DI LUAR. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar berlangsung dalam koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pengguna akan mereorganisasi unsur sendiri </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melalui mekanisme </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka hanya satu gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan penerapan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan terlihat seperti dengan cara di atas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi jika "dumping" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar terjadi DI LUAR, maka kita hanya boleh menangani "drag and drop" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang merupakan gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bersama dengan </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar ini, karena kita tidak akan menyimpan gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage secara langsung</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam Model. Dalam hal ini, saya </font><font style="vertical-align: inherit;">hanya </font><font style="vertical-align: inherit;">akan mengembalikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jika beberapa kondisi terpenuhi pada saat yang sama </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: session.canLoadObjects (ofClass: NSURL.self) &amp;&amp; session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/yj/dt/qn/yjdtqnmmxq0olgilbz1ifa5mdt8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya harus menentukan apakah saya berurusan dengan "reset" DI LUAR ATAU DALAM. Saya akan melakukan ini dengan menggunakan konstanta </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isSelf yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihitung </font><font style="vertical-align: inherit;">, untuk perhitungan yang saya dapat menggunakan hal itu dalam </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi </font><font style="vertical-align: inherit;">lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam lokal ini </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi, pada gilirannya, adalah konteks lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda ingat, kami menetapkan konteks lokal ini dalam metode ini</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemsForVeginning</font></font></font></b> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delegasi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UICollectionViewDragDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/o_/gi/tk/o_gitkbwnnbcevnxwcwm6obckwk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aku akan menjelajahi konteks lokal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk kesetaraan dalam koleksi saya</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Benar, TYPE</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan menjadi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Any</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan saya perlu melakukan casting TYPE</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Any</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan operator</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as? UICollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/kc/zk/nt/kczknt6xiau08k5d06xu40akoyu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika konteks lokal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (session.localDragSession .localContext sebagai UICollectionView ??)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Apakah koleksi saya</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , variabel diperluas</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> isSelf</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> benar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan ada "reset" lokal DI DALAM koleksi saya. Jika persamaan ini dilanggar, maka kita berurusan dengan "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DI LUAR. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melaporkan bahwa kami hanya dapat menangani "seret dan lepas" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke koleksi kami </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kalau tidak, lebih jauh, tidak masuk akal untuk berbicara tentang "dumping </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">" </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita terus "ulang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, masih sampai saat ini bahwa pengguna akan mengangkat jari Anda dari layar dan akan ada nyata "ulang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kita harus melaporkan </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dropSessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delegasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang tawaran kami </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk melaksanakan ulang </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam metode ini, kita harus mengembalikan </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kalimat yang dapat memiliki nilai </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.copy</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.move</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.cancel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.forbidden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk argumen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operasi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dan ini semua kemungkinan yang kita miliki dalam kasus biasa ketika berhadapan dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> biasa </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berjalan lebih jauh dan menawarkan untuk mengembalikan penawaran khusus </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang merupakan </font></font><code>subclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kelas dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan memungkinkan Anda untuk </font><font style="vertical-align: inherit;">menentukan, </font><font style="vertical-align: inherit;">selain operasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operasi,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parameter </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maksud</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tambahan </font><font style="vertical-align: inherit;">untuk koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intent</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memberi tahu koleksi</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apakah kita ingin elemen "dibuang" ditempatkan di dalam</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ada</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> ,</font></font></b><font style="vertical-align: inherit;"> atau apakah kita ingin menambahkan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru</font><b><font color="#0000FF"><font style="vertical-align: inherit;"> .</font></font></b><font style="vertical-align: inherit;"> Lihat perbedaannya? Dalam hal pengumpulan,</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kita harus menyampaikan maksud</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> niat kita</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kasus kami, kami selalu ingin menambahkan sel baru, jadi Anda akan melihat seperti apa parameter</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maksud</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami</font><font style="vertical-align: inherit;">.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memilih konstruktor kedua untuk</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UICollectionViewDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/ab/vh/-p/abvh-pb04qje37u4jjgveja3lgu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kasus kami, kami selalu ingin menambahkan sel baru dan parameter</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maksud</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan mengambil nilai</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .insertAtDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai lawan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.insertIntoDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/yg/t0/xi/ygt0xirvwaucl9zvuvuxvvil2cu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya kembali menggunakan konstanta yang dihitung itu</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sendiri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan jika itu adalah</font><font style="vertical-align: inherit;">reorganisasi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sendiri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka saya akan pindah.</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pindah</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kalau tidak saya menyalin</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .copy</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam kedua kasus, kami menggunakan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .insertAtDestinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yaitu memasukkan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru</font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sejauh ini saya belum menerapkan metode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi mari kita lihat apa yang sudah dapat dilakukan koleksi</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan sepotong kecil informasi yang kami sediakan untuk itu.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya seret gambar dari</font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mesin pencari</font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan tanda "+" berwarna hijau muncul di atas gambar ini, menunjukkan bahwa Galeri Gambar kami tidak hanya siap untuk menerima dan menyalin gambar ini bersamanya </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi juga menyediakan tempat di dalam koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ia/gy/gv/iagygvechjnwsm-tfvduwi0pc1o.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saya dapat mengklik sepasang gambar lain di </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan Sudah akan ada 3 gambar "diseret": </font></font><br><br><img src="https://habrastorage.org/webt/kd/ca/7s/kdca7sflzfrbbsbtmnk8_zbueqm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi jika saya mengangkat jari saya dan "menjatuhkan" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar-gambar ini, mereka tidak akan ditempatkan di Galeri kami, tetapi hanya kembali ke tempat sebelumnya, karena kami belum menerapkan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><img src="https://habrastorage.org/webt/5v/e4/me/5ve4me_unk6t-azl6fhatljzgxs.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda bisa melihat bahwa koleksinya </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah tahu apa yang ingin saya lakukan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koleksinya </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benar-benar luar biasa untuk mekanisme ini.</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dia memiliki fungsionalitas yang sangat kuat untuk ini. Kami nyaris tidak menyentuhnya dengan menulis 4 baris kode, dan dia sudah bergerak cukup jauh dalam persepsi "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita kembali ke kode dan mengimplementasikan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><img src="https://habrastorage.org/webt/i0/cc/es/i0ccescpyvub0pclhjyzcbdcu7o.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam metode ini, kita tidak akan dapat bertahan dengan 4 baris kode, karena metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sedikit lebih rumit, tetapi tidak terlalu banyak. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika "reset" terjadi </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dalam metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kita perlu memperbarui Model kita, yang merupakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">galeri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar </font><b><font color="#0000FF"><font style="vertical-align: inherit;">imageGallery</font></font></b><font style="vertical-align: inherit;"> dengan daftar gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan kita perlu memperbarui koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> visual kita </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memiliki dua skenario "reset" yang berbeda </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ada "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">, maka saya harus "mengatur ulang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemen koleksi di tempat baru dan menghapusnya dari tempat lama, karena dalam hal ini saya memindahkan ( </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.move</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) elemen koleksi ini. Ini adalah tugas yang sepele. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari aplikasi lain, maka kita harus menggunakan properti </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font><font style="vertical-align: inherit;">elemen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "diseret" </font><font style="vertical-align: inherit;">untuk memilih data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat kami melakukan "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , koleksi memberi kami koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Pertama dan terpenting, kami melaporkan koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , itu </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yaitu </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "-destination", "ulang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, itu adalah di mana kita akan "ulang." </font></font><br><br><img src="https://habrastorage.org/webt/mp/mt/wk/mpmtwkebx7beyw5ge72gt19xt7k.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mungkin </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nihil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena Anda dapat menyeret gambar "dibuang" ke bagian koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang bukan tempat di antara beberapa </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ada </font><font style="vertical-align: inherit;">, sehingga bisa jadi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nihil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika situasi ini terjadi, maka saya membuat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan elemen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke-0 di </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagian</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bagian ke-0 </font><font style="vertical-align: inherit;">.</font></font><br><br><img src="https://habrastorage.org/webt/qd/ei/me/qdeimejhoj1v0pkgml2xtog1jke.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya bisa memilih </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lainnya </font><font style="vertical-align: inherit;">, tetapi </font><font style="vertical-align: inherit;">saya akan menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ini </font><font style="vertical-align: inherit;">secara default. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita tahu di mana kita akan melakukan "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kita harus melalui semua </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "reset". Item yang </font><font style="vertical-align: inherit;">disediakan oleh </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Setiap </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari daftar ini memiliki TYPE </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan dapat memberikan kami informasi yang sangat menarik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai contoh, jika saya bisa mendapatkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , saya akan tahu persis apa itu "drag and drop" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dilakukan dengan sendirinya, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan sumber seret </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah item koleksi dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sama dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/y2/3d/2u/y23d2u0pmf1pnasfw2khu9htji4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya bahkan tidak perlu melihat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam hal ini untuk mengetahui bahwa "seret dan lepas" ini dilakukan DI DALAM koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> Wow! <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang saya tahu sumber </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan "tujuan" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b> <code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan tugas menjadi sepele. Yang perlu saya lakukan adalah memperbarui Model sehingga sumber dan "tujuan" ditukar, dan kemudian memperbarui koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana Anda harus menghapus item koleksi dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan menambahkannya ke koleksi dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus lokal kami adalah yang paling sederhana, karena dalam kasus ini mekanismenya </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bekerja tidak hanya dalam aplikasi yang sama, tetapi dalam koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sama </font><font style="vertical-align: inherit;">, dan saya bisa mendapatkan semua informasi yang diperlukan menggunakan koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Mari kita implementasikan dalam kasus lokal paling sederhana ini: </font></font><br><br><img src="https://habrastorage.org/webt/1m/uu/4r/1muu4rnsxmehwuyybyspei14bvo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kasus kami, saya bahkan tidak perlu </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang saya "sembunyikan" sebelumnya ketika saya membuat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan yang sekarang saya pinjam dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "diseret" </font><font style="vertical-align: inherit;">dalam </font><font style="vertical-align: inherit;">koleksi </font><b><font color="#0000FF"><font style="vertical-align: inherit;">item</font></font></b><font style="vertical-align: inherit;"> dalam </font><b><font color="#0000FF"><font style="vertical-align: inherit;">item </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form.localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kita akan membutuhkannya saat "membuang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar ke "tempat sampah," yang ada di aplikasi yang sama, tetapi bukan koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectionView yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sama </font><font style="vertical-align: inherit;">. Dua </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexPathes sudah</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cukup bagi saya </font><b><font color="#0000FF"><font style="vertical-align: inherit;">sekarang</font></font></b><font style="vertical-align: inherit;"> : sumber </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan "tujuan" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya mendapat informasi terlebih dahulu</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageInfo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang gambar di tempat lama dari Model, menghapusnya dari sana. Dan kemudian masukkan ke array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> model saya</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> informasi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imageInfo</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar dengan indeks baru</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> destinationIndexPath.item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini adalah bagaimana saya memperbarui Model saya:</font></font><br><br><img src="https://habrastorage.org/webt/pk/bk/ny/pkbknyitrog4kq40dcs7sfpxk0g.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang saya harus memperbarui koleksi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> itu sendiri</font><font style="vertical-align: inherit;">. Sangat penting untuk memahami bahwa saya tidak ingin membebani semua data di</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionViewView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya</font><font style="vertical-align: inherit;">dengan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reloadData ()</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di tengah proses "seret dan lepas"</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena ini menginstal ulang seluruh "Dunia" Galeri Gambar kami, yang sangat buruk, JANGAN LAKUKAN. Sebagai gantinya, saya akan membereskan dan memasukkan elemen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item secara</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> individual:</font></font><br><br><img src="https://habrastorage.org/webt/1-/xa/jg/1-xajgm6ru3uwhqh53w4tf7tblu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya menghapus item koleksi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan memasukkan item koleksi baru dengan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sepertinya kode ini berfungsi dengan baik, tetapi dalam kenyataannya, kode ini dapat "crash" aplikasi Anda. Alasannya adalah bahwa Anda membuat banyak perubahan pada koleksi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView Anda</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan dalam hal ini setiap langkah mengubah koleksi perlu disinkronkan dengan Model secara normal, yang tidak diamati dalam kasus kami, karena kami melakukan kedua operasi pada saat yang sama: hapus dan sisipkan. Oleh karena itu koleksi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan berada di beberapa titik dalam kondisi TIDAK disinkronkan dengan Model. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi ada yang benar-benar keren cara untuk berkeliling itu, yaitu bahwa koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memiliki metode bernama </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performBatchUpdates</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang memiliki sirkuit ( </font></font><code>closure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dan dalam rangkaian ini saya dapat menempatkan sejumlah tersebut </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deleteItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan semua yang saya inginkan: </font></font><br><br><img src="https://habrastorage.org/webt/6b/w_/6n/6bw_6nemnuzuv8xowkmmpt4yumw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sekarang </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deleteItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan dilakukan sebagai operasi tunggal, dan tidak akan pernah melihat kurangnya sinkronisasi model Anda dengan koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan akhirnya, hal terakhir yang perlu kita lakukan adalah meminta </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator untuk</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengimplementasikan dan menghidupkan "reset" itu sendiri </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/7k/qr/1u/7kqr1uatpcgzp8vim6hsf1-o_lo.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segera setelah Anda mengangkat jari Anda dari layar, gambar bergerak, semuanya terjadi pada saat yang sama: "reset", gambar menghilang di satu tempat dan penampilan di tempat lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita coba untuk memindahkan gambar uji "Venesia" di Galeri Gambar kami ke akhir baris pertama ... </font></font><br><br><img src="https://habrastorage.org/webt/gy/k4/ci/gyk4ci8msjogcvzo4hb8iqt2atq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan "reset" itu: </font></font><br><br><img src="https://habrastorage.org/webt/kb/a0/mv/kba0mvrjzqyf_wf1y8b0j5h27oy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang kita inginkan, itu ditempatkan di akhir baris pertama.</font></font><br>  Hore!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semuanya bekerja! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita TIDAK akan berurusan dengan case lokal, yaitu, ketika elemen "reset" keluar, yaitu dari aplikasi lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk melakukan ini, kami menulis </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lagi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam kode </font><font style="vertical-align: inherit;">sehubungan dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika kita tidak memiliki </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourceIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka ini berarti bahwa elemen "reset" berasal dari LUAR dan kita harus menggunakan transfer data menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemProver dari </font></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item reset.dragItem.itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> elemen </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/wh/-9/gd/wh-9gdfe_e52v_9-wc-mf6o-7co.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda "drag </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">drop" </font><font style="vertical-align: inherit;">OUTSIDE dan "drop" â€</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lalu apakah informasi ini tersedia secara instan? Tidak, Anda memilih data dari hal "diseret" ASYNCHRONOUSLY. Tetapi bagaimana jika sampel membutuhkan waktu 10 detik? Apa yang akan dilakukan koleksi saat ini </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Selain itu, data mungkin tidak sampai dalam urutan yang kami minta. Untuk mengelola ini tidak mudah, dan </font></font><code>Apple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengusulkan untuk </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kasus ini teknologi yang sama sekali baru untuk penggunaan pengganti </font></font><code>Placeholders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda menempatkan </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholder </font><font style="vertical-align: inherit;">dalam koleksi Anda </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengatur semuanya untuk Anda, jadi yang harus Anda lakukan ketika data akhirnya dipilih adalah meminta placeholder untuk </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memanggil </font><b><font color="#0000FF"><font style="vertical-align: inherit;">placeholder</font></font></b><font style="vertical-align: inherit;"> -nya konteks konteks</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan katakan padanya bahwa Anda menerima informasi itu. Kemudian perbarui Model Anda dan konteks </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OTOMATIS </font><font style="vertical-align: inherit;">bertukar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan placeholder </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan salah satu </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda </font><font style="vertical-align: inherit;">, yang sesuai dengan jenis data yang Anda terima. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami melakukan semua tindakan ini dengan membuat konteks </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext placeholder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang mengelola placeholder </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan yang Anda dapatkan dari koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , meminta Anda untuk "mengatur ulang" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke placeholder </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan menggunakan penginisialisasi untuk konteks </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext placeholder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bahwa â€œthrowsâ€ </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropPlaceholder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/xh/lo/gk/xhlogk8aee_nhrukgwbtq0m8nae.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objek yang akan saya â€œthrowâ€ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> elemen dari </font><font style="vertical-align: inherit;">loop, karena kita dapat membuang </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banyak </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator.items</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kami â€œmelemparâ€ mereka satu per satu. Jadi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah apa yang kita â€œseret </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">lepas </font><font style="vertical-align: inherit;">â€ </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Argumen berikutnya untuk fungsi ini adalah placeholder, dan saya akan membuatnya menggunakan initializer </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UICollectionViewDropPlaceholder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/hg/yu/jk/hgyujkpqodrfosah0opsrwwc-t0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk melakukan ini, saya perlu tahu DIMANA saya akan memasukkan placeholder</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mis. </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , serta pengidentifikasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reuseIdentifier</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel yang digunakan kembali </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argumen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jelas sama dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , itu adalah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menempatkan objek "diseret", itu dihitung pada awal metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDropWith</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang mari kita lihat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel </font><b><font color="#0000FF"><font style="vertical-align: inherit;">reuseIdentifier</font></font></b><font style="vertical-align: inherit;"> . Anda perlu memutuskan apa jenis sel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> merupakan tempat Anda </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Koordinator </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak memiliki </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "pra- </font><font style="vertical-align: inherit;">paket </font><font style="vertical-align: inherit;">" </font><font style="vertical-align: inherit;">untuk pelacak</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Bahwa Anda harus mengambil keputusan pada sel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Oleh karena itu, pengidentifikasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reuseIdentifiercell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sel yang digunakan kembali </font><b><font color="#0000FF"><font style="vertical-align: inherit;">diminta</font></font></b><font style="vertical-align: inherit;"> dari Anda </font></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sehingga dapat digunakan sebagai PROTOTIPE. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan menyebutnya "DropPlaceholderCell", tetapi pada dasarnya, saya bisa memberi nama apa saja. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini hanya string </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang akan saya gunakan pada milik saya </font></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk membuat hal ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kembali ke kami </font></font><code>storyboard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan buat sel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk placeholder </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Untuk melakukan ini, kita hanya perlu memilih koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan memeriksanya. Di bidang pertama, </font></font><code>Items</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saya berubah </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menjadi</font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini segera membuat sel kedua bagi kami, yang merupakan salinan persis dari sel pertama. </font></font><br><br><img src="https://habrastorage.org/webt/df/go/ke/dfgokefx6miugtxs8ee0_jl1zsk.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memilih sel baru kami </font></font><code>ImageCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mengatur pengenal " </font></font><code>DropPlaceholderCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", menghapus semua </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemen </font><font style="vertical-align: inherit;">dari sana </font><font style="vertical-align: inherit;">, termasuk </font></font><code>Image View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena PROTOTIPE ini digunakan ketika gambar belum tiba. Kami menambahkan indikator aktivitas baru dari Palet Objek di sana </font></font><code>Activity Indicator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, itu akan berputar, membiarkan pengguna tahu bahwa saya mengharapkan beberapa "reset" data. Juga mengubah warna latar belakang </font></font><code>Background</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk memahami bahwa ketika "Reset" dari gambar luar bekerja sama persis sel ini </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai prototipe: </font></font><br><br><img src="https://habrastorage.org/webt/ur/gi/72/urgi728r6j2a1d2z0tf_4k-er1a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain jenis sel baru tidak harus </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageCollectionVewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena tidak akan ada gambar di dalamnya. Saya akan membuat sel ini sel TYPE </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIollectionCiewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">, karena kita tidak memerlukan apa pun </font></font><code>Outlets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk kontrol: </font></font><br><br><img src="https://habrastorage.org/webt/sg/d8/ya/sgd8ya2342bd0lgk9fl172j-8pi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mengkonfigurasi indikator aktivitas </font></font><code>Activity Indicator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sehingga mulai menjiwai dari awal, dan saya tidak perlu menulis apa pun dalam kode untuk memulainya. Untuk melakukan ini, klik pada opsi </font></font><code>Animating</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/qm/de/hq/qmdehqmwsuzn_dt8fkbjdoclkss.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan itu saja. Jadi, kami membuat semua pengaturan untuk sel ini </font></font><code>DropPlaceholderCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami kembali ke kode kami. Sekarang kami memiliki pencari lokasi yang hebat yang </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siap </font><font style="vertical-align: inherit;">berangkat </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang harus kita lakukan adalah mendapatkan data, dan ketika data diterima, kita cukup memberi tahu </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang konteks ini </font><font style="vertical-align: inherit;">dan itu akan menukar placeholder</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan sel "asli" kami dengan data, dan kami akan membuat perubahan pada Model. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan "memuat" SATU objek, yang akan menjadi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">menggunakan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loadObject (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tunggal). Saya menggunakan kode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item.dragItem.itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pemasok </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang akan memberikan data elemen memiliki </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">item yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asynchronous. Jelas bahwa jika </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iitemProvider</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terhubung </font><font style="vertical-align: inherit;">, maka </font><font style="vertical-align: inherit;">kita mendapatkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objek</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "reset" </font><b><font color="#0000FF"><font style="vertical-align: inherit;">iitem di</font></font></b><font style="vertical-align: inherit;"> luar aplikasi ini. Berikut ini adalah metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loadObject (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tunggal): </font></font><br><br><img src="https://habrastorage.org/webt/bv/pl/fj/bvplfjtt-wlffytoqky4jxcbxco.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penutupan khusus ini TIDAK dilakukan pada</font></font><code>main queue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dan, sayangnya, kami harus beralih </font></font><code>main queue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DispatchQueue.main.async {}</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk "menangkap" rasio aspek gambar di variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspekRasio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lokal </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami benar-benar telah memperkenalkan dua variabel lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageurl</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectRatio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br><br><img src="https://habrastorage.org/webt/vc/k3/vg/vck3vgqg7grejo8tj2ojbdnfdny.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan akan "menangkap" mereka dengan meng-upload gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan URL </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">url No</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/jc/ui/yk/jcuiyk3c1zcz4wmkeafkpmkdvqq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika dua variabel lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageurl</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectRatio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak sama untuk </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nihil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami akan meminta konteks sebuah tempat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderSontext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commitInsertion</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beri kami kesempatan untuk mengubah Model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/z6/hm/8w/z6hm8w4jnyrwxgx2g8v9sfnfiuq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam ungkapan ini, kami memiliki </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ini adalah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk dimasukkan, dan kami mengubah Model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">. Hanya itu yang perlu kita lakukan, dan metode ini secara OTOMATIS akan menggantikan placeholder </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan memanggil metode normal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cellForItemAt</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan bahwa </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bisa sangat berbeda dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destinationIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> Mengapa<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena pengambilan sampel data mungkin memakan waktu 10 detik, tentu saja, itu tidak mungkin, tetapi mungkin butuh 10 detik. Selama ini, </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banyak yang bisa terjadi </font><font style="vertical-align: inherit;">dalam koleksi </font><font style="vertical-align: inherit;">. Dapat menambahkan sel-sel baru </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , semuanya terjadi cukup cepat. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELALU menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan HANYA </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insertionIndexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , untuk memperbarui Model Anda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana kami memperbarui model kami? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyisipkan</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> struktur </font><b><font color="#0000FF"><font style="vertical-align: inherit;">imageModel </font></font></b></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke dalam array imageGallery.images</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , terdiri dari rasio aspek dari gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectRatio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan URL gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang dikembalikan oleh </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penyedia</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terkait kepada kami </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini memperbarui Model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">, dan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commitInsertion</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melakukan sisanya untuk kami. Anda tidak perlu lagi melakukan sesuatu yang ekstra, tidak ada sisipan, tidak ada penghapusan, semua ini. Dan, tentu saja, karena kita berada dalam penutupan, kita perlu menambahkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diri.</font></font></font></b>  . <br><br><img src="https://habrastorage.org/webt/rm/ff/nx/rmffnxnhy_1k1ukzub6ni468z6g.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita untuk beberapa alasan tidak bisa mendapatkan rasio aspek </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aspectRatio</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageurl</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari yang sesuai </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan penyedia</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kesalahan mungkin telah diterima </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kesalahan</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bukan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oleh penyedia</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kita harus membiarkan mereka tahu konteks </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placeholderContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda perlu untuk menghancurkan ini pengganti </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena kita semua sama, kita tidak bisa dapatkan data lain: </font></font><br><br><img src="https://habrastorage.org/webt/gw/tm/jj/gwtmjjywumpq4o7czavwnrcweay.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu hal yang perlu diingat adalah </font></font><code>URLs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bahwa mereka datang dari tempat-tempat seperti ini </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dalam kenyataannya, mereka membutuhkan transformasi kecil untuk mendapatkan "bersih"</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk gambar. Bagaimana masalah ini diselesaikan dapat dilihat pada aplikasi demo ini dalam file </font></font><code>Utilities.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karenanya, ketika menerima </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar, kami menggunakan properti </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageURL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari kelas </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/v5/cq/dc/v5cqdcxzqnwybov4eiklwlkt2o8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan itu semua yang perlu Anda lakukan untuk menerima di luar sesuatu di dalam koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita lihat dalam aksi. Kami secara bersamaan meluncurkan dalam mode multitasking aplikasi demo kami </font></font><code>ImageGallery</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan mesin pencari </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Di </font></font><code>Google</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami sedang mencari gambar pada tema "Dawn" (matahari terbit). The </font></font><code>Safari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah dibangun</font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mekanismenya, jadi kita dapat memilih salah satu gambar ini, tahan untuk waktu yang lama, gerakkan sedikit dan seret ke Galeri Gambar kami. </font></font><br><br><img src="https://habrastorage.org/webt/au/t9/wk/aut9wky03l29lkgj9g7l1ulifmc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kehadiran tanda tambah hijau "+" menunjukkan bahwa aplikasi kami siap menerima gambar pihak ketiga dan menyalinnya ke koleksi Anda di lokasi yang ditentukan oleh pengguna. Setelah kami "mengatur ulang", diperlukan waktu untuk mengunduh gambar, dan saat ini berfungsi </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/ge/e-/n0/gee-n08qnm7zc5ofbgr3e4o8df8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah unduhan selesai, gambar "reset" ditempatkan di tempat yang tepat, dan </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghilang: </font></font><br><br><img src="https://habrastorage.org/webt/m8/rb/nq/m8rbnqvi2x0s3as4w_fzpjpltae.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami dapat terus "mengatur ulang" gambar dan menempatkannya di koleksi lebih banyak gambar: </font></font><br><br><img src="https://habrastorage.org/webt/x8/np/bq/x8npbqpkm9af1_ybkxhw13kjhug.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah "reset" bekerja </font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/b2/lq/hb/b2lqhbg6smc2mvvvjp0copbvfmu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai hasilnya, Galeri Gambar kami dipenuhi dengan gambar baru:</font></font><br><br><img src="https://habrastorage.org/webt/lf/jl/mq/lfjlmqca5iqv26l0woi-htqldcq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang jelas bahwa kita mampu untuk mengambil gambar dari luar, kita tidak perlu gambar tes, dan kami akan menghapus: </font></font><br><br><img src="https://habrastorage.org/webt/bv/0t/az/bv0tazx3cjushm1rkcfalu-m1au.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDidLoad</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menjadi sangat sederhana: itu adalah kita lakukan kami </font></font><code>Controller</code> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendelegasikan dan menambahkan gesture recognizer </font></font><b><font color="#FF00FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencubit</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang mengatur jumlah gambar per baris: </font></font><br><br><img src="https://habrastorage.org/webt/ei/fo/1b/eifo1bz0szfk12tuqfseh5fser8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja , kita dapat menambahkan cache untuk gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/f4/oi/ql/f4oiql_gjnka7racbmkrts7mbja.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan mengisi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ketika "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br><br><img src="https://habrastorage.org/webt/xy/hc/bt/xyhcbtodifjiqgd5norskny9cge.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan ketika mengambil dari "jaringan" di kelas </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageCollectionViewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kustom </font><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/nk/sl/2s/nksl2sw3dujz-_z7fmp55zixfzi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan </font><font style="vertical-align: inherit;">kita akan </font><font style="vertical-align: inherit;">menggunakan cache </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageCache</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saat memainkan sel</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Galeri Gambar kami di kelas khusus</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageCollectionViewCell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/-5/ar/zo/-5arzoeghtoj_ckv-ezxhpu403c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita mulai dengan koleksi kosong ...</font></font><br><br><img src="https://habrastorage.org/webt/rl/bq/vn/rlbqvnpsww27j5xbryp9vlgng1a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... lalu "jatuhkan" gambar baru ke dalam koleksi kami ...</font></font><br><br><img src="https://habrastorage.org/webt/9j/7o/es/9j7oesf_b-rk-dj-s9ysujlkte0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... gambar diunggah dan</font></font><code>Placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berfungsi ...</font></font><br><br><img src="https://habrastorage.org/webt/tg/s7/6t/tgs76tffgkarqkpzhamq97ebvio.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan gambar muncul di tempat yang tepat:</font></font><br><br><img src="https://habrastorage.org/webt/ps/uy/z8/psuyz8apr4zpulpgpl5z-hsegfy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami terus mengisi koleksi kami DI LUAR:</font></font><br><br><img src="https://habrastorage.org/webt/it/ve/_y/itve_yuqqnffh8zyzlpmj_vvske.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datang memuat gambar dan</font></font><code>Placeholders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bekerja ...</font></font><br><br><img src="https://habrastorage.org/webt/li/rx/wd/lirxwd74znfsvgrtjkpg3gfvl8u.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan gambar muncul di tempat yang tepat:</font></font><br><br><img src="https://habrastorage.org/webt/uq/j0/as/uqj0asiyqcpqosl8x-3akydb3x0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, kita dapat melakukan banyak hal dengan Galeri Gambar kami: isi di luar, mengatur ulang item DI DALAM, berbagi gambar dengan aplikasi lain niyami.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kita hanya perlu mengajarinya cara menyingkirkan gambar yang tidak perlu dengan "mengatur ulang" gambar-gambar itu</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di "tempat sampah" yang disajikan di bilah navigasi di sebelah kanan. </font><font style="vertical-align: inherit;">Seperti yang dijelaskan di bagian "Fitur Aplikasi Demo Galeri Gambar", "tempat sampah" diwakili oleh kelas </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GabageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang diwarisi dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan kita harus mengajarkannya untuk menerima gambar dari koleksi kami </font></font><code>ollection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atur ulang </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar Galeri ke tempat sampah.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segera dari tempat itu - ke tambang. Aku akan menambah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GabageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "interaksi" </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaksi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan akan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteraction</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena saya sedang mencoba untuk "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beberapa hal. Yang kita butuhkan untuk memberikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteraction</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ini </font><font style="vertical-align: inherit;">adalah delegasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delegasi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan saya akan menugaskan diri saya </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sendiri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kepada delegasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delegasi ini</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/mm/tq/xn/mmtqxnmypbysaik9fjd3r2amrlg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara alami, kelas </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GabageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">harus mengonfirmasi bahwa kami menerapkan protokol </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropInteractionDelegate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/nv/xy/vw/nvxyvwya12ggtiznb1byxq5vorm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua yang perlu kita lakukan untuk membuatnya berfungsi </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ini untuk mengimplementasikan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang sudah kita kenal </font><font style="vertical-align: inherit;">,</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/jg/m9/ol/jgm9olzkrnv_fmu0mwesx91dvsq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, tidak seperti metode serupa untuk pengumpulan</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami tidak memiliki informasi tambahan dalam bentuk</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tempat pembuangan.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita implementasikan metode ini.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam metode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan diproses hanya "drag and drop"</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang mewakili citra</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Oleh karena itu, saya</font><font style="vertical-align: inherit;">hanya</font><font style="vertical-align: inherit;">akan mengembalikan</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> true</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jika</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> session.canLoadObjects (ofClass: UIImage.self)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/if/z7/yo/ifz7yoibzsugla3mj7kat1cylt8.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam metode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> canHandle</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font><font style="vertical-align: inherit;">Anda pada dasarnya hanya mengatakan bahwa jika objek "draggable" bukan gambar</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kemudian lebih lanjut tidak masuk akal untuk melanjutkan "reset" Drop dan memanggil metode selanjutnya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika objek "draggable" adalah gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka kami akan menjalankan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sessionDidUpdate</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Yang perlu kita lakukan dalam metode ini adalah mengembalikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tawaran</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "reset" </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIDropProposal</font></font></b><font style="vertical-align: inherit;"> kami </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dan saya siap untuk hanya menerima objek "diseret" LOCALLY dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYPE gambar </font><font style="vertical-align: inherit;">, yang dapat "dijatuhkan" di </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mana saja di dalam </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">. </font></font><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya </font><font style="vertical-align: inherit;">tidak akan berinteraksi dengan gambar yang dibuang ke luar. Jadi saya parsing menggunakan variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apakah ada "reset" lokal </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan saya mengembalikan kalimat "reset" dalam bentuk konstruktor </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan argumen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operasi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengambil nilai </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.copy</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena SELALU LOKAL "seret dan lepas" </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di aplikasi saya akan berasal dari koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Jika "seret </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">lepas" </font><font style="vertical-align: inherit;">dan "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terjadi DI LUAR, maka saya mengembalikan kalimat "reset" dalam bentuk konstruktor </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDropProposal</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan argumen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operasi yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengambil nilai </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.fobbiden</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yaitu, "terlarang" dan kami akan menerima tanda larangan "reset" alih-alih tanda hijau . </font></font><br><br><img src="https://habrastorage.org/webt/ii/vd/wy/iivdwy9av6cxwzjkeay9kf87lby.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menyalin Gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIImage</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami akan mensimulasikan penurunan skalanya hingga hampir 0, dan ketika "reset" terjadi, kami akan menghapus gambar ini dari koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk membuat ilusi "dumping and menghilang" gambar di "tempat sampah" untuk pengguna, kami menggunakan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">previewForDropping</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">baru bagi kami </font><font style="vertical-align: inherit;">, yang memungkinkan </font><font style="vertical-align: inherit;">kita </font><font style="vertical-align: inherit;">untuk mengarahkan "dumping" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke tempat lain dan pada saat yang sama mengubah objek "dibuang" selama animasi: </font></font><br><br><img src="https://habrastorage.org/webt/e7/ej/zb/e7ejzbhlfzjxrkxsjupt9hiewz4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dalam metode ini, menggunakan penginisialisasi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDragPreviewTarget,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami mendapatkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru </font><font style="vertical-align: inherit;">untuk objek </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target yang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan dihapus </font><font style="vertical-align: inherit;">dan mengarahkannya menggunakan metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retargetedPreview</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke tempat baru, ke "tempat sampah", dengan skalanya turun ke hampir nol: </font></font><br><br><img src="https://habrastorage.org/webt/bu/zp/av/buzpavo-rn6n2eoeztccvman6r0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika pengguna mengangkat jarinya, maka "reset" terjadi </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan saya (seperti </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) menerima pesan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam pesan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop,</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami melakukan "reset" yang sebenarnya </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sejujurnya, </font><font style="vertical-align: inherit;">gambar yang </font><font style="vertical-align: inherit;">dibuang ke </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sendiri </font><font style="vertical-align: inherit;">tidak lagi menarik bagi kami, karena kami akan membuatnya tidak terlihat, kemungkinan besar fakta penyelesaian "reset" </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan memberi sinyal bahwa kami menghapus gambar ini dari koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Untuk mencapai ini, kita harus tahu koleksi itu sendiri </font><font style="vertical-align: inherit;">dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi </font></font></font></b><font style="vertical-align: inherit;"></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar yang dibuang di dalamnya. Dari mana kita bisa mendapatkannya? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena proses </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berlangsung dalam satu aplikasi, itu tersedia bagi kita semua lokal: lokal </font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , konteks lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localContext</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang merupakan koleksi kami </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan objek lokal </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang bisa kita lakukan dengan sendirinya ulang gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari "Galeri" atau </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Karena ini kita bisa mendapatkan dalam metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performDrop</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kelas </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GarbageView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan menggunakannya</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataSource</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bagaimana</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan Model</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami</font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kita bisa mendapatkan berbagai gambar</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYPE [ImageModel]:</font></font><br><br><img src="https://habrastorage.org/webt/3t/tj/kr/3ttjkr1cuyqxh4v3islcmsofjhy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan bantuan lokal</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localDragSession</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami</font></font><code>Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sesi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami mampu mendapatkan semua "drag" pada</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GarbageView</font></font></font></b> <code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unsur</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> item</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan mungkin ada banyak, seperti yang kita tahu, dan semuanya adalah gambar</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> koleksi collectionView kami</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Membuat</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItems</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> koleksi kami</font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami telah menyediakan untuk setiap "seret"</font></font><code>Drag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objek lokal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang adalah gambaran dari</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi kita tidak berguna selama pengumpulan reorganisasi internal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CollectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi "reset" Gambar Galeri "sampah dapat" kita sangat membutuhkan di fasilitas lokal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "drag" objek</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItem</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , setelah sekian lama kami tidak memiliki</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> koordinator</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dengan murah hati membagikan informasi tentang apa yang terjadi dalam koleksi</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collectionView</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Oleh karena itu, kami ingin objek lokal</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indeks</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam gambar berbagai</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> model kami</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Membuat perubahan yang diperlukan dalam metode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dragItems (di indexPath: indexPath)</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kelas</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageGalleryCollectionViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><img src="https://habrastorage.org/webt/le/iy/hz/leiyhzxv04brlhk6nlhpakw4bek.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita bisa mengambil setiap "pretaskivaemogo" elemen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> barang</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> itu</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localObject</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang merupakan indeks</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPath</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam gambar berbagai</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> model kami</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imagegallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan mengirimkannya ke indeks array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indeks</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan array</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPahes dari</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar yang dihapus:</font></font><br><br><img src="https://habrastorage.org/webt/ci/cf/uo/cicfuo7gxvbmh7ddvjj2maorfog.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengetahui array dari indexes</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> index</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan array dari</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indexPahes dari</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gambar yang dihapus, dalam metode</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performBatchUpdates</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kita menghapus semua gambar dihapus dari Model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan dari koleksi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koleksi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/2t/49/i4/2t49i4wwgqlz-vqqpalim8m4h4u.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jalankan aplikasi, mengisi galeri dengan gambar baru: </font></font><br><br><img src="https://habrastorage.org/webt/vj/kb/v5/vjkbv5nwenjhacglkmksbto5jh0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih sepasang gambar yang kita ingin menghapus dari galeri kami ... </font></font><br><br><img src="https://habrastorage.org/webt/cm/-e/t1/cm-et1fd2cp7pext2src2vddkmm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... "membuang" mereka pada ikon dengan "sampah" ... </font></font><br><br><img src="https://habrastorage.org/webt/yw/l3/ue/ywl3ue6tusekuyqvpjv3n4pn1xy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mereka berkurang hampir ke 0 ... </font></font><br><br><img src="https://habrastorage.org/webt/14/6r/nd/146rndccir7ou4z5zitpj9gv4ek.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... dan menghilang dari koleksi </font></font><code>Collection View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, bersembunyi di "tempat sampah":</font></font><br><br><img src="https://habrastorage.org/webt/1x/b_/zw/1xb_zw27xn-2yp7lb7tvlpgm_fc.png"><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menyimpan gambar di antara mulai. </font></font></h1><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menyimpan Galeri Gambar di antara berjalan, kami akan menggunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , setelah mengubah Model kami ke dalam </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format. Untuk melakukan hal ini, kita akan menambah kita </font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defailts var</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br><br><img src="https://habrastorage.org/webt/wy/cg/vy/wycgvy5krdrmfiugzp9dgykaphe.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">..., dan dalam model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageModel</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> protokol </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codable</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/j2/vv/w6/j2vvw62tiuud6eidtx1n9ipeq0w.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , array </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Array</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ganda</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sudah menerapkan protokol </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codable</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jadi kita tidak punya apa-apa lagi yang harus dilakukan untuk mendapatkan encoding kerja dan decoding ke </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ImageGallery </font><font style="vertical-align: inherit;">dalam </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara mendapatkan </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk membuat ini diperluas variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json var</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang mengembalikan hasil upaya untuk mengubah diri, </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , melalui </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONEncoder.encode ()</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format yang: </font></font><br><br><img src="https://habrastorage.org/webt/f6/o3/hz/f6o3hzee-7hryaxadmzf--0jeym.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan itu semua. Entah </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan dikembalikan </font><font style="vertical-align: inherit;">sebagai hasil dari konversi </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke format </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, atau </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nihil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jika konversi ini gagal, meskipun yang terakhir tidak pernah terjadi, karena JENIS ini adalah 100% </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienkripsi</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Digunakan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsional</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variabel </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hanya untuk alasan simetri.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kami memiliki cara untuk mengonversi Model </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font><font style="vertical-align: inherit;">format </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></font></b><font style="vertical-align: inherit;"></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variabel </font><b><font color="#0000FF"><font style="vertical-align: inherit;">json</font></font></b><font style="vertical-align: inherit;"> memiliki </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TYPE </font><b><font color="#0000FF"><font style="vertical-align: inherit;">?</font></font></b><font style="vertical-align: inherit;"> yang dapat diingat di </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang bayangkan bahwa entah bagaimana kami berhasil mendapatkan </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan saya ingin membuat ulang dari mereka Model kami, sebuah instance dari struktur </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk melakukan ini, sangat mudah untuk menulis INITIALIZER untuk </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang argumen inputnya adalah </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Inisialisasi ini akan menjadi inisialisasi "jatuh" (</font></font><code>failable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Jika gagal diinisialisasi, maka crash dan kembali </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nihil</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/g7/0n/l4/g70nl4mxpadtrajaq7y-ec4f6bw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya baru saja mendapatkan nilai </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newValue</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan decoder </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONDecoder</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mencoba untuk men-decode data </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang diteruskan ke initializer saya, dan kemudian menetapkan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sendiri</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika saya berhasil melakukan ini, maka saya mendapatkan contoh baru dari </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageGallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi jika upaya saya gagal, maka saya mengembalikan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nol</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena inisialisasi saya "gagal". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya harus mengatakan bahwa di sini kita memiliki lebih banyak alasan untuk "gagal" ( </font></font><code>fail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), karena sangat mungkin bahwa </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat rusak atau kosong, semua ini dapat menyebabkan "jatuh" ( </font></font><code>fail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dari inisialisasi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita dapat menerapkan BACA </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data dan model pemulihan </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagegallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> metode </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewWillAppear</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font></font><code>Controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><img src="https://habrastorage.org/webt/gw/n2/u-/gwn2u-zkggggk2vuwfi-czhycdq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... serta entri dalam pengamat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didSet {}</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sifat </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagegallery</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/-g/bc/yz/-gbcyzh4t5innabrtcbxdmdh3wq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari menjalankan aplikasi dan mengisi galeri kami gambar: </font></font><br><br><img src="https://habrastorage.org/webt/le/t5/wr/let5wryw9nwf-ahnij7f_wltztc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika kita menutup aplikasi dan buka lagi, kita dapat melihat galeri kami sebelumnya Gambar disimpan dalam </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserDefaults</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kesimpulan </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel ini menunjukkan betapa mudahnya untuk mengintegrasikan teknologi </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke dalam </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplikasi </font><font style="vertical-align: inherit;">menggunakan contoh aplikasi demo yang sangat sederhana "Galeri Gambar" </font><font style="vertical-align: inherit;">. Ini memungkinkan untuk sepenuhnya mengedit Galeri Gambar, "melempar" gambar baru dari aplikasi lain di sana, memindahkan yang sudah ada dan menghapus yang tidak perlu. Dan juga untuk mendistribusikan gambar yang terakumulasi di Galeri ke aplikasi lain. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, kami ingin membuat banyak koleksi gambar tematik yang indah seperti itu dan menyimpannya langsung ke iPad atau iCloud Drive. Ini dapat dilakukan jika masing-masing Galeri tersebut ditafsirkan sebagai </font><b><font color="#0000FF"><font style="vertical-align: inherit;">UIDocument yang</font></font></b><font style="vertical-align: inherit;"> disimpan secara permanen</font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Interpretasi seperti itu akan memungkinkan kita untuk naik ke tingkat abstraksi berikutnya dan membuat aplikasi yang bekerja dengan dokumen. </font><font style="vertical-align: inherit;">Dalam aplikasi seperti itu, dokumen Anda akan diperlihatkan oleh komponen </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DocumentBrowserViewController</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sangat mirip dengan aplikasi tersebut </font></font><code>Files</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ini akan memungkinkan Anda untuk membuat </font><font style="vertical-align: inherit;">gambar </font></font><b><font color="#0000FF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIDocument</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari jenis "Galeri Gambar" pada Anda </font></font><code>iPad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan pada </font></font><code>iCloud Drive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, serta memilih dokumen yang diinginkan untuk dilihat dan diedit. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi ini adalah subjek dari artikel selanjutnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Kode aplikasi demo sebelum implementasi mekanisme </font></font><code>Drag &amp; Drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan setelahnya ada di </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id425817/">https://habr.com/ru/post/id425817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id425807/index.html">Kompleksitas sistem dan metode "perjuangan" dengannya</a></li>
<li><a href="../id425809/index.html">Mempelajari bahasa pemrograman dalam proses: pengembang perangkat lunak tentang proyek yang kompleks</a></li>
<li><a href="../id425811/index.html">Masalah Tampilan MacBook Pro Lainnya</a></li>
<li><a href="../id425813/index.html">CICD: penyebaran mulus ke sistem cluster terdistribusi tanpa downtime</a></li>
<li><a href="../id425815/index.html">Siapa yang tidak butuh SEO, bagaimana memilih pengoptimal dan menguji kerjanya</a></li>
<li><a href="../id425819/index.html">GitLab 11.3 dirilis dengan repositori Maven dan lingkungan yang aman</a></li>
<li><a href="../id425821/index.html">Bagaimana menjadi pengembang Bereaksi pada tahun 2018</a></li>
<li><a href="../id425823/index.html">Statistik IPO 2018: $ 45 miliar diperoleh, Dropbox mengumpulkan lebih sedikit uang daripada perusahaan farmasi dan penjual real estat</a></li>
<li><a href="../id425827/index.html">Pelajaran Google+: proyek perlu memastikan bahwa batas-batas antara kepentingan pengguna dalam kehidupan nyata dihormati secara online</a></li>
<li><a href="../id425829/index.html">Bagaimana kami bertarung dengan Roskomnadzor dan apa yang terjadi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>