<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õèÔ∏è üè¢ ‚¨õÔ∏è ROS Wagen LKW Teil 2. Software ‚õπüèª ‚òïÔ∏è üí∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beitr√§ge in der Reihe: 
 8. Wir steuern von der Telefon-ROS-Steuerung, GPS-Knoten 
 7. Roboterlokalisierung: Gmapping, AMCL, Referenzpunkte auf der Ra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ROS Wagen LKW Teil 2. Software</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461131/"> Beitr√§ge in der Reihe: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">8. Wir steuern von der Telefon-ROS-Steuerung, GPS-Knoten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">7. Roboterlokalisierung: Gmapping, AMCL, Referenzpunkte auf der Raumkarte</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">6. Kilometerz√§hler mit Radgebern, Raumkarte, Lidar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">5. Wir arbeiten in Rviz und Pavillon: Xacro, neue Sensoren.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">4. Erstellen Sie eine Robotersimulation mit den Editoren rviz und pavillon.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">3. Beschleunigen, Kamera wechseln, Gang fixieren</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2. Software</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1. Eisen</a> <br><br><h2>  Weiter zum L√§cheln </h2><br>  Nachdem wir den ‚ÄûBurger‚Äú nach dem Schema des letzten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beitrags zusammengestellt haben</a> , fahren wir mit dem Software-Inhalt fort. <br><br>  Da wir f√ºr ein bereits abgeschlossenes Projekt sammeln, ist es logisch, die darin angegebenen Anweisungen zu geben.  Sie sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Alles ist sehr praktisch und an der gleichen Stelle k√∂nnen Sie ein fertiges Bild von Raspbian Stretch + ROS + OpenCV herunterladen und auf eine SD-Karte f√ºr Himbeere schreiben.  (ROS Kinetic, OpenCV 3.4.1. Ja, es gibt neuere, aber manchmal ist es besser zu nehmen und zu gehen, als alles von der Quelle zu sammeln). <br><a name="habracut"></a><br>  Trotz der Bequemlichkeit musste ich das Bild dennoch leicht korrigieren.  Da sich einige unangenehme Details des Originalbildes herausstellten: <br><br><ul><li>  keine GUI (grafische Oberfl√§che).  Dies ist nicht kritisch, insbesondere f√ºr ROS. Um jedoch auf einer Linie zu fahren, m√ºssen Sie die Kamera auf der Himbeere selbst kalibrieren und sehen, wie sie (die Kamera) Farben √ºbertr√§gt (mehr dazu weiter unten). </li><li>  Die OpenCV-Assembly zeigt das Bild nicht auf dem Bildschirm an, selbst wenn Sie die GUI selbst installieren.  Offensichtlich wurde opencv im Rosbots-Projekt ohne diese Option erstellt. </li><li>  keine kleinen Kr√ºcken (VNC, Texteditor f√ºr Notizen, mc). </li><li>  Daher wurde OpenCV mit Unterst√ºtzung f√ºr die Bildausgabe in der GUI (kompiliert von openCV 3.4.3) neu erstellt, eine GUI wurde installiert, kleine Kr√ºcken. </li></ul><br>  Das fertige Bild ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> und weitere Arbeiten werden auf seiner Grundlage erstellt. <br><br><h2>  Konfigurieren Sie das Netzwerk (Wi-Fi) und den ROS-Master auf Himbeer-Pi </h2>  . <br>  Ich empfehle dringend, f√ºr Experimente einen separaten Router mit Ihrem Wi-Fi zu verwenden.  Zu diesen Zwecken k√∂nnen Sie einfach einen Zugangspunkt auf Ihrem Telefon erstellen.  Dies liegt an der Tatsache, dass viele Pakete √ºber WLAN fliegen und vorzugsweise nicht im allgemeinen Verkehr versinken. <br><br>  Konfigurieren Sie das Netzwerk, nachdem Sie das Bild auf die Himbeer-SD-Karte hochgeladen haben.  Die anf√§nglichen Netzwerkeinstellungen lauten wie folgt: <br><br><pre><code class="bash hljs">interface wlan0 static ip_address=192.168.43.174/24 static routers=192.168.43.1 static domain_name_servers=192.168.43.1</code> </pre> <br>  Enthalten in /etc/dhcpcd.conf <br><br>  Daher k√∂nnen Sie die Schl√§uche nicht mit Himbeere verbinden, um alles zu √§ndern, sondern einfach einen Zugangspunkt mit dem Pathos-Namen Boss und dem Passwort 1234554321 erstellen. Die Himbeeradresse lautet 192.168.43.174.  Neben ssh k√∂nnen Sie auch √ºber VNC auf diese Adresse zugreifen: login - pi, password - 123qweasdzxcV. <br><br>  <b>Lassen Sie uns den ROS-Master konfigurieren</b> <br><br>  Eine kleine Bemerkung f√ºr diejenigen, die ROS (Robot Operation System) noch nicht kennengelernt haben.  Ein ROS-Master ist ein Vermittler, √ºber den verschiedene Knoten in ros kommunizieren (Knoten, Dienste usw.). Wenn der ros-Master nicht oder an der falschen Adresse ausgef√ºhrt wird, sehen sich die Knoten nicht. <br><br>  In unserem ROS-System startet der Assistent automatisch mit dem Laden des Betriebssystems. Wir m√ºssen lediglich die IP-Adresse f√ºr den ROS-Assistenten in der entsprechenden Systemdatei angeben. <br><br>  Wenn Sie die oben aufgef√ºhrten Netzwerkeinstellungen nicht ge√§ndert haben, m√ºssen Sie nichts konfigurieren. <br><br>  Andernfalls bearbeiten Sie bashrc: <br><br><pre> <code class="bash hljs">nano ~/.bashrc</code> </pre> <br>  Korrigieren Sie ganz am Ende der Datei die IP-Adressen (beide) f√ºr Ihren Fall: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ROS_MASTER_URI=http://192.168.43.174:11311 <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ROS_HOSTNAME=192.168.43.174</code> </pre><br>  Starten Sie neu. <br><br>  Wenn Sie nun das Terminal auf dem Wagen starten, sieht die Ausgabe folgenderma√üen aus (oder was auch immer Sie in den Einstellungen angegeben haben): <br><br><pre> <code class="plaintext hljs">For all slaves, "export ROS_MASTER_URI=http://192.168.43.174:11311"</code> </pre> <br>  Dies bedeutet, dass der ROS-Master an der angegebenen IP-Adresse arbeitet. <br><br><h2>  Wir steuern den Wagen √ºber WLAN </h2><br>  Wir werden von Anfang an pr√ºfen, ob die Knoten f√ºr uns funktionieren. <br><br>  Im Terminal: <br><br><pre> <code class="bash hljs">rosnode list</code> </pre> <br>  Die Ausgabe sieht folgenderma√üen aus: <br><br>  / Rosout <br>  / uno_serial_node <br><br>  Wenn nichts herausgekommen ist, √ºberpr√ºfen Sie, ob Sie ROS-Master in den oben beschriebenen Einstellungen registriert haben, ob Sie den USB-Schlauch an Arduino angeschlossen und neu gestartet haben. <br><br>  F√ºhren Sie nach der √úberpr√ºfung den ersten Knoten aus, der f√ºr die Bewegung verantwortlich ist: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  * Der spezielle Befehl ros startet die Datei part2_cmr.py aus dem Python-Paket rosbots_driver <br><br>  Das System informiert, dass der Knoten ausgef√ºhrt wird: <br><br><img src="https://habrastorage.org/webt/fd/pi/bh/fdpibhvndu-d6cxfonymmdcklsu.png"><br><br>  Hier sehen Sie, dass der Radius der R√§der und der Abstand zwischen ihnen bestimmt werden.  Sie k√∂nnen diese und andere Werte in Bezug auf die Bewegung in der Datei robot.py entlang des Pfads korrigieren <br><br><pre> <code class="bash hljs">/home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/examples/coursera_control_of_mobile_robots/part2/full/controller</code> </pre> <br>  da part2_cmr.py selbst diese Parameter nicht hat.  √ñffnen Sie das zweite Terminal und geben Sie die Rostopic-Liste ein: <br><br><img src="https://habrastorage.org/webt/5d/1v/4t/5d1v4tmlmyminhgqzkkciavcvq4.png"><br><br>  Hier sehen Sie, dass das Thema / part2_cmr / cmd_vel angezeigt wurde.  In diesem Thema "h√∂rt" / part2_cmr zu, was andere Knoten dazu sagen, und steuert die Bewegung, je nachdem, was sie sagen.  Was genau "zuh√∂rt", aber nicht "spricht", kann mit dem Befehl verstanden werden. <br><br><pre> <code class="bash hljs">rostopic info /part2_cmr/cmd_vel</code> </pre> <br><img src="https://habrastorage.org/webt/ts/bp/pj/tsbppjpegozrwhekno2hebxtwte.png"><br><br>  Hier k√∂nnen Sie sehen, dass / part2_cmr Abonnent (abonniert) das Thema und h√∂rt. <br><br>  * Sie k√∂nnen selbst etwas zum Thema "sagen", ohne Knoten. <br><br>  Zum Beispiel: <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: 1.0}'</span></span></code> </pre> <br>  mit dem linken Rad vorw√§rts drehen <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: 0.0}'</span></span></code> </pre> <br>  linkes Rad anhalten <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: -1.0}'</span></span></code> </pre> <br>  Mit einem Rad von R√ºcken zu R√ºcken drehen <br><br><pre> <code class="bash hljs">rostopic pub -1 /wheel_power_left std_msgs/Float32 <span class="hljs-string"><span class="hljs-string">'{data: -0.5}'</span></span></code> </pre> <br>  Drehen Sie mit dem linken Rad langsamer zur√ºck. <br><br>  Die Syntax lautet: rostopic pub - Wunsch, im Thema zu sprechen, -1 - einmaliger Wunsch, / Wheel_power_left - Thema, in dem wir sagen, std_msgs / Float32 - Sprache (Nachrichtenformat), '{data: -0.5}' - was wir sagen. <br><br>  F√ºhren Sie nun denjenigen aus, der im Thema / part2_cmr / cmd_vel spricht.  Dies ist der Tastaturbefehls-Sendeknoten. <br><br>  F√ºhren Sie einen anderen aus, ohne das vorherige Terminal mit einem Arbeitsknoten zu schlie√üen, und geben Sie Folgendes ein: <br><br><pre> <code class="bash hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code> </pre> <br>  * Da die Ver√∂ffentlichung standardm√§√üig im Thema / cmd_vel erfolgt, leiten wir sie mit weiter <br>  / cmd_vel: = / part2_cmr / cmd_vel, sodass Nachrichten in / part2_cmr / cmd_vel eingegossen werden. <br><br>  Der Steuerknoten wurde gestartet und Sie k√∂nnen fahren, indem Sie die Tasten auf der Tastatur dr√ºcken: <br><br><img src="https://habrastorage.org/webt/fy/bz/fl/fybzflgbhdqykv-vvxhk72qy_hq.png"><br><br>  Wenn es unm√∂glich ist zu fahren oder ein leichtes Quietschen unter den R√§dern auftritt, m√ºssen Sie die Geschwindigkeit erh√∂hen, indem Sie im Terminal bei laufendem Knoten auf "w" klicken.  Das Gleiche (Erh√∂hen oder Verringern) kann mit der Drehzahl erfolgen - der Taste ‚Äûe‚Äú.  Es ist auch wichtig, sich in einem Terminal mit einem laufenden Knoten zu befinden, wenn die Steuertasten nicht funktionieren, wenn Sie zu einem anderen Terminal wechseln.  Die Taste ‚Äûk‚Äú im Steuerterminal ist ein Stopp. <br><br>  Sehen Sie sich in einem separaten Terminal das Thema / part2_cmr / cmd_vel an: <br><br><img src="https://habrastorage.org/webt/su/ab/cr/suabcrxmna11bzfmnxqsdzq0rxs.png"><br><br>  Jetzt gibt es im Thema / part2_cmr / cmd_vel sowohl einen Sprecher als auch einen Zuh√∂rer. <br><br><h2>  Auf OpenCV die Linie fahren </h2><br>  Bevor Sie irgendwohin gehen, m√ºssen Sie sicherstellen, dass der Roboter mit Tastatursteuerung f√§hrt.  Hier ist eine wichtige Bemerkung erforderlich.  Wenn Sie im obigen Beispiel √ºber die Tastatur steuern, sollte das Drehen nach links dem Dr√ºcken der Taste j entsprechen, nach rechts l (lateinisch l), vorw√§rts i, r√ºckw√§rts (Komma).  Wenn dies in Ihrem Fall nicht der Fall ist, kann es zu Problemen mit der Reise kommen.  Um alles wieder normal zu machen, ist es notwendig, die Drahtpaare, die vom Lokf√ºhrer zu den Beinen auf Arduino kommen, in unserem Burger 4,5,6,7 Arduino zu √§ndern: 4,5, um mit 6,7 oder 4 und 5,6 und 7 jeweils mit auszutauschen eine andere, je nachdem, wo sich die R√§der drehen.  Sie k√∂nnen dies auch programmgesteuert tun, indem Sie den Code f√ºr Arduino entlang des Pfads anpassen - /home/pi/gitspace/rosbots_driver/platformio/rosbots_firmware/examples/motor_driver/src/main.cpp <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#define M_LEFT_PWM 6 #define M_LEFT_FR 7 #define M_RIGHT_PWM 5 #define M_RIGHT_FR 4</span></span></code> </pre><br>  und Laden Sie es auf Arduino mit dem Befehl neu: <br><br><pre> <code class="bash hljs">upload_firmware ~/gitspace/rosbots_driver/platformio/rosbots_firmware/examples/motor_driver</code> </pre> <br>  <b>Lass uns mit Blumen arbeiten</b> <br><br>  Unsere Gartenerfahrung besteht darin, die Linie auf dem Boden hervorzuheben, auf der sich der Roboter bewegt, um seine Farbe zu bestimmen.  Standardm√§√üig sieht der Roboter es nicht.  Als Linie k√∂nnen Sie entweder Klebeband (gelb) oder Klebeband oder etwas anderes mit einer charakteristischen Farbe und ziemlich breit verwenden.  * Transparentes Klebeband funktioniert wahrscheinlich nicht, weil  es wird schwierig sein, vom Hintergrund zu unterscheiden. <br><br>  Gehen wir in den Ordner und f√ºhren das Skript aus: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python bgr-to-hsv.py</code> </pre> <br>  * Achtung!  Wenn Sie das Originalbild von Rosbots verwenden und nicht meins, ist dieses Programm nicht vorhanden. <br><br>  Zwei Fenster √∂ffnen sich: <br><br><img src="https://habrastorage.org/webt/_v/qy/lw/_vqylwcxaerfndl2h7fgomt2zcy.png"><br><br>  Hier sind die Farbbereiche im HSV.  Was ist hsv und warum nicht rgb, bitte googeln Sie es selbst. <br><br>  h1, s1, v1 - unterer und h2, s2, v2 - jeweils der obere Bereich. <br><br>  Jetzt m√ºssen Sie eine Linie mit Klebeband (m√∂glicherweise nicht Klebeband, sondern Klebeband) auf dem Boden ausw√§hlen, indem Sie die Schieberegler im Fenster bewegen.  Im Ergebnisfenster sollte nur die Isolierbandlinie verbleiben: <br><br><img src="https://habrastorage.org/webt/xv/4y/cs/xv4ycskbhskfqq-1pwzgc_-llgc.png"><br><br>  Die Linie des Isolierbandes ist ungew√∂hnlich wei√ü, alles andere ist schwarz.  Dieses Ergebnis ist notwendig. <br>  Notieren Sie sich die Nummern der HSV-Bereiche.  Mein Fall ist 56.155,40 und 136.255.255.  Die HSV-Bereiche sind unter verschiedenen Lichtbedingungen in der N√§he der Roboterkamera unterschiedlich. <br><br>  Schlie√üen Sie die Fenster, indem Sie im Terminal Strg + C eingeben und die HSV-Bereiche zur Datei follow_line_step_hsv.py hinzuf√ºgen: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver nano follow_line_step_hsv.py</code> </pre> <br>  In den Zeilen: <br><br><pre> <code class="plaintext hljs">lower_yellow = np.array([21,80,160]) upper_yellow = np.array([255,255,255])</code> </pre> <br>  Wir geben die Nummern unserer HSV-Bereiche an. <br><br>  <b>Zeit, die Linie zu fahren</b> <br><br>  Wir starten den Motorknoten in Klemme 1: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  Starten Sie den Kameraknoten im zweiten Terminal: <br><br><pre> <code class="bash hljs">sudo modprobe bcm2835-v4l2 roslaunch usb_cam usb_cam-test.launch</code> </pre><br>  F√ºhren Sie den opencv-Knoten im dritten Terminal aus: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python follow_line_step_hsv.py</code> </pre><br>  Wenn alles gut gegangen ist, geht der Roboter entlang der Linie und ein zus√§tzliches Fenster erscheint: <br><br><img src="https://habrastorage.org/webt/bk/ug/aj/bkugajoo0itqwwkbn8zckbm2mvy.png"><br><br>  In diesem Fenster wird das Isolierband mit einem roten Kreis markiert. <br><br>  Die allgemeine Bedeutung des Codes besteht darin, das Farbsegment in einem bestimmten Abstand von der Kamera hervorzuheben, einen roten Kreis zu zeichnen und zu diesem Kreis zu wechseln, um ihn in der Mitte zu halten. <br><br><h2>  Schlie√ülich √ºber das Wichtige - √ºber Katzen und L√§cheln </h2><br>  Da unser Ziel darin besteht, zur Katze oder zu einer l√§chelnden Person zu gehen, m√ºssen wir in unserem Code etwas Komplizierteres verwenden.  Wir werden auch Katzen und l√§chelnde Menschen brauchen.  Das zweite ist jetzt schwieriger: Nur wenige Menschen l√§cheln in dieser schwierigen, alarmierenden Zeit.  Fangen wir also mit Katzen an. <br><br>  F√ºr Experimente eignen sich Fotos von Katzen im Gesicht. <br><br>  F√ºhren Sie den Kameraknoten im 1. Terminal aus: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python pi_camera_driver.py</code> </pre> <br>  Im 2. Terminal der Motorknoten: <br><br><pre> <code class="bash hljs">rosrun rosbots_driver part2_cmr.py</code> </pre> <br>  Im 3. Terminal des Katzensuchknotens: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi/rosbots_catkin_ws/src/rosbots_driver/scripts/rosbots_driver python follow_cat2.py</code> </pre> <br>  Der Wagen bewegt sich allm√§hlich zur Katze: <br><br><img src="https://habrastorage.org/webt/xj/yr/fm/xjyrfmqyd4lw2gv_neuscw7aus0.png"><br><br>  Jetzt brauchen Sie einen Freiwilligen, der wei√ü, wie man l√§chelt.  Machen Sie ein Portr√§t einer wenig bekannten Pers√∂nlichkeit des √∂ffentlichen Lebens in einem kleinen Land. <br><br>  Im 3. Terminal des Suchknotens der Katze k√∂nnen Sie Strg + C schlie√üen und stattdessen nach einem L√§cheln auf dem Gesicht einer wenig bekannten √∂ffentlichen Person suchen: <br><br><pre> <code class="bash hljs">python follow_smile.py</code> </pre> <br>  Der Wagen muss langsam und ungl√§ubig zum L√§cheln einer wenig bekannten Person fahren: <br><br><img src="https://habrastorage.org/webt/5z/01/tr/5z01tr6a1npd3gppcqotqn5item.png"><br><br>  Wie viele vielleicht bereits vermutet haben, verwenden die von uns ausgef√ºhrten Skripte Haar-Kaskaden.  Nach dem gleichen Prinzip wie bei einer Fahrt entlang der Linie wird ein Quadrat des gew√ºnschten Bereichs hervorgehoben, und das Programm versucht, es durch Bewegen des Roboters in der Mitte zu halten. <br><br>  Leider l√§sst die Leistung von Himbeer 3b trotz der Kameraeinstellungen von 320x240 und 15 Fps zu w√ºnschen √ºbrig.  Verz√∂gerungen machen sich mit zunehmender Zeit bemerkbar.  Nicht jede Katze kann es aushalten. <br><br>  Wie kann dies verbessert werden? <br><br>  Versuchen Sie, optimiertes OpenCV neu zu erstellen, wie von Adrian empfohlen (https://www.pyimagesearch.com/2017/10/09/optimizing-opencv-on-the-raspberry-pi/).  Externe PC-Ressourcen f√ºr die Bildverarbeitung verwenden?  Versuchen Sie nicht, Bilder in JPEG zu komprimieren, die zum Haar-Handler fliegen?  Und noch ein gro√ües Minus - Katzen sollten gro√ü und vorne sein.  15 cm Abstand auf A4-Blatt.  Wenn Sie sich von der Kamera entfernen, ist die Katze bereits nicht wiederzuerkennen und unverwundbar.  Ein Himbeermonokel mit 8-facher Vergr√∂√üerung vor die Kamera stellen? <br><br>  PS: Wenn Sie Experimente mit dem im Artikel angegebenen Bild in die H√§nde bekommen, k√∂nnen Sie immer noch f√ºr verschiedene K√∂rperteile fahren und entsprechend anstelle des Katzenknotens starten: <br><br><pre> <code class="bash hljs">python follow_fullbody.py python follow_upperbody.py python follow_lowerbody.py</code> </pre><br>  Gesicht oder Auge: <br><br><pre> <code class="bash hljs">python follow_face.py python follow_right_eye.py</code> </pre> <br>  Wenn Sie daran interessiert sind, wie Sie sich reibungslos entfernen k√∂nnen, damit der Roboter keinen Tee versch√ºttet, und wie Sie ihn nicht mit Himbeeren selbst bedienen, schreiben Sie. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461131/">https://habr.com/ru/post/de461131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461113/index.html">F√ºnf Jahre C ++ f√ºr Projekte f√ºr Mikrocontroller in der Produktion</a></li>
<li><a href="../de461121/index.html">Kleine Multitasking-Experimente in einem Mikrocontroller</a></li>
<li><a href="../de461125/index.html">Die Aufgabe, sequentielle numerische Codes zum Nummerieren von Nachrichten im Quellcode in Visual Studio zu erstellen (z. B. C #)</a></li>
<li><a href="../de461127/index.html">VM-Leistungsanalyse in VMware vSphere. Teil 3: Lagerung</a></li>
<li><a href="../de461129/index.html">√úber Kote, Frau, zwei S√∂hne, die Idee ... und nicht nur. Geschichte mit Fortsetzung</a></li>
<li><a href="../de461133/index.html">Testen von SQL Server-Code mit tSQLt</a></li>
<li><a href="../de461137/index.html">Wie wir ein Ger√§t zur √úberwachung der Aufmerksamkeit von Fahrern entwickelt haben. Erleben Sie Yandex.Taxi</a></li>
<li><a href="../de461141/index.html">Mein erster Tag mit Haiku: Sie ist unerwartet gut</a></li>
<li><a href="../de461143/index.html">Zu aktuellen Problemen des Spieldesigns und M√∂glichkeiten, diese zu l√∂sen. Blick von unten</a></li>
<li><a href="../de461145/index.html">Was sollte ein Team f√ºhren: Rollen, Verantwortlichkeiten und F√§higkeiten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>