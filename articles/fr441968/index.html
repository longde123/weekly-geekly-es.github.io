<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¥‚Äç‚ò†Ô∏è üìâ üåñ D√©veloppement d'une nouvelle branche produit: comment se d√©barrasser de l'impraticable et rester utile ‚ôëÔ∏è üêøÔ∏è üÜó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je m'appelle Dmitry, je suis d√©veloppeur chez ISPsystem. R√©cemment, nous avons publi√© en version b√™ta une nouvelle version du panneau d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement d'une nouvelle branche produit: comment se d√©barrasser de l'impraticable et rester utile</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/441968/"><img src="https://habrastorage.org/webt/y1/x1/ec/y1x1ece2ww4irdsajxg6qeme6bw.jpeg"><br><br>  Bonjour, Habr!  Je m'appelle Dmitry, je suis d√©veloppeur chez ISPsystem.  R√©cemment, nous avons publi√© en version b√™ta une nouvelle version du panneau de configuration de la machine virtuelle.  Aujourd'hui, je vais vous dire comment nous avons d√©cid√© quoi prendre d'un ancien produit et quoi de mieux √† refuser.  Je vais passer en revue les probl√®mes les plus importants pour nous: une biblioth√®que pour travailler avec libvirt, la prise en charge de divers syst√®mes d'exploitation lors de l'installation du produit, la transition du monolithique aux microservices et le d√©ploiement de machines virtuelles. <br><br>  L'article concerne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VMmanager</a> .  Il s'agit d'un syst√®me de gestion, de d√©ploiement et de surveillance des machines virtuelles bas√© sur la virtualisation KVM et OVZ.  La cinqui√®me g√©n√©ration est sortie en 2012.  Depuis lors, l'interface est tr√®s d√©pass√©e et l'architecture centralis√©e a emp√™ch√© le d√©veloppement du produit.  Il est temps de faire une nouvelle version. <br><a name="habracut"></a><br><h2>  La premi√®re histoire.  Nous utilisons le travail des elfes de maison <br></h2><h5>  <font color="#787979">Travailler avec libvirt: consid√©rer les options, s√©lectionner les biblioth√®ques</font> </h5><br>  En tant qu'outil de gestion de la virtualisation KVM, notre produit utilise libvirt.  En 2012, une biblioth√®que √©crite en C a √©t√© choisie pour travailler avec, donc c'√©tait plus pratique pour cette √©quipe de d√©veloppement.  En cons√©quence - une grande quantit√© de code √©crit en C ++, appelant la biblioth√®que C, qui impl√©mente le travail direct avec libvirt. <br><br>  Et maintenant, au seuil d'un nouveau projet, nous regardons en arri√®re et examinons notre produit, √©valuons s'il vaut la peine de prendre une solution / technologie particuli√®re;  ce qui a fait ses preuves et ce qui doit √™tre rappel√© et jamais r√©p√©t√©. <br><br>  Nous nous asseyons et faisons une r√©trospective de nombreuses ann√©es de travail sur la version pr√©c√©dente du produit.  Nous sommes patients, prenons des autocollants et √©crivons trois types de feuilles de papier: <br><ol><li>  Qu'est-ce qui a r√©ussi dans le produit?  Qu'est-ce que les utilisateurs ont lou√©?  Qu'est-ce qui n'a jamais entendu de plaintes?  Qu'est-ce qui vous a plu? </li><li>  Qu'est-ce qui a √©chou√©?  Quels √©taient les probl√®mes constamment?  Qu'est-ce qui a g√™n√© le travail et pourquoi ont-ils ouvert une nouvelle succursale? </li><li>  Que peut-on changer?  Que demandent les utilisateurs?  Qu'est-ce que les membres de l'√©quipe veulent changer? </li></ol><br>  Le groupe de personnes qui g√¢tent le papier avec z√®le devrait inclure √† la fois ceux qui ont √©t√© en contact √©troit avec le produit pendant des si√®cles et ceux qui peuvent avoir un regard neuf sur le produit.  N'oubliez pas Feature Request et Product Manager.  Des autocollants pr√™ts √† l'emploi sont coll√©s sur la planche, ils nous aideront certainement. <br><img src="https://habrastorage.org/webt/u8/wv/dp/u8wvdprmraomcmn1ykdj7fhht7i.png"><br>  Revenons √† l'histoire.  Nous examinons un morceau de code o√π la norme C ++ 98 coexiste pacifiquement avec les appels de la biblioth√®que C.  Nous rappelons que 2018 est l'ann√©e et d√©cidons de le laisser tranquille.  Mais comment r√©p√©ter la fonctionnalit√© de travailler avec des machines virtuelles (VM), rendant le code plus compact et plus pratique pour le travail? <br><br>  Nous √©tudions le probl√®me, comprenons que quelle que soit la solution et la langue que nous choisissons, ce sera un wrapper sur la biblioth√®que C.  Comme option int√©ressante, il convient de noter la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que sur Go de DigitalOcean</a> , elle utilise le protocole RPC pour communiquer directement avec libvirt, mais elle a ses inconv√©nients.  Nous nous sommes install√©s sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que Python</a> . <br><br>  En cons√©quence, nous avons obtenu la vitesse d'√©criture du code, la facilit√© d'utilisation et la lecture.  Il vaut la peine d'expliquer ces belles paroles. <br><ul><li>  <b>La vitesse</b> .  Maintenant, nous pouvons rapidement prototyper une certaine partie du travail avec le domaine directement √† partir de la console sur le serveur de d√©bogage, sans reconstruire l'application principale. </li><li>  <b>Simplicit√©</b> .  Au lieu d'appeler de nombreuses m√©thodes C ++ dans un certain gestionnaire, nous avons un appel de script Python avec passage de param√®tres. </li><li>  <b>Le d√©bogage est</b> √©galement aussi rapide et indolore que possible.  √Ä mon avis, √† long terme, cela peut entra√Æner une exp√©rience utilisateur int√©ressante.  Imaginez, l'administrateur syst√®me, m√©content que ses machines virtuelles attendent un arr√™t avant de les d√©truire, va red√©finir le script de la m√©thode host_stop.  <s>Puis-je √©galement √©crire un panneau pour vous?</s> </li></ul><br>  En cons√©quence, nous avons obtenu un outil simple et pratique pour travailler avec des machines virtuelles au niveau du serveur. <br><br><h2>  La deuxi√®me histoire.  Un produit bien emball√© n'a pas besoin de caresses suppl√©mentaires <br></h2><h5>  <font color="#787979">Distribution de produits: nous refusons de nombreux colis et nous passons √† Docker</font> </h5><br><img src="https://habrastorage.org/webt/dr/ow/wm/drowwmt-ru8iwccg64mlsjmmc8y.png"><br>  VMmanager 5 est distribu√© comme un ensemble de packages Linux.  CentOS 6/7 et, jusqu'√† r√©cemment, Debian 7 sont pris en charge. Qu'est-ce que cela signifie?  Cela signifie plus de serveurs de build pour CI / CD, plus de tests, plus d'attention au code.  Nous devons nous rappeler que lorsque dans le r√©f√©rentiel officiel de CentOS 7 qemu version 1.5.3, dans CentOS 6, c'est 0.12.1.  Dans le m√™me temps, l'utilisateur peut utiliser des r√©f√©rentiels dans lesquels la version de ce package est beaucoup plus √©lev√©e.  Cela signifie que vous devez prendre en charge diff√©rentes versions d'api lorsque vous travaillez avec des machines virtuelles, en particulier lors de la migration.  Nous devons nous rappeler la diff√©rence entre les initialiseurs (init, systemd), prendre en compte la diff√©rence dans les noms des packages et des utilitaires.  Les utilitaires qui fonctionnent sur CentOS ne fonctionneront pas sur Debian, ou leurs versions dans les d√©p√¥ts officiels varient consid√©rablement.  Pour chaque push, vous devez collecter des packages pour toutes les versions, et il est conseill√© de ne pas oublier de les tester √©galement. <br><br>  Tout cela dans le nouveau produit ne nous convient pas.  Afin de ne pas supporter une logique diff√©rente, nous abandonnons plusieurs syst√®mes et ne laissons que CentOS 7. Le probl√®me est-il r√©solu?  Pas vraiment. <br><br>  Nous ne voulons pas non plus v√©rifier la version du syst√®me d'exploitation avant l'installation, si les utilitaires n√©cessaires sont disponibles, quelles r√®gles sont install√©es dans SELinux et nous ne voulons pas reconfigurer les listes de pare-feu et de r√©f√©rentiel.  Je voudrais une fois - et c'est tout, en cliquant pour <s>d√©truire chaque seconde pour</s> d√©ployer tout l'environnement et le produit lui-m√™me.  Il est dit - fait, le projet est emball√© dans un conteneur docker. <br><br>  Il suffit maintenant de faire: <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker pull vmmanager # docker run -d vmmanager:latest</span></span></code> </pre> <br>  Le panneau est op√©rationnel. <br><br>  Bien s√ªr, j'exag√®re, l'utilisateur doit installer Docker pour lui-m√™me, et nous avons plus d'un conteneur, et actuellement VMmanager fonctionne en mode essaim en tant que service SaaS.  √Ä propos de ce que nous avons rencontr√© lors du choix de Docker et de la fa√ßon de le r√©soudre, vous pouvez √©crire un article s√©par√©. <br><br>  Le fait lui-m√™me est combien il est important de simplifier le d√©veloppement, et surtout, le d√©ploiement de votre produit, install.sh, qui occupait autrefois <a href="">2097 lignes</a> . <br><br>  En cons√©quence: <br><ol><li>  Un environnement d'installation de produit homog√®ne simplifie le code du programme et r√©duit les co√ªts d'assemblage et de test. </li><li>  La distribution de l'application en tant que conteneur Docker rend le d√©ploiement simple et pr√©visible. </li></ol><br><h2>  La troisi√®me histoire.  Premi√®re relation avec les microservices <br></h2><h5>  <font color="#787979">Architecture: on abandonne le monolithe au profit des microservices, ou pas</font> </h5><br><img src="https://habrastorage.org/webt/h0/x5/hv/h0x5hv2builkoorlw3wxiheknru.png"><br>  La cinqui√®me version du produit est un grand syst√®me monolithique avec la norme C ++ obsol√®te.  En cons√©quence, la mise en ≈ìuvre probl√©matique des nouvelles technologies et la difficult√© de refactoriser le code h√©rit√©, une mauvaise mise √† l'√©chelle horizontale.  Dans la nouvelle branche, ils ont d√©cid√© d'utiliser l'approche du microservice comme l'un des moyens d'√©viter de tels probl√®mes. <br><br>  Les microservices sont une tendance moderne qui a √† la fois des avantages et des inconv√©nients.  J'essaierai de pr√©senter ma vision des points forts de cette architecture et de parler de la r√©solution des probl√®mes qu'elle apporte au projet.  Il convient de noter que ce sera le premier aper√ßu de l'architecture des microservices en pratique du c√¥t√© d'un d√©veloppeur ordinaire.  Les aspects que je ne mentionnerai probablement pas sont trait√©s dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bon article de synth√®se</a> . <br><br><h3>  C√¥t√© positif </h3><br>  <b>Le petit service offre de nombreuses opportunit√©s.</b> <br>  En plus de la commodit√© de l'√©criture, des tests et du d√©bogage, les microservices ont introduit un nouveau langage de programmation dans le projet.  Lorsque votre projet est un monolithe, il est difficile d'imaginer qu'un jour vous essayerez d'en r√©√©crire une partie dans une autre langue qui vous int√©resse.  Dans l'architecture de microservices - s'il vous pla√Æt.  En plus du langage de programmation, vous pouvez √©galement essayer de nouvelles technologies, avec la seule mise en garde que tout cela sera justifi√© pour l'entreprise.  Par exemple, nous avons √©crit certains des microservices √† Golang, tout en √©conomisant pas mal de temps. <br><br>  <b>Mise √† l'√©chelle de l'√©quipe</b> <br>  Nous pouvons diviser de nombreuses personnes qui avaient l'habitude de s'engager dans un seul r√©f√©rentiel et ont essay√© de garder la structure du monolithe dans leur t√™te en plusieurs √©quipes.  Chaque √©quipe sera engag√©e dans son service.  De plus, l'entr√©e d'une nouvelle personne dans le travail est beaucoup plus simple et plus rapide, en raison du contexte limit√© dans lequel elle travaillera.  D'un autre c√¥t√©, il y a moins de personnes-agr√©gateurs de connaissances mondiales, qui peuvent toujours √™tre d√©couvertes sur n'importe quel aspect d'un √©norme syst√®me.  Peut-√™tre qu'avec le temps, je reconsid√©rerai mon attitude sur ce point. <br><br>  <b>D√©gradation ind√©pendante</b> <br>  J'attribuerais la d√©gradation ind√©pendante aux c√¥t√©s positifs et n√©gatifs des microservices, car qui a besoin de votre application si, par exemple, se trouve un service d'autorisation?  Cependant, c'est toujours un c√¥t√© positif.  Auparavant, la collecte de statistiques √† partir de plusieurs centaines de machines virtuelles faisait travailler dur notre monolithe, au moment de la charge de pointe, l'attente d'une demande des utilisateurs augmentait consid√©rablement.  Un service de collecte de statistiques distinct peut le collecter sans affecter d'autres services, tandis qu'il peut toujours √™tre mis √† l'√©chelle en ajoutant du nouveau mat√©riel ou en augmentant le nombre de collecteurs des m√™mes statistiques.  Et nous pouvons m√™me s√©lectionner un serveur distinct pour Graphite, o√π ce service enregistre des statistiques.  Avec un monolithe, o√π il y a une base, c'est impossible. <br><br><h3>  C√¥t√© n√©gatif </h3><br>  <b>Contexte de la demande</b> <br>  Tout mon d√©bogage dans le monolithe se r√©sumait √† deux requ√™tes dans la console: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># tail -n 460 var/vmmgr.log | grep ERR # tail -n 460 var/vmmgr.log | grep thread_id_with_err</span></span></code> </pre> <br>  C'est fait!  Je peux suivre l'int√©gralit√© de la demande, de sa r√©ception au syst√®me jusqu'√† ce qu'une erreur se produise. <br><br>  Mais qu'en est-il maintenant, lorsque la demande passe du microservice au microservice, accompagn√©e d'appels suppl√©mentaires aux services voisins et d'enregistrements dans diverses bases de donn√©es?  Pour ce faire, nous avons impl√©ment√© les informations de demande, qui contiennent l'identifiant de la demande et des informations sur l'utilisateur ou le service qui les a produites.  Il devient donc plus facile de suivre toute la cha√Æne des √©v√©nements, mais le d√©sir vient d'√©crire un service d'agr√©gation de journaux, car nous avons, apr√®s tout, une architecture de microservices.  Vous pouvez √©galement regarder vers Elasticsearch, ce probl√®me est ouvert et sera bient√¥t r√©solu. <br><br>  <b>Incoh√©rence des donn√©es</b> <br>  Les donn√©es des microservices sont d√©centralis√©es, il n'y a pas de base de donn√©es unique dans laquelle toutes les informations sont stock√©es.  En r√©fl√©chissant √† cet article, je suis pass√© en revue les principales interactions entre les microservices dans mon esprit - o√π nous pouvons obtenir des doublons, o√π nous utilisons des transactions interr√©seaux - et j'ai r√©alis√© que nous avons r√©solu le probl√®me de l'incoh√©rence avec un monolithe. <br><br>  Nous avons vraiment construit un monolithe avec une base principale, englobant la plupart des actions transactionnelles.  Et autour du monolithe, tous les microservices ont √©t√© collect√©s sans affecter la coh√©rence des donn√©es principales.  L'exception est un tas d'autorisation de service + monolith.  Le probl√®me dans ce cas est que la base de donn√©es d'application de base ne contient pas d'utilisateurs en tant que tels, leurs r√¥les et param√®tres suppl√©mentaires, tout cela est dans le service d'autorisation. <br><br>  L'utilisateur du syst√®me peut travailler avec des machines virtuelles dans un monolithe, tandis que dans le service d'autorisation, ses droits peuvent changer, ou il sera compl√®tement bloqu√©.  Le syst√®me doit y r√©pondre en temps opportun.  Dans cette situation, la coh√©rence des donn√©es est obtenue en v√©rifiant les param√®tres utilisateur avant d'ex√©cuter une demande. <br><br>  Comme pour les microservices restants, l'impossibilit√© de s'enregistrer dans le service de statistiques n'affecte pas le fonctionnement de la machine virtuelle et cette action peut toujours √™tre r√©p√©t√©e.  Eh bien, nous faisons un microservice de collecte de statistiques.  Mais le service de d√©finition de domaine (cr√©ation d'une machine virtuelle √† l'aide de libvirt) ne verra jamais le jour, car qui a besoin d'un blanc de la machine sans son existence r√©elle. <br><br><h2>  La quatri√®me histoire.  Le frais est l'ennemi du bien <br></h2><h5>  <font color="#787979">D√©ploiement de VM: installation √† partir d'images au lieu d'installer sur un r√©seau</font> </h5><br>  Dans la cinqui√®me version du produit, le d√©ploiement d'une machine virtuelle prend assez de temps selon de vrais standards.  La raison en est l'installation du syst√®me d'exploitation sur le r√©seau. <br><br>  Pour Centos, Fedora, RedHat est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©thode de d√©marrage</a> : <br>  1. Cr√©ez un fichier kickstart. <br>  2. Sp√©cifiez le lien vers le fichier de r√©ponses dans les param√®tres du noyau linux inst.ks = &lt;lien vers le fichier kickstart&gt;. <br>  3. Ex√©cutez l'installation de kickstart. <br><br>  Le fichier Kickstart est assez flexible, vous pouvez y d√©crire toutes les √©tapes d'installation, en commen√ßant par sa m√©thode et en d√©finissant le fuseau horaire, en terminant par le partitionnement du disque et les param√®tres r√©seau.  Le param√®tre url dans nos mod√®les indique que l'installation provient d'un serveur distant. <br><br>  Pour Debian et Ubuntu, la m√©thode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©configur√©e</a> : <br>  Elle est similaire √† la pr√©c√©dente, cette m√©thode est √©galement construite autour du fichier de configuration et de son contenu.  Dans ce document, nous avons √©galement configur√© l'installation sur le r√©seau. <br><br>  L'installation de FreeBSD est similaire, mais au lieu d'un fichier kickstart, il y a un script shell de notre propre production. <br><br><h3>  Aspects positifs de l'approche </h3><br>  Cette option d'installation vous permet d'utiliser un mod√®le dans nos deux produits: VMmanager et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DCImanager</a> (gestion de serveurs d√©di√©s). <br><br>  Le d√©ploiement des machines virtuelles est assez flexible, l'administrateur du panel peut simplement copier le mod√®le de syst√®me d'exploitation et modifier le fichier de configuration comme bon lui semble. <br><br>  Tous les utilisateurs disposent toujours de versions √† jour des syst√®mes d'exploitation s'ils sont mis √† jour en temps opportun sur un serveur distant. <br><br><img src="https://habrastorage.org/webt/8w/z_/bk/8wz_bkz62ncaywrpb3mbd-eoyae.png"><br><br><h3>  C√¥t√© n√©gatif </h3><br>  Comme le montre la pratique, la flexibilit√© d'installation n'√©tait pas requise par les utilisateurs de VMmanager: en comparaison avec les serveurs d√©di√©s, peu de gens s'inqui√©taient des param√®tres de fichier kickstart sp√©cifiques pour les machines virtuelles.  Mais attendre l'installation de l'OS √©tait vraiment un luxe inadmissible.  L'inconv√©nient de la pertinence des syst√®mes d'exploitation est qu'une partie du programme d'installation est sur le r√©seau, et une partie est locale √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">initrd</a> .  Et leurs versions doivent correspondre. <br><br>  Ce sont des probl√®mes r√©solubles.  Vous pouvez cr√©er un pool de machines install√©es et cr√©er votre propre r√©f√©rentiel pour les syst√®mes d'exploitation, mais cela entra√Æne des co√ªts suppl√©mentaires. <br><br>  Comment r√©soudre ces probl√®mes sans cr√©er de r√©f√©rentiels et de pools?  Nous avons s√©lectionn√© les fichiers image du syst√®me d'exploitation.  Maintenant, le processus d'installation ressemble √† ceci: <br>  1. Copie de l'image du syst√®me d'exploitation sur le disque de la machine virtuelle. <br>  2. Augmentez la section principale de l'image de la taille de l'espace libre apr√®s la copie. <br>  3. Configuration de base (d√©finition d'un mot de passe, d'un fuseau horaire, etc.). <br><br>  Tout ce qui est nouveau est bien oubli√©.  Nous avons utilis√© des images de syst√®me d'exploitation dans VDSmanager-Linux, l'anc√™tre de VMmanager. <br><br>  Mais qu'en est-il de la flexibilit√© d'installation?  La pratique a montr√© que la plupart des utilisateurs ne sont pas int√©ress√©s par les param√®tres r√©seau sp√©cifiques et le mappage de disque sur les machines virtuelles. <br>  Et la pertinence des donn√©es?  Cela peut √™tre r√©alis√© par la pr√©sence d'images avec les derni√®res versions du syst√®me d'exploitation dans le r√©f√©rentiel, et des mises √† jour mineures peuvent √™tre install√©es dans le script de configuration initial.  Ainsi, la machine virtuelle sera d√©j√† cr√©√©e et en cours d'ex√©cution, et pour y acc√©der, vous trouverez la mise √† jour conditionnelle yum en cours d'ex√©cution. <br><br>  En retour, nous obtenons une machine virtuelle pr√™te √† l'emploi, dont le d√©ploiement ne d√©pend que de la copie du disque, de l'augmentation de la partition du disque et du d√©marrage du syst√®me d'exploitation.  La mise en ≈ìuvre de cette approche du travail avec les machines nous donne l'opportunit√© de cr√©er nos propres images et de les partager.  L'utilisateur peut installer un bundle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LAMP</a> ou un environnement complexe sur la machine virtuelle, puis cr√©er une image de cette machine.  D√©sormais, d'autres personnes n'auront pas √† perdre de temps √† installer les utilitaires n√©cessaires. <br><br>  Nous avons impl√©ment√© la configuration et la modification des partitions en utilisant les utilitaires de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suite libguestfs</a> .  Par exemple, changer un mot de passe sur une machine Linux est pass√© de 40 lignes de code, comprenant mount, chroot et usermod, en une seule ligne: <br><br><pre> <code class="cpp hljs">command = <span class="hljs-string"><span class="hljs-string">"/usr/bin/virt-customize --root-password password:{password} --domain '{domain_name}'"</span></span>.format(password=args.password, domain_name=args.domain_name)</code> </pre> <br>  En cons√©quence, nous avons fait en sorte que la machine virtuelle finie soit aussi rapide que possible.  Il convient de noter qu'avec la configuration du r√©seau et l'installation de scripts internes, le temps de d√©ploiement a l√©g√®rement augment√©.  Nous avons r√©solu ce probl√®me en affichant les √©tapes d'installation sur la face avant, comblant ainsi la pause form√©e entre la cr√©ation et l'√©tat de pr√©paration complet de la machine. <br><br>  Nous avons √©galement obtenu une approche plus flexible du d√©ploiement de machines virtuelles, sur la base de laquelle il est pratique de cr√©er vos propres images avec l'environnement n√©cessaire. <br><br><h2>  Qu'avez-vous r√©ussi √† faire </h2><br>  Dans la sixi√®me version du produit, nous avons essay√© de prendre en compte le principal inconv√©nient de la cinqui√®me: la complexit√© de l'interaction de l'utilisateur avec le produit.  Nous avons r√©duit le d√©lai d'ex√©cution des actions cl√©s.  Associ√© √† une interface non bloquante, cela permet de travailler avec le panneau sans attente forc√©e.  La conteneurisation a rendu le processus d'installation du produit plus facile et plus pratique.  L'utilisation de technologies modernes et de divers langages de programmation a simplifi√© le support et la maintenance pour les programmeurs et les sp√©cialistes du support technique.  Le passage aux microservices a permis d'ajouter de nouvelles fonctionnalit√©s rapidement et avec des restrictions mineures. <br><br>  En conclusion, je veux dire que le nouveau produit est une bonne occasion d'essayer d'autres approches de d√©veloppement, de nouvelles technologies.  Il convient de se rappeler pourquoi vous faites cela, quelles nouvelles choses cela vous apportera, ainsi qu'√† vos utilisateurs.  Allez-y! <br><br><blockquote>  Nous invitons la communaut√© Habr √† voir la version b√™ta de VMmanager 6 et √† laisser vos commentaires.  Pour ce faire, acc√©dez √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">my.saasvm.com</a> , connectez-vous et connectez un serveur d√©di√© (CentOS 7 x64, acc√®s Internet, adresse IP publique). <br><br>  Si vous n'avez pas de serveur, √©crivez-nous √† <a href="">help@ispsystem.com</a> ou discutez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site</a> , nous vous fournirons des √©quipements de test de notre partenaire Selectel. <br><br>  En savoir plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans les actualit√©s sur le site Web d'ISPsystem</a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441968/">https://habr.com/ru/post/fr441968/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441954/index.html">R√©compense utilisateur aux auteurs de Habr</a></li>
<li><a href="../fr441956/index.html">Gestion des erreurs unifi√©e (option C ++ pour microcontr√¥leurs)</a></li>
<li><a href="../fr441962/index.html">Index dans PostgreSQL - 1</a></li>
<li><a href="../fr441964/index.html">Trucs et astuces Kubernetes: d√©placement des ressources de cluster vers Helm 2</a></li>
<li><a href="../fr441966/index.html">Kit de d√©marrage des tests de s√©curit√© Web</a></li>
<li><a href="../fr441970/index.html">Analyse FinFisher Butkit</a></li>
<li><a href="../fr441972/index.html">Invidious - Frontend YouTube alternatif</a></li>
<li><a href="../fr441974/index.html">Le chemin de l'historien des programmeurs RH aux programmeurs Java: un peu de chance et de pers√©v√©rance</a></li>
<li><a href="../fr441976/index.html">Avec vous FizTech.Science: nous recherchons des param√®tres cach√©s et plongons dans le merveilleux monde quantique</a></li>
<li><a href="../fr441978/index.html">Test fonctionnel des comp√©tences de Yandex Alice sur Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>