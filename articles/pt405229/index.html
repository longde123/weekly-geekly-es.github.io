<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äç‚öñÔ∏è üìé üö≠ Uma nova abordagem para o cache do processador ü•ß üó®Ô∏è üìñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os chips nos computadores de mesa mais modernos t√™m quatro n√∫cleos, mas os fabricantes de chips j√° anunciaram planos de atualizar para seis n√∫cleos, e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uma nova abordagem para o cache do processador</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405229/"> Os chips nos computadores de mesa mais modernos t√™m quatro n√∫cleos, mas os fabricantes de chips j√° anunciaram planos de atualizar para seis n√∫cleos, e os processadores de 16 n√∫cleos est√£o longe de ser incomuns para servidores de alto desempenho. <br><br>  Quanto mais n√∫cleos, maior o problema de aloca√ß√£o de mem√≥ria entre todos os n√∫cleos enquanto trabalham juntos.  Com o aumento do n√∫mero de n√∫cleos, √© cada vez mais lucrativo minimizar a perda de tempo no gerenciamento dos n√∫cleos durante o processamento de dados - porque a taxa de troca de dados fica atr√°s da velocidade do processador e do processamento de dados na mem√≥ria.  Voc√™ pode ativar fisicamente o cache r√°pido de outra pessoa ou pode usar seu pr√≥prio lento, mas economizar tempo de transfer√™ncia de dados.  A tarefa √© complicada pelo fato de a quantidade de mem√≥ria solicitada pelos programas n√£o corresponder claramente aos tamanhos de cache de cada tipo. <br><br>  Somente uma quantidade muito limitada de mem√≥ria pode ser localizada fisicamente o mais pr√≥ximo poss√≠vel do processador - um cache do processador de n√≠vel L1, cuja quantidade √© extremamente pequena.  Daniel Sanchez, Po-An Tsai, e Nathan Beckmann, pesquisadores do Laborat√≥rio de Ci√™ncia da Computa√ß√£o e Intelig√™ncia Artificial do Instituto de Tecnologia de Massachusetts, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ensinaram ao</a> computador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">como</a> configurar diferentes tipos de mem√≥ria para ajustar uma hierarquia flex√≠vel de programas. tempo real  O novo sistema, chamado Jenga, analisa as necessidades volum√©tricas e a frequ√™ncia do acesso do programa √† mem√≥ria e redistribui a pot√™ncia de cada um dos tr√™s tipos de cache do processador em combina√ß√µes que proporcionam maior efici√™ncia e economia de energia. <br><br><img src="https://habrastorage.org/web/529/973/dab/529973dabf5740f28e7c90654392fdc7.jpg"><br><a name="habracut"></a><br>  Para come√ßar, os pesquisadores testaram o aumento de desempenho com uma combina√ß√£o de mem√≥ria est√°tica e din√¢mica ao trabalhar em programas para um processador de n√∫cleo √∫nico e obtiveram a hierarquia principal - quando √© melhor usar essa combina√ß√£o.  De 2 tipos de mem√≥ria ou de um.  Dois par√¢metros foram avaliados - atraso do sinal (lat√™ncia) e consumo de energia durante a opera√ß√£o de cada programa.  Cerca de 40% dos programas come√ßaram a funcionar pior com uma combina√ß√£o de tipos de mem√≥ria, o resto - melhor.  Tendo corrigido quais programas ‚Äúgostam‚Äù de desempenho misto e quais - o tamanho da mem√≥ria, os pesquisadores constru√≠ram seu sistema Jenga. <br><br>  Eles praticamente testaram 4 tipos de programas em um computador virtual com 36 n√∫cleos.  Testou o programa: <br><br><ul><li>  omnet - Testbed de rede modular objetivo, biblioteca de modelagem C e plataforma de ferramentas de modelagem de rede (azul na figura) </li><li>  mcf - Meta Content Framework (vermelho) </li><li>  astar - software para exibi√ß√£o de realidade virtual (verde) </li><li>  bzip2 - arquivador (cor roxa) </li></ul><br><img src="https://habrastorage.org/web/418/a86/477/418a864779484950a405f6757cd7054f.JPG"><br>  A imagem mostra onde e como os dados de cada programa foram processados.  As letras indicam onde cada aplicativo est√° sendo executado (um por quadrante), as cores indicam onde seus dados est√£o localizados e a hachura indica o segundo n√≠vel da hierarquia virtual quando est√° presente. <br><br><div class="spoiler">  <b class="spoiler_title">N√≠veis de cache</b> <div class="spoiler_text">  O cache da CPU √© dividido em v√°rios n√≠veis.  Para processadores universais - at√© 3. A mem√≥ria mais r√°pida √© o cache de primeiro n√≠vel - cache L1, porque est√° localizado no mesmo chip que o processador.  Consiste em um cache de comando e um cache de dados.  Alguns processadores sem cache L1 n√£o podem funcionar.  O cache L1 √© executado na frequ√™ncia do processador e pode ser acessado a cada ciclo de clock.  Geralmente, √© poss√≠vel executar v√°rias opera√ß√µes de leitura / grava√ß√£o ao mesmo tempo.  O volume geralmente √© pequeno - n√£o mais que 128 KB. <br><br>  O cache L1 interage com um cache de segundo n√≠vel - L2.  √â o segundo mais r√°pido.  Geralmente, ele est√° localizado no chip, como L1, ou nas imedia√ß√µes do n√∫cleo, por exemplo, em um cartucho do processador.  Nos processadores mais antigos, um chipset na placa-m√£e.  O tamanho do cache L2 √© de 128 KB a 12 MB.  Nos modernos processadores com v√°rios n√∫cleos, o cache de segundo n√≠vel, localizado no mesmo chip, √© uma mem√≥ria compartilhada - com um tamanho total de cache de 8 MB, 2 MB por n√∫cleo.  Normalmente, a lat√™ncia do cache L2 localizado no chip principal est√° entre 8 e 20 ciclos de clock.  Em tarefas relacionadas a v√°rios acessos a uma √°rea limitada da mem√≥ria, por exemplo, um DBMS, seu uso completo aumenta a produtividade em dez vezes. <br><br>  O cache L3 √© geralmente ainda maior, embora um pouco mais lento que L2 (devido ao fato de o barramento entre L2 e L3 ser mais estreito que o barramento entre L1 e L2).  L3 geralmente est√° localizado separadamente do n√∫cleo da CPU, mas pode ser grande - mais de 32 MB.  O cache L3 √© mais lento que os caches anteriores, mas ainda mais r√°pido que a RAM.  Nos sistemas multiprocessadores √© de uso comum.  O uso do cache de terceiro n√≠vel √© justificado em uma gama muito estreita de tarefas e pode n√£o apenas aumentar a produtividade, mas vice-versa e levar a uma diminui√ß√£o geral no desempenho do sistema. <br><br>  Desabilitar o cache do segundo e terceiro n√≠veis √© mais √∫til em problemas matem√°ticos quando a quantidade de dados √© menor que o tamanho do cache.  Nesse caso, voc√™ pode carregar todos os dados imediatamente no cache L1 e process√°-los. <br></div></div><br>  Periodicamente, o Jenga no n√≠vel do sistema operacional reconfigura hierarquias virtuais para minimizar a troca de dados, dadas as restri√ß√µes de recursos e o comportamento do aplicativo.  Cada reconfigura√ß√£o consiste em quatro etapas. <br><br><img src="https://habrastorage.org/web/ce8/15c/03a/ce815c03aa5349de9e3d344b056770de.JPG"><br><br>  O Jenga distribui dados n√£o apenas dependendo de quais programas s√£o despachados - adorando uma grande mem√≥ria de velocidade √∫nica ou amando o desempenho de caches mistos, mas tamb√©m dependendo da proximidade f√≠sica das c√©lulas da mem√≥ria com os dados que est√£o sendo processados.  Independentemente do tipo de cache que o programa exija por padr√£o ou hierarquia.  O principal √© minimizar o atraso do sinal e o consumo de energia.  Dependendo de quantos tipos de mem√≥ria o programa "gosta", o Jenga modela a lat√™ncia de cada hierarquia virtual com um ou dois n√≠veis.  Hierarquias de dois n√≠veis formam uma superf√≠cie, hierarquias de n√≠vel √∫nico formam uma curva.  A Jenga projeta o atraso m√≠nimo nos tamanhos VL1, o que fornece duas curvas.  Por fim, o Jenga usa essas curvas para selecionar a melhor hierarquia (ou seja, tamanho do VL1). <br><br>  O uso de Jenga deu um efeito tang√≠vel.  O chip virtual de 36 n√∫cleos era 30% mais r√°pido e usava 85% menos energia.  √â claro que, embora o Jenga seja apenas uma simula√ß√£o de um computador em funcionamento, levar√° algum tempo at√© que voc√™ veja exemplos reais desse cache e at√© que os fabricantes de chips o aceitem se gostarem da tecnologia. <br><br><h2>  Configura√ß√£o condicional de 36 m√°quinas nucleares </h2><br><ul><li>  <b>Processadores</b> .  36 n√∫cleos, x86-64 ISA, 2,4 GHz, semelhante a Silvermont OOO: 8B de largura <br>  ifetch;  Bpred de dois n√≠veis com BHSRs de 512 √ó 10 bits + PHT de 1024 √ó 2 bits, decodifica√ß√£o / emiss√£o / renomea√ß√£o / confirma√ß√£o de duas vias, QI e ROB de 32 entradas, QI e ROB de 32 entradas, LQ de 10 entradas e SQ de 16 entradas;  371 pJ / instru√ß√£o, 163 mW / pot√™ncia est√°tica do n√∫cleo </li><li>  <b>Caches de n√≠vel L1</b> .  Caches associativos a conjuntos de 8 KB, dados divididos e instru√ß√µes de 32 <br>  Lat√™ncia de 3 ciclos;  15/33 pJ por acerto / erro </li><li>  <b>Servi√ßo de pr√©-busca de pr√©-buscadores</b> .  Pr√©-buscadores de fluxo de 16 entradas modelados e validados contra <br>  Nehalem </li><li>  <b>Caches de n√≠vel L2</b> .  128 KB privados por n√∫cleo, associativos a conjuntos de 8 vias, inclusive, lat√™ncia de 6 ciclos;  46/93 pJ por golpe / falta </li><li>  <b>Modo coerente (coer√™ncia)</b> .  Bancos de diret√≥rio de lat√™ncia de 16 vias e 6 ciclos para Jenga;  diret√≥rios L3 em cache para outros </li><li>  <b>NoC global</b> .  Malha 6 √ó 6, flits e links de 128 bits, roteamento XY, roteadores em pipeline de 2 ciclos, links de 1 ciclo;  63/71 pJ por roteador / link flit transversal, 12 / 4mW roteador / link de energia est√°tica </li><li>  <b>Blocos de mem√≥ria est√°tica SRAM</b> .  18 MB, um banco de 512 KB por bloco, zcache de 52 candidatos e 4 vias, lat√™ncia de banco de 9 ciclos, particionamento Vantage;  240/500 pJ por acerto / erro, 28 mW / pot√™ncia est√°tica do banco </li><li>  <b>Mem√≥ria din√¢mica multicamada DRAM empilhada</b> .  1152MB, um cofre de 128MB por 4 blocos, liga com MAP-I DDR3-3200 (1600 MHz), barramento de 128 bits, 16 fileiras, 8 bancos / classifica√ß√£o, buffer de linha de 2 KB;  4,4 / 6,2 nJ por acerto / erro, 88 mW / pot√™ncia est√°tica do cofre </li><li>  <b>Mem√≥ria principal</b> .  4 canais DDR3-1600, barramento de 64 bits, 2 fileiras / canal, 8 bancos / classifica√ß√£o, buffer de linha de 8 KB;  20 nJ / acesso, pot√™ncia est√°tica de 4W </li><li>  <b>DRAM</b> .  tCAS = 8, tRCD = 8, tRTP = 4, tRAS = 24, tRP = 8, tRRD = 4, tWTR = 4, tWR = 8, tFAW = 18 (todos os tempos em tCK; DRAM empilhada tem metade do tCK como mem√≥ria principal ) </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt405229/">https://habr.com/ru/post/pt405229/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt405219/index.html">Grande voo de pequenos sat√©lites</a></li>
<li><a href="../pt405221/index.html">No gelo do continente flutuante: uma hist√≥ria da explora√ß√£o do √Årtico</a></li>
<li><a href="../pt405223/index.html">Trabalhando com o protocolo Modbus no aplicativo iRidium lite (v√≠deo)</a></li>
<li><a href="../pt405225/index.html">Guia ponto a passo da c√¢mera VKS</a></li>
<li><a href="../pt405227/index.html">Estabilidade de n√™utrons no n√∫cleo at√¥mico</a></li>
<li><a href="../pt405235/index.html">Processadores escal√°veis ‚Äã‚ÄãIntel Xeon - novos nomes e novos modelos</a></li>
<li><a href="../pt405237/index.html">Dinheiro do sol: um projeto de uma plataforma p2p para o com√©rcio de eletricidade "limpa" foi lan√ßado na OIC</a></li>
<li><a href="../pt405239/index.html">EVAPOLAR: um pequeno teste usando um termovisor</a></li>
<li><a href="../pt405241/index.html">A DARPA encomendou o desenvolvimento de implantes cerebrais de alta resolu√ß√£o para a interface c√©rebro-computador</a></li>
<li><a href="../pt405243/index.html">Pesquisa: jogos cerebrais cognitivos s√£o in√∫teis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>