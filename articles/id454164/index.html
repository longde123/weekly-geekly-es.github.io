<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏾 🙉 🤵🏽 Bagaimana cara kerja pengujian A / B di Avito? 🦑 ✉️ 🏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Nama saya Danila, saya bekerja di sebuah tim yang mengembangkan infrastruktur analitik di Avito. Pusat dari infrastruktur ini adalah pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara kerja pengujian A / B di Avito?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/454164/"><p>  Halo semuanya.  Nama saya Danila, saya bekerja di sebuah tim yang mengembangkan infrastruktur analitik di Avito.  Pusat dari infrastruktur ini adalah pengujian A / B. </p><br><p>  Eksperimen A / B adalah alat pengambilan keputusan utama di Avito.  Dalam siklus pengembangan produk kami, tes A / B adalah suatu keharusan.  Kami menguji setiap hipotesis dan hanya meluncurkan perubahan positif. </p><br><p>  Kami mengumpulkan ratusan metrik dan dapat menelusurinya ke bagian bisnis: vertikal, wilayah, pengguna yang berwenang, dll. Kami melakukan ini secara otomatis menggunakan platform tunggal untuk percobaan.  Dalam artikel ini, saya akan memberi tahu Anda dengan cukup detail bagaimana platform diatur dan kami akan membahas beberapa detail teknis yang menarik. </p><br><p><img src="https://habrastorage.org/webt/ts/r_/qw/tsr_qwh3l7qfw2kob14z0lsaiya.png"></p><a name="habracut"></a><br><p>  Fungsi utama platform A / B dirumuskan sebagai berikut. </p><br><ol><li>  Membantu Anda menjalankan eksperimen dengan cepat </li><li>  Mengontrol persimpangan eksperimen yang tidak diinginkan </li><li>  Metrik hitungan, stat.  tes, memvisualisasikan hasil </li></ol><br><p>  Dengan kata lain, platform membantu membuat keputusan bebas kesalahan paling cepat. </p><br><p>  Jika kami mengabaikan proses pengembangan fitur yang dikirim untuk pengujian, siklus penuh percobaan akan terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/ve/wd/by/vewdbye97eexzetbj3riubs-i1w.png"></p><br><ul><li>  Pelanggan (analis atau manajer produk) mengonfigurasi parameter percobaan melalui panel admin. </li><li>  Layanan split, sesuai dengan parameter ini, mendistribusikan grup A / B yang diperlukan ke perangkat klien. </li><li>  Tindakan pengguna dikumpulkan dalam log mentah yang melewati agregasi dan berubah menjadi metrik. </li><li>  Metrik dijalankan melalui uji statistik. </li><li>  Hasilnya divisualisasikan di portal internal sehari setelah peluncuran. </li></ul><br><p>  Semua transportasi data dalam satu siklus membutuhkan waktu satu hari.  Sebagai aturan, eksperimen berlangsung seminggu, tetapi pelanggan menerima peningkatan hasil setiap hari. </p><br><p>  Sekarang mari selami rinciannya. </p><br><h1 id="upravlenie-eksperimentom">  Manajemen eksperimen </h1><br><p>  Panel admin menggunakan format YAML untuk mengkonfigurasi percobaan. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/lb/ko/k_/lbkok_pnexw8kzvdlkoq1jteuzy.png"></a> </p><br><p>  Ini adalah solusi yang nyaman untuk tim kecil: menyelesaikan kapabilitas konfigurasi tanpa front.  Menggunakan konfigurasi teks menyederhanakan pekerjaan untuk pengguna: Anda perlu membuat lebih sedikit klik dengan mouse.  Solusi serupa digunakan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerangka kerja A / B Airbnb</a> . </p><br><p>  Untuk membagi lalu lintas ke dalam kelompok, kami menggunakan teknik hashing garam biasa. </p><br><p><img src="https://habrastorage.org/webt/fs/ar/r_/fsarr_kezrgckfiuvf1w1uyuqfs.png"></p><br><p>  Untuk menghilangkan efek "memori" pengguna, saat memulai percobaan baru, kami melakukan pencampuran tambahan dengan garam kedua: </p><br><p><img src="https://habrastorage.org/webt/3-/qd/w0/3-qdw0xc2l0swwonorrgkfd_lpg.png"></p><br><p>  Prinsip yang sama dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">presentasi Yandex</a> . </p><br><p>  Untuk mencegah persimpangan percobaan yang berpotensi berbahaya, kami menggunakan logika yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mirip dengan "lapisan" di Google</a> . </p><br><h1 id="sbor-metrik">  Koleksi metrik </h1><br><p>  Kami menempatkan log mentah di Vertica dan menggabungkannya ke dalam tabel persiapan dengan struktur: </p><br><p><img src="https://habrastorage.org/webt/v6/tw/bv/v6twbvgj-togpdbylpqq21gfbz0.png"></p><br><p>  Pengamatan biasanya penghitung acara sederhana.  Pengamatan digunakan sebagai komponen dalam rumus perhitungan metrik. </p><br><p>  Rumus untuk menghitung metrik apa pun adalah sebagian kecil, dalam pembilang dan penyebutnya adalah jumlah pengamatan: </p><br><p><img src="https://habrastorage.org/webt/me/sb/or/mesbordzixv0yrcl4oo5nho5aa4.png"></p><br><p>  Dalam salah satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporan Yandex,</a> metrik dibagi menjadi dua jenis: oleh pengguna dan Rasio.  Ini masuk akal secara bisnis, tetapi dalam infrastruktur lebih mudah untuk mempertimbangkan semua metrik dengan cara yang sama seperti Rasio.  Generalisasi ini valid, karena metrik "posyuzerny" jelas direpresentasikan sebagai fraksi: </p><br><p><img src="https://habrastorage.org/webt/d_/ih/l5/d_ihl5vdcvdguaohaytz5xkfepy.png"></p><br><p>  Kami merangkum pengamatan dalam pembilang dan penyebut metrik dalam dua cara. <br>  Sederhana: </p><br><p><img src="https://habrastorage.org/webt/q9/fk/vc/q9fkvc6qsmj6dzwqknqnqwpgrts.png"></p><br><p>  Ini adalah jumlah biasa dari setiap pengamatan: jumlah pencarian, klik pada iklan, dll. <br>  Dan yang lebih rumit: </p><br><p><img src="https://habrastorage.org/webt/iu/_s/ru/iu_srukdm2pyxrvoizc68butlx8.png"></p><br><p>  Sejumlah kunci unik, dalam pengelompokan dimana total pengamatan lebih besar dari ambang yang diberikan. </p><br><p>  Rumus seperti itu mudah diatur menggunakan konfigurasi YAML: </p><br><p><img src="https://habrastorage.org/webt/ga/i3/qj/gai3qjape-xmwg2pyfg0snj6lao.png"></p><br><p>  Parameter groupby dan threshold adalah opsional.  Hanya mereka yang menentukan metode penjumlahan kedua. </p><br><p>  Standar yang diuraikan memungkinkan Anda mengonfigurasi hampir semua metrik online yang dapat Anda pikirkan.  Pada saat yang sama, logika sederhana dipertahankan yang tidak membebani infrastruktur secara berlebihan. </p><br><h1 id="statisticheskiy-kriteriy">  Kriteria Statistik </h1><br><p>  Kami mengukur signifikansi penyimpangan dengan metrik menggunakan metode klasik: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">T-test</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mann-Whitney U-test</a> .  Syarat utama yang diperlukan untuk menerapkan kriteria ini adalah bahwa pengamatan dalam sampel tidak boleh saling bergantung.  Di hampir semua percobaan kami, kami percaya bahwa pengguna (Uid) memenuhi kondisi ini. </p><br><p><img src="https://habrastorage.org/webt/v-/ya/nz/v-yanzyx8c--fqqgnzkhlkg4j0c.png"></p><br><p>  Sekarang muncul pertanyaan: bagaimana melakukan T-test dan MW-test untuk metrik Rasio?  Untuk uji-T, Anda harus dapat membaca varians sampel, dan untuk MW, sampel harus “ditentukan pengguna”. </p><br><p><img src="https://habrastorage.org/webt/d-/7j/p2/d-7jp2xfsktkjajzki-wrp8sugw.png"></p><br><p>  Jawaban: Anda perlu memperluas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rasio dalam seri Taylor ke urutan pertama pada suatu titik</a> <math> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>k</mi><mi>i</mi><mi>r</mi><mi>i</mi><mo stretchy=&quot;false&quot;>[</mo><mi>X</mi><mtext>&amp;#xA0;</mtext><mi>k</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>n</mi><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>k</mi><mi>i</mi><mi>r</mi><mi>i</mi><mo stretchy=&quot;false&quot;>[</mo><mi>Y</mi><mtext>&amp;#xA0;</mtext><mi>k</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>n</mi><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="35.708ex" height="2.66ex" viewBox="0 -832 15374.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-45" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6B" x="1404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-69" x="1925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-72" x="2271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-69" x="2722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-5B" x="3068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-58" x="3346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6B" x="4449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-61" x="4970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6E" x="5500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-61" x="6100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6E" x="6630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-5D" x="7230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-2C" x="7509" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-45" x="7954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6B" x="8968" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-69" x="9490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-72" x="9835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-69" x="10287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-5B" x="10632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-59" x="10911" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6B" x="11924" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-61" x="12446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6E" x="12975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-61" x="13576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMATHI-6E" x="14105" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-5D" x="14706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhgZjhvYgZkehWBoBPFgfUFoN-N9IA#MJMAIN-29" x="14984" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mi>E</mi></mrow><mtext>&nbsp;</mtext><mi>k</mi><mi>i</mi><mi>r</mi><mi>i</mi><mo stretchy="false">[</mo><mi>X</mi><mtext>&nbsp;</mtext><mi>k</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>n</mi><mo stretchy="false">]</mo><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><mi>E</mi></mrow><mtext>&nbsp;</mtext><mi>k</mi><mi>i</mi><mi>r</mi><mi>i</mi><mo stretchy="false">[</mo><mi>Y</mi><mtext>&nbsp;</mtext><mi>k</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>n</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> ({E} \ kiri [X \ kanan], {E} \ kiri [Y \ kanan]) </script>   : </p><br><p><img src="https://habrastorage.org/webt/ky/im/td/kyimtdhnynvygcu_r867uzeoubu.png"></p><br><p>  Rumus ini mengubah dua sampel (pembilang dan penyebut) menjadi satu, mempertahankan mean dan varians (asimtotik), yang memungkinkan penggunaan statistik klasik.  tes. </p><br><p><img src="https://habrastorage.org/webt/il/h3/ac/ilh3acbdbdjnszyjezba85ee4ku.png"></p><br><p>  Gagasan serupa disebut oleh rekan kerja Yandex, metode linierisasi Rasio (penampilan satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kali</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dua</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kali</a> ). </p><br><h1 id="proizvoditelnost-pri-masshtabirovanii">  Kinerja penskalaan </h1><br><p>  Menggunakan cepat untuk stat CPU.  kriteria memungkinkan untuk melakukan jutaan iterasi (perbandingan pengobatan vs kontrol) dalam hitungan menit pada server yang sepenuhnya biasa dengan 56 core.  Tetapi dalam kasus volume data yang besar, kinerja terletak, pertama-tama, dalam penyimpanan dan waktu baca dari disk. </p><br><p>  Perhitungan metrik Uid setiap hari menghasilkan sampel dengan ukuran total ratusan miliar nilai (karena banyaknya eksperimen simultan, ratusan metrik, dan akumulasi kumulatif).  Terlalu bermasalah untuk mengeluarkan volume seperti itu dari disk setiap hari (meskipun ada banyak basis kolom Vertica).  Karena itu, kami terpaksa mengurangi kardinalitas data.  Tapi kami melakukan ini hampir tanpa kehilangan informasi tentang varians menggunakan teknik yang disebut "Bucket". </p><br><p>  Idenya sederhana: kita memiliki Uid dan, menurut sisa divisi, “hamburkan” mereka ke dalam sejumlah ember (kami menyatakan nomornya dengan B): </p><br><p><img src="https://habrastorage.org/webt/cd/1h/x-/cd1hx-k8rgilkmwxafotz3-tgok.png"></p><br><p>  Sekarang kita beralih ke unit eksperimental baru - ember.  Kami merangkum pengamatan dalam ember (pembilang dan penyebutnya independen): </p><br><p><img src="https://habrastorage.org/webt/yv/jq/bz/yvjqbz34yd8yswtoff50zpgj3g0.png"></p><br><p>  Dengan transformasi ini, kondisi independensi pengamatan terpenuhi, nilai metrik tidak berubah, dan mudah untuk memverifikasi bahwa varians metrik (rata-rata di atas sampel pengamatan) dipertahankan: </p><br><p><img src="https://habrastorage.org/webt/df/ku/6p/dfku6pb74plagc0doxg62blhdly.png"></p><br><p>  Semakin banyak ember, semakin sedikit informasi yang hilang, dan semakin kecil kesalahan dalam kesetaraan.  Di Avito, kita ambil B = 200. </p><br><p>  Kepadatan distribusi metrik setelah konversi bucket selalu menjadi serupa dengan normal. </p><br><p><img src="https://habrastorage.org/webt/fk/sa/rf/fksarfomowkwdzzhwveb10vbtr0.png"></p><br><p>  Sebanyak sampel besar yang Anda inginkan dapat dikurangi menjadi ukuran tetap.  Pertumbuhan jumlah data yang disimpan dalam kasus ini hanya secara linear tergantung pada jumlah percobaan dan metrik. </p><br><h1 id="vizualizaciya-rezultatov">  Visualisasi Hasil </h1><br><p>  Sebagai alat visualisasi, kami menggunakan Tableau dan tampilan web di Tableau Server.  Setiap karyawan Avito memiliki akses di sana.  Perlu dicatat bahwa Tableau melakukan pekerjaan dengan baik.  Untuk mengimplementasikan solusi yang serupa menggunakan pengembangan full back / front akan menjadi tugas yang jauh lebih banyak sumber daya. </p><br><p>  Hasil setiap percobaan adalah selembar angka beberapa ribu.  Visualisasi harus sedemikian rupa untuk meminimalkan kesimpulan yang salah dalam hal implementasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kesalahan jenis pertama dan kedua</a> , dan pada saat yang sama tidak untuk "kehilangan" perubahan dalam metrik dan bagian penting. </p><br><p>  Pertama, kami memantau metrik "kesehatan" percobaan.  Yaitu, kami menjawab pertanyaan: "Apakah benar para peserta" dituangkan "ke dalam masing-masing kelompok?", "Apakah itu sama dengan pengguna yang berwenang atau yang baru?" </p><br><p> <a href=""><img src="https://habrastorage.org/webt/k1/-r/-x/k1-r-xrjn1gyeg8-o6-9eolq-qe.png"></a> </p><br><p>  Dalam kasus penyimpangan yang signifikan secara statistik, sel-sel yang sesuai disorot.  Saat Anda mengarahkan kursor ke nomor apa pun, dinamika kumulatif hari itu ditampilkan. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ju/ke/z0/jukez0yfvsmoyu_gmpy384rsmzc.png" width="600"></a> </p><br><p>  Dasbor utama dengan metrik terlihat seperti ini: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ng/mb/ju/ngmbjufio9wsbf0mnpld0ldqajq.png"></a> </p><br><p>  Setiap baris adalah perbandingan grup dengan metrik tertentu di bagian tertentu.  Di sebelah kanan adalah panel dengan filter untuk eksperimen dan metrik.  Panel filter bagian bawah. </p><br><p>  Setiap perbandingan metrik terdiri dari beberapa metrik.  Mari menganalisis nilai-nilai mereka dari kiri ke kanan: </p><br><p>  <strong>1. MDE.</strong>  <strong>Efek Deteksi Minimum</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sy/xw/gk/syxwgkaimg-pgsqtnrriv8ybf5e.png"></a> </p><br><p>  ⍺ dan β adalah probabilitas kesalahan yang dipilih sebelumnya dari jenis pertama dan kedua.  MDE sangat penting jika perubahannya tidak signifikan secara statistik.  Ketika membuat keputusan, pelanggan harus ingat bahwa kurangnya stat.  Signifikansi sama saja tidak berpengaruh.  Cukup dapat diandalkan, kita hanya bisa mengatakan bahwa efek yang mungkin tidak lebih dari MDE. </p><br><p>  <strong>2. MW |</strong>  <strong>T. Mann-Whitney Hasil U-dan T-test</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/za/vs/j8/zavsj8pnzmrazz-maz_lucwjrti.png"></a> </p><br><p>  Panel menampilkan nilai statistik z dan t (masing-masing untuk MW dan T).  Dalam tooltip - dinamika nilai-p.  Jika perubahannya signifikan, maka sel disorot dalam warna merah atau hijau, tergantung pada tanda perbedaan antara kelompok.  Dalam hal ini, kami katakan bahwa metriknya “berwarna”. </p><br><p>  <strong>3. Angkat.</strong>  <strong>Persentase perbedaan antar kelompok</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/cr/db/fk/crdbfkcytwrjdzez3l-v1gu1c8e.png"></a> </p><br><p>  <strong>4. Berarti |</strong>  <strong>Bil |</strong>  <strong>Den</strong>  <strong>Nilai metrik, serta pembilang dan penyebut secara terpisah</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/8d/kc/wp/8dkcwpugkmf6f6qqdrmnksp-rda.png"></a> </p><br><p>  Kami menerapkan uji-T lain untuk pembilang dan penyebut, yang membantu untuk memahami kontribusi siapa yang menentukan. </p><br><p>  <strong>5. Std.</strong>  <strong>Standar Deviasi Selektif</strong> <br>  <strong>6. Hist.</strong>  <strong>Shapiro-Wilk menguji normalitas distribusi "bucket".</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/0d/dh/h6/0ddhh68_mdhgjpb6dyufnucnmfc.png"></a> </p><br><p>  Jika indikatornya merah, maka mungkin sampel tersebut memiliki outlier atau ekor panjang yang tidak normal.  Dalam hal ini, Anda harus mengambil hasilnya sesuai dengan metrik ini dengan cermat, atau tidak sama sekali.  Mengklik pada indikator membuka histogram metrik oleh grup.  Histogram dengan jelas menunjukkan anomali - lebih mudah untuk menarik kesimpulan. </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Munculnya platform A / B di Avito adalah titik awal ketika produk kami mulai tumbuh lebih cepat.  Setiap hari, kami melakukan percobaan hijau yang membebani tim;  dan "merah," yang menyediakan makanan sehat untuk dipikirkan. </p><br><p>  Kami berhasil membangun sistem pengujian dan metrik A / B yang efektif.  Seringkali kita memecahkan masalah kompleks dengan metode sederhana.  Karena kesederhanaan ini, infrastruktur memiliki margin keselamatan yang baik. </p><br><p>  Saya yakin mereka yang akan membangun platform A / B di perusahaan mereka menemukan beberapa wawasan menarik dalam artikel tersebut.  Saya senang berbagi pengalaman kami dengan Anda. </p><br><p>  Tulis pertanyaan dan komentar - kami akan mencoba menjawabnya. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id454164/">https://habr.com/ru/post/id454164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id454144/index.html">Di Jawa 13 mereka ingin menambahkan "blok teks"</a></li>
<li><a href="../id454148/index.html">Memeriksa kinerja SOC</a></li>
<li><a href="../id454154/index.html">"Branches of Hell": kontrol cloud tempat pembuangan sampah ilegal dan tempat pembuangan sampah berbahaya</a></li>
<li><a href="../id454156/index.html">Ban dan protokol dalam otomasi industri: cara kerjanya</a></li>
<li><a href="../id454160/index.html">Menggunakan PowerShell untuk Meningkatkan Keistimewaan Akun Lokal</a></li>
<li><a href="../id454166/index.html">6 Juni - Forum VeeamON di Moskow</a></li>
<li><a href="../id454168/index.html">Arena utama negara. Bagaimana Luzhniki diperbarui sebelum Piala Dunia</a></li>
<li><a href="../id454170/index.html">Selamat datang di Pertemuan DroidHeads 8 Juni</a></li>
<li><a href="../id454172/index.html">Mengirim statistik dari DataFrame ke BigQuery menggunakan statistik Yandex.Direct sebagai contoh</a></li>
<li><a href="../id454176/index.html">Uibook - alat pengujian visual untuk Bereaksi komponen dengan kueri media</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>