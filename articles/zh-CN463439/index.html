<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏿 🚵🏿 📸 Apollo机载控制计算机：油尺和多个缝合芯上的内存工程分析 🏜️ ✡️ 🚗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="控制计算机 （阿波罗制导计算机，AGC）位于阿波罗太空船上，帮助该船到达月球并降落在其表面。 AGC软件被物理地编入了只读存储器核心核心存储器[core绳索存储器]。 Ken Shirrif和志趣相投的人们正在重建AGC（如下图所示），该AGC的内核上没有足够的内存，而是安装了具有此类内存的模拟器盒...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apollo机载控制计算机：油尺和多个缝合芯上的内存工程分析</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463439/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">控制计算机</a> （阿波罗制导计算机，AGC）位于阿波罗太空船上，帮助该船到达月球并降落在其表面。  AGC软件被物理地编入了只读存储器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">核心</a>核心存储器[core绳索存储器]。  Ken Shirrif和志趣相投的人们正在重建AGC（如下图所示），该AGC的内核上没有足够的内存，而是安装了具有此类内存的模拟器盒。 这些程序盒在程序开发和地面测试期间使用，因此工程师不必不断地闪存。 该模拟器没有文档，因此[我是博客条目的作者/大约。 翻译]进行了工程分析，组装了界面，并使用模拟器在AGC上启动了程序。 但是，在此过程中我们遇到了一些困难。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a1f/f07/ef1/a1ff07ef1596836fe6483978c54b0945.jpg"><br>  <i>AGC电脑的主机盖已卸下。</i>  <i>您会看到主板上有一堆电线。</i>  <i>在存储位置，可以看到模拟框。</i>  <i>前景中的接口卡是现代的。</i> <br><a name="habracut"></a><br><h2> 内存在多个缝合线芯上 </h2><br>  AGC在多个缝合核心上具有六个存储模块，每个核心仅存储6公斤信息（约12 Kb）。 内存模块有点像视频游戏的ROM盒，它们使软件保持恒定但可擦除的形式。 通过将导线编织穿过磁芯来记录程序。 穿过铁心的导线表示为位1，绕过一根的导线表示为位0。通过将192根导线编织通过或绕过磁芯，可以存储192位，这比磁芯上的可重写内存（每芯存储一位）要高得多。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef2/724/d84/ef2724d84b9c6240b02427fc24ef3a83.jpg"><br>  <i>带有AGC的多针芯上的存储器（第I块）</i> <br><br> 制作这样的内存是一个艰苦的过程，耗时8周，每个模块的成本为15,000美元。 经验丰富的妇女手动穿过电线，并用一根空心针将电线穿过其中一个接一个地闪烁芯线（如下图所示）。 它们由自动系统辅助，该系统从打孔的磁带读取程序，并在铁芯阵列上方放置一个孔。 织工使针穿过孔，并在必要时引导导线。 之后，将存储器与数百个电阻器和二极管一起安装在模块上，并填充环氧树脂以确保飞行的可靠性。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/899/4f4/d69/8994f4d696e2eafc02d06a306e7f9362.jpg"><br>  <i>一个女人闪烁着永久的记忆，将一个程序引入其中</i> <br><br><h2> 反复缝合铁芯上的存储器模拟器 </h2><br> 闪存的存储过程花费了大量时间和金钱，因此在测试和开发过程中需要替代方法。  NASA不用缝合核心，而是使用其模拟器，允许AGC从外部系统下载数据。 我们的AGC用于地面测试，因此它没有缝合的铁心，但有模拟器。 它由连接到用于缝合线芯的连接器的两个盒子组成，每个盒子占用三个内存插槽。 在下面的照片中，可以在AGC的左侧看到它们，并且它们具有圆形的军用连接器，用于连接到外部计算机。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/274/e5c/6dd/274e5c6dd29b32ea47a53959469a9b16.jpg"><br>  <i>模拟器盒安装在AGC的左侧，而不是实际内存模块。</i> <br><br> 尽管我们有关于AGC的详细文档，但找不到模拟器的文档。 我必须进行工程分析，并遵循所有方案并意识到包装箱的功能。 对它们的外部研究几乎没有。 每个盒子的一侧都有一个MIL-Spec连接器，用于连接外部系统。 另一方面，有3组96针连接到AGC。 每组触点代替内核上的一个内存模块。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/555/a18/12b/555a1812b9e81a2617052c60ca6a71ff.jpg"><br><br> 打开盒子显示非标准组装技术。 在轮廓上部分使用了一种方法，该方法在结构上类似于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">阔叶树</a> -组件垂直<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安装</a> ，并在金属块中带有孔。 在设备的两侧，触点都焊接到电线上。 包装盒中的其他电路使用标准集成电路（TTL 7400）。 但是与现代印刷电路板不同，这些芯片安装在称为“ dipstik”的塑料模块内<i>。</i>  <i>-探头</i> ]并用电线缠绕在一起。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fe/8ea/390/8fe8ea39073615e8bd9e8c38d602ab9d.jpg"><br><br><h2> 木布局 </h2><br>  “软木”布局在AGC中被积极地用于创建模拟电路，并且它也存在于存储器仿真器中（见下图）。 中间的白色圆圈是垂直安装在模块中的电阻器和二极管的端部，其触点焊接在两侧。 组件被紧密包装，就像原木一样，这就是为什么这种布局被称为Cordwood的原因。 脉冲变压器位于大的灰色圆圈下。 模块的另一侧也有相同的导线，它们的橙色，黄色，红色和棕色导线从孔中伸出。 黑线将脐带木电路连接到数字逻辑。 在照片的顶部，您可以看到装有二极管和电阻器的销钉，以及与AGC相连的触点的连接。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/417/20b/1d0/41720b1d0ec7dfbf9e9443f3108dc461.jpg"><br><br> 电缆线布局的主要目标是在AGC电路和内存模拟器盒之间提供电气隔离。 在现代电路中，光隔离器执行此功能，但是模拟器使用小脉冲变压器代替。 由于每个盒接收设计用于三个不同存储模块的信号，因此许多二极管将三个信号组合为一个。 电阻控制流经脉冲变压器的电流。 <br><br> 了解模拟阔叶电路的结构非常困难。 首先，该组件不可见，因为它们已集成到模块中。 我不得不用万用表来了解它们的位置。 其次，由于联系人在阔叶林布局的两侧都出现了，所以我花了很多时间将盒子翻过来以寻找合适的联系人。 最后，我想不出一种方便的方法来绘制没有产生线状迷宫的阔叶树的布局图。 <br><br><h2> 数字逻辑和量油尺 </h2><br>  Dipstik是1968年推出的一种插件，用于促进集成电路的原型设计。 他用双密度包装系统代替了印刷电路板。 <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1107813150282252288"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><br> 想法是在连接器的塑料块中，从底部开始将环绕式触点连接起来以连接电路。 将集成电路安装在插入连接器块的支架上。 顶部的支架带有用于安装其他组件（例如去耦电容器）的铜焊耳。 下图显示了拉出一个支架的量油尺模块。 每个持有人拥有5个IP。  IC触点放置在支架的触点和连接器块的触点之间。 这个想法看起来不错，但最终却不可靠。  Deepstick是一个失败的项目。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89a/104/544/89a1045448b287484396cc52b1e6f301.jpg"><br><br> 下图显示了从量油尺底部借助绕线连接的触点。 对于我来说，追踪它们非常困难，不可能在相同的蓝线海中浏览每个帖子。 我不得不用万用表敲响所有东西。 然后，我能够绘制示意图并考虑其作用。 模拟器中总共使用了约50个IC。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1c/bb1/95c/f1cbb195cc5471fd69765b52bb38be42.jpg"><br><br> 根据组件的标签判断，模拟器盒于1971年组装。 尽管自AGC设计以来仅过去了几年，但仿真器中的技术已经看起来更加先进，这说明了IP从1960年代中期到1970年代初期的快速发展。  AGC是在简单的集成电路的基础上组装而成的，每个集成电路都包含两个NOR门和集成的本机电阻晶体管逻辑（RTL）。 在仿真器框中，已经有更复杂的7400系列芯片，在晶体管晶体管逻辑（TTL）上包含十多个元素。 与AGC中过时的平面IC不同，模拟器盒使用DIP（双列直插式封装）封装的芯片，并且这种情况仍在使用。 <br><br><h2> 工程分析结果 </h2><br> 跟踪了所有轮廓后，我意识到了模拟器的工作原理，并绘制了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">图表</a> 。 实际上，一个框解码要从中访问访问的地址，第二个框将必要的数据发送到AGC（我将其称为“地址框”和“数据框”）。 <br><br> 地址盒接收信号并将其转换为二进制。 任务并不简单，因为信号以高电流脉冲和14 V电压的形式出现，旨在切换内核。 同样，这些脉冲在时间上是分开的，因为有些脉冲将内核切换到一个方向，而另一些脉冲则切换回去。 最后，发送到内核的脉冲不仅包含地址，还包含用于选择6个模块之一和选择模块中12个线程之一的信号。 <br><br> 地址盒使用脉冲转换器，将14 V脉冲转换为TTL信号。 它包含一堆用于将信号转换为二进制地址的AND-OR逻辑（这并不简单，因为每个模块包含6千屈螺菌素，所以这不是2的幂，因此需要进行很多按位操作）。 可用的触发器会阻塞一个地址。 最后，多谐振荡器的RC电路控制时序，基于各种信号确定地址的可用性以及何时将结果发送到AGC。 <br><br> 数据框更简单。 它从外部系统接收16位数据，并将信号发送到AGC放大器，以模拟来自内核的毫伏信号。 这些信号由脉冲转换器产生。 地址盒和数据盒通过AGC底板的导线进行通信。 <br><br> 盒子使用差分信号与外部系统通信，以消除长电缆发出的噪声。 该包装盒包含提供TTL的5 V LM109稳压器。 一个盒子通过外部连接器接收未调节的DC，并通过AGC底板将未调节的DC发送到另一个（对我来说，这很奇怪）。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d6/8ce/29d/8d68ce29d2ef683f1c059ae405f7a3ec.jpg"><br><br><h2>  BeagleBone作为界面 </h2><br> 在处理了模拟器的工作之后，有必要创建一个能够将数据从程序传递到模拟器的接口。 我使用了基于Linux的小型单板计算机<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BeagleBone</a> 。  BeagleBone的优势在于它具有快速的微控制器，可以实时响应AGC的内存请求。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c01/283/aaf/c01283aaf97d8317d72c12bb26ceeeba.jpg"><br>  <i>接口是卡在BeagleBone中的板。</i>  <i>两条电缆中的每条电缆都连接到其盒式模拟器。</i> <br><br> 我设计了一个用于连接到BeagleBone的接口板。 这非常简单： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AM26C32</a>差分线性接收器可将仿真器的差分信号转换为BeagleBone的3.3 V逻辑信号，而<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AM26C31</a>差分线性驱动器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">则可</a>将信号发送至仿真器。 我在KiCad设计了该板，并从AGC修复的赞助商<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PCBWay</a>订购了产品。 <br><br> 我编写了一个在BeagleBone微控制器PRU上运行的程序。 从本质上讲，这是一个状态机，它等待来自模拟器盒的地址，等待时序信号，从BeagleBone RAM中读取字，然后将字发送给模拟器​​。 我将程序发布在<a href="">Github上</a> 。 <br><br><h2> 模拟器问题 </h2><br> 反复缝合的内核上的内存模拟器未按照Apollo机载控制计算机标准进行组装，因此，我不得不花很长时间来调试它们。 许多连接断开，必须重新焊接（我不知道它们是否会不时断开，或者我何时知道工作方案）。 我们还发现一个量油尺短路和IC故障。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a0/698/fe2/4a0698fe2f8ad8f4717d966bffc3a3e4.jpg"><br><br> 所有的问题大多数都与量油尺有关，因为许多接触点缀在量油尺和IP之间。 问题在于，IC的触点以夹层的方式位于量油计座上的触点和插入它们的模块之间。 塑料量油尺向外弯曲，这就是为什么触点定期不起作用的原因。 马克以字母S的形式弯曲IP的腿后，设法使他们至少从侧面接触到双方。 但是几个小时后，IC的软脚向后弯曲，触点再次开始无法正常工作，因此我们没有长期解决此问题的方法。 <br><br> 最有趣的问题是来自AGC <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的两个信号之间</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">竞争</a> ，这些<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">信号</a>本应同时停止。 他们给脉冲转换器线圈的两端供电，这不应该发出信号。 然而，一个信号落后于另一个，导致出现虚假脉冲。 不幸的是，仿真器盒中的数字逻辑是异步的，这种冲动阻止了触发器中地址的错误位，结果是发生了对存储器中错误位置的访问。 结果，我们跟踪了这个问题，并安装了额外的电容器来过滤脉冲。 不幸的是，我们使用了太大的电容器，而在其他情况下，信号则延迟太多，从而导致出现其他错误。 然后，我们放置了较小的电容器，最后设法使用老式的核心内存模拟器在AGC上成功运行了程序。 <br><br><h2> 结论 </h2><br>  Apollo机载控制计算机使用多个缝合核心上的内存。 由于在开发过程中不断重新制作这样的内存是不切实际的，因此使用了模拟器。 我对模拟器进行了工程分析，并使用BeagleBone创建了用于其操作的界面。 我们已经通过该界面成功启动了AGC程序。 然而，事实证明该存储器模拟器是有问题且不可靠的。 <br><br>  @CuriousMarc制作了一段视频，详细介绍了我们在内存模拟器中的工作： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2qe4W_USweE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN463439/">https://habr.com/ru/post/zh-CN463439/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN463427/index.html">俄罗斯移民博物馆：我们如何将运动传感器放入留声机和普遍添加的技术</a></li>
<li><a href="../zh-CN463431/index.html">不需要永久性互联网连接的智能音乐收音机</a></li>
<li><a href="../zh-CN463433/index.html">电子邮件博客：Gmail功能</a></li>
<li><a href="../zh-CN463435/index.html">用于开发移动应用程序后端的云服务概述</a></li>
<li><a href="../zh-CN463437/index.html">将移动设备连接到数据库，而无需编写服务器代码</a></li>
<li><a href="../zh-CN463441/index.html">采样器。 控制台实用程序，用于可视化任何shell命令的结果</a></li>
<li><a href="../zh-CN463443/index.html">JMeter-瑞士测试仪刀（第2部分）</a></li>
<li><a href="../zh-CN463445/index.html">用于管理敏捷团队的9种协作软件解决方案</a></li>
<li><a href="../zh-CN463447/index.html">Astra Linux 1.6（斯摩棱斯克）。 系统准备好与普通用户一起工作了吗？ 拐杖的例子</a></li>
<li><a href="../zh-CN463455/index.html">从版本1开始，用Java修复了成千上万的东西：甲骨文的谢尔盖·库克森科（Sergey Kuksenko）的精彩访谈</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>