<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§û üë©üèΩ‚Äçüè≠ üï£ Qu'est-ce que Misra et comment le faire cuire ‚õ∏Ô∏è üìò ü§úüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Peut-√™tre que tous les d√©veloppeurs de logiciels de microcontr√¥leur ont entendu parler de normes de codage sp√©ciales pour am√©liorer la s√©curit√© et la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qu'est-ce que Misra et comment le faire cuire</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/482486/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/5bc/021/cf95bc0219fd9e34f03d5cfc316f7e71.png" alt="Figure 2"></div><br>  Peut-√™tre que tous les d√©veloppeurs de logiciels de microcontr√¥leur ont entendu parler de normes de codage sp√©ciales pour am√©liorer la s√©curit√© et la portabilit√© du code.  L'une de ces normes est MISRA.  Dans cet article, nous allons voir de plus pr√®s ce qu'est ce standard, son concept et comment l'utiliser dans vos projets. <br><a name="habracut"></a><br>  Beaucoup de nos lecteurs ont entendu dire que PVS-Studio prend en charge la classification de ses avertissements selon la norme MISRA.  √Ä l'heure actuelle, PVS-Studio <a href="https://www.viva64.com/en/misra/">couvre</a> plus de 100 r√®gles MISRA C: 2012 et MISRA C ++: 2008. <br><br>  Cet article vise √† tuer trois oiseaux avec une pierre: <br><br><ol><li>  Dites ce qu'est MISRA pour ceux qui ne sont pas encore familiers avec cette norme; </li><li>  Rappeler au monde du d√©veloppement int√©gr√© ce que nous pouvons faire; </li><li>  Aidez les nouveaux employ√©s de notre entreprise, qui d√©velopperont √©galement notre analyseur MISRA √† l'avenir, √† en prendre pleinement connaissance. </li></ol><br>  J'esp√®re que je pourrai le rendre int√©ressant.  Alors allons-y! <br><br><h2>  L'histoire de misra </h2><br>  L'histoire de MISRA a commenc√© il y a longtemps.  √Ä l'√©poque, au d√©but des ann√©es 1990, le programme gouvernemental britannique ¬´Safe IT¬ª a financ√© divers projets li√©s √† la s√©curit√© des syst√®mes √©lectroniques.  Le projet MISRA (Motor Industry Software Reliability Association) lui-m√™me a √©t√© fond√© pour cr√©er un guide pour le d√©veloppement de logiciels de microcontr√¥leurs dans les v√©hicules terrestres - dans les voitures, principalement. <br><br>  Ayant re√ßu un financement de l'√âtat, l'√©quipe MISRA a repris les travaux et, en novembre 1994, a publi√© son premier guide: " <a href="https://pdfs.semanticscholar.org/f7ab/6319c0ab1fb546e406a3f65463cd0e5d2f0c.pdf">Lignes directrices pour le d√©veloppement de logiciels bas√©s sur les v√©hicules</a> ".  Ce guide n'est pas encore li√© √† un langage sp√©cifique, mais je dois admettre que le travail a √©t√© fait de mani√®re impressionnante et qu'il a probablement concern√© tous les aspects imaginables du d√©veloppement de logiciels embarqu√©s.  Soit dit en passant, les d√©veloppeurs de ce guide <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">ont</a> r√©cemment <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">c√©l√©br√© le 25e anniversaire</a> d'une date aussi importante pour eux. <br><br>  Une fois le financement de l'√âtat termin√©, les membres de la MISRA ont d√©cid√© de continuer √† travailler ensemble sur une base informelle, comme cela se poursuit √† ce jour.  D'une mani√®re g√©n√©rale, MISRA (en tant qu'organisation) est une communaut√© de parties prenantes de diverses industries automobiles et a√©ronautiques.  Maintenant, ces parties sont: <br><br><ul><li>  Voitures √† moteur Bentley </li><li>  Ford Motor Company </li><li>  Jaguar land rover </li><li>  Syst√®mes diesel Delphi </li><li>  HORIBA MIRA </li><li>  Protean √©lectrique </li><li>  Services d'ing√©nierie Visteon </li><li>  L'universit√© de leeds </li><li>  Ricardo uk </li><li>  ZF TRW </li></ul><br>  Des acteurs du march√© tr√®s forts, n'est-ce pas?  Sans surprise, leur premi√®re norme linguistique, MISRA C, est devenue courante chez les d√©veloppeurs de syst√®mes embarqu√©s critiques.  Un peu plus tard, MISRA C ++ est apparu.  Progressivement, les versions des normes ont √©t√© mises √† jour et affin√©es pour couvrir les nouvelles fonctionnalit√©s des langues.  √Ä ce jour, les versions actuelles sont MISRA C: 2012 et MISRA C ++: 2008. <br><br><h2>  Concept principal et exemples de r√®gles </h2><br>  Les caract√©ristiques les plus distinctives de MISRA sont son incroyable attention aux d√©tails et son extr√™me minutie pour assurer la s√©curit√© et la s√ªret√©.  Non seulement les auteurs ont rassembl√© toutes les carences en C et C ++ en un seul endroit (comme par exemple les auteurs du CERT) - ils ont √©galement soigneusement √©labor√© les normes internationales de ces langages et √©crit toutes les fa√ßons de se tromper.  Apr√®s, ils ont ajout√© des r√®gles sur la lisibilit√© du code pour assurer le code propre contre une nouvelle erreur. <br><br>  Pour comprendre l'√©chelle de gravit√©, regardons quelques r√®gles tir√©es de la norme. <br><br>  D'une part, il existe des r√®gles d√©centes et utiles qui doivent toujours √™tre suivies, quel que soit le but de votre projet.  Pour la plupart, ils sont con√ßus pour √©liminer les comportements ind√©finis / non sp√©cifi√©s / d√©finis par l'impl√©mentation.  Par exemple: <br><br><ul><li>  N'utilisez pas la valeur d'une variable non initialis√©e </li><li> N'utilisez pas le pointeur vers FILE apr√®s la fermeture du flux </li><li>  Toutes les fonctions non nulles doivent renvoyer une valeur </li><li>  Les compteurs de boucles ne doivent pas √™tre de type virgule flottante </li><li>  et d'autres. </li></ul><br>  D'autre part, il existe des r√®gles dont les avantages ne sont pas difficiles √† mettre en ≈ìuvre, mais qui (du point de vue des projets ordinaires) peuvent parfois √™tre viol√©es: <br><br><ul><li>  N'utilisez pas goto et longjmp </li><li>  Chaque commutateur doit se terminer par une √©tiquette par d√©faut </li><li>  N'√©crivez pas de code inaccessible </li><li>  N'utilisez pas de fonctions variadic </li><li>  N'utilisez pas l'arithm√©tique d'adresse (sauf <i>[]</i> et <i>++</i> ) </li><li>  ... </li></ul><br>  De telles r√®gles ne sont pas mauvaises non plus, et combin√©es aux pr√©c√©dentes, elles donnent d√©j√† une augmentation tangible √† la s√©curit√©, mais est-ce suffisant pour des syst√®mes embarqu√©s hautement fiables?  Ils sont utilis√©s non seulement dans l'industrie automobile, mais aussi dans les industries a√©ronautique, a√©rospatiale, militaire et m√©dicale. <br><br>  Nous ne voulons pas qu'une machine √† rayons X <a href="https://www.viva64.com/en/b/0438/">irradie les patients avec une dose de 20 000 rads √†</a> cause d'une erreur logicielle, donc les r√®gles habituelles "quotidiennes" ne suffisent pas.  Avec des vies humaines et beaucoup d'argent en jeu, la minutie est indispensable.  Voici o√π le reste des r√®gles MISRA entrent en jeu: <br><br><ul><li>  Le suffixe ¬´L¬ª dans le litt√©ral doit toujours √™tre en majuscule (la lettre minuscule ¬´l¬ª peut √™tre confondue avec 1) </li><li>  N'utilisez pas l'op√©rateur "virgule" (cela augmente les chances de faire une erreur) </li><li>  N'utilisez pas la r√©cursivit√© (une petite pile de microcontr√¥leurs peut facilement d√©border) </li><li>  Les corps des instructions <i>if</i> , <i>else</i> , <i>for</i> , <i>while</i> , <i>do</i> , <i>switch</i> doivent √™tre plac√©s entre crochets (vous pouvez potentiellement faire une erreur lorsque le code n'est pas <a href="https://www.viva64.com/en/w/v2507/">align√© correctement</a> ) </li><li>  N'utilisez pas de m√©moire dynamique (car il est possible de ne pas la lib√©rer du tas, en particulier dans les microcontr√¥leurs) </li><li>  ... et beaucoup, beaucoup de ces r√®gles. </li></ul><br>  Il arrive souvent que les personnes qui rencontrent MISRA pour la premi√®re fois aient l'impression que l'objectif de la norme est de "bannir ceci et de bannir cela".  En fait, il en est ainsi, mais seulement dans une certaine mesure. <br><br>  D'une part, la norme a de nombreuses r√®gles de ce type, mais elle n'est pas destin√©e √† tout interdire, mais d'autre part, elle r√©pertorie l'ensemble des fa√ßons de violer la s√©curit√© du code.  Pour la plupart des r√®gles, vous choisissez vous-m√™me si vous devez les suivre ou non.  Je vais expliquer ce cas plus en d√©tail. <br><br>  Dans MISRA C, les r√®gles sont divis√©es en trois cat√©gories principales: obligatoires, obligatoires et consultatives.  Les r√®gles obligatoires ne peuvent √™tre enfreintes sous aucun pr√©texte.  Par exemple, cette section inclut la r√®gle: "n'utilisez pas la valeur d'une variable non initi√©e".  Les r√®gles requises sont moins strictes: elles permettent la possibilit√© d'un rejet, mais seulement si ces √©carts sont soigneusement document√©s et justifi√©s par √©crit.  Les autres r√®gles entrent dans la cat√©gorie des conseils, qui ne sont pas obligatoires. <br><br>  MISRA C ++ a quelques diff√©rences: il n'y a pas de cat√©gorie obligatoire et la plupart des r√®gles appartiennent √† la cat√©gorie obligatoire.  Par cons√©quent, en fait, vous avez le droit d'enfreindre n'importe quelle r√®gle - n'oubliez pas de commenter tous les √©carts.  Il existe √©galement la cat√©gorie Document - ce sont des r√®gles obligatoires (les √©carts ne sont pas autoris√©s) li√©es aux pratiques g√©n√©rales telles que "Chaque utilisation de l'assembleur doit √™tre document√©e" ou "Une biblioth√®que incluse doit √™tre conforme √† MISRA C ++". <br><br><h2>  Autres probl√®mes </h2><br>  En fait, MISRA n'est pas seulement un ensemble de r√®gles.  En fait, c'est une directive pour √©crire du code s√ªr pour les microcontr√¥leurs, et donc c'est plein de goodies.  Examinons-les en profondeur. <br><br>  Tout d'abord, la norme contient une description assez approfondie de la trame de fond: pourquoi la norme a √©t√© cr√©√©e, pourquoi C ou C ++ a √©t√© choisi, les avantages et les inconv√©nients de ces langages. <br><br>  Nous connaissons tous tr√®s bien les m√©rites de ces langues.  Aussi bien que nous sommes √©galement conscients de leurs lacunes :) Haut niveau de complexit√©, sp√©cification standard incompl√®te et syntaxe permettant de faire facilement une erreur et de la rechercher pendant des √¢ges - tout cela ne peut √™tre que mentionn√©.  Par exemple, vous pourriez accidentellement √©crire ceci: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i); { do_something(); }</code> </pre> <br>  Apr√®s tout, il est possible qu'une personne ne remarque pas <a href="https://www.viva64.com/en/w/v529/">un point</a> - <a href="https://www.viva64.com/en/w/v529/">virgule suppl√©mentaire</a> , non?  Une autre option consiste √† √©crire du code <a href="https://www.viva64.com/en/w/v559/">comme suit</a> : <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpendTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> doWantToKillPeople)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doWantToKillPeople = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { StartNuclearWar(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { PlayComputerGames(); } }</code> </pre> <br>  Il est bon que le <a href="https://www.viva64.com/en/w/v2507/">premier</a> et le <a href="https://www.viva64.com/en/w/v2561/">deuxi√®me</a> cas puissent √™tre facilement d√©tect√©s par les r√®gles MISRA (1 - MISRA C: 13.4 / MISRA C ++: 6.2.1; 2 - MISRA C: 13.4 / MISRA C ++: 6.2.1). <br><br>  La norme contient √† la fois une description des probl√®mes et des conseils sur ce qu'il faut savoir avant d'entreprendre une certaine t√¢che: comment mettre en place le processus de d√©veloppement selon MISRA;  comment utiliser des analyseurs statiques pour v√©rifier la conformit√© du code;  quels documents doit-on conserver, comment les remplir, etc. <br><br>  Les annexes √† la fin comprennent √©galement: une courte liste et un r√©sum√© des r√®gles, une petite liste de vuln√©rabilit√©s C / C ++, un exemple de documentation sur les √©carts de r√®gles et quelques listes de contr√¥le permettant de trier toute cette bureaucratie. <br><br>  Comme vous pouvez le voir, MISRA n'est pas seulement un ensemble de r√®gles, mais presque toute une infrastructure pour √©crire du code s√©curis√© pour les syst√®mes embarqu√©s. <br><br><h2>  Utilisation dans vos projets </h2><br>  Imaginez la sc√®ne: vous allez √©crire un programme pour un syst√®me embarqu√© responsable et tellement n√©cessaire.  Ou vous avez d√©j√† un programme, mais vous devez le "porter" sur MISRA.  Alors, comment v√©rifiez-vous la conformit√© de votre code √† la norme?  Devez-vous vraiment le faire manuellement? <br><br>  La v√©rification manuelle du code est une t√¢che difficile et m√™me potentiellement impossible.  Non seulement chaque r√©viseur doit examiner attentivement chaque ligne de code, mais il faut aussi conna√Ætre la norme presque par c≈ìur.  Fou! <br><br>  Par cons√©quent, les d√©veloppeurs MISRA eux-m√™mes conseillent d'utiliser l'analyse statique pour tester votre code.  Apr√®s tout, en fait, l'analyse statique est un processus automatis√© de r√©vision de code.  Vous ex√©cutez simplement l'analyseur sur votre programme et en quelques minutes, vous obtenez un rapport de violations potentielles de la norme.  C'est ce dont vous avez besoin, non?  Tout ce que vous avez √† faire est de consulter le journal et de corriger les avertissements. <br><br>  La question suivante est - √† quel moment devrions-nous commencer √† utiliser MISRA?  La r√©ponse est simple: le plus t√¥t sera le mieux.  Id√©alement - avant de commencer √† √©crire du code, car MISRA suppose que vous suivez la norme pour l'ensemble du cycle de vie de votre code. <br><br>  Eh bien, il n'est pas toujours possible d'√©crire selon MISRA d√®s le d√©but.  Par exemple, il arrive souvent que le projet ait d√©j√† √©t√© partiellement ou compl√®tement mis en ≈ìuvre, mais plus tard, le client voulait que le projet r√©ponde √† la norme.  Dans ce cas, vous devrez faire une refactorisation approfondie du code existant. <br><br>  C'est l√† que l'√©cueil appara√Æt.  Je dirais m√™me qu'un rocher sous-marin appara√Æt.  Que se passe-t-il si vous prenez un analyseur statique et v√©rifiez que le projet "ordinaire" est conforme √† la norme MISRA?  Spoiler: vous pouvez avoir peur. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44e/2b7/7d9/44e2b77d90cd9804e1ec0a5a38f166a2.png" alt="Figure 5"></div><br><br>  √Ä droite, l'exemple de l'image est exag√©r√©.  Il montre le r√©sultat de la v√©rification d'un projet assez important qui n'√©tait pas r√©ellement destin√© √† travailler sur des microcontr√¥leurs.  Cependant, lors de la v√©rification du code d√©j√† existant, vous pouvez tr√®s bien recevoir un, deux, trois ou m√™me dix mille avertissements de l'analyseur.  De nouveaux avertissements, √©mis pour du code nouveau ou modifi√©, seront simplement perdus dans ce gros tas d'avertissements. <br><br>  Que pouvez-vous y faire?  Devez-vous vraiment reporter toutes les t√¢ches et tout mettre en ≈ìuvre pour corriger les anciens avertissements? <br><br>  En tant que d√©veloppeurs de l'analyseur statique, nous savons que tant d'avertissements apparaissent apr√®s la v√©rification.  Par cons√©quent, nous avons d√©velopp√© la solution, qui peut aider √† utiliser imm√©diatement l'analyseur sans arr√™ter le travail.  Cette solution est appel√©e "supprimer la base". <br><br>  Les bases de suppression repr√©sentent le m√©canisme PVS-Studio qui vous permet de supprimer massivement les messages de l'analyseur.  Si vous v√©rifiez un projet pour la premi√®re fois et obtenez plusieurs milliers d'avertissements - il vous suffit de les ajouter dans une base de suppression et la prochaine ex√©cution ne vous donnera aucun avertissement. <br><br>  De cette fa√ßon, vous pouvez continuer √† √©crire et √† modifier le code comme d'habitude, et ce faisant, vous obtiendrez des messages uniquement sur les bogues qui viennent d'√™tre cr√©√©s dans le projet.  Ainsi, vous tirerez le meilleur parti de l'analyseur ici et maintenant, sans √™tre distrait par le ratissage d'anciens bogues.  Quelques clics - et l'analyseur est int√©gr√© √† votre d√©veloppement!  Vous pouvez lire les instructions d√©taill√©es √† ce sujet <a href="https://www.viva64.com/en/m/0032/">ici</a> . <br><br>  Vous vous demandez probablement: ¬´Attendez, qu'en est-il des avertissements cach√©s?¬ª La r√©ponse est assez simple: ne les oubliez pas et corrigez-les par √©tapes faciles.  Par exemple, vous pouvez charger la base de suppression dans le syst√®me de contr√¥le de version et autoriser uniquement les validations qui n'augmentent pas le nombre d'avertissements.  Ainsi, petit √† petit, votre ¬´rocher sous-marin¬ª se brisera t√¥t ou tard sans laisser de trace. <br><br>  D'accord, l'analyseur est maintenant adopt√© avec succ√®s et nous sommes pr√™ts √† continuer.  Que faire ensuite?  La r√©ponse est √©vidente - travaillez avec le code!  Mais que faut-il pour pouvoir d√©clarer la conformit√© √† la norme?  Comment prouvez-vous que votre projet est conforme √† MISRA? <br><br>  En fait, il n'y a pas de "certificat" sp√©cial que votre code correspond √† MISRA.  Comme le stipule la norme, le suivi de la conformit√© doit √™tre effectu√© par deux parties: le client du logiciel et le fournisseur du logiciel.  Le vendeur d√©veloppe un logiciel conforme √† la norme et remplit les documents n√©cessaires.  Le client, √† son tour, doit s'assurer que les donn√©es de ces documents sont vraies. <br><br>  Si vous d√©veloppez un logiciel pour vous-m√™me, la responsabilit√© de respecter la norme incombera uniquement √† vos √©paules :) <br><br>  En g√©n√©ral, pour prouver la conformit√© de votre projet, vous aurez besoin de pi√®ces justificatives.  La liste des documents que les d√©veloppeurs de projets doivent pr√©parer peut varier, mais MISRA propose un ensemble comme r√©f√©rence.  Examinons de plus pr√®s cet ensemble. <br><br>  Vous aurez besoin de ces √©l√©ments pour appliquer la conformit√© standard: <br><br><ul><li>  Le projet lui-m√™me, dont le code est conforme aux r√®gles obligatoires et obligatoires </li><li>  Guider le plan d'application </li><li>  Documentation sur tous les avertissements du compilateur et de l'analyseur statique </li><li>  Documentation pour tous les √©carts par rapport aux r√®gles requises </li><li>  R√©sum√© de la conformit√© aux lignes directrices </li></ul><br>  Le premier est un plan d'application du guide.  Il s'agit de votre tableau le plus important et il contient des r√©f√©rences √† tous les autres documents.  Dans sa premi√®re colonne est une liste des r√®gles MISRA, dans le reste, il est not√© s'il y a eu des √©carts par rapport √† ces r√®gles.  Ce tableau ressemble √† ceci: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7bc/bba/a3f/7bcbbaa3f6e9115e55b721ec99c5f763.png" alt="Image 1"></div><br>  La norme recommande de construire votre projet avec plusieurs compilateurs, ainsi que d'utiliser deux analyseurs statiques ou plus pour tester la conformit√© de votre code.  Si le compilateur ou l'analyseur √©met un avertissement li√© √† une r√®gle, vous devez le noter dans le tableau et documenter les points suivants: pourquoi l'avertissement ne peut pas √™tre corrig√©, qu'il soit faux ou non, etc. <br><br>  Si l'une des r√®gles ne peut pas √™tre v√©rifi√©e par un analyseur statique, vous devez effectuer une r√©vision manuelle du code.  Cette proc√©dure doit √©galement √™tre document√©e, apr√®s quoi un lien vers cette documentation doit √™tre ajout√© au plan de conformit√©. <br><br>  Si le compilateur ou l'analyseur statique s'av√®re correct, ou s'il existe des violations de r√®gles valides pendant le processus de r√©vision du code, vous devez soit les corriger, soit les documenter.  Encore une fois, en attachant le lien vers la documentation dans le tableau. <br><br>  Ainsi, un plan de conformit√© est un document qui fournira de la documentation pour tout √©cart identifi√© dans votre code. <br><br>  Abordons bri√®vement la documentation directe des √©carts par rapport aux r√®gles.  Comme je l'ai mentionn√©, une telle documentation n'est n√©cessaire que pour les r√®gles requises, car les r√®gles obligatoires ne peuvent pas √™tre viol√©es et les r√®gles consultatives peuvent √™tre viol√©es sans aucune documentation. <br><br>  Si vous choisissez de d√©roger √† la r√®gle, la documentation doit inclure: <br><br><ul><li>  Le num√©ro de la r√®gle viol√©e </li><li>  L'emplacement exact de l'√©cart </li><li>  La validit√© de l'√©cart </li><li>  Preuve que l'√©cart ne compromet pas la s√©curit√© </li><li>  Cons√©quences potentielles pour l'utilisateur </li></ul><br>  Comme vous pouvez le voir, une telle approche de la documentation vous fait s√©rieusement vous demander si la violation en vaut la peine.  Cela a √©t√© fait sp√©cifiquement pour ne ressentir aucune envie de violer les r√®gles requises :) <br><br>  Maintenant sur le r√©sum√© de la conformit√© aux r√®gles.  Ce document sera peut-√™tre le plus facile √† remplir: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/c76/3a8/b06c763a8c54330152d00006f25f0778.png" alt="Image 3"></div><br>  La colonne centrale est remplie avant de commencer √† travailler avec le code, et la bonne - une fois votre projet pr√™t. <br><br>  Voici une question raisonnable: pourquoi les cat√©gories de r√®gles devraient-elles √™tre sp√©cifi√©es, si elles sont d√©j√† sp√©cifi√©es dans la norme elle-m√™me?  Le fait est que la norme permet de "promouvoir" une r√®gle dans une cat√©gorie plus stricte.  Par exemple, un client peut vous demander de classer une r√®gle de conseil.  Une telle "promotion" doit √™tre faite avant de travailler avec le code, et le r√©sum√© de la conformit√© aux r√®gles vous permet de le noter explicitement. <br><br>  Quant √† la derni√®re colonne, c'est assez simple: il suffit de noter si la r√®gle est utilis√©e, et si oui, s'il y a des √©carts par rapport √† elle. <br><br>  Cette table enti√®re est n√©cessaire pour que vous puissiez voir rapidement quelles sont les r√®gles de priorit√© et si le code les respecte.  Si vous √™tes soudain int√©ress√© √† conna√Ætre la cause exacte de l'√©cart, vous pouvez toujours vous tourner vers le plan de conformit√© et trouver la documentation dont vous avez besoin. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b4/c84/ca8/5b4c84ca873358cbb9b5dd6349330da4.png" alt="Figure 6"></div><br>  Vous avez donc soigneusement √©crit le code en suivant les r√®gles MISRA.  Vous avez √©labor√© un plan de conformit√© et document√© tout ce qui pourrait √™tre document√©, et vous avez rempli votre curriculum vitae de conformit√©.  Si c'est effectivement le cas, alors vous avez un code tr√®s propre, tr√®s lisible et tr√®s fiable que vous d√©testez maintenant :) <br><br>  O√π vivra votre programme maintenant?  Dans un appareil d'IRM?  Dans un capteur de vitesse ordinaire ou dans le syst√®me de contr√¥le d'un satellite spatial?  Oui, vous avez parcouru un chemin bureaucratique s√©rieux, mais ce n'est pas grave.  Quand il s'agit de vraies vies humaines, vous devez toujours √™tre scrupuleux. <br><br>  Si vous avez r√©ussi et r√©ussi √† atteindre la fin victorieuse, je vous f√©licite sinc√®rement: vous √©crivez du code s√©curis√© de haute qualit√©.  Je vous remercie! <br><br><h2>  L'avenir des normes </h2><br>  Pour la finale, j'aimerais m'attarder sur l'avenir des standards. <br><br>  Maintenant, Misra vit et √©volue.  Par exemple, "The MISRA C: 2012 Third Edition (First Revision)" est une √©dition r√©vis√©e et agrandie avec de nouvelles r√®gles annonc√©e au d√©but de 2019. Dans le m√™me temps, la prochaine version de "MISRA C: 2012 Amendment 2 - C11 Core ¬ª, qui est une norme r√©vis√©e de l'ann√©e 2012, a √©t√© annonc√©.  Ce document comprendra des r√®gles qui couvrent pour la premi√®re fois les versions en langage C des ann√©es 2011 et 2018. <br><br>  MISRA C ++ continue √©galement d'√©voluer.  Comme vous le savez, la derni√®re norme de MISRA C ++ est dat√©e de 2008, donc la version la plus ancienne du langage qu'elle couvre est C ++ 03.  Pour cette raison, il existe une autre norme similaire √† MISRA, et elle s'appelle AUTOSAR C ++.  Il √©tait √† l'origine destin√© √† √™tre une continuation de MISRA C ++ et devait couvrir les versions ult√©rieures du langage.  Contrairement √† son cerveau, AUTOSAR C ++ est mis √† jour deux fois par an et prend actuellement en charge C ++ 14.  De nouvelles mises √† jour C ++ 17 puis C ++ 20 sont √† venir. <br><br>  Pourquoi ai-je commenc√© √† parler d'une autre norme?  Le fait est qu'il y a un peu moins d'un an, les deux organisations ont annonc√© qu'elles fusionneraient leurs normes en une seule.  MISRA C ++ et AUTOSAR C ++ deviendront un standard unique et √©volueront d√©sormais ensemble.  Je pense que c'est une excellente nouvelle pour les d√©veloppeurs qui √©crivent pour les microcontr√¥leurs en C ++, et pas moins une excellente nouvelle pour les d√©veloppeurs d'analyseurs statiques.  Il y a encore beaucoup √† faire!  :) <br><br><h2>  Conclusion </h2><br>  Aujourd'hui, nous esp√©rons que vous avez beaucoup appris sur MISRA: lisez l'histoire de son origine, √©tudi√© les exemples de r√®gles et de concept de la norme, examin√© tout ce dont vous aurez besoin pour utiliser MISRA dans vos projets et m√™me aper√ßu de l'avenir.  J'esp√®re maintenant que vous comprenez mieux ce qu'est MISRA et comment le cuisiner! <br><br>  Dans la vieille tradition, je vais laisser ici un lien vers notre analyseur statique PVS-Studio.  Il est capable de trouver non seulement des √©carts par rapport √† la norme MISRA, mais √©galement <a href="https://www.viva64.com/en/examples/">une vaste gamme</a> d'erreurs et de vuln√©rabilit√©s.  Si vous √™tes int√©ress√© √† essayer PVS-Studio vous-m√™me, <a href="https://www.viva64.com/en/pvs-studio-download/">t√©l√©chargez</a> la version de d√©monstration et v√©rifiez votre projet. <br><br>  C'est l√† que mon article se termine.  Je souhaite √† tous les lecteurs un joyeux No√´l et de joyeuses f√™tes de fin d'ann√©e! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482486/">https://habr.com/ru/post/fr482486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482472/index.html">De quoi JavaScript est-il fait?</a></li>
<li><a href="../fr482478/index.html">Iteraptor: biblioth√®que pour redus de carte transparent profond</a></li>
<li><a href="../fr482480/index.html">Touches cosmiques de l'ann√©e sortante</a></li>
<li><a href="../fr482482/index.html">Jeux de r√¥le</a></li>
<li><a href="../fr482484/index.html">Comment augmenter l'efficacit√© du d√©veloppement en utilisant la th√©orie des contraintes</a></li>
<li><a href="../fr482490/index.html">Qu'est-ce que MISRA et comment le faire cuire</a></li>
<li><a href="../fr482492/index.html">D√©gel du perg√©lisol et √©missions de gaz √† effet de serre</a></li>
<li><a href="../fr482494/index.html">Mettre √† jour les r√©sultats de l'enqu√™te</a></li>
<li><a href="../fr482496/index.html">R√©sultats: 9 avanc√©es technologiques majeures de 2019</a></li>
<li><a href="../fr482498/index.html">Histoire de l'√©volution des interfaces en Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>