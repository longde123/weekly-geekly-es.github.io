<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèæ üõï ‚è≤Ô∏è Docker: c√≥mo implementar una aplicaci√≥n de pila completa y no volverse gris üö¥üèø üë®‚Äçüíª üë©üèº‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""¬°Necesitamos DevOps!" 
 (la frase m√°s popular al final de cualquier hackathon) 

 Primero, algunas letras. 

 Cuando un desarrollador es un excelente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker: c√≥mo implementar una aplicaci√≥n de pila completa y no volverse gris</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448094/"> <i>"¬°Necesitamos DevOps!"</i> <br>  <i>(la frase m√°s popular al final de cualquier hackathon)</i> <br><img src="https://habrastorage.org/webt/yy/k1/0q/yyk10qsi8ayqzxsnwqua1nwyzrk.jpeg"><br>  Primero, algunas letras. <br><br>  Cuando un desarrollador es un excelente desarrollador que puede implementar su creaci√≥n en cualquier m√°quina bajo cualquier OC, esto es una ventaja.  Sin embargo, si no entiende nada m√°s que su IDE, esto no es un inconveniente: al final, se le paga por el c√≥digo y no por la capacidad de implementarlo.  Un especialista estrecho y profundo en el mercado se valora m√°s que la habilidad promedio de "jack of all trades".  Para las personas como nosotros, "usuarios IDE", a las buenas personas se les ocurri√≥ Docker. <br><br>  El principio de Docker es el siguiente: "funciona para m√≠, funciona en todas partes".  El √∫nico programa necesario para implementar una copia de su aplicaci√≥n en cualquier lugar es Docker.  Si ejecuta su aplicaci√≥n en la ventana acoplable en su m√°quina, se garantiza que se ejecutar√° con el mismo √©xito en cualquier otra ventana acoplable.  Y nada m√°s que un acoplador necesita ser instalado.  Por ejemplo, ni siquiera tengo Java en el servidor virtual. <a name="habracut"></a><br><br><h2>  ¬øC√≥mo funciona Docker? </h2><br>  Docker crea una imagen de una m√°quina virtual con aplicaciones instaladas en ella.  Adem√°s, esta imagen se desarrolla como una m√°quina virtual completamente aut√≥noma.  Una copia en ejecuci√≥n de la imagen se denomina "contenedor".  Puede ejecutar cualquier cantidad de im√°genes en el servidor, y cada una de ellas ser√° una m√°quina virtual separada con su propio entorno. <br><br>  ¬øQu√© es una m√°quina virtual?  Esta es la ubicaci√≥n encapsulada en el servidor con el sistema operativo en el que est√°n instaladas las aplicaciones.  En cualquier sistema operativo, una gran cantidad de aplicaciones generalmente est√°n girando, en el nuestro hay una. <br><br>  El esquema de despliegue del contenedor se puede representar de la siguiente manera: <br><br><img src="https://habrastorage.org/webt/9p/vq/ya/9pvqyam6ckaxqvihopwdoynhf4y.jpeg"><br><br>  Para cada aplicaci√≥n, creamos nuestra propia imagen y luego implementamos cada contenedor por separado.  Adem√°s, puede colocar todas las aplicaciones en una imagen e implementarlas como un contenedor.  Adem√°s, para no desplegar cada contenedor por separado, podemos usar una utilidad docker-compose separada, que configura los contenedores y la relaci√≥n entre ellos a trav√©s de un archivo separado.  Entonces la estructura de toda la aplicaci√≥n puede verse as√≠: <br><br><img src="https://habrastorage.org/webt/ga/ft/fm/gaftfmbyumgesqldxv1pphh6ati.jpeg"><br><br>  No contribu√≠ intencionalmente con la base de datos al ensamblaje general de Docker, por varias razones.  En primer lugar, la base de datos es completamente independiente de las aplicaciones que funcionan con ella.  Puede estar lejos de ser una aplicaci√≥n, pueden ser solicitudes manuales de la consola.  Personalmente, no veo ninguna raz√≥n para hacer que la base de datos dependa del ensamblado Docker en el que se encuentra.  Por lo tanto, lo soport√©.  Sin embargo, a menudo se practica un enfoque en el que la base de datos se coloca en una imagen separada y se lanza en un contenedor separado.  En segundo lugar, quiero mostrar c√≥mo interact√∫a el contenedor Docker con sistemas fuera del contenedor. <br><br>  Sin embargo, bastante la letra, vamos a escribir el c√≥digo.  Escribiremos la aplicaci√≥n m√°s simple en primavera y reaccionaremos, lo que registrar√° nuestras llamadas al frente en la base de datos, y plantearemos todo esto a trav√©s de Docker.  La estructura de nuestra aplicaci√≥n se ver√° as√≠: <br><br><img src="https://habrastorage.org/webt/k4/pp/lg/k4pplgvwba46vygymrasjctmrkm.jpeg"><br><br>  Hay muchas formas de implementar dicha estructura.  Estamos implementando uno de ellos.  Crearemos dos im√°genes, lanzaremos dos contenedores a partir de ellas, adem√°s, el back-end se conectar√° a la base de datos, que est√° instalada en un servidor espec√≠fico en alg√∫n lugar de Internet (s√≠, tales solicitudes a la base de datos no se enviar√°n r√°pidamente, pero no nos impulsa la sed de optimizaci√≥n, pero inter√©s cient√≠fico). <br><br>  La publicaci√≥n se dividir√° en partes: <br><br>  0. Instalar Docker. <br>  1. Escribimos aplicaciones. <br>  2. Recopilamos im√°genes y lanzamos contenedores. <br>  3. Recopile im√°genes e inicie contenedores en un servidor remoto. <br>  4. Resolver problemas de red. <br><br><h2>  0. Instalar Docker </h2><br>  Para instalar Docker, debe ir al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> y seguir lo que est√° escrito all√≠.  Al instalar Docker en un servidor remoto, prep√°rese para el hecho de que Docker puede no funcionar con servidores en OpenVZ.  Adem√°s, puede haber problemas si no tiene habilitadas las iptables.  Es recomendable iniciar el servidor en KVM con iptables.  Pero estas son mis recomendaciones.  Si todo funciona para usted, y as√≠, me alegrar√° que no haya pasado mucho tiempo descubriendo por qu√© no funciona, c√≥mo tuve que hacerlo. <br><br><h2>  1. Escribimos aplicaciones </h2><br>  Escribamos una aplicaci√≥n simple con el backend m√°s primitivo en Spring Boot, una interfaz muy simple en ReactJS y una base de datos MySQL.  La aplicaci√≥n tendr√° una p√°gina √∫nica con un solo bot√≥n que registrar√° la hora en que se hizo clic en ella en la base de datos. <br><br>  Espero que ya sepa c√≥mo escribir aplicaciones en el arranque, pero si no, puede clonar el proyecto terminado.  Todos los enlaces al final del art√≠culo. <br><br><h3>  Backend en Spring Boot </h3><br>  build.gradle: <br><br><pre><code class="java hljs">plugins { id <span class="hljs-string"><span class="hljs-string">'org.springframework.boot'</span></span> version <span class="hljs-string"><span class="hljs-string">'2.1.4.RELEASE'</span></span> id <span class="hljs-string"><span class="hljs-string">'java'</span></span> } apply plugin: <span class="hljs-string"><span class="hljs-string">'io.spring.dependency-management'</span></span> group = <span class="hljs-string"><span class="hljs-string">'ru.xpendence'</span></span> version = <span class="hljs-string"><span class="hljs-string">'0.0.2'</span></span> sourceCompatibility = <span class="hljs-string"><span class="hljs-string">'1.8'</span></span> repositories { mavenCentral() } dependencies { implementation <span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-jpa'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span></span> runtimeOnly <span class="hljs-string"><span class="hljs-string">'mysql:mysql-connector-java'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-test'</span></span> }</code> </pre> <br>  Entidad de registro: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.xpendence.rebounder.entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.fasterxml.jackson.annotation.JsonFormat; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Serializable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.time.LocalDateTime; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Objects; <span class="hljs-comment"><span class="hljs-comment">/** * Author: Vyacheslav Chernyshov * Date: 14.04.19 * Time: 21:20 * e-mail: 2262288@gmail.com */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"request_logs"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LocalDateTime created; <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span>(strategy = GenerationType.IDENTITY) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-meta"><span class="hljs-meta">@JsonFormat</span></span>(shape = JsonFormat.Shape.STRING, pattern = <span class="hljs-string"><span class="hljs-string">"yyyy-MM-dd HH:mm:ss.SSS"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> LocalDateTime </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCreated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> created; } <span class="hljs-meta"><span class="hljs-meta">@PrePersist</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prePersist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.created = LocalDateTime.now(); } <span class="hljs-comment"><span class="hljs-comment">//setters, toString, equals, hashcode, constructors</span></span></code> </pre> <br>  LogController, que funcionar√° en l√≥gica simplificada y escribir√° inmediatamente en la base de datos.  Omitimos el servicio. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.xpendence.rebounder.controller; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.fasterxml.jackson.core.JsonProcessingException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.fasterxml.jackson.databind.ObjectMapper; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.http.ResponseEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.annotation.GetMapping; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.annotation.RequestMapping; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.annotation.RestController; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.xpendence.rebounder.entity.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.xpendence.rebounder.repository.LogRepository; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.logging.Logger; <span class="hljs-comment"><span class="hljs-comment">/** * Author: Vyacheslav Chernyshov * Date: 14.04.19 * Time: 22:24 * e-mail: 2262288@gmail.com */</span></span> <span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/log"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LogController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Logger LOG = Logger.getLogger(LogController.class.getName()); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> LogRepository repository; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LogRepository repository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.repository = repository; } <span class="hljs-meta"><span class="hljs-meta">@GetMapping</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ResponseEntity&lt;Log&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Log log = repository.save(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Log()); LOG.info(<span class="hljs-string"><span class="hljs-string">"saved new log: "</span></span> + log.toString()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ResponseEntity.ok(log); } }</code> </pre><br>  Todo, como vemos, es muy simple.  Mediante una solicitud GET, escribimos en la base de datos y devolvemos el resultado. <br><br>  Discutiremos el archivo de configuraci√≥n de la aplicaci√≥n por separado.  Hay dos de ellos. <br><br>  application.yml: <br><br><pre> <code class="java hljs">spring: profiles: active: remote</code> </pre> <br>  application-remote.yml: <br><br><pre> <code class="java hljs">spring: datasource: driver-<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">com</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cj</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jdbc</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Driver</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jdbc</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mysql</span></span></span><span class="hljs-class">://</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">my</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">remote</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">server</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">database</span></span></span><span class="hljs-class">:3306/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rebounder_database</span></span></span><span class="hljs-class">?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">useUnicode</span></span></span></span>=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>&amp;useJDBCCompliantTimezoneShift=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>&amp;useLegacyDatetimeCode=<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>&amp;serverTimezone=UTC username: admin password: <span class="hljs-number"><span class="hljs-number">12345</span></span> jpa: hibernate: ddl-auto: update show-sql: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> properties: hibernate.dialect: org.hibernate.dialect.MySQL5Dialect server: port: <span class="hljs-number"><span class="hljs-number">8099</span></span></code> </pre> <br>  C√≥mo funciona esto, probablemente sepa que Spring primero escanea el archivo application.properties o application.yml, cu√°l encuentra.  En √©l indicamos una configuraci√≥n √∫nica: qu√© perfil usaremos.  Por lo general, durante el desarrollo, acumulo varios perfiles, y es muy conveniente cambiarlos utilizando el perfil predeterminado.  A continuaci√≥n, Spring encuentra application.yml con el sufijo deseado y lo usa. <br><br>  Especificamos la fuente de datos, la configuraci√≥n de JPA y, lo que es m√°s importante, el puerto externo de nuestro backend. <br><br><h3>  Frontend ReactJS </h3><br>  Tambi√©n puede ver el frontend en un proyecto en git, o incluso no puede verlo, sino clonarlo y ejecutarlo. <br><br>  Puede verificar el trabajo individual de la interfaz descargando el proyecto, yendo a la carpeta ra√≠z del proyecto en la terminal (donde se encuentra el archivo package.json) y ejecutando dos comandos en secuencia: <br><br><pre> <code class="bash hljs">npm install //      ,  maven npm start //  </code> </pre> <br>  Por supuesto, para esto necesita el Node Package Manager (npm) instalado, y esta es la forma m√°s dif√≠cil de evitar usar Docker.  Si a√∫n comenz√≥ el proyecto, ver√° la siguiente ventana: <br><br><img src="https://habrastorage.org/webt/aq/m7/t4/aqm7t4txa2g_rqbuswo3uiibjpq.png"><br><br>  Oh, bueno, es hora de mirar el c√≥digo.  Solo indicar√© la parte que se refiere al backend. <br><br><pre> <code class="java hljs">export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Api</span></span></span><span class="hljs-class"> </span></span>{ _apiPath = <span class="hljs-string"><span class="hljs-string">'http://localhost:8099'</span></span>; _logUrl = <span class="hljs-string"><span class="hljs-string">'/log'</span></span>; getResource = async () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(`${</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._apiPath}${</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">._logUrl}`)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!res.ok) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Error(`Could not fetch ${<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._logUrl}` + `, received ${res.status}`) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> await res.json(); }; };</code> </pre> <br>  La interfaz funciona de manera predecible.  Seguimos el enlace, esperamos la respuesta y la mostramos en la pantalla. <br><br><img src="https://habrastorage.org/webt/xz/vy/qd/xzvyqdrh7akd1c1flu-gnjhcxok.png"><br><br>  Vale la pena centrarse en los siguientes puntos: <br><br><ol><li>  El frente est√° abierto al mundo exterior a trav√©s del puerto 3000. Este es el puerto predeterminado para React. </li><li>  La parte posterior se abre en el puerto 8099. Lo configuramos en la configuraci√≥n de la aplicaci√≥n. </li><li>  La parte posterior est√° golpeando la base de datos a trav√©s de Internet externo. </li></ol><br>  La aplicaci√≥n est√° lista. <br><br><h2>  2. Recoge im√°genes y lanza contenedores </h2><br>  La estructura de nuestra asamblea ser√° la siguiente.  Crearemos dos im√°genes: frontend y backend, que se comunicar√°n entre s√≠ a trav√©s de puertos externos.  Para la base, no crearemos una imagen, la instalaremos por separado.  Por qu√©  ¬øPor qu√© no creamos una imagen para la base?  Tenemos dos aplicaciones que cambian constantemente y no almacenan datos en nosotros mismos.  La base de datos almacena datos en s√≠ misma, y ‚Äã‚Äãesto puede ser el resultado de varios meses de operaci√≥n de la aplicaci√≥n.  Adem√°s, a esta base de datos se puede acceder no solo desde nuestra aplicaci√≥n de fondo, sino tambi√©n por muchas otras, para eso tambi√©n es una base de datos y no la volveremos a armar constantemente.  Nuevamente, esta es una oportunidad para trabajar con una API externa, que, por supuesto, es conectarse a nuestra base de datos. <br><br><h4>  Ensamblaje frontal </h4><br>  Para ejecutar cada aplicaci√≥n (ya sea frontal o posterior), necesita una cierta secuencia de acciones.  Para ejecutar la aplicaci√≥n en React, debemos hacer lo siguiente (siempre que ya tengamos Linux): <br><br><ol><li>  Instalar NodeJS. </li><li>  Copie la aplicaci√≥n a una carpeta espec√≠fica. </li><li>  Instale los paquetes necesarios (comando de instalaci√≥n npm). </li><li>  Inicie la aplicaci√≥n con el comando npm start. </li></ol><br>  Es esta secuencia de acciones la que tenemos que realizar en la ventana acoplable.  Para hacer esto, en la ra√≠z del proyecto (en el mismo lugar donde se encuentra package.json), debemos colocar el Dockerfile con el siguiente contenido: <br><br><pre> <code class="javascript hljs">FROM node:alpine WORKDIR /usr/app/front EXPOSE <span class="hljs-number"><span class="hljs-number">3000</span></span> COPY ./ ./ RUN npm install CMD [<span class="hljs-string"><span class="hljs-string">"npm"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>]</code> </pre> <br>  Veamos qu√© significa cada l√≠nea. <br><br><pre> <code class="javascript hljs">FROM node:alpine</code> </pre> <br>  Con esta l√≠nea, le dejamos en claro a la ventana acoplable que cuando inicia el contenedor, lo primero que debe hacer es descargar Docker desde el repositorio e instalar NodeJS, y la m√°s liviana (todas las versiones m√°s livianas de marcos y bibliotecas populares en Docker generalmente se llaman alpinas). <br><br><pre> <code class="javascript hljs">WORKDIR /usr/app/front</code> </pre> <br>  En el contenedor de Linux, se crear√°n las mismas carpetas est√°ndar que en otras Linux: / opt, / home, / etc, / usr, etc.  Establecemos el directorio de trabajo con el que trabajaremos - / usr / app / front. <br><br><pre> <code class="javascript hljs">EXPOSE <span class="hljs-number"><span class="hljs-number">3000</span></span></code> </pre> <br>  Abrimos el puerto 3000. A trav√©s de este puerto se producir√° m√°s comunicaci√≥n con la aplicaci√≥n que se ejecuta en el contenedor. <br><br><pre> <code class="javascript hljs">COPY ./ ./</code> </pre> <br>  Copie el contenido del proyecto de origen en la carpeta de trabajo del contenedor. <br><br><pre> <code class="javascript hljs">RUN npm install</code> </pre> <br>  Instale todos los paquetes necesarios para ejecutar la aplicaci√≥n. <br><br><pre> <code class="javascript hljs">CMD [<span class="hljs-string"><span class="hljs-string">"npm"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>]</code> </pre> <br>  Iniciamos la aplicaci√≥n con el comando npm start. <br><br>  Este escenario se ejecutar√° en nuestra aplicaci√≥n cuando se inicie el contenedor. <br><br>  Vamos a aclarar el frente.  Para hacer esto, en la terminal, estando en la carpeta ra√≠z del proyecto (donde se encuentra el Dockerfile), ejecute el comando: <br><br><pre> <code class="java hljs">docker build -t rebounder-chain-frontend .</code> </pre> <br>  Valores de comando: <br><br>  docker es una llamada a la aplicaci√≥n docker, bueno, ya lo sabes. <br>  construir: crea una imagen a partir de materiales de destino. <br>  -t &lt;nombre&gt;: en el futuro, la aplicaci√≥n estar√° disponible mediante la etiqueta especificada aqu√≠.  Puede omitir esto, entonces Docker generar√° su propia etiqueta, pero ser√° imposible distinguirla de otras. <br>  .  - indica que necesita recopilar el proyecto de la carpeta actual. <br><br><img src="https://habrastorage.org/webt/ro/fc/nz/rofcnzucfn0207jnqulzpjrgxw4.jpeg"><br><br>  Como resultado, el ensamblaje debe terminar con el texto: <br><br><pre> <code class="java hljs">Step <span class="hljs-number"><span class="hljs-number">7</span></span>/<span class="hljs-number"><span class="hljs-number">7</span></span> : CMD [<span class="hljs-string"><span class="hljs-string">"npm"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>] ---&gt; Running in ee0e8a9066dc Removing intermediate container ee0e8a9066dc ---&gt; b208c4184766 Successfully built b208c4184766 Successfully tagged rebounder-chain-frontend:latest</code> </pre> <br>  Si vemos que el √∫ltimo paso se ha completado y todo ha sido exitoso, entonces tenemos una imagen.  Podemos verificar esto ejecut√°ndolo: <br><br><pre> <code class="java hljs">docker run -p <span class="hljs-number"><span class="hljs-number">8080</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> rebounder-chain-frontend</code> </pre> <br>  El significado de este comando, creo, se entiende generalmente, con la excepci√≥n de la entrada -p 8080: 3000. <br>  docker run rebounder-chain-frontend - significa que estamos lanzando una imagen de docker, que llamamos rebounder-chain-frontend.  Pero dicho contenedor no tendr√° una salida al exterior, necesita establecer un puerto.  Es el equipo de abajo el que lo establece.  Recordamos que nuestra aplicaci√≥n React se ejecuta en el puerto 3000. El comando -p 8080: 3000 le dice al acoplador que tome el puerto 3000 y lo reenv√≠e al puerto 8080 (que estar√° abierto).  Por lo tanto, una aplicaci√≥n que se ejecuta en el puerto 3000 se abrir√° en el puerto 8080 y estar√° disponible en la m√°quina local en ese puerto. <br><br><pre> <code class="bash hljs">,       : Mac-mini-Vaceslav:rebounder-chain-frontend xpendence$ docker run -p 8080:3000 rebounder-chain-frontend &gt; rebounder-chain-frontend@0.1.0 start /usr/app/front &gt; react-scripts start Starting the development server... Compiled successfully! You can now view rebounder-chain-frontend <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the browser. Local: http://localhost:3000/ On Your Network: http://172.17.0.2:3000/ Note that the development build is not optimized. To create a production build, use npm run build.</code> </pre> <br>  No dejes que el registro te moleste <br><br><pre> <code class="bash hljs"> Local: http://localhost:3000/ On Your Network: http://172.17.0.2:3000/</code> </pre> <br>  Reaccionar piensa que s√≠.  Realmente est√° disponible dentro del contenedor en el puerto 3000, pero reenviamos este puerto al puerto 8080, y desde el contenedor la aplicaci√≥n se ejecuta en el puerto 8080. Puede ejecutar la aplicaci√≥n localmente y verificar esto. <br><br>  Entonces, tenemos un contenedor listo para usar con una aplicaci√≥n front-end, ahora vamos a recoger el backend. <br><br><h4>  Construir back-end. </h4><br>  El script para iniciar una aplicaci√≥n en Java es significativamente diferente del ensamblado anterior.  Se compone de los siguientes elementos: <br><br><ol><li>  Instale la JVM. </li><li>  Recopilamos el archivo jar. </li><li>  Lo lanzamos </li></ol><br>  En Dockerfile, este proceso se ve as√≠: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># back #     JVM FROM openjdk:8-jdk-alpine #  . ,    .  . LABEL maintainer="2262288@gmail.com" #         (  ,  ) VOLUME /tmp #  ,        EXPOSE 8099 # ,       ARG JAR_FILE=build/libs/rebounder-chain-backend-0.0.2.jar #       rebounder-chain-backend.jar ADD ${JAR_FILE} rebounder-chain-backend.jar #    ENTRYPOINT ["java","-jar","/rebounder-chain-backend.jar"]</span></span></code> </pre> <br>  El proceso de ensamblar una imagen con la inclusi√≥n de un dzharnik en algunos puntos se parece al de nuestro frente. <br><br>  El proceso de ensamblar y lanzar la segunda imagen es esencialmente el mismo que ensamblar y lanzar la primera. <br><br><pre> <code class="bash hljs">docker build -t rebounder-chain-backend . docker run -p 8099:8099 rebounder-chain-backend</code> </pre> <br>  Ahora, si tiene ambos contenedores ejecut√°ndose y el backend est√° conectado a la base de datos, todo funcionar√°.  Le recuerdo que debe registrar la conexi√≥n a la base de datos desde el back-end usted mismo, y debe funcionar a trav√©s de una red externa. <br><br><h2>  3. Recopile im√°genes y ejecute contenedores en un servidor remoto </h2><br>  Para que todo funcione en un servidor remoto, necesitamos que Docker ya est√© instalado en √©l, despu√©s de lo cual, simplemente ejecute las im√°genes.  Seguiremos el camino correcto y enviaremos nuestras im√°genes a nuestra cuenta en la nube de Docker, despu√©s de lo cual estar√°n disponibles desde cualquier parte del mundo.  Por supuesto, hay muchas alternativas a este enfoque, as√≠ como todo lo que se describe en la publicaci√≥n, pero empujemos un poco m√°s y hagamos bien nuestro trabajo.  Malo, como dijo Andrei Mironov, siempre tenemos tiempo para hacerlo. <br><br><h4>  Crear una cuenta en el Docker Hub </h4><br>  Lo primero que debe hacer es obtener una cuenta en el centro Docker.  Para hacer esto, vaya al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">centro</a> y reg√≠strese.  No es dificil. <br><br>  A continuaci√≥n, debemos ir a la terminal e iniciar sesi√≥n en Docker. <br><br><pre> <code class="bash hljs">docker login</code> </pre> <br>  Se le pedir√° que ingrese un nombre de usuario y contrase√±a.  Si todo est√° bien, aparecer√° una notificaci√≥n en el terminal que indica que el inicio de sesi√≥n se realiz√≥ correctamente. <br><br><h4>  Confirmaci√≥n de im√°genes en el Docker Hub </h4><br>  A continuaci√≥n, debemos etiquetar nuestras im√°genes y enviarlas al centro.  Esto lo realiza el equipo de acuerdo con el siguiente esquema: <br><br><pre> <code class="bash hljs">docker tag   /_:</code> </pre> <br>  Por lo tanto, debemos especificar el nombre de nuestra imagen, inicio de sesi√≥n / repositorio y la etiqueta con la que nuestra imagen se comprometer√° en el centro. <br><br>  En mi caso, se ve√≠a as√≠: <br><br><img src="https://habrastorage.org/webt/wu/pv/fh/wupvfhs3za_nws2wwsicgfgm2z4.jpeg"><br><br>  Podemos verificar la presencia de esta imagen en el repositorio local usando el comando: <br><br><pre> <code class="bash hljs">Mac-mini-Vaceslav:rebounder-chain-backend xpendence$ docker image ls REPOSITORY TAG IMAGE ID CREATED SIZE xpendence/rebounder-chain-backend 0.0.2 c8f5b99e15a1 About an hour ago 141MB</code> </pre> <br>  Nuestra imagen est√° lista para comprometerse.  Comprometerse: <br><br><pre> <code class="bash hljs">docker push xpendence/rebounder-chain-backend:0.0.2</code> </pre> <br>  Deber√≠a aparecer un registro de confirmaci√≥n exitoso. <br>  Haga lo mismo con la interfaz: <br><br><pre> <code class="bash hljs">docker tag rebounder-chain-frontend xpendence/rebounder-chain-frontend:0.0.1 docker push xpendence/rebounder-chain-frontend:0.0.1</code> </pre> <br>  Ahora, si vamos a hub.docker.com, veremos dos im√°genes bloqueadas.  Que est√°n disponibles desde cualquier lugar. <br><br><img src="https://habrastorage.org/webt/ur/zs/hk/urzshkc3j1ivikyhu4cxvcm43yk.png"><br><br><img src="https://habrastorage.org/webt/cr/if/rb/crifrbda12uxdq6habx6nfeablm.png"><br><br>  Felicidades  Solo tenemos que pasar a la parte final de nuestro trabajo: lanzar im√°genes en un servidor remoto. <br><br><h4>  Ejecutar im√°genes en un servidor remoto </h4><br>  Ahora podemos ejecutar nuestra imagen en cualquier m√°quina con Docker completando solo una l√≠nea en la terminal (en nuestro caso, necesitamos ejecutar secuencialmente dos l√≠neas en terminales diferentes, una para cada imagen). <br><br><pre> <code class="bash hljs">docker run -p 8099:8099 xpendence/rebounder-chain-backend:0.0.2 docker run -p 8080:3000 xpendence/rebounder-chain-frontend:0.0.1</code> </pre> <br>  Este lanzamiento tiene, sin embargo, uno menos.  Cuando se cierra el terminal, el proceso finalizar√° y la aplicaci√≥n dejar√° de funcionar.  Para evitar esto, podemos ejecutar la aplicaci√≥n en modo "separado": <br><br><pre> <code class="bash hljs">docker run -d -p 8099:8099 xpendence/rebounder-chain-backend:0.0.2 docker run -d -p 8080:3000 xpendence/rebounder-chain-frontend:0.0.1</code> </pre> <br>  Ahora la aplicaci√≥n no emitir√° un registro en el terminal (esto puede, nuevamente, configurarse por separado), pero incluso cuando el terminal est√© cerrado, no dejar√° de funcionar. <br><br><h2>  4. Resolviendo problemas de red </h2><br>  Si hiciste todo bien, puedes esperar la mayor decepci√≥n en el camino para seguir esta publicaci√≥n; bien puede resultar que nada funcione.  Por ejemplo, todo funcion√≥ perfectamente para usted y funcion√≥ en la m√°quina local (como, por ejemplo, en mi Mac), pero cuando se implement√≥ en un servidor remoto, los contenedores dejaron de verse (como, por ejemplo, en mi servidor remoto en Linux).  Cual es el problema  Pero el problema es este, y al principio lo insinu√©.  Como se mencion√≥ anteriormente, cuando se inicia el contenedor, Docker crea una m√°quina virtual separada, lanza Linux all√≠ y luego instala la aplicaci√≥n en ese Linux.  Esto significa que el host local condicional para el contenedor en ejecuci√≥n se limita al contenedor en s√≠ y la aplicaci√≥n no tiene conocimiento de la existencia de otras redes.  Pero necesitamos: <br><br>  a) los contenedores se vieron entre s√≠. <br>  b) el servidor vio la base de datos. <br><br>  Hay dos soluciones al problema. <br><br>  1. Crear una red interna. <br>  2. Traer contenedores al nivel del host. <br><br>  1. En el nivel de Docker, puede crear redes, adem√°s, tres de ellas de forma predeterminada: <i>bridge</i> , <i>none</i> y <i>host</i> . <br><br>  <i>Bridge</i> es una red interna de Docker aislada de la red host.  Puede acceder a los contenedores solo a trav√©s de los puertos que abre cuando el contenedor comienza con el comando <i>-p</i> .  Puede crear cualquier cantidad de redes, como <i>bridge</i> . <br><br><img src="https://habrastorage.org/webt/ld/sp/pf/ldsppf06sqnpf6cumhqodzsiiga.jpeg"><br><br>  <i>Ninguno</i> es una red separada para un contenedor espec√≠fico. <br><br>  <i>Host</i> es la red de host.  Cuando selecciona esta red, su contenedor es completamente accesible a trav√©s del host: el comando <i>-p</i> simplemente no funciona aqu√≠, y si implement√≥ el contenedor en esta red, entonces no necesita especificar un puerto externo: el contenedor es accesible por su puerto interno.  Por ejemplo, si Dockerfile EXPOSE est√° configurado en 8090, es a trav√©s de este puerto que la aplicaci√≥n estar√° disponible. <br><br><img src="https://habrastorage.org/webt/ve/6r/rw/ve6rrwnis25uarwrfudc_xlps4o.jpeg"><br><br>  Como necesitamos tener acceso a la base de datos del servidor, utilizaremos el √∫ltimo m√©todo y dise√±aremos los contenedores en la red del servidor remoto. <br><br>  Esto se hace de manera muy simple, eliminamos la menci√≥n de puertos del comando de inicio del contenedor y especificamos la red host: <br><br><pre> <code class="bash hljs">docker run --net=host xpendence/rebounder-chain-frontend:0.0.8</code> </pre> <br>  Conexi√≥n a la base que indiqu√© <br><br><pre> <code class="bash hljs">localhost:3306</code> </pre> <br>  La conexi√≥n de la parte frontal a la posterior ten√≠a que especificarse por completo, externa: <br><br><pre> <code class="bash hljs">http://&lt;__:__&gt;</code> </pre> <br>  Si reenv√≠a el puerto interno al puerto externo, que suele ser el caso de los servidores remotos, debe especificar el puerto interno para la base de datos y el puerto externo para el contenedor. <br><br>  Si desea experimentar con conexiones, puede descargar y crear un proyecto que escrib√≠ especialmente para probar la conexi√≥n entre contenedores.  Simplemente ingrese la direcci√≥n deseada, presione Enviar y en modo de depuraci√≥n, vea lo que vol√≥. <br><br>  El proyecto yace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  Conclusi√≥n </h2><br>  Hay muchas formas de crear y ejecutar una imagen de Docker.  Para aquellos interesados, le aconsejo que aprenda docker-compose.  Aqu√≠ hemos examinado solo una de las formas de trabajar con Docker.  Por supuesto, este enfoque al principio no parece tan simple.  Pero aqu√≠ hay un ejemplo: durante la redacci√≥n de una publicaci√≥n, tuve conexiones salientes en un servidor remoto.  Y durante el proceso de depuraci√≥n, tuve que cambiar la configuraci√≥n de conexi√≥n de la base de datos varias veces.  Todo el ensamblaje y la implementaci√≥n encajan en mi conjunto de 4 l√≠neas, luego de ingresar, vi el resultado en un servidor remoto.  En modo de programaci√≥n extrema, Docker es indispensable. <br><br>  Como promet√≠, publico las fuentes de la aplicaci√≥n: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">backend</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">frontend</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/448094/">https://habr.com/ru/post/448094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448080/index.html">Jugador de f√∫tbol robo de principiantes. Competiciones en MIPT. Android y Arduino y Bluetooth</a></li>
<li><a href="../448082/index.html">[Antes del lunes] S√≠ndrome de ojo seco</a></li>
<li><a href="../448084/index.html">Foto de un agujero negro: ¬øser√° √∫til?</a></li>
<li><a href="../448088/index.html">Producci√≥n de motores de plasma en Rusia.</a></li>
<li><a href="../448090/index.html">Frontend Weekly Digest (8-14 de abril de 2019)</a></li>
<li><a href="../448096/index.html">Julia en l√°tex</a></li>
<li><a href="../448098/index.html">GHIDRA, ejecutables de Playstation 1, firmas FLIRT y PsyQ</a></li>
<li><a href="../448100/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 360 (7 al 14 de abril de 2019)</a></li>
<li><a href="../448102/index.html">Equipo de ensue√±o desde cero: contratar profesionales de TI</a></li>
<li><a href="../448106/index.html">Capacitaci√≥n de desarrolladores 1C-Bitrix: comparta nuestro enfoque para el "crecimiento" del personal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>