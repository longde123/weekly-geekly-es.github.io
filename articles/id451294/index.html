<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖥️ 🍛 📆 Ketika saya menambahkan fungsi ke mobil melalui CAN, tidak dapat memprogram 🍝 🎹 🎀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tujuan artikel ini adalah untuk membicarakan pengalaman saya dengan modifikasi mobil dan eksperimen dengan bus CAN. 

 Bagaimana semuanya dimulai 
 Pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ketika saya menambahkan fungsi ke mobil melalui CAN, tidak dapat memprogram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451294/"> <a href=""><img src="https://habrastorage.org/webt/xo/k7/t2/xok7t2l-qmakairvtmxiduaj6pg.jpeg"></a> <br><br>  Tujuan artikel ini adalah untuk membicarakan pengalaman saya dengan modifikasi mobil dan eksperimen dengan bus CAN. <br><br><h1>  Bagaimana semuanya dimulai </h1><br>  Pertama, saya memutuskan untuk menambahkan kamera depan ke Chevrolet Cruze 2017 saya.  Karena mobil sudah memiliki kamera spion pabrik, maka pada tingkat tinggi perlu untuk mengetahui dua hal: <br><br><ol><li>  Cara mentransfer video dari kamera depan, yang akan saya tambahkan. <br></li><li>  Metode menampilkan gambar dari kamera tampak belakang kapan saja. </li></ol><a name="habracut"></a><br>  Bagian video itu sederhana.  Dari pengalaman sebelumnya, saya tahu bahwa Anda dapat membuat mixer video pada relay. <br><br>  Memulai di layar ternyata lebih rumit, dan setelah beberapa penyelidikan, saya sampai pada kesimpulan bahwa mesin harus mengirim sinyal dari kamera pandangan belakang ke layar melalui semacam bus data. <br><br><h1>  BISA bus </h1><br>  Chevrolet memiliki dua bus data yang berbeda.  Yang pertama adalah CAN standar, cepat (500 Kbps) dan dapat diandalkan, digunakan untuk data penting.  Yang kedua adalah apa yang disebut GM LAN (GMLAN), bus yang lebih tua dan lebih lambat (33,3 Kbps) yang digunakan untuk data non-keamanan. <br><br>  Saya membutuhkan cara untuk mendengarkan lalu lintas di CAN, yaitu sniffer.  Perangkat PCAN sangat berguna untuk tujuan ini. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf0/18f/db5/cf018fdb5119f22edb383bc4b77f92cd.jpg"><br>  <i><font color="gray">Puncak bisa</font></i> <br><br>  Peak Can (PCAN) adalah perangkat USB yang mampu mencegat dan mengirimkan pesan.  Berkat perangkat lunak Pcan View, Anda dapat memulai tanpa banyak pelatihan. <br><br>  Karena kamera pandangan belakang kurang penting untuk keselamatan daripada komponen lain, saya menyarankan agar data yang Anda cari kemungkinan besar ada di bus GMLAN. <br><br>  Jalur akses termudah adalah konektor OBD2.  Saya menghubungkan Peak Can ke bus GMLAN, meluncurkan perangkat lunak, dan mendengarkan lalu lintas segera dimulai. <br><br><h1>  Integrasi </h1><br>  Tujuannya adalah merekayasa balik panggilan kamera tampak belakang.  Untuk melakukan ini, dengan sniffer dihidupkan, saya membalik mobil sehingga dihidupkan, dan kemudian mencoba memarkir beberapa kali.  Sepanjang proses ini, saya melihat satu ID dengan pesan yang secara berurutan menirukan tindakan saya. <br><br>  Lalu saya parkir dan melalui Pcan View, saya mencoba mengirimkan pesan yang sama dengan yang saya lihat ketika layar dihidupkan dan dimatikan.  Dalam sekejap mata, saya sudah berinteraksi dengan bus. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149439" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Pesan lewat PCAN</font></i> <br><br>  Namun, saya tidak berencana untuk terus bepergian dengan laptop.  Apa yang dibutuhkan adalah cara untuk mengotomatiskan fungsi-fungsi ini - dan di sini Arduino berguna.  Kemampuan untuk langsung menerima daya 12V dalam kombinasi dengan sejumlah besar sumber daya dan dukungan di Internet menjadikan pilihan ini jelas. <br><br>  Selain Arduino, saya membutuhkan dua komponen untuk menyelesaikan proyek: modul CAN dan modul relay.  Intinya, Arduino adalah otak yang menjalankan dan menjalankan kode.  Modul CAN menyediakan kemampuan untuk berinteraksi dengan bus data, dan relai memberikan daya ke kamera depan, dan juga bertindak sebagai pengaduk video antara itu dan kamera pandangan belakang. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd2/8b9/335/fd28b9335da54c5e1f490e0439bf6694.jpg"><br>  <i><font color="gray">Modul Mcp2515 (atas), Arduino Uno (tengah), modul relai (bawah)</font></i> <br><br>  Setelah menambah dan mengkonfigurasi perpustakaan yang sesuai, Arduino membuat koneksi dengan mobil. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149432" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Mendengarkan lalu lintas melalui Arduino</font></i> <br><br>  Karena saya sudah tahu bahwa saya bisa memulai tampilan, saya mulai berpikir tentang BAGAIMANA melakukan ini.  Gagasan awal adalah menginstal tombol panggilan instan khusus pada panel, tetapi saya mulai berpikir: "Apa lagi yang bisa saya gunakan di jaringan sebagai pemicu?" <br><br>  Selama percobaan, saya menemukan bahwa pesan dengan ID yang terkait dengan tombol "Batalkan kontrol pelayaran" juga ditransmisikan melalui bus GMLAN.  Ini sangat ideal karena cruise control diaktifkan pada kecepatan di atas 65 km / jam ketika saya menggunakan kamera depan, dan pada kecepatan di bawah 15 km / jam kamera pandangan belakang akan menyala untuk membantu parkir, sehingga mereka tidak akan pernah tumpang tindih.  Setelah menulis beberapa kode, saya bisa membuat Arduino mengenali ketika tombol batal cruise control ditekan. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149460" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Pengenalan satu klik</font></i> <br><br>  Namun, saya tidak ingin kamera mengaktifkan setiap kali saya membatalkan kontrol pelayaran, jadi saya memutuskan bahwa pendekatan terbaik adalah mengubahnya (sebenarnya) menjadi tombol multi-fungsi.  Kamera hanya diaktifkan jika tombol “dua kali ditekan”. <br><br>  Setelah akhir pekan yang panjang menjelajahi fungsi millis dan men-debug kode, saya berhasil memprogram pengenalan ketuk ganda. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149449" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Pengenalan ketuk dua kali</font></i> <br><br>  Dan ketika saya mengikatnya ke tim saya untuk mengontrol tampilan, saya mendapat utilitas kecil yang cukup keren. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149421" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Ketuk dua kali + perintah</font></i> <br><br><h1>  Fungsionalitas </h1><br>  Sekarang saya memiliki kesempatan untuk menghidupkan dan mematikan layar, tetapi ada satu masalah - bagaimana dengan kamera pandangan belakang?  Saya membutuhkan mereka untuk bekerja bersama dengan kamera depan, seolah-olah mereka telah dipasang seperti itu di pabrik. <br><br>  Dalam bagan alur, saya menggambarkan bagaimana saya mewakilinya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/771/63e/cca/77163ecca613e040e82d2aae9db9c511.jpg"><br><br>  Saya segera menyadari bahwa untuk sistem seperti itu Anda perlu mengetahui keadaan tiga variabel setiap saat: <br><br><ul><li>  Modul kamera depan: apakah pengemudi menghidupkan atau mematikannya? <br></li><li>  Tampilan kamera: apakah gambarnya hidup atau mati? <br></li><li>  Reverse: mobil terbalik atau tidak? </li></ul><br>  Tanpa pengalaman pemrograman, itu sangat sulit untuk dilakukan, dan semua waktu luang saya memikirkan berbagai pendekatan. <br><br>  Pada akhirnya, saya berhasil! <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149405" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Pemantauan aktif</font></i> <br><br>  Sekarang saya dapat mengimplementasikan logika operasional yang mengontrol relai. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/333149469" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Kontrol relay</font></i> <br><br>  Sepanjang proses, saya belajar lebih banyak tentang Arduino dan memperhatikan bahwa versi Nano mampu melakukan semua yang Anda butuhkan, sementara itu memiliki ukuran yang lebih kecil dan harga lebih rendah.  Ini sangat ideal untuk pemasangan permanen di dalam mobil.  Saya mengembangkan model dan mencetak case pada printer 3D untuk menempatkan komponen sebagai unit kompak untuk instalasi. <br><br><img src="https://habrastorage.org/webt/o9/dq/vd/o9dqvdst9apwqd3ufvmr-l7ppqy.png"><br>  <i><font color="gray">Kasing 3D</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6af/bc4/e86/6afbc4e8629d4fd6255f6f79f8344b8d.png"></div><br><br><h1>  Semuanya bersama </h1><br>  Akhirnya hari itu tiba ketika saya melihat hasilnya.  Meskipun Anda masih harus mengutak-atik waktunya, itu menyenangkan untuk melihat bahwa modul bekerja dengan benar. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/334454520" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Menghidupkan / mematikan mode parkir, menghidupkan / mematikan kamera depan, secara otomatis beralih ke kamera tampak belakang dan secara otomatis beralih kembali</font></i> <br><br>  Secara umum, pengalaman ini banyak mengajarkan saya dan membuka mata saya terhadap kemungkinan integrasi langsung dengan bus CAN.  Cukup mengejutkan apa yang bisa dicapai dengan menghubungkan pada dua kabel. <br><br><h1>  Di masa depan </h1><br>  Di masa depan, saya berencana untuk menulis tutorial mendalam tentang cara menambahkan fungsionalitas tambahan ke tombol yang ada di mobil Anda menggunakan perangkat lunak dan komponen gratis. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id451294/">https://habr.com/ru/post/id451294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id451278/index.html">Analisis wavelet Bagian 1</a></li>
<li><a href="../id451280/index.html">Logam yang paling menarik</a></li>
<li><a href="../id451282/index.html">Black hole analytics web: berapa banyak data yang hilang di GA dan mengapa</a></li>
<li><a href="../id451286/index.html">Roskomnadzor, yang pantas kita dapatkan</a></li>
<li><a href="../id451292/index.html">RxDart: transformasi ajaib arus</a></li>
<li><a href="../id451296/index.html">Diumumkan oleh ML.NET 1.0</a></li>
<li><a href="../id451298/index.html">Cara membuat konsol game dengan kasing dengan memesan satu papan sirkuit tercetak</a></li>
<li><a href="../id451302/index.html">Perusahaan alih daya TI teratas</a></li>
<li><a href="../id451304/index.html">"Tip" Yandex: bagaimana memaksimalkan keuntungan pada langganan berbayar</a></li>
<li><a href="../id451306/index.html">QEMU.js: sekarang serius dan dengan WASM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>