<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯд╢ ЁЯд╣ЁЯП┐ ЁЯСйЁЯП╗тАНЁЯПн рдХреНрд░рд┐рд╕рдорд╕ рдХреЗ рд▓рд┐рдП рд╕реНрдкреЗрд╕рд╡реЙрдХ ЁЯУЮ ЁЯФн ЁЯЦРЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░! 

 рдХреНрд░рд┐рд╕рдорд╕ рд╕реЗ рдХреБрдЫ рд╕рдордп рдкрд╣рд▓реЗ, рдЖрдИрдЯреА рд╡рд┐рднрд╛рдЧ рдореЗрдВ рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ - рдпрд╣ рд░реЗрдб рд╣реИрдЯ рд╕рд┐рд╕реНрдЯрдо рд╣реИ, рдЬреЛ рдЙрдкрдЧреНрд░рд╣ рдХреЗ рдПрдХ рдирд┐: рд╢...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреНрд░рд┐рд╕рдорд╕ рдХреЗ рд▓рд┐рдП рд╕реНрдкреЗрд╕рд╡реЙрдХ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435578/">  рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░! <br><br>  рдХреНрд░рд┐рд╕рдорд╕ рд╕реЗ рдХреБрдЫ рд╕рдордп рдкрд╣рд▓реЗ, рдЖрдИрдЯреА рд╡рд┐рднрд╛рдЧ рдореЗрдВ рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ - рдпрд╣ рд░реЗрдб рд╣реИрдЯ рд╕рд┐рд╕реНрдЯрдо рд╣реИ, рдЬреЛ рдЙрдкрдЧреНрд░рд╣ рдХреЗ рдПрдХ рдирд┐: рд╢реБрд▓реНрдХ рдПрдирд╛рд▓реЙрдЧ рд╣реИ, рдХреЗрдВрджреНрд░реАрдХреГрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди, рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдбреЗрдЯ рдФрд░ рдкреВрд░реЗ рд╕рд░реНрд╡рд░ рдкрд╛рд░реНрдХ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕рдорд░реНрдерди рдХреЗ рд▓рд┐рдП рд╣реИред <br><br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЙрдкрд▓рдмреНрдз рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рдкрд░реЗрд╢рд╛рдиреА рдХреА рд╢реВрдЯрд┐рдВрдЧ рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рджреБрд░реНрд▓рдн рд╣реИ, рдХрд╛рд░реНрдп рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░реЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдХреНрд░рдорд┐рдХ рдкрд░рд┐рдЪрдп рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрд╛рдж рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рдерд╛, рдФрд░ рдмрд╛рдж рдореЗрдВ рдЙрддреНрдкрд╛рджреЛрдВ рдХреЗ рд▓рд┐рдПред <br><br>  рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рди рдХреЗрд╡рд▓ рдХреЗрдВрджреНрд░реАрдХрд░рдг рдФрд░ рдирд┐рдпрдВрддреНрд░рдг рдХрд╛ рд╕рд░рд▓реАрдХрд░рдг рдерд╛, рдмрд▓реНрдХрд┐ рдЗрд╕рд▓рд┐рдП рднреА рдерд╛ рдХрд┐ рдХреЛрдИ рднреА рдирдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд╕рд░реНрд╡рд░ рдкрд░ рдЪрдВрдЪрд▓ рдХрд▓рдо рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдорд┐рд╕рд╛рд▓ рдереАред <br><br>  рджреЛ рд╕рдкреНрддрд╛рд╣ рдХреЗ рдХрд╛рдо рдХреЗ рдмрд╛рдж, рдореБрдЭреЗ рдЬреЛ рднреА рдЬреНрдЮрд╛рди рдорд┐рд▓рд╛, рд╡рд╣ рдЗрдВрдЯрд░рдлреНрд▓реВ рдХреЗ рдЖрдВрддрд░рд┐рдХ рдПрдирд╛рд▓реЙрдЧ рдореЗрдВ рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЧрдпрд╛, рдФрд░ рдПрдХ рдореБрдлреНрдд рджрд┐рди рдиреЗ рдореБрдЭреЗ рд╣реИрдмрд░ рдкрд░ рдПрдХ рд▓реЗрдЦ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ред <br><a name="habracut"></a><br>  рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдмрддрд╛рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣реБрдЖ рдерд╛ рдФрд░ рдХреНрдпрд╛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рд╣реБрдЖ рдерд╛, рдЗрд╕рд▓рд┐рдП рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдореИрдиреБрдЕрд▓ рдХрд╛ рдирд╛рдЯрдХ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br>  рд╕рд░реНрд╡рд░ / рдХреНрд▓рд╛рдЗрдВрдЯ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рд╡рд┐рдиреНрдпрд╛рд╕ <br>  рдЬреАрдпреВрдЖрдИ рдореЗрдВ + рд╕рд┐рд╕реНрдЯрдо рд╕реЗрдЯрдЕрдк <br>  + рд╕реНрдерд╛рдкрдирд╛ / рдЕрджреНрдпрддрди рдкреИрдХреЗрдЬ рдХрд╛ рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВ <br>  + рдЗрд░реЗрдЯрд╛ (рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЕрджреНрдпрддрдиреЛрдВ, рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдЖрджрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рдирд╛) <br><br>  - рдкреНрд░реЙрдХреНрд╕реА (рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ, рд╣рд╛ рджреЗрдиреЗ рдХреЗ рдмрд╛рдж) <br>  - рдореЛрдЪреА / рдХрд┐рдХрд╕реНрдЯрд╛рд░реНрдЯ <br>  - OpenSCAP <br><br><h3>  рд╕рд┐рд╕реНрдЯрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ </h3><br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдкреВрд░рд╛ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ VMWare рдкрд░ рдЪрд▓рддрд╛ рд╣реИ, рдХрд╛рд░реНрдп рд╡реАрдПрдо рд░рдирд┐рдВрдЧ рд╕реЗрдВрдЯреЛрд╕ рдкрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ 7. рдбреЗрд╡рд▓рдкрд░ рд╕реЗ рдЕрдиреБрд╢рдВрд╕рд┐рдд рд╕рд┐рд╕реНрдЯрдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╣реИрдВ: <br><br><ul><li>  4 рдЬреАрдмреА рд░реИрдо </li><li>  6GB рдореБрдХреНрдд рд╕реНрдерд╛рди рдХреЗ рд▓рд┐рдП / var / рдЙрдкрдЧреНрд░рд╣ / </li><li>  DB рдХреЗ рд▓рд┐рдП 12GB </li></ul><br>  рдореИрдВрдиреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛: <br><br><ul><li>  6 рдЬреАрдмреА рд░реИрдо </li><li>  4 рд╕реАрдкреАрдпреВ </li><li>  40GB HDD </li></ul><br>  рдореИрдВ рдЖрдкрдХреЛ SELinux рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХреА рднреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдФрд░, рдЕрдЧрд░ рдлрд╛рдпрд░рд╡рд╛рд▓рдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реВрдВред  рдпрд╛ рдЕрдкрд╡рд╛рджреЛрдВ рдореЗрдВ http рд╕реЗрд╡рд╛ рдЬреЛрдбрд╝реЗрдВред <br><br>  рдиреЛрдЯ: рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ рдФрд░ рд╕рд░реНрд╡рд░ рджреЛрдиреЛрдВ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЗ рд▓рд┐рдП рдФрд░ рд╕рд╛рде рд╣реА рд╕рд╛рде рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдмреИрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Ansible рдХреЗ рд▓рд┐рдП рдкреНрд▓реЗрдмреБрдХ рд╣реЛрдЧреАред  рдЙрдирдХреА рдорджрдж рд╕реЗ, рдХреБрдЫ рдорд┐рдирдЯреЛрдВ рдореЗрдВ рдкреВрд░реЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рддреИрдирд╛рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред <br><br><h3>  рд╕реНрдерд╛рдкрдирд╛ </h3><br>  рд╕реНрдерд╛рдкрдирд╛ рдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ рдореЗрдВ рдФрд░ рдХрдИ рд╕рд╛рдЗрдЯреЛрдВ рдкрд░ рджреЛрдиреЛрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рд▓реЗрдЦ рдХреА рдЕрдЦрдВрдбрддрд╛ рдХреЗ рд▓рд┐рдП, рдореБрдЭреЗ рдпрд╣рд╛рдВ рдЗрд╕ рдмрд┐рдВрджреБ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рд╕реНрдкреЗрд╕рд╡реЙрдХ рджреЛ DBMS: PostgreSQL рдФрд░ Oracle RDBMS рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдореБрдЭреЗ рдкрд╣рд▓реЗ рдХреЗ рд╕рд╛рде рдЕрдиреБрднрд╡ рд╣реИ, рдФрд░ рдореИрдВ рдЕрдм рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛ред <br><br>  рджреЛ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: рд╕реНрдкреЗрд╕рд╡реЙрдХ рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдЬреЛ рд╕реНрд╡рдпрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдЧрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╣реА рд╕рд░реНрд╡рд░ рдФрд░ рдореИрдиреНрдпреБрдЕрд▓ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдкрд░, рдЬрд╣рд╛рдВ рдЖрдк рдбреАрдмреА рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд░реНрд╡рд░ рдкрд░ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдореИрдВ рджреЛрдиреЛрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реВрдВрдЧрд╛, рдореИрдВ рдПрдХ рдЕрд▓рдЧ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реВрдВрдЧрд╛ред <br><br><h4>  PostgreSQL </h4><br><pre><code class="bash hljs">yum install -y postgresql-server</code> </pre> <br>  PG рдХреЗ рд▓рд┐рдП PL / Tcl рдореЙрдбреНрдпреВрд▓ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рднреА рдЖрд╡рд╢реНрдпрдХ рд╣реИ: <br><br><pre> <code class="bash hljs">yum install -y postgresql-pltcl postgresql-setup initdb systemctl start postgresql</code> </pre> <br>  рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕, рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдБ, рдФрд░ рдореЙрдбреНрдпреВрд▓ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">su - postgres -c <span class="hljs-string"><span class="hljs-string">'PGPASSWORD=verystrong; createdb spcwlkdb ; createlang plpgsql spcwlkdb ; createlang pltclu spcwlkdb ; yes $PGPASSWORD | createuser -P -sDR spcwlkuser'</span></span></code> </pre> <br>  рдХрдиреЗрдХреНрд╢рди рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ <i>/var/lib/pgsql/data/pg_hba.conf</i> рдмрджрд▓рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рднреА рд▓рд╛рдЗрди: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">local</span></span> spcwlkdb spcwlkuser md5 host spcwlkdb spcwlkuser 127.0.0.1/8 md5 <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> spcwlkdb postgres ident</code> </pre> <br>  рд╕рдм рдХреБрдЫ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">systemctl restart postgresql</code> </pre> <br>  рдпрджрд┐ рдЖрдк рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд░реНрд╡рд░реЛрдВ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдЗрд░рд╛рджрд╛ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ рдкрд░ <i>postgresql-contrib</i> рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рд╣реИред <br><br><h4>  spacewalk </h4><br>  рд╣рдо рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">rpm -Uvh https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8/epel-7-x86_64/00736372-spacewalk-repo/spacewalk-repo-2.8-11.el7.centos.noarch.rpm</code> </pre> <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдПрдкреЗрд▓ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</code> </pre> <br>  рдЬрд╛рд╡рд╛: <br><br><pre> <code class="bash hljs">(<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/yum.repos.d &amp;&amp; curl -O https://copr.fedorainfracloud.org/coprs/g/spacewalkproject/java-packages/repo/epel-7/group_spacewalkproject-java-packages-epel-7.repo)</code> </pre> <br>  рдЕрдм рд╕реАрдзреЗ Spacewalk-postgres рдХреЗ рд▓рд┐рдП рдЗрдВрд╕реНрдЯреЙрд▓рд░: <br><br><pre> <code class="bash hljs">yum -y install spacewalk-setup-postgresql</code> </pre> <br>  рд╣рдорд╛рд░реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">spacewalk-setup-postgresql create --db spcwlkdb --user spcwlkuser --password verystrong</code> </pre> <br>  рдЗрд╕ рдШрдЯрдирд╛ рдореЗрдВ рдХрд┐ рдЖрдк рдПрдХ рдЕрд▓рдЧ рдбреЗрдЯрд╛рдмреЗрд╕ / рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЖрдкрдХреЛ - <i>thestandalone</i> рдлреНрд▓реИрдЧ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ рдХрд╛ IP рдкрддрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рд╕рд╛рде рд╣реА рдкреЛрд░реНрдЯ 5432 рдХреЛ рдЦреЛрд▓рдирд╛ рди рднреВрд▓реЗрдВред <br><br>  <i>рдиреЛрдЯ: рдореИрдВ рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЕрдзрд┐рдХ рдЙрддреНрдкрд╛рджрдХ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЯреНрдпреВрдирд┐рдВрдЧ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред</i> <br><br>  рдЕрдм рдЦреБрдж Spacewalk рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ рд╕реНрдерд╛рдкрдирд╛ рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">yum -y install spacewalk-postgresql spacewalk-setup --external-postgresql</code> </pre> <br>  рдЕрдЧрд▓рд╛, рдПрд╕рдПрд╕рдПрд▓ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рдХрдИ рдкреНрд░рд╢реНрди рдкреВрдЫреЗ рдЬрд╛рдПрдВрдЧреЗред  рдЖрдк рд╕рднреА рдорд╛рдиреЛрдВ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рджрд░реНрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдЖрдк <i>--answer-file</i> рдзреНрд╡рдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╕реНрдерд╛рдкрдирд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрддрд░ рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">admin-email = root@localhost ssl-set-cnames = spcwlkserver ssl-set-org = Unicorn ssl-set-org-unit = EOH ssl-set-city = Prague ssl-set-state = HMP ssl-set-country = CZ ssl-password = verystrong ssl-set-email = root@localhost ssl-config-sslvhost = Y db-backend=postgresql db-name=spcwlkdb db-user=spcwlkuser db-password=verystrong db-host=localhost db-port=5432 <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-tftp=Y</code> </pre> <br>  рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕реАрдзреЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="bash hljs">/usr/sbin/spacewalk-service [stop|start|restart]</code> </pre> <br>  рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдпреЛрдЧрджрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╕рднреА рддреГрддреАрдп-рдкрдХреНрд╖ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: <br><br><pre> <code class="bash hljs">spacewalk-service status</code> </pre> <br><h4>  рд╡рд┐рдХрд▓реНрдк рджреЛ, рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрдерд╛рдкрдирд╛ </h4><br>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рд╕реЗрдЯ рдЕрдк рдХрд░реЗрдВ рдФрд░ рдЪрд▓рд╛рдПрдВ: <br><br><pre> <code class="bash hljs">yum -y install spacewalk-setup-postgresql yum -y install spacewalk-postgresql spacewalk-setup</code> </pre> <br>  рдлрд┐рд░ рд╕реЗ, рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдПрд╕рдПрд╕рдПрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рд╢реНрди рдкреВрдЫреЗ рдЬрд╛рдПрдВрдЧреЗ, рд╣рдо рдЬрд╡рд╛рдм рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдЗрд▓ рдХрд╛ <i>рдкрд╛рд╕рд╡рд░реНрдб</i> рдФрд░ рдкрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br><h3>  рдмреЗрд╕ рдПрдВрдб рдЪрд╛рдЗрд▓реНрдб рдЪреИрдирд▓, рд░рд┐рдкреЛрдЬ </h3><br>  рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдЯреЗрд╢рдиреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реНрдкреЗрд╕рд╡реЙрдХ рддрдерд╛рдХрдерд┐рдд рдЪреИрдирд▓реЛрдВ рдХреА рдПрдХ рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдпрд╛ рддреЛ рдореБрдЦреНрдп (рдмрдЪреНрдЪрд╛) рдпрд╛ рдмрдЪреНрдЪрд╛ (рдмрдЪреНрдЪрд╛) рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдПрдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЬрд┐рд╕рдХреА рдЖрдкрдХреЛ рдЬрд╝рд░реВрд░рдд рд╣реИ рдкреНрд░рддреНрдпреЗрдХ рдЪреИрдирд▓ рд╕реЗ рдЬреБрдбрд╝реА рд╣реБрдИ рд╣реИ, рд╕рд╛рде рд╣реА рдПрдХ рдХреБрдВрдЬреА - рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕рд░реНрд╡рд░ред <br><br>  рдирддреАрдЬрддрди, рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ рдмрджрд▓реЗ рдореЗрдВ, рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рд╕реНрдкреЗрд╕рд╡реЙрдХ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдЗрд░реЗрдЯрд╛, рдЬрд┐рд╕реЗ рдЪреИрдирд▓реЛрдВ рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рднреА рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рдЬреЛ рдЕрджреНрдпрддрди рдФрд░ рдкреИрдХреЗрдЬ рдирд┐рдпрдВрддреНрд░рдг рдХреЛ рд╕рд░рд▓ рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рднреА рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рд╡рд┐рднрд┐рдиреНрди рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╡рд░реНрдЧреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рджреЛрдиреЛрдВ рдПрдХ рд╣реА рдЪреИрдирд▓ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЪреИрдирд▓реЛрдВ рдпрд╛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рд╛рдеред рдПрдХ рд╕рдордп рдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдЬреЛ 100+ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рднреА рд╕реНрдерд╛рдкрд┐рдд рдкреИрдХреЗрдЬреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдЙрдкрд▓рдмреНрдз рд╣реИ, рдФрд░ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рдмрд╛рдж рдФрд░ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рд╕рдВрднрд╡ рд╣реИред  рдХреБрдЫ рдмрд┐рдВрджреБ рд╕рд╣рдЬ рд╣реИрдВ, рдФрд░ рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рдЖрдЗрдЯрдо рд▓рд╛рдЗрди рджреНрд╡рд╛рд░рд╛ рд▓рд╛рдЗрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред <br><br>  рд╕реНрдкреЗрд╕рд╡реЙрдХ рдореЗрдВ рд╕рднреА рдХреНрд░рд┐рдпрд╛рдПрдВ рдПрдХ рдЕрдиреБрд╕реВрдЪреА (рд╢реЗрдбреНрдпреВрд▓) рдкрд░ рд╣реЛрддреА рд╣реИрдВ, рд▓рдЧрднрдЧ рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЛ рдЙрд╕ рд╕рдордп рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред <br><br>  рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдмрд╛рдж, рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдХреЗ рдкрддреЗ рдкрд░ рдЬрд╛рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рдЪрд┐рддреНрд░рдордп рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдЧреЗ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рдПрдЧрд╛: <br><br><img src="https://habrastorage.org/webt/bb/iq/co/bbiqcow_kswo_i91vsqceeg6g0s.png"><br><br>  рдкрд╛рд╕рд╡рд░реНрдб, рдкреНрд░рд╢рд╛рд╕рдХ рдХрд╛ рдирд╛рдо, рд╕рдВрдЧрдарди рдХрд╛ рдирд╛рдо (рдЬреЛ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рднреА рд╣реИ) рджрд░реНрдЬ рдХрд░реЗрдВ, рдФрд░ рд╕реНрдЯрд╛рд░реНрдЯ рдкреИрдирд▓ рдкрд░ рдЬрд╛рдПрдВред <br><br>  рдЕрднреА рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╛ рддреЛ рд╕реНрд╡рдпрдВ рдЙрдкрд▓рдмреНрдз рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдЪреИрдирд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <i>рдЪреИрдирд▓ - рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЪреИрдирд▓ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ - рдЪреИрдирд▓ рдмрдирд╛рдПрдБ:</i> <br><br><img src="https://habrastorage.org/webt/5m/6o/f9/5m6of99m6ey7yq0rxbdmenvhcuw.png"><br><br>  рдореИрдВ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЪреИрдирд▓ рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рдУрдПрд╕ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЪреИрдирд▓ рдХреЗ рдирд╛рдо рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ рдЬреЛ рдЗрд╕ рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рд╣реЛрдВрдЧреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <i>CentOS_7_x86_64</i> , рдЖрдк рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЪреЗрдХ рдХреЗ рд░реВрдк рдореЗрдВ <i>sha256</i> рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ, рдЪреИрдирд▓ рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг рдЪреИрдирд▓ рдХреЗ рдПрдХ рдЫреЛрдЯреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдЕрднрд┐рдкреНрд░реЗрдд рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдк рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕрдм рдПрдХ рдмрд╛рд▓ рдЪреИрдирд▓ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рдореБрдЦреНрдп рдПрдХ рд╕реЗ рдмрд╛рдВрдзреЗрдВред  рд╣рдо рдореБрдЦреНрдп рдЪреИрдирд▓ рдмрдирд╛рддреЗ рд╕рдордп рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВ, рдХреЗрд╡рд▓ рдкреЗрд░реЗрдВрдЯ рдЪреИрдирд▓ рдлреАрд▓реНрдб рдореЗрдВ рд╣рдо рдкрд╣рд▓реЗ рдмрдирд╛рдП рдЧрдП рдЪреИрдирд▓ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВрдЧреЗред <br><br>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдореБрдЦреНрдп рдФрд░ рд╕рд╣рд╛рдпрдХ рдЪреИрдирд▓реЛрдВ рд╕реЗ рдмрд╛рдВрдзреЗрдВред <br>  <i>рдЪреИрдирд▓ - рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ</i> <br><br><img src="https://habrastorage.org/webt/a3/gq/ok/a3gqokxrwd10mlfq4geiw0f1nqy.png"><br><br>  рдореБрдЦреНрдп рдЪреИрдирд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдореИрдВ рдЖрдзрд╛рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рд╕рд╣рд╛рдпрдХ рдХреЗ рд▓рд┐рдП - рдЕрдкрдбреЗрдЯред <br><br>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдЙрдиреНрд╣реЗрдВ рдЪреИрдирд▓реЛрдВ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br>  <i>рдЪреИрдирд▓ - рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЪреИрдирд▓ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ</i> , рдЕрдкрдирд╛ рдореБрдЦреНрдп рдЪреИрдирд▓ рдЦреЛрд▓реЗрдВ, рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗрдХреНрд╢рди рдЦреЛрд▓реЗрдВред <br><br><img src="https://habrastorage.org/webt/hw/ro/og/hwroogjvybx0p1z2mslzxf8nunq.png"><br><br>  рд╕рднреА рдмрдирд╛рдП рдЧрдП рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╣реЛрдВрдЧреЗ, рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ рдЬрд╝рд░реВрд░рдд рд╣реИ рдЙрд╕реЗ рдЪреБрдиреЗрдВ, рдЗрд╕реЗ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ рдФрд░ рдЕрдкрдбреЗрдЯ рд░рд┐рд╕реЛрд░реНрд╕ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред <br><br>  рдЕрдЧрд▓рд╛, рд╕рд┐рдВрдХ рдЙрдкрдХреБрдВрдЬреА рдЦреЛрд▓реЗрдВ: <br><br><img src="https://habrastorage.org/webt/ho/j7/4m/hoj74mhjkorduvftwkwbteuxzk4.png"><br><br>  рдЬрд╣рд╛рдБ рдЖрдк рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдФрд░ рдЪреИрдирд▓ рдХреЛ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд╣реАрдВ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд▓рд┐рдП рд╢реЗрдбреНрдпреВрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред <br><br>  <i>рдиреЛрдЯ: рдЪрдВрдЪрд▓ рдкреЗрди рдХреЗ рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЭреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдорд╛рдирдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рд╣рдЯрд╛рдирд╛ рдерд╛ред</i> <br><br><h4>  рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди, рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рд╕рд░реНрд╡рд░, рдореБрдЦреНрдп рдкреНрд░рдмрдВрдзрди рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рддреЗ рд╣реБрдП, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ </h4><br>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ, рд╕реНрдкреЗрд╕рд╡реЙрдХ Red Hat Network рд╕реЗ рдПрдХ рдкреНрд░рдореБрдЦ рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдпреБрдЧреНрдорди рдФрд░ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдХреБрдВрдЬреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, <i>рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЬрд╛рдПрдБ - рд╕рдХреНрд░рд┐рдпрдХрд░рдг рдХреБрдВрдЬреА - рдХреБрдВрдЬреА рдмрдирд╛рдПрдБ:</i> <br><br><img src="https://habrastorage.org/webt/ea/df/vf/eadfvfezxpeh1s_lt9blgfox3j8.png"><br><br>  рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдмреЗрд╣рдж рд╕рд░рд▓ рд╣реИ, рдХреНрдпрд╛ рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЖрдк рдЦреБрдж рдХреЛ рдХреБрдВрдЬреА рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рдХрд╛ рдкреНрд░рд╛рд░реВрдк рд╣рдореЗрд╢рд╛ <i>1-XXXXXX рд╣реЛрдЧрд╛</i> , рдФрд░ рдпрд╣ рднреА, рдкреНрд░рддреНрдпреЗрдХ рдХреБрдВрдЬреА рдЪреИрдирд▓ рд╕реЗ рдЬреБрдбрд╝реА рд╣реИред  рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдзреНрд╡рдЬ рдкреНрд░рдореБрдЦ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдирдИ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЛ рдордЬрдмреВрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  <b>рдЧреНрд░рд╛рд╣рдХ рд╕реНрдерд╛рдкрдирд╛</b> <br><br>  рдХреНрд▓рд╛рдЗрдВрдЯ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">rpm -Uvh https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8-client/epel-7-x86_64/00742644-spacewalk-repo/spacewalk-client-repo-2.8-11.el7.centos.noarch.rpm yum -y install rhn-client-tools rhn-check rhn-setup rhnsd m2crypto yum-rhn-plugin rhncfg-actions deltarpm</code> </pre> <br><br>  <i>рдиреЛрдЯ: rhncfg-actions рдФрд░ deltarpm рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ рд░рд┐рдореЛрдЯ рдХрдВрдЯреНрд░реЛрд▓ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред</i> <br><br>  рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд░реНрд╡рд░ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП rhn_check рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╣рд░ 4 рдШрдВрдЯреЗ рдЪрд▓рддрд╛ рд╣реИред  рдпрд╣ рдорд╛рди 60 рдорд┐рдирдЯ рддрдХ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП рдХреЛрдИ рднреА рд╡рд┐рдХрд▓реНрдк рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ рдерд╛, рдЗрд╕рд▓рд┐рдП рджреЛ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: рдЕрд╕рдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЬреЛ рд╕реНрдкреЗрд╕рд╡реЙрдХ рдХреЗ рд╕рд╛рде рдЖрддрд╛ рд╣реИ, рдпрд╛ рдмрд╕ rhn_check рдХреЗ рд▓рд┐рдП рдХреНрд░реЛрдирдЬреЛрдм рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рд░ рдорд┐рдирдЯ рдХреЗ рд▓рд┐рдП: рд╣рдо рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ, рдлрд┐рд░ рдореВрд▓реНрдп рдХреЛ рдХреГрдкрдпрд╛ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><pre> <code class="bash hljs">crontab -e * * * * * /usr/sbin/rhn_check</code> </pre> <br>  рдпрд╣ / amr / bin / rhn-actions-control --enable-all рдХреЛ Cron рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдПрдорд┐рд╕ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдХрднреА-рдХрднреА рдпрд╣ рд╕реБрд╕реНрдд рднреА рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╣рдо рдореБрдЦреНрдп рдкреНрд░рдмрдВрдзрди рдкрд░ рд▓реМрдЯрддреЗ рд╣реИрдВ, рдФрд░ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рдХреБрдВрдЬреА рдЖрдИрдбреА рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддреЗ рд╣реИрдВ, рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">rhnreg_ks --serverUrl=http://your-server-ip/XMLRPC --activationkey=1-YOURKEY --force</code> </pre> <br>  рдмрд╕ рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ рдЖрдИрдкреА рдФрд░ рдкреНрд░рдореБрдЦ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛ред  рдлрд┐рд░ рд╕реЗ, рдореИрдВ рдЖрдкрдХреЛ <i>--рдлреЛрд░реНрд╕</i> рдлреНрд▓реИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рдореИрдВрдиреЗ рдЗрд╕ рдзреНрд╡рдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рд╣реИред <br><br>  рд╣рдо <i>рд╕рд┐рд╕реНрдЯрдо рдкрд░</i> рд▓реМрдЯрддреЗ рд╣реИрдВ <i>- рд╕рднреА</i> , рд╣рдо рдЕрдкрдиреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдиреЛрдЯрд┐рд╕ рдХрд░рдХреЗ рдкреНрд░рд╕рдиреНрди рд╣реИрдВред  рдЕрдм рдЖрдк рдЗрд╕реЗ рдЦреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡рд╣рд╛рдВ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдм рдореИрдВ рдЕрддреНрдпрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдореВрд╣ рдмрдирд╛рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред <br><br>  <i>рд╕рд┐рд╕реНрдЯрдо - рд╕рд┐рд╕реНрдЯрдо рдЧреВрдкреНрд╕ - рдЧреНрд░реБрдк рдмрдирд╛рдПрдВ</i> , рдирд╛рдо рдФрд░ рд╡рд┐рд╡рд░рдг рднрд░реЗрдВ, рд╕реЗрд╡ рдХрд░реЗрдВ, рд╣реМрд╕рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдЧреНрд░реБрдк рдХреЛ рдЦреЛрд▓реЗрдВ, <i>рд╕рд┐рд╕реНрдЯрдо</i> рд╕реЗрдХреНрд╢рди рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЧреНрд░реБрдк рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред <br><br>  рдЕрдм рдЪреИрдирд▓ рдХреЛ рд╕рд┐рд╕реНрдЯрдо рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░реЗрдВ, <i>рд╕рд┐рд╕реНрдЯрдо - рдЖрдкрдХрд╛ рд╕рд┐рд╕реНрдЯрдо - рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдлрд╝реЛрд▓реНрдбрд░ - рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЪреИрдирд▓ рд╕рдмрдлрд╝реЛрд▓реНрдбрд░:</i> <br><br><img src="https://habrastorage.org/webt/7f/hp/lu/7fhplurd2imupn4cio2n7ymcz1y.png"><br><br>  рдЕрдкрдирд╛ рдЪреИрдирд▓ рдЪреБрдиреЗрдВ рдФрд░ рдкреБрд╖реНрдЯрд┐ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдордЬрд╝реЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдкреИрдХреЗрдЬ, <i>рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ - рдкреИрдХреЗрдЬ - рдЗрдВрд╕реНрдЯреЙрд▓</i> рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <b>рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓</b> <br><br>  рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд░реНрд╡рд░ / рд╕реНрдерд╛рдиреАрдп рдорд╢реАрди, рд╕рд╛рде рд╣реА рд░рд┐рдореЛрдЯ рдХрдВрдЯреНрд░реЛрд▓ рдХреЗ рдмреАрдЪ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЗрд╕реЗ рд▓рд┐рдВрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИред <br>  рд╣рдо <i>рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди - рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рдкрд░</i> рдЬрд╛рддреЗ рд╣реИрдВ <i>- рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рдмрдирд╛рдПрдБ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</i> рдореЗрдВ рдирд╛рдо, рд╡рд┐рд╡рд░рдг, рд╕рд╣реЗрдЬреЗрдВ, рдлрд┐рд░ рд╕реЗрдЯ <i>рдХрд░реЗрдВ - рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ - рдЪреИрдирд▓ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдВ</i> рдФрд░ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЪреИрдирд▓, рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪреИрдирд▓ рдкрд░ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХрд░реЗрдВред <br><br><img src="https://habrastorage.org/webt/jy/ki/wt/jykiwtrdmame71pab7yyzr40lay.png"><br><br>  рдЕрдм рд╣рдо рд╕рд░реНрд╡рд░ рдФрд░ рд╕реНрдерд╛рдиреАрдп рдорд╢реАрдиреЛрдВ рджреЛрдиреЛрдВ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рд╡рд┐рднрд╛рдЬрди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <i>рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди - рдлрд╝рд╛рдЗрд▓реЗрдВ рдЬреЛрдбрд╝реЗрдВ - рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ / рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ:</i> <br><br><img src="https://habrastorage.org/webt/cf/js/ie/cfjsieqwp21zlmem7goijg7cqui.png"><br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рджреВрд░рд╕реНрде рдХрдорд╛рдВрдб рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/hy/xw/d-/hyxwd-znezglfc-glf5yhn44wsq.png"><br><br>  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рд╕рднреА рдХреНрд░рд┐рдпрд╛рдПрдВ рдПрдХ рдЕрдиреБрд╕реВрдЪреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддреА рд╣реИрдВ, рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдкрд░ рд▓рд╛рдЧреВ рд╕рднреА рдХрд╛рд░реНрдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдИрд╡реЗрдВрдЯ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ: <br><br><img src="https://habrastorage.org/webt/9m/fp/hj/9mfphjmglxmqpxfd_cdqpsf8g2s.png"><br><br>  <b>рд╢реБрджреНрдзрд┐рдкрддреНрд░</b> <br><br>  рд╕реНрдкреЗрд╕рд╡реЙрдХ рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЗрд░реЗрдЯрд╛ рд╕рдорд░реНрдерди рд╣реИ, рдЬреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЪреИрдирд▓реЛрдВ рдХреЛ рдмрд╛рдВрдзрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдирд╡реАрдирддрдо рдЕрдкрдбреЗрдЯ рдХреЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реНрддрд░ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реАрдзреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдкрд░реНрд▓ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">yum -y install perl-Frontier-RPC perl-Text-Unidecode wget https://raw.githubusercontent.com/stevemeier/cefs/master/errata-import.pl chmod +x errata-import.pl</code> </pre> <br>  рдлрд┐рд░ рдореБрдЦреНрдп рдЕрдкрдбреЗрдЯ рдФрд░ рд╕рдВрдЧреНрд░рд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЗрд░реЗрдЯрд╛ рдмрдирд╛рдПрдВ, рдЬрд┐рд╕реЗ <i>/ etc / rhn /:</i> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash cd /etc/rhn/ wget -N http://cefs.steve-meier.de/errata.latest.xml wget -N https://www.redhat.com/security/data/oval/com.redhat.rhsa-all.xml export SPACEWALK_USER='root' export SPACEWALK_PASS='verystrong' ./errata-import.pl --server YourServerIPAddress --errata errata.latest.xml --rhsa-oval com.redhat.rhsa-all.xml --publish unset SPACEWALK_USER unset SPACEWALK_PASS</span></span></code> </pre> <br>  рдирд┐рд░реНрдпрд╛рдд рдореЗрдВ, рд╕реНрдкреЗрд╕рд╡реЙрдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ, рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдерд╛ред <br><br>  рдЖрдЗрдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ Cron рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="bash hljs">chmod +x spcwlk_errata.sh crontab -e 0 2 * * 7 /usr/bin/sh /etc/rhn/spcwlk_errata.sh</code> </pre> <br>  рдЧреНрд░рд╛рдлрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрднреА рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВред  рдирд┐рд╖реНрдкрд╛рджрди рдореЗрдВ рдХреБрдЫ рд╕рдордп рд▓рдЧреЗрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/5v/yy/v9/5vyyv9a4xpmq7c2lqqglozhdrsk.png"><br><br><h4>  рдкрд░рд┐рдгрд╛рдо </h4><br>  рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ, рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдпрд╛рдж рдХрд┐рдпрд╛ рд╣реИ, рдПрдХ рдкреНрд░реЙрдХреНрд╕реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде рдкреВрд░реА рдкреНрд░рдгрд╛рд▓реА рдХреЛ рд╣рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдмрдврд╝рд╛ рд░рд╣рд╛ рд╣реИред  рдореБрдЭреЗ рдкреЗрд╕рдореЗрдХрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдерд╛ред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдЯреЗрд╢рдиреЛрдВ рдХреЗ рдмрд╣реБрдд рдмрдбрд╝реЗ рд╕рд░реНрд╡рд░ рдмреЗрдбрд╝реЗ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рд╕рд┐рд╕реНрдЯрдо рдЕрдЧрд▓реЗ рдЫрд╣ рдорд╣реАрдиреЛрдВ рдореЗрдВ рдмреЗрд╣рдж рдЙрдкрдпреЛрдЧреА рд╕рд╛рдмрд┐рдд рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдореВрд▓ рд╕рд░реНрд╡рд░ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдирд╛ рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИред <br><br><h4>  рд╕реНрд╡рдЪрд╛рд▓рди </h4><br>  <b>рд╕рд░реНрд╡рд░:</b> <br><br><div class="spoiler">  <b class="spoiler_title">рд╕рд░реНрд╡рд░ рдкрд░рд┐рдирд┐рдпреЛрдЬрди (DISABLES рдлрд╝рд╛рдпрд░рд╡реЙрд▓) рдХреЗ рд▓рд┐рдП рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ:</b> <div class="spoiler_text"><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # rpm -Uvh https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8/epel-7-x86_64/00736372-spacewalk-repo/spacewalk-repo-2.8-11.el7.centos.noarch.rpm rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm (cd /etc/yum.repos.d &amp;&amp; curl -O https://copr.fedorainfracloud.org/coprs/g/spacewalkproject/java-packages/repo/epel-7/group_spacewalkproject-java-packages-epel-7.repo) yum -y install spacewalk-setup-postgresql spacewalk-postgresql wget perl-Frontier-RPC perl-Text-Unidecode perl-XML-Simple # mkdir /usr/share/spcwlk-tmp/ echo 'admin-email = root@localhost ssl-set-cnames = spcwlkserver ssl-set-org = Unicorn ssl-set-org-unit = EOH ssl-set-city = Prague ssl-set-state = SCK ssl-set-country = CZ ssl-password = verystrong ssl-set-email = root@localhost ssl-config-sslvhost = Y db-backend=postgresql db-name=spcwlkdb db-user=spcwlkuser db-password=verystrong db-host=localhost db-port=5432 enable-tftp=Y' &gt; /usr/share/spcwlk-tmp/spcwlk_answer spacewalk-setup --answer-file=/usr/share/spcwlk-tmp/spcwlk_answer # systemctl stop firewalld systemctl disable firewalld #</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рдЗрд░реЗрдЯрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ (рдкрд╣рд▓реЗ рд╕реНрдкреЗрд╕рд╡реЙрдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЗ рд▓рд┐рдП рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗрдЯ рдХрд░реЗрдВ):</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # wget https://raw.githubusercontent.com/stevemeier/cefs/master/errata-import.pl -P /etc/rhn/ echo '#!/bin/bash cd /etc/rhn/ wget -N http://cefs.steve-meier.de/errata.latest.xml wget -N https://www.redhat.com/security/data/oval/com.redhat.rhsa-all.xml export SPACEWALK_USER='gui username' export SPACEWALK_PASS='Password to your gui account' ./errata-import.pl --server YourServerIPAddress --errata errata.latest.xml --rhsa-oval com.redhat.rhsa-all.xml --publish unset SPACEWALK_USER unset SPACEWALK_PASS' &gt; /etc/rhn/spcwlk_errata.sh # chmod +x /etc/rhn/errata-import.pl chmod +x /etc/rhn/spcwlk_errata.sh # echo '#!/bin/bash # /etc/rhn/./spcwlk_errata.sh' &gt; /etc/rhn/spcwlk_errata_cron.sh chmod +x /etc/rhn/spcwlk_errata_cron.sh echo '0 2 * * 7 /usr/bin/sh /etc/rhn/spcwlk_errata_cron.sh' &gt;&gt; /var/spool/cron/root /etc/rhn/./spcwlk_errata.sh #</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рд╕рд░реНрд╡рд░ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рдЖрд╕рд╛рди рдкреНрд▓реЗрдмреБрдХ (рдЙрддреНрддрд░-рдлрд╛рдЗрд▓ рдЬреЛрдбрд╝рдирд╛ рди рднреВрд▓реЗрдВ):</b> <div class="spoiler_text"><pre> <code class="bash hljs">- hosts: spcwlk-server tasks: - name: Install Spacewalk repo yum: name: https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8/epel-7-x86_64/00736372-spacewalk-repo/spacewalk-repo-2.8-11.el7.centos.noarch.rpm state: present - name: Install epel repo yum: name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm state: present - name: Install PostgreSQL packages yum: name: - spacewalk-setup-postgresql - spacewalk-postgresql - wget - perl-Frontier-RPC - perl-Text-Unidecode - perl-XML-Simple - name: Creates directory <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Spacewalk answer file file: path: /usr/share/spcwlk-tmp/ state: directory mode: 0755 - name: Deploy answer file copy: src: /etc/ansible/spcwlk_answer dest: /usr/share/spcwlk-tmp/spcwlk_answer - name: Spacewalk Server Deploy shell: spacewalk-setup --answer-file=/usr/share/spcwlk-tmp/spcwlk_answer - name: Stop firewalld systemd: name: firewalld state: stopped enabled: no</code> </pre> <br></div></div><br>  <b>рдЧреНрд░рд╛рд╣рдХ:</b> <br><br><div class="spoiler">  <b class="spoiler_title">рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ (рдЖрдИрдкреА рдФрд░ рдХреБрдВрдЬреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордд рднреВрд▓рдирд╛):</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # rpm -Uvh https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8-client/epel-7-x86_64/00742644-spacewalk-repo/spacewalk-client-repo-2.8-11.el7.centos.noarch.rpm yum -y install rhn-client-tools rhn-check rhn-setup rhnsd m2crypto yum-rhn-plugin rhncfg-actions deltarpm wget echo '#!/bin/bash # /usr/sbin/rhn_check' &gt; rhn_check.sh mv rhn_check.sh /etc/cron.hourly/ chmod +x /etc/cron.hourly/rhn_check.sh echo '* * * * * /usr/bin/sh /etc/cron.hourly/rhn_check.sh' &gt;&gt; /var/spool/cron/root /usr/bin/rhn-actions-control --enable-all cd /usr/share/rhn/ wget http://YourServerIPAddress/pub/RHN-ORG-TRUSTED-SSL-CERT rhnreg_ks --serverUrl=http://172.22.64.41/XMLRPC --activationkey=1-xxxxxxxxxxxxxxxxxxxxxxxxxxxx --force</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рдЧреНрд░рд╛рд╣рдХ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рд╡рд┐рдЪрд┐рддреНрд░ рдкреНрд▓реЗрдмреБрдХ:</b> <div class="spoiler_text"><pre> <code class="bash hljs">- hosts: spcwlk-clients tasks: - name: Install spacewalk repo yum: name: https://copr-be.cloud.fedoraproject.org/results/@spacewalkproject/spacewalk-2.8-client/epel-7-x86_64/00742644-spacewalk-repo/spacewalk-client-repo-2.8-11.el7.centos.noarch.rpm state: present - name: Install client packages yum: name: - rhn-client-tools - rhn-check - rhn-setup - rhnsd - m2crypto - yum-rhn-plugin - rhncfg-actions - deltarpm - wget - name: Create cronjob <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rhn_check cron: name: <span class="hljs-string"><span class="hljs-string">"rhn_check"</span></span> minute: <span class="hljs-string"><span class="hljs-string">"*"</span></span> hour: <span class="hljs-string"><span class="hljs-string">"*"</span></span> day: <span class="hljs-string"><span class="hljs-string">"*"</span></span> month: <span class="hljs-string"><span class="hljs-string">"*"</span></span> weekday: <span class="hljs-string"><span class="hljs-string">"*"</span></span> job: <span class="hljs-string"><span class="hljs-string">"/usr/sbin/rhn_check"</span></span> - name: Enable controls <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> config and remote control deployment shell: /usr/bin/rhn-actions-control --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-all - name: Get certificate from server to client get_url: url: http://YourServerIPAddress/pub/RHN-ORG-TRUSTED-SSL-CERT dest: /usr/share/rhn/ - name: Register client to server rhn_register: state: present server_url: http://YourServerIPAddress/XMLRPC activationkey: <span class="hljs-string"><span class="hljs-string">"{{ activation_key }}"</span></span></code> </pre> <br></div></div><br>  рд▓реЗрдЦ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рднреА рдХрд╛ рдзрдиреНрдпрд╡рд╛рджред  рд╕реМрднрд╛рдЧреНрдп рд╣реИ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi435578/">https://habr.com/ru/post/hi435578/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi435564/index.html">GtkApplication рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред Librsvg рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реБрд╡рд┐рдзрд╛рдПрдБ</a></li>
<li><a href="../hi435568/index.html">рд╡реАрдЖрдИрдУрдПрд╕ рдУрдкрдирд╕реЛрд░реНрд╕ рд░рд╛рдЙрдЯрд░</a></li>
<li><a href="../hi435572/index.html">рдПрдирд╛рдЗрдХреНрдпреВрдмрд┐рдХ рдЖрдИ 3 рдореЗрдЧрд╛: рдкреНрд░реБрд╕рд╛ рдЖрдИ 3 рдХрд╛ рдЙрдЪреНрдЪ рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓рд╛ рд░реАрдореЗрдХ рд╣реИ</a></li>
<li><a href="../hi435574/index.html">рдЬрд┐рдЧ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ?</a></li>
<li><a href="../hi435576/index.html">1 рд╕реА, рдХреЛрдИ рджрд░реНрдж рдирд╣реАрдВ</a></li>
<li><a href="../hi435580/index.html">рдЬрд╛рд╡рд╛, рд╕реНрдкреНрд░рд┐рдВрдЧ, рдХреБрд░реЗрдВрдЯреЛ рдФрд░ рдореАрдбрд┐рдпрд╛ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ</a></li>
<li><a href="../hi435582/index.html">рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХреЗ рдмрд┐рдирд╛ рд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рд┐рд╕реНрдЯрдо 24/7 рдкрд░ рдПрдХ рдЗрдВрдбреЗрдХреНрд╕ рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ?</a></li>
<li><a href="../hi435584/index.html">рд╕реНрд▓рд╢ 2018ред рдбреЗ рд╡рди, рдбреЗ рдЯреВ</a></li>
<li><a href="../hi435586/index.html">рдУрд▓рд┐рдирдХреНрд╕рд┐рдиреЛ рдХреЗ рд▓рд┐рдП рдЫрд╛рдпрд╛рд╡рд╛рдж рдпрд╛ рдХрд╕реНрдЯрдо рдлрд░реНрдорд╡реЗрдпрд░ рдХреА рдХрд▓рд╛ред рдХрд░реНрдиреЗрд▓ рдФрд░ рдЙрдмрдВрдЯреВ рднрд╛рдЧ 3</a></li>
<li><a href="../hi435588/index.html">рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрднрд╡ рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдкреНрд░рдЪрд╛рд░</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>