<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôªÔ∏è ‚ö∞Ô∏è üöì Noch ein Kampf oder genug? ‚ôÇÔ∏è üßÄ ü§öüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In fast jedem Kartenspiel nach dem Spiel m√ºssen Sie die Karten mischen. W√§hrend ich die Karten mische, stellt sich mir immer die Frage: "Schon genug?"...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Noch ein Kampf oder genug?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479154/"><p>  In fast jedem Kartenspiel nach dem Spiel m√ºssen Sie die Karten mischen.  W√§hrend ich die Karten mische, stellt sich mir immer die Frage: "Schon genug?"  Dies ist eine ernste Frage - ich m√∂chte nicht zu viel Zeit damit verbringen, und das Spielen auf einem aufgeladenen Deck macht auch keinen Spa√ü. </p><br><p>  Der Artikel befasst sich mit der Situation. </p><br><p><img src="https://habrastorage.org/webt/1f/jr/j0/1fjrj0fik5hz0_sutvs8l8ivslk.png"></p><a name="habracut"></a><br><h1 id="sposob-tasovki">  Shuffle Way </h1><br><p>  Es gibt coole M√∂glichkeiten, Karten zu mischen, zum Beispiel Riffle Shuffle. </p><br><p><img src="https://habrastorage.org/webt/06/i0/fg/06i0fgihatsikx540npg4jgdjeu.gif"></p><br><p>  Ich wei√ü nicht wie und Pappkarten k√∂nnen nicht so gemischt werden, also mische ich auf einfache Weise, es sieht ungef√§hr so ‚Äã‚Äãaus: </p><br><p><img src="https://habrastorage.org/webt/x-/sh/wb/x-shwbmeltwucazqwbviaadr3le.gif"></p><br><p>  Zuerst trenne ich den Teil vom Deck, dann wirf ich den Anteil dieses Teils auf die andere Seite und melde dann den verbleibenden Anteil.  Nach meinen Beobachtungen werden Karten genau so oder in der N√§he gemischt.  Im Allgemeinen kann es in eine gr√∂√üere Anzahl von Teilen unterteilt werden, aber dies sind bereits Details.  Im Artikel werden wir diese Mischmethode analysieren. </p><br><h1 id="chto-takoe-sluchaynaya-raskladka-kart">  Was ist ein zuf√§lliges Kartenlayout? </h1><br><p>  Das erste, was mir einfiel, war, dass es sich um ein gutes Layout handelt. Es ist wahrscheinlich, dass sich jede Karte an der i-ten Stelle befindet. </p><br><p>  Das reicht aber nicht.  Wenn Sie zum Beispiel das Deck zerschneiden, es zuf√§llig in zwei Teile teilen und vertauschen, kann die erste Karte eine beliebige Chance sein.  Aber gleichzeitig ist dies offensichtlich ein schlechtes Layout: Nach jeder Karte, mit Ausnahme einiger weniger, wird dieselbe Karte ausgegeben, die vor dem "Schneiden" dahinter liegt.  Das hei√üt, die Spieler erhalten "korrelierte" Karten.  Im Falle eines Narren wird einer geschlagen, und der andere wird geschlagen, und dies ist kein Zufall. </p><br><p>  Ein weiterer Ansatz zur Bestimmung eines guten Layouts besteht darin, dass sich an i + 1 eine Karte befindet, die von der Karte an i-1 unabh√§ngig ist.  Sie k√∂nnen es sich so vorstellen: Wenn Sie sich die oberste Karte des Decks ansehen, k√∂nnen Sie nicht erraten, welche Karte als n√§chstes kommt. </p><br><p>  Dieser Ansatz kann auch Probleme haben, die durch die Ber√ºcksichtigung gro√üer gemeinsamer Verteilungen gel√∂st werden, aber f√ºr die aktuelle Analyse ist er f√ºr uns vollkommen geeignet. </p><br><h1 id="kak-izmeryat-horoshest-raskladki">  Wie man die "G√ºte" des Layouts misst </h1><br><p>  Wir haben das vom vorherigen Spiel √ºbrig gebliebene Deck genommen.  Wir nummerieren alle Karten der Reihe nach.  Die schlechte Situation ist, wenn es nach dem Mischen an einer Stelle nach der Karte mit der Nummer i eine Karte mit der Nummer i + 1 gibt.  Daher werden wir den Anteil der Karten messen, die nach dem Mischen in Ordnung sind. </p><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> c_next = <span class="hljs-number"><span class="hljs-number">0</span></span> c_total = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>): c_total += <span class="hljs-number"><span class="hljs-number">1</span></span> c_next += a[i] == (a[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c_next * <span class="hljs-number"><span class="hljs-number">1.0</span></span> / c_total</code> </pre> <br><p>  Es ist klar, dass selbst in einem gut gemischten Deck einige Karten in zuf√§lliger Reihenfolge abfallen.  Ihr Anteil betr√§gt im Durchschnitt 1 / (n-1), wobei n die Anzahl der Karten im Stapel ist. </p><br><div class="spoiler">  <b class="spoiler_title">Beweis</b> <div class="spoiler_text"><p>  E (Summe ($ a <em>i = a</em> {i + 1} $ f√ºr i = 0 .. (n-1)) / (n-1)) = Summe (E ($ a <em>i = a</em> {i + 1} $ ) f√ºr i = 0 .. (n-1)) / (n-1) - aufgrund der Linearit√§t der Matte.  Erwartungen. <br>  Und da E ($ a <em>i = a</em> {i + 1} $) = 1 / (n-1) ist, ist dieser Ausdruck = (n-1) * 1 / (n-1) / (n-1) = 1 / (n-1) </p></div></div><br><h1 id="rezultaty">  Ergebnisse </h1><br><p>  Wir berechnen die Wahrscheinlichkeit aufeinanderfolgender Karten f√ºr ein Kartenspiel mit 52 Karten in Abh√§ngigkeit von der Anzahl der Mischungsiterationen. </p><br><p><img src="https://habrastorage.org/webt/ze/sx/xo/zesxxoslh-gdjq1p4yq3qkcpdwa.png"></p><br><p>  Die Grafik zeigt, dass die Wahrscheinlichkeit aufeinanderfolgender Karten selbst nach Hunderten von Iterationen etwa doppelt so hoch ist wie die ideale Wahrscheinlichkeit. </p><br><div class="spoiler">  <b class="spoiler_title">Code zum Plotten</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">two_split_shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> s1 = random.randint(<span class="hljs-number"><span class="hljs-number">1</span></span>,len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>) s2 = random.randint(<span class="hljs-number"><span class="hljs-number">1</span></span>,len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>) s_min = min(s1, s2) s_max = max(s1, s2) p1 = a[:s_min] p2 = a[s_min:s_max] p3 = a[s_max:] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p3 + p2 + p1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle_n</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, f, n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): a = f(a) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> c_next = <span class="hljs-number"><span class="hljs-number">0</span></span> c_total = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(a)<span class="hljs-number"><span class="hljs-number">-1</span></span>): c_total += <span class="hljs-number"><span class="hljs-number">1</span></span> c_next += a[i] == (a[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c_next * <span class="hljs-number"><span class="hljs-number">1.0</span></span> / c_total <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f, n = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> s = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): s += f() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s / n <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_expected_next_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(shuf, n, cards)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>: next_stat(shuffle_n(range(cards), shuf, n))) cards = <span class="hljs-number"><span class="hljs-number">52</span></span> x = range(<span class="hljs-number"><span class="hljs-number">100</span></span>) y = map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> i: get_expected_next_stat(two_split_shuffle, i, cards), x) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt %matplotlib inline plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>)) plt.plot(x, y, label = <span class="hljs-string"><span class="hljs-string">u'       3'</span></span>) plt.plot(x, [<span class="hljs-number"><span class="hljs-number">1.</span></span>/(cards<span class="hljs-number"><span class="hljs-number">-1</span></span>)] * len(x), label = <span class="hljs-string"><span class="hljs-string">u' '</span></span>) plt.grid() plt.legend()</code> </pre> </div></div><br><p>  Im Allgemeinen k√∂nnen wir davon ausgehen, dass 60 Iterationen die optimale Menge sind, weniger ist definitiv schlecht.  Ich mache ungef√§hr 16-17 Iterationen in 30 Sekunden.  Dies bedeutet, dass ein normaler Shuffle <strong>fast zwei Minuten dauert</strong> . </p><br><p>  Meine Freunde und ich mischen nie so viel Karten.  Und das bedeutet, dass unser Spiel sehr stark von der Balance des letzten Spiels beeinflusst wird. </p><br><p>  Sei vorsichtig :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479154/">https://habr.com/ru/post/de479154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479142/index.html">Wie kann man ein Element aus einem Bin√§rbaum √ºber einen Index in angemessener Zeit erhalten?</a></li>
<li><a href="../de479144/index.html">Muss ich meine Marke registrieren lassen?</a></li>
<li><a href="../de479146/index.html">Vergleich der Bypass-Tools \ VPN</a></li>
<li><a href="../de479150/index.html">Agrarroboter schreiten voran</a></li>
<li><a href="../de479152/index.html">Reagiere und schaue ohne npm und baue</a></li>
<li><a href="../de479156/index.html">ESP32 + Arduino Core + FreeRTOS + Blynk = Haus mit den Anf√§ngen des Geistes</a></li>
<li><a href="../de479158/index.html">7 Grundprinzipien von ITIL</a></li>
<li><a href="../de479162/index.html">Auroren auf den Planeten des Sonnensystems</a></li>
<li><a href="../de479164/index.html">Was ist EEG und warum wird es ben√∂tigt?</a></li>
<li><a href="../de479166/index.html">Schreiben Sie Ihr Capped Expirationd-Modul f√ºr Tarantool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>