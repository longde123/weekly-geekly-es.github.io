<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìà üë©‚Äçüöí ü§∞üèæ Mini AI Cup # 3: √âcrire un top bot üèà üë©‚Äçüë¶ üîµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au d√©but de l'automne, le concours pour √©crire des bots Mini AI Cup # 3 (alias Mad Cars) s'est termin√©, dans lequel les participants devaient se battr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mini AI Cup # 3: √âcrire un top bot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/430466/"><p><img src="https://habrastorage.org/webt/uk/nd/_2/uknd_2qxbi4b0qt85hqcoxgvt7i.png"></p><br><p>  Au d√©but de l'automne, le concours pour √©crire des bots <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mini AI Cup # 3</a> (alias Mad Cars) s'est termin√©, dans lequel les participants devaient se battre sur des voitures.  Les participants ont beaucoup discut√© de ce qui fonctionnera et de ce qui ne fonctionnera pas, des id√©es ont √©t√© exprim√©es et test√©es √† partir de simples ifs pour former des r√©seaux de neurones, mais les premi√®res places ont √©t√© prises par les gars avec la soi-disant ¬´simulation¬ª.  Essayons de comprendre de quoi il s'agit, comparons les solutions pour les 1√®re, 3√®me et 4√®me places et discutons sur le sujet d'autres solutions possibles. </p><a name="habracut"></a><br><h1 id="diskleymer">  Clause de non-responsabilit√© </h1><br><p>  L'article a √©t√© √©crit en collaboration avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Alexei Dichkovsky (Commandos)</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vladimir Kiselev (Valdemar)</a> . </p><br><p>  Pour ceux qui veulent simplement lire les d√©cisions des gagnants, je vous conseille de commencer tout de suite avec le point ¬´Simulation¬ª. </p><br><h1 id="postanovka-zadachi">  √ânonc√© du probl√®me </h1><br><p> Cette fois, la m√©canique du monde ressemblait beaucoup au jeu mobile Drive Ahead: les joueurs ont re√ßu une voiture avec un bouton situ√© dessus;  la t√¢che consiste √† appuyer sur le bouton de l'ennemi plus rapidement que lui.  Si personne ne gagne en 600 ticks de jeu, la carte commence √† couler dans un tas d'ordures, qui peut √©galement appuyer sur un bouton.  En d'autres termes, vous devez prot√©ger votre bouton contre les ennemis, le monde qui vous entoure et les tas d'ordures (vitalement, oui).  Chaque joueur a eu 5 vies, le jeu est pass√© de 5 √† 9 tours, tandis que quelqu'un n'a pas mis fin √† sa vie.  Chaque manche s'est d√©roul√©e sur une carte al√©atoire et des voitures, les m√™mes pour les deux participants.  Au total, il y avait 6 cartes diff√©rentes et 3 types de voitures - un total de 18 combinaisons diff√©rentes. </p><br><p> Chaque tour est divis√© en tiques.  Une tique est un mouvement, comme aux √©checs.  La seule diff√©rence est que les deux joueurs vont en m√™me temps.  Il y a des comp√©titions o√π tout le monde se relaie, ou vous ne pouvez faire une action qu'une fois tous les quelques mouvements et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©lectionner des unit√©s comme cadre</a> . <br>  Chaque tick au bot vient un √©tat de paix et a la possibilit√© d'effectuer 3 actions: <code></code> , <code></code> , <code></code> .  Ces actions font aller la voiture dans une des directions, et si en m√™me temps elle ne touche pas les roues de la terre, alors elles donnent une petite rotation √† tout le corps (un peu de physique d'arcade).  Apr√®s que les deux adversaires ont choisi une action, une simulation du monde du jeu est lanc√©e, un nouvel √©tat est consid√©r√© et envoy√© aux joueurs.  Si quelqu'un a cliqu√© sur un bouton, le tour se termine et le suivant commence.  Tout est simple, mais il y a des nuances. </p><br><p>  Des r√®gles plus compl√®tes peuvent √™tre trouv√©es <a href="">ici</a> .  Et voyez les matchs de la finale <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><h1 id="obschee-opisanie-resheniya">  Description g√©n√©rale de la solution </h1><br><p>  La plupart des comp√©titions d'√©criture de bots sont tr√®s similaires: il y a un nombre fini de ticks (il y a environ 1500 maximum pour un tour), il y a un nombre fini d'actions possibles, vous devez choisir une s√©quence d'actions pour √™tre meilleur que vos adversaires.  Un peu plus tard, nous reviendrons sur ce que signifie √™tre meilleur, mais pour l'instant, nous trouverons comment r√©soudre le probl√®me principal - un grand nombre d'options: au d√©but, nous avons un √©tat initial, puis chaque machine peut se d√©placer de trois mani√®res diff√©rentes, ce qui nous donne 9 combinaisons diff√©rentes pour deux voitures, d'ici le 1500√®me ce sera 9 ^ 1500 combinaisons diff√©rentes ... Ce qui est un peu plus que ce que nous aimerions si nous pr√©voyons de les trier pendant l'existence de l'Univers. </p><br><p>  Nous arrivons ici √† ce qu'est la <strong>simulation</strong> .  Ce n'est pas une sorte d'algorithme, mais simplement une recr√©ation des r√®gles du jeu avec une pr√©cision suffisante ou compl√®te pour qu'il soit possible de trier les solutions.  Bien s√ªr, nous ne passerons pas en revue toutes les solutions, mais seulement une partie d'entre elles.  Un algorithme de recherche sera utilis√© √† cet effet - dans l'arbre d'√©tat du jeu, nous recherchons le meilleur pour nous.  Il y a beaucoup d'algorithmes (de minimax aux SCTM), chacun a ses propres nuances.  Il est pr√©f√©rable de vous familiariser avec les d√©cisions √©crites par les participants aux pr√©c√©dents concours d'IA.  Cela fournira une compr√©hension de base de dans quelles conditions les algorithmes fonctionnent et dans quels cas pas.  Il existe de nombreux liens pour cela dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel sp√©cial</a> . </p><br><p>  Lors du choix d'un algorithme, vous devez consid√©rer: </p><br><ul><li>  limite de temps pour 1 tick (ici j'ai beaucoup mal calcul√© cette ann√©e, mais j'ai pu rester √† la 3√®me place); </li><li>  nombre de joueurs.  Par exemple, s'il y a trois joueurs, il sera difficile d'utiliser minimax; </li><li>  pr√©cision de la simulation,  cela peut permettre la r√©utilisation d'anciens calculs; </li><li>  ¬´Ramification¬ª de l'arbre d'√©tat (est-il possible de calculer tous les √©tats possibles au moins 10 mouvements en avant); </li><li>  bon sens - ne commencez pas √† √©crire des SCTM si la comp√©tition dure 4 heures. </li></ul><br><p>  Dans cette comp√©tition, 1 tick a donn√© environ 10-13 ms (2 minutes pour tout le match).  Pendant ce temps, le bot a d√ª lire les donn√©es, prendre une d√©cision et envoyer une commande pour se d√©placer.  C'√©tait suffisant pour stimuler environ 500 √† 1000 mouvements.  It√©rer sur tous les √©tats.  L'algorithme de recherche le plus simple peut ressembler √† une comparaison de trois options de mouvement: "50 ticks vont √† gauche", "50 ticks vont √† droite", "50 ticks click stop".  Et aussi simple que cela puisse para√Ætre, ce n'est pas tr√®s loin de la d√©cision du vainqueur. </p><br><p>  Parce que  nous ne comptons que 50 coups d'avance, ce qui dans la plupart des cas ne compte pas avant la fin du jeu, alors nous avons besoin d' <strong>une fonction d'√©valuation</strong> qui dira √† quel point l'√©tat du monde est bon et mauvais pour nous.  Le plus souvent, il repose sur l'heuristique et la compr√©hension de ce qui est important pour la victoire.  Par exemple, dans la comp√©tition de la Coupe AI russe de 2014, il y avait des courses, mais vous pourriez gagner si vous √™tes arriv√© le dernier, si vous obtenez plus de points bonus.  Par cons√©quent, la fonction d'√©valuation devrait stimuler la collecte de points en m√™me temps qu'un mouvement rapide le long de l'autoroute.  Le score ne peut √™tre calcul√© que pour le dernier √©tat de la simulation (apr√®s 50 ticks) ou comme la somme des estimations des √©tats interm√©diaires.  Souvent, l'estimation ¬´s'estompe¬ª dans le temps afin que les √©tats qui se produisent plus t√¥t soient plus influenc√©s.  Parce que  nous ne pouvons pas √† coup s√ªr pr√©dire l'ennemi, alors les options futures sont moins susceptibles de se produire, nous ne compterons pas beaucoup sur eux.  De plus, cette technique rend le bot plus rapide pour terminer ses t√¢ches, et ne remet pas tout √† plus tard.  Mais il convient de noter que le bot prendra moins de risques pour le bien des avantages ult√©rieurs. </p><br><p>  Puisque nous allons pr√©dire l'√©tat du monde en r√©ponse √† nos actions, nous devons en quelque sorte mod√©liser le comportement des ennemis.  Il n'y a rien de compliqu√© et il y a quelques options courantes: </p><br><ul><li>  <strong>Stub ou heuristique</strong> <br>  Une logique de comportement simple est √©crite o√π l'ennemi ne fait rien, ou choisit des actions bas√©es sur de simples heuristiques (par exemple, vous pouvez utiliser vos premi√®res versions de la strat√©gie ou simplement r√©p√©ter le mouvement pr√©c√©dent de l'adversaire). </li><li>  <strong>Utilisez le m√™me algorithme que pour vous</strong> <br>  Nous essayons d'abord de trouver les meilleures actions pour l'ennemi (contre notre meilleure s√©rie d'actions du dernier coup, ou contre un talon), puis nous recherchons la meilleure action pour nous-m√™mes, en utilisant le comportement que l'ennemi a trouv√©.  Ici, le bot tentera de r√©sister √† des ennemis difficiles.  Cette logique ne fonctionne pas bien au d√©but de la comp√©tition, car  de nombreux bots sont encore tr√®s faibles et votre d√©cision sera trop prudente avec eux. </li><li>  <strong>Autre</strong> <br>  Le m√™me minimax it√®re sur tous les mouvements des joueurs en m√™me temps, et il n'aura tout simplement pas besoin d'heuristique. </li></ul><br><p>  Si vous impl√©mentez toutes les √©tapes ci-dessus, vous obtiendrez tr√®s probablement un tr√®s bon bot, surtout si vous pouvez choisir une bonne fonction de notation.  Mais, en regardant √† travers ses combats, vous pouvez voir que dans certaines situations, il se comporte √©trangement.  Corriger la fonction d'√©valuation de ces situations peut √™tre difficile, ou il y a un grand risque de briser une autre logique.  Ici, des b√©quilles et des ifs viennent √† la rescousse.  Oui, les derniers jours de la comp√©tition se r√©sument souvent √† √©crire des b√©quilles et des ifs afin de corriger les d√©fauts dans des conditions sp√©cifiques.  Personnellement, je n'aime vraiment pas cette partie, mais j'ai remarqu√© plus d'une fois que ce sont les b√©quilles en finale qui peuvent affecter la disposition des places dans le top dix, ce qui signifie qu'un si non √©crit peut vous co√ªter un prix (mon c≈ìur me fait mal quand j'√©cris ces mots, je J'aime aussi les beaux algorithmes et solutions). </p><br><p>  <strong>Q: Est-il possible de se passer du tout de simulation?</strong> <br>  <em>R: Oui, vous pouvez utiliser des solutions sur l'heuristique (arbres de d√©cision, un tas d'if, etc.).</em>  <em>Il y a un bon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> avec les architectures IA sur l'heuristique.</em> </p><br><p>  <strong>Q: Dans quelle mesure l'utilisation de la simulation est-elle meilleure que les approches heuristiques?</strong> <br>  <em>R: Tout d√©pend de la t√¢che.</em>  <em>Par exemple, ici, certaines combinaisons de cartes et de voitures peuvent √™tre cod√©es en dur avec des ifs et toujours gagner (ou tirer).</em>  <em>Cependant, la simulation trouve souvent des solutions difficiles √† penser par vous-m√™me ou √† mettre en ≈ìuvre une heuristique difficile.</em>  <em>Dans ce concours, lorsque vous retournez une autre voiture, les solutions sur les simulations mettent leur roue sur la roue de l'ennemi, ce qui √©teint le drapeau "en l'air", ce qui signifie que l'ennemi ne peut pas appliquer la rotation du corps et revenir sur les roues.</em>  <em>Mais la d√©cision n'a pas r√©fl√©chi √† la signification de cela, elle a juste trouv√© des options o√π l'ennemi tomberait plus vite sur le toit et presserait son bouton.</em> </p><br><p><img src="https://habrastorage.org/webt/in/i4/wk/ini4wk8qqxl7dfzdzlcegwpmyyq.gif"></p><br><p>  <strong>Q: R√©seaux de neurones et RL?</strong> <br>  <em>R: Peu importe leur popularit√©, dans les comp√©titions de robots, ces solutions fonctionnent rarement bien.</em>  <em>Bien que les r√©seaux de neurones n'aient pas besoin de simulation, car</em>  <em>ils peuvent simplement √©mettre une action bas√©e sur les param√®tres d'entr√©e de l'√©tat actuel, ils ont encore besoin d'apprendre quelque chose, et pour cela, ils doivent souvent √©crire un simulateur pour piloter des milliers de jeux localement.</em>  <em>Personnellement, je crois qu'ils ont du potentiel.</em>  <em>Ils peuvent peut-√™tre r√©soudre une partie du probl√®me ou l'utiliser dans des conditions de temps de r√©ponse tr√®s limit√©.</em> </p><br><p>  <strong>Remarque</strong> <br>  <em>En ce qui concerne le nombre fini d'actions possibles, il convient de pr√©ciser que parfois il est permis d'ajuster "en douceur" certains param√®tres.</em>  <em>Par exemple, non seulement avancer, mais avec un certain pourcentage de puissance.</em>  <em>Dans ce cas, la ¬´finitude¬ª du nombre de conclusions peut √™tre facilement obtenue simplement en utilisant plusieurs valeurs, par exemple 0%, 25%, 50%, 75% et 100%.</em>  <em>Le plus souvent, deux seulement suffisent: "compl√®tement allum√©" et "compl√®tement √©teint".</em> </p><br><h1 id="simulyaciya">  La simulation </h1><br><p>  Dans ce concours, nous avons utilis√© le moteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">physique de tamia</a> pr√©par√©.  Les organisateurs s'attendaient √† ce qu'il soit vieux, √©prouv√© et qu'il ait de nombreux emballages pour que tout le monde puisse l'inclure dans sa d√©cision ... </p><br><p>  Dans la dure r√©alit√©, le moteur produisait des valeurs diff√©rentes √† chaque fois, ce qui rendait difficile le red√©marrage pour calculer les options de d√©placement.  Le probl√®me a √©t√© r√©solu ¬´de front¬ª - un allocateur de m√©moire a √©t√© √©crit en C et un morceau de m√©moire avec l'√©tat du monde a √©t√© compl√®tement copi√©.  Un tel allocateur a mis fin √† la possibilit√© d'√©crire des solutions dans des langages autres que C ++ (en fait, c'√©tait possible, mais tr√®s laborieux et un allocateur devrait encore √™tre √©crit en C).  De plus, la pr√©cision de la pr√©diction a √©t√© influenc√©e par l'ordre d'ajout d'√©l√©ments au monde du jeu, qui n√©cessitait une copie tr√®s pr√©cise du code que les organisateurs utilisaient pour calculer les jeux.  Mais il √©tait d√©j√† en Python.  Le dernier point fort du cercueil des autres langages de programmation √©tait que le moteur est ancien et contient de nombreuses optimisations qui ne peuvent pas √™tre recr√©√©es avec pr√©cision pendant la comp√©tition pour obtenir votre propre version d√©coup√©e de la simulation physique. </p><br><p>  En cons√©quence, le moteur, qui √©tait cens√© offrir √† tous les participants des conditions √©gales pour simuler les mouvements, est devenu l'obstacle le plus difficile √† cela.  Plus de 10 personnes ont pu le surmonter et les 7 premi√®res places du classement ont √©t√© prises exclusivement par les gars qui ont fait une simulation pr√©cise, ce qui peut servir de preuve de son importance dans de telles comp√©titions. </p><br><p>  √Ä l'exception de quelques participants qui ont pu p√©n√©trer √† l'int√©rieur du tamia et optimiser la copie de son √©tat, les autres ont eu une simulation d'environ les m√™mes performances (ce qui a rendu la comp√©tition un peu plus int√©ressante, car vous savez que la lutte concerne l'algorithme de d√©cision, non "qui compte le plus de coups"). </p><br><h1 id="algoritm-poiska-i-predskazanie-protivnika">  Algorithme pour rechercher et pr√©dire un adversaire </h1><br><p>  √Ä partir de ce point, une description s√©par√©e des solutions commence.  Les algorithmes seront d√©crits au nom de son auteur. </p><br><h3 id="vladimir-kiselev-valdemar-4-mesto">  Vladimir Kiselev (Valdemar) 4e place </h3><br><p>  Une recherche al√©atoire (Monte Carlo) a √©t√© utilis√©e pour rechercher l'espace de la solution.  L'algorithme est le suivant: </p><br><ol><li>  Nous initialisons le g√©nome - une s√©quence d'actions (gauche, droite, arr√™t) pour 60 tiques - des donn√©es al√©atoires. </li><li>  Prenez le meilleur g√©nome trouv√© </li><li>  Modifier al√©atoirement l'une des actions </li><li>  En utilisant la fonction d'√©valuation, nous obtenons un nombre - un indicateur de la qualit√© du nouveau g√©nome </li><li>  Si vous obtenez une meilleure solution, mettez √† jour la meilleure solution. </li><li>  R√©p√©tez √† nouveau √† partir de l'√©tape 2 </li></ol><br><p>  Mon simulateur a produit ~ 100k simulations du monde en 1 seconde, consid√©rant qu'il y a en moyenne ~ 12ms par tick, nous obtenons 1200 actions par tick.  Autrement dit, en 1 tick, nous parvenons √† parcourir le cycle complet environ 20 fois. </p><br><p>  Pour trouver la solution optimale, ce nombre d'it√©rations n'√©tait clairement pas suffisant.  Par cons√©quent, l'id√©e d'actions ¬´d'√©tirement¬ª a √©t√© mise en ≈ìuvre: au lieu d'un g√©nome de 60 mouvements, nous fonctionnerons avec une cha√Æne de 12 mouvements ¬´√©tir√©s¬ª - nous pensons que chaque action dure 5 ticks d'affil√©e. <br>  Le plus: Am√©lioration de la qualit√© des mutations en r√©duisant la longueur du g√©nome, la simulation peut √©galement √™tre ex√©cut√©e toutes les 5 ticks et v√©rifier 100 g√©nomes au lieu de 20 (pour √©viter les chutes de temps, je me suis finalement arr√™t√© √† 70). <br>  Moins: les actions d'√©tirement peuvent conduire √† des solutions non optimales (par exemple, se balancer sur le pare-chocs, au lieu d'un rack stable) </p><br><p>  Il convient de noter les techniques qui ont consid√©rablement am√©lior√© la qualit√© de l'algorithme: </p><br><ul><li>  Nous n'effectuons une initialisation al√©atoire que sur le premier tick, le reste du temps nous r√©utilisons la meilleure solution trouv√©e avec un d√©calage de 1 mouvement (l'action sur le 2√®me tick est d√©cal√©e sur le 1er, etc., une action al√©atoire est ajout√©e √† la fin).  Cela am√©liore consid√©rablement la qualit√© de la recherche, car sinon l'algorithme "oublie" ce qu'il allait faire au dernier tick et fait des saccades insens√©es dans des directions diff√©rentes. </li><li>  Au d√©but du cours, on fait des changements plus intensifs (on change le g√©nome 2 ou 3 fois au lieu d'un) dans l'espoir de casser le maximum local (similitude de temp√©rature dans la m√©thode de simulation du recuit). <br>  L'intensit√© a √©t√© s√©lectionn√©e manuellement: les 30 premi√®res it√©rations font 3 mutations, les 10 suivantes par 2, puis par 1. </li><li>  La pr√©vision des actions ennemies est tr√®s importante.  Au d√©triment du temps pour rechercher notre propre solution, nous lan√ßons une recherche al√©atoire du c√¥t√© de l'adversaire, √† 20 it√©rations, puis 50 pour nous-m√™mes, en utilisant des informations sur les mouvements optimaux de l'adversaire. <br>  La meilleure d√©cision de l'adversaire est √©galement r√©utilis√©e au coup suivant avec un d√©calage.  Dans le m√™me temps, lors de la recherche d'une solution √† l'ennemi, le g√©nome du dernier mouvement est utilis√© comme mes actions pr√©vues. </li></ul><br><p>  Pendant le concours, il a activement utilis√© des outils de d√©veloppement local, ce qui a permis de trouver rapidement des bugs et de se concentrer sur les points faibles de la strat√©gie: </p><br><ul><li>  ar√®ne locale - lancement de nombreux matchs contre la version pr√©c√©dente; </li><li>  visualiseur pour le comportement de d√©bogage; </li><li>  un script pour collecter des statistiques sur les matchs du site - vous permet de comprendre sur quelles cartes et machines la d√©faite se produit le plus souvent. </li></ul><br><blockquote>  <strong>mortido:</strong> <br>  Compter tous les 5 ticks semble risqu√©, surtout si l'ennemi s'√©loigne des options que vous aviez pr√©vues.  En revanche, dans ce monde de jeu √† 5 ticks, il ne s'est pas pass√© grand-chose. <br>  De plus, dans ma d√©cision, j'ai n√©anmoins ajout√© des combinaisons al√©atoires √† chaque tick, mais je ne dirai certainement pas comment cela a affect√© la d√©cision. <br><br>  <strong>Commandos:</strong> <br>  Changer quelques actions avec un tel nombre de simulations ne semble pas tr√®s significatif, car tr√®s peu de changements se produisent en une seule action.  Mais lorsque vous √©tirez une action √† 5 ticks de sens, cela semble devenir plus. <br>  Je n'aime pas non plus l'id√©e elle-m√™me - nous prenons le meilleur ensemble et essayons de le modifier quelque part au d√©but.  Il semble illogique que le changement des premi√®res tiques laisse les suivantes plus ou moins ad√©quates. </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto">  Alexander Kiselev (mortido) 3e place </h3><br><p>  Arm√© d'articles de laur√©ats d'autres concours, j'ai d√©cid√© d'utiliser l'algorithme g√©n√©tique.  Il s'est av√©r√©, cependant, quelque chose de similaire √† une recherche al√©atoire ou m√™me une imitation de recuit, mais plus √† ce sujet plus tard. </p><br><p>  Nous encodons la solution avec un tableau de 40 nombres, o√π -1, 0 et 1 correspondent aux mouvements <code></code> , <code></code> et <code></code> . </p><br><p>  Au d√©but de chaque tour, j'ai calcul√© combien de temps j'avais d√©j√† pass√© pour tout le jeu, compt√© une nouvelle limite de temps bas√©e sur le nombre de tours restants, et chaque tour que je supposais √©tait de 1200 ticks.  T.O.  Initialement, j'ai essay√© de ne pas passer plus de 11 ms par tour, mais je pouvais "marcher" un peu √† la fin si les tours pr√©c√©dents √©taient plus rapides que 1200 ticks. </p><br><blockquote>  <strong>Valdemar:</strong> <br>  Fait int√©ressant, cette puce a aggrav√© le jeu pour moi.  Il s'est av√©r√© qu'il est toujours pr√©f√©rable de passer 20 √† 30 ms que 11 en premier et 60 √† la fin </blockquote><p>  Un tiers de cette fois, je cherchais le meilleur coup de l'ennemi, le reste a √©t√© dans le calcul de ma propre d√©cision.  Lors de la recherche d'un mouvement pour l'ennemi, mon comportement a √©t√© mod√©lis√© comme le meilleur du dernier mouvement, d√©cal√© de 1 tick.  C'est-√†-dire  comme si je continuais √† agir selon le plan √©tabli dans la derni√®re tique, et il essaie de me r√©sister. </p><br><p>  La recherche de la solution elle-m√™me √©tait la m√™me pour lui-m√™me que pour l'adversaire: </p><br><ol><li>  Nous prenons la d√©cision du dernier coup et la d√©calons d'un coup (ce que nous avons d√©j√† fait) </li><li>  Nous prouvons √† la population de solutions al√©atoires jusqu'√† ce que nous remplissions tout </li><li>  Nous simulons toutes les d√©cisions et d√©finissons la forme physique √† l'aide de la fonction d'√©valuation.  Nous nous souvenons du meilleur. </li><li>  Bien qu'il y ait du temps pour les calculs <br><ol><li>  Astuce, ajoutez toujours 1 mutation de la meilleure solution actuelle √† la population, rappelez-vous si c'est mieux </li><li>  Tant qu'il y a une place dans la nouvelle population et que le temps de calcul n'a pas √©t√© d√©pass√© (vous pouvez aller sur le parquet d'une population peupl√©e) <br><ol><li>  Nous prenons deux personnes diff√©rentes et repartons avec la meilleure forme physique - maman </li><li>  Nous prenons deux personnes diff√©rentes et partons avec la meilleure forme physique - papa (ne devrait pas co√Øncider avec maman) </li><li>  Croisez-les </li><li>  Muter si <code>RND &lt;  </code> </li><li>  Nous simulons une solution et nous nous en souvenons, si elle est la meilleure </li></ol></li></ol></li></ol><br><p>  En cons√©quence, nous retournerons la s√©quence d'actions consid√©r√©e comme optimale.  Le premier mouvement est envoy√© comme une action de bot.  Malheureusement, il y avait un s√©rieux inconv√©nient dans mon plan, car  le nombre de simulations pouvant √™tre effectu√©es dans une tique √©tait tr√®s faible (y compris en raison de la longue fonction d'√©valuation), puis sur le serveur de comp√©tition 4 points ont √©t√© effectu√©s une seule fois, et pour l'ennemi, cela n'a pas √©t√© effectu√© du tout.  Cela a rendu l'algorithme plus comme une recherche al√©atoire ou un recuit simul√© (puisque nous avons r√©ussi √† muter la solution 1 fois depuis le dernier mouvement).  Il √©tait d√©j√† trop tard pour changer quelque chose et nous avons r√©ussi √† conserver la 3√®me place. </p><br><p>  Il est important de mettre en ≈ìuvre les algorithmes de croisement, de mutation et de g√©n√©ration de solutions al√©atoires initiales, car  cela d√©pend des d√©cisions qui seront test√©es, et une d√©cision al√©atoire compl√®te n'est pas aussi bonne qu'elle peut para√Ætre √† premi√®re vue (cela fonctionnera, mais beaucoup plus d'options seront n√©cessaires). </p><br><p>  Dans la version finale, des d√©cisions al√©atoires ont √©t√© g√©n√©r√©es en segments, ce qui excluait les solutions ¬´saccad√©es¬ª en un seul endroit: </p><br><ol><li>  √âquipe al√©atoire s√©lectionn√©e </li><li>  Pour toute la longueur de la solution (40 coups) <br><ol><li>  On √©crit la commande courante dans la cellule </li><li>  Avec une probabilit√© de 10%, nous modifions l'√©quipe actuelle au hasard </li></ol></li></ol><br><p>  Selon une technologie similaire, une mutation s'est √©galement produite - un segment al√©atoire de la solution a √©t√© remplac√© par une commande al√©atoire.  Le croisement a eu lieu en choisissant le point auquel la d√©cision a √©t√© prise de 1 parent, et apr√®s du 2. </p><br><p>  J'ai aim√© que nous utilisions tout le temps dont nous disposions pour trouver la meilleure solution.  Ce n'est pas grave si la solution n'est pas la meilleure - nous pouvons l'am√©liorer au prochain tick, car  l'optimisation se r√©v√®le "floue" dans le temps.     ,        .  ,      -  ,    .           ,           </p><br><blockquote> <strong>Valdemar:</strong> <br>   1     , ,             . <br><br> <strong>Commandos:</strong> <br>    ‚Äî   -        . <br>         ‚Äî    ,     .         ,     ‚Ä¶      ,        .    "    ‚Äù.         -. </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto">   (Commandos) 1  </h3><br><p>        (  ),   <strong>n</strong>  <strong>m</strong>  .    3^2=9 .       <strong>m</strong> + <strong>n</strong>      40 . </p><br><p>  : </p><br><pre> <code class="plaintext hljs">|----------- n  -----------|---------- m  --------| |   ...   |   ...   |</code> </pre> <br><p>          :     ,  ,  .      (   ). </p><br><p>       <strong>n</strong>  <strong>m</strong> ,          .       ,     . </p><br><p>        : </p><br><ol><li>     ,       (       ,   ): <br><ul><li>   ,     ,   ,     . </li><li>       ,      ,   .           .                .            ,       ,      ,     . </li><li>         .   ;        (           ). </li></ul></li><li>       <strong>n</strong>  <strong>m</strong>  .      ,    .1,      ,          .     -  (    )  ,        ‚Äî        ,      ; </li><li>             .   ,     ‚Äî      .    ,       (       ). </li></ol><br><blockquote> <strong>Valdemar:</strong> <br> ,       2    .    .         ,    . <br><br> <strong>mortido:</strong> <br>  Ouah!   ,       .    .  ,   2    ,   40-60       .  ,        3   . <br> n + m == const ? </blockquote><p>   .  <code>n + m != const</code> ,              .      ,  .  -   . </p><br><h1 id="funkciya-ocenki">   </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-1">   (Valdemar) 4  </h3><br><p>   ,       . ,    (  , ,   ..)    [0..1]. <br>           .     :   ,        . <br>            ,    ,      :      ,          . </p><br><p> ,   : </p><br><ul><li>    ‚Äî    70  180  (  :         ). <br>       ,       . </li><li>       0..500 </li><li>   ‚Äî  [2pi, pi/4]   [0, 1] </li><li>    ‚Äî    ,       (    ),   (  ,      ,        ) </li><li>   ‚Äî ,      ,     ,           . <br>      ,  ,       . </li><li>  ‚Äî     .          . </li><li>     Y   ‚Äî    . </li><li>           </li></ul><br><p>  ,       2           , . </p><br><p>           . </p><br><p>         : </p><br><ul><li>  ‚Äú‚Äù      ,       </li><li>  ‚Äú  ‚Äù        ,   ,        . </li></ul><br><blockquote> <strong>mortido:</strong> <br>    , ..      ,     . <br><br> <strong>Commandos:</strong> <br>      ,      .    -  </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-1">   (mortido) 3  </h3><br><p>        ,      chipmunk.              .     ,      ,     ,   ,   .        . </p><br><p>                    3   <del>  </del>   . </p><br><p>   ,        ( ,     ,   ): </p><br><ul><li>   .          ,  ,        (       ,     ); </li><li>    ,    ‚Äî       ,     ;      ,     1  ; </li><li>   ; </li><li>      (    ,  ); </li><li>       (   ‚Äú+‚Äù,    ‚Äú-‚Äù); <br> -     (   ‚Äú+‚Äù,    ‚Äú-‚Äù);   ,     ,      ,          ; <br>   30    ,       ,      (   ); </li><li>  ,         . </li></ul><br><p>  ,        ,         (,            ,     ) </p><br><blockquote> <strong>Valdemar:</strong> <br>         .    ,     ‚Äú  ,     ,    ‚Äù     ,      (     ..)     . </blockquote><p>  ,    ,        .    . </p><br><blockquote> <strong>Commandos:</strong> <br>   ,   ,   ‚Äú‚Äù‚Ä¶      ?              ,   ‚Äú‚Äù . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-1">   (Commandos) 1  </h3><br><p>      <code>SquaredWheelsBuggy</code> ,      ..  ,       .     Buggy   ,          ,          (         /). <br> : </p><br><ol><li>   ; </li><li>     ;         ‚Äî ,     ,   1  0; ..        ; </li><li>     .        ;          10      (            ); </li><li>             (       ,    ); </li><li>     (,          ); </li><li>       ‚Äî -    ,   ; </li><li> /     ;       ,       ‚Äî   ;             . </li></ol><br><p>  1-5      ,   .   2     ‚Äú  ‚Äù. </p><br><blockquote> <strong>Valdemar:</strong> <br>     ,        .       ,      . <br><br> <strong>mortido:</strong> <br>      ,     10 . </blockquote><br><h1 id="kostyli-i-ify">   IF' </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-2">   (Valdemar) 4  </h3><br><p>      ,            if'.         3    ,         ,           . ,        ,         -. <br>  :      ,    ‚Äú‚Äù   ‚Äî      ,   - ,           (  ,   ) ‚Äî   . </p><br><p>     : </p><br><ul><li>     .      ,        . </li><li>      ‚Äî     ,                  . </li><li>   .      ‚Äú  ‚Äù      . <br>      ,        ,         . <br>                ,      ,      . </li></ul><br><p>        ,    :     .   ,       ,   if'     . </p><br><blockquote> <strong>mortido:</strong> <br>     ,       .            . <br><br> <strong>Commandos:</strong> <br>   if'.   ,    ,    ‚Ä¶          ,     ,     . </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-2">   (mortido) 3  </h3><br><p>              - . </p><br><p>     3  .    .         .  ‚Äú‚Äù,                  .        ,      ,    . </p><br><p>          ,     ‚Äú‚Äù   .       .     ,        , ,      -  .        .     ,       , ..    . </p><br><p>    ,      ,  ,     ,           ,       .     ‚Ä¶         .    -       ‚Äî  ,     (      ,     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>    ,     .          .        ‚Äú‚Äù ,       if'.  ,           ‚Äî             . </blockquote><p>          ,       +      . ,       . </p><br><blockquote> <strong>Commandos:</strong> <br>   ‚Ä¶  ,  -   ‚Äî   ,      ,   .        ,     ,                . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-2">   (Commandos) 1  </h3><br><p>         .      (,     ,    ).         (  )   /. </p><br><p>    pill carcass map        ,       ,             (         ).      island map,      ,     . </p><br><p>             island hole  buggy.    /      ,     ,      (  ).       ‚Äî    .  ,          ,    .   SquaredWheelBuggy           .    ,      ,      ,    .  ,   ‚Ä¶    ,      ,     . </p><br><p>    (Pill map, Bus)                 ,        (     /  100% ). </p><br><p>         pill hubble map.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> (    ),     .       . </p><br><p>               ‚Äî         ,   ... </p><br><p>       ,     .                ,    .          (     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>   ,          ‚Äî        .   ,     . <br><br> <strong>mortido:</strong> <br>     ,     ‚Äú‚Äù  . </blockquote><br><h1 id="emocii">  </h1><br><blockquote> <strong>Valdemar:</strong> <br>     .           ,      .    (   )      . <br>                  .  ‚Äú‚Äù,      ,          , ,  :) <br>  ,  mailru  ,     . <br><br> <strong>mortido:</strong> <br>        :               ,          ‚Ä¶   ,      ,       (      ).     ,     3   ,    ,   ‚Ä¶      . <br><br> <strong>Commandos:</strong> <br> -     ,     . , ,   ,  .    ‚Ä¶       .         ‚Äî     ,      . <br>     ‚Äî       ++.       .       ,       .     1  <del>       </del>     -. </blockquote><br><h1 id="itak">  </h1><br><p> ,           .    ,              .      ,      ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  Mail.Ru Group   . </p><br><h1 id="bonus">  </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Valdemar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mortido</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a> </p><br><div class="spoiler"> <b class="spoiler_title"> ,    </b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/bz/b8/cd/bzb8cdwabur3c-7qbcwzmjokx0o.gif"></p><br><p><img src="https://habrastorage.org/webt/tw/nw/cw/twnwcwndcdjglzq2hhuh0ulxohc.gif"></p><br><p><img src="https://habrastorage.org/webt/ib/jh/vq/ibjhvquma8mwq6meckt2qzteicy.gif"></p><br><p><img src="https://habrastorage.org/webt/4e/eg/c9/4eegc9jvtcg-0namubh_9cqx2ok.gif"></p><br><p><img src="https://habrastorage.org/webt/4f/uw/w8/4fuww8dcs4-fx4nuar8bcur0lpm.gif"></p><br><p><img src="https://habrastorage.org/webt/fz/q3/6u/fzq36ufo15jgjwbd9ev_cnc6mso.gif"></p><br><p><img src="https://habrastorage.org/webt/og/55/dt/og55dtgv4ohguhiucwhn0qwqiak.gif"></p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430466/">https://habr.com/ru/post/fr430466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430454/index.html">Je suis entour√© d'idiots ou comment travailler en √©quipe</a></li>
<li><a href="../fr430456/index.html">Livres sur la gestion de projets juridiques par PMI</a></li>
<li><a href="../fr430458/index.html">Supraconducteur graph√®ne multicouche: √©tude des zones planes</a></li>
<li><a href="../fr430460/index.html">Trojan Penguin: Cr√©er un virus pour Linux</a></li>
<li><a href="../fr430462/index.html">En Russie, un projet de loi est apparu sur la fourniture de donn√©es des utilisateurs des r√©seaux sociaux √† un cercle illimit√© de personnes. R√©seaux sociaux contre</a></li>
<li><a href="../fr430468/index.html">Sensibiliser les citoyens</a></li>
<li><a href="../fr430470/index.html">Pourquoi maintenir le contexte sur le compte client - honn√™tement et de mani√®re rentable</a></li>
<li><a href="../fr430472/index.html">R√©seau DECT sans couture bricolage</a></li>
<li><a href="../fr430474/index.html">CephFS vs GlusterFS</a></li>
<li><a href="../fr430476/index.html">NCBI Genome Workbench: Endangered Research</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>