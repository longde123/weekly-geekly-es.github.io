<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßõüèΩ üëãüèº üò© √úber die Bedienung eines PCs am Beispiel von Windows 10 und der Tastatur, Teil 1 üéôÔ∏è üö£üèº üëÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mein Name ist Andrey Artemyev, ich arbeite bei Microsoft mit dem Kern von Windows 10, ich arbeitete zuvor mit Windows 10x (WCOS), XBox, Windows Phone ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√úber die Bedienung eines PCs am Beispiel von Windows 10 und der Tastatur, Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483330/"><img src="https://habrastorage.org/getpro/habr/post_images/168/a19/873/168a198732c9cf76e19132b28ceaf04d.png" alt="Bild"><br><br>  Mein Name ist Andrey Artemyev, ich arbeite bei Microsoft mit dem Kern von Windows 10, ich arbeitete zuvor mit Windows 10x (WCOS), XBox, Windows Phone und Microsoft Edge.  Ich m√∂chte aus p√§dagogischen Gr√ºnden gerne erz√§hlen, wie der Computer am Beispiel der Tastatureingabe und Windows 10 funktioniert. Diese Artikelserie richtet sich in erster Linie an Studenten technischer Fachrichtungen.  Wir werden pr√ºfen, welchen Pfad die Informationen √ºber die gedr√ºckte Taste von der Tastatur in Notepad.exe anzeigen.  Aufgrund der Weite und Interdisziplinarit√§t des Themas kann es zu Ungenauigkeiten in den Artikeln kommen, √ºber die in den Kommentaren berichtet wird.  Einige Informationen sind m√∂glicherweise aufgrund der Geschwindigkeit, mit der sich Windows entwickelt, veraltet. <br><a name="habracut"></a><br><h3>  Wie tief tauchen wir in das Thema ein? </h3><br>  Sprechen wir zun√§chst √ºber die Ebenen, auf denen ein Computer in Betracht gezogen werden kann.  Jede Ebene basiert auf der vorherigen.  Fangen wir von oben an. <br><br>  <i>Anwendungsebene</i> .  Alle Benutzeranwendungen befinden sich hier, dies sind ein Browser, Microsoft Office, Editor sowie der IIS-Webserver, SQL Server, verschiedene Middleware wie Java und .Net und alle Skriptsprachen, ob Ruby, PHP oder Bat-Dateien. <br><br>  <i>Betriebssystemebene</i> .  Betriebssystem kann betrachtet werden als: <br><br><ul><li>  Ressourcenmanager - Arbeitsspeicher, Festplatten, Drucker, Bildschirm, Tastatur, begrenzte Ressourcen, die von Programmen gemeinsam genutzt werden, die auf dem Computer ausgef√ºhrt werden. </li><li>  Virtuelle Maschine - Eine Datei ist ein gutes Beispiel f√ºr ein virtuelles Objekt.  Es stellt eine Abstraktion von Daten auf der Festplatte dar, eine API f√ºr die Arbeit damit, und f√ºgt auch das Konzept der Zugriffsrechte hinzu.  Anstelle einer Datei k√∂nnte das Konzept eines Datencontainers und einer v√∂llig anderen API verwendet werden.  Es gibt viele solcher virtuellen Objekte im Betriebssystem. </li><li>  Platform - OS bietet Softwaremodelle und Grundelemente f√ºr das Erstellen von Programmen.  Mit dem Windows-Treiber-Framework k√∂nnen Sie beispielsweise schnell Treiber entwickeln. Windows wird zum Erstellen komplexer Benutzeroberfl√§chen verwendet.  Dll - bietet ein Modell f√ºr die Erweiterung der Funktionalit√§t des Programms durch Plugins sowie einen Mechanismus f√ºr die Implementierung des Bildschirmlesers durch Tastaturfallen (siehe LowLevelKeyboard-Hook). </li></ul>  Das Betriebssystem ist in Ebenen und Komponenten unterteilt.  Im Allgemeinen sieht die Architektur von Windows 10 so aus.  Wir werden sp√§ter ausf√ºhrlich darauf eingehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/b8d/4c8/5a8b8d4c8c9538c8dc7e8ed97882ff90.png" alt="Bild"></div><br>  <i>Ebene der Computerarchitektur</i> .  Es handelt sich um ein Motherboard mit einem bestimmten Formfaktor, integrierten Funktionen, die in als Chipsatz bezeichneten Mikroschaltungen codiert sind, und Anschl√ºssen, √ºber die die Funktionalit√§t eines Computers erweitert werden kann, indem eine Grafikkarte, eine Netzwerkkarte, ein zus√§tzlicher Arbeitsspeicher (RAM), Festplatten, eine Tastatur usw. angeschlossen werden. Ports wirken sich auf die Geschwindigkeit und die Funktionen des Computers aus, die seinen Zweck bestimmen, egal ob es sich um einen Server f√ºr die Verarbeitung von Tausenden von Anfragen pro Sekunde, ein Tablet f√ºr die Nutzung des Internets oder einen Gaming-PC mit mehreren Videos handelt  arty.  OS abstrahiert die Funktionen des Motherboards. <br><br>  Die Mikroschaltungen sehen wie in der Abbildung unten aus und sind ein Minicomputer, der einfache Programme f√ºr einfache Aufgaben ausf√ºhrt, z. B. Daten von der Tastatur liest und weiter √ºbertr√§gt, damit sie letztendlich den Prozessor erreichen.  Sie sind in der Regel als analoge nicht programmierbare Mikroschaltung oder in C programmierbarer Mikrocontroller ausgef√ºhrt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/352/c4e/d2f/352c4ed2f9d9a581dd63afc6561f2b84.png" alt="Bild"></div><br><br>  Das Motherboard kann als eine Kolonie von Mikrokreisen betrachtet werden, die √ºber Busse miteinander kommunizieren und √ºber die Daten von den angeschlossenen Ger√§ten zum Prozessor und umgekehrt √ºbertragen werden.  Der Chipsatz ist eine Art Computer-Nervensystem.  Alle Chips auf dem Motherboard wurden urspr√ºnglich erstellt, um miteinander zu arbeiten.  Einige von ihnen k√∂nnen spezielle Funktionen haben, zum Beispiel einen Timer oder das Speichern von BIOS-Einstellungen.  Das vielleicht wichtigste davon ist das mit einem integrierten Programm (Firmware, BIOS, UEFI), das ausgef√ºhrt wird, sobald Strom anliegt.  Sie findet die Festplatte mit dem Windows-Bootloader und √ºbertr√§gt die Steuerung darauf, wodurch wiederum die ausf√ºhrbare Datei des Betriebssystems gestartet wird, die als Windows10.exe, eigentlich NtOsKrnl.exe, bezeichnet werden kann.  Das BIOS wei√ü aufgrund einer Vereinbarung zwischen Hardwareherstellern und Betriebssystemen, wonach es zu suchen gilt. <br><br>  Auf dem Motherboard k√∂nnen Sie ein Mobiltelefon, eine Spielekonsole, eine Server-Station oder ein Smart-Ger√§t installieren.  In der Abbildung unten sind die g√§ngigen Formfaktoren von Motherboards dargestellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/4b1/225/9704b1225b1a0a9308b395a918c9490c.png" alt="Bild"></div><br>  <i>Die Mikroarchitekturebene</i> wird durch den Prozessor (CPU) repr√§sentiert, dies ist das Herzst√ºck des Motherboards und der gesamte Chipsatz wird f√ºr die Wartung der CPU ben√∂tigt.  Ein Prozessor ist ein Computer in einem Computer, ein leistungsf√§higerer und fortschrittlicherer Mikrocontroller, der keine Firmware ben√∂tigt, da der Befehlsfluss sofort eintritt, wenn der Thread-Scheduler den Kontext des Prozessors √§ndert.  Die Funktion des Prozessors ist in Subsysteme unterteilt, beispielsweise eine Komponente, die an mathematischen und logischen Operationen beteiligt ist, einen mathematischen Coprozessor und einen Cache.  Einige von ihnen waren fr√ºher ein separater Chip auf dem Motherboard, aber jetzt sind sie Teil der CPU, zum Beispiel ein Interrupt-Controller und ein Chip namens North Bridge, die die Arbeitsgeschwindigkeit erh√∂hen. <br><br>  Mikroarchitektur ist nicht dasselbe wie <i>Architektur</i> .  Die gesamte Funktionalit√§t der CPU ist in Komponenten unterteilt, die zusammenarbeiten.  Diese Komponenten und ihre Wechselwirkung ist Mikroarchitektur.  Im folgenden Flussdiagramm werden sie durch farbige Rechtecke und Quadrate dargestellt. <br><br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/e7e/755/180/e7e755180f7556d131c52d5bae9e4bbb.png" alt="Bild" width="130"></td><td><img src="https://habrastorage.org/getpro/habr/post_images/879/214/4bf/8792144bf447a9af66f11fb803d4f082.png" alt="Bild" align="right"></td></tr></tbody></table></div><br>  <i>Die Prozessorarchitektur</i> ist im Wesentlichen ein Dokument, das beschreibt, welche Funktionalit√§t es haben sollte, um beispielsweise der auf Mobilger√§ten verwendeten x86-, x64- oder ARM-Architektur zu entsprechen.  Dieses Dokument beschreibt, welche Befehle, Registerzuweisungen und Operationslogiken unterst√ºtzt werden sollen.  Die Entwickler von Intel-, AMD- und Elbrus-Prozessoren k√∂nnen diese Funktionalit√§t nach Belieben implementieren und ihr neue Funktionen in Form von Befehlen, Registern, Flags, Interrupts hinzuf√ºgen. Wenn das Betriebssystem davon wei√ü, kann es sie verwenden.  In Bezug auf OOP ist die CPU-Architektur die Schnittstelle und die Mikroarchitektur ihre Implementierung. <br><br>  <i>Logikschaltungen</i> .  Farbige Rechtecke aus dem CPU-Blockdiagramm bestehen aus Logikschaltungen, die ihre Operationen mit Folgen von Nullen und Einsen ausf√ºhren.  Der Prozessor sieht alle Daten und Anweisungen in Form von Bits (0 und 1). Gem√§√ü der Formel kann jede Dezimalzahl als Folge von 0 und 1 dargestellt werden, aber was eine bestimmte Zahl bedeutet, h√§ngt vom Kontext ab.  Es kann ein Code, eine Zahl oder ein Buchstabe sein.  Arithmetik und Logik (ALU) k√∂nnen durch bitweise Operationen zwei Zahlen addieren.  Die bitweisen Algorithmen Addition, Subtraktion, Multiplikation und Division sind seit langem bekannt und m√ºssen von den Entwicklern der Logikschaltung nur effektiv implementiert werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/ec3/90e/295ec390e94e6f5a747108c18a90718d.png" alt="Bild"></div><br>  Digitale Schaltkreise arbeiten mit Daten auf der Ebene von Nullen und Einsen, w√§hrend analoge Schaltkreise auf der Ausnutzung der physikalischen Gesetze beruhen.  Sie f√ºhren einfache Bitmanipulationen durch, z. B. Shifts, AND, OR, XOR.  Durch diese Grundelemente werden komplexere Operationen implementiert.  Das Bild unten zeigt den analogen UND-Operator, der durch Transistoren implementiert ist.  Am Ausgang der Schaltung liegt nur dann eine Spannung ungleich Null an, wenn beide Eingangskontakte (Bx1 und Bx2) anliegen, andernfalls null Volt.  Der Operator &amp;&amp; in C # funktioniert genauso.  Digitale Schaltungen basieren letztendlich auf Analog.  Physikalisch logische Elemente in Logikschaltungen k√∂nnen nicht nur auf elektronischem, sondern auch auf mechanischem, hydraulischem, optischem und anderem Wege implementiert werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/861/bc3/9db/861bc39db7794a592e6e58896a363e0b.png" alt="Bild"></div><br>  <i>Der Pegel der Radioelemente</i> .  Physikalisch analoge Schaltungen beruhen auf Funkelementen, die die physikalischen Gesetze tats√§chlich ausnutzen.  Meist sind dies Halbleiter, d.h.  Unter bestimmten Umst√§nden leiten sie m√∂glicherweise Elektrizit√§t, jedoch nicht.  Die Diode leitet den Strom nur in eine Richtung. Wenn sie nicht gel√∂tet, um 180 ¬∞ gedreht und zur√ºckgel√∂tet ist, flie√üt der Strom nicht durch sie.  Der Transistor l√§sst nur dann Strom durch, wenn am Steuerzweig Spannung anliegt.  Die Menschheit hat gelernt, Transistoren mikroskopisch zu machen, und deshalb k√∂nnen sie millionenfach auf einer kleinen Tafel platziert werden.  In den Bildern unten sind Halbleiter-Funkelemente und ein herk√∂mmlicher Transistor neben einem Nanotransistor unter einem Elektronenmikroskop zu sehen. <br><div class="scrollable-table"><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/n-/ux/k5/n-uxk5c1ocjoowqllgwa6rcpt8a.png" alt="Bild"></div><br></td><td><img src="https://habrastorage.org/getpro/habr/post_images/c55/e83/c82/c55e83c825722050e5e461a8a6521c52.png" alt="Bild"><br></td></tr></tbody></table></div>  <i>Das Niveau der Gesetze der Physik</i> .  Und schlie√ülich ist die unterste Ebene die Ebene der physikalischen Gesetze, die in Halbleiter-Funkelementen eingeschlossen sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78b/e31/48d/78be3148d40c073b92a9b33b744cb3a3.png" alt="Bild"></div><br>  Wir werden viel √ºber die Betriebssystemebene und etwas weniger √ºber Computerarchitektur, Mikroarchitektur, analoge Schaltungen und Funkelemente sprechen.  Im letzten Teil sollten Sie verstehen, wie dies alles zusammenarbeitet. <br><br><h3>  Betriebssystem-Grundlagen </h3><br>  Als wir an einer Universit√§t in Assembler-Sprache waren, hatten viele Studenten ein Problem mit so klugen Worten wie "Kernel- und Benutzermodi", unter denen das eigentlich bekannte Rollenauthentifizierungssystem verborgen ist. Alle Sites haben mindestens einen "Administrator" mit Zugriff auf Alle Seiten und der ‚ÄûBenutzer‚Äú haben eingeschr√§nkten Zugriff.  Auf die gleiche Weise hat die "Core" -Rolle Zugriff auf alle Funktionen der CPU, und die "User" -Rolle verursacht m√∂glicherweise nicht alle Prozessorbefehle und nicht alle Argumente.  Neben diesem Vorbild basiert das Betriebssystem auf dem Prinzip der Client-Server-Architektur, bei der der Server der Kern ist, der die Betriebssystemfunktionalit√§t implementiert, und der Client Benutzerprogramme.  In der Welt des Webs sind Client und Server physisch getrennt - das sind zwei verschiedene Computer, die √ºber das Netzwerk kommunizieren.  Im Betriebssystem befinden sich Client und Server auf demselben Computer und auf derselben Hardware.  Der Server verf√ºgt √ºber eine bestimmte API, mit der Kunden ihren Status √§ndern k√∂nnen. Mit der Twitter-API k√∂nnen Sie beispielsweise Beitr√§ge erstellen, sich anmelden und einen Tweet-Feed auf einen mobilen Client hochladen.  Windows verf√ºgt √ºber eine Win-API, die aufgrund eines breiteren Aufgabenspektrums nur umst√§ndlicher ist, und derzeit √ºber rund 330.000 Windows-APIs sowie eine API f√ºr UWP-Apps.  Wenn die Konzepte von Twitter f√ºr alle mehr oder weniger klar sind - posten, verwenden, f√ºttern -, m√ºssen die Konzepte des Betriebssystems m√∂glicherweise etwas vertieft werden.  Daher k√∂nnen die Windows-APIs schwer verst√§ndlich sein, ohne die interne Struktur des Betriebssystems zu kennen. <br><br>  <i>Tats√§chlich bedeutet der Kernel drei verschiedene Dinge.</i>  <i>Der Kernel ist wie jeder OS-Code.</i>  <i>Der Kernel als Subsystem, das f√ºr Betriebssystemmechanismen wie Thread-Scheduler, Kontextwechsel, Interrupt-Behandlung, Austausch des virtuellen Speichers in physischen (Kernel) und des Kernel-Subsystems zur Unterst√ºtzung anderer Betriebssysteme verantwortlich ist - CSRSS.exe (Windows), PSXSS.exe (POSIX), OS2SS.exe (OS / 2) oder WSL (Windows SubSystem for Linux).</i>  <i>In diesem Zusammenhang wird die erste Bedeutung verstanden - der gesamte OS-Code.</i> <br><br>  Wenn ein Fenster auf dem Bildschirm angezeigt wird, wird im Serverteil des Betriebssystems (Kernelmodus) eine Datenstruktur angezeigt, die dieses Fenster beschreibt - seine Position auf dem Bildschirm, Gr√∂√üe, Titeltext und Fensterfunktion, √ºber die das Betriebssystem der Anwendung erm√∂glicht, auf Ereignisse zu reagieren.  Da das Betriebssystem viele Subsysteme enth√§lt, kann es mehrere Datenstrukturen geben, die ein Objekt beschreiben. Informationen zum Benutzerprozess befinden sich beispielsweise in den Komponenten: <br><br><ul><li>  <i>Executive</i> - hier ist die Logik des Betriebssystems.  Diese Ebene pr√ºft, welche Prozesse k√∂nnen und welche nicht.  Diese Datei enth√§lt Informationen zum √ºbergeordneten Prozess, zu den Prozessstartparametern (Process Environment Block), zum zugeordneten Benutzerkonto und zum Namen der Prozess-Exe-Datei. </li><li>  <i>Hier sind Kernel-</i> OS-Mechanismen wie ein Thread-Scheduler implementiert.  Es speichert, wie viel Zeit der Prozess im Benutzer- und Kernel-Modus verbringt, an welche Prozessoren seine Threads angeschlossen sind, und legt die grundlegende Priorit√§t der Prozess-Threads fest. </li><li>  <i>Fenstersubsystem</i> - Informationen zu GDI-Objekten, die zum Zeichnen im Fenster verwendet werden.  Dies sind solche Grundelemente wie Pinsel, Stift usw. </li><li>  <i>DirectX</i> - alles rund um DirectX: Shader, Oberfl√§chen, DX-Objekte, GPU-Leistungsindikatoren, Speichereinstellungen f√ºr den Grafikspeicher. </li><li>  <i>Das Windows-Subsystem</i> , das vom CSRSS.exe-Prozess (Client Server Runtime SubSystem) dargestellt wird.  Windows unterst√ºtzte zuvor OS POSIX (Prozess PSXSS.exe) und OS / 2 (OS2SS.exe).  Damals kam die Idee auf, Windows zum selben Subsystem zu machen, aber dies war langsam und so wurde ein Teil von CSRSS.exe nach win32k.sys √ºbertragen, das nun in mehrere Dateien unterteilt ist - win32k.sys, win32kbase.sys und win32kfull.sys.  Hier werden Informationen zu Prozessgruppendaten, Herunterfahren, Sitzungsdaten usw. gespeichert. </li></ul><br>  Die Unterst√ºtzung f√ºr POSIX und OS / 2 war eher formal, da zum √úbertragen des Programms von diesen Betriebssystemen der Quellcode gesucht und auf besondere Weise neu kompiliert werden musste, um eine exe-Datei zu erhalten, in der alle Aufrufe der OS-API an PSXdll.dll (NETAPI.DLL und DOSCALLS.DLL f√ºr OS / 2 und User32.dll f√ºr Windows-Anwendungen), ein d√ºnner Wrapper √ºber die Windows-API.  Der Status einiger APIs wurde w√§hrend des PSXSS.exe-Subsystems (OS2SS.exe) gespeichert.  Da nicht alle APIs 1 zu 1 zugeordnet werden k√∂nnen, funktionierte ein solches Programm instabil.  Die Linux-Unterst√ºtzung wurde in Windows 10 hinzugef√ºgt und funktioniert ganz anders.  Das Linux-Subsystem wird im Kernelmodus gehostet und der Unterschied zwischen Windows-Subsystem f√ºr Linux und Linux ist ungef√§hr der gleiche wie zwischen verschiedenen Builds.  Speziell f√ºr die WSL wurde eine neue Art von Verfahren eingef√ºhrt - das PICO-Verfahren. <br><br>  <i>Was ist eine Komponente?</i>  <i>Dies ist eine logisch gruppierte Funktionalit√§t.</i>  <i>Eine Komponente kann als OOP-Klasse, DLL, Ordner, Funktionsgruppe mit einem gemeinsamen Pr√§fix, Namespace oder Layer in der Architektur bezeichnet werden.</i> <br><br><h3>  Weitere Informationen zur Client-Server-Partitionierung </h3><br>  Die Trennung von Client und Server erfolgt √ºber die integrierte Funktionalit√§t der CPU, Speicherfreigabe und Softwarepr√ºfung. <br><br>  Die Ger√§tehersteller arbeiten mit den Entwicklern des Betriebssystems zusammen. Der Prozessor verf√ºgt daher √ºber Mechanismen, die unter Ber√ºcksichtigung der Bed√ºrfnisse der Hersteller von Betriebssystemen erstellt wurden.  In allen modernen Prozessoren ist der Benutzerrollenmechanismus implementiert, wobei der Benutzer als der aktuell ausf√ºhrbare Code verstanden wird.  In Webanwendungen wird die Rolle des angemeldeten Benutzers in einer Variablen gespeichert und verf√ºgt neben dem eindeutigen Namen Admin oder User √ºber eine ID dieser Rolle, die h√§ufig bei der Autorisierung verwendet wird, da das Vergleichen von Zahlen schneller und einfacher ist als Zeichenfolgen.  Im Prozessor wird die Rolle des aktuellen Benutzers in einem Feld namens "Sicherheitsring" und nicht "CurrentUser.Role.Id" gespeichert.  In den meisten Prozessoren nimmt dieses Feld vier Werte von 0 bis 3 an. Windows verwendet 0 f√ºr die Rolle "Kernel-Modus", da dies der privilegierteste Modus ist und der gr√∂√üte Wert f√ºr die Rolle "Benutzermodus" ist, da dies die eingeschr√§nkteste Rolle ist.  Die √ºbrigen Rollen werden nicht verwendet, da der Unterschied zwischen 0 und 1, 2 und 3 vernachl√§ssigbar ist.  Diese Rollen begrenzen die Speicherseiten, die angesprochen werden k√∂nnen, Sie k√∂nnen einige Anweisungen nicht aufrufen oder Sie k√∂nnen sie nicht mit bestimmten Argumenten aufrufen.  Es gibt auch Einschr√§nkungen f√ºr die Verwendung der E / A-Anschlusstechnologie f√ºr den Datenaustausch mit Ger√§ten wie einer Tastatur, die jedoch seit 10 Jahren nicht mehr verwendet wird.  Der Wechsel in den Kernel-Modus erfolgt √ºber den Befehl syscall, der nach Index die aufzurufende Funktion im Array der Zeiger auf die Windows-APIs findet.  Ein Zeiger auf dieses Array wird w√§hrend des Betriebssystemstarts in einem speziellen Prozessorregister gespeichert. <br><br>  Ich habe speziell bei der CPU ein Feld registrieren lassen.  Wenn Sie ein Programm in C # schreiben, k√∂nnen Sie Ihrer Klasse beliebig viele Felder hinzuf√ºgen und ihnen Anzeigenamen geben.  Bei Prozessoren und Mikrocontrollern werden Felder als Register bezeichnet.  Wenn Sie ein St√ºck Eisen entwerfen, m√ºssen Sie bereits zu diesem Zeitpunkt verstehen, wie viele Register (Felder) Sie ben√∂tigen, welche Gr√∂√üe sie haben sollten und welche Funktionen ihnen zugewiesen werden m√ºssen, damit dies f√ºr alle Gelegenheiten und f√ºr alle vorstellbaren und unvorstellbaren Situationen ausreicht.  Stellen Sie sich vor, Sie m√ºssen ein Programm in einer C # -√§hnlichen Programmiersprache schreiben, die 16 vordefinierte Felder in der Klasse enth√§lt, und Sie k√∂nnen keine lokalen Variablen verwenden.  Das hei√üt  Das gleiche Feld kann zum Speichern des angemeldeten Benutzers, des sortierten Arrays, der tempor√§ren Daten oder des Ergebnisses der Methode verwendet werden.  Die Namen solcher Felder sollten so h√§ufig wie m√∂glich sein. Anstelle von tempData, funcResult gibt es seltsame Namen wie EAX, AH, AL, DX usw. Wenn Sie in C # einen Prozessoremulator auf x86 - Architektur geschrieben haben, k√∂nnte der Code so aussehen (DIV - Divide, Befehl ganzzahlige Division): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/714/e34/338/714e34338ea1330cc82b04d548fb25b0.png" alt="Bild"></div><br>  Zur Veranschaulichung habe ich eine Kernel-Modus-Pr√ºfung hinzugef√ºgt.  Wenn ein Fehler bei der Division durch Null auftritt, benachrichtigt der Prozessor das Betriebssystem √ºber einen Interrupt (l√∂st ein Ereignis aus).  Zum Startzeitpunkt stellt das Betriebssystem dem Prozessor ein eindimensionales Array von Zeigern auf eine Funktion zur Verf√ºgung, die als Interrupt-Vektor bezeichnet wird, wobei jeder Index einer Art Ereignis entspricht, beispielsweise einer Division durch Null.  Das Betriebssystem kennt die Architektur des Prozessors, auf dem es ausgef√ºhrt wird, und kann entsprechend Funktionszeiger in einem Array anordnen.  Die CPU ruft diese Funktion auf und die OS hat einen eigenen Code.  Beispielsweise √ºberpr√ºft Windows in der Registrierung, ob ein Debugger installiert ist, und zeigt eine Meldung an, dass ein Fehler aufgetreten ist. Au√üerdem kann ein Debugger ausgef√ºhrt werden, um die Stelle zu ermitteln, an der der Fehler aufgetreten ist.  Ein Interrupt wird als Interrupt bezeichnet, da er in den normalen Ablauf der Programmausf√ºhrung eingreift und die Ausf√ºhrung durch den Interrupt-Handler erm√∂glicht und der Prozessor erst nach seiner Beendigung zur Programmausf√ºhrung zur√ºckkehren kann. <br><br>  Interrupts k√∂nnen nicht nur vom Prozessor, sondern auch von externen Ger√§ten (Tastatur, Maus) oder Programmcode generiert werden.  Der Thread-Scheduler legt einen Zeitgeber fest, der in Intervallen von einem Quantum (standardm√§√üig ca. 15 ms, in Windows Server mehr) einen Interrupt generiert, um einen anderen Thread f√ºr die Ausf√ºhrung gem√§√ü dem internen Algorithmus zuzuweisen.  Die schrittweise Ausf√ºhrung des Programms in Visual Studio h√§ngt auch vom Interrupt-Mechanismus ab: Auf dem Prozessor wird ein Flag gesetzt, das nach jedem Befehl einen Interrupt verursacht, der von der Windows Debugging Engine verarbeitet und √ºber die Visual Studio-API benachrichtigt wird. <br><br>  Speicherfreigabe wird dank virtuellem Speicher implementiert.  Ich habe vorhin gesagt, dass das Betriebssystem ein Ressourcenmanager und eine virtuelle Maschine ist.     1 RAM 32  Windows          4 , ..    1,   4.              (  ).              .         4096  (4),  : <br><br><ul><li>  . . CPU      ,         .         ,    ,      ,    ,     .          . </li><li>    ,        .   RAM        4.      RAM ,        . </li><li>        ,         ( new  ++)       / . Exe-     ,                 c .    . </li><li>    RAM  .                           / -     .       RAM  ,         ,     .  Windows 10   ,   . </li></ul><br> Windows 10       ,    ‚Äî    (  ),        . <br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/960/f15/ba2/960f15ba232ef507dc327a742ec9b63b.png" alt="Bild"></td><td><img src="https://habrastorage.org/getpro/habr/post_images/d81/9c5/c68/d819c5c68f4a10b9bc924ef54dbc84f8.png" alt="Bild"></td></tr></tbody></table></div> 64     16 ,  18,446,744,073,709,551,616  .         RAM      48  ,  16   .  Win x64     ,      .    ,  64  Windows ‚Äú‚Äù 256 Tb .  8TB     IA64  7TB  x64.     Windows 10 ‚Äî 2TB,        .   RAM  Windows 10     ,    . <br><br> <i>     (HEX) ,     ?       ,              .           ,    ‚Äî    . CPU       ‚Äî       CPU         .  HEX         .     , 32  ( 64)   .   ‚Äî    ,   HEX       ,    . <br></i> <br>     - ( - )     .                 /     .        -,       . <br><br><h3>    Windows? </h3><br>                Windows    - .    -   ‚Äî  , , dll, .         *.sys, *.dll ,     API        ,      C,     .      C++.      : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/b8d/4c8/5a8b8d4c8c9538c8dc7e8ed97882ff90.png" alt="Bild"></div><br>        : <br><br><ul><li> <i>Hyper-V Hypervisor</i> ‚Äî      Windows    .  ,  Hyper-V     ,              ,           . </li><li> <i>HAL.dll</i> ‚Äî Hardware Abtraction Layer ‚Äî       ‚Äî ,  ,  ‚Äî       Windows      HAL.dll,        .        ,   ,  .    ,       -   ACPI.sys. <br><br> <i>  Advanced Configuration and Power Interface?  1996       UI,                . <br></i> <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/425/8b8/115/4258b811515337cc25af8634a22f5e03.png" alt="Bild"></div><br>  1996    ACPI,            , ..          . ACPI       ,   CD drive, ..      . <br></li><li> <i>Device Drivers</i> ‚Äî    .         *.sys,          ,            . Process Explorer  SysInternals          . </li><li> <i>Kernel</i> ‚Äî <i>Kernel Mode Execution Environment</i> ,   ,   ,  ,    .     . </li><li> <i>Executive</i> ‚Äî    ,      - . </li><li> <i>Windowing &amp; Graphics</i> ‚Äî    DirectX       . </li><li> <i>NtDll.dll</i> ‚Äî                      .   dll   ,       ( ..  dll)    . Nt   Native,       Native American.  Das hei√üt  API  ,     .      dll   Nt (NtDestroyMenu).  Win API         User32.dll.          NtDll.dll,    Nt*       (level of indirection) ‚Äî subsystem dll   User32.dll  PSXdll.dll  DOSCALLS.DLL      Windows. NtDll.dll        ( <b>S</b> ession <b>M</b> anagement <b>S</b> ub <b>S</b> ystem <b>.exe</b> , <b>Win</b> dows <b>Init</b> itialize <b>.exe</b>  .),       . </li><li> <i>SubSystem dlls</i> ‚Äî        .  Windows      User32.dll. - API            ,    Nt*   NtDll.dll,   CreateFile     NtCreateFile). </li><li> <i>Environment Subsystems</i> ‚Äî CSRSS.exe,  Windows.     POSIX ( PSXSS.exe)  OS/2 (OS2SS.exe). Windows Subsystem for Linux   -. </li><li> <i>System Processes</i> ‚Äî       ,   LSASS.exe (Local Security Authority SubSystem)       . </li><li> <i>Service Processes</i> ‚Äî   Windows ( Plug and Play Manager)       *.exe .     SvcHost.exe      ,    *.dll-.         SvcHost'. </li><li> <i>User Processes</i> ‚Äî  .        ‚Äî , ,    .        . </li></ul><br>     .       . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483330/">https://habr.com/ru/post/de483330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483318/index.html">Bot f√ºr die √úberwachung von Webdiensten in einer halben Stunde: Telegramm + Bash + Cron</a></li>
<li><a href="../de483320/index.html">Schaffung eines mittelalterlichen VR-Museums</a></li>
<li><a href="../de483322/index.html">REST-API-Entwicklung - Was ist der Code First-Ansatz?</a></li>
<li><a href="../de483324/index.html">Flexible Prozesse im IT-Team</a></li>
<li><a href="../de483328/index.html">REST API - Was ist HATEOAS?</a></li>
<li><a href="../de483332/index.html">CES 2020, IBM und die erste echte kommerzielle Nutzung des neuen Quantencomputers</a></li>
<li><a href="../de483336/index.html">C ++ - Inliner-Verbesserungen: Der Zipliner</a></li>
<li><a href="../de483340/index.html">ICD hat eine Augmented Reality-Suche gestartet</a></li>
<li><a href="../de483342/index.html">Python in Visual Studio Code - Version Januar 2020</a></li>
<li><a href="../de483344/index.html">Was ist neu in .NET? (Dezember 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>