<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüåæ üë®‚Äçüíª ü§öüèø Control remoto web UART üé∏ üë®‚Äçüë¶ üßëüèæ‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Empecemos con el hierro. 
 Una vez trabaj√© en una f√°brica, donde esculpieron todo tipo de productos electr√≥nicos, no muy complicados, y a veces ca√≠an ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Control remoto web UART</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440466/"><h2>  Empecemos con el hierro. </h2><br><img src="https://www.dataweek.co.za/articles/Dataweek%20-%20Published%20by%20Technews/18EMPESG21.jpg" alt="imagen" align="left">  Una vez trabaj√© en una f√°brica, donde esculpieron todo tipo de productos electr√≥nicos, no muy complicados, y a veces ca√≠an bajo la definici√≥n de "Internet de las cosas".  En su mayor parte, todo tipo de sensores para sistemas de seguridad: humo, ruido, penetraci√≥n, fuego y m√°s.  La gama de productos era amplia, los lotes a veces ten√≠an menos de 500 piezas, y casi todos los productos ten√≠an que hacerse un accesorio de prueba separado; de hecho, solo una caja de lata en la que el producto se someti√≥ a pruebas, se presion√≥ con una tapa y, desde abajo, las agujas de contacto se presionaron a los puntos de contacto en una placa de circuito impreso, algo como esto: <br><a name="habracut"></a><br>  Por lo tanto, fue posible comunicarse f√≠sicamente con el dispositivo.  El protocolo de comunicaci√≥n que ten√≠amos era bastante com√∫n en la industria: RS232 (puerto COM, un tipo de UART).  Tambi√©n se colocaron en la caja todo tipo de dispositivos controlados simples para probar el producto final.  Todos estos instrumentos auxiliares se controlaron de la misma manera.  Toda la estructura era muy endeble, y todo tipo de problemas formaban parte de la rutina diaria. <br><br>  La gama de problemas era muy amplia: contactos deficientes, inversi√≥n de la polaridad durante la instalaci√≥n, problemas con el producto probado, con dispositivos de control y medici√≥n, con agujas de contacto, con el c√≥digo de prueba ... ¬°pero nunca se sabe!  Pero era necesario realizar pruebas constantemente, y si las pruebas comenzaban a "entrar" en alguna parte, uno de los ingenieros ten√≠a que pisar la l√≠nea y comenzar a verificar todo manualmente. <br><br>  En primer lugar, se lanz√≥ Docklight, una buena utilidad para "comunicarse" a trav√©s de los puertos COM, pero ten√≠a muchas limitaciones.  Y aqu√≠ nos estamos acercando a la esencia del asunto. <br><br><h2>  ¬øPor qu√© no me quedaba Docklight? </h2><br>  Pues vamos. <br><br><ul><li>  El primer problema es que Docklight <b>solo se</b> ejecuta en Windows.  Por lo tanto, la instalaci√≥n del "centro nervioso" en forma de RaspberryPi, que conectar√≠a todos los dispositivos, o algo as√≠, podr√≠a olvidarse.  Tuve que instalar NUC, la soluci√≥n m√°s barata en esta situaci√≥n.  Pesado, bastante grande, y no el m√°s barato.  Por cierto, cuando estos accesorios de prueba fueron arrastrados de un lugar a otro, los NUC lucharon mucho, mucho (aunque admito que su dise√±o es bastante s√≥lido). <br></li><li>  El segundo, el acceso remoto solo pod√≠a llevarse a cabo a trav√©s del uso compartido de escritorio, se ralentiz√≥ incluso a trav√©s de la red local, e incluso a trav√©s de Internet fue completamente lamentable. <br></li><li>  En tercer lugar, cada dispositivo ten√≠a su propio conjunto de comandos, y Docklight pod√≠a cargar un archivo con una lista de comandos.  Si, por ejemplo, tiene que compartir una lista similar con alguien del departamento, env√≠e un correo electr√≥nico con el archivo o ... ¬°env√≠e un enlace al archivo en la carpeta compartida!  Naturalmente, cada instalaci√≥n de Docklight requer√≠a dichos archivos localmente, y todo esto ten√≠a que hacerse docenas (si no cientos de veces) manualmente, por cada NUC, cada ingeniero arrastraba sus listas de comandos favoritas y convenientes.  Y en el patio 2019, d√©jame recordarte ... <br></li><li>  Cuarto, Docklight no le permite asociar autom√°ticamente un puerto COM con un nombre de dispositivo: por ejemplo, Windows, cuando conecta la fuente de alimentaci√≥n, se comunicar√° con el dispositivo a trav√©s de COM12.  Si desea "tirar de las cadenas" manualmente, en Docklight debe abrir COM12.  ¬øC√≥mo podemos descubrir que esto se trata solo de la fuente de alimentaci√≥n y no, por ejemplo, de SwitchBoard?  Bueno, siempre puede buscar en el administrador de dispositivos e intentar no olvidar qu√© dispositivo est√° conectado a qu√© puerto.  Al mismo tiempo, nadie garantiza que si simplemente retira el dispositivo y luego lo vuelve a enchufar, el puerto anterior permanecer√° con este dispositivo.  En resumen, cada vez que tienes que hacerlo manualmente.  Y cr√©eme, al final del d√≠a mi cabeza daba vueltas por esto. <br></li><li>  Quinto, cada puerto necesitaba una copia separada del programa y, por supuesto, todas las operaciones ten√≠an que hacerse individualmente para cada dispositivo, y aunque Docklight admite secuencias de comandos, no hay interacci√≥n entre las instancias individuales. <br><br>  Siguiente  No se proporcion√≥ integraci√≥n con ning√∫n otro producto.  Parece ser un poco insignificante, pero aqu√≠ hay una situaci√≥n en la que lleg√≥ al calor blanco: la prueba cay√≥, y tenemos que averiguar por qu√©.  En primer lugar, debe conectarse a los dispositivos y ver si est√°n muertos.  Vamos al administrador de dispositivos, observamos en qu√© puerto se encuentra nuestro dispositivo, abrimos Docklight, iniciamos la comunicaci√≥n con nuestro puerto ... Error.  ¬°Maldita sea!  Olvid√© detener el servicio que est√° instalado en el NUC y mantiene todos los puertos.  Exclusivo, ya sabes.  Bien, ralentizamos el servicio, abrimos el puerto, cargamos el archivo con los comandos del dispositivo, enviamos los comandos, obtenemos (o no obtenemos) las respuestas, resolvemos el problema.  Ejecutamos la prueba nuevamente, se bloquea nuevamente ... Oh, maldici√≥n, olvid√© cerrar Docklight y reiniciar el servicio.  Todo parece ser sin errores.  Pero esto es por las pr√≥ximas dos horas, hasta que algo vuelva a salir mal.  Y cr√©anme, era necesario resolver tales problemas m√°s a menudo de lo que quisi√©ramos. <br></li></ul><br>  Bueno, y por supuesto, sobre cualquier extensi√≥n, agregue.  no podr√≠a haber ninguna caracter√≠stica o similar: el producto est√° cerrado, escrito durante mucho tiempo (parece que ya no est√°n especialmente desarrollados), no hay personalizaci√≥n. <br><br>  Bueno, decid√≠ hacer algo m√≠o, pero corrigiendo (o mejorando) la situaci√≥n con los problemas descritos. <br>  Result√≥ algo as√≠ como Zabbix, pero con agudizaci√≥n para una situaci√≥n espec√≠fica. <br><br><h2>  Entonces, ¬øcu√°l es la diferencia? </h2><br>  Quiz√°s tenga sentido comenzar con una descripci√≥n general de la arquitectura y luego entrar en detalles. <br><br>  El esquema se ve as√≠: <br><br><img src="https://habrastorage.org/webt/qi/hh/b-/qihhb-c1wgigm6yd1vb92vayzhm.png"><br><br>  Tenemos un agente que se ejecuta en la estaci√≥n a la que est√°n conectados f√≠sicamente nuestros dispositivos.  El agente se escribi√≥ en Python, por lo que funciona sin problemas en Windows, Linux, y puede finalizarlo de manera segura para usarlo en RaspberryPi y dispositivos similares.  El programa es extremadamente poco exigente con los recursos y muy estable.  El agente se conecta constantemente a trav√©s de Websocket al servidor (back end) y recibe todas las configuraciones de puerto y sus par√°metros desde all√≠, tanto durante la inicializaci√≥n como durante las actualizaciones.  El Agente tiene su propia GUI para la configuraci√≥n y la supervisi√≥n, en cuyo caso (tal vez se perdi√≥ la conexi√≥n, tal vez la licencia ha caducado). <br><br><img src="https://habrastorage.org/webt/j0/-s/dl/j0-sdl9tw0wqkfltjf_btcxsr_k.png"><br><br>  Siguiente  El servidor (tambi√©n conocido como back-end) surge del docker (y, por lo tanto, simplemente se ejecuta no solo en Amazon o Google Cloud, sino tambi√©n en cualquier m√°quina no tan potente en una LAN con Linux a bordo).  Est√° escrito en Django junto con Redis (para admitir websockets).  Almacena todas las configuraciones y proporciona comunicaci√≥n entre la GUI del usuario (solo una p√°gina escrita en ReactJS) y a trav√©s del Agente, con nuestros dispositivos.  Comunicaci√≥n bidireccional, totalmente as√≠ncrona.  Todos los ajustes se almacenan en Postgres y Mongo. <br><br>  Bueno, y, tal vez, la parte m√°s importante del sistema es el propio cliente (simplemente, una p√°gina en un navegador, escrita para ReactJS para un mayor dinamismo). <br><br><img src="https://habrastorage.org/webt/ki/ck/lq/kicklqhbgajmtyevcyvh83myqxm.png"><br><br>  S√≠, el dise√±o visual est√° lejos de ser perfecto, pero esto se puede arreglar. <br><br>  Bueno, esto se puede redondear, agregar√© solo unas pocas palabras sobre el estado del proyecto y la demostraci√≥n. <br><br><ol><li>  Este es un alfa bastante temprano, dise√±ado para demostrar con mayor probabilidad las comodidades potenciales y verificar el nivel de inter√©s. <br></li><li>  Juega una demo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> <br>  Para iniciar sesi√≥n <br>  nombre de usuario: operador_0 <br>  contrase√±a: 123456789 <br>  Seleccionamos QA_Test y cualquier estaci√≥n (esto es solo un intento de simular la estructura de la empresa: los puertos est√°n conectados a las estaciones, se dividen en departamentos y cada oficina tiene su propia estructura) <br></li></ol><br>  En principio, si hay inter√©s, agregar√© soporte para https, y construir√© los ensamblados del Agente para diferentes plataformas, as√≠ como tambi√©n agregar√© todas las dem√°s caracter√≠sticas. <br><br>  Estar√© encantado de cualquier comentario y sugerencia.  ¬°La cr√≠tica es bienvenida! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440466/">https://habr.com/ru/post/440466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440454/index.html">Paul Graham: Lo que aprend√≠ de Hacker News</a></li>
<li><a href="../440458/index.html">Predicci√≥n del estado de la red VoIP basada en archivos de registro de texto del servidor de aplicaciones SIP</a></li>
<li><a href="../440460/index.html">C√≥mo los siete modders de Mount y Blade crearon un estudio de juegos</a></li>
<li><a href="../440462/index.html">Las 7 mejores estrategias de marketing de contenidos que no debe perderse en 2019</a></li>
<li><a href="../440464/index.html">Trabaje con el servicio de bases de datos administradas de Digital Ocean en .NET Core</a></li>
<li><a href="../440468/index.html">2 veces m√°s, 10 veces m√°s r√°pido, durante todo el d√≠a, todo por el bien de las personas</a></li>
<li><a href="../440470/index.html">Incruste un int√©rprete de Python en una aplicaci√≥n Java utilizando el proyecto Panam√°</a></li>
<li><a href="../440472/index.html">Implementaci√≥n de modelos seq2seq en Tensorflow</a></li>
<li><a href="../440474/index.html">Efectos de filtrado SVG. Parte 4. Im√°genes a dos colores con feComponentTransfer</a></li>
<li><a href="../440476/index.html">"Comienza con mitaps" o ¬øNecesitas cursos de programaci√≥n?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>