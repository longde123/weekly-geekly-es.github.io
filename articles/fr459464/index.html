<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§“ğŸ¿ ğŸ‘ ğŸ‘†ğŸ» Lua Ã  Moscou 2019: entretien avec Roberto JÃ©rusalem ğŸ’ª ğŸ™‡ğŸ¼ ğŸ”€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a quelque temps, Roberto de JÃ©rusalem, auteur de la langue Lua, a visitÃ© notre bureau de Moscou. Nous l'avons interviewÃ©, au cours duquel nous av...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lua Ã  Moscou 2019: entretien avec Roberto JÃ©rusalem</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/459464/"><img src="https://habrastorage.org/getpro/habr/post_images/2e2/088/efd/2e2088efd08efa95d7b7d335d3d59696.jpg"><br><br>  Il y a quelque temps, Roberto de JÃ©rusalem, auteur de la langue Lua, a visitÃ© notre bureau de Moscou.  Nous l'avons interviewÃ©, au cours duquel nous avons posÃ© des questions aux lecteurs de Habr.  Enfin, nous pouvons partager avec vous l'intÃ©gralitÃ© de l'enregistrement de la conversation. <br><a name="habracut"></a><br>  <b>- Philosophisons pour commencer.</b>  <b>Si vous deviez reconstruire Lua Ã  partir de zÃ©ro, quelles trois choses changeriez-vous dans cette langue?</b> <br><br>  - Ouah!  Question difficile.  Il y a toute une histoire derriÃ¨re la crÃ©ation et le dÃ©veloppement de la langue.  Ce n'Ã©tait pas une grosse dÃ©cision.  Il y a des dÃ©cisions que j'ai regrettÃ©es et que j'ai pu corriger au fil des ans.  Et les programmeurs s'en plaignent tout le temps car la compatibilitÃ© est rompue.  Nous l'avons fait plusieurs fois.  Et je ne pense qu'Ã  quelques petites tÃ¢ches. <br><br>  <b>- Valeurs par dÃ©faut globales (Global par dÃ©faut)?</b>  <b>Pensez-vous que c'est la bonne faÃ§on?</b> <br><br>  - Peut-Ä™tre.  Mais ce chemin est trÃ¨s difficile pour les langues dynamiques.  Vous devriez peut-Ãªtre abandonner complÃ¨tement le concept de "dÃ©faut", mais il sera alors difficile d'utiliser des variables. <br>  Par exemple, vous devez en quelque sorte dÃ©clarer toutes les bibliothÃ¨ques standard.  Vous avez besoin d' <code>one-liner</code> , <code>print(sin(x))</code> , puis vous devez dÃ©clarer Â«printÂ» et un autre Â«sinÂ».  C'est Ã©trange d'avoir des publicitÃ©s pour des scripts aussi courts. <br><br>  Tout ce qui est plus gros ne devrait rien avoir par dÃ©faut, comme il me semble.  Local-by-default n'est pas une solution, il n'existe pas du tout.  C'est uniquement pour l'affectation, pas pour l'utilisation.  Nous attribuons quelque chose, puis utilisons et attribuons Ã  nouveau, et une erreur complÃ¨tement inexplicable se produit. <br><br>  Peut-Ãªtre que la globalitÃ© par dÃ©faut n'est pas parfaite, mais la localitÃ© par dÃ©faut n'est certainement pas une option.  Je pense qu'une sorte d'annonce, peut-Ãªtre facultative ... Nous avons eu plusieurs fois l'intention de faire une sorte d'annonce mondiale.  Mais si nous introduisons aveuglÃ©ment tout ce qu'on nous demande, rien de bon n'en sortira. <br><br>  (sarcastique) Oui, nous allons introduire une annonce globale, ajouter que, sho, cinquiÃ¨me, dixiÃ¨me, en retirer une autre, et par consÃ©quent, nous rÃ©alisons que la solution finale ne satisfait pas la plupart des programmeurs, et nous n'ajouterons pas toutes les fonctionnalitÃ©s qui nous sont demandÃ©es, et donc nous n'implÃ©mentons rien.  AprÃ¨s tout, le mode strict est un compromis raisonnable. <br><br>  Il y a un problÃ¨me: le plus souvent, nous utilisons, par exemple, les champs Ã  l'intÃ©rieur des modules, et lÃ  encore vous rencontrez les mÃªmes problÃ¨mes.  Ce n'est lÃ  qu'un cas d'erreurs trÃ¨s spÃ©cifique, qui devrait probablement Ãªtre pris en compte dans la solution gÃ©nÃ©rale.  Donc, si vous en avez vraiment besoin, il est prÃ©fÃ©rable d'utiliser un langage typÃ© statiquement. <br><br>  <b>- La globalitÃ© par dÃ©faut est toujours pratique pour les petits fichiers de configuration.</b> <br><br>  "Oui, c'est vrai, pour les petits scripts et autres." <br><br>  <b>- Et pas de compromis dans ce cas?</b> <br><br>  - Il y a toujours des compromis.  Dans ce cas, un compromis entre de petits scripts et de vrais programmes, quelque chose comme Ã§a. <br><br>  <b>- Et ici, nous revenons Ã  la premiÃ¨re grande question: quelles trois choses changeriez-vous s'il y avait une telle opportunitÃ©?</b>  <b>Il me semble que vous Ãªtes assez satisfait de l'Ã©tat actuel des choses, non?</b> <br><br>  "Eh bien, je n'appellerais pas cela un grand changement, et pourtant ... L'une des dÃ©cisions infructueuses qui sont devenues un grand changement est nulle dans les tableaux."  J'en suis dÃ©solÃ©.  J'ai fait ce hack ... Tu sais de quoi je parle?  Il y a six mois ou un an, j'ai sorti une version de Lua dans laquelle il n'y avait rien dans les tableaux. <br><br>  <b>- Des valeurs nulles?</b> <br><br>  - Exactement.  Je pense que cela s'appelle zÃ©ro dans les tableaux - c'est-Ã -dire nul.  Nous avons fait un hack de grammaire pour assurer la compatibilitÃ©. <br><br>  <b>- Pourquoi est-il nÃ©cessaire?</b> <br><br>  Â«Je suis vraiment convaincu que c'est tout le problÃ¨me ... Je pense que la plupart des problÃ¨mes avec zÃ©ro dans les tableaux disparaÃ®traient si nous pouvions avoir [zÃ©ro dans les tableaux] ... Plus prÃ©cisÃ©ment, le problÃ¨me n'est pas avec zÃ©ro dans les tableaux.  Ils me disent que les tableaux ne peuvent pas avoir zÃ©ro, donc les tableaux doivent Ãªtre sÃ©parÃ©s des tables.  Le vrai problÃ¨me est que nous ne pouvons pas garder zÃ©ro dans les tableaux!  Par consÃ©quent, le problÃ¨me n'est pas de savoir comment nous reprÃ©sentons les tableaux, mais dans les tableaux.  Si nous pouvions avoir nil dans les tableaux, alors nous aurions nil dans les tableaux sans tout le reste.  Je suis donc trÃ¨s dÃ©solÃ© Ã  ce sujet, et beaucoup de gens ne comprennent pas comment les choses auraient pu changer si Lua avait permis que rien ne soit placÃ© dans les tables. <br><br>  <b>- Puis-je vous raconter une histoire sur Tarantool?</b>  <b>Nous avons notre propre implÃ©mentation de null, qui est un CDATA vers un pointeur null.</b>  <b>Nous l'utilisons dans les cas oÃ¹ vous devez crÃ©er des fragments vides dans votre mÃ©moire pour insÃ©rer des arguments de positionnement pour les appels distants, etc.</b>  <b>Mais gÃ©nÃ©ralement, c'est un problÃ¨me car CDATA est toujours converti en vrai.</b>  <b>Et zÃ©ro dans les tableaux rÃ©soudrait beaucoup de problÃ¨mes.</b> <br><br>  - Oui je sais.  Câ€™est de cela que je parle - cela rÃ©soudrait beaucoup de problÃ¨mes pour beaucoup, mais cela conduit Ã  un problÃ¨me de compatibilitÃ© encore plus important.  Nous n'avons pas le courage de publier une version qui sera si incompatible, puis de dÃ©truire la communautÃ© et de publier d'autres documents pour Lua 5, Lua 6, etc.  Mais peut-Ãªtre qu'un jour nous publierons une telle version.  Ce seraient de trÃ¨s gros changements.  Je crois que cela aurait dÃ» Ãªtre fait dÃ¨s le dÃ©but, et ensuite nous aurions parlÃ© d'un changement trivial dans la langue, sauf pour la compatibilitÃ©.  Et aujourd'hui, il va casser de nombreux programmes. <br><br>  <b>- Quelles lacunes voyez-vous en dehors du problÃ¨me de compatibilitÃ©?</b> <br><br>  - Deux nouvelles fonctions primitives seront nÃ©cessaires.  Quelque chose comme Â«Supprimer la clÃ©Â», car l'attribution de nil ne supprimera pas la clÃ©, vous aurez donc besoin d'une opÃ©ration primitive pour la supprimer de la table.  Et vous aurez besoin d'un Â«testÂ» pour vÃ©rifier exactement oÃ¹ il y a une diffÃ©rence entre zÃ©ro et le manque de donnÃ©es. <br><br>  <b>- Avez-vous analysÃ© l'impact de ces innovations dans les implÃ©mentations pratiques?</b> <br><br>  - Oui, nous avons sorti une telle version de Lua.  Comme je l'ai dit, cela a brisÃ© tranquillement le code.  Certains utilisent l'appel de fonction <code>table.insert(f(x))</code> .  Et intentionnellement fait pour que si la fonction ne veut rien insÃ©rer, elle retourne nil.  Ainsi, au lieu d'une vÃ©rification distincte, "Est-ce que je veux intÃ©grer?"  J'appelle <code>table.insert</code> , et si j'obtiens zÃ©ro, alors je sais qu'il ne sera pas insÃ©rÃ©.  Comme dans toute autre langue, le bogue est devenu une fonctionnalitÃ© et les gens l'utilisent.  Mais si vous changez la fonctionnalitÃ©, cela cassera le code. <br><br>  <b>- Et le type de vide?</b>  <b>Comme rien, seulement vide?</b> <br><br>  "Eh bien, non, c'est un cauchemar."  Vous retardez simplement la rÃ©solution du problÃ¨me.  Si vous entrez une Â«bÃ©quilleÂ», vous en aurez besoin d'une de plus, de plus et de plus.  Ce n'est pas une solution.  L'un des problÃ¨mes est que le nÃ©ant a dÃ©jÃ  pris racine dans de nombreux endroits de la langue.  Voici un exemple typique: nous disons Â«Ã©vitez le zÃ©ro dans les tableaux, c'est-Ã -dire les trousÂ».  Et puis nous Ã©crivons une fonction qui retourne nil et quelque chose aprÃ¨s, et nous obtenons un code d'erreur.  Une telle construction implique dÃ©jÃ  elle-mÃªme ce que nil est ... Par exemple, si je veux faire une liste des rÃ©sultats retournÃ©s par la fonction, juste pour les attraper tous. <br><br>  <b>- Pour cela, vous avez un hack :)</b> <br><br>  "C'est vrai, mais vous n'Ãªtes pas obligÃ© d'utiliser des hacks pour rÃ©soudre des tÃ¢ches aussi simples et Ã©videntes."  Cependant, les bibliothÃ¨ques le font ... D'une certaine maniÃ¨re, j'y ai pensÃ©: peut-Ãªtre que les bibliothÃ¨ques devraient retourner false au lieu de nil, bien que ce soit une option grossiÃ¨re, cela ne rÃ©soudra qu'une petite partie du problÃ¨me.  Le vrai problÃ¨me, comme je l'ai dit, c'est que nous devons avoir zÃ©ro dans les tableaux.  Sinon, nous ne devrions pas utiliser nil aussi souvent que je le pense.  En gÃ©nÃ©ral, ce n'est pas clair.  Donc, si vous avez crÃ©Ã© void, ces fonctions renverront toujours nil et nous ne rÃ©soudrons pas le problÃ¨me tant que nous n'aurons pas crÃ©Ã© un nouveau type et que les fonctions renverront void au lieu de nil. <br><br>  <b>- En utilisant void, vous pouvez explicitement dire que la clÃ© doit Ãªtre stockÃ©e dans la table, la clÃ© avec la valeur void.</b>  <b>Et rien peut fonctionner comme avant.</b> <br><br>  "Oui, c'est ce que je veux dire."  Toutes ces fonctions dans les bibliothÃ¨ques doivent renvoyer void ou nil. <br><br>  <b>"Ils peuvent aussi retourner nul, pourquoi pas?"</b> <br><br>  - Parce qu'alors pour certains cas nous ne rÃ©soudrons pas le problÃ¨me de l'impossibilitÃ© de capturer toutes les valeurs que la fonction retourne. <br><br>  <b>"Mais nous n'aurons pas la premiÃ¨re clÃ©, seulement la seconde."</b> <br><br>  - Non, il n'y aura pas de seconde, car le calcul sera mal effectuÃ© et un trou apparaÃ®tra dans le tableau. <br><br>  <b>- Alors tu veux dire que tu as besoin d'une fausse mÃ©tamÃ©thode?</b> <br><br>  - Oui.  J'en rÃªve: <br><br> <code>{f(x)}</code> <br> <br>  Vous devez intercepter tous les rÃ©sultats renvoyÃ©s par <code>f(x)</code> .  Et puis je peux dire <code>%x</code> ou <code>#x</code> , et de cette faÃ§on je connais le nombre de rÃ©sultats retournÃ©s.  VoilÃ  comment une langue normale devrait fonctionner.  Donc, crÃ©er un vide ne rÃ©soudra pas le problÃ¨me tant qu'il n'y aura pas de rÃ¨gle trÃ¨s stricte selon laquelle les fonctions ne retournent jamais nul.  Mais alors pourquoi avons-nous mÃªme besoin de zÃ©ro?  Peut-Ãªtre vaut-il la peine d'y renoncer. <br><br>  <b>- Roberto, y aura-t-il un soutien beaucoup plus fort pour l'analyse statique Ã  Lua?</b>  <b>Comme Lua Check sur les stÃ©roÃ¯des?</b>  <b>Bien sÃ»r, je comprends que cela ne rÃ©soudra pas tous les problÃ¨mes.</b>  <b>Vous avez dit que cette fonctionnalitÃ© apparaÃ®tra dans la version 6.0, le cas Ã©chÃ©ant, non?</b>  <b>Et si dans 5.x il y aura un outil puissant pour l'analyse statique - si des heures de travail y sont investies - cela aidera-t-il?</b> <br><br>  "Non, je crois qu'un outil d'analyse statique vraiment puissant s'appelle ... un systÃ¨me de type!"  Si vous avez besoin d'un outil vraiment puissant, utilisez un langage de type statique comme Haskell, ou un type de langage avec des types dÃ©pendants.  Ensuite, vous aurez certainement un puissant outil d'analyse. <br><br>  <b>"Mais alors je n'aurai pas Lua."</b> <br><br>  - C'est vrai, Lua est nÃ©cessaire pour ... <br><br>  <b>- Des incertitudes?</b>  <b>J'aime bien ta photo avec une girafe sur les types statiques et dynamiques.</b> <br><br>  - Oui, ceci est ma derniÃ¨re diapositive de la prÃ©sentation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac9/66a/5b2/ac966a5b2ccf1b45ab798727ee382617.jpg"><br>  <i>La derniÃ¨re diapositive de la prÃ©sentation du discours de Roberto JÃ©rusalem Â«Pourquoi Lua?</i>  <i>(et pourquoi pas) Â»lors de la confÃ©rence Lua Ã  Moscou 2019.</i> <br><br>  <b>- Pour poser la question suivante, revenons Ã  cette image.</b>  <b>Si je comprends bien, vous pensez que Lua est un petit outil pratique pour rÃ©soudre des tÃ¢ches pas trÃ¨s importantes.</b> <br><br>  - Non, je crois que vous pouvez rÃ©soudre de gros problÃ¨mes, mais sans impliquer d'analyse statique.  Je crois aux tests de tout mon cÅ“ur.  Soit dit en passant, je ne suis pas d'accord avec vous en ce qui concerne la couverture, que nous ne devrions pas poursuivre la couverture ... Je veux dire, je suis entiÃ¨rement d'accord avec le point de vue que la couverture ne fournit pas de test complet, mais le manque de couverture ne permet pas du tout de tester.  J'ai parlÃ© Ã  Stockholm de la salle de test, vous y Ã©tiez.  J'ai commencÃ© Ã  tester avec [plusieurs] bogues - c'est la chose la plus Ã©trange - l'un d'eux Ã©tait largement connu, et les autres Ã©taient complÃ¨tement inconnus.  Quelque chose s'est complÃ¨tement cassÃ© dans le fichier d'en-tÃªte Microsoft, C et C ++.  J'ai fouillÃ© le net, mais personne ne s'en inquiÃ©tait ni ne le remarquait. <br><br>  Par exemple, il existe une fonction mathÃ©matique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modf ()</a> , Ã  laquelle il faut passer un pointeur vers une valeur double, car elle renvoie deux doubles.  Nous convertissons l'entier ou la partie fractionnaire d'un nombre.  Cette fonctionnalitÃ© fait depuis longtemps partie de la bibliothÃ¨que standard.  Puis vint C 99, et cette fonction est maintenant nÃ©cessaire pour les nombres flottants.  Et le fichier d'en-tÃªte Microsoft a simplement enregistrÃ© cette fonction et en a dÃ©clarÃ© une autre en tant que macro.  Autrement dit, la premiÃ¨re fonction a subi une conversion de type implicite.  Double a Ã©tÃ© converti en flotteur, puis un pointeur Ã  double a Ã©tÃ© converti en pointeur en flotteur! <br><br>  <b>- Quelque chose ne va pas avec cette image.</b> <br><br>  - Il s'agit du fichier d'en-tÃªte de Visual C ++ et Visual C 2007. Si vous appelez cette fonction une fois, avec tous les paramÃ¨tres, puis vÃ©rifiez le rÃ©sultat, il sera erronÃ©, sauf s'il est 0. Toute autre valeur ne sera pas vraie.  Vous ne pouvez jamais utiliser cette fonction.  Couverture zÃ©ro.  Et puis il y a eu beaucoup de discussions sur les tests ... Il suffit d'appeler la fonction une fois et de vÃ©rifier le rÃ©sultat!  Ce problÃ¨me existe depuis longtemps, pendant de nombreuses annÃ©es il n'a dÃ©rangÃ© personne.  Apple avait un bug trÃ¨s cÃ©lÃ¨bre, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quelque chose comme</a> " <code>ifâ€¦ whatâ€¦ gotoâ€¦ ok</code> ".  Quelqu'un a insÃ©rÃ© une autre expression ici, et tout est devenu normal.  Et puis ils ont beaucoup discutÃ© de la nÃ©cessitÃ© de rÃ¨gles, de l'utilisation des accolades dans le style de code, etc.  Personne n'a mentionnÃ© qu'il existe de nombreux autres Â«siÂ».  Personne ne l'a fait ... <br><br>  <b>- Il y a aussi un problÃ¨me de sÃ©curitÃ©, si je me souviens bien.</b> <br><br>  - C'est vrai.  AprÃ¨s tout, ils ne testent que des situations confirmÃ©es.  Ils ne testent pas tout de suite, car tout sera confirmÃ©.  Cela signifie que dans l'application qui vÃ©rifie la sÃ©curitÃ©, il n'y a pas un seul test qui vÃ©rifierait l'Ã©chec de toute connexion, ou ce qui devrait y Ãªtre refusÃ©.  Et tout le monde se demande si les supports sont nÃ©cessaires ... Nous avons besoin de tests, au moins de tests!  AprÃ¨s tout, personne n'a mÃªme testÃ© ce que j'entends par Â«revÃªtementÂ».  C'est incroyable, les gens ne font mÃªme pas de tests de base.  Bien sÃ»r, il serait trÃ¨s difficile de fournir une couverture avec des tests de base, d'exÃ©cuter toutes les lignes de code.  Les gens Ã©vitent mÃªme les tests de base, la couverture est donc minimale.  Je vous demande instamment de prÃªter attention aux parties du programme que vous avez oubliÃ©es.  Quelque chose comme un indice pour amÃ©liorer un peu vos tests. <br><br>  <b>- Savez-vous quelle couverture de test Ã  Tarantool?</b>  <b>83%!</b>  <b>Quelle est la couverture Ã  Lua?</b> <br><br>  - Environ 99,6%.  Combien de lignes de code avez-vous?  Un million, des centaines de milliers?  C'est Ã©norme.  1% de cent mille, c'est mille lignes de code qui n'ont jamais Ã©tÃ© testÃ©es.  Vous ne les avez pas exÃ©cutÃ©es du tout.  Vos utilisateurs ne testent rien. <br><br>  <b>- Autrement dit, environ 17% des fonctions de Tarantool ne sont pas utilisÃ©es actuellement?</b> <br><br>  - Il est peu probable que vous souhaitiez revenir Ã  ce dont nous parlions Ã  nouveau ... Je pense que l'un des problÃ¨mes avec les langages dynamiques (et les statiques aussi) est que les gens ne testent pas leur code.  MÃªme en utilisant un langage statique - pas comme Haskell, mais quelque chose comme Coq - jusqu'Ã  ce que vous ayez un systÃ¨me de vÃ©rification, vous changerez ceci en cela.  Et aucun outil d'analyse statique ne peut dÃ©tecter ces erreurs, vous avez donc besoin de tests.  Et si vous les avez, vous pouvez identifier les problÃ¨mes globaux, les fautes de frappe dans les noms, etc., toutes sortes d'erreurs.  Vous avez certainement besoin de tests.  Parfois, il sera difficile de dÃ©boguer, sinon c'est simple - cela dÃ©pend de la langue et du type de bogue.  Mais l'essentiel est qu'aucun outil d'analyse statique ne peut remplacer les tests.  En revanche, ils ne garantissent pas l'absence d'erreurs, mais avec eux je me sens beaucoup plus en confiance. <br><br>  <b>- Nous avons une question sur le test des modules Lua.</b>  <b>En tant que dÃ©veloppeur, je souhaite tester certaines fonctions locales que je pourrai utiliser plus tard.</b>  <b>Question: vous avez besoin d'une couverture au niveau de 99%, mais le nombre de situations fonctionnelles que le module pour l'API devrait gÃ©nÃ©rer est bien infÃ©rieur Ã  la quantitÃ© de fonctionnalitÃ©s qu'il prend en charge en interne.</b> <br><br>  - Excusez-moi, pourquoi? <br><br>  <b>- Il existe des fonctionnalitÃ©s qui ne sont pas disponibles pour les interfaces publiques.</b> <br><br>  "Elle ne devrait pas Ãªtre lÃ , supprimez simplement ce code." <br><br>  <b>- Il suffit de le retirer?</b> <br><br>  - Oui, je le fais parfois Ã  Lua.  Il y avait une sorte de couverture de code, je ne pouvais pas arriver ici, lÃ  ou lÃ , j'ai dÃ©cidÃ© que c'Ã©tait impossible et j'ai juste supprimÃ© le code.  Rarement, mais Ã§a arrive.  Si certaines situations sont impossibles, Ã©crivez simplement dans les commentaires pourquoi cela n'est pas possible.  Si vous ne pouvez pas accÃ©der Ã  la fonction Ã  partir de l'API publique, cela ne devrait pas l'Ãªtre.  Il est nÃ©cessaire d'Ã©crire des API publiques avec des donnÃ©es d'entrÃ©e erronÃ©es, ceci est important pour les tests. <br><br>  <b>- La suppression du code est bonne, elle rÃ©duit la complexitÃ©.</b>  <b>Moins de complexitÃ© - stabilitÃ© plus Ã©levÃ©e et facilitÃ© d'entretien.</b>  <b>Ne vous compliquez pas.</b> <br><br>  - Oui, dans la programmation extrÃªme, il existe une telle rÃ¨gle.  Si quelque chose ne peut pas Ãªtre testÃ©, il n'existe pas. <br><br>  <b>- Quelles langues t'as inspirÃ© pour crÃ©er Lua?</b>  <b>Quels paradigmes, caractÃ©ristiques fonctionnelles ou parties de langues que vous aimez?</b> <br><br>  - J'ai conÃ§u Lua dans un but trÃ¨s Ã©troit, ce n'Ã©tait pas un projet acadÃ©mique.  Alors quand vous m'avez demandÃ© de recrÃ©er la langue, j'ai rÃ©pondu qu'il y avait toute une histoire derriÃ¨re.  Je n'ai pas commencÃ© Ã  dÃ©velopper Lua avec "Je vais crÃ©er un langage que j'aime, ou que je veux utiliser, ou dont tout le monde a besoin."  J'ai eu un problÃ¨me: ici j'ai besoin d'un langage de configuration pour les gÃ©ologues et les ingÃ©nieurs, il doit Ãªtre petit et avec une interface simple pour qu'ils puissent l'utiliser.  Par consÃ©quent, l'API a toujours fait partie intÃ©grante du langage.  Telle Ã©tait la tÃ¢che.  Quant Ã  l'inspiration, Ã  cette Ã©poque, je connaissais une dizaine de langues diffÃ©rentes. <br><br>  <b>"Je me demande quelles langues vous voulez inclure dans Lua."</b> <br><br>  - J'ai empruntÃ© des idÃ©es Ã  de nombreuses langues, tout ce qui convenait pour rÃ©soudre mon problÃ¨me.  La syntaxe du langage Modula a eu la plus grande influence, bien qu'elle soit difficile Ã  dire, car il y a tellement de langues.  Quelque chose a pris Ã  AWK.  Bien sÃ»r, de Scheme et Lisp ... Je ne suis pas indiffÃ©rent Ã  Lisp depuis que j'ai commencÃ© la programmation. <br><br>  <b>- Et il n'y a toujours pas de macros Ã  Lua!</b> <br><br>  - Oui, la syntaxe est complÃ¨tement diffÃ©rente.  La premiÃ¨re langue Ã©tait probablement le Fortran ... non, ma premiÃ¨re langue Ã©tait l'assembleur, puis le Fortran.  J'ai Ã©tudiÃ©, mais je n'ai jamais utilisÃ© le CLU.  Beaucoup programmÃ© sur Smalltalk et SNOBOL.  A Ã©galement Ã©tudiÃ©, mais n'a pas utilisÃ© Icon, Ã©galement une langue trÃ¨s intÃ©ressante.  J'ai beaucoup empruntÃ© Ã  Pascal et C. Quand j'ai crÃ©Ã© Lua, le C ++ Ã©tait dÃ©jÃ  trop compliquÃ© pour moi, c'Ã©tait avant les templates et autres.  J'ai commencÃ© Ã  travailler en 1991 et j'ai libÃ©rÃ© Lua en 1993. <br><br>  <b>- L'URSS s'est effondrÃ©e et vous avez commencÃ© Ã  crÃ©er Lua :) Vous n'aimiez pas les points-virgules et les objets lorsque vous avez commencÃ© Lua?</b>  <b>Il me semblait que sa syntaxe serait similaire Ã  C, car Lua y est intÃ©grÃ©.</b>  <b>Mais ...</b> <br><br>  - Je crois que la syntaxe doit Ãªtre diffÃ©rente, alors vous ne vous tromperez pas, car ce sont deux langues diffÃ©rentes. <br><br>  C'est vraiment drÃ´le, et est liÃ© Ã  la rÃ©ponse concernant les tableaux commenÃ§ant par un, que vous ne m'avez pas permis d'exprimer [lors de la confÃ©rence].  Ma rÃ©ponse Ã©tait trop longue. <br><br>  Quand Lua a Ã©tÃ© libÃ©rÃ©, le monde Ã©tait diffÃ©rent.  Tous les langages n'Ã©taient pas similaires Ã  C. Il n'y avait toujours pas Java et JavaScript, Python Ã©tait un bÃ©bÃ© et ne dÃ©passait pas la version 1.0.  Donc, tous les langages n'Ã©taient pas similaires Ã  C; sa syntaxe Ã©tait l'une des nombreuses. <br><br>  MÃªme chose avec les tableaux.  C'est drÃ´le que la plupart de cela ne soit pas au courant.  Les tableaux commenÃ§ant par 0 et 1 ont leurs propres mÃ©rites. <br><br>  C'est grÃ¢ce Ã  C que les langages les plus populaires utilisent aujourd'hui des tableaux commenÃ§ant par 0. Leurs crÃ©ateurs ont Ã©tÃ© inspirÃ©s par C. Et c'est drÃ´le qu'il n'y ait pas d'indexation en C.    ,      ,       .        ,      â€”   ,   (offset).    ,      ,    ,  ,   . <br><br>   ,  ,         . Java, JavaScript    â€”      .     0,    .       ,  Â« Â». <br><br> <b>â€”  ,      ,        .     -,  ,     ,   -  ,    ,    .     ,   Lua     ?</b>  <b>Pourquoi?</b> <br><br> â€”     ? <br><br> <b>â€”  .</b> <br><br> â€” .    ,      ,      .      .    ?   ,  ,     .         .        . <br><br> <b>â€”   Lua   C.</b> <br><br> â€” ,    ,     .     ,   ,    â€¦     ,       ,    -      .      :     ,   â€¦ . <br><br>  ,      .  ,          ?      ,     -  â€¦        ? <br><br> <b>â€”    .</b> <br><br> â€” .    ?     C   ,    ,    â€¦     ? <br><br> <b>â€” 16 ?</b> <br><br> â€”  ,        . <br><br> <b>â€” ,  ,     .</b> <br><br> â€” ,      .    ,    ,      â€¦     ,    ,    .          â€”  ,    .     ,   ,   .       ,    â€¦   :       ? <br><br> <b>â€”  C++   .</b> <br><br> â€” ,  C++   . <br><br> <b>â€”    ? <code>ptrdiff_t</code> ?</b> <br><br> â€” <code>ptrdiff_t</code> â€”     (signed type). ,              ,           .      ? <br><br>   ,     diff ,    .     .   ,   ?  Pas question. ,    ,      .       2   ,          . <br><br>    ,       .         ,       .              diff ,    . <br><br>      ,        ++. <br><br> <b>â€”     Lua   ?</b> <br><br> â€”   ,   C++,     - ,      . ,  -   ++, â€¦         . <br><br> <b>â€”  , ?</b> <br><br> â€”      .    ,      .    ,      ,    .    ,      . <br><br> <b>â€”   JVM?</b> <br><br> â€” , JVM.  ,       â€¦  â€”  ,      .  JVM  ,   .NET,   .  JVM     ,   Lua.  ,      .    JVM,        . JVM   .    Java-,    10 .      ,  JVM   ,      . <br><br> <b>â€”     JVM, , Mobile JVM?</b> <br><br> â€”  ,   JVM. -  Java,   Java. <br><br> <b>â€”    ,  Go  Oberon?       Lua,       ?</b> <br><br> â€” Oberonâ€¦ â€¦  Go    ,  runtime-    Lua. Oberon   ,       . ,    ,    . , ,   const  Pascal  Oberon.       ,   .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br> ,  1994-    Oberon  Self.   Self?       JIT-  . Self    ,      ,    .  - ,   â€” ! â€”  ,     - .    ,       â€¦ <br><br>      Oberon,    ,     10     Self,   .  Oberon ,    ,    . <br><br>       ,      . <br><br> <b>â€” Haskell?</b> <br><br> â€”    Haskell,   ,     Lua. <br><br> <b>â€”      Python, R  Julia        Lua?</b> <br><br> â€” ,        . <br><br> R   .       ,     . <br><br> Python ,       . ,      .         ,    . <br><br>   Python   ,   ,     .   ,      ,    -  .         APIâ€¦ ,    Python,    .           ,    ,  Â« Â». <br><br>       , -: ,   , ,  -.  .  ,       API    ,   - .  ,     .     ,     ,       â€¦ <br><br>    - ,         (pattern matching).  ,   ,      ,     .    ,    ,    . <br><br>  :             Perl.     Lua,       . , Python  .            ,       ,   .      -    . <br><br> <b>â€”        ?</b> <br><br> â€”        Python.   Perl  :        $1, $2, $3.        Perl,  â€¦ <br><br> <b>â€”      Python,   ,      (     Tarantool).</b> <br><br> â€” ,     ,    ,     API,   . Python   ,    . <br><br>     Julia,      LuaJIT,    ,       .     ,     ,   .   ,        . ,   ,   ,   .           ,      ,  .      : ,     - .   ,   ,    -  ,    . <br><br>     Julia,       : ,   ,      .   ,  -    .       ,    double,      []â€¦   .     . <br><br> () Â«,  ,    ,     ,      ,   . ,  Â». , ,      . <br><br>     .    R,     Python. <br><br> <b>â€”    Erlang?</b> <br><br> â€”   .       ,   .   ,    ,       ,  -  .   Erlang     ,  ,    .      ,      . <br><br>         ,           . ,      .       ?   ,    .      . <br><br> <b>â€” , Erlang    ,  Python    .     Lua?</b> <br><br> â€”  ,   . Lua     ,       ,  Lua  ,   . <br><br> <b>â€”     ?</b> <br><br> â€” Forth,   . <br><br> <b>â€”        Lua?</b> <br><br> â€”  ,    .   ,      .    - ,     .     Lua,     Lua,      . <br><br>     Java.    Java,      ?  Non.   (reflection)?  Non.    ?    Java,    ,     Java.   ,    ,     Java,     . <br><br>     ,    Lua,     â€¦ ,     ,  FFI. <br><br> <b>â€”     Lua?</b> <br><br> â€” ,  . <br><br> <b>â€”   Lua    ?      ?</b> <br><br> â€” ,    .    ,     Haskell.       ,   ,  â€¦      Lua,  ,    ,   ,   ,      . <br><br> <b>â€” ,        Lua.</b> <br><br> â€” ,    ,    .      .    ,    . <br><br> <b>â€”     ,            . Lua    ?</b> <br><br> â€” ,     ,  â€¦ <br><br> <b>â€” Â«  Â»? ,     ?</b> <br><br> â€” , . ,    ,        ,  .         ,        . <br><br> <b>â€”         Lua?</b> <br><br> â€”  .      ,     ,     LaTex  DocBook.   ,       â€¦     LaTex,   .     @,        . Gsub   ,    ,  -   - .      ,      ,  ,      . <br><br> <b>â€”      LaTeX?</b> <br><br> â€”  LaTeX? -,   ,      .   ,    ,    LaTex. ,      inline-.      /,    .   â€”   .    ,     ,         ,     .       ,   .     ,    . <br><br> <b>â€”         LaTeX?</b> <br><br> â€” ,     .    ,        ,  . ,    3+1,     .   ,     ,      .     ,   .   ,     ,    . ,   1   Â«andÂ»,     .     .   ,   . <br><br> <b>â€”     ?</b> <br><br> â€” ,  <a href="">git</a> .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2html</a> .     HTMLâ€¦ ,   .     ,    ,  . ,       ,     .     ,    TeX.    TeX-   TeX. <br><br> <b>â€”   ?</b> <br><br> â€” ,  .  ,    TeX.    ,    .             DocBook,    .  ,       . <br><br> <b>â€”     2html   DocBook?</b> <br><br> â€” ,   DocBook. <br><br> <b>â€” ,    ,     !</b> <br><br> â€”       . <br><br><hr><br>     - ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lua Mailing List</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459464/">https://habr.com/ru/post/fr459464/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459454/index.html">Comment s'est passÃ© le premier hackathon Ã  The Standoff</a></li>
<li><a href="../fr459456/index.html">Dagaz: Ã©pisodes (partie 1)</a></li>
<li><a href="../fr459458/index.html">ok.tech: Explication des donnÃ©es # 2</a></li>
<li><a href="../fr459460/index.html">Les difficultÃ©s de travailler avec Redux et leur solution</a></li>
<li><a href="../fr459462/index.html">SEO pour Yandex. Recherchez tout?</a></li>
<li><a href="../fr459466/index.html">Lua Ã  Moscou 2019: entretien avec Roberto Ierusalimschy</a></li>
<li><a href="../fr459470/index.html">Partie 4: Toujours en cours d'exÃ©cution Linux sur RISC-V RISC-V</a></li>
<li><a href="../fr459472/index.html">Heroku + Docker + Spring Boot</a></li>
<li><a href="../fr459474/index.html">Comment faire du texte parfaitement tapÃ© en une seconde: une macro dans Word pour ceux qui Ã©crivent beaucoup</a></li>
<li><a href="../fr459478/index.html">Mon expÃ©rience dans la crÃ©ation d'une application multi-thread pour travailler avec des sauvegardes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>