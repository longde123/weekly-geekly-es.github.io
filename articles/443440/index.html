<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÑ üßòüèø üîπ M√≥dulo PHP para trabajar con datos jer√°rquicos en InterSystems IRIS üí™üèø üôÜ ‚ùå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde el comienzo de su tiempo, PHP ha sido famoso (y criticado) por apoyar la integraci√≥n con una gran cantidad de bibliotecas, as√≠ como con casi tod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>M√≥dulo PHP para trabajar con datos jer√°rquicos en InterSystems IRIS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/443440/"><img src="https://habrastorage.org/webt/ia/44/2l/ia442lsk5svgjp_oflwf7c_sesw.png" alt="imagen" align="left">  Desde el comienzo de su tiempo, PHP ha sido famoso (y criticado) por apoyar la integraci√≥n con una gran cantidad de bibliotecas, as√≠ como con casi todos los DBMS en el mercado.  Sin embargo, debido a algunas razones extra√±as, no admit√≠a bases de datos jer√°rquicas en globales. <br><br>  Los globales son estructuras para almacenar informaci√≥n jer√°rquica.  De alguna manera recuerdan la base de datos "clave -&gt; valor", con la √∫nica diferencia de que la clave puede ser multinivel: <br><a name="habracut"></a><br clear="all"><pre><code class="bash hljs">Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>) = <span class="hljs-string"><span class="hljs-string">"Moscow"</span></span> Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>, <span class="hljs-string"><span class="hljs-string">"street"</span></span>) = <span class="hljs-string"><span class="hljs-string">"Req Square"</span></span> Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>, <span class="hljs-string"><span class="hljs-string">"street"</span></span>, <span class="hljs-string"><span class="hljs-string">"house"</span></span>) = 1 Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>) = 1970 Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"first"</span></span>) = <span class="hljs-string"><span class="hljs-string">"Vladimir"</span></span> Set ^inn(<span class="hljs-string"><span class="hljs-string">"1234567890"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"last"</span></span>) = <span class="hljs-string"><span class="hljs-string">"Ivanov"</span></span></code> </pre> <br>  En este ejemplo, el lenguaje ObjectScript incorporado en el <strong>^ inn</strong> global, que se almacena en el disco duro (indicado por el icono ^ delante del nombre global), almacena informaci√≥n de varios niveles. <br><br>  Naturalmente, para trabajar con globales de PHP necesitaremos nuevas funciones que ser√°n agregadas por el m√≥dulo PHP, que se discutir√°n a continuaci√≥n. <br><br>  Globals admite muchas funciones para trabajar con la jerarqu√≠a: omitir las claves en cada nivel por separado, eliminar, copiar y pegar √°rboles completos y nodos individuales.  Bueno, as√≠ como cualquier buena base de datos de transacciones ACID.  Todo esto sucede extremadamente r√°pido (aproximadamente 10 <sup>5</sup> -10 <sup>6</sup> operaciones de inserci√≥n por segundo en hardware normal), por dos razones: <br><br><ol><li>  Los globales son una abstracci√≥n de nivel m√°s bajo que SQL, </li><li>  Las bases globales han estado en producci√≥n durante d√©cadas y durante este tiempo lograron lamer su c√≥digo y optimizarlo a fondo. </li></ol><br>  M√°s informaci√≥n sobre los globales en la serie de art√≠culos "Globales - Espadas-Masones para el almacenamiento de datos": <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los arboles.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los arboles.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Matrices dispersas.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br><br>  En este mundo, los globales han encontrado su lugar principal de aplicaci√≥n en sistemas de almacenamiento de informaci√≥n escasa y poco estructurada, como: datos m√©dicos, personales, bancarios, etc. <br><br>  Me encanta PHP (y desarrollarlo) y quer√≠a jugar con los globales.  No hab√≠a un m√≥dulo terminado.  Escrib√≠ a InterSystems pidi√©ndome que lo creara.  La espera no condujo a nada, y al final nosotros (yo, junto con mi estudiante graduado) hicimos el m√≥dulo nosotros mismos.  InterSystems patrocin√≥ el desarrollo como parte de una subvenci√≥n educativa. <br><br>  En t√©rminos generales, InterSystems IRIS es un DBMS multimodelo, por lo que desde PHP puede trabajar con √©l a trav√©s de ODBC utilizando SQL, pero estaba interesado en los globales y no exist√≠a ese conector. <br><br>  Entonces, el m√≥dulo est√° disponible para PHP 7.x (probado bajo 7.0-7.2).  Actualmente, solo puede funcionar con InterSystems IRIS y Cach√© instalados en el mismo host. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina del m√≥dulo en OpenExchange</a> (un cat√°logo de proyectos y complementos para desarrolladores en InterSystems IRIS y Cach√©). <br><br>  Hay una secci√≥n √∫til DISCUSS en la que las personas comparten sus experiencias de uso. <br><br>  Descargue aqu√≠: <br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/intersystems-community/php_ext_iris</a> <br></blockquote>  Descargue el repositorio desde la l√≠nea de comandos: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/intersystems-community/php_ext_iris</code> </pre> <br>  <a href="">Instrucciones para instalar el m√≥dulo en ingl√©s y ruso.</a> <br><br>  Funciones del m√≥dulo: <br><div class="scrollable-table"><table><tbody><tr><td>  Funci√≥n php </td><td>  Descripci√≥n </td></tr><tr><th colspan="2">  Trabajar con datos </th></tr><tr><td>  <nobr>iris_set ($ nodo, valor)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Sitio de instalaci√≥n.</b> <div class="spoiler_text"><ol><li><blockquote>  <strong>iris_set ($ global, $ subscript1, ..., $ subscriptN, $ value);</strong> <strong><br></strong>  <strong>iris_set ($ global, $ valor);</strong> </blockquote><br>  <strong>Devuelve:</strong> verdadero o falso (en caso de error). <br>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre del global, luego los √≠ndices, el √∫ltimo par√°metro es el valor. <br><br><pre> <code class="php hljs">iris_set(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); iris_set(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>);</code> </pre> <br>  Anal√≥gico en ObjectScript <br><br><pre> <code class="bash hljs">Set ^time = 1 Set ^time(<span class="hljs-string"><span class="hljs-string">"tree"</span></span>, 1, 1) = <span class="hljs-string"><span class="hljs-string">"value"</span></span></code> </pre> </li><li><blockquote>  <strong>iris_set ($ arrayGlobal, $ value);</strong> </blockquote>  Solo 2 par√°metros: el primero es una matriz en la que se almacena el nombre del global y todos sus √≠ndices;  El segundo es el significado. <br><br><pre> <code class="php hljs">$node = [<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]; iris_set($node,<span class="hljs-string"><span class="hljs-string">'value'</span></span>);</code> </pre> </li></ol></div></div><br></td></tr><tr><td>  <nobr>iris_get ($ nodo)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Leer nodo.</b> <div class="spoiler_text">  <strong>Devuelve:</strong> valor (n√∫mero o cadena), NULL (valor no definido) o FALSE (en caso de error). <br><br><ol><li><blockquote>  <strong>iris_get ($ global, $ subscript1, ..., $ subscriptN);</strong> <strong><br></strong>  <strong>iris_get ($ global);</strong> </blockquote>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices.  Un global puede no tener √≠ndices. <br><br><pre> <code class="php hljs">$res = iris_get(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>); $res1 = iris_get(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> </li><li><blockquote>  <strong>iris_get ($ arrayGlobal);</strong> </blockquote>  El √∫nico par√°metro es la matriz en la que se almacena el nombre del global y todos sus √≠ndices. <br><br><pre> <code class="php hljs">$node = [<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]; $res = iris_get($node);</code> </pre> </li></ol><br></div></div></td></tr><tr><td>  <nobr>iris_zkill ($ nodo)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Eliminar un valor de nodo.</b> <div class="spoiler_text">  <strong>Devuelve:</strong> VERDADERO o FALSO - en caso de error. <br><br>  Es importante tener en cuenta que esta funci√≥n solo elimina el valor en el nodo y no toca las ramas subyacentes. <br><br><ol><li><blockquote>  <strong>iris_zkill ($ global, $ subscript1, ..., $ subscriptN);</strong> <strong><br></strong>  <strong>iris_zkill ($ global);</strong> </blockquote>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices.  Un global puede no tener √≠ndices. <br><br><pre> <code class="php hljs">$res = iris_zkill(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    . $res1 = iris_zkill('^time', 'tree', 1, 1);</span></span></code> </pre> </li><li><blockquote>  <strong>iris_zkill ($ arrayGlobal);</strong> </blockquote>  El √∫nico par√°metro es la matriz en la que se almacena el nombre del global y todos sus √≠ndices. <br><br><pre> <code class="php hljs">$a = [<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]; $res = iris_zkill($a);</code> </pre> </li></ol><br></div></div></td></tr><tr><td>  <nobr>iris_kill ($ nodo)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Eliminar un nodo y todas las ramas descendientes.</b> <div class="spoiler_text">  Devuelve: VERDADERO o FALSO - en caso de error. <br><br><ol><li><blockquote>  <strong>iris_kill ($ global, $ subscript1, ..., $ subscriptN);</strong> <strong><br></strong>  <strong>iris_kill ($ global);</strong> </blockquote>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices.  Un global puede no tener √≠ndices, en cuyo caso se elimina por completo. <br><br><pre> <code class="php hljs">$res1 = iris_kill(<span class="hljs-string"><span class="hljs-string">'^example'</span></span>, <span class="hljs-string"><span class="hljs-string">'subscript1'</span></span>, <span class="hljs-string"><span class="hljs-string">'subscript2'</span></span>); $res = iris_kill(<span class="hljs-string"><span class="hljs-string">'^time'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   .</span></span></code> </pre></li><li><blockquote>  <strong>iris_kill ($ arrayGlobal);</strong> </blockquote>  El √∫nico par√°metro es la matriz en la que se almacena el nombre del global y todos sus √≠ndices. <br><br><pre> <code class="php hljs">$a = [<span class="hljs-string"><span class="hljs-string">'^time'</span></span>, <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]; $res = iris_kill($a);</code> </pre> </li></ol><br></div></div></td></tr><tr><td>  <nobr>iris_order ($ nodo)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Omitir sucursales globales en un nivel dado</b> <div class="spoiler_text">  <strong>Devuelve: una</strong> matriz que contiene el nombre completo del siguiente nodo global o FALSO (en caso de error). <br><br><ol><li><blockquote>  <strong>iris_order ($ global, $ subscript1, ..., $ subscriptN);</strong> </blockquote>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices. <br><br>  Formulario de uso de PHP y equivalente de ObjectScript: <br><br><pre> <code class="php hljs">iris_order(<span class="hljs-string"><span class="hljs-string">'^ccc'</span></span>,<span class="hljs-string"><span class="hljs-string">'new2'</span></span>,<span class="hljs-string"><span class="hljs-string">'res2'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// $Order(^ccc("new2", "res2"))</span></span></code> </pre> </li><li><blockquote>  <strong>iris_order ($ arrayGlobal);</strong> </blockquote>  El √∫nico par√°metro es la matriz en la que se almacenan el nombre global y los √≠ndices del nodo inicial. <br><br><pre> <code class="php hljs">$node = [<span class="hljs-string"><span class="hljs-string">'^inn'</span></span>, <span class="hljs-string"><span class="hljs-string">'1234567890'</span></span>, <span class="hljs-string"><span class="hljs-string">'city'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; $node !== <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; $node = iris_order($node)) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> join(<span class="hljs-string"><span class="hljs-string">', '</span></span>, $node).<span class="hljs-string"><span class="hljs-string">'='</span></span>.iris_get($node).<span class="hljs-string"><span class="hljs-string">"\n"</span></span>; }</code> </pre> <br>  Nos dar√° una conclusi√≥n: <br><br><pre> <code class="bash hljs">^inn, 1234567890, city=Moscow ^inn, 1234567890, year=1970</code> </pre> </li></ol><br></div></div></td></tr><tr><td>  <nobr>iris_order_rev ($ nodo)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Omitir sucursales globales en un nivel dado en orden inverso</b> <div class="spoiler_text">  <strong>Devuelve: una</strong> matriz que contiene el nombre completo del nodo global anterior en el mismo nivel o FALSO (si ocurre un error). <br><br><ol><li><blockquote>  <strong>iris_order_rev ($ global, $ subscript1, ..., $ subscriptN);</strong> </blockquote><br>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices. <br><br>  Formulario de uso de PHP y equivalente de ObjectScript: <br><br><pre> <code class="php hljs">iris_order_rev(<span class="hljs-string"><span class="hljs-string">'^ccc'</span></span>,<span class="hljs-string"><span class="hljs-string">'new2'</span></span>,<span class="hljs-string"><span class="hljs-string">'res2'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// $Order(^ccc("new2", "res2"), -1)</span></span></code> </pre> </li><li><blockquote>  <strong>iris_order_rev ($ arrayGlobal);</strong> </blockquote><br>  El √∫nico par√°metro es la matriz en la que se almacenan el nombre global y los √≠ndices del nodo inicial. <br><br><pre> <code class="php hljs">$node = [<span class="hljs-string"><span class="hljs-string">'^inn'</span></span>, <span class="hljs-string"><span class="hljs-string">'1234567890'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'last'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; $node !== <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; $node = iris_order_rev($node)) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> join(<span class="hljs-string"><span class="hljs-string">', '</span></span>, $node).<span class="hljs-string"><span class="hljs-string">'='</span></span>.iris_get($node).<span class="hljs-string"><span class="hljs-string">"\n"</span></span>; }</code> </pre> <br>  Nos dar√° una conclusi√≥n: <br><br><pre> <code class="bash hljs">^inn, 1234567890, name, last=Ivanov ^inn, 1234567890, name, first=Vladimir</code> </pre> </li></ol><br></div></div></td></tr><tr><td>  <nobr>iris_query ($ CmdLine)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Omitir sucursales globales con entrada a niveles inferiores</b> <div class="spoiler_text">  <strong>Devuelve: una</strong> matriz que contiene el nombre completo del nodo subyacente (si lo hay) o el siguiente nodo global (si no hay un nodo anidado). <br><br><ol><li><blockquote>  <strong>iris_query ($ global, $ subscript1, ..., $ subscriptN);</strong> </blockquote>  Todos los par√°metros de la funci√≥n son cadenas o n√∫meros.  El primero es el nombre de lo global, luego los √≠ndices. <br><br>  Formulario de uso de PHP y equivalente de ObjectScript: <br><br><pre> <code class="php hljs">iris_query(<span class="hljs-string"><span class="hljs-string">'^ccc'</span></span>, <span class="hljs-string"><span class="hljs-string">'new2'</span></span>, <span class="hljs-string"><span class="hljs-string">'res2'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// $Query(^ccc("new2", "res2"))</span></span></code> </pre> </li><li><blockquote>  <strong>iris_query ($ arrayGlobal);</strong> </blockquote>  El √∫nico par√°metro es la matriz en la que se almacenan el nombre global y los √≠ndices del nodo inicial. <br><br><pre> <code class="php hljs">$node = [<span class="hljs-string"><span class="hljs-string">'^inn'</span></span>, <span class="hljs-string"><span class="hljs-string">'city'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; $node !== <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; $node = iris_query($node)) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> join(<span class="hljs-string"><span class="hljs-string">', '</span></span>, $node).<span class="hljs-string"><span class="hljs-string">'='</span></span>.iris_get($node).<span class="hljs-string"><span class="hljs-string">"\n"</span></span>; }</code> </pre> <br>  Nos dar√° una conclusi√≥n: <br><br><pre> <code class="bash hljs">^inn, 1234567890, city=Moscow ^inn, 1234567890, city, street=Req Square ^inn, 1234567890, city, street, house=1 ^inn, 1234567890, name, first=Vladimir ^inn, 1234567890, name, last=Ivanov ^inn, 1234567890, year=1970</code> </pre> </li></ol><br>  El orden difiere del orden en que lo establecemos, ya que en el global autom√°ticamente cuando inserta todo se ordena en orden ascendente. <br></div></div></td></tr><tr><th colspan="2">  Funciones de servicio </th></tr><tr><td>  <nobr>iris_set_dir ($ FullPath)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Establecer un directorio con una base de datos</b> <div class="spoiler_text">  <strong>Devuelve:</strong> VERDADERO o FALSO - en caso de error. <br><br><pre> <code class="php hljs">iris_set_dir(<span class="hljs-string"><span class="hljs-string">'/InterSystems/Cache/mgr'</span></span>);</code> </pre> <br>  Debe completarse antes de conectarse a la base de datos. <br></div></div></td></tr><tr><td>  <nobr>iris_exec ($ CmdLine)</nobr> </td><td><div class="spoiler">  <b class="spoiler_title">Ejecute el comando DB</b> <div class="spoiler_text">  <strong>Devuelve:</strong> VERDADERO o FALSO - en caso de error. <br><br><pre> <code class="php hljs">iris_exec(<span class="hljs-string"><span class="hljs-string">'kill ^global(6)'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   ObjectScript   </span></span></code> </pre> <br></div></div></td></tr><tr><td>  <nobr>iris_connect ($ login, $ pass)</nobr> </td><td>  Conectarse a DB </td></tr><tr><td>  <nobr>iris_quit ()</nobr> </td><td>  Romper la conexi√≥n a la base de datos </td></tr><tr><td>  <nobr>iris_errno ()</nobr> </td><td>  Obtener c√≥digo de error </td></tr><tr><td>  <nobr>iris_error ()</nobr> </td><td>  Obtenga una descripci√≥n de texto del error </td></tr></tbody></table></div><br>  Si quieres jugar con el m√≥dulo t√∫ mismo, entonces: <br><br><div class="spoiler">  <b class="spoiler_title">Especialmente para los usuarios de Habr, se cre√≥ un Dockerfile para construir la imagen.</b> <div class="spoiler_text"><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/intersystems-community/php_ext_iris <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> php_ext_iris/iris docker-compose build docker-compose up -d</code> </pre><br>  Prueba de la p√°gina de demostraci√≥n en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">localhost: 52080</a> en el navegador. <br><br>  Los archivos PHP que se pueden editar y reproducir con ellos est√°n en la carpeta php / demo y se montar√°n dentro del contenedor. <br><br>  Para probar IRIS, use el <strong>administrador de</strong> inicio de sesi√≥n, la contrase√±a es <strong>SYS</strong> . <br><br>  Para ingresar la configuraci√≥n de IRIS, use la siguiente URL: <br>  <a href="">http: // localhost: 52773 / csp / sys / UtilHome.csp</a> <br><br>  Para ingresar a la consola IRIS de este contenedor, use el comando: <br><pre> <code class="bash hljs">docker <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> -it iris_iris_1 iris session IRIS</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Especialmente para los usuarios de Habr e InterSystems Cach√©, se levant√≥ la virtualka con m√≥dulo php.</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina de demostraci√≥n en ruso.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina de demostraci√≥n en ingl√©s.</a> <br>  Iniciar sesi√≥n: habr_test <br>  Contrase√±a: burmur # @ 8765 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Para la autoinstalaci√≥n del m√≥dulo en InterSystems Cach√©</b> <div class="spoiler_text"><ol><li>  Tener Linux  Prob√© en Ubuntu, en Windows el m√≥dulo tambi√©n deber√≠a estar construido, pero no lo prob√©. </li><li>  Descargue la versi√≥n gratuita: <ul><li>  <a href="">InterSystems Cach√© (se requiere registro)</a> .  De Linux listo para usar, Red Hat y Suse son compatibles, pero puede colocarlo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en otras distribuciones</a> . </li></ul><br></li><li>  Instale el m√≥dulo cach.so en PHP de <a href="">acuerdo con las instrucciones</a> . </li></ol></div></div><br>  En el contenedor docker de mi computadora personal (AMD FX-9370 @ 4700Mhz 32GB, LVM, SATA SSD), por diversi√≥n, hice dos pruebas primitivas sobre la velocidad de inserci√≥n de nuevos valores en la base de datos. <br><br><ul><li>  La inserci√≥n de 1 mill√≥n de elementos nuevos en el global tom√≥ 1.81 segundos o 552K inserciones por segundo. </li><li>  Actualizar un valor en el mismo global 1,000,000 de veces tom√≥ 1.98 segundos o 505K actualizaciones por segundo.  Un hecho interesante es que ocurre la inserci√≥n que la actualizaci√≥n.  Aparentemente, esto es una consecuencia de la optimizaci√≥n inicial de la base de datos para una inserci√≥n r√°pida. </li></ul><br>  Est√° claro que estas pruebas no pueden afirmar que sean precisas y √∫tiles, ya que son primitivas, hechas en un contenedor.  En hardware m√°s potente con un sistema de disco SSD PCIe, se pueden lograr decenas de millones de inserciones por segundo. <br><br><h3>  Qu√© se puede completar y el estado actual </h3><br><ol><li>  Puede agregar funciones √∫tiles para trabajar con transacciones (a√∫n puede usarlas a trav√©s de iris_exec). </li><li>  La funci√≥n de devolver toda la estructura de lo global no est√° implementada para que PHP no pase por alto lo global. </li><li>  La funci√≥n de guardar la matriz PHP como un sub√°rbol no est√° implementada. </li><li>  El acceso a las variables locales de la base de datos no est√° implementado.  Solo a trav√©s de iris_exec, aunque es mejor a trav√©s de iris_set. </li><li>  No implementado sin pasar por lo global en profundidad en la direcci√≥n opuesta. </li><li>  No se implementa el acceso a la base de datos a trav√©s del objeto utilizando m√©todos (similares a las funciones actuales). </li></ol><br>  El m√≥dulo actual probablemente a√∫n no est√© listo para la producci√≥n: no hubo pruebas de cargas altas y p√©rdidas de memoria.  Sin embargo, si alguien lo necesita, cont√°cteme (Sergey Kamenev updates@mail.ru). <br><br><h3>  Conclusi√≥n </h3><br>  Durante mucho tiempo, los mundos de PHP y las bases jer√°rquicas de los globales pr√°cticamente no se cruzan, aunque los globales proporcionan una funcionalidad fuerte y r√°pida en tipos de datos espec√≠ficos (m√©dicos, personales). <br><br>  Espero que este m√≥dulo sirva como un √≠mpetu para los experimentos de programadores PHP con programadores globales y ObjectScript para el desarrollo simple de interfaces web en PHP. <br><br>  PD: ¬°Gracias por su atenci√≥n! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443440/">https://habr.com/ru/post/443440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443430/index.html">¬øPor qu√© es malo cuando Internet sabe todo sobre ti?</a></li>
<li><a href="../443432/index.html">Blazor 0.9.0 lanzado</a></li>
<li><a href="../443434/index.html">Notificaciones: acci√≥n requerida para tomar ganancias / detener p√©rdidas. En caso de que su Broker no admita esas √≥rdenes</a></li>
<li><a href="../443436/index.html">D√≥nde hablar sobre Apache Ignite, bases de datos distribuidas y aprendizaje autom√°tico distribuido en la primavera</a></li>
<li><a href="../443438/index.html">7 √∫tiles extensiones de Firefox para aprender ingl√©s</a></li>
<li><a href="../443450/index.html">¬øPor qu√© los pobres no pueden estar saludables?</a></li>
<li><a href="../443452/index.html">El ej√©rcito ruso crear√° su propio Internet cerrado</a></li>
<li><a href="../443456/index.html">Te invitamos a Yandex NLP por una semana</a></li>
<li><a href="../443458/index.html">6 errores de sistema entretenidos en la operaci√≥n de Kubernetes [y su soluci√≥n]</a></li>
<li><a href="../443460/index.html">11 respuestas sobre Yandex.Directory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>