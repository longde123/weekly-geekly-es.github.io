<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÆ üì∏ ‚è≤Ô∏è O que digitar e como montar um projeto C ++ üë©üèª‚Äç‚öïÔ∏è üë¥üèª ‚õπÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depois de fazer essa pergunta, em primeiro lugar, formulei os requisitos: r√≠gido e opcional (mas desej√°vel) para o sistema de montagem e o ambiente de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que digitar e como montar um projeto C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442682/">  Depois de fazer essa pergunta, em primeiro lugar, formulei os requisitos: r√≠gido e opcional (mas desej√°vel) para o sistema de montagem e o ambiente de desenvolvimento gr√°fico. <br>  Quero observar imediatamente que n√£o se trata de escrever c√≥digo C ++ para alguma plataforma espec√≠fica, como Android ou uma estrutura, por exemplo, Qt, onde tudo est√° pronto, tanto na constru√ß√£o quanto na edi√ß√£o de c√≥digo, mas sobre c√≥digo gen√©rico que n√£o est√° vinculado a uma plataforma espec√≠fica ou para o quadro. <br><a name="habracut"></a><br><h3>  Geral: </h3><br><ul><li>  Gr√°tis. </li><li>  Plataforma cruzada (pelo menos Windows e Linux). </li></ul><br><h3>  Sistema de compila√ß√£o: </h3><br><ul><li>  Uma √∫nica equipe para construir em diferentes plataformas. </li><li>  Montagem incremental com a conta correta de todas as depend√™ncias: arquivos de cabe√ßalho e componentes de terceiros usados ‚Äã‚Äãpara montagem. </li><li>  O script de montagem deve conter apenas a configura√ß√£o m√≠nima necess√°ria espec√≠fica para um projeto espec√≠fico.  A l√≥gica geral da constru√ß√£o n√£o deve vagar de script para script, mas est√° localizada no sistema de constru√ß√£o ou em seus plugins. </li><li>  Montagem paralela embutida. </li><li>  Suporte para v√°rias cadeias de ferramentas (pelo menos gcc, Visual C ++, CLang). </li><li>  A capacidade de alterar a cadeia de ferramentas com custo m√≠nimo, sem reescrever todo o script de constru√ß√£o. </li><li>  Op√ß√µes de compila√ß√£o facilmente selecion√°veis: Debug and Release. </li><li>  Depend√™ncias em algumas ferramentas adicionais de baixo n√≠vel, como make, s√£o completamente indesej√°veis.  Em uma palavra, o sistema de montagem deve ser auto-suficiente. </li><li>  A integra√ß√£o do sistema de constru√ß√£o com reposit√≥rios de componentes de terceiros, como pkg-config ou Maven Central para a JVM, √© altamente desej√°vel. </li><li>  O sistema de constru√ß√£o deve ser extens√≠vel por plugins, como  o procedimento de montagem para cada projeto espec√≠fico pode ser mais complicado que o conceito de constru√ß√£o padr√£o (gera√ß√£o de c√≥digo, por exemplo, ou montagem de alguma imagem n√£o-padr√£o). </li><li>  √â conveniente quando o script de constru√ß√£o √© algum tipo de linguagem de programa√ß√£o de alto n√≠vel ou DSL ainda melhor.  Isso permitir√° que voc√™ n√£o mude muito caro e expressivamente o comportamento da constru√ß√£o diretamente no script. </li><li>  Ao configurar o compilador e o vinculador a partir do script de constru√ß√£o, √© muito conveniente quando o sistema fornece pelo menos abstra√ß√µes b√°sicas: por exemplo, eu gostaria de adicionar uma macro - por que pensar qual par√¢metro de linha de comando do compilador √© respons√°vel por isso?  / D no MSVC ou -D no gcc - deixe o sistema de compila√ß√£o resolver esses detalhes irrelevantes sozinho. </li><li>  Boa integra√ß√£o com ambientes de desenvolvimento gr√°fico (IDEs). </li></ul><br><h3>  IDE: </h3><br><ul><li>  A capacidade do IDE de "entender" corretamente o c√≥digo C ++.  O IDE deve poder indexar todos os arquivos do projeto, bem como todos os arquivos e defini√ß√µes de cabe√ßalhos de terceiros e do sistema (define macro). </li><li>  O IDE deve fornecer a capacidade de personalizar comandos para a constru√ß√£o de um projeto, bem como onde procurar por arquivos e defini√ß√µes de cabe√ßalho. </li><li>  Ele deve ajudar efetivamente na digita√ß√£o do c√≥digo, ou seja,  ofere√ßa as op√ß√µes de conclus√£o mais adequadas, avise sobre erros de sintaxe etc. </li><li>  Navegar em um projeto grande deve ser conveniente e encontrar um uso r√°pido e f√°cil. </li><li>  Ofere√ßa amplas oportunidades para refatora√ß√£o: renomea√ß√£o, etc. </li><li>  Tamb√©m √© necess√°ria a capacidade de gerar c√≥digo padr√£o - criando uma nova estrutura de classe, arquivo de cabe√ßalho e arquivo de implementa√ß√£o.  Gera√ß√£o de getters / setters, defini√ß√µes de m√©todos, sobrecarregando m√©todos virtuais, padr√µes de implementa√ß√£o de classes puramente virtuais (interfaces), etc. </li><li>  Destaque e suporte para tags de documenta√ß√£o de c√≥digo, como Doxygen. </li></ul><br>  √Ä luz dessas "lista de desejos", considerei v√°rios sistemas de montagem e ambientes de desenvolvimento gr√°fico.  Esta breve revis√£o n√£o pretende, de forma alguma, estar completa e cont√©m minhas avalia√ß√µes subjetivas, mas talvez pare√ßa a algu√©m √∫til como passo inicial. <br><br>  <b>Fa√ßa</b> - <i>[antiguidade] um</i> mastodonte e um merecido veterano de sistemas de montagem, que todo mundo ainda n√£o quer se aposentar, mas √© for√ßado a assumir mais e mais novos projetos.  Esta √© uma ferramenta de n√≠vel muito baixo com sua pr√≥pria linguagem espec√≠fica, onde por um espa√ßo em vez de uma guia voc√™ √© imediatamente amea√ßado de execu√ß√£o no local.  Usando make, voc√™ pode fazer o que quiser - uma constru√ß√£o de qualquer complexidade, mas ter√° que pagar por isso com esfor√ßos para escrever um script, al√©m de mant√™-lo atualizado.  Tamb√©m ser√° caro transferir a l√≥gica da constru√ß√£o de um projeto para outro.  Existem alguns substitutos modernos da maquiagem: como ninja e geleia, mas eles n√£o mudam a ess√™ncia - essas s√£o ferramentas de n√≠vel muito baixo.  Assim como no assembler, voc√™ pode escrever o que quiser, mas vale a pena? <br><br>  <b>CMake</b> - <i>[Idade M√©dia] a</i> primeira tentativa de fugir dos detalhes de baixo n√≠vel da marca.  Mas, infelizmente, n√£o foi poss√≠vel ir longe - o mecanismo aqui √© o mesmo para o qual o CMake gera enormes arquivos de cria√ß√£o com base em outro arquivo de texto com uma descri√ß√£o de compila√ß√£o de mais alto n√≠vel.  O Qmake funciona de maneira semelhante.  Essa abordagem me lembra a bela fachada de uma antiga casa de madeira, cuidadosamente revestida com pl√°stico fresco.  O CMake √© um sistema est√°vel e bem comprovado, existe at√© uma integra√ß√£o interna com o Eclipse, mas, infelizmente, n√£o me agradou porque contradiz parte dos requisitos estabelecidos no in√≠cio do artigo.  No Linux, tudo parece estar bem, mas se voc√™ precisar criar o mesmo projeto no Windows usando o MSVC - e eu prefiro o compilador nativo ao MinGW, os arquivos do NMake ser√£o gerados.  I.e.  depend√™ncias em outra ferramenta e comandos de constru√ß√£o diferentes para outra plataforma.  E tudo isso √© conseq√º√™ncia de uma arquitetura um pouco torta, quando a maior parte do trabalho √© feita por outros "ajudantes". <br><br>  <b>Ant</b> - <i>[renascimento] √© uma</i> esp√©cie de clone de make para Java.  Francamente, passei bastante tempo verificando o Ant (assim como o Maven) como um sistema de compila√ß√£o para C ++.  E eu imediatamente senti que o suporte ao C ++ aqui √© puramente "para mostrar" e n√£o suficientemente desenvolvido.  Al√©m disso, mesmo em projetos Java, o Ant j√° √© raramente usado.  Como uma linguagem de script (assim como para o Maven), o XML √© escolhido aqui - essa linguagem vil de p√°ssaros :).  Esse fato de otimismo n√£o me adicionou nenhuma imers√£o adicional no t√≥pico. <br><br>  <b>SCons</b> √© um sistema de compila√ß√£o multiplataforma independente da <i>[nova era]</i> , escrito em Python.  Os SCons se saem igualmente bem com as compila√ß√µes Java e C ++.  As depend√™ncias dos cabe√ßalhos para montagem incremental s√£o trabalhadas corretamente (como eu o entendo, um determinado banco de dados √© criado com os metadados de compila√ß√£o) e no Windows MSVC funciona sem um pandeiro.  A linguagem do script de constru√ß√£o √© Python.  Um sistema muito decente, e eu at√© queria terminar minha pesquisa, mas como voc√™ sabe, n√£o h√° limite para a perfei√ß√£o, e um exame mais detalhado revelou algumas desvantagens √† luz dos requisitos acima. <br><br>  N√£o h√° configura√ß√µes abstratas para o compilador; portanto, se, por exemplo, voc√™ precisar alterar a cadeia de ferramentas, talvez seja necess√°rio procurar lugares no script de constru√ß√£o para fazer altera√ß√µes.  As mesmas macros precisar√£o ser gravadas com condi√ß√µes aninhadas - se for o Windows, se for o GCC, etc. <br><br>  N√£o h√° suporte para artefatos remotos e depend√™ncia de alto n√≠vel de uma constru√ß√£o em outra. <br><br>  A arquitetura geral √© projetada para que os chamados construtores definidos pelo usu√°rio existam quase isoladamente e n√£o haja maneira de usar a l√≥gica de constru√ß√£o existente para complement√°-la com a sua atrav√©s de um plug-in simples.  Mas, no geral, √© uma escolha digna para pequenos projetos. <br><br>  <b>Gradle</b> <i>[atual]</i> - Eu j√° tinha uma experi√™ncia positiva usando o Gradle para projetos Java e Kotlin e tinha grandes esperan√ßas. <br><br>  Para linguagens JVM, Gradle tem um conceito muito conveniente de trabalhar com as bibliotecas necess√°rias para construir um projeto (construir depend√™ncias): <br><br><ul><li>  O script registra os endere√ßos dos reposit√≥rios com artefatos: maven ou ivy - por exemplo.  Tamb√©m pode ser um reposit√≥rio de qualquer outro tipo / formato - se houvesse um plugin para ele.  Pode ser um reposit√≥rio remoto, algum Maven Central ou sua hospedagem pessoal em algum lugar da rede ou apenas um representante local no sistema de arquivos. </li><li>  Al√©m disso, em uma se√ß√£o especial do script, as depend√™ncias para constru√ß√£o s√£o indicadas diretamente - uma lista dos artefatos bin√°rios necess√°rios com vers√µes. </li><li>  Antes da constru√ß√£o, Gradle tenta resolver todas as depend√™ncias e procura artefatos com as vers√µes fornecidas em todos os reposit√≥rios.  Os bin√°rios s√£o carregados no cache e adicionados automaticamente √† compila√ß√£o.  Isso √© muito conveniente e eu esperava que, para C ++, talvez eles fizessem algo semelhante. </li></ul><br>  No come√ßo, verifiquei o plug-in ‚Äúantigo‚Äù para suporte ao C ++ - `cpp` - e fiquei desapontado - a estrutura do script n√£o √© intuitiva: modelo, componente, nativespec - e algum tipo de confus√£o de v√°rios tipos de bin√°rios: execut√°veis ‚Äã‚Äãe bibliotecas est√£o todos em um script.  N√£o est√° claro onde colocar os testes de unidade.  Essa estrutura era muito diferente da que eu usei para Java. <br><br>  Por√©m, tamb√©m existem plugins ‚Äúnovos‚Äù para suporte a C ++: `cpp-application` - para aplicativos,` cpp-library` para bibliotecas: est√°tica e din√¢mica e, finalmente, `cpp-unit-test` para teste de unidade.  E era isso que eu estava procurando!  :) <br><br>  A estrutura de pastas do projeto padr√£o √© semelhante ao projeto Java: <br><br><ul><li>  <i>src / main / cpp</i> - a pasta raiz dos principais arquivos de projeto <i>* .cpp</i> . </li><li>  <i>src / main / headers</i> - pasta para arquivos de cabe√ßalho internos. </li><li>  <i>src / main / public</i> - pasta para cabe√ßalhos exportados - para bibliotecas. </li><li>  <i>src / test / cpp</i> - pasta para arquivos <i>* .cpp</i> da unidade de teste. </li></ul><br>  Essa estrutura n√£o √© r√≠gida - sempre pode ser alterada no script, mas ainda n√£o √© necess√°rio fazer isso sem necessidade especial, √© bastante razo√°vel. <br><br>  A prop√≥sito, o script de constru√ß√£o geralmente √© <i>build.gradle</i> , √© um DSL da linguagem Groovy ou Kotlin ( <i>build.gradle.kts</i> ) para sua escolha.  Dentro do script, a API Gradle e as APIs dos plug-ins adicionados ao script est√£o sempre dispon√≠veis. <br><br>  Para bibliotecas, voc√™ pode escolher o tipo: est√°tico ou din√¢mico (ou coletar as duas op√ß√µes). <br>  Por padr√£o, duas op√ß√µes de compila√ß√£o s√£o configuradas: Debug ( <i>gradle assemble</i> ) e Release ( <i>gradle assembleRelease</i> ). <br><br>  O princ√≠pio de executar o teste de unidade √© o mesmo que em Java: o gradle test criar√° o componente principal e, em seguida, os testes, se estiverem na pasta <i>src / test / cpp</i> , e executar√° o aplicativo de teste. <br><br>  As defini√ß√µes not√≥rias podem ser definidas de maneira abstrata - o pr√≥prio Gradle gerar√° as op√ß√µes necess√°rias do compilador.  Existem v√°rias outras configura√ß√µes abstratas, como otimiza√ß√£o, informa√ß√µes de depura√ß√£o etc. <br><br>  Pronto para uso, GCC, Microsoft Visual C ++, CLang s√£o suportados. <br><br>  O sistema de plug-in √© muito desenvolvido e a arquitetura de extens√£o √© conveniente - voc√™ pode pegar a l√≥gica pronta e decorar / expandir.  Existem dois tipos de plugins: din√¢mico, que s√£o gravados diretamente no Groovy e incorporados em um script ou gravados em Java (ou em outro idioma da JVM) e compilados em artefatos bin√°rios.  Para plug-ins, existe um artefato Gradle gratuito no qual qualquer pessoa pode postar seu plug-in, que estar√° dispon√≠vel para todos.  O que foi feito com sucesso pelo autor deste artigo :), mas mais adiante. <br>  Gostaria de me aprofundar mais no sistema de trabalho com componentes bin√°rios no Gradle for C ++: √© quase o mesmo que em Java!  Constru√ß√µes de depend√™ncias funcionam quase da mesma maneira que descrevi acima. <br><br>  Tomemos, por exemplo, uma compila√ß√£o composta: <br><br><ul><li>  utils - pasta da biblioteca </li><li>  app √© a pasta com o aplicativo que usa utils. </li><li>  settings.gradle - arquivo Gradle para combinar esses dois componentes em uma constru√ß√£o composta. </li></ul><br>  No arquivo <i>build.gradle</i> da pasta do aplicativo, basta escrever a seguinte depend√™ncia: <br><br><pre><code class="java hljs">dependencies { <span class="hljs-function"><span class="hljs-function">implementation </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':utils'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }</span></span></code> </pre> <br>  Gradle far√° o resto!  Adicione um caminho ao compilador para procurar arquivos de cabe√ßalho de utils e vincular o bin√°rio da biblioteca. <br><br>  E tudo isso funciona igualmente bem no Linux GCC e no Windows MSVC. <br>  A constru√ß√£o incremental, √© claro, tamb√©m funciona muito bem, e se voc√™ alterar os cabe√ßalhos nos utils, o aplicativo ser√° reconstru√≠do. <br><br>  Como se viu, Gradle foi al√©m e percebeu a capacidade de fazer upload de artefatos C ++ no reposit√≥rio Maven!  Para fazer isso, use o plugin padr√£o `maven-publish`. <br><br>  No script, voc√™ precisa especificar o reposit√≥rio onde deseja colocar seu artefato e fazer a publica√ß√£o gradle (ou gradle publishToMavenLocal para publica√ß√£o local).  Gradle derrubar√° o projeto e <br>  esquematizar em um formato especial - levando em conta a vers√£o, plataforma, arquitetura e op√ß√£o de compila√ß√£o. <br><br>  Os arquivos da biblioteca bin√°ria e os arquivos de cabe√ßalho p√∫blico s√£o apresentados - na pasta <i>src / main / public</i> . <br><br>  √â claro que voc√™ n√£o pode fazer upload de artefatos C ++ no Maven Cental - ele n√£o passar√° nas verifica√ß√µes obrigat√≥rias do sistema.  Mas aumentar o reposit√≥rio Maven na rede n√£o √© nada dif√≠cil, e voc√™ n√£o precisa fazer nada pelo reposit√≥rio local - √© apenas uma pasta no disco. <br><br>  Agora, se voc√™ quiser usar a biblioteca de algu√©m em seu projeto, escreva algo assim no script de constru√ß√£o: <br><br><pre> <code class="java hljs"> repositories { maven { url = <span class="hljs-string"><span class="hljs-string">'https://akornilov.bitbucket.io/maven'</span></span> } } unitTest { dependencies { implementation <span class="hljs-string"><span class="hljs-string">'org.bitbucket.akornilov.tools:gtest:1.8.1'</span></span> } }</code> </pre><br>  Ele diz aqui que, para teste de unidade, voc√™ precisa usar o artefato gtest vers√£o 1.8.1 do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio Maven</a> . <br><br>  A prop√≥sito, este √© um reposit√≥rio muito real no qual meu teste de compila√ß√£o do Google Test v1.8.1 √© publicado, criado usando o Gradle para Windows e Linux x86_64. <br><br>  Naturalmente, todo o trabalho de baixo n√≠vel na configura√ß√£o do compilador e vinculador para trabalhar com o componente externo do Gradle √© realizado.  Basta voc√™ declarar suas inten√ß√µes de usar tal e qual biblioteca com tal e qual vers√£o de tal e tal reposit√≥rio. <br><br>  Para integra√ß√£o com o IDE, o Gradle possui dois plugins internos para o Visual Studio e o Xcode.  Eles funcionam bem, exceto que o plug-in do Visual Studio ignora o c√≥digo de teste de unidade da pasta <i>src / test / cpp</i> e gera um projeto apenas para o c√≥digo principal. <br><br><h3>  Agora √© hora de falar sobre o IDE e como fazer amizade com Gradle </h3><br>  <b>O Eclipse CDT (2018-12R)</b> √© um produto maduro e de qualidade.  Se ele conseguiu analisar com sucesso o seu projeto, voc√™ tem sorte - ser√° f√°cil editar.  Muito provavelmente, ele at√© "entender√°" os tipos de autom√≥veis mais confusos.  Mas se n√£o ... Ent√£o ele enfatizar√° violentamente tudo em uma fileira com uma linha pontilhada vermelha e xingar√° com palavr√µes.  Por exemplo, ele n√£o digere os arquivos de cabe√ßalho padr√£o do MSVC e do Windows SDK.  Mesmo uma impress√£o completamente inofensiva √© sublinhada com uma linha pontilhada vermelha e n√£o √© percebida como algo significativo.  Tamb√©m havia std :: string.  No Linux, com seu gcc nativo, est√° tudo bem.  Mas, mesmo ao tentar fazer com que ele indexasse o projeto de uma irm√£ nativa do Android, os problemas come√ßaram.  Nos cabe√ßalhos bi√¥nicos, ele se recusou a ver a defini√ß√£o de size_t, al√©m de todas as fun√ß√µes que a usavam.  Provavelmente, no Windows, voc√™ pode corrigir a situa√ß√£o se, em vez dos arquivos de cabe√ßalho da Microsoft, o escorregarem, por exemplo, Cygwin ou MinGW SDK, mas esses truques n√£o s√£o muito interessantes para mim, eu ainda gostaria que um software desse n√≠vel "coma o que eles d√£o" e n√£o apenas que ele "ama". <br>  As possibilidades de navega√ß√£o, refatora√ß√£o e gera√ß√£o de c√≥digo de modelo s√£o grandes, mas h√° perguntas para o auxiliar ao digitar letras: digamos que digitemos alguns caracteres de um nome longo, por que n√£o oferecer op√ß√µes de conclus√£o?  N√£o, o assistente espera pacientemente at√© que o usu√°rio chegue.  ou -&gt; ou ::.  Eu tenho que pressionar constantemente Ctrl + Space - irritante.  Em Java, essa defici√™ncia irritante pode ser corrigida selecionando o alfabeto inteiro no CDT como um gatilho, mas n√£o encontrei uma solu√ß√£o simples. <br><br><img src="https://habrastorage.org/webt/1t/bx/ue/1tbxue1gaib5bhyo7xbofdxrapq.png"><br><br><img src="https://habrastorage.org/webt/yh/zi/vp/yhzivpjrupaijmjbfzz7qwefmaq.png"><br><br>  <b>NetBeans 8.1 / 10.0</b> - Eu costumava usar esse IDE para Java, fui lembrado como um software bom e leve, com todas as funcionalidades necess√°rias.  Para C ++, ele possui um plugin desenvolvido n√£o pela comunidade, mas diretamente pelo NetBeans.  Para projetos em C ++, existe uma depend√™ncia bastante dif√≠cil do make e do gcc.  O editor de c√≥digo √© agrad√°vel.  N√£o encontrei uma coisa muito simples no gerador de c√≥digo do modelo: adicionamos um novo m√©todo no arquivo de cabe√ßalho da classe - voc√™ precisa gerar o corpo do m√©todo em um arquivo cpp - n√£o sabe como.  O grau de "entendimento" do c√≥digo √© m√©dio, parece que algo est√° analisando, mas algo n√£o est√°.  Por exemplo, iterar em um mapa com um iterador autom√°tico j√° √© dif√≠cil para ele.  Ele xinga macros do Google Test.  Personalizar o comando build √© problem√°tico - no Linux com gcc e disponibilizar (isso apesar do fato de que outro sistema de build j√° est√° em uso), ele funcionar√°, no Windows exigir√° MinGW, mas mesmo se o fizer, ele se recusar√° a compilar.  Em geral, √© poss√≠vel trabalhar no NetBeans com C ++, mas eu n√£o diria que √© confort√°vel; provavelmente preciso realmente amar esse ambiente para n√£o notar suas v√°rias feridas. <br><br><img src="https://habrastorage.org/webt/bi/dh/h4/bidhh4mda-r7cqkqd6q9vnu4t4o.png"><br><br><img src="https://habrastorage.org/webt/ze/yp/j1/zeypj1bdofeuljkgfp9wyfdxebc.png"><br><br>  <b>KDevelop 5.3.1</b> - j√° foi concebido como uma ferramenta de desenvolvedor para o KDE (Linux), mas agora existe uma vers√£o para Windows.  Possui um editor de c√≥digo r√°pido e agrad√°vel, com belo destaque de sintaxe (baseado no Kate).  N√£o funcionar√° para adulterar o sistema de compila√ß√£o esquerdo - para ele, o principal sistema de compila√ß√£o √© o CMake.  √â tolerante aos cabe√ßalhos MSVC e Windows SDK, em qualquer caso, printf e std :: string n√£o levam exatamente a um estupor como um CDT do Eclipse.  Um auxiliar muito r√°pido para escrever c√≥digo - oferece boas op√ß√µes de conclus√£o quase imediatamente durante a digita√ß√£o.  Tem uma oportunidade interessante para gerar c√≥digo de modelo: voc√™ pode escrever seu pr√≥prio modelo e coloc√°-lo online.  Ao criar a partir de um modelo, voc√™ pode conectar-se ao banco de dados de modelos prontos e fazer o download do que desejar.  A √∫nica coisa que incomoda: o modelo interno para criar uma nova classe funciona de maneira torta no Windows e no Linux.  O assistente para criar uma classe possui v√°rias janelas nas quais voc√™ pode configurar muitas coisas: quais construtores s√£o necess√°rios, quais membros da classe etc.  Mas, na fase final do Windows, algum tipo de erro aparece a tempo de tornar o texto imposs√≠vel e dois arquivos he cpp s√£o criados no tamanho de 1 byte.  No Linux, por algum motivo, voc√™ n√£o pode selecionar construtores - a guia est√° vazia e apenas o arquivo de cabe√ßalho √© gerado corretamente na sa√≠da.  Em geral, as doen√ßas da inf√¢ncia por um produto t√£o maduro parecem, de alguma forma, fr√≠volas. <br><br><img src="https://habrastorage.org/webt/gb/e_/dt/gbe_dtwtphcqqvxpankzo5k8oqy.png"><br><br><img src="https://habrastorage.org/webt/kp/ap/hf/kpaphf1yrtwflj68xusgqlh2ppa.png"><br><br>  <b>QtCreator 4.8.1 (edi√ß√£o de c√≥digo aberto)</b> - provavelmente, tendo ouvido esse nome, voc√™ est√° perplexo com a forma como esse monstro foi preso aqui no Qt com um kit de distribui√ß√£o de gigabytes com um gancho.  Mas esta √© uma vers√£o "leve" do ambiente para projetos gen√©ricos.  Seu kit de distribui√ß√£o pesa apenas cerca de 150 MB e n√£o cont√©m itens espec√≠ficos do Qt: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">download.qt.io/official_releases/qtcreator/4.8</a> . <br>  Na verdade, ele pode fazer quase tudo o que escrevi nos meus requisitos, de maneira r√°pida e correta.  Ele analisa os cabe√ßalhos padr√£o do Windows e Linux, personaliza-o para qualquer sistema de compila√ß√£o, sugere op√ß√µes de conclus√£o, gera convenientemente novas classes, corpos de m√©todos, permite refatora√ß√£o e navega√ß√£o de c√≥digo.  Se voc√™ quer trabalhar confortavelmente sem pensar constantemente em como superar esse ou aquele problema, faz sentido olhar para o QtCreator. <br><br><img src="https://habrastorage.org/webt/w-/6j/ei/w-6jeizzjkklvumkpdjl5oe_mou.png"><br><br><img src="https://habrastorage.org/webt/au/zb/ot/auzbot8u_iam14q88qjedkdmzvu.png"><br><br>  Na verdade, resta falar sobre o que eu n√£o tinha o suficiente em Gradle para funcionar totalmente: integra√ß√£o com o IDE.  Para que o sistema gere arquivos de projeto para o pr√≥prio IDE, nos quais os comandos para a constru√ß√£o do projeto j√° estejam gravados, todos os arquivos de origem s√£o listados, s√£o necess√°rios caminhos para procurar arquivos de cabe√ßalho e determinar. <br><br>  Para esse prop√≥sito, escrevi um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plugin para o Gradle `cpp-ide-generator`</a> e publiquei no Gradle Plugin Portal. <br><br>  O plugin s√≥ pode ser usado com `cpp-application`,` cpp-library` e `cpp-unit-test`. <br>  Aqui est√° um exemplo de seu uso em <i>build.gradle</i> : <br><br><pre> <code class="java hljs"> plugins { id <span class="hljs-string"><span class="hljs-string">'cpp-library'</span></span> id <span class="hljs-string"><span class="hljs-string">'maven-publish'</span></span> id <span class="hljs-string"><span class="hljs-string">'cpp-unit-test'</span></span> id <span class="hljs-string"><span class="hljs-string">'org.bitbucket.akornilov.cpp-ide-generator'</span></span> version <span class="hljs-string"><span class="hljs-string">'0.3'</span></span> } library { <span class="hljs-comment"><span class="hljs-comment">// Library specific parameters } // Configuration block of plugin: ide { autoGenerate = false eclipse = true qtCreator = true netBeans = true kdevelop = true }</span></span></code> </pre><br>  O plugin suporta a integra√ß√£o com todos os ambientes de desenvolvimento gr√°fico acima, mas no bloco de configura√ß√£o do plugin, voc√™ pode desativar o suporte a IDEs desnecess√°rios: <br><br><pre> <code class="java hljs"> kdevelop = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br>  Se o par√¢metro <i>autoGenerate estiver</i> definido como true, os arquivos do projeto para todos os IDEs permitidos ser√£o gerados automaticamente durante a constru√ß√£o.  Al√©m disso, no modo de gera√ß√£o autom√°tica, os arquivos do projeto ser√£o exclu√≠dos quando a compila√ß√£o for limpa: <i>gradle clean</i> . <br><br>  A gera√ß√£o incremental √© suportada, ou seja,  somente os arquivos que exigem uma atualiza√ß√£o real ser√£o atualizados. <br><br>  Aqui est√° uma lista de objetivos que o plug-in adiciona: <br><br><ul><li>  generateIde - gera arquivos de projeto para todos os IDEs permitidos. </li><li>  cleanIde - exclua os arquivos do projeto para todos os IDEs permitidos. </li><li>  generateIde [name] - gera arquivos de projeto para o IDE com o nome fornecido (o IDE deve ser permitido), por exemplo generateIdeQtCreator. </li><li>  Nomes dispon√≠veis: Eclipse, NetBeans, QtCreator, KDevelop. </li><li>  cleanIde [nome] - exclua os arquivos do projeto para o IDE com o nome fornecido, por exemplo, cleanIdeQtCreator. </li></ul><br>  Durante a gera√ß√£o, o plug-in "fareja" a compila√ß√£o e extrai dela todas as informa√ß√µes necess√°rias para criar arquivos de projeto.  Ap√≥s abrir o projeto no IDE, todos os arquivos de origem devem estar vis√≠veis, os caminhos para todos os cabe√ßalhos devem ser registrados, bem como os comandos b√°sicos de constru√ß√£o - build / clear, s√£o configurados. <br><br>  O segundo plugin que eu tive que fazer √© chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">`cpp-build-tuner`</a> e tamb√©m funciona em conjunto com cpp-application`,` cpp-library` e `cpp-unit-test`. <br><br>  O plug-in n√£o possui configura√ß√µes, basta apenas envi√°-lo: <br><br><pre> <code class="java hljs"> plugins { id <span class="hljs-string"><span class="hljs-string">'cpp-library'</span></span> id <span class="hljs-string"><span class="hljs-string">'maven-publish'</span></span> id <span class="hljs-string"><span class="hljs-string">'cpp-unit-test'</span></span> id <span class="hljs-string"><span class="hljs-string">'org.bitbucket.akornilov.cpp-build-tuner'</span></span> version <span class="hljs-string"><span class="hljs-string">'0.5'</span></span> }</code> </pre><br>  O plug-in realiza pequenas manipula√ß√µes com as configura√ß√µes das cadeias de ferramentas (compilador e vinculador) para diferentes op√ß√µes de compila√ß√£o - Debug and Release.  MSVC, gcc, CLang s√£o suportados. <br><br>  Isso √© especialmente verdadeiro para o MSVC, porque, por padr√£o, como resultado da compila√ß√£o do release, voc√™ obt√©m um bin√°rio "arrojado" e n√£o est√©tico com informa√ß√µes do bazhdash e uma biblioteca padr√£o vinculada estaticamente.  Eu ‚Äúespiei‚Äù parte das configura√ß√µes do MSVC no Visual Studio, que por padr√£o ele adiciona aos seus projetos C ++.  Para o gcc / CLang e o MSVC, as otimiza√ß√µes de tempo do link est√£o inclu√≠das no perfil de Libera√ß√£o. <br><br>  <i>Nota: Os plug-ins foram testados com a vers√£o mais recente do Gradle v5.2.1 e n√£o foram testados quanto √† compatibilidade com vers√µes anteriores.</i> <br><br>  Os c√≥digos-fonte dos plug-ins, bem como exemplos simples de uso do Gradle para bibliotecas: est√°tica e din√¢mica, bem como o aplicativo que os utiliza, podem ser visualizados: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bitbucket.org/akornilov/tools</a> next gradle / cpp. <br><br>  Os exemplos tamb√©m mostram como usar o Google Test para bibliotecas de testes de unidade. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Reposit√≥rio Maven com o Google Test v1.8.1, constru√≠do em Gradle (sem simula√ß√£o).</a> <br><br>  <b>UPD:</b> <br><br>  As vers√µes para Windows do <b>QtCrear</b> anteriores √† <b>4.6.2</b> (e pelo menos no momento em que <b>escrev√≠amos</b> essas linhas, inclusive a <b>4.10</b> ) esqueceram como entender o MSVC SDK.  Todo o std :: space est√° sublinhado em vermelho e se recusa a indexar.  Portanto, no momento, a vers√£o 4.6.2 √© mais adequada para trabalhar no Windows. <br><br>  Uma nova vers√£o do plugin <code>cpp-build-tuner</code> <b>v1.0</b> foi lan√ßada (e o <code>cpp-ide-generator</code> <b>v0.5</b> s√£o pequenas melhorias). <br>  1) Adicionado bloco de configura√ß√£o ao <code>cpp-build-tuner</code> . <br><pre> <code class="javascript hljs">buildTuner { lto = <span class="hljs-literal"><span class="hljs-literal">false</span></span> gtest = <span class="hljs-string"><span class="hljs-string">'1.8.1'</span></span> libraries { common = [<span class="hljs-string"><span class="hljs-string">'cutils.lib'</span></span>] windows = [<span class="hljs-string"><span class="hljs-string">'ole32'</span></span>, <span class="hljs-string"><span class="hljs-string">'user32'</span></span>] linux = [<span class="hljs-string"><span class="hljs-string">'pthread'</span></span>, <span class="hljs-string"><span class="hljs-string">'z'</span></span>] } libDirs.common = [<span class="hljs-string"><span class="hljs-string">'../build/debug'</span></span>, <span class="hljs-string"><span class="hljs-string">'../release'</span></span>] }</code> </pre><br>  <b>lto</b> (booleano) - habilita ou desabilita o LTO para a compila√ß√£o do release.  Ativado por padr√£o. <br><br>  <b>gtest</b> (string) - adiciona suporte ao Google Test para testes de unidade.  Atualmente, apenas a vers√£o 1.8.1 √© suportada para GCC, MinGW-W64 e MSVC. <br><br>  <b>bibliotecas</b> (cont√™iner) - uma lista de bibliotecas para vincula√ß√£o.  Dentro do cont√™iner, existem tr√™s campos (lista de linhas): <code>common</code> - bibliotecas para qualquer plataforma, <code>windows</code> - apenas para Windows e <code>linux</code> - apenas para Linux. <br><br>  <b>libDirs</b> (container) - uma lista de pastas para pesquisar bibliotecas com um vinculador.  A estrutura do cont√™iner √© igual √† lista da biblioteca. <br><br>  2) Adicionada a capacidade de executar aplicativos para o aplicativo <code>cpp-application</code> .  O plug-in adiciona tarefas adicionais ao projeto para isso: <code>run</code> , <code>runDebug</code> (o mesmo que <code>run</code> ) e <code>runRelease</code> .  As tarefas dependem de <code>assemble</code> , <code>assembleDebug</code> e <code>assembleRelease</code> respectivamente. <br>  Como o plug-in Java Application padr√£o, voc√™ pode passar par√¢metros de linha de comando na inicializa√ß√£o: <code>gradle run --args="arg1 arg2 ..."</code> . <br><br>  <b>UPD</b> <br><br>  Em conex√£o com a mudan√ßa de plugins de hospedagem, o grupo foi alterado: <br><pre> <code class="javascript hljs">plugins { id <span class="hljs-string"><span class="hljs-string">'loggersoft.cpp-build-tuner'</span></span> version <span class="hljs-string"><span class="hljs-string">'1.1'</span></span> id <span class="hljs-string"><span class="hljs-string">'loggersoft.cpp-ide-generator'</span></span> version <span class="hljs-string"><span class="hljs-string">'0.5'</span></span> }</code> </pre><br><br>  Novo endere√ßo do projeto: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gradle-cpp.sourceforge.io</a> <br><br>  Documenta√ß√£o: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sourceforge.net/p/gradle-cpp/wiki/cpp-build-tuner</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sourceforge.net/p/gradle-cpp/wiki/cpp-ide-generator</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442682/">https://habr.com/ru/post/pt442682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442672/index.html">Como dar feedback: 9 regras</a></li>
<li><a href="../pt442674/index.html">Inst√¢ncias de seguran√ßa da informa√ß√£o na plataforma attackdefense.com</a></li>
<li><a href="../pt442676/index.html">Onde os sonhos levam: subterr√¢neo</a></li>
<li><a href="../pt442678/index.html">Maior projeto em litografia est√©reo: esqueleto gigantesco impresso em uma impressora 3D</a></li>
<li><a href="../pt442680/index.html">As tecnologias de substitui√ß√£o sensorial permitir√£o ver o mundo com a ajuda dos sons: como funciona a neuroplasticidade do c√©rebro humano</a></li>
<li><a href="../pt442684/index.html">Desempenho equilibrado do site. Parte 3: Conte√∫do</a></li>
<li><a href="../pt442686/index.html">Tutorial do DataPower</a></li>
<li><a href="../pt442688/index.html">An√°lise de dados Scala - uma necessidade urgente ou uma oportunidade agrad√°vel?</a></li>
<li><a href="../pt442690/index.html">Miss√£o lunar "Bereshit" - selfie no fundo da Terra</a></li>
<li><a href="../pt442692/index.html">Blockchain sem intermedi√°rios: como enviamos t√≠tulos para um registro distribu√≠do</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>