<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è™ ‚òÄÔ∏è üí™üèΩ La s√©curit√© dans AEM est-elle un probl√®me de plate-forme ou d'impl√©mentation? üëåüèº üßìüèæ üòë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publi√© par: Andrey Pinchuk | D√©veloppeur AEM senior certifi√© 



 Imaginez la situation: vous dormez paisiblement et voyez votre troisi√®me r√™ve, quand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La s√©curit√© dans AEM est-elle un probl√®me de plate-forme ou d'impl√©mentation?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468231/">  <b>Publi√© par: Andrey Pinchuk</b> |  D√©veloppeur AEM senior certifi√© <br><br><p> Imaginez la situation: vous dormez paisiblement et voyez votre troisi√®me r√™ve, quand soudain un t√©l√©phone sonne - un client insatisfait se plaint que tout le syst√®me n'est pas disponible.  D'accord, de tels √©v√©nements g√™nent la vie du d√©veloppeur AEM, de toute l'√©quipe et du fournisseur de solutions.  Il n'y a rien √† faire, une lev√©e pr√©coce et une recherche de solution √† venir. </p><br><p>  Pour √©viter que de tels moments de joie ne se produisent dans votre vie professionnelle, je vais vous parler des probl√®mes de s√©curit√© typiques et comment mieux vous prot√©ger contre eux. <br><br><img src="https://habrastorage.org/webt/2p/ca/zq/2pcazqfyuk50yhozwz437lgg6ok.png"><br><a name="habracut"></a><br></p><p>  J'adh√©rerai √† un tel plan: </p><br><ol><li>  S√©curit√© au niveau de l'auteur; </li><li>  Publier le niveau de s√©curit√©; </li><li>  S√©curit√© du r√©partiteur </li><li>  Protection du cadre CSRF; </li><li>  Attaques DDoS. </li></ol><p></p><br><h3>  Conseils de s√©curit√© de base d'Adobe Experience Manager </h3><br><p>  Le monde des projets AEM deviendra encore meilleur si chaque d√©veloppeur a une compr√©hension commune de la fa√ßon de prot√©ger la plate-forme contre les fuites de donn√©es en g√©n√©ral.  Selon le sch√©ma ci-dessous, nous avons un auteur, plusieurs √©diteurs et deux ou plusieurs r√©partiteurs (les soi-disant √©quilibreurs).  En fait, ces trois niveaux m√©ritent une attention particuli√®re en termes de protection des donn√©es.  Ce sont les r√®gles de travail classiques qui sont g√©n√©ralement accept√©es dans la communaut√© AEM du monde entier. </p><br><img src="https://habrastorage.org/webt/yd/_b/b3/yd_bb3wjvrc6-qsjbfdu456ldjo.png"><br><br><p>  <b>1. Utilisez HTTPS</b> .  AEM √©volue rapidement, offrant la flexibilit√© de cr√©er un auteur sur un autre protocole plus s√©curis√©.  Il suffit de g√©n√©rer la cl√© ¬´SSL Wizard¬ª, de lui cr√©er un chemin d'acc√®s et donc d'utiliser un protocole plus s√©curis√©.  Dans les recommandations d'Adobe, cette √©tape est pr√©cis√©ment la premi√®re priorit√© en mati√®re de s√©curit√©. </p><br><p>  <b>2. Installez les packages avec les derni√®res mises √† jour.</b>  Le processus standard du d√©veloppeur se r√©sume au fait que lorsque vous travaillez sur des composants et des services, vous devez rechercher des solutions dans Google.  L'objectif de cette √©tape est de surveiller r√©guli√®rement le Service Pack et les correctifs.  Ensuite, de nombreux probl√®mes disparaissent, y compris ceux li√©s √† la s√©curit√© des donn√©es.  Bien que ce ne soit pas une panac√©e, l'important est de maintenir le syst√®me √† jour. </p><br><img src="https://habrastorage.org/webt/a9/sq/mc/a9sqmc0pb_yexkdabwazbcjot1q.png"><br><br><p>  <b>3. Cr√©ation de pages soign√©es avec des messages d'erreur.</b>  Si vous cr√©ez initialement une page avec une br√®ve description de l'erreur, le client verra imm√©diatement qu'elle ne fonctionne pas, tandis que le d√©veloppeur sera d√©j√† en train de r√©soudre le probl√®me.  Il est logique que ces informations ne passent pas par vous, mais vous √©viterez la panique du client et des testeurs, la confusion dans les t√¢ches. </p><br><p>  <b>4. Refusez de d√©finir un mot de passe et connectez-vous sur ¬´admin-admin¬ª.</b>  Ce ne serait pas dr√¥le, mais le probl√®me avec un identifiant et un mot de passe de mauvaise qualit√© est assez fr√©quent m√™me dans AEM.  En cons√©quence, dans la poursuite de la vitesse ou d'autres consid√©rations, nous obtenons le syst√®me le plus vuln√©rable.  Une fois que vous avez constat√© que les informations de connexion primitives sont configur√©es, essayez de convaincre l'√©quipe / les sup√©rieurs et de les remplacer par des plus fiables d√®s que possible. </p><br><h3>  S√©curit√© au niveau de l'auteur </h3><br><p>  Tout d'abord, <b>utilisez vpn</b> .  L'utilisation de Virtual Protected Network est le travail d'un r√©seau priv√© s√©curis√© pour √©tablir une connexion s√©curis√©e entre vous et le serveur.  Il s'agit d'un outil simple et important: √©tant donn√© que votre trafic sera crypt√©, il est impossible de savoir d'o√π vous envoyez vos donn√©es.  Il s'av√®re qu'avec vPn, personne ne pourra acc√©der √† votre instance. </p><br><p>  Cette approche convient aux d√©veloppeurs distants et √† tous ceux dont le travail est effectu√© √† partir de diff√©rents emplacements avec une connexion Internet instable. </p><br><p>  Deuxi√®mement, <b>votre ¬´auteur¬ª doit toujours √™tre ferm√©, y compris de Google</b> .  Vous pouvez donc r√©cup√©rer un mot de passe et pirater le syst√®me: par n√©gligence, l'auteur peut √™tre index√©.  Pour v√©rifier votre vuln√©rabilit√© dans un moteur de recherche, saisissez dans sa ligne votre domaine et auteur et le chemin vers crx.  Oui, vous pouvez contacter Yandex ou Google avec une demande de suppression d'une telle ligne dans le SERP.  Mais, pendant que le probl√®me est r√©solu, le syst√®me sera d√©j√† accessible au public. </p><br><img src="https://habrastorage.org/webt/rr/7f/j2/rr7fj2hxg9y-1d5ltu-oryk_dyy.png"><br><br><p>  Troisi√®mement, <b>ne sous-estimez pas les privil√®ges de l'utilisateur ¬´admin¬ª</b> , qui a le plus souvent la possibilit√© d'effectuer toutes les op√©rations disponibles. </p><br><p>  Ceci est particuli√®rement critique au moment o√π un employ√© dit au revoir √† l'entreprise.  En effet, pour la plupart des entreprises, l'acc√®s √† l'instance n'est pas personnel, mais via un seul compte administrateur.  Il est plus logique de faire le contraire et d'√™tre conscient des changements sp√©cifiques dans le syst√®me d'un auteur sp√©cifique. </p><br><p>  AEM 6.1 a introduit une nouvelle approche dans laquelle vous pouvez d√©finir des droits sp√©cifiques pour un bundle ou un service utilisateur.  Mais il vaut mieux faire un profil personnalis√©: c'est agr√©able pour l'employ√©, et il est plus facile pour l'entreprise de savoir qui a quels niveaux d'acc√®s au syst√®me.  Cette approche est pertinente pour les niveaux d'auteur et d'√©diteur. </p><br><h3>  Publier la s√©curit√© </h3><br><p>  En r√®gle g√©n√©rale, ce n'est qu'apr√®s une longue p√©riode sur le projet qu'ils remarquent qu'ils n'ont pas v√©rifi√© l'utilisateur anonyme.  Et tandis qu'un utilisateur ordinaire peut avoir des restrictions sur les op√©rations, un utilisateur anonyme - cela arrive souvent, a beaucoup plus de droits pour effectuer des op√©rations. </p><br><br><br><p>  Le filtre de <b>r√©f√©rence Apache Sling</b> est un m√©canisme pratique et efficace pour s√©curiser votre application.  Par exemple, pour envoyer des mesures √† AEM, vous voyez des informations sur l'envoi de donn√©es dans la bo√Æte de r√©ception.  Si vous d√©passez la valeur par d√©faut, un syst√®me tiers peut envoyer cette demande.  Cela signifie que personne ne pourra envoyer de demande.  Vous entrez le domaine dans la configuration; au moment de la demande, il le compare avec les donn√©es initialement saisies et, si tout concorde, l'int√©gration a lieu. </p><br><p>  Il s'av√©rera effectuer une configuration plus flexible avec le filtre: vous pouvez sp√©cifier la requ√™te, la m√©thode, l'h√¥te.  Il existe √©galement une valeur vide ou un ast√©risque pour des requ√™tes plus d√©taill√©es. </p><br><img src="https://habrastorage.org/webt/fy/t4/bk/fyt4bkzbztvzsanwyl9ccketyg4.png"><br><br><h3>  S√©curit√© au niveau du r√©partiteur </h3><br><p>  Les d√©veloppeurs sont confront√©s √† des diff√©rends dans 10% des cas.  Il s'agit donc du fichier de configuration principal, o√π nous d√©finissons le type d'URL (interdire / autoriser). </p><br><img src="https://habrastorage.org/webt/7v/rk/2z/7vrk2zbjsetu9dnsqear1msjc2k.png"><br><p>  Habituellement, les d√©veloppeurs font une petite t√¢che, cr√©ent une r√®gle et oublient que cela ajoutera de la vuln√©rabilit√©.  Pour que personne n'essaie d'attaquer votre instance, vous devez v√©rifier l'URL avec les s√©lecteurs au moment de la disponibilit√©. </p><br><p>  Gr√¢ce au fichier de configuration, vous pouvez sp√©cifier le traitement des en-t√™tes.  Parce que plus vous pr√©cisez le zag, la m√©thode, etc., un param√®tre aussi d√©taill√© ne cassera certainement rien.  Ce sont des exemples √©l√©mentaires.  Et s'il existe des centaines de r√®gles de ce type et que leur navigation est plus difficile? </p><br><p>  Le moyen le plus simple consiste √† activer la journalisation.  Selon la version d'Apache, le m√©canisme de travail peut l√©g√®rement changer.  Mais le syst√®me vous indiquera imm√©diatement quelle URL quelle r√®gle particuli√®re fonctionne pour vous et ce qui doit encore √™tre corrig√©. </p><br><p>  Vous pouvez √©galement sp√©cifier des domaines dans les r√®gles: il s'agit d'une r√©f√©rence √† l'int√©gration. <br>  Une fois que le r√©partiteur est utilis√© pour la mise en cache, les demandes sont ex√©cut√©es plusieurs fois plus rapidement: vous n'avez pas besoin d'aller nulle part et de v√©rifier, et vous pouvez imm√©diatement l'envoyer au client.  De plus, cette m√©thode am√©liore consid√©rablement la s√©curit√© de votre application. </p><br><p>  <b>Cross Site Request Forgery</b> - fausse demande. </p><br><img src="https://habrastorage.org/webt/9k/w7/60/9kw7603ebineyd4p_q09k1knkqa.png"><br><p>  Principe g√©n√©ral du CSRF: supposons que vous utilisiez votre compte sur le site Internet de la banque.  Apr√®s autorisation, vous disposez d'une session standard avec les cookies dans le navigateur, vous recevez un email et suivez le lien vers un site suspect.  Sur celui-ci, un attaquant a int√©gr√© un formulaire, √† l'issue duquel vos donn√©es sont envoy√©es sur le site Internet de la banque. </p><br><p>  Le point est dans le protocole HTTP.  Un attaquant n'a pas besoin de beaucoup de donn√©es: cette requ√™te est suffisante.  Le serveur bancaire verra: une demande est arriv√©e, il y a des cookies et une session, tout va bien.  C'est ainsi que fonctionnent les attaques typiques. </p><br><p>  <b>Que peut apporter AEM pour emp√™cher la falsification des requ√™tes</b> <br>  Un exemple classique de protection est la g√©n√©ration d'un "secret" dans une cha√Æne.  Lorsque le formulaire est g√©n√©r√©, ce jeton secret est ajout√© √† partir du champ cach√©.  Si vous vous rendez sur le site de l'attaquant, le syst√®me d√©tectera l'absence d'un token ou son invalidit√© et refusera d'envoyer des donn√©es.  Parfois, ils prot√®gent les utilisateurs eux-m√™mes. </p><br><p>  Vous avez maintenant un ajack r√©gulier, dans lequel vous ne pouvez pas ajouter de champ masqu√©.  Au stade de l'autorisation, le serveur vous renvoie un cookie avec un nom avec SCRF, le transf√®re dans l'en-t√™te, l'envoie au serveur.  Vous avez donc sign√© la demande. </p><br><h3>  AEM fera tout pour vous: il g√©n√©rera des cl√©s, des jetons, il v√©rifiera la soumission du formulaire </h3><br><p>  Il y a des cas o√π une application est √©crite dans React et il y a un moment difficile avec l'int√©gration.  AEM a pris cette situation en compte: il suffit d'aller sur inpoint et de la signer pour v√©rification.  Convient lors de l'utilisation de composants et de biblioth√®ques non standard. </p><br><img src="https://habrastorage.org/webt/vr/ol/di/vroldiimo4y2eqxgn15b_ywjgba.png"><br><p>  <b>Que peut-on faire d'autre pour prot√©ger le syst√®me:</b> <br></p><ul><li>  Les biblioth√®ques qui en sont responsables.  Cela n'a aucun sens d'ajouter jusqu'√† ce que vous cassiez quoi que ce soit. </li><li>  Au bas niveau, vous pouvez voir tous les ¬´secrets¬ª.  Il s'agit d'une sorte de validation de vos donn√©es. </li><li>  C'est simple: il y a une API pr√™te √† l'emploi et vous √™tes d√©j√† prot√©g√© contre ce type d'attaque. </li></ul><p></p><br><h3>  Attaque DDOS - la deuxi√®me attaque la plus populaire </h3><br><p>  L'objectif est d'√©puiser les capacit√©s physiques du serveur.  Des millions de demandes sont faites sur un h√¥te.  Quand ils deviennent infiniment nombreux, le syst√®me commence physiquement √† ne pas faire face.  En r√®gle g√©n√©rale, ils attaquent puissamment √† partir de plusieurs sources et utilisent un VPN.  100% de ce montant n'est pas assur√©;  mais ne les aidons pas. </p><br><img src="https://habrastorage.org/webt/uz/w_/vz/uzw_vzpogptidow1qta7i5dbl5i.png"><br><p>  Dans quels cas le syst√®me est vuln√©rable: <br><br></p><ul><li>  Configurez le syst√®me avec le mauvais suffixe; </li><li>  Il y a beaucoup de demandes d'avs, le r√©partiteur sur le public ne peut pas les transmettre; </li><li>  Lorsqu'il n'est pas interdit d'afficher un nombre illimit√© de n≈ìuds de contenu.  En particulier, le rendu JSON, qui peut traverser l'arborescence √† plusieurs niveaux. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">localhost</a> : 4502 / .json peut vider l'int√©gralit√© du r√©f√©rentiel au format JSON. </li></ul><p></p><br><p>  Pour rendre votre travail sur AEM plus s√ªr, concentrez-vous sur les capacit√©s d'utilisateurs sp√©cifiques. </p><br><p>  N'oubliez pas de parcourir la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste de contr√¥le de s√©curit√© Adobe</a> et de laisser tout stable avec votre projet sur AEM. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468231/">https://habr.com/ru/post/fr468231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468219/index.html">M√©canismes d'extensibilit√© extensible en JavaScript</a></li>
<li><a href="../fr468223/index.html">Habr Weekly # 19 / BT-porte pour le chat, pourquoi l'IA triche, que demander au futur employeur, une journ√©e avec iPhone 11 Pro</a></li>
<li><a href="../fr468225/index.html">R√©duction des tailles de bundle avec Webpack Analyzer et React Lazy / Suspense</a></li>
<li><a href="../fr468227/index.html">Acc√©l√©ration instagram.com. partie 1</a></li>
<li><a href="../fr468229/index.html">Une note sur void en JavaScript et TypeScript</a></li>
<li><a href="../fr468233/index.html">La fa√ßon de taper la v√©rification de 4 millions de lignes de code Python. partie 1</a></li>
<li><a href="../fr468235/index.html">La fa√ßon de taper la v√©rification de 4 millions de lignes de code Python. 2e partie</a></li>
<li><a href="../fr468237/index.html">La fa√ßon de taper la v√©rification de 4 millions de lignes de code Python. 3e partie</a></li>
<li><a href="../fr468239/index.html">Choisir la bonne structure de donn√©es dans Swift</a></li>
<li><a href="../fr468241/index.html">TR-069 chez Mikrotik. Test de Freeacs en tant que serveur de configuration automatique pour RouterOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>