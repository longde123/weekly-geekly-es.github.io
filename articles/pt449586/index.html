<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§±üèº üìë üôÜüèæ O dif√≠cil princ√≠pio da responsabilidade exclusiva ‚òùüèø üëâüèª üí´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antecedentes 
 Nos √∫ltimos dois anos, participei de um grande n√∫mero de entrevistas. Em cada uma delas, perguntei aos recorrentes sobre o princ√≠pio da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O dif√≠cil princ√≠pio da responsabilidade exclusiva</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449586/"><h1>  Antecedentes </h1><br>  Nos √∫ltimos dois anos, participei de um grande n√∫mero de entrevistas.  Em cada uma delas, perguntei aos recorrentes sobre o princ√≠pio da responsabilidade exclusiva (adiante designado SRP).  E a maioria das pessoas n√£o sabe nada sobre o princ√≠pio.  E mesmo daqueles que sabiam ler a defini√ß√£o, quase ningu√©m sabia dizer como eles usam esse princ√≠pio em seu trabalho.  Eles n√£o podiam dizer como o SRP afeta o c√≥digo que eles escrevem ou a revis√£o de c√≥digo dos colegas.  Alguns deles tamb√©m tiveram a id√©ia errada de que o SRP, como todo o SOLID, √© relevante apenas para a programa√ß√£o orientada a objetos.  Al√©m disso, muitas vezes as pessoas n√£o conseguiam identificar casos √≥bvios de viola√ß√£o desse princ√≠pio, simplesmente porque o c√≥digo foi escrito no estilo recomendado pela estrutura conhecida. <br>  Redux √© um excelente exemplo de uma estrutura cuja diretriz viola o SRP. <br><a name="habracut"></a><br><h1>  Assuntos SRP </h1><br>  Quero come√ßar com o valor desse princ√≠pio, com os benef√≠cios que ele traz.  E tamb√©m quero observar que o princ√≠pio se aplica n√£o apenas ao POO, mas tamb√©m √† programa√ß√£o procedural, funcional e at√© declarativa.  O HTML, como representante deste √∫ltimo, pode e deve ser decomposto, especialmente agora quando √© controlado por estruturas de interface do usu√°rio, como React ou Angular.  Al√©m disso, o princ√≠pio se aplica a outras √°reas de engenharia.  E n√£o apenas a engenharia, havia uma express√£o em assuntos militares: ‚Äúdividir e conquistar‚Äù, que em geral √© a personifica√ß√£o do mesmo princ√≠pio.  A complexidade mata, divide-a em partes e voc√™ ganha. <br>  Em rela√ß√£o a outras √°reas de engenharia, aqui, no hub, havia um artigo interessante sobre como as aeronaves desenvolvidas falharam nos motores, n√£o mudaram para reverter ao comando do piloto.  O problema era que eles interpretaram mal o estado do chassi.  Em vez de confiar nos sistemas que controlam o chassi, o controlador do motor l√™ diretamente os sensores, interruptores de limite etc. localizados no chassi.  Tamb√©m foi mencionado no artigo que o motor deve passar por uma certifica√ß√£o longa antes mesmo de ser colocado em um prot√≥tipo de aeronave.  E a viola√ß√£o do SRP nesse caso claramente levou ao fato de que, ao alterar o design do chassi, o c√≥digo no controlador do motor precisava ser modificado e certificado novamente.  Pior ainda, uma viola√ß√£o desse princ√≠pio quase valia o avi√£o e a vida do piloto.  Felizmente, nossa programa√ß√£o di√°ria n√£o amea√ßa essas conseq√º√™ncias; no entanto, voc√™ ainda n√£o deve negligenciar os princ√≠pios de escrever um bom c√≥digo.  E aqui est√° o porqu√™: <br><br><ol><li>  A decomposi√ß√£o do c√≥digo reduz sua complexidade.  Por exemplo, se resolver um problema exigir que voc√™ escreva c√≥digo com uma complexidade ciclom√°tica de quatro, o m√©todo respons√°vel por resolver dois desses problemas ao mesmo tempo exigir√° c√≥digo com complexidade 16. Se for dividido em dois m√©todos, a complexidade total ser√° 8. Claro, isso nem sempre √© se resume √† quantia em rela√ß√£o ao trabalho, mas a tend√™ncia ser√° aproximadamente a mesma. </li><li>  O teste de unidade do c√≥digo decomposto √© simplificado e mais eficiente. </li><li>  O c√≥digo decomposto cria menos resist√™ncia √† mudan√ßa.  Ao fazer altera√ß√µes, √© menos prov√°vel que cometa um erro. </li><li>  O c√≥digo est√° ficando melhor estruturado.  Procurar algo no c√≥digo organizado em arquivos e pastas √© muito mais f√°cil do que em um grande cal√ßado. </li><li>  A separa√ß√£o do c√≥digo padr√£o da l√≥gica de neg√≥cios leva ao fato de que a gera√ß√£o de c√≥digo pode ser aplicada em um projeto. </li></ol><br>  E todos esses sinais andam juntos, s√£o sinais do mesmo c√≥digo.  Voc√™ n√£o precisa escolher entre, por exemplo, c√≥digo bem testado e c√≥digo bem estruturado. <br><br><h1>  Defini√ß√µes existentes n√£o funcionam </h1><br>  Uma das defini√ß√µes √©: "deve haver apenas um motivo para alterar o c√≥digo (classe ou fun√ß√£o)".  O problema com esta defini√ß√£o √© que ela entra em conflito com o princ√≠pio de abertura / fechamento, o segundo do grupo de princ√≠pios do SOLID.  Sua defini√ß√£o: "o c√≥digo deve estar aberto para extens√£o e fechado para mudan√ßa".  Uma raz√£o para a mudan√ßa versus proibi√ß√£o total da mudan√ßa.  Se revelarmos mais detalhadamente o que se entende aqui, verifica-se que n√£o h√° conflito entre os princ√≠pios, mas h√° definitivamente um conflito entre defini√ß√µes difusas. <br><br>  A segunda defini√ß√£o mais direta √©: "o c√≥digo deve ter apenas uma responsabilidade".  O problema com esta defini√ß√£o √© que √© da natureza humana generalizar tudo. <br><br>  Por exemplo, existe uma fazenda que cultiva galinhas e, nesse momento, a fazenda tem apenas uma responsabilidade.  E ent√£o a decis√£o √© tomada para criar patos l√° tamb√©m.  Instintivamente, chamaremos isso de avicultura, em vez de admitir que agora existem duas responsabilidades.  Adicione ovelhas l√°, e agora √© uma fazenda de animais.  Ent√£o, queremos cultivar tomates ou cogumelos l√° e criar o seguinte nome ainda mais generalizado.  O mesmo se aplica √† "√∫nica raz√£o" para a mudan√ßa.  Essa raz√£o pode ser t√£o generalizada quanto a imagina√ß√£o √© suficiente. <br><br>  Outro exemplo √© a classe de gerente de esta√ß√£o espacial.  Ele n√£o faz mais nada, ele apenas gerencia a esta√ß√£o espacial.  Como voc√™ gosta desta classe com uma responsabilidade? <br>  E, como mencionei o Redux quando o candidato a emprego est√° familiarizado com essa tecnologia, tamb√©m fa√ßo a pergunta: um redutor de SRP t√≠pico viola? <br><br>  O redutor, lembro-me, inclui a instru√ß√£o switch, e acontece que cresce para dezenas ou mesmo centenas de casos.  E a √∫nica responsabilidade do redutor √© gerenciar as transi√ß√µes de estado do seu aplicativo.  Isto √©, literalmente, alguns candidatos responderam.  E nenhuma dica poderia tirar essa opini√£o do ch√£o. <br><br>  No total, se algum tipo de c√≥digo parece satisfazer o princ√≠pio SRP, mas ao mesmo tempo cheira desagrad√°vel - saiba por que isso acontece.  Porque a defini√ß√£o de "c√≥digo deve ter uma responsabilidade" simplesmente n√£o funciona. <br><br><h1>  Defini√ß√£o mais apropriada </h1><br>  Por tentativa e erro, eu tive uma defini√ß√£o melhor: <br>  <b>A responsabilidade do c√≥digo n√£o deve ser muito grande</b> <br><br>  Sim, agora voc√™ precisa "medir" a responsabilidade de uma classe ou fun√ß√£o.  E se for muito grande, voc√™ precisar√° dividir essa grande responsabilidade em v√°rias responsabilidades menores.  Voltando ao exemplo da fazenda, mesmo a responsabilidade de criar galinhas pode ser muito grande e faz sentido separar, de alguma forma, frangos de corte de galinhas poedeiras, por exemplo. <br><br>  Mas como medir, como determinar que a responsabilidade desse c√≥digo √© muito grande? <br><br>  Infelizmente, n√£o tenho m√©todos matematicamente precisos, apenas emp√≠ricos.  E, acima de tudo, isso vem com a experi√™ncia: os desenvolvedores iniciantes n√£o conseguem decompor o c√≥digo, os mais avan√ßados s√£o melhores em possu√≠-lo, embora nem sempre possam descrever por que o fazem e como isso se aplica a teorias como o SRP. <br><br><ol><li>  Complexidade ciclom√°tica m√©trica.  Infelizmente, existem maneiras de mascarar essa m√©trica, mas se voc√™ a coletar, √© poss√≠vel que ela mostre os locais mais vulner√°veis ‚Äã‚Äãem seu aplicativo. </li><li>  O tamanho das fun√ß√µes e classes.  Uma fun√ß√£o de 800 linhas n√£o precisa ser lida para entender que algo est√° errado com ela. </li><li>  Muitas importa√ß√µes.  Depois que abri um arquivo no projeto de uma equipe vizinha e vi uma tela inteira de importa√ß√µes, pressionei a p√°gina para baixo e, novamente, havia apenas importa√ß√µes na tela.  Somente ap√≥s a segunda impress√£o, vi o in√≠cio do c√≥digo.  Voc√™ pode dizer que todos os IDEs modernos podem ocultar importa√ß√µes sob o "sinal de mais", mas eu digo que um bom c√≥digo n√£o precisa ocultar os "cheiros".  Al√©m disso, eu precisava reutilizar um pequeno peda√ßo de c√≥digo e removi-o deste arquivo para outro, e um quarto ou at√© um ter√ßo das importa√ß√µes foram movidas para tr√°s desse peda√ßo.  Este c√≥digo claramente n√£o pertence a esse local. </li><li>  Testes unit√°rios.  Se voc√™ ainda tiver dificuldade em determinar a quantidade de responsabilidade, force-se a escrever testes.  Se voc√™ precisar escrever duas d√∫zias de testes com o objetivo principal de uma fun√ß√£o, sem contar casos lim√≠trofes, etc., ser√° necess√°ria a decomposi√ß√£o. </li><li>  O mesmo se aplica a muitas etapas preparat√≥rias no in√≠cio do teste e verifica√ß√µes no final.  A prop√≥sito, na Internet, voc√™ encontra a afirma√ß√£o ut√≥pica de que os chamados  Deve haver apenas uma afirma√ß√£o no teste.  Acredito que qualquer id√©ia arbitrariamente boa, sendo levada ao absoluto, pode se tornar absurdamente impratic√°vel. </li><li>  A l√≥gica de neg√≥cios n√£o deve depender diretamente de ferramentas externas.  O driver Oracle, rotas Express, √© desej√°vel separar tudo isso da l√≥gica de neg√≥cios e / ou se esconder atr√°s das interfaces. </li></ol><br>  Alguns pontos: <br><br>  Obviamente, como eu j√° mencionei, h√° um outro lado da moeda, e 800 m√©todos em uma linha podem n√£o ser melhores que um m√©todo em 800 linhas, deve haver um equil√≠brio em tudo. <br><br>  A segunda - n√£o abordo a quest√£o de onde colocar esse ou aquele c√≥digo de acordo com sua responsabilidade.  Por exemplo, √†s vezes os desenvolvedores tamb√©m t√™m dificuldades em extrair muita l√≥gica para a camada DAL. <br><br>  Terceiro, n√£o proponho limites r√≠gidos espec√≠ficos como "n√£o mais que 50 linhas por fun√ß√£o".  Essa abordagem envolve apenas uma dire√ß√£o para o desenvolvimento de desenvolvedores e talvez equipes.  Ele trabalha para mim, ele deve ganhar dinheiro para os outros. <br><br>  E a √∫ltima coisa, se voc√™ passar pelo TDD, isso certamente far√° com que voc√™ decomponha o c√≥digo muito antes de escrever esses 20 testes com 20 asser√ß√µes cada. <br><br><h1>  Separando a l√≥gica de neg√≥cios do c√≥digo padr√£o </h1><br>  Falando sobre as regras do bom c√≥digo, voc√™ n√£o pode prescindir de exemplos.  O primeiro exemplo √© sobre a separa√ß√£o do c√≥digo padr√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ae/61f/2a4/4ae61f2a4fba4563cbe17e3cfe6da69a.png"><br><br>  Este exemplo demonstra como o c√≥digo de back-end geralmente √© escrito.  As pessoas geralmente escrevem l√≥gica inextricavelmente com o c√≥digo que indica par√¢metros para o servidor Web Express, como URL, m√©todo de solicita√ß√£o etc. <br><br>  O marcador verde que eu denotei a pr√≥pria l√≥gica de neg√≥cios e o marcador vermelho indicam a incorpora√ß√£o externa do c√≥digo que interage com os par√¢metros da consulta (string de consulta). <br><br>  Eu sempre compartilho essas duas responsabilidades desta maneira: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b9/1a2/6a2/4b91a26a2b7d860804f22d72442c9947.png"><br><br>  Neste exemplo, toda a intera√ß√£o com o Express est√° em um arquivo separado. <br><br>  √Ä primeira vista, pode parecer que o segundo exemplo n√£o trouxe melhorias, havia 2 arquivos em vez de um, apareceram linhas adicionais que n√£o existiam antes - o nome da classe e a assinatura do m√©todo.  E ent√£o o que essa separa√ß√£o de c√≥digo fornece?  Primeiro, o "ponto de entrada do aplicativo" n√£o √© mais o Express.  Agora, esta √© uma fun√ß√£o normal de Typecript.  Ou uma fun√ß√£o javascript, seja C #, que escreve WebAPI sobre o qu√™. <br><br>  Isso, por sua vez, permite executar v√°rias a√ß√µes que n√£o est√£o dispon√≠veis no primeiro exemplo.  Por exemplo, voc√™ pode escrever testes de comportamento sem precisar gerar o Express, sem usar solicita√ß√µes http dentro do teste.  E mesmo que n√£o seja necess√°rio molhar, substitua o objeto Roteador pelo seu objeto "teste", agora o c√≥digo do aplicativo pode ser simplesmente chamado diretamente a partir do teste. <br><br>  Outro recurso interessante fornecido por essa decomposi√ß√£o √© que agora voc√™ pode escrever um gerador de c√≥digo que ir√° analisar o userApiService e us√°-lo para gerar c√≥digo que conecta esse servi√ßo ao Express.  Nas minhas publica√ß√µes futuras, pretendo indicar o seguinte: a gera√ß√£o de c√≥digo n√£o economizar√° tempo no processo de escrita do c√≥digo.  Os custos do gerador de c√≥digo n√£o ser√£o compensados ‚Äã‚Äãpelo fato de que agora voc√™ n√£o precisa copiar este padr√£o.  A gera√ß√£o de c√≥digo ser√° recompensada pelo fato de o c√≥digo que ele produzir n√£o precisar de suporte, o que economizar√° tempo e, mais importante, os nervos dos desenvolvedores a longo prazo. <br><br><h1>  Dividir e conquistar </h1><br>  Esse m√©todo de escrever c√≥digo existe h√° muito tempo, eu mesmo n√£o o inventei.  Acabei de concluir que √© muito conveniente quando se escreve l√≥gica de neg√≥cios.  E, para isso, criei outro exemplo fict√≠cio, mostrando como voc√™ pode escrever r√°pida e facilmente c√≥digo que √© imediatamente bem decomposto e tamb√©m auto-documentado por m√©todos de nomea√ß√£o. <br><br>  Digamos que voc√™ obtenha uma tarefa de um analista de neg√≥cios para fazer um m√©todo que envie um relat√≥rio de funcion√°rio para uma companhia de seguros.  Para fazer isso: <br><br><ol><li>  Os dados devem ser retirados do banco de dados </li><li>  Converter para o formato desejado </li><li>  Envie o relat√≥rio resultante </li></ol><br>  Esses requisitos nem sempre s√£o escritos explicitamente; algumas vezes, essa sequ√™ncia pode ser impl√≠cita ou esclarecida a partir de uma conversa com o analista.  No processo de implementa√ß√£o do m√©todo, n√£o se apresse em abrir conex√µes com o banco de dados ou rede; tente traduzir esse algoritmo simples no c√≥digo "como est√°".  Algo assim: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> networkService.sendReport(formatted);‚Äã }</code> </pre> <br>  Com essa abordagem, acaba sendo um c√≥digo bastante simples, f√°cil de ler e testar, embora eu acredite que esse c√≥digo seja trivial e n√£o precise de teste.  E era responsabilidade desse m√©todo n√£o enviar um relat√≥rio, sua responsabilidade era dividir essa tarefa complexa em tr√™s subtarefas. <br><br>  Em seguida, retornamos aos requisitos e descobrimos que o relat√≥rio deve consistir em uma se√ß√£o salarial e uma se√ß√£o com horas trabalhadas. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportData</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> salarySection = prepareSalarySection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workHoursSection = prepareWorkHoursSection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { salarySection, workHoursSection };‚Äã }</code> </pre><br>  E assim por diante, continuamos a dividir a tarefa at√© a implementa√ß√£o de pequenos m√©todos pr√≥ximos a triviais. <br><br><h1>  Intera√ß√£o com o princ√≠pio de abertura / fechamento </h1><br>  No come√ßo do artigo, eu disse que as defini√ß√µes dos princ√≠pios do SRP e do Aberto-Fechado se contradizem.  O primeiro diz que deve haver um motivo para a altera√ß√£o, o segundo diz que o c√≥digo deve estar fechado para a altera√ß√£o.  E os pr√≥prios princ√≠pios, n√£o apenas n√£o se contradizem, pelo contr√°rio, eles trabalham em sinergia entre si.  Todos os 5 princ√≠pios do SOLID t√™m como objetivo um bom objetivo - informar ao desenvolvedor qual c√≥digo √© "ruim" e como alter√°-lo para que se torne "bom".  A ironia - acabei de substituir 5 responsabilidades por mais uma. <br>  Portanto, al√©m do exemplo anterior com o envio do relat√≥rio para a companhia de seguros, imagine que um analista de neg√≥cios chegue at√© n√≥s e diga que agora precisamos adicionar uma segunda funcionalidade ao projeto.  O mesmo relat√≥rio deve ser impresso. <br>  Imagine que existe um desenvolvedor que acredita que o SRP "n√£o se trata de decomposi√ß√£o". <br>  Portanto, esse princ√≠pio n√£o lhe indicava a necessidade de decomposi√ß√£o e ele realizou toda a primeira tarefa em uma fun√ß√£o.  Depois que a tarefa chegou, ele combina as duas responsabilidades em uma, porque  eles t√™m muito em comum e generalizam seu nome.  Agora, essa responsabilidade √© chamada de "relat√≥rio de servi√ßo".  A implementa√ß√£o disso se parece com isso: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serveEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId, serveMethod</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* lots of code to read and convert the report */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(serveMethod) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> sendToProvider: <span class="hljs-comment"><span class="hljs-comment">/* implementation of sending */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> print: <span class="hljs-comment"><span class="hljs-comment">/* implementation of printing */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; } }</code> </pre><br>  Lembra algum c√≥digo do seu projeto?  Como eu disse, ambas as defini√ß√µes diretas de SRP n√£o funcionam.  Eles n√£o transmitem informa√ß√µes ao desenvolvedor que esse c√≥digo n√£o pode ser gravado.  E qual c√≥digo pode ser escrito.  Ainda havia apenas um motivo para o desenvolvedor alterar esse c√≥digo.  Ele simplesmente chamou novamente o motivo anterior, adicionou switch e est√° calmo.  E aqui o princ√≠pio do princ√≠pio de abrir e fechar aparece, o que diz diretamente que era imposs√≠vel modificar um arquivo existente.  Era necess√°rio escrever c√≥digo para que, ao adicionar nova funcionalidade, fosse necess√°rio adicionar um novo arquivo e n√£o editar um existente.  Ou seja, esse c√≥digo √© ruim do ponto de vista de dois princ√≠pios ao mesmo tempo.  E se o primeiro n√£o ajudou a v√™-lo, o segundo deve ajudar. <br><br>  E como o m√©todo de dividir e conquistar resolve o mesmo problema: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> printService.printReport(formatted);‚Äã }</code> </pre><br>  Adicione uma nova fun√ß√£o.  √Äs vezes os chamo de "fun√ß√£o de script" porque eles n√£o carregam implementa√ß√µes, eles determinam a sequ√™ncia de chamar partes decompostas de nossa responsabilidade.  Obviamente, as duas primeiras linhas, as duas primeiras responsabilidades decompostas coincidem com as duas primeiras da fun√ß√£o implementada anteriormente.  Assim como as duas primeiras etapas de duas tarefas descritas por um analista de neg√≥cios coincidem. <br>  Assim, para adicionar nova funcionalidade ao projeto, adicionamos um novo m√©todo de script e um novo printService.  Arquivos antigos n√£o foram alterados.  Ou seja, esse m√©todo de escrever c√≥digo √© bom do ponto de vista de dois princ√≠pios.  E SRP e Abrir-Fechar <br><br><h1>  Alternativa </h1><br>  Eu tamb√©m queria mencionar uma maneira alternativa e competitiva de obter um c√≥digo bem decomposto que se parece com isso - primeiro escrevemos o c√≥digo "na testa" e depois refatoramos usando v√°rias t√©cnicas, por exemplo, de acordo com o livro de Fowler "Refatora√ß√£o".  Esses m√©todos me lembraram a abordagem matem√°tica do jogo de xadrez, onde voc√™ n√£o entende exatamente o que est√° fazendo em termos de estrat√©gia, apenas calcula o "peso" da sua posi√ß√£o e tenta maximiz√°-lo fazendo movimentos.  N√£o gostei dessa abordagem por um pequeno motivo: nomear m√©todos e vari√°veis ‚Äã‚Äãj√° √© dif√≠cil e, quando n√£o t√™m valor comercial, torna-se imposs√≠vel.  Por exemplo, se essas t√©cnicas sugerem que voc√™ precisa selecionar 6 linhas id√™nticas daqui e dali, destacando-as, como chamar esse m√©todo?  someSixIdenticalLines ()? <br>  Quero fazer uma reserva - n√£o acho que esse m√©todo seja ruim, simplesmente n√£o consegui aprender como us√°-lo. <br><br><h1>  Total </h1><br>  Seguindo o princ√≠pio, voc√™ pode encontrar benef√≠cios. <br><br>  A defini√ß√£o de "deve haver uma responsabilidade" n√£o funciona. <br><br>  Existe uma defini√ß√£o melhor e v√°rias caracter√≠sticas indiretas, as chamadas  o c√≥digo cheira sinalizando a necessidade de se decompor. <br><br>  A abordagem de ‚Äúdividir e conquistar‚Äù permite que voc√™ escreva imediatamente um c√≥digo bem estruturado e auto-documentado. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt449586/">https://habr.com/ru/post/pt449586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt449572/index.html">Sobre propostas, compras e forma√ß√£o de uma tarefa de concurso</a></li>
<li><a href="../pt449574/index.html">Recursos √∫teis do SpecFlow</a></li>
<li><a href="../pt449576/index.html">Software para gerenciar um bra√ßo rob√≥tico, detectar automaticamente sua configura√ß√£o</a></li>
<li><a href="../pt449578/index.html">A ilus√£o do design inteligente</a></li>
<li><a href="../pt449584/index.html">Switches industriais n√£o gerenciados Advantech EKI-2000</a></li>
<li><a href="../pt449588/index.html">Qual √© a for√ßa e a fraqueza do mercado de hospedagem</a></li>
<li><a href="../pt449590/index.html">A capitaliza√ß√£o de mercado da Microsoft ultrapassou US $ 1 trilh√£o em 25/04/2019</a></li>
<li><a href="../pt449596/index.html">Jogo SFML simples</a></li>
<li><a href="../pt449600/index.html">"Casa inteligente" com Yandex.Alisa</a></li>
<li><a href="../pt449602/index.html">Inspirado na produ√ß√£o e no basquete: como a Yandex prepara um campeonato de programa√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>