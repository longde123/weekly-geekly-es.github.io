<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë®‚Äçüëß‚Äçüëß üö£üèΩ ü§æüèº Blockchain: que devons-nous construire PoC? üë©üèø‚Äçü§ù‚Äçüë®üèæ üëáüèΩ üë®üèΩ‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les yeux ont peur et les mains d√©mangent! 

 Dans les articles pr√©c√©dents, nous avons d√©termin√© les technologies sur lesquelles les cha√Ænes de blocs s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blockchain: que devons-nous construire PoC?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466157/">  <i>Les yeux ont peur et les mains d√©mangent!</i> <br><br>  Dans les articles pr√©c√©dents, nous avons d√©termin√© les technologies sur lesquelles les cha√Ænes de blocs sont construites (pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quoi devrions-nous construire une cha√Æne de blocs?</a> ) Et les cas qui peuvent √™tre mis en ≈ìuvre avec leur aide ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que devrions-nous construire un cas?</a> )  Il est temps de travailler avec vos mains!  Pour la mise en place de pilotes et PoC (Proof of Concept), je pr√©f√®re utiliser des clouds, car  ils sont accessibles de n'importe o√π dans le monde et, souvent, vous n'avez pas √† consacrer de temps √† une installation fastidieuse de l'environnement, car  Il existe des configurations pr√©d√©finies.  Alors, faisons quelque chose de simple, par exemple, un r√©seau pour transf√©rer des pi√®ces entre les participants et appelons-le modestement Citcoin.  Pour cela, nous utiliserons le cloud IBM et la blockchain universelle Hyperledger Fabric.  Tout d'abord, voyons pourquoi Hyperledger Fabric est appel√© une blockchain universelle. <br><br><img src="https://habrastorage.org/webt/f6/tc/q3/f6tcq3wp6dn1kaity-mtv9xkkik.png" alt="image"><br><a name="habracut"></a><br><h2>  Hyperledger Fabric - une blockchain universelle </h2><br>  D'une mani√®re g√©n√©rale, le syst√®me d'information universel est: <br><br><ul><li>  Un ensemble de serveurs et un noyau logiciel qui ex√©cute la logique m√©tier; </li><li>  Interfaces pour interagir avec le syst√®me; </li><li>  Moyens d'enregistrement, d'authentification et d'autorisation des appareils / personnes; </li><li>  Base de donn√©es stockant les donn√©es op√©rationnelles et d'archivage: </li></ul><br><img src="https://habrastorage.org/webt/ha/dt/cr/hadtcr9siyz1oy-ouwou9gwhyzs.png" alt="image"><br><br>  La version officielle de ce qu'est Hyperledger Fabric peut √™tre lue sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site</a> , et en bref, Hyperledger Fabric est une plate-forme open source qui vous permet de cr√©er des cha√Ænes de blocs ferm√©es et d'ex√©cuter des contrats intelligents arbitraires √©crits dans les langages de programmation JS et Go.  Jetons un coup d'≈ìil √† l'architecture de Hyperledger Fabric en d√©tail et assurons qu'il s'agit d'un syst√®me universel qui n'a que les sp√©cificit√©s de stockage et d'enregistrement de donn√©es.  La sp√©cificit√© est que les donn√©es, comme dans toutes les blockchains, sont stock√©es dans des blocs qui sont plac√©s sur la blockchain uniquement si les participants sont parvenus √† un consensus et apr√®s l'enregistrement des donn√©es ne peuvent pas √™tre discr√®tement corrig√©es ou supprim√©es. <br><br><h2>  Architecture de tissu Hyperledger </h2><br>  Le diagramme montre l'architecture du tissu Hyperledger: <br><br><img src="https://habrastorage.org/webt/lt/av/n_/ltavn_otc0ix7lspm1wqvvz2zl4.png" alt="image"><br><br>  <b>Organisations</b> - les organisations contiennent des pairs, c.-√†-d.  la blockchain existe gr√¢ce au soutien des organisations.  Diff√©rentes organisations peuvent √™tre membres du m√™me canal. <br><br>  <b>Canal</b> - une structure logique qui unit les pairs en groupes, c'est-√†-dire  La blockchain est d√©finie.  Hyperledger Fabric peut traiter simultan√©ment plusieurs cha√Ænes de blocs avec une logique m√©tier diff√©rente. <br><br>  <b>Le fournisseur de services aux membres (MSP)</b> est une autorit√© de certification (autorit√© de certification) qui d√©livre une identit√© et attribue des r√¥les.  Pour cr√©er un n≈ìud, vous devez interagir avec MSP. <br><br>  <b>Noeuds homologues</b> - v√©rifiez les transactions, stockez la blockchain, ex√©cutez des contrats intelligents et interagissez avec les applications.  Les pairs ont une identit√© (certificat num√©rique) qui √©met un MSP.  Contrairement au r√©seau Bitcoin ou Etherium, o√π tous les n≈ìuds sont √©gaux, dans les n≈ìuds Hyperledger Fabric jouent des r√¥les diff√©rents: <br><br><ul><li>  Le pair peut <b>approuver le pair</b> (PE) et ex√©cuter des contrats intelligents. </li><li>  <b>Committing peer</b> (CP) - enregistrez uniquement les donn√©es sur la blockchain et mettez √† jour ¬´l'√©tat du monde¬ª. </li><li>  <b>Anchor Peer</b> (AP) - si plusieurs organisations participent √† la blockchain, les pairs d'ancrage sont utilis√©s pour communiquer entre elles.  Chaque organisation doit avoir un ou plusieurs pairs d'ancrage.  Avec l'aide d'AP, tout pair de l'organisation peut obtenir des informations sur tous les pairs d'autres organisations.  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">protocole Gossip est</a> utilis√© pour synchroniser les informations entre les points d'acc√®s. </li><li>  <b>Homologue leader</b> - si l'organisation a plusieurs homologues, seul l'homologue leader recevra les blocs du service de commande et les remettra aux autres homologues.  Un leader peut √™tre d√©fini statiquement ou s√©lectionn√© dynamiquement par des pairs dans une organisation.  Le protocole Gossip est √©galement utilis√© pour synchroniser les informations de leader. </li></ul><br>  <b>Les actifs</b> sont des entit√©s de valeur qui sont stock√©es sur la blockchain.  Plus pr√©cis√©ment, il s'agit de donn√©es de valeur-cl√© au format JSON.  Ce sont ces donn√©es qui sont enregistr√©es dans la Blockchain.  Ils ont une histoire qui est stock√©e sur la blockchain et l'√©tat actuel, qui est stock√© dans la base de donn√©es d'√©tat mondial.  Les structures de donn√©es sont remplies de mani√®re al√©atoire en fonction des t√¢ches m√©tier.  Il n'y a pas de champs obligatoires, la seule recommandation est que les actifs doivent avoir un propri√©taire et √™tre pr√©cieux. <br><br>  <b>Ledger</b> - se compose de la blockchain "Blockchain" et de la base de donn√©es "Word state", qui stocke l'√©tat actuel des actifs.  L'√©tat mondial utilise LevelDB ou CouchDB. <br><br>  <b>Contrat intelligent</b> - √† l'aide de contrats intelligents, la logique m√©tier du syst√®me est mise en ≈ìuvre.  Dans Hyperledger Fabric, les contrats intelligents sont appel√©s chaincode.  √Ä l'aide du code de cha√Æne, les actifs et les transactions sur eux sont d√©finis.  S'exprimant en langage technique, les contrats intelligents sont des modules logiciels impl√©ment√©s dans les langages de programmation JS ou Go. <br><br>  <b>Politique d'approbation</b> - pour chaque code de cha√Æne, vous pouvez sp√©cifier le nombre de politiques et de qui vous voulez attendre des confirmations pour la transaction.  Si la politique n'est pas d√©finie, elle est utilis√©e par d√©faut: ¬´la transaction doit √™tre confirm√©e par n'importe quel membre d'une organisation du canal¬ª.  Exemples de politiques: <br><br><ul><li>  Tout administrateur de l'organisation doit confirmer la transaction; </li><li>  Tout membre ou client de l'organisation doit confirmer; </li><li>  Doit confirmer toute organisation homologue. </li></ul><br>  <b>Service de commande</b> - regroupe les transactions en blocs et envoie des pairs au canal.  Garantit la livraison des messages √† tous les pairs du r√©seau.  Pour les syst√®mes industriels, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courtier de messages Kafka est</a> utilis√© pour d√©velopper et tester <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Solo</a> . <br><br><h2>  Flux d'appel </h2><br><img src="https://habrastorage.org/webt/we/9m/wt/we9mwttlva0u7k0-zv2r6998rss.png" alt="image"><br><br><ul><li>  L'application interagit avec Hyperledger Fabric √† l'aide du SDK Go, Node.js ou Java; </li><li>  Le client cr√©e une transaction tx et l'envoie √† ses homologues endosseurs; </li><li>  Le pair v√©rifie la signature du client, termine la transaction et renvoie la signature d'approbation au client.  Chaincode est ex√©cut√© uniquement sur le pair endosseur et le r√©sultat de son ex√©cution est envoy√© √† tous les pairs.  Cet algorithme de travail est appel√© consensus PBFT (Practical Byzantine Fault Tolerant).  Il diff√®re du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BFT classique</a> en ce que le message est envoy√© et aucune confirmation n'est attendue de tous les participants, mais uniquement d'un ensemble sp√©cifique; </li><li>  Une fois que le client a re√ßu le nombre de r√©ponses correspondant √† la politique d'endossement, il envoie la transaction au service Commande; </li><li>  Le service de commande forme un bloc et l'envoie √† tous les pairs qui s'engagent.  Le service de commande fournit une √©criture s√©quentielle des blocs, ce qui exclut la fourchette dite du grand livre ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voir la section "Fourches"</a> ); </li><li>  Les pairs re√ßoivent un bloc, v√©rifient √† nouveau la politique d'approbation, √©crivent le bloc dans la blockchain et changent l'√©tat dans la base de donn√©es ¬´World state¬ª. </li></ul><br>  C'est-√†-dire  il s'av√®re que la s√©paration des r√¥les entre les n≈ìuds.  Cela offre une √©volutivit√© et une s√©curit√© blockchain: <br><br><ul><li>  Les contrats intelligents (chaincode) effectuent l'approbation des pairs.  Cela garantit la confidentialit√© des contrats intelligents, comme  il n'est pas stock√© par tous les participants, mais uniquement sur les pairs qui approuvent. </li><li>  La commande devrait fonctionner rapidement.  Ceci est assur√© par le fait que Ordering ne forme qu'un bloc et l'envoie √† un ensemble fixe de pairs leaders. </li><li>  Les pairs engag√©s ne stockent que la blockchain - il peut y en avoir beaucoup et ils ne n√©cessitent pas beaucoup de puissance et de travail instantan√©. </li></ul><br>  Pour plus d'informations sur les solutions architecturales d'Hyperledger Fabric et pourquoi cela fonctionne de cette mani√®re, voir ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Origines de l'architecture</a> ou ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hyperledger Fabric: un syst√®me d'exploitation distribu√© pour les blockchains autoris√©es</a> . <br><br>  Ainsi, Hyperledger Fabric est un syst√®me vraiment universel avec lequel vous pouvez: <br><br><ul><li>  Mettre en ≈ìuvre une logique m√©tier arbitraire √† l'aide du m√©canisme de contrat intelligent; </li><li>  √âcrire et recevoir des donn√©es √† partir d'une base de donn√©es blockchain au format JSON; </li><li>  Fournissez et v√©rifiez l'acc√®s √† l'API √† l'aide de l'autorit√© de certification. </li></ul><br>  Maintenant que nous avons compris les sp√©cificit√©s du tissu Hyperledger, faisons enfin quelque chose d'utile! <br><br><h2>  D√©velopper la cha√Æne de blocs </h2><br><h3>  √ânonc√© du probl√®me </h3><br>  La t√¢che consiste √† impl√©menter le r√©seau Citcoin avec les fonctions suivantes: cr√©er un compte, obtenir un solde, reconstituer le compte, transf√©rer des pi√®ces d'un compte √† un autre.  Dessinons un mod√®le d'objet, que nous allons impl√©menter dans un contrat intelligent.  Ainsi, nous aurons des comptes qui sont identifi√©s par des noms et contiennent un solde et une liste de comptes.  Les comptes et une liste de comptes sont en termes d'actifs Hyperledger Fabric.  En cons√©quence, ils ont une histoire et un statut actuel.  Je vais essayer de le dessiner clairement: <br><br><img src="https://habrastorage.org/webt/wj/vx/uc/wjvxuc7wn8q8z8ob7efborjwfeu.png" alt="image"><br><br>  Les chiffres sup√©rieurs sont l'√©tat actuel, qui est stock√© dans la base de donn√©es de l'√âtat mondial.  En dessous d'eux se trouvent des figures montrant l'histoire qui est stock√©e sur la blockchain.  L'√©tat actuel des actifs est modifi√© par les transactions.  L'actif change uniquement dans son int√©gralit√©. Par cons√©quent, √† la suite de la transaction, un nouvel objet est cr√©√© et la valeur actuelle de l'actif entre dans l'historique. <br><br><h3>  IBM Cloud </h3><br>  Nous cr√©ons un compte dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le cloud IBM</a> .  Pour utiliser la plateforme blockchain, vous devez la mettre √† niveau vers Pay-As-You-Go.  Ce processus peut ne pas √™tre rapide, car  IBM demande des informations suppl√©mentaires et les v√©rifie manuellement.  Du positif, je peux dire qu'IBM a de bons supports de formation qui vous permettent de d√©ployer Hyperledger Fabric dans leur cloud.  J'ai aim√© la s√©rie d'articles et d'exemples suivants: <br><br><ul><li>  <a href="">Cr√©er un r√©seau de blockchain de base √† l'aide de la plateforme Blockchain</a> </li><li>  <a href="">Cr√©er et ex√©cuter un contrat intelligent blockchain</a> </li><li>  <a href="">√âmettre des √©v√©nements √† partir de la plateforme Blockchain</a> </li></ul><br>  Voici des captures d'√©cran de la plateforme IBM Blockchain.  Ce n'est pas une instruction pour cr√©er une blockchain, mais simplement une d√©monstration de l'√©tendue de la t√¢che.  Donc, pour nos besoins, nous faisons une seule organisation: <br><br><img src="https://habrastorage.org/webt/vw/gr/co/vwgrcodh-v21eslmmfe_1nkruhk.png" alt="image"><br><br>  Nous y cr√©ons des n≈ìuds: Orderer CA, Org1 CA, Orderer Peer: <br><br><img src="https://habrastorage.org/webt/f7/1x/g2/f71xg2fhmy258ihqyaunufjgas4.png" alt="image"><br><br>  Nous commen√ßons les utilisateurs: <br><br><img src="https://habrastorage.org/webt/1t/k5/_i/1tk5_ihjhcimki8xaeuxenwszh0.png" alt="image"><br><br>  Cr√©ez une cha√Æne et appelez-la citcoin: <br><br><img src="https://habrastorage.org/webt/hv/y-/av/hvy-av3p4pjrpgonz47bcj0qebq.png" alt="image"><br><br>  Essentiellement, Channel est une blockchain, donc il commence par un bloc z√©ro (bloc Genesis): <br><br><img src="https://habrastorage.org/webt/9x/n0/c0/9xn0c0ihpxzmytycm9olkqi6klm.png" alt="image"><br><br><h3>  R√©daction d'un contrat intelligent </h3><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Citcoin smart-contract v1.5 for Hyperledger Fabric * (c) Alexey Sushkov, 2019 */</span></span> <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Contract } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fabric-contract-api'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> maxAccounts = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CitcoinEvents</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contract</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> instantiate(ctx) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.info(<span class="hljs-string"><span class="hljs-string">'instantiate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> emptyList = []; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ctx.stub.putState(<span class="hljs-string"><span class="hljs-string">'accounts'</span></span>, Buffer.from(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(emptyList))); } <span class="hljs-comment"><span class="hljs-comment">// Get all accounts async GetAccounts(ctx) { // Get account list: let accounts = '{}' let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { accounts = JSON.parse(accountsData.toString()); } else { throw new Error('accounts not found'); } return accountsData.toString() } // add a account object to the blockchain state identifited by their name async AddAccount(ctx, name, balance) { // this is account data: let account = { name: name, balance: Number(balance), type: 'account', }; // create account: await ctx.stub.putState(name, Buffer.from(JSON.stringify(account))); // Add account to list: let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { let accounts = JSON.parse(accountsData.toString()); if (accounts.length &lt; maxAccounts) { accounts.push(name); await ctx.stub.putState('accounts', Buffer.from(JSON.stringify(accounts))); } else { throw new Error('Max accounts number reached'); } } else { throw new Error('accounts not found'); } // return object return JSON.stringify(account); } // Sends money from Account to Account async SendFrom(ctx, fromAccount, toAccount, value) { // get Account from let fromData = await ctx.stub.getState(fromAccount); let from; if (fromData) { from = JSON.parse(fromData.toString()); if (from.type !== 'account') { throw new Error('wrong from type'); } } else { throw new Error('Accout from not found'); } // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balances if ((from.balance - Number(value)) &gt;= 0 ) { from.balance -= Number(value); to.balance += Number(value); } else { throw new Error('From Account: not enought balance'); } await ctx.stub.putState(from.name, Buffer.from(JSON.stringify(from))); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "SendFrom", from: from.name, to: to.name, balanceFrom: from.balance, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('SendFrom', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } // get the state from key async GetState(ctx, key) { let data = await ctx.stub.getState(key); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // GetBalance async GetBalance(ctx, accountName) { let data = await ctx.stub.getState(accountName); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // Refill own balance async RefillBalance(ctx, toAccount, value) { // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balance to.balance += Number(value); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "RefillBalance", to: to.name, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('RefillBalance', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } } module.exports = CitcoinEvents;</span></span></code> </pre> <br>  Intuitivement, tout devrait √™tre clair ici: <br><br><ul><li>  Il existe plusieurs fonctions (AddAccount, GetAccounts, SendFrom, GetBalance, RefillBalance) que le programme de d√©monstration appellera √† l'aide de l'API Hyperledger Fabric. </li><li>  Les fonctions SendFrom et RefillBalance g√©n√®rent des √©v√©nements (Event) que le programme de d√©monstration recevra. </li><li>  Fonction instancier - est appel√©e une fois lors de l'instanciation d'un contrat intelligent.  En fait, il n'est pas appel√© une seule fois, mais √† chaque fois qu'une version d'un contrat intelligent est modifi√©e.  Par cons√©quent, l'initialisation de la liste avec un tableau vide est une mauvaise id√©e, car  Maintenant, lors du changement de version d'un contrat intelligent, nous perdrons la liste actuelle.  Mais rien, j'apprends juste). </li><li>  Les comptes et une liste de comptes (comptes) sont des structures de donn√©es JSON.  Pour la manipulation des donn√©es, JS est utilis√©. </li><li>  Vous pouvez obtenir la valeur actuelle d'un actif en appelant la fonction getState et la mettre √† jour √† l'aide de putState. </li><li>  Lors de la cr√©ation d'un compte, la fonction AddAccount est appel√©e, dans laquelle une comparaison est effectu√©e pour le nombre maximal de comptes dans la blockchain (maxAccounts = 5).  Et il y a un montant (remarqu√©?), Ce qui entra√Æne une augmentation infinie du nombre de comptes.  De telles erreurs doivent √™tre √©vit√©es) </li></ul><br>  Ensuite, t√©l√©chargez le contrat intelligent sur Channel et installez-le: <br><br><img src="https://habrastorage.org/webt/ew/3a/ok/ew3aok9gsgrcaadaor-b0xwxllg.png" alt="image"><br><br>  Nous examinons la transaction pour l'installation de Smart Contract: <br><br><img src="https://habrastorage.org/webt/om/m4/x9/omm4x9np0s1i8wjki6guvvyc46o.png" alt="image"><br><br>  Nous regardons les d√©tails de notre cha√Æne: <br><br><img src="https://habrastorage.org/webt/tj/bd/eb/tjbdebruoky86aiwhx5t7ayqljq.png" alt="image"><br><br>  En cons√©quence, nous obtenons le diagramme de r√©seau de blockchain suivant dans le cloud IBM.  Il existe √©galement un programme de d√©monstration ex√©cut√© dans le cloud Amazon sur un serveur virtuel (voir la section suivante pour plus de d√©tails): <br><br><img src="https://habrastorage.org/webt/bx/sb/1s/bxsb1s6s0c36u_2vh0lmjqmqj9u.png" alt="image"><br><br><h2>  Cr√©ation d'une interface graphique pour les appels d'API Hyperledger Fabric </h2><br>  Hyperledger Fabric poss√®de une API qui peut √™tre utilis√©e pour: <br><br><ul><li>  Cha√Æne de cr√©ations; </li><li>  Connexions homologues au canal; </li><li>  Installation et instanciation de contrats intelligents dans le canal; </li><li>  Appel de transaction; </li><li>  Demander des informations sur la blockchain. </li></ul><br><h3>  D√©veloppement d'applications </h3><br>  Dans notre programme de d√©monstration, nous n'utiliserons l'API que pour appeler des transactions et demander des informations, car  Nous avons d√©j√† pris les mesures restantes √† l'aide de la plateforme de blockchain IBM.  Nous √©crivons une interface graphique en utilisant une pile technologique standard: Express.js + Vue.js + Node.js.  Vous pouvez √©crire un article s√©par√© sur la fa√ßon de commencer √† cr√©er des applications Web modernes.  Ici, je vais laisser un lien vers la s√©rie de conf√©rences que j'ai le plus appr√©ci√©e: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Full Stack Web App utilisant Vue.js &amp; Express.js</a> .  Le r√©sultat est une application client-serveur avec une interface graphique famili√®re dans le style de Material Design de Google.  L'API REST entre le client et le serveur se compose de plusieurs appels: <br><br><ul><li>  HyperledgerDemo / v1 / init - initialise la blockchain; </li><li>  HyperledgerDemo / v1 / accounts / list - obtenir une liste de tous les comptes </li><li>  HyperledgerDemo / v1 / account? Name = Bob &amp; balance = 100 - cr√©er un compte Bob; </li><li>  HyperledgerDemo / v1 / info? Account = Bob - obtenir des informations sur le compte Bob; </li><li>  HyperledgerDemo / v1 / transaction? De = Bob &amp; √† = Alice &amp; volume = 2 - transf√©rez deux pi√®ces de Bob √† Alice; </li><li>  HyperledgerDemo / v1 / d√©connect - ferme la connexion √† la blockchain. </li></ul><br>  J'ai mis la description de l'API avec des exemples sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de Postman</a> , un programme bien connu pour tester l'API HTTP. <br><br><h3>  Application de d√©monstration d'Amazon Cloud </h3><br>  L'application a √©t√© t√©l√©charg√©e sur Amazon, car  IBM n'a jusqu'√† pr√©sent pas r√©ussi √† mettre √† niveau mon compte et √† autoriser la cr√©ation de serveurs virtuels.  Comment la cerise a attach√© le domaine: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.citcoin.info</a> .  Je vais garder le serveur allum√© un peu, puis je l'√©teindrai, car  les centimes de loyer d√©goulinent, et les pi√®ces de citcoin ne sont pas encore cot√©es en bourse) J'ai mis des captures d'√©cran de la d√©mo dans l'article pour que la logique du travail soit claire.  L'application de d√©monstration peut: <br><br><ul><li>  Initialisez la blockchain; </li><li>  Cr√©ez un compte (mais maintenant ne cr√©ez pas de nouveau compte, car le nombre maximal de comptes prescrit dans le contrat intelligent a √©t√© atteint dans la blockchain); </li><li>  Obtenez une liste de comptes; </li><li>  Transf√©rer des pi√®ces de citcoin entre Alice, Bob et Alex; </li><li>  Recevoir des √©v√©nements (mais maintenant il n'y a aucun moyen d'afficher les √©v√©nements, par cons√©quent, pour plus de simplicit√©, l'interface indique que les √©v√©nements ne sont pas pris en charge); </li><li>  Consigner les actions. </li></ul><br>  Tout d'abord, initialisez la blockchain: <br><br><img src="https://habrastorage.org/webt/o8/j5/te/o8j5tev3u9drgclmlfzluoys-e4.png" alt="image"><br><br>  Ensuite, d√©marrez votre compte, ne vous souciez pas de l'√©quilibre: <br><br><img src="https://habrastorage.org/webt/e1/eo/ck/e1eockzjedclvktadadhnbsgkem.png" alt="image"><br><br>  Nous obtenons une liste de tous les comptes disponibles: <br><br><img src="https://habrastorage.org/webt/_0/ih/o-/_0iho-vlhsg0v6abggskdshpmow.png" alt="image"><br><br>  Nous s√©lectionnons l'exp√©diteur et le destinataire, nous obtenons leurs soldes.  Si l'exp√©diteur et le destinataire sont identiques, leur compte sera r√©approvisionn√©: <br><br><img src="https://habrastorage.org/webt/c7/go/vu/c7govuxmtn4wkcc_4byqz5dzgd8.png" alt="image"><br><br>  Dans le journal, nous surveillons l'ex√©cution des transactions: <br><br><img src="https://habrastorage.org/webt/lw/sj/tb/lwsjtbmwe8oplpok_mg8ocvjirq.png" alt="image"><br><br>  En fait, avec un programme de d√©monstration, c'est tout.  Ensuite, vous pouvez voir notre transaction dans la blockchain: <br><br><img src="https://habrastorage.org/webt/cp/cu/ik/cpcuikr02wqi_nwht9liarcpkhk.png" alt="image"><br><br>  Et la liste g√©n√©rale des transactions: <br><br><img src="https://habrastorage.org/webt/_z/1t/ej/_z1tejxfntvmmqugqzf04plkrae.png" alt="image"><br><br>  Avec cela, nous avons termin√© avec succ√®s la mise en ≈ìuvre de PoC pour cr√©er le r√©seau Citcoin.  Que faut-il faire d'autre pour que Citcoin devienne un r√©seau de transfert de pi√®ces √† part enti√®re?  Juste un peu: <br><br><ul><li>  Au stade de la cr√©ation d'un compte, impl√©mentez la g√©n√©ration d'une cl√© priv√©e / publique.  La cl√© priv√©e doit √™tre stock√©e dans l'utilisateur du compte, publique dans la blockchain. </li><li>  Effectuez un transfert de pi√®ces dans lequel une cl√© publique est utilis√©e pour identifier l'utilisateur, pas un nom. </li><li>  Cryptez les transactions allant de l'utilisateur au serveur avec sa cl√© priv√©e. </li></ul><br><h2>  Conclusion </h2><br>  Nous avons mis en place le r√©seau Citcoin avec des fonctions: ajouter un compte, obtenir un solde, r√©approvisionner votre compte, transf√©rer des pi√®ces d'un compte √† un autre.  Alors, combien nous a-t-il co√ªt√© pour cr√©er un PoC? <br><br><ul><li>  Nous devons √©tudier la blockchain en g√©n√©ral et Hyperledger Fabric en particulier; </li><li>  Apprenez √† utiliser les clouds IBM ou Amazon; </li><li>  Apprenez le langage de programmation JS et un cadre Web; </li><li>  Si certaines donn√©es doivent √™tre stock√©es non pas dans la blockchain, mais dans une base de donn√©es distincte, alors apprenez √† vous int√©grer, par exemple, avec PostgreSQL; </li><li>  Et enfin et surtout - sans connaissance de Linux dans le monde moderne, nulle part!) </li></ul><br>  Bien s√ªr, pas sorcier, mais il faut transpirer! <br><br><h3>  Sources GitHub </h3><br>  Il a mis le code source sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  Une br√®ve description du r√©f√©rentiel: <br>  R√©pertoire " <b>serveur</b> " - serveur Node.js <br>  R√©pertoire " <b>client</b> " - Client Node.js <br>  Le r√©pertoire " <b>blockchain</b> " (les valeurs des param√®tres et les cl√©s, bien s√ªr, ne fonctionnent pas et ne sont donn√©es qu'√† titre d'exemple): <br><br><ul><li>  contrat - source du contrat intelligent </li><li>  portefeuille - cl√©s d'utilisateur pour utiliser l'API Hyperledger Fabric. </li><li>  * .cds - versions compil√©es de contrats intelligents </li><li>  * Fichiers .json - exemples de fichiers de configuration pour l'utilisation de l'API Hyperledger Fabric </li></ul><br>  <b><font color="#B22222">Ce n'est qu'un d√©but!</font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466157/">https://habr.com/ru/post/fr466157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466147/index.html">Gestionnaire d'affichage de donn√©es r√©actif. Pr√©sentation</a></li>
<li><a href="../fr466149/index.html">Cr√©ation d'un symbole de connecteur avec du texte ¬´dynamique¬ª dans OrCAD</a></li>
<li><a href="../fr466151/index.html">Enqu√™te: programmes √©tranges dans le registre des logiciels nationaux</a></li>
<li><a href="../fr466153/index.html">Cr√©ation d'un document de conception de mission de jeu narratif en utilisant l'exemple de Last of Us</a></li>
<li><a href="../fr466155/index.html">Architecture et fonctionnalit√©s de Tarantool Data Grid</a></li>
<li><a href="../fr466159/index.html">Pourquoi la vitesse est importante sur un √©change moderne et comment d√©passer les concurrents: 3 fa√ßons pratiques</a></li>
<li><a href="../fr466165/index.html">Comment l'intelligence artificielle aide √† g√©rer les projets</a></li>
<li><a href="../fr466169/index.html">Offre sp√©ciale pour les √©tudiants actifs de JetBrains</a></li>
<li><a href="../fr466171/index.html">Cinq raisons d'opter pour JUG.EKB</a></li>
<li><a href="../fr466179/index.html">fform: React & JSONSchema - flexibilit√© maximale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>