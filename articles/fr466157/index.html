<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👨‍👧‍👧 🚣🏽 🤾🏼 Blockchain: que devons-nous construire PoC? 👩🏿‍🤝‍👨🏾 👇🏽 👨🏽‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les yeux ont peur et les mains démangent! 

 Dans les articles précédents, nous avons déterminé les technologies sur lesquelles les chaînes de blocs s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blockchain: que devons-nous construire PoC?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466157/">  <i>Les yeux ont peur et les mains démangent!</i> <br><br>  Dans les articles précédents, nous avons déterminé les technologies sur lesquelles les chaînes de blocs sont construites (pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quoi devrions-nous construire une chaîne de blocs?</a> ) Et les cas qui peuvent être mis en œuvre avec leur aide ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que devrions-nous construire un cas?</a> )  Il est temps de travailler avec vos mains!  Pour la mise en place de pilotes et PoC (Proof of Concept), je préfère utiliser des clouds, car  ils sont accessibles de n'importe où dans le monde et, souvent, vous n'avez pas à consacrer de temps à une installation fastidieuse de l'environnement, car  Il existe des configurations prédéfinies.  Alors, faisons quelque chose de simple, par exemple, un réseau pour transférer des pièces entre les participants et appelons-le modestement Citcoin.  Pour cela, nous utiliserons le cloud IBM et la blockchain universelle Hyperledger Fabric.  Tout d'abord, voyons pourquoi Hyperledger Fabric est appelé une blockchain universelle. <br><br><img src="https://habrastorage.org/webt/f6/tc/q3/f6tcq3wp6dn1kaity-mtv9xkkik.png" alt="image"><br><a name="habracut"></a><br><h2>  Hyperledger Fabric - une blockchain universelle </h2><br>  D'une manière générale, le système d'information universel est: <br><br><ul><li>  Un ensemble de serveurs et un noyau logiciel qui exécute la logique métier; </li><li>  Interfaces pour interagir avec le système; </li><li>  Moyens d'enregistrement, d'authentification et d'autorisation des appareils / personnes; </li><li>  Base de données stockant les données opérationnelles et d'archivage: </li></ul><br><img src="https://habrastorage.org/webt/ha/dt/cr/hadtcr9siyz1oy-ouwou9gwhyzs.png" alt="image"><br><br>  La version officielle de ce qu'est Hyperledger Fabric peut être lue sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site</a> , et en bref, Hyperledger Fabric est une plate-forme open source qui vous permet de créer des chaînes de blocs fermées et d'exécuter des contrats intelligents arbitraires écrits dans les langages de programmation JS et Go.  Jetons un coup d'œil à l'architecture de Hyperledger Fabric en détail et assurons qu'il s'agit d'un système universel qui n'a que les spécificités de stockage et d'enregistrement de données.  La spécificité est que les données, comme dans toutes les blockchains, sont stockées dans des blocs qui sont placés sur la blockchain uniquement si les participants sont parvenus à un consensus et après l'enregistrement des données ne peuvent pas être discrètement corrigées ou supprimées. <br><br><h2>  Architecture de tissu Hyperledger </h2><br>  Le diagramme montre l'architecture du tissu Hyperledger: <br><br><img src="https://habrastorage.org/webt/lt/av/n_/ltavn_otc0ix7lspm1wqvvz2zl4.png" alt="image"><br><br>  <b>Organisations</b> - les organisations contiennent des pairs, c.-à-d.  la blockchain existe grâce au soutien des organisations.  Différentes organisations peuvent être membres du même canal. <br><br>  <b>Canal</b> - une structure logique qui unit les pairs en groupes, c'est-à-dire  La blockchain est définie.  Hyperledger Fabric peut traiter simultanément plusieurs chaînes de blocs avec une logique métier différente. <br><br>  <b>Le fournisseur de services aux membres (MSP)</b> est une autorité de certification (autorité de certification) qui délivre une identité et attribue des rôles.  Pour créer un nœud, vous devez interagir avec MSP. <br><br>  <b>Noeuds homologues</b> - vérifiez les transactions, stockez la blockchain, exécutez des contrats intelligents et interagissez avec les applications.  Les pairs ont une identité (certificat numérique) qui émet un MSP.  Contrairement au réseau Bitcoin ou Etherium, où tous les nœuds sont égaux, dans les nœuds Hyperledger Fabric jouent des rôles différents: <br><br><ul><li>  Le pair peut <b>approuver le pair</b> (PE) et exécuter des contrats intelligents. </li><li>  <b>Committing peer</b> (CP) - enregistrez uniquement les données sur la blockchain et mettez à jour «l'état du monde». </li><li>  <b>Anchor Peer</b> (AP) - si plusieurs organisations participent à la blockchain, les pairs d'ancrage sont utilisés pour communiquer entre elles.  Chaque organisation doit avoir un ou plusieurs pairs d'ancrage.  Avec l'aide d'AP, tout pair de l'organisation peut obtenir des informations sur tous les pairs d'autres organisations.  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">protocole Gossip est</a> utilisé pour synchroniser les informations entre les points d'accès. </li><li>  <b>Homologue leader</b> - si l'organisation a plusieurs homologues, seul l'homologue leader recevra les blocs du service de commande et les remettra aux autres homologues.  Un leader peut être défini statiquement ou sélectionné dynamiquement par des pairs dans une organisation.  Le protocole Gossip est également utilisé pour synchroniser les informations de leader. </li></ul><br>  <b>Les actifs</b> sont des entités de valeur qui sont stockées sur la blockchain.  Plus précisément, il s'agit de données de valeur-clé au format JSON.  Ce sont ces données qui sont enregistrées dans la Blockchain.  Ils ont une histoire qui est stockée sur la blockchain et l'état actuel, qui est stocké dans la base de données d'état mondial.  Les structures de données sont remplies de manière aléatoire en fonction des tâches métier.  Il n'y a pas de champs obligatoires, la seule recommandation est que les actifs doivent avoir un propriétaire et être précieux. <br><br>  <b>Ledger</b> - se compose de la blockchain "Blockchain" et de la base de données "Word state", qui stocke l'état actuel des actifs.  L'état mondial utilise LevelDB ou CouchDB. <br><br>  <b>Contrat intelligent</b> - à l'aide de contrats intelligents, la logique métier du système est mise en œuvre.  Dans Hyperledger Fabric, les contrats intelligents sont appelés chaincode.  À l'aide du code de chaîne, les actifs et les transactions sur eux sont définis.  S'exprimant en langage technique, les contrats intelligents sont des modules logiciels implémentés dans les langages de programmation JS ou Go. <br><br>  <b>Politique d'approbation</b> - pour chaque code de chaîne, vous pouvez spécifier le nombre de politiques et de qui vous voulez attendre des confirmations pour la transaction.  Si la politique n'est pas définie, elle est utilisée par défaut: «la transaction doit être confirmée par n'importe quel membre d'une organisation du canal».  Exemples de politiques: <br><br><ul><li>  Tout administrateur de l'organisation doit confirmer la transaction; </li><li>  Tout membre ou client de l'organisation doit confirmer; </li><li>  Doit confirmer toute organisation homologue. </li></ul><br>  <b>Service de commande</b> - regroupe les transactions en blocs et envoie des pairs au canal.  Garantit la livraison des messages à tous les pairs du réseau.  Pour les systèmes industriels, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courtier de messages Kafka est</a> utilisé pour développer et tester <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Solo</a> . <br><br><h2>  Flux d'appel </h2><br><img src="https://habrastorage.org/webt/we/9m/wt/we9mwttlva0u7k0-zv2r6998rss.png" alt="image"><br><br><ul><li>  L'application interagit avec Hyperledger Fabric à l'aide du SDK Go, Node.js ou Java; </li><li>  Le client crée une transaction tx et l'envoie à ses homologues endosseurs; </li><li>  Le pair vérifie la signature du client, termine la transaction et renvoie la signature d'approbation au client.  Chaincode est exécuté uniquement sur le pair endosseur et le résultat de son exécution est envoyé à tous les pairs.  Cet algorithme de travail est appelé consensus PBFT (Practical Byzantine Fault Tolerant).  Il diffère du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BFT classique</a> en ce que le message est envoyé et aucune confirmation n'est attendue de tous les participants, mais uniquement d'un ensemble spécifique; </li><li>  Une fois que le client a reçu le nombre de réponses correspondant à la politique d'endossement, il envoie la transaction au service Commande; </li><li>  Le service de commande forme un bloc et l'envoie à tous les pairs qui s'engagent.  Le service de commande fournit une écriture séquentielle des blocs, ce qui exclut la fourchette dite du grand livre ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voir la section "Fourches"</a> ); </li><li>  Les pairs reçoivent un bloc, vérifient à nouveau la politique d'approbation, écrivent le bloc dans la blockchain et changent l'état dans la base de données «World state». </li></ul><br>  C'est-à-dire  il s'avère que la séparation des rôles entre les nœuds.  Cela offre une évolutivité et une sécurité blockchain: <br><br><ul><li>  Les contrats intelligents (chaincode) effectuent l'approbation des pairs.  Cela garantit la confidentialité des contrats intelligents, comme  il n'est pas stocké par tous les participants, mais uniquement sur les pairs qui approuvent. </li><li>  La commande devrait fonctionner rapidement.  Ceci est assuré par le fait que Ordering ne forme qu'un bloc et l'envoie à un ensemble fixe de pairs leaders. </li><li>  Les pairs engagés ne stockent que la blockchain - il peut y en avoir beaucoup et ils ne nécessitent pas beaucoup de puissance et de travail instantané. </li></ul><br>  Pour plus d'informations sur les solutions architecturales d'Hyperledger Fabric et pourquoi cela fonctionne de cette manière, voir ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Origines de l'architecture</a> ou ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hyperledger Fabric: un système d'exploitation distribué pour les blockchains autorisées</a> . <br><br>  Ainsi, Hyperledger Fabric est un système vraiment universel avec lequel vous pouvez: <br><br><ul><li>  Mettre en œuvre une logique métier arbitraire à l'aide du mécanisme de contrat intelligent; </li><li>  Écrire et recevoir des données à partir d'une base de données blockchain au format JSON; </li><li>  Fournissez et vérifiez l'accès à l'API à l'aide de l'autorité de certification. </li></ul><br>  Maintenant que nous avons compris les spécificités du tissu Hyperledger, faisons enfin quelque chose d'utile! <br><br><h2>  Développer la chaîne de blocs </h2><br><h3>  Énoncé du problème </h3><br>  La tâche consiste à implémenter le réseau Citcoin avec les fonctions suivantes: créer un compte, obtenir un solde, reconstituer le compte, transférer des pièces d'un compte à un autre.  Dessinons un modèle d'objet, que nous allons implémenter dans un contrat intelligent.  Ainsi, nous aurons des comptes qui sont identifiés par des noms et contiennent un solde et une liste de comptes.  Les comptes et une liste de comptes sont en termes d'actifs Hyperledger Fabric.  En conséquence, ils ont une histoire et un statut actuel.  Je vais essayer de le dessiner clairement: <br><br><img src="https://habrastorage.org/webt/wj/vx/uc/wjvxuc7wn8q8z8ob7efborjwfeu.png" alt="image"><br><br>  Les chiffres supérieurs sont l'état actuel, qui est stocké dans la base de données de l'État mondial.  En dessous d'eux se trouvent des figures montrant l'histoire qui est stockée sur la blockchain.  L'état actuel des actifs est modifié par les transactions.  L'actif change uniquement dans son intégralité. Par conséquent, à la suite de la transaction, un nouvel objet est créé et la valeur actuelle de l'actif entre dans l'historique. <br><br><h3>  IBM Cloud </h3><br>  Nous créons un compte dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le cloud IBM</a> .  Pour utiliser la plateforme blockchain, vous devez la mettre à niveau vers Pay-As-You-Go.  Ce processus peut ne pas être rapide, car  IBM demande des informations supplémentaires et les vérifie manuellement.  Du positif, je peux dire qu'IBM a de bons supports de formation qui vous permettent de déployer Hyperledger Fabric dans leur cloud.  J'ai aimé la série d'articles et d'exemples suivants: <br><br><ul><li>  <a href="">Créer un réseau de blockchain de base à l'aide de la plateforme Blockchain</a> </li><li>  <a href="">Créer et exécuter un contrat intelligent blockchain</a> </li><li>  <a href="">Émettre des événements à partir de la plateforme Blockchain</a> </li></ul><br>  Voici des captures d'écran de la plateforme IBM Blockchain.  Ce n'est pas une instruction pour créer une blockchain, mais simplement une démonstration de l'étendue de la tâche.  Donc, pour nos besoins, nous faisons une seule organisation: <br><br><img src="https://habrastorage.org/webt/vw/gr/co/vwgrcodh-v21eslmmfe_1nkruhk.png" alt="image"><br><br>  Nous y créons des nœuds: Orderer CA, Org1 CA, Orderer Peer: <br><br><img src="https://habrastorage.org/webt/f7/1x/g2/f71xg2fhmy258ihqyaunufjgas4.png" alt="image"><br><br>  Nous commençons les utilisateurs: <br><br><img src="https://habrastorage.org/webt/1t/k5/_i/1tk5_ihjhcimki8xaeuxenwszh0.png" alt="image"><br><br>  Créez une chaîne et appelez-la citcoin: <br><br><img src="https://habrastorage.org/webt/hv/y-/av/hvy-av3p4pjrpgonz47bcj0qebq.png" alt="image"><br><br>  Essentiellement, Channel est une blockchain, donc il commence par un bloc zéro (bloc Genesis): <br><br><img src="https://habrastorage.org/webt/9x/n0/c0/9xn0c0ihpxzmytycm9olkqi6klm.png" alt="image"><br><br><h3>  Rédaction d'un contrat intelligent </h3><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Citcoin smart-contract v1.5 for Hyperledger Fabric * (c) Alexey Sushkov, 2019 */</span></span> <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Contract } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fabric-contract-api'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> maxAccounts = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CitcoinEvents</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contract</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> instantiate(ctx) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.info(<span class="hljs-string"><span class="hljs-string">'instantiate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> emptyList = []; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ctx.stub.putState(<span class="hljs-string"><span class="hljs-string">'accounts'</span></span>, Buffer.from(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(emptyList))); } <span class="hljs-comment"><span class="hljs-comment">// Get all accounts async GetAccounts(ctx) { // Get account list: let accounts = '{}' let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { accounts = JSON.parse(accountsData.toString()); } else { throw new Error('accounts not found'); } return accountsData.toString() } // add a account object to the blockchain state identifited by their name async AddAccount(ctx, name, balance) { // this is account data: let account = { name: name, balance: Number(balance), type: 'account', }; // create account: await ctx.stub.putState(name, Buffer.from(JSON.stringify(account))); // Add account to list: let accountsData = await ctx.stub.getState('accounts'); if (accountsData) { let accounts = JSON.parse(accountsData.toString()); if (accounts.length &lt; maxAccounts) { accounts.push(name); await ctx.stub.putState('accounts', Buffer.from(JSON.stringify(accounts))); } else { throw new Error('Max accounts number reached'); } } else { throw new Error('accounts not found'); } // return object return JSON.stringify(account); } // Sends money from Account to Account async SendFrom(ctx, fromAccount, toAccount, value) { // get Account from let fromData = await ctx.stub.getState(fromAccount); let from; if (fromData) { from = JSON.parse(fromData.toString()); if (from.type !== 'account') { throw new Error('wrong from type'); } } else { throw new Error('Accout from not found'); } // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balances if ((from.balance - Number(value)) &gt;= 0 ) { from.balance -= Number(value); to.balance += Number(value); } else { throw new Error('From Account: not enought balance'); } await ctx.stub.putState(from.name, Buffer.from(JSON.stringify(from))); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "SendFrom", from: from.name, to: to.name, balanceFrom: from.balance, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('SendFrom', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } // get the state from key async GetState(ctx, key) { let data = await ctx.stub.getState(key); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // GetBalance async GetBalance(ctx, accountName) { let data = await ctx.stub.getState(accountName); let jsonData = JSON.parse(data.toString()); return JSON.stringify(jsonData); } // Refill own balance async RefillBalance(ctx, toAccount, value) { // get Account to let toData = await ctx.stub.getState(toAccount); let to; if (toData) { to = JSON.parse(toData.toString()); if (to.type !== 'account') { throw new Error('wrong to type'); } } else { throw new Error('Accout to not found'); } // update the balance to.balance += Number(value); await ctx.stub.putState(to.name, Buffer.from(JSON.stringify(to))); // define and set Event let Event = { type: "RefillBalance", to: to.name, balanceTo: to.balance, value: value }; await ctx.stub.setEvent('RefillBalance', Buffer.from(JSON.stringify(Event))); // return to object return JSON.stringify(from); } } module.exports = CitcoinEvents;</span></span></code> </pre> <br>  Intuitivement, tout devrait être clair ici: <br><br><ul><li>  Il existe plusieurs fonctions (AddAccount, GetAccounts, SendFrom, GetBalance, RefillBalance) que le programme de démonstration appellera à l'aide de l'API Hyperledger Fabric. </li><li>  Les fonctions SendFrom et RefillBalance génèrent des événements (Event) que le programme de démonstration recevra. </li><li>  Fonction instancier - est appelée une fois lors de l'instanciation d'un contrat intelligent.  En fait, il n'est pas appelé une seule fois, mais à chaque fois qu'une version d'un contrat intelligent est modifiée.  Par conséquent, l'initialisation de la liste avec un tableau vide est une mauvaise idée, car  Maintenant, lors du changement de version d'un contrat intelligent, nous perdrons la liste actuelle.  Mais rien, j'apprends juste). </li><li>  Les comptes et une liste de comptes (comptes) sont des structures de données JSON.  Pour la manipulation des données, JS est utilisé. </li><li>  Vous pouvez obtenir la valeur actuelle d'un actif en appelant la fonction getState et la mettre à jour à l'aide de putState. </li><li>  Lors de la création d'un compte, la fonction AddAccount est appelée, dans laquelle une comparaison est effectuée pour le nombre maximal de comptes dans la blockchain (maxAccounts = 5).  Et il y a un montant (remarqué?), Ce qui entraîne une augmentation infinie du nombre de comptes.  De telles erreurs doivent être évitées) </li></ul><br>  Ensuite, téléchargez le contrat intelligent sur Channel et installez-le: <br><br><img src="https://habrastorage.org/webt/ew/3a/ok/ew3aok9gsgrcaadaor-b0xwxllg.png" alt="image"><br><br>  Nous examinons la transaction pour l'installation de Smart Contract: <br><br><img src="https://habrastorage.org/webt/om/m4/x9/omm4x9np0s1i8wjki6guvvyc46o.png" alt="image"><br><br>  Nous regardons les détails de notre chaîne: <br><br><img src="https://habrastorage.org/webt/tj/bd/eb/tjbdebruoky86aiwhx5t7ayqljq.png" alt="image"><br><br>  En conséquence, nous obtenons le diagramme de réseau de blockchain suivant dans le cloud IBM.  Il existe également un programme de démonstration exécuté dans le cloud Amazon sur un serveur virtuel (voir la section suivante pour plus de détails): <br><br><img src="https://habrastorage.org/webt/bx/sb/1s/bxsb1s6s0c36u_2vh0lmjqmqj9u.png" alt="image"><br><br><h2>  Création d'une interface graphique pour les appels d'API Hyperledger Fabric </h2><br>  Hyperledger Fabric possède une API qui peut être utilisée pour: <br><br><ul><li>  Chaîne de créations; </li><li>  Connexions homologues au canal; </li><li>  Installation et instanciation de contrats intelligents dans le canal; </li><li>  Appel de transaction; </li><li>  Demander des informations sur la blockchain. </li></ul><br><h3>  Développement d'applications </h3><br>  Dans notre programme de démonstration, nous n'utiliserons l'API que pour appeler des transactions et demander des informations, car  Nous avons déjà pris les mesures restantes à l'aide de la plateforme de blockchain IBM.  Nous écrivons une interface graphique en utilisant une pile technologique standard: Express.js + Vue.js + Node.js.  Vous pouvez écrire un article séparé sur la façon de commencer à créer des applications Web modernes.  Ici, je vais laisser un lien vers la série de conférences que j'ai le plus appréciée: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Full Stack Web App utilisant Vue.js &amp; Express.js</a> .  Le résultat est une application client-serveur avec une interface graphique familière dans le style de Material Design de Google.  L'API REST entre le client et le serveur se compose de plusieurs appels: <br><br><ul><li>  HyperledgerDemo / v1 / init - initialise la blockchain; </li><li>  HyperledgerDemo / v1 / accounts / list - obtenir une liste de tous les comptes </li><li>  HyperledgerDemo / v1 / account? Name = Bob &amp; balance = 100 - créer un compte Bob; </li><li>  HyperledgerDemo / v1 / info? Account = Bob - obtenir des informations sur le compte Bob; </li><li>  HyperledgerDemo / v1 / transaction? De = Bob &amp; à = Alice &amp; volume = 2 - transférez deux pièces de Bob à Alice; </li><li>  HyperledgerDemo / v1 / déconnect - ferme la connexion à la blockchain. </li></ul><br>  J'ai mis la description de l'API avec des exemples sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de Postman</a> , un programme bien connu pour tester l'API HTTP. <br><br><h3>  Application de démonstration d'Amazon Cloud </h3><br>  L'application a été téléchargée sur Amazon, car  IBM n'a jusqu'à présent pas réussi à mettre à niveau mon compte et à autoriser la création de serveurs virtuels.  Comment la cerise a attaché le domaine: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.citcoin.info</a> .  Je vais garder le serveur allumé un peu, puis je l'éteindrai, car  les centimes de loyer dégoulinent, et les pièces de citcoin ne sont pas encore cotées en bourse) J'ai mis des captures d'écran de la démo dans l'article pour que la logique du travail soit claire.  L'application de démonstration peut: <br><br><ul><li>  Initialisez la blockchain; </li><li>  Créez un compte (mais maintenant ne créez pas de nouveau compte, car le nombre maximal de comptes prescrit dans le contrat intelligent a été atteint dans la blockchain); </li><li>  Obtenez une liste de comptes; </li><li>  Transférer des pièces de citcoin entre Alice, Bob et Alex; </li><li>  Recevoir des événements (mais maintenant il n'y a aucun moyen d'afficher les événements, par conséquent, pour plus de simplicité, l'interface indique que les événements ne sont pas pris en charge); </li><li>  Consigner les actions. </li></ul><br>  Tout d'abord, initialisez la blockchain: <br><br><img src="https://habrastorage.org/webt/o8/j5/te/o8j5tev3u9drgclmlfzluoys-e4.png" alt="image"><br><br>  Ensuite, démarrez votre compte, ne vous souciez pas de l'équilibre: <br><br><img src="https://habrastorage.org/webt/e1/eo/ck/e1eockzjedclvktadadhnbsgkem.png" alt="image"><br><br>  Nous obtenons une liste de tous les comptes disponibles: <br><br><img src="https://habrastorage.org/webt/_0/ih/o-/_0iho-vlhsg0v6abggskdshpmow.png" alt="image"><br><br>  Nous sélectionnons l'expéditeur et le destinataire, nous obtenons leurs soldes.  Si l'expéditeur et le destinataire sont identiques, leur compte sera réapprovisionné: <br><br><img src="https://habrastorage.org/webt/c7/go/vu/c7govuxmtn4wkcc_4byqz5dzgd8.png" alt="image"><br><br>  Dans le journal, nous surveillons l'exécution des transactions: <br><br><img src="https://habrastorage.org/webt/lw/sj/tb/lwsjtbmwe8oplpok_mg8ocvjirq.png" alt="image"><br><br>  En fait, avec un programme de démonstration, c'est tout.  Ensuite, vous pouvez voir notre transaction dans la blockchain: <br><br><img src="https://habrastorage.org/webt/cp/cu/ik/cpcuikr02wqi_nwht9liarcpkhk.png" alt="image"><br><br>  Et la liste générale des transactions: <br><br><img src="https://habrastorage.org/webt/_z/1t/ej/_z1tejxfntvmmqugqzf04plkrae.png" alt="image"><br><br>  Avec cela, nous avons terminé avec succès la mise en œuvre de PoC pour créer le réseau Citcoin.  Que faut-il faire d'autre pour que Citcoin devienne un réseau de transfert de pièces à part entière?  Juste un peu: <br><br><ul><li>  Au stade de la création d'un compte, implémentez la génération d'une clé privée / publique.  La clé privée doit être stockée dans l'utilisateur du compte, publique dans la blockchain. </li><li>  Effectuez un transfert de pièces dans lequel une clé publique est utilisée pour identifier l'utilisateur, pas un nom. </li><li>  Cryptez les transactions allant de l'utilisateur au serveur avec sa clé privée. </li></ul><br><h2>  Conclusion </h2><br>  Nous avons mis en place le réseau Citcoin avec des fonctions: ajouter un compte, obtenir un solde, réapprovisionner votre compte, transférer des pièces d'un compte à un autre.  Alors, combien nous a-t-il coûté pour créer un PoC? <br><br><ul><li>  Nous devons étudier la blockchain en général et Hyperledger Fabric en particulier; </li><li>  Apprenez à utiliser les clouds IBM ou Amazon; </li><li>  Apprenez le langage de programmation JS et un cadre Web; </li><li>  Si certaines données doivent être stockées non pas dans la blockchain, mais dans une base de données distincte, alors apprenez à vous intégrer, par exemple, avec PostgreSQL; </li><li>  Et enfin et surtout - sans connaissance de Linux dans le monde moderne, nulle part!) </li></ul><br>  Bien sûr, pas sorcier, mais il faut transpirer! <br><br><h3>  Sources GitHub </h3><br>  Il a mis le code source sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  Une brève description du référentiel: <br>  Répertoire " <b>serveur</b> " - serveur Node.js <br>  Répertoire " <b>client</b> " - Client Node.js <br>  Le répertoire " <b>blockchain</b> " (les valeurs des paramètres et les clés, bien sûr, ne fonctionnent pas et ne sont données qu'à titre d'exemple): <br><br><ul><li>  contrat - source du contrat intelligent </li><li>  portefeuille - clés d'utilisateur pour utiliser l'API Hyperledger Fabric. </li><li>  * .cds - versions compilées de contrats intelligents </li><li>  * Fichiers .json - exemples de fichiers de configuration pour l'utilisation de l'API Hyperledger Fabric </li></ul><br>  <b><font color="#B22222">Ce n'est qu'un début!</font></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466157/">https://habr.com/ru/post/fr466157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466147/index.html">Gestionnaire d'affichage de données réactif. Présentation</a></li>
<li><a href="../fr466149/index.html">Création d'un symbole de connecteur avec du texte «dynamique» dans OrCAD</a></li>
<li><a href="../fr466151/index.html">Enquête: programmes étranges dans le registre des logiciels nationaux</a></li>
<li><a href="../fr466153/index.html">Création d'un document de conception de mission de jeu narratif en utilisant l'exemple de Last of Us</a></li>
<li><a href="../fr466155/index.html">Architecture et fonctionnalités de Tarantool Data Grid</a></li>
<li><a href="../fr466159/index.html">Pourquoi la vitesse est importante sur un échange moderne et comment dépasser les concurrents: 3 façons pratiques</a></li>
<li><a href="../fr466165/index.html">Comment l'intelligence artificielle aide à gérer les projets</a></li>
<li><a href="../fr466169/index.html">Offre spéciale pour les étudiants actifs de JetBrains</a></li>
<li><a href="../fr466171/index.html">Cinq raisons d'opter pour JUG.EKB</a></li>
<li><a href="../fr466179/index.html">fform: React & JSONSchema - flexibilité maximale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>