<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßê üë©üèø‚Äçüé® üïù Test Python avec pytest. Simple, rapide, efficace et √©volutif. Avant-propos et introduction ü§≥üèΩ üë©üèΩ‚Äç‚öïÔ∏è üêÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Plus loin 


 Les tests de logiciels syst√©matiques, en particulier dans la communaut√© Python, sont souvent compl√®tement ignor√©s ou effectu√©s d'une man...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Test Python avec pytest. Simple, rapide, efficace et √©volutif. Avant-propos et introduction</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426699/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plus loin</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p><br><p>  <em>Les tests de logiciels syst√©matiques, en particulier dans la communaut√© Python, sont souvent compl√®tement ignor√©s ou effectu√©s d'une mani√®re sp√©ciale.</em>  <em>De nombreux programmeurs Python ignorent totalement l'existence de pytest.</em>  <em>Brian Ocken prend la peine de prouver que tester un logiciel avec pytest est simple, naturel et m√™me int√©ressant.</em> <em><br></em> <br>  Dmitry Zinoviev <br>  Auteur de Data Science Essentials in Python </p><br><p><img src="https://habrastorage.org/webt/hd/--/9w/hd--9w134j0rxhmxftrflbbdopy.png"></p><a name="habracut"></a><br><p>  Les exemples de ce livre sont √©crits en utilisant Python 3.6 et pytest 3.2.  pytest 3.2 prend en charge Python 2.6, 2.7 et Python 3.3+. </p><br><blockquote>  Le code source du projet T√¢ches, ainsi que pour tous les tests pr√©sent√©s dans ce livre, est disponible sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest/source_code">lien</a> sur la page Web du livre √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest">pragprog.com</a> .  Vous n'avez pas besoin de t√©l√©charger le code source pour comprendre le code de test;  le code de test est pr√©sent√© sous une forme pratique dans les exemples.  Mais pour suivre les t√¢ches du projet ou adapter des exemples de test pour tester votre propre projet (vos mains ne sont pas li√©es!), Vous devez vous rendre sur la page Web du livre et t√©l√©charger le travail.  L√†, sur la page Web du livre, il y a un lien pour les messages d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest/errata">erreur</a> et un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://forums.pragprog.com/forums/438">forum de discussion</a> . </blockquote><p>  Sous le spoiler se trouve une liste d'articles de cette s√©rie. </p><br><div class="spoiler">  <b class="spoiler_title">Table des mati√®res</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Introduction</strong></a> (cet article) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 1: Premiers pas avec Pytest</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 2: √âcriture des fonctions de test</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 3: Appareils Pytest</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 4: Luminaires int√©gr√©s</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 5: Plugins</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 6: Configuration</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Chapitre 7: Utilisation de pytest avec d'autres outils</strong></a> </li></ul></div></div><br><h1 id="blagodarnosti">  Remerciements </h1><br><p>  Je dois d'abord remercier Michelle - ma femme et ma meilleure amie.  Dommage que vous ne voyiez pas la pi√®ce dans laquelle j'√©cris.  Au lieu d'une table, j'ai une table √† manger carr√©e en ch√™ne antique sur laquelle il y a assez d'espace pour que le papier soit dispos√©.  Une belle biblioth√®que en verre avec mes jouets spatiaux r√©tro que nous avons collectionn√©s au fil des ann√©es, ainsi que des livres techniques, des circuits imprim√©s et des balles de jonglage.  Bo√Ætes en aluminium antiques pour stocker le papier vers le haut remplies de notes, de cordons et m√™me des autocollants restants pour les fus√©es.  Un mur est recouvert de velours, que nous avons achet√© il y a de nombreuses ann√©es, lorsque le magasin de tissus a d√©cid√© de fermer d√©finitivement.  Le tissu devrait calmer l'√©cho lorsque j'enregistre des podcasts. </p><br><p>  J'aime √©crire ici non seulement parce que c'est pratique et coh√©rent avec mon monde int√©rieur, mais aussi parce que c'est l'espace que Michel a cr√©√© avec moi et pour moi.  Elle et moi avons toujours √©t√© une √©quipe, et elle a incroyablement soutenu mes id√©es folles pour √©crire un blog, d√©marrer un podcast ou deux, et maintenant, au cours de la derni√®re ann√©e, √©crire ce livre.  Elle s'est assur√©e que j'avais le temps et l'espace pour √©crire.  Quand je suis fatigu√©e et que je me demande si j'ai encore la force d'√©crire, elle me propose de continuer pendant vingt minutes et de regarder comment je me sentirai alors, elle a fait de m√™me lorsqu'elle m'a aid√© √† traverser la derni√®re soir√©es universitaires.  Je n'aurais vraiment pas pu le faire sans elle. </p><br><p>  J'ai aussi deux filles √©tonnamment √©tonnantes, curieuses et brillantes, Gabriella et Sofia, qui sont deux de mes plus grandes fans.  Ella propose √† tous ceux qui parlent de programmation d'√©couter mes podcasts, et Phia a affich√© un autocollant pour le code de test sur son sac √† dos, qu'elle a pris en deuxi√®me ann√©e. </p><br><p>  Il y a tellement plus de personnes √† remercier. </p><br><p>  Mon √©diteur, Katherine Dvorak, m'a aid√© √† rassembler un tas d'id√©es et de sujets al√©atoires dans une progression coh√©rente, et c'est la raison pour laquelle il s'agit d'un livre, pas d'une s√©rie de billets de blog r√©unis.  Je me suis lanc√©e dans ce projet en tant que blogueuse et je me suis trop attach√©e aux nombreux titres, sous-titres et √©l√©ments de liste, et Katie m'a patiemment guid√© pour que je puisse devenir un meilleur √©crivain. </p><br><p>  Merci √† Suzanne Davidson Palatinate, Andy Hunt et au reste de Pragmatic Bookshelf de m'avoir donn√© une chance. </p><br><p>  Les critiques techniques m'ont gard√© honn√™te dans pytest, mais aussi dans le style Python, et sont la raison pour laquelle les exemples de code suivent PEP 8. Merci √† Oliver Bestwalter, Florian Bruhin, Floris Bruinog, Mark Goody, Peter Hampton, Dave Hunt, Al Crinker, Lokesh Kumaru Makani, Bruno Oliveira, Ronnie Pfannschmidt, Rafael Pierzine, Luciano Ramallo, Frank Ruiz et Dmitry Zinoviev.  Beaucoup de cette liste sont √©galement des d√©veloppeurs de noyaux pytest et / ou prennent en charge d'incroyables plugins pytest. </p><br><p>  Un merci sp√©cial √† Luciano.  Apr√®s avoir √©crit ce livre, j'ai envoy√© les quatre premiers chapitres √† plusieurs critiques.  Luciano √©tait l'un d'entre eux, et sa critique √©tait la plus difficile √† lire.  Je ne pense pas avoir suivi tous ses conseils, mais √† cause de ses remarques, j'ai r√©vis√© et r√©√©crit la plupart des trois premiers chapitres et chang√© quelque chose dans le reste du livre. </p><br><p>  Merci √† toute l'√©quipe de pytest-dev d'avoir cr√©√© un outil de test aussi cool.  Merci √† Oliver Bestwalter, Florian Bruhin, Floris Bruinoohe, Dave Hunt, Holger Kreckel, Bruno Oliveira, Ronnie Pfannschmidt, Rafael Pierzine et bien d'autres pour avoir r√©pondu √† mes questions sur la vie au fil des ans. </p><br><p>  Et enfin et surtout, je dois remercier les personnes qui m'ont remerci√©e.  Ils en ont profit√© pour m'informer par mail que mon travail leur a fait gagner du temps et a facilit√© le travail.  C'est cool et √ßa me fait plaisir!  Je vous remercie! </p><br><p>  <strong>Brian okken</strong> </p><br><p>  <em>septembre 2017</em> </p><br><h1 id="predislovie">  Pr√©face </h1><br><p>  L'utilisation de Python augmente non seulement dans le d√©veloppement de logiciels, mais aussi dans des domaines tels que l'analyse de donn√©es, la recherche, les tests et les mesures, ainsi que dans d'autres secteurs.  Le d√©veloppement de Python dans de nombreux domaines critiques s'accompagne √©galement de la volont√© d'effectuer des tests logiciels correctement, efficacement et efficacement pour s'assurer que les programmes fonctionnent correctement et donnent les bons r√©sultats.  De plus, de plus en plus de projets logiciels s'√©tendent sur l'int√©gration continue et incluent une phase de test automatis√©e car les cycles de publication sont raccourcis et un test manuel minutieux de projets de plus en plus complexes n'est tout simplement pas faisable.  Les √©quipes doivent pouvoir faire confiance aux tests effectu√©s par les serveurs d'int√©gration continue qui leur indiquent s'ils peuvent faire suffisamment confiance √† leur logiciel pour le publier. </p><br><p>  Entrez pytest. </p><br><h2 id="chto-takoe-pytest">  Qu'est-ce que pytest? </h2><br><p>  Outil de test Python fiable, pytest peut √™tre utilis√© pour tous les types et niveaux de tests logiciels.  pytest peut √™tre utilis√© par les √©quipes de d√©veloppement, les √©quipes d'assurance qualit√©, les groupes de test ind√©pendants, les personnes pratiquant le TDD et les projets open source.  En fait, les projets sur Internet sont pass√©s de l' <em>unittest</em> ou <em>nose</em> √† <em>pytest</em> , y compris Mozilla et Dropbox.  Pourquoi?  Parce que pytest offre des fonctionnalit√©s puissantes comme la r√©√©criture "assert", des mod√®les de plug-ins tiers et un mod√®le de montage puissant mais simple qui est in√©gal√© dans tout autre cadre de test. </p><br><p>  pytest est une plate-forme de test de logiciels, ce qui signifie que pytest est un programme en ligne de commande.  Un outil qui trouve automatiquement des tests √©crits, ex√©cute des tests et √©crit des rapports avec le r√©sultat.  Il poss√®de une biblioth√®que de lotions que vous pouvez utiliser dans les tests pour vous aider √† tester plus efficacement.  Il peut √™tre √©tendu en √©crivant vos propres plugins ou en installant des tiers.  Il peut √™tre utilis√© pour tester les distributions Python.  Et il s'int√®gre parfaitement avec d'autres outils tels que l'int√©gration continue et l'automatisation Web. </p><br><p>  Voici quelques raisons pour lesquelles pytest se distingue parmi de nombreux autres tests de syst√®mes int√©gr√©s: </p><br><ul><li>  Les tests simples sont faciles √† √©crire dans pytest. </li><li>  Les tests complexes sont encore plus faciles √† √©crire. </li><li>  Les tests sont faciles √† lire. </li><li>  Les tests sont faciles √† lire.  (Il est si important que cela soit indiqu√© deux fois.) </li><li>  Vous pouvez commencer en quelques secondes. </li><li> <code>assert</code> utilis√© pour √©chouer au test, pas <code>self.assertEqual()</code> ou <code>self.assertLessThan()</code> .  <strong>Affirmez</strong> ! </li><li>  Vous pouvez utiliser pytest pour ex√©cuter des tests √©crits pour unittest ou nez. </li></ul><br><p>  <strong>pytest est</strong> activement d√©velopp√© et soutenu par une communaut√© passionn√©e et croissante.  Il est tellement extensible et flexible qu'il s'int√®gre facilement dans votre flux de travail.  Et comme il est install√© s√©par√©ment de votre version de Python, vous pouvez utiliser la m√™me derni√®re version de pytest sur l'h√©ritage Python 2 (2.6 et sup√©rieur) et Python 3 (3.3 et sup√©rieur). </p><br><h1 id="izuchenie-pytest-pri-testirovanii-primera-prilozheniya">  Apprentissage de pytest lors du test d'un exemple d'application </h1><br><p>  Aimeriez-vous apprendre pytest en testant des exemples stupides que vous ne verrez jamais dans la vraie vie?  Moi aussi.  Nous n'allons pas le faire dans ce livre.  Au lieu de cela, nous allons √©crire des tests pour un projet qui, j'esp√®re, a beaucoup en commun avec les applications que vous testerez apr√®s avoir lu ce livre. </p><br><h2 id="proekt-tasks">  Projet de t√¢ches </h2><br><p>  L'application que nous examinerons s'appelle T√¢ches.  T√¢ches est une application de suivi des t√¢ches minimale avec une interface de ligne de commande.  Il a suffisamment de points communs avec de nombreux autres types d'applications, ce qui, j'esp√®re, vous permet de voir facilement comment les concepts de test que vous apprenez lors du d√©veloppement de tests contre des probl√®mes sont applicables √† vos projets, maintenant et √† l'avenir. </p><br><p>  Bien que T√¢ches poss√®de une interface de ligne de commande (CLI), la CLI interagit avec le reste du code via une interface de programmation d'application (API).  Une API est l'interface vers laquelle nous dirigerons la plupart de nos tests.  L'API interagit avec la couche de gestion de base de donn√©es, qui interagit avec la base de donn√©es de documents - <em>MongoDB</em> ou <em>TinyDB</em> .  Le type de base de donn√©es est configur√© lors de l'initialisation de la base de donn√©es.  Avant de nous concentrer sur l'API, examinons les t√¢ches elles-m√™mes, un outil en ligne de commande qui fournit une interface utilisateur pour les t√¢ches. </p><br><p>  Voici un exemple de session: </p><br><pre> <code class="plaintext hljs">$ tasks add 'do something' --owner Brian $ tasks add 'do something else' $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian False do something 2 False do something else $ tasks update 2 --owner Brian $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian False do something 2 Brian False do something else $ tasks update 1 --done True $ tasks list ID owner done summary -- ----- ---- ------- 1 Brian True do something 2 Brian False do something else $ tasks delete 1 $ tasks list ID owner done summary -- ----- ---- ------- 2 Brian False do something else $</code> </pre> <br><blockquote>  <strong><em>Remarque du traducteur:</em></strong> dans le cas de l'utilisation de la plate-forme Windows, j'ai rencontr√© plusieurs probl√®mes lors du test de cette session. <br><ol><li>  Un dossier doit √™tre cr√©√© pour la base de donn√©es <strong><code>tasks_db</code></strong> nomm√© <strong><code>tasks_db</code></strong> dans le dossier de votre utilisateur.  Par exemple, <code>c:\Users\User_1\tasks_db\</code> </li><li>  Utilisez des guillemets au lieu des apostrophes.  Sinon, nous obtenons une telle erreur. <br><br>  $ t√¢ches ajouter ¬´faire autre chose¬ª <br>  Utilisation: les t√¢ches ajoutent [OPTIONS] R√âSUM√â <br><br>  Erreur: vous avez obtenu des arguments suppl√©mentaires inattendus (autre chose ') <br></li></ol><br></blockquote><p>  Ce n'est pas l'application de gestion des t√¢ches la plus difficile, mais assez complexe √† utiliser pour √©tudier les tests. </p><br><h2 id="strategiya-testirovaniya">  Strat√©gie de test </h2><br><p>  Bien que pytest soit adapt√© aux tests unitaires, aux tests d'int√©gration, aux tests syst√®me ou aux tests de bout en bout et aux tests fonctionnels, la strat√©gie de test du projet T√¢ches se concentre principalement sur les tests fonctionnels sous-cutan√©s.  Voici quelques d√©finitions utiles: </p><br><ul><li>  <em>Test unitaire</em> : test qui teste un petit morceau de code, tel qu'une fonction ou une classe, ind√©pendamment du reste du syst√®me.  Je passe en revue les tests du chapitre 1, Prise en main de pytest, √† la page 1, pour effectuer des tests unitaires. La structure des donn√©es des t√¢ches. </li><li>  <em>Test d'int√©gration</em> : un test qui teste un morceau de code plus volumineux peut inclure plusieurs classes ou sous-syst√®mes.  La plupart du temps, l'√©tiquette utilis√©e pour certains tests est plus grande qu'un test unitaire, mais plus petite qu'un test syst√®me. </li><li>  <strong>Test syst√®me</strong> <em>(de bout en bout)</em> : test qui teste l'ensemble du syst√®me test√© dans un environnement aussi proche que possible de l'environnement de l'utilisateur final. </li><li>  <em>Test fonctionnel</em> : test qui teste une fonctionnalit√© du syst√®me.  Un test qui teste la fa√ßon dont nous ajoutons, supprimons ou mettons √† jour un √©l√©ment de t√¢che dans T√¢ches est un test fonctionnel. </li><li>  <strong>Test sous-cutan√©</strong> : test ex√©cut√© non pas pour l'interface utilisateur final, mais pour une interface situ√©e juste en dessous de la surface.  √âtant donn√© que la plupart des tests de ce livre sont test√©s au niveau de l'API, et non au niveau de la CLI, ils sont qualifi√©s de tests sous-cutan√©s. </li></ul><br><h2 id="kak-organizovana-eta-kniga">  Comment ce livre est-il organis√©? </h2><br><p>  Au chapitre 1, ¬´Prise en main de pytest¬ª √† la page 1, vous installez pytest et vous vous pr√©parez √† l'utiliser.  Ensuite, vous prenez une partie du projet T√¢ches - une structure de donn√©es repr√©sentant une seule t√¢che (nomm√©e tuple appel√©e T√¢che) et l'utilisez pour tester des exemples.  Vous apprendrez √† ex√©cuter pytest avec plusieurs fichiers de test.  Vous verrez de nombreuses options de ligne de commande populaires et extr√™mement utiles pour pytest, telles que la possibilit√© de red√©marrer les √©checs de test, d'arr√™ter l'ex√©cution apr√®s le premier √©chec, de contr√¥ler la trace de la pile et la version multi-pages du test, et bien plus encore. </p><br><p>  Dans le chapitre 2, ¬´Cr√©ation de fonctions de test¬ª, page 23, vous installez les t√¢ches localement avec pip et voyez comment structurer les tests dans un projet Python.  Vous devez le faire pour commencer √† √©crire des tests pour une application r√©elle.  Tous les exemples de ce chapitre ex√©cutent des tests pour l'application install√©e, y compris l'√©criture dans la base de donn√©es.  Les fonctions de test r√©elles sont au centre de ce chapitre et vous apprendrez √† utiliser <code>assert</code> efficacement dans les tests.  Vous en apprendrez √©galement sur les marqueurs.  Une fonction qui vous permet de marquer de nombreux tests qui s'ex√©cuteront simultan√©ment, de marquer des tests qui seront ignor√©s, ou de dire √† pytest que nous savons d√©j√† que certains tests √©choueront.  Je vais vous expliquer comment ex√©cuter uniquement certains tests, non seulement avec des marqueurs, mais aussi en structurant notre code de test en r√©pertoires, modules et classes, et comment ex√©cuter ces sous-ensembles de tests. </p><br><p>  Tous les codes de test ne sont pas inclus dans les fonctions de test.  Dans le chapitre 3, ¬´Appareils pytest¬ª, √† la page 49, vous apprendrez comment mettre des donn√©es de test dans des appareils de test, ainsi que configurer et casser le code.  La d√©finition de l'√©tat d'un syst√®me (ou d'un sous-syst√®me ou d'une unit√© individuelle) est une partie importante des tests logiciels.  Vous apprendrez cet aspect des montages pytest pour aider √† initialiser la base de donn√©es du projet T√¢ches et pr√©remplir les donn√©es de test pour certains tests.  Les appareils sont une partie incroyablement puissante de pytest, et vous apprendrez √† les utiliser efficacement pour r√©duire davantage la duplication du code de test et aider √† rendre votre code de test incroyablement lisible et maintenable.  Les appareils Pytest sont √©galement param√©trables, similaires aux fonctions de test, et vous utiliserez cette fonction pour pouvoir ex√©cuter tous vos tests avec TinyDB et MongoDB, les parties du serveur de base de donn√©es prises en charge par les t√¢ches. </p><br><p>  Au chapitre 4, ¬´Luminaires int√©gr√©s¬ª, √† la page 71, vous verrez certains des luminaires int√©gr√©s fournis par pytest.  Vous apprendrez comment les appareils int√©gr√©s pytest peuvent suivre les r√©pertoires et fichiers temporaires pour vous, vous aider √† v√©rifier la sortie du code de test, utiliser des correctifs de singe, rechercher des avertissements et bien plus encore. </p><br><p>  Dans le chapitre 5, ¬´Plugins¬ª, page 95, vous apprendrez √† ajouter des options de ligne de commande √† pytest, √† modifier la sortie de pytest et √† partager les param√®tres de pytest, y compris les fixtures, avec d'autres utilisateurs via l'√©criture, l'empaquetage et la distribution ( distribution) propres plugins.  Le plugin que nous d√©veloppons dans ce chapitre est utilis√© pour cr√©er un peu plus les erreurs de test que nous voyons lors des tests de t√¢ches.  Vous apprendrez √©galement comment tester correctement les plugins.  Quel genre de m√©ta?  Et juste au cas o√π, si vous n'√™tes pas assez inspir√© par ce chapitre pour √©crire vos propres plugins, j'ai ramass√© un tas d'excellents plugins pour montrer ce qui est possible dans l'annexe 3, ¬´Plugin Sampler Pack¬ª, page 163. </p><br><p>  En parlant de personnalisation, au chapitre 6, ¬´Configuration¬ª, page 113, vous apprendrez comment configurer le lancement de pytest par d√©faut pour votre projet √† l'aide des fichiers de configuration.  Avec le fichier <em>pytest.ini</em> , vous pouvez faire des choses telles que le stockage des param√®tres de ligne de commande afin que vous n'ayez pas √† les saisir tout le temps, dire √† pytest de ne pas chercher dans les r√©pertoires sp√©cifiques des fichiers de test, sp√©cifier la version minimale de pytest que votre tests, et plus encore.  Ces √©l√©ments de configuration peuvent √™tre plac√©s dans <em>tox.ini</em> ou <em>setup.cfg</em> . </p><br><p>  Dans le dernier chapitre, Chapitre 7, Utilisation de pytest avec d'autres outils, √† la page 125, vous verrez comment vous pouvez prendre le pytest d√©j√† puissant et surcharger vos tests avec des outils suppl√©mentaires.  Vous ex√©cuterez le projet T√¢ches sur plusieurs versions de Python avec tox.  Vous testerez les t√¢ches CLI sans ex√©cuter le reste du syst√®me avec une simulation.  Vous utiliserez coverage.py pour v√©rifier si le code source du projet de t√¢che est en cours de test.  Vous utiliserez Jenkins pour ex√©cuter des suites de tests et afficher les r√©sultats au fil du temps.  Et enfin, vous verrez comment pytest peut √™tre utilis√© pour ex√©cuter des tests plus intacts, ainsi que pour √©changer des appareils de style pytest avec des tests bas√©s sur unittest. </p><br><h2 id="chto-vam-nuzhno-znat">  Ce que vous devez savoir </h2><br><p>  <strong>Python</strong> </p><br><p>  Vous n'avez pas besoin d'√™tre un gourou de Python.  Les exemples ne font rien de surnaturel ou de bizarre. </p><br><p>  <strong>pip</strong> </p><br><p>  Vous devez utiliser pip pour installer les plugins pytest et pytest lui-m√™me.  Si vous souhaitez mettre √† niveau pip, voir Annexe 2, pip, √† la page 159. </p><br><h2 id="komandnaya-stroka">  Ligne de commande </h2><br><p>  J'ai √©crit ce livre et captur√© des exemples de sortie en utilisant bash sur un ordinateur portable Mac.  Cependant, les seules commandes que j'utilise dans bash sont cd pour aller dans un r√©pertoire sp√©cifique et bien s√ªr pytest.  √âtant donn√© que cd existe dans Windows cmd.exe et dans tous les shells Unix que je connais, tous les exemples doivent √™tre disponibles pour s'ex√©cuter dans n'importe quelle application de terminal que vous d√©cidez d'utiliser. </p><br><p>  C‚Äôest tout.  Vous n'avez pas besoin d'√™tre un expert en programmation pour commencer √† √©crire des tests automatis√©s avec pytest. </p><br><h2 id="primery-koda-i-internet-resursy">  Exemples de code et ressources Internet </h2><br><p>  Les exemples de ce livre sont √©crits en utilisant Python 3.6 et pytest 3.2.  pytest 3.2 prend en charge Python 2.6, 2.7 et Python 3.3+. </p><br><p>  Le code source du projet T√¢ches, ainsi que pour tous les tests pr√©sent√©s dans ce livre, est disponible sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest/source_code">lien</a> sur la page Web du livre √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest">pragprog.com</a> .  Vous n'avez pas besoin de t√©l√©charger le code source pour comprendre le code de test;  le code de test est pr√©sent√© sous une forme pratique dans les exemples.  Mais afin de suivre les t√¢ches du projet ou d'adapter des exemples de test pour tester votre propre projet (vos mains ne sont pas li√©es!), Vous devez vous rendre sur la page Web du livre pour t√©l√©charger le travail.  L√†, sur la page Web du livre, il y a un lien vers le message d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://pragprog.com/titles/bopytest/errata">errata</a> et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="https://forums.pragprog.com/forums/438">forum de discussion</a> . </p><br><p>  Je programme depuis plus de vingt-cinq ans, et rien ne m'a incit√© √† √©crire autant de code de test que pytest.  J'esp√®re que vous apprendrez beaucoup de ce livre et j'esp√®re qu'√† la fin vous aimerez le code de test comme moi. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plus loin</a> <img src="https://habrastorage.org/webt/rw/dy/-g/rwdy-grsvbpcetjttrmecdkxtlk.png"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426699/">https://habr.com/ru/post/fr426699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426689/index.html">Nous sommes responsables du march√© de quelqu'un d'autre: ce que les r√©seaux sociaux disent du CRM</a></li>
<li><a href="../fr426691/index.html">Programmeur en cong√© de maladie</a></li>
<li><a href="../fr426693/index.html">Service de navigation par robot sur un parcours de golf. Construire un chemin et √©viter les obstacles</a></li>
<li><a href="../fr426695/index.html">Cam√©ras de vision industrielle pour les passionn√©s. Comment utiliser l'appareil photo pour la navigation hors ligne?</a></li>
<li><a href="../fr426697/index.html">Travailler avec des appareils LibUsb sous Android</a></li>
<li><a href="../fr426701/index.html">Flutter - un nouveau regard sur le d√©veloppement multiplateforme</a></li>
<li><a href="../fr426703/index.html">Ce qui √©tait int√©ressant sur DataVizDay √† Minsk</a></li>
<li><a href="../fr426705/index.html">D√©veloppement et test de contrat intelligent Hyperledger Fabric</a></li>
<li><a href="../fr426707/index.html">Syst√®me d'approbation. Comment nous avons invent√© le v√©lo</a></li>
<li><a href="../fr426709/index.html">Minuteries JavaScript: tout ce que vous devez savoir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>