<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚öñÔ∏è üè¶ üëÇüèΩ Configurar pruebas autom√°ticas de una aplicaci√≥n h√≠brida üêã üèáüèª üë®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este art√≠culo quiero compartir mi experiencia en la soluci√≥n del problema de lanzar pruebas automatizadas de una aplicaci√≥n m√≥vil en Android. 

 Lo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configurar pruebas autom√°ticas de una aplicaci√≥n h√≠brida</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452742/">  En este art√≠culo quiero compartir mi experiencia en la soluci√≥n del problema de lanzar pruebas automatizadas de una aplicaci√≥n m√≥vil en Android. <br><br><h2>  Lo que contar√© sobre: </h2><br><ul><li>  C√≥mo ejecutar un entorno de prueba automatizado con Appium <br>  (PC OS - Windows 10) </li><li>  C√≥mo evitar algunos errores que ocurren al intentar ejecutar pruebas en una aplicaci√≥n h√≠brida </li><li>  Algunos comandos b√°sicos para ejecutar las pruebas m√°s simples.  Usaremos Java y JavaScript </li></ul><a name="habracut"></a><br><h2>  Desaf√≠o </h2><br>  Automatice las pruebas de aplicaciones m√≥viles h√≠bridas. <br><br>  Sobre la aplicaci√≥n a probar: <br><div class="scrollable-table"><table><tbody><tr><td>  Plataforma </td><td>  Android </td></tr><tr><td>  Marco </td><td>  Angular, C√≥rdoba, I√≥nica </td></tr><tr><td>  Navegador </td><td>  Paso de peatones </td></tr></tbody></table></div><br>  Quiz√°s estos son los puntos clave que influyeron en la configuraci√≥n de la PC para ejecutar las pruebas. <br><br><h2>  Entorno de prueba </h2><br>  Utilizaremos Appium como herramienta de prueba automatizada. <br>  En resumen, esta es una herramienta que le permite utilizar el servidor para enviar comandos al cliente sobre qu√© hacer y por qu√©. <br><br>  Puede obtener informaci√≥n completa en el sitio web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">del desarrollador</a> . <br><br>  Empecemos <br><br>  En un lugar conveniente para usted en el disco, cree la carpeta "Appium automation". <br><br>  Por ejemplo: <br><br><pre><code class="plaintext hljs">C:\Appium automation</code> </pre> <br>  Adem√°s en esta carpeta (C: \ Automatizaci√≥n de Appium) cree algunas carpetas m√°s: <br><div class="scrollable-table"><table><tbody><tr><td>  SDK de Android </td><td>  C: \ Automatizaci√≥n de Appium \ Android SDK </td></tr><tr><td>  Android Studio </td><td>  C: \ Automatizaci√≥n de Appium \ Android Studio </td></tr><tr><td>  APK </td><td>  C: \ Automatizaci√≥n de Appium \ APK </td></tr><tr><td>  Appium lib </td><td>  C: \ Automatizaci√≥n de Appium \ Appium Lib </td></tr><tr><td>  Selenium lib </td><td>  C: \ Automatizaci√≥n de Appium \ Selenium Lib </td></tr></tbody></table></div><br>  Si alguna de las aplicaciones / componentes que ha instalado, siguiendo las instrucciones, solo comprende la l√≥gica de la relaci√≥n, es decir,  no es necesario reinstalar todo. <br><br><h2>  Llenar carpetas creadas y cargar otros componentes </h2><br><h3>  1. Java SDK </h3><br>  Sigue el enlace y haz clic en Descargar: <br><br><img src="https://habrastorage.org/webt/tk/v8/5e/tkv85eeozm-zxppbrbnhfnylnsu.png"><br><br>  A continuaci√≥n, llegamos a la p√°gina de descarga para diferentes sistemas operativos, como  Tengo Windows 10 x64, seleccione: <br><br><img src="https://habrastorage.org/webt/-c/az/xt/-cazxtubqocc54mw-t4mw6unzyc.png"><br><br>  Despu√©s de descargar el archivo, √°bralo y descomprima el archivo .exe-shnik (seleccione la ruta durante la instalaci√≥n) en la carpeta: <br><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk-12.0.1</code> </pre> <br>  <i>(el n√∫mero de versi√≥n en el momento de la descarga puede variar)</i> <br><br><h3>  2. Android Studio y Android SDK </h3><br>  Para descargar, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">siga el enlace</a> . <br><br>  Instalar en la carpeta: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Android Studio</code> </pre> <br>  Durante el primer lanzamiento de Android Studio, deber√° <b>configurar el programa</b> : <br><br><ul><li>  Tipo de instalaci√≥n seleccione Personalizado, haga clic en Siguiente </li><li>  Elija un tema que le guste, haga clic en Siguiente </li><li>  Ubicaci√≥n del SDK de Android especifique C: \ Automatizaci√≥n de Appium \ Android SDK, haga clic en Siguiente </li><li>  La configuraci√≥n del emulador se puede dejar en Recomendado, haga clic en Siguiente </li><li>  Haga clic en Finalizar y espere a que se complete el proceso de instalaci√≥n. </li></ul><br>  <b>Cree un nuevo proyecto en Android Studio:</b> <br><br><ul><li>  Haga clic en Iniciar un nuevo proyecto de Android Studio </li><li>  Indique el Nombre, Ruta de su proyecto, o no puede cambiar nada y dejar el propuesto, haga clic en Siguiente </li><li>  En la lista desplegable Tel√©fono y tableta, seleccione "API 23: Android 6.0 (Marshmallow), haga clic en Siguiente </li><li>  Elija Actividad vac√≠a, haga clic en Siguiente </li><li>  Haga clic en siguiente </li><li>  Haga clic en Finalizar </li></ul><br>  <b>Instale las herramientas del SDK</b> <br><br>  En Android Studio, seleccione Herramientas - Administrador de SDK. <br><br>  En la ventana que aparece, se seleccionar√° la secci√≥n del SDK de Android. <br><br><img src="https://habrastorage.org/webt/os/_0/_v/os_0_vspi8pv4zxy7nd467jidns.png"><br><br>  En la pesta√±a Plataformas SDK, seleccione la versi√≥n de Android en la que realizar√° las pruebas. <br>  Y, en las herramientas del SDK, seleccione los elementos: <br><br><ul><li>  Android SDK Build-Tools </li><li>  Emulador de Android </li><li>  Android SDK Platform-Tools </li><li>  Herramientas de Android SDK </li><li>  Documentaci√≥n para Android SDK </li><li>  Repositorio de soporte </li></ul><br>  Haga clic en Aplicar o Aceptar y espere a que finalice la descarga e instalaci√≥n de los componentes. <br><br><img src="https://habrastorage.org/webt/or/yn/3m/oryn3mpv3hztnxhcbyswrii5lwo.png"><br><br><h3>  3. Crear variables de RUTA </h3><br>  Haga clic derecho en "Mi PC" - "Propiedades" - "Configuraci√≥n avanzada del sistema". <br>  En la ventana que se abre, en la pesta√±a "Avanzado", seleccione "Variables de entorno ..." <br><br>  En el bloque "Variables del sistema", cree una nueva variable. <br><br><img src="https://habrastorage.org/webt/w3/6j/qa/w36jqawmywp25jzuakdqjcxm7ew.png"><br><br><img src="https://habrastorage.org/webt/wa/-1/ln/wa-1lnnhoeq31tu9y5yijlaomfu.png"><br><br>  <b>Primera variable</b> <br><br>  Nombre de variable - JAVA_HOME <br><br>  El valor de la variable es <br><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk-12.0.1</code> </pre> <br>  (la ruta donde instal√≥ jdk en el paso 1, en algunos casos puede ser que la carpeta Archivos de programa se llame Archivos de programa (x86)) <br><br>  <b>Segunda variable</b> <br><br>  Nombre de variable - ANDROID_HOME <br><br>  El valor de la variable es <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Android SDK</code> </pre> <br>  <b>Adici√≥n variable de ruta</b> <br><br>  Busque la variable Ruta en la lista de variables del sistema y haga clic en "Cambiar ...". <br><br>  Haga clic en "Crear" en la ventana que aparece y agregue las variables: <br><br><ul><li>  % ANDROID_HOME% \ emulator </li><li>  % ANDROID_HOME% \ platform-tools </li><li>  % ANDROID_HOME% \ tools </li><li>  % ANDROID_HOME% \ tools \ bin </li></ul><br>  Como resultado, debe obtener 4 nuevas variables, despu√©s de lo cual debe hacer clic en Aceptar. <br><br><img src="https://habrastorage.org/webt/c6/x6/vi/c6x6viqmdb0fqbhurecbqknjyiy.png"><br><br><h3>  4. Appium </h3><br>  <b>Descargar Appium:</b> <br><br><ul><li>  Seguimos el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://appium.io/</a> </li><li>  Haga clic en Descargar </li><li>  Seleccionamos Appium-windows-1.13.0.exe (el n√∫mero de versi√≥n en el momento de la carga puede variar) </li></ul><br><img src="https://habrastorage.org/webt/hu/sm/yx/husmyxk1fvejkd7y4y8jaxdbvym.png"><br><br>  Ejecute el archivo .exe descargado e instale Appium en su PC.  Durante el proceso de instalaci√≥n, solo tendr√° que elegir instalar globalmente o para un usuario espec√≠fico.  Instal√© globalmente desde  no me importa <br><br>  <b>Descargando las bibliotecas de Appium:</b> <br><br><ul><li>  Seguimos el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://appium.io/downloads.html</a> </li><li>  Elegir un idioma, en mi caso Java </li><li>  Haz clic en el √≠cono de descarga </li></ul><br><img src="https://habrastorage.org/webt/le/zv/el/lezvel7fmjx-eca19mywvtcxeos.png"><br><br>  Mueva el archivo .jar descargado a la carpeta <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br><ul><li>  Seguimos el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://mvnrepository.com/artifact/junit/junit</a> </li><li>  Seleccionamos la √∫ltima versi√≥n estable (la tengo 4.12) </li><li>  Haga clic para cargar el archivo .jar </li></ul><br><img src="https://habrastorage.org/webt/vt/2w/l3/vt2wl3f8wgkrwqkttolyc_wxad0.png"><br><br>  Mueva el archivo .jar descargado a la carpeta: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br><br><ul><li>  Seguimos el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://mvnrepository.com/artifact/org.hamcrest/hamcrest-core</a> </li><li>  Seleccione la √∫ltima versi√≥n estable (uso 1.3) </li><li>  Haga clic para cargar el archivo .jar </li></ul><br><img src="https://habrastorage.org/webt/pm/rj/yl/pmrjylunp15yv4i9k2dbrt5qlli.png"><br><br>  Mueva el archivo .jar descargado a la carpeta: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br>  <b>Descargue las bibliotecas Selenium:</b> <br><br><ul><li>  Seguimos el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.seleniumhq.org/download</a> </li><li>  Elegir un idioma, en mi caso Java </li><li>  Haga clic en Descargar </li></ul><br><img src="https://habrastorage.org/webt/qe/vh/im/qevhimwudtjl4xuefskik1yffva.png"><br><br>  Descomprima el archivo descargado en la carpeta: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Selenium Lib</code> </pre> <br><h2>  5. IntelliJ IDEA Community Edition </h2><br>  Para descargar, vaya al enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.jetbrains.com/idea/download</a> <br>  Cerca de la versi√≥n de Comunidad y haga clic en Descargar (esta es una versi√≥n gratuita, pero es suficiente para las pruebas autom√°ticas). <br><br>  La p√°gina de descarga tiene una comparaci√≥n de las versiones Community y Ultimate. <br><br>  Si desea comprar la versi√≥n Ultimate, ¬°puede hacerlo con seguridad!  Pero, una vez m√°s, la versi√≥n comunitaria ser√° suficiente. <br><br>  Ejecute el archivo .exe descargado e inst√°lelo (simplemente haga clic en Siguiente hasta que el programa comience a instalarse) <br><br>  <b>Primer lanzamiento de IntelliJ IDEA</b> <br><br><ul><li>  Seleccione "No importar la configuraci√≥n" </li><li>  Aceptamos el acuerdo de licencia </li><li>  Elige un tema </li><li>  Haga clic en siguiente </li><li>  Haga clic en Comenzar a usar IntelliJ IDEA </li></ul><br>  <b>Crear un proyecto en IntelliJ IDEA</b> <br><br><ul><li>  Elija Crear nuevo proyecto </li><li>  Especifique la ruta al SDK de Java <br><ul><li>  Haga clic en nuevo ... </li><li>  Especifique la ruta al SDK de Java C: \ Archivos de programa \ Java \ jdk-12.0.1 cargado previamente </li></ul></li><li>  Haga clic en siguiente </li><li>  Marque la casilla "Crear proyecto desde plantilla" </li><li>  Haga clic en siguiente </li><li>  Especifique el nombre del proyecto y la ubicaci√≥n para guardar </li><li>  Haga clic en Finalizar </li></ul><br>  <b>Configuraciones para el proyecto creado</b> <br><br>  Elija Archivo - Estructura del proyecto ... <br><br>  En la ventana que aparece, seleccione M√≥dulos - Dependencias - "+" - JAR o directorios ... <br><br><img src="https://habrastorage.org/webt/9x/j2/om/9xj2om_3_7ffkxapkghxa-nnm_8.png"><br><br>  Y agregamos al proyecto todas las bibliotecas cargadas previamente. <br><br><img src="https://habrastorage.org/webt/w7/ky/1f/w7ky1fqtizkqqxnbkjvc8lqmap8.png"><br><br>  Haz clic en Aceptar. <br><br>  Ahora el proyecto est√° listo para ejecutar pruebas. <br><br><h3>  6. Configuraci√≥n del dispositivo Android </h3><br>  <b>Dispositivo real</b> <br>  Necesita un cable USB para conectar el dispositivo a la computadora y al tel√©fono inteligente. <br><br>  Para comenzar, vaya a "Configuraci√≥n" - "Acerca del tel√©fono" en el tel√©fono inteligente. <br><br>  Adem√°s, en diferentes tel√©fonos inteligentes, todo es diferente, pero la conclusi√≥n es que debe encontrar el "N√∫mero de serie" y hacer clic en √©l 5-7 veces hasta que aparezca la tostadora que dice "Ahora es un desarrollador" (el texto de la notificaci√≥n puede diferir de un modelo a otro) <br><br>  Despu√©s de esta manipulaci√≥n, la secci√≥n "Para desarrolladores" aparecer√° en la configuraci√≥n de su tel√©fono.  Tambi√©n puede ocultarse de un modelo a otro en diferentes secciones, por ejemplo, en alg√∫n lugar estar√° en "Configuraci√≥n" - "Para desarrolladores", y en alg√∫n lugar "Configuraci√≥n" - "Caracter√≠sticas especiales" - "Para desarrolladores", etc. . <br><br>  Debe ir a la secci√≥n "Para desarrolladores" y activar "Depuraci√≥n de USB". <br><br>  Cuando conecte su tel√©fono inteligente a trav√©s de USB, ver√° un mensaje sobre el permiso de depuraci√≥n de USB, puede marcar "Confiar en este dispositivo" y hacer clic en "Aceptar", luego este mensaje no aparecer√° nuevamente la pr√≥xima vez que el tel√©fono est√© conectado a esta PC. <br>  Todo su tel√©fono inteligente est√° listo para funcionar en pruebas autom√°ticas. <br><br>  <b>Dispositivo virtual</b> <br><br>  Tambi√©n puede crear un dispositivo virtual a trav√©s de Android Studio, luego no necesitar√° conectar el dispositivo real a la computadora. <br><br>  Pero en un dispositivo virtual, las pruebas pueden funcionar m√°s lentamente que en uno real. <br><br>  Para crearlo, abra Android Studio, luego: <br><br><ul><li>  "Herramientas" - "Administrador AVD" - "+ Crear dispositivo virtual ..." </li><li>  Elija un dispositivo, haga clic en Siguiente </li><li>  Elija la versi√≥n deseada de Android, haga clic en Siguiente </li><li>  Especifique el nombre del dispositivo, haga clic en Finalizar </li></ul><br>  Despu√©s de las manipulaciones realizadas en la secci√≥n "Herramientas" - "Administrador AVD", ver√° el dispositivo creado.  Con el icono verde "Reproducir", puede iniciar el dispositivo. <br><br>  <b>¬øC√≥mo verificar que su PC vio el dispositivo conectado?</b> <br><br>  Ejecute la l√≠nea de comando ("Inicio" - "Utilidades - Windows" - "S√≠mbolo del sistema") <br>  E ingrese el comando de dispositivos adb. <br><br>  Como resultado, si el dispositivo est√° conectado con la funci√≥n "Depuraci√≥n USB" habilitada, recibir√° el dispositivo conectado y su UDID (n√∫mero de serie): <br><br><pre> <code class="plaintext hljs">List of devices attached UDID device</code> </pre><br><h3>  7. Estamos escribiendo un proyecto. </h3><br>  <b>A√±adir importaci√≥n.</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> name; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidElement; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.JavascriptExecutor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.MalformedURLException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.TimeUnit;</code> </pre><br>  <b>Registramos el servidor y donde tendr√° que enviar solicitudes</b> <br><br>  Instalar el controlador de Android: <br><br><pre> <code class="java hljs">AndroidDriver&lt;AndroidElement&gt; driver = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;</code> </pre> <br>  Establecemos los par√°metros (propiedades): <br><br><pre> <code class="java hljs">DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities();</code> </pre> <br>  El nombre del dispositivo (puede encontrarlo para el dispositivo real en "Configuraci√≥n" - "Acerca del tel√©fono", y para las "Herramientas" virtuales - "Administrador AVD" - el campo "Nombre"): <br><br><pre> <code class="java hljs">capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"MyPhone"</span></span>);</code> </pre> <br>  Enlace al APK que deber√° iniciarse (.apk debe ser una compilaci√≥n de depuraci√≥n para que usted y appium puedan inspeccionar las aplicaciones): <br><br><pre> <code class="java hljs">capabilities.setCapability(MobileCapabilityType.APP, <span class="hljs-string"><span class="hljs-string">"C:\\Appium automation\\APK\\My-debug-Apk.apk"</span></span>);</code> </pre> <br>  Inicie el controlador Appium: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), capabilities); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MalformedURLException e) { System.out.println(e.getMessage()); }</code> </pre><br>  Este c√≥digo ser√° suficiente para iniciar su aplicaci√≥n en el dispositivo conectado. <br><br>  <b>Equipos adicionales</b> <br><br>  Para suspender el proyecto por un cierto per√≠odo de tiempo, por ejemplo, 8 segundos.  (el valor se indica en milisegundos).  Puede ser necesario si necesita esperar a que se cargue la p√°gina o la aplicaci√≥n: <br><br><pre> <code class="java hljs">Thread.sleep(<span class="hljs-number"><span class="hljs-number">8000</span></span>);</code> </pre> <br>  Obtenemos ContextHandles, donde entendemos con qu√© estamos trabajando ahora (NATIVE_APP o WEBVIEW): <br><br><pre> <code class="java hljs">Set&lt;String&gt; contextNames = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String contextName : contextNames) { System.out.println(contextName); }</code> </pre> <br>  Asigne Contexto al √∫ltimo valor recibido en la matriz.  Esto le permitir√° cambiar correctamente a WEBVIEW, tk.  Contexto predeterminado = NATIVE_APP: <br><br><pre> <code class="java hljs">driver.context((String) contextNames.toArray()[contextNames.toArray().length - <span class="hljs-number"><span class="hljs-number">1</span></span>]);</code> </pre> <br>  <b>Controlamos la interfaz de la aplicaci√≥n.</b> <br><br>  Porque  estamos trabajando con una aplicaci√≥n h√≠brida, es decir  los elementos de la aplicaci√≥n se representan en WEBVIEW y no en NATIVE_APP, por lo general, tendremos que usar un tipo de b√∫squeda para el elemento findElementByCssSelector. <br><br>  Haga clic en el bot√≥n Aceptar: <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".button-ok"</span></span>).click();</code> </pre> <br>  - donde .button-ok es la clase de elemento.  Tambi√©n puede usar la ID del elemento exactamente. <br><br>  Enviamos el valor en el campo, por ejemplo, tiene una b√∫squeda y desea enviar el valor "Cine" all√≠. <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-input"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre> <br><br>  Haga clic para encontrar: <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-button"</span></span>).click();</code> </pre> <br>  De esta manera, ya puede controlar su aplicaci√≥n. <br><br>  Tarde o temprano, se encontrar√° con eso, no todo el contenido se coloca en la pantalla del tel√©fono inteligente, es decir,  Necesitas desplazarte.  Si un elemento no est√° visible en la pantalla durante el proceso de prueba, Appium arrojar√° un error de que no ve el elemento y lo m√°s probable es que todas las pruebas posteriores est√©n cubiertas de errores. <br><br>  Para desplazarse en la pantalla, puede ejecutar la funci√≥n JS scrollIntoView en Java. <br><br><pre> <code class="java hljs">((JavascriptExecutor) driver).executeScript(<span class="hljs-string"><span class="hljs-string">"document.querySelector('.button-ok').scrollIntoView({block: \"end\", behavior: \"smooth\"});"</span></span>);</code> </pre> <br>  En mi caso, esto le permitir√° ir al bot√≥n Aceptar. <br><br>  Puede ser un incidente que haya escrito todo correctamente, pero no se realiza el desplazamiento. <br><br>  Intente vincularse a otros elementos en la pantalla y primero es mejor hacerlo a trav√©s de la consola en Chrome: inspeccione, de modo que tenga la seguridad de que comprende que cuando se une a este elemento, el desplazamiento funcionar√°. <br><br>  Puede ir al paso 8 y si todo funciona para usted, ¬°esto es genial! <br>  Pero tuve otra trampa. <br>  Se llama Crosswalk Browser. <br><br>  Cuando comenc√© el proyecto, constantemente recib√≠a un error: <br><br><pre> <code class="plaintext hljs">‚ÄúMake sure the app has its webview configured for debugging‚Äù</code> </pre> <br>  Esto significa que no se realiz√≥ una prueba. <br><br>  Lo que debe verificar en este caso: <br><br><ul><li>  aseg√∫rese de tener una compilaci√≥n de depuraci√≥n </li><li>  aseg√∫rese de que la compilaci√≥n de depuraci√≥n permita la aplicaci√≥n Inspect-a </li><li>  instalar un controlador de cromo fijo <br><ul><li>  siga el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/blutter/appium-crosswalk-fix</a> </li><li>  la instalaci√≥n se realizar√° a trav√©s de npm, as√≠ que inst√°lela con anticipaci√≥n en su PC ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.npmjs.com/get-npm</a> ) </li></ul></li></ul><br>  Despu√©s de estas manipulaciones, agregue otras capacidades a su proyecto. <br><br><pre> <code class="java hljs">capabilities.setCapability(<span class="hljs-string"><span class="hljs-string">"chromedriverExecutable"</span></span>, <span class="hljs-string"><span class="hljs-string">"C:\\node_modules\\appium-with-crosswalk-fix\\chromedriver\\2.28\\chromedriver.exe"</span></span>);</code> </pre> <br>  - donde C: \\ node_modules \\ appium-with-crosswalk-fix \\ chromedriver \\ 2.28 \\ chromedriver.exe <br>  esta es la forma de arreglar el controlador cromado <br><br>  <b>Entonces su proyecto se ver√° as√≠:</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> name; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidElement; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.JavascriptExecutor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.MalformedURLException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.TimeUnit; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ AndroidDriver&lt;AndroidElement&gt; driver = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"MyPhone"</span></span>); capabilities.setCapability(MobileCapabilityType.APP, <span class="hljs-string"><span class="hljs-string">"C:\\Appium automation\\APK\\My-debug-apk.apk"</span></span>); capabilities.setCapability(<span class="hljs-string"><span class="hljs-string">"chromedriverExecutable"</span></span>, <span class="hljs-string"><span class="hljs-string">"C:\\node_modules\\appium-with-crosswalk-fix\\chromedriver\\2.28\\chromedriver.exe"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), capabilities); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MalformedURLException e) { System.out.println(e.getMessage()); } Set&lt;String&gt; contextNames = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String contextName : contextNames) { System.out.println(contextName); } driver.context((String) contextNames.toArray()[contextNames.toArray().length - <span class="hljs-number"><span class="hljs-number">1</span></span>]); Thread.sleep(<span class="hljs-number"><span class="hljs-number">8000</span></span>); driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-input"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">""</span></span>); driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-button"</span></span>).click(); }</code> </pre><br>  Tal proyecto: <br><br><ul><li>  Instala tu aplicaci√≥n en el dispositivo. </li><li>  Encuentra el campo de b√∫squeda en la p√°gina de la aplicaci√≥n </li><li>  Traer√° all√≠ el significado de "Cine" </li><li>  Haga clic en el bot√≥n "Buscar" </li></ul><br><h3>  8. Iniciamos el proyecto. </h3><br>  Hay varios puntos principales para que comience un proyecto: <br><br><ul><li>  Inicie el servidor Appium (elemento 4) <br><ul><li>  Use el atajo para iniciar Appium </li><li>  Haga clic en "Iniciar servidor" </li></ul></li><li>  Conecte el dispositivo a una PC o inicie un dispositivo virtual (elemento 6) </li><li>  Configurar un proyecto (p. 5 y p. 7) </li><li>  Haga clic en Ejecutar (o en la barra de herramientas IntelliJ IDEA, o Ejecutar - Ejecutar 'Principal') </li><li>  Disfruta el resultado </li></ul><br>  Bueno, entonces puedes probar la configuraci√≥n, la informaci√≥n necesaria est√° en el sitio web oficial del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desarrollador</a> . <br>  Appium tambi√©n se puede usar para probar aplicaciones iOS. <br><br>  Quer√≠a escribir brevemente, pero result√≥ como siempre. <br><br>  Gracias a todos los que leyeron hasta el final, ¬°espero que les haya sido √∫til! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/452742/">https://habr.com/ru/post/452742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452730/index.html">Certificaci√≥n de sistemas de informaci√≥n sobre el principio de segmentos est√°ndar. Mitos y realidad</a></li>
<li><a href="../452734/index.html">Migre autom√°ticamente aplicaciones de iOS (ARM) a macOS (x86) usando Bitcode</a></li>
<li><a href="../452736/index.html">Cifrado de mensajes en SecureDialogues</a></li>
<li><a href="../452738/index.html">Revisi√≥n del tel√©fono IP Snom D717</a></li>
<li><a href="../452740/index.html">Una selecci√≥n de conjuntos de datos para el aprendizaje autom√°tico</a></li>
<li><a href="../452744/index.html">¬øExiste una vida completa de un control remoto sin intercambios independientes?</a></li>
<li><a href="../452746/index.html">El libro "El arte de la programaci√≥n en R. Inmersi√≥n en Big Data"</a></li>
<li><a href="../452748/index.html">Principios para desarrollar aplicaciones modernas de NGINX. Parte 1</a></li>
<li><a href="../452750/index.html">Nextcloud dentro y fuera de OpenLiteSpeed: configurar proxy inverso</a></li>
<li><a href="../452752/index.html">BigData hecho en casa. Parte 1. Pr√°ctica de Spark Streaming en un cl√∫ster de AWS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>