<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçüîß ü§ë üå≥ Xcode 11 e XCFrameworks: um novo formato de pacote de estrutura üôãüèª üëºüèª üì≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na vida de muitas empresas que possuem e desenvolvem sua pr√≥pria pilha de bibliotecas e componentes, chega um momento em que o volume dessa pilha fica...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode 11 e XCFrameworks: um novo formato de pacote de estrutura</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/475816/"><p><img src="https://habrastorage.org/webt/nd/9g/nt/nd9gntw7zmcbecyibkxwc8aheno.png"></p><br><p>  Na vida de muitas empresas que possuem e desenvolvem sua pr√≥pria pilha de bibliotecas e componentes, chega um momento em que o volume dessa pilha fica dif√≠cil de manter. </p><br><p>  No caso de desenvolvimento para a plataforma iOS e, em geral, o ecossistema Apple, existem duas op√ß√µes para conectar bibliotecas como depend√™ncias: </p><br><ol><li>  Colete-os sempre que criar o aplicativo. </li><li>  Colete-os com anteced√™ncia usando as depend√™ncias j√° coletadas. </li></ol><br><p>  Ao escolher a segunda abordagem, torna-se l√≥gico usar sistemas de CI / CD para montar bibliotecas em artefatos prontos para uso. </p><br><p>  No entanto, a necessidade de criar bibliotecas para v√°rias plataformas ou arquiteturas de processador no ecossistema da Apple, geralmente nem sempre exige opera√ß√µes triviais, tanto na constru√ß√£o da biblioteca quanto no produto final que a utiliza. </p><br><p>  Nesse contexto, foi dif√≠cil n√£o notar e extremamente interessante estudar, uma das inova√ß√µes da Apple, apresentada na WWDC 2019 como parte da apresenta√ß√£o dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Frameworks Bin√°rios no Swift</a> - o formato de empacotamento dos frameworks √© o XCFramework. </p><br><p>  O XCFramework tem v√°rias vantagens sobre as abordagens estabelecidas: </p><br><ol><li>  Empacotamento de depend√™ncia para todas as plataformas e arquiteturas de destino em um √∫nico pacote pronto para uso. </li><li>  Pacote de conex√£o no formato XCFramework, como uma depend√™ncia √∫nica para todas as plataformas e arquiteturas de destino. </li><li>  N√£o h√° necessidade de construir uma estrutura universal / gorda. </li><li>  N√£o h√° necessidade de se livrar da fatia x86_64 antes de carregar os aplicativos finais na AppStore. </li></ol><br><p>  Neste artigo, explicaremos por que esse novo formato foi introduzido, o que √© e tamb√©m o que fornece ao desenvolvedor. </p><a name="habracut"></a><br><h1 id="kak-poyavilsya-novyy-format">  Como o novo formato apareceu </h1><br><p>  A Apple lan√ßou anteriormente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerenciador de</a> depend√™ncias do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Swift Package Manager</a> . <br>  A conclus√£o √© que o Swift PM permite entregar bibliotecas na forma de c√≥digo-fonte aberto com uma descri√ß√£o das depend√™ncias. </p><br><p>  Da perspectiva do desenvolvedor que fornece a biblioteca, gostaria de destacar dois aspectos do Swift PM. </p><br><ul><li>  O menos √≥bvio √© que, por um motivo ou outro, nem todos os fornecedores de bibliotecas gostariam de abrir seu c√≥digo-fonte para os consumidores. </li><li>  Uma vantagem √≥bvia - ao compilar depend√™ncias de fontes, nos livramos da necessidade de observar a compatibilidade bin√°ria das bibliotecas. </li></ul><br><p>  XCFramework A Apple oferece como um novo formato bin√°rio para bibliotecas de embalagens, considerando-o uma alternativa aos pacotes Swift. </p><br><p>  Esse formato, bem como a capacidade de conectar a biblioteca montada no XCFramework, est√° dispon√≠vel a partir do Xcode 11 e de suas vers√µes beta. </p><br><h1 id="chto-izsebya-predstavlyaet-xcframework">  O que √© o XCFramework </h1><br><p>  Na sua ess√™ncia, o XCFramework √© uma nova maneira de empacotar e entregar bibliotecas, em suas v√°rias vers√µes. </p><br><p>  Entre outras coisas, o novo formato tamb√©m permite empacotar bibliotecas est√°ticas juntamente com seus arquivos de cabe√ßalho, incluindo aqueles escritos em C / Objective-C. </p><br><p>  Considere o formato com mais detalhes. </p><br><ol><li><p>  <strong>Empacotamento de depend√™ncia para todas as plataformas e arquiteturas de destino em um √∫nico pacote pronto para uso</strong> </p><br><p> Todos os assemblies de biblioteca para cada plataforma e arquitetura de destino agora podem ser empacotados em um √∫nico pacote configur√°vel com a extens√£o .xcframework. <br>  No entanto, para isso, neste momento, voc√™ precisa usar scripts para chamar o <code>xcodebuild</code> com a nova op√ß√£o <code>-create-xcframework</code> do Xcode 11. </p><br><p>  O processo de montagem e embalagem ser√° considerado mais adiante. </p><br></li><li><p>  <strong>Pacote de conex√£o no formato XCFramework, como uma depend√™ncia √∫nica para todas as plataformas e arquiteturas de destino</strong> </p><br><p>  Como o pacote configur√°vel .xcframework cont√©m todas as op√ß√µes necess√°rias de montagem de depend√™ncias, n√£o precisamos nos preocupar com sua arquitetura e plataforma de destino. </p><br><p>  No Xcode 11, uma biblioteca empacotada em .xcframework √© conectada como um .framework comum. <br>  Mais especificamente, isso pode ser alcan√ßado das seguintes maneiras nas configura√ß√µes de destino: </p><br><ul><li>  adicionando .xcframework √† se√ß√£o "Frameworks And Libraries" da guia "General" </li><li>  adicionando .xcframework a "Vincular bin√°rio com bibliotecas" na guia "Construir fases" </li></ul><br></li><li><p>  <strong>N√£o h√° necessidade de construir estrutura universal / gorda</strong> </p><br><p>  Anteriormente, para suportar v√°rias bibliotecas e v√°rias arquiteturas em uma biblioteca de plug-in, era necess√°rio preparar as chamadas estruturas gordas ou universais. <br>  Isso foi feito usando o <code>lipo</code> para costurar todas as op√ß√µes da estrutura montada em um √∫nico bin√°rio espesso. </p><br><p>  Mais detalhes sobre isso podem ser encontrados, por exemplo, nos seguintes artigos: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar sua pr√≥pria estrutura iOS</a> (habr.ru) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gravando o Universal Universal Framework no Xcode 10.2 e iOS 12</a> (medium.com) </li></ul><br></li><li><p>  <strong>N√£o h√° necessidade de se livrar da fatia x86_64 antes de carregar os aplicativos finais na AppStore</strong> </p><br><p>  Normalmente, essa fatia √© usada para fornecer bibliotecas no simulador do iOS. <br>  Ao tentar baixar um aplicativo com depend√™ncias que cont√™m fatia x86_64 na AppStore, voc√™ pode encontrar o erro conhecido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ITMS-90087</a> . </p><br></li></ol><br><h1 id="sozdanie-iupakovka-xcframework-teoriya">  Criando e empacotando XCFramework: teoria </h1><br><p>  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresenta√ß√£o</a> mencionada anteriormente, s√£o necess√°rias v√°rias etapas necess√°rias para montar e empacotar a biblioteca no formato XCFramework: </p><br><ol><li><p>  <strong>Prepara√ß√£o do projeto</strong> </p><br><p>  Para come√ßar, em todas as √°reas de destino do projeto respons√°veis ‚Äã‚Äãpela cria√ß√£o da biblioteca para as plataformas de destino, √© necess√°rio ativar a nova configura√ß√£o Compilar Bibliotecas para Distribui√ß√£o para o Xcode 11. </p><br><p><img src="https://habrastorage.org/webt/wl/vs/ak/wlvsakcfadbfihsrebpvtey6uec.png"></p><br></li><li><p>  <strong>Montagem de projeto para plataformas e arquiteturas de destino</strong> </p><br><p>  Em seguida, precisamos coletar todos os destinos para as plataformas e arquiteturas de destino. <br>  Vamos considerar exemplos de comandos de chamada usando o exemplo de uma configura√ß√£o espec√≠fica do projeto. </p><br><p>  Digamos que no projeto tenhamos dois esquemas ‚ÄúXCFrameworkExample-iOS‚Äù e ‚ÄúXCFramework-macOS‚Äù. </p><br><p><img src="https://habrastorage.org/webt/on/ug/s8/onugs8ismapkgs0hngnvdixne9m.png"></p><br><p>  Tamb√©m no projeto, existem dois destinos que coletam a biblioteca para iOS e macOS. </p><br><p><img src="https://habrastorage.org/webt/m8/li/dj/m8lidjpvlt6svz9nc052imlcnik.png"></p><br><p>  Para criar todas as configura√ß√µes de biblioteca necess√°rias, precisamos coletar os dois destinos usando os esquemas correspondentes. <br>  No entanto, para iOS, precisamos de dois conjuntos: um para dispositivos finais (ARM) e outro para o simulador (x86_64). </p><br><p>  No total, precisamos coletar 3 estruturas. </p><br><p>  Para fazer isso, voc√™ pode usar o comando <code>xcodebuild</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO</span></span></code> </pre> <br><p>  Como resultado, obtivemos tr√™s estruturas montadas, as quais empacotaremos ainda mais no cont√™iner .xcframework. </p><br></li><li><p>  <strong>Embalagem .framework montado em .xcframework</strong> </p><br><p>  Voc√™ pode fazer isso com o seguinte comando: </p><br><pre> <code class="bash hljs">xcodebuild -create-xcframework \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -output <span class="hljs-string"><span class="hljs-string">"./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><p>  Pode haver muitas <code>-framework</code> par√¢metros <code>-framework</code> que apontam para todos os assemblies .framework que voc√™ deseja anexar ao cont√™iner .xcframework. </p><br></li></ol><br><h1 id="podgotovka-proekta-biblioteki-dlya-buduschey-sborki-iupakovki-xcframework">  Preparando um Projeto de Biblioteca para Montagem e Empacotamento Futuros do XCFramework </h1><br><p>  <strong>TL; DR: o projeto finalizado pode ser baixado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">do reposit√≥rio no Github</a> .</strong> </p><br><p>  Como exemplo, estamos implementando uma biblioteca que estar√° dispon√≠vel para duas plataformas: iOS e macOS. <br>  Usaremos a configura√ß√£o do projeto mencionada na se√ß√£o anterior do artigo: dois esquemas e dois destinos correspondentes do Framework para plataformas iOS e macOS. </p><br><p>  A pr√≥pria biblioteca nos fornecer√° uma extens√£o simples para <code>String?</code>  ( <code>Optional where Wrapped == String</code> ), com uma √∫nica propriedade. </p><br><p>  Chamamos essa propriedade de <code>isNilOrEmpty</code> e, como o nome indica, ela nos informar√° quando estiver dentro de <code>String?</code>  valor ausente ou a cadeia armazenada dentro est√° vazia. </p><br><p>  O c√≥digo pode ser implementado da seguinte maneira: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapped</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNilOrEmpty: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> .some(string) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string.isEmpty } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p>  Prosseguimos diretamente para a cria√ß√£o e configura√ß√£o do projeto. </p><br><ol><li><p>  <strong>Para come√ßar, precisamos criar um projeto do tipo "Framework" para uma das duas plataformas de destino de sua escolha: iOS ou macOS.</strong> </p><br><p>  Voc√™ pode fazer isso no Xcode atrav√©s do item de menu ‚ÄúArquivo‚Äù =&gt; ‚ÄúNovo‚Äù =&gt; ‚ÄúProjeto‚Äù ou usando o atalho de teclado <strong>‚áß +  + N</strong> (por padr√£o). </p><br><p>  Em seguida, na parte superior da caixa de di√°logo, selecione a plataforma desejada (iOS ou macOS), selecione o tipo do projeto do Framework e v√° para o bot√£o "Avan√ßar". </p><br><p>  Na pr√≥xima tela, precisamos definir o nome do projeto no campo "Nome do produto". </p><br><p>  Como alternativa, voc√™ pode usar o nome "base" do projeto, na configura√ß√£o mencionada anteriormente √© "XCFrameworkExample". </p><br><p>  No futuro, ao configurar o projeto, adicionaremos sufixos que denotam plataformas ao nome base usado no nome do destino. </p><br></li><li><p>  <strong>Depois disso, voc√™ precisa criar outro Destino do tipo ‚ÄúFramework‚Äù no projeto para outra das plataformas listadas (exceto aquela para a qual o projeto foi originalmente criado).</strong> </p><br><p>  Para fazer isso, use o item de menu "Arquivo" =&gt; "Novo" =&gt; "Alvo". </p><br><p>  Em seguida, selecionamos no di√°logo outro (relativo ao selecionado no par√°grafo 1) das duas plataformas, ap√≥s o qual novamente selecionamos o tipo de projeto ‚ÄúFramework‚Äù. </p><br><p>  Para o campo "Nome do produto", podemos usar imediatamente o nome com o sufixo da plataforma, ao qual adicionamos o destino neste par√°grafo.  Portanto, se a plataforma for macOS, o nome poder√° ser "XCFrameworkExample-macOS" (% base_name% -% platform%). </p><br></li><li><p>  <strong>Definiremos metas e gr√°ficos para facilitar a distin√ß√£o.</strong> </p><br><p>  Primeiro, renomeie nossos esquemas e os destinos anexados a eles para que seus nomes reflitam as plataformas, por exemplo: </p><br><ul><li>  "XCFrameworkExample-iOS" </li><li>  "XCFrameworkExample-macOS" </li></ul><br></li><li><p>  <strong>Em seguida, adicione o arquivo com o c√≥digo da nossa extens√£o para <code>String?</code> ao projeto .swift <code>String?</code></strong> </p><br><p>  Adicione um novo arquivo .swift ao projeto com o nome "Optional.swift". <br>  E no pr√≥prio arquivo, colocamos a extens√£o mencionada anteriormente para <code>Optional</code> . </p><br><p>  √â importante n√£o esquecer de adicionar o arquivo de c√≥digo aos dois destinos. </p><br><p><img src="https://habrastorage.org/webt/qp/eh/qs/qpehqsezf7pb-pg4pc8wao7l4cs.png"></p><br></li></ol><br><p>  Agora temos um projeto que podemos montar no XCFramework usando os comandos do est√°gio anterior. </p><br><h1 id="process-sborki-iupakovki-biblioteki-vformat-xcframework">  O processo de montagem e empacotamento da biblioteca no formato .xcframework </h1><br><p>  Nesse est√°gio, voc√™ pode usar o script bash em um arquivo separado para criar a biblioteca e empacot√°-la no formato .xcframework.  Al√©m disso, isso permitir√° que, no futuro, esses desenvolvimentos sejam integrados √† solu√ß√£o no sistema de CI / CD. </p><br><p>  O script parece feio simples e, de fato, re√∫ne os comandos mencionados anteriormente para montagem: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ---------------------------------- # BUILD PLATFORM SPECIFIC FRAMEWORKS # ---------------------------------- # iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO # ------------------- # PACKAGE XCFRAMEWORK # ------------------- xcodebuild -create-xcframework \ -framework "./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -output "./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><h1 id="soderzhimoe-xcframework">  .Xcframework content </h1><br><p>  Como resultado do script de montagem do par√°grafo anterior do artigo, obtemos o cobi√ßado pacote .xcframework, que pode ser adicionado ao projeto. </p><br><p>  Se olharmos dentro deste pacote, que, como .framework, √© essencialmente uma pasta simples, veremos a seguinte estrutura: </p><br><p><img src="https://habrastorage.org/webt/pg/sr/g6/pgsrg6uc4prxhairmnoy57p9wus.png"></p><br><p>  Aqui vemos que dentro de .xcframework existem assemblies no formato .framework, divididos por plataforma e arquitetura.  Tamb√©m para descrever o conte√∫do do pacote .xcframework, existe um arquivo Info.plist. </p><br><div class="spoiler">  <b class="spoiler_title">O arquivo Info.plist possui o seguinte conte√∫do</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AvailableLibraries<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-x86_64-simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatformVariant<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos-x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundlePackageType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XFWK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkFormatVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Voc√™ pode notar que, para a tecla ‚ÄúCFBundlePackageType‚Äù, ao contr√°rio do formato .framework, o novo valor ‚ÄúXFWK‚Äù √© usado, n√£o ‚ÄúFMWK‚Äù. </p><br><h1 id="itogi">  Sum√°rio </h1><br><p>  Portanto, o formato de empacotamento da biblioteca no XCFramework nada mais √© do que um cont√™iner comum para bibliotecas compiladas no formato .framework. </p><br><p>  No entanto, esse formato permite armazenar e usar separadamente cada uma das arquiteturas e plataformas apresentadas dentro.  Isso elimina uma s√©rie de problemas inerentes √† abordagem generalizada da constru√ß√£o de estruturas gordas / universais. </p><br><p>  Seja como for, no momento, h√° uma nuance importante sobre a quest√£o do uso do XCFramework em projetos reais - gerenciamento de depend√™ncias, que a Apple n√£o implementou no formato XCFramework. </p><br><p>  Para esses fins, s√£o utilizados habitualmente Swift PM, Carthage, CocoaPods e outros sistemas de gerenciamento de depend√™ncias e seus conjuntos.  Portanto, n√£o surpreende que o suporte ao novo formato j√° esteja em andamento precisamente nos projetos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CocoaPods</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Carthage</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475816/">https://habr.com/ru/post/pt475816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475804/index.html">Importe relat√≥rios de chamadas agendadas do CoMagic para o BigQuery em uma programa√ß√£o usando o Google Cloud Functions</a></li>
<li><a href="../pt475808/index.html">O GitHub criou um reposit√≥rio de mil anos em que salvar√° reposit√≥rios de c√≥digo aberto para a posteridade</a></li>
<li><a href="../pt475810/index.html">Como ser√£o exportadas 82.000 toneladas de estoques nucleares da URSS dos Urais</a></li>
<li><a href="../pt475812/index.html">Como ficar louco no Open Space: criando um novo escrit√≥rio a partir do zero</a></li>
<li><a href="../pt475814/index.html">Transforma√ß√£o do Docker: vendendo o Docker Enterprise no Mirantis e um caminho atualizado</a></li>
<li><a href="../pt475826/index.html">Por que as classifica√ß√µes da Amazon (e outras) n√£o s√£o confi√°veis</a></li>
<li><a href="../pt475830/index.html">Console retro port√°til de bricolage</a></li>
<li><a href="../pt475832/index.html">Express√µes de m√≠dia CSS t√™m mais do que largura m√°xima</a></li>
<li><a href="../pt475834/index.html">Scrum n√£o ir√° ajud√°-lo. Entendemos porque</a></li>
<li><a href="../pt475836/index.html">Entrevista com Arthur Khachuyan: como calcular um bilion√°rio nas redes sociais?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>