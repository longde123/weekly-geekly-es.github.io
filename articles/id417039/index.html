<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§”ğŸ» ğŸ‘† ğŸ’œ Pelajari wordpress (dan banyak lagi) untuk membuat pemain Youtube dengan cepat ğŸ’‘ ğŸ—¾ ğŸ‘ŠğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingat situs seorang teman lama-programmer yang memiliki satu hip-hop di feed situs, sekitar 6 tahun yang lalu ia meludahi kecepatan memuat halama...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pelajari wordpress (dan banyak lagi) untuk membuat pemain Youtube dengan cepat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417039/"><img align="right" src="https://habrastorage.org/webt/us/rm/ow/usrmowkg03gobdp7nh575a04qfm.gif" alt="youtube-speedload"><br><br>  Saya ingat situs seorang teman lama-programmer yang memiliki satu hip-hop di feed situs, sekitar 6 tahun yang lalu ia meludahi kecepatan memuat halaman: "ya, ya, ya, saya harus mengulanginya, tetapi tidak ada yang rumit di sana ..." dihentikan sekarang - semuanya seperti sebelumnya :-) Meskipun ada solusi teknis yang sederhana, saya akui bahwa tidak hanya saya punya teman seperti itu.  Karena itu, ini sedikit catatan teknis. <br><br>  Untuk memahami masalah apa yang kita bicarakan: <br><img src="https://habrastorage.org/webt/fa/zo/ua/fazouap0ncvp7umicdrwjzf5zpi.png" alt="gambar"><br><br>  <b>Script base.js 400kb?</b> <br><br>  Saya bahkan tidak melihat sisanya. <br>  Setelah optimasi, bahkan tanpa kompresi, keuntungan akan puluhan kali lipat dan akan menjadi: <br><a name="habracut"></a><br>  html - 0,5 kb <br>  css - 1.4 kb <br>  js - 0,2 kb <br><br>  Saya sendiri sering harus menerbitkan kuliah dari saluran YouTube kami di feed situs, mereka dipanaskan cukup banyak pada satu halaman.  Dan saat melihat blog pribadi, ada koleksi orang asing atau video Anda.  Dan yang mengganggu saya adalah bagaimana youtube memberikan kinerja pada embedding.  Apa yang ada di sana tidak memuat iframe demi gambar yang sama dengan klik.  Dan lucunya, saya mungkin tidak ingin menonton video, untuk apa saya mengunggah konten? <br><br>  Masalah ini telah lama diselesaikan di jejaring sosial dan banyak sumber lainnya dengan lalu lintas tinggi.  Ya, dan di peramban seluler.  Bukan rahasia bagi siapa pun bahwa pengguna menghabiskan lebih banyak waktu di situs jika ia menerima konten secepat mungkin. <br><br>  Ini hubr yang sama, dia tidak mendapatkan banyak dalam rekaman video, jadi ini tidak begitu diminati.  Namun, jika Anda mempopulerkan pendekatan ini? <br><br>  Mari kita coba terapkan ini menggunakan contoh plugin untuk WordPress. <br><br>  Sebagai pemegang beberapa situs di wordpress, saya tahu betul bagaimana pengaya plugin dapat masuk ke database.  Oleh karena itu, saya pasti memutuskan bahwa plugin akan menggunakan mekanisme caching asli dan tidak akan memerlukan apa pun dan merusak kompatibilitas jika dihapus. <br><br><h3>  Apa yang bisa ditarik dari Youtube </h3><br>  Penggunaan Youtube dibuat untuk menyematkan konten.  Secara lebih rinci, jawaban saya untuk SO tentang apa yang bisa ditarik keluar tanpa menggunakan API resmi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">stackoverflow.com/questions/10066638/get-youtube-information-via-json-for-single-video-not-feed-in-javascript/23253789#23253789</a> <br><br>  Respons JSON <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=http://www.youtube.com/oembed%3Furl%3D">www.youtube.com/oembed?url=http</a> : //www.youtube.com/watch? v = ojCkgU5XGdg &amp; format = json <br><br>  Atau xml <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=http://www.youtube.com/oembed%3Furl%3D">www.youtube.com/oembed?url=http</a> : //www.youtube.com/watch? v = ojCkgU5XGdg &amp; format = xml <br><br>  Jenis preview dengan berbagai ukuran, hq, sd, maks <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/hqdefault.jpg</a> <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/sddefault.jpg</a> <br>  <a href="">i.ytimg.com/vi/ojCkgU5XGdg/maxresdefault.jpg</a> <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/0.jpg</a> <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/1.jpg</a> <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/2.jpg</a> <br>  <a href="">img.youtube.com/vi/ojCkgU5XGdg/3.jpg</a> <br><br>  Anotasi Video <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.youtube.com/annotations_invideo?cap_hist=1&amp;video_id=ojCkgU5XGdg</a> <br><br>  Tautan lain <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.youtube.com/get_video_info?html5=1&amp;video_id=ojCkgU5XGdg</a> <br><br>  Dan ini berguna bagi Anda jika Anda membuat stream. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.youtube.com/embed/live_stream?channel=UCkA21M22vGK9GtAvq3DvSlA</a> <br><br>  Pratinjau Langsung <br>  <a href="">i.ytimg.com/vi/W-fSCPrYSL8/hqdefault_live.jpg</a> <br><br>  Sayang sekali YT tidak mendukung jsonp.  Karenanya, kami tidak dapat sepenuhnya menolak untuk menyimpan data. <br><br><h3>  Bagaimana cache WordPress berutang </h3><br>  WordPress mendukung penyematan otomatis ketika menemukan tautan di editor daftar putih.  Ketika acara ini dipicu, ia menciptakan sebuah meta-field ke posting dengan awalan _oembed_, dan ketika menghasilkan, itu menggantikan kode dari cache dengan html. <br><br>  Jika kami memutuskan untuk menunjukkan tata letak dengan subtitle iframe dengan klik, maka kami perlu menyimpan keadaan ini di suatu tempat, yang terbaik dari semuanya dalam cache yang sama. <br><br>  Filter <code>add_filter('embed_oembed_html');</code>  memungkinkan penggantian cache sebelum pos ditampilkan.  Ini adalah iframe yang terkenal. <br><br><pre> <code class="php hljs">&lt;iframe width=<span class="hljs-string"><span class="hljs-string">""</span></span> height=<span class="hljs-string"><span class="hljs-string">""</span></span> src=<span class="hljs-string"><span class="hljs-string">""</span></span>&gt;&lt;/iframe&gt;</code> </pre> <br><br>  Karena kami masih mencari tahu mengapa Google tidak membentuk judul untuk iframe-nya ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tiket # 4024</a> ), sayangnya, kami terpaksa membuat permintaan satu kali ke server untuk mengambil judul dalam cache. <br><br><h3>  Cara memperbarui cache dengan data Anda </h3><br><pre> <code class="php hljs">add_filter(<span class="hljs-string"><span class="hljs-string">'embed_oembed_html'</span></span>, <span class="hljs-string"><span class="hljs-string">'ytsl_oembed_html'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); ytsl_oembed_html($cache, $url, $attr){};</code> </pre> <br><br>  Saat ini filter dipicu, saya melihat variabel $ cache untuk keberadaan tag data-ytsl saya.  Jika tidak, maka saya membuat permintaan <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">http</span></span>://<span class="hljs-selector-tag"><span class="hljs-selector-tag">www</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.youtube</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.com</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">oembed</span></span>?<span class="hljs-selector-tag"><span class="hljs-selector-tag">url</span></span>=<span class="hljs-selector-tag"><span class="hljs-selector-tag">http</span></span>://<span class="hljs-selector-tag"><span class="hljs-selector-tag">www</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.youtube</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.com</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">watch</span></span>?<span class="hljs-selector-tag"><span class="hljs-selector-tag">v</span></span>=<span class="hljs-selector-tag"><span class="hljs-selector-tag">ojCkgU5XGdg</span></span>&amp;<span class="hljs-selector-tag"><span class="hljs-selector-tag">format</span></span>=<span class="hljs-selector-tag"><span class="hljs-selector-tag">json</span></span></code> </pre> <br><br>  dan bentuk konten dari tag baru.  Akibatnya, cache terlihat seperti ini: <br><br><pre> <code class="php hljs">&lt;iframe width=<span class="hljs-string"><span class="hljs-string">""</span></span> height=<span class="hljs-string"><span class="hljs-string">""</span></span> src=<span class="hljs-string"><span class="hljs-string">" "</span></span> data-ytsl=<span class="hljs-string"><span class="hljs-string">" "</span></span>&gt;&lt;/iframe&gt;</code> </pre> <br><br>  Memperbarui cache dilakukan seperti ini.  Pertama, pertimbangkan kuncinya <br><pre> <code class="php hljs">$cachekey = <span class="hljs-string"><span class="hljs-string">'_oembed_'</span></span> . md5( $url . serialize( $attr ) );</code> </pre> <br>  Dan kemudian kami memperbarui. <br><pre> <code class="php hljs">update_post_meta( get_the_ID(), $cachekey, $cache );</code> </pre> <br><br>  Jika <b>tag data-ytsl</b> saya terdeteksi, saya mengeluarkan judul dan id darinya dan menghasilkan html. <br>  Dalam <b>data-iframe,</b> saya menyisipkan kode cache yang sudah bersih tanpa tag saya, untuk mengganti tata letak dengan konten ini dengan klik. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'ytsl-click_div'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-iframe</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'$ytsl'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'$fixed position:relative;background: url($thumb_url) no-repeat scroll center center / cover'</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'ytsl-title_grad'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'ytsl-title_text'</span></span></span><span class="hljs-tag">&gt;</span></span>{$json['title']}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'ytsl-play_b'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>"</code> </pre> <br>  Css di github, tidak ada alasan untuk menunjukkannya. <br><br>  Hasilnya, pemain terlihat seperti ini. <br><img src="https://habrastorage.org/webt/51/38/jg/5138jg1grzueotu0f5jyy5vivfy.png"><br><br>  Sebagai perbedaan, saya membuat tombol putar dengan warna yang berbeda.  Tetapi fakta bahwa judul itu ditulis oleh Arial, dan bukan oleh font khusus, yang juga dimuat melalui iframe, menurut pendapat saya, tidak banyak mempengaruhi pengakuan. <br><br>  Solusi pemrosesan on-the-fly terakhir sangat cepat, dan dilihat dari plugin, profiler P3 goDaddy benar-benar tidak menyakitkan.  Karena itu, dimungkinkan untuk menemukan keseimbangan antara kenyamanan dan kecepatan.  Plugin tidak memerlukan tindakan apa pun dari pengguna.  Itu hanya menunjukkan gambar bukan iframe ketika diaktifkan. <br><br>  <b>Di ujung depan.</b> <br><br>  Cukup sambungkan skrip.  Semuanya sangat elementer: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">".ytsl-click_div"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; f.length; ++i) { f[i].onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentElement.innerHTML = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">"data-iframe"</span></span>); } } })();</code> </pre><br><br>  Kontra pada perangkat seluler, browser sangat cerdas, dan mereka dapat melakukannya sendiri.  Karena itu, jika Anda tidak mendefinisikan perangkat seluler, Anda harus melakukan dua klik untuk memainkannya. <br><br>  Total: <br>  html - 0,5 kb <br>  css - 1.4 kb <br>  js - 0,2 kb <br>  font - 0 kb <br>  img - 50 kb (tergantung gambar latar belakang) <br><br>  Saya tidak melihat sisa minus untuk jangka waktu yang agak besar. <br><br>  Yah, dia melukis kucing itu dalam waktu yang lama, dan tidak terlalu menarik secara teknis. <br><br>  Kode ini ada di sini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/Alexufo/youtube-speedload</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id417039/">https://habr.com/ru/post/id417039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id417029/index.html">Pembuatan Kode dengan LLVM</a></li>
<li><a href="../id417031/index.html">Mobile OAuth 2.0 Security</a></li>
<li><a href="../id417033/index.html">QIWI Kitchen pada 7 Juni - video pidato para pembicara kami</a></li>
<li><a href="../id417035/index.html">UnnyWorld: post-mortem</a></li>
<li><a href="../id417037/index.html">BEERBRAZZERS. Kontrol cahaya. Lampu Vixen 3. Mulai Cepat (1/4)</a></li>
<li><a href="../id417041/index.html">eslint-scope v3.7.2 mencuri token NPM</a></li>
<li><a href="../id417043/index.html">Sebuah dongeng tentang Burger King dan data pengguna. Komentar Pengembang</a></li>
<li><a href="../id417045/index.html">Uji klinis terapi anti-penuaan pertama</a></li>
<li><a href="../id417047/index.html">Python Creator: Saya lelah, saya akan pergi</a></li>
<li><a href="../id417049/index.html">Standar pendahuluan untuk aplikasi seluler dengan 87 persyaratan untuk fungsi mereka telah muncul di Federasi Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>