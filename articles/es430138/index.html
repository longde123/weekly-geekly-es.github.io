<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòâ üêµ üßíüèº Optimizar un robot comercial: un algoritmo gen√©tico üöæ üò≠ ‚ò†Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En un art√≠culo anterior, comenc√© a comparar m√©todos de optimizaci√≥n param√©trica, es decir, seleccionar par√°metros, evaluar la rentabilidad de operar u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimizar un robot comercial: un algoritmo gen√©tico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430138/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/bz/_0/v9/bz_0v9pphiv-9bi1gtg5b65riy8.png"></a> <br><br>  En un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior,</a> comenc√© a comparar m√©todos de optimizaci√≥n param√©trica, es decir, seleccionar par√°metros, evaluar la rentabilidad de operar un robot durante la posterior <abbr title="prueba de robot comercial en datos hist√≥ricos">prueba</abbr> posterior.  Result√≥ que el m√©todo banal de Monte Carlo, la generaci√≥n de combinaciones aleatorias no correlacionadas de par√°metros de robot, funciona bastante bien.  Ahora quiero probar un algoritmo popular, incluido uno en la comunidad de comerciantes de programaci√≥n: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">algoritmo de optimizaci√≥n gen√©tica</a> . <br><a name="habracut"></a><br><h1>  Algoritmo gen√©tico para optimizar una estrategia comercial. </h1><br>  Consideraremos este algoritmo como un ejemplo de optimizaci√≥n de 2 par√°metros.  Los par√°metros optimizados de nuestro robot son el per√≠odo de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">media m√≥vil</a> y <abbr title="objetivo de beneficio de una sola transacci√≥n de robot">TakeProfit</abbr> .  Para una mayor inmersi√≥n en la "gen√©tica", aceptemos llamar al per√≠odo de la media m√≥vil el gen responsable del "crecimiento", y TakeProfit, el gen para el "color de ojos". <br><br>  En el espacio de valores de par√°metros admisibles, cada punto, cada par de coordenadas - "altura / color de ojos" describe te√≥ricamente un "individuo".  Supongamos que creamos al azar 10 individuos.  Este fue el <b>primer paso del</b> algoritmo de optimizaci√≥n gen√©tica: crear la primera generaci√≥n: <br><br><img src="https://habrastorage.org/webt/wo/mx/1s/womx1s6e3gde2yk04asr9rzaqzs.png"><br><br>  En el espacio de coordenadas M - T, los puntos se seleccionan aleatoriamente.  Por ejemplo, dos puntos marcados con un marco rojo son "individuos" con nombres de g√©nero neutro (¬°este es un punto importante!) Zhenya y Sasha.  El "crecimiento" de Sasha (en la formulaci√≥n inicial del problema es el per√≠odo promedio m√≥vil) es de 11 unidades, el "color de ojos" es 0.6 (ojos verde-azul).  Zhenya es ligeramente diferente en los par√°metros.  Las mismas caracter√≠sticas describen los 8 individuos restantes. <br><br><h2>  <font color="3030cc">El segundo paso es la reproducci√≥n.</font> </h2><br>  De toda la primera generaci√≥n, determinamos un cierto n√∫mero de las personas m√°s "exitosas".  El criterio, obviamente, es el valor de la <abbr title="funci√≥n objetivo (beneficio)">FQ.</abbr>  Estos individuos se reproducir√°n, formando parejas al azar (por esta raz√≥n, recibieron nombres de g√©nero neutral).  En general, se pueden establecer una serie de reglas para pares coincidentes.  Por ejemplo, para seleccionar individuos que tienen caracter√≠sticas cercanas (es decir, literalmente, m√°s cercanas en el espacio de coordenadas) a los individuos: endogamia.  Por el contrario, puede buscar los opuestos (endogamia).  No pude encontrar argumentos a favor de una de estas opciones: en mi implementaci√≥n, las parejas se forman estrictamente por accidente ... Por ejemplo, Zhenya y Sasha aprobaron la calificaci√≥n y decidieron dar a luz a un descendiente.  ¬øQu√© significa esto en nuestro contexto? <br><br><img src="https://habrastorage.org/webt/mv/ad/i9/mvadi9zl8mv_gfhtnhsadcyul20.png"><br><br>  De dos individuos ‚Äúparentales‚Äù obtenemos el tercer individuo, que hereda parte de las caracter√≠sticas de uno de los padres, parte del otro.  Por ejemplo, Zhenya y Sasha dieron a luz a una Nikita individual (¬øNikita, Nikita?): <br><br><ul><li>  Nikita hered√≥ el signo "color de ojos" (par√°metro TakeProfit del robot) de uno de sus padres: "Zhenya", </li><li>  "Crecimiento" (el per√≠odo del robot de media m√≥vil) que Nikita hered√≥ de "Sasha" ... pero ligeramente ajustado en la direcci√≥n de otro padre, Zhenya. </li></ul><br>  El hecho es que cuanto menor sea la dimensi√≥n del espacio de optimizaci√≥n (en nuestro caso es igual a 2), "m√°s cerca" estar√° la descendencia.  El algoritmo de optimizaci√≥n gen√©tica no determina estrictamente las reglas para la "herencia" de genes para un individuo hijo.  Por lo tanto, al azar, Nikita tom√≥ prestado el color de sus ojos sin ning√∫n cambio, pero result√≥ estar en el medio entre ambos padres, m√°s cerca de uno de ellos.  En mi implementaci√≥n, con el mismo √©xito, Nikita podr√≠a tomar prestados los par√°metros originales de ambos padres. <br><br><h2>  <font color="3030cc">El tercer paso es la cr√≠a.</font> </h2><br>  Motor del proceso evolutivo, selecci√≥n natural.  4 de los 10 mejores individuos dieron 10 descendientes m√°s.  Ahora tenemos 20 individuos.  El algoritmo de optimizaci√≥n gen√©tica implica mantener un tama√±o de poblaci√≥n constante.  10 personas deben "morir".  En esta implementaci√≥n, la mayor√≠a de los individuos de la primera generaci√≥n "mueren", del 80% al 100%. <br>  En consecuencia, en nuestro ejemplo, la nueva generaci√≥n estar√° compuesta por 0 ... 2 padres y 8-10 de sus descendientes.  En otras palabras, si omite la letra, los nuevos vectores de los par√°metros del robot comercial se calcular√°n a partir de los vectores obtenidos en el paso anterior, "propagaci√≥n" (combinaci√≥n) de las 4 mejores mejores pruebas.  La mayor√≠a de las ‚Äúpersonas mayores‚Äù no aceptar√°n participar en la nueva iteraci√≥n de selecci√≥n (son posibles otras opciones para implementar la selecci√≥n). <br><br><h2>  <font color="3030cc">Algoritmo completado</font> </h2><br>  La reproducci√≥n y la selecci√≥n se repiten N veces.  Espec√≠ficamente, en nuestro ejemplo, para comparar con tres algoritmos probados previamente, se prueban 4 generaciones de 10 individuos, un total de 40 pruebas. <br>  Pero puede suceder que otra poblaci√≥n colapsar√°.  En otras palabras, todas las pruebas se realizar√°n cerca de varios puntos.  Para evitar esta situaci√≥n, se utilizan varios mecanismos, en particular: <br><br><ul><li>  infusi√≥n de "sangre fresca" en la poblaci√≥n.  A los descendientes de la poblaci√≥n actual se agregan varios individuos nuevos obtenidos por casualidad, de la misma manera que se form√≥ la poblaci√≥n inicial, </li><li>  mecanismo de mutaci√≥n: un individuo descendiente puede tener algunas de las caracter√≠sticas (coordenadas) ligeramente diferentes de las caracter√≠sticas de sus padres: </li></ul><br><img src="https://habrastorage.org/webt/zq/me/o7/zqmeo7nqe2qijovrbmhzf7idh14.png"><br><br>  en este ejemplo <br><br><ul><li>  las caracter√≠sticas de la descendiente Jane y Joss: "crecimiento" y "color de ojos" se toman prestados de cada uno de los padres, </li><li>  Las caracter√≠sticas de la descendencia de Sam y Siri son algo diferentes de las caracter√≠sticas correspondientes de ambos individuos parentales. </li></ul><br>  En mi implementaci√≥n, a pesar de las mutaciones y los "individuos nuevos", la poblaci√≥n tuvo que actualizarse peri√≥dicamente en su conjunto para evitar la convergencia prematura, la localizaci√≥n de toda la poblaci√≥n en un espacio limitado. <br><br>  Si volvemos a los datos originales en los que probamos los algoritmos de Monte Carlo, el descenso de gradiente y el algoritmo con el nombre de trabajo "batalla naval", el proceso de optimizaci√≥n se puede ilustrar con la siguiente animaci√≥n: <br><br><img src="https://habrastorage.org/webt/2a/bn/y_/2abny__yrjhqoscv1jzbircputc.gif"><br><br>  Como puede ver en la animaci√≥n, al principio la disposici√≥n de los puntos es ca√≥tica, pero, con las generaciones posteriores, tiende a √°reas con valores m√°s altos del DF. <br><br>  Ahora compare los algoritmos en la misma superficie: <abbr title="beneficio">P</abbr> = f ( <abbr title="per√≠odo promedio m√≥vil">M</abbr> , <abbr title="TakeProfit, objetivo de ganancias en el acuerdo">T</abbr> ): <br><br><img src="https://habrastorage.org/webt/hc/pm/v8/hcpmv86zitukibrq2urge2errz4.png"><br><br><table><tbody><tr><th>  Montecarlo </th><th>  descenso gradiente </th><th>  "Batalla naval" </th><th>  <font color="3030cc">algoritmo gen√©tico</font> </th></tr><tr><td>  95,7% </td><td>  92,1% </td><td>  97,0% </td><td>  <font color="3030cc">96,8%</font> </td></tr></tbody></table><br>  El valor promedio del extremo encontrado de la FQ como porcentaje del valor global. <br><br>  Por supuesto, es demasiado pronto para juzgar por un conjunto de datos de entrada, pero hasta ahora el GA, en relaci√≥n con nuestro robot comercial, es inferior al algoritmo de "batalla naval": <br><br><ul><li>  bastante insignificante - por el promedio del valor cuasi √≥ptimo encontrado de la FQ, </li><li>  proporciona la peor estimaci√≥n de la estabilidad param√©trica del algoritmo de negociaci√≥n, ya que no "investiga" el entorno de las tuplas de par√°metros cuasi √≥ptimos que se encuentran en muy poco. </li></ul><br><h1>  Prueba final de 4 algoritmos de optimizaci√≥n </h1><br>  La prueba final se realiz√≥ en 4 conjuntos de datos de entrada: los resultados del backtest de la estrategia comercial en 4 segmentos diferentes del historial de precios ( <abbr title="Euro a D√≥lar estadounidense">EURUSD</abbr> : 2016, EURUSD: 2017, <abbr title="onza troy de oro por d√≥lar estadounidense">XAUUSD</abbr> : 2016, XAUUSD: 2017). <br><br><img src="https://habrastorage.org/webt/ko/in/wg/koinwgtirx7wsytk8ilu5ferro0.gif"><br><br>  (ejemplos de filtros digitales como funciones de <b>dos</b> par√°metros para 4 series temporales de precios) <br><br>  Esta vez, la optimizaci√≥n se realiz√≥ de acuerdo con 3 par√°metros: <br><br><ol><li>  per√≠odo de media m√≥vil "r√°pida" </li><li>  per√≠odo de media m√≥vil "lenta" </li><li>  TakeProfit (ganancia en la transacci√≥n, en porcentaje, al llegar a la cual se complet√≥ la transacci√≥n). </li></ol><br>  Cada uno de los par√°metros tom√≥ 20 valores diferentes.  Total para construir la mesa <br>  P = F (Mf, Ms, T) <br>  donde P es la ganancia, Mf es el per√≠odo del promedio m√≥vil "r√°pido", Ms es el per√≠odo del promedio m√≥vil "lento", T es TakeProfit, <br>  20 * 20 * 20 = se realizaron 8,000 iteraciones de prueba. <br><br>  La optimizaci√≥n se llev√≥ a cabo con una restricci√≥n de 160, 400 y 800 pruebas (c√°lculos de DF en coordenadas seleccionadas).  Cada vez, los resultados se promediaron para 1,000 iteraciones de optimizaci√≥n.  El valor promedio de DF para el vector de par√°metros cuasi √≥ptimo encontrado fue: <br><table><tbody><tr><th>  Montecarlo </th><th>  descenso gradiente </th><th>  "Batalla naval" </th><th>  algoritmo gen√©tico </th></tr><tr><td>  84,1% </td><td>  83,9% </td><td>  77,0% </td><td>  92,6% </td></tr></tbody></table><br>  Por separado, vale la pena se√±alar que GA muestra un buen resultado incluso con un peque√±o porcentaje de pruebas del n√∫mero total posible de opciones: <br><table><tbody><tr><th>  pruebas </th><th>  Montecarlo </th><th>  descenso gradiente </th><th>  "Batalla naval" </th><th>  algoritmo gen√©tico </th></tr><tr><td>  160 de 8,000 </td><td>  79,1% </td><td>  76,7% </td><td>  73,1% </td><td>  87,7% </td></tr><tr><td>  400 de 8,000 </td><td>  84,7% </td><td>  85,0% </td><td>  77,4% </td><td>  93,7% </td></tr><tr><td>  800 de 8,000 </td><td>  88,6% </td><td>  90,1% </td><td>  80,4% </td><td>  96,3% </td></tr></tbody></table><br><h1>  En lugar de una conclusi√≥n </h1><br>  Me sorprendi√≥ un poco el resultado, que mostr√≥ un algoritmo de optimizaci√≥n gen√©tica.  No creo que espec√≠ficamente el "paradigma gen√©tico" del m√©todo le haya proporcionado el primer lugar en la lista.  En cierto sentido, de acuerdo con la l√≥gica de la elecci√≥n de coordenadas, se parec√≠a a los m√©todos de dicotom√≠a / proporci√≥n √°urea.  Probablemente valga la pena probar uno de estos algoritmos y comparar el GA con √©l. <br><br>  Volviendo al robot comercial, vale la pena se√±alar c√≥mo el "alivio" de la superficie formada por el CF (beneficio) cambia de a√±o en a√±o.  Es decir, habiendo "optimizado" el robot en la historia de 2017, <b>no tiene sentido aplicar esta configuraci√≥n en 2018</b> (primer trimestre, mes, semana ... 2018). <br><br>  Las estrategias comerciales artificiales, dogm√°ticas e indefensas como la nuestra (comprar en la intersecci√≥n de la media m√≥vil) probablemente no pasar√°n de moda pronto.  Lamentablemente, no ten√≠a otras estrategias.  En consecuencia, atribuyo las ganancias o p√©rdidas de los robots comerciales a la suerte en lugar de las ventajas / desventajas del algoritmo.  Por lo tanto, la tarea de optimizaci√≥n param√©trica de un robot comercial es para m√≠ personalmente exclusivamente de inter√©s acad√©mico. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430138/">https://habr.com/ru/post/es430138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430126/index.html">Otra lista de proyectos para practicar</a></li>
<li><a href="../es430128/index.html">Desarrollo a trav√©s de pruebas: mejora de habilidades</a></li>
<li><a href="../es430132/index.html">Lo que aprendimos sobre la seguridad de Intel ME en los √∫ltimos a√±os: 7 datos sobre el misterioso subsistema</a></li>
<li><a href="../es430134/index.html">Algoritmos para optimizar un robot comercial: una forma efectiva de comerciar un mill√≥n retroactivamente</a></li>
<li><a href="../es430136/index.html">C√≥mo lanzar√°n Starlink: Internet satelital de Ilona Mask</a></li>
<li><a href="../es430140/index.html">Cinco razones para el fracaso del SEO. An√°lisis de la experiencia de promoci√≥n fallida con ejemplos</a></li>
<li><a href="../es430142/index.html">¬øSu Windows es tan viejo?</a></li>
<li><a href="../es430144/index.html">Simulamos un r√≠o realista en Houdini y Unreal Engine 4</a></li>
<li><a href="../es430146/index.html">Matem√°ticas en Gamedev es simple. Vectores e integrales</a></li>
<li><a href="../es430148/index.html">Fuga de datos personales de MFC de Mosc√∫</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>