<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐บ ๐ฅ ๐ ููููุฉ ุชุณุฑูุน ุงูุนูู ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุบุฉ R ุจุงุณุชุฎุฏุงู ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ ุ ุจุงุณุชุฎุฏุงู ูุซุงู Yandex.Direct API (ุงูุฌุฒุก 2) ๐ฅฅ ๐ณ ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูููุงู ุงูุฃุฎูุฑ ุ ุชุญุฏุซุช ุนู ูุงููุฉ ุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ููุฏูุช ุฃูุซูุฉ ุนูู ุชูููุฐู ุจุงููุบุฉ R ุนูุฏ ุงูุนูู ูุน Yandex.Direct API ุจุงุณุชุฎุฏุงู doParallel ูุงูุจูุงุก for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุชุณุฑูุน ุงูุนูู ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุบุฉ R ุจุงุณุชุฎุฏุงู ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ ุ ุจุงุณุชุฎุฏุงู ูุซุงู Yandex.Direct API (ุงูุฌุฒุก 2)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448404/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงู</a> ุงูุฃุฎูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุ</a> ุชุญุฏุซุช ุนู ูุงููุฉ ุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ููุฏูุช ุฃูุซูุฉ ุนูู ุชูููุฐู ุจุงููุบุฉ R ุนูุฏ ุงูุนูู ูุน Yandex.Direct API ุจุงุณุชุฎุฏุงู <code>doParallel</code> ูุงูุจูุงุก <code>foreach</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ุงูููุงูุฉ ูู ุงูุชุฏุงุฏ ุ ูููู ูููู ุงุนุชุจุงุฑูุง ุฏููููุง ุฏูู ุงุชุตุงู ูุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู R. ููุฏ ุทููุจ ููู ูุชุงุจุชู ุจุงูุชุนูููุงุช ุงูุชู ูุฑุฏุช ูู ุงูุฌุฒุก ุงูุฃูู (ููุง ุดูุฑ ุฎุงุต ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">Alexey_mosc</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">SatCat</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">Ananiev_Genrih</a> ) ุ ุญูุซ ุชูููุช ุนุฏุฏูุง ูู ุงูุญุฒู ุงูุชู ุชูุซู ุทุฑููุฉ ุฃูุซุฑ ุญุฏุงุซุฉ ูู ุชุทุจููุงุช multithreading ูู R ุ ุณูุชุญุฏุซ ุนููุง ูุงุญููุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/302/1a1/570/3021a15709dae984b328e3af5364d1de.png" alt="ุฎุงุตูุฉ ุชุนุฏุฏ"></p><a name="habracut"></a><br><h1 id="soderzhanie" style=";text-align:right;direction:rtl">  ูุญุชูู </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฏุฑูุจ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงู ุญู ุงููุนุงูุฌุฉ ุงูุชุณูุณููุฉ ุ ูุธููุฉ sapply ูุญุฒูุฉ purrr</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธููุฉ ุตุงูุฑุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฒูุฉ Purrr</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุญู ูููุฉ ุชุฌููุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู Yandex.Direct</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฒูุฉ ููุงุฒูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฒูุฉ ุงููุณุชูุจู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุบููุฉ ุนูู ุงููุณุชูุจู</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฒูุฉ Future.apply</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฒูุฉ Furrr</a> </li></ul></li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชุจุงุฑ ุงูุณุฑุนุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุณุชูุชุงุฌ</a> </li><li style=";text-align:right;direction:rtl">  ููุงุจูุฉ </li></ul><br><h1 id="zadacha" style=";text-align:right;direction:rtl">  ูููุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ ูุฃุฎุฐ ุงููุดููุฉ ุงูุชู ุชู ุจุญุซูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุดูุฑ ุณุงุจู</a> ุ ุฃู  ูู ูุถุน ูุชุนุฏุฏ ุงูุฎููุท ุ ุงุฌูุน ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูู 4 ุญุณุงุจุงุช ุฅุนูุงููุฉ ูู Yandex.Direct. </p><br><p style=";text-align:right;direction:rtl">  ููุนูู ูุน Yandex.Direct API ุ ุณูู ูุณุชุฎุฏู ุญุฒูุฉ <code>ryandexdirect</code> .  ุงููุซุงุฆู ุงูุฑุณููุฉ ุงูุฎุงุตุฉ ุจูุง ููุฌูุฏุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุงุจุท</a> ุ ููู ูุชูููุฐ ุงููููุฉ ุงูููุตููุฉ ุ ูุญุชุงุฌ ููุท ุฅูู ูุธููุชูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>yadirAuth</code> - ุงูุชูููุถ ูู Yandex.Direct API ุ </li><li style=";text-align:right;direction:rtl">  <code>yadirGetKeyWords</code> - ูู ุจุชูุฒูู ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุญุณุงุจุงุช ุงูุฅุนูุงูุงุช. </li></ul><br><p style=";text-align:right;direction:rtl">  ููุณ ููุท ุฃููู ุงุฎุชุฑุช ุนูููุฉ ุชูุฒูู ุงููููุงุช ุงูุฑุฆูุณูุฉ ุ ูููู ุงูุญูููุฉ ูู ุฃู ูุฐู ูุงุญุฏุฉ ูู ุฃูุซุฑ ุงูุนูููุงุช ุงูุทูููุฉ ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Yandex.Direct.  ุซุงููุงู ุ ูุฎุชูู ุนุฏุฏ ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุฌููุน ุงูุญุณุงุจุงุช ุ ูุจุงูุชุงูู ุ ูุฅู ููุช ุฅุชูุงู ูุฐู ุงูุนูููุฉ ููู ุญุณุงุจ ุณูููู ูุฎุชูููุง ุฌุฏูุง ุ ูู ุญุงูุชูุง ูู 1 ุฅูู 20 ุซุงููุฉ. </p><br><h1 id="podgotovka" style=";text-align:right;direction:rtl">  ุชุฏุฑูุจ </h1><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ุชุซุจูุช ุฌููุน ุงูุญุฒู ุงูุชู ุชูุช ููุงูุดุชูุง ูู ูุฐู ุงูููุงูุฉ ุ ูุฐูู ููููู ุงุณุชุฎุฏุงู ุงูููุฏ ุฃุฏูุงู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุฏ 1: ุชุซุจูุช ุงูุญุฒู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#    install.packages("ryandexdirect") install.packages("tictoc") install.packages("rbenchmark") install.packages("dplyr") install.packages("purrr") install.packages("future") install.packages("promises") install.packages("furrr") install.packages("future.apply")</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููู ุชููู ูุธุงุฆู ุงูุญุฒูุฉ ูุชุงุญุฉ ูู ุ ูุฌุจ ุชูุตูููุง ุจุงุณุชุฎุฏุงู ุฃูุฑ <code>library</code> .  ููุฑุงุญุฉ ุ ุณูู ุฃููู ุจุชูุตูู ูู ุงูุญุฒู ุงููุงุฒูุฉ ุจุดูู ูููุตู ูู ูู ูุซุงู ุฑูุฒ ูุนูู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅูุดุงุก ูุชุฌู ูุชููู ูู ุชุณุฌููุงุช Yandex.Direct ุ ูุงูุชู ุณูุทูุจ ูููุง ูููุง ุจุนุฏ ุงููููุงุช ุงูุฑุฆูุณูุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ 2: ุฅูุดุงุก ูุงูู ุชุณุฌูู ุงูุฏุฎูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">logins &lt;- c("login1", "login2", "login3", "login4")</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููุนูู ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Yandex.Direct ุ ุชุญุชุงุฌ ุฃููุงู ุฅูู ุงูุฏุฎูู ูู ุชูููุถ ุชุญุช ูู ุญุณุงุจ ุ ูุฐูู ููููู ุงุณุชุฎุฏุงู ุงูุชุตููู ุงูุชุงูู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุฏ 3: ุงูุชูููุถ ูู Yandex.Direct API</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">lapply(logins, function(l) { yadirAuth(Login = l)})</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุดุบูู ุงูููุฏ ุฃุนูุงู ุ ุณููุชุญ ุงููุชุตูุญ ููุชุฑุฎูุต ุชุญุช ูู ุญุณุงุจ.  ุนููู ุชุฃููุฏ ุฅุฐู <code>ryandexdirect</code> ูููุตูู ุฅูู ุงูููุงุฏ ุงูุฅุนูุงููุฉ ุงูุฎุงุตุฉ ุจู.  ุณูุชู ุชูุฌููู ุฅูู ุงูุตูุญุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ูุณุฎ ุฑูุฒ ุงูุชุญูู.  ุจุฅุฏุฎุงูู ูู ูุญุฏุฉ ุงูุชุญูู R ุ ุฃููู ุนูููุฉ ุงูุชูููุถ.  ูุชู ุชูุฑุงุฑ ูุฐู ุงูุนูููุฉ ููู ุชุณุฌูู ุฏุฎูู ููุช ุจุชุญุฏูุฏู ุนูุฏ ุฅูุดุงุก ุชุณุฌููุงุช ุฏุฎูู ุงููุชุฌู. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ุจุนุถ ุงููุณุชุฎุฏููู ุ ุฃุซูุงุก ุนูููุฉ ุงูุชูููุถ ุ ูุฑุชุจููู ูู ุญูููุฉ ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู ููุฑุฏ ุชุงุจุน ูุฌูุฉ ุฎุงุฑุฌูุฉ ุ ููู ูุง ููุฌุฏ ุฃู ุฎุทุฑ ุนูู ุญุณุงุจู ูู ูุฐุง ุงูููุถูุน ุ ููุฏ ูุตูุช ูุฐุง ุงูููุถูุน ุจูุฒูุฏ ูู ุงูุชูุตูู ูู ุงูููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ูุฏู ุฃูุงู ุงุณุชุฎุฏุงู ุญุฒู R ููุนูู ูุน ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฃูุธูุฉ ุงูุฅุนูุงู"</a> . </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณููุธุฑ ูู ุงูุนุฏูุฏ ูู ุงูุฃูุซูุฉ ูุชูููุฐ ุงููููุฉ ุงูููุตููุฉ.  ุณูุจุฏุฃ ูู ูููุง ุจุฑูุฒ ูุซุงู ุ ูุน ุดุฑุญ ุฅุถุงูู.  ุฃุนุชูุฏ ุฃู ูุฐุง ุงูุฎูุงุฑ ุณูููู ุฃูุซุฑ ููุงุกูุฉ ููุฅุฏุฑุงู. </p><br><h1 id="primer-resheniya-v-posledovatelnom-rezhime-obrabotki-funkciya-sapply-i-paket-purrr" style=";text-align:right;direction:rtl">  ูุซุงู ุญู ุงููุนุงูุฌุฉ ุงูุชุณูุณููุฉ ุ ูุธููุฉ sapply ูุญุฒูุฉ purrr </h1><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/369/72e/9d8/36972e9d8707c1c508d2e43b8721778c.jpg"><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ</a> ุ ุฐูุฑุช ุญูุงู ุจุงุณุชุฎุฏุงู ุญููุฉ <code>for</code> ููุซุงู.  ูุธุฑูุง ูุฃููุง ูุธุฑูุง ูู ุชุนุฏุฏ ุงูุนูููุงุช ุจุงุณุชุฎุฏุงู ุญุฒูุฉ <code>foreach</code> ุ ุงูุชู ุชุดุจู ุจูุงุก ุงูุฌููุฉ ุงูุญููุงุช ุ ูุฅู ูุฐุง ุงููุซุงู ูุงู ููุงุณุจูุง ุ ุนูู ุงูุฑุบู ูู ุฃู ูุณุชุฎุฏูู ุงูุญููุงุช ูุง ูุฑุญุจ ุจูู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุญุฒู ุงูุชู ุณูุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ูู ูุฐู ุงูููุงูุฉ ุชุฐูุฑูุง ุจุดูู ุฃูุจุฑ ุจูุธุงุฆู ุนุงุฆูุฉ ุงูุชุทุจูู ูู ุจูุงุก ุงูุฌููุฉ ุ ูุจุงูุชุงูู ุ ุณุฃูุฏู ูุซุงููุง ุนูู ุญู ูู ุงููุถุน ุงูุชุณูุณูู ุงูุฐู ูุณุชุฎุฏููุง. </p><br><h3 id="funkciya-sapply" style=";text-align:right;direction:rtl">  ูุธููุฉ <code>sapply</code> </h3><br><blockquote style=";text-align:right;direction:rtl">  ูุชูุฏูุฑ ููุช ุชูููุฐ ุงูุฃูุงูุฑ ุ ูู ูู ูู ุงูุทุฑู ุงูุชู ุชู ุงููุธุฑ ูููุง ุ ุณูู ูุณุชุฎุฏู ุญุฒูุฉ <code>tictoc</code> . </blockquote><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ 4: ูุซุงู ุงูุญู ูู ุงููุถุน ุงููุชุณูุณู ุจุงุณุชุฎุฏุงู ูุธููุฉ sapply</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(tictoc) library(dplyr) tic() #   kw.sapply &lt;- sapply( logins, #  ,     function(x) #        #     { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = FALSE #     ) toc() #   #       result.sapply &lt;- do.call("rbind", kw.sapply)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  <code>39.36 sec elapsed</code> ุงูููุช: <code>39.36 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ููุณ ูู ุงูุณูู ูุฑุงุกุฉ ุจูุงุก ุฌููุฉ ูุธุงุฆู <code>apply</code> ููุง ูู ุงูุญุงู ูู ุจูุงุก ุงูุญููุงุช ุ ูููู ูู ุงููุงูุน ุ ูู ุดูุก ุจุณูุท ููุบุงูุฉ. </p><br><p style=";text-align:right;direction:rtl"> <code>sapply(X, FUN)</code> </p> <br><p style=";text-align:right;direction:rtl">  ุญูุซ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em>X</em> - ูุงุฆู ุณูู ููุฑุฑ ุนูุงุตุฑู ููุณุชุฎุฏูู ุจุฏูุฑู ูู ูู ุชูุฑุงุฑ ุ ูู ุญููุฉ ุชุจุฏู ูุฐู ููุง ููู: <code>for(i in X)</code> ุ </li><li style=";text-align:right;direction:rtl">  <em>FUN</em> - ูู ุงููุธููุฉ ุงูุชู ุณูุณุชุจุฏู ูููุง ูู ุนูุตุฑ ูู ุนูุงุตุฑ ุงููุงุฆู <em>X</em> ุจุฏูุฑู ุ ุฅุฐุง ุฑุณููุง ุชุดุงุจููุง <code>for</code> ุ ููุฐุง ูู ูุต ุงูุญููุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ูุซุงู ุงูุชุนูููุฉ <strong>ุงูุจุฑูุฌูุฉ 4</strong> ุ ูุชู ุชูุฑูุฑ ูุงูู <em>ุชุณุฌูู ุงูุฏุฎูู ุงูุฐู</em> ุชู ุฅูุดุงุคู ูุณุจููุง ุฅูู ุงููุณูุทุฉ <em>X.</em>  ูุชู ุชูุฑูุฑ ูู ุนูุตุฑ ูู ูุชุฌู <em>logins</em> ุจุฏูุฑู ููุณูุทุฉ ููุท ููุธููุฉ <code>function(x) { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }</code> ุงููุฌูููุฉ <code>function(x) { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }</code> ุงูุฐู ุชู ุชูุฑูุฑู ุฅูู ูุณูุทุฉ <em>FUN</em> . </p><br><p style=";text-align:right;direction:rtl">  ุฃู  ุณูููู <code>sapply</code> ุจุชูููุฐ ุงููุธููุฉ ุงููุญุฏุฏุฉ ูู <em>FUN</em> 4 ูุฑุงุช ุ ูุงุณุชุจุฏุงู ุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู ุจูุง ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุ ูุฅุฑุฌุงุน ุงููุชูุฌุฉ ูู ุดูู ูุงุฆูุฉ (ูุงุฆู <em>ูุงุฆูุฉ</em> ุงููุฆุงุช) ุชุชููู ูู 4 ุนูุงุตุฑ.  ูู ุนูุตุฑ ุนุจุงุฑุฉ ุนู ุฌุฏูู ูุญุชูู ุนูู ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ุงููุณุชููุฉ ูู ุงูุญุณุงุจ ูู ูู ุชูุฑุงุฑ. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>yadirGetKeyWords(Login = "login1") %&gt;% mutate(login = "login1")</code> </li> <li style=";text-align:right;direction:rtl"> <code>yadirGetKeyWords(Login = "login2") %&gt;% mutate(login = "login2")</code> </li> <li style=";text-align:right;direction:rtl"> <code>yadirGetKeyWords(Login = "login3") %&gt;% mutate(login = "login3")</code> </li> <li style=";text-align:right;direction:rtl"> <code>yadirGetKeyWords(Login = "login4") %&gt;% mutate(login = "login4")</code> </li> </ol><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงููุงุฆู ุงูุฐู ุชู ุงูุญุตูู ุนููู ุจุงุณุชุฎุฏุงู <code>sapply</code> ุนูู ุงูุจููุฉ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">summary(kw.sapply)</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Length Class Mode login1 19 data.frame list login2 19 data.frame list login3 19 data.frame list login4 19 data.frame list</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ููุงูุฉ ูุฐุง ุงููุซุงู ุ <code>result.sapply &lt;- do.call("rbind", kw.sapply)</code> ุฃูุฑ <code>result.sapply &lt;- do.call("rbind", kw.sapply)</code> ุฌููุน ุงูุนูุงุตุฑ <em>ุงูุฃุฑุจุนุฉ</em> ููุงุฆูุฉ <em>kw.sapply</em> ูู ุฅุทุงุฑ <em>result.sapply</em> ูุงุญุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># A tibble: 6,804 x 1 result.sapply$Id $Keyword $AdGroupId $CampaignId $ServingStatus $State &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt; 1 15164230566 ~ 3597453985 39351725 ELIGIBLE ON 2 15164230567  ~ 3597453985 39351725 ELIGIBLE ON 3 15164230568  ~ 3597453985 39351725 ELIGIBLE ON 4 15164230569 ~ 3597453985 39351725 ELIGIBLE ON 5 15164230570 ~ 3597453985 39351725 ELIGIBLE ON 6 15164230571  ~ 3597453985 39351725 ELIGIBLE ON 7 15164230572 ~ 3597453985 39351725 ELIGIBLE ON 8 15164230573  ~ 3597453985 39351725 ELIGIBLE ON 9 15164230574 ~ 3597453985 39351725 ELIGIBLE ON 10 15164230575 ~ 3597453985 39351725 ELIGIBLE ON # ... with 6,794 more rows, and 13 more variables: $Status &lt;fct&gt;, # $StrategyPriority &lt;fct&gt;, $StatisticsSearchImpressions &lt;int&gt;, # $StatisticsSearchClicks &lt;int&gt;, $StatisticsNetworkImpressions &lt;int&gt;, # $StatisticsNetworkClicks &lt;lgl&gt;, $UserParam1 &lt;chr&gt;, $UserParam2 &lt;chr&gt;, # $ProductivityValue &lt;lgl&gt;, $ProductivityReferences &lt;lgl&gt;, $Bid &lt;dbl&gt;, # $ContextBid &lt;dbl&gt;, $login &lt;chr&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู <code>sapply</code> ุ ุชุชุถูู ูุฌููุนุฉ ุงููุธุงุฆู <code>*apply</code> <code>sapply</code> : <code>lapply</code> ุ <code>vapply</code> ุ <code>mapply</code> ุ <code>mapply</code> ูุบูุฑูุง. </p><br><h3 id="paket-purrr" style=";text-align:right;direction:rtl">  ุญุฒูุฉ <code>purrr</code> </h3><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ 5: ูุซุงู ุงูุญู ุจุงุณุชุฎุฏุงู ูุธุงุฆู ุญุฒูุฉ purrr</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(purrr) library(dplyr) library(tictoc) tic() #   result.purrr &lt;- map_df( logins, #  ,     ~ #   function(.x) { yadirGetKeyWords(Login = .x) %&gt;% mutate(login = .x) } ) toc() #  </code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  <code>35.46 sec elapsed</code> ุงูููุช: <code>35.46 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl">  ุชุนุชุจุฑ ุญุฒูุฉ <code>purrr</code> ุฌุฒุกูุง ูู ููุจ ุงูููุชุจุฉ <code>tidyverse</code> ุ ูู ุชุฃููู ููุฏูู ููููุงู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุนูู ูุจูุงุก ุงูุฌููุฉ ุ ูุฅู ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ ููุญุฒูุฉ ุชุดุจู ุฅูู ุญุฏ ูุจูุฑ <code>sapply</code> ุ ููุฒุชูุง ุงูุฑุฆูุณูุฉ ูู ููุง ููู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชููุณู ุงููุธุงุฆู ุฅูู <code>map</code> ุงูุนุงุฆูุงุช ุ <code>map2</code> ุ <code>pmap</code> ุ <code>walk</code> ููุง ุฅูู ุฐูู ุ ุงููุธุงุฆู ุงููููุตูุฉ ุงููุถููุฉ ูู ููุณ ุงูุนุงุฆูุฉ ุชูุฑุฌุน ุงููุชูุฌุฉ ุจุชูุณููุงุช ูุฎุชููุฉ: <em>chr</em> ุ <em>dbl</em> ุ <em>int</em> ุ <em>df</em> ุ ููุง ุฅูู ุฐูู ุ </li><li style=";text-align:right;direction:rtl">  <code>map2</code> ูู ูุธุงุฆู ุนุงุฆูุฉ <code>map2</code> ุนูู ุงูุนูุงุตุฑ (ุงูุชูุฑุงุฑ) ูู ููุช ูุงุญุฏ <code>map2</code> ุ </li><li style=";text-align:right;direction:rtl">  <code>pmap</code> ูู ูุธุงุฆู ุนุงุฆูุฉ <code>pmap</code> ูู ููุช ูุงุญุฏ ุนูู ุนูุงุตุฑ ุฃู ุนุฏุฏ ูู ุงููุงุฆูุงุช.  ููููู ุชูุฑูุฑ ุฌุฏูู ุฅูู ุงููุฏุฎูุงุช ุฅูู ุงููุณูุทุฉ <em>.l</em> <em>(ุชูุงุธุฑูุฉ ูููุณูุทุฉ X ูู sapply)</em> ุ <em>ูุณูุญุชูู</em> ูู ุนููุฏ ูููุง ุนูู ุงูููู ุงูุชู ุณุชูุฑุฑูุง ุ ูุงูุชู ุณูุชู ุงุณุชุจุฏุงููุง ุจุฏูุฑูุง ูู ูุณูุทุงุช ููุณ ุงููุธููุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ูู <em>.f</em> <em>(ุชูุซููู FUN ูู ุฑููู)</em> . </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุฃู ูููู ูุญุชุงุฌ ุฅูู ุงูุชูุฑุงุฑ ุนูู ุนูุงุตุฑ ูุชุนุฏุฏุฉ ุงูุฃุดูุงุก.  ุนูู ุณุจูู ุงููุซุงู ุ ุฃูุช ุชุนูู ูุน ุงูุนุฏูุฏ ูู ุญุณุงุจุงุช ุงููููุงุก ุ ูุญุณุงุจุงุช ุงูุฅุนูุงู ุงูุชู ุชุฑูุฏ ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูุจุนุซุฑุฉ ุจูููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุฅูุดุงุก ูุงูู ูู ุฃุณูุงุก ุญุณุงุจุงุช ุงููููุงุก ุ ูุงูุชูุฑุงุฑ ูููู ุ ุจุงูุชูุงุฒู ูุน ููููุฉ ูุฑุฒ ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุญุณุงุจุงุช ุงูุฅุนูุงูุงุช. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ 6: ูุซุงู ุนูู ุงูุนูู ูุน ุญุณุงุจุงุช ุงููููุงุก ุงููุชุนุฏุฏุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(purrr) #      agencies &lt;- c("agency1", NA, "agency2", "agency1") #      #         result.pmap2 &lt;- map2_df(.x = logins, .y = agencies, ~ { yadirGetKeyWords(Login = .x, AgencyAccount = .y) %&gt;% mutate(login = .x) })</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุชุฎูู ุงููููู ุงูุฐู ุนูุฏ ููุงูู ุจุชุณุฌูู ุงูุฏุฎูู ุชุญุช ุญุณุงุจุงุช ูุฎุชููุฉ ุ ููุช ุจุญูุธ ุงูููู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ูู ูุฌูุฏุงุช ูุฎุชููุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุชูุฑุงุฑ ููุฑูุง ุนูู ุซูุงุซุฉ ูุงุฆูุงุช: ุชุณุฌููุงุช ุญุณุงุจุงุช ุงูุฅุนูุงู ุ ูุชุณุฌููุงุช ุญุณุงุจุงุช ุงููููู ุ ูุงููุณุงุฑ ุงูุฐู ูุชู ุชุฎุฒูู ุงูููู ุจู ุจูุงูุงุช ุงูุงุนุชูุงุฏ.  ูููู ุงูููุงู ุจุฐูู ุจูุณุงุนุฏุฉ.  <code>pmap</code> ุงูุฃุณุฑุฉ <code>pmap</code> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ 7: ูุซุงู PMAP ูุธููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(purrr) #  ,       #      TokenPath &lt;- c("C:\\proj1\\tokens", "C:\\yandex\\token", "C:\\yandex\\token", "C:\\my_yandex_acoount") #   pmap.result &lt;- pmap_df(list(Login = logins, AgencyAccount = agencies, TokenPath = TokenPath), yadirGetKeyWords)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููููุง ูุฐูู ุ ูุฅู ูุชูุฌุฉ ุชูููุฐ ุงูุฏุงูุงุช <code>map_df</code> ู <code>map2_df</code> ู <code>pmap_df</code> ูู ุฅุทุงุฑ ุงูุชุงุฑูุฎ ุ ูุนูุฏ ุงุณุชุฎุฏุงููุง ุ ูุฅู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุซุงู ูุน <code>sapply</code> ( <code>do.call("rbind", kw.sapply)</code> ) ุบูุฑ ูุทููุจุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฃุตุจุญุช ุงูุดูุฑุฉ ุฃูุซุฑ <code>sapply</code> ูููุฐุช ุจุดูู ุฃุณุฑุน ููููุงู ุ ูููู ูุน ุฐูู ุ ูุฅู ููุง ูู ุงูุฃุณุงููุจ ุงูููุตููุฉ ุ <code>sapply</code> ู <code>purrr</code> ุ ุชุฌูุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ูู ุญุณุงุจ ุจุงูุชุณูุณู.  ูุฐูู ุ ูุฅู ููุช ุงูุชูููุฐ ุงูููู ููุฐู ุงูุนูููุฉ ูุณุงูู ูุฌููุน ูุชุฑุงุช ุฌูุน ุงูุจูุงูุงุช ูู ุงูุญุณุงุจุงุช ุงูุฃุฑุจุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูููุช [ุงูุฅุฌูุงูู]</strong> = <em>ุงูููุช [login1] + ุงูููุช [login2] + ุงูููุช [login3] + ุงูููุช [login4]</em> </p><br><h1 id="mnogopotochnye-varianty-resheniya-zadachi-po-sboru-klyuchevyh-slov-iz-yandeksdirekt" style=";text-align:right;direction:rtl">  ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุญู ูููุฉ ุชุฌููุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู Yandex.Direct </h1><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ab3/53c/cf5/ab353ccf566421eaaa6ec3d6445399a1.jpg"></p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุฅุฐุง ููุช ูุฏ ูุฑุฃุช ุจุงููุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุฃููู</a> ุ ูุฃูุช ุชุนูู ุฃู ูุถุน ุงูุชุดุบูู ูุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุญุชูู ุนูู ุงูุนุฏูุฏ ูู ุงูููุฒุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ูู ูุคุดุฑ ุชุฑุงุจุท ูู ุฌูุณุฉ R ูููุตูุฉ ูุน ุจูุฆุฉ ุนูู ูุธููุฉ. </li><li style=";text-align:right;direction:rtl">  ููุณุจุจ ููุณู ุ ูู ุนูููุฉ ุชุดุบูู ูููุตูุฉ ุ ูุง ูุชู ุฅุฑุณุงู ุงูุญุฒู ุงููุชุตูุฉ ูุณุจููุง ุงูุชุฑุงุถููุง. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุชุตุฏูุฑ ุงููุงุฆูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุจูุฆุฉ ุงูุนูู ุ ูุฑุจุท ุงูุญุฒู ูู ูู ููุฌ ุจุทุฑููุฉ ูุฎุชููุฉ ุ ุซู ุณููุธุฑ ูููุง ุจูุฒูุฏ ูู ุงูุชูุตูู. </p><br><h3 id="paket-parallel" style=";text-align:right;direction:rtl">  ุญุฒูุฉ <code>parallel</code> </h3><br><p style=";text-align:right;direction:rtl">  ุชู ุชุถููู ูุฐู ุงูุญุฒูุฉ ูุฃูู ูุฑุฉ ูู ุญุฒูุฉ R ูู ุงูุฅุตุฏุงุฑ 2.14.0 ูุญุชู ููููุง ูุฐุง ุชุฃุชู ูุน R ููุณูุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ 8: ูุซุงู ุงูุญู ูููุดููุฉ ูู ุฎูุงู ุงูุญุฒูุฉ ุงูููุงุฒูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(parallel) library(tictoc) #   cl &lt;- makeCluster(4) #      clusterExport(cl = cl, varlist = "logins") #  ,      #  ,       ryandexdirect clusterEvalQ(cl = cl, { library(ryandexdirect) library(dplyr) } ) tic() #   parallel.kw &lt;- parSapplyLB(cl = cl, #   X = logins, # ,     FUN = function(x) { #      #      X yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = F) #    toc() #     #   stopCluster(cl) #      result.parallel &lt;- dplyr::bind_rows(parallel.kw)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  <code>16.75 sec elapsed</code> ุงูููุช: <code>16.75 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุญุงูู ุชุญููู <strong>ุงูููุฏ 8</strong> .  <code>makeCluster</code> ุงูุฏุงูุฉ <code>makeCluster</code> ูุฌููุนุฉ ูู 4 ุนูููุงุช.  ูููููุง ุชุตุฏูุฑ ุงููุงุฆูุงุช ูู ุจูุฆุฉ ุงูุนูู ุงูุฑุฆูุณูุฉ ุงูุฎุงุตุฉ ุจูุง ุฅูู ุงููุชูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู ุฏุงูุฉ <code>clusterExport</code> ุ ูููุฐุง ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุงููุณุงุฆุท ุงูุฎุงุตุฉ ุจูุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em>cl</em> - ุงููุชูุฉ ุงูุชู ุณูููู ุจุชุตุฏูุฑ ุงููุงุฆูุงุช ุฅูููุง </li><li style=";text-align:right;direction:rtl">  <em>varlist</em> - ูุชุฌู ูุต ูุญุชูู ุนูู ุฃุณูุงุก ุงููุงุฆูุงุช ุงูุชู ุณูุชู ุชุตุฏูุฑูุง ุฅูู ูู ุนูููุฉ ูุธุงู ูุฌููุนุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุทุฑููุฉ ูุงุญุฏุฉ ููุงุชุตุงู ุงูุญุฒู ุงูุตุญูุญุฉ ุนูู ูู ุนูุฏุฉ ูุธุงู ุงููุฌููุนุฉ ูู ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ <code>clusterEvalQ</code> .  ูู ูุซุงููุง ุ ูุณุชุฎุฏููุง ูุชูุตูู ุงูุญุฒู ุ ูููู ููููู ูุชุงุจุฉ ุฃู ุฑูุฒ R ุฏุงุฎู <code>clusterEvalQ</code> ุ ูุณูุชู ุฅุทูุงูู ูู ุจุฏุงูุฉ ูู ุนูุฏุฉ ูุธุงู ุงููุฌููุนุฉ.  ุงููุณุงุฆุท ุงูุฎุงุตุฉ ุจูุฐู ุงููุธููุฉ ูุงุถุญุฉ ุฅูู ุญุฏ ูุง ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงููุชูุฉ ูุงูุฃูุงูุฑ ุงูุชู ุณูุชู ุชูููุฐูุง ูููุง. </p><br><p style=";text-align:right;direction:rtl">  <code>parSapplyLB</code> ูู ูุณุฎุฉ ูุชูุงุฒูุฉ ูู ูุธููุฉ <code>sapply</code> ูุน ููุงุฒูุฉ ุงูุชุญููู ุจูู ุนูุฏ ุงููุชูุฉ ุ ููุง ุฃููุง ุชุณุชุฎุฏููุง ุ ูููู ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงููุชูุฉ ูุน ูุณูุทุฉ <em>cl</em> . </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถูุง ุนูู <code>parallel</code> ููุงู ุฅุตุฏุงุฑุงุช ูุชูุงุฒูุฉ ุฃุฎุฑู ูู <code>*apply</code> ูุธุงุฆู ุงูุฃุณุฑุฉ: <code>parLapply</code> ุ <code>parSapply</code> ุ <code>parApply</code> ุ ุฅูุฎ. </p><br><p style=";text-align:right;direction:rtl">  ูุฎุชูู <code>parSapply</code> ุนู <code>parSapplyLB</code> ููุท ูุฃูู ูุง ูุญุชูู ุนูู ููุงุฒูุฉ ุชุญููู ุนูู ุนูุฏ ูุธุงู ุงููุฌููุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ <code>stopCluster</code> ูุฅููุงู ุงููุชูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฃูุฑ ุงูุฃุฎูุฑ ุ <code>dplyr::bind_rows(parallel.kw)</code> ูููู ุจุฏูุฌ ุงููุงุฆู <em>parallel.kw ุงูุฐู</em> ุชู ุงูุญุตูู ุนููู ุจุงุณุชุฎุฏุงู <code>parSapplyLB</code> ูู ุฌุฏูู ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุธุงู ุงูุชุดุบูู Linux ุ ูุญุชูู <code>parallel</code> ุนูู ูุธุงุฆู ูููุตูุฉ: <code>mclapply</code> ุ <code>mcmapply</code> ุ <code>mcMap</code> .  ุบุงูุจูุง ูุง ูุชู ุชูููุฐ ุงูุฃูุงูุฑ ูู ูุธุงู ุงูุชุดุบูู ูุฐุง ุจุดูู ุฃุณุฑุน ุ ููุตุจุญ ุงูุฑูุฒ ุฃูุซุฑ ุฅุญูุงูุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ 9: ุญู ุจุงุณุชุฎุฏุงู mclapply ููุธุงู ุงูุชุดุบูู Linux</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(parallel) library(tictic) library(dplyr) library(ryandexdirect) tic() mclapply.kw &lt;- mclapply(logins, FUN = function(x) { #      #      X yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, mc.cores = 4) toc()</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงุณุชุฎุฏุงู ูุฐู ุงููุธุงุฆู ุ ููุณุช ููุงู ุญุงุฌุฉ ูุจุฏุก ูุธุงู ุงููุฌููุนุฉ ุจุงุณุชุฎุฏุงู <code>makeCluster</code> .  ุนุฏุฏ ุงูุนูุฏ ุงูุชู <em>ุชุญุฏุฏูุง</em> ุจุงุณุชุฎุฏุงู ุงููุณูุทุฉ <em>mc.cores</em> .  ููุณุช ููุงู ุญุงุฌุฉ ุฃูุถูุง ูุชูุตูู ุงูุญุฒู ูุชุตุฏูุฑ ุงููุงุฆูุงุช ุ ูุชู ุชูููุฐ ูุฐู ุงูุนูููุงุช ุชููุงุฆููุง. </p><br><h3 id="paket-future" style=";text-align:right;direction:rtl">  ุญุฒูุฉ <code>future</code> </h3><br><p style=";text-align:right;direction:rtl">  ุฃุญุฏ ุงูุฃุณุงููุจ ุงูุญุฏูุซุฉ ูู ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุจุฑูุงูุฌ R. </p><br><p style=";text-align:right;direction:rtl">  ุฑูุฒ ูู ููุงุฒุงุฉ ุฐูู ุณูู ูุญู ูุดููุชูุง ุจูุณุงุนุฏุฉ <code>future</code> ูุนูุฏุฉ ุจูุง ููู ุงูููุงูุฉ ูููู.  ูุฐูู ุ ุฏุนููุง ูุญูู ุนูููุง ุนูู ูุซุงู ุฃุจุณุท ุ ุณูุทูุจ ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุญุณุงุจ ูุงุญุฏ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ 10: ุฃุจุณุท ูุซุงู ุนูู ุงุณุชุฎุฏุงู ุงูุญุฒูุฉ ุงููุณุชูุจููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(future) #    plan(multiprocess) #      #    future.kw &lt;- future({yadirGetKeyWords(Login = logins[4])}, packages = "ryandexdirect", globals = "logins") #     resolved(future.kw) #     future.result.1 &lt;- value(future.kw)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุญุงูู ูุนุฑูุฉ ูุซุงู <strong>ุงูููุฏ 10</strong> .  ุชุณูุญ ูู ูุธููุฉ <code>plan</code> ุจุถุจุท ูุชุบููุฑ ูุถุน ุชูููุฐ ุงูุชุนุจูุฑุงุช ุงููุนุทุงุฉ ุ ููููุง ููู ุฃูููุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em>ุชุชุงุจุนู</em> - ูุฐุง ูู ุงููุถุน ุงูุนุงุฏู ููุนูููุฉ ุ ูุชู ุชูููุฐ ุงูุฃูุงูุฑ ุจุงูุชุณูุณู ูู ุงูุฌูุณุฉ ุงูุญุงููุฉ ุ </li><li style=";text-align:right;direction:rtl">  <em>multisession</em> - ุงููุถุน ุงูููุงุฒู ุ ุณูุชู ุชูููุฐ ุงูุฃูุงูุฑ ูู ุฌูุณุงุช ุงูุชุดุบูู ูู ุงูุฎูููุฉ ุนูู ุงูุฌูุงุฒ ุงูุญุงูู ุ ุจูููุง ูู ูุชู ุญุธุฑ ุฌูุณุฉ ุงูุนูู ุงูุฎุงุตุฉ ุจู ุ </li><li style=";text-align:right;direction:rtl">  <em>ุงููุชูุฉ</em> - ุงููุถุน ุงูููุงุฒู ุ ุณูุชู ุชูููุฐ ุงูุฃูุงูุฑ ุนูู ุงูุฌูุงุฒ ุงูุญุงูู ุฃู ุงูุจุนูุฏ ุ ุนูู ุบุฑุงุฑ ุงูุทุฑููุฉ ุงูุชู ูุชู ุจูุง ุชูููุฐูุง ูู ุงูุญุฒูุฉ <code>parallel</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  ุชุนุชูุฏ ุงูุญุฒูุฉ <code>future</code> ุจุงููุงูู ุนูู ุชูููุฐ ุงูุฃูุงูุฑ ูู ุนูููุงุช ุงูุฎูููุฉ ุฏูู ุญุธุฑ ุงูุฌูุณุฉ ุงูุญุงููุฉ.  ุชุดุบูู ุชูููุฐ ุงูุฃูุงูุฑ ูุชุจุน ูุธููุฉ ููุณ ุงูุงุณู ูู <code>future</code> ุ ูุฐูู ุนูุฏูุง ูููู ุจุชุดุบูู ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">future({yadirGetKeyWords(Login = logins[4])}, packages = "ryandexdirect", globals = "logins")</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูุชู ุญุธุฑ ุฌูุณุชูุง ุงูุญุงููุฉ ูู R ุ ููุชู ุชูููุฐ ุงูุฃูุฑ ูู ุงูุฎูููุฉ ุ ูุชุดุบูู ุฌูุณุฉ R ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุชุญูู ูู ุงูุญุงูุฉ ุงูุญุงููุฉ ูุนูููุฉ ุชูููุฐ ุชุนุจูุฑ ูุนูู ุจุงุณุชุฎุฏุงู ุงููุธููุฉ ุงูุชู ุชู <code>resolved</code> .  ุฃุฎูุฑูุง ุ ูุชู ุงุณุชุฎุฏุงู ุฏุงูุฉ <code>value</code> ููุญุตูู ุนูู ูุชูุฌุฉ ุงูุชูููุฐ <code>future</code> .  ุฅุฐุง ููุช ุจุชุดุบูู ุฏุงูุฉ <code>value</code> ูุจู ุงูุชุดุบูู <code>future</code> ูู ุฌูุณุฉ ุชุดุบูู ููุงุฒูุฉ ุ ูุณูุชู ุญุธุฑ ุฌูุณุฉ ุงูุนูู ุงูุญุงููุฉ ุญุชู ููุชูู ุชุนุจูุฑ ุงูุฌูุณุฉ ุงูููุงุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู ุงูุนูู ุงูุฃูุซุฑ ุชูุฏูุง ูู ุงุณุชุฎุฏุงู <code>future</code> ุจุงูุชุฒุงูู ูุน <code>promises</code> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุฏ 11: ูุซุงู ุนูู ูุดุงุฑูุฉ ุญุฒู "ุงููุณุชูุจู" ู "ุงููุนูุฏ"</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(future) library(promises) #    plan(multiprocess) #      #    future.kw &lt;- future({suppressMessages( yadirGetKeyWords(Login = logins[4]))}, packages = "ryandexdirect", globals = "logins") %...&gt;% #     future, #      nrow() %...&gt;% paste("words loaded") %...&gt;% print()</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุชููุฑ ุญุฒูุฉ <code>promises</code> ูุฌููุนุฉ ูู ูุดุบูู ุฎุทูุท ุงูุฃูุงุจูุจ ุงูุชู ุชููู ุชูุงููุง ุงููุธุงุฆู <code>future</code> . </p><br><p style=";text-align:right;direction:rtl">  ูู ูุซุงู <strong>ุงูููุฏ 11</strong> ุ ูู ุงูุฎูููุฉ ุ ูุจุฏุฃ ุนูููุฉ ุชูุฒูู ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุญุณุงุจ ุฅุนูุงูู ูุงุญุฏ.  ุนูุงูุฉ ุนูู ุฐูู ุ ููุชุธุฑ ูุดุบู ุฎุท ุงูุฃูุงุจูุจ <code>%...&gt;%</code> ุฏูู ุญุธุฑ ุฌูุณุฉ ุงูุนูู <code>future</code> ุ ููููู ุจุชูููุฐ ุงูุนูููุงุช ุงููุชุจููุฉ.  ูุชูุฌุฉ ูุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ูู <code>future</code> ุ ุณูุชู ุนุฑุถ ุนุฏุฏ ุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ุงูุญุณุงุจ ุงููุญุฏุฏ ูู ูุญุฏุฉ ุงูุชุญูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[1] "1855 words loaded"</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ูู ููุงูุฉ ุงูููุงู ุ ุณูุชู ุนุฑุถ ูุซุงู ุชูุถูุญู ุฃูุซุฑ ููุฌููุนุฉ ูู <code>future</code> <code>promises</code> . </blockquote><p style=";text-align:right;direction:rtl">  ุจุดูู ุงูุชุฑุงุถู ุ ุชููู ุงูุญุฒูุฉ <code>future</code> ููุณูุง ุจุชุตุฏูุฑ ูุณุงุญุฉ ุงูุนูู ุจุฃููููุง ุฅูู ูู ุฌูุณุฉ ุชุดุบูู ูุชูุงุฒูุฉ ุ ููู ููููู ุฃูุช ุจููุณู ุชุญุฏูุฏ ูุงุฆูุฉ ุจุงููุงุฆูุงุช ููุชุตุฏูุฑ ุจุงุณุชุฎุฏุงู ูุณูุทุฉ <em>globals</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุชูุตูู ุงูุญุฒู <code>future</code> ูุฌุจ <code>future</code> ุชูุฑูุฑ ูุชุฌู ูุญุชูู ุนูู ุฃุณูุงุฆูู ุฅูู ูุณูุทุฉ <em>ุงูุญุฒู</em> . </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุนุฏูุง ุฅูู ูููุชูุง ุ ุณูููู ูุซุงู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงูู ูู ุงููุถุน ุงููุชูุงุฒู ุจุชุญููู ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูู 4 ุญุณุงุจุงุช: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ 12: ูุซุงู ุนูู ุญู ูุดููุฉ ุจุงุณุชุฎุฏุงู ุงูุญุฒูุฉ ุงููุณุชูุจููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(future) library(tictoc) #   plan("multisession", workers = 4) tic() #   futs &lt;- lapply(logins, #      function(i) #        #   future({ yadirGetKeyWords(Login = i) %&gt;% mutate(login = i) }, packages = c("ryandexdirect", "dplyr"))) completed &lt;- sapply(futs, resolved) #    kw &lt;- lapply(futs, value) #    toc() #    #     result.future &lt;- dplyr::bind_rows(kw)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุคุฏู ุงูููุช: <code>14.83 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl">  ูุชูุฒูู ูุงุฆูุฉ ุจุงููููุงุช ุงูุฑุฆูุณูุฉ ูู ูุถุน ูุชุนุฏุฏ ุงูุฎููุท ูู ุฌููุน ุญุณุงุจุงุช ุงูุฅุนูุงูุงุช ุงููุฏุฑุฌุฉ ูู <em>ุชุณุฌููุงุช ุฏุฎูู</em> ุงููุชุฌูุงุช <em>ุ</em> ุชุญุชุงุฌ ุฅูู ุชุดุบูู <code>future</code> ูููุตู ูู ุงูุฎูููุฉ.  ูู ูุซุงู ุงูุชุนูููุฉ <strong>ุงูุจุฑูุฌูุฉ 12 ุ</strong> ูููุฐ ูุฐุง ุจุงุณุชุฎุฏุงู ูุธููุฉ <code>lapply</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ุงูุนูู <code>lapply</code> ูู ูุงุฆูุฉ <code>future</code> ุฃุทููุช.  ููููู ุงูุชุญูู ูู ุญุงูุฉ ูู ุงุณุชุฎุฏุงู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>sapply(futs, resolved)</code> ุ ูุงูุฐู ุณูุนูุฏ ูุชุฌููุง ููุทูููุง ุญูุซ ูุนูู <em>TRUE</em> ุฃู <code>future</code> ุชุญูู ุ ูุฃู <em>FALSE</em> ูุฐุง <code>future</code> ููุฏ ุงูุชูุฏู ุญุงูููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุญุตูู ุนูู ูุชุงุฆุฌ ูู ูู <code>future</code> ุ ุจุนุฏ ุงูุชูุงู ุนูููู ุ ูุณุชุฎุฏู ุงูุฃูุฑ <code>lapply(futs, value)</code> . </p><br><p style=";text-align:right;direction:rtl">          : <code>result.future &lt;- dplyr::bind_rows(kw)</code> . </p><br><h3 id="obyortki-nad-future" style=";text-align:right;direction:rtl">   <code>future</code> </h3><br><p style=";text-align:right;direction:rtl">      ,      (   <br> <code>future</code> ),      . </p><br><h6 id="paket-futureapply" style=";text-align:right;direction:rtl">  <code>future.apply</code> </h6><br><p style=";text-align:right;direction:rtl"> <code>future.apply</code>     <code>future</code> ,  . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 13:       future.apply</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(future.apply) library(tictoc) #    plan("multisession", workers = 4) tic() #   kw.future.apply &lt;- future_sapply(logins, #    ,   function(x) { #     yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = FALSE, #    #   future.packages = c("ryandexdirect", "dplyr"), future.globals = TRUE ) toc() #   </code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  : <code>17.28 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl">   <strong> 13</strong> ,  <code>future.apply</code>         <code>future</code> ,         . </p><br><p style=";text-align:right;direction:rtl">         4 : <code>plan("multisession", workers = 4)</code> . </p><br><p style=";text-align:right;direction:rtl"> <code>future_sapply</code>      <em>logins</em>    .  ุฃู   ,  ,        <code>sapply</code> ,    . </p><br><p style=";text-align:right;direction:rtl">      <code>future_sapply</code>    <em>future.packages</em> .             <em>future.globals</em> .       ,              . </p><br><h4 id="paket-furrr" style=";text-align:right;direction:rtl">  <code>furrr</code> </h4><br><p style=";text-align:right;direction:rtl">     <code>future</code> .          <code>purrr</code> ,   <code>furrr</code>     . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 14:      furrr</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(furrr) library(tictoc) #   cl &lt;- parallel::makeCluster(4) plan(cluster, workers = cl) tic() #   furrr.kw &lt;- future_map(logins, ~ #   function(.x) yadirGetKeyWords(Login = .x) %&gt;% mutate(login = .x), .options = future_options(packages = c("ryandexdirect", "dplyr"), globals = c())) toc() #    #      result.furrr &lt;-dplyr::bind_rows(furrr.kw)</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  : <code>15.45 sec elapsed</code> </p><br><p style=";text-align:right;direction:rtl"> <code>furrr</code>          <code>purrr</code> .     <code>purrr</code>  ,          . </p><br><p style=";text-align:right;direction:rtl">           <em>.options</em> .     <em>.options</em>  <code>future_options</code>     ,         . </p><br><p style=";text-align:right;direction:rtl">   <strong> 14</strong>    <em>packages</em>  <em>globals</em>    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.options = future_options(packages = c("ryandexdirect", "dplyr"), globals = c())</code> </pre> <br><h1 id="test-skorosti" style=";text-align:right;direction:rtl">   </h1><br><p style=";text-align:right;direction:rtl">           <code>rbenchmark</code> . </p><br><p style=";text-align:right;direction:rtl">    ,          <code>future</code>  <code>promises</code> .                . </p><br><p style=";text-align:right;direction:rtl">   ,     20       4     () . </p><br><p style=";text-align:right;direction:rtl">    = (T[1] * 20) + (T[2] * 20) + (T[N] * 20) </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> 15:        future  promises</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(furrr) library(parallel) library(dplyr) library(future) library(ryandexdirect) library(tictoc) library(rbenchmark) #   logins &lt;- c("login1", "login2", "login3", "login4") #        #        par par.furrr &lt;- function(logins) { cl &lt;- parallel::makeCluster(4) plan(cluster, workers = cl) furrr.kw &lt;- future_map(logins, ~ yadirGetKeyWords(Login = .x) %&gt;% mutate(login = .x), .options = future_options(packages = c("ryandexdirect", "dplyr"), globals = c())) result.furrr &lt;-dplyr::bind_rows(furrr.kw) } par.future &lt;- function(logins) { plan("multisession", workers = 4) futs &lt;- lapply(logins, function(i) future({ yadirGetKeyWords(Login = i) %&gt;% mutate(login = i) }, packages = c("ryandexdirect", "dplyr"))) completed &lt;- sapply(futs, resolved) kw &lt;- lapply(futs, value) result.future &lt;- dplyr::bind_rows(kw) } par.future.apply &lt;- function(logins) { plan("multisession", workers = 4) kw.future.apply &lt;- future_sapply(logins, function(x) { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = FALSE, future.packages = c("ryandexdirect", "dplyr"), future.globals = TRUE ) result.future.apply &lt;- dplyr::bind_rows(kw.future.apply) } par.parallel &lt;- function(logins) { cl &lt;- parallel::makeCluster(4) clusterExport(cl = cl, varlist = "logins") clusterEvalQ(cl = cl, { library(ryandexdirect) library(dplyr) } ) parallel.kw &lt;- parSapplyLB(cl = cl, X = logins, FUN = function(x) { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = F) stopCluster(cl) result.parallel &lt;- dplyr::bind_rows(parallel.kw) } #          seq seq.apply &lt;- function(logins) { kw.sapply &lt;- sapply( logins, function(x) { yadirGetKeyWords(Login = x) %&gt;% mutate(login = x) }, simplify = FALSE ) result.sapply &lt;- do.call("rbind", kw.sapply) } seq.purrr &lt;- function(logins) { kw.purrr &lt;- map_df( logins, ~ { yadirGetKeyWords(Login = .x) %&gt;% mutate(login = .x) } ) result.purrr &lt;- do.call("rbind", kw.purrr) } #       rbenchmark #   future + promises #  ,       #          plan(list(tweak(multisession, workers = 2), tweak(multisession, workers = 4))) tic() speed.test &lt;- future({ #          within(benchmark(furrr = par.furrr(logins), future = par.future(logins), future.apply = par.future.apply(logins), parallel = par.parallel(logins), apply = seq.apply(logins), purrr = seq.purrr(logins), replications = c(20), columns = c('test', 'replications', 'elapsed'), order = c('elapsed', 'test')), { average = round(elapsed/replications, 2) }) }, packages = c("dplyr", "ryandexdirect", "rbenchmark", "parallel", "purrr", "future", "promises", "furrr", "future.apply"), globals = c("logins", "par.furrr", "par.future", "par.future.apply", "par.parallel", "seq.apply", "seq.purrr")) %...&gt;% print() %...T&gt;% toc() message("My Session is not blocked")</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">       3370 , ..   . </p><br><p style=";text-align:right;direction:rtl">           .  ,               <code>future</code>   ,       <code>promises</code>    ,                  . </p><br><p style=";text-align:right;direction:rtl">        ,       .         "My Session is not blocked",       ,       , ..      . </p><br><p style=";text-align:right;direction:rtl">  <code>promises</code>   : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>%...&gt;%</code> โ     <code>%&gt;%</code> ,     .  ุฃู   ,       <code>resolved</code> ,     <code>future</code> ,          <code>value</code>          .       ,         <code>print</code> . </li><li style=";text-align:right;direction:rtl"> <code>%...T&gt;%</code> โ  <code>%T&gt;%</code> ,  ,          .    ,          ,     , ..    ..  <code>print</code>       ,   ,    . </li><li style=";text-align:right;direction:rtl"> %...T!% โ      . </li></ul><br><p style=";text-align:right;direction:rtl">  <strong> 15</strong>  <code>plan</code>    <code>tweak</code> ( <code>plan(list(tweak(multisession, workers = 2), tweak(multisession, workers = 4)))</code> ),      ,    2 ,   <code>future</code>       4 . </p><br><p style=";text-align:right;direction:rtl">       : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">My Session is not blocked test replications elapsed average 4 parallel 20 393.02 19.65 1 furrr 20 402.09 20.10 2 future 20 431.19 21.56 3 future.apply 20 432.29 21.61 5 apply 20 847.77 42.39 6 purrr 20 864.19 43.21 3370.55 sec elapsed</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/16e/906/831/16e90683145df442ca830a6758734cbe.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">   ,        <code>parallel</code> ,        .    <code>furrr</code> ,     <code>future</code>  <code>future.apply</code> . </p><br><p style=";text-align:right;direction:rtl">     1 ,           ,   .         ,      API .     . </p><br><p style=";text-align:right;direction:rtl">   ,     4        ,          . </p><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">               R,             API. </p><br><p style=";text-align:right;direction:rtl">   ,     API    .              <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">" R    ,  1"</a> . </p><br><p style=";text-align:right;direction:rtl">          : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> doSNOW / doParallel + foreach </li><li style=";text-align:right;direction:rtl"> future + promises </li><li style=";text-align:right;direction:rtl"> future.apply / furrr </li><li style=";text-align:right;direction:rtl"> parallel </li></ul><br><p style=";text-align:right;direction:rtl">         ,   ,        . </p><br><p style=";text-align:right;direction:rtl">         ,          R  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar448404/">https://habr.com/ru/post/ar448404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar448392/index.html">ุทุฑููุชุงู ูููููุฉ ูุฎุทุท ุงููุดุงุท</a></li>
<li><a href="../ar448394/index.html">ุงูุฅุตุฏุงุฑ 12 ุชุทูู ุงูููู! (ููู ููุฒุฉ ูุจูุฑุฉ ููุบุฉ ูููุฑุงู ูุงูุฑูุงุถูุงุช)</a></li>
<li><a href="../ar448396/index.html">ุงูุงุณุชุนุฏุงุฏ ูููุช ุงูุชุดุบูู ุงููุชุตูุฏ ูุฎุฏูุฉ ูุงุชุจ ุงูุนุฏู ุนูู ูุธุงู macOS Mojave</a></li>
<li><a href="../ar448400/index.html">Netplan ูููููุฉ ุทุจุฎู ุจุดูู ุตุญูุญ</a></li>
<li><a href="../ar448402/index.html">ูุดู ุชุฑุญูู ุดูุงุฏุฉ ุงููุฑุฌุน ุงููุตุฏู (CA) ูู Windows 2008R ุฅูู Windows 2012 R2</a></li>
<li><a href="../ar448408/index.html">DCIM - ููุชุงุญ ุฅุฏุงุฑุฉ ูุฑูุฒ ุงูุจูุงูุงุช</a></li>
<li><a href="../ar448410/index.html">ูุชู ุฅูุดุงุก ุฃุฌูุฒุฉ ุงูุชุชุจุน ูู Google ูู ุนุฏุฏ ูู ุงูููุงุฑุฏ ุงูุฅููุชุฑูููุฉ ุงูุฑูุณูุฉ ุงูุฑุณููุฉ</a></li>
<li><a href="../ar448414/index.html">ูุฎุชุจุฑ ุงูููุฒู ููุชุญูู ุงูุฐุงุชู ุ ุฃู ูุง ูุดุฑุงุก ูู ูุฌููุนุฉ ุงููููุณ</a></li>
<li><a href="../ar448416/index.html">ุฃุณูู ุทุฑููุฉ ูุฅุฌุฑุงุก ุงูุฏุฑุฏุดุฉ ูู ุชุทุจูู iOS</a></li>
<li><a href="../ar448420/index.html">ูู ุงูุญูุงุฉ ูุน Kubernetes: ููู ูู ูุดุชู ุฎุงุฏู Spaniards HTTP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>