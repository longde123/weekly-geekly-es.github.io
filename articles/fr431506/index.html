<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧝🏽 ☝🏽 🕙 Xcode et débogage avancé dans LLDB: Partie 1 📵 🏓 🕞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, aujourd'hui, je vous suggère de vous familiariser avec la traduction d'un article sur le débogage des applications iOS à l'aide de LLDB. 

 L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode et débogage avancé dans LLDB: Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431506/">  Bonjour, aujourd'hui, je vous suggère de vous familiariser avec la traduction d'un article sur le débogage des applications iOS à l'aide de LLDB. <br><br>  L'une des parties les plus intrigantes de la présentation de la WWDC 2018, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Xcode et le débogage avancé en LLDB, a</a> été introduite par les ingénieurs d'Apple.  Ils ont donné quelques conseils utiles sur la façon d'utiliser les points d'arrêt dans Xcode et le débogueur de bas niveau (LLDB) pour optimiser le processus de débogage des bogues, où que le développeur les ait détectés. <br><br>  L'article se compose de trois parties, nous allons passer en revue les principaux points qui ont été énoncés à la WWDC.  J'ai créé un projet de démonstration spécifiquement pour mieux comprendre comment utiliser différents types de points d'arrêt (points d'arrêt) en conjonction avec LLDB pour capturer et déboguer des bogues dans votre application. <br><a name="habracut"></a><br>  <b>Projet de démonstration</b> <br><br>  J'ai créé un projet de tâche modèle que chaque développeur iOS a rencontré d'une manière ou d'une autre.  Il est très important de comprendre comment cela fonctionne avant de plonger dans la lecture de l'article.  Voici les principales fonctions du projet de démonstration: <br><br><ul><li>  Lorsqu'il est ouvert, nous voyons un contrôleur de vue de table qui charge une liste de publications. </li><li>  Lors du défilement vers le bas, le contrôleur de vue de table charge de nouveaux messages. </li><li>  Au total, vous pouvez charger des publications <b>7 fois</b> . </li><li>  Vous pouvez mettre à jour la liste des publications en tirant vers le bas à l'aide du contrôleur de rafraîchissement (tirez vers le bas pour rafraîchir). </li><li>  Dans la barre de navigation en haut, il y a 2 étiquettes (étiquettes) qui montrent combien de messages ont été téléchargés (étiquette de droite) et combien de fois l'utilisateur a déjà téléchargé des messages (étiquette de gauche). </li></ul><br>  Vous pouvez télécharger le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de</a> démonstration à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> si vous préférez Objective-C. <br><br>  Si vous préférez Swift, alors à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> . <br><br>  Lancez Xcode et c'est parti! <br><br>  <b>Bugs à corriger!</b> <br><br>  Vous vous êtes donc familiarisé avec le projet et avez probablement remarqué les erreurs suivantes: <br><br><ul><li>  Lorsque vous tirez la table vers le bas, le rafraîchisseur ne met pas à jour les messages. </li><li>  L'utilisateur ne reçoit aucune notification (à l'aide du contrôleur d'alerte) indiquant que la demande HTTP n'a pas été exécutée en raison de problèmes de connexion. </li><li>  Vous pouvez charger des publications <b>plus de</b> 7 fois. </li><li>  L'indicateur de gauche (étiquette) dans la barre de navigation, qui est responsable du comptage du nombre de téléchargements, ne fonctionne pas. </li></ul><br>  <i>Une règle importante:</i> jusqu'à la fin de cet article, vous n'arrêtez pas le compilateur et ne redémarrez pas l'application après le tout premier lancement.  Vous corrigez les erreurs lors de l'exécution du programme. <br><br>  <b>Le pouvoir des équipes pédagogiques</b> <br><br>  Passons au premier bug. <br><br>  <i>1. Lorsque vous tirez le tableau vers le bas, les messages ne sont pas mis à jour.</i> <br><br>  Comment reproduire l'erreur: <br><br><ul><li>  Lancez l'application, les 10 premiers messages sont déjà chargés. </li><li>  Faites défiler vers le bas pour charger plus de messages. </li><li>  Faites défiler jusqu'au début du tableau et faites-le glisser pour actualiser. </li><li>  Les nouveaux messages <b>ne se</b> chargent <b>pas</b> et les anciens ne disparaissent pas, et le compteur de messages n'est pas réinitialisé. </li></ul><br>  L'approche standard pour corriger de telles erreurs consiste à examiner ce qui se passe à l'intérieur du sélecteur de méthode responsable de l'UIRefreshControl de notre table.  Accédez à <i>PostsTableViewController</i> dans la section de <i>prise en charge du contrôle de rafraîchissement de la marque pragma</i> .  À partir de la fonction setupRefreshControl, nous pouvons conclure que le sélecteur responsable de la mise à jour des publications est la fonction <i>reloadNewPosts</i> .  Ajoutons un point d'arrêt à la première ligne de cette fonction et découvrons ce qui se passe exactement ici.  Faites maintenant défiler jusqu'au début du tableau et faites glisser l'écran pour actualiser. <br><br><img src="https://habrastorage.org/webt/y3/rf/n0/y3rfn0yze8cpzuo8ynnycdyjmcu.png" alt="image"><br>  <i>Objectif-c</i> <br><br><img src="https://habrastorage.org/webt/mj/ll/mc/mjllmcygydlepgcvosfa9bkzta4.png" alt="image"><br>  <i>Rapide</i> <br><br>  Le débogueur s'est arrêté au point d'arrêt que vous avez défini.  Pour une étude plus approfondie, cliquez sur le bouton «sauter le bloc» du débogueur. <br><br><img src="https://habrastorage.org/webt/p_/cg/kh/p_cgkha7n4s4t5n31x_ovls0dh8.png" alt="image"><br>  <i>Objectif-c</i> <br><br><img src="https://habrastorage.org/webt/nn/rx/x6/nnrxx6h-k0zpifidj3fwjhamhby.png" alt="image"><br>  <i>Rapide</i> <br><br>  Maintenant, nous comprenons ce qui ne va pas! <br><br>  La condition if n'est pas remplie (c'est-à-dire que la variable booléenne isPullDownToRefreshEnabled est définie sur NO) et, par conséquent, le code de mise à jour des publications est ignoré. <br><br>  L'approche standard consiste à arrêter le compilateur, puis vous devez définir isPullDownToRefreshEnabled sur YES / true et cela résoudrait le problème.  Mais il serait beaucoup plus pratique de tester d'abord notre hypothèse avant d'apporter des modifications au code et sans avoir à arrêter le compilateur.  C'est là que les commandes d'instruction du débogueur s'avèrent très utiles. <br><br>  Double-cliquez sur le point d'arrêt installé ou faites un clic droit sur «Modifier le point d'arrêt» et cliquez sur le bouton «Ajouter une action».  Sélectionnez également le type d'action «Commande du débogueur». <br><br><img src="https://habrastorage.org/webt/nv/t4/1l/nvt41lhf9rvk-avgsxxvlhukey0.png" alt="image"><br><br>  Maintenant, nous devons définir la propriété isPullDownToRefreshEnabled sur YES / true.  Ajoutez la commande suivante au débogueur. <br><br>  Objectif-c <br><br><pre><code class="objectivec hljs">expression <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.isPullDownToRefreshEnabled = <span class="hljs-literal"><span class="hljs-literal">YES</span></span></code> </pre> <br><br><img src="https://habrastorage.org/webt/pr/lg/nf/prlgnfmlxs2wbfgtpihv_rmzhe0.png" alt="image"><br><br>  Rapide <br><br><pre> <code class="objectivec hljs">expression <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.isPullDownToRefreshEnabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/vs/vd/ke/vsvdkeecwr9xehdhzv2-g_m6fuu.png" alt="image"><br><br>  Ensuite, vérifiez que la case «Continuer automatiquement après l'évaluation des actions» est cochée.  Il est chargé de s'assurer que le débogueur <b>ne</b> s'arrête <b>pas</b> au point d'arrêt à chaque fois et continue automatiquement de travailler avec la commande nouvellement ajoutée.  Faites maintenant défiler jusqu'au début du tableau et faites glisser vers le bas pour actualiser. <br><br>  Voila, les nouveaux messages ont chargé et remplacé les anciens et, en conséquence, le compteur de messages a été mis à jour. <br><br>  Nous avons résolu le premier problème, procurez-vous votre arme anti-bug, nous passons au second. <br><br>  <i>2. L'utilisateur ne reçoit aucune notification (à l'aide du contrôleur d'alerte) indiquant que la demande HTTP n'a pas été exécutée en raison de problèmes de connexion.</i> <br><br>  Comment reproduire l'erreur: <br><br><ul><li>  Déconnectez la connexion Internet de votre iPhone / simulateur. </li><li>  Faites défiler jusqu'au début du tableau et faites glisser vers le bas pour actualiser. </li><li>  Les nouveaux messages ne seront pas téléchargés en raison d'une erreur de connexion Internet. </li><li>  L'utilisateur ne reçoit aucune notification d'erreur. </li></ul><br>  Accédez à <i>PostsTableViewController</i> dans la section <i>Networking de la marque pragma</i> .  Il a exactement une fonction <i>loadPosts</i> .  Il utilise une instance de gestionnaire de réseau commune pour exécuter une requête HTTP GET qui renvoie un tableau de publications via un gestionnaire de fin «succès» ou <i>NSError</i> via un gestionnaire de fin «échec». <br><br>  Nous devons ajouter le code à la fermeture «infructueuse» afin d'afficher un contrôleur d'alerte.  Si vous accédez à la section <i>Support de la</i> marque pragma, vous verrez qu'il existe déjà une fonction <i>presentNetworkFailureAlertController</i> chargée d'afficher le contrôleur d'alerte souhaité.  Tout ce que nous devons faire est d'appeler cette fonction dans une fermeture "échouée" dans <i>loadPosts</i> . <br>  La manière traditionnelle consiste à arrêter le simulateur et à ajouter le code souhaité.  Allons dans l'autre sens! <br><br>  Ajoutez un point d'arrêt à l'intérieur de la fermeture «infructueuse» après la ligne <br><br>  Objectif-c <br><br><pre> <code class="objectivec hljs">[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> updateUIForNetworkCallEnd];</code> </pre> <br>  Rapide <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateUIForNetworkCallEnd()</code> </pre> <br>  Double-cliquez sur le point d'arrêt installé ou faites un clic droit sur «Modifier le point d'arrêt» et cliquez sur le bouton «Ajouter une action».  Sélectionnez également le type d'action «Commande du débogueur». <br><br>  Ajoutez la commande suivante au débogueur. <br><br>  Objectif-c <br><br><pre> <code class="objectivec hljs">expression [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> presentNetworkFailureAlertController]</code> </pre> <br><img src="https://habrastorage.org/webt/yk/uc/c8/ykucc8u3xzycqniypviaxv-6xtq.png" alt="image"><br><br>  Rapide <br><br><pre> <code class="objectivec hljs">expression <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.presentNetworkFailureAlertController()</code> </pre> <br><img src="https://habrastorage.org/webt/sh/wt/vc/shwtvcvn7duukyn1dv6riwzd2xi.png" alt="image"><br><br>  Vérifiez que la case «Continuer automatiquement après l'évaluation des actions» est cochée. <br>  Avec Internet désactivé, faites défiler jusqu'au début du tableau et faites glisser vers le bas pour mettre à jour, ou vous pouvez faire défiler jusqu'à la fin du tableau et essayer de charger de nouveaux messages.  Voici ce que vous verrez: <br><br><img src="https://habrastorage.org/webt/qu/gh/qe/qughqe1uswydvwtwferl3ctgyra.png" alt="image"><br><br>  Ce que nous venons de faire s'appelle <i>«</i> injecter <i>» le</i> code à l'aide d'une commande ajoutée au débogueur à un point d'arrêt spécifique. <br><br>  <b>Un petit résumé</b> <br><br>  Énumérons encore une fois ce que nous pouvons faire avec les commandes de débogage ajoutées au point d'arrêt: <br><br><ul><li>  Fonctionne avec une valeur de propriété existante. </li><li>  Ajoutez une nouvelle ligne de code. </li></ul><br>  Les deux tâches ont été effectuées pendant l'exécution du programme.  Nous n'avons essentiellement pas besoin d'arrêter le compilateur pour corriger les erreurs et redémarrer l'application. <br><br>  <b>Et ensuite?</b> <br><br>  De plus, j'attire votre attention sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deuxième partie de l'article</a> , où nous corrigerons davantage d'erreurs et découvrirons un autre type de point d'arrêt (point d'arrêt) - le point d'observation (point d'observation). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431506/">https://habr.com/ru/post/fr431506/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431496/index.html">Comment la technologie aide les enseignants des classes spéciales</a></li>
<li><a href="../fr431498/index.html">WebP reprendra bientôt le Web, mais ce ne sera pas long</a></li>
<li><a href="../fr431500/index.html">Bases de données et Kubernetes (revue et rapport vidéo)</a></li>
<li><a href="../fr431502/index.html">Conférence pour les développeurs iOS Kolesa Mobile 3.0. Reportage vidéo</a></li>
<li><a href="../fr431504/index.html">Phishing - fonctionne. Chronique du vol de l'iPhone XS suivi du vol de données iCloud</a></li>
<li><a href="../fr431508/index.html">Gestion efficace des transactions au printemps</a></li>
<li><a href="../fr431510/index.html">Comment collecter des informations sur le contour. Acheter avec du sélénium</a></li>
<li><a href="../fr431512/index.html">Une petite étude des propriétés d'un simple U-net, un réseau convolutionnel classique pour la segmentation</a></li>
<li><a href="../fr431514/index.html">Interview pour les enquêteurs</a></li>
<li><a href="../fr431516/index.html">Un jour dans la vie d'un conseiller financier</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>