<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âš—ï¸ ğŸ‘©ğŸ½â€ğŸ“ ğŸ¤šğŸ½ Kompilator sudut 200-garis ğŸ›€ğŸ¾ ğŸ­ ğŸ‘©ğŸ»â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai Nama saya Roman, dan saya bukan penemu sepeda. Saya suka kerangka Angular dan ekosistem di sekitarnya, dan saya mengembangkan aplikasi web saya de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kompilator sudut 200-garis</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448022/"> Hai  Nama saya Roman, dan saya bukan penemu sepeda.  Saya suka kerangka Angular dan ekosistem di sekitarnya, dan saya mengembangkan aplikasi web saya dengannya.  Dari sudut pandang saya, keunggulan utama Angular dalam jangka panjang didasarkan pada pemisahan kode antara HTML dan TypeScript, yang dijelaskan secara rinci oleh salah satu pengembangnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengapa-angular-renders-components-with.html</a> Keuntungan ini memiliki kelemahan: kebutuhan untuk kompilasi pada prinsipnya dan kompleksitas komponen kompilasi dinamis dalam runtime.  Dan saya ingin menggunakan sintaks template Angular yang sudah dikenal untuk memberi pengguna aplikasi mereka kemampuan untuk menyesuaikan template surat, menghasilkan laporan dan spreadsheet untuk dicetak, atau mengatur format ekspor untuk file xml!  Untuk mengetahui bagaimana melakukan ini, selamat datang ke kucing! <br><a name="habracut"></a><br><h3>  Tantangan </h3><br>  Secara umum, penggunaan templat Angular oleh pengguna mungkin terlihat seperti ini: kami memiliki kumpulan data tertentu: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">project</span></span>: <span class="hljs-string"><span class="hljs-string">'MySuperProject'</span></span>, <span class="hljs-attr"><span class="hljs-attr">userName</span></span>: <span class="hljs-string"><span class="hljs-string">'Roman'</span></span>, <span class="hljs-attr"><span class="hljs-attr">role</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>, <span class="hljs-attr"><span class="hljs-attr">projectLink</span></span>: <span class="hljs-string"><span class="hljs-string">'https://example.com/my-super-projectproject'</span></span> }</code> </pre> <br>  Penting untuk memberikan kesempatan untuk mengkonfigurasi teks surat, yang akan dikirim kepada pengguna setelah mengedit proyek.  Menggunakan template Angular, mungkin terlihat seperti ini: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>  !  {{project}}    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{projectLink}}"</span></span></span><span class="hljs-tag">&gt;</span></span>3D   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"role == 'admin'"</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{projectLink}}?mode=edit"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h3>  Pustaka Ng-templat </h3><br>  Masalah ini dapat diselesaikan dengan menggunakan kompiler Angular pada klien (atau bahkan sisi server), tetapi sangat memakan waktu dan akan membutuhkan menyeret banyak megabyte kode ke klien.  Mengapa kompiler Angular begitu besar?  Ini disebabkan oleh fakta bahwa ia mendukung lautan beragam fungsi untuk menyusun komponen dan modul, dan juga mengandung pengurai HTML sendiri!  Jadi saya memutuskan untuk menulis konverter template Angular minimal yang akan menggunakan parser HTML yang dibangun ke dalam browser.  Itu mungkin dilakukan hanya dalam 200 dengan beberapa baris kode dalam beberapa jam.  Saya memutuskan untuk membagikan hasilnya dengan publik di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> <br><br>  Menggunakan perpustakaan ng-template cukup sederhana: <br><br>  Instal ketergantungan dari npm <br><br><pre> <code class="bash hljs">npm install --save @quanterion/ng-template</code> </pre> <br>  atau melalui benang <br><br><pre> <code class="bash hljs">yarn add @quanterion/ng-template</code> </pre> <br>  Dan gunakan sebagai berikut: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { compileTemplate, htmlToElement } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@quanterion/ng-template'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> test() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Roman'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> element = htmlToElement(<span class="hljs-string"><span class="hljs-string">`&lt;div&gt;{{name}}&lt;/div&gt;`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> compileTemplate(element, data); alert(element.outerHTML); }</code> </pre><br><h4>  Sintaks yang didukung </h4><br><ol><li>  Ekspresi {{ekspresi}} dengan kemampuan untuk mengakses variabel dan fungsi panggilan </li><li>  Templat-templat </li><li>  Wadah </li><li>  Ketentuan * ngIf + * ngIf as </li><li>  Siklus * ngFor </li><li>  Gaya [style.xxx] = "value" dan [style.xxx.px] = "value" </li><li>  Kelas bersyarat [class.xxx] = "nilai" </li><li>  Observable {{name $}} dengan langganan otomatis ke suatu nilai (sebagai pipa async) </li></ol><br>  Lihat tes <a href="">ng-template.spec.ts</a> untuk lebih jelasnya. <br><br><h3>  Menggunakan Eval </h3><br>  Untuk mengevaluasi ekspresi dalam template, eval digunakan dengan preferensi dan pelacur.  Faktanya adalah bahwa dalam template Sudut akses ke variabel digunakan tanpa awalan JavaScript biasa ini.  Oleh karena itu, Anda perlu memanggil eval (), yang memiliki semua variabel dari objek data dalam lingkup.  Saya tidak berhasil membuat kode seperti untuk eval (), karena  lihat kode <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expression = <span class="hljs-string"><span class="hljs-string">'a+b()'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">'a =1; b = ??;'</span></span> + expression);</code> </pre><br>  tidak mengizinkan fungsi lewat <br><br>  Solusinya ditemukan dengan membuat fungsi yang parameternya memiliki nama bidang objek dengan data: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> entries = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data ) { entries.push([property, data[property]]) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> params = entries.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fun = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>(<span class="hljs-string"><span class="hljs-string">'code'</span></span>, ...params, <span class="hljs-string"><span class="hljs-string">`return eval(code)`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> args = entries.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> expression = <span class="hljs-string"><span class="hljs-string">'a+b()'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = fun.call(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, expression , ...args);</code> </pre><br>  NB: Saya berharap di masa depan, ketika API dari kompiler Ivy baru stabil, akan mungkin untuk menghasilkan seperangkat operator untuk Ivy dan membuat komponen lengkap dalam dinamika! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan ke sumber</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448022/">https://habr.com/ru/post/id448022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448004/index.html">Jawaban untuk "Kuda-kuda untuk programmer mikrokontroler"</a></li>
<li><a href="../id448008/index.html">Memilih Strategi Siklus Hidup Perangkat Lunak dengan Berbagai Ujung Depan yang Bergantung</a></li>
<li><a href="../id448010/index.html">3 minggu dengan Galaxy S10: pro dan kontra</a></li>
<li><a href="../id448016/index.html">Analisis klinis urin di rumah pada strip tes: pro dan kontra</a></li>
<li><a href="../id448018/index.html">Acara digital di Moskow dari 15 April hingga 21 April</a></li>
<li><a href="../id448024/index.html">Regulator Eropa menentang spanduk kue</a></li>
<li><a href="../id448026/index.html">Proyek Perangkat Lunak dan Evolusi OOP</a></li>
<li><a href="../id448030/index.html">Tampilan dan optimalisasi output terminal di web</a></li>
<li><a href="../id448032/index.html">Lebih banyak robot: Walmart memperkenalkan ribuan mesin untuk beroperasi di tokonya</a></li>
<li><a href="../id448034/index.html">Cari tugas dalam JIRA (bahasa sederhana). Bagian 1: Pencarian Cepat dan Dasar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>