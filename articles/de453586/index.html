<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèß üìØ ü§¶üèæ IntersectionObserver API und verz√∂gertes Laden von Bildern üë®üèæ‚Äçü§ù‚Äçüë®üèΩ üåà üëµüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Verwendung des verz√∂gerten Ladens von Bildern zur Verbesserung der Leistung von Webprojekten ist eine beliebte Optimierungstechnik. Die Sache ist,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IntersectionObserver API und verz√∂gertes Laden von Bildern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/453586/">  Die Verwendung des verz√∂gerten Ladens von Bildern zur Verbesserung der Leistung von Webprojekten ist eine beliebte Optimierungstechnik.  Die Sache ist, dass Bilder ‚Äûschwere‚Äú Ressourcen sind, die mit modernen Websites √ºberf√ºllt sind.  Wir haben bereits etwas dar√ºber ver√∂ffentlicht.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier k√∂nnen</a> Sie lesen, was das verz√∂gerte Laden der Walmart-Website bewirkt hat, und erfahren, wie Sie IntersectionObserver in React-Projekten verwenden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist</a> ein Artikel zur Optimierung statischer Sites.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier finden Sie</a> aktuelles Material zum verz√∂gerten Laden mit Browser-Tools. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ao/_d/7t/ao_d7twyxzavzolz2ascrhfk1g4.png"></a> <br><br>  Heute machen wir Sie auf eine √úbersetzung eines Artikels aufmerksam, in dem die Verwendung der IntersectionObserver-API am Beispiel einer einfachen Webseite beschrieben wird.  Dieses Material ist f√ºr Anf√§nger gedacht. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Was ist das verz√∂gerte Laden von Bildern?</font> </h2><br>  Bei der Analyse der Anwendungsleistung stehen zwei Indikatoren im Vordergrund: Zeit bis zur ersten Interaktivit√§t (Time To Interactive) und Ressourcenverbrauch (Ressourcenverbrauch).  Sie werden sich unweigerlich denen stellen m√ºssen, die sich mit Webentwicklung besch√§ftigen.  Dar√ºber hinaus k√∂nnen Probleme mit Anwendungen auftreten, nicht nur, weil es lange dauert, bis sie f√ºr die Arbeit bereit sind oder zu viele Ressourcen verbrauchen.  In jedem Fall ist es jedoch sehr wichtig, die Ursachen dieser Probleme so fr√ºh wie m√∂glich zu finden und sicherzustellen, dass die Probleme nicht einmal auftreten. <br><br>  Die Verwendung von Technologien zum Laden verz√∂gerter Bilder in Webanwendungen minimiert das Risiko von Leistungsproblemen.  Wenn wir n√§mlich das verz√∂gerte Laden unter dem Gesichtspunkt seines Einflusses auf den Zeitpunkt des Betriebs der Seite und den Ressourcenverbrauch analysieren, erhalten wir Folgendes: <br><br><ol><li>  Zeit f√ºr die erste Interaktivit√§t.  Dies ist die Zeit, die die Webanwendung ben√∂tigt, um die Benutzeroberfl√§che zu laden und in einen Zustand zu bringen, der f√ºr den Benutzer geeignet ist, damit zu arbeiten.  Das verz√∂gerte Laden (au√üerdem geht es nicht nur um Bilder) optimiert die Reaktionszeit von Anwendungen dank der Technologie, Code zu trennen und nur das zu laden, was eine bestimmte Seite ben√∂tigt oder was zu einem bestimmten Zeitpunkt ben√∂tigt wird. </li><li>  Ressourcenverbrauch.  Menschen sind ungeduldige Wesen.  Wenn das Laden einer Website l√§nger als 3 Sekunden dauert, verlassen 70% der Benutzer diese Website.  Webanwendungen sollten nicht so lange geladen werden.  Durch das verz√∂gerte Laden k√∂nnen Sie die Ressourcen reduzieren, die f√ºr die Arbeit der Seiten erforderlich sind.  Dies kann beispielsweise bedeuten, dass der Code eines bestimmten Projekts in Fragmente aufgeteilt wird, die nur auf den Seiten geladen werden, die sie ben√∂tigen.  Infolgedessen steigt die Standortleistung und der Systemressourcenverbrauch sinkt. </li></ol><br>  Lazy-Loading-Technologien beschleunigen also Anwendungen und verk√ºrzen die Zeit, die sie herunterladen und aufrufen.  Dies wird dadurch erreicht, dass Ressourcen nur dann geladen werden, wenn sie ben√∂tigt werden. <br><br>  Hier sind einige Vorteile, die das verz√∂gerte Laden Webprojekten bietet: <br><br><ul><li>  Seiten werden schneller geladen und sind betriebsbereit. </li><li>  Beim ersten Laden von Seiten m√ºssen Sie weniger Daten √ºbertragen und verarbeiten. </li>
</ul><br><h2>  <font color="#3AC1EF">Lazy Laden von Bildern mit der IntersectionObserver API</font> </h2><br>  Wenn Sie dar√ºber nachdenken, wie Webseiten geladen werden, wird deutlich, dass es keinen Sinn macht, Bilder oder andere Ressourcen herunterzuladen, die f√ºr den Benutzer nicht sichtbar sind.  Beim verz√∂gerten Laden werden zuerst Bilder geladen, die sich im sichtbaren Bereich der Seite befinden.  Wenn der Benutzer die Seite scrollt, werden dann andere Bilder geladen, die in den sichtbaren Bereich der Seite fallen. <br><br>  Betrachten Sie ein Beispiel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b9/e36/782/7b9e367828e6af1dfd070461196dc7c1.png"></div><br>  <i><font color="#999999">Seite und ihr sichtbarer Bereich</font></i> <br><br>  Schauen Sie sich die vorherige Abbildung an.  Hier sehen Sie den Browser und die darin geladene Webseite.  Die Bilder <code>#IMG_1</code> und <code>#IMG_2</code> befinden sich im Bereich der Seite.  Dies bedeutet, dass sie f√ºr den Benutzer sichtbar sind und sich innerhalb der Grenzen des Bereichs des Browserfensters befinden, der auf dem Bildschirm angezeigt wird. <br><br>  Diese Reihenfolge der Arbeit mit der Seite kann nicht als ideal angesehen werden, wenn beim Laden die Bilder <code>#IMG_1</code> , <code>#IMG_2</code> , <code>#IMG_3</code> und <code>#IMG_4</code> .  Nur <code>#IMG_1</code> und <code>#IMG_2</code> sind f√ºr den <code>#IMG_2</code> sichtbar, und <code>#IMG_3</code> und <code>#IMG_4</code> sind vor ihm verborgen.  Wenn Sie das erste und das zweite Bild beim Laden der Seite laden, aber das dritte und vierte Bild nicht herunterladen, kann sich dies positiv auf die Leistung der Website auswirken.  Wir sprechen n√§mlich √ºber Folgendes.  Wenn der Benutzer die Seite so scrollt, dass das dritte Bild sichtbar wird, wird es geladen.  Wenn der Bildlauf fortgesetzt wird und das vierte Bild sichtbar wird, wird es ebenfalls geladen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/783/85b/173/78385b17309c48150e2ce83554e7b857.png"></div><br>  <i><font color="#999999">Scrollen einer Seite und Laden von Bildern</font></i> <br><br>  Nachdem wir genau herausgefunden haben, wie wir mit Bildern arbeiten m√∂chten, fragen wir uns, wie wir herausfinden k√∂nnen, dass ein bestimmtes Element einer Seite in den sichtbaren Bereich f√§llt.  Moderne Browser verf√ºgen √ºber eine API, mit der der Programmierer herausfinden kann, wann ein bestimmter Bereich der Seite sichtbar wird.  Es geht um die IntersectionObserver-API.  Mithilfe asynchroner Mechanismen k√∂nnen Sie die √úberwachung von Elementen organisieren und Benachrichtigungen erhalten, wenn ein Element den G√ºltigkeitsbereich des Dokuments √ºberschreitet oder die Grenze eines anderen Elements √ºberschreitet. <br><br>  Um das verz√∂gerte Laden von Bildern zu konfigurieren, m√ºssen wir zun√§chst einen Vorlagencode f√ºr das Element vorbereiten, das zur Beschreibung der Bilder verwendet wird.  Da ist er: <br><br><pre> <code class="javascript hljs">&lt;img <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span> src=<span class="hljs-string"><span class="hljs-string">"lazy_img.jpg"</span></span> data-src=<span class="hljs-string"><span class="hljs-string">"real_img.jpg"</span></span> /&gt;</code> </pre> <br>  Mit der Klasse k√∂nnen Sie ein Element als Bild identifizieren, auf das das verz√∂gerte Laden angewendet wird.  Mit dem Attribut <code>src</code> k√∂nnen Sie ein Platzhalterbild anzeigen, bevor Sie das tats√§chliche Bild anzeigen.  <code>data-src</code> speichert die Adresse des realen Bildes, die geladen wird, wenn das Element den sichtbaren Bereich der Seite betritt. <br><br>  Schreiben wir nun den Code, der das verz√∂gerte Laden implementiert.  Wie bereits erw√§hnt, verwenden wir die IntersectionObserver-API, um den Moment zu erkennen, in dem das Bild in den Seitenanzeigebereich gelangt. <br><br>  Erstellen Sie zun√§chst eine Instanz von <code>IntersectionObserver</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(...);</code> </pre> <br>  Der <code>IntersectionObserver</code> Konstruktor akzeptiert eine Funktion mit zwei Parametern.  Einer von ihnen speichert ein Array, das aus Elementen besteht, die √ºberwacht werden m√ºssen, der andere eine <code>IntersectionObserver</code> Instanz.  Es sieht so aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">//...   }) });</span></span></code> </pre> <br>  Der Funktionscode pr√ºft, ob die durch die <code>entries</code> Eintragsarray dargestellten Bilder das Ansichtsfenster schneiden.  Wenn dies der Fall ist, zeichnet das <code>src</code> Attribut des entsprechenden Bildes auf, was in seinem <code>data-src</code> Attribut enthalten war. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(entry.isIntersecting) {           <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target           lazyImage.src = lazyImage.dataset.src       }   }) });</code> </pre> <br>  Hier pr√ºfen wir anhand der Bedingung <code>if(entry.isIntersecting) {...}</code> , ob das Element den <code>if(entry.isIntersecting) {...}</code> des Browsers √ºberschreitet.  In diesem <code>lazyImage</code> speichern wir das <code>img</code> Element in der <code>lazyImage</code> Konstante.  Dann schreiben wir in sein <code>src</code> Attribut, was in sein <code>data-src</code> Attribut war.  Dadurch wird das Bild geladen und angezeigt, dessen Adresse in <code>data-src</code> gespeichert ist.  Im Browser sieht es so aus, als w√ºrde das Platzhalterbild <code>lazy_img.jpg</code> durch ein echtes Bild ersetzt. <br><br>  Jetzt m√ºssen wir die <code>.observe()</code> -Methode unserer <code>IntersectionObserver</code> Instanz verwenden, um mit der √úberwachung der f√ºr uns interessanten Elemente zu beginnen: <br><br><pre> <code class="javascript hljs">imageObserver.observe(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>));</code> </pre> <br>  Hier w√§hlen wir alle <code>img</code> Elemente mit der Klasse <code>lzy_img</code> dem <code>document.querySelectorAll('img.lzy_img')</code> mit dem Befehl <code>document.querySelectorAll('img.lzy_img')</code> und √ºbergeben sie an die Methode <code>.observe()</code> .  Nachdem er eine Liste von Elementen erhalten hat, beginnt er mit deren Beobachtung. <br><br>  Um dieses Beispiel zu testen, initialisieren wir zun√§chst das Node.js-Projekt: <br><br><pre> <code class="javascript hljs">mkdir lzy_img cd lzy_img npm init -y</code> </pre> <br>  Erstellen Sie nun die Datei <code>lzy_img</code> im Ordner <code>lzy_img</code> : <br><br><pre> <code class="html hljs xml">touch index.html</code> </pre> <br>  F√ºgen Sie den folgenden Code hinzu: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  M√∂glicherweise stellen Sie fest, dass hier 5 Bilder beschrieben sind, in denen der Platzhalter <code>lazy_img.jpg</code> beim Laden angezeigt wird.  Das <code>data-src</code> Attribut von jedem von ihnen enth√§lt Informationen √ºber reale Bilder.  Hier ist eine Liste der im Projekt verwendeten Bildnamen: <br><br><pre> <code class="plaintext hljs">lazy_img.jpg img_1.jpg img_2.jpg img_3.jpg img_4.jpg img_5.jpg</code> </pre> <br>  Sie m√ºssen alle diese Bilder selbst erstellen, indem Sie den Projektordner in die in der folgenden Abbildung gezeigte Ansicht bringen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb4/44e/3cb/bb444e3cbd0ad4e432901dba7a3b2710.png"></div><br>  <i><font color="#999999">Projektordner</font></i> <br><br>  In meinem Fall wurde die Datei <code>lazy_img.jpg</code> mit Windows Paint erstellt und die realen Bilder ( <code>img_*.jpg</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jpg</a> ) wurden von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pixabay.com √ºbernommen</a> . <br><br>  Beachten Sie, dass der zum Erstellen der <code>IntersectionObserver</code> Instanz verwendete R√ºckruf einen Aufruf von <code>console.log()</code> .  Auf diese Weise k√∂nnen wir lernen, wie Operationen zum Laden verschiedener Bilder ausgef√ºhrt werden. <br><br>  <code>index.html</code> , verwenden wir jetzt das <code>http-server</code> Paket: <br><br><pre> <code class="javascript hljs">npm i http-server</code> </pre> <br>  F√ºgen Sie die Eigenschaft <code>start</code> zum <code>package.json</code> Datei <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"http-server ./"</span></span> }</code> </pre> <br>  <code>npm run start</code> Befehl <code>npm run start</code> im Terminal aus. <br><br>  √ñffnen Sie nun den Browser und gehen Sie zur Adresse <code>127.0.0.1:8080</code> .  Unsere <code>index.html</code> Seite ganz am Anfang sieht ungef√§hr so ‚Äã‚Äãaus wie in der folgenden Abbildung. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd9/e0e/f53/fd9e0ef534be767b804179f38ed134a3.png"></div><br>  <i><font color="#999999">Seite ohne echte Bilder</font></i> <br><br>  M√∂glicherweise stellen Sie fest, dass dort, wo echte Bilder sein sollten, nur Platzhalter angezeigt werden.  Hier gehen wir davon aus, dass sich das erste Bild im Anzeigebereich befindet, sodass der Browser mit dem Herunterladen beginnt.  Infolgedessen sieht die Seite jetzt so aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ef/004/1ee/1ef0041eee5e8713415df640faed6cb8.png"></div><br>  <i><font color="#999999">Browser hat erstes Bild hochgeladen</font></i> <br><br>  Andere Bilder noch nicht hochgeladen.  Sie haben den Sichtbereich noch nicht erreicht. <br><br>  Wenn Sie beim Betrachten der Konsole durch die Seite scrollen, werden Sie ein Problem feststellen.  Es besteht darin, dass der Browser beim Scrollen durch dasselbe Bild im Anzeigefenster mehrmals versucht, es herunterzuladen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c4/074/83e/3c407483e097cb7c2dd7ce3b82b37027.png"></div><br>  <i><font color="#999999">Mehrere Uploads desselben Bildes</font></i> <br><br>  Das brauchen wir √ºberhaupt nicht.  Dies f√ºhrt zu unn√∂tiger Verschwendung von Systemressourcen und beeintr√§chtigt die Projektleistung. <br><br>  Um dieses Problem zu l√∂sen, m√ºssen wir das <code>img</code> Element, f√ºr das das reale Image bereits geladen ist, aus der Liste der Elemente entfernen, die unsere <code>IntersectionObserver</code> Instanz √ºberwacht.  Wir m√ºssen auch die Klasse <code>lzy_img</code> aus diesem Element entfernen.  So sieht es im bearbeiteten R√ºckruffunktionscode aus: <br><br><pre> <code class="javascript hljs">&lt;script&gt;   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {           entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry.isIntersecting) {                   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target                   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"lazy loading "</span></span>, lazyImage)                   lazyImage.src = lazyImage.dataset.src                   lazyImage.classList.remove(<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span>);                   imgObserver.unobserve(lazyImage);               }           })       });       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>)       arr.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) =&gt;</span></span> {           imageObserver.observe(v);       })   }) &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Nach dem Laden des realen Bildes des entsprechenden <code>img</code> Elements wird dessen <code>lzy_img</code> Klasse <code>lzy_img</code> und das Element aus der Liste der Elemente ausgeschlossen, die <code>IntersectionObserver</code> beobachtet. <br><br>  Hier ist der Beispielcode: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                       lazyImage.classList.remove(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lzy_img"</span></span></span><span class="javascript">);                       imgObserver.unobserve(lazyImage);                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Wir haben das einfachste Beispiel f√ºr die Implementierung des Systems des verz√∂gerten Ladens von Bildern untersucht.  Mit IntersectionObserver k√∂nnen Sie jedoch recht komplexe und verz√∂gerte Ladeschemata erstellen.  Wenn Sie sich f√ºr dieses Thema interessieren, empfehlen wir Ihnen, die am Anfang des Materials genannten Ver√∂ffentlichungen zu lesen und die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation zu</a> lesen. <br><br>  <b>Liebe Leser!</b>  Haben Sie Beispiele f√ºr die Verbesserung der Website-Leistung nach der Implementierung eines verz√∂gerten Bildladesystems? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453586/">https://habr.com/ru/post/de453586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453576/index.html">Frontend Weekly Digest (20. - 26. Mai 2019)</a></li>
<li><a href="../de453578/index.html">Von Kritikern zu Algorithmen: Labels, Unternehmen und Musikkultur des 20. Jahrhunderts</a></li>
<li><a href="../de453580/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 366 (20. - 26. Mai 2019)</a></li>
<li><a href="../de453582/index.html">Node.js Projekte, in denen es besser ist, keine Sperrdateien zu verwenden</a></li>
<li><a href="../de453584/index.html">Machen Sie sich bereit: Angular 8 ist nah</a></li>
<li><a href="../de453588/index.html">Opus √ºber Seine Majest√§t Clay. Vierter Teil - Silikone</a></li>
<li><a href="../de453590/index.html">Ihr pers√∂nliches SaaS</a></li>
<li><a href="../de453592/index.html">Verdienen Sie Ihren Lebensunterhalt und machen Sie Spiele: 11 Levelord-Tipps</a></li>
<li><a href="../de453594/index.html">Spiele f√ºr den Lebensunterhalt machen: 11 Tipps von Levelord</a></li>
<li><a href="../de453596/index.html">Betr√ºger und EDS - alles ist sehr schlecht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>