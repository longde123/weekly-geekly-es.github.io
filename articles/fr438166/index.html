<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèø üçí üîã Interaction entre un site dans un navigateur et un programme ex√©cut√© localement üëò üë©‚Äçüöí üî¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parfois, il devient n√©cessaire de transf√©rer des donn√©es entre une application ex√©cut√©e dans un navigateur et un programme s'ex√©cutant sur le m√™me sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Interaction entre un site dans un navigateur et un programme ex√©cut√© localement</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438166/"><p>  Parfois, il devient n√©cessaire de transf√©rer des donn√©es entre une application ex√©cut√©e dans un navigateur et un programme s'ex√©cutant sur le m√™me syst√®me sur lequel le navigateur s'ex√©cute.  Cela peut √™tre n√©cessaire, par exemple, si nous devons travailler avec des √©quipements connect√©s localement.  Lecteur de carte √† puce, cl√© de cryptage mat√©riel, etc. </p><br><p><img src="https://habrastorage.org/webt/7i/-0/z3/7i-0z38huftai6kwoeaejgvh5ms.jpeg"></p><br><p>  <sup>Photo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Bande auto-aliment√©e">d'ici</a></sup> </p><br><p>  Les premiers √† penser sont trois fa√ßons de r√©soudre ce probl√®me: </p><br><ol><li>  Faites avec les outils du navigateur ou √©crivez des plugins pour eux </li><li>  Organiser l'√©change de donn√©es via le backend, en agissant comme interm√©diaire </li><li>  Ajoutez un service HTTP au programme et acc√©dez-y directement depuis le navigateur </li></ol><br><p>  Le troisi√®me √©l√©ment semble bon, vous permet de supprimer l'autorisation dans le programme, ne n√©cessite aucune interface utilisateur.  Essayons de l'impl√©menter en √©crivant un programme en C # sous le .NET Framework 4. Puisque nous parlons de .NET, la solution ne sera que pour Windows (XP et plus r√©cent).  Nous allons rendre l'application web angulaire. </p><a name="habracut"></a><br><h1 id="pochemu-ne-1-i-2">  Pourquoi pas 1 et 2? </h1><br><p>  Le premier √©l√©ment apportera certainement beaucoup de douleur, vous devrez prendre en charge les navigateurs s√©par√©ment, vous pouvez faire loin de tout dans les plug-ins de navigateur.  N√©anmoins, th√©oriquement, il est possible de travailler avec des cartes √† puce via des plugins.  Mais vous avez besoin d'un moyen plus simple. </p><br><p>  Le deuxi√®me point est facile √† mettre en ≈ìuvre, mais pour ce sch√©ma, vous devrez faire une autorisation non seulement sur le site, mais aussi dans l'application locale.  Cela signifie qu'une sorte d'interface sera n√©cessaire, mais lors du changement de mot de passe, une nouvelle autorisation dans le programme sera √©galement requise.  De plus, dans les r√©seaux d'entreprise, il y aura des probl√®mes suppl√©mentaires avec le r√©seau, ils ont souvent acc√®s √† Internet via des proxy avec filtrage et autorisation s√©v√®res, vous devez √©galement cr√©er une interface pour configurer les proxy et vous ne pouvez pas toujours vous d√©barrasser des param√®tres automatiques.  Il sera plus difficile pour un utilisateur loin de l'informatique de travailler avec cela; nous allons cr√©er plus de travail de support technique.  Bien s√ªr, vous pouvez cr√©er un package d'installation individuellement pour chaque utilisateur afin de supprimer le besoin d'autorisation principale, mais cela ne fera qu'ajouter aux probl√®mes. </p><br><h1 id="pri-chem-tut-https">  Qu'est-ce que HTTPS a √† voir avec cela? </h1><br><p>  Lorsqu'un site s'ex√©cute sur HTTPS, les navigateurs bloquent le t√©l√©chargement de contenu actif via HTTP.  Cependant, selon la logique des choses, les navigateurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">devraient consid√©rer la</a> demande √† la machine locale via HTTP <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comme s√ªre</a> et ne devraient pas la bloquer.  Ce ne fut pas tout √† fait le cas. <br>  Le tableau pr√©sente les r√©sultats d'une petite √©tude du comportement des navigateurs sur la plateforme Windows: </p><br><table><thead><tr><th></th><th>  Firefox 65 </th><th>  Chrome 72 </th><th>  IE 11 </th></tr></thead><tbody><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost /</a> </td><td>  ‚ùå Chargement de contenu actif mixte bloqu√© </td><td>  ‚úì </td><td>  ‚ùå Erreur: l'acc√®s est refus√© 0x8007005 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://127.0.0.1/</a> </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚ùå Erreur: l'acc√®s est refus√© 0x8007005 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https: // localhost /</a> </td><td>  ‚ùå SEC_ERROR_UNknown_ISSUER </td><td>  ‚úì </td><td>  ‚úì </td></tr></tbody></table><br><p>  Le tableau montre le comportement des navigateurs lors d'une tentative de demande √† l'adresse appropri√©e.  Les navigateurs du moteur Chromium se comportent de mani√®re similaire √† Chrome et le comportement d'Edge 44 est similaire √† celui d'IE 11. Un certificat valide est √©mis pour HTTPS, sign√© avec un certificat racine auto-sign√©.  Le comportement pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://127.0.0.1</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https: // localhost est le</a> m√™me, juste pour 127.0.0.1, vous devez √©galement √©mettre un certificat, et les certificats pour les adresses IP sont rarement trouv√©s, alors sautons ce point. </p><br><p>  Tout fonctionne dans Chrome.  Chrome et IE utilisent le magasin de certificats syst√®me, donc HTTPS y fonctionne √©galement.  Firefox utilise son propre magasin de certificats, il ne fait donc pas confiance √† notre certificat auto-sign√©.  Firefox et IE ne font pas confiance au nom de l'h√¥te local, et c'est vrai, car personne ne garantit qu'il se r√©sout en 127.0.0.1 (bien qu'ils puissent simplement le v√©rifier comme Chrome le fait). </p><br><p>  Le principal probl√®me: IE ne permet pas d'acc√©der au programme via HTTP.  Alors agitez les certificats que nous ne pouvons pas √©viter. </p><br><p>  Pour travailler avec les navigateurs, vous devrez √©galement sp√©cifier les en-t√™tes corrects Access-Control-Allow-Origin, Access-Control-Allow-Methods, Access-Control-Allow-Headers ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CORS</a> ) dans le programme. </p><br><h1 id="ssl-sertifikat">  Certificat SSL </h1><br><p>  Vous pouvez cr√©er un enregistrement DNS pour votre domaine, par exemple local.example.com, qui sera r√©solu en 127.0.0.1.  √âmettez un certificat SSL pour ce domaine, distribuez-le avec le programme.  Vous devrez distribuer la cl√© priv√©e de ce certificat avec le programme.  C'est totalement inadapt√©.  Et le certificat du programme devra √©galement √™tre mis √† jour. </p><br><p>  IE ne fera pas confiance √† un certificat SSL auto-sign√©, il doit √™tre sign√© avec un certificat racine de confiance (et il peut √™tre auto-sign√©). </p><br><p>  Vous pouvez g√©n√©rer un certificat racine et un certificat SSL et les distribuer avec le programme, en les ajoutant au magasin de certificats local.  Cela semble dangereux.  Et il peut √©galement √™tre n√©cessaire de r√©voquer ou de renouveler le certificat.  Par cons√©quent, nous g√©n√©rerons des certificats avec des cl√©s directement sur l'ordinateur de l'utilisateur au premier d√©marrage du programme. </p><br><h1 id="sozdanie-sertifikatov-v-c35">  Cr√©ation de certificats en C # </h1><br><p>  Pour .NET, il existe une biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>BouncyCastle</b></a> qui peut faire tout ce dont nous avons besoin.  Le seul probl√®me est que pour ajouter un certificat au magasin, vous devrez demander une augmentation des privil√®ges.  Vous aurez √©galement besoin de droits √©lev√©s pour utiliser netsh pour s√©curiser le certificat sur un port sp√©cifique du syst√®me. </p><br><pre><code class="plaintext hljs">netsh http add sslcert ipport=0.0.0.0:{PORT} certhash={certThumbprint}</code> </pre> <br><p>  Dans l'exemple, la m√©thode RegisterSslOnPort de la classe SslHelper fait ce travail. </p><br><h1 id="http-servis-v-programme-na-c35">  Service HTTP dans le programme C # </h1><br><p>  Pour cr√©er un serveur HTTP (S) l√©ger, nous utilisons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la biblioth√®que Nancy</a> .  Nancy est un framework web l√©ger pour .NET, simple et facile √† utiliser.  Beaucoup a √©t√© √©crit sur lui, y compris <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Habr√©</a> .  Gr√¢ce au module Nancy.SelfHosting, nous pouvons h√©berger notre application sans utiliser IIS. </p><br><p>  Par exemple, cr√©ons un point de terminaison traitant de l'addition de deux nombres.  Il est important ici de d√©finir les en-t√™tes CORS corrects, sinon le navigateur n'ex√©cutera pas de demande √† notre API. </p><br><div class="spoiler">  <b class="spoiler_title">Nancymodule</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CalcNancyModule</span></span> : <span class="hljs-title"><span class="hljs-title">NancyModule</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalcNancyModule</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,      After.AddItemToEndOfPipeline((ctx) =&gt; ctx.Response .WithHeader("Access-Control-Allow-Origin", GetOrigin(ctx)) .WithHeader("Access-Control-Allow-Methods", "POST,GET") .WithHeader("Access-Control-Allow-Headers", "Accept, Origin, Content-type")); Get["/Calc"] = _ =&gt; { //      .NET  }; Get["/Calc/Add"] = _ =&gt; { //       (num1 + num2) }; } private string GetOrigin(NancyContext ctx) { // Origin,     //    //      - // https://app.example.com return ctx.Request?.Headers["Origin"]?.FirstOrDefault() ?? ""; } }</span></span></code> </pre> </div></div><br><p>  Ajoutez l'initialisation Nancy √† notre application et nous sommes pr√™ts pour la bataille. </p><br><div class="spoiler">  <b class="spoiler_title">Initialisation Nancy</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hostConfigs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HostConfiguration(); hostConfigs.UrlReservations.CreateAutomatically = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; hostConfigs.RewriteLocalhost = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uris = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">$"http://localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{HTTPPORT}</span></span></span><span class="hljs-string">"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">$"http://127.0.0.1:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{HTTPPORT}</span></span></span><span class="hljs-string">"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">$"https://localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{HTTPSPORT}</span></span></span><span class="hljs-string">"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NancyHost(hostConfigs, uris)) { host.Start(); }</code> </pre> </div></div><br><p>  Au premier d√©marrage, vous devez g√©n√©rer des certificats et les placer dans le magasin, en demandant les droits appropri√©s.  La <a href="">classe SslHelper est utilis√©e</a> pour ces manipulations, dans lesquelles la seule m√©thode publique CheckOrCreateCertificates fait le travail.  En tant que param√®tres, des certificats SubjectName lui sont transmis.  La m√©thode v√©rifie si les certificats n√©cessaires sont disponibles et sinon, le syst√®me les cr√©e. </p><br><p>  Pour simuler un travail acharn√© et de longs retards dans l'exemple, ajoutez Thread.Sleep (1000) √† nos appels d'API. </p><br><p>  Sur cette application est pr√™te √† fonctionner, allez sur le Web. </p><br><h1 id="veb-prilozhenie">  Application Web </h1><br><p>  Comme vous pouvez le voir dans le tableau de comportement du navigateur, un endpoint ne peut pas √™tre supprim√©; au moins deux doivent √™tre utilis√©s: </p><br><blockquote><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://127.0.0.1</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https: // localhost</a> </li></ul><br></blockquote><p>  Dans une application Web, nous devons d√©terminer si nous sommes dans IE (ou Edge) - utilisez HTTPS, sinon - HTTP.  Vous pouvez le rendre plus fiable et ne pas savoir dans quel navigateur nous nous trouvons, mais essayez simplement d'ex√©cuter une demande √† la m√©thode GET / Calc de notre API, si la demande est r√©ussie, nous travaillons, sinon, nous essayons un autre protocole. </p><br><p>  Tout cela n'est n√©cessaire que si l'application Web elle-m√™me utilise HTTPS, car lors de l'utilisation du protocole HTTP, les navigateurs n'imposent pas de restrictions sur les demandes, seuls les en-t√™tes CORS corrects sont n√©cessaires. </p><br><p>  Dans l'application angulaire, cr√©ez un service InteractionService qui v√©rifiera la disponibilit√© du point de terminaison local d'abord via HTTP, puis par HTTPS.  La v√©rification est effectu√©e par la m√©thode checkAvailable et le r√©sultat de la v√©rification est disponible lors de l'abonnement √† la variable $ disponible de type BehaviorSubject avec la valeur initiale false. <br></p><p>  Nous ajoutons le travail d'ajout de nombres au composant AppComponent.  Lorsque vous cliquez sur le bouton ¬´Calculer¬ª, l'application Web fait une demande √† GET / Calc / Add? Num1 = {num1} &amp; num2 = {num2}.  La r√©ponse ou l'erreur s'affiche dans le champ R√©sultat. </p><br><p>  Lors du d√©bogage, m√™me via HTTPS, vous ne remarquerez peut-√™tre pas de probl√®mes, car le domaine des demandes sera le m√™me - localhost.  Par cons√©quent, vous devez tester l'application avec un nom de domaine diff√©rent. <br>  Pour simplifier au maximum le travail de d√©ploiement d'une application web, nous utilisons le service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://stackblitz.com</a> , c'est un IDE web pour angulaire et pas seulement avec un avant-go√ªt de VSCode.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'application termin√©e est disponible sur le lien</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Et vous pouvez creuser le code ici</a> . </p><br><p>  L'application ne fonctionnera pas de mani√®re interactive sur stackblitz, vous devez l'ouvrir dans un onglet priv√© s√©par√© ou dans un autre navigateur √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://angular-pfwfrm.stackblitz.io</a> . </p><br><h1 id="kak-poprobovat">  Comment essayer? </h1><br><p>  L'application Web est facilement lanc√©e √† l'aide de stackblitz, simplement en cliquant sur le lien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://angular-pfwfrm.stackblitz.io</a> . </p><br><p>  Vous pouvez ex√©cuter l'application Web localement. </p><br><div class="spoiler">  <b class="spoiler_title">Pour cela, vous avez besoin</b> <div class="spoiler_text"><p>  Pour ce faire, vous devez cloner le r√©f√©rentiel: </p><br><pre> <code class="plaintext hljs">git clone https://github.com/jdtcn/InteractionExample.git cd InteractionExample</code> </pre> <br><p>  dans le dossier AngularWebApp, vous devez ex√©cuter les commandes: </p><br><pre> <code class="plaintext hljs">npm install ng serve --ssl true</code> </pre> <br><p>  L'application Web sera disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https: // localhost: 4200 /</a> </p></div></div><br><p>  L'application locale peut √™tre compil√©e √† partir de l'exemple (ouvrez CsClientApp.sln √† partir du dossier CsClientApp) √† l'aide de Visual Studio et l'ex√©cuter, ou utiliser le script du programme <b><a href="">LINQPad</a></b> . </p><br><p>  Si vous √™tes un d√©veloppeur .NET et n'utilisez pas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LINQPad</a> , assurez-vous de lire √† ce sujet, une chose indispensable dans le d√©veloppement.  Pour ex√©cuter l'exemple, vous devez ouvrir le script dans LINQPad'e (la premi√®re fois que vous devez ex√©cuter LINQPad avec des droits d'administrateur pour que les certificats soient install√©s) et installer les packages de nouget BouncyCastle, Nancy, Nancy.Hosting.Self, puis ex√©cuter le script.  Apr√®s cela, vous pouvez cliquer sur le bouton "Calculer" dans l'application Web et obtenir le r√©sultat de l'op√©ration. </p><br><h1 id="bezopasnost">  La s√©curit√© </h1><br><p>  Il est important de former correctement les en-t√™tes CORS dans une application r√©elle afin que les m√©chants d'autres sites ne puissent pas acc√©der √† notre programme.  Si le m√©chant a la possibilit√© de travailler avec les privil√®ges de l'utilisateur sur son ordinateur et de contourner la v√©rification CORS, alors il pourra faire tout ce que notre programme peut faire. </p><br><p>  Dans tous les cas, le programme devrait fonctionner avec des droits minimaux, et s'il fait quelque chose de sensible avec les documents, vous devez lui ajouter des demandes de confirmation des op√©rations. </p><br><h1 id="vyvod">  Conclusion </h1><br><p>  La t√¢che apparemment simple s'est av√©r√©e assez volumineuse, et n√©cessitant m√™me des b√©quilles suppl√©mentaires pour travailler avec des certificats. </p><br><p>  Cette approche a bien fonctionn√© dans une application r√©elle.  Bien s√ªr, pour utiliser le code de l'exemple, vous devez ajouter une gestion normale des erreurs. </p><br><p>  Il est pratique de demander une √©l√©vation de privil√®ges lors de l'installation du programme, en utilisant InnoSetup, il est facile de le faire et de passer l'attribut n√©cessaire lors de la premi√®re ex√©cution du programme.  De plus, avant l'installation, il est pratique de v√©rifier la pr√©sence de .NET 4 et de l'installer s'il n'est pas install√©. </p><br><p>  Personne chez Virustotal ne r√©agit √† ce programme, mais j'aimerais bien!  Mais si vous assemblez le package d'installation dans InnoSetup, quelques antivirus de troisi√®me ordre commencent √† fonctionner.  Cela permet de se d√©barrasser de la signature du programme d'installation avec le certificat de signature de code. </p><br><p>  La mise √† jour automatique du programme ici est en coulisses, mais elle ne sera certainement pas superflue dans une application r√©elle.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Squirrel</a> est bien adapt√© pour g√©rer les mises √† jour automatiques.  Il est √©galement pratique d'utiliser l'√©cureuil pour supprimer nos certificats du syst√®me lorsque vous supprimez le programme. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple de code publi√© sur GitHub</a> . </p><br><p>  Merci de votre attention! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438166/">https://habr.com/ru/post/fr438166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438150/index.html">Comment fabriquer un lot de baskets uniques en Chine</a></li>
<li><a href="../fr438152/index.html">¬´Je peux vous parler de la douleur que chaque d√©veloppeur iOS a dans le cul¬ª - 10 questions √† un d√©veloppeur, √©pisode 2</a></li>
<li><a href="../fr438158/index.html">Les courtiers de donn√©es am√©ricains vendent des donn√©es de localisation sans le consentement de l'utilisateur - leur travail sera r√©glement√©</a></li>
<li><a href="../fr438162/index.html">Le tuple d'une personne en bonne sant√©</a></li>
<li><a href="../fr438164/index.html">G√©n√©tique et poulets: prot√©ine CSF1-Fc humaine dans la prot√©ine d'oeuf</a></li>
<li><a href="../fr438168/index.html">Comment casser un appareil photo cher pour que votre femme ne vous tue pas</a></li>
<li><a href="../fr438170/index.html">Prix ‚Äã‚Äãnomm√© d'apr√®s Ilya Segalovich. Histoire de l'informatique et publications de lancement</a></li>
<li><a href="../fr438172/index.html">Apple incapable de d√©placer la production de ses appareils aux √âtats-Unis</a></li>
<li><a href="../fr438174/index.html">Jaune - Vide - Nuage</a></li>
<li><a href="../fr438176/index.html">Pr√©sentation d'IPSec chez Mikrotik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>