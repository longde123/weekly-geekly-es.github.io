<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔺 🛬 🔀 Jangan membuka port ke dunia - mereka akan menghancurkan Anda (risiko) 🧑‍🤝‍🧑 🍫 🧖🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Berkali-kali, setelah audit, tentang rekomendasi saya untuk menyembunyikan port di belakang daftar putih saya bertemu dengan dinding kesalahpahaman. B...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jangan membuka port ke dunia - mereka akan menghancurkan Anda (risiko)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446772/"><p><img src="https://habrastorage.org/webt/an/nt/sv/anntsvhkknayqt3ewhpeum57bj4.jpeg" alt="gambar"></p><br><p>  Berkali-kali, setelah audit, tentang rekomendasi saya untuk menyembunyikan port di belakang daftar putih saya bertemu dengan dinding kesalahpahaman.  Bahkan admin yang sangat keren / DevOps bertanya: "Mengapa?!?" </p><br><p>  Saya mengusulkan untuk mempertimbangkan risiko dalam mengurangi urutan kemungkinan terjadinya dan kerusakan. </p><br><ol><li>  Kesalahan konfigurasi </li><li>  DDoS melalui IP </li><li>  Bruteforce </li><li>  Kerentanan Layanan </li><li>  Kerentanan Stack Kernel </li><li>  Memperkuat serangan DDoS <a name="habracut"></a></li></ol><br><h2 id="oshibka-konfiguracii">  Kesalahan konfigurasi </h2><br><p> Situasi paling khas dan berbahaya.  Bagaimana itu bisa terjadi?  Pengembang perlu dengan cepat menguji hipotesis, ia meningkatkan server sementara dengan mysql / redis / mongodb / elastic.  Kata sandi, tentu saja, rumit, menggunakannya di mana-mana.  Ini membuka layanan ke dunia - akan lebih mudah baginya untuk terhubung dari PC Anda tanpa VPN ini.  Dan sintaks iptables terlalu malas untuk diingat, lagi pula server bersifat sementara.  Hanya beberapa hari pengembangan - ternyata baik-baik saja, Anda bisa menunjukkannya kepada pelanggan.  Pelanggan menyukainya, tidak ada waktu untuk mengulangnya, kami meluncurkannya di PROD! </p><br><p>  Contoh sengaja dibesar-besarkan agar berjalan di atas garu: </p><br><ol><li>  Tidak ada yang lebih permanen daripada sementara - Saya tidak suka frasa ini, tetapi secara subjektif, 20-40% dari server sementara seperti itu tetap untuk waktu yang lama. </li><li>  Kata sandi universal yang kompleks yang digunakan dalam banyak layanan adalah jahat.  Karena, salah satu layanan tempat kata sandi ini digunakan dapat diretas.  Dengan satu atau lain cara, basis data layanan yang diretas berduyun-duyun ke yang digunakan untuk [brute force] *. <br>  Perlu ditambahkan bahwa redis, mongodb, dan elastis setelah instalasi umumnya tersedia tanpa otentikasi, dan seringkali mengisi ulang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">koleksi database terbuka</a> . </li><li>  Tampaknya dalam beberapa hari tidak ada yang akan memindai port 3306 Anda.  Ini salah!  Masscan adalah pemindai yang sangat baik, dan dapat memindai pada port 10M per detik.  Dan di internet hanya ada 4 miliar IPv4.  Dengan demikian, semua port 3306 di Internet dalam 7 menit.  Karl !!!  Tujuh menit! <br>  "Siapa yang peduli?"  - Anda keberatan.  Jadi saya terkejut melihat statistik paket yang dijatuhkan.  Di mana sehari dari 40 ribu upaya untuk memindai dari 3 ribu IP unik?  Sekarang semua orang akan dipindai untuk siapa saja, dari peretas ibu hingga pemerintah.  Pengecekannya sangat sederhana - ambil VPS apa saja seharga $ 3-5 dari maskapai mana pun yang berbiaya rendah **, aktifkan pencatatan paket yang dijatuhkan dan lihat log dalam sehari. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Mengaktifkan Pencatatan</b> <div class="spoiler_text"><p>  Di /etc/iptables/rules.v4 tambahkan di akhir: <br>  -A INPUT -j LOG --log-awalan "[FW - ALL]" --log-level 4 </p><br><p>  Dan di /etc/rsyslog.d/10-iptables.conf <br>  : msg, berisi, "[FW -" /var/log/iptables.log <br>  &amp; berhenti </p></div></div><br><h2 id="ddos-po-ip">  DDoS melalui IP </h2><br><p>  Jika penyerang mengetahui IP Anda, ia dapat mencekik server Anda selama beberapa jam atau hari.  Tidak semua hosting murah memiliki perlindungan DDoS dan server Anda hanya akan terputus dari jaringan.  Jika Anda menyembunyikan server di belakang CDN, jangan lupa untuk mengubah IP, jika tidak, peretas akan google dan DDoS server Anda melewati CDN (kesalahan yang sangat populer). </p><br><h2 id="uyazvimosti-servisov">  Kerentanan Layanan </h2><br><p>  Cepat atau lambat, kesalahan ditemukan di semua perangkat lunak populer, bahkan pada yang paling teruji dan paling kritis.  Di antara para insinyur IS, ada semacam setengah lelucon - keamanan infrastruktur dapat dengan mudah dinilai pada saat pembaruan terakhir.  Jika infrastruktur Anda kaya dengan port yang mencuat ke dunia, dan Anda belum memperbaruinya selama setahun, maka penjaga keamanan mana pun tidak akan memberi tahu Anda bahwa Anda penuh lubang, dan kemungkinan besar sudah diretas. <br>  Perlu juga disebutkan bahwa semua kerentanan yang diketahui pernah diketahui.  Bayangkan saja seorang peretas yang menemukan kerentanan seperti itu, dan memindai seluruh Internet dalam 7 menit untuk mengetahui keberadaannya ... Ini adalah wabah virus baru) Ini perlu diperbarui, tetapi itu dapat merusak produk, katamu.  Dan Anda akan benar jika paket tidak diinstal dari repositori OS resmi.  Dari pengalaman, pembaruan dari repositori resmi jarang memecah prod. </p><br><h2 id="brutfors">  Bruteforce </h2><br><p>  Seperti dijelaskan di atas, ada database dengan setengah miliar kata sandi yang nyaman untuk diketik dari keyboard.  Dengan kata lain, jika Anda tidak membuat kata sandi, tetapi mengetik karakter yang terdekat di keyboard, pastikan * - mereka akan menghapus Anda. </p><br><h2 id="uyazvimosti-steka-yadra">  Kerentanan tumpukan kernel. </h2><br><p>  Itu terjadi **** bahwa itu tidak masalah layanan mana yang membuka port ketika tumpukan kernel jaringan itu sendiri rentan.  Artinya, benar-benar setiap soket tcp / udp pada sistem dua tahun yang lalu rentan terhadap kerentanan DDoS. </p><br><h2 id="usilenie-ddos-atak">  Memperkuat Serangan DDoS </h2><br><p>  Itu tidak akan membawa kerusakan langsung, tetapi bisa menyumbat saluran Anda, menambah beban pada sistem, IP Anda akan masuk ke beberapa daftar hitam *****, dan Anda akan mendapat penyalahgunaan dari host. </p><br><p>  Apakah Anda benar-benar membutuhkan semua risiko ini?  Tambahkan IP rumah dan kantor Anda ke daftar putih.  Bahkan jika itu dinamis, masuk melalui panel admin host, melalui konsol web, dan tambahkan saja yang lain. </p><br><p>  Saya telah membangun dan melindungi infrastruktur TI selama 15 tahun.  Saya telah mengembangkan aturan yang sangat saya rekomendasikan untuk semua orang - <strong>tidak ada pelabuhan yang bisa muncul ke dunia tanpa daftar putih</strong> . </p><br><p>  Sebagai contoh, server web paling aman *** adalah server dengan 80 dan 443 hanya terbuka untuk CDN / WAF.  Dan port layanan (ssh, netdata, bacula, phpmyadmin) harus setidaknya berada di belakang daftar putih, dan bahkan lebih baik untuk VPN.  Jika tidak, Anda berisiko dikompromikan. </p><br><p>  Saya memiliki segalanya.  Tutup porta Anda! </p><br><hr><br><ul><li>  (1) <strong>UPD1</strong> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Di sini</a> Anda dapat memeriksa kata sandi universal keren Anda ( <strong>jangan lakukan ini tanpa mengganti kata sandi ini dengan yang acak di semua layanan</strong> ), jika telah muncul dalam database gabungan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dan di sini</a> Anda dapat melihat berapa banyak layanan yang diretas, tempat surel Anda ditampilkan, dan, dengan demikian, cari tahu apakah kata sandi universal keren Anda telah disusupi. </li><li>  (2) Untuk kredit Amazon, setidaknya ada pemindaian di LightSail.  Rupanya, entah bagaimana disaring. </li><li>  (3) Server web yang lebih aman adalah yang ada di belakang firewall khusus, WAF-nya, tetapi kita berbicara tentang VPS publik / Khusus. </li><li>  (4) Segmentsmak. </li><li>  (5) Firehol. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id446772/">https://habr.com/ru/post/id446772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id446760/index.html">Topik di 3D Expo 2019: Pencetakan Logam 3D, Anton Sotov, Universitas Samara</a></li>
<li><a href="../id446762/index.html">6. Periksa Titik Memulai R80.20. Mulai di SmartConsole</a></li>
<li><a href="../id446764/index.html">Standar WASI: Luncurkan WebAssembly Beyond the Web</a></li>
<li><a href="../id446768/index.html">Pengetikan nominal dalam TypeScript atau cara melindungi antarmuka Anda dari pengidentifikasi asing</a></li>
<li><a href="../id446770/index.html">12 trik JavaScript tidak ditemukan di sebagian besar tutorial</a></li>
<li><a href="../id446774/index.html">Desain Karakter Poli Rendah</a></li>
<li><a href="../id446776/index.html">Bukti Kerja Efektif</a></li>
<li><a href="../id446780/index.html">Cara membuat tema gelap dan tidak membahayakan. Pengalaman Tim Yandex.Mail</a></li>
<li><a href="../id446782/index.html">Yo-ho-ho dan sebotol rum</a></li>
<li><a href="../id446786/index.html">Mengapa saya menolak Disqus dan Anda harus pergi juga</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>